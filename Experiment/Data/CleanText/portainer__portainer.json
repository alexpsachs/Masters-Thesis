{
    "deviantony": "Relic of cloudinovasi-ui. Portainer won't support Prometheus... for now.\n. @SeaOfTea no, at the moment the app templates only supports Dockerhub images. You might want to open a new issue.\n. @raphaelquati I'd accept a PR to have a multi-arch build system ;). @adrianfalleiro awesome ! Keep me posted or join me on Slack you need info or have any questions: http://portainer.io/slack/. Duplication of a container is part of #466 . @PedroMD yes, native basic auth will be supported.. @sabareeshkkanan you can propose a mockup in the UI via a PR, purely front-end. This would help us decide how to create the best UX for this feature.. @MorphBonehunter is right, this will come later this year.. Hey @MorphBonehunter \nThere is no work on this feature yet, the goal here is to allow the management of images inside private/custom registries.\nCurrently, 1.14 allows you to connect to your private/custom registries using credentials.. woops you're right :-). @MorphBonehunter \nThis feature will be available as an extension in the next two months.. Registry manager extension released with 1.20.0 and now publicly available. . Duplicate of #318 \n. With the introduction recently of RBAC, I think that this feature should be reviewed to create read-only users instead of a read-only mode when starting Portainer.. No ETA yet on this @zhy1991 although this is part of the next main features that will be added.. Closing this issue and relocating the discussion in #1259 . I'll close this issue as the UI is actually quite responsive without the wide screen support.. Agree that this should actually be available on details view as well.. Closed in favor of #920 . As stated in https://github.com/portainer/portainer/issues/696, events will be replaced with an audit view. Closing this issue.. - [x] When deleting an image and an error occurs, the message is not displayed.\nIn Docker < 1.12, when an error occurs, the API returns a string message.\nThe following is returned in Docker 1.12:\njson\n{\"message\":\"conflict: unable to delete 70d396eb911f (must be forced) - image is referenced in one or\n more repositories\"}\n. - [x] When removing the network bridge, none or host, the network is removed from the list and a message is displayed saying the network has been deleted successfully.\nBut it is not deleted, the Docker API returns the following:\njson\n{\"message\":\"none is a pre-defined network and cannot be removed\"}\n1.11 returns the following:\njson\nbridge is a pre-defined network and cannot be removed\n. - [x] When starting a container, a success message is displayed but the container is not started.\nThe API returns the following:\njson\n{\"message\":\"starting container with HostConfig was deprecated since v1.10 and removed in v1.12\"}\n. - [x] When trying to remove a running container, a success message is displayed but the container is not removed.\nThe API returns the following:\njson\n{\"message\":\"You cannot remove a running container 0e8ca94432dd2359ea5c53adf7dfb942784e760bd11353299734514cceb7db29\n. Stop the container before attempting removal or use -f\"}\n1.11 returns the following:\njson\nYou cannot remove a running container 36289a87548e13eb649f6f8a8f887cdf2910c524988a0a112b59f7cd074d69ff\n. Stop the container before attempting removal or use -f\n. - [x] The Docker API tends to returns code 200 with an error message as a string when something fails (not all the time). With the introduction of Docker 1.12, the API now returns standard HTTP status codes and the following JSON body when an error occurs:\njson\n{\n    \"message\": \"page not found\"\n}\nSee: https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/2-errors\nThe error message filter must be removed in favor of response handler. \nNow that the API returns propers HTTP status codes, exception management must be update for each request towards the API.\n. Docker 1.12 support OK ! :+1: \n. - [x] Update the README to specify Docker 1.12 support \n. From #260 \nWe want to give you the ability to manage multiple Docker instances / clusters from the same Portainer instance. We'll also give you the ability to associate a name or label to each endpoint so you'll be able to manage them all easily.\n. @libby2cm we do not have any particular details/implementation idea on this subject at the moment but our goal is to give the user the ability to manage multiple Docker nodes from a single Portainer instance in the easiest possible way ! We'll take your idea in consideration.\nAbout your CSRF issue, it has been disabled for now (see #313) and will be reviewed later on. It will be integrated in the next release.\n. Updated specs, will introduce the following changes:\n\nPortainer will not allow you to specify any endpoint via the CLI anymore (no more -H and TLS related flags). Endpoints will be defined inside the UI\nA new view (endpoint-init) will be displayed after authenticating for the first time (similar to the create password for the administrator view). In this view, the user will be able to specify the required information to connect to the primary endpoint. Multiple options will be available here: \"Manage the local Docker engine\" will allow the user to use a bind mount to the Docker socket or \"Manage a remote host\" will allow the user to specify the URL to the Docker TCP endpoint (and TLS certs if required).\nA new global section called \"Settings\" will appear in the left navigation panel with the following sub items: general (for general settings such as pagination settings, see #378) , password (update admin password) and endpoints (manage endpoints)\nThe user will be able to change the current endpoint by selecting it in the left navigation panel\nThe new endpoints view will allow the user to list and define new endpoint (using TCP only for secondary endpoints). @stefanprodan indeed if we want Portainer to be 'automation friendly' we can keep the CLI flags in the specs (give the user the ability to use multiple -H flag)\n\nWe'll review the ability to specify default username/password in the next version (not related to this issue).\n@libby2cm persistent storage has already been introduced in Portainer with authentication. I still don't see how having the ability to specify multiple endpoints via the CLI will help you deploy it as a Docker service though.\n@qLb We'll think about Consul integration. At the moment, the data is persisted inside a volume.\nSo from your feedback, you'd like the ability to specify endpoints via the CLI using a single or multiple -H flag. If at least one endpoint was specified, there would be no need for the endpoint-init view to be displayed otherwise the view will be displayed after first authentication. You'll still be able to manage your endpoints (create/delete even those defined on the CLI from the endpoints view).\nDefining a new endpoint requires the following:\n\nName (optional, URL can be used as a default value)\nURL (required)\nTLS enabled (boolean, optional and defaults to false)\nTLS certs (3 files required only if TLS enabled is specified as true)\n\nIf we want to define multiple endpoints using the CLI, we'll have to figure a way to specify these for each endpoint on the CLI.\nSomething like (does not include Docker command parameters):\nshell\n$ portainer endpoint tcp://endpointA.mydomain.com:2375 --name endpointA endpoint tcp://endpointB.mydomain.com:2375 --tlsverify --tlscacert /certs/endpointB_CA.pem --tlscert /certs/endpointB_cert.pem --tlskey /certs/endpointB_key.pem\nThis will result in Portainer being started with support for two endpoints:\n\nendpointA (named via the CLI) pointing at endpointA.mydomain.com:2375\nendpointB.mydomain.com:2375 (not named via CLI, using URL as default name) pointing at endpointB.mydomain.com:2375 with TLS enabled\n\nMultiple notes on that:\n\nThis tends to make Portainer deployment machine friendly and not human friendly as it impacts readability (think about managing 7 endpoints with TLS enabled and different certs, the command will be a huge mess)\nIt implies to entirely rewrite the current CLI flag management (did not see any multiple subcommand support in CLI libraries in Go, which means we might need to create it)\n\n@ncresswell IMO, we should keep the ability to define the primary endpoint via CLI for now, add support for defining/managing new endpoints in the UI and have a look at potential 'automation friendly' evolutions later.. @dklotz we'll handle both Docker Swarm and swarm mode in this ticket (btw, you're not the only one having a problem with the naming :-))\n. I've retagged the issue with a beginner access level as this is already implemented in the service update view. It should be quite simple to implement in the service-creation view.\nAbout the container-creation view, this should only be added when using the legacy standalone Swarm (using constraints, as stated in the issue description). . Placement support for Swarm mode has been implemented via https://github.com/portainer/portainer/pull/453 & #837 \nWe still need to implement placement in the container-creation view for Swarm standalone.. Closed by #425 . Closed by #150 \n. The credentials should be asked when pushing on a registry.\n. Closed as part of #349 . Closed by #567 . Rolled back via #1988 . @rngadam you're looking at the docs for version 1.13.6\nhttps://portainer.readthedocs.io/en/latest/templates.html#env. I've tried the following to reproduce the bug:\n- Select the db container and choose a different network for both containers, this will not create a no route to host issue\n- Hardcode the value to a fake container name, this will not create  a no route to host issue neither\nUnable to reproduce, closed for now.\n. The code has been partially refactored, I did not found a way to centralize the following methods:\n- createContainer\n- pullImageAndCreateContainer\nThese are present in createContainerController.js and templatesController.js.\n. A global refactor is planned.\n. Multiple people asked for an auto-complete form input pulling images from DockerHub. At the moment, we'll just auto-complete from the local images, this may evolve to DockerHub autocomplete later.. Closed by #1355 . Closed by #1389 . This does not really makes sense, errors in the frontend should be reported in-app and be available for the user to check. This is more related to error handling in the front-end.. Yes, this is a part of #95.\nI'll start listing every unsupported features in it, should be available in release 1.8.\n. @visualfanatic yes, and this is actually the case in the container-details view. But in the containers list, as the user can select both paused and unpaused containers at the same time, this would not work.. This was fixed.. @paulkling As we're searching for the best UX here, giving the user the need to specify a tag is not really good imo.\nIt should be simple to use, so just pull the tag defined on the image. In the case of multiple tags associated to an image, maybe it should only pull the first one?\nActually, as you always need to specify a tag when pulling an image (defaults to latest), the ability to pull an image should be transformed into the ability to pull a tag. Maybe by adding a pull button with an small icon next to the tag name in the images view ? (something similar to the button used to delete/push a tag in the image details view)\nMaybe a combination of both would work for the user to be able to select multiple images using the checkbox and click on 'pull' which would trigger the pull of the first tag associated to the image only. And if needed, the user would then be able to pull any extra tags on images using the previous solution.\nWhat do you think @ncresswell ?. Closed by #421 . @BryanHunt Looks like you forgot to bind mount your docker socket inside the container:\nshell\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock cloudinovasi/portainer\nPlease refer to the README for more details on the execution instructions.\n. Hi,\nAre you running Docker in Swarm mode or using Docker Swarm?\nWhen you connect Portainer to Docker using the bind mount socket, you connect directly against the Docker engine.\nIf you want to connect against Swarm, you have to connect Portainer to the Swarm manager using it's IP address and port.\nE.g.\nshell\n$ docker run -d -p 9000:9000 cloudinovasi/portainer -H tcp://<SWARM_IP>:<SWARM_PORT> --swarm\nNote that I did not test Portainer against Swarm mode for now, only with Docker Swarm (https://github.com/docker/swarm).\n. I'll try to test it against Swarm mode soon but I think that we don't support it at the moment.\n. I should update the README to clarify, we do have full support for Docker 1.12 as a standalone.\nWe have Swarm support, but legacy Swarm if we can call it like that. Right now, I assumed that Swarm mode would use the same API but it seems that it is not.\nI'll have to give it a test.\n. @BryanHunt Docker 1.12 swarm mode support is available in our latest development build, you can try it using the ~~cloudinovasi/portainer:latest~~ image. It'd be nice to have some feedback ;)\nEDIT: The portainer project has now been moved to its own organization, please use the portainer/portainer:latest image.\n. @rreinurm we will take that into account. @shabbirkagalwala We're aware of that and we're working on a workaround. Follow #461 for this evolution.. Swarm mode does not expose the other nodes IP addresses via the API, therefore it's not possible to retrieve the containers from each hosts. The Containers and Events views must be hidden in Swarm mode.\n. The goal here is to use portainer to target any node in the Swarm cluster created using Swarm mode.\nThe Swarm view must be available when targeting a manager only, if targeting a worker node then display the Docker view.\nThe Containers and Events view will remain and display info related to the targeted node.\n. Portainer is unable to create overlay network via the quick creation form in the Networks view and via the Network creation form.\nThe field IPAM.Driver must be forced to solve this problem, see: https://github.com/docker/docker/issues/25735\n. The App Templates view displays an information message when trying to deploy a template in a Swarm cluster only if you've not created any shared network. As it's checking for any global scoped network, swarm-mode does not expose shared networks (using the overlay driver) as global but as swarm scoped instead.\nYou cannot run any container using a swarm scoped network, its purpose is to run services only. The App Templates view should be updated to support services.\n. The Container creation view displays the followng warning You don't have any shared network. Head over the networks view to create one. when the app is started with the --swarm flag. In swarm-mode, containers cannot be started in the swarm, as they are started directly on the host this warning is useless.\n. The user should be able to scale services directly from the Services view and also from the Service view (equivalent of docker service scale CLI command).\n. Hooray :trophy: \n. Note that this has been reverted via #291 \n. Add info about TLS setup if available.\n. Potential new Docker icons:\nFrom font-awesome:\n- http://fontawesome.io/icon/code/\n- http://fontawesome.io/icon/code-fork/\n- http://fontawesome.io/icon/bolt/ \n- http://fontawesome.io/icon/ship/\n- http://fontawesome.io/icon/th-large/\n- http://fontawesome.io/icon/th/\nExternal:\n- https://github.com/wesbos/Font-Awesome-Docker-Icon (available via bower: https://libraries.io/bower/Font-Awesome-Docker-Icon)\n. @daviddyball we picked th ;)\n. This issue seems to appears in docker 1.12 only. To be confirmed.\n. Try to list nodes memory from Docker CLI.\n. This has been tested on #227 \n. Will be fixed with #317 \n. Referenced in #317. Closing this issue.. The point here is to be able to deploy multiple app template sequentially, not to create stack template.\n. Not really, #257 aims to bring compose support only. We'll need to add some work to have a real \"compose\" template system or multi-templates (sequential deployment).. Closed via #2017 . The configuration panel should appear on top of the template list instead of bottom it.\n. Duplicate of #1402 . The #347 was rejected because it was considered too dangerous for the user, which I reckon too.\n\nRejected. I am not comfortable with this feature. It exposes users to unexpected data loss should a volume be unattached but retained. Rather, I would prefer a filter that showed all dangling volumes, allowing the user to then select which volumes to delete. Even better, once we add \"multi-select\" with SHIFT keys (hold shift key whilst selecting the first and last sequential item) then that makes this filter scenario much safer.\n\nCan be implemented once #344 is done.\n. Actually, this is not blocked by #344 \nTo implement the original functionality with more control over which volume should be deleted, #344 must be implemented and dangling/orphaned volumes must be displayed in the volumes view (adding a extra column for example).\nBy having both of these functionalities implemented, any user will be able to select multiple dangling volumes and trigger the remove action.\n. I'm currently searching how to/where to store the credentials.\nSo far, constraints are:\n- Keep Portainer easy to deploy: I don't want to complexify the deployment process, one of the big advantage of Portainer is the ability to deploy it easily and rapidly\n- Credentials still need to be persisted, users have to keep their credentials after a restart/upgrade of the Portainer container\n- Potentially, authentication should be optional, Portainer is good for managing local development environments and you usually don't need any extra authentication layer for that use case\nWe'll ponder if we want to go for authentication with a single admin role to start with and then enhance it with extra roles.\n. As asked in #330, users need to be able to define read-only roles/permissions.\n. Well, partly implemented in #550. I think that this will be finished when #750 will be implemented !. @djalal good point !. Indeed, this is something I also had in mind. Fine-grained access control will probably come later as an evolution. . @Wilfred please follow https://github.com/portainer/portainer/issues/69. The container stats view is planned to go under total overhaul in the next releases.\nMeanwhile, if you'd like to propose a temporary fix for this, I recommend you to have a look at the following files:\n- The Angular controller for the stats view: https://github.com/portainer/portainer/blob/develop/app/components/stats/statsController.js\n- The HTML template for the stats view:\n  https://github.com/portainer/portainer/blob/develop/app/components/stats/stats.html\nAlso, have a look at our contributing guidelines before pushing some changes: https://github.com/portainer/portainer/blob/develop/CONTRIBUTING.md\nThanks !\n. Haha yeah overhaul is going to happen in the next two months I'd say. We'll keep Chart.js but we'll probably use the version 2.\nYes, you can start here.\nI need to update our documentation to explain the local installation/build process.\nhttps://github.com/portainer/portainer-docs/issues/3\n. @RandomInsano contribution documentation is available here: https://portainer.readthedocs.io/en/stable/contribute.html\n. I'll leave this issue open then, it will be taken into account during the overhaul :)\n. Related to #297 . I'll close this issue, it's referenced in #297 . As an extent of this, a banner should be displayed in the dashboard when a user connected Portainer using the --swarm flag on a Docker standalone host.\n. Related to #101, this will not be required anymore after multiple endpoint management implementation.\n. The portainer:microsoftservercore image still needs to be built.\nThe portainer:nanoserver (alias portainer:windows) is available.\n. @mterwoord Indeed, I'm not sure if I need to build one based on microsoftservercore actually.\n. @jslatten can you describe what do you mean by 'integrate into the templates profiles' ?\nAlso, I don't think there's a need to 'package' Swarm at the moment, especially with the arrival of Docker swarm mode, it has never been easier to deploy a Swarm cluster.\n. Yes, the way I see it it would be to add another section in the app 'stacks', 'bundle' or something where you would be able to upload your compose file to start the associated stack.\n. How would you guys like to have compose support in Portainer? The way I see it at the moment :\nWe should give the users the ability to define 'stacks'. When creating a stack, you provide a name and a docker-compose YML file. Once the stack is created Portainer should give you the ability to manage it (up down etc) and also a way to manage each service in that stack (start stop a service etc). From the stacks view you should be able to manage your stacks (add, edit, delete) and access to a detailed view for each stack (which allows you to manage it as well as giving a visual representation of the containers of the stack). . I used the term 'stack' with some quotes as an example. We might need to figure out another term. . > Moreover it would be very important to connect containers to their docker-compose \"stacks\" - that can be done by parsing the com.compose labels of the container.\nCould you give us more details about that one? Would you like to be able to see the associated 'stack' in the container view if a container is part of a compose 'stack' ?. @loric- \nAbout your questions:\n\nCompose would need to be installed into portainer container?\n\nNo, Portainer will take care of interfacing Docker Compose\n\nWhat would be the library used to interact with compose (as it does not provide any standard REST api...)? compose-ui uses directly python calls wheareas Rancher uses libcompose (that may be more appropriate as written in go).\n\nYes, we will probably use libcompose. I already had a look at it and it seems easy to integrate inside Portainer.. Yup, from what I've read, compose v3 is an entirely new implementation of compose inside the docker library. @WTFKr0 do you have more info about that?\nSo I doubt libcompose would be useful here. And I really want the ability to reproduce the behavior of docker stack deploy into Portainer.. @alwaysastudent thanks for your detailed use case ! We'll take it into account !. Agree, this will definitely be part of the implementation :-). To anyone following this issue, I have a WIP for compose-support available. Details are in #959\nThe WIP image is available under portainer/portainer:pr257 (build for Linux AMD64 only).\nWho'd be up to test it and give some feedback? I've created a room in our Slack channel to discuss it, please join us in the room #feat257. If you don't want to join us on Slack, you can also post comments in #959\nI'd especially love to get feedback on the following topics:\n\nOverall UX/UI\nHow would you like the ability to register a stack that has been created from outside Portainer?\nMissing features\n. Could you give me more details about your bug in #959 directly?\n\n\nLittle Bug:\nat the end of my test I saw many \"fake\" nginx stacks compared to \"docker stack ls\". @scher200 can you try to reproduce and give me the error that is displayed in your Portainer screen? Also, could you comment in #959  ?. Yes, I need to review how the status is determined. This is on my todo ;). @MaliciousGenius can you give me steps to reproduce ? And comment in #959 ?. @tiredofit thanks for the report ! I'll work on this.. No ETA on this yet, there is still a lot to work on.. #1280 has just been merged ! Support for docker stack deploy is now available in Portainer. docker-compose is not supported though.. Hey @mister2d, we probably need to clarify this. Stack deploy requires a compose file (version 3+) to deploy services inside a cluster, indeed you're right about this. This this the equivalent of docker stack deploy ... when using the Docker CLI. \n\nWhat I mean by docker-compose is not supported is that you cannot deploy containers using the new stack feature (that would be the equivalent of docker-compose up).\nSo, to summarize:\n\nYou can deploy a stack inside a Swarm cluster using a Compose file\nYou cannot deploy containers using a Compose file\n\nIs that clear enough?. > Does it mean: You cannot deploy containers using a Compose file by docker-compose binaries?\nYup, you can't.\n\nYou can use portainer to deploy a stack, defined in a compose-file, into a docker swarm.\nYou cannot use it to deploy it onto a stand-alone docker node.\n\nExactly.\nThe main difference (CLI wise) being when you use a Compose file and docker-compose in a stand-alone Docker node, you deploy containers. When you use a Compose file and docker stack deploy in a Swarm cluster, you deploy services.. @samprog1 docker-compose and docker stack deploy are two different features and both cannot be managed via the Docker API. We still need to check if we can integrate docker-compose the same way we did for docker stack deploy.\n. @mister2d this is not available in 1.15.0, we implemented it recently (see https://github.com/portainer/portainer/issues/1313) and will be available in 1.15.1 (to be released soon).\nIn the meantime, you can try it in portainer/portainer:develop (linux amd64 build).. @ronlut this is not supported yet but you can open a feature request for this.. Closed by #301 \n. Closed via #1007 . So you would like this feature to be able to distinguish multiple Portainer environments without having to check IP/hostname correct?\nOne of the next features we will be working (right after RBAC) is multiple endpoint management (#101). We want to give you the ability to manage multiple Docker instances / clusters from the same Portainer instance. We'll also give you the ability to associate a name or label to each endpoint so you'll be able to manage them all easily. It's in the pipe :)\n. Thanks a lot ! I'll close this issue as a duplicate of #101 and update the other issue with your feedbacck. \n. Unable to reproduce, IP address is displayed.\n. @vielmetti nice to hear that ! :)\nThough it's more related to this issue: https://github.com/portainer/portainer/issues/285\nThis issue is about adding a section/category in the Apps Templates to display the arch.. @vielmetti Indeed, we're only curating amd64 compatible templates at the moment. You can open evolutions or contribute here https://github.com/portainer/templates for multiarch images integration.. Template OS support has been added via #862 . Duplicate of #255 \n. We'll have to work on RBAC first before adding external authentication sources :)\n. I'm currently working on rewriting the swarm detection algorithm (see #252) but it was a choice to let the --swarm flag as an option as it allows the user to:\n- manage each Docker engine (from a cluster or not) separately by not using the --swarm flag\n- manage the cluster when using the --swarm flag on a manager\nIf we choose to automatically enable --swarm when connecting to a Docker host that is a part of a Swarm cluster then you would not be able to connect Portainer to the standalone engine anymore (for example, to be able to manage containers, check events...).\nWe need to decide if we should enable swarm auto detection. Honestly, I don't think that a lot of people will want to manage each Docker instance in their cluster. They'll probably want to manage the whole cluster directly. \n. We might also enable the --swarm flag by default (and thus remove it) and add an extra --standalone or --node flag to target a specific host in a cluster.\n. Yes, you'll be able to do that once we have implemented #101 \nBefore that, we'll provide a way to connect to Docker 'nodes' using the --standalone flag. Note that you can manage multiple portainer instances to manage multiple nodes / clusters.\n. Closed by #407 . Do you mean give the user the ability to add labels when creating services?\n. @joskfg could you open another issue with more details about what you're trying to achieve / steps to reproduce / what you expect ?. I cannot find an interesting icon to replace the actual one.\nWe might either:\n- design our own container icon\n- wait for a container icon to be added in font awesome: https://github.com/FortAwesome/Font-Awesome/issues/8165\n. I can see multiple scenarios here:\n- We might be able to determine if the selected container is a Windows container and then adapt the console command presets to cmd.exe and powershell. If the container is a Linux container, then the current command presets will be used (e.g. /bin/bash and /bin/sh).\n- We could only have two command presets, one for Windows which would be the most common one (cmd.exe ?) and one for Linux (/bin/sh) with a small platform icon next to each one to ease the user experience and have another way of providing the user command of his choice (related to #259)\n- Remove the command presets and give the user the ability to enter any command of his choice (#259)\nI do like presets as it's easier for the user to start a console exec instance instead of typing a command. In any case, the user should have the possibility to enter the command of his choice so #259 will be part of any of these scenarios.\nWe'll try to go for the first scenario, and if it's not possible to easily determine the platform of the container we'll give a try at the second one.\n. #284 brings container OS detection and will automatically adjust the list of command presets based on the OS.\n259 still needs to be implemented.\n. I do love the idea of a multiarch Docker image ! I never used manifest nor manifests list objects though.\nI'll play with manifest at some point. PR's are accepted too :)\n. Experimental multiarch support (linux amd64, linux arm, linux arm64 and windows amd64) available via the Docker image portainer/portainer:multiarch. @StefanScherer @glennsarti @paulkling @adomenech73 keen to try this out?\nYou should just be able to run it by using the image portainer/portainer:multiarch and it should automatically detect your platform and use the associated image.\nWork is available at: https://github.com/portainer/docker-manifest. Awesome !\n\nCan it be pushed before the platform specific images exist? I haven't used the manifest tool, yet, but I'll have a close look at it.\n\nUnfortunately not, the images need to exist on the registry first.\nAbout the panic issue, this is a bug in 1.11.1 on Windows, it has been raised while testing #459. Thanks for pointing out the issue, I'll try to build another version using golang 1.8 soon !. @StefanScherer see my update in #474 as I'm trying to solve this issue, it only happens when using C:\\data as the value for the data directory. It's probably some kind of system directory for Windows. I've also updated the issue as I tried using golang:1.8 to build the binary.. This will be available starting from 1.11.2. I'll close the issue after the release & build is pushed on Dockerhub.. portainer/portainer:latest and portainer/portainer:1.11.2 are the two first multiarch images for Portainer with the following arch support:\n\nlinux amd64\nlinux arm \nlinux arm64 \nwindows amd64\n\nAnd they're now live on the Dockerhub :). @StefanScherer would you be able to test the freshly created portainer/portainer image on Docker on Windows ? Had some troubles running it on one instance and I'd like to confirm that it's related to my instance.. @StefanScherer thanks for the diagnostic, I've opened #543 and will copy the info in here. I'm working on it.. @mterwoord Is the error message saying 'Unable to remove a running container' ? That's Docker default behaviour (unless you specify the -f flag on the docker rm command) and we chose to keep that behaviour to avoid mistakes.\nAt the moment, you have to stop a container before trying to remove it.\nWe're keen on having a better UX so if you opened this issue that does mean that something is frustrating, what's your idea of a better behaviour?\n. Yes, at the moment we do relay the error messages from the Docker engine. Later on, we may define our own error messages (which would be clearer I think).\n. Just to be sure, do you have an error message similar to this one?\n\n. #295 will be used to track all the updates related to the new notification messages.\n. This one requires Portainer to define a new interface to connect to the Docker update API: https://docs.docker.com/engine/reference/api/docker_remote_api_v1.24/#/update-a-container \n. Yes, I'm just adding comments for future work on it :)\n. Done in https://github.com/portainer/portainer/commit/0bdbb4a75d080e5897c233130689b3ec6e069f78\n. It has been decided to revert #212 as it may be too complex for the user to use.\n. Totally agree with that. At the moment, we only display the 'raw' error messages returned by the Docker API. We need to define our own error messages, less 'cryptic' for any end user.\n. There is no need for the golang image indeed as the binary is compiled before copy. Thanks @StefanScherer !\n. Just pushed the image on Dockerhub. 303MB instead of 394MB !\n. Awesome ! Thanks a lot.\n. portainer/portainer:arm is now live on the Dockerhub ! Hooray !\n. Am I the only one thinking that there is too much duplicate code in the gruntfile.js ? \nAll the following grunt tasks are similar except for their parameters:\n- run\n- runSwarm\n- runSsl\n- runSwarmLocal\nI wonder if there is a way to specify command line options/flags to grunt so we could actually refactor all these task into one?\nIt would be nice to be able to use the grunt command like this:\n```\nLocal portainer instance using /var/run/docker.sock\n$ grunt run\nLocal portainer instance in swarm mode\n$ grunt run --swarm\nRemote portainer instance using -H tcp://IP:PORT\n$ grunt run IP:PORT\nRemote portainer instance in swarm mode\n$ grunt run IP:PORT --swarm\n```\nBeing able to specify the IP:PORT of the remote instance on the command line would also be handy and avoid hardcoding fixed IP addresses in the gruntfile.\nDo you know if there is a way to achieve something similar?\nThe same issue is present for for the buildBinary, buildUnixArmBinary and buildWindowsBinary grunt tasks.\n. Related to #40 \n. Close #258 \n. @Glowbal yes you are right it should be implemented on the server side but at the moment the server is only here as a proxy for the Docker API and thus it's not prepared for some other logic. I'll open a separate issue for this one, as for now, it should be done in the webapp.\nWaiting for @ncresswell review.\n. More details about a container is good but now the view seems to be overloaded... minor detail though as I like to have more info about my containers.\nWaiting for @ncresswell review.\n. Thanks a lot for the existing PRs ! Of course we're happy to get any help :)\nIf you want to continue working on this, please open a separate PR for each task, as it will be easier for us to review. \nAlso, we'll need to have a look at the new saving system and confirm that this is what we want, but in the meantime you can continue to contribute (I don't think that it is blocking the implementation of all the tasks, can we change it later if needed?)\nWe'll start reviewing your PRs this week.\n. Also please join us in the gitter room if you want to discuss any technical details: https://gitter.im/portainer/Lobby\n. Thanks for the amazing work @Glowbal !! We'll have a look at your branch shortly !. @Glowbal \n@ncresswell and I recently reviewed your UI mockup for the new service details view and we think that it looks good ! Ping us if you need any info.. #453 has been merged, I'll close this issue to track it in the next release. I'll open another issue to track resource limits and reservations edition.. Edit resource limits and reservations: #709. I do like the ability to update multiple fields for a service ! Really cool. On a purely UX/design I don't like this big \"Service has been edited\" banner popping in the middle of the view. IMO this should be displayed either under the service details table (inside the widget) on a single line or in the head of the widget (pulled to the right?). \nI also like the ability to reset to previous state.\n. Waiting for @ncresswell to review.\n. Awesome ! Will review it again soon.\n. Good for me !\nI do feel that the placeholders should be replaced to match the Docker docs example:\n- e.g. com.example.something -> com.example.foo\n- e.g. something.value -> bar\n. Waiting for @ncresswell to review.\n. Also the commit related to the local swarm grunt task should be removed from this PR as it's already opened in #300 \n. I personally never used the network stack of another container but I feel like the UX could be enhanced on this one, maybe by bringing a dropdown with the name of all the containers instead of having to input the container name (less error prone, more easy to use).\nWaiting for @ncresswell review.\n. Awesome, we will give it another review soon. Also, we'll ensure that it's working on each all our environments before merging (final workflow step).\nI'll define the contribution workflow somewhere.\n. @Glowbal No technical review has been made on this now for now. The workflow will be posted soon (and the labels will be reviewed) but FYI the first step is a functional review, if it's approved then I'll do the technical review :)\nAlso, yes, as there is no CI yet, be sure to run grunt lint (it's in the contribution guidelines).\n. @RobBrazier thanks I'll review it again.\nNote that we support Docker Swarm and Docker swarm-mode which are two different things. The /swarm-node1/containername behaviour is only present with Docker Swarm.\n. @RobBrazier Reviewed again, please update one thing (see my comment). I've tested it with the change against Swarm / Docker swarm mode and Standalone. Works fine.\n. This bug seems related to the current CSRF protection implementation... which in my opinion is flawed so I'm probably going to disable it for now and review it in the future.\n. @tobias-kuendig a workaround for this problem at the moment is to clear your browser cookies for your domain (e.g. localhost:9000 or portainer.mydomain). This will allow you to retrieve a valid CSRF token on the next request to Portainer and will prevent this issue to arise.\n. Have a look at https://github.com/justinas/nosurf. I do not like neither the UX and the actual implementation of the log view. An overhaul of the view/controller for this area of the application is planned.\nWe'll take this issue in consideration when rewriting the log view :)\n. Closed as part of #317 . @resilva87 no ongoing work on it, feel free to tackle it and open a PR.\nI've updated the list of issues to take in consideration, see the description of the issue.\nJoin me on Slack/Gitter to get directions on how this should be rewritten. . Duplicate of #58 \nI reckon your issue has more description so I'll close the other one as duplicate but yes indeed we're aware of that :)\n. We should probably use this issue as the reference for all the input validation that needs to be done in the app (for each form in the app). I'll add a task list in the issue description.\n. We'll track the progress on form validation in this issue.\n. Besides input validation, users should also be able to determine optional/mandatory fields (asked in #823).. Problem seems to come from https://github.com/portainer/portainer/blob/develop/app/shared/viewmodel.js#L58\n. @zwx168238 somehow we know that nano works. I know it's quite important but this one is pretty hard to debug, I'll have another look today.. Tried to figure out what was causing this issue, it seems that the server is sending invalid unicode characters when using some commands (such as vim). I'm pretty sure this is coming from the hijack method available at https://github.com/portainer/portainer/blob/develop/api/http/handler/websocket.go#L95 but I was not able to fix it at the moment.\nI'll try to give it more time later.. @zwx168238 thanks for the input, we'll keep this in mind when we'll investigate this issue again. \nPortainer uses xterm.js for the console and the websocket protocol to send/receive data.. Yes, I installed vim inside a nginx container and when using vi filename.txt the console freezes.. No update on this topic, all that we know is that when using vi/vim some bad encoding is returned and it automatically disconnects the websocket.\nI'd accept any help, PR on this topic.. @mabombo The port 2377 is reserved for Docker Swarm cluster internal communication. Could you try on port 2375?\n``` shell\ndocker run -d -p 9000:9000 -v /var/lib/docker/swarm/certificates:/certs --add-host swarm-manager:x.x.x.x portainer/portainer:latest -H tcp://swarm-manager:2375 --swarm --tlscacert /certs/swarm-root-ca.crt --tlscert /certs/swarm-node.crt --tlskey /certs/swarm-node.key --tlsverify\n```\n. ping @mabombo . @igal-dahan sorry for the late answer, as said above port 2377 is used for Swarm internal communication. You need to use port 2375 but first you must ensure that this port is exposed in your Docker daemon configuration. Please have a look at the Docker documentation for more information about this.. Will do !\nAvailable arch/OS for cross compilation reference: https://golang.org/doc/install/source#environment\n. Could you ensure that you are using Docker on Windows? And not Docker for Windows. This can be confusing but this issue usually happens with the later.\nAlso, could you give us more information about your Docker version? Output of docker info and docker version would be helpful.\n. @martemorfosis you're running Docker for Windows. Please pull portainer/portainer :) . So Docker for Windows is actually Docker running inside a virtual machine (Linux OS) on Windows :/\nAnd Docker on Windows is actually Docker running on Windows. \nSo you're running Docker for Windows, please use the portainer/portainer image.. @alisarioglu Ah, I've updated all the comments to match the good naming (damn this is so confusing, thanks Docker).\nYes, you'll need to use portainer/portainer. Do you have access to browser console? Can you see if there is any error there?. @alisarioglu I'm not familiar with socket management on Windows too... Note that you can't use localhost as a value for the -H flag as it will resolve to the portainer container, you need to use the IP address of your windows host here.\nWe'll update the documentation as soon as we have more insight on socket management on Windows :) . @alisarioglu ah, I guess that since Docker for Windows is just Docker running in a Linux box this works well.\nGlad it's working :-)\nI'll update the documentation.. Are you talking about the legacy container links?\nhttps://docs.docker.com/engine/userguide/networking/default_network/dockerlinks/\nDo you know that you can achieve the same results with Docker >= 1.9 and Docker networks ?\n. ping @vothanhkiet . Closed due to inactivity.. @daninfuchs we recently changed the default access control policy from public to administrators restricted. It will be part of the next release. Is this what you were asking for?. @julianxhokaxhiu We don't have any authentication in the app yet, nor 'read-only' mode implemented.\nThis will be part of our RBAC implementation, you'll be able to define read-only roles/permissions.\nThough this will be different than a guest mode, you'll have to login as a guest after having created the guest account.\nI'll close this issue and link it to #235 \n. @xnohat Container commit is indeed available in the container details view. Go to containers, select the container of your choice and you'll be able to commit it as an image.\nHope this helps, feel free to re-open if you're missing something.\n. It's on its way :). The work on this feature is almost finished, it only support an administrator account for now but a read-only ('guest') will be easy to implement with RBAC in #235 as it will also give the ability to create users.\nA note on the technical side: After a few experimentations with SQLite and Golang (a lot of issues regarding multi-platform support), I've decided to use Bolt https://github.com/boltdb/bolt as the main datastore for persisting data. As it's a pure golang implementation of a file database, it allows us to keep the ability to build portainer on multiple platforms and the portainer image to still stay really light.\nThe current implementation automatically creates a new \"administrator\" account with the credentials admin / admin when starting Portainer for the first time. You'll be able to persist the database using a bind mount volume (although it's not really useful at the moment as there is no way to change the password yet inside the UI).\nFrom the comments in this issue, I'd like to ask you all a few questions though...\n@diegoperini about the ability to specify the credentials for the default administrator uing env variables.  I do like it (either via env. variables or portainer flags) but this would expose the credentials in clear view for anybody that would inspect the container. On a security point of view, I don't really like it.\nAn alternative I've thought about would be to keep the default username to admin but prompt the user to set a password on the first usage of portainer.\n@tronicum I've decided to name the default user admin as it's a lot more easier to remember and also a more standard approach (again, portainer motto is simplicity) though this can evolve later.\n@cichymks @nbvcxz @tomwillfixit @bithost @Hronom any comment/proposition/things you'd like to see?. @dimitrovs this has been implemented in #553 and will be released in 1.12.. Thanks @gjonespf & @Nicknack1234, we're tracking this evolution in https://github.com/portainer/portainer/issues/428\nTho, it's specified as a portainer CLI flag in that issue, it may evolve in a ENV var or set of ENV vars (user/password).\nFeel free to comment there.. As stated in the Docker release note for 1.13, this is still an experimental feature:\n\n(experimental) Add docker service logs command to view logs for a service\n\nBut it looks like @Glowbal started working on that ;)\n. Woops, indeed this one is a duplicate of #669 \nThis feature has been merged recently and is available in the develop branch, you can check it out in our unstable build at portainer/portainer:develop.. With the recent introduction of compose v2 support, I believe that we need to add support to display the logs of all the container in a stack inside the same log view (equivalent of Docker-compose logs). @Hronom of course this will be applied to all selectable object lists.\n. Yes this issue is still open as only a part of the issue has been implemented via #372. We now need to give the user the ability to select a range of items in a page using SHIFT+click or something similar.. @Glowbal \nsame issue here. Also, I don't think that the name should be a required field. I don't see any constraints on env vars/labels.\n. Any update on this one?. Closing this PR as stalled for too long.. For some reasons, values are not displayed in the service details view for some services.\n\n\n. @Glowbal could you rebase this one please?. Ok, I'll update the related issues.\n. @bgoldowsky there is no way to use secured registries (either using authentication or certs based setup) on Portainer at the moment.\n. Considering #498 we might define a new Registry section in the sidebar and give the user the ability to define multiple registries (with optional credentials). Then the user would just need to select any of it's already defined registry when creating a container for example and it would automatically manage authentication to that registry if required.\n@pierredavidbelanger thanks for the analysis/feedback. The Rancher UI registry view is pretty much how I see it in Portainer. This evolution will require implementation on the backend/frontend of Portainer and might not be easy for you to start with if you're not already used to the codebase. You might pick a few exp/beginner tagged issues if you'd like to contribute to something simpler first :). @astef right so I thought that this could be a workaround, seems not.. I'm currently working on this.\nWe plan to provide a single authentication method for custom registries, e.g. when you define a new registry you can enable authentication and provide authentication credentials (username, password) that will be used to retrieve an identity token. This token will be stored and used for any connection to that registry.\nI'm still thinking about the Dockerhub though, as it does not make sense to have a single authentication method here for the following reasons:\n\nWhen authenticating against the Dockerhub, it does not provide any identity token\nMultiple users might want to access their private images on the Hub, thus would require a credentials per user model\n\nShould we give the ability to each user to use their own credentials for the Dockerhub by providing a section in the account settings (under change password, add a new Dockerhub credentials section) ?\ncc @ncresswell . The override of any existing registry credentials might complexify the UX a lot. \nWe're going for a simple authentication method for any registry (including Dockerhub) to start with (similar to what Rancher does).\n. @blagerweij the only thing that bothers me with this feature is that you'd need to manage all the registries on a specific Docker host and then start Portainer on that host. Plus, when adding a registry it would require you to restart Portainer or refresh the state from the file somehow.\nWe're going to go for the registry management similar to endpoint management for now and see how we can make it evolve later on.. After review, max items per page is now fixed to 15 and defined by a constant.\n. Duplicate of https://github.com/portainer/portainer/issues/545. I'll need more information and steps to reproduce as I've not been able to reproduce this one.\nWhat i did:\n\nGo to the services view\nClick on add service\nAdd a new service with name test1, image nginx and an environment variable with the name test and the value FOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOBARFOOFOO which is 2023 chars long.\nClick on create\n\nThe service is created and when I inspect the service details I can see the environment variable with the correct length.\nI tried to edit this service and add another variable with the same length and it worked fine too.. Ok, actually only the displayed value is truncated. A docker service inspect <SERVICE_NAME in the CLI shows the correct value for the env var.\nIssue is coming from here: https://github.com/portainer/portainer/blob/develop/app/components/service/serviceController.js#L156. @G07cha Why not use the dangling filter on the ImageList operation? \nhttps://docs.docker.com/engine/api/v1.30/#operation/ImageList\n. Indeed, it returns Containers: -1 for all images as well. Also, the dangling filter seems to be used to return only <none>:<none> images.\nEdit: saw that you opened https://github.com/moby/moby/issues/34005, we should probably wait for an update on this.. We should wait for an update the moby issue, then decide if we want to implement a temporary solution. \n. What about using the system/df endpoint then? \nhttps://docs.docker.com/engine/api/v1.30/#operation/SystemDataUsage. I'm thinking that we can merge the data from the system/df & images endpoints as a new property in ImageViewModel.. As stated on the website http://portainer.io/docker.html and in the limitations section in the README https://github.com/portainer/portainer#limitations we do not support Swarm < 1.2.3.\nThis is a known issue with Swarm 1.2.2 and Portainer. Unfortunately, you'll have to upgrade your Swarm version to use this feature of Portainer.. @SemionPar you can use the integrated access control features that allows you to create a Docker resource and restrict the access to this resource to either the creator or all the team members. This is available via the Access Control panel when creating a container (also as App Templates), a Swarm service or a volume.\n\n. @SemionPar Indeed, you would need to use the Portainer interface.\nNote that Portainer also expose a HTTP API that can be used to manage your Docker environment as well, but it's not fully documented at the moment. Some examples are available here: https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8\nYou can join us on Slack to discuss this if you need to.. @264nm what about using the existing UAC feature for this? You could create a team called restricted and add your users to that team. Then, switch the ownership of the containers that you want to allow access to to that new restricted team.. @taiidani what about using Docker secrets instead of placing secrets in environments variables? Ownership can be set on secrets as well.. Hmm, we did introduce a cache busting mechanism since this issue was closed. \nPortainer CSS is now located inside a file named app.<RANDOM_STRING>.css, the random string being generated on release. The content of this file is the concatenation of minified vendor.css & minifed portainer.css.\nI'm not sure that it is still feasible to customize Portainer using a custom CSS file.. As specified above, you can put your own app.<RANDOM_STRING.css in this folder.. @soumen1102 due to cache busting mechanisms introduced in previous versions, I believe it is now complicated to use a custom CSS file with latest versions of Portainer.. Thanks a lot @wonderbread :-). Atm with Docker, you'd have to destroy your container with the wrong configuration to create a new one with a correct configuration. There is no way to update the configuration of an already created container (except a few things such as restart policy, attributed mem/cpu...).\nPortainer could handle the update of a container by destroying and recreating a new container but that would assume that the container is immutable which is not the case for every container. This could be dangerous and introduce issues.. We already have a feature request for the ability to duplicate a container: #41 \nThis one might be extended with an advanced duplication/cloning feature allowing you to add extra configuration.. @ncresswell what's your view on this?. I'll close this issue, see #363 for the evolution of the clone/customize feature.. @michaelsogos \nThis will be tackled in #363, we'll give the ability to re-create stopped container.. @Richard-Mathie are you sure you pulled the correct version? I just tried again to ensure that the correct  version is tagged on the Dockerhub and it works fine for me. Can you try with the latest tag too?\n. Thanks @Glowbal \n:trophy: . This was implemented previously in #212 but reverted on the demand of @ncresswell\nThe goal with App Templates is to provide easy to run container (thus pre-configured) and not advanced configuration. If you want some advanced configuration, you have to create the container yourself.. We'll leet this issue open for now to see if it's actually requested by other users. We may re-add this feature again in the future.. @sweco-semtne You can already define your own templates and add an environment variable that could be changed via Portainer UI, does that match your use case?\nSee templates documentation on https://portainer.readthedocs.io/en/stable/templates.html#env. @baramann if you click on the \"Show advanced options\" link close to the \"Deploy the container\" button, you can update the labels associated to the template.. @floriantschopp you might want to open a new feature request to add support for the runtime property in templates.. This will be taken into account in #466 \n. Closed by #374 . Are you talking about the ability to select all entities in a table with one action? (e.g select all containers in the container view, all the images in the images view, etc...) ?. I've seen this request on other channels as well, this was originally present in the first versions of Portainer but removed later because it was messing with the UI. It should be complicated to re-implement.\n. Closed by #437 . I'll take this into account when working on #297 . I'm closing this issue and referencing it in #297 . Thanks @paulkling ! I'll have a look at it soon.. @paulkling could you have a look at my comment?. Awesome, will test it again soon :+1: . Thanks @paulkling !. Closed by #751 . Indeed, seems that this was re-introduced with the new UAC system commit. Will fix ASAP.. Now that I'm thinking about it... it feels more natural to have an error raised when the 'always pull the image checkbox' is ticked and no image is found.\nE.g. it's the equivalent of docker pull & docker run, when an image is not found docker pull actually fails.\nNow I can see two solutions here: \n\nIgnore the error when pulling an image in the container-creation view and always fallback to local images. This implies that you won't have any information about what might happen during the image pull (for example, pulling an image with no authorization would issue an error message indicating that you don't have permissions to pull this image. With this fallback, it will output 'no such image: ' as it will skip the pull error and look for the image locally): available via #914  \n~Untick the always pull image before creating by default, which is also the default behavior of Docker when using docker run~ it's not, if the image is not available during a docker run, Docker will automatically pull the image.\n\nWe'll go for the first option.\ncc @ncresswell . I'll check that !. This is fixed :). Hi there, this release will also introduce settings and we'll give portainer users the ability to define their wished pagination settings. . @lavvy release is due this month, should be available for Christmas :)\nAnd yes, it will come pre-built and published on Dockerhub for the following archs: windows, linux, darwin and arm.. It's finally here :). Thanks for the PR @eisnerd !\nDo you have any concrete example of what this is trying to solve ? I'm not sure I understand the goal of this update.\n. Thanks for your detailed explanation. I've just created an account on cloudhero to reproduce this issue and do a few other checks too. . @lavvy could you give a try at @eisnerd solution using eisnerd/portainer with a Nignx proxy in front of Docker?\n. @eisnerd is your Docker image up to date?. @lavvy could you retry with eisnerd/portainer ?. @eisnerd #392 introduced a massive overhaul to the API. Could you rebase your changes?\nYou'll need to alter this file: https://github.com/portainer/portainer/blob/develop/api/http/docker_handler.go\n. Hi @esnellman \n@eisnerd solution should work when when your Docker engine is running behind a reverse proxy not when portainer is.\nCould you try a configuration similar to this one?\nhttps://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer\nAlso, you can join us on our slack http://portainer.io/slack/ or gitter https://gitter.im/portainer/Lobby channels for some support.. This PR should also fix the issue raised in #400 \n@eisnerd could you rebase the PR (see my comment above)? We'll integrate the changes in 1.11.0. Thanks !. @eisnerd thanks for the rebase, I'll have a look !. @eisnerd tried to built it locally and it works fine. Thanks for the PR !. Have you rebuilt the Portainer binary first? You should run a grunt\nclean:all and then grunt run-dev if you want to try it.\nLe lun. 12 d\u00e9c. 2016 02:08, Glowbal notifications@github.com a \u00e9crit :\n\nI tried this but I keep getting \"Your session has expired\" errors when\nattempting to log in. It never lets me past the authentication view.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/380#issuecomment-266281124,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBVbaXIH5MRX8k2fH4L4oyOE4EB2nks5rG_XcgaJpZM4LIUAH\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. @ZigmunD not yet. Follow this issue for the ability to define roles/permissions and create users: #235. Ah thanks for the PR ! Will review it soon :)\n. So yes as asked by a lot of users, we'll want the checkbox to select all the containers of the current page and add an extra tick box near Show all containers (for example) to 'select all containers'.\n\n@Hronom @gidcs what Display All feature are you talking about? There's already a Show all containers checkbox in the containers view in Portainer.\nAlso, you'd prefer to have the checkbox to select all the items in the current page outside of the table?\nI do like the way Gmail offer item selection, with a banner displayed after selection saying that only the items in the current page are selected and offering a link to select all the items.. Also @gidcs please rebase on develop. @WouterOet would you mind opening a PR?. @WouterOet thanks a lot, I'll review it soon. Also thanks for following the guidelines but I'll be simpler for me to compare code contributions across multiple PRs.. This has been implemented in #437, thanks for the work @gidcs tho !. @lavvy this is not really related to this issue. You should discuss this on our slack/gitter channel.. Documentation has been updated and is now available at latest: http://portainer.readthedocs.io/en/latest/templates.html. Thanks @paulkling . Problem was related to the command field being not registered properly. #409 fixes this and also introduces the ability to change the entrypoint.. @renatoriccio Just tested it on Ubuntu 14.04 and it's working well ! Are you sure that you correctly updated your Docker daemon configuration?\nFrom what I see you should be using systemd, could you paste the output of sudo systemctl status docker ? You should read https://docs.docker.com/engine/articles/systemd/ for more info on how to configure Docker with systemd.. Looks like you successfully applied the configuration:\n\u251c\u2500 1095 /usr/bin/dockerd -H fd:// --ip=192.168.1.200 --insecure-registry=192.168.1.200:5000\nAre you running Portainer locally ? In this case it should be available at http://192.168.1.200:9000. Are you using this URL? This might be related to your browser cache, could you try again in private navigation or with another browser?. Can you try another browser?. Also could you paste the output of docker ps ?. Hmm, it seems that the changes are not reflected on your containers:\n22703e8d9d18        haproxy:1.5           \"/docker-entrypoint.s\"   About an hour ago    Up About an hour    0.0.0.0:8036->8036/tcp, 0.0.0.0:8050->8050/tcp   haproxy_haproxy_1\nThis should be 192.168.1.200:8036 for example. Did you restart the Docker daemon after changing the configuration?\nCould you restart the Compose stack? Do a docker-compose down && docker-compose up to recreate the containers.\n. Could you recreate the stack using docker-compose down && docker-compose up ?. I just tried to reproduce and I've got the same issue with docker-compose.. Found an issue in docker-compose and it looks like it does not take in account the --ip flag specified in the Docker daemon configuration: https://github.com/docker/compose/issues/2999\nThere is a workaround presented in that issue, I've tried with the following docker-compose.yml file and it's working:\n```yml\nversion: '2'\nservices:\n  portainer:\n    image: portainer/portainer\n    container_name: \"portainer-app\"\n    network_mode: default\n    ports:\n      - 9000:9000\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    restart: always\nhaproxy:\n    image: haproxy:1.5\n    container_name: \"haproxy\"\n    volumes:\n      - /home/foo/workspace/haproxy/haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg\n    ports:\n      - 8036:8036\n      - 8050:8050\n    network_mode: default\n    restart: always\n```. Perfect ! Feel free to join our slack channel http://portainer.io/slack/ or gitter https://gitter.im/portainer/Lobby next time.\nIt will be easier to help you :-). Closed as part of partial support for 1.9.. The job scheduler will allow any user to define scheduled jobs. A job is composed of a task and a scheduled time.\nA task can be one of the following:\n\nScale a service\nPause/Resume a container\n. @wyvernnot these features are not integrated in Portainer as we think that they're dangerous for the user. \n\ncc @ncresswell  . More information on the job scheduler:\n\nA job represents the scheduling of a Docker action\nA task represents the execution of a scheduled job\n\nJobs are tied to one endpoint and tasks are tied to one job.\nA scheduled job is composed of the following:\n\nA schedule\nA category\nAn action\nOne or more parameters\n\nAny user (regular user or administrator) can schedule jobs. UAC will be used similar to other Docker resources (containers, volumes, services). E.g. a regular user can schedule a private job that will be available for management to this user and administrators only. A regular user will also be able to schedule a public job that will be available to all users who got access to the endpoint where the job is scheduled.\nA user can create a scheduled job, edit it and delete it. He can also manually trigger the schedule.\nWhen scheduling a job, a user will have the ability to select one category of the following:\n\ncontainer\nservice\nimage\n\nFor each category, the following actions will be available:\n\ncontainer: start (parameters: an existing container), stop (parameters: an existing container)\nservice: scale (parameters: an existing service)\nimage: pull (parameters: an image tag)\n\nA user will be able to schedule a job using a simple planner in the UI. The planner should return a valid cron expression that will be send to the Portainer HTTP API (good for automation).\nNew UI views: schedules (A), schedule-details (B), schedule-creation (C)\nUpdated UI views: container-creation\nA. schedules view\n\nList existing scheduled jobs within a table (schedule name, description, schedule time)\nAbility to remove one or more scheduled jobs\nAbility to trigger manually an execution of a scheduled job\nAccess to schedule-details when clicking on schedule name\nAccess the schedule-creation view\n\nB. schedule-details view\n\nGive details about the scheduled job (name, scheduled time)\nAbility to delete the scheduled job\nAbility to trigger the scheduled job\nEdit the scheduled job name / schedule time\nList associated tasks (scheduled executions)\n\nC. schedule-creation view\n\nAbility to create a scheduled job\n\n(WIP). @enricocanardi sorry for that, I need to update the roadmap.. Hi @ewrogers thanks for the request ! Unfortunately, Portainer plugs on the Docker API at the moment and does not manage platform specific information. In  the future, we may add monitoring integrations but this is not planned yet.. Just to confirm, is this working from the services view? . Thanks for the report, I'll have a look at this soon !. @ToasterKTN no it's not the same procedure as in the services view, there is an extra validation step here as you can update multiple fields in the service configuration. See the procedure:\n\nUpdate the Replicas field and validate using the small button next to the input:\n\n\n\nButtons to save your changes or reset the configuration will appear below the panel. Hit the save button to save the current service configuration:\n\n\nThis is working fine so I'll close this issue.\nFeel free to propose any UX enhancement ;). Yes we might need to rework the UX on that one. And maybe find a better way to display this view when you have so much ports published :-). Could you join us on gitter ? I'll need more information to help you with this one. Also, how do you start Portainer ? Your first step in the reproduction list is run run, there's probably a mistake here.. Validation on the client side is done using https://github.com/auth0/angular-jwt and it should be done in UTC: https://github.com/auth0/angular-jwt/blob/45ab6b4d9c1be87eb6f5654c844d2895529acd2b/src/angularJwt/services/jwt.js#L41\nOn the server side, the expiration date of the token is determined using time.Now() which will depend on the system time zone: https://github.com/portainer/portainer/blob/develop/api/jwt/jwt.go#L36\nCould you update this line with the following code, rebuild the project and try again?\ngolang\nexpireToken := time.Now().UTC().Add(time.Hour * 8).Unix(). Actually, validation is done on the client side using new Date() which is using the user's local time: https://github.com/auth0/angular-jwt/blob/45ab6b4d9c1be87eb6f5654c844d2895529acd2b/src/angularJwt/services/jwt.js#L54 so this may be the cause here.\nI've open an issue on the library to get some answers: https://github.com/auth0/angular-jwt/issues/133\n. @Glowbal I've added some logging on this branch: https://github.com/portainer/portainer/tree/fix398-jwt-expiration-time\nIt also includes the change to generate the token date in UTC, could you try it? Have a look at the logs in your browser console and docker container (docker logs -f portainer).. There's definitely something wrong on the server side: \nportainer.js:496 \"2016-12-12T05:03:17.000Z\"\nPlease have a look at Portainer container's logs: docker logs portainer\nLooks like the expiration date is 8 days in the past?! Super strange, could you try to run Portainer outside of a Docker container? I'm not sure if it's related but we should give it a try...\nshell\n$ grunt clean:all\n$ grunt build\n$ cd dist && ./portainer -d /tmp\nAlso, this is really strange: \njavascript\nangular.js:118 TypeError: $state.go is not a function\nAnd then access http://localhost:9000. Also, I've pushed some changes to the branch with some new logging...\nI have the following logs in my browser console:\nAuthentication init. Token expiration date (from jwtHelper, UTC): \nportainer.js:4013 \"2016-12-21T06:17:38.000Z\"\nportainer.js:494 Browser date (using Date(), local TZ):\nportainer.js:495 \"2016-12-20T22:17:40.227Z\"\nPlease rebuild from this branch and have a look at the logs in the console.\n. @Glowbal could you update this issue with your notes and close it?. Hi @EIrwin !\nYou can use the CLI flags in the command field of your docker-compose file:\nyml\n  ui:\n    image: portainer/portainer\n    command: portainer --logo http://mylogo.com -l owner=acme --templates http://mytemplates.com\n    container_name: ui\n    restart: always\n    volumes:\n      - '/var/run/docker.sock:/var/run/docker.sock'\nI don't see the point of being able to also pass these variables as env vars. . @MetalArend I can see the global use case here, but in the case of Portainer the command is pretty simple: portainer.\nIn the case you would need this to be used inside a compose file, you'd need to have a look at the Dockerfile to determine what is the command executed by the container (no too complicated) and in any case we already provide a compose example at https://github.com/portainer/portainer-compose\nIf you want to extend Portainer image, you usually have a look at the parent Dockerfile (Portainer Dockerfile) before creating your new image, so you would see the command here too.\nOf course, you overwrite the command but it is has default values (and any evolution is included with default values, so the command should stay the same: portainer).\nI do not think that you need more than that (at least at the moment), I think that adding multiple ways to specify options (flags, environment variables, configuration file...) is just going to complexify the codebase without any real gain on the user side.\nI can reopen it and flag it as a discussion for now, but I'm not really keen on adding this at the moment.. Closing this discussion, as I specified above Portainer works quite nice when overriding the command field in a compose file. No update related to other use cases.. @tvollscw what CLI flags do would you like to see available as an environment variable?. Ah right, this is not related to this issue, you are simply missing the ability to scale a compose service. Please open a feature request for this, as it's not related to this issue at all.. Hi @marcosnils \nFirst of all nice job with PWD ! I like it and it's nice to see that other people are creating solutions to simplify Docker adoption :)\nIt looks like your Docker host is setup behind a HTTP reverse proxy, we have a PR that might solve this problem: #379 \nCould you try to use the image: eisnerd/portainer ?. @ndemoor awesome ! I'll ping @eisnerd then as the PR requires a rebase and this will be integrated in release 1.11.0 ! Thanks for the update :). Closed by #379 . Somehow this issue is still present, see https://github.com/franela/play-with-docker/issues/93. Thanks for opening an issue. I've renew the SSL certificate and updated the redirect rule :-). Hi @danielzzz \nA PR is open for that feature: #302 \nWork in progress :-). Hi @lavvy \nAn issue is already opened for this request, follow the work here: #41\n . Duplicate of #848 . @vielmetti could you give us the command you used to start the Portainer container?. @vielmetti pretty sure this issue is not coming from Opera but from the Portainer image you're using. I just tested it on Opera 42.0.2393.94 on Ubuntu and it works fine.. Closing in favor of #1612 . Really good work @Glowbal I love it too ! One thing that I dislike though: when loading a node view on a remote node (playwithdocker node for example) or with a poor internet connection, the view will display 'It looks like the node you wish to inspect does not exist.' for a short period of time before displaying the node view. IMO this should be replaced by a loading icon.. Awesome, ping me when you've made the changes as sometimes I don't receive a notification for PR updates.. @sungiri88 1.11.1 is now live on Dockerhub.. @sungiri88 your reverse proxy configuration might be incorrect. Have a look at https://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer for some inspiration. . @sungiri88 example in the doc was provided by one of our users. I won't be able to help you more than that, you'll have to try it yourself. Sorry, keep us posted though.. Implemented in #553 . @dimitrovs what would be the point of adding an environment variable as it's already available via a flag?. @dimitrovs you can do it using the command field.\nHere is an example of a portainer service in a Compose file:\nyml\n  portainer:\n    image: portainer/portainer\n    container_name: \"portainer-app\"\n    command: --no-auth\n    networks:\n      - local\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /opt/portainer/data:/data\nInspired from: https://github.com/portainer/portainer-compose. You're welcome.\nNote that the --no-auth flag is not available yet. It has been merged in develop and will be available in 1.12.. @Dids it's not. Where did you see that?\nCorrect way to start Portainer without authentication is using --no-auth.. @Dids I know, it was a typo in the docs.\nThis can't work with -no-auth:\n```shell\n$ docker run --rm -p 9001:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:latest -no-auth\nportainer: error: unknown short flag '-n', try --help\n$ docker run --rm -p 9001:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:1.11.4 -no-auth\nportainer: error: unknown short flag '-n', try --help\n$ docker run --rm -p 9001:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:latest --no-auth\n2017/03/12 21:07:37 Starting Portainer on :9000\n```\nOn what platform are you running Portainer?. I think that we need to review the UX for the ability to push / delete and pull a tag. The icons are too small / too close together.. Thanks @gkovacs81 we'll review it again soon.. I've just tested it, looks like the new design is not broken anymore on my browser I like it.\nIMO, the text below the tags should be updated (\"Note: you can click on the upload icon to push an image and on the trash icon to delete a tag\") as this PR also add the ability to pull an image.\nAlso, I just tried to pull a local image \"portainer\" and the UI displayed a success message will the API returned an error with the following response:\njson\n{\"message\":\"repository portainer not found: does not exist or no pull access\"}\nError handling when pulling an image should be done differently, I'll review your PR to pinpoint what should be changed.\n. Thanks @gkovacs81 ! :+1: . I find the title 'Image history' to be quite confusing. Basically, it should just display each layer in the image, skipping/grouping all the 0bytes layers together and displaying only the size of the layer and the related command with the /bin/sh -c ... prefix trimmed  (see what microbadger is doing here: https://microbadger.com/images/puppet/puppetserver ). I'd go for Image layers. We'll have a new look at this soon.. Any update on that PR @gkovacs81 ? . So I've been able to test this a bit more and I think that the only interesting parts are the size and command associated to the layers.\nSo a few points:\n\nA filter should be created to remove the /bin/sh -c #(nop) part in front of each command (see red square on screenshot)\nColumns Id, Created and Comment should be removed\nColumn Created by should be renamed to Layer\nBlue plus button should be placed on the right of the layer command instead of left (see yellow square on screenshot)\n\nSee screenshot below for changes:\n\n. ping @gkovacs81 . @gkovacs81 sorry for the late update ! Could you resolve this conflict? Seems that I cannot do it.. @gkovacs81 any update on this?. Thanks @gkovacs81 ! We finally made it !! :trophy: . Indeed, this comes from: https://github.com/portainer/portainer/blob/develop/app/components/createContainer/createContainerController.js#L144. This issue will also be present in:\n\nhttps://github.com/portainer/portainer/blob/develop/app/components/images/imagesController.js#L30\nhttps://github.com/portainer/portainer/blob/develop/app/components/templates/templatesController.js#L137\n\nOnly the image name should be lowercased, not the tag.\nImage/tag constraints can be found here: https://docs.docker.com/engine/reference/commandline/tag/\n. This will be added with #317 . I'll close this issue and reference it in #317.. This cannot be achieved today. However, this can be added quite simply by adding a --admin-password flag to the Portainer CLI.\nI'll note this as an evolution.. @liyaka Unlikely to be added in 1.11.2, probably in 1.12.x. I'll try to reproduce to get a container in that state and see why Portainer is displaying it as running.. Unable to reproduce this.\nMight be related to https://github.com/portainer/portainer/issues/1023\nWill close for now.. This will be taken into account when working on #317 . Closed, part of #317 . Could you give me more details on your use case here? I don't really understand the feature request.. ping @dz0ny . Closed due to no activity. Feel free to re-open if needed.. Re-opening this as a feature request.. @SeriousM @jvandyke are you both running on Docker for Windows?\nAlso, Portainer not finding the endpoint under /endpoints/0 is a normal behavior on first run, no endpoint is defined yet. Also, if you're running Docker for Windows, Docker should be running on Linux inside a virtual machine, so /var/run/docker.sock should be available.\nYour issue seems related to system date, Portainer authentication tokens expires after 8h at the moment and somebody already had an issue where their Docker host date and time was messed up.\nI'll increase the validity of the tokens for now, that should do the trick.. @SeriousM I've pushed some changes on a specific tag on Dockerhub, could you try it?\nshell\n$ docker run -d -p 9000:9000 --name portainer -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:fix432. @petermetz @merbla The issue might be related to your Docker system time being different from your computer system time.\nCould you check the output of docker run busybox date and see if it's different from your system time? Have a look at this issue as it seems that you're both running on MacOS: https://github.com/docker/for-mac/issues/17. I'll let this issue for now, and will add a section in the FAQ about this issue.. I've added an entry about this issue in the FAQ: https://portainer.readthedocs.io/en/stable/faq.html#i-am-getting-the-error-your-session-has-expired-on-login-and-cannot-login-what-s-wrong\nThanks for the help debugging that one guys !. Thanks @nicopeeters, I'll add it to the FAQ !. Hi @bloo \nIt seems that your server is configured to use UTC, your browser will use your system time to check the authentication token validity.\nIn the command you listed, which one represents the date of your system?. As @Glowbal said, this could be caused by your multiple replica Portainer setup. Try again with a single replica.. Closed by #435 . I don't see the problem in the services view:\n\n\n\n\n. But the services-details view does not allow for the 0 value indeed.. I found a small issue while testing it, if you select a whole page of containers and remove them, after the refresh of the view the select all checkbox will still be ticked although there is no selected item. Could you fix that @WouterOet ?. > If we see the checkbox as a representation of whether all containers are checked, than yes we need to fix it\nThis is how I think it should work. Though it's good enough for now and we can easily fix it later if people complains as you said. I'll integrate that in 1.11.1.. I'll close this PR as we found the cause of the issue.. I like the suggestion of @WTFKr0 \nMaybe we can integrate this information inside the State ?\n\nAdding an extra label for health check for example. The state of a container could be |running| |healthy| for example. This might confuse the user though and we need to keep things simple to understand. Any proposition here?. @WTFKr0 exactly what I had in mind.\nCC @ncresswell for his opinion. @WTFKr0 @WouterOet Keen to implement this?. Replaced by #622 . Thanks for the feedback, this will be looked into when working on #297 . Closed by #502  . Thanks for the PR ! I'll add a new arm64 tag on Dockerhub starting from this release.. Thanks for the request ! Indeed we need to review the Windows image for Portainer 1.11. How did you manage to run and persist data on Windows? This will help us define the Windows Dockerfile and update the documentation.. @glennsarti thanks, this will be really helpful !. I've updated Portainer to use the default value of C:\\data for the data directory and the certs folder C:\\certs when built for Windows.. This will be added soon !. We cannot use tcp://localhost:2375 as a default since it will resolve to the container IP inside a container. It will work when ran outside of a Docker container but this is not valid inside a container. I've opened #459 for an experimental support of named pipes on Windows. For now, I'll just update the documentation to specify how to run a Portainer container on Docker on Windows.. @theimpostor \n\nI think we need a separate issue maybe, because the portainer documentation and UI seems to assume that if you are on Windows you must be running Windows containers\n\nWe're trying to make the documentation as simple and clear as possible... In the latest doc, you can see that we added a section about Docker for Windows being different of Docker on Windows: https://portainer.readthedocs.io/en/stable/deployment.html#deployment. @kingjerod @cyberjoac please join us on Slack http://portainer.io/slack/ or Gitter https://gitter.im/portainer/Lobby as we have some users who managed to make it work on Docker Toolbox. I'll ask it here right now.\nNote: the error is strange, it looks like you're trying to bind mount the socket using Windows file system (which should not be the case, Docker Toolbox should provide you with a Linux VM if I'm correct).. I'll close this issue as I think that our docs and the endpoint init. process in Portainer is now clear enough for our users. It will also be easier once we'll be able to mount named pipe on Windows: https://github.com/portainer/portainer/pull/1186. @dazinator no, you need to use initialization options inside Portainer.. This has been fixed by #418 and will be released in 1.11.1 soon.. Thanks a lot Glowbal ! It's a huge PR :-)\nI'll review it soon, but it may take me some time.. Sorry for the delay @Glowbal I was not really available these last days ! We will plan to add this into the 1.12 release !. @Glowbal could you rebase and fix the conflicts? Cheers :). I'm always getting an error 'update out of sequence' after trying to edit another field right after one update.\nExample: \n\nGo to the Services Labels sections and add a label\nUpdate is OK, label is added\nGo to the environment variables section and add an env var\nUpdate is KO with 'update out of sequence' message\n\nThis is related to the fact that the Version.Index field in the current service object is out of date after the first update (even after forcing a reload of the state). Some asynchronous work must be done in background in Docker so you can trust the result the an inspect right after an update to retrieve the correct Version.Index. \nAccess service-details (Version.Index OK) > Update (Version.Index OK) > Reload service-details (Version.Index KO)\nRelated open issue in docker: https://github.com/docker/docker/issues/30794 \nLooks like @nasskach already stated the problem: \n\n\nIt would be nice if we also had a nice way to see the update progression of a service (with an automatic data refresh for example).\n\n\n@morph027 As it seems that you've deployed it already, you never had this issue? \nFYI, Docker Datacenter work around this by preventing the user to update the service while an update is in progress:\n\nI do not know how they're managing this update status though.. Another minor issue: I'm getting an error when trying to rename a service.\n\nLooks like this is not supported anymore (was it in 1.12?)\nEDIT: I've justed tested on a 1.12 and this is possible. I do not think there is a need to detect the API version and enable this if version == 1.12, we'll just prevent it globally as it seems Docker won't support it anymore.\n. I can see strange grey artifacts in the Container spec section of the Container specification (just before 'Command to execute' and 'Arguments passed to command in container.'\n\n. An UX issue: when sorting the task table, the view is reloaded which brings the user back on the top of the page. \nActually when updating any section, the user is redirected to the top of the view. Wouldn't that be better if the user would be redirected to the section he just edited ?. Minor UX issue: I found myself scrolling up and down a lot in this view. It would actually be better if the quick navigation would be displayed on top of the view (just below the breadcrumb/user white bar) and stay there as the user scroll into the view.\nThis is a minor issue and can be added as an enhancement after merge.. From a technical point of view, it looks good to me. Have a look at my review to fix the small issues I raised. The ServiceController is starting to be really big and will have to be refactored in the next releases probably.\nFrom an UX/functional point of view, this should not be merged while the following issues are still present:\n\nThe out of sequence issue when trying to update a service (this is a major one)\nPrevent the user to rename the service\nSmall display issue in the container specification \nThe redirection issue when sorting the tasks / updating a section\n\nStill, this is an impressive amount of work and I've got one thing to say to you @Glowbal : bravo ! :clap: : \n. @Glowbal could you remove the secrets part and add it in #518 ?. @Glowbal when accessing the service details view, the following error is raised in the Javascript console: \njavascript\napp.162bee84.js:118 Error: [$parse:syntax] http://errors.angularjs.org/1.5.8/$parse/syntax?p0=%2C&p1=is%20an%20unexpected%20token&p2=17&p3=%7Bid%3A<a ui-sref=\"service({id: service.Id}, {reload: true})\" class=\"ng-binding ng-scope\">ervice.Id%7D%2C%20%7Breload%3A%20true%7D&p4=%2C%20%7Breload%3A%20true%7D\n    at Error (native)\n    at http://localhost:9000/js/app.162bee84.js:6:412\n    at Object.throwError (http://localhost:9000/js/app.162bee84.js:230:78)\n    at Object.ast (http://localhost:9000/js/app.162bee84.js:221:442)\n    at Object.compile (http://localhost:9000/js/app.162bee84.js:231:329)\n    at kc.parse (http://localhost:9000/js/app.162bee84.js:260:95)\n    at g (http://localhost:9000/js/app.162bee84.js:125:383)\n    at m.$watch (http://localhost:9000/js/app.162bee84.js:139:312)\n    at http://localhost:9000/js/app.162bee84.js:16:71\n    at Object.link (http://localhost:9000/js/app.162bee84.js:363:25381)\nCan you fix that?. Yeah we finally did it ;)\nMany thanks @Glowbal :trophy: . @stefanprodan just to confirm, do you use container URLs to share them as link? At the moment, Portainer's UI allow you to manage only one active endpoint. This active endpoint can be defined via the dropdown.\nSo, to be clear, you'd like to be able to access other endpoints via URL (images, containers, networks... basically all entities with detailed view) ? . @WTFKr0 \nThis would be a great idea. In order to support this, we'll need to introduce the endpoint identifier as a part of a Portainer URL.\nRight now, the EndpointProvider service takes care of managing which endpoint we are actually connected to. It is usually updated after accessing the authentication view or when switching endpoints.\nI believe that we need to update the global state management to introduce a new endpoint parameter in the URL and probably update the app init call (in case of refresh) to set the endpoint identifier from the URL in the EndpointProvider service if it is not set already.\nI'd accept a PR for this.. @WTFKr0 Routing for the portainer module should not be altered as all the pieces in the module are not related to any endpoint (users, registries, teams...).\nInstead, we'll want to update the routing of the docker module, especially the parent docker state: https://github.com/portainer/portainer/blob/develop/app/docker/__module.js#L5\nIt should probably not be an abstract state anymore and introduce an endpoint ID parameter to generate a URL similar to: #/docker/1/containers (where 1 is an endpoint identifier) instead of #/containers.\nRegarding the app init call, you'll want to investigate around https://github.com/portainer/portainer/blob/develop/app/app.js#L6 and see if you can inject the endpoint id parameter via $transition$.. @glennsarti would you be able to test it? Do you need me to build an archive for you to download? I'd also like to try it inside a Windows container but I don't know if it's possible to mount the named pipe inside a container as we do for the Linux socket.. @glennsarti an experimental release including this feature is available at: https://github.com/portainer/portainer/releases/download/1.11.0/portainer-experimental-windows-amd64.tar.gz. It's available on Dockerhub under the tag pr459. I'd like to know if it's possible to mount the named pipe inside the container to run it like this:\nshell\n$ docker run -d -p 9000:9000 --name portainer -v npipe:////./pipe/docker_engine:npipe:////./pipe/docker_engine portainer/portainer:pr459 -H npipe:////./pipe/docker_engine. @paulkling thanks for your investigation ! Seems like there is no way currently to map the npipe into the portainer container. We'll need to figure out another way of doing this.. Yes I was wondering if something like this was possible on Windows. . Thanks for playing with that one @glennsarti ! The panic error might be related to wrong default for Windows (C:\\\\data, might be better with C:\\data). As we don't have the ability to expose the named pipe inside the container, we might just keep the npipe:// protocol support for the -H flag but without documenting it for a container execution (e.g. it will only be usable outside of Docker).. As mounting npipe inside a container is not possible on Windows (quote by @StefanScherer):\n\nNo, not possible in the platform. Windows isn't 'file based' in the same way that Linux is.\n\nI don't think this should need to be merged. It would only be useful for people using the Portainer binary without Docker and available as a CLI flag only. I don't really see the point in maintaining that feature at the moment, so closed for now. We might come back later on this one.. Please give us more information about how you start the Portainer container. And read the report a bug guidelines when opening an issue, we need more details.. Looks like portainer cannot connect to your remote Docker instance, are you sure the port is exposed? Can you connect to your Docker instance via CLI ? E.g. docker -H remote.host:2375 info. This is not enough, please have a look at the Docker documentation to check how to expose Docker on a TCP socket.\nYou need to be able to communicate via TCP, e.g. this needs to work: docker -H remote.host:2375 info\nThen, you'll be able to start Portainer and try to manage it.. @kdekooter if you don't want to expose the Docker socket, you can still expose a TCP port only and connect portainer to it.. @nskalimuthu I'm going to assume that your original issue is solved. About your other questions those are related to Docker / your OS. \nFeel free to re-open if needed. . @nskalimuthu your issue is really strange. When installing Docker, it should setup the systemd/initd/upstart scripts required to start Docker via a service/systemctl/whatever (and this should start dockerd).. @nskalimuthu that is not normal, stats should be available directly without configuration (equivalent of docker stats). Could you ensure that docker stats works for you first ? And then, if you can inspect the result of the api/docker HTTP requests via your browser developer tool on that page, that could help us.\nAlso, for a better support, join us on Slack http://portainer.io/slack/ or Gitter https://gitter.im/portainer/Lobby.. @AndrewErman this is related to your Docker daemon configuration, you need to find a way to expose the Docker API on a socket for each node of your cluster. Join us on slack http://portainer.io/slack/ or gitter https://gitter.im/portainer/Lobby if you have more questions.. Hi @x3r10n \nWhat command do you use to connect via the docker command to the other nodes? Are you sure the bridge network on that host can access these other nodes?. Well, you can probably use --net host when starting the Portainer container.. @x3r10n usually bridge network works fine. Join us on slack for more support https://portainer.io/slack/. Thanks for the proposal ! This is a major evolution, at least at a functional level, we'll be able to discuss it here. . Update on this one, starting from Docker 1.13 the /nodes API exposes the IP addresses of all the nodes. Portainer can then query all the nodes and aggregate the response to get all the containers and images in the cluster.. An extra thought on using the IP addresses of the nodes exposed by the API:\nA swarm mode enabled cluster can be created with only the manager exposing the port 2375 to manage the cluster, all workers can run and expose only the Linux socket. So this approach cannot be used.. Well yes, but what's the difference with configuring your daemon here?\nWe want this integration to be simple and transparent for the user, no configuration required.. @man4j that's simple, at the moment you can't see all the containers in the cluster because the Docker API does not expose that (see it as the equivalent of docker ps -a on your Swarm manager, this will only list the containers running on that node).\nThe motto of Portainer is: simplicity. We should be able to add this feature in Portainer and make it simple and easy to enable for our users.\nBesides, even if you enable a worker on TCP/IP (which might be your case only), some users will use TLS setup, others will want to secure their workers by not enabling a TCP socket on them. We need to provide a solution that works for all the cases.. Latest thoughts on the subject.\nFunctional goals\n\nAbility to list all containers running in the cluster when accessing the containers view\nAbility to execute operations on any container in the cluster from the containers view \nAbility to inspect and execute operations on any container in the cluster from the container-details view\nShould be simple to enable: when creating an endpoint, a user will be able to tick a \"Swarm cluster\" checkbox. This will enable this capability on the endpoint.\n\nProposition\nImplementation proposition.\nGlobal service\n~Deploy a global portainer-agent service in the cluster using mode=host when publishing the port so that querying each node will actually talk to the agent located on that node.~\n~Each container would bind mount the local Docker socket and expose the Docker API on a port on each node.~\nFollowing a discussion with @bvis on Slack, each agent should be actually created inside an overlay network (Portainer should be started into this overlay network too). The communication between the agents and the main Portainer instance would then be done within this overlay network, removing the need to expose the agent on each node.\nIt implies the following:\n\nUse DNS-SRV records to list the IP addresses of all the agents in the overlay network\nMore secured, as it restrict the access to the agent from outside the cluster and does not expose any port on each node.\n\nAs authentication and UAC is stored inside the main Portainer instance, any query must be executed against the Portainer instance.\n\nIn this context, the aggregated response would have applied UAC and filter access to resources.\nService creation would be something similar to:\n```shell\nRequires the creation of an overlay network when deploying Portainer\n$ docker network create \\\n  --driver overlay \\\n  portainer-network\nDeploy Portainer\n$ docker service create \\\n    --name portainer \\\n    --network portainer-network\n    --publish 9000:9000 \\\n    --constraint 'node.role == manager' \\\n    --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n    portainer/portainer \\\n    -H unix:///var/run/docker.sock\nAutomated from Portainer\n$ docker service create \\\n    --name portainer-agent \\\n    --network portainer-network\n    --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n    portainer/portainer-agent\n```\nRegistering agents\nMultiple solutions can be used to register the agents into the main Portainer instance:\n~* (A): Use the Docker API to list all nodes in the cluster via the /nodes endpoint, IP address of each node is exposed in the Status.Addr field (note: this is only available in Docker API > 1.24 or Docker version >= 1.13)~\n\n\n(B): Create a /agent in Portainer API so that an agent can register itself to the main Portainer instance once started. This requires an extra parameter when starting the agent: the location of the Portainer API (IP/URL + port).\n\n\n(C): Use DNS-SRV records as suggested by @WTFKr0\n\n\nStill need to figure out which way would be the best. Note that I'm not sure how to retrieve the Portainer API location in (B) (should we use the browser URL ? e.g. when browsing http://myportainer.domain:com API should be located at myportainer.domain.com/api).\nSecurity considerations\nBy default, Swarm workers only expose the Docker engine via the socket. ~Adding an agent on each node in the cluster would expose the API on a public port, so each node would be exposed publicly.~ Running agents and Portainer inside an overlay network prevents other containers outside this network to access the agents but a container can be started inside this network and query the agents, so the communication between Portainer and the agents still needs to be secured.\n~Now, I don't think that anybody would want that~. Here is a proposition for a secured setup:\n\nEach node (manager/worker) in the cluster should expose the Docker engine on the socket only\nPortainer should be started as a service on manager using a socket bind mount\nCommunication between the main Portainer instance and agents should be secured within the overlay network\n\n\nWe could secure the communication between the agents using the following methods:\n\nuse TCP + SSL to communicate with agents (Docker API response would be encoded on the agent and decoded on the main Portainer instance)\nsecure the HTTP API of each agents with TLS\n\nExtra considerations\nA list of thing that we still need to think about: \n\nHow to refresh the list of agents ? E.g. when nodes are added/removed, should we add the ability to click on a 'refresh' button in the endpoints view for example?\nWhen querying an operation such as inspect a container on a specific container, the agent where the container is running should be queried directly (we should not query each agent/node in the cluster). I think that we'll need to decorate the request to handle that.\n\n. @markvr I've updated my post, indeed using an overlay network would actually be a better choice.\n. @markvr @rreinurm @bvis extra-thoughts:\nDeploying agents inside an overlay network might work well when deploying Portainer inside that network as a service. But Portainer aims to manage different Swarm clusters from the same instance... using this solution won't work in that case.\nWe might want to be able to support both:\n\nAgent deployment inside an overlay network so that users with only one cluster can deploy Portainer as a service and all its agent inside that cluster\nAgent deployment with port exposed publicy so that Portainer can manage the cluster without being deployed into that cluster\n\nIn both cases, it's a simple deployment configuration for the agent but it impacts how the agents will be registered inside the Portainer instance (the DNS-SRV records solution is working for the first case only, so we need to determine a solution to register agents that will support both cases).. @jfgrissom you can donate either via Patreon or Paypal\nAny donation is a great help for us.\nNow back to the subject, we've started to work on this and we'll post an update soon :-)\n. @wernerbarnard I've got a agent POC working but I'm having a few difficulties with container console. Also need to tackle the agent security topic, no ETA yet but the work is in progress.. A PR is finally open for this one, have a look at #1828 :-). I'll close the issue after merging #1828 . This has been fixed with #418 and it will be released soon.. Please give us the command you use to start Portainer.. @ryanjoachim did you select manage the local endpoint when Portainer asked for an endpoint?. Yes, you need to start portainer and bind mount the docker socket for the 'manage local endpoint' option to work.\nE.g. docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer. If you want portainer to restart automatically and to persist it's data on your disk to /opt/portainer-data for example, use the following command:\ndocker run -d -p 9000:9000 --restart always --name portainer -v /opt/portainer-data:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer. @ernest-okot probably your reverse proxy configuration. Have a look at https://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer. @mijara yes, you need to either do a grunt build first or save a file. This will compile all the html/js/css assets.\nI'll update the docs.. Do a CTRL+F5 to bypass your browser cache.. Output of ls -lahR dist after a grunt build:\n```shell\n\u00b1 % ls -lahR dist                                                                                                                                                                                                                       !10026\ndist:\ntotal 6,2M\ndrwxrwxr-x  7 tony tony 4,0K janv.  5 09:29 .\ndrwxrwxr-x 13 tony tony 4,0K janv.  3 07:45 ..\ndrwxrwxr-x  2 tony tony 4,0K janv.  5 09:29 css\ndrwxrwxr-x  2 tony tony 4,0K janv.  5 09:29 fonts\ndrwxrwxr-x  2 tony tony 4,0K janv.  5 09:29 ico\ndrwxrwxr-x  2 tony tony 4,0K janv.  5 09:29 images\n-rw-rw-r--  1 tony tony 1,3K janv.  5 09:29 index.html\ndrwxrwxr-x  2 tony tony 4,0K janv.  5 09:29 js\n-rwxrwxr-x  1 tony tony 6,2M janv.  5 09:29 portainer\ndist/css:\ntotal 244K\ndrwxrwxr-x 2 tony tony 4,0K janv.  5 09:29 .\ndrwxrwxr-x 7 tony tony 4,0K janv.  5 09:29 ..\n-rw-rw-r-- 1 tony tony 233K janv.  5 09:29 app.fc77c310.css\ndist/fonts:\ntotal 1,2M\ndrwxrwxr-x 2 tony tony 4,0K janv.  5 09:29 .\ndrwxrwxr-x 7 tony tony 4,0K janv.  5 09:29 ..\n-rw-rw-r-- 1 tony tony 434K janv.  5 09:29 fontawesome-webfont.svg\n-rw-rw-r-- 1 tony tony 162K janv.  5 09:29 fontawesome-webfont.ttf\n-rw-rw-r-- 1 tony tony  96K janv.  5 09:29 fontawesome-webfont.woff\n-rw-rw-r-- 1 tony tony  76K janv.  5 09:29 fontawesome-webfont.woff2\n-rw-rw-r-- 1 tony tony 107K janv.  5 09:29 glyphicons-halflings-regular.svg\n-rw-rw-r-- 1 tony tony  45K janv.  5 09:29 glyphicons-halflings-regular.ttf\n-rw-rw-r-- 1 tony tony  23K janv.  5 09:29 glyphicons-halflings-regular.woff\n-rw-rw-r-- 1 tony tony  18K janv.  5 09:29 glyphicons-halflings-regular.woff2\n-rw-rw-r-- 1 tony tony  87K janv.  5 09:29 montserrat-regular-webfont.svg\n-rw-rw-r-- 1 tony tony  43K janv.  5 09:29 montserrat-regular-webfont.ttf\n-rw-rw-r-- 1 tony tony  25K janv.  5 09:29 montserrat-regular-webfont.woff\ndist/ico:\ntotal 16K\ndrwxrwxr-x 2 tony tony 4,0K janv.  5 09:29 .\ndrwxrwxr-x 7 tony tony 4,0K janv.  5 09:29 ..\n-rw-rw-r-- 1 tony tony  880 janv.  5 09:29 apple-touch-icon-precomposed.png\n-rw-rw-r-- 1 tony tony  880 janv.  5 09:29 favicon.ico\ndist/images:\ntotal 64K\ndrwxrwxr-x 2 tony tony 4,0K janv.  5 09:29 .\ndrwxrwxr-x 7 tony tony 4,0K janv.  5 09:29 ..\n-rw-rw-r-- 1 tony tony 4,9K janv.  5 09:29 gritter-light.png\n-rw-rw-r-- 1 tony tony 6,2K janv.  5 09:29 gritter-long.png\n-rw-rw-r-- 1 tony tony 4,8K janv.  5 09:29 gritter.png\n-rw-rw-r-- 1 tony tony   43 janv.  5 09:29 ie-spacer.gif\n-rw-rw-r-- 1 tony tony  23K janv.  5 09:29 logo_alt.png\n-rw-rw-r-- 1 tony tony 3,1K janv.  5 09:29 logo.png\ndist/js:\ntotal 1,2M\ndrwxrwxr-x 2 tony tony 4,0K janv.  5 09:29 .\ndrwxrwxr-x 7 tony tony 4,0K janv.  5 09:29 ..\n-rw-rw-r-- 1 tony tony 1,2M janv.  5 09:29 app.b6c7b025.js\n```. I've updated the docs to add an extra build step.. @sleavitt this is not by design we're having issues with our ISP, thanks for reporting it though. Will be up again soon.. Thanks for opening the issue, we'll add this in our roadmap !. This issue is not related to the docker update command (e.g. update a limited set of options for a container). The way I see this issue is that we will provide the user the ability to change a container configuration and start a new container from this new configuration. It will be specified that the current container will be destroyed and that a new container will be created in place.\n@aptalca is that what you expect?. Ok so you're expecting a sort of 're-create container with latest image' feature. This could be the first step indeed, we just need to figure out how to introduce it in Portainer design wise and how to clearly explain to the user that feature.. @TheNuclearCat nobody is working on this at the moment, I'd accept a PR though :). @WTFKr0 \n\nBut I think it's complicated (impossible) to recreate a container with the same non-persistent (anonymous) volume\n\nWhy so? Just retrieve the name of the previously mounted volumes (either persistent or non-persistent) and mount it again on the same location in the new container.\n@ncresswell \n\nUnless we can ensure no data loss, i dont want any automated delete/recreate function introduced\n\nAgree, and I think that this should be clear to the user that the current container will be deleted and a new one will be created.. @elegos will not be part of next release (1.13.0) as it will be released today ! But will sure be part of 1.13.x ! :). Yes, I think that this should do the trick if you want to rebuild a container and pull the latest image. You need to use Swarm tho.. You can now test the implementation proposed in #855 via portainer/portainer:pr855 (linux amd64 build).. This feature will be part of the next release as an experimental feature.. > It would be really useful to be able to implement a simple process to update the image of an existing container to the latest underlying image\nThis is already available, just inspect a container and click on the recreate action. It will ask you if you want to pull the latest image associated to the container.. Hi @jbleuzen \nI was unable to reproduce this in version 1.15.0. Could you tell me if this is still happening ?. For those interested to test this feature, it's available with the preview image portainer/portainer:pr2078 (Linux amd64 only)\nFeedback appreciated.. @WriteCodeEveryday well it's part of Portainer 1.19.2 :-). @WTFKr0 Nice one ;)\n@misery this problem might be related to your network.\n@DEKHTIARJonathan want to give this solution a try?\nI'm going to add this in the docs.. Added via https://github.com/portainer/portainer-docs/commit/078c04ac8eeeeac4d30aa6c3a295c1f23381952e\n. I'll re-open to consider an evolution to be able to configure any HTTP proxy inside Portainer.. Yes, seems that there is an issue with the Javascript concatened files introduced with #422  . This was due to a build issue. 1.11.1 has been updated on Dockerhub please pull the image again. . 1.11.1 has been updated on Dockerhub please pull the image again. . This is not a bug. Portainer has event support for standalone hosts only (the Docker API does not expose any Swarm events at the moment). When targeting a swarm enabled endpoint, the events view is just hidden as it makes no sense to have access only to one host events. To avoid that strange behavior, the user should be redirected to the dashboard when browsing events and switching to a swarm enabled endpoint. . I'll keep this issue open as I think an evolution is required here. To avoid confusing the user when switching endpoint from standalone to swarm enabled while browsing the events view, a redirection to the dashboard should occur. . The dashboard switch is tracked in https://github.com/portainer/portainer/issues/548. This can be added quite easily in the container creation view, I'd accept a PR :). @takigama if you have any questions or need any help for the implementation, join us on Slack: http://portainer.io/slack/ and ask me any question here :). Closed by #812 . For some reasons, this issue only appears when using C:\\data as the data directory on Windows.. When using golang:1.8 as a base image for building the binary, this issue is not present anymore. It's replaced by mkdir C:\\data: Cannot create a file when that file already exists. which is strange because it looks like the test of file existence is bypassed/ignored via os.IsNotExist(err).. We'll bypass this one for now by replacing the current default for Windows C:\\data by C:\\ProgramData\\Portainer.. @StefanScherer when doing my tests the panic occured even without mounting a host directory into the container (e.g. docker run -d portainer/portainer:windows). I'm pretty sure it's related to the C:\\data directory.. Nope, during my tests I also tried using C:\\data1 amongst other things as a data directory and it worked well. The only issue was when using C:\\data.. Interesting. I totally forgot to update the VOLUME entry in the Windows\nDockerfiles. Does that mean that I should remove the VOLUME entry?\nLe mar. 10 janv. 2017 11:14, Stefan Scherer notifications@github.com a\n\u00e9crit :\n\nI now understand, you don't have to mount a volume, the VOLUME in the\nDockerfile causes this.\nSee also sixeyed/dockers-windows@018b5f5#commitcomment-20408049\nhttps://github.com/sixeyed/dockers-windows/commit/018b5f5fa26fbd9a65ae20bbf2828db50139ed61#commitcomment-20408049\n\u2014\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/474#issuecomment-271424807,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBRhW-yCl-wXONa6Fv-qrL_6o4BPBks5rQrFUgaJpZM4LdYhd\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. I agree, I'll have to revert #452 for now and rework on that part when the Go issue is fixed.. #495 disables the check/creation of the data directory. It also changes the VOLUME instruction in the Windows Dockerfiles from C:\\\\data to C:\\\\ProgramData\\\\Portainer.. Build environment has been updated. The latest portainer/portainer:windows tag is now using the latest microsoft/nanoserver base image. . Thanks for the report and the fix (I love the youtube video bug report :)). Fixed by #477 . @akamustang \n\nThis is related to another issue, see https://github.com/portainer/portainer/issues/1223\nIt has been fixed and will be released soon, you can use our unstable build in the meantime via portainer/portainer:develop (Linux amd64 build).. @danielfaust somebody already reported an issue with the google captcha on Safari (it's not displayed). What browser/OS are you using? As this is not related to this project I'll close the issue. Please open an issue at https://github.com/portainer/portainer.io/issues. Hi @danielfaust, we already have an issue open for this one. This will come with 1.11.2: https://github.com/portainer/portainer/issues/378\n. Sorry for the delay @JisuPark ! Thanks for the PR :trophy: . Portainer will ony display published ports and not exposed ports. Please have a look at the Docker documentation for the difference between --expose and -P.. Yes, we should update the title to Published Ports then to match Docker vocabulary.. What option did you choose to create the default endpoint after the authentication form? Manage engine where Portainer is running or remote host?. @luca-moser interesting. What's the response content for the info, json?all= etc requests in your browser console?\nThe localhost binding is an interesting bit, I'll have a look at this.. Indeed it seems that the docker socket is not accessible. I'll test it on my local environment.. @PhantomYdn give us more details about your execution environment: docker command used to run portainer, docker version, platform, browser etc.. @PhantomYdn are you using a reverse proxy? Some people were having issues with Portainer behind a reverse proxy, see #486 . @luca-moser nice ! I just updated the documentation as it's not corresponding to the latest version of Portainer, please use http://portainer.readthedocs.io/en/latest/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer (latest doc version, will be released as stable soon).. Stable documentation has just been updated.. @katopz had a look at http://portainer.readthedocs.io/en/latest/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer? . @kapotz what portainer version are you running? . @katopz could you try to use our compose setup available here: https://github.com/portainer/portainer-compose ?\nAnd then fiddle with the provided nginx configuration?. @katopz we do not have any HTTPS example available atm. I may ask our user community to see if this has already been implemented and retrieve some examples.. @luckydonald have you tried to use the example nginx configuration provided in the docs at https://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer?. @luckydonald Glad you managed to make it work !\n\n(Not sure why there is something different for the api route in the first point)\n\nIf you omit the following definition from the Nginx configuration, container console won't work in Portainer:\nnginx\nlocation /dcr/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer_d/api/websocket/;\n}. Not sure, give it a try and tell me :). @Pewpsockemz can't help you if you are unable to update the Nginx configuration.\n\nI actually got it to work by adding the endpoint of the dockerhost on my server. not sure if this is the best way to do it but it seems to be working.\n\nWhat do you mean by that?. Thanks for the update @luckydonald, we'll update the provided nginx configuration in the docs.. I'll close this issue as it's mainly related to reverse proxy configuration. Thanks for the help of everyone involved !. @gpapin Please have a look at an example reverse proxy configuration provided here: https://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer. We did not plan any configuration file support at the moment. We might think of an evolution on that side later on and give the ability to specify all the CLI flags inside a configuration file.\n@ncresswell what do you think on that one?. I'll keep this issue open to track a need for a way to be able to externally configure portainer before starting (e.g. configuration file, CLI...) though this is not in our roadmap at the moment.. Closing this issue as Portainer can actually be configured at deployment using CLI flags and there is no need to add a configuration file management (at least, at the moment). Might re-open later.. Are you running Portainer behind a reverse proxy?. @level420 When running Portainer behind a reverse proxy, you'll need a specific configuration.\nHere is an example for Nginx, you'll need to adapt it for Apache:\n````nginx\nupstream portainer {\n    server ADDRESS:PORT;\n}\nserver {\n  listen 80;\nlocation /portainer/ {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass http://portainer/;\n  }\n  location /portainer/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer/api/websocket/;\n  }\n}\n```. Yes, we'll update the docs soon :). This will be implemented as a part of #235 \nYou'll be able to define specific permissions for teams/users and we'll also add a \"guest\" account with read-only permissions.. Yes, this will be implemented as a part of #235\n. Ok I've been able to reproduce this. It's not related at all to the fact that a container has a dash in its name. It is due to the fact that we use thenetwork` filter to retrieve the containers in the network via the Containers endpoint https://docs.docker.com/engine/api/v1.24/#/containers\nThing is, this flag has been introduced in Docker 1.12 (API version 1.24). So this bug will appear when accessing the network details view on Docker < 1.12.. Agree, not sure that this is still useful. IMO the latest version of the template image should always be fetched when deploying a template.\n@ncresswell thoughts?. Closing as we already pull the latest version of the image during template deployment.. This is the default behavior of Docker. We might introduce a checkbox close to the remove button to force the remove of the image (equivalent of docker rmi -f <IMAGE_ID>, will remove the image even if it is used by containers or having multiple tags).. Implemented via https://github.com/portainer/portainer/pull/930. @bes I can't reproduce this. When trying to delete an image with multiple tags I get the Docker error saying 'image is referenced in multiple repositories'.\n\nMight be related to #497. @bes I've just pushed portainer/portainer:fix500 to Dockerhub which includes the fix of @gkovacs81. Please try again with this image.. Yes, this is how Docker behaves when you try to delete an image with multiple tags associated to it. We track the enhancement to force the remove of this kind of images in #497.. @sokoow Are you running portainer outside of Docker? which archive did you download?. > I'm running this binary inside my own docker\nWhat do you mean? Are you using your own Docker image? Why not use the official portainer/portainer image?. Nothing strange, I just needed more details to help you running Portainer ;)\nAny chance to have a look at the Dockerfile you're using?. @sokoow I just tried it myself and yes the instructions in the documentation are wrong (the part with /opt/portainer/portainer -H tcp://DOCKER_HOST:DOCKER_PORT). I'll update the docs.\nHere is a working example:\n```shell\n$ docker run --rm --name portainer -p 9000:9000 -it ubuntu bash\n\napt-get update && apt-get install -y wget\ncd /opt\nwget https://github.com/portainer/portainer/releases/download/1.11.1/portainer-1.11.1-linux-amd64.tar.gz\ntar xvpfz portainer-1.11.1-linux-amd64.tar.gz\ncd portainer\n./portainer\n```\n. Updated via https://github.com/portainer/portainer-docs/commit/4a0e82e5d7562ad557d1d42478f633f9668392f2\n\nFeel free to re-open if you have more questions or you're still having issues.. Thanks @lpfeup :+1: . :trophy: . @0x4139 yes it is, just navigate to the service details view by clicking on the service name in the services list view and you'll be able to update the image here. Then you'll just need to click on apply changes.\nFeel free to re-open if you need more info.. @emil-nasso I believe that this is what you'd like to see: https://github.com/portainer/portainer/issues/859\n. I do like the idea and I'll try to think about it. It's flagged as discuss now so we can try to figure out what we want to introduce in Portainer.\n@ncresswell what are your thoughts about this one?. @paulkling I don't have too much time to think about something related to this feature at the moment, I'm pretty busy on the other features that we need to add in the next releases. Tho, if you want to start working on something like a proof of concept and send it to us for a review we will be glad to do so. This will also probably help us get more idea on the subject and define a direction where we'd like to go. Thanks again !. Indeed thanks for the workaround, I'll add it to the docs.. This has been added via https://github.com/portainer/portainer-docs/commit/4f866f5cdc0396c3285c28f1a89d3209c4d6b675. I've been able to reproduce this, I'll push a fix soon.. This is due to the latest release of gorilla/mux, introduced via https://github.com/gorilla/mux/issues/200\nAs we don't have the ability to pin go packages in Portainer yet, updates in dependencies may bring issues.. Duplicate of #419 . Portainer does not allow a user to push to Dockerhub or a private registry at the moment, see #147 and #56 for more info.. @camanducci yes, this was introduced in release 1.13.3. @liyaka You can only change the admin password via the UI. What do you mean by option?. @liyaka no, there is no way to reset the admin password if you forgot it at the moment. We'll track this evolution here.. Yes, you can use the Portainer API to manage the endpoints. Note that you'll need to authenticate against the API first.\nThe Portainer API is undocumented yet, but here is an example (using httpie):\n```shell\nAuthenticate against the API (assuming Portainer is running locally and listening on port 9000)\n$ http :9000/api/auth username=\"admin\" password=\"mypassword\" \nHTTP/1.1 200 OK\nContent-Length: 142\nContent-Type: text/plain; charset=utf-8\nDate: Fri, 20 Jan 2017 22:30:24 GMT\n{\"jwt\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNDg0OTgwMjI0fQ.eWfUPqkAndiEOEao--N_A4UN4CvT3uLul9HtiqocQ7I\"}\nUse the JWT to query the /api/endpoints endpoint and list existing endpoints\nhttp :9000/api/endpoints \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNDg0OTgwMjI0fQ.eWfUPqkAndiEOEao--N_A4UN4CvT3uLul9HtiqocQ7I\"\nHTTP/1.1 200 OK\nContent-Length: 74\nContent-Type: text/plain; charset=utf-8\nDate: Fri, 20 Jan 2017 22:32:17 GMT\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\n[{\"Id\":1,\"Name\":\"local\",\"URL\":\"unix:///var/run/docker.sock\",\"TLS\":false}]\nAdd a new endpoint\nhttp POST :9000/api/endpoints \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNDg0OTgwMjI0fQ.eWfUPqkAndiEOEao--N_A4UN4CvT3uLul9HtiqocQ7I\" Name=\"myendpoint\" URL=\"tcp://1.2.3.4:2375\"\nHTTP/1.1 200 OK\nContent-Length: 9\nContent-Type: text/plain; charset=utf-8\nDate: Fri, 20 Jan 2017 22:37:17 GMT\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\n{\"Id\":2}\n```\nFeel free to re-open if you have any more questions.. The Docker API for Swarm services does not expose any stats endpoint. Supporting this is not in our target at the moment, we might re-open it later.. @hilschernetpi this should be quite simple to implement, I'd accept a PR.. @hilschernetpi join us on Slack (http://portainer.io/slack/) or Gitter (https://gitter.im/portainer/Lobby) and ping me, I'll help you debug that situation.. Yup, will update the docs.. @hilschernetpi thanks for your work on that. Docker CLI's default behavior is to use :rvm for each device so for now let's keep it simple and default to :rvm for each device. We can enhance that later if required.. Create a new branch, name it something like feat515-device-option and create a PR against the develop branch.. Closed by #729 . @WTFKr0 we don't need the inspect container part here, only the service creation payload.. This is strange, if Portainer bypasses the password/endpoint setup that means that data already exists in the /data folder.\nI've just tried your example by copying/pasting the docker-compose.yml you provided and was able to start it without any issues. Are you sure that the data folder on the host is empty?. @kissgyorgy could you give me the output of docker logs <PORTAINER_CONTAINER>  ? This issue would happen when an error is raised on the backend while trying to check if the admin user exists.. ping @kissgyorgy @eko3alpha \nAre you still having this issue?. Glad it's working but we do not have any lead on the issue.. Awesome, keep us posted.. This issue seems to be related to the Docker setup and not Portainer.\nAny update @icebal @eko3alpha @kissgyorgy ?. I'm closing this issue for inactivity. Feel free to re-open if needed.. Hi @ariq01, are you using any reverse proxy ?. Could you check the logs of the portainer container and paste it here?\nLe lun. 25 d\u00e9c. 2017 \u00e0 13:00, Ariq Naufal notifications@github.com a\n\u00e9crit :\n\nnope, my server (ubuntu 14.04, kernel 4.9.58) still fresh installed as\nwell as the docker.\n\u2014\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/517#issuecomment-353864689,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBQV1RWsJoMVlA34HMybMVjTVVoiXks5tD450gaJpZM4LpYkk\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. @ariq01 could you try to access Portainer inside a private navigation tab in your browser? Might be related to browser cache.. @DomenicoI how many manager nodes do you have in your cluster?. @DomenicoI when you're in the auth view, just hit refresh to reset the admin password.. The view where you need to input your credentials, the authentication form. It's probably a browser cache issue. \n\nEither refresh it, clean your browser cache or open Portainer in a new private navigation tab. . @DomenicoI could you paste the conent of the Portainer container logs?. Looks like you're using existing Portainer data. I'd recommend to wipe out\nany existing Portainer data volume and then redeploy it.\nLe mar. 8 mai 2018 \u00e0 20:09, DomenicoI notifications@github.com a \u00e9crit :\n\n` docker container logs 652a5fcf4bac\n2018/05/08 18:04:54 Starting Portainer 1.16.5 on :9000\n2018/05/08 18:05:25 http error: Invalid credentials (code=422)\n2018/05/08 18:05:27 http error: Invalid credentials (code=422)\n2018/05/08 18:05:27 http error: Invalid credentials (code=422)\n2018/05/08 18:05:27 http error: Invalid credentials (code=422)\n2018/05/08 18:05:28 http error: Invalid credentials (code=422)\ndocker service logs mkc8hedq7rl5\nportainer.1.6vtsfafy0o7i@centos-manager | 2018/05/08 18:04:54 Starting\nPortainer 1.16.5 on :9000\nportainer.1.6vtsfafy0o7i@centos-manager | 2018/05/08 18:05:25 http error:\nInvalid credentials (code=422)\nportainer.1.6vtsfafy0o7i@centos-manager | 2018/05/08 18:05:27 http error:\nInvalid credentials (code=422)\nportainer.1.6vtsfafy0o7i@centos-manager | 2018/05/08 18:05:27 http error:\nInvalid credentials (code=422)\nportainer.1.6vtsfafy0o7i@centos-manager | 2018/05/08 18:05:27 http error:\nInvalid credentials (code=422)\nportainer.1.6vtsfafy0o7i@centos-manager | 2018/05/08 18:05:28 http error:\nInvalid credentials (code=422)\n`\n\u2014\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/517#issuecomment-387492252,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBR6CT5nyD91GmOlduLxlz2-dGPcbks5twd9sgaJpZM4LpYkk\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. Nope that should be the only one. Once removed, deploy the service again\nand access it in private navigation mode to set up the admin password.\n\nLe mar. 8 mai 2018 \u00e0 20:14, DomenicoI notifications@github.com a \u00e9crit :\n\nI already tried to remove the persistent data volume\n/home/domiac/portainer/data1. Are there any other volumes ?\n\u2014\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/517#issuecomment-387493676,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBTlJIi0qFrbBTGJEweuFXgrkQmBjks5tweCEgaJpZM4LpYkk\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. @gpickin how did you deploy Portainer?. Awesome @Glowbal ! I'll have a look at it soon.. I've just tested it against my local Docker 1.13 engine and it's working perfectly.\n\nshell\n$ docker -v\nDocker version 1.13.0, build 49bf474\n$ docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n\nCould you give me the output of the docker logs for the portainer container?. This is probably related to an expired session, Portainer will try to query the API on refresh and will get an unauthorized response. We might need to update the error message to display something related to an unauthorized session instead of 'Unable to load the dashboard data'.. @meeximum please give us more information. How did you run portainer? Docker version? Etc... see the bug contribution guidelines.. Ping @Tim15 \nStill having troubles with Docker 1.13 ?. I'll close this issue as we do have support Docker > 1.13.. @Glowbal join me on Slack when you're available. @Glowbal could you rebase this one on develop so I can start reviewing the changes? Obviously, changes will be required (amongst others, apiVersion is now part of the state available via StateManager thus the ApiVersion service is not required).\n. @Glowbal could you fix the conflict ?. First issue, when trying to access the secrets view on a Docker standalone:\n\n\nDocker secrets can only be managed in Swarm mode, add an extra check to ensure the secrets section is displayed in the sidebar only when the endpoint provider is Swarm mode.\n. @Glowbal I've fixed the conflicts.. Hey @Glowbal \nWould it be possible to add the ability to map a secret when creating a service in this PR?\nA few things:\n\nIn the service-details view, missing Secrets section in the quick navigation bar\n\n\n\nIn the service-details view, the action header and delete action are not aligned\n\n\n. @Glowbal could you fix the conflicts?. I've solved the conflicts related to the merging of the latest PRs.. First thing to do here is to rebase this PR. I'll try to handle this soon.. Replaced by #894 . This is due to the fact that the endpointMode is not defined yet.. Bolt uses an exclusive write lock on the database file so it cannot be shared by multiple processes. So only one Portainer container can access the database.\nIn order to implement HA on the database side, we would need to implement a different database storage. This is not in our priorities at the moment but I'd accept PRs in that area.. Not sure, I might need to experiment with the read only mode as I can't seem to figure out if this would work from their docs/issues.. Hey @Dreamwalker666 keen to open a PR to add a note in the docs? https://github.com/portainer/portainer-docs. @OlivierCuyp it's actually quite easy to backup and restore Portainer database, you only need to save the /data folder inside the Portainer container.\nIf you want to restore it, start a new Portainer instance and bind mount the saved folder.. We currently recommend Portainer as a single service replica inside a Swarm cluster. Regarding the persistence of Portainer data inside your cluster, you could use a share filesystem (such as NFS), I'm not aware of what AWS can offer on this side. \nAlso, if you run Portainer via the agent setup (http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster), it actually do not matter where the Portainer service is running (can be any node).. > Quick note, I believe you'll run into problem when trying to deploy services if you are talking to an agent running on a worker node. So it might be a good idea to add the contraint node.role == manager here and here.\nThe agents are aware of the role of each node they're running on. When using the standard deployment method of Portainer into a Swarm cluster (e.g. without the agent) you need to deploy it on a manager node because this is the only way to interact with the Swarm resources API (services, secrets, configs, etc...).\nWith the agent setup, each request is automatically redirected to an agent running on a manager if needed, so that's why you don't need to run it on a manager node anymore.\n\nI still don't really see where this improves the data persistency or even the ability to run Portainer on any node (without any NFS kind of setup)...\n\nIndeed it's will not remove the requirement of data persistency across all your nodes, just remove a limitation.\n. Thanks for mentioning this @gjonespf, I'll have a look.. @OlivierCuyp Next release is 1.20.1 which is a minor release (mainly containing bugfixes). This is scheduled in 1.21.. Hey ! I'd love to see a more colored version of the container console. We'll need to rebuild the logs view soon (#317) so we might enhance this part later.\nThe code related to the container console is placed in app/components/containerConsole and for the logs its app/components/containerLogs. If you need any help, you can ask me for more details via Slack/Gitter.\n. Just so you know, the xterm.css is already included and compiled in the app: https://github.com/portainer/portainer/blob/develop/gruntfile.js#L147\nIf you need any help to work on this, ping me on Slack/Gitter.. Closing, part of #317 . Could you follow the bug report description guidelines please? I need more details.\n\nBUG REPORT INFORMATION\nDescription\nBriefly describe the problem you are having in a few paragraphs.\nSteps to reproduce the issue:\n1.\n2.\n3.\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version:\nPortainer Docker image tag (latest/arm/windows...):\nTarget Docker version (the host/cluster you manage):\nTarget Swarm version (if applicable):\nPlatform (windows/linux):\nBrowser:\n. @Fish2 unfortunately, I'm unable to reproduce this. It might be related to your browser version.\n\nI've tried on the following browsers:\n\nChrome Version 53.0.2785.89 (64-bit)\nFirefox 50.1.0\nOpera 42.0.2393.137\n\nCould you try on another browser?. Oh sorry that's a misunderstanding from me ! I thought that all the categories would not get the active class. But instead it's just the Docker. And yes, I've just been able to reproduce this.\nThanks again for your time and the screenshots !. Definitely not at the moment, Angular 1 is providing everything we need.. Hey @olsonjj \nWe'll probably upgrade the frontend to a more \"recent\" front-end library/framework at some point. We might consider something else than Angular as well.. Sorry I'm not sure I understand, would you like to see the container ID displayed in the container list view?. Could you specify the reason here? I don't see any interest in adding the container ID here and I feel it would make the view too much bloated (container ID are pretty long strings).. @ncresswell what's your thoughts on this one?. This is also my point of view on this one. I'll close the issue.. All right, I'll do the tech review soon.. Hi @morph027 \nI do not have time to review this at the moment, will try to have a look later.. This is OK, I'll review the new one ASAP. I prefer to have the ansi2html as a bower dependency than shipped directly in the codebase.\nWill close this one in favor of #1169 . @Fish2 unfortunately this is not possible at the moment. The Docker API does not expose any Swarm stats so we're not able to aggregate/display them.. @floran974 you're running Docker on Windows which is basically Docker running on Linux inside a VM. I know it's confusing and you're not the first one having this problem, all you need to do is to use the portainer/portainer image instead of portainer/portainer:windows.\nE.g. docker run -d -p 9000:9000 portainer/portainer -H tcp://DOCKER_HOST_IP:DOCKER_HOST_PORT\nPortainer image will have multi-arch support in 1.11.2, so this won't be a problem anymore.. @floran974 I know, please try the solution I gave you above and tell me if this is working.. Hey @MonXBZH, I see you're using a reverse proxy. Portainer needs extra configuration in the reverse proxy for the container console to work.\nHave a look at the example provided in the docs: https://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer\nThe important part is the following:\nnginx\n  location /portainer/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer/api/websocket/;\n  }. @MonXBZH\nYou don't need to access the last address, and the location /portainer/api/websocket needs to be in there if you want to be able to use container console inside Portainer.\nTry this configuration:\n```\nupstream portainer {\n    server 192.168.2.202:9000;\n}\nserver {\n  listen 443;\n  ssl on;\nlocation /portainer/ {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass http://portainer/;\n  }\n  location /portainer/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer/api/websocket/;\n  }\n}\n```. Obviously you need to access Portainer at something like https://myipaddress/portainer\nIs this how you try to access it?. I don't see how you can possibly access Portainer via the reverse proxy by hitting https://myipaddress:9000\nLooks like you hitting Portainer directly when accessing this URL. Your reverse proxy is listening on :443.\nWhat if you try https://myipaddress/portainer using the configuration I gave you?. @MonXBZH \nRemove the Portainer container, remove any data folder if you had some and re-create the container. You might need to restart your reverse-proxy afterwards.\n422 states that your credentials are invalid (wrong password).. What command are you using to start the Portainer container?. Please give me the full docker run command you've used to start the container.. You still need to access Portainer via your reverse proxy at https://portainer.monxbzh.ovh/portainer or your IP address or whatever you're using for that host (localhost might work as well).\nIf you try to access it without HTTPS you'll land on the default Nginx welcome page (hosted on port 80).. What was your original reverse proxy configuration that you were using when you opened the issue? It was working then except for the container console. We might have a look at this.. @MonXBZH join me on Gitter (https://gitter.im/portainer/Lobby) or Slack (http://portainer.io/slack/) and we'll discuss this here. It will be easier to help you.. We manage to solve the issue using the following Nginx reverse proxy configuration:\n```nginx\nserver {\n  # Portainer\n  listen 443;\n  ssl on;\nserver_name myhost.mydomain.com;\n  location / {\n    proxy_http_version 1.1;\n    proxy_set_header Connection \"\";\n    proxy_pass http://127.0.0.1:9000;\n  }\nlocation /api/websocket/ {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_http_version 1.1;\n    proxy_pass http://127.0.0.1:9000/api/websocket/;\n  }\n}\n```. Hi @mcklane \nWe had another user who seems to have it working with Apache, see his explanations here: https://github.com/portainer/portainer/issues/488#issuecomment-271524636. Hey @MonXBZH, could you give us more details about the following issues:\n\nCommit already runned containers to change some settings\n\nPortainer already allows you to commit any container to an image. Would you like something more?\n\nHaving a terminal directly on localhost machine on the Web UI (as Cockpit tool does for now)\n\nCould you give me more info about that? What kind of terminal are you talking about?\n\nManaging containers's networks and IP addresses\n\nPortainer already allows you to manage Docker networks. Is there something you think that is missing?\nThanks ;) . @MonXBZH \nThanks for the updated answer.\n\n\nCommit already runned containers to change some settings\nWe already have an issue opened for this feature: #466 \n\n\nHaving a terminal directly on localhost machine on the Web UI (as Cockpit tool does for now)\n\n\nThanks for the details and the screenshot ! Unfortunately, Portainer aims to manage Docker hosts/clusters and this is not in our plans to give access to the actual Docker host system.\n\nManaging containers's networks and IP addresses\n\n:)\nI'll close this issue at it is a mix of new features / enhancements, and I'll open new issues to track each of them separately.. So basically I've only opened #545 as the other features won't be implemented in Portainer or issues are already created to track them.. @StefanScherer what about running Portainer without any bind mount, e.g. docker run -d -p 9000:9000 portainer/portainer (for demo purposes for example). Would this cause any trouble?. I'm having the same issues when changing the Dockerfile VOLUME instruction (at https://github.com/portainer/portainer/blob/develop/build/windows/nanoserver/Dockerfile#L5) to C:\\\\data and changing the defaults CLI flags values to (at https://github.com/portainer/portainer/blob/develop/api/cli/defaults_windows.go) C:\\\\data and C:\\\\certs. . Another interesting thing is that the portainer/portainer:windows-1.11.1 is also not working (I'm not sure if it is related to my Docker instance).\n```\ndocker run -d -p 9000:9000 --name portx portainer/portainer:windows-1.11.1\nUnable to find image 'portainer/portainer:windows-1.11.1' locally\nwindows-1.11.1: Pulling from portainer/portainer\n5496abde368a: Already exists \n94b4ce7ac4c7: Already exists \n0fe0362ebeb6: Pull complete \nda3aa93fe84f: Pull complete \n9127e7e8b381: Pull complete \n0c249bc1362a: Pull complete \nf5d703693ba1: Pull complete \nDigest: sha256:468edf05eee85b0cfe909f5d98bca1a1e77b102bcd51acfbc871466b26ffc83b\nStatus: Downloaded newer image for portainer/portainer:windows-1.11.1\ndddbc45d6be17b43b0b4828a23a49915e9d020e3b929c80acee719dc80a44a4c\ndocker: Error response from daemon: container dddbc45d6be17b43b0b4828a23a49915e9d020e3b929c80acee719dc80a44a4c encountered an error during CreateContainer: failure in a Windows system call: The system cannot find the path specified. (0x3) extra info: {\"SystemType\":\"Container\",\"Name\":\"dddbc45d6be17b43b0b4828a23a49915e9d020e3b929c80acee719dc80a44a4c\",\"Owner\":\"docker\",\"IsDummy\":false,\"VolumePath\":\"\\\\?\\Volume{4279ca55-9b24-11e6-ae32-005056986745}\",\"IgnoreFlushesDuringBoot\":true,\"LayerFolderPath\":\"C:\\ProgramData\\docker\\windowsfilter\\dddbc45d6be17b43b0b4828a23a49915e9d020e3b929c80acee719dc80a44a4c\",\"Layers\":[{\"ID\":\"d171e793-388d-557b-bd6c-18c8079a2afb\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\73739b1bb1da6f6f9f3571d262cb6d2085cb666a0fe878cf0acef49553e9a04c\"},{\"ID\":\"ae45e145-36cf-5aa4-9455-43d743fac06d\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\4f9b6ab26f32c5f5690aab3009bec418309b8bf799b5f29cd41b943a97d3f00d\"},{\"ID\":\"b4a8ab5c-f12a-58aa-84c2-77cdee75b33b\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\fa2d75a15feb351fc7cf9777cdc13f58b62b6c18f04698155221489495583afb\"},{\"ID\":\"c24f5473-cfc4-56c3-ac99-2949dc4bcb91\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\fac5496af0a3365fb707aa77f9eb0b6a8f83e83e75af046465cd6be10e3de43f\"},{\"ID\":\"c6679005-7500-5386-8dbe-fef8580dc52a\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\047feb514dfbfc65b74608f36bc7264d9c31f7dadbad5a7a7ecd5da10e1cd3f2\"},{\"ID\":\"4326d664-907f-59fb-aae8-6069f9d2557a\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\9a52fc2dd856949a1ca261a371b6675c5869baf9a073aaac20969b8eb99e9f6d\"},{\"ID\":\"09fd5b78-2167-5e3d-9f1a-4b624ebafabb\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\8f877753ea2839fd2499289ec0e7bb8269313601b4f9364e220ef96a6afc15f3\"}],\"HostName\":\"dddbc45d6be1\",\"MappedDirectories\":[{\"HostPath\":\"C:\\ProgramData\\docker\\volumes\\332e8a184d3aed705898ca47a4ffb343cbfdd6775d1462684b0abb6f2672917e\\_data\",\"ContainerPath\":\"c:\\data\",\"ReadOnly\":false,\"BandwidthMaximum\":0,\"IOPSMaximum\":0}],\"HvPartition\":false,\"EndpointList\":[\"79bb4f28-0f7a-4bbf-b1a0-04010372cb7b\"],\"Servicing\":false,\"AllowUnqualifiedDNSQuery\":true}: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type.\n```. All right so it seems that it's related to my Windows environment. Currently rebuilding it.\nI'll rollback the folders to C:\\\\data and C:\\\\certs which seems to cause less problems on Windows.. To confirm, this issue is only raised when trying to bind mount volumes right? (I do have troubles trying to reproduce it at the moment). @StefanScherer do you have any instructions that I could follow to setup a fresh Docker 1.13 on Windows Server 2016 ? . @StefanScherer thanks for that ! I'll try as soon as I get a more stable Internet access (taking ages to download the Vagrant box from Atlas).\nIn the meantime, could you confirm that this issue is only raised when bind mouting volumes to the data/certs folder of Portainer? . It's probably related to the certs directory only. One of our users reported the following on Slack:\n```\npaulkling [6:49 PM] \nallright this worked\n[6:49]\ndocker run -d -p 9000:9000 -v C:\\data:C:\\ProgramData\\portainer -v C:\\certs:C:\\certs --name portainer portainer/portainer -H tcp://$($ip):2375\n[6:50]\non the host if i look in c:\\data folder i see the db and lock file and a tls folder\n``. @StefanScherer could you give a try toportainer/portainer:fix543? It reverts the data/certs directories inside the container toC:\\dataandC:\\certs`. . Perfect, thanks for the confirmation. Also just tried your Win2016 VM, works perfectly :). 1.11.3/latest is now available on Dockerhub with the fix for this issue.. @MonXBZH strange, are you able to reproduce this 100% of the time? I was not able to reproduce this at all.. ping @MonXBZH \nWas not able to reproduce this one, are you able to reproduce this 100% of the time?. @aenertia would you mind opening a different issue for your suggestion?. I'll summarize this one: you'd like to have access to an 'Environments' view where you'd be able to create an environment object and associated multiple key/values to it.\nYou would also like to be able to create a container/service and associate an environment object to it during creation,  which would automatically fill the environment variables.\nIs that correct?. Oh right, I'll keep aside the environment enhancement as this could actually be quite handy. We'll take your enhancement request in consideration though.\n. This could be added pretty much anywhere where you can fill an key/value. (container labels, service labels, volume options, network options...). @stevenklar no I don't think it should be replaced, IMO an \"advanced key/value options\" button should be available close to the current input and when clicked, enables a field to paste key/values.. @bitsofinfo I believe that if you deploy the stack from within Portainer using a git repository, the env file should be loaded. . @ldano you can use the following link to join our Slack: http://portainer.io/slack/. I agree with @markelog, please join our Slack channel and continue your discussion here.. I can add that. I'd also accept a PR to make the logo responsive ;). Added in https://github.com/portainer/portainer-docs/pull/15. @pascalandy what version are you using? This should have been fixed in 1.11.2 via https://github.com/portainer/portainer/pull/541\nI've also tested it, when a nodes Status is \"down\" the label turns to red.\n\n. Closed by #604 . I'll try to reproduce this.. @Filirom1 thanks for the lead, I've managed to host splitargs on bower, see https://github.com/deviantony/splitargs. @xInsertx would you like the equivalent of docker run -P ? \n@lavvy I'm not sure I understand what you want.. Now that's a proper bug report ! Feel free to re-open and to actually fill the bug report.. Hi @resilva87, yes the PR is in bad state. Could you re-open a new one?. IMO, message needs to be udpated as a user could select multiple images and trigger the force remove.\nI'll give a try to the HTML5 box to see if it fits well with Portainer design.\n. Perfect ! Thanks a lot @Filirom1 :+1: . Looks like something went wrong ;)\nYou should just pull/merge develop instead of doing a rebase.. That's better ! I'll have a look at it today.. Even if I despise popups, I do not see any alternative here. I'm OK for the bootbox library.\nIMO, the message should be updated to \"Forcing the removal of the image will remove the image even if it has multiple tags or if it is used by stopped containers\".\n. Please run npm install again to ensure that you have the latest version of the linter installed. I do not have these issues.. Thanks @Filirom1 :+1: \nAlso, please update your local dev dependencies as there is still a small linting issue:\n```\nRunning \"jshint:files\" (jshint) task\napp/services/modalService.js\n     26 |  }\n            ^ Missing semicolon.\n\n\n1 error in 94 files\n```\n\n\nI'll merge it and fix the linting issue.. @ncresswell do you think we still need to implement this feature?. I don't really like this as even I was confused when using it. I wanted to select /bin/sh and it was not available until I started to type /bin inside the input.\nIMO we should give the user two alternatives:\n\nUse a pre-defined command with the old behavior\nWhen selecting 'use a custom command', the field should be replaced by an input field.\n\nThis would be much clearer !. Yes, but I think this extra setting should be available outside of the list. Like a button next to it, or the ability to choose between 'predefined' and 'custom' using checkbox button (https://angular-ui.github.io/bootstrap/#!#buttons) with default to 'predefined'.\n. @Filirom1 no, I honestly think that it is actually better to separate the predefined commands from the custom command.. Any update on that PR @Filirom1 ?. ping @Filirom1 . I was thinking of something similar to this:\n\n\n. @vorph1 are you talking about the template definition (JSON) or about the template creation form in the UI?. Ok, I'll close this issue then. All issues regarding templates not related to the UI are tracked in https://github.com/portainer/templates/issues\nI'll copy the issue there.. Indeed, I think that any entity table should actually be defined as an Angular directive that would manage the selection checkboxes, the pagination, the sorting... this would remove a lot of duplicated code and make the code simplier to read overall. Feel free to tackle this problematic ;). This is already looking better, nice one ! One question though, why did you choose angular smart table as a table implementation?\nI'm thinking that this generic approach should not prevent the implementation of https://github.com/portainer/portainer/issues/568 later on. . @Filirom1 no troubles ! I'll review that soon.. @Filirom1 \nJust tested again, the following issue is raised when accessing the containers view:\njavascript\nTypeError: Cannot read property 'forEach' of undefined\n    at app.c09a12a6.js:10485\n    at m.$digest (app.c09a12a6.js:143)\n    at m.$apply (app.c09a12a6.js:146)\n    at app.c09a12a6.js:20\n    at Object.invoke (app.c09a12a6.js:41)\n    at c (app.c09a12a6.js:20)\n    at Bc (app.c09a12a6.js:21)\n    at fe (app.c09a12a6.js:20)\n    at app.c09a12a6.js:317\n    at HTMLDocument.b (app.c09a12a6.js:189)\nCould you fix that?. Any update on that PR @Filirom1 ?. ping @Filirom1 . Sorry, meant to review this PR today but forgot an focused on something else ! So, yes this is exactly what I had in mind. Though I would see it as a service rather than a helper, like EntityListService. . Also, after trying it it now raises another UX issue. If a user wants to stops 2 containers and start 2 other containers for example, he will have to clear the selection first... We'll implement this and see if we need to update the UX later on. . You're right, indeed.. Thanks @Filirom1 this is really good :+1: . I do not want to add too much information on the container list view otherwise I think it will look cluttered. Tho I'm now thinking about giving the user the ability to decide which column to display on the tables.\nSomething similar to https://datatables.net/extensions/buttons/examples/column_visibility/columns.html\n@ncresswell what do you think?. Yes we'll use the current columns as default columns and add extra columns here. IMO this should be available for each table.\n@danielfaust I'll update the issue title to actually match the new enhancement.\nWe'll consider adding the following extra columns to the containers table: container ID, creation date, uptime and health check status.. This feature was added to the containers datatable via #1977 . I believe it's the right place to comment, will be taken into account.. This was implemented via https://github.com/portainer/portainer/pull/1460 and is part of Portainer >= 1.15.4. ping @psykzz\nHave a look at the provided example and tell us what you think.. @Filirom1 got a point. I do think that having multiple modes is bad for the UX.\nOn the other side, I feel that somehow this enhancement goes against the will behind Portainer which is really simple user experience.\nMaybe we can mix both of the world by having the browser remembering which mode is selected so that when the user goes back to the container-creation view the last mode he used will be displayed.\n@ncresswell what do you think?. Any update on that PR @Filirom1 ?. ping @Filirom1 . @fthamura @lavvy could you give me more details here ? I'm not sure I understand what you would like to have inside Portainer. Can't you use the hostname field in the container creation view to achieve that?. @fthamura yes... and as far as I know you're able to do that via portainer. This implies you're actually knowing the  IP address of the server when mapping the ports using <IP>:<HOST_PORT>:<CONTAINER_PORT>. Or you can also configure your Docker engines to expose the published ports on a specific address IP instead of the 0.0.0.0, see http://portainer.readthedocs.io/en/stable/faq.html#exposed-ports-in-the-container-view-redirects-me-to-0-0-0-0-what-can-i-do. @armpogart the domain and hostname fields sets the respective hostname and domain to use in the container.. @fthamura @lavvy still not sure what is the feature request here. Anybody care to gives a detailed explanation?. I do agree more with @ncresswell 's solution of adding a template for Traefik. Portainer should stay agnostic regarding this, at least at the moment.. Thanks for the detailed description @1138-4EB ! I leave this open for discussion at the moment.\ncc @ncresswell . > However, I am not a web developer and I am not used to the programming model of JavaScript/Angular. Then, I would be grateful if you could decide visualization details. I mean, should I add a new item to the sidebar or is it better to place it inside 'Networks', as a new subsect under 'Networks' (sic)? Is there any 'design constraint' such as the maximum number of columns which should be displayed or the width of these? In the same path, I'd be rather lost if I had to implement buttons to selectively hide/show info, or 'forms' to allow the user to define templates through the frontend. I'll start with an 'ugly' solution, just to test that the concept works as expected. It'd be great if you could provide most basic style guidelines meanwhile. I'll stick to those, so that it is easier for you (developers), or any other contributor, to polish the GUI.\nYou can still join us on Slack http://portainer.io/slack/, I can answer your questions there.\nAbout the 'visualization details', first thing would be to open a PR so we can try it and get a feeling about the added feature, and we'll iterate from that.. I'm totally OK with that, a filter should be implemented to hide the @sha256:... part of the image.\nAlso +1 for the replica status.\nCC @ncresswell . @tuudik can you inspect the requests on /api/docker (especially /api/docker/info and /api/docker/version) via the developer tools in Chrome ?\nCopy/paste the response/headers here if you can.\nAlso, please send the me the output of docker logs <PORTAINER_CONTAINER>.\n@bigbill91 @hemanthbs12 I assume that you have the same issue, could you do the same?. Closing this issue for cause of inactivity.\nYou can have a look at our provided Nginx configuration example here: http://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer. @xInsertx is the volume visible in the output of docker volume ls ?. @xInsertx you're only creating a bind mount, which is a data folder on your host. Local volumes are pretty much the same but as they are created via the docker CLI (the Docker API) they can be managed via the volume management endpoint.\nPortainer only plugs onto the Docker API and does not store any information related to the volumes so for now we won't implement this.. We already have an issue open to be able to tag volumes as 'dangling/orphaned/unused' here: https://github.com/portainer/portainer/issues/231\nThis would allow you to do some \"house keeping\". \n. We already have an issue open for this feature: https://github.com/portainer/portainer/issues/466\nYou might want to add a comment for that optional feature tho.. Woops, thanks ;). Closing, part of #317 . @Nottt what are you talking about? Container logs?. No ETA on this yet.. This is not possible yet, you might want to follow the discussion in https://github.com/portainer/portainer/issues/943. Following the implementation of #1666 \nThe new logs viewer has an totally different UX, I believe that the requirement to have a clear button is not needed anymore. If any of you think that is still required, please re-open the issue.. I'll close this one as a duplicate of #295\n. Cannot help you there as we don't have any SSL reverse proxy setup. If you manage to figure out a solution, please keep us posted here !. Glad you solved it :). Ok so basically you'd like an attach action in the container view which would open a console similiar to the container-console but with an attached session instead of an exec session. Is that correct ?. Ok, we'll track this one.. @exwizzard no ETA yet. Ok, we'll try to reproduce but I don't have any NFS setup available at the moment. Will leave this issue open for now.. Filed as a bug for now, did not try to reproduce it yet.. ping @viveky4d4v @ToeiRei \nDo the solutions proposed by other users helped you here?. @ncresswell what's your position on this evo?. > OK, well how about to start with, we just add a few (dropdown select box). This way we extend portainer to support these extra runtimes, but we dont have to parse to find the API... rather, we support 4-5 now.\n. Yes it is, I just relocated the suggestion inside this issue (the other one is closed and marked as duplicate).. No real decision here, my point of view is that all docker run options should be available inside the container creation view. It's just a matter of UX/UI design. You might want to open a feature request for these options.. @Helmi This option is not available yet in the container-creation view, I don't think we have it as a feature request either. You could open a new feature request for this.. Yes, Portainer basically interacts with the Docker API. Some CLI options (such as docker --rm) are only available in the Docker client.\nBesides filtering the features/flags that could be executed, we'd also need to map/translate all the existing docker run options (a lot)  into Docker API requests.\nMy preferred way to go on this one is to simply add an equivalent of all the options in the container creation form. In the end, it's just a matter of UX/UI.. @shwneo --runtime should be supported in 1.19.2, see https://github.com/portainer/portainer/issues/2162. It represents the % of total CPU used (system/user is mixed). In your case you've got spikes at 5% CPU usage.\nI reckon this should be clearer, I'll link to #297 so we'll keep it in mind when working on it. . Thanks @resilva87 :+1: . Unable to reproduce this bug.. Thanks @visualfanatic :+1: . I believe this should be part of https://github.com/portainer/portainer/issues/943\ncc @ncresswell . Hmm, that is strange, I'll try to reproduce. What if you try exactly our provided reverse proxy configuration: http://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer\nIt is pretty similar but we know that this one is working.. Ah that's interesting ! I'll investigate.. @galindro \nCould you try (note the removal of the extra /):\nlocation /portainer/api/websocket {\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection \"upgrade\";\n                proxy_http_version 1.1;\n                proxy_pass http://localhost:9000/api/websocket;\n        }\nInstead of:\nlocation /portainer/api/websocket/ {\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection \"upgrade\";\n                proxy_http_version 1.1;\n                proxy_pass http://localhost:9000/api/websocket/;\n        }. You mean that you need to use the following config ?\nserver {\n        server_name i.sb;\n        location /ui {\n                proxy_http_version 1.1;\n                proxy_set_header Connection \"\";\n                proxy_pass http://localhost:9000/;\n        }\n        location /ui/api/websocket {\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection \"upgrade\";\n                proxy_http_version 1.1;\n                proxy_pass http://localhost:9000/api/websocket;\n        }\n}. Honestly, no idea and I don't really have time to debug reverse proxy configs at the moment. My suggestion is that if you found a working configuration, just use it :)\nOtherwise you can join us on Slack, we have a dedicated channel where we can discuss reverse-proxies issues: http://portainer.io/slack/. Looks like this issue was solved, feel free to re-open if I'm wrong.. Hi @psykzz \nI believe we already have an issue open for this feature: https://github.com/portainer/portainer/issues/367\nFeel free to re-open or to comment the other issue if you're missing something.. docker stats output metrics about containers usage thought that might be a good point to start. I agree that some host metrics would be really interesting in portainer, we'll think about how it !. Related issues that should be considered:\n\nMemory used by services: #726  \nDisk space usage: #626\nCtop dedicated view: #788 . I believe this should be part of #943\n\ncc @ncresswell \n. Sorry to have a look at this only now. I'm going to close this issue as it refers to different areas in Portainer, could you open a different issue for each request?. @nathantreid Token was originally stored in the sessionStorage because we prefered to have our users re-login when opening a new tab.\nNow, with the more recent feedback about the usage of Portainer, it seems that a lot of people actually want to use multi-tabs (which I think is because of a UX problem with Portainer but that's another discussion), so we can switch the storage from sessionStorage to localStorage.\nNote that I'll open another issue for that, as it's not related to the remember-me feature request asked in this issue.\nEdit: done, tracked in #910 . @richardgoater thanks for the PR ! I'll review it soon (end of the week / beginning of next week). \nI'm glad you managed to dive into the code without issues, please join me on Slack http://portainer.io/slack/ when you want to discuss implementations details. Have a look at the examples below for the recent directions using promises.\nHere is an example of parallel promise execution using $q.all:\n\nhttps://github.com/portainer/portainer/blob/develop/app/components/templates/templatesController.js#L117\n\nAn example of promise chaining using then().catch().finally():\n\nhttps://github.com/portainer/portainer/blob/develop/app/components/templates/templatesController.js#L40\n\nPlease base your implementation on these examples (promise chaining would be the way to go here).. @richardgoater thanks for the updated version. I'll test it later.\nOne note on the membership filters for the nodes, could you give me more details about your inconsistence issue?. Ok, I'll test it later and we'll decide if we choose to remove the filter.. @richardgoater see #649 for the problem while trying to access the node view. It's not related to your PR.\nI'll fix the new conflict with your PR myself and test it again.. PR looks good to me, I'll merge it ! Thanks @richardgoater :+1: . Indeed and we have an open issue here: https://github.com/portainer/portainer/issues/56\nI'll mark this one as duplicate for tracking.. Do you mean on a container? Endpoint is part of the Portainer vocabulary here so I'm not sure what you're talking about. The process list in the container stats view right? . @sn00pster interesting, did you create a fork of portainer on github? If so could you send me a link to the code so I can have a look?. From what I read in the Docker API docs, PS arguments are related to the container resource: https://docs.docker.com/engine/api/v1.25/#/containers\nBut I see why you'd like to set this as an option on the endpoint, that's because this option is mainly related to the endpoint platform and as such all containers running on the endpoint would require this param.. Hi, we're already tracking this feature in this issue: https://github.com/portainer/portainer/issues/359\nAlso, 1.12 will introduce RBAC and object ownership/visibility. Meaning that some users will be able to manage their containers/services/volumes without giving the ability to other users to view/alter them. More info to come.\nFeel free to comment here.. Easy enough, I'd even accept a PR for that one.\nSee https://github.com/portainer/portainer/blob/develop/gruntfile.js#L81 & https://github.com/portainer/portainer/blob/develop/gruntfile.js#L383 for inspiration.. @WTFKr0 thanks but as this is pretty related to your workstation / environment, this should be configured on your Docker engine and not in the Portainer build system IMO.\nSee the equivalent of https://docs.docker.com/engine/admin/systemd/#http-proxy for your distro.\nBuild system is already complex and messy at the time, I'm not OK to add platform/setup related configurations inside it.. Thanks for that, probably coming from a PR.. Duplicate of https://github.com/portainer/portainer/issues/461\nWe're going to track this evolution in #461, see the latest comments for a possible implementation of the feature. . @yangxiaofei77 not in the latest version, but will be available soon.. @WTFKr0 I agree with that. But this should be easy for the user to understand the new status (with healthcheck), so either adding a tag note somewhere on the view to explain that or a tooltip on the status label.\ncc @ncresswell . Agree, this looks a lot much better. I'll do a tech review soon.. I just tested it, looks good. A few things I'd like to see:\n\nLabels with tooltips should have the interactive css class\nIt could be interesting to have some information about the healthcheck (command, timeout, interval...) if available in the container-details view\n\n@WTFKr0 keen to add that?. Thanks @WTFKr0 :+1: . Could you give us a screenshot?. Yes, as long as we don't support an aggregated view of the items in the swarm (images/containers) this is not possible. I'll close this one for now.\nNote that starting from the 1.13 version, the Docker API exposes the IP address of each node in the swarm. Which means that it'll soon be possible for Portainer to query all the nodes and create an aggregated view.. This was implemented via https://github.com/portainer/portainer/pull/1460 and is part of Portainer >= 1.15.4. @Filirom1 I'm guessing that this problem is solved?. Have you retried recently? This should be a temporary issue, can't seem to find any information to solve this online.. Hi @raulriverouria \nPortainer templates supports custom/private registries as long as these are not behind an authentication system.\nSee: http://portainer.readthedocs.io/en/stable/templates.html#registry\nIs that what you were searching for?. @raulriverouria ah sorry, this will be available in 1.12 (it's already merged in the develop branch) but I merged this part of the documentation and it should have been added in the docs for 1.12.\nI'll close this issue, stay tuned for the 1.12 release soon.. @MagicSong see https://github.com/portainer/portainer/issues/1554 for the related discussion, it's not available yet.. @WTFKr0 I agree that network created using the overlay driver and the --attachable flag should be available in the template execution form.\n. Closing this issue as not reproducible/already available.\nFeel free to re-open/comment if we're missing something.. @WTFKr0 small update to do. Cheers @WTFKr0 :+1: . @WTFKr0 yup ! Mind opening a PR in https://github.com/portainer/portainer-docs to document the field privileged?. Documentation added via https://github.com/portainer/portainer-docs/pull/18. Thanks for the contribution @friism :+1: . We'll keep this issue open still, might be useful at some point or required by other people.. Documentation for this was added via https://github.com/portainer/portainer-docs/commit/3942c8b5c44de052c9b4ba1296e248daf2b81926. @evulhotdog are you still having this issue ? Could you try with the latest version of Portainer?. @evulhotdog are you able to open the developer console in your browser? If so, can you check if any error is displayed in the console?. Are you trying to setup a reverse proxy using HTTPS? Maybe you could look into this issue to check working reverse proxy configurations: https://github.com/portainer/portainer/issues/591. I believe we can close this issue now. Feel free to re-open if needed.. We're already tracking this evolution here: https://github.com/portainer/portainer/issues/466\nPlease search for existing issues before opening one next time ;). We're already tracking this evolution here: #623 . We're already tracking this evolution here: #545 . We're already tracking this evolution here: #56 . We're already tracking this evolution here: #231 . I'll try to reproduce this.. Yeah, had a look at this.\nWhen defining env vars as @OhmegaStar did, the API returns the following for an inspect on the Docker image:\njson\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"PS_VERSION=1.6.1.8     ENV PS_DOMAIN prestashop.local\"\n            ],\nSo this is not an issue with Portainer/Docker, but instead with your declaration. You might want to do it as @mlocher recommended.. This information is only available from a running container, so we can't display it if the container is not running.. They are not remembered, they are exposed by the Docker API. And this information is only available for a running container.\nWhen you start a container using the -P option for example, Docker will automatically assign published ports to a random available port on the host (based on a specific range). If you restart that container, assigned ports on the host may change.. Never tried to run Portainer with that setup, I'll try to reproduce.. Sorry @liyaka, I do not have the time to investigate on this issue at the moment.. If there is no error logs in the container, you'll need to investigate on the client side. Use your browser developer tool to inspect the HTTP queries.. @liyaka any update on this issue?. @liyaka ok I'll close this issue then, we'll re-open if required.. @aviam nice, feel free to re-open the issue if required.. @aviam why are you using the 1.11.0 tag? Isn't it working with the portainer:portainer image?. @davask is that related to this issue? If not, please join us on Slack for some support: https://portainer.io/slack/. I see that you're mounting the socket via -v /var/run/docker-userns.sock:/var/run/docker.sock when running the Portainer container, why do you try to access it via -H tcp://192.168.0.1:2375 ? You can use the local option during the init after accessing portainer. . From what I can see in the comment https://github.com/portainer/portainer/issues/662#issuecomment-288864212\n\nYou should remove the bind mount to the socket. \nYou should make sure that your containers can access the endpoint by IP (also make sure that the Docker API is available via TCP on that address). Well, you can specify any port you want. Standard value is 2375, so just use --host tcp://0.0.0.0:2375.. Please join us on Slack for some live support as it will be easier to communicate.. Hi @jodumont \n\nHave you looked at the comment above https://github.com/portainer/portainer/issues/662#issuecomment-288864212 ?. From what I see, there is no way to remove an exec instance once created via the Docker API: https://docs.docker.com/engine/api/v1.26/#tag/Exec\nHave you tried it with the Docker CLI? Does the exec instances keep running?. Interesting, thanks for your investigation. We'll have a look at this.. @interactivewebs I believe this should works... I updated the templates used by Portainer within the UI via Settings > Use custom templates and put http://tools.linuxserver.io/portainer.json in the URL and it was working correctly. What is your issue?. @Bodge-IT you might want to ask the maintainers of the LinuxServer.io images directly to address this.. Aie ! Indeed.. It's not planned for 1.13 that will be released soon, probably 1.13.x or 1.14.. Closing this, will be replaced by #959 . We will have a look to merge this in 1.13.x !. @richardgoater seems that we're hitting some bugs in 17.05, we should wait for 17.06.\nSee #671 . @adityacs you need to go to the endpoints section with an administrator account and allow this user to access one of your endpoints.\ncc @ncresswell we need to review this. In order to be able to log in, a regular user account must have access to at least one endpoint.. Service logs is still experimental, this won't be merge in Portainer until it's out of experimental state.\nFYI, you can use the endpoint.apiVersion property available via the StateManager to get the version of the current endpoint.. Now that 17.06 is out, service logs seems to be stable. Could you rebase? Is this still in WIP status? Or should I give it a try?. Thanks @WTFKr0 :+1: . The problem here is that this is the info returned by the API. Of course this information is confusing for the user, so we might need to hide this information in that case and just show 'Stopped'.\nCan't find any issue regarding to these timestamps on the official Docker repository.\n. @cjyumul more details? I don't see any image.. @cjyumul thanks for the update. Could you give me  the output of the logs of the container when this issue happens?. Ok, just been able to reproduce. Will push a fix soon.. I'll close this issue and mention it in #568 . @OhmegaStar maybe we should leave it like this (IMO less options available to the user, less confusing) and add a modal to confirm the deletion of the container?\ncc @ncresswell . LDAP/AD support will be available later in the year as a paid plugin or as a part of the enterprise support contract.\nSee the discussion here for more info: https://github.com/portainer/portainer/issues/550#issuecomment-287138803. LDAP support will be part of Portainer. We will start working on it when #750 is implemented.. I'm currently working on the LDAP support feature.. @socrat3000 this will be available within 2 weeks. A test version will also be shared on our Slack channel soon. . @nesimtunc indeed, use the --no-analytics flag or have a look at the example of @WTFKr0 . Hi @HTAD, unfortunately not at the moment. You'd need to setup the reverse proxy yourself.. @030 indeed !. Yeap. Would you be able to create a PR for that?. That should actually be quite easy to implement. See https://gist.github.com/denji/12b3a568f092ab951456 for a Golang example.\nI'd rather have the path to the cert and key specified as Portainer flags instead of environment variables. . Awesome ! Thanks @030 \nI'll review the PR soon.\nPlease create a documentation PR in the following repository: https://github.com/portainer/portainer-docs\nI think that a new paragraph in the 'Deployment' section should be added.. Closed in favor #2405 . @m-a-v yes, when you head into the container/service/volume creation view, access control is enabled and the first selected choice is either private or administrator (if you're an admin).\nPoint here is to give the ability to change that default value in these views. Of course containers created outside of Portainer will always be declared as public as access control is managed from inside Portainer.. Yes I'm afraid that this would be quite hard to implement. In the meantime I'd recommend setting the ACL manually on each resource using an administrator account.. The database only store UAC related information, it does not store any Docker related information (containers, etc...). So that would require parsing all the containers running on boot / when adding an endpoint and automatically add information on each resource. And also a refactor on how the resource control model is currently defined.\nYou can open another issue for that and we can discuss it more in there.. This issue was originally opened to allow the user to set a default choice in the UI when associating an access control policy on a resource. I believe that it is not really required. Closing.. @G07cha if we plan to add stats to the dashboard, I'd rather see an overview, agree with you on that point.\n\nand create a subpage for containers tab with stats?\n\nKeen to share more details? What do you have in mind?. It's worth thinking about it, I'm not keen to add something that do an API call for each container available on the host. . I'll close the discussion here as we think this will probably be part of the Monitoring & Alerting plugin, I'll reference this in #943\n@G07cha if you're still interested to contribute on other feature requests, you can ping me on Slack for directions. This introduce new statuses defined by Portainer. I think this can introduce some confusion for users, especially if they don't have access to the definition of these status (as stated in the PR). \nMaybe we should introduce tooltips to explain what 'partially running' means for our users (should be done for all the statuses.\n@ncresswell what do you think?. I'll test it soon. Should https://github.com/portainer/portainer/issues/803 be fixed first tho?. @WTFKr0 mind fixing the conflict here? I'll give it a try this week.. > I think we should rename \"partially running\" to \"scaling\" as that better reflects what is happening.\nNot sure, there might be some errors on some nodes and thus the service would actually be 'partially' running.. Thanks @WTFKr0 \nHave a look at my review, we can discuss this further on Slack.. Thanks @WTFKr0 :+1: . @Ponsjuh what are the logs of the container when after opening localhost:9000 ? Do you have access to the developer console? If yes, can you give me details on the failed HTTP request?. @Ponsjuh I've just tried with the --no-auth flag and it works fine. Maybe you opened Portainer inside the same tab where you used another version of Portainer before? Portainer keeps some data inside the local storage and that might conflict between versions (--no-auth and without).\nCould you try to start a Portainer container with the --no-auth and access it in a new tab or private session?. @Ponsjuh any update?. Closed due to inactivity.. Maybe give us more details here?. @juansanjuan @StevenPG that issue might be related to your Docker engine. After all, Portainer will only proxy the rm request, if something bad happens on Docker side it will be reflected in Portainer UI.\nI'll close this issue for now as I'm not able to reproduce this.. Closed in favor of https://github.com/portainer/portainer/pull/1280 & #1345 . @panderine not implemented yet! . @surtic86 no ETA yet, I'd accept a PR for this. @surtic86 I think that it should be added in the advanced container settings panel (network tab) instead of under the ports configuration section of the main panel.\nReason is I believe that it will confuse most of the users if we allow them to add ports mapping and expose ports in the same place. \nUX behavior should be similar to port mapping, with one number input and protocol selector.. @11111000000 no ETA yet, contributions are welcome.. Hi @dantheman0207 ! Thanks for the contribution ! :+1: \nHave a look at my review.. Thanks for the contribution @dantheman0207 ! :+1: . Ah ! Thanks @AHumanPerson :+1: . Thanks for the details issue ! We'll try to reproduce and fix.. Thanks for your tests/insights, we'll use this when working on full ACS support.. Closing this issue as it seems that the problem was solved. Feel free to re-open if needed.. @shinoby1992 what Portainer version are you using?. @shinoby1992 we have some issues with endpoints in our latest release. Mind trying with the portainer/portainer:1.16.2 image? I cannot guarantee that it will solve the issue as we do not have official ACS support yet but give it a try. . Yeah rollback is easy just use the image I posted above. About your scaling issue, have a look at the update config options in the Docker documentation. These options are available in Portainer as well. . @Shinoby1992 If you deployed Portainer as a service in your Swarm cluster, I think that you can just update the service to use the image you want:\n$ docker service update portainer --image portainer/portainer:1.16.2\nThen log into Portainer again and as Neil suggested, either force a cache refresh or use private navigation tab.. @Shinoby1992 so you successfully connected the latest version of Portainer to your ACS nodes?\n. @karel1980 \n\nWhen a user without access to any endpoints tries to log in, the error message is still the same.\n\nWhat do you mean? The message 'User not allowed. Please contact your administrator.' is expected in this situation.. Well, we might open an evolution for this later on but at the moment the app has not been designed to be used by users without any endpoint access.\nKeeping it this way gives an ability for administrators to actually prevent some users from connecting to Portainer without removing the accounts.\nIf we'd authorize users without any access endpoint to login, the only view they should be able to access would be the profile edition, not really useful.. I tested that too and was not able to reproduce... I'll leave the issue open and tag as need-help, it's probably related to your Docker setup.. @cecchisandrone this is probably related to the container network somehow... I'll need to reproduce on Azure.. @leenooks indeed, this is a known bug and it has been fixed in https://github.com/portainer/portainer/issues/781. @cecchisandrone any update on this?. Sweet, I'll close the issue then :-). Duplicate of https://github.com/portainer/portainer/issues/516. Could you give me more details? What do you want here? The ability to disable users as an administrator? What's the link with the containers start/stop/kill ?. @mvdpoel could you give me more details here? What do you mean TCP by default? When creating a container from within the Portainer UI, TCP is selected for each port mapping by default.. @mvdpoel Portainer actually defaults to TCP when creating a container. For templates, the protocol must be specified in the template definition.\nI'm going to close this issue as it seems the problem is solved.. @DjTrilogic \nCan you give me more details? Can I see the template definition that you are using?. This issue is happening when using templates, so it might be related to https://github.com/portainer/portainer/blob/develop/app/components/templates/templatesController.js#L51\n. @DjTrilogic I just tried and can't reproduce the issue.\nI've used the following template definitions:\njson\n[\n  {\n    \"title\": \"Registry\",\n    \"description\": \"Docker image registry\",\n    \"logo\": \"https://cloudinovasi.id/assets/img/logos/registry.png\",\n    \"image\": \"mylocalimage:latest\",\n    \"ports\": [\n      \"5000/tcp\"\n    ],\n    \"volumes\": [\n    \"/var/lib/registry\"\n    ]\n  }\n]\nThe image mylocalimage:latest is only available on my host locally. The container was created without issue.\nCould you try to reproduce my setup? We'll need to isolate your problem.. @DjTrilogic \nWell, now I re-used your template:\n[{\n    \"title\": \"Usercube V4\",\n    \"description\": \"Latest version of usercube\",\n    \"logo\": \"http://localhost....\",\n    \"image\": \"usercube-v4-tests-ready-updated:latest\"\n}]\nI can create the template:\n\nI've got an image usercube-v4-tests-ready-updated:latest on my host:\n\nContainer gets created without any issue:\n\nAre you sure there is no typo in the image name or that you're using the correct image name?. ping @DjTrilogic . Closed due to inactivity.. A user reported that we could also integrate Clair: https://github.com/coreos/clair (refer #1246). @stritti @WTFKr0 \nAbout the docker system prune:\nIn #231 we introduced a button to clean dangling volumes but that was judged too dangerous as a user would be able to remove a data volume with critical data too easily. \nWith the introduction of administrators accounts / confirmation modals in the latest version, we might be able to add that feature.\ncc @ncresswell . After more thoughts on this, I think that this check should be done in the frontend only and should be executed right after login (we don't want to check this every time the view change, as it might spam Github).. Closed in favor of #1649 . Could you give me the logs of the Portainer container? Also, can you try docker -H 10.44.129.134:2375 ps -a and tell me if this is working?. @artisticcheese could you give me precise reproduction steps?. @artisticcheese how did you make to have no endpoints defined? Did you delete the current endpoint from the UI? You have one active endpoint and 0 endpoints defined, I'd need the full reproduction steps.. Indeed, it should be persisted. Could you retry with the latest portainer image? Use portainer/portainer.. Yup, pull the latest image first:\ndocker pull portainer/portainer. I think this issue is related with Golang 1.7 on Windows. I'll try to investigate if this has been fixed in Golang 1.8 and push an image for you to test soon.. @artisticcheese could you give a try to the image portainer/portainer:fix720 ?. Ok, I'll keep this issue open until I make the changes in the next release.. That was a test image, still need to merge the fix inside the develop version.. Build images have been updated via https://github.com/portainer/golang-builder/commit/ff5108c031d90ebd02c450372212c45f4f8cb327\n. @artisticcheese it is supported in version >= 1.11.4. By the way, the latest Portainer image has multi-arch support, so you just need to pull portainer/portainer (no need to specify the windows tag anymore).. Any update on that PR @raphaelquati ?. As discussed in #1282, we're going to reject this feature request as we don't see the added value for the user. \nWe're going to change the endpoint selection system in the near future, and we'll think about this during the UX design step.. Implementation of this feature via #2591 was rolled back because it was causing multiple issues. We'll look forward implementing this one as well as #454 in the same implementation.. Hi @hilschernetpi ! Could you rebase your work now that #715 has been merged?. Closed in favor of #729 . Hi @Niceplace \nWe already have a somehow related feature request. Follow https://github.com/portainer/portainer/issues/611 for the evolution.\nI'll tag your issue inside #611. Thanks @hilschernetpi :+1: . Portainer will append C:\\Users\\hondi\\Documents\\CloudStation\\docker\\apache-sites, :, /etc/apache2/sites-enabled, (:ro)\nThis will create the following volume string: C:\\Users\\hondi\\Documents\\CloudStation\\docker\\apache-sites:/etc/apache2/sites-enabled. Maybe that the first : in C:\\ needs to be escaped?\nRelated to the code https://github.com/portainer/portainer/blob/develop/app/components/createContainer/createContainerController.js#L234\n. Indeed.\nFYI the github labels area/services correspond to the services view (service list) and the area/service-details correspond to the service details view.. @ncresswell Agree but any deletion should ask for confirmation. As specified in #1109, port range mappings in the host section should be optional.\nPortainer should support the following:\n\ndocker run -p 30000-30009:30000-30009 my-image\ndocker run -p 30000-30009:30000 my-image\n. @airztz no, this is not possible. I'd accept a PR though.. Hm, really strange I'm not able to reproduce this issue. Might come from a network issue? Are you behind a proxy? Could you retry some time later and see if it's still here?. Indeed this is a bug related to hidden labels ! This will be fixed soon. Maybe you can open a PR to fix it?. We already have an issue open (multiple regarding the logs view actually) related to that: #430 \n\nAn overhaul of the log view is planned (see #317), but no ETA yet. . @relenteny information about exposed ports is available in the Published ports section.\nYou can see the result in the UI for a service created using the CLI via:\n$ service create -p 8089:80 -p 443 nginx\n\nOne thing tho, it is not possible to let Docker map a port on the host to a container by only specifying the target (container) part via Portainer, this will be tracked as another issue.\n. @relenteny indeed, this should be available in the services view (service list) when #739 is fixed.\nWe can keep this issue open as an evolution to also display this information in the service details view.. Hmm, skip that in my tests. Can you fix that @WTFKr0 ?. Thanks @dimitrov-adrian ! . @WTFKr0 is right, you should either create the /data directory or use the -d flag to specify another directory where to store the data.\nI'll update the docs.. Documentation updated via https://github.com/portainer/portainer-docs/commit/37a61aa9421b66a46e7852960f8fc23609ffa800. Thanks @WTFKr0 !. With the introduction of user access control, an administrator can now define containers private to one user. Give a try to the latest version ! \nFeel free to re-open if you think something is missing.. @samprog1 we already have an issue open for this feature, follow the evolution here: https://github.com/portainer/portainer/issues/546\nI'd accept a PR for this one, as the current open PR is stalled: #570 \n. Hi @dedalusj ! Thanks for the PR !\nAny particular reason that you've decided to use an already hashed password as a CLI argument? I do think that it would be a lot simpler if the password was use in plain-text.\nE.g. portainer --admin-password admin123\nI don't really like all the $ char escaping part, it adds some complexity.. Thanks @dedalusj I agree with you for the security points. I'll ping you in the docs issue to update the documentation.. @vielmetti I'm not sure about adding the password from file flag. I'd like to keep the CLI simple too, having too many CLI options will introduce more complexity. Having one way to set the password from the CLI should be enough, I do not think that the password from file use case would be commonly used.\n@dedalusj think you can remove the password from file part? Even better, implement it as a second PR? This way we could rework/integrate it later if needed.. My tests are OK. I'll merge it soon.\n. Thanks @dedalusj :+1: \nCheck my update on the documentation PR.. @AchuthSankar this will be available in the next release (should be available this week).. @puncha It will be part of release 1.13. ETA is end of the week / beginning of next week.. @soar thanks for the investigation and the detailed report, really appreciate it.\nAbout your last question, Portainer uses websockets for a few things only in the webapp:\n\nTailing container logs\nContainer exec (container console)\n\nI might need to review the connection/usage of the websocket in the app, but that should not affect any requests other than /api/dockers/<endpointID>/containers/logs or /api/dockers/<endpointID>/containers/exec.. @tobias-forkel thanks for the update :-). @cnaslain have you tried using a private navigation tab under firefox?. @cnaslain ok, that's a known issue related to the application state being stored in the browser.\nRelated to #1258. Thanks @evertramos !. Hi, thanks for the report !\n@Glowbal any idea what might go wrong?\n. @discotroy I've just tried on Portainer v1.12.4 and was not able to reproduce the problem.\nI followed the steps of @Glowbal when trying to reproduce the issue.. @discotroy any update on this?. Closing this for inactivity.. Well, not sure if this a bug or not...\nHere is the output of an inspect command on a service created using the following options --network mynet --endpoint-mode dnsrr:\njson\n[\n    {\n        \"ID\": \"vhchojy0mp4x5xzf0q5ba1pwa\",\n        \"Version\": {\n            \"Index\": 65836\n        },\n        \"CreatedAt\": \"2017-06-28T19:12:11.584034532Z\",\n        \"UpdatedAt\": \"2017-06-28T19:12:11.584034532Z\",\n        \"Spec\": {\n            \"Name\": \"gallant_mirzakhani\",\n            \"Labels\": {},\n            \"TaskTemplate\": {\n                \"ContainerSpec\": {\n                    \"Image\": \"nginx:alpine\",\n                    \"Args\": [\n                        \"--endpoint-mode\",\n                        \"dnsrr\",\n                        \"--network\",\n                        \"mynet\"\n                    ],\n                    \"StopGracePeriod\": 10000000000,\n                    \"DNSConfig\": {}\n                },\n                \"Resources\": {\n                    \"Limits\": {},\n                    \"Reservations\": {}\n                },\n                \"RestartPolicy\": {\n                    \"Condition\": \"any\",\n                    \"Delay\": 5000000000,\n                    \"MaxAttempts\": 0\n                },\n                \"Placement\": {},\n                \"ForceUpdate\": 0\n            },\n            \"Mode\": {\n                \"Replicated\": {\n                    \"Replicas\": 1\n                }\n            },\n            \"UpdateConfig\": {\n                \"Parallelism\": 1,\n                \"FailureAction\": \"pause\",\n                \"Monitor\": 5000000000,\n                \"MaxFailureRatio\": 0,\n                \"Order\": \"stop-first\"\n            },\n            \"RollbackConfig\": {\n                \"Parallelism\": 1,\n                \"FailureAction\": \"pause\",\n                \"Monitor\": 5000000000,\n                \"MaxFailureRatio\": 0,\n                \"Order\": \"stop-first\"\n            },\n            \"EndpointSpec\": {\n                \"Mode\": \"vip\"\n            }\n        },\n        \"Endpoint\": {\n            \"Spec\": {}\n        }\n    }\n]\nAnd here is the output of Docker inspect on a service created using the --network mynet flag only:\njson\n{\n  \"CreatedAt\": \"2017-06-28T19:08:17.75578923Z\",\n  \"Endpoint\": {\n    \"Spec\": {\n      \"Mode\": \"vip\"\n    },\n    \"VirtualIPs\": [\n      {\n        \"Addr\": \"10.0.0.2/24\",\n        \"NetworkID\": \"uwx19kavkw9mra6rnw90loqx5\"\n      }\n    ]\n  },\n  \"ID\": \"arzo7duiw62zdmjntvlmf5gvm\",\n  \"Spec\": {\n    \"EndpointSpec\": {\n      \"Mode\": \"vip\"\n    },\n    \"Labels\": {},\n    \"Mode\": {\n      \"Replicated\": {\n        \"Replicas\": 1\n      }\n    },\n    \"Name\": \"mycustomservice\",\n    \"Networks\": [\n      {\n        \"Target\": \"uwx19kavkw9mra6rnw90loqx5\"\n      }\n    ],\n    \"TaskTemplate\": {\n      \"ContainerSpec\": {\n        \"Image\": \"nginx:alpine@sha256:978e9646fb0d7551ccbaef0cc1e2540d3e6a1430c5b984b869e546c2ad3ca2e5\"\n      },\n      \"ForceUpdate\": 0,\n      \"Placement\": {}\n    },\n    \"UpdateConfig\": {\n      \"FailureAction\": \"pause\",\n      \"MaxFailureRatio\": 0,\n      \"Order\": \"stop-first\",\n      \"Parallelism\": 1\n    }\n  },\n  \"UpdatedAt\": \"2017-06-28T19:08:17.757625033Z\",\n  \"Version\": {\n    \"Index\": 65583\n  }\n}\nAs you can see, there is no Spec.Networks field inside the first one. So Portainer will not be able to extract any network information. Not sure if that's a bug in Docker?. Well, as I said, Docker is not giving any network information when using the --endpoint-mode dnsrr option. So Portainer behavior is normal. Will close for now... we might re-open this later.. Could you give me more details on the following points?\n\nAdd the host port like 2222:22/tcp: what do you mean by that?\nAdd the host volume like /data:/data: what do you mean by that?\nAdd the three links : stats, logs, console directly in the containers list, this is available in the container-details view, are you still talking about the app templates view?\nAd a clone option: same here, are we still talking about the templates?. Could you open a separate issue for each of your requests (templates ports, templates volumes)  please? Add some details for each one. I'll close this issue as being too generic.\n\nFor the quick access in the containers view, follow the evolution on this issue: https://github.com/portainer/portainer/issues/230\nAbout that new tab without login, follow the evolution on this issue: https://github.com/portainer/portainer/issues/613\nAnd lastly, for the clone ability: https://github.com/portainer/portainer/issues/41\n. @msgeissler \nThanks for opening that issue, unfortunately I'm not able to reproduce all the cases.\nThere is a bug with the endpoint-init wizard at the moment when trying to define a remote endpoint with TLS and I'm working on fixing that, you can track the evolution here: https://github.com/portainer/portainer/issues/782\nhttp error: mkdir /data/tls/: file exists (code=500): looks like Portainer is trying to create the /data/tls but it already exists. This is really strange as Portainer will try to create the /data/tls directory at startup if it is not existing (see https://github.com/portainer/portainer/blob/develop/api/file/file.go#L45).\nAs this error is raised after choosing the creation of a remote TLS endpoint, I'd say it's related to Portainer not being able to transmit a correct endpoint ID with the HTTP query, that would lead to the creation of the /data/tls/ directory instead of /data/tls/<ID> (see https://github.com/portainer/portainer/blob/develop/api/file/file.go#L57). \nI'm wondering if this could be related to the Windows platform as I've already seen filesystem issues with the Go file library before. Would it be possible for you to try it on another platform to confirm that?\nI was able to reproduce the last issue (C) and will push a fix for that soon. You can track the evolution here: https://github.com/portainer/portainer/issues/781. Interesting, what about Version A ?. @zcalusic this bug has been fixed in https://github.com/portainer/portainer/issues/782\nIt will be released soon :). Quick summary on this issue, the problem is the following on the Windows platform:\nVersion B using endpoint-settings:\nStart the container and mount the data-volume and local socket: docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v D:\\Docker\\portainer-config:/data --name portainer portainer/portainer\nSelect the local docker in the wizard\nGo to the endpoints-option in the portainer settings\nAdd a new endpoint and try to add TLS\nUpload fails with \"Unable to upload TLS certs\" but will create new folders in /data/tls each time the add-button is clicked (http error: mkdir /data/tls/: file exists (code=500)), containing only ca.pem or ca.pem + cert.pem (no key.pem)\nHitting the button a fourth time will somehow succeed and create a working endpoint (the folder does contain all files)\nBut the endpoint overview will now show 4 endpoints, as the previous endpoints were still created (5 with the local endpoint). @GetchaDEAGLE could you paste the full container logs here?\nAlso, could you give us some reproduction steps? . ping @GetchaDEAGLE . Hey @GetchaDEAGLE, so you are still having this issue? What about using the latest version of Portainer?\nPS: Congratulations ! :-)\n. @r3pek could you give us some details about your env? Platform & docker version at least.. Looks like both of you @r3pek and @GetchaDEAGLE are using a NFS share to store the /data folder. Wonder if it's related...\nAlso @r3pek any chance that you can provide a screenshot of the console and network tabs of your browser developer tool after the error is raised?. @r3pek thanks, will investigate and see if I can reproduce.. Thanks for that last comment, it's probably what I thought and related to NFS.\nThe HTTP handler calls the FileService.StoreTLSFile function here: https://github.com/portainer/portainer/blob/develop/api/http/handler/upload.go#L64\nWhich will try to create the 18/ folder only if it does not exists: https://github.com/portainer/portainer/blob/develop/api/filesystem/filesystem.go#L120\nIt seems that the directory check for existence is failing when the underlying filesystem is using NFS: https://github.com/portainer/portainer/blob/develop/api/filesystem/filesystem.go#L211-L222\nMight be an issue with Go, I'll search if there is an existing issue open related to os.Stat and NFS.\nEDIT: I'm thinking that switching from Os.Mkdir to Os.MkdirAll might solve the problem.. @r3pek could you try with the image portainer/portainer:pr1719 and tell me if it solves your problem?. Thanks for the feedback @r3pek, will merge.. Hi @jmthackett \nThis issue has been fixed with https://github.com/portainer/portainer/issues/700 which was released as a part of 1.12.2 ! Please upgrade to the latest version :). Hi @zrml \nWe already have an issue opened for this one, follow the evolution here: #259 . Hi, unfortunately the statistics available on the container-stats view are retrieved from the Docker API and it does not offer any IO related stats.. A new stats view should be rewritten, follow the evolution here: https://github.com/portainer/portainer/issues/297\nI'll close this issue and reference it.. As for #773, I'll close this issue and reference it in #297 . Cannot reproduce, this could have been fixed when solving #1012 or #932.. Following a discussion on Gitter, format should be:\n\"ports\": [\n   {\n     \"container\": 22,\n     \"host\": 8080, //optional, let Docker assign the port if not specified\n     \"protocol\": \"tcp|udp\" //optional, defaults to tcp\n   }\n]\nI'd like to have an extra warning specified here when the port on the host is specified. Something like \"This template is publishing a specific port on the host, you will not be able to deploy it multiple times without changing the port in the advanced settings\".. I'd accept a PR for this.. I can see that as an evolution, to ensure that there is no misunderstanding between a volume and a bind-mount, I'd replace the host field with bind. If the bind field is specified, Portainer will automatically switch the volume type to bind and fill the host value with the bind field value.\njson\n {\n    \"volumes\": [\n      {\n        \"container\": \"/path/in/container\",\n        \"bind\": \"/path/on/host\"\n      }\n    ]\n  }. I'd definitely go with this new format for volumes declarations:\n{\n    \"volumes\": [\n      {\n        \"container\": \"/path/in/container\",\n        \"bind\": \"/path/on/host\"\n      }\n    ]\n  }\nWhere bind is an optional field, if specified then Portainer will automatically switch the volume type to bind and fill the host value with the bind field value. If not specified, then it will use auto.\nThough, in order to preserve compatibility, the old format should still be supported:\n{\n    \"volumes\": [\n      \"/home/username\"\n    ]\n}\nA deprecation warning should be displayed for templates that are using the old format.\nI'm thinking that this deprecation warning should be added inside the Information section:\n\nA warning icon with a simple message such as This template is using a deprecated format for volumes. You should update the template definition, see: <LINK_TO_PORTAINER_DOCUMENTATION>.\nOf course this warning will only be available starting from the version where this will enhancement will be introduced but we should keep this deprecation notice for some time before removing it.. @davask \n\nI'm not sure what you mean by switch the volume type\n\nWhen using Portainer and selecting a template, you can go to the advanced settings and for each volume declared the selected type is auto by default (meaning that Portainer will automatically create a volume and bind it to the container path).\nThe /path/on/host=/path/in/container format would not be backward compatible. If I update the templates tomorrow to use that format then previous versions of Portainer will use it as a container path and this wont' work (/path/on/host=/path/in/container will be used as a container path).\nI also do prefer having this format:\n{\n    \"volumes\": [\n      {\n        \"container\": \"/home/user\",\n        \"bind\": \"/home/user\"\n      }\n    ]\n  }\nAs it will make it better to add any evolution in the volume object later if required.. I'd rather use docker-compose when managing container stacks (https://docs.docker.com/compose/)\nFollow this issue for the evolution on docker-compose support: https://github.com/portainer/portainer/issues/257 . @schmunk42 What are you talking about? If we're talking about 'stacks' (e.g. following the implementation of compose support as described in #257) then yes we'll be able to group containers by stack by grouping them using the com.compose labels.\nServices? Are you talking about Swarm mode services?. @schmunk42 yeah I think that \"stacks\" is the term that's going to be used in Portainer for both v2 (docker-compose) and v3 (services) compose projects.. We already have an open issue regarding the ability to update a container: https://github.com/portainer/portainer/issues/466. We could prevent the user from using an already published port but I do not see how we would be able to list available ports.\nI'll tag as an evolution and rename the issue.. I'm not sure what is the issue here? I've been able to connect to remote hosts protected via TLS by using the IP address of the node. Could you spare more details here?. Exactly, but what's the point of having TLS enabled without the TLS verification?. @kennyko @dedalusj OK, thanks for the details. I agree with it but I'd like to add that disabling hostname verification should be specified as dangerous in the usage docs for the flag.\nAnyone of you would be keen on working on a PR for this?. @gshively11 I'll try to work on #945 ASAP. @gshively11 can you give a try to portainer/portainer:pr1173 and tell me if that works for you?. @gshively11 Ok, I'll ping the other people in the discussion as well.\n@dedalusj @kennyko @lioolli mind giving a try to portainer/portainer:pr1173 ?. ping @gshively11 \nAny update on this?. @gshively11 Let me build one for you, I'll ping you here when it's available.. @gshively11 \nCan you try https://github.com/portainer/portainer/releases/download/1.14.0/portainer-pr1173-linux-amd64.tar.gz ?. Could you try without this option? I'll try to reproduce that bug\nOn mar. 12 sept. 2017 \u00e0 19:57 Grant Shively notifications@github.com\nwrote:\n\nI'm getting invalid credentials when I try to login with the pr1173 build.\nUsing --admin-password. Confirmed it works as expected with the 1.14.0\nrelease.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/786#issuecomment-328932896,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBQHEvwTs-zIfgPVZwSOHgK2jmAokks5shsX6gaJpZM4M38b0\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. @gshively11 are you using the --external-endpoints flag?\n\nEDIT: I was not able to reproduce the --admin-password issue in the develop version. Can you give me more details about it? E.g. reproduction steps.. Oh ok, the changes in that implementation did not impact the --external-endpoints feature. I'll add that and release a new artifact for you. I'll ping you here when it's available for testing.. @gshively11 updated ! Could you give a try to https://github.com/portainer/portainer/releases/download/1.14.0/portainer-pr1173-linux-amd64.tar.gz ?\nThis format should work now: \n{\n     \"Name\": \"manager-1\",\n     \"URL\": \"tcp://scrubbed:2376\",\n     \"TLS\": true,\n     \"TLSSkipVerify\": true,\n     \"TLSCACert\": \"scrubbed\",\n     \"TLSCert\": \"scrubbed\",\n     \"TLSKey\": \"scrubbed\"\n}. @gshively11 Perfect ! Thanks for your feedback, I'll merge it.. I'm not sure this is in the scope of evolution for Portainer. I'd like to have Portainer being able to manage a Docker cluster without the need of having each node in the cluster defined as a endpoint.\nI think that Portainer should be able to list all the resources in a cluster and display them accordingly in each view (e.g. for the container list, it would list all the containers running in each node of the cluster, giving you the ability to inspect/stats/logs/etc... the container without having to manage the worker node as an endpoint).\nWe already have an feature request opened for that (see #461) and we're currently working on designing the implementation.\nFeel free to discuss it here a bit more or correct me if you'd like to see something else.. We already agreed on the fact that using the Swarm API to implement #461 is going to be very limited. Our main idea so far is to develop an agent that would be deployed as a service on each node of your cluster (as a global service). Portainer would then query each agent to retrieve the associated resources and use the agents to proxy the requests (inspect, console, etc...) to each node.. There are still some cases when this 'aggregated view' will not work if we rely solely on the Swarm/Docker APIs:\n\n\nYou can create a Swarm cluster and only expose the Docker API on one manage only, having the other managers/workers exposing communication over the Docker socket. In this case, Portainer would not be able to communicate with the API of each node. A Portainer agent deployed on the node would communicate directly with the Docket socket.\n\n\nEven if the Docker API is exposed on each node, what if it's protected via TLS? Portainer'd need somehow the certs to communicate with each node. This could be a tedious process if you need to specify the required certs for each node before being able to use Portainer to interact with your cluster. Also, if the cluster is dynamic, each time a node is added the user'd need to specify the certs of the node before being able to manage it. I reckon that the communication between Portainer and the agents must be secured and encrypted but this would probably be less complicated to manage.\n\n\nIn the case of a dynamic cluster, having a Portainer agent service running as global would automatically sets the agent on any new node in the cluster. This would allow easy node discovery by Portainer (instead of relying on polling the Swarm API to check if the number of nodes have changed or to use a dedicated script to manage all your nodes as external endpoints).\n\n\nExtra use-case:\n\nHaving a Portainer agent running on each nodes allow us to do more than proxying requests to the Docker API. For example, we could retrieve usage metrics from the node and expose that to Portainer to give an usage overview of the cluster.\n\nThis is still in design phase and I'd love your feedback about it. I totally understand your feeling about adding an extra component in the stack but note that we're trying to make it really simple for our users to manage a Swarm cluster. IMO they should be able to point Portainer at a Swarm node and that should be it.\nSo far we've tried to keep it really simple with only one container to deploy (as opposed to solutions like Shipyard / Docker Datacentre) but if we want to give our users access to advanced features, we'll probably need to implement an agent anyway. . We already have an issue open for host performance monitoring: #611 \nI'm not sure about the integration of ctop, I'll reference this issue in the existing one.. Could you give more details about the use case here? Don't really understand the point of having the ENV variable available in the template form.. Not really, sorry :)\nCan you give me a use case with a specific container for example.. Yup, I do not really see the point of this use-case either ! I do not think that we need to support that in the templates.. @030 @adrianfalleiro yup, at the moment there is no native support for SSL inside Portainer. You need to use a reverse-proxy.\nNote that I've re-open #679 as a feature request.. What would be the benefits of this? Only removing the hashpart in the URLs?\n. All right, could you try to send a PR? I don't think that there would be too much changes, I'll be able to give a better opinion after that. . Agree, marked as pending until a solution is found.. @adrianfalleiro I'd like to avoid adding more and more flags to the CLI. IMO there is already too many flags in the CLI.\nAnyway, I also do not see the point of having a flag for the base href and as you said it makes it more complex than necessary.. @adrianfalleiro any update on this?. @farodin91 I believe that no one is working on this although it's definitely not in our priority list. . We're working on the resource aggregation from all the nodes in one cluster, see #461\nWe're also thinking of introducing a dashboard aggregation for all the defined endpoints, see #796\nI'll leave this issue open for discussion, as I'm not sure that once #461 is merged, this will still be required. Feel free to discuss here.. @Bjornskjald no update on this topic yet. In order to have a proper aggregated view of containers, you would need to be able to inspect ANY containers in your cluster. It's possible to list all and inspect ANY tasks but you can't do that for containers using the Docker HTTP API.. I believe that the introduction of the Swarm visualizer solves this problem, closing this issue.. As specified in #892 we've decided to reject this enhancement, the chance is too high that a user would select a row without actually wanting to do that.\n. After a small discuss with @WTFKr0:\n\n\nI think that a lot of users are using Portainer to manage local instances so it would not make sense to disable the default link (0.0.0.0 being the default value returned by Docker)\n\n\nIt could be quite hard to determine the IP address used by the endpoint (some cases with Docker running on multiple IPs, Portainer with NAT setup & port forwarding...)\n\n\nOne idea might be to give the user the ability to specify the IP used for the redirection as an optional endpoint parameter.\nBeing optional, this field would default to the value returned by the Docker API if not specified. Any administrator user would be able to set a value for this field by going to the endpoint edition view. Once specified, it would automatically be used by Portainer to create redirection links.\n@ncresswell what do you think about this? @DjTrilogic I'd like your feedback too.. @OmgImAlexis Indeed, I'll open an issue to give the ability to edit the actual endpoint.\nSee https://github.com/portainer/portainer/issues/936. IMO the build system and the gruntfile is too complicated / messy. I've opened an issue a while ago https://github.com/portainer/portainer/issues/40 related to a refactor of the gruntfile. Unfortunately I do not have the time to focus on that at the moment.\n@adrianfalleiro do you have any experience with grunt? Keen to work on a new version of the gruntfile?. Awesome ! Join me on Slack at http://portainer.io/slack/ if you need to discuss this.. This was solved as a part of #939 . If the tests are OK, this will be integrated in the next release (1.12.5, should probably be released next week).. I made some tests, when using a self-signed certificate I've got a few errors in the Portainer logs (but everything is working fine):\n2017/04/14 15:32:49 http: TLS handshake error from 172.17.0.1:56570: tls: first record does not look like a TLS handshake\n2017/04/14 15:32:50 http: TLS handshake error from 172.17.0.1:56572: tls: first record does not look like a TLS handshake\n2017/04/14 15:32:54 http: TLS handshake error from 172.17.0.1:56576: tls: first record does not look like a TLS handshake\nI've also tried to use a valid certificate/key pair generated from Letsencrypt and there is no error when using these. \nI'm still investigating the issues related to self-signed certs.. @030 I used these instructions to generate the SSL files and start Portainer with SSL support.\n@adrianfalleiro yes, I searched a bit about these error messages and all that I found is that this is logged when using HTTP instead of HTTPS. Looks like my browser is somehow sending HTTP requests as I've got this error logs when I access https://my-ip:9000.\n. @030 Sorry I'm currently focused on another feature. I think that it's OK but I'd like to expend my tests a bit, I'll do that soon.. Thanks @030 :trophy: . Documentation updated via https://github.com/portainer/portainer-docs/commit/c2bc401ae3aaa798506da97d93dafe092fa25b11. Thanks @WTFKr0 :+1: . Hi @dtbdtb, that's an evolution that I'd like to see too.\nLet me investigate a bit on how a possible implementation for this and I'll update this issue. If any other user got an idea on this, feel free to discuss it there.. Angular-translate should probably be used here: https://github.com/angular-translate/angular-translate. This is interesting tho we probably need to retrieve all the available texts in the UI inside an external store first... this might be long.. I could picture something like this:\n\nWhat do you think @ncresswell ?. @harryparmar no it's not the default behavior, you can enable it when removing a container.. @alaagalal have a look at http://portainer.readthedocs.io/en/stable/deployment.html#persist-portainer-data. Agree, I think we should remove any driver notion from the dashboard as this is a misleading information at the moment. We'll also revamp the dashboard soon.\nThis information can be retrieved in the Docker section.\n\n. Shouldn't that be added in the discussion in #461 instead of being a separated issue?. @GP8x could you open a new issue to which we can associate this PR ?. Sorry did not see the branch naming, indeed there is already an issue open for that, thanks :). Thanks @GP8x :+1: . Yes please, update these messages to replace the 'delete' word with 'remove'.. Works perfectly, thanks @WTFKr0 :+1: . @WTFKr0 We thought about using labels to store access control information in the beginning, but we need to be able to update access control for a resource and Docker does not support updating labels for some resources (it only support services at the moment).\nThis is being discussed in https://github.com/moby/moby/issues/21721 though.\nI'm closing this issue, feel free to re-open if you think that we can discuss this furthermore.. IMO we should support secured registries first before looking into this. And no, there is no plan to support docker-credential-helper or similar utils at the moment.. I believe that this problem was solved with the support of private registries. Feel free to re-open if you have any troubles.. @WTFKr0 wouldn't that be easier for the user to specify a interactive: true field in its template definition that would automatically start the container with the -i -t flags?. This has already been done in the container-creation (see command section). I don't think that templates should support a mix of these flags, this woud add too much complexity and I do not think that there would be a lot of users using these.\nIMO a simple interactive: true field that starts the container using -i -t is good enough to solve the problem of containers with interactive commands. . See how it is done here: https://github.com/portainer/portainer/blob/develop/app/components/createContainer/createContainerController.js#L208\nThis is actually a mix of OpenStdin and Tty (OpenStdin = true and Tty = false in the case of interactive mode).. Honestly, adding the interactive: true|false field support to template is super easy to do. I think that using a workaround as specified by @WTFKr0 is counter-intuitive. \nI understand that some people would like to run interactive containers as templates, they should be able to do so without having to figure out a workaround to keep their container running.. Hi @Gaibhne \nUnfortunately I'm unable to reproduce this:\ndocker run --rm -p 9123:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --no-auth\nWhen I access the UI on port 9123, I have access to the endpoint-wizard view and not the admin-user creation.\nCould you try that command? Also, this could be related to your browser cache so could you try to access Portainer either in private browsing or in a new tab?. Ping @Gaibhne . @Gaibhne browser cache issue? Could you try to clean your browser cache?. Indeed I was pretty sure this issue was coming from a previously started Portainer instance using authentication. Leftovers from that session are probably causing this issue. Yes, I'll close this for now, we might re-open later if this affects too many users.. @hactar Well, for these use case I guess that they still can reverse proxy to https... Albeit it will be slower and more resource consuming, so we might add an extra --no-tls or --disable-tls flag to let Portainer run on HTTP instead of HTTPS.\nBut HTTPS should be the default anyway, most of the users actually use a reverse proxy in front of Portainer to enable TLS/HTTPS. This will bring a simpler way to deploy Portainer (as some users will be able to skip the reverse proxy setup) and a more secure environment.. @mallchin have a look at: http://portainer.readthedocs.io/en/stable/deployment.html#secure-portainer-using-ssl\n. Thanks @WTFKr0 :+1: . Yes, I think that this is related to #318 \nI'll close this one, we'll track this in #318 . Not so fond of the visual result. Could you give a try to bootbox.dialog and try to add another button ?\nSo we could have usual text \"You are about to remove a running container.\" and then 3 buttons:\n\nCancel\nRemove container\nRemove container & volumes. Could you try to get the Cancel button aligned on the right with the other buttons? And have all the message on the same line ? . Also I think that we should give more information about this, as it won't remove ALL the associated volumes. I will only remove volumes where the mapping was created without a name binding (which is currently not available in Portainer, even templates are using name binding).\n\nSee https://docs.docker.com/engine/reference/commandline/rm/#remove-a-container-and-selectively-remove-volumes. This is the equivalent of docker rm -v on the CLI.\nFrom the docs: \n\nThis command will remove the container and any volumes associated with it. Note that if a volume was specified with a name, it will not be removed.\n\nMore info:\n\nhttps://docs.docker.com/engine/reference/commandline/rm/#remove-a-container-and-its-volumes\nhttps://docs.docker.com/engine/reference/commandline/rm/#remove-a-container-and-selectively-remove-volumes. Technical review is OK. I'm currently testing this... one thing that I dislike is that it's saying 'Automatically clean associated volumes' whereas it will only clean non-named volumes. And non-named volumes cannot be created via Portainer at the moment.\n\nWe could go further by removing ALL the associated volumes (named or non-named), I think that'd be more useful than the the current state of the feature (rm -v) but probably more dangerous.\n@ncresswell what do you think about this? . @ncresswell ok then it's currently working that way, I'll merge the PR.. Agree.. Thanks @WTFKr0 :+1: . @Daniel-ltw You can already change the update delay value in the service-creation and service-details views, what's wrong?. Ah indeed, that's pretty bad ! I'll keep this issue open as an evolution for the update delay.\nPlease open extra issues for the update-monitor and health-checks commands.. We'll add support for a time string instead of a numeric, allowing you to specify time such as 30s, 5m etc.... @G07cha @Glowbal \nYes, we're already using momentjs in the app so my idea was also to re-use it. \nI was thinking:\n\nInput text to allow any delay format as a string (10s, 30m, 1000ms, 2h...)\nAdd a tooltip close to the input/label to specify supported format\nParse the input, extract duration/unit and use momentjs to create the required format used by the Docker API.. I do not really like the name of the field, not explicit enough.\n\n\n@ncresswell any idea on the field name and tooltip value?. Thanks @WTFKr0 :1st_place_medal: . I've created a separate issue for the support of update-monitor in #829 . @hemna This is an issue with Docker itself, and not related to Portainer. I'd recommend to check your Internet access or retry later.. When you're talking about empty env. variables, are you talking about env. entries with no name, no value or both?\nAt the moment, Portainer will not take into account any variable with either no name or no value. So, the problem is not that empty env. vars are not maintained after a scale/service update action.\nE.g. you should be able to reproduce it this way:\n\nDeploy a service with empty env. variables\nInspect the created service, empty env. vars are not maintained\n\nWhat would be the use case to support empty env. vars?. Ok, we can support env entries without a value. I'd accept a PR for that, that would be super easy to change.. @kanbekotori I see you're using CentOS 7, SELinux is probably enabled, could you try using the --privileged flag?\n$ docker run -d -p 9000:9000 --privileged -v /var/run/docker.sock:/var/run/docker.sock --name portainer portainer/portainer. @kanbekotori ah. Have you tried the --privileged flag anyway?. Ok, are you sure that your Docker daemon is exposed over the TCP socket? Can you connect to your Docker daemon using the Docker CLI ? If yes, can you send me the command you're using ?. @kanbekotori for example, how are you using the Docker CLI to query running containers?\nSomething like this?\n$ docker ps -a. @kanbekotori \nCould you give us the output of systemctl status docker ? And the output of docker logs portainer ?. @kanbekotori  And the output of ps -ef | grep portainer ?. Well, can't see anything problematic here.\nCould you tell me if these files exist and give us their content:\n\n/usr/lib/systemd/system/docker.service\n/etc/sysconfig/docker\n\n/usr/lib/systemd/system/docker.service.d/docker.conf\n. Ok, let's try something.\n\n\nEdit the file /usr/lib/systemd/system/docker.service\n\nReplace the line ExecStart=/usr/bin/dockerd with ExecStart=/usr/bin/dockerd -H unix:///var/run/docker.sock\nRestart Docker: systemctl restart docker\n\nAnd try to redeploy Portainer with and without the --privileged flag.. @kanbekotori glad to know that ! Pretty strange that your Docker CLI is able to communicate with your Docker daemon when it is configured without exposing the socket.. @spyro2000 have you looked at the SELinux section in http://portainer.readthedocs.io/en/stable/deployment.html#declare-initial-endpoint-via-cli ?\nTry to use the --privileged flag when running Portainer: docker run -d --privileged -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer. Yes, we should probably build our own ca-certs image with up to date certificates. I'll tag this as an enhancement.. I'd accept a PR for that, it should be easy to implement.. Thanks for the report ! I'll close this issue and track it in #317.\n. @zarmhast are you running Portainer with the --no-auth flag?. Thanks @Glowbal :+1: . Thanks @Glowbal !\nNote: I've updated your description, this does not close #121 yet as we still need to add support for Swarm standalone.. Thanks @Glowbal :+1: . @marcelo-ochoa this should be working, we do support registry v2. I'll try to reproduce this issue.. @marcelo-ochoa I've been playing with that a bit. Portainer do support pulling images from a V2 registry.\nUnfortunately, it does not support pulling images from a secured registry at the moment (I've read the docs you provided. You need to do a docker login first before being able to pull your images, this part is not available in Portainer yet).\nI'll reference it in #56 . The template management feature introduced a new way to parse templates, they will be parsed at startup inside the backend and any JSON decoding error will be raised in the container logs.. We need to define the workflow to use these type of volumes inside Portainer.\n\nHow to create that volume from Portainer?\nHow to map that volume inside the container-creation view ?\n\nI do not know the EFS volume plugin (it's a volume plugin, not a network plugin if I understand correctly), so I can't answer 1.\nAbout 2., if we implement the --volume-driver in the container-creation view, how to map an existing volume using that plugin? Is it created and available in the volumes view? If not, should we use a bind-mount to map inside the container?\nWe need to answer these questions before being able to work on this.. @colegatron Is this how you're supposed to create a volume from Portainer? And to answer your previous question: no, options without values will not be taken into account (not sure about Docker CLI behavior for that one).\n. Agree, the output is quite verbose. We need to change this, probably only log when a change is detected.. Hidden containers are based on labels at the moment. This would require a different process to hide containers. Plus, once hidden, it would not be possible to redisplay these containers again.\nWhat's the use case behind that feature request? Having the ability to restrict container management to administrators only should be enough?. The new access control system will give the ability to restrict management of a container to administrators only.\nRelated to #750 . The ID is the unique identifier of the image and it is used to access the image-details view. From a pure functional point of view, this stay coherent with every other resource list view. . @ncresswell I'm still not sure about this one, I agree that the ID is quite useless so if we remove it what would be the link to the image-details ?. Problem is that one image can have 0 to multiple tags.. Maybe just a 'Access image details' link\nLe mar. 9 mai 2017 15:55, Thomas Krzero notifications@github.com a \u00e9crit :\n\nYeah the only unique identifier to image is the sha so href link must\npoint to that\nIn order to hide this useless column, the question is :\nCan we place href link on tags column with a \"No tag\" if there is no tag ?\nOr a href link on the whole line ?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/844#issuecomment-300172026,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBZQ4nafgN10L4RqI7oGFg4ZO2WBCks5r4HA9gaJpZM4NSnbJ\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. Closed for now as it breaks the usual pattern of clicking on left to inspect the image.. Thanks @axeal :+1: . This will be quite tricky to implement as it requires to parse the options and to find the equivalent API setting for the parsed option. I think we already had this discussion in another issue but I was not able to find it. I'll flag this as an evolution.. Awesome, thanks @WTFKr0 \n\nWill close this one and link it in #597 . @Thijzer why don't you start the Portainer using the --always-restart policy ? This can be done either on the CLI or via the container-creation view in Portainer.. ping @Thijzer . @Thijzer ok, please elaborate a bit when you have some time. But I think that they are existing solutions to your problem (e.g. always-restart policy or even using compose if you want to managed 'linked' containers).. @Thijzer \nYou can do that in the container-creation view (under the Restart Policy tab).\nI'll close this issue. Feel free to re-open if you think something is missing.. @iamShantanu101 join me on Slack http://portainer.io/slack/\nI'll give you more information here.. Hi @MattPark \nThanks for opening this issue ! So there is no need for the --privileged flag actually? Just add :z to the socket mapping?\nE.g instead of:\n$ docker run -d --privileged -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nUse:\n$ docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock:z portainer/portainer. @MattPark Ok, I'll update the documentation. Mind creating a separate issue for the support of the z flag in the container-creation view?. One user reported that only specifying -v /var/run/docker.sock:/var/run/docker.sock:z is not enough to run Portainer under SELinux.\nHe used the following conf:\n$ ExecStart=/usr/bin/dockerd --selinux-enabled --tls --tlscert=/path/to/cert.pem --tlskey=/path/to/key.pem -H host.domain:2379 -H unix:///var/run/docker.sock\nAnd had to start Portainer like this:\n$ sudo docker run -d -p 9000:9000\\\n --privileged\n -v \"/var/run/docker.sock:/var/run/docker.sock\"\\\n -v \"/opt/portainerdata:/data\"\\\n portainer/portainer. Besides sshd, it seems that only Portainer and MariaDB are affected by SELinux restrictions on @Thijxx host.\n@Thijxx can you confirm that the following command is not working?\n$ sudo docker run -d -p 9000:9000 \\\n -v \"/var/run/docker.sock:/var/run/docker.sock:z\" \\\n -v \"/opt/portainerdata:/data:z\" \\\n portainer/portainer\nNot sure if you should use /run/docker.sock or /var/run/docker.sock on your host.. I'll postpone this as long as we do not find a 100% working method around this issue.. Same issue for another user in #912, the :z flag does not solve the problem.. @Riccardo1976 what issue did you hit precisely?. @Riccardo1976 1.16.4 has issues with Docker 1.12, it has been fixed and will be part of the next release.. Duplicate of #516 . What do you mean? Should we report this as a bug?. Indeed, thanks for reporting that, I'll open a new issue.. @kauden yes, tho we'll need to find a way to add this without cluttering the UI and impacting the UX.. @Trudels no ETA on this, we're pretty busy with other topics. I'd accept a PR.. Unforunately not, you can ping me on Slack if you want.\nChanges should probably be added to files located in app/docker/views/containers/create/.. @WTFKr0 do you want me to fix the conflicts?. Compose related issues seems solved :+1: \nI'll do another review after the refactoring.. We should issue a warning in the container creation view displaying that\nonly one network will be reattached\nLe mer. 26 juil. 2017 \u00e0 21:53, Thomas Krzero notifications@github.com a\n\u00e9crit :\n\nFor the networks bug, it's expected cause we can't create a container with\nmultiple networks\nSee moby/moby#29265 (comment)\nhttps://github.com/moby/moby/issues/29265#issuecomment-265909198\nIn fact, docker compose create container and attach networks in second step\nI think we have to disable container recreate/update if we saw more thant\n1 network, no ?\nCause we have same problem on Duplicate/Edit mode, only the first network\nis reattach\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/855#issuecomment-318163713,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBZ5EhZn2r6jqTtZHJ14bIpeX0iAVks5sR5lVgaJpZM4NbFtp\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. A Docker image is available for this implementation via portainer/portainer:pr855 (Linux amd64 build).. @fourbytes Strange, we'll need more information, can you tell us how you created the container that you wanted to duplicate/edit so that we can reproduce?\n\nI'll push changes to the test image to use unminified libraries.. Thanks, @WTFKr0 can you have a look?. @fourbytes portainer/portainer:pr855 image updated.. @WTFKr0 could you have a look at @theit8514 's issues?\n@querplis \n\nany chanse we can get a health check here too?\n\nDo you mean the ability to set a health-check during container creation? If that's the case, this would be a feature request, mind opening an issue for that?\n\ni am looking on that \"start conainer\" button and it doesnt realy describe what gona happen.\n do we just stick a new network without restart of container?\n do we realy make a clone, clone with some fresh changes?\n* do we apply changes and restart/relaunch container?\n\nIndeed, we should make this clearer. When using the edition capability, the current container will always be removed and then a new one will be created (tho this is explained in the modal box displayed after clicking on the start button).. portainer/portainer:pr855 updated with latest changes.\nI've been able to reproduce both issues using @theit8514 Dockerfile, here is the result of my investigations:\nAbout the args issue, I've done some testing and I think that we should not convert the config.Cmd object to a string before reconverting it again to an array. When we edit/duplicate a container, the config.Cmd object is in the good format already and should not be processed.\nI'm thinking that we should bind the Command input to $scope.formValues.Cmd field instead of $scope.config.Cmd and process it only if the config.Cmd is not available: \n remove the $scope.config.Cmd field\n test for it's existence in the prepareConfiguration() function\n if exists, we keep it (container edit/duplication case)\n if do not exists, we apply the ContainerHelper.commandStringToArray function on scope.formValues.Cmd and assign it to config.Cmd\nFollowing this idea, the result of ContainerHelper.commandArrayToString() should be assigned to $scope.formValues.Cmd during edit/duplication.\nThe volume issue seems is related to the way volumes are detected in the ContainerHelper.configFromContainer() function. The problem is that the container parameter passed to the ContainerHelper.configFromContainer() function is a ContainerDetailsViewModel object and is NOT the entire representation of the Docker API response. Thus, the container.Mounts field is undefined.\nIdeally, all the fields available in the ContainerDetailsViewModel should be used in the view only. I think that you should add a Model field to this object containing the whole Docker API response object and pass container.Model to ContainerHelper.configFromContainer().\njavascript\nfunction ContainerDetailsViewModel(data) {\n  this.Model = data;\n  this.Id = data.Id;\n  this.State = data.State;\n ...  \n}\nping @WTFKr0 . Also @WTFKr0 could you remove the banner when in the duplicate/edit state and replace it with the same modal as the re-create button but on the duplicate/edit button ?\n . Also please rebase the branch, I've fixed the bug I was talking about in https://github.com/portainer/portainer/pull/855#pullrequestreview-52860481. @WTFKr0 in any case the Docker API will return it as an array. You can use the existing method to convert this array to a string inside the $scope.formValues.Cmd field.\nSee the latest point:\n\nif do not exists, we apply the ContainerHelper.commandStringToArray function on scope.formValues.Cmd and assign it to config.Cmd. I've fixed the conflicts introduced by #1104 . Thanks for the work on this @WTFKr0 :+1: . Hi @kalgecin \n\nThanks for the report, I'll close it here and reference it in #297 . Hi @seanc \nUnfortunately, we do not support any Docker version < 1.9 ! You'd need to upgrade your Docker version to use Portainer.\n. @Thijxx ahah no you're right, I'll fix this !. @gregtoth @ncresswell I believe we can do something similar to the \"re-create\" button in the container details view. When we click on recreate, a modal is displayed and gives the user the ability to enable/disable the pull of the latest image when recreating the image.\nWe can offer something similar when clicking on the update button in the services view.\nEDIT: created a feature request for this https://github.com/portainer/portainer/issues/1577. > I added the force option and indeed the tasks are recreated but it wasn't clear that you have to use the --image to force a digest resolution so a new image is pulled if needed.\n@doncicuto great, the current behavior is what I wanted to add actually. But I agree with other users, adding the ability to choose to pull the latest version of the image would be a nice enhancement.. Fixed in https://github.com/portainer/portainer/commit/8a0d74093b8739225e368ad6704c2c484dfb0488\nWill close once #868 is merged.. This will not be added inside Portainer. If you want to SSH into one of your containers, you'll need to setup openssh in your container.. Hi @bramhaag \nDoes these containers have specifics labels ? If so you can use the ability to hide containers based on specifics labels, see here: http://portainer.readthedocs.io/en/stable/configuration.html#hiding-specific-containers\nNote @ncresswell: this feature was planned to be removed with the arrival of the new RBAC and UAC in 1.13, should we keep it?\n. @bramhaag I'll close this issue then, have a look at the link I provided.. Thanks for the feedback @Glowbal, we'll take that into account and it can come as enhancements later.. This is probably not the issue, the hash character is only used inside the frontend (e.g. /#/auth, /#/containers...) API requests should not use it.\nAny error message in the Javascript console of your browser?. Ok, I'll close this for now. Feel free to re-open if needed.. Have a look at existing configurations in previous issues:\n\nhttps://github.com/portainer/portainer/issues/488#issuecomment-274064998\nhttps://github.com/portainer/portainer/issues/348\n\nOr join us Slack in the #reverse-proxy channel to discuss this.. Indeed, as @Glowbal stated, this introduces loss in the changes you bring in the form if you click on a menu link.\nI think that this should be done differently, maybe if you keep using the goToItem method on each link, but set the anchor in that method?. @eliat123 could you rebase your changes? 1.13.0 was released yesterday and #868 introduced a lot of changes.. ping @eliat123 . Thanks @eliat123 :+1: . Thanks @WTFKr0 :+1: . @eliat123 Could you rebase on the latest develop? I'd like to try the codefresh integration on this PR.. Yes, we're currently working on this ! \nDuplicate of #461 . You should use Docker secrets if you want to manage sensitive data in your containers.\nWe're currently working on secret integration in #518 \nWhat's your thoughts on this @ncresswell ?. Swarm secrets has been introduced recently, have you tried it @blagerweij ?. ping @blagerweij . I'm going to close this issue as I believe the way to go is to use Swarm secrets here.. @mrmachine \nI believe that it should be part of another issue.\nRegarding notifications, see https://github.com/portainer/portainer/issues/943. Thanks @rreinurm :+1: . Development note: the user can be specified in the CreateExec operation.\nSee: https://docs.docker.com/engine/api/v1.28/#operation/ContainerExec. This would definitely be part of #56 \nClosing as a duplicate.. After playing with it a bit we've decided to reject this enhancement, the chance is too high that a user would select a row without actually wanting to do that.\nWill close #798 as well.\nThanks for your work on that anyway @eliat123 :+1: . Thanks a lot for the work on this @Glowbal :trophy: . Duplicate of #454 . CSS adjustements requires a volume mount so this won't be possible here.\nI'll add the ability to define registry URLs here, so that the container/service creation view will display a select box when registry URLs are defined.. Documentation added via https://github.com/portainer/portainer-docs/commit/c59dba9ed255d24b51b6c18dc831e91cbf5a89cd. I suggest adding a small button \"show aliases\" to avoid cluttering the UI.. @1138-4EB \n\nI am about to write it in containerController.js, inside update.\n\nSure, you can add this here.\n\nApart from that, it might be not optimal to process the logic in the client side every time the page is loaded.\n\nIt is, just keep it this way for now.\nDo not forget that Portainer aims to simplify Docker usage, this evolution must not add too much complexity.\nIn order for me to try it, please open a PR, you can join me on Slack if you need indications on how to do that.. Hi @1138-4EB \nSorry for the late update !\nI've been able to play with this a bit, but even when creating a new container from within Portainer and specifying a hostname for example I can't see anything in the Aliases field in the network table when inspecting a container. Is there anything I am missing here?\nAlso I don't think that the ID field in the Container details panel is useful at all... we should probably remove it.. We already had some similar feature requests for the equivalent in the images and volumes section but these were judged too dangerous for the end user.\nMaybe only available to an administrator with a confirmation modal as detailed in #714 ?\ncc @ncresswell . From what I can see in the Docker API, there is no 'dry run' method.. admin user within RBAC + double confirm is the way to go.. Documentation for deprecated flags updated via https://github.com/portainer/portainer-docs/commit/303d54ea0a963e804af9ac5ea39dddb709e5a6fd. Could be related to https://github.com/chriszarate/supergenpass/issues/45 ?. I'm not keen to add logic into Portainer codebase to introduce a work-around for a third-party tool. IMO, SGP should just work, so unless there is a real issue with Portainer, I don't think there is anything to fix.\nI'll close this for now, feel free to continue the discussion here or re-open if you find what is the issue.. @mvhconsult I was able to create the administrator password as well as login using these credentials:\nu: admin\np: \"6-5oD]ww\"$1~2V. Thanks for the report !\nWill close and track in #297 . @gdeverlant could you provide your docker-compose.yml file please?. @gdeverlant did some tests but was not able to reproduce this, will close.\nIf this issue happens again, please re-open the issue.. @choonchernlim instead of the using the privileged:true flag, you can try the following volume definition: portainer:/data:z\nYour second issue with containers is related to Docker, I'd advise to search/open an issue in the Docker repository.\nI'll close this issue as the main problem is solved.. All right, seems that the :z flag does the trick for some SELinux users only. \nWe've got a discussion about this in https://github.com/portainer/portainer/issues/849. Portainer uses the default logging library log. Default date and time should be the local system ones: https://golang.org/pkg/log/#pkg-constants\nAlso, I don't think that the TZ env variable is supported in Portainer image as it's based on scratch. You could try the /etc/timezone workaround:\n* https://github.com/moby/moby/issues/3359\nYou could also try to bindmount /etc/localtime:/etc/localtime. What about using the workaround above @nemchik ?. Not planned yet as we'd rather keep using the scratch image, we could implement our own log writer instead of using the default and load the TZ from the environment. I'll re-open to track this.. Thanks @Fish2 :+1: . Related to the --network-alias option: https://docs.docker.com/engine/reference/run/#network-settings. Hi @taherv \nOther users reported the same issue with different plugins. How did you install the plugin? Is the plugin reported in under the Plugins section in the docker info output? How do you actually use the plugin?\n. For example, the local-persist plugin is reported installed in the docker info output but not in the docker plugin ls output.\n$ docker info\n...\nPlugins: \n Volume: local local-persist\n Network: bridge host macvlan null overlay\n$ docker plugin ls\nID                  NAME                DESCRIPTION         ENABLED. @taherv thanks for opening an issue in the moby repository too, I'm going to add it here so we can track it too. \nhttps://github.com/moby/moby/issues/33545\nI'll need to investigate this a bit more.. > So, is it possible or easy to use something equivalent to command docker plugin ls instead of docker info to get the plugin list?\nWe can use it as well but it still unclear to me whether we should use the PluginList operation (https://docs.docker.com/engine/api/v1.30/#operation/PluginList) or the SystemInfo operation (https://docs.docker.com/engine/api/v1.30/#operation/SystemInfo) to retrieve the plugins...\nLooks like https://github.com/moby/moby/issues/33545 goes unanswered so it looks like that even Docker is unclear about this.\nA temporary solution might be to aggregate both queries?\n\nAnd, futher more, a feature request here for the createNetwork page to use dropdown list replace manually input, please.\n\nPlease open another issue to track this feature request.\n. I'm currently looking at this.\n\nA temporary solution might be to aggregate both queries? \n\nI'll propose a solution to aggregate the result of the PluginList and SystemInfo operations. Tho this will restrict the usage of this feature to Docker API version >= 1.25 (Docker 1.13.x).\nI'll implement something like this:\n\nDocker engine >= 1.13.x: Query PluginList and SystemInfo and populate the driver dropdown\nDocker engine < 1.13.x: Query only SystemInfo and populate the driver dropdown\n. @jack6liu @taherv Guys, I've opened a work-in-progress on this via #1044 \n\nCan you give it a try via portainer/portainer:pr1044 and give me some feedback?. @jack6liu have you been able to create volumes using the rexray/rbd:latest driver via Portainer UI ?. @jack6liu I've updated portainer/portainer:pr1044, could you pull the image and try it again? It should now prevent the usage of the /plugin endpoint for Docker versions < 1.13. I just want to ensure that everything is still working fine.. @jack6liu thanks for the feedback ! . @luisfavila this issue has been closed for a long time now, please open a new issue and give us as much details as you can.. Hi @tbcashy \nAre you using any Internet proxy? Sometimes, the connection to Github can timeout, I recommend that you retry later.. @tbcashy Have you tried again later ? Are you using custom templates? You can access the new settings view in the latest release to point at another source for templates, make sure you're using the default.. @tbcashy can you access https://raw.githubusercontent.com/portainer/templates/master/templates.json ?  Try from your computer and the host where Portainer is located.. This is pretty strange, how did you start Portainer? Also, what is the output of the portainer container logs (e.g. docker logs <PORTAINER_CONTAINER>)?\nYou can try to create a container inside the same network as the portainer container like this:\n```\ndocker run -it --net=container: alpine sh\napk update\napk add ca-certificates\nupdate-ca-certificates\nwget https://raw.githubusercontent.com/portainer/templates/master/templates.json\n``\n. @tbcashy this seems to be related with your Docker networkportainer_net`, gateway is probably not able to reach Internet.. @tbcashy any update on this?. I agree with that and I've always thought about adding this. IMO it should go further than just see the progress of pulling images, but being able to see the status of asynchronous tasks in Portainer (pulling an image, starting a container...). Events in Portainer will soon be replaced by an audit section. IMO at the moment the events section is pretty useless, I'm not sure that we should add it for Swarm.\ncc @ncresswell . @JinsYin does the rexray and devicemapper driver appears in the driver dropdown?\nAlso, you should use the following for your options:\n\nname: size, value: 20\n\n. Are you trying to specify any options with the local driver?\n. So, are you tring to pass the following option: o=size=20 ? The format of the option seems strange.. @JinsYin do you have access to your browser console? You can inspect the request and you might find extra information here. I'll also try to reproduce.. @JinsYin strangely enough it seems that these options are not supported by the local driver: https://github.com/moby/moby/issues/24709\nWhen creating a volume using the Docker CLI, it seems that you can specify anything using the o=something=format. This works for example:\n$ docker volume create --opt o=thisisnotanoption=100m\nEven if it makes no sense. You might want to re-open the discussion in the moby issue. As this is the response from the Docker API, it seems that it is not supported by the Docker API, thus Portainer won't support it too.\nI'll close it for now, feel free to re-open later.. @JinsYin Portainer does not alter what you give in the name and value fields. The Docker API simply not accept these values. So it's not issue in Portainer.. @jangrewe could you share your JSON definitions?. I've been able to reproduce this, indeed it seems that adding  the platform field solves the problem. Will fix as this field should be optional.. I'll keep this issue open as the platform field is documented as optional. Will be fixed in the next release.. Duplicate of #41 . Host network is not available at the moment for Swarm services (this is a Docker limitation).\nIt should be available in Docker 17.06 version (not released yet), see: https://github.com/moby/moby/pull/32981\nPortainer should automatically load and display that network when using 17.06, please re-open if you have issues once the version is out.. Ah indeed, you're looking at adding Host file entries (like in the container-creation view). Sorry, I'll tag this as an enhancement then.. Investigation so far:\n\nIssue is only occuring on Chrome 59\nDev tools show a failing HTTP request (https://<domain>/api/docker/1/containers/json?all=1) with the following status: no status = (canceled)\nTested behind a Nginx reverse-proxy\nCannot reproduce on Chrome 53\n . Following our discussion on Slack, please retry by starting a Portainer container without using a reverse proxy (docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer) to see if it's related to your Nginx configuration.. Thanks for the report, I was also able to reproduce this on Chrome 53.\n\nNote that scrolling directly in the terminal window works... I'm not sure if it's related to the xterm.js integration or a bug in xterm.js, I should have a look.\nEDIT: the fact that minimizing the left panel solves this problem makes me think it's related to Portainer (css probably).. Should be quite easy to implement with a solution similar to https://gist.github.com/d-schmidt/587ceec34ce1334a5e60\nI'd accept a PR.. Actually, using the HSTS header might be a better solution for this.\nhttps://wikipedia.org/wiki/HTTP_Strict_Transport_Security\n. Thanks @lewer :+1: . @tursoft what would you like to achieve with the ability to import/export images? \nAs @ncresswell stated, this is not going to be supported for containers, but I'm curious about the image use case.. ping @tursoft . @Ineluki \nThe way to go here would be to use docker-compose. There is a WIP for compose support in Portainer.. @alexanderadam have you tried the docker inspect command?. @alexanderadam have you played with our container duplication feature? Might solve your problem as well.. This issue will be used to track the ability to import/export images.. Quick specs about this:\nA new action should be added to the images view, \"Import images\" redirecting to a new image import view.\nIn this view, the user should have the ability to upload an archive containing one or more images.\nWhen connected to a Portainer agent that is part of a Swarm cluster, the user should have the ability to specify on which node the images should be extracted.\nAnother action should be added to the images view, \"Export\" (right before the delete button), this would allow the user to select any number of images in the images table and export the corresponding images as an archive.\n. @AlexGreg already available via our Docker API proxy: https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8#execute-docker-queries-against-a-specific-endpoint. Looks really interesting !! I'll need to take some time to review/test this tho, will try as soon as I can but I've got other priorities at the moment.\nWe have an issure related to gruntfile refactoring: https://github.com/portainer/portainer/issues/40, I'll link so we can track this.\nI've seen the recess issue before, it's probably due to the fact that the bower_components/ directory is not present... are you sure that the bower dependencies are correctly installed?\nQuick answers to your questions/issues:\n\nIssue 1: yes, the artifacts generated by the build (go binary and javascript app) should be available from outside the container (login and pushing is related to 'deployment' and not building, so it should be considered outside from this process/PR) \nIssue 2: why would the container requires access to the host Docker socket?\nIssue3: see my comment above for the recess problem, I think that you're missing a bower install step after npm install\n\nMy two cents without entirely reviewing the PR: a portable build system should provide all the required libraries/dependencies in the image and not download them each time.\nThanks again for the work !. I'm still looking at this, quick thoughts:\n\nAccording to your last message I'd say that docker push commands should be dropped from build.sh. Then, a new script (named deploy.sh?) could be added to i) push images and ii) push tarballs. However, this would break the current behaviour of build.sh.\n\nYes, I'd rather see a new deploy.sh script (push images would be enough for now, though pushing the tarballs on github would be nice too indeed).\nEDIT: See my update on Travis below to see if Travis could be used instead of this deploy script.\n\nOn the other hand, I added a .travis.yml file, so that all the binaries and images are built after each commit/PR. All of it is done in less than 9min: https://travis-ci.org/1138-4EB/portainer/builds/248611716\nMoreover, artifacts can be automatically pushed to github releases and/or docker hub. However, I don't know if you want to use this feature.\n\nI'd be keen to have a look at this. I've got a few questions though:\n Can it automatically creates and push an image to the hub when a PR is open?\n Can it refresh this image when any commits are made for a that PR?\n Can it delete that image once the PR is closed?\n Can it automatically creates and push an image after a commit in the develop branch ?\nI'd love to use the automatic push feature for artifacts, that'd be really handy for the release process.\nI reckon that I should have a look at #939 first.. > EDIT: docker build and docker tag steps should be part of build.sh or deploy.sh?\nI reckon these steps should be part of the build.\nAlso, thanks a lot for your work and explanations about Travis. We're going to keep this part aside for now as we're currently using Codefresh as a CI tool. The only missing feature in Codefresh would be the automatic feature push, we might be able to do that as a script (using Github API) later on.. > It should be quite straightforward to rewrite codefresh.yml, so that build_env.sh is not used in that environment. However, there is a subtle difference: i'd say that codefresh.yml builds for a single platform on each run. @deviantony, can you confirm this?\nIndeed, I'll take care of re-writing the codefresh.yml file after merge. And you're right, at the moment, Codefresh only builds a Linux AMD64 image when a new commit is pushed to the develop branch. This allows us to have the portainer/portainer:develop image with the latest work available.\n\nIn codefresh.yml the frontend is built once with grunt build-webapp. However, in build.sh grunt release:... is run once for each target (platform-arch). What is your 'real' flow? Do you use 'grunt:release'?\n\nI'm pretty sure I added the build-webapp task for codefresh only, I'm currently having a look at this as it raised a question regarding the copy task in #939.\nAbout my flow:\n\nI use grunt run-dev locally and that's pretty much all I need\nI never use the grunt release task but I do use grunt release platform-arch (I sometimes use grunt release-linux-amd64 locally to create an image that I'll host in integration environments)\nI use the build.sh script on release only to create the artifacts/images (then manual upload/push)\nI'm using codefresh to automatically build a latest image of the develop branch (linux amd64 only, there is no point to have multiple platform support for this at the moment)\n\nAs a later evolution, I'll probably use codefresh for the release pipeline, but that's not here yet.. Something that we need to ensure will be working: https://github.com/portainer/portainer/issues/1010. #939 & #994 are now merged, let's tackle this one. Could you rebase please?. Brilliant ! I'll have a look as soon as I can.. Side note, #975 was open recently and will probably be merged before this one.. > Most of the changes do not conflict at all. The only conflicting one is replacing recess:build and cssmin with postcss:build. Shall I merge G07cha:replace-recess-with-postcss with 1138-4EB:refactor40-grunt-tasks, so that changes corresponging to both PRs are shown here?\nNot yet please, I'll test and merge #975 first. @1138-4EB #975 has been merged, could you rebase?. > Removed. And renamed run-dev to run.\nI'd like to keep the task named run-dev to avoid breaking other contributor's dev flow.\n\nOh, I think I get it now: when you run copy without an argument/option, both copy:bundle and copy:assets are executed.\n\nYes, when you don't specify a subtask, all subtasks are run.\n\n/\n        * Why don't we just use a host volume\n        * http.FileServer uses sendFile which virtualbox hates\n        * Tried using a host volume with -v, copying files with docker cp, restating container, none worked\n        * Rebuilding image on each change was only method that worked, takes ~4s per change to update\n        /  \n\nThis was part of the build system of a previous project. It's pretty old, and I've always thought that it would be a better idea for local development.\nAt the moment, the watch-build flow is the following (triggered after each file saved):\n\nBuild the app (generate JS/CSS/fonts/etc in /dist)\nBuild a Docker image \nRun the previously built Docker image\nClean old containers/images\n\nIt'd be interesting to see if we could somehow just build the app after save and mount the app files inside a Docker container instead of re-creating an image & container each time. See what I mean? . > I think I do. That 'Build the app' step includes building the go part or just build-webapp?\nBoth, if the binary is not present it needs to be built.\n\nNote that this last commit converts several dest: '', src: '', declarations to the more compact form : .\n\nI'm good with that.\n\nOn top of that, it includes a first approach to not use minified versions in dev. I just defined an envvar, which is either set to .min or left empty.\n\nInteresting, is it working yet? Can I test it?. Good, note that you can also ping me on Slack if you have questions and you want this discussion to be more reactive.. > About this PR, I think that the only remaining issue is that some of the files to which the .min suffix is conditionally applied might not exist. And I think that concat does not throw errors if some of the files are not present. Can we know for sure that there is a file.ext in the same path as file.min.ext? For example, is bower_components/moment/min/moment.js present?\nYou're right, some libraries might not provide minified files, we need to handle this case.. Just gave a try to the latest version:\n```\n$ grunt run-dev\nRunning \"shell:buildBinary:linux:amd64\" (shell) task\n/bin/sh: 1: build/build_in_container.sh: not found\nWarning: Command failed: build/build_in_container.sh linux amd64\n/bin/sh: 1: build/build_in_container.sh: not found\n Use --force to continue.\nAborted due to warnings.\n```\nSomething is missing :). @1138-4EB could you rebase? We need to tackle this one before #994 and #938 . Awesome work @1138-4EB :+1: \nNow, to the next step ;). @bmxmale I'm sorry could you be more precise? What's missing here?. @bmxmale could you copy/paste the content of docker inspect <CONTAINERID> ? (at least the NetworkSettings part). @bmxmale Portainer will retrieve network information from the Docker API. As you can see, there is only one network specified in the Networks section, which is mage-net.\nSo, your container is probably not connected to the bridge network, or this might be something else related to Docker itself.. Ok, but again, if the docker inspect command returns only one connected network Portainer will not be able to do more as it's using the same API as the command line.\nYou might want to open a new issue in the Docker repository. I'll close this as based on the investigation I think that it's not related to Portainer but to Docker.\nFeel free to re-open and comment if you think that I missed something.. @pascalandy the Portainer team already thought about adding monitoring and alerting in Portainer as a future evolution. This is planned to be integrated as a paid plugin later this year.\nWe can still discuss what would be your expectations on this topic here, this will also help us define how we will implement it.\nRelated issues:\n\n\n687\n\n\n979\n\n\n1081\n\n\n1155 . Thanks for the details @pascalandy\n\n\nI'll flag this issue as a discussion as well so that other users can give their point of view / expectations too.. @pascalandy I believe this one takes care of austocaling Swarm services: https://github.com/gianarb/orbiter. @BrookofClay Could you try with the image portainer/portainer:fix944 ?. @BrookofClay you're welcome, the fix has been released as a part of 1.13.4. @HeyerPlane Yes it is working well in 1.14.0. Did you specify the registry field in your template definition? (see http://portainer.readthedocs.io/en/stable/templates.html#registry). We'll potentially add the ability to create a stack (docker-compose, see discussion in #257) by specifying an URL to a git repository.\nI'm not sure that it's required otherwise. I'll leave this open an tag as a discussion so we can get the input from other users.. With the recent introduction of stack deploy #1280, we allow to retrieve stacks from a git repository. I'll close this issue, feel free to try this new feature and ask for evolutions if you need to.. Indeed, I had a look at the related code recently and when a global service is declared, it always uses the total number of available and active nodes for Y in X / Y. . I'll need details as I don't understand what you're trying to achieve. Are you trying to compile Portainer binary?. Well, I'd recommend having a look at our docs if you want to build Portainer locally: http://portainer.readthedocs.io/en/stable/contribute.html\n. @Duvel I was not able to reproduce this, each time I try to delete a secret that is used, an error message is displayed. See the screenshots below.\n\n\n. @Duvel you could try to open the developer console of your browser and inspect the requests.\nRecording your screen and posting it here would be really helpful too.. Thanks for the screencast. Indeed, what is the status code of the http request? I do not have Safari, could you try this with another browser ?. Ah ! Gotta love Docker API. HTTP status 200 + error message. I've tested on docker >= 17.05-ce so they probably fixed that (meaning that they set the status code to > 500). I'll add a workaround that for previous versions.. This is pretty strange as I can't even reproduce that in a Swarm cluster using Docker 17.03-ce...\nI've created an image based on the fix in #984, can you give a try to portainer/portainer:pr984 (Linux amd64 build)? . This is probably due to the fact that you can't use the target option when linking secrets to services at creation / update time. Portainer will automatically link secrets to the secret name only. I'll tag this as a bug as it affects services created using the CLI but there should also be an enhancement open to add support for the target option when creating a service with secrets.\n. @ncresswell agree, I'll change the purpose of this issue to switch from a CLI flag to ENV var for templates.. Latest update on this topic, we're going to keep the --templates CLI flag. Renaming the issue to track the removal of any depreciation related stuff inside the codebase.. Can you give us the following details (where applicable)?\nTechnical details:\n\nPortainer version:\nTarget Docker version (the host/cluster you manage):\nPlatform (windows/linux):\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nTarget Swarm version (if applicable):\nBrowser:. Yes indeed we do not support Docker < 1.9, glad you solved it.. Hi @lioolli \n\nSorry for the late update. Just cloned and tested it, it's interesting. Could you just change the default behavior when enabling TLS? When enabling TLS, TLS VERIFY and TLS CLIENT CERTIFICATE should be both enabled by default.. Closed in favor of #1173 \nThanks for your work on this @lioolli :+1: . A simple column to add the Mount Path for each volume should be quite easy to implement, I'd accept a PR.. Ok will re-open so we can work on it again.. @MwC-Trexx wanna give it a try? The fix created via #1028 is available for testing under portainer/portainer:pr1028. Could you list the view where you think this information is missing?. Should be quite easy to add, I'd accept a PR :-)\n. I'm sorry I can't understand the problem. What are you trying to achieve? Are you trying to solve #777 ?. Well, do you know how to submit a PR? I'm going to close this issue as a duplicate of #777.\nPlease comment in #777 . You can test this by using the following image: portainer/portainer:pr257 (available for linux amd64 only) . @scher200 thanks for the report, please read the description of this PR. It does not support Compose v3 (yet). At the moment, only version: \"2\" is supported.. @WTFKr0 compose v3 is not supported by libcompose, see: https://github.com/docker/libcompose/issues/474 (see the limitations section in the PR description)\n. @MaliciousGenius so what's wrong here? I can see the network 0_8376449903853701618_default in the docker network ls output.. From https://github.com/portainer/portainer/issues/257#issuecomment-316433641:\n\nI've been testing the pr257 build - and noticed that any of my non registered stacks (I am assuming I can't register them yet) which contain many '-' are being removed.\nI tried to add a stack from the UI where I could add a '-' i.e. postfix-relay however when starting the stack it created a whole new stack that I couldn't manage again. Looking great so far though and like where it is going!\n\nThe docker-compose.yml in question is:\nversion: '2'\nservices:\npostfix-relay:\nimage: xxx.xxx\ncontainer_name: postfix-relay\nrestart: always\nports:\n- 127.0.0.1:25:25\nvolumes:\n- /etc/localtime:/etc/localtime:ro\nenvironment:\n- SMTP_HOST=xxx.xxx\n- SMTP_PORT=xxx.xxx\n- SMTP_USER=xxx.xxx\n- SMTP_PASS=xxx.xxx\n- SERVER_NAME=xxx.xxx\n- ACCEPTED_NETWORKS=xxx.xx\n- USE_TLS=yes\n- TLS_VERIFY=may\n- ZABBIX_HOSTNAME=postfix-relay\nnetworks:\nxxx-tier:\naliases:\n- postfix-relay\nrestart: always\nnetworks:\nxxx-tier:\nexternal:\nname: xxx-proxy`. @Budwise Indeed, our dependency to libcompose is what makes compose > v2 support unavailable.\nIt would require a lot of work to make libcompose work with the latest compose version.. @Budwise What v2.1 ?. @Budwise when using the docker-compose binary or within this experimental feature in Portainer?. @Budwise when using the docker-compose binary or within this experimental feature in Portainer?. The docker-compose binary do not rely on the libcompose library.. The docker-compose binary do not rely on the libcompose library.. Following the discussion after this question:\n\nWould it be difficult to provide a mechanism to change the default behaviour for externally created docker volumes/containers/services? Portainer could tag the ressources which are listed for the first time.\nYes I'm afraid that this would be quite hard to implement. In the meantime I'd recommend setting the ACL manually on each resource using an administrator account.\nDon't you have a database with all the entries? If the ownership field is not defined you could just set it to private or the default ownership which has to be implemented first :-).\nThe database only store UAC related information, it does not store any Docker related information (containers, etc...). So that would require parsing all the containers running on boot / when adding an endpoint and automatically add information on each resource. And also a refactor on how the resource control model is currently defined.\n\nThe requested feature here is to be able to create a default ACL on resources created outside of Portainer.\n. Following the discussion after this question:\n\nWould it be difficult to provide a mechanism to change the default behaviour for externally created docker volumes/containers/services? Portainer could tag the ressources which are listed for the first time.\nYes I'm afraid that this would be quite hard to implement. In the meantime I'd recommend setting the ACL manually on each resource using an administrator account.\nDon't you have a database with all the entries? If the ownership field is not defined you could just set it to private or the default ownership which has to be implemented first :-).\nThe database only store UAC related information, it does not store any Docker related information (containers, etc...). So that would require parsing all the containers running on boot / when adding an endpoint and automatically add information on each resource. And also a refactor on how the resource control model is currently defined.\n\nThe requested feature here is to be able to create a default ACL on resources created outside of Portainer.\n. Indeed, updated.. Indeed, updated.. @m-a-v sorry, no ETA on this yet.. @m-a-v sorry, no ETA on this yet.. #2137 introduces some changes regarding this topic, default access policy is now set to administrators only.. #2137 introduces some changes regarding this topic, default access policy is now set to administrators only.. @erick-sa you might be interested in https://github.com/portainer/portainer/issues/1257. @erick-sa you might be interested in https://github.com/portainer/portainer/issues/1257. Hi @uhe1231 and thanks for the PR ! \nUnfortunately, this will not be that simple to implement as we want to keep backward-compatibility with the old format.\nSee my comment here: https://github.com/portainer/portainer/issues/777#issuecomment-311598201. Hi @uhe1231 and thanks for the PR ! \nUnfortunately, this will not be that simple to implement as we want to keep backward-compatibility with the old format.\nSee my comment here: https://github.com/portainer/portainer/issues/777#issuecomment-311598201. Referenced in #317 . Referenced in #317 . Ah, thanks for the investigation. We plan to rebuild the container logs view entirely, this will be solved as a part of this work.. Ah, thanks for the investigation. We plan to rebuild the container logs view entirely, this will be solved as a part of this work.. Closing this issue as it's referenced in #317 . Closing this issue as it's referenced in #317 . Hi @abagshaw\nAs Neil stated, you'd need to start Portainer with a specific label and then go into the settings and use that label to hide Portainer.\nFeel free to re-open if you need more info.. Hi @abagshaw\nAs Neil stated, you'd need to start Portainer with a specific label and then go into the settings and use that label to hide Portainer.\nFeel free to re-open if you need more info.. Unless we figure out a way that is would not clutter the UI, I'm not keen on adding this. IMO this will be too much information displayed in the containers view.\nIf somebody can come with some UI mockups on this, we could then decide how to integrate that.. Unless we figure out a way that is would not clutter the UI, I'm not keen on adding this. IMO this will be too much information displayed in the containers view.\nIf somebody can come with some UI mockups on this, we could then decide how to integrate that.. Hi @G07cha \nIndeed, I'd love to replace recess ! I'm pretty busy on other topics at the moment, keen to open a PR ? :-). Hi @G07cha \nIndeed, I'd love to replace recess ! I'm pretty busy on other topics at the moment, keen to open a PR ? :-). > I proposing using PostCSS because it's stable, extendable and should suit current portainer's needs.\nSounds good to me !. > I proposing using PostCSS because it's stable, extendable and should suit current portainer's needs.\nSounds good to me !. Thanks @G07cha :+1: . Thanks @G07cha :+1: . I'll give it a go soon to try the UX.. I'll give it a go soon to try the UX.. Sounds good to me!\nLe mar. 4 juil. 2017 21:45, Konstantin Azizov notifications@github.com a\n\u00e9crit :\n\nI've changed tooltip so it will be appended to the document's body from\nnow on, this will ensure that it won't be affected by styles of a parent\nelement. I've checked tooltips on other pages as well, it looks good for me.\nRegarding form collapsing, I think I'm going to hide all fields and leave\nonly \"Disconnect\" button visible with a label \"Connected as %username%\"\nbefore it. What do you think about it?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/976#issuecomment-312933921,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBYAVckf_70GPMoX6JGG9ZD5t3Dmrks5sKohUgaJpZM4OMHsR\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. Sounds good to me!\n\nLe mar. 4 juil. 2017 21:45, Konstantin Azizov notifications@github.com a\n\u00e9crit :\n\nI've changed tooltip so it will be appended to the document's body from\nnow on, this will ensure that it won't be affected by styles of a parent\nelement. I've checked tooltips on other pages as well, it looks good for me.\nRegarding form collapsing, I think I'm going to hide all fields and leave\nonly \"Disconnect\" button visible with a label \"Connected as %username%\"\nbefore it. What do you think about it?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/976#issuecomment-312933921,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBYAVckf_70GPMoX6JGG9ZD5t3Dmrks5sKohUgaJpZM4OMHsR\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. Looks great, I'll have a look today ! . Looks great, I'll have a look today ! . Thanks @G07cha :+1: . Thanks @G07cha :+1: . @bergtwvd you're using Swarm and not Swarm mode right ?. @bergtwvd you're using Swarm and not Swarm mode right ?. Thing is, this was not implemented in the containers view because you can select multiple containers. What should happen if you select a stopped and a started container?. Thing is, this was not implemented in the containers view because you can select multiple containers. What should happen if you select a stopped and a started container?. All right, feel free to tackle this then.. All right, feel free to tackle this then.. Hi @atifsaddique211f \n\nThis feature is not implemented nor being implemented at the moment. I think it would be preferable to wait for #696 to be implemented first and then think about activity notifications.\nThe problem I see with events is that when you start a container for example, multiple events are fired (container created, container network connected, container started...)\nSo this would actually generate a lot of spam.. Hi @atifsaddique211f \nThis feature is not implemented nor being implemented at the moment. I think it would be preferable to wait for #696 to be implemented first and then think about activity notifications.\nThe problem I see with events is that when you start a container for example, multiple events are fired (container created, container network connected, container started...)\nSo this would actually generate a lot of spam.. Ping @ncresswell \nWhat's your thoughts on this?. Ping @ncresswell \nWhat's your thoughts on this?. Indeed, that's why I thought that this should be more related to #696\nOr even better, I'm thinking that notifications should be part of the monitoring and alerting plugin: https://github.com/portainer/portainer/issues/943. Indeed, that's why I thought that this should be more related to #696\nOr even better, I'm thinking that notifications should be part of the monitoring and alerting plugin: https://github.com/portainer/portainer/issues/943. Side note, the events view was planned to be replaced by the audit view in #696 . Side note, the events view was planned to be replaced by the audit view in #696 . I'll close the discussion here as we think this will probably be part of the Monitoring & Alerting plugin, I'll reference this in #943\n. I'll close the discussion here as we think this will probably be part of the Monitoring & Alerting plugin, I'll reference this in #943\n. Thanks for opening this issue, I'll investigate localstorage and try to reproduce. I'm pretty sure it's coming from the per domain local storage too.. Thanks for opening this issue, I'll investigate localstorage and try to reproduce. I'm pretty sure it's coming from the per domain local storage too.. Localstorage is indeed available per domain, see https://stackoverflow.com/questions/4201239/in-html5-is-the-localstorage-object-isolated-per-page-domain\nA workaround might be to use http://portainer-dev.mydomain and http://portainer-qa.mydomain instead.. Localstorage is indeed available per domain, see https://stackoverflow.com/questions/4201239/in-html5-is-the-localstorage-object-isolated-per-page-domain\nA workaround might be to use http://portainer-dev.mydomain and http://portainer-qa.mydomain instead.. Thanks @G07cha :+1: . ping @jskii \nHave you tried the solution proposed by @puilp0502 ?. ping @jskii \nThere is no need to rename the files, you just need to point at their path for the --sslcert and --sslkey parameters. Of course if you don't specify a value, Portainer will search for file ending in .crt & .key.\nI'll close this issue as I do not think there is a problem. Feel free to re-open.. ping @jskii \n. Re-opened for investigation.. Thanks @Glowbal :+1: . I'd be happy to receive a PR from you :-). @artheus as @Glowbal specified in the issue description, this is to add Docker config (https://docs.docker.com/engine/reference/commandline/config/) support inside Portainer.\nI think that Docker configs can only be used within Swarm services (like the secrets). What config are you talking about ? What stable version are you talking about?. @zhaoyao91 there is a work in progress on this, follow #996 . Hi, please have a look at #959 for the work on stacks support.. Indeed, a REST Swarm factory is implemented in Portainer but not in use.. Closed by #991 . I'll give it a try soon, in the meantime could you fix https://codeclimate.com/github/portainer/portainer/pull/991 ?. Thanks @Glowbal :+1: . This was fixed recently, see  https://github.com/portainer/portainer/issues/982. Brilliant ! I'll have a look soon.. Thanks @G07cha :+1: . A few notes here:\n\nVerbosity is reduced by using the : format instead of dest:, src: (only in the plugins that support it: copy, concat and uglify).\n\nI always pick consistency over readability/verbosity, please pick one of these formats and use the same everywhere.\n\nCurrently I didn't implement any option to minify dependencies, when minified versions are not provided. I think it is not worth the effort, because in release tasks uglify is run to minify everything ( dependencies + webapp).\n\nYou're right, there is no need for this.\n\nHowever, I kept the task because I think it is useful to be able to extend it in the future (say selective minification during development).\n\nWhat task are we talking about here?\nAlso about the vendor.yml format, I'd change reg to regular. Makes it simpler to understand what is this section.. Ok, I'll review this again once #939 is merged.. Now that #939 is merged, let's tackle this one. Can you rebase please?. Thanks @1138-4EB :+1: \nNow, onto #938 :-). Could you give us details about Chrome version? Have you tried with another browser? I was unable to reproduce this on Chrome 53.. I'll flag this issue as related to reverse-proxy, I'm pretty sure the issue comes from Portainer + ALB. Any way to configure this ALB? \nPortainer requires specific reverse-proxy configuration for websockets (used by container console), as you can see in our Nginx example here: http://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer\nI can't reproduce this as I don't have access to Amazon ALB. Will ask for help as well.. @evvvivek cannot really help with ALB sorry, need get some help from the AWS community.. @mrmachine docs updated via https://github.com/portainer/portainer-docs/commit/564dbbc9680a0dccaf01dda940e8157fe46c5d22. Note that the following error is raised in the browser console when accessing the service-creation view:\napp.3fd8c44b.js:119 Error: [$injector:unpr] http://errors.angularjs.org/1.5.11/$injector/unpr?p0=ConfigServceProvider%20%3C-%20ConfigServce%20%3C-%20CreateServiceController\n    at http://localhost:9000/js/app.3fd8c44b.js:6:426\n    at http://localhost:9000/js/app.3fd8c44b.js:43:219\n    at Object.d [as get] (http://localhost:9000/js/app.3fd8c44b.js:41:1)\n    at http://localhost:9000/js/app.3fd8c44b.js:43:281\n    at d (http://localhost:9000/js/app.3fd8c44b.js:41:1)\n    at e (http://localhost:9000/js/app.3fd8c44b.js:41:242)\n    at Object.instantiate (http://localhost:9000/js/app.3fd8c44b.js:42:77)\n    at http://localhost:9000/js/app.3fd8c44b.js:91:374\n    at Object.<anonymous> (http://localhost:9000/js/app.3fd8c44b.js:369:23742)\n    at http://localhost:9000/js/app.3fd8c44b.js:16:71 <div id=\"view\" ui-view=\"content\" ng-if=\"!applicationState.loading\" class=\"ng-scope\">\nI think that there is a typo in the controller, ConfigServceProvider should be ConfigServiceProvider.. @Glowbal could you rebase please?. @Glowbal could you rebase please?. ping @Glowbal . ping @thojkooi . Great, let me review that to start view. Also, ensure that I can push to that branch, I can add the UAC on Configs.. Awesome, I'll review it today.. Yeah, took some time but we did it ! :trophy: \nThanks @thojkooi :+1: . docker run --privileged -d \\\n           -p 9000:9000 \\\n           -w /portainer \\\n           -v $(pwd)/dist:/portainer \\\n           -v /tmp/portainer:/data \\\n           -v /var/run/docker.sock:/var/run/docker.sock \\\n           --name portainer \\\n           centurylink/ca-certs /portainer/portainer --no-analytics\nWhy do we need to run the container as privileged? Other than that, I think that this solves the problem or re-creating an image each time, so LGTM.\nWe'll probably replace centurylink/ca-certs with our own image at some point.\n. Right, I think that it solves permissions issues on the Docker socket under SELinux. It should probably be removed and we should update the socket bind-mount definition to /var/run/docker.sock:/var/run/docker.sock:z.. @G07cha tests under the test directory are a legacy. I kept them at the moment to have some inspiration when we'd need to re-write the whole testing.. Just gave a try to this, it's working well, good work !\n@1138-4EB I'll merge this PR, then we should tackle #939, then #994 and finally #938.\n@G07cha indeed, there is no test coverage atm, we can discuss this on Slack.. Thanks to both of you @G07cha @1138-4EB :+1: . Hi @dnadave \nThis feature is not available yet, a feature request is already open for it. You can have a look at the discussion in https://github.com/portainer/portainer/issues/777 for more info.. I already have interest in something similar. But instead of using version here, I'm thinking that the image field should be updated to an array...\nE.g. support something like image: ['nginx:latest', 'nginx:alpine']. UI would default to the first entry and when multiple images are found a dropdown would be displayed to be able to select it.\nWhat do you think?. Well, I'd not say easier as any change in the template format requires backward compatibility.\nBut that's an interesting request, so we'll work on this.. IMO, the ability to display container IDs in the containers view will have to wait https://github.com/portainer/portainer/issues/568 to be implemented so that you can choose to display the ID column.\nWe'll keep this issue open to add the container ID to the container details.. Thanks @Glowbal :+1: . @thojkooi FYI https://github.com/portainer/portainer/pull/1217 relocated the state registration in app/routes.js. ping @thojkooi . Closed in favor of #1666 . Thanks @G07cha :+1: . Agree, security could be enhanced a bit by not giving the possibility to list possible users when trying to log-in. Tho a real solution here might be an authentication try threshold or something similar.\n{\"err\":\"Invalid credentials\"} should be returned no matter the issue with authentication.. Awesome !\nAbout the design I'd go for the warning label color (yellow) and I'd display the Unused tag next to the ID as the tags field can sometimes be quite long depending on the number of tags associated to the image. Plus, it would make it consistent visually as image IDs are usually the same length.\ncc @ncresswell what's your thoughts?. What about just adding a margin-left with a low value (5/10px) instead of aligning right?\n\nAs a third option, we could use a monospaced font for ids so all labels will be aligned to one vertical line.\n\nKeen to show us that option?. Monospace fond result is a lot better IMO ! If we switch to monospaced font then it should be used everywhere we have IDs in tables.\nLet's wait for @ncresswell feedback.. > Monospaced fonts are considered harder to read.\nAs long as we use it only for IDs only (which are not intended to be very readable as well), I think that it's OK. \nDoes look fine on your screenshot.. @ncresswell @G07cha do you think that we should add the same yellow label displaying dangling in front of each unused volume?\nAs well as adding the ability to filter unused images as we can filter dangling/attached volumes?. Yeah, that should be good enough for now.. Awesome, I'll review again.. Perfect, thanks a lot @G07cha :+1: . We're currently in the process of creating a entirely portable build system.\nFollow the evolution here: https://github.com/portainer/portainer/pull/938\n. @helli0n are you connected to a Docker Swarm standalone cluster?. Ok, someone reported this recently in https://github.com/portainer/portainer/issues/977\nWe'll fix soon, I'll close this as duplicate.. Indeed, that's a risk. We want to enhance the actual user/team management with permissions (e.g. when you create a user you can specify if this user can start containers, can access container console, can create volumes...), this should be added in as well.\nI'm not keen to limit host directories to regular users in the meantime, this seems to be a popular way to persist data or access required data. Tho we can discuss this here.\nPing @ncresswell . @tarach I'm thinking of adding a lot more than just socket privileges for users.\nSomething like no-access, read-only or write on each resource / action (container, volume, image, network, service, events)\nDiscussion about this is opened here, you can just follow this issue to track development.. Closed by #1235. Hi @sylvainmouquet, thanks for the report.\nYou never alter the file manually right?. I think I know the problem, you must specify the protocol in the URL of your endpoint: http://portainer.readthedocs.io/en/stable/external_endpoints.html#url\nTry with:\n[\n  {\"Name\": \"ecm_local\",\"URL\": \"unix:///var/run/docker.sock\"}\n]\nTho, as it is invalid, it should be skipped in the first place... This should not happen:\nFile endpoint not found in database, adding to database. [name: ecm_local] [url: /var/run/docker.sock]. I'll keep this open as I want to fix the other issue I found.\n\nTho, as it is invalid, it should be skipped in the first place... This should not happen:\nFile endpoint not found in database, adding to database. [name: ecm_local] [url: /var/run/docker.sock]. Thanks for the report, will close and reference in #317 . No ETA on this feature, feel free to submit a patch as a PR in the meantime.\n\n. Well, in order to fix this I need a way to reproduce it...\nI'll leave this open as maybe someone knows how to recreate that container state.. @Glowbal know how to reproduce that dead state?. @cgoeller @jack6liu @Glowbal wanna give a try to portainer/portainer:pr1048 and give me some feedback?\nI was not able to reproduce locally using @jack6liu reproduction steps.. @jack6liu's solution to create a dead container does not work as well on my environment.\n@jack6liu @cgoeller can any of you copy/paste the response content of the api/docker/<ID>/containers/json?all=1 request?\n. @jack6liu the API call to api/docker/<ID>/containers/json?all=1 is triggered when you access the containers view in Portainer.\nThat's allright, the inspect should work as well. I'll try to update portainer/portainer:pr1048 today.. @cgoeller @jack6liu \nI pushed a new version of portainer/portainer:pr1048, could you give it a try?. Awesome ! Will merge.. @simonbuehler can you give us some details about your environment (docker version, platform) as well as the Portainer version?. Strange, Portainer is using the Docker API to query the container list (as well as the Docker CLI) so I don't have any idea of what might be causing this issue. Are you able to reproduce this?. @G07cha @1138-4EB is there really a point of having this integrated? I feel like just having the Long ID (current behavior) is actually enough.\n. @1138-4EB I don't feel there is a need for this, layout on small resolutions is already looking good to me.\n\nI try to avoid adding logic when there is no need. We can re-open and discuss it if the subject comes back later on.. Thanks for the report @h0l0gram ! Will fix ASAP.\nSeems to be related to https://github.com/angular/angular.js/issues/1388. @MwC-Trexx @h0l0gram Keen to try portainer/portainer:pr1037 ?. Ok, will release 1.13.6 including that fix. Strange that I cannot reproduce this in my environment tho.. @thiesschneider 1.13.6 on Linux amd64? Can you inspect the browser requests via the developer console?. @thiesschneider \nInteresting, this seems to be related to the system/df call (Error: a.dataUsage.Images is undefined).\nCan you inspect the requests and check the system/df one? E.g. this is what it looks like in my browser:\n\n. @thiesschneider also you can join me on Slack for a better support.. @MwC-Trexx should have been fixed in the latest version. @MwC-Trexx strange, can you inspect using the browser console and post a screenshot?. Mind inspecting the request in the network tab?\nLe sam. 22 juil. 2017 \u00e0 19:08, MwC-Trexx notifications@github.com a\n\u00e9crit :\n\n[image: screen shot 2017-07-22 at 12 05 19 pm]\nhttps://user-images.githubusercontent.com/7128246/28493127-75f1b244-6ed6-11e7-9f43-1de876da19a6.png\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1033#issuecomment-317197078,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBX_CkrYVZ13kMJEt0ktwe1HuoMpbks5sQiyQgaJpZM4OXuO5\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. Could you display all the requests? Click on the all button instead of\nothers.\n\nLe sam. 22 juil. 2017 \u00e0 21:35, MwC-Trexx notifications@github.com a\n\u00e9crit :\n\n[image: screen shot 2017-07-22 at 2 33 41 pm]\nhttps://user-images.githubusercontent.com/7128246/28494115-ea90390e-6eea-11e7-9918-12188007c92e.png\nHere you go.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1033#issuecomment-317205582,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBXJPvQe4ooUdgNCZy3zHCd1-4nLgks5sQk7ugaJpZM4OXuO5\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. @MwC-Trexx perfect, this helped me confirm that the previous bug is solved. As you can see the /docker/system/df call returns 200 and is OK here.\n\nTho it should not work because you're using Docker 1.11.x, strange, I'll try to reproduce, but you might be affected by #1042 . @MwC-Trexx @xiaoxiaohuixxh can you give a try to the image portainer/portainer:pr1067 ? It contains a fix for this.\n. @MwC-Trexx Now not showing running container, all images, etc. Sorry what's the problem here?. @MwC-Trexx Are you sure that this is related to this image? Does this happens if you start a new portainer/portainer instance?. This has been fixed you can try it in portainer/portainer:develop\nLe mar. 25 juil. 2017 \u00e0 20:41, divisuals notifications@github.com a\n\u00e9crit :\n\nI encountered the same error with my local Docker environment (VirtualBox\non Mac OSX 10.12.6 using docker v1.11.2/ API version 1.23).\ndf does give a 404 - see attached.\n[image: portainer_error]\nhttps://user-images.githubusercontent.com/3194722/28588041-f81309d6-712d-11e7-9a78-bd8ccf07b930.png\nThe total image count is accurate and other resources are also pulling-up.\nIs this expected?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1033#issuecomment-317830982,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBZjaCPRPtjLJS_hIrsDVUo8D4nJwks5sRjbNgaJpZM4OXuO5\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. @lee-cn I don't know how to reproduce this, could you give me some steps?\n\nI've pulled a hello-world image and then accessed the images section without any issue.\n\n. Hi @KunmyonChoi \nYou should update your Portainer version (latest release is 1.15.2) as this was already fixed.. I feel like 10 is a good default value. As @G07cha mentionned, we aim to support tablet devices as well and this default value makes sense here.\nYou can just update the value and it'll be persisted in your browser.. Thanks for the report, I'll try to reproduce somehow.. I was not able to reproduce this issue, nobody else reported it as well... I'm sorry I'll close this for now, we might be able to re-investigate later.. There is already one feature request for this: https://github.com/portainer/portainer/issues/466 as well as a PR: https://github.com/portainer/portainer/pull/855. As I posted on Slack, please start another container (try a ubuntu container for example docker --rm run -it ubuntu bash) and then try to reach https://raw.githubusercontent.com/portainer/templates/master/templates.json from within the container.\nWe need to ensure that the Docker network is not the cause here.\nWhat URL did you use with your custom templates?. This seems to be related to the Docker network indeed... \nHave you tried to ping 172.17.0.3 from within that alpine container?. Sweet, will close this issue ! Feel free to comment here with a solution :-). I'll need access to VIC to be able to reproduce this.. @RoyalDecline this is a known bug when using Portainer & VIC engine, but it should not happen when using Docker. Can you give me steps to reproduce? I don't have any issue locally (or in a cloud environment, for example on demo.portainer.io).. @Sugaroverdose thanks for the shared env ! I've been able to fix this.\nYou might want to give a look to https://github.com/portainer/portainer/pull/1069 (and try portainer/portainer:pr1069 as well) as I also fixed multiple issues related to the VIC engine.. Ah, I pushed directly into the develop branch by mistake.\nShould be fixed via https://github.com/portainer/portainer/commit/7c40d2caa9fb911c0d1d94c75a9e3d67788bd85b\n. @thiesschneider no it should not be related as the containers/stats endpoint is available since the first releases of Docker. Are you having this issue for containers stats only?\nAre you using any reverse proxy ? It might be the cause. Otherwise, please open a new issue or join us on Slack and we'll try to solve this.. @thiesschneider did you try portainer/portainer:pr1067 ?. @thiesschneider do you mean portainer/portainer:1067 ? These changes are already merged and available via portainer/portainer:develop. They'll be available in the next release as well.. Please follow the issue guideline as we'll need more information.\nFill the following:\nDescription\n\nBriefly describe the problem you are having in a few paragraphs.\n\nSteps to reproduce the issue:\n1.\n2.\n3.\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version:\nTarget Docker version (the host/cluster you manage):\nPlatform (windows/linux):\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nTarget Swarm version (if applicable):\nBrowser:. Please fill the following otherwise I'll just close this issue as I won't be able to help.\n\nDescription\n\nBriefly describe the problem you are having in a few paragraphs.\n\nSteps to reproduce the issue:\n1.\n2.\n3.\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version:\nTarget Docker version (the host/cluster you manage):\nPlatform (windows/linux):\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nTarget Swarm version (if applicable):\nBrowser:. Ok, I was able to reproduce this. The error occurs when trying to update the ownership of an existing resource from public to something else.. This was fixed with the introduction of datatables (#1460). It's available in the release 1.15.4.. Well, Portainer will show the Unused label in front of images when there is no container using this image. Your issue is different, the Docker engine tells you that this image has dependent child image which is different from being used by any container.\n\nI'm not sure what we should do here, maybe specify what the 'Unused' label means somewhere on this view.. I think that the goal here is to differentiate which image are used by containers and which one are not. I'd rather have a single 'Unused' label to avoid cluttering the UI. Maybe the 'Unused' tag should not be associated to images that have children tho, even if they are not used by any containers.. However, that would break the feature for those who don't mind child images and want to focus on running containers.\nI do think that the most interesting part of this feature for our users is to be able to isolate images that are not associated to any containers.\nThe fact that the image got children should not be related to the Unused label IMO, so we might want to update this view to give details about what the Unused label really means.. @zwx168238 could you give me reproduction steps? I'm unable to reproduce this. Do you have any error message in app? \nI believe the error message that you see in the logs is not related to images, but to services.... @redraw we're aware of this and should be fixed with the introduction of UAC on images: https://github.com/portainer/portainer/issues/2405. Could you post a screenshot? Container name is truncated when exceeding 40chars, is that limit too much/ not enough?. We're trying to avoid tooltip on hover as we need touch support.\nShould we add a + button in the column header (next to Name) for example that would trigger a full extension of the column ?\nThis could be added for each column with truncated content.. I agree with that, would you be able to open a PR for this?. Closed by #1164 . If you're talking about docker stack support, it'll be implemented via #257. \nFeel free to re-open if needed.. Thanks @1138-4EB :+1: . @1138-4EB yes, sort of. I'm thinking that the issue is related to the font size as I think that the sidebar should always be fully visible for any screen resolution with a height >= 768px.\n@liamcottam  I don't think that the solution is to get rid of the scrollbar here but rather do not make it appear.. I'll reference that in #1041 . @maxiaoxian can you try the image portainer/portainer:develop ? It should contain the fix for this.. Can you be more precise with the question?. ping @gaochunmeng . Ok I've renamed the issue.\nFrom what I've searched only, this should only be available for Docker versions >= 17.06: https://github.com/moby/moby/issues/33896#issuecomment-312352048\n. @rdxmb what are you talking about?. This feature will be implemented as a part of #461 \nAt the moment, we cannot determine if the container is located on the current node managed by Portainer (for containers located on other Swarm nodes).. As Neil recommended, try to clean your browser cache or use private navigation. Have you already used Portainer before?. @shabbirkagalwala well, we will need more details then. How did you started Portainer? What Docker version are you using? Portainer version? Can you paste the content of the Portainer container logs?. @shabbirkagalwala how many managers do you have in your Swarm cluster?. @shabbirkagalwala I'm pretty sure that this is due to the fact that Portainer is load-balanced between your two managers (both having their own database). You should deploy a service with a single replica to avoid this behavior.. ping @shabbirkagalwala . Yes, duplicate of #1042 \nA quick fix will be released soon (expect it in the beginning of next week).. @xiaoxiaohuixxh you could also try portainer/portainer:develop, a fix has been merged recently.. @liamcottam Thanks for the contribution ! We'll wait on #1044 to be merged first before reviewing this PR as it should poll the /plugins endpoint as well.. ping @liamcottam \n1044 has been merged. Could you rebase on latest develop and get some inspiration from this PR to re-implement this feature?. @liamcottam yes, it seems that something's gone wrong during the rebase. Mind closing this PR and re-open another one based on the latest version of develop?. Yeah, I'll review it soon !. Thanks for the work on this @liamcottam :+1:\nAnd sorry for the delay !. This was probably introduced by https://github.com/portainer/portainer/issues/978\nping @G07cha . Thanks @G07cha :+1: . Wrong repository. @pascalandy Well, looks like 155x55 does the trick (plus it's stated in the docs), so we will keep this for now.\nFeel free to open a PR to enhance this though (I'm not really skilled with image resolution & css).. Brillant ! Thanks @DanH42 :+1: . I'll consider this feature request differently. I'd rather not see Portainer being listed in the containers view actually because usually you don't want to manage the Portainer container. Still, its details must be accessible from somewhere else (a link on container-details from the settings view for example).\n. @tuxmeister you can simply change the ownership of this container from public to administrator.. Indeed, thanks for the report. That should be quite easy to fix.. @thiesschneider are you talking about container logs? Is Portainer located behind a reverse proxy?. I've been able to reproduce this, will fix ASAP.\nThis was introduced by https://github.com/portainer/portainer/pull/1053. @thiesschneider thanks for the report, the fix will be available in portainer/portainer:develop in a few minutes.. What do you mean? You'd like to see an embedded reverse proxy inside Portainer to serve all your applications with a simple click?. I'm going to flag this as a discussion, I'm not sure whether this should be actually implemented inside Portainer.\nping @ncresswell \n. I agree with @ElecProg point of view on this, and specifically with\n\nIf any subdomain routing to containers/services is added to Docker or Swarm Mode there should definitely be an easy way to configure it inside of Portainer as it is build into Docker and not reinventing the weel.. > so I just tought why not share some ideas\n\nYou're very welcome to do that, this is how we will build a great product.\n\nI understand if you don't want more features... :)\n\nSome ideas/features need to be submitted to discussion, you should understand that we cannot simply add every features requested by all our users, the Portainer product needs to stay coherent.. Beside the available Memory & CPU on each node of the Swarm, the Docker API does not give any information about resource usage.\nThis feature will probably be part of https://github.com/portainer/portainer/issues/943 (you can discuss it in there)\n. @swiftusa this is a known bug and has been fixed already (not released yet, it's available in the develop branch and unstable build using portainer/portainer:develop).\nWill be part of next release.\nDuplicate of https://github.com/portainer/portainer/issues/1043. @tfenster \nCan you please open an issue as well ? Please read our contributions docs for more details: https://github.com/portainer/portainer/blob/develop/CONTRIBUTING.md. A Docker image is available for this implementation via portainer/portainer:pr1084-win (Windows AMD64 build).. Thanks @tfenster :+1: . @LukeMauldin this is not related to Portainer being offline, you're actually hitting the following issues:\n\nhttps://github.com/portainer/portainer/issues/1041\nhttps://github.com/portainer/portainer/issues/1042\n\nFixes have been merged in the develop branch and will be available with the next release. In the meantime, you can use our unstable build via portainer/portainer:develop.\nPortainer do not need any Internet access except for App Templates (but you can host your own).. Thanks @liamcottam :+1: . > It would be nice if the admin image files are hidden from users.\nHow do you consider an admin image?\n\nAn image that is in use by another user/admin has to be hidden from a user's view on /images/ page.\nUnused images can be viewed by all. But if it is assigned to a container another user should not see the image listed.\n\nWhat if multiple developers are managing containers on the same host and they both want to deploy an nginx image?\n. Thanks @liamcottam :+1: . You can test this feature using the image portainer/portainer:pr1093 (Linux amd64 build).. > Within the user management, the password fields were missing and I could not see any options for ldap.\nWhen LDAP is enabled, Portainer will automatically hide password management. So that would mean that LDAP is already enabled on your instance.. @DimeOne thanks for the feedback ! \n\nNot able to login\nEven though the connection seems to work while testing it, I was not able to login to portainer using ldap. (Neither with plain nor TLS)\nIf I create the user as administrator before logging in, I receive:\n\"http error: User not found or too many entries returned (code=500)\"\nOtherwise it says:\n\"http error: Invalid credentials (code=400)\"\n\nThere was an issue that was fixed this morning where the User search configurations would not appear when using previous Portainer data (you can pull again portainer/portainer:pr1093 to retrieve the fix).\nThere User not found or too many entries returned (code=500) error is raised when the LDAP search query returns either no or too many entries. Tho without search settings, it's highly probable that this would be raised.\n\nincomplete TLS Settings\nI was trying to configure a tls connection on port 389 which uses starttls. I uploaded only the certificate chain and saved the settings, without being able to test the connection. ( Due to missing tls cert and key ?! ) Upon reloading the settings, all tls items are checked and the test connection button is active. Testing the connections returns an error, that the certificate cannot be found.\nSSL Connection\nAfter failing to establish a starttls connection, I tested an SSL connection on port 636, which failed too.\nError on failure was \"Connection reset by peer\"\n\nI was not able to test the TLS connection, indeed all 3 TLS fields are mandatory so I'm pretty sure it won't work without the TLS trio.\n\nSetting the protocol explicitly to ldaps:// within the LDAP URL is not supported either.\n\nYou don't need to specify the protocol in the URL field.\nYou can ping me on Slack for a more reactive support / communication.. @DimeOne nice to hear that !\nI used the following library for the implementation: https://github.com/go-ldap/ldap (godoc available at https://godoc.org/gopkg.in/ldap.v2)\nI've specifically used https://godoc.org/gopkg.in/ldap.v2#DialTLS to establish a TLS connection, this is using a *tls.Config object (https://godoc.org/crypto/tls#Config).\nSee the createConnection method here: https://github.com/portainer/portainer/blob/feat677-ldap-support/api/ldap/ldap.go#L51 (the whole LDAP implementation is in that file)\nThe *tls.Config object is created via https://github.com/portainer/portainer/blob/feat677-ldap-support/api/crypto/tls.go#L10-L26. @DimeOne \nSweet, let me make some changes and I'll ping you to give it a try :-). @DimeOne would you be able to join me on Slack as I've got multiple questions ? https://portainer.io/slack/. Thanks everyone for your feedback on this !\n@DimeOne Now that it's merged into develop, do you mind testing again the TLS settings ? (I did some cleanup and want to be sure I did not broke anything). You should be able to use portainer/portainer:develop.\n. @artisticcheese our instable build is not available as a Windows container yet (only linux amd64 build). Tho it will be released this week !. @beenanner if you want to use (uid=%s) you can just set the value uid in the username attribute field. This is the attribute on which the username will be matched. \n\nIs there a limit of the # of users portainer can handle on it's side?\n\nNo there is not.\n\n{\"err\":\"User not found or too many entries returned\"}\n\nThis error is raised when the LDAP search query returned either 0 results or more than 1 (probably due to incorrect search settings).\n. This was probably introduced via https://github.com/portainer/portainer/pull/826\nEach endpoint now has a Public IP attribute, when this field is provided with an IP it will always be used when accessing exposed ports.\nI think that we should fallback to the Public IP only if the IP address is not specified when the binding is created during the container creation.. @leonsoft what's the Portainer version that you're using? I was not able to reproduce this.\nI've created a container on the CLI via:\n$ docker run -d -p 192.168.1.3:8089:8080 --name nginxtest nginx\nAnd when I access the container list, I can see and access the following link: http://192.168.1.3:8089/\nI've also tried via the Portainer UI, created a container and mapped the host port 192.168.1.3:8090 to 8090 in the container and it worked too.. This is pretty strange, I'll tag this as Windows related but I do not have access to a Windows host to reproduce it.. > Bug: can't edit the public ip of the default endpoint via the gui on Windows hosts.\nHmm this should not be platform related, you should be able to edit the public IP no matter where Portainer is started. Is there an error when you try to update the default endpoint with a Public IP ?. @mmaster23 you can inspect the response of the HTTP query in your browser developer console.\nWhat version of Portainer are you using?. @mmaster23 could you open a separate issue so we can track this bug?. I'll close this issue as we were unable to reproduce this. Feel free to re-open if needed.. Duplicate of #827 . --update-order was introduced in 17.05 but it seems to be lacking from the Docker API documentation: https://docs.docker.com/engine/api/v1.30/#operation/ServiceUpdate. Great, I'll close this issue.. Hi @masahuku, this issue has been fixed via: https://github.com/portainer/portainer/issues/1043\nIt will be released soon, in the meantime you can use our unstable build via portainer/portainer:develop (Linux amd64 build). . @nerdbaggy \nWe thought a lot about adding these kind of features in the past, and only recently accepted to add the container prune feature: https://github.com/portainer/portainer/issues/904\nThis one seems even more dangerous for the user, as it can delete containers/images/volumes.\nWith the recent introduction of unused tags for volumes & images, it became easier to isolate and remove unused volumes/images. Implementing #904 might be the way to go to have a full cleaning method while keeping our users away from unwanted removals.\n@ncresswell what do you think ? . > the drop down lists only the 3 ootb networks\nWhat are ootb networks? It should normally list all the available networks.. @leonsoft are you really on Windows? Bridge network should not be available on Windows.. Indeed, I've been able to reproduce this issue on demo.portainer.io, I'll have a look.. @leonsoft can you give a try to the image portainer/portainer:pr1104 ?. @leonsoft I've created a windows archive for you, can you give a try to https://github.com/portainer/portainer/releases/download/1.13.6/portainer-pr1103-windows-amd64.tar.gz\n. An image is available for this implementation: portainer/portainer:pr1104 (linux amd64 build)\n. It's not really a matter of security, it's just that using a bind mount on the host is simply clearer as the user can check where the data is (it's also helpful for us when doing some support). Though, there is multiple ways to persist data using Docker, you might pick the one you prefer :-)\nI'll close this issue for now as I don't think there is a real advantage of using a named volume, and if anybody want to persist data using named volumes & different drivers, they can choose to go for it !\nFeel free to comment or re-open if you think that I'm missing something.. This should be part of the implementation for #734 \nI'll note this one as a duplicate and then update #734 . @sdouglasnelson I've commented here: https://github.com/portainer/portainer/issues/734#issuecomment-321964129\nFeel free to add your comment in #734 . Indeed, this is not a Portainer limitation but a Docker limitation. Though we are working around this via #855 \n\nCan't we change the increasing exposed port number in the bridge?\n\nWhat do you mean?. @gybfefe this is Docker behavior.\nYou can map your container port on a specific port on the host or use port ranges if you want more control: https://docs.docker.com/engine/userguide/networking/default_network/binding/\nI'm going to close this issue as I don't see how it's related to Portainer. Feel free to re-open / comment.. Why don't just map a specific port on your host so that you ensure the same port is always used?. You can do that from within the Portainer UI, when creating a container just click on 'map additional port' next to the Port mapping label and you'll be able to define your port mapping.. I'd rather work around this problem with features like the ability to edit a container, see #466 . @Jeraimee have you tried to follow the instructions at http://portainer.readthedocs.io/en/stable/deployment.html#without-docker ?. Can you try to run it from outside it's folder as specified in the docs ?\n./portainer/portainer -d /opt/appdata/portainer. Strange, I'll try to reproduce.. Can you try with another data location? Outside of /opt?\nLe dim. 13 ao\u00fbt 2017 \u00e0 21:28, Jeraimee notifications@github.com a \u00e9crit :\n\nInterestingly ... if I mkdir /data then run as ./portainer/portainer it\nstarts.\nIf I supply the -d option again - no joy.\nroot@pve:/opt# ./portainer/portainer -d /opt/appdata/portainer\n2017/08/13 15:27:53 no such device\nroot@pve:/opt# ./portainer/portainer\n2017/08/13 15:27:58 Starting Portainer on :9000\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1111#issuecomment-322062009,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBQx1vGZ-3oq6QG46j0CRLpJyLPFqks5sX05TgaJpZM4O1s7L\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. Seems to be related to your system. Anything specific with your /opt ?\n\nLe dim. 13 ao\u00fbt 2017 \u00e0 21:42, Jeraimee notifications@github.com a \u00e9crit :\n\nWorks with:\n2017/08/13 15:41:21 Starting Portainer on :9000\nroot@pve:/opt# ./portainer/portainer -d ~/p-data\n2017/08/13 15:41:32 Starting Portainer on :9000\nNow I'm really confused.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1111#issuecomment-322062908,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBdXffLuSFm-fx91XXPn_M6eaMA__ks5sX1GYgaJpZM4O1s7L\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. Glad you solved your issue !. @ghenry are you asking to remove the username attribute field and replace it with a single filter?. @ghenry The current implementation allows you to specify any port, what would you like to see here?. Agree. I accept PRs for such small changes, should be quite easy to replace.. @ghenry We cannot force users to use TLS/SSL in their LDAP setup, that's why we need to support both options.. Unfortunately I don't have a lot of experience with LDAP/AD. But I'm not sure why they would deprecate TLS support.\n\n@DimeOne what's your input on this?. @ghenry what's the difference between these 2 filters ? Result should be the same, no ?. I'm thinking that this is part of your Docker setup and should not be integrated in Portainer. You should either manage to do it using the *_proxy env vars as specified by @WTFKr0 or you can host the templates next to Portainer (http://portainer.readthedocs.io/en/stable/templates.html#build-and-host-your-own-templates) and then update Portainer settings to point at these templates.\n@ncresswell what's your view on this?\n. @Madko are these the logs of the Docker daemon? Can you paste the logs of the Portainer container?. You can use docker logs <portainer_container_name> to retrieve the logs from the container.. @Madko no, you need to pass the -e flag to the docker command, not to the portainer command:\ndocker service create --name portainer \\\n--publish 9000:9000 \\\n--replicas=1 \\\n--env https_proxy=http://10.156.0.1:8080 \\\n--constraint 'node.role == manager' \\\n--mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n--mount type=bind,src=//opt/portainer,dst=/data \\\nportainer/portainer -H unix:///var/run/docker.sock\nBasically, everything before the image name is related to the Docker command while everything located after the image name is related to the binary inside the image (here, the -H unix:///var/run/docker.sock is a Portainer flag). . Hello, oauth would be a really nice enhancement though the contribution would require some skills in JS/Angular & Golang.\nYou can have a look to the LDAP authentication implementation in https://github.com/portainer/portainer/pull/1093. No ETA on this yet.. Not at all, feel free to open a PR.. Closing this issue as this feature is now available via the External authentication extension (requires Portainer version >= 1.20.2).. Duplicate of https://github.com/portainer/portainer/issues/1267. @GrumpyMeow this issue has been closed, for any question feel free to use our community support channel at https://portainer.slack.com. Not sure if that's really a Portainer related issue. If you cannot access internet from the Portainer container you'll probably cannot access internet from any other container. This is more related to your Docker environment setup.\nI can recommend to deploy the templates as a container in the same Docker network as Portainer. Have a look at http://portainer.readthedocs.io/en/stable/templates.html#build-and-host-your-own-templates and then you can go into Portainer settings to set your templates URL.. @zhoulouzi can you use your browser console to retrieve the response of the HTTP query on the api/endpoints/<ID>/docker/nodes endpoint ?\n. From what I can see, the Docker API gives the 0.0.0.0 IP address. This is strange, but it's not a problem with Portainer. Rather an issue with Docker, I'd recommend to open an issue inside Docker repository.\nI'll close this issue.. Glad you solved your problem, I'm going to close this issue.. Agree, the re-create & edit/duplicate should not be available when inspecting a service container.. @blackholegalaxy thanks !\nI'd like to see this added in Portainer as well. Currently, as you can't specify any logging driver, you can't send your logs to fluentd using Portainer UI.. Indeed, we're trying our best to give the users the equivalent of the CLI.. Ping me on Slack if you need some instructions to contribute on this.. Here is a sample of the French version for the dashboard:\n\nAnd the ability to set the language in the Portainer settings:\n\n. @soulteary We'd accept any contribution on this topic ! If  you need any pointers, feel free to ping me here or on Slack.. Indeed, that's because we use $sanitize on the password. This should be disabled when using LDAP authentication. I'm thinking this should be done for the username as well.. @youlu-cn can you try with the image portainer/portainer:pr1136 (available on Linux amd64 only) ?. An image is available for this implementation via portainer/portainer:pr1136 (Linux amd64 build). @ladude626 Can you tell me what is not working? Any error?. @ladude626 could you check the content of the response in your browser console?. This will be available with #461.\nIt aims to solve that issue by aggregating all the containers from all the nodes in a cluster inside the containers view.\nI'll close this issue.. @masudak Can you open the browser developer console and check if there is any error ? Also where is this error displayed 'Cannot read property 'URL' of undefined' ? In a red notification message?. @masudak is it possible for you to give us the all the information about the container you wanted to edit/duplicate? All the parameters that you put in the container creation view? Or was it a container created from the CLI ?. Right this might be problematic indeed, I'll investigate a bit. Thanks for the details @masudak \nEDIT: normally, if the registry is not known by Portainer, it should default to Dockerhub.. I've created a PR to solve this issue (#1143). It's not really a fix as we cannot create a container from an unknow registry using the current registry management implementation in Portainer. \nInstead, this PR will display a warning message and prevent the creation of the container by disabling the start container button.\n@masudak @WTFKr0 what do you think about this?. @WTFKr0 If we default to Dockerhub with the full path in the image text input, this will not create the image expected by the user. So the user will probably have to create the registry right after that.\n@masudak I'm not keen to support these kind of options on the CLI. I'd rather have CLI flags that alters the status of the Portainer binary not the data. We can still use the HTTP API to automate the creation of registries.\nI'm thinking that there might be a way to circumvent the existing registry implementation when duplicating/editing a container, I can have a look.. #1143 has been merged as a temporary measure (container duplication is still considered experimental) but I'll keep this issue open as we should find a way to use unregistered registries as well.. Thanks for the report @knall0 \nWe're currently reviewing the UX/functionalites regarding how you specify images inside Portainer, see the discussion in #1434. Doing an export of a Docker service would not be really hard to achieve. Though, I don't think we should translate that to docker-compose files (or stack files) as it might be really complex.\nHaving services defined in a compose file and using the compose support feature (work-in-progress at #959) would be the way to go here.\nI'm tagging this as a discussion as there might be interesting use cases that would not be covered via compose support.. Duplicate of https://github.com/portainer/portainer/issues/730. I'll close this and reference it in https://github.com/portainer/portainer/issues/1055\nIdeally, I'd like to not have the scrollbar being displayed (at least for resolutions >= 768px), this might be related to the sidebar text font size.. Indeed this was introduced in https://github.com/portainer/portainer/pull/1009 after discussion in #357 \nI was not aware of the performance issue related to the system/df call. I wonder if we should disable entirely this feature or just set a switch to enable it (disabled by default, available in the settings or volumes view).\n@ncresswell what do you think about this?\nEDIT: another way to do so would be to query the container list and check all images against all the container images.. @WTFKr0 the issue is not the time to wait here, but the implied impact on the performance of the underlying system.\nI think we should query all the containers and all the images, then compare all the containers images to the image list to check which is in use or not. I'll push something soon.. @CyrilPeponnet could you give a try to portainer/portainer:pr1144 ? I've replaced how unused images are verified.. I'll file this as a bug as it's introduced by the current behavior of Portainer. Though I wonder if we should allow the deletion of the default admin user.. @ncresswell we do not allow username edition in the current version. Should we add the ability to edit usernames ? Or when initializing the default admin user on first Portainer startup should we give the ability to the user to name the administrator account ?\nIMO, second option is best.. @DanH42 we're going to go for the ability to set your own username during the administrator account init on first startup and we're going to prevent the deletion of this user.\nThis implies that I will not merge your PR that replace the ID check by the username check as it will not be necessary.\nThis will not fix your current issue though. I've got a work-around for this, I'd rather explain it on Slack if you want to join and ping me: https://portainer.io/slack/. Rejected after discussion in #1145 . An image is available for this implementation via portainer/portainer:pr1144 (Linux amd64 build). I was able to reproduce this, somehow the response is the same but the response code is different (got 200 when using the local endpoint and 409 when using a remote endpoint).\nThough the error message is the same, the displayed notification should be the same as well. I'll investigate a bit more.. I think that this issue is related to https://github.com/portainer/portainer/issues/1167\nWe'll try to check if solving https://github.com/portainer/portainer/issues/1167 solves this issue as well.. This is a known issue and will be solved when solving the issue raised in #1145 \nWe will prevent the deletion of the admin user.. This looks good to me and is totally functional.\nI'm still thinking about how this should be merged like this though. \n\n\nIf I merge this right now, I cannot update the format of the public templates to this new definition as previous version of Portainer will not support it.\n\n\nBy keeping the old format for public templates, it means that every new user of Portainer will see this deprecation notice when they will want to deploy a template. I'm pretty sure this is going to confuse them.\n\n\nI'm thinking the deprecation notice should be removed from the templates view. Instead we will need to communicate on this upon release and tell people to update their templates to the new format (only the affected part, e.g. volumes here). The support for the old format will not be removed yet but will be in a future version.\n@overra what do you think?\ncc @ncresswell . Thanks @overra :+1: . @g-arjones for any bug report, please open a new issue and give us more details.. Portainer retrieves information from the Docker API. Unfortunately, this information is not available in the Docker API, so it will not be possible to add it in the volumes view.. I think that this might be added in the monitoring and stats plugin planned to be add in Portainer, see #943 \nAt the moment Portainer do not have any agent and thus any way to interact with the underlying system.. @subzero79 agree, I'll re-open this issue.. I'd like to notice that we need to tackle this one with extra care as the SystemDataUsage (/system/df) operation can be really slow on some environments. This should not be enabled by default IMO, rather have a switch to display the size of volumes.. Really depends on the environment, we where using this feature previously but had to remove it as it impacted the loading of the volumes view.\nSee https://github.com/portainer/portainer/issues/1144. This is a known issue, see #322 . Closed in favor of #1177\n. I think that the ability to deploy a container to multiple endpoints in a single action could be a great feature.\nTho this could be automated quite easily by using the HTTP API.\nNot sure about the 'all endpoints' option in the endpoint selection tho, I'd rather see an endpoint multi selector in the container creation view.\nThe ability to group endpoints could be nice as well but we should watch out to not clutter the UI in the tables views.\n@ncresswell what's your thoughts on this?\n. Hi @palmerabollo \nHave you tried to bind mount the socket in writable mode?\nyml\nportainer:\n    image: portainer/portainer:1.14.0 \n    command: --no-auth -H unix:///var/run/docker.sock\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    deploy:\n      mode: replicated\n      replicas: 1. Looks like it's indeed related to your setup: \n\nhttps://github.com/wodby/docker4drupal/issues/101#issuecomment-288367796\nhttps://github.com/docker/for-mac/issues/1396\n\nCan you try to remove the portainer/portainer:1.14.0 image and pull it again?. Duplicate of https://github.com/portainer/portainer/issues/623. I agree as well, we need to have a simple UX for CPU limit & reservation.. What about using a slider + input combination ? . Yes, an input of type range combined with a text number input.\nSomething similar to:\n\nYou could have a look at https://github.com/angular-slider/angularjs-slider for an alternative to the simple type range input.\nI'm not really sure about this tho, I'm just wondering if it may work. I think that a slider is touch friendly, tho I'll ping @ncresswell for his opinion on this.\n. @WTFKr0 any chance to rebase/re-open as another PR ? I can see the result of the previous commits and it's quite confusing to do a review right now.. Thanks @WTFKr0 :+1: . Thanks @sylvainmouquet :+1: . I agree on the fact that events should only available for administrator users.\nAbout images, we thought about it and it does not really make sense to add access controls on images. Images are global resources available for all the users on any endpoint. If you want to restrict access to images, you should restrict the access to the image by using a private registry.\nAs an exampe, using Portainer user access control mechanismI do not see how multiple developers would be able to use the nginx:latest image if one of them just make it private.\nNetworks fall in the same category in my opinion, how could multiple users should be able to share/use the same networks (take bridge as an example).\nI'll keep this one open to track the evolution related to the events access restriction. Feel free to discuss it as well.. I'm pretty sure I saw this behavior before... are you using a local Portainer endpoint (e.g. /var/run/docker.sock ?) Could you try it as well with a remote endpoint?. Sure, thanks for confirming it. We'll fix ASAP !. Hi @jammsen \nI was not able to reproduce the issue. I tried to pull the image, it's working well. I've then tried to create a container using the didstopia/7dtd-server image and it's working as well.\nSee screenshots below:\n\n. @guntram\n\n. I'll try to reproduce again but unfortunately the error message comes from the Docker API not from Portainer.. Closing as unable to reproduce. Feel free to re-open if needed.. Can't you just specify Administrator in the user field?. As we're limited by the Docker API usage here, we need to figure out how this can be done via the Docker API (check if it's available when using the Docker CLI as well).. It's done in the EndpointController but not in the EndpointsController.. @tymik No ETA on this yet. An image is available for this implementation: portainer/portainer:pr1173 (Linux AMD64 build). A database migration is triggered but the Settings object is not stored in the database in DBVersion 2. Persistence was introduced in 1.13.2 only (so any version >= 1.13.2 & < 1.14.0 should do the migration without issue).\nThis error might appear for version 1.13.0 & 1.13.1.\nAs a workaround, you can upgrade to version 1.13.2 first and then upgrade to version 1.14.0.. @schmunk42 just to confirm, you had this issue when upgrading to which version? Going from 1.13.0/1 to latest?. #896 was related to templates.\nIndeed, there is no support for yet for restart policies in services. Will track it as an enhancement.. @StefanScherer brilliant ! Feel free to open a PR for this when you think it's ready :-). Hi @kevincam3 \nWe will need more information to help you. How did you install Portainer? How do you start Portainer? What are the errors in the console?. @kevincam3 did you went through the admin user creation & endpoint initialization steps when first accessing Portainer? Did you already used a Portainer instance locally before?\nCan you restart Portainer and try to access it in private session mode (or after clearing your browser cache) ?. @kevincam3 looks like I cannot display the image.\nSo, did you use the \"Manage a remote Docker instance\" option?. You'd need to expose the Docker API on the TCP socket first and then try localhost:2375. See https://docs.microsoft.com/en-us/virtualization/windowscontainers/manage-docker/configure-docker-daemon for more information about how to do this.\nYou might want to join us on Slack for some live support: https://portainer.io/slack/\n. Nice !\nWe'll document it to make this clearer.. @G07cha Have a look at the TaskTemplate.ContainerSpec.Mounts field in the ServiceCreate operation: https://docs.docker.com/engine/api/v1.30/#operation/ServiceCreate. You should probably try with https://my.host.name instead of https://my.host.name/v2/\nI agree, we will try to test the connectivity before creating the registry.. @zwx168238 are you using njdocker1.nj.thundersoft.com as the registry URL and public/rsyslog:1.0 as the image you pull ?. @zwx168238 you need to create a registry first using njdocker1.nj.thundersoft.com and then select that registry when creating a container / pulling an image and use public/rsyslog:1.0 as the image name.. @zwx168238 and this is not working? Feel free to ping me on Slack to discuss this.. @asasmoyo Nobody is working on this yet, feel free to open a PR :-). @asasmoyo yes, that should be enough for a check.. I'll close this and mark it in the table enhancement issue: #568 \nNote that in the develop branch, a change has been pushed to allow you to expand the container name column (see https://github.com/portainer/portainer/pull/1164). Woops ! Thanks @adriankirchner :+1: . Ok, great ! Please have a look at my comments, there are a few things I'd like to change.. @StefanScherer \n\nI compiled the PR and tested it on Windows.\nFor my tests I don't use a mapped volume, so I have to enter the admin password. After logging in for the first time I see this dialog to select where to connect.\n\nThis is strange, if you used the -H field on the CLI, you should not see the endpoint init. view. I'll have a look at this.\nEDIT: ~I was able to reproduce this, I'll push a fix ASAP~. It was introduced in https://github.com/portainer/portainer/pull/1160\nand has been fixed via https://github.com/portainer/portainer/commit/be4f3ec81d57a367c12f1c0155d9e2b56ed99b0d\nCould you test again after the rebase? We need to ensure that the npipe error cannot be reproduced.\n@friism could you rebase on the latest version of the develop branch?. Thanks for the details @StefanScherer !\nAbout the terminal execution, I think that the error is raised by https://github.com/portainer/portainer/blob/develop/api/http/handler/websocket.go#L125\nThis file should probably be adapted to use Winio as well.\nThe inconsistent communication error with the named pipe are strange tho.. @friism \nConflicts have been introduced with the recent changes, mind doing a rebase ?. @StefanScherer \nI'm not really keen on adding the retry workaround, the named pipe support feature should be integrated only if it is stable.\n\nThe pipe isn't busy, it just cannot be found so the winio function returns. Maybe this should be fixed in go-winio, but for now this makes Portainer work much more stable with the named pipes.\n\nI'd say the way to go would be to report that issue first in the go-winio repository and discuss it with the maintainers. Would one of you be able to file an issue there?. Great, let's wait for an update on this issue.. I've updated the status to pending while we await for an update in https://github.com/Microsoft/go-winio/issues/67. Thanks for the update @StefanScherer \nDo you know if named pipe mapping will be available to Window 10 users ?. Ok, let's get back on this.\nI fixed a compilation issue related to duplicate code (probably a merge gone wrong).\n\nEnter a password for user admin and then try to use the local connection. Unfortunately I always get an error \"Fatal: Invalid request data format\"\n\nI believe I just fixed this.\nAs we don't have any input yet for https://github.com/Microsoft/go-winio/issues/67, I've also pushed the retry workaround that @StefanScherer introduced via https://github.com/portainer/portainer/commit/2263c5590af15bc0fc150c548856b78d846ba479\nEDIT: The workaround should probably be added in websocket.go as well: https://github.com/friism/portainer/blob/add-npipe-support/api/http/handler/websocket.go#L127\n@PatrickLang \nI've just created a new image for this based on our latest branch, it is available via portainer/portainer:pr1186-windows-amd64. Could you give it a try ?\nWorth noting that this PR cannot be merged in this state as it will not compile on Linux (platform dependent code should be isolated).\n. @StefanScherer can I use the latest version of microsoft/nanoserver image?\nAlso, could any of you confirm that the container console feature is working?. > If you are running Windows Server 2016 (10.0.14393.x) then you cannot run the microsoft/nanoserver:1709 container.\n\nTo be able to run this you need Windows Server 1709 (10.0.16299.x). The kernel version of host and container must match. Only with Server 1709 + HyperV feature enable you are also able to run older 10.0.14393 images with docker run --isolation hyperv ....\n\nSo, let's say I would like this to be part of our next Portainer release, what information message would I need to show to the users? Can I still use microsoft/nanoserver:latest or is microsoft/nanoserver:1709 mandatory?\nIf I understand correctly, this feature woud only be available for Windows Server 1709 (10.0.16299.x) users? . @StefanScherer would there be any con to use microsoft/nanoserver:1709 instead of microsoft/nanoserver:latest ? I'd like to avoid having too many images to maintain. Will latest point to 1709 at some point?\nWe could also merge this, or keep it open, until it can affect a wider userbase.. Well, there is still some work to do before this PR can be merged but I agree with you, it'd be neat to have this feature implemented even if it will be only available to a specific set of users.\nPing me when your blog post is ready, I'm keen to add 1709 support :). @olljanat The implementation of this POC relied on the microsoft/go-winio library. We've spotted an issue during our tests which has still not been fixed: https://github.com/Microsoft/go-winio/issues/67\nI believe that we should wait for an update on this topic before going further.. Closed in favor of #2018 . Sorry @twityde a bit busy right now, will try to review this (functionaly at first) next week.. ping @algirdasp . Hey @troychn\nDid you try to start another service using the CLI ? I think that this issue is related to Docker and not Portainer deployment.\nSeems to happen occasionally when managing services: https://github.com/moby/moby/issues/29087. I've open https://github.com/portainer/portainer/issues/1198 regarding the show all containers filter state.\nI agree as well on the addition of custom filters, that would be a great addition.. I agree, that would be the recommended way to setup the admin password in a Swarm cluster.\nTo support this, we only need to add support for a --admin-password-file that will read the password from this file.\nContributions welcome ;-). Hi @stevelacy \nWhen running Portainer with the following command: \ndocker service create \\\n    --name portainer \\\n    --publish 9000:9000 \\\n    --constraint 'node.role == manager' \\\n    --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n    portainer/portainer \\ \n    -H unix:///var/run/docker.sock\nYou're telling Swarm to deploy a Portainer instance on each one of your Swarm manager node. You're not actually persisting the data of the Portainer container outside of the container (see http://portainer.readthedocs.io/en/stable/deployment.html#persist-portainer-data).\nPortainer uses a filesystem database that is by default embedded inside the Portainer container. With this service create instruction, you are telling Swarm to deploy one container of Portainer on each manager of your cluster, each instance with its own embedded database. When you query the Portainer instance via Swarm, it will automatically redirect you to one of the Docker instance deployed in the Swarm and thus, you'll hit a different instance (with a different database) for each request.\nWhen deploying Portainer as a service inside a Swarm cluster, we recommend the following:\n\nPresent a shared filesystem to all your manager nodes where you can persist the Portainer database (nfs, glusterfs...)\nDeploy a single replica service in your Swarm manager (multiple Portainer instances cannot share the same database at the moment, see: https://github.com/portainer/portainer/issues/523) and persist the data in the shared filesystem. Something similar to:\n\ndocker service create \\\n    --name portainer \\\n    --publish 9000:9000 \\\n    --replicas=1 \\\n    --constraint 'node.role == manager' \\\n    --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=/path/to/shared/filesystem,dst=/data \\\n    portainer/portainer -H unix:///var/run/docker.sock\nThis will ensure only one instance of Portainer is running on a manager at any time. If the Portainer instance goes down or the manager node where Portainer is running goes down, Swarm will automatically re-schedule a new Portainer container inside the cluster and ensure high-availability.\nI'll close this issue, feel free to re-open it if you think something is missing. You can also comment in the related issue https://github.com/portainer/portainer/issues/523 if you want to clarify the subject.. Hi @tuan3w \nAre you using a local endpoint ? If so that bug was already reported (https://github.com/portainer/portainer/issues/1167) and fixed via https://github.com/portainer/portainer/pull/1192\nYou can give a try to our unstable build where this bugfix is merged to check if it solves your problem via the image portainer/portainer:develop (only for Linux amd64)\nI'll close this issue, feel free to re-open if this do not solve your problem.. Hi @Routhinator \nThis is probably a Docker networking issue as the Portainer container do not have access to the VPN network. I'm not sure how did you configure that mesh VPN ?\nYou can join us on https://portainer.io/slack/ for some live support if you prefer.. Hey @nenadilic84 \nThanks for the contribution ! I just had a quick look at your PR, it seems that you expect the file to contain the encrypted password for the administrator user.\nThe whole point of using secrets is to expose the password unencrypted in a file.\nThe goal is to do something like this:\necho $PORTAINER_PASS | docker secret create portainer_password -\ndocker service create --name portainer \\\n  --secret portainer_password \\\n  -p 9000:9000 \\\n  --mount type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock \\\n  portainer/portainer \\\n  --admin-password-file '/run/secrets/portainer-password'\nAs you can see here, $PORTAINER_PASS is the unencrypted password. I don't think that's necessary to encrypt it in the secret & in the file.. Hey @nenadilic84, have you tested this? I was unable to login using this new flag either by using a secret or by mounting my password file into the container... I've tried to figure out where the error comes from but I don't know.\n. Woops, you're right, sorry for that.\n@nenadilic84 could you send me the steps that you used to test it?. Thanks @nenadilic84 :+1: . Hi @sylvainmouquet \nHow was Portainer deployed in that cluster? How did you upgrade it?\nFeel free to ping me on Slack so that I can help you with that issue.. Can we close this now?. @sylvainmouquet this is strange, are you using a specific volume driver? I'm able to start Portainer without issues using the following commands:\n$ docker volume create portainer_data\n$ docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer. @sylvainmouquet have you tried to delete that volume and re-create it ? Maybe it contains invalid data.. An image is available for this implementation via portainer/portainer:pr1221 (Linux amd64 build). Closed in favor of #1222 . Thanks for the reproduction steps, I'll try to reproduce.. I was able to reproduce, I'll investigate.\nEdit:\nIssue is related to https://github.com/portainer/portainer/blob/develop/app/components/endpoint/endpointController.js#L57\nThe $filter('stripprotocol') should be the last instruction in that block (after endpointType check).. @si458 fixed ! It should be available in portainer/portainer:develop if you need it.. @WTFKr0 we think that the 256MB steps is good but only if provided with an input to enter any number next or beside it. Could you try this?. @WTFKr0 sorry for the late update, the input is a nice addition ! It's OK now, could you clean the code?. I applied small changes:\n\nI reviewed the layout and specified the unit MB for memory limit & res in the legend\nChanged the memory max calculation method\n\n\n\nAs you can see here the max memory was not really coherent in my environment and now makes more sense.\n\n. Thanks @WTFKr0 :+1: . Woops, I've shipped invalid libraries inside the latest release. I'm currently re-uploading the images & artifacts.. @thomasgilgenast could you pull the image again ? It should be fixed now.. Cheers, thanks for the report !. I'm not able to reproduce this, see the screenshots below. Could you give me more precise steps to reproduce?\n\n\n. Thanks for the report, we will investigate.. @lucamaro I'll open a separate issue to support this in stack deployments.. I'll close this issue and refer it in #317 . ping @ncresswell what's your thoughts on this?. Not sure what is the issue here, I can see the templates when using this custom templates source.\nMaybe try to force refresh using CTRL + F5?\n\n. @sarjk \nDo you hit the Save button to update the settings?. You don't need to restart the container actually. I'll close th issue, feel free to reopen if you're having any troubles. . @benyanke stacks are only supported when managing a Swarm environment. They'll only be available if Portainer is connected to a Swarm enabled endpoint.. Sorry for the late update ! Thanks for the work @opera443399 :+1: . @opera443399 Do you mean endpoint instead of entrypoint?\nIf that's the case, you can follow #461 as I think this is what you want.. Hi @leonmcar1 \nThis is not the way to set ownership. Ownership on Docker resources must be set from within Portainer, either using the Portainer UI or Portainer API.\nUsing the Portainer UI for example, you can go to the container creation view (containers > add container) and then use the Access Control section to set the ownership of a container.\nI'll close this issue, feel free to re-open / comment if you need help with this. . Hi @fabianomenegidio \nA better solution IMO would be to use the --templates flag (http://portainer.readthedocs.io/en/stable/configuration.html#use-your-own-templates) when deploying your Portainer instances or use the HTTP API post deployment to update the settings.\nNote that even if the --templates flag is noted as deprecated in the docs, you can still use it and we're still discussing its deprecation.\nI'll close this issue, feel free to re-open if you have other questions or need more indication.. Thanks @mrts ! Never heard of Clair before, looks great.\nI'm going to close this issue and refer it inside #713 which I think is related. Feel free to comment in #713 \n. In the container-details view, you can already check the volumes associated to the container.\nTho I agree, it could be nice a nice addition to the volume details view to see which containers are using the volume.. Hi @yogeshVU we already have an open issue for this feature request, have a look at #461 . Thanks for the report @lrezende \nIndeed, a check for the admin user existence should be done as it is done for the endpoint initialization.. Hi @adoo123 \nI'm not sure that I understand your problem completely. Are you trying to create a service and attach it to the ingress network?\nYou cannot attach a service to the ingress network which is a network reserved for Swarm internal usage. \n\nAny service that publishes a port is connected to the ingress network. \n\nSee here for more details: https://github.com/moby/moby/issues/33878#issuecomment-312524929. @vidschofelix yes you can use the connected network table to join/leave any network without re-creating a container.\nAre you reporting an issue with the ability to re-create containers and network selection?\nAlso ping @adoo123 . @vidschofelix interesting, could you open a separate issue for that bug?. ping @adoo123 \nDoes the discussion here solve your problem?. Closed due to inactivity.. What version of Portainer are you using? Could you paste the output of the Portainer container logs?\n. @vasilvestre use docker logs <PORTAINER_CONTAINER_NAME>. @guyht might be a browser cache issue, can you try within a private navigation tab in your browser?\nping @vasilvestre . ping @guyht @vasilvestre . Closing this issue due to inactivity.. Hi @wardcomm \nCould you give us more details ? What do you mean about no data?. Do you have any error message in the UI? Do you have SELinux enabled on your host? If so, could you try to start Portainer using the --privileged flag?\nE.g.: docker run --privileged -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --admin-password '$2y$05$kKX3w4cdWZms1zppyHIza.P1ArKizvVg8xG9/Q86OlFKHj0rrn5Ha'. Could you try to visit the UI using the private navigation mode of your browser?. I can access the UI but I don't have the credentials to connect.\n\n. I'm also getting invalid credentials with the credentials you provided.\n\n. @wardcomm \nStrange, might be a browser issue as I can access it.\nAfter authentication:\n\nAfter selecting 'Local' endpoint:\n\n. @wardcomm Just tried with firefox and it's working as well. Could you try to use a private window within Firefox?. Ok so that's a browser cache issue, I'm still working on that. In the meantime, clearing your browser cache should solve your problem.\nI'll close this issue, feel free to re-open if needed.. I think we should only focus on target here to avoid cluttering the UI? @ncresswell thoughts?. @jjesudassbah this will be part of another issue :-). Thinking about it, I'm not sure that this should be part of Portainer. You could have a reverse-proxy in front of your Portainer instance that could limite request rate for example... or use another specialized software to do so.\ncc @ncresswell . @G07cha what about starting with a simple implementation using defender?. No ETA on this yet.. We could probably use labels on resources created outside of Portainer to filter access to Docker resources indeed. Note that this should work with all the Docker resources where UAC can be applied, not only services.\nIMO, when the equivalent of docker stack deploy will be available inside Portainer (see WIP #257) the UAC should be applied directly using the actual system instead of labels.\nThere might be some cases where the user would still need to use external tools (Docker CLI, docker-compose...) so that evolution could be handy.\nLinked to #960 . @ricardona are you talking about this issue? https://github.com/portainer/portainer/issues/1691\nWith the recent introduction of #960, I believe that we could add the following labels to any resources:\n\nio.portainer.uac.public=true to define the resource as public\nio.portainer.uac.teams=1,2,3  to define the resource as restricted to the team ids 1, 2 and 3\nio.portainer.uac.users=1,2,3 to define the resource as restricted to the user ids 1, 2 and 3\nio.portainer.uac.users=1 to define the resource as private associated to the user id 1\n. @SatvinderSinghNC4 we're still working on this, but I believe it should be something like:\n\nlabels:\n  - \"io.portainer.uac.teams=teamNameA, teamNameB\"\nThat would apply a restricted policy for the teams named teamNameA and teamNameB. . @SatvinderSinghNC4 this is not available yet, we're working on this but it is not released yet.. Actually, this is a bug related to the UI state management. The version number displayed is persisted in the browser cache, you just need to either clean your browser cache to update it (or use a private navigation session).\nI'm working on a overhaul of the state management that should fix this.. @Duvel no ETA yet, feel free to open a PR to quick fix this issue. . As commented in https://github.com/portainer/portainer/issues/235#issuecomment-312409865, yes and yes ! This is definitely something we want to add.\nWe'll track fine-grained access control in this issue.\nShould also solve #69 once implemented.. @filipedf no ETA yet, although this is in our priority list.. @olljanat the idea is to have a finer control than just a read write (can use container console, can remove container, can  start container...)\nAlso, we don't want to have it simply set in the front-end, access control must be set in the API too.. Hey @schmidlop \nIt seems that your Docker engine is not exposing the Docker API over TCP (from the line \u251c\u25001134 /usr/bin/dockerd -H fd://). This is probably why Portainer cannot access it using the 172.31.46.227:2375.\nI notice that you're running a Swarm cluster, why not deploy Portainer as a service in the Swarm?\nYou can use the following command to deploy Portainer as a service:\ndocker service create \\\n    --name portainer \\\n    --publish 9000:9000 \\\n    --replicas=1 \\\n    --constraint 'node.role == manager' \\\n    --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n    portainer/portainer -H unix:///var/run/docker.sock\nNote: ensure that the Docker socket is available on your manager node at /var/run/docker.sock.. Hi @Southclaws \nI'm not able to reproduce this bug.\nHere is the steps I followed:\n\nCreate a simple nginx container (nginx image, no port mapping)\nInspect the created container\nClick on Edit/Duplicate\nClick map additional port\nEnter the values 8080 (host) and 80 (container)\nHit deploy the container\n\nThe container is successfully replaced and the port 80 is exposed on the port 8080 on the host.. @paresy could you inspect this container using our inspect feature and copy/paste the text content?. @Duvel could you give us the command you use to deploy Portainer as a service? By default Swarm should reschedule the service automatically.\nThanks for the logs but they do not give any indication related to a potential crash. What is the output of docker service <PORTAINER_SERVICE_NAME> ps after a reboot? And the output of docker ps -a ?. @Duvel could you give a try using the latest version? Use linux-arm-1.14.3. @Duvel \n\nI find very often that I have to manually rescale/restart the portainer service to get portainer started\n\nDoes this happens 100% of the time? Do you have this issue with other services?. > Some other services have also troubles\nI would investigate on the Docker/Swarm side first and check if everything is OK with your setup first.\n\nA swarm with a single node isn\u2019t the normal use case\n\nIt is actually a correct use case, not sure that a health-check would help here. A health-check requires a container to be running to be able to check health status. Normally, Swarm should automatically re-schedule containers.\nI'll close this issue for now as I don't think this is related to Portainer... feel free to comment here or re-open if you find a lead that points to Portainer.. Hey @rgl \nI notice this myself when using Windows containers. I cannot reproduce this on Linux containers. Can you confirm this?. @rgl got a container that I could re-use to do some tests?. Oh don't worry, I was able to reproduce this using the one liner:\nfor x in {0..8}; do for i in {30..37}; do for a in {40..47}; do echo -ne \"\\e[$x;$i;$a\"\"m\\\\\\e[$x;$i;$a\"\"m\\e[0;37;40m \"; done; echo; done; done; echo \"\". @G07cha if you want to contribute on this, let's start with a raw response first and we'll check how we can enhance it after that.. We solved that issue by upgrading your Docker setup to 17.09 right? I'll close this issue as this was also not working when you used the Docker CLI, meaning that was related to your Docker setup and not Portainer itself.\n. I'd accept a PR for that, I believe it is fairly simple to implement.\nWe might be able to add this in the template format with something similar to:\n{\n hosts: ['db-static:86.75.30.9', 'web-static:86.75.30.10']\n}. Closed by #1307 . The master branch is the stable version of Portainer.\nAs @WTFKr0 specified, the feat807-i18n is currently marked as a work-in-progress, meaning it's not fully functional yet.\nIt contains some work on the internationalization of Portainer but unfortunately I'm working on other priorities right now so I cannot work on it. Also, this task is really time consuming as it requires to insert placeholders for translations in all the HTML files (and that's only for the front-end).\nI'd love to see Portainer translated in multiple languages and I believe this will be possible once the implementation in #1134 is done.\nI'd also accept contributions based on the changes I've started to work on in #1134. Hi @daiaji \nIt's not abandonned, it's just not in our priority list at the moment. Work on feat807-i18n was originally done by a contributor, we do accept contributions on this topic.. Indeed, we should be able to authenticate against a healthy endpoint. We should figure out the UX for this first, should we prompt to select another endpoint if the primary is not available? \ncc @ncresswell what's your thoughts on this?. @ransunak I believe that we can close this issue as the user is now redirected to the home view instead of the endpoint dashboard view after authentication.\nThe user can then select the endpoint he wants to manage from the home view.. Yes, we should re-use the configured registry if the registry URL specified in the template matches a registry that is defined in Portainer.. @kaotika no ETA yet.. @Codelica yes, this is still considered although no ETA yet.. Actually, this issue is addressing another authentication problem: the fact that Portainer cannot authenticate against private Docker image registries when deploying a template.\nIt's not related to the fact that Portainer cannot clone a private git registry when using a stack template.\n@mallchin mind opening a new issue for this?. There are two problems to tackle:\n\n\nUsing Docker images hosted in private Docker registries (behind authentication) inside templates (1)\n\n\nUsing stack files hosted in private Git repositories (behind Basic/SSH auth) inside templates (2)\n\n\nThe discussion in here have been mixing these two topics, I want to separate these issues. We'll tackle and discuss (1) in this issue, please open a new issue for (2).. What if the endpoint of the worker is not available? The UX is quite bad indeed, I reckon that's a workaround but right now, I'd rather not have this implemented this way.\nThe work on #461 is definitely the way to go here, though as our dev funds & resources are limited, it's not a priority at the moment.\nI'll close this issue as this is not the way we want it to be integrated in Portainer. I know that this is a convenient solution to you but you'll have to wait on the equivalent of #461, sorry.. Hey @opera443399 \nThis is definitely the right way to open an issue and PR. Though, to avoid any work that would not be merged (such as this one), the usual flow is the following:\n\nYou open an issue and report a bug or ask for a feature request\nWe discuss it (this step is important) both functionally and technically and we agree on a solution\nYou (or any contributor) open a new PR with an implementation for the bug fix / feature request\n\nAs you can see here, you went straight from step 1 to 3 without asking for our input... we could have pointed you to the fact that the functional solution was not what we expected before you opened a PR.\nYou can join us on Slack via https://portainer.io/slack/ if you have more questions or need a live support as well.. @mrmachine yes, once #461 is out we'll be able to link tasks & containers, thus give the ability to inspect & access stats/logs/console from a task.. @mrmachine indeed.. See details in #1271 . After the implementation for stacks in #1280, a unique identifier is generated for the stacks (based on the Swarm ID and the stack name). This is not required anymore.. Hi @JackHull \nThanks for the report, unfortunately I'm not able to reproduce this. Could you give me more details? Also, could you try with the latest version of Portainer (1.15.0) ?. ping @JackHull . Closing this issue due to inactivity.. Hey @vidschofelix \nThanks for the report, I was able to reproduce this.. Thanks for that @G07cha \nI'm aware of the errors, FYI a eslint check is also triggered on each PR and is available via https://codeclimate.com/github/portainer/portainer. Hi @zsluedem \nFrom the logs, it looks like that this is an issue with your network:\nhttps fetch failed: Get https://golang.org/x/crypto/bcrypt?go-get=1: dial tcp 61.91.161.217:443: i/o timeout\n...\nhttps fetch failed: Get https://golang.org/x/net/websocket?go-get=1: dial tcp 61.91.161.217:443: i/o timeout\nI cannot reproduce this locally, I recommend you to try again. I'll close this issue as it's actually working.. @G07cha there might be conflicts with the usage of ContainerService.containers() after the merge of #1280. Could you check that please?. Thanks @G07cha :+1: . Ah, we made it ! Thanks @G07cha :+1: . @mahald this is why we provided the ability to use a git repository to deploy a stack. It accepts only public git repositories at the moment but we plan to add support for private git repositories as well.. @BastienAr there is none, you might want to open one so we can track this evolution as well.. @mallchin you can deploy stacks from private repositories. We're working on #1752 to give the ability to use ssh keys instead of credentials.. > awesome, thanks -- can I deploy stacks from private repositories now?\nYes, inside the stack-creation view when choosing the git repository option you can now specify credentials.\n\nI have a template that points to a private repo but deploying fails as it can't authenticate.\n\nIt's not working with templates yet.. @mallchin see the discussion in https://github.com/portainer/portainer/issues/1270 about this topic. @Cerebus please open another issue to track this. This is a duplicate (somehow) of #430 that will be taken into account when working on #317.. Thanks @G07cha for working on that. After some discussion, we decided to not integrate this feature. Actually, we don't see any added value for this feature and the fact that it implies changes on the backend only complexify the codebase IMO.\nThe current endpoint selection system might be changed in a near future so we might review how the information is displayed to the user when we'll work on that.\nI'll reject the PR as well as the feature request.. Closed via #1963 . Thanks for the report, I was able to reproduce this.. Fixed ! You can use our unstable build via portainer/portainer:develop (linux amd64 only) until we release 1.15.1 with the fix.. Hi, could you try to start Portainer like this and tell me if this solve your issue?\n$ ./portainer/portainer --no-auth -H unix:///var/run/docker.sock --assets .. Yes, this is caused by the default value of / for the assets directory. Note that the StackManager (https://github.com/portainer/portainer/blob/develop/api/exec/stack_manager.go) also uses the path to the assets to determine where the Docker binary is stored.\nI believe we can fix this by defaulting to a value of /app for the asset directory and COPY all the Portainer files into the /app directory instead of the root, see https://github.com/portainer/portainer/blob/develop/build/linux/Dockerfile. That might do the job indeed. @1138-4eb mind opening a PR? . What does disabling the directory listing brings?\nLe sam. 21 oct. 2017 \u00e0 18:47, 1138-4EB notifications@github.com a \u00e9crit :\n\n@deviantony https://github.com/deviantony, I'm having a look at it\nright now. However, I think that it requires two modifications:\n\nMake the file server disable directoy listing, so that it is made\n   clear when the path is not well set. This is related to the snippet I\n   copied in my first message. Checking\n   https://github.com/portainer/portainer/blob/develop/api/http/handler/file.go\n   now.\nChange the default of assets. I am waiting for @rgl\n   https://github.com/rgl to reply, in order to make sure that my last\n   proposal fits his needs.\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1286#issuecomment-338415891,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFOyBTGcnabqBTHL-iyAs_uSAsoqAEuiks5suiASgaJpZM4P6t8T\n.\n-- \nAnthony Lapenna\nhttps://deviantony.github.io\n. @1138-4eb I don't believe this is a required addition as it is does not actually solves the issue.     IMO it only brings extra complexity without resolving the problem. . This should be fixed via #1309 !\n\nI've build the following archives from this implementation, could you give it a try?\nLinux amd64: https://github.com/portainer/portainer/releases/download/1.15.0/portainer-385ad995c55d0aec2ca11d48718715cc0bc6f222-linux-amd64.tar.gz\nWindows amd64: https://github.com/portainer/portainer/releases/download/1.15.0/portainer-385ad995c55d0aec2ca11d48718715cc0bc6f222-windows-amd64.tar.gz\nping @rgl @bintut @cgoeller . Perfect ! Thanks for your feedback.. Do you mind opening an issue first? Even for a small change, it's required so that we can discuss it (as well as track it in the changelog for example).\nSee our guidelines: https://github.com/portainer/portainer/blob/develop/CONTRIBUTING.md. Thanks @spezzino :+1: . Do you mind opening an issue first? It's required so that we can discuss it (as well as track it in the changelog for example).\nSee our guidelines: https://github.com/portainer/portainer/blob/develop/CONTRIBUTING.md. Thanks @bmanojlovic :+1: . thanks @spezzino :+1: . I don't think the problem is coming from the container-creation view...\nAs you can see in the Dockerfile for Caddy, it automatically creates 2 volumes in /root/.caddy and /srv: https://github.com/abiosoft/caddy-docker/blob/master/Dockerfile#L53\nPortainer should display information in the container-details view about these volumes tho... which is not the case at the moment. This is the bug.\nUX wise, I think that a form validation in the container-creation view regarding the fact that you added a volume mapping  without selecting a volume should be added.\nI'll tag this as a bug because it seems that anonymous volumes (volumes declared in the Dockerfile and automatically created by Docker on container creation) are not displayed in the container-details view.. Note that this stack is not working correctly, the drone-server service is not configured correctly: \ndrone-server    | time=\"2017-10-25T11:25:56Z\" level=fatal msg=\"DRONE_HOST is not properly configured\" \ndrone-server    | time=\"2017-10-25T11:25:57Z\" level=fatal msg=\"DRONE_HOST is not properly configured\" \ndrone-server    | time=\"2017-10-25T11:25:57Z\" level=fatal msg=\"DRONE_HOST is not properly configured\" \ndrone-server    | time=\"2017-10-25T11:25:58Z\" level=fatal msg=\"DRONE_HOST is not properly configured\" \ndrone-server    | time=\"2017-10-25T11:25:59Z\" level=fatal msg=\"DRONE_HOST is not properly configured\" \ndrone-server exited with code 1\nDue to the restart policy being set to always (restart: always) the container keep restarting in bad state.\nNote that we can reproduce this issue using the following:\n```yaml\nversion: '2'\nservices:\n  gitea:\n    container_name: gitea\n    image: gitea/gitea\n    restart: always\n    networks:\n      default:\n      builds:\n        aliases: [ \"gitea\" ]\n    volumes: [ \"./data_gitea:/data\" ]\nnetworks:\n  default:\n    external:\n      name: net-ci\n  builds:\n    external:\n      name: net-build\n```. Yeah, managed to solve it, just wanted to report the issue with the stack.. Thanks @G07cha and @1138-4EB :+1: \nPS: enchantment ? :smile: . Again ? :smile: . Duplicate of #825 . Duplicate of #827 . Could you give us details on which options are you talking about here?. No ETA on this, we'd accept a contribution.. I think we could integrate this in other views like containers and images views.. Hey @gabrielfsousa \nThis is a known bug, we're working on it. Have a look at https://github.com/portainer/portainer/issues/1286 for a temporary workaround.. Actually the kill button is used to send a kill request to a container, I'm wondering how can we add a parameter on this request UX wise.. I can see this as a UX killer.\ncc @ncresswell . Hey @capur16 \nThanks for opening a PR ! I thought that this would just bring the ability to specify the hosts property in the template format. I see that you've also added the ability to override these fields in the UI. How is that required? Is that really useful?\n\nWhat would be your use case for this? \n. Thanks @capur16 :+1: . Found an issue when building archives using this implementation, probably something wrong with the gruntfile.\n\nAs you can see the js folder in the root contains the app.js file and the folder public/js is empty.. We did a quick functional review for this and think that there is no need for the download feature.\nAlso, as @G07cha mentioned it, I'd rather see the tree/text buttons as separated buttons.. Thanks @1138-4EB :+1: . Yup, I reckon we need to find a better way to select endpoints... now UX wise we also need to make this quite easy to use with many endpoints.. Sorry no ETA on this yet.. @yassirh sure, feel free to open a PR and will review it.. You could also use the existing UI Boostrap select (as you did with the image selection), that would not introduce another library.. This issue do not make sense anymore with the recent introduction of the home view revamping endpoint selection UX and allowing to search for an endpoint.. I'll try to reproduce this on a Windows platform, as it's working fine on Linux (you can check on http://demo.portainer.io). @ricardona Correct.\nClosing this issue.. I'm currently working on this.\nQuick notes for the implementation:\n\nIt will be complex to parse the YAML to determine which registries are used inside the Compose file. \nPortainer uses some access control on registries by defining the registries in a separated section (Portainer settings > Registries > Manage accesses)\nPortainer uses the embedded Docker binary to deploy stacks, usage of the binary is shared for all the users across the Portainer instance\nWe'll need to use docker login to authenticate to the registries.\n\nI'm thinking that the implementation should be like this:\n\nWhen deploying a stack, Portainer should retrieve all the authorized registries for the current user and execute docker login against all these registries.\nAfter deployment, Portainer should cleanup any persisted login data (to ensure that another user could authenticate to a registry he does not have access to) via docker logout\n\nThis implementation might require the use of mutexes.. #1327 addresses this problem. You can try it via the image portainer/portainer:pr1327 (linux amd64 only).\n@Beanow @unsafecode could you test it?. Thanks for the feedback @Beanow !. @roysG could you give us more details? Have you added the concerned registries inside Portainer?. Hi @kesonno \nI'm unable to reproduce this, are you sure the Dockerhub credentials you specify are correct ? Using the latest development version I'm able to deploy a private image (Dockerhub) on multiple nodes via a stack. . @nlippke are you sure the credentials you specified in Portainer are valid? When you try to deploy the stack, any errors is raised? What's the status of the tasks related to the private image?\nWe'll need more details to be able to help you.. Thanks @1138-4EB :+1: . > The version number is added to the header.\nI don't really like this, version number should be kept in the footer.\n\nThe footer is shown only if a custom logo is used in the header.\n\nWe should keep the actual header/footer.\nCould you change it before I can test this again?. There seems to be an issue where a part of the version number is displayed when the sidebar is reduced.\n\n. Thanks @1138-4EB :+1: . Thanks @utzb :+1: . Duplicate of #1299 . Duplicate of #1286 . Hey @pleblond thanks for the contribution ! Mind opening an issue to report this first? We use it for tracking as well as release notes ! Thanks !. Thanks @pleblond :+1: . Would you mind rebase this PR against the develop branch instead of master ?. I believe this won't be required once we got #938 working, but I'll merge this for now.. Thanks @utzb :+1: . Yeah it will be awesome once implemented. Feel free to join us on Slack if you want to discuss the implementation https://portainer.io/slack/. @1138-4EB it's fine as it it, I'm pretty sure people won't develop/build on arm or other platforms. Maybe ppc64le but again, not required at the moment.. Closed by #1320 . Closed by #1332 . I just tried it but I cannot display any logs.\nThe following javascript error is raised:\napp.a8f8ca43.js:14199 ReferenceError: logIntervalId is not defined\n    at app.a8f8ca43.js:131216\n    at Scope.$broadcast (app.a8f8ca43.js:18320)\n    at Scope.$destroy (app.a8f8ca43.js:17935)\n    at cleanupLastView (app.a8f8ca43.js:56682)\n    at app.a8f8ca43.js:56732\n    at publicLinkFn (app.a8f8ca43.js:8689)\n    at lazyCompilation (app.a8f8ca43.js:9047)\n    at updateView (app.a8f8ca43.js:56721)\n    at Object.configUpdatedCallback [as configUpdated] (app.a8f8ca43.js:56665)\n    at configureUIView (app.a8f8ca43.js:52649)\nAlso, I think that we should remove these two different containers/terminal and merge the logs (stderr+stdout) into a single container/terminal.. > I find it really useful to have them separated. Can we do it optional?\nI think that a filter both | stdin | stderr should be added.. > The display timestamps feature does not work correctly. The timestamps aren't useful since they appear to be rubbish at first sight (e.g \"30T15:25:10.797977346Z\"), and not having them on trims away valuable information from the logs. [#834]\nWhat's the point of having these? If I recall correctly these are appended by Docker ? Maybe we should just strip them.\n\n[ ] Add dropdown list of data formats. \n\nWhat data formats are you talking about here?\n\n[ ] Now it is pared in JavaScript (frontend). But it might be more efficient to parse/transform it in the backend (golang).\n\nNope, this should definitely be processed in the frontend, we don't want to replace Kibana or other logging/BI tools, we shoud just keep it simple with a good UX for the user (that is save, clear, filters, etc...).. Regarding date parsing & formatting, we already include moment.js in the frontend.. Closed in favor of #1666. @ncresswell what was your input on this?. @jamesmr89 care to bring these changes?. @jamesmr89 \nWith the recent introduction of https://github.com/portainer/portainer/pull/1470, you might to have a look and re-use the code to achieve the missing part for this PR.. ping @jamesmr89 . A docker image is available for this implementation via portainer/portainer:pr1327 (linux amd64 build only).. Could you rebase the PR please?. Thanks @1138-4EB :+1: . We did a review of this and we prefer to keep the actual style for the header.\nNote that I would agree on a refactor of these directives into a single Angular component, not a directive (but keeping the actual style).\nWould you like to work on this refactor ? If so, we can keep this PR opened and tracks the change here, otherwise I'll close it.. Just quickly tested this again, seems that the CPU/MEM charts are not working anymore. Could you investigate?. Thanks @1138-4EB :+1: . Closing this as a duplicate of #1304.\n@alexanderadam feel free to comment/re-open if #1304 is not really what you had in mind.. Hmm, would that be a reverse proxy configuration issue? We might need to update it.. Ah I see, I believe this should not be complicated to change.. Closed via #1343 . Thanks for the quick update @1138-4EB :+1: . \nAgree, instead of replacing the current App Templates we're going to rename it to Container templates and add a new Stack templates entry in the sidebar.\n\nas well as stack v2 deploy\n\nThis is going to be stack v3 templates, we do not support docker-compose yet.. Yes, this is by design in order to ensure uniqueness for each stacks.\nI.e, currently Portainer uses the stack name to create UAC on related resources (services, containers), so the name of the stack needs to be unique within the whole Portainer instance.\n. @zhaoyao91 you could prefix/suffix the stack name with the environment name, e.g. '-dev', '-qa'...\n@ncresswell I'll re-open and investigate if we can do something here.. This was just an example, you just to need to create unique stack names. I understand the point tho and will investigate.. Yes, this was added in order to ensure uniqueness within Portainer. But when you retrieve services/containers associated to a stack, the only reference for that stack is the name of the stack in the com.docker.stack.namespace label.\nWhen we store the UAC of a stack, we also use the stack name (tho we could use a combo of swarmID / stack name here) as the identifier associated to the resource control object.\nAt the moment, stack name + swarm ID is used to create a unique identifier. It was choose over stack name + endpoint ID because we should be able to retrieve the stacks of a cluster when connected to any node of the cluster (manager, worker...). If we used stack name + endpoint ID, then we would have only be able to lists the stacks available in the endpoint where they were created.\nIt'd be nice if containers/services would include the ID of the associated Swarm in the labels, but this is not avaible at the moment. I wonder if we could add this into Docker?\nEdit: I believe this would need to be added in the swarmkit project as well as the moby project:\n\nhttps://github.com/moby/moby/blob/master/daemon/cluster/executor/container/container.go#L226\nhttps://github.com/docker/swarmkit/blob/master/api/objects.proto#L165. Opened an issue in moby to be able to retrieve Swarm identifier from labels: https://github.com/moby/moby/issues/36231. Somehow related to https://github.com/portainer/portainer/pull/1187\n\nI agree with this, with some limitations. I don't think that we need to support multiple UI types (e.g. a select can do the same job as a radio functionally speaking).\nI'm keen to add this, tho we need to keep the old (actual) template format compatible. I'd also like to see the ability to add an optional description that could be added for each input (like in #1187).\nI've actually added this already in #1346 where the following format is supported:\njson\n{\n    \"title\": \"MySQL stack\",\n    \"description\": \"MySQL deployed as a service\",\n    \"note\": \"Description\",\n    \"categories\": [\"database\"],\n    \"platform\": \"linux\",\n    \"logo\": \"https://cloudinovasi.id/assets/img/logos/mysql.png\",\n    \"repository\": {\n      \"url\": \"https://github.com/deviantony/st-e-aks\",\n      \"stackfile\": \"docker-stack.yml\"\n    },\n    \"env\": [\n      {\n        \"name\": \"MYSQL_ROOT_PASSWORD\",\n        \"label\": \"Root password\",\n        \"description\": \"Password used by the root user.\"\n      },\n      {\n        \"name\": \"VAR2\",\n        \"set\": \"some_value\"\n      },\n      {\n        \"name\": \"VAR3\",\n        \"label\": \"Root password\",\n        \"select\": [\n          {\n            \"text\": \"Yes, I agree\",\n            \"value\": \"Y\"\n          },\n          {\n            \"text\": \"No, I disagree\",\n            \"value\": \"N\"\n          },\n          {\n            \"text\": \"Who cares?\",\n            \"value\": \"YN\"\n          }\n        ],\n        \"description\": \"Some var.\"\n      }\n    ]\n  } \nAs you can see here, the env property can have the following formats:\njson\n      {\n        \"name\": \"MYSQL_ROOT_PASSWORD\",\n        \"label\": \"Root password\",\n        \"description\": \"Password used by the root user.\"\n      }\nHere, we want to create a standard input where the entered value will be associated to the env var named MYSQL_ROOT_PASSWORD. An optional description is added that will generate a tooltip close to the label in the UI.\njson\n      {\n        \"name\": \"VAR2\",\n        \"set\": \"some_value\"\n      }\nHere we use the set property to automatically bind the value some_value to the env var VAR2 without creating any element in the UI.\njson\n      {\n        \"name\": \"VAR3\",\n        \"label\": \"Root password\",\n        \"select\": [\n          {\n            \"text\": \"Yes, I agree\",\n            \"value\": \"Y\"\n          },\n          {\n            \"text\": \"No, I disagree\",\n            \"value\": \"N\"\n          },\n          {\n            \"text\": \"Who cares?\",\n            \"value\": \"YN\"\n          }\n        ],\n        \"description\": \"Some var.\"\n      }\nHere, we introduce the select property that will generate a select inside the UI. The select property content is an array containing objects with mandatory text and value properties. The text property will be used to display the associated text as a selectable choice and the value property will be bound to the VAR3 env var.. Agree for default values, something like: \njson\n    {\n        \"name\": \"VAR3\",\n        \"label\": \"Root password\",\n        \"select\": [\n          {\n            \"text\": \"Yes, I agree\",\n            \"value\": \"Y\",\n            \"default\": true\n          },\n          {\n            \"text\": \"No, I disagree\",\n            \"value\": \"N\"\n          },\n          {\n            \"text\": \"Who cares?\",\n            \"value\": \"YN\"\n          }\n        ],\n        \"description\": \"Some var.\"\n      }\nAnd for the input:\njson\n      {\n        \"name\": \"MYSQL_ROOT_PASSWORD\",\n        \"label\": \"Root password\",\n        \"default\": \"databasepassword\",\n        \"description\": \"Password used by the root user.\"\n      }. Closed via #2017 . Hi @palmerabollo \nHow did you start Portainer? Are you using the --no-auth flag?\nOtherwise, if you login into Portainer, you can then use the log out option available in the top-right corner of the application (right under your username).. Great, I'll add this to our documentation FAQ ! Thanks @woudsma :+1: . Added as a part of https://github.com/portainer/portainer-docs/commit/58a483bd6ba146f10442cf1d27840bbb7c6d0d88. I'll use this issue to tackle the need to manage external stacks. I believe that we can actually get rid of that \"external stack\" concept and be able to manage them (e.g. execute a remove action) as well as inspect them.\nThe only limitation compared to stacks created from within Portainer will be the fact that you'll not be able to see the content of the compose file in the inspection view.. I do have a work-in-progress on this... but no ETA yet. Will update soon.. @remipichon \nStack created via API should not appear as externals, I've just tried it on my host using the latest version of Portainer and this request creates a new stack that is not considered external:\n```\ncurl -X POST -d \"{\\\"SwarmID\\\":\\\"$SWARMID\\\", \\\"Name\\\":\\\"myStack4\\\",\\\"StackFileContent\\\":\\\"version: '3'\\nservices:\\n web:\\n   image: nginx\\n\\\"}]}\"  --header \"Authorization: Bearer $BEARER\" --header \"accept: application/json\" -H \"Content-Type: application/json;charset=UTF-8\" http://$HOST:9000/api/endpoints/1/stacks?method=string\n```. Uh yes, I'm not able to reproduce this, so it's pretty strange.\nAnd yes, details for external stacks will be implemented soon.. @\u0167rajano After what fact?. @trajano no, this is not possible yet.. @nbaum not regarded as a bug !. Closed via #1963 . @joseluisq This issue has been closed. For any question about the usage of Portainer, please join our community support channel at https://portainer.slack.com . Hey @a1exus \nAre you deploying Portainer using docker stack deploy or using docker-compose ?. Could you try the following steps ?\n\ndocker-compose down\nEnsure that the data folder is removed\ndocker-compose up -d\naccess Portainer in a new private navigation tab\n. Anything in the Portainer container logs?\n\nAlso, you can join us on Slack if you need live support https://portainer.io/slack/. Are you using a reverse proxy?. Could you try using the image portainer/portainer:develop?. Wow, I honestly don't know. Might be related to your reverse proxy configuration... Have you tried to access the Portainer instance without going through the reverse proxy?. Ok @a1exus so definitely a reverse-proxy issue. Could you join us on Slack?. @a1exus I think the issue was solved, can you confirm?. @jr-araujo I'm pretty sure that the error is related to an invalid reverse proxy configuration.\nBtw, Portainer do not support the ADMIN_USERNAME and ADMIN_PASS environment variables.. Thanks @WTFKr0 :+1: . Thanks @Fish2 :+1: . Thanks @yassirh :+1: . Just investigating this issue...\nWhen using the following Compose file to deploy a stack:\nyml\nversion: '3.4'\nservices:\n  web:\n    image: nginx\n    deploy:\n      replicas: 1\n    ports:\n      - \"80\"\nWe can see find the following content in the Endpoint.Ports of the ServiceList operation:\njson\n      \"Ports\": [\n        {\n          \"Protocol\": \"tcp\",\n          \"PublishMode\": \"ingress\",\n          \"PublishedPort\": 30000,\n          \"TargetPort\": 80\n        }\n      ],\nWhen using the following Compose file:\nyml\nversion: '3.4'\nservices:\n  web:\n    image: nginx\n    deploy:\n      replicas: 1\n    ports:\n      - target: 80\n        published: 0\n        protocol: tcp\n        mode: host\nHere is the content of Endpoint.Ports:\njson\n\"Ports\": [\n        {\n          \"Protocol\": \"tcp\",\n          \"PublishMode\": \"host\",\n          \"TargetPort\": 80\n        }\n      ],\nLooks like the API is not exposing the PublishedPort in its response.\nEDIT: this is only happening when using mode: host, indeed when using mode: ingress, the random port assigned by Docker is actually displayed.. I'm not sure on how we should work around this...\nWhen using docker service ls, every service with ports bindings declared in host mode are not shown on the CLI (which is the current Portainer behavior as well).\nIt's only available to check when inspecting the service using docker service <service_name> ps, which will show the binding of the random port assigned by Docker associated to a task.\nNote that services exposing ports over ingress are not showing any bindings when inspecting their associated tasks.\nEDIT: I actually think that the port binding should not be displayed in the Portainer service list (as it's done on the CLI) when binding a port using host mode. That's because the task could be located on another node.. I'm wondering if this is related to the way the container (service?) is started. Could you give me an example of container/service to reproduce?. Closing this issue as the problem seems to be solved.. I agree with @WTFKr0 \nWe should use the default behavior of the CLI. A simple switch close to the deployment action to choose to use the prune option or not should be added.\n. We're using the Docker CLI to update the stack so the behavior should be the same as the CLI, meaning that it will re-deploy existing services...\nhttps://docs.docker.com/engine/reference/commandline/stack_deploy/\nCould you give it a try on the CLI to check if this is the expected behavior?. Looks like --detach is not supported in the CLI yet: https://github.com/docker/cli/issues/373\n@zhaoyao91 could this be related to some latency between your Portainer instance and your Docker environment ? Have you tried to use the CLI with the -H flag to check this?. @zhaoyao91 do you have multiple registries defined inside Portainer?. Do you want to join me on Slack so we can investigate this?\nhttps://portainer.io/slack/. Hi @nemd \nThis is a known issue and it has already been fixed, see https://github.com/portainer/portainer/issues/1313\nThis will be available in the next release (coming real soon) but in the meantime you can use our unstable build if you want to (use the image portainer/portainer:develop, linux amd64 build).. Following on the issue https://github.com/portainer/portainer/issues/1584\nThe current health check mechanism do not support Portainer started using TLS. I'm going to revert the changes brought by #1366 and we'll have to rewrite the health check mechanism.\n. curl  is not bundled into our Docker image (using scratch). I was originally thinking that a default health check was required in our Dockerfile but as there are multiple ways to deploy the Portainer container, I think it should be omitted.\nWe might just need to add some documentation on how we can enable the health check. \nStill need to think if we should bundle the curl binary or add this in the documentation about how to build an image with health check enabled.. Did a quick review for this, I don't really like the UX and rather see this:\n\n\n\nYou can find my changes inside this branch https://github.com/portainer/portainer/tree/patch-pr1365.\nNote: It only affects the UX for the service creation view and should be applied to service update as well.. Looks like there is a small display issue with the service details view:\n\n. The service details view gives the ability to override the target when connected to an engine with Docker API version < 1.30, that should not be possible.\nOn my Docker 17-03 setup:\n\n. Thanks @WTFKr0 :+1: . Thanks @1138-4EB :+1: . An issue has been reported regarding this implementation: https://github.com/portainer/portainer/issues/1584\nIndeed, the current health-check mechanism do not support TLS.\nThis is going to be tricky to implement, as the Portainer health-check process is different from the main Portainer process started in the container (thus unable to retrieve associated starting flags such as port, TLS configuration...).\nI'm going to revert this PR and we'll have to work on this mechanism again.. Reverted via https://github.com/portainer/portainer/pull/1588. I know, but the point here is to be able to embed a generic health check call inside the official Portainer image. We don't want to force our users to build their own Portainer image to support a health-check for any specific deployment.. @Budwise do you have some screenshots? Could you attach them in here?. Thanks for the screenshots.\nI believe we only implemented the CPU calculation algorithm for Unix (which seems to be wrong, see #1371)\nRelated code: https://github.com/portainer/portainer/blob/develop/app/components/containerStats/containerStatsController.js#L59\nIf we check in the moby codebase we can see that there is two different methods to calculate CPU usage, one for Unix and one for Windows:\n\n\nUnix: https://github.com/moby/moby/blob/eb131c5383db8cac633919f82abad86c99bffbe5/cli/command/container/stats_helpers.go#L175-L188\n\n\nWindows: https://github.com/moby/moby/blob/eb131c5383db8cac633919f82abad86c99bffbe5/cli/command/container/stats_helpers.go#L190-L204\n\n\nI believe that we must implement that Windows calculation method and use a condition based on the container image platform to choose which algorithm to use in the container stats view.. @olljanat how is this issue related to #2018  ?. I believe we can replace the ID with the name of the image (extracted from Config.Image).. Thanks for the report, we should review the CPU calculation algorithm.\nhttps://github.com/portainer/portainer/blob/develop/app/components/containerStats/containerStatsController.js#L59\nAlso integrate the algorithm for Windows container, see #1368 . @rafaelmluz could you give us more details please? It'd be nice if you could provide a screenshot.. Hi @nitulkukadia \nIndeed, this is a Docker API limitation. When you use the Docker CLI, you'll only see the containers available on the node you're managing with docker ps.\nAs @WTFKr0 mentionned, when you use docker node ps, you're not listing containers but service tasks (have a look at this for more information on services & tasks https://docs.docker.com/engine/swarm/how-swarm-mode-works/services/).\n461 aims to bring the list of all the Docker resources inside your cluster in a single Portainer endpoint.\nIn the meantime, if all you need is to be able to list all the tasks in your cluster, you can use the Swarm visualizer feature by going to Swarm in the sidebar > Go to Swarm visualizer.\n\nDuplicate of #461 . Is your Docker engine configured to pull images from insecure registries?\nSee: https://docs.docker.com/registry/insecure/. Agree, that'd be a great integration !. I think it would be preferable to add this as a consul integration rather than an automated scripted way using --external-endpoints. E.g. in app settings to configure Consul integration.\nBut thanks for sharing that @mcoms ! :+1: . > Adds container.Config.Image to the \"Image\" row of section \"Container details\" in \"Container\" page.\nI believe that this should simply be added this way to stay consistent within the UI: \n\n\nAdds the current tags of image container.Image as the \"title\" of the link. Therefore, these are shown when the mouse is left over it.\n\nDon't think that hovering is a great plus for UI. Plus it seems to be redundant with the name being already displayed close to it so I don't think there is a need for this.\n\nChecks if container.Config.Image is present in the tag list. If not, a warning symbol is shown with the following \"title\": This tag does not belong to image  anymore.\n\nI don't think that this is needed as well. Why did you want to introduce this? (I'm wondering about when this situation can happen).. I do believe that your changes are out of scope for this PR. We simply want to check what are the related image (repo tags specifically) to the container we are inspecting... if that container was created using an old nginx image, so be it the information is available.\nI believe that we should fix this issue first before discussing the ability to verify the 'associated image validity' inside another issue.. You can expect this release in the beginning of next week.. I think that we could do the following:\n\nAdd an \"Browse volume\" button in the volume details view\nOn click, deploy a busybox container (or the equivalent on windows) with the current volume automatically bind mounted as read-only inside /volume\nAutomatically redirect to the container console and start an exec with /bin/sh (or the equivalent on windows)\n\nThis would allow to browse the volume content using a shell.\ncc @ncresswell . Agree, that's actually better. And having a multi-platform webserver container image would even be more awesome (no need to check for the platform, just run it and you can browse through the volume on win/unix).. I'd rather use another container. That would not complexify too much the codebase and make it quite modular if we want to change the container.\nWe might create our own light webserver container tho (multi-platform).. @rtmaster if it's already existing why re-invent it? :-)\nA tight integration with a specific container from within the app would work great IMO. The equivalent of docker run --rm could be used here, so that no trace of that \"ephemeral\" container would be left on the host.. @Redsandro what is your use case for this? You can actually re-create a container using the re-create button in the container-details view.\nRelated to #81 . Ok, let's close this as a duplicate of #81 then and continue the discussion in here.. This implementation is available via portainer/portainer:pr1383.. You're right, we should enhance that.. Hi @Zappelphilipp \nThe Portainer container will always expose the application on the port 9000 inside the container. You just need to bind this port on the port of your choice on your host:\n$ docker run -d -p 9001:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer \n. Thanks @thojkooi :+1: . @yassirh please fix the lint issues reported by codeclimate. . Just built an image for this, portainer/portainer:pr1389. Looks good to me, @WTFKr0 mind reviewing it quickly to check if it fixes the issues you previously had?. @yassirh \nAs someone reported it on Slack, it'd be nice to have that feature as well in the service-details view. Mind adding this?. portainer/portainer:pr1389 image updated with the latest implementation.. Thanks @yassirh :+1: . As these are optional, I'm not sure how we should integrate them in Portainer. Maybe we can enhance the Image details panel with the associated labels. Any proposition?. What do you have in mind about links?. Closed in favor of #1833 . Hi @bergtwvd \nPortainer do not support docker-compose yet. It only support docker stack deploy via the stacks management feature available when connected to a Swarm cluster.\nWhen managing a Docker standalone host, Portainer will only display the templates with the type container in the Apps Templates section. You can access \"stack templates\" only when connected to a Swarm cluster.\nRegarding Portainer v1.15.0, you can indeed see all the entries because this version of Portainer is not able to make the difference between container/stack templates (and cannot deploy stack at all).\n\nFrom the user documentation it is not clear if this covers docker-compose files, or only the docker stack command.\n\nCould you point me to the section of the docs that you find not clear enough?. Again, thanks for your report, I've added a note into the docs: http://portainer.readthedocs.io/en/latest/templates.html#stack-template-definition-format. Hi @yak1r \nThis is pretty strange and I'm unable to reproduce that. I'll need more details here, is anything displayed in the dashboard ? No errors in the Portainer container console? No error in the UI?. @yak1r there should be no difference between these nodes and no, the use of -H should not affect the communication.\nJust to be sure, after creating the endpoint inside Portainer, do you select it in the sidebar before accessing the \"Containers\" view? E.g. do you select the endpoint you just created under the \"Active endpoint\" item?\n. Yes that would the point of #461! Closing this issue then :) . There are two feature requests here, mind opening a different issue for the second one?\nI believe that we can persist the last user used for a container inside the browser cache as I don't think this need to be persisted in the database.\n. Hmm, agree, I really think that at some point we shoud give a better UX for endpoint selection.. More details about this:\n\nAdd the ability to create an endpoint group in the UI, we should be able to add metadata to a group using labels (name/value pair).\nAdd the ability to manage endpoints group (edition/deletion)\nAdd the ability to assign endpoints to a specific group of endpoints (with a 1-1 relationship, an endpoint can only be part of one endpoint group)\nAdd the ability to add the endpoint to a group when creating the endpoint\nAdd the ability to associate access restrictions at group level and to inherit endpoint access from group permissions\nA default group called \"Unassigned\" must exists, containing all the endpoint that are not associated to any endpoint group\n\nUX wise we need to rethink how the user will be able to select the group and then endpoint from the UI.. @upsala added via #1902 . Duplicate of #960 . Yes, that would be the point of #960 . I'm using https://atom.io/packages/atom-beautify inside Atom.. @1138-4EB mind opening an associated issue so we can link it?. Thanks @1138-4EB :+1: . Thanks for opening that discussion. What about using yarn here?. I actually checked that quickly but I think that yarn got the following pros over npm:\n\nit uses the same registries as npm as well as the same package.json making the transition seamless (or both can be used side-by-side for a transition)\nit locks dependencies to ensure that the same versions of the libraries are installed on different machines (which is not the case for npm and bower I believe)\nit's faster than npm. > If the same package.json can be used and both can be used side by side, using yarn instead of npm does not affect the modifications I already made, does it?\n\nI believe it will not, we just need to be able to switch the usage of npm to yarn (even if just for the speed boost of yarn).\n\nI read about locking dependencies, but I/we already have the same functionality in #938. Building a docker image with all the dependencies effectively locks them.\n\nIndeed, but I'd rather relay on a dependency management tool to achieve it. Plus this evolution might be implemented before #938 \n. Hi @kkuehl \nI believe that this is related to your compose file, especially the configs section:\nyaml\nconfigs:\n  central_fuzzmanager:\n    file: central_fuzzmanager.env\nIf you check the compose file documentation for configs at https://docs.docker.com/compose/compose-file/#configs-configuration-reference you'll see that using file here will make Docker search for the central_fuzzmanager.env at the specified path and thus will not work when using Portainer as you cannot provide the config this way.\nHere, you'll want to use the external property instead:\nyaml\nconfigs:\n  central_fuzzmanager:\n    external: central_fuzzmanager.env\nThis will make Docker use the config named central_fuzzmanager.env when deploying the stack (you still need to create that config inside Portainer).\nTell me if this helps.. It works fine with the following steps:\n\nCreate a new config named mytestconfig inside Portainer UI\nCreate a new stack with the following content:\n\n```yaml\nversion: '3.3'\nservices:\n  web:\n    image: nginx:latest\n    deploy:\n      replicas: 1\n      restart_policy:\n        condition: on-failure\n    configs:\n      - mytestconfig\n    networks:\n      - overlay\nconfigs:\n  mytestconfig:\n    external: true\nnetworks:\n  overlay:\n```\nThe stack is deployed and the config can be accessed.\nI believe that your error come from:\nyml\nconfigs:\n  central_fuzzmanager.env\n    external: true\nWhich should be:\nyml\nconfigs:\n  central_fuzzmanager.env:\n    external: true. @kkuehl have you tried the instructions I posted above?. I believe that you need to upload a file because of the following lines in your compose:\nyml\n    env_file:\n     - ./central_fuzzmanager.env\nHere, you require a file named central_fuzzmanager.env to be available in the root folder of the compose file.\nYou could work-around this by declaring environment variables in the Portainer UI or to put your compose file and .env file into a public git repository and deploy the stack using that repository.\nNote: for clarity purposes, I'd recommend not using the same name for environment files and configs.\n. @kkuehl watch out, you're not referring to the correct documentation.\nBut you're right, env_file seems to be not supported with stack deploy, it's kinda hidden in the docs: https://docs.docker.com/compose/compose-file/#variable-substitution\n. Closing this issue as not related to Portainer.. I've closed #230 as this issue is more detailed.\nAlso please discuss any implementation details (using preview images or not inside a PR, even experimental), this keeps the issue clearer and make it easier for us to determine the requirements.. Closed via #1460 . Hi @zottelbeyer \nThis is an issue related to the LinuxServer.io template feed that needs to be updated. I'll keep this issue open and update it after we get some news from the LinuxServer.io guys.\n. Seems that something is missing in the frontend part, I'll fix that.. I'll consider this as an enhancement of the Containers view indeed (and should be somehow related to #1197).\nAs a first step, I believe that if we manage to add the network names to the container object being displayed in the Containers view, you'll be able to filter the container list by typing the container name inside the filter and then able to select all your containers.\n. Thanks @1138-4EB :+1: . I've already thought about this and my idea was to add an extra static \"menu bar\" below the header row giving quick access to widgets inside the view. Being static, that navigation bar would be kept when scrolling inside the view (which would be awesome for the service details view I think).\nWe could also transform the current header row as a static row and enhance it with that navigation feature (IMO having a plain text view of all the available links is better than a popover but need it may depend of the view has there can be a lot of links).. While I agree this could save some space in the UI for some areas, I don't think it offers a better UX for others. Example with the ability to commit a container inside the container-details view, having the form related components in the widget header is confusing because you still to toggle the widget content to use the form.\nRegarding the pagination button, I'm currently working on a datatable component to refactor the usage of tables inside the UI and bring a better UX as well as a single component to avoid code duplication. I'm going to share that soon with you @1138-4EB so that we can avoid duplicate / complex work on the same components.. That'd be nice to have but I'm not sure if this is possible to retrieve this information from the Docker API.\nThis information cannot be found in the imageHistory operation https://docs.docker.com/engine/api/v1.30/#operation/ImageHistory nor in the imageInspect operation https://docs.docker.com/engine/api/v1.30/#operation/ImageInspect.. Thanks, btw no need to use the feat/fix/chore naming constraint when creating an issue, should only be used within commit messages (the target of the feat/fix/chore is determined after reading/discussing in the issue with the associated label).\n. @Redsandro I insist for this file to be removed as it's out of the scope of this PR.\nAlso, my opinion on collaboration and code format would be to automatically use an external tool like prettier (https://github.com/prettier/prettier) to format the code when a PR is open.. Ok so I just tested this (sorry for the delay). Functionally I quite like it, there is only one thing that I'm not ok with: the ability to collapse that column. Having a \"+\" icon here does not really makes sense UX wise, I'd rather see the 4 icons displayed by default. I don't think we should allow to collapse these icons, so that should be removed.\n. > You mean to remove the \"collapse\" option only, or the configuration menu itself? I don't know if \"I'd rather see the 4 icons displayed by default\" means that you want to keep the feature to hide some.\nYeah, keep the ability to hide some.\n\nNote that my idea was to show up to 10 different options in this quick access. Precisely the ones shown in #1407, since they make more sense here than in the details view. That's the reason to have a collapsed view. 1-4 icons do not impact much, but 10 break the table.\n\nLet's start with these 4 icons at first, I don't think we need to add more but this can be discussed somewhere else.. Also rename the header to \"Quick actions\" . @Redsandro @1138-4EB please have a look at #1460 that embeds this feature.\nYou can test it using portainer/portainer:pr1460.. Closed in favor of #1460 . Thanks @1138-4EB :+1: . Thanks @Duvel :+1: . Thanks @1138-4EB :+1: . Hi @rahulruikar \nNo this is not possible as templates use a hard-coded image inside the template definition. We do not plan to override the template image.. Duplicate of #646 . Thanks @1138-4EB :+1: . My opinion on this:\n\n\nWe should not lock any contributor on a specific format/code beautification tool. If Bob wants to contribute using IntelliJ and Alice using Atom they both should be able to do so with their own code style.\n\n\nCode formatting tools should be triggered as the first step during the creation of a pull request (e.g. similar to codefresh integration), the code would then be automatically prettify for the frontend and gofmt for the backend.\n\n\nAs a first step, a extra step in the build system to trigger the code formatting could be added but this could be potentially forgotten by the user thats why I'd rather see it automated like proposed above. Yeah probably changing defaults but note that the .eslintrc.yml file is currently used by the codeclimate integration.\n\n\nPrettier was an example of product to format the code base, I did not investigate this topic much for now.\nAs for the third point, I think that this could maybe be integrated inside a CI service but not sure.\nIt's good to have an issue open for this subject but definitely not a priority at the moment.. Agree with @WTFKr0 as well but this should be treated inside another issue.\nI'll tag this one as an evolution to the actual healthcheck panels available in the container-details view.. Maybe prevent the access to the logs feature in that case? Is it also the case for service logs?. Great. Is this issue also happening when accessing log services?. Duplicate of #960 \nAlso, yes you can use the API to create resource controls (that would affect ownership), see https://app.swaggerhub.com/apis/deviantony/Portainer/1.15.2/#/resource_controls/ResourceControlCreate and more general API examples here: https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8\nJoin us on slack at https://portainer.io/slack/ if you need more info about the API usage.. This is a Docker limitation (same behavior on the CLI), when using the ImageDelete operation (https://docs.docker.com/engine/api/v1.30/#operation/ImageDelete) of the Docker API on an image with a single tag, it'll delete the image.\nKinda documented in https://docs.docker.com/engine/reference/commandline/rmi/. I do not think that this is necessary, what would be the use case for that?. I feel like integrating the donation button like in Rockstore is great, IMO positioning it directly under the logo and above \"active endpoint\" could be great.\nNow for the other points:\nIn previous versions, the footer redirected to the github repository. I did not like it as it was a pretty hidden feature and I was not sure that people were actually using it. \nIt's a good idea to have a link to the docos and the main support channel (slack). I do not see the point of having a link to the website or the github repository tho.\n\n\"Small\" Fork me on Github ribbon fixed to the bottom-right, linked to github.com/portainer/portainer.\n\nThat should be added on the website, not in app.. Yes, I agree as well, we should use the same image that is currently used by the container.\nBut... what if the image has already been deleted?. I'll close this issue and reference it in https://github.com/portainer/portainer/issues/523 which is the issue associated to a new database storage.\nStrangely, a user reported it to be working with Glusterfs in https://github.com/portainer/portainer/issues/594#issuecomment-280104202. I've pushed some changes.\nAn image to test this implementation is also available via portainer/portainer:pr1433. Thanks @1138-4EB :+1: . Anything in the container logs?. Some information I retrieved about image naming:\nSome details about what compose a valid docker image name: https://docs.docker.com/engine/reference/commandline/tag/\nUsed by moby in https://github.com/moby/moby/blob/6672ffa566936dc7dc6e10b494b2a1567c536ddc/client/image_tag.go\nReference available at: https://github.com/docker/distribution/tree/master/reference\nThe regexps defined in https://github.com/docker/distribution/blob/master/reference/regexp.go\nshow that the registry is using the DomainRegexp and the image name the NameRegexp. They're aggregated in the anchoredNameRegexp.\nAs we can see here, it's actually quite complex to determine all the components (registry, repository, tag) from an image input.. > I think that the main feature is to allow the user not to remember the URL (and probably port number) of each registry, because it effectively provides an alias. For example, I can create registry \"dev-registry\" which points o a.rather.long.and.12345678-zyx.complex.domain:0000000, and none of the developers in my group needs to worry about what the URL is. \nNot really, the alias was just an extra, the main feature here is to be able to associate credentials to a registry so that we can authenticate to private registries. You'll always find the registry URL in the tags anyway (a.rather.long.and.12345678-zyx.complex.domain:0000000).\n\nKeeping authentication is also a feature, but I believe that the select box can be removed and have authentication handled silently. Note that I don't know if this is desirable\n\nDue to the current implementation, users may use multiple credentials to the same registry.\n\nIt is. It is also equivalent to docker pull library/nginx:latest, docker pull docker.io/nginx:latest and docker pull docker.io/library/nginx:latest. There are four options because the space is defined by two binary variables\n\nIndeed, this is why it can be quite complex to parse this.\nI'm thinking that maybe we should review the entire UX for the image selection and authentication here...\nAt the moment, the select box gives access to an alias, an implicit registry URL and implicit credentials as well... It does not makes sense in some case as well where you can put my.registry.com/myname/myimage:latest in the image field and use DockerHub in the select box... (thus the creation of #1441 I believe).\nMaybe we should just replace the whole form part with only one text input, where the user would be able to put the full image name (that is, registry, repo, name and tags. e.g. docker.io/library/nginx:latest for example) and then give an optional ability to the user to use credentials?\nThis way, we do not need to parse the the entered text anymore (which makes it simpler on our end) and give the ability to the user to specify ANY of the following formats:  nginx:latest, library/nginx:latest, docker.io/nginx:latest, docker.io/library/nginx:latest.\nSo instead of storing/managing registries, we could just be storing/managing registries credentials.\nHere is a quick WIP:\n\n\n. I'm not really working on this at the moment, just made a quick POC to showcase a potential UX. But I think this is the way to go.. Note that we also need to take https://github.com/portainer/portainer/issues/1270 into account.. Hmm, I'm ok with the added gofmt for the backend, but eslint is more related to linting than formatting the codebase ? We already have grunt lint for that.\n. Out of curiosity, how did you manage to get a 503 on settings? Also, an error notification should be displayed before you try login.. @1138-4EB mind splitting this PR in two different PRs ? One part is related to solving the issue and the other part is related to UX enhancement.. Mind opening an issue to describe the functional changes ?. Indeed, duplicate of #461 . Are you asking for the equivalent of the --volumes-from flag? https://docs.docker.com/engine/reference/commandline/run/#mount-volumes-from-container-volumes-from\n. @c0fe I believe this is a duplicate of #571 \nI'll close this issue, feel free to re-open if you think that the linked issue is not related.. Can you start a another Portainer container on that ARM cluster to check again? It cannot really be related to the build process I think.. @UnclePhil any update on this?. @UnclePhil only a single instance can be connected to the database at the same time. That might be the source of your problem.. @UnclePhil any update on this?. Closed due to inactivity.. This is the output of grunt run-dev after checkout:\n```bash\n$ grunt run-dev                                                                                            \nRunning \"config:dev\" (config) task\n\n\nConfigure 1 variable for current target.\n\n\nRunning \"clean:app\" (clean) task\nCleaning \"dist/public/css\"...OK\nCleaning \"dist/public/fonts\"...OK\nCleaning \"dist/public/ico\"...OK\nCleaning \"dist/public/images\"...OK\nCleaning \"dist/public/index.html\"...OK\nCleaning \"dist/public/js\"...OK\nRunning \"shell:buildBinary:linux:amd64\" (shell) task\nWarning: An error occurred while processing a template (Cannot read property 'indexOf' of undefined). Use --force to continue.\nAborted due to warnings.\n```\nNote that dist/portainer-linux-amd64 exists:\n```bash\n$ ls dist                                                                                                   \ndocker  portainer  portainer-linux-amd64  public\n```. Thanks @1138-4EB :+1: . Can I ask what is the reason behind this request?\nYou cannot disable Apps Templates at the moment, and I'm not sure that this is something we want to add.. > have my private list only, with only the production approved images (because, I only use that)\nYou can create your own template list, have a look at http://portainer.readthedocs.io/en/stable/configuration.html#use-your-own-templates. Thanks @doncicuto :+1: . Not really related to Portainer I would say, I'll close this issue. Multiple users of Portainer are using Traefik, you might want to ask your question in our Slack channel. . @mhermosi you can create a simple busybox container inside the same Docker network as the Portainer container to check communications.. Thanks @1138-4EB :+1: . Thanks @doncicuto :+1: . I was able to reproduce this, will investigate.. That is a regression introduced via https://github.com/portainer/portainer/commit/eb4357937873b8af16dcc76e8906874549d04354#diff-070ff54db6055aeba28f539a86e5d2a6\nWill be fixed ASAP.. Thanks @doncicuto :+1: . Thanks @doncicuto :+1: . An image is available for this implementation via portainer/portainer:pr1460 (linux amd64 build).. Agree, I consider this to be a UX issue.. No update on this topic yet @SaschaWeisenberger \nFeel free to open a PR ;-). Would you consider https://github.com/portainer/portainer/issues/546 as a solution for this? It aims to bring a simple way to copy/paste ENV vars when creating/updating containers/services.. Not really, instead it would display a textarea where you could copy/paste each env var line by line (thus put them in the order you want).. Duplicate of #1437 . While I consider these shields interesting for a library, I do not think that these are useful inside the README of an application.\nRegarding dependency update, with the recent introduction of yarn/npm support (especially yarn and the yarn.lock mechanism), we can now lock the libraries required by the app.\nI agree, fixing the vulnerable dependencies is interesting but it's time consuming to update the libraries and check that everything works fine (for minor versions such as codemirror or chart.js, I believe this should be easy and fast but upgrading from 1.5 to 1.6 is a major change).\nI'll keep this issue open but I think that we should tackle these steps by steps and ensure that the app works without issue after each upgrade of any component.\nRegarding dev-dependencies, I don't see the point of upgrading them. Once the build system is ready and functional, if we don't need the features brought by later versions and don't need any bug fix I believe these should be locked.. A discussion about this was started in https://github.com/portainer/portainer/pull/1482/files#r158226153\nEither we include the protocol in the registry URL at creation time, but that might break the behavior of the current registry implementation.\nOr we determine the protocol at creation time as well and store it inside a new field.\n. > Docker creates all possible combinations of the endpoint, prefer https over http and v2 over v1.\nAgree, I'll review it soon.. So looks like you remove the if !strings.HasSuffix(url, \"/\") { part but have you tested if it works? @asasmoyo . @asasmoyo yes I believe that the related issue (#1182) implies a connectivity check and not only a URL validation (so credentials as well).\nTry to follow the workflow explained by @WTFKr0 . @WTFKr0 @asasmoyo \nSkipping the TLS verification part might do the job via:\ntr := &http.Transport{\n        TLSClientConfig: &tls.Config{InsecureSkipVerify: true},\n    }\n    client := &http.Client{Transport: tr}\nNot sure if it's a good idea though, but we can check if this works first.\n. @asasmoyo yes, please add a switch \"TLS verification\" when creating a registry that should toggle this.\n@WTFKr0 does it affect the usage of the registry within Portainer tho? E.g. can you still pull images with an invalid cert?. > I think we'll also need to add a warning about this somewhere. Even if tls verification is disabled, push/pull actions to said registry would fail if the url is not in insecure registries.\nWe're already displaying information about insecure registries when selecting the \"Custom registry\" option:\nDocker requires you to connect to a secure registry. You can find more information about how to connect to an insecure registry in the Docker documentation.\n\nOK with tlsskipverify\nThe good way to do that is to find where to put certif on portainer container to allow https request to this URL. If we don't find how, we can add an option when adding a registry to accept non valid certificate too\n\nAgree, we're currently thinking about this, either we display a switch to disable TLS verification when executing queries against that registry or we add inputs to specify TLS settings (form similar to endpoint creation and we add a TLSConfiguration object inside the Registry object). I believe the latter would be cleaner. It's worth mentioning that these would be used only when interacting with the registry API (and during validation). \nThough renaming the switch to \"Insecure registry\" might be misleading as it would also be required to interact with a secure registry (management API).. @asasmoyo @WTFKr0 sorry for the late update guys, we're still thinking about how we should tackle this issue. IMO we need to add the ability to specify TLS options as we do for endpoints (IDK if all the options exposed in the endpoint creation form are required here). Disable TLS verification would be the equivalent of the \"TLS only\" setting in the endpoint creation form I believe.\nAlso this work should be part of the registry management feature and thus should probably be rebased against the feat56-registry-management and merged into this branch instead of develop.. @asasmoyo sure, you can start working on this as a part of this PR. Thanks !. @asasmoyo any update on this?. Also found that you can use this API endpoint to  validate credentials: https://docs.docker.com/engine/api/v1.30/#operation/SystemAuth\nMight be good to add in here.. @asasmoyo if we use the registryID as a folder it might create conflicts with existing folders associated to an endpoint.\nWe'll probably want to update this upload handler to support the creation of folders in /data/tls/registries/<registryID>.\n. What about the following flow:\n\nCreate registry\nUpload certs\nTest registry connection (that would require the introduction of a new API endpoint)\nIf ok, go further\nIf failing, remove registry. @asasmoyo exactly, that should be a chain of promise: create endpoint -> upload certs (via $q.all() for example) -optional- -> test registry connection.. Brilliant ! I'll review this soon.. Thanks @doncicuto :+1: \n\nFeel free to tackle the same work for the restart delay field ;-). Hey @SHSolution \nRegarding monitoring (host/container metrics), we're discussing this in https://github.com/portainer/portainer/issues/943\nI'll change the purpose of this issue to track the evolution about auto-refresh. Regarding this, I think it makes sense to automatically refresh the containers and services view, but I'm not sure if it's actually useful to auto-refresh the networks, images...\nNote for those who'd like to tackle this, we're already doing it in the container stats view: https://github.com/portainer/portainer/blob/develop/app/components/containerStats/containerStatsController.js#L104-L123. Well, it's recommended to use minified sources for releases to reduce the size of the Javascript bundle. Now, we were probably using minified files inside the build-system before using the uglify task which should actually minify the bundle.\nCan you confirm that the bundle size is the same after a release when using minified/non-minified sources?. Could you give the size of each file inside these folders?. Yeah looks ok to me, I believe that you can open a PR to remove the usage of minified versions.. @creeonix I'm unable to reproduce this. \nCould you give me more details about this so I can try to reproduce? Does the stack have any environment variables?\nQuestion: was the stack created in a previous version of Portainer?. @stevenklar anything you can share to help me try to reproduce?. @creeonix @stevenklar \nCould you give a try to portainer/portainer:pr1512 (linux amd64 build for https://github.com/portainer/portainer/pull/1512) and tell me if that solves the issue? . ping @creeonix @stevenklar \nAny of you been able to try this?. Great, thanks for the report, I'll wait for an update from @creeonix. @creeonix works after testing portainer/portainer:pr1512 ? Or simply works now?. @creeonix @stevenklar so I merged the changes brought by #1512 \nHopefully that will solve the issue.. Just tested it, looks OK to me.. Thanks @1138-4EB :+1: . As @WTFKr0 said, this is a browser cache issue. You can check the version of Portainer in the container logs.\nDuplicate of #1258. I believe this is related to https://github.com/alecthomas/kingpin/issues/137\nLooks like it's going to be fixed in kingpin.v3, we're currently using v2.\nI'll tag this as an enhancement, pending an update to kingpin.v3.. Awesome @doncicuto , thanks :+1: . @joeyhub selecting \"local\" endpoint displays an information message. You still need to hit connect to be able to manage the Docker engine using the socket.\n\nAlso -p 80 seems to want an address rather than a sole port. It's short for --bind which is misleading.\n\nAgree, the short flag is misleading, please look at the docs to check the expected format: http://portainer.readthedocs.io/en/stable/configuration.html#available-flags\nThis option is here for our users that start Portainer outside of Docker, you should be able to publish the port of Portainer on another port on the host if you're running Docker inside a container.\n\nIs it possible you're blanking out the button when it shouldn't be or the colour scheme is making it look disabled plus all the warnings being misleading (as well as it defaulting to remotes tab)?\n\nNope, no blanking here, just hit connect.\nHere is a quick start deployment:\n$ docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /path/to/portainer/data:/data portainer/portainer -H unix:///var/run/docker.sock\nI'll close this issue as it seems that your problem is solved.. Hi @xoxys \nYes, we use a library for git (https://github.com/src-d/go-git v4). Is this git repository private?. @chrisandchris not yet,  tho we need to open an issue to track this evolution. Could you open a feature request?. @xoxys from https://github.com/src-d/go-git/issues/460 it seems that the \"reference not found\" when an incorrect branch name is specified. This is not what Portainer is doing tho, but could you be using a branch different from master in your repository ?\n@HuTaeh are you using the master branch as well?\n. @xoxys thanks for the investigation. I believe this will not work if you're using a branch that is different than master.\nI'm also unsure why specifying refs/heads/master as the ReferenceName would solve the problem, I believe it should fetch the master branch by default.. Almost the same issue was reported via #1796 (see details in the issue on how to replicate the gitea setup).. ~@WTFKr0 did something went wrong with the rebase? I can see the changes from other commits in the PR.~\nEDIT: allright, I've rebased feat56-registry-management. Hi @WTFKr0 Could you rebase now that #1623 has been merged?. I'll rebase feat56-registry-management today !. Rebased, I found your issue as well, will comment the codebase.. Awesome @WTFKr0 :+1: \nLet's tackle the next step ;-). @xoxys please open another issue for  LDAP attribute mapping. We'll track the user auto-creation feature in this one.. @AlexJakeGreen feel free to open a PR :-). I just had a look at the PR @AlexJakeGreen \nHow do you address the fact that even if you automatically creates the user in LDAP they're still unable to access any endpoint? Thus, new users are still blocked at the authentication screen.. IMO the best solution is to implement the LDAP group <> Portainer team mapping.\nWhat's your thoughts @ncresswell ?\nRegarding read-only access, this is going to be tackled in https://github.com/portainer/portainer/issues/1259\n. We're currently discussing a potential change in the registry selection UX when using images (pull image, create container, create service...), see https://github.com/portainer/portainer/issues/1434#issuecomment-347270725\nThe decision to integrate a new UX might impact this feature request, will mark as pending till #1434 is resolved.. Sorry for the late update.\nFrom what I can see in that specific use case, the output of the docker images  command is the following:\ntraefik             <none>              2e7af90a3e22        6 weeks ago         45.6MB\nNot sure that we want to display the tag traefik:<none> inside the images list as it's sort of a confusing tag... \nMaybe just tag it as traefik ?\ncc @ncresswell . Great, also please put a description of the changes brought by the PR.. > Check, I finally found where it is coming from. The version number is stored in the local storage of the browser. That explains why clearing the cache and refreshing the page didn't help.\nExactly, this is a known bug and has already been reported: https://github.com/portainer/portainer/issues/1258\n. I believe that the root cause of this issue is the fact that a container cannot be connected to multiple networks at creation time.\nThe following flow should be used here:\n\nRemove the previously existing container\nCreate a new container with the same configuration as well as one of the defined networks\nPost-creation, connect the container to the extra networks\n\n\nIn case of an error happening in the middle of a recreation, the original container should continue to exist, even if it had been stopped (which it should be in order to bind the ports, if any).\n\nDue to the fact that container names are unique and we rely on the container name as an identifier to check if we need to replace the container we cannot keep the previous container, it has to be removed.\nWe might need to review the entire edition flow and try to figure out a way to keep the previously created container in case of error.. I believe that the container re-creation workflow presented above by @dexafree should be implemented to solve many container re-creation issues.. @poVoq there is no way to re-create a container in the Docker API. It has to be replaced by a new container, hence the requirement of removing the actual container and creating a new one.\nThe new re-creation flow would prevent the removal of the existing container upon creation of the new one, which would avoid the loss of any container. If the new container is created successfully, we consider the re-creation process to be ok, hence no need to keep the old container and it will be removed.. Thanks @Duvel :+1: . Closed in favor of #1527. Hi @klud1 and thanks !\nPortainer acts as a reverse proxy to the Docker API, meaning that there is no Swarm endpoint in the Portainer API, instead you can query the Docker API to manipulate/retrieve Swarm related stuff: https://docs.docker.com/engine/api/v1.30/#tag/Swarm\nHere is an example to help you query the Docker API through Portainer API: https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8#execute-docker-queries-against-a-specific-endpoint\nIf you got more questions, feel free to ping us on Slack: https://portainer.io/slack/\n. I've been able to reproduce this.\nIn the meantime you can use the link to the published port in the service list view as this one is functional.. #1578 fixes the original issue.\n@cbrherms for your use case, you should specify the IP address that you want to use in the Public URL field of the endpoint.. @agrawal93 please open a new bug report as this one is fixed and related to stack details.. @fabrizio2210 \nHmm, what if you don't specify the tag linux-arm ? E.g. use portainer/portainer. Portainer image is multi-arch, it should auto-detect which image to use.. > Do you have the read only user for per docker-service?\nFine-grained access controls are discussed in #1259 (read-only account is related to #69)\n\nWhen i create service by Linux Terminal. The portainer can not control the privilege.\n\nSee https://github.com/portainer/portainer/issues/1257 & https://github.com/portainer/portainer/issues/960\n. Duplicate of #1258 . @1138-4eb yes definitely. Actually all forms that requires typed input should be considered . Closed by https://github.com/portainer/portainer/issues/1559. I was able to reproduce this bug, I believe it should be easy to fix.. Heya, I was able to successfully create a Portainer instance using a generated password password.\nHere is what I did:\n\nGenerate the hash for the password password:\n\ndocker run --rm httpd:2.4-alpine htpasswd -nbB admin password | cut -d \":\" -f 2\n$2y$05$arC5e4UbRPxfR68jaFnAAe1aL7C1U03pqfyQh49/9lB9lqFxLfBqS\n\nUse the following service definition in a docker-compose.yml file:\n\n```yaml\nversion: '2'\nservices:\n  portainer:\n    image: portainer/portainer\n    ports:\n      - \"9000:9000\"\n    command: --admin-password \"$$2y$$05$$arC5e4UbRPxfR68jaFnAAe1aL7C1U03pqfyQh49/9lB9lqFxLfBqS\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n```\nHave you tried to use double quotes instead of single quotes ?. > I can see another error in the JS console, perhaps related to this?\nNope, this error code is returned by the API when credentials are invalid. This behavior is normal.\nQuestion, how are you restarting the stack each time? Are you sure the container is re-created ? The --admin-password flag is only taken into account the first time Portainer is started. If the container is restarted, the flag will be ignored (this is to avoid overwritting the password each time the container is restarted).\nTry to cleanup your compose environment (docker-compose down) and then to apply the instructions I posted above.. Great, I'll close the issue.. That's probably related to the other content inside the table, could you post a screenshot of the entire table?. Thanks ! \nThe image column is too wide in that case, I believe it should be truncated as well. We'll use this issue to track this enhancement.. @yassirh I'm not a huge fan of fixed width columns... (not to mention features on hover), I believe that truncating the image name should be good enough here.. @yassirh I'm thinking that the images named sha256... should be truncated as this information is not really meaningful (based on the number of chars, yes).\n@Nhoya not really fond of being able to scroll inside a cell, don't think that's great UX. Tho we're thinking about adding horizonal scrolling in datatables at some point.. @yassirh I agree, that'd be the way to go.. @yassirh that filter is used on the image name associated to a service, we might need another filter here.. I think that it's the default behavior of the library (https://github.com/revolunet/angular-google-analytics) used here, probably reaching out to google-analytics for the required script. \nWhen using the --no-analytics flag, it will actually prevent to send data on a periodic basis to GA. I believe this is not really an issue so I'm going to close it.\nFeel free to comment / re-open if you think that I'm missing something.. Thanks @doncicuto :+1: . An image for this implementation is available via portainer/portainer:pr1512.. I believe that this feature request is a mix of #270 and #1380 \nBasically giving the ability to a user to copy files inside a container and to explore a container's volume content.\nI'll close this one as a duplicate of these features.. @doncicuto could you fix the conflicts ?. Thanks :+1: . You're welcome, thanks a ton more for your contributions ;-). Awesome, thanks a lot for your work @doncicuto :trophy: . ~From what I can see in the Docker API, only the LeaveSwarm operation exists: https://docs.docker.com/engine/api/v1.30/#operation/SwarmLeave~\n~Not sure how the Docker CLI handles the docker node rm part, we should investigate this.~\nEDIT:\nThis should be done by using the LeaveSwarm and NodeDelete operations:\n\nhttps://docs.docker.com/engine/api/v1.30/#operation/SwarmLeave\nhttps://docs.docker.com/engine/api/v1.30/#operation/NodeDelete\n. @WTFKr0 yeap, as a part of another feature request probably.. Could you attach a screenshot as well here? I don't have access to a DO instance right now, so it may take some time to reproduce this.. Ping @basz . I'll tag this one as a duplicate of #1918 . Hi @Duvel \n\nI'm not keen to add stuff related to different dev environments into the project... If you want to avoid committing IntelliJ related stuff, please use a global .gitignore on your development machine: https://help.github.com/articles/ignoring-files/#create-a-global-gitignore. See my comment in #1519 . Sorry @Duvel for the late review, mind fixing the conflicts? I'll have a look ASAP once it's fixed.. Great, I'll have a look today.. @Duvel what kind of errors? Be sure to run yarn to ensure you have the latest dependencies installed.. @Duvel you probably need to rebuild the backend:\n$ yarn grunt clean\n$ yarn grunt run-dev. Maybe an issue with the merge? Let me build your branch and check. Are you hitting the 404 when displaying the stacks view?. Ah, perfect, I'm going to try to build it locally anyway. Update soon. Looking good, I think that the code should be relocated inside the ImageViewModel function but I'll do it myself to speed up the process.\nI'll merge.\n. Thanks @Duvel :+1: \nAnd sorry again for the delay !. Thanks @yassirh :+1: . Closed by #1546 . @buehlmannpa can you give me an example of how you'd like an SSO integration here? Would the OAuth integration requested in #1124 work for you?\n. @buehlmannpa how do you usually configure CAS to enable SSO on third-party applications?. Hi @Redsandro \nI believe this is a duplicate of #430 (scroll to bottom feature request is #1281) that should be tackled in #317.\n. Heya, I can see only one question, so will answer this one:\n\nHow to make Portainer issue the same IP to specific containers every reboot?\n\nActually, this is the default behavior of Docker, not Portainer. In order to solve your problem, you can choose one of these solutions:\n\n\nAssign a static IP address to each container, this is done during creation time and can be achieved by using the IPv4 Address field in the network tab.\n\n\nCreate a new Docker network and start the containers inside that network, you'll then be able to use name resolution based on the container names instead of IP addresses to communicate between containers (thus preventing any IP change to break your setup).\n\n\nHope that helps, I'll close this issue, feel free to comment or re-open if you think I'm missing something.. Yes, sorry about that, we will update the docs.\nRelocated to https://github.com/portainer/portainer-docs/issues/37. I cannot reproduce this issue. @ghost Are you able to reproduce using the latest Portainer version (1.17.0)?. Yes, I believe that we will need to integrate a feature similar to the rancher-ecr-credentials project to automatically update credentials.\nAccess to an ECR registry is controlled by AWS IAM, an IAM user must request temporary credentials to the registry using the AWS API, see http://rancher.com/using-amazon-container-registry-service/ for more details.\n. @jgrasl starting with 1.17 Portainer is using a specifc config.json file located in /config.json.\nIf you're using the Dockerfile example above, then changing this line might solve your issue:\nCOPY config.json /config.json\nNote that the location of the config.json might be updated after solving https://github.com/portainer/portainer/issues/1888. Right, we'll try to preserve the content of the config.json file when solving #1888. @jgrasl keen to give a try with portainer/portainer:pr1898 ?. @jgrasl well with pr1898 you'd need to update your Dockerfile:\nCOPY config.json /data/config.json. @jgrasl you're using FROM portainer/portainer:pr1898 in your Dockerfile right? Any existing config.json in that volume?. Actually, mounting a volume to persist Portainer data will map a folder on disk to /data, making that COPY config.json /data/config.json statement useless.\nI'm trying to think of a way to persist user changes to config.json before deployment.. @jgrasl How are you persisting Portainer data? Using a named volume? If you're using a named volume AND the volume is empty (e.g. just created) it will have the config.json copied from the Dockerfile. If you're reusing an existing data volume, I believe the config.json file will not be copied.\nMight be problematic for people upgrading their Portainer instance, still searching for a better way to keep config.json changes.. @jgrasl this is what I'm thinking as well. If anybody using this workaround wants to continue using it and have existing Portainer data, they'll have to put their config.json in the root of the existing data directory. If people are starting to use this workaround and do not have any existing data, then the config.json will be created in their data directory.\nNonetheless we'll need to find a real solution for this later on.. We have not thought about it yet, quite busy with other topics atm :-). @reineruhry see the posts above.\nBasically, use portainer/portainer:develop and copy your config.json in the data volume (you need to find the folder on disk first) of Portainer.. @reineruhry yup, it's now part of 1.17.1. @jgrasl @dawidpawlowski pulling an image through Portainer implies to pass credentials to the pull operation Docker API request: https://docs.docker.com/engine/api/v1.37/#section/Authentication\nPortainer does this automatically by looking at the image you're trying to pull, it will automatically find the associated registry (provided that it is created inside the app) and pass the credentials.\nWe're aware that this is not working with ECR registries.. Agree, that would be a nice enhancement.\nSome notes about the UX:\n\nThis feature should be enabled only when selecting an existing image on the node (in the typeahead component)\nWhen selecting another image, existing ports should be removed\n. Brilliant ! I'll review it ASAP.. An image is available for this implementation via portainer/portainer:pr1536 (linux amd64 build).. I love it ! Thanks for the contribution @doncicuto !\n\nBTW I really like the details you bring in each PR descriptions :+1: . Quick question @rahulruikar : what is the JSON format used to add labels in this implementation? Could you give us an example?\nI'll review it soon.. I'd rather see the labels in the following format:\njson\n{\n  \"labels\": [\n    { \"name\": \"com.example.vendor\", \"value\": \"Acme\" },\n    { \"name\": \"com.example.license\", \"value\": \"GPL\" },\n    { \"name\": \"com.example.version\", \"value\": \"1.0\" }\n  ]\n}\nThis would allow a transparent conversion to the UI. Could you update your PR to adapt these changes?\n. Thanks @rahulruikar :+1: . Thanks @WTFKr0 :+1: . @1138-4EB seems that we got some issues with Codefresh that is building the portainer/portainer:develop image. I'll investigate.\nAs for your question @Haxy89, no, Portainer does not have an auto-update feature and I'm not sure that we want to support it. A feature request is open to have an in-app notification if a new version is available: https://github.com/portainer/portainer/issues/716\n. @zenny \nHave you tried following the instructions in the docs?\n$ /opt/portainer/portainer -d /opt/portainer-data -p :9999\nAs @WTFKr0 specified, you might need sudo:\n$ sudo /opt/portainer/portainer -d /opt/portainer-data -p :9999\n. Closed due to inactivity.. @GoWebProd \nI'm not sure about what you're asking here, could you be more specific?. Can't you use an exec session (via Container console in the UI) to do that?. ping @GoWebProd \n. Indeed, I was able to reproduce this, the issue is that you cannot change the ownership of some public resources (it affects volumes and networks).. @cbrherms that's all right, I'll squash during merge.. Thanks @cbrherms :+1: . @thomasleveil Fixed ! You can test it via the portainer/portainer:develop image.\n  . Hi @puncha \nI believe it's now easier in 1.15.5 to remove all stopped containers:\n\nGo to the containers view\nClick on \"Filter\" right under the state column header\nSelect only \"stopped\", only stopped containers will be displayed\nClick on select all and remove\n\nIs that ok for you?. Thanks for the kind words ! \nI agree that this feature is missing. I believe we should tackle the private git repository support before the automatic check & deploy trigger.\nRegarding the private git repository support, I'm still unsure about the UX in Portainer. My first idea is to add a simple slider \"Use authentication\" and automatically add two inputs for username & password when the authentication is enabled.\nAny thoughts? . @tcjennings regarding your request of serving the stack YML file from an URL, see https://github.com/portainer/portainer/issues/1573. First step on this is available via portainer/portainer:pr1722. It gives the ability to enable authentication when creating a stack from a git repository and allows the user to specify a username/password combo.\n@chrisandchris @olifly @dcharbonnier @gopi-para-mpf @zeenlym any of you keen to try this image and give us some feedback?. Hi @alexya \nAre you using Portainer behind a reverse proxy? Have you tried to access your server via IP (e.g. https://x.x.x.x:8080).\nCould you copy/paste the content of the Portainer container logs as well ?. Either via docker service logs portainer or docker logs <portainer_container>.. Ah, glad you solved it.. @stevenklar you might want to open a feature request for the usage of a websocket to have a live dashboard.\nGrafana timespan equivalent in stats/visualizer views might be an enhancement as well, so another issue.. Thanks @doncicuto :+1: . I believe that the searching in a Swarm would be achievable with #461 \nSearching in all endpoints tho is another matter, I'll keep the discussion open on that subject as I'm not sure if this is something we want to add.\nAgent's looking great, we're also working on an agent to solve #461 (more info about this soon).. Hi @mgiljum \nThis is something that is already available in the container-details view. Click on a container name in the container list, then use the edit icon next to the container name in the container-details view.\nDoes that answer your question?\n. Thanks a lot @doncicuto :+1: . I'm unable to reproduce this bug. Could it be related to your container?\n\n\n\n. Thanks for the investigation @doncicuto \nGive us some feedback on your tests.. Awesome, thanks @doncicuto \n@kristoferlundgren could you give a try to the image portainer/portainer:pr1576 and tell us if this solves your issue?. Strangely, I'm not able to reproduce in my Swarm cluster:\n\n\nCreate a service from the CLI using docker service create --name nginx --replicas 2 nginx\n\n\nGo to services > click on Nginx > Update to 3 replicas > Apply changes\n\n\nI can see that another task is being created and then running. No stopped tasks. My cluster is using Docker 17.09.1-ce, I'll try later on 17.12.0-ce.. I believe that we need to file an issue in Docker repository about this issue, as it looks like a regression/bug of the Docker API. @doncicuto could you do that?\nI'll merge the changes brought by @doncicuto in #1576 as a temporary measure but I'll leave this issue open and mark it as work-around.\nThese changes might be reverted later if an action is taken in the Docker repository.. #1576 has been merged.. Awesome, thanks a lot @doncicuto \n. As reported in #1610 we also need to update the scale process in the stack-details view.. @doncicuto have you been able to open an issue in Docker repository ? Might be a good first step to know how to handle this.. Awesome, let's wait for an update in that issue to figure out how we should work around this. I'll consider adding work-arounds in the meantime.. Thanks @bigbrozer :+1: . @peterforeman could you give us some reproduction steps?. @mateuszdrab clean your browser cache and then access Portainer UI again, some data might still be persisted.. Yes, we don't support volumes options yet in Portainer. I'll flag this request as an enhancement.. Agree, but I'd rather see new properties for this:\n\nrepository: should be kept, related to git repositories only\nurl: absolute url to the stack file\npath: absolute path on disk to the stack file\n\nHaving at least one of these properties is mandatory for a template to be valid. These options are mutually exclusive (in this priority order).. Yes, you're right.\n\nIn this case, is the separation between \"url\" and \"stackfile\" still needed in the \"repository\" solution ? Have this separation been made in the first place in a specific purpose ?\n\nYes, it gives a better isolation between these differents methods. I think it makes more sense to group all the repository related properties inside the same object (this will probably evolve later as well to support branches, tags, etc).\nWe need to check if the others methods of retrieving a stack file (URL, PATH) might need extra parameters later on, if so, we might want to encapsulate these properties inside an object as well.. Discussion to deprecate templates originated here: https://github.com/portainer/portainer/issues/952\nTho, latest update on this topic is that we're not going to deprecate this flag. I'll update the related issue.\n. @toninis no ETA on this yet. Thanks @RobbyVoid :+1: . A Docker image is available for this implementation via portainer/portainer:pr1576 (linux amd64 build).. As stated in #1569, this will be merged as a temporary fix.. Thanks for the investigation and the workaround @doncicuto :+1: . @ashmckenzie have a look at the container re-creation feature in the container details view. IMO it should be pretty similar to this behavior. You click on update, a modal pops up with the switch to choose if you want to update the associated service images.. @mrmachine your request is probably more related to https://github.com/portainer/portainer/issues/1595. Agree, will update.. Updated via #2023 . Thanks, reported as a part of #317 . #2735 introduce a change that cause the tab key to use spaces.. Duplicate of #1257 \nAlso related to #960 . I just tried it and it's working fine. Probably an issue on your side, sorry, can't really help debug what's happening in PWD.. Hey @Fish2, are you using the --ssl flag? Can you give me the full command used to start your Portainer instance?. Thanks, I'm on it.. Hey @chrisvanderpennen, thanks for the report.\nCould you give a try to portainer/portainer:pr1586 and tell me if it solves the issue?. @chrisvanderpennen nice ! \nYes, please open another issue to report the problems on the other routes.. An image is available for this implementation portainer/portainer:pr1586 (windows amd64 build only).. portainer/portainer:pr1586 (windows amd64 build only) updated.. I believe that this is also related to previous Portainer versions.\nPlugins are detected in some views to enhance the UX:\n\nNetwork-creation: automatically detect available network drivers on the host and propose the list of drivers via a dropdown component\nVolume-creation: automatically detect available volume drivers on the host and propose the list of drivers via a dropdown component\nService-creation / service-details: automatically detect available logging drivers and propose a list of drivers via a dropdown component\n\nAs plugins are not supported on Windows, I'll find a way to work around this.. I've included the fix for this issue in #1586, could you update portainer/portainer:pr1586 and test again to see if it fixes your issues?. Thanks a lot for the feedback @chrisvanderpennen . An image is available for this implementation via portainer/portainer:pr1589 (linux amd64 build).. Actually, this one is a duplicate of #1489 . @roysG what kind of parameters?. Portainer execute any stack deployment using the --with-registry-auth. But you need to define the registries inside Portainer first.. You need to add the registries inside Portainer. Go to Portainer settings > Registries and create all the related registries in here.. @RaymondMouthaan no there is not at the moment, you might want to open a feature request for this and describe the use case if possible.. @RaymondMouthaan just create a new issue in here, give it a clear title and a description of what you'd like to achieve using Portainer.. @roysG any update on this?. Closed due to inactivity.. Hey @Haxy89 could you give us more details about your environment? Is that a Docker on Windows instance?. You mean Docker 1.12 ? FYI, you cannot update the Portainer container from within Portainer, it has to be done manually.. I was able to reproduce this when connecting to a Swarm cluster powered by Docker 1.12.. @Haxy89 Could you give a try with the image portainer/portainer:pr1594 and tell me if that solves your issue?. Sorry @mrots, the fix will be included in the next release (probably out today).. An image is available for this implementation via portainer/portainer:pr1594 (linux amd64 build).. From what I read online I believe that always is the default to --resolve-image but --resolve-image is not used unless added to the command line.. I believe that we can add a new field to the stack creation form (API >= 1.30 and Swarm mode only) with a dropdown defaulting to always.. Hey @Skaronator, thanks for the report.\nCould you give me the content of the /docker/containers GET request ? (Use developers tool in your browser to retrieve it).. Ok, I'm planning to do a new minor release today, might be able to fix that if I can get more info. . @Skaronator any chance to get an update on this soon?. I'm unable to reproduce this somehow, we'll have to wait for your input on this.\nRegarding your style change request, please open a new issue.. Sure, we could generate a different color for each service available and update each \"task\" here using that color.\nUX wise, the status of each task should still stand out though.. @maocorte looks good, I'll have a look at the PR.. Thanks for the report, we'll investigate.. I was able to reproduce this somehow. It seems to occasionally happen, we'll have to look at this further.. Found a way to reproduce this issue:\n\nGo to configs\nCreate a new config\nInspect this config\nGo back to configs\nGo to config creation\n\nAfter that the content section seems to be unavailable.. An image is available for this implementation via portainer/portainer:pr1601 (linux amd64 build).. Closed in favor of #1666 . Hi @nucleusv \nThis was fixed via https://github.com/portainer/portainer/issues/1588 and release in the version 1.16.1 of Portainer. Please pull the latest image.\nDuplicate of https://github.com/portainer/portainer/issues/1584. We will need more details, what platform are you using ? How did you start Portainer? Could you give me the logs of the last Portainer container (use docker logs <container_name> with the Docker CLI) ?. Ah of course, this cron entry will create a new Portainer instance after each reboot. Closing this issue.. Hi @alues \nIt looks like you're not using the correct Docker image, you should use portainer/portainer:latest and not portainer:latest.\nAlso, CentOS might have SELinux enabled, so you might need to deploy Portainer using the --privileged flag as documented here: http://portainer.readthedocs.io/en/stable/deployment.html#quick-start\ndocker run -d --privileged --name \"portainer\" -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer:latest. Did you try with the --privileged flag? Seems related to your distribution, have a look at https://github.com/moby/moby/issues/35972\nAre you able to start other containers?. ping @alues . I think this is related to your Docker setup, are you able to try this on another host?. > P.S. i am not trying to exec into the Portainer container. Please close this issue if this is the wrong place to ask this question\nWhat are you trying to achieve exactly ?\n\nEnter the \"Command\" : /bin/bash and \"User\": root\n\nDo you specify your own command and then input /bin/bash or are you using the /bin/bash from the command dropdown list ?. This is pretty strange, I'm not able to reproduce this on my side. Does the docker exec from the CLI works? Have you tried to use the console in others containers from Portainer? Are you using a reverse proxy in front Portainer?. Hmm, this is pretty strange, can you reproduce this using these images on another Docker environment?. Maybe you can show me a report of all the HTTP requests after going the the console view (from the browser developer tools) ?. Actually, this is what I'd like to see:\nA state of all the HTTP requests in that view (after going to console and clicking on the connect button):\n\nThe response of the exec request:\n\nAnd the response of any failing request.. ping @shabbirkagalwala . Closing for inactivity.. You can go in the container-details view (go to containers then click on the container name) and then use the form inside this view to create an image from this container. Does that answer your question?. This will create an image from the container only, the linked data volume will not be backed up.\nYou might want to follow https://github.com/portainer/portainer/issues/935 for the discussion about volume backup.\nClosing this issue, feel free to reopen/comment if you're missing any information.. Right, we forgot to update this part. I'll close this as a duplicate and reference it in #1569 as it's directly related to this issue.. Hi @pvdspoel22 \nAre you sure that you're using the version 1.16.1 ? This version does not have the health check integrated anymore (was in 1.16.0 and dropped in 1.16.1).. @ajeffco @pvdspoel22 what's the content of the Portainer container logs? docker logs <portainer_container_name>. @pvdspoel22 Can you give me details about the portainer/portainer:latest image? \nHere is what I have for example:\n\n\n. So, looks like there is no HEALTHCHECK command in the image layers but still, you guys have a health check... that's super strange.. Hmm, that's pretty strange. Thanks for the detailed workaround though. I'll leave this issue open for now as other people might encouter this issue.. @pvdspoel22 can I ask what was the previous version of Portainer before you triggered the upgrade?. This was already mentioned in https://github.com/portainer/portainer/issues/415\nI'll close https://github.com/portainer/portainer/issues/415 and keep this one open though as this issue has a better description.. Hi @ns-cweber \nDepending on what you want to achieve, you can execute actions against some nodes in the Swarm view when Portainer is connected to a Swarm manager (Swarm > click on the name of a node).\nIf you want to manage the resources inside a node, you'll need to define the node as a new endpoint inside Portainer (and thus requires you to configure these nodes to listen over TCP yes).\nMight be related to #461 as well, we're working on a solution to give you the ability to manage all your cluster resources (containers, volumes, etc) from the same endpoint.. Right, this is due to the fact that we use the embedded Docker binary to deploy stacks. A work-around this might be to simply ignore any docker login errors before deploying a stack.. Hi @nbaum \nCould you give a try to portainer/portainer:pr1635 and tell me if it solves your issue?. @maocorte I'd accept a PR. Events are only displayed when connected to a standalone environment at the moment, so need need to implement the Swarm related events.\nAlso, our vision on this is to replace events with an audit section at some point: https://github.com/portainer/portainer/issues/696. Thanks for the report, we'll investigate. I'll tag this as help needed as well as I do not have access to a TLS enabled AD at the moment.. Hi @danielvS373 \nThanks for reporting this, this PR introduced changes regarding the min TLS version: https://github.com/portainer/portainer/pull/2382\nI wonder if it could solve your problem, can you give a try with the image portainer/portainer:pr2382 and tell us if that solves the issue?. @danielvS373 thanks for this, I wonder if setting the max version to tls 1.1 could have potential issues with other kind of TLS setups.... Fixed by #1618 . Reverted by #1619 . Thanks for fixing this @benyanke :+1: \nHave a look at our contribution guidelines if you plan to help: https://github.com/portainer/portainer/blob/develop/CONTRIBUTING.md. Actually, I merged this too fast, could you re-open a PR but using the develop branch as a base?. Reverted by #1619 . Thanks @benyanke :+1: . #1636 introduced an auto focus on the search field.\nWe still need to tackle the filter persistence on the client side.. Closed via #2017 . Closing this issue, thanks for answering that @doncicuto . Hi @benyanke \nThanks for contributing ! Before opening a PR please check if an issue is open for a feature request, if not, please open one so that we can discuss if this should be added first :-). Closed as #1627 was rejected.. I don't think that this should be added as it would just make information redondant and takes extra space on the screen for useless information after all.\nI like the idea of keeping the description field optional.\n. Related discussion for prune features in https://github.com/portainer/portainer/issues/1102\nWe already considered adding this feature but rejected it as we consider it to be too dangerous for the user, see: https://github.com/portainer/portainer/pull/347#issuecomment-260504269\nAs a workaround, you can manually filter all the unused volumes and remove them.. Hi @Jannik-Lappe \nThanks for reporting this.\nPlease ensure that the Portainer container is removed and another one is created before trying each scenario.\nAlso, browser cache issues might appear between these scenarios, could you retry using a private navigation session for each one?\nRegarding the fact that Portainer do not accept your admin password during authentification, please ensure that you use double quotes and escape each $ chars, see this comment as an example: https://github.com/portainer/portainer/issues/1506#issuecomment-351708374\n. Thanks for the update, unfortunately I do not have the ability to re-create this setup at the moment. Will tag this issue as help wanted as someone in our community might be able to help us here.. Going to close this as a duplicate of https://github.com/portainer/portainer/issues/1348\nI'd rather see tooltips here (something that we do already for stack templates) see the description property of the env object: http://portainer.readthedocs.io/en/stable/templates.html#id6\nSee picture below as well:\n\n. Could you share the logs of the Portainer container? Did you create the /opt/portainer folder manually? Can you try to remove that folder and directly run docker run -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer ?. Hi @malikkal \nThanks for reporting this issue, we'll investigate.. Duplicate of https://github.com/portainer/portainer/issues/597\nPlease follow the discussion in the associated issue. Note that there is no decision on this feature yet.. Sorry, thought it was only related to container creation. Indeed, I'm going to re-open this but as discussed in #597 we're using the Docker API to execute Docker requests and implementing this only for container options is a bit challenging already. Will consider this issue for now and see if we want to integrate this feature.. An image for this implementation is available via portainer/portainer:pr1635 (Linux amd64 build only).. This is in our plans but we're currently missing the funds/resources to tackle this topic.. After having a quick look at https://github.com/docker/compose-on-kubernetes/, it looks like we can leverage the clientset interface to communicate with a Kubernetes endpoint. \n\nhttps://github.com/docker/compose-on-kubernetes/blob/master/api/client/clientset/clientset.go\nhttps://github.com/docker/compose-on-kubernetes/blob/master/api/client/clientset/typed/compose/v1beta2/compose_client.go\nhttps://github.com/docker/compose-on-kubernetes/blob/master/api/client/clientset/typed/compose/v1beta2/stack.go\n\nBased on \n\nIt seems that the Compose controller and Compose API servers must be enabled/deployed in the k8s endpoint first.. I don't think this is something we want to bundle inside the software, instead you could use a reverse proxy to achieve this.\nYou can have a look at our Nginx sample configuration here: http://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer. @danielfaust please open another feature request to track this. I really like this idea ! Thanks for opening that feature request.. @JermaHuang You can use the HTTP API exposed by Portainer to execute a batch of endpoint registration requests: http://portainer.readthedocs.io/en/stable/API.html\nDoes that help?. Yes, we're working on an agent setup that will give you the ability to manage all the resources inside a Swarm cluster (containers, networks, etc...)\nRelated to #461 . I believe @WTFKr0 gave the right answer, feel free to comment/re-open if you're missing some information.. > if i recreate a container which is in two networks\nThis is not possible at the moment (bug report #1491) so I'm not sure about how you're achieving this\n\nPortainer will save one MAC for both networks and creates duplicated MACs\n\nHere is a screenshot of a container created inside one network and joining another network post-creation:\n\nAs you can see, MAC addresses are different.\nCan you give us more details / reproduction steps?. Closing #716 in favor of this issue as it's a bit more detailed.\nI believe that the first step would be to display a notification inside the app when a new version is available.\nI'll be tricky to trigger the update process from Portainer itself as a new container needs to be created using the latest version (you need to remove the actual container first, causing issues as Portainer will not be able to talk to the HTTP API anymore and thus not communicate with Docker). A potential implementation for this should be discussed here.. @KLuuKer it is an interesting idea indeed, we could create a simple upgrade container that would take care of updating the Portainer image and re-creating the container.\nAlthough we also provide the ability to start Portainer outside of Docker, so we need to suppor an upgrade process for this kind of deployment as well.. Hey @boissierflorian \nGreat, have a look our contribution guidelines and our contribution docs first:\n\nhttp://portainer.readthedocs.io/en/stable/contribute.html\nhttps://github.com/portainer/portainer/blob/develop/CONTRIBUTING.md\n\nAnd then feel free to open a PR.. Closed by #1659 . Duplicate of #524 \nRelated to #317 \nWe need to consider how we want to render the logs via #317 before we decide of which library should be used.. Sure, feel free to open a PR to implement this.\nI'll try to see if I can get some time to tackle #317 soon. Following the merge of #1666 \nI've tried to check how to get ANSI code sequence rendered into the log viewer on the frontend but that always implied to use $sce.trustAsHtml and thus trusting the content of the logs to be HTML. This would lead to a potential XSS vulnerability thus I've decided to not add this feature for the moment.\nWe might want to check other leads to implement this (maybe prepare the logs on the backend first).\nIn the meantime, #1666 introduces an automatic removal of the ANSI code sequences from the log output, that should clarify the logs of some containers.. Watchout for https://github.com/portainer/portainer/issues/1654#issuecomment-369135359. I believe this is a duplicate of #1240 \nPlease comment in that issue if you want to add more details or re-open this issue if you think it's not related or that I'm missing something.. This implementation can be tested via portainer/portainer:pr1656 (linux amd64 build only).. Yes we're working on this, our registry management extension is coming soon ! Closing this PR.. Duplicate of https://github.com/portainer/portainer/issues/506\nAnd yes, that'd be awesome to add !. Thanks @boissierflorian :+1: . Hi @74cmonty \nPlease copy/paste the logs of the Portainer container here (use docker logs <portainer_container_name> to retrieve the logs).\nIs this issue happening only when accessing the volumes/networks ? Can you try to start Portainer using the --privileged flag to see if it solves the issue?\ndocker run -d -p 9000:9000 --privileged -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer -H unix:///var/run/docker.sock\n. I believe that you might want to check the discussion in https://github.com/portainer/portainer/issues/662\nEspecially https://github.com/portainer/portainer/issues/662#issuecomment-288864212\nTell us if that helps.. Yes, have you tried to connect to your host using TCP instead of using the socket?\nFirst you should configure your Docker engine to expose the API over TCP. \nThen you should remove any existing Portainer data (the volume portainer_data) and restart Portainer this way:\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer -H tcp://HOST_IP:HOST_PORT. Sorry for the late answer. I believe that the way you describe the feature is a bit too technical here, actually I did not even understand the use case behind it. Could you give me more functional details about what you'd like to achieve?. Kinda related to https://github.com/portainer/portainer/issues/1304. FYI here is the first sketch of the specs:\nService redeploy feature\nPortainer can expose a new webhook API that can be used to trigger an update of specific services.\nNotes: \n\nthis spec only describe how to associate a webhook to a Swarm service (for Swarm stacks, each service of the stack could be updated independently via the service-details view). We could potentially add the same behavior to containers but we should start with services first.\nit can be interesting to play with https://github.com/imjosh/docker-deploy-webhook to get some extra insights.\n\nPortainer UI (frontend)\nIn the service-creation/service-details views, a new switch \"Create re-deploy webhook\" is added.\nWhen enabled, upon successful service creation a HTTP POST request is sent to /api/webhooks (authenticated user policy) with the following payload:\njson\nserviceId: docker service identifier of the service,\nendpointId: endpoint identifier where the service is located\nPortainer API (backend)\nThe previous request will create a new webhook object:\njson\nid: webhook identifier,\nserviceId: docker service identifier,\nendpointId: endpoint identifier where the service is located\nThe webhook can then be used by sending a HTTP POST request to api/webhook/:id (public access policy in order to be reached from external services such as DockerHub)\nIt requires no payload.\nNote: as the /api/webhook/:id endpoint is publicly exposed, the webhook identifier format should be in the form of a randomly generated string. We might want to add an extra query parameter that can be matched for access restriction.\nWhen receiving a POST request at /api/webhook/:id, the API will send a request to the specified endpoint to retrieve details about the service associated to the webhook (using the service identifier). It will extract information about the image used in the service details, retrieve any registry authentication details if required (check in database) and send a service update request. \nNote: In order to execute Docker requests from the backend, we will probably need to embed the Docker SDK inside the API to allow the backend to act as a Docker client.. @Cinezaster that's the goal, yes. Yes, you'll be able to go the service-details view to create a re-deploy webhook as well, I'll update the specs.\n. Yup, it's still in our priority list, I'll assign someone on this soon.. Anybody keen to try the implementation for this? It's available via portainer/portainer:feat1663-add-webhook (Linux amd64 build only).\nAny feedback welcome !. @Strum355 only for Swarm services right now.. No ETA yet. Any feedback from the users that were able to test this yet?. Thanks @Cinezaster \nAlso thanks @ibnesayeed but I was expecting UI/UX feedback :-)\nRegarding your technical points:\n\nShould we namespace webhook URIs (by including services in the URI to extend the functionality to other aspects such as images in future)?\n\nI don't think so, but we'll extend the Webhook object to support a new Type field.\n\nI think the  tag issue is present in the stack functionality. When a stack is deployed/updated without first updating the image explicitly, the image that is pulled does not get tagged properly. I have been seeing this issue for a long time.\n\nYup, this is a known issue.\n\nSince we are not utilizing any payload from the webhook pingback, should we also make it work on a GET request and not just on a POST request? Ideally, webhooks should be a PUT request, but existing systems send it via POST, so having it work on POST is important. However, supporting GET will be more convenient to trigger an update from thee command line.\n\nAs most of the systems are sending POST requests, I believe that we should keep it this way. While a GET request would be more convenient via the CLI, it's not that much of a hassle to actually send a POST request so I don't think we'll want to support GET requests as well.. @ibnesayeed see https://github.com/portainer/portainer/issues/1486. @ibnesayeed we can open a new enhancement request later on for this.. @ibnesayeed all good, feel free to open a new feature request for this evolution.. Yes @Strum355 . A Docker image is available for this implementation via portainer/portainer:pr1666 (linux amd64 build).. The main difference here is that we propose to build an image via an URL and not via a git repository (as it is proposed in the stack creation view).\nI believe we could add it as an enhancement but we would need to review the UI/UX as it does not make sense to propose a standard URL combined with credentials inputs.\nPlease open a new issue to track this evolution.. It's a Docker API parameter, so we would need to ensure the Docker API can do that.. Good, let's go back to my comment above then.\n\nI believe we could add it as an enhancement but we would need to review the UI/UX as it does not make sense to propose a standard URL combined with credentials inputs.\nPlease open a new issue to track this evolution.. @abhisaini great :-)\n\nHave a look at our contribution guidelines first https://github.com/portainer/portainer/blob/develop/CONTRIBUTING.md\nand you can get some info about local development at http://portainer.readthedocs.io/en/stable/contribute.html\n. @abhisaini yes, fork the project, create a new branch, make the changes and once you're ready open a pull request against the develop branch of this repository. If you need more information or some help, ping me on Slack at https://portainer.io/slack/. @johnmanko is 192.168.99.99 the static IP on which you want to access your containers published ports? If so, I believe that you'll need to add when binding  the ports (like -p 192.168.99.99:9000:9000 for Portainer, for example).\nWe think that the Docker engine might be lost between the two IPs associated to your NIC, you might need to configure your Docker engine to always use that IP when binding ports as well.. Yes, will keep this issue open, pending an update from Docker libnetwork maintainers.. Closed in favor of #1712 . Thanks for the detailed report ! I'll try to reproduce.. Unfortunately I was not able to reproduce using the following steps:\n\nDeploy Portainer locally\nAdd a new endpoint being a remote Swarm manager node\nCreate a new service using the image nginx:latest and a replica count of 1\nWait for the service to be deployed and check where the container is located\nAdd a new endpoint being the remote Swarm worker where the container is located\nAccess the container console view for that container\nStart the console, works without issue\n\n\ndocker exec works using the CLI against these containers.\n\nHow do you use the CLI ? Do you use the -H host:port flag or do you use the CLI locally on each node? Also is there anything displayed in the console of the browser developer tools?\nAlso are you sure that the bash binary is available in that container?. @nzwei an issue was shipped with the images/binary of the release, fixed a few hours later.. @yogeek could you open the developer tools in your browser and check for any errors in the console?\nI'm especially curious about the last case.. @kukam is it possible that your proxy configuration removes any query parameter?. @cmsalmeida When using Nginx in front of Portainer, a specific configuration must be added, see http://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer\nWe're investigating this issue.. @yogeek this is funny, I just tried to reproduce the issue using the exact same steps and was able to exec into the container without any issue.. > Is it possible that websocket are blocked when I am at work ?\nWell, you tell me :-). Version 1.17.0 introduced a new version of the websocket implementation, might solve your problems.. @naegleria is it working with Portainer 1.16.5? . @naegleria we added some changes regarding the Origin header in 1.17.1.. Hi @GoncaloBorges, can you tell us how did you deploy Portainer? . @GoncaloBorges this SSL issue looks strange. Can you try with a HTTP Portainer instance and tell me if you can reproduce ? (e.g. deploy a Portainer instance without the --ssl* flags). @GoncaloBorges this might be an issue related to the SSL flags of Portainer, could you open an new issue for this?. This implementation can be tested via portainer/portainer:wip-image-build (linux amd64) and portainer/portainer:wip-image-build-win (windows amd64). Hi @acidjunk \nIt might be related to the fact that there are 3 manager nodes in your cluster. You'd need to ensure the /data folder exists on each before deploying Portainer.\nAlso, the recommended way to deploy Portainer as a Swarm service is to deploy it as a single instance replica service:\ndocker service create \\\n    --name portainer \\\n    --publish 9000:9000 \\\n    --replicas=1 \\\n    --constraint 'node.role == manager' \\\n    --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=/data,dst=/data \\\n    portainer/portainer -H unix:///var/run/docker.sock\nNote that you still need to ensure that the /data folder exists on each manager as Swarm can schedule the Portainer container on any of these.. @acidjunk did you deploy a service with a single replica as showed above?\nCopy and paste the service logs or any Portainer container logs in here, we'll try to help you debug this.. @acidjunk @devkws \nIf the socket bind mount is correct, that means that the data folder bind mount is incorrect, are you sure that the /data folder is available the hosts where Portainer should be deployed and that Docker can actually writes to these folders?\nAlso, try the following bind mount:\n--mount type=bind,src=//data,dst=/data \\. Looks like this could be related to Docker cloud, yes. Are you able to run other services using bind mounts? Such as a nginx service for example ?. @acidjunk @devkws what Docker version are you using ?. Yeap, looks like it's related to Docker cloud then... not sure how we can help here.. All right, thanks for the report ! I'll keep this issue open in the meantime. Someone might be able to help us figure out the solution.. With Docker Cloud shutdown, I believe we can close this issue.. Yes, I thought about this recently, I'd like to see if we can change our implementation to use the ContainerAttachWebsocket operation https://docs.docker.com/engine/api/v1.34/#operation/ContainerAttachWebsocket. Thanks @maocorte :+1: . Thanks @maocorte :+1: . Sorry, no way to do that at the moment. I'll tag it as an enhancement and re-title the issue.. Almost every resource available under the Endpoint actions in the navigation panel are Docker resources (App Templates` being sort of an exception).\nHave a look at the Docker configs documentation: https://docs.docker.com/engine/swarm/configs/\nFeel free to re-open if you need more info.. About containers quick actions, it was solved recently: https://github.com/portainer/portainer/issues/1652. I'm sorry I do not understand what you would like to achieve. Could you describe in a short sentence what you'd like to see inside Portainer?. Yikes, indeed the incorrect version of xtermjs has been shipped with the release, will push new binaries/images ASAP.. I've fixed and pushed the correct images & binaries. Should be fine now, thanks for the report.. As you said, we're re-using the container-creation view to edit/duplicate containers. Thus we give access to the same parameters when editing a container.\nI believe that you should be able to set the Ownership when you duplicate a container but not when you edit one. As for now, we check if we're re-using the same container name to see if this is going to be an edition or a duplication... we might need to update this and prevent the update of the ownership in the case of an edition.. This implementation can be tested via the following images:\n\nportainer/portainer:pr1693 (linux amd64)\nportainer/portainer:pr1693-win (windows amd64)\n. Why are you using npm ? You should be using yarn instead. Have a look at our contribution docs: http://portainer.readthedocs.io/en/stable/contribute.html#build-portainer-locally\n\nClosing as this should solve the problem, feel free to re-open if needed.. @zhaoyao91 you can already specify a public Git repository with a path to a compose file in the stack creation view. Does that answer your question?. For me an application with a good logging system should write their own timestamps. But I agree, some do not do it, so @rahulruikar I think that the best solution would be to add a switch \"Display timestamps\" which defaults to off.. @rahulruikar see my comment in https://github.com/portainer/portainer/issues/1696#issuecomment-371341857\nI think that we should add a switch to display timestamps which should be disabled by default.. ping @rahulruikar . Ah no rush ! Was just wondering if you were still up for it, see you tomorrow :-). Thanks @rahulruikar :+1: . Hey @HaAlex \nDocker allows us to retrieve the logs of a container using an API call, but that will only work if the logs are streamed to stdout/stderr. In your case, you could use a centralized log solution such as ELK or something else. You might want to have a look at Docker's logging drivers as well: https://docs.docker.com/config/containers/logging/configure/\nClosing as I don't think we can add this into Portainer at the moment.. Hey @peterforeman ! The 1.16.3 release was not shipped with the correct libraries but the image and binaries have been fixed a few hours later. Can you pull again portainer/portainer:latest ? That should solve your problem ! \nI'll close this issue, feel free to re-open if you're still having troubles.. Might be related to the fact that we strip the 8 first characters in each log line via https://github.com/portainer/portainer/blob/develop/app/docker/rest/response/handlers.js#L52-L53\nSeems like Docker always append 8chars to each line, but it might not be the case in this context (stacktrace).\nIndeed, if we check your example, we can see that only apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:310)\nwhereas it should be at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:310)\n\\t at org. being the 8 stripped chars.. @uduse @alexs20 could you try using the latest version of Portainer?. @dbiswas1 @uduse @alexs20 I'm really keen to solve this problem but cannot reproduce it. I'm starting to think that this is more related to the user environment than to the Docker image...\nCan anyone share with me a Docker image that I could use to reproduce this? Are you able to reproduce this with nginx:latest ?\nHere is what I get with a simple nginx:latest container after accessing the web server:\n\n. Interesting @akbennett, I'll check that.. @JSteunou you can probably find this configuration by inspecting the container.. @JSteunou we definitely do not want to do that, however now I can try to replicate the issue and create a fix.. Anybody keen to give a try to the portainer/portainer:pr1861 image ? It should contain a fix for this.. @akbennett @alexs20 thanks for you feedback !. @DazWilkin so this is currently working when defining your GCR as a custom registry inside Portainer right? You'd like us to add a new entry as we do for Quay with GCR specifics details (such as project-id, how to generate the password, etc...) ?. Sounds good to me, keep us updated !. Looking great @DazWilkin Thanks a lot for the detailed instructions !!\nTo summarize: support for GCR is already existing if we follow your instructions, the goal of this feature request would be to make GCR integration/definition into Portainer easier for GCP users.\nI think that we can add an extra registry provider called Google Container Registry, with a fixed username value of _json_key as well as detailed instructions on how to generate the password.\nAlso, thanks for the article ! ;-). Yup, this is something that we're aware of... Note that we'll have a discussion soon about the whole registry UX inside Portainer. We might change a few things in the future.\nIn order to solve this issue, I think that we need to intercept any request against the Docker API where registry credentials are required and decorate that request to pass these credentials (back-end only).\n. @stevenklar mind giving a try to portainer/portainer:pr1751 and tell us if everything is OK on your side?. Thanks for the feedback @stevenklar :+1: . Hi @dennis0721 \nLooking at the error \nError grabbing logs: rpc error: code = Unknown desc = warning: incomplete log stream. some logs could not be retrieved for the following reasons: node 72yhae7hzuu0i8qkr4ih72rm8 is not available\nIt's raised from the Docker engine, there is probably something wrong with your Swarm setup.. Can you check the logs of any of these services using the CLI ? Via docker service logs ?. No error on the CLI ? And after using the CLI, is it working inside the Portainer UI ?. @lahaxearnaud does checking the logs via the CLI fix the problem in portainer afterwards?. We'll investigate.\n\nHowever without copy all, new logs is unusable.\n\n@Hronom any UX feedback you'd like to give us?\n\nI love the new log functionality by the way! I would like to see shift and ctrl select for picking ranges and multiple lines to copy in the future please :)\n\nPlease open a new feature request ;-). @seffyroff @Hronom I'll also need access to a heavy logging container image to try to reproduce. Any of you can reproduce this issue using a public image and send it to me to give it a try?\nIt's worth nothing that I'm unable to reproduce using the latest version of Portainer, please share the version of Portainer that you're using as well.. I'm able to reproduce on Chrome using the following container logs:\ndocker run -d --name log-spammer --log-driver json-file --log-opt max-size=250m --log-opt max-file=10 hronom/log-spammer\nIt works on Firefox though. I'm investigating.. Hey @Hronom \nUnfortunately, I'm busy on other topics at the moment. I'd accept a PR now that we have a way to reproduce this bug.\nAnother solution could be to replace the copy logs button with something else.. Thanks @HerwonoWr :+1: . Our opinion on this is that templates are supposed to be \"click and deploy\" with the less possible customization. Any customization should actually land into the \"Advanced options\". If your template really requires the user to change or to specify a value for some binds, I believe that you can add some information about it in the template description (see note field).\nClosing this issue as we're not going to support these kind of changes at the moment.. cc @ncresswell \nWhat's your thoughts on this?. Awesome thanks !! I'll have a look at this soon.\nNote: could you update your develop branch? There should not be any commits in this PR related to anything else than upgrading Fontawesome (e.g. breadcrumb fix and bouncer fix should not be part of the PR).. Thanks @HerwonoWr :+1: . Balena support is not in our plans at the moment, sorry.. Thanks @pkoziol :+1: . Are you trying to execute requests against the Docker engine through Portainer using the Docker SDK ? If so, it will not be possible to pass authentication credentials. The only way to do so at the moment is to execute HTTP requests against the Portainer API.\nClosing, feel free to comment if you need more info.. Sure, here is an example: https://gist.github.com/deviantony/9ccc5d428d9fbe1cb9875c0bbb4de04a\nJoin us on Slack if you need more info.. The ability to create an attachable network was added recently via #2122 . I'll need more information on how you deploy the Minio service. Using the minio stack file generated by their website I was not able to reproduce this.. @joshuaavalon you mean container logs instead of console output?. An image for this implementation is available via portainer/portainer:pr1722 (linux amd64 build).. @HerwonoWr you're right, just tested. It seems that something wrong with the release process in the gruntfile to support font awesome v5. I'll investigate.. @dcharbonnier @HerwonoWr fixed & updated !. @dcharbonnier sounds great and will probably be added as an enhancement. As a first step, I think that using inputs for credentials is fine (note that these credentials are not stored in Portainer).. @dcharbonnier thanks for the feedback, now that this one is merged, feel free to open a feature request for that SSH support enhancement (we actually need to discuss about the UX for this one).. @YoKv @viyullas I just merged an update to the stack API via #1963, could you try with the image portainer/portainer:develop (linux amd64 build only) and tell me if that solves this problem?. @YoKv What do you mean by \"I edit the git repository\" ?\n@viyullas do you have an example of git repository and more details on what you're changing before triggering the update so that I can try to reproduce?. Are you expecting Portainer to automatically pull the updates from the repository when clicking on \"Update the stack\" ?. @viyullas indeed, but this is not the case actually. The \"Update stack\" button is use to reflect the changes in the web editor.\nFor your feature request, please follow the discussion in https://github.com/portainer/portainer/issues/1753. @YoKv see my comment above. The \"Update the stack\" button do not trigger an update of the repository, only an update of the stack based on the content of the web editor.. Unix sockets are only supported at initialization time.\nYou can use a Unix socket when creating the first endpoint in Portainer using the Local option, but you cannot add Unix endpoints later on (unix:// not supported. The Endpoint URL used when creating an endpoint will always default to tcp://.\nI'm keen to add support for Unix endpoints in Portainer. We just need to figure out a good UX in the endpoint creation process for this.. We should update the warning note to specify that you must have access to a Docker socket and bind mount it (too hard these days  to put a platform relative note with Toolbox/Docker For Windows/ Docker On Windows and the confusion that it creates).. @sumodx\nWe know that this is working for Toolbox & Docker for Windows. It's just not available on Windows server 2016 actually. We just need to adjust that warning in the codebase to be more precise maybe.\nHave a look at the following links for more details about how to contribute:\n\nhttp://portainer.readthedocs.io/en/stable/contribute.html \nhttps://github.com/portainer/portainer/blob/develop/CONTRIBUTING.md. @eferley and @HerwonoWr are right.\n\nIf you want to use the \"Remote\" option when creating an endpoint, your remote Docker environment must have the Docker API exposed over TCP so that Portainer can actually communicate with Docker and manage your environment.\nConfiguring the Docker engine is different on Windows/Linux, please refer to the Docker documentation on how to do so.\nI'll close this issue as exposing the Docker API over TCP should solve your problem and allow you to connect Portainer to your environment.\nFeel free to comment/ask questions or re-open this issue if needed.. @sudipto92 have a look at http://portainer.readthedocs.io/en/latest/deployment.html#manage-a-remote-docker-engine. Have you checked https://docs.docker.com/engine/reference/commandline/dockerd/#examples ?. @wzshuang Looks like there is something wrong with your configuration.\nIf you cannot connect to the Docker engine even with the Docker CLI (using docker -H ...) this means that either the port is not exposed in the Docker configuration (review your config) or it's blocked by something (firewall, iptables).\nCannot really help you more here, seems related to your setup/infra.. Glad you solved it, closing this issue.. @robertofabrizi did you manage to solve your problem?. What about removing the ${HOME}/portainer folder and retrying?. Duplicate of #1491 . Have a look at our documentation on how to contribute here: http://portainer.readthedocs.io/en/stable/contribute.html. Could you tell us when this error arise? Some reproduction steps?. This issue seems to be related to the connection to a Docker 1.12 endpoint. Sorry guys, we're trying our best to give support even to old Docker versions.\n@astrodad @terxw \nCould you give a try to portainer/portainer:pr1750 ? It should contain a fix for this problem.. @astrodad the fix implemented in #1750 has been merged and will be available in the next release of Portainer. In the meantime, you can use our unstable build via portainer/portainer:develop (linux amd64 only).. Hi @leokun \nAny previous version of Portainer working? What platform is Docker running on? How did you deploy Portainer?\nAny chance to give us the content of the browser tools's console? . @measwel issues are meant to represent either bug reports or feature/enhancement requests. If you need more information about Portainer usage or Docker overall usage, feel free to ping us in our Slack channel at https://portainer.io/slack/. This has been fixed.\n@herwonowr yes I'm aware of this issue, my idea was to move out the assets (images here) inside a portainer.io domain.\n@Ricapar we're going to give the ability to pass the templates file via the filesystem, the main reason we did not want to bundle this into Portainer was to be able to maintain the templates and add/remove some without creating a new release of Portainer.\nWe'll probably keep the current behavior for template logos.. Hey @jazoom I'm not able to reproduce this issue.\nCould you give me a compose file as well as some reproduction steps ?. Thanks for the report, we'll investigate.. @anthraxn8b try to remove the stack using the Portainer API.. @jasonayre \n\nDeployment error A stack already exists with this name, issue.\n\nIs there an existing stack with the specified name in any of your defined endpoints?. Can anybody try to reproduce with the latest version (1.18.0) ?. Hi @fe2bon4 \nDid you re-create the Swarm cluster after losing your manager? If that so, stacks registered inside Portainer will be out of sync, this is a known issue.\nWhat you'll want to do is to clean up each stack that is registered inside Portainer via the API:\n\n\nList the stacks by sending a GET request to /api/stacks\n\n\nIf you can find the stacks that you want to remove in the list returned by the previous query, for each stack you'll want to execute a DELETE request to /api/stacks/<stackId>?external=\"false\"&endpointId=<endpointIdentifier> where endpointIdentifier corresponds to the endpoint ID associated to the stack.\n\n\nIf you can't find the stacks that you want to remove in the previous list, for each stack you'll want to execute a DELETE request to /api/stacks/stackName?external=true&endpointId=<endpointIdentifier> where endpointIdentifier corresponds to the endpoint ID where the stack is located.\n\n\nBeware that these commands WILL REMOVE the stacks and all their associated resources (containers, networks, etc...).. Yes, this is something that we need to work on.. Hi @Haxy89 \nDid you try to use a combo of uid/gid in the User field (advanced container settings, Command tab) ?\nIt should support the following format:\n[ user | user:group | uid | uid:gid | user:gid | uid:group ]. Ok, then would you like to setup your own UID/GID ? Or would that be ok for you if we ship the Portainer image with  a default user different from root?. Have you tried to use the --user flag when deploying Portainer?\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /path/to/data:/data --user 1001:101 portainer/portainer\n. Have a look at https://docs.docker.com/engine/reference/run/#user. @Haxy89 you might want to try to add your user in the docker group.. Might be related to https://github.com/xtermjs/xterm.js/issues/54 although it has been fixed already.\n@nkolban what version of Portainer are you using?. Great, could you try with the latest version of Portainer (1.16.4) ? It introduced an update to the xtermjs library via https://github.com/portainer/portainer/issues/1681, I'm curious if that changes anything.. Actually, this is required when a user wants to display the details about an existing resource control.\nIf we merge as is, it breaks the UI. Going to close it for now, please open a feature request so we can make a real evolution for this later on.. @alioygur could you give us more details about what you'd like to achieve when using Portainer? An example use case?. Thanks , I'll investigate.. Issue confirmed, reviewing the fix in #1747 . Thanks @herwonowr :+1: . @knall0 I believe that replacing the current re-creation workflow with the one specified in https://github.com/portainer/portainer/issues/1491#issuecomment-350813534 can solve the problem of the container being removed at least.\nThe unsaved settings preservation is more of a general UX issue that we might need to work on.\nI believe we can close this as a duplicate of #1491. Feel free to re-open/comment if you think that it's not really related to #1491 . Closing as I'm unable to reproduce this issue as well.. @AkeluX @IvanJosipovic we updated the LDAP authentication process in 1.19.1, are you able to reproduce this issue with the latest version?. Thanks for the report, we'll try to fix this.. This should be fixed as a part of https://github.com/portainer/portainer/issues/2199. An image is available for this implementation via portainer/portainer:pr1750 (linux amd64 build only).. An image is available for this implementation via portainer/portainer:pr1751 (linux amd64 build).. @dcharbonnier @vladbabii @OmgImAlexis @mallchin \nUX wise how would you prefer to specify your SSH key? File upload? A text file to copy/paste the key?. Thanks for the feedback.\n\nMost of all it would be really handy to use these in templates. If you can let me know roughly how templates are deployed perhaps I could find a workaround?\n\nPortainer simply clones the repository specified in the template and will execute a docker stack deploy inside the cloned folder right after. \n. Here is a first sketch of the functional/technical specs for this feature:\nAuthentication\nI believe that we should keep support for authentication via credentials, which is already available. A new authentication method called \"SSH key\" should be added.\nExample of the already available credentials authentication:\n\nWe need to add a selector here when enabling the Authentication switch, similar to the Build method selector:\n\nSection titled shoud be named Authentication method and the following choices must be available:\n\nCredentials (user/password combo)\nSSH key (use a deploy key)\n\nWhen selecting the Credentials method, the actual username/password method should be used.\nWhen selecting the SSH key method, the user should be able to do the following:\n\nSelect a key from an existing set of key (displayed by key name)\nGenerate a new key\n\nKey management\nPortainer already supports the generation of ECDSA keys. It will just need to be enhanced to support the requirements of this feature.\nIn order to support the selection of a key or the generation of a key as specified above, we'll need to support the management of deploy keys inside Portainer.\nUI/UX\nWe must add a new \"Deploy keys\" section under the \"Settings\" in the navigation panel. This section will give the ability to an administrator user to list/create/delete deploy keys.\nCreating a key should be quite simple, it only requires a name for the key. The backend will take care of the generation of the key/pair, and will only return the public key part to be displayed in the UI. A small copy button will then give the user the ability to copy this key in their clipboard.\nA regular user will be able to either select a key or to generate a new key in the stack creation view. In order to facilitate the generation process, the user should not need to specify a name for the key, the key should be based on the name of the stack suffixed by _deploy_key.\nAPI\nOn the backend side, we'll need to introduce a new API endpoint /keys that will allow the management of the keys as specified above.\nGenerated keys should be persisted inside Portainer data folder under the deploy_keys folder.\nA key object should contain the following information:\n\nName\nPrivate key path\nPublic key path\nIdentifier of the user that created the key\nLast usage (datetime)\n\nStack deployment\nThe stack deployment method will need to be updated if the repository is using key authentication. Basically, we need to use the following package in conjuction with the current go-git implementation: https://godoc.org/gopkg.in/src-d/go-git.v4/plumbing/transport/ssh\nUpon deployment of a stack with a specified key, the Last usage field of the key must be updated.. @dcharbonnier any reason to close the issue ? :). > not an issue for me anymore, I was interested on the project until I realized that there was no plan to support a swarm.\nWhat do yo mean by \"no plan to support a swarm\" ?. Do you mean the ability to trigger a git pull and then redeploy the stack?. In my opinion, the credentials should be persisted in the stack data.\nIf the stack was created from a repository, a new button should be added \"Pull and deploy\".. Following the discussion in https://github.com/portainer/portainer/pull/1793#issuecomment-384302019\nAs I'm not keen to store unencrypted credentials for git repositories inside Portainer I think that the way to go is to implement https://github.com/portainer/portainer/issues/1752 first and then work on this one.. @shyd \nNot sure about the sidebar files, but if they're located inside the repository and part of the stack deployment should work.\nAnd yes, webhooks for this feature is in our plans.. I believe this is a duplicate of #1639 . ping @rahulruikar . @rahulruikar are you still up to do the changes?. No problem @rahulruikar, thanks for the update.. @maddios there is an issue with the latest release unable to connect to Docker 1.12 environments, it has been fixed via #1750 and will be part of the next release.\nIn the meantime, you can use our unstable build via portainer/portainer:develop or use a previous version of Portainer such portainer/portainer:1.16.2.. @audioscavenger \nThis issue has been closed, please open a new issue or reach out to our community support channel at https://portainer.slack.com. Heya, issues are used to create feature requests or bug reports. If you need any help with the codebase, I suggest to ping us on Slack via https://portainer.io/slack/. We'll track the ability to export/import volume data with this issue.. @sudipto what is the version of the Docker engine you want to connect to ?. Are you able to connect to your Docker daemon using the Docker CLI? If so, how are you using the CLI?. @sudipto92 can you inspect the response  of the failing request in your browser developer tools?. @Dante3004 what's the response content of the failing request ?. @Dante3004 can you inspect the content (text with an error message) of the response?. @Dante3004 je vois que t'es Fran\u00e7ais, c'est toujours pas \u00e7a dont j'ai besoin :-)\nDans les outils d\u00e9veloppeurs, onglet \"Network\", tu cliques sur la requ\u00eate en erreur puis onglet \"Response\" pour avoir le contenu de la r\u00e9ponse.\n. Ok, du coup, voil\u00e0 l'erreur c'est que t'as besoin de credentials pour t\u00e9l\u00e9charger l'image. \nTu peux sp\u00e9cifier les credentials dans la partie Portainer settings > Registries (soit pour le Dockerhub, soit en cr\u00e9ant un nouveau registry). Following on @Dante3004 issue: invalid credentials are reported are \"Unable to pull image\" which is not clear, we'll probably want to fix this by displaying the original error message in the UI.\nAlthough it does not seem to be the same issue as OP.. Not considering this as a bug, rather an enhancement request in the container creation view.\nFYI this is what I get when I try to reproduce:\n\n\nI'm thinking that we might need to add some kind of textarea support as an alternative to simple inputs.\nRelated to https://github.com/portainer/portainer/issues/546. Closed in favor of #1856 . @rwagner-inf Can you give more details about the benefits of adding these headers?. @herwonowr @rwagner-inf when you say \"all the requests\", do you include the API requests as well? The current implementation will add these headers on the files only (html, js, images...) but not on the API requests (e.g. /users, /endpoints, etc...). Do you think it should be added for these as well?. FYI the X-Content-Type-Options and X-Frame-Options headers are already added to the API responses. @rwagner-inf can you add the XSS related header in here: https://github.com/portainer/portainer/blob/develop/api/http/security/bouncer.go#L76-L77. @rwagner-inf nice.\nRegarding your question about HTTPS, you can check if TLS is enabled on Portainer side via the Server.SSL property: https://github.com/portainer/portainer/blob/develop/api/http/server.go#L37\n. Ping @rwagner-inf \nWhat option should be added when HTTPS is used?. Hi @rwagner-inf \n\nIf it is necessary to put the headers in all responses,\n\nI believe that's what we said before, yes :-)\nYou can update this PR or close it and open a new one for me to review. Thanks !. Closing in favor of #2167 . It is mainly due to the fact that there is too much data in the table + low screen resolution.. I'm talking about screen resolution, you can have full HD with a \"low\" screen resolution.\nHere is what it looks like on my screen (res 1920*1080):\n\n. @balanza I'd accept a PR yes.. Please open an issue with a proper title and description.. Thanks @balanza :+1: . That's all right, we relay on Codeclimate for code analysis. I'll remove the lint step from the contributing guidelines.. Thanks @moncho :+1: . That's some really strange issue that you have here...\nCould you give us some details about your OS? The Docker version that you use to run Portainer? Also please paste the content of docker image inspect portainer/portainer.. Great, are you using any specific file system?. This is pretty strange, you're not persisting Portainer data then? What happens if you wipe out the existing Portainer data and deploy the latest version?. Yes, and what is the version of Portainer that you're actually running?. @ovizii oh, you're using a pretty outdated version of Portainer...\nIn order to update from such an old version, you must remove any existing Portainer data (remove /mnt/portainer/data) and re-create the container using the latest version.\nThat should go fine then.\n. @ovizii there is a bug with pretty old versions (such as the one you're using) and database migration.\nIf you remove the data, you'll lose everything related to users/endpoints. If you don't want to, you could go through step-by-step upgrading version by version... IMO it'll probably be easier to re-create the users/endpoints inside the new instance.. This error seems to be related to Docker and not to Portainer.\n\nERROR: for portainer Cannot create container for service portainer : b'Mount denied:\\nThe source path \"\\var\\run\\docker.sock:/var/run/docker.sock\"\\nis not a valid Windows path' ERROR: Encountered errors while bringing up the project.\n\nI'll close this issue, you'll need to wait for an update in https://github.com/docker/for-win/issues/1889 for the solution to this issue.\n. Thanks @rahulruikar :+1: . Thanks @faryon93 :+1: . Hey @amcsi ! Thanks for the contribution.\n\nI find that this can be useful, because otherwise if I were recreating a container under the same name, I could refresh the page and see the new container, unlike if I were using the container ID which always changes if a container is re-created.\n\nPortainer always redirect you to the containers view after a re-creation process, so I'm not sure if this is actually useful.\n\nThe problem is that the container name in the URL gets lost when navigating around within the container details, having the container name replaced back with the ID again.\n\nI'm not considering this as a problem, we've built an UI to make it easy to manage/navigate through your Docker resources/environments, I don't think we want the user to have to specifically alter the URLs of the apps.\nI understand your problem but I think that it's not affecting a lot of users (IMO not a lot of people are playing with Portainer URLs to navigate to containers) and I'm thinking that this implementation impacts the consistency/clarity of the codebase (removing the {id: containerID} parameter from query URLs might make it harder to determine where the identifier is coming from).\nI was thinking about replacing the container identifier with the container name but with the upcoming implementation of #461, we'll need to rely on identifiers to ensure uniqueness between nodes.\n. @mihneaspirescu right, you need to specify the tcp:// protocol in the endpoint URL.\nClosing this issue, feel free to re-open if you still have problems creating endpoints via the API.. @dblackherod you can deploy Portainer using the --bind :9007 flag (semi-colon is required) if you want to expose the Portainer application on another port inside the container.\nhttp://portainer.readthedocs.io/en/stable/configuration.html#available-flags\nExample:\n$ docker run -d -p 9007:9007 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --bind :9007\nClosing this issue, feel free to re-open / comment.. Seems to be fixed.. @Shinoby1992 I'm thinking this is not an issue with Portainer directly, but rather with docker stack deploy.  Are you able to reproduce this issue using docker stack deploy from the CLI ?. @Shinoby1992 how did you deploy Portainer? Portainer should be deployed as a single instance replica service on a manager inside a Swarm. If you have multiple manages in your Swarm cluster, you need to persist the data between your manager nodes (using a shared filesystem for example).\nTry to solve the data persistency issue first, and then we'll try to go further on that stack problem.\nFYI, Portainer is using docker stack behind the scene to manage the stacks (create, update, remove), so any issue related to these actions might come from the docker binary.. @Shinoby1992 You need to persist Portainer data if you want to keep your settings when the Portainer container get re-scheduled.\nHave a look at the extra bind option here: http://portainer.readthedocs.io/en/stable/deployment.html#persist-portainer-data. @Shinoby1992 are you able to reproduce this issue after persisting Portainer data?. @Shinoby1992 this is not related to this issue. Do you still have a problem with the network and docker stack removal?. Sure, you're welcome. Closing this issue.. Thanks @caleno :+1: . I've got honestly no idea where you're going with this issue, what's the use case? Why would you want to use an authorization plugin and Portainer authentication altogether?. All right, from what I see in https://github.com/moby/moby/pull/36778 it's seems to be related to Docker though, not really to Portainer?. Right, we'll investigate to see if we can remove the charset from the content-type header.. @Vad1mo are you aware that you can actually filter used/unused volumes & images? There is a \"filter\" button that you can use right under the Id column in the images view and under the Name column in the volumes view where you can select unused images only and then select all & delete.. Yeap, might be an UX issue on our side, we'll try to make this feature clearer.. Hey @ShaneCoufreur could you give us the details (payload, response content) of the failing requests in the developer tools of your browser?. @ShaneCoufreur The only thing I can think about this error is that you might have a corrupted stack ID inside the database of Potainer. I do not have any idea on how you managed to do so though... did you deploy any stack using Portainer?. @ShaneCoufreur can you curl http://localhost:8080/portainer/api/endpoints/2/stacks ?. Ok, thanks for reporting that. \nI think that there is something wrong in your Portainer instance's database, could you share the content of the /data/portainer.db file with me ? (note that it might contain sensitive information).. So, I've investigated the database file, it seems that it contains a stack called \"test\" with an invalid identifier. I'm wondering how this was created.\nTechnical details, a stack identifier is a string composed of the name of the stack, the _ char and the swarm identifier. In your database, the stack identifier is an integer (3).\nI'd recommend to wipe out the database and start with a fresh instance.. Ok, closing the issue then.. Closing as a duplicate of #461 \nComing soon !. Thanks @ShaharHD :+1: . Thanks @odg0318 :+1: \nSorry for the delay.. @marxenegls did you solve the problem?. Hey @rahulruikar ! Sorry for the delay.\nFYI, I'm not able to build the backend:\n```\ngithub.com/portainer/portainer/git\n../../../../../go/src/github.com/portainer/portainer/git/git.go:47: unknown field 'Username' in struct literal of type \"gopkg.in/src-d/go-git.v4/plumbing/transport/http\".BasicAuth\n../../../../../go/src/github.com/portainer/portainer/git/git.go:48: unknown field 'Password' in struct literal of type \"gopkg.in/src-d/go-git.v4/plumbing/transport/http\".BasicAuth\n```\nWhilst this implementation looks good, I'm not really keen to store unencrypted git passwords in the Portainer database... (sorry I sent you on this direction in https://github.com/portainer/portainer/issues/1753#issuecomment-377034493...)\nI'm thinking that https://github.com/portainer/portainer/issues/1752 should be the priority at the moment, and we'll then be able to enable the update button using ssh key auth.\nI'll keep this PR open as a reference for future work but marked as pending until #1752 is solved.. Closing this one as it's outdated and we'll need to review the design after #1752 is implemented.. Anything in the Portainer container logs?. I'm thinking that this may be related to your setup as there are multiple users of Portainer on Raspberry Pi out there that did not report a similar issue. \nWhen you say \"solved the problem\" what problem is solved exactly ? And what's the issue with the bridge/host?. Going to close the issue as I don't think this is related to Portainer. Feel free to comment if you find anything solving your issue for other users.. Ok, will close this issue and reference in #1481 . @cppbitman In order to push an image to a private repository, you must define the registry inside Portainer first (Settings > Registries > Add registry) and define the credentials as well when creating a registry.\nIf you're using Dockerhub, just go to Settings > Registries, where you'll be able to specify the Dockerhub credentials.\nClosing this issue, feel free to re-open/comment if you're missing information.. @cppbitman I'll investigate and check if I can reproduce.. @herwonowr feel free to open a PR. @brando56894 sorry for the late update, could you describe your issue with more details?. About  that \"Linux vm in a windows host\", are you using Windows server 2016 1709? . Do you have this problem when accessing the volumes view or the volume details view?. It may be caused by an error returned by the Docker API. I'll need to investigate this lead to be sure that Portainer handle API errors in a correct manner.. @trajano are you able to reproduce this problem using the latest version of Portainer?. Duplicate of #1700 . @pantegrow you can do this, simply fork the project, create a new branch containing your changes and push it in your fork. Then you'll be able to open a pull request against this repository.. @pantegrow I will, sorry I'm a bit busy on other topics right now.. Thanks @herwonowr :+1: . I don't think that this is the solution for #1700 \nI've got the following output in my logs when using this implementation:\n\nCould it be that this problem is related to the client? @yassirh  @JSteunou does this implementation solves the problem on your machine?. Closed in favor of #1861 . @dancn @taliaga I'm not able to reproduce this issue using our development version, could you give a try to portainer/portainer:develop and tell me if you still have the issue?. Still unable to reproduce... could you try with portainer/portainer:agent-support as well? This build has a few commits on top of develop ?\nAlso my Swarm cluster version is 18.03, not sure if this might be related to the engine version.. ~I'm able to reproduce using portainer/portainer:develop. Seems to be fixed in portainer/portainer:agent-support though which is going to be merged soon. Will investigate further once merged.~\nJust tried on a fresh install, I can reproduce this in portainer/portainer:agent-support as well. Will investigate.. @dancn right, seems to work again in agent-support.. @dancn now that #1828 has been merged, keen to retry with portainer/portainer:develop ?. @dancn thanks, I'll investigate. @dancn caused by https://github.com/portainer/portainer/issues/1647\nAs you pinpointed in your last comment, Portainer uses the root folder of the git repository when deploying a stack. Instead, it should use absolute path to the folder where the stackfile is located.\n. Ok fixed via #1869 (should be available as portainer/portainer:develop in a few minutes if you want to try).\nWith the latest changes, we can see the following results based on your custom templates:\n\nWordpress configs from same dir > Portainer deployment is now successfull\nWordpress configs from repo root > Portainer deployment is now failing. Thanks @ikarpovich \n\nThis should be available via portainer/portainer:develop in a few minutes.. External contributions are disabled by default, you need to go to Settings and disable the \"Hide external contributions switch\".. > The response type is incorrect. I requested \"application/json\". As far as I saw there is already another bug mentioning that so ignore it here.\nIndeed, #1808 was just fixed and should be available via portainer/portainer:develop. \n\nThe response is \"200 OK\" which says \"[...] In a POST request, the response will contain an entity describing or containing the result of the action. [...]\". But the response is empty.\n\nAgree, the API reponse code should 204 instead of 200 when no content is actually returned.\nFeel free to submit a PR for this.\nWe'll track the evolution to 204 for requests no returning content in this issue. I'll tackle the missing resource controls type in the documentation in another PR.. API documentation updated via https://github.com/portainer/portainer/pull/1812\nChanges have been reflected on Swaggerhub.. Closed via #1963 . @achim-k @brickyang is it causing troubles to you that the container hostname is set based on the container name?. @brickyang well, if you use the same template with the same name on different servers then they should have the same hostname? If you do prefer to let Docker automatically generate the container hostname then just leave the name field empty.\nI'd accept a PR to change the behavior to the following:\n\nOnly set hostname when the hostname field is specified in the template definition. If you need multiple containers with the same hostname inside the same Docker environment, you'll not be able to achieve this using the current implementation in the templates system.\n\nWe could add another extra field as well in the \"advanced settings\" of the template in the UI, yes.. Documentation added via https://github.com/portainer/portainer-docs/commit/7dae8763b853cae7da2f975fe2e6650882904524. https://github.com/portainer/portainer/pull/1817 was merged recently, it automatically sends a ping request to the Docker environment at endpoint creation time and if any error is encountered it will be returned by the API.\nThis should solve this problem. For a better UX when creating endpoint, see #873 . @kjellml80 as Neil stated, we already support this. What do you think is missing?. It seems that it sends an invalid request to the visual studio online server... how do you use git clone locally?. I'll tag this one as a duplicate of #1926 . Yes, this is possible, although as Portainer do not expose any API to manage Docker resources but proxies requests to the Docker API you'll have to use the Docker API to orchestrate this...\nMore information about how to proxy requests to the Docker API via the Portainer API: https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8\nDocumentation of the Docker API: https://docs.docker.com/engine/api/v1.37/#\nClosing this issue, feel free to comment if you need more information.. Duplicate of #1304 . @dhenneke Indeed, I need to update the API documentation. We'll use this issue to track the swagger fie update.\nThe /api/endpoints now expects a multipart/form-data payload using the following structure:\nName string\nURL string\nPublicURL string\nTLS boolean\nTLSSkipVerify boolean\nTLSSkipClientVerify boolean\nTLSCACertFile file\nTLSCertFile file\nTLSKeyFile file\nAs you can see now you can embed the TLS files inside the endpoint creation request payload, this should make it easier to create TLS endpoints (instead of executing multiple requests to the /api/upload endpoint post endpoint creation). \nIt is also a requirement since we now send a ping request to the underlying Docker environment at endpoint creation time to ensure that we can connect to it.\nFeel free to ask any questions, I'll update the docs as a part of the next release.\nNote: #1817 has been tagged as breaking changes.. Great, feel free to give us some feedback in #1828 . Thanks for the report, I'll investigate.\nEDIT: this has been fixed.. @bollinenisravan @mrmachine The cluster visualizer will only show the tasks that are available in your cluster, that is, a task is a container created by a service.\nIf you deployed containers manually inside your cluster (either via the container creation inside Portainer or docker run on the CLI), these will not be displayed inside the cluster visualizer.\n\nIt appears current running containers are not picked up by the newly installed agent. All new containers are showing up without any issues. \n\n@bollinenisravan are you talking about containers not showing up in the visualizer ?. Docker default behavior is to raise an error when removing a network with active endpoints (e.g. running containers). I believe that we should prevent the removal of any network with associated containers in any state.\n. @thesobercoder when creating a resource you can just disable access control, which is the equivalent of the public ownership status. . Hi @anthraxn8b \n\nBecause the id you receive if you create a stack should be the resourceId. Right?\n\nNo, in order to inherit the access control policy all the stack resources (services, containers, volumes...) we need to relay on an identifier that we can find via the Docker API in each resource. This identifier is the stack name in that case because we can find this information in the labels of each resource.\nWe'll update the documentation to specify that in the case of stacks, the stack name should be used.\n\nI would really appreciate if \"stack\" would be a valid type... :-)\n\nIt is, documentation has been updated recently.. Good point. I had a similar idea recently with the introduction of #1828 solving #461.\nNow that we can list all the containers inside a cluster, I was thinking about listing only services and removing the containers view when connected to a Swarm cluster. In the services view,  I thought about making the services collapsable (pretty much as you show in your screenshots) with the underlying list of tasks when uncollapsed.\nWith #1828, that would allow us to redirect the user to the container details when clicking on any service task.\nIt should actually be possible to do the same with stacks, e.g. collapsable stacks with underlying collapsable services to give the user the ability to drill down to specific tasks from a stack.\nI think this is an interesting discussion about UX, and that it should be continued after #1828 has been merged as it may help us determine a good direction to give a better UX when managing Swarm clusters.\n. At the moment, there is no point of using the agent on a single node Swarm cluster. Although in a near future we'll probably use the agent to collect host metrics.. Thanks for the contribution @achim-k !\nI believe that we should add an extra input to be able to specify the hostname in the \"Advanced settings\" of the template creation. Could you add this field?. Are you able to reproduce this issue or was it a temporary issue?. Hi @uhe1231 \nThe console allows you to execute any command inside an exec instance in the container. I'm not sure why you need the ability to add arguments because you can just write the full command in the command field?. Sorry, we're not going to add this feature. In my opinion, people that want to execute command inside containers should at least know what they can execute (even for non technical users).\nFeel free to discuss this, but we're closing this issue for now.. Closing, see my comment in #1835 . This implementation is available via portainer/portainer:pr1837 (Linux amd64 build).. Agree, we need to verify if the Docker API exposes any information about system networks. . Sure, feel free to open a PR for this.. @TimvdEijnden yes, that's why I wondered if this would be indicated in the Docker API response. Have you looked at the Docker API documentation?. Yeah, agree that it's not really the best way to identify these networks. We should do some testing to ensure that there could be no name conflicts (replacing a system network with a user defined with the same name) but I'm pretty sure that you can't. If you can do a bit testing on this point that'd be great.. Well I guess we check the name of the networks and prevent removal/checkbox use if \"host\", \"bridge\", etc.... @AlexJakeGreen see that you added some commits, what does this bring?. Awesome, thanks for the video ! Will have a look soon :-). Nope, you'll need to wipe out your existing Portainer data. We're tracking the ability to reset the admin password via: https://github.com/portainer/portainer/issues/512. @FabianTe yup, see #1814 . @Andyreas this change will only affect stacks deployed within a Swarm cluster.. No ETA for compose, related issue: https://github.com/portainer/portainer/issues/2054. @jamesmr89 are you using self signed certs?. See https://github.com/src-d/go-git/issues/817. Seems that we can override the default HTTP client when cloning the repository.\nWe might want to always use a custom client and skip server verification as I don't see the point to clutter the UI to add a \"skip server verification\" switch.. In order to avoid cluttering the stack creation UI with extra TLS parameters, I believe that we can default to skipping TLS verification when cloning a git repo.\nPointers in here: https://github.com/src-d/go-git/issues/817\nUnfortunately we're pretty busy on other topics right now, but we'd accept any contribution.. I believe that we'll be able to tackle this issue after solving #1752.\n\nI suggest adding the ability to store credentials securely so the repo can be cloned.\n\nYes, this is what I'm thinking as well, just need to figure out how. At the moment, I'm not keen to store user/password credentials in the templates file and I don't think that storing the private key in the templates file is a good idea as well (after #1752).\nMaybe specify a path to the private key. Something like\njson\n{\n  \"repository\": {\n    \"url\": \"https://github.com/private/repo\",\n    \"stackfile\": \"stacks/my-stack-file.yml\",\n    \"auth\": {\n      \"key_path\": \"/path/to/private/key\"\n    }\n  }\n}\nThe user would need to bind mount the private key into the Portainer container tho.. @neoindie still considered but we do not have the bandwidth to work on this right now. The endpoint ID in /endpoints/<id>/stacks serves as a context to execute stack requests. So it's actually relevant.\nThe fact that an error is raised when creating a stack with an existing name is an existing Portainer limitation. A stack name must be unique across all the endpoints (although we'll try to work around this in https://github.com/portainer/portainer/issues/1347). > Using the stack name as a unique identifier is a poor design decision. \nThe stack name is not used as an identifier, it's uniqueness is required due to how the current access control system works within Portainer... ensuring that each stack name is unique is our only way at the moment to apply resource controls on stack.\n\nTo summarize, at least GET and DELETE do not serve as a context to execute stack requests.\n\nYou're right about this, we might want to change the API to /api/stacks and specify the endpoint identifier as a required parameter when deploying (POST) and updating (PUT) stacks.\nI'll re-open this issue and track this as an enhancement. Also, re-implementing the API as described above should solve the problem you have when deleting a stack using another endpoint ID.\n. > As a feature request, it would be helpful to have the remaining methods for stacks implemented.\n@dwebber what remaining methods are you talking about?. ping @dwebber . Hi @pwFoo \nHow did you remove the stack ? Using the remove button in the Portainer UI? Any error/success message displayed?\n\nBecause I need to delete the stack I deleted it manually with docker stack rm .\nStack still exists in portainer ui.\n\nYeap, Portainer keeps a track of deployed stacks in its database, it must be removed from the UI or API to be entirely deleted (something we might want to change).. I'll tag this as a bug and we'll try to reproduce as I think a Javascript error might have occured during the removal (you should see either an error or success message normally).\nWe'll be working on stack management enhancements in future versions.. @pwFoo Unfortunately I'm not able to reproduce this issue, I can deploy and remove a stack on a remote endpoint without issue.\nCould you give me more details about how you deployed the stack ? (file, upload, git ?). @pwFoo I'll need precise reproduction steps otherwise it'll be quite difficult for us to reproduce the problem.. Thanks for the report, we'll investigate.. I cannot reproduce this issue, we'll need more information about the network details of the container. Could you give us the text content of the inspection of the container? \nIt's available in the container list:\n\n\n\n\"The Docker registry for the gogs/gogs:latest image is not registered inside Portainer, you will not be able to create a container. Please register that registry first.\" \n\nThis is a known issue, see https://github.com/portainer/portainer/issues/1434. @hactar thanks ! Could you give me reproduction steps to create a container that cannot be edited?. Thanks @hactar but this looks like to be a Javascript issue, having a look at any error on your side will be of no help because the content is minified. I'll need to be able to reproduce inside a my development environment.\nIf you have one of these problematic containers in your env, could you create a public image from it? (use the form in the container details view) And then push it on the Dockerhub so that I can retrieve it?. Hmm, unable to reproduce this using \ndocker run --name=qr --hostname=3f6acf1db36d --env=\"VIRTUAL_HOST=REDACTED\" --env=\"LETSENCRYPT_HOST=REDACTED\" --env=\"LETSENCRYPT_EMAIL=REDACTED\" --env=\"PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\" --env=\"LANG=C.UTF-8\" --env=\"PYTHON_VERSION=2.7.13\" --env=\"PYTHON_PIP_VERSION=9.0.1\" --expose=8080 --restart=unless-stopped --detach=true hactar/qrportainerbug:latest python ./server.py. @G07cha what do you mean by \n\nIndeed, bridge is hard-coded in the config\n. yup, have a look at https://github.com/portainer/portainer/issues/1491#issuecomment-350781558\nThe following flow should be used here:\n Remove the previously existing container\n Create a new container with the same configuration as well as one of the defined networks\n* Post-creation, connect the container to the extra networks. Are we talking about adding the ability to backup/restore an entire Docker environment here? e.g. including all the Docker resources inside this environment ? \n\nMy opinion on this is to deploy your services/containers using Compose files so that you can easily restart them on another environment.\nOther than that it seems pretty much related to #935 regarding the ability to backup/restore Docker images and #1759 for volumes.\nAnything I'm missing that would not be added by these issues when solved? Is this feature request opened for a \"simple way to backup\" these such as a one-click button to backup images/volumes?. Hi @Jacq \n\nIs it possible to export/backup the docker-compose files currently?\n\nNot via the UI, but all the compose files for the stack created inside Portainer are stored in Portainer /data folder.\n. Hi @thesobercoder \nI don't think that this should be included inside this repository as it's just related to Portainer deployment.\nWe've already added a docker-compose.yml to the website here at: https://portainer.io/install.html\nWe might want to add a compose AND stack file in our documentation at http://portainer.readthedocs.io/en/stable/deployment.html but that should be discussed in https://github.com/portainer/portainer-docs\nDo you mind re-opening the issue in there?. See my comment in #1851 . Hey @ollieatseats \nI'm not able to reproduce this issue, see the screenshots below:\n\n\nCould you share the exact informations you're using?. >  I went in and added the second record again and it still did not persist it.\nWhat do you mean by that? Did you alter the container manually?. @ollieatseats via the container creation of container edition ?. Ah, so this is related to container-edition ! I'll investigate.. I've referenced another issue related to the container creation view but with the same problem. We'll track this enhancement.\n. @ncresswell thoughts?. This implementation is available via portainer/portainer:pr1861 (linux amd64 build).. @alexs20 you're right, edited :+1: . Hi @TroLLik\nTwo things here:\n\nYou're not persisting Portainer data anywhere, as such, it will be available inside the container only. Now, as you're trying to access Portainer inside the Swarm, it will round robin each request to the 3 instances deployed in the Swarm. As such, some instances might have the administrator user created, some might not, leading to invalid session/unability to connect.\n\nSee the docs about persisting Portainer data: http://portainer.readthedocs.io/en/stable/deployment.html#persist-portainer-data\n\nWe recommend to deploy Portainer as a single replica service (this is a limitation with the current database, see https://github.com/portainer/portainer/issues/523). If you plan to have Portainer available on multiple nodes inside your cluster, you'll have to manage volume availability for all the nodes in your cluster to ensure that Portainer can use the same data if it's rescheduled on another node.\n\nClosing this issue, feel free to ask any question or comment in here.. @ncresswell thoughts? Wonder if this should be discussed in https://github.com/portainer/portainer/issues/943 instead ?. As a first step, I believe that we could display this information to the user at service creation time.. This is something I wanted to see as well. I might have commented this inside an existing issue but we'll track this evolution here.. Yes, I've updated #335 now that we support compose v2 we should be able to do the equivalent of this feature request but for containers inside a v2 stack.. Thanks @G07cha :+1: \nAlso, kudos for the tests ! We'll need to integrate this inside the build system at some point :trophy: . Following on https://github.com/portainer/portainer/issues/1868\nAre you able to reproduce this when removing the resources limitations on the agent/portainer containers?. I'm not able to reproduce this issue, either with a cluser with manager/workers or full managers.\nCould you retry with the latest development version of Portainer (portainer/portainer:develop), I believe I've fixed the following panic error:\n\n2018/05/08 10:44:53 http: panic serving 10.0.0.8:35034: interface conversion: interface {} is map[string]interface {}, not []interface {},\n\nCould you give me instructions on how to reproduce your environment? I believe that your env is hosted in AWS, any chance to tell me how to setup a similar env so that I can try to reproduce? \n\n2018/05/08 12:07:21 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n\nAll these messages in the logs are showing an incorrect behavior, there might be some issue in the network... The agent needs to be able to communicate with other nodes on port 7946 via UDP & TCP.. @Duvel what's the clusters topology? Could you share Portainer/agent logs?. @Duvel number of nodes in the cluster (workers/manager count as well).. @Duvel thanks for the update, really appreciate it, I'm unable to reproduce so far. Anything new in the agent logs?. @Duvel I've added some debugging and update the image portainer/agent:develop (linux amd64 only), you can enable it by setting the environment variable LOG_LEVEL=debug when starting the agent. Could you give a try? . I'm on it.. @Duvel \nDone, just pushed portainer/agent:develop-arm64 and portainer/agent:develop-arm. Do not forget to start it with the LOG_LEVEL=debug environnment variable set.. Tried arm64 instead?. The architecture represents the arch of the building platform, I'm pretty sure I build these 2 images for arm & arm64. Let me retry.\nHow are you deploying the agent? Are you sure that you're not using the :develop tag?\nEDIT: just pushed again the images.. Interesting, I'm guessing that the duplicates are all associated to the pi node? Also, what is the \"correct\" number of containers that should be displayed (removing the dupes) ?. @Duvel \nI just updated the portainer/agent:develop-arm image with more debugging. Keen to give it a try and paste the logs? Thanks !. @Duvel could you paste the logs of the service instead of the logs of each agent? That might help me to correlate the data.\nAlso, simple question, do you have dupes with other resources (networks, images or volumes) ?. @Duvel just updated the image to use go 1.10 instead of 1.9, could you give a try and just tell me if it solves the issue?. @Duvel Ok, rollback to 1.9 but I've updated the codebase, keen to tell if the bug is still here?. Just getting an update on this, are you still seeing this problem with the latest version of Portainer/Agent?. It is an agent related problem that seems to sometime duplicate resources.\nRegarding your situation where the agent keeps restarting, please open a separate issue.. I believe we can close this issue then.\nFeel free to re-open if the problem arises again. We'll try to think about recommendations for resource reservation/limit.. No it's not, and I believe it's not really useful to implement. If you want to configure the admin user account post deployment, you can use the Portainer API to initialize the user.\nYou can find some examples here: https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8. Make sense, not a bug, just a small thing to change.. @apearson not at all, thanks a lot ! :-). Thanks @G07cha :+1: . Duplicate of #1351 . Closed in favor #1879 . Hi @thesobercoder \nBy deploying Portainer as a globals service, you're deploying a Portainer instance (with its own data volume) on each node of your cluster.\nWhy are you unable to login ? It's quite simple, the first time you try to access Portainer, the Swarm routing mesh will redirect you to one of the Portainer instances in your cluster. \nWhen creating the administrator account, you'll send a user creation request but again, the Swarm routing mesh might send this one to another instance in your cluster. Thus, when you try to authenticate, Swarm might send the authentication request to a Portainer instance in your cluster where the admin user is not initialized.\nTwo things here:\n\n\nPortainer current database do not support more than one process accessing the database file at the same time, that's why it is recommended to deploy Portainer as a service with a single replica.\n\n\nIf you want Portainer to be able to be rescheduled inside any node of your cluster, you'd need to setup a way to share the data across your cluster first (be it a volume driver like Storidge CIO or a shared filesystem like NFS).\n\n\nI'll update the docs at readthedocs to include the need for a single service replica deployment.\nAt some point, when we'll have support for another database implementation (https://github.com/portainer/portainer/issues/523), we'll be able to remove the single replica requirement. Although you'll still need to persist the data cluster wise.. Thanks @apearson :+1: . Hi @rskhatri \nThe admin password from file flag is only used to initialize the administrator user, it will not update the account if the file is updated.\nRegarding your second question, we do support LDAP/AD authentication, which you can enable in the Portainer settings.\nIf you're not using LDAP/AD, you could automate the creation of users post deployment using Portainer HTTP API, see: http://portainer.readthedocs.io/en/stable/API.html. Closed via #1963 . @fslDev please open a new issue if you're not using Nginx here.. @nightah could you try with portainer/portainer:pr1901 ?\n@fslDev feel free to try as well although I'm not sure your problem is related.. @nightah Thanks for the feedback, I'll push some new changes soon.. @nightah I've added a debug statement in portainer/portainer:pr1901. Could you pull the latest version of this image, try again and share the logs with us?. @tripplet keen to give a try with portainer/portainer:pr1898 ?. Thanks for the feedback, still awaiting feedback from #1533 . @xrobau wonder why the first endpoint has \"TLSSkipVerify\": true, how did you create this endpoint? Are the other endpoints failing as well?. @xrobau anything new in the Portainer container logs? Or just more proxy error: tls: oversized record received with length errors?. @xrobau yeap, I'll investigate as well because this looks pretty strange to me.\nI don't need access to the database, from what I can see in the endpoint list, it looks like the endpoint #1 is invalid and might cause this tos oversized issue (https://stackoverflow.com/questions/39126345/why-am-i-receiving-an-oversized-record-tls-error). I'll investigate and see what might be causing this.\nBut it's strange to see that other endpoints do not work too, their config seems to be valid.. The only possible case where TLS would be disabled and TLSSkipVerified enabled is when you use -H tcp://myhost.mydomain:2375 --tlsskipverify when deploying Portainer (usually only agent endpoints should be declared like this). \nIt could explains why your first endpoint would fail @xrobau but it's not an explanation for the other endpoints.. @jgrasl do you mean that existing endpoints were not working anymore after updating to 1.17 ? \n@xrobau is that the case for you as well?\nOr is the problem coming from the endpoint creation in 1.17 ?. @jgrasl were they simple TCP endpoint or TLS enabled endpoints? Upgrade from 1.16.5?. @xrobau @jgrasl any of you tried to update these endpoints before seeing error messages? Or did you just try to use Portainer right after upgrade?. @jgrasl interesting, I found a bug within the endpoint update process that will automatically create invalid non-TLS endpoints. I'm able to reproduce the error after updating an endpoint.\nNow I'd like the confirmation of @xrobau to check if this error is only raised after updating the endpoint.. Are you guys able to reproduce using the image portainer/portainer:pr1896 ?. @xrobau Question is: after migrating from 1.16.5 to 1.17.0, did the endpoints fail to work immediately? Or did you update these endpoints first (changing name, the assigned group or something else...) ?\nCould you try to reproduce with portainer/portainer:pr1896 ?\n. > as you should be easily able to recreate the issue locally.\nWell I'm not, that's what I'm trying to figure out. Ok, I'll dig deeper.. I'd like to reproduce the process that breaks the endpoints... so no point in breaking them manually. I'm still looking.. @xrobau I'll close as I'm not able to reproduce this issue.\nThe only cause I can think of would be that you triggered an update of any of these endpoint post upgrade (like @jgrasl did). The current bug in the endpoint update process (fixed by #1896) cause the endpoint to have the TLSSkipVerify field set to true, which then causes the http proxy errors.\nWe might re-open if other users are hitting this issue or if you're still having troubles (note that triggering a simple update of endpoint without change after #1896 should make your endpoints valid again).\nAlso, judging from the endpoints JSON you shared, I'd delete and re-create the first endpoint as well (I wonder how an endpoint could have a Type value of 0).. >  I don't think you've fully addressed the first - what to do WHEN an endpoint is in that state.\nHaving endpoints in that state is a bug, it should NEVER happen. We're trying to fix this to prevent this problem.\n\nand it's very difficult for a non-technical user to fix.\n\nActually you only need to re-create the endpoints in 1.17.0.. @xrobau keen to try portainer/portainer:pr1909 ? Unless your issue is fixed. We're trying to solve a related bug in #1906 . Thanks for the feedback @jezhodges . Related to #568. Hi @parag-datar \n\nWhat would be the appropriate order of the column?\n\nWhat do you mean?\n\nAlso, will it help if we use something like moment.js to make it human readable? Or will that be confusing while sorting on the column?\n\nWe're already using moment.js, have a look at the getisodate Angular filter that is used in other views.. Ah, IMO it should be located after the Status column and before the Quick Actions.\nActually, we're thinking that 9 columns is too much here...  we should solve #568 first.. Hi @zhaoyao91 \nCan you update the AGENT_CLUSTER_ADDR env variable value to tasks.portainer-agent.\nThe format of this variable must be tasks.<AGENT_SERVICE_NAME>.\n```yml\nversion: '3'\nservices:\n  agent:\n    image: portainer/agent\n    environment:agent\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - \"9001:9001\"\n    networks:\n      - portainer_agent\n    deploy:\n      mode: global\nnetworks:\n  portainer_agent:\n    driver: overlay\n```\n. @zhaoyao91 could you share the logs of the agent service with us?. Right it seemed that the agent picked the invalid network interface to communicate with the others. I'm checking.. My bad, it's an issue with the port declaration. Could you try with the following YML:\n```yml\nversion: '3.2'\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - target: 9001\n        published: 9001\n        protocol: tcp\n        mode: host\n    networks:\n      - portainer_agent\n    deploy:\n      mode: global\nnetworks:\n  portainer_agent:\n    driver: overlay\n```. Great, I'll update the docs.. Updated via https://github.com/portainer/portainer-docs/commit/a038e5c8794c0a9884f76e4fd307f9587f1bf0d9. Hi @sandys \nYes, simply use our recommended setup procedure: http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\nThis will deploy Portainer inside the same overlay network as the agent without exposing the agent port.. Rejected in favor of #1896 . Closing as we'd rather try to go for a \"sponsor\" model. . Yup, default is to display the last 2000 lines. Adding an input to set the number of lines displayed could be an enhancement.. Related to #943. Hi @schemen \nCould you copy/pate the Portainer logs? Can you access the authentication view of Portainer or not? Is it working in your environment without Traefik?. Does it work if you remove it from the agent network? If so, you could expose the port 9001 on the agent service and use any node IP as endpoint URL.. @schemen I believe that you still need to deploy the agent inside an overlay network and use tasks.agent as the value of the AGENT_CLUSTER_ADDR env var.. Did you try something like this ?\n```yaml\nversion: \"3\"\nservices:\n  app:\n    image: portainer/portainer\n    volumes:\n      - /var/data/portainer:/data\n    networks:\n      - traefik_public\n    deploy:\n      labels:\n        - traefik.frontend.rule=Host:swarm.example.com\n        - traefik.port=9000\n      placement:\n        constraints: [node.role == manager]\n    command: -H tcp://NODE1_IP:9001 --tlsskipverify\nagent:\n    image: portainer/agent\n    ports:\n      - \"9001:9001\"\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - agent_network\n    deploy:\n      mode: global\nnetworks:\n  traefik_public:\n    external: true\n  agent_network:\n    driver: overlay\n``. By using the setup above, you must use the public IP of one of the nodes as the endpoint URL,tasks.agents:9001won't work as the Portainer instance is not located inside the same overlay network (that's why it works when you add the agents totraefik_public`).. Glad you solved it ! Feel free to write a small post about it, might help other users ;-) . Hi @anthraxn8b \nMind sharing reproduction steps? I'm not able to reproduce.\n```\nhttp PUT :9000/api/endpoints/1/stacks/invalidid \"Authorization: Bearer \"\nHTTP/1.1 404 Not Found\nContent-Length: 26\nContent-Type: application/json\nDate: Tue, 15 May 2018 16:37:44 GMT\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\n{\n    \"err\": \"Stack not found\"\n}\n```. Hi @turbo \nI'm not able to reproduce this bug. Can you ensure that you put the correct credentials in the Hub credentials section ? Also, be sure to hit the \"Update\" button after changing the credentials.. @turbo are you sure that you saved the changes by hitting the \"Update\" button? To confirm, the switch should be enabled if you check the registries section again.. @turbo what version of Portainer are you using? I can see 1.17.1 in your bug report which is not an existing version. Are you using the latest version? I'm not able to reproduce using the latest version, I can specify credentials and pull private images without issue.\n. Could it be that you're hitting this issue https://github.com/portainer/portainer/issues/1434 ? . @turbo are you able to reproduce with a Portainer instance accessed outside of Traefik?. @turbo try to inspect the portainer.db file that's located in the data folder of the Portainer container.. @turbo the request will be decorated with the authentication header in the backend, then proxied to the Docker API.\nUnless you're able to inspect that request (using something like wireshark maybe?) to check that the correct header is added, I think that it's going to be pretty difficult to debug.\nI could build an image with debug enabled for you to try or point you at the location where you'd want to add some logging if you're keen to build the project.. @turbo let met quickly push something for you to test. @turbo give a try to portainer/portainer:registry-auth-debug and have a look at the container logs (share it with us, blur confidential info if needed).. So, I can try to create a Dockerhub account with the v7+HKb?9aT?ZETgj password and should be able to reproduce this issue?. I'd suspect an issue during the base64 encoding.. Hi @bal291 \nPortainer automatically detects if the node it is connected to is part of a Swarm cluster. It only displays the Swarm resources management links (stacks, services, secrets, configs) if the node is part of a Swarm cluster.\nThis looks like it is not the case here, please ensure that your Windows node is part of Swarm cluster and then just refresh the view.\nFeel free to comment or re-open if you're still having troubles.. Right this is strange. Do you have access to your browser development tools? If so could you inspect the /info request and copy/paste the response content when connected to the Windows node?. Thanks.\nAs you can see in the information response for that Windows node, it seems that something is wrong with the Swarm setup for that node:\njson\n    \"Swarm\": {\n        \"NodeID\": \"\",\n        \"NodeAddr\": \"\",\n        \"LocalNodeState\": \"inactive\",\n        \"ControlAvailable\": false,\n        \"Error\": \"\",\n        \"RemoteManagers\": null\n    },\nThat's why Portainer do not propose you to manage Swarm resources when connected to  that node.\nI believe that you should fix your Swarm setup first.. @bal291 super strange indeed, Portainer sends the same request.... > It is obvious in retrospect, but it might make sense to indicate the swarm status in some other way in addition to present / missing menu items...?\nThe latest version of Portainer adds some information about each endpoint in a new view called \"home\". For each endpoint, the Docker version of the environment is prefixed with Standalone or Swarm depending if Swarm is enabled.. @kidhasmoxy are you still able to create a stack? Also, did you update the endpoint in any way (changing name,  groups...) before doing trying to update the stack ?. @kidhasmoxy potentially the same bug as #1889 \nLooks like something goes wrong during upgrade, or maybe the endpoint definition is already invalid in 1.16.5. I don't know how to reproduce this issue.\nCould you have a look at your browser developer tools and inspect the GET /endpoints request? I'd like to see the response of this request in your 1.16.5 version first, and 1.17.0 if possible.\n. Thanks for the report.\nYeap, multiple endpoints will be invalid in 1.17. I wonder why some of your endpoints (those with port 2376 are not using TLS but have TLSSkipVerify set to true). . We're keeping the ability to manage multiple endpoints. I'm just wondering why your endpoints do not have the TLS  field set to true. I'm currently looking at this problem.. Yes, I'm currently working on fixing this bug.. @kidhasmoxy would you mind trying to upgrade to portainer/portainer:pr1909 and copy/paste the output of the endpoints again? Also check if it fixes your issue.. @Kyosuk3 @webguy16 thanks a lot for you feedback, will merge soon.. @spyderz42 this issue has been closed for a while now, please open a new issue instead and give us as much description as you can.. Thanks @G07cha :+1: . What are you trying to achieve here? Do you want to use the websocket endpoints of the Docker API or the Portainer API ?. Closed via https://github.com/portainer/portainer/commit/da5a430b8cb7545bef6de7576c73afb1a3235138#diff-db9cb05036fe8578950e553ad58417fa\nA token query parameter was introduced.. Yes there is: https://github.com/portainer/portainer/issues/853. @G07cha these options help working around issues when using Docker with SELinux enabled but I don't think that they are reserved to these kind of environments.. I believe that we should support both. It's just a matter of UX, for each volume we should be able to specify rw, ro, z, or Z.. @Trudels you're right, removed my comment.\nFrom Docker docs:\n-v, --volume=[host-src:]container-dest[:<options>]: Bind mount a volume.\nThe comma-delimited `options` are [rw|ro], [z|Z],\n[[r]shared|[r]slave|[r]private], and [nocopy].\nThe 'host-src' is an absolute path or a name value.\nI'll try to have a look at the proposed UX  in this PR soon.. Feel free to propose something to support both z & Z. I'm a bit busy on other topics right now.. @lucamaro sounds good, you can ping me on Slack if you have questions or need some help.. Hi @Bjornskjald \nCan you tell us if the image portainer/portainer:pr2419 solves your issue?. @Bjornskjald did you had a chance to try the image?. ping @Bjornskjald . Awesome, thanks for the feedback.. Re-opening this issue as #2419 as been reverted due to introducing other bugs and invalid container creation behaviors (see comments in https://github.com/portainer/portainer/issues/2552)\nThis problem is now re-introduced and we'll need to figure out another way to work around it.\nAlthough I'm curious @Bjornskjald, can you give us an example container using a potential \"\" command? What's the point of using an empty command?. This has always been possible actually, just need to wrap the \"\" in some extra quotes.\nFor example, this is supported command: /bin/echo '\"\"'\nI'll close this issue then as it's and has always been supported actually. Feel free to re-open comment if you have issues with next version (1.20.1).. Thanks @kirdia :+1: . I believe the question is answered ! :-)\n. I'm bad at phonetics but you should pronounce it like container, but replace cont with port (pronounced as the word port, the place where ships dock).\nhttps://translate.google.com/?oe=utf-8&um=1&ie=UTF-8&hl=fr&client=tw-ob#en/fr/Portainer\n. @aiminickwong probably duplicate of #1920 . We could remove the limitation that prevent the suppression of the default admin account. You'd need another admin account to remove the default admin account.\nThoughts @ncresswell ?. @G-regL We've added this in the latest version of Portainer (1.17.1)  via https://github.com/portainer/portainer/pull/1902. Closed in favor of #2052 . Thanks @eirinikos :+1: . You're right, sorry about that @crosbymichael. We should probably have pinged you before doing so.\nTechnically speaking, the original license comments have been relocated to the README in order to be parsed via github but we can probably update it if you want (although I do not know how as it seems that licensee do not like mixing licenses inside the same file). \nOn the other hand, we also never had the opportunity to thank you for the work on this project at the beginning, so thanks :-). @bencummins I don't really like the new design brought by these changes.\nIf you think that there is an issue regarding the UX with the actual design of the datatable search bar, please open an issue so we can discuss it and find a better solution :-). Hi @GrumpyMeow \nBased on https://github.com/portainer/portainer/issues/1926#issuecomment-391256007\n\nThis is likely a pretty major bug (missing multi_ack support) in go-git that has been unfixed for quite a while: src-d/go-git#335 (comment)\n\nIt has not been resolved, unfortunately no activity on go-git for this one. One solution here would be to use another library than go-git  as our git service implementation.. Do you have any error at all ? After sending this request, what's the content of the stack editor inside Portainer for this stack? Is it updated?\nI've tried to reproduce but I'm not able to spot a problem.\nI've created a stack using the following Compose file:\nyml\nversion: '3.4'\nservices:\n  web:\n    image: nginx:alpine\n    deploy:\n      replicas: 1\n    ports:\n      - \"80\"\nI then updated the stack via the API with the following Compose file (via StackFileContent):\nyml\nversion: '3.4'\nservices:\n  web:\n    image: nginx:alpine\n    deploy:\n      replicas: 2\n    ports:\n      - \"80\"\nThe stack is updated and the service is running with 2 replicas.. Can you give an example of information that you update?. Yes, it is in our plans.\nRelated to #1186 . Hi @olljanat, agree, although that'd be better to deploy it as container.\nI can add a -H flag for the agent (with a default value of unix:///var/run/docker.sock) that you can tune to use any TCP address (-H tcp://localhost:2375 for example). Would you be keen to test it?\n. It's actually a bit harder than just adding a -H parameter and I'm a bit busy on other topics at the moment, but this is in our priority list, we'll keep you posted.. This will be available with the next version of the agent (will be available with the next Portainer release). . We're going to add Plug-in support into Portainer, we still need to decide if we want to make this model \"open\" so that users can actually create their own plugins.. Not related to AD/LDAP, it's related to how we process the authentification request.\nThe following JSON body request {\"Username\": \"m\u00f6p\"} is decoded to {\"Username\":\"m&#246;p\"}. I believe that this is in cause: https://github.com/portainer/portainer/blob/develop/api/http/handler/auth.go#L70. Thanks @ibnesayeed :+1: \nI believe there is no need to create a ticket, we'll remove it when we think it's OK.. Ah, was not notified of the changes ! Sorry for the late update.\nThanks @valkheim :+1: . Hi @mbenedettini \n\nI'm migrating from a standalone Portainer instance to a Swarm stack and I'd like to keep my database. I had to use --external-endpoints feature in order to be able to define the new agent endpoint.\n\nWhy do you need to use the --external-endpoints flag to define the new agent? You could have added the new agent endpoint inside the Portainer instance?\nHow did you \"migrate\" exactly? Were you using the --external-endpoints flag before?\nThis might be a bug in related to the external endpoints feature.. Can you tell us how did you deploy Portainer?. It's not recommended to mix different endpoint management method (API -either via the -H flag on the CLI or via the UI- and external -via the --external-endpoints flags-).\nIf you want to fix your deployment, I'd recommend to clean up any existing endpoint first. You can use the --external-endpoints flag to do so, with the following file:\n[]\nOr you can use the HTTP API to clean up every endpoints first.\nThen, re-deploy your Portainer instance as a stack via http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\nI actually recommend the usage of the HTTP API over the --external-endpoints flag for any endpoint automation task.. > Should be a breeeze to add a filter which grays out the portainer container.\nNot really, how is the Portainer instance supposed to know that this container is the one serving it?\nI agree that this would be better but we did not think about a real solution for this yet. In the meantime, you can associate a specific label to your Portainer instance during deployment and hide this label from within Portainer: http://portainer.readthedocs.io/en/stable/configuration.html#hiding-specific-containers\n. Not considered a bug as this is the data returned by the Docker API (can be related to https://github.com/moby/moby/issues/33673) \nWe might be able to sort the logs by timestamps.. @opera443399 I'd accept a PR to enhance the log viewer :-). Hi @opera443399 \nDo you mind relocating this comment in a PR instead of discussing in the issue? Thanks.\nRegarding, your propositions:\n\nSince parameter: I'm ok with it. I think that we may be able to provide a better UX with a timepicker component or something.\n\nRegarding your timestamp technical problem, I can point to a solution if a PR is opened.\n\nLine count: I'm also ok with the fact that we should use a lower line count, 100 sounds fine.\n\nThoughts @ncresswell ?\n. I don't think it's interesting to see the logs of all the tasks running on a specific node... it will probably be too noisy to be able to analyze anything. Although adding the ability to filter  tasks logs from a service is something that we want to add and that will be tackled in #1865 \nClosing this as a duplicate of #1865 \nFeel free to comment/re-open if you think I'm missing something.. Services as well, yes.. Hi @daiing \nCan you give us the image of the container ?. @daiing do you have access to the Docker CLI ? If yes, can you try docker stats and tell us if it is working?. And are you able to execute docker stats <CONTAINER> ?. @daiing oh, I believe this is not related to docker stats but instead docker top. Can you try to use docker top on the CLI ?. Yup, seems that's an issue with your Docker setup... . Somehow related to #1966 . I believe that this is related to https://github.com/portainer/portainer/issues/523\nClosing as might be a duplicate and also, you can already persist the data outside of the Docker host where Portainer is running, by using a network shared filesystem for example.. I'm sorry, I do not understand the problem. What is your problem exactly? Also, I can see that you're using the --cluster-store and --cluster-advertise options, are you using Swarm standalone?. @omyhub sorry, Swarm standalone is not supported anymore since version 1.17.0 of Portainer. We're not going to support any enhancement requests/bug reports regarding this tool.. Hi @GoncaloBorges \nIndeed, there is no way to automate the LDAP configuration via docker-compose/CLI. However, you can tune the LDAP configuration via the Portainer HTTP API post-deployment.\nHopes this answer the question, feel free to ask if you need more information.. Done.. Yes.. Ping me on slack, I believe this is not the place to tackle this problematic.. Not sure if we need to add this, might be easy to add for DockerHub hosted images but for images hosted on other registries we are not aware of the URL used to browse the image repository details.\ncc @ncresswell . I need to update the example, instead of sending a query to /docker/info to retrieve the Swarm identifier, it should be a query to /docker/swarm.. https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8 is now up to date.. Hi @mayank \nGenerally I tend to agree with this but in this case the function is pretty small it just makes the code easier to read than an if/else statement.. @mayank did you test it? I'm not able to deploy a template using the new definition. I'll update this PR with more details later, but you should try to deploy a template with the new port format to check.. I think it's broken when you leave the host port empty.\nAlso, sorry for the late update, I'm working on enabling template management inside Portainer, I'll merge this one as soon as the work on template management is done (https://github.com/portainer/portainer/issues/1800).. Closed in favor of #2017 . Your first request is a duplicate of #1379 \nThat being said, I'll keep this issue open to track the addition of a filter to the ownership column.\nNext time please open different multiple feature requests (and search for existing one too ;-)). Thanks for the detailed report, we'll investigate.\nMight be related to #1371 . This was introduced via #151 as an UX enhancement and it's actually quite handy when executing actions such as starting/pausing containers.\nMaybe we should add a clear selection button instead?. I can remove it and make  it part of the next release.. @niXta1 do you have access to the Docker CLI ? If so, can you try to do a docker stats <CONTAINER_NAME> on the CLI? And docker top <CONTAINER_NAME> as well?. Yes @niXta1 it seems that there is something wrong with your Docker engine/setup. Portainer proxies requests to the Docker API so this is why you're also seeing the same error message.. Duplicate of #1753 . Good point, I wasn't aware that the timeout would use a default engine value.. Thanks @cedric-crouzet-penbase :+1: . @raybooysen Added via #1978 \nAlso note that you can disable the setting to truncate the container names in the table settings (top-right corner).. Hey @hasnat,\nSorry for the late update. Usually we open an issue to discuss a feature request first. I don't really see the point of splitting the auto-scroll / auto-refresh buttons. IMO  it just add too many controls on the view.\nAlthough the ability to wrap log lines is interesting.\ncc @ncresswell thoughts?. @hasnat can you update the PR to include the changes for the wrap line feature only?. @hasnat can you open a new issue to discuss this? Try to post screenshots if you can to give more context.. Thanks @hasnat :+1: \nAnd sorry for the late review/merge.. Hi @danielfrancora \nHave you tried it on the Docker CLI ? I believe that this is an issue in your compose file. Could you try with the extended volume syntax?\nExample:\nyml\n    volumes:\n      - type: bind\n        source: E:\\Docker\\docker-data\\Central\\CentralServicos\\Anexos\n        target: C:\\Websites\\Prod_CentralServicos\\CentralServicos\\Anexos\n      - type: bind\n        source: E:\\Docker\\docker-data\\Central\\GestaoRH\\Arquivos\n        target: C:\\Websites\\Prod_CentralServicos\\GestaoRH\\Arquivos\n      - type: bind\n        source: E:\\Docker\\docker-data\\Central\\CentralServicos\\Log\n        target: C:\\Websites\\Prod_CentralServicos\\CentralServicos\\Log. Hey @danielfrancora \nThe extended (or long) syntax requires to use Compose format version v3.2: https://docs.docker.com/compose/compose-file/#long-syntax-3\n. Something is wrong with your Compose file... I'd suggest you to have a look at the compose docs or ask for help in an official Docker support as this is more related to Docker than Portainer.. Portainer uses docker stack deploy behind the scenes to deploy the stack. So I think that this is related to an incorrect usage of stacks on Windows, you might want to dig more information about this.\nAlso do no hesitate to report your findings here !. Hmm, thanks for the report.\nWhat is the version of the Docker CLI that you're using?. > AND when I create the container by the command line E:\\Docker\\docker-data\\Central> docker stack deploy -c .\\docker-compose.yml centralservicos it works perfectly.\nSo when you use docker stack on the Windows host, it's working. What happens when you use it on a Linux host?\nE.g.:\n$ docker -H windowshost.domain:2375 stack deploy -c .\\docker-compose.yml centralservicos. Hi @danielfrancora \nThe compose file must be located on the host where you are executing the docker -H ... command.. > Yes, the path e:\\Docker\\docker-data\\Central\\docker-compose.yml is locates in sw-per01 that is a windows manager.\nThe compose file must be located on the same host where you execute the command (sw-per06), try to copy the file on this host and execute the command again?. Hey @danielfrancora\nStandard TLS port should be 2376 not 2377 (which is usually used by Swarm for internal communication).\nAnyway, if you're sure about this, you'll need the TLS certificates that you used when creating the endpoint inside portainer to use the CLI like this: docker --tlsverify --tlscacert=ca.pem --tlscert=cert.pem --tlskey=key.pem -H ....\nSee https://docs.docker.com/engine/security/https/ for more info.\nI'd like to confirm if the Linux Docker binary (Docker version 18.03.1-ce, build 9ee9f40, same version as the one embedded inside Portainer) is causing the problem when used against a Windows host.\n. All right, thanks for trying.\nI'll tag this as a bug although I do not have the means to reproduce it at the moment. I'll keep it open as the investigation is not over.. Hi @himred \nThis was added recently via https://github.com/portainer/portainer/pull/1963 (although it only supports compose version == 2 for now).\nIt will be part of the next release, in the meantime, you can try it via portainer/portainer:develop (Linux amd64 build only).\n. Hi @himred \nThis was added recently via https://github.com/portainer/portainer/pull/1963 (although it only supports compose version == 2 for now).\nIt will be part of the next release, in the meantime, you can try it via portainer/portainer:develop (Linux amd64 build only).\n. > I found a strange issue while testing: try to click on the \"Columns\" setting and then directly on \"Settings\" (you can continue to alternate clicking on these two) it seems that some padding/marging is added on top of the container action bar... could you investigate this?\n\nI tried on FF and Chrome and that didn't happen for me. I clicked on Columns then Settings and alternated between them. Is that the way to reproduce it? Are you referring to the padding / margin mismatch when you show / hide State column?\n\nHere is what I mean by that: https://youtu.be/Ypks0NtLCtc\n\nThere is one potential issue though. Let's say the user hides all the columns and we persist these settings. Once the user refreshes, the containers list is going to be empty since there are no columns to be displayed in the table. Should we manually force the Name column to be there on initialization?\n\nMy opinion is that we should not allow to hide the column containing the checkbox used to select an item (usually the identifier, Name in this case).\n. > I found a strange issue while testing: try to click on the \"Columns\" setting and then directly on \"Settings\" (you can continue to alternate clicking on these two) it seems that some padding/marging is added on top of the container action bar... could you investigate this?\n\nI tried on FF and Chrome and that didn't happen for me. I clicked on Columns then Settings and alternated between them. Is that the way to reproduce it? Are you referring to the padding / margin mismatch when you show / hide State column?\n\nHere is what I mean by that: https://youtu.be/Ypks0NtLCtc\n\nThere is one potential issue though. Let's say the user hides all the columns and we persist these settings. Once the user refreshes, the containers list is going to be empty since there are no columns to be displayed in the table. Should we manually force the Name column to be there on initialization?\n\nMy opinion is that we should not allow to hide the column containing the checkbox used to select an item (usually the identifier, Name in this case).\n. Still having the padding issue on latest Chrome (67.0.3396.87).. Still having the padding issue on latest Chrome (67.0.3396.87).. Yes, the padding issue is solved ! So, what about adding that Host column now ?\n(nevermind the AppVeyor build failure). Yes, the padding issue is solved ! So, what about adding that Host column now ?\n(nevermind the AppVeyor build failure). Awesome, I'll review this soon.. Awesome, I'll review this soon.. Hey @parag-datar, any chance that you can add the Created column as well? It was originally requested in https://github.com/portainer/portainer/issues/1890\n. Hey @parag-datar, any chance that you can add the Created column as well? It was originally requested in https://github.com/portainer/portainer/issues/1890\n. Thanks @parag-datar :+1: . Thanks @parag-datar :+1: . Hi @chris-fa \nWe've got a feature request open for this, see #1577 . Hi @chris-fa \nWe've got a feature request open for this, see #1577 . Inspect the service, in the image field it should have a digest associated in the form:\nmyaccount/myimage:mytag@sha256...\nRemove the @sha256... part and trigger an update. That should re-deploy the service and pull the latest image.\nIf the @sha256... part is not available, then you need to pull the image,  retrieve the digest from the images view and associate it to the service + trigger an update. \nNote that I've just opened https://github.com/portainer/portainer/pull/1984 to make it a lot easier. It will be part of the next release (coming soon, we're doing tests at the moment).. Inspect the service, in the image field it should have a digest associated in the form:\nmyaccount/myimage:mytag@sha256...\nRemove the @sha256... part and trigger an update. That should re-deploy the service and pull the latest image.\nIf the @sha256... part is not available, then you need to pull the image,  retrieve the digest from the images view and associate it to the service + trigger an update. \nNote that I've just opened https://github.com/portainer/portainer/pull/1984 to make it a lot easier. It will be part of the next release (coming soon, we're doing tests at the moment).. If you created your service via Portainer then it's normal that the digest is not set, the current version of Portainer do not support it.\nThinking about it, I don't think that you'll be able to retrieve the digest in the Images view.\nSo either you:\n\n\nUse the Docker cli to pull the image and then list the images to retrieve the digest Docker images ls --digests, then update the service as specified above in Portainer to include the digest\n\n\nSimply upgrade to portainer/portainer:develop (it's a Linux amd64 only build) and click on the update button.\n\n\nNote that the develop version is currently under testing as we're preparing release 1.18. If you created your service via Portainer then it's normal that the digest is not set, the current version of Portainer do not support it.\nThinking about it, I don't think that you'll be able to retrieve the digest in the Images view.\nSo either you:\n\n\nUse the Docker cli to pull the image and then list the images to retrieve the digest Docker images ls --digests, then update the service as specified above in Portainer to include the digest\n\n\nSimply upgrade to portainer/portainer:develop (it's a Linux amd64 only build) and click on the update button.\n\n\nNote that the develop version is currently under testing as we're preparing release 1.18. When using Swarm, it is always recommended to work with digests otherwise you can't ensure that all the tasks of your service are using the same image. Besides, without using a digest, if you're just sending a service update request to swarm with the image nginx:latest for example and your service is already using this image, Swarm will do nothing.\nEither you follow the instructions I posted above, or you can go to each node in your cluster and pull the image (depending on which image you're pulling, it might not be the same version if the image is updated between different pulls so watch out) but I do not recommend this way of doing it.\nThe develop branch allows you to use digests \"implicitly\" (that is, by specifying nginx:latest, the digest will be automatically appended to the image for you).. When using Swarm, it is always recommended to work with digests otherwise you can't ensure that all the tasks of your service are using the same image. Besides, without using a digest, if you're just sending a service update request to swarm with the image nginx:latest for example and your service is already using this image, Swarm will do nothing.\nEither you follow the instructions I posted above, or you can go to each node in your cluster and pull the image (depending on which image you're pulling, it might not be the same version if the image is updated between different pulls so watch out) but I do not recommend this way of doing it.\nThe develop branch allows you to use digests \"implicitly\" (that is, by specifying nginx:latest, the digest will be automatically appended to the image for you).. In Kitematic, there should be an option that allows you to bind mount a folder of your host inside the container. As Neil stated, you need to bind mount the Docker socket of your host inside the container (/var/run/docker.sock on your host to /var/run/docker.sock inside the container).\nFeel free to join us on Slack at https://portainer.io/slack/ if you need support.. In Kitematic, there should be an option that allows you to bind mount a folder of your host inside the container. As Neil stated, you need to bind mount the Docker socket of your host inside the container (/var/run/docker.sock on your host to /var/run/docker.sock inside the container).\nFeel free to join us on Slack at https://portainer.io/slack/ if you need support.. I think that you'll want to use the following service definition for the agent:\nyml\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - target: 9001\n        published: 9001\n        protocol: tcp\n        mode: host\n    networks:\n      - portainer_agent\n    deploy:\n      mode: global\nAnd then use the IP address of any node in your cluster as the agent URL (192.168.178.21:9001 ?).\nMore info in our docs here: http://portainer.readthedocs.io/en/stable/agent.html#connecting-an-existing-portainer-instance-to-an-agent\nWe also recommend to put the agent inside its own overlay network.\nClosing the issue, feel free to re-open/comment if needed.. I think that you'll want to use the following service definition for the agent:\nyml\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - target: 9001\n        published: 9001\n        protocol: tcp\n        mode: host\n    networks:\n      - portainer_agent\n    deploy:\n      mode: global\nAnd then use the IP address of any node in your cluster as the agent URL (192.168.178.21:9001 ?).\nMore info in our docs here: http://portainer.readthedocs.io/en/stable/agent.html#connecting-an-existing-portainer-instance-to-an-agent\nWe also recommend to put the agent inside its own overlay network.\nClosing the issue, feel free to re-open/comment if needed.. Hi @bygui86 \nThere are two ways to connect Portainer to an agent:\n\nYou deploy Portainer and the agent in the same overlay network and you connect Portainer to the agent via tasks.<agent_service_name>:<agent_port>\n\nThis is our recommended setup, we provide a stack file for this available via http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\n\nYou deploy the agent separately. As the Portainer instance might not be in the same overlay network, you need to expose the agent port on each host (see the configuration example that I gave you above) and you connect Portainer to the agent via <node_ip>:<agent_port>\n\nSo to answer your questions:\n\n\nno, but it's recommended if you have only one Swarm cluster to manage\n\n\nit's definitely possible to run a Portainer instance somewhere (for example, on your laptop) connected to multiple Swarm environments via the agent. Hi @bygui86 \n\n\nThere are two ways to connect Portainer to an agent:\n\nYou deploy Portainer and the agent in the same overlay network and you connect Portainer to the agent via tasks.<agent_service_name>:<agent_port>\n\nThis is our recommended setup, we provide a stack file for this available via http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\n\nYou deploy the agent separately. As the Portainer instance might not be in the same overlay network, you need to expose the agent port on each host (see the configuration example that I gave you above) and you connect Portainer to the agent via <node_ip>:<agent_port>\n\nSo to answer your questions:\n\n\nno, but it's recommended if you have only one Swarm cluster to manage\n\n\nit's definitely possible to run a Portainer instance somewhere (for example, on your laptop) connected to multiple Swarm environments via the agent. Docker comes with label support, we might be able to leverage these and allow the user to filter by labels when searching in the services list view. What do you think @gpickin . Docker comes with label support, we might be able to leverage these and allow the user to filter by labels when searching in the services list view. What do you think @gpickin . Might be related to libcompose, we'll try to reproduce.. Might be related to libcompose, we'll try to reproduce.. @shawly the need-confirmation is here to specify that no Portainer engineer has been trying to reproduce this bug yet. We'll investigate.. @shawly the need-confirmation is here to specify that no Portainer engineer has been trying to reproduce this bug yet. We'll investigate.. Ok, let's filter on the desired state.. Ok, let's filter on the desired state.. Sorry @Umaaz we were not able to investigate this yet, I've referenced a network instability issue with serf inside AWS, might be related: https://github.com/hashicorp/serf/issues/512\n\n\nI know that @mrmachine is another AWS user, have you seen the same issues?. Sorry @Umaaz we were not able to investigate this yet, I've referenced a network instability issue with serf inside AWS, might be related: https://github.com/hashicorp/serf/issues/512\nI know that @mrmachine is another AWS user, have you seen the same issues?. @daneZz are you using the agent setup?. @daneZz are you using the agent setup?. I'm curious if this could be caused by the recently introduced snapshot feature. Can anyone try to reproduce this error with the snapshot feature disabled ? Use the --no-snapshot flag to disable it. \nE.g. docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer --no-snaspshot. I'm curious if this could be caused by the recently introduced snapshot feature. Can anyone try to reproduce this error with the snapshot feature disabled ? Use the --no-snapshot flag to disable it. \nE.g. docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer --no-snaspshot. @guppie70 snapshots were introduced in 1.19.1, it will periodically poll the endpoints you have defined in Portainer to refresh the information available in the home view. \nFlags are missing from the configuration section of the docs, will update it.\nI'm thinking that this might be related to the snapshot feature but I'm not sure so it would be keen of you to try with this flag.. @guppie70 snapshots were introduced in 1.19.1, it will periodically poll the endpoints you have defined in Portainer to refresh the information available in the home view. \nFlags are missing from the configuration section of the docs, will update it.\nI'm thinking that this might be related to the snapshot feature but I'm not sure so it would be keen of you to try with this flag.. Awesome, I do not have any lead on this problem yet. Please report it there if you still encounter the issue.. Awesome, I do not have any lead on this problem yet. Please report it there if you still encounter the issue.. Anybody keen to try the portainer/portainer:fix1991-open-files image (linux amd64 build) and report if the problem is solved?\nping @random-ua @CWiesbaum @guppie70 @daneZz @mrWinston @Umaaz . Anybody keen to try the portainer/portainer:fix1991-open-files image (linux amd64 build) and report if the problem is solved?\nping @random-ua @CWiesbaum @guppie70 @daneZz @mrWinston @Umaaz . The --no-snapshot flag is not a solution here, it was just used to isolate the cause of the problem.\nI believe that #2235 solves this issue, waiting for some feedback from other users before we decide to merge it.. The --no-snapshot flag is not a solution here, it was just used to isolate the cause of the problem.\nI believe that #2235 solves this issue, waiting for some feedback from other users before we decide to merge it.. Will re-open as we only fix this for the Portainer part actually, not for the agent.. Will re-open as we only fix this for the Portainer part actually, not for the agent.. Not sure but you can try it and report if it brings any change, that would help our investigation.. Not sure but you can try it and report if it brings any change, that would help our investigation.. @Premik can you see this error in portainer logs or agent logs?. @Premik can you see this error in portainer logs or agent logs?. @Premik thanks for the report, yes this issue is related to the agent. The --no-snapshot was supposed to fix the same bug Portainer side in 1.19.1, so no need to keep this flag.\nWe're investigating this problem.. @Premik thanks for the report, yes this issue is related to the agent. The --no-snapshot was supposed to fix the same bug Portainer side in 1.19.1, so no need to keep this flag.\nWe're investigating this problem.. Heya @fsx999 \nDid you connect a Portainer instance to an existing agent? The agent only allows ONE instance of Portainer at the moment, if you re-deployed Portainer, you'll need to re-deploy the agent.. Heya @fsx999 \nDid you connect a Portainer instance to an existing agent? The agent only allows ONE instance of Portainer at the moment, if you re-deployed Portainer, you'll need to re-deploy the agent.. Can you paste the content of the Portainer container logs here please? I believe that re-deploying the agent should fix the issue.. How do you re-deploy ? There is no need to re-deploy the Portainer service, you just need to re-deploy the agent service.. Wonder if it's impacted by the HTTP_PROXY/HTTPS_PROXY environment variables?\nHave you tried to without these?\nWhat if you force a re-deploy of the agent service via docker service update --force portainer_agent ?. Is it possible that your proxy at 192.168.0.1:3128 could remove some HTTP headers? Portainer sends multiple HTTP headers to the agent via headers prefixed with X-PortainerAgent-.. Ok, closing this issue.. Hey @rems \nCould you paste the content of the compose directory inside the Portainer data volume? . Hi @ijzerbroot \nHow did you upgrade Portainer? Also, what's the number of node reported in the dashboard when you connect to the agent endpoint?. All good, I will assume that the previous agent instances were not shut down properly and still holding information about the previously connected Portainer instance.\nI'll close this issue as the problem is solved but we definitely need to write an upgrade procedure for the agent setup.. Thanks for the kind words @ijzerbroot \nNote that we just found a bug with stacks in 1.18.0 (see #1998), it has been fixed and I'll release 1.18.1 soon !. @salcedo I'm investigating, indeed looks like an issue related to an invalid folder on disk. Will keep you posted ASAP\nProbably related to #1995 . There is an issue indeed with stacks created from a git repository (including templates). I'm working on a fix.. @salcedo it has been fixed via #2000 \nI'm going to release 1.18.1 that will include this fix.\nIn order to clean-up your instance, you can use the HTTP API:\n```\nretrieve an auth token\n$ http POST :9000/api/auth Username=\"adminuser\" Password=\"adminpassword\"\nfor each stack, delete it using the API, it should remove the stack and remove the folder on disk\n$ http DELETE :9000/api/stacks/?endpointId= \\\n\"Authorization: Bearer \"\n```\nNote that removing the stack will call docker stack rm behind the scenes, removing all the services associated to the stack.\nSorry again for this issue, it seems to have slipped through our tests.. Hi @mattie47, sorry for the late update.\nThis questions is a bit too generic for us to help you with a particular answer. You might want to ask/discuss with the community in https://portainer.io/slack/. @stefano-gristina Are you able to create a stack inside a non-TLS protected endpoint? Might be related to how we pass the TLS details to libcompose.. > Withous TLS authentication, it works but in the stack page two stacks are showed.\nLooks like it's related to this bug report: https://github.com/portainer/portainer/issues/2020\n. Hi @dwebber \nStacks are persisted inside Portainer as we need to keep a track of the related stack files/details in order to be able to manage them (as Docker do not expose an API for managing stacks).\nThe stacks API has changed in 1.18, see the latest docs here: https://app.swaggerhub.com/apis/deviantony/Portainer/1.18.1\nIt introduces a filter query parameter, allowing you to query and retrieve the stacks associated to a specific Swarm cluster (via the swarm identifier of the cluster).\nI'll tag this as a question and close it, feel free to continue the discussion in here or ask if you think something's missing.. Hey @dwebber \nWhat do you mean by \"The only solution to the above was restarting portainer but in some use cases, this is not viable.\" ?\nDo you wipe out the entire database to solve this issue? Don't you persist Portainer data?\nAnother solution would be to simply delete all the \"out-of-sync\" stacks (which are actually simply stack references) by using Portainer HTTP API.\n\nCant' stacks be managed via the 'docker stack' command (https://docs.docker.com/engine/reference/commandline/stack/#options)?\n\nIt is already, as Docker do not expose any API to manage stacks nor propose any library to do so, we have to embbed the docker client to run docker stack deploy/rm commands. But Portainer cannot only relay on the information available via the CLI (such as stack ls) as it need to keep tracks of the compose file as well.. @taiidani at the moment the agent is purely design to be used with Swarm clusters only. It's not recommended to deploy it on standalone hosts.\nWe recommend you to connect Portainer to a standard TLS secured way when you want to manage a Standalone Docker environment.\nAgent support for Standalone hosts will come later.. I've tagged this as help wanted as I do not have a Windows environment available to test this at the moment, could be helpful if another Windows user can reproduce and notify us about it.. Great, closing :-). @Duvel \nIf the X-Portainer-Target header is missing, it will fail to remove containers located on others nodes.\nAs the delete request is round robin on the agents, if the delete request targets a container available on the same node as the targeted agent, it will work. Hence why you can see this working sometimes.\nProbably a bug, should be easy to fix, I'll investigate.. Hi @mvillarejo \nHow did you deploy the agent?\nFYI the \"Architecture\": \"amd64\" correspond to the platform the image was built on, not to the target platform. Something else must prevent the service to be scheduled on your nodes.. What about simply using portainer/agent as the image instead of portainer/agent:linux-arm64 ? It's a multi-arch image, should automatically detect the appropriated platform for you.. Hi @CooleRnax \nHow did you deploy Portainer? What do you mean by \"The node behind NAT doesn't show up in the portainer dashboard.\" ? Do you mean that you don't see the node in the Swarm section?. @CooleRnax can you share the logs of the Portainer agent service?. Hi @tvdstaaij \nThanks for the contribution ! I'm going to keep this one open as I'll push major changes regarding the templates soon (work on #1800).\nI'll keep you updated in here.. Heya @tvdstaaij \nCould you rebase your PR and adapt the changes with the latest addition of template management? See #2017 . Hi @tvdstaaij \nAny update?. For you information, this format is not supported by the templates format. See #776 for the feature request.. Related to #1958 \nI'll keep this open-right now but I'll probably implement it as a part of my work on https://github.com/portainer/portainer/issues/1800 (that will be available soon).. Closed in favor of #2017 . What about defining your own environment variable and passing the value of your choice (the username) in this variable?. @farodin91 feel free to open a PR :). Hi @lukey78 \nThe reason why your request works sometimes is because Swarm will load balance (round robin) the requests to each agent in your cluster.\nIn order to reproduce the UI behavior and target a specific node, you'll need to add an extra header (X-Portainer-Agent to your request specifying the name of the target node.\nExample:\nX-PortainerAgent-Target=my_node_name\nClosing this issue, feel free to discuss it in here if it's still not working.. Hi @lukey78 \nIndeed, this is not specified in the API docs, can you open an issue in our documentation repository?\nYou're correct about the process, if you send a request without specifying the target header, Portainer will aggregate the containers from all nodes and decorate each container with the NodeName property. Then you can retrieve it and add it as the value of the target header to execute an action on a container inside the cluster.. @bluestingray that would be https://github.com/portainer/portainer-docs/issues/52\nWe'll update it ASAP.. Great, thanks @olljanat . Great job @olljanat  :+1: \n\nIf you add local connection without selecting Windows containers. It will be saved with incorrect settings even if you change it.\n\nAn communication error should be raised as it is now when adding a local Unix environment when the socket file is not available.. Sorry @olljanat I'm a bit busy, I'll do a review tomorrow.. Ok, technically looks good to me. @olljanat have you tested everything including container console?\nI believe that we need to wait for https://github.com/Microsoft/go-winio/pull/80 to be merged before we merge this one.. Raising this from discussion in #2038, named pipe support will not entirely work as the docker binary that is used behind the scene to deploy stacks do not support named pipe. So more than just waiting for the winio issue to be fixed, we also need to wait for named pipe support in the Docker CLI binary.. @olljanat note that Portainer supports the deployment of two different kind of stacks: Compose stacks (on a Standalone host) and Swarm stacks (on a node that is part of a Swarm cluster).\nIn order to deploy Compose stacks, it leverages the libcompose library (https://github.com/docker/libcompose). And to deploy Swarm stacks, it embeds and uses the Docker binary.\nCan you test both scenarios? Because I don't think it's possible to use the Docker binary with a named pipe.. @StefanScherer thanks for the update and the information, I was not sure about this.\nYes, the portainer images embeds the Docker binary in order to manage Swarm stacks.\n@olljanat Compose stack management on a standalone Docker host still need to be tested, as I am not sure about the usage of npipe with libcompose.. Great, let's wait for the merge of https://github.com/Microsoft/go-winio/pull/80 then.. https://github.com/Microsoft/go-winio/pull/80 has been merged, I'll have a look later today to merge this one.. Thanks to all the people involved !\n@olljanat @StefanScherer :+1: . @olljanat @StefanScherer one of our user reported the following:\n\nHi, I am trying to run Portainer on a Windows 10 (Also tried on Windows Server 2016) but I keep getting this message on both the docker environments: \n\ndocker : C:\\Program Files\\Docker\\Docker\\Resources\\bin\\docker.exe: Error response from daemon: container d20b96fb14e43e112d6a660a23e84853fd90ca602259933fcdabcf941a74789a encountered an error during CreateProcess: failure in a Windows system call: The user name or password is incorrect. (0x52e) extra info: {\"CommandLine\":\"/portainer.exe\",\"User\":\"ContainerAdministrator\",\"WorkingDirectory\":\"C:\\\\\",\"CreateStdInPipe\":true,\"CreateStdOutPipe\":true,\"CreateStdErrPipe\":true,\"ConsoleSize\":[0,0]}. At line:1 char:1 \ndocker run -d -p 9000:9000 --name portainer -v C:\\ProgramData\\docker\\ ... \n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \nCategoryInfo : NotSpecified: (C:\\Program File...leSize\":[0,0]}.:String) [], RemoteException \nFullyQualifiedErrorId : NativeCommandError\n\nI am running this docker command: \n\ndocker volume create portainer_data \ndocker run -d -p 9000:9000 --name portainer -v C:\\ProgramData\\docker\\Containers\\Portainer:C:\\data portainer/portainer\n\nI also tried with --no-auth but I still get the same error. Maybe you can help.\n\nAny pointers on what might be the cause?. I did not actually execute these commands, someone reported it to us via e-mail :-)\nI do not have a Windows environment on which I can try to reproduce at the moment. So I'm asking for any help here.. @olljanat as you can see the user is simply running:\ndocker run -d -p 9000:9000 --name portainer -v C:\\ProgramData\\docker\\Containers\\Portainer:C:\\data portainer/portainer\nWhich should be working on Win server 2016. Ok, I'll ask him to open an issue. Thanks @olljanat . Duplicate of #1368 . @himred thanks for helping finding a cause to the problem\n@MGStudio I'm pretty sure this is related to the libcompose library that is used behind the scenes. I don't think that adding a regexp to ensure specific name would be the way to solve the problem, we should investigate if a bug fix is needed in https://github.com/docker/libcompose . No ETA on this yet as we need to dive into libcompose to potentially fix this.\nFYI the need-confirmation label is to be used by Portainer team to specify that a member of the team was able to reproduce the problem.\nWe do take all your comments into account though.. For information, I asked for this issue to be opened because it looks like it's related to the fact that Portainer is deployed using the --ssl*  flags. . Hi @panay this is a pretty vague question, we'll need more information to help you.\nHow did you deploy your WordPress ? Via Portainer? . @panay I'm not really used to Wordpress so I'm not sure how to proceed here but if you can't do this via the Wordpress UI maybe what you're searching to do is to exec into the wordpress container.\nTo do so, in Portainer, go in the containers list and click on the small console icon in the quick actions column. It'll redirect you the the container console view, select a shell (/bin/bash for example) and click on connect. You'll be able to update the container like this.\nI'm going to close this issue as it's not really related to Portainer, more to Wordpress usage inside Docker (there are plenty of articles online about this, you might want to check this out). . You probably need to install an editor inside the container, such as nano.. Hi @vovecudalec \nAre you using a public GraphQL image? Can you share it with us so that we can try to reproduce?. Duplicate of #1347 . Hi @kfrajtak, you can update the Public IP of your endpoint in Settings, Endpoints, click on the endpoint, update the public IP and hit save. \nClosing this issue, feel free to comment or ask if you're missing something.. @olljanat are you trying to deploy a compose stack on a standalone host or inside a Swarm cluster?. Windows, with or without npipe?. Hi @vboufleur \nThere is an issue with our docs, the \"stable\" version is actually pointing at the development version, which should not be the case.\nHere is the actual documentation of the latest version of Portainer: https://portainer.readthedocs.io/en/stable/templates.html\nNote that this will change in the next version,  and you'll need to upgrade the template format.\nClosing, feel free to ask for anything else if you're still having issues.. @vboufleur this feature is not available yet but will be available in the next release, you can test it via portainer/portainer:develop (which is our development build, not production ready). \nThe next version will introduce major changes regarding templates and should be available next week.. Probably related to libcompose.. I've shared a patch with @olljanat, waiting for application.\nNote: we also need to update the information message in the settingsAuthentication.html file regarding the fact that users still need to be created first and the exception for the admin user.. Thanks @olljanat :+1: . @ncresswell Thoughts?. Duplicate of https://github.com/portainer/portainer/issues/611. Related to https://github.com/portainer/portainer/issues/571 ?\ncc @ncresswell . @Zebradil does this solve your problem?. @Zebradil you can also create the stack from a git repository, as the stack is created using the root of the repository as context, your relative bind mounts should work.. Relative paths should work when creating a stack from a git repository.. My bad, if forgot to mention that it will only work if the Portainer instance is managing the host where the stack will be deployed. Are you trying to deploy on a remote endpoint?. Ok, we'll investigate.. Thanks @ercpe :+1: . This is a strange bug, as the first step of the current re-creation workflow should be to delete the original container.\nNote that the workflow should be updated to  the one specified in here anyway: https://github.com/portainer/portainer/issues/1491#issuecomment-350813534. Hi @wangkai1994 \nCan you specify which part of the display you think is incorrect?. @wangkai1994 I cannot tell what's the difference or what you're actually expecting to be correct in Portainer. Can you give us more details?. Ah, yes now I can see the difference, sorry. Looks like a bug, indeed, how did you deploy Portainer?. Ok, might be agent related, I'll tag it as a bug. Thanks for the report.. @ordenador @AlejandroDRM are you both using the agent?. @ordenador I'd like to know if you connected Portainer to a Portainer agent?. @ordenador interesting, we simply pull data from the Docker API.\nCan you give us more details as the author of this post did? A screenshot of Portainer & Docker CLI could help ! Thanks.. @wangkai1994 can you share the POST response as well?. Hi @stefano-gristina \nCan you tell us which version of Portainer are you using?. What happens if you try to create the stack with another name?. Are you able to explore the data volume of portainer? If so, can you have a look at the /data/compose folder and list the content in here?. @torlenor something that we will check a'd fix, a missing cleanup step indeed. . Should be solved via #2063 . See my update in the issue your created.. @1138-4EB it was technically easier for us to integrate this feature via the agent. @jackstrosahl yes. It's still broken for some parts of the app (see the container command in the service details view).\n\n. Quick update on this:\nWhile this fix the problem with the command field in the service details view, other places like container details still have this issue.\nI think that we need to revert #1770 and only add the white-space: nowrap; style to specific elements in the UI.\nWe should target all the identifiers column in the Docker resources datatable.. Thanks @xAt0mZ :+1: . Yes, we'll consider this as an enhancement. It implies to upgrade libcompose to support compose > 2. @braaccckkk I believe this is the way to go to support version > 2. @krysennn You can deploy a Swarm stack (docker stack deploy equivalent) version > 3, but we only support Standalone stacks (docker-compose equivalent) version 2.. Hi @MicahZoltu \nA simple docker swarm init command will allow you to create a simple one node Swarm cluster and give you access to Swarm features.\nOnce your host is in Swarm mode, Portainer will auto-detect it and you'll be able to use Compose v3+ to deploy stacks.. @lsascha Portainer uses libcompose behind the scene to deploy stacks on standalone Docker hosts (as you would do when using the docker-compose tool) and uses the Docker CLI binary to deploy stacks on Swarm environments (equivalent of docker stack deploy ... command).. Mainly because the Portainer image aims to be a lightweight multi-platform image that can be deployed on any OS/arch and that the compose binary is only available for linux and windows amd64.\nWe would either need to bundle python into our Portainer images or create our own unofficial build pipeline for compose on the different platforms we support (assuming it's possible).\nOverall, interfacing with an API/library is much easier/has less constraints than interfacing with a binary. Although I'm aware that our possibilities are limited in this context.\nIf we decide to limit our os/arch target scope we would be able to switch to bundling/using the official compose binary. A potential way to do it might be to disable stack management on the platform where the binary is not available.\nAnother way of doing it would be to create an extension that would bring enhanced compose support for these platforms.. That could be a potential way of working around this too.. @bb128b not sure, we have not tried to reproduce the bug yet.. Duplicate of #696 . Done. The events section is not available for Swarm enabled endpoints. See the discussion in https://github.com/portainer/portainer/issues/920\n. @farodin91 don't worry about the code climate issues I'm currently reviewing the PR.. Awesome, let me review this again.. @farodin91 awesome, can you use gofmt on .go files?. Thanks @farodin91 :+1: . Thanks @hiyao :+1: . Thanks @xAt0mZ :+1: . Hi @pkaramol \nAre you managing a Standalone Docker instance or is portainer connected to a Swarm cluster?. This is totally normal then, the latest release of Portainer only support Swarm stack templates.\nAlthough we recently introduced support for Compose stack templates (and much more regarding templates) via https://github.com/portainer/portainer/pull/2017\nIt will be part of the next release, which we  are currently preparing.. Closing this issue.. Hi @kristoferlundgren \nTLDR: you must persist Portainer data if you want it to re-connect to an existing agent after a restart.\nPortainer uses a combo of private/public key that is stored inside the /data folder to authenticate against an agent.\nAs a security measure, an agent only allows one Portainer instance to connect to it. This might evolve later on, but once a Portainer instance has started a communication with an agent, this instance will be registered inside the agent as the authorized Portainer instance. Hence why you need to restart the agent after restarting a new Portainer instance.\nClosing, feel free to comment or ask any questions in here.. Hi @kristoferlundgren, sorry for the late update.\n\nAlthough, when running in a multi-node cluster. Looking at Portainer web -> Containers. The list of containers is not complete. It only lists one \"docker-socket\" container although \"docker-socket\" is successfully running on all nodes. -1\nIt seems Portainer does not resolve the DNS entry \"tasks.docker-socket\" to all it's IPs. To me it looks as if Portainer picks one IP and goes with that one. -bug?\n\nYou're using a simple socat proxy container, resource aggregation (containers, volumes, etc...) is done on the agent side in Portainer. This is why you only see the resources running on a node at a time (plus it will probably round robin requests to tasks.docker-socket showing your resources on different nodes each time you refresh a view). Not recommended.\n\nAlso, going through the hoops of creating a .json file (and separately managing that) could also be easier. Ex. Allow Portainer --host parameter to specify a non-tls entry.\n\nThe -H already allows you to declare a non-TLS secured endpoint.\n\nThe installation should rather be a \"just-works\" deployment.\n\nI agree with you and this is what we've tried to achieve with the current agent version. Although we need to review a bit the security layer of the agent and we'll keep that issue in mind. It's always tricky to mix simplicity and security.. Ah thanks for reporting this, I'll update the docs.\nAlso I noted that you're using the --no-auth flag, can you enter the discussion at https://github.com/portainer/portainer/issues/2101 ?. Ok, great, thanks !. @brettzink now that this feature was released as a part of 1.19.2, please open a bug report if you can reproduce this.. Hi @egofelix \nIt was an issue with the documentation, the documentation was published before the release and this feature is only available in Portainer >= 1.19.0.. Hey @wicadmin, sorry for the late update. What do you mean by leveraging their UI ? Should we take some inspiration to update a particular view? Have you tested the latest \"Home\" view introduced in 1.19.1 ?. I'll close this issue as it's a bit too generic: \"inspiration from Rancher 1.x\", I mean we're here to make it really simple to manage your Docker environments but we need more precision on the features/enhancements you'd like to see.\nPlease have a look at 1.19.1 first and then open different issues for each part of the UI you'd like to see updated, with a description of what you'd like to see integrated.. We're open to any suggestions, what Neil wants to say is that we're just not going to simply copy Rancher 1.x UI... I don't want to go this way neither.\nAs I stated above, if you want to suggest any change to a specific view, you can open an issue regarding a change that you'd like to see. But please describe what you'd like to be able to achieve instead of simply giving us screenshots.. Hi @GoncaloBorges, sorry for the late answer.\nIt is not possible to execute the equivalent of docker-compose run ... inside Portainer. Whilst this is technically possible (as supported by libcompose: https://godoc.org/github.com/docker/libcompose/project#EmptyService.Run) this would require us to think about a way to to make this easy to use inside the app UX/UI wise.\nAt the moment, you can simply execute the equivalent of docker-compose up and docker-compose down via Portainer for Compose 2 stacks.\nTagging as an enhancement of the stack feature.. Note: while @reloxx13 and @RaymondMouthaan issue is related to a missing file in the released container, the author issue is different. I believe that all containers except the linux-amd64 are impacted.\n@paulmorabito You're declaring a custom command for Portainer command: --templates http://templates/templates.json. During startup, Portainer will try to fetch templates from the HTTP URL http://templates/templates.json (which is obviously not reachable as it's not part of your Compose setup).\nTry the following Compose file:\n```yml\nversion: \"3.6\"\n  services:\nportainer:\n image: portainer/portainer\n container_name: portainer\n restart: always\n ports:\n - \"9000:9000\"\n volumes:\n - /var/run/docker.sock:/var/run/docker.sock\n - ${USERDIR}/docker/portainer/data:/data\n - ${USERDIR}/docker/shared:/shared\n environment:\n - TZ=${TZ}\n\n```\nThis will use the default template files embedded in the container.. As @Codelica stated, external templates declared via --templates or --template-file (I need to update the docs about this one, it allows you to read templates from a path on disk) are loaded only once and then persisted inside the database.\nThe way to go then would be to use the HTTP API or the UI directly to update these templates. We'll definitely add a way to refresh the template list as well as an API operation.\nNote, the sync process will probably be based on the title and type field. There is no way to ensure uniqueness via the template file so the first entry matching one in the database based on the title and type will be synced, other entries with the same title and type will be ignored.\nUI-wise, I'm thinking about adding a \"Refresh\" button to the templates view available for administrators only.. Update on this topic:\nWe're going to revert the behavior of the --templates to what it was prior to 1.19.0. Meaning that when you specify the --templates flag, each time you access the templates view, we'll poll the templates from the specified URL and display them. We'll also disable template management when the --templates flag is specified.\nIf the --templates flag is not specified, we'll keep the current behavior of loading the Portainer database with the templates available at /templates.json with template management enabled in-app.. @xvlcwk @Codelica keen to give a try to portainer/portainer:pr2119 and give us some feedback? It re-introduces the ability to use external templates.. Hey @xvlcwk \nThanks for the feedback, you should not be able to edit/create a template when using external templates, it should be disabled. I'll review it.\n. I'm not able to reproduce your problem @xvlcwk \nWhen using external templates, template management (creation, edition, deletion) is disabled.\nExternal templates declared in settings:\n\nTemplates view:\n\nCan you tell me how I can reproduce your problem?\n. No worries, thanks for the feedback @xvlcwk @Codelica :+1: . @StefanScherer \nYup, the templates.json file was only included in the Linux AMD64 Docker image, 1.19.1 image will be released soon.. Will be fixed via portainer/agent:1.1.1. @stefano-gristina I believe that is caused by the previous issue that was fixed in 1.19.1 (#2050). You need to remove the folder with the higher value in the /data/compose directory of Portainer to fix this and you should never encounter this issue again.\nThe reason is that Portainer's database has a current index set with a value that is already existing on disk.. @stefano-gristina you should remove a folder that is named with a integer value (such as 1, 2...). @stefano-gristina is the folder named with the highest number actually used by any stack?. I'll need to push a specific version for you to help you debug this situation, what I think is happening is the following: \n\nYou're trying to create a new stack, Portainer will retrieve a new identifier for the stack from the database, let's say 43\nIt will then try to clone the git repository containing your compose file inside the /data/compose/43 folder\nIt will fail because this folder already exists\n\nI'll push a specific version of Portainer for you to test tomorrow that will help us diagnose which identifier Portainer is trying to use.. @stefano-gristina could you try with the image portainer/portainer:debug2092 ? Try to create a stack and then share Portainer logs with us.. Great thanks ! So, looks like this is not related to Portainer but rather to the go-git library (the error object not found is raised by the lib). Just wondering, is the master branch available in the git repo that you're trying to clone?. Just wondering if this is related to your env, can you try to deploy a stack from a public git such as https://github.com/portainer/portainer-compose (use docker-stack.yml)?. Ok, we'll try to reproduce with a private git repo.. @stefano-gristina Could you give us more details about the repository that you're trying to clone?. @Duvel \nI'm not able to reproduce the bug using the latest develop version, can you tell us if you can reproduce using portainer/portainer:develop ?. Duplicate of #2008 . I'd rather consider this as an enhancement. There are a few  things to consider here:\n\n\nDisplay CPU/RAM is useful in the case of a standalone engine\n\n\nIn the case of a Swarm cluster (without agent support), IMO it makes no sense to display this information as it will probably reflect the resources available on the manager node Portainer is connected to\n\n\nIn the case of a Swarm cluster (with agent support), we should display the resources available inside the whole cluster\n\n\ncc @ncresswell . Cluster capacity info is not available when connected directly to a Swarm manager.. I changed the display of CPU/MEM resources to standalone engine in the meantime via https://github.com/portainer/portainer/commit/2216bd6e80de0395fa2aa6ec83768817964f4b1d. Right, I missed that.. Templates can be set in the following ways:\n\nVia the --templates flag, takes an URL to the JSON templates definitions\nVia the --template-file flag, takes a path to the template file on the filesystem \n\nCurrently, the templates are only loaded at first startup but we're working on a way to refresh these after the initial loading, see https://github.com/portainer/portainer/issues/2088. Hi @swift1911 \nCould you give us more details? What are you expecting? Any screenshot?. Thanks,\nlooks like a duplicate of https://github.com/portainer/portainer/issues/1807. Hi @opera443399 \nThanks for the report, this was also reported by another user.\n@olljanat keen to have a look at this?. @olljanat I believe this was introduced by the changes to the way the agent retrieves the IP address where it can advertise to other agents (Swarm only).. Anybody keen to try with the image portainer/agent:2102 (Linux amd64 only) and share the agent logs?. @dehy could you try it as well and share the logs?. @opera443399 @dehy @mrmachine We've updated the portainer/agent:2102 image with a fix. Could you confirm that it solves your issue?. OK perfect, thanks for your feedback @opera443399 and @mrmachine I'll push the fix.. @dehy have you redeployed the agent? Also, are you running this setup in Docker for AWS?. We just released the version 1.1.2 of the agent that includes the fix.\nThanks again everyone for the work/feedback.. Hi @ripclaw786 \nCan you share the logs of the Portainer container with us?\nI think that this issue is related to https://github.com/portainer/portainer/issues/1966\n. @ripclaw786 you can simply use the docker logs <portainer_container_name> command.. @ripclaw786 How did you deploy Portainer? You need to remove the --templates http://templates/templates.json flag.. With the latest release, this parameter will now cause Portainer to fail if it cannot reach the templates URL.. Gitlab issue reference: https://gitlab.com/gitlab-org/gitlab-ce/issues/49818. Yes @WTFKr0 might be related, we need to rethink how we parse image names and associate them to registries.. It is going to be reworked, yes.. Anybody keen to try portainer/portainer:fix2105-gitlab-registries-support and give us some feedback?. Thanks for the feedback, we'll continue our investigation.. Hi @Dean-Christian-Armada \nCan you tell which part of the app is getting slow? Also, when did you get the 502 error? I believe that the \"Update out of sequence\" is a Docker issue meaning that you tried to update a service that is still under a previous update.\nFeel free to share the agent logs / portainer logs with us as well.. Ok, I'll tag this one as a duplicate of #2110 . @ncresswell can you test it to ensure everything is working fine? You can use the image portainer/portainer:pr2108.. @ncresswell portainer/portainer:pr2108 updated, awaiting validation.. @opera443399 so this was related to your network settings?. @Dean-Christian-Armada you're using portainer 1.17.1 with the latest agent?. @Dean-Christian-Armada and do you feel that it is faster than 1.19.1 + agent? If you have a bit of time, could you share screenshots as posted above ?. Thanks for the report ! We'll investigate.. @onemorezero could you give us more details on your setup? Are you using the Portainer agent ?. @onemorezero ok, thanks. Any particularly high number of services in these 2 remote endpoints?. Hi @khellinx \nDo you mean adding the ability to specify the --init parameter when creating a container?. @qoh \nMore information about this:\n\n\nUX/UI wise I believe that adding a new switch in the runtime & resources section should be fine\n\n\nBased on the documentation at https://docs.docker.com/engine/api/v1.37/#operation/ContainerCreate\nthis field can be set via the HostConfig.Init as you mentioned. This field is nullable, meaning that it will be omitted if not specified but I think that it should default to false in our case.\n\n\nAlso, this was introduced in API Version 1.37 and should only be available when connected to an endpoint with API version >= 1.37.\nHere is an example on how to do this check: https://github.com/portainer/portainer/blob/develop/app/docker/views/services/create/includes/resources-placement.html#L106. @zicklag Portainer stores information about each stack that was deployed through it. It only stores reference information about the stack (where is it located, which compose file is it using) and is actually not managing the deployment of the stack (which is done via docker-stack behind the scenes).\nAs Neil said, we already have the stack migration feature available that allows you to migrate a stack between two environments (note that it will just deploy a copy of the stack on the other environment and then delete the original stack, it WILL NOT transfer any existing data).\nIt's not possible to migrate a stack to/from an environment that is not managed by Portainer. How could we possibly execute any actions against this environment?\nI think that I see what you mean though, as we have a reference to the stacks that we deployed previously, you would just be able to use this stack reference inside another environment, am I right? \n. > I think the simplest implementation of this feature would be the ability to view the stacks of disconnected Swarm clusters in the UI. The old Swarm could show as a disconnected endpoint that I could still browse the stacks of and still use the migrate feature to move the stacks from that endpoint to a new one.\nYup, this is definitely achievable. It's just a matter of UX/UI.. The Portainer docker image is based on scratch (actually portainer/base), there is no way to exec into this container.\nIf you want to achieve something similar, you'll need to build your own image based on something else like alpine for example.\nWhy do you need to execute this command? We already bundle the certs in the image, but might need to refresh it (https://github.com/portainer/docker-images/blob/master/base/Dockerfile).\n. @olljanat @StefanScherer any pointer here?. > If you still use the rebase-docker-image tool then it is also fine to skip the USER instruction. The metadata of the sac2016 image is transported to the 1709 image and then already starts the processes as ContainerAdministrator.\nThe sac2016 image? What's that?\nThanks for the detailed info !. @mvajid The fix will be available in the next release, in the meantime, I'd recommend to use 1.18.1.. Hey @mvajid \nYes, you can simply use the portainer/portainer:1.18.1 image.. Thanks @olljanat . This implementation is available via portainer/portainer:pr2119 (linux amd64 build only).. @briankabiro great :-)\n\nWould the preference be to show the row and set the value as - if it's empty or not show the row completely if the field is empty?\n\nDo not show the row if the field is empty.\n. Thanks @kendrickm :+1: . @xAt0mZ awesome, I'll rebuild the test image.. @ncresswell can you validate this one functionally ? You can use portainer/portainer:pr2122 to try it.. @ncresswell portainer/portainer:pr2122 updated. @ncresswell implementation ready for final tests via portainer/portainer:pr2122.. @xAt0mZ please hide the \"enable manual attachment\" and \"restrict external access\" switches when creating a config.. @dobe thanks for the info\n@chiptus can you try to reproduce?. @dobe can you give us more details about how did you deploy Portainer and what kind of environment you're managing?. @dobe is the action failing for all tasks? Or for tasks with a specific status?. Hi @vboufleur \nPlease update your templates to the latest definition format: http://portainer.readthedocs.io/en/stable/templates.html\n2018/08/02 23:30:44 Unable to parse templates file. Please review your template definition file.\n2018/08/02 23:30:44 json: cannot unmarshal string into Go struct field Template.type of type portainer.TemplateType\nThis error is due to the fact that you need to use an integer for the type property. Note that external templates are not really supported at the moment in the 1.19.1, you might be interested in https://github.com/portainer/portainer/pull/2119 (which can be tested via portainer/portainer:pr2119).. Duplicate of #2229 . Thanks @chiptus :+1: . Thanks @chiptus :+1: . Hi @splasky \nIs it happening for all the containers? What browser are you using?. Never seen this issue before and I'm not able to reproduce it. I'll tag it as a bug, if other people are having the same issue, they can comment in here.. Hi @Haxy89 \nCan you share the logs of the Portainer container with us?. Thanks for the information, it seems that to reproduce the bug we should follow these instructions:\n\nCreate a TLS secured endpoint via the -H and --tls* flags.\nUpdate the endpoint via the UI. This is not a bug, rather a deployment constraint at the moment.\n\nFor security reasons, the agent only accepts to communicate with a single Portainer instance. Once a Portainer instance has started to communicate with an agent, this instance will be registered as the \"main\" Portainer instance inside the agent. \nIf you completely remove your Portainer instance data, the key used for identification when communicating with the agent will be lost and another one will be created on startup. Thus, the agent will reject communications with this Portainer instance and you'll need to restart the agent service.. Also related to #2076 . Closing this issue with the introduction of the AGENT_SECRET environment variable that would prevent this problem (via https://github.com/portainer/portainer/pull/2486). Ok so not really a bug here. Actually, our intention was to force the user to deploy Swarm stacks only (and do not allow Compose stack deployment) when connected to a Swarm cluster.\nFew reasons are:\n\nWhen managing Swarm clusters, users should be using services instead of containers\nCompose support is actually far behind Swarm stack support\n\nThoughts @ncresswell ?. Ok, closing this issue as this is the actual behavior.. Following a discussion between @jeysibel @ncresswell and me, we decided to go for the following:\n\nAdd a new switch in the settings allowing the usage of Compose files with Swarm clusters: \"Enable support for legacy compose files with Swarm\"\nWhen connected to an agent setup, the user will have the ability to select the node on which to deploy the stack\nIf not connected to an agent but to a Swarm manager directly, the stack will be deployed on the manager directly\nTemplate labels should be updated (stack should be replaced with either \"Swarm\" or \"Standalone\"). @braaccckkk \nNo ETA yet.. This is something that we never added in Portainer as we always considered this as too dangerous for the user.\n\nWe had a discussion about the ability to prune images some time ago where we thought about adding it for an administrator user with a confirmation modal.\nThoughts @ncresswell ?. Duplicate of #2106 \nA fix has already been merged into develop.. @ncresswell played with this a bit, looks OK. Thing to note: all public resources will be updated to administrator restricted (be it default policy or assigned by the user).. Thanks @ricardona :+1: . > I look for a parameter to change this behavior (default to public)\nIs there a such parameter ?\nThere is none.\nAlthough, we're planning on introducing UAC related labels in the next release, see: https://github.com/portainer/portainer/issues/1257#issuecomment-421908587\nWould that be of any help to you?. @ricardona I don't think so.\n1257 aims to provide the ability to set-up access control policies via labels.\n2190 aims to introduce a new project entity as well as enhance Portainer views to support project visualization.. Duplicate of https://github.com/portainer/portainer/issues/287. @Roemer part of next release, should be out next week.. @kasamachenkaow no ETA on this, any contribution is welcome.. @Leen15 Could you send us a  screenshot of docker service ls ? Also, did you share the logs of one agent container or the agent service? I think that docker service logs portainer_agent would be useful here.. @Leen15 which Docker version are you using?. Any chance to give us the logs of the agent containers on each node then?. Looks like the only visible node has trouble connecting to the other nodes (no route to host errors), looks to be Swarm related. Maybe try to upgrade your Docker version if you can ?. @Leen15 agent containers must be able to communicate via an overlay network inside your cluster. Your issue seems to be related to Swarm overlay.. @Leen15 the resource aggregation is located on the agent side and not on the Portainer side. To do so, agents must be able to query each other, which is usually done via an overlay network inside a Swarm cluster.\nTry to make sure that you can actually use an overlay network in your Swarm cluster before going further in your investigation. I'll close this for now as this seems to be related to your setup.. Hey @Leen15 \nUse the following instructions: http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\nThere's no way to execute any shell inside the agent image as it's based on scratch, you could use a custom image if needed.. @chiptus Thanks :+1: \ncould you open a PR in https://github.com/portainer/portainer-docs to update the contribution documentation ?. @mhaamann We could add a label to the \"Last update\" column:\n\n\"complete\" green label when update is OK.\n\"in-progress\" yellow label when update is in progress\n\"failed\": red label when update is KO\n\"rolling-back\" yellow label when update is in rollback state\n\nThoughts @ncresswell  ?. @ApertureDevelopment Docker do not allow to update the port mapping of a running container. The standard way to change the mapping of a container would be to re-create the container.. Wow indeed that is too much, we definitely need to investigate this one.. Tagging as a duplicate of #2110. @fabiopedrosa question, are you using the agent setup?. @fabiopedrosa probably not, I was just asking for directions that we could use to investigate, thanks.. Thanks @salcedo :+1: . Hi @ApertureDevelopment \nWhat do you mean by \"Not being able to run docker inspect, logs, stats or info on a specific docker container\" ? What is the error you get when you try to execute one of these actions against a container? . @ApertureDevelopment are you using any reverse proxy? . Ah, this might be related to your reverse proxy configuration then, see https://github.com/portainer/portainer/issues/488\nAlso, you can check this article about a working  Apache configuration: https://markus-blog.de/index.php/2018/05/11/how-to-manage-docker-with-portainer-on-ubuntu-16-04-lts-with-apache2-as-reverse-proxy/. @ApertureDevelopment are you able to reproduce this problem without the reverse proxy setup?. @ApertureDevelopment any update on this?\n@juanluisbaptiste Have a look at https://schemen.me/portainer-with-traefik/. I've always found this feature interesting for containers that expose a short number of ports. When exposing 5+ ports it become hard to use and can cause issue with the datatable display.\nWe'd accept any suggestions regarding a better UX for this. A sub-table like the task sub-table in the services list could be an idea.. @ncresswell thoughts on this?. Ok, this will probably need to be documented though. Not sure where as we don't have any user guide yet.\nShould we add an information line to this view to specify that extra commands can be added via labels?. Thanks @hasnat :+1: . @kendrickm What's the status on this since you mentioned it is still a WIP? What are the missing pieces? I'll do a quick review soon.. Awesome job @kendrickm :fire: \nThanks @ibnesayeed for your participation in the creation of this feature :+1: . Hi @ru1996 \nThanks for opening this issue ! Please open a pull request from your fork, it works fine as well.. Thanks @ru1996 :+1: . Hi @pguichon \nMaybe these can help:\n\nhttps://github.com/portainer/portainer/issues/1897\nhttps://schemen.me/portainer-with-traefik/. Cannot really help with reverse proxy configurations, sorry. Will tag as help wanted.. @davestephens are you able to reproduce this in 1.19.2 ?. Hi @strawgate\n\n\nCurrently we have to host a webserver alongside Portainer solely to provide the templates file to Portainer.\n\nWhat about using the --template-file flag? You can simply bind mount the template file inside the Portainer container.\nAlso, why do want to disable template management?. Yes, --template-file is used to bootstrap the templates inside the Portainer database, and further template management should be done via UI/API. By default, it will use the template file that is embedded inside the container.\nWhereas --templates will use an external URL to retrieve template definitions. Using this flag will automatically disable the template management.\nIf I understand your problem correctly, you want to manually update the template file, bind mount it in the Portainer container and access the update templates? With template management disabled?. Hi @pommetjehorlepiep \nI believe that we need to upgrade instructions when running Portainer outside of Docker. You'll need to use the --template-file flag and give it the path to the templates.json file that should be available in the extracted archive.. You're welcome, I'll keep this issue open to track the documentation update.. Updated via https://github.com/portainer/portainer-docs/commit/86bfabd91b178d1bcaae37c297c26d40689aad98. Related to #2182 . Update on this topic.\nWe need to give the ability to an administrator user to execute a job on a specific endpoint (underlying host).\nTo do so, we can rely on the execution of privileged containers on the target endpoint.\nThe entrypoint for this feature should be located in the host details view (related to #2240).\nSpecs\nUI/UX\nHost view update\nA new \"Jobs\" panel will be added in the Host view.\nThis component will provide:\n\nDatatable displaying a list of containers with the following columns: Id, Status and Created at\nNo actions in the datatable\nList all containers with the label io.portainer.job.endpoint set.\nOn click on the container ID, redirect to the container logs view for the associated container\n\nA new \"Execute job\" button will be added next to the \"Browse\" button (depends on https://github.com/portainer/portainer/issues/2182) that will redirect to the job creation view.\nJob creation view\nThis view will contain a form allowing a user to create a job.\nThis form should be similar to the stack creation form, providing a way for a user to either create a script via a web editor or by uploading a file.\n\nForm fields: Image name, file (upload), script (web editor)\nImage name should be a simple text input for now (default value ubuntu:latest).\nAn information panel should be displayed on top of this view with the following content: \"This job will run inside a privileged container on the host. You can access the host filesystem under the /host folder.\"\nExecute button action, redirects to the host view on success\n\nBackend\nA potential implementation can leverage the docker library in the backend to create a privileged container following this workflow:\n\nCreate a container with the appropriate configuration (image, privileged, system bind mounts, host bind mount...)\nCopy the script/file into the container\nStart the container\n\nA POC for this implementation is available inside the poc-command-container branch: https://github.com/portainer/portainer/commit/8e4391d2c7f2af0ab8823d65f825d7f21ddeb494. We need to figure out a way to purge the executed/completed jobs.\nThoughts @chiptus @xAt0mZ ?. @kendrickm \n\nWill the end result be that the user can select a host to run this on? If the endpoint is a load balancer to several hosts(ELB pointed to docker swarm managers for example) this could cause unexpected results.\n\nYes, this will be available from the Host or Node view inside Portainer. I believe that the ELB setup could cause issues inside Portainer already (like displaying different host information in the host view for each refresh).\n\nthink having a one-time docker container run on a specific host is a viable use-case, but I think there should also be the ability to run ad-hoc scripts on the host itself. There might be OS level things that aren't available in a container you could want to run.\n\nDo you have any example in mind that would not be supported by a privileged container? I've been able to trigger an upgrade of the host Docker daemon version via a privileged container for example.. Closed via #2374 . Update on this topic.\nWe need to give the ability to an administrator user to schedule the execution of a job (depends on #2181) on one or multiple endpoints.\nSpecs\nUI/UX\nSidebar\nA new entry in the sidebar must be created: \"Job scheduler\". This entry will redirect to the schedule list view.\nSchedule list\nA new schedule list view will be introduced.\nThis view will provide:\n\nList all the schedules across all the endpoints inside a datatable\nAvailable columns in this datatable: Name, schedule and creation date\nEach entry in the datatable should be selectable and should allow the use of the \"Delete\" action\nA \"Add schedule\" button redirecting to the schedule creation view\nOn click on a schedule name, it will redirect to the schedule details view\n\nSchedule creation\nThis view will contain a form allowing a user to create a schedule.\n\nForm fields: Name, file (upload), script (web editor), endpoints (multi select), schedule\nSimilar to the job creation view (https://github.com/portainer/portainer/issues/2181), provide a way to specify a script via the web editor or via file upload\nAbility to select one or multiple endpoints via a multi select component\n**  When selecting a classic Swarm endpoint (no agent setup), the following warning message should be displayed close to the multi select component: You have selected a Swarm manager as a target. This job will only be executed on this node, NOT on all the nodes inside the cluster. \nA simple text input for the schedule (cron expression)\nA schedule action button, redirects to the schedule list view on success\n\nSchedule details view\nThis view will give some details about an existing schedule.\n\nAvailable information: name, target endpoints and schedule (cron expression)\nThis view will give an administrator user the ability to update any of these fields\nAlso gives the ability to delete the schedule\n\nBackend\nIntroduction of a new Schedule entity with the following fields:\n\nName string\nEndpoints []EndpointId\nSchedule string\nScriptPath string\n\nNew API handlers to manage schedules:\n\n/schedules (GET)\n/schedules (POST): should support two different payloads (JSON for script content / form-data for file upload)\n/schedules/:id (GET)\n/schedules/:id (PUT)\n/schedules/:id (DELETE)\n\nLeads for a potential implementation:\n\nIt can re-use the existing cron library to manage scheduling / job executions. When a job is trigger, endpoints that are considered as Down should be ignored for now.\nScripts can be stored on disk in /data/schedules/:scheduleId\nWhen targeting a Swarm + agent environment, all node names in the cluster can be retrieved to execute the job on each node in the cluster\nEach container created as a part of a schedule should have the io.portainer.schedule.ID label set to scheduleID.. @xAt0mZ all Docker setups (standalone, standalone+agent, Swarm, Swarm+Agent).\n\nPlease refer to these specs only: https://github.com/portainer/portainer/issues/2183#issuecomment-428429267\n. Hi @Cerebus \nAfter looking at the available static binaries, there is still no pre-compiled binaries for i386: https://download.docker.com/linux/static/stable/\nAFAIK, we cannot build a i386 image of the Portainer app atm. Closing for now, might come back onto this if we get rid of the Docker binary at some point.. Ok, still we cannot really integrate this with our build system. And I'd rather use official Docker binaries.. @technodrome simply because some of the dependencies that Portainer relies on are not available on i386.. Hi @MyTheValentinus \nDo you mean attaching a container to multiple Docker networks? If so, yes it's possible. You need to create a container and attach it to the network of your choice first. Then, you'll be able to attach it to other networks by inspecting the container and choosing the network of your choice and click on join.\nClosing, feel free to comment if you're missing something.. Duplicate of #1802 . Thanks !\nSure, we'll update the roadmap soon. Stay tuned ;-). Hi @tboloo \nWhat version of Windows are you using? Also, how did you create the endpoint in Portainer? Did you use the local option during the initialization?\nYou'll not be able to use localhost when creating a new endpoint as it will resolve to the local IP of the container, instead you'll want to use the public IP address of your Windows host.\n. @tboloo Closing as it seems that your problem is solved. Feel free to comment/re-open if you're missing something.. @lucamaro awesome, thanks ! I'll review this soon.. Thanks @lucamaro :+1: . Sounds like what UCP is doing with collections, thoughts @ncresswell ? We might go further than simply managing UAC with projects, we could also give the ability to remove all the resources associated to a project via the UI, for example.. Link to the resource pool issue: https://github.com/portainer/portainer/issues/1664. We already had this discussion in https://github.com/portainer/portainer/issues/399\nYou can already set the administrator password via the --admin-password && --admin-password-file, which are compliant with CLI/Compose deployments.\n\nsomeone else could login to your portainer container and set the password before you do\n\nGiving the possibility to define the username/password via environment variables do not enforce the creation of the creation of the initial administrator as a user could simply not specify the vars (same for the CLI flags).\nIf this is the problem that we're trying to solve, we'd need to make these variables mandatory.\nWe could also generate a random password at startup and display it in the logs.\nBoth of these methods will add complexity (albeit not that much) to the deployment of the software.. > If there isn't a username set anywhere, then the default behavior occurs where you set the username and password yourself. If its started with both username and password flags, then those are what it sets.\nThis is pretty much the actual behavior. Except that you can only set the administrator password and not the username.. You need to use the --no-auth flag when deploying Portainer, have a look at https://portainer.readthedocs.io/en/stable/configuration.html#disable-authentication. This is due to the fact that we sanitize the username and password when creating a user and when authenticating. I believe that we should remove the sanitization process.. > Incidentally, I wonder if there needs to be a notice that goes out with this release, to help manage unexpected issues. For affected users, any usernames/passwords saved in browsers or password keepers will no longer work.\nDo you mean that if we fix this the actual password will no longer work? We're aware of this and working on it in #2202.\nOur idea is to authenticate without the sanitization call first, if it fails then authenticate with the sanitization call. If the second authentication succeed, the user will be asked to update his password (with an information message).. > That would certainly be convenient, but it would continue to expose a small number of users to weaker passwords than they intended. I'd not be opposed to this, as long as that code was removed in a few months, otherwise it would prolong the problem indefinitely.\nNew users would not be affected by this issue anymore. I believe that will be able to remove that legacy support in a few months, yes.. Thanks @lucamaro :+1: . Here is a problem that we'll have if we merge this solution:\nIf a user was previously created with a password containing some chars that were escaped during the sanitization process, they will not be able to log-in anymore as the password is now not sanitize.\nE.g, if a user with the following password was created previously: test&test, this implementation will prevent him from logging-in.. I think that we should update this to the following flow:\nduring authentication, we should first authenticate without the $sanitize call, if it fails then we authenticate with the $sanitize call. If the second authentication succeed, then the user is redirected to a view that will force them to update their password.. Ok, so we need to go further on this:\n\nAfter any successfull authentication without sanitization, go to the home view.\nIf authentication without sanitization is failing AND the instance is using internal authentication, then try to authenticate with the sanitization. If that auth is successfull, then redirects to an update password panel where there should be only two inputs: new password and confirm password (no need to re-renter actual password as the user just authed successfully). Also, this should be done for internal authentication only, as LDAP auth is always using unsanitized credentials.\nIf second auth is failing, display invalid creds\n\nBut I think that we should keep a different component for the user account view allowing the user to change their password and that post auth component.. Closed in favor of #2222 . Hi @WnP \nWe recently merged a change regarding the default access level for all the resources, switching from public to administrators via https://github.com/portainer/portainer/issues/960\nI believe that this should solve your requirement of not having this stack available for all users.\nI'll keep this feature request open and rename it.. Hi @Seraksab \nLimited stacks were introduced to avoid UAC conflicts based on stack names amongst other things: https://github.com/portainer/portainer/issues/1347\nIf we can solve #1347 we would then be able to apply specific ownership policies to any stacks (limited o not).\nWhen using an external CI system, you could then be able to leverage https://github.com/portainer/portainer/issues/1257\n. Hi @d-led \nThanks for the detailed report.\nAnything in the Portainer container logs to share with us? Could you try to reproduce by starting Portainer with the --no-snapshot flag and check the memory usage?\nE.g:\ndocker run --restart=always -d --name portainer -p 9000:9000 \\\n                  -v /portainer/data:/data \\\n                  -v /var/run/docker.sock:/var/run/docker.sock \\\n                  portainer/portainer --no-snapshot\nCould be related to #1991 . Hi @d-led \nThanks for the detailed report.\nAnything in the Portainer container logs to share with us? Could you try to reproduce by starting Portainer with the --no-snapshot flag and check the memory usage?\nE.g:\ndocker run --restart=always -d --name portainer -p 9000:9000 \\\n                  -v /portainer/data:/data \\\n                  -v /var/run/docker.sock:/var/run/docker.sock \\\n                  portainer/portainer --no-snapshot\nCould be related to #1991 . @d-led a message should be displayed in the home view telling you that the snapshot are disabled.\n\n. @d-led a message should be displayed in the home view telling you that the snapshot are disabled.\n\n. @neothematrix thanks for the report, the related issue to this problem is #1991 \nAlthough I believe that these issues are related, we're investigating.. @neothematrix thanks for the report, the related issue to this problem is #1991 \nAlthough I believe that these issues are related, we're investigating.. @neothematrix no sorry it's only available via a CLI flag.\nThanks to your report both of you, we're checking what might be causing these issues.. @neothematrix no sorry it's only available via a CLI flag.\nThanks to your report both of you, we're checking what might be causing these issues.. @d-led does changing the snapshot interval stop the memory/file leaks?. @d-led does changing the snapshot interval stop the memory/file leaks?. Anybody keen to try the portainer/portainer:fix1991-open-files image (linux amd64 build) and report if the problem is solved?\nping @zhaoyao91 @d-led @neothematrix . Anybody keen to try the portainer/portainer:fix1991-open-files image (linux amd64 build) and report if the problem is solved?\nping @zhaoyao91 @d-led @neothematrix . Thanks for the report @neothematrix, I'm going to wait for an update of the other contributors if possible before we decide to merge this fix.. Thanks for the report @neothematrix, I'm going to wait for an update of the other contributors if possible before we decide to merge this fix.. @d-led is this using the portainer/portainer:fix1991-open-files image?. @d-led is this using the portainer/portainer:fix1991-open-files image?. Awesome @d-led, I'll merge the fix.\nThanks a lot for the feedback !. Awesome @d-led, I'll merge the fix.\nThanks a lot for the feedback !. Thanks again for the feedback everyone.. Thanks again for the feedback everyone.. @Haxy89 you can query the /api/endpoints to retrieve the list of endpoints, each endpoint has a Snasphot field where you can retrieve this information.\nOtherwise, you can also query the Docker API directly to retrieve each information separately, see: https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8#execute-docker-queries-against-a-specific-endpoint. @Haxy89 you can query the /api/endpoints to retrieve the list of endpoints, each endpoint has a Snasphot field where you can retrieve this information.\nOtherwise, you can also query the Docker API directly to retrieve each information separately, see: https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8#execute-docker-queries-against-a-specific-endpoint. Thanks @lukaspj, you can simply create a new commit instead of replacing the old one. We squash the commits during the merge of the PR.\nCode looks OK, have you been able to test it?. Thanks @lukaspj, you can simply create a new commit instead of replacing the old one. We squash the commits during the merge of the PR.\nCode looks OK, have you been able to test it?. @ncresswell can you give a try to portainer/portainer:pr2209 and tell us if LDAP/AD authentication is still working with your setup?. @ncresswell can you give a try to portainer/portainer:pr2209 and tell us if LDAP/AD authentication is still working with your setup?. Has been validated by one of our users on Slack:\n\nRyan J\ngot it - yes, lukaspj-fix2177-escape-ldap-filters resolves our issue. Has been validated by one of our users on Slack:\nRyan J\ngot it - yes, lukaspj-fix2177-escape-ldap-filters resolves our issue. Sorry for the time we took to merge this one ! Thanks a lot @lukaspj :+1: . Sorry for the time we took to merge this one ! Thanks a lot @lukaspj :+1: . Related to #2088 . Related to #2088 . Thanks @strawgate :+1: . Thanks @strawgate :+1: . @briankabiro yeah, go for it :+1: . @briankabiro yeah, go for it :+1: . Hi @jstewart612 \n\nThanks for opening this report. Can you have a look at the Portainer container after sending this API request? There should be more information available in there.. Hi @jstewart612 \nThanks for opening this report. Can you have a look at the Portainer container after sending this API request? There should be more information available in there.. Ah, interesting, this is something that we need to change to Invalid endpoint name.\nAlso, this endpoint is actually expecting form data, not JSON.\nI'll keep this issue open to fix the invalid error message.. Ah, interesting, this is something that we need to change to Invalid endpoint name.\nAlso, this endpoint is actually expecting form data, not JSON.\nI'll keep this issue open to fix the invalid error message.. Pretty sure it's not, as it's working when the Portainer UI queries the API. It's probably related to your script,  ensure that you are actually sending form data (and this should not be JSON / nor JSON formatted).. Pretty sure it's not, as it's working when the Portainer UI queries the API. It's probably related to your script,  ensure that you are actually sending form data (and this should not be JSON / nor JSON formatted).. > it'is public network ip, The listening port is IPv6 and cannot be accessed externally, so it could change to ipv4 ? i don't know\nWhat do you mean by it could change to ipv4?  How did you start Portainer?. > it'is public network ip, The listening port is IPv6 and cannot be accessed externally, so it could change to ipv4 ? i don't know\nWhat do you mean by it could change to ipv4?  How did you start Portainer?. Closing as it's probably related to your system/setup. Feel free to comment/re-open if needed.. Closing as it's probably related to your system/setup. Feel free to comment/re-open if needed.. Thanks @aksappy :+1: . Thanks @aksappy :+1: . Hi @sameep22 \nIs your Portainer instance located behind a reverse proxy?. Hi @sameep22 \nIs your Portainer instance located behind a reverse proxy?. ~Sounds like a network issue on your side as we do not issue this error message via Portainer. Have you tried to bind mount it to another port then? You could try 9003~\nEDIT: simply remove the command field from your Compose definition:\nyml\n  portainer:\n    image: portainer/portainer\n    container_name: portainer\n    restart: always\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /home/sameep/docker/portainer/data:/data\n      - /home/sameep/docker/shared:/shared\n    environment:\n      - Europe/Paris=${TZ}. ~Sounds like a network issue on your side as we do not issue this error message via Portainer. Have you tried to bind mount it to another port then? You could try 9003~\nEDIT: simply remove the command field from your Compose definition:\nyml\n  portainer:\n    image: portainer/portainer\n    container_name: portainer\n    restart: always\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /home/sameep/docker/portainer/data:/data\n      - /home/sameep/docker/shared:/shared\n    environment:\n      - Europe/Paris=${TZ}. Sure, this issue was caused by the following line:\nyml\n    command: --templates http://templates/templates.json\nThis will fetch the Portainer App templates from this specific URL, which is not available and Portainer is simply not starting.\nWe recommend to have a look at our official documentation instead of online article for anything related to Portainer (deployment, configuration...): https://portainer.readthedocs.io/en/stable/. Sure, this issue was caused by the following line:\nyml\n    command: --templates http://templates/templates.json\nThis will fetch the Portainer App templates from this specific URL, which is not available and Portainer is simply not starting.\nWe recommend to have a look at our official documentation instead of online article for anything related to Portainer (deployment, configuration...): https://portainer.readthedocs.io/en/stable/. Hi @vabatta \nThis is not possible yet, you'll want to follow this issue: https://github.com/portainer/portainer/issues/698. Hi @vabatta \nThis is not possible yet, you'll want to follow this issue: https://github.com/portainer/portainer/issues/698. Actually, you should be redirected on the tasks panel because the search input of the task table is automatically taking the focus.\nDuplicate of #2179 \nNote that this was fixed via #2214 and will be part of the next release. Actually, you should be redirected on the tasks panel because the search input of the task table is automatically taking the focus.\nDuplicate of #2179 \nNote that this was fixed via #2214 and will be part of the next release. Hi @myuseringithub \nUnfortunately I do not have any idea about what might be causing this issue. We'd need an environment with LCOW available to try to reproduce and investigate the problem.\nOut of curiosity, how did you deploy Portainer?. Hi @myuseringithub \nUnfortunately I do not have any idea about what might be causing this issue. We'd need an environment with LCOW available to try to reproduce and investigate the problem.\nOut of curiosity, how did you deploy Portainer?. Hi @yati1998 \nSure, feel free to submit a PR for this. If you have any questions, just ask.\nOur contributions guidelines are available here: https://portainer.readthedocs.io/en/stable/contribute.html\n. Thanks @classmember :+1: . Hi @giminni \nWe re-introduced this feature via https://github.com/portainer/portainer/issues/2088\nWill be part of the next release.. This implementation is available for testing via portainer/portainer:fix1991-open-files (Linux AMD64 build).. Hi @l-t-k \nWhat is happening? Are you able to access the Portainer UI? Can you manage your Swarm cluster?. Ok I believe that it could be related to the fact that the agent was not up in the time Portainer was started. Thus, it tried to connect to the agent and failed.\nI'm going to keep this issue open to avoid exiting on error when trying to reach an endpoint that is declared via the -H flag.\n. Hi @Ubusubus \nCan you show us an example of an endpoint that is defined in the external endpoint file?. No there is probably no bug in the file, it's just for us to be able to reproduce.\nNote that the --external-endpoints feature could be buggy as it was not updated since long. I would recommend the usage of the HTTP API to automate endpoint provisioning in the meantime.. Note about the agent only information, it will be available after https://github.com/portainer/agent/issues/6 has been implemented. We can enhance the PR later on when it's available.. @wiryonolau \nNo, it's just about giving the ability to update an endpoint from the home view (administrators only).. @chiptus \nOur last update on this:\n\n\nEnhance the search bar to introduce filters such as group:'group to search for', tag: 'tag to search for' (we only need the tag and group filters)\n\n\nKeep the current behavior when no filters are specified. Hi @jancelin \n\n\nWhat version of Portainer are you using? You can find it in the Portainer container logs.. Can you share the logs of the Portainer container? What's happening, you get some invalid credentials when trying to login? Could you explain the error in details?. @jancelin what happens when you enter credentials and click on Login? Are you using any reverse proxy in front of Portainer?. That would be the cause of the session expiration issues. Could it be that when connected to internet your Pi will sync the date?\nClosing as I do not think this is related to Portainer. Feel free to comment/re-open if needed.. @rushirajsilvertouch \nSomething is wrong with your pull request, there should not be +65000 lines added.\nPlease fix & rebase your PR on the latest version of develop. Closed in favor of https://github.com/portainer/portainer/pull/2248. @rushirajsilvertouch could you rebase the PR on the latest develop branch please? I'm having troubles building this locally for testing.. Closed in favor of #2294 . Hi @wangkai1994 \nIt was added as a sane default. I could update it to another value, although I'm not sure what would help in your particular case?\nWhat kind of error do you have when using this command in a container console?. Ok, let me push an image with an upgraded limit for you to test.. @wangkai1994 \nCan you give a try to the following image: feat2249-websocket-tcp-read-limit ? I've increased the reader size from 1024 to 2048.. I don't know but I can assure you that it was updated.\n\nAre you using any reverse proxy in front of Portainer?. @Haxy89 no, you cannot use multiple -H flag on the command line. Follow the following issue for the ability to add socket endpoints at runtime: https://github.com/portainer/portainer/issues/1726. We recently added this feature (see https://github.com/portainer/portainer/issues/2082).\nThis will be part of the next release (available soon, we're currently testing it).. Snapshots are not enabled for Azure environments, this feature should only be related to Docker environments.. Ok, looks good to me.\nA few things I'd like to see:\n\n\nHide the item selection checkboxes in the datatables when browsing the list views in offline mode\n\n\nHave you thought about sending an update request when detecting than an endpoint is down? So that when you click an endpoint that is considered up but that is actually down, it can update the database. Same if the endpoint is actually stated as down but actually up.. @xAt0mZ I'd really like the status update upon accessing the dashboard of any endpoint.\n\n\nAlso, could you rebased the PR now?. @xAt0mZ still need a rebase (merge develop, fix conflicts and push).. > I guess that we should update the snapshot when creating new resources\nRegarding @chiptus remark, no, for now we'll only rely on the background snapshot feature to refresh the snapshot data. Could be an enhancement later tho.. Hi @jgallen23 \nThanks for the report, we'll investigate.. @mmhh1910 definitely looks like a memory leak. We'll investigate.. @timog these stats are related to a Portainer agent container right?. @harrygulliford can you tell us how did you deploy Portainer and the agent?. @x3r10n should be fine in a Swarm cluster as the container should be killed and re-scheduled.. We're still investigating the cause of the problem.. Looks better, one thing I just noticed is when you click on the refresh icon in the header while being on a Swarm node details you're then redirected to the original host view. Can you fix this?. Ok looks good to me, we need to implment https://github.com/portainer/agent/issues/6 before we can go further. All right, now that the Agent API has been updated, let's continue the work on this. I'll do a new functional review.. Functionally OK.. This was added in the implementation of https://github.com/portainer/portainer/issues/2082. Duplicate of #2427 . Yup, this was fixed via https://github.com/portainer/portainer-docs/commit/87924e052619aace5bd5607c941b46ecdc0e43db\nWill be updated after next release.. Could it be related to https://github.com/portainer/portainer/issues/1900#issuecomment-421908480 ?. I believe that you need Docker 1709 at least to be able to bind mount named pipes on Windows.\nAm I right @olljanat ?\n . Ah, so you actually need Docker version 18.03 ! Thanks for the udpate @olljanat.\nClosing this issue, feel free to comment if you miss anything.. Sorry for the late update on this issue.\nThe root cause of this issue (and #2301) is that the Portainer agent will not accept another Portainer instance to connect to it once it has started to work with a particular instance: https://github.com/portainer/portainer/issues/2133#issuecomment-411309928\nAnd this is indeed causing this HA issue: https://github.com/portainer/portainer/issues/2133#issuecomment-413069619\nI'm going to close this issue as this will be tackled and discussed via #2133. Feel free to comment there.. Not yet, we will track this evolution.. Have a look at https://github.com/portainer/portainer/issues/597 for more information on why what you're suggesting is tricky to implement.. @si458 @altmas5 what you're asking for is a bit different than the request of this issue. This issue aims to add dns server support in templates, you might want to open a new feature request for dns servers support in container creation.. LinuxServer.io templates have been removed since version 1.19.0.\nIf you want to keep using them, please revert to Portainer <= 1.18.1.\nAlso, next time please fill the issue description correctly, even a 'Hi' would work better than this ;-). @ncresswell Thoughts about the UX/UI ?\nIMO adding this stack duplication section clutters the view.\n\nWhat about adding a new \"Advanced controls\" tab and relocate the stack migration and duplication feature in there?\n\nCan be tested via portainer/portainer:feat2234-duplicate-stack.. @ncresswell \nThe duplicate feature requires you to input a new name for the duplicated stack, hence why we introduced it in an extra form.\n. Another solution:\nWe could propose to rename the stack as a part of the migration process, leaving the name field empty would keep the actual name of the stack but would be required for a stack duplication. This way we only display one form (endpoint selector, stack name) and two buttons: Migrate/duplicate.\nThoughts?. The name field that is introduced in the stackMigratePayload struct should be documented in the swagger.yml.. As this seems to cause a lot of issues, we're simply going to remove this header for now. We'll keep this issue open to have an option to enable/disable it.. @turbo what version of Portainer were you using previously? Templates format has been updated since 1.19.0, you probably need to update it.\nSee the templates section in the breaking changes here: https://github.com/portainer/portainer/releases/tag/1.19.0. > Go to settings, and disable \u201cuse external templates\"\nTagging as a work-around for now as people that were using versions < 1.19.0 might encounter this issue after an upgrade to >= 1.19.0.\nWill see if we can fix this somehow in the next release. At least, prevent this issue.. @chiptus \nRelocating Neil's comment: \n\nthe search is currently case sensitive (Unassigned works, but unassigned does not). Please remove case sensitivity.\n\nCan we remove case sensitivity in search?. Ok design/functionality LGTM.. @chiptus as mentioned via https://github.com/portainer/portainer/issues/2242#issuecomment-425427468 it would be nice to be able to search by status as well (e.g. 'down' or 'up'). Can you add this?. Could be related to https://github.com/portainer/portainer/issues/2020. Looks like a duplicate of #2020 \nClosing this one and adding a reference in #2020 \nThanks for the detailed report !. Hi @WTFKr0 \nThis is probably due to the fact that the agent expect HTTPS requests on port 9001. No real way to disable this at the moment.\nWe could introduce a health check endpoint, I'll tag it as an enhancement.. I think this is a duplicate of #2020 \nProbably related to the fact that you have . characters in your stack name. Is there another stack created inside Portainer?. yes, but as reported in #2020 it should create two stack (one empty and one containing your containers). If you cannot reproduce this 2 stacks problem, I'll keep this issue open as another problem.. Hi @benyanke \nWhat about using multiple user search configurations?\n@ncresswell thoughts?. @rushirajsilvertouch Could you only include the commits related to this PR? Otherwise it will be quite impossible for us to review.. Hi @Hugo1380\nHow did you deploy Portainer and the agent?. Following https://portainer.readthedocs.io/en/stable/deployment.html? . Did you do anything after deployment? Did you update the endpoint? . How did you do so? You can ping me on Slack at https://portainer.io/slack for a more reactive support. . @rushirajsilvertouch Have you tried to compile the code? Fails with the following error:\n```\npackage github.com/portainer/portainer/http/request: cannot find package \"github.com/portainer/portainer/http/request\" in any of:\n/usr/local/go/src/github.com/portainer/portainer/http/request (from $GOROOT)\n\n/go/src/github.com/portainer/portainer/http/request (from $GOPATH)\n\npackage github.com/portainer/portainer/http/response: cannot find package \"github.com/portainer/portainer/http/response\" in any of:\n/usr/local/go/src/github.com/portainer/portainer/http/response (from $GOROOT)\n\n/go/src/github.com/portainer/portainer/http/response (from $GOPATH)\n\n```\nYou need to use github.com/portainer/libhttp/error and github.com/portainer/libhttp/response here.. @olljanat work on this one by @rushirajsilvertouch has been dropped. Any contribution to finish this work accepted, can be rebased of https://github.com/portainer/portainer/tree/feat1752-stack-deploy-keys. > Ideally, Portainer would be able to commit to git and after I make changes in the web-editor it would prompt me to commit the changes. Secondarily, if it just alerted me that what I had in the web editor did not match what was in git that would be a really big step up (I can manually copy/paste what is in the web editor over into GitHub editor).\nI don't think that we want to give the ability to commit changes to a git repository via Portainer, there are a lot of editor/git solutions out there that will probably do the job a lot better than Portainer.\nAlthough, giving the ability to update a stack based on a git repository (basically a git pull) would be possible, but we're waiting on #1752 to enable the ability to use deploy keys with git repositories (I'd rather not store git credentials as well).\n\nAt the least, it would be nice if when I pulled in a repository from git it at least remembered the connection. It appears at the moment it is a one-time fetch that is then forgotten.\n\nYes, this will be possible once #1752 is implemented, see my comment above.\nWe'll then give the ability to update a stack by doing a pull of the git repository first, see #1753.\nWIth the recent introduction of webhooks, we might go a step further and provide a webhook to automatically redeploy a stack with git pull + re-deploy as well.. Thanks for the update @xAt0mZ \nPing @mattrice . After the recent update of @aleex1848, we'll try to reproduce again.. Hi @mvajid \nIf you want to be able to bind mount the Docker named pipe into the Portainer container to use the local endpoint option, you'll need to upgrade your Docker version to 18.03.1-ee-1, see https://github.com/portainer/portainer/issues/2270#issuecomment-421532719\nOtherwise, you can probably follow these instructions: http://blog.airdesk.com/2017/10/windows-containers-portainer-gui.html\nClosing as it should solve your problem but feel free to re-open/comment if you cannot deploy Portainer.. Duplicate of https://github.com/portainer/portainer/issues/1379\nRegarding your problem, you could use Portainer API to automate the access control policy creations. For example, you could do something similar to this:\n\nSend a GET request on api/endpoints/<endpointId>/docker/containers/json to retrieve the list of all the containers in your endpoint\nFor each container, send a POST request to api/resource_controls to create a public access control policy\n\nMore information about the usage of the Portainer API here: https://portainer.readthedocs.io/en/stable/agent.html . > Is it possible to downgrade to older portainer Versions?\nYes, by reverting to Portainer < 1.19.2, all your resources should go back to public again.\n\nAlternativly: Ist ist Possible to Change the DEFAULT owernship of containers created outsite of portainer?\n\nThis is not possible yet.\nIf you're creating Docker resources outside of Portainer and wants to be able to set an access control policy (such as public) at creation time, you might be interested by https://github.com/portainer/portainer/issues/1257 \n. Duplicate of #2271 . @Kantankerus a link could be useful, feel free to provide a PR for this at https://github.com/portainer/portainer-docs. HI @HenriWahl \nThe only way to configure LDAP outside of the UI is via the Portainer HTTP API, more information on how to use it here: https://portainer.readthedocs.io/en/stable/API.html. Design looks good to me.. @chiptus Edition should only be available for administrator users.. @Hydragyrum this issue is closed, please open a new one with a detailed description on how to reproduce the problem.. Hi @mynameissunny \nThanks for the kind words.\nRegarding your problem. the latest version of Portainer introduced some changes related to the default access policy for Docker resources: it now defaults to administrators only.\nYou'd need to change the access policy on each resource that you want your user to access via the UI or API.\nNote that we're planning to introduce the ability to apply an access policy via labels, might be of some interest to you: https://github.com/portainer/portainer/issues/1257. @chiptus I'm not able to reproduce this in develop, can you?. @chiptus Need detailed instructions on how to reproduce this. What access policy is set for the user? On the endpoint? On the group? . Ok I was able to reproduce it using the following steps:\n\nCreate a non admin user called user01\nCreate a new group called group01\nCreate a new endpoint called endpoint01 and assign it to group group01\nUpdate endpoint access policy and allow access for user user01\nLogin as user01. A user can have access to some endpoints inside an endpoint group but not to the endpoint group.\n\nI don't think that we should give the ability to any user to list all the available groups inside a Portainer instance as it  could be considered sensitive data.\nIn order to avoid this, when the user don't have explicit access to the endpoint group it should instead hide the Group: <name> section in the UI.\n. Looking OK to me, did a bit of testing and should solve the original issue.\nI've asked one of our users to test it and give us some feedback, waiting for it.. Did more testing on this, solves the issue. I'll merge it.. Thanks for the feedback @rishipuri \nClosing this issue then as we do not plan to support old browser versions (we do not have a list of supported browsers yet).. Thanks @kyalha :+1: . Hi @GoncaloBorges @jolleybin \nI think that this could be related to https://github.com/portainer/portainer/issues/2162 which was introduced in 1.19.2.\nThe implementation force the default value to runc whereas it was not set before (daemon was probably setting the correct value).\nI think that we might need to update this to enter a new \"Default\" value for runtimes (with an empty value) and default to this in the UI. I can probably come up with something later on today and upload an image for you to test.. @xAt0mZ \nWe'll want to introduce a new \"Default\" value in the runtime dropdown, it should be the default value and have an empty value ''. The daemon should assume the correct value for this.\n. Hey @GoncaloBorges @jolleybin \nAny of you could give a try to portainer/portainer:fix2314-docker-runc (linux amd64 only) and tell us if that solves your issue? . @jolleybin thanks for the feedback. Duplicate of #2133 \nHave a look at the comment in there to have an explanation about this constraint: https://github.com/portainer/portainer/issues/2133#issuecomment-411309928\nWe'll work on a fix for this.. @WTFKr0 A memory leak related to snapshots was fixed in 1.19.2.\nSee: https://github.com/portainer/portainer/issues/2206\nI'd recommend to upgrade to the latest version of Portainer and tell us if it solves your issue. Feel free to re-open if you still have the issue after upgrading.. @yassirh right now, due to a technical limitation, stack name must be unique across all endpoints.\nRelated to https://github.com/portainer/portainer/issues/1347. @yassirh yes, calling StackService.stacks(true, true, 0) will return all stacks.. Thanks @tlitovsk :+1: . Just tested this, found an issue, here is how to reproduce:\n\nEdit the default Wordpress template\nChange the MYSQL_DATABASE_PASSWORD env var type to Select\nClick on the add allowed value button\n\nThe following error is then raised in the console:\nTypeError: Cannot read property 'push' of undefined\n. Looks ok to me, functionally/technically. Will ask for feedback in the related issue as I do not have access to the environment used to reproduce the bug.. Thanks @ricardona :+1: . Thanks @briankabiro :+1: . Thanks @briankabiro :+1: . Hey @briankabiro \nI don't think this implementation is working, see my screenshots below.\nI want to inspect the container new_web_1 which is part of the new stack:\n\nNothing shows in the container-details:\n\nNote that this is the same for the host info. FYI, the node name is only available when running Portainer with the agent setup inside a Swarm cluster.. @zablah \nThis is an expected error: http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\nIt means that no administrator has been defined yet for this Portainer instance. Can you try to access the admin init view at your-ip:9000/#/init/admin and try to set it ?. Anything in the container logs after you try to login?\nHave you deployed Portainer on a standalone host or inside a Swarm cluster? How did you deploy Portainer?. @antonio-petricca is it perfectly normal to see this error in Portainer logs upon first startup. Have you been able to set the administrator user via the UI?. @antonio-petricca anything in the container logs after this failure?. Hm, interesting. Nothing in the logs.\n@antonio-petricca Can you inspect the failing request in your browser's developer tools? Are you using any reverse proxy in front of Portainer?. @antonio-petricca cannot read the response content from this dump? Any chance to get a screenshot? . @antonio-petricca Thanks for the screenshot. Nothing in the Portainer codebase would return a 403 for the /api/admin/init endpoint... Are you using a reverse proxy in front of Portainer? . @antonio-petricca that is pretty weird, can you give us information about the underlying OS and Docker version ?. @antonio-petricca nope, no way to augment log verbosity.\nThis is a pretty strange issue and it's not really the same error as the one reported by the OP. Long shot here, could you try to remove the portainer image and to re-deploy it?. @antonio-petricca tried with another browser?. Ah that's a pretty strange issue indeed !! Glad we solved it, but I wonder what could be the problem with Opera.\nClosing this issue. Thanks for spending some time helping us diagnose this !. @gitzhou I'd recommend trying with develop instead, fix2443-offline-browsing-perfomances has not been merged nor tested yet.\nAre you using Opera as well?. I'll consider this as a duplicate of #1461 \nPotential solution proposed via https://github.com/portainer/portainer/issues/2157#issuecomment-412645561 but we did not investigate this yet.. Pending an update on a discussion about UX/UI for registry.. @yassirh yes, in the templates view you can also create a stack. Did you add some validation for this? From what I saw in my tests, it seems not.. ping @yassirh \nWhat's the status on this one?. > I might have missed one of your comments regarding the fact that we cannot list stacks under a standalone endpoint anymore. We'll indeed need to use the endpoint provider to check if we need to retrieve Swarm stacks (via services).\nWould that be of any help? :-). Now that #2338 and #2255 are merged, can you rebase?. Correctly fix an issue with volume browsing after the introduction of https://github.com/portainer/agent/pull/11. Confirmed, probably related to libcompose.. Hi @leMaik \nAre you able to achieve a service update with a private registry on the Docker CLI? If yes, which flags are you using?. Going to keep this open as I'd like to find a proper solution for this one.\nWe'll try to tackle this one and  #2283 . @SoXX-TheFennec you cannot use localhost as it will be resolved as localhost inside the container. You'll want to use a public IP that can be reached via the container.. @SoXX-TheFennec probably related to your network settings can't really help here.. @si458 use https://raw.githubusercontent.com/portainer/templates/master/templates-1.20.0.json instead.. Hi @michaellee8 \nThanks for opening this feature request and for considering to contribute.\nWe're currently using xterm.js (https://github.com/xtermjs/xterm.js/) as our \"terminal\" library.. @chiptus I think that the schedule service should be located in the cron package instead and leverage the JobService introduced via https://github.com/portainer/portainer/pull/2361. @chiptus I think that the schedule service should be located in the cron package instead and leverage the JobService introduced via https://github.com/portainer/portainer/pull/2361. @chiptus I think that the schedule service should be located in the cron package instead and leverage the JobService introduced via https://github.com/portainer/portainer/pull/2361. This was fixed in 1.19.2 via https://github.com/portainer/portainer/issues/2179. It's actually part of the StackUpdate operation and not StackCreate: https://app.swaggerhub.com/apis/deviantony/Portainer/1.19.2/#/stacks/StackUpdate\nBut I agree that we need to update the description to specify that this parameter is only for Swarm stacks.. Duplicate of #1989 . Hi @aiminickwong \nCan you show me how you deployed the agent? Be aware that for this feature to work, you need to bind mount /var/lib/docker/volumes in the agent container.\nyml\n  agent:\n    image: portainer/agent\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.agent\n      # AGENT_PORT: 9001\n      # LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - agent_network\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]. @aiminickwong there is a known issue in the develop branch, we're currently fixing it.. @bigmacd can you open a PR for this?. @chiptus any chance to have a look at how to override the timeout used by the underlying http client in the Docker client?\nWhilst your front-end fix would be working, I'd rather have a fully featured backend capability. Remember that we'll need to leverage this feature to schedule the execution of commands in #2183.\n. Hi @ConnorLynchSigao \nThis is already possible. Just head to the \"Env\" tab in the Advanced container settings panel to set up environment variables.. Hi @andydrew23 \nThanks for opening this report.\nCan you try to deploy the Portainer + Agent setup via these instructions: https://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster?. @jeffglousher could you try to remove the following bind mount from the stack file we provide and try again?\nyaml\n      - /var/lib/docker/volumes:/var/lib/docker/volumes. @jeffglousher \nTwo things:\n\nCan you share the logs of the Portainer service with us?\nCan you enable DEBUG logs by adding the LOG_LEVEL environment variable to your compose  file and share the logs with us?\n\nExample:\nyml\n  agent:\n    image: portainer/agent\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.agent\n      # AGENT_PORT: 9001\n      LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - agent_network\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]. @jeffglousher yeah, you'll probably want to use a more \"official\" way to install Docker on your machines.. Thanks for the report @jeffglousher \nI believe we can close this issue as the OP issue is probably related.\nFeel free to re-open/comment to add any details.. Depends on https://github.com/portainer/agent/issues/14. Host view should query agent for host information only if agent API = version 2.\nCan browse volume using /api/v1/ when agent API = version 1 and api/v2/ when agent API = version 2.\nCan browse host when agent API version = 2.\nNote that we cannot alter already deployed versions of the agent, so when the agent version is not available, we'll default to version 1.. https://github.com/portainer/agent/issues/14 is now implemented, the API now returns a header with the associated agent API version.. > if agent version is v1, the browse button should be disabled with a title - \"Not available for this agent's version\"\nSimply do not display the browse button if the agent API version is 1.\n\nplus if agent's version is v1, than the new api won't be available, no? so we query the old api url.\n\nIf agent version is 1, we need to support volume browsing using the v1 API format.\n\nWhen does the check for version happens? on the first time the agent is introduced?\nThere should be some handshake to get the agent's api version. When would that happen? when creating the endpoint? on the snapshot?\n\nHave a look at how we check for the Docker API version for a potential implementation idea here, I'm not sure that we need to add this backend side.. @chiptus \nThe Docker API version is not set in the backend, it's actually retrieved from the frontend and set in the app state.. It's actually coming from the Version call to the Docker daemon: https://github.com/portainer/portainer/blob/develop/app/portainer/services/stateManager.js#L150\nWe can add a ping endpoint in the agent (no authentication) that can be used for the handshake. Thoughts? . I'll open an evolution in the agent.\nEDIT: https://github.com/portainer/agent/issues/29. Let's discuss this in https://github.com/portainer/agent/issues/29. Other problem: we'll introduce a new api endpoint (be it /ping) but it will only be part of the release 1.2.0 of the agent. How will the frontend react when this endpoint is not found? Automatically set agent version to 1 when this request returns 404 ?. Fixed via https://github.com/portainer/portainer/issues/2280\nWill be part of the next release.. Hi @Jonher937 \nThanks for opening this report, I believe this is a duplicate of https://github.com/portainer/portainer/issues/1726 and while it was working with the API previously, it was never officially supported.\nhttps://github.com/portainer/portainer/issues/1726 is the way to go to bring this into the soft.. Hi @mmgil \nCan we get more information here? Some details about your platform? The version of Windows you're using? What kind of error are you seeing?. @mmgil a bit of a long shot here but could you try with the image portainer/portainer:windows1709-amd64 ?. @xcbeyond our build system is not working on Windows at the moment but our team is working on it.. Tagging this as a new feature but will need more investigation, I don't see any field exposed by the Docker API to allow this.. Thanks @yassirh  :+1: . Closed in favor of #2374 and #2361 . @opera443399 don't worry about the typo, is it working using moment?. I'm not sure about the UX here, defaulting to the current datetime when accessing the view makes it interesting but if I need to check all the logs I need to remove the entry manually. And then if I want to use the since feature again, I'll need to write down a non human friendly date format.\nMaybe default to empty since field and add a Now button close to it to generate the accorded date for the user. Or a dropdown with pre defined values like Now, Last hour, Last 2 hours, Last 24hours...\nLet's discuss this with @ncresswell before going further @opera443399 \n@ncresswell can you try it via portainer/portainer:pr2377 ?. @opera443399 can you update the changes to include only what's related to the line number?. Ok, trying to understand your use case for the since filter:\nAre you using it to show the latest log entries and to filter out disordered task log entries?\nWhat about finding a way to sort the logs via the timestamp? I believe that it would also solve the problems reported by other users in #1942 . @opera443399 if we add the ability to sort by timestamp, why would you still need the since filter?. Thanks for continuing the discussion, it's not that I do not want your since filter to be merge, I'm just trying to understand your problem so that we can figure the best solution.\n\nif we just use lineCount+sorted, the result is not that accurate, we have to adjust the lineCount several times to filter the log entries.\n\nDo you mean that you would need to adjust the lineCount until you can figure out the correct number that will display the logs for the last 30min?. @opera443399 we're thinking about adding a select/dropdown with pre-defined values instead of an input to enter a timestamp.\nDefault values should be: last 10 minutes, last hour, last 4 hours, last day. That would be a good start, do you think you can update your PR to integrate these changes?. @opera443399 can you update the PR with the following changes?\n\n\nI'd like to rename the \"Since\" label to \"Fetch\".\n\n\nRename the content of the dropdown to:\n\n\nAll logs (default value)\n\nLast day\nLast 4 hours\nLast hour\nLast 10 minutes\n\nIn this particular order.\n\nRemove the tooltip next to the dropdown.\n\n\n. Thanks @opera443399 :+1: . You can simply run gofmt -w api/crypto/tls.go and that should fix the issue (could be indentation/new line chars).. Thanks @yassirh :+1: . Thanks @Trojan295 :+1: . @linehrr \nAs this has been merged, can you open a bug report regarding the duplicate/edit feature? Thanks.. Duplicate of #2133 \nTLDR: at the moment when using the Portainer agent setup, when restarting the Portainer instance without using persistent storage you'll need to restart the agent if the Portainer instance is re-created.. Thanks @yassirh :+1: . @pch18 which version of Portainer are you using?. @pch18 ping, can you try the image specified above?. I might have found an issue with the services datatables, there is no action available anymore:\n\nSame in the stack details view:\n\nTasks datatable in service details is OK though:\n\nCan you fix this?. Thanks @farodin91 :+1: . @hzlmn sure feel free to open a PR. Note that this button should only be displayed when the \"Dockerhub\" registry is selected.. Following the comment in #2440, a link in the image details view should be added as well.. Thanks @ricardona :+1: . Hi @JTT-JustTheTip, thanks for the report.\nCan you ensure that the data is correctly persisted via this bind mount ? -v /media/VMRoot/VMDocker/Docker_Configs/Portainer/portainer_data:/data . @JTT-JustTheTip did you need to re-create the administrator user inside Portainer after reboot?. Hi @mhermosi \nAny event occuring in your cluster (restarting nodes for example) ? Can you share the logs of the agent service with us?. Looks like you are migrating from a really old instance of Portainer. Can you try to re-create the portainer_data volume before attempting to deploy Portainer?. cc @ncresswell \nDo we still want to display this message ?. Sorry @ricardona we're going to close this one in favor of an implemtentation for #2405 . @mstansberry looks cool ! Any specific usage for this? E.g. what could we achieve with swagger-codegen / swagger-codegen-cli ?. Thanks @mstansberry :100: \nThis is pretty cool, we might be able to provide SDKs to interact with Portainer later on :-). We did not want to provide any ownership control over images as it does not really makes sense. We might figure out a better isolation level for images at some point, in the meantime this is not going to be integrated.\nRegarding your particular point though, preventing the ability to remove images, this will be part of our RBAC extension (see https://github.com/portainer/portainer/issues/1259). We've actually reconsidered adding user access controls on the images, we'll use this issue to track this evolution.. No ETA yet.. Not really sure if the problems comes from the agent here.\nping @olljanat . @olljanat \n\nwould it be that agent 1.1.2 have been build before Microsoft/go-winio#82 was merged? \n\nAgent 1.1.2 was released in the beginning of August, more than a month after https://github.com/Microsoft/go-winio/pull/82 has been merged.\n. Closing this issue as it seems that the problem is related to the underlying platform where the agent tries to run.\nFeel free to comment/re-open if we're missing something.. @xAt0mZ please give a quick play test with this one and a review. > About the build size - this is only for dev, on production (try running yarn build:client) it is much smaller.\nJust gave a quick go to yarn build:client:\n```\nRunning \"webpack:prod\" (webpack) task\nclean-webpack-plugin: /home/tony/workspaces/portainer/portainer/webpack/dist/public has been removed.\nHash: a42f81d8cbce6189c680                                                        \nVersion: webpack 4.26.0 / grunt-webpack 3.1.3\nTime: 49790ms\nBuilt at: 2018-12-21 19:09:12\n                                 Asset        Size  Chunks                    Chunk Names\n 030846b7226a63373512cbd2c71ff51a.woff    69.9 KiB          [emitted]       \n  07745d55b001c85826eedd479285cdbb.svg    3.82 KiB          [emitted]       \n  0c06fc423d7afe426c0edbeb759a2a59.png    18.7 KiB          [emitted]       \n 140f41485edce6f713abe17625eba4c1.woff    62.3 KiB          [emitted]       \n  3f5a250e01aa2a2c757c8d8915216e0b.ttf     109 KiB          [emitted]       \n  4291d4b6c28b411e821a90adb4716fd7.eot     109 KiB          [emitted]       \n  4806ce9049e1e082dd3da4063ceb0eea.xml   249 bytes          [emitted]       \n  4910ec733558f59bf05834d4f831a48d.eot     130 KiB          [emitted]       \n  5ba13dcb526292ae707310a54e103cd1.png   358 bytes          [emitted]       \n  5da83cfb4883a59354abeff852cb7394.png    10.8 KiB          [emitted]       \n65e3be4eea08191c64040fbcb8006068.woff2    59.9 KiB          [emitted]       \n813b8aee60f235b36887a388b70e1359.woff2    49.2 KiB          [emitted]       \n  8d4556f217181796cf3d542e7726e425.svg    73.4 KiB          [emitted]       \n  96dc3d202a4d0a9e377bf95da1839c8e.svg     359 KiB          [emitted]  [big]\n  a12d50b7846d4322ea1fe7bb088cf35d.svg     341 KiB          [emitted]  [big]\n  bf9981548a3912f87bca05f98e904aa9.png    1.07 KiB          [emitted]       \n  dc4d092847be46242d8c013d1bc7c494.png  1010 bytes          [emitted]       \n  e18bbf611f2a2e43afc071aa2f4e1512.ttf    44.3 KiB          [emitted]       \n  e57e108a1ae04ca2b27cab75e4478867.ttf     130 KiB          [emitted]       \n  eeee3305afea0566329dc6dcb63db360.png    1.73 KiB          [emitted]       \n  f0a03e151fb4eec3a5e655fae9886ac5.ttf    42.7 KiB          [emitted]       \n  f0ea477ef046ba5fef9249ec3172903e.svg    91.7 KiB          [emitted]       \n  f9508a64a1beb81be174e194573f7450.png   215 bytes          [emitted]       \n                            index.html    22.6 KiB          [emitted]       \n         main.a42f81d8cbce6189c680.css    17.2 KiB       0  [emitted]         main\n          main.a42f81d8cbce6189c680.js    1.21 MiB       0  [emitted]  [big]  main\n                          vendor.1.css     393 KiB       1  [emitted]  [big]  vendor\n        vendor.a42f81d8cbce6189c680.js    1.63 MiB       1  [emitted]  [big]  vendor\nEntrypoint main [big] = vendor.1.css vendor.a42f81d8cbce6189c680.js main.a42f81d8cbce6189c680.css main.a42f81d8cbce6189c680.js\n  [3] ./app/docker/rest/response/handlers.js 2.92 KiB {0} [built]\n  [8] ./app/portainer/components/accessControlForm/porAccessControlFormModel.js 167 bytes {0} [built]\n  [9] ./app/portainer/models/resourceControl.js 685 bytes {0} [built]\n [24] ./app/extensions/storidge/models/profile.js 1.3 KiB {0} [built]\n [26] ./app/portainer/models/schedule.js 1.89 KiB {0} [built]\n [28] ./node_modules/angular/index.js 48 bytes {1} [built]\n [30] ./app/docker/models/container.js 3.82 KiB {0} [built]\n[168] ./app/__module.js 880 bytes {0} [built]\n[169] ./app/agent/_module.js 38 bytes {0} [built]\n[170] ./app/azure/_module.js 1.45 KiB {0} [built]\n[171] ./app/docker/__module.js 13.5 KiB {0} [built]\n[172] ./app/extensions/storidge/__module.js 2.08 KiB {0} [built]\n[173] ./app/portainer/__module.js 14.7 KiB {0} [built]\n[223] ./assets/css/app.css 39 bytes {0} [built]\n[310] ./app sync ^(..(js$))[^.]$/i 23.4 KiB {0} [built]\n    + 978 hidden modules\nWARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\nThis can impact web performance.\nAssets: \n  a12d50b7846d4322ea1fe7bb088cf35d.svg (341 KiB)\n  96dc3d202a4d0a9e377bf95da1839c8e.svg (359 KiB)\n  main.a42f81d8cbce6189c680.js (1.21 MiB)\n  vendor.1.css (393 KiB)\n  vendor.a42f81d8cbce6189c680.js (1.63 MiB)\nWARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\nEntrypoints:\n  main (3.24 MiB)\n      vendor.1.css\n      vendor.a42f81d8cbce6189c680.js\n      main.a42f81d8cbce6189c680.css\n      main.a42f81d8cbce6189c680.js\nWARNING in webpack performance recommendations: \nYou can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\nFor more info visit https://webpack.js.org/guides/code-splitting/\n```\nOutput is interesting, seems that we have a few warnings regarding the size of the bundle.\nI'm interested about the following:\nWARNING in webpack performance recommendations: \nYou can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\nFor more info visit https://webpack.js.org/guides/code-splitting/\nWould that be of any interest for us? \nDid a quick bundle size comparison:\n\nWebpack: around 2.8MB\n\nmain.a42f81d8cbce6189c680.js (1.21 MiB)\n  vendor.1.css (393 KiB)\n  vendor.a42f81d8cbce6189c680.js (1.63 MiB)\n\nGrunt:  Around 2.7MB\n\nls -la dist/public/js \ntotal 2,7M\n-rw-rw-r-- 1 tony tony 2,7M d\u00e9c.  21 19:16 app.65e65dc0.js\nBundle seems to be a bit heavier when using webpack, but not by much. Is that normal? Reading the task Optimize bundle (moment and lodash) checked, I would have expected a smaller bundle. Not blocking tho as the small overhead is largely compensated with Babel support.\nI'll continue playing with this a bit.. I used the release process to build a \"production\" version via yarn grunt release:linux:amd64.\nSeems ok, here is the output of the webpack part:\n```\nRunning \"webpack:prod\" (webpack) task\nclean-webpack-plugin: /home/tony/workspaces/portainer/portainer/webpack/dist/public has been removed.\nHash: 15eda7ced4dcb4cfa423                                                        \nVersion: webpack 4.26.0 / grunt-webpack 3.1.3\nTime: 50361ms\nBuilt at: 2019-03-13 15:31:37\n                                 Asset        Size  Chunks                    Chunk Names\n 030846b7226a63373512cbd2c71ff51a.woff    69.9 KiB          [emitted]       \n  07745d55b001c85826eedd479285cdbb.svg    3.82 KiB          [emitted]       \n 140f41485edce6f713abe17625eba4c1.woff    62.3 KiB          [emitted]       \n  3f5a250e01aa2a2c757c8d8915216e0b.ttf     109 KiB          [emitted]       \n  4291d4b6c28b411e821a90adb4716fd7.eot     109 KiB          [emitted]       \n  4806ce9049e1e082dd3da4063ceb0eea.xml   249 bytes          [emitted]       \n  4910ec733558f59bf05834d4f831a48d.eot     130 KiB          [emitted]       \n  5ba13dcb526292ae707310a54e103cd1.png   358 bytes          [emitted]       \n  5da83cfb4883a59354abeff852cb7394.png    10.8 KiB          [emitted]       \n65e3be4eea08191c64040fbcb8006068.woff2    59.9 KiB          [emitted]       \n813b8aee60f235b36887a388b70e1359.woff2    49.2 KiB          [emitted]       \n  8d4556f217181796cf3d542e7726e425.svg    73.4 KiB          [emitted]       \n  96dc3d202a4d0a9e377bf95da1839c8e.svg     359 KiB          [emitted]  [big]\n  a12d50b7846d4322ea1fe7bb088cf35d.svg     341 KiB          [emitted]  [big]\n  bf9981548a3912f87bca05f98e904aa9.png    1.07 KiB          [emitted]       \n  dc4d092847be46242d8c013d1bc7c494.png  1010 bytes          [emitted]       \n  e18bbf611f2a2e43afc071aa2f4e1512.ttf    44.3 KiB          [emitted]       \n  e57e108a1ae04ca2b27cab75e4478867.ttf     130 KiB          [emitted]       \n  eeee3305afea0566329dc6dcb63db360.png    1.73 KiB          [emitted]       \n  f0a03e151fb4eec3a5e655fae9886ac5.ttf    42.7 KiB          [emitted]       \n  f0ea477ef046ba5fef9249ec3172903e.svg    91.7 KiB          [emitted]       \n  f9508a64a1beb81be174e194573f7450.png   215 bytes          [emitted]       \n                            index.html    22.5 KiB          [emitted]       \n         main.15eda7ced4dcb4cfa423.css    17.2 KiB       0  [emitted]         main\n          main.15eda7ced4dcb4cfa423.js    1.24 MiB       0  [emitted]  [big]  main\n                          vendor.1.css     393 KiB       1  [emitted]  [big]  vendor\n        vendor.15eda7ced4dcb4cfa423.js    1.67 MiB       1  [emitted]  [big]  vendor\nEntrypoint main [big] = vendor.1.css vendor.15eda7ced4dcb4cfa423.js main.15eda7ced4dcb4cfa423.css main.15eda7ced4dcb4cfa423.js\n  [2] ./node_modules/core-js/modules/web.dom.iterable.js 1.77 KiB {1} [built]\n  [6] ./node_modules/core-js/modules/es6.array.for-each.js 404 bytes {1} [built]\n  [8] ./app/docker/rest/response/handlers.js 3.14 KiB {0} [built]\n [12] ./node_modules/core-js/modules/_export.js 1.56 KiB {1} [built]\n [14] ./node_modules/core-js/modules/_wks.js 358 bytes {1} [built]\n [20] ./node_modules/core-js/modules/es6.array.iterator.js 1.09 KiB {1} [built]\n [29] ./node_modules/angular/index.js 48 bytes {1} [built]\n[238] ./app/__module.js 1010 bytes {0} [built]\n[243] ./app/agent/_module.js 38 bytes {0} [built]\n[244] ./app/azure/_module.js 1.45 KiB {0} [built]\n[245] ./app/docker/__module.js 13.8 KiB {0} [built]\n[246] ./app/extensions/storidge/__module.js 2.08 KiB {0} [built]\n[247] ./app/portainer/__module.js 15.1 KiB {0} [built]\n[324] ./assets/css/app.css 39 bytes {0} [built]\n[410] ./app sync ^(..(js$))[^.]$/i 24 KiB {0} [built]\n    + 1119 hidden modules\nWARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\nThis can impact web performance.\nAssets: \n  a12d50b7846d4322ea1fe7bb088cf35d.svg (341 KiB)\n  96dc3d202a4d0a9e377bf95da1839c8e.svg (359 KiB)\n  main.15eda7ced4dcb4cfa423.js (1.24 MiB)\n  vendor.1.css (393 KiB)\n  vendor.15eda7ced4dcb4cfa423.js (1.67 MiB)\nWARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.\nEntrypoints:\n  main (3.32 MiB)\n      vendor.1.css\n      vendor.15eda7ced4dcb4cfa423.js\n      main.15eda7ced4dcb4cfa423.css\n      main.15eda7ced4dcb4cfa423.js\nWARNING in webpack performance recommendations: \nYou can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.\nFor more info visit https://webpack.js.org/guides/code-splitting/\nChild html-webpack-plugin for \"index.html\":\n                                   Asset        Size  Chunks             Chunk Names\n    07745d55b001c85826eedd479285cdbb.svg    3.82 KiB          [emitted]\n    4806ce9049e1e082dd3da4063ceb0eea.xml   249 bytes          [emitted]\n    5ba13dcb526292ae707310a54e103cd1.png   358 bytes          [emitted]\n    dc4d092847be46242d8c013d1bc7c494.png  1010 bytes          [emitted]\n    f9508a64a1beb81be174e194573f7450.png   215 bytes          [emitted]\n     + 2 hidden assets\n    Entrypoint undefined = index.html\n     [0] ./node_modules/html-webpack-plugin/lib/loader.js!./app/index.html 3.3 KiB {0} [built]\n     [1] ./node_modules/html-webpack-plugin/node_modules/lodash/lodash.js 527 KiB {0} [built]\n     [2] (webpack)/buildin/global.js 489 bytes {0} [built]\n     [3] (webpack)/buildin/module.js 497 bytes {0} [built]\n     [4] ./assets/ico/apple-touch-icon.png 82 bytes {0} [built]\n     [5] ./assets/ico/favicon-32x32.png 82 bytes {0} [built]\n     [6] ./assets/ico/favicon-16x16.png 82 bytes {0} [built]\n     [7] ./assets/ico/safari-pinned-tab.svg 82 bytes {0} [built]\n     [8] ./assets/ico/favicon.ico 19.7 KiB {0} [built]\n     [9] ./assets/ico/browserconfig.xml 82 bytes {0} [built]\n    [10] ./assets/images/logo_alt.png 82 bytes {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!app/portainer/components/datatables/datatable.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./app/portainer/components/datatables/datatable.css 3.79 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!assets/css/app.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./assets/css/app.css 13.8 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/@fortawesome/fontawesome-free-webfonts/css/fa-brands.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-brands-400.eot 82 bytes {0} [built]\n    [1] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/@fortawesome/fontawesome-free-webfonts/css/fa-brands.css 841 bytes {0} [built]\n    [2] ./node_modules/css-loader/lib/url/escape.js 448 bytes {0} [built]\n    [3] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\n    [4] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-brands-400.woff2 84 bytes {0} [built]\n    [5] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-brands-400.woff 83 bytes {0} [built]\n    [6] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-brands-400.ttf 82 bytes {0} [built]\n    [7] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-brands-400.svg 82 bytes {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/@fortawesome/fontawesome-free-webfonts/css/fa-solid.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-solid-900.eot 82 bytes {0} [built]\n    [1] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/@fortawesome/fontawesome-free-webfonts/css/fa-solid.css 851 bytes {0} [built]\n    [2] ./node_modules/css-loader/lib/url/escape.js 448 bytes {0} [built]\n    [3] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\n    [4] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-solid-900.woff2 84 bytes {0} [built]\n    [5] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-solid-900.woff 83 bytes {0} [built]\n    [6] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-solid-900.ttf 82 bytes {0} [built]\n    [7] ./node_modules/@fortawesome/fontawesome-free-webfonts/webfonts/fa-solid-900.svg 82 bytes {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/@fortawesome/fontawesome-free-webfonts/css/fontawesome.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/@fortawesome/fontawesome-free-webfonts/css/fontawesome.css 42.3 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/angular-json-tree/dist/angular-json-tree.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/angular-json-tree/dist/angular-json-tree.css 1.23 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/angular-loading-bar/build/loading-bar.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/angular-loading-bar/build/loading-bar.css 1.67 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/angular-moment-picker/dist/angular-moment-picker.min.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/angular-moment-picker/dist/angular-moment-picker.min.css 3.48 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/angularjs-slider/dist/rzslider.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/angularjs-slider/dist/rzslider.css 3.84 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/bootstrap/dist/css/bootstrap.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/bootstrap/dist/fonts/glyphicons-halflings-regular.eot 26.3 KiB {0} [built]\n    [1] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/bootstrap/dist/css/bootstrap.css 116 KiB {0} [built]\n    [2] ./node_modules/css-loader/lib/url/escape.js 448 bytes {0} [built]\n    [3] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\n    [4] ./node_modules/bootstrap/dist/fonts/glyphicons-halflings-regular.woff2 23.5 KiB {0} [built]\n    [5] ./node_modules/bootstrap/dist/fonts/glyphicons-halflings-regular.woff 30.6 KiB {0} [built]\n    [6] ./node_modules/bootstrap/dist/fonts/glyphicons-halflings-regular.ttf 82 bytes {0} [built]\n    [7] ./node_modules/bootstrap/dist/fonts/glyphicons-halflings-regular.svg 82 bytes {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/codemirror/addon/lint/lint.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/codemirror/addon/lint/lint.css 2.81 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/codemirror/lib/codemirror.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/codemirror/lib/codemirror.css 5.52 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/isteven-angular-multiselect/isteven-multi-select.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/isteven-angular-multiselect/isteven-multi-select.css 5.26 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/rdash-ui/dist/css/rdash.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/rdash-ui/dist/fonts/montserrat-regular-webfont.eot 27.9 KiB {0} [built]\n    [1] ./node_modules/rdash-ui/dist/fonts/montserrat-regular-webfont.svg 82 bytes {0} [built]\n    [2] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/rdash-ui/dist/css/rdash.css 7.91 KiB {0} [built]\n    [3] ./node_modules/css-loader/lib/url/escape.js 448 bytes {0} [built]\n    [4] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\n    [5] ./node_modules/rdash-ui/dist/fonts/montserrat-regular-webfont.woff 32.2 KiB {0} [built]\n    [6] ./node_modules/rdash-ui/dist/fonts/montserrat-regular-webfont.ttf 82 bytes {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/toastr/build/toastr.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/toastr/build/toastr.css 6.32 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/ui-select/dist/select.css:\n    Entrypoint mini-css-extract-plugin = \n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/ui-select/dist/select.css 6.44 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\nChild mini-css-extract-plugin node_modules/css-loader/index.js??ref--7-1!node_modules/postcss-loader/src/index.js!node_modules/xterm/dist/xterm.css:\n    Entrypoint mini-css-extract-plugin = *\n    [0] ./node_modules/css-loader??ref--7-1!./node_modules/postcss-loader/src!./node_modules/xterm/dist/xterm.css 1.5 KiB {0} [built]\n    [1] ./node_modules/css-loader/lib/css-base.js 2.21 KiB {0} [built]\n```\nShould we do something about these warnings?. Can't create a config using the latest version. Fails with a JS error.\nEDIT: Been testing this branch against different deployments scenarios and only found the config creation bug.\nLGTM once this is fixed.. @olljanat not really\n2181 gives the ability for a user to execute a job on a Docker host via a privileged container. This allows you to execute commands that are available on the hosts and thus would probably partially solve the OP issue.\nRegarding the ability to run pre-configured scripts for standard users, this is something that we'll have to discuss.\ncc @ncresswell  . Try the configuration reported by one of our users here: https://github.com/portainer/portainer-docs/pull/38#issuecomment-405578507\n. Hi @NigelKitcher \nSorry for the late answer.\nWhat about simply creating different templates with default/preset properties set on the environment variables (or even using select if you need to allow user choice) ?. We limited access to the macvlan driver for Swarm endpoints only. This can be reverted easily though. . Duplicate of https://github.com/portainer/portainer/issues/454. @xcbeyond what registry management features are you talking about?. This was simply a POC, please open issues only for the stable version (releases) of Portainer.. @xAt0mZ to reproduce the OP context, have you tried without any internet connection? Can you try to reproduce with 1.19.2 instead of develop?\n@wyang18 we might need more information to dig into this... what about the Docker version that you are using? Also, do you have any registry created inside the Portainer instance?. > This may be related to Docker. Tested few more, found out this is happening to Docker stack deploy command as well.\nInteresting, behind the scenes Portainer is using the CLI command docker stack deploy to deploy the stack. If this problem occurs with the CLI tool, it WILL happen with Portainer as we leverage the CLI for Swarm stack management.\n\nWhy the internet access matters? All images are pre-loaded locally.\n\nWe're just trying to figure out how to reproduce the problem, the more info we have the better.. @wyang18 can you try docker stack deploy --resolve-image=never to see if it makes things faster?. @wyang18 ok, closing this one.. @Dumkaaa \nDo you know how I can test this to validate if #1912 is fixed?. We got some feedback in #1912 looks like the bug is fixed !. Thanks @Dumkaaa :+1: . Reverted by #2642 . What's the point of this PR @bhargavigorantla ?. > Bug only on Synology.\n@chreggy have you been able to test this on another environment to confirm that this is only problematic on Synology? Synology Docker GUI works ok?. @chreggy what error are you seeing? Something in the UI? Can you inspect the container creation HTTP request via your browser dev tools?. @chreggy in your browser you should be able to open the \"developer tools\" (F12 on Chrome for example), then simply refresh the view and inspect the requests in the network panel of the developer tools.. Yes I'll try to review ASAP. I was able to test this again.\nThere is something confusing here, we enable a switch titled \"Make externally created resources public by default\" but it will also switch to public any existing administrator restricted resource.\nI don't think that this is the behavior that we want integrate. cc @ncresswell for another review (you can use portainer/portainer:pr2424).. Here are my thoughts so far on this topic, actually pretty much reflecting your changes.\n\n\nWe need to find a way to represent an \"externally created\" resource. The way to go would be to assume that any existing resource without a resource control object associated to it is an externally created resource. Now, in the latest version of the codebase, we assume that a resource without any resource control object associated is ALSO an administrator restricted resource.\n\n\nTo support this, we will need to update the ResourceControl logic to support both the AdministratorOnly field (this field was deprecated in DB version 14) and the Public field.\n\n\nDue to the fact that the AdministratorOnly was deprecated in earlier versions, we need to be careful about potential data upgrade scenarions breaking the state of the persisted resource controls.\n\n\nAnother issue we are going to face is that in the latest version of the codebase (1.19.2 at the time of this comment) is that there is no way to determine if a resource was either created externally (with a default to administrator restricted access) OR if it was created via Portainer with a specified administrator restricted policy in existing setups.\n\n\nThe goal of this PR being to switch the default access control policy from Administrator defined to Public for external resources only, triggering this change process for the first time will potentially cause the update of some administrator defined resource controls to public. The user must be aware of this.\n\n\ncc @ncresswell for an update on this topic\nIMO pretty much everything is covered by your PR. \nOne small thing related to the UX of this feature I'd like to change:\n\nThe Make externally created resources public by default switch will actually trigger an update of the settings right after clicking on it whereas for all the other switches in this view we expect the user to click on the \"Save settings\" button. In order to keep a consistent UX (albeit a bit worst) I think we should simply expect the user to click on save settings for this switch as well.\nPlease add these changes to the UX and we'll try to go forward to bring this in 1.20.. @olljanat Happy new year :-)\nWe'll try our best to make this part of the next major release.. Codeclimate is OK. \nEndpoint list controller: https://github.com/portainer/portainer/blob/develop/app/portainer/components/endpoint-list/endpoint-list-controller.js#L2\nTemplate list controller:\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/components/template-list/template-list.js#L3\nNote that the template list controller should probably be created inside a specific file.. @olljanat it's just a matter of consistency and IMO it should not be removed. Looks like you're trying to work-around a problem whereas it should be resolved instead.. @olljanat what are you saying? Is that a bug in the current develop branch? Do you need help to go further on this topic?. @olljanat \nI think that this is because both template-list and endpoint-list components are missing the assignement of the table-key binding:\n\nhttps://github.com/portainer/portainer/blob/6b6a69abfd/app/portainer/views/templates/templates.html#L351\nhttps://github.com/portainer/portainer/blob/6b6a69abfd/app/portainer/views/home/home.html#L41\n\nThe binding must also be defined in:\n\nhttps://github.com/portainer/portainer/blob/6b6a69abfd/app/portainer/components/template-list/template-list.js#L5\nhttps://github.com/portainer/portainer/blob/6b6a69abfd/app/portainer/components/endpoint-list/endpoint-list.js#L7\n. Ok, LGTM.\n\nKeeping as ready to merge as it impacts a lot of files I'll merge it as one of the last element for 1.20.. Thanks @olljanat :+1: . Please only open issues for bug reports or feature requests, for any development related questions you can ask on slack at https://portainer.io/slack/. @yassirh We're currently trying to test this one !. Yeah, any other feedback appreciated :). @olljanat any difference with the latest release or current develop branch?. Thanks @yassirh :+1: . Hi @huaphuoctruong \nWe fixed this issue in 1.19.2 via https://github.com/portainer/portainer/issues/1991\nPlease upgrade to 1.19.2. \nClosing this issue, if you're still having this issue after upgrading, please re-open or comment in #1991.. You'll need to make an effort here regarding the description/title of the issue. Can you re-phrase it? Sorry but I don't understand the purpose of this feature request.. Hi @quelo1972 \nThis is not an error message, simply a warning stating that you need to use this Docker flag (which you did) in order to use the \"local environment management\".\n\nclicking on connect button I cannot manage my docker environment!!!\n\nCan you give us more details? What kind of error do you have? Can you share screenshots with us? \nAlso please tell us the version of Docker that you're managing (docker version on the CLI).. @treyyoder what about defining an administrator access restriction on these secrets?. Duplicate of https://github.com/portainer/portainer/issues/2097\nWas fixed and will be part of next release.. @xAt0mZ actually simply remove the context. We'll also disable this on the API side so it doesn't matter to redirect the user on the home page for this context.. Yeap, you need to be connected to an agent (API version >= 2).. I think that we can tackle this one as a part of #2395 . I think we had this issue on a standalone + agent setup.. Update following our discussion on Slack:\nperformance\nWe'll now use the backend as the single source of truth to determine if an endpoint is up or down. The endpoint status is updated during snapshots and thus the snapshot will act as the heartbeat feature. \nBy relaying on the snapshot for this feature, it makes the snapshot feature not an optional feature anymore and thus we should remove the ability to disable snapshots (for people not interested in this feature nor snapshots they'll still be able to use a large snapshot interval).\nWhen proxying a request to an endpoint, the backend will check if the endpoint is down, in that case it will immediately return a 503 error. A test implementation for this is available in the feat-api-rewrite-response-on-endpoint-down branch, more details:  https://github.com/portainer/portainer/blob/feat-api-rewrite-response-on-endpoint-down/api/http/handler/endpointproxy/proxy_docker.go#L27-L29\nThe frontend will intercept all the requests and use the snapshot data when a 503 or 502 (in the case the backend consider the endpoint as UP but that it is actually down, which can occur between two heartbeats) is returned.\nux\nRegarding the UX in high latency environments, we've considered implementing a generic loading view (a centered loading spinner) to be displayed inside the \"main panel\" of the view until the view is fully loaded, see the red square box in this picture for a description of the \"main panel\":\n\n. @jchorier The agent setup uses self-signed certificates and there is no way to currently use your own certs. We'll consider this as an enhancement.. Hi @vboufleur \nSorry for the late answer, it's pretty simple I think, the templateUpdate operation do not accept an array of JSON objects as the payload. You must use a simple JSON object instead of an array.. @ssbkang @olljanat it's all right we can take care of squashing the commits during merge.. Thanks @ssbkang :+1: . @uptlak I can see two problems in this issue:\n\nThe first one is associated to the --mount command, which is not related to Portainer but to Docker itself.\n\n```\ndocker : invalid argument \"type=npipe\" for \"--mount\" flag: target is required\nCategoryInfo : NotSpecified: (invalid argumen...get is required:String) [], RemoteException\nFullyQualifiedErrorId : NativeCommandError\n```\nI'd say that this is related to your environment. Can you try to bind mount a named pipe in another container image?\n\nFor the second one, @ncresswell stated that there is no way run the agent on windows in a multi-node swarm which is not entirely true. Actually, there is no EASY way to run the agent on windows in a multi-node swarm mainly due to the fact that you cannot deploy it as a service or via a stack on Windows node (npipe bind mount not supported, more details: https://github.com/docker/swarmkit/pull/2691)\n\nIt can actually be deployed manually, but it's much more complicated, steps can be adapted from this tutorial: https://www.esentri.com/blog/2018/09/10/portainer-agent-deployment-on-docker-swarm-with-user-namespace-remap/\nYou can remove any userns related stuff.\nClosing this issue for now, feel free to comment if you're missing anything.. @xcbeyond please use our community channel (slack) to ask for any development related questions.. Looks better indeed, thanks @cwchristerw :+1: . @ncresswell LP is right, we cannot translate the year into a cron expression:\n```\nA cron expression represents a set of times, using 6 space-separated fields.\nField name   | Mandatory? | Allowed values  | Allowed special characters\n----------   | ---------- | --------------  | --------------------------\nSeconds      | Yes        | 0-59            | * / , -\nMinutes      | Yes        | 0-59            | * / , -\nHours        | Yes        | 0-23            | * / , -\nDay of month | Yes        | 1-31            | * / , - ?\nMonth        | Yes        | 1-12 or JAN-DEC | * / , -\nDay of week  | Yes        | 0-6 or SUN-SAT  | * / , - ?\n```\nMaking it impossible to actually schedule non-recurring jobs with the current implementation as the year cannot be specified, meaning that schedules will actually be ran at least one time per year.\nE.g. if we specify run a job on the November 10th  at 2PM, the created rule will be 0 0 14 10 11 which will be triggered every year on November 10th. \nIf we want to support non-recurring schedule, we have to update the API to add a flag that will disable the job after its first execution.. Then we'll need to add this new flag when creating a schedule.\n@xAt0mZ UX wise is there a way to disable the year selection in a datetime-picker?. @xAt0mZ you can rebase your work on top of feat2468-recurring-schedules which introduce a new Recurring property for schedules (API only, front-end must be updated to support it).\nHost job creation/update views will need to be updated.. Hi @lichti \nThanks for reporting this issue.\nThis is a matter of mis-configuration that could lead to a potential vulnerability. While we are not keen to force the setup of the default administrator credentials at deployment time, we're thinking about introducing a timer that would shut down the Portainer instance if an administrator account has not been created after 5 minutes.\nThis would balance the potential vulnerability exploit with UX and deployment simplicity which are core values of the software.\nAny thoughts or alternative you'd like to propose?. @lichti \nYeah sounds like we could also output a random temporary password in the logs and ask the user to set their own password after the first authentication but it would just complexify deployments.\nAs we'd like to keep our deployment procedure simple, we cannot really leverage docker logs as an extra manual step after deployment to retrieve some information that must then be passed in the UI.. Hi @ptScaler \nWhat version of Portaine are you using?. This is not a Portainer related problem so I'm closing this issue.\nYou could ask for some help in our community support channel about this: https://portainer.io/slack/ although I would rather recommend to ask for help in a Docker channel instead.\nThis might help: https://github.com/portainer/portainer/blob/develop/app/docker/helpers/logHelper.js. cc @ncresswell . @xAt0mZ please have a look at this one when you can, should be reproducible in develop.. The --generic-resource flag is not supported in the service creation view. Tracking this issue as an evolution.. Hi @Beanow \nThanks for reporting this problem.\nI'm quite curious about the fact that only Swarm operations are affected, can you share some example of errors that you get in Portainer UI and logs?\nCan be interesting to share the agent logs as well. \nThanks.. @shariquemasood \nWhen using the method=file parameter, the endpoint will expect data to be posted as form-data. Please ensure that you're sending it as form-data.\nhttps://app.swaggerhub.com/apis/deviantony/Portainer/1.19.2/#/stacks/StackCreate. cc @ncresswell \nUpdated image: portainer/portainer:feat2468-schedule-creation-ux. @xAt0mZ I can reproduce the problem. Works locally but do not work inside an image (so after going through the release process...)\nI think that this might be caused by the fact that the angularjs-datetime-picker library do not support minification. But I'm not 100% sure. Could you try to use another datetime picker library?. Sorry for the late review @linquize \nThanks :+1: . Hi @dennis0721 \nHave you created your private registry inside Portainer?. Hi @risajef \nAny questions regarded contributions should be asked in our Slack channel: https://portainer.io/slack/\n. @waja these flags should still be working. FYI settings for these options were introduced in the Settings part of the UI.. Sorry misread your question. We'll investigate this flag issue.. @waja should be fine on first deployment, if using existing Portainer data it might be better to use the API to configure this.. Based on the discussion here it seems that we cannot reproduce the issue.\nClosing this issue. Feel free to re-open or comment if you think that we're missing something.. Template requests should actually be open in https://github.com/portainer/templates\nThanks !. Yeap. \"Network Error\": dial tcp: lookup dc.example.com on 127.0.0.11:53: read udp 127.0.0.1:54475->127.0.0.11:53: read: connection refused\nSeems that there is a network issue between your Portainer host/container and your LDAP server.\nNot related to Portainer I think. Feel free to re-open/comment if you think we're missing anything.. Indeed and that internal DNS is managed by Docker, not Portainer.\nI'd recommend you to update your Docker version as 1.13.x is actually quite old and might contain network bugs.. @alphaDev23 you need to specify a command to run a ubuntu container. Otherwise the container will just stop after starting.\nSpecifying a command in the Command field (/bin/bash for example) and toggling the Interactive & TTY radio button in the Console field should solve your problem.. This issue is actually asking for 3 different features, please open a single issue per feature request.\n\nKitematic allows editing the ports of a running container. Would like to see the same feature.\n\nDocker do not support editing the ports of a container post creation. I don't know how Kitematic supports this, maybe it re-creates the container behinds the scene. We already support the container re-creation feature which allows you to actually update the port of the container by re-creating a container.\n\nwould like to see a prepopulated list of the EXPOSED ports at creation time\n\nThat would be a new feature request regarding container creation\n\nI would like to be able to get all ports in container published not to a random port but to the same port on the host (if available)\n\nThat would be another feature request\nSorry if our process feels a bit heavy for you but it's needed to keep our issue base clean.. @risajef we well have a look at contributions when we have some availability. Unfortunately we're focused on version 1.20 at the moment so this will probably need to wait a bit. Thanks for your comprehension.. Yes, FYI this was solved in a previous version by adding a state busting timer.. Hi @pascalandy\nThe Portainer agent requires to be connected to the Docker socket (it's acting like a socat with extra features and security measures).\nYou will not be able to achieve this by using an agent setup. The --external-endpoints is a Portainer flag, not a Portainer agent flag.\nYou could make it work without the agent tho by updating the Portainer service declaration:\nportainer:\n    image: portainer/portainer\n    command: -H tcp://socat:2375\nAnd by removing the agent service.. @scrummie02 Services/Stacks/Secrets/Configs and Swarm links in the sidebar are only available when Portainer is connected to a Swarm cluster (either to a Portainer agent or directly to a manager node in the cluster).\nJust ensure that you're not connected to a worker node or a standalone host.. Website migration in progress :-). This was fixed via https://github.com/portainer/portainer/pull/2312 and will be part of release 1.20. Hi @micheljung \nCould you try again with the latest version of Portainer?. Hi @BaVanDuong \nWe need more information. How did you deploy Portainer and the agent? What version of Docker are you using?. @yuklia are there any volumes on the remote Docker daemon? What's the output of docker volume ls on that machine? Can you share the portainer container logs?. Sorry for the late update !\nThanks @Hugo1380 :+1: . Hi @jeysibel, is your Docker environment hosted inside a specific cloud provider infra? (AWS, GCP...). For those experiencing the endpoint is down error, I think that most of your problems are related to https://github.com/portainer/portainer/issues/2556 which is under investigation.\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nThe preview image portainerci/portainer:fix2556-frequent-offline-mode contains a potential fix for this problem, I'd encourage you to test it.\nNote that OP's issue is not related to this issue as I suspect network issues inside the infra/between the Swarm nodes.\n2018/11/30 14:47:08 [INFO] - Starting Portainer agent version 1.1.2 on 0.0.0.0:9001 (cluster mode: true)\n2018/11/30 14:47:30 http error: Unable to execute cluster operation (err=Get https://172.20.1.6:9001/containers/json?all=1: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)) (code=500)\n2018/11/30 14:47:30 http error: Unable to execute cluster operation (err=Get https://172.20.1.6:9001/volumes: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)) (code=500)\n2018/11/30 14:47:30 http error: Unable to execute cluster operation (err=Get https://172.20.1.6:9001/images/json?all=0: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)) (code=500)\n2018/11/30 14:47:54 [ERR] memberlist: Push/Pull with 8db633a4b3a6 failed: dial tcp 172.20.1.6:7946: i/o timeout\n2018/11/30 14:49:04 [ERR] memberlist: Push/Pull with 8db633a4b3a6 failed: dial tcp 172.20.1.6:7946: i/o timeout\n. Hi @dang3r \nNo, the agent is closed-source. Thanks for your will to help though. . @baskinsy are you using the latest version of Portainer and agent?. @baskinsy can you give us more details about your environment (provider, os, arch, docker version) and how did you deploy portainer? Portainer/agent logs can be useful too.. There is no way to update the agent timeout but we can investigate a longer timeout implementation. Thanks for the report.. @baskinsy this error is related to expired sessions, not really an issue.. @brantxiong latest documentation for the agent is available at https://portainer.readthedocs.io/en/stable/agent.html. Hi @baskinsy \nThanks a lot for the detailed report and the reproduction steps, we'll investigate this and try to reproduce it.. Ok, we're investigating this one.. @rhaamo @Nightbr @dovab could any of you try the following image and tell us if it solves your issue?\nportainerci/portainer:fix2542-empty-snapshot-interval\n. ok thanks for your report, will push ASAP.. Keeping this issue open till the fix is publicly available.. Fix is now publicly available.. Duplicate of #2542 . Thanks @hiyao :+1: . Right now we deliberately bind mount all these volumes from the host but we have in mind to enhance the UI/UX to give the user the ability to select which mounts he wants to bind mount for the job to run (e.g a list of checkboxes).. @SimonHeimberg We're sorry for this and are currently updating our website as well as our asset service.\nDocumentation will be updated soon. In the meantime I'll keep this issue open.\nNote, file can be accessed via https://downloads.portainer.io/portainer-agent-stack.yml\ncurl -L https://downloads.portainer.io/portainer-agent-stack.yml -o portainer-agent-stack.yml. Documentation and website updated.. @chiptus might be a good idea to update our codeclimate configuration (https://github.com/portainer/portainer/blob/develop/.codeclimate.yml) to ignore vendor files.. A preview image containing a potential fix for this bug can be tested via portainerci/portainer:pr2561. Can you guys give a try to it and tell us if the problem is fixed for you?. Yes, it seems that this case would not be handled correctly by the patch submitted by @weskey007 \nIt's good to note that the only way to start a Nginx container with this command using the Docker CLI is by passing the following command string argument nginx -g \"daemon off;\".\nNeither nginx -g daemon off and nginx -g \"daemon off\"; works. Makes sense, it needs a way to group the command. We'll need to review the array to string processor to support this.. Update: there's probably a conflict with a recent bugfix (https://github.com/portainer/portainer/issues/1912) that was part of 1.20.0\nThe implementation for this bugfix implied that we always keep the quotes when transforming a string to an array: https://github.com/portainer/portainer/pull/2419\nThus nginx -g \"daemon off;\" which is the correct command to use in order to start a nginx container would transform to [nginx, -g, \"daemon off;\"] which would cause the container to fail as it expects [nginx, -g, daemon off;].. I'm actually thinking about reverting #2419 as it breaks the container creation command parsing for multiple valid commands.\nFor example, these commands are not working anymore:\n\nnginx -g \"daemon off;\"\n/bin/sh -c \"echo 'hello world'\"\n. Basically portainerci/portainer:fix2552-command-parsing reverts #2419 and should solve all the issues except the one related to #1912\n\nAnyone keen to try it?. @denisgolius what do you mean by \n\nwhen I try to run docker login from gitlab server - I getting error\n\nAre you trying to login to Gitlab via the CLI ? Where are you seeing this error?\nError response from daemon: Get https://my-host.com/v2/: x509: certificate signed by unknown authority. @denisgolius how is that related to Portainer? You might want to ask this question in a Docker/Gitlab channel instead.. > Maybe there is a problems with using Portainer as/for docker registry ?\nPortainer DO NOT act as a Docker registry (not like Harbor). What are you trying to achieve with Portainer?. Added in 1.20.0 via https://github.com/portainer/portainer/issues/1945. @wernerbarnard https://github.com/portainer/portainer/issues/1649 :-). Thanks @mstansberry  :+1: . @xAt0mZ please have a look at this one when you can.\nEndpoint status update should only be done via snapshots.. @xAt0mZ can you confirm that there is no endpoint status update from the frontend? I'll have a look at why the proxy returns 503 when the associated endpoint should be up and running.. @xAt0mZ \nI think that there is a status update request done in the frontend:\n\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/interceptors/endpointStatusInterceptor.js#L25\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/interceptors/endpointStatusInterceptor.js#L35\n\nBased on this part of the specs for this feature:\n\nWe'll now use the backend as the single source of truth to determine if an endpoint is up or down. The endpoint status is updated during snapshots and thus the snapshot will act as the heartbeat feature.\n\nThe frontend should not update the status of the endpoint, only use snapshot data when needed.. Can you guys give a try to portainerci/portainer:fix2556-frequent-offline-mode, it should solve the problem.. @Greatsamps I do not think it is related to this issue. Please open a new bug report and give us more details about your env and share the logs.. @Greatsamps are you running the latest Portainer build that include this fix? either via portainerci/portainer:develop or portainerci/portainer:fix2556-frequent-offline-mode ?\nHave you refreshed the endpoints in the home view via the refresh button ? Can you tell me what's the snapshot interval value your Portainer instance settings?. Might be related/duplicate of #2552 . Will close as a duplicate of #2552. Hi @artisticcheese \nWe do not support 1809 images yet.\nWe have an issue when rebasing on 1809 image using @StefanScherer rebase-docker-image tool, I'll open an issue inside his repository.\n. https://github.com/StefanScherer/rebase-docker-image/issues/5\ncc @ssbkang . Portainer 1.20.1 and Portainer agent 1.2.1 will be released this week.. Yes, we will try to publish 1809 images based on the updated version of the rebase-image-tool\nhttps://github.com/portainer/portainer/issues/2558#issuecomment-450656493. Thanks for the info @StefanScherer :+1: . @hasan419 sorry but this is not a Docker support channel, you'd be better asking questions related to windows/docker inside a Docker support channel.. FYI portainer agent version 1.2.1 has been released and should be compatible with Windows 1809. Portainer 1.20.1 coming soon.. Going to investigate this one, keep you posted. @mmgil can you try to run it as a standalone container ?\ndocker run --rm -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine portainer/agent\nI wonder if it's an issue on Windows 1809 and/or if it's related to Swarm.. Yeah the agent must be part of an overlay to work in a Swarm but thanks for the input anyway ! I'll investigate the cause of the issue.. @olljanat thanks for the help/diagnosis\nFYI I'm thinking about changing the IP retrieval algorithm soon. The cause is definitely coming from here, although I'm curious about what makes @mmgil's setup \"non-standard\".. Good to know, still, we'll want to update the current IP retrieval algorithm to something that would be more stable.. Portainer 1.20.1 is out and can be deployed on Windows 1809.\nThanks to everyone for their contribution.. @ssbkang could you have a look? . Sorry @mohammadreza-soft74 but you probably want to ask this question in a Docker support channel instead.. Replaced with #2642 \nThanks for the contribution @weskey007 :+1: . Just to confirm, everything in Portainer works except the container console?. Would you guys be keen to try the following agent preview image? It should contain a fix for this issue: portainer/agent:fix45 (linux amd64 only). This fix has been merged in the agent codebase and will be available as a part of agent 1.2.1 release.. @MordantWastrel are you using the Portainer agent as well?\nEDIT: This log line makes me think that your reverse proxy (Nginx) configuration might be stripping some required headers:\n11:33:00 websocketproxy: couldn't upgrade websocket: the client is not using the websocket protocol: 'upgrade' token not found in 'Connection' header\nPlease ensure that your reverse proxy configuration do not override/remove headers.. @MordantWastrel just ensure that your reverse proxy configuration allows the usage of the websocket protocol.. #122 is related to the container creation feature, not to the templates. This would be a feature request as it's not supported at the moment.. Hi @Kris-ping \nCan you tell which version of Portainer you're using? It can be found in the Portainer container logs and in  the UI (sidebar, bottom left).\nAlso, how did you deploy Portainer?. Closing this one as the documentation will be available on our docs for version 1.20.1.\n@Duvel @javierma14 \nIn the meantime, you can find the documentation for this here: https://portainer.readthedocs.io/en/latest/agent.html#enable-host-management-features. Hi @reedv \nSounds like permissions issues, can you create folders inside C:\\ProgramData\\ ? You might want to use another destination folder.\ncc @ssbkang \n. This issue is actually more related to Docker on Windows than Portainer. When bind-mounting a folder via -v C:\\Users\\rvillanueva\\Desktop\\ProgramData_TEST\\Portainer:/data, Docker should take care of the creation of the C:\\Users\\rvillanueva\\Desktop\\ProgramData_TEST\\Portainer on the host.\nMight be worth adding a note about this in our documentation though.. Keeping it open to add a note in our docs.. I believe that an alternative way of doing this would be to create a container template? Would that be enough for you/your teams?\nIf not, we could also enhance the container-creation view to actually save the current configuration as a template instead of simply creating the container.. Great, we can close this issue then.. When accessing the extensions view, Portainer will fetch extra details about the extensions from an external source (think of it as our \"external store\"). If the instance cannot retrieve this list, it will fail with the Unable to retrieve extensions error message. \nWhen accessing the registries view, it will only retrieve \"local\" extension info (from the database, without retrieving any content via Internet) so you should not see this problem. FYI I'm not able to reproduce this error in the registries view within an offline environment.. Hi @SMARoovers \n@wangkai1994 issue is mainly related to being unable to query the endpoint after updating the settings but I'm pretty sure this problem is actually related to https://github.com/portainer/portainer/issues/2556\nWhat's your issue?. Hi @devinant \nCould you confirm if the following Portainer image fixes the bug? \nportainerci/portainer:fix2580-ldap-password-update. How did you deploy Portainer and the agent? Did you follow the instructions at https://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster ?. @ransunak I will close this one as I think it is a duplicate of https://github.com/portainer/portainer/issues/2556\nFeel free to comment in 2556 or to re-open this one if you think it's not related.. I don't think this is a bug.\nYou cannot set the attachable flag on a \"Macvlan configuration network\" but you can set it when creating a macvlan network using an existing configuration.\nI.e to use this, you'd need to:\n\nCreate a macvlan network configuration\nCreate a macvlan network from the previous configuration\nToggle the attachable flag\n\nClosing this issue, feel free to re-open/comment if you think we're missing something.. From the docs at https://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\ncurl -L https://downloads.portainer.io/portainer-agent-stack.yml -o portainer-agent-stack.yml\nWe'll update the tooltip in the endpoint creation view.. Closing as a duplicate of #2054 . Not really related to Portainer, you should ask your question in a Gitlab support channel instead.\nFYI,  yes, we're using the official gitlab image.. We'll upload the binaries soon.. Binaries are now available, sorry for the late update.. Rolled back via #2747 . Try yarn build instead.\nFor any contribution/development question, feel free to reach out our community support on Slack: https://portainer.slack.com. @javierma14 you're not using the correct yarn binary. \nHave a look at https://yarnpkg.com/lang/en/docs/install/#debian-stable. Is this based on #2565?\ncc @chiptus . Closing as this is now part of #2565 \nThanks @hiyao . Thanks for the detailed report @dbellingroth \nThis sounds like an issue with the DNS resolution with Swarm, I'll keep this issue open though just in case other users want to report the same problem.. Hi @MineHarry01 \nHave you looked at setting all the required capabilities when starting the container? I encourage you to have a look at the Docker documentation for this.\nPortainer only manipulates the Docker API to create containers, if the container creation option is missing, please specify which specific option you're missing.\nFeel free to re-open if needed.. As specified in https://github.com/portainer/portainer/issues/2592 I think that you're using the wrong yarn binary.\nAlso, for any questions about how to build/contribute to Portainer, please reach out to our community support at https://portainer.slack.com. I believe this is a duplicate of https://github.com/portainer/portainer/issues/1753\nNot possible yet but it's in our plans.. I'm thinking that this issue is actually related to https://github.com/portainer/portainer/issues/1533\nThanks for the report, we're aware that Portainer do not really interact well with AWS and we'll investigate a solution for this.. If I understand correctly, this is a duplicate of https://github.com/portainer/portainer/issues/2552\nFeel free to re-open/comment if I'm mistaken.. Sorry but you'll want to ask this question directly in a Docker support channel, we don't have the bandwith to help you with Docker support.\nIf this request works when executed directly against the Docker API (TCP exposed daemon for example), please specify that it's not working when using Portainer and in this case we'll consider this issue.\n. Hi everyone, we're working on 1.20.1 that will include fixes to annoying bugs. No ETA yet, I'd recommend joining our community support at https://portainer.slack.com where we'll keep you updated.. @wangkai1994 this is not something that I will approve without knowing the potential impact that this could have (we're talking about using a 20MB buffer in console usage, 10 times what's used at the moment, I'm curious about the potential resource usage impact).. @till \nThanks for reporting this, FYI defs are located in https://github.com/portainer/portainer/blob/develop/api/swagger.yaml. @chiptus you've been able to reproduce this bug using the Docker CLI ? What version of Docker are you using?. Using network name as an identifier might be a way to work around this problem.. Hi @JoJordens \nCan you share the logs of the Portainer container ?. Ok that is a duplicate of https://github.com/portainer/portainer/issues/2556\nThanks for the detailed report.. @JoJordens are you using the latest version of the agent?. Are you still seeing these Unable to query endpoint errors in the logs? How did you deploy Portainer and the agent?. @wieshka @brentco would you be able to test the following image and tell us if it fixes the issue?\nportainerci/portainer:pr2561 (linux amd64). Thanks for the feedback @brentco . We can actually close this one as a duplicate of #2552 . I believe this would happen if the actual status of the endpoint differs from the snapshot. Can you trigger a snapshot refresh in the home view and try to access the endpoint again?. @strawgate that could fix the issue but not in all the cases. It's still recommended to enable the snapshots.. @strawgate on a fresh install a snapshot is triggered at endpoint creation. Not with the --external-endpoints option though, but this flag is a bit buggy at the moment. Where you reporting your last problem on a fresh install using this flag?. @Codelica seems that we're missing the documentation for the following API endpoint:\n\nPOST /endpoints/snapshot: triggers a snapshot on all the endpoints. Could be related to #2556 \n\nWas merged in develop, a potential fix is available in the following preview image: portainerci/portainer:fix2556-frequent-offline-mode. Could you give it a try to tell us if its the same problem as #2556?. Yes, this is probably a duplicate of #2556 \nThanks for the quick feedback. @ruudboon there is no need to update the agent to fix the issue reported in #2556 \nYou might be hitting a different problem, please open a new bug report and give us as much details as you can.. Hi @amirakhan \nYou can use Portainer user access control policies to achieve what you want. For example, when a regular user creates a container he can restrict the access to this container to himself or to one of the team he is a member of.\nOn the other side, an administrator user can get access to all the containers.\nWe do not have granular access control policies yet (can start, can stop, can read logs...) but this will be available early this year via an extension.\nIf you have any other question, you can also join us in our community support channel at https://portainer.slack.com\n. Yes, you can give access to specific endpoints via endpoint access policies and endpoint group access policies.\nWhen a user is authorized to access an endpoint, he'll be able to create a container inside it and choose a resource access policy for this container.\nThis is done via the Access control field in the container creation form:\n\n . I'm thinking about keeping the failfast feature. We should probably review the usage with --external-endpoints instead.. Hi @marcel-st \nPortainer do not send a ping via the ICMP protocol, it simply uses the Docker API ping endpoint. What error do you see when you're trying to add a new endpoint into Portainer? Can you share Portainer logs with us?. Hi @xcbeyond \nYou can find contributions instructions at https://portainer.readthedocs.io/en/stable/contribute.html\nFor more information on how to contribute, feel free to ask any question in our community support channel via slack: https://portainer.slack.com. yarn start should start the dev server and you should be able to access the dev webserver on port 9000.. @javierma14 you'll want to stop any existing Portainer container that could cause a conflict if the port 9000 is already used.\nOtherwise you can tune this in the gruntfile.js file.. Hi @fenchu \nYes, this would be possible although it would require you to use a websocket client and the /api/websocket/exec API endpoint.\nThis endpoint expects two parameters, an execID representing the ID of an exec that has been created beforehand via the Docker API (see https://docs.docker.com/engine/api/v1.39/#operation/ContainerExec) and an endpointId representing the ID of the endpoint where the container is located. These parameters must be passed as query parameters e.g. /api/websocket/exec?execID=ewo2ikj34dso3qp123&endpointID=1\nI'll keep this issue open to add more info about it in the swagger docs.. Should be replaced with https://downloads.portainer.io/agent-stack.yml. Here's an entrypoint for network creation for example: https://github.com/portainer/portainer/blob/develop/app/docker/views/networks/create/createNetworkController.js#L86. Hi @mcrosson \nRegarding your first question you can usually find these in the rest/ folder of the corresponding module.\nBackend should not remove empty labels, I'll check that.. @xAt0mZ is this still a work in progress?. I think that this is no supported by Docker yet https://github.com/docker/swarmkit/pull/2691\ncc @olljanat for more info. @remy-tiitre indeed this is not supported yet, it can only use public Docker images at the moment.. Be wary, we do not recommend disabling Portainer authentication.. Hi @mcrosson \nSorry for the late review ! I believe this is working fine:\nContainer labels in container-details view:\n\nContainer labels when duplicating the container:\n\nWhat's wrong with the extractJSONField function in the backend?. I'm not really sure that I understand what you mean, do you expect to be able to serve Portainer frontend files via a webserver?\nWhat about the Portainer API? Frontend cannot work without it.\nI'll close this issue but feel free to comment if I'm missing something.. Hi @rucksman \nThis seems particulary specific to your reverse proxy configuration, have a look at the following issues that might help:\n\nhttps://github.com/portainer/portainer/issues/2654\nhttps://github.com/portainer/portainer/issues/1646\n. I'll keep this one open for the ability to display stats for multiple containers.\n\nSecond request is related to #335 . Hi @hilschernetpi \nI'm pretty curious about your use case, are you leveraging Docker API through Portainer API to orchestrate your Docker management?. Hi Armin, thanks for the detailed response.\nCould you share with me an example of an API request that is failing for you?. Hi @hilschernetpi \nI am not aware of the Node-RED tool. I can see what your problem is I think I just wanted to check if you had access to the specific HTTP request that is failing to help me reproduce it.. @ncresswell can you validate this functionally ?\nportainerci/portainer:pr2664. cc @xAt0mZ . cc @ncresswell image updated. Thanks @dang3r :+1: . Hi @michaelbinks \nJust to confirm, did you update the portainer-agent-stack.yml stack file?\nThe following error seems to indicate a strange DNS issue in your Docker environment:\ndial tcp: lookup tasks.agent on 127.0.0.11:53: no such host\nIt seems that the Portainer container cannot resolve tasks.agent that should be a DNS entry created by the Docker DNS.\nCan you give us more details about your Swarm deployment? I wonder if there is a potential network issue between your Swarm hosts.\nThis comment might also be helpful: https://github.com/portainer/portainer/issues/2535#issuecomment-457380769. Hi @alexsandro-xpt,\ncan you see the same errors in the agents logs?. Ok @michaelbinks thanks for the report, I'll close this issue.. Potentially an issue with https://github.com/src-d/go-git\nNeed some investigation in the library repository to check if the issue is already reported here.. Hi @WnP \nFeel free to open a PR for this.. Pretty good recap, thanks @xAt0mZ !\nHere are the points I'm curious about:\n\nHow can you use try/catch and await to replace a block leveraging promise chaining?\n\njavascript\n myservice.promise()\n .then(function onSuccess1() {return myService.promise2()})\n .then(function onSuccess2() {})\n .catch(function onError() {})\n\n\nRegarding dependency injection, I think it's a good idea to leverage the babel annotate plugin. Is it part of https://github.com/portainer/portainer/issues/2344 yet?\n\n\nAbout classes definition in a single file or class file + index, how many index.js files would you need to maintain? One per module? What are the pro/cons for each one here? It looks like to me that keeping the code in a single file is easier to read.\n\n\n. Still on the try/catch, await, using the following snippet:\njavascript\ntry {\n    await myservice.promise();\n    await myService.promise2();\n    // onSuccess2() content\n} catch (err) {\n    // onError() content\n}\nWould it be possible to handle errors for myservice.promise() and myservice.promise2() separately? This is kinda cumbersome to achieve with promise chaining.\nLet's give a try to the babel annotation plugin in #2344 . That await-to-js error handling looks much cleaner.. Regarding the last pain point:\n\nAlso we need to reorganize the code as it's becoming messy and sometimes finding a specific file becomes painfull ( components folder growing over and over, for example)\n\nI think that we can already prepare a small frontend refactor/migration plan. As we discussed previously, we could create a new \"sub-module\" architecture.\nAt the moment the app is separated into 5 main modules:\n\napp\nagent\nazure\ndocker\nextensions\n\nWe could introduce new sub modules into each of these modules that would be resource scoped (e.g. in the docker module, create the containers, images sub-modules... in the portainer module, create the users, teams submodules...).\nNow as for the proper architecture/filesystem layout of these new sub-modules, I'll try to come up with suggestions later on today.\n. Just curious about that last update and the reason we need the bind call:\njavascript\nthis.editorUpdate = this.editorUpdate.bind(this);\nFor example so far we've been able to declare functions associated to the controllers without using bind:\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/components/endpoint-selector/endpointSelectorController.js\nAnd we were able to use these in the associated HTML template:\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/components/endpoint-selector/endpointSelector.html. HI @fi0 \nThis is not available in Portainer yet.\nPossible duplicate of #2045 / #571. Duplicate of #2020 . Documentation for building Portainer will be updated soon.. Documentation updated via https://github.com/portainer/portainer-docs/commit/41e32f20bf51deaa72465d50de63b8800d8d3c8e\nAvailable at: https://portainer.readthedocs.io/en/latest/contribute.html. @ssbkang can you try to reproduce this one?. @ncresswell thoughts on adding this feature?\nCan be tested via portainerci/portainer:pr2684. Thanks @linquize :+1: . Hi @rjbaat \nWe might have a fix for this, can you try the following preview image? portainerci/portainer:fix-repositories-requests. Could you try to leverage the Docker API over TCP instead of using the Windows named pipe and try to replicate these instability issues? I'd like to know if the root cause is related to named pipe communications.. Note that it is not recommended to mix package managers. We recommend the usage of yarn.. Thanks @linquize :+1: . This is something we can explore although I'm not sure about the result UX wise because that would create a mass of links on the home view. We'd probably need to review the \"endpoint element\" UX/UI design because at the moment it is designed to display information and have a simple interaction (that is click on it to access the endpoint management features).. It does not make sense to only give the user to get into containers and images, if we go this way it makes more sense to actually allow the user to access all associated resources (services, containers, networks, images...)\nAnd that's where I think that it might impact the UX.. I totally understand what you're asking for, it's just that it do not make sense for me to only make these 2 parts clickable.\nI'm pretty sure that if we enhance the UX with this suggestion, somebody will just open an issue to request the ability to click on other resources as well.\nOverall the feature request make sense, it's just a matter of UX design.. What's wrong with the downloads.portainer.io service? It's running fine.. We'll investigate the connectivity issue. . Could be related to your network settings, we're not able to reproduce the issue here.. Are you using the portainer agent?. @Yumash your problem is actually related to https://github.com/portainer/portainer/issues/1867. Duplicate of https://github.com/portainer/portainer/issues/1867. Duplicate of #1534 . Hi @Yumash,\ncan you give us more information about your environment (provider, docker version, OS...). Thanks, how many nodes do you have in your cluster?. How did you deploy Portainer?. And you deploy the agent manually?. @TimvdEijnden \nwhat about:\n\nI think that we should hide the \"Delete this network\" button for each predefined networks in the network-details view too.. Thanks @TimvdEijnden :+1: . Yes the root cause is the redirect=portainer.auth part, this has been fixed and will be part of 1.20.2.. @xAt0mZ most of the time it needs to retrieve the Endpoint identifier in the state, thus the introduction of https://github.com/portainer/portainer/pull/2601. > I also add redirect to portainer.init.admin on login page (after clean install portainer again)\n\nIs this useful?. Thanks @linquize :+1: . I'll try to check this as soon as I can but I'm a bit unsure about the benefits of merging this. I wonder if it could cause potential issues on older browsers. The feature is working at the moment, if it ain't broken don't fix it right?. @gokaygurcan it does ! Could you open an issue to report this bug and link it to this PR? \nWe usually report and investigate bugs via issues.. Hi @yuklia \nIt seems that you're trying to connect to a Docker host that is protected using TLS.\nHave a look at the following documentation on how to connect to an endpoint that is secured via TLS when deploying Portainer: https://portainer.readthedocs.io/en/stable/deployment.html#declaring-the-docker-environment-to-manage-upon-deployment\nClosing this issue, feel free to comment/re-open if you need any more help.. This http: proxy error: tls: oversized record received with length 20527 means that Portainer is trying to talk HTTP to a service exposed over HTTPS.. @r7l please only report bugs and feature requests here.\nFor any Portainer usage questions, please join our community channel at https://portainer.slack.com. Hi @pfnunes15 \nPlease have a look at our official documentation for more information regarding how to deploy Portainer: https://portainer.readthedocs.io/en/stable/deployment.html. Portainer image is based on scratch, thus there is no other binaries available in the image other than the one required to run portainer.. While I agreed previously to bump the buffer size from 1024 to 2048, I'm not keen to multiply this value 5x without knowledge of the potential impact that this could have (resource usage)\nAs long as we can prove that bumping this value do not have any impact, I'll be ok to update the changes but that requires some time to investigate the problem.. Thanks @linquize :+1: . First version ready for testing.. @xAt0mZ you should be able to access the latest version of the Storidge API by rebuilding entirely your Vagrant environment.\nHere is the list of things we need to add/update for the next version of the Storidge integration.\nAdditions\n\n[x] Add support for the rescan features via a Rescan drives button in the drive list view\n\n\nBased on the following API endpoint:\nPOST /drives/rescan\nEnhancements\n\n[x] Add a new Add a node button in the node datatable panel that will display the current information text underneath it after clicking on it\n\n\n\n[x] Remove the ability to select nodes via checkboxes from the nodes datatable component and relocate the following action buttons to the node details view: Remove node, Enter maintenance mode and Exit maintenance mode.\n\n\nNote that the Enter maintenance mode button should be disabled if the status of the node is 'maintenance'. The Exit maintenance mode button should be disabled if the status of the node is 'normal'.\n\n\n[x] Update the icon color for the node status in the node datatables to yellow/orange when status is set to 'maintenance' (see comment in picture above)\n\n\n[x] Update the UX for the snapshot interval property in the profile creation to support a blank value. The suggestion here is to add an extra switch labelled Enable periodic snapshots right under the Enable snapshot switch to define a value for the snapshots. If the switch is not enabled, the snapshot interval property will be blank.\n\n\n[x] Update the UX for the snapshot interval property selection to use minutes instead of seconds\n\n\n[x] Replace the icon color of the cluster status label to red when the status is set to Alert\n\n\n\nBugfixes\n\n[ ] Fix a bug preventing the removal of a drive\n\nThe DELETE /drives/{drive-id} popup did not work in Portainer. However Postman was able to delete the drive. Please check Postman collection example.\n\n[ ] Fix a bug preventing the addition of a drive\n\nThe POST /drives returns \u201cFailure, unable to add Storidge drive\u201d. However Postman was able to add the drive so maybe the request body contents is wrong? Please check Postman collection example.\n\n[ ] Fix a bug causing an invalid request when trying to change the capacity of a volume\n\nPOST /volumes/{volume name|vid} to change capacity failed because of bad parameter, e.g. API sent `cio volume update -v foo --capacity 2000GB` when it should send `cio volume update -v foo --capacity 2000`, i.e. no \u2018GB\u2019.\n\n[x] Fix a bug causing an invalid request when trying to change a volume IOPS\n\nPOST /volumes/{volume name|vid} to change IOPS failed because of bad parameters, API sent `cio volume update -v foo --iopsmin %!s(float64=1000) --iopsmax %!s(float64=3000)` when it should send `cio volume update -v foo --iopsmin 1000 --iopsmax 3000`. New update:\nEnhancements\n\n[x] Disable volume snapshot retrieval when snapshot is not enabled for the associated volumes. Do not display the snapshots panel in that case.\n\nBugfixes\n\n\n[x] Fix the pagination on the drive list view to remember selected pagination filter on refresh\n\n\n[x] Ensure that the pagination filter is working correctly in all the views\n\n\n[x] Fix a bug associated to the \"Add to storage pool\" button\n\n\nRequest body seems to be the following:\njson\n{\"device\":\"none\"}\nWhereas it should be:\njson\n{\n  \"device\": \"/dev/sdr\",\n  \"node\": \"t1\"\n}. Thanks @nbaum :+1: . Have you checked https://lemariva.com/blog/2018/05/tutorial-portainer-for-local-docker-environments-on-windows-10 ?\nCould you try the following command?\ndocker run --name portainer --restart unless-stopped -p 9090:9000 -e TZ=America/Chicago -v /var/run/docker.sock:/var/run/docker.sock -v C:\\Users\\MyCould\\AppData\\Roaming\\DockerConfigs\\Portainer\\Data:/data portainer/portainer\n. I think that the problems come from your environment parsing the -v flag, we just need to find the correct format.\nOur closest successfull attempt was the following I think:\ndocker run --name portainer --restart unless-stopped -p 9090:9000 -e TZ=America/Chicago -v /var/run/docker.sock:/var/run/docker.sock -v \"C:/Users/My Cloud/AppData/Roaming/DockerConfigs/Portainer/Data:/data\" portainer/portainer:latest\ndocker: Error response from daemon: invalid mode: /data.\nNow, this command actually mix Unix (/var/run/docker.sock) and Windows (C:/Users/My Cloud/AppData/Roaming/DockerConfigs/Portainer/Data) file paths. \nThe following error message invalid mode: /data tells us that Docker is actually parsing a part of the data bind mount as the mode (format of the -v parameter is path_on_host:path_in_container:mode) and it's probably caused by the Windows path format. Docker interprets the bind mount as:\n\nPath on host: C\nPath in container: /Users/My Cloud/AppData/Roaming/DockerConfigs/Portainer/Data\nMode: /data\n\nNow, I never used Windows 10 and Docker Toolbox but since the Docker socket bind mount is working, just leverage a Docker volume to persist Portainer data:\ndocker volume create portainer_data\ndocker run -d --name portainer --restart unless-stopped -p 9090:9000 -e TZ=America/Chicago -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\nThat should work.. > when you mount it solely as a volume, then the data is actually kept inside the VM itself rather than outside of it on the host, right?\nI think so, but I'm not even sure that you can actually map data outside the VM with Docker toolbox. You'll want to request some support on a Docker support channel to solve this one.\nClosing as it's related to Docker rather than Portainer.. Can you tell us more information about your environment? (OS, platform, Docker version) as well as how did you deploy Portainer?. @Kris-ping what command did you use to deploy Portainer?. @Kris-ping probably not related to cookie, to confirm this you can try to access Portainer in incognito mode (private navigation in your browser).\nIn order to fully reset Portainer, you could try to clean your browser local storage (which is where Portainer persists local data in browser),  stop the Portainer container, remove Portainer data by executing docker volume rm portainer_data and then re-deploy it.. Can you give me more details about the cloud provider where your hosting this Portainer instance? We will need to try to reproduce.. No update on this topic yet.. Funny seems that Github keep a copy of the previous image to display it in my environment (https://camo.githubusercontent.com/c57e3786d84c99f21e453c6500d8e0333a2cf6d9/68747470733a2f2f706f727461696e65722e696f2f696d616765732f6c6f676f5f616c742e706e67)\nThis update is OK tho.\nThanks @montanaflynn :+1: . You can use the Build an image feature via Images > Build a new image to build an image from a tarball that is available on your machine.\nIt is not possible to use the docker-compose build equivalent directly into Portainer tho. You can ask any other questions in our community support channel: https://portainer.slack.com\n. Thanks for the detailed report, we'll investigate.. I'm sorry but I do not understand the request here. Could you be more precise on what you'd like to achieve?. @vboufleur there is no way to actually specify a configuration at startup time. We could add a flag similar to the --admin-password flag to allow the user to specify Dockerhub credentials on startup (something like --dockerhub-credentials username:password.\nYou could also leverage the Portainer API to initialize the Dockerhub credentials post deployment.. Hi @christianacca \nThanks for this detailed report. I wonder if this could be an issue with Swarm instead of Portainer as I don't see why one request would work and another would simply hangs. Both requests are actually leveraging Portainer proxy to the Docker API.\nAre you able to reproduce this problem by executing the request from a Linux node instead of a Windows node? Could be related to Swarm and Windows.. Hi @amirakhan \nAre you unable to use the container console with any container? Are you using a reverse proxy in front of Portainer?. Can you give us more information about the environment where Portainer is running? (OS, cloud provider...). Thanks for the details.\nCan you share the logs of the Portainer agent and of the Portainer instance with us?. You don't need to, you should be able to access the logs via docker logs <name of the portainer container>. Hi @javierma14 \nWe recently updated our build system to leverage the local Go environment to build Portainer. This means that you now need to have Go (>= 1.11) installed on your machine.\nSee the latest docs https://portainer.readthedocs.io/en/latest/contribute.html. Woops, we've updated the instructions recently but the changes were not reflected on readthedocs, can you try these instructions: https://portainer.readthedocs.io/en/latest/contribute.html ?. The problem probably comes from that step:\nexport GOPATH=`pwd`\nI'd recommend you to setup a proper GOPATH on your system: https://github.com/golang/go/wiki/SettingGOPATH. Nope, I'm pretty sure it's related to your go environment configuration as I am also working on Ubuntu 18.04.. @javierma14 ping me on slack and we'll try to resolve your problem.. I believe that https://github.com/portainer/portainer/issues/1257 would help you, note that this is not implemented yet.\nClosing this issue, you might want to continue the discussion in #1257 and feel free to comment here if we are missing something.. Hi @dfraser \nThanks for the detailed report, we'll investigate.\nSomehow related to https://github.com/portainer/portainer/issues/2556. > data is often unavailable in configuration and detail pages (endpoints, registries, logs, etc)\nDo you have a problem with all the views that are available under Portainer settings too ? E.g. endpoints, users, teams, etc.... And no message at all in the portainer container logs except the one you shared above?. Yes, snapshots are part of a background process that will gather information from your Docker endpoints periodically. If a snapshot fail, the backend will tag the associated endpoint as down. It seems that their is a potential networking issue here between your Portainer instance and these 2 endpoints.\nRegarding the Portainer settings view, this is not normal at all, this is basic HTTP communication with a local Portainer instance and retrieving this data should be instant. Maybe we could try to extract more information by inspecting the HTTP requests.\nCould you try to open the developer tools in your browser and inspect the HTTP requests that are failing in the Portainer settings views? . Hm yeah that could be related to Portainer connected to a high-latency environment or via an unstable network.\nAny failing HTTP requests regarding other API endpoints (/api/settings, /api/users, pretty much anything not related to /api/endpoints/1/docker). Hi @javierma14 \nHow did you deploy Portainer and the agent?. Could you try with the following link? Or can you share the content of your agent-stack.yml file with us?\ncurl -L https://downloads.portainer.io/agent-stack.yml -o agent-stack.yml && docker stack deploy --compose-file=agent-stack.yml portainer-agent. This is the cause of the problem:\n2019/02/21 17:31:21 [WARN] memberlist: Failed to resolve tasks.agent: lookup tasks.agent on 127.0.0.11:53: no such host\nIt seems that the Swarm DDNS is not working, thus the agent is not able to contact the other agent in the Swarm cluster to perform aggregation queries.\nThis is probably related to your Swarm setup/configuration though.. Hi @javierma14 \nNot really, we have Azure users and I believe they're not having this issue. Can you reproduce the same problem inside another cluster in Azure?. Well I cannot confirm this although I don't think that should be a problem. Can you tell us how to reproduce such as setup in Azure so that we can try to replicate the problem?. > installed portainer agent on manager node\nAgent should be deployed on all nodes in the cluster.. Did you deploy stacks with Portainer using a previous version? Looks like the stacks persisted in the database are corrupted. What's the output of docker stack ls?\n\nAlso, the login button nolonger logs you in. Have to hit refresh after clicking on login button to get it to log me in. (Using Chrome 69.0.3497.100 )\n\nThat's related to #2700 . Can you tell us what version you were previously using? Is the error still happening when rolling back to that version?. @Aphris-Karu you might be able to inspect the database file using https://github.com/hasit/bolter or https://github.com/br0xen/boltbrowser to inspect the stack entries.. @Aphris-Karu oh, I'm curious about what could have corrupt the database. I believe there is no way to fix a corrupted database unfortunately...\nManually editing the file using a text editor could work but might prove hard to do.. Currently the recommended way to backup Portainer is to copy the content of the /data folder (it can be archived).. Hi @gbhrdt \nUpdating a single service in the stack file and hitting update the stack should normally redeploy the updated service only and not all the services in the stack.\nBased on this behavior, I'm not sure that this feature request is actually needed.. @cyberlink1 how is it related to the ability to save a stack without deploying it? What prevents you from preparing the changes and using the \"Update the stack\" button during the outage window?. Maybe related to https://github.com/portainer/portainer/issues/1753 instead of #2731 ?. Hi @xme \nFrom the box where Portainer is running, can you connect to the remote docker instance using the Docker CLI ? via docker -H .... And what about running this container on the same host:\ndocker run -d -p 9000:9000 portainer/portainer -H tcp://xxxxx:2375. Hi @alphaDev23 \nI believe that you are the first reporting this problem. Can you give us more information about the stack that you're trying to deploy? I see that you're trying to deploy it from a git repository, how big is that repository? Can you try with another repository? Also, I'd recommend to use the latest version of Portainer (1.20.1) as we do not support 1.17.1 anymore.. Could be a bug in https://github.com/src-d/go-git\nMight be a good idea to search this repository for potentially related issues or create a new one here.. Hi @linquize \nCan you fix the minor linting issues reported in https://codeclimate.com/github/portainer/portainer/pull/2735 ?. Thanks @linquize :+1: . The original issue for discussing multi-language support is #807 \nNo ETA on this topic.. We'll need to investigate this as Portainer might require root access to be able to use /var/run/docker.sock for local endpoint management and the agent requires access to the /var/run/docker.sock file. \nThis could be potentially worked around but requires some configuration on the Docker daemon side too to allow another user to use these files.. Worth having a look at https://medium.com/@lizrice/non-privileged-containers-based-on-the-scratch-image-a80105d6d341. Thanks @linquize :+1: . As discussed earlier, I believe that a better alternative would be to support full information in the URL, such as /endpoints/1/docker/containers/containerId and then load all the state based on the URL.\nThis would allow to solve #454 as well as #724 \nI'll rollback the changes introduced for the current implementation of #724 via https://github.com/portainer/portainer/pull/2591 as it's not fully functional.. Hi @till \nPortainer uses a two-step method to list available stacks available in your Docker environment:\n\nFirst, it retrieves the list of stacks with total control (stacks that were created via Portainer and that are registered inside the Portainer database) using the /api/stacks API endpoint\nSecondly, it retrieves the list of external stacks by querying containers (in the case of a Standalone docker environment) and retrieve the stack names from the container labels\n. @till yes, this is the label used to retrieve externally created stacks.\n\nAnd for you last question you can't, externally created stacks are not referenced inside Portainer database therefore they don't have any identifier that can be use with UpdateStack operation. You'd need to register the stack into Portainer via the StackCreate operation first.. Agree that would be a nice enhancement, although some external tools do not allow passing parameters through the webhook body so maybe we should consider adding the tag as a query parameter ?\ncc @ssbkang . Hi @till \nWhen using the Portainer HTTP API to retrieve the lists of stacks available inside a Swarm enabled endpoint, Portainer will use the SwarmID filter property to retrieve the stacks associated to a Swarm cluster and not EndpointID.\nThus, you'll need to retrieve the Swarm identifier of your cluster first before being able to query the associated stacks.\nExample (based on https://gist.github.com/deviantony/77026d402366b4b43fa5918d41bc42f8):\n```\nGet SwarmID\nhttp GET :9000/api/endpoints/1/docker/swarm\nExtract \"ID\" from response\nRequest all stacks associated to this Swarm identifier\nhttp GET :9000/api/stacks filter=='{SwarmID: ID}'\n```\nClosing this issue as it should solve your problem. Please comment if we're missing something.. Hi @till \nYes, you can rely on the Snapshot information. Also, any call to /api/endpoints/X/docker/* is going to be proxied to the Docker API (that's why it's not documented in our documentation) which you can find documentation about here: https://docs.docker.com/engine/api/v1.39/. Hi @rainmanhhh \nDo you mean the equivalent of using the --sysctl flag when using the Docker CLI ?. @ssbkang can you reproduce this one?. I'll consider this as an enhancement but be wary that breaking changes could be introduced in minor versions and that you should always have a look at the release notes before upgrading.\ncc @ssbkang \nWe should think about this and update our  release pipeline.. Thanks @linquize :+1: . Could be related to the recent upgrade of the embedde Docker CLI binary via https://github.com/portainer/portainer/pull/2749. Portainer will default to the following files when the --sslcert or --sslkey flags are not defined:\n\n/certs/portainer.crt\n/certs/portainer.key\n\nWhat about making these files available in the /certs folder directly instead? Then no need to specify any other flag than the -ssl one.. You could create your secrets directly into /certs using the file mode: https://docs.docker.com/engine/reference/commandline/secret_create/. Yes, this would be our recommended approach for this. Closing the issue.. @alphaDev23 issues are a way for us to track evolutions and bug reports, we believe that we answered your question here or your feature request by pointing at a similar issue and decided to close this one.\nNote that you are still welcome to continue to comment on a closed issue, we can re-open if we're missing something.. Thanks @fabiang :+1: . @alphaDev23 #454 should cover your feature request by adding details about the endpoint (the endpoint ID) inside the route. Meaning that you would be able to retrieve the ID associated to the environment you currently manage by looking at the URL (e.g. /#/endpoints/1/docker/containers for example).. @alphaDev23 I'm confused.\nWhat are you trying to achieve here? Why do you need to know the details associated to an endpoint such as the identifier in the first place?. Thanks for the detailed explanation of your use case.\nThere is already a way to access the endpoint ID via the UI: it can be done by going to Endpoints and by inspecting an existing endpoint, the ID of the endpoint can then be retrieved from the URL (e.g. /#/endpoints/1).\nWhat #454 aims to bring is to support the endpoint ID in the URL to be able to share URLs to specific resources inside endpoints and as a consequence of this it will add another way to retrieve the ID of the currently managed endpoint via the URL.\nI believe that these 2 ways to retrieve the endpoint identifier should be enough. Also, you can add the endpoint through the API and parse the identifier straight from the response of the EndpointCreation operation via the Id field.\n\nAdding the endpoint via the UI, obtaining the ID via the UI, and then adding the endpoint ID to the env vars is the easiest.\n\nSo my recommendation here would be to go to the UI to create an endpoint, once the endpoint is created inspect it to retrieve the ID.\nI'm going to close this issue as I do not think this information should be added to any other existing views in Portainer and that there are (or will be via #454) enough ways to retrieve this information from the UI.\n. Should be Connected networks\n. This bugfix has already been merged in #324 you can remove it from the PR.\n. To be consistent with the service creation view, the placeholder for a var name should be com.example.foo\n. A fix has already been merged in #324, either pull and merge develop or update the PR.\n. Please keep using the $scope.config.HostConfig.NetworkMode variable to check the name of the selected network.  \nA test to validate the existence of the network named bridge is done on L88-90 (does not exists on Windows, so we use the nat) and this is ignored by your implementation.\nYou should create a field in the $scope.formValues object to store the value of the 'Container' field instead of $scope.network.Container (try to reuse the existing objects).\n. @Glowbal my bad, thanks !\n. I'm not sure if this is going to work with Swarm container names.\n. Not working with Docker Swarm (see my comment below).\nA condition should be appended here, if using swarm then the already defined filter swarmcontainername should be used.\nSee https://github.com/portainer/portainer/blob/develop/app/components/container/containerController.js#L16 for an example of the usage of a filter in a controller.\n. Could you remove that option from the gruntFile?\n. This is optional. You can actually remove it.\n. The test here should be if ($scope.swarm && !$scope.swarm_mode) which would be triggered only with Docker Swarm (Swarm detection algorithm should be reviewed and will be updated later, it's ok for now).\n. Replace text with Container labels. Replace text with container label. Replace text with Container labels. Why not use only $anchorScroll('selectedTemplate); ? There no need to inject $location then.. Sure, I tested with only $anchorScroll('selectedTemplate'); and it works well :-). I don't really like the introduction of a new div... could you test it further? I've tried the id=\"selectedTemplate\" on the row div and it is working well on Chrome and Firefox. On which browser did you have the issue?. The code to filter containers seems complicated, just re-use the same algorithm as in other places for now (till it's implemented on the API side).\nE.g. associate the containersInNetwork to the scope variable (you're defining one at the moment, but it's not used in the HTML template:\njavascript\nfunction (containersInNetwork) {\n  var containers = containersInNetwork;\n  if ($scope.containersToHideLabels) {\n    containers = ContainerHelper.hideContainers(containersInNetwork, $scope.containersToHideLabels);\n  }\n  $scope.containersInNetwork = containers;\n  // Remove the rest\n}\nAnd then iterate on it in the HTML:\n<tr ng-repeat=\"network in containersInNetwork\">\n              <td><a ui-sref=\"container({id: network.Id})\">{{ network.Name }}</a></td>\n              <td>{{ network.IPv4Address || '-' }}</td>\n              <td>{{ network.IPv6Address || '-' }}</td>\n              <td>{{ network.MacAddress || '-' }}</td>\n              ...\nYou'll also need to update the containerLeaveNetwork function.. You don't need to retrieve swarm related information as you don't use it in the HTML template. You can actually drop all the code related to setting the $scope.swarm_hosts and $scope.swarm_mode variables.\nAll you need here is:\njavascript\n  Config.$promise.then(function (c) {\n    $scope.containersToHideLabels = c.hiddenLabels;\n    getNetwork();\n  });. See my comment below, no use for this function.. There is no Id field in the container object so the link to the containers details view won't work.. Same here, the containerLeaveNetwork action won't work as there is no Id field in the struct.. > The containers in network from the network response is different as it is from the containers API endpoint. I can make the requested change, but that would mean we would have to filter out the information about a container for that specific network (e.g. IP address of that container in the network).\nThe content of the network.Containers will not be sufficient enough for the features related to this PR (you need the container ID to jump to to the containers details view and to trigger the leave network action, the ID is not included in this container object present in this array). \n\nThe alternative is to iterate through container. NetworkSettings.Networks to find the desired network and use the information from that. I feel that is overkill, since we already have the desired information and we only use the query for containers to fetch the labels and filter out the containers we want to hide.\n\nI do think it's an overkill too and agree with the fact that we should get the data from the network.Containers array, but you also need to add the container ID in that structure:\njavascript\n        containersInNetworkResult.forEach(function(container) {\n          var containerInNetwork = network.Containers[container.Id];\n          containerInNetwork.Id = container.Id;\n          containersInNetwork.push(containerInNetwork);\n        });. This does not allow a value of 0 for Parallelism.. Same as above, does not allow a value of 0.. Does not allow a value of 0.. I do like what you did here with the help text, but we need to apply some css on it as it's not really aligned with the labels/inputs.\n\nmargin-top: 10px; on the <p> elements should be enough.. Please just replace the TYPE variable with a lowercase name, e.g. type.. Same here, see my comment above.. I think we should display the node hostname here instead of the node ID (easier to read in the navigation breadcrumb).. Please use !== for the comparison.. I don't really like this solution. This problem is happening in other places in Portainer as well thanks for pointing it. I'll try to figure a better 'Angular' solution for this problem. In the meantime, please remove this check.. My work on this issue will be tracked in #522 . You should now use $scope.applicationState.endpoint.mode.provider to check the associated Docker provider.. Please fix the conflict in this file. EndpointMode service has been removed, please remove the dependency.. One important thing to notice is that state is case-sensitive. Also, this nodestatusbadge filter is actually used for Docker Swarm nodes AND Docker Swarm mode nodes. \nDocker Swarm nodes can have the following states:\n\nHealthy\nUnhealthy\n\nDocker Swarm Mode nodes can have the following states:\n\nready\ndown\n\nAnd maybe some other states, but they are undocumented.\nThis should be fine if you update (text == 'down' || text == 'unhealthy') to (text == 'down' || text == 'Unhealthy'). Use === for string comparison.\nif (text === 'down' || text === 'Unhealthy') {. Please don't remove this comment. Could you remove the changes to the TemplatesController ? It should not be affected by this PR.. Could you remove that console.log line please?. This is always triggered, see my comment above.. encodeSecret should be added in the $scope.formValues object. Otherwise, when binding it using ng-model on the checkbox, it will not be updated.\nSee: http://stackoverflow.com/a/23943930/1127536. Should be ng-model=\"formValues.encodeSecret\". Add an extra condition && applicationState.endpoint.mode.provider === 'DOCKER_SWARM_MODE'. Please replace list by query to stay coherent with the others REST services. . Should be Secret.query. Instead of manipulating directly the config.HostConfig.ExtraHosts object, please create an ExtraHosts array inside the formValues object (this is where the temporary objects are stored) and manipulate it here.. See comment above.. Use the formValues.ExtraHosts as your temporary object instead of this local variable. So you can remove this variable, iterate on each entry in formValues.ExtraHosts and directly push correct values to config.HostConfig.ExtraHosts.\n. Could you add an extra '.' at the end of the sentence?. Replace the label with 'Remove the image'. Do you think you could isolate the bootbox call inside a specific service ? Like ModalService ? This way if we want to get rid of bootbox later, we'll just have to change the implementation there.. It's possible to use $anchorScroll without the call to $location.hash(hash). Just use $anchorScroll(hash), this will not update the URL with the hash, but is that really useful ?. Use !== for the comparison against null.. Use !== for the comparison against null.. Use !== for the comparison against null.. Could you remove that console.log statement ?. I'd go farther when isolating the bootbox inside the ModalService. ModalService methods should be pretty abstract and should not know about the required fields. It should only expose a confirmationModal method with the things that can change inside a confimation modal (e.g. title, message, confirmLabel, cancelLabel and the success callback).\nSomething like ModalService.confirmModal('Are you sure?', Forcing the removal of the image will remove the image even if it has multiple tags or if it is used by stopped containers.', 'Remove the image', 'Cancel', function () { ... }). I assume this code is related to the centering of the modal. Have you tried to do it in the service directly ? See https://github.com/makeusabrew/bootbox/issues/166#issuecomment-104187324. I agree, this is OK for me.. @richardgoater interesting, what kind of inconsistent output? . Is it possible to get rid of glyphicon and replace the sorting icons by font-awesome icons? Just to stay coherent, we're using font-awesome everywhere except for these sorting icons :). Pagination values are the same for each table, could this be integrated inside the pagination directive?. Instead of using Image.create directly, please use ImageService.pullImage. It returns a promise and can be handled with .then() and .catch() to manage success/errors.\nSee https://github.com/portainer/portainer/blob/develop/app/components/endpointAccess/endpointAccessController.js#L42 for an example of how to handle the promise.. Please update the text to add some info about the ability to pull an image.. This has been introduced recently and need to be adapted.. Can you use the dot notation here? attrs.pagination. Please use !== for the comparison.. Please use !== for the comparison.. No need to introduce a scope variable.. Instead of using the limitTo filter, just use the truncate filter (with a value of 40, should be good enough).\nThis way we stay coherent inside the whole app.\n|truncate:40. Instead of using the limitTo filter, just use the truncate filter (with a value of 40, should be good enough).\nThis way we stay coherent inside the whole app.\n|truncate:40. No need to truncate here, as we're already using the hideshasum filter.. Use service.PublishedPorts here instead of service.Ports.. I don't like this logic being placed inside the model. Model should just assign fields from the Docker API to the model.\nThis part should be done in the Controller or Service. Maybe using a ServiceHelper.. Please use the form \nif (condition) {\n} else {\n}\ninstead of the short form.. Not sure about this as some networks are hard-coded using only names at the following locations:\n\nhttps://github.com/portainer/portainer/blob/develop/app/components/createContainer/createContainerController.js#L32\nhttps://github.com/portainer/portainer/blob/develop/app/components/createContainer/createContainerController.js#L98-L105\n\nThis might introduce some bugs as containers would sometimes be created using network by name and sometimes network by ID. \nAnother minor thing is that the network dropdown now defaults to an empty value as it's not capable to map the default value of bridge defined here https://github.com/portainer/portainer/blob/develop/app/components/createContainer/createContainerController.js#L32 to an ID.\n. Could you rename the variable manager_ip to managerIP to stay coherent with variable naming inside the project ?\nAlso, you do not need to assign it to undefined, so var managerIP; is just fine.. Looks like I forgot a <th> when resolving the conflicts, could you add it?. Use the === operator for the comparison.\nSomehow, this is not displayed anyway (the -). Could you fix this?\n\n. Instead of adding a new tab, could you put that into the Runtime tab?. The display/style of elements in the form has been updated recently, could you match the new style? \nHave a look at https://github.com/portainer/portainer/blob/develop/app/components/createContainer/createcontainer.html#L414-L442 for an example.\nPlease re-use keywords such as \"add device\" instead of \"device\". Also replace the minus icon to delete an entry with the trash (see the example above).. Small change here to stay coherent within the UI: host (lowercase) instead of Host path.\n. Small change here to stay coherent within the UI: container (lowercase) instead of Container path.\n. Please fix the indent.. Thanks for fixing the typo !. I'd rather see the validation in the cli.go file, see ValidateFlags method.. I think that the password format should be without the admin: part (this flag should not be locked on htpasswd format).\nA user will be able to generate a password using httpd htpasswd -nb -B admin password | cut -d ':' -f 2.. ReplaceFailing Streak with Failure counts.. Replace This container have a Healthcheck with This container has a health check. Remove that empty line.. Fix the indentation here.. You should merge latest develop branch into your repository first. toastr is now used instead of gritter.. See my comment above.. Same for this section.. Please add defaults flags for Windows in the api/cli/defaults_windows.go file.. Rename /certs/server.crt to /certs/portainer.crt.. Rename /certs/server.key to /certs/portainer.key.. Change SSL support to Secure Portainer instance using SSL.\n. Change SSL cert to Path to the SSL certificate used to secure the Portainer instance. Change SSL key to Path to the SSL key used to secure the Portainer instance. Failure counts instead of Failing counts here please? :). Also replace Force remove the containers with Remove.\nRemove the extra , at the end of the line.. Replace Some selected containers are running. Please confirm your action with You are about to remove one or more running containers.. What's the point of enabling the force parameter when the container is running only? IMO, it should always be equal to true. Force removing a stopped container is equivalent to removing a stopped container. It will only take effect when removing a running container and the modal will ask for confirmation.. Force parameter in the remove function should be optional, see my comment below regarding the value of the force parameter.. Should be Container.remove({id: $stateParams.id, force: true}, function (d) {. I do not like the fact of managing the number of running items in the state. I'd rather iterate through the list of selected containers when clicking on the remove action to see if there is at least a running container and then display the modal box.. See my comment above on managing the number of running containers in the state.. Ahem, Failure count (I know, my bad :)). What do you mean? Do you have an example?. Please rename var to isOneContainerRunning.. Change label value to Remove. Change message content to: You are about to remove a running container.. Remove the extra ,. You can actually use the ModalService.confirmDeletion method instead of ModalService.confirm here.. You can actually use the ModalService.confirmDeletion method instead of ModalService.confirm here.. I think we should keep the term 'Remove' as it's the term used by Docker. Just update the button label in ModalService to Remove instead of update.\n. Could you change the placeholder value to e.g. 172.20.0.7 instead of (Optional) e.g. xxx.xxx.xxx.xxx ?\n. Could you change the placeholder value to e.g. a:b:c:d::1234 instead of (Optional) e.g. xxxx:xxxx::xx ?\n. Use class instead of ng-class here. Otherwise the icons are not displayed and an error is raised in the Javascript console.. Same here, see above.. Name should be changed to confirmContainerDeletion. Remove the extra comma here. See the codeclimate issue here, you can probably use .bootbox-form .bootbox-input-checkbox instead of form.bootbox-form input.bootbox-input-checkbox.. I'd rather see true|false instead of 0|1 for boolean values.. The box.css part should be refactored in a function to avoid duplicated code.. A generator function should be used to avoid duplicated code for the generation of the buttons object.. This should not be located inside the ContainerViewModel object. It should not be coupled with endpoint data.. See below, the container model should not be tied to endpoint data. I think that the URLPublish should be stored in the controller scope (state object) and used in directly the view.. This should not defaut to 0.0.0.0 here as the user may have configured its Docker daemon using the --ip flag. Docker doc reference: https://docs.docker.com/engine/reference/commandline/dockerd/#options\nFrom what I understand, the only case where EndpointProvider.endpointURLPublish() would not be defined is when we create an endpoint using EndpointService.createLocalEndpoint(), right?. Instead of assigning 0.0.0.0 to the URLPublish if it is not defined in the EndpointProvider you should use p.host if URLPublish is not defined here.. Replace tooltip message with URL or IP address where exposed containers will be reachable. This field is optional and will default to the endpoint URL.. See comment above about tooltip message content.. Please remove that comment.. Is it useful to loop through the result here? I'm guessing that there is only one entry in the results so we can access it directly through result[0].. What's the point of the ternary operation here? cleanAssociatedVolumes should contain a boolean value and will always be defined.. See my comment above about the ternary operation.. See my comment above about looping through the results.. Please rename boxcss to applyBoxCSS.. I do not like this, it should be a check to determine if URLPublish is defined otherwise use p.host.. I do not like this workaround here (and the one in the containers view to determine if the URLPublish is defined). Update the API to allow URLPublish to be undefined (see my first comment).. When creating a local endpoint, do not set URLPublish.. See my comments, URLPublish should be undefined for local endpoints.. You can make the field optional by specifying valid:\"-\" here.. Ah, that's ugly. From what I can see in the bootbox documentation for prompt, we should be able to directly use result value: http://bootboxjs.com/examples.html#bb-prompt-dialog. Oh, right. We'll need to move that to a ContainerService later on. Keep it like this for now.. In order to workaround that loop through results thing, would that be possible to transform the input-checkbox from bootbox using the switch css rules?. Ah, OK. I see, I really don't like this solution. Would it be possible to have only one checkbox (generated by bootbox using inputOptions and change the css of that checkbox ? See my comment below regarding css rules.. Regarding the css update, I'm talking about removing the switch here and try to replace the checkbox inside a bootbox using the existing switch css rules.. Can the result be accessed using result only instead of result[0] ?. Could we use 1 as a value here instead of '1' ? This way we could remove the usage of the boolean cleanAssociatedVolumes and use the result directly (see comment above). Instead of using cleanAssociatedVolumes, we can initialize an integer with 0 value and use the value of the result (1 if checked) directly. Without having to use that workaround: v: ($scope.cleanAssociatedVolumes) ? 1 : 0. Please replace the text 'Automatically clean associated volumes' with 'Automatically remove non-persistent volumes'.. Please replace the text 'Automatically clean associated volumes' with 'Automatically remove non-persistent volumes'.. Now that I think about it, why is the text declared here and in containersController.js line 246? This could be centralized directly in the service.confirmContainerDeletion method in modalService.js.. Replace Messages with Notifications otherwise an error is raised when creating a secret.. A new entry should be added in the quick navigation menu.. I'm not fond of having to add an extra :page_anchor parameter here.\n. Instead of using this hack and $location.path could we use $location.hash and $anchorScroll ? \nSomething like: \n$scope.goToItem = function(hash) {\n  var newHash = hash;\n  if ($location.hash() !== newHash) {\n    $location.hash(hash);\n  } else {\n    $anchorScroll();\n  }\n};\nAs presented in the second example here: https://docs.angularjs.org/api/ng/service/$anchorScroll. Then just call $anchorScroll() here instead of that condition, and it should automatically scroll the hash when the page is refreshed.. The checkbox is not working anymore. It's working, but the model change is being triggered twice:\n\nOn click on the checkbox, the model is updated\nThe ng-click in the <tr> is triggered and the model is updated again. Sorry for my late response.\n\nI don't think there is a need for a direct access to a page anchor, what would be the goal here? Who's going to type the full URL to a service (including the service ID) ?\nI also think that location.hash(hash) set the hash in the URL, we might need to add id on elements in the page though.. Could you update the ng-class so that the interactive class is always added ?\nE.g. ng-class=\"{ active: container.Checked, interactive: true }\". @eliat123 yes I agree but you do not need to add this as a state parameter. You can set the hash in the URL with $location.hash(<HASH>) and then call $anchorScroll() to automatically scroll to that hash.\nNote that we will need to add id= on each HTML component that we want to be able to scroll to (e.g. networks, ports, etc...) \nSee my comment below for a code example.. Ok have a look at https://github.com/portainer/portainer/commit/b42272cd1223634133f67b2e818f15fd72b6c809\nThis is an example on how to use $anchorScroll() to automatically scrolls to element with IDs.\nThis way you can use: http://portainer.domain:9000/#/service/ID/#networks to access networks for example.\nAnd then you can use $location.hash('networks') to scroll to the network element programmatically.\n. Instead of creating a new panel, could you try to insert this feature inside the existing Connected network panel? Below the network table would be fine I think.\n\n . So I've been able to test it again, it's working well. But could you remove the :page_anchor parameter from the service state?. I agree with that.. The service-resources id should be placed on the service specification panel located in app/components/service/includes/resources.html instead of container-specs.html.. Can you review the col-sm on each attribute here? The total should be 12. See the actual result on a 768*1024 device.\n\n. Why do you remove some chars from the name?. Is this part ok or still a WIP ?. There is a problem here, please fix it otherwise the app won't run.. When I played with it, the following error was raised in my Javascript console (when editing a container started with docker-compose).\nRelated to d.NetworkSettings.Networks[$scope.config.HostConfig.NetworkMode].IPAMConfig.IPv4Address\napp.5633a12c.js:119 TypeError: Cannot read property 'IPv4Address' of null\n    at app.5633a12c.js:8204\n    at app.5633a12c.js:381\n    at app.5633a12c.js:132\n    at m.$eval (app.5633a12c.js:147)\n    at m.$digest (app.5633a12c.js:144)\n    at m.$apply (app.5633a12c.js:147)\n    at l (app.5633a12c.js:99)\n    at K (app.5633a12c.js:103)\n    at XMLHttpRequest.N.onload (app.5633a12c.js:104). Again for container created with compose, name is not pre-loaded. Also, why that replace function?\nOriginal name:\n\nAfter clicking on edit:\n\n. Instead of using Container.remove and callbacks to ResourceControlService and createContainer, I want you to use ContainerService + promise chaining here.\nYou can use ContainerService.remove() to remove the container as well as its associated ResourceControl, no need to try to remove the ResourceControl after the container.\nAbout the promise chaining, the code should be something similar to:\n$('#loadingViewSpinner').show();\n    var container = $scope.container;\n    ContainerService.remove(container, true)\n    .then(function success(data) {\n      return ContainerService.createAndStartContainer(config);\n    })\n    .then(function success(data) {\n      var containerIdentifier = data.Id;\n      var userId = Authentication.getUserDetails().ID;\n      var resourceControl = container.ResourceControl;\n      return ResourceControlService.createResourceControl(resourceControl.AdministratorsOnly,\n        resourceControl.UserAccesses, resourceControl.TeamAccesses, 'container', []);\n    })\n    .then(function success(data) {\n      Notifications.success('Container successfully re-created');\n      $state.go('containers', {}, {reload: true});\n    })\n    .catch(function error(err) {\n      Notifications.error('Failure', err, 'Unable to re-create container');\n    })\n    .finally(function final() {\n      $('#loadingViewSpinner').hide();\n    });\nThis will remove the container, create another container and apply the same resource controls.. You can remove this function, see my comment above about promise chaining.. No need for this, resource control is managed on creation inside the $scope.create() function.. Use ContainerService.remove() to remove the container and the associated resource control.. Again, all the code related to creating a new config object from an existing container should be externalized in ContainerHelper.. Good, I'd suggest to externalize that into ContainerHelper as well as a simple function.. Shouldn't that be replace with mkdir -pv ${ARCHIVE_BUILD_FOLDER} ?. I'm wondering if we should remove the shasum step as it's not used at the moment (plus the binary is platform dependent, see the section about CentOS in http://portainer.readthedocs.io/en/stable/contribute.html).. I do prefer readability over minimization, could you replace the p and a vars with meaningful variable names? Could you do the same for the code introduced below?. See my comment above on readability. At first look, I can't understand what's this line is supposed to do.. IMO we should only be able to trigger a build with watch for the local endpoint. No need for the SSL or Swarm setups at the moment since we can still add them as endpoints in the UI.\nYou can remove anything related to runSSL, runSwarm, buildSSL, etc.... This should not be removed.. Same here, this whole section should not be removed.. Same here, this should not be removed.. Use padding-right: 0;. Rename service.history to service.imageHistory. I'd rather see a filter in the view instead of replacing the data directly in the model.\nKeep it this way in the model: this.CreatedBy = data.CreatedBy; and create a new imageLayer filter in filter.js to replace the unwanted strings.. Please use $ instead of jQuery. Please remove the console.log statement.. Something has gone wrong during the merge of this file, you're not using the latest version of the ImageService.. I'd rather see this close to the truncated text than inside a new <td>. Can you add it in the previous <td> element?. No that's OK, looking at the function signature helps there.. Why do we trigger the copy:assets task only for Linux builds?. Ah, let met investigate that.. I don't think that this is necessary.. Please use Notifications instead of Messages.. Could you place this code in an initView() function ?. What's wrong with the header?. Still required?. See my comments below.. See my comments below.. Can you relocate this into the initView function?. Please use fa-list-alt here.. We need to add a condition on this, only display this section for API version >= 1.30. Ok so after investigation, the copy task is called within build and should only be required here.\nbuild is used with grunt run-dev in the context of local development (the copy:bundle task is added because cssmin and uglify should not be used for local development, these would normally copy the concatened and processed files into the dist directory).\nEvery release task should only use the copy:assets task.\nNote: as an enhancement minified vendor and angular libraries should only be used during release, unminified libraries should be used during development.. Minification / vendor prefixes should not be required for the build task. It's used for local development only.. The dest value should be '<%= distdir %>/css/app.css' otherwise it gets overwritten.. The postcss:build task should be right after the concat task in all the release-* tasks.. Could you use root as a the placeholder value?. I'm not fond of the current layout.\nI don't really like the actual layout for the console panel.\n\nCould you update it to have the command and the user on two lines? And add labels (\"Command\", \"User\") in front of each line ?\nIt'd be nice to have a tooltip next to the user label with the following content:  The user, and optionally, group to run the exec process inside the container. Format is one of: user, user:group, uid, or uid:gid.\nHere is a reference for the tooltip: https://github.com/portainer/portainer/blob/develop/app/components/createContainer/createcontainer.html#L34. Looks good to me but I'd rather see the user help text available as a tooltip.. Well, either:\n\nchange the text to: Format is one of: user, user:group, uid or uid:gid\nor \nMake command and user column wider. Also add col-lg-1 as well as text-left here.\n. Also add col-lg-11 here.. Also add col-lg-1 as well as text-left here.\n\nAlso, I think that we should remove the fullsize-tooltip ability and make it part of a separate contribution if it's really needed ? As the text has been shortened, it should not be required anymore.. Also add col-lg-11 here.. Also add col-lg-offset-1 col-lg-11 here.. See my comment above about the tooltip.. Well, you're right. Then I'd rather see the possiblity to declare a tooltip as fullsize inside the tooltip directive.\nCan you introduce that here: https://github.com/portainer/portainer/blob/develop/app/directives/tooltip.js#L9\nMaybe all the tooltips should actually be fullsize, as we got quite a few tooltips in the app already, you can start by making all tooltips fullsize and I'll do a review to check if all the tooltips are OK.. I agree with that, but at the moment this code is duplicated in a lot of places so it makes no sense to change it only here. I've planned to refactor how tables are managed inside Portainer, see my comment https://github.com/portainer/portainer/pull/565#issuecomment-279971963 \nIf we can manage to refactor all tables into a single Angular component, we will also be able to tackle these issues:\n\nhttps://github.com/portainer/portainer/issues/568\nhttps://github.com/portainer/portainer/issues/630\n. I'm not sure that displaying a tooltip in each line where there is a healthcheck is a good idea.. Well, this information is already displayed under the Scheduling mode column.. The condition should be located on the <tr> element so that we don't display an empty row.\n\nSee the screenshots below:\n\n\n. I'm not sure if dependency order is important. We should give it a try first, then if it's required we should also document it.. Agree, this will make it easier to maintain in the future.. This should not be changed, this would impact users which are not using the Docker image (tarballs setups) and it would not be compatible with the current Dockerfile.. Instead of altering the default value as I commented above, why not use the -a /public flag here?\nThe -a flag allow to change the path where assets will be loaded by Portainer.. For consistency, could you introduce a new formValues object and store customCommand, command and user in this object?\n. The ContainerHelper already contains a method to handle custom string commands to array, I'd recommend using it to avoid strange behaviors (especially with ' & \" characters).\nSee ContainerHelper.commandStringToArray(command_string); \n. You can replace\ncommand: [\n          'docker stop portainer',\n          'docker rm portainer',\n          'docker run -d -p 9000:9000 -v $(pwd)/dist:/app -v /tmp/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock:z --name portainer centurylink/ca-certs /app/portainer-linux-amd64 --no-analytics -a /app'\n        ].join(';')\nWith:\ncommand: [\n          'docker rm -f portainer',\n          'docker run -d -p 9000:9000 -v $(pwd)/dist:/app -v /tmp/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock:z --name portainer centurylink/ca-certs /app/portainer-linux-amd64 --no-analytics -a /app'\n        ].join(';'). This whole block of comment can now be removed (solved via #997). Please rename to TaskLogFactory.. Every factory in the portainer.rest module use $resource instead of $http except the followings:\n\nContainerLogs\nServiceLogs\nTaskLogs\n\nIn these 3, the request failure is ignored at the moment. IMO they should all be refactored to use $resource and promises so that the success/error handling is done in services instead of here.\nI think that we should allow this to be merged and refactor the 3 components inside the same commit.. @WTFKr0 This component takes an extra parameter called resource-control. If specified, it will be used to set the default values of the component. If it's undefined, then it will use the default values (see AccessControlFormData).\nExample:\n<por-access-control-form form-data=\"formValues.AccessControlData\" resource-control=\"fromContainer.ResourceControl\"></por-access-control-form>\nYou'll need to set the fromContainer in the controller (use ContainerViewModel).\n. Did some tests, dependency order is important.\nPlease use the following content:\n```yml\njs:\n  regular:\n  - bower_components/jquery/dist/jquery.js\n  - bower_components/bootstrap/dist/js/bootstrap.js\n  - bower_components/angular-multi-select/isteven-multi-select.js\n  - bower_components/bootbox.js/bootbox.js\n  - bower_components/Chart.js/Chart.js\n  - bower_components/filesize/lib/filesize.js\n  - bower_components/lodash/dist/lodash.js\n  - bower_components/moment/moment.js\n  - bower_components/splitargs/src/splitargs.js\n  - bower_components/toastr/toastr.js\n  - bower_components/xterm.js/dist/xterm.js\n  - assets/js/legend.js\n  minified:\n  - bower_components/jquery/dist/jquery.min.js\n  - bower_components/bootstrap/dist/js/bootstrap.min.js\n  - bower_components/angular-multi-select/isteven-multi-select.js\n  - bower_components/bootbox.js/bootbox.js\n  - bower_components/Chart.js/Chart.min.js\n  - bower_components/filesize/lib/filesize.min.js\n  - bower_components/lodash/dist/lodash.min.js\n  - bower_components/moment/min/moment.min.js\n  - bower_components/splitargs/src/splitargs.js\n  - bower_components/toastr/toastr.min.js\n  - bower_components/xterm.js/dist/xterm.js\n  - assets/js/legend.js\ncss:\n  regular:\n  - bower_components/bootstrap/dist/css/bootstrap.css\n  - bower_components/rdash-ui/dist/css/rdash.css\n  - bower_components/angular-multi-select/isteven-multi-select.css\n  - bower_components/angular-ui-select/dist/select.css\n  - bower_components/font-awesome/css/font-awesome.css\n  - bower_components/toastr/toastr.css\n  - bower_components/xterm.js/dist/xterm.css\n  minified:\n  - bower_components/bootstrap/dist/css/bootstrap.min.css\n  - bower_components/rdash-ui/dist/css/rdash.min.css\n  - bower_components/angular-multi-select/isteven-multi-select.css\n  - bower_components/angular-ui-select/dist/select.min.css\n  - bower_components/font-awesome/css/font-awesome.min.css\n  - bower_components/toastr/toastr.min.css\n  - bower_components/xterm.js/dist/xterm.css\nangular:\n  regular:\n  - bower_components/angular/angular.js\n  - bower_components/angular-bootstrap/ui-bootstrap-tpls.js\n  - bower_components/angular-cookies/angular-cookies.js\n  - bower_components/angular-google-analytics/dist/angular-google-analytics.js\n  - bower_components/angular-jwt/dist/angular-jwt.js\n  - bower_components/angular-local-storage/dist/angular-local-storage.js\n  - bower_components/angular-resource/angular-resource.js\n  - bower_components/angular-sanitize/angular-sanitize.js\n  - bower_components/angular-ui-select/dist/select.js\n  - bower_components/angular-ui-router/release/angular-ui-router.js\n  - bower_components/angular-utils-pagination/dirPagination.js\n  - bower_components/ng-file-upload/ng-file-upload.js\n  minified:\n  - bower_components/angular/angular.min.js\n  - bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js\n  - bower_components/angular-cookies/angular-cookies.min.js\n  - bower_components/angular-google-analytics/dist/angular-google-analytics.min.js\n  - bower_components/angular-jwt/dist/angular-jwt.min.js\n  - bower_components/angular-local-storage/dist/angular-local-storage.min.js\n  - bower_components/angular-resource/angular-resource.min.js\n  - bower_components/angular-sanitize/angular-sanitize.min.js\n  - bower_components/angular-ui-select/dist/select.min.js\n  - bower_components/angular-ui-router/release/angular-ui-router.min.js\n  - bower_components/angular-utils-pagination/dirPagination.js\n  - bower_components/ng-file-upload/ng-file-upload.min.js\n``. Well, this is going to be tricky as the value$scope.formValues.NetworkContainer` should be a container object (as returned by the Docker API) and not a simple string (container name).\nYou can iterate through the containers available in this view via $scope.runningContainers to retrieve the container object based on it's name.. Good point @G07cha ! Will update.. Please use the promise chaining form here:\njavascript\nContainer.query({ all: 1, filters: {name: [$scope.config.name] }).$promise\n.then(function success(data) {\n // handle success\n})\n.catch(function error(err) {\n // error handling\n});\nSee my comment below about using $q to return a promise as I've proposed a new code snippet.. Please use the promise chaining form here:\njavascript\nContainer.get({ id: $stateParams.from }).$promise\n.then(function success(data) {\n // handle success\n})\n.catch(function error(err) {\n // error handling\n});. Can you change the text to A container with the same name already exists. Portainer can automatically remove it and re-create one. Do you want to replace it?\nNote that the confirm button should be Replace instead of Remove.. The whole section where the $scope.config object is built/transformed should be done outside of the controller. Why don't you re-use ContainerHelper.configFromContainer() here?. You can remove that comment.. ~It seems that the resource control is not correctly loaded. I'll check this.~\nIn order to correctly initialize the form with the resource control values, we need to add a condition on this object.\nhtml\n<por-access-control-form form-data=\"formValues.AccessControlData\" resource-control=\"fromContainer.ResourceControl\" ng-if=\"fromContainer\"></por-access-control-form>\n. I'd rather see this part using a promise than a callback as this part is quite hard to read.\nLike:\n```javascript\n    confirmCreateContainer()\n    .then(function success(confirm) {\n      if (!confirm) {\n        return false;\n      }\n  $('#createContainerSpinner').show();\n  var accessControlData = $scope.formValues.AccessControlData;\n  var userDetails = Authentication.getUserDetails();\n  var isAdmin = userDetails.role === 1 ? true : false;\n\n  if (!validateForm(accessControlData, isAdmin)) {\n    $('#createContainerSpinner').hide();\n    return;\n  }\n\n  var config = prepareConfiguration();\n  createContainer(config, accessControlData);\n})\n.catch(function error(err) {\n  Notifications.error('Failure', err, 'Unable to create container');\n})\n.finally(function final() {\n  $('#createContainerSpinner').hide();\n});\n\n```\nYou'd need to rewrite the confirmCreateContainer() function to use $q.\n```javascript\n  function confirmCreateContainer() {\n    var deferred = $q.defer();\nContainer.query({ all: 1, filters: { name: [$scope.config.name] } }).$promise\n.then(function success(data) {\n  // The section where we check if another container with that name exists\n  // should be externalized as another function\n  // Should have:\n  // var existingContainer = getContainerWithNameInContainers($scope.config.name)\n  // if (existingContainer) {\n  //  ModalService.confirmDeletion(...)\n  // }\n  var confirmDialog = false;\n  var container;\n\n  for (var c in data) {\n    for (var n in data[c].Names) {\n      if (data[c].Names[n] === '/' + $scope.config.name) {\n        confirmDialog = true;\n        container = data[c];\n      }\n    }\n  }\n  if (confirmDialog) {\n    // I've already updated the text of the modal but not the button.\n    // Note that the confirm button text should be 'Replace' instead of 'Remove'.\n    ModalService.confirmDeletion(\n      'A container with the same name already exists. Portainer can automatically remove it and re-create one. Do you want to replace it?',\n      function onConfirm(confirmed) {\n        if(!confirmed) { deferred.resolve(false); }\n        else {\n          // Remove old container\n          ContainerService.remove(container, true)\n          .then(function success(data) {\n            Notifications.success('Container Removed', container.Id);\n            deferred.resolve(true);\n          })\n          .catch(function error(err) {\n            deferred.reject({ msg: 'Unable to remove container', err: err });\n          });\n        }\n      }\n    );\n  } else {\n    deferred.resolve(true);\n  }\n})\n.catch(function error(err) {\n  deferred.reject({ msg: 'Unable to retrieve containers', err: err });\n});\n\nreturn deferred.promise;\n\n}\n``. What's the point of this section? The resource control is applied after theContainerService.createAndStartContainercall.. We also need to initialize the$scope.fromContainer` to an empty object here. It will be used to display the access control form with default values.\njavascript\nif ($stateParams.from !== '') {\n  loadFromContainerSpec();\n} else {\n  $scope.fromContainer = {};\n}\nSee my comment below (https://github.com/portainer/portainer/pull/855/files#r128255363). Eventually, this will be moved later on when refactoring the entire controller.. You can retrieve the registry from the container repository (repo:image:tag) using RegistryService.retrieveRegistryFromRepository($scope.config.Image)\nSee an example here: https://github.com/portainer/portainer/blob/develop/app/components/image/imageController.js#L43\nBy updating $scope.config.Image and $scope.formValues.Registry the dropdown should update.\n. Why did you these 2 lines? This will cause the access control form to be disabled by default when adding a new container.. We need to change this. This returns a list of containers containing $scope.config.name in their name and not containers with the exact name in my environment (see https://forums.docker.com/t/how-to-filter-docker-ps-by-exact-name/2880)\nWe need to add an extra check by looping in the container names.\nTry to reproduce the following:\n\nCreate a container named some_test_container\nCreate a container named test\nThe replace modal will be displayed. That should be handled inside the AccessControlForm component. I might need to review it.. Right, will check this.. Ok, I found a solution for this, I'll show you in the next review.. Please fix the missing semicolon here.. Add the following code here:\n\njavascript\n      var fromContainer = new ContainerViewModel(d);\n      if (!fromContainer.ResourceControl) {\n        $scope.formValues.AccessControlData.AccessControlEnabled = false;\n      }\n      $scope.fromContainer = fromContainer;\nThis will automatically disable access control in the form when editing/duplicating a public container.. You can remove the ctrl.formData.AccessControlEnabled = true; (have a look at the solution I proposed above for the edition of public containers).. You can use if (data) { here.. Ok, I managed to update the dropdown menu. This will imply changes in multiple locations.\nPlease remove the initial field value for the Registry in the $scope.formValues object at the beginning of this controller.\njavascript\n  $scope.formValues = {\n    alwaysPull: true,\n    Console: 'none',\n    Volumes: [],\n    NetworkContainer: '',\n    Labels: [],\n    ExtraHosts: [],\n    IPv4: '',\n    IPv6: '',\n    AccessControlData: new AccessControlFormData()\n  };\nWe need to change the directive in createContainer.html. Use this new directive:\nhtml\n<por-image-registry image=\"config.Image\" registry=\"formValues.Registry\" ng-if=\"formValues.Registry\"></por-image-registry>\nWe also need to change the content of the method initComponent method in porImageRegistryController. Please use the following code:\njavascript\n  function initComponent() {\n    $q.all({\n      registries: RegistryService.registries(),\n      dockerhub: DockerHubService.dockerhub()\n    })\n    .then(function success(data) {\n      var dockerhub = data.dockerhub;\n      var registries = data.registries;\n      ctrl.availableRegistries = [dockerhub].concat(registries);\n      if (!ctrl.registry.Id) {\n        ctrl.registry = dockerhub;\n      } else {\n        ctrl.registry = _.find(ctrl.availableRegistries, { 'Id': ctrl.registry.Id });\n      }\n    })\n    .catch(function error(err) {\n      Notifications.error('Failure', err, 'Unable to retrieve registries');\n    });\n  }\nNote that there is a bug in the ImageHelper.extractImageAndRegistryFromRepository() function. I'll note that aside.. You can remove the finally block here, it will prevent the spinner to be displayed.. Add the following code snippet to work around the default network issue commented below.\njavascript\n    var networkMode = d.HostConfig.NetworkMode;\n    if (networkMode === 'default') {\n      $scope.config.HostConfig.NetworkMode = 'bridge';\n      if (!_.find($scope.availableNetworks, {'Name': 'bridge'})) {\n        $scope.config.HostConfig.NetworkMode = 'nat';\n      }\n    }. This will copy the entire EndpointsConfig object, if the fromContainer has multiple networks they'll be copied as well and an error will be raised when trying to create a container.\nThis should be replaced with $scope.config.NetworkingConfig.EndpointsConfig[$scope.config.HostConfig.NetworkMode] = d.NetworkSettings.Networks[$scope.config.HostConfig.NetworkMode]; so that we only select the EndpointConfig associated to the selected NetworkMode.. The first feature requested in #466 is to be able to re-create a container by pulling the latest image in the before re-creating it.\nPlease use the following promise chaining to be able to do that (you'll need to add the dependencies to RegistryService and ImageService in the controller definition):\njavascript\n  .then(function success() {\n    return RegistryService.retrieveRegistryFromRepository(container.Config.Image);\n  })\n  .then(function success(data) {\n    return ImageService.pullImage(container.Config.Image, data, true);\n  })\n  .then(function success() {\n    return ContainerService.createAndStartContainer(config);\n  }). Actually, these networks are referenced as \"Swarm\" networks in the API response. I'll change it to \n\"When using Swarm, we recommend deploying containers in a Swarm network. Looks like you don't have any Swarm network, head over the networks view to create one.\". The use of self here is pretty limited as it's only declared and use for the declaration of the DeprecatedFormat variable. I'd rather see this.DeprecatedFormat = true; here.. Please remove the deprecation message.. You can remove this flag as well and the binding to this. Can you remove the || state.selectedTemplate.DeprecatedFormat in the comparison ?. Missing semi-colon here.. Missing semi-colon here.. Another missing semicolon to fix here.. Why do we need to add the $sce.trustAsHtml here?. Why do we need the ng-bind-html directive here?. The goal of this PR is to introduce color support, I don't see why we should add HTML support in the logs.\nThis could lead to malicious code being introduced when displaying the logs of a container outputting HTML (and Javascript).. I think that you can use endpoint.URL.Path here instead of strings.Replace(endpoint.URL, \"npipe:\", \"\", 1). Issue might come from here... Looks like @StefanScherer is using github.com/Microsoft/go-winio here. You might want to give it a try.\nSee: https://github.com/portainer/portainer/compare/develop...StefanScherer:npipe_support#diff-d678b9df77b49ad5bb4195768e75b3afR45\n. Shouldn't that be data.URL.indexOf('npipe://') instead?. Of course we won't replace the socket by the npipe when merged. At the moment, this is still acceptable for tests.\nRegarding the UX during the first endpoint initialization, we have multiple choices here:\n\nDetect the platform where Portainer is running and automatically adapt the URL value with either the socket path or named pipe\nReplace the two options ('local' and 'remote') by Local (Linux), Local (Windows) and Remote.. Same thing here, I think that we'll need to have createLocalLinuxEndpoint and createLocalWindowsEndpoint.. Is this file really useful? Looks similar to api/http/proxy/socket.go. \n\n. ~For now, I'd rather not see the information message for the Windows platform. As this feature is not available yet for Windows container, it may confuse our current Windows users.\nI'd go for merging the support of the named pipe, without really being able to use it before the ability to mount the named pipe is released (no changes on the front-end for now).~\nEDIT: We'll merge this PR when the ability to mount the named pipe in a container is available.\nAs @StefanScherer said, I'd rather see the MacOS mention removed as well.. I'd rather introduce a boolean in postEndpointsRequest, something like Local to specify if the creation of the endpoint should rely on the platform check. This field would be required.\nI don't really like the fact that the creation of a local endpoint relies on the Name field and an empty URL. Could you update the api/swagger.yaml file as well?. Based on my comment above, the payload for the endpoint creation should contain the new Local field.. Could you remove the ID column ?. I'd rather remove the ID column which is useless info actually. Instead, use a link on the name with the ID:\n<a ui-sref=\"network({id: network.NetworkID})\">{{ network.Name }}</a>. A fix has been introduced in this file via https://github.com/portainer/portainer/pull/1192\nPlease make sure it's implemented here as well.. Instead of creating a new 'Resources' pane, could you group these options with the placements options in a Resources & Placements tab ?\n. Could you place the CPU/MEM res block on the left and the CPU/MEM limit on the right ?. Please replace the CPU res label text with CPU reservation.\nAlso, please replace the tooltip message with: Minimum CPU available on a node to run a task. Please replace the Mem limit label text with Memory limit.\nAlso, please replace the tooltip message with: Maximum memory usage per task (set to 0 for unlimited). Please replace the Mem res label text with Memory reservation.\nAlso, please replace the tooltip message with: Minimum memory available on a node to run a task. Please replace the tooltip message with: Maximum CPU usage per task (set to 0 for unlimited). What about using col-sm-3 only here ? And col-sm-1 only for the unit select ? Visually, the select is too big just for MB/GB.\nSidenote: when you write class=\"col-sm-2 col-lg-2\" there is no need to specify the col-lg-2 as it's the same value than col-sm-2, it will fallback automatically to col-sm-2. I've seen that in multiple places, you can just specify the col-sm-* attribute.. See my comment above about using col-sm-1 only.. Please replace the tooltip message with: Maximum CPU usage per task (set to 0 for unlimited)\n. Please replace the CPU res label text with CPU reservation.\nAlso, please replace the tooltip message with: Minimum CPU available on a node to run a task. Please replace the Mem limit in MB label text with Memory limit (MB).\nAlso, please replace the tooltip message with: Maximum memory usage per task (set to 0 for unlimited). Please replace the Mem res in MB label text with Memory reservation (MB).\nAlso, please replace the tooltip message with: Minimum memory available on a node to run a task. Right, then we'll keep col-sm-2 & col-sm-2. There is no need for that extra req.URL == \"\" check. If the Local parameter is specified, it should automatically create a local endpoint and ignore the URL.. \nYou can remove the usage of URL here: EndpointService.createLocalEndpoint(name, false, true). The URL parameter is not required anymore.. Well you can always map it inside the Portainer container using path/to/socket.go:/var/run/docker.sock\nWhen using Portainer as a binary it would then become a requirement, but this can still be an evolution that we can add later if required.. Mind updating the api/swagger.yml file as well ? . Awesome, thanks :-). Can you update the flag description to Path to the file containing the password for the admin user. You can remove the comment.. The AdminPasswordHash variable should be adminPasswordHash. I'd rather see this in the file package rather to have an import to ioutil in this file.. Yeap, include it as a global generic function that returns a string from a file.. I agree with your last point, we should not remove the newline character.. Is there any use for the MemoryLimitUnit and MemoryReservationUnit vars as we now enforce it to MB ?. See my comment above. I think this is useless now?. I prefer to have see the signature of the ContainerService.containers() function as ContainerService.containers(all, filters) as the all parameter is actually separated from filters in the ContainerList operation: https://docs.docker.com/engine/api/v1.30/#operation/ContainerList. I'd rather see the volumeID to be integrated as a second parameter of getVolumeDataFromContainer() instead of relying on the scope value here.. The size parameter is not used here, you can remove it. You can also remove the timeout value, as we don't use any timeout in other requests.. I don't think there is a need to use $q.defer() here. You could simply use:\njavascript\nservice.inspect = function(id) {\n  return Container.inspect({id: id}).$promise;\n};. No need to create a $scope.state object, please use the standard initView() function here. Have a look at https://github.com/portainer/portainer/blob/develop/app/components/containerStats/containerStatsController.js#L146-L157 for an example of query/then/catch/finally implementation.. I believe the associated scope object should have a name instead of simply data. I think it's clearer when you check the related HTML code. Something like $scope.containerInfo.. No need to check for state.loaded here. Have a look at my comment regarding initView() below.. No need to check for state.loaded here. Have a look at my comment regarding initView() below.. No need to check for state.loaded here. You should check on data (also, see my comment about renaming that field below).. Could you use the following ?\nhtml\n<rd-widget-body>\n  <pre>{{ data | json:4 }}</pre>\n</rd-widget-body>. Sure, but I believe there should not be many functions looking the same. Usually you'll find some process in the function success().. Try to remove the spacing here, otherwise it will be displayed in the rendered HTML.\nhtml\n<rd-widget-body>\n  <pre>{{ containerInfo | json:4 }}</pre>\n</rd-widget-body>. Why use a throw instead of the reject() method of the deferred object?\n. You need to replace data with containerInfo here.. Please replace ::containerInfo.Name|trimcontainername with containerInfo.Name|trimcontainername otherwise the link will not be shown.. Not sure about the copyright and license in these file? Do we need to keep this?. Please relocate '$filter' after the '$state' parameter.. Please relocate $filter after the $state parameter.. Let's use var URL = $filter('stripprotocol')($scope.formValues.URL) directly here and skip the declaration of filteredURL.. Let's remove it then.. Configs cannot be encoded, this is probably a copy/paste from secrets, could you remove it?. No need for this.. It probably requires the manager role as well via && applicationState.endpoint.mode.role === 'MANAGER'\".. What's the point of creating an inner object called object inside $scope.containerInfo ? I'd rather keep it as it was before: $scope.containerInfo = d;. Please relocate the $scope.state declaration on top of the initView function declaration, see my comment above.\nAlso, could you rename the TextView property to something more meaningful? Something like $scope.state.DisplayTextView.. See my comment above regarding the inner object.. Please relocate the $scope.state declaration here.. I believe these changes are not required anymore.. Please replace the <div> section with the following:\n<span class=\"btn-group btn-group-sm\">\n  <label class=\"btn btn-primary\" ng-model=\"state.DisplayTextView\" uib-btn-radio=\"false\"><i class=\"fa fa-code space-right\" aria-hidden=\"true\"></i>Tree</label>\n  <label class=\"btn btn-primary\" ng-model=\"state.DisplayTextView\" uib-btn-radio=\"true\"><i class=\"fa fa-file-text-o space-right\" aria-hidden=\"true\"></i>Text</label>\n</span>. If you declare $scope.containerInfo = {}; here, you'll be able to use $scope.containerInfo = d; below.. See my comment above.. As we're not using <buttons> anymore but labels (see my comment above), these changes are not required anymore.. Could you move this code snippet inside api/cli/cli.go ?. Should be $scope.state.selectedTemplate.Hosts.push(''); as we expect an array of string.. If we want the values to be correctly bound to the model, we need to use the following snippet here:\nhtml\n<div ng-repeat=\"(idx, host) in state.selectedTemplate.Hosts\" style=\"margin-top: 2px;\">\n    <div class=\"input-group col-sm-5 input-group-sm\">\n      <span class=\"input-group-addon\">value</span>\n      <input type=\"text\" class=\"form-control\" ng-model=\"state.selectedTemplate.Hosts[idx]\" placeholder=\"e.g. host:IP\">\n    </div>\n    <button class=\"btn btn-sm btn-danger\" type=\"button\" ng-click=\"removeExtraHost($index)\">\n      <i class=\"fa fa-trash\" aria-hidden=\"true\"></i>\n    </button>\n</div>\nWe should not bind to primitives, see: https://github.com/angular/angular.js/issues/1267. Actually, we need the track by $index the in the ng-repeat instruction otherwise it creates a strange behavior in the UI when typing in the inputs.\n<div ng-repeat=\"(idx, host) in state.selectedTemplate.Hosts track by $index\" style=\"margin-top: 2px;\">. Please rename the OptionsObjt function to defaultChartOptions.. Why this change?. Please rename varPlugins to aggregatedPlugins.. Quick technical note: I do not like this function. Messages should not be build via functions, they should be display entirely (that will make things easier for i18n later on).. Oh you're right, I missed that part... tho UX wise I think that it would be better remove that field and automatically encode the configuration (I don't think there would be many people pasting encoded configs).. Does that affect the display?. Could you change the signature of the function to aggregatedPlugins = function(systemOnly, pluginType, pluginVersion) ?. Could you use < here instead of = ? No need for two way binding here.. This is a binding issue, works fine if you use an object.\nhtml\n        <div class=\"input-group col-sm-3 input-group-sm\" ng-if=\"applicationState.endpoint.apiVersion >= 1.30 && state.addSecret.override\">\n          Target:\n          <input class=\"form-control\" ng-model=\"state.addSecret.target\" placeholder=\"/path/in/container\">\n        </div>\n        <div class=\"btn-group btn-group-sm\">\n          <label class=\"btn btn-primary\" ng-model=\"state.addSecret.override\" uib-btn-radio=\"false\">Default location</label>\n          <label class=\"btn btn-primary\" ng-model=\"state.addSecret.override\" uib-btn-radio=\"true\">Override</label>\n        </div>\n        <a class=\"btn btn-default btn-sm\" ng-click=\"addSecret(service, newSecret, state.addSecret.target)\">\n          <i class=\"fa fa-plus-circle\" aria-hidden=\"true\"></i> add secret\n        </a>\n(also need to update the controller accordingly)\n. Mind rewriting the code to make it a bit more readable? \n\nNo point in having multiple statements on the same line (for / if / if-content)\nUse understandable variable names\n\nTold you that compact != readable and I'd favor the second.. I'd rather see another signature for this function to be more self explanatory:\nfunction getUniqueTagListFromImages = function(images). I may be missing something but where does type comes from?. Please use lowercase variables, list. Even better:  fileList.. I don't think that you need to prefix this to variable names. Does not really help reading the code.\nUse list here for example.\nBelow, you could use for (var file in list) { which is a lot more readable and self explanatory.. Please use Camel Case with lowercase first letter for function parameters.. Please use Camel Case with lowercase first letter for function parameters. Also no need for an extra space before the final ).. No need for an extra space before the final ).. No need for an extra space before the final ).. No need for an extra space before the first (.. I believe that the way to go then would be to just remove the margin-bottom property.. What's the point of that code snippet?. Why did you add an icon property to the portainer-tooltip ?. Why is that change required here? The scope of the PR is related to images.. Please keep the buttons in the panel where needed as this is out of scope and discussed at the moment in #1408 . Could you remove that file?. Quick question, why is the sidebar affected by this PR?. We do not use ES6 in other parts of the codebase so I'd rather avoid mixing ES5/ES6. Please change it to ES5 declaration.. I'd rather keep the volumePlugins and networkPlugins options.\nI believe that the fix is only to add a return statement.\ne.g.\njavascript\nservice.networkPlugins = function(systemOnly) {\n  return servicePlugins(systemOnly, 'Network', 'docker.networkdriver/1.0');\n};. Actually, if that function is not exposed via the service you can just use function servicePlugins(systemOnly, pluginType, pluginVersion) instead of assigning it to a variable.. I believe we should keep this in base 10.. > Note that 128M in Docker means 128MiB which is the equivalent to 134.22 MB.\nIn order to be coherent within the UI, I'd like to display this information as 128MB. To do so, you just need to change the humansize fitler to expose a new parameter called base (here we need to use base 2).\n. Do you mind fixing the associated codeclimate issue https://codeclimate.com/github/portainer/portainer/pull/1459 by using a single return instruction ?. Could you use indexOf instead of split here to check for the presence of the :  char? \nSee https://www.w3schools.com/jsref/jsref_indexof.asp\n. Good point, will fix as a part of #1460 . Fixed in https://github.com/portainer/portainer/pull/1460/commits/5fc1626a28ee8faf7b71e2220713118146467e2d. Please replace the message with Amount of time between updates expressed by a number followed by unit (ns|us|ms|s|m|h). Example: 1m.. Please replace the message with Amount of time between updates expressed by a number followed by unit (ns|us|ms|s|m|h). Example: 1m.. Could you add a \"Update config\" section before this input as it is done in the Resources & Placement section?. Could you add a \"Restart policy\" section before this input as it is done in the Resources & Placement section?. CreateAndRegisterRegistryProxy should be use instead of CreateAndRegisterProxy. We should also be able to handle HTTPS registries here. I believe that we need to work on that.. What is this section supposed to display ? Should we keep it ? If no, please remove the comments.. Please remove useless bindings such as accessManagement and removeAction.. Please remove useless bindings such as accessManagement and removeAction.. Why is this required?. Could you remove this part ?. I think that the hideshasum filter is not required here, it's only useful for services.\n. I believe we should just truncate (18 chars is a good value) the content of the imageName if it's prefixed by sha256.. I believe the retrieval of logging drivers should be part of the $q.all with the other async queries.. The ServiceService.service($transition$.params().id) and PluginService.loggingPlugins(apiVersion < 1.25) async queries should be grouped inside a q.all() directive.. Yes, remove it anyway as it should be part of the filter that trim the prefix and then truncate the image name (equivalent of the Docker CLI).. All good then, try to replicate the behavior ;-). You should have kept return servicePlugins(systemOnly, 'Log', 'docker.logdriver/1.0'); in the function loggingPlugins, that was correct.. Uh, you're right, sorry I was a bit confused as well.. I think that we should split on sha256 instead of sha because some organisations might be prefixed by sha.. No worries, you're actually doing pretty well !. Yup, even better indeed.. To fix the state transition here:\n\nUse <a ui-sref=\"registry.tags({id: $ctrl.registryId, repository: item.name})\">{{ item.name }}</a> to define the link\nAdd a new binding to registryRepositories.js:\n\nregistryId: '<'\n\nBind the registryId with the datatable in registryBrowse.html:\n\n<div class=\"row\">\n  <div class=\"col-sm-12\">\n    <registry-repositories-datatable\n    title=\"Repositories\" title-icon=\"fa-database\"\n    dataset=\"repositories\" table-key=\"repositories\"\n    order-by=\"name\" show-text-filter=\"true\"\n    access-management=\"applicationState.application.authentication\"\n    remove-action=\"removeAction\"\n    registry-id=\"registry.Id\"\n    ></registry-repositories-datatable>\n  </div>\n</div>. I'd prefer to have a model created for each entity like we do for other Docker resources (check app/models/docker, I think app/models/registry would be fine).. Hmm I'm thinking about it, maybe the protocol should be part of the URL ? I wonder if it would have an impact on the existing implementation (which is subject to change, see https://github.com/portainer/portainer/issues/1434#issuecomment-347270725. I think that this is more of a pattern we use in the Portainer codebase, we could have gone with raw data from the Docker API as well.\nBut to be consistent, I'd rather use a Portainer model for the registry data as well.\n  . Please relocate this line inside the prepareNetworkConfig function.. Please relocate this line inside the loadFromContainerNetworkConfig function.. Mind renaming this function to correct the typo ? loadFromContainerEnvrionmentVariables -> loadFromContainerEnvironmentVariables. Please rename to confirmServiceForceUpdate. No need to specify the with --force in the message, I believe that Service successfully updated is enough.. As the force update action requires the API version to be 1.25+, we should hide the force update button if the API version does not match instead of displaying an error message. The button should be hidden in the services & service-details views.\nHave a look at the sidebar for more details about hiding components when the API version does not match.. You can add a binding called showForceUpdateButton into the servicesDatatable component.\nThen simply add show-force-update-button=\"applicationState.endpoint.apiVersion >= 1.25\" inside the datatable declaration.\n  . Please introduce a default variable in api/cli/defaults.go & api/cli/defaults_windows.go.. I'd rather see this method renamed to HealthCheck and located in a file called api/http/health_check.go.\n  . Why this change to the ENTRYPOINT directive ? . Why did you added these comments ? I don't think they are necessary.. I think that the only parameter required for this function should be the port number. It'll always check for localhost inside the container or running without Docker.\nAlso, this methods should return either 0 (success) or 1 (failure) if code the status is not 200 as well as the error message if there is an error. The os.Exit part should be integrated in the main.go rather than in the http package. . See my comment below to manage the os.Exit part here (use log.Fatal in case of error).. I believe this is out of scope of the PR, please report a new issue to discuss it first.. Out of scope of the PR as well, please remove it.. Agree, we probably need to change this. Note that this might cause troubles when associated with \"localhost\".. Ping on this topic, I'd rather see models here before merging.. Ok, we're going to support HTTP only for now. \nWe'll tackle protocol support in #1467 . We don't really like that warning. IMO we should be able to retrieve all repositories, paginating data could be a solution here.\nIf  we want to keep this at the moment, please specify this as an information directly in the view.. The content of this method is pretty complex. We'll need to find a way to refactor it and maybe abstract it inside a service. At least it should be divided in multiple smaller methods.. Why is the data parsed in JSON here while it's not done in the RegistryBlobs.head method?. OK. > I think I'll transform to a simple message for the moment\nOk. Rather than seeing a new panel in this view, I'd prefer to have the refresh rate related fields available under a new section called \"Refresh\" under the \"Filters\" section inside the Cluster information panel.\nRemove the \"This view displays real-time information about the Swarm.\" message as well.. I believe that any status other than 200 should raise an error.. Following our discussion on Slack, do we need to prefix the addr with \"localhost\" here?. Is that part of the Stack object definition? If so, please remove it.. Please remove the last ? char here.. IMO, the fact that we need to prune a stack on update should not be stored inside the Stack object. Instead, the Deploy method of the StackManager interface should accept an extra parameter prune bool.. See my comment below about storing that information inside the Stack object.. Are the quotes needed around each dependency? I forgot to add them for the Angular section during the merge.. Where are the files containing the models?. Yeah sorry about that, I rushed a bit the conflict resolution.. Replace this line angular.module('portainer.app', []) with angular.module('portainer.app'). Otherwise you'll overwrite the portainer.app module declaration, causing issues (as such as unable to load the app).. Replace this line angular.module('portainer.app', []) with angular.module('portainer.app'). Otherwise you'll overwrite the portainer.app module declaration, causing issues (as such as unable to load the app).. Please relocate this model to app/portainer/models.. Please relocate this model to app/portainer/models.. Please relocate this model to app/portainer/models.. Please relocate this model to app/portainer/models.. Please remove all the comments here, we know that we need to tackle HTTPS support but we'll add this later.. Function should be renamed retrieveRegistry. I'd rather see an if instead of a switch case here.. Is this actually required? What happens if we always add the extra slash? I believe that my.registry.com//v1 would be valid for example.. Any reason why the title attribute is located on the <i> tag for this element?. Please remove any code related to your dev environment.. Why is this new section needed in gruntfile?. Is that required as well ? Looks like we copy all the fonts from the node module webfont folder to dist/fonts already (see above).. Do we actually need all of these? Or only some? Because I believe we're not using any brand icon actually (might be wrong though). Do we need solid/regular as well?. $scope.sortReverse should default to false.. I believe that the return statement is optional here.. Please fix the identation here.. Please use the following bindings here:\njavascript\nbindings: {\n    data: '=',\n    displayTimestamps: '=',\n    logCollectionChange: '<'\n  }. No need for a tooltip, it's already quite explicit. You can remove it.. Instead of relying on ng-change to update the value in service/container/task logsController, we're going to update the binded value directly.\nReplace that input with the following:\nhtml\n<input type=\"checkbox\" ng-model=\"$ctrl.displayTimestamps\"><i></i>. No need to store the value in this controller, we're going to use the binded value directly. You can remove it.. please rename this variable to displayTimestamps.. No need for a function to update the value of the state.displayTimestamps variable. As it's binded using double way binding in the logViewer component (= binding type), it's going to be updated in here when we change the value in the logViewer component.\nYou can remove this function.. Please use a ternary form here: $scope.state.displayTimestamps ? 1 : 0\nEven if passing a true parameter to the API works, it actually expects either 0 or 1 values.. Please use a ternary form here: $scope.state.displayTimestamps ? 1 : 0\nEven if passing a true parameter to the API works, it actually expects either 0 or 1 values.. Based on the previous changes, you'll want to use the following binding here:\ndisplay-timestamps=\"state.displayTimestamps\". I believe that the ( & ) chars are optional here.\nE.g.: service.StopGracePeriod = service.StopGracePeriod ? ServiceHelper.translateNanosToHumanDuration(service.StopGracePeriod) : '';. If the headers are added in this if block, they'll only be added when sending HTTP requests to get HTML files. Should these headers be added for other requests as well ? (e.g Images, Javascript files...) ?. I believe that the LocalStorage service purpose should be to store/retrieve values from the local storage, not to manage default values.\nTo stay consistent with how this is done currently, could you relocate the default variable handling into the initView function of the SwarmVisualizerController?. Default values should be defined here. Update from local storage in the initView() function.. As these changes are triggered by interaction with the DOM, I'd rather see the usage of ng-change functions here than the introduction of $watch functions. Could you replace these?. I do not think that the introduction of this method is coherent with how the ServiceService is supposed to work.\nOnly ngresource/promise handling is usually done in service. While this refactor and centralize the scaling function, it also introduce components such as Notifications and $state which should not be part of this service.\nPlease remove it.. Revert the changes to keep the old scaleService function.. You'll probably need an equivalent of the ScaleService function above.. I know but I do not think this is the best way to refactor and centralize this function.\nWe might want to introduce another service layer later on, for now it will be fine.. Please remove the extra space here between the = char and function.. Please remove the extra line break here.. Actually, I think that we should use the following condition here:\nif path.Base(requestPath) == \"push\" && request.Method == http.MethodPost {\n  return p.replaceRegistryAuthenticationHeader(request)\n}\nCould you update it?. Please rename ErrRegistryInvalidAuthCreds to ErrRegistryInvalidAuthCredentials. I think that the Registry object should store a portainer.TLSConfiguration instead of a simple TLSVerification field. It can store this value in TLSConfiguration.TLSSkipVerify.. By using a TLSConfiguration object in the Registry object (see my comment above), we can use thetls.CreateTLSConfiguration(config *portainer.TLSConfiguration) function to generate the TLS configuration (abstracting the tls configuration creation).\n. See my comment above about using a TLSConfiguration object here.. The client can probably be stored in the handler and initialized when the handler is initialized. No need to re-create one for each request.. The error code should probably be http.StatusInternalServerError here.. Why bother replacing the RequestURI above ? Couldn't you just add the static path to the registry API here instead of uri ?. The error code should probably be http.StatusInternalServerError here.\n. For information, could you give me an example of header value for each case?. Could you explain what is the purpose of this piece of code? I cannot understand it at first glance, so we'll probably need to make this simpler.. From what I can read you're trying to build the external service URL that will be used to send an authentication request. But the code is still too obscure for me, could you describe what is the process to build the authURL variable? We'll try to make this simpler.. What happens if the statuscode is not 200 for the auth request?. The error code should probably be http.StatusInternalServerError here.\n. The error code should probably be http.StatusInternalServerError here.\n. See my comment above about using a TLSConfiguration object.. Looks like this could be stored inside constants.. Anyway way to bubble up that TLS issue instead of creating a custom error here? I believe that if we can see the cannot validate certificate for... error message in the API/UI, we'll be able to determine that we need to skip server verification.. use http.MethodGet instead of \"GET\" here.. See my comment above about returning this error instead of creating a new error.. Ah the voodoo code piece is back ? Seems like a code duplication, still don't know what its supposed to do. Can you create a function to centralize this piece of code?. What's the point of this function? It seems to be used in the tests only? Is it really needed?. All right but what about simply copying the request like this:\ngolang\n    req, err := http.NewRequest(request.Method, registry.Protocol + \"://\" + registry.URL, nil)\n    if err != nil {\n        return nil, err\n    }\nLooks a lot simpler to me. Some additions might be required if we need to copy the headers, do we?. You're right, ignore this one.. Any update on this topic?. I don't see the point of storing the Version right now, is it used somewhere?. Ok, this code is a bit messy though. I do not have a solution for this yet, we'll probably want to refactor it later on.. Sounds a bit contradictory to me, it says that we support Docker Swarm >= 1.2.3 but that the support is dropped...\nI believe that we shoud just remove it.. Agree, just need to rephrase it. @ibnesayeed looks good!. My opinion is that if you're solution do not bring something particular (besides being \"more generally\" which I'm not sure is useful in our case), I believe that what I proposed is easier to read. I'd go for my proposition.. OK, good point.. Thing is, we already prevent the removal of an administrator account where the ID of the user to remove equals the ID of the user executing the removal request (thus preventing an administrator to remove its account). I believe that this is just what we need, no need to check if at least 2 admin account exists before authorizing the removal.\nYou can just remove the if userID == 1  block.. See my comment below, I believe that this error definition is not needed anymore.. I believe that you can use return handler.JWTService.GenerateToken(tokenData) directly here.. Any particular reason why you skip returning the errors in this function? I believe that every error should be returned.. You can remove this comment.. You can remove this comment.. We recently added the ability to remove the default admin account via https://github.com/portainer/portainer/issues/1921\nThere is now no \"local fallback\" option if the admin account is deleted. We believe that we should add some information about this somewhere, I'll add an information message in another commit.\nYou can remove the u != nil && u.ID == 1 check though.. Yes but what if you created an admin account with LDAP enabled and then you remove all the users created previously (the default admin account for example). You would put yourself in a state where there would be no admin accounts with a password and thus no possibility to use internal authentification.\ncc @ncresswell   . @AlexJakeGreen I think that we should prevent the removal of the last admin user account with a defined password.. I think that we should use fa-columns icon here as the fa-eye is already associated to the ownership concept. \nCould you rename this option to \"Columns\" ?\nI'd relocate the uib-dropdown-toggle attribute on a span here as well (as it's done for other settings):\nhtml\n<span uib-dropdown-toggle><i class=\"fa fa-columns\" aria-hidden=\"true\"></i> Columns</span>. Should add the following ng-class attribute here:\nng-class=\"{ 'setting-active': $ctrl.columnVisibility.state.open }\". Could you relocate this settings so that it is the first setting available? Order should be: search, columns, settings.. And then you can remove this return statement.. Instead of an if/else, you can return an object directly in the if statement block:\njavascript\nif (_.isObject(p)) {\n  return {\n    containerPort: p.container,\n    protocol: p.protocol || 'tcp',\n    hostPort: p.host || null,\n  };\n}. And then, no need for an else statement, just return an object as well:\njavascript\nvar portAndProtocol = _.split(p, '/');\nreturn {\n  containerPort: portAndProtocol[0],\n  protocol: portAndProtocol[1]\n};. Please add this column after the Image column.\nAlso, please add the ability to sort this column as it's done for other columns.. You'll want to use td instead of th tags here.\nAlso, please use the getisodatefromtimestamp filter instead of getisodatefromtimestamp.. Can you replace the order of the div here to match the column order?\nhtml\n<div class=\"md-checkbox\">\n  <input id=\"col_vis_state\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.state.display\"/>\n  <label for=\"col_vis_state\" ng-bind=\"$ctrl.columnVisibility.columns.state.label\"></label>\n</div>\n<div class=\"md-checkbox\">\n  <input id=\"col_vis_actions\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.actions.display\"/>\n  <label for=\"col_vis_actions\" ng-bind=\"$ctrl.columnVisibility.columns.actions.label\"></label>\n</div>\n<div class=\"md-checkbox\">\n  <input id=\"col_vis_stack\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.stack.display\"/>\n  <label for=\"col_vis_stack\" ng-bind=\"$ctrl.columnVisibility.columns.stack.label\"></label>\n</div>\n<div class=\"md-checkbox\">\n  <input id=\"col_vis_image\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.image.display\"/>\n  <label for=\"col_vis_image\" ng-bind=\"$ctrl.columnVisibility.columns.image.label\"></label>\n</div>\n<div class=\"md-checkbox\">\n  <input id=\"col_vis_created\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.created.display\"/>\n  <label for=\"col_vis_created\" ng-bind=\"$ctrl.columnVisibility.columns.created.label\"></label>\n</div>\n<div class=\"md-checkbox\">\n  <input id=\"col_vis_ip\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.ip.display\"/>\n  <label for=\"col_vis_ip\" ng-bind=\"$ctrl.columnVisibility.columns.ip.label\"></label>\n</div>\n<div class=\"md-checkbox\" ng-if=\"$ctrl.showHostColumn\">\n  <input id=\"col_vis_host\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.host.display\"/>\n  <label for=\"col_vis_host\" ng-bind=\"$ctrl.columnVisibility.columns.host.label\"></label>\n</div>\n<div class=\"md-checkbox\">\n  <input id=\"col_vis_ports\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.ports.display\"/>\n  <label for=\"col_vis_ports\" ng-bind=\"$ctrl.columnVisibility.columns.ports.label\"></label>\n</div>\n<div class=\"md-checkbox\">\n  <input id=\"col_vis_ownership\" ng-click=\"$ctrl.onColumnVisibilityChange()\" type=\"checkbox\" ng-model=\"$ctrl.columnVisibility.columns.ownership.display\"/>\n  <label for=\"col_vis_ownership\" ng-bind=\"$ctrl.columnVisibility.columns.ownership.label\"></label>\n</div>. Instead of using a function, I'd rather see an object here:\nhtml\n<pre ng-class=\"{ 'wrap_lines': $ctrl.state.wrapLines }\" class=\"log_viewer\" ...>\n</pre>. You can remove this function, see my comment above.. I think that we should default to url.Host here by assuming url.Scheme == tcp.\nThis simplifies the if/else statement below.\n```go\nhost := url.Host\nif url.Scheme == \"unix\" || url.Scheme = \"npipe\" {\nhost = url.Path\n}\n``. You can actually remove that comment.. I think that we can assumenpipe://orunix://` here depending on the platform, no need for that check.\nSimply use:\ngo\nreturn manager.proxyFactory.newLocalProxy(endpointURL.Path), nil\nSee my comment above regarding the local_unix.go and local_windows.go files.. Should be renamed newLocalProxy.. File should be renamed local_windows.go.. File should be renamed local_linux.go.. This function should be renamed newLocalProxy and it's content should be the actual content of newDockerSocketProxy (relocate the function here and rename it).. Could you rebase your PR on the latest develop branch? It will be easier to review if I can only focus on the changes related to this PR.. Please rename the parameter to useNamedPipe.. What's the point of adding this ARG layer?. Why did you choose to remove the default VOLUME statement?. @seal-ss are you aware of any issues using the VOLUME statement in Windows server 1803?. @seal-ss can I still use your rebase-docker-image tool to build a 1803 image? If so, I believe that this line is not required.. Yes, if Portainer is running on Windows, then creating a local endpoint should default to use npipe. If running on Linux, default to use unix socket.\nThis is totally doable in the backend as we can create platform specific files (see my comment about local_windows.go and local_linux.go above).\nBut the frontend is not aware of the platform where Portainer is running. that's why #1186 introduced a Local boolean parameter in the endpoint creation payload.\n. Yeah our build workflow is not public yet, I still have all the docs on my side. I can give you more details on Slack at https://portainer.io/slack/, ping me there. Can you rename errSocketNotFound to errSocketOrNamedPipeNotFound and replace the message by: Unable to locate Unix socket or named pipe. Please change the text to: Manage the Docker environment where Portainer is running. Assume Linux here and assign a different value for Windows:\ngo\npayload.URL = \"unix:///var/run/docker.sock\nif runtime.GOOS = \"windows\" {\npayload.URL = \"npipe:////./pipe/docker_engine\"\n}. No need to check if the name equals local here, we should default to local endpoint if the URL is not specified. Please you update the description of the URL field in swagger.yml file as well.. Question: why is it needed to set authentication method to internal in the migration?. Question: why is it needed to reset the TLS config in the migration?. For the migration to work, you'll need to update the database version constant in this file.. You can remove this comment. Quick question, will this statement cause any issue with current windows images or 1709 ?. Great, thanks guys. Should be named options instead of stack.. The govalidator package should only be used when validating HTTP requests payload. Instead, please check against the default string value \"\":\ngo\nif referenceName != \"\" {\n  options.ReferenceName = plumbing.ReferenceName(referenceName)\n}. Good idea to trigger the clean-up right after the clone in case of problem, I believe it will solve the problem raised in https://github.com/portainer/portainer/issues/2050#issuecomment-406806141. I don't like the introduction of this function to determine which type of stack should be created, IMO we should keep the previous behaviour i.e. let the controller determine which service function to call.. The stackDeployOptions parameter do not exists in this function. This will cause an error.. See my comment above regarding the createStackFromFileUpload function, please revert to the old behavior.. As specified in the comments in the StackService, I'd rather keep the old behavior here. Can you revert the changes?. Actually, the following statement should be located before the call to handler.cloneGitRepository like you did in the create_compose_stack.go:\ngo\ndoCleanUp := true\ndefer handler.cleanUp(stack, &doCleanUp)\nRemove any other defer handle.cleanUp calls from this file.. This block should be located before the text description of the Compose path field.\nAlso, it should have a description as well:\nhtml\n<div class=\"form-group\">\n              <span class=\"col-sm-12 text-muted small\">\n                Specify a reference of the repository. If not specified, will use the <code>master</code> branch.\n              </span>\n            </div>. Should be renamed to Repository reference.. I think that you should rather use the ngf-min-size attribute on the input with the ngf-select tag rather than overriding the defaults (it will set this value for all the other consecutive calls to Upload).. Is this error check really needed? Looks like it will check for an error in a response containing an array?. Another thing, I can see an error is raised here pointing to the \"build logs output\"  but I can't see any in the UI.. I see that you're using the ImageBuildModel here but I don't see why?. If you do not manipulate the response data, the deferred pattern is not required here.\nYou can simply write:\njavascript\nservice.downloadImages = function(images) {\n  var names = ImageHelper.getImagesNamesForDownload(images);\n  return Image.download(names).$promise;\n}. See my comment above regarding the deferred pattern.\nIf you do not manipulate the response data, the deferred pattern is not required here.\nYou can simply write:\njavascript\nservice.uploadImage = function(images) {\n  return FileUploadService.loadImages(file);\n}. This controller looks to be pretty basic, actually as it's not doing anything, I think that you can remove it.. See my comment below to remove the controller declaration.. please rename this var to NFSData. Try to always use the following form for if blocks:\nif (condition) {\n} . I believe that the containerswithstatus filter is not used anymore, can you remove it ?. I think that we should use container.State === 'stopped' instead, otherwise containers in other state such as created, paused... will be considered stopped.. I think that we should simply not consider them in the total amount, we simply want the correct amount of running and stopped containers here.. I don't think so, we just need the list of all containers in the dashboard with details about running/stopped.\nThe user that reported the issue was just wondering why the number of running containers was not matching the number of running containers in the container list.. Please always use the following form for if statements:\njavascript\nif (condition) {\n// if block\n}. What's the purpose of this hidden input?. Please use the form if (condition) {}. I believe that the following code block can be located outside of the if/else block:\njavascript\nHttpRequestHelper.setPortainerAgentTargetHeader(nodeName);\ncreateNetwork(networkConfiguration, userDetails, accessControlData, true);\nNodename should be computed in each block of the if/else as well as the last parameter of the createNetwork function.. I'm not sure to understand when we need to reload and when not?. Retrieving the networks should be located inside the $q.all call.. I think that we should add another section title here:\nhtml\n          <div class=\"col-sm-12 form-section-title\">\n            Macvlan configuration\n          </div>. If there is no availableNetworks, I think that we should not show the \"I want to configure a network before deploying it\".\nUX wise, it does not make sense to show a box selector if there is only choice available. Instead, a small information message should be displayed.. Please rename this function to createResourceControlIfNeeded. Should be renamed to getRegistry.. You can remove this comment.. You can remove this comment.. For clarity, I would rename data to createContainerData.. I think that the NetworkService.connectContainer array should be created before calling $q.all, it will be easier to read.. You can remove this comment.. You can remove this comment.. Please rename the function to notifyOnError and remove the comment below.. Agree, I like the view you posted.. Missed this one, can be removed as well.. Should be renamed to connectionPromises. $q.all should be on the same line.. You can remove this comment.. You should rename this function to setMainNetworkAndCreateContainer and remove the comment below.. I believe that we don't need any reference to webhooks in this file, you can remove the changes.. package should be named webhook to be consistent with other bolt sub-packages. Folder should be renamed as well.. Returns a webhook.. Returns a webhook. Can you fix this typo in the comments below as well?. could you rename t so something that is clearer?. We do not need to manage webhook identifiers manually, I believe this function is not needed.. This function is not needed as well.. The error message should be updated to something else. There is no name associated to a webhook, there is a service ID though. . Whilst we use webhook in the bolt package, we'll use webhooks in the http package. Could you change it to /api/webhooks ?. I believe that the ProxyManager is not required.. Can you remove these comments? It will make it easier to review the changes.. I believe that we should use bouncer.AuthenticatedAccess  instead of bouncer.PublicAccess for each HTTP endpoint here.. To keep consistent with other validation messages, please use the form Invalid ServiceID.. To keep consistent with other validation messages, please use the form Invalid EndpointID.. Please fix the typo in here ... retrieve webhook.... I believe that the error message should be updated.. It corresponds to a webhook id not a service id.. @chiptus Could you revert the change to this file? It's not related to the PR.. No need to create a temporary var here, simply use:\ngo\nnanoCpus += node.Description.Resources.NanoCPUs\ntotalMem +:= node.Description.Resources.MemoryBytes. I believe that this information should be processed in the frontend rather than applying the / 1e9 in the backend. It probably needs an Angular filter.. Yup, and in that case we can simply re-use that filter as well. I'd like to stay as close as possible of the results of the Docker API and apply the processing layer in the frontend.. Please remove this comment.. Please remove these comments as well.. Please replace this comment with:\n// 1.19.2-dev. I think that you should return in the default instead of adding an extra adminitrators case test here.. Question: why do you changed the access check here to check that access is authorized instead of access denied? I see that you changed this for all the resources.. I believe that this block:\n```go\n    if resourceControl != nil {\n        if !securityContext.IsAdmin && !proxy.CanAccessStack(stack, resourceControl, securityContext.UserID, securityContext.UserMemberships) {\n            return &httperror.HandlerError{http.StatusForbidden, \"Access denied to resource\", portainer.ErrResourceAccessDenied}\n        }\n    } else if !securityContext.IsAdmin {\n        return &httperror.HandlerError{http.StatusForbidden, \"Access denied to resource\", portainer.ErrResourceAccessDenied}\n    }\n```\nShould be replace with:\ngo\nif !securityContext.IsAdmin {\n        if !proxy.CanAccessStack(stack, resourceControl, securityContext.UserID, securityContext.UserMemberships) {\n            return &httperror.HandlerError{http.StatusForbidden, \"Access denied to resource\", portainer.ErrResourceAccessDenied}\n        }\n    }\nNote  that we need to update the proxy.CanAccessStack function to return false when the resourceControl parameter is nil.. See my comment above about changing this block.. See my comment above about changing this block.. See my comment above about changing this block.. See my comment above about changing this block.. I believe the entire function could be rewritted like this (I think it's easier to read):\n```go\nresourceControl := getResourceControlByResourceID(resourceIdentifier, context.resourceControls)\n    if resourceControl == nil {\n        return resourceObject, context.isAdmin\n    }\nif context.isAdmin || resourceControl.Public || canUserAccessResource(context.userID, context.userTeamIDs, resourceControl) {\n    resourceObject = decorateObject(resourceObject, resourceControl)\n    return resourceObject, true\n}\n\nreturn resourceObject, false\n\n```. OK.. Why not simply write it like this?\ngo\nif context.IsAdmin || resourceControl.Public {\n        return true\n    }. See my comment above.. See my comment above.. Conditions that are part of the same check (inside the same parenthesis group) should be on the same line, easier to read.. The find function is not compatible with IE: https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Array/find\nConsider using _.find() instead: https://lodash.com/docs/4.17.10#find\nAs a general recommendation, please use lodash functions instead of generic JS methods as they usually less compatibility issues. . Why do you raise this kind of error here? validateAccessControl is supposed to simply validate the form fields.. Please have a look at how controllers are declared in other places of the app. I'd like to keep the codebase consistent.. Please rename vm to ctrl to be consistent with other component controllers.. Can you remove the comments?. We usually create a state object to store the fields related to the state of the component. Have a look at other components.\njavascript\nctrl.state = {\n  editMode: false,\n  editModel: {}\n}. Please put the first condition on the same line as the opening parenthesis.. Please remove the comment.. I think the error message is invalid. We do not associate any name to a wehbook.. See my comment above regarding the text of the error message.. I believe that we should raise a HTTP 500 here instead of a conflict.. The api/docker package exposes a ClientFactory to create a Docker client from an existing endpoint. You can inject the ClientFactory in this handler and use it instead of re-creating the client manually.. Why are you using context.TODO() here?\nI think that we should always use context.Background() instead.. If this handler is not returning anything to the reponse, it should return response.Empty(w).. I believe that we don't need the webhookInspect operation at the moment, I'm not sure where it would be required in the front-end.. See my comment above about removing this operation.. Simply rename this to Token instead of TokenData. Also you can remove the comments next to each field as each field name is pretty explanatory.. why not simply use this.toggleEdit = function() {\n...\n}\nInstead of creating a function and assigning it to ctrl ?. Ok, sounds good to me, any refactoring to other components should use this and we'll keep it in mind for future components.. I believe that this should be on the same line as ctrl.:\njavascript\nctrl.updateRestartPolicy(ctrl.state.editModel)\n.then.... There is already a SystemService.info() call right below the Container.query call, you can process the runtime information in the success function there instead of making another call to SystemService.info. Could you use the following label instead io.portainer.commands ?. Please use label instead of l here.. Please use label instead of l here.. What about simply displaying the command that will be used instead of showing the label title in there? Is this of any interest to you?. The actionInProgress flag should be set to true only after the confirmation modal has been clicked (if we replace a container).. All good then . You'll want to create a WebhookService (app/portainer/services/api/webhookService.js) to centralize the usage of the Webhook rest factory. See the TagService for a similar example: https://github.com/portainer/portainer/blob/develop/app/portainer/services/api/tagService.js\nYour issue related to the endpoint identifier being passed as a query parameter rather than in the request body is due to the fact tat POST requests created with ngResource will use an extra parameter for the body, e.g:\njavascript\nWebhook.create({}, {ServiceID: ..., EndpointID: ...})\nAgain, refer to the createTag function for an example: https://github.com/portainer/portainer/blob/develop/app/portainer/services/api/tagService.js#L36. I still don't think that this file is needed, can you remove it?. A new ClientFactory is already initialized in main.go, I believe that you can pass it down through server.go to this handler instead of injecting the DigitalSignatureService and creating a new factory here.. I'd like to see the following changes on the API:\n\n\nRemove the webhookInspect handler as it's not used correctly. It is actually used to retrieve a webhook associated to a specific service identifier but should not be used this way. For consistency, the inspect method should use a webhook identifier as a route parameter (but there is no need to inspect a webhook atm, so just remove it).\n\n\nUpdate the webhookList handler to support a filters query parameter, this will allow you to search for a webhook associated to a service identifier. If you need an example you can have a look at: https://github.com/portainer/portainer/blob/develop/api/http/handler/stacks/stack_list.go#L19\n\n\nReplace the parameter of the webhookDelete handler with {id} to keep a consistent API. You'll need to delete the webhook by it's identifier rather than by referencing the service identifier.. I think that you can remove this line.. The remove method should be added in rest/webhooks.js and this file can be removed.. You need to pass endpointID as a parameter in this function.. Could you use a query parameter instead of a state parameter here?\n\n\njavascript\nurl: '/new/?id'. By using a query parameter, we do not need to specify an empty id here. You can revert the changes to this file. . I believe that you can simply set $scope.formValues.displayCodeEditor to true and then return.\nIt's easier to read than the if/else block.\n```javascript\nfunction initView() {\nif ($transition$.params().id === '') {\n    $scope.formValues.displayCodeEditor = true;\n    return;\n  }\nConfigService.config($transition$.params().id)\n  ...\n``. Can you change the class tobtn-primaryinstead ofbtn-info?. Can you usedata.Name + '_copy'here?. I'd rather see a classicforloop instead of afor in`, can you update it?\njavascript\nfor (var i = 0; i < array.length; i++) {\n    var item = array[i];\n    ...\n  }. Please remove this comment.. Please remove this comment.. You can use lodash keys method to retrieve the properties of the object: https://lodash.com/docs/4.17.10#keys\njavascript\n  var labels = _.keys(data.Labels);\n  for (var i = 0; i < labels.length; i++) {\n    var labelName = labels[i];\n    // var labelValue = data.Labels[labelName];\n    ...\n  }. No need to re-assign labels here as it's already defined globally at the beginning of the controller.. Why are these parameters commented out ?. Why is it commented instead of removed?. Indeed looks unused, can be removed.. Agree, although we'll need to review the tooltip to be clear, as the user will probably ask what is a service webhook.. What about: Creates a public webhook that can be used to update the service. Will automatically re-deploy the service using the most up-to-date version of the image associated to the service. ?. Yes, let's switch to Service webhook here.. I think that we will settle for Create a webhook (or callback URI) to automate the update of this service. Sending a POST request to this callback URL (without requiring any authentication) will pull the most up-to-date version of the associated image and re-deploy this service.\nTooltips is a bad place for documentation links IMO, they should only be used for a short explanation notice about a specific feature. Our user documentation will cover this feature more deeply.. Agree. We should display the same tooltip as in the service creation view.. I wonder if we could simply use ldap.EscapeFilter instead?\nSee https://godoc.org/gopkg.in/ldap.v2#EscapeFilter. With the introduction of a webhook with a type, I believe that we'll want a more generic message such as \"A webhook is already associated to this resource\". Should be /api/webhooks. I don't think that we need this validation. The UI should never pass an identifier with a value that is less that 1. Plus, it would trigger an endpoint not found error, which is fine.. See my message above regarding updating this message.. I think that we'll want to pass a WebhookType int payload parameter as well, to be able to create other resource webhooks later on.. Ensure that the new WebhookType payload parameter is valid here.. Use the payload WebhookType here.. We should create a switch on the webhook type here, and execute a specific function accordingly.\nPlease create a new function in this file for the service update webhook.. Let's go for an int to stay consistent with the existing codebase and API. . Please remove the requestBouncer as it's not used by the handler.. Please replace the access policy to AuthenticatedAccess instead of RestrictedAccess for the webhookCreate, webhookList and webhookDelete operations.. Please replace this validation check with if payload.EndpointID == 0. Please replace this validation check with if payload.WebhookType != 1 (as it's the only type we support for now).. err is not defined here. Please introduce a new webhook related error in api/errors.go such as ErrUnsupportedWebhookType.. Please remove this block as we're not doing anything with it.. Yes, it should be the same logic as the endpoint retrieval logic.\ngo\n    endpoint, err := handler.EndpointService.Endpoint(portainer.EndpointID(endpointID))\n    if err == portainer.ErrObjectNotFound {\n        return &httperror.HandlerError{http.StatusNotFound, \"Unable to find an endpoint with the specified identifier inside the database\", err}\n    } else if err != nil {\n        return &httperror.HandlerError{http.StatusInternalServerError, \"Unable to find an endpoint with the specified identifier inside the database\", err}\n    }. Any reason why you decided to not handle the error here? I think that it should be handled (I was just requesting the removal of the code associated to the warnings).. I believe that the policy should be AuthenticatedAccess instead of AdministratorAccess for the deployKeyList operation, as any standard user account should be able to list the keys.. Why do you keep a reference to the previous stack name here? And why do you re-assign it after? \nThere are only 2 cases here: \n\nwe specify a name for the migration and it should be used (payload.Name != \"\")\nwe do not specify a name for the migration and it keeps the old name (no need to reference it). Please have the onDuplicate call on the same line here for improved readability.\n\nctrl.onDuplicate({...})\n.finally. Please have the onMigrate call on the same line here for improved readability.\nctrl.onMigrate({...})\n.finally. Please keep the old service function declaration here to avoid a mix of patterns.. Please keep the old controller function declaration here to avoid a mix of patterns.\n. Any reason for the introduction of the $q(function (resolve) {}) pattern here?. Makes sense.. Can you remove the $filter injection as it is not used?. No need to specify the isArray parameter to false here, it's the default value. You can remove it.. I don't see the point of adding an empty controller. Just remove it for now, if we need to tune the controller behavior later on, it will have to be introduced.. See my comment above about removing this controller.. Can you remove this comment?. Can you remove this comment?. Same comment here, if the controller is empty, I think we can remove it.. Same here for an empty controller.. You can use the existing arraytostr filter instead of introducing a new one.. Seems that this function is not used. Should it be? Otherwise you can remove it.. What about simply adding another option in here with a value of '' ? And then set the $scope.config.HostConfig.Runtime = '' in the controller?. See my comment below about simply setting the $scope.config.HostConfig.Runtime to ''. . See my comment below, I think we can remove this.. I don't see any usage for this? Any reason for adding this binding?. You can remove the comments.. You'll want the following extra bind mounts to start with:\n\n/run:/run:ro\n/sbin:/sbin:ro\n/var:/var:ro. I'd rather see two structs: endpointJobFromFilePayload and endpointJobFromFileContentPayload rather than three and struct embedding in endpointJobPayload.\n\nA generic validation method would not work anyway because you need to extract it as a muti-part field in one validation and as a json field in another.. See my comment above about removing this struct and adding the specified validation for in the validation for endpointJobFromFilePayload and endpointJobFromFileContentPayload.\nAlso, this field IS NOT optional, thus an error should be raised if it's actually empty.. See my comment above about this field being required, default value set in the frontend only. You can remove this.. See my comment above to solve your issue.. Again, image field is not optional.. I'd rather see this as a one-liner, makes it more readable.. See my comment above, return on one line please.. Errors should not be abstracted to generic errors, please return the error in here. Same for all the errors in this file.. See my comment below about removing this generic error handling.. You'll want to rename this handler to endpointJob.. Description should be represents all the information related to a snapshot as returned by the Docker API.. I think that any part of a component that should be hidden related to the status of an endpoint should be referring to a binding such as ng-if=\"!$ctrl.offlineMode\" instead of relying on the endpointStatus being retrieved inside each component (via EndpointProvider, see my comment below for more details).. Related to my comment above, instead of tying this component (and the others that requires this information) to the EndpointProvider, I believe that we should relay on a binding (such as offlineMode as specified above) to inject this property in the component at a higher level.\nThis will probably makes things easier for us if we decide that we don't way to relay on EndpointProvider anymore at some point in time.\nShould be applied for all components actually using this logic.. Simply pass the newly created binding offlineMode here instead of passing the status.. Same here, use $ctrl.offlineMode.. Any particular reason to remove ignoreLoadingBar: true here?. You can remove the cantDismiss binding, see my comment below.. You can simply relay on the fact that the dismissAction binding was specified here: ng-if=\"$ctrl.dismissAction\". Please remove any cant-dismiss attribute in other views as well (see my comment regarding information-panel.js).. Seems redundant with the usage of SystemService.ping. What's the point of wrapping this function? Can't you use SystemService.ping() instead of EndpointService.checkEndpointStatus() ?. This whole section seems like a big workaround for me but it will be ok for now. Ultimately we need to think about a way to store the entire endpoint object instead of storing properties like id and public URL.. See my comment above about using SystemService.ping here instead of this function that is simply wrapping it.. Try to refactor this block to smaller functions, it's quite hard to read.. No, SnapshotRaw has to respect the format of the Docker API response.. Agree, something like information-panel-offline.. IMO should be part of a specific refactor that only targets the state manager. Related to endpoint provider refactor as well.. Agree, please avoid the use of formatting tools to make it easier to review.. Hard to review the changes in there due to formatting? Can you remove anything that's not related to this PR?. Simply use the buffer, err := pattern instead of naming the err to createFileErr (or to something else in other cases). It's fine to re-assign the err variable.. See my comment above about using cli, err := and the same for all other checks.. Please remove this comment.. Somehow this triggers a background job that will pull the image. Meaning that the image will probably not be available during the container creation step.\nCan you try to figure out if we can wait for the image to be ready? \nAlso, docs state that this function returns a io.ReadCloser that needs to be closed manually.. Use the following binding:\ndismissAction: '&?'\nAnd then you'll be able to use ``ng-if=\"$ctrl.dismissAction\" to conditionally show the dismiss action.. See my updated comment above.. I think that the interceptors should be rewritten using the \"Service\" pattern:\n```javascript\nangular.module('portainer.app')\n  .factory('EndpointStatusInterceptor', ['$q', '$injector', 'EndpointProvider', function ($q, $injector, EndpointProvider) {\n'use strict';\nvar interceptor = {};\n\ninterceptor.response = responseInterceptor;\ninterceptor.responseError = responseErrorInterceptor;\n\nfunction canBeOffline(url) {\n  return (_.startsWith(url, 'api/') && (\n    _.includes(url, '/containers') ||\n    _.includes(url, '/images') ||\n    _.includes(url, '/volumes') ||\n    _.includes(url, '/networks') ||\n    _.includes(url, '/info') ||\n    _.includes(url, '/version')\n  ));\n}\n\nfunction responseInterceptor(response) {\n  ...\n}\n\nfunction responseErrorInterceptor(rejection) {\n  ...\n}\n\nreturn interceptor;\n\n```\nOverall this pattern should be applied to controllers/services/factories/interceptors.. I think that you can remove this function, it's not really used as a filter anyway (a filter is meant to be used in HTML).\nInstead, you can relay on moment which is available as a library: https://momentjs.com/\nSee my comment below.. You can remove the usage of the strToTimestamp function and replace it with something like:\nsuggestion\n      ContainerService.logs($transition$.params().id, 1, 1, $scope.state.displayTimestamps ? 1 : 0, moment($scope.state.sinceTimestamp, 'X'), $scope.state.lineCount, skipHeaders)\nSee moment docs: https://momentjs.com/docs/#/parsing/string-format/. I think we can remove this whole cmd declaration plus comment. See my comment below.. Regard comment above we can use a more inline style:\nsuggestion\n        Cmd: strslice.StrSlice([]string{\"sh\", \"/tmp/script.sh\"}),. ALWAYS handle errors in Go:\ngo\n    err = pullImage(cli, image)\n    if err != nil {\n        return err\n    }. For some reasons, I always get the following error when trying to run a job with the ubuntu:latest image:\n2018/10/17 05:06:28 http error: Failed executing job (err=net/http: request canceled (Client.Timeout exceeded while reading body)) (code=500). Please use font-awesome icons instead of glyphicon icons.. Please use font-awesome icons instead of glyphicon icons.\n. Stack name validation should be done against all endpoints for all type of providers, you can simply avoid the provider/role check here:\nsuggestion\n        true,. Stack name validation should be done against all endpoints for all type of providers, you can simply avoid the provider/role check here:\nsuggestion\n        true,. Should be part of $scope.state. Should be part of ctrl.state.. Please rename the function and use the following pattern when associating functions to this controller:\n```javascript\nctrl.onStackNameChange = onStackNameChange;\nfunction onStackNameChange(name) {\n...\n}\n```. Stack name validation should be done against all endpoints for all type of providers, you can simply avoid the provider/role check here:\nsuggestion\n        true,. I do not think there is a need to bind applicationState at all here. Please remove any occurence of this binding.. You can remove the comment.\nsuggestion. It's already added :-)\nSimply using the suggestion I made should be fine (you'll want to test it tho)  . @kendrickm yeah no need, we simply check the logs via the container logs.. I don't think this is needed for the jobs datatable. You can remove it as well as the dependency on EndpointProvider (check for other unused dependencies too).. I think that the job datatable should only be available for admin users too.. Can you create a more generic prune function ? And use filters as function parameter, could be re-used somewhere else later on (similar to ContainerService.containers()). jobs are an action/sub-resource of /api/endpoints, IMO we should simply update the Rest factory associated to endpoints instead of creating a new one for jobs only.. suggestion\n              <i class=\"fa fa-trash-alt space-right\" aria-hidden=\"true\"></i>Clear job history. Why are you considering 403 here? . You can remove this comment.. Think about renaming this file to ping.js.. What do you think about relocating these files to a v1 folder? Would make it easier to track/remove them later on when we deprecate old agent versions support.. For consistency I'd rather see the usual service pattern here.. Can you relocate this in the $scope.state declaration above?. I do not think there is a need to pass this as a binding anymore.. don't we need to pass the version parameter here?. What about passing the version parameter as a global parameter instead of a per method parameter? (like it's done for browse). Don't we need to specify the agent version in here as well?. suggestion\n    containerId: '<',. suggestion\n    nodeName: '<',. suggestion\n    taskId: '<'. suggestion\n    status: '<',. I'd rather see this binding being called state instead of settings.\nsuggestion\n    state: '=',. Please relocate this block in the this.state declaration above.. Note that the introduction of this Controller breaks some table functionalities (column sorting, pagination). You'll probably need to rewrite the TasksDatatableController.. suggestion\n  this.state = {. Please relocate in the ctrl.state declaration above.. suggestion\n    config.MinVersion = tls.VersionTLS11. suggestion\n    config.MinVersion = tls.VersionTLS11. See my comment in the agent PR related to the agent, should be available as a part of v2 API.. @farodin91 not really, you'll have to copy the GenericDatatableController and introduce the new state object.. following our discussion as we are using this to determine the agent version, we need to use the latest API format (no version), you're right, ignore my comment.. I think that we broke the compatibility with v1 agent in a recent commit, see https://github.com/portainer/portainer/blob/1.19.2/app/agent/rest/browse.js#L4\nWe need /docker/browse/:id/:action as we need to support the volume identifier as a route variable. The volumeBrowserService will probably require an update too.. As this endpoint did not actually change between v1/v2, I wonder if we can simply keep using Agent for both v1 and v2 instead of AgentVersion1 and Agent ?. See my point above, might need to declare /browse/:volumeID/:action in the rest service.. What about using a conditional request in the $q.all() instead ? I think it's a lot clearer.\nExample: https://github.com/portainer/portainer/blob/develop/app/docker/views/dashboard/dashboardController.js#L18. See my comment above, might be clearer to introduce $q.all() here with a conditional request.. Simple comment, what would happen if the request fails here?. Ignore my comment, we need to keep this one because the current version of the agent do not support the version in the URL path.. suggestion\n      return localStorageService.get('datatable_text_filter_' + key);. suggestion\n      localStorageService.set('datatable_text_filter_' + key, data);. You are not exporting onTextFilterChange() as a part of the component API. This is probably why the filter is not persisted on update.\nsuggestion\n    this.onTextFilterChange() {. Using the same table-key for this component and the template-list component will make them share their filter.\nsuggestion\n      endpoints=\"endpoints\" table-key=\"endpoints\". Why do we need to specify the PORTAINER_VERSION here?. We probably want to update any ssbkang occurence to portainer.. What's the goal of this filter?. All good. Ah then you can simply use the existing stripprotocol filter and remove this one.. I believe that we should use a clearer pattern using variable interpolation here:\nsuggestion\n          <div class=\"comment\">{{ stackCount === 0 ? 'Stack' : 'Stacks' }}</div>. suggestion\n              <i class=\"fa fa-th-list space-right\" aria-hidden=\"true\"></i> {{ $ctrl.model.Snapshots[0].StackCount === 0 ? 'stack' : 'stacks' }}. You're right !. You're right, it was actually more of an example than a suggestion as I did not test it.. suggestion\n        log.Fatal(\"No administrator account was created after 5 min. Shutting down the Portainer instance for security reasons.\"). The database version must be incremented in portainer.go to trigger this migration.. Can probably be relocated to errors.go.. suggestion\n      return findCurrentContainer().then(function onContainerLoaded(container) {. versionInterceptor? Any reason for this name?. That's quite unclear, either find an clearer way to implement this or add a comment.\nBy reading this I have no idea on how you actually retrieve the last and n parameters. Btw, n makes no sense as a variable, should be renamed (I know it's the variable used in the registry API, it seems that page would fit better here).. suggestion\n    clipboard.copyText('curl -L https://downloads.portainer.io/agent-stack.yml -o agent-stack.yml && docker stack deploy --compose-file=agent-stack.yml portainer-agent');. I was not aware of the angular.extend function ! This is brilliant, actually most of the custom Datatable controllers are duplicate of the generic datatable controller with some extended code. I believe that we will be able to leverage this to refactor these custom controllers and remove code duplication.\ncc @xAt0mZ . suggestion\n      var predefinedNetworks = ['host', 'bridge', 'none'];\nLet's use regular variable declaration here to keep the codebase consistent.. Great, yes it was just a note not something to work on at the moment. Looks like this code block in incomplete?. suggestion\n// GetExtensionURL retrieves the URL of an extension running locally based on the extension port table.. ",
    "SeaOfTea": "Is this possible using the app templates?\n. @deviantony #311 :)\n. I have had this in the past when trying to start up containers, but can no longer recreate it.\n. ",
    "raphaelquati": "It would be nice to compile on Windows.. Same problem here.\nIf you run the docker via console, it works, but network name is \"bridge\", and not \"swarm-agent-??????????/bridge\". @mkulagowski, Yes.\nBut portainer is not able to create a container. \nCreating a container (via portainer):\nIf I do not select any network. Portainer shows \"network name not found\" (it tries to use \"nat\" network)\nIf I select a network, it is showing \"network swarm-agent-?????/bridge not found\".\nBut if I try to create the container via console:\ndocker run -d -p 80:80 yeasy/simple-web\nThe container appears at Portainer,  running fine, with the network \"bridge\".\nBut if I try to run (at console):\ndocker run --network \"swarm-agent-20934B88000000/bridge\" -d -p 80:80 yeasy/simple-web\n\nSame error from Portainer.\n. @mkulagowski , Yes. It's very strange.\nI've made another test: use the network id. To me:\ndocker run -d --network=4efd39a8a75d yeasy/simple-web\n\nIt Works.\n. Update:\nI've checked Azure docs again (https://docs.microsoft.com/en-us/azure/container-service/container-service-intro) and I've found this:\n\nAzure Container Service uses Docker Swarm (prior 1.12) and not Docker swarm mode (1.12 and above).\nSo, I've reinstaled ACS, but using this (https://github.com/Azure/acs-engine).\nAnd portainer works fine with docker in swarm mode.\n\n. @deviantony, sorry my \"no response\".\nI've checked Azure docs again (https://docs.microsoft.com/en-us/azure/container-service/container-service-intro) and I've found this: \n\nAzure Container Service uses by default Docker Swarm (prior 1.12) and not Docker swarm mode (1.12 and above). \nSo, I've reinstaled ACS, but using this (https://github.com/Azure/acs-engine). \nAnd portainer works fine with docker in swarm mode.\n. ",
    "adrianfalleiro": "@deviantony Currently testing a refactored Gruntfile. Will submit a PR in the next week or so. @qiankunli Do you mean according to the LCD screen size?. I wondered this myself too. According to https://github.com/portainer/portainer/issues/679 Portainer does not currently support SSL/TLS. You will need to setup a reverse proxy to do this.. Yes, that's the only real benefit I see.. @deviantony What are your thoughts on adding a command line flag to indicate the base href?\nE.g portainer --baseHref=/portainer and it would default to /.  We'd need to run index.html through html/template and inject the baseHref.\nIn truth I think this makes it more complex than necessary. Also the current routing works fine.\nI'll keep working on finding an Angular solution. Will update PR as I progress through. I think the task is useful for Angular and CSS development, where you don't want to recompile the entire application.\nPerhaps adding a new task like grunt.registerTask('clear-all', ['clean:all']) might be a good idea?. @WTFKr0 Yes that sounds better. @deviantony Yep I'll take at look at #40. . @deviantony I'm able to reproduce that issue when TLS is enabled and I try to connect with http, not https - with both letsencrypt and self-signed certs.\nE.g portainer is running with TLS enabled on 192.168.99.100:9000 and I access http://192.168.99.100:9000. ",
    "1138-4EB": "I split the refactorization related modifications from #938 and I opened a new issue with these: #939.\n\nTasks with parameters/functions are used.\nbuild<Platform><Arch>Binary tasks are replaced with a single one.\ngrunt-if dependency is dropped.. I tried to follow the same approach with run, runSwarm, etc. but the plugin (watch) does not support any kind of function or parameter: https://github.com/gruntjs/grunt-contrib-watch\n\nHowever, I slightly reduced the verbosity, replacing the task list with a single task.. I can't reproduce this. Is it still a bug?. Interesting. I tried with alpine and both vi and vim work. I will investigate later if I am using any different library version.. I arrived here while looking for a 'simple' solution to access docker containers from the host, using docker hostnames/aliases. There are two approaches to achieve it:\n\nEmbedded DNS server\nDocker API (cli, HTTP, Go, Python...)\n\nAlthough the embedded DNS server is not directly reachable from the host, running a dns proxy (such as grimd) in the corresponding subnet suffices. Then, to resolve all the containers in different networks the dns proxy needs to be connected to all of them. On top of that, the user is required to add the dns proxy to the /etc/resolv.conf file in the host. I don't like it because i) it's not a clean solution and ii) I don't know how are multiple aliases resolved.\nAs a result, the major advantage of the docker API is that a single connection to the engine (or engines) is required to gather the info of all the subnets and containers. At gitter, @deviantony suggested to use docker-gen. It is the closest solution to fit my needs, but there are two drawbacks: the info is retrieved through a docker socket, and it is designed for a single docker engine. Portainer, on the one hand, is thought to handle multiple engines. On the other hand, portainer actually retrives nearly all the information that docker-gen provides. Then, I think that it would be cleaner if portainer provided part of the functionality of docker-gen. To put it simple: better a single service than two if they are doing nearly the same.\nThe interesting point, though, is how to present that information. One of the examples of docker-gen is to automatically generate a configuration file for nginx, which is a too specific format. Then, a solution might be to use a reverse proxy and add an entry to /etc/hosts. In this context, traefik is probably a better alternative due to additional features, such as multiple backend support. But, mainly, because docker HTTP API is used. Still, an entry needs to be added to /etc/hosts for each local domain.\nHowever, because the reverse proxy is a container itself, the entrypoint where the domain in /etc/hosts must point is also dynamic. Therefore, some mechanism in the host is required to:\n\nKeep /etc/hosts up to date with the changes in docker.\nProvide a nameserver that is updated with the changes in docker.\n\nThis is the point where I am stuck. These are the options I see:\n\nWrite a Go/Python app to be run in the background, that interacts with the docker api (moby) and updates /etc/hosts. (only valid for the local docker engine)\nRun a nameserver in a container with a fixed IP\n  2.1 Create a template in docker-gen to generate a DNS zone file. (multiple instances required for different docker engines)\n  2.2 Guess if traefik can generate a DNS zone file.\n  2.3 Ask the developers of portainer if they think adding such a feature is useful.\n\nIn summary I am suggesting that a new 'DNS/Proxy template generation' feature is added to portainer. I.e., that networks, IPs, hostnames, aliases and container names of all the connected engines are made available in a data structure, to let users choose how to map them to their scheme. A very first approach can be to provide that in a JSON file. This would effectively provide a full structured description of the network so that no direct access to any of the engines is required. Indeed, if the file is saved directly to the host, no access to docker networks is required at all.\nOn top of that, some predefined naming schemes can be made available in the frontend along with most common templates (nginx, DNS zone file, apache...). E.g., <container_name>.<network_name> and <alias>.<network_name>, optionally appending .docker or .<domain>. See resolvable which seems to be dead, unfortunately.\nNote that I have used a single nameserver and a single reverse proxy as a simplification. The most interesting feature is that the proposed solution is agnostic to the actual number of containers and networks. A possible use case is to run the 'copy' of multiple VPS with different stacks, each in a docker network, and have a single nameserver automatically adapt to full copies going up and down through docker-compose.\n. > This is a good idea, and something that Portainer should be able to provide. A mechanism to centrally provide a list the current contents of the Docker engine integrated DNS makes sense.\nPlease, note that, even if the data is nearly the same as that provided by the embedded DNS, the feature is quite different. Certainly, if the embedded DNS implementation was consistent, my suggestion would be somehow redundant, since the user could point to multiple internal DNS addresses. My suggestion would still make sense, but it'd be a duplication of the embedded DNS services. However, at now, the implementation is not consistent at all:\n\nhttps://github.com/moby/moby/issues/20847\nhttps://github.com/docker/compose/issues/2925\nhttps://github.com/moby/moby/issues/31238\n\nThen, although it is probable that, at some point, resolving through embedded DNSs will be enough, the user will still be required to set 'names' and 'hostnames' per container (as they are launched). The proposed solution is to handle the 'big picture' directly. As result, this is a complementary feature which is useful even if the embedded DNS is properly implemented.\nFor example, with the proposed feature I can make every container created with docker-compose and attached to a user-defined network be always reachable through <container_name>.<net_name>, <short_id>.<net_name>, <service_name>.<net_name> and <alias>.<net_name>. At the very same time, I can map those to *.<mydomain>, instead of *.<net_name>. Note that this is independent of how docker actually implements embedded DNS services. That is, on top of the eight 'dns names' I just mentioned, containers conected to docker networks can still use <short_id> or <alias> directly, without appending any net or domain name. Furthermore, shall domainname=mydomain option be used when launching any of the containers, four of the mentioned names will be available throught embedded services (practically redundant). In the end, the objective is not to modify the configuration of containers, so that using this feature does not affect deployment scripts. If the user wants to do so, the domain can be provided when containers are created, but thanks to the suggested feature, there is a consistent mechanism to do so which does not require it.\n\nI do wonder why Docker doesnt do this natively.\n\nIndeed, it does, indirectly though. All the required info is provided through the API, and `domainname' like envvars. Moreover, in most practical uses cases there is always a DNS available which is external to docker but forwards embedded DNSs. Then, from a 'classic' point of view, the usual stack works well enough, although a container is required to be connected to each subnet where we need to get requests resolved.\nGoing deep into this, portainer could check which of the desired DNS/proxy entries are actually resolvable through embedded resources so that some visual indication is given to the user. Then, he/she can choose which ones to add to auxiliar services (if any). Nevertheless, I think such a feature should be considered later, after a draft is done.\n\nThe source of my 'problem' now is that I am setting a rather 'unsual' configuration, i.e., a fully local set up with the minimum number of containers. 'Virtuallly' it makes little sense to deploy portainer + gogs + drone locally, avoiding any cooperation with other users. However, my target audiende are university students with little to none knowledge about networks. I want to make it easy for them to use docker, as a 'platform' for continuous integration and web service development/deployment. At the same time, I want to make them understand about orchestration/coordination, so that they can learn how every piece contributes to the service as a whole. Portainer is fantastic so that they don't have to learn most of docker commands by heart. But it is lacking some info to make all the 'names' 'noob friendly'. Hope this makes clear that the suggested feature is not a 'must have', but I think it is very useful to 'hide' IP and network details to most new users. Indeed, I believe this is quite close to the 'concept' of portainer.\n\nUnfortunately it will be a while before our dev resources can get to this (unless we can get someone to fund the feature), so best case is someone in our community volunteers to write it. \n\nI am actually adding the missing details to the portainter frontend. I'll try to provide minimum functionality related to this issue, i.e., to generate a JSON containing all (and just) the relevant info for name resolution. This means I am diving into portainer's codebase to add 'backend' functions/logic, if required. See #899.\nHowever, I am not a web developer and I am not used to the programming model of JavaScript/Angular. Then, I would be grateful if you could decide visualization details. I mean, should I add a new item to the sidebar or is it better to place it inside 'Networks', as a new subsect under 'Networks' (sic)? Is there any 'design constraint' such as the maximum number of columns which should be displayed or the width of these? In the same path, I'd be rather lost if I had to implement buttons to selectively hide/show info, or 'forms' to allow the user to define templates through the frontend. I'll start with an 'ugly' solution, just to test that the concept works as expected. It'd be great if you could provide most basic style guidelines meanwhile. I'll stick to those, so that it is easier for you (developers), or any other contributor, to polish the GUI.\nFurthermore, it'd great to have some feedback from @fthamura, @lavvy, @armpogart and/or @WTFKr0. Actually, @WTFKr0 already pointed the most difficult part:\n\nI think portainer can maybe have an option to display those routes, but it has to be compatible with all solutions, so it's complicated IMHO\n\nThat is, which template/generation system(s) should be provided given the large amount of possible and probable uses cases.. @nirfse , meanwhile, you can achieve the same functionality with traefik and dnsmasq:\nhttps://github.com/portainer/portainer/issues/1445#issuecomment-347075263\nhttps://github.com/portainer/portainer/issues/1452#issuecomment-347760779. It seems that the embedded DNS implementation is not as consistent as I thought. See #571. So, I checked all the fields returned by docker inspect <container> which can be used as a name or alias. These are:\n\ncontainer.Id\ncontainer.Name\ncontainer.Config.Hostname\ncontainer.Config.Labels[\"com.docker.compose.service\"]\ncontainer.NetworkSettings.Networks (map) > network.Aliases\n\nThe ID is now shown in the URL, but not in the page itself. On the one hand, in some devices/browsers the URL is not always visible. On the other hand, the 'short id' is created with the first 12 chars of the ID. The short id is shown with docker ps, but not in portainer. So, I added a row named 'ID' to the 'Container Status' part of 'container.html', just above 'Name'.\nI replaced the row 'Name' in the same part with 'Name(s)'. Now, on top of container.Name, container.Config.Hostname and container.Config.Labels[\"com.docker.compose.service\"] are shown. Note that the edit button is maintained and it modifies container.Name only.\nAt the bottom, in part 'Connected networks' I added a column named 'Aliases', where network.Aliases is shown.\nYou can check this commit.\n\nNext steps:\n\nNow the full ID is shown, but I think it'd be better to show the short one and provide a button to expand/collapse and/or copy.\nIn the tests I've done, the hostname is the short id. Since it is already shown in the line above, an 'if' statement should be added in row 'Name(s)', in order to decide when to show it.\n\"com.docker.compose.service\" is sometimes equal to the container name. On top of that, it is already shown in part 'Container details'. However, if multiple instances of a service are deployed, the service name can be used to reach any/one of them (it is not determined which exactly). E.g. two containers named tmpci_drone-server_1 and tmpci_drone-server_2 can be reached with drone-server through the embedded DNS. Therefore, I'd keep it in 'Name(s)'. However, if there is a single instance of the services and the container is named as the service itself, this label is redundant. Then, an 'if' statement should be added to compare it to the container name.\nWhile all the mentioned variables are strings, Aliases is a slice of strings. It is normally empty, but when a container is created with docker-compose, the short id is added as an alias. On top of that, any alias which is explictly set is added. Therefore, on the one hand, a 'for/range' loop is required to check every alias, prior to showing it. If it is equal to the short id, it should not be shown. On the other hand, sometimes the container name or the service name are also added to this slice. These should neither be shown. The remaining list will be usually empty, or will have very few items. Therefore, I don't think that a small button is required. However, please check the commit linked above and tell where would you like to show that button, instead of the 'Aliases' column that is shown now.\n\nI believe that container.html is not the place to implement the logic. I am about to write it in containerController.js, inside update. @deviantony, is it correct there? Or should it go in app/models/docker/container.js/app/models/docker/containerDetails.js? Apart from that, it might be not optimal to process the logic in the client side every time the page is loaded. Does it make sense to you to save it in a temporal data structure which is updated either periodically or depending on engine events?. @strawgate , you can export multiple images at once with:\ndocker image save image:1 image:2 image:3 | gzip -c > backup.tgz\nand then import them:\ndocker load < backup.tgz\nI understand that it'd be easier to have this as a feature in Portainer. But, meanwhile, the only 'hard' part is to type the names of all the images you want to export.. > @1138-4EB we prefer not to give access to the console on the host and instead allow customers management access only through portainer so giving them the ability to load images would let them upgrade services without access to the underlying host and without requiring access to a registry.\nThis is a possible workaround, based on the command above, so that no explicit access is given to the console on the host:\n\nProvide some method to upload a *.tgz to a known directory on the host. User's don't need access to the console, but to some ftp/syncthing/dropbox. The most straightforward is for admins to manually copy it.\nIn portainer, tell users to:\nRun a container (say alpine), with the docker socket bind to the host's (/var/run/docker.sock:/var/run/docker.sock).\nGo to container details and open a bin/sh console inside the container.\nIf docker cli is not installed in the container, install it (apk add docker).\nLoad the *.tgz from the known directoy on the host: docker load < /path_to_img_dir/images.tgz.\nExit and remove the container.\n\nIndeed, I think that the tricky part to include this as a feature in portainer is how to get the *.tgz files and place them in a known dir on the host, because no directoy is bind by default. If this step is solved (e.g. running a temporal container with a dir bind to the host and a web-based r/w file manager, such as those mentioned in #1380), the problem is reduced to running docker load after the user has finished copying the files.. > We have an issure related to gruntfile refactoring: #40, I'll link so we can track this.\nI'll open a new PR to work on the refactorization of the gruntfile. Then, I'll make this PR be based on that. I think this will help you with review, when you have time.\n\nIssue 1: yes, the artifacts generated by the build (go binary and javascript app) should be available from outside the container (login and pushing is related to 'deployment' and not building, so it should be considered outside from this process/PR)\n\nI think that we are mixing 'artifacts' here. Those you refer to are saved to /tmp/portainer-builds (the path you use now, I didn't change it) inside the portainer-builder, and then copied to the host. This is the content of the destination dir in the host after the execution of ./build_env:\nbash\nportainer-work/builds/\n\u251c\u2500\u2500 darwin-amd64\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 portainer\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 css\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 app.3b18a74f.css\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 fonts\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 fontawesome-webfont.svg\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 fontawesome-webfont.ttf\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 fontawesome-webfont.woff\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 fontawesome-webfont.woff2\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 glyphicons-halflings-regular.svg\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 glyphicons-halflings-regular.ttf\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 glyphicons-halflings-regular.woff\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 glyphicons-halflings-regular.woff2\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 montserrat-regular-webfont.svg\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 montserrat-regular-webfont.ttf\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 montserrat-regular-webfont.woff\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 ico\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 apple-touch-icon-precomposed.png\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 favicon.ico\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 images\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 logo_alt.png\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 logo.png\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 index.html\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 js\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 app.52f70026.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 portainer-darwin-amd64\n\u251c\u2500\u2500 linux-386\n    \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 linux-amd64\n    \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 linux-amd64\n    \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 linux-arm\n    \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 linux-arm64\n    \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 linux-ppc64le\n    \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 windows-amd64\n    \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 portainer-R-darwin-amd64.tar.gz\n\u251c\u2500\u2500 portainer-R-linux-386.tar.gz\n\u251c\u2500\u2500 portainer-R-linux-amd64.tar.gz\n\u251c\u2500\u2500 portainer-R-linux-arm64.tar.gz\n\u251c\u2500\u2500 portainer-R-linux-arm.tar.gz\n\u251c\u2500\u2500 portainer-R-linux-ppc64le.tar.gz\n\u251c\u2500\u2500 portainer-R-windows-amd64.tar.gz\nNote that \"R\" is the <VERSION> I used.\nThe artifacts I meant are the docker images which are built during the build process. More precisely, in function build_and_push_images() inside build.sh. This function is only run for 'linux' platforms. This also something I just kept (although partially rewritten, it is functionaly equivalent):\nbash\nfunction build_and_push_images() {\n  docker build -t \"portainer/portainer:$1-${VERSION}\" -f build/linux/Dockerfile .\n  docker tag  \"portainer/portainer:$1-${VERSION}\" \"portainer/portainer:$1\"\n  docker push \"portainer/portainer:$1-${VERSION}\"\n  docker push \"portainer/portainer:$1\"\n}\nThe first command is properly executed, and the docker image (with two tags) is available in the host, because the socket is mounted. However, the last two commands (push), which should upload the new images to docker hub, shows an authentication error (indeed, I do not login at all). As a result, after running build_env.sh 5 images and 10 tags are shown in the host:\nbash\n$ docker images\nREPOSITORY           TAG             IMAGE ID      SIZE\nportainer/portainer  linux-ppc64le   ee2d63245487  10.27 MB\nportainer/portainer  linux-ppc64le-R ee2d63245487  10.27 MB\nportainer/portainer  linux-arm64     b1f8df503da2  10.07 MB\nportainer/portainer  linux-arm64-R   b1f8df503da2  10.07 MB\nportainer/portainer  linux-arm       d3c04a2fcd3e  9.49 MB\nportainer/portainer  linux-arm-R     d3c04a2fcd3e  9.49 MB\nportainer/portainer  linux-386       da8182559586  8.946 MB\nportainer/portainer  linux-386-R     da8182559586  8.946 MB\nportainer/portainer  linux-amd64     df6c5166f455  10.26 MB\nportainer/portainer  linux-amd64-R   df6c5166f455  10.26 MB\nAccording to your last message I'd say that docker push commands should be dropped from build.sh. Then, a new script (named deploy.sh?) could be added to i) push images and ii) push tarballs. However, this would break the current behaviour of build.sh.\n\nIssue 2: why would the container requires access to the host Docker socket?\n\nIgnoring the modifications I did, i.e., in your current dev branch, build<Platform><Arch>Binary grunt tasks execute a command to run a docker container:\njavascript\nbuildWindowsAmd64Binary: {\n        command: [\n          'docker run --rm -v $(pwd)/api:/src -e BUILD_GOOS=\"windows\" -e BUILD_GOARCH=\"amd64\" portainer/golang-builder:cross-platform /src/cmd/portainer',\n...\nTherefore, if grunt itself is run inside a container (portainer/portainer-builder), all those portainer/golang-builder:cross-platform instances are created from a container. As far as I am aware, the most straightforward approach to allow so is to mount the socket: https://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/\nOn top of that, these are two major advantages over using docker-in-docker:\n\nBuilt and tagged docker images are directly available in the host. This is desirable to split build from deploy, as commented above.\nDocker image portainer/golang-builder:cross-platform will be kept in the host. With docker-in-docker, it would be downloaded every time the portainer/portainer-builder is created.\n\n\nIssue3: see my comment above for the recess problem, I think that you're missing a bower install step after npm install\n\nIndeed, bower was not installed at all. I added it, following the same approach as with node_modules. It works seamlessly now. These are the relevant commands in the dockerfile:\n``` bash\nwget https://raw.githubusercontent.com/$REPO/$BRANCH/package.json\nwget https://raw.githubusercontent.com/$REPO/$BRANCH/bower.json\nnpm install -g bower findup-sync resolve nopt grunt-known-options && npm install\nbower install --allow-root\n````\nStill, the following warnings are shown, but I think that none is critical:\n``` bash\nnpm WARN deprecated bower@1.8.0: ..psst! While Bower is maintained, we recommend Yarn and Webpack for new front-end projects! Yarn's advantage is security and reliability, and Webpack's is support for both CommonJS and AMD projects. Currently there's no migration path but we hope you'll help us figure out one.\nnpm WARN deprecated bower@1.8.0: ..psst! While Bower is maintained, we recommend Yarn and Webpack for new front-end projects! Yarn's advantage is security and reliability, and Webpack's is support for both CommonJS and AMD projects. Currently there's no migration path but we hope you'll help us figure out one.\nnpm WARN deprecated grunt-recess@0.3.5: Deprecated as RECESS is unmaintained\nnpm WARN deprecated minimatch@0.2.14: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue\nnpm WARN deprecated minimatch@0.3.0: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue\nnpm WARN deprecated graceful-fs@1.2.3: graceful-fs v3.0.0 and before will fail on node releases >= v7.0. Please update to graceful-fs@^4.0.0 as soon as possible. Use 'npm ls graceful-fs' to find it in the tree.\nnpm WARN deprecated minimatch@0.4.0: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue\nnpm WARN prefer global LiveScript@1.0.1 should be installed with -g\nnpm WARN prefer global istanbul@0.1.46 should be installed with -g\nnpm WARN prefer global jshint@2.9.4 should be installed with -g\nnpm WARN prefer global ycssmin@1.0.1 should be installed with -g\nnpm WARN prefer global recess@1.1.9 should be installed with -g\nnpm WARN prefer global karma@0.8.8 should be installed with -g\nnpm WARN lifecycle portainer@1.13.2~postinstall: cannot run in wd %s %s (wd=%s) portainer@1.13.2 bower install /portainer-build/portainer\nnpm WARN portainer@1.13.2 No description\nnpm WARN portainer@1.13.2 No license field.\nbower angular-utils-pagination#~0.11.1     invalid-meta for:/tmp/db64d55248fae74019f8070a2fa031f3/bower/7e1bb4ea8a21d16f4f912addaa207805-6864-y55zhS/bower.json\nbower angular-utils-pagination#~0.11.1     invalid-meta The \"name\" is recommended to be lowercase, can contain digits, dots, dashes\nbower angular-google-analytics#~1.1.9      invalid-meta for:/tmp/db64d55248fae74019f8070a2fa031f3/bower/f41b7351bf79de70b7910978744e7bc7-6864-pFOQgi/bower.json\nbower angular-google-analytics#~1.1.9      invalid-meta The \"main\" field cannot contain minified files\nbower Chart.js#1.0.2                       invalid-meta for:/tmp/db64d55248fae74019f8070a2fa031f3/bower/671a34f677b2295c20efbb71687965ad-6864-QWAGm9/bower.json\nbower Chart.js#1.0.2                       invalid-meta The \"name\" is recommended to be lowercase, can contain digits, dots, dashes\nbower rdash-ui#1.0.                       invalid-meta for:/tmp/db64d55248fae74019f8070a2fa031f3/bower/02e9d3bc79a7cd01135279ad336a39ff-6864-kZED16/bower.json\nbower rdash-ui#1.0.                       invalid-meta The \"main\" field cannot contain minified files\nbower rdash-ui#1.0.                       invalid-meta The \"main\" field cannot contain font, image, audio, or video files\nbower rdash-ui#1.0.                       invalid-meta The \"main\" field cannot contain font, image, audio, or video files\nbower rdash-ui#1.0.                       invalid-meta The \"main\" field cannot contain font, image, audio, or video files\nbower rdash-ui#1.0.                       invalid-meta The \"main\" field cannot contain font, image, audio, or video files\nbower rdash-ui#1.0.*                       invalid-meta The \"main\" field has to contain only 1 file per filetype; found multiple .css files: [\"dist/css/rdash.css\",\"dist/css/rdash.min.css\"]\nbower angular                          extra-resolution Unnecessary resolution: angular#1.5.11\n``. I added a.travis.yml` file, so that all the binaries and images are built after each commit/PR. All of it is done in less than 9min: https://travis-ci.org/1138-4EB/portainer/builds/248611716\nMoreover, artifacts can be automatically pushed to github releases and/or docker hub. However, I don't know if you want to use this feature.. >Yes, I'd rather see a new deploy.sh script (push images would be enough for now, though pushing the tarballs on github would be nice too indeed).\nThat's cool. I was not comfortable with leaving those docker push in build.sh. I'll move them to a new factory_deploy.sh.\nEDIT: docker build and docker tag steps should be part of build.sh or factory_deploy.sh?\n\nEDIT: See my update on Travis below to see if Travis could be used instead of this deploy script.\n\nTravis is just a Ubuntu (virtual) machine and it does not provide built-in features to deploy docker images. That is, the script will be executed in travis. The main point of this PR is to have a portable set of scripts so that these can be executed equally in your machine, in travis or in any other. Indeed, I used the most generic clauses, in order to make them compatible with bash, dash or the shell in alpine linux.\n\nI'd be keen to have a look at this. I've got a few questions though:\n   - Can it automatically creates and push an image to the hub when a PR is open?\n   - Can it refresh this image when any commits are made for a that PR?\n   - Can it delete that image once the PR is closed?\n   - Can it automatically creates and push an image after a commit in the develop branch ?\n\nOn the one hand, a docker-hub user is required (I'd recommend to create a new one just for this), and you should use travis' CLI (https://github.com/travis-ci/travis.rb#installation) to configure your credentials:\n$ travis encrypt DOCKER_EMAIL=email@domain.com\n$ travis encrypt DOCKER_USER=username\n$ travis encrypt DOCKER_PASS=password\nThen, this should be added to .travis.yml:\nenv:\n  global:\n    - secure: \"UkF2CHX0lUZ...VI/LE=\" # DOCKER_EMAIL\n    - secure: \"Z3fdBNPt5hR...VI/LE=\" # DOCKER_USER\n    - secure: \"F4XbD6WybHC...VI/LE=\" # DOCKER_PASS\nAs a result, docker push commands will work. For more details, see https://sebest.github.io/post/using-travis-ci-to-build-docker-images/\nOn the other hand, By default, travis builds are triggered with each commit to any branch, including PRs. Then, with the changes proposed here, 1, 2 and 4 are already done. I just have to write deploy.sh and make travis execute it on successful builds. Note that travis provides envvars to identify the branch. These can be used to set the name of the image which is pushed. See TRAVIS_BRANCH: https://docs.travis-ci.com/user/environment-variables/#Default-Environment-Variables\nQuestion 3 is a little tricky tho. How do we know that a PR is closed? If it is successfully merged, I suppose that we can parse TRAVIS_COMMIT_MESSAGE to identify it. Then, on top of pushing the new image of the destination branch, it would delete the image of the source branch. Still, there are a couple of problems:\n\nI am not sure about docker CLI allowing to delete images from a repository. Aparently, only push and pull are provided. The documentation tells to delete images through the GUI: https://docs.docker.com/datacenter/dtr/2.2/guides/user/manage-images/pull-and-push-images/#push-the-image \nWhat should we do when a PR is closed but not merged (say it is not accepted)? I don't think that this will trigger anything in travis. Travis is added to your GitHub repo as a service, so you can not explictly set webhooks for any event you want. Well, you might be able to (see ref to GitHub API below), but it is not so straightforward.\n\n\nI'd love to use the automatic push feature for artifacts, that'd be really handy for the release process.\n\nThis is the main use case for travis, so it is a built-in feature: https://docs.travis-ci.com/user/deployment/releases/\nNote these commented lines at the end of .travis.yml:\n```\ndeploy:\noverwrite: true\nprovider: releases\nskip_cleanup: true\napi_key:\nsecure:\nfile_glob: true\nfile: \"*.tgz\"\non:\ntags: true\nall_branches: true\n```\nYs, it is already done. You just have to use travis cli to activate the repo. It will provide you the api_key: secure:. As soon as you add it (and uncomment those lines), all *.tgz artifacts will be deployed to GitHub releases after each successful build of a tagged commit. Note that I set it to all_branches, but you can limit it to master.\nYou should take into account that a new release is created in GitHub for each deployment from travis. That is, if you 'update' a tag to point to a later commit, two releases will be shown in GitHub. The previous one will be untagged, but artifacts will not be deleted. Because of this same limitation, you can deploy untagged commits, but these will create new releases in GitHub, with 'ugly' tag names automatically created by travis. Note that no tags are created in git, but shown in the releases tab.\nFor completeness, travis' built-in procedure can be ignored by triggering a script the deploy, which would talk to GitHub API and manipulate releases at will. This is a workaround for the limitation, which would allow to have 'nightly' builds. I.e., once a day/week the 'develop' branch is deployed, the 'nightly' release is removed from GitHub and a new one is added. However I have never gone so far. https://github.com/conventional-changelog/conventional-github-releaser\nPS: you are not required to install travis cli on your machine, you can use a docker container and just drop it when you are done.\n\nI reckon that I should have a look at #939 first.\n\nNot compulsory, but it will be much easier to follow this PR after we close #939. I will focus on that.. > I reckon these steps should be part of the build.\nOK.\n\nAlso, thanks a lot for your work and explanations about Travis. We're going to keep this part aside for now as we're currently using Codefresh as a CI tool. The only missing feature in Codefresh would be the automatic feature push, we might be able to do that as a script (using Github API) later on.\n\nI had not seen the codefresh.yml file in the repo. I believe that it makes little sense to use Travis and Codefresh at the same time, since they provide nearly the same functionality. The first one seems to be focused on deploying artifacts, while the latter is meant to deploy docker images.\nNotes for development\nOn the one hand, codefresh.yml is, at now, composed of these steps:\n\nbuild_backend [in a container]\nbuild_frontend [grunt build-webapp in a container]\nbuild_image [local]\npush_image [to docker hub]\n\nOn the other hand, the proposed .travis.yml includes a single step, which is to execute build/factory_run.sh. Then, build/factory_run.sh should be roughly equivalent to codefresh.yml. However, I modified the flow to build the fronted only once:\n\nBuild portainer/builder\nBuild portainer/factory (which also includes node/frontend dependencies)\nRun portainer/factory\nBuild frontend [grunt build-webapp]\nFor each target, build backend and pack artifacts [grunt release:<plaform>:<arch>]\nFor linux targets, build image [local]\n\nComments:\nIt should be quite straightforward to rewrite codefresh.yml, so that build/factory_run.sh is not used in that environment. However, there is a subtle difference: i'd say that codefresh.yml builds for a single platform on each run. @deviantony, can you confirm this?\nIn codefresh.yml the frontend is built once with grunt build-webapp. However, in build.sh grunt release:... is run once for each target (platform-arch). What is your 'real' flow? Do you use 'grunt:release'?. When bower and npm are dropped to use yarn (#1399), an offline mirror should be used, instead of saving node_modules in the factory: https://yarnpkg.com/blog/2016/11/24/offline-mirror/. This last commit includes all the requested changes, except renaming 'p' to 'platform' and 'a' to 'arch'. Just let me know if you still think it is required.\nBTW, note that deploying docker images to the hub is still included in build.sh, although we have talked in #938 about moving it to a new deploy.sh. If you agree, I'll leave this untouched and we will work on it in the other PR.. > Side note, #975 was open recently and will probably be merged before this one.\nMost of the changes do not conflict at all. The only conflicting one is replacing recess:build and cssmin with postcss:build. Shall I merge G07cha:replace-recess-with-postcss with 1138-4EB:refactor40-grunt-tasks, so that changes corresponging to both PRs are shown here?. @deviantony , rebased. And I added the last change you commented above: to always use copy:assets in releases, instead of copy in non-linux builds. I don't know what to do with copy:bundle tho.. > I'm pretty sure that the following task can be removed too:\n\ngrunt.registerTask('run', ['shell:buildBinary:linux:amd64', 'build', 'shell:buildImage', 'shell:run']);\nIt seems not to be used.\n\nRemoved. And renamed run-dev to run.\n\nSorry, missed that, which comment are you talking about?\n\nwatch: {\n      all: {\n        files: ['<%= src.js %>', '<%= src.css %>', '<%= src.tpl %>', '<%= src.html %>'],\n        tasks: ['default', 'timestamp']\n      },\n      build: {\n        files: ['<%= src.js %>', '<%= src.css %>', '<%= src.tpl %>', '<%= src.html %>'],\n        tasks: ['build', 'shell:buildImage', 'shell:run', 'shell:cleanImages']\n        /*\n        * Why don't we just use a host volume\n        * http.FileServer uses sendFile which virtualbox hates\n        * Tried using a host volume with -v, copying files with `docker cp`, restating container, none worked\n        * Rebuilding image on each change was only method that worked, takes ~4s per change to update\n        */      \n      }\n    }\n\nActually, if you look at the src.jsVendor and src.cssVendor vars (as well as the concat.angular task), you'll see that they are always using minified versions when they're available. I was thinking that maybe we should use non-minified libraries during development.\n\nI'm having a look at it.\n\nPerfect, copy:bundle will be triggered as a part of the copy task in build, that is the only usage of this task.\n\nOh, I think I get it now: when you run copy without an argument/option, both copy:bundle and copy:assets are executed.. > I'd like to keep the task named run-dev to avoid breaking other contributor's dev flow.\nOK, I left run-dev.\n\nIt'd be interesting to see if we could somehow just build the app after save and mount the app files inside a Docker container instead of re-creating an image & container each time. See what I mean?\n\nI think I do. That 'Build the app' step includes building the go part or just build-webapp?\n\nNote that this last commit converts several dest: '<dest>', src: '<src>', declarations to the more compact form <dest>: <src>.\nOn top of that, it includes a first approach to not use minified versions in dev. I just defined an envvar, which is either set to .min or left empty.. Not yet. I'm checking it right now.. I think it is ready now. I undid the src: and dest: modification, because some plugins do not properly handle it. I'll include it in #938, which let's me test changes remotely. I'll also investigate there about using a docker container for 'hot' builds.\nAbout this PR, I think that the only remaining issue is that some of the files to which the .min suffix is conditionally applied might not exist. And I think that concat does not throw errors if some of the files are not present. Can we know for sure that there is a file.ext in the same path as file.min.ext? For example, is bower_components/moment/min/moment.js present?\nEDIT: Just checked moment, both files exist.. Should be fixed now. It was a C&P error on my side.. There were two naming related issues:\n\nshell:buildImage is not used in grunt run-dev any more after #997. However, the issue remains, because the container expects the binary to be named portainer.\nWe can either move/rename portainer-linux-amd64 or change the argument to he container. I chose to change the argument.\nIn this PR buildBinary does not produce any binary named portainer. Therefore, it checks for the existence of dist/portainer-linux-amd64. However, clean:app removes all the content of dist but dist/portainer. I changed clean:app so that dist/portainer* are preserved.\n\nPS: I tested it in a Fedora 25 box.. shell:buildImage and shell:cleanImages where only used in run-dev. Then, I removed them from the gruntfile. On top of that, since images are built in build.sh, I added que command corresponding to cleanImages there.\nSide note: grunt run-dev fails if a container named 'portainer' is not already running. I don't think this is a problem. But it might be convenient to document this somewhere.. > Please have a look at my comments to remove the useless comments and update the shell:run task.\nDone.\n\nI had a look at the whole gruntfile (which definitely looks better :-)) and I think that the watch:all task is never used and can be removed.\n\nRemoved watch:all and, consequently, timestamp.\n\nAlso, I think that the build task should always be executed when using grunt run-dev, at the moment if I execute grunt run-dev I need to trigger a file change to trigger the build.\n\nI now replaced 'shell:buildBinary:linux:amd64' with 'build'.\nPS: I rebased on top of develop.. @pascalandy I have not intensively used them, but when I tried some docker-compose templates for prometheus and grafana I didn't feel them being so ram-hungry. Moreover, I think that grafana is for visualization, so you could probably use prometheus only. Note that netdata is listed as 'third-party software [that] exposes metrics in the Prometheus format, so no separate exporters are needed': https://prometheus.io/docs/instrumenting/exporters/ Notifications/alerts can be sen to Slack (https://prometheus.io/docs/alerting/configuration/#%3Cslack_config%3E) and there is a bot for Telegram: https://github.com/inCaller/prometheus_bot\nI think that monitorization of containers in portainer could be improved, and it would be better UX to have it embedded, instead of using an external tool such as grafana. But it may be sensible to use a template to launch a sibling container for recording and alerting. Then, portainer would just either produce metrics or consume them for visualization. Using prometheus makes sense to me, but it may still be overkill from your point of view. What would be your approach to store what happened in the past?\n. > Also, I'm just curious what if we just move all frontend dependencies into index.html or a separate JSON file? It should be way easier to understand and maintain.\nI'm not sure I understand what you mean. What's the difference between that separate JSON and the yml I proposed?. Indeed, that's the same purpose of https://github.com/portainer/portainer/pull/994/files#diff-7f888f35be042fc2ae07d70a949925b1\nThe first step was to copy these three blocks to a separate file:\nhttps://github.com/portainer/portainer/blob/develop/gruntfile.js#L197-L208\nhttps://github.com/portainer/portainer/blob/develop/gruntfile.js#L214-L220\nhttps://github.com/portainer/portainer/blob/develop/gruntfile.js#L323-L334\nThen, I modified it to reduce verbostity. And that's where vendor.yml comes from.\nOn top of that, processing vendor.yml instead of just loading a JSON with hardcoded paths, allows us to select between minimized or regular files.\nEDIT: For completeness, the solution provided by @G07cha would allow to drop this piece of code: https://github.com/1138-4EB/portainer/blob/d6b9540807e2043bde261b28084f8d8a257ec171/gruntfile.js#L462-L488 , which is where the YML file is converted to three lists with full paths. However, checking the existence of minified and regular versions and selecting between them should still be kept: https://github.com/1138-4EB/portainer/blob/d6b9540807e2043bde261b28084f8d8a257ec171/gruntfile.js#L490-L510. After the talk at slack, I have used a more explicit yml. Now the task is reduced to choosing between regular or minified sets. However, I kept the task because I think it is useful to be able to extend it in the future (say selective minification during development).\nI also added load-grunt-tasks (thanks @G07cha ). It works, but codeclimate seems not to like it. @deviantony can we ignore this warning?. > I always pick consistency over readability/verbosity, please pick one of these formats and use the same everywhere.\nIt's not only verbosity when it comes to using src:<src> and dest:<dest>. The 'new' format (<dest>:<src>) allows to merge multiple subtasks in a single one. For example:\njavascript\nconcat: {\n  css: {\n    src: ['<%= src.cssVendor %>', '<%= src.css %>'],\n    dest: '<%= distdir %>/css/<%= pkg.name %>.css'\n  },\n  dist: {\n    options: {\n      process: true\n    },\n    src: ['<%= src.js %>', '<%= src.jsTpl %>'],\n    dest: '<%= distdir %>/js/<%= pkg.name %>.js'\n  },\n  vendor: {\n    src: ['<%= src.jsVendor %>'],\n    dest: '<%= distdir %>/js/vendor.js'\n  },\n  index: {\n    src: ['index.html'],\n    dest: '<%= distdir %>/index.html',\n    options: {\n      process: true\n    }\n  },\n  angular: {\n    src: ['<%= src.angularVendor %>'],\n    dest: '<%= distdir %>/js/angular.js'\n  }\n},\nuglify: {\n  dist: {\n    src: ['<%= src.js %>', '<%= src.jsTpl %>'],\n    dest: '<%= distdir %>/js/<%= pkg.name %>.js'\n  },\n  vendor: {\n    options: {\n      preserveComments: 'some' // Preserve license comments\n    },\n    src: ['<%= src.jsVendor %>'],\n    dest: '<%= distdir %>/js/vendor.js'\n  },\n  angular: {\n    options: {\n      preserveComments: 'some' // Preserve license comments\n    },\n    src: ['<%= concat.angular.src %>'],\n    dest: '<%= distdir %>/js/angular.js'\n  }\n}\nis rewritten as:\njavascript\n    concat: {\n      vendor: {\n        files: {\n          '<%= distdir %>/css/<%= pkg.name %>.css': ['<%= src.cssVendor %>', '<%= src.css %>'],\n          '<%= distdir %>/js/vendor.js': ['<%= src.jsVendor %>'],\n          '<%= distdir %>/js/angular.js': ['<%= src.angularVendor %>']\n        }\n      },\n      dist: {\n        options: { process: true },\n        files: {\n          '<%= distdir %>/js/<%= pkg.name %>.js': ['<%= src.js %>', '<%= src.jsTpl %>'],\n          '<%= distdir %>/index.html': ['index.html']\n        }\n      }\n    },\n    uglify: {\n      dist: {\n        files: { '<%= distdir %>/js/<%= pkg.name %>.js': ['<%= src.js %>', '<%= src.jsTpl %>'] }\n      },\n      vendor: {\n        options: { preserveComments: 'some' }, // Preserve license comments\n        files: { '<%= distdir %>/js/vendor.js': ['<%= src.jsVendor %>'] ,\n                 '<%= distdir %>/js/angular.js': ['<%= src.angularVendor %>']\n        }\n      }\n    }\n\nWhat task are we talking about here?\n\nThe new one named 'vendor'.\n\nAlso about the vendor.yml format, I'd change reg to regular. Makes it simpler to understand what is this section.\n\nI renamed 'reg' to 'regular' and 'min' to 'minified' for consistency. If no argument is provided, 'minified' is used.\nPS: This is rebased on top of #939. Then, the comparison shows changes related to both PRs. To check the changes related to this PR only, see: https://github.com/1138-4EB/portainer/compare/refactor40-grunt-tasks...1138-4EB:dynamic-vendoring. Updated. I think you can merge now.. The following example shows how to run portainer in a centurylink/ca-certs container, mounting a dist directory directly:\ntar -xvf portainer-1.13.4-linux-amd64.tar.gz\ndocker run --rm \\\n           -p 9000:9000 \\\n           -w /portainer \\\n           -v $(pwd)/portainer:/portainer \\\n           -v $(pwd)/data:/data \\\n           centurylink/ca-certs /portainer/portainer \nTherefore, I think that you might be able to get rid of the first shell:buildImage, at line 165 of the gruntfile:\ngrunt.registerTask('run-dev', ['if:linuxAmd64BinaryNotExist', 'shell:buildImage', 'shell:run', 'watch:build']);\nThen, line 458 would be something like:\ndocker run --privileged -d \\\n           -p 9000:9000 \\\n           -w /portainer \\\n           -v $(pwd)/dist:/portainer \\\n           -v /tmp/portainer:/data \\\n           -v /var/run/docker.sock:/var/run/docker.sock \\\n           --name portainer \\\n           centurylink/ca-certs /portainer/portainer --no-analytics\nNote that I didn't include the modification of the default assets location because I don't understand the rationale behind it.\nEDIT: I think I get it. You use public because you can't do $(pwd)/dist/public:/. Then, I think that it is not required, attending to the proposal above.. >It also looks like in your example we're extracting all instructions from a Dockerfile to the command which isn't good for maintainability and I'm not sure if we'll bypass build process by doing that.\nThere is no mainainability involved, since, as long as I am aware, the unique requirement for the execution of portainer is that /data must exist and portainer must be executed fom the directory where the binary is.\nI don't get what you mean with 'bypass build process'.\n\nAssets location change is required for mounting volumes because we cannot mount any folder as root to the container. We could move a whole application to the subfolder as described in your example but I wasn't sure if other files(data, certificates) still will be accessible by the application.\n\nChanging the location of assests might have side effects on users who use tarballs and not docker images. Or even on those who add content to the official image.\nI think that moving the whole application to a subfolder has no side effects, because /data is an absolute path, and certificates are saved in /data/tls. Furthermore, I recently read a request to allow setting /data to a custom location.\nHowever, the most important point is that now only the frontend sources are being watched. But, as we talked on slack, it would be desirable to watch golang sources too. If the portainer image is used, rebuilding is compulsory. Using a container directly avoids that.. > Why do we need to run the container as privileged?\nI think we do not. Look the very first example I posted.\nHowever, that arg is actually present in develop. So, we just didn't remove it.. LGTM. I can't (still) run local tests tho.. No, no. I just mean I don't have nodejs and so installed locally. Then, I cannot try the watch task.\nIt's not a problem on your side, but a limitation on mine.. > @1138-4EB, I guess we could do it when your PR with a containerized build step will land. By the way, NodeJS has relatively simple installation process and supports all major platforms.\nI have nodejs installed in my ArchLinux box. But I am now on Win10. Installing npm through Mingw64 is broken now. Moreover, I try to avoid not using a package manager. Then, it's me who set additional constraints to the setup.\nIndeed, this is my motivation to work on that PR.. Note that the container ID is in the URL when you browse container details: http://localhost:9000/#/containers/<ID>. For example:\nhttp://localhost:9000/#/containers/d41db8d3df35f41a08604e1b876c9f1e13234b8f5ea69c09373114ec28095a39\nNevertheless, I think that it could be useful to show it in the container details (the short ID at least). It would be specially useful if portainer is wrapped in the future (see Synctrayzor). I proposed it in #900. However, @deviantony is not convinced: https://github.com/portainer/portainer/pull/900#issuecomment-309215769. @disha-wani could you please tell which shell are you using? Is it the command prompt, PowerShell, Bash subsystem for Windows, Git Bash, Mingw/MSYS, Cygwin...\n. Thanks @disha-wani. Jut another couple of question: what are you trying to build? I mean, you want just the latest version, or do you want to modify the sources (js, css,...) and have a custom image built? Do you want to get a tarball or a ready-to-use docker image/container?. > I feel like there is no pointing of \"folding\" id back to it's shortened state.\nWould the full version be viewed still after refreshing the page? I mean, 'folding' back can be removed, as long as it is not a 'permanent' decision.\n\nAlso we could try to use a title attribute instead which will show full Id when element is being hovered for some time.\n\nI wouldn't mind that approach, as long as the attribute is copiable.\nShall we replace the fa-eye with fa-clipboard and never expand the shorted ID?\n\nNevertheless, I'd be glad to hear how would you tackle the varying width issue.. @deviantony , the main point is that the full ID makes the first row be two or three times wider than other rows. It is desirable, especially for small screens, to make them be similar.\nFurthermore, most of the time the short ID is enough, and the full ID is useful to be copied only (I don't think many users can remember all the sequence).\nHowever, this is just a visual enhancement. We do not 'need' it.. @deviantony I guess my smartphone is too old XD:\n\nAnyway, I think that this should be tackled in a more general way, because it also happens with the image ID in container details, and other contents such as long container names mentioned in #1049.. Maybe add two colours?\nOn the one hand, I don't think that being unused is a 'warning' level message. E.g., images on the host which are run for specific tasks, not as services. So, I'd suggest to use a 'info' button for the actual behaviour.\nOn the other hand, I think that knowing that dependent child images exist is a warning level message, because it does not allow to remove it directly (unless it is forced).\nHowever, some further discussion is required to come up with a consistent and clean implementation. The main issue here is that labels are independent:\nhasRunningContainer ? '' : 'Unused [info]';\nhasChildImage ? '' : 'Unused [warning]';\nThen, what should be the result when hasRunningContainer XOR hasChildImage? I think that ORing them would make it difficult to understand.\nMy suggestion is to explicitly tell that an image is being used by a container, and mark it as Unused only when it can be directly removed (without -f). For example:\n| hasRunningContainer | hasChildImage | Label |\n|---|---|---|\n| no | no  | Unused  |\n| no  | yes  | None  |\n| yes | no  | Running [info] |\n| yes | yes  | Running [warning]  |\nNote that a single label is used, even if two conditions are met. The colour (button type) is used to tell them apart.. > Maybe the 'Unused' tag should not be associated to images that have children tho, even if they are not used by any containers.\nThen, the tag won't be useful to know which images are used by containers and which are not:\n| hasRunningContainer | hasChildImage | Label |\n|---|---|---|\n| no | no  | Unused  |\n| no  | yes  | None  |\n| yes | no  | None |\n| yes | yes  | None  |\nI like this approach, since it is what 'unused' really means (not used at all). However, that would break the feature for those who don't mind child images and want to focus on running containers.\nThat's the point that made me suggest to use a single button but with two different labels (text).. Reproduction:\ndocker run --name tmp -t alpine:3.4 sh -c \"apk add -U --no-cache wget\"\ndocker commit tmp alpine:3.4\ndocker rm -f tmp\n\nNote that when a tag is added and then removed to an \"unremovable\" image, no error is shown. Indeed, notifications tell that both the tag and the image have been removed, which is not true.\nmoby/moby#25602\nmoby/moby#30722. Is this what you mean?\n\nThis is Firefox 54.0.1 (32-bit) on Win 10.\n. The discussions in #571 and #899 might be interesting in this context. #943 is also related, somehow.. Hello! I see this is merged and closed now. However, I'd like to ask @G07cha whether he had any issue which lead him to submit this PR. All grunt.loadNpmTasks sentences where replaced with a single loadGruntTasks(grunt) in #994. According to https://www.npmjs.com/package/load-grunt-tasks, that should make grunt.loadNpmTasks('gruntify-eslint') to be redundant now.\nShall this PR still be required, might be worth checking other packages: https://github.com/portainer/portainer/commit/0a436600f4354d701fa9976239191a99a7cb653b#diff-595bf3fa2348192244b0319be33066b8. So fast and concrete! Do you want to submit a PR or shall I?. My two cents: this is the expected behaviour because -a, --assets=\"/\", and assets are served raw. Then, if portainer is run outside of a docker container it defaults to serve the root of the filesystem it is being run on.\nSince the backend is written in Go, I'd say that something like this might (partially) fix it:\n``` golang\npackage main\nimport (\n  \"net/http\"\n  \"os\"\n)\ntype justFilesFilesystem struct { fs http.FileSystem; }\ntype neuteredReaddirFile struct { http.File }\nfunc (fs justFilesFilesystem) Open(name string) (http.File, error) {\n  f, err := fs.fs.Open(name)\n  if err != nil { return nil, err; }\n  return neuteredReaddirFile{f}, nil\n}\nfunc (f neuteredReaddirFile) Readdir(count int) ([]os.FileInfo, error) { return nil, nil; }\nfunc main() {\n  http.Handle(\"/\", http.FileServer(justFilesFilesystem{http.Dir(\"/\")}))\n  http.ListenAndServe(\":80\", nil)\n}\n```\nSee: https://stackoverflow.com/questions/13302020/rendering-css-in-a-go-web-application\n\nHowever, that would disable directory listing, but in the use case explained in this issue the contents of \"/\" would still be served. There are two workarounds:\n\nMake \"-a\" default to \"./\", instead of \"/\".\nAdd a note in the docs explaining that \"-a\" should be explicitly used when running outside of a container.. > I believe we can fix this by defaulting to a value of /app for the asset directory and COPY all the Portainer files into the /app directory instead of the root, see https://github.com/portainer/portainer/blob/develop/build/linux/Dockerfile\n\nI think it is ok to set it to ./, instead of /app.  This is the structure of the tarball now:\n\nportainer [binary]\ndocker [binary]\nindex.html\ncss/\nfonts/\n...\n\nIf it is directly extracted to a random folder and run from the root of the folder, ./ will work. If it is extracted to the root of the filesystem (inside a container), ./ will also work.\nEven if assets are moved to a subdir, say app, I think that the relative default ./app should be used, instead of /app.\n\nportainer [binary]\ndocker [binary]\napp/\nindex.html\ncss/\nfonts/\n...\n\nThe issue with using a relative path (either ./ or ./app) comes when portainer is called from a different folder. To handle that situation, $(realpath $(dirname $0)) can be prepended in func init. I believe that this would avoid any problem regarding StackManager.\n@rgl , could you please provide the full picture? You used Dockerfile syntax in the previous message. Is it based on https://github.com/portainer/portainer/blob/develop/build/windows/nanoserver/Dockerfile?. @deviantony, I'm having a look at it right now. However, I think that it requires two modifications:\n\nMake the file server disable directoy listing, so that it is made clear when the path is not well set. This is related to the snippet I copied in my first message. Checking https://github.com/portainer/portainer/blob/develop/api/http/handler/file.go now.\nChange the default of assets. I am waiting for @rgl to reply, in order to make sure that my last proposal fits his needs.. > What does disabling the directory listing brings?\n\nIn the case exposed by @cgoeller, instead of getting the list of contents of /, it would respond to curl localhost:9000 with 404, because there is not index.html. See #1308.. @rgl, thank you. Please check #1309. That should allow you to remove WORKDIR /app, because portainer can be launched from anywhere. On top of that, since the default location for assets is changed to ./, you could also keep ENTRYPOINT [\"/app/portainer.exe\"].\n@cgoeller, your command would be: # <anypath>/portainer --no-auth -H unix:///var/run/docker.sock. > Note that this stack is not working correctly, the drone-server service is not configured correctly\n\nDue to the restart policy being set to always (restart: always) the container keep restarting in bad state.\n\nYes. However, I kept it like that (didn't add the DRONE_HOST environment variable on purpose) to reflect that even though a network is listed by docker inspect, it is not connected because it is missing an IP. I don't know if portainer handles this case explicitly or it is an unknown feature.. @jamesmr89, do you want newer versions to be checked and some kind of indicator displayed, or do you want to auto-pull the images and auto-restart containers every time an image is updated in a repo?. The second commit adds:\n\nModify buil.sh and gruntfile.js in order to move all the assets (but docker[.exe]) to subdir public.\nModify Handlers/FileHandler to serve from *flags.Assets + \"/public\".. The download feature is meant for users to report problems without the need to manipulate (copy and paste) a large block of text (especially in mobile devices). Note the filename: {{containerInfo.date | date:'yyyyMMddhhmm'}}-inspect-{{containerInfo.object.Id.slice(0,12)}}-{{containerInfo.object.Name|trimcontainername}}.json.\n\nI'd rather keep the tree view and the save button only, removing the text view. That would provide a \"static\" UX, without data duplication.\nHowever, if you prefer to just remove Save and separate tree/text, should I disable each of them when the view is active?. @ncresswell do you want the text view to be the default (text - tree)? Or is it ok like it is now (tree -text)?. I think it is ready now. Save removed. Tree and Text separated. Tree is default.. @deviantony, indeed, I think that it can be an interesting enhancement to #938. When I started working on it we agreed that the build-system itself (the development environment) would be executed on amd64. #938 brings and OS-agnostic system, but not architecture-agnostic. This PR sets a different path.\nThis PR is related to grunt run-dev. Knowing that @utzb made it work with these minor modifications, it can be extended to support development in, at least, all linux platforms with static docker binaries available: aarch64, armhf, ppc64le, s390x and x86_64 (https://download.docker.com/linux/static/stable/). However, we need to extend it. @utzb introduced os.arch(), that returns these strings: arm, arm64, ia32, mips, mipsel, ppc, ppc64, s390, s390x, x32, x64, and x86. The equivalence table is:\n| os.arch() | docker |\n|---------|---------- |\n|arm | armhf|\n|arm64 | aarch64|\n|ia32 | not supported |\n|mips|  not supported  |\n|mipsel| not supported |\n|ppc| not supported |\n|ppc64| ppc64le |\n|s390| not supported |\n|s390x| s390x |\n|x32| not supported |\n|x64| x86_64 |\n|x86| not supported |\nIf you are ok with the table, this PR could be enhanced to check arm, arm64 and ppc64, on top of x64 (already merged). @deviantony , @utzb, do you want to go for it or shall I?. @utzb, do you mean that both ppc and ppc64 should be mapped to ppc64le? BTW, I updated s390.. @utzb, I corrected it. Thank you.\n@deviantony, I think that it is useful to, at least, add a check to report when it is run on an unsupported platform. However, since it is a minor issue, I'll do it in #938.. ``` javascript\nvar harch = os.arch();\nvar harchs = { 'arm': 'armhf', 'arm64': 'aarch64', 'ppc64': 'ppc64le', 's390x': 's390x', 'x64': 'x86_64' };\nmodule.exports = function (grunt) {\nvar hostarch = harchs[harch];\n  if ( hostarch === 'undefined' ) {\n    grunt.fail.warn('Platform '+harch+' not supported for backend development.');\n    hostarch=harch;\n  }\n...\n```. > I just tried it but I cannot display any logs.\nSure. Forgot to mention that you need to refresh (Ctrl+F5) when you enter the logs page in order for the terminals to show. This, and the error you mention, are related to the fact that I used window.onload to initialize the terminals and the timer: https://github.com/1138-4EB/portainer/blob/44a06646f37d15e0779d6901962e3d5b03081e66/app/components/containerLogs/containerLogsController.js#L99-L104\nThat is not the better approach, and something similar to the destroy listener should be used: https://github.com/1138-4EB/portainer/blob/44a06646f37d15e0779d6901962e3d5b03081e66/app/components/containerLogs/containerLogsController.js#L86-L90.\n\nAlso, I think that we should remove these two different containers/terminal and merge the logs (stderr+stdout) into a single container/terminal.\n\nI find it really useful to have them separated. Can we do it optional?. > What's the point of having these? If I recall correctly these are appended by Docker ? Maybe we should just strip them.\nYes, they are appended by docker. The format cannot be choosen. However, the length is fixed (30 characters), so it is easy to strip them. The implementation in this PR strips them, unless the display check button is active.\nSeems that some users (#834) would like timestamps to be displayed in a format different of the one given by docker. At now I convert the timestamp to a JavaScript new Date, so any format allowed by javascript to print dates to strings could fit. For example, this is a format: https://github.com/1138-4EB/portainer/blob/4027401664a726ca4f397ddeae8f78af3c703e32/app/components/containerLogs/containerLogsController.js#L67 Another one would be to use .toString().\n\nNope, this should definitely be processed in the frontend, we don't want to replace Kibana or other logging/BI tools, we shoud just keep it simple with a good UX for the user (that is save, clear, filters, etc...).\n\nI meant to replace containerLogsController.js#L61-L69 with a call to the backend. It would:\n\nReceive a large string.\nSplit it to lines.\nTruncate the number of lines.\nExtract the first 30 characters of each line.\nOptionally transform those 30 characters and prepend them to the line again, or trim them.\nJoin all the lines in a single string again.\nSend the string back.\n\nIt would not be a logger, not even a handler at all. It'd be just a date parsing and trimming service. Anyway, I expect performance not to be an issue, so that parsing in the browser is ok. The drawback of doing it in JavaScript is that I found date parsing and formatting options to be less versatile.. - Loading is \"clean\" now. No refresh is required and no errors are raised.\n- Input boxes for scrollback and page have been added.\n- By default, both stdout and stderr are shown in a single 'terminal. A button allows to split the output to two separate terminals.. Color changes removed.. Better close it. At now, I don't feel confident enough to refactor directives to components.. Took containerController.js apart, as it is quite complex at the moment.. Fixed.. Had a look a it yesterday. I was waiting for your confirmation ;). The health-check is a flag itself, so it can use any other starting flag, such as port or TLS configuration. Indeed, the address is read from a flag: https://github.com/1138-4EB/portainer/blob/7936af4d9cd1d154d4f59b7dd6683a1f31cdf18a/api/cmd/portainer/main.go#L176\nHowever, I have never worked with TLS, so I don't now if the fix is solved just by loading the certs or what additional steps are required.. Having a look at it, I think that the problem might be related to health_check.go#L9, where \"http://\" is hardcodded. That's the only difference I can find compared to the reference by @WTFKr0: https://github.com/wtfcoderz/static-healthcheck/blob/master/healthcheck.go\nTherefore, removing \"http://\" could fix it for http and https. However, the \"tcp\" option is not implemented at all. Is it needed for portainer?\n@WTFKr0, can you please provide some more info about the problem you have without https? I think it might be related to the fact that the default addr does no include any domain (not even localhost).. @deviantony, related to #1370, is Config.Image valid when the tag is updated? Example:\n\nTag image with ID id_a as mytag.\nRun container mycontainer based on mytag.\nCreate image with ID id_b and tag it as mytag.\n\nNow Config.Image points to mytag, which refers to id_b. But it is not true that the container is based on that image.\n\nActually, the image ID is now read from .Image, which is correct even if tags are updated after the container was created.\nTherefore I think that instead of extracting Config.Image, we should get the tags of the image ID (if they exists).. @deviantony the main point here is that container.Config.Image was related to container.Image when the container was created, but it is not guaranteed to remain so for the full lifetime of the container. The following shell script triggers the warning symbol (textual explanation here):\nmkdir -pv tmp && cd tmp\necho \"FROM alpine\" > Dockerfile\necho \"RUN apk add -U --no-cache wget\" >> Dockerfile\ndocker build -t dummy/image .\ndocker run -d --name dummy-container dummy/image sh -c \"tail -f /dev/null\"\ndocker build -t dummy/image --no-cache .\ncd .. && rm -rf tmp\nThe result will be:\n\nAn untagged image being used.\nA running container based on that untagged image but declaring to be based on \"dummy/image\".\nAnother image tagged \"dummy/image\" which is unused.\n\nTo make the issue more explicit, add any tag to the now untagged image, which is the one the container is based on. I added dummy/newtag:\n\nTherefore, I think that the visualization you proposed might be misleading. In many situations the tag shown on the left and the title attr of the ID on the right will be the same (except the one on the right is a list). However, when they are not, we would be making an incorrect association. Of course, I have no problem at all to completely modify the layout and adapt it to fit your requirements, but I think that my point to make the visualization somehow not consistent is quite strong.\nNote that the hovering information seems redundant, but it is not when the warning is shown. The warning is meant to let the users know that they should check the hovering info of the ID, or directly click and see the image details view. Once again, I agree that this might not be the most intuitive UX, and I am willing to discuss a better approach.\nTo stay consistent within the UI, the tags retrieved with Container.Image should be added at the right of the ID. I thought about adding them, but it makes the visualization packed and redundant most of the time, as you suggested.\n\nAnother situation that triggers the warning is:\n\nHave a portainer container running portainer:latest from a couple of weeks ago (with restart=always and without watchtower).\nWithout stopping the container, docker pull portainer:latest.\n\n\nIndeed, there is an associated issue/bug. Note that the containers view shows the untruncated ID of the untagged image in the \"Image\" column, which breaks the table. I wanted to discuss it here, because I think that they are related somehow.. I opened #1430 to discuss the diference between \"recreation\" and \"duplication/edit\". We'll come back once we agree if \"updating\" is compulsory.. As reviewed by @ncresswell,\n- Two new columns are shown: \"Usage\" and \"Children\". The content is centered in each column.\n- All the selection boxes and btn-groups are replaced with popover menus. Each element in the menu has a symbol and a descriptor.\n- Popover menus are shown on click and hidden with any click (selection, label or outside).\n- Fix width of all columns except \"Tags\", to avoid widths changing when the list is empty.\n\n. Linking to moby/moby#35562 here (which came from #1409), because it explains the logic behind the Children column.\nNote that this PR adds the children column because some Unused images without any tag, cannot be removed. See the animated image above, where three of this images are listed:\n```\nREPOSITORY    TAG      IMAGE ID            CREATED             SIZE\ngolang           107ed76bfbd2        7 weeks ago         270MB\nalpine           76da55c8019d        2 months ago        3.97MB\ndebian           7ec85ac2fd2b        2 months ago        61.2MB\n```\nThis was reported in #1047. I have not been able to write a script which deterministically produces such \"unremovable\" images as requested.. If we are going to use web technologies to provide read-only graphical access, why not show it inside portainer? I mean, the backend can run busybox and retrieve a log/json. Then just render it in a new view in portainer (similar to the actual inspect).. @deviantony do you mean a single image with binaries for all the supported platforms?. @ncresswell I am concerned with that \"unique\" \"multi-arch\" image. I think the solutions you pointed are the way to go. Indeed, either if it is a separate container or a function/package inside portainer, the code would be pretty much the same, and not more than 20 lines.\nHowever, since all of them are golang based solutions, I expect generating seven binaries to be required. These are the alternatives to distribute them:\n\nProvide seven different images (as we do with portainer now). A manifest can be added.\nProvide a single image which includes all the binaries and select, on runtime, which to execute.\nDo not provide any container, but add binaries to the portainer container as assets (as we do with docker cli now). That is, run a scratch container and inject the proper binary.\n\n\nI find your last comment really interesting. But I will need help from @deviantony , because I don't know if this should be a service, a directive, a model...\n\nAbout the read-only constraint. I understand that it is not straightforward to do it with a web service. Still, I think that it is useful to allow the user to move/reorganize the content. Can we provide the web option as read-only and a shell option with read/write access?. I agree with @rtmaster when preferring a single image which has everything included, so that I don't have to bother about distributing more than one image (e.g., install/update portainer in an isolated net). However, it is rather simplistic, because it is a one liner to export both images to a tgz.\nOn the other hand, the first option, can become unconfortable if dependecy on external co-operative images is increased. If I need to carry portainer for three diferent platforms in a pendrive, I need to take care about 3 * (portainer + num-of-aux-images). Then, I think that providing option two for portainer itself or for any other aux image would desirable. This is an issue itself, tho.\n. > Portainer has all this information, so it would be really convenient and technically easy to have a button somewhere that condenses all this information into a docker command line as written in the example above.\nJust a clarification. Portainer does not execute docker run, but it actually uses the API:\n\nhttps://docs.docker.com/engine/api/v1.32/#operation/ContainerCreate\nhttps://docs.docker.com/develop/sdk/examples/\n\nTherefore, it is not technically difficult, but neither it is straightforward to get the equivalent command.\nSee #597.. > This is about the portability of container configurations; more precisely the ability to re-create said containers outside of Portainer without dependencies on managers or APIs.\nThere is always a dependency on an API, the docker API. You can use multiple clients to do so. Docker CLI is one client. Portainer is a different client. The common language both talk is that of the docker API. Therefore, Portainer can export a JSON for you. That JSON is the same that Docker CLI produces given the same values to parameters with similar names.\nLets see it with an example (from https://docs.docker.com/develop/sdk/examples/). You want to run a portainer based on alpine and execute echo \"hello world\".\n\nWith the Docker CLI (client) you write docker run alpine echo \"hello world\" and press return.\nWith portainer, you go to \"Add a container\", you fill \"Name\" and \"Command\" and click \"Deploy the container\".\n\nBoth of them, each using different procedures, will create the following JSON object:\n{\"Image\": \"alpine\", \"Cmd\": [\"echo\", \"hello world\"]}\nAn, then, they will perform this calls to the docker endpoint with their own http libraries and methods:\n```\n$ curl --unix-socket /var/run/docker.sock -H \"Content-Type: application/json\" \\\n  -d '' -X POST http:/v1.24/containers/create\n{\"Id\":\"1c6594faf5\",\"Warnings\":null}\n$ curl --unix-socket /var/run/docker.sock -X POST http:/v1.24/containers/1c6594faf5/start\n```\n\n\nI can find all the information necessary to manually type out that command in Portainer details.\n\nYou do. But that is because you are smart enough to know when two variables with similar but not identical names have the same meaning. I am not trying to be sarcastic, just underlining that computer programs are not so smart, yet.\n\nI'm confident that the fact that Portainer doesn't execute commands in this form internally is irrelevant.\n\nAs you see, it is not. It is irrelevant if you just want to recreate the container outside and you are ok with getting that JSON and using curl, docker SDK -golang, pyhton- or any other tool that lets you POST a JSON.\nHowever, if you want to recreate the container with a different client, you are asking Portainer to be aware of the (input) syntax used by a program it doesn't even know about. You can check the subtle but relevant differences Portainer needs to handle by comparing docker run --help to https://docs.docker.com/engine/api/v1.32/#operation/ContainerCreate:\n\n-w, --workdir <=> WorkingDir\n--mac-address <=> MacAddress\n--cpu-quota <=> HostConfig.CpuQuota\n...\n\nThis is an issue that even docker CLI developers need to handle: moby/moby#20625.\nThis is why I pointed to #597. We need a (bidirectional) table which tells Portainer the equivalence between the API syntax and the CLI syntax. Then, portainer will support filling the container creation view by pasting a docker CLI command, and/or it will be able to generate the CLI equivalent of any running container. As said, it is so easy for a human to identify those equivalences. Not so much for computers. And, even if it is rather easy for humans, it is time consuming because there are many flags to check.\nIt might already exist such a conversion tool I am not aware of. I will be really pleased if you let me know about any reference I might be missing.. You might want to simplify it a little more replacing:\nvar isAdmin = userDetails.role === 1;\nif (!validateForm(accessControlData, isAdmin)) { return; }\nwith\nif (!validateForm(accessControlData, (userDetails.role === 1) )) { return; }. Done. Do you use any specific \"beautification\" tools/settings?. Done and tested.. Associated issue: #1410. I really don't know. We are already using npm, because we rely on it to install grunt, cssnano, eslint and autoprefixer. What does yarn provide that we can't have done with npm?. If the same package.json can be used and both can be used side by side, using yarn instead of npm does not affect the modifications I already made, does it? It would affect #938, but as soon as the libraries are moved from bower.json to package.json is up to the developer to use one or the other in his/her own box.\nI read about locking dependencies, but I/we already have the same functionality in #938. Building a docker image with all the dependencies effectively locks them.\nDon't take me wrong, I am ok with dropping npm together with bower. It's just that I see minor differences as dependecies are not changed often. Many of the libraries are not under active development (at least the versions we use).. I will run the same image creation test, just to be sure that the package.json is valid for both.. Well, changing from npm to yarn is seamless. Just use it. This is the log of the same test as before, but using yarn (lines 1621-1641): https://travis-ci.org/1138-4EB/portainer/builds/303456001 \nThis is the commit which makes the change on top of the previously referenced branch: https://github.com/1138-4EB/portainer/commit/bd2961b4659d4e87b64bc8edb9dad9380880b60b\n\nIndeed, there is an issue with most of last npm versions which does not allow to use semvers with github repos directly. Therefore, the third commit I added to dropbower will make it \"yarn exclusive\" unless a fixed npm version is used. See npm/npm#18434, npm/npm#17621.\n. Just a quick proof of concept, reusing the popover menu proposed in #1377: see #1402.\nNote that the console entry in the menu can be colored to let the user now if it is open already.. > Also, I barely ever check \"stats\" and \"logs\". And I don't understand what \"inspect\" does. Isn't that the same as details? Then we're left with \"console\"\nI use logs as much as the console. I don't check stats so much because it does not remember history between page refreshes, so I must keep a tab open for each container I want to monitor. However, I think it will be a very useful feature if this is enhanced. Note that I don't know what the roadmap on this issue is. Anyway, even if it is externalized to another container running (prometheus, grafana, whatever...) or implement in portainer, I think that having a direct access link is as valuable as logs or the console.\nLast, inspect provides you nearly all the information you can get about the container. Part of it is shown in the container details view, but most of it is not. As portainer is improved and new features are added, more of it will be available in the details. Nevertheless, there is no point in leaving it out it the other three are added.\n\n\nI like this, although I would personally really really prefer a one-click solution. E.g. those 4 icons can easily fit in average screen estate. Something roughly illustrated with these terrible emoticons, which you can substitute with the clean black and white icons using imagination:\n[running] [\ud83d\udcca \u2757\ufe0f \ud83d\ude89 \u2139\ufe0f] [portainer-dev] [image] [ports]\n\nPersonally I also prefer one-click compact solutions, especially for these quick access (redundant) features, which are not really valuable for casual users but for those who intensively switch states in the app (see). However, as a rule of thum, @ncresswell wants every icon in the app to be shown with a text descriptor (fixed, not hoverover, because of touch devices). He is the one who knows the user base and/or target audience.\nThis constraint makes showing four icons overkill, because a column is required for each of them, which are as wide as the labels (Stats, Logs, Console, Inspect). Nevertheless, I think we can partially achieve it and hopefully make everyone happy:\n\nBy default, the visualization I showed in my previous comment is shown. Properly replacing \"Quick\" with either \"Open\" or \"Launch\" as @ncresswell suggested.\nA angle-right or angle-double-right icon is added at the right of the descriptor in the header.\nClicking either the descriptor or the angle icon replaces the fa-plus-square-o icon and the menu with the visualization you proposed. Descriptors are added as title attributes, to be shown on hoverover. At the same time, the angle is changed to point to the left.\nClicking again collapses the icons back to the +.\n\nThe default visualization would meet @ncresswell's requirements, and the required additional space would be minimal. @Redsandro would have to click once to expand all the menus, and then he would open as many consoles as wanted with Ctrl+MouseLeftBtn or MouseMiddleBtn.\n\nAdditional features would be:\n\n\"Choose which icons appear in the Quick list (for me: console only)\".\n\nIs it really required? Where would the user configure this setting?\n\n\"Choose wether or not you want them grouped into a [+] link that you need to click first\"\n\nWe can make the expand/collapse icon optional. That is, the user can choose to have both visualizations or just one and, in the latter, which one. Once again, how/where do we let the user configure this? I don't think portainer includes any visualization configuration view right now.. I built a couple of demo images:\n\nThe expand/collapse \"simple\" approach I proposed: 11384eb/portainer:linux-amd64-popovermenus build log\nThe \"configurable\" solution proposed by @Redsandro: 11384eb/portainer:linux-amd64-popovermenus-redsandro build log\n\nNote that these images are far away. They are meant to test and feel the UX (@ncresswell, both images include popover menus and collapsible widgets in container details and image details views, on top of the images view that you already checked).\nThe configuration is not saved between page reloads. If you move to another view and then come back, the defaults will be shown. @deviantony , can this data be saved in the browser?. @Redsandro, sure. The previous \"design\" where just placeholders :D. You can pull the image again and try the new iteration.\nI added fa-fw as you suggested. However, instead of using custom styles, I used an \"unbreakable\" btn-group. This makes the width of the column responsive to the number of selected items. Using a btn-group removes the underline, adds borders and provides a background color change on mouse hover. I think this approach is \"cleaner\" than adding custom styles. Lets wait to know what @ncresswell and @deviantony think prior to choosing colors.\n\nActually, fa-fw allowed me to get rig of a couple of custom CSS styles. Thank you!. @ncresswell, 11384eb/portainer:linux-amd64-popovermenus-redsandro. The difference is in the \"expanded\" view, when you uncheck \"Collapsible\" option. Yesterday, small blue icons where shown (see the icon at the back, not the menu. Today, they are inside a btn-group. On top of that, yesterday the width of the column was fixed, and now it is responsive.\nI need help to save settings, tho. I see that the \"number of items\" shown in the tables is saved, for example, but I haven't checked how it works.. Just replied in the other thread. There is a last commit which you should remove to follow the \"normal\" build procedure. However, there are also a lot of unrelated commits in that branch, as it was only meant to build the demo for you to test. Let me clean it up and open a PR with only the parts that concern this issue. Then, as @deviantony suggested, we'll follow the (technical) discussion in the PR.. @Redsandro , it is ready now: #1412. It is a single commit ahead of develop, and there is not other experimental feature involved. Sorry about the confussion caused in your previous effort.. @Redsandro , no problem. It was a bit of a mess, because I reset the branch meanwhile, but it is everything ok now. I didn't test it yet, tho.\nI suggest you delete all the branches and pull a clean copy of popover-redsandro from my repo. That is the one in #1412. Won't reset it anymore, as I now know that you are working with it.. Just for the record. The network details view actually provides a list of containers attached to it, and allows to \"Leave de network\" one by one.\nIt might be possible to add a button there which would jump to the containers list and automatically check/select those. The main advantages of this approach are: i) the network details view is less packed than the container view, and ii) there is no duplication of the filter.\nI don't know if automatically selecting containers is supported, tho.. I also thought about the static/fixed header/menu bar because of #1001 (no need to add any extra buttom if the bar is fixed to either top or bottom). Indeed, I tried to implement it in #1339 (that's the reason to move the refresh spinner to the left of the header title). But I had issues with the width of the header + the collapsible sidebar + fitting the width of the content. Anyway, I agree it is the way to go.\nHowever, I'd like to focus this issue on having a \"filter\", say \"visual subsections\", that show only one or a few of the widgets. Moreover, supporting to access them through the URL. That would allow to move all the options shown in this menu to the containers view #1402.\nThen, the specific visualization of those options in the containers details view could be a navbar, tabs or any other. In the end, it is a list template, if the object is implemented.\nAlso, note that it can be applied to containers/container, images/image and maybe some other section.. @deviantony , I agree when you point that it does not offer a better UX in all the areas, specially in the example I posted. However, it does in many (e.g. templates, Join network, status, delete image...). So the main objective of this issue is to know whether it is a design constraint not to put any action button or input box in widget headers, or if you are open to moving some of them, when it makes sense.\nFor example, the specific case you commented (commit a container inside the container details view) does not offer better UX in the screenshot above because the por-access-control-panel is included as a single block, which avoids splitting \"Name\" and \"Registry\" inputs. Shall they be split, the name could be put in the header, next to the button. When clicking in the name field, the body of the widget would automatically expand, showing both the note and the registry select box. For the new user, it takes the attention because something moves and a message is shown as soon as the name of the image is written. However, intermediate/experienced users can ignore the opening body when they want to target Dockerhub.\nAnyway, if accepted, the first step would be to merge this commit, which allows to better use widget headers letting us to pull the content either to the left or to the right. After that, we can discuss modifications either widget-by-widget or view-by-view.\nAbout the new datatable component, that sounds great!. Not exactly the same, but, since we can get the parent ID, that can be shown. If the image is available, the RepoTags can be retrieved. If not, or if it is untagged, just the ID is shown.. Note that, according to the explanation in the issue @Yivan opened, the closer we can get is to show the parent ID (or the repotags). This is complementary to the \"Children\" column, and the \"Children using this image\" section proposed in #1377.. @Redsandro, seems that your are checking out this branch: https://github.com/1138-4EB/portainer/commits/popovermenus-redsandro , because we are coming from #1402.\nNote that the last commit in that branch is: \n\n[ci factory] (#938) chore(build-system) Alpine based portable build system. Use named volumes, two-step build (godeps, node_modules, bower_components), drop golang-builder repo, add .travis.yml, move pushing to deploy, build frontend once\n\nThis is a two-step build system which is still work in progress (see #938, #1330, #1331, #1333, #1334 and #1335). Therefore, documentation is still not merged: https://github.com/portainer/portainer-docs/pull/29\nHowever you DO NOT need that if you are installing grunt and nodejs locally. You can just DROP that last commit in the branch, and follow the default docs you pointed.. @Redsandro localstorage works great! You can check image 11384eb/portainer:linux-amd64-cont-popovermenus-redsandro. @Redsandro:\n\n@deviantony actually reviews each modified line of code, he then generates an image to evaluate the behaviour and finally it can be merged. That is, even if awaiting-changes can be removed, there are still func-review-in-progress, func-review-approved, tech-review-in-progress, tech-review-approved, tests-in-progress, tests-validated to come, before it considered \"ready to merge\". Note that he might skip labelling some of them if done fast.\nThis is neither the first nor the most important task in the pipeline. As far as I am concerned, there are other tasks \"more ready\" for integration which he didn't tackle yet. He must be busy.\nAlthough this can be merged as is, neither @deviantony nor I feel comfortable declaring those two templates between script tags. Sure, it has little impact if only this PR is merged. But the same menu design will be reused sooner or later (#1377, #1419), and it makes little sense to C&P those menu templates in every view they are used. That is the reason to keep one of the items in the list of this PR yet unchecked. This means that, even if @deviantony started the tech-review, this PR would probably not easily pass that state.\n\nHowever, in #1419 I took a first step to improve how menus are declared, by defining a directive. If the issue related to ng-href and $state is solved (see first item in the list of pending tasks in #1419), this PR can be updated in order to use the same directive. Doing so would reduce this PR from +73 changed lines to approximately +40, making it easier to review, and thus allowing to merge it faster.\nStill, if you want to have this or any other (experimental) feature available faster, I can help you configure travis so that an image is built and pushed to dockerhub for you every time you push to a branch.. You mean to remove the \"collapse\" option only, or the configuration menu itself? I don't know if \"I'd rather see the 4 icons displayed by default\" means that you want to keep the feature to hide some.\nNote that my idea was to show up to 10 different options in this quick access. Precisely the ones shown in #1407, since they make more sense here than in the details view. That's the reason to have a collapsed view. 1-4 icons do not impact much, but 10 break the table.. You were forced to use yarn due to a unfixed bug in latest npm releases (see https://github.com/portainer/portainer/issues/1399#issuecomment-345201350). This is just to note that we should not remove npm from the docs, just update them with a reference to yarn.\nI added the yarn.lock to this PR just now.. - Does your first point mean that you agree to rename .eslintrc.yml and so?\n- I think that adding prettier would change most of the codebase, unless we make it produce the same result as eslint. If we do so, why use prettier? prettier/prettier-eslint#101 What do you think about this \"breaking\" change?\n- I think that to have tools \"triggered as the first step during the creation of a pull request\" is a webhook. Where do you think that the service itself could be executed? If there is no such a service available, we can add how to configure pre-commit hooks in the docs. Shall the tasks be added to the gruntfile, these pre-commit hooks would be to call grunt fmt:fronted and grunt fmt:backend or just grunt fmt. That'd be the mecanism for users not to forget.\n. I'll investigate if codeclimate can take .eslintrc.yml, before making any breaking change.\nSince eslint allows to overwrite, I'll leave prettier apart for now.\nI also thought about that. I know how it could be done in travis. But I don't think it is straightforward, since the CI tool would require write access to the repo in order to commit a modified version of the branch when needed. That would leave the original contributor out of sync. Dependending on the implementation, it would be behind or diverged.\nFocusing only on adding the grunt tasks for now.. My two cent:\n\nI conceive the dashboard as the Ops view @WTFKr0 comments. Indeed, as a limited-feature grafana alike with (optional) tight integration with a sibling stack running prometheus and grafana. See #943.\n\nWhen I read the first message by @luckydonald , what came to my mind was to replace the State label in the containers view with a btn-group composed of 3-4 buttons. This is more similar to travis, where checks for all the branches are shown in a single view. However, I don't know if this can be applied to the stacks view.. @luckydonald, if the labels in the containers list view were replaced with four small boxes representing the four last healthchecks, and filtering out containers without healthcheck enabled was added, would you need a separate page/view? What additional info would that page include?. Possible duplicate of #960.. Hard to interpret, but that it is. However, can we fake it?\n\n\nBuild/pull a dummy image with the tag we want to remove.\n\n\nDelete the dummy image.. I want to remove all the tags of an image that cannot be removed (because it has children images).. @deviantony \n\n\nOption 1: no recreation/edit is possible if the base image has been deleted. You are required to first update and then recreate/edit. Which is the current behaviour.\n\nOption 2: commit the container and create new one based on that commit. I don't know if this would add a layer with each recreation/edition.. @WTFKr0 , I'm not really sure about that. Indeed, I wrote a long comment yesterday arguing that it was not possible for the image to be deleted if used by a container. Then, I did this test in https://labs.play-with-docker.com:\n\nbash\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\ndocker run --name tmp-container alpine ls\n- Open Portainer, go to Image and Force Remove\n- Now go to the container details (/#/containers/tmp-container) and check the image ID.\nI get that the link is broken: \"Failure: no such image\". Even with docker images -a, it is not shown.\n. LGTM. Very good, indeed. Much cleaner now. I tested all the external links. Found no problem.. The \"bug\" lies in app/helpers/imageHelper.js#L7-L26 . I said \"bug\" because the function assumes that any prepending \"word\" with a period is the registry name that the user forgot to remove. Please, try to pull quay.io/carlos.carnero/hello-world:2.0, although it may seem redundant to put \"quay.io\" there.\nThese are the lines to blame:\n// assume valid DNS name or IP (contains at least one '.')\n     if (_.countBy(registry)['.'] > 0) {\n       image = repository.substr(repository.indexOf('/') + 1);\n     } else {\n       registry = null;\n     }. > I'm trying to understand the behavior from the UI point of view. Why shouldn't the Registry and image Name inputs be blindly concatenated (with / as separator) when pulling the image?\nBecause we want to support the users copying and pasting the full name (including the domain). This is propably useless for those images belonging to a registry that is present in the select list. However, it is required in order to allow pulling an image from any remote server. Note that this is not available ATM, because of this \"buggy simplification\". It will be a feature with no cost if we achieve a \"not so simple, but neither complex\" solution.\n\nSuppose I enter nginx:latest on the image name and select DockerHub on the registry. That's equivalent to docker pull nginx:latest on the CLI (in this case, that registry should be null or the empty string).\n\nIt is. It is also equivalent to docker pull library/nginx:latest, docker pull docker.io/nginx:latest and docker pull docker.io/library/nginx:latest. There are four options because the space is defined by two binary variables:\n\nDockerhub.URL can be \" \" or \"docker.io\".\nThese \"library\" images can be composed of one or two single path-components.\n\nHowever, I do think that the spec accepts single path-component images, which are not \"double tagged\" with two variations. That is case 5b in #1439.\n\nWhy is there a separate registries definitions? To keep authentication data for each one of them?\n\nI think that the main feature is to allow the user not to remember the URL (and probably port number) of each registry, because it effectively provides an alias. For example, I can create registry \"dev-registry\" which points o a.rather.long.and.12345678-zyx.complex.domain:0000000, and none of the developers in my group needs to worry about what the URL is. Potentially, it would also allow me to change that URL \"transparently\" (not a supported feature ATM).\nKeeping authentication is also a feature, but I believe that the select box can be removed and have authentication handled silently. Note that I don't know if this is desirable. Just drawing the line between technical limitations and design decissions.\n\nI was thinking that the separate registry definition is superfluous, and maybe just provide an input field for the image name, which would recreate the experience of the CLI.\n\nI think that Portainer should not \"just\" recreate the experience of the CLI. It should be easier, if possible. Yet, I agree on the importance of being able to \"easily\" see which the resulting command will be.\n\nAs @deviantony and @1138-4EB have remarked, parsing the image name into components is complex (for an image name like user.name/hello-world, how would the parser easily know that image.name is not a domain name and should interpret it as a path component?)\n\nWe can be more specific about where the complexity lies, and it is exactly this case you pointed: how do you decide if the string before the first slash is a path-component or a domain component?\nname                := [domain '/'] path-component ['/' path-component]*\npath-component      := alpha-numeric [separator alpha-numeric]*\nalpha-numeric       := /[a-z0-9]+/\nseparator           := /[_.]|__|[-]*/\ndomain              := domain-component ['.' domain-component]* [':' port-number]\ndomain-component    := /([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])/\nport-number         := /[0-9]+/\n\n\n\nKeep the separate registry definitions, but remove the authentication data from that form, because...\nThe authentication data is moved to the user settings of the logged in user of the web application. One record (?) per globally defined registry, if needed.\n\n\nI might be misunderstanding the point, but aren't these modifications independent from actually parsing the image name? Although I have not thoroughly thought about it, I feel this is a separate issue. I mean I have not considered modifying how authentication is handled at all. I am just focusing on image name variations considering I have unlogged access to several registries.\n\n\nUse simple concatenation of the selected registry domain name with the user provided image name, with / as a separator.\n\n\nThis the behaviour right now. If you write quay.io/username/hello-world:1.0, quay.io is identified as being a domain and it is removed: { registry: \"quay.io\", image: \"username/hello-world:1.0\"}. But, and this is the important part, \"registry\" is not used, it is ignored. Instead, the URL field of the option in the select box is used.\nNote that the workaround you are using quay.io/carlos.carnero/hello-world:2.0 won't work if you take \"Dockerhub\" in the select box, because it will try carlos.carnero/hello-world:2.0, i.e. docker.io/carlos.carnero/hello-world:2.0. You need an option in the select box whose URL matches the domain you typed/wrote in the name input box.\n\nIndeed, if #1439 was merged now, these would be the constraints:\n\nEvery image name MUST be composed of, at least, two path-components separated with a slash ([domain/]<image/name>[:tag]). Opposed to docker, with allows a single one ([domain/]<imagename>[:tag]), although I have never seen it used, as commented above.\nIF more than two path-components are used, the domain MUST be included: domain/<image/with/lots/of/path/components>[:tag]\nIf the domain is used, either because it is required or because it is desired, it MUST match the URL field of the option in the registry select box. See proposed solution at #1441.\n\nThese constraints allow us not to explicitly tell domain-components and path-components apart, but just count the number of slashes. However, I fint them not so easy to remember.\nOptionally, we can support a special character, not allowed by docker, to relax these constraints.\n\nOption 1: do not allow to add the domain by default. Require + to explicitly set it.\nOption 2: keep the domain optional and prepend + when the number of path-components of the name is different from 2:  +<imagename>[:tag] and +<image/with/lots/of/path/components>[:tag], where + is replaced with the URL of the registry option in the select box.\n\nI like the first one, because it is easy to remember, and really simplifies this task.. Let me elaborate on the UI/UX point of view if Option 1 and #1441 are merged.\nThe context is a registries list with two entries:\n\n{ Name: 'Dockerhub', URL:' ' }\n{ Name: 'myalias', URL:'myregistry.mydomain.tld' }\n\nSay we want to pull myregistry.mydomain.tld/myrepo/image:latest. The user has three options:\n\nmyrepo/image:latest (requires option myalias in the select box)\n+myregistry.mydomain.tld/myrepo/image:latest\n+myalias/myrepo/image:latest\n\nThe last two formats ignore the option in the registry select box, automatically set the select box option to myalias and (optional) show a notification to let the user know about the change:\nNote that:\n\nIt does not matter if my.repo is used instead of myrepo. Both are supported.\nIt does not matter if the image has a single component: image:latest, +myalias/image:latest, +myregistry.mydomain.tld/image:latest.\nPulling from any external/unknown registry is allowed: +a.remote.registry.otherdomain.tld/myrepo/image:latest (a notification is shown to let the user know that the registry is not in the list, and (optional) a dialog is shown to add it).\n\nThe most important part of this approach is that it is so easy for the user to remember:\n\nIf you want to type the registry/domain, prepend + to the image name.\nIf you don't prepend +, the URL of the option in the select box is prepended. Use alias or URL (known or external). \nDo not use periods in aliases (aka registry names).\n\nTechnically, it is reduced to:\n\nIf the first char is +, split to typedregistry (before the first slash) and image (rest). I.e. replace (_.countBy(repository)['/'] > 1) ? with (repository[0] === '+') ? in app/helpers/imageHelper.js #1439.\nIf typedregistry is not null, see #1441.. > It does not makes sense in some case as well where you can put my.registry.com/myname/myimage:latest in the image field and use DockerHub in the select box... (thus the creation of #1441 I believe).\n\nIndeed...\n\nMaybe we should just replace the whole form part with only one text input, where the user would be able to put the full image name (that is, registry, repo, name and tags. e.g. docker.io/library/nginx:latest for example) and then give an optional ability to the user to use credentials?\n\nI like the idea of spliting credentials from registries, because it makes more explicit that the same credentials can be used for multiple registries.\n\nThis way, we do not need to parse the the entered text anymore (which makes it simpler on our end) and give the ability to the user to specify ANY of the following formats: nginx:latest, library/nginx:latest, docker.io/nginx:latest, docker.io/library/nginx:latest.\n\nHowever, we are dropping the feature to write nginx:latest or library/nginx:latest and pull from myregistry.mydomain.tld, without writing the full domain every time. I do think that adding a single optional first character does not require \"parsing\", just conditional spliting.\nAnyway, since you are already working on it, the list of registry aliases/shortcuts can be added afterwards, as a complementary feature.. A minor modification included in this PR is to move the inner block in the \"vendor\" task to a separate function named checkVendorList. This was done to get rid of a complexity issue.\n\nThe .codeclimate.yml is updated to version 2, which implies to:\n  - Rename engines to plugins.\n  - Rename exclude_paths to exclude_patterns.\n  - Comment ratings because it is deprecated.\nAll these changes were suggested by the codeclimate cli.\n\nnode_modules/ and bower_components/ are added to \"exclude_patterns\" because they will exist in a local development repo.. There is no \"lint\" executable/application/binary in grunt which is diferent from eslint. It is just an alias: https://github.com/portainer/portainer/blob/develop/gruntfile.js#L54 . Done.. I wil. But I'd like to discuss #1439 first, because the implementation of this will depend on the constaints we set there. Replying there now.. Not ATM. But you can have a look at #1380.\n\nIndeed, it would be interesting if you replied there telling what you expect from \"be able to extract the files\". Technically a tarball with the content of the volume can be exported. Is this what you expect? Or is it enough with the web explorer proposed in #1380.. If that's all you want, container's contents are already available in known directory: https://github.com/portainer/portainer/issues/1380#issuecomment-343700556 I think it is recommended not to edit there directly, tho.. @c0fe if I don't get you wrong, you want to bind the full filesystem of a running container to a volume, and then bind that volume to a different container, where you can edit the content. AFAIK, you can't do that, because docker does not allow to bind the full filesystem of a container to a volume. That's why @ncresswell proposed a (read-only) bind mount in the comment I referred.\nHowever, if you don't need to access all the filesystem, but only to certain directories in the container:\n``` bash\nMain running container\n$ docker run -d -v myvol:/shared_volume  \n1. Run a sibling container to edit the content in /shared_volume:\n$ docker run -it \\\n             -v myvol:/mirror_of_shared_volume \\\n             alpine sh\n2. Run a sibling container to edit the content,\nand be able to copy/edit data to/from a local folder on the host\n$ docker run -it \\\n             -v myvol:/mirror_of_shared_volume \\\n             -v /$(pwd):/host_folder \\\n             alpine sh\n3. Automatically backup shared_volume\n$ docker run \\\n             -v myvol:/mirror_of_shared_volume \\\n             -v /$(pwd):/host_folder \\\n             alpine sh -c \"tar -vcf /host_folder/backup.tar\" -C /mirror_of_shared_volume .\"\n```\nI was thinking on automating options 1 and 2 when I opened #1380.\n\nNow that the solutions above provide you a shell. You cannot make the modifications graphically. Then, if you just want to edit some files (neither extract nor add content to/from the host), you can just open a Console in Portainer. No need to use volumes at all.\n\nAfter the comment by @deviantony , the equivalent to the commands above using --volumes-from is:\n``` bash\nMain running container\n$ docker run -d -v myvol:/shared_volume  \n$ docker run -it --volumes-from  \\\n             alpine sh\n$ docker run -it --volumes-from  \\\n             -v /$(pwd):/host_folder \\\n             alpine sh\n$ docker run --volumes-from   \\\n             -v /$(pwd):/host_folder \\\n             alpine sh -c \"tar -vcf /host_folder/backup.tar\" -C /shared_volume .\"\n```. > I am not certain of the container structure and may not know of a particular file name until i see the file contents\nThen, there are two separate but related issues here:\n\nHow do you explore a container you don't know in order to identify which files you need to modify.\nHow do you actually modify certain files which you have already identified.\n\nFor the first one:\n\nPortainer lets you see what layers an Image is made of, and what commands/instructions where used in each layer. This is in the image details view, widget named \"Image layers\". It should let you know the structure of the container and where you can expect those files to be.\nYou can use the Console view of a running container to explore the full filesystem and check the contents of the files, until you identify specific locations and filenames.\n\nOnce you have the list of files you need to extract, edit and put back in:\n\nOption A:\nUse the Console view, install rsync, git or any other tool in the container, and use it to push/pull changes. If there is no shell in the container, go to option B.\nThen, commit the container.\nOption B:\nKill the running container and create a new one with the same settings, which also includes at least a volume. You can use the \"recreate\" action in Portainer for this.\nUse either Option 1 or Option 2 explained in previous messages.\nThen, commit the container.\n\n\nStill, I feel that you expect to be able to modify those files graphically with the tools on the host/remote. This extension to Option 2 will allow you to do that:\ndocker run -it --volumes-from <container_id_or_name> \\\n             -v /$(pwd):/host_folder \\\n             alpine sh -c \"while true; do unison /shared_volume/ /host_folder/; sleep 5; done\"\n\nFurthermore, if the files you are trying to edit are just config files which need not to be modified at all during the execution of the container, I'd avoid putting changes back in and committing the container. Instead, you can use a Dockerfile to build a new image on top of the previous one:\nFROM <image>\nCOPY myfile.conf <dest_dir>/\nCOPY myotherfile.conf <other_dest_dir>/. > Compared Traefik to nginx the performance of Traefik is much better.\nAlthough it might be true in certain setups, Traefik developers acknowledge that it is not:\n\nhttps://docs.traefik.io/benchmarks/\nConclusion\nTraefik is obviously slower than Nginx, but not so much: Traefik can serve 28392 requests/sec and Nginx 33591 requests/sec which gives a ratio of 85%. Not bad for young project :) !\n\n@c0fe , don't take me wrong. I use traefik, because the integration with both Portainer and docker is easy, fast and responsive. It is just that we should be careful with this kind of statements.\n\nOn the issue itself, I'd say that the integration of Portainer and Traefik is quite tight ATM. You can try this gist:\ncurl https://gist.githubusercontent.com/1138-4EB/36eabe6a999728a96daf91d4e076f5f4/raw/602026b711c41d80d252f1cb4b08558602797d12/portainer_traefik_demo.sh | sh\nI you don't want to run it on your own machine, you can try it at https://labs.play-with-docker.com. \nIt will launch a portainer container and a traefik container, these frontends will be automatically created: traefik.traefik.docker.local [traefik] and gallant-jepsen.docker.local [portainer] (note that if we had added --name portainer, the URL would be portainer.docker.local).\nNow, play with it! Lets say we want to map \"mydemo.mydomain.dev\" to port 8082 of a container based on kuberlab/demo-web-server (just a random image I picked). We want to do it using Portainer:\n\nContainers > + Add a container\nImage Name: kuberlab/demo-web-server\nNetwork: traefik_net\nLabels > + add label\nname: traefik.frontend.rule\nvalue: Host:mydemo.mydomain.dev\n\n\n\nPush \"Deploy the container\", and check the traefik frontend. Then browse mydemo.mydomain.dev (you need a DNS server which resolves *.mydomain.dev to the machine hosting traefik).\n\nYet, there are many (possible) use cases which don't fit in the example above. Say, you don't want traefik to access the docker socket. You can check ongoing discussions about this topic in #571 and #1078.\n. Hi @UnclePhil. It is quite strange, as you say, because there seems to be no related modification from 1.15.2 to 1.15.3: git difftool --dir-diff 1.15.2 1.15.3.\nThese are the conditions for the item to be shown:\napplicationState.endpoint.apiVersion >= 1.30 &&\napplicationState.endpoint.mode.provider === 'DOCKER_SWARM_MODE' &&\napplicationState.endpoint.mode.role === 'MANAGER'\nYo seem to fullfill all.\nCan you please run docker run -d -p 9002:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:latest? Note that you can run it in parallel to any other instance you already have. It is just to make sure that the error is not reproduced with an absolutely clean container.\n. @deviantony Done.. I can reproduce the error only if the binary file is present. If it does not exists, grunt shell:buildBinary:linux:amd64 is successful. Investigating https://github.com/1138-4EB/portainer/blob/2726992db0316c2e0e78787d23cce4403ecaaf72/gruntfile.js#L109-L112. Should be fixed now. Explanation: fs.lstatSync does not work properly with grunt. If try is used, it fails when the file exists. If it is not used, it fails when it does not exists. In the end, i used if [ -f file ] in shell, because checks were/are executed in shell tasks (buildBinary and downloadDockerBinary).. Hi @c0fe, as told in #1445, \"you need a DNS server which resolves *.mydomain.dev to the machine hosting traefik)\". It is also noted in the link you provided: \"then we map it in our internal DNS and we have nice working access to our TEST environment\".\nIs the domain you are trying to add known to any internal or external DNS server reachable by your host? If it is not, you need to configure it. In case you can't, you need to spin one.\nFor example, put these files in a dir:\ndnsmasq.conf:\n``` bash\ndnsmasq config, for a complete example, see: http://oss.segetech.com/intra/srv/dnsmasq.conf\ndon't read /etc/resolv.conf or any other file\nno-resolv\nexplicitly define host-ip mappings\naddress=/dev/127.0.0.1\naddress=/docker.local/127.0.0.1\naddress=/docker.localhost/127.0.0.1\nuse google as default nameservers\nserver=8.8.8.8\nserver=8.8.4.4\n```\nDockerfile:\nFROM alpine:latest\nRUN apk --no-cache add dnsmasq && mkdir -p /etc/default/\nCOPY dnsmasq.conf /etc/dnsmasq.conf\nCMD [\\\"dnsmasq\\\",\\\"--no-daemon\\\"]\nand execute docker build -t my/dnsmasq ..\nThen, you can add this to the docker-compose.yml:\ndnsmasq:\n  image: my/dnsmasq\n  container_name: dnsmasq\n  restart: always\n  labels:\n    - \"traefik.enable=false\"\n  ports:\n    - \"127.0.0.1:53:53/tcp\"\n    - \"127.0.0.1:53:53/udp\"\nLast, you need to configure your connection to use 127.0.0.1 as the primary DNS server.\nNow, when you browse mydemo.mydomain.dev[:80], the browser will ask at 127.0.0.1:53, which will be routed to the dnsmasq. It will reply with 127.0.0.1[:80], so the browser will try go there. Since it is routed to traefik, it will be resolved to the corresponding container (note that this container and traefik must share a docker network).. @c0fe Did you check the other hint? I.e., that the container you are trying to route to must be in the same docker network as traefik. Traefik can extract labels and IPs from the docker daemon, but it needs a way to connect to the container.. Almost.\nRegular:\n228     dist/public/css/\n2008    dist/public/js/\nMinified:\n228     dist/public/css/\n1996    dist/public/js/\nWill have to investigate where those 12B are coming from.\n. There is a single file in each folder: app.<0000>.css and app.<0000>.js, respectively. The size of the css does not change. The js is the one that changes from 1996B to 2008B. I left both versions in slack/contribution for you to compare. You will see that the difference is mostly related to where line breaks are introduced. I'd say that in practice, they are equivalent.. This PR is now rebased on top of the changes introduced by #1712, i.e., the migration to FontAwesome 5.. This is integrated in #1333 (see build/builder.sh). However, note that:\n\n\ngolang/builder, which is based on CenturyLinkLabs/golang-builder does not support downloading dependencies only, without building the package/app.\nA script is added in this PR which is the result of merging build_environment.sh and build.sh, replacing goupx with upx, and adding tools/godep. Furthermore, the same script is used for any architecture.. Did you try the browser in incognito mode and/or clearing the cache? You should be able to check the 'real' version in the logs of the portainer container.. Any user should now, at least, that some code is downloaded to the browser and executed locally. Therefore, it is possible that the code executed locally gets out of sync with the server/backend. It is the same when you write a comment in any forum, Q&A site, social network, etc. and it is not properly posted because of a network issue.\n\n\nSaid that. Portainer should be more explicit about this issues and maybe show some dialog/header to let the user know that the page should be refreshed. This and other related issues are known to the maintainers. You can check the list for further details. Examples of related issues you might find:\n\nYou are in the details page of a container details view and it is removed from the cli. Any refresh, or action will show an error.\nYou remove a portainer container and start a new one in the same port. When you try to login, it expects a user and password, instead of letting you configure the default admin password. You need to clear the cache.\n\nEven after doing so, it might fail with a 'endpoint no found/reachable' error, and the container must be restarted. I think this is what @Fish2 commented.. Can this be extended to other forms? E.g.:\n\n\n'Pull the image' or 'Tag' buttons by pressing enter/return in the 'Name' box.\n\n'Create' in the 'Create image' widget of container details view.\n'Connect' in the 'Console' view.\n'Create user' in the user management view.. Hi @thomasricaud , did you try running docker ps in the same host just before starting portainer? Or, can you stop and remove the portainer daemon and try docker ps?\n\nI'd say that your user does not have the required privileges and you need to run sudo docker ps, which is independent of portainer being used.. > I did install portainer using the command line on the same host with my user, meaning i had the right access.\nNote that you can have the right access to execute apt, pacman, dnf... but not to interact with the docker daemon from the cli: https://docs.docker.com/engine/installation/linux/linux-postinstall/#manage-docker-as-a-non-root-user\n\nSo i asked the admin to reboot the daemon docker and it's working fine now.\n\nTherefore, it is possible that the linux postinstall steps referred above where applied sometime between your last try and the reboot.\nHappy it is solved anyway!. Yes. You do. This is quite strange then. Did you remember doing those postinstall steps or telling the admin to do them? Was there any daemon update which might require a reboot?. I can not confirm it, but I'd say it is. I'd say that it was not incorrectly stopped, but it wasn't properly restarted. What sounds really strange is that you could properly execute docker run to start portainer, but docker ps failed. docker run should have failed first.\nAnyway, as I commented, this issue is not likely to be really related to portainer itself, as it is just a container. I mean, there is not \"exclusive access\" required by portainer. Indeed, I usually have multiple portainer instances along with a couple of other containers with the docker socket mounted, plus I use docker cli. Never had any problem, unless related to docker daemon and user permissions.. @yassirh full image IDs are not useful in most of the places, so a preferred approach is to remove sha256: and then truncate to 13 chars (i.e. 10 + ...). You can see it done in #1377: https://github.com/1138-4EB/portainer/blob/1392ce5d07b9fd492fdfcb52d08137fe719c1e59/app/components/image/image.html#L245 Note that 10 is quite random, it could be 12, 15, 20...\nHowever, I think that the point here is to detect when we are getting an ID instead of a name/tag. I'd say that the daemon/API decides it implicitly, it is not explicitly requested by Portainer.\nNote that, even if it is fixed for Image IDs, the table can still be 'broken' because of long names/tags.. You might find this PR interesting: #1324.. It does. Indeed, that's the default behaviour. You can try the 'Console' view, which is already based on xterm.js.. > If you suspect your issue is a bug, please edit your issue description to include the BUG REPORT INFORMATION shown below.\n\nDescription\nBriefly describe the problem you are having in a few paragraphs.\nSteps to reproduce the issue:\n1.\n2.\n3.\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version:\nTarget Docker version (the host/cluster you manage):\nPlatform (windows/linux):\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nTarget Swarm version (if applicable):\nBrowser:. Portainer images are based on scratch and include the portainer and docker binaries only. I'd say that users make little sense in this context, because there is no shell. Could you please explain your use case briefly? I.e., why do you need to set specific PUID and GID values?. You mean the user and password in Portainer? Those which are 'admin' and 'tryportainer' in the demo?. @Haxy89 the image you referred is based on Ubuntu not on scratch. Did you see any scratch-based image offer this feature?\n\n\nAs commented above, I'am pretty sure that it is simply not possible, so Portainer won't ever support it. Yet, you can achieve it if you want: take the Ubuntu image and installl portainer in there, if you really really really want PUID and PGID to be effective.. You can use a watchtower container as shown in https://github.com/portainer/portainer-compose/blob/master/docker-compose.yml\nSet the tag in the compose file to the version of portainer you want to track (master, latest, develop...).. No, you are not right. If you dont specify the tag for an image, it defaults to latest, which I think is the 18-day-old image you are referring to. However, as I said: set the tag in the compose file to the version of portainer you want to track. So, if you change docker-compose.yml#L19 to image: portainer/portainer:develop you will get the one which was last updated 24 days ago.\n@deviantony , why is develop older than latest?. Related to #317 and #1324.. Please, see #1366 and #1588. Related to your second comment, does it work well without --ssl? This is because another user reported that it wouldn't work in a swarm cluster, even without --ssl.. There is an issue with some of the latest npm versions. You should use yarn instead: http://portainer.readthedocs.io/en/stable/contribute.html\nSee second coment in #1399, which points to npm/npm#18434 and npm/npm#17621.. Related to #1380.. @caleno, IMHO there was no need to close the previous PR and open this one, since the content there is relevant to the changes proposed here. Indeed, this seems to be just a commit ahead.\nNevertheless, it is OK if you decided to do it like this. Just, please, consider adding an explicit reference to the previous PR or any other issue related to the first message here:\n\nPrevious merge request: #1764.\nThis is required because of #1309, as commented in #1764.\n\nAlthough I have not tested it, LGTM.\n. Related to portainer/portainer-compose:\n\ndocker-stack.yml\ndocker-compose.yml\nREADME.md. > It is only available for endpoints using the Portainer agent (requires the latest version of the agent to work).\n\nIs this because of a technical limitation or a business decision?. It should. Changed it.. Indeed, in alpine I use sha256sum. It is a little trickier because shasum exists, so a ln is not possible.\nI think that sha256sum is portable enough. However, since it is not used, I commented it. I didn't remove it, because it is a single line and it may be useful in the near future.. Although not so explicit, you have the meaning there:\n'release', 'release:<platform>:<arch>', function(p, a)\nThe function is named 'release' and takes two arguments ('platfom' and 'arch'). Then, var 'p' is arg 'platform', and var 'a' is arg 'arch'.\nHowever, if you still prefer it, I can replace every 'p' with 'platform and every 'a' with 'arch'.. Following the explanation above, 'a' is 'arg'.\n'b' is just an auxliary var. Shall I name it aux?\nAlternatively, I think that 'b' can be dropped:\ngrunt.task.registerTask('watchBuild', 'watchBuild:<arg>', function(a) {\n    grunt.task.run(['build', 'shell:buildImage', 'shell:'+ (a === '' ? 'run' : a) , 'shell:cleanImages']);\n  });\nThe ternary operator itself is meant to replate empty args ('') with 'run'.\nAnyway, this function is not required any more (see reply to last request below).. I have not used Swarm and I was not confident enough to make any functional modification. According to your comment now, I removed lines 291-298. However, when doing so the task 'watchBuild' at line 59 (see above) is not required anymore. I step back, removed that task, and left a single 'watch:build:' task at line 283.. BTW, I don't understand the long comment at lines 284-289. Did you write it?. No idea at all. Note that it is not only for Linux, because for 'linux-arm' copy is used.\nAnyway, that's not something I changed. You can check the develop branch: https://github.com/portainer/portainer/blob/develop/gruntfile.js Lines 30, 46, 63, 80, 97, 114, 131, 148 and 165.. I got lost with the reference to copy:bundle, because I don't see when is it called.\n\nEvery release task should only use the copy:assets task.\n\nI replaced var cp = ( p === 'linux' && ( a === '386' || a === 'amd64' ) ) ? 'copy:assets' : 'copy'; with copy:assets for every release.\n\nNote: as an enhancement minified vendor and angular libraries should only be used during release, unminified libraries should be used during development.\n\nThat's the actual behaviour, isn't it?. Looks great. However, I don't know how to add it to package.json. Can you help me?. Indeed, 'build' is the one which should use 'reg'.. The mapping is 'src.'+type+'Vendor' <-> v[type][min], where v <-> vendor.yml. What additional documentation do you expect?. I think that the default should be 'min'. That's the most used, because 'reg' is expected to be for development only.. Thanks. Any other order condition you are aware of?. OK. I'll do it later.. I like the suggestion. Didn't know about uib-btn-radio. Thank you.\nHowever, I tried ng-model=\"TextView\" uib-btn-radio=\"false\" and it won't. It is the same with the actual implementation if I replace ng-click=\"toggle()\" with ng-click=\"TextView=!TextView \". In both cases, buttons behave properly, but the change is not applied to rd-widget-body. That's the reason behind the inclusion of $scope.toggle = function() { $scope.TextView = !$scope.TextView; }; in the javascript.\nI think this is related to ng-isolate-scope, which keeps buttons isolated from the body. But I didn't find any other workaround for it.. Awesome. Thank you again. I updated it using uib-btn-radio.. OK.. OK.. There is no point at all. But, I don't know why, angular-json-tree won't work if $scope.containerInfo = d; is used. Instead of expanding the tree, all the JSON structure is shown in a single field:\n\n. Since the buttons are located in the header, removing top and bottom margins is required in order to avoid the header becoming higher.. That was it! Thank you.. Done. I added a exception for \"stop\" only. I think that a more complete implementation (such as https://gist.github.com/letsgetrandy/1e05a68ea74ba6736eb5) would be overkill.. I am not sure about it. .finally is already used in other functions (e.g., $scope.remove), but I don't know how to use it in containerNetworkAction. More precisely, ContainerService.remove takes two arguments and Network[Action[0]] takes three.. According to codeclimate: margin-bottom can't be used with display: inline. Severity: Minor. Found in assets/css/app.css by csslint.. It might, but I didn't see any difference. You can check it with any running container and the live style editing option of the browser.. Since this PR replaces ContainersCount with ContainersList and adds ChildrenList, anchors are used to link the icons in the images view to the corresponding widgets in the image details view.. To use the same directive with the new icons in the images view, which show the list of containers or children in a tooltip. This is a \"preview\" to avoid jumping to the image details view if only the names are to be checked.. Some of the intermediate tests we did involved adding an item to the sidebar. When a first level item was added with the \"fa-heart\" icon, this was not properly aligned with the others, because of the width. fa-fw is specially meant to make all the icons in a list have the same width: http://fontawesome.io/examples/\nAlthough we now removed the heart icon, because we added \"About\" as a second level item, I think that it is good to keep fa-fw. I can split it to a different PR if you prefer.. I dropped the previous fix and added this. There was also a missing var.. btn-outline-secondary not available in Bootstrap 3.. Why not sha256:?. I'd go with\nn = imageName[0];\nreturn ( n.substring(0,7) === 'sha256:' ) ? n.substring(7, 19) : n;\nbecause I feel that split is not required if we know that we want to (always) check the first seven chars. But it's a matter of style, so let's wait for @deviantony to reply.. It allows to extract portainer anywhere in the image/container and have it started according to WORKDIR. I think that, if this change is not applied, WORKDIR should be removed from the Dockerfile, because it is not required/used at all.. The first one is to make it explicit that any user can download a tarball from GitHub releases and build their own image (probably adding extra features to portainer).\nThe second one is related to #938 and should not be there. I removed it.. Flags don't provide the port number explicitly, but \"Address and port to serve Portainer\". Therefore, addr is used raw to avoid parsing/splitting the string.\n  . Sure. I thought I had not added it in the end.. I used <400, because that's the implementation in the reference: https://github.com/wtfcoderz/static-healthcheck/blob/master/healthcheck.go\nHowever, I changed it now, to only accept 200.. I used <400, because that's the implementation in the reference: https://github.com/wtfcoderz/static-healthcheck/blob/master/healthcheck.go\nHowever, I changed it now, to only accept 200.. Maybe not. But I'm concerned with prefixing 'node_modules' to angular entries. This PR adds it programatically (https://github.com/1138-4EB/portainer/blob/15fb8b60d83c8108f277cb5a87a3fca6947397de/gruntfile.js#L66), so I think there is no need to write it in vendor.yml.\nI'd say that the only required change should be to add 'angular-messages/angular-messages.js' on top of my first commit in this PR, which I just did. Please, let me know if you expected any other change to be introduced in the rebase.. Why not?\nfor src in css fonts ico images index.html js;do\n    cp -a public/$src %{buildroot}%{_datadir}/portainer/public/\nor remove line 44 and rewrite this as:\ncp -ra public %{buildroot}%{_datadir}/portainer. Might this be enough?\n%dir %{_datadir}/portainer\nor\n%dir %{_datadir}/portainer\n%{_datadir}/portainer/public. ",
    "kelson42": "My use case: creating a container but making somehow an error (or many errors) in the conf. I have currently to restart from the beginning each time such thing happen.. ",
    "PedroMD": "Been waiting for this for a long time! Current open-source GUI projects are either too ugly or difficult to setup. A simple GUI in a portainer way of doing things would be awesome. \nAre you thinking of adding native basic auth support (https://docs.docker.com/registry/deploying/#restricting-access)? . Good to know - thank you!\n. Thanks @deviantony for taking a look into this! I've been trying portainer for the last 30 minutes and this feature is super needed for us as well (and countless others, I can imagine!) \nKeep up the good work! \ud83d\udc4d . ",
    "sabareeshkkanan": "This will be great future . Let me know how i can be helpful. @deviantony I am sorry i got busy and i cant work on it for at least one more month. @MorphBonehunter The new version of protainer already has registry management. . ",
    "galindro": "Nice guys! I want this feature too.. @deviantony , it not works too when the reverse proxy is configured with a non-root path, like this:\nbash\nserver {\n        server_name i.sb;\n        location /portainer {\n                proxy_http_version 1.1;\n                proxy_set_header Connection \"\";\n                proxy_pass http://localhost:9000;\n        }\n        location /portainer/api/websocket/ {\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection \"upgrade\";\n                proxy_http_version 1.1;\n                proxy_pass http://localhost:9000/api/websocket/;\n        }\n}\nIt not works even putting /exec at end of http://localhost:9000/api/websocket/, like showed by @sn00pster \n. @deviantony, without the last / , the websocket proxy worked.\nNow I have only one more question about reverse proxy: In my case (using my config), I need to put a final slash to connect to the home page. Why?\nThis is my current proxy config:\nbash\nserver {\n        server_name i.sb;\n        location /ui {\n                proxy_http_version 1.1;\n                proxy_set_header Connection \"\";\n                proxy_pass http://localhost:9000;\n        }\n        location /ui/api/websocket {\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection \"upgrade\";\n                proxy_http_version 1.1;\n                proxy_pass http://localhost:9000/api/websocket;\n        }\n}\nThis is the problem in browser without the last slash. It seems that, without it, angular can't find some files....\n\n. :+1: . It works if I access http://i.sb/ui/. But if I access http://i.sb/ui , the browser isn't redirected to http://i.sb/ui/#/auth. ",
    "acejam": "This would be amazing.. @ibnesayeed I would have to agree with @MorphBonehunter. If you're setting up a private Docker registry and using Portainer to help manage it, odds are you're also running a build server for CI/CD, which is where images should be built in the first place.. ",
    "pozylon": "Hi guys, I just wanted to share what I'm using at the moment if you haven't seen this one here: \nhttps://github.com/mkuchin/docker-registry-web\nIdeally portainer would also act as an authentication provider to the private registry like that great tool above.. ",
    "timiil": "great feature. \nlittle hope:\n      we can write some description for every repository (just like the markdown sub page in every repo in docker hub). Do we have any plan to view all the images inside our private registry ?. ",
    "MorphBonehunter": "Yesterday i found this one https://github.com/Evedel/bow.\nAs this is also an GO Tool for manage private registries, maybe this one could be used as some \"base\" for this feature request?. @sabareeshkkanan maybe i'm wrong but the latest release add management oft registries for using with credentials. This one is for management of management oft images inside private registries.\nAnd in https://github.com/portainer/portainer/pull/930 it is mentioned in the comments that this is an seperate task?. Hey @deviantony, i think this was an comment for @zwx168238 :smile: . @ibnesayeed maybe i understand this wrong but i would say this is a little bit out of scope.\nfor my understanding registry management is for viewing/delete docker images inside an private registry (something like this).\nwhat you want i think is an CI/CD Tool like drone or the build in from gitlab.. hey @WTFKr0 & @deviantony, what about this one.\nIt' seems there is only one point left (Delete option to remove a repository) or is the blocker the \n docker/distribution#2434 ?\nI would also test the pr, but the portainer/portainer:pr1656 seems not exist anymore. ",
    "zwx168238": "hi may i know what's the status about this feature.\nnow i use 1.14.0.now we still use our custom  registry.. @deviantony  ths .i will try ASAP  if got any new details will let you know. hi  may i know whether we plan to support this feature ? now we only can use cat to watch file can't editor.. it was a great job .and  thanks for your harding working.  will keep watching .. @deviantony \n```\nhi i have found any new info about this issue\nyesterday we want run python GUI application in docker container.\nand after long try.we found a way to make it true.\nand suddenly i open a file use vim, yes, it was amazing .can use it now\nnow i use this method as workaroud then can editor file by vim\nit looks this issue was Associated with ssh,may i know how can the portainer Console works?\nmodify docker container's below file like\n/etc/ssh/sshd_config\nX11UseLocalhost no \nUsePAM no\nand then may be need restart container \n```. after install\nsudo apt-get install language-pack-en-base locales\nvim can works for my all docker container\n@theAJFM ths. ths. @ncresswell now i run in each docker container\nmay be i can mount the docker host's setting into container when docker run. when i try to remove Unused docker images got the below \n2017/10/18 02:31:27 http: panic serving 192.168.65.151:33078: interface conversion: interface {} is map[string]interface {}, not []interface {}\ngoroutine 44 [running]:\nnet/http.(*conn).serve.func1(0xc420276140)\n    /usr/local/go/src/net/http/server.go:1721 +0xd0\npanic(0x9cace0, 0xc4202f2d80)\n    /usr/local/go/src/runtime/panic.go:489 +0x2cf\ngithub.com/portainer/portainer/http/proxy.getResponseAsJSONArray(0xc420385a70, 0x0, 0x0, 0x0, 0x8000101, 0x0)\n    /go/src/github.com/portainer/portainer/http/proxy/response.go:42 +0xa4\ngithub.com/portainer/portainer/http/proxy.serviceListOperation(0xc420467500, 0xc420385a70, 0xc42036ca80, 0x0, 0x0)\n    /go/src/github.com/portainer/portainer/http/proxy/services.go:22 +0x32\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).executeRequestAndRewriteResponse(0xc420130240, 0xc420467500, 0xa9a1e0, 0xc42036ca80, 0x0, 0xec0000c420033630, 0xc420050400)\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:289 +0x8d\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).rewriteOperation(0xc420130240, 0xc420467500, 0xa9a1e0, 0x9, 0x1, 0x997960)\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:280 +0xca\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).proxyServiceRequest(0xc420130240, 0xc420467500, 0xa78909, 0x9, 0xc4202f7301)\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:102 +0x33c\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).proxyDockerRequest(0xc420130240, 0xc420467500, 0xf, 0xc42028ca80, 0xe)\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:47 +0x3fa\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).RoundTrip(0xc420130240, 0xc420467500, 0xf, 0xc42028ca80, 0xe)\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:33 +0x35\nnet/http/httputil.(*ReverseProxy).ServeHTTP(0xc420130200, 0xd4e5c0, 0xc420376c40, 0xc420467300)\n    /usr/local/go/src/net/http/httputil/reverseproxy.go:205 +0x3ce\nnet/http.StripPrefix.func1(0xd4e5c0, 0xc420376c40, 0xc420467300)\n    /usr/local/go/src/net/http/server.go:1977 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0xc42023a660, 0xd4e5c0, 0xc420376c40, 0xc420467300)\n    /usr/local/go/src/net/http/server.go:1942 +0x44\ngithub.com/portainer/portainer/http/handler.(*DockerHandler).proxyRequestsToDockerAPI(0xc42028e480, 0xd4e5c0, 0xc420376c40, 0xc420467300)\n    /go/src/github.com/portainer/portainer/http/handler/docker.go:93 +0x243\ngithub.com/portainer/portainer/http/handler.(*DockerHandler).(github.com/portainer/portainer/http/handler.proxyRequestsToDockerAPI)-fm(0xd4e5c0, 0xc420376c40, 0xc420467300)\n    /go/src/github.com/portainer/portainer/http/handler/docker.go:34 +0x48\nnet/http.HandlerFunc.ServeHTTP(0xc420289220, 0xd4e5c0, 0xc420376c40, 0xc420467300)\n    /usr/local/go/src/net/http/server.go:1942 +0x44\ngithub.com/portainer/portainer/http/security.(*RequestBouncer).mwCheckAuthentication.func1(0xd4e5c0, 0xc420376c40, 0xc420467200)\n    /go/src/github.com/portainer/portainer/http/security/bouncer.go:146 +0xf4\nnet/http.HandlerFunc.ServeHTTP(0xc42028c9a0, 0xd4e5c0, 0xc420376c40, 0xc420467200)\n    /usr/local/go/src/net/http/server.go:1942 +0x44\ngithub.com/portainer/portainer/http/security.mwSecureHeaders.func1(0xd4e5c0, 0xc420376c40, 0xc420467200)\n    /go/src/github.com/portainer/portainer/http/security/bouncer.go:76 +0xfd\nnet/http.HandlerFunc.ServeHTTP(0xc42028c9c0, 0xd4e5c0, 0xc420376c40, 0xc420467200)\n    /usr/local/go/src/net/http/server.go:1942 +0x44\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc42029e000, 0xd4e5c0, 0xc420376c40, 0xc420467200)\n    /go/src/github.com/gorilla/mux/mux.go:133 +0x101\nnet/http.StripPrefix.func1(0xd4e5c0, 0xc420376c40, 0xc4204c4600)\n    /usr/local/go/src/net/http/server.go:1977 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0xc42023a3c0, 0xd4e5c0, 0xc420376c40, 0xc4204c4600)\n    /usr/local/go/src/net/http/server.go:1942 +0x44\ngithub.com/portainer/portainer/http/handler.(*Handler).ServeHTTP(0xc4202e0580, 0xd4e5c0, 0xc420376c40, 0xc4204c4600)\n    /go/src/github.com/portainer/portainer/http/handler/handler.go:52 +0x925\nnet/http.serverHandler.ServeHTTP(0xc4200cf290, 0xd4e5c0, 0xc420376c40, 0xc4204c4600)\n    /usr/local/go/src/net/http/server.go:2568 +0x92\nnet/http.(*conn).serve(0xc420276140, 0xd4ef80, 0xc42028e700)\n    /usr/local/go/src/net/http/server.go:1825 +0x612\ncreated by net/http.(*Server).Serve\n    /usr/local/go/src/net/http/server.go:2668 +0x2ce. the error message in app is \"Failure Unable to  remove image\". i got the same issue \nmy setting was like below\nRegistry URL https://njdocker1.nj.thundersoft.com\nname harbor\nthen i want to use pull image \nname njdocker1.nj.thundersoft.com/public/rsyslog:1.0\nRegistry harbor\ni was setting the auth info and if i use docker pull njdocker1.nj.thundersoft.com/public/rsyslog:1.0 can pull the img from my own Registry\n@deviantony this is my origin setting. @ncresswell ths but we use harbor ,the default port was 80.but even add the port it still does't work\nthrow \"Failure:invalid reference format\"\". @deviantony i use    njdocker1.nj.thundersoft.com/public/rsyslog:1.0 as the image,it was the full path. @deviantony  actually i was do like this . @deviantony  ths  for you hard work , now it was works . error info we got:unable to find user ts: no matching entries in passwd file. \"ts\" was create by myself\n. we can see the \"ts\" user info was store in passwd file\ncat /etc/passwd|grep  \"/home/ts\"\nts:x:1000:1000::/home/ts:/bin/bash. attach error info \n\n. ",
    "ibnesayeed": "If private registry management is to be provided, it would also be great to have automated build feature (similar to DockerHub) from sources like GitHub/BitBucket or any Git server (such as Gitlab, Gitea, or Gogs etc.) that allows webhooks. When designing the UI for automated builds, we should consider adding fields that enable supplying build-args.. I understand that the process of building the image itself is out of scope of Portainer, that is the job of a CI system, but the same is true about the registry too. Portainer is not implementing yet another Docker registry, it is just going to provide a management interface on top of existing registries, so why can't it provide interface for build systems. In my opinion, limiting the definition of \"registry management\" to just viewing and deleting is too restrictive; creating, pulling, synchronizing, tagging, scanning, and visualizing images, all count towards the Docker image management. Features should be pluggable, for example, registry data and controls will only show up when a registry is linked, similarly, build related components would show up only if a build server is linked. Even if we have a CI/CD system configured, opening a separate interface to build images, then using Portainer for the rest of the task would present a disconnect.\nThat said, not everything can be implemented overnight, so certain important features can be prioritized, but the architecture of the new implementation should consider possible extensions in future and design accordingly.. Registry management can now utilize the newly implemented webhooks system (#1663) to implemented DockerHub-like Automated Build system.. We can perhaps read the image name and tag from the stack file and tag the image accordingly. If there is an explicit tag then use that otherwise use latest (that would be the expected behavior).. Thinking out loud... We will need a global prompt or command pallet that can be placed on the Dashboard (or can be invoked by using a keyboard shortcut, for example, Atom and some other code editors as well as Chrome Developer Console have it mapped to Ctrl + Shift + P). This pallet can be used to make fuzzy search to jump to various places. When entered text starts with symbols like $, #, or % (or identified as a command using some other heuristics), it is parsed using some CLI parser library (there are many for NodeJS, some of them can be used in a browser as well). Once the options are parsed, we can navigate to corresponding page automatically and populate the page with parsed data (if applicable). From that point the user can take the action after any necessary changes made to the form. For example, typing $ docker image pull portainer/portainer:develop in the command pallet then hitting enter, should navigate to /#/images/ page and fill the \"Pull image\" form accordingly (i.e., Name field with portainer/portainer:develop).. The goal of this request is to be able to automatically update running services managed by Portainer when their corresponding image is updated (built or pushed) in the registry (such as DockerHub).\nMy first post describes one potential approach to implement it in a secure way. It utilizes webhooks the same way automated builds in DockerHub are notified by associated GitHub/Bitbucket to trigger a new build. DockerHub also has the option to setup webhooks that will ping any URLs specified in it when an image is updated. We can leverage that to implement this feature.\nPlease let me know if you need more explanation on specific parts.. Yes, it is related to #1304, but outlines an implementation mechanism that utilizes the webhook (or in other words notification or pingback) feature of registries or other CI/CD systems rather than using periodic polling that can be wasteful or delayed.. I came back to check for any progress on this request. I was surprised to see the number of thumbs ups to the first post, but no one seems to be interested in working on this. While I have an architectural understanding of how this feature can possibly be implemented (as outlined in the first post), I am not familiar with Portainer code base and for the next few months some other priorities are keeping my hands tied. Though, I would really like if someone could take care of it soon. I will be more than happy to discuss implementation details if necessary.. Thanks for pushing this one forward. I just deployed it and now exploring around. I will provide more feedback in the PR #2161.\nShould we also plan to generalize this webhook functionality for other entities (as I briefly described in an earlier comment) and make it a top-class entity to show up in the sidebar menu? An immediate extension that I can think of is webhooks for images that would allow us to connect directly from a source repo (such as one on GitHub or BitBucket) and build an image directly (which is made possible by #1667) when the code changes. Optionally, we can also update services/containers when an associated image is updated locally.. If we do decide to make webhooks for more than one entities, we might want to namespace URLs as https://portainer.example.com/api/webhooks/services/12345... and https://portainer.example.com/api/webhooks/images/12345... instead of https://portainer.example.com/api/webhooks/12345....\nThough it is not necessary as the hook IDs can be unique across the system and their associated type can be stored in a table in the form of polymorphic association.. I have also been testing this and provided feedback on both the functionality and code.\n\nShould we namespace webhook URIs (by including services in the URI to extend the functionality to other aspects such as images in future)?\nI think the <none> tag issue is present in the stack functionality. When a stack is deployed/updated without first updating the image explicitly, the image that is pulled does not get tagged properly. I have been seeing this issue for a long time.\nSince we are not utilizing any payload from the webhook pingback, should we also make it work on a GET request and not just on a POST request? Ideally, webhooks should be a PUT request, but existing systems send it via POST, so having it work on POST is important. However, supporting GET will be more convenient to trigger an update from thee command line.. On the UI side, I initially thought we might want to add the toggle switch in the tabular listing of services, be it on the main services page or under a specific stack. However, I think adding just the switch in insufficient. So if we do so, we will have to have more UI elements to expose the webhook URI (possibly in the drawer that shows up when a service row is clicked).. > I don't think so, but we'll extend the Webhook object to support a new Type field.\n\nAs long as future extensions won't break, I am OK. I just pointed it out so that we can make it future-proof.\n\nYup, this is a known issue.\n\nDo we have a ticket to track this issue?\n\nAs most of the systems are sending POST requests, I believe that we should keep it this way. While a GET request would be more convenient via the CLI, it's not that much of a hassle to actually send a POST request so I don't think we'll want to support GET requests as well.\n\nI'm cool with this. I am not a big fan of having too many ways to do the same thing, but I thought it might be useful for some.. @kendrickm, I pulled the latest portainer:feat1663-add-webhook image a few minutes ago after your recent commits and redeployed the stack on my server. Now, my existing webhooks are broken. All the services where I have enabled webhooks are now appearing to have disabled associated webhooks. If I try to send a POST request to a webhook that was created earlier, I get a 500 response code and if I send a request to a non-existing random one, I get a 502. I feel like we can improve status codes here, depending on the situation.\nI think the reason has to do with the newly added webhook type field which is not populated for existing tokens. If so, is there a way to patch the database on my running instance as I would not like to recreate all those tokens and update records in DockerHub for all associated repos.\n```\n$ curl -X POST -i https://portainer.example.com/api/webhooks/\nHTTP/1.1 500 Internal Server Error\nContent-Length: 102\nContent-Type: application/json\nDate: Thu, 30 Aug 2018 21:23:15 GMT\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\nX-Xss-Protection: 1; mode=block\n{\"err\":\"Unsupported webhook type\",\"details\":\"Webhooks for this resource are not currently supported\"}\n```\n```\n$ curl -X POST -i https://portainer.example.com/api/webhooks/\nHTTP/1.1 502 Bad Gateway\nDate: Thu, 30 Aug 2018 21:23:21 GMT\nContent-Length: 11\nContent-Type: text/plain; charset=utf-8\nBad Gateway\n```. I was able to fix my deployment by manually editing the Bolt database file using https://github.com/br0xen/boltbrowser.. I was able to fix my deployment by manually editing the Bolt database file using https://github.com/br0xen/boltbrowser.. > Are you using a webserver proxy in front of it?\nYes, I am using Traefix as a reverse proxy in front of my Portainer instance and everything else.. > Are you using a webserver proxy in front of it?\nYes, I am using Traefix as a reverse proxy in front of my Portainer instance and everything else.. While I am very happy with this feature being in the pipe of getting merged, I was thinking will it be useful to have the ability to optionally customize the token? I can think of some places where one might have some naming scheme for these tokens to automate batch processing without essentially querying all services and their associated tokens. On the UI side, we can add a button next to the Copy link button that says, \"Customize token\" or \"Vanity token\". We can perhaps have both a randomly generated token that has an optional custom alias.. While I am very happy with this feature being in the pipe of getting merged, I was thinking will it be useful to have the ability to optionally customize the token? I can think of some places where one might have some naming scheme for these tokens to automate batch processing without essentially querying all services and their associated tokens. On the UI side, we can add a button next to the Copy link button that says, \"Customize token\" or \"Vanity token\". We can perhaps have both a randomly generated token that has an optional custom alias.. > @ibnesayeed we can open a new enhancement request later on for this.\nYes, I agree. I didn't mean to stall the corresponding PR, but to share my thoughts.. > @ibnesayeed we can open a new enhancement request later on for this.\nYes, I agree. I didn't mean to stall the corresponding PR, but to share my thoughts.. Opened #2236 to track the custom token feature.. Opened #2236 to track the custom token feature.. This will go great with the addition of webhook mechanism as described #1663, but for building images. For example, setting up a webhook in GitHub to notify our Portainer installation whenever there is a change in the repo. This will allow replicating automated build feature of DockerHub.. This will go great with the addition of webhook mechanism as described #1663, but for building images. For example, setting up a webhook in GitHub to notify our Portainer installation whenever there is a change in the repo. This will allow replicating automated build feature of DockerHub.. @deviantony is there a reason why building an image by a URL interface does not contain the Authentication fields as it is the case with the new stack by git repository interface? Adding that would allow us to build images from the private repos as well.. @deviantony is there a reason why building an image by a URL interface does not contain the Authentication fields as it is the case with the new stack by git repository interface? Adding that would allow us to build images from the private repos as well.. I am assuming that the system can build images if one is to provide an HTTPS URI of a private GitHub repo that contains credentials (be it username:password combo or a personal token), right?. I am assuming that the system can build images if one is to provide an HTTPS URI of a private GitHub repo that contains credentials (be it username:password combo or a personal token), right?. > It's a Docker API parameter, so we would need to ensure the Docker API can do that.\nI have actually verified that it works. I have tested it both with the CLI and the HTTP API.\n$ docker image build -t https://<credentials|personal-access-token>@github.com/private/repo.git\n$ curl --unix-socket /var/run/docker.sock -X POST \"http:/v1.30/build?t=foo&remote=https://<credentials|personal-access-token>@github.com/private/repo.git\". > It's a Docker API parameter, so we would need to ensure the Docker API can do that.\nI have actually verified that it works. I have tested it both with the CLI and the HTTP API.\n$ docker image build -t https://<credentials|personal-access-token>@github.com/private/repo.git\n$ curl --unix-socket /var/run/docker.sock -X POST \"http:/v1.30/build?t=foo&remote=https://<credentials|personal-access-token>@github.com/private/repo.git\". > Please open a new issue to track this evolution.\nDone #2245.. > Please open a new issue to track this evolution.\nDone #2245.. I think we need a credential management interface where one can store:\n\na set of username and password along with the associated service host\nauthorization token such as JWT or those from oAuth providers\nSSH keys for both talking to other systems or to the Portainer instance itself (if such a feature is provided in future)\n\nOnce we have such credentials in place, we should be able to select them when creating stacks from a private repo, pulling private git or other repos to generate images , pulling images from a private Docker repo, an many other places where we need to interact with external services.. I think we need a credential management interface where one can store:\n\na set of username and password along with the associated service host\nauthorization token such as JWT or those from oAuth providers\nSSH keys for both talking to other systems or to the Portainer instance itself (if such a feature is provided in future)\n\nOnce we have such credentials in place, we should be able to select them when creating stacks from a private repo, pulling private git or other repos to generate images , pulling images from a private Docker repo, an many other places where we need to interact with external services.. > @ncresswell: If someone can suggest an opensource license that allows the code to be open, but not reused for commercial means, please do let us know, we spent $ with lawyers trying to find a license that worked, but none provide any IP protections.\nI am not a lawyer, but trying to toss in some of my understanding around it. If the reuse of the code in commercial software is intended to be prohibited then GPL variants might be helpful. Also, there is a more permissive license, BSD+Patent that allows inclusion of patents. Alternatively, one can create a custom license (or modify existing to add necessary clauses) and distribute the software as desired.. > @ncresswell: If someone can suggest an opensource license that allows the code to be open, but not reused for commercial means, please do let us know, we spent $ with lawyers trying to find a license that worked, but none provide any IP protections.\nI am not a lawyer, but trying to toss in some of my understanding around it. If the reuse of the code in commercial software is intended to be prohibited then GPL variants might be helpful. Also, there is a more permissive license, BSD+Patent that allows inclusion of patents. Alternatively, one can create a custom license (or modify existing to add necessary clauses) and distribute the software as desired.. I think we should create a ticket to eventually remove this line at a later date, perhaps when 1.18.0 is released.. I think we should create a ticket to eventually remove this line at a later date, perhaps when 1.18.0 is released.. A very big thanks for @kendrickm, this is really a fantastic work.. A very big thanks for @kendrickm, this is really a fantastic work.. One benefit of custom tokens would be their predictability based on some out of band naming scheme. For example, a teacher has 30 students in a programming class where each students is supposed to work on a web project. Their code is deployed on a Docker-based server using Portainer. To trigger updates manually or in automated fashion, webhooks can be utilized. Now, the teacher can email individual students and tell them their random webhook URL, but this will be a lot of work and will have to be repeated if for whatever reason tokens are lost and were recreated. On the other hand if the teacher can define a token naming scheme that combines the course number and school login id of students, then a single email will allow everyone know how their webhook would look like. There can be other places where certain patterns are followed in repeated tasks to leverage convention over configuration.. One benefit of custom tokens would be their predictability based on some out of band naming scheme. For example, a teacher has 30 students in a programming class where each students is supposed to work on a web project. Their code is deployed on a Docker-based server using Portainer. To trigger updates manually or in automated fashion, webhooks can be utilized. Now, the teacher can email individual students and tell them their random webhook URL, but this will be a lot of work and will have to be repeated if for whatever reason tokens are lost and were recreated. On the other hand if the teacher can define a token naming scheme that combines the course number and school login id of students, then a single email will allow everyone know how their webhook would look like. There can be other places where certain patterns are followed in repeated tasks to leverage convention over configuration.. I am not sure if I am too late, but one possibility to minimize the clutter is to tie it with the new stack creation interface. There are tow ways to go about it:\n\nAdd a dropdown menu to the [+ Add stack | v] button that says something like, Duplicate an existing stack\nUnder the Build method of the new stack creation interface add a button to populate fields from an existing stack\n\nIn either case we will have to introduce some way of population a selector that renders all the existing stacks.. I am not sure if I am too late, but one possibility to minimize the clutter is to tie it with the new stack creation interface. There are tow ways to go about it:\n\nAdd a dropdown menu to the [+ Add stack | v] button that says something like, Duplicate an existing stack\nUnder the Build method of the new stack creation interface add a button to populate fields from an existing stack\n\nIn either case we will have to introduce some way of population a selector that renders all the existing stacks.. I actually removed that line first, but then realized, we should keep a note for a while that the support was dropped in 1.17.0, though prior versions of Portainer (such as 1.16.x) might still support standalone Docker Swarm versions >= 1.2.3. After a while when very few people are using 1.16.x, we can perhaps remove it completely.. However, if the intent of README is to reflect the most recent state of the software then I can go ahead and remove this line.. * Standalone Docker Swarm >= 1.2.3 (NOTE: Use of Standalone Docker Swarm is being discouraged since the introduction of built-in Swarm Mode in Docker. While older versions of Portainer had support for Standalone Docker Swarm, Portainer 1.17.0 and newer will not support it.  However, the built-in Swarm Mode of Docker is fully supported.). Will something like this work?. This tooltip message, \"It will use the latest version of the service image\" could be misleading or confusing because (unfortunately and inappropriately) latest happens to be a well-known default tag for images. Suppose a stack was configured to use an image foo/bar:baz which is then resolved to a specific hashed version in a related service as foo/bar:baz@sha256:12345.... Inferred service image in this case is content-addressable which will never change. Configured service image (in the stack) perhaps have a different tag that latest (in this example it is baz) so if we are fetching the latest version of that (which most probably the desired one), we should be more clear about it. If however by latest image we mean the latest tag, then it might be undesired.. Same as the comment in createservice.html. Only include :<port> in the URL if it is not the default port of the protocol (i.e. not 80 for HTTP and not 443 for HTTPS). A URL like https://portainer.example.com:443/api/webhooks/12345... does not look good.. In Create update webhook, \"update webhook\" is used as a noun, but \"update\" in it may also sounds like a verb to some. Should we change it to something like, \"Create a service webhook\"?. \"Update webhook\" here sounds more like we are asking to update the webhook instead of taking this whole thing as a noun. Should we change it to something like \"Service webhook\" or \"Update service via webhook\"?. How about something like this? Create a webhook (or callback URI) to automate the update of this service when the associated image is updated in a repository that supports webhooks. Sending a POST request to this callback URL (without requiring any authentication) will pull the most up-to-date version of the associated image and re-deploy this service. These phrases can be improved grammatically or to make them more compact though.. Also, we might also want to add a link to a more detailed documentation page about webhooks in the tooltip.. For consistency sake let's use callback URI in both the places (and not both URI and URL).. Below is an untested code, but something along this line should do the trick.\njs\nhelper.returnWebhookUrl = function(token) {\n  var displayPort = $location.protocol().toLowerCase() == \"http\" && $location.port() == 80 || $location.protocol().toLowerCase() == \"https\" && $location.port() == 443 ? \"\" : \":\" + $location.port();\n  return $location.protocol() + \"://\" +  $location.host() + displayPort + \"/\" + API_ENDPOINT_WEBHOOKS + \"/\" + token;\n};. Should ? '': ':' + be ? '' : ':' + instead? Note the space before the first :.. Should the WebhookType be an int or a more readable string instead?. When a webhook is not found (as it was deleted or user is fabricating the id), should we return 404 instead of 500? A 500 response code should be returned when the server is at fault.. ",
    "fenchu": "I can verify v1.20 works with sonatype nexus3 v3.14-03 login. great work :-). ",
    "ncresswell": "Excellent, thank you. Will will note that.\nRgds,\nNeil Cresswell\nOn 20/12/2018, at 2:07 AM, fenchu notifications@github.com<mailto:notifications@github.com> wrote:\nI can verify v1.20 works with sonatype nexus3 v3.14-03 login. great work :-)\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_56-23issuecomment-2D448590944&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yGCmP5tAulb7SmKs12tsp0Dfvk7IylbzAReuob1lSKs&s=ywe6HBgRFL7dCymw14VQmbO8D_4qXF_1oQi-3N0HeSM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQmkkHnmebzGu7Sd4iEsdlacEchfks5u6joigaJpZM4JJ4Mj&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yGCmP5tAulb7SmKs12tsp0Dfvk7IylbzAReuob1lSKs&s=_HjcGUHlN7d3AhmkL2lEBml64cHCdqQzRFfEeFZYYOg&e=.\n. Hmmm we hadnt considered that. I am reluctant to use a JSON file, so could revert back CLI with multiple --endpoint= env variables..\nAnthony?\n. Anthony, i agree. We only support adding the default endpoint through CLI, but all others through the UI.\n. Yes, that is the behaviour of SwarmMode.\nRgds,\nNeil Cresswell\nOn 28/12/2016, at 2:34 AM, mkamlesh notifications@github.com<mailto:notifications@github.com> wrote:\nPortainer only seems to be able to pull data when I run container on swarm manager node (swarm mode) pointing to unix socket. And in that case it only shows containers launched on that particular node and not all of them from swarm cluster. Is this an expected behavior?\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_207-23issuecomment-2D269326749&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KlnOoxz1UcnRKUpJAMZ1MOw_Ut1Hj_cTGpzILg_re88&s=92yD-UIit4k19xKA5EKMlK6hhcUm2geLxOf4Lwg4AZY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQn4N-5FcVlJ1NJE5L2Cr15IJmQFSuks5rMRPcgaJpZM4J22eK&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KlnOoxz1UcnRKUpJAMZ1MOw_Ut1Hj_cTGpzILg_re88&s=9tStY5FOneFhFv3ZYC3VKGGYhg05CAIa96kr3O7iId8&e=.\n. We are working on trying to build an aggregated view... its actually a limitation of swarmmode, not portainer.\nIn Swarmmode, you deploy \"Services\" not containers... services we can see as they span all nodes in the cluster.. containers are not part of swarmmode per-say, and therefore their location is not returned by the swarmmode API.\nRgds,\nNeil Cresswell\nOn 28/12/2016, at 5:39 PM, mkamlesh notifications@github.com<mailto:notifications@github.com> wrote:\nThanks, Neil. In future, would it list all the containers from swarm cluster? If not, what would be the reason for not doing so? Anybody who is managing swarm cluster through UI, would like to have complete view of system.\nThanks and Regards,\nKamlesh\n-\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_207-23issuecomment-2D269424629&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=cLCKHhRVlU0EbWSTs-aZnPSpq9zdbkzU3uPKLUqYrSA&s=i_-CXud3lKmO2DKni6yWCFmFDm6b7rACRGV6_ChlVSE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbfTmUjS1A8suuET1fORNtiEE1Afks5rMefsgaJpZM4J22eK&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=cLCKHhRVlU0EbWSTs-aZnPSpq9zdbkzU3uPKLUqYrSA&s=H8pSXdnAOa3vBgHuqohhJXbiroWIfmGKP_rOHHHs-IU&e=.\n. At the moment we dont have read only users, but will add it soon\nRgds,\nNeil Cresswell\nOn 1/07/2017, at 5:22 AM, Wilfred Hughes notifications@github.com<mailto:notifications@github.com> wrote:\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vpL5Cgl6Ldn6zvrjGkP2zwP-5qliUKVN9wj4C2tWQEI&s=PahjoENj9eG0lpJhuUKdkhWCXp8edLYjUnuRReWLtvc&e= this is closed, but I can't see any reference to guest users in the associated pull requests. Are guests users currently supported?\nI've played with teams, but those only seem to allow access to a docker socket (both read and write).\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_235-23issuecomment-2D312325325&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vpL5Cgl6Ldn6zvrjGkP2zwP-5qliUKVN9wj4C2tWQEI&s=0etKoGacljaVGCioo88GfO_uRve5mi3RtnMraX9G9y4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaYDUJJUyLP7-2DZA0gvWuAFfq4JZ8ks5sJS63gaJpZM4KGL-2D4&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vpL5Cgl6Ldn6zvrjGkP2zwP-5qliUKVN9wj4C2tWQEI&s=ZAGPZTGHXPPgaHDalE0KIFH1mz42WUraExMkbKZ5enQ&e=.\n. Stack, or Apps ? I thought that \"stack\" as a term, is being used in Docker 1.13.\nRgds,\nNeil Cresswell\nOn 15/01/2017, at 10:04 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nHow would you guys like to have compose support in Portainer? The way I see it at the moment :\nWe should give the users the ability to define 'stacks'. When creating a stack, you provide a name and a docker-compose YML file. Once the stack is created Portainer should give you the ability to manage it (up down etc) and also a way to manage each service in that stack (start stop a service etc). From the stacks view you should be able to manage your stacks (add, edit, delete) and access to a detailed view for each stack (which allows you to manage it as well as giving a visual representation of the containers of the stack).\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_257-23issuecomment-2D272659965&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Fw9ndRCBfdaqM_QJPyMAN8dnAJGj7OhptUL9ydxCALg&s=p25fvB-hAknn38kSn_OEJqEqB3TuGZ8-UqFZwealFtI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTwoVUv-2D5p-5FIce0kU9jEY68YRJF0ks5rSVR1gaJpZM4KOcDQ&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Fw9ndRCBfdaqM_QJPyMAN8dnAJGj7OhptUL9ydxCALg&s=V2ivYy3sHro5tBndkdegDkzw5Q8cGUU0pQXiAJjAFWc&e=.\n. My preference is client side\nRgds,\nNeil Cresswell\nOn 1/03/2017, at 3:44 AM, WTFKr0 notifications@github.com<mailto:notifications@github.com> wrote:\nToday, no API is present for listing/updating stacks in docker 1.13\nDocker cli is doing that\nNo ETA for implementing stack API, so I think we can't wait for that\nSo we have to code that in portainer\nWhat do you prefer :\n\nImplement that on API (go), based on https://github.com/docker/docker/tree/master/cli/command/stackhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_docker_docker_tree_master_cli_command_stack&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=woJBAGvM3Rz9Goy1FAu7X9SpAOmzFLk6kWnUJbu5kT8&s=ydq_ckUHyfVCtAFRLosfwSln63160TJ61XtGtWb6Whw&e= and have a new portainer api endpoint like /api/stacks\nImplement that client side, calling multiple existing API endpoint\n\n?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_257-23issuecomment-2D283057380&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=woJBAGvM3Rz9Goy1FAu7X9SpAOmzFLk6kWnUJbu5kT8&s=yAkCaVoPo5DT07Z-50aM05R2FmNwj_8HhCijAehH9y8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSNYboDHJYtv5WI2sINu4xGMhl36ks5rhDKmgaJpZM4KOcDQ&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=woJBAGvM3Rz9Goy1FAu7X9SpAOmzFLk6kWnUJbu5kT8&s=hVCGqyH5ePC-22L-yD7LyJ93EtepgUC4TpmGuyCdWEA&e=.\n. We will not be adding compose support, instead we will focus on extending stack support.\nRgds,\nNeil Cresswell\nOn 11/02/2018, at 12:51 PM, rtmaster notifications@github.com<mailto:notifications@github.com> wrote:\nAny news on docker-compose support?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_257-23issuecomment-2D364724146&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=fjctoKmoiDjEKvN0vAjtGyk-e7veH02nkv_oWuJyo9g&s=oUMEJlbUVvsU329BdxgNIXwx4HkXALFwBPLrPVmuIKU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQV-2DO-2DCftdiSig2ma4E4-5FaU4l3mxks5tTn-5FsgaJpZM4KOcDQ&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=fjctoKmoiDjEKvN0vAjtGyk-e7veH02nkv_oWuJyo9g&s=EWWxopT1zWm5twM4X9Jcz4L724wqzgH2N2mJuj1XJxI&e=.\n. Agree..i dont think we need to both adding template OS support as all vendors are being encouraged to create  multi-arch images...\nSent from my iPad\nOn 23/09/2017, at 9:37 AM, Edward Vielmetti notifications@github.com<mailto:notifications@github.com> wrote:\nSince this issue is still open, it's worth noting that with Docker's multiarch support in its official images, the number of things that \"just work\" from the directory when running on an arm64 system is much better than before. I don't have a total count yet, but roughly half of the images I tried just worked.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_273-23issuecomment-2D331605182&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MiFyXxJiOV9oAp-rEYdN0VSrk3MtN6RmjyTyey5Nt_4&s=bnP4bkM8assTF20Qrlpy0GMziD_bz0KOZyvcwhOP-Qs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcldn6F8-2DcsNqqeXR67z50CA1-5FtOks5slG7-5FgaJpZM4KZDBk&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MiFyXxJiOV9oAp-rEYdN0VSrk3MtN6RmjyTyey5Nt_4&s=MSD5GaL5iCG0sfMrpvVobIMDcpQ2uQFDLGHbTqD2Qgk&e=.\n. I actually prefer all items on a single page, rather than as you have mocked up with each section broken out..\nPersonally, just renaming SAVE to APPLY, and moving the button to the top of the page, would achieve the result of making things crystal clear that any changes made are not active until the apply button is pressed.\nN\nRgds,\nNeil Cresswell\nOn 25/12/2016, at 12:01 PM, Glowbal notifications@github.com<mailto:notifications@github.com> wrote:\nI've added support for most of the items on the above list, and started with the remaining ones (they are view only for now). When I did this, I found that the view became very crowded and it was to compact. I also found that having to click on an edit button to edit for example replicas, followed by a click to \"save\" and pressing the actual save button after was not really a nice way of doing this.\nI suggest to overhaul the service detail view.\nFirst off, I feel like fields should editable right away without having to first click on their own edit button. That worked well when it was editing a single field only, but since the save button that feels unnecessary. That would eliminate the first click to get the input field, and the second click to store the edited value so it can be saved.\nThe additional details (that may or may not be editable) should all be put in their own containers / widgets. I did some work on this already, but I'm not entirely sure how to best order them. For now, I stuck to the same order as they are in the Docker API response. This made the most sense to me.\nBecause the amount of items are quite long, I also felt a second navigation menu would be useful to quickly jump down to the desired part of the page.\nHere are some screenshots of how it currently looks. I'd love some feedback / input about this idea and if it's something you are interested in before I PR this.\nMain details view and the quick navigation menu. Clicking on an item in the quick nav menu will have you jump down to that section of the page.\n[screen shot 2016-12-24 at 23 54 16]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_5007509_21469019_6f108050-2Dca34-2D11e6-2D9ae0-2D60ac44f3d108.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FX-qQy2FMZRhZwDkOnflSGOnR6ca8HfhxM5tup4MlQM&s=Cr2UiOTFeuQErTqewCqic-8Kd5kIC4Tb-39wgkrRgwo&e=\nService configuration / information is grouped. For example, the service container configuration:\n[screen shot 2016-12-24 at 23 54 46]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_5007509_21469022_a632395c-2Dca34-2D11e6-2D8679-2Df7891b748671.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FX-qQy2FMZRhZwDkOnflSGOnR6ca8HfhxM5tup4MlQM&s=fItP2ROFW0AYE27GphNhicRYfohhJOxFnye0A8KdoeI&e=\nYou can edit a specific part, e.g. add a new mount, and the save button will appear under that configuration section. You can reset just those changes as well (or all changes on the entire page, but clicking on the drop down button.\n[screen shot 2016-12-24 at 23 55 01]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_5007509_21469026_d31fe996-2Dca34-2D11e6-2D9be9-2Dcacf1322ca0d.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FX-qQy2FMZRhZwDkOnflSGOnR6ca8HfhxM5tup4MlQM&s=zzH4taK0_dl2h9jBxhC4_T4d9G-xJJzt6_ci8XiWG58&e=\nIf this is in the direction you would like to go, pagination support should probably be added for things such as ports, environment variables and labels.\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_304-23issuecomment-2D269103470&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FX-qQy2FMZRhZwDkOnflSGOnR6ca8HfhxM5tup4MlQM&s=5s9RUkhfY15PnB2woMC8N-v1cdkvD__El9oDFEMHh3Q&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlY5mPUYl-5FxPEiTXHwsUWZ7e-2D-2Dsrdks5rLaRIgaJpZM4KkfOb&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FX-qQy2FMZRhZwDkOnflSGOnR6ca8HfhxM5tup4MlQM&s=cPZfso6dgKaRb1tbPQF0WClQ8Z6TSkq-Da06cFij5qo&e=.\n. You ran that on your host on inside each container?\nRgds,\nNeil Cresswell\nOn 29/09/2017, at 6:20 PM, zwx168238 notifications@github.com<mailto:notifications@github.com> wrote:\nafter install\nsudo apt-get install language-pack-en-base locales\nvim can works for my all docker container\n@theAJFMhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_theajfm&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PAtE3MorRXgqCdOJJisM8TazHUoUAdEeoCGHpzuoPIk&s=SG4rHe7Tv3dPouSl6EVzcysq_LqWOL0oO2_enZ88sKM&e= ths. ths\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_322-23issuecomment-2D333033434&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PAtE3MorRXgqCdOJJisM8TazHUoUAdEeoCGHpzuoPIk&s=Qw1szPgM1REIb0ddS_05eijepimz2lGxgs7Yuwq6PO4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleC8VlVknhh-2DgIjAIWD7gI07j0yKks5snH4OgaJpZM4KpPuS&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PAtE3MorRXgqCdOJJisM8TazHUoUAdEeoCGHpzuoPIk&s=TnBa5uffL-B0nRqYx84AodfwBC5vMu1D_fMuL2DQzxI&e=.\n. I have not been able to find any means to edit an existing file with an editor within the console. Any editor wants to start a seperate interactive process, which hangs the console.\nI just use sed command to modify things within existing configs, or use echo to create new.\nIdeally we find a way to support vi / vim / nano.\nRgds,\nNeil Cresswell\nOn 7/08/2018, at 10:21 AM, NextBlaubeere notifications@github.com<mailto:notifications@github.com> wrote:\nok...\n\nvi and vim do not work...\nwhen saving a file with nano i get messed up files.\n\nwhat do i supposed to do with those last commands from @brunnotelmahttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_brunnotelma&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=60RStcZ0t7MpsBM8uhg-hNA9BfzvyodPmjlgwvg_xRo&s=Rk5UBrIZeyAO1dnm1zsp0aFKm0-WWGRKQzwmrIPsvJg&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_322-23issuecomment-2D410871338&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=60RStcZ0t7MpsBM8uhg-hNA9BfzvyodPmjlgwvg_xRo&s=FfjwInt6tBbhwxHmqtNGr4O8K3zla6XZ3dTtBRp49SA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTl4p5N6hMX3C3inamrgBdfn6Mv4ks5uOMFRgaJpZM4KpPuS&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=60RStcZ0t7MpsBM8uhg-hNA9BfzvyodPmjlgwvg_xRo&s=vnPrW6eOR6I2fIzkLSVHfgQ0tuCDk6Xo4MkBKxHbt64&e=.\n. The way you do this is by creating a customer network (docker network create) or use portainer to create a new bridge network, and the deploy your containers on this network. You can then address your containers by their container name, so for example, \u201cwordpress\u201d container can connect to \u201cdb\u201d container using the hostname \u201cdb\u201d\nN\nRgds,\nNeil Cresswell\nOn 22/08/2018, at 3:02 PM, daninfuchs notifications@github.com<mailto:notifications@github.com> wrote:\nFWIW this \"legacy feature\" that \"may eventually be removed\" (quotes from the Docker docs referenced above) still seems to have no functional equivalent to my knowledge, and is presently hamstringing me being able to use an OpenVPN container to link to several local docker images with services that misbehave when sent thru typical tcp proxies (SOCKS, SQUID, TCP tunnels, etc) to my VPN, while exposing an nginx forward proxy to the local network to enable access via management hub software.\nMy home network may be trivial and the services aren't actually important to anyone but myself right now, but the fact remains - it's been over a year, Docker has (presumably?) updated several times now.\nI'd like to have access to a manual way to use the UI for a link. I hesitate to do it by hand; I don't understand Docker/Portainer well enough to trust that something won't break if I try to update the container(s) through the UI later, or if the UI eventually DOES patch in support, etc etc etc - any official word? Can we link containers? Please? Can we get an official \"just issue docker run <...> --link <...> from the command line and there won't be any issues with modifications from within Portainer UI\" from someone?\nCan we support links, with a caveat posted in oldschool HTML blink tags to make sure everybody notices that they might stop working? Granted, by then SURELY Docker upstream will have either finalized or superceded \"link\" support with something drop-in compatible or at least easily migratable given how many containers I would estimate have been deployed by now using it. As one option, you could import the same click-to-add elements from Port mappings or (even better) a similar dropdown scheme to Volumes, listing instead other linkable/running containers.\nHonestly, I feel outright hindered by Portainer's lack of support of --link functionality, and while I understand how (nearly three years ago) your stance of \"legacy and probably going away soon\" would prevent adding it, but after being a maintained, functional feature for so long I suspect it'll go our way. Moreso if most of the popular management toolkits exposed its features, perhaps.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_329-23issuecomment-2D414893006&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hsM0X4CbgRht5DacKjvP8tfI-J0-qwWV3H9KkhgZxyo&s=J-5f-fqH9aITNKmq703u47MvPJzow6vuuhEJmIz1ETc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlelhHb4-5FRc1jgGUw2wTfPR-5Ft-5FkZBks5uTMm0gaJpZM4KqcLG&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hsM0X4CbgRht5DacKjvP8tfI-J0-qwWV3H9KkhgZxyo&s=ywLQODkeyxm5UkjNvJ_N-HVX4Cfv57VFAhOQ0cLIpJM&e=.\n. Im ok to add \u2014link as you are right, it seems to be hanging around much longer than Docker led everyone to believe\nRgds,\nNeil Cresswell\nOn 22/08/2018, at 4:04 PM, daninfuchs notifications@github.com<mailto:notifications@github.com> wrote:\nHi there ncresswell, thanks for the reply.\nI've had some \"fun\" issues with DNS and container names, but that aside -\nHow does this implement environment variable sharing as per --link 'spec'?\nAlso, is this network going to respect routes pushed by OpenVPN, etc? Are its DNS requests handled by the Docker engine via local resolvers, or network stack? What about containers that require a macvlan network?\nAlso, assuming I really DO want to paint my car red, is there any harm in manually specifying --link at the command line (and making the point of a monolithic management stack secondary) or is there a known reason not to use it other than \"it's icky\"?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_329-23issuecomment-2D414903378&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vsWrZo1dbZbaGI6FO49yvnHptPjF8IL3RBFYwdGEI4E&s=E5WjpFgnwhTKvoxPwK3wK82Z4Uk9PYfFiq377tmx7Vo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXPHDD18CLNofiwf-2DxWwNX0sIsFXks5uTNhHgaJpZM4KqcLG&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vsWrZo1dbZbaGI6FO49yvnHptPjF8IL3RBFYwdGEI4E&s=MLyPxmoUPGyE-1AfMf5tml5wYuV9r6l9ICjKdTQORTE&e=.\n. This feature actually already exists in the product. You have the ability to commit a container as an image and then push the image to repo\nRgds,\nNeil Cresswell\nOn 7 Nov 2016, at 9:20 AM, Hong Phuc Nguyen notifications@github.com<mailto:notifications@github.com> wrote:\nHi,\nI so excited when found Portainer, it save me a lot of time when working with docker. Almost basic features of docker daily operation tasks are implemented, but I think we lack feature \"Commit container to image\", because when we need to change something of container in docker operation level, we need commit container to image and recreate it with new parameters.\nPortainer can help save much more time when implement this feature.\nLook forward to this new feature so much,\nMany thanks team and contributors for this great tool !\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_332&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=1aTr4MnJ1bjj_3G3mi92b4pe-7dU9MLg98TYZ5osyW0&s=oyvbZo4mpEMQVP_6tOH8nzJdI0Rk9as1u031HEb-Nuw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQLnJn-2Ddy2CxzDXMvpeHdizXBcb2ks5q7jZ7gaJpZM4KqqlT&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=1aTr4MnJ1bjj_3G3mi92b4pe-7dU9MLg98TYZ5osyW0&s=sylQ8PHAeGOCt2lFmqVIVJk1F6SbChpshDTcgqewfso&e=.\n. Did you try ticking the box next to each container you want to select?\nOnce you multi-select, you can perform concurrent actions.\n[cid:6946ABBE-BD6E-438F-805B-53974197254F]\nRgds,\nNeil Cresswell\nOn 12 Nov 2016, at 5:07 PM, saumilpatel notifications@github.com<mailto:notifications@github.com> wrote:\nOn a 50 node cluster we have, there are 350 stopped containers that we tried to remove and found that there was no way to select multiple consecutive containers. It would be nice to have more options for selecting multiple containers in general.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_344&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WqWPLPiVmdk9JMXw6n1CNfKYaM1SzBrywaSu7w7FTQ0&s=NmGKUss43jLkOG0NO1dFhsngEqi7Fk7OGW2Gw3fQGDA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldNTqd1VixYfqnn9K2MhngwoTIAeks5q9Tt2gaJpZM4KwUdT&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WqWPLPiVmdk9JMXw6n1CNfKYaM1SzBrywaSu7w7FTQ0&s=cj7rH45aA-b9-Em72C1iqcsp8gnDWDsSHJ-jFQNq62M&e=.\n. Gotcha.. Will add that to feature request list. Should be easy enough to add.\nRgds,\nNeil Cresswell\nOn 12 Nov 2016, at 5:38 PM, saumilpatel notifications@github.com<mailto:notifications@github.com> wrote:\nBut how do I select multiple containers without clicking in each box ? For example, to select say all container from the 5th to the 100th container, one way would be to hold the shift key and just select 5th and 100th container and all the containers between 5th and 100th would be selected.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_344-23issuecomment-2D260101438&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=_gaLd1ZxjAiWW5cLbIs8TCOLW_joIZFEnfuZMc29OGc&s=3JLduq_yq5yYzmU8Zw16xCdoYtWE775-NsKv1I7521k&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlV4PuJ7Jt6lqHOgMuYQiFIBkTuvcks5q9ULFgaJpZM4KwUdT&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=_gaLd1ZxjAiWW5cLbIs8TCOLW_joIZFEnfuZMc29OGc&s=50fI1XPT4B3kc3Dh7m0QrOpy9RlIHbu7LjK43Agno8w&e=.\n. For me, this doesnt work. The Name box always has a red border around it, and will not let me continue...\n. approved\n. Rejected. I am not comfortable with this feature. It exposes users to unexpected data loss should a volume be unattached but retained. Rather, I would prefer a filter that showed all dangling volumes, allowing the user to then select which volumes to delete. Even better, once we add \"multi-select\" with SHIFT keys (hold shift key whilst selecting the first and last sequential item) then that makes this filter scenario much safer.\n. Agree. Under the user management for each user (account settings); the user can add their own credentials for dockerhub (should we expand this to allow any per registry credentials to be ignored in favour of user specific)?. I think lets just add a clone function in next ver, and later, add a clone+customise function.. Not yet, but by February, yes...\nRgds,\nNeil Cresswell\nOn 29/12/2016, at 5:31 PM, ZigmunD notifications@github.com<mailto:notifications@github.com> wrote:\nHi there.\nIs there any way to add additional users?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_380-23issuecomment-2D269580614&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lxYVKHvk7y9zE7vfOjYE__K1OAKd2BY-KoQIc1wLQwY&s=Tv14NMZt8muVy5pYQsWlP72_SRntmDgLwzB6bYIKpwo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlV81tCe5MkiOZ55Wl1RCozx8tfu7ks5rMzeQgaJpZM4LIUAH&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lxYVKHvk7y9zE7vfOjYE__K1OAKd2BY-KoQIc1wLQwY&s=osLt7d6wnmX8HwzPtdGtUkTLx7268njZiJmAHTRSYbk&e=.\n. My preference is that \"select all\" only selects items visible on the page. Selecting objects on other pages is dangerous and a user that did not realise this was the behaviour might delete something unintended.. I would accept that as long as the options were very clear (not just a box that can be ticked with no header)\nSent from my iPad\nOn 14/12/2016, at 10:21 AM, Eugene notifications@github.com<mailto:notifications@github.com> wrote:\nIs this possible to have both options available: select all on page and select all ?\n-\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_382-23issuecomment-2D266865741&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nXkdUkGQUTy_1dd1zpY_wcrKdjewQiCnaLALGV3bEe0&s=Fjv238n2dtKZRc3YwZhQZNceDcskGhnJa4fAZ8_w3Ho&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlX08ixq0aToSEc44zkhcVKjG4yZhks5rHwxvgaJpZM4LJtJO&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nXkdUkGQUTy_1dd1zpY_wcrKdjewQiCnaLALGV3bEe0&s=JLIva1cweK5XuRXkgCbvAEa3oeLkUM9Zj1Pkvzp9uT4&e=.\n. Accepted. This works as i had envisaged.. Dont worry, i made the same mistake... and as \"the UX guy\", if i made the mistake, generally it means the UX is not optimised :-)\nRgds,\nNeil Cresswell\nOn 25/12/2016, at 9:28 AM, Thomas Bucher notifications@github.com<mailto:notifications@github.com> wrote:\nI see.\nThe Save changes button is not visible till i apply replicas / Scale.\nAnd when i checked the form, there was no button. Problem is, the button is way out of the window:\n[bildschirmfoto 2016-12-24 um 21 25 19]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_809416_21468677_bec7aa7a-2Dca1f-2D11e6-2D8973-2Daef99da22816.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N74OU4bdGMe63GHp8YA5z6gHc8SWdQpy1WmV2EZb3dQ&s=hWsvUbHFveahm4OC4g-zl4xcx0wE_qI_bmiZRGKYSmE&e=\nGot too many ports there :-D\nOk thank you anyway. I feel a bit dump about that.\nSorry.\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_397-23issuecomment-2D269099131&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N74OU4bdGMe63GHp8YA5z6gHc8SWdQpy1WmV2EZb3dQ&s=5PSkuIVBAEgSH6OszrgXNCj3KqVz-n7n-6jVHmR6pYE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlX-5FcoghVe3OapSan0nJXNRJL6dRxks5rLYB4gaJpZM4LQlFB&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N74OU4bdGMe63GHp8YA5z6gHc8SWdQpy1WmV2EZb3dQ&s=R3sKlgLmwVwXqsDPbOjeoENZqXRG0IMQugLlnSsFQcU&e=.\n. Hi there.\nThere is already an active request for this feature, which we agree with, so it will be added soon..\nRgds,\nNeil Cresswell\nOn 22/12/2016, at 3:00 PM, lavvy notifications@github.com<mailto:notifications@github.com> wrote:\nHello please could we have the ability to easily clone a container.\nit could just be a button that can pull out all the attribute of a certain desired container, then one can either change a little detail like the ports and then hit create.\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_405&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WHDkozf7UqOJLqfViJ9yUur674OzkbMWr0jeANU1jCc&s=Y3bImCbzW7qmaXFnIklJX3Xri1qA5Mm1PfFjcu_CJ5A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlRyZTvrrV2TfwhkO-2D3Q9uWBkKaL3ks5rKdmbgaJpZM4LTkMp&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WHDkozf7UqOJLqfViJ9yUur674OzkbMWr0jeANU1jCc&s=GmomjgcaBefVLeyrU1Mn67ynIqZ9CQb1M9TxTxhGe6E&e=.\n. Love it.. approved. Great work Glowbal..... We are implementing a full role based access control (RBAC) model, so authentication is now a core function/feature of Portainer.\nRgds,\nNeil Cresswell\nOn 28/12/2016, at 6:04 AM, Boris Fritscher notifications@github.com<mailto:notifications@github.com> wrote:\nUsing a reverse proxy to handle the authentication, there should be a way to use portainer without the new authentication.\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_419&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4YwwY35spVrOXOU2HjEiZAxEXjltiJZUip_5zIAjTQA&s=zSZbA0Lh5B1__zg1gkZjMGnxKgkOcCmIAHHEmQWCLgU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUYlBIJdrhwKwIa5Cv2nEpsW-2Dibzks5rMUT8gaJpZM4LWZKw&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4YwwY35spVrOXOU2HjEiZAxEXjltiJZUip_5zIAjTQA&s=xDhH9c-W28hO5ydks-Hvsa33ql37afDIbOgU1rOOxFk&e=.\n. Because we feel that authentication is critical to long term viability, and as we expand the product with support for active directory authentication, and multi-tenancy, authentication within the product is mandatory.\nI will, however, speak with Anthony to see if we can have a flag on the CLI that disables authentication (and every feature that relies upon it), but regardless, you can continue to run v1.10 without authentication.\nNeil\nRgds,\nNeil Cresswell\nOn 28/12/2016, at 8:33 AM, Boris Fritscher notifications@github.com<mailto:notifications@github.com> wrote:\nI get that, but why can't it also support a mode where default anonymous user is admin and has all rights? This way we could still use basic auth, or any other authentication system like mod_shibboleth, ...\n-\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_419-23issuecomment-2D269372058&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Wd517j6h9fhB3n1XHlEkfzNdt0g04oKnm_FGxq2sfgw&s=gUSq5GXsuxSuMeJD7b1ku3SvQQkVCgao6gjuub4LjMU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlewbN7xdlmoeIb5IJ-2DagHe0seK6hks5rMWgEgaJpZM4LWZKw&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Wd517j6h9fhB3n1XHlEkfzNdt0g04oKnm_FGxq2sfgw&s=stsYfVBL9DUY1_QmBQlspHovEKLwr3OZAScfBxtHM1c&e=.\n. Yes, got that. And Anthony has already confirmed that he could implement a --noauth flag on the CLI to disable authentication. We will look to offer this in a 1.11.1 or 1.11.2 release soon.\nN\nRgds,\nNeil Cresswell\nOn 28/12/2016, at 9:11 AM, Boris Fritscher notifications@github.com<mailto:notifications@github.com> wrote:\nThanks, I get that you have a vision for a large product, with swarm support and more advanced use cases. My use case coming from ui-for-docker, is to have a simple gui for a single instance local docker. ui-for-docker and portainer solved this very nicely up to now. I can understand that this use case does not fit your product roadmap, but it would be a shame to lose the initial no-setup gui feature for a local instance. Thanks for the great work!\nBest regards,\nBoris\n-\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_419-23issuecomment-2D269376491&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XtVnt9DuZXih5rqiS1tkotd-a_0N2zRRITwjn-1tjz4&s=aaH3ysgEpFcekoGo1A76VNTQrhQbXmebNGje4lE8ATs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlb2jnYJ0ZFhMFu4Z-2D-5F9YSWoRKI8uks5rMXDPgaJpZM4LWZKw&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XtVnt9DuZXih5rqiS1tkotd-a_0N2zRRITwjn-1tjz4&s=AzmXhPlQ-GviYbExms9bjoAvviC3-UIcvrJLiNarA6g&e=.\n. Yes, its in 1.12, which is scheduled for Feb/March\nRgds,\nNeil Cresswell\nOn 16/01/2017, at 3:55 PM, nasskach notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=H7xFfiUsNWVRjWSgWVThflncFSJqq9cHxXNAX-D0wIg&s=pZSIXgWZpnVW91QHj55wSlOuCII8MXl52F5qQ3tWLJw&e= Any milestone for the RBAC implementation ?\n-\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_419-23issuecomment-2D272804935&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=H7xFfiUsNWVRjWSgWVThflncFSJqq9cHxXNAX-D0wIg&s=Fxt-J0tJmXzi9SalqUVVUFSs3ddKVpnrXSIXoX7_wvc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlU8VegjKUGxx9gPNJSGkB-5FrtVgOMks5rSzBngaJpZM4LWZKw&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=H7xFfiUsNWVRjWSgWVThflncFSJqq9cHxXNAX-D0wIg&s=_u9tazCYi6K0jjUGyu7T2RWY9yeV5YqHPJK850fkyI8&e=.\n. --no-auth flag will exist in v1.12, which is not yet on dockerhub..\nSent from my iPad\nOn 23/02/2017, at 10:52 AM, Marco Ochse notifications@github.com<mailto:notifications@github.com> wrote:\nCan you please describe how to activate? I am assuming ...\nENTRYPOINT [\"/portainer\",\"--no-auth\"]\nCorrect?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_419-23issuecomment-2D281816273&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=z_27AJ2WCrKxVFsOYT2ptkLX8ucrAgx-eC0v2IIXa48&s=IHSVj0ZQvy2g5OwIYl7hN-qzAVXyeJ7wwGBStz_Sk9I&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlchhHtx51l3o1V7FgjjoE7cuzflxks5rfK4ngaJpZM4LWZKw&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=z_27AJ2WCrKxVFsOYT2ptkLX8ucrAgx-eC0v2IIXa48&s=EO1d2EoULJHcw19tlFi7ye65fibq7xbnXUPeWNwHh0s&e=.\n. Yes indeed. We will be updating the documentation with the new flags for release time\nRgds,\nNeil Cresswell\nOn 23/02/2017, at 10:58 AM, Marco Ochse notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eoKV23s0YY7h7ENY3BLJ5ni4gZvg3ZC2IakUr-oEDek&s=6Z_KkItIPJpc1hja4oklZFi8CYiArVTUWxGXPsokWLI&e= Thanks for the quick response! As soon as available would that be the correct way to set the flag?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_419-23issuecomment-2D281817744&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eoKV23s0YY7h7ENY3BLJ5ni4gZvg3ZC2IakUr-oEDek&s=oYql67xCX0S7UPyMdBMRDg5lt9AjhyzhN-3YeuX87Sw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaeFDEukO6X2D8jc5m3heDRpVYhsks5rfK-2DLgaJpZM4LWZKw&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eoKV23s0YY7h7ENY3BLJ5ni4gZvg3ZC2IakUr-oEDek&s=UbRSU8YpKGj88SjQCFUK1DY7CZNSiL9qdvIHvUgcI88&e=.\n. The icons are too close together... there needs to be much more space between push and pull icons. On a touch enabled device, this is currently unusable.. Works for me... i like it. . I dont understand the purpose/value of showing this image history. That said, i am not a developer. Anthony, can you please comment? The execution of the PR is accepted, but please validate we actually need this functionality added.. How about Image chain?\nRgds,\nNeil Cresswell\nOn 4/01/2017, at 12:00 AM, G?bor Kov?cs notifications@github.com<mailto:notifications@github.com> wrote:\nI can make the changes (rename section, skip/group empty layers, trim command) if you want.\nI chose the name \"Image history\" because its content is based on the \"docker history\" command. Please give it a better name!\n-\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_425-23issuecomment-2D270091373&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tcNHdbanIIdH1YOqqVzkig5R58Sm7KGZYuRXE7F1NvM&s=dIDORCGxCAdngRXfUtQ2uz9RkQIaWKnQuWkEtnrhdb8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlU-2DPZvH0lTKULJOiTDetXweaVX9Dks5rOio-2DgaJpZM4LXL1P&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tcNHdbanIIdH1YOqqVzkig5R58Sm7KGZYuRXE7F1NvM&s=dAi8Xfj_btYUjLmbb0M3T5sVxAXi3gaQqE-AVnyDAZI&e=.\n. I dont like this being called \"Image Layers\" because what we are actually showing is the composition of the Docker file (start from SCRATCH, ADD UBUNTU, Copy these files, expose these ports etc)... if image layers, then what i would expect to see is ImageID1 -> ImageID2 -> ImageID3 etc etc... no more detail than that.. works for me; simple and effective display of this policy.. This PR is for \"select all\" on the current page only; approved.. Is this feature limited to a specific Docker version? On our integration environment, which runs Docker 1.12.1, none of my containers are reporting a health status, so the entire column is blank. If this is only for a specific version of Docker, then we should only display the column for that version. Ok well in that case, i dont think the healthcheck column should be there by default; we need to either have it as an optional column, or detect and display.\nRgds,\nNeil Cresswell\nOn 1/02/2017, at 9:12 PM, Wouter Oet notifications@github.com<mailto:notifications@github.com> wrote:\nThis feature was introduced in docker 1.12. However your container needs to support it. E.g.:\nFROM nginx:alpine\nHEALTHCHECK CMD wget -sq http://localhost/https://urldefense.proofpoint.com/v2/url?u=http-3A__localhost_&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JLp4xQQf6NeujlC2Mq1j2EhOXBZXSbW8NZtvS5HNO90&s=ZxOSNMoycbSnDuDxd6r_he2OopVIFyyt1hkKoqWCQ4g&e= || exit 1\nA container based on this image will be 'starting' the first 30 seconds and then be 'healthy'.\n-\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_445-23issuecomment-2D276597146&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JLp4xQQf6NeujlC2Mq1j2EhOXBZXSbW8NZtvS5HNO90&s=1rX3NZuJTxjianWyeOf_n-EMtqQy6AQA5ci8dZS2l2A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcgB4-2D36gZooTwSj2v6BvchsCHWgks5rYD50gaJpZM4LYhrz&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JLp4xQQf6NeujlC2Mq1j2EhOXBZXSbW8NZtvS5HNO90&s=bHZ7YpcjRI-UtA4CLCsOD9ue2Y7mVbkNbHXjtsbxa4c&e=.\n. Agree. Go ahead\nRgds,\nNeil Cresswell\nOn 24/02/2017, at 9:25 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@WTFKr0https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_WTFKr0&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4XAFjw8z3vMSJNue_Gyov3A9K-44gk-6iPhUkap8vOk&s=FAMBNp8SkYahpLXznRmAhwpPZMNmNpP8ockEQEDZmEI&e= exactly what I had in mind.\nCC @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4XAFjw8z3vMSJNue_Gyov3A9K-44gk-6iPhUkap8vOk&s=urTPyGcuuTidHlgiDY8XJOIgcd5w3FNWl35wn5F6iMs&e= for feedback\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_445-23issuecomment-2D282232904&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4XAFjw8z3vMSJNue_Gyov3A9K-44gk-6iPhUkap8vOk&s=itSEkTvpFs2QuDtTDnKLKzgoleauzXZczPPxngt4kJA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSiELBtwBeWfVftUAKUfhacUn6wYks5rfpQCgaJpZM4LYhrz&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4XAFjw8z3vMSJNue_Gyov3A9K-44gk-6iPhUkap8vOk&s=utuRvrX4xTxgJqHtn8tMsRxcOs1Tup91KRW9EN9W7PU&e=.\n. for sure Option 2... agent, multi-swarm...\nSent from my iPad\nOn 26/11/2017, at 6:44 PM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nHey\nI think that we need to ask a few questions on that before choosing a solution\nDoes portainer goal is to manage multiple swarm cluster ?\nDo we want an agent or agentless solution ?\nI think about 3 solutions :\n1) Agentless / Multi swarm\nThis solution does'nt need user to deploy agent on each node, but have a configuration cost\nUser have to add all nodes endpoints in portainer, so portainer need access to all endpoints too\nOnce all endpoints are knowned by portainer, a new configuration can linked them so that portainer know cluster composition\nWhen user query container list on a node, portainer can query all cluster nodes to have a global view of those items\n2) Agent / Multi swarm\nThis solution is the more complicated but also the more powerfull\nThe goal is to deploy 2 services by targeted swarm cluster\nA global agent (socat type), that expose docker node docker in the overlay network to the second service\nA new developped service that is expose securely like docker port 2376\nThis new service listen to portainer requests, forward to the right node and send back response\nIn portainer, the only thing we have to add is then an endpoint to that last service\nI think it's like that UCP work, it expose a new unique secure endpoint that docker client can talk to\nWhen in an UCP env you do docker ps, you see all containers in swarm\n3) Agent / Unique swarm\nThis solution is a simpliest version of 2\nWe need to deploy a global service (socat type) in the same overlay network as portainer\nPortainer can now discover nodes and talk to them\nBut this requires running portainer in the same managed swarm cluster\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461-23issuecomment-2D347002726&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=l0z2d2tS_xs2Pa90GF97kw5veQ1VcjinBQ0VkljwhaU&s=fgzpQrT-nMw97KkOFqItJY2Ds3LuGhLdCtbqRoLeeqs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlc3IQGguKxX0sG8X0WMVrmMv0Dh8ks5s6U8SgaJpZM4LaiVL&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=l0z2d2tS_xs2Pa90GF97kw5veQ1VcjinBQ0VkljwhaU&s=7AAp9QPGSRLEbDEVQulE9-XLluSJjJ7dJyjfiaNBDUg&e=.\n. Absolutely, donations are used to fund features, so if you make a donation, nominate the feature you wish to sponsor and we will make it happen (once we have enough to cover the costs of development for that feature, or enough demand).\n200 euro would enable us to immediately commence work on this.\nNeil\nRgds,\nNeil Cresswell\nOn 30/11/2017, at 3:15 AM, Vladimir Krivosheev notifications@github.com<mailto:notifications@github.com> wrote:\nAny chance that this feature will be implemented? Maybe donation, say 200 euro, will make the dream closer?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461-23issuecomment-2D347982783&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=etUy2fn6q1ht-ekP20KHsqMDyjLY0TH73obDVIqw--8&s=nvMPCPxT_678se4qXJnp-xRret0WfwGGHW6Qedafoko&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlRAzmLiU4HeBKX8y4l0sYKvMWZ2Zks5s7btngaJpZM4LaiVL&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=etUy2fn6q1ht-ekP20KHsqMDyjLY0TH73obDVIqw--8&s=u3RG9YwpPM-uikBWq7B7ON5WXbyZd_KcTOuYCdA-zUA&e=.\n. Litecoin:LdhQvBCgjPny4Wn3XqVieeUzx3MPa7ixMW\nFirst time trying this :-)\nRgds,\nNeil Cresswell\nOn 25/01/2018, at 5:50 PM, Jason F. Grissom notifications@github.com<mailto:notifications@github.com> wrote:\nWow... has it been over a month since I looked at this!\nCan I send you a 1.5 LTC? If that works please provide a public address and I'll send it out.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461-23issuecomment-2D360360127&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=elNwWIo0r9x86YMJGiUE8KZZvS383zhl3r1P2l2sdnA&s=xTdUVTv5W7pLyfh_KiK4bGHwtAUmvzC2RI2nlhp6-ZM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlW3Zu5Ug6IvPqYrzpqVCto7XB7YVks5tOAf4gaJpZM4LaiVL&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=elNwWIo0r9x86YMJGiUE8KZZvS383zhl3r1P2l2sdnA&s=sUtWGiLUwvTi7AEhb3Y_t9hUjRSVgKBaDNQVTk-23uc&e=.\n. Excellent, thank you\nRgds,\nNeil Cresswell\nOn 27/01/2018, at 3:10 PM, Jason F. Grissom notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-mBOMcKJcWc9FWth14vlDZK5ppUY46y3AzMDi0BUgIA&s=8vrwxGQ9mpbicKy1R-tIvfK1IWwseahN4RGv2o6m8Rg&e= - I shot you guys 1.76943 LTC.\nHere is the transaction ID.\nhttps://live.blockcypher.com/ltc/tx/d6b249e78462b2bdf585290bf11be464853722a2e7d7a6383b6e9ecd21c55514/https://urldefense.proofpoint.com/v2/url?u=https-3A__live.blockcypher.com_ltc_tx_d6b249e78462b2bdf585290bf11be464853722a2e7d7a6383b6e9ecd21c55514_&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-mBOMcKJcWc9FWth14vlDZK5ppUY46y3AzMDi0BUgIA&s=r-mxAtX9aQNY3Utl1Y8AtiQaE2J5cOMoYA8rC9C2Wxw&e=\nThanks or all your hard work on this project!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461-23issuecomment-2D360951813&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-mBOMcKJcWc9FWth14vlDZK5ppUY46y3AzMDi0BUgIA&s=VFEguL_7RflraJsd9OrCCCHB55afXkkOqRgQKy4aRhk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlb6PBQxJ29iagSfYykxwpjDQ-2DHEuks5tOoWkgaJpZM4LaiVL&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-mBOMcKJcWc9FWth14vlDZK5ppUY46y3AzMDi0BUgIA&s=m6GXDbZlBcB_MRlgJAsmWXeNrZ-FoWpn25icN3ddoS4&e=.\n. Remember, we need to retain any non-persistent data volumes through this process... (ie un-named volumes).\nso, we first need to query for the volume ID, and then ensure its attached to the new container.\nSent from my iPad\nOn 3/05/2017, at 10:21 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nCan we do that by a button like Dupplicate/Recreate container\nThis action open the create container form, pre-filled with all values of the selected container\nThen we can change some parameters\n\nIf we change name, this recreate a new container\nIf we don't change the name, a confirm alert us we are going to replace existing container with new one\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_466-23issuecomment-2D298778255&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HSkjbrLXQJ8ajtTWHIdsocWecppeGPpqy5US6vbIV5U&s=DdiQH84ZeRyGUpzU81sRo-hyLDIy-sdNwaqkom1M-kw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlf-2Dzwkp2mT86oioDTd9eaR8WkEy1ks5r16x1gaJpZM4LbJGj&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HSkjbrLXQJ8ajtTWHIdsocWecppeGPpqy5US6vbIV5U&s=eXy_PdY_I8TiYQNmJutkYNwFvqU7Uh5P2GFzye8W4Yw&e=.\n. Yes, but if a user has spun up a container and not attached a persistent volume, then the update/recreate container function \"could\" cause data loss if the user was not aware of the need for a persistent volume.\nI wont allow Portainer to put users data at risk for the sake of simplicity.\nRgds,\nNeil Cresswell\nOn 3/05/2017, at 11:22 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tDFrg5HSiCbs35GqxpWLEpB5btMRppxZPqAE2DiYIjY&s=okoeCqDQJB5L3crDqvhbvFwm58XlZfz9hvcaCEQkOjI&e=\nI don't think we have to take care of that\nWhen user manually remove container and recreate it, a new non persistent volume is created (if not named)\nAnd in swarm mode, when you update a service, the same things happen\nHonestly, I don't know how to attach a newly created container to a old non-persistent volume from command line\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_466-23issuecomment-2D298788255&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tDFrg5HSiCbs35GqxpWLEpB5btMRppxZPqAE2DiYIjY&s=PCDajpimibPceR6W3SHzpHstt80VLAIr-5WcLWTbgvQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfOSp4k58pVGWqA3j9y3bvXUaFGuks5r17qGgaJpZM4LbJGj&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tDFrg5HSiCbs35GqxpWLEpB5btMRppxZPqAE2DiYIjY&s=tHfID6JN7cXjnsLzkCEIt3WOKLU9PU24bjqHpMFZFYc&e=.\n. Then we need to get the name and mount it. Or we need to persist the data some way prior...\nUnless we can ensure no data loss, i dont want any automated delete/recreate function introduced\nRgds,\nNeil Cresswell\nOn 3/05/2017, at 11:37 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nI see\nWe can remove old container without -v option (or with a confirm like in remove action)\nBut I think it's complicated (impossible) to recreate a container with the same non-persistent (anonymous) volume\nThe only thing we can do for total transparency I think is get the path of the old volume (in /var/lib/docker/volumes) and mount it as a bind (named) volume in new container\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_466-23issuecomment-2D298790728&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ad3Ci2Zp6uIqSPmxq3vLzf_yJQBLNPvD1XJdJrd_r6Y&s=2pNqW6mZUpOZN0PMs9mTsWVEDXqNu0d91v9wtnisAw8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlddyAahUzffhOpcbVhDPe-5FROnTRvks5r174-5FgaJpZM4LbJGj&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ad3Ci2Zp6uIqSPmxq3vLzf_yJQBLNPvD1XJdJrd_r6Y&s=njv-m5qpGv_AxeS4SmmeZfXQnyAh2goMWCo1j_AOdKU&e=.\n. Makes sense to me to add this.\nRgds,\nNeil Cresswell\nOn 5/01/2017, at 9:32 PM, Jonathan DEKHTIAR notifications@github.com<mailto:notifications@github.com> wrote:\nHello dear friends,\nI use portainer behind a corporate proxy which is mandatory to access any outside resource.\nThus, portainer is unable to access necessary json file to use App Templates. I can of course host this file locally to fix the problem, but I tend to believe it might not be super hard to add proxy support in one or two requests.\nI don't know if proxy could be useful for \"endpoint\" usage, it's not my usecase. I only use internal servers.\nI drop you here a little screenshot of my container logs produced by the missing proxy configuration :\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_10923599_21673550_c7bf1902-2Dd329-2D11e6-2D9dec-2D8328fba157c3.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=orw_0jsWUyo2NwweSLUs0z4zvvyIYiKXCyQyzsRCNq4&s=8k-Yfv62UdNIvqfHQRTQfyI7Df-5Y-TrseJi_1CKx0Y&e=\nThanks a lot for the help dear friends!\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_469&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=orw_0jsWUyo2NwweSLUs0z4zvvyIYiKXCyQyzsRCNq4&s=F_Qu7bvpsJcW9ADbvtv63Xq6uTpmw9vVFuuWQVL4Py4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldq616nm9J63HgkGsBGq67Nx02Jiks5rPKqRgaJpZM4LbdDZ&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=orw_0jsWUyo2NwweSLUs0z4zvvyIYiKXCyQyzsRCNq4&s=0U1A8LAS9uycTxb8LmfZBvQ2dWmxNTaE0QzrqGwANqE&e=.\n. Covers the requirements exactly... however i dont think we should allow the addition of any endpoints manually when the --external-endpoints flag is used.\nRgds,\nNeil Cresswell\nOn 9/01/2017, at 10:05 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nWe need to add the ability to define endpoints from an external definition source (JSON defintion that could be retrieved via an API or an hosted JSON file).\nPortainer should be able to retrieve the list of endpoints defined in that datasource available via a GET request. By introducing a flag --external-endpoints http://myhost.mydomain.com/portainer_endpoints for example.\nPortainer should create the endpoints when started and also keep polling the datasource to update the endpoints accordingly. The polling time should default to 60s but should be configurable (another CLI flag like --external-polling).\nThis implies that when the file get updated, the changes should be reflected poll_time later in Portainer. Any new entry in the datasource should be added, any removed entry should be removed from Portainer and any updated entry should be updated. In order to do that, we need to be able to distinguish the endpoints defined via that external datasource from the endpoints defined inside Portainer (either via the endpoints view or via CLI).\nEndpoints defined by the user either via the UI or the CLI will be called user-defined and those defined by the external datasource will be called external. Only the external endpoints should be managed automatically in the background by Portainer (e.g. don't remove a user-defined endpoint because it's not in the external datasource).\nAlso, external endpoints edition should not be allowed as it would be overwritten after poll_time by Portainer in the background.\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_484&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VPcYfRwgnvK8qLyFt8k47_uCHZkI8V1DsSQmMjHF7hg&s=IZVLhlMgu3n__o9djQDUnJ_mfz_GqiY__JXN-h6VW_U&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWlyKxo8lF1SXjYum2MhxWaOCZ7Zks5rQfhNgaJpZM4LeDKL&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VPcYfRwgnvK8qLyFt8k47_uCHZkI8V1DsSQmMjHF7hg&s=ZZViKShqKW_MQPAw-m_ly4Uw4JUIGEWu2nF3jejl47E&e=.\n. This will be addressed as part of Role Based Access Control, which we are aiming for in v1.12.\nRgds,\nNeil Cresswell\nOn 10/01/2017, at 8:08 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nWe did not plan any configuration file support at the moment. We might think of an evolution on that side later on and give the ability to specify all the CLI flags inside a configuration file.\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=p3tsxOVW3KOYoViRRjkwknrXQ2jUTqG84nuMEeRMlIs&s=8usbOW0pfBuozXQ-wDWPAnYCWqKUbPdgUHXmxpQDCHQ&e= what do you think on that one?\n-\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_487-23issuecomment-2D271377192&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=p3tsxOVW3KOYoViRRjkwknrXQ2jUTqG84nuMEeRMlIs&s=P69XNIY4ZG_jl4p8tXmQzUV1bHNRv1NPoYp9mWGYrm8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlev2HGs6C8yf72euI9VkyxmgjDA0ks5rQoW0gaJpZM4LeiIc&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=p3tsxOVW3KOYoViRRjkwknrXQ2jUTqG84nuMEeRMlIs&s=NWWenq43Yn4y7eOc6z2hUx4Y0fC0s6dWEmHSG9xgHac&e=.\n. We already allow you to hide containers on the CLI when starting portainer; the reason why portainer is not hidden by default is because many people actually update portainer from within portainer..\nRgds,\nNeil Cresswell\nOn 11/01/2017, at 9:48 AM, waspinator notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nRunning portainer with a local endpoint, I see the image, container, and volume of portainer in the UI.\nSteps to reproduce the issue:\n\nRun portainer with a local endpoint\nlook at list of images, containers, or volumes in the UI\n\nI think it would make sense to hide local portainer related assets by default from the UI, since modifying them could break the system.\nTechnical details:\n\nPortainer version: 1.11.1\n\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_491&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=aIc7X28JlXNOLz1JuV_Zup0wOhtsNODmKuQbKKHspdk&s=TdhQBfMbk-K4OPfnRN6Niwu5r5qFTcC1AJz5rismU5U&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTnGmECHb-2DJzt-5F-2DmymKOgb390FXvks5rQ-2D57gaJpZM4Lf4HW&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=aIc7X28JlXNOLz1JuV_Zup0wOhtsNODmKuQbKKHspdk&s=q9sqxmrTX7nqVysp36Y73752kdMAUXTozktOFgY6wdE&e=.\n. Wow will investigate and fix asap.\nRgds,\nNeil Cresswell\nOn 12/01/2017, at 10:14 AM, Marcin Wielgus notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nIt seems to be possible to reset\nadmin password after it has been set.\nSteps to reproduce the issue:\n\nRun portainer\nPOST to /api/users/admin/init with json [password: mypassword]\nlogin with this password\nPOST to /api/users/admin/init with json [password: myotherpassword] without Authorization header\nLogin with mypassword is impossible\nLogin with myotherpassword is possible\n\nI think after first init second should require Authorization header at least.\nGroovy script to reproduce in BUG.txt file.\nTechnical details:\n\nPortainer version: 1.11.1\nPortainer Docker image tag (latest/arm/windows...): latest\nTarget Docker version (the host/cluster you manage): 1.13.0-rc5\nTarget Swarm version (if applicable): swarm mode 1.13.0-rc5\n\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_493&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eNEcfgHad8SOphMqQKasMHVZms8VomisaCanPueRO3U&s=1oSTV8t3qbhm8lRN6NSDJc5vpk29PT-8a85S9quBhWo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlabWDRfCoaclQxAfQf3WkYk-5FnVX2ks5rRUYhgaJpZM4LhEzM&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eNEcfgHad8SOphMqQKasMHVZms8VomisaCanPueRO3U&s=tRg2424IESpg8DNqNbHBM99RY6IfIElxFJRZwo2eSK8&e=.\n. Agree, dont see the value\nRgds,\nNeil Cresswell\nOn 17/05/2018, at 9:47 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nAgree, not sure that this is still useful. IMO the latest version of the template image should always be fetched when deploying a template.\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LAscjohuYqCQzfDPAfXMzturl2973m_0KZ_d0z6vbSs&s=EV36n1v4WyqZfbUzCZopHCw_ZVmPE1aBihbbAaWjidI&e= thoughts?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_496-23issuecomment-2D389810162&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LAscjohuYqCQzfDPAfXMzturl2973m_0KZ_d0z6vbSs&s=ijl2zh5mv7te2MD4G1rmcJNAVfqWe4suNZwPtBn4Ucw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlRKMRTv-2DdYjmcfQjQcKai6r9x-2DoFks5tzUc3gaJpZM4LipEE&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LAscjohuYqCQzfDPAfXMzturl2973m_0KZ_d0z6vbSs&s=SzZXvlEinDkgfHQZV9H4iX4f5-wSh6hZHyU_K9rbs5Q&e=.\n. I like the idea, and think we should add it to 1.13 release plan.\nRgds,\nNeil Cresswell\nOn 21/01/2017, at 8:36 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI do like the feature and I'll try to think about it. It's flagged as discuss now so we can try to figure out what we want to introduce in Portainer.\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=56gFxWNoNDrdSUa5TZ-0nCeP7-YRUUgcsSmQHxmhfXM&s=eAP_4QSQQzt_qx-54GnKFAZaQ6c4RBI0eabPyqYXUdQ&e= what are your thoughts about this one?\n-\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_506-23issuecomment-2D274222618&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=56gFxWNoNDrdSUa5TZ-0nCeP7-YRUUgcsSmQHxmhfXM&s=bh72Xe1JUAN0wMiT8aBxDhc6ywSXSsuk8M7txoaeQmM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlW8bfH-5FZnjSvITHUHAP1DUF8lkzZks5rUWEUgaJpZM4Lmb0Z&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=56gFxWNoNDrdSUa5TZ-0nCeP7-YRUUgcsSmQHxmhfXM&s=dT-2L3laSu6vxH1zaOk1JZQKe9iePrvwq3pUhK4kEzI&e=.\n. this feature already exists. you can configure the initial endpoint  from the CLI when starting the portainer instance.\nSent from my iPad\nOn 19/01/2017, at 11:30 AM, Ian notifications@github.com<mailto:notifications@github.com> wrote:\n[Feature Request] CLI option to set initial (local/remote) Docker endpoint\nThe goal for my use-case is to have a completely pre-configured user-experience for this out of the box.\nThanks,\nIan\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_510&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=1L2i697VNvyrCaBRmM1KJub-uQZgD-uOyuIepY_qWyM&s=VRmmF5oeK6jr3Mp28fXBrT0tlirL6p1ZDt_kzvPkA9A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYSlND5NXRiV-2Dbz4Pfs2EYJ7Nf0oks5rTubNgaJpZM4LnsTz&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=1L2i697VNvyrCaBRmM1KJub-uQZgD-uOyuIepY_qWyM&s=eS73T0e0zEuzQ64LpvR-1vm3xWDs2mIy-eEG1DDzVkU&e=.\n. We will focus on adding support for an external DB within the next release cycle, so within the next 90 days.\nFrom: Olivier Cuypers [mailto:notifications@github.com]\nSent: Thursday, 5 July 2018 9:29 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] Running Portainer as a Swarm Service allows only one container (#523)\nOk, good to know the agents are aware of which node they are running on. I wasn't sure about this.\nI would have kept the manager constraint to avoid useless extra request between agent. But ok.\nThe main point was the implementation of the possibility to connect an external database for persistence. And from your answers I guess this is not part of your main priorities for now.\nSorry for having pushed so hard for this but to me this is the last stopper to use it on a professional environment.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_523-23issuecomment-2D402561722&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3pOsfrCh-YwD4dvIL95P_T2haH3vVq3Bb_eEUhgPIIE&s=mhNyeILYOEmXAbvIqtM1_2891o5-RZ75DnemYZ3KqVk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld77Tm73Vpx7xcP07ToncWX-5Fy2jHks5uDTORgaJpZM4LqBJJ&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3pOsfrCh-YwD4dvIL95P_T2haH3vVq3Bb_eEUhgPIIE&s=Ex-RExCql82kkej1YfLC71EHVCC0pABqgZj_xnCjsHo&e=.\n. Yeah, when using Swarm mode, we assume that persistent volumes are cluster-wide (eg nfs)\u2026 if the volumes are local only to the host, then constraints should be used to pin portainer to the host that containers the volume.\nI agree we should update the stack file with the constraint.\nFrom: Ryan notifications@github.com\nSent: Monday, 10 December 2018 7:24 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] Running Portainer as a Swarm Service allows only one container (#523)\nSo for swarm and services in general, you really need --admin-password-file or --admin-password.\n\nI think there is a substantial security risk with the standard portainer swarm setup docs.\nWhen it's run with a single replica in a swarm you don't really have any control over which node it runs on (without adding constraints). Which means you don't control whether it keeps it's volume or not. Which means you don't control whether a user is compelled to enter a valid admin password, or whether they will be asked to enter a new one in order to gain full admin access to a cluster.\nIt also means you can't reliably cycle passwords without running portainer on every node if your cluster and updating it. Or stopping the service and pruning the volume manually on every node.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_523-23issuecomment-2D445701100&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vdWAfDZtkyvq4BdFwR9eF7szwhJErtXrIhmA_2qxWQ4&s=9qCvWNGtMi-vsCV-klv4tW47QmqfgAak_9nl9Q8hbQc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfLKCivs7aNMfy8d1vFyT6vWBF9yks5u3f3zgaJpZM4LqBJJ&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vdWAfDZtkyvq4BdFwR9eF7szwhJErtXrIhmA_2qxWQ4&s=atzTxqwUJnDggy_62jhfTwnFPbFcYWR4WOAyVUea8VM&e=.\n. No, its not.. slipped out of 1.20 and will be in 1.21.\nFrom: Olivier Cuypers notifications@github.com\nSent: Thursday, 3 January 2019 5:56 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] Running Portainer as a Swarm Service allows only one container (#523)\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bSxwgQlTtq3Yqkc_sQlme6kIDZjj88L0l5dEIPyjhMw&s=3IdrV6nEUKXH2O_bLBFphVYR4HBcUB6_eDTAQaGTV2U&e= I see the support for external database is part of the 1.20 Roadmaphttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_projects_2&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bSxwgQlTtq3Yqkc_sQlme6kIDZjj88L0l5dEIPyjhMw&s=cVZPHDWDtPJur3T2pQWTI6I60sQo2t4uQOg1cofxlbE&e=.\nIs it already implemented ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_523-23issuecomment-2D450919115&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bSxwgQlTtq3Yqkc_sQlme6kIDZjj88L0l5dEIPyjhMw&s=n4K7EGA0IQIdH5nCm05XquQKSRDY0IsXxqMJ5FjcVks&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlf0teFJb-2DiJ-5FgNtMSB2hCif7L3KHks5u-5FOSsgaJpZM4LqBJJ&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bSxwgQlTtq3Yqkc_sQlme6kIDZjj88L0l5dEIPyjhMw&s=GXRiEO79kxdbaZFx6i1K_aDxx--Y-Bb6HsDx4REYe-c&e=.\n. I dont think we should add this in the list. The ID is shown if the container name is clicked.\nRgds,\nNeil Cresswell\nOn 23/01/2017, at 11:01 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=zry_pGdlexkQnmqC9iTZU6CyuzPib2TCDpMzByztN60&s=f9fIx9nBJUw6ZXWN499SkHI2oUtxaIhJA3fon3joCeM&e= what's your thoughts on this one?\n-\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_528-23issuecomment-2D274395616&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=zry_pGdlexkQnmqC9iTZU6CyuzPib2TCDpMzByztN60&s=DbiJmWfeE4NsfQLi1tIhm_p2jDUl3aq_AYwBAQiJZqg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldAmOqguTXrlGHfYqr6XZv8QGquEks5rVCYigaJpZM4LqVNB&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=zry_pGdlexkQnmqC9iTZU6CyuzPib2TCDpMzByztN60&s=Itri5ZdGEeqEHWYf2EoFl8N-xo2PyNnoiWp7Eu6YAu0&e=.\n. All i see is a black background with all text in white. i dont see any colours. Is there something i need to do to enable (or see) colours. Yup, all good. Anthony, you can accept.\nRgds,\nNeil Cresswell\nOn 3/02/2017, at 10:22 PM, Niklas notifications@github.com<mailto:notifications@github.com> wrote:\nAny updates on this?\nWould love to see this supported.\nThanks.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_533-23issuecomment-2D277201294&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BjEFDfbx_Hrhnvrdi5VHBJ8BbamA58YWErfnX2PkC5M&s=P-L4lDVwVTQvU68ZB-_hi-YDVIsGTRg6JrjD2-frmh8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbrlkeCPG34jlDhmcbjlRjFMrewDks5rYvHWgaJpZM4Lq4KN&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BjEFDfbx_Hrhnvrdi5VHBJ8BbamA58YWErfnX2PkC5M&s=N_R_ESkTdKHdxquxw8ZoNxwCQhGCQO2AVLH8PupTiX4&e=.\n. Makes sense to me...\nJust copy and paste a list into a large text box.\nRgds,\nNeil Cresswell\nOn 27/01/2017, at 8:51 AM, Matt Smith notifications@github.com<mailto:notifications@github.com> wrote:\nWhile that could work, I feel that's over engineered.\nIm just looking to be able to write in a text box the following and have it parsed to the environment.\n'''\nFOO=bar\nENV=Dev\n'''\nThis was I don't have to manually go through and add each item.\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_546-23issuecomment-2D275569830&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=U1dogw5u4pRG9pxbTlsNYRbPC16fgE6Vi92tajK96Sw&s=RKuUd2wguJMY8ej4dBJYbctxl8lyXOm3_CKWG9ukFB8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWQTDZ-2DWrYde46UC3sEGuw-2DRPoLOks5rWU2agaJpZM4LvQkb&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=U1dogw5u4pRG9pxbTlsNYRbPC16fgE6Vi92tajK96Sw&s=DOa0uPxTkQtUM5ejDrjlzTKCEIasJdi0cRPYxlACp2s&e=.\n. Rather than a checkbox to enable containers view, and being checked by default; the checkbox should be \"disable container view\" and it unchecked by default.\nRgds,\nNeil Cresswell\nOn 30/01/2017, at 7:49 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nThe containers view has no real point when managing a swarm mode enabled endpoint. An advanced options similar to the templates advanced options should be added with a checkbox to enable the containers view (active by default).\n-\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_549&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Qkjpur0oXg_jlcEU22a5PsE_BPCfhqTiRPpE2JpQHzY&s=dX0q45dhrN2rG5f9Gv2PIWWh9o6BynmsNtu1AZefyAQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSnW9ZPLK8sYJkgjMA2GYB58WuGkks5rXYgMgaJpZM4LxF23&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Qkjpur0oXg_jlcEU22a5PsE_BPCfhqTiRPpE2JpQHzY&s=aulL8-u91qWbgYEwGFDDpN1UreNcrRZCkralDsn5gWQ&e=.\n. AD integration is planned for later in the year. However this will be a plugin and not part of the core product.\nRgds,\nNeil Cresswell\nOn 17/03/2017, at 6:39 AM, Leo Dano notifications@github.com<mailto:notifications@github.com> wrote:\nHow about Active Directory integration?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D287135334&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=8S8pjR3ptHg4jHLyvo2gJTWG3v8CNNvnBRyYz4qT37Y&s=SXObopFeWWdIoZd1cxgJM_D9TNjarWk7GNTjdcSGUxI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVHNApGel2XIRsinQHhUCIkMRoC1ks5rmXPPgaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=8S8pjR3ptHg4jHLyvo2gJTWG3v8CNNvnBRyYz4qT37Y&s=RzJtAiU3MpG_kwE73UJwKSPSBk1FHXSFhtbNQuJpJkM&e=.\n. It will be available either as a paid plugin with no support, or included for those with an enterprise support contract.\nAny feature specifically geared towards enterprises will be part of a paid support bundle.\nRgds,\nNeil Cresswell\nOn 17/03/2017, at 9:07 AM, Leo Dano notifications@github.com<mailto:notifications@github.com> wrote:\nWhen you say plug-in, is it still free to use? Support I am thinking will be limited to a forum of some sort.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D287175817&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Nxh9cFoddAx8vMUx0srz7TKuxW2MG76UtU4aRuKIebQ&s=l4czW3j_PBKQSkwjWz35JLkubHzFiNo2-si1YOB0j8k&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlf7wMEm2S85gXRGtjxByj3S-5FGjS9ks5rmZZsgaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Nxh9cFoddAx8vMUx0srz7TKuxW2MG76UtU4aRuKIebQ&s=He7kzAKK9kjeoN5DxRKtukfa5ZGir71v1C3mrOsIzoI&e=.\n. take a look at www.portainer.iohttp://www.portainer.io\nits per company (domain)\nSent from my iPad\nOn 17/03/2017, at 10:41 AM, Leo Dano notifications@github.com<mailto:notifications@github.com> wrote:\nGot it. Thanks for the replies. Nice product. Pretty much a Docker Datacenter without ldap for now. Any ideas on the enterprise support pricing? Per node? Per domain?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D287199765&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wibUhAPiHcEq0VAy8S6eBol-mrqrzefnXbh29fHoZmo&s=SFSswh4XesXYPyprLvyMhmzA6dTgQwwvkmY7RYTLsRo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldyn0VqliXhdSFEJFgljKPIFJkWoks5rmayCgaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wibUhAPiHcEq0VAy8S6eBol-mrqrzefnXbh29fHoZmo&s=iWmgjcAED1xLH9JfNNIgZK2RdlTWuZLCyKb6TfHMJwM&e=.\n. We will be adding private registry management, and support for secured registries in q2. At the moment u need to use open registries secured with firewall acl's.\nRgds,\nNeil Cresswell\nOn 28/03/2017, at 10:39 AM, Leo Dano notifications@github.com<mailto:notifications@github.com> wrote:\nHi Neil,\nThanks for the pricing list. Also, what about a Registry? Image signing on that same note\nThanks,\nLeo Dano\nFrom: Neil Cresswell [mailto:notifications@github.com]\nSent: Thursday, March 16, 2017 3:02 PM\nTo: portainer/portainer portainer@noreply.github.com<mailto:portainer@noreply.github.com>\nCc: Leo Dano ldano@qualcomm.com<mailto:ldano@qualcomm.com>; Comment comment@noreply.github.com<mailto:comment@noreply.github.com>\nSubject: Re: [portainer/portainer] User Access Control (#550)\ntake a look at www.portainer.iohttp://www.portainer.iohttp://www.portainer.io<http://www.portainer.io%3chttp:/www.portainer.io>\nits per company (domain)\nSent from my iPad\nOn 17/03/2017, at 10:41 AM, Leo Dano notifications@github.com<mailto:notifications@github.comnotifications@github.com<mailto:notifications@github.com%3cmailto:notifications@github.com<mailto:notifications@github.com>>> wrote:\nGot it. Thanks for the replies. Nice product. Pretty much a Docker Datacenter without ldap for now. Any ideas on the enterprise support pricing? Per node? Per domain?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D287199765&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wibUhAPiHcEq0VAy8S6eBol-mrqrzefnXbh29fHoZmo&s=SFSswh4XesXYPyprLvyMhmzA6dTgQwwvkmY7RYTLsRo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldyn0VqliXhdSFEJFgljKPIFJkWoks5rmayCgaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wibUhAPiHcEq0VAy8S6eBol-mrqrzefnXbh29fHoZmo&s=iWmgjcAED1xLH9JfNNIgZK2RdlTWuZLCyKb6TfHMJwM&e=.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-287204659, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdmEWTXf_iONFE8vY55fVY7MvwhbFks5rmbF0gaJpZM4LxGUk.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D289594351&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pwBkHvrNv6nU_JC_C5Hpp9e5caXDXZy4u2ZYSpa5JqE&s=E7ikMQSXobVf6HE-Fb4W0-5Jjg7M-IHuabTC5HEhrug&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld0j9h4or4xaRnIp0r2QOtBfM9Ffks5rqCyOgaJpZM4LxGUk&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pwBkHvrNv6nU_JC_C5Hpp9e5caXDXZy4u2ZYSpa5JqE&s=sf-MEXDA0DWdKVCuUdzfFHhRWwkSpTK9WAVXwU1YBns&e=.\n. Not in Austin... however will try for Europe...\nRgds,\nNeil Cresswell\nOn 6/04/2017, at 5:37 AM, Leo Dano notifications@github.com<mailto:notifications@github.com> wrote:\nHi Neil,\nWill you be at Dockercon 2017?\nLeo\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D291938538&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=a2SkEAVYgX36nrdSwZ03ej_2AVVuGpEXAKNBeuRcp9Q&s=fqKwfj3AWqBmtU5_aiFlXaE23cOD95Mki2DP-Xxb9-U&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfcEeuTg149g0D3AYSw3u70pZig0ks5rs9FugaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=a2SkEAVYgX36nrdSwZ03ej_2AVVuGpEXAKNBeuRcp9Q&s=FzppCzQ1k3mynBagi125d5kHZBP99f6rq6sVPQ7bkhU&e=.\n. Sure, or just join our slack channel and we can DM\nRgds,\nNeil Cresswell\nOn 6/04/2017, at 7:58 AM, Leo Dano notifications@github.com<mailto:notifications@github.com> wrote:\nI got stuck on trying to set this up on my environment. Can we email each other?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D291979099&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=otrmsN4-xJ_g5TqH46IOnWUttqOoYW5-qYX8COhCzEI&s=mqo47tNPi5YwT5icOoWry3XYFBVVJBOSWanp0mv_Hdg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVnY-5FqfogaPfdytFhB3c9m48-2Dfixks5rs-5FJXgaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=otrmsN4-xJ_g5TqH46IOnWUttqOoYW5-qYX8COhCzEI&s=GSF8gJTU8RNFXhdi4vQx-Fe_UgxyT3hR3ifuzN65IDo&e=.\n. Portainer.slack.comhttp://Portainer.slack.com\nRgds,\nNeil Cresswell\nOn 7/04/2017, at 3:23 AM, Leo Dano notifications@github.com<mailto:notifications@github.com> wrote:\nHow and where do I join your Slack Channel? A link maybe?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D292209067&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pgspxQQjHwOCk7bASj8tIHIDA3cR7HCa5wDm25dysBc&s=ckYcOpTgFQYPKCCbm_CHjwhBM8-tUr30Wl_SblW8qhA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSxgEwNYfpaoknGPdiJu7sDjMA4Oks5rtQNygaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pgspxQQjHwOCk7bASj8tIHIDA3cR7HCa5wDm25dysBc&s=cRPHTsmQ31X6YP_bDM6q4v4ihFd9bHBpLTH9V1vM_M4&e=.\n. I just sent you an invite to our slack..\nRgds,\nNeil Cresswell\nOn 7/04/2017, at 5:29 AM, Leo Dano notifications@github.com<mailto:notifications@github.com> wrote:\nYes, I already joined. Not sure where  to go from there. It\u2019s like my own communication page with no one to communicate with.\nThanks,\nLeo Dano\nFrom: Anthony Lapenna [mailto:notifications@github.com]\nSent: Thursday, April 06, 2017 10:25 AM\nTo: portainer/portainer portainer@noreply.github.com<mailto:portainer@noreply.github.com>\nCc: Leo Dano ldano@qualcomm.com<mailto:ldano@qualcomm.com>; Mention mention@noreply.github.com<mailto:mention@noreply.github.com>\nSubject: Re: [portainer/portainer] User Access Control (#550)\n@ldanohttps://github.com/ldano you can use the following link to join our Slack: http://portainer.io/slack/\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-292246626, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdhL5LkFfNr7x5fU_S8lti9Pu0mM6ks5rtR_sgaJpZM4LxGUk.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D292248164&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gZuS5uRBAc1TAS9CogXfLmQTmly3V87LcQ2zTKZ3L7c&s=Lr1JRIr3M01x9mZIj-N_6htFN83vYw_69_iGEjjdJIM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcbjjIdNaUUO-2DYbH9vUtFNiw2FYhks5rtSD4gaJpZM4LxGUk&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gZuS5uRBAc1TAS9CogXfLmQTmly3V87LcQ2zTKZ3L7c&s=lRWS69orKQo2NxObGQMbvC-lXrNU5UEzqVtsePxa-rc&e=.\n. Maybe have the \"expose ports\" prepopulated with all the ports the DockerFile wants to expose, giving the user the instant visibility and ability to set the corresponding external port?\nRgds,\nNeil Cresswell\nOn 4/02/2017, at 9:58 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@xInsertxhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_xInsertx&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iG29eSxZFMyMY7Co8p3ArwKoAgNBVU2uJJA26fYgBA4&s=d_rwTabtyoNbqcKS04dnoz-n7A4N4MzOTrZlUL6OSJ4&e= would you like the equivalent of docker run -P ?\n@lavvyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_lavvy&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iG29eSxZFMyMY7Co8p3ArwKoAgNBVU2uJJA26fYgBA4&s=bEzrbjU-h778XXYhCNo08AGShbDxw2vRZz5lhd7PDuQ&e= I'm not sure I understand what you want.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_558-23issuecomment-2D277360602&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iG29eSxZFMyMY7Co8p3ArwKoAgNBVU2uJJA26fYgBA4&s=2EY7hlnhTDK8ogtpYJsS414SFWxF6mdDzw6tem0yXmE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleUbED-5FhRGU0gKidmbdSv9J5Wxwtks5rY5T4gaJpZM4L2bd1&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iG29eSxZFMyMY7Co8p3ArwKoAgNBVU2uJJA26fYgBA4&s=Wotx3vLyKOOYegRyVlRhzpAp4gilOV9i30t0hnGug4w&e=.\n. Ah, then -P will do that, so we just need add that function\nRgds,\nNeil Cresswell\nOn 4/02/2017, at 4:01 PM, xInsertx notifications@github.com<mailto:notifications@github.com> wrote:\nI think Neil's idea is a good idea, but should be treated separately. It would be helpful to pre-populate so users automatically know what ports were exposed.\nShipyard has a button that allows you to automatically assign all exported ports to an unused port from 49153-65535. This means if I start 3 of the same containers with this selected it automaticly maps all exported ports to new ports via this range.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_558-23issuecomment-2D277413780&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Z7w-dsqt6EcerIQGQgkuy1gCIHXwYo2-M7zbeyDWq4k&s=3JpfnU4WyOEKjaqEgW2k0WMdw_Vx_8qiB-mX2rfx-xA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlW2CSbnqjippYAC9SglMx0PI-2Dw1-5Fks5rY-2DnwgaJpZM4L2bd1&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Z7w-dsqt6EcerIQGQgkuy1gCIHXwYo2-M7zbeyDWq4k&s=oNWF1fUatqhiaXXqQdrhLqXvg1pyEjZMEdqytoeeP0U&e=.\n. That html5 dialog box works for me... something that forces the user to confirm that they acknowledge the risk and want to continue anyway\nRgds,\nNeil Cresswell\nOn 13/02/2017, at 9:41 PM, Romain notifications@github.com<mailto:notifications@github.com> wrote:\nHi @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UrLpPBEbxQ1KdzAeveCmbWTYOGT1cPBhgfYwTwx6kIo&s=yAMQ_BGdWrcvV9LdKWRAfjjKUMQgkv1FdUE8U9NZoio&e=\nI don't see what you are asking for. If you have examples it could help me.\nOtherwize, with html5 dialog we could have somtheing like easily:\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_295554_22876266_19a7289e-2Df1d0-2D11e6-2D862d-2Dcb9aa897981a.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UrLpPBEbxQ1KdzAeveCmbWTYOGT1cPBhgfYwTwx6kIo&s=cJIf4_UM9V1hPWpQNEO_nu0bRQoCbfOeqvMpJEHHPaA&e=\nPressing the ESC on the keyboard also cancel the dialog.\nAs for I as know, docker rmi -f doesn't break running container, it only removes tags on the image, but docker rmi -f is needed to remove an image with several tags.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_562-23issuecomment-2D279324944&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UrLpPBEbxQ1KdzAeveCmbWTYOGT1cPBhgfYwTwx6kIo&s=xdXa1Xdmn3tDdqUC4czoVwJsp5mpdhaqDkjik7RZMKQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleULX4TG03YZXKN0-5FX9-5FCe7-2DEAk5ks5rcBdJgaJpZM4L3KkK&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UrLpPBEbxQ1KdzAeveCmbWTYOGT1cPBhgfYwTwx6kIo&s=qqR-ESylZxqY_8MxYiP1mRnJNOf_BP2WXRIviefqnes&e=.\n. Only as long as it doesnt impact the simplicity we currently have.. agree... the two defaults should always be there (/bin/bash and /bin/sh) and then have a third \"custom\" setting, which allows the user to type in their own command.\nSent from my iPad\nOn 15/02/2017, at 11:20 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI don't really like this as even I was confused when using it. I wanted to select /bin/sh and it was not available until I started to type /bin inside the bar.\nIMO we should give the user two alternatives:\n\nUse a pre-defined command with the old behavior\nWhen selecting 'use a custom command', the field should be replaced by an input field.\n\nThis would be much clearer !\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_563-23issuecomment-2D279854926&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qvYAHnsSG0exjE05hTwn6PSGZUBXTgUfHrbeEEuXPls&s=uDjQeCDfMZ6auw8WGiaFaFyggbWgdXxAFl8EfOgegm0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWEkKUQn3svl09HrBYLdBOZ7OYi-5Fks5rcii-2DgaJpZM4L3LLN&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qvYAHnsSG0exjE05hTwn6PSGZUBXTgUfHrbeEEuXPls&s=pO9PHM-bsdCcvP9AJc24Ik4DBKBqxq-gZBHdDT5GTco&e=.\n. awesome... however, can it say \"publish all defined ports\" instead?\nto me, \"all ports\" would mean ports from 1-32768... ie all...\nSent from my iPad\nOn 5/02/2017, at 8:45 PM, Romain notifications@github.com<mailto:notifications@github.com> wrote:\nHi,\nIt solves #558https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_558&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=KktdgRactW_QpL7V32Ks_iPWlC1WPohnO_yqMTTanWA&e=\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_295554_22624544_501203c4-2Deb7f-2D11e6-2D8608-2D53a573bac7ee.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=4yS1ZduSv2XwfleR8ifktgT2Yihb1ewrjaTPL4JVZko&e=\nCheers\nRomain\n\nYou can view, comment on, or merge this pull request online at:\nhttps://github.com/portainer/portainer/pull/566https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_566&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=XVSnf3593lGwgQjxXQ59dWJIW36OX1lXSYrKVYfujM8&e=\nCommit Summary\n\nfeat (container): add publish all ports option (#558)\n\nFile Changes\n\nM app/components/createContainer/createContainerController.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_566_files-23diff-2D0&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=Frs0fLO0YZ7btiCBfTwSuzV-CuvjMJxePgbcgasxTA8&e= (1)\nM app/components/createContainer/createcontainer.htmlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_566_files-23diff-2D1&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=5Tkdw-396CfyOFUM_FftG87sLgMsXLHwtN3Sen27784&e= (5)\n\nPatch Links:\n\nhttps://github.com/portainer/portainer/pull/566.patchhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_566.patch&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=ipL8E0laXfj8fIAkIJ67j3UCBap43kRN8qicAWyOYRE&e=\nhttps://github.com/portainer/portainer/pull/566.diffhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_566.diff&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=vH6PPjX3bwsVKDkABFfLVC6DJ6aj3td3K1ldPG5WruA&e=\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_566&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=XVSnf3593lGwgQjxXQ59dWJIW36OX1lXSYrKVYfujM8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZX4xiHMcW4yWQm99tcOiysCcGuBks5rZX4IgaJpZM4L3bG8&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jiaprkNQbW3fv1xwBORz8v2X5Jj9IdzCeTI6OCJxouE&s=6ROV7aRs1qcLuijlm0IsP7fqXRbOzQqjiDU8sYnhyeY&e=.\n. Agree.\nRgds,\nNeil Cresswell\nOn 5/02/2017, at 10:26 PM, Glowbal notifications@github.com<mailto:notifications@github.com> wrote:\nPublish all exposed ports may be better terminology.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_566-23issuecomment-2D277507062&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bsoH8ApvBH22vrU8z4-r0WwZWnz0OfHQrVFBUabBmLA&s=QjBciHeSTVMe4JqexjKljmLsY9OWgpBO56U2Rgpcxs8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaS9xgDrsRVEU0eYi-5FFI72p9n6laks5rZZWmgaJpZM4L3bG8&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bsoH8ApvBH22vrU8z4-r0WwZWnz0OfHQrVFBUabBmLA&s=2GtM7xlrLoq2RRGIkLGFthrfInN47PVr8R3Ne1zKDUc&e=.\n. Agree. Click to select. Also helps answer the question about container health status being on that page too\nRgds,\nNeil Cresswell\nOn 6/02/2017, at 9:32 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI do not want to add too much information on the container list view otherwise I think it will look cluttered. Tho I'm now thinking about giving the user the ability to decide which column to display on the tables.\nSomething similar to https://datatables.net/extensions/buttons/examples/column_visibility/columns.htmlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__datatables.net_extensions_buttons_examples_column-5Fvisibility_columns.html&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=OYm9bS_FLloyOeKacepqDz4cqKNOGM5Gz2exA1Oef2c&s=c2koF1k-HYEQ4W212C5FsMy5AppWGswf5gJo7XnWMhs&e=\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=OYm9bS_FLloyOeKacepqDz4cqKNOGM5Gz2exA1Oef2c&s=ea_eFy9PY8Byxf1F-NLzfJDrAyYeW5HlIOFIFCM_YHE&e= what do you think?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_568-23issuecomment-2D277546864&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=OYm9bS_FLloyOeKacepqDz4cqKNOGM5Gz2exA1Oef2c&s=FOVDvhX7BsGqGWWr7JEzSRymRHMwwd-UDCyDNqIUKiY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUG4oHEwRO-5Fgq9BvtZ85s9A2mBESks5rZjHRgaJpZM4L3h5i&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=OYm9bS_FLloyOeKacepqDz4cqKNOGM5Gz2exA1Oef2c&s=naiqhzi-Usd7LtNRqe_LdpEbmH3JEQBvTFg7i4bmsXI&e=.\n. Yup, pretty much. That \"mass text field\" is what i had in mind...\nRgds,\nNeil Cresswell\nOn 6/02/2017, at 9:09 AM, Romain notifications@github.com<mailto:notifications@github.com> wrote:\nHello,\nIs it something like this you were thinking of in #546https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_546&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=Ku5AIU7k3LW4T_4yBMY3BFRH6Z8xZsxq9X1b5fYAELw&e= ?\n[env]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_295554_22629483_3abd80da-2Debe7-2D11e6-2D9c0f-2De962a5b4f1e5.gif&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=uIUBW_6PHoHASP49YnB3R7PPi-mqTPLZNZkf6qqtaF4&e=\nIf so, I can apply it to all key-value components.\nCheers\nRomain\n\nYou can view, comment on, or merge this pull request online at:\nhttps://github.com/portainer/portainer/pull/570https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=_Otw48uTtkOadevxAEMk0i_aYeZsyogg44YDPJgLtX8&e=\nCommit Summary\n\nfeat (container): quickly editing environment variables (#546)\n\nFile Changes\n\nM app/components/container/container.htmlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570_files-23diff-2D0&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=CnJYXrIGd98Nfupbtp-Ssi93BBf53LUPr4rFFHJDNIQ&e= (9)\nM app/components/createContainer/createContainerController.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570_files-23diff-2D1&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=EMJIVF1vdmQyIJ2vsV0tvPMjPlHMtigilveHyY8p0DU&e= (19)\nM app/components/createContainer/createcontainer.htmlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570_files-23diff-2D2&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=Q8ccaCbeFwJtU_R6geUxuXCbkXRpfiz1F4hJRBy_mrs&e= (25)\n\nPatch Links:\n\nhttps://github.com/portainer/portainer/pull/570.patchhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570.patch&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=cuApGF4Ub53Ae4jz19VQRKZYWs81NtspHETvQocg0Ms&e=\nhttps://github.com/portainer/portainer/pull/570.diffhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570.diff&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=yKUB95DWnqweChP2GrSWQg8bk5DH2Vn-ygmaHDK2Sbo&e=\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=_Otw48uTtkOadevxAEMk0i_aYeZsyogg44YDPJgLtX8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSAF3cBTaqpXVIEbebQXpS3xTtDxks5rZiyRgaJpZM4L3m6V&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eaSHq2oMPQrQnaNjHcnthxawyx2ePS26rqpPMcVV9Ns&s=oEMHjrhcjH7F4WjUWH2OeLARw_fhVoRYfykOmI_k-jU&e=.\n. Agree.. \"Standard\" or \"Bulk\"\nRgds,\nNeil Cresswell\nOn 6/02/2017, at 11:12 AM, Glowbal notifications@github.com<mailto:notifications@github.com> wrote:\nI feel this should be done in addition to the existing edit environment variables functionality. Perhaps with some toggle button to switch between both edit modes?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570-23issuecomment-2D277554065&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=y62-4Kdubqjsh21okRtVCDipPzpyPM2-aj7ezzBNFlY&s=1A1lUmlZk2z2YBrwPDE-T_3Upxeh9El4J5SVSJwNDzs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYWfU2wsCxNITShNs4oW4ENkOkOwks5rZkkzgaJpZM4L3m6V&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=y62-4Kdubqjsh21okRtVCDipPzpyPM2-aj7ezzBNFlY&s=NGk8S8WVxZiLLBXpBrGuoSZmu7dZD7Db8WnzM1Pb7Kk&e=.\n. I dont see the issue with having a collapsed \"advanced settings\" like we do elsewhere... so the default behaviour is simple, but if needed, a user can expand the advanced section and gain more controls.\nSent from my iPad\nOn 8/02/2017, at 4:56 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@Filirom1https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_Filirom1&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hjL38sYYXcLfHVKiRdytT9qXdbXQyj3LWKRLcCfyTU&s=a8w8VARjaWlBKshmC7u6ms8M0kafpkqSBCzkAqcjdks&e= got a point. I do think that having multiple modes is bad for the UX.\nOn the other side, I feel that somehow this enhancement and goes against the will behind Portainer which is really simple user experience.\nMaybe we can mix both of the world by having the browser remembering which mode is selected so that when the user goes back to the container-creation view the last mode he used will be displayed.\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hjL38sYYXcLfHVKiRdytT9qXdbXQyj3LWKRLcCfyTU&s=LX4hIaDkwNOs4QARHrZgDmuLT1dyWsd2xZzN-bwZACs&e= what do you think?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_570-23issuecomment-2D278222539&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hjL38sYYXcLfHVKiRdytT9qXdbXQyj3LWKRLcCfyTU&s=eRMpaqLZGHoOLPKY788_8rbo4aKbyutMQlrycvtZHCU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSsdfMB-5F3n9-2DRtAgOq8QPaRJLgYUks5raTzlgaJpZM4L3m6V&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hjL38sYYXcLfHVKiRdytT9qXdbXQyj3LWKRLcCfyTU&s=zliedLmP-UcW52aupiHsjF26y_ip8Verle6txtqJEVc&e=.\n. Maybe we just add Traefik as a template option, making deployment simple?\nRgds,\nNeil Cresswell\nOn 17/03/2017, at 10:00 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\n@lavvyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_lavvy&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jt16Py_hpLw8zdCEzEXepgT2FyPC-d40OP1rI5mJtis&s=FPyxeAvWuNwSxfd09Tytuo2SYd9-ek_oAZh672L3NBs&e= You talk about dynamic reverse proxy based on Host Header I think\nI think other products (free) do that really correctly\nI use traefik (https://github.com/containous/traefikhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_containous_traefik&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jt16Py_hpLw8zdCEzEXepgT2FyPC-d40OP1rI5mJtis&s=xC1qzdkoiXknHOv_D54V4pDVVkfaBw0n3m1ru2EOCLU&e=) for example, a dynamic reverse proxy (written in go), creating rules when docker containers or services start\nI think portainer can maybe have an option to display those routes, but it has to be compatible with all solutions, so it's complicated IMHO\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_571-23issuecomment-2D287189324&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jt16Py_hpLw8zdCEzEXepgT2FyPC-d40OP1rI5mJtis&s=brBkzsxGnvmjMnOxm9LxUc3rzsiaDnzEMV4JJrnZATo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld5m3IhCzpjQXjiSEg4mSri1ztFOks5rmaLbgaJpZM4L3oTW&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jt16Py_hpLw8zdCEzEXepgT2FyPC-d40OP1rI5mJtis&s=M6TDQ6Iljzm4yEHXAESGr3e3iJ-m_gqVwUCpQRDgt4c&e=.\n. This is a good idea, and something that Portainer should be able to provide. A mechanism to centrally provide a list the current contents of the Docker engine integrated DNS makes sense. I do wonder why Docker doesnt do this natively.\nUnfortunately it will be a while before our dev resources can get to this (unless we can get someone to fund the feature), so best case is someone in our community volunteers to write it.\nRgds,\nNeil Cresswell\nOn 28/05/2017, at 2:00 AM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\nI arrived here while looking for a 'simple' solution to access docker containers from the host, using docker hostnames/aliases. There are two approaches to achieve it:\n\nEmbedded DNS server\nDocker API (cli, HTTP, Go, Python...)\n\nAlthough the embedded DNS server is not directly reachable from the host, running a dns proxy (such as grimdhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_looterz_grimd&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lY0s0bP4rd7-3WQjqpyMJ4t1Wn8yng8nTO8G7mjZeiQ&s=hyuQ1PWcc3ITjZFyNngmRR3W-MR-hZr55MdXzkYHWXo&e=) in the corresponding subnet suffices. Then, to resolve all the containers in different networks the dns proxy needs to be connected to all of them. On top of that, the user is required to add the dns proxy to the /etc/resolv.conf file in the host. I don't like it because i) it's not a clean solution and ii) I don't know how are multiple aliases resolved.\nAs a result, the major advantage of the docker API is that a single connection to the engine (or engines) is required to gather the info of all the subnets and containers. At gitter, @deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lY0s0bP4rd7-3WQjqpyMJ4t1Wn8yng8nTO8G7mjZeiQ&s=PHOenS0L6v-vd3kU9JDd24_Yn4daVYXar-f8yF4uU3o&e= suggested to use docker-genhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_jwilder_docker-2Dgen&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lY0s0bP4rd7-3WQjqpyMJ4t1Wn8yng8nTO8G7mjZeiQ&s=JeBguEsn1rYkTeN-YFpseXU4gKPb9kGplGN-kYaHuW8&e=. It is the closest solution to fit my needs, but there are two drawbacks: the info is retrieved through a docker socket, and it is designed for a single docker engine. Portainer, on the one hand, is thought to handle multiple engines. On the other hand, portainer actually retrives nearly all the information that docker-gen provides. Then, I think that it would be cleaner if portainer provided part of the functionality of docker-gen. To put it simple: better a single service than two if they are doing nearly the same.\nThe interesting point, though, is how to present that information. One of the examples of docker-gen is to automatically generate a configuration file for nginxhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_jwilder_nginx-2Dproxy&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lY0s0bP4rd7-3WQjqpyMJ4t1Wn8yng8nTO8G7mjZeiQ&s=UafxUsnyydxdjw499FG1rgFSXqxuqIO2o5vZ6A6JW2c&e=, which is a too specific format. Then, a solution might be to use a reverse proxy and add an entry to /etc/hosts. In this context, traefikhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_containous_traefik&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lY0s0bP4rd7-3WQjqpyMJ4t1Wn8yng8nTO8G7mjZeiQ&s=96tw6Z38h1uP6hx8kCf-cuA69QNzEXki684WnLcJ1Hs&e= is probably a better alternative due to additional features, such as multiple backend support. But, mainly, because docker HTTP API is used. Still, an entry needs to be added to /etc/hosts for each local domain.\nHowever, because the reverse proxy is a container itself, the entrypoint where the domain in /etc/hosts must point is also dynamic. Therefore, some mechanism in the host is required to:\n\nKeep /etc/hosts up to date with the changes in docker.\nProvide a nameserver that is updated with the changes in docker.\n\nThis is the point where I am stuck. These are the options I see:\n\nWrite a Go/Python app to be run in the background, that interacts with the docker api (moby) and updates /etc/hosts. (only valid for the local docker engine)\nRun a nameserver in a container with a fixed IP\n2.1 Create a template in docker-gen to generate a DNS zone file. (multiple instances required for different docker engines)\n2.2 Guess if traefik can generate a DNS zone file.\n2.3 Ask the developers of portainer if they think adding such a feature is useful.\n\nIn summary I am suggesting that a new 'DNS/Proxy template generation' feature is added to portainer. I.e., that networks, IPs, hostnames, aliases and container names of all the connected engines are made available in a data structure, to let users choose how to map them to their scheme. A very first approach can be to provide that in a JSON file. This would effectively provide a full structured description of the network so that no direct access to any of the engines is required. Indeed, if the file is saved directly to the host, no access to docker networks is required at all.\nOn top of that, some predefined naming schemes can be made available in the frontend along with most common templates (nginx, DNS zone file, apache...). E.g., . and ., optionally appending .docker or .. See resolvablehttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_gliderlabs_resolvable&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lY0s0bP4rd7-3WQjqpyMJ4t1Wn8yng8nTO8G7mjZeiQ&s=7rnLgAS_t-4MZNoM1LYyvlCCRyvaER6mzgRmQcIO8U8&e= which seems to be dead, unfortunately.\nNote that I have used a single nameserver and a single reverse proxy as a simplification. The most interesting feature is that the proposed solution is agnostic to the actual number of containers and networks. A possible use case is to run the 'copy' of multiple VPS with different stacks, each in a docker network, and have a single nameserver automatically adapt to full copies going up and down through docker-compose.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_571-23issuecomment-2D304453170&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lY0s0bP4rd7-3WQjqpyMJ4t1Wn8yng8nTO8G7mjZeiQ&s=nbTjOn0Kr_SrPEpjZvgBzYK4Ia24KatTzO7u5tRZSeo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleGIW-5FI0vptTFVBCqkXHajDPVdWHks5r-2DCxwgaJpZM4L3oTW&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lY0s0bP4rd7-3WQjqpyMJ4t1Wn8yng8nTO8G7mjZeiQ&s=C-VhkHxCjOpAMQFr1wCxx5IWxS2WuZqUJTOxptx8ZNw&e=.\n. No eta as yet...\nRgds,\nNeil Cresswell\nOn 27/12/2017, at 9:36 AM, Kyle Sanderson notifications@github.com<mailto:notifications@github.com> wrote:\nAny update on this? docker attach is pretty much an absolute necessity for stdin alone, let alone interfacing with non-headless workloads such as SRCDS, rTorrent, irssi... etc.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_592-23issuecomment-2D354010592&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3z2STYEKIFaXxOIKdIyjUjw0yZFUdiHdwQZbWbeyI8c&s=wdC--8PCtUxXW2Mj503sBnUCEPJ5gMjA6oF8Ecq6HXs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldfYGcnPzuoFldIUEwQQzl2n7ZN7ks5tEVi3gaJpZM4L-2DpCB&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3z2STYEKIFaXxOIKdIyjUjw0yZFUdiHdwQZbWbeyI8c&s=p1cqFITLn4u-Q5uoKAChvAgqgw-WK742j_3ZHx_jd_Q&e=.\n. Thanks, you are welcome...\nRgds,\nNeil Cresswell\nOn 10/06/2017, at 12:58 PM, Reski notifications@github.com<mailto:notifications@github.com> wrote:\nThank you...this is the coolest and simplest Docker Web GUI on the market right now\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_596-23issuecomment-2D307531516&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3eL8aayzF0cRx4lShtcTDoXhf8VxqurVpHQtDyqVEw4&s=PybBuvYqCy5tjXdQFWwcecCc8VXUZo5iRtNEuxxpf1g&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleP-2D1mIFdRZPFBH6hdrPMqK2KTYEks5sCeoYgaJpZM4L-5FP2o&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3eL8aayzF0cRx4lShtcTDoXhf8VxqurVpHQtDyqVEw4&s=0tUXYAPmrxAC3aAfN97wQw7BssQYfgykqZYpqpHWewk&e=.\n. Hi Stephan,\nWe have a donate button on our website actually :-)\nAny contribution is welcome..\nRgds,\nNeil Cresswell\nOn 5/08/2017, at 7:17 PM, Stephan van Rooij notifications@github.com<mailto:notifications@github.com> wrote:\nThanks guys, do you have some donate button? You could even use beerpayhttps://urldefense.proofpoint.com/v2/url?u=https-3A__beerpay.io&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ItgXXcHwFpiAOS5YKgHrXjoNsgqcoeOLT6C9CL9o0uk&s=XWqbRcj5KBhXVjSnlH4c9MNShxhtVwo6CAitz603EjQ&e= that way users can pay you (in beer) to fix specific issues.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_596-23issuecomment-2D320423548&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ItgXXcHwFpiAOS5YKgHrXjoNsgqcoeOLT6C9CL9o0uk&s=exMk7Pst8vzopZwvWFoACsQJHrY6suCLjm7q0zEjMg0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWzwbqzkm28KVhRjyGypK2Cshp1vks5sVBcHgaJpZM4L-5FP2o&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ItgXXcHwFpiAOS5YKgHrXjoNsgqcoeOLT6C9CL9o0uk&s=mb1MfMMQ-UPCPtk_z6HChSwBEHIOtw9kV7uVpLAHq2g&e=.\n. I think it might be useful for a limited number of users. Maybe poll for interest.\nA simple free text area under advanced settings where the user can type in the option as syntax \"--option=setting\" would be how i would see this, but again, IMO only useful for maybe 1% of users.\nRgds,\nNeil Cresswell\nOn 14/02/2017, at 9:22 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=saZGjGslr-Jxyt5Rb0rCDlVUbfBroags7iKlZ3g7YrY&s=BAOdT7Srn8w4mLKkZYydN79vAD1sYq-D7jCcBw70xqE&e= what's your position on this evo?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_597-23issuecomment-2D279510662&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=saZGjGslr-Jxyt5Rb0rCDlVUbfBroags7iKlZ3g7YrY&s=4VFHsi0ErZeQOMF5QoiZ0N7puNdrQj3MXPJRRPCXHtA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlf2HMC-5FVKj1fAnJpz4ym3G-2DxAAWlks5rcLt3gaJpZM4L-5FQSd&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=saZGjGslr-Jxyt5Rb0rCDlVUbfBroags7iKlZ3g7YrY&s=8Uspt91MgYztg2WxcxOQdfoEz9uE8ebYeeYmByX-plM&e=.\n. Isnt that what i suggested?\nEither way, agree..\nRgds,\nNeil Cresswell\nOn 10/05/2017, at 1:08 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nOK, well how about to start with, we just add a few (dropdown select box). This way we extend portainer to support these extra runtimes, but we dont have to parse to find the API... rather, we support 4-5 now.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_597-23issuecomment-2D300384150&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-8xLgYA1lK63RgHS9YrwyyrSVIZxLEa0kdjW1KjT0cg&s=lQthyfWrKLWYek7tjYnDRZ4OW8gU4Eicu4r033p9ejU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZUhBXWCAET-5F59tIa9WjegbzW27oks5r4VRpgaJpZM4L-5FQSd&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-8xLgYA1lK63RgHS9YrwyyrSVIZxLEa0kdjW1KjT0cg&s=myb9dNkyE-N4c11XHz6AkDx5s8vrGHZoJ2sIis1lwa4&e=.\n. We do not support this.. we only support bind mounts, or named volumes.\nFrom: Helmi [mailto:notifications@github.com]\nSent: Tuesday, 11 September 2018 4:44 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] [Feature Request] A field to add options for docker run/create (#597)\nI landed here looking for a way to add --volumes-from $othercontainer\nMaybe I'm just completely missing it but I can't even find it after searching the docs and google for 20 minutes.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_597-23issuecomment-2D419980431&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=u8r488eSo4VT4mmvN30v6t6q62ILWJX2FkdZbchayRA&s=7MiG8Je0twhljjcwr6xDGu5zuYa8eIPa-xpsHrtITEw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVZgqgDBNnJyECZQNF-5FYDYPcbH2bks5uZpbrgaJpZM4L-5FQSd&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=u8r488eSo4VT4mmvN30v6t6q62ILWJX2FkdZbchayRA&s=raLqlPRA417poRQRPkQKx_czYXjcyeFcWPxKkJ317HU&e=.\n. I 100% agree, a single page showing aggregate performance would be awesome\nRgds,\nNeil Cresswell\nOn 28/02/2017, at 6:02 AM, psychowood notifications@github.com<mailto:notifications@github.com> wrote:\n@richardgoaterhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_richardgoater&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wtI9Hbu1bQc9THLcvu0NgG0m8jM3eiw2xy7pBjy7V7U&s=CV3mFuuxUlRluS3i-JBE2VM7K_z2wZKSVlKrT09NKlM&e= I'm quite sure the stats shown in /stats are the same (at least in values) you see in the since stats page: I did a quick test and values are aligned. I agree that a global view (single page, all the containers shown together with the grand total) would be awesome, tho.\n@pascalandyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_pascalandy&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wtI9Hbu1bQc9THLcvu0NgG0m8jM3eiw2xy7pBjy7V7U&s=TuCmkNGRnD-rB9bsk3ZkIRqrYmmL1wgK1uK_xMq-S8s&e= Yep! Not sure if it is the best, I'm sure I'm totally underusing it :)\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_611-23issuecomment-2D282781611&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wtI9Hbu1bQc9THLcvu0NgG0m8jM3eiw2xy7pBjy7V7U&s=r6hmkb94IDUzOCDW2MDP77Pt1feh02LkZuWOlTX8YAk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSoOAllTXTkPfIMwQZpjp9x43Uueks5rgwF3gaJpZM4MFDzS&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wtI9Hbu1bQc9THLcvu0NgG0m8jM3eiw2xy7pBjy7V7U&s=XOTh0TS0GCYX4Q9aR_rdhrZ7sddDII1U2RjRJe8ZVLc&e=.\n. Hi there,\nFor security reasons, we use session tokens, which are tied to a browser session (tab). If you want the token available across tabs, we would need to switch to cookies, which in our view, adds security risk.\nUnless there is sufficient demand, we will remain using session tokens.\nHappy for feedback from the wider user base.\nN\nRgds,\nNeil Cresswell\nOn 25/03/2017, at 9:40 AM, jamshid notifications@github.com<mailto:notifications@github.com> wrote:\nPortainer is great but why do I have to login each time I open a new tab? I'm trying to use direct links like this (makes it very easy for non-docker users to work with a container):\nhttp://docker.example.com:9000/#/containers/myproject_mycontainer_1/consolehttps://urldefense.proofpoint.com/v2/url?u=http-3A__docker.example.com-3A9000_-23_containers_myproject-5Fmycontainer-5F1_console&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BsQeIPpVXfZX_ra17p9cuohV16IfAbVfUDgnBHlIT-A&s=RsEIvHF9q2Vh1xtFIPdHAubXPucTxozZG0pBO4t8xQs&e=\nBut this requires login every time, claiming \"Your session has expired\".\nI verified my docker (Ubuntu16) and browser are using the correct time. Even restarted the portainer container. So I don't think it's related to #398https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_398&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BsQeIPpVXfZX_ra17p9cuohV16IfAbVfUDgnBHlIT-A&s=Gg-mC3pAWjlhtTlTxbM1ytZFPyvsHfS7v0Y0dIANG0I&e=.\nHow can I diagnose the problem, which cookie contains authentication (JWT?) and why isn't it a browser-wide, long-lived cookie?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_613-23issuecomment-2D289137430&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BsQeIPpVXfZX_ra17p9cuohV16IfAbVfUDgnBHlIT-A&s=LYJEgTR2HH16U5VmDz1e77N_F4M11pQrz1pTTwYBsoc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlV2oWR3ib3pCaFvEmUJUrxWw-5FAcuks5rpCpPgaJpZM4MFeL2&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BsQeIPpVXfZX_ra17p9cuohV16IfAbVfUDgnBHlIT-A&s=5qer27NabkhZ_UUPl_cvbQ0tkI-QpWMZG4Clx0Pdno4&e=.\n. I agree \"remember me\" is a great feature/option\nRgds,\nNeil Cresswell\nOn 4/04/2017, at 11:47 PM, P. S. Clarke notifications@github.com<mailto:notifications@github.com> wrote:\nYes, opening up new tabs for different pages is great for compare-and-contrast activities, and is such a major part of my workflows that I'm currently stuck using an older version of Portainer. I know Portainer's UI is based on a single-page design, but I'm hoping this gets fixed soon so I can start following the mainline again.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_613-23issuecomment-2D291475958&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XqUTZEMEFE_ca_T87yTyEvlNEO2KUzgFCYCPuD4fXgI&s=EOQ0BphhibsJccGgYEY-WSDgQgygZVd36fo4Ok4bVD4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaDnO0y35YR12hWDsWzLSJ3DTd36ks5rsi3lgaJpZM4MFeL2&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XqUTZEMEFE_ca_T87yTyEvlNEO2KUzgFCYCPuD4fXgI&s=euDXxdzxki7BqBGWywMFPFCA5FcEhXM63B5Z_Ly98QI&e=.\n. Hi Danny, we actually already have that in our Q2 roadmap...\nRgds,\nNeil Cresswell\nOn 20/02/2017, at 8:31 AM, Danny Dulai notifications@github.com<mailto:notifications@github.com> wrote:\nShipyard and Portainer look really similar, but I'm liking Portainer more for many reasons.\nOne critical thing that Shipyard accomplishes for us is that it gives us a gui front-end for management of our private image registry.\nAny chance this could get added to the roadmap for Portainer?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_615&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=sNuxsBll8W1ipfbm1bNXTV23iYvISFMkdnr1cPJphhA&s=MOiIJTHY2h0HKKk7mUaSrQu6B8xLEI3hj3R9ZZxohlQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQ4lCD7hMgUsDUIt8Qj3mRl4O2Poks5reJhwgaJpZM4MFkF5&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=sNuxsBll8W1ipfbm1bNXTV23iYvISFMkdnr1cPJphhA&s=hm2lIJ_uLWlgcWTMEwNBm9FKK3CXlhPm2Xfis0XU8W0&e=.\n. Hi Bryan,\nWe are aware of this limitation/confusion. We are thinking of removing the container view when using Swarmmode on Docker 1.12. Good news though is that Docker 1.13 introduces a new API that lets us aggregate a container (and image) view across all nodes. Expect to see a change in an upcoming release of Portainer.\nOn 24/02/2017, at 8:05 AM, Bryan Hunt notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nWhen running in swarm mode, the Containers and Images views only show the containers and images of the Docker node Portainer is connected to. This can be confusing especially for new users. I just had a user ask me how to add a container to the swarm cluster when it was already up and running on another node in the cluster.\nTechnical details:\n\nPortainer version: 1.11.2\nPortainer Docker image tag (latest/arm/windows...): latest\nTarget Docker version (the host/cluster you manage): 1.13.1\nTarget Swarm version (if applicable): 1.13.1 (swarm mode)\nPlatform (windows/linux): linux\nBrowser: Chrome\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_621&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Le9UECPBqEwt-pEa2hJ4R_b9O7ZKewRt1eiAzAQsCao&s=2WGo9IUX6qmRe1EHvfA8V8aLie061P-dJpD2ibP3DVk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcCPKjlNygmHD-2DXNx4b014kSK4Q9ks5rfdhWgaJpZM4MKXb8&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Le9UECPBqEwt-pEa2hJ4R_b9O7ZKewRt1eiAzAQsCao&s=gEk94Ml_F3aJGpbZ8orV4gDUgfIzUeMUziO_nTXjdzE&e=.\n. Just make sure the status is in human language, so self explanitory..\nRgds,\nNeil Cresswell\nOn 6/04/2017, at 8:52 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@WTFKr0https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_WTFKr0&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=abF4JG5BZ3JWPR2l1duF1i0tGo2HB2mwKtkBnkTm_Eg&s=vOaslQ2pUDnAOmqbBJhMY887a5tuUiUMP9YgO2K_CD0&e= I agree with that. But this should be easy for the user to understand the new status (with healthcheck), so either adding a tag note somewhere on the view to explain that or a tooltip on the status label.\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=abF4JG5BZ3JWPR2l1duF1i0tGo2HB2mwKtkBnkTm_Eg&s=d6kKT5eU9U3Kkh1xjtOlKnn_D6p0QDbY2v0DrpmEsa4&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_622-23issuecomment-2D292110348&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=abF4JG5BZ3JWPR2l1duF1i0tGo2HB2mwKtkBnkTm_Eg&s=XuNUnfaKSoMU1W0VwlLJVJiAbA8LuYvESZy4Uf9oUDE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYumHDN6uMmFiebaqolPE89DyalYks5rtKe8gaJpZM4MLA2M&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=abF4JG5BZ3JWPR2l1duF1i0tGo2HB2mwKtkBnkTm_Eg&s=UzuaE3QFYaLUz5niBSX7f-DItV6debIh6MHS2CS6byY&e=.\n. All good..\nRgds,\nNeil Cresswell\nOn 6/04/2017, at 9:57 PM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nOK, doing some changes\nWhen starting :\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_15888093_24748426_ef3897d2-2D1abf-2D11e7-2D87cc-2D78cf3c8c9241.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pjX_vaZvJxkUekl1g9AyhnCzWIzTDKWY9AutLPPggdA&s=KohVCRPmoKhi8xW1OP-lWFODGCIl2Ac3i1fXC_1JDIU&e=\nWhen healthy :\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_15888093_24748485_152e21c8-2D1ac0-2D11e7-2D8012-2D6d204adaa56f.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pjX_vaZvJxkUekl1g9AyhnCzWIzTDKWY9AutLPPggdA&s=TdhvNM8Op5NsiyZWfdzy2JedK5ceGWOKpXTlJ0lGtFc&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_622-23issuecomment-2D292126185&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pjX_vaZvJxkUekl1g9AyhnCzWIzTDKWY9AutLPPggdA&s=lRm5KIPe-Vq0h651jb6oK8zeokmxBEr659JpLjLbKhY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSMB8J47JXA1THmbSHLEuDDlzaqKks5rtLbngaJpZM4MLA2M&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pjX_vaZvJxkUekl1g9AyhnCzWIzTDKWY9AutLPPggdA&s=2D48PAeQHPLcgWIcvFQBV2cSlCXE_2FJ_hrc5CpGHsM&e=.\n. If you are using Portainer templates, they are container templates only, and cannot be used to deploy Swarm services.\nWe are adding template support for swarm soon.\nRgds,\nNeil Cresswell\nOn 12/05/2017, at 1:36 PM, Philip Schmid notifications@github.com<mailto:notifications@github.com> wrote:\nHi there,\nIn my portainer environment swarm networks are still not selectable. It only shows bridge, host and none when I try to create a a new service from a template.\nDocker: 17.03.1-ce\nPortainer: v1.12.4\n[root@node1 ~]# docker network ls\nNETWORK ID          NAME                DRIVER              SCOPE\n71b32c74164a        bridge              bridge              local\n1e7326c004b7        docker_gwbridge     bridge              local\n49278dd80f72        host                host                local\njgpyyzj5qv6y        ingress             overlay             swarm\ns2gsj17rux2l        services        overlay             swarm\n2adc0c7dd3d2        none                null                local\nAny guesses why? Thanks.\nRegards,\nPhilip\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_641-23issuecomment-2D300996005&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jrUgXE1zaB5si0HSnlexjouLgkcdTGjOu_1hySFHOAo&s=rxgyOckdiEY2wdMbVYwinOfchXmDhHf_e_xHlzoRIjQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTJPau4uU6zyzG3AVhc-5FfATYouF7ks5r4-5F3qgaJpZM4MZOH3&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jrUgXE1zaB5si0HSnlexjouLgkcdTGjOu_1hySFHOAo&s=9RD2eNh06GHFnBXFoV33MPmOhYPmK_4-Hln682EBvDU&e=.\n. Hi there,\nThis feature is not available natively in Docker (edit a container), so Portainer also cannot do this.\nWe are adding a \"recreate\" feature, which will delete and recreate the container, allowing edits/changes at the same time\nRgds,\nNeil Cresswell\nOn 13/03/2017, at 8:01 AM, OhmegaStar notifications@github.com<mailto:notifications@github.com> wrote:\nI've newly discovered portainer. i really enjoy it.\nI've noticed something that may me a desirable feature, that is the ability to edit a non running container (eg port, volume binds, environment variables etc).\nI hope this would be a feature in a future portainer.\n/OhmegaStar\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_652&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Hwf8S2Ft-67VO40y4pCCz8yAjeAx7ZR_0L--XRTmaA4&s=bIWomDIsSxjOuw8O42tSlh9rqj5uSTvv7amiIowy-rY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXRQWRVVQeJnqjVzco31eIPMu-2D7Iks5rlED4gaJpZM4Maojm&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Hwf8S2Ft-67VO40y4pCCz8yAjeAx7ZR_0L--XRTmaA4&s=yROdSY7_e_RmNieNuBl4hyJWkuwjNO2GNKUsFrj7iz4&e=.\n. --link command has been deprecated...\nSent from my iPad\nOn 13/03/2017, at 8:51 AM, OhmegaStar notifications@github.com<mailto:notifications@github.com> wrote:\nWhen setting up a container that uses container linking, I cant find a place in portainer to do this ????\nI suggest that linking is created the same way that environment variables are made, but perhaps with a dropdown selection for the link target ?\n/OhmegaStar\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_658&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=OgKeYYZUs544nGaKziQnGljPJAqEUJZI_JissbVzZwc&s=gyMkmpf1I3uXIPKsAWLvSnT3Rhu_CZjL-wYnK2plWnI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZdGRPA82hB6gOjx3FDvByJbS4PPks5rlEyxgaJpZM4Mapja&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=OgKeYYZUs544nGaKziQnGljPJAqEUJZI_JissbVzZwc&s=GdId0KxnPcVKrpfHA49ZWwGYoXfnCbzLtosi6pcOmiU&e=.\n. it was deprecated in Docker 1.10, and will be removed totally in 1.13\nSent from my iPad\nOn 13/03/2017, at 9:03 AM, OhmegaStar notifications@github.com<mailto:notifications@github.com> wrote:\nah okay, i was not aware of that, theres still plenty of containers out there that defines linking......\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_658-23issuecomment-2D285971811&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Un42rnq1Ivq-4IgXYg6_9GcmNHirKZpPSmifbGCD56I&s=YwdvcB2o6A0e56YExeIIz0FRzsKcuJJvjp71ku6WKWk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTduQG9gz8ViZGFD9EWKRl90lQ8hks5rlE-2DLgaJpZM4Mapja&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Un42rnq1Ivq-4IgXYg6_9GcmNHirKZpPSmifbGCD56I&s=7ADQhN1LUxOHVJCVMldpVgax3t2E0jAuMxa0bokSCF8&e=.\n. Please post here\nRgds,\nNeil Cresswell\nOn 5/04/2017, at 9:31 PM, Alex Kretzschmar notifications@github.com<mailto:notifications@github.com> wrote:\nI have some feedback after trying this out, would you prefer a separate issue or post it here?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_666-23issuecomment-2D291806467&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Htd6HhWoDFrFzQzy4Mg2w1b8o5z1-d3wquHv1MpGRsU&s=ku4WLEg8DzHbITfHIl8x7gpbnzZ4jcNLoW6MJfUY7vk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlW75rJqCYdT2VKUmOJ6czYfhbBNyks5rs19pgaJpZM4Mbiyh&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Htd6HhWoDFrFzQzy4Mg2w1b8o5z1-d3wquHv1MpGRsU&s=XHy9dlkHwkwUvQQ5Ki7FT7nEbABGq6UfOoAmAVtIedo&e=.\n. The full template list will be added later, when we create a new flag for portainer (eg --homeuser) as portainer is primarily designed for business use, and many of linuxserver templates are for home use. When setting the future flag, we will enable all linuxserver templates to be shown.\nAgree tooltips are needed, these need to come as part of the json feed from linuxserver.iohttp://linuxserver.io\nRgds,\nNeil Cresswell\nOn 5/04/2017, at 9:44 PM, Alex Kretzschmar notifications@github.com<mailto:notifications@github.com> wrote:\nThinking about user experience, it would be great to see the following things added:\nPGID and PUID are presented to the user with no explanation visible on that page as to their purpose. A tooltip or example value would be helpful here (similar to the tooltip on ownership?).\nNext, I would love to see a slick way of integrating the documentation we provide for each container. Perhaps in a panel between the container creation options and 'available templates'? This would link directly the markdown readme in each containers git repo, we could modify the json to include a link to this file?\nFinally, where are the rest of our containers? I see 20 or so, we have many more than this. Is there a way to enable the full feed please?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_666-23issuecomment-2D291810172&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lBMnyV9OEDO3UCHo88m0VKH0RlhHcMJ7-bELGOVfMpo&s=pIduOPKZ5KXrMuHniIXaeP0OQLEzBRflzbC457qyxG8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlX6KR2acpp7IRZi5nvKJNiVj0nA1ks5rs2JygaJpZM4Mbiyh&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lBMnyV9OEDO3UCHo88m0VKH0RlhHcMJ7-bELGOVfMpo&s=w5a2JCJgjK1Nc_jSk-o9Ebz2SgAWr5n328e_UTJzsRY&e=.\n. It was removed because they do not have swarm stack templates, only standalone containers. We are focussing more on stacks/orchestration.\nIf you require their integration then you need to stay on an older version of Portainer.\nRgds,\nNeil Cresswell\nOn 19/08/2018, at 6:29 AM, Gabriel Arjones notifications@github.com<mailto:notifications@github.com> wrote:\nWas this removed? I can't find LinuxServer.iohttp://LinuxServer.io's template in my portainer instance....\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_666-23issuecomment-2D414077629&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tWQ_T2BBXrcRSbk4n1pEMNk_53LKF9xlpOwNQmyHe04&s=o5cR6ErqvxB5xHhj2UTxCR4cYpBe9suPhcrC-UXxJrQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXPh4GnBTOu9BKr-2Ds5aZGBsj4TxKks5uSFztgaJpZM4Mbiyh&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tWQ_T2BBXrcRSbk4n1pEMNk_53LKF9xlpOwNQmyHe04&s=VwkJ8-iJCQ2xjUU4fTwrQJpT7KZneeDR61tLq6Ktg5M&e=.\n. I think 1.18.0\nRgds,\nNeil Cresswell\nOn 19/08/2018, at 8:17 AM, Gabriel Arjones notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wsMsUVaVRsgcMMOGQJ8oo7IoDjRfPWcUUps-nFSmFag&s=ievtJAHRrAqKqnDnIdyi-cfS45RcMnuw52mEhCbayhQ&e= Which one?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_666-23issuecomment-2D414083799&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wsMsUVaVRsgcMMOGQJ8oo7IoDjRfPWcUUps-nFSmFag&s=KgTG0zMUjJnoifuCrjyXjjPqjOuTH5gi4JONESlNMl0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleZv-5FTYiShmKy50y2B-5F5BxR3N1RAks5uSHZVgaJpZM4Mbiyh&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wsMsUVaVRsgcMMOGQJ8oo7IoDjRfPWcUUps-nFSmFag&s=DNZEGlSPwYAC62MARhytJhbXbWEf0ITc-wXWsCcontg&e=.\n. I actually tend to agree... we should keep the buttons visible, but just \"grey\" them out...\nmuscle memory would have people clicking locations as opposed to buttons, so we need to ensure these remain consistent..\nSent from my iPad\nOn 16/03/2017, at 8:20 AM, OhmegaStar notifications@github.com<mailto:notifications@github.com> wrote:\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FziaaUREAegcKbfCfODDVaX65_zMB3SbAhZys20wJ3Y&s=xeg4sWiC8ZQnvM0-HBuIYFqrUsh4CmrBGbTvNK-0vCA&e= that may well be an option, but if you look at it from a UI consistency point of view, keeping the buttons and disabling those that are not valid, is consistent with the list view, creates a less confusing experience in the ui (options that appear and dissapear) and also communicates future options available for the user.\nThe modal dialog on Remove may well be added anyway (it can be a pain to recreate a container removed by mistake), maybe as a behavior that the user can enable / disable from a preferences page ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_675-23issuecomment-2D286851105&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FziaaUREAegcKbfCfODDVaX65_zMB3SbAhZys20wJ3Y&s=ZAJ7NrOFubLIAviCOLByska3HGwkGH7Ly99HpE6vha4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlT71a53VLcDLSbL-2DWxdzVGOqPAXkks5rmDoGgaJpZM4MdtDX&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FziaaUREAegcKbfCfODDVaX65_zMB3SbAhZys20wJ3Y&s=9-8wAs6I917Yc8229ZzlgxVxphNdn_j-8HzxyiYILtc&e=.\n. Its in progress now... @alapenna can advise more accurate eta\nRgds,\nNeil Cresswell\nOn 1/08/2017, at 7:14 PM, Ahmad Amr notifications@github.com<mailto:notifications@github.com> wrote:\nAny ETA for this? As I am planning to run a portainer demo at QCRI?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_677-23issuecomment-2D319288258&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XqryRPDPmos7ybi77AOA4GME5zvszoPMuu-C6G0W57M&s=5nlX44ntFW1GVmtJEoJ74Lm8C8o3p8f3RpiANwk7Xjs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfPz-5FFjmg8iWbQribsDvOXzugk1yks5sTtBKgaJpZM4MdwUq&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XqryRPDPmos7ybi77AOA4GME5zvszoPMuu-C6G0W57M&s=qyeiif7JP8WEX9WeTWMUZf4Fvb99gs-bQ9oQOyCIaAE&e=.\n. Yes, there is already a flag.. --no-analytics\nHowever, we really really would like users to keep analytics enabled as it helps us understand the number of deployed instances out there..\nsee http://portainer.readthedocs.io/en/stable/configuration.html for details on all flags.\nSent from my iPad\nOn 16/03/2017, at 3:03 PM, Nesim notifications@github.com<mailto:notifications@github.com> wrote:\nHi,\nIt would be nice to let us decide using of Google Analytics, as a optional feature. However, is there a way to disabled it?\nThanks.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_678&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iBw0oMch9jTmWChrL0ZgxW7pP17GMtNWVj4qRjDPpeo&s=-43LOggXmk3QVJl_nMuQZtUWj9TtW-_iWSeaR2eCHzs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlREdQFVBz-2D04VgC37dJvrhJOwbGMks5rmJhVgaJpZM4MewRO&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iBw0oMch9jTmWChrL0ZgxW7pP17GMtNWVj4qRjDPpeo&s=wshVfyvSocz-WKKCMaUbr-_gWLs07TBYorPWilNclIs&e=.\n. i like the idea, but agree, an API call per container is not scalable.\nSent from my iPad\nOn 5/07/2017, at 9:07 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nIt's worth thinking about it, I'm not keen to add something that do an API call for each container available on the host.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_687-23issuecomment-2D313046370&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Gy1eBtdE0yjoqRF-T9djOUNtmj0vTVeCP1vxEG9hi-k&s=L0nYPTwIL2ZEz2d4X2H_XXquimnUdLeYZR62Ig9_xuU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXym82uXE6WyZC1M29tHoU9EDeAbks5sK1IdgaJpZM4Mf5te&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Gy1eBtdE0yjoqRF-T9djOUNtmj0vTVeCP1vxEG9hi-k&s=vkpik_6DLo1E3OtP6gq8XfkzH3c7uWaCkSYXwlYJvik&e=.\n. I think we should rename \"partially running\" to \"scaling\" as that better reflects what is happening. . Remember, we do not use \"hover over\" for any function as we want native touch compatability.. Absolutely, love it. Given portainer could be used exclusively to manage a docker environment, we should be able to record all activities performed.\nOnce added, we will need a way to purge the audit/activity logs after a set period (eg 30 days) and a way to export the logs for compliance purposes.\nRgds,\nNeil Cresswell\nOn 18/03/2017, at 10:04 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nWith the introduction of UAC and multi user management, it is now possible for Portainer to record\nthe activity of the users on the different endpoints and to propose an audit section for the administrators.\nThis will replace the current Docker events view that is only available on Docker standalone endpoints.\nThis Audit section should be available as a global section, not tied to one endpoint, and should allow administrators\nto filter user activity based on username, endpoint, activity type...\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4erXbLpSZuFGMX3TJR-FpKO68BUcBWOyZsR2u4GV_hA&s=LZWeUmUhx469y48Vr9u_AYnszUnGuBvAG7YS_rUMYDE&e= thoughts on that ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_696&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4erXbLpSZuFGMX3TJR-FpKO68BUcBWOyZsR2u4GV_hA&s=BXKOInSP2foFFoWKRz8uCjVkou6qfX0Ml0Pt6XgdfcA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQvXc96aGR4Tqz8xRP6kMA-5FZ8gdpks5rm54DgaJpZM4MhV8U&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4erXbLpSZuFGMX3TJR-FpKO68BUcBWOyZsR2u4GV_hA&s=ABe3pDxUs8yG5LooSpUAVKGylVdU4CYGgCzh20sJ2KA&e=.\n. You can already, you just click the plus for a new entry and then type in a port number manually on the container side (right hand side)\nRgds,\nNeil Cresswell\nOn 19/03/2017, at 7:15 AM, Stefan Dimitrov notifications@github.com<mailto:notifications@github.com> wrote:\nWhen adding a container one can set Port mapping or \"Publish all exposed ports\" but there is no option to expose a port. Sometimes the Dockerfile doesn't specify any exposed ports but it is useful to be able to expose a port at container creation time. In docker-cli this maps to \"--expose\".\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_698&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=AAorBM4TlIe2nScEmz6SshinTiZLbYZPTOhPJg7QZpw&s=te7sn-JbCi8y90nmhgERadyVr_qT2s1GInrWcbiWeDw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWx3eHlfIVu9wSha7gekZr48gIEbks5rnB9FgaJpZM4MhfvK&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=AAorBM4TlIe2nScEmz6SshinTiZLbYZPTOhPJg7QZpw&s=R6E--t-UwYma5KxceBojUvRSw7CWV4uTS6swjzMdYaQ&e=.\n. Correct.\nYou can use portainer to expose ports as defined in the docker file, or to expose new ones using the UI\nRgds,\nNeil Cresswell\nOn 19/03/2017, at 1:10 PM, Steven Gantz notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tsxcnJTSnDELteI7bZvIa2pmMqQR2XqrzWtY99RLbqc&s=ETOO3N6dfsUn8DTINtDOJqMoekzr6jMkEnATVt8HlKY&e= is correct I think, here is a blurb from a docker networking blog post by CenturyLink:\n\"There are several ways to do this (Expose ports): you can expose a port via the --expose flag at runtime, or include an EXPOSE instruction in the Dockerfile. You can also publish ports by using the -p or -P flags in the Docker run string.\"\nThe post explains the differences between the individual types of network setups involving ports: https://www.ctl.io/developers/blog/post/docker-networking-rules/https://urldefense.proofpoint.com/v2/url?u=https-3A__www.ctl.io_developers_blog_post_docker-2Dnetworking-2Drules_&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tsxcnJTSnDELteI7bZvIa2pmMqQR2XqrzWtY99RLbqc&s=rr-KGIi0o7iOAB5KkSWUxMKPL_jM2Ui8suMtacdm378&e=\nI don't believe a random port is mapped aswell, but the port that is specified. See the attached images.\nMapping 9000 -> 9122 and 9002 -> 9123\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_7944136_24077038_8802c6a8-2D0c16-2D11e7-2D90a2-2D26882d4e8abc.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tsxcnJTSnDELteI7bZvIa2pmMqQR2XqrzWtY99RLbqc&s=dNs8oEJD6Mncc4iL17vUc_3wlFdt6jpE9jdpUMUhhro&e=\nExposed on those ports\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_7944136_24077042_a69ed2fa-2D0c16-2D11e7-2D8c9f-2D5454321f8bd0.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tsxcnJTSnDELteI7bZvIa2pmMqQR2XqrzWtY99RLbqc&s=iynHHp8GqCBEO8_RDxdJnda9pUaV1AWxghWnp_5wxY8&e=\nAvailable on specified host port 9122\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_7944136_24077048_c4d92c0c-2D0c16-2D11e7-2D986f-2D334840fb7be1.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tsxcnJTSnDELteI7bZvIa2pmMqQR2XqrzWtY99RLbqc&s=YR8YMsZXydkVaUtfTtUpnoW1Atw8zPiNeKDi0WMSIIg&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_698-23issuecomment-2D287584461&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tsxcnJTSnDELteI7bZvIa2pmMqQR2XqrzWtY99RLbqc&s=K43BG-IHuu1I3LUncehqcCk1rmUaigQfXdjh4aZiPXk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcDgRX4GFksvXXKNZLo0obC-2DzHrAks5rnHJlgaJpZM4MhfvK&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tsxcnJTSnDELteI7bZvIa2pmMqQR2XqrzWtY99RLbqc&s=8fxqHpSGdTfXdTKaq8My9NiMdlC7VypcbIrs9lKSscg&e=.\n. Are you using storidge.comhttp://storidge.com software with Portainer? It auto-recreates Portainer.\nIf not, we do not do anything to ensure portainer restarts, so not sure what you have going on there.\nRgds,\nNeil Cresswell\nOn 26/03/2018, at 7:56 AM, Shinoby1992 notifications@github.com<mailto:notifications@github.com> wrote:\nmaybe a dump question but i cannot stop portainer from running, tried to stop it with docker stop, removing it, removing the portainer service but they get all recreated again\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_704-23issuecomment-2D375994156&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wznriR9SEsUOqg-ixrQpaPAnKVoBRVy8JS7QYcUnOJk&s=RwGQhuJp9y4zKREtERFbxUzmumJwvkiorI38taIzdIQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSpNDZ93ag-5FvkG6f2LQN3CCbrC-5F9ks5th-2Dg9gaJpZM4Mh7yE&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wznriR9SEsUOqg-ixrQpaPAnKVoBRVy8JS7QYcUnOJk&s=XX3gUurLz5oOmikHJV8MVRc5Lil9QIYEppxbALVW-Dw&e=.\n. Remember, docker rmi only deletes on the node you are on... if you have more than one manager, you will need to run that command on each manager\nRgds,\nNeil Cresswell\nOn 26/03/2018, at 8:05 AM, Shinoby1992 notifications@github.com<mailto:notifications@github.com> wrote:\ndocker service create\n--name portainer\n--publish 9000:9000\n--constraint 'node.role == manager'\n--mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock\nportainer/portainer:1.16.2\n-H unix:///var/run/docker.sock\nwhen i go to portainer, its still 1.16.4 i removed the image with docker rm\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_704-23issuecomment-2D375994781&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XmXH-lBUFQ4UN83Af-BVi1sG32VDRkRFl6t28OglhTg&s=ONJVAGHsRA81YGt1M6Q1r4xQTMZIASKVpqzFWPNW_ZU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZs08Kg2BXAo5UHWuggjUGtsC3MXks5th-2DpYgaJpZM4Mh7yE&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XmXH-lBUFQ4UN83Af-BVi1sG32VDRkRFl6t28OglhTg&s=8XMb1JjVN_5QvBMXVSaVvobhsuhb-C709Iwm7hJNA4Y&e=.\n. Also, once in Portainer, press ctrl shift R to force a cache refresh. It might just be a cache issue showing the wrong version.\nRgds,\nNeil Cresswell\nOn 26/03/2018, at 8:05 AM, Shinoby1992 notifications@github.com<mailto:notifications@github.com> wrote:\ndocker service create\n--name portainer\n--publish 9000:9000\n--constraint 'node.role == manager'\n--mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock\nportainer/portainer:1.16.2\n-H unix:///var/run/docker.sock\nwhen i go to portainer, its still 1.16.4 i removed the image with docker rm\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_704-23issuecomment-2D375994781&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XmXH-lBUFQ4UN83Af-BVi1sG32VDRkRFl6t28OglhTg&s=ONJVAGHsRA81YGt1M6Q1r4xQTMZIASKVpqzFWPNW_ZU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZs08Kg2BXAo5UHWuggjUGtsC3MXks5th-2DpYgaJpZM4Mh7yE&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=XmXH-lBUFQ4UN83Af-BVi1sG32VDRkRFl6t28OglhTg&s=8XMb1JjVN_5QvBMXVSaVvobhsuhb-C709Iwm7hJNA4Y&e=.\n. Oh and are you sure you are running latest version of portainer? This behaviour existed in a version from 3 months ago, but was fixed\nRgds,\nNeil Cresswell\nOn 24/03/2017, at 10:25 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@DjTrilogichttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_DjTrilogic&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0PX677lk4Miue8i7umlvuJHYPaAk1o_ur3UUu3qbf80&s=cgG5SbZiivlRWmLG6Woz4c9O5pDTlhcD_p81_fkua6k&e= I just tried and can't reproduce the issue.\nI've used the following template definitions:\n[\n  {\n    \"title\": \"Registry\",\n    \"description\": \"Docker image registry\",\n    \"logo\": \"https://cloudinovasi.id/assets/img/logos/registry.png\",\n    \"image\": \"mylocalimage:latest\",\n    \"ports\": [\n      \"5000/tcp\"\n    ],\n    \"volumes\": [\n    \"/var/lib/registry\"\n    ]\n  }\n]\nThe image mylocalimage:latest is only available on my host locally. The container was created without issue.\nCould you try to reproduce my setup? We'll need to isolate your problem.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_712-23issuecomment-2D288973051&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0PX677lk4Miue8i7umlvuJHYPaAk1o_ur3UUu3qbf80&s=3mIvvbTQA5JG32BeahjyXpFNU071mt91gMAhkISJ_10&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXrSXiRkzSIz3yty5H5DDGDtWgyLks5ro4wCgaJpZM4MlXM5&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0PX677lk4Miue8i7umlvuJHYPaAk1o_ur3UUu3qbf80&s=b866PSbg0zo7Mhc-_4cc99yw5NACJ7xdC6qwMYNbEVM&e=.\n. Love it. Anything we can do to improve security, we should.\nRgds,\nNeil Cresswell\nOn 23/03/2017, at 9:58 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nA script has been created by Docker to check the best-practices/security around deploying containers in production: https://github.com/docker/docker-bench-securityhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_docker_docker-2Dbench-2Dsecurity&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=c0FUr6XOevi_6aTVu929wh42PB6aCQYLpXOuAcEhWCc&s=jA0XJXT_46bDExPbVXAgqkjbGtN7BE_UzJml_BF5njE&e=\nWe could integrate that in Portainer and give the user an easy way to bench the security of their host/cluster.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_713&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=c0FUr6XOevi_6aTVu929wh42PB6aCQYLpXOuAcEhWCc&s=sgeEoQpFuYgYAun8cEdcbGCcW3dFroFyyNqcP7h7xoA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlesP37Egz1NpN9vE0j1KhujK0JAoks5rojQfgaJpZM4MmbTF&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=c0FUr6XOevi_6aTVu929wh42PB6aCQYLpXOuAcEhWCc&s=CUFVGPAnlBfwOOZegaCBPiJ-n5UAUnX7tIAVCca2AgI&e=.\n. As per, accepted only for admins, and only behind a double confirmation prompt.\nRgds,\nNeil Cresswell\nOn 31/05/2017, at 2:42 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nping @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BIR8cjPfH8_xIIqu5mVtQotFs9x7n8NHvPrkCY0l2P4&s=SOFqyYHmD1hjy2qqhPmDOlMIHirPYiPfVahx-gLb7G0&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_714-23issuecomment-2D304900084&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BIR8cjPfH8_xIIqu5mVtQotFs9x7n8NHvPrkCY0l2P4&s=Z9bBBZz35vFMwh1JlLMKh0jurnQnZ_ARA0-ZWH9Oz4Q&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQO1VFpFy-5FwtNVTPVSFwQS7lzs0Aks5r-5FCqpgaJpZM4Mme-2Dy&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BIR8cjPfH8_xIIqu5mVtQotFs9x7n8NHvPrkCY0l2P4&s=N1zTF1NitWAn-51p6r3FL5WqzUmbBs8f2a8MjJ5GCbo&e=.\n. Multiple select and remove is less of a concern as it requires two sequential actions.. meaning it cannot be done by accident.. in contrast, you just need click the \"delete\" button in service view (even worse if using a touch screen and scrolling) to instantly delete the service (as i did by accident).\nSent from my iPad\nOn 29/03/2017, at 8:16 PM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nThis modal have to be in 2 views\n\nservice detail (Delete this service)\nservices list (multiple select and Remove)\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_733-23issuecomment-2D290004295&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZD1jnlnjrJT3L_SI5d9xjuYXBeYnsMIBLx9r9ZMBUv4&s=ECTAV-8PIxrX7ykMaoFPvaQnDFoO-WGzOYEgeefMPQo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleEWjxTjCS27kc2OmFTSTq4j6om2ks5rqgVHgaJpZM4MslZt&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZD1jnlnjrJT3L_SI5d9xjuYXBeYnsMIBLx9r9ZMBUv4&s=b8n6GJK_hX4OW4WvdfsKYIIhBD2JXBH0tZ5xW7EI2xk&e=.\n. You can only change a service, not a container. Once a container is deployed, no changes are possible without redeploying. That is a limitation of Docker.\nRgds,\nNeil Cresswell\nOn 29/03/2017, at 10:21 PM, OhmegaStar notifications@github.com<mailto:notifications@github.com> wrote:\nusing portainer 1.12.2, i'm trying to reconfigure a container previously deoployed, and I'm unable to understand how to do it... (there is no reconfigure button or something similar)\n/OhmegaStar\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_735&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jqx84Movpq3KPlAbGy0FvgQDkf1CP6Sm23hshIR-row&s=QHhuWt1qw3UI0GWBbHh_kPI666UUsDZ3odrUlkAkgI4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSkxQBxoUTTIyZ-2D6swLaVngDbxDeks5rqiJsgaJpZM4Mstxa&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jqx84Movpq3KPlAbGy0FvgQDkf1CP6Sm23hshIR-row&s=4CX8Qnqv3BQbR_Gv3MpAmIMlFov4LFGWGcojVmZn224&e=.\n. Perfect. Please join our slack channel for this support, this is not a bug with Portainer.\nRgds,\nNeil Cresswell\nOn 3/04/2017, at 8:53 PM, Aleksey @soar Smyrnov notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nI can't get Portainer working behind nginx proxy. Help needed, please.\nAlso I've read two opened issues: #485https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_485&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WWNypEsV834FjIXZu4tM7mR4Vt3gxVORbY_Coeq8bds&s=Pz_Xmj_2VdwxPkBTAuScea1VMj0g37XDpbeqEEKGHhM&e= and #348https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_348&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WWNypEsV834FjIXZu4tM7mR4Vt3gxVORbY_Coeq8bds&s=_ro7x8DVYyxYv8UFPalAFs4c3ifwHwix3amVGzhouzE&e= - but these threads didn't help me.\nSteps to reproduce the issue\nI should note - without proxy same container works perfectly. I see all my services and all looks like right.\nMy own configuration\nAll my docker swarm services are hidden behing nginx proxy, it does additional basic authorization, white-listing, etc. So I have configuration, which is tested and works with anything (my services with websockets, Jenkins Web UI, PHPMyAdmin, Kibana, etc). So first thing that I did - just copied my configuraion:\nmap $http_upgrade $connection_upgrade {\n    ''                      'close';\n    default                 'upgrade';\n}\nserver {\n    listen 80;\n    server_name portainer1.example.comhttp://portainer1.example.com;\n    gzip off;\nlocation / {\n    set $upstream \"portainer:80\";\n    proxy_pass http://$upstream;\n\n    proxy_redirect off;\n    proxy_buffering off;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto $scheme;\n    proxy_set_header X-Request-Id $request_id;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection $connection_upgrade;\n}\n\n}\nWith this configuration I see login page, can login and all assets looks right. But I've got error, which is discussed here: persistent connection closed.\n[default]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_30570_24601308_080beac2-2D1861-2D11e7-2D8d2e-2D1a604b40abc2.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WWNypEsV834FjIXZu4tM7mR4Vt3gxVORbY_Coeq8bds&s=zKBPRk-irqqjgZl0q9jGt5LEucDVC4piWR_fQVmqMCA&e=\nConfiguration from FAQ\nSo, imagine that I have too curved hands. So I take configuration from your FAQ:\nserver {\n    listen 80;\n    server_name portainer2.example.comhttp://portainer2.example.com;\n    gzip off;\nlocation /portainer/ {\n    set $upstream \"portainer:80\";\n    proxy_http_version 1.1;\n    proxy_set_header Connection \"\";\n    proxy_pass http://$upstream/;\n}\n\nlocation /portainer/api/websocket/ {\n    set $upstream \"portainer:80\";\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_http_version 1.1;\n    proxy_pass http://$upstream/api/websocket/;\n}\n\n}\nNow when I open /portainer URL - I see strange page behavior. Looks like any assets URL show index page, and app not working:\n[default]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_30570_24601508_d80a22ac-2D1861-2D11e7-2D93d1-2D0a60c63e4f75.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WWNypEsV834FjIXZu4tM7mR4Vt3gxVORbY_Coeq8bds&s=ZVScGWsfhjSlfKun6ZWdw6SQ54tKNCrLCN5Rc_kkBxc&e=\nConfiguration from FAQ without appending anything to URL\nI've also tried remove additional URI prefix:\nserver {\n    listen 80;\n    server_name portainer3.example.comhttp://portainer3.example.com;\n    gzip off;\nlocation / {\n    set $upstream \"portainer:80\";\n    proxy_http_version 1.1;\n    proxy_set_header Connection \"\";\n    proxy_pass http://$upstream/;\n}\n\nlocation /api/websocket/ {\n    set $upstream \"portainer:80\";\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_http_version 1.1;\n    proxy_pass http://$upstream/api/websocket/;\n}\n\n}\nStill same effect:\n[default]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_30570_24601627_4b27a674-2D1862-2D11e7-2D98b5-2D5c7c591dabae.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WWNypEsV834FjIXZu4tM7mR4Vt3gxVORbY_Coeq8bds&s=5SC43Upcb5qjx10SHcHeD6nnYL84K6pXHISOS-YVST8&e=\nTechnical details\n\nPortainer version: 1.12.2\nPortainer Docker image tag (latest/arm/windows...): latest\nTarget Docker version (the host/cluster you manage):\n\nClient:\n Version:      17.03.0-ce\n API version:  1.26\n Go version:   go1.7.5\n Git commit:   60ccb22\n Built:        Thu Feb 23 10:53:29 2017\n OS/Arch:      linux/amd64\nServer:\n Version:      17.03.0-ce\n API version:  1.26 (minimum version 1.12)\n Go version:   go1.7.5\n Git commit:   60ccb22\n Built:        Thu Feb 23 10:53:29 2017\n OS/Arch:      linux/amd64\n Experimental: false\n\nTarget Swarm version (if applicable): native docker swarm mode\nPlatform (windows/linux): Linux, Docker under Debian Jessie\nBrowser: Mozilla Firefox 52.0.2 and Opera 44.0.2510.857\nNginx: 1.11.12 built over official nginx:latest image\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_754&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WWNypEsV834FjIXZu4tM7mR4Vt3gxVORbY_Coeq8bds&s=2tXOfbMR7iJ3LYwEwu8Ll_ObrXv3g1sqUoNC0WsrM3U&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcOuRBMhu8Kp138pxPvJEoWqQu2Iks5rsLOZgaJpZM4MxQTS&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WWNypEsV834FjIXZu4tM7mR4Vt3gxVORbY_Coeq8bds&s=-J74QEiQilMZvPR67qhLuwSDkXtIuz2i5QEpNjY7Zpo&e=.\n. Remember, if you are using NFS with Docker volumes, you MUST have \"root squash\u201d enabled on your NFS backend.\n. I have tried to use NFS before without the backend server having root squash enabled and i got all sorts of strange issues...\nDepends on your actual config tho (is the docker daemon running as root user?)\nRgds,\nNeil Cresswell\nOn 13/03/2018, at 6:46 AM, Carlos Silva notifications@github.com<mailto:notifications@github.com> wrote:\nRemember, if you are using NFS with Docker volumes, you MUST have \"root squash\u201d enabled on your NFS backend.\n\"MUST\" ? For services running as root on the container?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_768-23issuecomment-2D372499237&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0wyCOKfGJCibXIWG_N01hkVz3cbPglBUrLw7Pb3kRVM&s=u6l-exrNE8pjqOFCAEn7CBpuDRERKInfdvnyXFBSQD4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQB4RV6pTAIxxCvojxtubXgH-5FDQJks5tdwjIgaJpZM4M2K-2Df&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0wyCOKfGJCibXIWG_N01hkVz3cbPglBUrLw7Pb3kRVM&s=PC8JWRrKa_7MYSAZV_gGs2j3wg3v6g9yLOG-5ORl41w&e=.\n. OK, well all i know is that for my NFS deployments to work (i am mounting as a volume on the host using fstab and then using local-persist driver to use within Docker), then i needed rootsquash on the backend.\nN\nOn 13/03/2018, at 1:15 PM, Carlos Silva notifications@github.com<mailto:notifications@github.com> wrote:\nDepends on your actual config tho (is the docker daemon running as root user?)\nYeah, dockerd is running as root.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_768-23issuecomment-2D372504225&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lwcEhnJWNz8wGUX9o8O5K8vpFHk5b18b_InPIJuXwDA&s=xR90AR9HChnZ5q9NC2mQNPMJ2HpwTNGlOgoyIp_4X3E&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSt30jeXR1Bznial-5F7-5FNYSroSvO0ks5tdw-2DegaJpZM4M2K-2Df&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lwcEhnJWNz8wGUX9o8O5K8vpFHk5b18b_InPIJuXwDA&s=1yjdt7KAYEu97LRuNnX1X7tingAirQunF1i0X22zqMY&e=.\n. Dont forget that users are not exclusively using swarmmode, many use a combo of services and old fashion containers, so we still need support both\nRgds,\nNeil Cresswell\nOn 2/08/2017, at 9:54 AM, Ben Simpson notifications@github.com<mailto:notifications@github.com> wrote:\nAbsolutely right @deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Pz0JQ2-hGdZk2waSqgRxU96fNfcY422fMtUaXOanDl4&s=RnMpn_RqWhd7S1Fl7Y-Vh3Zk2Hd0uhIZPSVkbBTWUU0&e=.\nIn reality portainer should probably do away with the container view entirely in swarm mode and provide a task list and access to the container functionality through the tasks instead (where possible, endpoint related).\nFrom the docker api documentation, tasks section:\nA task is a container running on a swarm. It is the atomic scheduling unit of swarm.\nRight now being able to see which tasks(containers) are running on which node is supported by the Docker HTTP API but not by Portainer.\nI'm thinking about a world pre and post #461https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Pz0JQ2-hGdZk2waSqgRxU96fNfcY422fMtUaXOanDl4&s=9dSWAyDa1wBUPsnOiCAgRwH6Zsv0ai8PbPHfWq3L57I&e=. However, there's a strong argument (imho) for not implementing #461https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Pz0JQ2-hGdZk2waSqgRxU96fNfcY422fMtUaXOanDl4&s=9dSWAyDa1wBUPsnOiCAgRwH6Zsv0ai8PbPHfWq3L57I&e= now because it's not supported by the Docker HTTP API.\nIn a pre #461https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Pz0JQ2-hGdZk2waSqgRxU96fNfcY422fMtUaXOanDl4&s=9dSWAyDa1wBUPsnOiCAgRwH6Zsv0ai8PbPHfWq3L57I&e= world it seems consistent (with the evolution of docker), if confusing, to have a tasks view and a containers view. Although I think there should only be a tasks view that then provides you access to container functionality where possible.\nIn a post #461https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Pz0JQ2-hGdZk2waSqgRxU96fNfcY422fMtUaXOanDl4&s=9dSWAyDa1wBUPsnOiCAgRwH6Zsv0ai8PbPHfWq3L57I&e= world I believe it would be wrong to have a task view and an aggregated containers view as they contain the same information and one of them is definitely redundant in swarm mode.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_797-23issuecomment-2D319508283&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Pz0JQ2-hGdZk2waSqgRxU96fNfcY422fMtUaXOanDl4&s=xlAsBWiooaUK3Q8AT4RW9X8N7OBz_Df4NNwUS3GYGmg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlf0rw15ns-5FAyubUQtEtGV23rh7O9ks5sT56RgaJpZM4M8YFP&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Pz0JQ2-hGdZk2waSqgRxU96fNfcY422fMtUaXOanDl4&s=85SltTN-b9AX2rHkZAYoC8Tz_KEoB9G4ZiS4csetUbg&e=.\n. oh that would be awesome if possible.. +100\nSent from my iPad\nOn 13/04/2017, at 8:45 PM, Abdessamad Benslimane notifications@github.com<mailto:notifications@github.com> wrote:\nHello,\nNow that endpoints are handled, is-it possible to redirect to \"EndPointIP:Port\" instead of \"0.0.0.0:Port\" in the container view. (Without having to alter the daemon configuration as explained Herehttps://urldefense.proofpoint.com/v2/url?u=http-3A__portainer.readthedocs.io_en_stable_faq.html-23exposed-2Dports-2Din-2Dthe-2Dcontainer-2Dview-2Dredirects-2Dme-2Dto-2D0-2D0-2D0-2D0-2Dwhat-2Dcan-2Di-2Ddo&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eItKEBd7dXE60hUP5Kz2EbQ98amZ6A1WFWjq4VQq6jw&s=GvWM_NKL-V-dtiMB1U15ax38lxX2zRPVlGD06kRWoQ0&e=) ?\nThanks\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_799&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eItKEBd7dXE60hUP5Kz2EbQ98amZ6A1WFWjq4VQq6jw&s=3SFg6GSPlfXXZG3IuMhWxkpZZxJxJE5vBQIG5WPtrLE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZu1oUYJM6aSGd7Zjj0-2D74Fo5B8eks5rveCPgaJpZM4M8avH&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=eItKEBd7dXE60hUP5Kz2EbQ98amZ6A1WFWjq4VQq6jw&s=LTFYRgLpRRl_U-booyb5Vk3qpBS6g85E6dy3M7Yr2Pk&e=.\n. I agree that this makes sense and should be how we go ahead\nRgds,\nNeil Cresswell\nOn 26/04/2017, at 9:52 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nAfter a small discuss with @WTFKr0https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_WTFKr0&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lbRMbCkW5O1TjL7l1ZdiQ5pA7Srm1nzzVc0HVU4Lsjg&s=a_MrPyyDMfIkx1mgGe5FI0z6vxvTA5uqAFU3QFfK2fw&e=:\n\n\nI think that a lot of users are using Portainer to manage local instances so it would not make sense to disable the default link (0.0.0.0 being the default value returned by Docker)\n\n\nIt could be quite hard to determine the IP address used by the endpoint (some cases with Docker running on multiple IPs, Portainer with NAT setup & port forwarding...)\n\n\nOne idea might be to give the user the ability to specify the IP used for the redirection as an optional endpoint parameter.\nBeing optional, this field would default to the value returned by the Docker API if not specified. Any administrator user would be able to set a value for this field by going to the endpoint edition view. Once specified, it would automatically be used by Portainer to create redirection links.\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lbRMbCkW5O1TjL7l1ZdiQ5pA7Srm1nzzVc0HVU4Lsjg&s=8_BlgcNHNKPWez5p_Wg_P3JIuqIjnMHH8fnm5bkWnKo&e= what do you think about this? @DjTrilogichttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_DjTrilogic&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lbRMbCkW5O1TjL7l1ZdiQ5pA7Srm1nzzVc0HVU4Lsjg&s=9VvxoTmTVradjLaLr61N3LPBYTEqqrf23GbQ2frVzTA&e= I'd like your feedback too.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_799-23issuecomment-2D297326035&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lbRMbCkW5O1TjL7l1ZdiQ5pA7Srm1nzzVc0HVU4Lsjg&s=IqNSk6G8XM1-swBGzdDjZ91qlc-gZGScdnWOgvTzgmg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlet75jccMSkynbT1l1mws19W5mM1ks5rzxPDgaJpZM4M8avH&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lbRMbCkW5O1TjL7l1ZdiQ5pA7Srm1nzzVc0HVU4Lsjg&s=yKR_LslEI7JbTqxraZRgNdgcA9WbRp1gvlIDIZjNHEY&e=.\n. Yes, that is correct.\nWhen user clicks remove/delete, they are asked \"delete volume too\" if they select yes, then rm -v is used by portainer, if they select  no, then rm is used\nRgds,\nNeil Cresswell\nOn 19/04/2017, at 9:52 PM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nTo be clear, you're talking about the \"-v\" option of docker rm ?\nhttps://docs.docker.com/engine/reference/commandline/rm/#remove-a-container-and-its-volumeshttps://urldefense.proofpoint.com/v2/url?u=https-3A__docs.docker.com_engine_reference_commandline_rm_-23remove-2Da-2Dcontainer-2Dand-2Dits-2Dvolumes&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qSPtQULikW-qKM7J9AW7l29Iad3pTBCqsj8Os8Q-QbI&s=PcgBFHuwoTZEiOcKyRIcWjH9oq7LuAwmBpVhhL-4E_Q&e=\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_808-23issuecomment-2D295194641&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qSPtQULikW-qKM7J9AW7l29Iad3pTBCqsj8Os8Q-QbI&s=pfhd-8TuYFe33BpMAZzEUZJLoOwbWwdRdwNPe3i3WQY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQHF-2DGc11LwytzNNZSu595e0T32Xks5rxdlggaJpZM4NBcgf&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qSPtQULikW-qKM7J9AW7l29Iad3pTBCqsj8Os8Q-QbI&s=0n4rdHpwfLFNxVAzJ0LAvNMGMqEFVMIAPvr-s_07BmY&e=.\n. Perfect\nRgds,\nNeil Cresswell\nOn 21/04/2017, at 9:20 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI could picture something like this:\n[portainer 1]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_5485061_25271438_73fa6192-2D2684-2D11e7-2D936d-2Dbe2038079ab7.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7OdCresI3SEqQIFjzAZGcG8wU5ZUrmNOmKY8FF6HhPE&s=7C0kgZ37gar1HR8ue-PrJKGhrmnejjaRTeG4OUK1JEQ&e=\nWhat do you think @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7OdCresI3SEqQIFjzAZGcG8wU5ZUrmNOmKY8FF6HhPE&s=Al5D1xOJv-h31yH661OgZSPswg1PDA8KQbJTJSCnAWE&e= ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_808-23issuecomment-2D296139619&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7OdCresI3SEqQIFjzAZGcG8wU5ZUrmNOmKY8FF6HhPE&s=emwP01z1DhnJW_IDBbrmQLOl4lj08dKL4J1c6FzQHPg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrley80KcmbTwe-5FdN8M0aRwPHMi8TVks5ryHTpgaJpZM4NBcgf&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7OdCresI3SEqQIFjzAZGcG8wU5ZUrmNOmKY8FF6HhPE&s=9jN04Twykt2pPpI0Q9zG9bjG5FN3NR7Ig5hcmjsSCds&e=.\n. Agree anthony.\nRgds,\nNeil Cresswell\nOn 27/04/2017, at 2:35 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nHonestly, adding the interactive: true|false field support to template is super easy to do. I think that using a workaround as specified by @WTFKr0https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_WTFKr0&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=AsPK64PJvZ_zBxO32-BiCEZhJ1-72GUwo_dbaXWO6sg&s=r-i___rGe_29gKARb-RjtYkGdriocNzFCs9_5v3wEtE&e= is counter-intuitive.\nI understand that some people would like to run interactive containers as templates, they should be able to do so without having to figure out a workaround to keep their container running.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_819-23issuecomment-2D297428271&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=AsPK64PJvZ_zBxO32-BiCEZhJ1-72GUwo_dbaXWO6sg&s=byQ_HjbiVwh7FmnP3ay9IONiMxihawgqnvUa33peHps&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZb1VkhinhLTRUX1tbtFK1GsHUcpks5rz1YhgaJpZM4NHIhd&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=AsPK64PJvZ_zBxO32-BiCEZhJ1-72GUwo_dbaXWO6sg&s=ZguSCOUuR6JQQrb2eahQ4ewA7NEyrnbE2fXgvsDZVZc&e=.\n. I prefer the first one with the tick box. That takes an accurate action (ticking the box) before a destructive change occurs. Clicking buttons does not give enough secondary protection.\nRgds,\nNeil Cresswell\nOn 27/04/2017, at 12:18 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nWIP :\nI open this PR to discuss how to manage the modal\nHere I just use a bootbox prompt with a checkbox form\nI just change the container view, I'll adapt containers view after discuss\n\nYou can view, comment on, or merge this pull request online at:\nhttps://github.com/portainer/portainer/pull/824https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uPyiGl_9LD_nx6HnTunh0mZzSO23F2oL32ZGbptYdEQ&s=KrDR_X5kuOsgYCYgYQCEpVHL2pAf3HMHbYYMT6KMqIQ&e=\nCommit Summary\n\nTest with bootstraptoggle\nTest with bootbox prompt\nRemove unused var\n\nFile Changes\n\nM app/components/container/containerController.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824_files-23diff-2D0&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uPyiGl_9LD_nx6HnTunh0mZzSO23F2oL32ZGbptYdEQ&s=Ay-0lkDqI3AFagiSF92Tjvs0BXi_ms3tKIAV4RWyFOE&e= (24)\nM app/rest/container.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824_files-23diff-2D1&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uPyiGl_9LD_nx6HnTunh0mZzSO23F2oL32ZGbptYdEQ&s=xTffFz1yvlUAUij5wcGOSUy8uEJQ76R-gB0Fq7GJvms&e= (2)\nM app/services/modalService.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824_files-23diff-2D2&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uPyiGl_9LD_nx6HnTunh0mZzSO23F2oL32ZGbptYdEQ&s=3lfxaQG2yRjmxIibNISaZpuGLkEkNQwmLQTerLwwJWk&e= (45)\n\nPatch Links:\n\nhttps://github.com/portainer/portainer/pull/824.patchhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824.patch&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uPyiGl_9LD_nx6HnTunh0mZzSO23F2oL32ZGbptYdEQ&s=s0qDeWmCuDtHV-Hjd1_kxINe-Hkmxn-7a03F-bD8LpQ&e=\nhttps://github.com/portainer/portainer/pull/824.diffhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824.diff&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uPyiGl_9LD_nx6HnTunh0mZzSO23F2oL32ZGbptYdEQ&s=ii6wRAGljBTXjZ2MgFgfrrsCgJmK1YunbgllZ3IJEAI&e=\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uPyiGl_9LD_nx6HnTunh0mZzSO23F2oL32ZGbptYdEQ&s=KrDR_X5kuOsgYCYgYQCEpVHL2pAf3HMHbYYMT6KMqIQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaRqsxbLY12B9MTCILVvldVwaT1eks5rzzX4gaJpZM4NIxut&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uPyiGl_9LD_nx6HnTunh0mZzSO23F2oL32ZGbptYdEQ&s=1T-Io0c11mk1hlzzSyu_0XCxVJ87U61mUXd6FmmHmmE&e=.\n. Awesome\nRgds,\nNeil Cresswell\nOn 27/04/2017, at 8:47 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nWith css3 switch :\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_15888093_25456030_0892f5fc-2D2ad2-2D11e7-2D9a91-2D09337bbf1979.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DMlzNgTdVIvS2TRUjg4J-_1ddl-VX2Uas8UkwXaMPtw&s=gpUP4AYQOB_fm0YNISr1w6_fi1iRH0L09Xc_eTvRhes&e=\nBut the tooltip doesn't work in that modal :/\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824-23issuecomment-2D297536279&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DMlzNgTdVIvS2TRUjg4J-_1ddl-VX2Uas8UkwXaMPtw&s=n3ZNlNB04ekDYAi9O37xWJmk6Xvs_fcPo4b_qn0eVuc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSRbfMT3eusrIH41GIfi2jMkNfK6ks5rz61JgaJpZM4NIxut&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DMlzNgTdVIvS2TRUjg4J-_1ddl-VX2Uas8UkwXaMPtw&s=Mk8l3W6T_50kaqmtWriZJmldCMJGHq2svPKUEhrPxCI&e=.\n. Isnt this just removing non-persistent volumes?\nRgds,\nNeil Cresswell\nOn 27/04/2017, at 8:17 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nAlso I think that we should give more information about this, as it won't remove ALL the associated volumes. I will only remove volumes where the mapping was created without a name binding (which is currently not available in Portainer, even templates are using name binding).\nSee https://docs.docker.com/engine/reference/commandline/rm/#remove-a-container-and-selectively-remove-volumeshttps://urldefense.proofpoint.com/v2/url?u=https-3A__docs.docker.com_engine_reference_commandline_rm_-23remove-2Da-2Dcontainer-2Dand-2Dselectively-2Dremove-2Dvolumes&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yivI1pIEqvavA_4DMx8Um2U_3HWz6CWvh_FnyO3ZY3o&s=KPaSJrLnSJotJc49xPUfVM6lOivkoTa0ezvU23uINzs&e=\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824-23issuecomment-2D297645854&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yivI1pIEqvavA_4DMx8Um2U_3HWz6CWvh_FnyO3ZY3o&s=J3f91s0QsuMqOPTgKA3W879lAeLDNw8qpXi6JQiBzwg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXI5YEdRbOoxcmH6e3f0azc4GO7Mks5r0E8XgaJpZM4NIxut&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yivI1pIEqvavA_4DMx8Um2U_3HWz6CWvh_FnyO3ZY3o&s=srtD__JuNL64DjxwPUnaH7Jncrb658WhCIRAMJ5jBB0&e=.\n. Love it\nRgds,\nNeil Cresswell\nOn 28/04/2017, at 8:48 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nRe-aligned Modal :\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_15888093_25503679_8063ee82-2D2b9b-2D11e7-2D8488-2Df15985aa4979.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=o9aTknYjq2o8BMA74jnL94Gxkv4_OoqGwPaAy6qlG_4&s=vxXzdPqc5Q55ky1j6TVj-oqXTW08b0CfDipYvdw5rg4&e=\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824-23issuecomment-2D297834815&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=o9aTknYjq2o8BMA74jnL94Gxkv4_OoqGwPaAy6qlG_4&s=ahHeSRoNGsNIIvXO9h9NT58_2k3Qq8gQBxcTh1ohC-o&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlY6kmOlaClMeh3K7q2DXs8p1L6W9ks5r0P7vgaJpZM4NIxut&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=o9aTknYjq2o8BMA74jnL94Gxkv4_OoqGwPaAy6qlG_4&s=gYKjp7geFZSOJbQT3gg7xh4BCsw2tFamQ3QJmrq54SQ&e=.\n. All i want is for it to delete \"system generated, non persistent\" volumes (volumes that are created automatically when a container is started). It should not delete volumes that people have created manually within Portainer and assigned to a container.\nSent from my iPad\nOn 1/05/2017, at 9:05 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nTechnical review is OK. I'm currently testing this... one thing that I dislike is that it's saying 'Automatically clean associated volumes' whereas it will only clean non-named volumes. And non-named volumes cannot be created via Portainer at the moment.\nWe could go further by removing ALL the associated volumes (named or non-named), I think that'd be more useful than the the current state of the feature (rm -v) but probably more dangerous.\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UUritzKREOCPDfHZqlS5pKopljCZXVGeAPeGXN8j054&s=HEG0SkoNdchkF2rXJMI7AdoSvZxOBAsX7UVj0RZuqlM&e= what do you think about this?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824-23issuecomment-2D298308250&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UUritzKREOCPDfHZqlS5pKopljCZXVGeAPeGXN8j054&s=2O2_xU1KYLL_hPBxsymoUh1Gtf064OIme2ulivaPYwU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbQA9f-2Dodzv6mIz35twNOtrDXCNpks5r1aBagaJpZM4NIxut&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UUritzKREOCPDfHZqlS5pKopljCZXVGeAPeGXN8j054&s=hs8QMT81_PSr_ewH-6NO25D4LdmjTe_IDo0YGaJMln4&e=.\n. However, please change the description \"Automatically clean associated volumes\" to \"Automatically remove non-persistent volumes\"\nSent from my iPad\nOn 1/05/2017, at 9:10 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rl35Wojt7LKaEvO_Vbuj2_rcCfde_SKDBQaFvcZ5Bjg&s=e6ZxeA22enlokKMEMzheZSijPwo1laucB4LjX8CsdDo&e= ok then it's currently working that way, I'll merge the PR.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_824-23issuecomment-2D298308700&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rl35Wojt7LKaEvO_Vbuj2_rcCfde_SKDBQaFvcZ5Bjg&s=m4uxZwDdr7jmzX23tGbYu92eXe5oRqz8m58Ppf2HIb8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXytQvs9nbh-5FbHg8buv5Y-2DCVIc0cks5r1aF1gaJpZM4NIxut&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rl35Wojt7LKaEvO_Vbuj2_rcCfde_SKDBQaFvcZ5Bjg&s=brd6HYkDqbGbDJAWDfvtLQI19fFWgp70ejHh_Hx5DzU&e=.\n. Public IP\nRgds,\nNeil Cresswell\nOn 27/04/2017, at 8:42 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI do not really like the name of the field, not explicit enough.\n[portainer 4]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_5485061_25475167_2645d4c0-2D2b36-2D11e7-2D923d-2D830ada312106.png&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iGtrA4P5OPjXFxBAp5V5hTxBdTMYKkv3y5L4QyaldDk&s=CopLqG5WMhm2D_wZCCEYkESaUJUvb-U0cluoT6gGK50&e=\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iGtrA4P5OPjXFxBAp5V5hTxBdTMYKkv3y5L4QyaldDk&s=CblONor13MeZpVTkkDWE6dXihOZdfSN9CoOvjrizyHc&e= any idea on the field name and tooltip value?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_826-23issuecomment-2D297651616&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iGtrA4P5OPjXFxBAp5V5hTxBdTMYKkv3y5L4QyaldDk&s=YXt-9F0wS-te_4CDiPq82g_HY1fdEXFDA8WEzWPCeHE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbX6k6P5HF9iZDb6XeA58hX10NdVks5r0FUEgaJpZM4NJe8D&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iGtrA4P5OPjXFxBAp5V5hTxBdTMYKkv3y5L4QyaldDk&s=snIbjKyyOI0tqp3C2gmUiCN7wBenYwjFWBmIWWH55rw&e=.\n. Can you share your daemon.conf file? We had a user with a similar issue in the past that was caused by them installing docker to a non-standard location.\nRgds,\nNeil Cresswell\nOn 29/04/2017, at 10:42 PM, xsjiang notifications@github.com<mailto:notifications@github.com> wrote:\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VaasyasZjE5ExjJMAkkevTCIw1QFSr_FmORxPGt41QA&s=6vuRSeCsraC2aO_2XHgZD9CrDP7629vGumQGDOCm4iA&e= Yes, i have tried, same problem.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_831-23issuecomment-2D298161361&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VaasyasZjE5ExjJMAkkevTCIw1QFSr_FmORxPGt41QA&s=LXQmqQ1-zUTSeX0Mb9yYOHxpOUP92QMbR3DdwLlLzB0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXB0sDp-2DDdpv8iRZe85JKLqMJWWkks5r0xQagaJpZM4NMKoN&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VaasyasZjE5ExjJMAkkevTCIw1QFSr_FmORxPGt41QA&s=VFrYcpTsbH0TTcrpHiMXkERARX51id0srLJ506I9Dv8&e=.\n. Hi Marcelo,\nWe dont currently support connecting to an authenticated registry.\nRgds,\nNeil Cresswell\nOn 4/05/2017, at 11:08 AM, marcelo-ochoa notifications@github.com<mailto:notifications@github.com> wrote:\nI have a private registry using official image:\nhttps://hub.docker.com/_/registry/https://urldefense.proofpoint.com/v2/url?u=https-3A__hub.docker.com_-5F_registry_&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Q15Lyi4byIbNsqC2G1fR63xCVZnh2b_aZWKLKv_osNU&s=VlzvrMcfW6whttTMKC3ajJL9lGo18sV8MYM8ifrjJKk&e=\nwhich support protocol V2.\nIf I pull an image using command line, for example:\n$ docker pull registry.exa.unicen.edu.ar:443/oracle/apex-5.0.4_en:11.2.0.2-xehttp://registry.exa.unicen.edu.ar:443/oracle/apex-5.0.4_en:11.2.0.2-xe\nIt works.\nWhen I try to do the same on the Portainer interface (Menu images) providing as parameter:\nName: oracle/apex-5.0.4_en:11.2.0.2-xe\nRegistry: registry.exa.unicen.edu.ar:443http://registry.exa.unicen.edu.ar:443\nit doesn't work, error is:\nError: image oracle/apex-5.0.4_en:11.2.0.2-xe not found\nat the server side (NGinx reverse proxy) error.log shows:\nopen() \"/var/www/registry/v1/_ping\nGET /v1/repositories/oracle/apex-5.0.4_en/images\nwhich means that the pull command is trying to use a V1 repository version.\nIs there a support for V2 repositories?\nHow do I put user/password authentication options?\nMy private repository is also protected with username/password authentication as is described in:\nhttps://docs.docker.com/registry/recipes/nginx/https://urldefense.proofpoint.com/v2/url?u=https-3A__docs.docker.com_registry_recipes_nginx_-23setting-2Dthings-2Dup&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Q15Lyi4byIbNsqC2G1fR63xCVZnh2b_aZWKLKv_osNU&s=kczOdTNY9pryxAX9XAQ9MXVwoNbARV7VEl3Mgsjn8tY&e=\nMany thanks in advance, Marcelo.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_839&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Q15Lyi4byIbNsqC2G1fR63xCVZnh2b_aZWKLKv_osNU&s=iQaEq7gMzLnes6Mev87gzCtJg8n7R3n-S79U0VG0IaI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQw5sNNI1Uqe954BtGNzfLA5jbKAks5r2QjqgaJpZM4NQD2H&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Q15Lyi4byIbNsqC2G1fR63xCVZnh2b_aZWKLKv_osNU&s=gwPohsniqX42sbeFBz7_OQMl0_tZNujl8ffakD1rIBk&e=.\n. We need Anthony to validate that, but I have only ever tested with registry v1.\nWhen anthony wakes up in 10 hours, he will respond.\nRgds,\nNeil Cresswell\nOn 4/05/2017, at 11:14 AM, marcelo-ochoa notifications@github.com<mailto:notifications@github.com> wrote:\nNeil:\nThanks a lot for your quick reply!!\nActually I can manage authentication based on IP address from the Portainer instance.\nBut what happen with the V1/V2 support in URLs.\nBest regards, Marcelo.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_839-23issuecomment-2D299061371&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZAVzQZJO84PAgp4NHZ3kjMKiV58EB3UIX6xsKlnh_cA&s=uZjbI1IJ5adFIYUovYhnpRuABb_209NYMUNzfOK9HGE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaq1tB85FpRTb5-2D9frUc6CYS6Z-5Frks5r2QpAgaJpZM4NQD2H&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZAVzQZJO84PAgp4NHZ3kjMKiV58EB3UIX6xsKlnh_cA&s=7Ckd7tfpeKg-wibg0_AzrZYr_N6Mp4nF2E5edP0TpY8&e=.\n. The image tag? Every image has a tag?\nRgds,\nNeil Cresswell\nOn 9/05/2017, at 7:59 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=S2zcgX9qNJqZAv0wbzEp_LGUlbZB0P-IKrfduTPDU-w&s=66u3mGlzNZnuzD3s__Se--ncMfnXCXYVjSG3vA1dJ0Y&e= I'm still not sure about this one, I agree that the ID is quite useless so if we remove it what would be the link to the image-details ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_844-23issuecomment-2D300154818&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=S2zcgX9qNJqZAv0wbzEp_LGUlbZB0P-IKrfduTPDU-w&s=Pwl2qY-gTkyo8p9nwX5B5zLH2Le7qGNaCbrAuaqHaPM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlahNVqwMOt671yCPhlNO4-5FW8g17Eks5r4GNDgaJpZM4NSnbJ&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=S2zcgX9qNJqZAv0wbzEp_LGUlbZB0P-IKrfduTPDU-w&s=_FqZC0ZiDURsiGCPMhBX5iidyY3N0hvuc9YUtb_fTCc&e=.\n. OK, well how about to start with, we just add a few (dropdown select box). This way we extend portainer to support these extra runtimes, but we dont have to parse to find the API... rather, we support 4-5 now.\ninitially, i want the --cap-add option to enable support for NetSil.\nSent from my iPad\nOn 9/05/2017, at 7:58 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nThis will be quite tricky to implement as it requires to parse the options and to find the equivalent API setting for the parsed option. I think we already had this discussion in another issue but I was not able to find it. I'll flag this as an evolution.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_846-23issuecomment-2D300154560&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=11e4Bo63ugs8-IfCnt0ruV-lEmc-PqLBC4lTARGb690&s=b0Gf92WLLu1JHGOOkgi0ABHwn0dvoWcg4R96zA0MieE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUdeDbnQ9XvzGZTa-2DrTLvsB2-2D6t-5Fks5r4GMDgaJpZM4NTbi6&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=11e4Bo63ugs8-IfCnt0ruV-lEmc-PqLBC4lTARGb690&s=rcgOWFImiK5iHd4CzsUBqYXsB4vryiib4IUrpL4Xols&e=.\n. Thanks for the report; this is not something we will add as this should be covered by a container healthcheck within the container itself. Healthchecks ensure the service is functional before reporting to docker that the container is healthy.\nRgds,\nNeil Cresswell\nOn 1/12/2018, at 9:04 AM, micw notifications@github.com<mailto:notifications@github.com> wrote:\nHello,\nI found this issue when searching for a solution for the following problem:\nI run a dockerized printer server (cups) on my homeserver along with portainer. I use restart-policy=always to have this container running. The problem is that if the usb printer is offline when the system reboots, the container fails to start due to missing device.\nThis is not covered by docker's restart policy because the policy assumes that the container was successfully launched. It should by covered by the management tool (portainer in this case).\nOther management tools like kubernetes and cattle actually try to re-init containers that fail to start.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_847-23issuecomment-2D443323435&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=fr6qDRnK-8SvtY3xMMno2CGt8UnRTFF0a-WZ0Wb8q40&s=NZElcKlQMStf_4Gj-Ry0Mq178xEfxfKibWiRMX5zQ4o&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVZsxN5sR1gVS2xXr4F4XtxlLV2cks5u0Y9dgaJpZM4NUYuM&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=fr6qDRnK-8SvtY3xMMno2CGt8UnRTFF0a-WZ0Wb8q40&s=XYeX6USg5bZUjQ30SvW2AkqG0_jflZH_tqDhrtVdPqs&e=.\n. Seems like a great idea, and any idea that enhances security is a no-brainer to be added\nRgds,\nNeil Cresswell\nOn 12/05/2017, at 7:49 AM, Matt Park notifications@github.com<mailto:notifications@github.com> wrote:\nCorrect. Works for me and seems to be the \"right\" way for SELinux.\nAnd if we can file a feature request to get that added to the volume mapper in the webUI next to rw/ro, we'd be all set.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_849-23issuecomment-2D300954394&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LjgzIP_4QAj56V4-2Xx6XA-1PGuoLkpSBWxjOv9wDsI&s=8TOHHaAJGIqB8guE5uapNbJjQycebDL9NZDOkZwg1zI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleQi0YYFHZAwsU-5FQOHgmIwZK9O6Cks5r46yUgaJpZM4NXAS3&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LjgzIP_4QAj56V4-2Xx6XA-1PGuoLkpSBWxjOv9wDsI&s=1zyrApTMJ1xYkijPIjc5vbeVebdHogs6W-f_le7Bk9I&e=.\n. This is not currently possible from within portainer. Expect it in future version\nRgds,\nNeil Cresswell\nOn 11/05/2017, at 7:02 PM, wilfredmifsud42 notifications@github.com<mailto:notifications@github.com> wrote:\nHi Guys,\nCan someone guide me, how to set the CPU Limit and the Memory limit used per container when spinning new containers / services.\nSince there are no resources options when creating it from the GUI. I know that from docker you can pass -m 256m in the docker CLI, however its not possible from Portainer.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_850&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UoMwmVbqtImj1YfwK5lbwX8ej_omVnLtvL2gPcsgdZc&s=aI59KDPsSiOFQg95bRcsTKFlGEQm_uPSUINyPAbN56c&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaGJ2r6oWXmpxzcevhgKXlSmGFZNks5r4vjYgaJpZM4NX5bs&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UoMwmVbqtImj1YfwK5lbwX8ej_omVnLtvL2gPcsgdZc&s=_vRikZA5HHkjiC0vS_9w2XWDZGqBTTSWY_YywYgL3Mw&e=.\n. Within 6 weeks\nRgds,\nNeil Cresswell\nOn 11/05/2017, at 7:26 PM, wilfredmifsud42 notifications@github.com<mailto:notifications@github.com> wrote:\nAny ETA on the new feature?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_850-23issuecomment-2D300773378&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Egyf_OrICRA1BWkq-5Lpl2ZP9M04_tVZ6qHll5zVWYw&s=ZsM6Qy4KGnkYegXlyt0iJaSLD4reYeqfx0W2yezCWAo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleDskl5SXBhGdOpQKWIannGqvjuLks5r4v5dgaJpZM4NX5bs&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Egyf_OrICRA1BWkq-5Lpl2ZP9M04_tVZ6qHll5zVWYw&s=sQmhICJpa6A1yeTthFDYc82AQNpyL5YHvylpS4P1o3A&e=.\n. Not at the moment. You would need to start the container from the CLI. Any container started from CLI can still be monitored/managed by portainer\nRgds,\nNeil Cresswell\nOn 11/05/2017, at 7:20 PM, wilfredmifsud42 notifications@github.com<mailto:notifications@github.com> wrote:\nThanks for your reply. Is there some kind of workaround however?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_850-23issuecomment-2D300772249&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PUIG10_FVANgwcI6nVmFJ0T--1L_ywLuLVxC42ZJgs8&s=edtRA4RyublIt-LVk_2_xtZiGTLfpjQgCWKklvhVqjY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYNdwDrR20XRT1PnccJlvMwcqYjZks5r4v0HgaJpZM4NX5bs&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PUIG10_FVANgwcI6nVmFJ0T--1L_ywLuLVxC42ZJgs8&s=gHgJlyGM_z-3wc9mX06yKvmymJgHlJs5eru7dnGnBWg&e=.\n. this is currently not possible with Swarmmode... we are developing a work around until the Docker API supports this. expect an update soon\nSent from my iPad\nOn 12/05/2017, at 2:09 PM, wilfredmifsud42 notifications@github.com<mailto:notifications@github.com> wrote:\nOff Topic, but I need your help guys, By any chance.\nIf I have 2 nodes, with 2 separate dockers (master & worker).\nFrom the master entertainer I am only able to see the containers within the local docker. Is there a way how I can see the workers' containers ?\nPlease point me in the right direction. (I was fiddling around with Docker Endpoints port 2375).\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_850-23issuecomment-2D301001369&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0VKkiT_8L2YAvOdE9aja9Q5d08TwhNQ-ffJWpoy9xaU&s=FUB8x5FL_3UOLdR7vWIA2TPZC6QWbPPIhp3YHvlW9wM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQh0qnNh9L1HNsDh3IKBzipM9omtks5r5AWfgaJpZM4NX5bs&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0VKkiT_8L2YAvOdE9aja9Q5d08TwhNQ-ffJWpoy9xaU&s=PCxfi0aRbPkGRkRGv27ToEznnsoJl6FLbAz9htTLrMU&e=.\n. I have done some functional testing on this... i think the popup displayed when editing a container \"same name\" needs to be enhanced. \"We are about to recreate the container with the new settings, this means deleting the old container in the process\". Can we please add a popup message whenever recreate or duplicate buttons are pressed?\n\"This feature is currently experimental, please use with caution\"\nThen if they click ok, it continues to the message modul as is shown already\nRgds,\nNeil Cresswell\nOn 6/08/2017, at 8:37 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@WTFKr0https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_wtfkr0&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0M03CN0M-Nd5Tz92SpRhS3JIf1DFfAQ4EdRorZYhYU4&s=joYeZDA7-vcFG_AvKGfs7hXTNh4Eu9PiCdFFsj6Yrbo&e= could you have a look at @theit8514https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_theit8514&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0M03CN0M-Nd5Tz92SpRhS3JIf1DFfAQ4EdRorZYhYU4&s=PBRTNVa7ZqL07Y_VW0lGKi0aASLh6Ty0CGAqQfQJKL4&e= 's issues?\n@querplishttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_querplis&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0M03CN0M-Nd5Tz92SpRhS3JIf1DFfAQ4EdRorZYhYU4&s=Q0PbRSDMwnWUxuDzE68uoW8-JmSFRZms83QXA8NH8Ms&e=\nany chanse we can get a health check here too?\nDo you mean the ability to set a health-check during container creation? If that's the case, this would be a feature request, mind opening an issue for that?\ni am looking on that \"start conainer\" button and it doesnt realy describe what gona happen.\n\ndo we just stick a new network without restart of container?\ndo we realy make a clone, clone with some fresh changes?\ndo we apply changes and restart/relaunch container?\n\nIndeed, we should make this clearer. When using the edition capability, the current container will always be removed and then a new one will be created (tho this is explained in the modal box displayed after clicking on the start button).\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_855-23issuecomment-2D320493675&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0M03CN0M-Nd5Tz92SpRhS3JIf1DFfAQ4EdRorZYhYU4&s=M4HNEQL5CoCkzAD_BzT1hPDLnYxg8A-I2ZcULbdhJBk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfzi-5FIODUm53Y47riojYz7ozJsrlks5sVXtWgaJpZM4NbFtp&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0M03CN0M-Nd5Tz92SpRhS3JIf1DFfAQ4EdRorZYhYU4&s=3yWxNTL32Dx7iu-pvdRap3TFxovIMi0ty1DT6ue8Gy8&e=.\n. I just invited you\nRgds,\nNeil Cresswell\nOn 16/05/2017, at 7:43 PM, Thijs van Ulden notifications@github.com<mailto:notifications@github.com> wrote:\nI need some help setting up portainer using TLS but your Slack channel seems to be broken..\n[screenshot from 2017-05-16 09-41-49]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_3355823_26094940_0f50cf14-2D3a1c-2D11e7-2D8833-2Da316dd75e4dd.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kpTAMnt96hxbSUHPtDQaJQQ6z2ollUCwvxh0HDnQvLw&s=oSDFd-qI6cPquHqtpYMh3ykXe3YXZ8R4LX-u6wzrn_k&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_858&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kpTAMnt96hxbSUHPtDQaJQQ6z2ollUCwvxh0HDnQvLw&s=kB5kgvAlbjCKuRth1JDRJugRDPm0CexphECoI1DqwSk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQayJjagrP0EpC2JLTrymd8HrNmYks5r6VOzgaJpZM4NcG-5FR&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kpTAMnt96hxbSUHPtDQaJQQ6z2ollUCwvxh0HDnQvLw&s=hqoFQwmqhdT0cpwt-4ExgpuyHlfIbUC6oVRszGdjrgM&e=.\n. Agree..\nRgds,\nNeil Cresswell\nOn 19/01/2018, at 8:53 AM, Greg Toth notifications@github.com<mailto:notifications@github.com> wrote:\nI tried out the \"Update the service\" button in the latest dev build and noticed that it doesn't pull the latest image -- it uses the same image @sha256https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_sha256&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RMb-dae9IBB8oy9MCiyF2kFTh7lY0BUQvrH5SzluqKU&s=Ku1Q2YucQE-bZ63GKLCMNvpQ4mN-AXlk6iU_3B8Sr0k&e= as when the service was originally created. I think the OP request (and mine as well) is to be able to easily replace all the running containers in a service with the latest image pulled from the repo, i.e. the same effect as deleting the @sha256https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_sha256&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RMb-dae9IBB8oy9MCiyF2kFTh7lY0BUQvrH5SzluqKU&s=Ku1Q2YucQE-bZ63GKLCMNvpQ4mN-AXlk6iU_3B8Sr0k&e=:xxxxxx portion in the Image edit box and doing Apply changes.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_859-23issuecomment-2D358762273&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RMb-dae9IBB8oy9MCiyF2kFTh7lY0BUQvrH5SzluqKU&s=X7q21mlrzsRh47SRSSD6t36uT5UQ3gwp45z5_gyMkxE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlY8DJS-5FYzB0ktOOC89bB-5Fsuru6lTks5tL6EjgaJpZM4NcQL1&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RMb-dae9IBB8oy9MCiyF2kFTh7lY0BUQvrH5SzluqKU&s=YGuxy3ZOPXOM3ussyQ3ZLQnPq6lUMPk6pW3YPw-mRgw&e=.\n. Keep it. Might be containers that should be hidden even from admins\nRgds,\nNeil Cresswell\nOn 20/05/2017, at 6:07 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nHi @bramhaaghttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_bramhaag&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=my6QwGPrEVK46pL-WdYpvKjN5fMrcKZV9n5i4zRlcQU&s=Xf5n9wCoaIHVx3WJqWOHRpWxM2a-XSeHI13oxKntLbo&e=\nDoes these containers have specifics labels ? If so you can use the ability to hide containers based on specifics labels, see here: http://portainer.readthedocs.io/en/stable/configuration.html#hiding-specific-containershttps://urldefense.proofpoint.com/v2/url?u=http-3A__portainer.readthedocs.io_en_stable_configuration.html-23hiding-2Dspecific-2Dcontainers&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=my6QwGPrEVK46pL-WdYpvKjN5fMrcKZV9n5i4zRlcQU&s=zl6gbrGyNgA1DLn0w5FlqGxDLtrTcJaTkJWbb-b7MLI&e=\nNote @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=my6QwGPrEVK46pL-WdYpvKjN5fMrcKZV9n5i4zRlcQU&s=EVXpBOdqpw4N86hWMkOWKY6PQcF2Qdm0YqtQibrf9Ms&e=: this feature was planned to be removed with the arrival of the new RBAC and UAC in 1.13, should we keep it?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_865-23issuecomment-2D302772636&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=my6QwGPrEVK46pL-WdYpvKjN5fMrcKZV9n5i4zRlcQU&s=kz-E3SKHXoalGP5x4Jg8SW_-UM-hGahlw-H31_G0_P4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldFFLWviGfZwO-2DKZTWM7UzL3xjcGks5r7dptgaJpZM4NgdJT&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=my6QwGPrEVK46pL-WdYpvKjN5fMrcKZV9n5i4zRlcQU&s=gOftcZufcRuu_SZIiYvh9HElq8gQVngt--gDS6W8ct0&e=.\n. Not yet, thats a limitation of swarmmode... we are working on a way around this.\nYou can add the other nodes as endpoints if you like, but thats kinda ugly..\nRgds,\nNeil Cresswell\nOn 25/05/2017, at 3:21 PM, Steven Tran notifications@github.com<mailto:notifications@github.com> wrote:\nI followed the installation guide and get portainer monitor my swarm mode cluster. There is one small issue which is Portainer only list the images/containers/volumes of the current node that it's running. Is there any way to list entire images/containers/volumes in the swarm mode cluster?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_885&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Q-dXw3hHfOLGif9alCcfsJBFi1U7svl9FQ7k0fF-u1s&s=uLALDGt8Hu65xsQIg8tHEtwlS1UdlVWDCJY5OhVoN-w&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSz4PVCEpDxOvS5ho2wA-2DnUcULktks5r9PPHgaJpZM4Nl6rq&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Q-dXw3hHfOLGif9alCcfsJBFi1U7svl9FQ7k0fF-u1s&s=LPDQQsYgKnnMrrl7JlYWhgIWKWpTA1W04lodxEZr1yc&e=.\n. And if possible, allow adjustments to css.\nIn the same area, we should be able to set defaults, such as registry url's.\nRgds,\nNeil Cresswell\nOn 27/05/2017, at 7:56 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nCreate a new Settings view to allow the configuration of Portainer.\nShould allow to customize the following:\n\nTemplates URL\nLogo\nHidden labels\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_897&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SSzmP-LyK-tjciP4L6W_Takl-lt2Brzf-WycijxUEXk&s=zCNrV045ksGjg2lXLOrtK3IaSPUCkLu_72Wb6XAzxgw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWVTdXMp1WT7iacNrpM4vgHbaXZXks5r99cMgaJpZM4NoRtj&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SSzmP-LyK-tjciP4L6W_Takl-lt2Brzf-WycijxUEXk&s=DpwpATL3N_BX_aHVh_FhlfAFkzkz4fE0m_TGygHfgtw&e=.\n. Now that we have RBAC, i am willing to accept that \"prune\" functions can be introduced, but only for administrators, and only after at least two warning prompts. If portainer is started with --noauth then i dont want the prune functions displayed.\nDo you know if the prune functions are able to return a list of \"to be deleted\" so the admin can review the list before confirming?\nRgds,\nNeil Cresswell\nOn 31/05/2017, at 2:43 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nWe already had some similar feature requests for the equivalent in the images and volumes section but these were judged too dangerous for the end user.\nMaybe only available to an administrator with a confirmation modal as detailed in #714https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_714&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KWXQP7t8gfrTQKuAxC-RYcIX--bmYS5-KId6VynB80I&s=qgl1Pisz7vNRzEs9shShB10MEx20aembz36i7qksbWo&e= ?\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KWXQP7t8gfrTQKuAxC-RYcIX--bmYS5-KId6VynB80I&s=-0skmUtnRGjWQt4BVKC_PZBM-pLlDxusE0dj7kmJeY4&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_904-23issuecomment-2D304900697&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KWXQP7t8gfrTQKuAxC-RYcIX--bmYS5-KId6VynB80I&s=RaRrlETaf-7Mui7Fk9jtILR4guN2nzA5fmrcMXGf5K4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZykaeMxAlON1jo6Bi9yG5lfTOjXks5r-5FCsggaJpZM4Np9XK&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KWXQP7t8gfrTQKuAxC-RYcIX--bmYS5-KId6VynB80I&s=v6pJwdiBiLFGD6uinwSB5B8iXeCzPMyAhJTYsqt-ON4&e=.\n. Ok. So then accept, but only for admins and only behind double confirm.\nRgds,\nNeil Cresswell\nOn 31/05/2017, at 8:06 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nFrom what I can see in the Docker API, there is no 'dry run' method.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_904-23issuecomment-2D304992440&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7uunrI2cVysgB0YmsJeJCnISyvIG0sBw-iDyLRISSec&s=bYhqeBHvb4w-8KLUBcHPAWHMuit6Jlwcjm0dKFoX084&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld9rL1hFIjk7Nd1ayx3cK2ole5xMks5r-5FHaygaJpZM4Np9XK&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7uunrI2cVysgB0YmsJeJCnISyvIG0sBw-iDyLRISSec&s=swJQ455VL3PW6Kn5Uduea05RC30whvqJQfcOzkjAgEw&e=.\n. Selinux? Try the --priviledged flag..\nRgds,\nNeil Cresswell\nOn 3/06/2017, at 3:15 PM, Choon-Chern Lim notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nI'm having problem getting Portainer to work on RHEL 7, which then causes Nginx to fail.\nportainer    | 2017/06/03 03:00:13 mkdir /data/tls: permission denied\nnginx        | 2017/06/03 02:35:50 [emerg] 1#1: host not found in upstream \"portainer\" in /etc/nginx/nginx.conf:94\nnginx        | nginx: [emerg] host not found in upstream \"portainer\" in /etc/nginx/nginx.conf:94\nSteps to reproduce the issue:\nMy configuration (minus Nginx config) looks like this:-\nversion: '2'\nservices:\n  portainer:\n    image: \"portainer/portainer\"\n    ports:\n     - \"9000:9000\"\n    volumes:\n     - portainer:/data\n     - /var/run/docker.sock:/var/run/docker.sock\nvolumes:\n  portainer:\nThis configuration works fine on Mac, but not on RHEL 7.\nTechnical details:\nHere's additional info:-\n$ sudo docker --version\nDocker version 1.12.6, build 96d83a5/1.12.6\n$ sudo docker-compose --version\ndocker-compose version 1.12.0, build b31ff33\n$ lsb_release -a\nLSB Version:    :core-4.1-amd64:core-4.1-noarch\nDistributor ID: RedHatEnterpriseServer\nDescription:    Red Hat Enterprise Linux Server release 7.3 (Maipo)\nRelease:        7.3\nCodename:       Maipo\nThank you.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_912&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BvZBTYl8oeFEnCgh3i2kgWJJpIvw_QSCAoR5ULxeYsM&s=RJMwUeXJPZEAHqfUyvx0MYXZvxcYm2Y1jyRPL6UFrn4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZyJLcrNr8e0nHzi26bLC9jCnGV3ks5sAM-5FkgaJpZM4Nu9OK&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BvZBTYl8oeFEnCgh3i2kgWJJpIvw_QSCAoR5ULxeYsM&s=UHYhle_HVMzyped0Bq94Dfc5wpjX7QkOOe1VWrolUTE&e=.\n. Strange, i tested this with the nimble plugin and it worked fine.\nCan you join us on slack so we can discuss, portainer.io/slackhttp://portainer.io/slack\nRgds,\nNeil Cresswell\nOn 6/06/2017, at 6:42 PM, Taher Vohra notifications@github.com<mailto:notifications@github.com> wrote:\n[screen shot 2017-06-05 at 11 39 17 pm]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_16213958_26816765_3e182f2c-2D4a48-2D11e7-2D80ea-2Dd25ce76ef11a.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JU5Mhmorl9gYw_on_7Au19Z1A7tjoNMFxb9vrIrJhSY&s=URpDonL7zSuaoC63d5Ex_ZznbNe80CGW90sG8_DFR6c&e=\n[screen shot 2017-06-05 at 11 39 04 pm]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_16213958_26816766_3e1a5a86-2D4a48-2D11e7-2D8107-2D85bac773a2d2.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JU5Mhmorl9gYw_on_7Au19Z1A7tjoNMFxb9vrIrJhSY&s=Xvs86T7bp2dt3Q2A2g1dnBOEorz2010xJxlgnzXzNug&e=\n[screen shot 2017-06-05 at 11 38 48 pm]https://urldefense.proofpoint.com/v2/url?u=https-3A__cloud.githubusercontent.com_assets_16213958_26816764_3e15c214-2D4a48-2D11e7-2D95b8-2D61abbcfb37dc.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JU5Mhmorl9gYw_on_7Au19Z1A7tjoNMFxb9vrIrJhSY&s=hrt4WTCiXMbUJquDup0YPfRqdT8Z1jyWTuHvHWQmbhw&e=\nDescription\nDocker doesn't show (nor allows creaation) via managed volume plugins that are installed in docker.\nSteps to reproduce the issue:\nSee screenshots, I have one volume already created via Docker CLI using a plugin called \"purestorage/docker-plugin:1.0\" and it shows up in the volume list. However, the \"Driver\" list in \"Create Volume\" does not show this volume driver name as a selectable option. Also, in the Docker tab, the volume plugin does not show up in the Engine subsection. Screenshots attached better explain what is going on.\n1.\n2.\n3.\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version:\nTarget Docker version (the host/cluster you manage): 17.05\nPlatform (windows/linux): ubuntu\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nTarget Swarm version (if applicable):\nBrowser:\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_917&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JU5Mhmorl9gYw_on_7Au19Z1A7tjoNMFxb9vrIrJhSY&s=KV_bE_bg9cgkf4mvrg5GtVKXrHjl4yoDcvPvOHPLQaA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTDvcv-5Fzu0BH8bJLicvHolbi2Q29ks5sBPTlgaJpZM4Nw65p&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JU5Mhmorl9gYw_on_7Au19Z1A7tjoNMFxb9vrIrJhSY&s=D0M8cPdDKJTj2xUZ2Ym5QD-jW2MtoWguBy0TY0URmUI&e=.\n. Agree. I want to see an audit log showing the actions completed within portainer and by who.\nEvents could be moved into a submenu under either the \"Swarm\" or \"docker\" entries\nRgds,\nNeil Cresswell\nOn 9/06/2017, at 4:17 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nEvents in Portainer will soon be replaced by an audit section. IMO at the moment the events section is pretty useless, I'm not sure that we should add it for Swarm.\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Se6q_vbvlMxPrMZIsdFv8K29fFep9hFAoFOs8LchnmA&s=a3BFd4-nsrQP781iTXAbjBEQjAwWGkMLrPJaBubtNLA&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_920-23issuecomment-2D307153363&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Se6q_vbvlMxPrMZIsdFv8K29fFep9hFAoFOs8LchnmA&s=_0utYRA7WNT524yCrjMwMquh19QvsfuGCP71L7HpuWI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlekZVcQcYuKLwIsJJt9O5fJzEk0Bks5sCB6UgaJpZM4NzZN1&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Se6q_vbvlMxPrMZIsdFv8K29fFep9hFAoFOs8LchnmA&s=r3eKIj34a0SgC1IJIyfDTwF7UvzSa5hOPUoTuUb-G2k&e=.\n. I dont believe volumes are supported over network shares as the overlay driver will not function\nRgds,\nNeil Cresswell\nOn 15/06/2017, at 3:55 PM, Nguyen Khac Trieu notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nPortainer cannot run with Docker volume mapped from network share folder. The following error will occur:\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal 0xc0000005 code=0x0 addr=0x8 pc=0x4eeb3e]\ngoroutine 1 [running]:\ngithub.com/boltdb/bolthttp://github.com/boltdb/bolt.(Bucket).Put(0x0, 0xc042218810, 0xa, 0x10, 0xc042218808, 0x1, 0x8, 0xfffffffffffffffe, 0xc042106cc0)\n        /go/src/github.com/boltdb/bolt/bucket.go:286http://github.com/boltdb/bolt/bucket.go:286 +0x3e\ngithub.com/portainer/portainer/bolthttp://github.com/portainer/portainer/bolt.(VersionService).StoreDBVersion.func1(0xc04210cb60, 0x8dc3b8, 0xc04210cb60)\n        /go/src/github.com/portainer/portainer/bolt/version_service.go:52http://github.com/portainer/portainer/bolt/version_service.go:52 +0x160\ngithub.com/boltdb/bolthttp://github.com/boltdb/bolt.(DB).Update(0xc042106b40, 0xc042187d00, 0x0, 0x0)\n        /go/src/github.com/boltdb/bolt/db.go:598http://github.com/boltdb/bolt/db.go:598 +0xa6\ngithub.com/portainer/portainer/bolthttp://github.com/portainer/portainer/bolt.(VersionService).StoreDBVersion(0xc04204a348, 0x2, 0x0, 0x0)\n        /go/src/github.com/portainer/portainer/bolt/version_service.go:57http://github.com/portainer/portainer/bolt/version_service.go:57 +0x62\ngithub.com/portainer/portainer/bolthttp://github.com/portainer/portainer/bolt.(*Store).MigrateData(0xc04202fb00, 0x0, 0x0)\n        /go/src/github.com/portainer/portainer/bolt/datastore.go:126http://github.com/portainer/portainer/bolt/datastore.go:126 +0x2d1\nmain.initStore(0x8be4e1, 0x7, 0xad1cc0)\n        /src/cmd/portainer/main.go:49 +0x108\nmain.main()\n        /src/cmd/portainer/main.go:135 +0x92\nSteps to reproduce the issue:\n\nCreate a symlink to network share folder (in VMWare Workstation) mklink /D C:\\data \"\\vmware-host\\Shared Folders\\Data\"\nRun Portainer with volume mount to that folder docker run -p 9000:9000 -v C:/data:C:/data portainer/portainer\n  3.\n\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version:\nTarget Docker version (the host/cluster you manage): 17.03.1-ee-3\nPlatform: Windows\nCommand used to start Portainer: docker run -p 9000:9000 -v C:/data:C:/data portainer/portainer\nMaybe it related to this issue boltdb/bolt#348https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_boltdb_bolt_issues_348&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=x1dJQv9v47OFECHvMp6LrBDACO2-5hLPx41hBnubq-A&s=xkQYYtv0ZcuLHU5AjlH1LXmq7aXs2rY02rAaar_7NS8&e=\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_928&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=x1dJQv9v47OFECHvMp6LrBDACO2-5hLPx41hBnubq-A&s=U9BCBIy6bSDXvQLCj0Vtt8r2e4vA3CK8hUTIHDDiNs0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcqghQm3aTnCb8DAnrmXyG0f8H-5Fdks5sEKs4gaJpZM4N6s9g&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=x1dJQv9v47OFECHvMp6LrBDACO2-5hLPx41hBnubq-A&s=Ur8_Gq9GW05pMCiI5fHBJcDK8C9i1zFNKTXlzDA6Wy0&e=.\n. https://forums.docker.com/t/how-to-access-a-mapped-network-folder-or-unc-path-inside-a-windows-container/22861/2\nRgds,\nNeil Cresswell\nOn 15/06/2017, at 4:01 PM, Nguyen Khac Trieu notifications@github.com<mailto:notifications@github.com> wrote:\nSound bab but thank you! Hope something news later.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_928-23issuecomment-2D308622331&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yA7zd6fgNCity6l9YGODMIV9v5wQMv39OuCfQoaHUgg&s=BEVSXMXnrQczB8-uNk8Duv4OJx1ngo1mhBSYQqhaYFA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZuijw183XY58EfII-2DRWl1G-2DWt6nks5sEKyPgaJpZM4N6s9g&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yA7zd6fgNCity6l9YGODMIV9v5wQMv39OuCfQoaHUgg&s=2K5tS6yv9dWkex6z0t4sHHT1FSbEtM7H6Y3QQirT7JE&e=.\n. For now, nothing portainer can do there. Need docker to evolve first.\nRgds,\nNeil Cresswell\nOn 15/06/2017, at 4:17 PM, Nguyen Khac Trieu notifications@github.com<mailto:notifications@github.com> wrote:\nAnyway we can't use network share with Windows Container so i think we should close this issue now since it won't fix in the near future?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_928-23issuecomment-2D308624188&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v0DDJwn8ZLEmOMyrSs9Eng-lgXOe_sUbUhU_9cZgGK4&s=emqUwiv_nG_TUPeg5JwdjyvhGCJI4ZuP2NovFXAo85U&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlatnCHsNqkrryr-2DPePFz-2D2M4sr6sks5sELBogaJpZM4N6s9g&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v0DDJwn8ZLEmOMyrSs9Eng-lgXOe_sUbUhU_9cZgGK4&s=6ZT9VJObzeTU6jJjy0HIESTAWr4IBP8U9k_Uz7bZ4zM&e=.\n. Yes, but that will be a seperate plugin and not part of the core Portainer code. That gives us flexibility for release updates without having to update the core portainer image each time.\nRgds,\nNeil Cresswell\nOn 11/07/2017, at 6:07 PM, timiil notifications@github.com<mailto:notifications@github.com> wrote:\nDo we have any plan to view all the images inside our private registry ?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_930-23issuecomment-2D314338022&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LyzXPi7LRtTZkDMQb5I6PRUqklLGXFeWa-_5Qfmbkp4&s=_g2ygylaBuT3Q8tit-DfY9P6aWMREE_itFFaU7SWUDk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfK-2DUyD7Rr0ZupSbEqgLp5tNXaZnks5sMxEXgaJpZM4N7qB4&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LyzXPi7LRtTZkDMQb5I6PRUqklLGXFeWa-_5Qfmbkp4&s=JRR8dfKaUNgOFVkrarsrY14KtYgbGeZOXtN5z3oBrcw&e=.\n. Thats on our roadmap, not for containers though, as they should not be stateful, and you can already create an image from a container and push that image to a repo.\nWe are looking to find a way to export a persistent volume as an archive.\nN\nRgds,\nNeil Cresswell\nOn 17/06/2017, at 9:51 PM, Muhammet TUR\u015eAK notifications@github.com<mailto:notifications@github.com> wrote:\nIt would be very if Portainer provides \"Backup/Restore\" or \"Export/Import\" functionality for both containers and images\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_935&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vClbt91PvBh_tGph086WIuo0Y3nScZi3d5W8SF7yleM&s=QjQh7aFowQnHmjk2nbpMsTdnPESKOiFWGNSIgVR_6PM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlR7j68WSv3vqeLC4HK1VNUAIKU7bks5sE6F-2DgaJpZM4N9LtF&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vClbt91PvBh_tGph086WIuo0Y3nScZi3d5W8SF7yleM&s=nFKkIqrVbmJJSpeIHAGmaQyeu8cKTMRudiNy2m3Ccy8&e=.\n. Wow i didnt know that you could export images, thought it was only volumes..\nWe totally need to add this feature\nRgds,\nNeil Cresswell\nOn 13/12/2017, at 5:52 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\n@strawgatehttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_strawgate&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KBk8WPbr2sug9AVHhbbi9j8hQhXRYdurN3p-QAc6Qyc&s=mtTicdiEM-dXbCdukcP601r_OVdvSoBewl15kKcZBHQ&e= , you can export multiple images at once with:\ndocker image save image:1 image:2 image:3 | gzip -c > backup.tgz\nand then import them:\ndocker load < backup.tgz\nI understand that it'd be easier to have this as a feature in Portainer. But, meanwhile, the only 'hard' part is to type the names of all the images you want to export.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_935-23issuecomment-2D351281993&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KBk8WPbr2sug9AVHhbbi9j8hQhXRYdurN3p-QAc6Qyc&s=W_HTNoUqC0fGegO8ILwWN6IgHZA2fRo0YLG7RayroIA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXVlvljiera39fe0JPaNjRX2gdJVks5s-5F1gNgaJpZM4N9LtF&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KBk8WPbr2sug9AVHhbbi9j8hQhXRYdurN3p-QAc6Qyc&s=VGVdxff5_Bt97nsZ99oZ7oROTfqnUlojIdiXON5ng2k&e=.\n. We should add the docker hub image to our templates\nGianarb/orbiter\nRgds,\nNeil Cresswell\nOn 18/06/2018, at 1:24 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@pascalandyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_pascalandy&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=IvMwKhFhHQqEUfOvVGRtQUsDkGyhjvjg49ZhpVecgVc&s=79C2xnjSGfoMuTZU9jx6QTSCq2FUwmf7urI4aRThgcs&e= I believe this one takes care of austocaling Swarm services: https://github.com/gianarb/orbiterhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_gianarb_orbiter&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=IvMwKhFhHQqEUfOvVGRtQUsDkGyhjvjg49ZhpVecgVc&s=xWrfgleMHGWDYI_F9Ob8rQ-HWWbeNfWNJbi62PsI2Rg&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_943-23issuecomment-2D397878878&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=IvMwKhFhHQqEUfOvVGRtQUsDkGyhjvjg49ZhpVecgVc&s=-ivHJgk-jQQlKm5WrQVg44tLXChyPF_-7BOz8bXPqeg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld6GH2ifdrBHPX8ofuB452AhW5rKks5t9liDgaJpZM4OADFP&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=IvMwKhFhHQqEUfOvVGRtQUsDkGyhjvjg49ZhpVecgVc&s=pFYdF3759ScUWnlV_-GeRYnsM3p3QF61S_JQQJpSYXQ&e=.\n. We had originally intended to deprecate the command line options in favour of the UI, however, in order to accomodate ci/cd tools that might use Portainer as an endpoint, i think i would prefer to keep the CLI options alive. If we do decide to continue to deprecate, then we will switch them to env variables that can be passed from CLI.\nCc @alapenna\nRgds,\nNeil Cresswell\n\nOn 26/06/2017, at 7:05 AM, Robby Grossman notifications@github.com wrote:\nI think this is a feature request, but it may just be a documentation issue.\nI see that --templates is deprecated. I'd like to be able to set custom templates at container launch, rather than have to authenticate in via web afterwards.\nMy use case is to provide portainer as an embeded service in a larger application, to launch a handful of specialized Docker apps on demand. A custom --templates piece is critical, as that is how I tell portainer how to launch my applications.\nI could document to the user how to login and set a custom template URL, but my goal is to make things super easy for the end user, so I'd rather they not have to concern themselves with the internals of portainer (this is an audience that will likely not know what a \"container\" is).\nAssuming this is not presently possible, what do you think of adding an ENV variable or command line argument that allows an initial configuration to be set on launch?\nLastly, I realize I may be pushing the limits of portainer's intended use case. If so, feel free to just say that. :) It just has the potential to save me a lot of time building a mini-scheduler, so I'm trying to make it work.\n(I'd be interested in configuring a custom logo this way as well, but that is not nearly as important).\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. What command line did you use to start portainer?\n\nDid you follow the quick start at portainer.readthedocs.iohttp://portainer.readthedocs.io ? If you are using docker sock, you need to start portainer with the -v flag and setting\nRgds,\nNeil Cresswell\nOn 26/06/2017, at 8:43 AM, Alexroge notifications@github.com<mailto:notifications@github.com> wrote:\nHello,\nWhen I install Portainer, and i'm connect to IP:9000, i enter my passwd and i take /var/run/docker.sock:/var/run/docker.sock and when i'm connect, i have a error:\ninvalid character 'p' after top-level value and i havent my container and other..\nSorry for my english\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_953&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=q7Ur3kUNlC-MYL6wOATioDLV4iv1Szgj9nuDcOU1qdU&s=sAVkf1e8fhtU3eJ32vESK4o-uBCdohi5t4QBh9lJIQU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWZEKUivHnacOLbV3NojJuNKgvi4ks5sHsZTgaJpZM4OEtvo&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=q7Ur3kUNlC-MYL6wOATioDLV4iv1Szgj9nuDcOU1qdU&s=sXyVE7mu_GW2-JgCwdU31jzwwaMDNfAzR1WunsELWlc&e=.\n. Strange, that should work...\nHave you tried with --privileged flag that is needed when SElinux is running on the host?\nare you using firefox browser?\nRgds,\nNeil Cresswell\nOn 26/06/2017, at 8:51 AM, Alexroge notifications@github.com<mailto:notifications@github.com> wrote:\ndocker run -d -p 9000:9000 --name port -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_953-23issuecomment-2D310927437&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3e1aXwanMAJsEMqFZoEAfQVnSkNafJ4Qh4sD2X0xoT0&s=j6V6TZH-h-ApRVWCJWK3V8b5zXg93QXPH_vaZbvB8ho&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZCqPLdpMiWSBeSyDpwj-5Fxkp0sdKks5sHshKgaJpZM4OEtvo&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3e1aXwanMAJsEMqFZoEAfQVnSkNafJ4Qh4sD2X0xoT0&s=kfZKGvVqmwMll5oQmdbyQgUEq__0F4-VSrcv6DU0EuY&e=.\n. Can you look at developer view and see if any errors?\nAre you running a reverse proxy in front of Portainer, or are you just accessing Portainer IP directly?\nRgds,\nNeil Cresswell\nOn 26/06/2017, at 8:58 AM, Alexroge notifications@github.com<mailto:notifications@github.com> wrote:\nSame problem with --priviliged flag\nNo i'm use Chrome\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_953-23issuecomment-2D310927889&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rNCbMQi46Jj4c7GgEXjbgd2oTmzkrh5n02NNB0hLyi0&s=ZyJ13HQrFJOm-qrRou5ShTQu0erH7Zalxot4Kfa3wkU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXP8whuyYPWG23oQmvdWHonDb4c9ks5sHsn1gaJpZM4OEtvo&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rNCbMQi46Jj4c7GgEXjbgd2oTmzkrh5n02NNB0hLyi0&s=6aFjLzFxJX9ndRZ_Xx34SaNjlIHv24jfUXEAlqPw7lU&e=.\n. We dont use any hover over in Portainer as we want native touch support, but the left 25, right 25 makes perfect sense...\nRgds,\nNeil Cresswell\nOn 10/07/2017, at 7:34 AM, MwC-Trexx notifications@github.com<mailto:notifications@github.com> wrote:\nYour solution is close, but due to the length of the path it is truncating things to where they aren't usable.\nAll my volumes show the exact same thing:\n/share/CACHEDEV1_DATA/Container/container-station...\nA possible solution might be a \"hover over\" that shows full path length. Another option might be showing say Left (25) + \"...\" + right (25). That way you get the initial path and the final path.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_956-23issuecomment-2D313949427&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rCEetK8z93kZtGjm9MRGPZCbXIslnzTAmQabRhJISNM&s=LfzSdn_lHSM9VFZUKBOfath0SS6Wgu0ochQw0vXaDsQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSlyxgHfVc0cQ-5Fg8N8LQnxx1nsCjks5sMSs5gaJpZM4OFpPQ&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rCEetK8z93kZtGjm9MRGPZCbXIslnzTAmQabRhJISNM&s=ONR8Zr7iYhKgZJyj_-U3L4__BrgOuw92dDx_tTdns-A&e=.\n. The current implementation only supports compose v2, and the work required to support compose v3 is large.\nWithout people willing to help fund (through donations or paid support) the development of that feature, it will be delayed until next year..\nRgds,\nNeil Cresswell\nOn 6/09/2017, at 7:52 AM, Budwise notifications@github.com<mailto:notifications@github.com> wrote:\nConstraining to v2 docker-compose eliminates the possibility of using stacks on Windows. The version of docker doesn't support compose v2. Is there any possibility to use v3?\nERROR: client version 1.22 is too old. Minimum supported API version is 1.24, please upgrade your client to a newer version\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_959-23issuecomment-2D327284407&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=9m8AxrW2KxGu6LzJEWJxrIGhVhUxzld2WzYtJWuMj1k&s=KtJd7yCvs1kmZa0iHMIaPNlVVSPAmjI5gISSHdpkiow&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfHzhdIgpmfsKAhXVoI4Fxnid7lJks5sfaZ-2DgaJpZM4OHvly&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=9m8AxrW2KxGu6LzJEWJxrIGhVhUxzld2WzYtJWuMj1k&s=9nUrG2aezRfxsICXKUhNRCAJAg1QPb8Y76yZFEG4d_Y&e=.\n. do you need to add the --privileged flag? not sure if CentOS defaults to SELinux enabled or not...\nSent from my iPad\nOn 29/06/2017, at 9:53 AM, talisto notifications@github.com<mailto:notifications@github.com> wrote:\nWhen attempting to launch a new service with a volume mapping via the web UI, the volume can't be selected, because the \"select a volume\" drop-down box shows a list of options that all say\n{{ vol.Name|truncate:30}}.\nScreenshot:\n[screenshot_87]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_446129_27661680-2D10a09550-2D5c10-2D11e7-2D8e68-2Daef39d8b7968.png&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=xB6lQiL8p5cGmX9slzUv86EVgRsRASwsvFgSgaQKERI&s=9TNwfU3mUTeipEetc7RhvvVuW43nkNkOjjXszX6jry4&e=\nSteps to reproduce the issue:\n\nLogin to UI\nClick \"Services\"\nClick \"Add Service\"\nClick \"Volumes\"\nClick \"Map Additional Volume\"\nClick \"Select a volume\"\n\nTechnical details:\n\nPortainer version: 1.13.3\nTarget Docker version (the host/cluster you manage): 17.03.1-ce\nPlatform (windows/linux): Linux, CentOS 7.3.1611\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer): docker service create --name portainer --publish 9000:9000 --constraint 'node.role == manager' --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=/data,dst=/data portainer/portainer -H unix:///var/run/docker.sock\nTarget Swarm version (if applicable): 17.03.1-ce\nBrowser: Chrome 58.0.3029.110 (64-bit), MacOS 10.12.5\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_962&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=xB6lQiL8p5cGmX9slzUv86EVgRsRASwsvFgSgaQKERI&s=e2I6NXmYTgL3a_0nEpgiGaONmJ_dnIBFkLsCaCKEUi4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcJ4zjGsfk93WR3c9xOWT1xvr-5FFrks5sIss8gaJpZM4OIlPa&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=xB6lQiL8p5cGmX9slzUv86EVgRsRASwsvFgSgaQKERI&s=DDmr7KF5jzhSBLiJJibhNvmz7pV6atP4j7ekByOzVfg&e=.\n. You are correct.. i can replicate this... it seems to be a bug introduced in the latest version. We will fix ASAP.\ncc @alapenna\nNeil\nSent from my iPad\nOn 29/06/2017, at 1:11 PM, talisto notifications@github.com<mailto:notifications@github.com> wrote:\nI do have SELinux enabled, but docker-ce installs a package called container-selinux which loads applicable policies for docker. The audit log doesn't show any issues with SELinux, and I still see the same issue even if I set SELinux to permissive. I don't think it's an SELinux issue.\nPortainer can definitely see all my volumes, because they show up in the volume list when I click \"Volumes\" in the sidebar. They're just not being labeled correctly in the drop-down list in the Services section.\nI think this is just a templating bug.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_962-23issuecomment-2D311834284&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iI3VWlCU2CVaFENbhoqYOj1hPMZbtB1GCqFaHv-vJfI&s=cktCSRASTqswtLg4REegirQZQAyy5qqdsosE6WYC1dA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSuk3lPFDig-5F-5FkVO2x6XaoV0kxYHks5sIvmsgaJpZM4OIlPa&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iI3VWlCU2CVaFENbhoqYOj1hPMZbtB1GCqFaHv-vJfI&s=keKGSFJRsiMuUMOXx1x2mKErc88NIamAphIbl-lAnXQ&e=.\n. This already exists... just go into settings and you can see the ability to hide containers based on tags.\nRgds,\nNeil Cresswell\nOn 30/06/2017, at 6:27 AM, Andrew Bagshaw notifications@github.com<mailto:notifications@github.com> wrote:\nI'm frequently performing operations on all containers on my system (i.e. restart or kill) but I don't want these operations to apply to the portainer container which is running on the same system. When portainer is running on a separate system I suppose this wouldn't be a problem as it wouldn't show up in the list of containers but when running on the same system it does show up and I have to deselect it after selecting all each time to prevent the operation I am performing to also be applied to the portainer container.\nMight it be helpful to have some option to hide the portainer container and only show the other containers to make these kinds of bulk operations easier?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_968&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=xOcFrh8MFQtEMauCm8F1zLfOsHA8zQkMjXTgrzQCwWE&s=H_BcEkNTzaypB_3yS6a9y4k8mMMsiha-HBODzJoVWM0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZOfBt1z-5Fwf-2Dgo4aBFOl3wioeNrQks5sI-2DyfgaJpZM4OJshA&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=xOcFrh8MFQtEMauCm8F1zLfOsHA8zQkMjXTgrzQCwWE&s=a4fiNlpQiBt86MWC_Iz-8ikw_qecXBd4OBZuZIhspkU&e=.\n. What version of Docker are you running?\nRgds,\nNeil Cresswell\nOn 4/07/2017, at 10:11 AM, bergtwvd notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nUsing latest Docker Portainer version and Docker Swarm version 1.2.7.\nThe swarm cluster is 4 nodes (02-05), and Docker Swarm runs on node 01 on port 22375, along with Portainer.\nI have defined and endpoint for the swarm.\nWhen I select the Containers for this endpoint an error message pops up.\nSteps to reproduce the issue:\n\nCreate endpoint for Swarm 1.2.7\nSelect Endpoint\nPress Containers\nerror message appears\n\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\n\nPortainer version: latest, d.d. July 4 2017\n\n\nTarget Docker version (the host/cluster you manage):\n\n\nxxxxx@app-docker01:~$ docker -v\nDocker version 17.06.0-ce, build 02c1d87\n\n\nPlatform (windows/linux):\nLinux/Ubuntu 14.04\n\n\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\ndocker-compose:\n\n\nversion: '2'\nservices:\n dockerui:\n  image: portainer/portainer\n  ports:\n  - \"5001:9000\"\n  volumes:\n  - /home/bergtwvd/portainer:/data\n  - /var/run/docker.sock:/var/run/docker.sock\n  restart: always\n\nTarget Swarm version (if applicable): 1.2.7\nBrowser: FF\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_977&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5H6F4zT6Kmzvp3NwHypOP5mYiOfGkocbOvZnHzs5dsw&s=wDR3FFFwwZNGExbukjUNMKcDmClKq8fa8RKVfkeb06A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSKaJgmVTIsfGOWKOeXmC5QQ4dY1ks5sKWb0gaJpZM4OMuEX&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5H6F4zT6Kmzvp3NwHypOP5mYiOfGkocbOvZnHzs5dsw&s=braLLlq5QNJimdW6DDcb7oNtAwQGOH85s2IL4HM4pV8&e=.\n. be aware that Portainer is not collecting events all the time... it only retrieves the events when you click on that menu item... (basically just calls a Docker Events command)\nSent from my iPad\nOn 5/07/2017, at 9:12 PM, Atif Saddique notifications@github.com<mailto:notifications@github.com> wrote:\nTo avoid spam there should be option to configure the event notifications. Like I should be able to configure/filter that for which type of events I should receive emails/notifications.\nI am a FullStack developer with expertise in Angular2/JS, Spring, Grails, Go-CD, Docker, Docker Compose. I can help you guys implement this feature as well if you want.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_979-23issuecomment-2D313047620&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UyI-_fbM-DIlv6GkctWkdQXTv5mIN8KWZg5GdZJklf4&s=zDlX78f0s2E3Jp2J2vR7zByKkH8cR1dcO3aDj02CAOo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldpIp2-5FKglwOuywzM77UqVtE-5FGDGks5sK1NjgaJpZM4ON-5FtB&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UyI-_fbM-DIlv6GkctWkdQXTv5mIN8KWZg5GdZJklf4&s=PIMMPzHjIW8av3gIyD7hAlw-JxKKCRFmm4oWvkNC7AM&e=.\n. OK, well i am open to seeing a mockup of how this works... and we need to make sure the polling is async, so that it doesnt impact the usability of Portainer.\nSent from my iPad\nOn 5/07/2017, at 9:16 PM, Atif Saddique notifications@github.com<mailto:notifications@github.com> wrote:\nIn that case, we will provide an option to enable or disable polling for events.\nIf user wants to get notifications of events then he must enable the polling of events, in which case we will poll/check/fetch events after few interval of time\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_979-23issuecomment-2D313048698&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JhZU3GMY6L_3OnGxSvDhiTHqGdeXTFQMRbtIOLLtEI4&s=-4JC3xGTJgBcWpEVxMs7seDDI9pNY-WG-5pJs55vPXo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaT7yUghA-5FkH78ZnOpI7ZBMLAibMks5sK1SHgaJpZM4ON-5FtB&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JhZU3GMY6L_3OnGxSvDhiTHqGdeXTFQMRbtIOLLtEI4&s=pq7ZVlx63ikPlTP6FOSaxEHpqcE0DY5FrbqWG7xDs-8&e=.\n. You cannot. This is a docker limitation.\nWe are adding a new feature soon, which will allow this, but only by automatically deleting and recreating the container.\nRgds,\nNeil Cresswell\nOn 10/07/2017, at 2:33 PM, \u90b5\u78ca notifications@github.com<mailto:notifications@github.com> wrote:\nIn the container details interface, I can not find the place to modify the port.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1006&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=opUiUfM-69DyTmr2NV9qIxuJ5cJjK_AX03HhHhYln-s&s=dAOH0IDBa8Nij_WsZZPY4zxWtkVo50AogssZbokomnw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlc4tNFXusPnmwtXsN0AXQeJ2u9SSks5sMY1xgaJpZM4OSSgD&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=opUiUfM-69DyTmr2NV9qIxuJ5cJjK_AX03HhHhYln-s&s=9E3jPqHzkfLFYBN1bEzem5C81A60KSAYwJW5oepe6FU&e=.\n. Monospaced font and margin wins this beauty contest hands down.... If thats easy, and wont clutter the UI, then sure. Agree. This is really a docker core limitation, we can work around it, but that would seriously impact some users.\nRgds,\nNeil Cresswell\nOn 12/07/2017, at 5:49 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nIndeed, that's a huge risk at the moment. We want to enhance the actual user/team management with permissions (e.g. when you create a user you can specify if this user can start containers, can access container console, can create volumes...), this should be added in as well.\nI'm not keen to limit host directories to regular users in the meantime, this seems to be a popular way to persist data or access required data. Tho we can discuss this here.\nPing @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VfQIT0pTc5jqbgOLLHEelI71LdBjcwmp75FSzXwTAdw&s=WyaW2FFnW0WPBIokquM1GTWMbcxCRT2hlTJcDsLvkr0&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1015-23issuecomment-2D314656988&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VfQIT0pTc5jqbgOLLHEelI71LdBjcwmp75FSzXwTAdw&s=PB2rIy_7E_mCagTubS7zPKIja7SZweNv4BcLVewiLvQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSuIpBZnmE7kw4Xil-5Fr38UhdZjJeks5sNF5YgaJpZM4OU3Qk&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VfQIT0pTc5jqbgOLLHEelI71LdBjcwmp75FSzXwTAdw&s=MbGt9FYvTT16A3hPr-hjRBAYFFCRX-OtNEMpFZcNz20&e=.\n. All we need are say the first 6 characters anyway.. when using the cli, i only ever reference a container by the first few letters..\nRgds,\nNeil Cresswell\nOn 17/07/2017, at 8:55 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ntSKWq3yURTM3LCLtANHsAJtvSATaU1ts7MtIDYx8GM&s=SVy0gGPcnezPlf7So8cCunYoScJbv4D-QQHapIzSgw4&e= , the main point is that the full ID makes the first row be two or three times wider than other rows. It is desirable, especially for small screens, to make them be similar.\nFurthermore, most of the time the short ID is enough, and the full ID is useful to be copied only (I don't think many users can remember all the sequence).\nHowever, this is just a visual enhancement. We do not 'need' it.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1032-23issuecomment-2D315699905&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ntSKWq3yURTM3LCLtANHsAJtvSATaU1ts7MtIDYx8GM&s=nUTF2r9fD25GbV2cFwKyPiZxPy3lo6iEfdpEGvV_rNo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSVDwNRclCWXBihLkpT-2D6nob2-2DJgks5sOyF7gaJpZM4OXpDp&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ntSKWq3yURTM3LCLtANHsAJtvSATaU1ts7MtIDYx8GM&s=MI1D5JteOeYpANIl16WWYIS78zvQnaRsjoLWKR9fLy8&e=.\n. There are still too many caveats / constraints with that option to reliably add it into Portainer...\nSent from my iPad\nOn 14/11/2017, at 9:06 PM, Darron Park notifications@github.com<mailto:notifications@github.com> wrote:\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5OQay65eU2NHfVhU46zIxGET62-GDcltcRG5TyOH6tM&s=lbovvXlB3NeV6kl2Nvyk6EGCspZbRe9vZIUl-9Sgpag&e= Can you implement storage quota limitation on UI, too?\nI think many people (including me) need this feature...\ne.g. --storage-opt size=1G\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1040-23issuecomment-2D344176567&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5OQay65eU2NHfVhU46zIxGET62-GDcltcRG5TyOH6tM&s=qyqAZc0Xr2wL7iEtMNrWy_ye9ofhBb4UW4AdWkam5SY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcLQrBQsKuegHu974sJjGShhscwUks5s2UnsgaJpZM4Oa42m&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5OQay65eU2NHfVhU46zIxGET62-GDcltcRG5TyOH6tM&s=243J--jAIEX8B83N2I5IxJSkkwDbHVcWiQzTlGWbabU&e=.\n. When you deployed portainer it asks you  to set a password on first launch.\nIf you have forgotten it, delete the portainer container and its volume, and deploy again.\nRgds,\nNeil Cresswell\nOn 22/07/2017, at 10:59 AM, Shabbir Kagalwala notifications@github.com<mailto:notifications@github.com> wrote:\nThis may sound very stupid but this is not a bug or an issue. I am trying to use portainer and it is just stuck on the login page asking for an password for the admin user. tried all possible combinations \"admin\", \"portainer\". Can some one please help me out.\nIf this is not the right place to post this question, I am extremely sorry but please do let me know where can i get help on this. Thank you.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1059&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=63426TyJTnPY94Bq3Cw7wdCDIPajkheyPC4o3we0dbY&s=9NwLDCv7gnMgDTefdYeWWkmolWuYHsSkQveKVVVJTlc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlamvr9-5Fe-5FguoTyWNKUNVtjAYvaXBks5sQS1JgaJpZM4Of-2DRp&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=63426TyJTnPY94Bq3Cw7wdCDIPajkheyPC4o3we0dbY&s=CkaAtw9GwExWI8sFh_FKamcmVfnYCrbYvBfDr4dVjm8&e=.\n. Try clearing your browser cache (or go into incognito mode)\nRgds,\nNeil Cresswell\nOn 22/07/2017, at 11:12 AM, Shabbir Kagalwala notifications@github.com<mailto:notifications@github.com> wrote:\nSorry again but this is my first launch on a new set of servers, never used portainer on these servers.\nWhen we tried it on our dev servers on the initial install it does ask for an password but now it takes me to login page directly without asking to set any passwords at all.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1059-23issuecomment-2D317132815&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rC9N5iZeO3h5KtPgBjkhKyAT6VNoIHZX-pbv2LYd9LA&s=3f_qMKtaJXj9lnlzrvbo7Q00z4k_y2zVfghzhzQLjGs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlacGfz8OQ5kes-2DXVOGCgNDWgyqvhks5sQTBEgaJpZM4Of-2DRp&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rC9N5iZeO3h5KtPgBjkhKyAT6VNoIHZX-pbv2LYd9LA&s=TqJqVchGgXtKOnoQ8_E88tdsxc0iftrWKp7_E7dyDlw&e=.\n. No, the only way to change is using the cli flag, or using settings once portainer is up, and the only acceptable location is a url to a file.\nRgds,\nNeil Cresswell\nOn 30/05/2018, at 2:39 AM, newfulluser notifications@github.com<mailto:notifications@github.com> wrote:\nIs there a way to change the logo.png and logo_alt.png from the files on the portainer volume?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1070-23issuecomment-2D392801095&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lHunsA4ABqnyYWGJ0pX43LgWjZYIxgHB6_c41bsVZCM&s=fYX7eDZZ_i6PPEH-YjCz6Roc4K3fnQB0WJzIsOHvfBk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVVcPfb8WdfTiL5t54Omor0mp1Nhks5t3V2ugaJpZM4OitK9&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=lHunsA4ABqnyYWGJ0pX43LgWjZYIxgHB6_c41bsVZCM&s=vYCQl1mTFeEB9Oal4MdBARc_i4iFomr0daZOYrxxXNM&e=.\n. Well, i think if we can find a way for Portainer to automate the deployment of a reverse proxy container, then this would address the request.\nCan we read configs and use info gained to create traefik or nginx proxy environment variables?\nRgds,\nNeil Cresswell\nOn 30/07/2017, at 9:04 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI'm going to flag this as a discussion, I'm not sure whether this should be actually implemented inside Portainer.\nping @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nFKMYZJDL_edj00QQH6azp3JSoIGUttZXdU4VvzwqEs&s=F9_LiMxZnXyA0_rt80rlrT8Kwt60cBYUQUafDRkaACE&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1078-23issuecomment-2D318888453&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nFKMYZJDL_edj00QQH6azp3JSoIGUttZXdU4VvzwqEs&s=l-ABMMbgeF8S6Si0tM9Fo9Yyk7_fB3IuVTCWLuvoCGA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfm7k7lZ0Kd2sHOohqtBS4smF-2D5cks5sTEcpgaJpZM4OlFrv&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nFKMYZJDL_edj00QQH6azp3JSoIGUttZXdU4VvzwqEs&s=RvMpAJIcAfKfnQapJXbRmmeTPCUl0Z9M2kXxrFyThYA&e=.\n. What is the business reason for this? I didnt think templates held private information?\nRgds,\nNeil Cresswell\nOn 1/08/2017, at 9:23 PM, swiftusa notifications@github.com<mailto:notifications@github.com> wrote:\nIt would be nice if the admin image files are hidden from users.\n(or)\nAn image that is in use by another user/admin has to be hidden from a user's view on /images/ page.\nUnused images can be viewed by all. But if it is assigned to a container another user should not see the image listed.\n(or)\nThere should be an option to hide an image from all users, except admin.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1088&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HE6qZCgl4euxXy6fPTz0E1xgymD3YLW0DELZCnAdHgk&s=-VQOB8YsVxdFxhTG4sEvBx28xW6tchqeGEmcv5x5NJY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQpEiORuiZzSYUjf7REtHKIJA3ktks5sTu6IgaJpZM4OpdE5&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HE6qZCgl4euxXy6fPTz0E1xgymD3YLW0DELZCnAdHgk&s=7XU0Dfvcc8CC6ca_3j-9dNuQxgn0fqsrehG5-ty6ngE&e=.\n. Go to settings, and you will see the new section for LDAP\nSent from my iPad\nOn 9/08/2017, at 11:47 AM, DimeOne notifications@github.com<mailto:notifications@github.com> wrote:\nI started my preexisting portainer container with the image portainer/portainer:pr1093.\nWithin the user management, the password fields were missing and I could not see any options for ldap.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1093-23issuecomment-2D321112529&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0nFvQgf1d29kt20P90oNp0mUXWRpskl8btdLmEWDwAA&s=3xZfRP9tlvksnuFSxnGsCmNlPprhh5k5ReFgUzjaXl0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldffgtXchwsojWtkFFwRcfSmuFO4ks5sWPOCgaJpZM4Oufnc&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0nFvQgf1d29kt20P90oNp0mUXWRpskl8btdLmEWDwAA&s=g98XCUd_lqHf6AIasbEL6XGbwncNfBA6ZsTYSM4KhFM&e=.\n. My thoughts remain the same, i dont want any auto-prune feature...\nRgds,\nNeil Cresswell\nOn 10/08/2017, at 7:43 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@nerdbaggyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_nerdbaggy&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EE9co2ys8s9pTsXKrLJvN1NjFAHwdGqNW-HfdyRZDR0&s=2jBFMc4RUZpYEoqIJhODZ4ACpCinsQupJCqwnQTJ6OU&e=\nWe thought a lot about adding these kind of features in the past, and only recently accepted to add the container prune feature: #904https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_904&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EE9co2ys8s9pTsXKrLJvN1NjFAHwdGqNW-HfdyRZDR0&s=JESmXwPq-dAQDsLqulebM75bY3JivciWUwsKeooGcL4&e=\nThis one seems even more dangerous for the user, as it can delete containers/images/volumes.\nWith the recent introduction of unused tags for volumes & images, it became easier to isolate and remove unused volumes/images. Implementing #904https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_904&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EE9co2ys8s9pTsXKrLJvN1NjFAHwdGqNW-HfdyRZDR0&s=JESmXwPq-dAQDsLqulebM75bY3JivciWUwsKeooGcL4&e= might be the way to go to have a full cleaning method while keeping our users away from unwanted removals.\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EE9co2ys8s9pTsXKrLJvN1NjFAHwdGqNW-HfdyRZDR0&s=fMSleCLPD9kTZCBZUy-g1t2H8RBX4ulLWNXw8ccyrS0&e= what do you think ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1102-23issuecomment-2D321476833&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EE9co2ys8s9pTsXKrLJvN1NjFAHwdGqNW-HfdyRZDR0&s=ya1BQ0NKg9p3hO1nNa_5Ich72JX73qurKRaT-s_i3XY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVVacEMuGpqbZioIAKkz60BlUgaRks5sWrSwgaJpZM4OyIbE&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EE9co2ys8s9pTsXKrLJvN1NjFAHwdGqNW-HfdyRZDR0&s=vwYQYLz8PKpge3dwVp8pAiBd9lAmdxxC5oBDwZD30ok&e=.\n. Authenticating proxy servers are quite common in corp environments, so my pref is that we add this support into the UI.. Out of interest, were you not allowed due to technical or commercial concern in Portainer?\nRgds,\nNeil Cresswell\nOn 2/07/2018, at 4:45 PM, Jo\u017ee Mlakar notifications@github.com<mailto:notifications@github.com> wrote:\nAs things go, our implementation changed and we are not allowed to use portainer in our project. So this won't happen, sry.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1124-23issuecomment-2D401671283&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=1G1Jo95BlxXvJNQXWeyJ-agn4B2QUtIO6ixrM6B6Efk&s=st16eUpWBLZCb1YxEDuJj5GJQ__tdUqXgJDya49rZO4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTgpfnKk2bN81dcMz1bIO6uxhc2gks5uCaV7gaJpZM4O2gcm&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=1G1Jo95BlxXvJNQXWeyJ-agn4B2QUtIO6ixrM6B6Efk&s=tezOQsKmU_2I2Dt2-vf-Y6ixsdM5cjunHQSeUb4lnkg&e=.\n. Even when using access control?\nRgds,\nNeil Cresswell\nOn 2/07/2018, at 5:07 PM, Jo\u017ee Mlakar notifications@github.com<mailto:notifications@github.com> wrote:\nTechical I suppose. We are hosting our solution on an existing Docker Swarm cluster. And Portainer will be used by Ops but not Dev as it gives insight to the cluster as a whole opposed to just our solution.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1124-23issuecomment-2D401673693&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iCOKXD4S2ruV0CGnaKOlCaKIZEqifw2N2OVwGlODl1s&s=E9TkKHP860OMqryW1SKO_dhOl3xd2XT3SpFWtGbSJMw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYkYS60o46HOYYdvBy8Cv0MeTvtEks5uCaqQgaJpZM4O2gcm&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iCOKXD4S2ruV0CGnaKOlCaKIZEqifw2N2OVwGlODl1s&s=b6z5ltvAyPN3KLeN31hMrGdXdPEq6YTbUtPr7W9apyg&e=.\n. did you really start portainer with the following command?\ndocker run --restart always -d -p 127.0.0.1:9000:9000 -v /home/docker/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:latest --templates https://mytemplates\ndidnt think you could use 127.0.0.1 as that would not map correctly...\n. what is the docker volume driver you have installed ?\nSent from my iPad\nOn 15/08/2017, at 7:49 PM, Richard Kuhnt notifications@github.com<mailto:notifications@github.com> wrote:\nJust ran docker volume ls and got:\nerror during connect: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.30/volumes: read unix @->/var/run/docker.sock: read: connection reset by peer\nDocker crashed and restarted like I described above.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1128-23issuecomment-2D322400643&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FsmWT9qSa--F1CqVYQHyr-WqaSe57pkCShp7RQojcrs&s=Tb0o7t2tprv2svVQc7pTVoCOzCjmy5RSqQVfyqECag8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZ-5Fx6qmijwyg0vE7CGwgImrSGA7Eks5sYU2PgaJpZM4O3QQW&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=FsmWT9qSa--F1CqVYQHyr-WqaSe57pkCShp7RQojcrs&s=mEc0dYof5sc-0PZoCUCWgElfeCCvH19Z3iwK120tmqE&e=.\n. /var/lib/docker/plugins\nWhats in that folder?\nRgds,\nNeil Cresswell\nOn 15/08/2017, at 5:58 PM, Richard Kuhnt notifications@github.com<mailto:notifications@github.com> wrote:\nAs far as I know only local. Is there a way to list all installed drivers?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1128-23issuecomment-2D322402744&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=cOXGWaFb-JQDZCdq9MjFpo8BksxzI65auQaP76Bcl4o&s=qeFDfHWQL-TCFHSHyXmsHf-QWljFVR1FvsmIrzUSdtA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWkOSTD4EMOaocSPQf2DTjRiKX-5FXks5sYU-2DBgaJpZM4O3QQW&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=cOXGWaFb-JQDZCdq9MjFpo8BksxzI65auQaP76Bcl4o&s=jMp6aeg2risQ7UcBpsHyA_wqXAKHhrwW1Ho2NClomHg&e=.\n. So you dont have a /var/lib/docker/plugins directory on your docker host?\nDo you have a /var/lib/docker/volumes directory at least?\nRgds,\nNeil Cresswell\nOn 15/08/2017, at 6:07 PM, Richard Kuhnt notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yFM7v20U8yeu1oP5SiHrTvF9ZxizILozboPO6laMuPE&s=7ZYTZd1FR6p0e0mBXuCTdqwsBxoK4RgLIvhEyfHbFqc&e=\ndrwx------  4 root root 4096 Aug 15 10:00 73b2996d696bef3409770e93c87614a7d00d7810cfc0823865961a9a73756452/\ndrwx------  3 root root 4096 Apr  6 18:57 storage/\ndrwx------  2 root root 4096 May 11 19:21 tmp/\ncd 73b2996d696bef3...\n-rw-------  1 root root 1453 Aug 15 10:00 config.json\ndrwxr-xr-x  2 root root 4096 May 11 19:21 propagated-mount/\ndrwxrwxr-x 23 www  www  4096 Aug 15 10:00 rootfs/\ncd rootfs\ndrwxr-xr-x  2 www  www  4096 Feb  8  2017 bin/\ndrwxr-xr-x  2 www  www  4096 May 30  2016 boot/\ndrwxr-xr-x  4 www  www  4096 Aug 15 10:00 dev/\n-rwxr-xr-x  1 root root    0 Aug 15 10:00 .dockerenv*\ndrwxr-xr-x 46 www  www  4096 Aug 15 10:00 etc/\ndrwxrwxr-x  5 www  www  4096 Feb  8  2017 go/\ndrwxr-xr-x  2 www  www  4096 May 30  2016 home/\ndrwxr-xr-x  9 www  www  4096 Feb  8  2017 lib/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 lib64/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 media/\ndrwxr-xr-x  2 www  www  4096 May 30  2016 mnt/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 opt/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 proc/\ndrwx------  2 www  www  4096 Jan 16  2017 root/\ndrwxr-xr-x  7 www  www  4096 Feb  8  2017 run/\ndrwxr-xr-x  2 www  www  4096 Feb  8  2017 sbin/\ndrwxr-xr-x  2 www  www  4096 Jun 10  2012 selinux/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 srv/\ndrwxr-xr-x  2 www  www  4096 Jul 14  2013 sys/\ndrwxrwxr-x  2 www  www  4096 Feb  8  2017 tmp/\ndrwxr-xr-x 10 www  www  4096 Feb 14 02:57 usr/\ndrwxr-xr-x 11 www  www  4096 Feb  8  2017 var/\n``\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1128-23issuecomment-2D322405285&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yFM7v20U8yeu1oP5SiHrTvF9ZxizILozboPO6laMuPE&s=_5N5F3OwnCqkxXKJS2rfObkB-dOgFhhBObzhcJ8S1Xo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUTFYfUDb1FAnVN2iltYI2kkNh91ks5sYVG5gaJpZM4O3QQW&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yFM7v20U8yeu1oP5SiHrTvF9ZxizILozboPO6laMuPE&s=kEltq0SPK6NUpCVRQgtiutZmxL7rNXpvI9IK-IUUDuU&e=.\n. Ok and what files exist within the plugins directory\nRgds,\nNeil Cresswell\nOn 15/08/2017, at 6:11 PM, Richard Kuhnt notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tBO11Sw_NwJxK4X09cBGAJU0zlPNEgWFCgjinSAF6Kg&s=6hknzw80JmA8NXX1LOw79f2NYY-pzFC8QjmNDuv0Kis&e=\nll /var/lib/docker\ndrwx------  5 root root  4096 Apr  6 18:57 aufs/\ndrwx------ 15 root root  4096 Aug 15 08:55 containers/\ndrwx------  3 root root  4096 Apr  6 18:57 image/\ndrwxr-x---  3 root root  4096 Apr  6 18:57 network/\ndrwx------  5 root root  4096 May 11 19:21 plugins/\ndrwx------  2 root root  4096 Apr  6 18:57 swarm/\ndrwx------  2 root root  4096 Aug 15 10:00 tmp/\ndrwx------  2 root root  4096 Apr  6 18:57 trust/\ndrwxr-xr-x 24 root root 12288 Aug 15 10:01 volumes/\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1128-23issuecomment-2D322406222&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tBO11Sw_NwJxK4X09cBGAJU0zlPNEgWFCgjinSAF6Kg&s=Dt8c44vWNAmuMdVJSsuT8uhHjBTFy6eAmL-FOvfy5qk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQcjAt3tmfrD2BZFixKYRa7MkeAxks5sYVKtgaJpZM4O3QQW&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tBO11Sw_NwJxK4X09cBGAJU0zlPNEgWFCgjinSAF6Kg&s=FI5HiDusE5YxdWg9Ct5x_RCQTuOGSTyEJVP3s2wwXDA&e=.\n. Disable until we find another way\nRgds,\nNeil Cresswell\nOn 23/08/2017, at 7:01 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nIndeed this was introduced in #1009https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1009&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C8tMJE5zY0d2A1m-cG_Srqtl8FCTXb8UWpsOkLq5j8&s=JhwWDDjAtxIbmJXmzVHdMs7N8OvPMPzXGnu5Imt4NiE&e= after discussion in #357https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_357&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C8tMJE5zY0d2A1m-cG_Srqtl8FCTXb8UWpsOkLq5j8&s=xQ0PO6zSRsCmki1rf9T5_nRfbMUEpOKH3f2WcuKT46k&e=\nI was not aware of the performance issue related to the system/df call. I wonder if we should disable entirely this feature or just set a switch to enable it (disabled by default, available in the settings or volumes view).\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C8tMJE5zY0d2A1m-cG_Srqtl8FCTXb8UWpsOkLq5j8&s=fUmBlkJmQosoww1HlVz_uGx7DmjjvjtzOpBMduWjSGI&e= what do you think about this?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1144-23issuecomment-2D324120903&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C8tMJE5zY0d2A1m-cG_Srqtl8FCTXb8UWpsOkLq5j8&s=7NhzUmWWFguvWQqHLTEiTm-veif7SWAJBkfwKz4Eb-w&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZ0paL874Km5RZ8HeJPY6Pvgr21lks5sayVogaJpZM4O-2D-2D2i&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C8tMJE5zY0d2A1m-cG_Srqtl8FCTXb8UWpsOkLq5j8&s=rak1Bcpt9Kb-j28sI9wqNjSSRKKyMR5cwRWxuOxKYXk&e=.\n. Dont allow it to be deleted, but should allow for it to be renamed (so can call it something other than admin)\nRgds,\nNeil Cresswell\nOn 23/08/2017, at 7:24 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI'll file this as a bug as it's introduced by the current behavior of Portainer. Though I wonder if we should allow the deletion of the default admin user.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1145-23issuecomment-2D324126702&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MSIlfu6w_r0KWGoZrGgkOJ2BIshYrLYnWPznWg0Xu2o&s=Xt6g7T66mKsFvl74dnWIpqNd4H3pGReYrVxzR4hbCps&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXmoZK-2Dj6TcmODVAZyDtPbEscwvnks5sayrvgaJpZM4O-5FApO&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MSIlfu6w_r0KWGoZrGgkOJ2BIshYrLYnWPznWg0Xu2o&s=CSfMzXDaCBn2kmLg8P5evD9PgqrGwEQMtn78OxBGWbU&e=.\n. Second option... set username and pass on first startup\nRgds,\nNeil Cresswell\nOn 23/08/2017, at 7:33 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=shoKceBLWmwvs5CvCUghawS1G6xB6Ns5WgMcjnwTjqI&s=LPCyo428zdzwDaXN-4PhsV2lfn4xloosrWr1B7mCIDs&e= we do not allow username edition in the current version. Should we add the ability to edit usernames ? Or when initializing the default admin user on first Portainer startup should we give the ability to the user to name the administrator account ?\nIMO, second option is best.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1145-23issuecomment-2D324128829&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=shoKceBLWmwvs5CvCUghawS1G6xB6Ns5WgMcjnwTjqI&s=g3hCX2b5uCzlsiPwIYS5BZI3G9KzDT-9cr3v531xcuo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcZDq2xkjM6wh-5Fuebes8OYE93Za2ks5say0DgaJpZM4O-5FApO&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=shoKceBLWmwvs5CvCUghawS1G6xB6Ns5WgMcjnwTjqI&s=lorYE4qMKl_6YkSo_tWWU81-gUfP56G0UkUS_h4GWMw&e=.\n. Deprecation should not be part of templates as for sure it will confuse. Just add that to release notes. IMO, lets leave this function for CI/CD. . Accept decimal inputs... 54.57MB is a valid input..\nRgds,\nNeil Cresswell\nOn 12/09/2017, at 9:11 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nIf we have a dropbox for memory in MB or GB, how can we display that if user have created a container with a non round MB value (like 54,57 MB) ?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1163-23issuecomment-2D328659748&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RPFvpI_vbKtAPwQN3qlFGhZa9WqfVS1g6QxkbOcKOEw&s=zMgtFUfUBXB0Q-6DhiohNONbVjFp1sSuOWnPwM6JD24&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUjBikIguOTy1ph3JXFgbd3SIpf-5Fks5shaH4gaJpZM4PEhL1&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RPFvpI_vbKtAPwQN3qlFGhZa9WqfVS1g6QxkbOcKOEw&s=WZBdyN_MaGCYfJ1FPh_DJIBXXOcGXvfAJeQXHiFShO0&e=.\n. Agree, if we are adding cpu, we must make it human friendly.. eg _ cpu's where the ___ area is a rotary dial which goes from 0.25 to 32 in .25 increments\nRgds,\nNeil Cresswell\nOn 17/09/2017, at 5:14 PM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nThere is an issue about this unclear doc : moby/moby#30222https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_moby_moby_issues_30222&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PSYTeFggG93DWMgz0nYO48M51vrI76QK6iraxdJFYwE&s=mxd1knjOEDVb3TKVMK1BdFzjxuwnoWtt6Xl0PYkrkOs&e=\nThe best documentation on this is probably the associated blog post (but it talks only for containers options, not services) : https://blog.docker.com/2017/01/cpu-management-docker-1-13/https://urldefense.proofpoint.com/v2/url?u=https-3A__blog.docker.com_2017_01_cpu-2Dmanagement-2Ddocker-2D1-2D13_&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PSYTeFggG93DWMgz0nYO48M51vrI76QK6iraxdJFYwE&s=jQS5nzwlG2UrruHG-3vpyOIrsUssLpiKX18RMN-kobA&e=\nWe used services cpu limit/reservation here without any pb\nJust to be clear, this what really happen :\nCpu reservation for containers\nBefore docker 1.12, we have 4 options to manage that :\n--cpu-period\n--cpu-quota\n--cpuset-cpus\n--cpu-shares\nIt was too complicated for user to understand that, so in docker 1.13, they introduced the --cpus options\nFrom : https://docs.docker.com/engine/admin/resource_constraintshttps://urldefense.proofpoint.com/v2/url?u=https-3A__docs.docker.com_engine_admin_resource-5Fconstraints&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PSYTeFggG93DWMgz0nYO48M51vrI76QK6iraxdJFYwE&s=SH_GaRN_83VZ2mL-vxPfvmd7hKmcmiOIv-KtA0ECP8A&e=\nIf you have 1 CPU, each of the following commands will guarantee the container at most 50% of the CPU every second.\nDocker 1.13 and higher:\ndocker run -it --cpus=\".5\" ubuntu /bin/bash\nDocker 1.12 and lower:\n$ docker run -it --cpu-period=100000 --cpu-quota=50000 ubuntu /bin/bash```\nNow for services (swarm mode 1.13 +)\nIn swarm-mode after 1.13, we got the --cpu-limit and --cpu-reservation flags\nThis values are in CPUs (like the --cpus for containers) : 0.25 means 1/4 of 1 CPU\nThis limit/reservation occurs for the task, like for the memory reservation/limit\nIn API (service create/update swarm-mode)\nIn the API, the value is an Integer in NanoCPU, so 0.25 is equivalent to 250000000 in API or in docker inspect\nI think Portainer have to provide these flag in the more human format (the 0.25 CPU)\nDocker documentation are not very clear on that, but it works like that\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1163-23issuecomment-2D330033922&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PSYTeFggG93DWMgz0nYO48M51vrI76QK6iraxdJFYwE&s=eqgHwRoaNxgXovK8GpnhpTyM32btKd-_CBs9D1IXRF4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTOyvEOEp1ZvZRpm2qfed7CHYD-2D-5Fks5sjPEAgaJpZM4PEhL1&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=PSYTeFggG93DWMgz0nYO48M51vrI76QK6iraxdJFYwE&s=olGHCpuLGHHuc6Xj7KcSv6j3wFDPMnLTDB4-6cNExt4&e=.\n. That is by design. Until a user has been allowes access to an endpoint, they cannot login.\nRgds,\nNeil Cresswell\nOn 30/08/2017, at 3:08 AM, raushansingh629 notifications@github.com<mailto:notifications@github.com> wrote:\nI created two user account one with admin access and other with normal access(not admin).\nAfter creating user sucessfully when i try to login using normal user it's showing me \"User not allowed. Please contact your administrator\". but when i login with admin user it's login sucessfully.\nI am using portainer 1.14.0\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1166&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=sJ5PrLMOHeeLPJ_s5nO1TVUFsFzwun9Ql5mgvtZvrMA&s=fUjR1246fR1hyJoamrAcuFDOYbgZpmhTLpi7gzvOsbw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYQtYBM1s-5FzjjOghT0rB6WiNzhcgks5sdClhgaJpZM4PGGZl&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=sJ5PrLMOHeeLPJ_s5nO1TVUFsFzwun9Ql5mgvtZvrMA&s=T_XhXhCsOI6UxqTgNfYcgfgVkbZd9ibHUQrjgrCtIck&e=.\n. Well the user is actually ContainerAdministrator, but no, that doesnt work\nRgds,\nNeil Cresswell\nOn 4/09/2017, at 7:35 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nCan't you just specify Administrator in the user field?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1170-23issuecomment-2D326887704&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=NSLTTNenymZAW_WT5JnoZ1CMMtfXiW5urSwHFUMVJr4&s=zsFAzQaAOugO4_zhKchrIeBmW-WHkpomU9MntuMfWk4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlV0fOsKcxQfvPslj-5F6pBdwDmTDrnks5se6g6gaJpZM4PLTM3&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=NSLTTNenymZAW_WT5JnoZ1CMMtfXiW5urSwHFUMVJr4&s=IJPp6dlbX3EkHqNc6er0lXPdDxLHE2Bj-PGqWZcQopM&e=.\n. Not correct...\nCli -> Docker service create \u2014restart-condition any/none/on-failure\nRgds,\nNeil Cresswell\nOn 10/10/2017, at 9:24 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nI think the restart policy is not implemented for services cause swarm orchestrator do the job. You just have to define the replicas and the constraints, and swarm take care of that.\nYou can try to run a nginx service with one replica, then docker rm -f {container}. Swarm will rerun the container to satisfy the one replica schedule rule\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1178-23issuecomment-2D335275266&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Ph4Kscmu8KLf2zx5TBMr90tfzOXkqY1kCbjWHKnfen4&s=A5QNodrvPHaQRh4OkBbPhPnAYbYlJNDW68y2spYh0MU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlT3gsJVFQ-5FoQ5HEuO4eGZvJl-2D68Aks5sqoDkgaJpZM4PM7IS&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Ph4Kscmu8KLf2zx5TBMr90tfzOXkqY1kCbjWHKnfen4&s=0XSqP_oJCygDj5z0VGsi1MmeevK5bol4uwtOQvloxXQ&e=.\n. No current support for win2019.\nRgds,\nNeil Cresswell\nOn 22/01/2019, at 2:38 PM, hasan419 notifications@github.com<mailto:notifications@github.com> wrote:\nhi\nI cant run can not use portainer on windows 2019(1809\n[portainer]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_12378390_51519376-2D0dcb3800-2D1e36-2D11e9-2D958d-2D6461cab51c39.png&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BdidQcf2rblM8VO96eGXPMxX82_3taL1ypzVpEytFQI&s=ax6onPgEExdxFTkM1IOXr5LSXITyjjq8Rhl65AFcBho&e=\n)\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1179-23issuecomment-2D456299515&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BdidQcf2rblM8VO96eGXPMxX82_3taL1ypzVpEytFQI&s=k4AewazgXAaq6HYZ4_LhQ44zCY8egFnMyO7x_huCa0c&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlRDV92fawyn9O7QLWn7CoyCNIXxjks5vFsAFgaJpZM4PNnVw&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BdidQcf2rblM8VO96eGXPMxX82_3taL1ypzVpEytFQI&s=BFg1_sgQC4VB42noTkGsjrXlugG9_MAVumsFyqoRek8&e=.\n. Not 1809 at this stage.\n1803 is the latest we have built against and support.\nRgds,\nNeil Cresswell\nOn 22/01/2019, at 2:44 PM, hasan419 notifications@github.com<mailto:notifications@github.com> wrote:\nare you supporting win10(1809)?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1179-23issuecomment-2D456300880&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WTg1SPizUm45lG6FRCL6B_NjFDz3uChY-3jt_Q5cxhY&s=xIUWZ5yWhgpvOHAzCHILJBkYNRopIzdJixVJFb9HFd8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaObQuYFX74wamK-2DoqAIbDHrsraOks5vFsFygaJpZM4PNnVw&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WTg1SPizUm45lG6FRCL6B_NjFDz3uChY-3jt_Q5cxhY&s=5xf4cvvCal_18GOm7EKGFiZNUU9eP4KsooFvKmw5OSE&e=.\n. You need to add the port number to the registry url... port 5000 is Docker default..\nRgds,\nNeil Cresswell\nOn 20/09/2017, at 5:17 PM, zwx168238 notifications@github.com<mailto:notifications@github.com> wrote:\ni got the same issue\nmy setting was like below\nRegistry URL https://njdocker1.nj.thundersoft.comhttps://urldefense.proofpoint.com/v2/url?u=https-3A__njdocker1.nj.thundersoft.com&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=H99wJQGgBWkcoainkjvqEarIuUvyd7LMw--mBBb76rw&s=05gffEv0a9BEG9dhnOJVQ6Idmcy0-e1Qc4BDMsMSMHw&e=\nname harbor\nthen i want to use pull image\nname njdocker1.nj.thundersoft.com/public/rsyslog:1.0http://njdocker1.nj.thundersoft.com/public/rsyslog:1.0\nRegistry harbor\ni was setting the auth info and if i use docker pull njdocker1.nj.thundersoft.com/public/rsyslog:1.0http://njdocker1.nj.thundersoft.com/public/rsyslog:1.0 can pull the img from my own Registry\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1182-23issuecomment-2D330809591&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=H99wJQGgBWkcoainkjvqEarIuUvyd7LMw--mBBb76rw&s=aEJdJjYz1FStqqcwPSyWlyv6KoimWQ9j0aDevWJMVjE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrla8I91y6j95cuQrEc5TPPl7RFqQFks5skOZRgaJpZM4PQGVM&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=H99wJQGgBWkcoainkjvqEarIuUvyd7LMw--mBBb76rw&s=jzqDW_7Ayi9402eZgpLYK2ZqvY6ILZyKa72_xkpVL1Q&e=.\n. Agree that we should be able to save filters and/or save the state of the \"show all containers\" checkbox... that is something we will work on.\nWe wont however be adding any \"auto-remove\" of stopped containers as that goes against our principle of ensuring the safetly of containers/volumes at all times.\nRgds,\nNeil Cresswell\nOn 18/09/2017, at 4:50 PM, Nitin K notifications@github.com<mailto:notifications@github.com> wrote:\nThe filter option of the Containers page is helpful to filter by the table values. But I feel there should be a way to create a default filter and save it. This ensures, the filter need not be given every time, but is default applied. For example, Showing only running containers (without any stopped or other state ones) {This can be achieved without the \"show all container\" field but it never saves}.\nAlso, I feel there should be a way to remove stopped containers automatically (maybe as a global configuration).\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1197&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JQfhtbs17sKU_qzvKDpn3LRkPIcmDKMUYXMhbJUbwE4&s=4vHdrcWcd2PIPH-r9ueVIfuebtTMrFtKFzCky_SiKEg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlToQj-2Dd-5F5ux5tZU751AA-5F-5FbiaSxdks5sjjzfgaJpZM4PaqYn&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JQfhtbs17sKU_qzvKDpn3LRkPIcmDKMUYXMhbJUbwE4&s=KHYdf7OTN4mVNJXE5hF2jgBO1KqKIMMAWajozbg-yPA&e=.\n. Right, so local-persist driver should be replaced with one that has a global scope..\nRgds,\nNeil Cresswell\nOn 12/10/2017, at 12:01 PM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nAfter some tests, I think this is related to the local scope of the driver\nAnd it's totally not a portainer issue as I produce same thing with docker commands\nThe volume drivers are released under a scope value (local or global)\nThe local ones are designed to be used only with standalone containers (not swarm services)\nIf we attach a such volume to a swarm service, the tasks will use existing named volume if exists, or create a local default volume if it doesn't exists\nA workaround is to manually create volumes on all nodes before running the service, but i don't think portainer should do that...\nTo use docker volume plugins on swarm, we have to look for global drivers\nWhen we create a volume with a global driver, I think all nodes are aware of this new volume and how to mount it.\nI have to found a simple global driver to test that\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1233-23issuecomment-2D335972788&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=K0onyJWU1VHVFLLIM_HT7QN9CZs-UTu_qEaNNyJh8Ys&s=dGlPqYy8SaW3B1elvjxjm9Z4s2o95uTWha5tUDIYdl8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSTXPzeLtcD1hIaxuJpjGTjcehGmks5srUivgaJpZM4PioCK&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=K0onyJWU1VHVFLLIM_HT7QN9CZs-UTu_qEaNNyJh8Ys&s=Ny2lXDynustUKKvhHiwVqStI46cH8MvpkbCcZFkgk_I&e=.\n. Thomas,\nFrom the cli, try the following:\nDocker service create \u2014mount type=volume,source=swarmvol,destination=/data,volume-driver=local-persist,volume-opt=mountpoint=/volume/portainer portainer/portainer\nObviously, you should change certain areas..\nRgds,\nNeil Cresswell\nOn 12/10/2017, at 12:01 PM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nAfter some tests, I think this is related to the local scope of the driver\nAnd it's totally not a portainer issue as I produce same thing with docker commands\nThe volume drivers are released under a scope value (local or global)\nThe local ones are designed to be used only with standalone containers (not swarm services)\nIf we attach a such volume to a swarm service, the tasks will use existing named volume if exists, or create a local default volume if it doesn't exists\nA workaround is to manually create volumes on all nodes before running the service, but i don't think portainer should do that...\nTo use docker volume plugins on swarm, we have to look for global drivers\nWhen we create a volume with a global driver, I think all nodes are aware of this new volume and how to mount it.\nI have to found a simple global driver to test that\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1233-23issuecomment-2D335972788&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=K0onyJWU1VHVFLLIM_HT7QN9CZs-UTu_qEaNNyJh8Ys&s=dGlPqYy8SaW3B1elvjxjm9Z4s2o95uTWha5tUDIYdl8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSTXPzeLtcD1hIaxuJpjGTjcehGmks5srUivgaJpZM4PioCK&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=K0onyJWU1VHVFLLIM_HT7QN9CZs-UTu_qEaNNyJh8Ys&s=Ny2lXDynustUKKvhHiwVqStI46cH8MvpkbCcZFkgk_I&e=.\n. Will need to investigate.\nDidnt think you could point a named volume to the root of the host, and that is what we are trying to protect against.\nRgds,\nNeil Cresswell\nOn 20/02/2018, at 10:16 AM, Luca notifications@github.com<mailto:notifications@github.com> wrote:\nJust a clarification for myself: the restriction implemented is about hiding bind mounts in container creation interface. This can still be easily bypassed creating a bind volume or a stack with volumes option.\nIs this correct? Is it affordable a much stronger check on volume and docker-compose file options?\nThank you!\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1235-23issuecomment-2D366804555&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RL2BXwNyCrmgOnVFUtRqCYOduiPwKuttf4UcaiVuDgs&s=rXGYaDDKwR2q9CUde5ouQsp-PfpUsc30B0yY-p5KcnQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTEXZ6p9l6ItN8M17PA1NqFZQj1Pks5tWeSwgaJpZM4Pi91N&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RL2BXwNyCrmgOnVFUtRqCYOduiPwKuttf4UcaiVuDgs&s=zAZfMO4gOxONYTP_3-sUjRApTr5LHYCRAD3YIqD1wO0&e=.\n. What kind of limits are you talking about?\nMax number of containers? Max cpus, max ram, max storage?\nDoesnt seem worthwhile to limit the number of containers, seems smarter to limit a team to a set number of cpus/ram/disk\nRgds,\nNeil Cresswell\nOn 27/09/2017, at 8:50 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nping @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=96q9eACXBQqjg7zvwnyIPRfdFcF1EEobMWCPXgt4T1c&s=-fEVZfDFKVMClaI_cg3dXjSkaJfYjG5m4t-UEUFrd9w&e= what's your thoughts on this?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1240-23issuecomment-2D332439276&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=96q9eACXBQqjg7zvwnyIPRfdFcF1EEobMWCPXgt4T1c&s=s8kKQuMVjwxdA1aBxkzcfPxEEnrJwt_QwE5W2J5DgYY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcfKsX4XrMoe6vuuXmWDPa0X9CbGks5smf4zgaJpZM4PjvjN&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=96q9eACXBQqjg7zvwnyIPRfdFcF1EEobMWCPXgt4T1c&s=dwcOrlQ32doJdMfTcvbwvXUyBuoW_9NEa3SVjeMBR_c&e=.\n. Agree it looks good... we couldnt integrate into Portainer because of license restrictions, but we may be able to integrate with this.. will give it some thought\nRgds,\nNeil Cresswell\nOn 29/09/2017, at 7:00 AM, Mart S\u00f5mermaa notifications@github.com<mailto:notifications@github.com> wrote:\nPortainer is awesome, thanks for creating it!\nClairhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_coreos_clair&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Mhq5kfutrs1TrEYtXBV9UqRKvYC4yt8hkJrWD0oanAQ&s=VYEhzPbGbynP_jTtGBWjxJOQQHFuRUzRuKQZ1sCAcgQ&e= is a project for static analysis of vulnerabilities in Docker containers and it looks like perfect match to Portainer.\nWouldn't it be a good idea to integrated Clair into Portainer so that there would be a section for launching the vulnerability scan and seeing reports?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1246&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Mhq5kfutrs1TrEYtXBV9UqRKvYC4yt8hkJrWD0oanAQ&s=M1gqd6GmU6iXJMChNfjoXpjw9Ljac9n9laFwIxTpqdo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYWyXKh9q3OzG5uHixIC9WbdTiGgks5sm96agaJpZM4PnqBJ&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Mhq5kfutrs1TrEYtXBV9UqRKvYC4yt8hkJrWD0oanAQ&s=9pbjJWTXg3QkHsEeyhS476D3Oj29UksMDxzrIYTz7ug&e=.\n. Agree\nRgds,\nNeil Cresswell\nOn 10/10/2017, at 6:18 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI think we should only focus on target here to avoid cluttering the UI? @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rM1PIft2dahu5c3p1TfWS2WcLHML0_Wk8QRkcltfhqc&s=AOmU4C6_m3d4DPHOi72jqzT4GM8exEVjPqRcbXoxGqk&e= thoughts?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1254-23issuecomment-2D335363474&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rM1PIft2dahu5c3p1TfWS2WcLHML0_Wk8QRkcltfhqc&s=qyTvjk77KZfZh3kPtAAEmH3lxaaJbTMeWv2E7TAcjZQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZWphRMAYELMbtvpZrKJP7pCwV0Sks5sqv4ggaJpZM4Poznv&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rM1PIft2dahu5c3p1TfWS2WcLHML0_Wk8QRkcltfhqc&s=DLCP5wQzDVsgi64nqAdmx8BsvyrvKsj1d6-fkLtMjtM&e=.\n. Agree.\nAny enterprise product should have an account lockout function. We should add this.\nRgds,\nNeil Cresswell\nOn 19/10/2017, at 9:26 PM, Anthony Graham notifications@github.com<mailto:notifications@github.com> wrote:\nI wouldn't mind how simple it was but knowing that a default install of portainer was a little more secure would be very reassuring.\nIn my case I'd be concerned about having to run multiple instances of a proxy for this purpose. I'm using swarm and have no need for a proxy as it (swarm) routes all the traffic for me, so this would be extra instance(s) on small VMs only for that purpose.\nin the simplest case:\nLogin request -> failed -> log attempt to db\nLogin request ->\ncheck count(*) from login_failures where failure_timepoint > now() - 5 minutes ->\nif > n don't even check password, deny (show message telling user to wait)\notherwise check_password\n(and also delete old login failures to keep things clean)\nBasically my reason for selecting portainer was low resource use and simplicity of installation / configuration, requiring a proxy would somewhat negate that\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1256-23issuecomment-2D337836166&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=9HizqQ8pnw4nt24pLnDeYSVzgNv2nhKbG1t2OWk0Vjw&s=BYeIkyGdOTLEkBcrqOHPh6Eu9ls29pMSHtw1eGpeupQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTlV-5FHenc92QyCZVdkl2wr9RnDfqks5stweagaJpZM4PqAPM&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=9HizqQ8pnw4nt24pLnDeYSVzgNv2nhKbG1t2OWk0Vjw&s=REdszNjnYv5dHSTs6p4IOH9TlDGa3cEMVzuPX2nexHM&e=.\n. Hi Olli,\nPlease email me, neil.cresswell@portainer.ioneil.cresswell@portainer.io so we can discuss this feature offline.\nThanks\nNeil\nRgds,\nNeil Cresswell\nOn 3/07/2018, at 9:04 AM, Olli Janatuinen notifications@github.com<mailto:notifications@github.com> wrote:\nI had bit spare time so I started to look how to hide these features from UI: olljanat/portainer@d637026https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_olljanat_portainer_commit_d6370263d48b10d534831ef007389cda74dcbe70&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ftPNdpG2W31xA0663iqHC2TkwkflY5aFXFy__23gkbA&s=jIW0tBw0HBxA_7pnHBLiAh2H_dMZWxdJAdRqY6NSwIw&e=\nIf someone wants to test I also pushed docker image to: ollijanatuinen/portainer:readonly-1\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ftPNdpG2W31xA0663iqHC2TkwkflY5aFXFy__23gkbA&s=stGdY7qdDoCCP8RDRU-rcr2niiaS42QSsgbTiEqLZFs&e= I implemented this now with control isReadWrite which is not (yet) defined anywhere. Would that be enough or is there need for more detailed rights? Also do you have good ideas where that should be set (I can try implement that too)?\nOf course access right checks need to be implemented to API level too later but I see that ability to just hide these features from UI would be enough for us who just want to make sure that users does not skip CI/CD pipeline by doing changes from portainer UI. Those who will call API directly knows what they are doing.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1259-23issuecomment-2D401935777&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ftPNdpG2W31xA0663iqHC2TkwkflY5aFXFy__23gkbA&s=VBpfUbPi9t9VoqnuQvH9R07s7B36VsfZGj2KUBHawjw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcRPFbN0-5FMstfYt0llImDFhsFPSrks5uCorsgaJpZM4PsBt-5F&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ftPNdpG2W31xA0663iqHC2TkwkflY5aFXFy__23gkbA&s=sRsDldR7s_ARGKMjs65freInkukxT10ZPJYenbI1bvY&e=.\n. Its next on our list of extensions\u2026 well, in parallel with Audit logs\u2026\nFrom: wiked03 notifications@github.com\nSent: Thursday, 7 March 2019 11:07 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] Feature Addition - Deactivate managerial privileges for groups or for non-administrators (#1259)\nAny update on this feature? We are dying to use portainer, but we really need to have a group of users who can \"look but not touch\" before we can get moving on it.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1259-23issuecomment-2D470296406&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kfFPmQ39PENjdQ7SS6ltB96EVVSAb3tcs7Tr6jz0AXI&s=GFQDIoO7ZDAx1YYaoogsXEblDc8ogOsppGXaDvceoyY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbGkG9bZGNBbBV3-5FefVHTcgDJ7OQks5vUDv7gaJpZM4PsBt-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kfFPmQ39PENjdQ7SS6ltB96EVVSAb3tcs7Tr6jz0AXI&s=3LvZpTmB6tj9pL936wfMz8WdyXdtfIVY71ndLJXX5_k&e=.\n. Did you try portainer/portainer:develop ? Thats the image with the fix in it\nRgds,\nNeil Cresswell\nOn 5/11/2017, at 11:32 AM, Stuart Macfarlane notifications@github.com<mailto:notifications@github.com> wrote:\nJust tested this on this version and it still has the problem:\nportainer-1.15.0-linux-amd64.tar.gz\nOnly works if I supply the \"-assets .\" option no matter weather I execute the binary from inside or outside of the working directory.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1286-23issuecomment-2D341934452&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-9pLYOvcpx6l_Ylr2XQgX4XIbK_cK7pgOrjdp7kW7OY&s=pIoTzPlW9hZSxkwVdnRUXPjNawpIsIJQP7ALTXEdJ9A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTtp9oCnZ0ZIQlcBwgiUumdSomP9ks5szOX9gaJpZM4P6t8T&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-9pLYOvcpx6l_Ylr2XQgX4XIbK_cK7pgOrjdp7kW7OY&s=y51N5o_hnUYk4U7_vJBU5zi94wFRncgdT_UzlLlkpzY&e=.\n. I want the text view to remain.. so please keep that\nRgds,\nNeil Cresswell\nOn 23/10/2017, at 10:19 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\nThe download feature is meant for users to report problems without the need to manipulate (copy and paste) a large block of text (especially in mobile devices). Note the filename: {{containerInfo.date | date:'yyyyMMddhhmm'}}-inspect-{{containerInfo.object.Id.slice(0,12)}}-{{containerInfo.object.Name|trimcontainername}}.json.\nI'd rather, keep the tree view and the save button only, removing the text view. That would provide a \"static\" UX, without data duplication.\nHowever, if you prefer to just remove Save and separate tree/text, should I disable each of them when the view is active?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1310-23issuecomment-2D338598731&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=u_CiBDGt7Ize46KnC53ngjOfObDwzloPZCSVA9xViOw&s=KAIWcVIjn9IRdTR8CVi49xQuA2x7c7tq2O_CXEm3Wg8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld8tLNXOqW5VoyPUEd-2Dl2m7hYqq8ks5svFoXgaJpZM4QBy0p&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=u_CiBDGt7Ize46KnC53ngjOfObDwzloPZCSVA9xViOw&s=AYe04R2fLKvMNNXl5b8Z7ozypqIq6PkcBzkS4JlArLE&e=.\n. Tree/text is fine...\nRgds,\nNeil Cresswell\nOn 23/10/2017, at 10:22 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iZepxT1i_g6Cpm0XVMU3sGwnDhDid664TBHHH_Y0Dmk&s=l1WrVswfa5IGu3-59xqqXI3AYhhrYsCS4JWpdEveO7U&e= do you want the text view to be the default (text - tree)? Or is it ok like it is now (tree -text)?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1310-23issuecomment-2D338599613&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iZepxT1i_g6Cpm0XVMU3sGwnDhDid664TBHHH_Y0Dmk&s=tMjQHd3GHhtNwb_QNVokXWYpSVgosoRy03Jh40kIOOQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQcIJSvFT5KyeTR7Bd6RItqgDIbEks5svFrigaJpZM4QBy0p&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iZepxT1i_g6Cpm0XVMU3sGwnDhDid664TBHHH_Y0Dmk&s=pp-OQULDL3fgF4Knkz8dUwot_KcRLhK18ONotNgHSq8&e=.\n. Whaaaaatttt 100 endpoints.. thats awesome..\nRgds,\nNeil Cresswell\nOn 22/10/2017, at 9:24 PM, ningappa notifications@github.com<mailto:notifications@github.com> wrote:\nDescription:\nif i have 100 endpoints then active endpoint list goes out of the box. if you can add search and select for active endpoints would be better.\nThank you\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1311&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3AsZUzKaNKSH9aCR0Hz7Ipr1IAt4f8icjNWWba3phRA&s=EaoxFFv0cvFJ7FJZWg-TpypdoAst7541xZqHiHk4Bf8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlV-2DUAzyEcV6siA1QwFqMu9byCiwXks5suvvDgaJpZM4QB3TX&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3AsZUzKaNKSH9aCR0Hz7Ipr1IAt4f8icjNWWba3phRA&s=KT-jIdkbZ6Dbj8Ahxz5T-zhTrJL0KiQV-FvLwpRlJ-g&e=.\n. Btw, can you share a couple of screenshots of Portainer on s390x showing the node hardware config? Via twitter to @portainerio is good..\nRgds,\nNeil Cresswell\nOn 25/10/2017, at 8:47 AM, utzb notifications@github.com<mailto:notifications@github.com> wrote:\nDynamically evaluating the architecture simplifies natively building portainer on other platforms.\nos.arch is used for that. It will return x64 (at least on my x86 system), so in that case is mapped to the expected value of amd64. On other platforms, the value is not modified, and that works at least on my s390x system.\n\nYou can view, comment on, or merge this pull request online at:\nhttps://github.com/portainer/portainer/pull/1321https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1321&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-dZ9SWdX_GwuyT3nP-_eEYLPRoep-XfCyyqvP_nPiAg&s=6RoaDUEUqgROUsSLh8cQCJSILWIskhkWfn1ugxT-css&e=\nCommit Summary\n\ncheck for actual arch instead of hard-coding amd64\n\nFile Changes\n\nM gruntfile.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1321_files-23diff-2D0&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-dZ9SWdX_GwuyT3nP-_eEYLPRoep-XfCyyqvP_nPiAg&s=1cLntuppyfcba-YK2S9fYAsMgTPid8txzyoGXTA9SU8&e= (9)\n\nPatch Links:\n\nhttps://github.com/portainer/portainer/pull/1321.patchhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1321.patch&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-dZ9SWdX_GwuyT3nP-_eEYLPRoep-XfCyyqvP_nPiAg&s=vhueuDKkWoQS2neBjnxmOGhbpP-tUNaAoy0BD3V40z0&e=\nhttps://github.com/portainer/portainer/pull/1321.diffhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1321.diff&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-dZ9SWdX_GwuyT3nP-_eEYLPRoep-XfCyyqvP_nPiAg&s=k47THBx1XvrjttEmLBiOnoYYFzzU0mrUESBUtPF7m3s&e=\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1321&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-dZ9SWdX_GwuyT3nP-_eEYLPRoep-XfCyyqvP_nPiAg&s=6RoaDUEUqgROUsSLh8cQCJSILWIskhkWfn1ugxT-css&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleVw7f3RdnWYAseOI-2D0tCDu6Gjdsks5svj7SgaJpZM4QE-5FR8&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-dZ9SWdX_GwuyT3nP-_eEYLPRoep-XfCyyqvP_nPiAg&s=65oAuUW7AyXsJ_GzUQ3w1Unn62yjCu5gMCPd5FyveKk&e=.\n. Thanks... can you click on \u201cengine\u201d in the menu and send that screenshot too?\nRgds,\nNeil Cresswell\nOn 25/10/2017, at 9:38 AM, utzb notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iVnLZjI5rCI6S6Te4PtOnIlpAUD-7U6yo-Xf6RWJKdE&s=Tas69oqE6af_cgcmM7eiH0XGblUUD6AnM8Y-JKYKJEg&e= Sorry, I don't do twitter a lot. Please check out\nhttps://3.bp.blogspot.com/-Ti7qYTKYxlc/We-jaNY-5NI/AAAAAAAAAIc/aBRZO3NGOWE0UxGF-WjGOhBri4JvNFI5QCLcBGAs/s640/portainer-gist-1.pnghttps://urldefense.proofpoint.com/v2/url?u=https-3A__3.bp.blogspot.com_-2DTi7qYTKYxlc_We-2DjaNY-2D5NI_AAAAAAAAAIc_aBRZO3NGOWE0UxGF-2DWjGOhBri4JvNFI5QCLcBGAs_s640_portainer-2Dgist-2D1.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iVnLZjI5rCI6S6Te4PtOnIlpAUD-7U6yo-Xf6RWJKdE&s=bw5uRM-sAGZKNSoLt2-_IMgdufvsaXKG7haJoudiYN4&e=\nhttps://4.bp.blogspot.com/-yf_Bg7Y7DQc/We-jeITcdrI/AAAAAAAAAIg/Sluje1iTABQgxwDYVWTMinKQpKSfgQ3JACLcBGAs/s640/portainer-gist-2.pnghttps://urldefense.proofpoint.com/v2/url?u=https-3A__4.bp.blogspot.com_-2Dyf-5FBg7Y7DQc_We-2DjeITcdrI_AAAAAAAAAIg_Sluje1iTABQgxwDYVWTMinKQpKSfgQ3JACLcBGAs_s640_portainer-2Dgist-2D2.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iVnLZjI5rCI6S6Te4PtOnIlpAUD-7U6yo-Xf6RWJKdE&s=jSMCiF9P9FzNsUietmfJn9XrfP9quNWvZR0v2DzoBoM&e=\nhttps://2.bp.blogspot.com/-vILWoItxdHs/We5sr0Qx_wI/AAAAAAAAAII/FZ72GSKxH8QVCsceeB-uS2KgttuOoacNQCLcBGAs/s640/portainer-images.pnghttps://urldefense.proofpoint.com/v2/url?u=https-3A__2.bp.blogspot.com_-2DvILWoItxdHs_We5sr0Qx-5FwI_AAAAAAAAAII_FZ72GSKxH8QVCsceeB-2DuS2KgttuOoacNQCLcBGAs_s640_portainer-2Dimages.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iVnLZjI5rCI6S6Te4PtOnIlpAUD-7U6yo-Xf6RWJKdE&s=f3pL79PkZBnw0IbXGRO0m9wfh1oiOYE6EFVRDA9WA1Y&e=\nhttps://1.bp.blogspot.com/-8lwrU5TB4pc/We5sw1nDEJI/AAAAAAAAAIM/jH5cNrwf434rzZbqD_rLAGLZe2dvuG4egCLcBGAs/s640/portainer-containers.pnghttps://urldefense.proofpoint.com/v2/url?u=https-3A__1.bp.blogspot.com_-2D8lwrU5TB4pc_We5sw1nDEJI_AAAAAAAAAIM_jH5cNrwf434rzZbqD-5FrLAGLZe2dvuG4egCLcBGAs_s640_portainer-2Dcontainers.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iVnLZjI5rCI6S6Te4PtOnIlpAUD-7U6yo-Xf6RWJKdE&s=Ah6PmgmwcrbCtE4fhfzKqi8UjBsiVUaSzUV3Yrp5Eoc&e=\n(feel free to use in your twitter feed)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1321-23issuecomment-2D339123654&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iVnLZjI5rCI6S6Te4PtOnIlpAUD-7U6yo-Xf6RWJKdE&s=Cy2Ooy55zUIemrlr98ROXmjeDKodMf0FfdVt2hgN0U4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcMdpZFHMxtyMMY6pfOfSZbY9hNhks5svkrOgaJpZM4QE-5FR8&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=iVnLZjI5rCI6S6Te4PtOnIlpAUD-7U6yo-Xf6RWJKdE&s=Ak53-lsnwQts-YC0zoFqGrDS-35GUvrGOY0aHmfX73I&e=.\n. It needs to have the time windows switched to human friendly ranges, eg seconds. 360 seconds, 1000 seconds etc. \nAlso the command to run needs to have a validation before saving.. ie if i can ping google.com as a healthcheck, it doesnt work. Anthony, cant we just prefix the stack name with the endpoint name for internal functions (uac etc)?\nRgds,\nNeil Cresswell\nOn 2/11/2017, at 9:49 PM, Yao Zhao notifications@github.com<mailto:notifications@github.com> wrote:\nFor our usage, each endpoint is a different cluster and environment. So you suggest I start dedicated portainer for each cluster?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1347-23issuecomment-2D341354674&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=V2DTvH_hRTycJgkaGCOuQ2_uSN79EQ8Kia1F40W3ipU&s=fRrTa5z5LLZi7EUdmmIUXk24xHEHzZMQB6bn1Y1aDC4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWUMRwiV-2DxzXwKIoRrNS4flZZGCyks5syYIEgaJpZM4QPUTj&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=V2DTvH_hRTycJgkaGCOuQ2_uSN79EQ8Kia1F40W3ipU&s=2ur_6iicbbJQ5Eoe5gmjJllitLB3PvLFPK1LrSEI9Gc&e=.\n. Thank you.. we will tweet this... do you have a twitter handle so we can reference you ?\nSent from my iPad\nOn 3/11/2017, at 1:52 PM, mojibake notifications@github.com<mailto:notifications@github.com> wrote:\nNot really an issue, sorry. Please close if necessary. I've also posted this on the Dokku page.\nI did a quick write-up of the steps on how to setup a Dokku host as remote to Portainer.\nIt comes down to exposing the Docker daemon over TCP, issuing client/server certificates to enable TLS secured requests while still making the Docker socket accessible to apps created with Dokku.\nSee: https://gist.github.com/woudsma/03c69260715327ee8453f73b121f416chttps://urldefense.proofpoint.com/v2/url?u=https-3A__gist.github.com_woudsma_03c69260715327ee8453f73b121f416c&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LOMfCx8bIPBhc9Ct-_AwssBfKPOE4-Q49VFrvhl4H9I&s=qR0GBXj6ARtJ-Epo7gnF-FfJYaeYK6-qffvC4jCA5Og&e=\nPlease let me know if there are issues. Happy coding!\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1350&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LOMfCx8bIPBhc9Ct-_AwssBfKPOE4-Q49VFrvhl4H9I&s=W9cRkTM1kVVVSUejnfIAurUdpUFr7UcLKpz7oiFghVs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcdEoizV2VVnovZ-5F0dGMZ1JCI9ckks5symPMgaJpZM4QQiiN&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=LOMfCx8bIPBhc9Ct-_AwssBfKPOE4-Q49VFrvhl4H9I&s=WuihsgPznQXHyq3BYkOSUkzybfPW1k9NvUgko0JTNpQ&e=.\n. Awesome.. nice to know\u2026\nFrom: Nathan Baum notifications@github.com\nSent: Monday, 14 May 2018 10:24 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] Add the ability to manage/inspect external stacks (#1351)\nI've found that one can deploy a stack with the same name as an external stack, and this \"overrides\" the internal stack, without appearing to try to redeploy anything. This seems to be a way to promote an external stack to an internal one, as long as you can get a compose file.\nWe use this feature to make stacks manageable in Portainer after bootstrapping a swarm from the command line.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1351-23issuecomment-2D388769746&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=zWrzTSBlN5J4tVNVIETJHF7GC36-WlLVOi3RyGdGvtc&s=R7_h34RfJNjv2d2_-nPKHMXMZU-4ugHcSACdgFT15II&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbXahcQ2jNjaG-2DkOE4-5FeRj6-5F5m97ks5tyVtNgaJpZM4QQv7k&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=zWrzTSBlN5J4tVNVIETJHF7GC36-WlLVOi3RyGdGvtc&s=qEUv1RnDi0R3Pooq3BjSrts2Os9BPBSc_l9CGZQCqUE&e=.\n. Please try again, but use your browser incognito mode to open on first start. Looks like cache issue\nRgds,\nNeil Cresswell\nOn 4/11/2017, at 8:19 AM, alexus notifications@github.com<mailto:notifications@github.com> wrote:\n\nBUG REPORT INFORMATION\nDescription\nSteps to reproduce the issue:\n\npull latest image\nstart it normally\ntry to access it\nTRY to create admin user, when I fill in my password and click create user nothing happens, if I try to click again it says user already exists\nwhen I try to refresh URL, portainer ask me for username and password: on 1st attempt I get \" Your session has expired\" and on 2nd I get \" Invalid credentials.\nI tried to remove ./data and restart did not help...\n\nTechnical details:\n\nPortainer version: latest\n\ndocker pull portainer/portainer\nUsing default tag: latest\nlatest: Pulling from portainer/portainer\nDigest: sha256:8736c3e0fd899229786c8f2198cd3f63fe2815df249b12758f28ef669028057b\nStatus: Image is up to date for portainer/portainer:latest\n\n\nTarget Docker version (the host/cluster you manage):\n\ndocker version\nClient:\n Version:      17.09.0-ce\n API version:  1.32\n Go version:   go1.8.3\n Git commit:   afdb6d4\n Built:        Tue Sep 26 22:42:09 2017\n OS/Arch:      linux/amd64\nServer:\n Version:      17.09.0-ce\n API version:  1.32 (minimum version 1.12)\n Go version:   go1.8.3\n Git commit:   afdb6d4\n Built:        Tue Sep 26 22:40:48 2017\n OS/Arch:      linux/amd64\n Experimental: false\n\n\nPlatform (windows/linux): Linux\n\ncat /etc/debian_version\n9.2\ncat /etc/os-release\nPRETTY_NAME=\"Debian GNU/Linux 9 (stretch)\"\nNAME=\"Debian GNU/Linux\"\nVERSION_ID=\"9\"\nVERSION=\"9 (stretch)\"\nID=debian\nHOME_URL=\"https://www.debian.org/\"\nSUPPORT_URL=\"https://www.debian.org/support\"\nBUG_REPORT_URL=\"https://bugs.debian.org/\"\n\n\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\n\nvia docker-compose: (part of compose)\n    portainer:\n            image: portainer/portainer\n            expose:\n                    - 9000\n            volumes:\n                    - \"/var/run/docker.sock:/var/run/docker.sock\"\n                    - \"./data/:/data/\"\n\n\nTarget Swarm version (if applicable):\n\nsame as host\n\nBrowser:\n\nMozilla/5.0 (X11; CrOS armv7l 10032.21.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.26 Safari/537.36\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1352&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7ItrGBJxGaQ32PSl4oFCsJoDzRqHtr-MQF4H5fks3PA&s=P8angclsfZeYSIUUFGF16RnfX1NG4jr_-oeH9DNtQWk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlT66t4unv0d2HsoJT5HzpBx58qtTks5sy2dKgaJpZM4QRkAc&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7ItrGBJxGaQ32PSl4oFCsJoDzRqHtr-MQF4H5fks3PA&s=ZFA7GJleTMa8dbZ5inTXguPwGqaju_45k1-M0xP4lTU&e=.\n. 398% means 3.98 cpu cores in use...\nRgds,\nNeil Cresswell\nOn 2/03/2018, at 11:48 PM, rafaelmluz notifications@github.com<mailto:notifications@github.com> wrote:\nHi @deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DZ7XtgOUKE-HWvDyJ1IGicKFIzqq_pE_8X-PKmdHYWQ&s=l_Zoy8Kjm2Hi39coBYFJbLhuC0ZjVgCgbRtnBi8bDmg&e= When I see the \"statistics\" of Container. The graphics are send presented on a wrong scale, I believe. Very different from Docker stats for example.\n[portainer-graphics]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_36275313_36895483-2Dcbe69e32-2D1ded-2D11e8-2D990a-2D97893b0d2d41.PNG&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DZ7XtgOUKE-HWvDyJ1IGicKFIzqq_pE_8X-PKmdHYWQ&s=ORSdXmOE89VuMeA7Eq8jUC2RJI3f7k9u03FSLuYLXls&e=\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_36275313_36895539-2Df70b420c-2D1ded-2D11e8-2D9514-2Dc9acd4f97344.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DZ7XtgOUKE-HWvDyJ1IGicKFIzqq_pE_8X-PKmdHYWQ&s=0blb73Kd1BVjJFN_PgNHAxhkslDVe21_vFHh7BR-AbM&e=\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_36275313_36895505-2Ddc0397ac-2D1ded-2D11e8-2D9373-2D94c7fe68024f.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DZ7XtgOUKE-HWvDyJ1IGicKFIzqq_pE_8X-PKmdHYWQ&s=ymlr2EQ8zvqk5x_Ymkx4YamYa9fwDrzRPpwf_9H1d_I&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1371-23issuecomment-2D369888754&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DZ7XtgOUKE-HWvDyJ1IGicKFIzqq_pE_8X-PKmdHYWQ&s=MFnXODWOLTcmLI77ZlyMnpPG9yis5EcL8ePeWznPfTA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfR-2DKjNEsaVDqk4NqAlw69YkM-2DGPks5taSNggaJpZM4QXvQn&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DZ7XtgOUKE-HWvDyJ1IGicKFIzqq_pE_8X-PKmdHYWQ&s=B1YTsvGdHitEDgE_WcPzO--OlpFHm9WAMuqi5Fwjig8&e=.\n. I was actually thinking something similar, but a container that launched a web server with file browser (http file server)  so you can then open the container\u2019s ip in a new tab and search through the files.\nEg https://github.com/PierreZ/goStatic/blob/master/README.md\nRgds,\nNeil Cresswell\nOn 11/11/2017, at 11:03 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI think that we could do the following:\n\nAdd an \"Browse volume\" button in the volume details view\nOn click, deploy a busybox container (or the equivalent on windows) with the current volume automatically bind mounted as read-only inside /volume\nAutomatically redirect to the container console and start an exec with /bin/sh (or the equivalent on windows)\n\nThis would allow to browse the volume content using a shell.\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=kEKsnvBqZWxm4CiQNX9Yw2YaZlpHvCQuPV682KW0eAQ&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1380-23issuecomment-2D343653887&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=sGJ8PJvXHdqX3Kp4PU3Zhhm0F7v1tMiU68jYcf6hnHQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlevALkkqRMvdjqxkgRuuMJ-2DA-5FNC1ks5s1XDxgaJpZM4QaF3T&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=2NtFjhs9DEl0kizZXLTn-2HONyxH8t1FA7-Mc0fTNG8&e=.\n. Deploy halverneus/static-file-server:latest\nSet environment variable PORT=80 and then expose port 80 of the container on the host\nMount an existing persistent volume into /web of the container..\nDone\nRgds,\nNeil Cresswell\nOn 11/11/2017, at 11:03 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI think that we could do the following:\n\nAdd an \"Browse volume\" button in the volume details view\nOn click, deploy a busybox container (or the equivalent on windows) with the current volume automatically bind mounted as read-only inside /volume\nAutomatically redirect to the container console and start an exec with /bin/sh (or the equivalent on windows)\n\nThis would allow to browse the volume content using a shell.\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=kEKsnvBqZWxm4CiQNX9Yw2YaZlpHvCQuPV682KW0eAQ&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1380-23issuecomment-2D343653887&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=sGJ8PJvXHdqX3Kp4PU3Zhhm0F7v1tMiU68jYcf6hnHQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlevALkkqRMvdjqxkgRuuMJ-2DA-5FNC1ks5s1XDxgaJpZM4QaF3T&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=2NtFjhs9DEl0kizZXLTn-2HONyxH8t1FA7-Mc0fTNG8&e=.\n. Or hasotomotiv/web-file-manager\nMount the existing persistent volume in /srv and then start the container\nLogin as admin/admin and you can work with the persistent volumes files in a file manager like setting.\nRgds,\nNeil Cresswell\nOn 11/11/2017, at 11:03 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI think that we could do the following:\n\nAdd an \"Browse volume\" button in the volume details view\nOn click, deploy a busybox container (or the equivalent on windows) with the current volume automatically bind mounted as read-only inside /volume\nAutomatically redirect to the container console and start an exec with /bin/sh (or the equivalent on windows)\n\nThis would allow to browse the volume content using a shell.\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=kEKsnvBqZWxm4CiQNX9Yw2YaZlpHvCQuPV682KW0eAQ&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1380-23issuecomment-2D343653887&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=sGJ8PJvXHdqX3Kp4PU3Zhhm0F7v1tMiU68jYcf6hnHQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlevALkkqRMvdjqxkgRuuMJ-2DA-5FNC1ks5s1XDxgaJpZM4QaF3T&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ApF33mSBib8eSr4McU4ls7Kqf0bqkvFQno-7gNPWRFg&s=2NtFjhs9DEl0kizZXLTn-2HONyxH8t1FA7-Mc0fTNG8&e=.\n. Taking this one step further... why dont we allow the user to browse a running (or stopped) containers file system from a web based file manager... just inspect a container, look for \"graph driver\" and then extract the path (eg /var/lib/docker/overlay/3dd7606afd67c7a2f766aa1b11c3791288a431955681c777496f576a2d722135) then bind mount that to a file manager container.\nI tried it and it works\n\n\n\n. Love this.. although a heading of \u201cQuick\u201d doesnt make sense.. \u201cOpen\u201d or \u201cLaunch\u201d  would be clearer.\nRgds,\nNeil Cresswell\nOn 18/11/2017, at 2:31 AM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\nJust a quick proof of concept, reusing the popover menu proposed in #1377https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1377&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kR5vZkISzrtCjGpJUKYELPrk_BYAgcdAWjPPImETqlA&s=6oiByuY9tTfkEQIhtgN1WdE8bZBRKzniCW74NhK3En4&e=:\n[containersquick]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_6628437_32949588-2Daf2e892c-2Dcba3-2D11e7-2D8baf-2D2d3dc24c047a.gif&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kR5vZkISzrtCjGpJUKYELPrk_BYAgcdAWjPPImETqlA&s=Kj_WemCEE8lhSqm3go5Xt8gI8Sj-O0HB80du2kdn5Mk&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1400-23issuecomment-2D345244237&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kR5vZkISzrtCjGpJUKYELPrk_BYAgcdAWjPPImETqlA&s=AXjaaWeOlHLv7ZQMxumKLTzrmAph3JbqTJ54OXYqri4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrladBso4AH1mh-2DweGL1J0iZvYmLzDks5s3YqNgaJpZM4Qh8Zi&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=kR5vZkISzrtCjGpJUKYELPrk_BYAgcdAWjPPImETqlA&s=Dbma4WExb5SpgKCw-UrD3VvZsLH9EZ9LlAYQO3sIsOI&e=.\n. Trying them now\nRgds,\nNeil Cresswell\nOn 19/11/2017, at 12:19 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\nI built a couple of demo images:\n\nThe expand/collapse \"simple\" approach I proposed: 11384eb/portainer:linux-amd64-popovermenus build loghttps://urldefense.proofpoint.com/v2/url?u=https-3A__travis-2Dci.org_1138-2D4EB_portainer_builds_304115525&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uNJTRzYsfbwPFTE9BCQouDDYrGV8Wv_9IdDvBvcOYcw&s=F8xL-pEX2-OoFlFQuC9Y-SO2eKsf1EgAL_7R4ezJ20A&e=\nThe \"configurable\" solution proposed by @Redsandrohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_redsandro&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uNJTRzYsfbwPFTE9BCQouDDYrGV8Wv_9IdDvBvcOYcw&s=AJxX4txBA-1T_yQ5-MSW5tKWeV7_92bjqfZ4P1OIa_E&e=: 11384eb/portainer:linux-amd64-popovermenus-redsandro build loghttps://urldefense.proofpoint.com/v2/url?u=https-3A__travis-2Dci.org_1138-2D4EB_portainer_builds_304115304&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uNJTRzYsfbwPFTE9BCQouDDYrGV8Wv_9IdDvBvcOYcw&s=kRYbkQRNZET127ZjuEA2q287ToQZKzDHDYVgGUyCueo&e=\n\nNote that these images are far awayhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_compare_develop...1138-2D4EB-3Apopovermenus-2Dredsandro&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uNJTRzYsfbwPFTE9BCQouDDYrGV8Wv_9IdDvBvcOYcw&s=L8I22Fjko8Q9WsUlPIG9raDCrZ0AAeiQD36eGx29fAw&e=. They are meant to test and feel the UX (@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uNJTRzYsfbwPFTE9BCQouDDYrGV8Wv_9IdDvBvcOYcw&s=x9NHmcb-_zYE-wJlPKTxztTyY2qJJcvb7LudqulGSac&e=, both images include popover menus and collapsible widgets in container details and image details views, on top of the images view that you already checked).\nThe configuration is not saved between page reloads. If you move to another view and then come back, the defaults will be shown. @deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uNJTRzYsfbwPFTE9BCQouDDYrGV8Wv_9IdDvBvcOYcw&s=2XucsLX1Ba1gMI8dk2ZbP2tgXaUBcz_Ii2ex_cgGiUM&e= , can this data be saved in the browser?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1402-23issuecomment-2D345478739&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uNJTRzYsfbwPFTE9BCQouDDYrGV8Wv_9IdDvBvcOYcw&s=7xCAAe5oLLr7_bk5OmZ3tJGmnpKPT13h4VFnviBF4RE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQQNa4UyXVimGvLqfNklmERWzkH8ks5s32X8gaJpZM4Qi0N7&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uNJTRzYsfbwPFTE9BCQouDDYrGV8Wv_9IdDvBvcOYcw&s=rIKYsmihzja5J2sEZ7ogiqPG0GfqocUrlY4527oP1rU&e=.\n. Love it..\nredsandro is my favourite...\nRgds,\nNeil Cresswell\nOn 19/11/2017, at 12:19 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\nredsandro\n. What is the image i need to re-pull to test?\nRgds,\nNeil Cresswell\nOn 20/11/2017, at 10:13 AM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\n@Redsandrohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_redsandro&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Nhm_LpxP-852Yglh7-TKBWgmQoKnsIjo5CsAaUUqj_k&s=WvS2bxUBpsiCybb0As-UuAghPwgpt2v4uvb_UNGqiQQ&e=, sure. The previous \"design\" where just placeholders :D. You can pull the image again and try the new iteration.\nI added fa-fw as you suggested. However, instead of using custom styles, I used an \"unbreakable\" btn-group. This makes the width of the column responsive to the number of selected items. Using a btn-group removes the underline, adds borders and provides a background color change on mouse hover. I think this approach is \"cleaner\" than adding custom styles. Lets wait to know what @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Nhm_LpxP-852Yglh7-TKBWgmQoKnsIjo5CsAaUUqj_k&s=9SvImUFDvfx3pR_2hYuZxY0N_nUf_Oo_OtZ9TMZA53g&e= and @deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Nhm_LpxP-852Yglh7-TKBWgmQoKnsIjo5CsAaUUqj_k&s=FlUwuixwLv379Gb-zXCp4y9GiTsD5R_vaOvdeAoiBHk&e= think prior to choosing colors.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1402-23issuecomment-2D345550054&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Nhm_LpxP-852Yglh7-TKBWgmQoKnsIjo5CsAaUUqj_k&s=W51BUBGh094_xOHA8eTRs7ojnDpH0yNxPkmg6d_rYtE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlftTedt7W6d64LK4gsdFlh6dl3W5ks5s4JnwgaJpZM4Qi0N7&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Nhm_LpxP-852Yglh7-TKBWgmQoKnsIjo5CsAaUUqj_k&s=1BSkEmUFe__KMh60iZOU-hURiHrT9dRJ1c2scGPH9dA&e=.\n. OK, i cant see any difference :)\nSent from my iPad\nOn 20/11/2017, at 12:34 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZVeGwCH4wUvHr4NigZ1-oLS78xFFHdBtKApExebTC6w&s=J_ARD4quIzNR6swEQKyTGs3VSN1nFXIwn6Z2HrRcN38&e=, 11384eb/portainer:linux-amd64-popovermenus-redsandro\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1402-23issuecomment-2D345559783&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZVeGwCH4wUvHr4NigZ1-oLS78xFFHdBtKApExebTC6w&s=QQDr4eJyXYr8XjnOp7EH0yK70m19MBL7hgsRYkcVyfo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbb92sU6kLF-2DjmTh5nED0aLFeww4ks5s4LsFgaJpZM4Qi0N7&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZVeGwCH4wUvHr4NigZ1-oLS78xFFHdBtKApExebTC6w&s=wiRzgn7SQLE6h8bXZg5Tbd5EsvWt10c78tXvzAifMLU&e=.\n. need to find a way to save settings though. cannot use it as is now (forgetting my settings when i navigate away from the page).\nSent from my iPad\nOn 20/11/2017, at 12:34 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZVeGwCH4wUvHr4NigZ1-oLS78xFFHdBtKApExebTC6w&s=J_ARD4quIzNR6swEQKyTGs3VSN1nFXIwn6Z2HrRcN38&e=, 11384eb/portainer:linux-amd64-popovermenus-redsandro\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1402-23issuecomment-2D345559783&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZVeGwCH4wUvHr4NigZ1-oLS78xFFHdBtKApExebTC6w&s=QQDr4eJyXYr8XjnOp7EH0yK70m19MBL7hgsRYkcVyfo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbb92sU6kLF-2DjmTh5nED0aLFeww4ks5s4LsFgaJpZM4Qi0N7&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZVeGwCH4wUvHr4NigZ1-oLS78xFFHdBtKApExebTC6w&s=wiRzgn7SQLE6h8bXZg5Tbd5EsvWt10c78tXvzAifMLU&e=.\n. Love it.... I think that for people that donate say, over $25, then they are given a key (or something) to remove \u201cdonate\u201d from the header\nRgds,\nNeil Cresswell\nOn 23/11/2017, at 9:27 PM, 1138-4EB notifications@github.com<mailto:notifications@github.com> wrote:\nPortainer does not include any external reference, only resources within the application are linked to each other. It would useful to add references to all these resources which are part of the project:\n\nportainer.readthedocs.iohttp://portainer.readthedocs.io (better if pointing to the corresponding version/branch)\ngithub.com/portainer/portainerhttp://github.com/portainer/portainer\nportainer.iohttp://portainer.io\nportainer.io/slackhttp://portainer.io/slack and/or portainer.slack.comhttp://portainer.slack.com\ngitter.im/portainer/Lobby\n\nThe most straighforward solution is to add an \"About\" page to the sidebar, and include most of the content of the READMEhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_blob_develop_README.md&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pcEviYfDt4MOaP0GuXQjPOzQj9WnDGtsXtY1xqxW6UQ&s=5DWlcNGRQyhHNRA4qJIfNWkPtqTDknNotOe3JLOGJ9A&e=. But I think that better integration is possible:\n\n\"Small\" Fork me on Github ribbon fixed to the bottom-right, linked to github.com/portainer/portainerhttp://github.com/portainer/portainer.\nA \"Support\" item added to the sidebar, but fixed to the bottom (above the logo), linked to a view with:\n\"Getting started\", \"Getting help\" and \"Limitations\" sections of the README.\n\"Reporting bugs and contributing\"\n\n\nAn \"About\" view, linked from the portainer.iohttp://portainer.io logo in the bottom of the sidebar, including:\nThe \"Introduction\" of the README.\nA message \"Portainer is brought to you with love by the portainer.iohttp://portainer.io (linked) and contributors (linked)\", along with a brief explanation on the LICENSEhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_blob_develop_LICENSE&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pcEviYfDt4MOaP0GuXQjPOzQj9WnDGtsXtY1xqxW6UQ&s=dSO143AsCY6Awc53AxnxOsEco5dyYz3X7moz-rppaXI&e=, it being free and open source, and the need to have donationshttps://urldefense.proofpoint.com/v2/url?u=https-3A__www.paypal.com_cgi-2Dbin_webscr-3Fcmd-3D-5Fs-2Dxclick-26amp-3Bhosted-5Fbutton-5Fid-3DYHXZJQNJQ36H6&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pcEviYfDt4MOaP0GuXQjPOzQj9WnDGtsXtY1xqxW6UQ&s=2v25akXg423zHOHjlSLJJW2pPioEjlq0qMI575TYFaA&e= to help improving it.\n\n\n\n\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pcEviYfDt4MOaP0GuXQjPOzQj9WnDGtsXtY1xqxW6UQ&s=eTiOYeDzcdQ1Srhn2a_09GYsiEf46G0vb7zXPAnFx8c&e= suggested adding a button to the header bar, as in:\n[image_uploaded_from_ios_720]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_6628437_33163128-2D2fb0f2be-2Dd02d-2D11e7-2D8fc7-2D2db313a03f46.jpg&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pcEviYfDt4MOaP0GuXQjPOzQj9WnDGtsXtY1xqxW6UQ&s=e2TMivnVEoF5hqKfrtB3uhd97N0lru27KodumG_VZH4&e=\nI think that it could link to the \"About\" page proposed above.\nSee comments about redesigning the header bar in #1407https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1407&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pcEviYfDt4MOaP0GuXQjPOzQj9WnDGtsXtY1xqxW6UQ&s=aVom8oyqfRvy-T5dguNkc6_KSoTZEubjS1pjUooKWwE&e=.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1429&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pcEviYfDt4MOaP0GuXQjPOzQj9WnDGtsXtY1xqxW6UQ&s=JfSh7YXhwjro97dbCpFwnfzzouiKMJyI7ubxRHawDuw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldRW5aDMqwETzPN0Vuzhoi9dMEN2ks5s5SxtgaJpZM4QoZoU&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pcEviYfDt4MOaP0GuXQjPOzQj9WnDGtsXtY1xqxW6UQ&s=j11Wtol9a84yy5ePmy9uIl56gLDghdwGr0Z6peuAoUY&e=.\n. Thomas, is this something you can work on to create a workaround under our engagement model? If so, drop me an email...\nSent from my iPad\nOn 26/11/2017, at 7:04 AM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nYeah it's a known issue and a docker api limitation for the moment\nIt's like when you run docker ps on your manager node, you see only containers on that node\nYou can have a look at #461https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_461&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZCIgjrZdTmDIXqKd4E5L5awE28r7nzmgrbYhp2zulgE&s=JX1V7RXPucMn4e1UG7G77X-xaNNMqMRrnIuCOMfYzbw&e= for more details\nFor the moment you can't have a global view of all your containers, but you can add the worker endpoint to portainer, when switching to this endpoint, you will see worker containers\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1442-23issuecomment-2D346974474&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZCIgjrZdTmDIXqKd4E5L5awE28r7nzmgrbYhp2zulgE&s=ngYTfKT5v0DOkHGky_f3P0Of7kAqZVW1QJoYPhJWOTg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSYbj1w9snEewYljdSVJbOSGzPMyks5s6Kr9gaJpZM4Qqk82&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ZCIgjrZdTmDIXqKd4E5L5awE28r7nzmgrbYhp2zulgE&s=R0z2qrbYmuGstZJLP-I3QuV_N8hh0z1hj7sJmI2CqsI&e=.\n. why not redirect the templates to you own json file?\nSent from my iPad\nOn 29/11/2017, at 2:33 AM, Zlatko \u010calu\u0161i\u0107 notifications@github.com<mailto:notifications@github.com> wrote:\nIt's absolutely a nice feature, don't get me wrong. But, I can imagine I would like to either:\n\nhave my private list only, with only the production approved images (because, I only use that)\nif I give access to other people, they they're not click-happy, installing various images from unknown sources on an otherwise production setup, just because it's so easy?\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1448-23issuecomment-2D347524295&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tEaBNy4xt8g5_nCagDHvMuAdsEvOCu2FVPaX8zZElZo&s=lQonxoMwyu-VEPDSeeg6guEreBfXVULbyapSR10ta4E&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZdZrsYt6mKBQOWB96XHbsLqhzQIks5s7AuMgaJpZM4QtIF6&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=tEaBNy4xt8g5_nCagDHvMuAdsEvOCu2FVPaX8zZElZo&s=Yh7pUS8mmURdFyPt3-qtq7NDpGQ4xE6HDQmH5b_pb3A&e=.\n. This is not a bug, its a limitation of Docker. You are unable to edit a config once created. You need to create a new config, edit yor service to use the new config and then delete the old.\nRgds,\nNeil Cresswell\nOn 29/11/2017, at 6:01 PM, dani-bl notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nSteps to reproduce the issue:\n\nCreate a config in portainer\nTry to edit it or try to create a new one\n  3.\n\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version: 1.15.2 & 1.15.3\nTarget Docker version (the host/cluster you manage): 17.09.0-ce\nPlatform (windows/linux): linux\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer): sudo docker service create --name portainer --publish 9000:9000 --replicas=1 --constraint 'node.role == manager' --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=/volumes/portainermount,dst=/data portainer/portainer -H tcp://192.168.20.67:2375 -H tcp://192.168.20.66:2375 -H tcp://192.168.20.65:2375\nTarget Swarm version (if applicable):\nBrowser: Chrome 62.0.3202.94 & firefox 57\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1453&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=P2Vl4RSqavtjyuEN9XBH-hRtDtVgmqAAMNqFmdi7STg&s=xbSZu9vRuMTiqBMwJ0dyXfK7Q3lkO4ywh8SnOZU98-Y&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlW29olyt1y6p12N7FFNXnbuFK4faks5s7TmOgaJpZM4Quxz8&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=P2Vl4RSqavtjyuEN9XBH-hRtDtVgmqAAMNqFmdi7STg&s=et9x96qBQ0xoqQkh1ghxrQ7TN3sd7Ge9qdz-nWNQdn0&e=.\n. Please try using incognito mode in your browser.\nI saw that same behavior once, but never happened again.\nRgds,\nNeil Cresswell\nOn 29/11/2017, at 6:09 PM, dani-bl notifications@github.com<mailto:notifications@github.com> wrote:\nHi, thanks for the reply, but i'm not able to create a new config, i got the empty page and i'm not able to write in the text field, even if i destroy the first one, i tryed to restart portainer but still the same behavior\nThanks\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1453-23issuecomment-2D347827976&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=y1hgQIbCKKk-I5yTRGkcYYSal8gNDwCKj_hBZYAXc_w&s=Yc4fC-_MkW3oWAwqCbhdhZ_ngxjZ4ic5HYwV8JooIK4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlRvX0e-5FuB3G-5FeAdKPd3kZXMIF-2DFWks5s7TtGgaJpZM4Quxz8&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=y1hgQIbCKKk-I5yTRGkcYYSal8gNDwCKj_hBZYAXc_w&s=qMutjkD4dQRkuoCPQN0E4HKF1uhYZ5rpnGv5kubDky8&e=.\n. This is not an issue.\nPortainer is based off \u201cscratch\u201d so we have no bash in the container, which means you cannot console or exec into the container.\nRgds,\nNeil Cresswell\nOn 1/12/2017, at 10:44 PM, sergioverde90 notifications@github.com<mailto:notifications@github.com> wrote:\nCannot connect to container via exec /bin/bash or /bin/sh\nSteps to reproduce the issue:\n\ndocker run -d -p 1111:9000 --name portainer -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\ndocker exec -it portainer /bin/bash\n\nrpc error: code = 2 desc = oci runtime error: exec failed: container_linux.go:247: starting container process caused \"exec: \"/bin/sh\": stat /bin/sh: no such file or directory\"\nTechnical details:\n\nPortainer version: portainer:latest\nTarget Docker version (the host/cluster you manage): Docker version 17.03.0-ce, build 3a232c8\nPlatform (windows/linux): Ubuntu 14.04.05 Trusty\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer): docker run -d -p 1111:9000 --name portainer -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nTarget Swarm version (if applicable): N/A\nBrowser: N/A\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1454&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=GMSdFfJYrAcFCD9o0dFP-cvXl_4y0FEiwDQrU_wr5Dk&s=80OD1FffIfHsybxgcjYedxMIsLVzsJ2OCAWYbU_ZNw8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTf4tzKqBJNMtwx-5FK9MOUp9HdBO4ks5s78qAgaJpZM4QyGLB&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=GMSdFfJYrAcFCD9o0dFP-cvXl_4y0FEiwDQrU_wr5Dk&s=w6bVscrXTAuOj2eKPeyfYGHWQoinTUSsJmSY53gYzbU&e=.\n. We can, but you would still need to define which users can access which endpoints... unless we switch \u201cteams\u201d to be based on an LDAP group..\nRgds,\nNeil Cresswell\nOn 9/12/2017, at 8:29 AM, Yanis LISIMA notifications@github.com<mailto:notifications@github.com> wrote:\nHi LDAP authentication is great but is it possible to have a switch to enable autocreate users ?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1483&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hmnIAffQMcto5tvSPmMMdaWs-QW1o8TV2HHDRZnhMt0&s=ota0FOoR8rNY-fDxPbNmp5-SZC6OIb1qumK7pivMzSE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldSZHhVDOIMwagBbaeMroEXfIyTkks5s-2DY4LgaJpZM4Q7ilt&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hmnIAffQMcto5tvSPmMMdaWs-QW1o8TV2HHDRZnhMt0&s=gBHIZC97XkHu6YovhKkMIWxCksNm4oweW-Oagc6Sd8k&e=.\n. I agree with ldap - team mapping. When a user logs in, if they are a member of a ldap group that has a corresponding portainer team associated, then autocreate their account in that team. Try pressing ctrl f5 in the browser to force a cache reload\nRgds,\nNeil Cresswell\nOn 13/12/2017, at 9:24 PM, Zamoyski0 notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nA footer displays wrong version number. It is \"1.15.0\" while it should be \"1.15.5\".\n[capture]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_16852367_33928633-2De3d079ea-2Ddfe6-2D11e7-2D8bdf-2D526285975f31.PNG&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vanSlf5YLyAPzrD57tRJoIwyiGByoJ-Kkh5frYH2R94&s=U36gQp3fn8PISvkizLJTOwYhcjlORM9Qzmjg_cFDeA0&e=\nTechnical details:\n\nPortainer version: 1.15.5, 1.15.4 (tested on both)\nTarget Docker version: 1.13.1\nPlatform: linux\nCommand used to start Portainer: sudo docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\nTarget Swarm version (if applicable): -\nBrowser: Opera 49.0 (64-bit)\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1503&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vanSlf5YLyAPzrD57tRJoIwyiGByoJ-Kkh5frYH2R94&s=5MEPcn-rVqwN6HvLDZAfvrv8wiCwHTVN3_5rtVjNQ-Q&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXUECgDbrelNpLyVWRU-5FWANx7q3Fks5s-5F4mngaJpZM4RAKx3&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vanSlf5YLyAPzrD57tRJoIwyiGByoJ-Kkh5frYH2R94&s=G1KRUS74Ksd7bgAAJspdYT6xPbQbQW5vdSi6ZfNXYyw&e=.\n. The docker swarm leave command only exits the worker from the swarm, you also need run \u201cdocker node rm \u201d on a manager node to remove the old node from the list.\nhttps://docs.docker.com/engine/swarm/manage-nodes/#leave-the-swarm\nRgds,\nNeil Cresswell\nOn 20/12/2017, at 7:48 AM, Kirby Kuehl notifications@github.com<mailto:notifications@github.com> wrote:\nFrom the swarm page, there is no way to delete nodes that have been removed from the swarm\nSteps to reproduce the issue:\n\nFrom a worker node, type docker swarm leave.\nRefresh Swarm tab in portainer (1.15.2 in this case). Note that Status is Down.\nAttempt to remove down node. I migrated some things, and wanted the node deleted.\n\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version: 1.15.2\nTarget Docker version (the host/cluster you manage): 17.09.0-ce\nPlatform (windows/linux): Linux\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nTarget Swarm version (if applicable):\nBrowser:\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1517&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Epc7e3xVYOlji5fO5d2PGxm0VlNWTEuC6nviFyLR_a8&s=hX5AiTxvN3s5HY6eQ4-3OO2s6-TnK2I2WyX-looc2X4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWwmcu-5Fc8biQnsq7PeT1-5F9d8pOUQks5tCAT0gaJpZM4RHZU1&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Epc7e3xVYOlji5fO5d2PGxm0VlNWTEuC6nviFyLR_a8&s=59QnYpIm7qFoSInvApdE8bi_lcrwRAe8fal35NTpKZQ&e=.\n. This will be made available this month as an extension.\nRgds,\nNeil Cresswell\nOn 15/02/2019, at 11:40 PM, Karim Vergnes notifications@github.com<mailto:notifications@github.com> wrote:\n+1 For SSO which could allow for adding extra sign-in steps (like TOTP)\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1525-23issuecomment-2D463992718&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Se75cik19CnEjHkedsgfZ1dMCYioSbNl6M0bG2r3hI8&s=KsT8yqP8SiFEGYuQHfICWcDUPkZQa7j7hpGY3-2OwWE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlc6hKLXo3Vi0Q5nIrlgKXqK2F4jiks5vNo6UgaJpZM4RJiy3&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Se75cik19CnEjHkedsgfZ1dMCYioSbNl6M0bG2r3hI8&s=nZy_eQU2K1QT5io8GkzhtkfBS_TpI54t7bk9VernNaM&e=.\n. Lukas, please email me neil.cresswell@portainer.ioneil.cresswell@portainer.io and we will give you early access to the next portainer release and a trial license for oauth. You can be one of our uat testers :-)\nRgds,\nNeil Cresswell\nOn 27/02/2019, at 9:25 PM, Lukas M notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=R4fE3ykyrYJmO64S_qKJH5DtcZ7wEM2Qq2F5uB5QSNA&s=qYz0gMCzZHVX2SLeqhft5XoVNczgDQuLET4JrpZBq0k&e= Is there any PR to track for this oauth extension? Thanks\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1525-23issuecomment-2D467768662&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=R4fE3ykyrYJmO64S_qKJH5DtcZ7wEM2Qq2F5uB5QSNA&s=g4QPHzio8JkJFgi15j3xCeTZFf-o2QHrFrg2ZwHqBNo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlRmUjpMTbV5LKLSwm-2DUiwKkFLzKqks5vRkDpgaJpZM4RJiy3&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=R4fE3ykyrYJmO64S_qKJH5DtcZ7wEM2Qq2F5uB5QSNA&s=Lz7tU8xr_jDolMYLjrWjo59v5kJUmF_F70hP0KaLMHQ&e=.\n. Yes, but we are making them extremely cost effective. Gotta find a way to fund development dont we.\nRgds,\nNeil Cresswell\nOn 27/02/2019, at 9:53 PM, Lukas M notifications@github.com<mailto:notifications@github.com> wrote:\nUps.. Is it paid/enterpise feature? I dont need it then :)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1525-23issuecomment-2D467777518&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dvpBF2Of9btcQDaL5Zswfr0amnefaRxPhmMBhO5vshY&s=J6nPnbJ0wCXhytUbRuwJo7DjXEFXdTBB1v1KGImJI-4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlR-2D-2DFvQ2dX69famQf4Ffhm1llUckks5vRkeLgaJpZM4RJiy3&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dvpBF2Of9btcQDaL5Zswfr0amnefaRxPhmMBhO5vshY&s=V3G9aqm76PxdrxwP_NThKnx31T3YJNSuHfvQm0IvTxA&e=.\n. We are aiming to release a number of extensions that each add a piece of bespoke functionality, and price them at $9.95 per year.. basically the same price as a lunch.\nRgds,\nNeil Cresswell\nOn 27/02/2019, at 10:26 PM, Lukas M notifications@github.com<mailto:notifications@github.com> wrote:\nNo problem, totally understand to this. I thought that it was community contribution :)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1525-23issuecomment-2D467788431&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JL1hWsPF33NA1iiSjywVDM9rr8U_j20karaanJnbP28&s=9irh0g2BnKX98rE_t-Tn4qTi_uSk5kIhQPg_-adqc88&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTpyZzknMKxUvHQN4GjsYbSOPUAEks5vRk86gaJpZM4RJiy3&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JL1hWsPF33NA1iiSjywVDM9rr8U_j20karaanJnbP28&s=wUG2jdTwALRvq3keU8Iq4-8eOHvTQhtpJ-3giiY-_LE&e=.\n. I agree. We should offer this checkbox for all deployments, stacks, services, containers, and templates.\nRgds,\nNeil Cresswell\nOn 13/01/2018, at 4:22 AM, Sam Kleiner notifications@github.com<mailto:notifications@github.com> wrote:\nWould anyone be open to the idea of adding a checkbox that gives the option to map container ports to the same host port.\nBy default the I believe publish all exposed ports just maps to a random host port. Very often I find myself just mapping 80:80, 443:443 for local development. If I already have these defined in the docker file it would be nice to have that checkbox to automap.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1534-23issuecomment-2D357266615&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HOiszU9l0ajfw0GyA0IqoXqCDbjhKaTqUpvNegDj6Cw&s=EbIWb--yivN0mss3SISeXw67JGhiXnlJPeAY-iHowGo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTJ-5FKKwB0M4lpU99HFvUxljl5Rt9ks5tJ3iggaJpZM4RM6Tt&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HOiszU9l0ajfw0GyA0IqoXqCDbjhKaTqUpvNegDj6Cw&s=jSbwK18YgTSMcz9u_Jnjzkb9OO9A3d328AF0XBrkWWY&e=.\n. No, portainer does not support this.\nRgds,\nNeil Cresswell\nOn 28/12/2017, at 9:55 PM, Haxy89 notifications@github.com<mailto:notifications@github.com> wrote:\nIt is not a linuxserver trick. Almost every container in docker hub support setting PUID and PGID.\nSo I am asking is portainer support it currently?\nFor example official plex: https://hub.docker.com/r/plexinc/pms-docker/https://urldefense.proofpoint.com/v2/url?u=https-3A__hub.docker.com_r_plexinc_pms-2Ddocker_&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dV3PqtBLpw9to9qgp1htCO09MwS69wyqo4MMM2fphv8&s=45fADsX3kU1fGEIDoO9eODKZqC31yqaUGGusXrzs1Xg&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1535-23issuecomment-2D354253682&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dV3PqtBLpw9to9qgp1htCO09MwS69wyqo4MMM2fphv8&s=YRTKsPKztPlwuzh0Gdtow6_r5UNnNTPHb4AglF648UQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTlg7bTvoBdtz0dDpg5qMtZAuez5ks5tE1eNgaJpZM4RM-5FCX&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dV3PqtBLpw9to9qgp1htCO09MwS69wyqo4MMM2fphv8&s=nuxBRGGPfEqNyqE_qy4mXxUQw7rG5-u4W7pUHQSIzWU&e=.\n. We do not (nor will we ever) provide the ability to completely whitelabel Portainer. We only provide the ability to change the logo, and to repoint our templates to  your own json file.\nIf you want to completely whitelabel, you must fork our code, customise, and then manage your own customised branch.\n. Our DB is Bolt, not SQLLite... Ctrl Shift R to force a refresh\nRgds,\nNeil Cresswell\nOn 3/04/2018, at 10:13 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@mateuszdrabhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_mateuszdrab&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=6y8o1T1bt6414RVu0bvfNaw8AujEvXQ942U-m1Aod-Y&s=RVso4wiRkFvLfzEaQATodjIubDbp9PPHxP927S5IEPo&e= clean your browser cache and then access Portainer UI again, some data might still be persisted.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1571-23issuecomment-2D378063047&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=6y8o1T1bt6414RVu0bvfNaw8AujEvXQ942U-m1Aod-Y&s=uNTN7vX_Q7LjPPHdnpjyYXfMd3aV6RERoP-oqV7z3Lw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXFJ0vAZdEeCzhlVB6s02FZlgPP5ks5tkqKdgaJpZM4RhQ7F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=6y8o1T1bt6414RVu0bvfNaw8AujEvXQ942U-m1Aod-Y&s=FGvy7e8LiJ8jKNNOYDGkM2xVLq5VqYr0natTsZDqQGI&e=.\n. I agree.. please make that default change anthony.\nRgds,\nNeil Cresswell\nOn 5/07/2018, at 11:48 AM, Tai Lee notifications@github.com<mailto:notifications@github.com> wrote:\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hSiMzku-iqdlD5GN64xn_DHxJi6NNL2nAKVAZKDTXcE&s=YNVKmDcZPrsMpzFg8Icbe7GSa_uzSYQNzRBJ6QjT4f8&e= I think the new modal that asks if we want to update a pinned service image on update is great, but it should be opt-in instead of the current opt-out behaviour. E.g. the default should be to NOT update, requiring the user to toggle the button before clicking OK to go ahead with the update.\nThe reason is that pulling a new version of a service is potentially a dangerous operation when done in isolation from the rest of your project stack. And there are equally valid (possibly even more common) reasons to \"update\" a service without updating the image being used (e.g. to rebalance replicas across the swarm).\nSince this is potentially a dangerous operation, and we should be really sure the user actually wants to do this. Currently it's too easy to click update then click through the prompt on auto pilot.\nIf someone does this now, they could end up with a broken site. If we change to opt-out, the worst that can happen is they have to do it again and remember to check the box the second time.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1577-23issuecomment-2D402572858&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hSiMzku-iqdlD5GN64xn_DHxJi6NNL2nAKVAZKDTXcE&s=QmZ7ztQeUb09rwOLSqgXE47JxZ_sUcmJPahZ5OjOvmM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTWpBq-5FA2MIjCuz9sJjq5x5VO-5F7dks5uDVQugaJpZM4RkWqF&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hSiMzku-iqdlD5GN64xn_DHxJi6NNL2nAKVAZKDTXcE&s=ggFmggRJS831fvS-tm9LUjYaBkusQ5jrVLx8LLYeScU&e=.\n. Agree. Many times i complete all container settings, only to then realise i forgot to precreate a volume. Need cancel then go create vol and start again.\nAnthony, please add this to the list.\nRgds,\nNeil Cresswell\nOn 24/01/2018, at 10:27 PM, Jimmy Merrild Krag notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nCurrently it is only possible to map an existing volume to a new container. It would make workflow much smoother if we could just define the name for new volumes to be created with the container, like it's possible on the command line.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1600&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wwTLxA3Kk5MD_xXZLBm1APjmeiaeI1VruFwGRJWR9Qg&s=SeCScOIe9KZS9qW5knzD0LywDwYKB90Z7nNnxzFHJqc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlagvgKiNgznQWvTDFWpfFey06-5FkQks5tNvdwgaJpZM4Rq84X&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wwTLxA3Kk5MD_xXZLBm1APjmeiaeI1VruFwGRJWR9Qg&s=djvGdbHAOmV7wUYu0veMFCIqFaOPg9OTFkHKxU4dZkc&e=.\n. Agree.. we need to crowdsource that feature tho...\nRgds,\nNeil Cresswell\nOn 21/02/2018, at 7:35 PM, trosemann notifications@github.com<mailto:notifications@github.com> wrote:\nI still think that portainer needs the possibility to use the docker save/load functionality since portainer often is the only interface to docker on a hostsystem as described in #935https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_935&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=K_U_kYm2y9jgh8Vq-FE31rkL72dQ-j8a-4k3PeAm6TU&s=IM8DYKmcHFtLVeK9rZAU3z9j2qKcRWJPjqi1ksOwrx0&e=. And the reason that portainer is the only interface to docker ist most likely security. You don't want to give customers access to your host via SSH. And for security reasons it won't be possible to bind the hosts docker socket to a container because if bind is allowed, you basically would have full access to the system. So the bind option will be blocked and you won't have the possibility to use docker load. That's why we need save/load option in portainer. This feature is quite important. Our experience is that companies create images for costumers and only provide tar balls. They don't want to upload their images to any repository.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1608-23issuecomment-2D367227898&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=K_U_kYm2y9jgh8Vq-FE31rkL72dQ-j8a-4k3PeAm6TU&s=oeCV3AQh95ficjJJe0TGEot1r4RKJQIZJpYzBNziUFU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZHF8ganh3KDifHfU1qYPV-2DLdfNTks5tW7krgaJpZM4RwxST&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=K_U_kYm2y9jgh8Vq-FE31rkL72dQ-j8a-4k3PeAm6TU&s=Xlrkj8evsaRdLNSzJqenWXWyhYiE2g4kCZn0c2rJUrU&e=.\n. As long as the docker swarm api exposes this information, then we can add it (https://godoc.org/github.com/docker/swarmkit/api)\nRgds,\nNeil Cresswell\nOn 12/06/2018, at 11:02 AM, Owen Rubel notifications@github.com<mailto:notifications@github.com> wrote:\nI second this. Definitely need to see tokens associated with the swarm. I can pull up token via a command of:\ndocker swarm join-token [OPTIONS] (worker|manager)\nSo this should be something easy to display with the nodes (or at least with the manager node) so we can see the associated token.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1612-23issuecomment-2D396680670&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hd16PNupfWGLPk-AJLEKZIOwNmBZDvu4c8sp3bksDMg&s=J3jwg9GQ8XwxzuIhzxlNSadXekLr7W3gLDS-wVRr7KY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlT2CiDLw-5Fo02-5FpyhEWMMRMTGy2tHks5t8AIpgaJpZM4RzGex&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hd16PNupfWGLPk-AJLEKZIOwNmBZDvu4c8sp3bksDMg&s=ePaeHgAU-IOuEEOLcdjzrK_opNm1euca35HDQjKGbUo&e=.\n. We do plan to add Kubernetes support in the future, but this will be limited to Cloud Provider Managed Kubernetes, eg Azure Kubernetes Service.\nWe don\u2019t plan to add support for self-hosted Kubernetes (although there may not be any differences between cloud provider and self-hosted, our support will only be for Cloud).\nFrom: Olli Janatuinen [mailto:notifications@github.com]\nSent: Friday, 25 May 2018 3:13 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] FEATURE REQUEST: Support Kubernetes (#1637)\nI don't see any issue on support of Kubernetes if you get enough resources to add it and and still keep Swarm fully supported but I also don't see any problem if you never will implement Kubernetes support and keep all focus on Swarm.\nThere is many good Kubernetes management tools already but after Rancher decission to focus all new development to Kubernetes there is just Portainer and Docker UCP (which requires enterprise version of Docker) left for Swarm.\nIMO Kubernetes is too complex solution to simple issue which why I like Swarm more and currently Swarm is also only real option for us who need to be able run mixed Linux and Windows workloads on production.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1637-23issuecomment-2D391928761&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=p4Bg05b4vwsf9LtcQ1CswOjMX5x0T_uB_MYgWbLys2I&s=FCPZUfIf2U8bigeejkq3_VArez80y1idFpbMYabvKHw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlecAVhXmjM3YzZBOmE8Y8Vn5Iu1hks5t13ahgaJpZM4R7Sbq&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=p4Bg05b4vwsf9LtcQ1CswOjMX5x0T_uB_MYgWbLys2I&s=ewXcO0OFnvWxsGbXqF4CjePCxexnghlKFnJr_S9YxNo&e=.\n. Interesting way to add Kubernetes deployment support to Portainer..\nFrom: Olli Janatuinen notifications@github.com\nSent: Wednesday, 19 December 2018 11:06 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] FEATURE REQUEST: Support Kubernetes (#1637)\nFYI. Compose to Kubernetes looks to be now open sourced and there is already guide how to install it top of AKS https://github.com/docker/compose-on-kuberneteshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_docker_compose-2Don-2Dkubernetes&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dmEFAAB2pplwdogA3eEU035v2IclEbPZkPyerYh54Dc&s=SDfYfVewvNWS8G78Y535zv-aoLs_TV78WFdZUmnJ0tc&e=\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1637-23issuecomment-2D448388304&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dmEFAAB2pplwdogA3eEU035v2IclEbPZkPyerYh54Dc&s=3coQCVpqioARRvih8yKmauOgcV87wIFvSuJbP7REySQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbCOTMNPiWlRELx4G-2DFhG6kOBXoUks5u6WavgaJpZM4R7Sbq&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dmEFAAB2pplwdogA3eEU035v2IclEbPZkPyerYh54Dc&s=-t5-7I0SPMF477g74oCv1c7hQ1c-1ezL0XOeR7fb_Qk&e=.\n. Not a bug, or intentional... limitation of Docker API.\nOther than services, we can only retrieve information from the host upon which Portainer is running. Its why we are building an agent to work around this limitation.\nStay tuned.\nN\nRgds,\nNeil Cresswell\nOn 8/02/2018, at 1:51 PM, Tanner Chung notifications@github.com<mailto:notifications@github.com> wrote:\nI'm not sure if this is a bug or intentional but when I go to an overlay network and click into it, it shows the containers that are attached to the network, but only the ones that are on the master node. It does not show the containers on the overlay network that are on a worker node.\nSteps to reproduce the issue:\n\nCreate an overlay network\nDeploy a stack on this network\nDeploy another stack on this network that constrains services to worker\nView the containers in a network through portainer\n\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nTechnical details:\n\nPortainer version: 1.16.1\nTarget Docker version (the host/cluster you manage): 18.01.0-ce\nPlatform (windows/linux): linux\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\n\nportainer:\n    image: portainer/portainer\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - $PWD/infra/portainer:/data\n    networks:\n      - proxy\n    deploy:\n      replicas: 1\n      placement:\n        constraints:\n          - node.role == manager\n      restart_policy:\n        condition: on-failure\n      labels:\n        - traefik.enable=true\n        - traefik.docker.network=proxy\n        - traefik.port=9000\n        - traefik.backend=portainer\n        - traefik.backend.loadbalancer.sticky=true\n        - traefik.frontend.passHostHeader=true\n        - traefik.frontend.rule=Host:portainer.example.comhttp://portainer.example.com\n\nTarget Swarm version (if applicable):\nBrowser: Chrome\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1641&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DjGNNCN49mhQMAHcn7IUZfnOxpirBYf82JB_1PeW4Kg&s=c2wJ0HQAr7DRtSzbgm74tGCXk3_LNKLNpaKFRoRaN30&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYj7BNzekyQGqSIHrXeaox2DNeH5ks5tSpl0gaJpZM4R94U7&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DjGNNCN49mhQMAHcn7IUZfnOxpirBYf82JB_1PeW4Kg&s=Xe-tqSbZzAoLvYsQLzTAByp0lL8ODF-lUvfWPofhVK4&e=.\n. Agree. Will investigate a way to resolve this.\nRgds,\nNeil Cresswell\nOn 10/02/2018, at 11:31 AM, Hunter notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nPortainer does not log out users from existing sessions when the user is deleted from the \"\nUser Management\" tab. I'd consider this a pretty big security issue, especially since I've seen authentication persist for hours after closing the browser tab in the past.\nSteps to reproduce the issue:\n\nAs admin, create a new user with access to the dashboard\nFrom another browser/computer/incognito session, log into the new user\nAs admin, delete the user.\nContinue to use the dashboard in the other browser, and do everything that you could before until you're logged out.\n\nIt really should invalidate current sessions of a user when the user is deleted.\nTechnical details:\n\nPortainer version: latest (1.16.2)\nTarget Docker version (the host/cluster you manage): 17.12.0-ce\nPlatform (windows/linux): linux\nCommand used to start Portainer: docker run -p 9000:9000 portainer/portainer\nTarget Swarm version (if applicable): non-swarm\nBrowser: Chrome Canary v66\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1650&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gQWSgcCDgrMzOW7DvU55ahskwDze4e4wg7xvkmEwaTQ&s=Wf-dLHsEjciW4u2MbZWtLeQ_2fjrIVHMiHMd4cD2PPc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbDPHpnBq0EW303X1U6yvuneh-2Dhzks5tTRucgaJpZM4SAzMZ&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gQWSgcCDgrMzOW7DvU55ahskwDze4e4wg7xvkmEwaTQ&s=BkXMuSogX6fxbx2s1u-QOo5lJiWxBVjP-NbH9TTg9Pc&e=.\n. Oh so an integrated \u201cwatchtower\u201d experience...\nRgds,\nNeil Cresswell\nOn 26/02/2018, at 3:25 PM, Sawood Alam notifications@github.com<mailto:notifications@github.com> wrote:\nThe goal of this request is to be able to automatically update running services managed by Portainer when their corresponding image is updated (built or pushed) in the registry (such as DockerHub).\nMy first post describes one potential approach to implement it in secure way. It utilizes webhooks the same way automated builds in DockerHub are notified by associated GitHub/Bitbucket to trigger a new build. DockerHub also has the option to setup webhooks that will ping any URLs specified in it when an image is updated. We can leverage that to implement this feature.\nPlease let me know if you need more explanation on specific parts.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1663-23issuecomment-2D368372154&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=1nvAiOGea4FI3fcdhFf-8_qK4mfCCBx6tCL6UNPoFQA&s=Ys81d7Tm_31bM7JtEmThReyWJautlF-iTVe1x233E8Y&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSK983MIrpcawUH3aKts9Myil3INks5tYhXwgaJpZM4SMts1&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=1nvAiOGea4FI3fcdhFf-8_qK4mfCCBx6tCL6UNPoFQA&s=9VEw6zb4ZqgbyM9_OyBEe-lrh0LA1pcWim-2El90RAE&e=.\n. I have actually assigned this to one of our developers to create a functional spec and give me an estimate for development effort.\nWatch this space..\nFrom: Sawood Alam notifications@github.com\nSent: Wednesday, 27 June 2018 12:39 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] [Feature Request] Automate deployment using registry webhooks (#1663)\nI came back to check for any progress on this request. I was surprised to see the number of thumbs ups to the first post, but no one seems to be interested in working on this. While I have an architectural understanding of how this feature can possibly be implemented (as outlined in the first post), I am not familiar with Portainer code base and for the next few months some other priorities are keeping my hands tied. Though, I would really like if someone could take care of it soon. I will be more than happy to discuss implementation details if necessary.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1663-23issuecomment-2D400506423&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=s5UOJA0LMQhYo4cJoPJMCabVMZ7GXSrYR8W6DLyAWvk&s=uKaL_Difg8k_Uy1LtTzNyAXVR3tVsxJ_oYWf7EN4kHA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXbQhPQW3bKQTmCXKNq6unPoUY5bks5uAtQGgaJpZM4SMts1&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=s5UOJA0LMQhYo4cJoPJMCabVMZ7GXSrYR8W6DLyAWvk&s=O6uss9ua_UOTYRVDl6pNSsJgeeCx_4f3_4cWV4YCJo0&e=.\n. Once development is done, we need someone to document /blog how to link portainer with dockerhub webhooks as you have done, feel like being a volunteer for that?\nRgds,\nNeil Cresswell\nOn 27/08/2018, at 4:37 PM, Jo Jordens notifications@github.com<mailto:notifications@github.com> wrote:\n@Cinezasterhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_Cinezaster&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Ppw5k5PG1o8Dc0s32b3QQRfKWrl25HEvMc5Jx0-8vrY&s=TqOWOtwxUrb9DhaLtaZGfZ_4zCYlwaTMfGzIvtX0QtE&e= and I tried it out with the webhooks hub.docker provides. And it works, our services are automatically being updated after each push to a repository.\nBut the tags of the images that were updated are all , both in the image list in portainer as well as when I look at docker images. This doesn't interfere with functionality however. We have multiple services using the same image with different tags, and they're all still using the correct image after the update.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1663-23issuecomment-2D416172189&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Ppw5k5PG1o8Dc0s32b3QQRfKWrl25HEvMc5Jx0-8vrY&s=0UKZwz1EI0L8JYdLqrswGx6dpZ0DT9QlxD_aXH-N6vE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVGGU2TyMZz2ErAk-5FseDNYgftzE5ks5uU73VgaJpZM4SMts1&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Ppw5k5PG1o8Dc0s32b3QQRfKWrl25HEvMc5Jx0-8vrY&s=ofElX8u3XOItT169JEYAQ0UO8f6moEEEoBWaOqBJCMU&e=.\n. There is a tab in create containers called environment variables\nRgds,\nNeil Cresswell\nOn 27/02/2018, at 10:57 AM, Enrico Sartori notifications@github.com<mailto:notifications@github.com> wrote:\nhello, i'm noob, i want run this\ndocker run -d -it -e EULA=TRUE -p 25565:25565 --name mc itzg/minecraft-server\nbut where i write -e EULA=TRUE ?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1673&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=11gTpx6_JVvbOjCylBNhdkIrk1rV2ZAWsA97TwIkYCA&s=btEu-_oONMsUZMLlfl7Lh7XTj3v-xG_hZnJ7NJFPGFs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfqiEcdEFQjo-5FNjL059lmfLv-5Fb9Qks5tYyi9gaJpZM4ST-5Fpf&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=11gTpx6_JVvbOjCylBNhdkIrk1rV2ZAWsA97TwIkYCA&s=EMybvZW1LBWdRtWhckCWT0Gf4lpYjKouxXz83OC2Hhc&e=.\n. Im keen to add support for this...\nBtw the irony isnt lost that a google engineer is using Swarm rather than K8 :-)\nRgds,\nNeil Cresswell\n. Oh wow... Hadnt made the connection to running Portainer to manage the Docker hosts the underpin a K8 cluster...\nMight have to give that a try myself to see what it looks like..\nOn 9/03/2018, at 10:52 AM, Daz Wilkin notifications@github.com<mailto:notifications@github.com> wrote:\nThere's certainly no prohibition on using Swarm at Google but neither I nor my colleague mentioned Swarm in our comments. So I'm unclear where there irony arises.\nI'm using regular Docker Engine locally and Kubernetes Engine.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1702-23issuecomment-2D371636868&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RKxGKqApDhcpVqrLi_jf75PTOtWrbtItHhRdYENvWKc&s=7l1ItBOV5lUwaFvD5UVp6ehGHt8z2KZb7HxzRFJ0AAI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcx-2DQ9-5FqNxb40Qph703DD4yDHyoUks5tcagEgaJpZM4SiF8p&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RKxGKqApDhcpVqrLi_jf75PTOtWrbtItHhRdYENvWKc&s=Nu6FZpCISpEEJv-FL4Cw2U1n9FlmR2RmuzZhwkV_Hlo&e=.\n. Have you allowed port 2375 through the host firewall?\n. Have you tried using another browser? Firefox or chrome?\nRgds,\nNeil Cresswell\nOn 6/04/2018, at 10:18 PM, marx engels notifications@github.com<mailto:notifications@github.com> wrote:\nI have a similar issue ..\nWhen using the console in any container the window jumps out of focus, the input line is out of sight , i tried using full screen mode but the same thing happens. It makes it very difficult to work with , other than that the app is great .\nTechnical details:\n\nPortainer version: 1.16.4\nTarget Docker version (the host/cluster you manage): 18.03.0-ce\nPlatform (windows/linux): arm64 Raspbian GNU/Linux 8 (jessie) (hypriot)\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nTarget Swarm version (if applicable):\nBrowser: Opera\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1743-23issuecomment-2D379211906&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=htsn4QNKgc22Soyko_hBn8iE5eNJRZpV-_tfkprZNPs&s=gdk99l2ehFkuyA6KZYiaAHesLnxOyYi-O2VioXhwcZs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbwGXjgWbdYccvNwNA2T5zYk3kUTks5tl0DfgaJpZM4Sw1WH&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=htsn4QNKgc22Soyko_hBn8iE5eNJRZpV-_tfkprZNPs&s=t_1aI2wLWz3mxGPKKSF8R7ZjUQEbgW2d8LE9VmYXPDM&e=.\n. Why port 2346? 2375 is normal port.\nHow are you adding the endpoint inside Portainer? What IP:Port ?\nRgds,\nNeil Cresswell\nOn 23/03/2018, at 10:31 PM, sudipto92 notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nNot able to connect Portainer with Linux container demon running on \"Docker for Windows\"\nSteps to reproduce the issue:\n\nDocker daemon for windows container is already configured\nRight Click on Docker Icon ->Switch to Windows container\nRight Click on Docker Icon ->Settings.. -> Daemon -> then click on advanced -> add below line\n{\"Hosts\":[tcp://0.0.0.0:2346]}\n-> click on apply\n\nTechnical details:\n\nPortainer version:1.16.4\nTarget Docker version (the host/cluster you manage): cluster\nPlatform (windows/linux): windows\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1760&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dfc3ifIA75A3qQgNg5ITxGYbDNoUKcHdrgWW86ZjuRo&s=I9FCXfzfZYmpT9bjuDi2IyQILziNCBRifRkQyyg1PVY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld6uSkV-5FEz7J-2DEhzO2k5iN7i01GPks5thMDogaJpZM4S4aR9&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dfc3ifIA75A3qQgNg5ITxGYbDNoUKcHdrgWW86ZjuRo&s=1U7vdJ1kwyX7vpCN4hBmLo7v_9GDAXexPkO2tVIKvmc&e=.\n. Have you tried Docker community support? This is not the place to be asking for help with general docker issues.\nRgds,\nNeil Cresswell\nOn 23/03/2018, at 10:46 PM, sudipto92 notifications@github.com<mailto:notifications@github.com> wrote:\nit is same port 2375..\nMy issue is i am not able to initalize the docker daemon for linux container (Docker for windows)\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1760-23issuecomment-2D375597480&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JFPT0cGm4VnyNad_TZzuIFmUqVZq-biVLGf94pg1HlY&s=f2JADG5tJzFC9mbUpKUqBHji6G79BrvuQlEfnijV4x8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlf-5FqY5uGHEIUibCmVRYgeG1DJzDoks5thMR5gaJpZM4S4aR9&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JFPT0cGm4VnyNad_TZzuIFmUqVZq-biVLGf94pg1HlY&s=j3JJ-Kvx_TE_teud1cokJIIsNu_3Sk0tUp9ImcmKE3g&e=.\n. I see this same issue, left 8 characters are missing. Turning on timestamps helps to show\nRgds,\nNeil Cresswell\nOn 10/04/2018, at 7:39 PM, J\u00e9r\u00f4me Steunou notifications@github.com<mailto:notifications@github.com> wrote:\nDescription\nLogs are truncated in the log viewer\nSteps to reproduce the issue:\n\nOpen a container\nGo to log\nEvery line is missing 8 characters\n\nAny other info e.g. Why do you consider this to be a bug? What did you expect to happen instead?\nDisplaying timestamps help to see the missing characters\nTechnical details:\n\nPortainer version: 1.16.5\nTarget Docker version (the host/cluster you manage): 18.03.0-ce\nPlatform (windows/linux): Ubuntu 17.10\nCommand used to start Portainer: docker run --rm -d -p 9000:9000 -v /opt/dock/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --no-auth --no-analytics\nTarget Swarm version (if applicable): NA\nBrowser: all\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1801&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Hkt_JselDfc4uObC9AkTdWQ-Ow8_tdfBi60RjEMG-T4&s=O9QkjrrNUOMWMHeBKKsd8uruQJOQi2zFR86Gw9HGXiA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTn7z1MkmDtRjqa3qHtpRh8Lm8MWks5tnGGOgaJpZM4TNv16&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Hkt_JselDfc4uObC9AkTdWQ-Ow8_tdfBi60RjEMG-T4&s=uRHMEuygPb3Iu3-H-NKdDfMCYzqVL2kmInbpQ9sgUzA&e=.\n. How many users in your Ldap scope? If many, you may need a search filter.\nAlso, the username you created, what format is it? Username, or username@domain?\nRgds,\nNeil Cresswell\nOn 19/04/2018, at 8:25 PM, seryeb notifications@github.com<mailto:notifications@github.com> wrote:\nSteps to reproduce the error:\n\nConfigure LDAP authentication against OpenLDAP- Test connectivity succesfull\nBaseDN=dc=xxxx,dc=xx,dc=xx | Username Atribute: uid\nCreate a user from LDAP as administrator\nLog in with that user: Invalid Credentials\nPortainer throw the error: http error: User not found or too many entries returned (code=500)\n\nTechnical details:\n\nPortainer version: 1.16.5\nTarget Docker version (the host/cluster you manage): 18.03.0-ce\nPlatform (windows/linux): linux\nCommand used to start Portainer: docker run -d -p 9000 -e VIRTUAL_HOST=xxxxxxxxx -e LETSENCRYPT_HOST=xxxxxxxxxx -e LETSENCRYPT_EMAIL=\"xxxxxxxxxxxxxx\" --restart unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v /srv/dockers/portainer:/data portainer/portainer\nTarget Swarm version (if applicable): NO\nBrowser: Firefox 59.0.2 (64-bit)\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1823&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SP1uHgXW9G17Aofep4ZUolB1g5lJDFE_ABeJiMxJNCo&s=uGcyHi0ROuiUg6HRN1tIF7EB9Mapob_Yb9LreY8z6cY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcZlik7XSKeU-5FOBxiI1-5F5xuvgZJYks5tqEoGgaJpZM4TbWld&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SP1uHgXW9G17Aofep4ZUolB1g5lJDFE_ABeJiMxJNCo&s=P625tXpHA5135M4h8gTVomc-CCgYnJi4o4uukovUj3E&e=.\n. Did you follow this guide? https://www.linkedin.com/pulse/how-enable-ldapad-authentication-portainerio-neil-cresswell/\nOn 19/04/2018, at 8:35 PM, seryeb notifications@github.com<mailto:notifications@github.com> wrote:\nHow many users in your Ldap scope? Two\nAlso, the username you created, what format is it? Username, or username@domain? Username\nThanks!\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1823-23issuecomment-2D382655577&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WR8BZjLfrDhmpY07YDSujWeF9gs8KqfrU4ghq2xv-8M&s=jCUuBhOIXHspH8LugnASQYhvrmLfUK8k9Qr8J9Wcp6A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYUD2mshLpPqavno34M-5FOH2wvSUwks5tqExFgaJpZM4TbWld&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WR8BZjLfrDhmpY07YDSujWeF9gs8KqfrU4ghq2xv-8M&s=p8eGmTnNgM5hTRJiVXPtVCf_scfnH1P8ymPLht1WhBk&e=.\n. We have made the hard decision to closed source the agent as a means to protect the IP of how we have worked around the Docker API deficiency.\nThere are now a number of new portainer-like solutions in the market, and we need to ensure that the considerable r&d time/cost that we personally fund for portainer development only benefits the Portainer community.\nIf someone can suggest an opensource license that allows the code to be open, but not reused for commercial means, please do let us know, we spent $ with lawyers trying to find a license that worked, but none provide any IP protections.\nPortainer core will always be open source.. I love it, its an elegant and simple solution and one people would appreciate.\nAssuming code is all good, then im happy to accept it.\nRgds,\nNeil Cresswell\nOn 1/06/2018, at 7:31 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nAwesome, thanks for the video ! Will have a look soon :-)\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1839-23issuecomment-2D393650904&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=30Fn4z6_w0gyE-yhRrYjmfhSCJuumzPiKeJUyyy8GNg&s=Qb4vkHizPHuu5csmbezbgu7J4BeFR54gx4t3W7VCB8Y&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlf4Dr8AetjaGQTua2FwZzPBw3a27ks5t4ETxgaJpZM4Ti8yV&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=30Fn4z6_w0gyE-yhRrYjmfhSCJuumzPiKeJUyyy8GNg&s=14DRo_FH2lNNAIA8l_Ej8Co_Qdvl0rZBeWMX05XREBg&e=.\n. Just make sure that there is always at least one admin account in the local db. We should not allow all local admin accounts to be deleted. So to delete the default admin there must first be another local admin defined. My vision for this page is that is can be used as a NOC (network operations center) visualiser on large resolution monitors. It should be purely visual, pictorial, and the information it portrays able to be consumed in an instant (green/orange/red type). A list of containers is not suitable for this.. \nThis is what i had in mind... switch the visualiser to a horizontal pane..\n. I like the idea of this, but i dont see how we are going to be able to address it in the near future given current development load.\nHappy to accept a pr for it tho.\nRgds,\nNeil Cresswell\nOn 5/05/2018, at 6:37 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EhqiPvBfYLqfmDP69dCmpZBnI8J5Ea8gZqBGMhSb6E0&s=FxTwQQnz5EMFhSX4X1UeqDfFsLiG8jwokP7wmWBYQS4&e= thoughts? Wonder if this should be discussed in #943https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_943&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EhqiPvBfYLqfmDP69dCmpZBnI8J5Ea8gZqBGMhSb6E0&s=2KQsC9GDm96_iBiXTPKDWBWWjPzM1V6Qp76njEY1whE&e= instead ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1864-23issuecomment-2D386783975&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EhqiPvBfYLqfmDP69dCmpZBnI8J5Ea8gZqBGMhSb6E0&s=SNOnoFpESdb0yavpmeO8Z_NSh0FgGFpuz2PNROfES0k&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZO1VlIWLPWadyncEbNmTw8ApfOCks5tvUi8gaJpZM4TzhPv&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EhqiPvBfYLqfmDP69dCmpZBnI8J5Ea8gZqBGMhSb6E0&s=tAxHfUYROJXlyCFCxIQTxWovGRH7oGgGZQcP4L7wbtA&e=.\n. I use docker hub authentication extensively to push/pull images to my private repo.. never had an issue, so there is nothing wrong with the core function.. maybe it is that period issue?\nRgds,\nNeil Cresswell\nOn 16/05/2018, at 8:35 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nCould it be that you're hitting this issue #1434https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1434&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=n7fv2UQeK6ooGHB37Mfdpfm1A-N0h34LJIkGCZTT_Vk&s=ssT5qYux0wtvy4DBQrrHHsxG-pE2_O7JunmTKJBTJP8&e= ?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1900-23issuecomment-2D389304430&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=n7fv2UQeK6ooGHB37Mfdpfm1A-N0h34LJIkGCZTT_Vk&s=vzmYSaujcAzx2DH_K0V68tEiFarszfFHqdtlLwiDbrE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlRELr3qcgcMpM36nN9TPkH-2DKwykdks5tyzwNgaJpZM4T-5FOun&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=n7fv2UQeK6ooGHB37Mfdpfm1A-N0h34LJIkGCZTT_Vk&s=eKB7c0PdSWBXA6eTEuhvPH1g8Q4qnrII_F28IYjplX0&e=.\n. Great idea, i support that.\nRgds,\nNeil Cresswell\nOn 18/05/2018, at 2:34 PM, Yao Zhao notifications@github.com<mailto:notifications@github.com> wrote:\nConfig is immutable, so if one wants to update a config, he must create a new config and rotate the stack.But the update is often incremental, so, by now, I have to open a new tab for new config creation, and copy the name and content from the old config, and then make some modification. The experience can be improved if there is a one-click way to clone a existing config to start creating new one.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1911&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SgFx0p_cFdn71WLkPmlK9EQy2njQxinMR9BeM15GIQo&s=KG_UpsCOlInI8DModihY7039uTD9giykagp8oLW6TIk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQPdArMowHBQlx2CrRnHPRj6LzyHks5tzjNFgaJpZM4UECfn&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SgFx0p_cFdn71WLkPmlK9EQy2njQxinMR9BeM15GIQo&s=O3bl1C82lNPvXdY0SWWHTOc8W28YC2WxgFIkmeaKVYI&e=.\n. Port (as in the area where ships dock)\nAy\nNer\nRgds,\nNeil Cresswell\nOn 22/05/2018, at 5:32 PM, Yao Zhao notifications@github.com<mailto:notifications@github.com> wrote:\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1917&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=q2gEW0RWMjalF_2KCIsya8jIYOWDHuMwcnSVdBBO-b4&s=PT5f_JYdQTKs0A2k8TX399wt-7vd0egi4fLyS0EIf6g&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlX85jfSzX6pgUu6qbQBrX6fa4ULfks5t06LwgaJpZM4UIAFw&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=q2gEW0RWMjalF_2KCIsya8jIYOWDHuMwcnSVdBBO-b4&s=Um4GrRxdbVyqftWy_pDRRdi3E5O_rIAXR76YCtjEiVE&e=.\n. Sure, im OK with that.\nRgds,\nNeil Cresswell\nOn 23/05/2018, at 5:17 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nWe could remove the limitation that prevent the suppression of the default admin account. You'd need another admin account to remove the default admin account.\nThoughts @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wuihU8z5RxSBiuJ5l6RcuhpG7wMn7RPVr0Sd0iIWr10&s=YNIE4G88W8kFg12fYkXulyqyoSEq_lKLIp-KfIfDFF0&e= ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1921-23issuecomment-2D391070924&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wuihU8z5RxSBiuJ5l6RcuhpG7wMn7RPVr0Sd0iIWr10&s=DlM96V-nDwecaaryPKwvIXf3EyHuT7xKbQ7odw63j60&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQE35BXLKiNs3hMrGIBKI-2DVhWChcks5t1EgVgaJpZM4UIuBp&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wuihU8z5RxSBiuJ5l6RcuhpG7wMn7RPVr0Sd0iIWr10&s=7wlLPA4XohTZq5NKgVxcwRlb1vAYUwUnbvIP_MS1Rxw&e=.\n. Yes indeed.\nFor businesses with a support subscription, there is a SLA for big fixes.\nRgds,\nNeil Cresswell\nOn 25/05/2018, at 8:18 PM, turbo notifications@github.com<mailto:notifications@github.com> wrote:\nOut of curiosity, are bug fixed prioritized for businesses with a support subscription?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1926-23issuecomment-2D391978566&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pULOtN9BDE3N1F34nnD5un-JoAktLjGMVTQQR19OCXQ&s=JCIGqwaON-yHBXMt9LRKIo8YvBk-d116MOEI0UI1nOc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTQSBzWICIhONgm6w4QT2q3l59qiks5t175OgaJpZM4UJ7nX&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pULOtN9BDE3N1F34nnD5un-JoAktLjGMVTQQR19OCXQ&s=p0Z4XUED6gmbyUjM0oZ5jIKF3Mme06dHOFYGumXzUKc&e=.\n. We should support community created plugins for sure\nRgds,\nNeil Cresswell\nOn 21/06/2018, at 6:53 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nWe're going to add Plug-in support into Portainer, we still need to decide if we want to make this model \"open\" so that users can actually create their own plugins.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1932-23issuecomment-2D398995684&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=2Ez-MobJV8pqAst9F4t5ITzK_NNnGHllStWotSsNveU&s=GPAxLM_rJfTnDM0pwGPZJ_sCnhKvcgpmv0dFSbe4SBw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTBKm-2D35XRy1CGJ3dUsTTGNDrNI8ks5t-2D0LdgaJpZM4UNlcW&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=2Ez-MobJV8pqAst9F4t5ITzK_NNnGHllStWotSsNveU&s=bE7mxAiMkCmxJeP2ENTFWt0YjAmgOWqJziRTIM4wWFs&e=.\n. You are aware that Local-Persist is not recommend for Swarm ?\nWhilst we use it ourselves, care must be taken to ensure that it remains fully functional against newer docker versions as its development has ceased. Ideally you should begin to transition to new \u201ccertified\u201d plugins to ensure supportability.\nhttps://github.com/CWSpear/local-persist/issues/27\nFrom: mc-wp notifications@github.com\nSent: Tuesday, 3 July 2018 10:04 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] Stack Service with Named Volume Doesn't Show Volume in UI (#1941)\nSame problem for me. After adding stack, mounted volumes not selected in UI and not created. I'm using local-persit driver volume. If I create a volume in command line with: docker volume create -d local-persist -o mountpoint=/docker/nginx/conf. d nginx-dmz-df_nginx-conf --label \"com. docker. stack. namespace=nginx-dmz-df\". After the update stack, volumes are auto-select in the UI, but the service crash with an error: no suitable node (missing plugin on 1 node). It's necessary to remove all mounted volumes in UI and reset identically all volumes in UI and It's working.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1941-23issuecomment-2D402088896&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hO0TQXvJiWABrCc64n7QmIA9Y22hunW2DAlGB602F_4&s=Pi-6rEYdVExnf3V1PzgLkxYahuVGAxTh078u4WPy_2s&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZOm16lYnf0s-5FOIi8UKTRSensPtFks5uC0F2gaJpZM4UVmf7&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hO0TQXvJiWABrCc64n7QmIA9Y22hunW2DAlGB602F_4&s=zogZXs7Tg3laMJ8RGFxNktJZuqQ1UAKyqm_GKP8ix6A&e=.\n. Are you using local-persist as a way to use NFS within Docker; so you can create cluster aware volumes? Or are you using it as a replacement for bind mounts, allowing you to redirect a named volume to any file system location?\nN\nRgds,\nNeil Cresswell\nOn 3/07/2018, at 10:08 PM, Neil Cresswell neil@cresswell.net.nz<mailto:neil@cresswell.net.nz> wrote:\nYou are aware that Local-Persist is not recommend for Swarm ?\nWhilst we use it ourselves, care must be taken to ensure that it remains fully functional against newer docker versions as its development has ceased. Ideally you should begin to transition to new \u201ccertified\u201d plugins to ensure supportability.\nhttps://github.com/CWSpear/local-persist/issues/27\nFrom: mc-wp notifications@github.com<mailto:notifications@github.com>\nSent: Tuesday, 3 July 2018 10:04 p.m.\nTo: portainer/portainer portainer@noreply.github.com<mailto:portainer@noreply.github.com>\nCc: Subscribed subscribed@noreply.github.com<mailto:subscribed@noreply.github.com>\nSubject: Re: [portainer/portainer] Stack Service with Named Volume Doesn't Show Volume in UI (#1941)\nSame problem for me. After adding stack, mounted volumes not selected in UI and not created. I'm using local-persit driver volume. If I create a volume in command line with: docker volume create -d local-persist -o mountpoint=/docker/nginx/conf. d nginx-dmz-df_nginx-conf --label \"com. docker. stack. namespace=nginx-dmz-df\". After the update stack, volumes are auto-select in the UI, but the service crash with an error: no suitable node (missing plugin on 1 node). It's necessary to remove all mounted volumes in UI and reset identically all volumes in UI and It's working.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1941-23issuecomment-2D402088896&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hO0TQXvJiWABrCc64n7QmIA9Y22hunW2DAlGB602F_4&s=Pi-6rEYdVExnf3V1PzgLkxYahuVGAxTh078u4WPy_2s&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZOm16lYnf0s-5FOIi8UKTRSensPtFks5uC0F2gaJpZM4UVmf7&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hO0TQXvJiWABrCc64n7QmIA9Y22hunW2DAlGB602F_4&s=zogZXs7Tg3laMJ8RGFxNktJZuqQ1UAKyqm_GKP8ix6A&e=.\n. Which volume driver are you using? Driver options are governed by the driver, and \u201clocal\u201d driver does not allow you to set a mountpoint.\nRgds,\nNeil Cresswell\nOn 6/06/2018, at 6:20 PM, EvanCreno notifications@github.com<mailto:notifications@github.com> wrote:\nQuestion:\nHow can I use.. Volumes -> add Volume -> add driver option -> name (e.g. mountpoint) ?\nshow: Failure create datavolume: invalid option key: \"datavolume\".\n\"name (e.g. mountpoint) \" input what?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1950&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=j-Od1zaA8_j6ela3k2zfHHU5XkE59spryQ9mP1Al6BM&s=0tNiRoVg5r5hfGZbHXc1fyQM23YpX4RljSfCRBUJHHU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUwrSpy0qqMp-2DAbfmd9GrUgAiehHks5t53SegaJpZM4UcDAX&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=j-Od1zaA8_j6ela3k2zfHHU5XkE59spryQ9mP1Al6BM&s=pzOBZoNee0MvZ6H6l4pOn0TYfur3_KDIiuugQK0sBjI&e=.\n. Sorry cannot do that with local driver. Take a look at cswpears/local-persist driver. That lets you redirect to anywhere.\nRgds,\nNeil Cresswell\nOn 6/06/2018, at 6:32 PM, EvanCreno notifications@github.com<mailto:notifications@github.com> wrote:\nI used Driver\"local\", I want to save nextcloud data to another HDD. @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yQUkD-o-uzf-2RoLgHoxSwxu_rDr5pPRKiBnW-uWJ-E&s=qVGawzxGFWciLuzmXYGsTd7GizGqDZSh6IO-pildhqk&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1950-23issuecomment-2D394955765&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yQUkD-o-uzf-2RoLgHoxSwxu_rDr5pPRKiBnW-uWJ-E&s=1uEY1FtCzUCO2dSvJVhHzWV_g9B-gfAJaaOEFIvjyMs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQF1-5FUUEG0RnJJsk-5FbxEZCK-5FzUzyks5t53dfgaJpZM4UcDAX&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yQUkD-o-uzf-2RoLgHoxSwxu_rDr5pPRKiBnW-uWJ-E&s=K3q3pnb2R8lymtpJDI8WcGHkuqnvPsE8hNdvRtqLK_I&e=.\n. Can add for dockerhub images only\nRgds,\nNeil Cresswell\nOn 21/06/2018, at 7:02 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nNot sure if we need to add this, might be easy to add for DockerHub hosted images but for images hosted on other registries we are not aware of the URL used to browse the image repository details.\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Xayr2kXgm89CvSCLQq57p6LxKg0Pa_o6Dz5unpXUntk&s=yrP-OWHqUU9Z0Bl0xJA3gU90sHGpFtn9taClcs4ZVQA&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1956-23issuecomment-2D398997707&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Xayr2kXgm89CvSCLQq57p6LxKg0Pa_o6Dz5unpXUntk&s=EVOYd7MH4TFau-bDoXSRagg4o4zo_Cnl-_NN8Atxdr4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXMVGh-5Fds7yu0eyvpVwasGjGSPB8ks5t-2D0T6gaJpZM4Ud6b-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Xayr2kXgm89CvSCLQq57p6LxKg0Pa_o6Dz5unpXUntk&s=HNdASH0rPhUSJUn8WH6Qs1lCsyFxkNjubUuutygXvnY&e=.\n. Im OK to merge this\u2026 Anthony will be online in a few hours, I will make sure he reviews with the intent to merge into develop\nFrom: Cody Marx Bailey notifications@github.com\nSent: Monday, 25 June 2018 10:32 a.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] #776 feat(templates): support to pass host port mapped to container port (#1958)\nWhat's the status of this? This is a fairly important feature for a deployment I'm working on.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1958-23issuecomment-2D399792990&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BxAM2wUFRUIxSFACU81943YEQW18EAAJjR2sfnzyksI&s=XzBRr0pkX4YHpxDm7lSdCHaOkuFoWfMM4f2MzfX6KME&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlax391UjaZeDWEwNT8MUOAVNPQthks5uABNagaJpZM4Ufge5&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BxAM2wUFRUIxSFACU81943YEQW18EAAJjR2sfnzyksI&s=r3uPYvVwmTERV5ovplkJdde4Fq6v9s2oeWJZJm-VJAo&e=.\n. This is the linux FS buffer cache, and will keep any disk IO (the blocks, not the files) in memory whilst there is memory available. The FS buffer cache is marked as low priority in the Kernel, so is dropped the moment an app needs memory space.\nTo test this is the case for your container, try running the following commands on your host, which will purge all disk caches:\nsync; echo 1 > /proc/sys/vm/drop_caches\nIf this drops your container's cache usage back to Zero, then what you are seeing is the Linux Kernel doing its job and trying to make your disk performance awesome by caching as much as possible.\n. That is host level, but that graph shows how much that container is contributing to the cache consumption, so its worth keeping there.\nRgds,\nNeil Cresswell\nOn 12/03/2019, at 12:17 AM, Marcelo Ochoa notifications@github.com<mailto:notifications@github.com> wrote:\nYou are right, after executing echo 1 > /proc/sys/vm/drop_caches at the server level (container level is read-only) FS buffer cache drop to 0.\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_16995718_54120043-2D80d44200-2D43d5-2D11e9-2D8b00-2Deea3e2309430.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4tFv9e8o5LwQKVJHfw_FNHRvV0NL7lb2LzR-NiSVdHE&s=HK89m23d-pKhcl7CK8gjgblOJJUyTxSd_0yk4-ll348&e=.\nThanks a lot Marcelo\nPD: If FS buffer cache is a global host level value, make it sense to show at container level graph?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1961-23issuecomment-2D471499441&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4tFv9e8o5LwQKVJHfw_FNHRvV0NL7lb2LzR-NiSVdHE&s=oG__V3KMuqDYcQqX4XK6B9zrqNlvlLagLxKm3s87B2k&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfwGzwArVYDGzuu01S8Ze5arNWKIks5vVjsmgaJpZM4UhxFO&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=4tFv9e8o5LwQKVJHfw_FNHRvV0NL7lb2LzR-NiSVdHE&s=yYbu-H5_ct1UQfFihKasfktWzn3oqC_HG5b0EZAyhpY&e=.\n. I actually find it annoying\nRgds,\nNeil Cresswell\nOn 21/06/2018, at 7:12 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nThis was introduced via #151https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_151&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rf5J7ZBFZWZrPM2qPRyyDskHbvsqJ-TpgtVsdJ0uDlM&s=DlkEUpIsYcWLmwm_NHzTRfgtqtf0uXlGVYZo6LxzLBE&e= as an UX enhancement and it's actually quite handy when executing actions such as starting/pausing containers.\nMaybe we should add a clear selection button instead?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1965-23issuecomment-2D398999931&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rf5J7ZBFZWZrPM2qPRyyDskHbvsqJ-TpgtVsdJ0uDlM&s=AzFj4IQjK2TqTdJGFJs-y752Db_rTAEeeg8N7ckC8H8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZl3dPQjXwqfvqCeD6FrmkufsO82ks5t-2D0dDgaJpZM4UkMYd&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rf5J7ZBFZWZrPM2qPRyyDskHbvsqJ-TpgtVsdJ0uDlM&s=n439fioQtoEJJ1pQel6zRo6VGObW4ZQjhoQ5riCgJ0s&e=.\n. Agree, no need to add more buttons, but a wrap logs option is nice\nRgds,\nNeil Cresswell\nOn 25/06/2018, at 6:00 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nHey @hasnathttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_hasnat&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VvzTq5FMMQJ-1sNPYcq_jH3MVQi9blbIkjbS6WJAJoY&s=tzU7wxjYsJpMOqY5TwolQ7Ab7ssXnbDGX7Ln3yiCDrU&e=,\nSorry for the late update. Usually we open an issue to discuss a feature request first. I don't really see the point of splitting the auto-scroll / auto-refresh buttons. IMO it just add too many controls on the view.\nAlthough the ability to wrap log lines is interesting.\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VvzTq5FMMQJ-1sNPYcq_jH3MVQi9blbIkjbS6WJAJoY&s=i1S7l-W0F2v0fUfHxIe8QUBoGu2ze4Jyobq5zSVYoUk&e= thoughts?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_1972-23issuecomment-2D399840499&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VvzTq5FMMQJ-1sNPYcq_jH3MVQi9blbIkjbS6WJAJoY&s=AZ8o-ffMLzHUD2Z7JAhBYnnHVl_4QP6mr0EnfuKP27M&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQpnIw7N9-2DmtA3b1yxXGA7XflA7oks5uAHxfgaJpZM4UnycP&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VvzTq5FMMQJ-1sNPYcq_jH3MVQi9blbIkjbS6WJAJoY&s=6MDvHQN2D-h8nQoBaDufEIUWIcfuMu2BnOiQvxJDgwc&e=.\n. How did you start portainer?\nYou need to bind mount /var/run/docker.sock as /var/run/docker.sock in portainer.\nFrom: Simon [mailto:notifications@github.com]\nSent: Wednesday, 20 June 2018 12:02 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Kitematic Installation - How to run? (#1983)\nHi.\nI installed Portainer via Kitematic on my iMac (macOS 10.13,5) on IP 192.168.99.1:32768\nWhen I try to create a local admin account I'm presented with a message (see image)\nError Messagehttps://urldefense.proofpoint.com/v2/url?u=https-3A__i.imgur.com_h2n8rMA.png&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N6_wBysDWkiQHqHGIQFlori8WHfhEhjW9aXpUlzEFVU&s=_rUVv0BJoyugdtiGuzYt6Lqb8en51RWH72s6XEKQak8&e=\nAnyone understand how to solve this issue?\nThanks :-)\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1983&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N6_wBysDWkiQHqHGIQFlori8WHfhEhjW9aXpUlzEFVU&s=rzY2rkZ10gtF9J-mH-e8sMSuu_Ke7OKk7QJDpAGLGtY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlafp88sDp-5F2ze02lNiOWnuj3KdgEks5t-2DZEVgaJpZM4Uuag-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N6_wBysDWkiQHqHGIQFlori8WHfhEhjW9aXpUlzEFVU&s=1Uc0Rpss0kV-jj2u2CGhrXPG-x1XmKvcZ2Ysg091tTI&e=.\n. You need to bind mount when creating Portainer from Kitematic.\nRgds,\nNeil Cresswell\nOn 20/06/2018, at 1:17 PM, Simon notifications@github.com<mailto:notifications@github.com> wrote:\nHey, thans for the reply. I'm only learning these things. So, how do I bind mount /var/run/docker.sock as /var/run/docker.sock in portainer?\nI started Portainer in Kitematic (I also installed it using Kitematic)\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1983-23issuecomment-2D398593573&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hAnKdTGMdVs95NICaGwZKOyeiVbbjtGtSaCDnk-ufmw&s=DNVxjcnx4993SiLko9hKRDJ4Vi7tuODnAok-Ss7GUl0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYczZtxUqJ9wZGFJSEfa9opfWPljks5t-2DaKOgaJpZM4Uuag-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hAnKdTGMdVs95NICaGwZKOyeiVbbjtGtSaCDnk-ufmw&s=Q1224pUKL3I1vg61Dh89VNHJjS9KK-760a8clDR26GQ&e=.\n. The standalone node is just a straight Docker Engine? Not a single node cluster?\nIf just an engine, the \u201cstack\u201d you are seeing is actually Compose v2 deployment, are you trying to use a compose v2 file ?\nFrom: stefano-gristina [mailto:notifications@github.com]\nSent: Tuesday, 26 June 2018 8:57 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] After installing Portainer 1.18.1, it's not possible to create stack in a node managed by Portainer but not in swarm cluster. (#2001)\nBug description\nAfter installing Portainer 1.18.1, it's not possible to create stack in a node managed by Portainer but not in swarm cluster.\nThe node is registered by TLS client and server authentication. It's possible to run and manage containers in this node from Portainer but not create stack.\nExpected behavior\nI tried to create a stack by GUI in a standalone node. This is the compose:\nversion: '2.3'\nservices:\nnginx:\nimage: nginx\nports:\n- 180:80\nThis is the error showed in the log:\ndocker logs 177a188d7ac6\n2018/06/26 08:27:08 Starting Portainer 1.18.1 on :9000\n2018/06/26 08:27:27 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2018/06/26 08:27:54 http error: Could not load X509 key pair: open /.docker/cert.pem: no such file or directory (err=Could not load X509 key pair: open /.docker/cert.pem: no such file or directory) (code=500)\nWhich kind of certification portainer is looking? The node has been registered first, when the version was 1.17.1.\nThe standalone node is registered well by TLS with server and client authentication.. Infact it's possible to run containers from portainer gui.\nSteps to reproduce the issue:\nSteps to reproduce the behavior:\n\nGo to 'Stack' link in the left section\nClick on 'Add Stack\"\nInsert the compose above\nA error pop-up is showed.\n\nTechnical details:\n\nPortainer version: 1.18.1\nDocker version (managed by Portainer): Docker version 18.03.0-ce\nPlatform (windows/linux): Linux\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\ndocker stack deploy --prune --compose-file ./portainer.yml portainer --with-registry-auh\nWhere portainer.yml is\n\nversion: '3'\nservices:\nportainer:\nimage: portainer/portainer:latest\nports:\n- \"9000:9000\"\nvolumes:\n- /etc/hosts:/etc/hosts\n- /gfs/portainer:/data\n\nBrowser: Chrome\n\nAdditional context\nAdd any other context about the problem here.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2001&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=CNmJypOncfcVRKMqrpiP-fdDLVfX7B72wSt88_0Sxx4&s=darwLVhWrrItLu63eRwBp2tmjSsMMbuToSmtPX7qYb0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWrU0ThVK6MgHdUR9ESSPazrIYxgks5uAfdSgaJpZM4U3hH8&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=CNmJypOncfcVRKMqrpiP-fdDLVfX7B72wSt88_0Sxx4&s=4hq3acQfYPrLgwfnGibDuNKitbQR6BR4RcRX7w-Q9js&e=.\n. We want to maintain the brand, so the header and the icon at the bottom left of the sidebar cannot change.\nHappy to add extra info to the header, eg Portainer - xxxxxx but the brand will stay on our official code/images.\nRgds,\nNeil Cresswell\nOn 3/07/2018, at 11:20 AM, Cody Marx Bailey notifications@github.com<mailto:notifications@github.com> wrote:\nRight now you can replace the logo and a few other things to sorta customize the interface and \"brand\" it, but the Portainer can't be changed. I'm suggesting that you can change it via config file or cmdline param.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2014&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=d6HnaIH_-1g49GKecjzEfxVWNCDYG3wOm4e1FR59484&s=Ep0SHB2rTqDES8zFjNm__rwe0FaIqnWxFaJQIQI_T40&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlV2Kmu4pqXu9cr2EfQy0jaw26I6Yks5uCqq6gaJpZM4VAEev&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=d6HnaIH_-1g49GKecjzEfxVWNCDYG3wOm4e1FR59484&s=CBaeCFFR5re4Umiz2m18otjw28kMLfDQ65M5eZNCho0&e=.\n. Then use vi as thats in all base distros\nRgds,\nNeil Cresswell\nOn 9/07/2018, at 10:09 PM, sergey panay notifications@github.com<mailto:notifications@github.com> wrote:\nI cannot do it. And I dunno why.\nI text: apt-get install nano and get a message: E: Unable to locate package nano\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2030-23issuecomment-2D403429188&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0ye-Z-d9Mc_DeUB44b3YzZdDkZDqnSRp2pz1P2WzKlc&s=xdwPCOxWXRrShqTt8ikdo6CnsNiqP0AjhWkHSH5QVuM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlT7cdNi6EyKQcwOacFpuqQGhSOIiks5uEyvPgaJpZM4VFZsh&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0ye-Z-d9Mc_DeUB44b3YzZdDkZDqnSRp2pz1P2WzKlc&s=BPvtp37-4ykSPX7B9Gbb5X_lPO44NiNqh4ntVR-HFe8&e=.\n. Edit the endpoint, and put the ip you want to use for links in \u201cpublic ip\u201d\nRgds,\nNeil Cresswell\nOn 12/07/2018, at 10:00 PM, Karel Frajtak notifications@github.com<mailto:notifications@github.com> wrote:\nHi,\nis there a way how to change the IP address in the links in Published Ports column? I am running Portainer inside docker (with Linux containers) on Windows and the IP address is 0.0.0.0. When I navigate to that link, it does not connect and I have to change it to localhost and then I am connected to the docker container.\nThanks,\nKarel\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2037&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JIlvJJoLxreTZmdIKgmpyVaNTGXatWMmJHMdblUyR2A&s=4BHLTBgCwr6d8bju2fXzHBopAmIxc6xe2Nyyy403yEQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleOQKub836MidNuFWzH2pvlOo3Stks5uFx5JgaJpZM4VMjtg&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JIlvJJoLxreTZmdIKgmpyVaNTGXatWMmJHMdblUyR2A&s=ApMdqknZE3PZdxdarYTOLzFHkVlXrETPFTtVHLdQzJc&e=.\n. Yeah,  nice to have feature, but lower in priority.\nRgds,\nNeil Cresswell\nOn 16/07/2018, at 6:43 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3CH4pbGQ9EQY8awUJ4alLM0S77T46ieFnJG147SeIAc&s=EQhT4mLMvev4zlZyfQ1SlkftyMFERFsmHMSheJVGwXQ&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2043-23issuecomment-2D405160254&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3CH4pbGQ9EQY8awUJ4alLM0S77T46ieFnJG147SeIAc&s=xIgyCulmWOMakgPYaT0gEsekeL3Ew2DD-yxak34U_Wc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfzM0Nm5-5F2KGS6KX-2Db3pO1jlkM7uks5uHDYJgaJpZM4VQKP5&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3CH4pbGQ9EQY8awUJ4alLM0S77T46ieFnJG147SeIAc&s=Ag-9aIARNihQn7AOuwn4pp99vCVDP2FLJBBVd4E6X_c&e=.\n. Yup, i want this feature added... its in the list of priorities.\nWe will use envoy as the proxy engine tho.\nRgds,\nNeil Cresswell\nOn 16/07/2018, at 6:47 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nRelated to #571https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_571&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=9rprBIQcfz5-OgAU2lL5ouX7ItSj-tnUVYBnQUIMK4E&s=W3-iWM3tNYjAvToP_pgwNtRElbJQ0Hq25Ibv_8wEntQ&e= ?\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=9rprBIQcfz5-OgAU2lL5ouX7ItSj-tnUVYBnQUIMK4E&s=gFZp1dBSuLcwl1szlF-SvppeksyAWhycMZFk7BdwSBc&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2045-23issuecomment-2D405160875&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=9rprBIQcfz5-OgAU2lL5ouX7ItSj-tnUVYBnQUIMK4E&s=9g75y9LitXs7XUfXTDu8NTrnv1exdiwu4OOCzBOspSs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld7D5AzGsa-2DRp231rsRKauzCsLLlks5uHDcKgaJpZM4VQQRR&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=9rprBIQcfz5-OgAU2lL5ouX7ItSj-tnUVYBnQUIMK4E&s=5SK_XAxWdqfec5WWw6eJhnzDpbz5ChCzzVQuTXP6Wgk&e=.\n. Have you already created a swam cluster? If so, just click on services in Portainer and from there you can deploy swarm compose files.\nRgds,\nNeil Cresswell\nOn 1/09/2018, at 12:41 PM, Micah Zoltu notifications@github.com<mailto:notifications@github.com> wrote:\nWhere can I get more information on the difference between Swarm Stacks and Standalone Stacks? I use docker-compose files to manage my deployments and make them portable across tools, but in Portainer UI I don't see a way to deploy a Swarm Stack, only the v2 stacks. I'm really struggling with the limitations of v2.0 docker-compose files (in particular, networking related) and would like to figure out how to use a newer version of docker-compose files (e.g., v3 or at least v2.4).\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2054-23issuecomment-2D417834973&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5CQNTIrqVlmB6B-GgiCQQP16D32W8CtV9FpbtlVzBTo&s=sVjXrX7YXVAy2AavLl5b0rC7k0Y6s0C6iX9mPoC8jp4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYBEHnU6uMuzUZ4jVBHnYxkEzvVBks5uWh30gaJpZM4VWpim&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5CQNTIrqVlmB6B-GgiCQQP16D32W8CtV9FpbtlVzBTo&s=mbbTQ_EmU0m3_g7KqG1H6ESD-_glutBrE1tHDR6_YLg&e=.\n. Yup, because libcompose library needed for anything newer is no longer supported by Docker.\nRgds,\nNeil Cresswell\nOn 22/01/2019, at 5:28 PM, Sascha L\u00f6ffler notifications@github.com<mailto:notifications@github.com> wrote:\nJust noticed this limitation for non-stack setups after preparing templates etc... really annoying :(\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2054-23issuecomment-2D456348992&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=C0LI7nI8fv4QIWAm0HZN3XUXL7Fx0RO4PBzBLkPgvbE&s=W48oQAs5JcqW8ta6EVxRHLUt1jKCZdqDqYbCGWzzWJc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaLL7fTGzwYjORkXj9rm83iUw3RSks5vFufUgaJpZM4VWpim&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=C0LI7nI8fv4QIWAm0HZN3XUXL7Fx0RO4PBzBLkPgvbE&s=qxmXBv9XnT6EAFWyiGLGA3o4sv-sffjVnkQdfI6eyUs&e=.\n. Will only support compose v3 for SWARM environments, and this will not change.\n. Because we use libcompose libraries for Docker (non-swarm), which have now been deprecated by Docker\u2026 it seems Docker are focussing only on (and releasing libraries for) stack deployments these days.\nUnless we fork libcompose and continue its ongoing development, we have no way to programmatically interact with compose.\nFrom: Robert Dailey notifications@github.com\nSent: Tuesday, 12 March 2019 11:39 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] support compose version > 2 (#2054)\nWhat's the reason for that?\nOn Mon, Mar 11, 2019 at 4:40 PM Neil Cresswell notifications@github.com<mailto:notifications@github.com>\nwrote:\n\nWe will not be adding compose v3 support for anything but Swarm\nenvironments.\nFrom: Robert Dailey notifications@github.com<mailto:notifications@github.com>\nSent: Tuesday, 12 March 2019 10:08 AM\nTo: portainer/portainer portainer@noreply.github.com<mailto:portainer@noreply.github.com>\nCc: Neil Cresswell neil@cresswell.net.nz<mailto:neil@cresswell.net.nz>; Comment \ncomment@noreply.github.com<mailto:comment@noreply.github.com>\nSubject: Re: [portainer/portainer] support compose version > 2 (#2054)\nAfter having messed around with Docker Swarm a bit, I decided it's way\noverkill for my homelab. I really don't have more than one server, I don't\nneed the complexities introduced by these features. Really if it just\nsupports v3 compose I think that's the correct direction to go.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2054-23issuecomment-2D471730187&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qbwK6Y07GS2E17K2cC2ekvBDn8ONCWhfKzuBo9L-adk&s=UuE75JJKLmjoVAAq2xax6scfFz60OM1-bopcXTYPqpU&e=>,\nor mute the thread<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaY5dq9g5kGo9dTM1CnznTy7V-5FhGks5vVsWUgaJpZM4VWpim&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qbwK6Y07GS2E17K2cC2ekvBDn8ONCWhfKzuBo9L-adk&s=QdnGbEg6kd4PuyOoRvb5d_wUOAj99gZScoqh72bvLxA&e=>.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2054#issuecomment-471741061,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABr6dh6WSLunMIS1tIAhmxw1Db5bGJjQks5vVs1JgaJpZM4VWpim\n.\n\n\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2054-23issuecomment-2D471768133&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RePa4Cnuu4_jTk0qldnqz7d3zDgbyo3zLE_VfsXf-gg&s=M73bw6rF1Of_4QKXIzTjMDDn5lKhbxJYy0LM39K7-ZE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlahnRUk913lTxb9Au3khhe8HCJDNks5vVtsQgaJpZM4VWpim&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RePa4Cnuu4_jTk0qldnqz7d3zDgbyo3zLE_VfsXf-gg&s=rlFD1mdLcHFO9qTLjl8gwryDntzgsJknncNRtgiyXU4&e=.\n. From an API perspective, there is no further innovation on compose for the docker standalone engine, all innovation is against stacks, which means swarm.\nNo idea on the Docker CLI\u2019s ongoing support for compose against a standalone host.\nN\nRgds,\nNeil Cresswell\nOn 12/03/2019, at 2:29 PM, Robert Dailey notifications@github.com<mailto:notifications@github.com> wrote:\nThank you for explaining. Does that mean that going forward, even for docker compose, doing services without swarm is not getting long term support? In other words, is it better to eventually move to swarm even if I only have 1 machine and do not need replication/etc and stuff?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2054-23issuecomment-2D471810182&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=01ucQ1vq-qM41UdnWrCTOSQt5o3sLoTjizudvgGdFZA&s=1MNySRM_Zb1IHq4o4IL6K9PUKfkIxFiU1YKToFX_M8w&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYo0QJAIbc0VYFOYbYnnJeMwBx-2DKks5vVwLbgaJpZM4VWpim&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=01ucQ1vq-qM41UdnWrCTOSQt5o3sLoTjizudvgGdFZA&s=Q64_pTm4sv1HkqhUJQ130RsT1k_ZbxooTW9S3GId7Ro&e=.\n. OK, so i tried to test this as best i could, but i dont know how to validate all the capabilities, so i just used cap-drop and dropped CHOWN capability. This worked. If you can suggest a mechanism to test cap-add for all the features, that would be great.\nOne thing, when using the container duplicate/edit and update feature, capabilities previously added are ignored. Need to amend this legacy feature to accommodate this new.. Oh good point, didnt think to check docker inspect.\nAll good, if docker inspect shows it.\nRgds,\nNeil Cresswell\nOn 4/08/2018, at 5:24 AM, baron_l notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HGnYnvzsVbGM5nk303yJVL-syDiVRXn5CKsrVmf0RGM&s=sgAhFzZHWS0tzl3AMie3zSZNJlR2nJevhALHQHmXaq0&e= to test this I created 2 containers with the same cap-add/cap-drop by\n\nPortainer on container1\ndocker CLI on container2\ndocker inspect both containers straight on the host to see if they had the same added/dropped capabilities\n\nNote : docker inspect doesn't show the default added/dropped capabilities for a container created with CLI and containers created with Portainer have them all explicit.\nI can work to avoid adding them all on CapAdd/CapDrop fields if the capability is on it's default value (so that, docker inspect on a container created with CLI or Portainer won't show any diff on those fields)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2078-23issuecomment-2D410321184&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HGnYnvzsVbGM5nk303yJVL-syDiVRXn5CKsrVmf0RGM&s=AWOeI9QhzebUwNv_P2qxMweO-G_ZepPch7jzQDz1fng&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld6M9-5F-5Fb1nw-2D72GCKVkg9Mm-5FY3Sfks5uNIckgaJpZM4VgbiO&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HGnYnvzsVbGM5nk303yJVL-syDiVRXn5CKsrVmf0RGM&s=1vy8ToU-bT-0ObrlL5eh4mx46bpft-e0ablVp1inZtI&e=.\n. Rancher did not scale to many hundreds of containers, or worse, hundreds of hosts across multiple clusters..\nPortainer must be able to work in a broad spectrum of use cases, and we have targeted the SME market, which is 1-10 clusters / 10-100 hosts / and 100-1000 containers. But that said, we already have users with over 1000 containers under Portainer control.\nReusing the Rancher UI concept for our target market would be a disaster.\nRgds,\nNeil Cresswell\nOn 1/08/2018, at 10:34 AM, wicadmin notifications@github.com<mailto:notifications@github.com> wrote:\nThe enhancements are in the UI images in the OP. I have reviewed 1.19.1 Home view and although the concept is partially there, one still has to drill down two more clicks to see their containers and perform actions on them.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2084-23issuecomment-2D409389972&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=oFFmbr4o2M4nPzvmamPpUjDT02DfqMAD1DR0ctBwB4Y&s=6A2OzqHkAowoLzCJ0XJVoppUCdRRLXxFaCz6D4m76U4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlU8aAvHhfmc0CGXI1GvkpvHcuwnKks5uMNt5gaJpZM4Vi6pa&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=oFFmbr4o2M4nPzvmamPpUjDT02DfqMAD1DR0ctBwB4Y&s=n5M17quSwN2YqqYrNUGMGYkrb0Or5HlRV8FJi_4r8yU&e=.\n. I get what you mean..\nWe are planning to introduce an operations dashboard (designed to be displayed in a network operations center display wall), which is a natural evolution of the current visualiser. This dashboard will show all containers grouped by host, show performance, health etc. you can click to drill down deeper, and right click to perform actions...\nThis is road mapped, so 3-6 months.\nRgds,\nNeil Cresswell\nOn 2/08/2018, at 2:37 AM, wicadmin notifications@github.com<mailto:notifications@github.com> wrote:\nOK, the only way I can covey what I would like is to provide an example via a screenshot (as already done). What I find very efficient and easy to work with is having the containers and their status listed on the node with the ability to perform the actions as indicated in the second screenshot. That gives us a screen we can glance at at all times and see where things are at and easily make process changes, executing shells etc. without having to come off that single screen/page. Each of those actions pops up a model dialog instead of navigating off the screen.\nI get it if no one else is open to the idea and therefore it doesn't need to be taken further. It is just one of the easiest and well designed things I have worked with in a long time both from a functional and efficiency (as well as productivity) standpoint and really sad to see it go.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2084-23issuecomment-2D409597808&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jFeynavgPm2OAJmyQLaXFK4FZuH-ExLcK-pJiOQy13U&s=SFXjQzRk1xDbyozYoCaYSdCJQ3nNI7a3C0CBebLTCwI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbIrEZxWO6fII6exPCPXDW0BXeGOks5uMb0zgaJpZM4Vi6pa&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jFeynavgPm2OAJmyQLaXFK4FZuH-ExLcK-pJiOQy13U&s=jN4J2Gw4wv39tKeetbGTVtvI-_jlHJu6g8pgJrTD8uk&e=.\n. Agree. We will add an admin option to reset templates, which will force a reread from any externally set template files, or from Portainers curated list. Expect a 1.19.2 release in the near future.\nRgds,\nNeil Cresswell\nOn 31/07/2018, at 7:53 AM, James notifications@github.com<mailto:notifications@github.com> wrote:\nAt this point Portainer will load external template definitions on first run, and then they are \"managed\" within Portainer's UI as you are seeing. I think the only way to \"flush and reload\" your templates definitions is to remove all the templates loaded into Portainer (via API calls) and then restart your Portainer container with --templates.\nI'm in a similar situation (just want templates loaded from our vetted templates.json URL). For now I'm just contemplating a nightly delete (via API) and container re-create. Would be nice if there was an option for pre 1.19 style template hosting, but not sure if that will come. So for now I think that's the route. As for editing templates that have been loaded, it looks like all \"admin\" users are allowed. I don't think there is a way to disable that (which would be nice also :) ).\nRegards..\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2088-23issuecomment-2D408988908&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DrB-azB1hJDmMury9h7eh_as8RViSbWyKdGt-PKfArQ&s=PjIPmLPF_V0ZDJY205R72x5zqRFnMXImTDyxRJ-nqrI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUi-5F3gLE5Kdbqrc1S2fXKv1mD8ikks5uL2RHgaJpZM4VlDCe&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=DrB-azB1hJDmMury9h7eh_as8RViSbWyKdGt-PKfArQ&s=wRcwHZr8CmOEgAjlUw_nRia5eqdu3MbdUcfMXJpau00&e=.\n. We should only show snapshot for agent or standalone hosts. No point if swarm and no agent as its misleading (unless you can pull cluster capacity info)\nRgds,\nNeil Cresswell\nOn 31/07/2018, at 6:49 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI'd rather consider this as an enhancement. There are a few things to consider here:\n\n\nDisplay CPU/RAM is useful in the case of a standalone engine\n\n\nIn the case of a Swarm cluster (without agent support), IMO it makes no sense to display this information as it will probably reflect the resources available on the manager node Portainer is connected to\n\n\nIn the case of a Swarm cluster (with agent support), we should display the resources available inside the whole cluster\n\n\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ITFFo44BG1jGp3zE6BxSgSF3sLO3pW7_7T-wQJA1IRs&s=23R_A4Yy96xRwW01kiIS3nSCRPmXqn8uCdVr2IVzRbU&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2095-23issuecomment-2D409113959&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ITFFo44BG1jGp3zE6BxSgSF3sLO3pW7_7T-wQJA1IRs&s=mOnY1I1jPhmdiU2osfzJr4qmxGki6klxEqf8h9naduo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTWHrIwozOCWbDFHct4jrjtAztREks5uL-5F3WgaJpZM4Vmpbb&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=ITFFo44BG1jGp3zE6BxSgSF3sLO3pW7_7T-wQJA1IRs&s=A1O2TrZwbFhz5OnwRS6sgHsTh2WCtmYA81O8X2eT0oI&e=.\n. I would also like to suggest that we default to setting the initial admin password during container startup, so as to provide protection between deploying the container and going through the setup initialisation.\nRgds,\nNeil Cresswell\nOn 31/07/2018, at 7:27 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nWe're currently thinking about removing the ability to start Portainer without any authentication layer (via the --no-auth flag).\nWe're aware that many of our users are actually using this kind of deployment but our opinion is that this option is too dangerous.\nThis issue is here to discuss how we can approach this with our users actually using this deployment method.\nIMO these are the interesting advantages of the no authentication deployment:\n\nUsed as a way to offer a better UX in a single user context\nUsed when delegating the authentication to another third-party software (a proxy for example)\n\nI believe that we could offer an equivalent of the first point via a remember me option (#613https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_613&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QGWi8xWc4X6sP02qCsif_HuSYPxr-nZqK3hnAuye_CU&s=YOvaUdzzDrFlbi4BrllUPzsH3isVxK-LWo6flYpS6QQ&e=), this would require the user to go through the onboarding step of defining an admin and then login from time to time without having to login each time).\nRegarding the second point, a user pointed us at an authentication middleware for proxy based deployment setups where the authentication is located on the proxy side: https://github.com/mogthesprog/jwtauthenticatorhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_mogthesprog_jwtauthenticator&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QGWi8xWc4X6sP02qCsif_HuSYPxr-nZqK3hnAuye_CU&s=_yJJ4rFJMCbf-mppqKzcYz97nMxCws9OlK-VkA_Im5A&e=)\nI'm not sure whether there is a lot of people using this deployment setup where auth is located on the proxy, I'm curious about it though.\nFor other authentication related issues:\n\nSupport for OAuth/SSO: #1124https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1124&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QGWi8xWc4X6sP02qCsif_HuSYPxr-nZqK3hnAuye_CU&s=SDXsdu0x9F4feaJ7-FsoQi0XGxjjRk5ynj3OUF0y0Fw&e= #1525https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1525&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QGWi8xWc4X6sP02qCsif_HuSYPxr-nZqK3hnAuye_CU&s=6ZPyboiXRFlaL5BqU9TW8DHXhCv-Pt3VQ_8hU-WRf8o&e=\nOriginal implementation of the --no-auth flag: #419https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_419&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QGWi8xWc4X6sP02qCsif_HuSYPxr-nZqK3hnAuye_CU&s=3FBx7ekgXarjkX3iAr0lPXiIHl0gQ7Q5_Y9sjYwRXWE&e=\n\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QGWi8xWc4X6sP02qCsif_HuSYPxr-nZqK3hnAuye_CU&s=LEhHFE8YNMbj-rJjH0-neAGSRHGLADEX9o-8rOFOTpg&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2101&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QGWi8xWc4X6sP02qCsif_HuSYPxr-nZqK3hnAuye_CU&s=PrCvOuVOCihWFefBPImxaAAsnCZXaaFdJ5gBGKK996g&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQHoJNjFVSieZRYtQX8cw9M-5FoG9eks5uMAbvgaJpZM4VnvE-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QGWi8xWc4X6sP02qCsif_HuSYPxr-nZqK3hnAuye_CU&s=C2_90i39zgFnlhFL6CHNLlPPCqlTj4bd44oWOtUPbV4&e=.\n. And if we replaced noauth with single sign on that wouldnt be acceptable?\nRgds,\nNeil Cresswell\nOn 9/12/2018, at 7:30 AM, Ryan Wilson-Perkin notifications@github.com<mailto:notifications@github.com> wrote:\nWe're looking to include Portainer in our local development tool used by ~60 engineers. The development tool starts portainer and opens it for them. We're trying to remove as much manual clicking from the users as possible, and we rely on --no-auth to skip one of those steps. IMO removing --no-auth would be a mistake.\nIf the intent is to remind the user this is potentially dangerous, what about renaming to --dangerous-no-auth (or similar)?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2101-23issuecomment-2D445479841&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=aE3jE3ywar0VeP9cYAYf3LYZPHMckCqIroBkqW5bIEY&s=TAL_STIDak5ACC9FPP4Nj6qsbxGxFtsuhyi-fkzq0B4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrleTlmcC17ZbfpUm-2Da5M6S6nGrA9Rks5u3AUvgaJpZM4VnvE-5F&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=aE3jE3ywar0VeP9cYAYf3LYZPHMckCqIroBkqW5bIEY&s=Y38gUyjuz9DSTYsS9LZXziHeOvReZbkg7sa8b3Fv6CY&e=.\n. Ok, and when you deploy Portainer for your devs, i assume its on their local development pc\u2019s, and not a single portainer instance for all?\nCould we look to make a conditional use of the flag in that portainer would then only listen to 127.0.0.1:9000 and not bind to the hosts ip?\nNot even sure how we would do that, just trying to find ways to ensure we provide the most secure platform available as its our brand that gets hurt when people use the flag in ways it shouldnt (ie when its internet facing).\nRgds,\nNeil Cresswell\nOn 9/12/2018, at 8:35 AM, Ryan Wilson-Perkin notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Ns4w9Uz1ZNWiB3mHtmG6b_W5JdHIkAk1NV6OtSFGGZo&s=yANuv7nyA2QxldXUS7aMw7k1A4u77yym7QUs0S9xVCs&e= not in our case, no. We're strictly using it for local container management, so SSO would be unnecessary.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2101-23issuecomment-2D445484154&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Ns4w9Uz1ZNWiB3mHtmG6b_W5JdHIkAk1NV6OtSFGGZo&s=6laW_T0jnqqeMb1riphpzCxSrosDFA43r7RU-Wyxiqs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlc3ju1v-2D97R2ddeZoed-2DWNAYGX4vks5u3BRmgaJpZM4VnvE-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Ns4w9Uz1ZNWiB3mHtmG6b_W5JdHIkAk1NV6OtSFGGZo&s=62ifs7lg2JnxslPjZep-9gHEIQ2beJeEti1UfC-t-eA&e=.\n. Ok, let me investigate how we can achieve this.\nKeeping \u2014no-auth but having it enable a bunch of sane defaults seems like a winner to me.\nWatch this space.\nRgds,\nNeil Cresswell\nOn 9/12/2018, at 10:20 AM, Ryan Wilson-Perkin notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gjTwKNBp1l-7feIgufObL27OBdBTq2DZ24xkyiJtEoI&s=5YR8AfNArU7wJrW58nduNIWQvwhLfnrc33zP4d3hELw&e= yep, this would just be running on their local development PCs and not centrally managed.\nBinding to just 127.0.0.1 sounds like a good call to me. I think Portainer is an amazing tool for improving local development and would advocate to go even further in that direction. Something like a --local flag could enable a whole bunch of sane defaults: listening on 127.0.0.1, defaulting to \"Local\" environment and \"local\" endpoints, disabling auth.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2101-23issuecomment-2D445490843&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gjTwKNBp1l-7feIgufObL27OBdBTq2DZ24xkyiJtEoI&s=xO3qLmCx_p3-zUmY1d7AtPw5-2qlNmcSYb0PwSt7DFs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXt26sWJI4RiEXBHJOou6XcWS260ks5u3C0hgaJpZM4VnvE-5F&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gjTwKNBp1l-7feIgufObL27OBdBTq2DZ24xkyiJtEoI&s=cUEeYOqsPY9tHS2MuCRnG_bKSKQRvtvRw6AMpZHEtWo&e=.\n. Sorry but that wont ever be an option provided.\nSent from my iPhone\nOn 4/01/2019, at 9:04 PM, Robert Baker notifications@github.com<mailto:notifications@github.com> wrote:\nI actually want the ability to disable auth right in the web ui settings. I use docker w/ traefik and google auth. I have no use for internal auth.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2101-23issuecomment-2D451378134&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WwC6kmfSeiTqxFXsJ30_wJibXD860CSa91C--vdHvWI&s=TrnZ1g-AFNMk9q3Zhj5M10ZCqJdK5EOlopb96IYrQj4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlfvpc1TjcvBQoqeMLx5aqGJ-5FE62Rks5u-5FwsCgaJpZM4VnvE-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=WwC6kmfSeiTqxFXsJ30_wJibXD860CSa91C--vdHvWI&s=6jbmPJDsxsA4C83qgZ4DSsS5267WUWnSkwDoLs7L4Ek&e=.\n. All good.  But as i said, i wont allow our development team to disable authentication, sorry.\nSent from my iPhone\nOn 5/01/2019, at 7:18 AM, Robert Baker notifications@github.com<mailto:notifications@github.com> wrote:\nThis isn't the issue to discuss but the fact anyone as considering removing the ability to disabling auth in the spirit of 'protecting the children' is a bad idea.\nI'm a single user, why would I want to login twice? I'm using a reverse proxy which is best practice. I can't think of any web app that doesn't allow you to disable authentication.\nOut of the box it should be secure, but don't cripple users who have no need for your internal auth.\nThis is similar to the iframe deny security header issue a while back. Someone must have read a blog about security and put the header on by default and broke everyone who was using organzir/Heimdall/dashboards etc that embed apps in iframes.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2101-23issuecomment-2D451524737&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JWQropQXh4-rejCWF3sArkhDpsfMmzyaJ8YLg6P_Rlg&s=NiVstlZLOzJm9PZV37eNgh7L0YfraYQ0EYis5NMK-ec&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSM7meeM2TvJneL-5F8ckhLlk-5FtKd6ks5u-5F5regaJpZM4VnvE-5F&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JWQropQXh4-rejCWF3sArkhDpsfMmzyaJ8YLg6P_Rlg&s=L2YSa7eFIvtz2V8qsEmrULcOd5WHhqltO1qzSOeAMZM&e=.\n. We wont be removing the flag. Our users want it to stay, so it will (however, we need to find a way to counter the CVE raised against portainer due to users exposing unprotected instances to the internet).\nRe reverse proxy, we agree and will look to add that capability via an extension early this year.\nSent from my iPhone\nOn 5/01/2019, at 5:53 PM, verbruggenalex notifications@github.com<mailto:notifications@github.com> wrote:\nHi Neil,\nI'm also using Traefik setup with auth on it. At least some kind of plugin that integrates with Traefik would be nice (if it's in Portainers' stack). This allows you to protect each container individually as well.\nI know it's another product and it's a big decision to do an integration with another product. But having a reverse proxy is a requirement for a lot of people. I think if you poll your users you'll find plenty of them are using Traefik.\nI'm not really bothered by having the --no-auth flag or not. For me personally auth can stay and the flag may be removed. My main issue is to give easy access to other containers. That would mean docker label support for Traefik.\nNot having this information in Portainers' UI is pretty annoying for me.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2101-23issuecomment-2D451627902&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HnTtgTEAyRSTN7Pt2UMjV9Wwtu1HcsL8Kaydzb3EzoU&s=LhWErEHpa_OPHC7CtchEf2Iw6UtGq9gDwXSjLSxOy2A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlc5zUmiybur32bRjzhEuT6APv909ks5vAC-5FGgaJpZM4VnvE-5F&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HnTtgTEAyRSTN7Pt2UMjV9Wwtu1HcsL8Kaydzb3EzoU&s=hOqHEjCQbKbMfoKs5-Gp_Mb05_HM3kkzGLO-5d7ibpo&e=.\n. Based on my own testing..\n\nsetting the registry URL as registry.gitlab.com, setting authentication, and pushing neil.cresswell/testimage:alpine succeeds\nsetting the registry URL as registry.gitlab.com and pulling neil.cresswell/testimage:alpine fails\nsetting the registry URL as registry.gitlab.com/neil.cresswell, setting authentication, and pushing testimage:alpine fails\n\nsetting the registry URL as registry.gitlab.com/neil.cresswell and pulling testimage:alpine succeeds\n\n\nWhen trying to deploy a container within Portainer using registry.gitlab.com with image neil.cresswell/testimage:alpine, fails with a red toaster and the message \"no image or no permission\" (but can deploy anonymously from CLI just fine)\n\n\nWhen trying to deploy a container within Portainer using registry.gitlab.com/neil.cresswell with image name testimage:alpine fails with a red toaster and the message \"b is null\".\n\n\nSo, at present, there is no way to use GitLab container registry from within Portainer.. Yes, there is a compatibility issue at play im sure\nRgds,\nNeil Cresswell\nOn 1/08/2018, at 8:55 PM, Thomas Krzero notifications@github.com<mailto:notifications@github.com> wrote:\nAs I know, the gitlab registry permit sub-domain in docker image names\nOn dockerhub, with your namespace myuser, you can use images like :\n\nmyuser/image1:latest\nmyuser/image2:v2\n\nOn Gitlab you can use up to 3 subdomains :\n\nmyuser/subdomain1/subdomain2/myimage:latest\n\nI think portainer image url parsing is based on dockerhub format\nDon't know if it's directly related to this issue...\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2105-23issuecomment-2D409502622&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7Lu_Rkp9ZCZ9dZVN0dqdUabnqLuMa8b8sVLyM6hLD3k&s=pq2RscuC7c-74wmQRkkOBvwsngPKWhyu3Lm2XXGoAVQ&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXS11-5FmYGKMHrIe7oscaOPy6sM87ks5uMWz6gaJpZM4Vpu-5Fb&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7Lu_Rkp9ZCZ9dZVN0dqdUabnqLuMa8b8sVLyM6hLD3k&s=7QaIpxKYEFplWFPvqFbGENeJgTvfzgsUxukloYebVAY&e=.\n. Couple of small cosmetic changes (but functionally, its working  fine)\n[cid:image001.png@01D42E24.6253DAB0]\nCan we say \u201cNFS Version\u201d rather than version? Also, the number selector goes from 0 \u2013 10, whereas the options should only be NFS or NFS4 (NFS3 is not valid). So this box should be a selector where the user can select EITHER NFS or NFS4\nAlso, please add a tooltip for Options, where is says \u201ccomma separated list of options\u201d\nFrom: Anthony Lapenna notifications@github.com\nSent: Tuesday, 7 August 2018 1:20 a.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] feat(volume-creation) : NFS volume creation (#2083) (#2108)\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yqJg2cNK6CUXe2zfqCY2-_RaDCIBphgPB_4AspUp8rw&s=2Ei637MOdIZqOHklru25zN4bnN3-CtKVABd0GPlkIMw&e= can you test it to ensure everything is working fine? You can use the image portainer/portainer:pr2108.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2108-23issuecomment-2D410705202&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yqJg2cNK6CUXe2zfqCY2-_RaDCIBphgPB_4AspUp8rw&s=ODGtzPknMWg1bvZLox9-7ugc4u0hcGdwuEKrS-zpRy8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcZ7AmHS4hG94F3QPiCOcEv8dx2Vks5uOEJ7gaJpZM4VqIdm&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=yqJg2cNK6CUXe2zfqCY2-_RaDCIBphgPB_4AspUp8rw&s=2WpWcK4Gr5WkqQVz1GdW5ty5ELiXkSs03NnQz6UTfNA&e=.\n. Did you see that we have a stack migrate feature in Portainer already?\nIn a running environment, make sure Portainer is configured with the old and new swarm cluster, then go into stacks on the old cluster, and there is a migrate stack feature.\nThis doesnt work if the old swarm is gone tho...\nRgds,\nNeil Cresswell\nOn 2/08/2018, at 7:11 AM, Zicklag notifications@github.com<mailto:notifications@github.com> wrote:\nI use Portainer to manage my Docker Swarm and I had a problem when I had to migrate my apps, including Portainer, to a new Swarm cluster. I assumed that if I ran Portainer with the same data volume, on the new Swarm, it would have all of my Docker stacks from my old Swarm cluster, but instead they were all gone. This confused me greatly. After hours of troubleshooting, by investigating the portainer database, I found that Portainer keeps track of the Swarm ID that all of the stacks are tied to. This meant that because the new Swarm cluster had a different ID, Portainer was not going to show any of my stacks from the old cluster.\nIn order to fix this and get my many stacks available again, I had to use sed to replace all occurrences of the original swarm ID with the swarm ID of my new Swarm cluster. I also had to go and rename all of the directories in the data volume that contained the stack yaml's, because they also have the swarm ID in their names. Thankfully this has not had any strange side effects and I can again access all of the stacks in my swarm cluster.\nIt would be far more preferable if Portainer could allowed me to migrate the stacks from my old Swarm cluster to my new Swarm. Also it has to allow you to do the migration even if the old Swarm is no longer connected to Portainer.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2113&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EV0egb9vNhT-h15IdXVgSmNOAYm5U5QLrvH2741oxF0&s=Ww5iGQTmJTpI4u9hjehYdBVdxeP71RYcTOe5cE2ZCMI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZIdRbirf7RK7yb0-5FFuVo-5FZIQF2Fks5uMf1OgaJpZM4VrD2J&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=EV0egb9vNhT-h15IdXVgSmNOAYm5U5QLrvH2741oxF0&s=3L2pE90ivqfpInsRytfX1jZIWEP7HSVLyczgfKJgWR4&e=.\n. Like in vmware, vms are \u201corphaned\u201d when their host is gone, but you can still fiddle with them to recover\nRgds,\nNeil Cresswell\nOn 3/08/2018, at 7:51 AM, Zicklag notifications@github.com<mailto:notifications@github.com> wrote:\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KA2F2GvaTx8cH61rmbdfjzh7Cybn4VvLbkiCGn0RCqg&s=kobzMGIJNrFyfYpLp-j96ip0yrgzWBv3QvS3acrtvLs&e= You are correct. I don't expect Portainer to migrate the actual containers to/from any other environments, I just want to be able to recover my stacks from the previously managed Swarm cluster. It was a matter of not wanting to lose quite a few stack yaml's and the environment variable configuration that came with them.\nAll that I would want Portainer to do for me is automate the process of replacing the Swarm ID references in the database and the stacks folder, just like I did manually.\nWhen I migrated my swarm cluster, I was thinking that I should be able to migrate all of my data, run Portainer on my new Swarm cluster with its data, and be able to use Portainer to start all of my stacks up again. To my surprise, I couldn't find any of my stacks in the Portainer UI. It took me a while before I found out why. I had to use Vim to inspect the Portainer database and find the references to the old Swarm ID.\nI think the simplest implementation of this feature would be the ability to view the stacks of disconnected Swarm clusters in the UI. The old Swarm could show as a disconnected endpoint that I could still browse the stacks of and still use the migrate feature to move the stacks from that endpoint to a new one.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2113-23issuecomment-2D410047283&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KA2F2GvaTx8cH61rmbdfjzh7Cybn4VvLbkiCGn0RCqg&s=dag2FElJt_MOC6c-pblWrXOdCM4cKtBhNLhaGTTm7o8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldthdDLiVKZ2s1-2DZEHBocNOEk97jks5uM1hJgaJpZM4VrD2J&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=KA2F2GvaTx8cH61rmbdfjzh7Cybn4VvLbkiCGn0RCqg&s=nabsOFwHbW6cRW-OWKPqm0uhq9VD5f4WRu9u_-1hIw0&e=.\n. OK, so the UX for this is quite hard to understand... we need to find a way to dramatically simplify. I have used MACLAN a number of times, and even i got lost trying to follow the UI.\nDid you take a look at how UCP addresses MACVLAN definition ? Theirs seems simpler.. if you select macvlan, and select \"creation\" then you should not be prompted for Network Configuration again (subnet etc). creating a MACVLAN config does not force you to enter a value for parent network card, yet this is a requirement for MACVLAN to work. that needs to be a mandatory field. sorry, one more. dont use the term \"aux address\" as its meaningless to most people, use \"exclude IPs\" or something, which reflects that the IP entered in that field is excluded from the IP Pool\n. I cannot get this to work.. every time I try I get \u201cgateway address already in use\u201d error\nFrom the CLI, this is how I create my MACVLAN config:\ndocker network create --config-only --subnet 192.168.1.0/24 --gateway 192.168.1.1 --ip-range 192.168.1.120/32 -o parent=ens160 macvlan_config\nAnd then this is how I create the MACVLAN Network\ndocker network create -d macvlan --scope swarm --attachable --config-from macvlan_config macvlan_network\nwhich works.\nBut when I try via the new UI,\nI set the parent to ens160, I set the subnet to be 192.168.1.0/24, the gateway to be 192.168.1.1, the range to be 192.168.1.120/32.\nThe creation succeeds, but when I create a service and attach a container to that network, the tasks are always rejected with \u201cgateway address already in use\u201d.\nI tried adding in the gateway to the AUX address, same error.\nWhat am I doing wrong ?\nFrom: Anthony Lapenna notifications@github.com\nSent: Tuesday, 7 August 2018 1:17 a.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] feat(network-creation): macvlan driver for swarm mode (#2082) (#2122)\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uHSnTkysep872hMF0-ElTCSUQZTqyC2TVr-PsxPC83g&s=hZ_6UfegiSzkwcD8shUMtojmIxXxfjkAas_BCnS1rp4&e= can you validate this one functionally ? You can use portainer/portainer:pr2122 to try it.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2122-23issuecomment-2D410704174&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uHSnTkysep872hMF0-ElTCSUQZTqyC2TVr-PsxPC83g&s=kEjf_uiqwTZg5DaKwFhvCKB3e1hvqcsfTAeCcvLq-Q0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWZDOO3jPCna1D-5FbbXT3P9xg4oVPks5uOEGxgaJpZM4Vs6WL&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uHSnTkysep872hMF0-ElTCSUQZTqyC2TVr-PsxPC83g&s=9bWbvwp3XOkJCjUYE87iDM7hcQeCzlUZnrgNBaThZYg&e=.\n. At the moment no, the db we use (bolt) doesnt support that.\nWe have an open feature request for an external db, so at the moment we recommend storing the data on nfs\nRgds,\nNeil Cresswell\nOn 15/08/2018, at 1:49 PM, Gavin Jones notifications@github.com<mailto:notifications@github.com> wrote:\nThinking I can understand the security implications for how you've implemented this. However, doesn't work well when running portainer in swarm mode with multi nodes. If the original portainer node goes down or task is otherwise rescheduled, this will break the setup - unless the portainer storage volume is replicated across swarm. I notice you've documented a note on this here:\nhttp://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-clusterhttps://urldefense.proofpoint.com/v2/url?u=http-3A__portainer.readthedocs.io_en_stable_deployment.html-23inside-2Da-2Dswarm-2Dcluster&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MMtSyZEVR0B9D7D_VUYMNDJJVVDezPTSYQIFuF4fZBA&s=65ZVNKBsz3WbLheHxYJdjbiXYbSdH8liMH2HeRMnu0s&e=\nNote: The Swarm service example will persist Portainer data in /path/on/host/data for each host in the cluster. If the container is re-scheduled on another node, existing Portainer data might not be available. Persisting data across all nodes of a Swarm cluster is outside the scope of this documentation.\nIs there another option for storage of the key data that will work with swarm mode, without needing this volume replication? Ideally, if we ran the portainer service in global mode, could portainer itself handle updating key data on each node?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2133-23issuecomment-2D413069619&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MMtSyZEVR0B9D7D_VUYMNDJJVVDezPTSYQIFuF4fZBA&s=wWUZRdLK1Y22SAG6LM2B0JJWp9CBUq-6aAOfli0rt3c&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYAh7iiSWB3zG1fJVku-2DO6dbaadwks5uQ34XgaJpZM4VwsuH&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MMtSyZEVR0B9D7D_VUYMNDJJVVDezPTSYQIFuF4fZBA&s=_pViLe9AzskFBQB807eWeDzk3qBbYi63G0JjVO7KttQ&e=.\n. 100% agree.\nIf using swarm, we must force the use of swarm stacks.\nRgds,\nNeil Cresswell\nOn 27/09/2018, at 8:19 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nOk so not really a bug here. Actually, our intention was to force the user to deploy Swarm stacks only (and do not allow Compose stack deployment) when connected to a Swarm cluster.\nFew reasons are:\n\nWhen managing Swarm clusters, users should be using services instead of containers\nCompose support is actually far behind Swarm stack support\n\nThoughts @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dx2Y6wrnNqLVrSudQtMEp2ex1azn9f5gAkIdSwHBlRk&s=5ldVm_2-nul-xorOG1T8D_YQjbQ2H6bAzlfL5tfBhWk&e= ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2134-23issuecomment-2D424855724&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dx2Y6wrnNqLVrSudQtMEp2ex1azn9f5gAkIdSwHBlRk&s=i9D1xJZu7erD2_Mu5hI09l5qqUlhdki8fBtmDvXv7w4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbyq3Auo6mc50SyhiXpQIHVQMKvlks5ue-2DFcgaJpZM4Vw9Gi&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dx2Y6wrnNqLVrSudQtMEp2ex1azn9f5gAkIdSwHBlRk&s=ri0K6wQihSsy_mQ07car3u8ndwH6nB-ksdDtTCDms9c&e=.\n. When enabling support, user should be shown a message advising about the deployment constraints (agent vs no agent).. I dont want to add it, our multi-selector does this without adding risk.\nRgds,\nNeil Cresswell\nOn 8/08/2018, at 7:08 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nThis is something that we never added in Portainer as we always considered this as too dangerous for the user.\nWe had a discussion about the ability to prune images some time ago where we thought about adding it for an administrator user with a confirmation modal.\nThoughts @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JEoJTwUpVC6fQLUVcb2etRiMot2wT7K9k4n0A2ckt0A&s=EXRXQkxYjWSquae3pNLT7WA9xq7JYb4mTLYX6AXhpU8&e= ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2135-23issuecomment-2D411308762&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JEoJTwUpVC6fQLUVcb2etRiMot2wT7K9k4n0A2ckt0A&s=aeX-3n2x1YPz6b9I8gW5v-zldaPoAQXwTkQfw9PORj0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlffMctcp02KRtZp5RH-5F3xnHzkDkuks5uOo6FgaJpZM4VyHJZ&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JEoJTwUpVC6fQLUVcb2etRiMot2wT7K9k4n0A2ckt0A&s=tIwepPGpLLgDW7qB6BOaiMbKcW-4aQlm-sBtMs_BTbA&e=.\n. Risk is that just because a volume or image or container is stated as \u201cunused\u201d at a given point in time doesnt mean that another admin isnt about to use it.\nWe have the consider the fact that portainer is designed for multiple concurrent users, so giving one user absolute power is dangerous.\nThe multiselect (tick boxes next to images etc) adheres to portainer RBAC, so you can only delete resources you own.\nRgds,\nNeil Cresswell\nOn 8/08/2018, at 8:04 PM, Jimmy Merrild Krag notifications@github.com<mailto:notifications@github.com> wrote:\nThat's a shame. I could really use this when getting low on disk space.\nOf course there should be a confirmation modal that also indicates what would be deleted (like the command does, not necessarily detailed to which exact objects), but how about also requiring that these buttons should be enabled in settings by admin, and that they could be enabled for admin only?\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Qpj6jFnUhbs2m7ShlBdIosG2Iw-WqpguDw2K0vG_TYM&s=NnQyZCGqHYrpWVyDrqc55_LhkwEKr7BjX5d09w6hop4&e= could you elaborate on how the multi selector does this without adding risk? And what risk will be added by using pruning?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2135-23issuecomment-2D411322742&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Qpj6jFnUhbs2m7ShlBdIosG2Iw-WqpguDw2K0vG_TYM&s=fZJEqjVobjG12NBtcuRUt-5S37Stp3VT7rBM3FFUE1Y&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSP2b-2DlhfEy3CcmaAdLEAZi9ELXbks5uOpuhgaJpZM4VyHJZ&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Qpj6jFnUhbs2m7ShlBdIosG2Iw-WqpguDw2K0vG_TYM&s=q0ddFvlWEhpkRM99K4e8Enah9RQYnZw_dL1CNtyjHYs&e=.\n. You mean when reusing our code in your own project; ala the license text to insert within your license under OSS rules?\nOr simply a credit to Portainer?\nFor the former, we can help as its well defined.. for the later, we don\u2019t have anything to date, but can help.\nFrom: GoncaloBorges notifications@github.com\nSent: Monday, 13 August 2018 7:59 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Acknowledgement Text (#2154)\nQuestion:\nDear All... I would like to properly acknowledge portainer in the documentation i am building internally. Is there any predefined text we could include?\nThank you\nGoncalo\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2154&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RcvUzyYTCna99mXgAmPxCbS6mtGVRiAeD4WsEjHEnRc&s=muvpadgNZHMu9REPBreQNtIyJ8vr23KaVZ8KZd7k7nw&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldQ1krSlw996AJum1W17zI1gTFYnks5uQTG0gaJpZM4V6C9-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RcvUzyYTCna99mXgAmPxCbS6mtGVRiAeD4WsEjHEnRc&s=vvny1tHyNj6KKJ1DHRvFtTW6mZgU9YygpodUP89ekN0&e=.\n. Ah, so then just a simple thanks to the Portainer.io team is sufficient \ud83d\ude0a We appreciate the gesture.\nAnd if you are using this in production, feel free to join our \u201cportainerfutures\u201d channel in Portainer.io/slack, and share your needs to help form the future.\nNeil\nFrom: GoncaloBorges notifications@github.com\nSent: Monday, 13 August 2018 8:19 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] Acknowledgement Text (#2154)\nCurrently we are not changing any code but just deploying it as it is. But\nwe are leveraging puppet and the APIs to provide ldap integration and\ndeploy some custom apps and volumes.\nI just want to give credit to the team which is developing the product and\nthe brand\nOn Mon, 13 Aug 2018 at 6:13 pm, Neil Cresswell notifications@github.com<mailto:notifications@github.com>\nwrote:\n\nYou mean when reusing our code in your own project; ala the license text\nto insert within your license under OSS rules?\nOr simply a credit to Portainer?\nFor the former, we can help as its well defined.. for the later, we don\u2019t\nhave anything to date, but can help.\nFrom: GoncaloBorges notifications@github.com<mailto:notifications@github.com>\nSent: Monday, 13 August 2018 7:59 p.m.\nTo: portainer/portainer portainer@noreply.github.com<mailto:portainer@noreply.github.com>\nCc: Subscribed subscribed@noreply.github.com<mailto:subscribed@noreply.github.com>\nSubject: [portainer/portainer] Acknowledgement Text (#2154)\nQuestion:\nDear All... I would like to properly acknowledge portainer in the\ndocumentation i am building internally. Is there any predefined text we\ncould include?\nThank you\nGoncalo\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2154&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RcvUzyYTCna99mXgAmPxCbS6mtGVRiAeD4WsEjHEnRc&s=muvpadgNZHMu9REPBreQNtIyJ8vr23KaVZ8KZd7k7nw&e=>,\nor mute the thread<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldQ1krSlw996AJum1W17zI1gTFYnks5uQTG0gaJpZM4V6C9-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RcvUzyYTCna99mXgAmPxCbS6mtGVRiAeD4WsEjHEnRc&s=vvny1tHyNj6KKJ1DHRvFtTW6mZgU9YygpodUP89ekN0&e=>.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2154#issuecomment-412441303,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AD_5MG3GMczkA8Nj7XIzCSVDr6KotuaEks5uQTUygaJpZM4V6C9_\n.\n\n\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2154-23issuecomment-2D412442633&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vfF05uQH-H7l7RS18-kzESdG7p2QvM0Sp1OZW6__rIA&s=_d79cssqsxrsohyEm2Nr0iMWGoVs3pLno7zmuUP1VJk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUtAby3D5OQU-2DH9sgLsUBHki6L48ks5uQTaFgaJpZM4V6C9-5F&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=vfF05uQH-H7l7RS18-kzESdG7p2QvM0Sp1OZW6__rIA&s=CaLBiaRRCtKu__4tKAlEvqs2XwsiybXnWZWAjzpL9FQ&e=.\n. As admin, go to settings, and disable the ability for non-admins to use bind mounts. Solved.\nRgds,\nNeil Cresswell\nOn 13/08/2018, at 9:56 PM, Valentin Deville notifications@github.com<mailto:notifications@github.com> wrote:\nQuestion:\nHello,\nI have restricted one secret container to administrator only, in web interface my test user dont see it, it's good.\nBut if my test user create container with volume /var/run/docker.sock on the same endpoint, connect to test container, install docker it's will be abble to interract with secret container.\nDo you have any solution to restrict this ?\nThanks\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2155&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=d1Il5h1wOfLpRJAXPr2BHAj7FZZhTNK1y3UeZUxLS6Y&s=h8recy8sqmt8r0fQl9oFZp9KRewfP0mBK8_b3xVUMbA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlR7Jm08ckgR7fl-5Fa8bsLLZTC3oDQks5uQU0xgaJpZM4V6NkZ&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=d1Il5h1wOfLpRJAXPr2BHAj7FZZhTNK1y3UeZUxLS6Y&s=y195npag4syAM5l6r4Wy1sj_i5TqJXKo7d11xtUj2fM&e=.\n. Sure, as long as this is being developed by a contributor, then i have no issue with it as it could be quite useful.\nRgds,\nNeil Cresswell\nOn 16/08/2018, at 2:26 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MPT03Fhys_Cb6Lkdax73Nr13Qn7dRnI4fyLJX1hsj40&s=IrySRKsM1ym-OPgai1Htz6-W6Z4bML1Z8Hrz8Pk7rn8&e= thoughts on this?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2159-23issuecomment-2D413214066&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MPT03Fhys_Cb6Lkdax73Nr13Qn7dRnI4fyLJX1hsj40&s=yizyFu8PsvdtSsoHKxSlJRLBTcoQKmcT9bQefV3XcFg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlR6qGWjDuRc5kOxHTb1JThnPTmHiks5uRC9cgaJpZM4V9AbS&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MPT03Fhys_Cb6Lkdax73Nr13Qn7dRnI4fyLJX1hsj40&s=9i6FdgNTfDg5fPB2LKIvmCylsEGJEo2Eh92kiTzv2ZQ&e=.\n. No, we can handle it from documentation and our \u201cto be created\u201d user guide.\nFrom: Anthony Lapenna [mailto:notifications@github.com]\nSent: Thursday, 16 August 2018 7:35 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] feat(console): Adds custom commands based on container labels (#2159)\nOk, this will probably need to be documented though. Not sure where as we don't have any user guide yet.\nShould we add an information line to this view to specify that extra commands can be added via labels?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2159-23issuecomment-2D413310281&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UMdZ-Yxo1E3QQOhbDoWIyd87wmfg6vPSBi_t5pu_Wag&s=1lUzoIFQpca5igHV2RvBkvWEi5N73Aj1-orDa-F0iVE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVmnpLni0UU5de9stQklvtSct4NNks5uRHfwgaJpZM4V9AbS&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UMdZ-Yxo1E3QQOhbDoWIyd87wmfg6vPSBi_t5pu_Wag&s=iQiSFp5wH0egkn9BJldRZLIFlb1iiqDEHyYKdt_Hgxo&e=.\n. How have you configured LDAP within Portainer, can you share the settings?\nFrom: David Stephens notifications@github.com\nSent: Thursday, 16 August 2018 10:20 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Panic on LDAP auth against Active Directory with Auto User Provisioning enabled (#2168)\nBug description\nAfter configuring LDAP authentication against Active Directory, Portainer panics after creating the user but before allowing the user to log in.\nExpected behavior\nUser gets created in Portainer and is allowed to log in.\nSteps to reproduce the issue:\nSteps to reproduce the behavior:\n\nConfigure Portainer to auth against LDAP, enable automatic user provisioning.\nTest connectivity.\nTry and log in through the web UI using known good credentials.\nObserve that the UI returns an \"Invalid Credentials\" message.\nObserve that the user will have been created in Portainer.\nObserve the stack trace in the docker logs (pasted below)\nDelete the user in Portainer\nCreate the user manually with the same name as an administrator, and disable automatic user provisioning in LDAP config.\nTry and log in again\nObserve that login is successful.\n\nTechnical details:\n2018/08/16 10:06:30 http: panic serving : runtime error: invalid memory address or nil pointer dereference\ngoroutine 544647 [running]:\nnet/http.(*conn).serve.func1(0xc4203c1220)\n    /usr/local/go/src/net/http/server.go:1697 +0xd0\n\npanic(0xc76680, 0x1283a10)\n    /usr/local/go/src/runtime/panic.go:491 +0x283\n\ngithub.com/portainer/portainer/http/security.authorizedEndpointAccess(0xc42039b2a0, 0x0, 0x3, 0x12c8188, 0x0, 0x0, 0xc42039b2f8)\n    /go/src/github.com/portainer/portainer/http/security/authorization.go:173 +0x26\n\ngithub.com/portainer/portainer/http/security.FilterEndpoints(0xc420232000, 0x35, 0x44, 0xc42041b440, 0x1, 0x1, 0xc42048ced0, 0x8, 0xc42039b710, 0x1)\n    /go/src/github.com/portainer/portainer/http/security/filter.go:109 +0x1a5\n\ngithub.com/portainer/portainer/http/handler/endpoints.(*Handler).endpointList(0xc4203b70e0, 0x123d5e0, 0xc4207f6540, 0xc4207e5d00, 0x73501b)\n    /go/src/github.com/portainer/portainer/http/handler/endpoints/endpoint_list.go:28 +0x2ea\n\ngithub.com/portainer/portainer/http/handler/endpoints.(*Handler).(github.com/portainer/portainer/http/handler/endpoints.endpointList)-fm(0x123d5e0, 0xc4207f6540, 0xc4207e5d00, 0xc42048cf00)\n    /go/src/github.com/portainer/portainer/http/handler/endpoints/handler.go:49 +0x48\n\ngithub.com/portainer/portainer/http/error.LoggerHandler.ServeHTTP(0xc420041d20, 0x123d5e0, 0xc4207f6540, 0xc4207e5d00)\n    /go/src/github.com/portainer/portainer/http/error/error.go:24 +0x44\n\ngithub.com/portainer/portainer/http/security.(*RequestBouncer).mwUpgradeToRestrictedRequest.func1(0x123d5e0, 0xc4207f6540, 0xc4207e5c00)\n    /go/src/github.com/portainer/portainer/http/security/bouncer.go:140 +0x137\n\nnet/http.HandlerFunc.ServeHTTP(0xc4202fd380, 0x123d5e0, 0xc4207f6540, 0xc4207e5c00)\n    /usr/local/go/src/net/http/server.go:1918 +0x44\n\ngithub.com/portainer/portainer/http/security.(*RequestBouncer).mwCheckAuthentication.func1(0x123d5e0, 0xc4207f6540, 0xc4207e5b00)\n    /go/src/github.com/portainer/portainer/http/security/bouncer.go:202 +0xd7\n\nnet/http.HandlerFunc.ServeHTTP(0xc4202fd3a0, 0x123d5e0, 0xc4207f6540, 0xc4207e5b00)\n    /usr/local/go/src/net/http/server.go:1918 +0x44\n\ngithub.com/portainer/portainer/http/security.mwSecureHeaders.func1(0x123d5e0, 0xc4207f6540, 0xc4207e5b00)\n    /go/src/github.com/portainer/portainer/http/security/bouncer.go:119 +0xfd\n\nnet/http.HandlerFunc.ServeHTTP(0xc4202fd3c0, 0x123d5e0, 0xc4207f6540, 0xc4207e5b00)\n    /usr/local/go/src/net/http/server.go:1918 +0x44\n\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc42049c620, 0x123d5e0, 0xc4207f6540, 0xc4207e5b00)\n    /go/src/github.com/gorilla/mux/mux.go:162 +0xed\n\nnet/http.StripPrefix.func1(0x123d5e0, 0xc4207f6540, 0xc4207e5800)\n    /usr/local/go/src/net/http/server.go:1957 +0x1a5\n\nnet/http.HandlerFunc.ServeHTTP(0xc42048cb40, 0x123d5e0, 0xc4207f6540, 0xc4207e5800)\n    /usr/local/go/src/net/http/server.go:1918 +0x44\n\ngithub.com/portainer/portainer/http/handler.(*Handler).ServeHTTP(0xc4205825a0, 0x123d5e0, 0xc4207f6540, 0xc4207e5800)\n    /go/src/github.com/portainer/portainer/http/handler/handler.go:68 +0xc83\n\nnet/http.serverHandler.ServeHTTP(0xc420141e10, 0x123d5e0, 0xc4207f6540, 0xc4207e5800)\n    /usr/local/go/src/net/http/server.go:2619 +0xb4\n\nnet/http.(*conn).serve(0xc4203c1220, 0x123e3a0, 0xc420500d80)\n    /usr/local/go/src/net/http/server.go:1801 +0x71d\n\ncreated by net/http.(*Server).Serve\n    /usr/local/go/src/net/http/server.go:2720 +0x288\n\n\nPortainer version: 1.19.1\nDocker version (managed by Portainer):\nPlatform (windows/linux): Docker version 18.03.0-ce, build 0520e24\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nBrowser: Chrome\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2168&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qfCPDcDqvmVSRj8Z-Rem5UNbXbtiyKVQqGt383im0qk&s=JKAw8mP2DEA3BVFhGUg8F_kGwUs9azBfHZMDdtvQjCg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldaGqZgh8AKW1nFwZodTdGbps7FTks5uRUdsgaJpZM4V-5FllU&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qfCPDcDqvmVSRj8Z-Rem5UNbXbtiyKVQqGt383im0qk&s=VHqryrcHXRzR22b9H-WvFf74fJu3yQJAGtjkJ-6ftOk&e=.\n. You must pass a subnet as a range of IP\u2019s...\nIf you want just one IP in the range, then its x.x.x.x\\32\nRgds,\nNeil Cresswell\nOn 17/08/2018, at 2:56 PM, aiminick notifications@github.com<mailto:notifications@github.com> wrote:\nI found the new commit about macvlan option of iprange, the example notice is: \"e.g. 172.20.10.128/25\" ?\nMaybe \"172.20.10.128/25\" it's not an ip range description, it's most like a subnetwork, it's a bug?\n@xAt0mZhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_xAt0mZ&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5VEAUk10otfq-Cp_cuk2AsFtOXZBU1AC3inNbBaUIKg&s=zD-yp_XIWYurkwIAeOsY0bwlTbgrAh8oK9EIWHJwR0Y&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2175&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5VEAUk10otfq-Cp_cuk2AsFtOXZBU1AC3inNbBaUIKg&s=aL5W13-K8G49CUQMEpIsNFJ3vtiReG4VlsleMkNaD50&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlZZA2OAR7sFBFXGlZ0mauNjYaoA-2Dks5uRjD0gaJpZM4WA5Ay&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=5VEAUk10otfq-Cp_cuk2AsFtOXZBU1AC3inNbBaUIKg&s=lyDqR2I-hNfBiC5KuVbXH32uhZ15XyAAbkb-79lCyZU&e=.\n. Rename, delete too..\nRgds,\nNeil Cresswell\nOn 30/09/2018, at 9:20 PM, Chaim Lev-Ari notifications@github.com<mailto:notifications@github.com> wrote:\nshould we let the user rename, delete files? or just upload\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2182-23issuecomment-2D425703735&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UI0w4ilXnQEf2x2GclPN_SGW1myxF6zXh929mE7poD4&s=_QvvyO4p495HBRRRZ6i3HXeEKJO0fgK2q93D87HBezc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUXdqyp4VGaED6tkgANae1P4-2DcHhks5ugH7lgaJpZM4WCgAt&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=UI0w4ilXnQEf2x2GclPN_SGW1myxF6zXh929mE7poD4&s=A79tFPFpICwDsMs__BGO9BHFdE2sUnCiOT3_1dKQcac&e=.\n. UCP\u2019s collections are somewhat similar, but they go one step further and can restrict the execution of a collection to a specified node or nodes in the cluster. This is how they achieve their multi-tenancy.\nI want to do something similar, but not through the assignment to a host, but with the creation of resource pools.\nWe already know the total capacity of the cluster (CPU/RAM) so we should be able to define a model whereby when a resource pool is defined, we can set the maximum resources able to be consumed by all containers running within that pool (which means we force the use of CPU/Memory constraints).\nThis is a little different from what you are asking though; it seems you are after a way to logically group/visualise all created stacks/services/containers/networks/volumes/secrets/configs for a particular team into a \u201cproject\u201d. Given this is primarily a visualisation / human aid, it shouldn\u2019t be too hard to add. We do need to ensure that access control can be set at the project level and it automatically propagate through.\nFrom: Anthony Lapenna [mailto:notifications@github.com]\nSent: Tuesday, 21 August 2018 3:13 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] Segregate logically Portainer resources using projects (#2190)\nSounds like what UCP is doing with collections, thoughts @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=A78sjh5vpYB9-pewAN-vDsbn5Ln8Z9P1bbVOULcDY3s&s=ts7BF1GZzWJQBG0ag_8JpPvVQmx8Z2dMebv8M5GAvNg&e= ? We might go further than simply managing UAC with projects, we could also give the ability to remove all the resources associated to a project via the UI, for example.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2190-23issuecomment-2D414352353&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=A78sjh5vpYB9-pewAN-vDsbn5Ln8Z9P1bbVOULcDY3s&s=MYdTva9tQW4bmn0mwXelD3L07hHi-sRLCiLnAdkK4YA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWQRqCA14XrdInqhrCLqrh36oLP5ks5uStHjgaJpZM4WEMO1&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=A78sjh5vpYB9-pewAN-vDsbn5Ln8Z9P1bbVOULcDY3s&s=WKCCNigy7b1Q5-QD6qTqLdpEqDmj-NRYfQAOL-740xo&e=.\n. Agree\u2026 had a few issues where people deployed Portainer, then forgot to configure it, whilst leaving it exposed to the internet..\nOur goal is to make life easy and apply as many best practices as we can transparently to users.. this I consider a best practice. Same like forcing Portainer to use HTTPs too..\nFrom: Lucas Krupinski [mailto:notifications@github.com]\nSent: Tuesday, 21 August 2018 8:34 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Docker Specific - set initial admin username and password as environmental variables? (#2195)\nIs your feature request related to a problem? Please describe.\nNot a problem, just thinking that there exists a very tiny possibility that post-deployment, someone else could login to your portainer container and set the password before you do; more of an inconvience than anything else. Still, would be nice if we could set the password during the build process like the MySQL/MariaDB containers do\nDescribe the solution you'd like\nportainer:\nimage: portainer/portainer\ncontainer_name: \"portainer-app\"\ncommand: --templates http://templates/templates.jsonhttps://urldefense.proofpoint.com/v2/url?u=http-3A__templates_templates.json&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=TKqf8USl138N9mYwpIZhbgu7XhCj2KCagCyvoHYGu8E&s=TxLKPl_b0lvrlrdMAx_vDXn7A2RzIXC7N39bLo_6vLU&e=\nnetworks:\n- local\nenvironment:\nPORTAINER_ADMIN_NAME: admin\nPORTAINER_ADMIN_PASS: admin\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\n- /opt/portainer/data:/data\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2195&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=TKqf8USl138N9mYwpIZhbgu7XhCj2KCagCyvoHYGu8E&s=FBD22gPCqCfLUX3pwpD58t-Uo-2jEgrN3HykjFHvgsA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUggTVD7tWXruOnstgYKeRCFAyUhks5uSx0rgaJpZM4WEqjH&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=TKqf8USl138N9mYwpIZhbgu7XhCj2KCagCyvoHYGu8E&s=GTrij8kJJJPtZwTaJPGiKiqzeZBVvQ5KNGoSNmCUCco&e=.\n. One option, set a password automatically (random generate) and expose it in the container STDOUT log\u2026 not very user friendly tho..\nFrom: Anthony Lapenna [mailto:notifications@github.com]\nSent: Tuesday, 21 August 2018 9:27 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] Docker Specific - set initial admin username and password as environmental variables? (#2195)\nWe already had this discussion in #399https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_399&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=29yAK6AiPFy4BJ-fEOeUiz3NamC1nQLSDN_OgC-oGCo&s=EtCsA3xL8uTFhQt4cGZhDObwQn0v4tiY4rTNZOgYRi0&e=\nYou can already set the administrator password via the --admin-password && --admin-password-file, which are compliant with CLI/Compose deployments.\nsomeone else could login to your portainer container and set the password before you do\nGiving the possibility to define the username/password via environment variables do not enforce the creation of the creation of the initial administrator user as a user could simply not specify the vars (same for the CLI flags).\nIf this is the problem that we're trying to solve, we'd need to make these variables mandatory.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2195-23issuecomment-2D414468960&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=29yAK6AiPFy4BJ-fEOeUiz3NamC1nQLSDN_OgC-oGCo&s=asqDtv-pSNfMO-UTZSs0MB7ch6SQEqIe5hifPLS2R0E&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTGj1s85il7o4zawwKcyEr4KB80Bks5uSymwgaJpZM4WEqjH&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=29yAK6AiPFy4BJ-fEOeUiz3NamC1nQLSDN_OgC-oGCo&s=6d6qyR7hlYIcDLHL4JfVoegEfZp7moKPFqq0SAZkbrw&e=.\n. Can, but must have a new name... in fact any duplicate function must force a new name.\nRgds,\nNeil Cresswell\nOn 14/09/2018, at 2:30 AM, Chaim Lev-Ari notifications@github.com<mailto:notifications@github.com> wrote:\nI was thinking of how to implement this, and I think the right approach is this:\nWith the migration button there will also be a duplication button:\n[ui]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_1381655_45494717-2D5a14b600-2Db77a-2D11e8-2D9168-2D451ca1fe4baf.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HkfKwn7qnGtycq-Z-WIE-yUd4By4j-XH5yXZxh5w6Pg&s=knsTbhBKlL3Wg7DopgZ8pQwZAkJsMkBWYg0A0F8olq4&e=\nClicking on it will create a new stack with the same config as the current stack in the new endpoint.\nShould we allow to create the new stack on the same endpoint? Is that even possible?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2234-23issuecomment-2D421027727&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HkfKwn7qnGtycq-Z-WIE-yUd4By4j-XH5yXZxh5w6Pg&s=UpclOpb9rdAvQEM6_ux9e8UaEV0K0uT2hqTu6wsCiSo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbjVLJF-2DPplsOTWj6xREwKmbMpLgks5uamwZgaJpZM4WXAIc&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=HkfKwn7qnGtycq-Z-WIE-yUd4By4j-XH5yXZxh5w6Pg&s=93_PkfaXPYYAcSs9HRYi3OshDNAe3xnxMi1JeUCGN58&e=.\n. the search is currently case sensitive (Unassigned works, but unassigned does not). Please remove case sensitivity.\n. Can only add local (docker socket) at creation time, not once already running.\nRgds,\nNeil Cresswell\nOn 5/09/2018, at 5:55 PM, Haxy89 notifications@github.com<mailto:notifications@github.com> wrote:\nI create Portainer with command:\ndocker run -d -p 9000:9000 --name Portainer --restart always -v /home/pi/portainer/certs:/certs -v /home/pi/portainer/data:/data portainer/portainer -H tcp://192.168.0.5:2376 --tlsverify\nSo I can manage my remote docker env. How can I add local docker enviroment to magane?\nUnder Endpoints -> Add endpoint menu there is no options to add local env only Remote/Agent/Azure\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2250&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=GTSpJ8agPZLnAuWVwx7dNrZgrLV61aaIk2QD_VTJo1k&s=YICC8CeaOeWRkhSYwOOeNYpXYVwtxvSQ6WpCaHYVSEM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUGnGDhqpn6smgo5-5FQtxDdleV6-5Fvks5uX62zgaJpZM4Waqa-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=GTSpJ8agPZLnAuWVwx7dNrZgrLV61aaIk2QD_VTJo1k&s=FYPVHoInGacctkL0oWdF57zNoSPgF1NJoZbjN-N7iTY&e=.\n. Deploy portainer:develop for our soon the be released version that adds this missing functionality.\nRgds,\nNeil Cresswell\nOn 6/09/2018, at 9:28 PM, MohanrajBabu notifications@github.com<mailto:notifications@github.com> wrote:\nQuestion:\nHello,\nI am trying to create network using portainer.iohttp://portainer.io UI, apart from subnet and gateway, could not able to supply additional configuration such as ip-range, aux-address, scope etc.\nIs it possible to pass additional network configurations while creating network?\nThanks,\nMohan\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2256&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0NmrQSChJ-vFPJGvBOhJHtzb_zEmRJueGhVRiqR6GGA&s=Ka69t41t5YOw76NpFc8CGXr8ZA3cgNEM5Q2zXN6HjRA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlV1jNl09ZZPOKhXj0MwO7SPFmD5Cks5uYTD0gaJpZM4WdDYL&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0NmrQSChJ-vFPJGvBOhJHtzb_zEmRJueGhVRiqR6GGA&s=5RzQBvD2-q0tIUXcpkIioQko8_YRO-HDmOqJO8cquBo&e=.\n. Our image does not contain harmful images and we do not auto pull anything.\nHow have you deployed Portainer, and do you have Portainer internet facing? Have you exposed your docker daemon via tcp and without tls?\nRgds,\nNeil Cresswell\nOn 7/09/2018, at 9:13 AM, Quang Minh notifications@github.com<mailto:notifications@github.com> wrote:\nDear,\nI'm using latest version of portainer, however portainer latest image contain some harmful images, auto pull mysql7 images and run minerGate(bitcoin) on server.\nPlease check the critical issue of security portainer.\nThanks\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2257&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=goHKvzJNC1VPGXUuVb2GR3c__XKCOQCaoHKwaNbmgDc&s=sQL3lupvHMHLusdZnE2EFai1HQY_VFD7vQPN7CPa5ds&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXTpU-5FhPSlwBYiI9XBgOsSeg4DJDks5uYdZdgaJpZM4WeD9A&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=goHKvzJNC1VPGXUuVb2GR3c__XKCOQCaoHKwaNbmgDc&s=I1DOOA-OnTzBQ6WkrzJ4JAuOJb4FlTxpO2FKQmVuryg&e=.\n. Are your docker hosts exposed on the internet too?\nAs long as you have set a strong password for the portainer admin account, we are secure. Clearly using tls on portainer is also recommended, and our docs specify how. We will default to https in the future.\nRgds,\nNeil Cresswell\nOn 7/09/2018, at 9:28 AM, Quang Minh notifications@github.com<mailto:notifications@github.com> wrote:\nI deployed following by document: https://portainer.readthedocs.io/en/stable/deployment.htmlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__portainer.readthedocs.io_en_stable_deployment.html&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uLwIND4QSPXyBmkSCvIumT3OxBAOrNQVK01vVn_qejk&s=L1G1syNI1lSA0g-JIUwbrZzHq-jwer3DYNEFBXNLo0k&e=.\nAlso expose via tcp without SSL. So we should Secure Portainer using SSL to prevent all attacker who can scan web interface api?\nThanks.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2257-23issuecomment-2D419300577&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uLwIND4QSPXyBmkSCvIumT3OxBAOrNQVK01vVn_qejk&s=gL5DPJkrXf_MRnu4Cnq6qR0lSRn0s7QCTPL2wQUfpPg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlX6uPf3EK-2DsWTnkfdkH5UE4ya7uWks5uYdm5gaJpZM4WeD9A&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uLwIND4QSPXyBmkSCvIumT3OxBAOrNQVK01vVn_qejk&s=TPZ1oaKx_2nKNtncRD1-itKs2Fl7VVqVUX95IpQIlPg&e=.\n. Jufis, This is best handled within your container. See here for details on the different signals https://www.ctl.io/developers/blog/post/gracefully-stopping-docker-containers/. Not sure we would be adding this capability into Portainer in the near term.\n. Portainer is an opinionated system, and because of this we provide a way to run Docker in a standardised and arguably, safer, way.\nI personally do not believe \u201cvolumes from\u201d has any place in an enterprise/production deployment as it encourages behaviours that do not align to docker best practices for data persistence.\nMy preference is not to add this feature.\nWhy do you need this function?\nRgds,\nNeil Cresswell\nOn 11/09/2018, at 11:17 PM, Helmi notifications@github.com<mailto:notifications@github.com> wrote:\nIs your feature request related to a problem? Please describe.\n--volumes-from is an option provided by the docker cli commeand and it is not yet supported in Portainer.\nDescribe the solution you'd like\nI think the best way to integrate this into the existing UI/UX of Portainer would be to add a dropdown select box to the volumes tab to select from existing containers for the --volumes-from parameter.\nDescribe alternatives you've considered\nTo my knowledge there's no other way to use this option yet and as I learned it's considered bad UX to just enable people to send custom command line args to the process through an input field. This would probably be an alterative otherweise.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2267&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MW-u4k-8D4WtVfRv52NhFYYYgVTLQccjiIHWcx0AhgA&s=vlnKTOo9_jskSi-NNJMkcob8MNEDEyCOJES5fdHVk1c&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQxYdb-5FEHi3onxylr9DHY0dQQjsQks5uZ5vAgaJpZM4WjGcB&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=MW-u4k-8D4WtVfRv52NhFYYYgVTLQccjiIHWcx0AhgA&s=ATsibTqgbClX95iHDFBKe3_xnRAmTJBeyoFqlK11XGg&e=.\n. We have removed linuxserver.iohttp://linuxserver.io and will not be adding them back until they add support for stack deployment. If you require linuxserver.iohttp://linuxserver.io, you need to remain on an older version of Portainer.\nRgds,\nNeil Cresswell\nOn 12/09/2018, at 9:01 PM, Aleksandar Puharic notifications@github.com<mailto:notifications@github.com> wrote:\nBug description\nOn this version of Portainer, there is no \"App Templates\" section under settings.\nThere is no linuxserver.iohttp://linuxserver.io templates either.\n[opera snapshot_2018-09-12_105913_localhost]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_3281104_45414146-2D07a0a000-2Db67b-2D11e8-2D8ae3-2Df3cc5199c11f.png&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QOz0mXn44kS6d9bcKnq9ymHRwSrA8lW7ASh4wNOwDek&s=f0shZzgxycZW6JnZX7EEOtaWt0Z2A9fOLxgmAWQ-3Wc&e=\nExpected behavior\nI expected to see \"App Templates\" section under settings.\nI wanted to disable \"Hide external contributions\" so I have access to linuxserver.iohttp://linuxserver.io templates.\nSteps to reproduce the issue:\nSteps to reproduce the behavior:\n\nGo to Portainer\nClick on Sidebar > Settings\n\nTechnical details:\n\nPortainer version: 1.19.1\nDocker version (managed by Portainer): 18.06.1-ce\nPlatform (windows/linux): Linux\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer): Standard command from documentation\nBrowser: Opera - Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36 OPR/55.0.2994.44\n\nAdditional context\nI have another remote instance of Portainer, used to manage remote docker instances.\nThat portainer is version 1.17.1 and still has respective section.\nUpon updating that machine's Portainer to latest version, respective section vanished as well as section with linuxserver.iohttp://linuxserver.io templates\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2269&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QOz0mXn44kS6d9bcKnq9ymHRwSrA8lW7ASh4wNOwDek&s=VrVz-tOaLsHIyyavHbr7-JEoPEriup2_FNdXAhP6YCs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUwZ7WpM7WazXc6i7hBTQxXwvCOBks5uaM1XgaJpZM4Wk8Lu&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QOz0mXn44kS6d9bcKnq9ymHRwSrA8lW7ASh4wNOwDek&s=_T-6I-McfWvqZmR3SKvtoVPYZ-QB89ubt0oinYzGGuA&e=.\n. Agree. It clutters.\nA new tab is also not tidy as its quite hidden. Why not just use the same dropdown \u201cselect cluster\u201d and then just two buttons, \u201cmigrate\u201d and \u201cduplicate\u201d\nRgds,\nNeil Cresswell\nOn 17/09/2018, at 1:10 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rdHgiOoKBzl7vc8r6C-2qar8U8WfBjZ6L_Rn-j7egOA&s=Ip6tfvZ8JbsD63rIJkpX8IvOhNeuryOLwz5pJGWfg_g&e= Thoughts about the UX/UI ?\nIMO adding this stack duplication section clutters the view.\n[portainer 13]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_5485061_45602952-2D5e322380-2Dba59-2D11e8-2D974b-2D9f5462c2e1af.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rdHgiOoKBzl7vc8r6C-2qar8U8WfBjZ6L_Rn-j7egOA&s=3_sgvifY1XcojdPJHbB4w4Sd3M2yzdFxHTnIX_omKJU&e=\nWhat about adding a new \"Advanced controls\" tab and relocate the stack migration and duplication feature in there?\n[portainer 14]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_5485061_45602961-2D84f05a00-2Dba59-2D11e8-2D9e84-2D4891a4853587.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rdHgiOoKBzl7vc8r6C-2qar8U8WfBjZ6L_Rn-j7egOA&s=AQLTZRN2Q8jYsnWyc7onjnzCrTylxkK2AQpNFvsXURQ&e=\nCan be tested via portainer/portainer:feat2234-duplicate-stack.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2278-23issuecomment-2D421865369&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rdHgiOoKBzl7vc8r6C-2qar8U8WfBjZ6L_Rn-j7egOA&s=A-8mIdQwwnU8Re3II5O-KhrNIxd2DrmLsgEpwPZbCPo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlb1HK6ylDzXZvnQomnRtqwaOKCq0ks5ubvaWgaJpZM4Wq2Zj&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=rdHgiOoKBzl7vc8r6C-2qar8U8WfBjZ6L_Rn-j7egOA&s=ZNb8vRXJbO3CdtvjtqzpdmCjjdICdLaZgU0J_MsxK1M&e=.\n. Then have a tabbed form on the main page, like we do for container creation options.\nRgds,\nNeil Cresswell\nOn 17/09/2018, at 1:37 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SWSAshg_7GNMQJRyexCI_5bdi0WkI8h9tRC-gniMLVE&s=12E8PaDVEr55o3o43JO72AJsESArpknUAuu237A6UEk&e=\nThe duplicate feature requires you to input a new name for the duplicated stack, hence why we introduced it in an extra form.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2278-23issuecomment-2D421869183&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SWSAshg_7GNMQJRyexCI_5bdi0WkI8h9tRC-gniMLVE&s=LEVNduXryu8CLp1c65VEZopxbUV9fp4LQBKLzqmHcIc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld1TlXPm42ov3429O2ZV5aKpoAUnks5ubvzBgaJpZM4Wq2Zj&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SWSAshg_7GNMQJRyexCI_5bdi0WkI8h9tRC-gniMLVE&s=JYdyBJLRiw-f0CVf7GQp9skNWOC6jj5qN5afCV5lSNw&e=.\n. That works..\nDoubly because if a stack is already deployed on the target using the same name, it fails, so this kills that issue too\nRgds,\nNeil Cresswell\nOn 17/09/2018, at 1:39 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nAnother solution:\nWe could propose to rename the stack as a part of the migration process, leaving the name field empty would keep the actual name of the stack but would be required for a stack duplication. This way we only display one form (endpoint selector, stack name) and two buttons: Migrate/duplicate.\nThoughts?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2278-23issuecomment-2D421869560&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=V5JoIbh_dUq0Jp1TWPanIoEJKb1ONTEZx4x-VbwDP-c&s=ibEHAqLxxM5jxxSJQxwWZPSK2_EqLnt4Xutj8VsbpXs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldydxOePi8N-2DPbn2f0yJ1sm9Eu0Oks5ubv1agaJpZM4Wq2Zj&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=V5JoIbh_dUq0Jp1TWPanIoEJKb1ONTEZx4x-VbwDP-c&s=8-f6aYHf-kR2LMEAFBhmFSASCU67YcVljVhz8eUO0Fw&e=.\n. Hi @chiptus I have tested this today, and the duplicate function doesnt work as expected. \nI have two endpoints defined, Cluster1 and Cluster2. Both use the Portainer agent.\nI deploy a stack on Cluster1 and call it stacktest. I then select to duplicate stacktest onto Cluster2, and call it stacktest2. The duplicate succeeds, however on being returned to the stacks page on Cluster1, my original stack is now called stacktest2 (and its marked as \"limited\" control). If i switch endpoints to Cluster2, i can see that the stack has been duplicated, and is also called stacktest2. If i switch back to Cluster1, and refresh \"stacks\" i see stacktest AND stacktest2 (so for some reason its doubled up on the source.\n\n\n\n\n\n. Go to settings, and disable \u201cuse external templates\u201d\u2026\nFrom: turbo notifications@github.com\nSent: Monday, 17 September 2018 9:55 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] Post-1.19.2 Upgrade: Unable to parse external templates (#2283)\nI have never created custom templates. So the broken ones must be the built-in. How can I upgrade those?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2283-23issuecomment-2D421950115&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=g9OevePJrZ1h4r8mQLlEpPw6iDnTiwgQrqQjOE3DnCY&s=l_-7fAOKyPsyU1NVeQ2F6NuO2-YqSF9hSNuiuHoBwRg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQgzY4kd8Mv-5Fs5mcxI7TSkU54-5F-2Dvks5ub3FwgaJpZM4WrWLz&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=g9OevePJrZ1h4r8mQLlEpPw6iDnTiwgQrqQjOE3DnCY&s=L5oI-XulgF7RRRbx_QAk3QjMIANhFI-_7cxlQ_286hg&e=.\n. I thought we already do this with our auto-create user function?\nI have a portainer instance with ldap enabled and no users; i can login to portainer with my ldap account just fine (and the user is auto created in portainer).\nAre you using portainer 1.19.2?\nRgds,\nNeil Cresswell\nOn 19/09/2018, at 2:01 AM, Ben Yanke notifications@github.com<mailto:notifications@github.com> wrote:\nIn our organization, we try to use AD as our single-source-of-truth as much as possible.\nGiven that the filter is customization, it would be great to add an option for LDAP auth which would allow any user matching filter (even if they don't yet exist) to login.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2290&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pVXuUnLULFS5E3Ta1iAp2gIqU80YTRz1heYshCAt8bU&s=PW_JltOex54GUu6YK12ZhVh1PUVFo9SwgwQJZ6mtdYY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlY15JNw8X-2DV5af-5FlpFhiNYCOjO8gks5ucPyrgaJpZM4Wt-5FZZ&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pVXuUnLULFS5E3Ta1iAp2gIqU80YTRz1heYshCAt8bU&s=qOVNAbJp-qw5WTGPivRJEUwrS_0G-b0SVickWZ2qBcE&e=.\n. Press Ctrl Shift R in your browser to refresh the cache..\nFrom: zablah [mailto:notifications@github.com]\nSent: Thursday, 4 October 2018 10:13 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] http error: No administrator account found inside the database (#2332)\nBug description\nafter installing portainer and create a new container, when i setup my first account I can't login to the panel and I got this error in container load:\nhttp error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\nExpected behavior\nI install the image on my computer, after that, I save the image using the following:\ndocker save -o portainer.tar portainer/portainer\nthen I move the file to another machine and I load the image by the following:\ndocker load -i portainer.tar\nTechnical details:\n\nPortainer version:\nDocker version (18.06.1-ce):\nPlatform (linux):\nCommand used to start Portainer (docker run -p 9000:9000 -d --restart=always -v /var/run/docker.sock:/var/run/dokcer.sock portainer/portainer):\n\nAdditional context\nWhen I load in to the panel I got \"Your session has esxpired\"\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2332&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Um_0VK_391NCzhqVx8-MwvOOmMzxqtRk_RRYhYX0pmA&s=7bqG8zLrH0nLSAvFl376iiuu4R_YnzhbXeuPxmsbZyI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcb7QbyKxn-5FQanw48pWTvQfh2J03ks5uhdE3gaJpZM4XHrgk&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Um_0VK_391NCzhqVx8-MwvOOmMzxqtRk_RRYhYX0pmA&s=8ZNly6caUUDMJNOtgdvamXo8J7qwPC6h074k4XlyvWY&e=.\n. Did you see my new linkedin post here:\nhttps://www.linkedin.com/pulse/using-portainer-agent-neil-cresswell/\nMight help ? I have validated each of these in my test environment.\nFrom: jeffglousher [mailto:notifications@github.com]\nSent: Friday, 19 October 2018 11:18 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] Portainer agent fails to deploy (#2363)\nI am also using swarm on Ubuntu 18.04.1 with 5 nodes. I followed those deployment directions exactly and have the same error. I also tried tweaking a few things in the file and making it so that I can run without sudo and there was no success.\nI think this is related to the OP, but if following the docs works for @andydrew23https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_andydrew23&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7wlxdZtpxZfqTLyukHdunsxn7A5Ycsw_ZUjoyORZqOc&s=8-7sSvanncbNkFN9zwgUM_IYahV8rEsGlnpAs5J90II&e= then I can make a separate issue. This is a testing swarm so I am free to try any suggestions.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2363-23issuecomment-2D431183020&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7wlxdZtpxZfqTLyukHdunsxn7A5Ycsw_ZUjoyORZqOc&s=KmfnisZVwWE0zkK59AzqFSr33hbiVICaMIEtjvbX9nA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbF7pvwfWAYqc8aZe1IgSSZ4sYTgks5umP4hgaJpZM4XYbcS&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7wlxdZtpxZfqTLyukHdunsxn7A5Ycsw_ZUjoyORZqOc&s=FbIq192l2u_sTfRigeCquUilULQcRHknF5VpzQ0ruQg&e=.\n. Ah\u2026 are you using AppArmour in Ubuntu, or have you configured Docker to run as a non-root user ?\nFrom: jeffglousher [mailto:notifications@github.com]\nSent: Friday, 19 October 2018 12:21 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] Portainer agent fails to deploy (#2363)\nThanks to both of you for the fast replies. The linkedin post similar to my config is option 1, new instance with agent(s) on all nodes including the portainer node. The stack file looks the exact same as what you have on https://portainer.readthedocs.io/en/stable/deployment.htmlhttps://urldefense.proofpoint.com/v2/url?u=http-3A__url&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QH9xKSv5X5ArqSXmm8VFe6wHqRjh2ZNDGMFrZOeU4Zc&s=V_6gP2CXmQzWC5rVdbWX6JVeiYYr4Tj5zm2oVJuhxo0&e=\nI made the change to the stack file and here is my command trace:\nbox@ubuntu-1:~$ nano portainer-agent-stack.yml\nbox@ubuntu-1:~$ docker service rm portainer_portainer\nportainer_portainer\nbox@ubuntu-1:~$ docker service rm portainer_agent\nportainer_agent\nbox@ubuntu-1:~$ docker service ls\nID                  NAME                MODE                REPLICAS            IMAGE               PORTS\nbox@ubuntu-1:~$ docker volume ls\nDRIVER              VOLUME NAME\nbox@ubuntu-1:~$ docker stack deploy --compose-file=portainer-agent-stack.yml portainer\nCreating service portainer_portainer\nCreating service portainer_agent\nbox@ubuntu-1:~$ docker service ls\nID                  NAME                  MODE                REPLICAS            IMAGE                        PORTS\nv9gs5pfojx1x        portainer_agent       global              0/5                 portainer/agent:latest\nibvq0nxa0qy7        portainer_portainer   replicated          0/1                 portainer/portainer:latest   *:9000->9000/tcp\nbox@ubuntu-1:~$ docker service ps portainer_portainer\nID                  NAME                        IMAGE                        NODE                DESIRED STATE       CURRENT STATE             ERROR                              PORTS\nidyix2zdy3j5        portainer_portainer.1       portainer/portainer:latest   ubuntu-1            Ready               Rejected 3 seconds ago    \"mkdir /var/lib/docker: permis\u2026\"\nkywo2lo82o2z         _ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 8 seconds ago    \"mkdir /var/lib/docker: permis\u2026\"\ns1kjy93anr91         _ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 13 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\no30pl0e84hj1         _ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\nqc15rrbpmoy3         _ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\nbox@ubuntu-1:~$ docker service ps --no-trunc portainer_portainer\nID                          NAME                        IMAGE                                                                                                NODE                DESIRED STATE       CURRENT STATE             ERROR                                        PORTS\nt7w1unpvmbeagad7ofx45mpia   portainer_portainer.1       portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Ready               Rejected 3 seconds ago    \"mkdir /var/lib/docker: permission denied\"\nli44aymkzs5itrks7dnmne8lv    _ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 8 seconds ago    \"mkdir /var/lib/docker: permission denied\"\ndyk7pbftgf1ud40mhdam4i4o5    _ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 13 seconds ago   \"mkdir /var/lib/docker: permission denied\"\nt1r4fndw629ybypx9uf3rjftr    _ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permission denied\"\ns1kjy93anr91kqmje1q87qq5w    _ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 33 seconds ago   \"mkdir /var/lib/docker: permission denied\"\nI still have the error \"mkdir /var/lib/docker: permission denied\"; am I doing anything wrong?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2363-23issuecomment-2D431195741&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QH9xKSv5X5ArqSXmm8VFe6wHqRjh2ZNDGMFrZOeU4Zc&s=jbm97JCLwcsQtzqGOwwKWTe96YWPPndis5BgfprFB-o&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSYiM-2DH7EqvGw41DiK-2D3IqPDDswBks5umQzmgaJpZM4XYbcS&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QH9xKSv5X5ArqSXmm8VFe6wHqRjh2ZNDGMFrZOeU4Zc&s=Xme9lUnf8gBSYVhEmytS1a8OWiK8tBP1RHNT2QsdS5o&e=.\n. Oh, and have you changed the default location for Docker files ? normally /var/lib/docker is where the container volumes reside, but you can change that (eg by following https://forums.docker.com/t/how-do-i-change-the-docker-image-installation-directory/1169)\nFrom: jeffglousher [mailto:notifications@github.com]\nSent: Friday, 19 October 2018 12:21 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] Portainer agent fails to deploy (#2363)\nThanks to both of you for the fast replies. The linkedin post similar to my config is option 1, new instance with agent(s) on all nodes including the portainer node. The stack file looks the exact same as what you have on https://portainer.readthedocs.io/en/stable/deployment.htmlhttps://urldefense.proofpoint.com/v2/url?u=http-3A__url&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QH9xKSv5X5ArqSXmm8VFe6wHqRjh2ZNDGMFrZOeU4Zc&s=V_6gP2CXmQzWC5rVdbWX6JVeiYYr4Tj5zm2oVJuhxo0&e=\nI made the change to the stack file and here is my command trace:\nbox@ubuntu-1:~$ nano portainer-agent-stack.yml\nbox@ubuntu-1:~$ docker service rm portainer_portainer\nportainer_portainer\nbox@ubuntu-1:~$ docker service rm portainer_agent\nportainer_agent\nbox@ubuntu-1:~$ docker service ls\nID                  NAME                MODE                REPLICAS            IMAGE               PORTS\nbox@ubuntu-1:~$ docker volume ls\nDRIVER              VOLUME NAME\nbox@ubuntu-1:~$ docker stack deploy --compose-file=portainer-agent-stack.yml portainer\nCreating service portainer_portainer\nCreating service portainer_agent\nbox@ubuntu-1:~$ docker service ls\nID                  NAME                  MODE                REPLICAS            IMAGE                        PORTS\nv9gs5pfojx1x        portainer_agent       global              0/5                 portainer/agent:latest\nibvq0nxa0qy7        portainer_portainer   replicated          0/1                 portainer/portainer:latest   *:9000->9000/tcp\nbox@ubuntu-1:~$ docker service ps portainer_portainer\nID                  NAME                        IMAGE                        NODE                DESIRED STATE       CURRENT STATE             ERROR                              PORTS\nidyix2zdy3j5        portainer_portainer.1       portainer/portainer:latest   ubuntu-1            Ready               Rejected 3 seconds ago    \"mkdir /var/lib/docker: permis\u2026\"\nkywo2lo82o2z         _ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 8 seconds ago    \"mkdir /var/lib/docker: permis\u2026\"\ns1kjy93anr91         _ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 13 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\no30pl0e84hj1         _ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\nqc15rrbpmoy3         _ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\nbox@ubuntu-1:~$ docker service ps --no-trunc portainer_portainer\nID                          NAME                        IMAGE                                                                                                NODE                DESIRED STATE       CURRENT STATE             ERROR                                        PORTS\nt7w1unpvmbeagad7ofx45mpia   portainer_portainer.1       portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Ready               Rejected 3 seconds ago    \"mkdir /var/lib/docker: permission denied\"\nli44aymkzs5itrks7dnmne8lv    _ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 8 seconds ago    \"mkdir /var/lib/docker: permission denied\"\ndyk7pbftgf1ud40mhdam4i4o5    _ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 13 seconds ago   \"mkdir /var/lib/docker: permission denied\"\nt1r4fndw629ybypx9uf3rjftr    _ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permission denied\"\ns1kjy93anr91kqmje1q87qq5w    _ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 33 seconds ago   \"mkdir /var/lib/docker: permission denied\"\nI still have the error \"mkdir /var/lib/docker: permission denied\"; am I doing anything wrong?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2363-23issuecomment-2D431195741&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QH9xKSv5X5ArqSXmm8VFe6wHqRjh2ZNDGMFrZOeU4Zc&s=jbm97JCLwcsQtzqGOwwKWTe96YWPPndis5BgfprFB-o&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSYiM-2DH7EqvGw41DiK-2D3IqPDDswBks5umQzmgaJpZM4XYbcS&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=QH9xKSv5X5ArqSXmm8VFe6wHqRjh2ZNDGMFrZOeU4Zc&s=Xme9lUnf8gBSYVhEmytS1a8OWiK8tBP1RHNT2QsdS5o&e=.\n. Can you start other containers using volumes on that smb mapping?\nRgds,\nNeil Cresswell\nOn 21/10/2018, at 7:22 AM, mmgil notifications@github.com<mailto:notifications@github.com> wrote:\nHi @deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=TNRTjE-e6MvFtFtZWo75fzpfIk_s_sbsMPlEtc1HZbg&s=u1EsiPrAx25nblUbLbPX5M5_PKErAZ2RzXomOjWKTEk&e=\nThanks for your attention.\nThe version Windows is: 10.0.17134.0\nI Create an cluster server with SMB 3.0 using SOFS (Scale Out File Server) and create an SMB Global Mapping for persist data of containers created.\nI used in the following document: https://docs.microsoft.com/en-us/virtualization/windowscontainers/manage-containers/container-storagehttps://urldefense.proofpoint.com/v2/url?u=https-3A__docs.microsoft.com_en-2Dus_virtualization_windowscontainers_manage-2Dcontainers_container-2Dstorage&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=TNRTjE-e6MvFtFtZWo75fzpfIk_s_sbsMPlEtc1HZbg&s=QRwYJkooHtdNz_VfV3DD7egpAV_mwT8yCURhw3-vpvc&e=\nNo error appears. Container simply gets the status Exited\nIf I use the volume C: it works, but this way I can not convert it into service to other nodes of the swarm provide high availability with persistence of the data.\nIn EventVwr Appears this Warning:\nIndex : 946019\nEntryType : Warning\nInstanceId : 11\nMessage : unable to get exit code for process [process=init error=process 1392 in container ca1f85dc51cdf73d3908ea10a9da97c40237e19039140a522afb0774d85140df encountered an error during ExitCode: failure in a\nWindows system call: Sistema de computa\u00e7\u00e3o encerrado inesperadamente. (0xc0370106) module=libcontainerd namespace=moby container=ca1f85dc51cdf73d3908ea10a9da97c40237e19039140a522afb0774d85140df]\nCategory : (0)\nCategoryNumber : 0\nReplacementStrings : {unable to get exit code for process, process=init error=process 1392 in container ca1f85dc51cdf73d3908ea10a9da97c40237e19039140a522afb0774d85140df encountered an error during ExitCode: failure in a\nWindows system call: Sistema de computa\u00e7\u00e3o encerrado inesperadamente. (0xc0370106) module=libcontainerd namespace=moby container=ca1f85dc51cdf73d3908ea10a9da97c40237e19039140a522afb0774d85140df}\nSource : docker\nTimeGenerated : 20/10/2018 15:13:53\nTimeWritten : 20/10/2018 15:13:53\nUserName :\n[image]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_29230461_47259072-2Df5383400-2Dd47a-2D11e8-2D90ed-2Dc3823751116d.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=TNRTjE-e6MvFtFtZWo75fzpfIk_s_sbsMPlEtc1HZbg&s=dmertoEJeoUNsYMkklKs2MGIM-kAqrXYJ5zBYpJmydI&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2369-23issuecomment-2D431606364&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=TNRTjE-e6MvFtFtZWo75fzpfIk_s_sbsMPlEtc1HZbg&s=7CTQnV-EGx2483-OgDXMBi9A5CuLO-Xw3gsBMx4Lzds&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUHEJ9dpwh1hx0tHMu5oxemXf1Oiks5um2njgaJpZM4Xaprh&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=TNRTjE-e6MvFtFtZWo75fzpfIk_s_sbsMPlEtc1HZbg&s=X6NjWxKudb5S0AWUSi630xyr3l2bP5tdQyfqN7ZqPhk&e=.\n. IMO, simply showing the last XXX logs is sufficient... ie show me the latest 50 logs, or latest 200... i dont think we need a time based filter at the moment.. Tested it, and it works well... i am actually really thankful this is added as the \"memory\" view previously was very misleading vs what the underlying host actually observes. \nMerge away.. Actually, if i do a docker inspect on cli, i get one stat, if i use ctop i get another stat, and this change gives me another stat again.. which is correct??\n. Screenshots attached..\n[image1.jpeg]\n[image2.jpeg]\n[image3.jpeg]\nRgds,\nNeil Cresswell\nOn 24/10/2018, at 1:05 AM, Yassir Hannoun notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BBXBI9CmaCj3fUiedn-b8_IvuqKhXDyY3kzqKebGnjA&s=-lKzhJ5p9SemTd4Mc0Jqb0bUbm-goGKgdJVwp8vM3Pc&e= can you give me an example?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2383-23issuecomment-2D432219022&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BBXBI9CmaCj3fUiedn-b8_IvuqKhXDyY3kzqKebGnjA&s=FeYVrMjEhnNAWuZuGu6s1d56w78ibbgbn5RGIcreVk4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXeK9u-5FABJpZDxGM60aXYre6VsPVks5unwYTgaJpZM4Xx1ja&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=BBXBI9CmaCj3fUiedn-b8_IvuqKhXDyY3kzqKebGnjA&s=9EzrOonTFd5xQBhvXfcmslJNYuPlZ3Kbdf_H2pxlygE&e=.\n. If you are on our slack channel, please dm me (@neil) and i will send the pics. No idea why they are not attaching.\nRgds,\nNeil Cresswell\nOn 24/10/2018, at 8:50 AM, Yassir Hannoun notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wgRpLfeCdmw7rS5k4wYSn8emu-yu4J0ENUvamYyM7iI&s=I7-Ivy9NHWiVosUZepcSYikanD06voleuRoolaN99ts&e= the screenshots are not included in your respone :)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2383-23issuecomment-2D432393501&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wgRpLfeCdmw7rS5k4wYSn8emu-yu4J0ENUvamYyM7iI&s=J29HHqFktH-Y_PMvu6hlu58ufEE00oASzUvkYf_-WUo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbIfcjSgiHdp0o-2DO8nmAjfHV5lf7ks5un3L2gaJpZM4Xx1ja&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wgRpLfeCdmw7rS5k4wYSn8emu-yu4J0ENUvamYyM7iI&s=d5peZbbpXNDi2gM4n_lm8v3lOzSgHQ9RKc74R6LYDY8&e=.\n. We should just add access control to images...\nDoesnt make sense in most cases, but worth having anyway.\nRgds,\nNeil Cresswell\nOn 28/10/2018, at 3:56 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uTUcNQrCgaVvqQDDfPcSc4vEsIjjA5Kn7MHnc0uv-eY&s=MKAhyX7SfTc5BvNhkewASTsAJIr2MEJEFFLCDApV1yY&e=\nDo we still want to display this message ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2401-23issuecomment-2D433672062&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uTUcNQrCgaVvqQDDfPcSc4vEsIjjA5Kn7MHnc0uv-eY&s=w2HxcHRPjZ-NmHAAWF18I2DlrHlLI5AVYNm6cFg6FBY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld66tDSiciWTaFCO1syUxkdzx1WMks5upRzZgaJpZM4X8Goi&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uTUcNQrCgaVvqQDDfPcSc4vEsIjjA5Kn7MHnc0uv-eY&s=-5ZNj18B-qw2GYScU-_bWdpxlkdMpwIUshn4zLHW4UQ&e=.\n. We already have this as a setting. By default, anything created outside portainer is only seen by portainer admins. However in settings you can change that behavior.\nRgds,\nNeil Cresswell\nOn 22/01/2019, at 4:03 PM, gotjoshua notifications@github.com<mailto:notifications@github.com> wrote:\nDo you guys have a plan for how to add access control to containers that are not \"born\" in portainer?\nI ask because I prefer to have all my docker-compose files on the server and use portainer for convenient restarting. I'd like to be able to add users who, for example, have the ability to start and restart but not remove containers.\nIs this covered by your plans?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2405-23issuecomment-2D456322006&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=YZ8xbXYPvhsS0dh81E7oNn6bEchJx72N8BV2EkdbGFg&s=aaZwD0mJuRf_wLX7BmbMVpwZSuXBQciBNo6csbAzOug&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlXI2EJRSTfQpT0zDinrMXdTxLTEOks5vFtPugaJpZM4X9mUp&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=YZ8xbXYPvhsS0dh81E7oNn6bEchJx72N8BV2EkdbGFg&s=ZeLgP8vBpMao2tLIDjJEZdoAMyj_sU5EkNQqRoJeVTc&e=.\n. Oh, fine grained access control will be part of our \u201cto be released\u201d AAC (access, audit, and control) extension.\nThis extension will allow you to create a role, and select which portainer functions that role can use. Users are then added the role. The extension will also keep an audit log of every activity performed per user.\nExpect this extension in 3 months.. I do want to see our \u201cjob/task execution\u201d evolve to include common tasks as simple \u201cclick to execute\u201d buttons (eg upgrade docker to latest version, backup all volumes etc).\nWe will collate a list of frequent tasks and evolve this.\nFrom: Anthony Lapenna notifications@github.com\nSent: Thursday, 1 November 2018 9:31 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] Run script from Portainer (#2409)\n@olljanathttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_olljanat&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=NvaeurP8KxDVPnVJnDfRCw8mtieXRFXN1cdQNPQFX6g&s=MVGEFUsVsXhjy-zA3FToOrMfsDf4eU9BzX6CYtA3cyU&e= not really\n2181https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2181&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=NvaeurP8KxDVPnVJnDfRCw8mtieXRFXN1cdQNPQFX6g&s=33ziHgtCHGnzpxuN3LW7NXEZIu69990ocfz2mekvuM0&e= gives the ability for a user to execute a job on a Docker host via a privileged container. This allows you to execute commands that are available on the hosts and thus would probably partially solve the OP issue.\nRegarding the ability to run pre-configured scripts for standard users, this is something that we'll have to discuss.\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=NvaeurP8KxDVPnVJnDfRCw8mtieXRFXN1cdQNPQFX6g&s=R1aF_us8zgyJ3Zu9fAoyhlagqWLK0Ybg_U-Ek0UFxLc&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2409-23issuecomment-2D434836780&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=NvaeurP8KxDVPnVJnDfRCw8mtieXRFXN1cdQNPQFX6g&s=4gfyA75L2qS6xdJlhL65SwpsrnogUCOlMbk2InlFyA8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcgknXGCPnXZHWZ-5FoaZGmKbtPvpiks5uqgh0gaJpZM4X9-2Dik&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=NvaeurP8KxDVPnVJnDfRCw8mtieXRFXN1cdQNPQFX6g&s=QCJz68xIF0JnjL07TqOHjlJ7HJFmKvY0KPSFCOwE5RI&e=.\n. OK\u2026 so here\u2019s the thing\u2026\nWhen you create a service (or stack) in Docker, the image TAG is not used, instead DIGESTS (HASH) are used. Pre-pulling the image is not applicable when deploying services/stacks.\nTo do the digest validation, internet access is required, so too is access to the registry holding the image.\nhttps://success.docker.com/article/images-tagging-vs-digests\nSo, it seems in your case, it\u2019s the image digest check that is causing the extended delay\u2026 it doesn\u2019t matter that the image is local, the digest (hash) check will still occur over the internet.\nAs a test, do (using the CLI), docker stack deploy --resolve-image=never to see if the performance issue is resolved. If yes, then for sure your issue is because of Digest check.\nFrom: wyang18 notifications@github.com\nSent: Wednesday, 7 November 2018 11:05 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] Portainer stack deploy takes 2, 3 minutes (#2418)\nPortainer: 1.19.2\nDocker 18.06.1-ce\nNo registry created inside Portainer\nThis may be related to Docker. Tested few more, found out this is happening to Docker stack deploy command as well.\nMy local network is setup as:\nServer --> Linksys router --> internet\nBelow are the three scenarios I testes:\n\n\nServer disconnects Ethernet cable to Linksys\n\n\nit takes 1 sec to update stack\n\n\nServer connects to Linksys with Ethernet cable, Linksys connects to internet\n\n\nit takes 13 sec to update stack\n\n\nServer connects to Linksys with Ethernet cable, but Linksys disconnect from internet\n\n\nit takes forever >10 min\n\n\nWhy the internet access matters? All images are pre-loaded locally.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2418-23issuecomment-2D436425684&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JsF5--UmldG6rWFsnpIqn5Aupfn4f_Ysw_Nda-hmonQ&s=II746olTcIXFKXmV5Q3lqSVVCOh3nwE4Gb5kuybHRAY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWEkiLMUZBvoQ6mn03kUAgxySjJRks5usgebgaJpZM4YB3w9&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JsF5--UmldG6rWFsnpIqn5Aupfn4f_Ysw_Nda-hmonQ&s=qt2DLsPbpjJ2npKyd8AB1ZzKx2wPvFyLT-spMcqsRtE&e=.\n. Can you try\nAs a test, do (using the CLI), docker stack deploy --resolve-image=never to see if the performance issue is resolved. If yes, then for sure your issue is because of Digest check.\nFrom: Neil Cresswell\nSent: Wednesday, 7 November 2018 11:22 AM\nTo: 'portainer/portainer' reply@reply.github.com; portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: RE: [portainer/portainer] Portainer stack deploy takes 2, 3 minutes (#2418)\nOK\u2026 so here\u2019s the thing\u2026\nWhen you create a service (or stack) in Docker, the image TAG is not used, instead DIGESTS (HASH) are used. Pre-pulling the image is not applicable when deploying services/stacks.\nTo do the digest validation, internet access is required, so too is access to the registry holding the image.\nhttps://success.docker.com/article/images-tagging-vs-digests\nSo, it seems in your case, it\u2019s the image digest check that is causing the extended delay\u2026 it doesn\u2019t matter that the image is local, the digest (hash) check will still occur over the internet.\nAs a test, do (using the CLI), docker stack deploy --resolve-image=never to see if the performance issue is resolved. If yes, then for sure your issue is because of Digest check.\nFrom: wyang18 notifications@github.com<mailto:notifications@github.com>\nSent: Wednesday, 7 November 2018 11:05 AM\nTo: portainer/portainer portainer@noreply.github.com<mailto:portainer@noreply.github.com>\nCc: Subscribed subscribed@noreply.github.com<mailto:subscribed@noreply.github.com>\nSubject: Re: [portainer/portainer] Portainer stack deploy takes 2, 3 minutes (#2418)\nPortainer: 1.19.2\nDocker 18.06.1-ce\nNo registry created inside Portainer\nThis may be related to Docker. Tested few more, found out this is happening to Docker stack deploy command as well.\nMy local network is setup as:\nServer --> Linksys router --> internet\nBelow are the three scenarios I testes:\n\n\nServer disconnects Ethernet cable to Linksys\n\n\nit takes 1 sec to update stack\n\n\nServer connects to Linksys with Ethernet cable, Linksys connects to internet\n\n\nit takes 13 sec to update stack\n\n\nServer connects to Linksys with Ethernet cable, but Linksys disconnect from internet\n\n\nit takes forever >10 min\n\n\nWhy the internet access matters? All images are pre-loaded locally.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2418-23issuecomment-2D436425684&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JsF5--UmldG6rWFsnpIqn5Aupfn4f_Ysw_Nda-hmonQ&s=II746olTcIXFKXmV5Q3lqSVVCOh3nwE4Gb5kuybHRAY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWEkiLMUZBvoQ6mn03kUAgxySjJRks5usgebgaJpZM4YB3w9&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JsF5--UmldG6rWFsnpIqn5Aupfn4f_Ysw_Nda-hmonQ&s=qt2DLsPbpjJ2npKyd8AB1ZzKx2wPvFyLT-spMcqsRtE&e=.\n. The tasks are sitting pending, which means trying to pull down the image.\nCan you try using a docker standard registry? Deploy the registry, push the images there, and try again.\nRgds,\nNeil Cresswell\nOn 8/11/2018, at 5:43 AM, wyang18 notifications@github.com<mailto:notifications@github.com> wrote:\nUnder following setting:\n\nServer connects to Linksys with Ethernet cable, but Linksys disconnect from internet\n\nRun command\ndocker stack deploy -c docker-compose.yml --resolve-image=never mystack\nThe service creating command was \"completed\" in less than a sec for all 18 services with the msg below:\n\"Creating service mystack_xxxxxx\"\n[img_0814]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_44609269_48145527-2D9fd09500-2De278-2D11e8-2D91ef-2Dd5732c183dfc.JPG&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jQ4_KuLtvdy_NbQOOKkrMnQrwEd3ugP4uJr6xIW_Fuw&s=MX71bH8OZgUrMZFuIbHnIDBim0zctE8shb7rPDUxhHM&e=\nBut as you can see from the image above, the \"docker ps\" command returns no new containers, and status shows \"pending\" in portainer.\nIf I wait long enough (about 20 min), the containers for all 18 services are created eventually.\n\u2014\nYou are receiving this because you were assigned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2418-23issuecomment-2D436690703&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jQ4_KuLtvdy_NbQOOKkrMnQrwEd3ugP4uJr6xIW_Fuw&s=vwRwQmZh98Uv39174aaQiwxS1tqC-_HnZLLpRgAi3hk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlRBDD4hNtNN44K94RsccK7JisOCkks5usw1UgaJpZM4YB3w9&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jQ4_KuLtvdy_NbQOOKkrMnQrwEd3ugP4uJr6xIW_Fuw&s=X4zyQqrZwB_14FHwORD8MeppnAxtxohxlsWHpM_OsGg&e=.\n. We dont want to switch any existing defined administrator resource (or at the least, ask via a popup if that is to happen). This switch should only impact new since flicking the switch.\nRgds,\nNeil Cresswell\nOn 14/11/2018, at 10:57 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\nI was able to test this again.\nThere is something confusing here, we enable a switch titled \"Make externally created resources public by default\" but it will also switch to public any existing administrator restricted resource.\nI don't think that this is the behavior that we want integrate. cc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=13qEqLHnGNDPH78m-V44RowbAc_E-54sqC6iUJcmmqE&s=jpwL7QzjRm9bXDVeb_T6i9aVxL2kDYixGraWZJxzuuE&e= for another review (you can use portainer/portainer:pr2424).\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2424-23issuecomment-2D438453368&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=13qEqLHnGNDPH78m-V44RowbAc_E-54sqC6iUJcmmqE&s=SpbqBDZUuK0nLltWODDZHLX6EmFjHGmSgBQzAqUhXSc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbx4cMVGg0xmoEuGUQxzC8auowO3ks5uu0A0gaJpZM4YEsmh&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=13qEqLHnGNDPH78m-V44RowbAc_E-54sqC6iUJcmmqE&s=q-SG4OhS3U09vBbMMbII7II1wInvItVTlpcJ7ijCMlI&e=.\n. Why are you wanting to chose the manager node? Overlay network is created across all hosts automatically.\nRgds,\nNeil Cresswell\nOn 1/11/2018, at 5:14 PM, \u673a\u667a\u7684\u82cf\u5148\u950b notifications@github.com<mailto:notifications@github.com> wrote:\nWhen I add a network, in the /networks/new page, the option 'Driver configuration - Driver' is above the opton 'Deployment - Node'. So when you wanna create an overlay network there is a problem\u2014\u2014 after you choose 'overlay', there is no deployment option anymore. You have to change the drive back to host or something, then choose the manager node, then go back to choose overlay driver type. :(\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2427&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wAYYJKH2blb932jLDNqRpoBnZmuk4D1okMRaRacAFJY&s=wHWprXpbEQUfTMYU-f_1BYyvyUyIocqkxdcb7j0Psb4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQHmoqFeXh0tHq-2DLc678UIZGNeeLks5uqnUPgaJpZM4YFwQG&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wAYYJKH2blb932jLDNqRpoBnZmuk4D1okMRaRacAFJY&s=ZKhj0vl5eDGesp3obNp9ekezUC2GIqB2E-xHEhLC5Ac&e=.\n. Ah...\nYou need to use the Portainer agent when managing swarm clusters... thats why we created the agent.\nSee portainer.readthedocs.iohttp://portainer.readthedocs.io for info on deploying the agent.\nRgds,\nNeil Cresswell\nOn 1/11/2018, at 6:50 PM, \u673a\u667a\u7684\u82cf\u5148\u950b notifications@github.com<mailto:notifications@github.com> wrote:\nWhy are you wanting to chose the manager node? Overlay network is created across all hosts automatically. Rgds, Neil Cresswell On 1/11/2018, at 5:14 PM, \u673a\u667a\u7684\u82cf\u5148\u950b notifications@github.com<mailto:notifications@github.commailto:notifications@github.com> wrote: When I add a network, in the /networks/new page, the option 'Driver configuration - Driver' is above the opton 'Deployment - Node'. So when you wanna create an overlay network there is a problem\u2014\u2014 after you choose 'overlay', there is no deployment option anymore. You have to change the drive back to host or something, then choose the manager node, then go back to choose overlay driver type. :( \u2014 You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2427&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wAYYJKH2blb932jLDNqRpoBnZmuk4D1okMRaRacAFJY&s=wHWprXpbEQUfTMYU-f_1BYyvyUyIocqkxdcb7j0Psb4&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQHmoqFeXh0tHq-2DLc678UIZGNeeLks5uqnUPgaJpZM4YFwQG&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wAYYJKH2blb932jLDNqRpoBnZmuk4D1okMRaRacAFJY&s=ZKhj0vl5eDGesp3obNp9ekezUC2GIqB2E-xHEhLC5Ac&e=.\nCause if I don't choose the manager node first, it may failed with message: 'Failure Cannot create a multi-host network from a worker node.Please create the network form a manager node.' (the default value of deployment-node is not always the manager node.)\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2427-23issuecomment-2D434938196&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hEcLuZz7-T3AazJmJsrSvTYM9sx-osm19Brztkxy4I4&s=ugHEZ9fECAjWTv7wdsBVsVmd8PCqnSba9Hlfi1FRUXE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldjGvCjGxMlOe29YfRj3KtxZrg0Sks5uqou5gaJpZM4YFwQG&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hEcLuZz7-T3AazJmJsrSvTYM9sx-osm19Brztkxy4I4&s=_hwfRhBeA09w6496UENs0F4tEY5zQGMRrkgF_NkvqZI&e=.\n. Secrets are passed to a container inside a file mounted inside the containers filesystem.\nTo use a secret, your app needs to read the file into a variable.. you cannot use a secret as a variable directly.\nFrom: Trey Yoder notifications@github.com\nSent: Wednesday, 7 November 2018 10:59 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Remove Secrets from a Stack File. (#2436)\nQuestion:\nI'm not using a Swarm Cluster or Docker secrets, and am curious about methods of secret retrieval/injection. Is it possible to inject secrets into a stack file, such that they are not visible in Portainer? My first thought is an integration with a secret server such as Conjur or Thycotic.\nUse Case:\nI have a Stack that defines a Jenkins Slave service. I want to remove the username and password from the command:\nversion: '2'\nservices:\njenkinsslave1:\nimage: \"jenkins-slave\"\ncontainer_name: 'jenkinsslave1'\nrestart: on-failure\ncommand: -master http://jenkins-server:8080https://urldefense.proofpoint.com/v2/url?u=http-3A__jenkins-2Dserver-3A8080&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dR8yjZ0YDkcqa8mfDCtycjmGBXzTJ-n9DHnd9kPb9vE&s=BzWzEOXXfB8bgG6E0jjLOrdya26vvWnh-fhKzc42vzE&e= -username username -password password -executors 1 -sslFingerprints \"\"\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2436&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dR8yjZ0YDkcqa8mfDCtycjmGBXzTJ-n9DHnd9kPb9vE&s=AiqOLUzmyvHIlzqPwWcbo1w_dy-IWmuFZ4DOapu2PQI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlV9BVddjyx1inWrSX97Uct2mwwzdks5usgYggaJpZM4YRWqj&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=dR8yjZ0YDkcqa8mfDCtycjmGBXzTJ-n9DHnd9kPb9vE&s=TJc8b9pAUKcVozn1hH2jHD5qaQVHt98_8pmG8CQkOlQ&e=.\n. Redirect if they try to access the direct urls\nRgds,\nNeil Cresswell\nOn 9/11/2018, at 3:52 AM, baron_l notifications@github.com<mailto:notifications@github.com> wrote:\nHow far do we want to prevent accessing the features when they are disabled ?\nOnly hidding the contexts ? (hidding the panels, links to pages) or also redirecting to home page when directly trying to access the URL of feature pages (for example trying to access the job scheduler page) ?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2439-23issuecomment-2D437020979&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-Mz_pVUv19LFhZ7pklsHwYwp-YmMsv3WKll7rKipwr4&s=vPciYiXRWYJSIKKcsFNCVuxJMN8CrNEuhF6Wn2nKuz0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQkeWUR-2DaAdE8OpNJomcY3Tca7tKks5utEU9gaJpZM4YRweT&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=-Mz_pVUv19LFhZ7pklsHwYwp-YmMsv3WKll7rKipwr4&s=K6ETefnhbJyw57xa2OJOIHr9SuK1XjkaRM2GI0Vjnx4&e=.\n. This might be an issue on our side\u2026 our standalone test-rig is running Docker 1.13, so we are just upgrading it now..\nFrom: baron_l notifications@github.com\nSent: Friday, 16 November 2018 4:33 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] fix2412: macvlan availability for standalone endpoints (#2441)\nI did the test with the following configs :\n\nunix\nstandalone\nstandalone + agent (on same host than Portainer + standalone host with agent as container)\nswarm without agent\nswarm with agent\n\nYou may have faced the following issue: when you are connected to a swarm + agent, when creating a network config and selecting all the nodes to deploy the config, you will have X configs available (1 / node)\nOnly the configs that are on a manager node will work to create the macvlan network. Selecting a config from a worker will result in an error.\n[2018-11-15-163002_641x539_scrot]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_7642331_48563139-2Deca91100-2De8f3-2D11e8-2D8b8c-2Db263b0fcbc45.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=jwtTqnw_g92g5isZ4U4PIr1KBvbWluwUVmq-cc3vf7I&e=\n[2018-11-15-163027_1920x1080_scrot]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_7642331_48563127-2De87cf380-2De8f3-2D11e8-2D82d3-2D1ce9f2050018.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=4jpW5agUJ0spPCRcyRA59COW4YYHfrw-OuI0Gw0OYB4&e=\n[2018-11-15-163046_1920x1080_scrot]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_7642331_48563125-2De7e45d00-2De8f3-2D11e8-2D9eda-2D302ec248f333.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=EkV5Ed19qYV57IuCZzhOPQfxymQjWACnrjU86SbiJZw&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2441-23issuecomment-2D439081094&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=ahIXcwagMtNPOTLRGbnSx5xG_W8dmoyN-of9O7D3R9A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSQFiOT-2D2ltCj2wGRH27Y9gRrrh2ks5uvYkOgaJpZM4YSmou&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=yqASB_3uG6rT2V9-rRlEalKM59vDvbdtam7pg6MvUmM&e=.\n. Tested on latest docker and it works\u2026 sorry about that Baron..\nFrom: baron_l notifications@github.com\nSent: Friday, 16 November 2018 4:33 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] fix2412: macvlan availability for standalone endpoints (#2441)\nI did the test with the following configs :\n\nunix\nstandalone\nstandalone + agent (on same host than Portainer + standalone host with agent as container)\nswarm without agent\nswarm with agent\n\nYou may have faced the following issue: when you are connected to a swarm + agent, when creating a network config and selecting all the nodes to deploy the config, you will have X configs available (1 / node)\nOnly the configs that are on a manager node will work to create the macvlan network. Selecting a config from a worker will result in an error.\n[2018-11-15-163002_641x539_scrot]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_7642331_48563139-2Deca91100-2De8f3-2D11e8-2D8b8c-2Db263b0fcbc45.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=jwtTqnw_g92g5isZ4U4PIr1KBvbWluwUVmq-cc3vf7I&e=\n[2018-11-15-163027_1920x1080_scrot]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_7642331_48563127-2De87cf380-2De8f3-2D11e8-2D82d3-2D1ce9f2050018.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=4jpW5agUJ0spPCRcyRA59COW4YYHfrw-OuI0Gw0OYB4&e=\n[2018-11-15-163046_1920x1080_scrot]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_7642331_48563125-2De7e45d00-2De8f3-2D11e8-2D9eda-2D302ec248f333.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=EkV5Ed19qYV57IuCZzhOPQfxymQjWACnrjU86SbiJZw&e=\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2441-23issuecomment-2D439081094&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=ahIXcwagMtNPOTLRGbnSx5xG_W8dmoyN-of9O7D3R9A&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSQFiOT-2D2ltCj2wGRH27Y9gRrrh2ks5uvYkOgaJpZM4YSmou&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=7hr6h80RbiS5Z8lgGpUirW4MQtnPH0DfysFYe8ePWG0&s=yqASB_3uG6rT2V9-rRlEalKM59vDvbdtam7pg6MvUmM&e=.\n. Try this on a standalone Windows 1803 Docker Host\ndocker run -d -p 9001:9001 --name portainer_agent --restart=always -v \\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine portainer/agent\nOr this if is a Windows 1803 Docker Host as a SINGLE NODE swarm.\ndocker run -d -p 9001:9001 --name portainer_agent --restart=always -v \\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine -e AGENT_CLUSTER_ADDR=tasks.agent portainer/agent\nFrom: uptlak notifications@github.com\nSent: Tuesday, 13 November 2018 8:43 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Portainer agent on Windows Server 1803 (#2463)\nDescription\nHello, I am trying to install a portainer agent on windows server worker node, but after I execute this command:\ndocker run -d --name portainer_agent --restart always --network portainer_agent_network -e AGENT_CLUSTER_ADDR=tasks.agent --mount type=npipe,source=\\.\\pipe\\docker_engine,target=\\.\\pipe\\docker_engine portainer/agent:windows1803-amd64\nI always get this error:\ndocker : invalid argument \"type=npipe\" for \"--mount\" flag: target is required\n\nCategoryInfo : NotSpecified: (invalid argumen...get is required:String) [], RemoteException\nFullyQualifiedErrorId : NativeCommandError\n\nSteps to reproduce the issue:\n\nInstall Docker EE 18.09 on Windows Server Datacenter 1803\nRun command above\n\nTechnical details:\n\nPortainer version: 1.19.2\nManager nodes Docker version: 18.03.1-ce\nWorker nodes Docker version: 18.09.0-ee\nPlatform: Windows Server Datacenter 1803\nCommand used to start Portainer: I deployed it as Stack via docker-compose\n\nIf you have any solution please help.\ndocker version\nClient:\nVersion: 18.09.0\nAPI version: 1.39\nGo version: go1.10.3\nGit commit: 33a45cd0a2\nBuilt: unknown-buildtime\nOS/Arch: windows/amd64\nExperimental: false\nServer:\nEngine:\nVersion: 18.09.0\nAPI version: 1.39 (minimum version 1.24)\nGo version: go1.10.3\nGit commit: 33a45cd0a2\nBuilt: 11/07/2018 00:24:12\nOS/Arch: windows/amd64\nExperimental: false\ndocker info\nContainers: 0\nRunning: 0\nPaused: 0\nStopped: 0\nImages: 0\nServer Version: 18.09.0\nStorage Driver: windowsfilter\nWindows:\nLogging Driver: json-file\nPlugins:\nVolume: local\nNetwork: ics l2bridge l2tunnel nat null overlay transparent\nLog: awslogs etwlogs fluentd gelf json-file local logentries splunk syslog\nSwarm: inactive\nDefault Isolation: process\nKernel Version: 10.0 17134 (17134.1.amd64fre.rs4_release.180410-1804)\nOperating System: Windows Server Datacenter Version 1803 (OS Build 17134.1)\nOSType: windows\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 3.999GiB\nName: srv-dockerw1\nID: QZ4J:RGFC:HJW5:PDIT:SMK4:NLVQ:CLJ2:VUWW:7IVC:Y7Z5:JHTA:RDV2\nDocker Root Dir: E:\\docker\nDebug Mode (client): false\nDebug Mode (server): false\nUsername:\nRegistry: https://index.docker.io/v1/https://urldefense.proofpoint.com/v2/url?u=https-3A__index.docker.io_v1_&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=E77r1gbZfaQFV2mjT4M3gY941YuwHYmupgFT_LrmTHk&s=UPJNKTYZoZon5INw5yvy9B6D2zKX31YwJkvjVH4mhPM&e=\nLabels:\nExperimental: false\nInsecure Registries:\n127.0.0.0/8\nLive Restore Enabled: false\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2463&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=E77r1gbZfaQFV2mjT4M3gY941YuwHYmupgFT_LrmTHk&s=eVLxGR6_hCCZFmoXDLX_RtTUUbwGfnR6sb4V2r5c6GE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWqGiIx7-5FQCDqwb-5Fd-2D3GFUFB2hctks5uungggaJpZM4YbFNy&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=E77r1gbZfaQFV2mjT4M3gY941YuwHYmupgFT_LrmTHk&s=W6LMqMrYkybS6wwH547gkuzaMeU-aFzm4gTAAtc9YpA&e=.\n. Ok, so there is currently no way to run the agent on windows in a multi-node swarm. Its a limitation of the docker named pipes.\nRgds,\nNeil Cresswell\nOn 13/11/2018, at 9:26 PM, uptlak notifications@github.com<mailto:notifications@github.com> wrote:\nI have 3 manager nodes on Centos 7, portainer and portainer agents running just fine.\nand 5 worker nodes on Windows Server 1803.\nOn worker nodes are running several applications, but I am unable to install a portainer agent on them.\nThe commands you provide does not work.\nAfter the first command, the container cannot even run, always restarting.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2463-23issuecomment-2D438178220&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JotwwJbH4buHLZm0aTrLYmm4OR8Yg3sYHLf4GgV1FpU&s=PyXthIBmot4ukihU3DmZh8f6Yn8ku9lz50eNmEBdlAo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbv-2DNP-2DTHUGUK8VDxXLI-2DrieXExWks5uuoJGgaJpZM4YbFNy&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=JotwwJbH4buHLZm0aTrLYmm4OR8Yg3sYHLf4GgV1FpU&s=gOJ5SnumWpT-hxkCOyBIdrTyqLClFTEC3FDvm_Do30E&e=.\n. If date is before now, assume next year, if date is after now, assume this year\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 6:55 AM, baron_l notifications@github.com<mailto:notifications@github.com> wrote:\nUX: a date time picker allowing the user to pick up a date (day/month/year) and time (hour/minute) that would be translated as a cron rule in before being passed to the API.\nAs there is no way to specify a year in a cron expression, how do you suggest handling this behaviour ?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2468-23issuecomment-2D440371018&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3PTC4X17XQC9XFBsE0trV6ozXFzrtGrzC58hDLZ8Dfo&s=WHM5Vl0CS7Gu1qbYc_5s1DOvwBpzvBQbMNZqYtv95cc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrle2ZpXwYo2vFS0W0kS5iNvtwFblrks5uxEIRgaJpZM4Yc4oO&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=3PTC4X17XQC9XFBsE0trV6ozXFzrtGrzC58hDLZ8Dfo&s=97A9NOw5l56UGe35EC_uc0je2vZOue-gflWCXsB9QW0&e=.\n. We must support non-recurring.. thats a core premise of this function.\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 9:47 AM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=2hBl1D1pNuMDGqHzPI_mZ37FbkiTt1Jl-ItQns4-8eU&s=emHMJi2XNosE4exAdUFyU6oJiaDYdJzg90DVSGQOLdQ&e= LP is right, we cannot translate the year into a cron expression:\nA cron expression represents a set of times, using 6 space-separated fields.\nField name   | Mandatory? | Allowed values  | Allowed special characters\n----------   | ---------- | --------------  | --------------------------\nSeconds      | Yes        | 0-59            | * / , -\nMinutes      | Yes        | 0-59            | * / , -\nHours        | Yes        | 0-23            | * / , -\nDay of month | Yes        | 1-31            | * / , - ?\nMonth        | Yes        | 1-12 or JAN-DEC | * / , -\nDay of week  | Yes        | 0-6 or SUN-SAT  | * / , - ?\nMaking it impossible to actually schedule non-recurring jobs with the current implementation as the year cannot be specified, meaning that schedules will actually be ran at least one time per year.\nE.g. if we specify run a job on the November 10th at 2PM, the created rule will be 0 0 14 10 11 which will be triggered every year on the November 10th.\nIf we want to support non-recurring schedule, we have to update the API to add a flag that will disable the job after its first execution.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2468-23issuecomment-2D440456545&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=2hBl1D1pNuMDGqHzPI_mZ37FbkiTt1Jl-ItQns4-8eU&s=8UrQkEk6MgWjzc69LnlhcF-szaWDBbZgoMMyFP3eaiI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWvprGBfkOmXtp3Hn4AGVXOyvD2cks5uxIZegaJpZM4Yc4oO&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=2hBl1D1pNuMDGqHzPI_mZ37FbkiTt1Jl-ItQns4-8eU&s=AkWo5EIgS-j-OPUepFwaK9NfZEjyDZD4OuG4niEQSU8&e=.\n. We wont be doing that\u2026 that UX is counter to Portainer\u2019s vision\u2026\nThe shutdown process after 5 minutes is sufficient in my book\u2026\nFrom: Gustavo Lichti notifications@github.com\nSent: Tuesday, 20 November 2018 5:12 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] Responsible Disclosure - Check if admin already created by a public API endpoint (#2475)\nHi @deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=f8MBY6GykHZ915R_7P7UDyA8lD72-yp5kfxIuS205FQ&s=Rd20h4OSNedxuyanAaq2Az5b9PGq8XGmdg2THoRIpSU&e=,\nThanks for the answer, shutdown instancet portainer if admin account was not created after awhile, it's an idea. But another idea is to create a token at application startup, and to create the admin password, you need to put that token. The user can get this token with docker logs.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2475-23issuecomment-2D440131631&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=f8MBY6GykHZ915R_7P7UDyA8lD72-yp5kfxIuS205FQ&s=lcQ8lQKfLZDLOJcfAU3KXYSv3tgjcsQd9jt5js-01oY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldzyENfkYLU6QjoPmCpnuk2nFa6vks5uw4EZgaJpZM4YqCy4&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=f8MBY6GykHZ915R_7P7UDyA8lD72-yp5kfxIuS205FQ&s=IYOr8s9caFzrcKvg7rVpDNwBLWCjD5U_e1juB3FvSSk&e=.\n. How do you suggest we handle the many users that deploy with our \u2014no-authentication flag, thereby disabling portainer authentication?\nRgds,\nNeil Cresswell\nOn 20/11/2018, at 5:29 PM, Gustavo Lichti notifications@github.com<mailto:notifications@github.com> wrote:\nDeployment procedure simple is good, but don't must to create a potential vulnerability. Sound good shutdown after five minutes, but are five minutes exposted to de world. Sound very simple to me the user configure a initial password by CLI parameter or environment variable.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2475-23issuecomment-2D440134102&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nPJtCoVf_RZWRLyYNVDYDAGQwpogAy7R5Cki1Va1IvM&s=HNDGSiXmg9stn0nG7HQ8wTbJadfDXoA5H7LCZPG2a3M&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQ9vh-5F35QHF9xATaA-5FymG3eep0dUks5uw4UogaJpZM4YqCy4&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nPJtCoVf_RZWRLyYNVDYDAGQwpogAy7R5Cki1Va1IvM&s=FeEC-hL2o_R6UPX4R6O0jxCEsPP8F8_WgV0l0L_s4a4&e=.\n. Whatever we decide to do, it will not involve getting a password from logs, that is a terrible experience for a product aiming to simplify things.\nWe will more than likely just allow the user to set a password as part of the cli command when deploying portainer, and if they dont, then they get 5 minutes to set one from the ui before portainer exits.\nThat way the user can choose their risk exposure vs simplicity.\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 7:03 AM, Gustavo Lichti notifications@github.com<mailto:notifications@github.com> wrote:\nUX cannot ignore security, to facilitating initial setup. We need aware users about scurity, and we need help them about this, not facilitating the setup but explaning the ploblem.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2475-23issuecomment-2D440373570&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jtaQqD5yy1LJuwG_-kVi7nGOorESxgL9KZNPMk35dNA&s=05NS90_1_hoEeqQnka4H3w9OwMrUemms8v3OspMh9SM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrla1z8-5FYqJmqblBKlBosS9pw70BQXks5uxEP2gaJpZM4YqCy4&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=jtaQqD5yy1LJuwG_-kVi7nGOorESxgL9KZNPMk35dNA&s=Dhe_AoTAP_Es9v4tACCawsKUAQw2hV3Fu0FGYSl_qY4&e=.\n. I also dont want that flag, but every time we try to take it away, there is massive negative feedback, so its here to stay unfortunately.\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 6:50 AM, Gustavo Lichti notifications@github.com<mailto:notifications@github.com> wrote:\nin my humble opinion, \"--no-authentication\" should not exist. Integration with oauth and saml are more important features and do not exist. But \"--no-authentication\" is forced by user by CLI parameter.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2475-23issuecomment-2D440369316&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=8jEKGyObe-ABvOyPdV3ry9WKEPT_aXQOEjSMI2qqGV4&s=wsNywrYtUbvwrWDSeD_9arYxt33a8jy9Gex_6iAmz0I&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTad9DoHnfMdExHIeLncvFnq8DPmks5uxEDjgaJpZM4YqCy4&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=8jEKGyObe-ABvOyPdV3ry9WKEPT_aXQOEjSMI2qqGV4&s=k97NPbeA31cRN8EriNd8hinZ2OJXLk_qt8EKLQDhZ7c&e=.\n. I wasnt even aware you can dispute the submission.\nThe original submitters point is that Portainer has an obligation to protect our users from themselves and their own bad decisions... ie we do not allow you to expose Portainer without authentication from the outset.\nWe dont agree with that, and have elected to allow our users to make their own decisions, which means the CVE remains. We did however put in place a mitigation that says if an admin account doesnt exist within 5 minutes of Portainer starting, then shutdown, which will hopefully mitigate some risk.\nN\nRgds,\nNeil Cresswell\nOn 13/12/2018, at 4:30 PM, William Easton notifications@github.com<mailto:notifications@github.com> wrote:\nHave you guys considered disputing/rejecting this CVE with the National Vulnerability Database? This doesn't seem to qualify as a report-able CVE.\nWhere are the CVEs for open S3 buckets, MongoDBs and Elasticsearch instances?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2475-23issuecomment-2D446830619&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=07Rz1GUXZR9TwogvhRajSiMWgLxT3aWP6ya-qfP6n_Q&s=8l4L83s1Gk_s_C6BQjP2kshzhFTu-qNDBtFLOKHj0_c&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcWCgFh2CubHeupj5h7py7UhucoMks5u4cnsgaJpZM4YqCy4&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=07Rz1GUXZR9TwogvhRajSiMWgLxT3aWP6ya-qfP6n_Q&s=24AVi4bQA9LhTiYMJG3ZzAVavfQnnwbSXAqMqLXD-HY&e=.\n. Is your host windows or linux? That network card device id seems strange. Normally eth0 or ens160 or something like that. On your host do an ip address command to see the device.\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 12:28 PM, Anthony Lapenna notifications@github.com<mailto:notifications@github.com> wrote:\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=sonn_y1MgaaIM6bWeaAwW9RUMzoaLmQOBPOobB_FzFM&s=w4IliUwmaxmue_LD8S8S6SMCpzHw2PH95fUsjsxDfXM&e=\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2478-23issuecomment-2D440535912&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=sonn_y1MgaaIM6bWeaAwW9RUMzoaLmQOBPOobB_FzFM&s=6cut-HaWG2WC2QqpW3gRsX1Gj48o6UGytNSra_Nc2Gg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYIUPEOd8aj-2DKz2UVDqJVUlJHrg6ks5uxOSAgaJpZM4YsZX6&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=sonn_y1MgaaIM6bWeaAwW9RUMzoaLmQOBPOobB_FzFM&s=SGDNmLJSVYwwoqX2t-DervQP9weO3LklNaQLqjt1OzE&e=.\n. In your earlier picture, you have no entry in ip address range box. You need one.\nAt a min, a single ip using 192.168.25.25/32 format.\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 8:01 PM, Mohanraj B notifications@github.com<mailto:notifications@github.com> wrote:\nIts Linux host - ubuntu\nTried to create macvlan network using both ethernet and wifi interface.\nenp0s25: flags=4099  mtu 1500\n        inet 192.168.25.12  netmask 255.255.255.0  broadcast 0.0.0.0\n        ether 3c:97:0e:bf:e5:24  txqueuelen 1000  (Ethernet)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device interrupt 20  memory 0xf1500000-f1520000\nwlp3s0: flags=4163  mtu 1500\n        inet 192.168.15.138  netmask 255.255.255.0  broadcast 192.168.15.255\n        inet6 fe80::f72a:652a:147d:7745  prefixlen 64  scopeid 0x20\n        ether 08:d4:0c:09:56:dc  txqueuelen 1000  (Ethernet)\n        RX packets 195192  bytes 208545673 (208.5 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 146507  bytes 29856016 (29.8 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n[macvlan-ethernet]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_40422495_48842887-2D7b69d200-2Dedbb-2D11e8-2D856f-2D7af7c2c496f4.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uO_JYc5zDPdOWuBo9uHeJel39kYVX7pg_pLWfyDuC1Y&s=GwNnGH01z0JmMYu7hqc9HWOaEOT1z-uHL_KFTbEdFUQ&e=\nThanks and Regards,\nMohan\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2478-23issuecomment-2D440654514&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uO_JYc5zDPdOWuBo9uHeJel39kYVX7pg_pLWfyDuC1Y&s=RcfOcZ7CfL6HudP9WOBvMzI4EimO9gUghd7Ye33TFBY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaJGq-2Drwh51-5Fp2MyEXMVsjpIufAvks5uxU64gaJpZM4YsZX6&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=uO_JYc5zDPdOWuBo9uHeJel39kYVX7pg_pLWfyDuC1Y&s=GoHP6-8QTwUr5lrdgA6JovqWI2Zn9S-FrTumNBv6SqU&e=.\n. Cant use .0, must start with .1 as its the range that will be assigned to a container, and 0 is not a valid ip.\nBut, not sure thats the issue.\nI use macvlan all the time on centos without issue, but havent tried on ubuntu for a while. Will try tomorrow and revert.\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 8:22 PM, Mohanraj B notifications@github.com<mailto:notifications@github.com> wrote:\nTried that, still same issue.\n[macvlan-net]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_40422495_48843809-2D37c49780-2Dedbe-2D11e8-2D87ee-2D7f607adc701f.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=tWIjVjDzteBfCqKo1rH8_Z2GncDtqPTKPyqzy76Ad-Y&e=\n[network-mac-detail]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_40422495_48843826-2D4317c300-2Dedbe-2D11e8-2D8ab3-2D05f38b5b3ae7.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=DrM2JBVarQClrkpri-H5VXj7sy7-I79LWSYGth1zXXM&e=\nBelow are system details.\nKernel Version: 4.13.0-46-generic\nOperating System: Ubuntu 17.10\nDocker Server Version: 18.06.1-ce\nThanks and Regards,\nMohan\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2478-23issuecomment-2D440660218&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=wBQDaTz-cAKnbN2ECPC9si_tg5PFZbYTI0iUSnS7qaI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUX-2DwQouWpTrzCCVxh-2DQQTmn-5FsWKks5uxVOsgaJpZM4YsZX6&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=KeXxbBgAR1y5NYhmLcWQr09FN6Ks_njGel_57YngANc&e=.\n. Actually,\nJust checking, you are doing BOTH steps, right?\nYou create the config (so name it something the macvlan_config) and them you go back again and create the actual switch by selecting creation.\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 8:22 PM, Mohanraj B notifications@github.com<mailto:notifications@github.com> wrote:\nTried that, still same issue.\n[macvlan-net]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_40422495_48843809-2D37c49780-2Dedbe-2D11e8-2D87ee-2D7f607adc701f.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=tWIjVjDzteBfCqKo1rH8_Z2GncDtqPTKPyqzy76Ad-Y&e=\n[network-mac-detail]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_40422495_48843826-2D4317c300-2Dedbe-2D11e8-2D8ab3-2D05f38b5b3ae7.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=DrM2JBVarQClrkpri-H5VXj7sy7-I79LWSYGth1zXXM&e=\nBelow are system details.\nKernel Version: 4.13.0-46-generic\nOperating System: Ubuntu 17.10\nDocker Server Version: 18.06.1-ce\nThanks and Regards,\nMohan\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2478-23issuecomment-2D440660218&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=wBQDaTz-cAKnbN2ECPC9si_tg5PFZbYTI0iUSnS7qaI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUX-2DwQouWpTrzCCVxh-2DQQTmn-5FsWKks5uxVOsgaJpZM4YsZX6&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=KeXxbBgAR1y5NYhmLcWQr09FN6Ks_njGel_57YngANc&e=.\n. Example.https://www.linkedin.com/pulse/using-macvlan-portainerio-neil-cresswell\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 8:22 PM, Mohanraj B notifications@github.com<mailto:notifications@github.com> wrote:\nTried that, still same issue.\n[macvlan-net]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_40422495_48843809-2D37c49780-2Dedbe-2D11e8-2D87ee-2D7f607adc701f.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=tWIjVjDzteBfCqKo1rH8_Z2GncDtqPTKPyqzy76Ad-Y&e=\n[network-mac-detail]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_40422495_48843826-2D4317c300-2Dedbe-2D11e8-2D8ab3-2D05f38b5b3ae7.png&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=DrM2JBVarQClrkpri-H5VXj7sy7-I79LWSYGth1zXXM&e=\nBelow are system details.\nKernel Version: 4.13.0-46-generic\nOperating System: Ubuntu 17.10\nDocker Server Version: 18.06.1-ce\nThanks and Regards,\nMohan\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2478-23issuecomment-2D440660218&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=wBQDaTz-cAKnbN2ECPC9si_tg5PFZbYTI0iUSnS7qaI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUX-2DwQouWpTrzCCVxh-2DQQTmn-5FsWKks5uxVOsgaJpZM4YsZX6&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Flnzyupu0wGxLpfA9iFRV9gL_a0qBd0TUgcz_pTqIUk&s=KeXxbBgAR1y5NYhmLcWQr09FN6Ks_njGel_57YngANc&e=.\n. That will be covered as part of our upcoming role based access control feature (targeted Q2, 2019)\nRgds,\nNeil Cresswell\nOn 21/11/2018, at 9:08 PM, CG-root notifications@github.com<mailto:notifications@github.com> wrote:\nIs your feature request related to a problem? Please describe.\nIs it possible to create a prompt that will ask from the user to insert his password when trying to remove image/container?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2479&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=A5NwocMHQ1DPztPEVDLN2-oD9mx_I8t_qZyGnK7PGls&s=RvjB04K961Pni0lB2nvP1SqXqDX4m5dq1yA5-DShZCI&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaxqyof3hakHP2AbfNrBwH8xnJBuks5uxV5jgaJpZM4YtMQa&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=A5NwocMHQ1DPztPEVDLN2-oD9mx_I8t_qZyGnK7PGls&s=Fhatz9K6TcYTqwpg0CRhb2IQ8ZaeTEI1BaxbXc1Pylc&e=.\n. Same issue\u2026 doesn\u2019t work on my firefox browser, or Stevens Chrome browser..\nFrom: Anthony Lapenna notifications@github.com\nSent: Tuesday, 27 November 2018 10:04 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] feat2468: schedule creation ux (#2485)\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bw7m_TnoEPYe3izXRmneNcEGMz-56bcchvMDB8LVJ7A&s=a1g4WYB3SqRmp9naXp9bbWObkVLUgIbTlCVFlfiMfSE&e=\nUpdated image: portainer/portainer:feat2468-schedule-creation-ux\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2485-23issuecomment-2D441796955&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bw7m_TnoEPYe3izXRmneNcEGMz-56bcchvMDB8LVJ7A&s=cBxp-ozm8mQcPqsUenTEU5PZl62mBQiJcqJ-QTk9Bmc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaDAYuJapjwU9-2DV0UGeDjh7TCrMGks5uzFcigaJpZM4Yvt-5Fz&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bw7m_TnoEPYe3izXRmneNcEGMz-56bcchvMDB8LVJ7A&s=gkG28dm8XiAE6pQ7Sy_q_Ip6UCy4SjlopnPEUjpKGyU&e=.\n. Yes, that disables the google analytics plugin we use to gauge uptake.\nNote that as an opensource project, we don\u2019t ask for much, but we do ask that wherever possible, please leave the GA enabled so we can see how uptake is tracking across the world. It doesn\u2019t collect anything specific about your environment, only the number of instances in active use, and the city where its running.\nMore than likely though, we will drop GA and move to our own in-app collection of stats (usage reporting) the same way Rancher, OpenShift and Docker do (opt out usage data collection).\nFrom: waja notifications@github.com\nSent: Saturday, 8 December 2018 12:36 a.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: Re: [portainer/portainer] Flags seems to be ignored (#2498)\nI just discovered that --no-analytics seems to work without problems.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2498-23issuecomment-2D445206497&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bPgHtSDr7hkGf5lgbVJzl5ALZ5TfUdqeyIz9GBncZm0&s=BceuGmZPWbXTZyKAo8aG3jHh1LFNE-bKI6pqnbQ7ea0&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlclj-2DmeIQhRYuJiNuIBl0-5FdN0-2DbPks5u2lK0gaJpZM4Y3IxR&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=bPgHtSDr7hkGf5lgbVJzl5ALZ5TfUdqeyIz9GBncZm0&s=P-m8lnsz8Y4LhA9ydh-XIZY7aeeHqtgVyeUHm1j-gJI&e=.\n. We dont block bind mounts from stacks as we dont inspect the stack file. Other points, we will investigate\nRgds,\nNeil Cresswell\nOn 30/11/2018, at 10:18 AM, alphaDev23 notifications@github.com<mailto:notifications@github.com> wrote:\nAfter disabling bind mounts for non-administrators (under Settings), a non-admin user is still able to create bind mounts via the creation of a stack. Separately, neither bind mounts nor volumes appear in the user's Volume list. Additionally, the container does not appear in the user's Containers list. Both the container and the volume appear in the admin's Container and Volume list, respectively. The creation of the bind mount was verified by logging into the container via the admin's UI.\nTested on Portainer 1.19.2. As a note, userns-remap is enabled in the docker daemon.\nAbsent a creation error - given that bind mounts were disabled for users, I would have expected there to be an error - I would expect that the volumes would be listed in the user's Volume list and the container listed in the user's Container list.\nThe following is the stack created by the user.\nversion: \"2\"\nservices:\nubuntu:\nimage: ubuntu\ncommand: tail -f /dev/null\nvolumes:\n- /home/ubuntu:/tmp/home\n- data/tmp/test\nThe first is the bind mount. The second is the volume.\ndocker info:\nContainers: 2\nRunning: 1\nPaused: 0\nStopped: 1\nImages: 2\nServer Version: 18.06.1-ce\nStorage Driver: overlay2\nBacking Filesystem: extfs\nSupports d_type: true\nNative Overlay Diff: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\nVolume: local local-persist\nNetwork: bridge host macvlan null overlay\nLog: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nInit Binary: docker-init\ncontainerd version: 468a545b9edcd5932818eb9de8e72413e616e86e\nrunc version: 69663f0bd4b60df09991c08812a60108003fa340\ninit version: fec3683\nSecurity Options:\napparmor\nseccomp\nProfile: default\nKernel Version: 4.15.0-39-generic\nOperating System: Ubuntu 18.04.1 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 15.66GiB\nName: node-1\nID: CKVO:D726:BS4K:A24A:J3CY:ZYDS:VWFA:SQRT:QGLY:VJGJ:ZROU:OOG3\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/https://urldefense.proofpoint.com/v2/url?u=https-3A__index.docker.io_v1_&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=89306PwmHsMkb5ZfdIE5DQdF5zt47aGzJqHf_XuC0Io&s=qmquO0QTAsRBTjP8hT0RNPKyl2mH182tmFH-C1Cf2rA&e=\nLabels:\nExperimental: false\nInsecure Registries:\n127.0.0.0/8\nLive Restore Enabled: true\nWARNING: No swap limit support\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2506&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=89306PwmHsMkb5ZfdIE5DQdF5zt47aGzJqHf_XuC0Io&s=aqSIzR19xz4AhUzNRIYAu--ToaNfVzOCT9xBcPViBbU&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldR7ece-2DScERQIdx8Hqb-2DzKn7-5Frpks5u0E8vgaJpZM4Y6iEq&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=89306PwmHsMkb5ZfdIE5DQdF5zt47aGzJqHf_XuC0Io&s=TLU8QveQZoGoJWFjLBwNMneIpZ2tiyZH9uhsA7koEa4&e=.\n. Agree, and we will attempt to resolve asap. No eta though.\nWe would need to inspect the stackfile before submission, so this wont be easy nor quick.\nSent from my iPhone\nOn 6/01/2019, at 11:35 AM, alphaDev23 notifications@github.com<mailto:notifications@github.com> wrote:\n@ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=op0gbTQZxiE0jhG3rIiyiJoaERmrtmibzmrCtsp12KU&s=eLJRFH9wL0fj8ulsixNRWvME-0IlBPNUhNXMb8yx8uk&e=, your comment \"We dont block bind mounts from stacks as we dont inspect the stack file.\" is a bug, An admin expects that if the \"Disable bind mounts for non-administrators\" is set then users will not be able work around the issue by simple creating a stack with a bind mount. Under the current implementation, all a user has to do is create a bind mount to \"/\" and they can modify any aspect of the underlying host by accessing the container via the console and modifying files on that volume.\nThe settings is important though because it would be great to be able to allow non-admin users to create containers and/or stacks without concern of the non-admin user having full access to the docker host.\nWhen will this issue be fixed? Without a fix, Portainer is not viable for the above use case (which is what the feature is intended to be used for).\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2506-23issuecomment-2D451697383&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=op0gbTQZxiE0jhG3rIiyiJoaERmrtmibzmrCtsp12KU&s=_Vp-LEOTxL5039A0txq1xw6hVkhT87SfkC3wleJR6ak&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSU9FchEcOLRAYFMX22fTwl-5FapyKks5vASiXgaJpZM4Y6iEq&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=op0gbTQZxiE0jhG3rIiyiJoaERmrtmibzmrCtsp12KU&s=lN-CkEp2PnK5zYORV7u5J04umFn729RWNq2cE7yAdBs&e=.\n. David, can you please email me, neil.cresswell@portainer.ioneil.cresswell@portainer.io\nRgds,\nNeil Cresswell\nOn 5/12/2018, at 10:25 AM, David Lazauskas notifications@github.com<mailto:notifications@github.com> wrote:\nCloses #1124https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1124&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=89BPdJJuETVFxeWbOjSUmw0azhr_oGALhu0WhhMZUvo&e=\nImplements OAuth with Authorization Code grant type as authentication option\nAdds a new choice under the Settings -> Authentication: OAuth.\n[screenshot from 2018-12-04 16-19-23]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_3327565_49473588-2D74da5200-2Df7e0-2D11e8-2D9cf8-2D913ff921a54f.png&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=L0qsPC8t6Svjhf4nl9kI5fRwhcP7nbgUZHbFM5Z21O8&e=\n[screenshot from 2018-12-04 16-19-43]https://urldefense.proofpoint.com/v2/url?u=https-3A__user-2Dimages.githubusercontent.com_3327565_49473592-2D760b7f00-2Df7e0-2D11e8-2D96a9-2Db6d2231789ee.png&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=egKjj75hexl4oJ_3wkJYH_KxyXYevNVOKXfstoVYsZo&e=\n\nYou can view, comment on, or merge this pull request online at:\nhttps://github.com/portainer/portainer/pull/2515https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=aD1Snice8VfWx2f_BV20yD-u_EWM2GLgud9PuZ0_Ezc&e=\nCommit Summary\n\nfeat(authentication): implement OAuth authentication option\nfix(authentication): add static state parameter for oauth2 login url for providers that require it\n\nFile Changes\n\nM api/cmd/portainer/main.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D0&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=i4cN4uva2rCRppp0HWoW6BW27KdEgnSHEgJoWDgf1zs&e= (9)\nM api/http/handler/auth/authenticate.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D1&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=RFCvxhn-SMjVO_GormA4PTvaITlYrj7b2IkLu-9cnBE&e= (64)\nM api/http/handler/auth/handler.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D2&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=TmddbpLW1htCVr3fbUIIMBiuNPghmM8qklix_XfN2Ns&e= (3)\nM api/http/handler/handler.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D3&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=ShDotr6ahiDyyaOaihPkUxZ1_92jutgdJo-rjp5unbw&e= (2)\nM api/http/handler/settings/handler.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D4&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=9gywFpV0nPE4X_4PLKhy_Ilhh4ymQBOENJkKJLR3UjM&e= (2)\nM api/http/handler/settings/settings_public.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D5&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=WhASFHBdfUKu-ebcFUydNwGLe8hUjThhdb30l5lnfKY&e= (8)\nM api/http/handler/settings/settings_update.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D6&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=PqTE4PbldEFtnFpZhnvrO0l_ADROhTRCb_s4sW6gJZ8&e= (7)\nM api/http/server.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D7&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=q86rmg076x4NI_gLjOijkdeac9QGx97pB7ArUqQvhq0&e= (3)\nA api/oauth/oauth.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D8&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=cHYCLdkslh3WzTXTnonwXMh9oSzR7BrQ2AS1geVZfnM&e= (131)\nM api/portainer.gohttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D9&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=Z3ppwhwtce4c9TWtAMab0R6f7nkZMiFBWJpkcQe1_Fo&e= (21)\nM app/constants.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D10&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=jYnr7kgZvAcbJiqv_69oNduuYS_xDdyppZ5u8msVYjk&e= (1)\nM app/portainer/components/datatables/users-datatable/usersDatatable.htmlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D11&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=v0PXiOySNZ_UL7W3BIap1bRGBCwxmECnOexwy_2zquU&e= (3)\nM app/portainer/models/settings.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D12&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=V4xL9nFhWAn5ukIHJIyPcHZSWOedU_03SHUaRC5zbzA&e= (17)\nA app/portainer/rest/oauth.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D13&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=8CModiIDFBRYGRUXEg5OG5z6RtHCjLTqz7P_HonEmKU&e= (9)\nM app/portainer/services/authentication.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D14&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=6Le7vlL64OOC2GNTytQsGyWH3XjsDOkKRgEhA4Nxkx0&e= (21)\nM app/portainer/views/auth/auth.htmlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D15&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=kOXQ91draHydDFij_9V3v_E02mc4t5H-Y8u8yT7fnyc&e= (4)\nM app/portainer/views/auth/authController.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D16&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=a5FKbX4YATar1hDfoCiFtd83yP241m_aey3h1Jv_pDg&e= (45)\nM app/portainer/views/settings/authentication/settingsAuthentication.htmlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D17&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=2Ew3uGHHIUSWllMWizEB1gTw_LDBtI9u9c4Q3gT85TI&e= (120)\nM app/portainer/views/settings/authentication/settingsAuthenticationController.jshttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515_files-23diff-2D18&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=qyju1vG-KlKfBgwVuL12WqJbr1MCJUPA0h2m3vOBRAc&e= (1)\n\nPatch Links:\n\nhttps://github.com/portainer/portainer/pull/2515.patchhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515.patch&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=NTWKpiGMCuSBnu71zpyr_eYNRq5ck3lZgx-xzMj4-zQ&e=\nhttps://github.com/portainer/portainer/pull/2515.diffhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515.diff&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=NQotxkf0pUuCM_E8xKS9VXqVv3GW061HHqa3V4shtPM&e=\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2515&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=aD1Snice8VfWx2f_BV20yD-u_EWM2GLgud9PuZ0_Ezc&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlWIrnvPD2tAfDfyju8VPzx0s6-5Fnhks5u1uhCgaJpZM4ZBiII&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=v-F5H65P5ASJGJ-98ZXe007v9NEvHTf8cNENPQkT_14&s=94kv5_tugvxe35WtnEK24OX3SloTtCLGszW3UETulPk&e=.\n. No data is being collected at all.\nThe only analytics are by google, and can be disabled with a cli flag when starting portainer.\nRgds,\nNeil Cresswell\nOn 7/12/2018, at 4:00 AM, richard bucker notifications@github.com<mailto:notifications@github.com> wrote:\nQuestion:\nPortainer is clearly the best GUI for docker and docker swarm, however, I noticed that there are URLs like the image URLs that essentially \"phone home\" What sort of private data is being collected?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2518&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=f_6Con-nUcRSOTJRjGvFtNEin1Chey-zZsZKKbqkb98&s=_wLp0hZ0SzIf3KPmhXKTH5owcHm1O5aDhscZMFxNFNE&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbdcidTCAFzgNTEI1A0v-2DnGntzcIks5u2TDsgaJpZM4ZGrDO&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=f_6Con-nUcRSOTJRjGvFtNEin1Chey-zZsZKKbqkb98&s=FGx4F9BYFCrizKLVQJHsWALDL2MwJmv2tIE5tsq6prc&e=.\n. Agree, we should have a setting to auto remove any job record/log/result after 24 hours.\nRgds,\nNeil Cresswell\nOn 28/01/2019, at 2:49 PM, d2dyno notifications@github.com<mailto:notifications@github.com> wrote:\nYes this is quite annoying especially for frequent tasks, they leave quite the amount of orphaned containers.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2541-23issuecomment-2D457975885&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Eio_mluWHKIcsIzEzrz_X1KINige9sZn0CZyt5wuMcs&s=pSfvGgMII_xux9k59E_imdSn3-b4aT54BOT2JYfkuN8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlYuL6B3wJJ2rQcTXCFZXP4x-2DUOhbks5vHlcMgaJpZM4ZO1eW&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=Eio_mluWHKIcsIzEzrz_X1KINige9sZn0CZyt5wuMcs&s=9-4XaVXb_XPoe8vk_89vWLmne0B6IMyFCAI9mA5iEtc&e=.\n. Yes, once our dev\u2019s are back from holidays next week.\nRgds,\nNeil Cresswell\nOn 11/01/2019, at 6:10 PM, stex79 notifications@github.com<mailto:notifications@github.com> wrote:\nI appreciate there is a workaround downgrading the agent version, but is this bug planned to be fixed?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2566-23issuecomment-2D453464103&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=B7JKS0wJTyQXLS8Xori_--OMyvF50mxMGwzbYqJamEU&s=M5zrhpk41t3weR2w2A1157NSYB65XmXIA1fBjUFKidk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQwVvAy2QRM8Dp7W54UMfhOutKiIks5vCGL8gaJpZM4ZYFaP&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=B7JKS0wJTyQXLS8Xori_--OMyvF50mxMGwzbYqJamEU&s=O_cihZkEHe2napsDo4aOVBjz6L_iizufSNKNASdGDek&e=.\n. I use firefox on my ipad and dont have any such issue. You cannot use saved credentials, and must manually retype both user and password, but once you do that, login is fine.\nSent from my iPhone\nOn 28/12/2018, at 7:34 AM, Ellison Patterson notifications@github.com<mailto:notifications@github.com> wrote:\nBug description\nWhen attempting to login to Portainer from the Firefox iOS app, it simply says the login information is incorrect. I have it saved with Firefox so it auto-populates the username and password so maybe that is causing some type of snafu, but even if I type in the login information manually it still won't let me login.\nExpected behavior\nSuccessfully being able to login.\nSteps to reproduce the issue:\nSteps to reproduce the behavior:\n\nInstall Firefox for iOS\nGo to portainer login address\nAttempt to login with credentials\nLogin attempt invalid\n\nTechnical details:\n\nPortainer version:\n1.20.0 (happened on older versions as well)\nDocker version (managed by Portainer):docker\n18.09.0\nPlatform (windows/linux):\nDebian 9\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nPortainer is handling this and/or docker systemd service.\nBrowser:\nFirefox iOS\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2579&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VKsFtjflyYEer8KRucBQd28JbByfVgKt-cyL9h_rhuw&s=SaAKr4Xkzq0LL98yZuMy8sMntfEkPl0vnpg3FC0uj9Y&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQlTtcJiXUsFEoEMsgXafZLZ6gG2ks5u9RLFgaJpZM4ZjEob&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VKsFtjflyYEer8KRucBQd28JbByfVgKt-cyL9h_rhuw&s=u-504pj4peMkD2zqQ64SJDBS9mrlXDMdquvqtKhPYDU&e=.\n. Sure, we will keep issue open.\nSent from my iPhone\nOn 28/12/2018, at 7:50 AM, Ellison Patterson notifications@github.com<mailto:notifications@github.com> wrote:\nI use firefox on my ipad and dont have any such issue. You cannot use saved credentials, and must manually retype both user and password, but once you do that, login is fine.\n\u2026\nSent from my iPhone On 28/12/2018, at 7:34 AM, Ellison Patterson notifications@github.com<mailto:notifications@github.commailto:notifications@github.com> wrote: Bug description When attempting to login to Portainer from the Firefox iOS app, it simply says the login information is incorrect. I have it saved with Firefox so it auto-populates the username and password so maybe that is causing some type of snafu, but even if I type in the login information manually it still won't let me login. Expected behavior Successfully being able to login. Steps to reproduce the issue: Steps to reproduce the behavior: 1. Install Firefox for iOS 2. Go to portainer login address 3. Attempt to login with credentials 4. Login attempt invalid Technical details: * Portainer version: 1.20.0 (happened on older versions as well) * Docker version (managed by Portainer):docker 18.09.0 * Platform (windows/linux): Debian 9 * Command used to start Portainer (docker run -p 9000:9000 portainer/portainer): Portainer is handling this and/or docker systemd service. * Browser: Firefox iOS \u2014 You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2579&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VKsFtjflyYEer8KRucBQd28JbByfVgKt-cyL9h_rhuw&s=SaAKr4Xkzq0LL98yZuMy8sMntfEkPl0vnpg3FC0uj9Y&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQlTtcJiXUsFEoEMsgXafZLZ6gG2ks5u9RLFgaJpZM4ZjEob&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VKsFtjflyYEer8KRucBQd28JbByfVgKt-cyL9h_rhuw&s=u-504pj4peMkD2zqQ64SJDBS9mrlXDMdquvqtKhPYDU&e=.\nIsn't still an issue though since using saved credentials on other web applications does not introduce the issue I've described. If it is intended then shouldn't it display why it prevented you from logging in specifically?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2579-23issuecomment-2D450209098&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=fzPOAhzYqE5EsAZ6g85Pd-u3ojAvT3XiOEWC6Vw7spA&s=5VkNp5kgklMFFz6-_DUvDnvxKLa1MI4B1adjZbvDblk&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSU0vuATnscQhCJx85PK4XGif-5Fokks5u9RZsgaJpZM4ZjEob&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=fzPOAhzYqE5EsAZ6g85Pd-u3ojAvT3XiOEWC6Vw7spA&s=ftDB1UEL9KSJzWJTQ5nQAnPpZU6ZIaI5plg7_gXl_Gw&e=.\n. Use: downloads.portainer.io/agent-stack.ymlhttp://downloads.portainer.io/agent-stack.yml\nSent from my iPhone\nOn 30/12/2018, at 8:31 AM, claycooper notifications@github.com<mailto:notifications@github.com> wrote:\nBug description\nThe URL in the dialog for creating a new Portainer agent is broken.\nSteps to reproduce the issue:\nSteps to reproduce the behavior:\n\nGo to /#/endpoints/new\nClick on 'Agent'\nNote directions in Information section\nTrying \"curl -L https://portainer.io/download/agent-stack.ymlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__portainer.io_download_agent-2Dstack.yml&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nP-Lbuv0K1ToCjc4AXv7BCyaySthD4bG6buqFssl3kU&s=eAdMU0RbN0tb9rKGvXTe98qqQjnD2jwQcjZWPA0i2AE&e= -I\" returns a 404 error.\n\nTechnical details:\n\nPortainer version: 1.20.0\nDocker version (managed by Portainer): N/A\nPlatform (windows/linux): N/A\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer): N/A\nBrowser: N/A\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2584&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nP-Lbuv0K1ToCjc4AXv7BCyaySthD4bG6buqFssl3kU&s=fp7qyWeXjBwMlxy3HYmTrNI2R0K54Oln9r7LN8ZtDxg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlT6eNJF-2D7zpRccR8PUANLFFqEs9Gks5u98L7gaJpZM4Zkr3T&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nP-Lbuv0K1ToCjc4AXv7BCyaySthD4bG6buqFssl3kU&s=Spowfb--Rn8CcS4esJPm990VWjonNaLjTCOdo_JbM-o&e=.\n. Yeah, we are considering our own \u201ccall home\u201d opt-in usage reporting, but want to ensure we do so safely first\nSent from my iPhone\nOn 5/01/2019, at 5:00 PM, Florian notifications@github.com<mailto:notifications@github.com> wrote:\nYes, I know it can be disabled, that's what I'm currently doing. But I also understand telemetry data can be useful and I'd like to provide the data, it's just that I don't want to have Google involved (because of, you guessed it, privacy).\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2590-23issuecomment-2D451625521&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=o74ub4duCkdQxQdpyb7HYs03ASEKpOdyz_htRyOVYR8&s=8tKxYlQFDjwOo2rQHe0HWUGaRD8SBzYbzVQvQfiAb-Q&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlTzczINi7To3HZiedAre-5FMgrLcE6ks5vACNxgaJpZM4ZmFDc&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=o74ub4duCkdQxQdpyb7HYs03ASEKpOdyz_htRyOVYR8&s=cw7xh4EQIIiWRLNBqLpVr3wdeMALAZEt7EmKqyygCtQ&e=.\n. Sorry, we wont be allowing the disablement of MOTD.\nSent from my iPhone\nOn 6/01/2019, at 5:42 AM, muuuh notifications@github.com<mailto:notifications@github.com> wrote:\nHello,\ncould you please add an option like \"--disable-analytics\" for disabling the Message of the Day (motd)?\nThanks!\nBest regards,\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2599&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=T9nzcUry89gAYWdMSJsoFBs2ggTTG0yd1K3WjFSwXug&s=FGW8GsQX4kON2nOg69E-FtJKXZi3ebogMF4S8zu-7JY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlVWVgAeFflISyZ1lw8MZkRPWDrZNks5vANXWgaJpZM4ZxnpQ&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=T9nzcUry89gAYWdMSJsoFBs2ggTTG0yd1K3WjFSwXug&s=FYtdipewAImJ-pms-iQEnpuwsDOzQW3qPGoPJcZ8wzo&e=.\n. You can see apparmour denied message there..\nMaybe take a look here:https://www.linuxquestions.org/questions/linux-software-2/apparmor%3D-denied-operation%3D-rename_src-profile%3D-usr-bin-freshclam-4175632652/\nSent from my iPhone\nOn 6/01/2019, at 4:06 PM, Alan notifications@github.com<mailto:notifications@github.com> wrote:\nBug description\nWhen I reboot my Ubuntu host, portainer starts but:\n\nPortainer shows 0 containers, volumes, etc.\nThe portainer container cannot be stopped so I can't recreate it:\n\nalan@docker:~$ docker ps\nCONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                    PORTS                                 NAMES\n9981a6973108        blacklabelops/volumerize   \"/sbin/tini -- /opt/\u2026\"   22 hours ago        Up 20 minutes                                                   volumerize\n1f04a6daa9af        itzg/minecraft-server      \"/start\"                 2 days ago          Up 20 minutes (healthy)   25575/tcp, 0.0.0.0:24502->25565/tcp   minecraft-ftb-revelation\n5904b60cdb88        simple-life-2:v2.3         \"/start\"                 5 days ago          Up 20 minutes (healthy)   25575/tcp, 0.0.0.0:24501->25565/tcp   minecraft-simple-life-2\nb0e77f2bfabf        portainer/portainer        \"/portainer -H unix:\u2026\"   5 days ago          Up 20 minutes             0.0.0.0:9000->9000/tcp                portainer\nalan@docker:~$ docker stop portainer\nError response from daemon: cannot stop container: portainer: Cannot kill container b0e77f2bfabfd5ecea2961090d82d4c3bf591ad1bc7a746e935558561fca6b55: unknown error after kill: runc did not terminate sucessfully: container_linux.go:393: signaling init process caused \"permission denied\"\n: unknown\n\nThese errors coincide with log entires in dmesg:\n\n[ 1269.054839] audit: type=1400 audit(1546742689.852:89): apparmor=\"DENIED\" operation=\"signal\" profile=\"docker-default\" pid=5959 comm=\"runc\" requested_mask=\"receive\" denied_mask=\"receive\" signal=term peer=\"unconfined\"\n[ 1271.077793] audit: type=1400 audit(1546742691.876:90): apparmor=\"DENIED\" operation=\"signal\" profile=\"docker-default\" pid=5964 comm=\"runc\" requested_mask=\"receive\" denied_mask=\"receive\" signal=kill peer=\"unconfined\"\nExpected behavior\nI expect Portainer to show my running containers, the same ones that show up just fine in docker ps\nSteps to reproduce the issue:\nI run docker stop portainer to get errors above\nTechnical details:\n\nPortainer version: 1.20.0\nDocker version (managed by Portainer):\n\nalan@docker:~$ docker version\nClient:\n Version:           18.09.0\n API version:       1.39\n Go version:        go1.10.4\n Git commit:        4d60db4\n Built:             Wed Nov  7 00:49:01 2018\n OS/Arch:           linux/amd64\n Experimental:      false\nServer: Docker Engine - Community\n Engine:\n  Version:          18.09.0\n  API version:      1.39 (minimum version 1.12)\n  Go version:       go1.10.4\n  Git commit:       4d60db4\n  Built:            Wed Nov  7 00:16:44 2018\n  OS/Arch:          linux/amd64\n  Experimental:     false\n\nPlatform (windows/linux): Docker Machine from Windows, but Docker Host is Ubuntu Server (Ubuntu 18.04.1 LTS) using defaults everywhere I could.\nCommand used to start Portainer:\nI used docker-compose and docker-machine from another host on the LAN to configure docker. My current docker compose configuration file is:\n\nversion: '3'\nvolumes:\n  ...\n  portainer_data:\nservices:\n  portainer:\n    image: portainer/portainer\n    container_name: portainer\n    ports:\n      - '9000:9000'\n    command: -H unix:///var/run/docker.sock\n    restart: always\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - portainer_data:/data\n...\n\nBrowser: FireFox (latest?)\n\nAdditional context\nOn a subsequent reboot the containers ARE showing up just fine. I can't tell if the problem is sporadic or if one of the random troubleshooting steps I performed managed to fix it? The only steps I actually executed on the server, I think, are:\n\nsudo usermod -a -G docker $USER (from this stackoverflow posthttps://urldefense.proofpoint.com/v2/url?u=https-3A__techoverflow.net_2017_03_01_solving-2Ddocker-2Dpermission-2Ddenied-2Dwhile-2Dtrying-2Dto-2Dconnect-2Dto-2Dthe-2Ddocker-2Ddaemon-2Dsocket_&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C1pgpEJpKT-k0ieU4ukiRCbIQwYcyBOasm0N5P53yk&s=09J6p9ge-eDp_c9oox-J5DfdaU8bt089PXxZ4IRtsyo&e=)\nAnd from this askubuntu posthttps://urldefense.proofpoint.com/v2/url?u=https-3A__askubuntu.com_questions_907110_docker-2Dsnap-2Dcannot-2Dconnect-2Dto-2Dthe-2Ddocker-2Ddaemon-2Dis-2Dthe-2Ddocker-2Ddaemon-2Drunning-2Do&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C1pgpEJpKT-k0ieU4ukiRCbIQwYcyBOasm0N5P53yk&s=JPGcDvObe3fkLdhXqhbOSfpPTEi3PX7LebWRzB5wVAE&e=:\n\ndocker.help\nsudo snap connect docker:home :home\nsudo shutdown -r now\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2600&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C1pgpEJpKT-k0ieU4ukiRCbIQwYcyBOasm0N5P53yk&s=dGWBhaZmSupXBp62a2Bwz3Ily9Et_Uy4fVe-uHo43p8&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaUEyeBRUz5V-2DF6kzet0fnOj1m7Dks5vAWgygaJpZM4ZyPBf&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=0C1pgpEJpKT-k0ieU4ukiRCbIQwYcyBOasm0N5P53yk&s=H20FCq51CwAaV475mASzLdCvU3dk_f5DCEuuKQT4OJs&e=.\n. OK, my functional review..\nI login as an admin, and i grant a user the right to \"use\" a registry. Logout and login, and that user can see the allocated registries, so tick.\nHowever, the user is able to click the registry (the name is a link) and is given the option to \"update\" the registry details; if i do so and click update registry button, i get \"access denied to resource\" error.\nIn addition, i am given the option to add a new registry, however if i try to do so, i get the same \"access denied to resource\" error.\nSo, if the goal of this change is to allow a user to browse/use admin defined registries, then we should remove any option for the user to add new or edit existing as these dont work.. Works well now\u2026. No ability to interact with the admin features.\nFrom: Anthony Lapenna notifications@github.com\nSent: Friday, 15 February 2019 9:19 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] feat2645: registries accessibility (#2664)\ncc @ncresswellhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ncresswell&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hYchA2WTx5gy3N2D11yYNciW6Jr5091qywSfdYiLlxw&s=VEwotBZ9F8CmCB33St1n5u_gFQ8tZEL27NBwPeubQtQ&e= image updated\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_pull_2664-23issuecomment-2D463778542&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hYchA2WTx5gy3N2D11yYNciW6Jr5091qywSfdYiLlxw&s=RQpc3GspczZenXq-2nV-rnurteubnRM9ebVwMygG9js&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlbcp2vfKgfcPMhpS6KKs5zpQMDyFks5vNcS8gaJpZM4aYReV&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=hYchA2WTx5gy3N2D11yYNciW6Jr5091qywSfdYiLlxw&s=Q8GlNxvAi1oqaaZc8Hc2BKfJbDiw3KS6ubzCnTFIy9I&e=.\n. I like it, lets add it. This is useful for the host jobs feature too. And whats the issue with Portainer once it starts?\nThat CLI looks fine.\nDo you have SElinux or AppArmour enabled?\nRgds,\nNeil Cresswell\nOn 19/02/2019, at 10:13 AM, \u52c7\u6562\u7684\u4eba notifications@github.com<mailto:notifications@github.com> wrote:\n@deviantonyhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_deviantony&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gIy_3eSKoz5IGL8uJoFPwWrFpW3wdFdfiTJuSWHlv6w&s=PJoSFivowK0PcD9SttFcOIc0UeSstpSo6J2QXbl3O0M&e= :\ndocker run -d -p 9000:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2718-23issuecomment-2D464880947&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gIy_3eSKoz5IGL8uJoFPwWrFpW3wdFdfiTJuSWHlv6w&s=tdNsvN4hQAL1dVTYi6Ak2V-kZZjIWLOZtx5MDAJklEs&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlUQZ0qLNuOoDQ7deL9dQqP47qot3ks5vOxdtgaJpZM4a-5FZcz&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gIy_3eSKoz5IGL8uJoFPwWrFpW3wdFdfiTJuSWHlv6w&s=SDYFCn1cxdqyHr80GYXb8S9bUj_nJPvQh3dxpHTZB0w&e=.\n. ",
    "Eduardoveras": "I was thinking about this too, having a public read-only view for people that you dont want to be messing with your container, and you have to login to be able to edit anything, able to turn this on and off in settings and off by default. ",
    "mingliu": "This is really helpful feature considering when different role as dev and system admin facing the same production environment.. This is really helpful feature considering when different role as dev and system admin facing the same production environment.. ",
    "zhy1991": "Excuse me, when will the read-only user feature be added?. ",
    "m-a-v": "Great news!. That would be a great enhancement!. Are you sure that the ownership is default set to 'private'? My volumes/containers/services are all 'public' by default. I am using Portainer 1.13.3.. Would it be difficult to provide a mechanism to change the default behaviour for externally created docker volumes/containers/services? Portainer could tag the ressources which are listed for the first time.\n. Don't you have a database with all the entries? If the ownership field is not defined you could just set it to private or the default ownership which has to be implemented first :-).. It should not only work for containers but also for other ressources (images, ...).\nThe information whether a ressource has been created inside Portainer could porbably also be valuable for other scenarios.. Did you already have time to implement this feature?. Awesome! Thank you very much for your effort.. ",
    "livespotty": "\nNo ETA yet on this @zhy1991 although this is part of the next main features that will be added.\n\nAny tentative timelines for next main feature release?. ",
    "Redsandro": "This feature should extend to currently running containers that may or may not have been created/started with portainer. A command line that recreates the current container exactly (e.g. including volume mapping).\nIt would be nice to to have a button called \"show command line\" on the overview page with the start/stop buttons that shows a simple dialog with a \"copy to clipboard\" button that has the following text:\ndocker run  \\\n    -d \\\n    --name <name> \\\n    -p <port1> \\\n    -p <port2> \\\n    -e <environment1> \\\n    -e <environment2> \\\n    -v <volume1> \\\n    -v <volume2> \\\n    <image>;. @deviantony Right now specifically I would like to be able to 'export' the container setup - including volume mappings - to a command, so that I can use these commands in a shellscript to set up a bunch of containers in a provisioning script that people on a team can pull.\nBut more broadly, it's just convenient to be able to. For quickly editing things and re-running and automating the commands, also on different computers without portainer installed. Because portainer is nice for a lot of reasons, but for editing a container config and extreme portability, nothing beats seeing/editing the simple command line that runs the container.\nOn more restricted hardware I might want to run a container with a certain environment and certain volume mappings, and then I want to stop, remove, and purge the container. At some other point I would like to start it again by a simple command, at which point I may or may not have Portainer installed.\nGiven that creating/running the container is just a simple command, it's rather frustrating that I cannot retrieve this command.\nFor now, I have to write all my commands to a text file before I run them in case I want to run them again, because I cannot extract the command from Portainer. It feels a bit like a vendor-lock-in (although I know that's not the reason).\nPortainer has all this information, so it would be really convenient and technically easy to have a button somewhere that condenses all this information into a docker command line as written in the example above.. @1138-4EB \n\nJust a clarification. Portainer does not execute docker run\n\nThis is about the portability of container configurations; more precisely the ability to re-create said containers outside of Portainer without dependencies on managers or APIs. I can find all the information necessary to manually type out that command in Portainer details. I'm confident that the fact that Portainer doesn't execute commands in this form internally is irrelevant.. @deviantony sure thing. I've removed the second part and moved it to here: https://github.com/portainer/portainer/issues/1400. @deviantony \n\nI believe that we can persist the last user used for a container inside the browser cache as I don't think this need to be persisted in the database.\n\nYes, that would be a good improvement. Perhaps together with an autoconnect boolean. The user should be cached separately from the autoconnect though, so we can disconnect and also keep the default as a conscious choice (root) because some containers require that.\nE.g.\n{\n    console.user = 'root', // default root\n    console.autoconnect = true // default false\n}\n. I like this, although I would personally really really prefer a one-click solution. E.g. those 4 icons can easily fit in average screen estate. Something roughly illustrated with these terrible emoticons, which you can substitute with the clean black and white icons using imagination:\n[running] [:bar_chart: :exclamation: :station: :information_source:] [portainer-dev] [image] [ports]\nNow I can hold ctrl and click 5 different console-icons to open a shell to 5 containers in new tabs.\nAlso, I barely ever check \"stats\" and \"logs\". And I don't understand what \"inspect\" does. Isn't that the same as details? Then we're left with \"console\".\nIf there are really use cases for frequently opening stats and logs, I propose the option to:\n\nChoose which icons appear in the Quick list (for me: console only), and\nChoose wether or not you want them grouped into a [+] link that you need to click first (for me: no).. @1138-4EB \nClicking either the descriptor or the angle icon replaces the fa-plus-square-o icon and the menu with the visualization you proposed.\n\n\n\nThis is genius. Hadn't thought of this. Initially, it will enable touch screen users. On column click, you'll get even quicker shortcuts more suitable for desktop users.\nAmending to this idea, we could have the column show a caret-down type icon instead, and show a popup on click with options:\n\nShow as\n:radio_button: Group\n:black_circle: Icons\nShown items\n:ballot_box_with_check: Stats\n:ballot_box_with_check: Logs\n:ballot_box_with_check: Console\n:ballot_box_with_check: Inspect\n[possibly more]\n\nGroup mode would do the popover with icons plus titles, while icon mode would show just the icons inline.\nThe last chosen options could be saved to local storage.. @1138-4EB said:\n\nExactly! This is useful! :+1: \nCan the icons be a bit more icony? Right now it's very texty. The underline on mouse-over doesn't help distinguish. Can I make tree suggestions?\n\n\nUse a fixed width for the icons, e.g. class=\"fa fa-terminal fa-fw\".\n\n\nNo underline onmouseover, but a distinct color change.\n\n\nMore icony icons using a color that contrasts with the background on the edge of the icons, for example using a style like this:\n\n\nbackground-color: #337ab7;\ncolor: #fff;\npadding: 1px;\nborder-radius: 2px;\n\n(Note: Only visually required for the expanded title-less icons. The collapsed view with titles is perfectly fine.). @1138-4EB said:\n\n@Redsandro, sure. The previous \"design\" where just placeholders :D. You can pull the image again and try the new iteration.\nI added fa-fw as you suggested. However, instead of using custom styles, I used an \"unbreakable\" btn-group.\n\nYes, this looks good to me!\n\n@1138-4EB said:\n\nI need help to save settings, tho.\n\nIf I can see what I'm doing I might be able to help, but I cannot seem to build/run docker from source. Have some advise?\nhttps://github.com/portainer/portainer/issues/1411. @1138-4EB I must apologize. I didn't see this message until now, and already contributed to the pile: https://github.com/Redsandro/portainer/commit/2f8f356fd9b0776980d49a624b9b0c918f957b64\nIf you wish, I can redo this at a later time.. Thanks. I was checking out the forked repo.. @deviantony said:\n\nPlease remove the .editorconfig file first.\n\nMy IDE added that, because I had to set the indentation different from my global settings. I accidentally committed everything.\nThat said, I don't understand why this should be removed. It's a (popular) solution to a problem. Without it, everyone will have to manually discover and change global settings to their IDE unless they accidentally use the same settings as this project. It makes contributing to this project easier for people who don't share your preferences and global settings.\n.editorconfig should be right up there with .gitignore.\nOn the other hand, if you insist it doesn't, since some IDE's save this file automatically, it should be added to .gitignore.. Ok gotcha. Note that the file was already removed for the intents of this PR.. @deviantony with the requested file removed, I think you can approve the review. Or did we miss something?. Thanks @1138-4EB for explaining and I understand.\nI don't really need a travis pipeline because I'm afraid the next two months I won't have time to work on anything. Also I'm satisfied with the things that are currently in the master pipeline. Personally and selfishly I'm just eager for any image that has the this PR merged in. Although theoretically my current wishlist includes one-click-terminal + remember-console-login + auto-console-login + show-docker-command features, and then I think I'm satisfied with the functionality of Portainer for my use cases.. @1138-4EB definitely interesting :+1: \nBut apart from scroll-to-top and scroll-to-bottom I'm unclear if it encompasses follow-log or stay-bottom or however one would call it.. @1138-4EB @deviantony thanks :+1: . ",
    "NemesisRE": "I would love that feature.\nI had a problem while recreating a container within portainer but the old container was already deleted so all my settings were lost. With that feature one could actually backup the configuration.\nAdditionally it would help to update the portainer container itself.. ",
    "mikhail-gaponov": "I vote for this feature too. \nMy use case here is to run specific configuration command for container (with currently mapped volumes). By default, this container starts the service (UpSource, to be clear), but when I need to reconfigure base URL, I have to restart this container with specific command and it would be nice to have the whole docker command for CLI.\nAnother case is to run container with the same configuration on particular environment (not managed by current Portainer installation). ",
    "foundObjects": "I'd very much like to see this feature implemented as well. It would make re-creating containers on other machines not managed by portainer significantly easier.. ",
    "Roemer": "That feature would be great. I had several problems (mostly with instable network connections) where re-create failed but the old container got deleted. Having this feature I could just copy the generated command line as fallback if portainers re-create fails.. Any news here? I would need the \u2014dns option.. Best change ever. When is this going to be released? I lost several containers without that change (mostly due to multiple networks).. ",
    "beruic": "There is a stackoverflow question on this matter: https://stackoverflow.com/questions/32758793/how-to-show-the-run-command-of-a-docker-container/32774347\nEssentially it should be doable by running\n$ docker run -v /var/run/docker.sock:/var/run/docker.sock assaflavie/runlike YOUR-CONTAINER\n\nJust tried it out. It does add some extra stuff, but that is easily removable.. Reviewing this, it should probably warn during creation if the volume already exists, unless a checkbox tells it to just accept pre-existing volumes.. That's a shame. I could really use this when getting low on disk space.\nOf course there should be a confirmation modal that also indicates what would be deleted (like the command does, not necessarily detailed to which exact objects), but how about also requiring that these buttons should be enabled in settings by admin, and that they could be enabled for admin only?\n@ncresswell could you elaborate on how the multi selector does this without adding risk? And what risk will be added by using pruning?\n. ",
    "libby2cm": "@deviantony does this mean I would be able to run portainer as a global service in a swarm cluster and manage containers on any node from any instance the docker LB sends me to?  If so, that would be great.  Right now, I have a standalone container on each host and if i want to say use the console on a container, I have to connect to the instance of portainer on that host, (in-private/incognito because of the csrf thing) to use it.\n. I agree, i'd like to run it as a docker service, so having to manually configure it via the UI would be a hassle.  Plus, I assume that would require persisting a dataset somewhere to store those settings.. consul, docker volume, etc.  Perhaps both could be implemented... if you specify the parameters in the docker run command, then the UX shows the settings in the respective fields, but they are greyed out.. otherwise if they aren't specified in the run command, then the fields are unlocked so you can set them via the ux.. ",
    "stefanprodan": "Hello,\nI am planning to use portainer in a multi dc setup and I need a way to automate the deploy and configuration. I can automate the docker container deploy but I would like to specify the docker endpoints and user/pass also. How can I do this without setting them by hand in the UI?. From an automation point of view, having a json file is not the best approach. I would like to specify the endpoints and a default user/pass from the docker run command, so I can automate the deploy and configuration with tools like Puppet/Chef/Ansible . Yes, I want to share them as links. You could add the host name as an URL part and bind the dropdown to it.. ",
    "qLb": "+1 for integrating with consul outside of the ui, the auth method should be enforced to use some kind of cryptography for passing variables needed to connect to external hosts (consul's key/value + vault's policies?) on portainer's entrypoint. in production this is an huge security benefit with the ability of revocation of rights to external endpoints.. For windows or osx users using docker in a boot2docker vm it is not a proper solution, additional steps are required to mount host (win or osx) directories other then C:\\Users\\ ie. C:\\data, but feel free to correct me if i'm wrong.\nFrom official dockervolumes tutorial:\nIf you are using Docker Machine on Mac or Windows, your Docker Engine daemon has only limited access to your macOS or Windows filesystem. Docker Machine tries to auto-share your /Users (macOS) or C:\\Users (Windows) directory. So, you can mount files or directories on macOS using.\ndocker run -v /Users/<path>:/<container path> ...\nOn Windows, mount directories using:\ndocker run -v c:\\<path>:/c:\\<container path>\nAll other paths come from your virtual machine\u2019s filesystem, so if you want to make some other host folder available for sharing, you need to do additional work. In the case of VirtualBox you need to make the host folder available as a shared folder in VirtualBox. Then, you can mount it using the Docker -v flag.\nCheers Y!. Official docs for docker in windows - this should suffice for deeper understanding of how to mount shared drives on windows and steps required to do so as @glennsarti proposed ie. C:\\data. so many ways to achieve the inception :P sorry if i made it more confusing then :). ",
    "dklotz": "The same is needed for for the new swarm-mode integrated in docker (I hate what they did there with the naming...). And it isn't used just for deploying on one specific host, but can be used to deploy a service on multiple nodes matching the constraing (e.g. \"only deploy this service on nodes that have a SSD\"). And to be really useful, this would also need the ability to assign arbitrary labels to the individual nodes in the cluster (i.e. \"this node has an SSD\").\nFor docker CLI, here's the docs for specifying the contraints when creating services: https://docs.docker.com/engine/reference/commandline/service_create/#/specify-service-constraints---constraint\nAnd here for assigning the labels to nodes: https://docs.docker.com/engine/reference/commandline/node_update/\nShould I create a separate ticket/feature request for swarm-mode, or should this be handled for both swarm and swarm mode in this ticket?\n. ",
    "cristianfd": "Any news on this?. Oh sorry, I haven\u00b4t seen there.\nAs @WTFKr0 saw, I think that the service constraint must be on service creation and in the container creation too.\nThanks for the clue @WTFKr0 . ",
    "WTFKr0": "The placement constraints have been added to the \"edit service\" view\nBut I think it's not present in the \"service creation\" view\nMaybe i'm wrong. We would like fine grain control on action too\nFor example, we want restrict a user from creating new services, but allow him to mange existent services. Hi !\nWe use docker-compose v3 files with \"docker stack deploy\" command\nThis creates services (swarm mode)\nSome labels are present in services too when created by a compose file : \n\"Labels\": {\n                        \"com.docker.stack.namespace\": \"stack_name\"\n                    },\nIf we can see those stacks in portainer, and manage our stack templates too, it would be awesome\nI think only the docker lib is necessary for that, not libcompose\nTell me if you have questions about that. Thanx for reply\nI think we can add a \"Stacks\" panel on the left\nThis panel have to list stack name (docker swarm)\nDocker api doesn't have \"list stack\", so we have to list services, and get the Service.Spec.Labels array to find com.docker.stack.namespace value\nWhen we select a stack, a summary of the stack can be composed of : \n- List of services - \"docker stack services stack_name\" command line\n- List of tasks (by services) - \"docker stack ps stack_name\" command line\n- Container associated with tasks (with link to container view)\nDocker API services and tasks can be filtered by stacks like that : \ncurl -g --unix-socket /var/run/docker.sock 'http:/v1.26/services?filters={\"label\":{\"com.docker.stack.namespace=stack_name\":true}}' | python -m json.tool\nSee : https://github.com/docker/docker/blob/master/cli/command/stack/services.go#L50\n. Concerning the parameterization of the template, I like the way rancher do it with questions too, and would like to go further, like get the possible values for a field from external url\nSee my comment on docker-compose ui for the idea : \nhttps://github.com/francescou/docker-compose-ui/issues/31#issuecomment-224575619\n. Today, no API is present for listing/updating stacks in docker 1.13\nDocker cli is doing that\nNo ETA for implementing stack API, so I think we can't wait for that\nSo we have to code that in portainer\nWhat do you prefer : \n- Implement that on API (go), based on https://github.com/docker/docker/tree/master/cli/command/stack and have a new portainer api endpoint like /api/stacks\n- Implement that client side, calling multiple existing API endpoint\n?. @alwaysastudent \nFrom my point of view and from experience, we have to split templates information (store in the docker-compsose file) and parameters informations (generally provide by env file, or often in compose file too)\nIf we can split these too informations, it will be easy to duplicate envrionnements for dev/tests/integration\nHere we have a git repo with compose v3 templates (with some variables in), and a form view to param them and \"deploy stack\" them. I think a stack view is the key for that. I've open a PR for stack view in docker swarm mode (based on services labels). This can be updated to show compose stack too (based on container labels). I think this issue can be splitted in multiple PR : \n1) A stack view\nThe view should display informations on stacks (created by docker-compose up or by docker stack deploy\nThis PR should only be a read only view of stacks, with links to services/containers\nI start a work on that on #668 \n2) Api to manage docker stack deploy - compose v3\nThis PR should add api calls to deploy/destroy/update stacks (swarm mode)\nThere is no docker api for that, so we have to use antoher method\nI started a work on #695 \n3) Api to manage docker-compose - compose v1/v2\nThis PR should add api calls to up/down/scale a docker-compose project\nI think it should use https://github.com/docker/libcompose\nNo PR started yet\n4) Add view to manage those stacks\nOnce the 2 api are here, we can update the view with buttons like delete/scale in stack view\nNo PR started yet\n5) Add templates\nRework the template view to add stack template\nA stack template should be a docker-compose file and a config file (json) to manage user parameters\nThe template should be deployed with docker-compose or docker stack deploy if compatible\nNo PR started yet\nWDYT ?\n. docker login just add the $HOME/.docker/config.json file with content user:password (base64 encoded) : \n{\n        \"auths\": {\n                \"registry.docker.recette.macif.fr\": {\n                        \"auth\": \"base64_encoded\"\n                }\n        }\n}\nThen docker client use this file to send auth info to docker api to pull images. Hi !\nI think the Status column can hold this information, like in \"docker ps\"\nUp 22 hours (healthy)\nUp 22 hours (starting)\nIf no healthcheck info present, there is no info\nUp 22 hours. The actual state give information about the status of the container itself\nThe healthcheck give information about the application\nMaybe just add a healthy (green) / starting (orange) / unhealthy (red) just to the right of running is the solution\nWDYT ?. Open this PR : #622 . Hi !\nI think we got same need here\nBut some things have change since 2017\nHere our use case:\nWe got 15+ swarm clusters (from 3 to 6 nodes)\nWe deployed portainer agent in each\nWe have a central portainer instance, and add the 15+ agents as endpoints\nWe then give users access to endpoints\nWe would like to share direct link to some views in portainer : \n- Cluster overview\n- Stack overview\n- Service overview\n- Service logs\n- etc...\nIdeally, the link need to select the endpoint, and get user to the target view\nIf user is not identified, the login page should redirect user to the view after login\nIf user have no access to the target endpoint, he can be redirected to the dashboard view\nI think the link should be human readable, as other tools could generate it.\nSomething like:\nhttp://demo.portainer.io/<endpoint_id>/services/poqw22wv436ryouurx1q9rgyx\nis a good start i think, we just have to ensure that we can get endpoint id from somewhere \ud83d\ude04 \nWhat is the logic for implementing something like that in the actual state of portainer ?\nThanx. > I believe that we need to update the global state management to introduce a new endpoint parameter in the URL and probably update the app init call (in case of refresh) to set the endpoint identifier from the URL in the EndpointProvider service if it is not set already.\nIn which files do you think I have to look ?\nI see the global portainer routing in https://github.com/portainer/portainer/blob/develop/app/portainer/__module.js\nSome urls are endpointless (/home, /account, /about, ...)\nHow can we manage that globally ?\nAnd I don't see how the app init call can access the url parameter too\n. Yeah, you have to expose port 2375 or 2376 (TLS), and then configure endpoints in portainer to access over TCP. I think it's complicated today to detect swarm cluster endpoint list (with access), based on existing API\nI think the easiest solution may be to define endpoints with new option, like that : \n[\n  {\n    \"Name\": \"docker1 - manager\",\n    \"URL\": \"tcp://docker1:2376\",\n    \"TLS\": true,\n    \"TLSCACert\": \"/certs/docker1/docker1.pem\",\n    \"TLSCert\": \"/certs/docker1/docker1.pem\",\n    \"TLSKey\": \"/certs/docker1/docker1.key\",\n    \"SwarmEndPoints\": [\n      \"docker1 - manager\",\n      \"docker2 - manager\",\n      \"docker3 - worker\",\n      \"docker4 - worker\"\n    ]\n  },\n  {\n    \"Name\": \"docker2 - manager\",\n    \"URL\": \"tcp://docker2:2376\",\n    \"TLS\": true,\n    \"TLSCACert\": \"/certs/docker2/docker2.pem\",\n    \"TLSCert\": \"/certs/docker2/docker2.pem\",\n    \"TLSKey\": \"/certs/docker2/docker2.key\",\n    \"SwarmEndPoints\": [\n      \"docker1 - manager\",\n      \"docker2 - manager\",\n      \"docker3 - worker\",\n      \"docker4 - worker\"\n    ]\n  },\n  {\n    \"Name\": \"docker3 - worker\",\n    \"URL\": \"tcp://docker3:2376\",\n    \"TLS\": true,\n    \"TLSCACert\": \"/certs/docker3/docker3.pem\",\n    \"TLSCert\": \"/certs/docker3/docker3.pem\",\n    \"TLSKey\": \"/certs/docker3/docker3.key\"\n  },\n  {\n    \"Name\": \"docker4 - worker\",\n    \"URL\": \"tcp://docker4:2376\",\n    \"TLS\": true,\n    \"TLSCACert\": \"/certs/docker4/docker1.pem\",\n    \"TLSCert\": \"/certs/docker4/docker1.pem\",\n    \"TLSKey\": \"/certs/docker4/docker1.key\"\n  },\n]\nOn swarm manager, we can get all linked endpoints toget aggregated view for containers/images/networks, and list them with a new column endpoint to see where object is defined. Like the mechanism of the endpoints.json file, it could be interesting if portainer can check for DNS-SRV records to auto discover endpoints\nDocker swarm by default embed a DNS server for communication between containers.\nFor example, if you have a global service named cadvisor, you can list all containers with : \n```\nnslookup tasks.cadvisor\nServer:    127.0.0.11\nAddress 1: 127.0.0.11\nName:      tasks.cadvisor\nAddress 1: 10.0.12.4 stack_cadvisor.lqjx3f5bh61o6htsept82b0s2.zhwfgb6yqowzjcxnvbpi2ab71.stack\nAddress 2: 10.0.12.19 stack_cadvisor.sia1o72aa0esh0r7cpz2zrop6.qjna1uansg2g3n4i04bqoivop.stack\n```\nPrometheus, for example, use that to discover targets dynamically\nI think it could be great if we can propose a stack (docker-compose v3) with portainer and a socat like global service\nIn one command, we got portainer auto-discovering our nodes in the swarm cluster\nInfo on prometheus : \nhttps://prometheus.io/blog/2015/06/01/advanced-service-discovery/#discovery-with-dns-srv-records. Hey\nI think that we need to ask a few questions on that before choosing a solution\nDoes portainer goal is to manage multiple swarm cluster ?\nDo we want an agent or agentless solution ?\nI think about 3 solutions :\n1) Agentless / Multi swarm\nThis solution does'nt need user to deploy agent on each node, but have a configuration cost\nUser have to add all nodes endpoints in portainer, so portainer need access to all endpoints too\nOnce all endpoints are knowned by portainer, a new configuration can linked them so that portainer know cluster composition\nWhen user query container list on a node, portainer can query all cluster nodes to have a global view of those items\n2) Agent / Multi swarm\nThis solution is the more complicated but also the more powerfull\nThe goal is to deploy 2 services by targeted swarm cluster\nA global agent (socat type), that expose docker node docker in the overlay network to the second service\nA new developped service that is expose securely like docker port 2376\nThis new service listen to portainer requests, forward to the right node and send back response\nIn portainer, the only thing we have to add is then an endpoint to that last service\nI think it's like that UCP work, it expose a new unique secure endpoint that docker client can talk to\nWhen in an UCP env you do docker ps, you see all containers in swarm\n3) Agent / Unique swarm\nThis solution is a simpliest version of 2\nWe need to deploy a global service (socat type) in the same overlay network as portainer\nPortainer can now discover nodes and talk to them\nBut this requires running portainer in the same managed swarm cluster\n. Option 2 is like building our own Orca service, it's huge work i think\nI verified how UCP does that, and that's what I think\nDocker cli is still compatible when talking with UCP, but you can manage all you swarm\nFor example you can list all containers, and decide to kill or exec on every node\nI think we need similar architecture as UCP, for a start at least equivalent to ucp-agent, ucp-proxy and ucp-manager\nSee https://docs.docker.com/datacenter/ucp/2.2/guides/architecture/#ucp-components-in-manager-nodes\nYou can see UCP api here too : https://docs.docker.com/datacenter/ucp/2.2/reference/api/#/. Can we do that by a button like Dupplicate/Recreate container\nThis action open the create container form, pre-filled with all values of the selected container\nPassing container id as a template_container param\nThen we can change some parameters\n- If we change name, this recreate a new container\n- If we don't change the name, a confirm alert us we are going to replace existing container with new one. @ncresswell \nI don't think we have to take care of that\nWhen user manually remove container and recreate it, a new non persistent volume is created (if not named)\nAnd in swarm mode, when you update a service, the same things happen\nHonestly, I don't know how to attach a newly created container to a old non-persistent volume from command line. I see\nWe can remove old container without -v option (or with a confirm like in remove action)\nBut I think it's complicated (impossible) to recreate a container with the same non-persistent (anonymous) volume\nThe only thing we can do for total transparency I think is get the path of the old volume (in /var/lib/docker/volumes) and mount it as a bind (named) volume in new container\nEdit : \nOr we can stop old container, and rename it, and start new one with --volume-from, and then remove old container, this should work. @deviantony Yeah you're right, I never used volumes like that, so I don't know they have an accessible identifier, but yeah it seems ok to work like that. I'm currently working on that\nPR should come in the week. Have you tried to add HTTP_PROXY and HTTPS_PROXY env var to portainer container ?\nWe used that to access external network like github and it works. I can't really help more, I think you should have same problem from your browser with same proxy. In fact, when you edit service, i think image should be a digest md5\nSo, I think you just have to replace this digest, : httpd:latest@verylongmd5chars by httpd:latest then click update. Oh didn't know about this issue...\nSo I comment here : \nThe idea is to provide into portainer a network visualizer of the host or the swarm cluster.\nI jsfiddle a static file with visjs to show what i have in mind, with a simple 2 stacks app.\nHere I show services, exposed ports, networks, and links between them :\nhttps://jsfiddle.net/1pkwe8j7/25/\nWDYT ?. I think docs are not complete.\nIf you don't have bower, you need to : \nnpm install -g bower\nand then\nnpm install && bower install --allow-root && grunt build && grunt run (or run-dev). For information to dev : \ndocker service create \\\n--limit-cpu 0.2 \\\n--limit-memory 64m \\\n--reserve-cpu 0.1 \\\n--reserve-memory 32m \\\n--name testlimit nginx\nIn docker API :\nPOST /v1.31/services/create\n{\n    \"EndpointSpec\": {\n        \"Mode\": \"vip\"\n    },\n    \"Labels\": {},\n    \"Mode\": {\n        \"Replicated\": {}\n    },\n    \"Name\": \"testlimit\",\n    \"TaskTemplate\": {\n        \"ContainerSpec\": {\n            \"DNSConfig\": {},\n            \"Image\": \"nginx:latest@sha256:788fa27763db6d69ad3444e8ba72f947df9e7e163bad7c1f5614f8fd27a311c3\"\n        },\n        \"ForceUpdate\": 0,\n        \"Placement\": {\n            \"Platforms\": [\n                {\n                    \"Architecture\": \"amd64\",\n                    \"OS\": \"linux\"\n                }\n            ]\n        },\n        \"Resources\": {\n            \"Limits\": {\n                \"MemoryBytes\": 67108864,\n                \"NanoCPUs\": 200000000\n            },\n            \"Reservations\": {\n                \"MemoryBytes\": 33554432,\n                \"NanoCPUs\": 100000000\n            }\n        }\n    }\n}\nThen in container inspect, it's more obscure, but in docker we trust : \ndocker inspect testlimit.1.881azuqbn46syzwmsqq1xfvka\n[\n    {\n        ...\n        \"HostConfig\": {\n            ...\n            \"ShmSize\": 67108864,\n            \"CpuShares\": 0,\n            \"Memory\": 67108864,\n            \"NanoCpus\": 0,\n            \"CpuPeriod\": 100000,\n            \"CpuQuota\": 20000,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"MemoryReservation\": 0,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            ...\n        },\n      ...\n    }\n]. Yes I know, it's a \"just to see how it works\". In fact, there is 2 endpoints type : swarm_mode and standalone_docker\nFor me, portainer have to manage the 2 types\n1)\nWe could add standalone endpoints, on every docker (every version, swarm mode or not)\nThose endpoints show only informations about containers/images/networks of the docker engine itself\n2)\nWe could add swarm mode endpoints on swarm managers\nThose endpoints show informations about stacks/services/tasks/nodes\nWe even can link the swarm endpoints to a array of docker endpoints (corresponding to each nodes) to aggregate data of containers/images/networks\nWDYT ?. @lavvy You talk about dynamic reverse proxy based on Host Header I think\nI think other products (free) do that really correctly\nI use traefik (https://github.com/containous/traefik) for example, a dynamic reverse proxy (written in go), creating rules when docker containers or services start\nI think portainer can maybe have an option to display those routes, but it has to be compatible with all solutions, so it's complicated IMHO. We can use a label to determine that.\nOn services/containers view, we can look for io.portainer.external.url \nIf label is present we propose a link to that value\nThe only thing user have to do is provide this label\nLately portainer service and container creation forms can propose a field for that too\nWDYT ?\n . Those services should be added in default templates\nUsers can choose to use them or not\nServices likes : \n- containous/traefik\n- docker/dockercloud-haproxy\n- jwilder/nginx-proxy\nAnd some others maybe. We have a /data volume on NFS without problem here, see mount opts from /proc/mounts : \ngrep nfs /proc/mounts\nhost:/share /share nfs rw,relatime,vers=3,rsize=65536,wsize=65536,namlen=255,soft,proto=tcp,timeo=600,retrans=2,sec=sys,mountaddr=W.X.Y.Z,mountvers=3,mountport=635,mountproto=udp,local_lock=none,addr=W.X.Y.Z 0 0\nFrom /etc/fstab : \nhost:/share      /share      nfs     defaults,rw,soft,intr   0 0. Seems like that : https://stackoverflow.com/questions/43914819/file-locks-support-in-docker-volumes-of-nfs4-shares\nBut no answers...\nAnd here : https://stackoverflow.com/questions/42265717/docker-mount-nfs-with-local-lock-all\nMaybe you can mount NFS forcing vers=3 option. I think it's complicated to implement, portainer just forward api calls to docker API\nSo it's not \"docker client\" options that we can add, but \"docker api\" fields\nAnd functions like \"docker --rm\" are only available on client, not on API. For capadd capdrop, it's link to #468 . Hi, I just tested your branch, and thanx for that work\nIs there an easy way to manage global services ?\nHere I got some :\ndocker_standalone-traefik   traefik:latest  global 2 / 0\n    docker_traefik          traefik:latest  global 2 / 0\nFor a global service, replica's number must be the active node's number. Ok I see what happened to me\nIn docker 1.13, this is result of /nodes :\n{\n        \"CreatedAt\": \"2017-01-17T14:43:34.963508632Z\",\n        \"Description\": {\n            \"Engine\": {\n                \"EngineVersion\": \"1.13.1\",\n                \"Labels\": {\n                    \"storage-driver\": \"overlay2\"\n                },\n                \"Plugins\": [\n                    {\n                        \"Name\": \"bridge\",\n                        \"Type\": \"Network\"\n                    },\n                    {\n                        \"Name\": \"host\",\n                        \"Type\": \"Network\"\n                    },\n                    {\n                        \"Name\": \"ipvlan\",\n                        \"Type\": \"Network\"\n                    },\n                    {\n                        \"Name\": \"macvlan\",\n                        \"Type\": \"Network\"\n                    },\n                    {\n                        \"Name\": \"null\",\n                        \"Type\": \"Network\"\n                    },\n                    {\n                        \"Name\": \"overlay\",\n                        \"Type\": \"Network\"\n                    },\n                    {\n                        \"Name\": \"local\",\n                        \"Type\": \"Volume\"\n                    }\n                ]\n            },\n            \"Hostname\": \"***********\",\n            \"Platform\": {\n                \"Architecture\": \"x86_64\",\n                \"OS\": \"linux\"\n            },\n            \"Resources\": {\n                \"MemoryBytes\": 33551663104,\n                \"NanoCPUs\": 4000000000\n            }\n        },\n        \"ID\": \"eht2e2a9wvkjhxam3xvxmiw8a\",\n        \"ManagerStatus\": {\n            \"Addr\": \"************:2377\",\n            \"Leader\": true,\n            \"Reachability\": \"reachable\"\n        },\n        \"Spec\": {\n            \"Availability\": \"active\",\n            \"Labels\": {\n                \"com.docker.ucp.SANs\": \"**************\"\n            },\n            \"Role\": \"manager\"\n        },\n        \"Status\": {\n            \"Addr\": \"************\",\n            \"State\": \"ready\"\n        },\n        \"UpdatedAt\": \"2017-02-27T10:04:47.740404037Z\",\n        \"Version\": {\n            \"Index\": 701326\n        }\n    }\nAs you can see, there is no membership: ['accepted'] flag. I think the only check we can do is this field : \nhttps://github.com/portainer/portainer/blob/develop/app/models/node.js#L28\nWhich have to be \"State\": \"ready\" on online nodes. In fact, there is 2 things\nI already got proxy on docker daemon, no problem with that\nHere I need to configure it for the build, inside the container, to get go dependecies\nBut I understand your point of view, no problem :D  . Looking again this PR, I think I'm not in the right direction\nI think portainer need to display only one status, and not a status and a health\nThe only one status can be one of the 4 already present : \n- stopped (red)\n- paused (orange)\n- created (blue)\n- running (green)\nIf container is running and health is available, status can be : \n- starting (orange)\n- healthy (green)\n- unhealthy (red)\nAll that on the existing column\nWDYT ?\n. OK, doing some changes\nWhen starting : \n\nWhen healthy : \n\n. Add health detail in container view, screenshots : \nStarting : \n\nHealthy : \n\nUnhealthy : \n\n. Related to #573. You can see here missings columns (IP and Ports) on containers view\nThe longest container name is the portainer service, in global mode, with :\n<stack_name>_<service_name>_<dockernode_id>_<unique_id>\n\n. Maybe it's OK with #614 (without sha). Yeah you're right\nI think it's related to #621 \n. Hi\nIn the docker vision (swarm mode), containers are now services, and group of services are now stacks\nI think portainer need to go into that direction to stay close to docker API. I think this line work for docker swarm, but not for swarm mode : https://github.com/portainer/portainer/blob/781dad3e17b9d60239220702730b3c45b81cb465/app/components/templates/templatesController.js#L107\nIn swarm mode, the networks are in scope \"swarm\" and not \"global\"\ndocker network ls\nNETWORK ID          NAME                 DRIVER              SCOPE\nfi976lj5kuyk        *****_default        overlay             swarm\nqv1mc61ly38r        attachable_*******   overlay             swarm\n4486ef92b108        bridge               bridge              local\n466f87bd3377        docker_gwbridge      bridge              local\nwyxsmj8lazyo        docker_*******       overlay             swarm\ng691zspq83m1        ******_default       overlay             swarm\n4d2abfd25946        host                 host                local\nxdig0eoh77o7        ingress              overlay             swarm\n884ec2394437        none                 null                local\n55qqit0h7gix        **********_default   overlay             swarm\ns45rlxn06jmj        *****_default        overlay             swarm\nz9sn7basa13g        *****_default        overlay             swarm\n7qmtulxw2162        *****_default        overlay             swarm. Yes but you can create a container from templates, and attach it to a swarm attachable network\nWhen you create a swarm overlay network, you can specify a attachable parameter\nThen you can create standalone containers attached to this network and communicate with swarm services. The docs here have to be update too : \nhttp://portainer.readthedocs.io/en/latest/templates.html. For my case it's useless, since I need to set label values with user data (like env)\nSo I think we can work on stacks and stack templates and put some variables for all stack with compose-file. @liyaka for full debug information, you can strace portainer process like that : \nGet the portainer process id on docker host : \nps -ef | grep /portainer\n=> Column 2\nstrace -s 4096 -f -p <pid>\nYou'll see all system calls, like docker api GET requests and responses. OK I test that in docker dind\nActivating userns-remap cause container run in non root\nSo, for example, when I run portainer : \nps -ef | grep portainer\n  313 165536     0:00 /portainer\nThe problem is that portainer tried to access to docker by his socket, and his socket is root protected by default : \nls -l /var/run/docker.sock\nsrw-rw----    1 root     root             0 Mar 23 21:11 /var/run/docker.sock\nSo I think you have two choices : \n1) Set group access to socket to the group running your container (or add user group mapping to docker group maybe...)\n2) Access docker by tcp instead of socket, so : \ndocker run -d --name=portainer -p 5000:9000 --restart=always portainer/portainer:1.11.0 -H tcp://<ip_docker>:2375. @vielmetti\nIt means that portainer templates create standalone container docker run and not swarm mode services docker service create. Some screen shots : \nStacks summary : \n\nStack detail : \n\n. Add stack view for compose stack (started with docker-compose up -d)\nBased on containers labels\nThe modified stacks view with 2 types of stacks : \n\nThe new composeStack view for compose stack detail : \n\n. Still experimental in 17.04, waiting next release !. This will be available in 17.05 : \nhttps://github.com/moby/moby/pull/32462\nhttps://github.com/moby/moby/blob/17.05.x/CHANGELOG.md. I just rebase and test, I'm facing this issue\nhttps://github.com/moby/moby/pull/33006\nI think we need to wait stable 17.06 version to implement this feature. I rebase and test soon, and remove wip if ok. Okay seems to work well\nI let the WIP status for the 17.06 check\nI think the pretty print with node will be part of future feature\nYou can give it a try if you are on 17.06 node. Ok for me\nI've tested that Logs are not displayed on dockerd 17.05\nFeel free to test\nI remove the WIP. For your information : \nI reproduce this with\ndocker run -d nginx /plop\nhttp://portainer/api/docker/1/containers/68d334bbb4e98e1cdbb28048aba4ec21d03107a01ccf6b591a72d413b169fb36/json\n{\n    ...\n    \"State\": {\n        \"Dead\": false,\n        \"Error\": \"oci runtime error: container_linux.go:247: starting container process caused \\\"exec: \\\\\\\"/plop\\\\\\\": stat /plop: no such file or directory\\\"\\n\",\n        \"ExitCode\": 127,\n        \"FinishedAt\": \"0001-01-01T00:00:00Z\",\n        \"OOMKilled\": false,\n        \"Paused\": false,\n        \"Pid\": 0,\n        \"Restarting\": false,\n        \"Running\": false,\n        \"StartedAt\": \"0001-01-01T00:00:00Z\",\n        \"Status\": \"created\"\n    }\n}. Yeah, docker client has this output for a container in that state : \ndocker ps -af name=youthful_kowalevski\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n008e6d077389        nginx               \"/plop\"             5 minutes ago       Created                                 youthful_kowalevski\nWe can add the \"created\" timestamp maybe in container detail view maybe ?\n\"Created\": \"2017-03-24T09:34:42.503996084Z\",. Use access control is really new (1.12.0)\nI think we have to implement groups and role base access before implementing external auth. @nesimtunc \nAdd something like : \nportainer:\n  image: portainer/portainer\n  command: --no-analytics\n  ports:\n    - 127.0.0.1:9000:9000 \n  volumes:\n    - /var/run/docker.sock:/var/run/docker.sock. We can display in tooltip tasks detail (globalStatus object) like that : \npreparing: 2\nstarting: 3\nrunning: 1\nexplaining the \"partially running\". I add tooltip for \"partially running\" : \n\nI think if status is not running, replicas count (on the right) should't be 10/10\nI think portainer look for tasks desired state instead of tasks real state for the first number\nWill open issue for that soon I think. I pushed some commits\nSimplifying logic and code\nShould we update the Service detail view too, with a link in \"Published Ports\" section ?. I think @dimitrovs is talking about this : \nhttps://docs.docker.com/engine/reference/run/#overriding-dockerfile-image-defaults\nand \nhttps://docs.docker.com/engine/reference/run/#expose-incoming-ports\nIt's the possibility to override some Dockerfile instructions\nIt's not about really expose a port on host, it's just add an exposed port to the container configuration\nSome tools (like traefik) read those exposed port (which are not really exposed on host) for doing some tasks on\nRegarding on https://docs.docker.com/engine/api/v1.26/#operation/ContainerCreate\nPortainer allow the \"-p\" and \"-P\" of docker run, with the\ncontainerConfig.HostConfig.PortBindings\n, but I think no option for \"--expose=[]\" yet\ncontainerConfig.ExposedPorts. @AHumanPerson You just have to update your patch-1 branch (https://github.com/AHumanPerson/portainer/tree/patch-1)\nOr do a patch-2 yeah. Just tested, cannot reproduce this...\nI think it's related to DNS resolution or something behind ingress network\nCan you start a nginx service (docker service create), log into container (docker exec -it  /bin/bash), and ping docker-swarm-node, to see if resolution works ?. I think it's related to https://github.com/portainer/portainer/blob/develop/app/components/createContainer/createContainerController.js#L9\nDocker will allways try to pull image before starting container. Yeah I know this script, it take about 30 sec on our env (32 services swarm mode)\nI think it must be run in background with a \"pending\" status, and then data store somewhere\nWe can't get live information of that. Working on clair recently, and I think it can be easily coupled to the upcomming registry management feature\nIdea is the ability to add a clair api url in portainer\nClair api only store and work with layer sha, not images or tags\nSo we have to link that to image history feature or registry browsing feature, which can list layers of images\nIf a report is available for a layer, we can then display it in the corresponding portainer view\nPortainer can act as a reverse proxy to clair api\nFor information, Vmware Harbor integrates clair natively. Yeah I think it can be useful, but it have to run in background, cause it can take long time !\nHere we have a docker system prune -fa once a day set by crontab. Yeah : \n```\ndocker run --help\nUsage:  docker run [OPTIONS] IMAGE [COMMAND] [ARG...]\n```\nOptions like -v are before image name\nSo you can do : \ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nHave you find this command in docs ?. I think this work can be done (in the future) by using templates based on docker-compose v3 files, and docker stack deploy similar command\nI work on that feature on PR #695 for the moment\nBut yeah, definitely need that !. This modal have to be in 2 views \n- service detail (Delete this service)\n- services list (multiple select and Remove). Oh I see 2 things\n- \"Service detail\" view has changed, see #453 : The exposed port in this view is no present anymore...\n- I push code to see this information in \"services list\" view #690, but have a bug if automatic port is selected, I can fix that quickly\nI opened issue for the services view : #739. By default portainer store data in /data, I think you have to mkdir /data before, or use another directory\nSee https://portainer.readthedocs.io/en/stable/configuration.html#available-flags. What is the \"little difference\" between the two inspect command (with command line, and with portainer) ?\nI think the key is here !. I worked on a PR of a stack view here #668 \nThis stack view list docker-compose projects (containers) and stack deploy projects (services) on same stack view\nSee screenshots on https://github.com/portainer/portainer/pull/668#issuecomment-292024812. Yeah the certificate provided to your docker engine has a list of SAN\nPortainer have to join it with one of this names\nIf this option is impemented, portainer have to set InsecureSkipVerify to true when proxying to docker endpoints : \nEx:\ntr := &http.Transport{\n  TLSClientConfig: &tls.Config{InsecureSkipVerify: true},\n}. I saw two problems for that : \n- It's impossible if we use a socket connection to know IP of endpoint\n- The endpoint can have multiple networks (and multiple IP), so portainer join endpoint with different IP than the client (browser)\nHow can we handle those cases ?. I think it would be nice if we can choose what to rebuild\nLike : \n- grunt build-app to rebuild the angular app\n- grunt build-api to rebuild the go binary\n- grunt build have to rebuild all. To be clear, you're talking about the -v option of docker rm ?\nhttps://docs.docker.com/engine/reference/commandline/rm/#remove-a-container-and-its-volumes. Yeah I comment #461 and close here. With confirmDeletion, the button is \"Delete\", So I change message too. OK, this will change the modal for remove service and remove user too.\nDo you want me to change the associated messages too ?\nSee : https://github.com/portainer/portainer/search?utf8=%E2%9C%93&q=confirmDeletion&type=. Done. @JF1297\nI don't know if this need to be implemented, the only use case I see has an easy workaround : \nYou can set command in templates to something that never finished, I usually use : \ntail -F /etc/passwd\nThen your container stay alive\nAnd you can get console via portainer if needed. Docker cli run do many things : \nif -d : create container without AttachStdin\nif -i : exec in container redirecting stdin and stdout\nif -t : exec in container allocating a tty\nFor the moment portainer launch container with : \n- create (openstdin: false / tty: false)\n- start\nWe can try to create with openstdin and tty, then start, I don't know how what response docker api send\n. OK, but there is no correpondance of i and t on docker api, these features are docker client only\nWe have to found the right api call. Yes --disable-tls should be present\nI think many users have dynamic https reverse proxy in front, with http traffic behind. This could be something like that : \n\n. With css3 switch : \n\nBut the tooltip doesn't work in that modal :/. yeah this flag remove the non-named volumes AND the default volumes\nImages can have default volumes (VOLUME in dockerfile)\n-v remove those volumes too (if not bind/named)\nThe non-named volumes are usually stored on /var/lib/docker/volumes\nThey are purge by docker system prune if no containers are using them. Re-aligned Modal : \n\n. Yeah same here\nMaybe this log should be print only if error occured, or in debug mode. Yeah the only unique identifier to image is the sha so href link must point to that\nIn order to hide this useless column, the question is : \nCan we place href link on tags column with a \"No tag\" if there is no tag ?\nOr a href link on the whole line ?\n. Hi\nIt's #597 . This have been implemented by #1163 \nIt should be present in portainer >= 14.2. Ok for some functional issue\nCan you retest the docker-compose issue with these changes ?\nHave to get some time for refactoring code (ContainerHelper/Chaining). OK Ownership is good now\nYou can review but see my comment on the container network\nI haven't test IPv6 addr as I have no idea how it works \ud83d\ude04 . For the networks bug, it's expected cause we can't create a container with multiple networks\nSee https://github.com/moby/moby/issues/29265#issuecomment-265909198\nIn fact, docker compose create container and attach networks in second step\nI think we have to disable container recreate/update if we saw more thant 1 network, no ?\nCause we have same problem on Duplicate/Edit mode, only the first network is reattach. > Missing thing: we need to display a message on the top of the container-creation view saying 'This container is connected to multiple networks, only one network will be kept at creation time\".\nI think we need to display this message in the recreate message too, as it recreate only with one network.... Yeah i'll look that soon, seems to be linked to the CMD parser\nMaybe with an image with entry point but without CMD. @fourbytes \nOK resolved by https://github.com/portainer/portainer/pull/855/commits/20e0a2b238f668a4bfa7048154b1092cd0ed2cf5\nYou could test soon when pr image is rebuilt. @liamcottam \nI found the problem in the Duplicate/Edit view, forgot to test with an IP\nResolved by https://github.com/portainer/portainer/pull/855/commits/45d24a41bcfb4919014320946e3971406c19ade4\nWith the Recreate button, there is no problem for the HostIp I think. @theit8514 \nCan you tell me more about your issues ?\nFor the cmd one, can you give more information about the image source ? And about the Dockerfile you use ? I can't reproduce for now\nAnd for the bind one, you say that the duplicate screen seems good but the bind volume doesn't occur ? And only sometimes ? Need more info please\n@ncresswell \nI push https://github.com/portainer/portainer/pull/855/commits/55058f5201874158e6da62db814b7239d23a4d9c, adding a modal for recreate button, and a message on top of createContainer when you duplicate/edit one\nIs that OK for you ?. @deviantony\nFor the CMD, even if we store data in array all long, we have to display it as a string in the view, and transform it to array when user click, so for me it's not a priority to transform that\nI understand the problem with the Dockerfile\nIf you set CMD like that :\nCMD /my/command \"myparam with space\"\ndocker build set CMD to \n[\"sh\",\"-c,\",\"/my/command \\\"myparam with space\\\"\"]\nI usually use CMD with array form, so miss in my tests\nI think if CMD was\nCMD [\"/usr/local/bin/docker-gen\", \"-watch\", \"-notify\", \"/bin/bash /app/cli53routes.sh\", \"/app/cli53routes.tmpl\", \"/app/cli53routes.sh\"]\nIt will be OK\nBut I have to found solution for that.... Yeah huge work ! Thanx to you to finish it. \ud83d\udc4d . Yeah\nIt looks like a SE Linux issue\nCheck rights og binded volume and tryp to mount it with :Z option maybe\nThere is an issue on portainer to add :Z : #853 . We can use system/df call to get info on what is reclaimable I think, but it's maybe complicated\ndocker system df display a summary of that\nIt's coded here for example : \nhttps://github.com/docker/cli/blob/6686ada6a4cf4e872af4d9bf3f61c387be934d87/cli/command/formatter/disk_usage.go#L216\nhttps://github.com/docker/cli/blob/6686ada6a4cf4e872af4d9bf3f61c387be934d87/cli/command/system/df.go. @tbcashy It looks like you go a DNS resolution problem in your containers\nI never used static IP for my container, can you try without settings --ip \nHave you got other running containers accessing external ressources ?. Maybe a DNS issue there is a dns flag for docker run no ?. There a WIP PR here : #855. We use this template as a base for our swarm\nhttps://github.com/bvis/docker-prometheus-swarm\nIt's based on : \n- cadvisor on each node\n- node-exporter on each node\n- stats on docker daemon (--metrics)\n- prometheus to get all theses stats in one place\n- grafana for graphs\n- alert manager\nI think the new swarm event feature can be useful to get real time data on services health. I image a pluggable solution for that\nMy use case : \nWe already have a monitoring solution, based on cadvisor/node_exporter/prometheus.\nSo we got a prometheus with all metrics data.\nI want to be able to tell portainer that my stats are here. A new settings could be implemented to provide a prometheus uri, with some options, like if cadvisor or node_exporter metrics are present\nWith this config, portainer can grab data from prometheus and display that in protainer interface, such as : \n- Node metrics (from node_exporter)\n- Containers/Services/Stacks metrics (from cadvisor)\n- Swarm metrics (from experimental dockerd metrics)\nI imagine that once activated, this plugin display data in multiple existing views (swarm/containers/services) and also in a refactor global stats view (maybe ?)\nIf this is a plugin, we can imagine that monitoring backend can be what user want (prometheus/influxdb/...), user just have to provide needed configuration to join backend and grab data\nWDYT ?. I think this will be related to the future stack templates (docker-compose files)\nIt's really good to store all templates in git repo\nThis is present in docker-compose-ui project for example\nhttps://github.com/francescou/docker-compose-ui#load-projects-from-a-git-repository-experimental. The first error is maybe linked to these line : \nversion: '3.2'\nI think yaml require double quotes here\nversion: \"3.2\"\nThe same error append with docker-compose command line I think. No, at the moment only deploymnt with \"docker-compose up\" is supported, but libcompose support version 3 too\nHere we have only compose in v3 format, and we deploy sometimes with docker-compose and sometimes with docker stack deploy\nI think if you try to deploy a version: \"3\" compose in this PR, it should work. You can follow docs here for that : https://portainer.readthedocs.io/en/stable/contribute.html. I think docker container create API doesn't support cpu reservation.\nHowever, cpu limit, mem limit and mem reservation are here\nFor dev : \ndocker create --name testlimit --cpus=0.5 --memory=64m --memory-reservation=32m nginx\nIn docker API :\nPOST /v1.31/containers/create?name=testlimit\n{\n    \"AttachStderr\": false,\n    \"AttachStdin\": false,\n    \"AttachStdout\": false,\n    \"Cmd\": null,\n    \"Domainname\": \"\",\n    \"Entrypoint\": null,\n    \"Env\": [],\n    \"HostConfig\": {\n        \"AutoRemove\": false,\n        \"Binds\": null,\n        \"BlkioDeviceReadBps\": null,\n        \"BlkioDeviceReadIOps\": null,\n        \"BlkioDeviceWriteBps\": null,\n        \"BlkioDeviceWriteIOps\": null,\n        \"BlkioWeight\": 0,\n        \"BlkioWeightDevice\": [],\n        \"CapAdd\": null,\n        \"CapDrop\": null,\n        \"Cgroup\": \"\",\n        \"CgroupParent\": \"\",\n        \"ConsoleSize\": [\n            0,\n            0\n        ],\n        \"ContainerIDFile\": \"\",\n        \"CpuCount\": 0,\n        \"CpuPercent\": 0,\n        \"CpuPeriod\": 0,\n        \"CpuQuota\": 0,\n        \"CpuRealtimePeriod\": 0,\n        \"CpuRealtimeRuntime\": 0,\n        \"CpuShares\": 0,\n        \"CpusetCpus\": \"\",\n        \"CpusetMems\": \"\",\n        \"DeviceCgroupRules\": null,\n        \"Devices\": [],\n        \"DiskQuota\": 0,\n        \"Dns\": [],\n        \"DnsOptions\": [],\n        \"DnsSearch\": [],\n        \"ExtraHosts\": null,\n        \"GroupAdd\": null,\n        \"IOMaximumBandwidth\": 0,\n        \"IOMaximumIOps\": 0,\n        \"IpcMode\": \"\",\n        \"Isolation\": \"\",\n        \"KernelMemory\": 0,\n        \"Links\": null,\n        \"LogConfig\": {\n            \"Config\": {},\n            \"Type\": \"\"\n        },\n        \"Memory\": 67108864,\n        \"MemoryReservation\": 33554432,\n        \"MemorySwap\": 0,\n        \"MemorySwappiness\": -1,\n        \"NanoCpus\": 500000000,\n        \"NetworkMode\": \"default\",\n        \"OomKillDisable\": false,\n        \"OomScoreAdj\": 0,\n        \"PidMode\": \"\",\n        \"PidsLimit\": 0,\n        \"PortBindings\": {},\n        \"Privileged\": false,\n        \"PublishAllPorts\": false,\n        \"ReadonlyRootfs\": false,\n        \"RestartPolicy\": {\n            \"MaximumRetryCount\": 0,\n            \"Name\": \"no\"\n        },\n        \"SecurityOpt\": null,\n        \"ShmSize\": 0,\n        \"UTSMode\": \"\",\n        \"Ulimits\": null,\n        \"UsernsMode\": \"\",\n        \"VolumeDriver\": \"\",\n        \"VolumesFrom\": null\n    },\n    \"Hostname\": \"\",\n    \"Image\": \"nginx\",\n    \"Labels\": {},\n    \"NetworkingConfig\": {\n        \"EndpointsConfig\": {}\n    },\n    \"OnBuild\": null,\n    \"OpenStdin\": false,\n    \"StdinOnce\": false,\n    \"Tty\": false,\n    \"User\": \"\",\n    \"Volumes\": {},\n    \"WorkingDir\": \"\"\n}. The --cpus flag seems to be introduced in API v1.25\nBefore that, you have to do it with --cpu-quota and --cpu-period\nI think we have to enable cpu limit feature only for +1.25 => docker 1.13. @sylvainmouquet\nThere is a docker limit to service name yes\nIn my env i got some dynamic services with dynamic names\nI found a limit around 64 chars. Yeah we got same problem here, we have to found a logo that match both \ud83d\ude04 . Will test that this week. Hey you just have to set environment variables to container :\ndocker run .... -e http_proxy=http://user:pass@myproxy.org -e https_proxy=http://user:pass@myproxy.org -e no_proxy=my.org ...... Hey\nLooking at the trace, it seems like it's related to your volume driver.\nAny specific configuration for that ?\nI don't think it can be related to portainer, have you got same problem with other image (same volume cdriver configuration) ?. @blackholegalaxy \nYou can set log-driver and log-opt globally on your dockerd configuration\nSee https://docs.docker.com/engine/reference/commandline/dockerd/#options\nAll created containers by this daemon heritates the configuration\nHere we use the default json-file driver, but we set opts to keep only few files and rotate every 20 Mo log. Linked to Registry no ?\nIf we recreate a container (from a non dockerhub registry) and if this registry is not known to portainer ?. @msudak\nAs a workaroud I think you can add the registry to portainer (Registries menu) with these infos :\nName : Asia GCR\nURL : asia.gcr.io\nThen when in Duplicate/Edit view, verify that the image and registry are ok before pressing \"Start container\". > It's not really a fix as we cannot create a container from an unknow registry using the current registry management implementation in Portainer\nI think you can\nIn my tests, I do that for example when creating a container : \nRegistry : Let default dockerhub\nImage: set full path with registry (quay.io/coreos/etcd for example). So I think the fix can be : \nIf we cannot found the registry in portainer, we let Dockerhub and put full path in image text input. Can the client should display the view (without waiting response from df) and update it only on df response ? In that case, we can just set a timeout of 5/10 sec on the df call\nIndeed, no df info will be shown, but the images view will work like before the df feature\nFor information, I got this pb too, with many volumes on NFS (df in cli take about 5 minutes). If we have a dropbox for memory in MB or GB, how can we display that if user have created a container with a non round MB value (like 54,57 MB) ?. Is something like that seems to be OK for the UX ?\n\n. OK I think you can review it\nI'm waiting information on textual info too (now in portainer tooltips). OK for all, just see my comment for col-sm-1. There is an issue about this unclear doc : https://github.com/moby/moby/issues/30222\nThe best documentation on this is probably the associated blog post (but it talks only for containers options, not services) : https://blog.docker.com/2017/01/cpu-management-docker-1-13/\nWe used services cpu limit/reservation here without any pb\nJust to be clear, this what really happen : \nCpu reservation for containers\nBefore docker 1.12, we have 4 options to manage that : \n--cpu-period\n--cpu-quota\n--cpuset-cpus\n--cpu-shares\nIt was too complicated for user to understand that, so in docker 1.13, they introduced the --cpus options\nFrom : https://docs.docker.com/engine/admin/resource_constraints\n\nIf you have 1 CPU, each of the following commands will guarantee the container at most 50% of the CPU every second.\nDocker 1.13 and higher:\ndocker run -it --cpus=\".5\" ubuntu /bin/bash\nDocker 1.12 and lower:\n$ docker run -it --cpu-period=100000 --cpu-quota=50000 ubuntu /bin/bash```\n\nNow for services (swarm mode 1.13 +)\nIn swarm-mode after 1.13, we got the --cpu-limit and --cpu-reservation flags\nThis values are in CPUs (like the --cpus for containers) : 0.25 means 1/4 of 1 CPU\nThis limit/reservation occurs for the task, like for the memory reservation/limit\nIn API (service create/update swarm-mode)\nIn the API, the value is an Integer in NanoCPU, so 0.25 is equivalent to 250000000 in API or in docker inspect\nI think Portainer have to provide these flag in the more human format (the 0.25 CPU)\nDocker documentation are not very clear on that, but it works like that. OK I place cpu step to 0.25 with min=0 and max=32\nI add a min=0 to memory as well\nWhat can we do to better UX ?. Are you talking about a input of type=\"range\" ?\nI don't know how mobile devices can manage that.... OK I'll test that soon and keep it if it's good :D. Seems to work well, I code the createService view with the angularjs-slider without any problem\nBut service view is an other challenge. I think this lib doen't handle the ng-change attribute like we do before\nIf you can have a look, help appreciated\nThanx. It should be OK now, I just rebase and cherry pick your two commits. I think the restart policy is not implemented for services cause swarm orchestrator do the job. You just have to define the replicas and the constraints, and swarm take care of that.\nYou can try to run a nginx service with one replica, then  docker rm -f {container}. Swarm will rerun the container to satisfy the one replica schedule rule. Oh yeah, default values are so good to me !\nFrom the docs : \n--restart-condition : Restart when condition is met (\u201cnone\u201d\\|\u201don-failure\u201d\\|\u201dany\u201d) (default \u201cany\u201d)\n--restart-delay : Delay between restart attempts (ns\\|us\\|ms\\|s\\|m\\|h) (default 5s)\n--restart-max-attempts : Maximum number of restarts before giving up\n--restart-window : Window used to evaluate the restart policy (ns\\|us\\|ms\\|s\\|m\\|h)\n. I reproduce here\nFor information, we got a\n{\nerr: \"Unauthorized\"\n}\nI get endpoint before and after setting publicUrl, and \"TLSSkipVerify\" appear to be true after and URL is tcp instead of unix \ud83d\ude1e \ncurl 'http://192.168.1.15:9000/api/endpoints' -H 'Accept-Encoding: gzip, deflate' -H 'Accept-Language: fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4' -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOjEsImV4cCI6MTUwNjA1OTU2NH0.Di-lmIFcUWSoG-hON6TvLzgTnVryz6x_KO_pC6JIuDE' -H 'Accept: application/json, text/plain, */*' -H 'Referer: http://192.168.1.15:9000/' -H 'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36' -H 'Connection: keep-alive' --compressed | python -m json.tool\n[\n    {\n        \"AuthorizedTeams\": [],\n        \"AuthorizedUsers\": [],\n        \"Id\": 1,\n        \"Name\": \"local\",\n        \"PublicURL\": \"\",\n        \"TLSConfig\": {\n            \"TLS\": false,\n            \"TLSSkipVerify\": false\n        },\n        \"URL\": \"unix:///var/run/docker.sock\"\n    }\n]\ncurl 'http://192.168.1.15:9000/api/endpoints' -H 'Accept-Encoding: gzip, deflate' -H 'Accept-Language: fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4' -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOjEsImV4cCI6MTUwNjA1OTU2NH0.Di-lmIFcUWSoG-hON6TvLzgTnVryz6x_KO_pC6JIuDE' -H 'Accept: application/json, text/plain, */*' -H 'Referer: http://192.168.1.15:9000/' -H 'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36' -H 'Connection: keep-alive' --compressed | python -m json.tool\n[\n    {\n        \"AuthorizedTeams\": [],\n        \"AuthorizedUsers\": [],\n        \"Id\": 1,\n        \"Name\": \"local\",\n        \"PublicURL\": \"192.168.1.15\",\n        \"TLSConfig\": {\n            \"TLS\": false,\n            \"TLSSkipVerify\": true\n        },\n        \"URL\": \"tcp:///var/run/docker.sock\"\n    }\n]. Hum I edit my comment, look at the URL after !\nI think it works with TCP endpoints, but not with the default local unix one. I push a memory slider version\nAt start I test with 5% total memory steps, but with a 32 GB node, steps are 1.6 GB that are too big for microservices\nAfter some tests, I choose to fix 256MB steps and force value in MB\nTell me what you think about it ?\nThanx. Yep will try that. Ok I add an input, tell me if it's ok for you\nI have some cleaning to do after that :D. Clean OK. Done. Thanks. After some tests, I think this is related to the local scope of the driver\nAnd it's totally not a portainer issue as I produce same thing with docker commands\nThe volume drivers are released under a scope value (local or global)\nThe local ones are designed to be used only with standalone containers (not swarm services)\nIf we attach a such volume to a swarm service, the tasks will use existing named volume if exists, or create a local default volume if it doesn't exists\nA workaround is to manually create volumes on all nodes before running the service, but i don't think portainer should do that...\nTo use docker volume plugins on swarm, we have to look for global drivers\nWhen we create a volume with a global driver, I think all nodes are aware of this new volume and how to mount it.\nI have to found a simple global driver to test that\n. This should be extended to all options : \ndocker service create --name redis \\\n    --secret source=ssh-key,target=ssh \\\n    --secret source=app-key,target=app,uid=1000,gid=1001,mode=0400 \\\n    redis:3.0.6. It's a Work in progress\nThe related PR is here : https://github.com/portainer/portainer/pull/1134. You have two things : \nAt container creation, you can specify : \n--stop-signal | SIGTERM | Signal to stop a container\n--stop-timeout | \u00a0 | API 1.25+\u00a0Timeout (in seconds) to stop a container\nThis is store in container config like other runtime options\nAPI equivalent are : \nhttps://docs.docker.com/engine/api/v1.30/#operation/ContainerCreate\nStopSignal\nStopTimeout\nAt container stop action, you can ovveride the default timeout to wait before killing it\nThat's what you saw in API. And you have equivalent behavior for services, tho this issue is about swarm mode services :D. >  we should now replace the content of the Apps Templates with stack templates when connected to a Swarm manager\nFor all these features, I think a swarm manager node is also a docker host, and container templates, as well as stack v2 deploy must be availble on swarm managers (and workers too)\nHere we have some stack on swarm mode, and some others in standalone on the same manager :smile: . Don't you add the swarmID for that purpose ?\nIf the two endpoints are not in same cluster, the SwarmID should be different\nSo the unicity should include that swarmID\nI think the unicity check here can be done on stack ID instead of stack name : \nhttps://github.com/portainer/portainer/blob/693f1319a471760b784b9f372513815781411031/api/http/handler/stack.go#L158-L163. Nice description, we should add default values too I think.\nFor text input, the value can be prefilled with that default.\nFor select, this will auto select the default value\nIf no default set, text input is empty, and select is the first item\nAnd what about the select values from external source ?\nMaybe in an other issue as an evolution :smile: . I vote for option and not default\nThe default behavior should be discussed in docker/cli repo. Maybe related to the --detach=false switch\nI think the latest client may be doesn't detach by default (to be tested)\nIf we don't care about result of deploy stack, we should add the flag to be sure what we are doing. Yep I'm having similar issues with other go from scratch image\nI have a tool (static go binary) that can be added, i think i can make it public\nOther solution is to add a check from portainer cmd itself, like /portainer --check-health. I init https://github.com/wtfcoderz/static-healthcheck with example. Seems OK to me. Oh yeah my bad, I just pushed a patch. When i tested it this morning (before revert) the health check give me 503 error, so my swarm service falls down\nI haven't enable https, so i think there is a pb without https too. Be careful with docker/swarm terms\ndocker node ps list tasks, not containers\nRelated to #461. For a unique multi arch, take a look at caddy with the browse or file manager modules\nThis is a static compiled go binary available on many plateforms : \n\nWe use it for serving static files or for browse directories on http (there is a json module for api-fy http file servers)\nSee https://github.com/abiosoft/caddy-docker for docker detail\nEdit: \nOh i think @ncresswell screenshots are from that plugin in fact : \nhttps://caddyserver.com/docs/http.filemanager\nhttps://henriquedias.com/filemanager/\n\ud83d\ude04 . Yeah, services like microbadger.com do that by searching sha on other images, but it's a bit complicated to implement that in portainer i think. I think it's a duplicate of #646 . I like the idea, but I think it has to be more large than that\nI think portainer is lacking an Ops view, which show : \n- Status of services / containers\n- HealthChecks if available\n- Image and versions and last update date\nIn fact, a monitoring view of what i got on my docker / swarm and what is the status\nA view that we can fullscreen will be awesome for Ops I think. I think we can retrieve info in HostConfig.LogConfig.Type of container\nAnd same for swarm services\nIn my test case, I got something like : \n\"HostConfig\": {\n            \"LogConfig\": {\n                \"Type\": \"redis-log-driver\",\n                \"Config\": {\n                    \"labels\": \"label1,label2\",\n                    \"redis-address\": \"redis:6379\",\n                    \"redis-list\": \"logstash\"\n                }\n            },\n.... I don't test in portainer, but I think so, as the log is unavailable by docker service logs command. To be tested, but we can set image with sha instead of name:tag\nIf it's a re-creation/duplication, the source container is still running, so the image should be present on host. Yes that's expected, cause you can remove image if not used by any running container\nBut when you are here, you can docker inspect that stopped container and get the sha image\nWith sha you can pull again image (registry keep by default all sha, even if you are tagging image with same tag\nThis causes us really storage problem with our on premise registry :smile: . But if image is not on a registry and is deleted, you can't recreate with same image, that's a fact. Yeah it's a known issue and a docker api limitation for the moment\nIt's like when you run docker ps on your manager node, you see only containers on that node\nYou can have a look at #461 for more details\nFor the moment you can't have a global view of all your containers, but you can add the worker endpoint to portainer, when switching to this endpoint, you will see worker containers. Nope no issue between traefik and portainer, i used both on many envs\nIf you got a 404 error, traefik have no rule matching you request, you can check traefik page (--web flag) on port 8080 by default to see if your rule is present. traefik 404 code is for a non matching rule\nIf traefik can't join container, it return a 5xx error (gateway timeout)\nCheck traefik logs with --debug. If you have multiple networks, be sure to provide traefik.docker.network label, with value of the common network where trafik and your target container are, Seems to be Proxy in your case\nBut if it's only that, you should have a 5xx error. Traefik read only labels, portainer place labels on the docker standard, so it should work. You can have more information by enabling --debug on traefik and tail the logs while you refresh 404 page, traefik should say that the rule is not present, maybe it say why. In last resort you can strace traefik process to show system calls like raw data of what it received and what it try to do with. Just add the --debug switch in command line, next to --docker, see traefik --help if needed. You hardcoded a http request, but most registries are behind https\nThe problem is that we don't specify protocol when adding a repo\nI don't kwow how docker request registry, but we have to do the same here. Other solution is to add a new field to Registry, like a endpoint API, it should be by default https://, but can be override if needed\nYou can have a registry located at myregistry.mydomain.com from your docker host, but the same registry may be available at internal-url.local from portainer. We need this feature for the registry browsing WIP\nI think we can check like you say : \n\nDocker creates all possible combinations of the endpoint, prefer https over http and v2 over v1.\n\nBut we have to store that data in registry object, so that browse module can use it\nWDYT ?\n/cc @deviantony . @asasmoyo \nAre you yet on this PR ?\nI need it for the remaining work on registry management\nIf you don't have time, i can take that too\nThanx. Yes I think so, and we have to store these two informations (protocol and version) in Registry object\nhttps://github.com/portainer/portainer/blob/develop/api/portainer.go#L149-L158\nSo that I can access it later\n/cc @deviantony . > Regarding the auth check, do all docker registry support basic auth? If so, it would be simple to check the authentication as well\nIt's not so easy !\nDocker registry can be configured with basic auth, but it can be configured to delegate auth to a third party service. In that case, the workflow is : \n- You call the registry api uri\n- Registry send you a 401 response with information in header on where and how to auth\n- Then you make request to auth server, giving you an access token\n- You use this token (by sending header) to registry. I just tested that and i'm stuck\nI think i have a self signed https registry\nSo we have to tell portainer that certificate is valid\nHow can we do that ?. OK with tlsskipverify\nThe good way to do that is to find where to put certif on portainer container to allow https request to this URL. If we don't find how, we can add an option when adding a registry to accept non valid certificate too\nWe have to handle this error to print a \"Unable to verify certificate\" message instead of \"Registry url invalid\". The pull action is done by docker daemon, not by portainer\nIf the registry had a bad certificate, user should add registry url to --insecure-registries daemon option\nSo, this is a dockerd issue, not a portainer one. Ok for me i just added my gitlab authenticated insecure registry !\nMaybe we can name option \"Insecure registry : true / false\" instead of \"TLS verification\" to keep same logic as docker daemon ?\nWhen activating TLS verification, i always got the \"Registry url invalid\" error, shouln't i get a \"Unable to validate registry server certificate\" error ?. I have a registry v2 configured to use gitlab as a auth server\nI have a selfsign cert on the registry, and the gitlab is in clear i think\nMaybe it's another error, i try to find more info soon. /cc @deviantony \nCan we tackle this one, as I need it to finish work on Registry Management\nThanx. It's certainly a browser cache issue.\nCan you try in a private window ? (incognito mode)\n. I try to rebase but have some problems\nCould you rebased feat56-registry-management to see real changes please ?\nI have problem on this files : \napp/portainer/views/registries/browse/registryBrowseController.js\napp/portainer/views/registries/tags/registryBrowseTagsController.js\nThe app won't start\nIf I change portainer.app by portainer.app1 and portainer.app2, portainer starts but, as expected, transitions won't work !\nThanx. Ok I got a working version now, waiting for review\nThanx. AFAIK, portainer doesn't yet support swarm management\nIf swarm leave/rm is implemented, i think swarm init/join should be too, no ?. Maybe related to #1124 . Portainer calls docker api\nDo you see 2 or 3 containers with docker network inspect bridge ?\nIf you see 2, portainer works as expected !. Portainer only support auth by login/password on registry\nThe rancher ecr credential project is created to enable this feature on rancher, by periodically update credentials\nIf you want to use ecr images in portainer, we need to have similar behavior. The PUID and PGID environment variable are a linuxserver trick to run process inside container with same uid/gid from the host, to avoid chmodding volume contents\nPortainer is not a linuxserver image, so those variables have no effect\nLearn more about linuxserver capability here for PUID and PGID : https://github.com/linuxserver/docker-plex#user--group-identifiers. Thanx @doncicuto . To know if a new version is available, check the release page on github or dockerhub tags list\nhttps://github.com/portainer/portainer/releases\nhttps://hub.docker.com/r/portainer/portainer/tags\nThere is no update notification for the moment, so the solution is to recreate container, or update swarm service if swarm is enabled. Hi,\n--privileged option is for portainer in container\nIf you run portainer without docker, you don't need that\nTry just with\nsudo /opt/portainer/portainer -d /opt/portainer-data -p :9999\nIf you got any problems, describe them. Portainer embed a docker cli for this, and just lanch a docker stack deploy command\nAn other option was to implement all logic in portainer (create networks/secrets/volumes/...) but it was a huge work, so decision was to add a docker binary (it do that perfectly). I got a problem when deleting a repository, see https://github.com/docker/distribution/issues/2434. Hi all\nSome changes occured so i now don't have time to finish that i think\nIs someone keen to get it ?\nI'll try to help as i can if needed\n/cc @deviantony . Closing this as basing problem resolved in #1656 . > Cluster capacity info is not available when connected directly to a Swarm manager.\ndocker api on /nodes on a swarm manager list all nodes with CPU and RAM info : \njson\n[{\n    ...\n    \"Description\": {\n        \"Hostname\": \"ubuntu\",\n        \"Platform\": {\n            \"Architecture\": \"x86_64\",\n            \"OS\": \"linux\"\n        },\n        \"Resources\": {\n            \"NanoCPUs\": 2000000000,\n            \"MemoryBytes\": 4143595520\n        },\n        }\n    ...\n}]\nI think we can sum up cpu and ram of all nodes. As I know, the gitlab registry permit sub-domain in docker image names\nOn dockerhub, with your namespace myuser, you can use images like : \n- myuser/image1:latest\n- myuser/image2:v2\nOn Gitlab you can use up to 3 subdomains : \n- myuser/subdomain1/subdomain2/myimage:latest\nI think portainer image url parsing is based on dockerhub format\nDon't know if it's directly related to this issue.... Hi\nWe just migrated to 1.19.2 and, as expected, all our resources have migrated to admin only instead of public (we deploy apps outside of portainer)\nI look for a parameter to change this behavior (default to public)\nIs there a such parameter ?\nOur use of portainer is to have an only portainer instance managing many clusters\nAdmin may have access to all clusters, but users get access only to certain endpoints\nUsers accessing a endpoint have all access on that endpint, so public is fine\nAs a workaroud, i'll soon write a batch process to change admin ownership to public, so that newly deployed apps are set to public\nThanx. Yes it should be nice with that\nThe API allow me to be very efficient, I just code my batch in few minutes to get what I want\nSo it's fine for me for now, just waiting for labels \ud83d\ude03\nThanx. As a workaroud for the moment, our discover script use portainer API to check and add endpoints if necessary. This works well. OK thanx\nMaybe we can set our Load Balancer to do a https check, have to test that. Stats from 2 hours :\n\nSeems to be a 3 MB RAM used every 5 minutes. Portainer 1.19.1\nDocker: 18.06.1-ce\nOS: Container Linux by CoreOS 1855.4.0 (Rhyolite)\n. Ohh I missed that in my search !\nIt's certainly that, I'll upgrade soon\nThanx. It's seems to be OK in 1.19.2 thanx\nWe got another problem : https://github.com/portainer/portainer/pull/2137#issuecomment-426266794 :smile: . So,\nCan we do something like :\nndes: Node.query({filters: {Availability: ['active']}, {Status: ['ready']}}).$promise,\n??. So we need to do filter client side on portainer, not on the query (or remove filter waiting for better solution !). You mean admin ? \ud83d\ude04 . Done. Yeah I hesitate to do like that, no pb. If we always force, we have to take care if other functions call directly removeAction, cause it's now a forceRemoveAction. In the future, if we have another item calling the remove, function, we have to take care to call confirmRemoveAction, and not removeAction directly\nBut yeah, in the containers view, i use force=true in all cases, so we can do that here too. Yeah, that was the idea, but I can't send a empy value to api for this field\nI fall back to init URLPublish with '' for socket endpoints, and add condition fot htat in containers view\nIf you have an other solution, i take !. Unfortunatly not, there is another checkbox bootbox generate automatically, hidden by css\nIn my tests, sometimes I activate unintentionally that checkbox, so result can be : \n[\"1\",\"on\"] or [\"1\"]. We have to send 0 to api when false, and 1 when true\nApi will not understand true/false value. Yes it's a multi-choice checkbox, so result is a array with the values (selected)\nThe problem here is there is we have 2 boxes\n- One generated by bootbox, with value \"1\" (hidden by css)\n- One generated by portainer (switch) with value \"on\". Just tested, I add that because of the following scenario : \n- You list containers\n- You select 2 containers and remove\n- You choose to remove associated volumes\n- Container list refresh (but not page - so value of scope stay at true)\n- You select 2 containers and remove\n- You choose to not remove associated volumes\n=> Associated volumes are removed.... result is undefined if user click cancel\nResult is an empty array [] if user click remove without checkbox\nresult is [\"1\"] if user click remove with checkbox\nWe can check result.length === 1 too or result.length !== 0. Hum I don't think so, cause bootbox generate a checkbox with value (as string) like that : \n<input class=\"bootbox-input bootbox-input-checkbox\" type=\"checkbox\" value=\"1\">\nSo in result array, we have strings. In my tests, for a container named \"container\", the json return \"/container\" for name. Have to check !. OK found it, IP info not in same place when auto-attributed. With compose, got same issue\nOnce the IPv4 javascript error resolved, it's OK, so I think just javascript stopped and not fill the form. Resolved by https://github.com/portainer/portainer/pull/855/commits/441ba558140ab1a4ae1960c1755dbc0a37c800ab. See https://github.com/moby/moby/issues/7519\nAnd more recently https://github.com/moby/moby/issues/29997. Resolved by https://github.com/portainer/portainer/pull/855/commits/441ba558140ab1a4ae1960c1755dbc0a37c800ab. Just test it on ipv4 addr, it's OK\nSo I remove TODO https://github.com/portainer/portainer/pull/855/commits/383e70e22754e8a245184e0590396fcb6ef738f8. Have to play with users and teams struct, cause object have AccessLevel too, see https://github.com/portainer/portainer/pull/855/commits/6d9c1c99bb641a32d300557f78770d831e4ab8e4. OK : https://github.com/portainer/portainer/pull/855/commits/30ec5a9b0a65341abafbfd6f452075e14ce6b7e7. There are 8 bytes due to stream protocol, really no information on that but I found that https://docs.docker.com/engine/api/v1.30/#operation/ContainerAttach\n. No in my firsts tests, logs send node/service/tack id (156 chars) but in api v1.30, nothing, so I'll delete those comments. I have a pb when creating a container with an other container network, like that :\ndocker run -d --name alpine1 alpine tail -f /etc/passwd\ndocker run -d --name alpine2 --net container:alpine1 alpine tail -f /etc/passwd\nWhen we try to duplicate/edit alpine2, the networkMode is ok with container, but the select stay on \"select a container\" and alpine1 is not selected.\nAny idea ?. Thanx ! Explaining why it doesn't work. OK resolved by https://github.com/portainer/portainer/pull/855/commits/7fccd6cff026a91a7d70e9835bd8e8339d8a21e6. Yeah that's right, I can re-use configFromContainer for a part, but need to transform many values to match with the view. I have to do the reverse of all the prepareConfiguration function, so if we move that part out of controller, we need to move prepareConfiguration too no ?. Oh yeah :/\nI did that cause when you edit a container with public access, the form default to \"Admins Only\" (access control enable instead of disable). OK will try that. Oh ok miss that in my test, I'll add the check. Doesn't seems to work cause it's a directive\nI get well the RegistryViewModel Object, but can't auto select drop down menu\nI think we have to init it like you do with the AccessControl directive.... OK API accept regex so i change it to : \nContainer.query({ all: 1, filters: {name: ['^/' + $scope.config.name + '$'] }}).$promise. The data here is undefined for a new container, so default to access control enable\nBut the data is undefined too with a from container in public mode, and the form initialize with default access control enable (instead of disable). With select in col-sm-1, display is truncated or not present, see here : \nMemory res is \"2-2\"\nMemory limit is \"3-1\"\n\n. Oh yeah good catch, I'm on it. Need Help to understand something : \nHere newSecretTarget is always undefined, as I display it in console log\nIf i remove the div (line 11 & 14 => Target is always active), newSecretTarget is OK in console log\nSomebody can help me with that ?. We need to get the response headers here\nWe don't download layers, so we send HEAD request, and get content-length header\nSee https://github.com/portainer/portainer/pull/1482/files#diff-7b71727483ce8ff9ef617853d8964592R53. I thinks it's related to #1467 \nMaybe the way to go will be to add a new parameter protocol to Registry object\nWhen the validation occurs, this parameter is automatically setted\nThen, in this code, we use this parameter for the protocol. FYI : To pull an image, protocol must be _not present. I think this is needed for docker cause we transform data between docker api and portainer model\nHere angular use raw data from registry api\nWDYT ?. OK will do that soon. Retrieve all data is a bit tricky, cause we don't know how many pages are present. Docker registry api provide only a header with the next url, so we have to loop until we havn't got this header.\nI think I'll transform to a simple message for the moment. Agree\n  . Hum, cause we don't use data in the RegistryBlobs.head call \ud83d\ude04 \nI'll add that soon. Here : https://github.com/portainer/portainer/pull/1482/commits/2e5c3abb26c001501b50240da13c362b019bbcc4 \ud83d\ude04 . I don't understand this switch !\nYou have a valid registry URL only on 200 or 401 response. This is not possible to set a constant struct in golang:\nhttps://golang.org/ref/spec#Constants. I'm not sure, cause this specific error is not only send to client. It's used here\nif err := registryAuthAttempt(client, url, username, password); err == nil {\n                                return config.protocol, config.version, nil\n                        } else if err == portainer.ErrRegistryInvalidAuthCredentials || err == portainer.ErrRegistryInvalidServerCert {\n                                return \"\", \"\", err\n                        }\n                        continue\nWe have to stop that loop if we got that error, but not if it's another\nIt's not my code, it's from the other PR ;). It's for transfomration between the server request (r) and the new client request (req)\nRegarding doc, they have difference for URL and RequestURI fields\nhttps://golang.org/pkg/net/http/#Request. For basic auth :\nWww-Authenticate: Basic realm=\"Registry Realm\"\nFor bearer auth : \nWww-Authenticate: Bearer realm=\"http://192.168.1.15/jwt/auth\",service=\"container_registry\",scope=\"registry:catalog:*\". It just split and retrieve args of the auth header : \nWww-Authenticate: Bearer realm=\"http://192.168.1.15/jwt/auth\",service=\"container_registry\",scope=\"registry:catalog:*\"\nWe need to get all values, to call (for example) : \nhttp://192.168.1.15/jwt/auth?service=container_registry&scope=registry:catalog:*. The auth header will not be added to the query, so this will return probably a 4xx error\nTo test that we have to add registry with external auth (with good credentials)\nAnd then change password of the user. Woh just tested, we have a 401, so portainer think a forbidden error and disconnect user\nWe have to manage that\nWe have to catch that and send a 5xx error. No but I think we can use it client side to enable/disable the feature, as I think we only support browsing of v2 repository. The Portainer TLSConfig is designed to reflect the auth by tls (With cli cert, ca cert and cli key). I think it's a complicated struct for \"just\" a SkipVerify toggle for https connect, WDYT ?. Yeah that's an other solution, but i think we are more generally if we copy all and modify just the necessary. It allow us to add a header or whatever to original request (from the cli) and it will be copy to the target registry (like a proxy)\nI'll add some comments and refactor line order to be more clear on what code do, tell me what you thinkk. ",
    "29axe": "+1 for this feature. It would be nice to be able to push to docker hub. I always get this error: \"denied: requested access to the resource is denied\".\n. ",
    "rngadam": "default appears to be undocumented?\nhttps://portainer.readthedocs.io/en/1.13.6/templates.html#env. @deviantony sorry for the confusion. @deviantony I'm facing the same problem. My images are in a private repository but it can't find the container if it hasn't already been pull. I thought by default should pull from DockerHub? What is the value that should be in registry to get images from https://cloud.docker.com?\nConfusing because as a container there's an explicit option to always pull.\n\n. +1 for this - would like to embed our templates.json in our image of portainer. We don't want the publish it on a publically accessible URL and we don't want to have to run a separate nginx for this. being able to preload (overriding the templates in db) using --template-file would be nice..  Easier solution using a customized Docker\n```Dockerfile\nFROM portainer/portainer\nADD config/public/templates.json /public/templates.json\n```\nthen in settings:\n\nso no need for a separate webserver.\n. Thanks @deviantony . After some additional work, ended up using containers templates to fulfil the feature requests listed above so I don't think it's strictly needed.. Thanks for the tip Nigel. I might take a look at that later! although if I do that, maybe it is also as easy as using the API from within the app so I should look to see if I can change it.. ",
    "piotrmaslanka": "I am seeing this on my installation, will try to reproduce and report back.. ",
    "G07cha": "I'm not sure about other registries but for DockerHub it could be done using ImageSearch API call.. I wasn't able to retrieve an actual container count for images, it returns Containers: -1 for all images regardless if it's being used by any container or not. Could you please confirm that?. I guess dangling filter has different checks and doesn't really filter images based on their usage for containers.. I've submitted an issue about it to the moby/moby repository but for now, as a workaround, we could query containers and compare them to the images. This will complicate the code and increase network load so I'm not sure if we want to take this path.. An update on the issue stated that:\n\nThis looks like a documentation issue; the Containers count is only propagated for the /system/df endpoint\n\nIt means that we're not able to retrieve a count of clusters using an image from /images call.. That actually works properly but it doesn't support pagination though.. I like this idea, I'll play around with it and let you know if there will be any progress.. You can pull an image from \"Images\" section. Is there a specific reason to pull it from \"App Templates\"?. I guess #1295 can be closed as well.. I've played around with it for some time and I think I got the idea.\nCustom command:\n\nPredefined command:\n\nWhat do you think about this @deviantony?. The table could be pretty big depending on a number of containers, maybe we should put only total usage to the dashboard and create a subpage for containers tab with stats?. I guess it could be something like this:\n\nI'm isn't sure what which parameters should be displayed in the list though. Currently, we're able to receive memory, CPU(including per-CPU stats), PID, and network from stats call.. Also, it worth mentioning that as far as I know, ContainerStats provides stats only per running container, which means that if we have 10 containers displayed in the table we have to run 10 concurrent requests to the Docker's API.. This problem is already described in moby/moby#22052 but it doesn't seem like it going to be resolved anytime soon and plugin integration also won't solve an issue. Other solutions such as Prometheus or cAdvisor requires an additional container in each Docker's instance and overall works as standalone solutions, so I guess this feature might be out of Portainer's scope. Do you know any other possible solutions?. Speaking of \"Find a way to translate API text messages (such as error messages)\" I think we could add error codes for this purpose.. I have two solutions:\n1. Add ngPattern regular expression to check for the numbers and letters\n2. Add dropdown on the right from number input to select desired time format selection\n@deviantony, which solution will fit the most on your opinion? Maybe you have something else in mind?. Sure, I just wanted to know if you are ok with the PostCSS option.. @deviantony, thanks for your input, I've updated my PR, please check if it works for you!. I've updated form, now tooltip looks normal, one of the drawbacks of using a vertical form that I've noticed is that terminal window getting pushed down and a user is unable to scroll to it when the mouse cursor is in the terminal window. Probably we should collapse a form when a connection is active?. I've changed tooltip so it will be appended to the document's body from now on, this will ensure that it won't be affected by styles of a parent element. I've checked tooltips on other pages as well, it looks good for me.\nRegarding form collapsing, I think I'm going to hide all fields and leave only \"Disconnect\" button visible with a label \"Connected as %username%\" before it. What do you think about this option?. Done, please have a look:\nDisconnected:\n\nConnected:\n\nI've decided to separate \"Connect\" and \"Disconnect\" buttons so only available actions will be presented for user.. I think that in that case all applicable buttons should be enabled.. Also, I'm just curious what if we just move all frontend dependencies into index.html or a separate JSON file? It should be way easier to understand and maintain. . I'm trying to avoid excess complexity if it possible, on my opinion we can create a JSON file with following content:\njson\n{\n  \"dependencies\": [\n    \"bower_components/jquery/dist/jquery.min.js\",\n    \"bower_components/bootstrap/dist/js/bootstrap.min.js\",\n    \"bower_components/Chart.js/Chart.min.js\",\n    \"bower_components/lodash/dist/lodash.min.js\",\n    \"bower_components/splitargs/src/splitargs.js\",\n    \"bower_components/filesize/lib/filesize.min.js\",\n    \"bower_components/moment/min/moment.min.js\",\n    \"bower_components/xterm.js/dist/xterm.js\",\n    \"bower_components/bootbox.js/bootbox.js\",\n    \"bower_components/angular-multi-select/isteven-multi-select.js\",\n    \"bower_components/toastr/toastr.min.js\",\n  ]\n}\nand then require it in our gruntfile and use in tasks like so:\n```javascript\nvar deps = require('./config.json');\ngrunt.initConfig({\n  src: {\n    jsVendor: deps.dependencies\n  }\n});\n``. Well,vendor.yml` looks really simple and easy to read but I have few concerns:\n- Documentation will be required\n- We are probably going to maintain and extend it in future, which will take some time\n- Cases, when we need to switch between minified or regular files, are rare and usually, it's just a few of those files(also we could define them in JSON config separately)\nAlso, the main purpose of this PR was to reduce the verbosity of a gruntfile as I understood, but it introduces a new independent task which is, in my opinion, increases the complexity of the gruntfile.. There is nothing bad in using hardcoded paths for vendor files since predicting all possible cases will take a lot of time and code.. > I also added load-grunt-tasks (thanks @G07cha ). It works, but codeclimate seems not to like it. @deviantony can we ignore this warning?\nTo avoid this warning you have to initialize load-grunt-tasks outside of function's body and then call it in the main function:\n```\nvar loadGruntTasks = require('load-grunt-tasks');\nmodule.exports = function(grunt) {\n  loadGruntTasks(grunt);\n}. It also looks like in your example we're extracting all instructions from a Dockerfile to the command which isn't good for maintainability and I'm not sure if we'll bypass build process by doing that.\nAssets location change is required for mounting volumes because we cannot mount any folder as root to the container. We could move a whole application to the subfolder as described in your example but I wasn't sure if other files(data, certificates) still will be accessible by the application.. Sounds reasonable, I will move a resulting application to the /app directory tomorrow.\nI'm still concerned about new build command though, so I think it will be good to get @deviantony's feedback.. @deviantony I meant this command:\n\nThen, line 458 would be something like:\n\ndocker run --privileged -d \\\n           -p 9000:9000 \\\n           -w /portainer \\\n           -v $(pwd)/dist:/portainer \\\n           -v /tmp/portainer:/data \\\n           -v /var/run/docker.sock:/var/run/docker.sock \\\n           --name portainer \\\n           centurylink/ca-certs /portainer/portainer --no-analytics\nSee @1138-4EB's comment. @1138-4EB, @deviantony, thanks a lot for your suggestions, I've updated task and remove default path modification. Please have a look and let me know what do you think!. Are you talking about these tests?. @1138-4EB, I guess we could do it when your PR with a containerized build step will land. By the way, NodeJS has relatively simple installation process and supports all major platforms.\n@deviantony, I'm aware of that, I actually tried to fix them, but as you mentioned re-write is definitely required.. I've implemented changes that you've requested but I'm not sure about alignment, if I don't align to the right it doesn't good enough to me, what is your opinion on this?\nWithout alignment:\n\nWith alignment:\n\nAs a third option, we could use a monospaced font for ids so all labels will be aligned to one vertical line.. > What about just adding a margin-left with a low value (5/10px) instead of aligning right?\nThe margin will still keep tags in different horizontal position.\nWith monospaced font(and margin) it will be looking like this:\n\n. Indeed it looks good but I'm concerned with a practical benefit for a user. Monospaced fonts are considered harder to read. So apparently it's a question of good looking design or effective UX unless you have something else in mind.. Sure, is any other filters expected in future? I was thinking about providing a buttongroup with All/Used/Unused options similar to what is done in templates.. This is how it's looks like right now:\n\n. > Would the full version be viewed still after refreshing the page? I mean, 'folding' back can be removed, as long as it is not a 'permanent' decision.\nOn my opinion, it should be folded back on page refresh or revisiting container details.\n\nI wouldn't mind that approach, as long as the attribute is copiable.\n\nRegarding title attribute, that's a good point, for this case, we cannot use this attribute so I think the current implementation the most suitable for this purpose.\n\nShall we replace the fa-eye with fa-clipboard and never expand the shorted ID?\n\nGreat idea, I like it! Let's wait for @ncresswell and @deviantony opinions about it.\n\nNevertheless, I'd be glad to hear how would you tackle the varying width issue.\n\nYou can specify style=\"width: 100px;\" attribute for the first column because it's static content, note that 100px is an example value and should be adjusted according to the text presented in the first column.. It's not the case for a mobile and tablet devices though.. Yeah, I haven't included \"Created\" option in it, I'll fix it soon.. @deviantony, yeah, I've deleted my previous comment because I've also found that it's possible to do through ContainerCreate.HostConfig.Mounts, so I'll be looking into that.. I wasn't able to find much of existing solutions for Go because it's usually handled on balancer's level, the only package that I've found called defender, it's really small and supports only ban for a fixed time. If we need something more complex, I'd like to work on it.. Should we start with something basic as @trinode proposed or try to come up with more advanced behavior?. @deviantony, sure, just wanted to confirm that. Is raw response will be ok or it should be represented in a different manner?. Hi @1138-4EB, that's a great point! To determine which packages should be loaded load-grunt-tasks uses name patterns, by default it's ['grunt-*', '@*/grunt-*'](source), which matches with all required packages except for gruntify-eslint. \nSo by looking at documentation right now, I can see that we could define our own patterns instead, therefore, I could remove grunt.loadNpmTasks('gruntify-eslint') and instead add custom pattern to load-grunt-tasks configuration.. I've published the change, thanks again for pointing out this issue!. @deviantony, indeed, updated the PR.. Damn it! I knew there was something wrong, I meant enchantment of course :weary:. enhancement*\n\"Lightning doesn't strike twice\" they said \ud83d\ude06 . Speaking of the API, Docker's API supports grace period to be supplied in the query but I wasn't able to find a way to specify a signal to send to the container, although it's possible to predefine desired stop signal when creating a container.. Another option will be to handle stopping of the container by ourselves because it's possible to pass a signal through ContainerKill call but it obviously doesn't support any kind of delay.. @WTFKr0, yeah but we're not able to define stop signal dynamically and preserve timeout at the same time. Initially I was thinking that we could add simple dropdown to the \"Kill\" button like so:\n\nBut I've found that there are at least 30 named signals in Linux which is a lot for a dropdown.\nMaybe we can show a confirmation window beforehand where a user can type the desired signal to be sent?\n. Indeed, bridge is hard-coded in the config, shall we just pick MacAddress and other dependent properties from the first container's network, @deviantony?. Well, now I see that this is not exactly true but in createContainerController NetworkMode set to bridge and afterwards it could wary between bridge, nat and container(plus possible suffix) but afterwards it being used to pick network by it's name which potentially could be anything.. @deviantony, thanks for the reply, in this case, can we just take the first network on the list when editing container, as I mentioned earlier?. No worries, I'm glad that you got time to take a look at it. You are right about the message, I've removed it.. Is there any issue already to which this PR is related to?. Alright, so if this feature works only for SELinux maybe we can check if OS is SELinux using SystemInfo call before displaying additional UI elements(just to avoid inputs that is not going to affect anything).. But is it affects anything in other environments? If it's not I don't see a point of having it for places where it doesn't affect anything.. If it's effective in most of OS-es then it's good to me! Thanks for the explanation, @Trudels!. Ok, I thought about more \"central\" layout in this case, please have a look and let me know what do you think:\n\n. It looks kinda weird with current size of tooltip so we should either change a text or size of a tooltip\n\n. Even shortened text still looks weird to me because tooltip width is getting reduced according to the size of a column.\nWith fullsize-tooltip:\n\nWithout fullsize-tooltip:\n\nIf you think this is ok, I could remove the class.. You can use ngClass to assign a corresponding class:\nhtml\n<span ng-show=\"sortType === 'Status'\" class=\"glyphicon\" ng-class=\"{\n    'glyphicon-chevron-down': !sortReverse,\n    'glyphicon-chevron-up': sortReverse\n}\">. Is it possible to use portainerTooltip here instead? This will reduce the amount of code to refactor if we want to change something across all tooltips or move to another tooltip.. Agree, but if in future \"partially running\" status would be able to retrieve a list of running replicas it would come in handy to display that count.. Oh, my bad, in that case, it's really unnessesary to supply each line with a tooltip.. I guess we could make use of load-grunt-tasks package to simplify dependency injection.. Sure, if you have npm and node installed you need to run npm i -D load-grunt-tasks and it should appear in your \"devDependencies\" section of package.json. Otherwise, you can add \"load-grunt-tasks\": \"^3.5.2\" entry to \"devDependencies\".. This is production build task, therefore it should be using minified files here.. jQuery should be placed before Boostrap(and for regular versions too). Let's set a default value to reg to avoid possible confusion.. I think some documentation for this task would be great(mainly to specify how values will be mapped).. I've actually tested it with run-dev task and as far as I checked the only jquery's position was a problem.. That's enough, just note that following array:\nyaml\njs:\n   - path/to/vendor.js\nWill be available in src.jsVendor property.. Yeah, I'm going to revert this. @1138-4EB suggested that we could simply move all files from dist folder to a subfolder rather than copying it to the root.. $anchorScroll and $q is not being used, we can remove them.. What is the point of ignoring request failure? I think we need to display a notification if the request is failed.. It would better to use truncate filter because it adds dots at the end and overall more robust.. I'd suggest using indexOf over includes because it's ES2016 feature and isn't supported by some major browsers.. We could add a placeholder to guide user like this one:\nhtml\n<option selected disabled hidden value=\"\">Select value</option>. Agree, I just found that it's done the same way for other functions in this service, may I refactor them as well?. Missed that on merge, I'll replace it with the deferred object.. Well, that's embarrassing \ud83e\udd26\u200d\u2642\ufe0f \nI was trying to find what causes additional spaces at the start for a relatively big amount of time and completely forgot that HTML count spacing in element too.. You can move $('#createContainerSpinner').show() function after this condition and therefore reduce branches content.. In Portainer, button groups are usually used to switch between options unless there is not much of them so I think that if we detach mode to separate button group it should be simpler in terms of UX and will be similar to other places.\n\n. Why not use uib-btn-radio like so instead?. You're right, there is actually a bunch of scopes so we usually store such things in state scope's property, you can store current value $scope.state.TextView and it will be accessible in widget header.. I believe we should add a separate function to convert word from Present to Past tense because in case of \"stop\" action it should be a \"stopped\" instead of \"stoped\". We can simplify this function by moving hide function to the finally handler.. Well, at least for then branch we could hide spinner regardless of selected branch. Let's move new function to the separate service since it isn't related to the controller itself and we could reuse it in other places as well.\nIndeed that solution would be an overkill for now but we could start with a mapping for exceptions(for now it will just contain \"stop\" mapping) and default rule.. This is the same across all controllers, it could be moved to the separate service. I suggest to use $interval service instead of native setInterval mostly because setInterval is an asynchronous action which makes harder for AngularJS to track scope changes in it, $interval is basically a setInterval with applied scope so you don't need to worry about repaints and value changes.. Good point! I forgot to add it to the LimitAccess function, will do that today.. Done!. Could you please add it as a separate class in app.css? It will make it way easier to maintain and use in other parts of the application!. ",
    "visualfanatic": "Would not it better to disable the start and resume buttons when the container is running @deviantony?. ",
    "paulkling": "@deviantony Would the expectation be that this would just pull tag defined on the images view? Or would we want the ability to specify the tag?. I think it would be interesting for Portainer to do a GET from a URI for the compose file, file upload, or straight up typing one in.. With swarm mode and 1.13 the docker team added ability V3 of docker-compose file. \ndocker stack deploy --compose-file=docker-compose.yml my_stack\nYet docker-compose doesn't support V3 yet. . Never mind I re-read your first post and discovered it is binary. Cool I thought I missing something on how compose worked. \n\n@alwaysastudent I was curious what is in the docker-compose file? just a script or is that the actual docker-compose from Docker. I can picture what is in the two yml's and the .env but I cant think what would be in the docker-compose file. I must be missing something. \n\n. I was working on this feature also. (glad you are working on it) I only got partially into it. The part I was struggling with was multiple pages. It looks like the code will select all items on every page. Is that intended? I was trying to model it after how Gmail does it.  I was getting around that by passing in a filtered list into selectAllItem but then when I switched pages my check box was working wonky. . I found this project because I was looking for a feature like this. \nOne other things that I wanted was the ability to see the networks each container is connected to in a visual way. . I tried with Windows for Docker - preview channel \nResults:\n```\nPS C:> docker version\nClient:\n Version:      1.13.0-rc4\n API version:  1.25\n Go version:   go1.7.3\n Git commit:   88862e7\n Built:        Sat Dec 17 01:34:17 2016\n OS/Arch:      windows/amd64\nServer:\n Version:      1.13.0-rc4\n API version:  1.25 (minimum version 1.24)\n Go version:   go1.7.3\n Git commit:   88862e7\n Built:        Sat Dec 17 01:34:17 2016\n OS/Arch:      windows/amd64\n Experimental: true\nPS C:> docker run -d -p 9000:9000 --name portainer -v npipe:////./pipe/docker_engine:npipe:////./pipe/docker_engine portainer/portainer:pr459\nC:\\Program Files\\Docker\\Docker\\Resources\\bin\\docker.exe: Error response from daemon: invalid bind mount spec \"npipe:////./pipe/docker_engine:npipe:////./pipe/docker_engine\": invalid volume specification: 'npipe:\\\\.\\pipe\\docker_engine:npipe:\\\\.\\pipe\\docker_engine'.\nSee 'C:\\Program Files\\Docker\\Docker\\Resources\\bin\\docker.exe run --help'.\nPS C:>\n```\nI removed the -H passed into portainer to see if that changed the error. It didnt same error with it in. \nI found this:  https://github.com/Microsoft/Virtualization-Documentation/issues/442 \nand https://github.com/Microsoft/Docker.DotNet/issues/109#issuecomment-241186441 \n. @PhantomYdn I have been pushing a different template into my jwilder/nginx-proxy for another reason this may work with portainer as well. \ndocker run -d -p 80:80 -v /var/run/docker.sock:/tmp/docker.sock -v /root/nginx.tmpl:/app/nginx.tmpl jwilder/nginx-proxy\nThe nginx.tmpl is pretty complex may take a few tries. \n. @deviantony will do.  This week is a bit crazy. It may be a bit of time before I can get a proof of concept.. I will try/test and update the PR if it works. I really didn't like added location but thought I had too.  Thanks for the feedback . It sort of works without location. Something odd is going on. When I remove location and rewrite the anchorScroll line it only works the 2 - N times I press any of the templates. The first time it move's partially to the ID but not the whole way. I figured it was do to the html ID not being able to be seen so I moved it out to an empty DIV. Maybe it would be better to move the ID up the \"Application template list\" or Templates. ",
    "BryanHunt": "Yep, my bad.  --swarm is not full working though.  I'll open a separate issue\n. I'm using Swarm mode.  As far as I know, that mode doesn't open a separate port - you still use the unix socket.\n. Ok, I was going off of the README that says you fully support 1.12.\n. It's working.  Thanks!!\n. Yep, that's what I'm looking for.  Sounds like I just need to wait for those features to land.  Thanks for your awesome work.\n. ",
    "mkamlesh": "Portainer only seems to be able to pull data when I run container on swarm manager node (swarm mode) pointing to unix socket. And in that case it only shows containers launched on that particular node and not all of them from swarm cluster. Is this an expected behavior? . Thanks, Neil. In future, would it list all the containers from swarm cluster? If not, what would be the reason for not doing so? Anybody who is managing swarm cluster through UI, would like to have complete view of system.\nThanks and Regards,\nKamlesh. Ah, got ya. Thanks, Neil!\n. ",
    "rreinurm": "It would be nice to have shortcut from service details to directly go to container details. Currently it is lot of hassle: first find correct node where service task/container is running and then go to containers view and then you can find proper container details. . It would be nice to have shortcut from service details to directly go to container details. Currently it is lot of hassle: first find correct node where service task/container is running and then go to containers view and then you can find proper container details. . I personally prefer to use option (a) as it makes entire swarm cluster deployment more compact, but its not a hard task to deploy global service of Portainer agents.\nI propose to consider gRPC protocol for secure and fast communication with Portainer agents. http://www.grpc.io/. I personally prefer to use option (a) as it makes entire swarm cluster deployment more compact, but its not a hard task to deploy global service of Portainer agents.\nI propose to consider gRPC protocol for secure and fast communication with Portainer agents. http://www.grpc.io/. ",
    "shabbirkagalwala": "Any update on this, we really want to move ahead with using portainer in our production environment but the only thing missing is the aggregated view of all tasks/containers in the swarm. It takes time to find the correct node where the task is running and check the stats.. Sorry again but this is my first launch on a new set of servers, never used portainer on these servers. \nWhen we tried it on our dev servers on the initial install it does ask for an password but now it takes me to login page directly without asking to set any passwords at all.. @deviantony Tried everything, still stuck on the same part. Yeah we have used it before in dev but this was a new instance in aws. I even terminated the instance and started from scratch but still it directly takes me to the login page instead of asking me to set a password. Tried clearing browser cache, dns flush and using private browsing and also using a different machine to browse to portainer after it was started but the same issue. \nThank you for following up on this I appreciate y'alls help.. Docker version - 17.06-ce\nHost OS - centos 7 \nPortainer started using:\ndocker service create \\\n    --name portainer \\\n    --publish 9000:9000 \\\n    --constraint 'node.role == manager' \\\n    --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=/home/centos/portainer/data,dst=/data \\\n    portainer/portainer:latest \\\n    -H unix:///var/run/docker.sock\nI will paste the logs here in a few minutes.. @deviantony  We have 2 managers and 2 workers. I will spin it up on a new server now and try again and let you know if it works.\n@jack6liu I will try doing this and also try it without persistent volume data.\nThank you all for the help.. I am so sorry, I got this working but forgot to reply. I had to use --constraint and keep portainer on the manager node with the volume mounted (even though the replica was set to 1 before). Sorry again for not replying before and thank you very much for all the help!. Hi @deviantony Thank you for replying. So to answer your question\n\nWhat are you trying to achieve exactly ?\n\nWe have a couple of java container where we need to exec into them to look at the log files that are being written to a particular directory or if we want to restart the java app using a script inside the container (this helps as we do not have to restart the container). Right now we have to login to server, find the container and then use docker exec to look at the log files. Since portainer gives access to to container console from the web ui we thought that would help us and we could get away from login in to the node.\n\nDo you specify your own command and then input /bin/bash or are you using the /bin/bash from the command dropdown list ?\n\nI tried both using /bin/bash from the drop down and also using my own command but keep getting that error. \nPlease let me know if you might need any additional information. Thank you again for your time :)\n. >Does the docker exec from the CLI works?\nYes, it works from cli. See image below:\n\n\nHave you tried to use the console in others containers from Portainer?\n\nAll our containers are mostly java based and give the same error. I started a test CentOS based container and still got the same error saying \"No Such Exec\"\n\nAre you using a reverse proxy in front Portainer?\n\nI was initially, then I went through some of the previous issues with exec and portainer and you had mentioned it could be because of the proxy, so I set up a test environment without the proxy and still get the same error.\nThank you so much for your prompt replies, appreciate it!. Sure, I can start fresh and test. I will get back to you in some time.. Hi @deviantony, I tried on a fresh setup with a single node. Get the same error. Everything else seems to work fine, I can add endpoints, it shows container stats etc pretty much everything. Only the console has an issue.\nPortainer logs:\n[root@ip-192-168-24-172 centos]# docker logs 369 \n2018/01/29 04:47:38 Instance already has defined endpoints. Skipping the endpoint defined via CLI.\n2018/01/29 04:47:38 Starting Portainer 1.16.1 on :9000\n[root@ip-192-168-24-172 centos]#\nIs there any additional information I can provide to help?. ```\nGeneral\nRequest URL:https://host_ip (redacted)/\nRequest Method:GET\nStatus Code:200 OK\nRemote Address:ip:7442 (redacted)\nReferrer Policy:no-referrer-when-downgrade\nResponse Headers   view source\nAccept-Ranges:bytes\nCache-Control:no-cache, no-store, must-revalidate\nConnection:keep-alive\nContent-Length:2704\nContent-Type:text/html; charset=utf-8\nDate:Mon, 29 Jan 2018 18:34:42 GMT\nLast-Modified:Tue, 23 Jan 2018 15:57:46 GMT\nRequest Headers    view source\nAccept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,/;q=0.8\nAccept-Encoding:gzip, deflate, br\nAccept-Language:en-US,en;q=0.9\nCache-Control:max-age=0\nConnection:keep-alive\nCookie:_ga=GA1.2.422408594.1517194477; _gid=GA1.2.1927702609.1517194477\nDNT:1\nHost:host_ip (redacted)\nUpgrade-Insecure-Requests:1\nUser-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36\n```\nI am sorry for being naive on this, but did you mean something like this?. @deviantony Sorry for not replying earlier. I will get this screenshots over the weekend. Again thank you so much for the help!!!!!. ",
    "jjlorenzo": "The ability of customize the logo it broken after this PR, thanks\n. This breaks the ability to customize the logo.\n. ",
    "daviddyball": "If you're taking votes or input, I'd say th or th-large are really nice. They're unique to Portainer too (if that's a consideration).\n. If you're taking votes or input, I'd say th or th-large are really nice. They're unique to Portainer too (if that's a consideration).\n. I'm keen for this to but I'm wondering how it will actually work.\nIt's my understanding that --with-registry-auth simply forwards the credentials stored on the client running the service create or service update command to the node that will schedule the container and, given this, I can't see how portainer can/will implement it for cases where the registry uses one-time auth tokens, or time-expiring passwords (e.g. Amazon ECR).\nIs the plan to add support for docker-credential-helper binaries or something similar?. I'm keen for this to but I'm wondering how it will actually work.\nIt's my understanding that --with-registry-auth simply forwards the credentials stored on the client running the service create or service update command to the node that will schedule the container and, given this, I can't see how portainer can/will implement it for cases where the registry uses one-time auth tokens, or time-expiring passwords (e.g. Amazon ECR).\nIs the plan to add support for docker-credential-helper binaries or something similar?. ",
    "elfrinjo": "Would this be solved with #257 ?. You can use portainer to deploy a stack, defined in a compose-file, into a docker swarm.\nYou cannot use it to deploy it onto a stand-alone docker node.. ",
    "diegoperini": "A proof of concept simple authentication with a single role (which is admin) is urgently necessary. Roles can be added with later iterations. Where do you plan to store credentials for users?\n. A proof of concept simple authentication with a single role (which is admin) is urgently necessary. Roles can be added with later iterations. Where do you plan to store credentials for users?\n. Is Docker running as root while your ./portainer is executed by a user? If so, try sudo ./portainer and please include your os info, docker version and Portainer version if that doesn't work.\n. Is Docker running as root while your ./portainer is executed by a user? If so, try sudo ./portainer and please include your os info, docker version and Portainer version if that doesn't work.\n. What is the storage mechanism for credentials? Setting environment variables during docker run would enable us to keep the simplicity for bootstrapping.\nExample:\ndocker run -it --name portainer --env ADMIN_USERNAME=johndoe --env ADMIN_PASS=123456 -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nAnother approach would be to use an optional volume that should contain a structured file perhaps.\n. Then volumes are the way to go if my Docker knowledge doesn't misguide me. :)\n. Then volumes are the way to go if my Docker knowledge doesn't misguide me. :)\n. ",
    "lavvy": "please could there be how can add specific features (volume,image,swarm,network etc) shown or made available to different SETs of users. Yeah. get_from_url option should please be included\nOn Dec 14, 2016 5:46 PM, \"scher200\" notifications@github.com wrote:\n\nThen to have a vew options like: run, up, down, rm and etc..\n2016-12-14 22:17 GMT+01:00 Paul Kling notifications@github.com:\n\nI think it would be interesting for Portainer to do a GET from a URI for\nthe compose file, file upload, or straight up typing one in.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/257#\nissuecomment-267159246,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AJG6XY0arR1jyBwB_\nojQrgWqwwogluhKks5rIFztgaJpZM4KOcDQ\n.\n\n\n--\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/257#issuecomment-267181058,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC46DElksfsM6dbScPmxlJ9-gHWzC0ks5rIHGzgaJpZM4KOcDQ\n.\n. Hello Anthony when is the release likely to come ?\nAnd will it come with a rpi docker image?\nOn Dec 6, 2016 10:54 PM, \"Anthony Lapenna\" notifications@github.com wrote:\nHi there, this release will also introduce settings and we'll give\nportainer users the ability to define their wished pagination settings.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/378#issuecomment-265348844,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC4yelqxLG35jEaloZWJHqHzuTq9hwks5rFi3wgaJpZM4LGI3e\n.\n. Oh wow, cool\nOn Dec 6, 2016 11:04 PM, \"Anthony Lapenna\" notifications@github.com wrote:\n@lavvy https://github.com/lavvy release is due this month, should be\navailable for Christmas :)\nAnd yes, it will come pre-built and published on Dockerhub for the\nfollowing archs: windows, linux, darwin and arm.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/378#issuecomment-265350002,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC4z_mG_K7T51a-uMWsBR8kzLUz33Oks5rFjA4gaJpZM4LGI3e\n.\n. I think this is the issue i had, but didn't have time to investigate it.\n\nWe use nginx proxy in front of all our containers. It runs on port 80, then\nother containers receive traffic through it.\nAll our containers are running well with different domain names except\nportainer. We just have to remove the nginx proxy just to allow portainer\nto run\nOn Dec 8, 2016 5:52 PM, \"Anthony Lapenna\" notifications@github.com wrote:\n\nThanks for your detailed explanation. I've just created an account on\ncloudhero to reproduce this issue and do a few other checks too.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/379#issuecomment-265880074,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC4z7qPm-7ETYhfxafPDDFIn8l0txPks5rGIo7gaJpZM4LIPzc\n.\n. I have tried it but, it didn't work for me.\nI used this container as the proxy https://github.com/jwilder/nginx-proxy\nOn Dec 13, 2016 3:28 PM, \"Anthony Lapenna\" notifications@github.com wrote:\n@lavvy https://github.com/lavvy could you give a try at @eisnerd\nhttps://github.com/eisnerd solution using eisnerd/portainer with a\nNignx proxy in front of Docker?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/379#issuecomment-266852426,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC48817vgIdqi_iYDm4RPPgVG7iFjPks5rHv_2gaJpZM4LIPzc\n.\n. Ok.  Well i used the portainer demo image.\nOn Dec 14, 2016 9:09 PM, \"David Eisner\" notifications@github.com wrote:\nYes. It should be d7402e11f66a. It works for me against cloudhero. I'll\ntry setting up my own proxy to test with.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/379#issuecomment-267216561,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC478gbzJS2lnpJNG1IKUUeQv-YVF-ks5rIKFhgaJpZM4LIPzc\n.\n. Hello i don't know if we can have an arm docker registry:2 for portainer. I\nhave searched so much for arm based docker registry:2 but no success\nOn Dec 12, 2016 5:06 AM, \"Renato Riccio\" notifications@github.com wrote:\n+1 Thanks a lot it works perfectly!\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/384#issuecomment-266388693,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC47_hVxuzjvvegFmgW86t__DaCyLxks5rHRyKgaJpZM4LKSRc\n.\n. Cool\nOn Jan 2, 2017 3:18 PM, \"Neil Cresswell\" notifications@github.com wrote:\nLove it.. approved. Great work Glowbal....\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/417#issuecomment-270016078,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC4xm62Om-yQMJ8MLHysL4Eb2xiWU7ks5rOVuYgaJpZM4LV8ec\n.\n. Yes, please this option is very important. Could there be an option to add\nopen all ports maybe by admin at default on host side,  then the user can\nthen open any port individually on the container side at will\nOn Feb 3, 2017 10:07 AM, \"xInsertx\" notifications@github.com wrote:\nAdd \"Automatic Expose All Ports\" like shipyard. A very useful feature i\nfound lacking (or at-least cannot find) for single host docker hosts.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/558, or mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC45YOoFwu99Oata1_RvOzkpzrGsbdks5rY0K8gaJpZM4L2bd1\n.\n. Oh OK,  Neil thats a good option.\nOn Feb 3, 2017 4:02 PM, \"Neil Cresswell\" notifications@github.com wrote:\nMaybe have the \"expose ports\" prepopulated with all the ports the\nDockerFile wants to expose, giving the user the instant visibility and\nability to set the corresponding external port?\nRgds,\nNeil Cresswell\nOn 4/02/2017, at 9:58 AM, Anthony Lapenna notifications@github.com<\nmailto:notifications@github.com> wrote:\n@xInsertxhttps://urldefense.proofpoint.com/v2/url?u=https-\n3A__github.com_xInsertx&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-\nv5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=\niG29eSxZFMyMY7Co8p3ArwKoAgNBVU2uJJA26fYgBA4&s=d_rwTabtyoNbqcKS04dnoz-\nn7A4N4MzOTrZlUL6OSJ4&e= would you like the equivalent of docker run -P ?\n@lavvyhttps://urldefense.proofpoint.com/v2/url?u=https-\n3A__github.com_lavvy&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-\nv5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=\niG29eSxZFMyMY7Co8p3ArwKoAgNBVU2uJJA26fYgBA4&s=bEzrbjU-\nh778XXYhCNo08AGShbDxw2vRZz5lhd7PDuQ&e= I'm not sure I understand what\nyou want.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.\nproofpoint.com/v2/url?u=https-3A__github.com_portainer_\nportainer_issues_558-23issuecomment-2D277360602&d=DQMCaQ&c=\neuGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_\nQGpbggVOB-PfMJpM&m=iG29eSxZFMyMY7Co8p3ArwKoAgNBVU2uJJA26fYgBA4&s=\n2EY7hlnhTDK8ogtpYJsS414SFWxF6mdDzw6tem0yXmE&e=, or mute the thread<\nhttps://urldefense.proofpoint.com/v2/url?u=https-\n3A__github.com_notifications_unsubscribe-2Dauth_AWGrleUbED-\n5FhRGU0gKidmbdSv9J5Wxwtks5rY5T4gaJpZM4L2bd1&d=DQMCaQ&c=\neuGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_\nQGpbggVOB-PfMJpM&m=iG29eSxZFMyMY7Co8p3ArwKoAgNBVU2uJJA26fYgBA4&s=\nWotx3vLyKOOYegRyVlRhzpAp4gilOV9i30t0hnGug4w&e=>.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/558#issuecomment-277361518,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC4y89h3YqZhtC_ciuQnSvJ1uTVz92ks5rY5XzgaJpZM4L2bd1\n.\n. This will be pretty awesome. I have found out that most actually cannot do\nwithout nginx proxy,  so if portainer can support dns mapping, mainstream,\nit would be super cool.\nOn Feb 5, 2017 4:14 PM, \"Frans Thamura\" notifications@github.com wrote:\nI like portainer, but that will be more awesome if we have a setting\nregarding domain, so we can map one domain to a container, and also the\nport. Automatic NGINX proxy will be interesting.\nSo everytime we deploy, we have setting to make the container can access\noutside the server's public ip.\nlook this qnap container station feature.\n[image: containerstation_en_13]\nhttps://cloud.githubusercontent.com/assets/218106/22629924/b6b5eeee-ec22-11e6-9cbd-cc493f27835d.png\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/571, or mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC46R37H-YzMD3kM63MnZYp0N69XBWks5rZjvBgaJpZM4L3oTW\n.\n. What i was thinking was being able to proxy to a several ports from a specific public port. For example, what nginx proxy does. \nNormally docker can route traffic from a given host port to a particular container port but nginx proxy can route traffic from a given host port to several container ports or sites in the network. And we can even define policy by which it routes to them , just like in rancher.\nSo i was thinking if you are trying to give us that feature in portainer, .\n Ability to route to many containers assuming we have only one port exposed to the public. . Very good feature.\nOn May 27, 2017 9:36 AM, \"Neil Cresswell\" notifications@github.com wrote:\nAnd if possible, allow adjustments to css.\nIn the same area, we should be able to set defaults, such as registry\nurl's.\nRgds,\nNeil Cresswell\nOn 27/05/2017, at 7:56 PM, Anthony Lapenna notifications@github.com<\nmailto:notifications@github.com> wrote:\nCreate a new Settings view to allow the configuration of Portainer.\nShould allow to customize the following:\n\nTemplates URL\nLogo\nHidden labels\n\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.\nproofpoint.com/v2/url?u=https-3A__github.com_portainer_\nportainer_issues_897&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-\nv5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SSzmP-LyK-\ntjciP4L6W_Takl-lt2Brzf-WycijxUEXk&s=zCNrV045ksGjg2lXLOrtK3IaSPUCkL\nu_72Wb6XAzxgw&e=, or mute the threadhttps://urldefense.\nproofpoint.com/v2/url?u=https-3A__github.com_notifications_\nunsubscribe-2Dauth_AWGrlWVTdXMp1WT7iacNrpM4vgHbaXZXks5r99cMgaJpZM4NoRtj&d=\nDQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=\n0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=SSzmP-LyK-\ntjciP4L6W_Takl-lt2Brzf-WycijxUEXk&s=DpwpATL3N_BX_aHVh_FhlfAFkzkz4fE0m_\nTGygHfgtw&e=.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/897#issuecomment-304438175,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGsC42aPh-wigUsKwoq6UcUAYlsaVBHmks5r9-B1gaJpZM4NoRtj\n.\n. \n",
    "port22": "would it be possible to let users have user-specific containers (as simple as possible with named conventions on containers like \"username_containername\" and show users only \"username_*\" and storing these associations besides the credentials in flat-file-db with we can mount via -v ?\nOR: at least user specific endpoints so we can run multiple docker daemons on one host. ",
    "ralphie02": "first of all, awesome work on portainer @deviantony , keep up the good work!!\nI wanted to know if there is any news on this. Will it be available soon?. Thanks for the prompt reply!! I will try to keep track of #750. Seems like that's what I've been looking for.\nCheers!!. ",
    "djalal": "ping @deviantony, what about closing this? #750 / #550 are released now. ",
    "Wilfred": "@deviantony this is closed, but I can't see any reference to guest users in the associated pull requests. Are guests users currently supported?\nI've played with teams, but those only seem to allow access to a docker socket (both read and write).. @deviantony this is closed, but I can't see any reference to guest users in the associated pull requests. Are guests users currently supported?\nI've played with teams, but those only seem to allow access to a docker socket (both read and write).. @deviantony is there an issue for read-only users that I can follow?. @deviantony is there an issue for read-only users that I can follow?. ",
    "RandomInsano": "I'd be game to do the grunt work to fix this. Can someone point me to where I should dive in and start?\n. I'd be game to do the grunt work to fix this. Can someone point me to where I should dive in and start?\n. Well, if it's going to get torn out soon that fizzles my motivation :stuck_out_tongue:\nDid some quick Googling for chart.js custom tooltips, and it looks like they'll need to be defined when the chart objects are created. That means I'll have to start around line 77.\nAny idea when this overhaul is going to happen? Are you going to throw out Chart.js?\n. Well, if it's going to get torn out soon that fizzles my motivation :stuck_out_tongue:\nDid some quick Googling for chart.js custom tooltips, and it looks like they'll need to be defined when the chart objects are created. That means I'll have to start around line 77.\nAny idea when this overhaul is going to happen? Are you going to throw out Chart.js?\n. Hmmmmm... Well, I'll keep watching. When I see the move over, I'll come around again and see about tackling this then. I'll close this for the time being!\n. Hmmmmm... Well, I'll keep watching. When I see the move over, I'll come around again and see about tackling this then. I'll close this for the time being!\n. ",
    "mterwoord": "Regarding portainer:microsoftservercore, it seems you can just run the nanoserver one there..\n. I'm not sure if it has any licensing requirements, but I think, functionally, the only effect the nanoserver and servercore images have is the amount of \"overhead\".\n. I'm not expecting it to do magic (and stop things first). But I expect a simple error (\"You cannot kill a running container. Please stop it first.\") and not the raw message from docker kill\n. Yes. But its way to cryptic for a normal \"expected\" error if you ask me.\n. Didn't say it was easy. Its just something I'd like to see, on a functional level. I understand you have to prioritize everything though...\n. ",
    "jslatten": "This would be awesome and make Portainer a real competitor with Rancher if you can integrate into the template profiles.\nAny thoughts on creating a portainer container to package swarm as an easily deployed \"agent\"?\nIf there is interest I can contribute...\n. I meant that the templates could reference docker-compose templates instead of basic references to standard docker images\n. ",
    "scher200": "great idea\n. Then to have a vew options like: run, up, down, rm and etc..\n2016-12-14 22:17 GMT+01:00 Paul Kling notifications@github.com:\n\nI think it would be interesting for Portainer to do a GET from a URI for\nthe compose file, file upload, or straight up typing one in.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/257#issuecomment-267159246,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AJG6XY0arR1jyBwB_ojQrgWqwwogluhKks5rIFztgaJpZM4KOcDQ\n.\n\n\n--\n. yeah it would work wonderfull with: composerregistry\nSearch API\nfull text search: https://www.composeregistry.com/api/v1/search?query={QUERY}\nimplementation for search would be equal to:\ne.g. curl -H 'x-key: default' https://www.composeregistry.com/api/v1/search?query=elk\n{\n\"items\": [\n  {\n    \"name\": \"docker-elk\",\n    \"owner\": \"deviantony\",\n    \"stars\": 345,\n    \"id\": \"AVBCF9PggLKoASuOwp_8\"\n  },\n  {\n    \"name\": \"st2contrib\",\n    \"owner\": \"StackStorm\",\n    \"stars\": 45,\n    \"id\": \"AVBR45mWwBuN0C9fxHc5\"\n  },\n  ...\n  ]\n}. yes, this would ensure a good view on your 'stack', no matter how you ran it.. @deviantony @paulkling could there be a way to sort/group containers launched by the following stack?:\ndocker stack deploy --compose-file=docker-compose.yml my_stack\n. @WTFKr0 @deviantony Yes this would be a great solution!. @alwaysastudent \nYou hit the right idea there. If you can choose a git repo including all these files and hit [deploy stack], and with that serve the compose (v3) file on your stack.. @mwthink yes I agree this is the first step. great!. Waauw, did a awesome job there man,\nLittle Bug:\n- at the end of my test I saw many \"fake\" nginx stacks compared to \"docker stack ls\"\nUI:\n- I would like to remove my stacks directly from stack screen\n- A bar like this included, https://www.composeregistry.com/, where you can search, launch and go with one click\nOutside registered stacks:\n- I would probably use a git repo and point to that\n- Else just select or maybe just type path of the project folder on the mounted host path\nFeatures:\n- looking forward to the other features especially docker stack deploy\nKeep going it's awesome!. @deviantony the bug was me, it was all cool, because of deploying many tries, portainer launched many nginx stacks with errors. I assumed that they never came existance or would be removed automatically because I got an error in my portainer screen. Actually they did start and sort of stopped then and stayed like that.. error 1\n\nerror 2\n\nresult\n\n. ",
    "ysilvela": "Use compose files and deploy multiple images linked its the most useful in dockers enviroments\n. ",
    "slattery": "@deviantony thanks for setting this on a milestone.. ",
    "mazerty": "as an active user of compose I'd really like such a feature :+1: . ",
    "thomas15v": "I wouldn't mind getting rid of the current template system and just move to compose \ud83d\ude04. It's in essence exactly the same, but with more options.. I ain't a fan of docker stack yet, since it limits itself to a swarm deployment. Swarm isn't really something I need for my projects, mostly I get 1 server to deploy stuff on.. ",
    "schmunk42": "Compose support would be truly awesome. \nI wanted to give some examples how we use compose on a swarm in production, see screenshot below:\n\n(env = swarm environment)\n(rectangle = docker-compose-stack)\n(arrow = merging, default config, external files)\nActually we're only using native features, such as compose .env-files, container-env-files or merging multiple files. It would be nice if we could organize files in different folders.\nBtw: we've created the swarm with roj, which is fully compatible to portainer, since both use native Docker tools.. > How would you guys like to have compose support in Portainer? The way I see it at the moment :\n\nWe should give the users the ability to define 'stacks'. When creating a stack, you provide a name and a docker-compose YML file.\n\nFrom my point of view I'd suggest rather to point to a directory containing the corresponding files. A docker-compose configuration can consist of several files, not only one docker-compose.yml, but i.e. a .env defining the .yml files to include and a project name.\nMoreover it would be very important to connect containers to their docker-compose \"stacks\" - that can be done by parsing the com.compose labels of the container.\n\nI am using https://github.com/francescou/docker-compose-ui with portainer.\n\nI know that project and it is nice, definitely worth a look.\n\nStack, or Apps ? I thought that \"stack\" as a term, is being used in Docker 1.13.\n\nThe problem with Docker sometimes is that they mix their own terms, while a stack is now much more related to Docker-cloud (see also stackfiles) the platform started out as place for sharing docker-compose.yml files. \nOr this one called neam/docker-stack - stared on Mar 1, 2015.\nBut yes, we should differentiate it clearly :)\n. Even both ways, so from stack -> container and from container -> stack\nFor example, if you inspect a container, you'll get \n\"Labels\": {\n    \"com.docker.compose.config-hash\": \"0ac7cfd1b1be53c964dfcc90c728dbc543493e5d38cc34822676b274822914b5\",\n[...]\n    \"com.docker.compose.project\": \"myproject\",\n[...]\n}\nI would be very helpful, if containers are grouped by their project-names (myproject), even if you have no information about the \"stack\" (project) itself.\nIf you would create/upload a stack-folder containing a docker-compose.yml and .env file, you could kind of attach the config to the running containers.\nMoreover, Portainer could warn you, if you're using a COMPOSE_PROJECT_NAME twice, or if there are illegal characters set, i.e. there are no - or _ used for the container name.\n. > Compose would need to be installed into portainer container?\nI think that would be one way to go, I experimented with linking of static binaries from another container, which would be possible in this case, but it is not best practice. \n\nWhat would be the library used to interact with compose (as it does not provide any standard REST api...)? compose-ui uses directly python calls wheareas Rancher uses libcompose (that may be more appropriate as written in go).\n\nBecause you already have code written in go, libcompose is the thing to choose, IMO.\nJust for reference, we tried to create a similar thing with PHP and this lib https://github.com/omauger/docker-compose-php - but portainer is light years ahead :) Having a REST API for compose is definitely something to think about.. Ping... This feature would be really cool.. @deviantony There are kind of two implementations atm for Docker.\nThe older one is merely a naming convention used by Docker compose, like described here or https://github.com/portainer/portainer/issues/257#issuecomment-272722580\nThe newer one (services) is completely different and still in only available with an experimental daemon.\nLooked to me like you'll only support the newer one in #257 or am I wrong?. Yeah, it's confusing - at least to me :) and I don't want to add more confusion to the topic, but anyway...\nThe proposal in #257 talks about \"stacks\" -\n which is is widely used term for docker-compose \"projects\", but AFAIK it was no official term, or is it?\nWith swarm-mode, you can bundle docker-compose.yml files and use docker stack deploy. That's what my initial question was about, see also https://docs.docker.com/engine/reference/commandline/stack_deploy/\nThese \"deployed stacks\" are now services, which are different to containers from a compose project.. @WTFKr0 Great! Very nice to have a combined view.. I had the same issue and was also able to use the workaround with upgrading first to 1.13.2 - should be mentioned in the docs.. I was on the latest Docker image, to be honest, I can't remember exactly - it was 1.12 or below.\nIt said migrating database from version 1 to version 6.. ",
    "dimkk": "@deviantony I am using https://github.com/francescou/docker-compose-ui with portainer.\nI like the way it behaves, just like you've described.\nDon't got any spare time now, but would have tried to embed features of compose-ui to portainer.. ",
    "lobre": "Really looking forward to have compose integrated into portainer as well!\nAn interesting feature in addition to compose would be the notion of questions as Rancher does.\nSee: https://docs.rancher.com/rancher/v1.2/zh/catalog/private-catalog/#questions-in-the-rancher-composeyml\nIt is really handy to populate the compose file when it has to contain secret data or specific configuration.. The .env file is not specific to docker-compose-ui but it is native from compose (https://docs.docker.com/compose/environment-variables/#/the-env-file). So maybe the idea would be to implement an UI to fill in this .env file. That would look like to this \"question\" feature integrated in rancher-compose.\nThis is not mandatory but that would be a nice feature ;)\nAnd just a few questions that come into my mind when thinking about a implementation of compose in portainer:\n\nCompose would need to be installed into portainer container?\nWhat would be the library used to interact with compose (as it does not provide any standard REST\u00a0api...)? compose-ui uses directly python calls wheareas Rancher uses libcompose (that may be more appropriate as written in go).. \n",
    "allamand": "I would prefere the way followed by docker-compose-ui that would be to set the secrets data in a .env file read at same time of docker-compose.yml. As in compose-ui, it would be great to specify a git url which could contains directories for each stacks instead of loading one by one and then the git still be the real source of the compose file. ",
    "mstrohl": "Hi everybody,\nThanks for that work and excuse me for the duplicate request.\n. ",
    "alwaysastudent": "Talking about how we handle deployments in production. We layout the compose projects in the file system using an yum/rpm based tooling. Each rpm comprises of a compose project along with the yaml file, some meta and a SysVinit service  laid out in the file system. We use the linux sysvinit service commands to start and stop the projects. \nPortainer is fascinating since it gives us a handle to the entire equation of start|stop|status of the services in a host, from a neat gui.\nNow, what we really want is to have portainer recognize these projects that are laid out by these RPMS and provide means to manage them as individual docker-compose projects. Ie. A way to point my projects in the file system to the portainer apis followed by a way to modulate my individual docker-compose projects. I guess you may need the handle of docker-compose binary path as well.  Also you have to CD into the project, before you do any docker-compose commands since the .env files in the project has to be honored.\nKindly consider my request.\n. @deviantony - not sure how you are trying to go with this feature, but as a user we wold still like to maintain the compose files outside of portainer and use the portainer to recognise these projects, which are already laid out on the file system, and give management interface. I have explained this in the above comment, which I would like to bring to your attention. The following is the layout of our compose projects on a physical host in production.\n/path/to/my/projects/\n|-- catalog\n|   |-- compose-common.yml\n|   |-- docker-compose\n|   |-- docker-compose.yml\n|   |-- launch.sh\n|   `-- .env\n|-- search\n|   |-- compose-common.yml\n|   |-- docker-compose\n|   |-- docker-compose.yml\n|   |-- launch.sh\n|   `-- .env\n`-- traefik\n    |-- compose-common.yml\n    |-- docker-compose\n    |-- docker-compose.yml\n    |-- launch.sh\n    `-- .env\n. @deviantony - Thank you for considering my request.\n@paulkling - Right, it is the binary. We pack the binary as well along with the project, so to be independent and self-contained. In fact there is one another file in the layout that I didn't mention above earlier (made edits now) which is a plain bash launch script that will be symlink'ed as a project specific SysVinit service during the RPM post install. We use these project specific SysVinit services to interact with their own binary using the start|stop|status|reload commands. All this fun is to simplify automation and keep operations under control in a production environment, since we have not graduated to the cluster managers.. ",
    "mwthink": "Has anyone considered support for a sub-environment as a precursor to docker-compose support?\nFor myself (And I feel, most of you others), the primary advantage of docker-compose is that I can specify multiple inter-connected services in a single file and deploy them all as a single entity and manage it as a single \"unit\".\nIn our deployment system, we have multiple projects ($prjA, $prjB) running in multiple environments (testing, production, etc). Portainer forces us to manage them all in a single list rather than building them all as part of isolated environments. When viewing my running containers, I may have $prjA-testing running right next to $prjB-production. If I could split that up into multiple environments, that would be amazing, and this would probably be something that compose support could evolve naturally from.\nThe way I see it right now is, even if compose support was added in, there will still need to be a new interface implemented since you're not going to list a single compose file (Made up of multiple containers) in the global container listing, and the current interface is not designed to support such a thing. \nCheck out how Rancher handles their environment management. While I don't think Portainer needs to be as in-depth (Rancher has different hardware nodes per environment, which I feel is outside the scope of Portainer's goals), there's definitely a need for container grouping in terms of effective management. . ",
    "davidhiendl": "I would also like to propose showing which stack a resource (service, container, network, secret, ...) belongs to in it's own view by adding a \"Stack\" column to the existing views. This would help to distinguish (and sort/filter) faster.. ",
    "MaliciousGenius": "In the list stacks status set to \"Up\". If you go inside the stack, the status is \"down\".. Additionally. In release pr275 there is an unidentified network \"0_8376449903853701618_default\"\n\n. @deviantony already. Im upload portainer pr275 from my basement stack:\ndocker stack deploy -c /tmp/basement.yml basement\n```\nversion: 3.1\nservices:\n  traefik:\n    image: traefik:1.2.3-alpine\n    command: -c /etc/traefik/traefik.toml\n    ports:\n      - 80:80/tcp\n      - 443:443/tcp\n    networks:\n      - external\n    volumes:\n      - /srv/traefik:/etc/traefik:rw\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    deploy:\n      mode: replicated\n      replicas: 1\n      restart_policy:\n        condition: on-failure\n        delay: 10s\n      labels:\n        traefik.enable: 'true'\n        traefik.frontend.rule: Host:traefik.xxx.ru\n        traefik.frontend.entryPoints: http,https\n        traefik.port: 8080\n        traefik.docker.network: external\n portainer:\n    image: portainer/portainer:pr257\n    command: -H unix:///var/run/docker.sock\n    networks:\n      - external\n    volumes:\n      - /srv/portainer:/data:rw\n      - /var/run/docker.sock:/var/run/docker.sock:rw\n    deploy:\n      mode: replicated\n      replicas: 1\n      restart_policy:\n        condition: on-failure\n        delay: 30s\n      labels:\n        traefik.enable: 'true'\n        traefik.frontend.rule: Host:portainer.xxx.ru\n        traefik.frontend.entryPoints: http,https\n        traefik.port: 9000\n        traefik.docker.network: external\nnetworks:\n  external:\n    external: true\n```\nout in shell:\nroot@n1:~# docker network ls\nNETWORK ID          NAME                            DRIVER              SCOPE\n341fad3e3f7c        0_8376449903853701618_default   bridge              local\nbb54b030a7a3        bridge                          bridge              local\n1ec94e7d8b9a        docker_gwbridge                 bridge              local\nn22d1l3h33ro        external                        overlay             swarm\n21d7ae7e5a94        host                            host                local\n3fye3znjezv9        ingress                         overlay             swarm\nd59afd77fa12        none                            null                local\nand GUI screenshot:\n\n. Sorry, this net added my provider.. You can add the \"push\" function for the git option. It will be great to save the stacks written in the editor.. ",
    "tiredofit": "I've been testing the pr257 build - and noticed that any of my non registered stacks (I am assuming I can't register them yet) which contain many '-' are being removed. \nI tried to add a stack from the UI where I could add a '-' i.e. postfix-relay however when starting the stack it created a whole new stack that I couldn't manage again. Looking great so far though and like where it is going!\nThe docker-compose.yml in question is:\nversion: '2'\nservices:\n  postfix-relay:\n    image: xxx.xxx\n    container_name: postfix-relay\n    restart: always\n    ports:\n      - 127.0.0.1:25:25\n    volumes:\n      - /etc/localtime:/etc/localtime:ro\n    environment:\n      - SMTP_HOST=xxx.xxx\n      - SMTP_PORT=xxx.xxx\n      - SMTP_USER=xxx.xxx\n      - SMTP_PASS=xxx.xxx\n      - SERVER_NAME=xxx.xxx\n      - ACCEPTED_NETWORKS=xxx.xx\n      - USE_TLS=yes\n      - TLS_VERIFY=may\n      - ZABBIX_HOSTNAME=postfix-relay\n    networks:\n        xxx-tier:\n          aliases:\n            - postfix-relay\n    restart: always\nnetworks:\n  xxx-tier:\n    external:\n      name: xxx-proxy`\n. ",
    "mahnunchik": "Any news?. > You cannot deploy containers using a Compose file\nDoes it mean: You cannot deploy containers using a Compose file by docker-compose binaries?. ",
    "Ineluki": "I love this feature since I worked exclusively with compose before portainer.\nIf it's not too late I'd like to add an idea that builds on this and the \"Duplicate / Edit\" container function:\n\nselect one or more containers from the list\nhit export button\nselect networks and volumes that are related to the selected containers in a popup\ndownload the generated compose file\n\nSo a simple way to save the changed compose file after you've changed some container run config on-the-fly via the ui.. I think what he meant was: exporting and importing the full run config for a container / all containers.\nSo if you lose the host for some reason you can restore the containers quickly.\nOr is there some functionality that already does this?\nFor images there's the registry, for volumes there's a variety of methods (simplest being rsync), but for run configurations?. ",
    "mister2d": "@deviantony What does it mean when you say docker-compose isn't supported? Don't you need a compose file to deploy a stack? Not following.. @deviantony stacking works great for my swarm cluster. Thanks for explaining.\nThere is one thing I'm still struggling to understand with the compose support. I use a private registry (with auth) that is defined within Portainer. How do I have my deployed stack pull from that registry? I get errors every time I deploy with private registry entries for my images.\nThanks.. You could also just set up a sub-domain like portainer.example.com. That negates any rewrite configurations.. ",
    "samprog1": "May I ask why docker-compose wasn't implemented?. Docker Stack support was implemented. Your Docker host needs to be in swarm mode for this feature though.\nDocker compose was not yet implemented. ",
    "Toilal": "Yes, supporting such docker-compose.yml files\nyml\nversion: \"2\"\nservices:\n  web:\n    build: ./docker/web\n    ...\nThis should build image located in ./docker/web relative to the docker client working directory.\nProblem is that Docker API doesn't support sending the build context over API. It only supports downloading it from a tarball URI, which can make things quite complicated.\nSee https://docs.docker.com/engine/api/v1.33/#operation/ImageBuild\n\nremote: string\nA Git repository URI or HTTP/HTTPS context URI. If the URI points to a single text file, the file\u2019s contents are placed into a file called Dockerfile and the image is built from that file. If the URI points to a tarball, the file is downloaded by the daemon and the contents therein used as the context for the build. If the URI points to a tarball and the dockerfile parameter is also specified, there must be a file with the corresponding path inside the tarball.. \n",
    "bruno-lopes": "Any news on this?. ",
    "gjonespf": "I think what we have here is already awesome.  I have a similar use case to some above using a set of folders per stack (e.g. @alwaysastudent, @schmunk42  ).  I'd suggest to get something like that to work, would be great to build a custom \"stack manager\" container that interfaces to portainer using the API (API PR and potentially separate project for the manager), rather than adding this complexity to the core project.  I'd imagine you could build something very basic which links into app templates and just uses a list of folders/compose files which you could volume mount / build into the \"stack manager\".  I can also see for my use case I'd probably want something more custom as my current stacks use powershell deployment scripts.  I'll have to have a play around with the API and see what is available.. @deviantony  Indeed this is a great start, but thinking reverse-proxy-with-auth is a better idea for most envs - and as long as you can do a --no-auth on portainer, this should be easy enough for people to set up (tho if you're looking at RBAC then that's another ballgame).  Would also suggest setting via env var isn't so bad - you likely wouldn't do for prod, but if you did you should understand the implications regardless.  That, and you can use an env file to mitigate some of the issue (seeing it on proc deets). I'd like to set a consistent default admin account/pw by simply adding env vars for dev, but this currently isn't possible.. Not sure if it's helpful, but Traefik needed something similar which may be useful for you guys also:\nhttps://github.com/abronan/valkeyrie/\nIs an updated fork of libkv. Unsure whether it would suit your purpose, but worth a look.  Since you mentioned BoltDB.. Thinking I can understand the security implications for how you've implemented this.  However, doesn't work well when running portainer in swarm mode with multi nodes.  If the original portainer node goes down or task is otherwise rescheduled, this will break the setup - unless the portainer storage volume is replicated across swarm.  I notice you've documented a note on this here:\nhttp://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\n\nNote: The Swarm service example will persist Portainer data in /path/on/host/data for each host in the cluster. If the container is re-scheduled on another node, existing Portainer data might not be available. Persisting data across all nodes of a Swarm cluster is outside the scope of this documentation.\n\nIs there another option for storage of the key data that will work with swarm mode, without needing this volume replication?  Ideally, if we ran the portainer service in global mode, could portainer itself handle updating key data on each node? \n. Thanks @ncresswell - yeah and I guess trick there is how deep down the rabbit hole you go, not wanting to implement raft within portainer etc.  For reference, I think the issue you're talking about with swarm db setup is here: #523 . ",
    "durino13": "Any news on docker-compose support? It would be nice to have the ability to start / stop / restart the whole compose stack .. . ",
    "Doctor-Who": "I hope it will be available with load balancing option. ",
    "rtmaster": "Any news on docker-compose support?. +1. +1. Hi @1138-4EB \nI like the third option \u201cDo not provide any container, but add binaries to the portainer container as asset\u201d\nif this could simply be managed inside Portainer, why add complexity?\nJust IMHO. Eheh you have a good point, I am looking at it from the perspective of having to deal with a separate container. Portainer is so great that in a single container easy to use you have all these features.\n. Grouping endpoints would be extremely useful!\n+1\nIt should then be possible to associate users or teams to a group for a  more sustainable user management. Having what WTFKr0 describes would be very useful for devops\nA view like that could be for a single endpoint or for all of them. This is great. It should be possible to edit the endpoint when offline as well (e.g. add a Tag). Yes @xAt0mZ you are right.\nI am talking about editing the tags of the endpoint. Nothing else.. Search multiple words at the same time (e.g. a tag and group name). Filtering by Up / Down would be very useful as well. ",
    "mrmachine": "This decision makes sense. A regular compose file started on a standalone Docker Engine has no corresponding entity that is listable or manageable via Docker CLI/API. If there were, it would be a functional subset of a Swarm Mode stack (lacking the deploy options).\nIt would be very confusing if Portainer's UI tried to implement Swarm Mode stacks (docker stack ...) AND a faux \"compose stack\".\nOf course, this means everyone who runs on a single host (vs a cluster) will probably want to run a single node Swarm Mode cluster just so they can manage stacks. Doesn't seem like a big deal.\nThis issue should be closed, then?. I think #1857 is related. Absolutely, this would be amazing. I'd love to see a history log, especially one I can tail and live filter, that shows all all end-user actions (e.g. update stack, update service) with detail (if available) and/or (via filtering) docker events (e.g. container die/restart/unhealthy) and portainer errors (unable to get container, invalid stack file in create stack page, etc.). I think this will not be necessary when #461 is implemented, however as that is a huge task that has been open for a long time now and is not currently a priority, this might a quicker and easier task that solves a lot of today's pain when managing containers on a swarm cluster.\n1) Auto discover and register endpoints for all nodes in swarm, as per: https://github.com/softonic/portainer-endpoint\n2) Query containers on all endpoints for display on containers view no matter the currently selected endpoint.\nAn extremely basic implementation could even just use jQuery AJAX to 1) select each endpoint; 2) obtain and request the containers URL from the sidebar for each endpoint; 3) inject the container list from each AJAX response into the current page.\nI'm sure this would be easier and faster to do server side within Portainer itself.\n. Seems like #461 is closer than I thought. Best not to waste any time on my suggestions from above, then.. @deviantony If there's only one endpoint configured, I think the UI should behave as it does now (with just \"dashboard\", not \"endpoint overview\"). Plus, I think we should remove the pointless endpoint dropdown unless 2+ endpoints are configured.. This would be very helpful. Sometimes when a container is failing to start because of a failing database migration required by an updated image or some other code bug, it's useful to be able to quickly change the command to something like sleep 86400 then exec into the container and debug.. This state error message (when it is not empty) is very important. I think it should not only be displayed on the task detail page, but any/all of:\n\nAs a sticky alert that appears and persists on any page whenever any task has a pending state with an error message;\nAs a column next to Status column in task lists\nAs a tooltip when you hover over the Pending badge in task lists\n\nIt would also be great if we could configure email or webhook alerts for errors like \"insufficient resources on X nodes\". When this happens, tasks will not be scheduled until we manually scale up the number of workers.. Instead of setting a huge 7 day proxy read timeout, can Portainer be configured to send heartbeat or keep-alive requests so that some data is always read within say 30s?\n. I've just tried updating my HAproxy config. I made it almost identical with the known working configuration at http://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer-using-haproxy (at least all the options and timeouts)... it still becomes after responsive after switching away from the web console for a minute (or maybe even less).\nHere's my HAproxy config, to compare with the known working config:\nglobal\n  log 127.0.0.1 local0\n  log 127.0.0.1 local1 notice\n  log-send-hostname\n  maxconn 4096\n  pidfile /var/run/haproxy.pid\n  user haproxy\n  group haproxy\n  daemon\n  stats socket /var/run/haproxy.stats level admin\n  ssl-default-bind-options no-sslv3\n  ssl-default-bind-ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:AES128-GCM-SHA256:AES128-SHA256:AES128-SHA:AES256-GCM-SHA384:AES256-SHA256:AES256-SHA:DHE-DSS-AES128-SHA:DES-CBC3-SHA\ndefaults\n  balance roundrobin\n  log global\n  mode http\n  option redispatch\n  option httplog\n  option dontlognull\n  option forwardfor\n  option http-keep-alive\n  option http-server-close\n  timeout http-request 300s\n  timeout queue 1m\n  timeout connect 10s\n  timeout client 1m\n  timeout server 1m\n  timeout http-keep-alive 10s\n  timeout check 10s\n  retries 30\nlisten stats\n  bind :1936\n  mode http\n  stats enable\n  timeout connect 10s\n  timeout client 1m\n  timeout server 1m\n  stats hide-version\n  stats realm Haproxy\\ Statistics\n  stats uri /\n  stats auth stats:stats\nfrontend port_443\n  bind :443 ssl crt /certs/\n  reqadd X-Forwarded-Proto:\\ https\n  maxconn 4096\n  option http-keep-alive\n  acl is_websocket hdr(Upgrade) -i WebSocket\n  acl host_rule_1 hdr_reg(host) -i ^portainer\\..*$\n  acl host_rule_1_port hdr_reg(host) -i ^portainer\\..*:443$\n  use_backend SERVICE_system_portainer if host_rule_1 or host_rule_1_port\nbackend SERVICE_system_portainer\n  option forwardfor\n  option http-keep-alive\n  server system_portainer.1.s0ui6l98wi06tlnt6py2p4k37 10.0.0.72:9000 check inter 2000 rise 2 fall 3\nThe known working config:\n```\nglobal\n    maxconn                     10000\n    daemon\n    ssl-server-verify           none\n    tune.ssl.default-dh-param   2048\ndefaults\n    mode    http\n    log     global\n    option  httplog\n    option  dontlognull\n    option  http-server-close\n    option  forwardfor          except 127.0.0.0/8\n    option  redispatch\n    retries 30\n    timeout http-request        300s\n    timeout queue               1m\n    timeout connect             10s\n    timeout client              1m\n    timeout server              1m\n    timeout http-keep-alive     10s\n    timeout check               10s\n    maxconn 10000\nuserlist users\n    group all\n    group demo\n    group haproxy\nlisten stats\n    bind            *:2100\n    mode            http\n    stats           enable\n    maxconn         10\n    timeout client  10s\n    timeout server  10s\n    timeout connect 10s\n    timeout         queue   10s\n    stats           hide-version\n    stats           refresh 30s\n    stats           show-node\n    stats           realm Haproxy\\ Statistics\n    stats           uri  /\n    stats           admin if TRUE\nfrontend www-http\n    bind    *:80\n    stats   enable\n    mode    http\n    option  http-keep-alive\nacl portainer   hdr_end(host)   -i portainer.127.0.0.1.xip.io\n\nuse_backend     portainer       if portainer\n\nbackend portainer\n    stats   enable\n    option  forwardfor\n    option  http-keep-alive\n    server  portainer    127.0.0.1:9000 check\n```\nThis is with HAproxy running locally in the same stack, no external AWS load balancer. We run other applications that rely on websockets through this proxy (with its default configuration) and do not experience these issues.\n. update: I think I finally got it working. The two important options for HAproxy are:\ndefaults\n  timeout client 1d\n  timeout server 1d\nI think everything else can probably stay as-is. Unfortunately it seems this has to be added to defaults, not individual backends, so it will apply to all the sites you have running behind HAproxy.\n@deviantony might wanna update the docs?. I don't think Portainer should provide a reverse-proxy service for all the containers you might run on your Docker host or cluster, but I do think that Portainer should itself run behind a reverse proxy with SSL termination via self signed certificate (by default) or Let's Encrypt (optional) or manually provided certificate (optional)... I don't ever want to access Portainer itself over the Internet via HTTP, even for first request where I am asked to choose an admin password... Right now it's just up to me to choose which reverse proxy to use and how to configure it etc., but ideally I would use Portainer to actually configure and run that reverse proxy, making a chicken and egg problem... Rancher 2.0 preview uses a self signed certificate by default.... @deviantony seems like the requested feature is still missing (open console from task detail page, perhaps also task list on stack/service detail page), and that only the proposed implementation of that feature here was the reason this issue was closed/rejected.\nAfter #461 is implemented, will it become easier to implement console/logs/stats buttons for stack/service task list/detail, like we do in the containers list?\nOr am I missing some meaningful distinction between task/container that makes it not appropriate? I believe the only tasks Docker Swarm currently implements are containers, although they do say a task could potentially one day be for some other non-container operation. Even then, we could show the console/logs/stats buttons only for container tasks.\n. @deviantony should this be re-opened now that #461 is out, and the console link is still missing from the task detail page?. This should also happen when updating a stack (not only a service). If the user chooses to update images, images for all services should be re-resolved.. @deviantony I think the new modal that asks if we want to update a pinned service image on update is great, but it should be opt-in instead of the current opt-out behaviour. E.g. the default should be to NOT update, requiring the user to toggle the button before clicking OK to go ahead with the update.\nThe reason is that pulling a new version of a service is potentially a dangerous operation when done in isolation from the rest of your project stack. And there are equally valid (possibly even more common) reasons to \"update\" a service without updating the image being used (e.g. to rebalance replicas across the swarm).\nSince this is potentially a dangerous operation, and we should be really sure the user actually wants to do this. Currently it's too easy to click update then click through the prompt on auto pilot.\nIf someone does this now, they could end up with a broken site. If we change to opt-out, the worst that can happen is they have to do it again and remember to check the box the second time.. @Brain-Gamer YAML forbids the use of tabs for indentation. 2 spaces for indentation is the consensus with YAML.\nhttp://www.yaml.org/faq.html. @deviantony coming from #1577, this issue a request to disable image resolving on stack deploy, and claims that this already happens because --resolve-image always is the default. Or is it the case that always is the default to --resolve-image, but --resolve-image itself is not default and is not used? I haven't done any specific testing, but I think the behaviour I observed was the updating a stack did not re-resolve an image with a mutable tag like staging that had a sha256 digest added to it automatically when the stack was created. In any case, the feature I'm after is a way to have a service and/or a stack and all services belonging to that stack, re-resolve their images even if a sha256 digest is specified, and then to store the image again with a new sha256 digest so that the same image is always used when a tasks are scheduled on different workers.. @deviantony This is amazing, and thanks very much for all the hard work. I've been testing this, and roped in a few co-workers to test today also. I think we've found a bug.\nWhen I attempt to deploy a stack which needs private images from the default (Docker Cloud/Hub) registry, those services using private images get stuck in a startup loop.\nNo service logs are available, and no task logs are available. Tasks are typically gone by the time I can even click into them.\nA clue came when attempting to deploy the stack via CLI, where I got:\nUpdating service foo-sandbox_gunicorn (id: q84fquyfgmwzvxiomqmjgjkl4)\nimage foo/foo:staging could not be accessed on a registry to record\nits digest. Each node will access foo/foo:staging independently,\npossibly leading to different nodes running different\nversions of the image.\nThat matched up with what I saw in portainer earlier, that the image for the service was foo/foo:staging and did not have a sha256 digest. I happened to stumble across something (can't remember where) that said the image was missing, not found or not available, etc.\nI manually pulled the image via the image page in Portainer, and my services started up. But got the same error again when deploying another stack.\nGoogling the error above lead me to https://github.com/moby/moby/issues/34153 which suggests that I need to use --with-registry-auth with docker stack deploy ... Indeed, that did fix it when I redeployed via the command line. Now my service images have a sha256 digest and no error was reported.\nI removed my portainer and portainer-agent services and deployed a portainer/portainer (stable) service to test. I removed and re-created my stack. It deployed successfully and my service images have a sha256 digest.\nSo I think this is a bug in the new portainer:agent-support or agent:develop code. Somehow --with-registry-auth is no longer being used when creating stacks via Portainer.\n. @bollinenisravan Are you expecting to see containers, or services in the cluster visualizer? I can see all my services (standalone and created via stacks) across the whole cluster in the visualizer. I can't see standalone containers that are running on each node. These containers in my case are Docker for AWS \"system\" containers that are started by the OS, and I suspect they the cluster visualiser is only intended to show swarm services.. This should also display reservations/limits along side capacity on the Swarm page in both the overall Cluster status list and the Nodes list.. Right. It doesn't have to be a tabular list, but it does need to scale\nbetter than now for larger swarms, even on large monitors. And this\nshouldn't absolutely require a monitor bigger than 27\" to be useful.\nOn Sun, 20 May 2018, 5:06 pm Neil Cresswell, notifications@github.com\nwrote:\n\nMy vision for this page is that is can be used as a NOC (network\noperations center) visualiser on large resolution monitors. It should be\npurely visual, pictorial, and the information it portrays able to be\nconsumed in an instant (green/orange/red type). A list of containers is not\nsuitable for this.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1859#issuecomment-390462388,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AADK4zCi3fQiX1fx6P4RqQYz8kH5NpVyks5t0RYBgaJpZM4TxPjQ\n.\n. @deviantony I think this ticket is about notifying the developer who is using Portainer immediately, as they are right at that very moment attempting to deploy a stack or scale a service. #943 sounds like my \"bonus points\" wish for a webhook so we could think about automating our response to various errors, but I don't think that should delay or supersede this.. Maybe you are thinking of #335?\n. @deviantony haven't seen it again yet, and I checked a handful of times throughout the day today. Might be related, but still seems buggy. I would have thought that if an agent is unable to successfully execute Docker CLI/API due to constraints, it wouldn't show any containers from the affected node, or would show an error (unhealthy agent)?. @deviantony I spoke too soon. It just happened again, and I noticed right after updating/redeploying a stack. Though all containers are duplicated, not just the ones that were recreated by the update.\n\nHere's my portainer log:\n2018/05/08 10:43:25 Instance already has defined endpoints. Skipping the endpoint defined via CLI.,\n2018/05/08 10:43:25 Starting Portainer 1.16.5 on :9000,\n2018/05/08 10:44:34 http: proxy error: EOF,\n2018/05/08 10:44:53 http: panic serving 10.0.0.8:35034: interface conversion: interface {} is map[string]interface {}, not []interface {},\ngoroutine 9 [running]:,\nnet/http.(*conn).serve.func1(0xc42036a780),\n    /usr/local/go/src/net/http/server.go:1697 +0xd0,\npanic(0xa62840, 0xc4202f5cc0),\n    /usr/local/go/src/runtime/panic.go:491 +0x283,\ngithub.com/portainer/portainer/http/proxy.getResponseAsJSONArray(0xc420329710, 0x0, 0x0, 0x0, 0x7010106, 0x0),\n    /go/src/github.com/portainer/portainer/http/proxy/response.go:42 +0xd3,\ngithub.com/portainer/portainer/http/proxy.containerListOperation(0xc420329710, 0xc4202e10e0, 0xc420329710, 0x0),\n    /go/src/github.com/portainer/portainer/http/proxy/containers.go:23 +0x32,\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).executeRequestAndRewriteResponse(0xc4203889a0, 0xc420454500, 0xb4a800, 0xc4202e10e0, 0x0, 0xc420090401, 0xc420398470),\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:407 +0x86,\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).rewriteOperationWithLabelFiltering(0xc4203889a0, 0xc420454500, 0xb4a800, 0xc4200904f8, 0xc420385588, 0x83cf43),\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:374 +0x10c,\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).proxyContainerRequest(0xc4203889a0, 0xc420454500, 0xb24cdd, 0xb, 0x1),\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:131 +0x3d0,\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).proxyDockerRequest(0xc4203889a0, 0xc420454500, 0xf, 0xc4204c1060, 0x14),\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:80 +0x64e,\ngithub.com/portainer/portainer/http/proxy.(*proxyTransport).RoundTrip(0xc4203889a0, 0xc420454500, 0xf, 0xc4204c1060, 0x14),\n    /go/src/github.com/portainer/portainer/http/proxy/transport.go:55 +0x35,\nnet/http/httputil.(*ReverseProxy).ServeHTTP(0xc4203da700, 0xe9a9c0, 0xc420136d20, 0xc420454400),\n    /usr/local/go/src/net/http/httputil/reverseproxy.go:201 +0x2dd,\nnet/http.StripPrefix.func1(0xe9a9c0, 0xc420136d20, 0xc420454200),\n    /usr/local/go/src/net/http/server.go:1957 +0x1a5,\nnet/http.HandlerFunc.ServeHTTP(0xc4204e27e0, 0xe9a9c0, 0xc420136d20, 0xc420454200),\n    /usr/local/go/src/net/http/server.go:1918 +0x44,\ngithub.com/portainer/portainer/http/handler.(*DockerHandler).proxyRequestsToDockerAPI(0xc420240fa0, 0xe9a9c0, 0xc420136d20, 0xc420454200),\n    /go/src/github.com/portainer/portainer/http/handler/docker.go:91 +0x291,\ngithub.com/portainer/portainer/http/handler.(*DockerHandler).(github.com/portainer/portainer/http/handler.proxyRequestsToDockerAPI)-fm(0xe9a9c0, 0xc420136d20, 0xc420454200),\n    /go/src/github.com/portainer/portainer/http/handler/docker.go:35 +0x48,\nnet/http.HandlerFunc.ServeHTTP(0xc4203026d0, 0xe9a9c0, 0xc420136d20, 0xc420454200),\n    /usr/local/go/src/net/http/server.go:1918 +0x44,\ngithub.com/portainer/portainer/http/security.(*RequestBouncer).mwCheckAuthentication.func1(0xe9a9c0, 0xc420136d20, 0xc420454100),\n    /go/src/github.com/portainer/portainer/http/security/bouncer.go:157 +0xc3,\nnet/http.HandlerFunc.ServeHTTP(0xc4203145e0, 0xe9a9c0, 0xc420136d20, 0xc420454100),\n    /usr/local/go/src/net/http/server.go:1918 +0x44,\ngithub.com/portainer/portainer/http/security.mwSecureHeaders.func1(0xe9a9c0, 0xc420136d20, 0xc420454100),\n    /go/src/github.com/portainer/portainer/http/security/bouncer.go:78 +0xfd,\nnet/http.HandlerFunc.ServeHTTP(0xc420314600, 0xe9a9c0, 0xc420136d20, 0xc420454100),\n    /usr/local/go/src/net/http/server.go:1918 +0x44,\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc420316850, 0xe9a9c0, 0xc420136d20, 0xc420454100),\n    /go/src/github.com/gorilla/mux/mux.go:162 +0xed,\nnet/http.StripPrefix.func1(0xe9a9c0, 0xc420136d20, 0xc4203ee800),\n    /usr/local/go/src/net/http/server.go:1957 +0x1a5,\nnet/http.HandlerFunc.ServeHTTP(0xc4204e2570, 0xe9a9c0, 0xc420136d20, 0xc4203ee800),\n    /usr/local/go/src/net/http/server.go:1918 +0x44,\ngithub.com/portainer/portainer/http/handler.(*Handler).ServeHTTP(0xc42036a500, 0xe9a9c0, 0xc420136d20, 0xc4203ee800),\n    /go/src/github.com/portainer/portainer/http/handler/handler.go:60 +0x94e,\nnet/http.serverHandler.ServeHTTP(0xc420372000, 0xe9a9c0, 0xc420136d20, 0xc4203ee800),\n    /usr/local/go/src/net/http/server.go:2619 +0xb4,\nnet/http.(*conn).serve(0xc42036a780, 0xe9b480, 0xc420157f40),\n    /usr/local/go/src/net/http/server.go:1801 +0x71d,\ncreated by net/http.(*Server).Serve,\n    /usr/local/go/src/net/http/server.go:2720 +0x288,\n2018/05/08 13:22:53 websocketproxy: error when copying from client to backend using ReadMessage: read tcp 10.0.0.139:9000->10.0.0.8:54374: read: connection reset by peer,\n2018/05/08 13:22:53 websocketproxy: error when copying from backend to client using ReadMessage: read tcp 10.0.1.12:39610->10.0.1.15:9001: use of closed network connection,\n2018/05/08 13:28:29 websocketproxy: error when copying from client to backend using ReadMessage: read tcp 10.0.0.139:9000->10.0.0.8:56524: read: connection reset by peer,\n2018/05/08 13:28:29 websocketproxy: error when copying from backend to client using ReadMessage: read tcp 10.0.1.12:40294->10.0.1.15:9001: use of closed network connection,\n2018/05/08 13:30:16 websocketproxy: error when copying from client to backend using ReadMessage: read tcp 10.0.0.139:9000->10.0.0.8:56660: read: connection reset by peer,\n2018/05/08 13:30:16 websocketproxy: error when copying from backend to client using ReadMessage: read tcp 10.0.1.12:40364->10.0.1.15:9001: use of closed network connection,\n2018/05/08 13:31:23 websocketproxy: error when copying from client to backend using ReadMessage: websocket: close 1005 (no status),\n2018/05/08 13:31:23 websocketproxy: error when copying from backend to client using ReadMessage: read tcp 10.0.1.12:40766->10.0.1.15:9001: use of closed network connection,\n2018/05/08 13:50:13 http: proxy error: Docker container identifier not found,\n2018/05/08 13:50:26 http: proxy error: Docker container identifier not found,\n2018/05/08 13:50:27 websocketproxy: error when copying from client to backend using ReadMessage: read tcp 10.0.0.139:9000->10.0.0.8:35934: read: connection reset by peer,\n2018/05/08 13:50:27 websocketproxy: error when copying from backend to client using ReadMessage: read tcp 10.0.1.12:49552->10.0.1.14:9001: use of closed network connection,\n2018/05/08 13:51:34 http: proxy error: Docker container identifier not found,\n2018/05/08 13:53:26 http: proxy error: Docker container identifier not found,\n2018/05/08 13:53:29 http: proxy error: Docker container identifier not found,\n2018/05/08 13:53:33 http: proxy error: Docker container identifier not found,\nAnd agent logs...\n2018/05/08 10:44:51 [INFO] serf: EventMemberJoin: 25337e447d10 10.0.1.15,\n2018/05/08 10:44:51 [INFO] serf: EventMemberJoin: 5543a930c23e 10.0.1.14,\n2018/05/08 10:44:51 [INFO] serf: EventMemberJoin: be3dcd35aec8 10.0.1.13,\n2018/05/08 13:50:27 http error: websocket: close 1006 (abnormal closure): unexpected EOF (code=500),\n2018/05/08 13:50:27 http: response.WriteHeader on hijacked connection,\n2018/05/08 13:50:27 http: response.Write on hijacked connection,\n2018/05/08 10:44:34 [INFO] serf: EventMemberJoin: be3dcd35aec8 10.0.1.13,\n2018/05/08 10:44:34 [INFO] serf: EventMemberJoin: 49f794e80ed3 10.0.1.8,\n2018/05/08 10:44:34 [INFO] serf: EventMemberJoin: ffac4ebd81ba 10.0.1.10,\n2018/05/08 10:44:36 [INFO] memberlist: Suspect ffac4ebd81ba has failed, no acks received,\n2018/05/08 10:44:38 [INFO] memberlist: Suspect ffac4ebd81ba has failed, no acks received,\n2018/05/08 10:44:40 [INFO] memberlist: Marking ffac4ebd81ba as failed, suspect timeout reached (0 peer confirmations),\n2018/05/08 10:44:40 [INFO] serf: EventMemberFailed: ffac4ebd81ba 10.0.1.10,\n2018/05/08 10:44:41 [INFO] memberlist: Suspect ffac4ebd81ba has failed, no acks received,\n2018/05/08 10:44:42 [INFO] serf: EventMemberJoin: 5543a930c23e 10.0.1.14,\n2018/05/08 10:44:44 [INFO] memberlist: Suspect 49f794e80ed3 has failed, no acks received,\n2018/05/08 10:44:46 [INFO] memberlist: Suspect 49f794e80ed3 has failed, no acks received,\n2018/05/08 10:44:48 [INFO] serf: EventMemberFailed: 49f794e80ed3 10.0.1.8,\n2018/05/08 10:44:49 [INFO] memberlist: Suspect 49f794e80ed3 has failed, no acks received,\n2018/05/08 10:44:51 [INFO] serf: EventMemberJoin: 25337e447d10 10.0.1.15,\n2018/05/08 10:44:53 http error: Get https://10.0.1.8:9001/containers/json: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) (code=500),\n2018/05/08 10:44:53 http error: Get https://10.0.1.8:9001/images/json?all=0: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) (code=500),\n2018/05/08 10:45:04 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:45:44 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:46:24 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:46:57 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:47:30 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:48:03 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:49:07 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:50:10 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:51:43 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:52:16 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:52:49 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:53:22 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:54:55 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:56:58 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:58:01 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:59:05 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:59:38 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:00:11 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:00:44 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:01:17 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:01:50 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:02:23 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:03:26 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:04:30 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:05:03 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:06:06 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:07:09 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:08:12 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:09:15 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:09:48 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:11:21 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:11:55 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:12:58 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:13:31 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:14:34 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:16:07 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:16:40 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:17:43 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:18:16 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:18:49 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:19:53 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:20:26 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:20:59 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:22:02 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:22:35 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:23:08 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:23:41 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:24:44 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:25:18 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:25:51 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:26:24 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:26:57 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:27:30 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:28:33 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:29:06 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:30:39 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:31:13 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:31:46 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:32:19 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:32:52 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:33:25 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:35:28 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:36:01 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:37:34 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:38:07 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:38:41 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:39:14 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:40:17 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:40:50 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:41:53 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:42:56 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:43:29 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:44:02 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:44:36 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:45:39 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:47:42 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:48:15 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:49:48 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:50:21 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:50:54 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:51:27 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:52:01 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:52:34 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:54:07 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:54:40 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:56:13 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:57:16 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:57:49 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 11:58:22 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:58:55 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:59:29 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:00:32 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:01:05 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:02:38 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:03:11 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:04:14 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:04:47 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:05:20 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:05:54 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:07:27 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:08:30 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:09:03 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:09:36 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:10:09 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:10:42 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:11:15 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:13:19 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:13:52 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:14:25 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:14:58 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:15:31 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:17:04 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:17:37 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:18:10 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:19:13 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:19:47 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:20:20 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:20:53 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:21:56 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:22:59 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:23:32 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:24:35 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:25:08 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:26:12 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:28:15 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:28:48 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:30:21 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:31:24 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:31:57 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:32:30 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:33:33 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:35:07 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:35:40 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:36:43 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:37:16 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:37:49 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:39:22 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:40:25 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:40:58 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:42:31 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:43:05 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:43:38 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:44:41 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:45:14 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:45:47 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:46:50 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:47:23 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:47:56 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:48:30 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:49:03 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:49:36 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:50:09 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:51:12 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:52:15 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:52:48 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:53:21 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:54:55 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:55:28 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:56:01 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:57:04 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:57:37 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:58:10 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:58:43 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 12:59:16 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:59:49 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:00:23 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:01:26 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:01:59 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:02:32 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:03:05 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:04:38 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:06:11 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:06:44 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:07:18 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:08:21 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:08:54 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:09:27 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:10:00 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:10:33 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:11:06 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:11:39 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:12:43 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:13:46 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:14:19 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:14:52 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:15:25 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:15:58 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:16:31 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:18:34 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:19:07 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:20:41 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:21:14 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:21:47 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:23:50 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:24:23 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:24:56 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:25:59 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:26:32 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:27:06 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:28:09 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:29:12 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:30:15 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:30:48 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:31:21 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:31:54 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:32:27 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:34:31 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:35:04 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:35:37 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:36:10 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:36:43 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:37:16 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:37:49 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:38:52 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:39:25 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:39:59 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:41:02 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:43:05 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:43:38 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:44:11 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:45:14 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:45:47 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:46:20 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:47:24 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:49:27 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:50:30 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:51:03 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:52:36 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 13:53:09 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:53:42 [INFO] serf: attempting reconnect to ffac4ebd81ba 10.0.1.10:7946,\n2018/05/08 10:44:42 [INFO] serf: EventMemberJoin: 5543a930c23e 10.0.1.14,\n2018/05/08 10:44:42 [INFO] serf: EventMemberJoin: 49f794e80ed3 10.0.1.8,\n2018/05/08 10:44:42 [INFO] serf: EventMemberJoin: be3dcd35aec8 10.0.1.13,\n2018/05/08 10:44:44 [INFO] memberlist: Suspect 49f794e80ed3 has failed, no acks received,\n2018/05/08 10:44:47 [INFO] memberlist: Suspect 49f794e80ed3 has failed, no acks received,\n2018/05/08 10:44:48 [INFO] memberlist: Marking 49f794e80ed3 as failed, suspect timeout reached (0 peer confirmations),\n2018/05/08 10:44:48 [INFO] serf: EventMemberFailed: 49f794e80ed3 10.0.1.8,\n2018/05/08 10:44:49 [INFO] memberlist: Suspect 49f794e80ed3 has failed, no acks received,\n2018/05/08 10:44:51 [INFO] serf: EventMemberJoin: 25337e447d10 10.0.1.15,\n2018/05/08 10:44:53 http error: Get https://10.0.1.8:9001/volumes: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) (code=500),\n2018/05/08 10:46:42 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:48:45 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:49:18 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:50:21 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:53:55 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:55:58 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 10:59:31 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:02:04 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:04:37 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:08:10 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:09:43 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:10:16 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:10:50 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:11:53 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:12:26 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:13:59 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:17:32 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:22:05 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:22:38 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:25:11 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:26:45 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:28:48 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:29:21 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:30:24 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:30:57 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:31:30 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:34:03 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:36:36 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:41:09 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:41:43 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:42:46 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:43:49 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:44:22 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:46:25 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:47:28 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:49:31 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:51:04 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:51:38 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:52:11 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:52:44 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:53:17 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:54:20 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:54:53 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:55:56 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:56:29 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 11:57:03 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:00:36 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:04:09 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:04:42 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:05:45 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:06:48 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:07:21 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:09:24 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:11:57 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:15:31 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:18:04 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:19:07 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:19:40 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:20:43 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:23:16 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:24:49 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:33:52 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:35:56 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:36:59 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:37:32 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:38:05 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:39:08 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:39:41 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:42:14 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:43:17 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:47:21 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:47:54 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:49:57 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:52:22 http: TLS handshake error from 10.0.1.12:42560: EOF,\n2018/05/08 12:52:30 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:54:33 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:55:36 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:56:09 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:56:42 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 12:57:15 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:00:49 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:01:52 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:02:55 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:04:58 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:06:01 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:10:34 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:11:07 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:11:40 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:12:14 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:13:47 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:15:20 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:16:23 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:17:56 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:18:29 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:19:02 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:20:05 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:21:09 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:22:53 http error: websocket: close 1006 (abnormal closure): unexpected EOF (code=500),\n2018/05/08 13:22:53 http: response.WriteHeader on hijacked connection,\n2018/05/08 13:22:53 http: response.Write on hijacked connection,\n2018/05/08 13:24:42 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:26:45 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:27:18 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:27:51 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:28:29 http error: websocket: close 1006 (abnormal closure): unexpected EOF (code=500),\n2018/05/08 13:28:29 http: response.WriteHeader on hijacked connection,\n2018/05/08 13:28:29 http: response.Write on hijacked connection,\n2018/05/08 13:30:16 http error: websocket: close 1006 (abnormal closure): unexpected EOF (code=500),\n2018/05/08 13:30:16 http: response.WriteHeader on hijacked connection,\n2018/05/08 13:30:16 http: response.Write on hijacked connection,\n2018/05/08 13:30:24 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:30:57 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:31:23 http error: websocket: close 1006 (abnormal closure): unexpected EOF (code=500),\n2018/05/08 13:31:23 http: response.WriteHeader on hijacked connection,\n2018/05/08 13:31:23 http: response.Write on hijacked connection,\n2018/05/08 13:32:30 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:34:03 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:37:07 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:37:40 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:40:43 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:41:16 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:42:49 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:43:52 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:44:25 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:44:58 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:47:32 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:48:05 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:49:08 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:50:11 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:50:44 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:51:17 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:51:50 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:52:23 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:52:57 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n2018/05/08 13:53:30 [INFO] serf: attempting reconnect to 49f794e80ed3 10.0.1.8:7946,\n. And again, reloading the page sometimes shows duplicates and sometimes does not.. I happen to also be running an instance of portainer/portainer (no tag) pointed at the same swarm cluster with a local unix socket endpoint.\nI opened the portainer/portainer install which already happened to have one local stack that I can edit (the rest, created via the agent-support install show as \"external\"), clicked update the stack and got the same \"unable to create stack\" error immediately.\nAttempting to copy paste that same stack and deploy it as a new stack named test gives me a yellow \"deployment error\", then clicking \"deploy the stack\" again gives me a yellow \"stack already exists with that name\" error.\nnavigating into the new test stack shows the stack file saved and no tasks are running. Clicking update the stack immediately gives the same \"unable to create stack\" error.\nthe portainer/portainer log doesn't seem to have anything useful:\n2018/05/06 14:25:40 Starting Portainer 1.16.5 on :9000,\n2018/05/06 14:36:01 http error: User not found (code=404),\n2018/05/06 15:11:12 http error:  (code=500),\n2018/05/06 15:11:22 http error:  (code=500),\n2018/05/06 15:11:27 http error:  (code=500),\n2018/05/06 15:11:29 http error:  (code=500),\n2018/05/06 15:11:30 http error:  (code=500),\n2018/05/06 15:12:18 http error:  (code=500),\n2018/05/06 15:12:20 http error:  (code=500),\n2018/05/06 15:14:20 http error:  (code=500),\n2018/05/06 15:14:29 http error:  (code=500),\n2018/05/07 07:19:26 http error:  (code=500),\n2018/05/07 07:20:44 http error:  (code=500),\n2018/05/07 07:21:13 http error: A stack already exists with this name (code=409),\n2018/05/07 07:21:24 http error: A stack already exists with this name (code=409),\n2018/05/07 07:21:59 http error:  (code=500),\n2018/05/07 07:22:11 http error:  (code=500),\nHere's the offending stack:\n```yaml\nversion: '3.4'\nservices:\n  authorizedkeys:\n    deploy:\n      mode: global\n      resources:\n        limits:\n          cpus: '0.05'\n          memory: 10M\n        reservations:\n          cpus: '0.01'\n          memory: 10M\n      restart_policy:\n        condition: on-failure\n    environment:\n      AUTHORIZED_KEYS: |\n        ssh-rsa ...\n    hostname: '{{ .Service.Name }}-{{ .Task.Slot }}'\n    image: interaction/dockercloud-authorizedkeys:ixc\n    volumes:\n      - ${HOME_DIR:-/root}:/user\nHOME_DIR=/home/docker\n```\n. Looks like the problem was low memory limit I had on my portainer/portainer-agent services.\nDataDog was showing typical usage at under 10MB over time so I set a memory limit of 16MB.\nPerhaps when Portainer attempts to do something like update a stack and interacts with the Docker API (via embedded Docker CLI?) memory requirements momentarily exceed the limit and Docker fails then Portainer reports the failure (without a helpful error message, though).\nIt'd be good to see a recommended safe memory reservation/limit in the docs.\nI haven't seen the problem again since removing the memory and CPU limits (though I think the problem was just the memory limit).. I think the same thing happens for CloudStor volumes on Docker for AWS. Volume is duplicated for each node in the swarm, and shown as \"unused\" for all but one (maybe shows as \"unused\" for all nodes that are not running a container that uses it)?. Also, the task list on the service detail page still shows the text style action links, instead of just the icon style that is used in most/all other task lists.. @deviantony here are some logs with agent:2102\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:03 Found addrs: [172.18.0.3/16]\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:06 [INFO] serf: EventMemberJoin: 605dfbadf9a0 172.18.0.3\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:07 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:09 http error: Missing Portainer public key (err=Portainer public key unavailable) (code=403)\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:09 http error: The agent was unable to contact any other agent located on a manager node (err=Unable to find an agent on any manager node) (code=500)\nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    | 2018/07/31 13:58:10 Found addrs: [127.0.0.1/8 10.0.1.9/32]\nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    | 2018/07/31 13:58:10 Found addrs: []\nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    | panic: runtime error: index out of range\nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    | \nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    | goroutine 1 [running]:\nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    | main.retrieveAdvertiseAddress(0xa48938, 0x1c, 0xc4201a1f10, 0x1)\nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    |  /home/tony/workspaces/portainer/agent/cmd/agent/main.go:97 +0x41a\nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    | main.main()\nsystem_portainer-agent.0.14fcrzkm1ge9@ip-172-31-22-183.us-west-2.compute.internal    |  /home/tony/workspaces/portainer/agent/cmd/agent/main.go:138 +0x25b\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:11 Found addrs: [172.18.0.4/16]\nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    | 2018/07/31 13:58:12 Found addrs: [127.0.0.1/8 10.0.1.9/32]\nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    | 2018/07/31 13:58:12 Found addrs: []\nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    | panic: runtime error: index out of range\nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    | \nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    | goroutine 1 [running]:\nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    | main.retrieveAdvertiseAddress(0xa48938, 0x1c, 0xc4201a1f10, 0x1)\nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    |   /home/tony/workspaces/portainer/agent/cmd/agent/main.go:97 +0x41a\nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    | main.main()\nsystem_portainer-agent.0.jd1ba484sfkl@ip-172-31-8-171.us-west-2.compute.internal    |   /home/tony/workspaces/portainer/agent/cmd/agent/main.go:138 +0x25b\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:14 [INFO] serf: EventMemberJoin: c1ac039dbab1 172.18.0.4\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:14 [INFO] serf: EventMemberJoin: c1ac039dbab1 172.18.0.4\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:14 [INFO] serf: EventMemberJoin: 605dfbadf9a0 172.18.0.3\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:14 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nsystem_portainer-agent.0.fpd6c6n4j4ae@ip-172-31-33-167.us-west-2.compute.internal    | 2018/07/31 13:58:15 Found addrs: [127.0.0.1/8 10.0.1.9/32]\nsystem_portainer-agent.0.fpd6c6n4j4ae@ip-172-31-33-167.us-west-2.compute.internal    | 2018/07/31 13:58:15 Found addrs: [10.0.1.77/24]\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:16 [INFO] memberlist: Suspect 605dfbadf9a0 has failed, no acks received\nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    | 2018/07/31 13:58:16 Found addrs: [127.0.0.1/8 10.0.1.9/32]\nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    | 2018/07/31 13:58:16 Found addrs: []\nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    | panic: runtime error: index out of range\nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    | \nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    | goroutine 1 [running]:\nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    | main.retrieveAdvertiseAddress(0xa48938, 0x1c, 0xc4201a1f10, 0x1)\nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    |  /home/tony/workspaces/portainer/agent/cmd/agent/main.go:97 +0x41a\nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    | main.main()\nsystem_portainer-agent.0.nm5cdx8yjcox@ip-172-31-22-183.us-west-2.compute.internal    |  /home/tony/workspaces/portainer/agent/cmd/agent/main.go:138 +0x25b\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:16 [INFO] memberlist: Suspect c1ac039dbab1 has failed, no acks received\nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    | 2018/07/31 13:58:18 Found addrs: [127.0.0.1/8 10.0.1.9/32]\nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    | 2018/07/31 13:58:18 Found addrs: []\nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    | panic: runtime error: index out of range\nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    | \nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    | goroutine 1 [running]:\nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    | main.retrieveAdvertiseAddress(0xa48938, 0x1c, 0xc4201a1f10, 0x1)\nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    |   /home/tony/workspaces/portainer/agent/cmd/agent/main.go:97 +0x41a\nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    | main.main()\nsystem_portainer-agent.0.txp8rh3h4uwl@ip-172-31-8-171.us-west-2.compute.internal    |   /home/tony/workspaces/portainer/agent/cmd/agent/main.go:138 +0x25b\nsystem_portainer-agent.0.fpd6c6n4j4ae@ip-172-31-33-167.us-west-2.compute.internal    | 2018/07/31 13:58:18 [INFO] serf: EventMemberJoin: 321f6ae41915 10.0.1.77\nsystem_portainer-agent.0.fpd6c6n4j4ae@ip-172-31-33-167.us-west-2.compute.internal    | 2018/07/31 13:58:18 [WARN] memberlist: Failed to resolve tasks.portainer-agent: lookup tasks.portainer-agent on 127.0.0.11:53: no such host\nsystem_portainer-agent.0.fpd6c6n4j4ae@ip-172-31-33-167.us-west-2.compute.internal    | 2018/07/31 13:58:18 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:19 [INFO] memberlist: Suspect 605dfbadf9a0 has failed, no acks received\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:19 [INFO] memberlist: Suspect c1ac039dbab1 has failed, no acks received\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:20 [INFO] memberlist: Marking 605dfbadf9a0 as failed, suspect timeout reached (0 peer confirmations)\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:20 [INFO] serf: EventMemberFailed: 605dfbadf9a0 172.18.0.3\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:20 [INFO] memberlist: Marking c1ac039dbab1 as failed, suspect timeout reached (0 peer confirmations)\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:20 [INFO] serf: EventMemberFailed: c1ac039dbab1 172.18.0.4\nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    | 2018/07/31 13:58:22 Found addrs: [127.0.0.1/8 10.0.1.9/32]\nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    | 2018/07/31 13:58:22 Found addrs: []\nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    | panic: runtime error: index out of range\nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    | \nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    | goroutine 1 [running]:\nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    | main.retrieveAdvertiseAddress(0xa48938, 0x1c, 0xc4201a1f10, 0x1)\nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    |  /home/tony/workspaces/portainer/agent/cmd/agent/main.go:97 +0x41a\nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    | main.main()\nsystem_portainer-agent.0.izcue7xdhwmk@ip-172-31-22-183.us-west-2.compute.internal    |  /home/tony/workspaces/portainer/agent/cmd/agent/main.go:138 +0x25b\nsystem_portainer-agent.0.wjj93o2bym60@ip-172-31-14-55.us-west-2.compute.internal    | 2018/07/31 13:58:23 [INFO] memberlist: Suspect 605dfbadf9a0 has failed, no acks received\nsystem_portainer-agent.0.ids6wglhl1o0@ip-172-31-16-96.us-west-2.compute.internal    | 2018/07/31 13:58:23 [INFO] memberlist: Suspect c1ac039dbab1 has failed, no acks received\nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    | 2018/07/31 13:58:24 Found addrs: [127.0.0.1/8 10.0.1.9/32]\nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    | 2018/07/31 13:58:24 Found addrs: []\nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    | panic: runtime error: index out of range\nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    | \nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    | goroutine 1 [running]:\nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    | main.retrieveAdvertiseAddress(0xa48938, 0x1c, 0xc4201a1f10, 0x1)\nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    |   /home/tony/workspaces/portainer/agent/cmd/agent/main.go:97 +0x41a\nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    | main.main()\nsystem_portainer-agent.0.pls0v3q0wmuh@ip-172-31-8-171.us-west-2.compute.internal    |   /home/tony/workspaces/portainer/agent/cmd/agent/main.go:138 +0x25b. @deviantony Looks like the index out of range error is no longer appearing in my logs with the latest image. Appears stable and working.. Here's another screenshot, after scaling the above acme_nginx service down to 0, Portainer tells me there are 2 replicas running and with a quick look at this task list I would assume all is well.\n\nOnly when closely looking for a missing value in the node field plus more replicas than desired would I figure out that something is wrong.. Another another one, that would make me stop and think why does this service still have pending tasks?\n\n. And why did the previous task fail for this service (even though it actually completed successfully):\n\n. @sorenhansendk can you add your experience to the issue covering the root cause in Docker swarm mode? https://github.com/moby/moby/issues/34122. FYI, I've discovered a way to remove the ghost tasks. Scale a service down to 0 then click the checkbox and then click Update button from the stack page. Updating a service recreates all of its tasks. When you do this and scale is >=1 the ghost tasks remain, but with scale 0 even though it's basically a no-op, it removes the ghost tasks.\n. It just took me about half an hour to review a list of 174 services looking for any where replicas > scale AND no node was defined for some of the replicas, scale them all down to zero (page reload every time), click update (page reload every time), scale back up (another page reload every time), and lots of scrolling a long list in between every click/reload...\nif Portainer didn't reload after every scale/update, that would make this process WAY quicker and easier... Even better would be if Portainer had a button that did all this for me... Or perhaps this could be done automatically with a Docker image deployed to a manager node and bind mounting the docker socket... I doubt Docker will ever fix this bug in swarm.... ",
    "ronlut": "What about multiple compose files, like @schmunk42 showed? Is that somehow supported? \nWe are using portainer and started using multiple compose files using docker stack deploy -c docker-compose.yml -c docker.compose.prod.yml stack_name etc.. ",
    "vielmetti": "I'd like to see aarch64 (armv8) support as well.. It looks like multiarch support is working, as I was able to do docker run portainer/portainer and it seems to have picked up the correct version on my ARMv8 Packet 2A (aarch64, arm64) server.. Thanks @deviantony . I note that the \"Apps Templates\" for my aarch64 installation of portainer all point to incompatible amd64 versions of images; that gets solved either by explicitly pointing them at aarch64 versions where they exist, or as multiarch gets more common, pointing at multiarch versions of these systems.. Since this issue is still open, it's worth noting that with Docker's multiarch support in its official images, the number of things that \"just work\" from the directory when running on an arm64 system is much better than before. I don't have a total count yet, but roughly half of the images I tried just worked.. Agreed, I'd hold off on code changes for now since this looks like it has a good chance of resolving itself.  The count I did was 9 of 33 images \"just work\" on arm64, with an expectation that more will be coming in the near future. \nThe only thing I might suggest to look at is the code path for when you select an image, it has a multiarch manifest, and the manifest does not include a version for your architecture. The logical thing to do would be to grey out or remove that image from the list. I'd hold off on that until we saw how quickly all images were going to be multiarch.. One additional clue from the console, an Angular error:\n\n. Thanks for the test run, @deviantony - I was able to get the system to run by putting the display on port 9001 instead of port 9000, which makes me think that Opera was caching something it shouldn't. Running it on a different port forced it to not use the cached data, as far as I can tell.\nMy invocation is\ndocker run -v /var/run/docker.sock:/var/run/docker.sock -p 9001:9000 -v ~/lib/portainer/data:/data --name portainer_9001_a portainer/portainer\nand now it works under both Chrome and Opera (simultaneously). I'll close this since it's not something that is specific to portainer.. Aha! That explains https://github.com/portainer/portainer/issues/413 .. The PR in #752 provides a mechanism for setting a password hash. \n. And now it just works; I wonder if there's some dependency on AWS triggered by recent downtime.\nSince this isn't likely to have been a minio problem, I'm closing.. Do these all work multiarch? I ask only because I know that LSio has some armhf and aarch64 Docker apps put together. Gotta test today.... What does the message\nApp templates cannot be deployed as Swarm Mode services for the moment. You can still use them to quickly deploy containers on the Docker host.\nmean?\nAlso, I have an aarch64 machine, and I know that LSIO has a whole set of aarch64 images, but the provided template looks like it's x86-64 only.. Great idea to do this, and the timing is right for me.\nTo generate the password hash you are using htpasswd, it would be helpful if this dependency were in the Docker image so that we could use the image with a different entry point to generate credentials. \nThe docs and the code might also want to support loading the hashed password from a file, so that there's no need to deal with shell escaping.. Good enough @deviantony - the first PR should have the simplest thing that works, and doesn't need two code paths when one will suffice.. ",
    "pascalandy": "+1\n. This is a great feat!\n. Is it possible to run it locally ? When I do:\n```\nremoteip=123.123.123.12\ndocker run -d -p 9000:9000 \\\n    --name portainer-local \\\n    eisnerd/portainer \\\n    -H tcp://$remoteip:80\n```\nA white page is up, but there nothing on it, and no errors.\nCheers! . Thank but I can't help for the responsiveness.. Cool, you're right I probably saw that on 1.11.0 or 1.11.1 :) \nSorry for this!. Thank you!! Love you portainer folks. _\\m| \ud83d\udcaf  . More than 2 years later... a big thank you. Portainer is such a beautiful software.. @psychowood are you using the container from: https://github.com/titpetric/netdata ?\nJust wondering which docker project is the best for netdata.. Thanks for the precision :). Hey folks, \nI previously share my thoughts about this:\nhttps://github.com/portainer/portainer/issues/943#issuecomment-310248894\nCheers!. Meanwhile, I would recommend a friend to use https://github.com/stefanprodan/dockprom. Hi Tony,\nI\u2019m glad to see this as a future core feature :) \nMy situation\nI manage applications entirely via Docker containers and Swarm. At the moment I use only local volumes and I plan to use Minio / Infinit sooner or later. I don\u2019t use Portainer GUI to deploy stuff. I run my own bash-scripts function to do deploy. \nI never managed Monitoring, Alerts, Logs within a corporation environment (Read, I don\u2019t know best practice). But as a startup, I know what I\u2019m looking for :-p. \nSo far I tried, Sematext and Logentries and few open-sourced ELK stacks. But I didn\u2019t find a solution to my problems. Here I what I want. \nAlert me when:\n\nAlert me when a container can\u2019t be deployed X times in a row. (i.e 3)\nAlert me when a web app does not response (public URL) successfully X times in a row at Y interval (i.e 3, 60s)\nAlert me when on average the available RAM is reaching XX % for the last XX minutes. (i.e 75%)\nAlert me when on average the available CPU is reaching XX % for the last XX minutes. (i.e 75%)\nAlert me when the available storage is over than XX %. (i.e 75%)\nAlert me when the node is not responding (physical crash). I guess this is out of scope for Portainer.\n\nI use netdata and I love it but it does not store what happened in the past in my basic setup. I never tried to use alerts as well.\nArchiving\n\nAllow me to set how long we should keep the monitoring data or how many XX GB of archive the system should keep. \nAllow me to define the volume where the data is stored so I can backup the data.\n\nNotification solution\nNotification (aka alerts) could be managed by noti. It allows us to set notifications for Slack, Telegram, etc. I\u2019ll be glad to share how I use it in my actual setup.\nOverall I think it\u2019s fairly basic business requirements. I\u2019ll be curious to read what others have in their minds.\nMany cheers!\nPascal | @askpascalandy\n. Thanks for sharing Thomas. This looks like a killer stack! Enterprise kind of setup even.\nIn my case, it's probably overkill in a the sense that all those services will take about 1.5G of RAM. As I want to monitor few nodes with 2G of RAM :-p.. Meanwhile, I would recommend a friend to use https://github.com/stefanprodan/dockprom. Auto-scaling is a project by itself. There are so many possible configurations. I'll be curious if anyone has a GitHub project to suggest to tackle this challenge.\n\ni hope portainer can add an \"auto scaling\" function based on monitoring. Looks promising !! Thanks for pointing it :-). @deviantony What will be the official resolution? I propose 156x56.\n\nBest practice would be to have people exporting their logo out to 312x112px to get an clean HiDPI resolution.\nDocs update! > https://github.com/portainer/portainer-docs/pull/15\nCheers!. LGTM. Here is my stack on docker-stack-this . Thanks! That will work as well :-). ",
    "pgonyan": "+100. ",
    "sheerun": "It turned out I needed to explicity enable swarm mode detection with --swarm flag. Why isn't it auto-detected?\n. i.e. why --swarm flag isn't enabled by default\n. How about making  \"swarm\" view a default, and allow to switch into a \"node\" view of any node in swarm? I'm both interested in managing swarm as a whole, and individual nodes, without restarting portainer \n. Yup, add and edit them. Traefik configures itself based on container labels.\n. ",
    "joskfg": "It is still not working. The update service show container-labels but doesn't show the labels for the service, so when you update the service it removes all the traefik labels and the service stop working from the outside (using traefik).\nTested in 1.10.1. ",
    "bvis": "Easy to reproduce:\ndocker service create --name deleteme --label deleteme.service.label=true --container-label deleteme.container.label=true alpine ping www.google.com\nAnd just check what we can see in the service dashboard:\n\nI'll open a new issue with the problem. Just adding here the info to document the problem.. About how to manage the secrets, maybe you could use the new feature of 1.13: https://blog.nimbleci.com/2016/11/17/whats-coming-in-docker-1-13/#secrets-management. In docker 1.13 there's an experimental option (docker service logs) of check the service logs across the cluster.\nMore info here: https://github.com/docker/docker/pull/28089. I'd bet for simplification and split this huge task in two.\na. Use the internal global agent to provide the data for the \"local swarm\". It simplifies all the security concerns and autodiscovery.\nb. Connect to other cluster agents: This means you'll need to provide a way to connect both sides. One possible approach is to generate a token in Portainer for particular agents, in a similar way a swarm cluster is created. This means that you'll connect from the external agent to Portainer providing the token and the Portainer endpoint as parameters.. Hi, thanks to the new Portainer API I've created an image that allows to register automatically all the nodes in a swarm cluster. You can try it here: https://github.com/softonic/portainer-endpoint. @deviantony Good job! It seems to work like a charm! \ud83e\udd41. Hooray! And I'm so impressed how fast this has been done.\nThanks.\n. ",
    "adomenech73": "Glad to confirm that this works fine as expected on arm64.\nNice work!!\n. ",
    "StefanScherer": "@deviantony That is really great. The manifest file really looks simple. Can it be pushed before the platform specific images exist? I haven't used the manifest tool, yet, but I'll have a close look at it.\nSo for each released version there should be such a manifest.\nI can confirm that it works on my Raspberry Pi.\nOn Windows I get this error message:\n```\nPS C:\\Windows\\system32> docker logs portainer\npanic: runtime error: slice bounds out of range\ngoroutine 1 [running]:\npanic(0x7c69e0, 0xc042012020)\n        /usr/local/go/src/runtime/panic.go:500 +0x1af\nsyscall.Readlink(0x8374d1, 0x7, 0xc04213ce80, 0x80, 0x80, 0x0, 0x0, 0x0)\n        /usr/local/go/src/syscall/syscall_windows.go:1031 +0x3a9\nos.Readlink(0x8374d1, 0x7, 0xa17a40, 0xc04202daa0, 0x0, 0x0)\n        /usr/local/go/src/os/file_posix.go:21 +0x94\nos.Stat(0x8374d1, 0x7, 0xc04218bd38, 0x41048f, 0x20, 0x7e0b60)\n        /usr/local/go/src/os/stat_windows.go:72 +0x9e\ngithub.com/portainer/portainer/file.createDirectoryIfNotExist(0x8374d1, 0x7, 0x1ed, 0xc042209068, 0x7)\n        /go/src/github.com/portainer/portainer/file/file.go:115 +0x40\ngithub.com/portainer/portainer/file.NewService(0x8374d1, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0)\n        /go/src/github.com/portainer/portainer/file/file.go:37 +0x121\nmain.main()\n        /src/cmd/portainer/main.go:32 +0x177\n```\nThis seems related to 1.11.1, it worked with 1.11.0. I'm using run-portainer.ps1 and just replaced the tag windows-1.11.0 with multiarch. The Windows image will be downloaded, and C:\\certs and C:\\data are mounted in the container. But it crashes. \nI think it is related to Golang and mounted volumes https://github.com/docker/docker/issues/27537#issuecomment-270470997 and it seems to be the C:\\data directory as this is the last file access I can monitor with procmon.exe.\n. Seems #452 checks the dataStorePath which is the volume mount point/reparse point: https://github.com/portainer/portainer/pull/452/files#diff-647805a39ad920d1ac55c84e0ef7112cR37\n. Now I remember. The Docker registry.exe has the same problem. For Windows you have to build with Go 1.8 beta as it contains a fix for https://github.com/golang/go/issues/15978\nThere is golang:1.8-nanoserver for example.\n. Hope it helps with Go 1.8, as building Go sources on a volume mount still does not work. Volume mount points / reparse points are challenging in Windows ;-). Great. Updated my demo scenarios in https://github.com/StefanScherer/docker-windows-box/commit/bb9cd52a9aa410f9ba7094e4380e69d0c20c8869. @deviantony I also have trouble with the mounted volumes.\nThe script I run on a Win2016 machine that is configured with TLS is this one: https://github.com/StefanScherer/docker-windows-box/blob/master/scripts/run-portainer.ps1\n```\nPS C:\\Windows\\system32> C:\\Users\\stefan\\code\\docker-windows-box\\scripts\\run-portainer.ps1\nError response from daemon: Cannot kill container portainer: No such container: portainer\nError response from daemon: No such container: portainer\nDirectory: C:\\\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----        1/25/2017  11:58 PM                portainerdata\nUnable to find image 'portainer/portainer:latest' locally\nlatest: Pulling from portainer/portainer\nbce2fbc256ea: Already exists\n3ac17e2e6106: Already exists\nfd17d88c5b40: Pull complete\nb0d79d45d743: Pull complete\nf3a3f301c475: Pull complete\n7a70c61cf3a8: Pull complete\n7bdaf5fbe031: Pull complete\nDigest: sha256:04134dd268134200aa4c50f5b8139cb3f2f674ed8d70d934496d7ae5b1af7c79\nStatus: Downloaded newer image for portainer/portainer:latest\nf00fc5dd8c19c21f4a6632682864f9331fc79c00bad1d47f40294a8e0a197f43\nC:\\Program Files\\docker\\docker.exe: Error response from daemon: container f00fc5dd8c19c21f4a6632682864f9331fc79c00bad1d47f40294a8e0a197f43 encountered an error during CreateContainer: failure in a Window\ns system call: This application does not support the current operation on symbolic links. (0x5b8) extra info: {\"SystemType\":\"Container\",\"Name\":\"f00fc5dd8c19c21f4a6632682864f9331fc79c00bad1d47f40294a8e0a1\n97f43\",\"Owner\":\"docker\",\"IsDummy\":false,\"VolumePath\":\"\\\\?\\Volume{05f63cee-ddbc-11e6-b2fe-000c291c76e6}\",\"IgnoreFlushesDuringBoot\":true,\"LayerFolderPath\":\"C:\\ProgramData\\docker\\windowsfilter\\f00fc5\ndd8c19c21f4a6632682864f9331fc79c00bad1d47f40294a8e0a197f43\",\"Layers\":[{\"ID\":\"8978067a-08a7-54cf-bca4-7fdcdc7cbb9e\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\8dcbe9ea4671db4fb6c3e6af5651d9f1f9d0c90b\n37e84785a8873cd1c6a5ee9f\"},{\"ID\":\"74af399b-a361-5b5b-a2da-c3db4c1bd2cb\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\af96c342ff8aa4fba8b947b5053f3e04420b1838b0e0cea4452f6d5ac28f729a\"},{\"ID\":\"73d9f35b-\nb973-50ab-b032-fd39cbd8b4a1\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\2d3fe5aa81b9851c0dfbadcecbff6d071150d3f0990d727e313f47fc78592daa\"},{\"ID\":\"b5d71488-b8ef-5062-b2a1-e9c789cd819d\",\"Path\":\"C:\\Pr\nogramData\\docker\\windowsfilter\\5d494a45653d21d09de015dc026ae4112f17e7307db13fbdd0317e75e91271b8\"},{\"ID\":\"7324f0f9-855f-5ef0-9555-f619220d94ae\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\6be055adb\n53b2e238375d587c315f7c219af9f1a296b5d89eb0d84f7328d2816\"},{\"ID\":\"fae25b5a-1d96-55e1-9064-da6efb2bf1ce\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\7449e4f547e4324908c784517a6330b7c9a265452b1badad0f96\n7b5c3609210e\"},{\"ID\":\"78e26e5e-be2a-551e-8e0c-bf12fd09d780\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\5bb79e966720cff68f6b98671029d9240422496b1aab02f4f7dde204605f7fd8\"}],\"HostName\":\"f00fc5dd8c19\",\"\nMappedDirectories\":[{\"HostPath\":\"c:\\portainerdata\",\"ContainerPath\":\"c:\\data\",\"ReadOnly\":false,\"BandwidthMaximum\":0,\"IOPSMaximum\":0},{\"HostPath\":\"C:\\ProgramData\\docker\\volumes\\d6ceed4dd48e0474fc73c3\n0a174be25ca128d740719cee5688d1167e6f445742\\_data\",\"ContainerPath\":\"c:\\programdata\\portainer\",\"ReadOnly\":false,\"BandwidthMaximum\":0,\"IOPSMaximum\":0},{\"HostPath\":\"c:\\users\\vagrant\\.docker\",\"Container\nPath\":\"c:\\programdata\\portainer\\certs\",\"ReadOnly\":false,\"BandwidthMaximum\":0,\"IOPSMaximum\":0}],\"HvPartition\":false,\"EndpointList\":[\"84ca0e93-daba-4ac9-a91c-5ee6dcc6d57c\"],\"Servicing\":false,\"AllowUnqua\nlifiedDNSQuery\":true}.\n``\n. The problem seems to be the folderC:\\ProgramData\\portainer\\certs, running the container only with-v $env:USERPROFILE.docker:C:\\ProgramData\\portainer\\certs` already shows the error.\n```\nPS C:\\Users\\stefan\\code\\docker-windows-box\\scripts>  docker run -d -p 8000:9000 -v $env:USERPROFILE.docker:C:\\ProgramData\\portainer\\certs --entrypoint powershell portainer/portainer\nb1c3ac00ca939f433bfe03920a51254470038eefbde60117253e478f6c2f3e6e\nC:\\Program Files\\docker\\docker.exe: Error response from daemon: container b1c3ac00ca939f433bfe03920a51254470038eefbde60117253e478f6c2f3e6e encountered an error during CreateContainer: failure in a Window\ns system call: This application does not support the current operation on symbolic links. (0x5b8) extra info: {\"SystemType\":\"Container\",\"Name\":\"b1c3ac00ca939f433bfe03920a51254470038eefbde60117253e478f6c2\nf3e6e\",\"Owner\":\"docker\",\"IsDummy\":false,\"VolumePath\":\"\\\\?\\Volume{05f63cee-ddbc-11e6-b2fe-000c291c76e6}\",\"IgnoreFlushesDuringBoot\":true,\"LayerFolderPath\":\"C:\\ProgramData\\docker\\windowsfilter\\b1c3ac\n00ca939f433bfe03920a51254470038eefbde60117253e478f6c2f3e6e\",\"Layers\":[{\"ID\":\"8978067a-08a7-54cf-bca4-7fdcdc7cbb9e\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\8dcbe9ea4671db4fb6c3e6af5651d9f1f9d0c90b\n37e84785a8873cd1c6a5ee9f\"},{\"ID\":\"74af399b-a361-5b5b-a2da-c3db4c1bd2cb\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\af96c342ff8aa4fba8b947b5053f3e04420b1838b0e0cea4452f6d5ac28f729a\"},{\"ID\":\"73d9f35b-\nb973-50ab-b032-fd39cbd8b4a1\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\2d3fe5aa81b9851c0dfbadcecbff6d071150d3f0990d727e313f47fc78592daa\"},{\"ID\":\"b5d71488-b8ef-5062-b2a1-e9c789cd819d\",\"Path\":\"C:\\Pr\nogramData\\docker\\windowsfilter\\5d494a45653d21d09de015dc026ae4112f17e7307db13fbdd0317e75e91271b8\"},{\"ID\":\"7324f0f9-855f-5ef0-9555-f619220d94ae\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\6be055adb\n53b2e238375d587c315f7c219af9f1a296b5d89eb0d84f7328d2816\"},{\"ID\":\"fae25b5a-1d96-55e1-9064-da6efb2bf1ce\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\7449e4f547e4324908c784517a6330b7c9a265452b1badad0f96\n7b5c3609210e\"},{\"ID\":\"78e26e5e-be2a-551e-8e0c-bf12fd09d780\",\"Path\":\"C:\\ProgramData\\docker\\windowsfilter\\5bb79e966720cff68f6b98671029d9240422496b1aab02f4f7dde204605f7fd8\"}],\"HostName\":\"b1c3ac00ca93\",\"\nMappedDirectories\":[{\"HostPath\":\"C:\\ProgramData\\docker\\volumes\\8ec0e62fbc9a0809aae4f1d2a7c52005d4ce94176380c444eba3264897feb321\\_data\",\"ContainerPath\":\"c:\\programdata\\portainer\",\"ReadOnly\":false,\"\nBandwidthMaximum\":0,\"IOPSMaximum\":0},{\"HostPath\":\"c:\\users\\vagrant\\.docker\",\"ContainerPath\":\"c:\\programdata\\portainer\\certs\",\"ReadOnly\":false,\"BandwidthMaximum\":0,\"IOPSMaximum\":0}],\"HvPartition\":fa\nlse,\"EndpointList\":[\"f0e0d20e-4189-4a44-83ff-c4bcdb4af8cc\"],\"Servicing\":false,\"AllowUnqualifiedDNSQuery\":true}.\nPS C:\\Users\\stefan\\code\\docker-windows-box\\scripts>  docker run -d -p 8000:9000 -v  C:\\portainerdata:C:\\data --entrypoint powershell portainer/portainer\nd1497fcd8f6f6e3dc44b10f6998ecc7a3f5f5681c8cbfe249733df4479cb4308\nPS C:\\Users\\stefan\\code\\docker-windows-box\\scripts> dir $env:USERPROFILE.docker\nDirectory: C:\\Users\\vagrant\\.docker\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\n-a----        1/25/2017  11:55 PM           1822 ca.pem\n-a----        1/25/2017  11:56 PM           1781 cert.pem\n-a----        1/25/2017  11:56 PM           3247 key.pem\n```\nOtherwise mapping the certs to eg. C:\\certs works fine:\nPS C:\\Users\\stefan\\code\\docker-windows-box\\scripts>  docker run -d -p 8000:9000 -v $env:USERPROFILE\\.docker:C:\\certs --entrypoint powershell portainer/portainer\n4107f15b4bcb316606a6a37840e4fa43e0ca6c91478b3a1e9fcc2a4abb41f305\nSo, although ProgramData is the place to put files on Windows, I suggest to go back to the toplevel mount point to keep in sync with Linux. Portainer.exe's purpose is to run in a Container, so you can decide the \"interface\" how to configure it from the outside.\n. Interesting enough the \"portainer/portainer:windows\" image (pushed 17 days ago) works with the ProgramData mapped volume. \ud83e\udd14 . The old image does not have C:\\ProgramData\\portainer directory and then it works.\n```\nPS C:\\Users\\stefan\\code\\docker-windows-box\\scripts>  docker run --entrypoint powershell portainer/portainer:windows dir c:\\programdata\nDirectory: C:\\programdata\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----        1/26/2017  12:32 AM                Microsoft\nd-----        7/16/2016   5:20 AM                regid.1991-06.com.microsoft\nd-----        7/16/2016   5:20 AM                SoftwareDistribution\n```\nThe new image has a symlink there which seems the problem as I haven't used the -v option, but already see a containermappeddirectories symlink:\n```\nPS C:\\Windows\\system32> docker run --entrypoint powershell portainer/portainer dir c:\\programdata\nDirectory: C:\\programdata\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----        1/26/2017  12:34 AM                Microsoft\nd----l        1/26/2017  12:34 AM                portainer\nd-----        7/16/2016   5:20 AM                regid.1991-06.com.microsoft\nd-----        7/16/2016   5:20 AM                SoftwareDistribution\nPS C:\\Windows\\system32> docker run --entrypoint cmd portainer/portainer /c dir c:\\programdata\n Volume in drive C has no label.\n Volume Serial Number is 6CFE-2CFB\nDirectory of c:\\programdata\n01/26/2017  12:34 AM              Microsoft\n01/26/2017  12:34 AM         portainer [\\?\\ContainerMappedDirectories\\7A9DCAC1-093D-4098-B234-462AD8AC9AF0]\n07/16/2016  04:20 AM              regid.1991-06.com.microsoft\n07/16/2016  04:20 AM              SoftwareDistribution\n               0 File(s)              0 bytes\n               4 Dir(s)  21,268,611,072 bytes free\n``\n. The symlink is fine as it is created by theVOLUME ...` line in the Windows Dockerfile.\nOh I have to mount my portainer data directory like this -v c:\\portdainerdata:c:\\programdata\\portainer, but I still have problems mounting the certs dir into the sub directory. I think this just doesn't work to use nested mount points inside the container. So the certs should be searched in some other directory.\nOr the persistent data should be in C:\\ProgramData\\portainer\\data so we can bind mount like this: -v C:\\portainerdata:C:\\ProgramData\\portainer\\data and -v $env:USERPROFILE\\.docker:C:\\ProgramData\\portainer\\certs\n. Thanks! Making the download only about 3.4 MByte if someone already has the nanoserver base image :-)\n. You can build and push the linux/arm Docker image on a linux/amd64 machine, that's no problem.\n. Thanks!\n. See also https://github.com/Microsoft/Virtualization-Documentation/issues/442 for mounting npipe into a container:\n\nNo, not possible in the platform. Windows isn't 'file based' in the same way that Linux is.\n. Hm, I don't think that solves the problem. The panic occured as I want to mount the e.g C:\\portainerdata directory from host into C:\\data into the portainer container.\n\nThen portainer tries to check if c:\\data exists, but Golang seems to have a problem recognizing that as a directory as it is a symlink/reparse point to the mapped volume.\nIf the default data dir is now c:\\ProgramData\\portainer and you also have c:\\ProgramData\\portainer\\certs folder, I believe this would not work on Windows. Such mount points must be empty directories. \nTo explain it for c:\\data: The directory c:\\data may exist in the container, but must be empty to mount a host volume into that container.\n. That's strange. So maybe a problem with a toplevel directory directly below C: ?\n. I now understand, you don't have to mount a volume, the VOLUME in the Dockerfile causes this.\nSee also https://github.com/sixeyed/dockers-windows/commit/018b5f5fa26fbd9a65ae20bbf2828db50139ed61#commitcomment-20408049\n. No, I don't think so. The VOLUME C:\\\\data is meant to mount a volume from the host to persist the database files on the host. So any other directory instead should be the same.\nWith 1.11.0 it worked fine as I configured it exactly that way in https://github.com/StefanScherer/docker-windows-box/blob/709e3ea9aed49bf5fd267fe5e1a60e7254e3c89d/scripts/run-portainer.ps1#L15\nThe only thing that Go probably still can't do is recognizing the reparse point in all Go functions.\nThe problem seems to be introduced with https://github.com/portainer/portainer/commit/9ee652c81817354c4007352112ab313dbb559116#diff-647805a39ad920d1ac55c84e0ef7112cR37 in line 37 where your check for existence of that directory.\nI think the underlying Go function has the problem.\nDon't know if that matches the same problem, but I've opened https://github.com/golang/go/issues/18555 as Go 1.8 is not fully fixed for such volume / reparse points.\nI suggest to revert #452 to make it work better INSIDE a container. That is the main use case (at least I hope so :-) )\nThe problem in Go must be fixed, in the meantime we have to avoid problematic function calls.. FYI: The issue with mapped volumes is discussed in https://github.com/docker/docker/issues/27537 and some more Docker and Microsoft people join and investigate internally. I hope they find a good solution without hacking all languages.\nIn the meantime there is another workaround using another drive letter, see the proposed elasticsearch Windows Dockerfile PR for an example. I don't know if that works for Go as well, but I think so that Go also will stop searching for symlinks as it is another kind if indirection there.\n. It is also a C:\\data volume mount in the container, but the (in that case Java) program uses G:\\ to read and write files from. The user still uses -v c:\\hostpath:c:\\data, but eg. portainer is configured to read G:\\. Don't know if you like that workaround better.. The symlink is fine as it is created by the VOLUME ... line in the Windows Dockerfile.\nOh I have to mount my portainer data directory like this -v c:\\portdainerdata:c:\\programdata\\portainer, but I still have problems mounting the certs dir into the sub directory. I think this just doesn't work to use nested mount points inside the container. So the certs should be searched in some other directory.\nOr the persistent data should be in C:\\ProgramData\\portainer\\data so we can bind mount like this: -v C:\\portainerdata:C:\\ProgramData\\portainer\\data and -v $env:USERPROFILE\\.docker:C:\\ProgramData\\portainer\\certs. I just tried and docker run -d -p 9000:9000 --name portx portainer/portainer:windows-1.11.1 works in my Win2016 + Docker 1.13.0 setup.\nI also can run the latest image without any bind mounts.\n. vagrant init StefanScherer/windows_2016_docker and vagrant up --provider virtualbox might be the easiest way. \ud83d\udc7c . @deviantony Yes I can run the latest portainer Windows image without -v options.\n. @deviantony Works perfectly, even with TLS certs for the default Docker engine!\nI think to have a multiarch image it is the best the have the same volume mountpoints for both Linux and Windows, so /certs  and /data is a good way to go, even if these directories might be unusual for Windows users.. Thanks. Updated my run-portainer.ps1 script.. Just another small breakthrough, I tried to create a portainer service in swarm-mode on Windows. But at the moment --publish doesn't work correctly, it just does not start any tasks and keeps at 0/1. Skipping the --publish the task will be created, but then you have to open UI with the task/container IP address. See my helper scripts for a workaround.. Some more details.\nDocker engine on Windows uses npipe:////./pipe/docker_engine as default, so you can write it as an URL internally.\nDocker uses docker/go-connections -> https://github.com/docker/go-connections/blob/4ccf312bf1d35e5dbda654e57a9be4c3f3cd0366/sockets/sockets.go#L25-L26\nwhich uses github.com/Microsoft/go-winio DialPipe -> https://github.com/Microsoft/go-winio/blob/78439966b38d69bf38227fbf57ac8a6fee70f69a/pipe.go#L138\nI've started a breakthrough which is very rough right now (moving code into _windows.go files, more frontend platform checks, my editor has changed indentation in js files, ...) in https://github.com/StefanScherer/portainer/tree/npipe_support just to push this topic a little further.\nSo running\ndocker run -it -u ContainerAdministrator -v //./pipe/docker_engine://./pipe/docker_engine -p 9000:9000 stefanscherer/portainer:insider -H npipe:////./pipe/docker_engine\nactually works on a Windows Server 16278 Insider machine with Docker 17.09.0-rc1 installed:\n\nAs you can see the portainer running in nanoserver-insider image is only 210 MB uncompressed.. @mihailescu2m the current work in progress is in #1186. @mihailescu2m Yes you can use Portainer on Windows Server 2016. \nSee the docs https://portainer.readthedocs.io/en/stable/faq.html#how-can-i-setup-portainer-on-windows-server-2016 which refer to a blog post. But these expose the unencrypted Docker API on port 2375, so use this with care. Any container can reach out to this port and use the API.\nTo give only Portainer access to the Docker API through TCP port 2376 you have to create TLS certs and map the certs into Portainer container. I did that in this blog post https://stefanscherer.github.io/how-to-run-encrypted-windows-websites-with-docker-and-traefik/ but it's more complicated.\nSo that's why 1709 will give use a much easier way to give a specific container access to the hosts' Docker API through the named pipe.\n. I compiled the PR and tested it on Windows.\nFor my tests I don't use a mapped volume, so I have to enter the admin password. After logging in for the first time I see this dialog to select where to connect.\n\nThen I select local and see the new message with the -v option for Linux and Windows.\n\nThen I sometimes saw error messages that the local connection couldn't be established, so I pressed again.\nIn this case only the dashboard shows an error:\n\nIt seems that the dashboard directly communicates with the local connection? \nWhen I open the endpoints I see the primary (from the -H option) and the connection I had to select before seeing the dashboard.\n\nSo maybe the named pipe is not available directly after starting the container and portainer.exe is accessing it too early? I'll try more in a different Azure VM.\n. Thanks @friism I recompiled commit f0f4815. I also created a fresh Azure VM with 16278 running in a nested Hyper-V VM and Docker 17.09.0-ce-rc1 installed. Then I built the portainer image with this little Dockerfile \nDockerfile\nFROM microsoft/nanoserver-insider\nCOPY dist /\nCOPY dist/portainer-windows-amd64 /portainer.exe\nADD https://master.dockerproject.org/windows/x86_64/docker.exe /windows/system32/docker.exe\nVOLUME C:\\\\data\nEXPOSE 9000\nENTRYPOINT [ \"/portainer.exe\" ]\nSo I have the Docker CLI as well inside to check if named pipe works (docker exec containerid docker version).\nI still see some strange effects. I tried a screen capture, but of course in the first recording everything worked fine :-) But here is another one:\n\nBut here is a working demo:\n\n. Haha, we have containers, so I can run portainer more than once. I had reproduced the error in one container, then started another portainer instance with mapped port 9001, so I could look inside through the working instance.\nIn the errornous container I could run the docker version command, so the named pipe is also accessible.\nI also tried to open a shell through the working copy of portainer, but then got an error in the first one\n2017/09/11 09:42:31 Starting Portainer 1.14.0 on :9000\n2017/09/11 09:43:15 http error: User not found (code=404)\n2017/09/11 09:44:13 error during hijack: dial npipe: unknown network npipe\nSo there is some work to do for the terminal execution. I tried of course only a cmd.exe as powershell.exe is not available in microsoft/nanoserver-insider base image.\n. Thanks @deviantony that did it. I had to change the websocket.go as follows, ping @friism \n```\ndiff --git a/api/http/handler/websocket.go b/api/http/handler/websocket.go\nindex dbc4fd9..ecd16d2 100644\n--- a/api/http/handler/websocket.go\n+++ b/api/http/handler/websocket.go\n@@ -16,6 +16,7 @@ import (\n        \"time\"\n    \"github.com/gorilla/mux\"\n\n\n\"github.com/Microsoft/go-winio\"\n        \"github.com/portainer/portainer\"\n        \"github.com/portainer/portainer/crypto\"\n        \"golang.org/x/net/websocket\"\n@@ -65,7 +66,7 @@ func (handler WebSocketHandler) webSocketDockerExec(ws websocket.Conn) {\n        var host string\n        if endpointURL.Scheme == \"tcp\" {\n                host = endpointURL.Host\n} else if endpointURL.Scheme == \"unix\" {\n} else if endpointURL.Scheme == \"unix\" || endpointURL.Scheme == \"npipe\" {\n                host = endpointURL.Path\n        }\n\n@@ -122,7 +123,11 @@ func hijack(addr, scheme, method, path string, tlsConfig *tls.Config, setRawTerm\n        )\n    if tlsConfig == nil {\n\n\ndial, dialErr = net.Dial(scheme, addr)\nif scheme == \"npipe\" {\ndial, dialErr = winio.DialPipe(addr, nil)\n} else {\ndial, dialErr = net.Dial(scheme, addr)\n}\n        } else {\n                dial, dialErr = tls.Dial(scheme, addr, tlsConfig)\n        }\n```\n\n\n. I've pushed the hijack fix to https://github.com/portainer/portainer/commit/9d5fe59eadf3733ebef6c7ac54b96012c7164170. If we need better UX whether mapping named pipe is supported, this version check in upstream repo might help:\ngolang\n    if len(mps) > 0 && system.GetOSVersion().Build < 16210 { // replace with Win10 RS3 build number at RTM\n        return errors.New(\"named pipe mounts are not supported on this version of Windows\")\n. @friism I'm testing now. Also looking into the problem with the red popups that the named pipe couldn't be opened.. I often can reproduce the problem opening the named pipe. I found out that the frontend makes two endpoint requests in parallel: /api/endpoints/1/docker/info and /api/endpoints/1/docker/version, one of them often fails in my environment:\n\nSeems like the createFile() in https://github.com/Microsoft/go-winio/blob/78439966b38d69bf38227fbf57ac8a6fee70f69a/pipe.go#L146 returns \"open //./pipe/docker_engine: The system cannot find the file specified.\"\nI've added a simple retry around winio.DialPipe()\ngolang\nfunc newNamedPipeTransport(namedPipePath string) *http.Transport {\n    return &http.Transport{\n        Dial: func(proto, addr string) (conn net.Conn, err error) {\n            fmt.Println(\"dialing named pipe\", namedPipePath)\n            attempts := 3\n            for {\n                conn, err = winio.DialPipe(namedPipePath, nil)\n                if err != nil {\n                    fmt.Println(\"error dialing pipe\", err)\n                    time.Sleep(10 * time.Millisecond)\n                } else {\n                    fmt.Println(\"pipe dialed\")\n                    break\n                }\n                attempts--\n                if attempts == 0 {\n                    break\n                }\n            }\n            return conn, err\n        },\n    }\n}\nand after opening the Web UI the console output of portainer shows sometimes it does a retry:\ndialing named pipe //./pipe/docker_engine\ndialing named pipe //./pipe/docker_engine\nerror dialing pipe open //./pipe/docker_engine: The system cannot find the file specified.\npipe dialed\ndialing named pipe //./pipe/docker_engine\npipe dialed\ndialing named pipe //./pipe/docker_engine\npipe dialed\ndialing named pipe //./pipe/docker_engine\nerror dialing pipe open //./pipe/docker_engine: The system cannot find the file specified.\ndialing named pipe //./pipe/docker_engine\nerror dialing pipe open //./pipe/docker_engine: The system cannot find the file specified.\npipe dialed\npipe dialed\npipe dialed\nI also tried the timeout parameter that is nil, but this also doesn't help. The pipe isn't busy, it just cannot be found so the winio function returns. Maybe this should be fixed in go-winio, but for now this makes Portainer work much more stable with the named pipes.\nThe retry terminates, eg. if Windows Server version is too old or the container is running as ContainerUser that has no access to the named pipe:\ndialing named pipe //./pipe/docker_engine\ndialing named pipe //./pipe/docker_engine\nerror dialing pipe open //./pipe/docker_engine: Access is denied.\nerror dialing pipe open //./pipe/docker_engine: Access is denied.\nerror dialing pipe open //./pipe/docker_engine: Access is denied.\nerror dialing pipe open //./pipe/docker_engine: Access is denied.\nerror dialing pipe open //./pipe/docker_engine: Access is denied.\nerror dialing pipe open //./pipe/docker_engine: Access is denied.\n. @friism Added a retry (without the Println shown above) with https://github.com/portainer/portainer/commit/2263c5590af15bc0fc150c548856b78d846ba479 (branch https://github.com/StefanScherer/portainer/tree/pr1186-4) which makes Portainer work in my Insider VM's.\n. @deviantony Agreed. I've opened https://github.com/Microsoft/go-winio/issues/67 as the internal call createFile returns that the pipe is busy, but the waitNamedPipe just does not wait and returns file not found. If that would work we can specify a timeout instead of nil or leave it at the default timeout.. My current status on this:\n Windows 10 1709 is available, even Enterprise Eval ISO, but you cannot use named pipe mapping with HyperV containers, so this is not usable for Windows 10 users with D4W or native dockerd.exe running.\n Windows Server 1709 ISO available with MSDN subscription, named pipe mapping works with the standard non-HyperV-containers.\n. @deviantony I don\u2018t know if this is on the roadmap. Maybe we see progress in the next Insider builds. . @PatrickLang I have pushed a new image to stefanscherer/portainer:1709 with the binaries from my previous stefanscherer/portainer:insider image. The corresponding Dockerfile can be found here.\ndocker run -v //./pipe/docker_engine://./pipe/docker_engine -p 9000:9000 -d stefanscherer/portainer:1709\nEnter a password for user admin and then try to use the local connection. Unfortunately I always get an error \"Fatal: Invalid request data format\"\nThis portainer.exe binary worked with the insider builds as far as I can remember.\nI also have added a docker CLI into the 1709 image, so you can check the named pipe with\ndocker exec $(docker ps -ql) docker version\n. @deviantony Thanks for providing the test image. It is based on microsoft/nanoserver:10.0.14393.1770, but I have replaced the base image (literally) with microsoft/nanoserver:1709 and pushed to stefanscherer/portainer:pr1186-1709.\nIt works for me with\ndocker run -v //./pipe/docker_engine://./pipe/docker_engine -p 9000:9000 -d stefanscherer/portainer:pr1186-1709\nping @PatrickLang . @deviantony If you are running Windows Server 2016 (10.0.14393.x) then you cannot run the microsoft/nanoserver:1709 container.\nTo be able to run this you need Windows Server 1709 (10.0.16299.x). The kernel version of host and container must match. Only with Server 1709 + HyperV feature enable you are also able to run older 10.0.14393 images with docker run --isolation hyperv ....\nAnd yes, the console (cmd.exe into the portainer container as nano has no powershell.exe) works:\n\nOnly the xterm.js (right?) shows some window shade effect, but this also happens in older versions.\nBTW: The next PowersShell 6 beta 9 renames powershell.exe to pwsh.exe.. @PatrickLang I also saw message readmode pipes not supported as I accidentally called portainer with --isolation=hyperv.. @deviantony Yes, microsoft/nanoserver:1709  is mandatory at the moment and will only work on Windows Server 1709 without the HyperV isolation mode.\n\nPlease ensure that you have started the Portainer container with the following Docker flag -v /var/run/docker.sock:/var/run/docker.sock (Linux) or -v \\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine (Native Windows containers) in order to connect to the local Docker environment.\n\nMaybe this:\nPlease ensure that you have started the Portainer container with the following Docker flag -v /var/run/docker.sock:/var/run/docker.sock (Linux) or -v \\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine (Native Windows Server 1709 containers) in order to connect to the local Docker environment.\nMaybe there will be a fix for HyperV isolation in the future, then Windows 10 users could use that.\nI've used the manifest-tool today to provide multi-os-version manifest list to support both Windows versions. This works fine, so the docker engine pulls the image with the matching os.version number.\nI can provide you more details after some further tests how to provide two Windows variants for the next release. \n. @deviantony yes, if you only use microsoft/nanoserver:1709 image then Windows Server 2016 LTS users that don't update to the Semi-annual channel cannot run Portainer, even with HyperV isolation it's not possible to run newer container images on older Windows Docker host.\nI was able to produce a manifest list for multiple Windows OS versions today with manifest-tool push from-spec with a manifest YAML file. I guess the manifest-tool push from-args won't help us here.\nCreating a second Windows image for 1709 would work even on an older Windows Docker host. I did that eg. for a curl image with a manifest.yml and these steps in AppVeyor.\nAt least having this PR merged and available with only one Windows image would be better than nothing. But as portainer/portainer was the first best use-case for multi-arch as we just can docker run portainer/portainer without thinking of any platform, it would be consequent to add 1709 support as well :-)\nI'll explain my steps in a blog post soon to get more feedback on that approach.. @deviantony https://stefanscherer.github.io/poc-build-images-for-1709-without-1709/ \ud83c\udf83\nFor the COPY deployed portainer this way should work fine. That's what I did a few days ago with your provided image for this PR.. We still have no answer in https://github.com/Microsoft/go-winio/issues/67\nThis PR waits for the refactoring to make it work for Linux again, @friism ping me if I should take care of the remaining steps.. There is no AF_UNIX support in Docker engine on Windows yet. See https://github.com/moby/moby/issues/36442 for first ideas. Also Golang has to support it first.\n. npipe support is very theoretical at the moment.\n\nThe Docker 17.10.0-preview3 should no longer be used due to security reasons.\nThe current Docker EE 17.06.2-ee-10 does not have npipe support.\nThe Docker for Windows Stable and Edge binaries have npipe support, eg. D4W Edge with 18.05.0-ce binaries.\n\nI'm using the dockerd.exe from D4W Edge in a Windows Server 1803 on Azure.  With this setup I can run docker run -v //./pipe/docker_engine://./pipe/docker_engine stefanscherer/docker-cli-windows docker version which works fine.\nBut on Windows 10 there is only hyperv isolation mode and this is not supported for npipe mounts.\n. @olljanat Awesome!\nThe permission denied error may be related to non-admin user in NanoServer image.\nHave you tried with this additional Dockerfile instruction?\nDockerfile\nUSER ContainerAdministrator\nI know Microsoft wants to deprecated this, but sometimes it's the only option.\n. @olljanat That looks awesome! I've started your image in a Windows Server 1803 swarm (but currently just a docker run -d) \nSometimes I see problems when I switch to the dashboard: Failure\nUnable to proxy the request via the Docker socket\nBut all the other views (Container, Services, Images, ...) work without a problem.\nAnother approach may be to retry the request for the several dashboard API calls to make it more stable.\n. @olljanat Yes, this image works stable even for the dashboard \ud83c\udf89 . The Windows docker.exe CLI supports named pipes. That's the default connection on a Windows Server 2016 or in Docker for Windows on Windows 10. I expect it to work. \nDo I understand it right, the container should contain the docker.exe?\n. @deviantony Does this fix the Windows images as well?\n\nI tried portainer/portainer (1.19.0) on Windows Server 1803 but get the \"Unable to locate template file on disk\" error message. The templates.json file is missing in the Windows image.\nThe pr2089 on Docker Hub is only Linux, so I can't check. . @deviantony Oh yes, I remember. The instruction USER ContainerAdministrator doesn't work with 2016. It was introduced with 1709 and works in 1709 and 1803 and at the moment in the 2019 Insider images.\n$ docker run -u ContainerAdministrator microsoft/nanoserver cmd\ndocker: Error response from daemon: container 94e458d812d23998a762c243c3502ca1a0e43093e0359ce8e2d582eb0cc32b62 encountered an error during CreateProcess: failure in a Windows system call: The user name or password is incorrect. (0x52e) extra info: {\"CommandLine\":\"cmd\",\"User\":\"ContainerAdministrator\",\"WorkingDirectory\":\"C:\\\\\",\"CreateStdInPipe\":true,\"CreateStdOutPipe\":true,\"CreateStdErrPipe\":true,\"ConsoleSize\":[0,0]}.\nERRO[0002] error waiting for container: context canceled\nand works in 1709 \n```\n$ docker run -u ContainerAdministrator microsoft/nanoserver:1709 cmd\nMicrosoft Windows [Version 10.0.16299.547]\n(c) 2017 Microsoft Corporation. All rights reserved.\nC:>\n```\nIn 2016 the named pipe mapping doesn't work. But users could connect to an unprotected or TLS protected socket. To make it work for 2016 the USER instruction should be removed to build the docker image correctly.\nIf you still use the rebase-docker-image tool then it is also fine to skip the USER instruction. The metadata of the sac2016 image is transported to the 1709 image and then already starts the processes as ContainerAdministrator.\nOnly if someone wants to build the image with a 1709/1803 base image directly you need the USER ContainerAdministrator explicitly.\n. The microsoft/nanoserver:sac2016 is the exact image name and tag for the current 2016 based image.\nIt's similar to microsoft/nanoserver:latest.\n. In the meantime you could use the image chocolateyfest/portainer instead which I've built with this Dockerfile and started it with this run.ps1 to run it and open a browser (localhost :-) ). OK I didn't use persistent data, it was just for a 10 minute demo -> video. No, just lastest.\nHm, that's interesting.\nOn my windows_2019_docker Vagrant box which was built some weeks ago I have the base image pulled and it works:\n$ docker run -d -p 9000:9000 --name portainer --restart always -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine -v portainer_data:C:\\data chocolateyfest/portainer\nUnable to find image 'chocolateyfest/portainer:latest' locally\nlatest: Pulling from chocolateyfest/portainer\n6a5e981230da: Already exists \n6fb298d4ca0c: Pull complete \n83678125b15b: Pull complete \n76e25138f786: Pull complete \n6a0467cc1469: Pull complete \nDigest: sha256:5f8f4e6f832471f19bec3f6d26ad14dcf03c5b98142d367ff01ce8e5416abdf7\nStatus: Downloaded newer image for chocolateyfest/portainer:latest\nWhen I remove all the nanoserver base images and run it again\n$ docker run -d -p 9000:9000 --name portainer --restart always -v '\\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine' -v 'portainer_data:C:\\data' chocolateyfest/portainer\nUnable to find image 'chocolateyfest/portainer:latest' locally\nlatest: Pulling from chocolateyfest/portainer\n6a5e981230da: Verifying Checksum \n6fb298d4ca0c: Download complete \n83678125b15b: Download complete \n76e25138f786: Download complete \n6a0467cc1469: Download complete \ndocker: filesystem layer verification failed for digest sha256:6a5e981230da7b34a25588f20c8b6b5366256ab1e0aadc0b7ecb566855bf4679.\nI ran the demo last Wednesday on some Azure VM's that also have the nanoserver image pre-pulled it also worked.\nJust run this command\ndocker pull mcr.microsoft.com/windows/nanoserver:1809\nand running the portainer should work afterwards.\n. Ah, I understand now. The problem with such old Windows images from chocolateyfest use the original download link of the nanoserver image.\n{\n            \"mediaType\": \"application/vnd.docker.image.rootfs.foreign.diff.tar.gzip\",\n            \"size\": 98266490,\n            \"digest\": \"sha256:6a5e981230da7b34a25588f20c8b6b5366256ab1e0aadc0b7ecb566855bf4679\",\n            \"urls\": [\n                \"https://go.microsoft.com/fwlink/?linkid=2027490\"\n            ]\n        },\nAfter Microsoft has withdrawn the ISO files and the Docker images they redeployed it later after some weeks. But it seems the download link has changed when you inspect the manifest of the current nanoserver image\n{\n                    \"mediaType\": \"application/vnd.docker.image.rootfs.foreign.diff.tar.gzip\",\n                    \"size\": 98266490,\n                    \"digest\": \"sha256:6a5e981230da7b34a25588f20c8b6b5366256ab1e0aadc0b7ecb566855bf4679\",\n                    \"urls\": [\n                        \"https://go.microsoft.com/fwlink/?linkid=2041341\"\n                    ]\n                },\nAs you can see the checksum and size is the same, but the foreign link to the Windows base image is a different one. Probably the old one gets an 404 or something that doesn't fit the sha256 sum.\n. No I don't have to rebuild the image. I only have to push it again, the foreign link will be updated in the manifest.. It should work now.. I just updated the rebase tool and tried it\nrebase-docker-image portainer/portainer:windows-amd64 -t stefanscherer/portainer:1.20.0-1809 -b mcr.microsoft.com/windows/nanoserver:1809\nI then can spin up the container on an Azure VM with Windows Server 2019 and Containers feature w/ Docker EE 18.09 installed:\ndocker run -p 80:9000 -v //./pipe/docker_engine://./pipe/docker_engine -d -it stefanscherer/portainer:1.20.0-1809\n. @deviantony I guess the rebase-image-tool does not transfer the manifest from mcr to docker hub for new image layers (eg. after each patch tuesday). So you may need the docker tag mcr.microsoft.com/windows/nanoserver:1809 portainer/nanoserver:1809 && docker push portainer/nanoserver:1809 from time to time and use that helper image for the rebase. I did that once in my Docker Hub namespace so that might be the reason it worked for me so easily. The push doesn't  push any windows images, just the manifest for these foreign layers.. @deviantony your command works for me, running the docker cli on my Mac I have to quote the backslashes\n```\n$ docker version\nClient: Docker Engine - Community\n Version:           18.09.1\n API version:       1.39\n Go version:        go1.10.6\n Git commit:        4c52b90\n Built:             Wed Jan  9 19:33:12 2019\n OS/Arch:           darwin/amd64\n Experimental:      true\nServer:\n Engine:\n  Version:          18.09.1\n  API version:      1.39 (minimum version 1.15)\n  Go version:       go1.10.6\n  Git commit:       20b67756d0\n  Built:            01/09/2019 17:09:57\n  OS/Arch:          windows/amd64\n  Experimental:     false\n$ docker run --rm -v '\\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine' portainer/agent\nUnable to find image 'portainer/agent:latest' locally\nlatest: Pulling from portainer/agent\n6a5e981230da: Already exists \nf7de0eb29689: Already exists \nedca6ce5c896: Pull complete \n6a1853f4b4d5: Pull complete \nb29d9e2931ed: Pull complete \nf3afb3f58410: Pull complete \nDigest: sha256:a083305dff8afdd8c6384152022dd7d77fd19684870dd641e96127f622da4f78\nStatus: Downloaded newer image for portainer/agent:latest\n2019/01/23 22:07:07 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: false)\n```\n. Haven't used the agent yet, I just created a single node swarm and ran this (without a custom network)\n$ docker run --name portainer_agent --restart always -e AGENT_CLUSTER_ADDR=tasks.portainer_agent -v '\\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine' portainer/agent\n2019/01/23 22:15:29 [INFO] serf: EventMemberJoin: 081a3a7dc877 172.26.199.136\n2019/01/23 22:15:30 [WARN] memberlist: Failed to resolve tasks.portainer_agent: lookup tasks.portainer_agent: no such host\n2019/01/23 22:15:30 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true)\n. Thank you!\n@deviantony Just a heads-up the latest manifest list looks different for linux as the previous ones.\n```\n$ mq portainer/portainer:1.20.1\nImage: portainer/portainer:1.20.1\n * Manifest List: Yes\n * Supported platforms:\n   - linux/amd64\n   - linux/amd64\n   - linux/amd64\n   - linux/amd64\n   - linux/amd64\n   - windows/amd64:10.0.14393.2485\n   - windows/amd64:10.0.16299.904\n   - windows/amd64:10.0.17134.523\n   - windows/amd64:10.0.17763.253\n~\n$ mq portainer/portainer:1.19.0\nImage: portainer/portainer:1.19.0\n * Manifest List: Yes\n * Supported platforms:\n   - linux/amd64\n   - linux/arm\n   - linux/arm64\n   - linux/ppc64le\n   - linux/s390x\n   - windows/amd64:10.0.14393.2312\n   - windows/amd64:10.0.16299.547\n   - windows/amd64:10.0.17134.165\n```\n(Maybe you need a docker manifest annotate for cross-built linux images.). The user should also see some hints how to do this with Windows <code>-v \\\\.\\pipe\\\\docker_engine:\\\\.\\pipe\\\\docker_engine</code>.. a typo ->  s/npope/npipe/\n. I also thought how we get the server OS here. Maybe this should be left empty and the EndponitService uses the defaults for the correct platform? @deviantony WDYT. same here, keep it empty and use default in Go server side?\n. I suggest to remove MacOS and instead only mention Linux containers. \nI'm working from a Mac to start Portainer on a Windows Docker host as well. \nThis reminds me of LCOW, let's see what combinations we can use there? \ud83e\udd13. Yes, the rebase-docker-image tool still should work for your COPY deployment builds.. ",
    "pindab0ter": "I would really like to see this feature, too\n. ",
    "Killerkiwi2005": "Stopped containers as well, so you can stop auto restart when machine reboots. ",
    "cloudinovasi": "you can work around this issue by creating a new network called \"bridge\" using the driver called \"nat\"... not a fix, a workaround..\n. ",
    "thojkooi": "@deviantony I will update it, but shouldn't the server handle the hiding of containers based on their labels instead of the web application? The containers are still visible in the API response after all.\n. @deviantony I've implemented the container hiding. I've tested it in Swarm-mode using -l owner=acme.\nThis change now results in some duplicate code with containersController.js. I feel like there should be a separate Angular service to solve that.. Hi @deviantony. Sure thing. I will open a PR for the changes I've made.\n. I've added support for most of the items on the above list, and started with the remaining ones (they are view only for now). When I did this, I found that the view became very crowded and it was to compact. I also found that having to click on an edit button to edit for example replicas, followed by a click to \"save\" and pressing the actual save button after was not really a nice way of doing this.\nI suggest to overhaul the service detail view.\nFirst off, I feel like fields should editable right away without having to first click on their own edit button. That worked well when it was editing a single field only, but since the save button that feels unnecessary. That would eliminate the first click to get the input field, and the second click to store the edited value so it can be saved.\nThe additional details (that may or may not be editable) should all be put in their own containers / widgets. I did some work on this already, but I'm not entirely sure how to best order them. For now, I stuck to the same order as they are in the Docker API response. This made the most sense to me.\nBecause the amount of items are quite long, I also felt a second navigation menu would be useful to quickly jump down to the desired part of the page.\nHere are some screenshots of how it currently looks. I'd love some feedback / input about this idea and if it's something you are interested in before I PR this.\nMain details view and the quick navigation menu. Clicking on an item in the quick nav menu will have you jump down to that section of the page.\n\nService configuration / information is grouped. For example, the service container configuration:\n\nYou can edit a specific part, e.g. add a new mount, and the save button will appear under that configuration section. You can reset just those changes as well (or all changes on the entire page, but clicking on the drop down button.\n\nIf this is in the direction you would like to go, pagination support should probably be added for things such as ports, environment variables and labels.. @ncresswell it is one single page. I've pushed it to a branch on my fork: Glowbal/portainer/service-details-view. \n. Thanks. I will make a pr for it soon.. I've made a PR (#453) for the above suggestions implementing all but one item from the list above (it's missing editing resource limits and reservations, which is view only for now).\nI will PR an implementation to adjust / specify the same items during service creation as well.. @deviantony I've changed the location of the save and reset button. I've also fixed an issue with the reset where environment variable changes would not be properly cleared out and updated the placeholder values for the environment variables to be consistent with the create service view.\n\n. @deviantony done\n. I will fix this\n. I've added default values for when the UpdateConfig is not present. I've based these values on the defaults described in the documentation for service create. https://docs.docker.com/engine/reference/commandline/service_create/\nThis should fix the issue encountered by @deviantony. . @deviantony done. Hi @adi90x \nI've got portainer running behind jwilder/nginx-proxy.\nHere is what I've done to set it up:\n- Standard set up as per jwilder/nginx-proxy documentation (environment variable etc)\n- Add a location configuration file for portainer\nIf you take a look at this page: https://portainer.readthedocs.io/en/latest/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer\nYou will notice that the /portainer/ws/ location has some extra configuration. If you leave those out, you will get (at least in my case) an error message 'persistent connection closed' when attempting to accesss the portainer API.\nI've added the following to my proxy configuration to solve that:\nIn /etc/nginx/vhost.d/portainer.myhostname.example_location:\nnginx\nproxy_http_version 1.1;\nproxy_set_header Connection \"\";\nSee here for the jwilder/nginx-proxy documentation about the location file.\nI don't know if there is a better way, but this does work for me.\n. I've been able to reproduce. I've PRed a fix in #365.. @deviantony I've made the requested changes to the text. I tried this but I keep getting \"Your session has expired\" errors when attempting to log in. It never lets me past the authentication view.. This works fine for me. Note that you have to hit the save button that appears under the details view before the change will be applied.. I agree. I got some ideas as part of #304, since the current view is getting crowded now I've added some more fields to the service view. I will put my suggestions in the #304 issue.. Indeed a mistake, I use grunt run and the variations (grunt run-swarm-local etc).\nI will give that branch a try and report back.. When trying with that branch I get the following from the logs:\nAuthentication init. Exp date: \nportainer.js:4008 \"2016-12-12T05:03:17.000Z\"\nportainer.js:495 Token has expired. Exp date:\nportainer.js:496 \"2016-12-12T05:03:17.000Z\"\nangular.js:118 TypeError: $state.go is not a function\n    at portainer.js:497\n    at m.$broadcast (angular.js:148)\n    at angular.js:356\n    at m.$broadcast (angular.js:148)\n    at angular.js:116\n    at m.$eval (angular.js:145)\n    at m.$digest (angular.js:142)\n    at m.$apply (angular.js:146)\n    at angular.js:20\n    at Object.invoke (angular.js:41)(anonymous function) @ angular.js:118(anonymous function) @ angular.js:90$broadcast @ angular.js:148(anonymous function) @ angular.js:356$broadcast @ angular.js:148(anonymous function) @ angular.js:116$eval @ angular.js:145$digest @ angular.js:142$apply @ angular.js:146(anonymous function) @ angular.js:20invoke @ angular.js:41c @ angular.js:20Bc @ angular.js:21fe @ angular.js:20(anonymous function) @ angular.js:317b @ angular.js:189Sf @ angular.js:37d @ angular.js:37\nAnd date returns:\nnew Date()\nTue Dec 20 2016 11:31:33 GMT+0100 (CET). The issue was client side. My Docker installation was running with an incorrect system time (yet the host was running with the correct system time). See also https://github.com/docker/for-mac/issues/17.\nI've solved it by resetting my Docker install, but I suspect a restart would also be sufficient. For comparison, here is the output I got from the new branch after I reset Docker:\nAuthentication init. Token expiration date (from jwtHelper, UTC): \nportainer.js:4013 \"2016-12-22T18:57:30.000Z\"\nportainer.js:494 Browser date (using Date(), local TZ):\nportainer.js:495 \"2016-12-22T11:14:19.764Z\nSo this was an issue that only appeared with Portainer because of the expiration date, but is not caused by Portainer. Thanks for your help @deviantony.. I agree. I will make the change.. @deviantony I've made the changes. I've also fixed an error that occurred when you did a page refresh or opened the node details page as the first page. The endpointMode variable is not yet defined at that stage. To fix that, I've added recursive call with a timeout, until the variable is available.\nI'm not sure if there is a better way to deal with that in AngularJS, but it does seem to work reliable.. @deviantony I've made the requested changes.. The date in the portainer container should be the same as your host machine. If you use a vm, like with Docker for mac or Windows, its the same as the system time returned by docker info. . Sounds like it's the same #398 but for Windows.. I don't think your issue is the date shift issue, but rather the multiple replicas of portainer.\nThe JWT may not validate across the 3 replicas, since the JWT secret is randomly generated. (see https://github.com/portainer/portainer/blob/develop/api/jwt/jwt.go#L27)\nAlso since Portainer uses a file based database, you may be best off using a single replica instead for that reason.. @deviantony branch has been rebased. I've added support for creating, listing and inspecting secrets in #521.. @deviantony branch has been rebased. > Would it be possible to add the ability to map a secret when creating a service in this PR?\nYes, I am going to work on that next.. Rebase went wrong - I will fix this shortly.. @deviantony I've made the requested changes.. Publish all exposed ports may be better terminology.. I feel this should be done in addition to the existing edit environment variables functionality. Perhaps with some toggle button to switch between both edit modes?. Does this work correctly on multi-node set ups?\nAs far as I know, a container can exist on for example the manager node and won't be known on the manager node, while the task itself (and the reference to the container id) is known on the manager.\nSame thing for the image.. I will take a look and try to reproduce. It might be something with the scheduling mode that is updated incorrectly.. I was unable to reproduce this using portainer v1.12.3, on Docker 17.04.0-ce-rc2 using a single node swarm mode cluster.\n\nI've created a global service named test, without any placement constraints.\nI've added the label myrole to a single node in a swarm cluster with the value database.\nI updated the service named test with the placement constraint node.labels.myrole==database \nThe task was scheduled as expected.\n\nI also confirmed that adding the constraint but without the label added to the node works correctly as well.\nI will see if I can reproduce this on a different system with a few more nodes.\n@discotroy did you confirm if the label is correctly set for the desired nodes?. Should be able to use momentjs durations for this.\nhttps://momentjs.com/docs/#/durations/\n. You are right, I missed that one. I've included the fix for it.. I've given this a try and it seems to work well from what I could tell in my limited play through. Nicely done @deviantony.\nThe fact admin users cannot be added to a team (and once an user that is a member of a team gets made admin, that user won't show up in the team anymore), is slightly confusing though. I assume the reason is that admin users can see everything regardless of team membership, so it is  unnecessary to add admins to a team when it comes down to ACL. I'm not sure if I like it.\nAnother point is that team management is slightly hidden away in the sidebar. Maybe some option to go to team management from the user management view, without having to look through the sidebar as a future enhancement?\n. Doesn't this result in a page refresh of the service details? Which means that if you are editing some fields and click a link in the nav menu, you will lose your changes?\n. Is portainer_net created using the --internal=true flag?\nYou can check by using:\n$ docker network inspect portainer_net | grep internal. This issue is indeed about the config support in Swarm mode, which is available since Docker 17.06. Docker configs indeed only work in Swarm mode.. @deviantony done.. This is now functional.. @deviantony Ive done a rebase. . @deviantony done. . I've made the requested changes. I think there also needs to be done some changes in the Portainer API itself as well. I've taken a look at some things done for the Secrets API endpoint, but I have yet to run / test it. For now, it's on a separate branch (bf59b1b). .  I've added the commit. You should be able to edit this branch as well.. Thanks @deviantony!. I've opened a PR for placement preferences support (#1003).. Rebase has been done. I will refactor the ContainerLogs, ServiceLogs, TaskLogs components to make use of $resource and promises. . I've made all requested changes. \nThe shared components are now moved to a new component logs-view. This also includes the html template. All log pages are now using the same code and layout.\nThe component has been placed in the directive directory. I wasn't entirely sure where else to put it; I didn't want to mix it in with the current components, which are mostly pages within Portainer..  I saw the same issue today. The container state is \"dead\", but it shows up as running in the container list view.\nIt seems to happen for any dead container. \nRunning the same portainer version, Docker v17.04 and using Chrome as well.\n. Confirmed. . Just tried the loading bar. It's much better as the spinner. Nicely done \ud83d\udc4d . Portainer uses the Authorization header for passing the JWT. \nhttps://github.com/portainer/portainer/blob/92391254bcd8ec71ae95b8171d790b0ed1df20c2/api/http/security/bouncer.go#L122\nWhen configuring Traefik to use basic authentication, it will also use the Authorization header, but it will pass the username and password to traefik. I'm not sure if Traefik forwards the  Authorization to Portainer, but if it does, Portainer will not accept it because it's not a (valid) JWT. \nWhen you enter the username / password into Portainer and retrieve a JWT, that will be passed through Traefik in the Authorization header. Which will deny the request, as it no longer matches the basic auth user.\nI'd say this is expected behaviour with this set-up.\nTo get this to work, you would need to have Portainer use a different header for passing the JWT. This is currently not supported.. Running an applications that use the authorization header behind a proxy configered with Basic Auth will not work. \nYou could try to map basic auth only on the /api/auth endpoint. This API endpoint does not require a JWT. Doing this would mean you need to provide basic authentication only when attempting to log into Portainer. Might be worth a try.\nHere is an example, untested;\n```nginx\nlocation /portainer/api/auth {                                                 \n    auth_basic \"Restricted Content\";                                                                                                                    \n    auth_basic_user_file /data/.htpasswd;     \n  }\nlocation /portainer/ {                                                                                                                                      \nproxy_http_version 1.1;                                                                                                                                   \nproxy_set_header Host              $http_host;   # required for docker client's sake                                                                      \nproxy_set_header X-Real-IP         $remote_addr; # pass on real client's IP                                                                               \nproxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;                                                                                            \nproxy_set_header X-Forwarded-Proto $scheme;                                                                                                               \nproxy_read_timeout                 900;\n\nproxy_set_header Connection \"\";                                                                                                                           \nproxy_buffers 32 4k;                                                                                                                                      \nproxy_pass http://portainer/;\n\n}\n``\nNote that with this approach all other resources for/portainer` are accessable without basic authentication when doing this; though you do need to first log in with basic auth on Nginx before logging into portainer... The jwt secret gets generated on restart of the container. \nSessions are not stored in a database, but the jwt is stored client side. When the secret changes, the old jwt is invalid and a new one needs to be requested.. console.log should probably be removed\n. I think when you run grunt lint you are going to get an error about a missing semicolon here.\n. Placeholder for a variable name in the service creation view is FOO. com.example.foo is used for labels.\n. The containers in network from the network response is different as it is from the containers API endpoint. I can make the requested change, but that would mean we would have to filter out the information about a container for that specific network (e.g. IP address of that container in the network).\nThe alternative is to iterate through container. NetworkSettings.Networks to find the desired network and use the information from that. I feel that is overkill, since we already have the desired information and we only use the query for containers to fetch the labels and filter out the containers we want to hide.\nI've made some changes and pushed it to this branch.. This needs changing to Notifications. Removed. Renamed. According to the ConfigCreate API docs, Data needs to be a base64-url-safe-encoded string.\nhttps://docs.docker.com/engine/api/v1.32/#operation/ConfigCreate\n. I agree. I will change it to always encode the config. . Agreed. All log controllers are now pretty much the same, so we can easily move most of it to a separate service.. Thanks, I will use that.. This should only be shown in API version >= 1.30.. This should only be shown in API version >= 1.30.. ",
    "RobBrazier": "Yeah, agreed. It does show an error message if the container you entered doesn't exist, but having a drop down box would definitely be better.\nI'll have a go this evening\n. It's now updated so that you can select running containers. I can't seem to get swarm working to test it out there (/dockerapi/info just seems to hang and then return 500), however I copied some of the logic from the templates route, so hopefully it will work in swarm as well as on a single host\n. whoops, missed those - fixed now.\n. I'll try to get it running locally in swarm mode to fix the swarm issues later\n. managed to get it working in swarm, strangely though the container was shown as /containername, not /swarm-node1/containername though. I've catered for both though.\n. ",
    "egulacti": "+1\nI look forward to use this feature. It will definitely speed up deployment and adoption of Portainer.. ",
    "enriched": "It would be nice if you were able to log from multiple containers as well.  Perhaps being able to select multiple entries from the container screen and click a \"logs\" button.\nIn my workflow I am often interested in viewing the output of two containers simultaneously. \n. ",
    "resilva87": "Hi\n@deviantony Is there any work ongoing about this? I'd like to help if possible or start a new branch :). Hi\n@deviantony Is there any work ongoing about this? I'd like to help if possible or start a new branch :). Hi,\n@deviantony Thanks for the info. I've rebased the code also, unfortunately I did a mistake while rebasing so I had to reset things and start again, hope it didn't mess with the rest of changes since my first commit. If that's the case I can reopen this PR.\n. Hi,\n@deviantony Thanks for the info. I've rebased the code also, unfortunately I did a mistake while rebasing so I had to reset things and start again, hope it didn't mess with the rest of changes since my first commit. If that's the case I can reopen this PR.\n. @deviantony Yeah, sorry about that. Reopened as https://github.com/portainer/portainer/pull/604.\nTks. @deviantony Yeah, sorry about that. Reopened as https://github.com/portainer/portainer/pull/604.\nTks. Hi,\n@deviantony Thanks for the feedback, I've just made the changes.\n. Hi,\n@deviantony Thanks for the feedback, I've just made the changes.\n. ",
    "liyaka": "Experience the same problem on RHEL 7.2, docker 1.13.x and docker 17.3.0 with swarm mode or without it.\nPortainer version - latest or 1.11.0. Is this feature planned to be added to the next version?. @deviantony if the user forgot the password, there is no option (in UI at least ) to reset the password. Thank you!. @deviantony Did you succeed to reproduce?. Is there an option to run portainer in debug mode, so I can get some information in the log that will help me to investigate?\nWe use Portainer widely - amazing tool! - and this issues stops us from moving to work with namespaces, which quite critical... Unfortunately, I didn't have a chance to test it yet, moved to another project... ",
    "lamhaison": "I use Portainer with  v1.11.3 version. ",
    "hellfosa": "not only with vim, with cat\\mc and etc too. \nWebSocket connection to 'ws://portainer_ip/api/websocket/exec?id=6f504223ab955d0ddb7c6f745c28f04e8a5157c8c0dbd86c4b4df937d115da7a&endpointId=1' failed: Could not decode a text frame as UTF-8.\napp.ef2422d5.js:27 WebSocket is already in CLOSING or CLOSED state.\nportainer 1.12.4 Please fix it. ",
    "thefangbear": "Same problem here. Seems to be anything that uses a commandline-GUI. vi and vim but nano works though. ",
    "theAJFM": "Not sure if this solves the problem for everyone, but this might have something to do with your locale settings. Simply set your locale in your Dockerfile or do something like this in your console:\necho \"export LANGUAGE=en_US.UTF-8\nexport LANG=en_US.UTF-8\nexport LC_ALL=en_US.UTF-8\">>~/.bash_profile\nsource .bash_profile\nI don't actually use portainer myself, but if the exception truly did originate from docker api websocket connection, then this should do the trick.. ",
    "michaelboke": "same here ubuntu 16.04 image, start vim directly or via bash console results in disconnect.\nAlso nano works as a workaround. ",
    "pytimer": "Hi, i also have same problem.  Console can use vi open file, but can not use vim.\nWhen i use vim open file will return ^[[2;2R character, then websocket disconnect.\nportainer version is 1.17.1.\nMay i know this problem that what time fix, or this issue progress?\nthanks.. @deviantony \nThank you for your reply.\nvi works well for me, just vim not work.\nI want to try find reason, so write websocket demo to connect container, it have same problem. \ni use  webconsole  to connect vm before, it works well. So i read this repository issue, i find it also have vim question, but i don't know whether is it like portainer.\nI read his PR, but i not understand what he do. Maybe ssh is different from docker exec. I don't know if it helps with this issue, if you have free time, you can see. \nLink below:\n\nhttps://github.com/shibingli/webconsole/issues/2\nhttps://github.com/shibingli/webconsole/commit/154044922781649930425df87cc39fedfa2052df. \n",
    "brucewilkins": "Just in-case this helps anyone, I'm running into the same issue and was unable to get vi/vim working using any of the above suggestions.\nHowever, I was able to install emacs and it works as expected.. ",
    "brunnotelma": "I don't know if is there anyone still running into this problem, but I've just found a way to workaround it:\n```dockerfile\nFROM php:5.6.36-apache-stretch\nENV LANG en_US.UTF-8\nENV LC_ALL en_US.UTF-8\nENV LANGUAGE en_US.UTF-8\nRUN echo en_US UTF-8 >> /etc/locale.gen && locale-gen en_US.UTF-8 && DEBIAN_FRONTEND=noninteractive dpkg-reconfigure locales\n```\nSeems to work on any Debian based image :). @NextBlaubeere I'm supposing you're using Portainer to access some container's shell.\nSo, in the container you want vim to work, use those commands (inside Dockerfile) to set the encoding to UTF-8.\ndockerfile\nENV LANG en_US.UTF-8  \nENV LC_ALL en_US.UTF-8\nENV LANGUAGE en_US.UTF-8  \nRUN echo en_US UTF-8 >> /etc/locale.gen && locale-gen en_US.UTF-8 && DEBIAN_FRONTEND=noninteractive dpkg-reconfigure locales\nP.S.: I'm assuming you're using a Debian based image.. ",
    "NextBlaubeere": "ok... \n vi and vim do not work... \n when saving a file with nano i get messed up files.\nwhat do i supposed to do with those last commands from @brunnotelma . i would also like to see this.\nif you start a bash-session in portainer and edit a file with vim or nano, there will be only garbage in the file.\ntry it! ;-). ",
    "tkwlsrl": "Here's my solution for Dockerfile.\nRUN apt-get update && apt-get install -y locales locales-all\nENV LC_ALL en_US.UTF-8\n. ",
    "alxvgt": "Tested on my Dockerfile, solution of @brunnotelma has worked for me ! Thanks ! \ud83d\udc4d . Tested on my Dockerfile, solution of @brunnotelma has worked for me ! Thanks ! \ud83d\udc4d . ",
    "istree": "vim-tiny worked for me.. ",
    "zhiephie": "Try as root, error is same.\nOs Ubuntu 16.04 64 bit\nDocker version 1.12.3\n. Okay, I'm try again latter\n. ",
    "vothanhkiet": "Did you run behind a proxy ? I got similar issue when run behind HA-Proxy, it turn out that the keep-alive option on proxy was turn off. \n. ",
    "igal-dahan": "Hi \ni have tried port 2375 on command:\ndocker service create --name portainer --publish 9000:9000 --constraint 'node.role == manager' --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock portainer/portainer  -H tcp://172.19.35.153:2375\nand i got:\n2017/01/03 15:06:25 http: proxy error: dial tcp 172.19.35.153:2375: getsockopt: connection refused\n2017/01/03 15:06:25 http: proxy error: dial tcp 172.19.35.153:2375: getsockopt: connection refused\n2017/01/03 15:06:25 http: proxy error: dial tcp 172.19.35.153:2375: getsockopt: connection refused\n2017/01/03 15:06:25 http: proxy error: dial tcp 172.19.35.153:2375: getsockopt: connection refused\n2017/01/03 15:06:25 http: proxy error: dial tcp 172.19.35.153:2375: getsockopt: connection refused\n2017/01/03 15:06:25 http: proxy error: dial tcp 172.19.35.153:2375: getsockopt: connection refused\nseems wired, i thought the -H is to connect to swarm and swarm is running on 2377 isnt?\nIgal\n. when use port 2377 i got the same error above \n2017/01/03 15:08:34 http: proxy error: malformed HTTP response \"\\x15\\x03\\x01\\x00\\x02\\x02\"\n2017/01/03 15:08:34 http: proxy error: malformed HTTP response \"\\x15\\x03\\x01\\x00\\x02\\x02\"\n2017/01/03 15:08:34 http: proxy error: malformed HTTP response \"\\x15\\x03\\x01\\x00\\x02\\x02\"\n2017/01/03 15:08:34 http: proxy error: malformed HTTP response \"\\x15\\x03\\x01\\x00\\x02\\x02\"\n2017/01/03 15:08:34 http: proxy error: malformed HTTP response \"\\x15\\x03\\x01\\x00\\x02\\x02\"\n2017/01/03 15:08:34 http: proxy error: malformed HTTP response \"\\x15\\x03\\x01\\x00\\x02\\x02\"\n. ",
    "logvik": "@igal-dahan, Hi, I think you must use 2376 port,\njust for quick checking you can use \ndocker --tlsverify  -H tcp://remoteiphere:2376 version\nFor example for 2377 you will get:\nAn error occurred trying to connect: Get https://remoteiphere:2377/v1.24/version: x509: cannot validate certificate for remoteiphere because it doesn't contain any IP SANs\nFor 2375: \nAn error occurred trying to connect: Get https://remoteiphere:2375/v1.24/version: dial tcp remoteiphere:2375: connectex: No connection could be made because the target machine actively refused it.\nThat's because new version docker uses tls in common case.. ",
    "EugeneLoy": "Indeed, I was running \"Docker for Windows\". Thanks for clearing this out.\n. ",
    "martemorfosis": "Same issue here and I'm running Docker for Windows:\ndocker pull portainer/portainer:windows                                                    \nwindows: Pulling from portainer/portainer\n5496abde368a: Downloading \n94b4ce7ac4c7: Downloading \nfca08752c30d: Download complete \n15773d43b0c7: Download complete \n26f9249363f2: Download complete \na5fc56c7d666: Download complete \nunknown blob\nTried several times but I'm unable to finish downloading the container image.\nDocker version:\n1.12.3, build 6b644ec\nDocker info:\nContainers: 2                                                     \n Running: 0                                                       \n Paused: 0                                                        \n Stopped: 2                                                       \nImages: 24                                                        \nServer Version: 1.12.3                                            \nStorage Driver: aufs                                              \n Root Dir: /var/lib/docker/aufs                                   \n Backing Filesystem: extfs                                        \n Dirs: 158                                                        \n Dirperm1 Supported: true                                         \nLogging Driver: json-file                                         \nCgroup Driver: cgroupfs                                           \nPlugins:                                                          \n Volume: local                                                    \n Network: bridge null host overlay                                \nSwarm: inactive                                                   \nRuntimes: runc                                                    \nDefault Runtime: runc                                             \nSecurity Options: seccomp                                         \nKernel Version: 4.4.27-moby                                       \nOperating System: Alpine Linux v3.4                               \nOSType: linux                                                     \nArchitecture: x86_64                                              \nCPUs: 2                                                           \nTotal Memory: 1.919 GiB                                           \nName: moby                                                        \nID: 7YTS:LELQ:TZLB:ALZI:UMDF:E4CN:WCFM:GY44:ESEX:IGZV:R7CV:EDGP   \nDocker Root Dir: /var/lib/docker                                  \nDebug Mode (client): false                                        \nDebug Mode (server): false                                        \nRegistry: https://index.docker.io/v1/                             \nWARNING: No kernel memory limit support                           \nInsecure Registries:                                              \n 127.0.0.0/8\n. @deviantony The one I installed is this:  https://docs.docker.com/docker-for-windows/\nNow I'm confused about which one is what you call Docker ON Windows and which is the FOR windows one.\n. @deviantony Thank you so much! It is working now and I really like it!. ",
    "alisarioglu": "Sorry that I post on a closed issue, but I'm still confused based on your posts 8 and 10 day ago.\n10 day ago you wrote:\n@martemorfosis you're running Docker on Windows. Please pull portainer/portainer :)\n\n8 day ago you wrote:\nSo you're running Docker for Windows, please use the portainer/portainer image.\n\nI'm running 'Docker for Windows'. The one that requires 64bit Windows 10 Pro. https://docs.docker.com/docker-for-windows/\nWhen I try to pull portainer/portainer:windows I have the same issue. \nDownloads for 5496abde368a and 94b4ce7ac4c7 restarts few times but never finishes and docker pull ends reporting unknown blob in the end.\nWhen I try to pull portainer/portainer download worked, but I can't get informations.\nI allways receive:\nFailure\nUnable to retrieve containers\nFailure\nUnable to retrieve images\nFailure\nUnable to retrieve networks\nFailure\nUnable to retrieve volumes\n\nMy version and docker info:\n```\nDocker version 1.12.3, build 6b644ec\nC:\\Users\\asa>docker info\nContainers: 5\n Running: 2\n Paused: 0\n Stopped: 3\nImages: 71\nServer Version: 1.12.3\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 94\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null host overlay\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.4.27-moby\nOperating System: Alpine Linux v3.4\nOSType: linux\nArchitecture: x86_64\nCPUs: 1\nTotal Memory: 1.94 GiB\nName: moby\nID: EFP7:LHSY:SSHF:5R7O:GQOQ:MFP3:2M2K:TNAE:2PZC:6QQW:QCTC:SXRG\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nWARNING: No kernel memory limit support\nInsecure Registries:\n 127.0.0.0/8\n```\nGreat job so far, it runs smooth on centOS and raspberry, \nmany thanks in advance, Ali . Because of the description Docker for Linux only,\n\nUse the following Docker command to manage a local Docker engine (Docker for Linux only):\n\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n\nI always try to run with localhost or IP or hostname ...\ndocker run -p 9000:9000 portainer/portainer -H tcp://localhost:2375\n\nand received http: proxy error: dial tcp 10.1.20.86:2375: getsockopt: connection refused\nI'm not very familiar with docker socket management on windows and the description (Docker for Linux only)  on the homepage has kept me from to run poitainer with the volume/socket binding methode. \nPerhaps the description on the homepage should be adapted accordingly.\n@deviantony, thank you for your time and your effort.\nBest wishes, Ali. @deviantony With some kind of magic it has worked with\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n\non Windows 10 Pro and Docker for Windows.\nNow I'm running portainer on Windows, CentOS(Virtual) and raspberry pi :). ",
    "gmarsay": "I need too this feature for link selenium/hub and selenium/node-chrome-debug\nI run manualy with docker run -d --link selenium-hub:hub selenium/node-chrome-debug. I think too this would be a great addition, for support this case : https://github.com/portainer/portainer/issues/329#issuecomment-288742821. ",
    "gianniceresa": "True the --link is a deprecated legacy feature of Docker, but for quickly link things it's still a lot quicker and easier than create a new custom bridge network and attach the 2 containers to that network.\nThe idea behind #597  was not only to have access to all the possible flag of docker but also to expose a way to still use --link if needed (for now I create container by command line and only after I use Portainer to stop/start them, once I added all my custom flags and --link too).. Good point about the API, didn't think about that ...\nLooking at the API right now (assuming it's this one: https://docs.docker.com/engine/api/v1.26/#operation/ContainerCreate) they support a lot (\"StopTimeout\", \"AutoRemove\", \"Links\" etc.) but it's true that it's more complicated than just a single text input as it require to be formatted based on the API specs.. ",
    "daninfuchs": "FWIW this \"legacy feature\" that \"may eventually be removed\" (quotes from the Docker docs referenced above) still seems to have no functional equivalent to my knowledge, and is presently hamstringing me being able to use an OpenVPN container to link to several local docker images with services that misbehave when sent thru typical tcp proxies (SOCKS, SQUID, TCP tunnels, etc) to my VPN, while exposing an nginx forward proxy to the local network to enable access via management hub software.\nMy home network may be trivial and the services aren't actually important to anyone but myself right now, but the fact remains - it's been over a year, Docker has (presumably?) updated several times now.\nI'd like to have access to a manual way to use the UI for a link. I hesitate to do it by hand; I don't understand Docker/Portainer well enough to trust that something won't break if I try to update the container(s) through the UI later, or if the UI eventually DOES patch in support, etc etc etc - any official word? Can we link containers? Please? Can we get an official \"just issue docker run <...> --link <...> from the command line and there won't be any issues with modifications from within Portainer UI\" from someone?\nCan we support links, with a caveat posted in oldschool HTML blink tags to make sure everybody notices that they might stop working? Granted, by then SURELY Docker upstream will have either finalized or superceded \"link\" support with something drop-in compatible or at least easily migratable given how many containers I would estimate have been deployed by now using it. As one option, you could import the same click-to-add elements from Port mappings or (even better) a similar dropdown scheme to Volumes, listing instead other linkable/running containers.\nHonestly, I feel outright hindered by Portainer's lack of support of --link functionality, and while I understand how (nearly three years ago) your stance of \"legacy and probably going away soon\" would prevent adding it, but after being a maintained, functional feature for so long I suspect it'll go our way. Moreso if most of the popular management toolkits exposed its features, perhaps.. Hi there ncresswell, thanks for the reply.\nI've had some \"fun\" issues with DNS and container names, but that aside -\nHow does this implement environment variable sharing as per --link 'spec'?\nAlso, is this network going to respect routes pushed by OpenVPN, etc? Are its DNS requests handled by the Docker engine via local resolvers, or network stack? What about containers that require a macvlan network?\nAlso, assuming I really DO want to paint my car red, is there any harm in manually specifying --link at the command line (and making the point of a monolithic management stack secondary)  or is there a known reason not to use it other than \"it's icky\"?. I'm happy to hear that, thank you for your consideration.\nIn the interrim, there is the issue of access control. I don't have explicit need of it, but I'm not the only one with a key to that particular cabinet - is there a way to create a container via command-line-fu with access control enabled to allow me to manually link it? I couldn't find the solution via search but it's late and I might've grabbed the wrong words. I suspect it's more of a Portainer-backend thing with mappings and such than a Docker Engine command line thing, in this case, and I'm content with \"can't be done\" - just making sure.. No sir - in this case, since I have to manually create a container with Docker Engine command-line operations (a workaround since I want/need --link support) I was curious if there was a way to also enable Access Control on it within Portainer/Docker Engine/wherever that needs to happen, via CLI or other.\nI can't \"Duplicate/Edit\" it using the webUI to turn on Access Control. When doing so, the container loses the --link parameter - or at least, so I assume, since it's specifically destroying and re-creating (or just creating anew) a container, using the information provided within its supported parsing/understanding of the Docker Engine API data, which presumably would not include --link configuration directives.\nThe Access Control issue I raise is only applicable in limited cases - around the context of needing to manually implement --link (or other unsupported configurations) via CLI, for containers that I would also prefer have Access Control enabled. I'm assuming the answer is \"can't be done for now\" and I'm okay with that.. ",
    "tronicum": "I would suggest to name the default admin portaineradmin so if you add LDAP or other SSO later, those users don't overlap.\n. ",
    "Hronom": "Can't wait for this feature=). Please can you add this for all lists: Image list, Network list, Volume list ?\n. Is this possible to have both options available: select all on page and select all ?. @ncresswell yes I'm also accept this, this boxes must be not in table and must have header with description. Like Display All on this screen. @gidcs I'm mean that those two comboboxes(select all on page and select all) must look like Display All combobox on screenshot...\nBut now when you ask about it, I start thinking that combobox Display All will also be a good addition to functionality :). @seffyroff yes it looks like size of logs cause this issue.\nHowever without copy all, new logs is unusable.. @deviantony It's strange that you can't reproduce bug - it's pretty stable.\nI'm able to got this bug on 1.16.3 and 1.16.5. Even if I do clear cache and hard reload in my browser.\n\n@seffyroff @Hronom I'll also need access to a heavy logging container image to try to reproduce. Any of you can reproduce this issue using a public image and send it to me to give it a try?\n\nYou have in portainer string:\n2018/04/05 07:40:59 Starting Portainer 1.16.4 on :9000\nwhile you debuging just try to spam this string.\n\n@Hronom any UX feedback you'd like to give us?\n\nCan you somehow just create TextArea with working ctrl+a. For example check TextArea of comment here on github. Type text and press ctrl+a and you will see that it selects all text in this TextArea. @deviantony Great, if you will require some additions in app - write I will add.\nAlso here is updated information about my system:\nChrome 66.0.3359.170 (64 bit)\nLinux 4.13.0-41-generic #46-Ubuntu SMP Wed May 2 13:38:30 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nPortainer:\n1.17.0. Guys sorry for pushing, what the status of this? \nI'm also confirming that under latest Firefox it works good, but under latest Chrome - no.\nChrome is popular, so this is very important bug.. @deviantony understand, thanks for reply.\nMy suggestion maybe add additional button and call it like raw view. This will show logs in regular text area, so users will be able to press ctrl + A and then ctrl + C to copy all.\nCheck comments input here on GitHub, you able to press ctrl + A and then ctrl + C to copy all your comment that you are typing.. ",
    "cichymks": "Waiting for it too.. ",
    "nbvcxz": "@deviantony great to hear - even only one pass protected account makes portainer useful in production environment\n\n@diegoperini about the ability to specify the credentials for the default administrator uing env variables. I do like it (either via env. variables or portainer flags) but this would expose the credentials in clear view for anybody that would inspect the container. On a security point of view, I don't really like it.\n\nTrue, credentials should be hashed somewhere inside container; username is not a problem (admin, root or anything else), but password should be secured. The idea of setting with first login and/or changing in portainer is ok.\nSysadmin pov I would love to have it integrated with LDAP, but it's just an idea. General password protection is first main step now.. ",
    "dimitrovs": "Any chance we can disable this feature through an environment variable?. Please consider adding an environment variable in addition to the flag.. @deviantony so we can put it in a docker-compose file.. @deviantony thanks.. --no-auth works now with latest image, thank you.. @ncresswell that's not the same, it maps a random port to the exposed port. If the container is on the bridge network it will open it up on the public IP.. You guys are confusing \"EXPOSING\" and \"PUBLISHING\" ports. What the current UI does is allow you to \"PUBLISH\" ports (i.e. the docker -p flag). If you specify two ports it will open the left-hand one on the host (i.e. on all interfaces by default) and will forward it to the right-hand one on the container. If you don't specify the left-hand one then it will open a random port on the host and will forward it to the right-hand one on the container. That's PUBLISHING ports, i.e. OPENING ports on the HOST.\nWhat I asked for is EXPOSING ports (i.e. docker --expose or EXPOSE in the Dockerfile). When you expose a port there is no mapping involved, no port forwarding involved, it just allows linked (old style links) containers to talk over the exposed port or service discovery.. @WTFKr0 yes, that's exactly it. Exposed ports are meta information about the container which is used for service discovery and auto-configuration, as mentioned.. ",
    "Nicknack1234": "@deviantony +1 for the env var user/pass config, It adds flexibility to standing up a portainer instance. For instance Rocket.Chat uses the first user to register become admin method unless a env var is setup that specifies the admin account. . ",
    "wardcomm": "try\nusername: admin-debug \npassword: admin-debug\nif it worked this is what I used\ndocker run --privileged -it --name portainer --env ADMIN_USERNAME=admin-debug --env ADMIN_PASS=admin-debug -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --admin-password '$2y$05$kKX3w4cdWZms1zppyHIza.P1ArKizvVg8xG9. try\nusername: admin-debug \npassword: admin-debug\nif it worked this is what I used\ndocker run --privileged -it --name portainer --env ADMIN_USERNAME=admin-debug --env ADMIN_PASS=admin-debug -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --admin-password '$2y$05$kKX3w4cdWZms1zppyHIza.P1ArKizvVg8xG9. what can i run to give you more details? The UI is up and running but there is no data in UI like container shows no running containers even though I have five containers running. ---> No Data.. what can i run to give you more details? The UI is up and running but there is no data in UI like container shows no running containers even though I have five containers running. ---> No Data.. I did that and it says Failure Endpoint not found. but the UI is up and runnning. I did that and it says Failure Endpoint not found. but the UI is up and runnning. SEinux was enabled... i disabled it and restart the service. Then restart the portainer container. still not working. I also dont have any firewalls turned on.\ngo to this location http://jchadward.com:9000/#/dashboard. SEinux was enabled... i disabled it and restart the service. Then restart the portainer container. still not working. I also dont have any firewalls turned on.\ngo to this location http://jchadward.com:9000/#/dashboard. try admin admin. try admin admin. \nStrange:\nchrome works left print screen\nfirefox does not show data. right print screen\n. \nStrange:\nchrome works left print screen\nfirefox does not show data. right print screen\n. can I gather any logs for you guys\n. can I gather any logs for you guys\n. that worked\n\n. that worked\n\n. ",
    "mynameissunny": "Hi @deviantony keep up the good work man ...this is a awesome tool ,we are using it for all our applications ,we found some bug or i don't know how to do it ,we are not able to see the containers when we are able to login as user ,if we give admin permissions we are able to see everything ,but not as a user we are able to see just the images ,\n\n . ",
    "davibe": "Yes aggregated version with timestamp | node_name | logentry would be amazing (https://docs.docker.com/docker-cloud/getting-started/deploy-app/8_view_logs/). I know docker swarm does not support this yet but for example miniswarm uses a bash hack for it https://github.com/docker/docker/issues/23710#issuecomment-239004208\nMaybe also viewing swarm-node logs one by one could be enough, or even better in some cases.\nThen for each single swarm-node service container it would be nice to be able to stop or exec bash into it like we can already do with single node containers. This is great for inspecting/debugging.\n. ",
    "kinghuang": "Can this be considered for Portainer's roadmap, given Docker 1.13.0's imminent release this week?. ",
    "gorazio": "Any news about this feature?. ",
    "Nagoo": "Guys as the Docker documentation states, the same command can be used both for services and tasks:\nUsage:  docker service logs [OPTIONS] SERVICE|TASK\nSo, I  guess that this issue is a duplicate of #1004 , and there is a pull request trying to solve it: #1005 \nShould this issue be closed?. ",
    "saumilpatel": "But how do I select multiple containers without clicking in each box ? For example, to select say all container from the 5th to the 100th container, one way would be to hold the shift key and just select 5th and 100th container and all the containers between 5th and 100th would be selected. \n. Thanks... I think this is critical for people who like us will use it on large clusters. We have 50 nodes, 400 cores, so have to deal with many containers at a time.\n. ",
    "JisuPark": "Is it still open issue? #372 may resolves this issue too.. ",
    "adi90x": "Perfectly working ! Thanks a lot for the information ! \n. ",
    "MarvinDurot": "If you want web tty console to work, you must add this lines in the previous file :\nproxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"upgrade\";\nNote: you can also replace :\nproxy_http_version 1.1;\nproxy_set_header Connection \"\";\nwith this simple line: proxy_set_header Connection $http_connection;.. If you work with the jwilder nginx reverse proxy, you have to create a custom location file like :\n* yourdomain.com_location in the mapped volume /etc/nginx/vhost.d\nThen, add this following lines :\nproxy_set_header Connection $http_connection;\nproxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"upgrade\";\nFinally, restart the nginx proxy container.. ",
    "ovizii": "This solution contradicts: https://github.com/jwilder/nginx-proxy/issues/705 \nhere is suggested to use \n\n\u2514\u2500\u2500 vhost.d\n    \u2514\u2500\u2500 app.mydomain.com_location\n\nwhile the other linked issue suggests to use:\n\n\u2514\u2500\u2500 vhost.d\n    \u2514\u2500\u2500 app.mydomain.com\n\nNone of these two work for me. After reading https://portainer.readthedocs.io/en/latest/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer it looks like one also needs to add another location:\nlocation /portainer/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer/api/websocket/;\n  }\nCould someone clarify how to add this via the proxy?. Does anyone have a link on how to expose the Docker API (on Ubuntu 16.04)? \n. Would someone please clarify if the nginx reverse proxy was installed directly on the host running docker or INSIDE a docker container itself? If its a container, please share the name of the image used. I was trying my luck with: https://hub.docker.com/r/wonderfall/boring-nginx/ but am currently failing at getting it to work.. Thanks for looking into this. \nDistributor ID: Ubuntu\nDescription:    Ubuntu 16.04.4 LTS\nRelease:        16.04\nCodename:       xenial\nDocker version 17.05.0-ce, build 89658be\nI attached the output of the docker image inspect portainer/portainer command, please be aware this is after I restored my snapshot so this is my current working environment.\nNew Text Document.txt\n. Thanks for looking into this. \nDistributor ID: Ubuntu\nDescription:    Ubuntu 16.04.4 LTS\nRelease:        16.04\nCodename:       xenial\nDocker version 17.05.0-ce, build 89658be\nI attached the output of the docker image inspect portainer/portainer command, please be aware this is after I restored my snapshot so this is my current working environment.\nNew Text Document.txt\n. No, its a pretty vanilla Ubuntu installation. \nThe only exception (but not valid for portainer) is that for some containers with \"important\" data I have mounted NFS shares onto this host and created those containers to save their data on the shares like: -v /mnt/containername/data:/data while /mnt/containername is the mounted share. \nBUT this is not the case for portainer.. No, its a pretty vanilla Ubuntu installation. \nThe only exception (but not valid for portainer) is that for some containers with \"important\" data I have mounted NFS shares onto this host and created those containers to save their data on the shares like: -v /mnt/containername/data:/data while /mnt/containername is the mounted share. \nBUT this is not the case for portainer.. Sorry, my description might not have been very clear. I do persist my portainer data, see my first post: \ndocker run --name portainer -d -p 9090:9000 --restart=unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v /mnt/portainer/data:/data portainer/portainer\nmy portainer data is inside /mnt/portainer/data BUT this data is saved on the docker host and not on an external share.\nDid I clarify my statement from earlier now?. Sorry, my description might not have been very clear. I do persist my portainer data, see my first post: \ndocker run --name portainer -d -p 9090:9000 --restart=unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v /mnt/portainer/data:/data portainer/portainer\nmy portainer data is inside /mnt/portainer/data BUT this data is saved on the docker host and not on an external share.\nDid I clarify my statement from earlier now?. I couldn't figure out where to find my portainer version so I showed you in my first post what image I was using. meanwhile I have discovered it in my bottom left corner :-) \n\nPortainer v1.12.1. I couldn't figure out where to find my portainer version so I showed you in my first post what image I was using. meanwhile I have discovered it in my bottom left corner :-) \nPortainer v1.12.1. Hm, that means i would lose all portainer config data right? What exactly does this imply? \nAlternatively, I guess I could upgrade step-by-step through multiple version but I'm unsure whether that is worth the effort.\n. Hm, that means i would lose all portainer config data right? What exactly does this imply? \nAlternatively, I guess I could upgrade step-by-step through multiple version but I'm unsure whether that is worth the effort.\n. alright, thanks for the support. \nI'll close this ticket for now as it might take a few weeks till I get around to do this due to higher workloads in other areas but once its done, I'll give you a shout here is anything else went wrong :-). alright, thanks for the support. \nI'll close this ticket for now as it might take a few weeks till I get around to do this due to higher workloads in other areas but once its done, I'll give you a shout here is anything else went wrong :-). \n",
    "taiidani": "This would be a lovely feature -- I'm using this awesome tool for managing a Swarm Mode cluster but I have to dive back to the CLI so I can use --with-registry-auth to pull my organization's private images.. Has any progress been made on this front? I just set up LDAP on my Portainer instance and would like to invite people, but my team uses docker stack deploy and have a couple stacks with secrets in their environment variables.\nThere are a number of solutions to this use case but I haven't found any that work with Portainer.\n Make all stacks restricted by default. Allow opening ownership on select stacks.\n Make all stacks disabled. This will let my team's engineers at least be able to manage secrets.\n Make the \"Hidden Containers\" feature that hides by label also apply to stacks.\n Allow for hiding access to select pieces of the UI so that I can prevent env vars from being seen.. @deviantony Best laid plans take time to hatch :) I'm making good progress with this fancy shell snippet to load the secrets into environment variables in the entrypoint script. It ensures that the Swarm service definition only sees the secrets and not the env vars while still letting the applications which don't support file-mounted configuration values access them as env vars.\n```sh\nExport secrets for application to consume, if no env var has been set\nif [[ -d \"/run/secrets\" ]]; then\n    for secret in /run/secrets/*; do\n        if [[ -e \"$secret\" ]]; then\n            eval \"export $(basename $secret)=\\${$(basename $secret):=\\$(cat ${secret})}\"\n        fi\n    done\nfi\n```\nBut I'm hoping that the rollout of this to each service's images (and modifying our third-party images) does not block the rollout of Portainer.. Good call on the services view! Yes I was specifically talking about the details view.\nThanks for the tip -- I can happily use the services view as a workaround in the meantime.. Throwing my support in for searchable audit logs as well, preferably in a way that can be scooped up by a log aggregator. Portainer provides far too much access to our production systems for us to use it as a deployment tool without having auditing capabilities; we're having to limit use of it to our org admins at the moment because of this.. FWIW I've been seeing this behavior as well, on three (dev/stage/prod) of my Swarms and since the beginning of my company's use of agent.\n\n5/7 managers + 5-20 workers on the three Swarms.\n\nI can fairly easily confirm the behavior by refreshing my endpoint's Dashboard page. Below is my Development environment:\n\n```yml\nversion: '3.3'\nservices:\n  app:\n    image: portainer/portainer:latest\n    command: -H tcp://tasks.agent:9001\n    ports: [ \"11337:9000\" ]\n    networks:\n      - default\n      - front\n    volumes:\n      - portainer_nfs:/data\n    deploy:\n      replicas: 1\n      placement:\n        constraints:\n          - node.role == manager\nagent:\n    image: portainer/agent\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - default\n    deploy:\n      mode: global\nvolumes:\n  portainer_nfs:\n    driver: local\n    driver_opts:\n      type: nfs\n      o: addr=fs-06e06aaf.efs.us-west-2.amazonaws.com,nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2\n      device: \":/\"\nnetworks:\n  front:\n    external: true\n```. ",
    "vincentfree": "I have the same problem as @taiidani . Thank you for the info. I will close the issue. ",
    "pierredavidbelanger": "It would be a really interesting feature!\nWith my understanding for the /services/create endpoint, there is no simple \"WithRegistryAuth\": true in the json that mimic the docker service create's --with-registry-auth option (that would have been too easy :)).\nOne will need to send an X-Registry-Auth header, that will contains a base64-encoded object:\n- a credential based login: { \"username\": \"jdoe\", \"password\": \"secret\", \"email\": \"jdoe@acme.com\" }\n- or a token based login: { \"identitytoken\": \"9cbaf023786cd7...\" }\nI would have loved to help here (and I am ok with AngularJS and all), but I do not even know how/where to start to get the required credential or token to send ;)\nFWIW I like how rancher manage registries in heir UI.. ",
    "Xat59": "Hi guys, \nI have the same behavior when trying to pushing image to an authenticated registry.\nIt says : \n\"Unable to push image\nno basic auth credentials\"\nThis kind of feature would be really appreciated :)\nThank a lot guys. Hi guys, \nI have the same behavior when trying to pushing image to an authenticated registry.\nIt says : \n\"Unable to push image\nno basic auth credentials\"\nThis kind of feature would be really appreciated :)\nThank a lot guys. ",
    "killcity": "+1. ",
    "astef": "Is there a workaround for this? I tried to manually docker login in portainer container but failed with docker exec -it my-portainer /bin/bash. I've tried to docker login on the host, it didn't help, portainer still has no access to private repo. I think it is expected, isn't it?. @deviantony I've run portainer in docker with mounted  /var/run/docker.sock and /data (with existing database, with local endpoint set up). Then I've successfully executed (via ssh) docker login on the host machine (where portainer container was run). When I tried to create a container from my private registry image, portainer throwed the same error he did before (about permissions on the registry).\n\n@pierredavidbelanger @astef @Xat59 what do you think?\n\nSounds great!. @deviantony I've run portainer in docker with mounted  /var/run/docker.sock and /data (with existing database, with local endpoint set up). Then I've successfully executed (via ssh) docker login on the host machine (where portainer container was run). When I tried to create a container from my private registry image, portainer throwed the same error he did before (about permissions on the registry).\n\n@pierredavidbelanger @astef @Xat59 what do you think?\n\nSounds great!. Need this feature to use ctop  container from portainer.. Need this feature to use ctop  container from portainer.. ",
    "blagerweij": "Would it be possible to simply support parsing ~/.docker/config.json upon startup? If a custom registry is specified, Portainer's docker client would lookup the registry in the json file. When present, simply include the identity token from the JSON file in the HTTP header.\nThis way, we could simply map a volume pointing to a valid '.docker' folder, and use the identity tokens inside the file. The advantage would be:\n1) re-using already authenticated registries\n2) no need for a complex UX, simply parse the config.json file and inject the token\nJust my $0.02\n(I had already tried to add -v \"/root/.docker:/.docker\" when starting portainer, but that was ignored.)\n. @deviantony I get your point, however at the moment the functionality to authenticate is missing completely. Picking the token from a JSON file seems like a quick win. Also, adding/updating a private repository will most likely not happen very often, and the credentials are probably shared with other hosts anyway.\nThe most ideal situation is full support in the UX, but until we're there we'll have to settle for a minimal viable product ;-). ",
    "thomasvargiu": "@deviantony Ok, I found the problem.\nThe problem is the presence of = character in the value.\nIf I set the an environment variable test_varwith the value foo=bar, the value is truncated and will be saved as foo.. ",
    "dnorth98": "Ah I missed that.  I checked to see if the version Docker we have is supported but missed the swarm version.  Thanks for this and sorry for my missing the version.  We'll update Swarm...Portainer looks VERY helpful in our environment.. ",
    "raarts": "Hi. I think the use-case for this would also very often be a per-stack limitation. So either a command line flag to limit to one particular stack (which might involve some parsing on the API values), or a limitations not only for nodes, but also for networks/services would be appropriate. Something like this for example\n-l \"node.labels.env != staging\"\n\nor\n-l \"service.labels.env != production\"\n\nAlso, why is the flag named -l, it seems to filter, not limit.. Right, we deploy using docker stack deploy from a (GitLab) CI/CD pipeline. This happens many times per day, so containers can come and go. We can tag them, but better would be to define users, and add docker services or - even better - stacks to them. In that case they would be able to see only containers belonging to services/stacks they have authorization for.. ",
    "SemionPar": "Hi guys,\n+1 to that!\nPortainer currently lets you add/revoke team access to a particular docker host/cluster. This doesn't play well in the scenario  where multiple teams use single docker host as their dev env, each running multiple containers. \nAdding another layer on top of host/cluster abstraction would come handy here. \nIt would be great if you could configure portainer so that team A members would only have access to docker objects that have a particular label.. @deviantony thank you for your response. If I wanted to use integrated access control features I would need to create containers via Portainer interface, am I right? \nThe thing is, I would rather deploy containers using CI/CD server and existing infrastructure, independently from Portainer. . @deviantony switching the ownership of containers only works until these containers are not destroyed, obviously. \nFor an environment, where containers are created/destroyed often (think of a dev environment where services are redeployed multiple times on daily basis, recreating containers at each run) this is not the way to go, sadly (unless you use Portainer API to create and launch containers, as you mentioned before). \n. ",
    "264nm": "+1 ^ 1000 on this one. \nFor a a bunch of us it's not practical to create the containers via UI due to scale or various other factors, and instead are largely looking to provide an easy means for other people to manage existing containers but not necessarily wanting to allow control to all the containers running on a host. I would love to see this feature happen.. ",
    "ghost": "Hello,\nyou could simply add --volume <your-absolute-path>/css:/css/ to your docker run command to provide your own vendor.css and portainer.css.\nSee script \"run-portainer.sh\" here\n. Hello,\nyou could simply add --volume <your-absolute-path>/css:/css/ to your docker run command to provide your own vendor.css and portainer.css.\nSee script \"run-portainer.sh\" here\n. +1. +1. How about that? @deviantony . How about that? @deviantony . > 2017/03/16 09:26:03 http error: Invalid request data format (code=400)\nerror log ^^ @deviantony thanks. > 2017/03/16 09:26:03 http error: Invalid request data format (code=400)\nerror log ^^ @deviantony thanks. For instance... I, admin, will connect 2 endpoints, then create 2 users. Each user respectively for each endpoint.\nUSERS.....\n\nENDPOINTS....\n\n*** Now I'll login user1. And what I want is admin has the capability to disable user1 on changing its password.\n\nI'll create a new feature req regarding users control on these, after this \n\n@deviantony \nCheers,\nCrishel Yumul\n. For instance... I, admin, will connect 2 endpoints, then create 2 users. Each user respectively for each endpoint.\nUSERS.....\n\nENDPOINTS....\n\n*** Now I'll login user1. And what I want is admin has the capability to disable user1 on changing its password.\n\nI'll create a new feature req regarding users control on these, after this \n\n@deviantony \nCheers,\nCrishel Yumul\n. I'll create a new pull request from new fork . I'll create a new pull request from new fork . That would be me.\nLinux #localhost.localdomain 3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12 15:04:24 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\ncentos-release-7-3.1611.el7.centos.x86_64\nLog part\nMay 16 10:16:46 #localhost.localdomain firewalld[504]: WARNING: COMMAND_FAILED: '/usr/sbin/iptables -w2 -t nat -C DOCKER -p tcp -d 0/0 --dport 9000 -j DNAT --to-destination 172.17.0.2:9000 ! -i docker0' failed:\nMay 16 10:16:46 #localhost.localdomain firewalld[504]: WARNING: COMMAND_FAILED: '/usr/sbin/iptables -w2 -t filter -C DOCKER ! -i docker0 -o docker0 -p tcp -d 172.17.0.2 --dport 9000 -j ACCEPT' failed:\nMay 16 10:16:46 #localhost.localdomain firewalld[504]: WARNING: COMMAND_FAILED: '/usr/sbin/iptables -w2 -t nat -C POSTROUTING -p tcp -s 172.17.0.2 -d 172.17.0.2 --dport 9000 -j MASQUERADE' failed:\nMay 16 10:16:46 #localhost.localdomain kernel: SELinux: mount invalid.  Same superblock, different security settings for (dev mqueue, type mqueue)\ndocker service\n```\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.thijs.com\nAfter=network.target firewalld.service\n[Service]\nType=notify\nthe default is not to use systemd for cgroups because the delegate issues still\nexists and systemd currently does not support the cgroup feature set required\nfor containers run by docker\nExecStart=/usr/bin/dockerd --selinux-enabled --tls --tlscert=/etc/letsencrypt/live/docker.thijs.nl/cert.pem --tlskey=/etc/letsencrypt/live/docker.thijs.nl/privkey.pem -H docker.thijs.nl:2379\nExecStart=/usr/bin/dockerd --selinux-enabled --tls --tlscert=/etc/letsencrypt/live/docker.thijs.nl/cert.pem --tlskey=/etc/letsencrypt/live/docker.thijs.nl/privkey.pem -H docker.thijs.nl:2379 -H unix:///var/run/docker.sock\nExecReload=/bin/kill -s HUP $MAINPID\nHaving non-zero Limit*s causes performance problems due to accounting overhead\nin the kernel. We recommend using cgroups to do container-local accounting.\nLimitNOFILE=infinity\nLimitNPROC=infinity\nLimitCORE=infinity\nUncomment TasksMax if your systemd version supports it.\nOnly systemd 226 and above support this version.\nTasksMax=infinity\nTimeoutStartSec=0\nset delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\nkill only the docker process, not all processes in the cgroup\nKillMode=process\n[Install]\nWantedBy=multi-user.target\n```. That would be me.\nLinux #localhost.localdomain 3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12 15:04:24 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\ncentos-release-7-3.1611.el7.centos.x86_64\nLog part\nMay 16 10:16:46 #localhost.localdomain firewalld[504]: WARNING: COMMAND_FAILED: '/usr/sbin/iptables -w2 -t nat -C DOCKER -p tcp -d 0/0 --dport 9000 -j DNAT --to-destination 172.17.0.2:9000 ! -i docker0' failed:\nMay 16 10:16:46 #localhost.localdomain firewalld[504]: WARNING: COMMAND_FAILED: '/usr/sbin/iptables -w2 -t filter -C DOCKER ! -i docker0 -o docker0 -p tcp -d 172.17.0.2 --dport 9000 -j ACCEPT' failed:\nMay 16 10:16:46 #localhost.localdomain firewalld[504]: WARNING: COMMAND_FAILED: '/usr/sbin/iptables -w2 -t nat -C POSTROUTING -p tcp -s 172.17.0.2 -d 172.17.0.2 --dport 9000 -j MASQUERADE' failed:\nMay 16 10:16:46 #localhost.localdomain kernel: SELinux: mount invalid.  Same superblock, different security settings for (dev mqueue, type mqueue)\ndocker service\n```\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.thijs.com\nAfter=network.target firewalld.service\n[Service]\nType=notify\nthe default is not to use systemd for cgroups because the delegate issues still\nexists and systemd currently does not support the cgroup feature set required\nfor containers run by docker\nExecStart=/usr/bin/dockerd --selinux-enabled --tls --tlscert=/etc/letsencrypt/live/docker.thijs.nl/cert.pem --tlskey=/etc/letsencrypt/live/docker.thijs.nl/privkey.pem -H docker.thijs.nl:2379\nExecStart=/usr/bin/dockerd --selinux-enabled --tls --tlscert=/etc/letsencrypt/live/docker.thijs.nl/cert.pem --tlskey=/etc/letsencrypt/live/docker.thijs.nl/privkey.pem -H docker.thijs.nl:2379 -H unix:///var/run/docker.sock\nExecReload=/bin/kill -s HUP $MAINPID\nHaving non-zero Limit*s causes performance problems due to accounting overhead\nin the kernel. We recommend using cgroups to do container-local accounting.\nLimitNOFILE=infinity\nLimitNPROC=infinity\nLimitCORE=infinity\nUncomment TasksMax if your systemd version supports it.\nOnly systemd 226 and above support this version.\nTasksMax=infinity\nTimeoutStartSec=0\nset delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\nkill only the docker process, not all processes in the cgroup\nKillMode=process\n[Install]\nWantedBy=multi-user.target\n.\n100% done\nfound 27 alerts in /var/log/audit/audit.log\n\nSELinux is preventing /usr/sbin/sshd from name_bind access on the tcp_socket port 1707.\n*  Plugin bind_ports (92.2 confidence) suggests   ****\nIf you want to allow /usr/sbin/sshd to bind to network port 1707\nThen you need to modify the port type.\nDo\nsemanage port -a -t PORT_TYPE -p tcp 1707\nwhere PORT_TYPE is one of the following: ssh_port_t, vnc_port_t, xserver_port_t.\n\n*  Plugin catchall_boolean (7.83 confidence) suggests   ****\nIf you want to allow nis to enabled\nThen you must tell SELinux about this by enabling the 'nis_enabled' boolean.\nDo\nsetsebool -P nis_enabled 1\n*  Plugin catchall (1.41 confidence) suggests   ******\nIf you believe that sshd should be allowed name_bind access on the port 1707 tcp_socket by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'sshd' --raw | audit2allow -M my-sshd\nsemodule -i my-sshd.pp\nAdditional Information:\nSource Context                system_u:system_r:sshd_t:s0-s0:c0.c1023\nTarget Context                system_u:object_r:unreserved_port_t:s0\nTarget Objects                port 1707 [ tcp_socket ]\nSource                        sshd\nSource Path                   /usr/sbin/sshd\nPort                          1707\nHost                          \nSource RPM Packages           openssh-server-6.6.1p1-35.el7_3.x86_64\nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   3\nFirst Seen                    2017-05-15 16:54:06 CEST\nLast Seen                     2017-05-15 16:55:34 CEST\nLocal ID                      0d159796-4363-490a-bbc9-f2179cbf71f6\nRaw Audit Messages\ntype=AVC msg=audit(1494860134.812:1663): avc:  denied  { name_bind } for  pid=31162 comm=\"sshd\" src=1707 scontext=system_u:system_r:sshd_t:s0-s0:c0.c1023 tcontext=system_u:object_r:unreserved_port_t:s0 tclass=tcp_socket\ntype=SYSCALL msg=audit(1494860134.812:1663): arch=x86_64 syscall=bind success=no exit=EACCES a0=3 a1=7fdb6731e510 a2=10 a3=7fffa8465c80 items=0 ppid=1 pid=31162 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=sshd exe=/usr/sbin/sshd subj=system_u:system_r:sshd_t:s0-s0:c0.c1023 key=(null)\nHash: sshd,sshd_t,unreserved_port_t,tcp_socket,name_bind\n\nSELinux is preventing /portainer from write access on the file /opt/portainerdata/portainer.db.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer.db file\nThen you need to change the label on /opt/portainerdata/portainer.db\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/portainerdata/portainer.db'\nwhere FILE_TYPE is one of the following: afs_cache_t, cgroup_t, hugetlbfs_t, nfs_t, puppet_tmp_t, svirt_home_t, svirt_sandbox_file_t, tmpfs_t.\nThen execute:\nrestorecon -v '/opt/portainerdata/portainer.db'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer.db file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c474,c986\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                /opt/portainerdata/portainer.db [ file ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:22:11 CEST\nLast Seen                     2017-05-16 09:22:11 CEST\nLocal ID                      8d838d68-520c-49ea-ab71-3709242d7c44\nRaw Audit Messages\ntype=AVC msg=audit(1494919331.468:338): avc:  denied  { write } for  pid=2464 comm=\"portainer\" name=\"portainer.db\" dev=\"vda2\" ino=8128831 scontext=system_u:system_r:svirt_lxc_net_t:s0:c474,c986 tcontext=system_u:object_r:usr_t:s0 tclass=file\ntype=SYSCALL msg=audit(1494919331.468:338): arch=x86_64 syscall=openat success=no exit=EACCES a0=ffffffffffffff9c a1=c4202170a0 a2=80042 a3=180 items=0 ppid=2446 pid=2464 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c474,c986 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,file,write\n\nSELinux is preventing /portainer from write access on the file /opt/portainerdata/portainer.db.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer.db file\nThen you need to change the label on /opt/portainerdata/portainer.db\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/portainerdata/portainer.db'\nwhere FILE_TYPE is one of the following: afs_cache_t, cgroup_t, hugetlbfs_t, nfs_t, puppet_tmp_t, svirt_home_t, svirt_sandbox_file_t, tmpfs_t.\nThen execute:\nrestorecon -v '/opt/portainerdata/portainer.db'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer.db file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c772,c989\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                /opt/portainerdata/portainer.db [ file ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:23:02 CEST\nLast Seen                     2017-05-16 09:23:02 CEST\nLocal ID                      6c867060-c879-44e7-8af7-db693ceb5e47\nRaw Audit Messages\ntype=AVC msg=audit(1494919382.713:384): avc:  denied  { write } for  pid=2586 comm=\"portainer\" name=\"portainer.db\" dev=\"vda2\" ino=8128831 scontext=system_u:system_r:svirt_lxc_net_t:s0:c772,c989 tcontext=system_u:object_r:usr_t:s0 tclass=file\ntype=SYSCALL msg=audit(1494919382.713:384): arch=x86_64 syscall=openat success=no exit=EACCES a0=ffffffffffffff9c a1=c4202170c0 a2=80042 a3=180 items=0 ppid=2569 pid=2586 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c772,c989 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,file,write\n\nSELinux is preventing /portainer from write access on the file /opt/portainerdata/portainer.db.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer.db file\nThen you need to change the label on /opt/portainerdata/portainer.db\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/portainerdata/portainer.db'\nwhere FILE_TYPE is one of the following: afs_cache_t, cgroup_t, hugetlbfs_t, nfs_t, puppet_tmp_t, svirt_home_t, svirt_sandbox_file_t, tmpfs_t.\nThen execute:\nrestorecon -v '/opt/portainerdata/portainer.db'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer.db file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c158,c735\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                /opt/portainerdata/portainer.db [ file ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:25:14 CEST\nLast Seen                     2017-05-16 09:25:14 CEST\nLocal ID                      5850ab80-cd4b-426a-8fb9-449d51bf47d6\nRaw Audit Messages\ntype=AVC msg=audit(1494919514.215:427): avc:  denied  { write } for  pid=2689 comm=\"portainer\" name=\"portainer.db\" dev=\"vda2\" ino=8128831 scontext=system_u:system_r:svirt_lxc_net_t:s0:c158,c735 tcontext=system_u:object_r:usr_t:s0 tclass=file\ntype=SYSCALL msg=audit(1494919514.215:427): arch=x86_64 syscall=openat success=no exit=EACCES a0=ffffffffffffff9c a1=c4202170a0 a2=80042 a3=180 items=0 ppid=2673 pid=2689 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c158,c735 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,file,write\n\nSELinux is preventing /portainer from write access on the file /opt/portainerdata/portainer.db.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer.db file\nThen you need to change the label on /opt/portainerdata/portainer.db\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/portainerdata/portainer.db'\nwhere FILE_TYPE is one of the following: afs_cache_t, cgroup_t, hugetlbfs_t, nfs_t, puppet_tmp_t, svirt_home_t, svirt_sandbox_file_t, tmpfs_t.\nThen execute:\nrestorecon -v '/opt/portainerdata/portainer.db'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer.db file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c491,c755\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                /opt/portainerdata/portainer.db [ file ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:28:12 CEST\nLast Seen                     2017-05-16 09:28:12 CEST\nLocal ID                      ec7143c1-2a41-470d-98e0-780966f526bc\nRaw Audit Messages\ntype=AVC msg=audit(1494919692.204:492): avc:  denied  { write } for  pid=3122 comm=\"portainer\" name=\"portainer.db\" dev=\"vda2\" ino=8128831 scontext=system_u:system_r:svirt_lxc_net_t:s0:c491,c755 tcontext=system_u:object_r:usr_t:s0 tclass=file\ntype=SYSCALL msg=audit(1494919692.204:492): arch=x86_64 syscall=openat success=no exit=EACCES a0=ffffffffffffff9c a1=c4202170a0 a2=80042 a3=180 items=0 ppid=3105 pid=3122 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c491,c755 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,file,write\n\nSELinux is preventing /portainer from write access on the directory portainer.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer directory\nThen you need to change the label on portainer\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainer'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainer'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c435,c631\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                portainer [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:29:40 CEST\nLast Seen                     2017-05-16 09:29:40 CEST\nLocal ID                      dc573875-3460-488c-8a64-db96c0314bd5\nRaw Audit Messages\ntype=AVC msg=audit(1494919780.349:535): avc:  denied  { write } for  pid=3400 comm=\"portainer\" name=\"portainer\" dev=\"vda2\" ino=8128910 scontext=system_u:system_r:svirt_lxc_net_t:s0:c435,c631 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494919780.349:535): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c420240ee0 a2=1c0 a3=0 items=0 ppid=3383 pid=3400 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c435,c631 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory portainer.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer directory\nThen you need to change the label on portainer\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainer'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainer'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c380,c663\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                portainer [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:30:33 CEST\nLast Seen                     2017-05-16 09:30:33 CEST\nLocal ID                      c38c4ced-52f1-44a0-ad34-4592f328f3a5\nRaw Audit Messages\ntype=AVC msg=audit(1494919833.536:577): avc:  denied  { write } for  pid=3507 comm=\"portainer\" name=\"portainer\" dev=\"vda2\" ino=8128910 scontext=system_u:system_r:svirt_lxc_net_t:s0:c380,c663 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494919833.536:577): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c42022d0a0 a2=1c0 a3=0 items=0 ppid=3489 pid=3507 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c380,c663 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory docker.sock.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the docker.sock directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c95,c945\nTarget Context                system_u:object_r:docker_var_run_t:s0\nTarget Objects                docker.sock [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   46\nFirst Seen                    2017-05-16 09:37:10 CEST\nLast Seen                     2017-05-16 09:37:42 CEST\nLocal ID                      e30c15cf-3721-4626-96bd-f6cdaecf45fc\nRaw Audit Messages\ntype=AVC msg=audit(1494920262.267:696): avc:  denied  { write } for  pid=4356 comm=\"portainer\" name=\"docker.sock\" dev=\"tmpfs\" ino=25841 scontext=system_u:system_r:svirt_lxc_net_t:s0:c95,c945 tcontext=system_u:object_r:docker_var_run_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494920262.267:696): arch=x86_64 syscall=connect success=no exit=EACCES a0=11 a1=c420429510 a2=17 a3=0 items=0 ppid=4322 pid=4356 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c95,c945 key=(null)\nHash: portainer,svirt_lxc_net_t,docker_var_run_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory portainerdata.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainerdata directory\nThen you need to change the label on portainerdata\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainerdata'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainerdata'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainerdata directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c193,c765\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                portainerdata [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 10:15:10 CEST\nLast Seen                     2017-05-16 10:15:10 CEST\nLocal ID                      68a45fcb-333f-46c4-b238-db6e9f8f4caa\nRaw Audit Messages\ntype=AVC msg=audit(1494922510.695:839): avc:  denied  { write } for  pid=8876 comm=\"portainer\" name=\"portainerdata\" dev=\"vda2\" ino=8128932 scontext=system_u:system_r:svirt_lxc_net_t:s0:c193,c765 tcontext=system_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494922510.695:839): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c42022d090 a2=1c0 a3=0 items=0 ppid=8860 pid=8876 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c193,c765 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory portainerdata.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainerdata directory\nThen you need to change the label on portainerdata\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainerdata'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainerdata'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainerdata directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c821,c946\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                portainerdata [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 10:16:13 CEST\nLast Seen                     2017-05-16 10:16:13 CEST\nLocal ID                      b21ab743-04d0-461e-a77f-66fd02e88823\nRaw Audit Messages\ntype=AVC msg=audit(1494922573.384:871): avc:  denied  { write } for  pid=8976 comm=\"portainer\" name=\"portainerdata\" dev=\"vda2\" ino=8128932 scontext=system_u:system_r:svirt_lxc_net_t:s0:c821,c946 tcontext=system_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494922573.384:871): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c42022d080 a2=1c0 a3=0 items=0 ppid=8960 pid=8976 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c821,c946 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory portainerdata.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainerdata directory\nThen you need to change the label on portainerdata\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainerdata'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainerdata'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainerdata directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c398,c536\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                portainerdata [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 10:16:46 CEST\nLast Seen                     2017-05-16 10:16:46 CEST\nLocal ID                      940eefbc-5d84-49d4-a6b5-c809cde97324\nRaw Audit Messages\ntype=AVC msg=audit(1494922606.289:896): avc:  denied  { write } for  pid=9068 comm=\"portainer\" name=\"portainerdata\" dev=\"vda2\" ino=8128932 scontext=system_u:system_r:svirt_lxc_net_t:s0:c398,c536 tcontext=system_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494922606.289:896): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c42022d0a0 a2=1c0 a3=0 items=0 ppid=9050 pid=9068 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c398,c536 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from connectto access on the unix_stream_socket /run/docker.sock.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that portainer should be allowed connectto access on the docker.sock unix_stream_socket by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c773,c954\nTarget Context                system_u:system_r:docker_t:s0\nTarget Objects                /run/docker.sock [ unix_stream_socket ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   6\nFirst Seen                    2017-05-16 11:16:34 CEST\nLast Seen                     2017-05-16 11:18:28 CEST\nLocal ID                      57e0a47e-114e-45c1-bffe-a749adbe3076\nRaw Audit Messages\ntype=AVC msg=audit(1494926308.586:1867): avc:  denied  { connectto } for  pid=22924 comm=\"portainer\" path=\"/run/docker.sock\" scontext=system_u:system_r:svirt_lxc_net_t:s0:c773,c954 tcontext=system_u:system_r:docker_t:s0 tclass=unix_stream_socket\ntype=SYSCALL msg=audit(1494926308.586:1867): arch=x86_64 syscall=connect success=no exit=EACCES a0=11 a1=c42037b190 a2=17 a3=0 items=0 ppid=22889 pid=22924 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c773,c954 key=(null)\nHash: portainer,svirt_lxc_net_t,docker_t,unix_stream_socket,connectto\n\nSELinux is preventing /usr/bin/arangosh from write access on the sock_file arangodb-tmp.sock.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that arangosh should be allowed write access on the arangodb-tmp.sock sock_file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'arangosh' --raw | audit2allow -M my-arangosh\nsemodule -i my-arangosh.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c292,c664\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                arangodb-tmp.sock [ sock_file ]\nSource                        arangosh\nSource Path                   /usr/bin/arangosh\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   241\nFirst Seen                    2017-05-16 11:50:45 CEST\nLast Seen                     2017-05-16 11:52:50 CEST\nLocal ID                      641df838-5244-4eb3-a7b3-94312d51723b\nRaw Audit Messages\ntype=AVC msg=audit(1494928370.547:2244): avc:  denied  { write } for  pid=914 comm=\"arangosh\" name=\"arangodb-tmp.sock\" dev=\"vda2\" ino=1972244 scontext=system_u:system_r:svirt_lxc_net_t:s0:c292,c664 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=sock_file\ntype=SYSCALL msg=audit(1494928370.547:2244): arch=x86_64 syscall=connect per=400000 success=no exit=EACCES a0=3 a1=7ffd25868f60 a2=18 a3=7ffd25868f20 items=0 ppid=31773 pid=914 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=arangosh exe=/usr/bin/arangosh subj=system_u:system_r:svirt_lxc_net_t:s0:c292,c664 key=(null)\nHash: arangosh,svirt_lxc_net_t,docker_var_lib_t,sock_file,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c53,c916\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   2\nFirst Seen                    2017-05-18 13:49:06 CEST\nLast Seen                     2017-05-18 13:50:58 CEST\nLocal ID                      75f89017-1f95-446f-b187-d865ec13bb10\nRaw Audit Messages\ntype=AVC msg=audit(1495108258.900:1761): avc:  denied  { write } for  pid=10807 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=115703 scontext=system_u:system_r:svirt_lxc_net_t:s0:c53,c916 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495108258.900:1761): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=10805 pid=10807 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c53,c916 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c774,c978\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   3\nFirst Seen                    2017-05-18 14:16:10 CEST\nLast Seen                     2017-05-18 14:17:36 CEST\nLocal ID                      41d6a621-169e-4657-a697-2e638327621c\nRaw Audit Messages\ntype=AVC msg=audit(1495109856.413:1884): avc:  denied  { write } for  pid=11640 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=125338 scontext=system_u:system_r:svirt_lxc_net_t:s0:c774,c978 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495109856.413:1884): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=11638 pid=11640 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c774,c978 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from create access on the directory conf.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that node should be allowed create access on the conf directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c234,c254\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                conf [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   2\nFirst Seen                    2017-05-18 14:16:50 CEST\nLast Seen                     2017-05-18 14:17:43 CEST\nLocal ID                      430fb834-2ddc-4291-ab12-075b9421154f\nRaw Audit Messages\ntype=AVC msg=audit(1495109863.365:1902): avc:  denied  { create } for  pid=11788 comm=\"node\" name=\"conf\" scontext=system_u:system_r:svirt_lxc_net_t:s0:c234,c254 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495109863.365:1902): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffdbdac5390 a1=1ed a2=7ffdbdac5390 a3=7ffdbdac4dc0 items=0 ppid=11732 pid=11788 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c234,c254 key=(null)\nHash: node,svirt_lxc_net_t,docker_var_lib_t,dir,create\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from create access on the directory conf.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that node should be allowed create access on the conf directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c345,c557\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                conf [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   2\nFirst Seen                    2017-05-18 14:19:42 CEST\nLast Seen                     2017-05-18 14:21:20 CEST\nLocal ID                      820a0cff-207a-4ada-a631-769a099f9245\nRaw Audit Messages\ntype=AVC msg=audit(1495110080.613:2001): avc:  denied  { create } for  pid=12424 comm=\"node\" name=\"conf\" scontext=system_u:system_r:svirt_lxc_net_t:s0:c345,c557 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495110080.613:2001): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffe2b255830 a1=1ed a2=7ffe2b255830 a3=7ffe2b255260 items=0 ppid=12362 pid=12424 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c345,c557 key=(null)\nHash: node,svirt_lxc_net_t,docker_var_lib_t,dir,create\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c471,c616\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   2\nFirst Seen                    2017-05-18 14:19:42 CEST\nLast Seen                     2017-05-18 14:21:20 CEST\nLocal ID                      3682e838-c9d3-4106-9351-5e4fd1358324\nRaw Audit Messages\ntype=AVC msg=audit(1495110080.734:2009): avc:  denied  { write } for  pid=12455 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=134109 scontext=system_u:system_r:svirt_lxc_net_t:s0:c471,c616 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495110080.734:2009): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=12454 pid=12455 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c471,c616 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from create access on the directory conf.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that node should be allowed create access on the conf directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c369,c968\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                conf [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:21:46 CEST\nLast Seen                     2017-05-18 14:21:46 CEST\nLocal ID                      5618d0aa-a7f2-4612-b911-368749d87b69\nRaw Audit Messages\ntype=AVC msg=audit(1495110106.187:2061): avc:  denied  { create } for  pid=12809 comm=\"node\" name=\"conf\" scontext=system_u:system_r:svirt_lxc_net_t:s0:c369,c968 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495110106.187:2061): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffc69323430 a1=1ed a2=7ffc69323430 a3=13eac918c5bc items=0 ppid=12738 pid=12809 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c369,c968 key=(null)\nHash: node,svirt_lxc_net_t,docker_var_lib_t,dir,create\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c752,c867\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:21:46 CEST\nLast Seen                     2017-05-18 14:21:46 CEST\nLocal ID                      f72d20d0-7be9-4fe6-99e3-caa2e76c8f5f\nRaw Audit Messages\ntype=AVC msg=audit(1495110106.576:2073): avc:  denied  { write } for  pid=12858 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=137725 scontext=system_u:system_r:svirt_lxc_net_t:s0:c752,c867 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495110106.576:2073): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=12856 pid=12858 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c752,c867 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from write access on the directory /opt/apache-persistence.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow node to have write access on the apache-persistence directory\nThen you need to change the label on /opt/apache-persistence\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/apache-persistence'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v '/opt/apache-persistence'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that node should be allowed write access on the apache-persistence directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c979,c989\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                /opt/apache-persistence [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:34:35 CEST\nLast Seen                     2017-05-18 14:34:35 CEST\nLocal ID                      dd1bdd3c-6a5b-41b5-85b7-c3705e5f2565\nRaw Audit Messages\ntype=AVC msg=audit(1495110875.229:2142): avc:  denied  { write } for  pid=13247 comm=\"node\" name=\"apache-persistence\" dev=\"vda2\" ino=8128913 scontext=system_u:system_r:svirt_lxc_net_t:s0:c979,c989 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495110875.229:2142): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffe4620b520 a1=1ed a2=7ffe4620b520 a3=352b1df31c items=0 ppid=13181 pid=13247 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c979,c989 key=(null)\nHash: node,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c431,c701\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:34:35 CEST\nLast Seen                     2017-05-18 14:34:35 CEST\nLocal ID                      137a6c0a-428f-450e-83d1-5baeef346c26\nRaw Audit Messages\ntype=AVC msg=audit(1495110875.454:2154): avc:  denied  { write } for  pid=13296 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=143499 scontext=system_u:system_r:svirt_lxc_net_t:s0:c431,c701 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495110875.454:2154): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=13294 pid=13296 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c431,c701 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from write access on the directory /opt/apache-persistence.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow node to have write access on the apache-persistence directory\nThen you need to change the label on /opt/apache-persistence\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/apache-persistence'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v '/opt/apache-persistence'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that node should be allowed write access on the apache-persistence directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c343,c809\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                /opt/apache-persistence [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:39:28 CEST\nLast Seen                     2017-05-18 14:39:28 CEST\nLocal ID                      14b00602-324b-43e0-bba7-b3d973ae9b63\nRaw Audit Messages\ntype=AVC msg=audit(1495111168.998:2193): avc:  denied  { write } for  pid=13599 comm=\"node\" name=\"apache-persistence\" dev=\"vda2\" ino=8128913 scontext=system_u:system_r:svirt_lxc_net_t:s0:c343,c809 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495111168.998:2193): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffc4f332680 a1=1ed a2=7ffc4f332680 a3=bcab918860c items=0 ppid=13535 pid=13599 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c343,c809 key=(null)\nHash: node,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c564,c699\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:39:29 CEST\nLast Seen                     2017-05-18 14:39:29 CEST\nLocal ID                      41562dd7-55ff-4041-be21-f92740171c2b\nRaw Audit Messages\ntype=AVC msg=audit(1495111169.416:2205): avc:  denied  { write } for  pid=13646 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=146194 scontext=system_u:system_r:svirt_lxc_net_t:s0:c564,c699 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495111169.416:2205): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=13644 pid=13646 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c564,c699 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c548,c572\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:43:13 CEST\nLast Seen                     2017-05-18 14:43:13 CEST\nLocal ID                      ac59cdd2-fe32-496a-a64e-ee9e8df6884c\nRaw Audit Messages\ntype=AVC msg=audit(1495111393.719:2231): avc:  denied  { write } for  pid=13902 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=148556 scontext=system_u:system_r:svirt_lxc_net_t:s0:c548,c572 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495111393.719:2231): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=13901 pid=13902 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c548,c572 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c181,c436\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:51:36 CEST\nLast Seen                     2017-05-18 14:51:36 CEST\nLocal ID                      86d5ea93-e43d-4517-a7ba-7ec9ff2c36f0\nRaw Audit Messages\ntype=AVC msg=audit(1495111896.80:2425): avc:  denied  { write } for  pid=14681 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=154662 scontext=system_u:system_r:svirt_lxc_net_t:s0:c181,c436 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495111896.80:2425): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=14680 pid=14681 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c181,c436 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from write access on the directory /opt/mariadb-persistence.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow node to have write access on the mariadb-persistence directory\nThen you need to change the label on /opt/mariadb-persistence\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/mariadb-persistence'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v '/opt/mariadb-persistence'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that node should be allowed write access on the mariadb-persistence directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c526,c551\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                /opt/mariadb-persistence [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 15:00:11 CEST\nLast Seen                     2017-05-18 15:00:11 CEST\nLocal ID                      e493a516-ae5f-4f99-b470-a1026a7dbbf0\nRaw Audit Messages\ntype=AVC msg=audit(1495112411.804:2626): avc:  denied  { write } for  pid=16038 comm=\"node\" name=\"mariadb-persistence\" dev=\"vda2\" ino=8128915 scontext=system_u:system_r:svirt_lxc_net_t:s0:c526,c551 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495112411.804:2626): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffc8c4f9a70 a1=1ed a2=7ffc8c4f9a70 a3=d4281055ba5 items=0 ppid=15980 pid=16038 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c526,c551 key=(null)\nHash: node,svirt_lxc_net_t,usr_t,dir,write\n.\n100% done\nfound 27 alerts in /var/log/audit/audit.log\n\nSELinux is preventing /usr/sbin/sshd from name_bind access on the tcp_socket port 1707.\n*  Plugin bind_ports (92.2 confidence) suggests   ****\nIf you want to allow /usr/sbin/sshd to bind to network port 1707\nThen you need to modify the port type.\nDo\nsemanage port -a -t PORT_TYPE -p tcp 1707\nwhere PORT_TYPE is one of the following: ssh_port_t, vnc_port_t, xserver_port_t.\n\n*  Plugin catchall_boolean (7.83 confidence) suggests   ****\nIf you want to allow nis to enabled\nThen you must tell SELinux about this by enabling the 'nis_enabled' boolean.\nDo\nsetsebool -P nis_enabled 1\n*  Plugin catchall (1.41 confidence) suggests   ******\nIf you believe that sshd should be allowed name_bind access on the port 1707 tcp_socket by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'sshd' --raw | audit2allow -M my-sshd\nsemodule -i my-sshd.pp\nAdditional Information:\nSource Context                system_u:system_r:sshd_t:s0-s0:c0.c1023\nTarget Context                system_u:object_r:unreserved_port_t:s0\nTarget Objects                port 1707 [ tcp_socket ]\nSource                        sshd\nSource Path                   /usr/sbin/sshd\nPort                          1707\nHost                          \nSource RPM Packages           openssh-server-6.6.1p1-35.el7_3.x86_64\nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   3\nFirst Seen                    2017-05-15 16:54:06 CEST\nLast Seen                     2017-05-15 16:55:34 CEST\nLocal ID                      0d159796-4363-490a-bbc9-f2179cbf71f6\nRaw Audit Messages\ntype=AVC msg=audit(1494860134.812:1663): avc:  denied  { name_bind } for  pid=31162 comm=\"sshd\" src=1707 scontext=system_u:system_r:sshd_t:s0-s0:c0.c1023 tcontext=system_u:object_r:unreserved_port_t:s0 tclass=tcp_socket\ntype=SYSCALL msg=audit(1494860134.812:1663): arch=x86_64 syscall=bind success=no exit=EACCES a0=3 a1=7fdb6731e510 a2=10 a3=7fffa8465c80 items=0 ppid=1 pid=31162 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=sshd exe=/usr/sbin/sshd subj=system_u:system_r:sshd_t:s0-s0:c0.c1023 key=(null)\nHash: sshd,sshd_t,unreserved_port_t,tcp_socket,name_bind\n\nSELinux is preventing /portainer from write access on the file /opt/portainerdata/portainer.db.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer.db file\nThen you need to change the label on /opt/portainerdata/portainer.db\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/portainerdata/portainer.db'\nwhere FILE_TYPE is one of the following: afs_cache_t, cgroup_t, hugetlbfs_t, nfs_t, puppet_tmp_t, svirt_home_t, svirt_sandbox_file_t, tmpfs_t.\nThen execute:\nrestorecon -v '/opt/portainerdata/portainer.db'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer.db file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c474,c986\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                /opt/portainerdata/portainer.db [ file ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:22:11 CEST\nLast Seen                     2017-05-16 09:22:11 CEST\nLocal ID                      8d838d68-520c-49ea-ab71-3709242d7c44\nRaw Audit Messages\ntype=AVC msg=audit(1494919331.468:338): avc:  denied  { write } for  pid=2464 comm=\"portainer\" name=\"portainer.db\" dev=\"vda2\" ino=8128831 scontext=system_u:system_r:svirt_lxc_net_t:s0:c474,c986 tcontext=system_u:object_r:usr_t:s0 tclass=file\ntype=SYSCALL msg=audit(1494919331.468:338): arch=x86_64 syscall=openat success=no exit=EACCES a0=ffffffffffffff9c a1=c4202170a0 a2=80042 a3=180 items=0 ppid=2446 pid=2464 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c474,c986 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,file,write\n\nSELinux is preventing /portainer from write access on the file /opt/portainerdata/portainer.db.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer.db file\nThen you need to change the label on /opt/portainerdata/portainer.db\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/portainerdata/portainer.db'\nwhere FILE_TYPE is one of the following: afs_cache_t, cgroup_t, hugetlbfs_t, nfs_t, puppet_tmp_t, svirt_home_t, svirt_sandbox_file_t, tmpfs_t.\nThen execute:\nrestorecon -v '/opt/portainerdata/portainer.db'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer.db file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c772,c989\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                /opt/portainerdata/portainer.db [ file ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:23:02 CEST\nLast Seen                     2017-05-16 09:23:02 CEST\nLocal ID                      6c867060-c879-44e7-8af7-db693ceb5e47\nRaw Audit Messages\ntype=AVC msg=audit(1494919382.713:384): avc:  denied  { write } for  pid=2586 comm=\"portainer\" name=\"portainer.db\" dev=\"vda2\" ino=8128831 scontext=system_u:system_r:svirt_lxc_net_t:s0:c772,c989 tcontext=system_u:object_r:usr_t:s0 tclass=file\ntype=SYSCALL msg=audit(1494919382.713:384): arch=x86_64 syscall=openat success=no exit=EACCES a0=ffffffffffffff9c a1=c4202170c0 a2=80042 a3=180 items=0 ppid=2569 pid=2586 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c772,c989 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,file,write\n\nSELinux is preventing /portainer from write access on the file /opt/portainerdata/portainer.db.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer.db file\nThen you need to change the label on /opt/portainerdata/portainer.db\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/portainerdata/portainer.db'\nwhere FILE_TYPE is one of the following: afs_cache_t, cgroup_t, hugetlbfs_t, nfs_t, puppet_tmp_t, svirt_home_t, svirt_sandbox_file_t, tmpfs_t.\nThen execute:\nrestorecon -v '/opt/portainerdata/portainer.db'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer.db file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c158,c735\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                /opt/portainerdata/portainer.db [ file ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:25:14 CEST\nLast Seen                     2017-05-16 09:25:14 CEST\nLocal ID                      5850ab80-cd4b-426a-8fb9-449d51bf47d6\nRaw Audit Messages\ntype=AVC msg=audit(1494919514.215:427): avc:  denied  { write } for  pid=2689 comm=\"portainer\" name=\"portainer.db\" dev=\"vda2\" ino=8128831 scontext=system_u:system_r:svirt_lxc_net_t:s0:c158,c735 tcontext=system_u:object_r:usr_t:s0 tclass=file\ntype=SYSCALL msg=audit(1494919514.215:427): arch=x86_64 syscall=openat success=no exit=EACCES a0=ffffffffffffff9c a1=c4202170a0 a2=80042 a3=180 items=0 ppid=2673 pid=2689 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c158,c735 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,file,write\n\nSELinux is preventing /portainer from write access on the file /opt/portainerdata/portainer.db.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer.db file\nThen you need to change the label on /opt/portainerdata/portainer.db\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/portainerdata/portainer.db'\nwhere FILE_TYPE is one of the following: afs_cache_t, cgroup_t, hugetlbfs_t, nfs_t, puppet_tmp_t, svirt_home_t, svirt_sandbox_file_t, tmpfs_t.\nThen execute:\nrestorecon -v '/opt/portainerdata/portainer.db'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer.db file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c491,c755\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                /opt/portainerdata/portainer.db [ file ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:28:12 CEST\nLast Seen                     2017-05-16 09:28:12 CEST\nLocal ID                      ec7143c1-2a41-470d-98e0-780966f526bc\nRaw Audit Messages\ntype=AVC msg=audit(1494919692.204:492): avc:  denied  { write } for  pid=3122 comm=\"portainer\" name=\"portainer.db\" dev=\"vda2\" ino=8128831 scontext=system_u:system_r:svirt_lxc_net_t:s0:c491,c755 tcontext=system_u:object_r:usr_t:s0 tclass=file\ntype=SYSCALL msg=audit(1494919692.204:492): arch=x86_64 syscall=openat success=no exit=EACCES a0=ffffffffffffff9c a1=c4202170a0 a2=80042 a3=180 items=0 ppid=3105 pid=3122 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c491,c755 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,file,write\n\nSELinux is preventing /portainer from write access on the directory portainer.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer directory\nThen you need to change the label on portainer\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainer'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainer'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c435,c631\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                portainer [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:29:40 CEST\nLast Seen                     2017-05-16 09:29:40 CEST\nLocal ID                      dc573875-3460-488c-8a64-db96c0314bd5\nRaw Audit Messages\ntype=AVC msg=audit(1494919780.349:535): avc:  denied  { write } for  pid=3400 comm=\"portainer\" name=\"portainer\" dev=\"vda2\" ino=8128910 scontext=system_u:system_r:svirt_lxc_net_t:s0:c435,c631 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494919780.349:535): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c420240ee0 a2=1c0 a3=0 items=0 ppid=3383 pid=3400 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c435,c631 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory portainer.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainer directory\nThen you need to change the label on portainer\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainer'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainer'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainer directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c380,c663\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                portainer [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 09:30:33 CEST\nLast Seen                     2017-05-16 09:30:33 CEST\nLocal ID                      c38c4ced-52f1-44a0-ad34-4592f328f3a5\nRaw Audit Messages\ntype=AVC msg=audit(1494919833.536:577): avc:  denied  { write } for  pid=3507 comm=\"portainer\" name=\"portainer\" dev=\"vda2\" ino=8128910 scontext=system_u:system_r:svirt_lxc_net_t:s0:c380,c663 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494919833.536:577): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c42022d0a0 a2=1c0 a3=0 items=0 ppid=3489 pid=3507 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c380,c663 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory docker.sock.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the docker.sock directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c95,c945\nTarget Context                system_u:object_r:docker_var_run_t:s0\nTarget Objects                docker.sock [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   46\nFirst Seen                    2017-05-16 09:37:10 CEST\nLast Seen                     2017-05-16 09:37:42 CEST\nLocal ID                      e30c15cf-3721-4626-96bd-f6cdaecf45fc\nRaw Audit Messages\ntype=AVC msg=audit(1494920262.267:696): avc:  denied  { write } for  pid=4356 comm=\"portainer\" name=\"docker.sock\" dev=\"tmpfs\" ino=25841 scontext=system_u:system_r:svirt_lxc_net_t:s0:c95,c945 tcontext=system_u:object_r:docker_var_run_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494920262.267:696): arch=x86_64 syscall=connect success=no exit=EACCES a0=11 a1=c420429510 a2=17 a3=0 items=0 ppid=4322 pid=4356 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c95,c945 key=(null)\nHash: portainer,svirt_lxc_net_t,docker_var_run_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory portainerdata.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainerdata directory\nThen you need to change the label on portainerdata\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainerdata'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainerdata'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainerdata directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c193,c765\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                portainerdata [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 10:15:10 CEST\nLast Seen                     2017-05-16 10:15:10 CEST\nLocal ID                      68a45fcb-333f-46c4-b238-db6e9f8f4caa\nRaw Audit Messages\ntype=AVC msg=audit(1494922510.695:839): avc:  denied  { write } for  pid=8876 comm=\"portainer\" name=\"portainerdata\" dev=\"vda2\" ino=8128932 scontext=system_u:system_r:svirt_lxc_net_t:s0:c193,c765 tcontext=system_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494922510.695:839): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c42022d090 a2=1c0 a3=0 items=0 ppid=8860 pid=8876 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c193,c765 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory portainerdata.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainerdata directory\nThen you need to change the label on portainerdata\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainerdata'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainerdata'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainerdata directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c821,c946\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                portainerdata [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 10:16:13 CEST\nLast Seen                     2017-05-16 10:16:13 CEST\nLocal ID                      b21ab743-04d0-461e-a77f-66fd02e88823\nRaw Audit Messages\ntype=AVC msg=audit(1494922573.384:871): avc:  denied  { write } for  pid=8976 comm=\"portainer\" name=\"portainerdata\" dev=\"vda2\" ino=8128932 scontext=system_u:system_r:svirt_lxc_net_t:s0:c821,c946 tcontext=system_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494922573.384:871): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c42022d080 a2=1c0 a3=0 items=0 ppid=8960 pid=8976 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c821,c946 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from write access on the directory portainerdata.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow portainer to have write access on the portainerdata directory\nThen you need to change the label on portainerdata\nDo\nsemanage fcontext -a -t FILE_TYPE 'portainerdata'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v 'portainerdata'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that portainer should be allowed write access on the portainerdata directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c398,c536\nTarget Context                system_u:object_r:usr_t:s0\nTarget Objects                portainerdata [ dir ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-16 10:16:46 CEST\nLast Seen                     2017-05-16 10:16:46 CEST\nLocal ID                      940eefbc-5d84-49d4-a6b5-c809cde97324\nRaw Audit Messages\ntype=AVC msg=audit(1494922606.289:896): avc:  denied  { write } for  pid=9068 comm=\"portainer\" name=\"portainerdata\" dev=\"vda2\" ino=8128932 scontext=system_u:system_r:svirt_lxc_net_t:s0:c398,c536 tcontext=system_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1494922606.289:896): arch=x86_64 syscall=mkdirat success=no exit=EACCES a0=ffffffffffffff9c a1=c42022d0a0 a2=1c0 a3=0 items=0 ppid=9050 pid=9068 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c398,c536 key=(null)\nHash: portainer,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /portainer from connectto access on the unix_stream_socket /run/docker.sock.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that portainer should be allowed connectto access on the docker.sock unix_stream_socket by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'portainer' --raw | audit2allow -M my-portainer\nsemodule -i my-portainer.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c773,c954\nTarget Context                system_u:system_r:docker_t:s0\nTarget Objects                /run/docker.sock [ unix_stream_socket ]\nSource                        portainer\nSource Path                   /portainer\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   6\nFirst Seen                    2017-05-16 11:16:34 CEST\nLast Seen                     2017-05-16 11:18:28 CEST\nLocal ID                      57e0a47e-114e-45c1-bffe-a749adbe3076\nRaw Audit Messages\ntype=AVC msg=audit(1494926308.586:1867): avc:  denied  { connectto } for  pid=22924 comm=\"portainer\" path=\"/run/docker.sock\" scontext=system_u:system_r:svirt_lxc_net_t:s0:c773,c954 tcontext=system_u:system_r:docker_t:s0 tclass=unix_stream_socket\ntype=SYSCALL msg=audit(1494926308.586:1867): arch=x86_64 syscall=connect success=no exit=EACCES a0=11 a1=c42037b190 a2=17 a3=0 items=0 ppid=22889 pid=22924 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=portainer exe=/portainer subj=system_u:system_r:svirt_lxc_net_t:s0:c773,c954 key=(null)\nHash: portainer,svirt_lxc_net_t,docker_t,unix_stream_socket,connectto\n\nSELinux is preventing /usr/bin/arangosh from write access on the sock_file arangodb-tmp.sock.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that arangosh should be allowed write access on the arangodb-tmp.sock sock_file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'arangosh' --raw | audit2allow -M my-arangosh\nsemodule -i my-arangosh.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c292,c664\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                arangodb-tmp.sock [ sock_file ]\nSource                        arangosh\nSource Path                   /usr/bin/arangosh\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   241\nFirst Seen                    2017-05-16 11:50:45 CEST\nLast Seen                     2017-05-16 11:52:50 CEST\nLocal ID                      641df838-5244-4eb3-a7b3-94312d51723b\nRaw Audit Messages\ntype=AVC msg=audit(1494928370.547:2244): avc:  denied  { write } for  pid=914 comm=\"arangosh\" name=\"arangodb-tmp.sock\" dev=\"vda2\" ino=1972244 scontext=system_u:system_r:svirt_lxc_net_t:s0:c292,c664 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=sock_file\ntype=SYSCALL msg=audit(1494928370.547:2244): arch=x86_64 syscall=connect per=400000 success=no exit=EACCES a0=3 a1=7ffd25868f60 a2=18 a3=7ffd25868f20 items=0 ppid=31773 pid=914 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=arangosh exe=/usr/bin/arangosh subj=system_u:system_r:svirt_lxc_net_t:s0:c292,c664 key=(null)\nHash: arangosh,svirt_lxc_net_t,docker_var_lib_t,sock_file,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c53,c916\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   2\nFirst Seen                    2017-05-18 13:49:06 CEST\nLast Seen                     2017-05-18 13:50:58 CEST\nLocal ID                      75f89017-1f95-446f-b187-d865ec13bb10\nRaw Audit Messages\ntype=AVC msg=audit(1495108258.900:1761): avc:  denied  { write } for  pid=10807 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=115703 scontext=system_u:system_r:svirt_lxc_net_t:s0:c53,c916 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495108258.900:1761): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=10805 pid=10807 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c53,c916 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c774,c978\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   3\nFirst Seen                    2017-05-18 14:16:10 CEST\nLast Seen                     2017-05-18 14:17:36 CEST\nLocal ID                      41d6a621-169e-4657-a697-2e638327621c\nRaw Audit Messages\ntype=AVC msg=audit(1495109856.413:1884): avc:  denied  { write } for  pid=11640 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=125338 scontext=system_u:system_r:svirt_lxc_net_t:s0:c774,c978 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495109856.413:1884): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=11638 pid=11640 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c774,c978 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from create access on the directory conf.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that node should be allowed create access on the conf directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c234,c254\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                conf [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   2\nFirst Seen                    2017-05-18 14:16:50 CEST\nLast Seen                     2017-05-18 14:17:43 CEST\nLocal ID                      430fb834-2ddc-4291-ab12-075b9421154f\nRaw Audit Messages\ntype=AVC msg=audit(1495109863.365:1902): avc:  denied  { create } for  pid=11788 comm=\"node\" name=\"conf\" scontext=system_u:system_r:svirt_lxc_net_t:s0:c234,c254 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495109863.365:1902): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffdbdac5390 a1=1ed a2=7ffdbdac5390 a3=7ffdbdac4dc0 items=0 ppid=11732 pid=11788 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c234,c254 key=(null)\nHash: node,svirt_lxc_net_t,docker_var_lib_t,dir,create\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from create access on the directory conf.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that node should be allowed create access on the conf directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c345,c557\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                conf [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   2\nFirst Seen                    2017-05-18 14:19:42 CEST\nLast Seen                     2017-05-18 14:21:20 CEST\nLocal ID                      820a0cff-207a-4ada-a631-769a099f9245\nRaw Audit Messages\ntype=AVC msg=audit(1495110080.613:2001): avc:  denied  { create } for  pid=12424 comm=\"node\" name=\"conf\" scontext=system_u:system_r:svirt_lxc_net_t:s0:c345,c557 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495110080.613:2001): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffe2b255830 a1=1ed a2=7ffe2b255830 a3=7ffe2b255260 items=0 ppid=12362 pid=12424 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c345,c557 key=(null)\nHash: node,svirt_lxc_net_t,docker_var_lib_t,dir,create\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c471,c616\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   2\nFirst Seen                    2017-05-18 14:19:42 CEST\nLast Seen                     2017-05-18 14:21:20 CEST\nLocal ID                      3682e838-c9d3-4106-9351-5e4fd1358324\nRaw Audit Messages\ntype=AVC msg=audit(1495110080.734:2009): avc:  denied  { write } for  pid=12455 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=134109 scontext=system_u:system_r:svirt_lxc_net_t:s0:c471,c616 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495110080.734:2009): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=12454 pid=12455 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c471,c616 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from create access on the directory conf.\n*  Plugin catchall (100. confidence) suggests   ******\nIf you believe that node should be allowed create access on the conf directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c369,c968\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                conf [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:21:46 CEST\nLast Seen                     2017-05-18 14:21:46 CEST\nLocal ID                      5618d0aa-a7f2-4612-b911-368749d87b69\nRaw Audit Messages\ntype=AVC msg=audit(1495110106.187:2061): avc:  denied  { create } for  pid=12809 comm=\"node\" name=\"conf\" scontext=system_u:system_r:svirt_lxc_net_t:s0:c369,c968 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495110106.187:2061): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffc69323430 a1=1ed a2=7ffc69323430 a3=13eac918c5bc items=0 ppid=12738 pid=12809 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c369,c968 key=(null)\nHash: node,svirt_lxc_net_t,docker_var_lib_t,dir,create\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c752,c867\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:21:46 CEST\nLast Seen                     2017-05-18 14:21:46 CEST\nLocal ID                      f72d20d0-7be9-4fe6-99e3-caa2e76c8f5f\nRaw Audit Messages\ntype=AVC msg=audit(1495110106.576:2073): avc:  denied  { write } for  pid=12858 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=137725 scontext=system_u:system_r:svirt_lxc_net_t:s0:c752,c867 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495110106.576:2073): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=12856 pid=12858 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c752,c867 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from write access on the directory /opt/apache-persistence.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow node to have write access on the apache-persistence directory\nThen you need to change the label on /opt/apache-persistence\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/apache-persistence'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v '/opt/apache-persistence'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that node should be allowed write access on the apache-persistence directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c979,c989\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                /opt/apache-persistence [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:34:35 CEST\nLast Seen                     2017-05-18 14:34:35 CEST\nLocal ID                      dd1bdd3c-6a5b-41b5-85b7-c3705e5f2565\nRaw Audit Messages\ntype=AVC msg=audit(1495110875.229:2142): avc:  denied  { write } for  pid=13247 comm=\"node\" name=\"apache-persistence\" dev=\"vda2\" ino=8128913 scontext=system_u:system_r:svirt_lxc_net_t:s0:c979,c989 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495110875.229:2142): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffe4620b520 a1=1ed a2=7ffe4620b520 a3=352b1df31c items=0 ppid=13181 pid=13247 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c979,c989 key=(null)\nHash: node,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c431,c701\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:34:35 CEST\nLast Seen                     2017-05-18 14:34:35 CEST\nLocal ID                      137a6c0a-428f-450e-83d1-5baeef346c26\nRaw Audit Messages\ntype=AVC msg=audit(1495110875.454:2154): avc:  denied  { write } for  pid=13296 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=143499 scontext=system_u:system_r:svirt_lxc_net_t:s0:c431,c701 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495110875.454:2154): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=13294 pid=13296 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c431,c701 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from write access on the directory /opt/apache-persistence.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow node to have write access on the apache-persistence directory\nThen you need to change the label on /opt/apache-persistence\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/apache-persistence'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v '/opt/apache-persistence'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that node should be allowed write access on the apache-persistence directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c343,c809\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                /opt/apache-persistence [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:39:28 CEST\nLast Seen                     2017-05-18 14:39:28 CEST\nLocal ID                      14b00602-324b-43e0-bba7-b3d973ae9b63\nRaw Audit Messages\ntype=AVC msg=audit(1495111168.998:2193): avc:  denied  { write } for  pid=13599 comm=\"node\" name=\"apache-persistence\" dev=\"vda2\" ino=8128913 scontext=system_u:system_r:svirt_lxc_net_t:s0:c343,c809 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495111168.998:2193): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffc4f332680 a1=1ed a2=7ffc4f332680 a3=bcab918860c items=0 ppid=13535 pid=13599 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c343,c809 key=(null)\nHash: node,svirt_lxc_net_t,usr_t,dir,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c564,c699\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:39:29 CEST\nLast Seen                     2017-05-18 14:39:29 CEST\nLocal ID                      41562dd7-55ff-4041-be21-f92740171c2b\nRaw Audit Messages\ntype=AVC msg=audit(1495111169.416:2205): avc:  denied  { write } for  pid=13646 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=146194 scontext=system_u:system_r:svirt_lxc_net_t:s0:c564,c699 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495111169.416:2205): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=13644 pid=13646 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c564,c699 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c548,c572\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:43:13 CEST\nLast Seen                     2017-05-18 14:43:13 CEST\nLocal ID                      ac59cdd2-fe32-496a-a64e-ee9e8df6884c\nRaw Audit Messages\ntype=AVC msg=audit(1495111393.719:2231): avc:  denied  { write } for  pid=13902 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=148556 scontext=system_u:system_r:svirt_lxc_net_t:s0:c548,c572 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495111393.719:2231): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=13901 pid=13902 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c548,c572 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/mariadb/sbin/mysqld from write access on the file /opt/bitnami/mariadb/data/tc.log.\n*  Plugin restorecon (99.5 confidence) suggests   ****\nIf you want to fix the label. \n/opt/bitnami/mariadb/data/tc.log default label should be usr_t.\nThen you can run restorecon.\nDo\n/sbin/restorecon -v /opt/bitnami/mariadb/data/tc.log\n*  Plugin catchall (1.49 confidence) suggests   ******\nIf you believe that mysqld should be allowed write access on the tc.log file by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'mysqld' --raw | audit2allow -M my-mysqld\nsemodule -i my-mysqld.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c181,c436\nTarget Context                system_u:object_r:docker_var_lib_t:s0\nTarget Objects                /opt/bitnami/mariadb/data/tc.log [ file ]\nSource                        mysqld\nSource Path                   /opt/bitnami/mariadb/sbin/mysqld\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 14:51:36 CEST\nLast Seen                     2017-05-18 14:51:36 CEST\nLocal ID                      86d5ea93-e43d-4517-a7ba-7ec9ff2c36f0\nRaw Audit Messages\ntype=AVC msg=audit(1495111896.80:2425): avc:  denied  { write } for  pid=14681 comm=\"mysqld\" path=\"/opt/bitnami/mariadb/data/tc.log\" dev=\"overlay\" ino=154662 scontext=system_u:system_r:svirt_lxc_net_t:s0:c181,c436 tcontext=system_u:object_r:docker_var_lib_t:s0 tclass=file\ntype=SYSCALL msg=audit(1495111896.80:2425): arch=x86_64 syscall=mmap success=no exit=EACCES a0=0 a1=6000 a2=3 a3=1 items=0 ppid=14680 pid=14681 auid=4294967295 uid=1001 gid=0 euid=1001 suid=1001 fsuid=1001 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=mysqld exe=/opt/bitnami/mariadb/sbin/mysqld subj=system_u:system_r:svirt_lxc_net_t:s0:c181,c436 key=(null)\nHash: mysqld,svirt_lxc_net_t,docker_var_lib_t,file,write\n\nSELinux is preventing /opt/bitnami/nami/runtime/node from write access on the directory /opt/mariadb-persistence.\n*  Plugin catchall_labels (83.8 confidence) suggests   *****\nIf you want to allow node to have write access on the mariadb-persistence directory\nThen you need to change the label on /opt/mariadb-persistence\nDo\nsemanage fcontext -a -t FILE_TYPE '/opt/mariadb-persistence'\nwhere FILE_TYPE is one of the following: cgroup_t, docker_var_lib_t, nfs_t, svirt_home_t, svirt_sandbox_file_t, virt_home_t.\nThen execute:\nrestorecon -v '/opt/mariadb-persistence'\n*  Plugin catchall (17.1 confidence) suggests   ******\nIf you believe that node should be allowed write access on the mariadb-persistence directory by default.\nThen you should report this as a bug.\nYou can generate a local policy module to allow this access.\nDo\nallow this access for now by executing:\nausearch -c 'node' --raw | audit2allow -M my-node\nsemodule -i my-node.pp\nAdditional Information:\nSource Context                system_u:system_r:svirt_lxc_net_t:s0:c526,c551\nTarget Context                unconfined_u:object_r:usr_t:s0\nTarget Objects                /opt/mariadb-persistence [ dir ]\nSource                        node\nSource Path                   /opt/bitnami/nami/runtime/node\nPort                          \nHost                          \nSource RPM Packages         \nTarget RPM Packages         \nPolicy RPM                    selinux-policy-3.13.1-102.el7_3.16.noarch\nSelinux Enabled               True\nPolicy Type                   targeted\nEnforcing Mode                Enforcing\nHost Name                     #localhost.localdomain\nPlatform                      Linux #localhost.localdomain\n                              3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12\n                              15:04:24 UTC 2017 x86_64 x86_64\nAlert Count                   1\nFirst Seen                    2017-05-18 15:00:11 CEST\nLast Seen                     2017-05-18 15:00:11 CEST\nLocal ID                      e493a516-ae5f-4f99-b470-a1026a7dbbf0\nRaw Audit Messages\ntype=AVC msg=audit(1495112411.804:2626): avc:  denied  { write } for  pid=16038 comm=\"node\" name=\"mariadb-persistence\" dev=\"vda2\" ino=8128915 scontext=system_u:system_r:svirt_lxc_net_t:s0:c526,c551 tcontext=unconfined_u:object_r:usr_t:s0 tclass=dir\ntype=SYSCALL msg=audit(1495112411.804:2626): arch=x86_64 syscall=mkdir per=400000 success=no exit=EACCES a0=7ffc8c4f9a70 a1=1ed a2=7ffc8c4f9a70 a3=d4281055ba5 items=0 ppid=15980 pid=16038 auid=4294967295 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=(none) ses=4294967295 comm=node exe=/opt/bitnami/nami/runtime/node subj=system_u:system_r:svirt_lxc_net_t:s0:c526,c551 key=(null)\nHash: node,svirt_lxc_net_t,usr_t,dir,write\n``. Yes, when I use this I cannot load any data in portainer, it always shows an error\"Unable to load dashboard data\"`\nsudo docker run -d -p 9000:9000 \\\n -v \"/var/run/docker.sock:/var/run/docker.sock:z\" \\\n -v \"/opt/portainerdata:/data:z\" \\\n portainer/portainer\n. Yes, when I use this I cannot load any data in portainer, it always shows an error \"Unable to load dashboard data\"\nsudo docker run -d -p 9000:9000 \\\n -v \"/var/run/docker.sock:/var/run/docker.sock:z\" \\\n -v \"/opt/portainerdata:/data:z\" \\\n portainer/portainer\n. ah, so it's just an unpolished 'you are not welcome' message? thanks!. ah, so it's just an unpolished 'you are not welcome' message? thanks!. I know Portainer calls docker api but still it uses bridge network to host ui.\nAs I expect docker network inspect bridge gives me 3 containers.\nPortainer does not shows itself under network -> bridge tab.\n\n\n. I know Portainer calls docker api but still it uses bridge network to host ui.\nAs I expect docker network inspect bridge gives me 3 containers.\nPortainer does not shows itself under network -> bridge tab.\n\n\n. I do not use other endpoint. Only local .sock file. I do not use other endpoint. Only local .sock file. > I've been able to get the registry created on AWS using https://github.com/johnvmt/portainer-ecr-credentials but even if the credentials are there I get No such image trying to use it in a service and/or a stack\n\nUpdate: my bad, I've typed the wrong AWS region :) now it seems to be working\n\nI tweaked this container's index.js node file for my enterprise proxy settings and got it working. Pretty slick, it runs every 11 hours to pull down new ECR credentials and updates the portainer registry with the new credential. . > I've been able to get the registry created on AWS using https://github.com/johnvmt/portainer-ecr-credentials but even if the credentials are there I get No such image trying to use it in a service and/or a stack\n\nUpdate: my bad, I've typed the wrong AWS region :) now it seems to be working\n\nI tweaked this container's index.js node file for my enterprise proxy settings and got it working. Pretty slick, it runs every 11 hours to pull down new ECR credentials and updates the portainer registry with the new credential. . I want to set UID and GID to run Portainer contener as specified user not admin. I want to set UID and GID to run Portainer contener as specified user not admin. It is not a linuxserver trick. Almost every container in docker hub support setting PUID and PGID. \nSo I am asking is portainer support it currently?\nFor example official plex: https://hub.docker.com/r/plexinc/pms-docker/. It is not a linuxserver trick. Almost every container in docker hub support setting PUID and PGID. \nSo I am asking is portainer support it currently?\nFor example official plex: https://hub.docker.com/r/plexinc/pms-docker/. Ok, now I understand. Thank you for clarification.. Ok, now I understand. Thank you for clarification.. You are right I can use watchtower but watchtower check when image was last pushed.\nFor example: https://hub.docker.com/r/portainer/portainer/ we can see last image pushed was 6 day ago, but lastest portainer release was 18 day ago so there is no need to do update but watchtower will return true and will try to update the container with new image.\nAm I right? \nPS. Sorry for my english. You are right I can use watchtower but watchtower check when image was last pushed.\nFor example: https://hub.docker.com/r/portainer/portainer/ we can see last image pushed was 6 day ago, but lastest portainer release was 18 day ago so there is no need to do update but watchtower will return true and will try to update the container with new image.\nAm I right? \nPS. Sorry for my english. Hi @deviantony \nIt is docker 1.21 on Linux, mounted via sock file. I tried to update portainer from portainer \u201eupdate container\u201d option but without success so i delete old portainer container and created the new one from 1.16 image, then o second setup screen, the one after admin password setup, when user need to select endpoint, cant click connect because there is call to api and it return 404 \nSonething like that :D, i had to rolback to 1.15.5. Hi @deviantony \nIt is docker 1.21 on Linux, mounted via sock file. I tried to update portainer from portainer \u201eupdate container\u201d option but without success so i delete old portainer container and created the new one from 1.16 image, then o second setup screen, the one after admin password setup, when user need to select endpoint, cant click connect because there is call to api and it return 404 \nSonething like that :D, i had to rolback to 1.15.5. @deviantony Yeah, I meant 1.12 and api version 1.23. @deviantony Yeah, I meant 1.12 and api version 1.23. @deviantony \nSure, I am still waiting for tag on docker hub\nUpdate:\nWorks great now with #1594 \ud83d\udc4d . @deviantony \nSure, I am still waiting for tag on docker hub\nUpdate:\nWorks great now with #1594 \ud83d\udc4d . Was facing a similar issue to @xrobau. I have tried portainer/portainer:pr1909 and I can now update the stack once more.. Was facing a similar issue to @xrobau. I have tried portainer/portainer:pr1909 and I can now update the stack once more.. ",
    "goloroden": "Great, thanks for this :blush:. ",
    "adaliszk": "I've added the volume, recreated the whole portainer container and the css styles are gone. The mentioned vendor.css and portainer.css are not created automaticly and after I add it manually still nothing happens and after I put the /assets/css/app.css contents into this folder or any of the files the styles still missing. \ud83d\ude2d. @deviantony Thanks! But with even without having separate files to override things, it shouldn't just die and unable to write into that folder right? If it's generate a file (at least the gulp tasks suggest that) then it should able to create into my binded directory outside the container.\nIf it would generate something I would able to manipulate it, for example change the gulp tasks to detect a custom.css file and if it's present I could merge that with the vendor & portainer css.. @deviantony Works!. @laurentleseigneur Well soon when it's supports OAuth I believe we should able to add any OAuth compatible service like GitHub as well :wink:\nBut @deviantony knows when and how it will be implemented. I see that if we change the https://github.com/adaliszk/portainer/edit/develop/api/git/git.go by adding a client argument then we can inject the default or the custom one. I just don't know how that works in Go :stuck_out_tongue_winking_eye: . ",
    "soumen1102": "@deviantony Can you please elaborate a bit on how a Custom CSS can be loaded for Portainer v 1.15. Thanks @rbreaves serving the CSS from another site is definitely a good idea .. will try it out and will let you know how it goes.... ",
    "rbreaves": "For people interested in customizing the css I will mention the method that I just used to accomplish this.\n\nThere are 3 files you have to work with specifically and update the color scheme in and so it is easiest to do this by following their guide on how to use yarn and to setup a dev environment from their source.\n./node_modules/rdash-ui/dist/css/rdash.css\n./assets/css/app.css\n./node_modules/angularjs-slider/dist/rzslider.css\nAfter making the changes I then just consoled into my nginx-proxy and updated the /etc/nginx/conf.d/default.conf file to redirect the original css request to another container that I use for my website and I let it serve up the replacement css file since I had difficulty mounting the public volume/folder inside the scratch based portainer image.\nSpecifically in the default.conf file I updated the 'server {}' area related to the portainer container and added this inside it.\nlocation /css/app.c631949e.css {\n                proxy_pass http://172.17.0.9:80/custom/css/app.css;\n        }\nNote: in my final app.css I merged app.css and rzslider.css contents from my dev environment into one css file named app.css.\n. ",
    "metalbote": "It should not be that complicated to add a stylesheet definiton to your htmls pointing to a data/style/custom.css, you can exclude it from your css build process or append it to index.html on last step.\n. ",
    "alexstanza": "Fair enough. Otherwise, is it possible to have a configuration clone function? So, let's say, I have a wrongly configured container that cannot run. I can open that container page and click on \"CLONE\" button, and it will open the \"Add a new container\" page with pre-filled configuration from the previous container, including the image, any command, volume, network, security, etc.\nThis feature will be a great alternative if edit function is unavailable.. Yes, it is similar to #41 with a capability to do an adjustment before deploying the copied container.. Ah, it is too bad, if we can keep this as an option in the portainer, this will be good. I think this is a good feature considering that there is no \"edit\" functionality in portainer.\nNovice users may use portainer as a \"wizard\" to use docker, and by having this mid step, these novice users can learn and tweak configuration to run their containers. If portainer is implemented by a cloud provider, this feature will also be useful to get traction from novice users.\nAdvanced admin users may also use this App Template as a shortcut to spin off a new container configuration.. It may help to do a focus group (or quick feedback in events / conferences) to see if anyone is interested.. ",
    "michaelsogos": "Dear @deviantony  ,\nDo you have plan for customize stopped container?\n. ",
    "Richard-Mathie": "same here, and the service networks are not displayed, though looking at the pull requests #307 and #213, it looks like this was done. so maybe this is a deprecation\nI must say I was a bit surprised when I updated an image, took me some hours to work out why I was loosing the nginx config for the service which is driven by the labels (using https://github.com/ehazlett/interlock).\nits odd because the image update command is so simple in the cli, it is quite unexpected for it to remove all the labels.... also scaling a service removes labels!!!. just pulled portainer/portainer:1.10.2. labels still not appearing in the service console, and the ui version number is reporting 1.10.1... surely some mistake?. I have put @dawidpawlowski solution into an auto build here\nI use IAM roles on the machines but AWS_ACCESS_KEY_ID AWS_SECRET_ACCESS_KEY will work the same\nIt only works for me if i am deploying a stack using protainer, running a service directly with a private ECR image doesn't seem to work.. ",
    "sweco-semtne": "We would like to use Templates as way to start containers into different environments, ie, test, dev, stage, prod. In our infrastructure we use a environment variable to decide the settings in the image.\nIt would be great if you could use the template feature and be able to override an env feature to simplify this. . ",
    "twityde": "@deviantony I can unterstand @sweco-semtne. ENV variables that have the set value in the template are not generating any UI, I have now the same request.\nMy idea is to introduce the attribute \"default\" to the ENV object. If default is set to a string, the value is is rendered in the nromal text box and the user can change the value before he create the container. If \"default\" contains an json array with three values an boolean slider is rendered (first two values are the true and the false value and the third value defines the default slider state).\nIf default contains an json object it is rendered as a drop down box, the first one will be selected as default.\nExample:\n[\n {\n    \"title\": \"SQL Server\",\n    \"description\": \"Microsoft SQL Server on Linux\",\n    \"categories\": [\"database\"],\n    \"platform\": \"linux\",\n    \"note\": \"Password needs to include at least 8 characters including uppercase, lowercase letters, base-10 digits and/or non-alphanumeric symbols.\",\n    \"logo\": \"https://cloudinovasi.id/assets/img/logos/microsoft.png\",\n    \"image\": \"microsoft/mssql-server-linux:latest\",\n    \"ports\": [\n      \"1433/tcp\"\n    ],\n    \"env\": [\n      {\n        \"name\": \"ACCEPT_EULA\",\n    \"default\" : [\"Y\", \"N\", \"True\"]\n      },\n      {\n        \"name\": \"SA_PASSWORD\",\n        \"label\": \"SA password\"\n      }\n    ]\n  },\n  {\n    \"title\": \"SQL Server\",\n    \"description\": \"Microsoft SQL Server for Windows containers\",\n    \"categories\": [\"database\"],\n    \"platform\": \"windows\",\n    \"note\": \"Password needs to include at least 8 characters including uppercase, lowercase letters, base-10 digits and/or non-alphanumeric symbols.\",\n    \"logo\": \"https://cloudinovasi.id/assets/img/logos/microsoft.png\",\n    \"image\": \"microsoft/mssql-server-windows:latest\",\n    \"ports\": [\n      \"1433/tcp\"\n    ],\n    \"env\": [\n      {\n        \"name\": \"ACCEPT_EULA\",\n        \"set\": \"Y\"\n      },\n      {\n        \"name\": \"sa_password\",\n        \"label\": \"SA password\"\n    \"default: \"P@ssw0rd!\"\n      },\n      {\n        \"name\": \"sql_instance\",\n        \"label\": \"Sql Instance\"\n    \"default: { \"default\": \"default instance\", \"SQLEXPRESS\": \"SQL Express instance\"}\n      }\n    ],\n    \"volumes\": [\"C:/temp/\"]\n  }\n]\nCurrently I setup an development VM and try to make this changes and contribute them.. After some research, I have figured out that you can use \"value\" instead of \"set\", to get an UI.\n I added support for drop down selection and tooltips.. Nice idea.. ",
    "baramann": "Hi,\nit would be a nice feature to enable advanced configuration for users in template. \nExample: \nA self-service for application where the user can configure the value for the\nkey \"--label traefik.frontend.rule=Host:\"\nin the App templating page\nthanks!. ",
    "churnd": "+1 for re-adding this feature. ",
    "floriantschopp": "Hi all,\nWe would like to use the template option to easily deploy some nvidia-dockers. \nHowever, there one needs to specify the --runtime=nvidia\nThis is possible when creating a new container but I haven't figured out (yet) how to define this also as a default in the template. Further also being able to restrict the resources for the template as you can when creating the container would be super useful. @deviantony Could this be a potential new feature or is it already there somehow?\nThanks a lot!. ",
    "dominic-miglar": "+1. ",
    "guentherchris": "Exactly! :-). ",
    "StevenPG": "Was this issue reintroduced with v1.13.0?\nI'm now getting an error where \"image not found\" when \"Always pull image before creating\" checkbox is ticked.\n\nUnticking \"Always pull image before creating\" fixes the issue.\n. I've had this happen recently. In my case, the container is stopped/killed and then removed. It shows up in the container view as \"running\" with no IP and cannot be stopped, killed, or removed. When attempting to do so, the error is that the /var/lib/docker/container/xxxxxx is in use.\nI'm not sure if it is the same issue or not.. @ncresswell is correct I think, here is a blurb from a docker networking blog post by CenturyLink:\n\"There are several ways to do this (Expose ports): you can expose a port via the --expose flag at runtime, or include an EXPOSE instruction in the Dockerfile. You can also publish ports by using the -p or -P flags in the Docker run string.\"\nThe post explains the differences between the individual types of network setups involving ports: https://www.ctl.io/developers/blog/post/docker-networking-rules/\nI don't believe a random port is mapped aswell, but the port that is specified. See the attached images.\nMapping 9000 -> 9122 and 9002 -> 9123\n\nExposed on those ports\n\nAvailable on specified host port 9122\n\n. ",
    "eisnerd": "One case in point is cloudhero.io. I can connect to that with the usual docker client in tlsverify mode. However, I could not connect to it with portainer. All requests, whether for info, container, images, etc., failed with no log message. I couldn't even connect from within a container hosted on the same cloudhero.io cluster, because they do not allow mapping docker.sock and the tcp method has this problem.\nThe lack of logs from portainer left me with a lot of avenues to investigate, like certificate paths, formats, permissions, dns, version mismatches, etc. Then, fiddling with stunnel, nc and tcpflow to investigate, I captured this:\nGET /info HTTP/1.1\\r\nHost: localhost:8000\\r\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64) ...\nAccept: application/json, text/plain, */*\\r\nAccept-Encoding: gzip, deflate, sdch\\r\nAccept-Language: en-GB,en;q=0.8,en-US;q=0.6\\r\nCache-Control: max-age=0\\r\nCookie: ...\nDnt: 1\\r\nReferer: http://localhost:8000/\\r\nX-Forwarded-For: ::1\\r\n\\r\n< 2016/12/08 05:40:10.762794  length=707 from=0 to=706\nHTTP/1.1 404 Not Found\\r\nServer: nginx\\r\nDate: Thu, 08 Dec 2016 05:40:10 GMT\\r\nContent-Type: text/html\\r\nContent-Length: 564\\r\nConnection: close\\r\n\\r\n<html>\\r\n<head><title>404 Not Found</title></head>\\r\n<body bgcolor=\"white\">\\r\n<center><h1>404 Not Found</h1></center>\\r\n<hr><center>nginx</center>\\r\n</body>\\r\n</html>\\r\n<!-- a padding to disable MSIE and Chrome friendly error page -->\\r\n<!-- a padding to disable MSIE and Chrome friendly error page -->\\r\n<!-- a padding to disable MSIE and Chrome friendly error page -->\\r\n<!-- a padding to disable MSIE and Chrome friendly error page -->\\r\n<!-- a padding to disable MSIE and Chrome friendly error page -->\\r\n<!-- a padding to disable MSIE and Chrome friendly error page -->\\r\nThey use nginx as a name based virtual host proxy in front of docker. I don't know whether other services like carina are doing this at the moment, but it doesn't seem like a completely off the wall thing to do.\nWith this patch, portainer connects fine with tcp, tlsverify and the certs mounted, exactly as I had been configuring it.\nThis is the first time I've tried portainer, by the way, and despite this slightly shaky start for me it seems fab. I will be recommending it to anyone who doesn't roll there eyes when I say docker.. Interesting. I pushed an image to https://hub.docker.com/r/eisnerd/portainer/ in case it makes it easier for\nyou to check.. Yes. It should be d7402e11f66a. It works for me against cloudhero. I'll try setting up my own proxy to test with.. My attempts to build and test this have failed this time. I'm getting Error: $injector:modulerr\nModule Error from angularjs, so I can't be sure the new patch works for me yet.. There may be javascript errors in your console despite nothing showing on the page. That's what I had. I don't know what went wrong. The first one I built worked fine. \nAfter grunt release, I think you should be able to run the binary in dist/ without packaging it in a docker image. The build still uses docker, however, and you really don't get much log output either way, so there's little difference. \nMaybe I built with the wrong node version this time?. ",
    "esnellman": "Hi,\nDocker Swarm version 1.13.0-rc3\nI am running it as a service:\ndocker service create     --name portainer     --network consul     --constraint 'node.role == manager'     --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock     portainer/portainer:latest     --swarm\nI have it behind a nginx reverse proxy:\n```\n    server {\n        listen 80;\n        server_name portainer.XXXXXXXXXXXXX.net;\n    location / {    \n        proxy_pass http://portainer:9000/;\n    }\n}\n\n```\nBoth  eisnerd/portainer and portainer/portainer  produce 500s:\ninfo    GET 500 xhr angular.js:2    181\u2009B   201\u2009ms\njson?all=1  GET 500 xhr angular.js:2    181\u2009B   150\u2009ms\njson?all=0  GET 500 xhr angular.js:2    181\u2009B   196\u2009ms\nvolumes GET 500 xhr angular.js:2    181\u2009B   141\u2009ms\nnetworks    GET 500 xhr angular.js:2    181\u2009B   206\u2009ms\ndocker logs does show:\n2016/12/18 08:59:22 Starting portainer on :9000\n2016/12/18 09:02:29 persistent connection closed\n2016/12/18 09:02:29 persistent connection closed\n2016/12/18 09:02:29 persistent connection closed\n2016/12/18 09:02:29 persistent connection closed\n2016/12/18 09:02:29 persistent connection closed\n2016/12/18 09:02:30 persistent connection closed\n. ",
    "zigmund": "Hi there.\nIs there any way to add additional users?. ",
    "gidcs": "@deviantony I have fixed the associated linting issues, sorry for missing that part. \nI have forgotten to mention I have fixed a issue that didn't reset selectedItemCount in ImagesController, NetworksController, and VolumesController. Personally, I will remove counter and left only selectedItemCount. What do you think?. @paulkling It seems like gmail only remember the marked state of previous page but you need to click the remove button again and again.\n@ncresswell I also agree with you.\n@Hronom Display All might be appeared in this release? @deviantony  :). @deviantony done.\nThat is why I said Display All might be appeared.\n\nHi there, this release will also introduce settings and we'll give portainer users the ability to define their wished pagination settings.\n. \n",
    "WouterOet": "I'm not following why you would need to add a checkedAll variable to $scope.state. Won't that complicate things in the long run? I've implemented the same behavior (selecting only the items which are visible) by invoking the existing selectItem function.\nSee this commit: https://github.com/WouterOet/portainer/commit/2c8087759ba34bda7660d0892b627d41f1b69387 . Done. https://github.com/portainer/portainer/pull/437. I commented here because it said to check for existing PR in the contributing documentation.. I'll gladly fix it if you want to but do we really want to? If we see the checkbox as a representation of whether all containers are checked, than yes we need to fix it. If we merely see it as a convenient button for (de)selecting all the containers, than no we should fix it. \nThe downside of fixing it is that we need to add code in multiple places to manage the state of the checkbox. For instance when a container is deselected, all containers are remove or a new one is added (maybe there are move corner cases). I personally love simple code and not fixing it has my preference (and the change can be easily added later if many people complain).\nKeeping that in mind @deviantony, do you want me to fix it?. This feature was introduced in docker 1.12. However your container needs to support it. E.g.:\nFROM nginx:alpine\nHEALTHCHECK CMD wget -sq http://localhost/ || exit 1\nA container based on this image will be 'starting' the first 30 seconds and then be 'healthy'.. ",
    "renatoriccio": "+1 Thanks a lot it works perfectly! . @deviantony first of all thanks for your help\nI think I did the configuration, and this is my status (shirked version)\nbash\nhost@ubuntu:~$ systemctl status docker\n\u25cf docker.service - Docker Application Container Engine\n   Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)\n   Active: active (running) since Fri 2016-12-16 19:29:39 CET; 1h 2min ago\n     Docs: https://docs.docker.com\n Main PID: 1095 (dockerd)\n    Tasks: 327\n   Memory: 211.7M\n      CPU: 4min 16.134s\n   CGroup: /system.slice/docker.service\n           \u251c\u2500 1095 /usr/bin/dockerd -H fd:// --ip=192.168.1.200 --insecure-registry=192.168.1.200:5000\n           \u251c\u2500 1281 docker-containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --shim docker-containerd-shim --metrics-interval=0 --start-timeout 2m --state-dir\n           \u251c\u2500 2601 docker-containerd-shim 10f45d7a361b133a3df4a481f892ab0198e0331412198b4ca6bfe4b12047a060 /var/run/docker/libcontainerd/10f45d7a361b133a3df4a481f892ab0198e033141219\n           \u251c\u2500 2616 docker-containerd-shim af03e553efeb544b583e44cbe59c9257d45b6ccc3be3f95fc8de8f8b94e47d6e /var/run/docker/libcontainerd/af03e553efeb544b583e44cbe59c9257d45b6ccc3be3\n           \u251c\u2500 2650 docker-containerd-shim 243aa7568d81273cb8dd3e05fc2abe72b947a8e00329e873796847fce9f2ea35 /var/run/docker/libcontainerd/243aa7568d81273cb8dd3e05fc2abe72b947a8e00329\n           \u251c\u2500 2681 /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 8050 -container-ip 172.18.0.11 -container-port 8050. Portainer and docker are running on 192.168.1.200 and I am accessing it from another host in the same LAN.\nI tried with private navigation but still same problem. I tried safari 10.0.2 and chrome  55.0.2883.95 (64-bit) (both from mac os)\nHere the docker ps\nbash\nmkcroiser@ubuntu:~/docker_compose$ docker ps\nCONTAINER ID        IMAGE                 COMMAND                  CREATED              STATUS              PORTS                                            NAMES\n2c5b1722f404        portainer/portainer   \"/portainer\"             About a minute ago   Up About a minute   0.0.0.0:9000->9000/tcp                           portainer-app\n22703e8d9d18        haproxy:1.5           \"/docker-entrypoint.s\"   About an hour ago    Up About an hour    0.0.0.0:8036->8036/tcp, 0.0.0.0:8050->8050/tcp   haproxy_haproxy_1\nhere the docker compose I use\n```yaml\nversion: '2'\nservices:\n  portainer:\n    image: portainer/portainer\n    container_name: \"portainer-app\"\n    networks:\n      - local\n    ports:\n      - 9000:9000\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    restart: always\nnetworks:\n  local:\n    driver: bridge\n```. I didn't notice and you are right. I also rebooted the pc, maybe is something related to the docker-compose. Let me try some changes and I let you know if it changes something. I restarted the pc and I still have this\nbash\nCONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                         PORTS                                            NAMES\n40cff6c2bb76        portainer/portainer   \"/portainer\"             3 seconds ago       Up 1 seconds                   0.0.0.0:9000->9000/tcp                           portainer-app\n4d31f3f60760        haproxy:1.5           \"/docker-entrypoint.s\"   18 seconds ago      Restarting (0) 1 seconds ago   0.0.0.0:8036->8036/tcp, 0.0.0.0:8050->8050/tcp   haproxy_haproxy_1\nI boot the haproxy with the following docker-compose file:\n```yaml\nversion: '2'\nservices:\n  haproxy:\n    image: haproxy:1.5\n    volumes:\n      - /home/foo/workspace/haproxy/my-haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg\n    ports:\n      - 8036:8036\n      - 8050:8050\n    networks:\n      - test\n    restart: always\nnetworks:\n  test:\n    driver: bridge\n.bash\n$ docker-compose -f docker-compose-alone.yml down\nStopping haproxy ... done\nStopping portainer-app ... done\nRemoving haproxy ... done\nRemoving portainer-app ... done\nRemoving network portainercompose_local\n$ docker-compose -f docker-compose-alone.yml up -d\nCreating network \"portainercompose_local\" with driver \"bridge\"\nCreating haproxy\nCreating portainer-app\n$ docker ps\nCONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                                            NAMES\n55fff802dbb6        portainer/portainer   \"/portainer\"             5 seconds ago       Up 2 seconds        0.0.0.0:9000->9000/tcp                           portainer-app\n4893b13d232a        haproxy:1.5           \"/docker-entrypoint.s\"   5 seconds ago       Up 2 seconds        0.0.0.0:8036->8036/tcp, 0.0.0.0:8050->8050/tcp   haproxy\n```\nhere the all in one docker-compose\n```yaml \nversion: '2'\nservices:\n  portainer:\n    image: portainer/portainer\n    container_name: \"portainer-app\"\n    networks:\n      - local\n    ports:\n      - 9000:9000\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    restart: always\nhaproxy:\n    image: haproxy:1.5\n    container_name: \"haproxy\"\n    volumes:\n      - /home/foo/workspace/haproxy/haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg\n    ports:\n      - 8036:8036\n      - 8050:8050\n    networks:\n      - local\n    restart: always\nnetworks:\n  local:\n    driver: bridge\n```\nI think this is a docker issue since ps is still showing 0.0.0.0. @deviantony thanks a lot for your help it works now!. ",
    "denji": "How to set macvlan default and specify the extern ip 10.0.0.2?\nBinding container services via docker-compose.yml\nsh\ndocker network create -d macvlan \\\n --subnet=10.0.0.0/8 --gateway=10.0.0.1 \\\n --aux-address='exclude_host=10.0.0.1' \\\n -o parent=eno1 macvlan10\n```yaml\n\u2026\nnetworks:\n  default:\n  # driver: macvlan\n    external:\n      name: macvlan10\n      #ipam:\n      # config:\n      #   aux_addresses: 10.0.0.2\n      #   aux_addresses: 10.0.0.2\n      #   aux_addresses:\n      #    haproxy: 10.0.0.2\n      #    postgresql: 10.0.0.3\n```\n. ",
    "encript": "Issue has been resolved by remove jessie backport repo removing all traces of docker and installing docker from getdocker sh script. . ",
    "longtian": "How about adding some housekeeping tasks like \n\ndocker image prune\ndocker container prune. \n",
    "JPustkuchen": "+1 for this feature. It would be very helpful :). ",
    "obrienmd": "+1 indeed!. ",
    "sylvainmouquet": "+1 . Sorry i have just seen your pull request. \nI have done the same integration today : #1169\nThe 2 differences are i have used a bower dependency and i have changed the code of ansi2html to remove the default style because the default style is the current style it's not necessary to override the current style.\n. No i don't alter the file at runtime and the error occurs with the version portainer/portainer:develop . Ok it's better\n\necm_local_monitoring_portainer.1.rh0mn9zxnm21@moby    | 2017/07/12 12:50:53 Using external endpoint definition. Endpoint management via the API will be disabled.\necm_local_monitoring_portainer.1.rh0mn9zxnm21@moby    | 2017/07/12 12:50:53 File endpoint not found in database, adding to database. [name: ecm_local] [url: unix:///var/run/docker.sock]\necm_local_monitoring_portainer.1.rh0mn9zxnm21@moby    | 2017/07/12 12:50:53 Endpoint synchronization ended. [created: 1] [updated: 0] [deleted: 0]\necm_local_monitoring_portainer.1.rh0mn9zxnm21@moby    | 2017/07/12 12:50:53 Creating admin user with password hash $2y$05$PZfv7jp9GAO3LRE/bqOhbeIsq1XPnc6dpY4xVt2d5GkFeJkszBPnO\necm_local_monitoring_portainer.1.rh0mn9zxnm21@moby    | 2017/07/12 12:50:53 Starting Portainer on :9000\necm_local_monitoring_portainer.1.rh0mn9zxnm21@moby    | 2017/07/12 12:51:53 Endpoint synchronization job started.\necm_local_monitoring_portainer.1.rh0mn9zxnm21@moby    | 2017/07/12 12:51:53 No change detected for a stored endpoint. [name: ecm_local] [url: unix:///var/run/docker.sock]. This feature will be arrived soon ? \nWe use it daily and it's difficult to use it without colors and with bad encoding.\n\nThen it's possible to add a filter to the console ?. \n. On the demo environnement i have tried to create a service with a very long name : \n1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890\nand i have got this error \"Invalid request data format\".\nIf i set a little name i have not error. There is a limit length for the name of a service. Adding a button is a good solution. I have committed and revert the modifications next i should create a new pull requests ?. Close in preference to use #1324. I think it's because i use a local volume for the storage of the portainer data. I have removed the local volume and the error occurs yet i will try with version 1.14.0. The problem does not occur with version 1.14.0. I have tried with and without volume driver and the problems occurs. \nportainer:\n   image:...\n    volumes:\n       #- portainer:/data\n       - /var/run/docker.sock:/var/run/docker.sock\n...\nvolumes:\n  portainer:\n    driver: local\nI use docker version 17.07.0-ce\n. Problem is solved with version 1.14.3. stdout contains html :\nhttps://docs.angularjs.org/api/ng/directive/ngBindHtml\n\nYou may also bypass sanitization for values you know are safe. To do so, bind to an explicitly trusted value via $sce.trustAsHtml. \n\nngBindHtml should be used with $sce.trustAsHtml \n. yep sorry i fix it. ",
    "enricocanardi": "+1\nBtw, according to the roadmap, this feature should be available in 1.14.x, I have 1.15 but there is no scheduler.... +1\nBtw, according to the roadmap, this feature should be available in 1.14.x, I have 1.15 but there is no scheduler.... ",
    "duprefm": "Can you add the possiility to schedule a script in a running container. For example to backup a database or everithing else.... ",
    "Shifter2600": "+1. ",
    "silkimen": "+1. ",
    "rhuanbarreto": "+1 !. ",
    "wjdavis5": "+1 this has been open for over a year and I think we all want it!. +1 for having the same issue. I am also running the version indicated that is supposed to fix this problem.. ",
    "ataraxus": "+1 . ",
    "idtstudios": "+1. ",
    "cgd1": "+1. can I +1 again?. Can this functionality be extended to gitlab as well?. ",
    "khellinx": "+1. Yes :-)\nCan't seem to find it in the current portainer version.. ",
    "ngodber": "+1. ",
    "markvr": "@paulkling checkout weavescope for that.  It sounds exactly like what you want.  I can't enter links, so you will need to google it.. I've been following this with interest as it would make Portainer much more useful to us.\nRather than needing to expose each instance with mode=host which has significant security implications, could you use a swarm overlay network for the intra-portainer communication, and then just need to expose the \"master\" instance on the host?\nIf it's any use, for another project I used Nginx with SSL certificates to proxy the Docker socket ports.  Something similar would mean you would only need to run portainer on the \"master\", with a \"socket-proxy\" container on the overlay networks.  This proxies all the REST calls OK but  I don't know if it would work with the tty/shell remote access.. Further research shows that on CentOS \"shasum\" is called \"sha1sum\".  Running the following fixes the  issue:\nln -s /usr/bin/sha1sum /usr/bin/shasum\nYou can probably close this issue, but might be helpful to others to add this to the docs?. ",
    "ToasterKTN": "Yes sir, from there it works like a charm.. >  Note that you have to hit the save button\nI know, it is the same procedure on the List View. But on Details view, it does not work.\nIf i start the Debugger, and check Network activity, it does not even send a update POST.\nSo the Ajax call does not get started at all\n. I see.\nThe Save changes button is not visible till i apply replicas / Scale.\nAnd when i checked the form, there was no button. Problem is, the button is way out of the window:\n\nGot too many ports there :-D \nOk thank you anyway. I feel a bit dump about that. \nSorry.. ",
    "MetalArend": "Because you are overwriting the command, and you should know about the complete command you are overwriting, and how they could eventually change over time. Adding this through an Environment variable also makes in possible to use a newer container that would be extending from the portainer image, without having to worry about commands. Can this please be reconsidered and reopened?. ",
    "tvollscw": "Please reconsider this.\nIn my use case, I have a docker compose file for the SaltStack that will allows you to scale how many Salt Minions that you want to deploy, but because Portainer doesn't have this feature, I would manually have to edit the docker-compose.yml instead of simply being able to add a cli flag and specify the number of minions that I desire within Portainer.. @deviantony I think I'm more interested in being able to add my own CLI Flag, not just seeing it available. If I were use the docker-compose command outside of Portainer, I would throw the flag and arguement as so: docker-compose up --scale minion=5. As far as I'm aware, I'm not able to add this flag within the Compose Stack option (in App Templates) in Portainer, so I'm left to modify the docker-compose.yml; it would be nice to have an option somewhere in Portainer where I could just enter that flag and the value. Not sure if i'm just missing something all-together.\nIt's just for my use-case, I'm hoping to change that value for that flag on demand, because some day I might want to spin up 5 Salt Minions, other days, I might just want one or two. It'd be nice to do that all within portainer instead of modifying the docker-compose file every time.. Whoops! It sounded like it could have been somewhat related.\nAlright, i'll post a new feature request. Thanks for the response.. ",
    "ndemoor": "Tapping in here, since I reached out to @marcosnils about this issue.\nI just tried running docker run -d -p 9000:9000 eisnerd/portainer -H tcp://ip10_0_65_3-2375.play-with-docker.com:80 locally to a fresh PWD environment and can confirm it works.\n\ud83d\udc4d \n. ",
    "marcosnils": "@ndemoor @deviantony this is awesome guys, thx for the quick feedback!.. ",
    "danielzzz": "great! thanks!. ",
    "sungiri88": "Could you please provide release date?. I configured HAProxy in my LB machine to switch traffic with /portainer to portainer container.\nWhat steps do I need to do in portainer machine to host it with /portainer?\nI pulled the latest docker image but still I css, JS files do not have /portainer in root url.\nI get a BIN file if I access with '/portainer'/ \n. @deviantony \nInstalled the latest version now.\nWhen i hit portainer with /portainer, I get a BIN file to download.\nWhat settings should I do ?. @deviantony \nSee the below config, where HA Proxy rule as path_beg /portainer. In the FAQ link, you have used domain name without any relative path.\n````\nfrontend www-http\n    bind    *:80\n    stats   enable\n    mode    http\n    option  http-keep-alive\nacl portainer   path_beg /portainer\n\nuse_backend     portainer       if portainer\n\nbackend portainer\n    stats   enable\n    option  forwardfor\n    option  http-keep-alive\n    server  portainer    192.168.2.57:9000 check\n````. ",
    "michaelmsm89": "@radamanth What version of portainer are you using? When I try with 1.12.1 and the exact nginx config above, I still receive a 404 for localhost/portainer/api/settings. @radamanth No worries, thanks for the reply. I am just trying the UI too, but it calls it's own API on startup which is when the problem happens.\nEdit: Seems like 127.0.0.1/portainer works for me but not localhost/portainer. Likely unrelated to Portainer and something to do with the way my swarm is configured.. ",
    "radamanth": "@michaelmsm89 Can't remember, I was testing it on virtual box, And I dont have  it anymore.\nI didn't try the API with that conf anyway, just the Portainer UI. ",
    "hollingsworthd": "@michaelmsm89 I had a similar problem. This config works for me:\n````\nupstream portainer {\n  server foo:9000;\n}\nserver {\n...\n  location /api/ {\n    proxy_http_version 1.1;\n    proxy_set_header   Connection \"\";\n    proxy_pass         http://portainer;\n  }\nlocation / {\n    proxy_http_version 1.1;\n    proxy_set_header   Connection \"\";\n    proxy_pass         http://portainer/portainer/;\n  }\nlocation /api/websocket/ {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_http_version 1.1;\n    proxy_pass http://portainer/api/websocket/;\n  }\n}\n````\nNote it happens to move the context root from /portainer to /. ",
    "toddb": "I had a similar problem using a reverse proxy (nginx) for ssl offloads (portainer v1.12.2, nginx v1.10.2).  My example allows me to use portainer on standard ports (https://portainer.example.com) in my internal network. Here is my config that hands off to portainer (192.0.2.10) on port 9000.\nWithout the second block /api/websocket/ the some of the xhr requests errored (500 Internal Server Error). [I have not tried to assess why, eg the http upgrade]\n```\nserver {\n    listen   80;\n    server_name portainer.example.com;\n    location / {\n      return 301 https://$server_name$request_uri;\n    }\n}\nserver {\n    listen   443 ssl;\nserver_name portainer.example.com;\nkeepalive_timeout    70;\n\nssl_certificate      /etc/nginx/ssl/portainer.example.com/cert.pem;\nssl_certificate_key  /etc/nginx/ssl/portainer.example.com/privkey.pem;\n\naccess_log  /var/log/nginx/portainer.example.com.access.log  main;\n\nlocation / {  \n    proxy_pass http://192.0.2.10:9000;\n    proxy_http_version 1.1;\n    proxy_set_header Connection '';\n    proxy_set_header Host $host;\n}\n\n\nlocation /api/websocket/ {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_http_version 1.1;\n    proxy_pass http://192.0.2.10:9000/api/websocket/;\n}\n\n}\n```. ",
    "bfritscher": "I get that, but why can't it also support a mode where default anonymous user is admin and has all rights? This way we could still use basic auth, or any other authentication system like  mod_shibboleth, .... Thanks, I get that you have a vision for a large product, with swarm support and more advanced use cases. My use case coming from ui-for-docker, is to have a simple gui for a single instance local docker. ui-for-docker and portainer solved this very nicely up to now. I can understand that this use case does not fit your product roadmap, but it would be a shame to lose the initial no-setup gui feature for a local instance. Thanks for the great work!\nBest regards,\nBoris\n. Hi, I am still using portainer (as I was using dockerui) as a dashboard for a single local docker instance. The security is done via a proxy with auth basic or no security if on my local dev machine. No peristent volume. \nIf we have to setup a volume and create local user accounts or sso so be it. But I always liked the fact to be able to start portainer without much config and have a nice visual dashboard for my docker instance even for local dev machine. I mainly use it to cleanup old containers and images and to check the logs of containers.. ",
    "t3chn0m4g3": "+1 -- please :o)\nI have the same problem regarding reverse proxy using NGINX. While I like the feature it would be great to see the \"--noauth\" option.\nThank you!. Prefer \"--no-auth\" as well.\nThank you :bowtie: . @deviantony Thank you!. Can you please describe how to activate? I am assuming ...\nENTRYPOINT [\"/portainer\",\"--no-auth\"]\nCorrect?. @ncresswell Thanks for the quick response! As soon as available would that be the correct way to set the flag?. Works great! Thank you very much \ud83d\ude04 . ",
    "geggo98": "Just an idea: instead of completely disable authentication for reverse proxies, it might be more useful to integrate with the external authentication.\nI see two simple possibilities:\n\nPortainer just believes the user handle given in a configurable HTTP header element (e.g. Multipass-Handle: USERNAME) with fallback to a default guest role when the element is missing.\nPortainer trusts the contents of a JSON Web Token (optinally with a configurable key for validating the token).\n\nVery likely there are some more possibilities.\nBoth approaches would be compatible the new role based access control (authorisation) and would just make it compatible with other authentication mechanisms.\nThe first point might be a nice alternative to the \"--no-auth\" with basically the same effort. The second one might be a nice pull request.\n@ncresswell @t3chn0m4g3 @bfritscher  What do you think?. ",
    "abrander": "\n\nPortainer just believes the user handle given in a configurable HTTP header element (e.g. Multipass-Handle: USERNAME) with fallback to a default guest role when the element is missing.\n\n\nThat would reflect how Grafana solve this problem. We use \n    proxy_set_header X-WEBAUTH-USER $remote_user;\n\nin our nginx proxy config for Grafana. It works very well.\n\n\nPortainer trusts the contents of a JSON Web Token (optinally with a configurable key for validating the token).\n\n\nWe actually tried working around the new authentication by setting a precomputed JWT-token in the Authorization header ;) We never got it working thou.\nFor the record, our preferred solution would be something like --noauth.. ",
    "mapio": "Same here\u2026\u00a0I'd like to use it behind nginx!. ",
    "johanfrick-mobenga": "+1. ",
    "Dids": "It should be noted that it's apparently -no-auth, not --no-auth.. @deviantony Just tried running the latest version on Docker Hub with --no-auth and authentication was still enabled. Switched to -no-auth and it worked.\nAlso, it's -no-auth here as well:\nhttps://github.com/portainer/portainer-docs/blob/404a43bbe43b481941e87ece970bb291b1fd7424/docs/source/configuration.rst. @deviantony Actually no, never mind. Obviously that doc commit was just a typo, and in my case I'm running it as a systemd service, which seems to be caching my previous config, so in reality --no-auth should indeed be working.. ",
    "Mohammadtrabelsi": "Disable internal authentication\n```\nversion: '2'\nservices:\n  portainer:\n    image: portainer/portainer\n    container_name: \"portainer-app\"\n    ports:\n      - \"9000:9000\"\n    command: -H unix:///var/run/docker.sock --no-auth\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - portainer_data:/data\n    restart: always\nvolumes:\n  portainer_data:\n```\nstart_portainer.sh\ndocker-compose -f docker-compose.yml down -v\ndocker-compose -f docker-compose.yml up --build. ",
    "gkovacs81": "Replaced the badges with input groups for a better view on small devices. I also reduced the text of the tag to avoid overlapping of input groups. Please review it!. OK, I will take a look on it soon.... I was happy to work with you!!!\nIf any problem just contact me and I will try to solve it!\nG\u00e1bor\n2017-03-20 12:02 GMT+01:00 Anthony Lapenna notifications@github.com:\n\nThanks @gkovacs81 https://github.com/gkovacs81 ! \ud83d\udc4d\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/421#issuecomment-287729320,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AOWxEHoEM-BAwcVhn8hCLu9JjCR63DEQks5rnlzQgaJpZM4LWjJC\n.\n. I can make the changes (rename section, skip/group empty layers, trim command) if you want.\nI chose the name \"Image history\" because its content is based on the \"docker history\" command. Please give it a better name!\n. Updated the section (Image layers), but the grouping is not totally clear. Could you please describe it more detailed?. I tried to update my branch from the \"develop\" branch but there are problems after the merge. I will fix it soon.... Sure, next week...\n\n\nj\u00fan. 17. 15:40 ezt \u00edrta (\"Anthony Lapenna\" <notifications@github.com\n):\n\n\n\n\n@gkovacs81 https://github.com/gkovacs81 sorry for the late update !\nCould you resolve this conflict? Seems that I cannot do it.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/425#issuecomment-309219050,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AOWxEFRkE6eKT50rmL1DGjfkFbMrswh5ks5sE-VrgaJpZM4LXL1P\n.\n. I'm not sure if I resolved the conflicts correctly, but it seems to work for me locally.. Cool! Thanks!!!. I found the problem, and made a fix here: https://github.com/gkovacs81/portainer/commit/cb44bd1c3ae2aefe8e7f94c27d1e24721f8b466a. \n",
    "aprcloud": "Workaround: add a full lowercase tag to the image.\nMaybe this causes: function prepareImageConfig in app/components/createContainer/createContainerController.js always force image config to lower case.\n(but i have no env to verify). ",
    "shantanugadgil": "Thanks for the consideration.. ",
    "dilshanraja": "In our ansible playbook, we just send a post request to http://host:port/api/users/admin/init with a json body of '{\"password\":\"admin123!\"}' after portainer starts up and that gets the job done at the moment from an automation standpoint. A CLI flag would be the better option in a future iteration. . ",
    "jeinwag": "Unix sockets can be forwarded over SSH connections. So I guess the idea is to enable portainer to automatically create SSH tunnels and forward the docker socket. E.g. given the url ssh://user@server:/var/run/docker.sock portainer would connect to /var/run/docker.sock  on the host server via an SSH tunnel. This would spare you from having to expose the docker API via TCP.\n. ",
    "DevStevo": "I support this request! Good idea.\nAny chance to reopen this request?\n@deviantony: Could you reopen this ticket? I think @jeinwag explained the use-case quite well.. ",
    "passuf": "I agree, exposing the Docker API via TCP can be quite fatal if done wrongly and is tricky to automate.\nAccessing an endpoint via SSH would simplify this a lot.. ",
    "fedya": "any news here?. Please reopen. ",
    "daniel-exsyn": "Docker supports this from from version 18.09+, the relevant docs:\n\nStarting with Docker 18.09, the Docker client supports connecting to a remote daemon via SSH:\n$ docker -H ssh://me@example.com:22 ps\n$ docker -H ssh://me@example.com ps\n$ docker -H ssh://example.com ps\nTo use SSH connection, you need to set up ssh so that it can reach the remote host with public key authentication. Password authentication is not supported. If your key is protected with passphrase, you need to set up ssh-agent.\nAlso, you need to have docker binary 18.09 or later on the daemon host.. \n",
    "metaa": "This makes a lot of sense. I don't wanna host a management tool for my docker containers publicly (sure I have a password in front of it, but still). With this feature I could just keep Portainer on my computer and use it.. ",
    "rafaismyname": "Had the same issue...\nMounting the socket from the host made it work:\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock --name portainer portainer/portainer. ",
    "SeriousM": "Where is docker.sock on windows? It seems you're running it on Linux\n. Oh, that sounds good. I've read the other issue as well but wasn't able to\nreproduce the error due the lacking development environment.\nMaybe it would help if I could see the current time of portainer in the\nlogs to help you.\n. sorry, but that didn't fixed the problem. I was trying to get the date in portainer but there isn't even a bash or something... very clean image btw :)\ncould you push a dev version where I could give you more information what's going wrong?. well, that's very strange! my system time is 31.12.2016 11:47 but docker info reports System Time: 2016-12-29T07:15:27.8156969Z. wtf?. alright, I found the solution now.. and the reason.\nsolution: restart docker for windows\nreason: I use hibernation and the timedrift is actually the time the machine was sleeping. VM doesn't get this information and therefore the big difference.\nthe code solution would be to calculate the expiration in a different way.. yes, it seems like that, except that I found the cause and no js errors are involved.. Please check if \"docker info\" datetime correlates with your real system\ndatetime. If not, restart docker host.\n. ",
    "jvandyke": "I ran like\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n\nAnd it did not work.. ",
    "petermetz": "@deviantony tried it on OS X with \n$ docker run -d -p 9000:9000 --name portainer -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:fix432\nand it works now, thanks.\nDocker version: 1.12.5, build 7392c3b\nOS: El Capitan v10.11.6 (15G1212) . ",
    "merbla": "No luck for me\ndocker run -d -p 9000:9000 --name portainer -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:fix432\nEnvironment Details\nOS: El Capitan v10.11.6 (15G1212)\nDocker version: Version 1.13.0-rc4-beta34.1 (14853). @deviantony @SeriousM yep a restart fixed the issue for me.\nSystem clocks were out.. ",
    "nicopeeters": "Hi guys, I got this error when using docker for windows and finally fixed it by going to hyper-v-management --> virtual machines --> right click MobyLinuxVM --> settings --> integration services and enabling the time sync checkbox in the services list. I hope this helps some of you.. ",
    "bloo": "Hi @deviantony - trying portainer via Docker for the first time and am also getting this problem.\nRunning portainer on a Swarm, 3 replicas, on AWS.\ndocker service create \\\n  --name portainer \\\n  --publish 9000:9000 \\\n  --replicas 3 \\\n  --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n  portainer/portainer \\\n  --admin-password \"'$(htpasswd -nb -B admin mypass | cut -d \":\" -f 2)'\"\nDate shift doesn't appear to be an issue between docker and the host VM:\n```\n$ uname -a\nLinux ip-172-31-25-45 4.8.0-46-generic #49-Ubuntu SMP Fri Mar 31 13:57:14 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n$ date\nThu Jun  1 20:36:12 UTC 2017\n$ docker run busybox date\nThu Jun  1 20:36:14 UTC 2017\n$ docker version\nClient:\n Version:      17.03.1-ce\n API version:  1.27\n Go version:   go1.7.5\n Git commit:   c6d412e\n Built:        Mon Mar 27 17:17:43 2017\n OS/Arch:      linux/amd64\nServer:\n Version:      17.03.1-ce\n API version:  1.27 (minimum version 1.12)\n Go version:   go1.7.5\n Git commit:   c6d412e\n Built:        Mon Mar 27 17:17:43 2017\n OS/Arch:      linux/amd64\n Experimental: true\n```\n. ",
    "bvisonl": "@yixiongz worked for me, thanks!. ",
    "yixiongz": "@bvisonl ?. ",
    "phann": "Hi @deviantony \nI'am still experience the same problem. \nI have docker installed inside Ubuntu VM (virtualbox), and I try to run portainer.\n```\ndocker run busybox date\nTue Feb 12 14:58:36 UTC 2019\ndocker run -v /etc/localtime:/etc/localtime:ro busybox date\nTue Feb 12 21:58:46 WIB 2019\ndate\nTue Feb 12 21:58:57 WIB 2019\n```\nmy location is at GMT+7\nUbuntu have the same System Time with my windows.\nI'v already tried several solution (nothing it works):\n- restart portainer\n- remove and redeploy portainer\n- restart ubuntu VM\nEnvironment Details\n-Ubuntu Xenial VM (virtualbox, bridge adapter network) running on windows 10\n-latest DockerCE (18.09.1)\n-latest portainer\n-chrome browser on windows\nSo anyone can help me how to fix this problem\nhow do I sync the time in container, what is the command?. ",
    "virse": "Hi there,\nsame issue here:\ndocker run busybox date                                                                                                                                         \nWed Feb 13 10:20:54 UTC 2019                                                                                                                                                             \n date                                                                                                                                                            \nMi 13. Feb 11:22:20 CET 2019                                                                                                                                                             \ndocker run -v /etc/localtime:/etc/localtime:ro busybox date \nWed Feb 13 11:22:48 CET 2019\nAny hints on that?\nBest regards. ",
    "red-crown": "cool cool\n. cool cool\n. ",
    "glennsarti": "Apologies, I forgot to add a repro case.\nSteps to reproduce the issue:\nRunning outside of a container on Windows Server 2016\n\nDownload portainer from github releases. Unpack.\nCreate a directory called c:\\ProgramData\\portainer\\data.\nRun portainer -H tcp://localhost:2375 --data=\"C:\\ProgramData\\portainer\\data\"\n\nConsole output:\n``` powershell\nPS C:\\tools\\portainer> md C:\\ProgramData\\Portainer\\Data\nDirectory: C:\\ProgramData\\Portainer\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----         1/2/2017   9:47 AM                Data\nPS C:\\tools\\portainer> .\\portainer.exe -H tcp://localhost:2375 --data=\"C:\\ProgramData\\Portainer\\Data\"\n2017/01/02 09:47:49 Starting Portainer on :9000\n```\nHowever, I would imagine the default data directory would be different when running under a container as opposed to outside of one.  e.g. Within a container, it may make more sense for C:\\data be the default as it's much easier to mount volumes there as opposed to C:\\Users\\.... or C:\\ProgramData  Not sure about this though.\nSo a full example might be;\ndocker run -v C:\\ProgramData\\Portainer:C:\\ProgramData\\Portainer -p 9000:9000 portainer/portainer:windows -H tcp://localhost:2375 --data=\"C:\\ProgramData\\portainer\"\nNote - I haven't tried this, it's just an example.. Note that the older docker machine, and recent Docker For Windows are still using a linux based container host running as a VM (Vbox/HyperV), whereas my original use case was for Windows Containers i.e. a Windows native docker engine (either as Windows Container or HyperV container). In that case yes, I imagine there would be some issues mounting a Windows based filesystem into a Linux VM running linux containers.. To be honest, I was ignoring the non-native Docker Hosts as it makes life complicated.. @theimpostor You're running Docker For Windows which is an Alpine Linux VM (which you can see in the docker info) i.e. the Container Host is a Linux platform therefore the docker.sock will work.  What this issue is about are using Docker with Windows Containers, which are on the Windows platform.. Yeah...it gets interesting with mixed platforms.  It will require documentation changes for sure.\nIt may be a case of there is a detection phase, as opposed to a strict default, when portainer starts without a specified host to connect to;\n\nnpipe://./docker_engine_windows  (ref https://stefanscherer.github.io/run-linux-and-windows-containers-on-windows-10/)\nnpipe://./docker_engine\nEnvironment Variable DOCKER_HOST\ntcp://localhost:2375. @deviantony I'd be able to test it, sure.  I would need an archive to download as I don't have a Go development environment.. In your example, you were trying to map a named pipe as a volume (-v) which won't work.. For reference - https://github.com/docker/docker/issues/23541. I verified that running portainer outside of a container works correctly.\n\nI am getting panic errors when running inside a container though:\n``` powershell\n docker run -it --rm -p 9000:9000 --name portainer portainer/portainer:pr459\npanic: runtime error: slice bounds out of range\ngoroutine 1 [running]:\npanic(0x7c92e0, 0xc042012020)\n        /usr/local/go/src/runtime/panic.go:500 +0x1af\nsyscall.Readlink(0x83a1da, 0x7, 0xc04213ee80, 0x80, 0x80, 0x0, 0x0, 0x0)\n        /usr/local/go/src/syscall/syscall_windows.go:1031 +0x3a9\nos.Readlink(0x83a1da, 0x7, 0xa1bac0, 0xc04202da40, 0x0, 0x0)\n        /usr/local/go/src/os/file_posix.go:21 +0x94\nos.Stat(0x83a1da, 0x7, 0xc04218dd38, 0x41048f, 0x20, 0x7e3560)\n        /usr/local/go/src/os/stat_windows.go:72 +0x9e\ngithub.com/portainer/portainer/file.createDirectoryIfNotExist(0x83a1da, 0x7, 0x1ed, 0xc04220b008, 0x7)\n        /go/src/github.com/portainer/portainer/file/file.go:115 +0x40\ngithub.com/portainer/portainer/file.NewService(0x83a1da, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0)\n        /go/src/github.com/portainer/portainer/file/file.go:37 +0x121\nmain.main()\n        /src/cmd/portainer/main.go:32 +0x177\n```\nBut running with a specific data directory worked.  Odd.\ndocker run -it --rm -p 9000:9000 --name portainer portainer/portainer:pr459 --data=c:\\somewheredata\ndocker info\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 8\nServer Version: 1.12.2-cs2-ws-beta\nStorage Driver: windowsfilter\n Windows:\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: nat null overlay\nSwarm: inactive\nDefault Isolation: process\nKernel Version: 10.0 14393 (14393.479.amd64fre.rs1_release.161110-2025)\nOperating System: Windows Server 2016 Standard\nOSType: windows\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 2.073 GiB\nName: WIN-07K1J1J7NLN\nID: YYSY:Q25P:W2C5:RFIS:WK2N:5HXY:BU4W:EZVJ:K73W:5WLZ:PJLE:JAHZ\nDocker Root Dir: C:\\ProgramData\\docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nInsecure Registries:\n 10.0.0.0/8\n 127.0.0.0/8\nLive Restore Enabled: false\n. Confirmed that using only \n...  --name portainer portainer/portainer:pr459 --data=c:\\somewheredata -H npipe:////./pipe/docker_engine\ndoes not work.\nTo be expected though as the named pipe is not exposed into the container.\n. Looks like IPC and named pipes is a nice to have in the Windows platform space\nhttps://github.com/docker/docker/issues/25961. As a minor note. I couldn't add a npipe style syntax in the Endpoints section in the UI as it assumes a hostname.  I assume this may come later, but for now only TCP based connections can be added via the UI.. @theimpostor (reposting from 450) You're running Docker for Windows which is a Linux Container Host.  This Pull Request is for Windows Container hosts.. ",
    "theimpostor": "I think there is some confusion here. With Docker for Windows v1.12.5, bind-mounting /var/run/docker.sock works on my system.\nI.e. from a windows command prompt, if I run: \ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nI am able to open portainer and 'Manage the Docker instance where Portainer is running':\n\n(the warning presented here seems wrong)\nHere is the Engine overview after logging in:\n\nEdit: add docker info:\nDocker info:\n```\nC:\\WINDOWS\\system32>docker info\nContainers: 5\n Running: 1\n Paused: 0\n Stopped: 4\nImages: 95\nServer Version: 1.12.5\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 135\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null host overlay\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.4.39-moby\nOperating System: Alpine Linux v3.4\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 7.775 GiB\nName: moby\nID: ...\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): true\n File Descriptors: 19\n Goroutines: 27\n System Time: 2017-01-10T18:28:27.0608322Z\n EventsListeners: 0\nRegistry: https://index.docker.io/v1/\nWARNING: No kernel memory limit support\nInsecure Registries:\n 127.0.0.0/8\n```. I think there is some confusion here. With Docker for Windows v1.12.5, bind-mounting /var/run/docker.sock works on my system.\nI.e. from a windows command prompt, if I run: \ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nI am able to open portainer and 'Manage the Docker instance where Portainer is running':\n\n(the warning presented here seems wrong)\nHere is the Engine overview after logging in:\n\nEdit: add docker info:\nDocker info:\n```\nC:\\WINDOWS\\system32>docker info\nContainers: 5\n Running: 1\n Paused: 0\n Stopped: 4\nImages: 95\nServer Version: 1.12.5\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 135\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge null host overlay\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nSecurity Options: seccomp\nKernel Version: 4.4.39-moby\nOperating System: Alpine Linux v3.4\nOSType: linux\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 7.775 GiB\nName: moby\nID: ...\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): true\n File Descriptors: 19\n Goroutines: 27\n System Time: 2017-01-10T18:28:27.0608322Z\n EventsListeners: 0\nRegistry: https://index.docker.io/v1/\nWARNING: No kernel memory limit support\nInsecure Registries:\n 127.0.0.0/8\n```. @glennsarti got it. I think we need a separate issue maybe, because the portainer documentation and UI seems to assume that if you are on Windows you must be running Windows containers - when the default installation of Docker on Windows is all setup to run Linux containers.. @glennsarti got it. I think we need a separate issue maybe, because the portainer documentation and UI seems to assume that if you are on Windows you must be running Windows containers - when the default installation of Docker on Windows is all setup to run Linux containers.. ",
    "jhagege": "@kingjerod +1. did you succeed ? thanks. ",
    "kingjerod": "@cyberjoac I did not. I'm might upgrade my version of Windows to 10 (don't really want to) and try again with native Windows Docker.. ",
    "dazinator": "For portainer running on a windows host, Is it not as simple as setting the docker host environment variable:\nDOCKER_HOST: tcp://host.docker.internal:2375\n?. @deviantony - the only way I could get this to work on a windows server docker host was to start portainer running, and then browse to it, create the admin user account, and then add a \"remote\" docker via the UI, entering the ip address of the host listening on port 2375. Whilst not particularly taxing, it would be nice to have it similar to Linux hosts where you can initialse the container so that it it is already set up to see it's local host by default.. The command to initialise portainer uses the sock file which doesn't work on windows server 2016. If there were initialisation options to also use a tcp connection then that might be a good workaround - because then we could initialise it with tcp://host.docker.internal:2375. ",
    "nasskach": "This PR seems to be really promising. It would be nice if we also had a nice way to see the update progression of a service (with an automatic data refresh for example). . ",
    "morph027": "Deployed it last week in our dev swarm, works like charm so far :+1: . Ok, console colors are fairly easy: just include xterm.css\nI'm going to prepare a PR for this..... Ah, i see...already works in console....then i'll have a look at the logs.. You'll need an application which sets the colors. Can you try ls -la or htop? Which OS is your container running?. Did nothing special, just catch me if you have questions.. ping ;). I'm ok with this, as long as i get colored terminal :grin: . ",
    "piotrminkina": "In our case it will be very helpful feature :) We have two endpoints (one to Docker with Swarm Mode as default endpoint and second to Docker with Swarm Standalone). Thanks to this feature we will be able share links to containers scheduled on any Docker Node.\nOur example usage with Jenkins:\nhttps://www.awesomescreenshot.com/image/3007031/017c6a8d2406f7415c13decbd2e7b510. ",
    "wahmedswl": "Hi,\n   I really don't know if it helps but i would like to add that previously running portainer on windows never worked as it was not able to pull up data.\nBut, after checking this article http://stackoverflow.com/questions/36765138/bind-to-docker-socket-on-windows and running portainer using\ndocker run -d -p 9000:9000 -v //var/run/docker.sock:/var/run/docker.sock portainer/portainer\nI can now run portainer fine while it also given me Information message when i used 1st option about /var/run/docker.sock.\nI have docker version\n```\nPS C:\\Windows\\system32> docker version\nClient:\n Version:      1.13.0-rc5\n API version:  1.25\n Go version:   go1.7.3\n Git commit:   43cc971\n Built:        Thu Jan  5 03:07:30 2017\n OS/Arch:      windows/amd64\nServer:\n Version:      1.13.0-rc5\n API version:  1.25 (minimum version 1.12)\n Go version:   go1.7.3\n Git commit:   43cc971\n Built:        Thu Jan  5 03:07:30 2017\n OS/Arch:      linux/amd64\n Experimental: true\n```\n. ",
    "nskalimuthu": "Thanks,\nStart Portainer: docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nAfter I have login to Portainer Dashboard and choose to manage a remote docker instance\nthen it was getting mes \"Failure Unable to dashboard data\"\nI have seen portainer logs\nEndPoint: remote.host:2375\ndocker logs ff7884114a12\n2017/01/05 05:49:01 Starting Portainer on :9000\n2017/01/05 05:49:44 http error: User not found (code=404)\n2017/01/05 05:50:01 http error: Endpoint not found (code=404)\n2017/01/05 05:50:01 http error: Endpoint not found (code=404)\n2017/01/05 05:52:39 http: proxy error: dial tcp remot.host:2375: getsockopt: connection refused\n2017/01/05 05:52:39 http: proxy error: dial tcp remot.host:2375: getsockopt: connection refused\n2017/01/05 05:52:39 http: proxy error: dial tcp remot.host:2375: getsockopt: connection refused\n2017/01/05 05:52:39 http: proxy error: dial tcp remot.host:2375: getsockopt: connection refused\n2017/01/05 05:52:39 http: proxy error: dial tcp remot.host:2375: getsockopt: connection refused\n2017/01/05 05:52:39 http: proxy error: dial tcp remot.host:2375: getsockopt: connection refused\nNote: I have replaced original IP to remot.host on logs\nThanks. I have ran command Docker CLI on local machine and also I have opened on port 2375 and 9000 globally on remote host machine in security groups. below is the details,\ndocker -H remote.host:2375 info\nCannot connect to the Docker daemon. Is the docker daemon running on this host?\ntelnet remote.host 2375\nTrying remote.host...\ntelnet: Unable to connect to remote host: Connection refused\nremote host:\nnetstat -nap | grep :2375\nnetstat -nap | grep :9000\ntcp6       0      0 :::9000                 :::*                    LISTEN      6846/docker-proxy\n. Please do check it out this link https://docs.docker.com/engine/reference/api/docker_remote_api/. Hi,\nHow to start dockerd daemon on host startup by default.. how to start dockerd daemon instead of using docker process manager (/etc/init.d/docker) as via dockerd -H unix:///var/run/docker.sock -H tcp://192.168.59.106 with on port 2375 on the host by default.\nI have changed the daemon startup options in /etc/default/docker file, as I have added line but it didn't work\nDOCKER_OPTS=\"dockerd -H unix:///var/run/docker.sock -H tcp://192.168.59.106\"\ndocker info: Server Version: 1.12.6\nOS: Ubuntu 14.04.5 LTS. @deviantony still I can't resolve it an issue. I will explain once again prob, if the Docker is running on process mode, then the Portainer isn't able to fetch the container details. It has to work for dockerd daemon only. means it must be work for \"dockerd -H unix:///var/run/docker.sock -H tcp://IP\" only\nI can able start dockerd daemon manually, and the portainer is working fine. So I would need to know how to start dockerd on the host by default.\nplease correct me if I did anything wrong. Thank you\ndocker info: Server Version: 1.13.1\nOS: Ubuntu 14.04.5 LTS\n. @deviantony I have added startup entry dockerd in /etc/default/docker and the portainer is working fine now. I would need to know one more thing the container Stats(CPU, Memory, Network) usages are not showing on the dashboard and showing processes(only one pid) .\nMay I know about it or would need to have to add or enable for any parameters from docker or portainer end?. ",
    "kdekooter": "How does this relate to https://www.lvh.io/posts/dont-expose-the-docker-socket-not-even-to-a-container.html?. ",
    "brecke": "I had this same problem and tried using the IP address directly, instead of the hostname, and it now works. It's strange because I can ping to it and use telnet using the hostname. Anyway, hope it helps.. ",
    "AndrewErman": "@deviantony HI!\nI am having the same problem. \nI have two nodes - \"manager\" and \"node1\" connected into a swarm. Both created in OpenStack. Both with all open ports for all connections. Both running Centos7. Both created via docker-machine. Both without firewalls.\nPortainer is installed on \"manager\". It is working correctly. Showing containers, networks and \"node1\" in swarm.\nBut if i try to connect \"node1\" as an endpoint - i'm getting into the same situation as @nskalimuthu \n. ",
    "arno01": "Not sure if this helps, but in my case forcing the HTTP/1.1 proxy_http_version 1.1; helped.\nWith HTTP/2.0 portainer does not seem to work.\nMy working config:\n```\n  location / {\n    proxy_pass $upstream_endpoint;\n# portainer is working only with HTTP/1.0\nproxy_http_version 1.1;\nproxy_set_header Upgrade $http_upgrade;\n# You should always do \"upgrade\"\nproxy_set_header Connection \"upgrade\";\n\nproxy_set_header Host $host;\nproxy_set_header X-Real-IP $remote_addr;\nproxy_set_header X-Forwarded-Proto $scheme;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n}\n```. @x3r10n make sure you allow port 2375/tcp only to your instances, since, anyone can gain a full control over your system if 2375/tcp is exposed to them.. ",
    "woern123": "for me this works:\nadding -H tcp://192.168.178.11:2375 behind the ExecStart-Entry in /etc/systemd/system/multi-user.target.wants/docker.service :\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network.target docker.socket firewalld.service\nRequires=docker.socket\n[Service]\nType=notify\nExecStart=/usr/bin/dockerd -H fd:// -H tcp://192.168.178.11:2375\nExecReload=/bin/kill -s HUP $MAINPID\nLimitNOFILE=1048576\nLimitNPROC=infinity\nLimitCORE=infinity\nTasksMax=infinity\nTimeoutStartSec=0\nDelegate=yes\nKillMode=process\n[Install]\nWantedBy=multi-user.target\nafter that reload systemd:\nsystemctl daemon-reload\nand then:\nservice docker restart\nediting the entrys in /etc/default/docker or /etc/init/docker.conf is not working\ni think this is because of the most linux-systems not using the old init.d anymore\nattention: you have to do this again after an update!\nit seems that the systemd-docker-conf is replaced after an update with an 'clean' one. ",
    "x3r10n": "Hi everyone, I have the same issue as above. I have a swarm with 3 nodes I can see all the node in the cluster overview but cant connect to the endpoint.\nI can connect using docker command from any node to any other nodes.\nMy problem seem to be related with the network that the portainer container is using. It is configure to use the bridge network and I cant change it to use the host network.\nps. I was able to deploy a stack using portainer UI \nAny idea ? . From the host (docker-01 ;10.0.20.10) I can use docker -H docker-02 info\nand it work.\nAnd I'm pretty sure the portainer container can't communicate with others\nhost.\nIs there a way to start portainer on the host network instead of a bridge\nnetwork?\nOn Nov 23, 2017 4:24 AM, \"Anthony Lapenna\" notifications@github.com wrote:\nHi @x3r10n https://github.com/x3r10n\nWhat command do you use to connect via the docker command to the other\nnodes? Are you sure the bridge network on that host can access these other\nnodes?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/460#issuecomment-346566345,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AEUIWTjtFibjtfisdBsE-Vj_FRInWpjfks5s5TnagaJpZM4LaXLU\n.\n. Container wont start if I use the --net host flag. Usually, On what network the portainer container be connected to ?. Yes your right it should work with bridge, I created a Ubuntu container joint to the bridge network and I can ping my other docker hosts. Thanks for your help!. I found the issue ! It was the way docker was started. \nI ended up whit this config under Ubuntu 16.04 :\n```\nInside file /lib/systemd/system/docker.service change:\nExecStart=/usr/bin/dockerd fd://\nwith\nExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375\nInside file /etc/init.d/docker change:\nDOCKER_OPTS=\nwith\nDOCKER_OPTS=\"-H tcp://0.0.0.0:2375\"\n```. +1 for global performance, would love to see a filter per stack / services too.. My last 24h for a single agent : \n\nI'll try the fix1991 and let you know !\n@chiptus Is it ok to use a ressource limit configuration or we might run in bigger issue ?\nresources:\n        limits:\n          cpus: '0.5'\n          memory: 256M\n. ",
    "bondan13": "ubuntu 16.04\nInside file /lib/systemd/system/docker.service change:\nExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375\nand run:\n\npkill docker\nsystemctl daemon-reload\nsystemctl start docker.service\ndocker-compose up\n. \n",
    "pmithil7": "I tried the above recommendations but then i cannot run any docker container or any docker commands. It just hangs after trying:\nInside file /lib/systemd/system/docker.service change:\nExecStart=/usr/bin/dockerd fd://\nwith\nExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375\nInside file /etc/init.d/docker change:\nDOCKER_OPTS=\nwith\nDOCKER_OPTS=\"-H tcp://0.0.0.0:2375\"\n. ",
    "mrlioncub": "Correct on Debian/Ubuntu/... in /etc/default/docker\nDOCKER_OPTS=\"-H tcp://0.0.0.0:2375\"\nand create /etc/systemd/system/docker.service.d/opts.conf\n[Service]\nEnvironmentFile=-/etc/default/docker\nExecStart=\nExecStart=/usr/bin/dockerd $DOCKER_OPTS -H fd://. ",
    "man4j": "\"all workers can run and expose only the Linux socket\"\nWhat if manually configure worker to open TCP/IP port? For example in docker.socket: \n[Socket]\nListenStream=0.0.0.0:2376. I dont understand. How can I see all containers in cluster now? And why dont implement this feature based on manually worker configuration? Yes, it's not very easy, but at least it probably will work.. Yes, of course users must enable TCP socket + TLS for this feature ) Why not? Or another way - configure servers to access each other across ssh without passwords (using keys). Yes, it's not very simple, but very important for production usage of Portainer.. ",
    "gshively11": "here's a docker entrypoint script that automatically wires up the endpoints for all the nodes in a docker swarm. if swarm nodes change, just restart the container and it'll update the endpoints.\n```\n!/bin/sh\nclear out any previous endpoints, just in case\nrm -rf /endpoints\nmkdir -p /endpoints\nmanager_num=0\nworker_num=0\niterate over swarm node ips to generate external-endpoints file\nfor addr in $(curl -s --unix-socket /var/run/docker.sock http://v1.24/nodes | jq -r 'map(\"(.Spec.Role)|(.Status.Addr)\") | .[]'); do\n  if test \"${addr#manager}\" != \"$addr\"; then\n    manager_num=$((manager_num+1))\n    IP=${addr#manager|}\n    cat << EOF > /endpoints/manager-$manager_num.json\n{\n  \"Name\": \"manager-$manager_num\",\n  \"URL\": \"tcp://$IP:2376\",\n  \"TLS\": true,\n  \"TLSSkipVerify\": true,\n  \"TLSCACert\": \"/.secrets/$TLS_CA_CERT\",\n  \"TLSCert\": \"/.secrets/$TLS_CERT\",\n  \"TLSKey\": \"/.secrets/$TLS_KEY\"\n}\nEOF\n  elif test \"${addr#worker}\" != \"$addr\"; then\n    worker_num=$((worker_num+1))\n    IP=${addr#worker|}\n    cat << EOF > /endpoints/worker-$worker_num.json\n{\n  \"Name\": \"worker-$worker_num\",\n  \"URL\": \"tcp://$IP:2376\",\n  \"TLS\": true,\n  \"TLSSkipVerify\": true,\n  \"TLSCACert\": \"/.secrets/$TLS_CA_CERT\",\n  \"TLSCert\": \"/.secrets/$TLS_CERT\",\n  \"TLSKey\": \"/.secrets/$TLS_KEY\"\n}\nEOF\n  fi\ndone\ncombine all the json files into one file that portainer understands\njq --slurp '[.[]]' /endpoints/*.json > /endpoints/all.json\nexec /portainer --external-endpoints /endpoints/all.json\n``\njust need to mount a volume for/var/run/docker.sockand run portainer on a manager node for this to work.  also needjqandcurl` packages installed.\nalso :+1: for adding this ability natively in portainer :). I would love for PR #945 to land soon, if that's what it takes to be able to conditionally disable tls verification. we're blocked by this one.. thanks @deviantony !  we did a partial workaround for now by only deploying portainer to the manager nodes, mounting the docker socket as a volume, and only having a single endpoint.  but it would be definitely nice to have each node as an endpoint.  appreciate your efforts on this project.. @deviantony yea i'll try to get to it in the next day or two, thanks!. Having to put out some fires, probably won't get to this until next week sometime, sorry. @deviantony I should be able to get to this later today or tomorrow.. Is there anywhere to grab a release artifact for that PR (linux-amd64.tar.gz)?  We don't use the portainer images directly, we download the release artifact from github and set it up in our own image. I want to explain why we're doing that, but I don't recall off the top of my head :). I'm getting invalid credentials when I try to login with the pr1173 build.  Using --admin-password.  Confirmed it works as expected with the 1.14.0 release.. {\n     \"Name\": \"manager-1\",\n     \"URL\": \"tcp://scrubbed:2376\",\n     \"TLS\": true,\n     \"TLSSkipVerify\": true,\n     \"TLSCACert\": \"scrubbed\",\n     \"TLSCert\": \"scrubbed\",\n     \"TLSKey\": \"scrubbed\"\n   }\nStill getting this in logs (and UI throws errors)\n2017/09/12 20:56:25 http: proxy error: x509: cannot validate certificate for scrubbed because it doesn't contain any IP SANs\nIs that endpoint config correct for skipping TLS verification, or am I doing something wrong?. @deviantony yes i am, and I'l try to narrow down what might be causing the --admin-password issue on my side. @deviantony Looks like it works!  Also, the admin password issue, that was my bad.  The help text on the input says admin, and it's just dark enough on my screen to look like the text defaulted to admin (which it seems to do on the release image? that could just be browser autocomplete though).  Might want to make the help text styling lighter to avoid future confusion.  Thanks for getting this change moving!. Hmmm, I can't reproduce this anymore either.  I upgraded to 1.14.2 since originally submitting this issue, but I doubt that's related. Sorry for the false alarm, closing this.. ",
    "sentinelcross": "This would really bring Portainer on par with UCP - the fine-grained ACLs for services and thereby the tasks and their logs/console - making it incredibly useful for the dev teams. \ud83d\udc4d \n. ",
    "slotlocker2": "Tried @bvis's solution and it works perfectly well, albeit an issue with nodes re-registering with a different ID which throws off the ACLs a bit. But as a POC it works very well with the node auto registration and routing the commands through the remote Docker sock. Guess, can have the container view features on tasks with this system in place.. ",
    "develar": "Any chance that this feature will be implemented? Maybe donation, say 200 euro, will make the dream closer?. Docker Swarm is not reliable and so user need management solution that will show all issues in our cluster. Right now portainer doesn\u2019t provide such unified overview dashboard but at least provides different pages to collect such information in various places. Of course, centralized logging is still needed and portainer cannot replace e.g. papertrail, but ability to see all containers and it\u2019s IP is important.\nFor example, due to numerous issues of VIP service discovery I need to see IP addresses of all tasks in the stack. And portainer cannot help me - I have to use Docker CLI because of this issue.\nAs easy workaround rancher can be used instead of portainer, but rancher 2 will use k8s and... I am totally sure that k8s will solve all my issues with docker swarm but also adds some new one :) so, I like what portainer does.. @jfgrissom Already donated by me. I think there is no top bound for donations ;). I think it should be default behaviour, because otherwise it is not expected that orphan services will be still running. Anyway, option should be :). ",
    "jfgrissom": "Has this already been funded?\nI would love this feature and will happily contribute 10% the of the funds for this.\nAnyone else willing to join in?. Wow... has it been over a month since I looked at this! \nCan I send you a 1.5 LTC? If that works please provide a public address and I'll send it out.. @ncresswell - Thanks for sharing that. I'll send it out this evening. \n. @ncresswell - I shot you guys 1.76943 LTC.\nHere is the transaction ID.\nhttps://live.blockcypher.com/ltc/tx/d6b249e78462b2bdf585290bf11be464853722a2e7d7a6383b6e9ecd21c55514/\nThanks or all your hard work on this project!\n. ",
    "wallezhang": "I just found the amazing feature discussion. I write a agent program for portainer recently, actually it is a proxy, forward portainer request to docker socket. So i can run the agent as a container and add a endpoint on portainer UI. Automatically request a portainer api to add a endpoint when agent starting is the next plan.. Thanks for your reply. I will follow the discussion and expect the new release to solve #461 \ud83d\ude04 . ",
    "wernerbarnard": "Hi - what is the status on this issue?. Sorting by timestamp would be great / make sense.. Hi @deviantony - thanks, that solution is fine - as long as it applies to a service as well as a stack, and not only a stack as #1865 might indicate. Just adding a +1 as I get the same issue, I just switched from portainer-endpoint to portainer_agent and get this issue.\nWorks from the container detail page.\nFails with 404 (no header) from the container list page.\nTechnical details:\nportainer version: 1.18.1. Ah - thanks @deviantony - mine was still on 1.19.2. (Perhaps a message about updating somewhere would be a good idea?). ",
    "aiminickwong": "Any status about this issues?. @WTFKr0 @deviantony @ncresswell \nAs what portainer has done now, it very strong enough, and I think it's time to think about more easy to people and more perfect to useage, and especially the degree of visuality of the friendly, this founction it's very right, and can go on doing and make it it to next version goal?. +1. This feature suggestion is good but I'm concerned about the performance issues of uploading large file images.. that's a great goal!\nFor windows socket I found a little interesting article\uff1a\nhttps://blogs.msdn.microsoft.com/commandline/2017/12/19/af_unix-comes-to-windows/\nhttps://blogs.msdn.microsoft.com/commandline/2018/02/07/windowswsl-interop-with-af_unix/. Wish in 1.20.0. @deviantony  \"I believe that the first step would be to display a notification inside the app when a new version is available.\"\nIt's a great step, and second  I think if remove the actual container  then let the site cache may js or html file to hold the webpage (user's can not do anythings), give user a notice hold page, few time's (seconds or minutes as defaults ) later, auto refresh page , but I don't know whether it can work. \nSome times, some hardware device just like a home router device, if upgrade the firmware, the device will be reboot, and it give a hold page for use after device reboot and restore the normal page, but some time's if wait too long time may be failed, then  user should refresh the page manually.\n. Alpine cannot used on windows without hyper-v mode include a linux vm.\n@sudipto92. I think the correct display result should be more than the screen should automatically wrap.. @deviantony \nin \"Container details\" page it also with the same issue.. @olljanat  some monitors and service discovery, Load balancing proxy, etc.. \"-v portainer_data:/volume1/docker/portainer_data/portainer \"\nshould be\n\"-v /volume1/docker/portainer_data/portainer:/data\". @olljanat this features' goal is to simplify user operations and make them more friendly. The most critical issue is that it enables automatic discovery and registration of services, rather than simply providing templates and calling multiple interfaces for user operations. I believe that for most users, deploying only templates is very unfriendly. Platforms like docker cloud and rancher have provided such functionality very early on. We can't just think about it from our own perspective. Many people don't know much about technology. Portainer's original intention is to simplify the technical difficulty of users, and it is easier to get started and use, but not use templates to sove thire problem.. @deviantony   form  commit  b1227b17e15165bab0ccc22e22d8f8684f63c5ce\ngo build darwin still with error:\ngithub.com/portainer/portainer/http/proxy/manager.go:54:29: manager.proxyFactory.newLocalProxy undefined (type *proxyFactory has no field or method newLocalProxy). form  b1227b1\nerror:\ngo/src/github.com/portainer/portainer/http/handler/websocket/websocket_exec.go:186:20: undefined: createWinDial\nFixed.. Also wanna add  summarize information of the CPU usage. @deviantony \nMy stack yml file:\n\nversion: '3.2'\nservices:\n  agent:\n    image: portainer/agent:latest\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.agent\n      # AGENT_PORT: 9001\n      LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - agent_network\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\nportainer:\n    image: portainer/portainer:develop\n    command: -H tcp://tasks.agent:9001 --tlsskipverify\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - portainer_data:/data\n    networks:\n      - agent_network\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\nnetworks:\n  agent_network:\n    driver: overlay\n    attachable: true\nvolumes:\n  portainer_data:\n\nAnd I used command : \ndocker stack deploy --compose-file=./stack.yml portainer\nCreating network portainer_agent_network\nCreating service portainer_portainer\nCreating service portainer_agent\nOther info:\ndocker network ls\nNETWORK ID          NAME                      DRIVER              SCOPE\n1d62dd7f661c        bridge                    bridge              local\nbce7c95f5e3c        docker_gwbridge           bridge              local\nf06c29699ecf        host                      host                local\n1e5wrtklzh0y        ingress                   overlay             swarm\n947ec564477a        none                      null                local\nu2pf6k1bxj2a        portainer_agent_network   overlay             swarm\ndocker volume ls\nDRIVER              VOLUME NAME\nlocal               7db64c3c651e0b9cd6a0d8fd9a7b196b87f735d4121b91b9b416628c44f7cbd2\nlocal               portainer_portainer_data\ndocker ps -a\nCONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS              PORTS               NAMES\n676f77b281c8        portainer/portainer:develop   \"/portainer -H tcp:/\u2026\"   20 seconds ago      Up 14 seconds       9000/tcp            portainer_portainer.1.q0nodw3tryyh2pe2nw1exmcov\ndd2bfc36fb76        portainer/agent:latest        \"./agent\"                23 seconds ago      Up 22 seconds                           portainer_agent.tka2hlmo81vcpjc9hmz310b9k.cfufmfzc370jis7vrib25ff4z\ndocker -v\nDocker version 18.03.1-ee-3, build b9a5c95\ncat /etc/issue\nUbuntu 16.04.3 LTS \\n \\l\nuname -r\n4.4.0-112-generic\nEngine Details\nVersion: 18.03.1-ee-3\nVolume Plugins: local\nNetwork Plugins: bridge, host, macvlan, null, overlay\nagent logs:\n2018/10/11 04:05:30 [DEBUG] - Agent details: map[Mode:swarm NodeRole:manager AgentPort:9001 NodeName:cecos-caas]\n2018/10/11 04:05:30 [DEBUG] - Using cluster address: tasks.agent\n2018/10/11 04:05:30 [DEBUG] - Using advertiseAddr: 10.0.0.5\n2018/10/11 04:05:30 [DEBUG] - Generating TLS files...\n2018/10/11 04:05:30 [DEBUG] - Using agent port: 9001\n2018/10/11 04:05:33 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.0.5\n2018/10/11 04:05:33 [INFO] serf: EventMemberJoin: dd2bfc36fb76 10.0.0.5\n2018/10/11 04:05:33 [DEBUG] - Will join cluster via: tasks.agent\n2018/10/11 04:05:34 [INFO] - Starting Portainer agent version 1.1.2 on 0.0.0.0:9001 (cluster mode: true)\n2018/10/11 04:05:37 http error: Missing Portainer public key (err=Portainer public key unavailable) (code=403)\nportainer logs:\n2018/10/11 04:05:37 Templates already registered inside the database. Skipping template import.\n2018/10/11 04:05:38 Starting Portainer 1.20-dev on :9000\n2018/10/11 04:05:57 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2018/10/11 04:05:57 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2018/10/11 04:05:57 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2018/10/11 04:05:57 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2018/10/11 04:06:00 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n. @deviantony \nThe same way When used version 1.19.2, without this problem.. ",
    "chrisalex2": "I am also eagerly awaiting this feature.. ",
    "Dean-Christian-Armada": "Hi should expect to see all the containers of my Swarm Cluster in portainer when I check the \"Containers\" tab?. @deviantony. Sorry not really \"Update out of sequence\" but \"Unable to retrieve services\". Everything is getting Slow from the \"dashboard\", \"listing the services\", \"details of a service\".. Almost everything. I tried switching to 1.17.1  now I am seeing below.. Did something change?\n\n. I deleted my portainer_agent and portainer service. Re-create it but thus time the image my portainer is portainer/portainer:1.17.1. It came back and I think it's faster as well. @deviantony , yes I am using using portainer 1.17.1 with the latest agent. @deviantony , yes I definitely that it is faster.\n1.17.1\n\ncurrent latest\n\nTo be honest the current latest tag improved. 2 weeks ago, it often returns 504 Bad Gateway. ",
    "coreybutler": "I have made it as far as getting the login screen up and running by using a URL rewrite, so I can access portainer via https://mydomain.com/portainer. However; it fails at this point:\n\nThe UI is attempting to make calls to the following:\nGET https://mydomain.com/api/settings 503 ()\nGET https://mydomain.com/api/users/admin/check 503 ()\nSince all the code is minified, the stacktrace just shows:\n\nTo make it work with a root path like /portainer, the JavaScript needs to be modified to use relative URL's, i.e. referencing ./api/settings instead of https://mydomain.com/api/settings.At quick glance, I can't tell if this is generated by the Go web handler or if it's in the JavaScript services (or elsewhere). \nUltimately the requests need to look like:\nGET https://mydomain.com/portainer/api/settings\nGET https://mydomain.com/portainer/api/users/admin/check\nHopefully the portainer maintainers can address this.. ",
    "ryanjoachim": "docker run -d -p 9000:9000 portainer/portainer\n. Yes I did.. If it helps, I receive a similar message on all of the tabs (images, networks, etc).. That is what I needed. Thank you!\nThis project is the only thing keeping me using Dockers. Great job.. As a quick note - I have to run that each time I restart my server. Is that normal?. ",
    "ernest-okot": "Hello,\nAm getting the same error, using docker-compose to start portainer. Here is my compose file\nweb:\n  image: 'portainer/portainer'\n  restart: always\n  environment:\n    - VIRTUAL_HOST=portainer.mydomain.com\n  volumes:\n    - './data:/data'\n    - '/var/run/docker.sock:/var/run/docker.sock'\nAm using a reverse proxy (nginx-proxy) to expose portainer on a sub domain over https.\nAlso I should point out that it was working before I started using the reverse proxy. Can't figure out why that would cause it to fail\nBest. @deviantony thanks for the reply\nI had a look at the link, the configuration isn't very different from what I have\nAlso, I've observed from chrome devtools that some API calls were successful while others weren't. Take a look, perhaps it may be useful\n. @deviantony Actually I was wrong... changing the reverse configuration as stated here solved the issue\nThanks a bunch. ",
    "samratBasra": "docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nthis will work for portainer UI. . ",
    "aurelien-git": "docker run -d -p 9000:9000 --restart always --name portainer -v /opt/portainer-data:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nWorks like a charm on archlinux remote server. Thanks!. :flushed:. ",
    "tufand": "docker run -d -p 9000:9000 --restart always --name portainer -v /opt/portainer-data:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer \nyep ! thanks for tricks. +1Tufan Deveci @mobile14 Ara 2018 \u00d6S 8:20 tarihinde linquize notifications@github.com yazd\u0131:Bug description\nFrequent Error messages:\nFrequent Offline Mode with 1.20.0\nEndpoint is down\nUnable to query endpoint\nExpected behavior\nNo error\nBriefly describe what you were expecting.\nSteps to reproduce the issue:\nSteps to reproduce the behavior:\nRefresh Container Stats page many times, it show Endpoint is down, Unable to query endpoint\nThen go to Container list, it shows offline mode\nTechnical details:\nPortainer version: 1.20.0\nDocker version (managed by Portainer): 18.06\nPlatform (windows/linux): Linux\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nBrowser: Firefox 63\nAdditional context\nProblem not observed in portainer 1.19.2\n\u2014You are receiving this because you are subscribed to this thread.Reply to this email directly, view it on GitHub, or mute the thread.\n{\"api_version\":\"1.0\",\"publisher\":{\"api_key\":\"05dde50f1d1a384dd78767c55493e4bb\",\"name\":\"GitHub\"},\"entity\":{\"external_key\":\"github/portainer/portainer\",\"title\":\"portainer/portainer\",\"subtitle\":\"GitHub repository\",\"main_image_url\":\"https://github.githubassets.com/images/email/message_cards/header.png\",\"avatar_image_url\":\"https://github.githubassets.com/images/email/message_cards/avatar.png\",\"action\":{\"name\":\"Open in GitHub\",\"url\":\"https://github.com/portainer/portainer\"}},\"updates\":{\"snippets\":[{\"icon\":\"DESCRIPTION\",\"message\":\"Frequent Offline Mode with 1.20.0 (#2556)\"}],\"action\":{\"name\":\"View Issue\",\"url\":\"https://github.com/portainer/portainer/issues/2556\"}}}\n[\n{\n\"@context\": \"http://schema.org\",\n\"@type\": \"EmailMessage\",\n\"potentialAction\": {\n\"@type\": \"ViewAction\",\n\"target\": \"https://github.com/portainer/portainer/issues/2556\",\n\"url\": \"https://github.com/portainer/portainer/issues/2556\",\n\"name\": \"View Issue\"\n},\n\"description\": \"View this Issue on GitHub\",\n\"publisher\": {\n\"@type\": \"Organization\",\n\"name\": \"GitHub\",\n\"url\": \"https://github.com\"\n}\n}\n]. ",
    "alaagalal": "If i had a portainer 2 months ago and not run it \nafter 2 months ,portainer not found it \nis it normal?\n. If i had a portainer 2 months ago and not run it \nafter 2 months ,portainer not found it \nis it normal?\n. how can i have static account of container , it enables me to change the account every time i restart the docker-machine ?. how can i have static account of container , it enables me to change the account every time i restart the docker-machine ?. can i have a static account of portainer? every time i restart the machine , it enables me to change and make the same steps?. can i have a static account of portainer? every time i restart the machine , it enables me to change and make the same steps?. it works in case the machine running and not stopped. It still needs re Entering a new account of the initial administrator user , if i stop the machine and restart it again\nIs there away to save my account even i stoped the machine ?. it works in case the machine running and not stopped. It still needs re Entering a new account of the initial administrator user , if i stop the machine and restart it again\nIs there away to save my account even i stoped the machine ?. ",
    "mijara": "@deviantony Thanks, I did those two things and now I see more files in the dist folder, but still I can't see the landing page, I will try cleaning, editing other files or clone the repo again in the meantime.. Actually, I'm using curl to avoid those issues, and just in case, I tried with:\ncurl -H 'Cache-Control: no-cache' http://IP:9000/\nbut still nothing.\nWhich files should I expect in the dist folder?. In the end, the problem was running npm with root user (I'm just recently getting to now npm...), running npm with non-privileged user and grunt build fixed the issue. Thanks.. ",
    "sleavitt": "Unless of course this is by design and demo.portainer.io is where I should be looking. I just discovered that was the host name referenced in the GitHub README. :). Unless of course this is by design and demo.portainer.io is where I should be looking. I just discovered that was the host name referenced in the GitHub README. :). ",
    "dexafree": "Is this related to the docker update command introduced in docker 1.11.0?\nhttps://docs.docker.com/engine/reference/commandline/update/\nOr the \"update\" word was only referring to \"an updated image\"?. > Due to the fact that container names are unique and we rely on the container name as an identifier to check if we need to replace the container we cannot keep the previous container, it has to be removed.\nWhat about:\n\nStop the existing container\nCreate a new container with the same configuration as well as one of the defined networks with the same name as the previous one with a known difference, such as a \"__\" prefix, or a \"-copy\" suffix\nPost-creation, connect the container to the extra networks\nDelete the previously existing container\nRename the new one to the name it should have. \n",
    "aptalca": "I guess the answer is neither (sad and confusing). \nIt seems that option only allows updating certain docker run options for a running container, such as cpu and memory limits and restart policy. It's not about updating the container or the image. It's weird they picked that name for that option instead of something more specific like \"update-options\" . It could be used to change a configuration as well, but at the core, it would allow the user to update/refresh the docker image and recreate the container based on the updated image. \nFor instance, we have an openvpn server image. Users are expected to use the latest tag. The image gets refreshed weekly and the newest version gets tagged \"latest\". Because the image/os keeps getting security updates frequently, the users are expected to stop and destroy the running container, pull the latest image and recreate the container to make sure they have the latest security patches. If not, they will keep running old versions with potential vulnerabilities.\nCurrently, the user has to go through all those steps manually on portainer. An update button that destroys the container, pulls the latest image and recreates the container (in its place) with the same settings and options, would be a great solution (also deletes the older image which should now be tagged \"none\" instead of latest)\nWhat you mentioned (change settings and recreate container with new settings in place) could be the next step, as it would require more or less the same logic and background tasks.. Yup, essentially a re-create container feature with a \"docker pull\" in the middle :-). I tried it as a subdomain proxy with nginx and it works.\nI use this nginx reverse proxy container, which also has built-in letsencrypt certs: https://hub.docker.com/r/linuxserver/letsencrypt/\nYou can see the default site conf and the proxy conf here: https://github.com/linuxserver/docker-letsencrypt/tree/master/root/defaults\nI added the following server block to the default site config to make portainer work (base url method did not work):\n```\nserver {\n        listen 443 ssl;\n    root /config/www;\n    index index.html index.htm index.php;\n\n    server_name portainer.*;\n\n    ssl_certificate /config/keys/letsencrypt/fullchain.pem;\n    ssl_certificate_key /config/keys/letsencrypt/privkey.pem;\n    ssl_dhparam /config/nginx/dhparams.pem;\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES1$\n    ssl_prefer_server_ciphers on;\n\n    client_max_body_size 0;\n\n    location / {\n            include /config/nginx/proxy.conf;\n            proxy_pass http://192.168.1.XX:9000;\n    }\n\n```\nSo when I go to https://portainer.customdomain.com I can access the portainer interface with no issues. ",
    "TheNuclearCat": "Someone working on this? Would be great :)\n. ",
    "TuRDMaN": "This feature is basically the only thing that's holding me back from using Portainer. When you're running 10+ containers whose images are frequently updated, having to manually destroy and recreate them is far too tedious.. ",
    "travcunn": "This would be a great feature to have!!!!. ",
    "Homer-Sim": "I would like to see this feature as well. ",
    "Ryanb58": "Would really love this!. ",
    "elegos": "I'd like to :+1:  this feature. I've seen that @WTFKr0 almost finished it, and it'd be awesome to have it implemented asap (next release?) :slightly_smiling_face: . @deviantony awesome :) AFAIK you can \"simulate\" this making a docker node a manager of a swarm made of 1 daemons and scaling down to 0, then back to 1 right?. Yep, but shouldn't be too complicated right? Never did that before.. Nope none, simply the 400/405 errors showing up in console/network tab. The errors are managed though, because red notifications popup.. Uhm... strange enough? Today I tried to enter Portainer again and now it seems to be calling the very same routes, but it 'started' working (?!?)... it must have been some sort of browser cache strategy... Obviously this is not a bug now, but still wondering why it all happened.. ",
    "ekle": "can this also be used to update portainer itself ?. ",
    "christian-ek": "Would be nice if there was something flashing and showing that there is a newer image for the container aswell. So that you would know to recreate it.. Fix for me was to add the following in both locations:\nproxy_set_header Origin '';. ",
    "boojew": "+1\nThis is currently my single biggest issue w/ portainer and any containers build w/o a dockerfile. Ensuring all the parameters are passing during re-creation is trivial, but also error-prone.. ",
    "theit8514": "Been testing the pr855 image and am having problems with the generated command and volumes. Testing with a custom dockerfile with the CMD statement:\nCMD /usr/local/bin/docker-gen -watch -notify \"/bin/bash /app/cli53routes.sh\" /app/cli53routes.tmpl /app/cli53routes.sh\nThe command that is copied from the instance appears to wrap all arguments in quotes, which messes up existing quotes:\nhttps://gist.github.com/theit8514/d7ffef3f67f51c69b748797de1af8f22/raw/1ea2862262d32a96ad2a701893e1e7699496cc53/Capture-command.PNG\nhttps://gist.github.com/theit8514/d7ffef3f67f51c69b748797de1af8f22/raw/1ea2862262d32a96ad2a701893e1e7699496cc53/Capture-error-after-launch.PNG\nAlso, when recreating an instance (not when duplicating), the bind volumes sometimes drop:\nhttps://gist.github.com/theit8514/d7ffef3f67f51c69b748797de1af8f22/raw/1ea2862262d32a96ad2a701893e1e7699496cc53/Capture-volumes.PNG\nhttps://gist.github.com/theit8514/d7ffef3f67f51c69b748797de1af8f22/raw/6eee76d45fdc2fe2da83022db87f05a25a621aa9/Capture-volume-missing.PNG. Commands with quotes are not quoted properly in the duplicate screen:\nhttps://gist.github.com/theit8514/d7ffef3f67f51c69b748797de1af8f22/raw/1ea2862262d32a96ad2a701893e1e7699496cc53/Capture-command.PNG\nAlso, when recreating, I sometimes have my bind volume drop. This doesn't appear to be an issue on the duplicate screen.\nhttps://gist.githubusercontent.com/theit8514/d7ffef3f67f51c69b748797de1af8f22/raw/1ea2862262d32a96ad2a701893e1e7699496cc53/Capture-volumes.PNG. This is the Dockerfile: https://gist.github.com/theit8514/22a615e42da04a375c7ddc38af435d1b\nOn the Portainer Container Details, the command shows as /bin/sh -c /usr/local/bin/docker-gen -watch -notify \"/bin/bash /app/cli53routes.sh\" /app/cli53routes.tmpl /app/cli53routes.sh but the Duplicate screen populates the Command as \"/bin/sh\" \"-c\" \"/usr/local/bin/docker-gen -watch -notify \"/bin/bash /app/cli53routes.sh\" /app/cli53routes.tmpl /app/cli53routes.sh\".\nThe bind issue appears for this Dockerfile as well. I add a new manual binding for /var/run/docker.sock:/tmp/docker.sock:ro when creating the initial container through Portainer. When I click the Duplicate button, the volume settings get populated as shown in the image from my earlier comment. However, if I click Recreate, the new container does not have the manual volume mapping.. ",
    "s7726": "https://github.com/v2tec/watchtower/. Does not yet work for the portainer container.. ",
    "aztazt": "https://github.com/pyouroboros/ouroboros. ",
    "n1nj4888": "Hi There,\nI assume from the history above and the help URL below that this feature hasn't been implemented as yet?\nhttps://portainer.readthedocs.io/en/stable/faq.html#How%20can%20I%20upgrade%20my%20version%20of%20Portainer?\nIf you\u2019re running Portainer as a container, it\u2019s simply a matter of Docker image version. Just stop your existing Portainer container, pull the latest portainer/portainer image and create a new Portainer container (using the same options you used to create the previous one).\nIt would be really useful to be able to implement a simple process to update the image of an existing container to the latest underlying image (without having to recreate the container and potentially miss original configuration settings in the new container)... I also use Synology's Docker GUI and this allows updated images to be downloaded over existing images and then the containers updated by clicking \"Clear\" on the exsting container - The container then restarts with the new updated image ... However, it would be better if there was a simple \"Update to latest\" option on the underlying images/container in Portainer?\nThanks!. ",
    "linquize": "kitematic can update existing container. Also, some docker images only have /bin/sh, but not /bin/bash. You need to choose shell first (command combo box).. The problem is from formatLogs()\nhttps://github.com/portainer/portainer/blob/e0cf088428fb0971cab5fd42aa6564bc6673d6e9/app/docker/helpers/logHelper.js#L10\nhttps://github.com/portainer/portainer/blob/e0cf088428fb0971cab5fd42aa6564bc6673d6e9/app/docker/helpers/logHelper.js#L11. Pull request was wrongly closed, reopen it. Did you run yarn to fetch node_modules before yarn build?. Seem to be your yarn problem.\nIf you do not solve yarn problem,  you may also use npm instead.\nnpm install then npm build. 1.20.1 already released. @dgaikwad Please try this build instruction\nhttps://github.com/portainer/portainer-docs/pull/61/commits/687b377b934040d200bcc2bdcdccf7ae50d1d1b7. 7efc32b: Checkbox moved to Actions section above Deploy button. ping. In general, using Microsoft Edge has higher failure rate than Firefox.\nGo to home, select local pipe endpoint.\nGo to dashboard, when page is fully loaded, press F5 to reload. Repeat for 30 times.\nGo to home, select a TCP endpoint.\nGo to dashboard, when page is fully loaded, press F5 to reload. Repeat for 30 times.\nEnvironments\nAll environments below are running the same Docker host Windows 10 on VMware\n- portainer is run inside Hyper-V container. Pipe failure rate is high (roughly >70%)\n- portainer is run directly outside docker. Pipe failure rate is also high (roughly >60%)\n- portainer is run inside Hyper-V container TCP endpoint: Not tested because I do not know the IP address\n- portainer is run directly outside docker. TCP endpoint has no failure.\n. ping. I also add redirect to portainer.init.admin on login page (after clean install portainer again). You open login page first. Then stop and run another portainer container (not keeping portainer_data), so the new container has no admin account. Then login will fail. In this case , redirect to init admin. . Now I cancel 8f5a5ea first.. There is no bash inside portainer docker image.\nYou may not use bash. Did you set $GOPATH environment variable? . The simplest way is to set GOPATH to current dir\nBefore step2\nbash\nexport GOPATH=`pwd`. Could you post your latest error message? \nWhat is your go version? . Could you cd to a new empty directory and run all your steps again? . linting issues fixed. docker run portainer/portainer:1.20.2 (windows)\nwith --isolation process, \nerror message is encountered an error during Start: failure in a Windows system call: The virtual machine or container exited unexpectedly.\nwithout  --isolation process, \nThe container is created, but docker start stucks. \nNo problem if I compile 1.20.2 from source and run portainer like this\ndocker run -d -p 9000:9000 -v %CD%\\dist:C:\\app -v %TMP%\\portainer:C:\\data -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine --name portainer mcr.microsoft.com/windows/nanoserver:1809 C:\\app\\portainer.exe --no-analytics --template-file C:\\app\\templates.json\n. There is no bash inside portainer docker image.\nDuplicate issue of #2707. docker export exports container files to tar.\ndocker save exports image files to tar.. Fixed in daca4b26. Updated 74fdffffae2cdbcfd79b4ac0d2cba56f00c63e9c. ",
    "jangrewe": "Congratulations @linquize, you have been awarded the \"Most useful comment on the Internet\" Award.. Here's an abbreviated version which doesn't work:\n[\n  {\n    \"title\": \"Registry\",\n    \"description\": \"Docker image registry\",\n    \"logo\": \"https://faked.org/portainer/logos/registry.png\",\n    \"image\": \"registry:latest\",\n    \"ports\": [\n      \"5000/tcp\"\n    ],\n    \"volumes\": [\"/var/lib/registry\"]\n  }\n]. Thanks, adding this field fixes it!. ",
    "jbleuzen": "Hello !\nI can confirm that I can't reproduce the issue... And I'm in 1.13.5\u2026\nI'll close the issue, thanks !. ",
    "pcross616": "You can add this functionality via a stack in a compose file but then you loose a lot of the power of Portainer for adhoc service definitions, such as the config and secret management. I am stuck between the stacks and services ui options and really need the cap-add and cap-drop added to the services ui options.. ",
    "Ox24": "+1 for this. ",
    "WriteCodeEveryday": "Looking forward to this one.\nThis will allow portainer.io to support netdata containers without having to drop into a command line.. @deviantony greatest crossover update ever!. ",
    "Niceplace": "Same issue here, would love to see this implemented ! . I just tried it now with HTTP_PROXY variable and it works !! Thanks @WTFKr0 for the simple solution I should have thought of that before !\nFull docker command : \nReplace $PROXY_HOST with the actual hostname of the proxy and $PROXY_PORT with the actual port of the proxy (if present).\ndocker run \\\n-p 9000:9000 \\\n-v /app/docker-volumes/portainer:/data \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\n-e HTTP_PROXY=$PROXY_HOST:$PROXY_PORT\n. +1 For global performance / status page for all endpoints !. ",
    "misery": "Tried it ... sometimes it works and I see the \"app template homepage\" ... sometimes I will get this error. Strange... without restarting the container!\nPassed ENV as HTTPS_PROXY=10.1.0.1:8080\nhttp error: Get https://raw.githubusercontent.com/portainer/templates/master/templates.json: http: error connecting to proxy http://10.1.0.1:8080: dial tcp 10.1.0.1:8080: i/o timeout (code=500)\n. ",
    "DEKHTIARJonathan": "@deviantony it works perfectly thanks !. ",
    "guilhermecgs": "Hi Folks,\nIt is important that this configuration is done using the Web UI. In many cases, the proxy login/password expire after X months, and then it stops working. In the corporate world, this is the default.\n. ",
    "jrbenito": "I would add that, if you corporate proxy has https it is doing it with a internal signed certificate, hence you have to pass the CA to Portainer container so it will not comply about unknown certificate signer. I did it just by passing my /etc/ssl as volume Portainer container (not agent).. ",
    "Kilhog": "Thank's, it works \ud83d\udc4d . I think it's because of that : https://github.com/portainer/portainer/blob/develop/app/shared/services.js#L381 \ud83d\ude06. Done . ",
    "niulin": "1.11.1 fixed the problem. Thank you!. ",
    "mmpreply": "I second this request. For testing / learning purposes, to be able to set the hosts file in the container and the IP.\nI love portainer but end up on the commandline cause I don't have all these features.\n\nNote, Yes, I know running SSH isn't standard on a container. I do it so I can write ansible scripts. Containers for testing those is amazing.\n\nThanks much!\n`\n  elif [ \"$2\" == \"centos7/elk01\" ]; then    \ndocker run \\\n\n  --privileged \\\n\n  -e \"container=docker\" \\\n\n  -v /sys/fs/cgroup:/sys/fs/cgroup:ro \\\n\n  -it \\\n\n  -d \\\n\n  --network private_net \\\n\n  --ip 172.18.0.30 \\\n\n  --sysctl net.ipv6.conf.all.disable_ipv6=1 \\\n\n  -p 192.168.1.193:22:22 \\\n\n  -p 192.168.1.193:80:80 \\\n\n  -p 192.168.1.193:443:443 \\\n\n  -h elk01 \\\n\n  --add-host \"centos7-wbdb01:172.18.0.10\" \\\n\n  --add-host \"centos7-mondb01:172.18.0.20\" \\\n\n  --add-host \"centos7-mondb02:172.18.0.21\" \\\n\n  centos7/elk01 \\\n\n  /usr/sbin/init\n\n`. ",
    "inkrement": "This would be great! I want to switch from KVM to docker and therefore it would need this feature (https://blog.jessfraz.com/post/ips-for-all-the-things/). ",
    "takigama": "I too would like to see this. Handy where your trying to put docker containers on a bridge network with existing equipment, etc etc.\nCurrently i deploy them, then change their ip/network as a post task. good point! adding it to the view was quite easy. Havent quite figured out the other end of that equation. ",
    "mustanggb": "This is still/again broken in version 1.14.2. Ah great news, thanks for the info.. ",
    "karneaud": "Ah I see. may I then recommend changing the table headers from Exposed Ports to just Ports maybe? Kind of misleading as I kept thinking my docker parameters weren't working :-). +1 I'm also experiencing this error. I also note that in DUPLICATING an existing container the container did not have ay ports and I attempted to create some.\nMY specs\nVersion | 18.06.1-ce\n-- | --\nAPI version | 1.38\nGo version | go1.10.3\nOS type | linux\nOS | Raspbian GNU/Linux 9 (stretch)\nArchitecture | arm\nKernel version | 4.14.34-hypriotos-v7+\n. ",
    "luca-moser": "Same here using:\ndocker run -d --name portainer \\\n-p 127.0.0.1:8080:9000 \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\nportainer/portainer\nPortainer is unable to find /var/run/docker.sock for whatever reason.\nI used Manage the Docker instance where Portainer is running and I also tried the other option, but it just doesn't work.\n/var/run/docker.sock exists on the host.\nLog:\nroot@srzh08:/opt/prod_portainer# docker logs portainer\n2017/01/09 13:16:28 Starting Portainer on :9000\n2017/01/09 13:16:33 http error: User not found (code=404)\n2017/01/09 13:16:40 http error: Endpoint not found (code=404)\n2017/01/09 13:16:40 http error: Endpoint not found (code=404)\nThe endpoints API actually knows about the correct URL:  \n\nActually, if I use -p 8080:9000 when spawning the container it works (not binding only to localhost).. @deviantony \nThe response for both:\n /api/docker/containers/json?all=1\n /api/docker/images/json?all=0\nis persistent connection closed with status code 500.\nIn another setup where I have my portainer container in a docker network, where another nginx container proxies requests to portainer, the same error occurs.. By the way I am using Ubuntu 16.04.1 LTS.. Nice, that was the issue. I configured my nginx according to the docs at https://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer and now it works.. ",
    "PhantomYdn": "I have the same issue on Ubuntu 16.04 LTS as well.. I have the same issue on Ubuntu 16.04 LTS as well.. @deviantony , I used the following:\ndocker run -d --name portainer --privileged -v /var/run/docker.sock:/var/run/docker.sock -e VIRTUAL_HOST=portainer.orienteer.org portainer/portainer\ndocker version: 1.12.3\nplatform: Ubuntu 16.04\nbrowser: chrome. @deviantony , I used the following:\ndocker run -d --name portainer --privileged -v /var/run/docker.sock:/var/run/docker.sock -e VIRTUAL_HOST=portainer.orienteer.org portainer/portainer\ndocker version: 1.12.3\nplatform: Ubuntu 16.04\nbrowser: chrome. I see, but it's not convinient to change https://github.com/jwilder/nginx-proxy configuration. Are there any ways to make it working with reverse proxy? . I see, but it's not convinient to change https://github.com/jwilder/nginx-proxy configuration. Are there any ways to make it working with reverse proxy? . ",
    "katopz": "Hmm, I got partially working. page is loaded but below link is missing\nhttps://foo.com/portainer/api/settings/ 404 (Not Found)\nhttps://foo.com/portainer/api/users/admin/check/ 404 (Not Found)\nIt did display form to input admin password but after submit it will...\nhttps://foo.com/portainer/api/users/admin/init/ 404 (Not Found)\nAny hint?. @deviantony Yes, It's look like this in my case\n```\nserver {\n    listen 443 ssl http2 default_server;\n    listen [::]:443 ssl http2 default_server;\n    server_name foo.com www.foo.com;\n# ...SSL stuff...\n\nlocation /portainer/ {\n    proxy_http_version 1.1;\n    proxy_set_header Connection \"\";\n    proxy_pass http://localhost:9000/;\n}\n\nlocation /portainer/api/websocket/ {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_http_version 1.1;\n    proxy_pass http://localhost:9000/api/websocket/;\n}\n\n}\n. @deviantony  I just pull it 30 min ago. It said...\nlatest: Pulling from portainer/portainer\na3ed95caeb02: Pull complete\n802d894958a2: Pull complete\n6abf126e2863: Pull complete\nDigest: sha256:9a9111fbce45f6d9f42a4e945ebf768624250bd4a0bd0bfd5a639ecb2c64f252\nStatus: Downloaded newer image for portainer/portainer:latest\nc6c71e9c3b634540796826aa44947c1508bbd5c2652e34485969f3fe66bc0859\n``. @deviantony That should take me sometime to set new one, BTW May I ask forhttps` config and template? I think we should run it under SSL?. ",
    "DrMurx": "I also run into this issue when using an nginx proxy with HTTPS.\nWhile tuning the nginx proxy settings, I fell over some JWT authentication errors. Maybe there's a protocol mismatch between HTTPS in the frontend and HTTP in the backend when using a proxy and this somehow spoils JWT authentication.. I also run into this issue when using an nginx proxy with HTTPS.\nWhile tuning the nginx proxy settings, I fell over some JWT authentication errors. Maybe there's a protocol mismatch between HTTPS in the frontend and HTTP in the backend when using a proxy and this somehow spoils JWT authentication.. ",
    "luckydonald": "Same here.\nReserve proxy:\nngnix\nlocation ~ ^/portainer/(?<url>.*) {\n        rewrite ^/(.*)$ $1 break;\n        resolver 127.0.0.11 valid=5s;\n        set $upstream http://portainer;\n        proxy_pass $upstream/$url?$query_string;\n        proxy_set_header X-Host $host;\n        proxy_set_header X-Forwarded-For $remote_addr;\n    } \nportainer is listening on port 80, set via --bind :80 and ports: -\"8000:80\".\nInterestingly the /portainer/api/endpoints and /portainer/api/endpoints/0 are working (200).\nBut everything /portainer/api/docker/* fails.\nThis is working when browsing via port.\nhttp or https didn't matter.\n\n. Can't use that. If portainer goes down/is not started, the proxy won't be able to (re)start \nNgnix throwing [emerg] host not found.\nThats why I use\nresolver 127.0.0.11 valid=5s;\nset $upstream http://portainer;. @deviantony \nIndeed the normal config is working,\nFor my setup looking like this:\nngnix\nupstream portainer_d {\n   server portainer:80;\n}\nserver {\n  listen 80;\n  server_name portainer.example.com;\n  location /dcr/ {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass http://portainer_d/;\n  }\n  location /dcr/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer_d/api/websocket/;\n  }\n}\nAs described above, with this ngnix config portainer needs to be up, else ngnix won't start!\njson\nnginx: [emerg] invalid host in upstream \"http://portainer:80\" in /etc/nginx/conf.d/ngnix.conf:46. Hah!\nGot it working with actually supporting Docker's host resolution.\n```ngnix\nserver {\n  listen 80;\n  server_name portainer.example.com;\n  resolver 127.0.0.11 valid=30s;   # <- will adapt changes of deployed hosts every 30s.\n  set $upstream http://portainer:80;  # <- Your local portainer instance. Probably port 9000.\nlocation ~ ^/portainer/(?.*)$ {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass $upstream/$url;  # the variables forces using the resolver DNS settings above.\n  }\n}\n``\nNow it won't only resolve the hostname on boot, but instead every30s`.\nWith that you can start ngnix without portainer, and even scale portainer later.\nMore infos about dynamic host resolving in docker in this youtube video.\nFor deploy on the root this is enough:\n```ngnix\nserver {\n  listen 80;\n  server_name portainer.example.com;\n  resolver 127.0.0.11 valid=30s;\n  set $upstream http://portainer:80;\nlocation / {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass $upstream$request_uri;\n  }\n}\n```\n(Not sure why there is something different for the api route in the first point). Huh, Indeed.\nWould adding\nnginx\nproxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"upgrade\";\nto the / config cause any harm?. I just tried (on root), it seems to be working.\nWikipedia says something about WebSockets requiring that update.\nIt seems, for normal pages/api stuff it gets just ignored.. btw, update: havent had any issues yet.. Delete the data folder / volume, probably.. How about --reset-password resets you to the choose password for admin gui?. The web gui is able to set it. So the node package should just expose a command to run to do the same, with shell access instead of being logged on.\ndocker-compose exec portainer  npm run portainer-reset-password\nI'm not into node that much, but I've seen this be done somehow like this.. Currently the only way to see an overview of health checks are the container list.\n\nHowever, it has no real way to filter them by health status, and all in all it's not easy to find your health check enabled containers between all the rest.\nIn non-swarm environments they don't automatically restart, so having a quick overview would be great.\nHaving a separate, dedicated healthcheck page would be great.\nEach row would be a container.\nInside that container, there are the status of the last healthchecks (like travis: last builds)\nThis would be provided via inspect -> State.Health.Log\n\n(Note the exit status changed from 0 to 1 in the last 2 checks)\n\nThe Dev Ops-Dashboard, especially the Image and versions and last update date would be a separate feature, however.\nHowever, maybe a first step into that direction could be adding a unhealty/healty count to the main dashboard:\n\n . \nFor reference, picture of branches in travis.\n\n. @1138-4EB  Maybe it is about including less information.\nA page where I can see if they are healthy or not.\nWithout all that unneeded information,\nlike image name, ports, etc.\nJust the container name, health overview, and maybe even some quick action buttons, like restarting that container.\nUnhealthy containers first, next the booting ones, and lastly the good ones.. Could we in the meantime make a workaround, like with a regex, to remove the escape codes?\nAdding a checkbox under the display timestamp?\nIt is quite unreadable currently.. Great news, being able to at least read it is a step forward.. Why can't we continue to treat the text like text (html escaped &lt; &gt;) and only replace the ansi codes?\nI don't believe we would introduce security problems with that approach?\n Every online code editor does highlighting text, this can't be that hard.. ",
    "Pewpsockemz": "Hello, all\nim having this issue when using the jrcs docker-letsencrypt-nginx-proxy-companion that automatically generates the nginx configs\nportainer shows dashboard data when going to it directly with the ip and port but when I use the nginx proxy and go to the virtual host subdomain over https there is no dashboard data. \nI cant seem to change the nginx config because its dynamically made with the nginx companion container.\nAny more information would be helpful.\nthe portainer logs just say:\n2017/01/29 00:35:20 Starting Portainer on :9000\n2017/01/29 00:35:37 http error: User not found (code=404)\n2017/01/29 00:36:01 http error: Endpoint not found (code=404)\n2017/01/29 00:36:01 http error: Endpoint not found (code=404)\nedit:\nI actually got it to work by adding the endpoint of the dockerhost on my server. not sure if this is the best way to do it but it seems to be working. . I was running portainer using the localhost setting and could not see dashboard data when using nginx proxy over https. when I added the endpoint for the docker host using the internal ip:port I could see the container data over https finally. sorry if I cant explain this all too well. . ",
    "gpapin": "This is exactly what I needed ! Thanks for pointing me to the right direction :) . ",
    "level420": "Sorry for kicking in her: we have the same problem with portainer v1.11.1, docker 1.10.3, centos 7.3 running portainer behind a reverse proxy, which is apache 2.4 with mod_proxy using the follwwing relevant configuration in the apache vhost:\nProxyPass /portainer/ http://portainer:9000/\n   ProxyPassReverse /portainer/ http://portainer:9000/\nThe error message in the chrome console says:\nWebSocket connection to 'wss://<myproxy.mydomain.tld>/portainer/api/websocket/exec?id=a465be803524955892dbae2fe0e22832798a14d2f3a9977ced45790e81fa8376' failed: Error during WebSocket handshake: Unexpected response code: 400. Additionally the proxy is only reachable via https, proxying to the portainer container without https.. @deviantony thank you for the hints. I've found a solution for apache 2.4 which (I suspect) needs mod_proxy_wstunnel. The proxy part for the websocket communication is:\nProxyPass /portainer/api/websocket/ ws://portainer:9000/api/websocket/\nwhich works proxying from wss to ws.\nDeleted ProxPassReverse which is not needed and makes the connection fail.. Verified to work with docker 1.11.2 pulled from https://hub.docker.com/r/portainer/portainer/\nThank you @deviantony !. ",
    "nramesh25": "Thanks for the help.. After i added the location /portainer/api/websocket/ in nginx config and  it started to  work. \nI was following the documentation from  https://portainer.readthedocs.io/en/stable/faq.html and added /portainer/ws/  instead of /portainer/api/websocket/.  After changing the path to the new one, it worked.. ",
    "jarvisuser90": "@MarvinDurot that worked for me. Thanks a million!. ",
    "PixelHomie": "For App Templates there should be an option like the \"Always pull the image\" option on the Create Container page to make sure you always get the latest image from DockerHub.. Problem fixed. I started the wrong container with latest release version instead of development ;). ",
    "bes": "@deviantony I retested locally with an image with multiple tags and could reproduce, so I still have the issue on v1.11.1\n@gkovacs81 how can I test your fix, to confirm it fixes my problems?. @deviantony Now I get the following error message as a popup:\nconflict: unable to delete XXXXidXXX (must be forced) - image is referenced in multiple repositories\nI guess that means that technically, portainer is working, but it would be nice if the image was deleted =). ",
    "sokoow": "This one: https://github.com/portainer/portainer/releases/download/1.11.1/portainer-1.11.1-linux-amd64.tar.gz\nI'm running this binary inside my own docker, with socket redirection done as a volume. It's very odd, on one host I normally see the logon screen, on second host, same browser (Chrome) I see directory listing all the time. Not to mention that IE has 80% of chance to see directory listing.. This one: https://github.com/portainer/portainer/releases/download/1.11.1/portainer-1.11.1-linux-amd64.tar.gz\nI'm running this binary inside my own docker, with socket redirection done as a volume. It's very odd, on one host I normally see the logon screen, on second host, same browser (Chrome) I see directory listing all the time. Not to mention that IE has 80% of chance to see directory listing.. Yes, exactly, I'm in an environment when I can't use already made docker images :) What's so strange about that ? :). Yes, exactly, I'm in an environment when I can't use already made docker images :) What's so strange about that ? :). Sure, thanks :) So there's no dockerfile at the moment, I'm just doing docker run on latest ubuntu and trying to run this way. Did you ever try like this ?. Sure, thanks :) So there's no dockerfile at the moment, I'm just doing docker run on latest ubuntu and trying to run this way. Did you ever try like this ?. ",
    "emil-nasso": "Sorry to rewake this old issue but....\nIf i just pulled a new version of an image, say a new and updated httpd:latest and i want to update a service that uses this image, what is the preferred way of doing that?\nI could do as you said @deviantony and go to the service details view and change the image name from httpd:latest to httpd:latestx and back to httpd:latest again and click apply. I have to change it and change it back again to enable the apply button.\nHow cool would this be to just receate all containers in a service, with the latest version of an image? :)\n \n(I'm have just started looking at portainer, i might be missing some other way of doing this.)\n. @deviantony That looks exactly like it! Thanks. Will keep an eye on that issue.. My usecase for this is to pull the lastest vestion of the image and restart all containers for the service. This is to redeploy our apps to the latest version. We do this multiple times a day.\nThis would be a very very nice button to have. :)\n\n(A bit verbose though. ;) ). ",
    "ruudboon": "@WTFKr0 I love this idea. Would be really helpful when debugging network issues. Seeing the same issue running 2 docker flow proxy instances. Could there be something special in de log file that is causing this issue?. Seeing this issue also. Tried the portainerci/portainer:fix2556-frequent-offline-mode but still goes offline a lot. Is there also an update for the agents?. @deviantony Will do. Not seeing any errors in the logging but will try to pinpoint it.\n . ",
    "vbmade2000": "@markvr  sha1sum and shasum are not same entirely. I am getting error for option -a while building Golang dep utility.\n. ",
    "erikmartino": "@vbmade2000 It is a perl script. On Centos it is included in\nyum install -y perl-Digest-SHA. ",
    "icha024": "Yep, Just saw it in the doc: --host\nSorry I was scanning thought it and thought that was the host address binding for the webserver. My mistake - closing request :)\n. ",
    "camanducci": "Portainer already allows a user to push to the Dockerhub or a private record at the moment?. ",
    "hammady": "Maybe the --admin-password flag could be overloaded. Currently, it skips admin user creation if it exists. What I suggest is to reset the admin password if a user was found. Security wise, a user with access to recreate the container should be given access to reset the password as well.\nThis is very convenient instead of going to all manager nodes, deleting volumes then recreating the container (or service). You are right. What about creating another flag? It could be run as a one\ntime command (using docker run with the same data volume or docker exec).\nOn Wed, Nov 8, 2017 at 5:20 PM Anthony Lapenna notifications@github.com\nwrote:\n\nI don't think this is the way to go as the admin user can also change his\npassword from within the UI. Meaning that these changes would be\noverwritten after a restart of the container. That would probably cause\ntroubles.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/512#issuecomment-342831177,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AA0PJzcA-SQueDf_Cy8q05XGXyEx7b0Nks5s0biwgaJpZM4LomtY\n.\n. Looking forward to the merge!. Looking forward to the merge!. \n",
    "colegatron": "How about --force-create-user in order to be able to recreate the admin user to let reset the password if administrator exists?\nIn my case I try to automate as much as possible everything, meaning having to change a password through an UI is usually not an option.\nAlso the deletion of the data volume/folder is either an option because you'll end up loosing your config, don't you?. EFS volume usage example:\nCreate the volume in AWS\n$ sudo aws efs \nVolume created with, i.e. fs-2324532\nStart the volume manager\n$ sudo docker-volume-netshare efs\nCreate the container mapping the volume to the efs one\n$ docker run -i -t --volume-driver=efs -v fs-2324532:/mount ubuntu /bin/bash\n\n\nAs far as I understand in this case the volume does not need to be truly\ncreated beforehand.\n   This is because when you get the volume automatically mounted during the\ncontainer creation, the efs driver itself creates the volume files\nin \"/var/lib/docker-volumes/netshare\" (by default)\n\n\nThe volume creation page in portainer is enough as is. (but just store\nthe volume config instead to try to create a realvolume) Attached picture\n   Then when the container is launched Portainer should only add the\n'--volume-driver=efs-whatever' just if the volume configuration is not\n'local' (or add the correspongind arguments to the api call)\n\n\nBTW, I am not sure if the volume creation takes in care there are volume\noptions that only have name, but not value (as in the attached picture)\nThere is a subtle implication about using efs to store data out of the\nscope of this issue: If you use multiple containers or just configure a\nservice in Swarm all the containers would write to the network storage,\nprobably causing data corruption. Handle with caution.\n--\nIv\u00e1n Gonz\u00e1lez Valiente\nSystems Developer - DevOp - IT Manager\n2017-05-04 13:44 GMT+02:00 Anthony Lapenna notifications@github.com:\n\nWe need to define the workflow to use these type of volumes inside\nPortainer.\n\nHow to create that volume from Portainer?\nHow to map that volume inside the container-creation view ?\n\nI do not know the EFS volume plugin (it's a volume plugin, not a network\nplugin if I understand correctly), so I can't answer 1.\nAbout 2., if we implement the --volume-driver in the container-creation\nview, how to map an existing volume using that plugin? Is it created and\navailable in the volumes view? If not, should we use a bind-mount to map\ninside the container?\nWe need to answer these questions before being able to work on this.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/841#issuecomment-299162337,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AB-24-KR5H6QpcFsR6OBQ-vLOsMSOa73ks5r2bolgaJpZM4NQgxa\n.\n. \n. Sorry for the delay to answer.\n\nAfter a bunch of tries and errors with the efs driver trying to let them rule my deploys I've desisted to use it with databases. And since the services containers are not big, they can be stored in the host filesystem without problems for me.\nBTW, I've found way easier just use the aws efs volume as a regular nfs volume because it gives you the ability to mount specific subfolders to specific containers with a single nfs mount. \nTo have as less as possible nfs mounts makes the volumes management easier and cleaner.\nI'll keep trying to use portainer as long as I continue working with Docker and Swarms\n. ",
    "darkpixel": "Yeah, deleting the volume causes every stack you have deployed to show up as 'external' and you can't do anything with them.  I really don't want to destroy all the stacks in my cluster only to paste them back into portainer to spin them up again.. ",
    "Codelica": "An older issue here, but we have the need for this as well.  Basically wanting to always control the admin password via startup flag(s).  Something like an extra --force-* flag seems safe enough, and certainly a better option the loosing config and stack control.. I'd really love to see this, as it would allow our templates to use bridge mode without counting on people to expand the hidden mapping UI to map things straight through (in our case) rather then getting random ports.  For now we use host mode just because of this, but that doesn't seem to allow for network stats in Portainer.\nThanks for considering this!. Pretty sure the issue here (at least when NGINX is involved) is the proxy_read_timeout setting. For a long running socket connection like a websocket, if nothing is read from the proxied connection after 60 seconds (default) the connection will be closed.  Once closed, there doesn't seem to be any reconnect code on the client side, so the console is basically \"dead\".   I just bump up the setting to 7 days for the websocket path.  Nothing lives on my desktop longer than that ;)\n```\n  location / {\n    proxy_pass http://127.0.0.1:9000/;\n    proxy_buffering off;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection $http_connection;\n    proxy_set_header    Host                $http_host;\n    proxy_set_header    X-Real-IP           $remote_addr;\n    proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;\n  }\nlocation /api/websocket {\n    proxy_pass http://127.0.0.1:9000/api/websocket;\n    proxy_read_timeout 10080m;\n    proxy_buffering off;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection $http_connection;\n    proxy_set_header    Host                $http_host;\n    proxy_set_header    X-Real-IP           $remote_addr;\n    proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;\n  }\n``` . Sorry to drag this one back up, but is this still being considered?   \nLooks like the workaround would be for swarm/compose configs if I understand correctly.  We have many standalone endpoints which currently require an initial manual pull of the private image before running the app template that uses it.  Would love to simplify that \ud83d\udc4d \nEither way, Portainer has been a huge time saver... thanks!. I'd love to have color logs as well. :)  Perhaps something client side like:\nhttps://github.com/drudru/ansi_up\nwould be an alternative route ?. gotcha...  Well perhaps the safest route would be server-side processing of the ansi codes with output piped through something like Bluemonday just allowing colored spans.  Just a thought. :)  https://github.com/microcosm-cc/bluemonday. At this point Portainer will load external template definitions on first run, and then they are \"managed\" within Portainer's UI as you are seeing.   I think the only way to \"flush and reload\" your templates definitions is to remove all the templates loaded into Portainer (via API calls) and then restart your Portainer container with --templates.\nI'm in a similar situation (just want templates loaded from our vetted templates.json URL).  For now I'm just contemplating a nightly delete (via API) and container re-create.  Would be nice if there was an option for pre 1.19 style template hosting, but not sure if that will come.  So for now I think that's the route.  As for editing templates that have been loaded, it looks like all \"admin\" users are allowed.  I don't think there is a way to disable that (which would be nice also :) ).\nRegards... Sounds good.  I\u2019m traveling for a few days, but will give it a try Monday when I\u2019m back at work.  Thanks!. This seems to be working fine for me.  It pulls our templates from our URL, doesn't show any edit options, and refreshes the template info from the URL.  . Templating has changed in 1.19.x, where a custom template source is only loaded initially into Portainer, and then templates get managed through Portainer's UI.  \nSo --templates  will work on an initial \"clean\" run, but once those templates are in Portainer, it will not pull that url again -- unless all the templates loaded in Portainer are removed.  At this point I think the only way to do that is via API calls. (Although it would be nice if there were a way to clear/reset thing via the admin \ud83d\udc4d )\nSo assuming you want to clear all the templates that have been loaded so that Portainer will \"re-load\" your templates from your URL, you'd need to clear things out completely via the API.  If that's the case and you're familiar with Node JS, this may help...\n```javascript\nconst request = require('axios');\nconst host = 'https://yourportainer.host.com',\n      username = 'adminUserName',\n      password = 'adminPassword';\n( async function () {\n  try {\nlet jwt = await request.post(`${host}/api/auth`, {\n  Username: username,\n  Password: password\n});\n\nlet templates = await request.get(`${host}/api/templates`, {\n  headers: {'Authorization': `Bearer ${jwt.data.jwt}`}\n})\n\nconsole.log(`\\nRemoving ${templates.data.length} templates...`);\n\ntemplates.data.forEach(async template => {\n  try {\n    let templateRemove = await request.delete(`${host}/api/templates/${template.Id}`, {\n      headers: {'Authorization': `Bearer ${jwt.data.jwt}`}\n    });\n    console.log(templateRemove.data)\n  } catch (err) {\n    console.log(err);\n  }\n});\nconsole.log(`Tempaltes removed!\\n`);\n\n} catch (err) {\n    console.log(err);\n  }\n})();\n```. So I tried to trace this back, as getting templates to pull images from our private registry (which requires auth) would be huge for us. :)\nFirst useful thing I noticed is that is that when our template is used to deploy a container, a POST call is made to:\nhttps://<portainerhost>/api/endpoints/<#>/docker/images/create?fromImage=...\nAnd in that POST call, the x-registry-auth header getting sent is empty, which I assume it shouldn't be in our case.  So tracing that back, I saw it should be set by HttpRequestHelper.registryAuthenticationHeader() which gets set directly by setRegistryAuthenticationHeader().   \nsetRegistryAuthenticationHeader() is getting called by pullImage() which is which is fed a registry object that aparently should include an \"Authentication\" parameter for registries that require it in order for it to be passed:\nhttps://github.com/portainer/portainer/blob/5bca9560c9e45c00ff8528cd75ff1e3c43b1aeb4/app/docker/services/imageService.js#L128\nHowever our registry object getting sent in only contains a URL param like:\njs\n{\n  URL: \"our-registry.domain.com\"\n}\nSo, going back further, pullImage() is being called by createContainerFromTemplate() which appears to create and pass a \"registry\" object with only the URL like I'm seeing:\nhttps://github.com/portainer/portainer/blob/ee9c8d7d1a2619e1c855531735f6514eedcc968d/app/portainer/views/templates/templatesController.js#L74\nSo I think this is where things are failing for repositories that use authentication, as the template registry.URL is sent directly without an attempt to look up any stored authentication credentials which apparently should be passed as registry.Authentication.\nUnfortunately I'm not sure how this should best be handled in order to attempt a fix, but hopefully it helps narrow things down. :)\nThere is one other \"odd\" thing I've noticed while running through this, which doesn't seem right.  Currently our templates supply registry and image info like the following:\n...\n    \"registry\": \"our-registry.domain.com\",\n    \"image\": \"our-registry.domain.com/group/project:tag\",\n...\nThis doesn't feel right, as I believe the image should just be \"group/project:tag\" in our case. (and when the image pull fails it says \"our-registry.domain.com/our-registry.domain.com/group/project:tag\").  However, pullImage() sends that \"image\" template parameter into extractImageAndRegistryFromRepository() to extract the registry host rather than using the \"registry\" template parameter for some reason:\nhttps://github.com/portainer/portainer/blob/5bca9560c9e45c00ff8528cd75ff1e3c43b1aeb4/app/docker/services/imageService.js#L126\nPerhaps this is old code before there was a \"registry\" template parameter ?\nAnyway, that's long enough.  Thanks for reading if you got this far ;). FWIW, we use a private GitLab installation with registries for our projects.  We haven't had any issues pulling images from it directly (using Images UI in Portainer).   Not sure if their hosted service is different in some way, but we just added our GitLab registry directly with hostname and auth info in Portainer, and then pull our images which are all in the format docker/<project-name>:<arch-tag>\nOnly issue we have currently is that the images must be pulled manually first (via Images UI) before they can be used in any Portainer container templates.  It won't make the initial pull otherwise.. The \"Registry URL\" is just set to our GitLab registry hostname (docker.econnect.tv in our case).  Then auth enabled w/ some credentials.  Our server is TLS enabled, however we don't have https:// entered.  IIRC it doesn't work with an actual URL like that.  Seems it just wants the registry hostname or ip.. We haven't used that second or third type of path for our images yet, but I just pushed a couple to test with and they seemed to pull fine from the Portainer Images UI.  Just using the portion beyond the hostname like:\nmichaellee8/portainer-registry-bug-test:tag\nmichaellee8/portainer-registry-bug-test/optional-image-name:tag\nmichaellee8/portainer-registry-bug-test/optional-name/optional-image-name:tag\nand the appropriate registry in the pulldown.\nAgain ours is a private GItLab CE server, but I would think it operates the same.\n. I just meant I chose our private registry from the pulldown.  (which is configured to docker.econnect.tv with auth credentials in our case)\nI agree with @deviantony though, I feel like some of the image name parsing logic may be causing issues here.  Especially when periods (.) are used as part of the path like \"neil.cresswell\", as that seems to be used to identify if there is a host involved in some of the code.  I ran into some similar things in another issue I've been checking out: #2098 . Are you saying you can't add a registry for GitLab.com like this (with your user/pass):\n\nAnd then pull the image like this (with your username in the path):\n\nI'm curious, as I think this issue is mainly about the path to image names including periods.  As I just gave your example a test with a gitlab.com account named \"codelica\" and it worked fine:\n\nWondering what might be the difference here.\n. No worries.  My hunch is that the combination of image name (and parsing) with the registry pulldown is creating a variety of different combinations and situations.  Sounds like that will probably be reworked though.  . @michaellee8 for \"Registry URL\", I'd just use registry.gitlab.com  \nThen to pull the image give the full image URL like you have.\nregistry.gitlab.com/michaellee8/portainer-registry-bug-test/master:latest\n. @ldubrois we are pulling images in basically the same format you mention from our GitLab registry:\nregistry.domain.com/[group]/[project]/[branch]:[tag]\nWe have the registry URL just configured as registry.domain.com and from the Image page would pull with registry.domain.com/[group]/[project]/[branch]:[tag] making sure our registry is chosen in the pulldown. \nAre you talking about manually pulling the image from the \"Images\" page in Portainer or including it in templates?  (which is a different story). Hi @ldubrois ...  \nSorry to confuse, but what I meant by \"which is a different story\" is just how Portainer templates process image pulls differently than the Image page in Portainer.  Basically not all the Portainer template types will make use of configured private registry info in Portainer -- but the Images page should.\nWe are able to pull images from the \"Images\" page using our private registry (configured in Portainer using just the domain name registry.domain.com and auth info) and then a pull image URL like registry.domain.com/[group]/[project]/[branch]:[tag] when selecting the registry from the pulldown.\nWe are not able to pull any private images from that registry in Portainer \"container\" templates (template type=1) --  as the Portainer registry entries are not used.  However with Portainer \"compose stack\" templates (template type=3) we are able to pull those same private images -- Portainer registry entries are used.  Not sure about the Portainer \"swarm stack\" templates (template type=2) as we don't use them.\nIf you're not able to from the Images page, and have your registry added to Portainer, my guess would be you're hitting one of the following:\n\nthe configured registry url includes more than the hostname (registry.domain.com)\nthe image url fed on the Images page isn't the full URL likeregistry.domain.com/[group]/[project]/[branch]:[tag]\nthe registry isn't selected on the pulldown\n\n... if all of those look good, then I'm not sure. :)  The way image urls are parsed within Portainer can run into issues in different situations (as it looks for certain signs where to cut the hostname), but was going to be reworked according to some posts from last year.. This would be a nice addition, as it's really needed for some containers.  It looks like it's supported by compose v2.x, so I'm going to try the stack route in Portainer as a workaround.  But certainly something right in the UI would be great.  :). This would be great.  Some of our stacks need private env variables, so a \"public\" git url would basically require a local git repo container (as mentioned above) which would make updates \"interesting\". :)  Using the filesystem would be ideal in this case.. Looks good here also..\n\n. We are seeing this as well.  I think it comes from this change:\nhttps://github.com/portainer/portainer/commit/64beaaa279b46322e40ae08d46b4d2c9cefe6031#diff-c1422efe9b1990e24188dc1fd412707dR635\nWhere stopAndRenameContainer() in the promise chain is immediately involved. (and would explain what @irwiss mentions) I think changing that to:\njs\n.then(stopAndRenameContainer.bind(null, oldContainer))\nmay do the trick.  . This change did seem to correct things for me.  I tried \"recreating\" 3 containers with \"pull latest image\" (which they all had pending) and would normally trip things up.  All three worked without getting hung up with \"old\" containers. However a couple things:\nThe image to test this seems to be at portainerci/portainer:fix2379-stop-container-after-pull (basically minus the extra \"portainer-\" portion)\nIt was a little hard to test as I kept running into another issue where the docker node was marked \"offline\" in 1.20 as being looked at in https://github.com/portainer/portainer/issues/2556. Seems fine.  Re-created another three.  Got one error along the way but I think that was related to that other bug.  No old containers left behind.. I've been using it the last few days and it's been working fine here. \ud83d\udc4d . I'm waiting for a few fixes myself, but at this point there have only been a couple fixes merged to the develop branch since 1.20.0.  One is important for container edit/recreate, the other is for a potentially empty snapshot interval setting. Other fixes have been done on their own branches, but not merged into develop yet, which eventually makes it out to master/release.  So it's hard to know what will make it into 1.20.1 or when it will come.\nIf you're using Docker and there is a particular fix branch you want try out, those do have images autobuilt and tagged at https://hub.docker.com/r/portainerci/portainer/tags\n@wangkai1994 if this is the pull request you're talking about, it looks like it should be in 1.20.0 already.  https://github.com/portainer/portainer/commit/42f5aec6a544941e5c84d8b357fa1ea7650c0e20. @wangkai1994 I see.  Doesn't look like that has been merged yet.  So no dev docker image getting built with it currently.  I think you'd have to build your own image at this point, sorry. . Just ran into this myself...\nFresh installs of 1.20.1 with --external-endpoints configured (for the local unix docker socket) result in the \"configure endpoint\" into step (/#/init/endpoint) on login, which can't be done since --external-endpoints is configured.\nBrowsing away from that \"configure endpoint\" step manually to the home page, I can see the endpoint was imported, but its status is \"down\".  Once I request the status to be refreshed, it's ready to use.\nSo it seems like after external endpoints are imported, the snapshot status update call isn't being made?  I tried disabling snapshots, but that didn't help. \nAny chance there is a workaround short of disabling external endpoints and creating them via the API?  I don't see any APIs for snapshots, but maybe another triggers that to reload?  Getting a little desperate. :) \nThanks..\nUpdate: Couldn't find a way to force a snapshot run, so for now it seems shortening --snapshot-interval is about all that can be done to trigger one \"quicker\".. @deviantony Thanks!  That will help. \ud83d\udc4d   \nAs for --external-endpoints being \"buggy\" at the moment, the one thing I'm seeing is that it will only pickup (and then periodically sync) the endpoints file after a fresh install/start.  On subsequent runs it doesn't seem to pickup any chances in the file or trigger sync checks. . ",
    "sss1217": "Is there a workaround on this ?? something like reseting password if someone forget, not through the gui tho?? . ",
    "gisselmann": "My temporary solution with boltbrowser\nStop portainer, edit portainer.db with boltbrowser and start portainer.\nWorks great - but a flag could be better.. ",
    "Duvel": "@gisselmann that worked for me as well after the upgrade to 1.20.0 broke my LDAP logon.\nFor others: remove all users in the bolt db and portainer will ask again for a password.. I tried it today again in 1.13.2 and it still fails. I will try next week if 1.13.4 helps.\nThe only difference that I can think off, is the different name for a secret.. I tried now in 1.13.4 and it is still failing. Is there any debugging that I could do?. \n. Interesting, the response of the server is:\n{\n    \"message\": \"rpc error: code = 3 desc = secret '003456_ts001984_v4.secrets' is in use by the following service: ts001984\"\n}\nSo the interface is thinking, it succeeded.\nLet me know if this is helpful or that you need more info.. The http response is 200.\nJust tried in Chrome and the same, I think I also did it in Firefox.. Glad you found it, I was already expecting something Docker specific.\nThanks for a great tool!. I give it a try and it works!. Is there a timeframe when you expect to work on this overhaul?\nI wouldn't mind to spent some time to do a quick fix for this specific problem. In Safari you need to do more than just clear your cache. On an iPad it is also some work to remove the website settings. Further more I don't like loosing my settings every time I update portainer.. The logging of a container that failed:\nportainer.1.4q8jkym262u9@pi    | 2017/09/03 09:17:39 Starting Portainer on :9000\nportainer.1.4q8jkym262u9@pi    | 2017/09/03 09:20:14 http error: Unable to find resource (code=404)\nportainer.1.4q8jkym262u9@pi    | 2017/09/03 09:21:03 http error: strconv.Atoi: parsing \"containers\": invalid syntax (code=400)\nportainer.1.4q8jkym262u9@pi    | 2017/09/03 09:21:03 http error: strconv.Atoi: parsing \"images\": invalid syntax (code=400)\nportainer.1.4q8jkym262u9@pi    | 2017/09/03 09:21:05 http error: strconv.Atoi: parsing \"images\": invalid syntax (code=400)\nportainer.1.4q8jkym262u9@pi    | 2017/09/03 09:21:05 http error: strconv.Atoi: parsing \"containers\": invalid syntax (code=400)\nportainer.1.4q8jkym262u9@pi    | 2017/09/03 11:01:11 http error: Unable to find resource (code=404)\nportainer.1.4q8jkym262u9@pi    | 2017/09/10 08:32:07 http error: Unable to find resource (code=404)\n. I just did a reboot and it failed again.\nI used an application bundle to deploy this service:\ndockerui:\n    image: portainer/portainer:linux-arm-1.13.1\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - \"9000:9000\"\n    labels:\n      - \"traefik.backend=dockerui\"\n      - \"traefik.port=9000\"\n      - \"traefik.docker.network=traefik\"\n    command: [\"--no-auth\", \"-H\", \"unix:///var/run/docker.sock\"]\n    networks:\n    - traefik\nIn the output from docker ps -a there are no portainer related containers...\nThis is the output from docker service ps remco_dockerui \ud83d\udc4d \nID                  NAME                   IMAGE                                  NODE                DESIRED STATE       CURRENT STATE           ERROR                              PORTS\noh5d5otzs729        remco_dockerui.1       portainer/portainer:linux-arm-1.14.1   pi                  Shutdown            Failed 10 minutes ago   \"task: non-zero exit (0): No s\u2026\"   \nyc7lcg2ec341         \\_ remco_dockerui.1   portainer/portainer:linux-arm-1.14.1   pi                  Shutdown            Failed 3 days ago       \"starting container failed: Ad\u2026\"\nI find it also interesting, that swarm doesn\u2019t automatically reschedule it. I have this problem on a raspberry pi with hypriot os, but I also encountered it on vm\u2019s running debian.. Just tried, same result.... I guess it happens every time, but normally you don\u2019t reboot very often. Some other services have also troubles, but these are more cpu/mem intensive (influxdb).\nIt is just irritating that it is portainer, with which I control docker. A little bit chicken and egg...\nA swarm with a single node isn\u2019t the normal use case, so maybe let\u2019s not invest to much time here. I was just thinking that maybe a healthcheck could help.. Found the cause of this problem: #1378. I think portainer is also handling the delay wrong, I tried to set it to 5 s and it ended up as 5 under inspect. I think it should be nano-seconds, as the default is 5 s and in my example it is 5000000000, which are nano-seconds. Okay, I think I found and fixed the culprit. It was due to wrong defaults and the Docker API not returning them if they are default. I fixed the issue for delays as well.. Example stack file:\n```\nversion: \"3.2\"\nservices:\n  traefik:\n    image: traefik:v1.4.2\n    command: --web --docker.swarmmode --docker.domain=docker.localhost --logLevel=DEBUG --docker.watch\n    ports:\n      - \"80:80\"\n      - \"8080:8080\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /dev/null:/traefik.toml\n    networks:\n      - traefik\n    deploy:\n      placement:\n        constraints: [node.role == manager]\nnetworks: \n  traefik:\n    attachable: true\n```. \n. Would be fine for me, I just need some identification in the images list to keep them apart.. I\u2019m going to recreate this pull request and fix the failing check, but still trying to understand github and the git merges.. In an incognito version it is shown correctly, but clearing caches for me didn't help. Scaling down and up of the service didn't help either.\nBoth solutions feel like work-arounds to me. How would an inexperienced user know this?. Check, I finally found where it is coming from. The version number is stored in the local storage of the browser. That explains why clearing the cache and refreshing the page didn't help.\nI guess the version only gets set, the first time portainer gets loaded in the browser. I'm not sure if this is done for a purpose?\nShould it be updated when there is a new version of  portainer?. Ah, I didn't know git could do that, will try that instead, thanks!. Information shown by docker images:\nbash-3.2$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              16.04               20c44cd7596f        4 weeks ago         123MB\nubuntu              latest              20c44cd7596f        4 weeks ago         123MB\ntraefik             <none>              2e7af90a3e22        6 weeks ago         45.6MB\nportainer/base      latest              ac55a3fd8bfe        8 weeks ago         275kB\nmongo               latest              686238c7a975        9 months ago        402MB\nTraefik was the image pulled by stack deploy.. Portainer now shows the same information as docker images:\n\n. In the API this information is under the repoDigests:\n{\n    \"Containers\": -1,\n    \"Created\": 1509747102,\n    \"Id\": \"sha256:2e7af90a3e22d05bbc1bf33f434d611ffcec5fc9b6233ccc6581da3f009d7283\",\n    \"Labels\": {\n        \"org.label-schema.description\": \"A modern reverse-proxy\",\n        \"org.label-schema.docker.schema-version\": \"1.0\",\n        \"org.label-schema.name\": \"Traefik\",\n        \"org.label-schema.url\": \"https://traefik.io\",\n        \"org.label-schema.vendor\": \"Containous\",\n        \"org.label-schema.version\": \"v1.4.2\"\n    },\n    \"ParentId\": \"\",\n    \"RepoDigests\": [\"traefik@sha256:a2101a796866e614d7ab6e9103756dc01f18ebcd5d54211d6a5ec6d4c18ed3b7\"],\n    \"RepoTags\": null,\n    \"SharedSize\": -1,\n    \"Size\": 45589550,\n    \"VirtualSize\": 45589550\n}\nIf there are no repoTags, it will use the repository part before the \"@\" from the repoDigests to create a tag.. Not sure what happened here, but restored the request. Any updates on this pull request?\nThese lists of images are quit difficult to handle:\n\n. Not sure what the conflicts where, but I did a successful merge with develop and it seems to have been resolved.. The develop branch has a lot of errors BTW when opening the UI, is that normal?. I'm getting two 404 on these url's:\nhttp://l:9000/api/stacks?filters=%7B%22EndpointID%22:1%7D\nhttp://l:9000/api/stacks?filters=%7B%22SwarmID%22:%2223nkc3wnfiuv94h5pcbo64mir%22%7D\nThe other two are missing maps I see now, so not that important.. I was already looking into getting a rebuild and that was the way :) But the problem persists :(. I'm getting the error on the develop branch as well. I get the error on the dashboard and on the stacks overview.. Oke, the issue is gone now, I guess it was also some browser caching after the new build.... I'm seeing this problem also with version 1.17.0 on two swarms that I control. Let me know if I can test something.. portainer:\n2018/05/11 13:22:04 Instance already has defined endpoints. Skipping the endpoint defined via CLI.\n2018/05/11 13:22:04 Starting Portainer 1.17.0 on :9000\n2018/05/11 13:23:00 http error: Get https://tasks.portainer_agent/_ping: dial tcp 10.0.11.5:443: getsockopt: connection refused (code=500)\nagent:\n2018/05/11 13:15:56 [INFO] serf: EventMemberJoin: 49beaf1a58ce 10.0.11.5,\n2018/05/11 13:15:56 [INFO] - Starting Portainer agent version 1.0.0 on 0.0.0.0:9001,\n2018/05/11 13:15:56 [INFO] serf: EventMemberJoin: b6003670c089 10.0.11.6,\n2018/05/11 13:15:57 [INFO] serf: EventMemberJoin: 2f961ca89b4b 10.0.11.7,\n2018/05/12 00:49:50 [WARN] memberlist: Refuting a suspect message (from: b6003670c089),\n2018/05/11 13:15:57 [INFO] serf: EventMemberJoin: 2f961ca89b4b 10.0.11.7,\n2018/05/11 13:15:57 [INFO] serf: EventMemberJoin: 49beaf1a58ce 10.0.11.5,\n2018/05/11 13:15:57 [INFO] serf: EventMemberJoin: b6003670c089 10.0.11.6,\n2018/05/11 13:15:57 [INFO] - Starting Portainer agent version 1.0.0 on 0.0.0.0:9001,\n2018/05/11 13:15:56 [INFO] serf: EventMemberJoin: b6003670c089 10.0.11.6,\n2018/05/11 13:15:56 [INFO] serf: EventMemberJoin: 49beaf1a58ce 10.0.11.5,\n2018/05/11 13:15:56 [INFO] - Starting Portainer agent version 1.0.0 on 0.0.0.0:9001,\n2018/05/11 13:15:57 [INFO] serf: EventMemberJoin: 2f961ca89b4b 10.0.11.7,\n2018/05/12 00:49:50 [INFO] memberlist: Suspect 49beaf1a58ce has failed, no acks received,. What exact information do you need for the topology?. Ah, one cluster has one manager and two worker nodes, the other has one manager and one node. The first cluster is deployed on Ubuntu Server 16.04, the second on HypriotOS 1.8.. I think it happens when I reload the page, when it is on the container overview after a day of not using portainer. If I do a second reload all is normal again. It looks like that all containers running on the manager get duplicated to the worker node.\nJust trying to give some info to try to succesfully reproduce this one.... The logs are scaringly empty. My best guess at the moment would be a caching issue on the browser side, but I haven't been able to have a browser running with developer tools enabled.. Could you also do an ARM build? I won't be seeing the amd64 cluster for a week.. Just gave it a try, but the arm build doesn't seem to work: \"unsupported platform on 1 node\".. Nope, the image is tagged with \"Architecture\": \"amd64\".. Yup, I'm pretty sure :( I forced the deployment with resolve image never. Let's not go in these architecture things for now, as they are quit difficult...\nBut some good (or bad?) new, I immediately saw double containers and the logging is up!\n2018/05/19 18:46:53 [DEBUG] - Using agent port: 9001\n2018/05/19 18:46:53 [DEBUG] - Using cluster address: tasks.portainer_agent\n2018/05/19 18:46:53 [DEBUG] - Using advertiseAddr: 10.0.8.190\n2018/05/19 18:46:53 [DEBUG] - Generating TLS files...\n2018/05/19 18:47:29 [DEBUG] - Agent details: map[NodeRole:manager AgentPort:9001 NodeName:pi]\n2018/05/19 18:47:32 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.8.190\n2018/05/19 18:47:32 [INFO] serf: EventMemberJoin: 8c7e8525d586 10.0.8.190\n2018/05/19 18:47:32 [DEBUG] - Will join cluster via: tasks.portainer_agent\n2018/05/19 18:47:32 [INFO] serf: EventMemberJoin: 0d6cd4f4494d 10.0.8.191\n2018/05/19 18:47:32 [INFO] - Starting Portainer agent version 1.0.0-dev on 0.0.0.0:9001\n2018/05/19 18:48:02 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8\n2018/05/19 18:48:02 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15\n2018/05/19 18:48:02 [DEBUG] - Aggregated resource count: 23\n2018/05/19 18:48:15 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8\n2018/05/19 18:48:15 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 21\n2018/05/19 18:48:15 [DEBUG] - Aggregated resource count: 29. The logging of the worker node:\n2018/05/19 18:46:51 [DEBUG] - Using agent port: 9001,\n2018/05/19 18:46:51 [DEBUG] - Using cluster address: tasks.portainer_agent,\n2018/05/19 18:46:51 [DEBUG] - Using advertiseAddr: 10.0.8.191,\n2018/05/19 18:46:51 [DEBUG] - Generating TLS files...,\n2018/05/19 18:47:10 [DEBUG] - Agent details: map[NodeName:node1 NodeRole:worker AgentPort:9001],\n2018/05/19 18:47:13 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.8.191,\n2018/05/19 18:47:13 [INFO] serf: EventMemberJoin: 0d6cd4f4494d 10.0.8.191,\n2018/05/19 18:47:13 [DEBUG] - Will join cluster via: tasks.portainer_agent,\n2018/05/19 18:47:13 [INFO] - Starting Portainer agent version 1.0.0-dev on 0.0.0.0:9001,\n2018/05/19 18:47:32 [INFO] serf: EventMemberJoin: 8c7e8525d586 10.0.8.190,\n2018/05/19 18:48:02 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 18:48:02 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 18:48:02 [DEBUG] - Aggregated resource count: 23,\n2018/05/19 18:48:02 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 18:48:02 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 23,\n2018/05/19 18:48:02 [DEBUG] - Aggregated resource count: 31,\n2018/05/19 18:48:15 [DEBUG] - Processing node response for /images/json on node node1, resource count: 9,\n2018/05/19 18:48:15 [DEBUG] - Processing node response for /images/json on node pi, resource count: 14,\n2018/05/19 18:48:15 [DEBUG] - Aggregated resource count: 23,\n2018/05/19 18:48:18 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 21,\n2018/05/19 18:48:18 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 18:48:18 [DEBUG] - Aggregated resource count: 29,\n2018/05/19 18:48:18 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 18:48:18 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 29,\n2018/05/19 18:48:18 [DEBUG] - Aggregated resource count: 37,\n2018/05/19 18:53:58 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 18:53:58 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 21,\n2018/05/19 18:53:58 [DEBUG] - Aggregated resource count: 29,. I was just counting them:\n\n8 on node 1\n21 on pi\n\nNow I have the idea, that the containers from node 1 are duplicated on pi. Maybe because the agent on pi started first.. pi\n2018/05/19 19:25:12 [DEBUG] - Using agent port: 9001,\n2018/05/19 19:25:12 [DEBUG] - Using cluster address: tasks.portainer_agent,\n2018/05/19 19:25:12 [DEBUG] - Using advertiseAddr: 10.0.8.194,\n2018/05/19 19:25:12 [DEBUG] - Generating TLS files...,\n2018/05/19 19:25:20 [DEBUG] - Agent details: map[AgentPort:9001 NodeName:pi NodeRole:manager],\n2018/05/19 19:25:23 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.8.194,\n2018/05/19 19:25:23 [INFO] serf: EventMemberJoin: 360a06207074 10.0.8.194,\n2018/05/19 19:25:23 [DEBUG] - Will join cluster via: tasks.portainer_agent,\n2018/05/19 19:25:23 [INFO] - Starting Portainer agent version 1.0.0-dev on 0.0.0.0:9001,\n2018/05/19 19:25:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:25:36 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:25:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:25:36 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:25:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:25:36 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:25:36 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:25:36 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:25:36 [DEBUG] - Aggregated resource count for /containers/json: 15,\n2018/05/19 19:25:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:25:36 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:25:37 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:25:37 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:25:37 [DEBUG] - Aggregated resource count for /containers/json: 15,\n2018/05/19 19:25:47 [INFO] serf: EventMemberJoin: 0fa33ebae343 10.0.8.193,\n2018/05/19 19:26:05 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:05 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:26:05 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:26:05 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:05 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:26:05 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:05 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:26:05 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:26:05 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 19:26:05 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:26:05 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 19:26:05 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:05 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:26:05 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:26:06 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:26:06 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 19:26:06 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:26:06 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 19:26:47 [DEBUG] - Cluster operation for /networks,\n2018/05/19 19:26:47 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:26:47 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:26:48 [DEBUG] - Cluster operation for /networks,\n2018/05/19 19:26:48 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:26:48 [DEBUG] - Response size for node pi: 14,\n2018/05/19 19:26:48 [DEBUG] - Processing node response for /networks on node node1, resource count: 8,\n2018/05/19 19:26:48 [DEBUG] - Processing node response for /networks on node pi, resource count: 14,\n2018/05/19 19:26:48 [DEBUG] - Aggregated resource count for /networks: 22,\n2018/05/19 19:26:48 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 19:26:48 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:26:48 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:48 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:26:48 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 19:26:48 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:26:51 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:51 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:28:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:11 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:28:12 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:12 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:28:32 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:32 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:28:32 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:32 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:28:32 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:32 [DEBUG] - Redirecting request to pi,\n2018/05/19 19:28:32 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:28:33 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:28:33 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 19:28:33 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:28:33 [DEBUG] - Aggregated resource count for /containers/json: 23,. node1\n2018/05/19 19:25:18 [DEBUG] - Using agent port: 9001,\n2018/05/19 19:25:18 [DEBUG] - Using cluster address: tasks.portainer_agent,\n2018/05/19 19:25:18 [DEBUG] - Using advertiseAddr: 10.0.8.193,\n2018/05/19 19:25:18 [DEBUG] - Generating TLS files...,\n2018/05/19 19:25:44 [DEBUG] - Agent details: map[NodeName:node1 NodeRole:worker AgentPort:9001],\n2018/05/19 19:25:47 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.8.193,\n2018/05/19 19:25:47 [INFO] serf: EventMemberJoin: 0fa33ebae343 10.0.8.193,\n2018/05/19 19:25:47 [DEBUG] - Will join cluster via: tasks.portainer_agent,\n2018/05/19 19:25:47 [INFO] serf: EventMemberJoin: 360a06207074 10.0.8.194,\n2018/05/19 19:25:47 [INFO] - Starting Portainer agent version 1.0.0-dev on 0.0.0.0:9001,\n2018/05/19 19:26:05 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:05 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:26:05 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:05 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:26:47 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 19:26:47 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:26:47 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:47 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:26:47 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 19:26:47 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:26:47 [DEBUG] - Cluster operation for /networks,\n2018/05/19 19:26:47 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:26:48 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:48 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:26:48 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 19:26:48 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:26:48 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 19:26:48 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:26:48 [DEBUG] - Response size for node node1: 1,\n2018/05/19 19:26:48 [DEBUG] - Response size for node node1: 10,\n2018/05/19 19:26:48 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:26:48 [DEBUG] - Response size for node pi: 6,\n2018/05/19 19:26:48 [DEBUG] - Processing node response for /volumes on node node1, resource count: 1,\n2018/05/19 19:26:48 [DEBUG] - Processing node response for /volumes on node pi, resource count: 6,\n2018/05/19 19:26:48 [DEBUG] - Aggregated resource count for /volumes: 7,\n2018/05/19 19:26:48 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:26:48 [DEBUG] - Processing node response for /images/json on node node1, resource count: 10,\n2018/05/19 19:26:48 [DEBUG] - Processing node response for /images/json on node pi, resource count: 15,\n2018/05/19 19:26:48 [DEBUG] - Aggregated resource count for /images/json: 25,\n2018/05/19 19:26:48 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:26:48 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 19:26:48 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:26:48 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 19:26:51 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:51 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:26:51 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:26:51 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:26:51 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:26:52 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:26:52 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 19:26:52 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:26:52 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 19:28:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:28:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:28:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:28:11 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:28:11 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 19:28:11 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:28:11 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 19:28:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:28:12 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:12 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:28:12 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:28:12 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:28:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 19:28:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:28:12 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 19:28:32 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:32 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:28:32 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:28:32 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:28:33 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:28:33 [DEBUG] - Response size for node node1: 23,\n2018/05/19 19:28:33 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:28:33 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 23,\n2018/05/19 19:28:33 [DEBUG] - Aggregated resource count for /containers/json: 38,\n2018/05/19 19:30:58 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:30:58 [DEBUG] - Scheduling cluster operation,\n2018/05/19 19:30:58 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 19:30:58 [DEBUG] - Redirecting request to node1,\n2018/05/19 19:30:58 [DEBUG] - Response size for node pi: 15,\n2018/05/19 19:30:58 [DEBUG] - Response size for node node1: 8,\n2018/05/19 19:30:58 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 19:30:58 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 19:30:58 [DEBUG] - Aggregated resource count for /containers/json: 23,. 2018/05/19 19:59:11 [DEBUG] - Using agent port: 9001,\n2018/05/19 19:59:11 [DEBUG] - Using cluster address: tasks.portainer_agent,\n2018/05/19 19:59:11 [DEBUG] - Using advertiseAddr: 10.0.8.200,\n2018/05/19 19:59:11 [DEBUG] - Generating TLS files...,\n2018/05/19 19:59:25 [DEBUG] - Agent details: map[NodeRole:worker AgentPort:9001 NodeName:node1],\n2018/05/19 19:59:28 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.8.200,\n2018/05/19 19:59:28 [INFO] serf: EventMemberJoin: 566cf2976e5b 10.0.8.200,\n2018/05/19 19:59:28 [DEBUG] - Will join cluster via: tasks.portainer_agent,\n2018/05/19 19:59:28 [INFO] serf: EventMemberJoin: 62791ed819b4 10.0.8.199,\n2018/05/19 19:59:29 [INFO] - Starting Portainer agent version 1.0.0-dev on 0.0.0.0:9001,\n2018/05/19 20:00:10 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:10 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:10 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:10 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:10 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:10 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:10 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:10 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 12,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node pi: 17,\n2018/05/19 20:00:11 [DEBUG] - Processing node response for /images/json on node node1, resource count: 12,\n2018/05/19 20:00:11 [DEBUG] - Processing node response for /images/json on node pi, resource count: 17,\n2018/05/19 20:00:11 [DEBUG] - Aggregated resource count for /images/json: 29,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 14,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /networks on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /networks on node pi, resource count: 14,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /networks: 22,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 6,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /volumes on node node1, resource count: 1,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /volumes on node pi, resource count: 6,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /volumes: 7,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 14,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /networks on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /networks on node pi, resource count: 14,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /networks: 22,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 23,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 23,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /containers/json: 31,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 23,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 23,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /containers/json: 31,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:24 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:24 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Response size for node pi: 14,\n2018/05/19 20:00:24 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:24 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /networks on node pi, resource count: 14,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /networks on node node1, resource count: 8,\n2018/05/19 20:00:24 [DEBUG] - Aggregated resource count for /networks: 22,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:24 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Response size for node node1: 1,\n2018/05/19 20:00:24 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:00:24 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:00:24 [DEBUG] - Response size for node pi: 6,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /volumes on node node1, resource count: 1,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /volumes on node pi, resource count: 6,\n2018/05/19 20:00:24 [DEBUG] - Aggregated resource count for /volumes: 7,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:25 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:25 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:25 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:25 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:25 [DEBUG] - Response size for node node1: 12,\n2018/05/19 20:00:25 [DEBUG] - Response size for node pi: 17,\n2018/05/19 20:00:25 [DEBUG] - Processing node response for /images/json on node node1, resource count: 12,\n2018/05/19 20:00:25 [DEBUG] - Processing node response for /images/json on node pi, resource count: 17,\n2018/05/19 20:00:25 [DEBUG] - Aggregated resource count for /images/json: 29,\n2018/05/19 20:01:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:01:36 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:01:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:01:36 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:01:36 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:01:36 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:01:36 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:01:36 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:01:36 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:01:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:01:36 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:01:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:01:36 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:01:36 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:01:36 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:01:36 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:01:36 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:01:36 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:02:01 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:02:01 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:02:01 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:02:01 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:02:01 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:02:01 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:02:01 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:02:01 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:02:01 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:02:09 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:02:09 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:02:09 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:02:09 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:02:09 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:02:09 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:02:09 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:02:09 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:02:09 [DEBUG] - Aggregated resource count for /containers/json: 23,. 2018/05/19 19:59:11 [DEBUG] - Using agent port: 9001,\n2018/05/19 19:59:11 [DEBUG] - Using cluster address: tasks.portainer_agent,\n2018/05/19 19:59:11 [DEBUG] - Using advertiseAddr: 10.0.8.200,\n2018/05/19 19:59:11 [DEBUG] - Generating TLS files...,\n2018/05/19 19:59:25 [DEBUG] - Agent details: map[NodeRole:worker AgentPort:9001 NodeName:node1],\n2018/05/19 19:59:28 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.8.200,\n2018/05/19 19:59:28 [INFO] serf: EventMemberJoin: 566cf2976e5b 10.0.8.200,\n2018/05/19 19:59:28 [DEBUG] - Will join cluster via: tasks.portainer_agent,\n2018/05/19 19:59:28 [INFO] serf: EventMemberJoin: 62791ed819b4 10.0.8.199,\n2018/05/19 19:59:29 [INFO] - Starting Portainer agent version 1.0.0-dev on 0.0.0.0:9001,\n2018/05/19 20:00:10 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:10 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:10 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:10 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:10 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:10 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:10 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:10 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 12,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:11 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:11 [DEBUG] - Response size for node pi: 17,\n2018/05/19 20:00:11 [DEBUG] - Processing node response for /images/json on node node1, resource count: 12,\n2018/05/19 20:00:11 [DEBUG] - Processing node response for /images/json on node pi, resource count: 17,\n2018/05/19 20:00:11 [DEBUG] - Aggregated resource count for /images/json: 29,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 14,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /networks on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /networks on node pi, resource count: 14,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /networks: 22,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 6,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /volumes on node node1, resource count: 1,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /volumes on node pi, resource count: 6,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /volumes: 7,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 14,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /networks on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /networks on node pi, resource count: 14,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /networks: 22,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 23,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 23,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /containers/json: 31,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:00:12 [DEBUG] - Response size for node pi: 23,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:12 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 23,\n2018/05/19 20:00:12 [DEBUG] - Aggregated resource count for /containers/json: 31,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:24 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:24 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Response size for node pi: 14,\n2018/05/19 20:00:24 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:24 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /networks on node pi, resource count: 14,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /networks on node node1, resource count: 8,\n2018/05/19 20:00:24 [DEBUG] - Aggregated resource count for /networks: 22,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:24 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Response size for node node1: 1,\n2018/05/19 20:00:24 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:00:24 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:00:24 [DEBUG] - Response size for node pi: 6,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /volumes on node node1, resource count: 1,\n2018/05/19 20:00:24 [DEBUG] - Processing node response for /volumes on node pi, resource count: 6,\n2018/05/19 20:00:24 [DEBUG] - Aggregated resource count for /volumes: 7,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /networks,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /volumes,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:24 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:00:24 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:25 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:25 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:00:25 [DEBUG] - Cluster operation for /images/json,\n2018/05/19 20:00:25 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:00:25 [DEBUG] - Response size for node node1: 12,\n2018/05/19 20:00:25 [DEBUG] - Response size for node pi: 17,\n2018/05/19 20:00:25 [DEBUG] - Processing node response for /images/json on node node1, resource count: 12,\n2018/05/19 20:00:25 [DEBUG] - Processing node response for /images/json on node pi, resource count: 17,\n2018/05/19 20:00:25 [DEBUG] - Aggregated resource count for /images/json: 29,\n2018/05/19 20:01:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:01:36 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:01:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:01:36 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:01:36 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:01:36 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:01:36 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:01:36 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:01:36 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:01:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:01:36 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:01:36 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:01:36 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:01:36 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:01:36 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:01:36 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:01:36 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:01:36 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:02:01 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:02:01 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:02:01 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:02:01 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:02:01 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:02:01 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:02:01 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:02:01 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:02:01 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:02:09 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:02:09 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:02:09 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:02:09 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:02:09 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:02:09 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:02:09 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:02:09 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:02:09 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:04:49 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:04:49 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:04:49 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:04:49 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:04:49 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:04:49 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:04:49 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:04:49 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:04:49 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:04:49 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:04:49 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:04:49 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:04:49 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:04:49 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:04:49 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:04:49 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:04:49 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:04:49 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:05:02 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:05:02 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:05:02 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:05:02 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:05:02 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:05:03 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:05:03 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:05:03 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:05:03 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:05:47 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:05:47 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:05:47 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:05:47 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:05:47 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:05:47 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:05:47 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:05:47 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:05:47 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:05:47 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:05:47 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:05:47 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:05:47 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:05:47 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:05:47 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:05:47 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:05:47 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:05:47 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:05:59 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:05:59 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:05:59 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:05:59 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:05:59 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:05:59 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:05:59 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:05:59 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:05:59 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:06:08 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:06:08 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:06:08 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:06:08 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:06:08 [DEBUG] - Response size for node node1: 8,\n2018/05/19 20:06:08 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:06:08 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/19 20:06:08 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:06:08 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/19 20:06:08 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:06:08 [DEBUG] - Scheduling cluster operation,\n2018/05/19 20:06:08 [DEBUG] - Cluster operation for /containers/json,\n2018/05/19 20:06:08 [DEBUG] - Redirecting request to node1,\n2018/05/19 20:06:09 [DEBUG] - Response size for node pi: 15,\n2018/05/19 20:06:09 [DEBUG] - Response size for node node1: 23,\n2018/05/19 20:06:09 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/19 20:06:09 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 23,\n2018/05/19 20:06:09 [DEBUG] - Aggregated resource count for /containers/json: 38,. On the first hit it already went wrong:\n2018/05/20 07:57:05 [DEBUG] - Using agent port: 9001,\n2018/05/20 07:57:05 [DEBUG] - Using cluster address: tasks.portainer_agent,\n2018/05/20 07:57:05 [DEBUG] - Using advertiseAddr: 10.0.8.203,\n2018/05/20 07:57:05 [DEBUG] - Generating TLS files...,\n2018/05/20 07:57:21 [DEBUG] - Agent details: map[NodeName:node1 NodeRole:worker AgentPort:9001],\n2018/05/20 07:57:24 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.8.203,\n2018/05/20 07:57:24 [INFO] serf: EventMemberJoin: db9cb4feb12a 10.0.8.203,\n2018/05/20 07:57:24 [DEBUG] - Will join cluster via: tasks.portainer_agent,\n2018/05/20 07:57:24 [INFO] - Starting Portainer agent version 1.0.0-dev on 0.0.0.0:9001,\n2018/05/20 07:57:26 [INFO] serf: EventMemberJoin: 8a8ea756b55b 10.0.8.202,\n2018/05/20 07:57:26 #########,\n2018/05/20 07:57:26 [DEBUG] - Scheduling cluster request for /containers/json,\n2018/05/20 07:57:26 #########,\n2018/05/20 07:57:26 [DEBUG] - Scheduling cluster request for /images/json,\n2018/05/20 07:57:27 [DEBUG] - Redirecting request to node1,\n2018/05/20 07:57:27 [DEBUG] - Redirecting request to node1,\n2018/05/20 07:57:27 [DEBUG] - Proxy response body length: 11337,\n2018/05/20 07:57:27 [DEBUG] - Proxy response body length: 3845,\n2018/05/20 07:57:27 [DEBUG] - Response body length for node node1: 11337,\n2018/05/20 07:57:27 [DEBUG] - Response body length for node node1: 3845,\n2018/05/20 07:57:27 [DEBUG] - JSON response size for node node1: 10,\n2018/05/20 07:57:27 [DEBUG] - JSON response size for node node1: 8,\n2018/05/20 07:57:27 [DEBUG] - Response body length for node pi: 5507,\n2018/05/20 07:57:27 [DEBUG] - Response body length for node pi: 28710,\n2018/05/20 07:57:27 [DEBUG] - JSON response size for node pi: 14,\n2018/05/20 07:57:27 [DEBUG] - Processing node response for /images/json on node node1, resource count: 10,\n2018/05/20 07:57:27 [DEBUG] - Processing node response for /images/json on node pi, resource count: 14,\n2018/05/20 07:57:27 [DEBUG] - Aggregated resource count for /images/json: 24,\n2018/05/20 07:57:27 #########,\n2018/05/20 07:57:27 [DEBUG] - JSON response size for node pi: 15,\n2018/05/20 07:57:27 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/20 07:57:27 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/20 07:57:27 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/20 07:57:27 #########,\n2018/05/20 07:57:31 #########,\n2018/05/20 07:57:31 [DEBUG] - Scheduling cluster request for /containers/json,\n2018/05/20 07:57:32 [DEBUG] - Redirecting request to node1,\n2018/05/20 07:57:32 #########,\n2018/05/20 07:57:32 [DEBUG] - Scheduling cluster request for /containers/json,\n2018/05/20 07:57:32 [DEBUG] - Proxy response body length: 11337,\n2018/05/20 07:57:32 [DEBUG] - Response body length for node node1: 11337,\n2018/05/20 07:57:32 [DEBUG] - JSON response size for node node1: 8,\n2018/05/20 07:57:32 [DEBUG] - Redirecting request to node1,\n2018/05/20 07:57:33 [DEBUG] - Proxy response body length: 11337,\n2018/05/20 07:57:33 [DEBUG] - Response body length for node node1: 11337,\n2018/05/20 07:57:33 [DEBUG] - JSON response size for node node1: 8,\n2018/05/20 07:57:33 [DEBUG] - Response body length for node pi: 28710,\n2018/05/20 07:57:33 [DEBUG] - JSON response size for node pi: 15,\n2018/05/20 07:57:33 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/20 07:57:33 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15,\n2018/05/20 07:57:33 [DEBUG] - Aggregated resource count for /containers/json: 23,\n2018/05/20 07:57:33 #########,\n2018/05/20 07:57:33 [DEBUG] - Response body length for node pi: 41078,\n2018/05/20 07:57:33 [DEBUG] - JSON response size for node pi: 23,\n2018/05/20 07:57:33 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8,\n2018/05/20 07:57:33 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 23,\n2018/05/20 07:57:33 [DEBUG] - Aggregated resource count for /containers/json: 31,\n2018/05/20 07:57:33 #########,\n2018/05/20 07:58:14 [DEBUG] - Proxy response body length: 5065,\n2018/05/20 07:58:14 [DEBUG] - Proxy response body length: 4578,\n2018/05/20 07:58:17 [DEBUG] - Proxy response body length: 4649,\n2018/05/20 07:58:20 [DEBUG] - Proxy response body length: 4720,. pi\n2018/05/20 07:57:05 [DEBUG] - Using agent port: 9001,\n2018/05/20 07:57:05 [DEBUG] - Using cluster address: tasks.portainer_agent,\n2018/05/20 07:57:05 [DEBUG] - Using advertiseAddr: 10.0.8.202,\n2018/05/20 07:57:05 [DEBUG] - Generating TLS files...,\n2018/05/20 07:57:23 [DEBUG] - Agent details: map[NodeName:pi NodeRole:manager AgentPort:9001],\n2018/05/20 07:57:26 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.8.202,\n2018/05/20 07:57:26 [INFO] serf: EventMemberJoin: 8a8ea756b55b 10.0.8.202,\n2018/05/20 07:57:26 [DEBUG] - Will join cluster via: tasks.portainer_agent,\n2018/05/20 07:57:26 [INFO] serf: EventMemberJoin: db9cb4feb12a 10.0.8.203,\n2018/05/20 07:57:26 [INFO] - Starting Portainer agent version 1.0.0-dev on 0.0.0.0:9001,\n2018/05/20 07:57:27 [DEBUG] - Redirecting request to pi,\n2018/05/20 07:57:27 [DEBUG] - Redirecting request to pi,\n2018/05/20 07:57:27 [DEBUG] - Proxy response body length: 28710,\n2018/05/20 07:57:27 [DEBUG] - Proxy response body length: 5507,\n2018/05/20 07:57:32 [DEBUG] - Redirecting request to pi,\n2018/05/20 07:57:33 [DEBUG] - Proxy response body length: 28710,\n2018/05/20 08:00:09 [DEBUG] - Proxy response body length: 5065,\n2018/05/20 08:00:09 [DEBUG] - Proxy response body length: 1284,\n2018/05/20 08:00:13 [DEBUG] - Proxy response body length: 1355,\n2018/05/20 08:00:16 [DEBUG] - Proxy response body length: 1426,\n2018/05/20 08:00:18 [DEBUG] - Proxy response body length: 1497,\n2018/05/20 08:00:21 [DEBUG] - Proxy response body length: 1568,\n2018/05/20 08:00:24 [DEBUG] - Proxy response body length: 1639,\n2018/05/20 08:00:28 [DEBUG] - Proxy response body length: 1710,\n2018/05/20 08:00:31 [DEBUG] - Proxy response body length: 1781,. remco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:32 #########\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:32 [DEBUG] - Scheduling cluster request for /containers/json\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:32 [DEBUG] - Proxy response body length: 11337\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:32 [DEBUG] - Response body length for node node1: 11337\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:32 [DEBUG] - JSON response size for node node1: 8\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:32 [DEBUG] - Redirecting request to node1\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Proxy response body length: 11337\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Response body length for node node1: 11337\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - JSON response size for node node1: 8\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Response body length for node pi: 28710\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - JSON response size for node pi: 15\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 15\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Aggregated resource count for /containers/json: 23\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 #########\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Response body length for node pi: 41078\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - JSON response size for node pi: 23\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Processing node response for /containers/json on node node1, resource count: 8\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Processing node response for /containers/json on node pi, resource count: 23\nremco_portainer_agent.0.xvz0748dtyw3@node1    | 2018/05/20 07:57:33 [DEBUG] - Aggregated resource count for /containers/json: 31. I'll give it a try this evening.\nVerstuurd vanaf mijn iPhone\n\nOp 20 mei 2018 om 16:16 heeft Anthony Lapenna notifications@github.com het volgende geschreven:\n@Duvel just updated the image to use go 1.10 instead of 1.9, could you give a try and just tell me if it solves the issue?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. It is running now and still showing the same issue.. remco_portainer_agent.0.w69tzwl8n398@pi    | 2018/05/20 19:19:34 [DEBUG] - Redirecting request to pi\nremco_portainer_agent.0.w69tzwl8n398@pi    | 2018/05/20 19:19:34 [DEBUG] - Proxy response body length: 24459\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Proxy response body length: 11336\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Response body length for node node1: 11336\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - JSON response size for node node1: 8\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Response body length for node pi: 24454\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - JSON response size for node pi: 13\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Aggregated resource count for /containers/json: 21\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 #########\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Redirecting request to node1\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Proxy response body length: 11336\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Response body length for node node1: 11336\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - JSON response size for node node1: 8\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Response body length for node pi: 24454\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - JSON response size for node pi: 13\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Aggregated resource count for /containers/json: 21\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 #########\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Response body length for node pi: 36741\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - JSON response size for node pi: 21\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 [DEBUG] - Aggregated resource count for /containers/json: 29\nremco_portainer_agent.0.yn8087vhj9op@node1    | 2018/05/20 19:21:22 #########. It should be 8 + 13 = 21.. I think it has improved with the latest version, but in some totals for the swarm I still see wrong number of containers, like the endpoint dashboard and the endpoint picker.. I'm experiencing this issue as well. I'm using the portainer_agent.\n\nSometimes it does work when deleting from the container list, but most times not.\nThe request fails with a 404.. Found the time to test, and it seems to be working now.\nBut a strange thing was that my stack also was marked as public and after a few reloads as only for administrators.\nI'll close for now and will keep a watch if it happens again.. Ah, is this the cause, I noticed this problem as well.. Maybe related to #2133, but portainer runs on the same host and stores it's data in a volume.. ",
    "hilschernetpi": "Hi there,\nwe are faced with the same problem.  Today you cannot specify any --device during creation of a container. We need access to the SPI-Port of our Docker host using this option in command shell\n--device=/dev/spidev0.0:/dev/spidev0.0 \nThrough portainer you can't use this option today.\nMaybe my comment gives @zhouteng 's request a higher priority.\n. @deviantony ... super duper. I just started to work on it, located the files to be edited. Will come with a proposal and PR in the next couple of days.. @deviantony I wanted to test my edits today. I checked the doc explaining how to contribute carefully.\nI am running ubuntu 16.04 and all commands explained worked fine: git checkout https://github.com/portainer/portainer.git && cd portainer && npm install etc.\nAfter grunt build I started it the with grunt run-dev. I see the container starting with docker ps -a\nI went to http://localhost:9000 and expected the portainer.io landing page popping up. Instead I see just a folder list as outputs in my firefox browser:\n.dockerenv\ncss/\ndata/\ndev/\netc/\nportainer\nproc/\nsys/\ntemplates/\nvar/\nMy question is where is the index.html file and what did I wrong?\nMaybe the latest docker version I am using generates this problem?\nI am using \n```\nClient:\n Version:      17.03.0-ce\n API version:  1.26\n Go version:   go1.7.5\n Git commit:   60ccb22\n Built:        Thu Feb 23 11:02:43 2017\n OS/Arch:      linux/amd64\nServer:\n Version:      17.03.0-ce\n API version:  1.26 (minimum version 1.12)\n Go version:   go1.7.5\n Git commit:   60ccb22\n Built:        Thu Feb 23 11:02:43 2017\n OS/Arch:      linux/amd64\n Experimental: false\n```\nHave you an idea?. @deviantony . I finished the job implementing \"devices\" in portainer. I am about to make a pull request but I need your opinion first about the following: \nA device in Docker's \"HostConfig\" is of structure\ntype DeviceMapping struct {\n    PathOnHost        string\n    PathInContainer   string\n    CgroupPermissions string\n}\nNext to the two pathes there is also a CgroupPermission string. Is that something we should offer to portainer users for edits when creating a new device or shall we set it to \"rwm\" by default? My opinion is that users might get confusing about entering a Cgroups string ... not knowing what they shall enter here exactly. We should keep portainer usage as easy as possible.\nThe Docker source code shows me also that if a user configured privileged mode along with devices the code sets the permission to \"rwm\" in any case. \nYour opinion?\n. @deviantony since I am new with portainer repo ... which branch shall I use to make a PR , develop, master or doesn't matter?. Made all changes as requested.. UI changes made accordingly. Dear Anthony,\nwe are manufacturing the Industrial Raspberry Pi 3 named netPI https://www.netiot.com/netpi/industrial-raspberry-pi-3/.\nSince the beginning this device includes a secured Linux and three additional softwares only: Docker, Portainer.io and a management web GUI.  The dockerd version is little special. It cannot map the /dev/sda1/, has restrictions concerning privileged mode and others.  Also this device has no Linux ssh console access. Every software extension is done through containers only giving the end customers the chance to implement their own software on top of this \u201csecure\u201d device. Nobody is able to compromise the Linux with this architecture. This is how we see \u201copen innovation\u201d. Hilscher provides a hardware and customer completes it to an end device.\nNow the point is that we used portainer 1.12.4 since the beginning till end of last year. We provided HTTP API examples for portainer.io (1.12.4, even not documented officially) in order to let customer load fresh netPI devices with their own software during their manufacturing process. So they are getting devices from us which are of course \u201cempty\u201d and not loaded with any containers. Then they start a http client using netPI\u2019s portainer.io HTTP API to preload the devices with their containers. So no human has a need to use netPI\u2019s Web GUI manually, everything goes automatically.\nSince December we are using portainer 1.19.x. Of course the API has changed and we updated our examples. The examples includes portainer authentication, pulling images, tagging images, etc. and also pushing images. Pushing images to push modified and tagged containers to a registry. And now comes the point: while on 1.12.4 pushing worked fine we detected that pushing under currently used version 1.19.x does no longer works. If we access dockerd socket directly with \u201ccurl\u201d command and x-auth it worked, but not through portainer.io API. And then we were looking for the reason and found the x-registry-auth manipulation in portainer source.\nI understand why you have implemented it. You want portainer.io work as a proxy using the credentials configured. In our use case there is no \u201chuman\u201d and nobody will enter any credentials, we want indeed use dockerd and its API 100% transparently or in your words \u201corchestration\u201d from remote. Over a VPN connection for example if the devices are finally installed in a control cabinet and doing their job.\nThx\nArmin. Hello Antony,\ndo you know Node-RED tool? \nSince we deliver the docker/portainer.io API example to customers as a Node-RED flow, I would a hand over to you an adapted flow that runs against your demo.portainer.io web site.\nNext to pull, tag etc. accesses you find a push to a dockerhub registry in there as well. This fails cause of the x-registry-auth problem. A workaround is also implemented: We implemented a \"create registry\" entry as well. Then portainer.io knows the registry, fills out the x-registry-auth in the push correctly, and then the image push command works ... but the goal is to use it without \"creating a registry\"\nArmin\n. Dear Antony,\nhere a sequence of bash command you can call in a linux console to get to the problem\nshell\n// SET variables for portainer !!! ENDPOINT is set fix to 0 cause it fits do demo.portainer.io!!!\nUSERNAME=admin\nPASSWORD=tryportainer\nURL='http://demo.portainer.io'\n// Login to demo (returns JWT token)\nJWT=$(curl --insecure -d '{\"Username\": \"'${USERNAME}'\", \"Password\": \"'${PASSWORD}'\"}' -X POST ${URL}'/api/auth' | cut -d\"\\\"\" -f4)\n// Pull a simple image e.g. resin/raspberrypi3-alpine\ncurl -H 'Authorization:Bearer '${JWT}'' -X POST ${URL}'/api/endpoints/0/docker/images/create?fromImage=resin/raspberrypi3-alpine&tag=latest'\n// SET variables for docker registry e.g. dockerhub\nUSERNAME_REGISTRY=superjojo2001\nPASSWORD_REGISTRY= <send to you by email separately>\nREGESTRY_URL=\"registry.hub.docker.com\"\nREPO=\"superjojo2001/mytest\"\nTAG=\"latest\"\nAUTH=$(echo '{\"username\": \"'${USERNAME_REGISTRY}'\", \"password\": \"'${PASSWORD_REGISTRY}'\", \"serveraddress\": \"'${REGESTRY_URL}'\"}' | base64 | sed ':a;N;$!ba;s/\\n//g' )\n// Create Container 'myContainer' from 'resin/raspberrypi3-alpine'\nCONTAINER_ID=$(curl -H 'Authorization: Bearer '${JWT}'' -H \"Content-Type: application/json\" -d '{\"Image\":\"resin/raspberrypi3-alpine\"}' -X POST ${URL}'/api/endpoints/0/docker/containers/create?name=myContainer' | cut -d\"\\\"\" -f4)\n// Commit Container to have a tag that fits to the dockerhub repo we want  to push\nQUERY='?container='$CONTAINER_ID'&repo='${REPO}'&tag='${TAG}''\ncurl -H 'Authorization: Bearer '${JWT}'' -X POST ${URL}'/api/endpoints/0/docker/commit'${QUERY}''\n// Push image to e.g. dockerhub and the error appears\ncurl -H 'Authorization: Bearer '${JWT}'' -H 'X-Registry-Auth: '${AUTH}'' -X POST ${URL}/api/endpoints/0/docker/images/${REPO}:${TAG}/push\nCall one command after the other. Change the URL to your local settings if you don't want to test it against demo.portainer.io. The required password for pushing it to my private repositry I will be sending to you in a separate email. \nThx\nArmin\n. ",
    "bintut": "+1\ne.g.  --limit-cpu, --limit-memory, etc.. Hi all,\nI hope that you can add support for \"free form\" options (e.g. --limit-cpu, --limit-memory, etc. or whatever is supported at least in API v1.24) when creating a Docker service at http://$FQDN:9000/#/actions/create/service.\nThank you in advance.\nKind regards,\nMarvin. Hi all,\nIt would be nice that when creating a Docker service at http://$FQDN:9000/#/actions/create/service we can save all the information we entered for later use by clicking (a new) \"Save\" button before or after clicking the \"Create\" button because aside that it consumes more time if we keep on entering the same information but also it is prone to human errors. If we can save it and have it available as a shortcut button, we can simply re-create the Docker service on a single click without filling the information again and again.\nThe \"docker stack deploy\" is another thing. This feature request is simply on a per Docker service we are going to create or Docker services that have been created, because I am still using Docker v1.12.5. However, this feature request should also be applicable to Docker v1.13+ and above.\nKind regards,\nMarvin. +1 for role based AD/LDAP support with audit trail as mentioned by @thomsonac. But I understand that this feature must be on it's own request.\nAs for saving the services, it will help all the users save time and minimize the chance of making typo errors when the objective is just to restart/recreate the same service(s).. +1 here.. ",
    "msgeissler": "Being able to set resource limitations for new containers and get these limitations for already running containers would be highly appreciated.\nI am currently using limitations for all my running containers and recreating the current state would be impossible using portainer.. I will install it on my VPS and see if the error occurs there as well. Once I know more I will let you know.. > I'm wondering if this could be related to the Windows platform as I've already seen filesystem issues with the Go file library before. Would it be possible for you to try it on another platform to confirm that?\nLooks like you are right, on my Linux VPS Version B is not reproducible. This might really be a Windows exclusive bug.. Sorry, forgot to mention that because of #782.\nThe init-wizard would add all the files correctly and after manually reloading portainer it does work (although the UI will not select the endpoint by default this way if I remember correctly).. I have already read that there is going to be a switch to a new Charts.js version, maybe the new version will already fix this or has an option to change the behaviour.. I have already read that there is going to be a switch to a new Charts.js version, maybe the new version will already fix this.. ",
    "kissgyorgy": "I have the same problem, but I got a \"Unable to verify administrator account existence\" error message when I try to log in.. ",
    "icebal": "it no longer is showing the login screen and not taking connections. logs still only show that it starts it on 9000. going to remove and re-add the container and purge the config files. will update the issue if it happens again. deleted portainer data folder and recreated the container and its working now.. when i get home in a couple of hours, i will try and recreate the issue i had by keeping the data folder, killing off the container and images, and redoing it. . so my findings are deleting the container and re-adding it is fine, bit if the data in /var/lib/docker is deleted, and you re-pull the image and recreate the container, it breaks. this shows there is some data not made persistant.. ",
    "eko3alpha": "Sorry for not responding sooner.  After upgrading Docker and moving to a new environment I've not run into this issue or been able to replicate it.  Looks like its working fine now.  Thanks for looking into it!. ",
    "naufdotal": "Hello, sorry for bump closed issues.\nI face this problem too : \"Unable to verify administrator account existence\" popup when i'm access fresh portainer container.\nI've stop and remove container, and re-pull pontainer images, still didn't ask a password for admin for new portainer installation\n```\ndocker version\nClient:\n Version:      17.09.1-ce\n API version:  1.32\n Go version:   go1.8.3\n Git commit:   19e2cf6\n Built:        Thu Dec  7 22:24:48 2017\n OS/Arch:      linux/amd64\nServer:\n Version:      17.09.1-ce\n API version:  1.32 (minimum version 1.12)\n Go version:   go1.8.3\n Git commit:   19e2cf6\n Built:        Thu Dec  7 22:23:29 2017\n OS/Arch:      linux/amd64\n Experimental: false\n``. nope, my server (ubuntu 14.04, kernel 4.9.58) still fresh installed as well as the docker..root@fatih:~# docker ps\nCONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS              PORTS                    NAMES\nf0048900148d        portainer/portainer   \"/portainer\"        2 minutes ago       Up 2 minutes        0.0.0.0:9000->9000/tcp   amazing_jones`\nroot@fatih:~# docker logs amazing_jones\n2017/12/25 15:14:11 Starting Portainer 1.15.5 on :9000\n2017/12/25 15:15:15 http error: User not found (code=404)\nI'm test it on debian stretch, fresh as usual. \nstill face this issue : http://prntscr.com/hs31km. ",
    "DomenicoI": "Hello, I have the same issue. After removing the portainer service and reinstall it doesn't prompt for new password anymore and it states \"unable to verify administrator account existence\". No way to show the new password prompt anymore even deleting the data folder.\ndocker service create --name portainer --publish 9000:9000 --constraint 'node.role == manager' --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=/home/domiac/portainer/data,dst=/data portainer/portainer\nVersion:      18.03.1-ce\n  API version:  1.37 (minimum version 1.12)\n  Go version:   go1.9.5\n  Git commit:   9ee9f40\nKernel Version: 3.10.0-693.2.2.el7.x86_64\nOperating System: CentOS Linux 7 (Core)\n. just one. Which auth view ? I cannot login . I deleted browser cache and tried Also the private navigation but I have always the same problem. I tried with 3 different browsers. ` docker container logs 652a5fcf4bac \n2018/05/08 18:04:54 Starting Portainer 1.16.5 on :9000\n2018/05/08 18:05:25 http error: Invalid credentials (code=422)\n2018/05/08 18:05:27 http error: Invalid credentials (code=422)\n2018/05/08 18:05:27 http error: Invalid credentials (code=422)\n2018/05/08 18:05:27 http error: Invalid credentials (code=422)\n2018/05/08 18:05:28 http error: Invalid credentials (code=422)\n\ndocker service logs mkc8hedq7rl5\nportainer.1.6vtsfafy0o7i@centos-manager    | 2018/05/08 18:04:54 Starting Portainer 1.16.5 on :9000\nportainer.1.6vtsfafy0o7i@centos-manager    | 2018/05/08 18:05:25 http error: Invalid credentials (code=422)\nportainer.1.6vtsfafy0o7i@centos-manager    | 2018/05/08 18:05:27 http error: Invalid credentials (code=422)\nportainer.1.6vtsfafy0o7i@centos-manager    | 2018/05/08 18:05:27 http error: Invalid credentials (code=422)\nportainer.1.6vtsfafy0o7i@centos-manager    | 2018/05/08 18:05:27 http error: Invalid credentials (code=422)\nportainer.1.6vtsfafy0o7i@centos-manager    | 2018/05/08 18:05:28 http error: Invalid credentials (code=422)\n`. > docker container inspect 652a5fcf4bac\n[\n    {\n        \"Id\": \"652a5fcf4bac658f2aa751208b4d10f7e2e247e38a24462b48ed2f602d8aa8d7\",\n        \"Created\": \"2018-05-08T18:04:51.985871887Z\",\n        \"Path\": \"/portainer\",\n        \"Args\": [],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 1487,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2018-05-08T18:04:54.115616304Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:f6dd93561a5fc6c68429becf825f9218be35e8c3ae5696987824c627909f0a06\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/652a5fcf4bac658f2aa751208b4d10f7e2e247e38a24462b48ed2f602d8aa8d7/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/652a5fcf4bac658f2aa751208b4d10f7e2e247e38a24462b48ed2f602d8aa8d7/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/652a5fcf4bac658f2aa751208b4d10f7e2e247e38a24462b48ed2f602d8aa8d7/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/652a5fcf4bac658f2aa751208b4d10f7e2e247e38a24462b48ed2f602d8aa8d7/652a5fcf4bac658f2aa751208b4d10f7e2e247e38a24462b48ed2f602d8aa8d7-json.log\",\n        \"Name\": \"/portainer.1.6vtsfafy0o7iao5dkowkec2ah\",\n        \"RestartCount\": 0,\n        \"Driver\": \"devicemapper\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {},\n            \"RestartPolicy\": {\n                \"Name\": \"\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"Dns\": null,\n            \"DnsOptions\": null,\n            \"DnsSearch\": null,\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"shareable\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"default\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": null,\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": null,\n            \"DeviceCgroupRules\": null,\n            \"DiskQuota\": 0,\n            \"KernelMemory\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": 0,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"Mounts\": [\n                {\n                    \"Type\": \"bind\",\n                    \"Source\": \"/var/run/docker.sock\",\n                    \"Target\": \"/var/run/docker.sock\"\n                },\n                {\n                    \"Type\": \"bind\",\n                    \"Source\": \"/home/domiac/portainer/data1\",\n                    \"Target\": \"/data\"\n                }\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"DeviceId\": \"48\",\n                \"DeviceName\": \"docker-8:2-16777480-7a0fc7c632c025d3b4d2edcc1bd8fdcfe366b5ac2c7d9039c888f0babf64845c\",\n                \"DeviceSize\": \"10737418240\"\n            },\n            \"Name\": \"devicemapper\"\n        },\n        \"Mounts\": [\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/var/run/docker.sock\",\n                \"Destination\": \"/var/run/docker.sock\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"rprivate\"\n            },\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/home/domiac/portainer/data1\",\n                \"Destination\": \"/data\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"rprivate\"\n            }\n        ],\n        \"Config\": {\n            \"Hostname\": \"652a5fcf4bac\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"9000/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": null,\n            \"Image\": \"portainer/portainer:latest@sha256:c73269fd2ee84806be9e0051291f47e7a5ac0ad5842ac1dfd378dbafe22e3c93\",\n            \"Volumes\": {\n                \"/data\": {}\n            },\n            \"WorkingDir\": \"/\",\n            \"Entrypoint\": [\n                \"/portainer\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"com.docker.swarm.node.id\": \"nwbwy2qix017pflusntmlqflx\",\n                \"com.docker.swarm.service.id\": \"mkc8hedq7rl5kdt3byl05eawj\",\n                \"com.docker.swarm.service.name\": \"portainer\",\n                \"com.docker.swarm.task\": \"\",\n                \"com.docker.swarm.task.id\": \"6vtsfafy0o7iao5dkowkec2ah\",\n                \"com.docker.swarm.task.name\": \"portainer.1.6vtsfafy0o7iao5dkowkec2ah\"\n            }\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"db09d56a3731ba79c8a9438aa715360c5abfb350d325c2a3564e28f7ea1f2cf9\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"9000/tcp\": null\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/db09d56a3731\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"\",\n            \"Gateway\": \"\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"\",\n            \"IPPrefixLen\": 0,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"\",\n            \"Networks\": {\n                \"ingress\": {\n                    \"IPAMConfig\": {\n                        \"IPv4Address\": \"10.255.0.6\"\n                    },\n                    \"Links\": null,\n                    \"Aliases\": [\n                        \"652a5fcf4bac\"\n                    ],\n                    \"NetworkID\": \"tvgsh2sxd7kfluw9rpuuh76li\",\n                    \"EndpointID\": \"a5e7374191339d89b1be4d30581ece75b8ab8553087301fd635319b2db823029\",\n                    \"Gateway\": \"\",\n                    \"IPAddress\": \"10.255.0.6\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:0a:ff:00:06\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n. I already tried to remove the persistent data volume /home/domiac/portainer/data1. Are there any other volumes ?. YEP it works. I think it should be added to the documentation. Thank you . ",
    "gpickin": "Having the same issues. \nThe admin user password screen isn't showing. private or not. \nI used another machine, and got to http://165.227.240.94:9000/#/init/admin\nThen sent the link back to my original computer, and could set it.\nI could not create a new user though.\nChanged back to the other computer, and created a user.\nWeird. docker network create --driver overlay portainer_agent_network\ndocker service create    --name portainer_agent    --network portainer_agent_network    -e AGENT_CLUSTER_ADDR=tasks.portainer_agent    --mode global   --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock portainer/agent\ndocker service create --name portainer --network portainer_agent_network --publish 9000:9000 --replicas=1 --constraint 'node.role == manager' --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=/mnt/block-portainer/data,dst=/data portainer/portainer -H \"tcp://tasks.portainer_agent:9001\" --tlsskipverify. I think leveraging that would be easiest... and make the most sense.\nA select2 type filter would be nice. Not sure if there is enough real estate to show the labels in the list view.. ",
    "nickygerritsen": "I sometimes get this on the login page, but then the actual dashboard does work.. Can't we use the read-only mode from Bolt? From their docs:\n\nSometimes it is useful to create a shared, read-only Bolt database. To this, set the Options.ReadOnly > flag when opening your database. Read-only mode uses a shared lock to allow multiple processes to > read from the database but it will block any processes from opening the database in read-write mode.. \n",
    "meeximum": "I have exactly the same problem :-/\nNo info in the logs!. the problem was the nginx reverse proxy config!\nWhen I did it as described in the docu everything worked fine :-)\nhttp://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer. ",
    "cmbankester": "Status / ETA? I can lend a hand if need be. ",
    "Dreamwalker666": "could I suggest a note in the docs for this just hit on this my self :). ",
    "mallchin": "+1 for HA solution. Looks like this was scheduled to be included some time ago but I see the latest docs don't reference SSL at all.\nWould be great to configure without using a reverse proxy.. +1. @kaotika how do you initiate ssh-agent and add the key across reboots?. @kaotika Thanks.  Shame else this is a great solution; I'll investigate further.. Whilst deploying a template referencing an SSH Git repo presumably Portainer simply needs private and public key to authenticate?\nIf so, can we not manually create two secrets with the keys, and reference the secret's IDs inside the template?. Sure, happy to open a new one; before I do, please forgive me, I'm not sure I'm understanding the exact problem.\nThere is an option to add a Custom Docker Registry globally which works for me.\nThere is however no option to add authentication for private Git repositories, HTTPS or SSH, inside templates.  This means deploying a stack fails as it cannot clone the repository.  This is the only feature seemingly not working for me.\nThere is a workaround above using SSH_AUTH_SOCK, and if implemented I am successfully able to deploy a stack via a template using a private Git repository referencing images stored in a private Docker repository.  The workaround breaks on reboots so only useful as a proof-of-concept.\nIs that right?  Is there something else I am missing?. Understood, thank you for the clarification; I have opened #1846 to discuss (2).\nAs for (1), I can pull images from private registries inside templates -- would I be right in thinking, as suggested above, you're now reusing credentials if the registry has already been defined in Portainer?. +1 for private repos -- this is a show stopper. @deviantony awesome, thanks -- can I deploy stacks from private repositories now?  I have a template that points to a private repo but deploying fails as it can't authenticate.  Am I missing something or is this still in development?  If so is there a branch I can test with?\nOther than this I'm loving Portainer -- well done!. Great, thanks; I'll try creating a stack using the tool.\nWould it be possible for the template to reference secrets or some such to authenticate?. @deviantony thank you -- I have been playing with kaotika's SSH_AUTH_SOCK suggestion but it has several drawbacks; unfortunately ssh-agent only starts on login, and the keys need adding manually after each reboot.\nIt is a shame else this works quite well.. +1 SSH is a must :). I vote for a Generate Deploy Key button which generates and displays a public key with a little copy button next to it ready to copy/paste into GitHub/GitLab.  These should be unique per stack.\nIt would also be handy to enter private/public keys manually using text inputs.  This would help people that want to use the same key for all projects and/or have their own preferred keys.\nMost of all it would be really handy to use these in templates.  If you can let me know roughly how templates are deployed perhaps I could find a workaround?. @deviantony looking good!. I agree sensitive information should not be stored in templates.\nA file could work.  This could be bind mounted or one could use a secret.\nI suggest ssh_key_file as the key.. ",
    "OlivierCuyp": "I would love to have some external database like MySQL, Postgres or Mongo anything that can be managed for me with AWS RDS or MongoLab.\nMy main issue is whenever Portainer crashes and data are lost, all my Swarm stacks are lost (in addition to users, etc ...). The links between services and stacks are gone.\nCrash recovery for now is really pain.. @deviantony What approach would you use ?\nThe only solution I can see is mounting /data on the host filesystem and create a cron script to achieve the automatic daily backups.\nIf the node fully crashes, yo'll loose all your data.\nAnd the cron script is not as confortable/trustable as AWS RDS automatic scheduled backups.\nIn addition, external database would also allow to run the Portainer to any node.\n. @deviantony thanks for your answer.\nIf I get it right, the agent is just an http proxy on the docker socket to be able to remotely query docker api.\nQuick note, I believe you'll run into problem when trying to deploy services if you are talking to an agent running on a worker node. So it might be a good idea to add the contraint node.role == manager here and here.\nI still don't really see where this improves the data persistency or even the ability to run Portainer on any node (without any NFS kind of setup)...\nThen NFS is a solution on the any node issue where AWS EFS would accomplish the same but it requires mounting volume on each node and doesn't solve the easy schedule backup, etc...\nSo if I didn't miss anything, I still believe external database would be some much less hassle.. Ok, good to know the agents are aware of which node they are running on. I wasn't sure about this.\nI would have kept the manager constraint to avoid useless extra request between agent. But ok.\nThe main point was the implementation of the possibility to connect an external database for persistence. And from your answers I guess this is not part of your main priorities for now.\nSorry for having pushed so hard for this but to me this is the last stopper to use it on a professional environment.\n. @ncresswell I see the support for external database is part of the 1.20 Roadmap.\nIs it already implemented ?. @dang3r thanks for the tip. We are currently using AWS EFS which is fine for container rescheduling but doesn't solve the following issues:\n\nno HA for portainer itslef\nAutomatic backup are less easy to setup, need specialized container or use a schedule Lambda. @ncresswell I quickly looked at the project dashboard for the 1.20.1.\nI couldn't find this issue anywhere, would it be rescheduled for the version 1.20.2 ?. @deviantony right, sorry for my miss reading.. \n",
    "ryancastle": "So for swarm and services in general, you really need --admin-password-file or --admin-password.\n\nI think there is a substantial security risk with the standard portainer swarm setup docs.\nWhen it's run with a single replica in a swarm you don't really have any control over which node it runs on (without adding constraints). Which means you don't control whether it keeps it's volume or not. Which means you don't control whether a user is compelled to enter a valid admin password, or whether they will be asked to enter a new one in order to gain full admin access to a cluster.\nIt also means you can't reliably cycle passwords without running portainer on every node if your cluster and updating it. Or stopping the service and pruning the volume manually on every node.. ",
    "dang3r": "cc. @OlivierCuyp \nFor those on AWS, have you looked into docker Cloudstor volumes? They provide support for EFS and EBS volumes for backing docker containers. This allows you to share the same state with multiple containers, (EFS) or have high-performance block storage backing your containers. \nIn the case a container is rescheduled because of downtime, the volume is attached in its new location. For more information, see https://docs.docker.com/docker-for-aws/persistent-data-volumes/ .\nThe setup involves installing the volume plugin on all nodes in your docker swarm. You can do this via\ndocker plugin install \\\n        --alias cloudstor:aws \\\n        --grant-all-permissions \\\n        docker4x/cloudstor:17.06.0-ce-aws2 \\ \n        CLOUD_PLATFORM=AWS \\\n        ...\nYou can then add use this volume driver in your stacks (eg. portainer) like so\nvolumes:\n  data:\n    driver: 'cloudstor:aws'\n    driver_opts:\n      backing: shared\nIt minimizes the amount of manual setup. Hope this helps!. @deviantony Is the portainer/agent open source? I was unable to find it as part of the portainer organization. \nI wanted to look at the internals and help contribute to a fix.. Experiencing similar behaviour. We have a swarm cluster on AWS. Each node has access to pull images from ECR and use ecr-credential-helper. \nWhen deploying an image from ECR onto our swarm, it fails to schedule it. Once I pull the image manually on a swarm node, the container is successfully scheduled.. ",
    "Beanow": "@dang3r not on AWS, but cloudstor:azure is causing some issues for us #2482. Perhaps the tidiest approach I can think of would be to generate a ~/.docker/config.json reflecting the credentials the user has access to and use the https://hub.docker.com/_/docker/ image to isolate this user's deployment.\nHowever, it may be worth looking into how well swarm itself protects against leaking of these credentials between stacks/services. What happens when a worker receives a task with this flag? Will that worker consider that new registry for other tasks as well?. @deviantony does what it needs to for me. The permissions we have set up are straightforward so I didn't test concurrent users or multiple repositories. Just admins with a single private registry.\nIt resolves the image tags to hashes and deploys properly. :+1: . Had the same issue, portainer/portainer:pr1512 fixes it for me.\n:+1: . I found out since that it's related in particular to writes. Reading existing stack files and such works just fine.\nAt this point I'm not sure what this relates to. I'm guessing some type of lock or open file that gets disconnected at the smb level. Let me know if there's any particular tests I could do.. To update this issue. We made a few changes to our setup.\n\nUpdated to v1.20.0\nCreated a health monitoring container specifically for this issue.\n\nWhat the monitor does is every 15s:\n\nAuthenticate with portainer.\nSend a DELETE /api/endpoints/1/extensions/1.\nIf it comes back as status code >= 400, stop the portainer container.\n\nThese changes have been running for about 4 days without the problem coming back. I.e. the health monitor never stopped portainer and we've not seen the error since. Edit: the snapshot cronjob errors have also disappeared from the logs.\nIf it's still healthy on monday, I'll stop the health monitor to see if something got fixed with the update or whether it's the frequent activity that prevents it from going bad.. The issue came back after turning off the health checker. So it seems timeout related, not related to the version update.. ",
    "Fish2": "updated to add bug report sorry about that . @deviantony I have just tried with and still dose not go active \n- Firefox 50.1.0\n- Opera 42.0.2393.137\n- Safari 10.0.2\n- Chrome Version 56.0.2924.67 beta (64-bit)\nI have also tried this on mac and ubuntu but not windows \nwith docker page open but will not display as active (i can force it active by editing the pages code in chrome )\n\nwith events page open this one displays as active along with all of them but docker \n\n. can you not use something like this that i use on one of my containers ? not the k flag that ignores unsigned ssl \nHEALTHCHECK --interval=1m --timeout=5s --retries=3 \\\n  CMD curl -skSL -D - https://localhost:8443 -o /dev/null || exit 1. would this help ? https://github.com/portainer/portainer/issues/1364#issuecomment-368037778. It happens every time just the mater of clearing the cache and the refreshing the page.\nSometimes you also have to do a restart on the Portainer container as well. . Yer I\u2019m using the SSL flag\ndocker run -d --name portainer --restart=always -v /docker/certs/selfsigned:/certs -v /docker/containers/portainer/config:/data -v /var/run/docker.sock:/var/run/docker.sock -e TZ=Europe/London -p 9000:9000 portainer/portainer --ssl --sslcert /certs/selfsigned.crt --sslkey /certs/selfsigned.key. ",
    "olsonjj": "Is this still the plan on any possible migration to Angular 2+?  AngularJS goes into LTS support on July 1st.  . ",
    "8473874": "yes. My application has multiple containers, Sometimes the problem is found, My program recorded the container id, I can not find the container ID in the portainer. ",
    "floran974": "hi, i use docker directly on windows not with VM. thank's it s work. ",
    "MonXBZH": "Hey @deviantony ! \nThx for the reply,\nunfortunately, when I use this config sample, I'm just sent to my \"Welcome to Nginx On Debian!\" Nginx web page. \nI must listen on 443, because my Reverse Proxy is encrypting all navigation\nThis is my sample:\n```nginx\n################### DOCKER WEB UI\nupstream portainer {\n    server 192.168.2.202:9000; #address of the main docker server\n}\nserver {\n  listen 443; #because of the SSL encryption on the Reverse Proxy\n  ssl on;\nlocation /portainer/ {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass http://192.168.202:9000; #LAN address of the main Docker server\n  }\n  location /portainer/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer/api/websocket/;#don't really know how to understand that :/\n  }\n}\n```\nThe last address: \"http://192.168.2.202/api/websocket/\" send me to an \"404 not found\" page.\nThx for help and sry for my noob questions. First time i'm setting up a Reverse Proxy ;/\nMonX. Just tried, same issue than before, Welcome to Nginx page appear ^^\"\nMonX. Nope, i just use https://myipaddress:9000\nBefore, when UI has worked but without shell containers, that was that:\n```nginx\nserver {\n        # Portainer\n        listen 443;\n        ssl on;\n    server_name portainer.mydomainename.ovh;\n    location /\n            proxy_pass https://192.168.2.202:9000;\n    }\n\n}\n```\nIf it can be usefull for you.\nMonX. Ok, now i can have access to my login page but credentials are invalid. I ve tried to change them, in local that's perfectly work, but by internet credentials are refused. Dev tool on browser talks about ERROR 422.\nI ve change the location in code: \n```nginx\nserver {\n  listen 443;\n  ssl on;\nlocation / {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass http://portainer/;\n  }\n  location /portainer/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer/api/websocket/;\n  }\n}\n```\nMonX. Done. Container was removed. Same issue: invalid credential\nMy updated config file:\n```nginx\n################# DOCKER WEB UI\nupstream portainer {\n    server 192.168.2.202:9000;\n}\nserver {\n  listen 443;\n  ssl on;\nserver_name portainer.mydomainname.ovh;\n  location / {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass http://portainer/;\n  }\n  location /portainer/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer/api/websocket/;\n  }\n}\n```\nMonX. Okay, to be clear. Config file awas wrong since the beginning.\nMy Reverse Proxy host is also my Portainer host. So, my config file is:\n```nginx\n######### DOCKER WEB UI\nupstream portainer {\n    server 127.0.0.1:9000;\n}\nserver {\n  listen 443;\n  ssl on;\nserver_name portainer.mydomain.ovh;\n  location /portainer/ {\n      proxy_http_version 1.1;\n      proxy_set_header Connection \"\";\n      proxy_pass http://portainer/;\n  }\n  location /portainer/api/websocket/ {\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n      proxy_http_version 1.1;\n      proxy_pass http://portainer/api/websocket/;\n  }\n}\n```\nI use \"docker run **\" to start the container. And his start policy could be \"Always\" cauz' he starts at boot.\nIn this state, i ve got the Welcome To Nginx on Debian message\nMonX. @deviantony, that's the full command: docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:arm\nMonX. And after I add an entrypoint to my main Docker Server using the WEB UI.\nMonX. Yeah of course, Reverse Proxy encrypt all traffic using this command at beginning in donfig file:\nnginx\nserver {\n        listen 80;\n        return 301 https://$host$request_uri;\n}\nSo, even i use http://, it will be translated in https:// .\nMonX. That's this:\n```\nserver {\n        # Portainer\n        listen 443;\n        ssl on;\n    server_name portainer.mydomain.ovh;\n    location / {\n            proxy_pass http://127.0.0.1:9000;\n    }\n\n}\n```\n. Hi mcklane,\nI don't think you need to open a new ticket. Just complete here and try to @mentionnate to @deviantony (app dev) to try to find a solution.\nEDIT: don't see @deviantony just answer to you. My bad. Complete here if the solution do not fix your issue.\nMonX. Bonjour @deviantony ! o/\nTo be clean on this post:\n\n\nCommit already runned containers to change some settings\n==> It was a mistake, I don't talked about Commit function, I talked about a possibility to make some changes on already running containers. If you see what I mean. I don't really know if we can do it for now.\n\n\nHaving a terminal directly on localhost machine on the Web UI (as Cockpit tool does for now)\n==> I gonna try to make a Cockpit container to take some screenshots to show you what I mean. It's just a prompt on the Docker's hosts machine login with a user (created user of install or root).\n\n\nManaging containers's networks and IP addresses\n==> Yeah, my bad, all network features seems here for now ^^\" Just not clicked on the right places...\n\n\nMonX\n. Here, an example of the localhost terminal in Cockpit:\n\nMonX. After investigation, this issue comes from Web browser and not Portainer soft.\nSo, I close this issue.\nMonX. ",
    "mcklane": "Hi,\nI have the same issue but with apache configuration, should I open a new issue or can you help me on this one ?. ",
    "jazoom": "Maybe a message about this can be used instead of \"Unable to resize TTY\"?. Yeah, I can't reproduce it with a one-service compose file.\nNever mind. If I notice it again I'll try to see what might be causing it.. @ChauskinRodion https://docs.docker.com/compose/compose-file/#update_config. ",
    "aenertia": "Agree - i'm comparing portainer to the cockpit-docker use and this is pretty lacking.\nI'll also add this; \nExpose options in the docker (ports/variables/binds) should be inherited from the image dockerfile. \nIt's really odd that when you 'run new container' these details have to be remembered (screenshotted) from the image info display and added manually. . Done https://github.com/portainer/portainer/issues/623. ",
    "psykzz": "While that could work, I feel that's over engineered.\nIm just looking to be able to write in a text box the following and have it parsed to the environment.\nFOO=bar\nENV=Dev\nThis was I don't have to manually go through and add each item.. You store your secrets in git? @bitsofinfo . That's perfect!\nExactly what i was looking for. ",
    "stevenklar": "Do you really think it should be \"replaced\" with the actual handling?\nI think it would be better to \"check\" a setting for \"advanced key/value options\".\nSo on each page where key/value will be used it looks for the \"do the user want advanced key value pairs?\"-option and provide the needed UI.. I know posts like \"i had the same\" are not very helpful but I want to add that I had the same and could only fix it by restarting portainer. After that I could delete/update the stack as usual.\nWhen I get the same issue again I will try to get some more info's on debugging side.. Sadly not really at this point as I just resetup our cluster yesterday.\nWe had 4 services, two of them needs to get killed due to bad container exit strategy (maybe that time is too long?)\nAt first I thought that might be the problem.\nAlso: The stack was deleted in the docker swarm cluster. But portainer still thought it's there.. For me it seems to work now. Will run this version until tomorrow evening.\nCreating stack, delete it manually and remove it with portainer worked fine for me now.\n@deviantony. Thought the same. This is the wrong issue for the discussion I guess.\nEDIT: https://github.com/portainer/portainer/issues/1351\n  . Awesome feature description. I would like to see this!\nAs a grafana user I would like to see the grafana timespan.\n(Off, 5s, 10s, 30s ...)\nOr even realtime with a running socket which would allow a user to use it as a dashboard. We would add this to our office dashboard to monitor the services. Socket would be less resource consuming which is important for dashboards running on a simple rasperry pie or arduino.. It works like a charm. Good job.\nAnthony Lapenna notifications@github.com schrieb am Do., 22. M\u00e4rz 2018 um\n10:22 Uhr:\n\n@stevenklar https://github.com/stevenklar mind giving a try to\nportainer/portainer:pr1751 and tell us if everything is OK on your side?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1704#issuecomment-375230290,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAXLAgcXiH_2C47vzo7yyps_nTpUk18Sks5tg21HgaJpZM4SijDd\n.\n. \n",
    "bitsofinfo": "+1 would be great to pull the ENV file from git, or paste one just like the compose file. no, secrets are externalized via other means than env vars.  This is for non-sensitive environment data we need to apply to the compose file that lives in immutable deployment env files (in git). ",
    "jknight2014": "\nI believe that if you deploy the stack from within Portainer using a git repository, the env file should be loaded.\n\nCan anyone confirm this?. ",
    "ldano": "How about Active Directory integration?. When you say plug-in, is it still free to use?  Support I am thinking will be limited to a forum of some sort.. Got it.  Thanks for the replies.  Nice product.  Pretty much a Docker Datacenter without ldap for now.  Any ideas on the enterprise support pricing?  Per node?  Per domain?. Hi Neil,\nThanks for the pricing list.  Also, what about a Registry?  Image signing on that same note\nThanks,\nLeo Dano\nFrom: Neil Cresswell [mailto:notifications@github.com]\nSent: Thursday, March 16, 2017 3:02 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Leo Dano ldano@qualcomm.com; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] User Access Control (#550)\ntake a look at www.portainer.iohttp://www.portainer.io<http://www.portainer.io%3chttp:/www.portainer.io>\nits per company (domain)\nSent from my iPad\nOn 17/03/2017, at 10:41 AM, Leo Dano notifications@github.com<mailto:notifications@github.com<mailto:notifications@github.com%3cmailto:notifications@github.com>> wrote:\nGot it. Thanks for the replies. Nice product. Pretty much a Docker Datacenter without ldap for now. Any ideas on the enterprise support pricing? Per node? Per domain?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D287199765&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wibUhAPiHcEq0VAy8S6eBol-mrqrzefnXbh29fHoZmo&s=SFSswh4XesXYPyprLvyMhmzA6dTgQwwvkmY7RYTLsRo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldyn0VqliXhdSFEJFgljKPIFJkWoks5rmayCgaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wibUhAPiHcEq0VAy8S6eBol-mrqrzefnXbh29fHoZmo&s=iWmgjcAED1xLH9JfNNIgZK2RdlTWuZLCyKb6TfHMJwM&e=.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-287204659, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdmEWTXf_iONFE8vY55fVY7MvwhbFks5rmbF0gaJpZM4LxGUk.\n. Also, your demo is down still\nThanks,\nLeo Dano\nFrom: Neil Cresswell [mailto:notifications@github.com]\nSent: Monday, March 27, 2017 2:47 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Leo Dano ldano@qualcomm.com; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] User Access Control (#550)\nWe will be adding private registry management, and support for secured registries in q2. At the moment u need to use open registries secured with firewall acl's.\nRgds,\nNeil Cresswell\nOn 28/03/2017, at 10:39 AM, Leo Dano notifications@github.com<mailto:notifications@github.com<mailto:notifications@github.com%3cmailto:notifications@github.com>> wrote:\nHi Neil,\nThanks for the pricing list. Also, what about a Registry? Image signing on that same note\nThanks,\nLeo Dano\nFrom: Neil Cresswell [mailto:notifications@github.com]\nSent: Thursday, March 16, 2017 3:02 PM\nTo: portainer/portainer portainer@noreply.github.com<mailto:portainer@noreply.github.com<mailto:portainer@noreply.github.com%3cmailto:portainer@noreply.github.com>>\nCc: Leo Dano ldano@qualcomm.com<mailto:ldano@qualcomm.com<mailto:ldano@qualcomm.com%3cmailto:ldano@qualcomm.com>>; Comment comment@noreply.github.com<mailto:comment@noreply.github.com<mailto:comment@noreply.github.com%3cmailto:comment@noreply.github.com>>\nSubject: Re: [portainer/portainer] User Access Control (#550)\ntake a look at www.portainer.iohttp://www.portainer.iohttp://www.portainer.io<http://www.portainer.io%3chttp:/www.portainer.io<http://www.portainer.io%3chttp:/www.portainer.io%3e%3chttp:/www.portainer.io%3chttp:/www.portainer.io%3chttp:/www.portainer.io>>\nits per company (domain)\nSent from my iPad\nOn 17/03/2017, at 10:41 AM, Leo Dano notifications@github.com<mailto:notifications@github.com<mailto:notifications@github.com%3cmailto:notifications@github.com>notifications@github.com<mailto:notifications@github.com%3cmailto:notifications@github.com<mailto:notifications@github.com<mailto:notifications@github.com%3cmailto:notifications@github.com%3cmailto:notifications@github.com%3cmailto:notifications@github.com>>>> wrote:\nGot it. Thanks for the replies. Nice product. Pretty much a Docker Datacenter without ldap for now. Any ideas on the enterprise support pricing? Per node? Per domain?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D287199765&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wibUhAPiHcEq0VAy8S6eBol-mrqrzefnXbh29fHoZmo&s=SFSswh4XesXYPyprLvyMhmzA6dTgQwwvkmY7RYTLsRo&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldyn0VqliXhdSFEJFgljKPIFJkWoks5rmayCgaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=wibUhAPiHcEq0VAy8S6eBol-mrqrzefnXbh29fHoZmo&s=iWmgjcAED1xLH9JfNNIgZK2RdlTWuZLCyKb6TfHMJwM&e=.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-287204659, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdmEWTXf_iONFE8vY55fVY7MvwhbFks5rmbF0gaJpZM4LxGUk.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D289594351&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pwBkHvrNv6nU_JC_C5Hpp9e5caXDXZy4u2ZYSpa5JqE&s=E7ikMQSXobVf6HE-Fb4W0-5Jjg7M-IHuabTC5HEhrug&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrld0j9h4or4xaRnIp0r2QOtBfM9Ffks5rqCyOgaJpZM4LxGUk&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pwBkHvrNv6nU_JC_C5Hpp9e5caXDXZy4u2ZYSpa5JqE&s=sf-MEXDA0DWdKVCuUdzfFHhRWwkSpTK9WAVXwU1YBns&e=.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-289596060, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdhcW8gtywtYR4dooTocadDhNlJNbks5rqC5CgaJpZM4LxGUk.\n. Hi Neil,\nWill you be at Dockercon 2017?\nLeo. I got stuck on trying to set this up on my environment.  Can we email each other?. How and where do I join your Slack Channel?  A link maybe?. Ok, created a team called Qualcomm Inc.  How do I invite you?  I don\u2019t have your email address.\nThanks,\nLeo Dano\nFrom: Neil Cresswell [mailto:notifications@github.com]\nSent: Thursday, April 06, 2017 9:25 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Leo Dano ldano@qualcomm.com; Comment comment@noreply.github.com\nSubject: Re: [portainer/portainer] User Access Control (#550)\nPortainer.slack.comhttp://Portainer.slack.com\nRgds,\nNeil Cresswell\nOn 7/04/2017, at 3:23 AM, Leo Dano notifications@github.com<mailto:notifications@github.com<mailto:notifications@github.com%3cmailto:notifications@github.com>> wrote:\nHow and where do I join your Slack Channel? A link maybe?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D292209067&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pgspxQQjHwOCk7bASj8tIHIDA3cR7HCa5wDm25dysBc&s=ckYcOpTgFQYPKCCbm_CHjwhBM8-tUr30Wl_SblW8qhA&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlSxgEwNYfpaoknGPdiJu7sDjMA4Oks5rtQNygaJpZM4LxGUk&d=DQMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=pgspxQQjHwOCk7bASj8tIHIDA3cR7HCa5wDm25dysBc&s=cRPHTsmQ31X6YP_bDM6q4v4ihFd9bHBpLTH9V1vM_M4&e=.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-292228511, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdqfFUswSGeIwWZNFKUtZ4BFAUutuks5rtRHDgaJpZM4LxGUk.\n. Yes, I already joined.  Not sure where to go from there.  It\u2019s like my own communication page with no one to communicate with.\nThanks,\nLeo Dano\nFrom: Anthony Lapenna [mailto:notifications@github.com]\nSent: Thursday, April 06, 2017 10:25 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Leo Dano ldano@qualcomm.com; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] User Access Control (#550)\n@ldanohttps://github.com/ldano you can use the following link to join our Slack: http://portainer.io/slack/\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-292246626, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdhL5LkFfNr7x5fU_S8lti9Pu0mM6ks5rtR_sgaJpZM4LxGUk.\n. Never got it.\nThanks,\nLeo Dano\nFrom: Neil Cresswell [mailto:notifications@github.com]\nSent: Thursday, April 06, 2017 12:02 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Leo Dano ldano@qualcomm.com; Mention mention@noreply.github.com\nSubject: Re: [portainer/portainer] User Access Control (#550)\nI just sent you an invite to our slack..\nRgds,\nNeil Cresswell\nOn 7/04/2017, at 5:29 AM, Leo Dano notifications@github.com<mailto:notifications@github.com<mailto:notifications@github.com%3cmailto:notifications@github.com>> wrote:\nYes, I already joined. Not sure where to go from there. It\u2019s like my own communication page with no one to communicate with.\nThanks,\nLeo Dano\nFrom: Anthony Lapenna [mailto:notifications@github.com]\nSent: Thursday, April 06, 2017 10:25 AM\nTo: portainer/portainer portainer@noreply.github.com<mailto:portainer@noreply.github.com<mailto:portainer@noreply.github.com%3cmailto:portainer@noreply.github.com>>\nCc: Leo Dano ldano@qualcomm.com<mailto:ldano@qualcomm.com<mailto:ldano@qualcomm.com%3cmailto:ldano@qualcomm.com>>; Mention mention@noreply.github.com<mailto:mention@noreply.github.com<mailto:mention@noreply.github.com%3cmailto:mention@noreply.github.com>>\nSubject: Re: [portainer/portainer] User Access Control (#550)\n@ldanohttps://github.com/ldano you can use the following link to join our Slack: http://portainer.io/slack/\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-292246626, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdhL5LkFfNr7x5fU_S8lti9Pu0mM6ks5rtR_sgaJpZM4LxGUk.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_550-23issuecomment-2D292248164&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gZuS5uRBAc1TAS9CogXfLmQTmly3V87LcQ2zTKZ3L7c&s=Lr1JRIr3M01x9mZIj-N_6htFN83vYw_69_iGEjjdJIM&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlcbjjIdNaUUO-2DYbH9vUtFNiw2FYhks5rtSD4gaJpZM4LxGUk&d=DQMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=gZuS5uRBAc1TAS9CogXfLmQTmly3V87LcQ2zTKZ3L7c&s=lRWS69orKQo2NxObGQMbvC-lXrNU5UEzqVtsePxa-rc&e=.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/550#issuecomment-292278863, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHFmdoJ0RNCS_t0JJ6QIV_b1a54IZbSWks5rtTamgaJpZM4LxGUk.\n. ",
    "markelog": "For a month now you guys are having a great discussion here, fun! Your comments however are entirely unrelated to this issue and are received by at least 11 people.\nPlease stop doing that, since it would be cool to be still subscribe to it (just in case) without all that spam. \nThanks\n. ",
    "Filirom1": "@rbrayner did you try with double && instead of simple & ?\n/bin/bash -c \"service ssh start && service mysql start && service cron start && /usr/sbin/apache2ctl -DFOREGROUND\". Indeed, the string /bin/bash -c \"service ssh start && service mysql start && service cron start && /usr/sbin/apache2ctl -DFOREGROUND\" is currently send as this to docker, but should be splitted instead: \n[\"/bin/bash\",  \"-c\" ,\"service ssh start && service mysql start && service cron start && /usr/sbin/apache2ctl -DFOREGROUND\"]\nI am looking for a library like splitargs but usable from bower to fix it. Hi @ncresswell \nI don't see what you are asking for. If you have examples it could help me.\nOtherwize, with html5 dialog we could have something like this easily:\n\nPressing the ESC on the keyboard also cancel the dialog.\nAs for I as know, docker rmi -f doesn't break running container, it only removes tags on the image, but docker rmi -f is needed to remove an image with several tags.. Ok, I will push my commits once I get back home.\nAnd we will iterate on it to have something great :-). Yes, I rebase on master. Bad idea \ud83d\ude22. HTML 5.1 dialog are not well supported by browsers.\nFinally I switched to bootstrap modals.\n\nAre you OK with the usage of the bootbox library ? It eases modal usage.. I like your message, I commit it :dancing_men: . About the linter, I fixed my code, but the linter is still displaying a lot of errors elsewhere in the code.\nAre you aware of it ?\n$ grunt lint |grep ERROR\nLinting gruntfile.js...ERROR\nLinting app/app.js...ERROR\nLinting app/components/createNetwork/createNetworkController.js...ERROR\nLinting app/components/createService/createServiceController.js...ERROR\nLinting app/components/images/imagesController.js...ERROR\nLinting app/components/networks/networksController.js...ERROR\nLinting app/components/stats/statsController.js...ERROR\nLinting app/components/templates/templatesController.js...ERROR\nLinting app/models/event.js...ERROR\nLinting app/rest/container.js...ERROR\nLinting app/rest/event.js...ERROR\nLinting app/rest/exec.js...ERROR\nLinting app/rest/image.js...ERROR\nLinting app/rest/response/handlers.js...ERROR\nLinting app/rest/version.js...ERROR\nLinting app/rest/volume.js...ERROR\nLinting app/services/containerService.js...ERROR\nLinting app/services/imageService.js...ERROR\nLinting app/services/templateService.js...ERROR\nLinting app/services/volumeService.js...ERROR. Or we can do it with some JS: https://jsfiddle.net/wfpwg3cc/\nI just need to check if bootstrap CSS will looks fine.. ok. Hello, I was thinking of implementing this feature in the EntityListService, but there is a lot of interaction with $scope.state. The generic part will be small compared to the scope related part.\nMoreover, the selectItem function is duplicated in all components. If we find a way to refactor i as well it could be great\n```bash\n[vagrant@localhost portainer]$ grep -A 6 -re \"selectItem = function\" app/components/\napp/components/containers/containersController.js:  $scope.selectItem = function (item) {\napp/components/containers/containersController.js-    if (item.Checked) {\napp/components/containers/containersController.js-      $scope.state.selectedItemCount++;\napp/components/containers/containersController.js-    } else {\napp/components/containers/containersController.js-      $scope.state.selectedItemCount--;\napp/components/containers/containersController.js-    }\napp/components/containers/containersController.js-  };\n--\napp/components/endpoints/endpointsController.js:  $scope.selectItem = function (item) {\napp/components/endpoints/endpointsController.js-    if (item.Checked) {\napp/components/endpoints/endpointsController.js-      $scope.state.selectedItemCount++;\napp/components/endpoints/endpointsController.js-    } else {\napp/components/endpoints/endpointsController.js-      $scope.state.selectedItemCount--;\napp/components/endpoints/endpointsController.js-    }\napp/components/endpoints/endpointsController.js-  };\n--\napp/components/images/imagesController.js:  $scope.selectItem = function (item) {\napp/components/images/imagesController.js-    if (item.Checked) {\napp/components/images/imagesController.js-      $scope.state.selectedItemCount++;\napp/components/images/imagesController.js-    } else {\napp/components/images/imagesController.js-      $scope.state.selectedItemCount--;\napp/components/images/imagesController.js-    }\napp/components/images/imagesController.js-  };\n--\napp/components/networks/networksController.js:  $scope.selectItem = function (item) {\napp/components/networks/networksController.js-    if (item.Checked) {\napp/components/networks/networksController.js-      $scope.state.selectedItemCount++;\napp/components/networks/networksController.js-    } else {\napp/components/networks/networksController.js-      $scope.state.selectedItemCount--;\napp/components/networks/networksController.js-    }\napp/components/networks/networksController.js-  };\n--\napp/components/services/servicesController.js:  $scope.selectItem = function (item) {\napp/components/services/servicesController.js-    if (item.Checked) {\napp/components/services/servicesController.js-      $scope.state.selectedItemCount++;\napp/components/services/servicesController.js-    } else {\napp/components/services/servicesController.js-      $scope.state.selectedItemCount--;\napp/components/services/servicesController.js-    }\napp/components/services/servicesController.js-  };\n--\napp/components/volumes/volumesController.js:  $scope.selectItem = function (item) {\napp/components/volumes/volumesController.js-    if (item.Checked) {\napp/components/volumes/volumesController.js-      $scope.state.selectedItemCount++;\napp/components/volumes/volumesController.js-    } else {\napp/components/volumes/volumesController.js-      $scope.state.selectedItemCount--;\napp/components/volumes/volumesController.js-    }\napp/components/volumes/volumesController.js-  };\n[vagrant@localhost portainer]$ grep -A 6 -re \"selectItems = function\" app/components/\napp/components/containers/containersController.js:  $scope.selectItems = function (allSelected) {\napp/components/containers/containersController.js-    angular.forEach($scope.state.filteredContainers, function (container) {\napp/components/containers/containersController.js-      if (container.Checked !== allSelected) {\napp/components/containers/containersController.js-        container.Checked = allSelected;\napp/components/containers/containersController.js-        $scope.selectItem(container);\napp/components/containers/containersController.js-      }\napp/components/containers/containersController.js-    });\n--\napp/components/images/imagesController.js:  $scope.selectItems = function (allSelected) {\napp/components/images/imagesController.js-    angular.forEach($scope.state.filteredImages, function (image) {\napp/components/images/imagesController.js-      if (image.Checked !== allSelected) {\napp/components/images/imagesController.js-        image.Checked = allSelected;\napp/components/images/imagesController.js-        $scope.selectItem(image);\napp/components/images/imagesController.js-      }\napp/components/images/imagesController.js-    });\n--\napp/components/networks/networksController.js:  $scope.selectItems = function(allSelected) {\napp/components/networks/networksController.js-    angular.forEach($scope.state.filteredNetworks, function (network) {\napp/components/networks/networksController.js-      if (network.Checked !== allSelected) {\napp/components/networks/networksController.js-          network.Checked = allSelected;\napp/components/networks/networksController.js-          $scope.selectItem(network);\napp/components/networks/networksController.js-      }\napp/components/networks/networksController.js-    });\n--\napp/components/volumes/volumesController.js:  $scope.selectItems = function (allSelected) {\napp/components/volumes/volumesController.js-    angular.forEach($scope.state.filteredVolumes, function (volume) {\napp/components/volumes/volumesController.js-      if (volume.Checked !== allSelected) {\napp/components/volumes/volumesController.js-        volume.Checked = allSelected;\napp/components/volumes/volumesController.js-        $scope.selectItem(volume);\napp/components/volumes/volumesController.js-      }\napp/components/volumes/volumesController.js-    });\n```. Challenge accepted :yum: . @deviantony I use smart-table to simplify sorting and pagination and I combine it with custom directive for selection and local-storage interaction.\nWhat do you think of this first implementation ?. I based my choice on this stackoverflow: http://stackoverflow.com/questions/21375073/best-way-to-represent-a-grid-or-table-in-angularjs-with-bootstrap-3\nI think that creating a directive that hide/show column with smart-table will not be too hard to implement.. Here is an example: http://embed.plnkr.co/6SHVFH5a2xgz3JAqemt6/\nIt could be customized for portainer.. @deviantony I struggled to find some times to work on this PR, I was a little bit busy this week.\nI just pushed the changes you asked.. I reword it:\n\n. Hello @deviantony, thanks for your feedback. I refactored the code. I think the solution is more generic now. Is it that kind of architecture you had in mind ?. If you are satisfied by the architecture, I will implement it for all entities list.\nBut I am waiting for your feedback before starting in the wrong direction.. I refactored it into EntityListService.\nI also checked the other lists, to implement this feature as well, but because the only action is remove, it doesn't makes sense to remember the removed item.. Having 2 modes for doing the same thing is not my prefered solution. It makes the user interface more complex and increase the number of click needed by the user to get to it.\nI am aware that, it looks less sophisticated, but it's more powerful.\nI tried to make it prettier, but when I add span to separate keys and values, the copy/paste function of Chrome add extra spaces between keys and values that are unwanted. No, I am sorry, I still have this issue.\nI tried on 2 different computers, at home and at work and got the same error.\nTo work on the project, I pull the portainer image, copy the binary into the dist folder and remove the no-analytics flag from the gruntfile.. Indeed, today it's working:\n```\n grunt run-dev\nRunning \"if:unixBinaryNotExist\" (if) task\n[if] tests evaluated false: dist/portainer not found!\n[if] running tasks:\n         shell:buildBinary\nRunning \"shell:buildBinary\" (shell) task\ngithub.com/boltdb/bolt (download)\nFetching https://gopkg.in/alecthomas/kingpin.v2?go-get=1\nParsing meta tags from https://gopkg.in/alecthomas/kingpin.v2?go-get=1 (status code 200)\nget \"gopkg.in/alecthomas/kingpin.v2\": found meta tag main.metaImport{Prefix:\"gopkg.in/alecthomas/kingpin.v2\", VCS:\"git\", RepoRoot:\"https://gopkg.in/alecthomas/kingpin.v2\"} at https://gopkg.in/alecthomas/kingpin.v2?go-get=1\ngopkg.in/alecthomas/kingpin.v2 (download)\ngithub.com/alecthomas/template (download)\ngithub.com/alecthomas/units (download)\nFetching https://golang.org/x/crypto/bcrypt?go-get=1\nParsing meta tags from https://golang.org/x/crypto/bcrypt?go-get=1 (status code 200)\nget \"golang.org/x/crypto/bcrypt\": found meta tag main.metaImport{Prefix:\"golang.org/x/crypto\", VCS:\"git\", RepoRoot:\"https://go.googlesource.com/crypto\"} at https://golang.org/x/crypto/bcrypt?go-get=1\nget \"golang.org/x/crypto/bcrypt\": verifying non-authoritative meta tag\nFetching https://golang.org/x/crypto?go-get=1\nParsing meta tags from https://golang.org/x/crypto?go-get=1 (status code 200)\ngolang.org/x/crypto (download)\ngithub.com/asaskevich/govalidator (download)\ngithub.com/gorilla/mux (download)\nFetching https://golang.org/x/net/websocket?go-get=1\nParsing meta tags from https://golang.org/x/net/websocket?go-get=1 (status code 200)\nget \"golang.org/x/net/websocket\": found meta tag main.metaImport{Prefix:\"golang.org/x/net\", VCS:\"git\", RepoRoot:\"https://go.googlesource.com/net\"} at https://golang.org/x/net/websocket?go-get=1\nget \"golang.org/x/net/websocket\": verifying non-authoritative meta tag\nFetching https://golang.org/x/net?go-get=1\nParsing meta tags from https://golang.org/x/net?go-get=1 (status code 200)\ngolang.org/x/net (download)\ngithub.com/dgrijalva/jwt-go (download)\ngithub.com/gorilla/securecookie (download)\nBuilding github.com/portainer/portainer\n```\nI am closing this issue.. Hi,\nI understand your point, but passing such parameters as arguments will make this module hard to evolve.\nI would prefer passing parameters as an object: \nModalService.confirmModal({\n   title: 'Are you sure?',\n   message: 'Forcing the removal of the image will remove the image even if it has multiple tags or if it is used by stopped containers.',\n  confirm: {\n    label: 'Remove the image'\n  },\n  cancel: {\n    label: 'cancel'\n  }\n})\nTo make my point clear, in our situation, the className of the confirm button is red for danger.\nThis may not be the case, if later, for example, we want to use this service to confirm a password change.\nPassing an object will make it simpler to extend with additional parameters.\n. Good point.. I offer you this new solution in https://github.com/portainer/portainer/pull/562/commits/a5944dcb6ae066bbf47e52edd2075051b500cafe, based on object passing.. Of course :-). Perfect !\nI was prefering font-awesome also, but I didn't notice it was already there.. ",
    "rbrayner": "Hi Romain. The same issue happens. See below. Thanks!\n[image: Captura de Tela 2017-02-05 \u00e0s 21.29.21.png]\nEm dom, 5 de fev de 2017 \u00e0s 04:48, Romain notifications@github.com\nescreveu:\n\n@rbrayner https://github.com/rbrayner did you try with double &&\ninstead of simple & ?\n/bin/bash -c \"service ssh start && service mysql start && service cron start && /usr/sbin/apache2ctl -DFOREGROUND\"\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/557#issuecomment-277503245,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ALJMUS7LKPCkwAGVTV8pXq5MYKzbgFaIks5rZX7CgaJpZM4L19Wr\n.\n. \n",
    "xInsertx": "I think Neil's idea is a good idea, but should be treated separately. It would be helpful to pre-populate so users automatically know what ports were exposed. \nShipyard has a button that allows you to automatically assign all exported ports to an unused port from 49153-65535. This means if I start 3 of the same containers with this selected it automaticly maps all exported ports to new ports via this range.. @deviantony no. that is indeed weird. maybe this is an upstream bug in docker itself? i just tried creating volumes again using docker volume create and they still are not displayed if its outside of the root docker folder.\nI can still map them to containers tho and they works fine.. @deviantony ahh. I was unaware bind mounts are treated differently. I assumed because the docker-cli was still managing the -v command it was just making volumes when they didn't exist.\nI found a fix to the problem anyways using a different driver and/or using symlinks.\nI can now see multiple storage locations for volumes so it really appears to be more or less a limitation of the mount/local driver than anything else.\nThanks Anyways. I'll mark this as closed.. ",
    "vorph1": "Template definition\nsob., 4.02.2017, 22:45 u\u017cytkownik Anthony Lapenna notifications@github.com\nnapisa\u0142:\n\n@vorph1 https://github.com/vorph1 are you talking about the template\ndefinition (JSON) or about the template creation form in the UI?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/564#issuecomment-277480261,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AS5cYtx8Qs4_yHSXfJYR9NU8zv8jVCotks5rZPF4gaJpZM4L3L1o\n.\n. \n",
    "mastef": "@deviantony Not sure it belongs here ( or in #1977 ) - it would be great to add custom columns. E.g. I want to see the env_vars in the container list, to be able to sort by VIRTUAL_HOST and/or labels.. ",
    "fthamura": "See what qnap did, the port and ip mapper\nOn Feb 7, 2017 4:02 AM, \"Anthony Lapenna\" notifications@github.com wrote:\n\n@fthamura https://github.com/fthamura @lavvy https://github.com/lavvy\ncould you give me more details here ? I'm not sure I understand what you\nwould like to have inside Portainer. Can't you use the hostname field in\nthe container creation view to achieve that?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/571#issuecomment-277812234,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AANT-i8a1ujASBTFNBBoD-ExPzKdHxfmks5rZ4pdgaJpZM4L3oTW\n.\n. I got this\n\nhttps://github.com/FurqanSoftware/loadcat. ",
    "armpogart": "@deviantony What does hostname and domain fields in container creation do? Can't find that anywhere documented. Is there any proxy or load balancer built-in in portainer?\nI think @fthamura is more about something like traefik or more simple such as nginx-proxy but with UI.. ",
    "nirfse": "I just got into this thread by looking for an implementation of the very same ideas presented by @1138-4EB. Particularly resolving containers inside docker networks dynamically (as they get run/started) by host machine via <container_name>.<network_name>.local (or similar/custom) pattern.\nIt would be awesome if such functionality is implemented in Portainer.. ",
    "seffyroff": "Another approach could be to use Consul service discovery combined with Consul-Template to render hosts files?. FYI the Docker Cloud service is shutting down next month: https://docs.docker.com/docker-cloud/migration/. This is hit and miss for me - sometimes I get the log and sometimes not.  I'll keep trying to get a solid repro... I wonder if it's the size of the data that causes the issue?  the green tick doesn't appear if I have a large log when I click copy, but selecting a couple of lines then hitting copy selected does work, and the green tick appears.\nI love the new log functionality by the way!  I would like to see shift and ctrl select for picking ranges and multiple lines to copy in the future please :). ",
    "bigbill91": "+1. Hi @deviantony,\nWhen i inspect the request on /api/docker/info via the Developer tools, I get this error : {\"err\":\"Unauthorized\"} and nothing shown on the container output docker logs <PORTAINER_CONTAINER> \nCan you explain us how to fix that error ?. ",
    "hemanthbs12": "+1\n. ",
    "tuudik": "@deviantony I dont know what just happened. I stopped nginx-proxy and portainer yesterday. When I launched them today, it started to work perfectly :/ And I tried restarting before.... Maybe it was issue with browser cache.\nPerhaps @bigbill91 @hemanthbs12 can still reproduce.. ",
    "gjaegle": "maybe look for Containous/Traefik.... ",
    "davistan": "Just a suggestion, can integrate with something like this - https://github.com/jwilder/nginx-proxy for nginx.. ",
    "Nottt": "Yes please!! Or at least how can I do this without crashing the log reporting? I tried to just delete everything inside the log file but then I have to restart the container to make it work.. I went to /var/lib/docker/xxx/*.log with vi, deleted everything inside the file and then portainer would be unable to show log results because of a EOF error. It works after restart, . ",
    "roysG": "any update?. Ok, Can i do alert notification on error or alert on over limit traffic usage?\n. The problem still exists, any update?\n version: 1.16\nI success run it manually through the command line with adding the parameter: --with-registry-auth. When i run inside the ssh the command:\ndocker stack deploy -c docker-pro.yml test11 --with-registry-auth.\nthen, all the nodes including the swarm server recognize the private images.\nWhen i am trying to run the same compose file with \"portainer\" then i get error with the access to the private registery.\nI guess maybe when i run this with \"protainer\" then the it run without the parameter: \"--with-registry-auth\" ?\n. My registries is on docker cloud.\nI defined the username and password in docker hub, does it fine?. ",
    "bergtwvd": "It is odd that nobody else has mentioned this issue.\nDo people only use plain http through the proxy?  (well, that works, but is not what I want to use)\nAnybody got SLL working and how?\n. Thanks the info.\nI have managed to cut it down to the following working nginx config:\n````\nevents {\n    worker_connections  1024;\n}\nhttp {\n  upstream portainer {\n    server 127.0.0.1:5001;\n  }\nmap $http_upgrade $connection_upgrade {\n      default upgrade;\n      '' close;\n  }\nserver {\n    listen 443 ssl;\n    server_name app-docker01.hex.tno.nl;\n# SSL\nssl_certificate /etc/nginx/conf.d/domain.crt;\nssl_certificate_key /etc/nginx/conf.d/domain.key;\n\n# Recommendations from https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html\nssl_protocols TLSv1.1 TLSv1.2;\nssl_ciphers 'EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH';\nssl_prefer_server_ciphers on;\nssl_session_cache shared:SSL:10m;\n\nlocation /portainer/ {\n  proxy_http_version 1.1;\n  proxy_set_header Host              $http_host;   # required for docker client's sake\n  proxy_set_header X-Real-IP         $remote_addr; # pass on real client's IP\n  proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;\n  proxy_set_header X-Forwarded-Proto $scheme;\n  proxy_read_timeout                 900;\n\n  proxy_set_header Connection \"\";\n  proxy_buffers 32 4k;\n  proxy_pass http://portainer/;\n}\n\nlocation /portainer/api/websocket/ {\n  proxy_http_version 1.1;\n  proxy_set_header Upgrade $http_upgrade;\n  proxy_set_header Connection $connection_upgrade;\n  proxy_pass http://portainer/api/websocket/;\n}\n\n}\n}\n````\nThis one did the trick: proxy_buffers 32 4k;\nManual says:\n\nSets the number and size of the buffers used for reading a response from the proxied server, for a single connection. By default, the buffer size is equal to one memory page. This is either 4K or 8K, depending on a platform. . Docker version is:  Docker version 17.06.0-ce, build 02c1d87\n\nI am using Docker Swarm (i.e. not Swarm mode).. Check #591. Maybe related.. I noticed that in Portainer v1.15.0 I do see both entries.\nHowever, seems that regular docker-compose files cannot be started as a stack.. you are correct,  but I had to find this out by reading the issues on the stack template. Your comments are exactly what is missing now. Maybe just add that to the documentation.\nSupport for \"regular\" compose files is a must have for me; but this is requested in several existing  issues already, so I won't open a new one.\nI close this one. Thanks.. ",
    "evertramos": "Just for the record, here is a working sample of Portainer with SSL over a NGINX Proxy:\nhttps://github.com/evertramos/docker-compose-letsencrypt-nginx-proxy-companion. I have an environment working with NGINX Proxy and Portainer, over SSL, with auto renew certificates with Let's Encrypt, everything with Docker.\nHere are the steps to get it to work so you can compare your nginx files to see what you are missing or even use this set up.\n\n\nStart this NGINX Proxy - https://github.com/evertramos/docker-compose-letsencrypt-nginx-proxy-companion\n\n\nStart Poratiner from here - https://github.com/evertramos/docker-portainer-letsencrypt\n\n\nGive some time to get all certificates and you can check the nginx config files.\nHope it will help!\n. @cnaslain if you use nginx-proxy (https://github.com/evertramos/docker-compose-letsencrypt-nginx-proxy-companion) you won't need that, give a try.. ",
    "DeltaEvo": "@deviantony with docker attach you have access to the stdin when it's available. . Yes it's that @deviantony :). ",
    "KyleSanderson": "Any update on this? docker attach is pretty much an absolute necessity for stdin alone, let alone interfacing with non-headless workloads such as SRCDS, rTorrent, irssi... etc.. @deviantony any update on this javascript error?. ",
    "exwizzard": "I would like to check if there was any progress on this feature? I need it to access the console of game servers.. I would like to check if there was any progress on this feature? I need it to access the console of game servers.. I am trying to use the docker websockets via the portainer API, for example:\nconst ws = new WebSocket('ws://portainer:9000/api/endpoints/1/docker/containers/name/logs?follow=true&stdout=true'. I am trying to use the docker websockets via the portainer API, for example:\nconst ws = new WebSocket('ws://portainer:9000/api/endpoints/1/docker/containers/name/logs?follow=true&stdout=true'. ",
    "Gallardo994": "Bump, very useful for game servers. ",
    "viveky4d4v": "Currently no , i would like to have a single portainer container across multiple nodes . But if container moves from one node to another the data will be lost even if i use host mounted volumes . I tried with NFS but it was throwing the error which i mentioned in previous comment .\n. ",
    "postedo": "I have Portainer running in swarm mode as a service (1 replica) using glusterfs for the data. works fine. if the service switches to a other node everything works great . I think this would be a great addition. Especially if this will also be added to the swarm-mode service create\nAt this moment i still have to create services trough ssh since i need to give the --with-registry-auth since my images are in a private registry.. ",
    "ToeiRei": "I could reproduce the problem on NFS. what about the :nocopy option?. didn't have time yet as I am currently using a different solution. Will do so as soon as I got some more time. didn't have time yet as I am currently using a different solution. Will do so as soon as I got some more time. Some more info:\ndocker inspect does give you the merged config - the stuff specified in the metadata for the image itself AND the docker run part. We'd have to separate that by comparing the config for the\nrunning container with the one from the image that container was started from to get the options overridden at runtime.... Some more info:\ndocker inspect does give you the merged config - the stuff specified in the metadata for the image itself AND the docker run part. We'd have to separate that by comparing the config for the\nrunning container with the one from the image that container was started from to get the options overridden at runtime.... Trying to run portainer 1.20.2 on my swarm here. It works for a few seconds before endpoints go down\nPortainer:\n2019/03/18 20:40:47 Templates already registered inside the database. Skipping template import.\n2019/03/18 20:40:57 http error: endpoint snapshot error (endpoint=primary, URL=tcp://tasks.agent:9001) (err=Error response from daemon: )\n2019/03/18 20:40:57 Starting Portainer 1.20.2 on :9000\n2019/03/18 20:41:02 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2019/03/18 20:41:02 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/03/18 20:41:02 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/03/18 20:41:02 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/03/18 20:41:02 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2019/03/18 20:41:03 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/03/18 20:41:03 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/03/18 20:41:07 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2019/03/18 20:41:07 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2019/03/18 20:41:24 http: proxy error: context canceled\n2019/03/18 20:41:44 background schedule error (endpoint snapshot). Unable to create snapshot (endpoint=primary, URL=tcp://tasks.agent:9001) (err=Error response from daemon: )\nAgent on master:\nrancher@rancher:~$ docker logs 6a5fde864e64\n2019/03/18 20:40:44 [INFO] serf: EventMemberJoin: 6a5fde864e64 10.0.3.33\n2019/03/18 20:40:44 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true)\n2019/03/18 20:40:44 [INFO] serf: EventMemberJoin: 58a013aa01fa 10.0.3.32\n2019/03/18 20:40:47 http error: Missing request signature headers (err=Unauthorized) (code=403)\n2019/03/18 20:40:57 http error: Unable to execute cluster operation (err=Get https://10.0.3.32:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\n2019/03/18 20:41:24 http error: Unable to execute cluster operation (err=Get https://10.0.3.32:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\nAgent on worker:\nrancher@nasdocker:~$ docker logs 58a013aa01fa\n2019/03/18 20:40:44 [INFO] serf: EventMemberJoin: 58a013aa01fa 10.0.3.32\n2019/03/18 20:40:44 [INFO] serf: EventMemberJoin: 6a5fde864e64 10.0.3.33\n2019/03/18 20:40:44 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true)\n2019/03/18 20:40:57 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\n2019/03/18 20:41:24 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\n2019/03/18 20:41:44 http error: Unable to execute cluster operation (err=Get https://10.0.3.32:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\n2019/03/18 20:41:44 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nrancher@nasdocker:~$\n. Trying to run portainer 1.20.2 on my swarm here. It works for a few seconds before endpoints go down\nPortainer:\n2019/03/18 20:40:47 Templates already registered inside the database. Skipping template import.\n2019/03/18 20:40:57 http error: endpoint snapshot error (endpoint=primary, URL=tcp://tasks.agent:9001) (err=Error response from daemon: )\n2019/03/18 20:40:57 Starting Portainer 1.20.2 on :9000\n2019/03/18 20:41:02 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2019/03/18 20:41:02 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/03/18 20:41:02 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/03/18 20:41:02 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/03/18 20:41:02 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2019/03/18 20:41:03 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/03/18 20:41:03 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/03/18 20:41:07 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2019/03/18 20:41:07 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n2019/03/18 20:41:24 http: proxy error: context canceled\n2019/03/18 20:41:44 background schedule error (endpoint snapshot). Unable to create snapshot (endpoint=primary, URL=tcp://tasks.agent:9001) (err=Error response from daemon: )\nAgent on master:\nrancher@rancher:~$ docker logs 6a5fde864e64\n2019/03/18 20:40:44 [INFO] serf: EventMemberJoin: 6a5fde864e64 10.0.3.33\n2019/03/18 20:40:44 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true)\n2019/03/18 20:40:44 [INFO] serf: EventMemberJoin: 58a013aa01fa 10.0.3.32\n2019/03/18 20:40:47 http error: Missing request signature headers (err=Unauthorized) (code=403)\n2019/03/18 20:40:57 http error: Unable to execute cluster operation (err=Get https://10.0.3.32:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\n2019/03/18 20:41:24 http error: Unable to execute cluster operation (err=Get https://10.0.3.32:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\nAgent on worker:\nrancher@nasdocker:~$ docker logs 58a013aa01fa\n2019/03/18 20:40:44 [INFO] serf: EventMemberJoin: 58a013aa01fa 10.0.3.32\n2019/03/18 20:40:44 [INFO] serf: EventMemberJoin: 6a5fde864e64 10.0.3.33\n2019/03/18 20:40:44 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true)\n2019/03/18 20:40:57 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\n2019/03/18 20:41:24 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\n2019/03/18 20:41:44 http error: Unable to execute cluster operation (err=Get https://10.0.3.32:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\n2019/03/18 20:41:44 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nrancher@nasdocker:~$\n. ",
    "shawly": "I had the same issue until I added nfsvers=4 to the volume options, you might need the no_root_squash option added to your exports within your nfs server. Might help as a workaround.. This issue still persists in 1.19.1, why does this still need confirmation? This even happens with app templates, just use the wordpress stack to reproduce this issue.... ",
    "tevaum": "I'm facing the same problem here. Tried those solutions but nothing works for me.\nSomething I noted is that it breaks only in swarm. I was able to run it locally at the swarm-manager via docker-compose using the nfs mount successfully. :/. ",
    "alexandrufulop": "[SOLUTION]\nWhen you mount your nfs mounts on the docker host append to your nfs mount options: nolock\n. ",
    "kmkramer": "I'm seeing this as well. I've verified that locking is working on my nfs server (FreeBSD 12, vers=3). Adding nolocks  or local_lock=all to the docker volume causes main.go errors in the portainer_portainer service logs. This is a fresh volume with no initial data in it.\nsnip..\n2019/03/04 17:09:25 Migrating database from version 0 to 17.\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x52b0c0]\ngoroutine 1 [running]:\ngithub.com/boltdb/bolt.(*Bucket).Cursor(...)\n/home/vsts/work/1/s/api/src/github.com/boltdb/bolt/bucket.go:91\ngithub.com/portainer/portainer/bolt/migrator.(*Migrator).retrieveLegacyResourceControls.func1(0xc0001370a0, 0xdcada0, 0xc0001370a0)\n/home/vsts/work/1/s/api/src/github.com/portainer/portainer/bolt/migrator/migrate_dbversion1.go:66 +0xa0\ngithub.com/boltdb/bolt.(*DB).View(0xc0002ca1e0, 0xc0001bd9a0, 0x0, 0x0)\n/home/vsts/work/1/s/api/src/github.com/boltdb/bolt/db.go:629 +0x90\n/home/vsts/work/1/s/api/src/github.com/portainer/portainer/bolt/migrator/migrator.go:82 +0x4bf\n/home/vsts/work/1/s/api/cmd/portainer/main.go:65 +0x170\n/home/vsts/work/1/s/api/cmd/portainer/main.go:519 +0x99\n. ",
    "PotterDai": "Thank you very much for the good work! =D. ",
    "psychowood": "Thank you!. Btw, aren't docker stats aren't the ones already shown under Containers -> containerName -> stats?. @richardgoater I'm quite sure the stats shown in /stats are the same (at least in values) you see in the since stats page: I did a quick test and values are aligned. I agree that a global view (single page, all the containers shown together with the grand total) would be awesome, tho.\n@pascalandy Yep! Not sure if it is the best, I'm sure I'm totally underusing it  :). ",
    "GrayStork": "Great job guys, Keep up the good work!. ",
    "funky81": "Thank you...this is the coolest and simplest Docker Web GUI on the market right now. ",
    "svrooij": "Thanks guys, do you have some donate button? You could even use beerpay that way users can pay you (in beer) to fix specific issues.. Thanks guys, do you have some donate button? You could even use beerpay that way users can pay you (in beer) to fix specific issues.. @danieljuhl I'm glad someone else already created such an issue.\nInternally this might not be so hard. For application you would create a separate \"application user\" (regular user with some kind of flag that says it is an application user). That user could be deleted to revoke all keys for that application. \nAnd since Portainer already uses JWT, you could just create a button that would generate a new key with the lifetime of a year (or some other lifetime, maybe a dropdown) for that application.\nIn my case I would just want to have an application-key with read-only permissions (on some containers, possibly using the team system). To display on a dashboard of sorts.\nA good first step would be to enable the ability to specify the length of the token in the /api/auth endpoint. Or create a new endpoint that only works when the user is an admin, that excepts an (application) user as argument (and the desired lifetime of that token).. @danieljuhl I'm glad someone else already created such an issue.\nInternally this might not be so hard. For application you would create a separate \"application user\" (regular user with some kind of flag that says it is an application user). That user could be deleted to revoke all keys for that application. \nAnd since Portainer already uses JWT, you could just create a button that would generate a new key with the lifetime of a year (or some other lifetime, maybe a dropdown) for that application.\nIn my case I would just want to have an application-key with read-only permissions (on some containers, possibly using the team system). To display on a dashboard of sorts.\nA good first step would be to enable the ability to specify the length of the token in the /api/auth endpoint. Or create a new endpoint that only works when the user is an admin, that excepts an (application) user as argument (and the desired lifetime of that token).. As an addition to this, portainer also marks images used by a hidden container as Unused.\nI'm running a lot of containers but don't want to see the portainer container, so I set it to hidden (in the settings, with a label), but that doesn't mean the image is unused.\n\n. As an addition to this, portainer also marks images used by a hidden container as Unused.\nI'm running a lot of containers but don't want to see the portainer container, so I set it to hidden (in the settings, with a label), but that doesn't mean the image is unused.\n\n. ",
    "se": "I don't remember when we started to use portainer but simple thank you is not enough for you guys!\nWe are preparing for contribution.. ",
    "dbichko": "Any decision on this request?\nIt's essential for me as well - in my case I was looking for \"--shm-size\" (\"ShmSize\") and \"--cpu-shares\" (\"CpuShares\").\nIt's not something that most users would need - though I think it's way more than 1% that would - but it's a showstopper for those that do. Even with the API constraints it can be a reasonably simple implementation: a single text field that accepts a JSON doc to be merged into HostConfig (\"Advanced advanced container settings\"). That or a key-value map for just the top-level keys (would need to do a bit of data type detection).\nI just started using Portainer and really like, the fewer containers I have to create command line, the better!. Any decision on this request?\nIt's essential for me as well - in my case I was looking for \"--shm-size\" (\"ShmSize\") and \"--cpu-shares\" (\"CpuShares\").\nIt's not something that most users would need - though I think it's way more than 1% that would - but it's a showstopper for those that do. Even with the API constraints it can be a reasonably simple implementation: a single text field that accepts a JSON doc to be merged into HostConfig (\"Advanced advanced container settings\"). That or a key-value map for just the top-level keys (would need to do a bit of data type detection).\nI just started using Portainer and really like, the fewer containers I have to create command line, the better!. ",
    "SuperJojo2001": "Well @deviantony I just want to add a comment from my side concerning free defineable additional options. Basically I like the idea of having a line where to enter some more parameters portainer is not offering a solution yet for to specify them. Especially I was looking for the \"--rm\" option. \nWe are running your portainer project in our embedded device https://www.netiot.com/netpi/ and customer requests me to offer openVPN too for it. I found an exisiting container https://hub.docker.com/r/kylemanna/openvpn/ that has been pulled meanwhile 60Mio+ times (so not a 1% demand) and if you dig into details you will find that this openVPN container needs to be called multiple times first to create all the certificates (outputting them in a specified volume). The final call then is starting the server along with the volume where the certificates are located. With the clean option \"--rm\" the first containers all remove themselve (when I am using docker with command line on my raspberry) and you can start right away with another instance. On our device using portainer, customers need to remove the stopped containers manually cause --rm cannot be addressed.\nJust to let you know how real life can be .... To this topic a comment from my side from a practical example point of view:\nAgain I highlight the openVPN container from https://hub.docker.com/r/kylemanna/openvpn/. This container creates root CA, server and client certificates needed for the proper openVPN connection. The container outsource all the certificates to a volume. Later you have to look to the content of the volume (by any method) to get a personal copy of the client certificates for your openVPN client software.\nTherefore I like the idea of browsing the content and files within portainer directly, instead of \"consoling\" the container with linux commands to grab the certificates.\n. ",
    "tylernguyen": "+1 This would also be very useful for me.. ",
    "Payden-Pringle": "I would like to be able to specify --privileged when creating Services.. I would like to be able to specify --privileged when creating Services.. ",
    "Skaronator": "@Payden-Pringle You can already do this. Go in the Runtime & Resources Tab -> \n\n. Didn't exspect a quick response. I've already restart the container so the container it working again. I'll do it once it crash again.\n(Looks like the crash is not related to the container but with ZFS filesystem (https://github.com/moby/moby/issues/24403)). Didn't crashed yet. It only crashed twice within 3 days.\nYou could \"fix\" something else if you want: Add white-space: nowrap to the Name and Ownership column/each cell of those columns. \nIt'd fix those linebreaks:\n\nand here:\n\n. Maybe you could reproduce it by creating a container and set restart police to useless stopped and then kill the container 7 times and it should have the same state as the container in my report.\n\"RestartCount\": 7,\n\"State\": {\n    \"Dead\": false,\n    \"Error\": \"error creating zfs mount of StorageZFS/Docker/2958213595a25bfa3954e99d6580424fc2e877f9bf641d4aeee7c2455d9a4f72 to /var/lib/docker/zfs/graph/2958213595a25bfa3954e99d6580424fc2e877f9bf641d4aeee7c2455d9a4f72: device or resource busy\",\n    \"ExitCode\": 0,\n    \"FinishedAt\": \"2018-01-22T22:30:30.261721401Z\",\n    \"OOMKilled\": false,\n    \"Paused\": false,\n    \"Pid\": 0,\n    \"Restarting\": false,\n    \"Running\": false,\n    \"StartedAt\": \"2018-01-21T20:33:47.168888365Z\",\n    \"Status\": \"exited\"\n}. The container never crashed that way which means that I'm unable to recreate this issue. I'll close this for now and comment if this happens again.. ",
    "Helmi": "I landed here looking for a way to add --volumes-from $othercontainer\nMaybe I'm just completely missing it but I can't even find it after searching the docs and google for 20 minutes. . hmm interesting, so there's only support for a selected set of options from docker?\nAm I supposed to create containers that use that option (in this case one from the dockker hub) through the docker cli then? I just wonder how it's meant to be with portainer.. @deviantony I see. Is there any special reason to not just enable a possibility to openly add additional args to the create/run command like initially suggested here? That just sounds like the best solution to me thought I admire I'm quite new to docker still so may not see the problems connected with that.. Thanks for the explanation. So what you basically say is that it would work if I just create that container manually in the meanwhile (from the cli). \nI'll add a feature request in addition.. ",
    "chenavazer": "... memory-swap ?. ",
    "shwneo": "I need it for --runtime=nvidia when I'm trying to use CUDA in docker.. ",
    "disrupted": "\n... memory-swap ?\n\nhave you found a way to set --memory-swap through Portainer's UI?. ",
    "christoth": "I need \"--cap-add=SYS_PTRACE --security-opt seccomp=unconfined\" to enable gdb C++ debugging. ",
    "BrightSeraph": "Maybe you could create the 'add user-defined configuration part' field to enter a json configuration part.\nThen you could append/merge this json with the configuration that is created elsewhere.\nObviously this should be hidden by default and have a pretty BIG warning that you might kill some kittens with it and a link to the docker engine API reference (so you can look up where you find your --with-dragons --enable-doomsday options)\n(I did not evaluate your code, just assumed you are using the HTTP API). ",
    "jack-fin": "I would like this feature so that I can add various options to Watchtower such as --cleanup to remove old images after automatic update. Fantastic software guys.. ",
    "edasque": "\ud83d\udc4d . ",
    "abrari": "Oh, I forgot to mention that the browser's console displayed no errors. Inspecting the websocket request, the typed commands were sent but no response received.. ",
    "sn00pster": "I can't even get that far, I have a reverse proxy set up and everything in the UI appears to work fine apart from the console, doesn't even get to opening a black box, safari error console shows:\n[Error] WebSocket connection to 'ws://docker.mydomain.com/api/websocket/exec?id=66497ad3afddd527d98c55afdc302047627194fc2f6aae5daf283024f1b80c50' failed: Unexpected response code: 301\nI have the same config that appears on the link above, except that portainer is on the root rather than in a /portainer sub directory.. I think there's an erroneous (missing?) slash somewhere in a URI in the console stuff somewhere in the code, adding this extra location to the proxy config solves the problem with the console not working for me:\n    location /api/websocket/exec {\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection \"upgrade\";\n            proxy_http_version 1.1;\n            proxy_pass http://portainer/api/websocket/exec;\n    }. Yes, but the \"ps\" happens on the host (endpoint) not on the container, so I figured it makes more sense as a setting on the endpoint (which represents the host) than the container.\n\nIf it's a container setting then I'd have to set it for every container I start.\nI did think the same when I first realised what was going on, but I think it makes more sense as an endpoint setting.. Thanks Tony.\nIt's very confusing in the docker documentation (docker top is even better, it's like a one line explanation that says \"docker top\" \ud83d\ude02), if you end up reading through the issues on their GitHub then you find quite a few people confused about how this works and some discussion as to whether you should be able to set the ps binary that docker uses.  I guess in reality it's done this way as there's no guarantee that \"ps\" would be available inside the container.\nFor example, here is me typing ps -efD inside my plex container:\n\nAnd here is me executing it on the docker host (synology):\n\nAnd for completeness, here is the output from \"docker top plex\" on the host:\n\nAnd for \"docker top plex -efD\" on the host:\n\n. ",
    "richardgoater": "Would a visualisation of docker stats output solve this issue? I think that would be a killer feature anyway!. @psychowood I think docker stats shows all containers running on a node, and shows percentage of CPU and memory of the host being used for each. This information available remotely would be amazing for me.. @deviantony Thanks very much for the examples, I'm pretty busy today but I'll hopefully be able to improve the code tomorrow.. @deviantony that's the code updated following the promise examples, and now completes the functionality \ud83d\udc4d . Yeah it looks like a Docker bug. One of our nodes is stuck as \"pending\"\nmembership, even though it shows as \"ready\" and is running tasks. Therefore\nmy global service shows 3/2 :/ docker service ls is showing 3/3, so I\nthink it's reasonably safe to remove the filter.\nOn Wed, 22 Feb 2017, 01:57 Anthony Lapenna, notifications@github.com\nwrote:\n\n@richardgoater https://github.com/richardgoater thanks for the updated\nversion. I'll test it later.\nOne note on the membership filters for the nodes, could you give me more\ndetails about your inconsistence issue?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/614#issuecomment-281543910,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABXQ2QQWMI_0-5qS-kmAo4z0y_HYYaYEks5re5YSgaJpZM4MFi7S\n.\n. btw @deviantony, I notice a bug on this branch when clicking into a node on the nodes list: \n\nhttps://docs.angularjs.org/error/$resource/badcfg?p0=get&p1=object&p2=array&p3=GET&p4=api%2Fdocker%2Fnodes\nI'm on Docker 1.13.1, API version 1.26. Not sure if it's an error I've introduced or a pre-existing one.. @WTFKr0 thanks for testing it, could the issue be related to my previous comments? (https://github.com/portainer/portainer/pull/614#pullrequestreview-23093727, https://github.com/portainer/portainer/pull/614#issuecomment-281598422) I think removing the membership filter might solve this, as long as we can reasonably assume that an active node is also a member?. @WTFKr0 this happens on one out of three of my nodes, not sure if it's a Docker bug or something.. @WTFKr0 this line covers it, I don't think this can be done in the API call: https://github.com/portainer/portainer/pull/614/files#diff-c6751901757a126db383af452eca289bR86. @deviantony I was away when this was merged, thanks again for your time \ud83d\udc4d . would love to see this picked up again now that service logs is stable in Docker 17.05. Would it just be a case of reverting the revert?. thanks @deviantony.. The membership filter is producing inconsistent output on my workplace's swarm, so it might be better to remove it.. I don't think this is possible, I just tried it and the docker engine returns {\"message\":\"Invalid filter 'Availability'\"} (a bit poor that it still returns 200). I based my implementation on the information here: https://docs.docker.com/engine/api/v1.26/#tag/Node.. It's already filtered client-side (https://github.com/portainer/portainer/pull/614/files#diff-c6751901757a126db383af452eca289bR86). I think removing the membership query will solve the issue, I can push a new commit later this evening.. @WTFKr0 that's pushed, also fixed a bug when clicking into the service. Hopefully the results are better for you now?. ",
    "dustindauncey": "I'm pretty surprised this isn't a feature yet. I'd love to see this added to Portainer.. Just curious... do we actually know the root cause yet? Because this worked fine in the previous version of 1.19.0. I\u2019m not sure if there was a particular feature or something that was with 1.20.0 that introduced this bug, but does it maybe make sense to just revert the changes so it behaves like 1.19.0 and the re-evaluate the feature that made the change in 1.20.0 for a future build? \n\u2014 Dustin Dauncey\n\nOn Jan 22, 2019, at 11:16 AM, Anthony Lapenna notifications@github.com wrote:\nYes, it seems that this case would not be handled correctly by the patch submitted by @weskey007\nIt's good to note that the only way to start a Nginx container with this command using the Docker CLI is by passing the following command string argument nginx -g \"daemon off;\".\nNeither nginx -g daemon off and nginx -g \"daemon off\"; works. Makes sense, it needs a way to group the command. We'll need to review the array to string processor to support this.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. \n",
    "SoltauFintel": "I do not need these features any more because I have developed my own tool in the meantime.. ",
    "ottnorml": "@sn00pster Thanks for your request.\nI am missing this feature too after using UI For Docker  before, which did not have any authentication.. ",
    "jamshid": "Portainer is great but why do I have to login each time I open a new tab? I'm trying to use direct links like this (makes it very easy for non-docker users to work with a container):\nhttp://docker.example.com:9000/#/containers/myproject_mycontainer_1/console\nBut this requires login every time, claiming  \"Your session has expired\". \nI verified my docker (Ubuntu16) and browser are using the correct time. Even restarted the portainer container. So I don't think it's related to https://github.com/portainer/portainer/issues/398. \nHow can I diagnose the problem, which cookie contains authentication (JWT?) and why isn't it a browser-wide, long-lived cookie? . Okay, but imo that's extremely unfriendly UX. People like working with multiple tabs open and hate having to re-login. Even non-technical users use right-click Open Link in New Tab.\nInstead consider making it an HttpOnly or \"secure\" cookie and require https. Running portainer over http is a much more serious security issue than cross-tab cookies. \nThanks for keeping this open, maybe more users will +1 and you'll reconsider.. ",
    "pscl4rke": "Yes, opening up new tabs for different pages is great for compare-and-contrast activities, and is such a major part of my workflows that I'm currently stuck using an older version of Portainer.  I know Portainer's UI is based on a single-page design, but I'm hoping this gets fixed soon so I can start following the mainline again.. ",
    "nathantreid": "@ncresswell why are cookies required? Can't you store the token in localStorage instead of sessionStorage?\nAs it stands this is extremely detrimental to my experience. For example, I need to have the logs in one window and the console connection in another window. I need to also have the freedom of opening other windows to look at other containers.. @ncresswell why are cookies required? Can't you store the token in localStorage instead of sessionStorage?\nAs it stands this is extremely detrimental to my experience. For example, I need to have the logs in one window and the console connection in another window. I need to also have the freedom of opening other windows to look at other containers.. ",
    "yangxiaofei77": "is this issue resolved in the latest portainer?  just ran into this issue when try in swarm mode.. ",
    "GeeBee93": "Is there any progress on this issue? I dont see for my minimal home-server setup any benefits in using portainer without these features. Portainer itself looks pretty nice +1\nThank you :). ",
    "qiankunli": "yes. ",
    "raulriverouria": "Yes :). My apologies because I did not see that field :(.\nBut now, another question: Any way to map host directories inside docker like -v option? Example:\ndocker run -v \"/host/path:/container/path\" ...\nIf I use the ':' char inside a volume definition, I get an \"invalid mode\" error. My trials are with:\n...\n    \"volumes\": [\n        \"/home/docker/data/web/php/etc/php/7.0/apache2:/etc/php/7.0/apache2\",\n        \"/home/docker/data/web/php/etc/php/7.0/cli:/etc/php/7.0/cli\",\n        \"/home/docker/data/web/nginx/usr/local/nginx/conf:/usr/local/nginx/conf\",\n        \"/home/docker/data/web/apache/etc/apache2/apache2.conf:/etc/apache2/apache2.conf\",\n        \"/home/docker/data/web/apache/etc/apache2/apache2-editor.conf:/etc/apache2/apache2-editor.conf\",\n        \"/home/html:/home/html\",\n        \"/usr/local/etc/SSL:/usr/local/etc/SSL\",\n        \"/dev/log:/dev/log\"\n.... ",
    "magicsong": "@deviantony hi, my problem is  the private registries of my company  need an authentication(username&password), how do i use app templates in such condition? . ",
    "PhilipSchmid": "Hi there, \nIn my portainer environment swarm networks are still not selectable. It only shows bridge, host and none when I try to create a a new service from a template.\nDocker: 17.03.1-ce\nPortainer: v1.12.4\nbash\n[root@node1 ~]# docker network ls\nNETWORK ID          NAME                DRIVER              SCOPE\n71b32c74164a        bridge              bridge              local\n1e7326c004b7        docker_gwbridge     bridge              local\n49278dd80f72        host                host                local\njgpyyzj5qv6y        ingress             overlay             swarm\ns2gsj17rux2l        services        overlay             swarm\n2adc0c7dd3d2        none                null                local\nAny guesses why? Thanks.\nRegards,\nPhilip. ",
    "conradoqg": "This is still a problem in the current version 1.20. It's not possible to connect to an attachable swarm network from a standalone container. Could you guys reopen it?\nThanks . ",
    "xAt0mZ": "I'm not able to reproduce, i created a \"test\" overlay attachable network in my swarm \n\nWas able to create a container from a template inside the swarm and to select the test network\n\nWe can see the network has been attached without problems when inspecting the running container \n\nAs you can see on snapshot 2, ingress (swarm overlay non-attachable) is not displayed, but portainer_agent_network and test networks (swarm overlay attachable) are there and can be attached.. Update about download limits on browsers.\nThere are two ways to download files directly from API responses : using blobs or using streams.\nBlobs are mostly used, but they have around 500-800MB filesize limit, depending on the browser (https://github.com/eligrey/FileSaver.js/#supported-browsers). We can't decently take this option to download images on client, as they will break this limit in most cases.\nStream is the decent way to download large files on clients, as they don't use lot of RAM to temporary save the content, and they don't depend on blob size limitation.\nProblem is that streams are only supported on Opera 39+ and Chrome 52+ (https://github.com/jimmywarting/StreamSaver.js#supported-browsers).. @BSchwetzel what you see is valid_tasks_count / available_nodes_count, with no display modification based on the constraints defined in stack file. Will fix this.\n@rkgrep seems to be related to #2049 \n1. I ran a service with 10 replicas on a 7 nodes swarm\n2. Shutdown one of the nodes\n3. docker service ps hw has the following output\n\n -> means : 12 tasks are in running state but 2 want to be (desired state) shutdown\nOn Portainer\n\nWe probably need to filter on the desired state and not the current state @deviantony  ?\n. So, actually this is not a bug imo\nDesired state is Running for 2 tasks, but the current state (last column) is Running for 3 tasks (the same that are shown as Running in Portainer).\nSteps to reproduce the behaviour :\n1. Run docker in swarm mode with at least 2 nodes\n2. Run a service on the swarm\n3. Down a node\n4. docker service ps <your service>\n-> Will reproduce the same behaviour. To me, it's docker related, not portainer related.\n@deviantony . Found them here : https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities\nFirst table containing default caps added (that can be dropped), second one containing all caps that can be added (dropped by default).. @ncresswell to test this I created 2 containers with the same cap-add/cap-drop by\n1. Portainer on container1\n2. docker CLI on container2\n3.  docker inspect both containers straight on the host to see if they had the same added/dropped capabilities\nNote : docker inspect doesn't show the default added/dropped capabilities for a container created with CLI and containers created with Portainer have them all explicit.\nI can work to avoid adding them all on CapAdd/CapDrop fields if the capability is on it's default value (so that, docker inspect on a container created with CLI or Portainer won't show any diff on those fields). @deviantony updated. @deviantony done!. @deviantony updated. Do you have internet speed issues ?\nThe timing for every download is very high. For example 16.32s for 1MB on /tasks (last screen). Very low TTFB (green part of waterfall) but high download time (blue part).. I'm going to rework the entire view, as we should not hide \"above\" elements when clicking a field somewhere in a page -> with the actual layout we can't hide IPAM (network) config if a user clicks the MACVLAN > Creation section (we can technically, but we don't want to as it's not UX/UI friendly).\nUCP has the same layout than we have but in a different order (screenshots below).\nFor configuration : \n\n\n\nFor deployment : \n\n\n\nThey don't have Network Card selection, and it doesn't seem to be mandatory on the examples I found about MACVLAN usage ; will fix it.\nAux address refers to the --aux-address options of docker CLI (Auxiliary IPv4 or IPv6 addresses used by Network driver). Should find a term that describes this purpose in a better way (i don't know what this option does exactly, it excludes the address from the pool to assign it to a specific client ? Why the my-router= | mynas= | my-printer= prefix in this example ?). @ncresswell @deviantony UI reworked, waiting for you feedback !. @ncresswell forgot to save parent network card, fixed it !\nAlso added the --attachable option on network creation, as we don't have it.\nShould be working as expected now (CLI and Portainer created networks are now identical)\n@deviantony updated. @deviantony updated. @deviantony updated. Running tasks on down nodes in a swarm and failed tasks are showing action buttons, but clicking them will give an error (cf. redis and test services)\nContext\n 3 nodes swarm (1 manager + 2 workers)\n redis service deployed without constraints\n* test service deployed with constraint node.role==worker\nSwarm state\n| Node | Status |\n|---|---|\n| manager1  | UP |\n| node11  | UP |\n| node12  | DOWN |\n\n. @dobe Is your stack showed as Limited in stacks list ?. Note : constraints on node or engine labels are not supported yet, will add them soon.. @deviantony updated. @deviantony updated. Counters will be fixed with PR #2127 , tasks list can be fixed with the same \"hack\" way (e.g. hiding tasks that have desired state != current state).\nGhosts tasks will still be there, but hidden in the UI.. Thanks for the explanation !\nWe should maybe add this knowledge somewhere in Portainer Documentation, as this scenario may be encountered by people.. Hello,\nCan you give us more information about the way you\n\ntried also to start a new service on the worker node from portainer\n\nplease ?\nCan't reproduce your bug on a basic swarm (1 manager / 2 workers) + your stack + services&containers created from Portainer & from CLI.\nEDIT: redis is a service created from CLI & test is a service created from Portainer\nBoth are basic redis services to keep tasks running and avoid flooding\n\n. As containers are specifically labeled, we can run docker container prune --filter label=io.portainer.job.endpoint to delete all stopped containers with the label io.portainer.job.endpoint. API specs\nWe may want to specifically create and tag the associated volumes aswell, so we can run docker volume prune --filter label=io.portainer.job.endpoint API specs. Small question, is this available for every type of setup or only standalone + agent ?\n\nThis feature will be limited to the agent setup on standalone hosts only.\n** When selecting a classic Swarm endpoint (no agent setup), the following warning message should be displayed close to the multi select component: You have selected a Swarm manager as a target. This job will only be executed on this node, NOT on all the nodes inside the cluster.. > Without the ability to inspect/create/update/delete.\n\n@rtmaster editing a down/offline endpoint implies a simple problem that is hard to handle : if your endpoint if modified between last snapshot and the moment Portainer is able to communicate again with it, you may have double modifications on your endpoint.\nQuestion is : which modification should we apply ? The ones done on Portainer offline mode, or the ones done on the endpoint directly, that are considered as \"new\" by Portainer ?\nMore, some updates done on Portainer can be based on deleted data from your endpoint, or some endpoint modifications can be based on Portainer deletes you may have done with offline mode.. @deviantony updated, should be working now.\nI can't test Azure endpoints, but should be working aswell (swarm blocked, standalone working offline). > I've started a Portainer instance with this implementation using existing Portainer data and was not able to explore a down endpoint:\nMay I have some browser network debug logs ? I'm not able to reproduce this behaviour ...\n\nAnd it seems that if I access it now and go back to the home view, it stays as 'Down'. So not sure about how to reproduce this one.\n\nThis is a desync between the snapshot data sent by the API and the real status of the endpoint. It has always been there since we have this snapshot feature.\nWe can only detect and update the endpoint status while trying to access it (or access a view of it).\nWe can't modify the snapshot data, as it's updated by the backend with /endpoints route every time we come back to the Home view.\n\nDisable the ability to click on a down swarm endpoint\n\nThis may not be working very efficiently (related to the previous point). We can't rely on the status given by the snapshot. We maybe want to ping every endpoint and update the snapshot given by the backend everytime we land on the Home page ?\n\nWhat happens when the --no-snapshot flag as been set or if there is no snapshot available for the endpoint when accessing the offline views?\n\nAs long as you need to select the endpoint in the Home view, if there is no snapshot available, your attempt should be rejected. I forgot to do it there\nBy default, interceptors proxiing the requests (to retrieve offline data if necessary) will reject the 502 bad gateway backend response if no snapshot is available - will result in the same behaviour as going to a view on an offline endpoint without this PR.\nNote : --no-snapshot option still returns snapshots with the /endpoints backend call. @deviantony updated. Should be working as expected now.\nFixed another bug where trying to access a down endpoint and failing changed the endpoint ID and publicURL in the global state to the ones of the down endpoint.\nSmall things:\n sometimes loading bar doesn't show up as we chain requests (cfpLoadingbar hasn't time to reset and restart). I modified the Threshold, but it may bug for some clients, depending on the machine performances and overall usage.\n still no \"greyed out\" down endpoints, as it will require us to modify the state, ping & evaluate if the endpoint is allowed to be browsed offline, and disable it if necessary.\nHome view may have a way too long loading time if a client has a lot of down endpoints to check (max 10s * down endpoints count).. @deviantony updated !. @deviantony updated. @chiptus \n\nI'm not sure if it is suppose to be like that. But when clicking an endpoint it doesn't show any loading bar and screen doesn't change. If the endpoint is offline than ping takes time (a few seconds) in which the user just waits. In the first times I thought my click didn't register so I clicked a few times.\n\nWe don't ignore loadingBar on ping request, so it should show up. Actually I faced this behaviour (loadingBar not showing) when been redirected from home to the dashboard. That's why I changed the cfpLoadingBarProvider.latencyThreshold.\nThe cpfLoadingbar doesn't really like when we are chaining API calls ... Issues and potential fixes here and here. @deviantony updated. I'm not able to reproduce the behaviour with the following stack:\nversion: \"3\"\nservices:\n hw:\n  image: httpd\n  environment:\n    DEBUG: \"${DEBUG}\"\n\nTests done on Linux on 2 swarms, with and without Portainer agent.\nStacks creation & modification tested with latest debug branch and 1.19.1 release.\nHow do you test the availability of the env variable ?\nFor information purpose:\ndocker exec CONTAINER_ID /bin/bash -c \"echo $DEBUG\" will return an empty string.\ndocker exec -it CONTAINER_ID /bin/bash + echo $DEBUG will return the value.\ndocker exec CONTAINER_ID /bin/bash -c \"env\" will return the env, containing DEBUG=VALUE\nCan't try to replicate this on Windows, as I don't have the setup.. @deviantony updated. @deviantony updated. @chiptus page reload doesn't trigger for me on new build (yarn start)\nTested a lot of the app (not every usecase but alot) and didn't find any bug with the webpack build.. The warnings say that our generated files are too big, we can modify webpack to chunch them into smaller files that can be lazy loaded after (https://webpack.js.org/guides/code-splitting/).\nNot sure of how to do it on the .svg files, but for .js and .css files, should be working if we follow the guidelines of webpack.. Here are the errors I faced during the testing on portainerci/portainer:pr2407\n\n[x] Network details\n\n\n\n\n\n\n[x]  Service creation \n\n\n\n\n\n\n[x] Service edit\n\n\n\n\n\n\n[x] Config creation\n\n\n\n\n. @chiptus it was working before switching to webpack, so we may investigate to determine why it's not working anymore.. I'm not able to reproduce this behaviour when creating a stack with 16 different services (3*4 different images) : both Portainer and cmd line take the same time to create or update stacks.\nTested on latest develop branch, on a VM running as a swarm manager.\nCREATING A STACK\nPortainer with download: 32.65s\n\nPortainer without download: 29.16s\n\ncmd line without download: 30.29s\n\nUPDATING A STACK\nWith Portainer: 30.53s\n\nWith cmd line: 31.36s\n\n. How far do we want to prevent accessing the features when they are disabled ?\nOnly hidding the contexts ? (hidding the panels, links to pages) or also redirecting to home page when directly trying to access the URL of feature pages (for example trying to access the job scheduler page) ?. @deviantony can't find any of those features in Portainer ...\n\nBrowse host filesystem (agent)\nPCI/Disk panels in host view (agent)\n\nSome specific setup to see them ?. Can't reproduce, created a macvlan config network and it is listed under my configs when creating the macvlan network\nTested with local, standalone and swarm with agent.... I did the test with the following configs : \n- unix\n- standalone\n- standalone + agent (on same host than Portainer + standalone host with agent as container)\n- swarm without agent\n- swarm with agent\nThe only issue I faced (not introduced with this PR): when you are connected to a swarm + agent, when creating a network config and selecting all the nodes to deploy the config, you will have X configs available (1 / node)\nOnly the configs that are on a manager node will work to create the macvlan network. Selecting a config from a worker will result in an error.\n\n\n\n. ### Considering performance issues\nFix for issues 1 and 2\nThe actual problem we have today with our code architecture is that we are not able to know if we are facing a high latency environment or an offline environment :\n high latency env will repond in 2~8 seconds on each request, but will in most case never respond in more than 10 secs\n offline envs need to reach our timeout limit of 10s on every request to be able to be considered as Offline\nWith our current scheme, we can't lower this timeout to avoid considering high latency environments as offline ones.\nAs we know we will face this high latency at a time or another, my idea here is to move this latency problem when it doesn't matter to us to have speed / fast responses.\nMoving the status detection to the backend with the following things :\n in background, the backend will heartbeat the endpoints and update his status accordingly (reaching a 5~10s timeout on heartbeat with GET _ping : endpoint is considered as offline).\n proxy every request sent to backend related to an endpoint. Backend will cancel every request done on \"offline\" endpoints.\n\nHaving a fastfail on backend will prevent high loading time for offline endpoints.\nConsidering UX\nFix for issue 3\nFirst thing we can do is to display a message instead of a blank / kind-of-build page, saying something like \"The page is loading, it may take some time depending on your connection and latency to the endpoint\". \nThoughts ?. @deviantony did the loading screen the most generic way possible. Need to find a way to detect low and high latency environments to avoid 1s loading with high speed responses.\nNeeded to add a $timeout of 1 sec before removing the loading view to avoid displaying/hidding the loading view when chaining requests.. @olljanat updated.\nBtw it's still a WIP as we are connected to a dependency event (cfpLoadingBar) and we don't want to.\nThis PR needs a rework to copy the way cfpLoadingBar is handeling its events and to use the same process to display / hide the loading screen.. > UX: a date time picker allowing the user to pick up a date (day/month/year) and time (hour/minute) that would be translated as a cron rule in before being passed to the API.\nAs there is no way to specify a year in a cron expression, how do you suggest handling this behaviour ?. I'm using angularjs-datetime-picker, and there is no way to disable the year selection, as it is linked to the month selection, and it changes the days of week linked to the day numbers of months (1 sept 2018 is a Sunday, 1 sept 2019 is a Monday).\nIt looks like that :\n\nOne thing I found to ensure a cron task is ran only once at the specified year is to encapsulate it in a script that is checking the year before running the actual task (https://stackoverflow.com/a/3665463), we can then keep the year selection and actually plan to run a task later than the current or next year (e.g. running a task on April 3rd, 2021).\nI didn't looked at how backend is creating and saving schedules. This point is only important if creating a schedule = writing a cron rule inside the host crontab. Otherwise (schedules = tasks triggered by Portainer backend) the year selection is not a problem.. @deviantony updated. @deviantony updated. I don't know how to trigger the migration to test it (it's working as migration 4, so it should be working)\nWe probably also want to disable the other concerned features, as we don't want someone to use directly the API to perform the actions disabled on the UI, or get the data that we are hiding.\n\nBrowse host filesystem (agent)\nPCI/Disk panels in host view (agent)\nExecute a job\n. In 1.19.2 we are still showing the stats & console icons in containers list for offline containers.\nFixed by PR #2389 .\n\nStill, accessing the stats with direct URL /containers/XXX/stats displays Container XXX is not running in the notification message on portainer/portainer:[ latest | 1.19.2 ].\nThe JS error may have been introduced by commit 07c1e1b and is still present on develop when accessing the stats directly with URL.\n\n. I tested with the image, it's also broken for me.\nBut cloning + yarn + test is working.\nReally weird, seems something is broken during the image build (or I missed something to ensure the docker image works as expected ?). Tested with latest Portainer (1.20.0), both -l and --logo are working on a pure clean first run.\nIt's not working when you are binding a previous existing portainer_data volume to /data (from your docker-compose file, using -v /srv/docker/portainer/data:/data with /srv/docker/portainer/data already existing from a previous portainer instance).\nIn this case, both -l and --logo are ignored, but --no-analytics is not affected by this.\nDid the following tests to validate\nTEST 1:\ndocker volume create portainer_test && docker run -d -p 9001:9000 --name portainer_test --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_test:/data portainer/portainer:1.20.0 -l portainer.hidden=yes --logo https://upload.wikimedia.org/wikipedia/commons/3/3a/Burger_King_Logo.svg --no-analytics\ngetting the following AppState on /init/admin\n{\n\"analytics\":false,\n\"logo\":\"https://upload.wikimedia.org/wikipedia/commons/3/3a/Burger_King_Logo.svg\"\n...} + container with portainer.hidden=yes labeled is hidden on containers list.\nthen\ndocker rm -f portainer_test && docker run -d -p 9001:9000 --name portainer_test --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_test:/data portainer/portainer:1.20.0\nAppState :\n{\n\"analytics\":true,\n\"logo\":\"https://upload.wikimedia.org/wikipedia/commons/3/3a/Burger_King_Logo.svg\",\n...} + previous container is still hidden.\nTEST 2 (removing previous portainer_test container and volume):\ndocker volume create portainer_test && docker run -d -p 9001:9000 --name portainer_test --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_test:/data portainer/portainer:1.20.0\ngetting the following AppState on /init/admin\n{\n\"analytics\":true,\n\"logo\":\"\"\n...} + portainer.hidden=yes labeled container is displayed on containers list.\nthen\ndocker rm -f portainer_test && docker run -d -p 9001:9000 --name portainer_test --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_test:/data portainer/portainer:1.20.0 -l portainer.hidden=yes --logo https://upload.wikimedia.org/wikipedia/commons/3/3a/Burger_King_Logo.svg --no-analytics\nAppState :\n{\n\"analytics\":false,\n\"logo\":\"\",\n...} + previous container is still displayed.\nNOTE: the --no-snapshot flag seems to behave as the --no-analytics flag. Ok so after some testing, this is what is happening.\nWhen refreshing the Container stats page while the previous request is still going, backend throws http: proxy error: context canceled error, and every api proxy request after it returns with 503.\n\n\nOn Containers view, we are proxying 1 request and getting the endpoint status at the same time (last 2 requests here)\nThe proxy return 503, the endpoint status returns 200 (considered online by the backend ? even if proxy returns 503 ?).\n@deviantony since PR #2454 (issue #2443 with specs here) we proxy every 503 & 502 returns on frontend and we consider them as a way to tell that the requested endpoint is offline.\nSince every docker api proxy request comes back with 503 code after the \"refresh that cancel previous request\" behaviour, endpoint is considered offline by frontend (and seems considered as offline for proxy by backend aswell, even if getting the endpoint status with GET /api/endpoints/X returns 200).. @deviantony there is a state update on frontend only (no update request done to backend) as requests return with 503 http code ( PR #2454 )\nFront has the expected behaviour.. @XRyu use portainerci/portainer:fix2556-frequent-offline-mode instead of portainer/portainer image :+1: . How did you modify the env variables ? I'm getting #2552 erros when trying to redeploy a container with Portainer 1.20.0 .\nI'm not getting any problem on 1.19.2 (ports mapping included).. @deviantony actually we need to remove this EndpointService.updateEndpoint() call, and all others calls triggered by a Status difference, as it doesn't match with the Backend as single source of truth introduced here.. @strawgate can you give a try to portainerci/portainer:fix2626-endpoint-management-cmd-line image ?. @deviantony updated to remove regex usage. @deviantony forgot to end this while there was only the debounce on text filter missing. It's ready to review now. @deviantony updated. @deviantony updated\n. @deviantony \n\n* How can you use `try/catch` and `await` to replace a block leveraging promise chaining?\n\njs\n myservice.promise()\n .then(function onSuccess1() {return myService.promise2()})\n .then(function onSuccess2() {})\n .catch(function onError() {})\n\nThis specific code would be (in an async function)\njavascript\ntry {\n    await myservice.promise();\n    await myService.promise2();\n} catch (err) {\n}\nSupposing you have code in the onSuccess2() and onError() functions, it would be (always in an async function)\njavascript\ntry {\n    await myservice.promise();\n    await myService.promise2();\n    // onSuccess2() content\n} catch (err) {\n    // onError() content\n}\n\n* Regarding dependency injection, I think it's a good idea to leverage the babel annotate plugin. Is it part of #2344 yet?\n\nIt's not part of #2344 , we can add it and give it as try, as it is supposed to be fully supported on ES5 syntax.\nPlus, as the plugin supports implicit injection based on common AngularJS patterns, the /*@ngInject*/ annotation shouldn't be written in any file (may be explicitly written on arrow functions as the plugin sometimes fails to detect this pattern on ES6), but as it is not a good practice to arrow-function the parts requiering DI (e.g. when defining controllers/services), this annotation shouldn't appear in our code.\n* About classes definition in a single file or class file + index, how many `index.js` files would you need to maintain? One per module? What are the pro/cons for each one here? It looks like to me that keeping the code in a single file is easier to read.\n\n\nOne per module, or one for the entire project, as we would prefer. Keeping the code in a single file is also better to me, in order to avoid maintaining big \"kind-of config\" files as _module.js currently are.. You can do\njs\ntry {\n  await myservice.promise();\n  try {\n    await myService.promise2();\n  } catch (err) {\n  }\n} catch (err) {\n}\nThis is also working\n```js\ntry {\n  await myservice.promise();\n} catch (err) {\n}\ntry {\n  await myService.promise2();\n} catch (err) {\n}\n```\nFor a more \"Golang\" style, we can use await-to-js package. Here is a usage example.. # Architecture / filesystem suggestion\nThe main goal here is to shatter the overgrowing components and views folders, following a business architecture over a type-oriented one ; for example, regroup everything related to containers under a containers folder, keeping the same code splitting we have atm.\nEvery file that contains code related to Portainer business logic must be grouped under it's business logic folder.\nCode that isn't specifically related to any business logic (string convertion helpers, timestamp filter for html template, etc) must be grouped under the _utils folder.\nEvery sub-module (_utils is also considered as a sub-module) will contain some or all of the following folders:\n components\n filters\n helpers\n interceptors\n models\n resources (everything that is rest atm)\n services\n views\nEvery datatable must be grouped under it's related components folder, in a datatables folder.\nEvery views sub-folder must be related to an url of Portainer app ; the html code of a view may be splitted in files, placed in a includes folder. (e.g. with services : services > views > create > includes).\n\nHere is an example of what is would look like for the `docker` module (files nor components folders not showed):\n\n```\napp/docker/\n|\u2500\u2500 _utils\n|   \u251c\u2500\u2500 filters\n|   \u251c\u2500\u2500 helpers\n|   \u2514\u2500\u2500 interceptors\n\u251c\u2500\u2500 configs\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 create\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 edit\n\u251c\u2500\u2500 containers\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 console\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 create\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 edit\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 inspect\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 logs\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 stats\n\u2502\u2500\u2500 dashboard\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502\u2500\u2500 events\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502\u2500\u2500 host\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 browser\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 job\n\u2502\u2500\u2500 images\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 build\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 edit\n\u2502     \u00a0 \u2514\u2500\u2500 import\n\u2502\u2500\u2500 networks\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 create\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 edit\n\u2502\u2500\u2500 nodes\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 browser\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 details\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 job\n\u2502\u2500\u2500 secrets\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 create\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 edit\n\u2502\u2500\u2500 services\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 create\n\u2502    \u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 includes\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 edit\n\u2502    \u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 includes\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 logs\n\u2502\u2500\u2500 swarm\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 visualizer\n\u2502\u2500\u2500 tasks\n\u2502   |\u2500\u2500 components\n\u2502   |   \u2514\u2500\u2500 datatables\n\u2502   |\u2500\u2500 helpers\n|   |\u2500\u2500 interceptors\n\u2502   |\u2500\u2500 models\n\u2502   |\u2500\u2500 resources\n\u2502   |\u2500\u2500 services\n\u2502   \u2514\u2500\u2500 views\n\u2502    \u00a0\u00a0 \u251c\u2500\u2500 edit\n\u2502    \u00a0\u00a0 \u2514\u2500\u2500 logs\n\u2514\u2500\u2500 volumes\n    |\u2500\u2500 components\n    |   \u2514\u2500\u2500 datatables\n    |\u2500\u2500 helpers\n    |\u2500\u2500 interceptors\n    |\u2500\u2500 models\n    |\u2500\u2500 resources\n    |\u2500\u2500 services\n    \u2514\u2500\u2500 views\n        \u251c\u2500\u2500 browse\n        \u251c\u2500\u2500 create\n        \u2514\u2500\u2500 edit\n```\n\n\nNote about helpers, interceptors, resources and services\nWe may want to avoid creating a lot of folders under every sub-module, so we can instead rename the files as <business>.<type>.js, where <business> is the business theme, and <type> is one of:\n helper\n interceptor\n resource\n service\nFor example with containers, we could have the following files under the containers root folder instead of files under their respective type folders:\n containers.helper.js\n containers.interceptor.js\n containers.resource.js\n containers.service.js. ## Regarding migration to Angular\nAfter moving to ES6+, we can consider migrating to Angular. As a transition, we can softly move from angularjs (1.x) to angular (2+) with ng-metadata.\nThis library allows to write AngularJS with typeScript files and Angular annotation, so upgrading to Angular should be transparent after a full rewrite with this library.. # Regarding function binding\nThe migration introduces the creation of isolated scopes for controllers. Function binding will not work as they are written now and require a small adjustment.\nConcrete example of non working function binding : the code-editor component with onChange callback.\nWith ES5\ncreateConfig.html\n```html\n<code-editor\n    on-change=\"editorUpdate\"\n\n\n_createConfigController.js_js\n  $scope.editorUpdate = function(cm) {\n    $scope.formValues.ConfigContent = cm.getValue();\n  };\n```\n\nWith ES6\ncreateConfig.html\n```html\n<code-editor\n    on-change=\"ctrl.editorUpdate\"\n\n\n_createConfigController.js_js\neditorUpdate(cm) {\n  this.formValues.ConfigContent = cm.getValue();\n}\n```\n\nES6 migration require to add the following piece of code in the controller constructor to allow the usage of the editorUpdate function in the code-editor component with this keyword referencing the CreateConfigController context.\njs\nthis.editorUpdate = this.editorUpdate.bind(this);\n. We are using the var ctrl = this trick to keep the Controller context  when the bound function is called. This is something we should remove from our codebase.\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/components/endpoint-selector/endpointSelectorController.js  (L10 & L11)\nIn the bound function, using this instead of ctrl will not work as this will refer to the component context.\nUsing\nthis.editorUpdate = this.editorUpdate.bind(this);\nallows us to use this when writing code but ensure that the context is the controller's one.\nIt also shows that this function is meant to be used as a callback by another component when reading the constructor of the controller.. LGTM. Looking at docker doc, compose will always try to create a default network for your stack.\nSeems you can only prevent it by saying your stack should use a pre-existing network. I'm not able to reproduce.\nWith the same request:\n\nWith a valid network ID:\n\n. Note, I tried it with Portainer 1.20.0 and did the 2 following commands:\nInvalid network\ncurl -v -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOjEsImV4cCI6MTU1MDAwODQwM30.D8J7RtMeSFS_pZxUshsdw_b1kfysWhogBrA1opeSSqQ' http://localhost:9001/api/endpoints/1/docker/v1.25/networks/does_not_exist\nValid network\ncurl -v -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOjEsImV4cCI6MTU1MDAwODQwM30.D8J7RtMeSFS_pZxUshsdw_b1kfysWhogBrA1opeSSqQ' http://localhost:9001/api/endpoints/1/docker/v1.25/networks/45f304ce6deda04a33e07da64c8c6e34330accc2c92d613896ea196b68d2719e. You need to run Portainer with -v /var/run/docker.sock:/var/run/docker.sock to be able to use docker socket.. Feedback on API:\n1. GET /nodes/{node-id}\n All fields of properties have a : at then end. So we have keys like domain: instead of domain.\n2. GET /volumes/{volume-id}\n On a same point, we have a field here that is allocate%, the % needs to be removed.\n* Following the specs, we should have 26 fields available on this request, we only have 14 on requests, the missing ones are the ones commented here. Small info on volume update, trying to update labels randomly ends on an error:\n\nUPDATE 1: success\n\n![2019-02-26-195104_1920x1080_scrot](https://user-images.githubusercontent.com/7642331/53438356-06341b80-3a00-11e9-8724-887585150f1f.png)\n![2019-02-26-195147_1920x1080_scrot](https://user-images.githubusercontent.com/7642331/53438355-06341b80-3a00-11e9-91bb-0fb10607fbff.png)\n\n\n\nUPDATE 2: success\n\n![2019-02-26-195150_1920x1080_scrot](https://user-images.githubusercontent.com/7642331/53438354-06341b80-3a00-11e9-867d-8d326378f50f.png)\n![2019-02-26-195058_1920x1080_scrot](https://user-images.githubusercontent.com/7642331/53438359-06341b80-3a00-11e9-88bc-6ba1e0f000e9.png)\n\n\n\nUPDATE 3: error\n\n![2019-02-26-195048_1920x1080_scrot](https://user-images.githubusercontent.com/7642331/53438361-06341b80-3a00-11e9-89eb-967322445723.png)\n![2019-02-26-195201_1920x1080_scrot](https://user-images.githubusercontent.com/7642331/53438353-059b8500-3a00-11e9-85e8-42fb4c8fccc9.png)\n\n\n. Not working requests: \n* POST /volumes/{volume-id}/snapshot\nreturns with volume-id = 1 or = portainer (respectively existing volume id and name).\n{\n    \"content\": \"Volume was not found\"\n}\n\nGET /volumes/{volume-id}/snapshots\nreturns with a valid volume-id (vdisk id).\n{\n    \"content\": \"Usage: cio snapshot COMMAND [options] [YYYY-MM-DD-HHMM-NODEID-VDID]\\n\\nManually create a snapshot, print info, list all snapshots or remove a snapshot\\n\\nCommands:\\n    create    Create snapshot of a volume\\n    help      Show command usage information\\n    info      Display snapshot information by snapshot id\\n    list      List snapshots on a volume\\n    remove    Remove snapshot by snapshot id\\n\\nOptions:\\n    -v | --volume <volume name>         apply to volume identified by volume name\\n    -V | --vdisk <id>                   apply to volume identified by vdisk ID\\n    YYYY-MM-DD-HHMM-NODEID-VDID         snapshot ID, present only for remove\"\n}\n\nDoesn't work either with volume name as volume-id :\n{\n    \"content\": \"Fail: Volume vdportainer not found\"\n}. On volume update:\nThere is no way to remove labels when trying to update a volume, as only transmitted data are taked into account on POST ; you can't remove a field with this behaviour, you can only add new fields (previously empty ones) or modify existing ones.. @deviantony \n\nUpdate the UX for the snapshot interval property in the profile creation to support a blank value. The suggestion here is to add an extra switch labelled Enable periodic snapshots right under the Enable snapshot switch to define a value for the snapshots. If the switch is not enabled, the snapshot interval property will be blank.\n\nWhat about Max Snapshots ? Same behaviour ?. @deviantony \n\nFix a bug preventing the removal of a drive\nFix a bug preventing the addition of a drive\n\nCan't test those ones as I don't have the setup for it.\n\nFix a bug causing an invalid request when trying to change the capacity of a volume\n\nStoridge API is returning a value like 20GB on query but is waiting for an integer on update (by testing, waiting for a size in GB) so the field 20GB is invalid. One should write 21 in the field to increase the volume capacity to 21GB.\nTested with this (left the form content, right the associate generated payload)\n\nand it is working fine\n\nStoridge needs to fix this behaviour by either returning a value without GB/TB/whatever on query, or wait for a string like 21GB and handle themselves the conversion to a real volume for their system.\nSnapshots\nStill, not able to create nor retrieve volumes snapshots from the API.. We can deploy the macvlan config network to many nodes, but we can't create it on all nodes at the same time, we should not redirect the app to /networks until the last network config is sent to the API.\nSo we reload only after the last call of config network creation, but we always reload on all other cases. Hiding the box selectors in one context and displaying them in another isn't UX friendly, as the view isn't the same depending on the same \"above\" context (means, you can't remove things from the screen, for a same visible context, depending on things not shown on the screen).\nMaybe we should keep the 2 selectors visible but disable the \"Creation\" one if the user doesn't have config networks (turning it grey + small information message about why the choice is disabled) ?\nEDIT: something like that \n. Definitely better and simpler solution. And it's working aswell.\nThing is, when value is empty in .html, it's considered as null in the ng-model. But that was the default runtime value until 1.19.2, so it's working aswell.\nDefault value just won't be an empty string tho.. As we have only 2 values and no default, not sure about the switch here.. Yes, I do have an auto-format on change, will deactivate it.. Home view does 3 API calls before going to Dashboard : _ping, version and info.\nIf we ignore the loading bar for version, you will have it for ping, then nothing for version, then have it back for info.\nWhen the user is waiting for the version call to come back when browsing offline without loading bar, it's not UX friendly, as he will think the app is not working (nothing indicates the app is waiting for a response).. I did it only if we want to rely on something else than the ping to check the EndpointStatus in the future, but yes, for now it's redundant.. Changing to ng-if=\"$ctrl.dismissAction\" doesn't hide the button even if the dismissAction binding isn't provided.\nWhen using the & binding, angular wraps the function in order to keep references to the original $scope of the passed method, even if is not defined.\nFunction is :\n\u0192 (locals) {\n   return parentGet(scope, locals);\n}. Actually I don't know how to make things like var data = Endpoint.Snapshots[0].SnapshotRaw.Containers; generic (the only line that is changing in the interceptors).\nMaybe you can help me on this if you know how to do things like that ?. URL format is tcp://XXX.XXX.XXX.XXX or unix:///var/XXX and may be another string for Azure.\nThe filter is here to remove the unix:// or tcp:// part for display. We may want to move it directly as a func in homeController. @deviantony already used it here ;) even if we can definitely apply this to the *DatatableControllers, as we introduced the ES migration process it would be a loss of time to do it now imo. ",
    "HeaDBanGer84": "Need this feature too. Started using traefik which relies on labels pretty heavy.. ",
    "evulhotdog": "@deviantony I am still having this issue on 1.12.4 which I believe is the latest.. I'm not getting anything other than \n\n\"https://domain/portainer make new div\"\n\nwhen I navigate to the page, not related to the container page.\nI did a bit further testing, I am able to reliably produce this in my regular chrome profile, but the few times I tried it in Firefox and Chrome incognito via the real domain / IP, it seems to work properly. Previously I was able to reproduce this in FF and Chrome in/out of incognito. Now I'm only having the issue on my single profile.\nBefore trying in my reg Chrome profile, I cleared the cache and cookies. Anything else that I could be missing?. I am reverse proxying it all through https. I'm thinking its more of a browser issue at this point, because I can't reproduce it like I had previously in other browsers. \nI'll keep playing around with it to see what I can figure out.. ",
    "OhmegaStar": "i've been using bash scripts for container management; like this\nrun_container.sh:\ndocker stop $sImageName\ndocker rm $sImageName\necho \"running\" $sImageName\nsEnv=$(cat ./config/$sImageName\".conf\")\necho $sEnv\ndocker run -i --restart $sMode --name $sImageName $sEnv -d $SourceImage\nthats like a recreate.\nI Look forward to this, as there are times where you roll out a image, and need to correct something.\n/OhmegaStar. @deviantony sorry for the duplicates - the search feature must have been in my blind spot :-). Sorry this may not be clear,\ni mean access to the -link NNNNNN parameter. ah okay, i was not aware of that, theres still plenty of containers out there that defines linking....... Closing this then, i'm on 1.12 allready :-)\nThanks for the info!. Hi @ricardona, as of version 1.19.2 (which i'm running now), i cannot find the place the issue is shown, my volume overview is shown as a list\n\n(this image from container details)\nRegards OhmegsStar. Found the right place, the issue still exists, (this is firefox 62) the issue can be provoked by shrinking the browser windows width\n\nRegards,\nOhmegsStar\n. ok that does not show the source right, so heres a screenshot\n\n. Hi Perry,\nThere may not be, i copied a lot of those env statements from another container, that i use for inspiration. I now that using the \\ allows me to add multiple things to one \"image layer\" instead of having 20 layers each adding just one env.\nI'll try generating a new version of the image with env's not concatenated\nRegards,\nOhmegaStar. @mlocher thanks for the info :-). @deviantony would it not be possible to find the information in the container ? i mean, once you start a container again, the ports are back \"remembered\" if you will... Maybe treat the value \"0001-01-01T00:00:00Z\" as \"unknown\" ?. @deviantony that may well be an option, but if you look at it from a UI consistency point of view, keeping the buttons and disabling those that are not valid, is consistent with the list view, creates a less confusing experience in the ui (options that appear and dissapear) and also communicates future options available for the user.\nThe modal dialog on Remove may well be added anyway (it can be a pain to recreate a container removed by mistake), maybe as a behavior that the user can enable / disable from a preferences page ?. Hi Neil,\nAh okay, I read the release notes wrong then. I need to look into service deployments then.\nThanks\n/OhmegaStar\n. Hi @deviantony \nStarting a docker portainer container with the preview image indeed fixes the problem;\n\nHope this helps,\nBest Regards,\nOhmegaStar. Hi again,\nNot sure it's the same problem, but the fix works none the less, the bug you point to forces the error from flooding with reuests by repeating refresh on the page. My nodes were just \"down\" I did not have to force the issue by hitting Refresh.\nThanks for the quick turnaround.\nHenrik. ",
    "edikxl": "I'll try to do something.. No, sorry. It's too hard.. ",
    "ricardona": "This is working for me:\n\n. @deviantony would you close this issue related to #960? Now the default ownership is set to admins. Another more practical option is to set the default ownership using labels #1257.. I started adding these features https://github.com/ricardona/portainer\nIf someone wants to test it I also pushed a docker image to zimelemon/portainer:1.19.2-dev-i960 \nPlease be careful it changes the database and unwanted effects may occur, I recommend making a backup of the database.. Now the default ownership is set to admins #960, but we continue with the problem when the container is recreated, it removes the privileges. \nI have a nasty workaround to this scenario that only works with stacks.\n\nCreate a fake stack using Portainer and set access privileges.\nUse docker compose to redeploy the real stack. This only affects the containers and previously stack access privileges remain untouched.. I can not reproduce the problem with Portainer 1.19.2\n\n\n@deviantony The table is not sortable anymore. Is this correct?\n. > Our use of portainer is to have an only portainer instance managing many clusters\n\nAdmin may have access to all clusters, but users get access only to certain endpoints\nUsers accessing a endpoint have all access on that endpint, so public is fine\n\n@WTFKr0  Your use case is similar to #2190 Segregate logically Portainer resources using projects and it will be included in the next release too. Could that help?\n@deviantony #1257 and #2190 are trying to solve the same problem \"declare access privileges in the compose file or from docker CLI\". Does that mean that one should be discarded?\n. This is related to #2125. > Is there some way detect on code that which resources are created outside of Portainer?\n@deviantony in #960:\n\nThe database only store UAC related information, it does not store any Docker related information (containers, etc...). So that would require parsing all the containers running on boot / when adding an endpoint and automatically add information on each resource. And also a refactor on how the resource control model is currently defined.\n. I changed applyResourceAccessControlFromLabel and applyResourceAccessControl and now access is denied by default.. Done. Done. \n",
    "perryyan": "Hi -- I don't think this is an issue with portainer.\nIs there a reason why you are inserting concatenations for each ENV line?\nPlease refer to dockerfile best practices.\nhttps://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#env\nCheers.\nPerry\nOn Sun, 12 Mar 2017, 1:01 pm OhmegaStar, notifications@github.com wrote:\n\nok that does not show the source right, so heres a screenshot\n[image: image]\nhttps://cloud.githubusercontent.com/assets/15914993/23835408/0cfa0f60-0767-11e7-8144-7f482fa47270.png\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/660#issuecomment-285971646,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ADJ9fkBinSUhGWotyo8-8lHtddxeOTvvks5rlE8YgaJpZM4MapvZ\n.\n-- \n\nRegards\nPerry Yan\n. ",
    "mlocher": "@OhmegaStar \nbased on the screenshot you defined the environment variables like\nENV PS_VERSION 1.6.1.8 \\\n    ENV PS_DOMAIN prestashop.local\nYou don't need the ENV directive on subsequent lines any longer, but you need to separate them using equal signes if you want to define multiple variables within the same ENV statement.\nENV PS_VERSION=1.6.1.8 \\\n    PS_DOMAIN=prestashop.local\nSee https://docs.docker.com/engine/reference/builder/#env for the Docker documentation article on this subject.. ",
    "aviam": "i'm going to test it... will update with the results. ok, thanks.. This one works for me..\ndocker run -d --name=portainer -p 5000:9000 --restart=always portainer/portainer:1.11.0 -H tcp://:2375. it will work ...it only @our project...\n. ",
    "davask": "Hi I tried : \nshell\ndocker run --name dashboard_portainer_1 \\\n  -d --restart always -p 65534:9000 \n  -v /var/run/docker.sock:/var/run/docker.sock \n  -v /home/user/monitoring/portainer/data:/data \\\n  portainer/portainer \\\n  -H tcp://my_public_ip:2375\nas well as : \nshell\ndocker run --name dashboard_portainer_1 \\\n  -d --restart always -p 65534:9000 \n  -v /var/run/docker-userns.sock:/var/run/docker.sock \n  -v /home/user/monitoring/portainer/data:/data \\\n  --network \"mynetwork\"\n  portainer/portainer \\\n  -H tcp://192.168.0.1:2375\nwith : \nshell\ndocker network create -d bridge --subnet 192.168.0.0/24 --gateway 192.168.0.1 \"mynetwork\";\nI cannot connect to the endpoint, any ideas ?. Yes. Any combinaison as follow is not working : \n- docker.sock or docker-userns.sock \n- with/without tcp access like -H tcp://192.168.0.1:2375\nI don t know what to test next to fix it\nAnd I tested it with tcp access as per this example. I don t know how to do that.\nApparently I need to update  DOCKER_OPTS=\"--host tcp://0.0.0.0:4243 --host unix:///var/run/docker.sock\" but I already use port 4243 with a container called crashplan.. I tried that, it doesn t work. Ok, thx\n. here an example for port and volume:\n```json\n{\n    \"ports\": [\n      {\n        \"host\": \"2222\",\n        \"container\": \"22/tcp\"\n      }\n    ],\n    \"volumes\": [\n      {\n        \"host\": \"/path/to/user\",\n        \"container\": \"/home/username\"\n      }\n    ]\n  }\n```\nfor stats, logs, console, clone, I m not talking about the template anymore - my bad - but to duplicate the links stats, logs, console in the list of container for quick access from the list as well as a clone button\nas we talk about all of that, how hard is it to keep the session when We click a link in the laft column to open it in a new tab without to login again ?\nWhat do you think of all of that ?\nlet me know\n. @deviantony > Related to your comment:\n\n[...] If the bind field is specified, Portainer will automatically switch the volume type to bind and fill the host value with the bind field value.\n\nI'm not sure what you mean by switch the volume type but I'm thinking :\n\n[...] If the container field is specified, Portainer will automatically switch the volume type to container and fill the bind value with the container field value.\n\nIn this case, container volume will be the master volume declared. if a container volume is declared, it is the one we want within the container so if bind is not define it will bind the same volume declared in the container field and if we want to bind a different volume we can declare the bind volume.\nIn term of template we could have these two cases which will results in same volume binding: \nbash\n{\n    \"volumes\": [\n      {\n        \"container\": \"/home/user\",\n        \"bind\": \"/home/user\"\n      }\n    ]\n  }\nor\n{\n    \"volumes\": [\n      {\n        \"container\": \"/home/user\"\n      }\n    ]\n  }\nWhat do you think ?\n. @deviantony, There's as well another approach.\nWe can define volumes as : \nbash\n{\n    \"volumes\": [\n      \"/path/on/host:/path/in/container\"\n    ]\n}\nin case we define only the container volume\nbash\n{\n    \"volumes\": [\n      \"/path/in/container\"\n    ]\n}\nthen /path/on/host=/path/in/container.\nAnd this might help on the backward compatibility, don't you think ?\n. \"I do not see how we would be able to list available ports\" - agree\nI'm looking for a solution on that part.. I m thinking about portabilty.\nif I got 2 servers with different username as user1 and user2\n$HOME will point to the correct home independantly fron the defined user.\nIs that clearer ?. docker run -e DWL_USER_NAME deviantony -v $HOME/myproject/myfiles:$HOME/myfiles -w $HOME davask/d-ubuntu bash\nwhere in $HOME/myproject/myfiles:$HOME/myfiles the bold $HOME is host $HOME and the other $HOME is the container $HOME.\nBut writing that I m thinking that we can t access container's ENV that way.. ",
    "jodumont": "what was the solution finally ?\nbecause for now I'm running portainer --userns=host to bypass the usernamespace. @deviantony \nrelated to my last comment \nI also figure instead of promoted privilege when I'm running portainer in a userspace\nI easier and more versatile to simply connect through the Docker API.. thank @thojkooi, I'll try this and follow asap! ;). @gaiterjones \nNope ;(\nbut I also decide to threat Portainer as a WebAdminUI instead than a WebApplication\nwhich means I access Portainer on a different port which is not open directly on the net and/or could also be serve by nginx. ",
    "obyy": "you can run on the host : \n# socat UNIX-LISTEN:/var/run/docker-userns.sock,user=231072,group=231072,mode=0660,fork UNIX-CLIENT:/var/run/docker.sock\nand run portainer  with: \ndocker run -d -p 9000:9000 -v \"/var/run/docker-userns.sock:/var/run/docker.sock\" --name portainer -v portainer:/data portainer/portainer\nit's work for me on virtual box. \n( thx to https://integratedcode.us/2016/04/08/user-namespaces-sharing-the-docker-unix-socket/ ). ",
    "74cmonty": "Can somebody validate if this can be applied for Portainer?\nOr is this the simple solution?\n\nThere are several potential solutions, but one interesting solution if you are open to having a proxy container running is to use a new feature about to arrive in Docker 1.11, allowing the use of --privileged with a new parameter, --userns=host, while user namespaces are enabled on the Docker daemon. [Thanks to Liron Levin of Twistlock for working on this feature and getting it through the review process!]\nWith this feature, I can run a privileged container alongside my unprivileged containers which need access to the Docker daemon UNIX socket. The privileged container can expose a TCP endpoint only for other containers to use (not portmapped to the host) [Note that this is still accessible to someone with rudimentary Linux skills\u2013see the comments below from Brian Krebs], and use a simple tool like socat to pass traffic from the TCP endpoint to the mounted UNIX socket.. In the meantime I overcome this issue by executing the following commands to deploy portainer:\ndocker volume create portainer_data\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer -H unix:///var/run/docker.sock\n\nHowever, I'm facing another issue which I will report seperately.\nTHX. There's nothing logged in docker log:\nvm100-docker:~# docker ps\nCONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                    NAMES\n88f3e4fe9e93        portainer/portainer   \"/portainer -H unix:\u2026\"   12 days ago         Up 12 days          0.0.0.0:9000->9000/tcp   zen_kowalevski\nvm100-docker:~# docker logs --details 88f\n 2018/02/04 15:04:28 Instance already has defined endpoints. Skipping the endpoint defined via CLI.\n 2018/02/04 15:04:28 Starting Portainer 1.16.1 on :9000\nThe error message is shown on logon screen, too.\nBut after refreshing the browser, I can logon normally then.\nThis time I logon as 'admin', and on the opening UI there's no \"user information\" (Account, Logout).\n\nAfter switching UI context to \"Networks\" this user information is displayed.\n\nOn the host I have this in /var/run/:\nvm100-docker:~# ls -l /var/run/\ntotal 32\n-rw-r-----    1 root     wheel            5 Feb  4 11:08 acpid.pid\n-rw-r--r--    1 root     root             5 Feb  4 11:08 crond.pid\ndrwx------    7 root     root           160 Feb  4 11:35 docker\ndrwx------    3 231072   231072          60 Feb  4 11:35 docker.231072.231072\n-rw-r--r--    1 root     root             4 Feb  4 11:08 docker.pid\nsrw-rw----    1 root     docker           0 Feb  4 11:08 docker.sock\ndrwxr-xr-x    2 root     root            40 Feb  4 11:12 fail2ban\n-rw-r--r--    1 root     root            16 Feb  4 11:08 ifstate\n-rw-r--r--    1 root     root             5 Feb  4 11:08 klogd.pid\ndrwxrwxr-x    3 root     uucp            60 Feb  4 11:13 lock\nsrw-rw----    1 root     root             0 Feb  4 11:08 ntpd.sock\n-rw-r--r--    1 root     root             5 Feb  4 11:08 openntpd.pid\ndrwxrwxr-x   14 root     root           340 Feb  4 11:08 openrc\ndrwx------    3 root     root            60 Feb  4 16:04 runc\n-rw-r--r--    1 root     root             5 Feb  4 11:19 sshd.pid\n-rw-r-----    1 root     wheel            5 Feb  4 11:08 syslogd.pid\n-rw-rw-r--    1 root     utmp             0 Feb  4 11:08 utmp\n-rw-------    1 root     root             0 Feb  4 11:08 xtables.lock\nI have modified the configuration to have to isolate containers with a user namespace.\nadduser -DHS -G 102 -g \"Docker Re-map\" dockremap\necho \"dockremap:231072:65534\" >> /etc/subgid\nand vi /etc/init.d/docker\ncommand_args=\"-p \\\"${pidfile}\\\" ${DOCKER_OPTS} --userns-remap=dockremap:dockremap\". I think your conclusion is correct.\nHowever, isolating containers with user namespace is a documented security feature of docker. \nMy current understanding is that portainer cannot deal with this config because portainer tries to access to docker by his socket, and his socket is root protected by default.\nvm100-docker:~# ps -ef | grep portainer\n9780 231072     0:06 /portainer -H unix:///var/run/docker.sock. I'll close this issue and continue discussion in #662.\nActually I found a blog post that could be relevant.. Can somebody validate if this can be applied for Portainer?\nOr is this the simple solution?\n\nThere are several potential solutions, but one interesting solution if you are open to having a proxy container running is to use a new feature about to arrive in Docker 1.11, allowing the use of --privileged with a new parameter, --userns=host, while user namespaces are enabled on the Docker daemon. [Thanks to Liron Levin of Twistlock for working on this feature and getting it through the review process!]\nWith this feature, I can run a privileged container alongside my unprivileged containers which need access to the Docker daemon UNIX socket. The privileged container can expose a TCP endpoint only for other containers to use (not portmapped to the host) [Note that this is still accessible to someone with rudimentary Linux skills\u2013see the comments below from Brian Krebs], and use a simple tool like socat to pass traffic from the TCP endpoint to the mounted UNIX socket.\n\nUnfortunately this start command fails with my host:\nvm100-docker:~# docker run -d -p 9000:9000 --privileged --userns host -v /var/run/docker.sock:/var/run/docker.sock -v portainer_\ndata:/data portainer/portainer -H unix:///var/run/docker.sock\n9388b5a483d45a10b07b87525835cfdf2e913317cc6e7508e05592b3d1ebddf2\ndocker: Error response from daemon: open /var/run/docker/libcontainerd/containerd/9388b5a483d45a10b07b87525835cfdf2e913317cc6e7508e05592b3d1ebddf2/init/shim-log.json: no such file or directory.. Starting Portainer with option --privileged fails:\nvm100-docker:~# docker run -d -p 9000:9000 --privileged -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer -H unix:///var/run/docker.sock\ndocker: Error response from daemon: privileged mode is incompatible with user namespaces.  You must run the container in the host namespace when running privileged mode.\nSee 'docker run --help'.. ",
    "CWiesbaum": "If you run into this problem, try this setup. Not es simple as standard agent deployment, but it works:\nhttps://www.esentri.com/blog/2018/09/10/portainer-agent-deployment-on-docker-swarm-with-user-namespace-remap/. Got the same issue on our setup:\n- Docker Swarm\n- Portainer 1.19.1\n- Running Portainer Agent Stack Deployment\nIt takes 2 - 3 days till these errors come up. I only need to restart portainer UI. Agents can keep on running.\nWe see three error types:\nFirst, Portainer UI gets 4 - 8 of the following errors, 5 minutes in between these errors:\ncron error: endpoint snapshot error (endpoint=someHost, URL=tcp://tasks.agent:9001) (err=Cannot connect to the Docker daemon at tcp://tasks.agent:9001. Is the docker daemon running?)\nAfterwards it becomes, 5 minutes in between these errors:\ncron error: endpoint snapshot error (endpoint=someHost, URL=tcp://tasks.agent:9001) (err=error during connect: Get https://tasks.agent:9001/_ping: dial tcp: lookup tasks.agent on 127.0.0.11:53: dial udp 127.0.0.11:53: socket: too many open files)\nAfter 4 - 5 hours logs get flooded by this error, one line each second:\nhttp: Accept error: accept tcp [::]:9000: accept4: too many open files; retrying in 1s\nError type 2 still comes up every 5 minutes.\nWill try --no-snapshot as well.. ",
    "wjonker85": "\nyou can run on the host :\n# socat UNIX-LISTEN:/var/run/docker-userns.sock,user=231072,group=231072,mode=0660,fork UNIX-CLIENT:/var/run/docker.sock\nand run portainer with:\ndocker run -d -p 9000:9000 -v \"/var/run/docker-userns.sock:/var/run/docker.sock\" --name portainer -v portainer:/data portainer/portainer\nit's work for me on virtual box.\n( thx to https://integratedcode.us/2016/04/08/user-namespaces-sharing-the-docker-unix-socket/ )\n\nThis is a live saver (sort of :). Thank you, works create, without exposing the socket trough http. I made a service  in /etc/systemd/system/dockremapsocket.service\n```\n[Unit]\nDescription=Creates a docker socket for the dockremap user\nRequires=docker.service\nAfter=docker.service\n[Service]\nType=simple\nAnother Type option: forking\nUser=root\nWorkingDirectory=/usr/bin/\nExecStart=/usr/bin/socat UNIX-LISTEN:/var/run/docker-userns.sock,user=100000,group=100000,mode=0660,fork UNIX-CLIENT:/var/run/docker.sock\nRestart=on-failure\nOther Restart options: or always, on-abort, etc\n[Install]\nWantedBy=multi-user.target\n```\nYou can user service dockremapsocket start/stop/status.. @Codelica Thnx you so much for the correct workong nginx config. With the default config from https://github.com/portainer/portainer-docs/blob/master/docs/source/faq.rst on nginx 1.14.1 the console would stop working after 1 minute.. ",
    "apeinspace": "Thanks @wjonker85, works like a charm.. ",
    "SaruKazen": "The exec id is removed, after the execution of the start command ends. but since this is hijacked connection, the instance seems to be not removed.   From what I have understood from the docker docs, start process, execution and a stop process events are executed during the exec start.   but on hijack, when we close the socket, only the attached stdin and stdout are closed and the stop process is not triggered, thus the exec Id is not removed.  On the other hand, when the exec is used as a httprequest with no hijack, a stop process event is triggered at the end, which removed the exec ID from the container.   \nAnother point which I would like to add is  execId is not reusable unless the process is stopped, but I don't seem to find any api like Exec Stop similar to Exec Start.    So on a long run, layers of exec Id just seems to pile up on the container making pointless reference unless the container restarts(which removed the execId's). ",
    "dephcon": "Super pumped to see LSio integrated!. ",
    "IronicBadger": "So glad that this has gone in, really great stuff. I have some feedback after trying this out, would you prefer a separate issue or post it here?. Thinking about user experience, it would be great to see the following things added:\nPGID and PUID are presented to the user with no explanation visible on that page as to their purpose. A tooltip or example value would be helpful here (similar to the tooltip on ownership?).\nNext, I would love to see a slick way of integrating the documentation we provide for each container. Perhaps in a panel between the container creation options and 'available templates'? This would link directly the markdown readme in each containers git repo, we could modify the json to include a link to this file? At the very least, a link directly to the docs front and centre - it will greatly reduce support requests.\nFinally, where are the rest of our containers? I see 20 or so, we have many more than this. Is there a way to enable the full feed please?. ",
    "interactivewebs": "Was thinking we could use your templates file in the later version of Portainer running as a service on a swarm.. like this.\ndocker service create \\\n--name portainer \\\n--publish 9000:9000 \\\n--constraint 'node.role == manager' \\\n--mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n--mount type=bind,src=/root/portainer/data,dst=/data \\\nportainer/portainer --templates http://tools.linuxserver.io/portainer.json \\\n-H unix:///var/run/docker.sock\n\nOnly it does not work. Would you have any tips on getting the template into a service?. ",
    "Bodge-IT": "Hi guys, this is amazing!  Took me a while to find it but now I have I realise its not offering armfh variants of LinuxServer.io images?  Is this in plan?. @deviantony Ah OK will do, thought you guys would be responsible for the interface.. ",
    "g-arjones": "Was this removed? I can't find LinuxServer.io's template in my portainer instance..... @deviantony . @ncresswell Which one?. Thanks!. Why is it that I only see \"auto\" and \"bind\" options while mapping volumes for a template? How do I use named volumes? @deviantony . @deviantony I don't think this is a bug report since the behavior I see in my instance is the same in your demo instance. \nI asked here because the question is about the screenshot in the description of this pull request so it seemed appropriate. In the screenshot I see \"auto\", \"bind\", and \"volume\" in the template volume mapping section I wonder if \"volume\" was removed in another pull request or if I am missing something.... ",
    "alexsandro-xpt": "Is this feature for next Portainer version?. Is this feature for next Portainer version?. Alright right @deviantony, this is a nice feature.\nAnother feature I guess would be have is a log view per Services.\nThanks!. Alright right @deviantony, this is a nice feature.\nAnother feature I guess would be have is a log view per Services.\nThanks!. I have the same problem, what is wrong with portainer-agent-stack.yml stack file?. I have the same problem, what is wrong with portainer-agent-stack.yml stack file?. ",
    "hason": "@alexsandro-xpt\n\nAnother feature I guess would be have is a log view per Services.\n\nSee #671. ",
    "adityacs": "@deviantony Thanks. It's working. I think there should be an option to give access to multiple end points at once. In current implementation we have to give access to each end point separately.\nAlso, when can we expect LDAP integration? . ",
    "antoinetran": "We can separate Ldap tasks into 2: one for Ldap support for admin users only, and one when groups/roles has been defined and implemented. The first one is faster.. ",
    "justinzyw": "personally I consider LDAP itself a very basic function while secondary LDAP is more an ee feature. ",
    "JamesCohen-awin": "Note that it'd be possible for someone to write a plugin for LDAP management and open source it :). ",
    "ahmadsocrat": "Any ETA for this? As I am planning to run a portainer demo at QCRI?. ",
    "nesimtunc": "I can't see your Dockerfile, would you tell me which command you execute for that in order to define it in my docker-compose.yml file, please?\nportainer:\n  image: portainer/portainer\n  ports:\n    - 127.0.0.1:9000:9000 \n  volumes:\n    - /var/run/docker.sock:/var/run/docker.sock. ",
    "030": "@deviantony Could this be changed into a feature request rather than closing it?. I assume this feature should be coded in Golang?. Yes I would like to work on that upcoming weekend. I was thinking about something like the snippet that is used for the private docker registry:\ndocker run -d -p 5000:5000 --restart=always --name registry \\\n  -v `pwd`/certs:/certs \\\n  -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/domain.crt \\\n  -e REGISTRY_HTTP_TLS_KEY=/certs/domain.key \\\n  registry:2\nWhat is your opinion about how docker private registry implements SSL? Is such an approach suitable for portainer as well?. @deviantony I will create a PR now. Could you indicate if the following snippet could be added to the documentation somewhere?\ndocker run -p 443:9000 -v ~/local-certs:/certs -v \"/var/run/docker.sock:/var/run/docker.sock\" portainer --ssl --sslcert /certs/server.crt --sslkey /certs/server.key\n. Doc PR created. @adrianfalleiro @deviantony PR created. @deviantony Thank you! I will process the feedback today.. @deviantony PR updated. @deviantony Could you indicate when this feature will become available? I will update the portainer doc now.. @adrianfalleiro Did you follow these instructions?. @deviantony Should something be fixed?. @deviantony api/cli/defaults_windows.go updated. ",
    "mateuszdrab": "Well, I actually need this feature... Me and my friend share portainer and I want him to be able to manage whatever is created on his docker host via cli.. Thanks @olljanat \nI'll await for the next release, hopefully this will make its way soon. :). Same issue here, I just created a docker-flow-proxy stack, updated it and decided to delete it too soon I think. Clicked remove and now I get \"Unable to remove the stack\" and \"Unable to retrieve stack details\". Initially the stack was physically in docker when I got \"Unable to remove the stack\" so I removed it manually because I was already getting the \"Unable to retrieve stack details\" error. This seems to be an orphan entry now in the DB. Not sure how to better describe it.. @wo10378931 \nI tried, but I still get a 404. I'm just gonna open the SQL lite DB file later and remove the entry manually.... I can't even open the DB. It doesn't seem to be SQL lite. I give up, a day of failures today.\nEven my docker test swarm is corrupted because I was fighting with it trying to release the ports after the containers were removed.\nGonna remove the VMs and start again.. @wo10378931 \nI did login, got the auth token and submitted it with each request.\nOther functions worked fine.\n@ncresswell \nResetting the DB, I've removed the test docker cluster and portainer won't login now at all. It tries to connect to the host after logging in and that host now doesn't exist.. @deviantony @ncresswell \nSorry, I've dumped the db away. It was too easy to start again and my dev docker host VMs have been removed.\nBut yeah, the cookie was probably the answer ;)\nI did however studggle to remove the stuck stack even via API (404).  I was submitting the DELETE request with httpie and with the auth token.. ",
    "olljanat": "@mateuszdrab I'm working on it on #2424 as missing it is real showstopper for us. \nIn mean while you can get it working by downgrading Portainer to 1.19.1 version.. @jozemlakar sounds good plan. I can help with testing.. @yassirh On Windows Server 2016 and its Docker images default is ContainerAdministrator but on semi-annual channel versions 1709 and 1803 and on just released Windows Server 2019 ContainerUser is default.\nSo probably it would be good idea to fix this now when more and more uses will start migrate to Windows Server 2019 and see this issue.\nEDIT: It is also possible to change user on Dockerfile like we do with Portainer https://github.com/portainer/portainer/blob/develop/build/windows/nanoserver/Dockerfile#L3 but that should be only used with containers which really need it.. @yassirh I did some more testing with this. By writing username ContainerAdministrator to user field works fine so it can be set as a default for Windows but we need implement Windows version checking to this one because Windows Server 2016 does not support to specify username even on docker exec command and starting console will fail if on that scenario.. @mithuns first of all. Please create new issue instead of commenting closed ones.\nThen this issue was about make Portainer it selves to use named pipes. It have nothing to do with other containers which you start with command docker run.\nAlso named pipes are only used when Portainer is running on Windows node which runs on Windows containers mode and Jenkins is Linux container.\nAlso note that Docker only supports --privileged with Linux containers.\nAnyway, your issue looks to be Jenkins related so I propose that you ask about it from Jenkins support channels.. @hasan419 look https://github.com/portainer/portainer/issues/2558#issuecomment-456165205. @friism, @StefanScherer 18.03.1-ee-1 is out so can we now get forward with this one?.  @carlfischer1 based on my experience I would not recommend Hyper-V isolation mode for anyone anyway because of much bigger overhead and worse performance.\nSo can we get this one merged so we can start using it on environments which are using process isolation mode?. Because #2137 is now included to 1.19.2 we need to get this one forward. Other way we are not able to upgrade our environment.\nUpdating labels to all resources on all envs will take a while so it would be good if we are at least able to agree how label will looks like so we can start that work.\nio.portainer.uac.public=false is clear enough for me but IMO value of io.portainer.uac.teams should not be numeric id but instead of some string value. For example if team name is Portainer Contributors then string id would be portainer-contributors so when you look stack file on GIT you would be enable to figure out who might have access to that resource based on that label.\n. @malde you are correct but hopefully as least #2424 will included to 1.20.1 because it contains concept of DynamicResourceControl which is needed by this feature too and after that this one implementation process can start. . @kamal24111991https://github.com/portainer/portainer/issues/1257#issuecomment-428346154\nImplementation for this one is started yet. #2424 need to finalized first and it is waiting for effort from Portainer team. . I had bit spare time so I started to look how to hide these features from UI: https://github.com/olljanat/portainer/commit/d6370263d48b10d534831ef007389cda74dcbe70\nIf someone wants to test I also pushed docker image to: ollijanatuinen/portainer:readonly-1\n@deviantony I implemented this now with control isReadWrite which is not (yet) defined anywhere. Would that be enough or is there need for more detailed rights? Also do you have good ideas where that should be set (I can try implement that too)?\nOf course access right checks need to be implemented to API level too later but I see that ability to just hide these features from UI would be enough for us who just want to make sure that users does not skip CI/CD pipeline by doing changes from portainer UI. Those who will call API directly knows what they are doing.. @Budwise FYI this was fixed by #2018 so it works on Portainer versions > 1.19.0. @deviantony hmm I assumed that because we are now using named pipe instead of docker.sock we can see these details on Windows containers but maybe I need to double check that these graphs works correctly.\nI was very suprised to actually see statistics page working on Win as it does not work with any Linux containers on our envs (bug on Rancher OS).. Duplicate with #1590 ? . @Svarto yes. That why #1590 is closed. @buehlmannpa looks that CAS (if I found correct product) should be able to work as OAuth IDP: https://apereo.github.io/cas/5.2.x/installation/OAuth-OpenId-Authentication.html\nOAuth is very good option as it is modern way to implement authentication/SSO and it supported by all modern IDPs.. My understanding is that OAuth support #1124 is on priority list which gives you possibility to use any modern IDP and that IDP you configure to use whatever authentication you want. . Bit off-topic but it is interesting to see how different things people want to do with Portainer.\nThere is people like me who thinks that Portainer cannot currently be used on production (or can be used by only very limited group of people) as there is too much stuff visible and no way to limit these rights. \nAnd then other side there is people who wants be able see even more sensitive data on there. Of course it is possible to get both but it will challenging.... @orubel https://github.com/portainer/portainer/pull/2065 actually already limited access to JoinTokens to admins only on API level so now these can be shown on UI. \nWhat comes to other limitations (detailed RBAC) I have understood that there is plan to implement them. \n. > I had a similar Issue. It turned out that the TLS Connection failed because of the LDAP Windows Server Version (2012 R2).\n\nYou have to set a max TLS Version in a config when you have this Windows Server Version.\n\nTLS 1.2 is btw already ten years old protocol so I don't see any reasons to use anything older than that.\nYou can enable TLS 1.2 support to Win Srv 2012 R2 based on this guide. I don't see any issue on support of Kubernetes if you get enough resources to add it and and still keep Swarm fully supported but I also don't see any problem if you never will implement Kubernetes support and keep all focus on Swarm.\nThere is many good Kubernetes management tools already but after Rancher decission to focus all new development to Kubernetes there is just Portainer and Docker UCP (which requires enterprise version of Docker) left for Swarm.\nIMO Kubernetes is too complex solution to simple issue which why I like Swarm more and currently Swarm is also only real option for us who need to be able run mixed Linux and Windows workloads on production.. FYI. I did small PoC how to Docker Desktop's Kubernetes support can be used with Portainer.\nPreparation\n\nWindows 10\nDocker Desktop 18.09\nNon-Dockerized version of Portainer with this small code change https://github.com/olljanat/portainer/commit/9aebbe3c6c835f1d98915badcb8e173595f977bb\ndocker.exe on Portainer folder replaces with 18.09 version.\nConfig line \"stackOrchestrator\": \"kubernetes\" added to C:\\data\\config.json\nKubernetes support enabled to Docker Desktop:\n\nSwarm mode enabled to Docker (needed to make Portainer use docker stack deploy command)\n\nPoC\nThen I deployed stack like this from Portainer:\nversion: \"3\"\nservices:\n  web:\n    image: nginx\n    ports:\n      - 80:80\nOn stacks page type says \"Swarm\" but stack was anyway deployed.\n\nServices page is empty because Kubernestes is used (service concept only exists on Swarm)\n\nOn containers page you can see that Kubernetes uses very different way to naming containers than Swarm. Stack field is also empty because Kubernetes uses diffferent label to store stack name\n\nYou can also use command kubectl get all to see all Kubernetes resources:\n```\nNAME                       READY     STATUS    RESTARTS   AGE\npod/web-684665665d-92zgh   1/1       Running   0          24s\nNAME                    TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE\nservice/kubernetes      ClusterIP      10.96.0.1                443/TCP        11h\nservice/web             ClusterIP      None                     55555/TCP      24s\nservice/web-published   LoadBalancer   10.101.209.202   localhost     80:30262/TCP   24s\nNAME                  DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/web   1         1         1            1           24s\nNAME                             DESIRED   CURRENT   READY     AGE\nreplicaset.apps/web-684665665d   1         1         1         24s\n```\nAnd using Docker commands you can see this\nPS C:\\> docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS               NAMES\ne5c4703a7d1b        62f816a209e6        \"nginx -g 'daemon of\u2026\"   About a minute ago   Up About a minute                       k8s_web_web-684665665d-92zgh_default_d5d9d350-f2d4-11e8-a6f5-00155d9a8b40_0\nPS C:\\> docker service ls\nID                  NAME                MODE                REPLICAS            IMAGE               PORTS\nPS C:\\> docker stack ls\nNAME                SERVICES            ORCHESTRATOR        NAMESPACE\nkubestack1          1                   Kubernetes          default\nTechnical details\nTechnically this looks working on way that enabling Kubernetes support to Docker Desktop:\n- creates one node Kubernetes cluster\n- deploy docker/kube-compose-controller and docker/kube-compose-api-server images top of it which works as proxy between docker stack deploy command and Kubernetes.\nMisc\nThese components are not open source so only way to get them to use are:\n- Use Docker Destop (available for Windows and Mac)\n- Use Docker Enterprise 2.0\nWhat is currently unclear for me is that when these components will be available for Azure Kubernetes Service or Google Container Engine or is that even on roadmap. \nBecause of Kubernetes names containers on very different way than Swarm it can be very hard to try figure out which container is which but it is interesting to see how far Docker, Inc will go with their Kubernetes integration on future.\nRelated open issues which should be fixed before there is really sense to  implement Kubernetes support for Portainer (unless it is done directly with Kubernetes API):\n- https://github.com/docker/cli/issues/1067\n- https://github.com/docker/cli/issues/800\n- https://github.com/docker/cli/issues/776\n- https://github.com/docker/cli/issues/798\n- https://github.com/docker/cli/issues/783. FYI. Compose to Kubernetes looks to be now open sourced and there is already guide how to install it top of AKS https://github.com/docker/compose-on-kubernetes. @WTFKr0 what is status of this one? It would be very interesting feature.. FYI. Not fully same thing but can be useful for some users. I just published my Portainer extension for VSTS: https://marketplace.visualstudio.com/items?itemName=OlliJanatuinen.portainer-deploy. @goalbased I cannot see any reason why it would not work on Windows. Can you test and let use know?. @goalbased It only exists when Swarm mode is enabled and that is because of how Docker it selves works.\nPlz join to Portainer Slack and ask these offtopic questions on there. . @AlexJakeGreen no worries and thanks for work you have done so far. I can continue with this. . #2042 replaced this one so it can be closed.. @turbo FYI I have implemented alternative method for VSTS users: https://marketplace.visualstudio.com/items?itemName=OlliJanatuinen.portainer-deploy. @turbo / @GrumpyMeow It is nice to see that more VSTS users are joining to Portainer users. But in same time it feels that you are are thinking this bit weird way.\nOn fully adopted implementation VSTS is much more than just Git repository, it also owns whole CI/CD pipeline(s), test automation, all approval chains, work item management, etc.\nThat why IMO VSTS must push services to Portainer rather than Portainer would pull them.\nBut I created another feature request about it to #2448 so please share your though about it on there.. @turbo OK. I understand that this one is bug from users point of view but from code point of view issue is that any of authentication methods which are supported by VSTS have not been implemented to libraries which Portainer currently uses so it is bit more tricky to fix than normal bug fixes.\nBut as VSTS also supports connecting Git repos with SSH , I understood from your comment that options works for you I think that best options would be then finalize PR #2294 and add comment to documentation that with VSTS you need use SSH authentication.\nWorks for you?. @filipvaleriu sorry but I did not understood that how that is related to this issue which talks about git pull issue (not push)?. @GrumpyMeow OK. Would #1752 work for your use cases?\nWe have about 90% ready solution for it on #2294 which just would need to be finalized.\nThen what comes to CI/CD into real production envs please comment about it to #2448 . That npipe thing will take a while as there is quite many dependencies but how about if we just create agent.exe which can run directly on Windows nodes and connect to tcp://localhost:2375 ?. @deviantony Yes, -H parameter and binary on .exe format should enough as start point. I can do testing for it.. @deviantony when I can expect to see it? . Btw. I did some investigations how Rancher have solved this issue on their 1.6 version (non-Kubernetes version).\nThey use docker image to provide binaries/generate configs for Windows but actual agent service is installed directly to host. You can try that using these commands:\npowershell\nNew-Item -Path 'C:\\Program Files\\rancher' -Type Directory\n$obj=$(docker run --rm -v \"C:\\Program Files\\rancher:C:\\Program Files\\rancher\" rancher/agent-windows:v0.2.0 -RegisterUrl http://192.168.100.100:8080/v1/scripts/FAC4FECCC3B20AD98176:1514678400000:ax9B3cegEyRUTUrA74mB2CsiyK0)\n$obj |& \"C:\\Program Files\\rancher\\startup.ps1\"\nYou can find scripts which they have inside of docker image from here: https://github.com/rancher/rancher/tree/v1.6/agent-windows\nand actual agent build scripts from here: https://github.com/rancher/agent/tree/v1.6/scripts/windows-ci\nI think that similar solution would works with portainer Windows agent too.. @aiminickwong / @danielfrancora note that there is test version of Portainer with named pipe support on https://github.com/portainer/portainer/pull/2018\nIt would be nice if you can also test and comment there to how it works as that it is pre-requirement for Portainer Windows agent.. @aiminickwong I'm just curious that which kind plugins you have in mind?\nAs there is multiple ways to get similar results. For all generic stuff pull requests are of course best option so everyone will get them to use. Customizations can be also build outside of Portainer and make them just communicate over API.\nWhat is best method of course depends on use case. . @danielfrancora I just tested of combination of Win Srv 1803 + Docker 18.03.1-ee-1 and Portainer 1.18.1 with this stack and I can tell that it works just fine:\n```\nversion: '3.3'\nnetworks:\n  test:\n    driver: overlay\nservices:\n  win:\n    image: microsoft/nanoserver:1803\n    volumes:\n      - C:\\test:C:\\test\n    networks:\n      - test\n    deploy:\n      endpoint_mode: dnsrr\n      placement:\n        constraints:\n          - node.platform.os==windows\n    command: ping -t 127.0.0.1\n```\nSide note: Both Win 1803 and  Docker 18.03.1-ee-1 contained lot of fixes to multiple issues so it is highly recommended to update to these versions.. @theatricshrink I highly recommend that you switch to Windows Server, version 1803 + docker 18.03.1-ee-1 as there is lot of fixes to Windows containers issues.\nLet us know that does not help.. I published docker image for testing purposes which contains these changes . You can test it with command: \ndocker run -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine -p 9000:9000 -d ollijanatuinen/portainer:windows1803-amd64-npipe-1\nImplementation is now done on way that when you add local Docker env you just need enable \"Windows containers\" switch on there:\n\nNOTE! Currently that image it is build from my debug branch which also contains DialPipe workaround https://github.com/olljanat/portainer/commit/0c564d7e14455fac9f2a071a834e3d12844b8bf4 and where I have rollbacked 61c285bd2e3b16538b455c653a3be0749d46ce5f as it looks to be broken (at least l always got \"Unable to locate template file on disk\" error with it).\nTest results\n- Windows 10, Version 1803 + Docker 18.03.1-ce-win65 - works fine\n- Windows Server, Version 1803 + 18.03.1-ee-1 - gives me error:\n2018/07/04 22:50:22 http error: Unable to proxy the request via the Docker socket (err=open //./pipe/docker_engine: Access is denied.) (code=500)\nIf I try without mapping npipe I got error like this:\n2018/07/05 00:21:32 http error: Unable to proxy the request via the Docker socket (err=open //./pipe/docker_engine: The system cannot find the file specified.) (code=500\nso it looks that npipe mapping works even on server version but I misses some permissions.\n@StefanScherer any ideas what would be missing?\nOther known issues currently:\n- If you add local connection without selecting Windows containers. It will be saved with incorrect settings even if you change it.\n- Swarm mode does not work correctly. Any access to services gives very weird errors.. @deviantony ping. No worries. I also found and fixed one new bug and did plenty of more testing.\nThere is now docker image ollijanatuinen/portainer:windows1803-amd64-npipe-4 build directly from this branch without DialPipe workaround and same version Windows binaries can be found from: https://github.com/olljanat/portainer/files/2177891/portainer-with-npipe-support-pre4.zip\n@seal-ss I did quite lot of testing with this one I was not able to repeat that old issue easily. I did see that once on Win 10 but after restart it disappeared and I have not ever seen that with Windows Server, version 1803.\nSo IMO we can merge this even before DialPipe fix merged.\n. True. It happens only time to time and I only see that on dashboard but it is still there.\nNow there is also test version ollijanatuinen/portainer:winio-pr80 which contains content on this PR + proposed fix from winio.\nWith that one I was not able duplicate that issue anymore.. @deviantony Now there is just one squashed commit which contains whole solution and:\n- changes you requested\n- detecting local endpoint based payload combination of name \"local\" which looks to be hardcoded on here https://github.com/portainer/portainer/blob/b6792461a4d9606327c6bde46c9fc0f0174ae1c8/app/portainer/views/init/endpoint/initEndpointController.js#L32 and empty URL\nTested both on Linux and Windows, with and without \"-H\" -parameter.\nOnly real visible UI change is this info message on endpoint init page:\n. @deviantony winio workaround is not included as I was able to confirm that https://github.com/Microsoft/go-winio/pull/80 fixes issue and it looks to be on approved state so hopefully they will merge it anytime soon.\nI will do changes you requested later today.. @deviantony yes, I have have tested most of the stuff. Console, service deployment, etc works fine.\nBut I just noticed that Stack deployment looks to be broken on develop branch even without these changes and created issue from it: #2038 \nI can do one more test round after that one is fixed.. @deviantony My bad. I just didn't understood reason to have docker.exe on image so I was left it away.\nI just build new version of docker image which contains all code changes on this PR, winio fixes and 17.09.0-ce version of docker.exe (copied from 1.18.1 version package) with name ollijanatuinen/portainer:windows1803-amd64-npipe-final\nOn that one even stack deployment works just fine :)\nSo there is no any other reason to wait after winio fix is merged.. @deviantony yes. Both compose version 2 and swarm stack deployments works like same way like than on 1.18.1. No new bug generated by this changes but I found one Windows containers related bug which already exists on 1.18.1 + TCP (will create old issue from that one).\nNamed Pipe support for Windows containers have been there from day 1 as that it way how docker cli communicates with docker daemon. Feature which we use here is ability mount Named Pipe inside of container and that requires at least Windows 10/Server, version 1709 + Docker 17.09.\nBut older versions can still use old way to communicate over TCP 2375.\nSo this one is ready for merge when winio fix is merged.. @ragaar -u parameter is not need because it is set inside of Dockerfile and you most probably want include data folder mount too like it is on http://portainer.readthedocs.io/en/stable/deployment.html#persist-portainer-data\nso result will be \ndocker run -d -p 9000:9000 --name portainer --restart always -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine -v C:\\ProgramData\\Portainer:C:\\data portainer/portainer\nWe hopefully get this one included to release which is scheduled to next week.. I noticed that this PR was not fully compatible with #2033 so I added one more commit to fix that issue.. @deviantony I just tested on Win 10 that both Linux and Windows containers works with commands given on here http://portainer.readthedocs.io/en/stable/deployment.html#windows except that there is small typo which I fixed on portainer/portainer-docs#54\nWindows Server 2016 need still follow old documentation: http://portainer.readthedocs.io/en/stable/faq.html#how-can-i-setup-portainer-on-windows-server-2016. Yep but npipe is not used until user selects local connection.\nSo ask him open new issue with all details. . @deviantony good point (forgot that). Linux works after enabling Swarm mode but Windows still looks to be broken develop (and working on 1.18.1). \nTested that with stack like this:\nversion: \"3\"\nservices:\n  test:\n    image: microsoft/nanoserver:1803\n    networks:\n      - test\n    command: ping -t 127.0.0.1\nnetworks:\n  test:\n    driver: overlay\nAnd error on console is just:\n2018/07/12 20:28:53 http error:  (err=) (code=500). This one was without npipe but looks to be my bad. I didn't understood that docker.exe need to be exactly on same folder with portainer.exe.. @DjTrilogic no ETA. I was not able correct place from code for that exception on quick looking.\nKnown workarounds:\n Deploy stack outside of Portainer using docker-compose\n Enable Swarm mode.. @NigelKitcher nice. Can you create PR of it to https://github.com/portainer/libcompose so we can test it and get part of official version? \n. @flec if you use example this http://www.yamllint.com yaml validator you can see that you are missing colon from second last line.. @flec OK. I can see same issue on my lab. Then it is bug on Portainer / libcompose (library used without Swarm mode).. @flec / @danieldaeschle I actually find out that stack deployment works correctly if I modify it look like this:\n```\nversion: '2'\nservices:\n  mq:\n    image: rabbitmq:latest\n    container_name: sample-mq\n    restart: always\n    networks:\n      - web\nnetworks:\n  web:\n    external:\n      name: web\n```. @deviantony I will still fix that codeclimate warning later but can you review if something else is needed?\nEDIT: Codeclimate recommendations after last change looks actually bit weird as these sections have nothing to do with each others. What I should do for that?. @deviantony thanks. Corrected these ones now. Original implementation is not my code and DB migrator logic is bit unclear for me still so don't get surprised if you see weird things on there :wink:. @deviantony imported patch, corrected texts and tested LDAP and internal logins works like they should and it is not possible to remove last local admin.. One thing to consider on this area is that how to actually implement this?\nExample Rancher decided to integrate Nginx LB directly to their UI and now they are need solve how to support alternatives. You can see discussion on their issue number 14007 (I skipped linking directly to it on purpose).\nThat why I think that it would be better to take e.g. Nginx and some good configuring UI and create App Template from them. Then community can more easily develop multiple options and these can be connected to Portainer UI like it is proposed on #1932\nAnother good thing on that approach is that companies (like my employer) who want that all configurations including LB configs are stored to version control and are updated production only by CI/CD pipeline can do that but still get same LB monitoring/statistics view(s) to Portainer.\ncc: @deviantony / @ncresswell . @aiminickwong yes this needs some balancing between simplicity and flexibility.\nBut IMO is that if LB/service discovery is provided as App Template/stack which contains UI which integrates directly to Portainer UI and if that is even installed by default to new Portainer installations it can give same simplicity than there is currently on Portainer without losing possibility to decide use some other LB/service discovery module(s) too.\nJust to give some perspective I can tell that our CI/CD pipeline contains currently four Docker Swarms where first one is so called \"experimental\" environment which purpose is provide maximal flexibility to try/invent new stuff and on other end we have production environment which purpose is provide maximal stability and security. Our target is to be able to manage all these using single Portainer installation so yes I really need think about this from others perceptive too :wink:\nEDIT: Based on this https://arador.com/traefik-replacing-nginx-haproxy-reverse-proxy/amp/ I would consider to use Traefik on here and integrate their UI to Portainer layout. . Problem is on these relative paths which you are trying to use.\nYou have two options:\n1. Create create folders/files on docker host like this:\nbash\nmkdir /path/to/ -p\ntouch /path/to/.taskrc\ntouch /path/to/.task\ntouch /path/to/hosts\nand modify stack file to use bind mount using absolute paths like this:\n```yaml\nversion: \"2\"\nservices:\n  taskwarriorweb:\n    image: zebradil/taskwarrior-web\n    ports:\n      - 5678:5678\n    volumes:\n      - /path/to/.taskrc:/root/.taskrc\n      - /path/to/.task:/root/.task\n      - /path/to/hosts:/etc/hosts\n    extra_hosts:\n      - task.host.com:138.200.200.100\n```\n\nModify stack file to automatically create volume:\n```yaml\nversion: \"2\"\n\nservices:\n  taskwarriorweb:\n    image: zebradil/taskwarrior-web\n    ports:\n      - 5678:5678\n    volumes:\n      - taskwarriorweb_data:/data\n    extra_hosts:\n      - task.host.com:138.200.200.100\n```\nand modify your container image to look these files from /data folder.\n. Hmm. So first of all you should use config. Not volume/mount: https://docs.docker.com/compose/compose-file/#configs\nThese you can create / manage from Portainer but you probably need create them before creating stack.. @Zebradil btw. I just noticed that you are using compose stack instead of swarm stack. There is no config option available. You need enable Swarm mode to get that feature to use.\nProblem with relative mounts is that source files/folders does not exist on folder where process are actually run and at least I don't even know which folder they should be created.. Closing this now but will leave source repo to Git so it can be reopened if we decide go forward with this one.. @kristoferlundgren what is problem on using SSO over OAuth? Nowadays OAuth is supported by almost everything (example with GitHub) which developers are often using.\nI definitely support of idea to remove --no-auth if that helps make Portainer more secure/implement SSO. IMO, biggest issues on Portainer are currently missing OAuth and detailed RBAC support.\nPing everyone who have commented about original implementation: @bfritscher @t3chn0m4g3 @geggo98 @abrander @t3chn0m4g3 @mapio @johanfrick-mobenga @dimitrovs @Dids @dimitrovs \nAre you guys still using Portainer without authentication and what is reason for it? What you think about using SSO instead of?. @kristoferlundgren are you seriously saying that these environments security policies still allow you setup systems which give you full access to all the containers without authentication? \ud83d\ude2e\nIf internet connection is limited then correct approach is of course to have offline OAuth IDP.. @robertbaker it quite standard practice especially nowadays that it should  make simple for user to make system secure and as hard as possible to make it unsecure.\nYou need also remember that authentication and authorization are two totally different things. When you disable authentication from Portainer and use some third party authentication front of it you also lose authorization and all users have full access to system which is very bad idea.\nBut if you enable external authentication with OAuth users can get single-sign-on to system but you still are able to use Portainer internal authorization.. @opera443399 Do this happen only on upgrade or on new installations too (if you clear /data/docker/volumes folder from agent machines) ?. @opera443399 I readed these logs more carefully now and noticed that agent actually was running on 3/5 nodes after upgrade?\nCan you tell what are role of nodes which was OK and which was giving error?. @opera443399 ok. what happens after that error? Will container stop or hang on that error? It looks be that code founds eth0 but not IP of it when this happens. If there are running can you try stop them and let swarm try restart?. @opera443399 ok. Can you try update to that portainer/agent:2102 version which is same but with extra logging?. @dehy if that happens again try just stop agent container from non-working host and let swarm re-schedule it there.\nAnd please create new issue so it easier to keep track of these. . @ripclaw786 based on log looks that you have give parameter --templates http://templates/templates.json for Portainer and Portainer cannot access to that address.\nCheck that your container templates (assuming that it is container) is on same network with Portainer. . @erosenberg you have typo on docker.sock mount. It would be also good idea to check docker log <container id> from failed container. \nIf that does not help then create new issue. . @mvajid can you run command docker info on both machines and copy result to here?. @mvajid ok. It looks that we broke it when added support for newer versions.\nWe will fix asap.\nEDIT: Side comment. It is recommended to use latest semi-annual channel version (currently Windows Server, version 1803) with containers if that fits to your use cases.. @harrygulliford do you have multiple agents? Is same issue happening on all of them or just the one where Portainer endpoint is connected? . @jhamlin-tibco you need update docker version to at least 18.03.1-ee-1.\nLook: https://docs.docker.com/ee/engine/release-notes/. @jhamlin-tibco actually Docker versioning is not matched with Windows versioning.\nThey just looks similar as 18.03 means that its release date have been on March, 2018 (and earlier EE version 17.06 means June on 2017).\nIf DockerMsftProvider does not install latest version without specifying it you should report it as a bug to  https://github.com/OneGet/MicrosoftDockerProvider. ping @rushirajsilvertouch what is status with this one?\nWith updated documentation which most probably can close also #1926. @deviantony ok but notice that I have no big interest to implement this as it does not fit to our use cases (look: #2448 ).\n. @michaellee8 what is status of this? I have also got lot of feedback from our users that console is too buggy.. @michaellee8 I find out that multi-line commands are at least fixed on recent version of Xterm.js so I created PR for update to it #2452 \n. @mmgil are you running Docker on Linux or Windows containers mode?\nWindows containers mode should work https://docs.docker.com/docker-for-windows/#switch-between-windows-and-linux-containers on that combination.\nAbout Linux containers mode I'm not 100% sure.\n. @mmgil and you are using this command to deploy agent?\ndocker run -d --name portainer_agent --restart always --network portainer_agent_network -e AGENT_CLUSTER_ADDR=tasks.agent --mount type=npipe,source=\\\\.\\pipe\\docker_engine,target=\\\\.\\pipe\\docker_engine portainer/agent:windows1803-amd64\nI have actually tested this only with Windows Server as there was open bug on Docker when agent support for Windows was implemented but based on Docker CE release notes it have been fixed on 18.06.0-ce so it should work.\n\nWindows: Fix named pipe support for hyper-v isolated containers. docker/engine#2 docker/cli#1165. @deviantony would it be that agent 1.1.2 have been build before https://github.com/Microsoft/go-winio/pull/82 was merged? Docker 18.06.0-ce contains that but as far I understand it is also needed to Portainer and agent code to get it working correctly on Hyper-V containers.. @mmgil which kind of setup you have on whole environment?\nIf you want run Portainer just locally on Win 10 you can of course use non-Docker deployment: https://portainer.readthedocs.io/en/stable/deployment.html#deploy-portainer-without-docker\n\nIt is also possible to use agent without Docker but it is not currently documented as it very special use case and bit tricky to setup.. @mmgil sounds that your options are:\n Use Win Srv 1803\n Use Win Srv 2019 (or latest insider version)\n* Use Win 10, version 1809 + Docker CE 18.09 when they are available as these supports process isolation mode. . @mmgil Couple of side comments. It took long time from me to figure out production ready configuration for Windows containers and I have listed most critical ones to here: https://github.com/MicrosoftDocs/Virtualization-Documentation/issues/818\nYou can also contact me on Portainer slack if you have some questions about this area, We have run Windows containers on production about one year already.. @krystian-er is this actually duplicate with #2181 which is already implemented but not released yet?. @deviantony when you have time it would be nice to get some feedback to this one?. > I've enabled it, created a container on the CLI and it was still declared as administrator restricted in Portainer.\nActually it looks to be functional but if you login as admin it is just shown incorrectly on UI. You need login as normal user to be able see difference.\nAnyway, included DB migration step now to simplify testing and corrected that tooltip text. I will figure out how to make UI shown ownership for admins correctly later.. @deviantony now ownership is shown correctly for admin users too.. @chiptus @Louis-Philippe @kendrick can someone of you test this one and give me feedback that what else I probably have forgot?\nIt make me very nervous that we are not able to update to any version after 1.19.1 before this one is merged and I really would like to get those new features which are coming to 1.20 to use.. @deviantony OMG. I can see it also with that image. Very weird as based on code ( https://github.com/olljanat/portainer/blob/0744b0517ad09da80f3c95451e25efe25358a58d/api/http/proxy/access_control.go#L47 ) resources should be public only if Make externally created resources public by default is enable and resourceControl is nil\nI will troubleshoot it more tomorrow. @ncresswell yes target is to let user choose between current behavior an the old one which still exists on 1.19.1 version.\n@deviantony I found that DB migration introduced by #2137 actually removes resourceControl from all services which are set to administrator only. \nhttps://github.com/portainer/portainer/blob/e1e263d8c88f0eefa68f4e013a0ce5d6b24f56c3/api/bolt/migrator/migrate_dbversion13.go#L11\nSo I need create DB migration which re-creates them and on it must be also created for all new resources. Only then switching between Make externally created resources public by default setting modes can work correctly. \nIs there some way detect on code that which resources are created outside of Portainer?\nPing @ricardona any comments? . @deviantony I modified code now on the way that all resources which are created from Portainer will have ResourceControl no matter who is owner. That way Make externally created resources public by default setting will only affect resources which are created outside of Portainer.\nI also disabled deleting administrators resource controls which was introduced on DBVersion 14 so anyone who are upgrading from version < 1.19.2 will avoid that. But because some users are already on 1.19.2 there is now also popup telling to user that some resources might be changed to public and user should review them.\nWay how external resources are now handled is that API creates resource control with type DynamicResourceControl for them on fly and that is these are not stored to database. Idea is that it can be also used with #1257 when it is implemented.\nKnown issue is that UI show ownership incorrectly on Stacks page but it would be nice to hear your feedback if this is now over all on right track before I dig into these minor things?\ncc @ricardona as I needed to change logic which you implemented.. > The Make externally created resources public by default switch will actually trigger an update of the settings right after clicking on it whereas for all the other switches in this view we expect the user to click on the \"Save settings\" button. In order to keep a consistent UX (albeit a bit worst) I think we should simply expect the user to click on save settings for this switch as well.\nFixed.\n\nPlease add these changes to the UX and we'll try to go forward to bring this in 1.20.\n\n@deviantony Do you have idea what would be best way to solve ownership which is shown on https://github.com/portainer/portainer/blob/a61654a35d87d0b0311569e745f808a9cf5d4e2c/app/portainer/components/datatables/stacks-datatable/stacksDatatable.html#L74\nStacks looks to be more tricky than everything else as there is multiple ways how stacks are resolved to list. (rights works already correctly but ownership is shown incorrectly).. @deviantony FYI, rebased to latest state of develop and fixed merge conflicts.. @deviantony new year and same old issues. Any possibility to look this one on near weeks? We really would like to rid of known bugs which exists on 1.19.1 and are fixed on later version but cannot do upgrade before this on is merged.. Sure I but can you first check that current way to store search criteria OK?. @deviantony now most of the datatables should be included.\nOnly ones which I was not able to get working are home page and template list. Any ideas to them?\nCodeclimate erros looks to be not related to this one but more likely to existing code. What I should do for them?\n. Almost. Now templates list uses filter from endpoint list for some reason. Need to debug more on some other day.. @deviantony is there btw some use case for refresh button on templates page?\nI removed it now so search criteria caching works correctly on app pages where refresh button is available.\n@yassirh can you maybe test and tell your comments?. @deviantony ok. I just wanted to be sure before waste more time with it.\nAnd let me know if you have good ideas what can cause issue.\nAfaik it is not directly caused by this change but instead of there is some old code which makes templates page to use same cached search criteria than endpoint list (you can still see it if you check from first commit).. If requirement is that search criteria should we saved on templates page too and removing refresh button is not option then I most probably need help.\nI will open conversation to problematic code lines... . @deviantony Reverted refresh button disable and added new commit which implements table-key for endpoint and template lists but unfortunately symptoms are still same:\n- If I write search criteria to templates list and click refresh it disappears.\n- If I write search criteria to endpoint list and click refresh it is persistent like expected.\n- If I then switch back to template list it is filtered with search criteria on endpoint list.\n- Search criteria persistence works correctly on all other pages.. @deviantony Thanks. I didn't see those ones. Now it looks working correctly.\nReady for review.. @deviantony most probably I just forgot to check these after I got this one working. Now all errors should be disappeared.. @yassirh sure. I can test it.... Good to hear as my test machine looks to be broken currently.... Charts at least looks much better than earlier :+1: \n\n. There also looks to be nice documentation from Google (Creating a CI/CD Pipeline with VSTS and Kubernetes Engine) where they run kubectl on VSTS agent.\nProbably less painful way is use same idea and run microsoft/vsts-agent on Docker Swarm manager(s) with /var/run/docker.sock mount and run docker stack deploy commands on CI/CD pipeline.\nSo probably good enough solution for this one is:\n- Handle these referenced PRs/issues.\n- Include VSTS agent to app templates.\n. > olljanat/portainer-vsts-deploy runs only on windows hosts (because of powershell requirement) and also lacks some basic features.\n@SalvadorSarpi yea. I assumed that it would work on Linux with PowerShell Core but looks that Microsoft have not implemented PowerShell Core support to VSTS agent for extensions. So re-write with NodeJS would be probably best option on that track. You can anyway re-use at least manifest files from it (helps if you have not build any Azure DevOps extension earlier) but notice that it categories setting need to be added to get it publish (Microsoft added that requirement couple of weeks ago).\nBut as all Azure DevOps extensions are after all just scripts which runs on agent I'm now thinking that maybe it would be better to just use docker stack deploy and fix those issues on Portainer with externally created stacks. That would be then it more loosen integration than API based but it would also be more easily then migrated to Kubernetes if someone like to do so.\n\nI'm currently using a direct SSH connection and docker stack deploy, the issue with this approach is that you lose portainer features.\n\nBtw. Which features you are referring? I'm only aware of lose of access control extensions but that should be fixable by implementing #1257\n. @ssbkang huge amount commits for small change. Maybe you should squash them: http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html. @turbo on swarm mode Portainer currenlyt uses docker stack deploy command for deploying stacks so it have same limitations than Docker it selves have so to get feature like that it would need to be added to Docker first.\nBut if you have access to Docker nodes you can set default logging settings on there: https://docs.docker.com/config/containers/logging/configure/. @xAt0mZ FYI this one needs rebase. > * With automatic user provisioning enabled: How can I use claims to grant or deny access to some user groups? Or is this not supported?\nBased on code it looks to be that this does not implemented auto team assignment (at least yet).\n@DovydasAL this needs rebase and it would be nice if you can include team auto assigment. You can find how it was implemented to LDAP from #2042. @deviantony as a side comment. You can use Win Srv 1809 to build images for older versions too using native Docker tools. \nYou can find guide and example for it from: https://github.com/olljanat/multi-win-version-aspnet\n. Afaik, next version of Portainer will provide official support for Win Srv 2019. Be patient.\nJust side note. Win Srv 2019 introduced lot of new issues which why it cannot be consider to be production ready yet. Look: moby/moby#38498. @mmgil most probably that happens because code cannot find network card.\nCan you share docker info output from node where you are trying to run this?. @mmgil 18.03.1-ee-5 is released before Win Srv 2019 so most probably it is not tested with it. Plz upgrade to 18.09.1. I can also see that your setup misses some Windows updates as .107 is not latest.\n@egzonzeneli that is most probably related to moby/moby#38484 which afaik is bug on Windows and will need update from Microsoft side. So probably is not possible to use Portainer agent inside of overlay network before that \ud83d\ude22 How ever it should be possible to Portainer it selves on Win Srv 2019. \n@deviantony we most probably need also add some checks to code so it will give some nice error message instead of just crashing.. @mmgil are you using some special configuration which disables IPv6, etc? I can see that Link-local IPv6 Address is missing from those pictures. I just tested on my Win 2019 lab machine that it exists on there.\nCurrently Portainer agent is using second IP address from first vEthernet interface which it can find as normally first IP is link-local IPv6 and now it is failing on your env as there is only one IP.. @mmgil that feature needs Docker API version 1.40 which will be released part of Docker 19.03.. I needed that to be able build Windows Server, version 1803 compatible version on Win 10 (docker build . --build-arg SOURCE_TAG=1803) other why it defaults to Windows Server 2016 based version.. I find out on Windows Server, version 1803 where it tested these images using Docker process isolation mode that if VOLUME statement is on Dockerfile Portainer does not see C:\\Data folder and wants create that but Windows things that it is there and folder creating fails. That that fails whole Portainer start process. Without that line it works correctly.. True. My bad.. Hmm. If we assume npipe:// or unix:/// based on OS then we can remove this parameter and whole Windows/Linux containers selection.\nI will change it like that.. OK. I will re-check the original implementation. Hmm. I did now some more testing and found that USER ContainerAdministrator line actually fixes also this issue.\nIf that line is not on file and VOLUME statement is starting portainer gives error like this:\n2018/07/11 10:30:14 mkdir C:\\data: Cannot create a file when that file already exists.\nSo I will restore that line to file.. Probably. I was just not familiar with that tool. I can test and remove ARG layer if that works.. Definitely not needed. Copy/paste error. Will remove.. Definitely not needed. Copy/paste error. Will remove.. No. I just quickly tested that docker run -t --rm -u ContainerAdministrator microsoft/nanoserver:1709 cmd /c echo %USERNAME% command works just fine.. And on microsoft/nanoserver:sac2016 it actually does not change anything as ContainerAdministrator is default setting on that version (but also does not break anything).. ",
    "ivandir": "Thanks for adding this Anthony!\nYou're doing some amazing work with portainer.. @WTFKr0 I have very basic use cases than you since I see other tools like Splunk or ELK helping with log parsing and alerts. Since Portainer is a one stop show for monitoring our Swarms I just would like to see what the current state of each container is, their usage or resources and basic alerting similar to what @pascalandy requested.\nAgain there are and will be tons of SW platforms out there for managing containers. I see portainer and its plugins playing a big role in the startup scene with low cost and low barrier to entry or management.. ",
    "Ponsjuh": "I think the sun and moon where not aligned correctly, because i can't reproduce the problem atm. I just figured it out\nto reproduce the problem start the container with \ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --no-auth\nI pulled the development version but no clue how to get the --no-auth option running\n. ",
    "chrisgit": "@deviantony I know you have closed this issue but as an FYI, I got this error today.\nAs per your suggestion I tried another browser and Portainer appeared to work so went back to my initial browser cleared my LocalStorage and re-tried, it worked. Good stuff!\nIn Firefox clearing LocalStorage can be done with the following\nlocalStorage;\nlocalStorage.removeItem(\"foo\"); \nlocalStorage.clear(); // remove all of localStorage's properties. ",
    "juansanjuan": "Hi Anthony:\nI think that the problem is related to IE 11 becuase I have found\nsimilar problems related to information refresh.\nI installed Firefox on W2016 and portainer  runs perfectly like in\ncentos 7.\nIf you like to close the issue is O.K. for me.\nBest regards.\nJuan\nOn Fri, Mar 17, 2017 at 5:37 PM, Anthony Lapenna notifications@github.com\nwrote:\n\nMaybe more description here?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/694#issuecomment-287405678,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AYKRpUTR5mQZkeCt7P7FLUcAoFoXxBd_ks5rmra3gaJpZM4MgyiL\n.\n. \n",
    "soumyadipDe": "Following. ",
    "Panderine": "Hi! is this implemented or not yet?. This is needed for nginx-gen reverse proxy automation. If not, you need to manually launch the container in order to declare the exposed port.. Yes, that was the issue. Private/clean cache shows correct GUI version.  Thanks!!. ",
    "surtic86": "Any news About this?. Okey i will look into it if i can help with this.\nHow should we Implement this Feature? Should i add another Section under \"Port mapping\" labled like \"Port exposing\" just with one Numberfield for the Container?\n. ",
    "bongomanuk": "Waiting eagerly for this, otherwise it's not possible to setup nginx-proxy as it requires --expose for service discovery. https://github.com/jwilder/nginx-proxy. Has anyone found a workaround? Thanks.. ",
    "11111000000": "Any news on that?. ",
    "mkulagowski": "@raphaelquati It's possible that You are connected to the swarm-master and thus networks are without prefixes. When You switch the docker host like this: export DOCKER_HOST=:2375 all Docker commands will go to the swarm & You will be able to see  network names with prefixes (per node), just like shown here.\nIt works like this, because swarm container on master node has port 2375 mapped .. @raphaelquati I'm not able to access Azure portal from my current location, so I'll check it later, but my next step would be:\n1. ssh to ACS\n2. export DOCKER_HOST=:2375\n3. docker network ls\n4. docker ps\n5. docker run -d yeasy/simple-web\n6. docker ps\n7. docker run --network \"swarm-agent-*/bridge\" -d yeasy/simple-web - get network from step 3.\n8. docker ps\n9. docker run --network \"bridge\" -d yeasy/simple-web\n10. docker ps\nLast time when I checked, there was no \"bridge\" network inside the swarm - each network was created for each of the agent nodes. I'm curious whether we can create container using \"bridge\" explicitly, even though it's not shown in docker network ls. Maybe this would be solution to this whole problem?\nAnd btw great job replicating error in CLI!. It looks like changing network management from by-name to by-id should resolve our troubles.\nI'm sorry but I probably won't help You guys and submit pull request with solution - I'm on bad terms with js :P. I've run additional tests while inside the swarm and using @raphaelquati networks as example:\n [PASS] docker run -d --network \"4efd39a8a75d\" yeasy/simple-web\n [PASS] docker run -d --network \"bridge\" yeasy/simple-web\n* [ERR] docker run -d --network \"swarm-agent-20934B88000000/bridge\" yeasy/simple-web\nSo using \"bridge\" as a name works as well and automatically creates container on the least used agent node (just as simple docker run -d yeasy/simple-web).. ",
    "Shinoby1992": "I know this thread is old, but i have done everything till step 10\n\"You should be connected to swarm-master-* node\"\n\"Go to endpoints and add a new one with URL: IP_from_point_5_1:2375\"\ni used this question as a tutorial for setting it up on azure in hope that this is changed now after 6 months. if i use my private ip adress from step 5.1 and create the endpoint i get an error message when trying to change to that it cannot connect . its a fresh install from today with the latest build    ( read from dashboard 1.16.4)\ndocker service create \\\n   --name portainer \\\n   --publish 9000:9000 \\\n   --constraint 'node.role == manager' \\\n   --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n   portainer/portainer \\\n   -H unix:///var/run/docker.sock\nits running my containers now , and it does have internet. \nBut i don't know why i cannot add the private ip adress from step 5.1 as a node ..   i have just the primary endpoint  ...      . yeah i can try it out and report back. but how im gonna step back to that version just using it like you postet it there that it does not use the latest?\nand btw a question, when scaling up my container, my problem is that scaling it up to 10 won't work, because my container reads a value and set it after loading online to \"is using now\" my code does load then the next value and skips the first. Scaling it up and replicate instantly 5 images or 10 images. it loads all the same value because its to fast. is there a way to scale it up lets say to 20 but in 5 seconds steps? if not thats a nice feature maybe for next version (or is it idiotic because scaling up to be not in instant is worthless haha?). no im just used the exact procedure like in the questions ask\ni tried to rerun with the create cmd \ndocker service create \\\n   --name portainer \\\n   --publish 9000:9000 \\\n   --constraint 'node.role == manager' \\\n   --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n   portainer/portainer:1.16.2 \\\n   -H unix:///var/run/docker.sock\nbut going to portainer it seems still 1.16.4 is running \ni tried:\ndocker stop $(docker ps -a -q)\ndocker rm $(docker ps -a -q)\nbut after some seconds i see with docker ps  again portainer starts running \nso how can i delete and stop portainer to run it as 1.16.2? . Okay now i got running 1.16.2 still not working.\nI've done all steps in the questions, but there has to be a error because \ni don't understand how this even should work \ni want to add the 2 agents but i tried all ips out that i found in the resource group\nbtw:\nwhen i create a stack and set it up with update_config: parallelism: 1 and delay 10s \nand then i scale the service to 5 replicas, they get instantly started, so the 10seconds delay gets ignored. Okay it seems that, doin the steps like in the Questions ask, does not anymore bring you a error popup like it does in the question, but still its impossible to run the nodes. I've done it like he stated with the Azure engine in his answer.  and now its working perfectly!\nNow im using the latest version of portainer but still the update delay does not work, Is it a error in portainer?\ni create the stack with this and then scale it to 5 manually they getting run instantly.\nversion: '3'\nservices:\n  worker:\n    image: xxxxxxxxxxx:dev\n    deploy:\n      mode: replicated\n      replicas: 1\n      update_config:\n       parallelism: 1\n       delay: 10s\n      restart_policy:\n       condition: on-failure. Yes correctly \ud83d\udcaf \nthere is no way around it to get it work on azure (i couldn't, and i even think its simply not possible because of azure structures somehow don't care i don't know)  than use the official template creation tutorial from azure, i created it with this tutorial here:\nhttps://github.com/Azure/acs-engine/blob/master/docs/swarm.md\n(main site is https://github.com/Azure/acs-engine then use the \n\"Swarm Walkthrough - shows how to create a Swarm enabled Docker cluster on Azure\")\nDoin it with the template, the azure server had a fully correctly configured network behavior, so i could easily like before ssh to the main server,  install portainer via docker commands and then finally add without problems the IP adress of the Agent Node, it worked instantly, not any problem (portainer latest version using).\nWithout that template, i tried everything out but it was worthless somehow nothing could communicate in the network, only the main server was accessible \ud83d\udc4d  \nBut still like said portainer ignores the update_config im sure i have setted it up correctly, but there is not any delay, i tried 10s, 5s, 1m nothing worked, the service always when scaling it up it gets instantly created to the setted number. if im fast enough to refresh and go back to \"container\" i see there are my containers created and have the status \"preparing\" like oh nice they are waiting now, but then refresh it again after 1s , they are all created and \"running\". Is this a possible bug that has to get fixed? . Somehow it is a Portainer bug, i can explain why. Because the only reason this happened is because of a bug (im not able to reproduce directly but happened now 2 times in 1 week, with a configuration by myself on my server and on a server of a friend running the same codes)\nI tried to login to portainer with defaultlink:9000 and i got the error message that the password was wrong, after 3-4 times, i got redirected to the portainer dashboard for first launch where i have to type in the admin username and set the new admin password.\nand exactly thats the reason i got this error, because then i was on portainer and when i go to stacks there where the 2 created stacks created \"externally\" which i cannot edit, nor delete. All settings were also lost. so like using a new portainer. i tried somehow to get attain to the \"old\" portainer \nbut it was like the old run-in portainer was lost, but the stacks not. \nso that was the reason that whenever i run a new stack and service, it says its already running, so i had to delete the networks on master, and tried it then to the agent node, and voila. now i see i have to firstly delete agent and then the master network else, its no point to revert it.\nSo this \"portainer\" reset, was the main reason this all happens ... i hope it don't happens again because i doesn't touch anything and this does happen i don't even restart the server.\ni guess the invisible stacks are able to getting delete, but then i still have the problem that i can't ssh to agent node and delete there from sli the networks -.- portainer could prevent this with don't let networks delete on master before they are deleted on agents (this seems to be docker side bug that it has to be in this order the deletion ) , or something like if you delete on master, delete on agent before. \nThe other bug with portainer gets resettet because ??? is also a nasty bug \nnow all my services only run on master node, agent node is active but always getting rejected error doe network already in use.... -> Create the server\n-> SSH to Master\n-> Pause the Agent, and set the Master to Active \n-> Run this code \ndocker service create \\\n   --name portainer \\\n   --publish 9000:9000 \\\n   --constraint 'node.role == manager' \\\n   --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n   portainer/portainer \\\n   -H unix:///var/run/docker.sock\n-> now portainer runs on master node\n-> activate the agent node again\nagain that was my procedure \nand it works means, using a custom registry, pull image, create stack, run service \ni just have 1 master and 1 node i never touched anything then but \nafter some days its like portainer gets resettet i see this when i try to login and then ups wrong password..after 3 attempts i get a fresh portainer with redirecting to /init/.... i tried it out. after a reboot through shell , the same again.\ni try to login but password authentication error and after 3 times pressing login, it get redirected to the create account website ...\ni created portainer with \ndocker service create \\\n    --name portainer \\\n    --publish 9000:9000 \\\n    --constraint 'node.role == manager' \\\n    --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=/var/run,dst=/data \\\n    portainer/portainer \\\n    -H unix:///var/run/docker.sock. okay i got it working i had to manually create a folder with\ncd /var\nsudo mkdir data\nand than use it\n--mount type=bind,src=/var/data,dst=/data \\\nbut still even the latest portainer version 1.16.5 still does not u use the update delay in stack configurations!! all my service always upscale instantly to the setted number . no due to persistent data this does not happen anymore, and if i have to reset the whole VM because in azure its not simply possible to connect through ssh to the agent nodes and there is no workaround the network on agent node have to get deleted before on the main, otherwise it gets locked to something that don't exist anymore and cannot get removed then.\nso i should open a new issue, related to the update config that gets ignored.\nthank you for your fast reply and help :-) . ",
    "karel1980": "@deviantony this does not seem fixed in the latest portainer/portainer (1.15.3).\nWhen a user without access to any endpoints tries to log in, the error message is still the same.. I though it had to be possible for a user to log in, just that he/she would\nnot be able to do much (except perhaps change the password)\nOn Fri, 8 Dec 2017 at 14:18 Anthony Lapenna notifications@github.com\nwrote:\n\n@karel1980 https://github.com/karel1980\nWhen a user without access to any endpoints tries to log in, the error\nmessage is still the same.\nWhat do you mean? The message 'User not allowed. Please contact your\nadministrator.' is expected in this situation.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/706#issuecomment-350260889,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJVvQefXxijCFgLh56qj28mN9O-1W97ks5s-TckgaJpZM4Midez\n.\n. @deviantony after having played around with it a bit more I still don't why wouldn't be allowed to change your account/profile details just because you don't have access to any endpoints. Wouldn't you agree?. \n",
    "cecchisandrone": "I tried pinging external address and it doesn't work, while I manage to ping VLAN address (e.g. 192.168.0.x).\nMy situation is the following: \n\nI created 3 hosts using docker-machine on Azure\nI run Portainer as service and I try to add endpoints using their \\<public IP>:2376\nIn the logs I see http: proxy error: dial tcp 192.168.0.5:443: getsockopt: connection refused\n\nThe different IP is probably due to Azure resolving the external address to private LAN address (the 3 hosts are in the same VLAN) but anyway I don't understand why it's using port 443 instead 2376.\nI tried using VLAN address and it's the same. Ok...it is probably linked to Azure VMs.. For me, It seems related to the fact that from within a container it's not possible to ping other Azure machines, using their public IPs or VNet IPs. It is maybe related to firewall but I didn't manage to make it work.\nSent from iPhone 5S\n\nIl giorno 27 mar 2017, alle ore 11:34, Brian de Heus notifications@github.com ha scritto:\nHaving the same issue on GCE. Created a few swarm nodes, started portainer:\n2017/03/27 09:33:26 http: proxy error: dial tcp 10.140.0.18:2376: getsockopt: connection refused\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. @deviantony I tried docker -H <public_or_local_ip>:2376 --tls --tlscacert ca.pem --tlscert cert.pem --tlskey key.pem ps and it works (from the machine, not a container). What I don't understand is why Portainer puts port 443 instead 2376 in the error log, even if I specified 2376 as port:\nhttp: proxy error: dial tcp 192.168.0.5:443: getsockopt: connection refused. Seems fixed guys ;). \n",
    "mwbrown": "I managed to stumble across this bug with the following steps:\n\nAdd a new endpoint with TLS enabled, but don't specify the TLS port (which is actually 2376 in this case). In my case I specified a hostname on the local network without using the FQDN.\nEdit the endpoint after the fact to specify the port\nAttempt to switch to the endpoint in Portainer\n\nIt will fail at this point with the 443 port showing up because the host does not have anything open on 443. It almost looks like when updating the endpoint it is not also updating the port that is being used. I managed to fix it by deleting and recreating the endpoint, but specifying :2376 after the hostname.. ",
    "leenooks": "I've just stumbled across this as well. I'm not running portainer as a service, but as a standalone container. I originally created endpoints without TLS - and then went and updated the endpoint to use TLS (and now port 2376), and when I select the new endpoint I still see portainer attempting to connect on the old address: \n2017/04/12 01:31:30 http: proxy error: dial tcp 10.1.3.10:2375: getsockopt: connection refused\nDeleting the endpoint and re-adding it back is a workaround. So it seems that \"Update Endpoint\" is not updating the endpoint URL.. ",
    "mvdpoel": "Already fixed it :)\nIn case someone else runs into this:\nThe problem was my port forwardings had no TCP/UDP selected. Selected those made it work.\nPerhaps an idea to make it TCP by default?\n. i've found that when you use portmapping in an app-template you need to specify the protocol. I.E. you'd pass port 8000:8000 you also need the specificy the protocol, like 8000:8000/tcp\nOnly then when you click advanced options you'll see protocol selected. Docker always defaults to tcp, i think portainer should to.\n. +1. ",
    "DjTrilogic": "Sure, here is the template:\n[\n{\n   \"title\":\"Usercube V4\",\n   \"description\":\"Latest version of usercube\";\n   \"logo\":\"http://localhost....\",\n   \"image\":\"usercube-v4-tests-ready-updated:latest\"\n}\n]. Forcibly. I reproduced the issue, I'm using \" Portainer v1.12.1\".... It seems even more flexible, I agree ! \ud83d\udc4d . any ETA on this bug please? i'm unable to make docker compose work on Windows ...\nA workaround is also welcome if any :). ",
    "raesene": "Adding clair for container image scanning would be great :)  If seeing other implementations would be helpful Harbor does this https://github.com/vmware/harbor but I'd prefer to see it in Portainer for my use case (which is doing security reviews of Docker images).  there are also some other tools like Anchore that can be used.   Sysdig have a good article on this https://sysdig.com/blog/container-security-docker-image-scanning/. Adding clair for container image scanning would be great :)  If seeing other implementations would be helpful Harbor does this https://github.com/vmware/harbor but I'd prefer to see it in Portainer for my use case (which is doing security reviews of Docker images).  there are also some other tools like Anchore that can be used.   Sysdig have a good article on this https://sysdig.com/blog/container-security-docker-image-scanning/. ",
    "stritti": "Maybe a administrative call for docker system prune could be cool via button.. ",
    "artisticcheese": "Sorry, it was something I did wrong. No issues.. Looks like it was working on older version but does not work on new one. (1.12.1)\nPS C:\\Users\\admin> docker logs 87 --details\n 2017/03/24 11:19:31 Migrating database from version 0 to 1.\n 2017/03/24 11:19:31 Starting Portainer on :9000\n 2017/03/24 11:21:40 http error: strconv.ParseInt: parsing \"containers\": invalid syntax (code=400)\n 2017/03/24 11:21:40 http error: strconv.ParseInt: parsing \"images\": invalid syntax (code=400)\n 2017/03/24 11:22:25 http error: strconv.ParseInt: parsing \"images\": invalid syntax (code=400)\n 2017/03/24 11:22:25 http error: strconv.ParseInt: parsing \"containers\": invalid syntax (code=400)\nPS C:\\Users\\admin> docker -H 10.44.129.134:2375 ps\nCONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS\n                NAMES\ncd670460fbd6        artisticcheese/iis:latest   \"cmd /S /C 'powers...\"   About an hour ago   Up About an hour    0.0.0.0\n:8080->80/tcp   cheese\n\n. This seemed to be UI issue. If you add end point via UI with no other endpoints available, then clicking on dashboard will show \"no dashboard available\" since no container is chosen in dropdown.. Here is reproduction steps. Also if anybody interested how this is done. It's awesome utility I was directed to called ShareX\n\n. Yes. I deleted active endpoint. UI does not restrict me from doing it.\n\n. It was open for close to a year now, so I thought no point to have it open. Running with no \"windows\" tag produces error below in log. Looks like it's trying to run unix container?\ndocker run -d -p 80:9000 -v e:\\data\\portainer:c:\\data portainer/portainer --no-auth\n```\npanic: runtime error: slice bounds out of range                                                                                                                     goroutine 1 [running]:                                                            panic(0x7e2060, 0xc042016020)                                                            /usr/local/go/src/runtime/panic.go:500 +0x1af                              syscall.Readlink(0x854e8b, 0x7, 0xc042142f00, 0x80, 0x80, 0x0, 0x0, 0x0)                 /usr/local/go/src/syscall/syscall_windows.go:1031 +0x3a9                   os.Readlink(0x854e8b, 0x7, 0xa40ca0, 0xc042031a40, 0x0, 0x0)                             /usr/local/go/src/os/file_posix.go:21 +0x94                                os.Stat(0x854e8b, 0x7, 0x0, 0x0, 0x7, 0xc04219fb00)                                      /usr/local/go/src/os/stat_windows.go:72 +0x9e                              github.com/portainer/portainer/bolt.NewStore(0x854e8b, 0x7, 0x854e8b, 0x7, 0x0)          /go/src/github.com/portainer/portainer/bolt/datastore.go:52 +0x1ce         main.initStore(0x854e8b, 0x7, 0xa3e580)                                                  /src/cmd/portainer/main.go:39 +0x4d                                        main.main()                                                                              /src/cmd/portainer/main.go:108 +0xaa                                       \n```. I already have it\nPS C:\\Users\\admin> docker images\nREPOSITORY            TAG                 IMAGE ID            CREATED             SIZE\nportainer/portainer   latest              128182dc81db        9 days ago          943 MB\nportainer/portainer   windows             484572f86ccd        2 months ago        884 MB\nPS C:\\Users\\admin> docker pull portainer/portainer\nUsing default tag: latest\nlatest: Pulling from portainer/portainer\nDigest: sha256:f3f9ae462f5773f99f0c2dc8015f3021de2639cbdf15fd1b3293602bbc0be74e\nStatus: Image is up to date for portainer/portainer:latest. Something to do with volume mapping. Without -v it works fine. Here is reproduction steps if needed.\n```\nPS C:\\Users\\admin> docker run -d -p 80:9000 -v e:\\data\\portainer:c:\\data portainer/portainer --no-auth\n3f7688cf1a883d08b6513993240c4a5ab2aa014afa533a4378f93c49eeeea80f\nPS C:\\Users\\admin> docker ps -a\nCONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                         PO\nRTS               NAMES\n3f7688cf1a88        portainer/portainer   \"/portainer.exe --...\"   10 seconds ago      Exited (2) 9 seconds ago\n                  vibrant_khorana\n878aacf42b61        portainer/portainer   \"/portainer.exe --...\"   25 hours ago        Exited (1067) 50 seconds ago\n                  gallant_hopper\nPS C:\\Users\\admin> docker logs 3f --details\n panic: runtime error: slice bounds out of range\ngoroutine 1 [running]:\n panic(0x7e2060, 0xc042016020)\n        /usr/local/go/src/runtime/panic.go:500 +0x1af\n syscall.Readlink(0x854e8b, 0x7, 0xc04215ef00, 0x80, 0x80, 0x0, 0x0, 0x0)\n        /usr/local/go/src/syscall/syscall_windows.go:1031 +0x3a9\n os.Readlink(0x854e8b, 0x7, 0xa40ca0, 0xc042037a40, 0x0, 0x0)\n        /usr/local/go/src/os/file_posix.go:21 +0x94\n os.Stat(0x854e8b, 0x7, 0x0, 0x0, 0x7, 0xc0421bb920)\n        /usr/local/go/src/os/stat_windows.go:72 +0x9e\n github.com/portainer/portainer/bolt.NewStore(0x854e8b, 0x7, 0x854e8b, 0x7, 0x0)\n        /go/src/github.com/portainer/portainer/bolt/datastore.go:52 +0x1ce\n main.initStore(0x854e8b, 0x7, 0xa3e580)\n        /src/cmd/portainer/main.go:39 +0x4d\n main.main()\n        /src/cmd/portainer/main.go:108 +0xaa\n``\nWhile below command (without-v`) works fine\ndocker run -d -p 80:9000 portainer/portainer --no-auth\n. Yes, this works. But what you provided fix720 tag did in fact fix the issue. . Does this work now with Windows containers?. Is there a specific tag for chocolateyfest image?\n```\nPS C:\\windows\\system32> docker run -d -p 9000:9000 --name portainer --restart always -v \\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine -v portainer_data:C:\\data chocolateyfest/portainer\nUnable to find image 'chocolateyfest/portainer:latest' locally\nlatest: Pulling from chocolateyfest/portainer\n6a5e981230da: Verifying Checksum\n6fb298d4ca0c: Download complete\n83678125b15b: Download complete\n76e25138f786: Download complete\n6a0467cc1469: Download complete\nC:\\Program Files\\Docker\\docker.exe: filesystem layer verification failed for digest sha256:6a5e981230da7b34a25588f20c8b6b5366256ab1e0aadc0b7ecb566855bf4679.\nSee 'C:\\Program Files\\Docker\\docker.exe run --help'.. You need to rebuild your image and upload to docker hub?. ",
    "AndrewSav": "@artisticcheese so is it resolved then?. ",
    "JoelSanchez": "I guess I should pay more attention :). ",
    "thomsonac": "I'd like to comment that so far Portainer looks great in our enterprise environment (dipping our toes in the docker swarm world).  We're excited at the direction of the project and the goals.  For us, right now, there are two main road blocks:\n1) AD Authentication\n2) Inability to save Service Templates.  This would be huge for us as we plan to allow multiple QA teams to deploy selenium grid templates but as they're not particularly technical, we'd like to save it as a template. ",
    "Martos": "I have the same issue on Windows 10. When i bind container: /var/www/html and host: D:\\www i getting error \"Invalid mode /var/www/html\"\n\nPortainer version: 1.16.2\nPortainer Docker image tag (latest/arm/windows...): latest\nPlatform (windows/linux): Docker for Windows, Linux container\nTarget Docker version (the host/cluster you manage): latest ce. \n",
    "dutchminator": "C:\\Temp indeed does not work, but I figured it out by running the container from the CLI, and inspecting it in Portainer's interface.\n$ docker run --rm -it -v C:\\Temp:/data ubuntu bash\nInspect showed the mount registered with a source of /host_mnt/c/Temp\nAfter putting in /host_mnt/c/Temp as Host for the volume through Portainer, it registered correctly!\n@deviantony Since the front-end structure is refactored, the relevant code can now be found in https://github.com/portainer/portainer/blob/develop/app/docker/views/containers/create/createContainerController.js#L165. I would guess this can be fixed by doing a check on whether it is a Windows path, and converting it to the /host_mnt/DRIVELETTER/PATH format.\nI'm horrible with JavaScript and lack the dev environment to do a proper PR, but with the regex /^([a-zA-Z]):\\\\([\\\\\\S|*\\S]?.*)$/g you should have the proper matching groups for respectively DRIVELETTER and PATH.. ",
    "vin89423": "Range mapping port should be very useful. I need this feature too, i have 400 port in range to map.... ",
    "airztz": "Is it possible to expose a range of ports now?. ",
    "dimitrov-adrian": "Well, I notice this after update to 1.12.1 week ago, today update to 1.12.2 and still persist. I have traefik on top, but as I say, the http://host/api/templates seems to provide complete templates json without problem. I also tested with different browser and anonymous session.\nI am not completely sure but I think in\nhttps://github.com/portainer/portainer/blob/2f3475b96a88d59b7c3961de7706b31a8ef03e2f/app/services/containerService.js#L12\nshould be data instead of d. ",
    "relenteny": "Thanks @deviantony.  Yes. The functionality you point out does work as indicated.  However, we are using docker stack deploy with a compose file with ports specified similar to this:\nports:\n   - \"8888\"\n   - \"10001\"\nIn 1.11, the Docker random port mapping value was displayed in the Service Details section, which allowed users to see what random port Docker had assigned to it.\nThanks!. @WTFKr0, @deviantony,  Thanks for the quick responses!!. ",
    "dedalusj": "Mostly security. The three security problems I see with a plain text password are:\n\nI wouldn't want the plain text password to be exposed to the bash history. \nWhen running portainer via a compose file I wouldn't want the plain text password exposed there (compose files are often committed in repositories)\nA simple docker inspect would reveal the plain text password\n\nAlso the escaping issue can be avoided if the hashed password is enclosed with ' like: portainer --admin-password '$fg$ff$sldvnsldvjns'. Sorry I should have commented it in the docs pull request.. The portainer container is built from scratch. Shipping htpasswd in the container require the use of a Docker image with a package manager which would increase the image size. Part of the appeal of portainer is its small Docker image, I wouldn't want to give that up.\nI added a CLI flag for passing a path to a file containing the password.\nAlso I changed the expected format for the password to admin:<password> which is the default output of htpasswd. This means users can now simply copy and paste that output when calling portainer.\nFor the cases where portainer is run via Docker a password file can easily be produced with htpasswd -nb -B admin password > password.txt and then mounted or bundled in the container.. @deviantony I removed the password from file functionality. I'll open another PR if necessary once the API for this has been accepted, don't want to update a second PR if changes are needed here.\nSame for the docs I'll update them once this PR has been accepted.. I imagine that you had to specify the IP address of the node when you created the SSL certificates. I didn't and when I try to connect to a node with TLS via IP I get an error like: cannot validate certificate for ... because it doesn't contain any IP SANs.\nUnfortunately my nodes are dynamic, they come and go all the time, and their IP address is not fixed which prevents me from creating certificates with IP in the Subject Alternative Name.. Yeah setting the InsecureSkipVerify is exactly the reason I was asking for the command line flag.\n@kennyko outlined the reasons for allowing a TLS communication without verifying the host. Yes it would expose you to man-in-the-middle attacks but it still means all communication is encrypted and all client are required the key to communicate with docker.. I believe that relying solely on the swarm api to control a cluster of docker nodes is going to be limiting.\nThe swarm API for example does not yet support logs for single tasks and it might still be a while before the feature lands in the API.\nAnother example  is running a single container on a specific instance using the swarm API. It can be done using very specific constraints but how would I then stop such container? I would have to browse through a possibly large list of services just to find the one running the container on my instance.\nEssentially I believe that the swarm API and the remote API serve distinct roles and it can be useful to support both in a dynamic cluster.. Deploying a little daemon on each instance is exactly what I would like to avoid. Why would I need a daemon to proxy requests to docker running on an instance when the Docker remote API is already capable of doing the job? It just means I have an extra component that can fail between me and docker running on a node.\nCan you elaborate on what advantages would the service offer over connecting directly to the remote API?. I thought about putting it in ValidateFlags for consistency but stripping the admin: preface in that method without checking its presence feels weird. If I saw the sanitation without the validation in that method I would assume it's a bug.\nAs an example if tomorrow the user for the password changed from admin: to something else or we decided not to have the user in the password it wouldn't be obvious to developers that they need to change the code in two quite different code paths.. Good point making the changes now.. ",
    "AchuthSankar": "Docker image pulled from portainer still not able to identify --admin-password. Could you please push a new image with this change.. ",
    "puncha": "@deviantony it seems the docker image is still not published. @deviantony yeah, it works! Thanks for pointing this out. I just notice there is a filter there. . ",
    "DBLaci": "I think you must add \"proxy_http_version 1.1;\" because the default is 1.0.\nThis is the config I use:\n```\nserver {\n   listen 80;\n   server_name portainer.example.com;\nclient_max_body_size 8m;\n   ignore_invalid_headers off;\nlocation / {\n     proxy_pass http://10.1.2.3:9876;\n     proxy_http_version 1.1;\n     proxy_set_header   Host               $host:$server_port;\n     proxy_set_header   X-Real-IP          $remote_addr;\n     proxy_set_header   X-Forwarded-For    $proxy_add_x_forwarded_for;\n     proxy_set_header   X-Forwarded-Proto  $scheme;\n     proxy_set_header   Upgrade            $http_upgrade;\n     proxy_set_header   Connection         \"upgrade\";\n   }\n}\n```\nAnd it is working. (in fact i have 2 reverse proxy between portainer and the browser). ",
    "soar": "@DBLaci I have proxy_http_version on http level:\n```nginx\nproxy_read_timeout 60m;\nproxy_send_timeout 60m;\nproxy_http_version 1.1;\n```\nAnd you could see, that in 2nd and 3rd versions of my config I've also set it.. @DBLaci oops! I've just copied your config - and it works! I will try to find string, that causes problem.. So, here is my investigation:\n\nproxy_http_version 1.1; - this could be defined anywhere - for example on http level\nproxy_set_header Host $host:$server_port; - not needed\nIf I replace proxy_set_header Connection \"upgrade\"; with proxy_set_header Connection $connection_upgrade; - it doesn't work\ngzip could be enabled or disabled\n\nSo, minimal working configuration is:\n```nginx\nserver {\n    listen 80;\n    server_name portainer.example.com;\nlocation / {\n    set $upstream \"portainer:80\";\n    proxy_pass http://$upstream;\n    proxy_set_header   Upgrade            $http_upgrade;\n    # You should always do \"upgrade\"\n    proxy_set_header   Connection         \"upgrade\";\n}\n\n}\n```\nBut I think problem is hiding here. I've added some logging and see this:\n[03/Apr/2017:11:20:56 +0000] \"GET /images/ie-spacer.gif HTTP/1.1\"   304 0    \"/css/app.1868c70b.css\"   \"Mozilla/5.0\" \"-\" http_upgrade: \"-\", connection_upgrade \"close\"\n[03/Apr/2017:11:20:56 +0000] \"GET /api/docker/1/networks HTTP/1.1\"  500 39   \"/\"                       \"Mozilla/5.0\" \"-\" http_upgrade: \"-\", connection_upgrade \"close\"\nMy configuration is based on this rule: http://nginx.org/en/docs/http/websocket.html - and when http_upgrade is - - it translates to connection_upgrade - close.\nAnd here is log from our own web-application, compare it:\n[03/Apr/2017:11:44:21 +0000] \"GET / HTTP/1.1\"                                                                                                                                  304 0   \"-\" \"Mozilla/5.0\" \"-\" test http_upgrade: \"-\", connection_upgrade: \"close\"\n[03/Apr/2017:11:44:21 +0000] \"GET /socket.io/?__sails_io_sdk_version=1.1.4&__sails_io_sdk_platform=node&__sails_io_sdk_language=javascript&EIO=3&transport=websocket HTTP/1.1\" 101 574 \"-\" \"Mozilla/5.0\" \"-\" test http_upgrade: \"websocket\", connection_upgrade: \"upgrade\"\nSame rule works like a charm - connection is successfully upgraded and socket established.\nSo, maybe I'm wrong, but why your JS code doesn't establish websocket connection with Upgrade: WebSocket header, as described here for example: https://en.wikipedia.org/wiki/HTTP/1.1_Upgrade_header ?. > containing:\n\nproxy_http_version 1.1;\nproxy_set_header Connection \"\";\n\nIt should be proxy_set_header Connection \"upgrade\"; as we discussed above.. ",
    "colthreepv": "Using nginx-proxy I have solved this same issue creating a file:\n/etc/nginx/vhost.d/extension.domain.com_location\ncontaining:\nproxy_http_version 1.1;\nproxy_set_header Connection \"upgrade\";\n. Fixed, thanks. @cnaslain try pushing a file inside nginx-proxy like I am suggesting in the above comment (use a volume that holds those v.host files)\nThis also let's you use an unmodified version of nginx-proxy. ",
    "esatemre": "@colthreepv @soar\nThanks, It's best solution i've ever seen.. ",
    "bs-matil": "Hi guys,\ndoes anyone have an idea how to solve running portainer on a new url like $host:$port/portainer\n```\nserver {\nclient_max_body_size 8m; \n   ignore_invalid_headers off;\nlocation /portainer/ {\n       rewrite ^/portainer(.*) /$1 break\n       proxy_pass http://docker-portainer;\n       proxy_http_version 1.1;\n       proxy_set_header Connection \"\";\n}\nlocation /portainer/api/websocket/ {\n         proxy_set_header Upgrade $http_upgrade;\n         proxy_set_header Connection \"upgrade\";\n         proxy_http_version 1.1;\n         proxy_pass http://docker-portainer/api/websocket/;\n  }\n}\n```\nWith this setup i'll only get the ui displayed but all resource calls end up in 404.\nAlso I had to add the url rewrite as before nothing worked. Any ideas? \nany suggestions? . ",
    "tobias-forkel": "Hi Guys\nI am using Portainer on a sub-domain on local ( OSX ) and production ( Ubuntu ) because this way I can add other options ( IP, Basic access authentication ) in future. I know it works with sub-folders as well, but I always find it a little bit more difficult. In case somebody is curious, here is my config.\n1. Docker on port 9000\nportainer/portainer .... 0.0.0.0:9000->9000/tcp\n2. /etc/nginx/nginx.conf\n```\nhttp {\n// your config here\n\ninclude /etc/nginx/sites-enabled/*.conf;\n\n}\n```\n3. /etc/nginx/sites-enabled/portainer.yourdomain.com.conf\n```\nupstream portainer_yourdomain_com {\n    server 127.0.0.1:9000;\n}\nserver {\nlisten 80;\nserver_name portainer.yourdomain.com;\n\nlocation / {\n\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection 'upgrade';\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto $scheme;\n    proxy_cache_bypass $http_upgrade;\n    proxy_cache_valid 200 302 1m;\n    proxy_pass $scheme://portainer_yourdomain_com;\n}\n\n}\n```\nAfter nginx -s reload you should see Portainer.\nNote: For the upstream I am using server 192.168.99.100:9000; on OSX and server 127.0.0.1:9000; on Ubuntu.. ",
    "ChexWarrior": "Just in case it helps anyone else: I was having trouble getting Portainer to run behind nginx and the reason was basic auth, after I removed it Portainer ran perfectly with the config given in the faq.. I just tried creating the Portainer volume outside of the shared directory and the service started with no issues, ~~so it looks like the permissions on the shared vagrant folder must have been causing the problem~~.  I'll close this now and report back anymore findings.. The issue is actually the Virtual Box synced (shared) folder mechanism, changing the shared folder to use NFS fixes the issue.. ",
    "cnaslain": "Hi all.\nI'm using the nginx-proxy that auto-generate nginx configuration according to environment variables + Let's Encrypt SSL + a htpasswd group for BASIC AUTH.\nI've got the same issue and read the new documentation about adding an additional location for /api/websocket (https://portainer.readthedocs.io/en/stable/faq.html#how-can-i-configure-my-reverse-proxy-to-serve-portainer).\nI've tried to modify the default nginx.tmpl file by adding an additional a custom boolean but without success.\nHere is what I've tried (and does NOT work):\n- docker-compose.yml\n    portainer:\n      image: portainer/portainer:latest\n      container_name: portainer\n      environment:\n        - ENABLE_PORTAINER=true                       <--- NEW CUSTOM PARAM\n        - VIRTUAL_HOST=portainer.test.com\n        - LETSENCRYPT_HOST=portainer.test.com\n        - LETSENCRYPT_EMAIL=test@gmail.com\n      volumes:\n        - /var/run/docker.sock:/var/run/docker.sock\n        - ./portainer/data:/data\n      command: --no-auth\n\nnginx.tmpl\nserver {\n...\n        {{ if $.Env.ENABLE_PORTAINER }}\n        location /api/websocket/ {\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection \"upgrade\";\n                proxy_http_version 1.1;\n                proxy_pass {{ trim $proto }}://{{ trim $upstream_name }}/api/websocket/;\n        }\n        {{ end }}\n...\n}\n\nAny idea ? I know this is more a nginx templating stuff but it would probably help having a working example of portainer with nginx-proxy ;-)\nRegards,\nChris. @colthreepv Thanks for your advice. I've tried with this code and this doesn't work. I am redirected to an auth page... wired cos I've used the --no-auth flag.\nBUT... I've also found that this is probably a browser-dependent issue.\n- This docker-compose settings does NOT work with Firefox 56.0 (64bits) under Windows 10 x64\n- ... but it DOES work (with or without this code) if using Chrome 61.0.3163.100 (Official build) (64 bits) under Windows 10 x64\nWired! Maybe I need to add an additional nginx settings into the vhost?. @deviantony You're right. It does work under Firefox 56.0x64 in a private tab; and once everything cleaned (cookes, cache, auth etc.) it does also work normally under Firefow 56.0x64 without the private tab. No idea what was wrong. Right now, everything works fine; and no need of the additional nginx stuffs( proxy_set_header...)\nThx!. @deviantony Good to know; Thx.. I also have an issue on the let's encrypt part (regeneration of deleted certificates failures); for my case the nginx-letsencrupt container didn't had access to let's encrypt servers!!! Remember that you really have to add a DNS setting entry in the docker-compose file  ;-)\nHope that tip will help.... +1 also for the /portainer heathcheck command (then no need to add curl or wget to the image).. ",
    "hank": "Somewhat unrelated, but if anyone is having trouble getting proxying Portainer through Caddy to work, here's what worked for me:\nhttps://portainer.domain.tld, http://portainer.domain.tld {\n    proxy / upstream:9000 {\n        transparent\n        header_upstream Upgrade \"upgrade\"\n        header_upstream X-Upstream upstream:9000\n    }\n    tls cert key\n}. You're right - can't get it to work with JWT. Please post back if you figure it out.. ",
    "HalianElf": "Is there a way to get the websocket working with HTTP/2 on nginx? My server is running HTTP/2 and from what I've read it binds to the port so even my attempt to do a subdomain instead of /portainer gets loaded as HTTP/2.. ",
    "UniverseXXX": "\nSomewhat unrelated, but if anyone is having trouble getting proxying Portainer through Caddy to work, here's what worked for me:\nhttps://portainer.domain.tld, http://portainer.domain.tld {\n    proxy / upstream:9000 {\n        transparent\n        header_upstream Upgrade \"upgrade\"\n        header_upstream X-Upstream upstream:9000\n    }\n    tls cert key\n}\n\n@hank Do you use jwt plugin (eg. for authorisation via Google) by any chance? As I can't get it working with it. Portainer throws \"cannot connect to endpoint and get server settings\".. ",
    "ckuethe": "@bs-matil and anyone else who cares about running portainer at https://www.example.com/portainer/ , this works for me\n\nubuntu 18.04\nnginx 1.14.0-0ubuntu1.2\ndocker.io 18.06.1-0ubuntu1.2~18.04.1 \nportainer 1.20.2\n\n```\n    location /portainer {\n        rewrite ^/portainer(/.*)$ /$1 break;\n        proxy_pass http://localhost:9000/;\n        proxy_http_version 1.1;\n        proxy_set_header Connection \"\";\n    }\nlocation /portainer/api {\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_pass http://localhost:9000/api;\n    proxy_set_header Connection 'upgrade';\n    proxy_http_version 1.1;\n}\n\n```. ",
    "discotroy": "I've had some real hassle with dnsrr recently, not to be overly-scientific about things.  So much hassle, in fact, that I've stopped using it.\nSorry I can't offer any more insight into the problem!\n. ",
    "zcalusic": "I'm sorry but this doesn't look like it's Windows specific at all. I have same problems on Linux when trying to add remote endpoints protected with TLS.\nFirst this:\n2017/05/21 14:22:25 http error: mkdir /data/tls/2: file exists (code=500)\n2017/05/21 14:22:25 http error: mkdir /data/tls/2: file exists (code=500)\nThen I tried to fool it by deleting tls folder, only to get this:\n2017/05/21 14:29:15 http error: mkdir /data/tls/4: no such file or directory (code=500)\n2017/05/21 14:29:15 http error: mkdir /data/tls/4: no such file or directory (code=500)\n2017/05/21 14:29:15 http error: mkdir /data/tls/4: no such file or directory (code=500)\nThen I deleted everything in data volume and restarted the container, to try from scratch, after entering all info again. now it blocks on clicking \"Connect\" button. Clicked a few more times, gave up, clicked on the local again, suddenly I'm in and have 4 endpoints (all those clicks that did nothing...), and actually I'm connected to remote endpoint?!\nSo, with a lot of clicking, restarts, deletia - it worked! But, it's a mess.... Oh, great news! Although I somehow managed to add 4 more endpoints in the meantime, no problem at all. :)\nThank you for this very neat utility @deviantony!. Is there any problem making those links relative? It would be the best fix.\n. It's absolutely a nice feature, don't get me wrong. But, I can imagine I would like to either:\n- have my private list only, with only the production approved images (because, I only use that)\n- if I give access to other people, they they're not click-happy, installing various images from unknown sources on an otherwise production setup, just because it's so easy?\n. Ah, I see... I didn't expect that my JSON file would replace the current one, I expected it would supplement it.\nI'll try it and let you know how it went.. Tested, working like a charm! Put a simple {} in a file, pointed to it, and voila... all app templates are gone. Thanks @ncresswell @deviantony for the hint.\nIf I might suggest that you add to documentation that user specified templates replace built-in ones, 'cause it's not obvious, at least it wasn't to me.. ",
    "GetchaDEAGLE": "I'm having this exact same issue using portainer/portainer:1.14.3 running on Ubuntu 16.04 LTS. I'm getting the below error:\nhttp error: mkdir /data/tls/14: file exists (code=500)\nWhen I look in /data/tls/14, I see only two files created: ca.pem and key.pem. If I manually add the third missing file and then reload the GUI, it works.. @deviantony, I will paste the logs when I get access to the server again and provide further details. Stay tuned.. @deviantony, I'm sorry to say that the server was redeployed and we lost the logs but the persistent data from the volume is still intact.\nAs mentioned in my previous comment, from within the UI, adding an endpoint and uploading the cert files is what causes the issue. The data is being persisted to a network share via NFS v4. I don't believe anything special has been done to the permissions on the files/folders for the volume.\nAfter the error occurs, adding the files manually to the volume solves the problem.\nIf I gather anything else that could be useful I'll let you know. Also, sorry for the delay as I just had a baby and was down for awhile.. I'm not having the issue anymore after performing the workaround. I'll report back if the problem happens again. Thanks for your help.. ",
    "r3pek": "Having the exact same issue as @GetchaDEAGLE . @deviantony sure.\nCentOS 7.4\n# docker --version\nDocker version 18.02.0-ce, build fc4de44\nRunning in swarm mode with 2 nodes.\nPortainer installed as a service with a custom made docker-compose.yml and /data of the container image pointing to an NFS share.. There you have it:\n\n\n. @deviantony btw, this is what's in the logs of the container:\n2018/03/12 23:07:40 http error: mkdir /data/tls/18: file exists (code=500)\n2018/03/12 23:07:40 http error: mkdir /data/tls/18: file exists (code=500)\nSeems like you're trying to create the directory 18/ again on file upload, erroring out if mkdir fails.. > Remember, if you are using NFS with Docker volumes, you MUST have \"root squash\u201d enabled on your NFS backend.\n\"MUST\" ? For services running as root on the container?. > Depends on your actual config tho (is the docker daemon running as root user?)\nYeah, dockerd is running as root.. @deviantony confirmed working. ",
    "nlubello": "+1. ",
    "kennyko": "It allows you to use a TLS connection without verifying the hostname in the process. A valid key and certificate is still required to connect to the server and the data is encrypted, but in the case of a non-static IP or a docker host behind load balancers, having the flag would be greatly appreciated.. ",
    "farodin91": "Is anyone working on this? I could finish this.. It would be cool to add command to check health of a agent and server, for example /portainer heathcheck. The idea comes from traefik: https://docs.traefik.io/basics/#command-healthcheck . I would like to work on this.. I tried to fix the codeclimate issues.. I reverted all unnecessary changes in the frontend.. I forgot to run gofmt.. Done. I added a bit more doc.. Any tipp to fix this without copy the complete GenericDatatableController? . ",
    "Bjornskjald": "Is there any progress on this?. I'll test it tomorrow and let you know. Oh, sorry, forgot about it. I'll check it now\n. Works! \ud83d\udc4d . I didn't mean an empty command, but an empty parameter in the command. For example, if a program adds a prefix to filename but allows you to change it, you could do --prefix \"\" so the prefix will be empty.. ",
    "chevellabv": "+1. ",
    "Pythic": "+1. ",
    "bsimpson53": "This would be really useful and achievable for swarm mode.\nI would go further and suggest that in swarm mode the task list would be more useful than the container list especially if you could jump from the task list to either the task view or the container view (only tasks running on the current endpoint could link to their container views in advance of #461).\nOn the command line I often docker node ps mynode through a manager node, it wasn't until I looked at https://github.com/docker/cli/blob/master/cli/command/node/ps.go that I realised that this is a list of tasks.\nIt would mean effectively that an aggregated view of containers running on the swarm could be available in advance of #461. Absolutely right @deviantony. \nIn reality portainer should probably do away with the container view entirely in swarm mode and provide a task list and access to the container functionality through the tasks instead (where possible, endpoint related).\nFrom the docker api documentation, tasks section:\n\nA task is a container running on a swarm. It is the atomic scheduling unit of swarm.\n\nRight now being able to see which tasks(containers) are running on which node is supported by the Docker HTTP API but not by Portainer.\nI'm thinking about a world pre and post #461. However, there's a strong argument (imho) for not implementing #461 now because it's not supported by the Docker HTTP API.\nIn a pre #461 world it seems consistent (with the evolution of docker), if confusing, to have a tasks view and a containers view. Although I think there should only be a tasks view that then provides you access to container functionality where possible.\nIn a post #461 world I believe it would be wrong to have a task view and an aggregated containers view as they contain the same information and one of them is definitely redundant in swarm mode.. (sorry for the slow reply, typed but not sent)\n@ncresswell, I certainly appreciate that.\n@deviantony, don't get me wrong I really like Portainer, it's saved me a lot of time. \nMy frustration comes from suddenly losing functionality because changes to the local network topology here prevent me from using worker TLS endpoints through portainer so I have to either:\n\ndrop back to the command line much more\ngenerate new certificates, manually, for each worker and import them into each tool that talks to the swarm\ndeploy portainer globally\n\n. ",
    "OmgImAlexis": "Regarding the PR above. There's still the issue of 0.0.0.0 being used when running the container on a remote host. For example I run portainer on my VPS and since the end point can't be edited I can't change the URLPublish param.. @rahulruikar if you're adding basic auth it'd be great to also be able to use a (read only) SSH key like how Github has deploy keys.. ",
    "zz0412": "it is a good idea. ",
    "mcicolella": "What about using Transifex to manage all translations and coordinate contributors, reviewers and so on?   . What about using Transifex to manage all translations and coordinate contributors, reviewers and so on?   . You could use different approach for this:\n- creating a different Transifex resource for every section to work with if you don't want to include all the strings inside a single file\n- having a single Transifex resource and update it step by step with new available texts. When you upload a new version of the source file all the translations are updated consequently.. You could use different approach for this:\n- creating a different Transifex resource for every section to work with if you don't want to include all the strings inside a single file\n- having a single Transifex resource and update it step by step with new available texts. When you upload a new version of the source file all the translations are updated consequently.. ",
    "ptsa": "https://weblate.org/\nLet everyone translate together. ",
    "harryparmar": "@deviantony is that default yes or no?. ",
    "jamiejackson": "Mine reads: \"Automatically remove non-persistent volumes,\" and the subject of this issue also references \"non-persistent volumes.\" I've never heard this terminology; I don't believe it's canonical?\nI would have understood \"remove anonymous volumes,\" however, since \"anonymous volume\" is a canonical docker term: https://docs.docker.com/storage/#more-details-about-mount-types. ",
    "GP8x": "There was already a feature request issue out for static IPs. I'm new to GitHub, is this what you mean?\nResolves #473 . Changed those placeholders. Dropping the (Optional) has raised a wider issue though throughout the codebase surrounding distinguishing between \"Mandatory\" and \"Optional\" fields. I have raised #823 to look into this ;). ",
    "JF1297": "Thanks @deviantony  and @WTFKr0  for this discussion and your time!\nUsing the suggested easy workaround, I was able to make my custom json templates and keep the containers running.\nI guess this feature request is not needed since there's a workaround to solve the problem.\nFrom a beginner viewpoint: if the feature request is easy to implement, the \"pros\" of implementing the feature request would be 1) a more elegant solution for json app templates (i.e. interactive: true), and 2) it would somewhat mirror the advanced container settings currently in the portainer UI - see image below where you can check the ( -i -t) flags when creating a new container.  The \"cons\" might outweigh the \"pros\" though; such as not being easy to implement - or going against the intended purpose of the json app templates.\nMy intended use case:  To have a custom app template of docker images I build, that I can share with a data science team (where they could reference the same custom json file inside their portainer UI).\nThanks again,\nJames\n\n. ",
    "Gaibhne": "Apologies. I can indeed access it in a different browser. Still unable to open it in Firefox, new tab or no. Private browsing tab works, but isn't exactly a long term solution.. That did it, I can log into (or rather, skip the login, as intended) Portainer now. Do you want me to close this issue ? I feel that while cleaning the cache fixes the issue, that is not exactly 'working as intended'.\nA suggestion if you are attempting to reproduce the issue: I suspect that what happened was that I raised a Portainer issue with auth enabled, went there in Firefox (possibly making an account at this point), realized I didn't want to log in every time, and then recreated the docker container with --no-auth, but at the same 'address', so Firefox wouldn't have realized that it was a 'different Portainer' answering the next time.. ",
    "fredrikhl": "For anyone looking this up, you'll have to clear out the local storage of the web application.  (portainer.APPLICATION_STATE). I'm guessing this is something that is provided by the angular-local-storage module.. ",
    "jvenezia": "Had this problem and spent time understanding what was happening.\nTo reproduce, launch a portainer without --no-auth. then open it in a browser.\nThen restart portainer with --no-auth, the admin creation form shows instead of skipping the auth.\nClearing local storage fixes the issue but really not convenient.. ",
    "hactar": "What about people using a reverse proxy with https? That default doesn't make sense there.... This is an important feature, and I really don't think that \"public\" is a good default setting, if no ownership is set, portainer should choose the most restrictive setting it can, which would be administrator.\nI have a host with around 40 hosts and images, a few networks, etc, all created outside of portainer. I now have 1 container which I would like to give 1 external user access to restart, read the logs, etc. Going through my existing containers/networks etc and ensuring all of them are administrator would be hell, and if I create a container externally at a later date and forget about this, my external user suddenly has access to it too.... Sure, here you go. Also I've noticed that some containers can be edited, and some can't. This it the text of one of the containers that can't be edited by portainer.\n{\n    \"AppArmorProfile\": \"docker-default\",\n    \"Args\": [\n        \"/bin/s6-svscan\",\n        \"/app/gogs/docker/s6/\"\n    ],\n    \"Config\": {\n        \"ArgsEscaped\": true,\n        \"AttachStderr\": false,\n        \"AttachStdin\": false,\n        \"AttachStdout\": false,\n        \"Cmd\": [\n            \"/bin/s6-svscan\",\n            \"/app/gogs/docker/s6/\"\n        ],\n        \"Domainname\": \"\",\n        \"Entrypoint\": [\n            \"/app/gogs/docker/start.sh\"\n        ],\n        \"Env\": [\n            \"VIRTUAL_HOST=REDACTED\",\n            \"VIRTUAL_PORT=3000\",\n            \"LETSENCRYPT_HOST=REDACTED\",\n            \"LETSENCRYPT_EMAIL=REDACTED\",\n            \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n            \"GOGS_CUSTOM=/data/gogs\"\n        ],\n        \"ExposedPorts\": {\n            \"22/tcp\": {},\n            \"3000/tcp\": {}\n        },\n        \"Hostname\": \"7801b2fa7c18\",\n        \"Image\": \"gogs/gogs:latest\",\n        \"Labels\": {},\n        \"MacAddress\": \"02:42:ac:11:00:14\",\n        \"OnBuild\": null,\n        \"OpenStdin\": false,\n        \"StdinOnce\": false,\n        \"Tty\": false,\n        \"User\": \"\",\n        \"Volumes\": {\n            \"/data\": {}\n        },\n        \"WorkingDir\": \"/app/gogs/build\"\n    },\n    \"Created\": \"2018-04-25T23:01:53.215892135Z\",\n    \"Driver\": \"aufs\",\n    \"ExecIDs\": null,\n    \"GraphDriver\": {\n        \"Data\": null,\n        \"Name\": \"aufs\"\n    },\n    \"HostConfig\": {\n        \"AutoRemove\": false,\n        \"Binds\": [\n            \"/root/docker/REDACTED:/data\"\n        ],\n        \"BlkioDeviceReadBps\": null,\n        \"BlkioDeviceReadIOps\": null,\n        \"BlkioDeviceWriteBps\": null,\n        \"BlkioDeviceWriteIOps\": null,\n        \"BlkioWeight\": 0,\n        \"BlkioWeightDevice\": null,\n        \"CapAdd\": null,\n        \"CapDrop\": null,\n        \"Cgroup\": \"\",\n        \"CgroupParent\": \"\",\n        \"ConsoleSize\": [\n            0,\n            0\n        ],\n        \"ContainerIDFile\": \"\",\n        \"CpuCount\": 0,\n        \"CpuPercent\": 0,\n        \"CpuPeriod\": 0,\n        \"CpuQuota\": 0,\n        \"CpuRealtimePeriod\": 0,\n        \"CpuRealtimeRuntime\": 0,\n        \"CpuShares\": 0,\n        \"CpusetCpus\": \"\",\n        \"CpusetMems\": \"\",\n        \"DeviceCgroupRules\": null,\n        \"Devices\": [],\n        \"DiskQuota\": 0,\n        \"Dns\": [],\n        \"DnsOptions\": [],\n        \"DnsSearch\": [],\n        \"ExtraHosts\": null,\n        \"GroupAdd\": null,\n        \"IOMaximumBandwidth\": 0,\n        \"IOMaximumIOps\": 0,\n        \"IpcMode\": \"shareable\",\n        \"Isolation\": \"\",\n        \"KernelMemory\": 0,\n        \"Links\": null,\n        \"LogConfig\": {\n            \"Config\": {},\n            \"Type\": \"json-file\"\n        },\n        \"Memory\": 0,\n        \"MemoryReservation\": 0,\n        \"MemorySwap\": 0,\n        \"MemorySwappiness\": null,\n        \"NanoCpus\": 0,\n        \"NetworkMode\": \"bridge\",\n        \"OomKillDisable\": false,\n        \"OomScoreAdj\": 0,\n        \"PidMode\": \"\",\n        \"PidsLimit\": 0,\n        \"PortBindings\": {\n            \"22/tcp\": [\n                {\n                    \"HostIp\": \"\",\n                    \"HostPort\": \"10222\"\n                }\n            ],\n            \"3000/tcp\": [\n                {\n                    \"HostIp\": \"\",\n                    \"HostPort\": \"3000\"\n                }\n            ]\n        },\n        \"Privileged\": false,\n        \"PublishAllPorts\": false,\n        \"ReadonlyRootfs\": false,\n        \"RestartPolicy\": {\n            \"MaximumRetryCount\": 0,\n            \"Name\": \"unless-stopped\"\n        },\n        \"Runtime\": \"runc\",\n        \"SecurityOpt\": null,\n        \"ShmSize\": 67108864,\n        \"UTSMode\": \"\",\n        \"Ulimits\": null,\n        \"UsernsMode\": \"\",\n        \"VolumeDriver\": \"\",\n        \"VolumesFrom\": null\n    },\n    \"HostnamePath\": \"/var/lib/docker/containers/bb5154ab8f34df4d4eec9a2e60ae8ca8c6d4d7f6d87b6210e2c1188d685bbb11/hostname\",\n    \"HostsPath\": \"/var/lib/docker/containers/bb5154ab8f34df4d4eec9a2e60ae8ca8c6d4d7f6d87b6210e2c1188d685bbb11/hosts\",\n    \"Id\": \"bb5154ab8f34df4d4eec9a2e60ae8ca8c6d4d7f6d87b6210e2c1188d685bbb11\",\n    \"Image\": \"sha256:d54eed6b7d2a74cfee0e7daca249008d739f6ab522a0fae1e73c2207003cda51\",\n    \"LogPath\": \"/var/lib/docker/containers/bb5154ab8f34df4d4eec9a2e60ae8ca8c6d4d7f6d87b6210e2c1188d685bbb11/bb5154ab8f34df4d4eec9a2e60ae8ca8c6d4d7f6d87b6210e2c1188d685bbb11-json.log\",\n    \"MountLabel\": \"\",\n    \"Mounts\": [\n        {\n            \"Destination\": \"/data\",\n            \"Mode\": \"\",\n            \"Propagation\": \"rprivate\",\n            \"RW\": true,\n            \"Source\": \"/root/docker/REDACTED\",\n            \"Type\": \"bind\"\n        }\n    ],\n    \"Name\": \"/gogs\",\n    \"NetworkSettings\": {\n        \"Bridge\": \"\",\n        \"EndpointID\": \"\",\n        \"Gateway\": \"\",\n        \"GlobalIPv6Address\": \"\",\n        \"GlobalIPv6PrefixLen\": 0,\n        \"HairpinMode\": false,\n        \"IPAddress\": \"\",\n        \"IPPrefixLen\": 0,\n        \"IPv6Gateway\": \"\",\n        \"LinkLocalIPv6Address\": \"\",\n        \"LinkLocalIPv6PrefixLen\": 0,\n        \"MacAddress\": \"\",\n        \"Networks\": {\n            \"webproxy\": {\n                \"Aliases\": [\n                    \"2f897a03d951\",\n                    \"5c1e7082f468\",\n                    \"cc124199cbf5\",\n                    \"584bde33b2ac\",\n                    \"eb90362d0f6b\",\n                    \"0d4425017650\",\n                    \"64decc832411\",\n                    \"1e0c83154e66\",\n                    \"3a04631b3d95\",\n                    \"4c2e226282a4\",\n                    \"bb5154ab8f34\"\n                ],\n                \"DriverOpts\": null,\n                \"EndpointID\": \"92ce22fa65b8559a38031e9324b36d0efdd71e6e3328356b49334432c48f51e1\",\n                \"Gateway\": \"172.21.0.1\",\n                \"GlobalIPv6Address\": \"\",\n                \"GlobalIPv6PrefixLen\": 0,\n                \"IPAMConfig\": {},\n                \"IPAddress\": \"172.21.0.9\",\n                \"IPPrefixLen\": 16,\n                \"IPv6Gateway\": \"\",\n                \"Links\": null,\n                \"MacAddress\": \"02:42:ac:15:00:09\",\n                \"NetworkID\": \"bce25b85463d4d966f1940c2247c0787118eb0751b7e7f1bb3736201cd2916a8\"\n            }\n        },\n        \"Ports\": {\n            \"22/tcp\": [\n                {\n                    \"HostIp\": \"0.0.0.0\",\n                    \"HostPort\": \"10222\"\n                }\n            ],\n            \"3000/tcp\": [\n                {\n                    \"HostIp\": \"0.0.0.0\",\n                    \"HostPort\": \"3000\"\n                }\n            ]\n        },\n        \"SandboxID\": \"79d65d8388b6e480ccc96bc247b74a1961a9990f2df097ff54138f30c8a9e3bd\",\n        \"SandboxKey\": \"/var/run/docker/netns/79d65d8388b6\",\n        \"SecondaryIPAddresses\": null,\n        \"SecondaryIPv6Addresses\": null\n    },\n    \"Path\": \"/app/gogs/docker/start.sh\",\n    \"Platform\": \"linux\",\n    \"ProcessLabel\": \"\",\n    \"ResolvConfPath\": \"/var/lib/docker/containers/bb5154ab8f34df4d4eec9a2e60ae8ca8c6d4d7f6d87b6210e2c1188d685bbb11/resolv.conf\",\n    \"RestartCount\": 0,\n    \"State\": {\n        \"Dead\": false,\n        \"Error\": \"\",\n        \"ExitCode\": 0,\n        \"FinishedAt\": \"2018-04-26T02:02:20.218970484+02:00\",\n        \"OOMKilled\": false,\n        \"Paused\": false,\n        \"Pid\": 9452,\n        \"Restarting\": false,\n        \"Running\": true,\n        \"StartedAt\": \"2018-04-26T00:04:02.056660183Z\",\n        \"Status\": \"running\"\n    }\n}\n. I don't have any, I don't know how and why some containers get into this state, and how some are fine. I see no pattern, I'm guessing there must be something unusual in the container's config that portainer can't handle, but I see nothing wrong with the mac address and bridge mode of these containers, and they are online and reachable. If there's anything you would like me to try on the server then I can be your hands and eyes.... Yes you are right, there is a JS error when clicking the duplicate/edit button. I've added it though its minified. \n[Error] Error: undefined is not an object (evaluating 'a.NetworkSettings.Networks[b.config.HostConfig.NetworkMode].MacAddress')\nK@https://REDACTED/js/app.bb4cea25.js:46:20661\nhttps://REDACTED/js/app.bb4cea25.js:46:22528\ni@https://REDACTED/js/app.bb4cea25.js:3:25564\nhttps://REDACTED/js/app.bb4cea25.js:3:25736\n$digest@https://REDACTED/js/app.bb4cea25.js:3:31696\n$apply@https://REDACTED/js/app.bb4cea25.js:4:1512\ni@https://REDACTED/js/app.bb4cea25.js:3:7929\nv@https://REDACTED/js/app.bb4cea25.js:3:9852\nonload@https://REDACTED/js/app.bb4cea25.js:3:10325\n    (anonymous function) (app.bb4cea25.js:3:3944)\n    i (app.bb4cea25.js:3:25648)\n    (anonymous function) (app.bb4cea25.js:3:25737)\n    $digest (app.bb4cea25.js:3:31697)\n    $apply (app.bb4cea25.js:4:1513)\n    i (app.bb4cea25.js:3:7930)\n    v (app.bb4cea25.js:3:9853)\n    onload (app.bb4cea25.js:3:10326)\nI've pushed the image to hactar/qrportainerbug:latest\nThe run command for the original container (based on a local image named qr, but this problem also applies to public images such as gogs):\ndocker run --name=qr --hostname=3f6acf1db36d --env=\"VIRTUAL_HOST=REDACTED\" --env=\"LETSENCRYPT_HOST=REDACTED\" --env=\"LETSENCRYPT_EMAIL=REDACTED\" --env=\"PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\" --env=\"LANG=C.UTF-8\" --env=\"PYTHON_VERSION=2.7.13\" --env=\"PYTHON_PIP_VERSION=9.0.1\" --expose=8080 --restart=unless-stopped --detach=true qr python ./server.py\nI can also install and run a non minified version of portainer if you have a docker image for that and it would help you.. ",
    "Daniel-ltw": "Also just notice these additional things which are missing. \n--health-cmd          Command to run to check health\n--health-interval     Time between running the check (ns|us|ms|s|m|h)\n--health-retries      Consecutive failures needed to report unhealthy\n--health-timeout      Maximum time to allow one check to run (ns|us|ms|s|m|h). I guess there is no issue to you when I have to fill in 300000000000 to get a 5 mins delay? . As suggested by @deviantony open a new ticket. \nhttps://github.com/portainer/portainer/issues/825. ",
    "ecentinela": "Hi @deviantony,\nI was talking about env. entries without a value.\nIn my case, I have an env variable without a value in some containers and with value in some others (same stack).\nThis variable is required regardless the value for starting supervisor (http://supervisord.org/configuration.html#environment-variables). It's used inside the configuration and if it's not defined, supervisor cannot start. If it's defined, but without a value, it is ok.\nHope it helps.. ",
    "kanbekotori": "@deviantony No, my SELinux is disabled.\nSELinux status:                 disabled. @deviantony Yes, i have tried, same problem.. @deviantony Sorry, i am not sure what you mean.\n```\ndockerd\nError starting daemon: pid file found, ensure docker is not running or delete /var/run/docker.pid\n``\n. @ncresswell Where is thedaemon.conf` file?\nI use this install my docker.\n```\nsudo yum install -y yum-utils\nsudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\nsudo yum makecache fast\nsudo yum -y install docker-ce\nsudo systemctl start docker\n. @deviantony \n![image](https://cloud.githubusercontent.com/assets/6301140/25555340/5fe394b0-2d16-11e7-9fb4-b3f2ae5377f4.png)\n.\n[root@ip-172-31-9-237 centos]# systemctl status docker -l\n\u25cf docker.service - Docker Application Container Engine\n   Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)\n   Active: active (running) since \u516d 2017-04-29 06:05:15 UTC; 5h 56min ago\n     Docs: https://docs.docker.com\n Main PID: 9648 (dockerd)\n   Memory: 31.3M\n   CGroup: /system.slice/docker.service\n           \u251c\u2500 9648 /usr/bin/dockerd\n           \u251c\u2500 9652 docker-containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --metrics-interval=0 --start-timeout 2m --state-dir /var/run/docker/libcontainerd/containerd --shim docker-containerd-shim --runtime docker-runc\n           \u251c\u250010427 /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 9000 -container-ip 172.17.0.2 -container-port 9000\n           \u2514\u250010431 docker-containerd-shim 8993c5c54b062e6b01372ca718226f78f019b6ab228f307ae2fafd73ca9d550a /var/run/docker/libcontainerd/8993c5c54b062e6b01372ca718226f78f019b6ab228f307ae2fafd73ca9d550a docker-runc\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:05:15.816609459Z\" level=info msg=\"Graph migration to content-addressability took 0.00 seconds\"\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:05:15.817019274Z\" level=info msg=\"Loading containers: start.\"\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:05:15.823053713Z\" level=info msg=\"Firewalld running: false\"\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:05:15.902107598Z\" level=info msg=\"Default bridge (docker0) is assigned with an IP address 172.17.0.0/16. Daemon option --bip can be used to set a preferred IP address\"\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:05:15.926776485Z\" level=info msg=\"Loading containers: done.\"\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:05:15.931504044Z\" level=info msg=\"Daemon has completed initialization\"\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:05:15.931534963Z\" level=info msg=\"Docker daemon\" commit=c6d412e graphdriver=overlay version=17.03.1-ce\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:05:15.946500658Z\" level=info msg=\"API listen on /var/run/docker.sock\"\n4\u6708 29 06:05:15 ip-172-31-9-237.us-west-2.compute.internal systemd[1]: Started Docker Application Container Engine.\n4\u6708 29 06:10:50 ip-172-31-9-237.us-west-2.compute.internal dockerd[9648]: time=\"2017-04-29T06:10:50.085533690Z\" level=error msg=\"Handler for POST /v1.27/containers/create returned error: No such image: portainer/portainer:latest\"\n```\n[root@ip-172-31-9-237 centos]# docker logs portainer\n2017/04/29 09:40:20 Starting Portainer on :9000\n2017/04/29 09:40:45 http error: User not found (code=404)\n2017/04/29 09:40:46 http error: User not found (code=404). [root@ip-172-31-9-237 centos]# ps -ef | grep portainer\nroot     10443 10431  0 09:40 ?        00:00:00 /portainer\nroot     10787 10713  0 12:11 pts/0    00:00:00 grep --color=auto portainer. /usr/lib/systemd/system/docker.service\n```\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network.target firewalld.service\n[Service]\nType=notify\nthe default is not to use systemd for cgroups because the delegate issues still\nexists and systemd currently does not support the cgroup feature set required\nfor containers run by docker\nExecStart=/usr/bin/dockerd\nExecReload=/bin/kill -s HUP $MAINPID\nHaving non-zero Limit*s causes performance problems due to accounting overhead\nin the kernel. We recommend using cgroups to do container-local accounting.\nLimitNOFILE=infinity\nLimitNPROC=infinity\nLimitCORE=infinity\nUncomment TasksMax if your systemd version supports it.\nOnly systemd 226 and above support this version.\nTasksMax=infinity\nTimeoutStartSec=0\nset delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\nkill only the docker process, not all processes in the cgroup\nKillMode=process\n[Install]\nWantedBy=multi-user.target\n```\nThese files not exists.\n/etc/sysconfig/docker\n/usr/lib/systemd/system/docker.service.d/docker.conf. @deviantony Thanks, it worked!. ",
    "spyro2000": "Got the same problem.\n Docker version 1.12.6, build 78d1802\n Portainer version from 2017-07-31\n Command: docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n OS: CentOS Linux release 7.2.1511 (Core)\nError:  Unable to connect to the Docker endpoint. Thanks deviantony, \nWorks like a charm! :) . ",
    "zarmhast": "@deviantony yes, sorry, forgot to mention that I am running it with --no-auth flag. \ndocker run -v ...docker.socket -p 9000 portainer --no-auth\nSo running latest with no other configuration changes.. Just a random idea: would it make sense to add the selected end-point to the url and take it into account when routing?. Just passing by, sorry, no time to set up a dev environment. The following patch should resolve this bug:\n```\ndiff --git a/app/components/container/containerController.js b/app/components/container/containerController.js\nindex d739a6c..95a9063 100644\n--- a/app/components/container/containerController.js\n+++ b/app/components/container/containerController.js\n@@ -166,12 +166,12 @@ function ($scope, $state, $stateParams, $filter, Container, ContainerCommit, Con\n$scope.renameContainer = function () {\n     Container.rename({id: $stateParams.id, 'name': $scope.container.newContainerName}, function (d) {\n-      if (container.message) {\n+      if (d.message) {\n         $scope.container.newContainerName = $scope.container.Name;\n-        Notifications.error('Unable to rename container', {}, container.message);\n+        Notifications.error('Unable to rename container', {}, d.message);\n       } else {\n         $scope.container.Name = $scope.container.newContainerName;\n-        Notifications.success('Container successfully renamed', container.name);\n+        Notifications.success('Container successfully renamed', $scope.container.Name);\n       }\n     }, function (e) {\n       Notifications.error('Failure', e, 'Unable to rename container');\n@@ -182,7 +182,7 @@ function ($scope, $state, $stateParams, $filter, Container, ContainerCommit, Con\n   $scope.containerLeaveNetwork = function containerLeaveNetwork(container, networkId) {\n     $('#loadingViewSpinner').show();\n     Network.disconnect({id: networkId}, { Container: $stateParams.id, Force: false }, function (d) {\n-      if (container.message) {\n+      if (d.message) {\n         $('#loadingViewSpinner').hide();\n         Notifications.error('Error', d, 'Unable to disconnect container from network');\n       } else {\n```. ",
    "xgid": "Similar problem here with latest Docker image (downloaded today) but using authentication, so the login page appears in the new tab instead of the \"Unable to retrieve container info\". \nContainer created with:\nbash\ndocker run -d --name portainer -v ~/.docker:/certs -v ~/docker_data/portainer:/data -p 9000:9000 portainer/portainer -H tcp://172.16.0.26:2376 --tlsverify\nThe problem in my case is related with #724 because after login you are always redirected to the dashboard, not the page you were trying to open. But it seems to me that a new login should not be requiered in the first place when I'm already logged in.. ",
    "ncouse": "It looks like the problem is due to the an endpoint not being selected when you use a bookmarked URL. I have to manually select to local endpoint (the only one I have) before I can use the URL directly.\nThis is annoying as it would be really useful to copy URLs and give them to your colleagues to demonstrate any issues.. ",
    "marcelo-ochoa": "Neil:\n  Thanks a lot for your quick reply!!\n  Actually I can manage authentication based on IP address from the Portainer instance.\n  But what happen with the V1/V2 support in URLs.\n  Best regards, Marcelo.. Just to confirm now latest version 1.14.0 is possible to pull from private registry using username/password.\nThanks a lot. Marcelo.. Hi:\n  Memory consumption seem to be OK with 1.20.2, but shared cache size value still increasing after every transfer.\n  See graph:\n\n  best regards, Marcelo.. You are right, after executing echo 1 > /proc/sys/vm/drop_caches at the server level (container level is read-only) FS buffer cache drop to 0.\n.\nThanks a lot Marcelo\nPD: If FS buffer cache is a global host level value, make it sense to show at container level graph?. ",
    "Thijzer": "Sorry @deviantony for my slow response,  I'll take a look at it tonight. The --always-restart policy is probably not fine grained enough for me. I would like that have more fine control inside portainer where I manage everything.. The always-restart policy seems to do the trick on the container. And indeed no need for separate version of this when it's integrated inside docker. Still it would be nice to have those policies integrated into portainer so you could set these policies on-failure, unless-stopped, always-restart in the admin. . ",
    "micw": "Hello,\nI found this issue when searching for a solution for the following problem:\nI run a dockerized printer server (cups) on my homeserver along with portainer. I use restart-policy=always to have this container running. The problem is that if the usb printer is offline when the system reboots, the container fails to start due to missing device.\nThis is not covered by docker's restart policy because the policy assumes that the container was successfully launched. It should by covered by the management tool (portainer in this case).\nOther management tools like kubernetes and cattle actually try to re-init containers that fail to start.\n. Thank you for the feedback. In the case I describe, the container is never started. So a healthcheck would never be executed.. ",
    "ishantanu": "@deviantony Hey, I am a beginner with Portainer codebase, can I accomplish this task?. ",
    "MattPark": "Correct.  Works for me and seems to be the \"right\" way for SELinux.\nAnd if we can file a feature request to get that added to the volume mapper in the webUI next to rw/ro, we'd be all set.. ok will do\nOn Fri, May 12, 2017 at 4:02 AM, Anthony Lapenna notifications@github.com\nwrote:\n\n@MattPark https://github.com/mattpark Ok, I'll update the\ndocumentation. Mind creating a separate issue for the support of the z\nflag in the container-creation view?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/849#issuecomment-301011197,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABnMODBjYpMeliGgv20QH-ZENZveA8R-ks5r5BItgaJpZM4NXAS3\n.\n. #853 added. What platform did user report?  What user is the user running docker as?\nWhat were the permissions and modes of the files involved?  Did the selinux\nlog report an error?\n\nObviously z isn't magic, the file permissions still have to be correct.\n --privileged is magic, because it elevates the container past user\npermissions and defeats the security policy.\nI'm happy to take a look\nOn May 16, 2017 5:31 AM, \"Anthony Lapenna\" notifications@github.com wrote:\n\nOne user reported that only specifying -v /var/run/docker.sock:/var/run/\ndocker.sock:z is not enough to run Portainer under SELinux.\nHe used the following conf:\n$ ExecStart=/usr/bin/dockerd --selinux-enabled --tls --tlscert=/path/to/cert.pem --tlskey=/path/to/key.pem -H host.domain:2379 -H unix:///var/run/docker.sock\nAnd had to start Portainer like this:\n$ sudo docker run -d -p 9000:9000\\\n --privileged\n -v \"/var/run/docker.sock:/var/run/docker.sock\"\\\n -v \"/opt/portainerdata:/data\"\\\n portainer/portainer\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/849#issuecomment-301727650,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABnMOLJk6HoiosMr8OoLQbG6iMYerBmNks5r6Wz4gaJpZM4NXAS3\n.\n. Hey @Thijxx, can you do a sealert -a /var/log/audit/audit.log you may have\nto install it with yum install setroubleshoot setools.\n. @Thijxx Looks like a lot of stuff sort of borked here, due to selinux.  sealert is your friend.  It tells you what selinux has interfered with, and how to fix it.\n\nGo through the list, starting with your ssh service.  Do the first suggestion only... the others are only in case the first doesn't work.\nFor example:\n```\nSELinux is preventing /usr/sbin/sshd from name_bind access on the tcp_socket port 1707.\n*  Plugin bind_ports (92.2 confidence) suggests   ****\nIf you want to allow /usr/sbin/sshd to bind to network port 1707\nThen you need to modify the port type.\nDo\nsemanage port -a -t PORT_TYPE -p tcp 1707\nwhere PORT_TYPE is one of the following: ssh_port_t, vnc_port_t, xserver_port_t.\n\n```\nYou just literally run the command it gives you.\nNote: Anything related to labels / permissions for your docker containers will by resolved by adding :z to the mount point so skip the suggestions for those.\nGo through this process a few times until you get through all the errors and your box works.. ",
    "Riccardo1976": "For anyone looking for a solution to this running newer versions of portainer.\nI just spend a great deal of time running into this issue with version 1.16.4. After reproducing the same error on a different system i rolled back to 1.16.3 which seems to resolve the issue.. @deviantony  , \"/var/run/docker.sock\" \nPortainer 1.16.4 was unable to connect to /var/run/docker.sock even with -v /var/run/docker.sock:/var/run/docker.sock:z \nRolling back to 1.16.3 resolved the issue.\nThis all is running on\nRH7.4\nDocker\nServer:\n Version:         1.12.6\n API version:     1.24\n Package version: docker-1.12.6-61.git85d7426.el7.x86_64\n. ",
    "wilfredmifsud42": "Thanks for your reply. Is there some kind of workaround however?. Any ETA on the new feature?. Thanks for all your comments. Awaiting the new release then :). Off Topic, but I need your help guys, By any chance.\nIf I have 2 nodes, with 2 separate dockers (master & worker).\nFrom the master entertainer I am only able to see the containers within the local docker. Is there a way how I can see the workers' containers ? When I Deploy a service, its being balanced between master & worker so in thoery they are connected already.\nPlease point me in the right direction. (I was fiddling around with Docker Endpoints port 2375).. Thanks then :) Good Day. ",
    "cemdev": "Any update on this?. Any update on this?. ah, okay, we're on 14.0 - that explains it. many thanks.. ah, okay, we're on 14.0 - that explains it. many thanks.. ",
    "djmaze": "Oh well, I realize the \"Args\" are not even shown for me. The field is always empty... I just tested this with a local swarm as well. The whole \"Container spec\" section is always empty for all services. \nLooks like a bug to me.. ",
    "kauden": "Hi,\nCan you also add the options (consistent, cached, and delegated) on the volumes ?\ndocumentation: https://docs.docker.com/docker-for-mac/osxfs-caching/\nsample:\ndocker run -it --rm -p 8081:8000 -v /etc:/tmp:rw,delegated,z jwilder/whoami\nThanks. ",
    "Trudels": "did you manage to add a possibility to add the :z flag to a mounted bind?\nGreetings. @deviantony i would love to, but i'm really struggling to understand your codebase. Is there anything like a Code Documentation?\nGreets. @G07cha the :z flag enables to inherit permissions including selinux labels (most common problem occurance in combination with the z flag)\ni think the answer to this post (https://stackoverflow.com/questions/34031397/running-docker-on-ubuntu-mounted-host-volume-is-not-writable-from-container) is a good explanation of the z flag, maybe the description of the switch should be more generic?\n& is there any need of adding the :Z flag too?. @deviantony actually you can create volumes with ro + z. alright let me know if you know how i should implement it, or are you taking over? i don't mind..\nGreetings. alright i'll think about something...\nGreets. ",
    "fourbytes": "Been wanting this for a while, just testing the docker image for the pr, recreating container appears to work as it should but using Duplicate/Edit container to then overwrite the existing container deletes the container and doesn't recreate it, leaving this error:\n:9000/api/endpoints/1/docker/containers/d3860ff4e2c61036bd90693334f99a15385001a8d85914396a59149704b17d29/json Failed to load resource: the server responded with a status of 404 (Not Found)\napp.70299ccd.js:3 TypeError: Cannot read property 'split' of null\n    at b (app.70299ccd.js:25)\n    at Object.a.commandStringToArray (app.70299ccd.js:32)\n    at B (app.70299ccd.js:29)\n    at app.70299ccd.js:29\n    at app.70299ccd.js:3\n    at o.$eval (app.70299ccd.js:3)\n    at o.$digest (app.70299ccd.js:3)\n    at o.$apply (app.70299ccd.js:3)\n    at i (app.70299ccd.js:2)\n    at u (app.70299ccd.js:2)\n(anonymous) @ app.70299ccd.js:3. Created the container via the web interface with default settings with image \"plexinc/pms-docker:latest\", I've attached the unminified error.\napp.e79e6a38.js:14199 TypeError: Cannot read property 'split' of null\n    at splitargs (app.e79e6a38.js:93583)\n    at Object.ContainerHelperFactory.helper.commandStringToArray (app.e79e6a38.js:106224)\n    at prepareConfiguration (app.e79e6a38.js:100919)\n    at success (app.e79e6a38.js:101210)\n    at processQueue (app.e79e6a38.js:16696)\n    at app.e79e6a38.js:16712\n    at Scope.$eval (app.e79e6a38.js:17994)\n    at Scope.$digest (app.e79e6a38.js:17808)\n    at Scope.$apply (app.e79e6a38.js:18102)\n    at done (app.e79e6a38.js:12082)\n(anonymous) @ app.e79e6a38.js:14199\n(anonymous) @ app.e79e6a38.js:10707\nprocessQueue @ app.e79e6a38.js:16704\n(anonymous) @ app.e79e6a38.js:16712\n$eval @ app.e79e6a38.js:17994\n$digest @ app.e79e6a38.js:17808\n$apply @ app.e79e6a38.js:18102\ndone @ app.e79e6a38.js:12082\ncompleteRequest @ app.e79e6a38.js:12291\nrequestLoaded @ app.e79e6a38.js:12219\nXMLHttpRequest.send (async)\nXMLHttpRequest.send @ catcher.js:197\n(anonymous) @ app.e79e6a38.js:12265\nsendReq @ app.e79e6a38.js:12027\nserverRequest @ app.e79e6a38.js:11822\nprocessQueue @ app.e79e6a38.js:16696\n(anonymous) @ app.e79e6a38.js:16712\n$eval @ app.e79e6a38.js:17994\n$digest @ app.e79e6a38.js:17808\n(anonymous) @ app.e79e6a38.js:18033\ncompleteOutstandingRequest @ app.e79e6a38.js:6045\n(anonymous) @ app.e79e6a38.js:6324\nsetTimeout (async)\nBrowser.self.defer @ app.e79e6a38.js:6322\n$evalAsync @ app.e79e6a38.js:18031\n(anonymous) @ app.e79e6a38.js:16603\nscheduleProcessQueue @ app.e79e6a38.js:16712\nthen @ app.e79e6a38.js:16660\nchainInterceptors @ app.e79e6a38.js:11754\n$http @ app.e79e6a38.js:11719\nResource.(anonymous function) @ app.e79e6a38.js:43744\nContainerServiceFactory.service.remove @ app.e79e6a38.js:108680\nonConfirm @ app.e79e6a38.js:100950\noptions.buttons.confirm.callback @ app.e79e6a38.js:68846\nprocessCallback @ app.e79e6a38.js:68623\n(anonymous) @ app.e79e6a38.js:69229\ndispatch @ app.e79e6a38.js:59357\nelemData.handle @ app.e79e6a38.js:59025. ",
    "liamcottam": "Hello @WTFKr0 \nI gave it some testing and only found one issue, when re-creating a container the host section of the port mapping isn't being copied over, let me know if you need more info or testing.. Works perfectly, thanks!. @deviantony I've had a crack at trying to fix this in two ways, hide the scrollbar, or adjust the content for the scrollbar.\nA simple method to completely hide the scrollbar\n$(`<style type='text/css'>#sidebar-wrapper{overflow: hidden; }</style>`).appendTo(\"head\");\nA method to retain the scrollbar but adjust the page-content view\n```javascript\nvar _scrollbarWidth;\n// https://github.com/hashchange/jquery.isinview/blob/6887aa7affd07877ee6d2c04d48d393c8092632d/src/jquery.isinview.js#L239\nfunction browserScrollbarWidth() {\n  var testEl;\n  if (_scrollbarWidth === undefined) {\n    testEl = document.createElement(\"div\");\n    testEl.style.cssText = \"width: 100px; height: 100px; overflow: scroll; position: absolute; top: -500px; left: -500px; margin: 0px; padding: 0px; border: none;\";\n    document.body.appendChild(testEl);\n    _scrollbarWidth = testEl.offsetWidth - testEl.clientWidth;\n    document.body.removeChild(testEl);\n  }\n  return _scrollbarWidth;\n}\nbrowserScrollbarWidth();\nif (browserScrollbarWidth()) {\n  $(<style type='text/css'> #page-wrapper.scrollbar-visible { padding-left: ${70 + _scrollbarWidth}px; } #page-wrapper.open.scrollbar-visible { padding-left: ${250 + _scrollbarWidth}px; } </style>).appendTo(\"head\");\nfunction toggleScrollbarClass() {\n    $('#page-wrapper').toggleClass('scrollbar-visible', $('.sidebar')[0].scrollHeight > $('.sidebar').height());\n  }\n$(window).on('resize', () => toggleScrollbarClass());\n  $('.sidebar-main').click(() => toggleScrollbarClass());\ntoggleScrollbarClass();\n}\n```\n. I think I done it wrong and I'm at a loss at what to do. \ud83d\ude22. I think I managed to fix it :). If you go to Endpoints, click manage access in the bottom table and click the user you want authorised, they should be able to log in.\nLet me know if this helped.. ",
    "querplis": "any chanse we can get a health check here too?.  i am looking on that \"start conainer\" button and it doesnt realy describe what gona happen.\n do we just stick a new network without restart of  container?\n do we realy make a clone, clone with some fresh changes?\n* do we apply changes and restart/relaunch  container?\n. it could be some kind of filter/checkbox/toggle somehwere. ",
    "rauno-palosaari": "A workaround is to add a dummy env-variable to the service i.e. FOO=bar\nThis will start a service update. ",
    "gregtoth": "I tried out the \"Update the service\" button in the latest dev build and noticed that it doesn't pull the latest image -- it uses the same image sha256 as when the service was originally created. I think the OP request (and mine as well) is to be able to easily replace all the running containers in a service with the latest image pulled from the repo, i.e. the same effect as deleting the sha256:xxxxxx portion in the Image edit box and doing Apply changes.. ",
    "doncicuto": "The force option was added to service by Docker so tasks can be restarted even though no changes have been applied to the service. \nIt seems that the force doesn't pull on its own new images. I think the issue is explained quite well here: \n\nUsing --force allows you to update the image without having to update the tag; just checked, and it seems to require including the image yes;\ndocker service update --force --image foobar:latest myservice\nDoes \"re-resolve\" the digest\n\nI added the force option and indeed the tasks are recreated but it wasn't clear that you have to use the --image to force a digest resolution so a new image is pulled if needed. I'll have a look on how to force that through the API and try to tackle #1577 . I've submitted a PR (https://github.com/portainer/portainer/pull/1451) which adds engine labels that had been set to the docker daemon.\n\n. Sure, I'll have a look on how to do this in the front-end.. As requested, I've moved the default port logic for LDAP from the back-end (removed the golang code).\nThe code works like this:\n\nUser adds a IP or hostname to the LDAP url but forgets to add the port (no TLS is used):\n\nIf user checks connectivity the default 389 port will be added (if StartTLS is used 389 is also the default port):\n\nIf user saves the settings and the port is not included in the URL the 389 port will be added:\n\nNow user adds a hostname for a TLS LDAP server but forgets the 636 port.\n\nIf user checks connectivity the default 636 port will be added:\n\nIf user saves the settings and the port is not included in the URL the 636 port will be added:\n\n. Hope it looks better now, sorry for so many reviews, it's great to contribute some code to this project.. As suggested, if a 128M limit is added with --limit-memory, the UI will display the memory using base 2:\n\n\nAs discussed, in this way the user won't see a difference in the value used in the CLI and shown in the UI.. Awesome!, I'll continue then with restart delay :-D. I'll have a look on those conflicts :+1: . Ok, I think I fixed the conflict :). Absolutely, let me fix it. Thank you for your explanations!. Excellent, thanks for your patience and guidance!. Hi!, I can confirm your issue. \nIf I create the docker service in portainer and try to scale it, the tasks are not stopped, so it works as expected. I created a service in Portainer with 1 replica factor, and increased it to 2 and later to 3, no tasks were stopped.\n\nAlso, if the service is created in Portainer and updated from the CLI no tasks are stopped and restarted. It seems that creating the service from the CLI and scale it from Portainer is the only existing issue. \nI'm trying to grasp what is forcing docker to think that it must stop tasks and recreate them if the service was initially created from the CLI but later updated from Portainer. @deviantony I'm trying to have a look unless you have another point of view.. Ok, I've isolated the issue, it's something related with this Docker issue.\nWhen we update a service using Portainer we always send the RestartPolicy information to Docker API which makes Docker think that there have been some changes in the restart policy (even though no changes in the properties have been performed) and forces a service update, restarting any running task. \nI'm testing a PR where this restart policy information is not sent unless we've changed any of the restart policy settings. I'm also testing if we can avoid sending other settings that have not changed when we update the service.. @deviantony I've uploaded a PR with a simple fix and offering more information about what I've tested. Basically I try to avoid sending the restart policy unless we change a restart policy setting in the UI.\nI commented some code in the updateService method to isolate the issue and I found that it was the code related to the restart policy. I tried to comment the window setting that is not created by default but it wasn't the issue.\nI inspected the service after it was created in Docker. This was the restart policy settings displayed by the inspect command:\n\"RestartPolicy\": {\n                    \"Condition\": \"any\",\n                    \"Delay\": 5000000000,\n                    \"MaxAttempts\": 0\n                },\nI tried to update the service from Portainer (scaling the number of replicas) and I checked that even if I send the same RestartPolicy to Docker (removing the Window setting), Docker thinks it's fine to restart the running tasks, so that's why I thought about not sending the restart settings. \nI think there's an issue in Docker when you don't specify settings when a service is created, it assumes [some defaults] (https://github.com/moby/moby/issues/27018) and if you try to update it through the API using the same default settings, I think Docker assumes that you're now specifying the policy that you haven't specified earlier and hence it restarts the tasks. I'm not sure but that seems the logic to me.. I see, on my Fedora Workstation 27 with Docker CE 17.12.0 I found the tasks being recreated.. Sure @deviantony, I'll prepare the issue for Docker and update the issue with the feedback.. Understood, I'll review the stack-details view and check if the same workaround can be applied. Thanks @kristoferlundgren and @deviantony . Ok. I've tested what @kristoferlundgren reported, thanks for the feedback once again.\nWhen we update a service we take the current service configuration and prepare a new configuration with those values as the initial values. In the UI we provide some \"default\" values for those cases where the user does not inform about those values. \nIn this issue, when we increase the number of replicas, the Resource Limits and Reservation section has the following default values:\n\nAnd we send the following configuration for resource limits in the update request:\nLimits {NanoCPUs: 0, MemoryBytes: 0}\nReservation {NanoCPUs: 0, MemoryBytes: 0}\nThese 0 values should be \"default\" values, harmless values, but they force the service to have this new specification:\n\"Resources\": {\n      \"Limits\": {},\n       \"Reservations\": {}\n },\nWhile the previous specification is:\n\"Resources\": {},\nThose empty Limits and Reservations attributes are forcing Docker to believe that the tasks need to be restarted.\nSo... I've prepared a PR where the default values are not sent at least for limits and reservation and the update configuration, checking if they have been changed in the UI by the user in the same way that the restart policy values are not sent if they are not changed. \nWith those changes, the nginx service can have three tasks without restarting the initial tasks. But we cannot discard new bugs, of course. I'd need more time to investigate about what does the API expect when a service is updated, maybe we can only send what it's changed in the Angular UI but I'm not sure about Docker's behavior, so @deviantony we may have this issue to track and fix new issues with the help of users like @kristoferlundgren. . @deviantony I've opened the following issue once I've tested the same issue in the CLI:\nhttps://github.com/moby/moby/issues/36183\nI'd open a new issue for the resources limits and reservations if I can reproduce it in the CLI.. Hi there!\nIn the service list view, if you select one service and click the Update button it sends the --force flag to the API as explained here\n\nThis is the message warning you about the force update:\n\nAnd you have the same button in the service detail view. \n\nNow we're working on this behavior for updating services. \nDoes the current force update solve your feature request issue?  \nCheers!. No problem! I'll prepare the changes.. Sure! Just ported the golang code to JS, but is better to use indexOf, you're right. Give me a minute.. Absolutely!. Of course! I'll also move the html code to its own file like resources-placement.html. This will be how it looks as suggested.\n\n. Aw! Sorry for so many trials and errors, I'm not an Angular guy :) but I'll do my best.. I understand, the fact is that I don't know how to pass the apiVersion information to the servicesDatatable.html file as in the service-details view I already use an ngIf to show the button only if the version is >= 1.25. that's why I added the error message :D. I'll have a look on how to pass that apiVersion info so I can use it in the datatable, still learning AngularJS.\n  . Ahhhh! Excellent I'll try as suggested, thanks for the hint as always :D\n  . I'll prepare the changes. Thanks a lot for your feedback.. ",
    "hhakkaev": "This issue is not related portainer, same issue exist also running the container from docker cli.. ",
    "eliat123": "@Glowbal @deviantony updated without full page refresh, please review.. @deviantony rebased to latest develop, please review.. @deviantony - I have fixed the requested changes, please review.. @deviantony Thanks for letting me know.\nI have fixed the checkbox issue, now both ways of selecting a row work.. a hack to avoid full page refresh when changing $location.path. @deviantony In my implementation you can have a direct access to a page anchor.\nWhat would be the url format without an additional parameter? . @deviantony I think that users can use this url as a bookmark or as #833 requested. \nWhy would we want to prevent this usage from users?\n. @deviantony I do not fully understand what you mean,  just as an example, the url might be:\nhttp://127.0.0.1:9000/#/service/m132l2db91jg31txe9i8s6f1u-service-tasks\nIf not, please provide an example.\n. Ok, I will try to find time to work on it. . the $anchorScroll has to occur after the page has been fully rendered, (otherwise the anchor doesn't exist). This can be achieved using $timeout(). ",
    "d-led": "I'd still find this feature useful, as not everybody would use Swarm or other secret management. \nAn example use-case: GoCD allows to define secret environment variables:\n\nWhile the password will be stored securely and will not feature in logging or other output, Portainer (sure, Docker, actually), will allow to, perhaps, inadvertently, read the password in plain text.\n. @deviantony ok. deploying. I'm not sure, the --no-snapshot flag reaches the container.\ninspecting it after restarting it manually on the command line:\n\nthe leak seems to be consistent with the 5 minutes frequency (10:58-11:03)\n\n. \nthanks. I see the message. I continue to see spikes of slight memory increase every 5 minutes. while the snapshots are turned off in my installation (according to the UI), the file handles keep increasing by 1 every 5 minutes:\n\n(2 redeploys seen here). @deviantony thanks too! Portainer rocks \ud83d\ude04 \n. Turning off snapshots didn't turn off the leak somehow. Thus, as a temporary work-around, I have tried passing the snapshot interval via the command line, which didn't reach the UI, thus I simply set the interval in the settings:\n\n1 file handle and a bit of memory in 9999h is ok for now \ud83d\ude04 \n@neothematrix I'd recommend simply setting the interval to something large for now. @deviantony yes, no leaks every 5 mins. Strange, that contrary to @neothematrix, I could pass the flag (as seen in the UI) to stop snapshots, but the flag did not have an effect\nfile handles after setting the interval to 9999h:\n\n. no file or memory leaks \u2192 OK!\n\n. @deviantony yep\n6f6d2d412365 portainer/portainer:fix1991-open-files  \"/portainer\"  4 hours ago\nthe red line is the moment where I deployed. Stil looks ok. no file handle leak for a day. Memory usage looks like this:\n\n. @deviantony superb. Thank you too. ",
    "superpoussin22": "sounds good solution on my side :). ",
    "ercpe": "In Step 4, the form is send without the content of the password field. The Chrome developer tools show the request payload as  {\"username\":\"admin\",\"password\":\"\"}.\nSo yes, it seems to be caused by SGP but I wonder if this can be circumvented by portainer.. In Step 4, the form is send without the content of the password field. The Chrome developer tools show the request payload as  {\"username\":\"admin\",\"password\":\"\"}.\nSo yes, it seems to be caused by SGP but I wonder if this can be circumvented by portainer.. ",
    "mvhconsult": "Maybe related, but changing the password to a version with all chars enabled (as these tools do) makes the login fail. Probably some characters are not allowed/encoded?\nTry with\nu: admin\np: \"6-5oD]ww\"$1~2V. ",
    "gdeverlant": "Install also the legacy volume driver\nhttps://github.com/CWSpear/local-persist\n```\nversion: \"3\"\nnetworks:\n  swarm-net: #overlay\n    external: true\nservices:\n  gitea:\n    image: privaterepo:5000/gitea/gitea-arm:1.1.1\n    volumes:\n      - gitea-datas:/data\n    networks:\n      - swarm-net\n    ports:\n      - 3022:22\n    deploy:\n      placement:\n        constraints:\n          - node.role == manager\n      restart_policy:\n        condition: on-failure\n      labels:\n        traefik.enable: \"true\"\n        traefik.docker.network: \"swarm-net\"\n        traefik.port: 3000\n        traefik.backend.loadbalancer.sticky: \"true\"\n        traefik.backend.loadbalancer.method: \"drr\"\n        traefik.backend.loadbalancer.swarm: \"true\"\n        traefik.frontend.passHostHeader: \"true\"\nportainer:\n    image: portainer/portainer:linux-arm-1.13.1\n    volumes:\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n      - portainer-datas:/data\n    networks:\n      - swarm-net\n    deploy:\n      placement:\n        constraints:\n          - node.role == manager\n      restart_policy:\n        condition: on-failure\n      labels:\n        traefik.enable: \"true\"\n        traefik.docker.network: \"swarm-net\"\n        traefik.port: 9000\n        traefik.backend.loadbalancer.sticky: \"true\"\n        traefik.backend.loadbalancer.method: \"drr\"\n        traefik.backend.loadbalancer.swarm: \"true\"\n        traefik.frontend.passHostHeader: \"true\"\ntraefik:\n    image: hypriot/rpi-traefik\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n      #- \"8080:8080\"\n    command: --docker --docker.swarmmode=true --docker.watch=true --docker.domain=docker.localhost -l DEBUG --web\n    volumes:\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n    networks:\n      - swarm-net\n    labels: {}\n    deploy:\n      placement:\n        constraints:\n          - node.role==manager\n      restart_policy:\n        condition: on-failure\n      labels:\n        traefik.enable: \"true\"\n        traefik.docker.network: \"swarm-net\"\n        traefik.port: 8080\n        traefik.backend.loadbalancer.sticky: \"true\"\n        traefik.backend.loadbalancer.method: \"drr\"\n        traefik.backend.loadbalancer.swarm: \"true\"\n        traefik.frontend.passHostHeader: \"true\"\nvolumes:\n  portainer-datas:\n    driver: local-persist\n    driver_opts:\n        type: volume \n        mountpoint: /mnt/virtual/docker/containers/portainer\n  gitea-datas:\n    driver: local-persist\n    driver_opts:\n        type: volume \n        mountpoint: /mnt/virtual/docker/containers/gitea         \n```. ",
    "choonchernlim": "Excellent! Adding privileged: true works:-\nservices:\n  portainer:\n    image: \"portainer/portainer\"\n    privileged: true\n    ports:\n     - \"9000:9000\"\n    volumes:\n     - portainer:/data\n     - /var/run/docker.sock:/var/run/docker.sock\nBy the way, when I restart the containers, I get this error every once awhile:-\nCannot start service portainer: linux runtime spec devices: lstat /dev/dm-10: no such file or directory\nWhat does it mean? Is there something I can do to prevent this error from happening?\nThanks you very much for your help.. @deviantony: portainer:/data:z doesn't work for me. I keep getting the error below when I logged into Portainer.\nFailure: Unable to load dashboard data\nFailure: Unable to connect to the Docker endpoint\n. Bind mount /etc/localtime:/etc/localtime works for me. Thank you.. ",
    "nemchik": "Sorry to necro this, but is there any chance that TZ could be supported in the Portainer images?. The volume works, but I'm still interested in TZ if it would be considered.. I appreciate the consideration!. FYI I have found that proxy_hide_header X-Frame-Options; can work around this issue if you add it to your nginx config for the location block that includes your proxy_pass ... but I still strongly believe the X-Frame-Options: DENY header should not be included by default in Portainer (or at least made optional).. Yes I am running portainer via docker and also nginx via docker, but this should work in nginx regardless. Volumes should not be relevant.. ",
    "Diegus83": "I recently installed Portainer in a mac OS host and run into the same issue.\n/etc/localtime is a link pointing to /var/db/timezone/zoneinfo/America/New_York\n/var is a link to /private/var so Docker complains /private is already shared\nThe closest I got to make it work was to bind\n                \"Source\": \"/private/var/db/timezone/tz/2018g.1.0/zoneinfo/America/New_york\",\n                \"Destination\": \"/etc/localtime\"\nThe time in the logs was ok after this but it didn't survived the first reboot of the host.\nAnyone found a workaround for mac OS hosts?\nIs not a big deal but the time in the logs is about 4hs ahead of my local time.. ",
    "taherv": "Hello,\nMy plugin shows up in the \"docker plugin ls\" output, but not in the \"docker info\" output\nos76@vm-taher:~$ docker plugin ls\nID                  NAME                            DESCRIPTION                      ENABLED\n39300b2d40c3        purestorage/docker-plugin:1.0   Pure Storage plugin for Docker   true\n```\nos76@vm-taher:~$ docker info\nContainers: 2\n Running: 2\n Paused: 0\n Stopped: 0\nImages: 27\nServer Version: 17.05.0-ce-rc1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 96\n Dirperm1 Supported: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host macvlan null overlay\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nInit Binary: docker-init\ncontainerd version: 9048e5e50717ea4497b757314bad98ea3763c145\nrunc version: 9c2d8d184e5da67c95d601382adf14862e4f2228\ninit version: 949e6fa\nSecurity Options:\n apparmor\n seccomp\n  Profile: default\nKernel Version: 4.4.0-72-generic\nOperating System: Ubuntu 16.04.2 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 15.55GiB\nName: vm-taher\nID: FR4Z:YBQN:GUZ3:RWE3:4FA2:GBOG:F63M:W6S4:HS2M:5VNA:W4NX:O7FE\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nUsername: tahervohra\nRegistry: https://index.docker.io/v1/\nExperimental: false\nInsecure Registries:\n 127.0.0.0/8\nLive Restore Enabled: false\nWARNING: No swap limit support\n``. FWIW, I restarted my docker daemon, just to ensure docker understood my plugin was installed when it started. However, the output ofdocker info` after the restart still doesnt show my installed plugin. @deviantony I installed this plugin using the \"docker plugin install\" command. For all intents and purposes, the plugin seems to be working fine. I can create volumes and use them in docker containers.\n. ",
    "jack6liu": "I've got the same issue with portainer 1.13.4 and docker-ce 17.06 .\nCommand docker info cannot display the volume plugin rexray/rbd:latest while docker plugin ls can.\nSo, is it possible or easy to use something equivalent to command docker plugin ls instead of docker info to get the plugin list? But it seems that docker plugin list cannot easily to determine whether the plugin is a volume plugin or a network plugin. Just ignore that if it's nonsense...\nAnd, futher more, hope it's possible to request a feature here for the createNetwork page, to replace manually input network driver by selecting from a dropdown list.\nThe docker info can display the network plugin store/weaveworks/net-plugin:latest_release normally.\ndocker info output in my env:\n```\ndocker info\n...\nServer Version: 17.06.0-ce\n...\nPlugins:\n Volume: local\n Network: bridge host macvlan null overlay store/weaveworks/net-plugin:latest_release\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\n```\ndocker plugin ls output in my env:\n```\ndocker plugin ls\nID                  NAME                                         DESCRIPTION                   ENABLED\n92b7859b4eb1        rexray/rbd:latest                            REX-Ray for Ceph RBD          true\nf751df69d261        store/weaveworks/net-plugin:latest_release   Weave Net plugin for Docker   true\n``. Thanks for your answer so quick. I'll open a new issue for the new feature request.. @deviantony seemsdocker plugin lscan determine the plugin type byConfig.Interface.Types`.\na volue driver:\ndocker plugin inspect rexray/rbd:latest\n[\n    {\n        \"Config\": {\n          ...\n            \"Interface\": {\n                \"Socket\": \"rexray.sock\",\n                \"Types\": [\n                    \"docker.volumedriver/1.0\"\n                ]\n            },\n          ...\na network driver:\ndocker plugin inspect store/weaveworks/net-plugin:latest_release\n[\n    {\n        \"Config\": {\n          ...\n            \"Interface\": {\n                \"Socket\": \"weave.sock\",\n                \"Types\": [\n                    \"docker.networkdriver/1.0\"\n                ]\n            },\n          ...\n. @deviantony I've tested in my lab env, it's working well. Thank you !\nsee below screen shots.\n\n\n\n. @deviantony  Yes, tested and working now. the 'test_vol_portainer' in the screenshots was created via portainer ui.. @deviantony latest portainer/portainer:pr1044 still works for docker-ce 17.06 in my env.. @deviantony  I've experienced such issue too, I can reproduced this issue in my lab env.\nmy env: \nDocker:  Server Version: 17.06.0-ce\nSwarm mode enabled with 3 nodes.\n```bash\ndocker node ls\nID                            HOSTNAME           STATUS              AVAILABILITY        MANAGER STATUS\naagq19znhxf4qcwpvhfby5rbv     node-2.xxxxxx.xxx   Ready               Active              Leader\ndf0cakhf8duy3r6ld8we2tx1s     node-1.xxxxxx.xxx   Ready               Active              Reachable\nnj14gzr3clkmw7s8cslg9rm3f *   node-0.xxxxxx.xxx   Ready               Active              Reachable\n```\nStep 1: create a docker swarm service via command on manager node like \nbash\ndocker service create \\\n    --name test_dead \\\n    --replicas 3 \\\n    --network test_net \\\n    alpine:3.6 \\\n    sh -c \"while true; do echo sleeping 30; sleep 30; done\"\nStep 2: restart 1 node just via reboot or init 6\nStep 3: after the node started, then check all container status on the node, some container in test_dead service will show as dead, but in portainer UI, such container will show as running.\nI'm not sure it will reproduced this issue in your env, but it do happened in my lab env here.\nHopes it will help.. @deviantony , I found a way to reproduce this issue at stackoverflow\nway to create a dead container mentioned in stackoverflow\nbash\nID=$(docker run --name dead-experiment -d -t alpine sh)\ndocker kill dead-experiment\ntest \"$ID\" != \"\" && chattr +i -R /var/lib/docker/containers/$ID\ndocker rm -f dead-experiment\nAnd I tested with portainer/portainer:pr1048, it still show running state while the container is acutally dead.\n\n\n. @deviantony I'm not familiar with APIs, didn't found api/docker/<ID>/containers/json?all=1, I paste the response of /containers/{id}/json according to inspect a container from official API document, the output as below:\njson\nhttp http://192.168.200.16:2375/containers/5b2c2abb1f4bc20616519f26ede87c53adfc19927aa0152d928ecea8e7c00967/json | jq\n{\n  \"Id\": \"5b2c2abb1f4bc20616519f26ede87c53adfc19927aa0152d928ecea8e7c00967\",\n  \"Created\": \"2017-07-19T03:46:27.396690637Z\",\n  \"Path\": \"sh\",\n  \"Args\": [],\n  \"State\": {\n    \"Status\": \"dead\",\n    \"Running\": false,\n    \"Paused\": false,\n    \"Restarting\": false,\n    \"OOMKilled\": false,\n    \"Dead\": true,\n    \"Pid\": 0,\n    \"ExitCode\": 137,\n    \"Error\": \"\",\n    \"StartedAt\": \"2017-07-19T03:46:27.597480643Z\",\n    \"FinishedAt\": \"2017-07-19T03:46:27.648767071Z\"\n  },\n  \"Image\": \"sha256:7328f6f8b41890597575cbaadc884e7386ae0acc53b747401ebce5cf0d624560\",\n  \"ResolvConfPath\": \"/var/lib/docker/containers/5b2c2abb1f4bc20616519f26ede87c53adfc19927aa0152d928ecea8e7c00967/resolv.conf\",\n  \"HostnamePath\": \"/var/lib/docker/containers/5b2c2abb1f4bc20616519f26ede87c53adfc19927aa0152d928ecea8e7c00967/hostname\",\n  \"HostsPath\": \"/var/lib/docker/containers/5b2c2abb1f4bc20616519f26ede87c53adfc19927aa0152d928ecea8e7c00967/hosts\",\n  \"LogPath\": \"/var/lib/docker/containers/5b2c2abb1f4bc20616519f26ede87c53adfc19927aa0152d928ecea8e7c00967/5b2c2abb1f4bc20616519f26ede87c53adfc19927aa0152d928ecea8e7c00967-json.log\",\n  \"Name\": \"/dead-experiment\",\n  \"RestartCount\": 0,\n  \"Driver\": \"overlay\",\n  \"MountLabel\": \"\",\n  \"ProcessLabel\": \"\",\n  \"AppArmorProfile\": \"\",\n  \"ExecIDs\": null,\n  \"HostConfig\": {\n    \"Binds\": null,\n    \"ContainerIDFile\": \"\",\n    \"LogConfig\": {\n      \"Type\": \"json-file\",\n      \"Config\": {\n        \"max-file\": \"3\",\n        \"max-size\": \"3m\"\n      }\n    },\n    \"NetworkMode\": \"default\",\n    \"PortBindings\": {},\n    \"RestartPolicy\": {\n      \"Name\": \"no\",\n      \"MaximumRetryCount\": 0\n    },\n    \"AutoRemove\": false,\n    \"VolumeDriver\": \"\",\n    \"VolumesFrom\": null,\n    \"CapAdd\": null,\n    \"CapDrop\": null,\n    \"Dns\": [],\n    \"DnsOptions\": [],\n    \"DnsSearch\": [],\n    \"ExtraHosts\": null,\n    \"GroupAdd\": null,\n    \"IpcMode\": \"\",\n    \"Cgroup\": \"\",\n    \"Links\": null,\n    \"OomScoreAdj\": 0,\n    \"PidMode\": \"\",\n    \"Privileged\": false,\n    \"PublishAllPorts\": false,\n    \"ReadonlyRootfs\": false,\n    \"SecurityOpt\": null,\n    \"UTSMode\": \"\",\n    \"UsernsMode\": \"\",\n    \"ShmSize\": 67108864,\n    \"Runtime\": \"runc\",\n    \"ConsoleSize\": [\n      0,\n      0\n    ],\n    \"Isolation\": \"\",\n    \"CpuShares\": 0,\n    \"Memory\": 0,\n    \"NanoCpus\": 0,\n    \"CgroupParent\": \"\",\n    \"BlkioWeight\": 0,\n    \"BlkioWeightDevice\": null,\n    \"BlkioDeviceReadBps\": null,\n    \"BlkioDeviceWriteBps\": null,\n    \"BlkioDeviceReadIOps\": null,\n    \"BlkioDeviceWriteIOps\": null,\n    \"CpuPeriod\": 0,\n    \"CpuQuota\": 0,\n    \"CpuRealtimePeriod\": 0,\n    \"CpuRealtimeRuntime\": 0,\n    \"CpusetCpus\": \"\",\n    \"CpusetMems\": \"\",\n    \"Devices\": [],\n    \"DeviceCgroupRules\": null,\n    \"DiskQuota\": 0,\n    \"KernelMemory\": 0,\n    \"MemoryReservation\": 0,\n    \"MemorySwap\": 0,\n    \"MemorySwappiness\": -1,\n    \"OomKillDisable\": false,\n    \"PidsLimit\": 0,\n    \"Ulimits\": null,\n    \"CpuCount\": 0,\n    \"CpuPercent\": 0,\n    \"IOMaximumIOps\": 0,\n    \"IOMaximumBandwidth\": 0\n  },\n  \"GraphDriver\": {\n    \"Data\": null,\n    \"Name\": \"overlay\"\n  },\n  \"Mounts\": [],\n  \"Config\": {\n    \"Hostname\": \"5b2c2abb1f4b\",\n    \"Domainname\": \"\",\n    \"User\": \"\",\n    \"AttachStdin\": false,\n    \"AttachStdout\": false,\n    \"AttachStderr\": false,\n    \"Tty\": true,\n    \"OpenStdin\": false,\n    \"StdinOnce\": false,\n    \"Env\": [\n      \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n    ],\n    \"Cmd\": [\n      \"sh\"\n    ],\n    \"Image\": \"alpine\",\n    \"Volumes\": null,\n    \"WorkingDir\": \"\",\n    \"Entrypoint\": null,\n    \"OnBuild\": null,\n    \"Labels\": {}\n  },\n  \"NetworkSettings\": {\n    \"Bridge\": \"\",\n    \"SandboxID\": \"0befa63abf0317b097770d0fb5e82208f9f184b9db358ed46d6a62b1bd42a987\",\n    \"HairpinMode\": false,\n    \"LinkLocalIPv6Address\": \"\",\n    \"LinkLocalIPv6PrefixLen\": 0,\n    \"Ports\": {},\n    \"SandboxKey\": \"/var/run/docker/netns/0befa63abf03\",\n    \"SecondaryIPAddresses\": null,\n    \"SecondaryIPv6Addresses\": null,\n    \"EndpointID\": \"\",\n    \"Gateway\": \"\",\n    \"GlobalIPv6Address\": \"\",\n    \"GlobalIPv6PrefixLen\": 0,\n    \"IPAddress\": \"\",\n    \"IPPrefixLen\": 0,\n    \"IPv6Gateway\": \"\",\n    \"MacAddress\": \"\",\n    \"Networks\": {\n      \"bridge\": {\n        \"IPAMConfig\": null,\n        \"Links\": null,\n        \"Aliases\": null,\n        \"NetworkID\": \"f8e9b1c68751ab1f4b5bbee10c8f374850793e74fa609ae24f3234a4ea5af68f\",\n        \"EndpointID\": \"\",\n        \"Gateway\": \"\",\n        \"IPAddress\": \"\",\n        \"IPPrefixLen\": 0,\n        \"IPv6Gateway\": \"\",\n        \"GlobalIPv6Address\": \"\",\n        \"GlobalIPv6PrefixLen\": 0,\n        \"MacAddress\": \"\",\n        \"DriverOpts\": null\n      }\n    }\n  }\n}. @deviantony I got the response, check below output\n```json\n[{\n    \"Command\": \"sh\",\n    \"Created\": 1500435987,\n    \"HostConfig\": {\n        \"NetworkMode\": \"default\"\n    },\n    \"Id\": \"5b2c2abb1f4bc20616519f26ede87c53adfc19927aa0152d928ecea8e7c00967\",\n    \"Image\": \"alpine\",\n    \"ImageID\": \"sha256:7328f6f8b41890597575cbaadc884e7386ae0acc53b747401ebce5cf0d624560\",\n    \"Labels\": {\n},\n\"Mounts\": [],\n\"Names\": [\"/dead-experiment\"],\n\"NetworkSettings\": {\n    \"Networks\": {\n        \"bridge\": {\n            \"Aliases\": null,\n            \"DriverOpts\": null,\n            \"EndpointID\": \"\",\n            \"Gateway\": \"\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAMConfig\": null,\n            \"IPAddress\": \"\",\n            \"IPPrefixLen\": 0,\n            \"IPv6Gateway\": \"\",\n            \"Links\": null,\n            \"MacAddress\": \"\",\n            \"NetworkID\": \"f8e9b1c68751ab1f4b5bbee10c8f374850793e74fa609ae24f3234a4ea5af68f\"\n        }\n    }\n},\n\"Ports\": [],\n\"State\": \"dead\",\n\"Status\": \"Dead\"\n\n},\n{\n    \"Command\": \"/usr/local/bin/run\",\n    \"Created\": 1499927704,\n    \"HostConfig\": {\n        \"NetworkMode\": \"default\"\n    },\n    \"Id\": \"ba2b1272322edf4b83003f30313132795917cfc5dd283b1bcf0c997615141c42\",\n    \"Image\": \"192.168.200.8:5000/shipyard/docker-proxy:latest\",\n    \"ImageID\": \"sha256:cfee14e5d6f280892b9fb16e830aae5c9458e61a7502048ac45b6b1723e8b0b9\",\n    \"Labels\": {\n},\n\"Mounts\": [{\n    \"Destination\": \"/var/run/docker.sock\",\n    \"Mode\": \"\",\n    \"Propagation\": \"rprivate\",\n    \"RW\": true,\n    \"Source\": \"/var/run/docker.sock\",\n    \"Type\": \"bind\"\n}],\n\"Names\": [\"/portainer-proxy\"],\n\"NetworkSettings\": {\n    \"Networks\": {\n        \"bridge\": {\n            \"Aliases\": null,\n            \"DriverOpts\": null,\n            \"EndpointID\": \"5af049c71807e1c84fdeccced80481d59f3ecb1b54e40069672ebf61368f9b3d\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAMConfig\": null,\n            \"IPAddress\": \"172.17.0.2\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"Links\": null,\n            \"MacAddress\": \"02:42:ac:11:00:02\",\n            \"NetworkID\": \"f8e9b1c68751ab1f4b5bbee10c8f374850793e74fa609ae24f3234a4ea5af68f\"\n        }\n    }\n},\n\"Ports\": [{\n    \"IP\": \"0.0.0.0\",\n    \"PrivatePort\": 2375,\n    \"PublicPort\": 2375,\n    \"Type\": \"tcp\"\n}],\n\"State\": \"running\",\n\"Status\": \"Up 6 hours\"\n\n},\n{\n    \"Command\": \"/entrypoint.sh osd\",\n    \"Created\": 1499680585,\n    \"HostConfig\": {\n        \"NetworkMode\": \"host\"\n    },\n    \"Id\": \"979e31592bf50a26843e7db8b391e82ebdd0b59988ac42427593ff9cfdeeae7b\",\n    \"Image\": \"192.168.200.8:5000/ceph/daemon:tag-build-master-kraken-centos-7\",\n    \"ImageID\": \"sha256:8b719a2d2a56dc164e56ebdd6e046b45ebdbf44e196c3decfd638f68b975a8d7\",\n    \"Labels\": {\n        \"build-date\": \"20170605\",\n        \"license\": \"GPLv2\",\n        \"name\": \"CentOS Base Image\",\n        \"vendor\": \"CentOS\"\n    },\n    \"Mounts\": [{\n        \"Destination\": \"/dev\",\n        \"Mode\": \"\",\n        \"Propagation\": \"rprivate\",\n        \"RW\": true,\n        \"Source\": \"/dev\",\n        \"Type\": \"bind\"\n    },\n    {\n        \"Destination\": \"/etc/ceph\",\n        \"Mode\": \"\",\n        \"Propagation\": \"rprivate\",\n        \"RW\": true,\n        \"Source\": \"/etc/ceph\",\n        \"Type\": \"bind\"\n    },\n    {\n        \"Destination\": \"/etc/ganesha\",\n        \"Driver\": \"local\",\n        \"Mode\": \"\",\n        \"Name\": \"7cb1a1d38152c628fc97d119824b2224d64d90dce9a60e7b31b72526f403e12f\",\n        \"Propagation\": \"\",\n        \"RW\": true,\n        \"Source\": \"/var/lib/docker/volumes/7cb1a1d38152c628fc97d119824b2224d64d90dce9a60e7b31b72526f403e12f/_data\",\n        \"Type\": \"volume\"\n    },\n    {\n        \"Destination\": \"/var/lib/ceph\",\n        \"Mode\": \"\",\n        \"Propagation\": \"rprivate\",\n        \"RW\": true,\n        \"Source\": \"/var/lib/ceph\",\n        \"Type\": \"bind\"\n    }],\n    \"Names\": [\"/ceph-osd-2\"],\n    \"NetworkSettings\": {\n        \"Networks\": {\n            \"host\": {\n                \"Aliases\": null,\n                \"DriverOpts\": null,\n                \"EndpointID\": \"7a5d4a217d7c3f261fecba9bb6aecf88f80fab5c9f205cedad624dc6bffa6e48\",\n                \"Gateway\": \"\",\n                \"GlobalIPv6Address\": \"\",\n                \"GlobalIPv6PrefixLen\": 0,\n                \"IPAMConfig\": null,\n                \"IPAddress\": \"\",\n                \"IPPrefixLen\": 0,\n                \"IPv6Gateway\": \"\",\n                \"Links\": null,\n                \"MacAddress\": \"\",\n                \"NetworkID\": \"1a0609349a9a188eecb0a2f897dde48b38d99fd5f4ddcc2f79b9470407b76c2e\"\n            }\n        }\n    },\n    \"Portainer\": {\n        \"ResourceControl\": {\n            \"Id\": 19,\n            \"ResourceId\": \"979e31592bf50a26843e7db8b391e82ebdd0b59988ac42427593ff9cfdeeae7b\",\n            \"SubResourceIds\": null,\n            \"Type\": 1,\n            \"AdministratorsOnly\": true,\n            \"UserAccesses\": [],\n            \"TeamAccesses\": [],\n            \"OwnerId\": 0,\n            \"AccessLevel\": 0\n        }\n    },\n    \"Ports\": [],\n    \"State\": \"running\",\n    \"Status\": \"Up 6 hours\"\n},\n{\n    \"Command\": \"/entrypoint.sh mon\",\n    \"Created\": 1499680437,\n    \"HostConfig\": {\n        \"NetworkMode\": \"host\"\n    },\n    \"Id\": \"85caefb6e89fd43d6e5121fbfca777130e727e37edcd9f189bc5c2ceb7f4520e\",\n    \"Image\": \"192.168.200.8:5000/ceph/daemon:tag-build-master-kraken-centos-7\",\n    \"ImageID\": \"sha256:8b719a2d2a56dc164e56ebdd6e046b45ebdbf44e196c3decfd638f68b975a8d7\",\n    \"Labels\": {\n        \"build-date\": \"20170605\",\n        \"license\": \"GPLv2\",\n        \"name\": \"CentOS Base Image\",\n        \"vendor\": \"CentOS\"\n    },\n    \"Mounts\": [{\n        \"Destination\": \"/etc/ceph\",\n        \"Mode\": \"\",\n        \"Propagation\": \"rprivate\",\n        \"RW\": true,\n        \"Source\": \"/etc/ceph\",\n        \"Type\": \"bind\"\n    },\n    {\n        \"Destination\": \"/etc/ganesha\",\n        \"Driver\": \"local\",\n        \"Mode\": \"\",\n        \"Name\": \"2522c2fc7c5304591f57d0a81d1b736019d2271a306c3369e185ea23b6e89456\",\n        \"Propagation\": \"\",\n        \"RW\": true,\n        \"Source\": \"/var/lib/docker/volumes/2522c2fc7c5304591f57d0a81d1b736019d2271a306c3369e185ea23b6e89456/_data\",\n        \"Type\": \"volume\"\n    },\n    {\n        \"Destination\": \"/var/lib/ceph\",\n        \"Mode\": \"\",\n        \"Propagation\": \"rprivate\",\n        \"RW\": true,\n        \"Source\": \"/var/lib/ceph\",\n        \"Type\": \"bind\"\n    }],\n    \"Names\": [\"/ceph-mon-2\"],\n    \"NetworkSettings\": {\n        \"Networks\": {\n            \"host\": {\n                \"Aliases\": null,\n                \"DriverOpts\": null,\n                \"EndpointID\": \"f0221133ddf3f4f8a32e772205c5a7664bd2653964281191e70d540a52f02d8e\",\n                \"Gateway\": \"\",\n                \"GlobalIPv6Address\": \"\",\n                \"GlobalIPv6PrefixLen\": 0,\n                \"IPAMConfig\": null,\n                \"IPAddress\": \"\",\n                \"IPPrefixLen\": 0,\n                \"IPv6Gateway\": \"\",\n                \"Links\": null,\n                \"MacAddress\": \"\",\n                \"NetworkID\": \"1a0609349a9a188eecb0a2f897dde48b38d99fd5f4ddcc2f79b9470407b76c2e\"\n            }\n        }\n    },\n    \"Portainer\": {\n        \"ResourceControl\": {\n            \"Id\": 18,\n            \"ResourceId\": \"85caefb6e89fd43d6e5121fbfca777130e727e37edcd9f189bc5c2ceb7f4520e\",\n            \"SubResourceIds\": null,\n            \"Type\": 1,\n            \"AdministratorsOnly\": true,\n            \"UserAccesses\": [],\n            \"TeamAccesses\": [],\n            \"OwnerId\": 0,\n            \"AccessLevel\": 0\n        }\n    },\n    \"Ports\": [],\n    \"State\": \"running\",\n    \"Status\": \"Up 6 hours\"\n}]\n``. @deviantony New version ofportainer/portainer:pr1048is working. Portainer UI can showdead` containers now.\nCheck my screenshots below:\n\n\n. @deviantony sorry for duplicated requests... @shabbirkagalwala cleanup /home/centos/portainer/data, re-run portainer, then it should works.. ",
    "luisfavila": "Sorry for using this again, but I'm having the same issue. The plugin was not installed in docker tho, but is a system service recognized by docker, which means it appears in docker info but not on docker plugin ls.. +1. ",
    "tbcashy": "Hi @deviantony,\nI\u00b4m using Portainer together with an nginx proxy. I copied the config from http://portainer.readthedocs.io/en/stable/faq.html . This config worked for me until the last Version was released.. @deviantony Yes, but still not working. Get the same error. I completely removed Portainer and recreated the container.\n\nCustom Templates are not in use.. @deviantony I can Access the json file on my server and my Computer. How can I Check if I can access the url from inside the Container?. Docker log excerpt:\n\n2017/06/07 06:44:33 http error: Get http://tools.linuxserver.io/portainer.json:                                                                                                                                                              dial tcp: lookup tools.linuxserver.io on 127.0.0.11:53: read udp 127.0.0.1:33559                                                                                                                                                             ->127.0.0.11:53: read: connection refused (code=500)\n2017/06/07 06:44:37 http error: Get https://raw.githubusercontent.com/portainer/                                                                                                                                                             templates/master/templates.json: dial tcp: lookup raw.githubusercontent.com on 1                                                                                                                                                             27.0.0.11:53: read udp 127.0.0.1:38477->127.0.0.11:53: read: connection refused                                                                                                                                                              (code=500)\n2017/06/07 06:45:36 http error: Get https://raw.githubusercontent.com/portainer/                                                                                                                                                             templates/master/templates.json: dial tcp: lookup raw.githubusercontent.com on 1                                                                                                                                                             27.0.0.11:53: read udp 127.0.0.1:33376->127.0.0.11:53: read: connection refused                                                                                                                                                              (code=500)\n2017/06/07 06:52:16 http error: Get https://raw.githubusercontent.com/portainer/                                                                                                                                                             templates/master/templates.json: dial tcp: lookup raw.githubusercontent.com on 1                                                                                                                                                             27.0.0.11:53: read udp 127.0.0.1:52308->127.0.0.11:53: read: connection refused                                                                                                                                                              (code=500)\n2017/06/07 06:52:18 http error: Get https://raw.githubusercontent.com/portainer/                                                                                                                                                             templates/master/templates.json: dial tcp: lookup raw.githubusercontent.com on 1                                                                                                                                                             27.0.0.11:53: read udp 127.0.0.1:54593->127.0.0.11:53: read: connection refused                                                                                                                                                              (code=500)\n2017/06/07 12:49:53 http error: Get https://raw.githubusercontent.com/portainer/                                                                                                                                                             templates/master/templates.json: dial tcp: lookup raw.githubusercontent.com on 1                                                                                                                                                             27.0.0.11:53: read udp 127.0.0.1:45566->127.0.0.11:53: read: connection refused                                                                                                                                                              (code=500)\n2017/06/07 12:49:54 http error: Get http://tools.linuxserver.io/portainer.json:                                                                                                                                                              dial tcp: lookup tools.linuxserver.io on 127.0.0.11:53: read udp 127.0.0.1:40232                                                                                                                                                             ->127.0.0.11:53: read: connection refused (code=500)\n2017/06/07 14:39:16 http error: Get https://raw.githubusercontent.com/portainer/                                                                                                                                                             templates/master/templates.json: dial tcp: lookup raw.githubusercontent.com on 1                                                                                                                                                             27.0.0.11:53: read udp 127.0.0.1:52639->127.0.0.11:53: read: connection refused                                                                                                                                                              (code=500)\n\nContainer inside Prtainer\u00b4s Network:\n\n/ # apk update\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/x86_64/APKINDEX.tar.gz\nERROR: http://dl-cdn.alpinelinux.org/alpine/v3.6/main: temporary error (try again later)\nWARNING: Ignoring APKINDEX.84815163.tar.gz: No such file or directory\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/x86_64/APKINDEX.tar.gz\nERROR: http://dl-cdn.alpinelinux.org/alpine/v3.6/community: temporary error (try again later)\nWARNING: Ignoring APKINDEX.24d64ab1.tar.gz: No such file or directory\n2 errors; 11 distinct packages available\n/ # apk add ca-certificates\nWARNING: Ignoring APKINDEX.84815163.tar.gz: No such file or directory\nWARNING: Ignoring APKINDEX.24d64ab1.tar.gz: No such file or directory\nERROR: unsatisfiable constraints:\n  ca-certificates (missing):\n    required by: world[ca-certificates]\n/ #\n/ # update-ca-certificates\nsh: update-ca-certificates: not found\n/ # wget https://raw.githubusercontent.com/portainer/templates/master/templates.json\nwget: bad address 'raw.githubusercontent.com'\n/ #\n\nMy Run Command\n docker run -d --name portainer -p 127.0.0.1:9000:9000 -v portainer:/data -v \"/var/run/docker.sock:/var/run/docker.sock\" --net portainer_net --ip 172.18.0.10 portainer/portainer\nI\u00b4ve also tried with -p 9000:9000, but didn\u00b4t work as well.\n. @WTFKr0 Running the Container without a static IP does not solve the issue, but removing --netand --ip does.\nIt has something to do with the docker network or my nginx config. There are multiple containers requesting external ressources successfully over this network.. @WTFKr0 I tried with --dns 8.8.8.8, with no success :/\n@Glowbal It\u00b4s set to false\n\ndocker network inspect portainer_net\n[\n    {\n        \"Name\": \"portainer_net\",\n        \"Id\": \"d9ffa39f0977bc33378828d581f045676e42c1e55554eb978b391b8ffacd212f\",\n        \"Created\": \"2017-03-05T17:25:26.899326159+01:00\",\n        \"Scope\": \"local\",\n        \"Driver\": \"bridge\",\n        \"EnableIPv6\": false,\n        \"IPAM\": {\n            \"Driver\": \"default\",\n            \"Options\": {},\n            \"Config\": [\n                {\n                    \"Subnet\": \"172.18.0.0/16\",\n                    \"Gateway\": \"172.18.0.1\"\n                }\n            ]\n        },\n        \"Internal\": false,\n        \"Attachable\": false,\n        \"Containers\": {\n            \"3f9f4154ee72bd14889ae024da109233a3e244c49a84ef6991a2e4c5ab561c75\": {\n                \"Name\": \"nginx\",\n                \"EndpointID\": \"e55479927159b9718208264472779d9a9dd2a08d0bad19504f64922db68d4bf2\",\n                \"MacAddress\": \"02:42:ac:12:00:03\",\n                \"IPv4Address\": \"172.18.0.3/16\",\n                \"IPv6Address\": \"\"\n            },\n            \"5036dadfddb1dd3cc8b350b438bfb13e3498e155dc10b044a66ed977ec99071d\": {\n                \"Name\": \"registry\",\n                \"EndpointID\": \"085100a8455980c73404453bce80bf17affb2644ad865380e9e730fa0e63c3a1\",\n                \"MacAddress\": \"02:42:ac:12:00:05\",\n                \"IPv4Address\": \"172.18.0.5/16\",\n                \"IPv6Address\": \"\"\n            },\n            \"950b19e8c1786f7e614f9338a9d8cf58144f23592d146318c2573b634d87785a\": {\n                \"Name\": \"Jenkins_2.46.1\",\n                \"EndpointID\": \"aba1a19eb6f0cb77afc7000904fd375c85d04a10ef5732e7b248c2ea80a6b183\",\n                \"MacAddress\": \"02:42:ac:12:00:02\",\n                \"IPv4Address\": \"172.18.0.2/16\",\n                \"IPv6Address\": \"\"\n            },\n            \"e53ee571835a340758800cf72a142a31da7190942eab5126c8e8fbcdf0abfd26\": {\n                \"Name\": \"portainer\",\n                \"EndpointID\": \"ae2726d1312bcdfc1ddf8e66fc82ef1b405bfc5e63b217d2f46775d00b803fa0\",\n                \"MacAddress\": \"02:42:ac:12:00:0a\",\n                \"IPv4Address\": \"172.18.0.10/16\",\n                \"IPv6Address\": \"\"\n            }\n        },\n        \"Options\": {},\n        \"Labels\": {}\n    }\n]\n. @deviantony Yes, it\u00b4s related to the network. With Docker\u00b4s default network it works. I\u00b4ll try to figure out what causes the problem. As I already mentioned there are other Containers requesting external content over this network.. @deviantony Just retried it and it works...don\u00b4t know why ;D Maybe a glitch... Thanks for your help!. \n",
    "JinsYin": "portainer configuration:\n{\"name\": \"opt\", \"value\": \"size=20\"}\n{\"name\": \"opt\", \"value\": \"o=size=20\"}. @deviantony thx, using raxray driver is working.\nbut,\ndevicemapper is docker daemon storage driver, not volume driver. \nusing local driver is not working in overlay,overlay2,devicemapper and aufs.\nhint:\nFailure\nUnable to create volume.  overlay, overlay2 and aufs don't support 'size' option in docker api, but devicemapper  is supported. I haven't tested other options yet.. I pass the following option:\n{ name: size, value: '20' }\n{ name: o=size, value: '20' }\nhttps://docs.docker.com/engine/reference/commandline/volume_create/#driver-specific-options. @deviantony Thanks very much for your patient reply.\nI think the Docker api think of o=xxx of --opt o=xxx=yyy as an option . The o is linux mount option, the o=xxx is docker volume option.\nSo, portainer should also think of o=xxx as an volume option. What do you think?\n. @deviantony I see, thx.. ",
    "BrookofClay": "I had a similar issue when setting up custom templates. \nFor me adding the platform of the template to the JSON def seemed to fix this and my templates appeared without issue.. @deviantony Apologies for the delay in getting back, now is the first chance I've had to test. Can confirm that the fix944 branch fixes this issue perfectly.\nThanks very much for your time on this!. ",
    "neilqin": "in 17.05 docker service create can use --host mysqlhost:10.0.0.2 to add mysqlhost to /etc/hosts\uff0c17.05 is released . ",
    "dbrosy": "I have tested Chrome 53 and had same error \nI have not got to testing portainer without reverse proxy but i did the following:\n\ncreated a generic wordpress container\nTest under chrome 59,  i can stop and start ok\n\nit looks like the custom wordpress containers are causing the issue\n. update:\nI have now tested portainer without nginx proxy and its working. It points to my config for nginx so will review.. ",
    "nobitagamer": "Sound bad but thank you! Hope something news later.. Anyway we can't use network share with Windows Container so i think we should close this issue now since it won't fix in the near future?. ",
    "evgpisarchik": "Thank you for taking a look at this. ",
    "chapterjason": "Would be usefull, idk if there is any insecureness if I activate ssl and open http? The output looks strange...\n\u0015\u0001\ufffd. Would be usefull, idk if there is any insecureness if I activate ssl and open http? The output looks strange...\n\u0015\u0001\ufffd. ",
    "h1dden-da3m0n": "As I would also appreciate if this where a feature, but can't offer a PR due tue my lack of experience with golang and or knowledge of the portainer code base.\nBut something i can provide a link that seems useful (based on my very briefe research): https://github.com/a-h/hsts\nAnyway great project and hope this ssl-situation could get \"fixed\"/improved upon, since any http request results some random, uninterpretable response once its set up (like @chapterjason already stated).. ",
    "Santana1053": "+1 for this feature. ",
    "waspinator": "this would be more useful for volumes. \nhttps://docs.docker.com/engine/tutorials/dockervolumes/#backup-restore-or-migrate-data-volumes. ",
    "christianromeni": "Actually, an option to import/export will especially help on windows. Since the volumes are running in a vm and are not accessible from outside a container.. Actually, an option to import/export will especially help on windows. Since the volumes are running in a vm and are not accessible from outside a container.. ",
    "alexanderadam": "As my question is more or less related to this issue:\nIs there at the moment something persisted at all or reread every time?\nI would already be lucky if I could dump/export the configuration (ENV vars, mount points etc) manually via CLI/Docker/or similar. I guess that something should be available via Docker already but I am unable to find anything (maybe I wasn't very good at searching)!?. @deviantony ~~is it possible to recreate containers automatically or apply the JSON output somehow?~~ nevermind. Found something.. yes I have. It works flawlessly for me but doesn't solve my problem. A proper export and import for offsite backups would be perfect. Now I have something but I'm still open for better solutions. \ud83d\ude09 . Ah, it is what I had in mind. Thank you \ud83d\udc4d . I also think that the ID still makes sense. So I wouldn't want it to be replaced and I rather want to have the name shown additionally.. ",
    "strawgate": "We primarily use Docker in airgapped environments and would love to be able to import updated images via the Portainer UI. @1138-4EB we prefer not to give access to the console on the host and instead allow customers management access only through portainer so giving them the ability to load images would let them upgrade services without access to the underlying host and without requiring access to a registry.\nThanks for the note on multiple images, that will make it easier for us in the mean time!. If we use the --template-file flag it only imports once, it doesn't import on every startup whereas using --templates imports every time. Using --template-file results in: Templates already registered inside the database. Skipping template import\nI guess we dont really care about disabling template management -- i just figured that those went hand-in hand. If you're enforcing the templates from an external resource that template management was disabled.\n. So currently we use the Portainer/Portainer image as our base image. The idea would be to add templates.json to the base image itself and have Portainer use that (and only that) for templates. Then when we update the templates in the base image and then upgrade our portainer instances, they would have the new templates available.\nWe currently achieve this behavior by hosting a web server container next to portainer that solely hosts templates.json. This allows us to bring in the templates and enforce the template definitions.. Related https://github.com/portainer/portainer/issues/2174. Have you guys considered disputing/rejecting this CVE with the National Vulnerability Database? This doesn't seem to qualify as a report-able CVE.\nWhere are the CVEs for open S3 buckets, MongoDBs and Elasticsearch instances?. Looks like the issue was introduced here: https://github.com/portainer/portainer/pull/2253 as part of offline endpoints:\n```\n  function checkEndpointStatus(endpoint) {\n    var deferred = $q.defer();\n var status = 1;\nSystemService.ping(endpoint.Id)\n.then(function sucess() {\n  status = 1;\n}).catch(function error() {\n  status = 2;\n}).finally(function () {\n  if (endpoint.Status === status) {\n    deferred.resolve(endpoint);\n    return deferred.promise;\n  }\n\n   EndpointService.updateEndpoint(endpoint.Id, { Status: status })\n  .then(function sucess() {\n    deferred.resolve(endpoint);\n  }).catch(function error(err) {\n    deferred.reject({msg: 'Unable to update endpoint status', err: err});\n  });\n});\n\n return deferred.promise;\n\n}\n```\nI'm not familiar with this code but it looks like this is trying to update the status of the endpoint but doesnt check first to see if endpoint management is disabled. So the workaround would be to re-enable snapshots?. I am receiving the following error when trying to open the endpoint in Portainer using that docker image:\nVM366 app.716391c4.js:29 TypeError: Cannot read property '0' of null\n    at Object.l.updateEndpointState (VM366 app.716391c4.js:57)\n    at VM366 app.716391c4.js:57\n    at h (VM366 app.716391c4.js:29)\n    at VM366 app.716391c4.js:29\n    at o.$eval (VM366 app.716391c4.js:30)\n    at o.$digest (VM366 app.716391c4.js:30)\n    at o.$apply (VM366 app.716391c4.js:30)\n    at HTMLDivElement.<anonymous> (VM366 app.716391c4.js:32)\n    at HTMLDivElement.dispatch (VM366 app.716391c4.js:3)\n    at HTMLDivElement.q.handle (VM366 app.716391c4.js:3)\nI am also noticing that on fresh install after creating the admin user I am taken to the initialize endpoint screen to pick local/remove/azure/etc but i cant do anything because endpoint management is disabled. It looks like when using Endpoint Management the endpoint doesnt appear for a minute or more.. Perhaps the bug is related to it being a fresh install and a snapshot has not yet occurred?\nIf I click on the endpoint, I get that error above but if I click refresh first then it works.... Yes -- fresh install using this flag. ",
    "acosonic": "Ability to export/import and/or move docker image across portainer managed servers...\n+1. How about using some interactive upload function. File upload with progress bar indicator... Since portainer is done in go language, here is example...\nhttps://socketloop.com/tutorials/golang-upload-receive-file-progress-indicator. ",
    "BelgarionNL": "would really like a way for me to backup pretty much every container settings in portainer than load that config on a new machine and be up and running.\n. ",
    "matthew-hickok": "The ability to upload images would be absolutely amazing. While Portainer has the ability to pull images from a repository, we often are in a deployment scenario where the Docker host does not have the ability to talk to any registries due to security requirements. In these scenarios we need to manually upload images to the host. Being able to do this via Portainer would make the tool infinitely more useful to us!. +1. ",
    "AlexGreg": "hello. is it possible to have these features even on the APIs?. ",
    "bmxmale": "@deviantony Here should be also listed eth1 interface which is visible on last screen with IP 172.19.0.7. This is \"bridge\" network.. @deviantony here is inspect\n[\n    {\n        \"Id\": \"44ec4ea23213593606e3d2fcae76497619d25fcb390dc910283b04fb38d2f14c\",\n        \"Created\": \"2017-06-21T07:17:44.810165296Z\",\n        \"Path\": \"/bin/bash\",\n        \"Args\": [\n            \"-c\",\n            \"envsubst '$MAGE_ROOT $MAGE_DOMAIN $MAGE_MODE' < /etc/nginx/conf.d/magento.template > /etc/nginx/conf.d/magento.conf && nginx -g 'daemon off;'\"\n        ],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 2206,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2017-06-21T07:17:48.692070313Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:18589b66e02255a4c2c6cd2614f1137a5f100e23a523696e8b41b1177c3e9bfb\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/44ec4ea23213593606e3d2fcae76497619d25fcb390dc910283b04fb38d2f14c/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/44ec4ea23213593606e3d2fcae76497619d25fcb390dc910283b04fb38d2f14c/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/44ec4ea23213593606e3d2fcae76497619d25fcb390dc910283b04fb38d2f14c/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/44ec4ea23213593606e3d2fcae76497619d25fcb390dc910283b04fb38d2f14c/44ec4ea23213593606e3d2fcae76497619d25fcb390dc910283b04fb38d2f14c-json.log\",\n        \"Name\": \"/MAGENTO2_nginx.1.ai2axn1b8g1wsl3940qamt9x3\",\n        \"RestartCount\": 0,\n        \"Driver\": \"aufs\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {},\n            \"RestartPolicy\": {\n                \"Name\": \"\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"Dns\": null,\n            \"DnsOptions\": null,\n            \"DnsSearch\": null,\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": null,\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": null,\n            \"DiskQuota\": 0,\n            \"KernelMemory\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": -1,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": 0,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"Mounts\": [\n                {\n                    \"Type\": \"bind\",\n                    \"Source\": \"/magento2/bm.env.magento2/docker/conf/nginx/ssl\",\n                    \"Target\": \"/etc/nginx/ssl\"\n                },\n                {\n                    \"Type\": \"bind\",\n                    \"Source\": \"/magento2/bm.env.magento2/docker/conf/nginx/magento.conf\",\n                    \"Target\": \"/etc/nginx/conf.d/magento.template\"\n                },\n                {\n                    \"Type\": \"bind\",\n                    \"Source\": \"/magento2/bm.magento2\",\n                    \"Target\": \"/srv/magento2\"\n                }\n            ]\n        },\n        \"GraphDriver\": {\n            \"Name\": \"aufs\",\n            \"Data\": null\n        },\n        \"Mounts\": [\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/magento2/bm.env.magento2/docker/conf/nginx/magento.conf\",\n                \"Destination\": \"/etc/nginx/conf.d/magento.template\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            },\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/magento2/bm.magento2\",\n                \"Destination\": \"/srv/magento2\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            },\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/magento2/bm.env.magento2/docker/conf/nginx/ssl\",\n                \"Destination\": \"/etc/nginx/ssl\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            }\n        ],\n        \"Config\": {\n            \"Hostname\": \"44ec4ea23213\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"443/tcp\": {},\n                \"80/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"MAGE_DOMAIN=shop.udviklet.dk\",\n                \"MAGE_MODE=developer\",\n                \"MAGE_ROOT=/srv/magento2\",\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"NGINX_VERSION=1.12.0-1~stretch\",\n                \"NJS_VERSION=1.12.0.0.1.10-1~stretch\"\n            ],\n            \"Cmd\": [\n                \"/bin/bash\",\n                \"-c\",\n                \"envsubst '$MAGE_ROOT $MAGE_DOMAIN $MAGE_MODE' < /etc/nginx/conf.d/magento.template > /etc/nginx/conf.d/magento.conf && nginx -g 'daemon off;'\"\n            ],\n            \"Image\": \"magento2-nginx:latest\",\n            \"Volumes\": {\n                \"/etc/nginx/conf.d/magento.template\": {},\n                \"/etc/nginx/ssl\": {}\n            },\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": null,\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"com.docker.compose.config-hash\": \"46a0bbf82e357426353aa81fde5e9b7cfd369e8d29bd87b6532a8ee073bb6601\",\n                \"com.docker.compose.container-number\": \"1\",\n                \"com.docker.compose.oneoff\": \"False\",\n                \"com.docker.compose.project\": \"bmenvmagento2\",\n                \"com.docker.compose.service\": \"nginx\",\n                \"com.docker.compose.version\": \"1.8.1\",\n                \"com.docker.stack.namespace\": \"MAGENTO2\",\n                \"com.docker.swarm.node.id\": \"tej73l56z72nd79va2g4iy4vt\",\n                \"com.docker.swarm.service.id\": \"0eu09xapvnmzx0wvagloqkngp\",\n                \"com.docker.swarm.service.name\": \"MAGENTO2_nginx\",\n                \"com.docker.swarm.task\": \"\",\n                \"com.docker.swarm.task.id\": \"ai2axn1b8g1wsl3940qamt9x3\",\n                \"com.docker.swarm.task.name\": \"MAGENTO2_nginx.1.ai2axn1b8g1wsl3940qamt9x3\"\n            },\n            \"StopSignal\": \"SIGQUIT\"\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"7ef93af1fca4534a5a5c13c0dcc73d0e8b1202bdce1a842bee26dbcb97768f52\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"443/tcp\": null,\n                \"80/tcp\": null\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/7ef93af1fca4\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"\",\n            \"Gateway\": \"\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"\",\n            \"IPPrefixLen\": 0,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"\",\n            \"Networks\": {\n                \"mage-net\": {\n                    \"IPAMConfig\": {\n                        \"IPv4Address\": \"172.10.0.9\"\n                    },\n                    \"Links\": null,\n                    \"Aliases\": [\n                        \"44ec4ea23213\"\n                    ],\n                    \"NetworkID\": \"xscl5m3pi6c5m23rk9bcjdu7u\",\n                    \"EndpointID\": \"77832c84e64ce10bcff76cdc5051c9c074d7d36e86ac0028aa01d6bdd13add2b\",\n                    \"Gateway\": \"\",\n                    \"IPAddress\": \"172.10.0.9\",\n                    \"IPPrefixLen\": 24,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:0a:00:09\"\n                }\n            }\n        }\n    }\n]\nAnd ip addr from this service\ndocker exec -it MAGENTO2_nginx.1.ai2axn1b8g1wsl3940qamt9x3 ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host \n       valid_lft forever preferred_lft forever\n1141: eth0@if1142: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1450 qdisc noqueue state UP group default \n    link/ether 02:42:ac:0a:00:09 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 172.10.0.9/24 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet 172.10.0.8/32 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:acff:fe0a:9/64 scope link \n       valid_lft forever preferred_lft forever\n1143: eth1@if1144: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default \n    link/ether 02:42:ac:13:00:07 brd ff:ff:ff:ff:ff:ff link-netnsid 1\n    inet 172.19.0.7/16 scope global eth1\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:acff:fe13:7/64 scope link \n       valid_lft forever preferred_lft forever. @deviantony This service is only available from local  on 172.19.0.7, \nmage-net work only between other services.\nThis was created based on compose v3 using docker stack up -C command.. ",
    "ushuz": "For reference, kubernetes-dashboard basic metrics UI is very intuitive\n\n. ",
    "dennis0721": "hello, i've used poratiner in our production env, after using it, i hope portainer can add an \"auto scaling\" function based on monitoring, eg: scale up/down the num of service, or increase/decrease the RAM/CPU dynamically\uff08based on the  rest resources of physical machine and the current resources of services and contaiers\uff09, thank you. Thank you @deviantony , but i only hava one master server in my swarm cluster, and i can deploy images and access those services, this is unreasonable. yes, i can @deviantony . @deviantony yes. @deviantony i can pull image manually in the worker node shell by \"docker login\" and \"docker pull\". ",
    "markk12": "yes also for me they are the parts missing but if you are implementing it ... dont use many servers /containers for doing a so simple thing.   . ",
    "kusold": "For anyone looking to monitor container states:\nOverride your docker unit file to enable metrics.\n```\ncat /etc/systemd/system/docker.service.d/override.conf\n[Service]\nExecStart=\nExecStart=/usr/bin/dockerd -H fd:// --metrics-addr 0.0.0.0:9323 --experimental\n```\n```\ncurl --silent http://localhost:9323/metrics|grep engine_daemon_container_states_containers\nHELP engine_daemon_container_states_containers The count of containers in various states\nTYPE engine_daemon_container_states_containers gauge\nengine_daemon_container_states_containers{state=\"paused\"} 0\nengine_daemon_container_states_containers{state=\"running\"} 10\nengine_daemon_container_states_containers{state=\"stopped\"} 0\n``\nIf you can, it's probably better to bind them metrics address to127.0.0.1`, but that depends on your setup.\nReferences:\n https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-metrics\n https://success.docker.com/article/using-systemd-to-control-the-docker-daemon. ",
    "mh720": "Hi, I work on a Docker stack https://github.com/swarmstack/swarmstack very similar to what Thomas discussed earlier in this thread (and recently replaced swarmpit with Portainer). My argument is that Portainer should do one thing (all things containers) and do it well, and not lose development cycles trying to recreate wheels and add monitoring and alerting features, as these aren't core to Portainer's function. Instead, I would argue that any development cycles should be put into exposing the internal metrics of Portainer in a way that other applications can use them. \nNetData and Prometheus are two examples of things that could consume Portainer metrics if exposed. I don't  believe there is that much in the way of metrics that Portainer might need to keep track of, likely just things like logins/interval, authentication failures/interval, container/image/registry change actions, webhooks/interval, and basic user activity tracking possibly (which UIs and APIs got the most use). Let other tools that have already dealt with the problems of collecting, storing, and rating metrics do the job, and just expose what needs to be exposed so that people can make dashboards around the metrics they find useful. Prometheus provides a decent format for presenting the metrics for collection (and Docker made this their built-in default), but it's up to Portainer folks to determine what works for them, and existing collection tools have facilities to deal with those choices.  Awesome tool, and this is just my 2 cents.. ",
    "HeyerPlane": "@deviantony Is this working in 1.14.0? I have that installed and its failing exactly as @BrookofClay described. Any suggestions? . ",
    "masalinas": "I discovered the problem I had an old docker version without the volume command, so I upgrated to the last docker version and the problem was resolved.\nRegards. I discovered the problem I had an old docker version without the volume command, so I upgrated to the last docker version and the problem was resolved.\nRegards. ",
    "luluming": "Source package compile prompt; \"github.com/portainer/portainer\" can not find this directory, but how is it? What should I do?. The latest version of portainer doesn't control the user's permissions. I want to disable the delete function,. Prevent operator error removal, so I want to disable the remove function in the source code later, compiled into binary, in the source code compiled can not compile.main.go:4:2: cannot find package \"github.com/portainer/portainer\" in any of:\n    E:\\Go\\src\\github.com\\portainer\\portainer (from $GOROOT)\n    E:\\projectpath\\src\\github.com\\portainer\\portainer (from $GOPATH)\nmain.go:5:2: cannot find package \"github.com/portainer/portainer/bolt\" in any of:\n    E:\\Go\\src\\github.com\\portainer\\portainer\\bolt (from $GOROOT)\n    E:\\projectpath\\src\\github.com\\portainer\\portainer\\bolt (from $GOPATH)\nmain.go:6:2: cannot find package \"github.com/portainer/portainer/cli\" in any of:\n    E:\\Go\\src\\github.com\\portainer\\portainer\\cli (from $GOROOT)\n    E:\\projectpath\\src\\github.com\\portainer\\portainer\\cli (from $GOPATH)\nmain.go:7:2: cannot find package \"github.com/portainer/portainer/cron\" in any of:\n    E:\\Go\\src\\github.com\\portainer\\portainer\\cron (from $GOROOT)\n    E:\\projectpath\\src\\github.com\\portainer\\portainer\\cron (from $GOPATH)\nmain.go:8:2: cannot find package \"github.com/portainer/portainer/crypto\" in any of:\n    E:\\Go\\src\\github.com\\portainer\\portainer\\crypto (from $GOROOT)\n    E:\\projectpath\\src\\github.com\\portainer\\portainer\\crypto (from $GOPATH)\nmain.go:9:2: cannot find package \"github.com/portainer/portainer/file\" in any of:\n    E:\\Go\\src\\github.com\\portainer\\portainer\\file (from $GOROOT)\n    E:\\projectpath\\src\\github.com\\portainer\\portainer\\file (from $GOPATH)\nmain.go:10:2: cannot find package \"github.com/portainer/portainer/http\" in any of:\n    E:\\Go\\src\\github.com\\portainer\\portainer\\http (from $GOROOT)\n    E:\\projectpath\\src\\github.com\\portainer\\portainer\\http (from $GOPATH)\nmain.go:11:2: cannot find package \"github.com/portainer/portainer/jwt\" in any of:\n    E:\\Go\\src\\github.com\\portainer\\portainer\\jwt (from $GOROOT)\n    E:\\projectpath\\src\\github.com\\portainer\\portainer\\jwt (from $GOPATH)\n\u9519\u8bef: \u8fdb\u7a0b\u9000\u51fa\u4ee3\u7801 1.. Thank you. ",
    "freerobby": "@ncresswell Thanks! That addresses my concerns here.. ",
    "Alexroge": "docker run -d -p 9000:9000 --name port -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nAnd yes, i use the quickstart. Same problem with --priviliged flag\nNo i'm use Chrome.\nAnd when i enter my passwd, i have a \"JWT token\" problem. Portainer version: latest\nDocker version: 1.6.2\nPlatform: linux\nCommand: docker run -d -p 9000:9000 --name port -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nSwarm: No\nBrowser: Chrome\n. Found ! I reinstall docker wirh docker engine and not docker.io. ",
    "lioolli": "@deviantony I just pushed a commit to reflect your comment.. ",
    "MwC-Trexx": "Your solution is close, but due to the length of the path it is truncating things to where they aren't usable.\nAll my volumes show the exact same thing:\n/share/CACHEDEV1_DATA/Container/container-station...\nA possible solution might be a \"hover over\" that shows full path length.  Another option might be showing say Left (25)  + \"...\" + right (25).  That way you get the initial path and the final path.\n. I would assume you would include some logic that if path length <= 50, just list full path, if >50 then use the left/right split.\n. Looks good.\n. In Safari debug - I get a 404 Page Not Found error.  I believe QNAP's web interface is Apache front-ended though.\n. Still seeing the issue on Develop branch 1.13.6.\n. \n. \nHere you go.. \nAs requested. Images works (kinda).   Now not showing running container, all images, etc.  Acting like it isn\u2019t reading volumes as I had setting a persistent volume for config info/etc.   That also pointed to the var.sock location.\n. The PR1067 release fixed the can\u2019t read images issues, but now it is only showing Portainer\u2019s container & image, doesn\u2019t show my other running container (TVHeadend), any other images (there were several), volumes, etc..   So it fixed the one issue but seems to have broke several other things.  \nBased on it\u2019s behavior, it acted like it wasn\u2019t picking up volumes (including the .sock location) being passed into it from the docker run -v commands.\n. Never mind.... I had my browser pointing at my TEST NAS instance (was connecting by ip), but my SSH was pointing at my prod nas.  Rechecked with browser pointing to RIGHT NAS and now all appears to be working properly.  . ",
    "valentin2105": "Here is it :\n\n\nView of a specific network :\nSubnet -- (Need) Subnet v6\n\n\nView of a specific container : \nConnected network : IP Address -- (Need) IPv6 Address\n\n\nContainer List:\nMaybe add a collumn IPv6 only if IPv6 is enabled on the docker host ?\n\n\nNetwork list :\nIPAM Subnet -- (Need) IPAM v6 \n\n\nThanks !. Thanks @deviantony  I will take a look on the code, but can't promise a PR \ud83e\udd23 . ",
    "1again": "yes, you are right!\ni'm so sorry my question formulation\nand i not found #777 with 'bind' word before. the result like this\ntemplate json:\n\nportainer web\n\n. all right! . thanks reply,\ni think if i don't know the container have what command can execute.\nif the template can tell the container console, that maybe great!\nps: it's use for some Nontechnical personnel. ",
    "xezpeleta": "Great job!\nIMHO the UI it's very intuitive. Moreover, this wip is already quite functional!\nThanks!. ",
    "drakmirv": "Very nice and clean.  Really helps with my use case, since I deploy everything using docker compose. . ",
    "Budwise": "Constraining to v2 docker-compose eliminates the possibility of using stacks on Windows.  The version of docker doesn't support compose v2.  Is there any possibility to use v3?\nERROR: client version 1.22 is too old. Minimum supported API version is 1.24, please upgrade your client to a newer version\n. It seems v2.1 works on Windows, does that have the same libcompose dependency?. docker-compose files version 2.1\nIf set to 2.1 as the 'version' it does work for Windows Server 2016, just not version 2 or below.. @deviantony This is when using just the command line on the Windows host, not Portainer.  Within the Portainer experimental feature it doesn't allow anything above version 2 in the docker-compose file.\nIn summary:\nIf this Portainer feature could be made to use docker-compose version 2.1 files at minimum, then Windows hosts will accept it and not error out saying you're using too old of a version of docker-compose.\nWhatever version is the highest you can get up to without running into that libcompose issue would be fantastic.  If its not possible, I understand. . Sure, here you go.  CPU has some data points, but I'd expect them to at least hover around 1% but it stays at 0.0.  Memory just shows no data.\n\nAnd here im putting a load on the CPU as shown in docker stats but still 0.0 in Poratiner.\n\n. ",
    "erick-sa": "Maybe is a good option to apply the permission by a specific label created in container. Something like this: \"io.portainer.container.ownership\" and \"io.portainer.container.authorized-teams\".\nAnd when running ''docker run'' or ''docker-compose\" the container will be created with the wished permission.\nIf the label value of \"ownership\" is public or administrator, the label value of \"authorized-teams\" will be ignored.\nBut if the label value of \"ownership\" is restricted, the label \"authorized-teams\" will be applied.\nThe groups selected in the \"authorized-teams\" may be separated with commas, like this: group01,group02,group03.\nIt will be very pratic and avoid the re-re-re-configuration.\nAnd the idea of @ricardona is good too. For some people the default access \"public\" is often useful. The options \"administrator\" or \"public\" would be enough.\nCheers and thank you!. ",
    "talisto": "I do have SELinux enabled, but docker-ce installs a package called container-selinux which loads applicable policies for docker.  The audit log doesn't show any issues with SELinux, and I still see the same issue even if I set SELinux to permissive.  I don't think it's an SELinux issue.\nPortainer can definitely see all my volumes, because they show up in the volume list when I click \"Volumes\" in the sidebar.  They're just not being labeled correctly in the drop-down list in the Services section.\nI think this is just a bug in the view rendering.  . Thanks for the quick fix!!. ",
    "hamamo": "I think I found the bug. The problem occurs when the line is 9 or 12 characters long (10 or 13 including the final \\n). Lines are prefixed with an 8-byte line length. When the last byte of the length is 10 or 13, it gets mistaken as a line end character by the code data = data.replace(/\\n(.{8})/g, '\\n'); in app/components/containerLogs/containerLogsController.js.\nWhen timestamps are included, the line length is 31 bytes longer, so the problem would reappear when actual lines are about 235 characters long, making the least significant byte of the length 10 again.. ",
    "frimdo": "I just found out that using a portainer/portainer image as baseimage is sufficient for me. \nTo your answer: I read this manual, and this only tells how to build app on host (or inside a container). What I was asking is, if I can use the Dockerfile. \nAnyway my issue is solved, so you can close if you want.... ",
    "caseycs": "Just read contribution guidelines, let me propose this fix in a proper way.. Just read contribution guidelines, let me propose this fix in a proper way.. ",
    "atifsaddique211f": "To avoid spam there should be option to configure the event notifications. Like I should be able to configure/filter that for which type of events I should receive emails/notifications.\nMost of the time I would be interested in failure events, like when the docker container failed to start.\nI am a FullStack developer with expertise in Angular2/JS, Spring, Grails, Go-CD, Docker, Docker Compose. I can help you guys implement this feature if you want.. In that case, we will provide an option to enable or disable polling for events.\nIf user wants to get notifications of events then he must enable the polling of events, in which case we will poll/check/fetch(in async fashion) events after few interval of time\nand yes it relates to #943 . ",
    "puilp0502": "That's strange. I don't have that problem with the same configuration... \nI'm running Portainer 1.13.4 with certbot 1.16.\nHere is my configuration:\nbash\ndocker run -d -p 9000:9000 \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    -v /root/portainer/data:/data \\\n    -v /etc/letsencrypt/live/<redacted>:/certs/live/<redacted>:ro \\\n    -v /etc/letsencrypt/archive/<redacted>:/certs/archive/<redacted>:ro \\\n    --name portainer \\\n    portainer/portainer:1.13.4 --ssl --sslcert /certs/live/<redacted>/cert.pem --sslkey /certs/live/<redacted>/privkey.pem. ",
    "jskii": "I must have been doing this wrong, as I've confirmed twice now as new let's encrypt certs are generated this DOES work fine. Thanks for looking, sorry for the error.. ",
    "schiegg": "@jskii Did you take any other not mentioned steps to fix this? \nI have the same problem right now. After renaming the file endings with cp, it works fine.\nI just pulled Docker and Portainer yesterday from :latest on new installed Ubuntu 16.04 minimal.. Looks like @jskii is not available any more...\n@deviantony Can you confirm @Lukeluha assumption that its a problem since version 1.15.0?  I think more people would have this issue then... If you need any tests done on my host, feel free to ask me ;)\n@Lukeluha Did you change anything else on your system rather than updating to the new version?. @dmhendricks I tried @puilp0502's example but it didn't work either.\nIn the meantime I changed my setup to an nginx-proxy with letsencrypt-companion to encrypt the connection to portainer.\nMentioning this issue in the docs is a good idea, would appreciate that.. ",
    "Lukeluha": "@schiegg Same issue here with version 1.15.0. In 1.14.3 no problem.. @schiegg No, I haven't done any changes. First I've tried it with version 1.15.0, SSL is not working. I've changed the tag to 1.14.3 in my compose file and after that everything works fine. When I've changed it back to 1.15.0, SSL has stopped working until I renamed files.. ",
    "dmhendricks": "I was having the same issue until I used @puilp0502's example.\nIt might be something to note in the SSL section of the docs.\nThank you.. ",
    "tonyhardcode": "So I am running into this same issue on 1.20.1\nOnce I rename the .pem files to .crt portainer runs normally. Can we get this issue fixed?. ",
    "artheus": "@Glowbal @deviantony What is this issue exactly? As far as I can see, config has been implemented and released in stable\nThis issue confused me into thinking that docker configs, for now, only works in docker on single hosts (not in Swarm mode). But it seems to work very good in swarm mode.. ",
    "zhaoyao91": "So what's the status of this issue? Will portainer support swarm config introduced by Docker 17.06?. For our usage, each endpoint is a different cluster and environment. So you suggest I start dedicated portainer for each cluster?. Prefix stack name is not a good workaround since each component should not know that it's in some environment. I will use different portainer instances to hold on for some time. Look forward to good news :). Yeah, I gave the cli a try, it also tried to update all services. The problem is, the speed. When I login one manager machine and type docker stack deploy --with-registry-auth, 20+ services are updated so quickly, but when I use portainer, only 3 services are updated per minute.. @deviantony Yeah, I have just tried this, it seemed no problem, 20+ services were updated within seconds.. @deviantony I have one private registry, and almost all services in the stack use it.. well, my fault, I should have noticed it. thanks.. @rahulruikar \nHi, I thought you chose a special case where the log message itself contains a timestamp. But this is not true for other apps, where the log message may only contain content. So if you ignore the -t option, you don't know when it happened.. @deviantony well, this is inspiring, i'll try it. It really should be noted in the doc.. I have updated the stack to \n```\nversion: '3'\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - \"9001:9001\"\n    networks:\n      - portainer_agent\n    deploy:\n      mode: global\nnetworks:\n  portainer_agent:\n    driver: overlay\n```\nBut also the same errors occured. There are a lot of logs like these:\n\nI found all agent containers joined 2 network: \n- the portainer-agent_portainer_agent overlay network defined in the stack\n- the ingress overlay network\nand the ips showed in the logs are all ingress network ips.. @deviantony it works like a charm! Thanks. Well, thanks. I have read it /p\u0254:'tein\u0259/ to mimic container for a long time.. well, it's clear of the shape port tainer, the problem is where to put the stress, port tainer or  port tainer. Same problem here. Is there any solution or workaround about this issue? Thanks!. ",
    "nicolasgere": "@thojkooi if you need help, i want this feature :-). ",
    "SUJER": "hi \ncan you please add stack button where we could find the stacks deployed in the docker host.. unable to join portainer slack channel too, getting an error when entering the email.. chrome Version 59.0.3071.115,  we are running out portainer instance behind the Amazon alb . ",
    "evvvivek": "I am still having the issue, our portainer is setup behind ALB, can you please suggest how to configure websocket in ALB for portainer.. ",
    "Foxi352": "I have the same problem but on a different setup:\n Client: MacOS High Sierra, Firefox Quantum 59.0.2 64bit for developpers\n Server: ESXi 6.5 with Photon OS 2.0 VM running Docker 17.06.0-ce\n* Portainer 1.16.4 behind nginx 1.13.8 reverse proxy running on docker host. \nnginx config should be right according to your link above. Without the specific websocket config it does't work at all. The symptoms are the same. As long as i work inside the console all is fine. When i move to some other app and come back into the console the cursor is still blinking, but the console does not react. Disconnecting and reconnecting makes it working again.\nFor the records, here my nginx config file:\n```\nserver {\n    listen 80;\n    server_name  ;\n    location / {\n            proxy_pass http://127.0.0.1:8089/;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n    }\nlocation /api/websocket/ {\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_http_version 1.1;\n        proxy_pass http://127.0.0.1:8089/api/websocket/;\n}\n\n}\n```\n. Some additional info i found digging deeper to find the problem:\nAs you see in my original screenshot portainer shows all vsphere driver volumes as unused.\nNow when i look into the details of one of the running services (using one of the volumes) i can see the volume is used:\n\nNow when  i click on the volume name, starting from the above window, i get into the volume details and see the container using it:\n\nNotice the mount point is /mnt/vmdk/influxdb_node01 here. When i go directly via the volumes tab of  the portainer menu i see the volume 3 times, once for each node. But all as unused:\n\nNow when i click on each of the 3 volume lines to get into the details i can't see the container using it and there is no no volume options area. All i see is the screenshot below. Nothing comes under these lines:\n\nBut notice the difference in the mount point here: /mnt/vmdk/influxdb_node01@PRODUCTION. PRODUCTION is the name of my vSphere Datastore where the volume is stored. So maybe that's where portainer get's confused ...\nIMHO it would be better to show each volume only once and not separately for each node. Someone having 20 nodes and 50 volumes would see 1000 lines for these 50 volumes ..... Just tried this on a Debian 8 Container (mongodb from docker hub):\nBefore paste:\n\nAfter paste of:\nMandrillMailer.new(p, { template_slug: \u201cxxxxxxxxxx-url-test\u201d, email: \u201ctest@test.com\u201d, tags: [\u201cxxxxxxxxxxx-url-test\u201d], locale: \u201cen\u201d, recipient_id: p.id, recipient_type: \u201cProvider\u201d}).send_message\n\n. ",
    "mageddo": "Thank you @Codelica , proxy_read_timeout is the answer. It would be great, anyway I put 1 hour timeout, it will only close the connection if I stop use terminal for that time then I think it's great also.\n. ",
    "dnadave": "That would work for me.  I can see where this might be easier for you to\nimplement and gets us the same functionality.\nOn Fri, Jul 7, 2017, 11:37 PM Anthony Lapenna notifications@github.com\nwrote:\n\nI already have interest in something similar. But instead of using version\nhere, I'm thinking that the image field should be updated to an array...\nE.g. support something like image: ['nginx:latest', 'nginx:alpine']. UI\nwould default to the first entry and when multiple images are found a\ndropdown would be displayed to be able to select it.\nWhat do you think?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/999#issuecomment-313838183,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABNSm4OFWJJnrZl5k9_1NYzWhMsgNgO_ks5sLyOqgaJpZM4ORe5n\n.\n. That would work for me.  I can see where this might be easier for you to\nimplement and gets us the same functionality.\n\nOn Fri, Jul 7, 2017, 11:37 PM Anthony Lapenna notifications@github.com\nwrote:\n\nI already have interest in something similar. But instead of using version\nhere, I'm thinking that the image field should be updated to an array...\nE.g. support something like image: ['nginx:latest', 'nginx:alpine']. UI\nwould default to the first entry and when multiple images are found a\ndropdown would be displayed to be able to select it.\nWhat do you think?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/999#issuecomment-313838183,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABNSm4OFWJJnrZl5k9_1NYzWhMsgNgO_ks5sLyOqgaJpZM4ORe5n\n.\n. \n",
    "qq273681448": "@ncresswell \nI understand, thank you very much!. ",
    "disha-wani": "@1138-4EB  I'm using command prompt. ",
    "helli0n": "@deviantony I use swarm as Endpoints. ",
    "richardbrinkman": "Other way to implement this is to provide a \"Binds\" tab similar to the \"Volumes\" tab. In this \"Binds\" tab you can then create possible host binds and authorize users/teams to access them (or subdirs thereof).\nThe add-services and add-containers pages should only allow the bind mount if the user/team has sufficient rights.. ",
    "tarach": "Great. Can I participate or monitor those privileges feature? I currently need to give a few developers access to logs, restarts and rebuilds for some containers. \nFound Portainer just today. Great job. I love it. :+1: . ",
    "swiftusa": "@deviantony: Awesome +1 vote and +7 vote from my team. :)\n\nAlso it would be great if the user is limited only to certain menu functions. For example while adding a user if I only check \"Containers\" the user will not find any other menu options on the left to fidget around. \nThis is necessary because, I run a web hosting company and I am providing docker based shared web hosting solution. At this point I am managing all containers myself, because the users have access to other menu options once they login. \nI do not know how this will be useful for other Business models. It is just my thought, to improve this outstanding lightweight product :) \ud83d\udc4d. My apologies if this was a duplicate :(\nI think the discussion in the below link seems to be similar\nhttps://github.com/portainer/portainer/issues/1073. >What is the business reason for this?\nThis is just like the docker hub's public and private images. If I have an application that is heavily modded and I don't want other users to deploy my template I can hide it from other users.\n\n\nHow do you consider an admin image?\nAs in the 3rd option, admin can choose to hide any image from user's view.\nWhat if multiple developers are managing containers on the same host and they both want to deploy an nginx image?\nAs in the 3rd option, if the admin does not hide any one can access the image.\n- - - - -. \n",
    "cgoeller": "I tested portainer/portainer:pr1048 and can also confirm that the dead container is still shown as running.\nThe steps to reproduce the dead container from @jack6liu do not work in my environment.\nI luckily found a dead container on one of my systems. It's a RHEL system with devicemapper/direct-lvm.\n. It works. Thanks a lot!. Hi deviantony,\nit works only if the current working directory is /opt/portainer and if it is started like this:\n# ./portainer --no-auth -H unix:///var/run/docker.sock --assets .. @deviantony \nI just tested the provided implementation on Linux64. It works as expected.\nNo assets parameter was specified. The working directory does not matter anymore.\nThank you very much for your great work. \ud83d\udc4d \n. ",
    "simonbuehler": "\nstill have this issue with containers showing up .... its running on a gentoo host:\n```\n docker version\nClient:\n Version:       17.12.1-ce\n API version:   1.35\n Go version:    go1.10.1\n Git commit:    7390fc6\n Built: Mon Apr 16 11:01:55 2018\n OS/Arch:       linux/amd64\nServer:\n Engine:\n  Version:      17.12.1-ce\n  API version:  1.35 (minimum version 1.12)\n  Go version:   go1.10.1\n  Git commit:   7390fc6\n  Built:        Mon Apr 16 11:01:23 2018\n  OS/Arch:      linux/amd64\n  Experimental: false\n```\nportainer: latest, \n \"Image\": \"sha256:f6dd93561a5fc6c68429becf825f9218be35e8c3ae5696987824c627909f0a06\",\n. I do suspect its browser caching issue, but haven't found the time to dig into this  I'll post my findings if any \nAm 21. April 2018 17:55:40 MESZ schrieb Anthony Lapenna notifications@github.com:\n\nStrange, Portainer is using the Docker API to query the container list\n(as well as the Docker CLI) so I don't have any idea of what might be\ncausing this issue. Are you able to reproduce this?\n-- \nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub:\nhttps://github.com/portainer/portainer/issues/1023#issuecomment-383308360\n\n-- \nDiese Nachricht wurde von meinem Android-Ger\u00e4t mit K-9 Mail gesendet.. ",
    "h0l0gram": "Same issue here, after upgrading (docker-compose pull & docker-compose up) it reports \"Unable to retrieve images\" when the \"Images\" menu item is clicked.\nI downgraded to 1.13.4 where the image list works.. There is a 404 for GET system/df which is actually a system%2Fdf that is called while the images page is loaded.\nIt seems that a direct call to portainer:9000 node is forgiving this encoded url, whereas Apache's ProxyPass directive gives 404.\nI can fix the GET call with my \"browser's developer add-on\" and resend it, which results in a OK 200.\nThe dataUsage call has been added to app/rest/docker/system.js in 1.13.5 by #1009 thus downgrading to 1.13.4 circumvents the issue for now. \nSome url rewrite magic with the proxying Apache might be a workaround as well.. @deviantony I've tested portainer/portainer:pr1037:\n- Issue fixed. \n- GET request looks good to me!\nThanks for the quick fix!. @deviantony I've tested portainer/portainer:pr1037:\n- Issue fixed. \n- GET request looks good to me!\nThanks for the quick fix!. @deviantony Great!\nfyi: I can reproduce the issue only when I have an Apache in front of portainer that proxies the url from lets say https://mydomain.com to localhost:9000.. @deviantony Great!\nfyi: I can reproduce the issue only when I have an Apache in front of portainer that proxies the url from lets say https://mydomain.com to localhost:9000.. ",
    "xylphid": "@deviantony Thanks for the fix\nI was also able to reproduce the issue with traefik as reverse proxy. ",
    "thiesschneider": "I am behind an nginx proxy and this issue is not resolved with the new version :(. I am running portainer on the latest stable CoreOS.\nThis is the browseroutput:\nError: a.go is not a function\n@https://portainer.domain.de/js/app.c952d291.js:29:4750\n$broadcast@https://portainer.domain.de/js/app.c952d291.js:3:21603\nl/<@https://portainer.domain.de/js/app.c952d291.js:10:29121\n$broadcast@https://portainer.domain.de/js/app.c952d291.js:3:21603\nBb/this.$get</</<@https://portainer.domain.de/js/app.c952d291.js:3:5587\n$eval@https://portainer.domain.de/js/app.c952d291.js:3:20204\n$digest@https://portainer.domain.de/js/app.c952d291.js:3:18737\n$apply@https://portainer.domain.de/js/app.c952d291.js:3:20500\nf/<@https://portainer.domain.de/js/app.c952d291.js:1:20161\ninvoke@https://portainer.domain.de/js/app.c952d291.js:1:30787\nf@https://portainer.domain.de/js/app.c952d291.js:1:20082\nY@https://portainer.domain.de/js/app.c952d291.js:1:20371\nX@https://portainer.domain.de/js/app.c952d291.js:1:19530\n@https://portainer.domain.de/js/app.c952d291.js:6:14397\nc@https://portainer.domain.de/js/app.c952d291.js:4:11543\nGa@https://portainer.domain.de/js/app.c952d291.js:1:28413\nc@https://portainer.domain.de/js/app.c952d291.js:1:28362\n  app.c952d291.js:3:6246\n    f/< https://portainer.domain.de/js/app.c952d291.js:3:6246\n    cb/this.$get</< https://portainer.domain.de/js/app.c952d291.js:2:24146\n    $broadcast https://portainer.domain.de/js/app.c952d291.js:3:21631\n    l/< https://portainer.domain.de/js/app.c952d291.js:10:29121\n    $broadcast https://portainer.domain.de/js/app.c952d291.js:3:21603\n    Bb/this.$get</</< https://portainer.domain.de/js/app.c952d291.js:3:5587\n    $eval https://portainer.domain.de/js/app.c952d291.js:3:20204\n    $digest https://portainer.domain.de/js/app.c952d291.js:3:18737\n    $apply https://portainer.domain.de/js/app.c952d291.js:3:20500\n    f/< https://portainer.domain.de/js/app.c952d291.js:1:20161\n    invoke https://portainer.domain.de/js/app.c952d291.js:1:30787\n    f https://portainer.domain.de/js/app.c952d291.js:1:20082\n    Y https://portainer.domain.de/js/app.c952d291.js:1:20371\n    X https://portainer.domain.de/js/app.c952d291.js:1:19530\n    <anonym> https://portainer.domain.de/js/app.c952d291.js:6:14397\n    c https://portainer.domain.de/js/app.c952d291.js:4:11543\n    Ga https://portainer.domain.de/js/app.c952d291.js:1:28413\n    c https://portainer.domain.de/js/app.c952d291.js:1:28362\nError: a.dataUsage.Images is undefined\ni.images/</b<@https://portainer.domain.de/js/app.c952d291.js:33:16398\ni.images/<@https://portainer.domain.de/js/app.c952d291.js:33:16366\nh/<@https://portainer.domain.de/js/app.c952d291.js:3:12900\n$eval@https://portainer.domain.de/js/app.c952d291.js:3:20204\n$digest@https://portainer.domain.de/js/app.c952d291.js:3:18737\n$apply@https://portainer.domain.de/js/app.c952d291.js:3:20500\ni@https://portainer.domain.de/js/app.c952d291.js:2:27835\nu@https://portainer.domain.de/js/app.c952d291.js:2:30051\nnb/</y.onload@https://portainer.domain.de/js/app.c952d291.js:2:30527\n  app.c952d291.js:3:6246\n    f/< https://portainer.domain.de/js/app.c952d291.js:3:6246\n    cb/this.$get</< https://portainer.domain.de/js/app.c952d291.js:2:24146\n    h/< https://portainer.domain.de/js/app.c952d291.js:3:12983\n    $eval https://portainer.domain.de/js/app.c952d291.js:3:20204\n    $digest https://portainer.domain.de/js/app.c952d291.js:3:18737\n    $apply https://portainer.domain.de/js/app.c952d291.js:3:20500\n    i https://portainer.domain.de/js/app.c952d291.js:2:27835\n    u https://portainer.domain.de/js/app.c952d291.js:2:30051\n    nb/</y.onload https://portainer.domain.de/js/app.c952d291.js:2:30527\nI found also this in the logs of the portainer container:\n2017/07/17 21:41:18 http error: Unable to find resource (code=404)\nThx in advance. Perhaps this is regarding the same issue:\nI am not able to load any container stats:\n/1/containers/stats?stream=false\ngets a 404. hm. I restartet everything and now it works again. sry.... but the images still dont show up :) sorry for the confusion.... 1069 is working. Do I have to use this image or will these changes be merged?. it was 1069 from docker hub. but i changed to develop for now :)\nthx. THX!\nits working again :). ",
    "xiaoxiaohuixxh": "portainer can run well in docker 1.12 and the docker api 1.24 when it is version 1.13.3\u3002. porttain version is 1.13.6. thank you eveymuch\uff0cit can show the images which version is 1.13.3 \uff0c1.13.4 i try it later\u3002. i try the portainer 1.13.4\uff0cit run well too!. ",
    "divisuals": "I encountered the same error with the latest docker images (portainer/portainer v1.13.6) in my local Docker environment (VirtualBox on Mac OSX 10.12.6 using docker v1.11.2/ API version 1.23).\ndf does give a 404 - see attached.\n\nThe total image count is accurate and other resources are also pulling-up. \nIs this expected?. Yes, portainer/portainer:develop image works! Thanks. ",
    "ChinaShrimp": "Thanks for your fix, and I tried the develop version, it works!. ",
    "lee-cn": "@deviantony hello, it seems not fixed in 1.14.0 yet.\ni tried to build the portainer locally follow this doc: https://portainer.readthedocs.io/en/stable/contribute.html#build-portainer-locally\nwhen i pull a hello-world image and click the images buttom i got this error , i thought it would be my problem,but i tried it on the http://demo.portainer.io/ it seems the same problem , is there anything i missed? \n1.the error on my own machine\n\n\nthe error on http://demo.portainer.io/\n\n. \n",
    "KunmyonChoi": "Hi, I'm not sure is this a similar problem. But, I got the same message with latest portainer release.\nInteresting thing is it works fine with local end point. But have problem with remote end point.\nPortainer version: 1.13.6\nLocal : Ubuntu 16.04.2 LTS, Docker version 17.05.0-ce\nRemote : Centos 7.2, Docker version 17.09.0-ce\nChrome inspector output:\nGET http://50.1.111.113:9000/api/docker/5/system/df 404 (Not Found)\n(anonymous) @ app.c952d291.js:2\no @ app.c952d291.js:2\n(anonymous) @ app.c952d291.js:2\n(anonymous) @ app.c952d291.js:3\n$eval @ app.c952d291.js:3\n$digest @ app.c952d291.js:3\n$apply @ app.c952d291.js:3\n(anonymous) @ app.c952d291.js:3\nf @ app.c952d291.js:2\n(anonymous) @ app.c952d291.js:2\nsetTimeout (async)\nSa.j.defer @ app.c952d291.js:2\nf @ app.c952d291.js:3\n(anonymous) @ app.c952d291.js:13\nGa @ app.c952d291.js:1\nc @ app.c952d291.js:1. Hi, I'm not sure is this a similar problem. But, I got the same message with latest portainer release.\nInteresting thing is it works fine with local end point. But have problem with remote end point.\nPortainer version: 1.13.6\nLocal : Ubuntu 16.04.2 LTS, Docker version 17.05.0-ce\nRemote : Centos 7.2, Docker version 17.09.0-ce\nChrome inspector output:\nGET http://50.1.111.113:9000/api/docker/5/system/df 404 (Not Found)\n(anonymous) @ app.c952d291.js:2\no @ app.c952d291.js:2\n(anonymous) @ app.c952d291.js:2\n(anonymous) @ app.c952d291.js:3\n$eval @ app.c952d291.js:3\n$digest @ app.c952d291.js:3\n$apply @ app.c952d291.js:3\n(anonymous) @ app.c952d291.js:3\nf @ app.c952d291.js:2\n(anonymous) @ app.c952d291.js:2\nsetTimeout (async)\nSa.j.defer @ app.c952d291.js:2\nf @ app.c952d291.js:3\n(anonymous) @ app.c952d291.js:13\nGa @ app.c952d291.js:1\nc @ app.c952d291.js:1. ",
    "ianseyer": "Also hitting  this error, but  confirmed able to connect to the failing host using docker-py.. Also running into this issue. Creating stacks eventually has them downgraded to limited control.. ",
    "marcbria": "You are right. Looks like I have a DNS issue, not portainer related. :-(\n```\n$ docker run -it alpine\n/ # wget https://raw.githubusercontent.com/portainer/templates/master/templates.json\nwget: bad address 'raw.githubusercontent.com'\n/ # ping raw.githubusercontent.com\nping: bad address 'raw.githubusercontent.com'\n/ # ping 151.101.0.133\nPING 151.101.0.133 (151.101.0.133): 56 data bytes\n64 bytes from 151.101.0.133: seq=0 ttl=53 time=50.778 ms\n64 bytes from 151.101.0.133: seq=1 ttl=53 time=36.912 ms\n64 bytes from 151.101.0.133: seq=2 ttl=53 time=40.890 ms\n^C\n--- 151.101.0.133 ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max = 36.912/42.860/50.778 ms\n```\n\nWhat URL did you use with your custom templates?\nhttp://172.17.0.3:8080/templates.json\n\nNo domain name here... so why it also fails?. > Have you tried to ping 172.17.0.3 from within that alpine container?\nTested from 1 to 10 and always return: ping: invalid number '172.17.0.1'\nOk... it's official: my laptop's docker network configuration is a mess. :-)\nI will start fixing dns issue and will be back with the solution for those who fall in the same hole.. Looks like something weird happens with my standard ubuntu xenial installation when you are behind a firewall or your resolv.conf is just localhost.\nBy default, docker containers will replicate host's resolv.conf dns. If you want different DNS you can specify in the following config files (by priority order):\n\n/lib/systemd/system/docker.service\n/etc/default/docker \n/etc/docker/daemon.json\n\nBe careful with this order. \nIn my case I had wrong DNSs in the first config file and daemon.json was never applied.\nBTW, you can run docker (and portainer) with the --dns param, but new containers created from portainer will have trouble to reach the net, so a global solution is required to make it all work.\nExtended explanation about the network issue: https://robinwinslow.uk/files/2016/06/23/fix-docker-networking-dns/. ",
    "Sugaroverdose": "Sorry, mispressed button, I'll make test instance tomorrow . @deviantony sorry for silence, had a bad time fighting vmxnet3 kvm device :)\nsent you vch instance data via email. i'll try it tomorrow, thank you. ",
    "darron1217": "@deviantony @WTFKr0 Can you implement storage quota limitation on UI, too?\nI think many people (including me) need this feature...\ne.g. --storage-opt size=1G. @deviantony \nI know that many developers hate this kind of comment.. but..\nIs there any update on this issue? :)\nI've been keep waiting for this issue to be resolved!. Oh it was my mistake...\nI found that the driver was not enabled... haha. ",
    "nguyenthaialan": "17.03.1-ce\n2017-07-18 10:28 GMT+02:00 Anthony Lapenna notifications@github.com:\n\nCan you please give us information about your Docker version?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1043#issuecomment-315995008,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHgXU_hbwpCXLiqD3i2KonnGbFKzQswaks5sPGy3gaJpZM4Oa_JS\n.\n. Big thanks!. \n",
    "redraw": "In my experience, images are wrongly marked as Unsed when logged with a user that has no access privileges to the container running that image. \nIf the user tries to delete it, it fails saying that some container (the user can't see) is using it. ",
    "gotjoshua": "Hope this is not repetitive, but I have the feeling that my symptom here is not related to user permissions:\n\nThe parent Logstash image shows itself as unused (even though it is built in basically the same way as kibana and elastic - which show the child image badge beside the parent)\nIs there something that can be done in the Dockerfile or build process to change this? Or is there a change in the Portainer pipeline that will fix it?\n. Do you guys have a plan for how to add access control to containers that are not \"born\" in portainer?\nI ask because I prefer to have all my docker-compose files on the server and use portainer for convenient restarting. \nIs this covered by your plans?. Thanks @ncresswell (maybe you want to edit your reply to exclude all the email crud)!\nI am also curious about how fine grained the access control will be when this feature gets implemented... eg: I'd like to be able to add users who, for example, have the ability to start and restart but not remove containers.\nAlso only high clearance users should be able to use the remote console.. Sounds seriously awesome!\nThanks!. ",
    "maxiaoxian": "3Q~. my mistakes. ",
    "gaochunmeng": "I use shell to create service \"docker service create --mode global --network host nginx\"\nSet \u2018--network host \u2019\nUse portainer create service can't find \u2018host\u2019 network  \uff0c only \u2018swarm  overlay\u2019 type network\n. ",
    "rdxmb": "works for me with \nDocker version 17.07.0-ce, build 8784753\nSo the Portainer-container can reach the Docker Host via TCP in swam mode.\nCan we add this to the Portainer docs?. Ah, probably about a different thing ;)\nI searched for a way to connect the portainer-container with the host network - and found the answer in your linked comment. But you - I guess - are talking about creating services within portainer. So, of course, we are talking about different worlds .... ",
    "Dulanic": "Same issue.\nEdit: May be linked to #1042? Use Linux Mint 18.2.. ",
    "newfulluser": "Is there a way to change the logo.png and logo_alt.png from the files on the portainer volume?. Will try to make the logo look good on both locations then, wish me luck.. ",
    "dev-a": "ok \ud83d\udc4d :). ",
    "tuxmeister": "I would still like to see it there, however maybe a way to hide it, and certainly it would be hidden away from non-admin users. Would that be enough?. ",
    "gybfefe": "Hi!\nThat would be awsome, and a common X11 container to link all those\ncontainers with graphical needs :-)\n(with vnc and novnc as these days :)\nBest wishes,\nBen\n2017-07-27 16:06 GMT+02:00 Anthony Lapenna notifications@github.com:\n\nWhat do you mean? You'd like to see an embedded reverse proxy inside\nPortainer to serve all your applications with a simple click?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1078#issuecomment-318372515,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ACi--mdVOQDp28WdP8JJsCZOykk_bCMcks5sSJl6gaJpZM4OlFrv\n.\n. Hi!\n\nI see this the other way round: Why would something that ease your work do\nharm on usability.\nPortainer saves you (among other things) typing docker runs, if containers\nlove Portainer it's better,\nthen you have the choice which one has more functionality or options with a\nsimple push of a button.\nhttps://mailtrack.io/ Sent with Mailtrack\nhttps://mailtrack.io/install?source=signature&lang=en&referral=gybfefe@gmail.com&idSignature=22\n2017-08-02 9:59 GMT+02:00 Evert Provoost notifications@github.com:\n\nFor this functionality I use jwilder/nginx-proxy which sort of does this\nand with the upcoming ability to update containers (sort of) using this is\na breeze. Having it build into Portainer might be helpful but that could be\nreinventing the wheel and could even limit the options?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1078#issuecomment-319598239,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ACi--pPX_vh_AReRWlCr8r3dAihH4DL_ks5sUCxugaJpZM4OlFrv\n.\n. Thank you for your inquiry and debate in this field, they give me some hope that the feature will be present in the future :) You may say it's easier to write some line in yetanothermethalanguage, but then there will be no great product.\nA little bit off topic but I think if developers and whistleblowers could have a realistic rating at the ever ending product, based on how much work they put in it from the beginning, then we would have much more resources.. If you see Portainer as a dashboard and you could see if a https button is\ngreen nearby some containers you want, I think it's a feature...\nPortainer was the best out of box excitement to me, so I just tought why\nnot share some ideas. On the other hand if it's better than the\ncompetitors, maybe container makers think to support its possible\nfeatures....\nBut I understand if you don't want more features... :)\n\n2017-08-06 0:55 GMT+02:00 Evert Provoost notifications@github.com:\n\nIMHO: Portainer (if I look at the current and upcoming feature set) is\nmore about easing the management of Docker itself. I don't really see any\ngain in replacing one line of configuration by a button press for something\nthat isn't standard.\nTo 'HTTPS-everything' it's one line in the compose file per added\ncontainer (working with Docker Compose is in development) when using\nSteveLTN/https-portal. A reverse proxy is setup by adding one little\nenvironment variable per extra container (container reconfiguration is also\nin the works).\nThese are all relatively easy, one button press is easier, of course, but\npeople want to use specific tools so there might be a lot of development\ntime lost on adding support for many different applications for every\nspecific use case. When development is focused on general management of\nDocker these tasks all become equally easier -- again not the push of a\nbutton, but close enough.\nOne way to evade the mess of supporting tons of third party applications\nis, as already said, embedding a reverse-proxy (with 'HTTPS-everything'\ncapabilities) however this would mean embedding stuff that already requires\nthe development resources of two projects. A reverse-proxy has to be as\nfast as possible, has to scale perfectly, has to... This would consume so\nmuch time to get right for almost no improvement of the current situation\n(it would probably even make matters worse, that kind of software has been\nunder development for years, not to do the development team of Portainer\ndiscredit, but I do not think they could get to that level of efficiency in\na couple of months while also developing other stuff for Portainer).\nTl;dr\nMy view on the matter is that it would be too much development (and long\nterm support) for rather little time saved in practice. It also seems\nslightly out of scope to me.\nHowever one note:\nIf any subdomain routing to containers/services is added to Docker or\nSwarm Mode there should definitely be an easy way to configure it inside of\nPortainer as it is build into Docker and not reinventing the weel.\nAlso, as this message is rather long, this isn't an attack on (the idea\nof) the issue author, I'm just stating my opinion \ud83d\ude04\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1078#issuecomment-320474921,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ACi--lKYKUA77DN-_gy6gwez7S_X1x1nks5sVPLMgaJpZM4OlFrv\n.\n. I was just self ironic as every sentence ended with feature :)\nI totally understand if in current state this is a bit out of focus,\nhowever forecasted that containers in time will reward a good dashboard.\nMoreover I think containers will be better rated as they evolve with\noverlapping ideas, and if you take two totally similar containers regarding\nin functionality, after speed and space they will be rated by features and\ncompatibility with other programs like Portainer.\n\n2017-08-06 10:45 GMT+02:00 Anthony Lapenna notifications@github.com:\n\nso I just tought why not share some ideas\nYou're very welcome to do that, this is how we will build a great product.\nI understand if you don't want more features... :)\nSome ideas/features need to be submitted to discussion, you should\nunderstand that we cannot simply add every features requested by all our\nusers, the Portainer product needs to stay coherent.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1078#issuecomment-320493934,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ACi--pOfslHEfEoxBgkwNQGZWfAnPgReks5sVX0OgaJpZM4OlFrv\n.\n. Regarding X11 button: https://github.com/suchja/x11server. Hi!\n\nI mean every time adding a new container and expose its ports through bridge, it's increasing the portnumber like container 1 has two ports exposed: \n443/tcp\u00a0-->\u00a00.0.0.0:32770, 80/tcp\u00a0-->\u00a00.0.0.0:32771\ncontainer 2 has one: \n80/tcp  --> 0.0.0.0:32776\n--etc\nJust because I restarted the server, portainer somehow gave the same container another random port...\nIf I deduce well, then portainer has the ability to change an already made container's forwarding port number.\nI'm pretty sure this happend because I made a url forward with my name server to that container's port number with a yakky subdomain name :)\nLike first time: owncloud.myserver.com masked to myserver.com:32870\nafter my server restarted my url mask didn't work it just wanted to load 32870, however my nextcloud container was sitting on the 32877 port, or something like that.\n. Ok, but questions stay on top of that, if server restarts can change saved container's port forward allocation, then docker can be manipulated to change this randomization, then portainer maybe can achieve the proper docker parameters to do that - just a lame question but in my world it makes sense...\n. Cause these are containers, and managing them from portainer is common\nsense :)\nSorry if it's rude, but I think we both cheer for the same dashboard :)\n2017-08-13 19:19 GMT+02:00 Anthony Lapenna notifications@github.com:\n\nWhy don't just map a specific port on your host so that you ensure the\nsame port is always used?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1110#issuecomment-322054604,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ACi--o87NBsLilSjFBt2fwMD12h3dgryks5sXzAkgaJpZM4O1dQr\n.\n. Of course, thank you, but an already created container has no ability to change port mappings, maybe creating new network and join that, but that's another chapter if we can put there routing, port forwards etc.\nMy only note was just if docker randomization can be overruled, then portainer could access it.\nThank you. Did you copy the domain.crt to the target docker engine ca.crt? And subjectAltName IP is required too in self managed systems, but I think AWS make it for you... Maybe this link helps: \nhttps://hackernoon.com/create-a-private-local-docker-registry-5c79ce912620. Yes, as I wrote it is necessary on self-signed situations only, and thought to share the knowledge here.... Just a reamark, your version is 2 and docker stack works on 3, only compose supports version 2.... Which version of portainer do you use? :) If your docker and compose are up to date too, you'll be happier. Not at first, you have to replace all yml content version 2 to 3. Not a big job anyway\n\n\n. My bad didn't read your issue till the end, but it's interesting enough that nearly the opposite red label appears at the same portainer and docker versions by my side. More precisely I'm unable to deploy a stack with version 2 from portainer. Are you?. Did you turn off in portainsers security settings this?: Disable bind mounts for non-administrators. Yes, but there are templates that don't work because of this, not just at duplicate/edit . I think only leader can do that :). I tested too, and only leader manager can edit with portainer version 1.19 and 1.20. ",
    "elecprog": "For this functionality I use jwilder/nginx-proxy which sort of does this and with the upcoming ability to update containers (sort of) using this is a breeze. Having it build into Portainer might be helpful but that could be reinventing the wheel and could even limit the options?\nEDIT: This isn't the 'make everything HTTPS' from the original question but it serves as a reverse proxy to have multiple subdomains on the same port pointing to different services on the same server.. IMHO: Portainer (if I look at the current and upcoming feature set) is more about easing the management of Docker itself. I don't really see any gain in replacing one line of configuration by a button press for something that isn't standard.\nTo 'HTTPS-everything' it's one line in the compose file per added container (working with Docker Compose is in development) when using SteveLTN/https-portal. A reverse proxy is setup by adding one little environment variable per extra container when using jwilder/nginx-proxy (container reconfiguration is also in the works).\nThese are all relatively easy, one button press is easier, of course, but people want to use specific tools so there might be a lot of development time lost on adding support for many different applications for every specific use case. When development is focused on general management of Docker these tasks all become equally easier -- again not the push of a button, but close enough.\nOne way to evade the mess of supporting tons of third party applications is, as already said, embedding a reverse-proxy (with 'HTTPS-everything' capabilities) however this would mean embedding stuff that already requires the development resources of two projects. A reverse-proxy has to be as fast as possible, has to scale perfectly, has to... This would consume so much time to get right for almost no improvement of the current situation (it would probably even make matters worse, that kind of software has been under development for years, not to do the development team of Portainer discredit, but I do not think they could get to that level of efficiency in a couple of months while also developing other stuff for Portainer).\nTl;dr\nMy view on the matter is that it would be too much development (and long term support) for rather little time saved in practice. It also seems slightly out of scope to me.\nHowever one note:\nIf any subdomain routing to containers/services is added to Docker or Swarm Mode there should definitely be an easy way to configure it inside of Portainer as it is build into Docker and not reinventing the weel.\nAlso, as this message is rather long, this isn't an attack on (the idea of) the issue author, I'm just stating my opinion :smile:. ",
    "nexflo": "So....can this be automated in terms of automatic subdomain for portainer?. ",
    "LukeMauldin": "Also receive messages when navigating to pages like \"Create Service\" that it the webpage is \"Unable to retrieve Secrets\" and \"Unable to retrieve templates\".  Most likely because there is no external internet access.. ",
    "DimeOne": "I started my preexisting portainer container with the image portainer/portainer:pr1093. \nWithin the user management, the password fields were missing and I could not see any options for ldap.. It seems I must have been blind (or too tired). I was looking at Settings but must have overlooked the Authentication Menuitem.\nI was not able to get it working like I did with other applications. This is my home lab which is using a Microsoft Active Directory running on a Windows Server 2012R2. I have been able to configure the connection using other tools like Jenkins, All Certificates are issued by my own pki and are working fine. LDAP has been tested on 389+3268(plain+starttls), 636+3269(SSL) using LDAP Admin.\n1) Not able to login\nEven though the connection seems to work while testing it, I was not able to login to portainer using ldap. (Neither with plain nor TLS)\nIf I create the user as administrator before logging in, I receive:\n\"http error: User not found or too many entries returned (code=500)\"\nOtherwise it says:\n\"http error: Invalid credentials (code=400)\"\nThis may be due to the missing User search configurations.\n2) incomplete TLS Settings\nI was trying to configure a tls connection on port 389 which uses starttls. I uploaded only the certificate chain and saved the settings, without being able to test the connection. ( Due to missing tls cert and key ?! ) Upon reloading the settings, all tls items are checked and the test connection button is active. Testing the connections returns an error, that the certificate cannot be found.\nI assume that this tls is only used for client authentication?\n\n3) SSL Connection\nAfter failing to establish a starttls connection, I tested an SSL connection on port 636, which failed too.\nError on failure was \"Connection reset by peer\"\nSetting the protocol explicitly to ldaps:// within the LDAP URL is not supported either.. After pulling the latest pr1093 I was able to get LDAP login to work (without tls/ssl).\nFor AD I used following user search configurations:\nBaseDN: CN=Users,DC=example,DC=org\nUsername attribute: sAMAccountName\nFilter: (objectClass=user)\nI had to add the users manually, but then I was able to login with said users.\nIf you could give me a reference to the documentation of the library you used for ldap, I may take a look at encryption.\nP.S.: Great product, keep on with the good work :) \ud83d\udc4d . Within the dokumentation is a StartTLS with a basic example that skips certificate verification, more secure options would include a certificate chain, servername within the config: https://godoc.org/crypto/tls#Config \n    func (l Conn) StartTLS(config tls.Config) error\nerr = l.StartTLS(&tls.Config{InsecureSkipVerify: true})\nif err != nil {\n    log.Fatal(err)\n}\nThe changes I would make:\n  - Change \"TLS\" switch to \"Use Encryption\"\n  - Add new Switch for \"TLS vs StartTLS\"\n  - Add new Switch for \"Skip Verification\"\n  - require Certificate Chain when no Skip Verification is specified and use in tls.Config.RootCAs\n  - Set servername in tls.Config.Servername\n  - Make Cert and ClientCert optional for Client Authentication - ( bind_dn and password would then be optional )\nThat should allow using ldap with encryption and validation with TLS and StartTLS. I'm not familiar with go and could provide a patch for that, but I'd be happy to give feedback and test it at home and work :)\n. Never used slack before, I'll figure it out in a few minutes. There is TLS / SSL and StartTLS. StartTLS upgrades the connection after opening a tcp connection and is protocol dependent. \nMS AD supports START_TLS on 389 / 3268 and SSL on 636 / 3269\nSamba AD supports START_TLS on 389 / 3268 and SSL / TLS on 636 / 3269\nSSL inferior to TLS and START_TLS and not implemented by this library.. I'm not sure If I can follow you. \nIf you mean that encryption should be enabled by default, I could agree with you.\nSSL based ldap connections are not supported by portainer.. According to OpenLDAP:\n  - Although there is no technical specification for ldaps:// it is widely used. \n  - ldaps:// is deprecated in favor of Start TLS [RFC2830]. OpenLDAP 2.0 supports both. \nhttp://www.openldap.org/faq/data/cache/605.html\nI do not think that the functionality needs to be reworked and don't think ghenry wants that. Just the presentation on the authentication configuration site.\nghenry would like to move the TLS option into a \"legacy options\" category to hide it from the user by default. I don't know if adding a comment with \"Using StartTLS on Port 389 is recommended\" would be enough. Or a Warning when using TLS to encourage the usage of StartTLS.\n=> We want users to use the securest option, how do we present it to the user?\nI would argue that doing this would be less effective than rewriting part of the code, to implicitly enable start_tls (Like Jenkins did in an Update), but that would require more work.. ",
    "beenanner": "I get the following after setup of ldap. Is there a limit of the # of users portainer can handle on it's side? I'll dig in a bit more when I have time.\n{\"err\":\"User not found or too many entries returned\"}\n. Everything seems to work if I restrict the results to just a single user via the filter option in the \"User search configurations\". \n(uid=%s) <--- doesn't work\n(uid=beenanner) <--- does work\n. Nice @deviantony, I tried your suggestion and just removed the filter and everything is working! Awesome job and welcomed feature! . ",
    "mmaster23": "I wish to add to this: Option to set the public IP via the CLI when starting Portainer instance. I've set the Docker host IP via \"-H tcp://172.20.80.1:2376\" when starting Portainer however my containers are reachable on 10.0.0.x:x. I can't set the public IP (10.0.0.x) via the GUI as it doesn't allow you to set the IP via the GUI when the docker host is added via CLI.\nPerhaps move the public IP attribute from the docker host declaration to the docker container declaration? This would allow more flexible network setups (like multiple public IPs per docker host, specific IP bindings per container etc).. Can confirm.. Have multiple docker hosts. On Linux hosts, I can use the gui to edit the public ip of the host that was added via the cmdline. However on windows I can't edit the default endpoint via the gui (thus missing the public ip, it can't be set from command line). \nBug: can't edit the public ip of the default endpoint via the gui on Windows hosts. \nNice to have: being able to set the public ip via command line when creating portainer. \nNicer to have: being able to set the public ip per container, not host. . \nIt just says: Unable to update endpoint. I'll see if I can find some logging for this...  Portainer 1.13.5 on Windows Server 2016\nFound the error: err:\"open C:\\data/tls/1/cert.pem: The system cannot find the path specified.\"\nWhich is weird as the GUI shows green checks and the connection itself works (over TLS).. I've retested this on Chrome on Android v61.0.3163.98 with Portainer 1.13.6 on Linux and 1.13.5 on Windows Server.\nIt now works just fine.\n. ",
    "zenglian": "From web UI, version is 1.13.6.\nI'm runinng it on windows 10 host using exe file. End point is localhost:2375 (I cannot make docker listen on other than localhost:2375).  . Just verified it's working on Linux. so is it handled differently on win and linux?. . only the 3: bridge host none. Sure. bridge is always the default for both linux and windows. \nHowever, all my containers are running linux. I've not tried windows container.\n\n. I can only run exe (only localhost:2375). \nI noticed 2 or more places, hopefully they share the same data source.. Have not reproduced it till now.\n. ",
    "vidschofelix": "Can you test this again? I tested this today on my Andoid 7.0 /w Chrome, input works:\n\n. I think i have the same problem...\nIf you try to modify/replace a container and try to switch the network your container will be added to both networks.\nExample: If your container was in 'bridge' and you select 'stupid' as network it will result in a container attached to 'bridge' and 'stupid'. Sorry for the names, this was my testcase. Here the resulting Network-part of the GET-Request against /create?...\n```\n\"NetworkingConfig\":{\n      \"EndpointsConfig\":{\n         \"bridge\":{\n            \"Aliases\":null,\n            \"DriverOpts\":null,\n            \"EndpointID\":\"9de7534036b2e68d633bb53f334621863084b011c8827cc386a92a9292ba8cab\",\n            \"Gateway\":\"172.17.0.1\",\n            \"GlobalIPv6Address\":\"\",\n            \"GlobalIPv6PrefixLen\":0,\n            \"IPAMConfig\":{  \n        },\n        \"IPAddress\":\"172.17.0.4\",\n        \"IPPrefixLen\":16,\n        \"IPv6Gateway\":\"\",\n        \"Links\":null,\n        \"MacAddress\":\"02:42:ac:11:00:04\",\n        \"NetworkID\":\"04197be3db651afc277e188b1647447307ed0e141720bed9fbd0f33fbbcb5028\"\n     },\n     \"stupid\":{  \n        \"IPAMConfig\":{  \n           \"IPv4Address\":\"172.20.0.28\",\n           \"IPv6Address\":\"\"\n        }\n     }\n  }\n\n```\naaaaand i spent some time fiddeling around with the POST-Request, being able to modify and resend it... Removing the Bridge-Part from the Request successfully created the container. As i looked at the created container i felt ashamed -.- There you can add and remove the container from networks? Damn! No need to recreate a container for switching networks, thats my fault. After adding the container to the new network it works, even with recreating. I know, editing is experimental, but maybe only attached networks should be selectable.. I think there is a problem when trying to recreate a container in a different network, bc. the container will be attached to both (old and new) networks.. @deviantony done: #1275 \nThanks :). ",
    "masahuku": "Thx! Could not find that before, apologies :).. ",
    "sloweclair": "Looking at the API the Prune call doesn't do it all at the same time. There is:\n/networks/prune\n/volumes/prune\n/containers/prune\n/images/prune\nSo it wouldn't have to be all at once, but I do understand your point. ",
    "Jeraimee": "Absolutely, after fighting with docker-based portainer and getting the same result I decided to attempt to run portainer sans-docker and that's how I ended up here :)\nI'm trying:\n./portainer -d /opt/appdata/portainer and ./portainer -d /opt/appdata/portainer -H unix:///var/run/docker.sock (also tried /run/docker.sock just to try to avoid any issues related to symlinks.. Absolutely, after fighting with docker-based portainer and getting the same result I decided to attempt to run portainer sans-docker and that's how I ended up here :)\nI'm trying:\n./portainer -d /opt/appdata/portainer and ./portainer -d /opt/appdata/portainer -H unix:///var/run/docker.sock (also tried /run/docker.sock just to try to avoid any issues related to symlinks.. Same result:\nroot@pve:/opt# ./portainer/portainer -d /opt/appdata/portainer\n2017/08/13 15:11:53 no such device\nroot@pve:/opt# portainer/portainer -d /opt/appdata/portainer -H unix:///run/docker.sock\n2017/08/13 15:12:11 no such device\n. Interestingly ... if I mkdir /data then run as ./portainer/portainer it starts.\nIf I supply the -d option again - no joy.\nroot@pve:/opt# ./portainer/portainer -d /opt/appdata/portainer\n2017/08/13 15:27:53 no such device\nroot@pve:/opt# ./portainer/portainer\n2017/08/13 15:27:58 Starting Portainer on :9000. Works with:\nroot@pve:/opt# ./portainer/portainer -d /tmp/p-data\n2017/08/13 15:41:21 Starting Portainer on :9000\nroot@pve:/opt# ./portainer/portainer -d ~/p-data\n2017/08/13 15:41:32 Starting Portainer on :9000\nNow I'm really confused.. Opt is a mergerfs mount. Nothing but portainer has complained so far.. Found the issue. MergerFS does not work with mmap\u2019ing. I\u2019m sure other containers would fail as well in the future.\nAccording to docs don\u2019t use direct_io option and do use dropcacheonclose option.\nNewest MergerFS version (that supports the dropcacheonclose) and the above changes do fix the issue.. ",
    "ghenry": "No, the whole lot and let the informed user set it with the existing\nplaceholder for username field they use that maps to your side.\nOn 14 Aug 2017 07:39, \"Anthony Lapenna\" notifications@github.com wrote:\n@ghenry https://github.com/ghenry are you asking to remove the username\nattribute field and replace it with a single filter?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1115#issuecomment-322111107,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJveHFNr_4RafJalgCxgxIiEe4WeMZ7ks5sX-uigaJpZM4O1x42\n.\n. A default of 389 if one is not set. Usual standards to make it sane for a\nuser.\nOn 14 Aug 2017 07:40, \"Anthony Lapenna\" notifications@github.com wrote:\n\n@ghenry https://github.com/ghenry The current implementation allows you\nto specify any port, what would you like to see here?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1116#issuecomment-322111231,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJveJ8PwbQAjjALJFjyXFrPO6WA10feks5sX-vdgaJpZM4O1yD4\n.\n. Will get this done.\n\nThanks.\nOn 14 Aug 2017 07:51, \"Anthony Lapenna\" notifications@github.com wrote:\n\nAgree. I accept PRs for such small changes, should be quite easy to\nreplace.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1117#issuecomment-322112675,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJveJ1eclgKZ655B5d_0hysK5pXlZRMks5sX-55gaJpZM4O1yIH\n.\n. Hi DimeOne,\n\nYes, I know what the differences are, the ports and which is deprecated. My\npoint is since Portainer is very modern with Angular and go, it should not\nencourage SSL based LDAP connections other than StartTLS on port 386 as per\nthe standard. If it must, it should be under a heading called Legacy or AD.\nThanks.\nOn 14 August 2017 at 14:28, DimeOne notifications@github.com wrote:\n\nThere is TLS / SSL and StartTLS. StartTLS upgrades the connection after\nopening a tcp connection and is protocol dependent.\nMS AD supports START_TLS on 389 / 3268 and SSL on 636 / 3269\nSamba AD supports START_TLS on 389 / 3268 and SSL / TLS on 636 / 3269\nSSL inferior to TLS and START_TLS and not implemented by this library.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1119#issuecomment-322189889,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJveNqJMYAMTSx4-LKTJs6_Z4nSMBVDks5sYEubgaJpZM4O1yO8\n.\n. Hi all,\n\nThat's not what I've said at all. I mean that SSL/TLS/ldaps:// on port 636\nis deprecated years and years ago so should be listed under a legacy\noption.\nThanks.\n--\nKind Regards,\nGavin Henry.\nManaging Director.\nT +44 (0) 330 44 50 000\nD +44 (0) 330 44 55 007\nM +44 (0) 7930 323266\nF +44 (0) 1224 824887\nE ghenry@suretec.co.uk\nOpen Source. Open Solutions(tm).\nhttp://www.suretecsystems.com/\nWinner of the Best Business ITSP (Medium Enterprise) 2016!\nhttp://www.surevoip.co.uk/2016-best-provider\nSuretec Systems is a limited company registered in Scotland. Registered\nnumber: SC258005. Registered office: 24 Cormack Park, Rothienorman,\nInverurie, Aberdeenshire, AB51 8GL.\nSubject to disclaimer at http://www.suretecgroup.com/disclaimer.html\nDo you know we have our own VoIP provider called SureVoIP? See\nhttp://www.surevoip.co.uk\nOpenPGP (GPG/PGP) Public Key: 0x8CFBA8E6 - Import from hkp://\npool.subkeys.pgp.net\nor http://www.suretecgroup.com/0x8CFBA8E6.gpg\nOn 15 Aug 2017 17:38, \"Anthony Lapenna\" notifications@github.com wrote:\n@ghenry https://github.com/ghenry We cannot force users to use TLS/SSL in\ntheir LDAP setup, that's why we need to support both options.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1119#issuecomment-322520017,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJveELyJrO064wVnKtvXL9o_4N0PMwbks5sYcmagaJpZM4O1yO8\n.\n. Please read what I'm saying. That is not what I wrote. Also AD is not LDAP.\nParts of it are a very broken Ms centric LDAP.\n--\nKind Regards,\nGavin Henry.\nManaging Director.\nT +44 (0) 330 44 50 000\nD +44 (0) 330 44 55 007\nM +44 (0) 7930 323266\nF +44 (0) 1224 824887\nE ghenry@suretec.co.uk\nOpen Source. Open Solutions(tm).\nhttp://www.suretecsystems.com/\nWinner of the Best Business ITSP (Medium Enterprise) 2016!\nhttp://www.surevoip.co.uk/2016-best-provider\nSuretec Systems is a limited company registered in Scotland. Registered\nnumber: SC258005. Registered office: 24 Cormack Park, Rothienorman,\nInverurie, Aberdeenshire, AB51 8GL.\nSubject to disclaimer at http://www.suretecgroup.com/disclaimer.html\nDo you know we have our own VoIP provider called SureVoIP? See\nhttp://www.surevoip.co.uk\nOpenPGP (GPG/PGP) Public Key: 0x8CFBA8E6 - Import from hkp://\npool.subkeys.pgp.net\nor http://www.suretecgroup.com/0x8CFBA8E6.gpg\nOn 16 Aug 2017 08:09, \"Anthony Lapenna\" notifications@github.com wrote:\n\nUnfortunately I don't have a lot of experience with LDAP/AD. But I'm not\nsure why they would deprecate TLS support.\n@DimeOne https://github.com/dimeone what's your input on this?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1119#issuecomment-322685779,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJveA5zvT_lbwBujyc6nEwrtb2bjWyDks5sYpXDgaJpZM4O1yO8\n.\n. That's correct DimeOne.\n\nThe two options just appear confusing for the untrained eye. With the\ndefault of port 389 and attempting StartTLS and failing back to plain could\nwork, or they select StartTLS as the option. You can always query the\noperational attributes for capabilities to do this automatically. Your\nbackend ldap.go is fine though.\nOn 16 August 2017 at 17:15, DimeOne notifications@github.com wrote:\n\nAccording to OpenLDAP:\n\nAlthough there is no technical specification for ldaps:// it is\n   widely used.\nldaps:// is deprecated in favor of Start TLS [RFC2830]. OpenLDAP 2.0\n   supports both.\n\nhttp://www.openldap.org/faq/data/cache/605.html\nI do not think that the functionality needs to be reworked and don't think\nghenry wants that. Just the presentation on the authentication\nconfiguration site.\nghenry would like to move the TLS option into a \"legacy options\" category\nto hide it from the user by default. I don't know if adding a comment with\n\"Using StartTLS on Port 389 is recommended\" would be enough. Or a Warning\nwhen using TLS to encourage the usage of StartTLS.\n=> We want users to use the securest option, how do we present it to the\nuser?\nI would argue that doing this would be less effective than rewriting part\nof the code, to implicitly enable start_tls (Like Jenkins did in an\nUpdate), but that would require more work.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1119#issuecomment-322822951,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJveArwAjNCsrAAImyZtTdt4lFQIOnFks5sYxWOgaJpZM4O1yO8\n.\n\n\n-- \nKind Regards,\nGavin Henry.\nManaging Director.\nT +44 (0) 330 44 50 000\nD +44 (0) 330 44 55 007\nM +44 (0) 7930 323266\nF +44 (0) 1224 824887\nE ghenry@suretec.co.uk\nOpen Source. Open Solutions(tm).\nhttp://www.suretecsystems.com/\nWinner of the Best Business ITSP (Medium Enterprise) 2016!\nhttp://www.surevoip.co.uk/2016-best-provider\nSuretec Systems is a limited company registered in Scotland. Registered\nnumber: SC258005. Registered office: 24 Cormack Park, Rothienorman,\nInverurie, Aberdeenshire, AB51 8GL.\nSubject to disclaimer at http://www.suretecgroup.com/disclaimer.html\nDo you know we have our own VoIP provider called SureVoIP? See\nhttp://www.surevoip.co.uk\nDid you see our API? http://www.surevoip.co.uk/api\n. They both work but the current one is a waste as nothing is AND'd and looks\nlike a typo in the logs.\nOn 14 Aug 2017 07:46, \"Anthony Lapenna\" notifications@github.com wrote:\n\n@ghenry https://github.com/ghenry what's the difference between these 2\nfilters ? Result should be the same, no ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1120#issuecomment-322111963,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAJveA8FXAqDQlPEQz_s-osMFQeghLA7ks5sX-06gaJpZM4O1yW1\n.\n. TLSv1.2 is stronger.. \n",
    "soletan": "So, default value of filter might be (uid=%s) instead of having separate field for name of attribute holding user ID and combine some custom filter with the one you use internally. Input validation should limit to ensure filter includes =%s as a substring.. ",
    "denzuko": "In my environment I've been able to create two groups in AD. One being for users and the other for admins then using the ldap filters to narrow it down.\n=== Example \n==== User group\nBaseDN ::= \"OU=Members,DC=example,DC=com\"\nfilter ::= (&(objectClass=user)(memberof=CN=Portainer Users,OU=Applications,OU=Groups,DC=example,DC=com))\nUsername attribute ::= samAccountName\n==== Admin group\nBaseDN ::= \"OU=Users,OU=Admin,DC=example,DC=com\"\nUsername attribute ::= samAccountName\nfilter ::= (&(objectClass=user)(memberof=CN=Portainer Admins,OU=Applications,OU=Groups,DC=example,DC=com))\nGroup search configurations\nI have no idea what go here but this appears to be what's needed or could be expanded to fill that function. (ie setting the admin flag based on group)\nBetter documentation around how to setup ldap might be in order for filling in that last mile.\n. ",
    "Hugh----": "Yeah, thanks very much and this is what I know that I can achieve, but passwords may expire after a certain time. Still tend to request for such a setting in Web UI so that it can be masked and updated. What do you think?. ",
    "Madko": "I'm also trying to run portainer behind a proxy, but as soon as I add the env http_proxy, the portainer container doesn't start anymore. It looks like it's trying to join the docker endpoint thru the proxy. Which doesn't make sense since it's a socket file.\n\nConnecting to the Docker endpoint... \n\nand in the log:\njanv. 23 09:15:00 docker0-s285 dockerd[7187]: time=\"2018-01-23T09:15:00.873558191Z\" level=info msg=\"ignoring event\" module=libcontainerd namespace=moby topic=/containers/delete type=\"*events.ContainerDelete\"\njanv. 23 09:15:00 docker0-s285 dockerd[7187]: time=\"2018-01-23T09:15:00.889727690Z\" level=error msg=\"fatal task error\" error=\"task: non-zero exit (1)\" module=node/agent/taskmanager node.id=rv5d88pmui4nxyannpgrdgxay service.id=rod4bvighwnxbgzhsqwvzhzm1 task.id=to7n2wrpqmtnj481ruq5xesyc\nThat's all I have.\nI try docker run and docker service, same results. If I remove the -e (or --env-file) it's starting fine, I can use the interface until I hit something that tryes to grab data from the outside world.\nSo how can I pass proxy address to the portainer service ? Is it sure to be working ? How can I have more debug information ?\nbest regards,\nEdouard. How can I get them ? \nMeanwhile, I've found a workaround:\n- Create portainer service without env about proxy\n- Use portainer to add env variable for https_proxy to the portainer service\n- with docker cli, scale down to 0 and then to 1 to update it.\n- Then it works (I have the app templates etc). Here is the command I use to start portainer:\ndocker service create --name portainer --publish 9000:9000 --replicas=1 --constraint 'node.role == manager' --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=//opt/portainer,dst=/data portainer/portainer -H unix:///var/run/docker.sock --env https_proxy=http://10.156.0.1:8080\nIf I try to docker logs on the portainer container created by this command it doesn't return anything (container stays in starting state). But I can see some traffic on the proxy server.\n[root@docker0-s287 ~]# docker ps --all\nCONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS                             PORTS               NAMES\n83e280d7491e        portainer/portainer:latest   \"/portainer -H unix:\u2026\"   30 seconds ago      Up 24 seconds (health: starting)   9000/tcp            portainer2.1.50onqpp7mj1vnr7tpidb8ps6m\nafter a few seconds, the container is removed and recreated by docker service.\nSo is this correct to use --env to pass my proxy settings to the docker service ?. @deviantony thanks this was as stupid as that. Now everything is working fine.. ",
    "laurentleseigneur": "Hi,\nis there any plan to support GitHub authent ? \nthanks. ok thanks. ",
    "caleno": "+1 for Oauth support. I'll make a new merge request. . ",
    "sandys": "hey guys, I'd like to add that this is a big feature for us as well. We use Google Auth as a SSO for many of our services (as a lot of startups do). Google Auth also has built in support for 2FA and all the security stuff.\nIn addition, a lot of enterprises are moving to Google's cloud identity product - https://cloud.google.com/identity/\nThis is the single biggest thing that blocks deployment in a lot of places.. @deviantony - is there a way to make it work without publishing it in host mode OR restricting it to localhost/127.0.0.1.\nWe dont want the agent to be world visible - but the host mode setting makes it world visible. How do we fix this ?\nwe are trying to ensure security by default.. ",
    "clearsensespw": "this is very important for us as well - OAuth/SAML support. FYI - we would pay for a \"pro\" version of portainer if it had stuff like this (auth and security centric). ",
    "jozemlakar": "We are considering implementing this using https://github.com/coreos/go-oidc which is based on https://godoc.org/golang.org/x/oauth2\nAny thoughts / objections?. As things go, our implementation changed and we are not allowed to use portainer in our project. So this won't happen, sry.. Techical I suppose. We are hosting our solution on an existing Docker Swarm cluster. And Portainer will be used by Ops but not Dev as it gives insight to the cluster as a whole opposed to just our solution.\n. Yes. We haven't been able to find a pattern where we could limit the user to resources pertaining to this project but at the same time keep full permission on these resources. Ops were determined this is not the tool for the job and the idea was dropped.. ",
    "DovydasAL": "Submitted a pull request for this\n2515 .",
    "GrumpyMeow": "I'm trying to achieve that a new container from an appTemplate will get a specific ip#. I've tried to look into the code, but am unable to get it to work.\nIs this something that should be working on 1.20.0?\n[\n    {\n      \"type\": 1,\n      \"title\": \"Webserver\",\n      \"description\": \"Webserver\",\n      \"logo\": \"https://google.com/logo.svg\",\n      \"image\": \"webserver:latest\",\n      \"name\": \"webserver\",\n      \"registry\": \"test.azurecr.io\",\n      \"network\": \"nat\",\n      \"restart_policy\": \"always\",\n      \"hostname\": \"webserver\",\n      \"platform\": \"windows\",\n      \"categories\": [\"webserver\"],\n      \"hosts\": [{\"webserver.local:172.24.103.22\"}],\n      \"ports\": [\n        \"443/tcp\"\n      ]\n    }\n]. I work for a Microsoft oriented company which is trying to adopt Docker.\nFor us the ability to clone from VSTS would make the adoption much user friendlier.\nIn this thread someone described that the issue is already resolved in Go-Git a while ago.\nIs resolving this issue not as easy as using a later version of Go-Git?\n. @olljanat We're trying to go all-in on VSTS: build agents, CI/CD, Pull Requests, GIT, scrumb board, etc. \nI want to give all developers from my department the option to run Portainer locally on their development machines to manage Docker in a more user-friendly manner. \nFor now i don't feel comfortable to start using webhooks.. ",
    "zhoulouzi": "```\n[\n  {\n    \"ID\": \"dqayjiao3elcrgjvb4t89wupz\",\n    \"Version\": {\n      \"Index\": 1255\n    },\n    \"CreatedAt\": \"2017-07-25T02:07:09.871234158Z\",\n    \"UpdatedAt\": \"2017-08-02T04:02:25.15289773Z\",\n    \"Spec\": {\n      \"Labels\": {\n  },\n  \"Role\": \"manager\",\n  \"Availability\": \"active\"\n},\n\"Description\": {\n  \"Hostname\": \"swarm-master3\",\n  \"Platform\": {\n    \"Architecture\": \"x86_64\",\n    \"OS\": \"linux\"\n  },\n  \"Resources\": {\n    \"NanoCPUs\": 8000000000,\n    \"MemoryBytes\": 8202461184\n  },\n  \"Engine\": {\n    \"EngineVersion\": \"17.06.0-ce\",\n    \"Labels\": {\n      \"provider\": \"generic\"\n    },\n    \"Plugins\": [\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"awslogs\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"fluentd\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"gcplogs\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"gelf\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"journald\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"json-file\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"logentries\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"splunk\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"syslog\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"bridge\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"host\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"macvlan\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"null\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"overlay\"\n      },\n      {\n        \"Type\": \"Volume\",\n        \"Name\": \"local\"\n      }\n    ]\n  },\n  \"TLSInfo\": {\n    \"TrustRoot\": \"-----BEGIN CERTIFICATE-----\\nMIIBajCCARCgAwIBAgIUQbe4mG2tZjZqYx7ReE7K+otgxq8wCgYIKoZIzj0EAwIw\\nEzERMA8GA1UEAxMIc3dhcm0tY2EwHhcNMTcwNzIxMDIwNjAwWhcNMzcwNzE2MDIw\\nNjAwWjATMREwDwYDVQQDEwhzd2FybS1jYTBZMBMGByqGSM49AgEGCCqGSM49AwEH\\nA0IABC1lfNYgfQ1D4WTt3SWcAk2t1Z6qEXSzJDvXZmD24dI+DMlExBUV0OfuPRai\\ne\\/TsxoA2BVXDMYV3mFgkAXavjvOjQjBAMA4GA1UdDwEB\\/wQEAwIBBjAPBgNVHRMB\\nAf8EBTADAQH\\/MB0GA1UdDgQWBBR+K\\/DQnVRb8dcegW0RnHScyrpG3TAKBggqhkjO\\nPQQDAgNIADBFAiB0HihVO9j\\/OkFP4+FYHUzvJSoiUVs8BC4FkO4Y15T4KgIhANvV\\nB\\/oWngDdFY+aeEiH4+eU1InNLtesQr2f1dSmKK3z\\n-----END CERTIFICATE-----\\n\",\n    \"CertIssuerSubject\": \"MBMxETAPBgNVBAMTCHN3YXJtLWNh\",\n    \"CertIssuerPublicKey\": \"MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAELWV81iB9DUPhZO3dJZwCTa3VnqoRdLMkO9dmYPbh0j4MyUTEFRXQ5+49FqJ79OzGgDYFVcMxhXeYWCQBdq+O8w==\"\n  }\n},\n\"Status\": {\n  \"State\": \"ready\",\n  \"Addr\": \"0.0.0.0\"\n},\n\"ManagerStatus\": {\n  \"Leader\": true,\n  \"Reachability\": \"reachable\",\n  \"Addr\": \"192.168.30.96:2377\"\n}\n\n}\n]\n.\n[\n  {\n    \"ID\": \"dqayjiao3elcrgjvb4t89wupz\",\n    \"Version\": {\n      \"Index\": 1255\n    },\n    \"CreatedAt\": \"2017-07-25T02:07:09.871234158Z\",\n    \"UpdatedAt\": \"2017-08-02T04:02:25.15289773Z\",\n    \"Spec\": {\n      \"Labels\": {\n  },\n  \"Role\": \"manager\",\n  \"Availability\": \"active\"\n},\n\"Description\": {\n  \"Hostname\": \"swarm-master3\",\n  \"Platform\": {\n    \"Architecture\": \"x86_64\",\n    \"OS\": \"linux\"\n  },\n  \"Resources\": {\n    \"NanoCPUs\": 8000000000,\n    \"MemoryBytes\": 8202461184\n  },\n  \"Engine\": {\n    \"EngineVersion\": \"17.06.0-ce\",\n    \"Labels\": {\n      \"provider\": \"generic\"\n    },\n    \"Plugins\": [\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"awslogs\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"fluentd\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"gcplogs\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"gelf\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"journald\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"json-file\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"logentries\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"splunk\"\n      },\n      {\n        \"Type\": \"Log\",\n        \"Name\": \"syslog\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"bridge\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"host\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"macvlan\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"null\"\n      },\n      {\n        \"Type\": \"Network\",\n        \"Name\": \"overlay\"\n      },\n      {\n        \"Type\": \"Volume\",\n        \"Name\": \"local\"\n      }\n    ]\n  },\n  \"TLSInfo\": {\n    \"TrustRoot\": \"-----BEGIN CERTIFICATE-----\\nMIIBajCCARCgAwIBAgIUQbe4mG2tZjZqYx7ReE7K+otgxq8wCgYIKoZIzj0EAwIw\\nEzERMA8GA1UEAxMIc3dhcm0tY2EwHhcNMTcwNzIxMDIwNjAwWhcNMzcwNzE2MDIw\\nNjAwWjATMREwDwYDVQQDEwhzd2FybS1jYTBZMBMGByqGSM49AgEGCCqGSM49AwEH\\nA0IABC1lfNYgfQ1D4WTt3SWcAk2t1Z6qEXSzJDvXZmD24dI+DMlExBUV0OfuPRai\\ne\\/TsxoA2BVXDMYV3mFgkAXavjvOjQjBAMA4GA1UdDwEB\\/wQEAwIBBjAPBgNVHRMB\\nAf8EBTADAQH\\/MB0GA1UdDgQWBBR+K\\/DQnVRb8dcegW0RnHScyrpG3TAKBggqhkjO\\nPQQDAgNIADBFAiB0HihVO9j\\/OkFP4+FYHUzvJSoiUVs8BC4FkO4Y15T4KgIhANvV\\nB\\/oWngDdFY+aeEiH4+eU1InNLtesQr2f1dSmKK3z\\n-----END CERTIFICATE-----\\n\",\n    \"CertIssuerSubject\": \"MBMxETAPBgNVBAMTCHN3YXJtLWNh\",\n    \"CertIssuerPublicKey\": \"MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAELWV81iB9DUPhZO3dJZwCTa3VnqoRdLMkO9dmYPbh0j4MyUTEFRXQ5+49FqJ79OzGgDYFVcMxhXeYWCQBdq+O8w==\"\n  }\n},\n\"Status\": {\n  \"State\": \"ready\",\n  \"Addr\": \"0.0.0.0\"\n},\n\"ManagerStatus\": {\n  \"Leader\": true,\n  \"Reachability\": \"reachable\",\n  \"Addr\": \"192.168.30.96:2377\"\n}\n\n}\n]\n```. i found that the swarm-master is the leader of the cluster\ndqayjiao3elcrgjvb4t89wupz     swarm-master3       Ready               Active              Leader\nmcs9d0go50dg78693rhdoeoz7     swarm-master2       Ready               Active              Reachable\nmhey39y5ucuqpj5vqtdrs2hsg *   swarm-master1       Ready               Active              Reachable. i found that the swarm-master is the leader of the cluster\ndqayjiao3elcrgjvb4t89wupz     swarm-master3       Ready               Active              Leader\nmcs9d0go50dg78693rhdoeoz7     swarm-master2       Ready               Active              Reachable\nmhey39y5ucuqpj5vqtdrs2hsg *   swarm-master1       Ready               Active              Reachable. ",
    "r15ch13": "Should have mentioned that port 9000 is not exposed and I connect via an SOCKS5 proxy created with ssh \ud83d\ude04 . Just ran docker volume ls and got:\nerror during connect: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.30/volumes: read unix @->/var/run/docker.sock: read: connection reset by peer\nDocker crashed and restarted like I described above.. As far as I know only local. Is there a way to list all installed drivers?. @ncresswell \n```\nll /var/lib/docker/plugins\ndrwx------  4 root root 4096 Aug 15 10:00 73b2996d696bef3409770e93c87614a7d00d7810cfc0823865961a9a73756452/\ndrwx------  3 root root 4096 Apr  6 18:57 storage/\ndrwx------  2 root root 4096 May 11 19:21 tmp/\ncd 73b2996d696bef3...\n-rw-------  1 root root 1453 Aug 15 10:00 config.json\ndrwxr-xr-x  2 root root 4096 May 11 19:21 propagated-mount/\ndrwxrwxr-x 23 www  www  4096 Aug 15 10:00 rootfs/\ncd rootfs\ndrwxr-xr-x  2 www  www  4096 Feb  8  2017 bin/\ndrwxr-xr-x  2 www  www  4096 May 30  2016 boot/\ndrwxr-xr-x  4 www  www  4096 Aug 15 10:00 dev/\n-rwxr-xr-x  1 root root    0 Aug 15 10:00 .dockerenv*\ndrwxr-xr-x 46 www  www  4096 Aug 15 10:00 etc/\ndrwxrwxr-x  5 www  www  4096 Feb  8  2017 go/\ndrwxr-xr-x  2 www  www  4096 May 30  2016 home/\ndrwxr-xr-x  9 www  www  4096 Feb  8  2017 lib/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 lib64/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 media/\ndrwxr-xr-x  2 www  www  4096 May 30  2016 mnt/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 opt/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 proc/\ndrwx------  2 www  www  4096 Jan 16  2017 root/\ndrwxr-xr-x  7 www  www  4096 Feb  8  2017 run/\ndrwxr-xr-x  2 www  www  4096 Feb  8  2017 sbin/\ndrwxr-xr-x  2 www  www  4096 Jun 10  2012 selinux/\ndrwxr-xr-x  2 www  www  4096 Jan 16  2017 srv/\ndrwxr-xr-x  2 www  www  4096 Jul 14  2013 sys/\ndrwxrwxr-x  2 www  www  4096 Feb  8  2017 tmp/\ndrwxr-xr-x 10 www  www  4096 Feb 14 02:57 usr/\ndrwxr-xr-x 11 www  www  4096 Feb  8  2017 var/\n`. @ncresswell \nI have a plugins and a volumes directory. Docker works, all containers are running fine.\nIt may has something to do with listing all volumes, becausedocker volume lscrashes it too.\n```\nll /var/lib/docker\ndrwx------  5 root root  4096 Apr  6 18:57 aufs/\ndrwx------ 15 root root  4096 Aug 15 08:55 containers/\ndrwx------  3 root root  4096 Apr  6 18:57 image/\ndrwxr-x---  3 root root  4096 Apr  6 18:57 network/\ndrwx------  5 root root  4096 May 11 19:21 plugins/\ndrwx------  2 root root  4096 Apr  6 18:57 swarm/\ndrwx------  2 root root  4096 Aug 15 10:00 tmp/\ndrwx------  2 root root  4096 Apr  6 18:57 trust/\ndrwxr-xr-x 24 root root 12288 Aug 15 10:01 volumes/\n```. I may have found the problem. One volume seems to be corrupt.docker volume inspect config-plex` results in:\n```\n\ndocker volume inspect config-plex\n[]\nerror during connect: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.30/volumes/config-plex: EOF\nEvery other volume works:\ndocker volume inspect gitea-data\n[\n    {\n        \"Driver\": \"local\",\n        \"Labels\": null,\n        \"Mountpoint\": \"/var/lib/docker/volumes/gitea-data/_data\",\n        \"Name\": \"gitea-data\",\n        \"Options\": {},\n        \"Scope\": \"local\"\n    }\n]\n. @ncresswell \nThe plugins directory contains\nll /var/lib/docker/plugins\ndrwx------  4 root root 4096 Aug 15 10:00 73b2996d696bef3409770e93c87614a7d00d7810cfc0823865961a9a73756452/\ndrwx------  3 root root 4096 Apr  6 18:57 storage/\ndrwx------  2 root root 4096 May 11 19:21 tmp/\nPosted it before, but edits don't get emailed \ud83d\ude01 . I removed every volume step by step, but after removing all and running `docker volume prune` it still hasn't worked. So I created a backup of all my volumes and run:\nsudo service docker stop\nsudo rm -rf /var/lib/docker\nsudo service docker start\n```\nNow it works again... Thanks for the help \ud83d\udc4d \n. \n",
    "blackholegalaxy": "Ok there is several options we can pass to service create command. It would be great if portainer was able to set them all. As rancher does for example.. ",
    "Zwordi": "@WTFKr0 \nCould you share the syntax of your daemon.json about the log-drivers section ?\nThanks. ",
    "soulteary": "@deviantony Hi, If you are willing to improve the front-end development mode, support preview & debug function, I'll try to finish the feature: automate all translation operations in the front-end without changing the template.  : D. ",
    "youlu-cn": "@deviantony it works . ",
    "natoriousbigg": "@deviantony When I hit the Connect button on the console page, it says \"Failure unable to exec into container.\" Doesn't seem Portainer produces any logs or have a debug mode. If there is, I can turn it on and post the output.. Nevermind, I found that the issue is related to websocket based on the console output from Firebox. The problem was due to Traefik version 1.35 that I was using to reverse proxy which has a known bug with websocket. I reverted back to version 1.31 and the issue is resolved. Issue is not due to portainer. Will close this issue. Thanks for the help.. ",
    "masudak": "Console had this error.\napp.33d6a946.js:3 TypeError: Cannot read property 'URL' of undefined\n    at t (app.33d6a946.js:29)\n    at B (app.33d6a946.js:29)\n    at app.33d6a946.js:30\n    at app.33d6a946.js:3\n    at o.$eval (app.33d6a946.js:3)\n    at o.$digest (app.33d6a946.js:3)\n    at o.$apply (app.33d6a946.js:3)\n    at i (app.33d6a946.js:2)\n    at u (app.33d6a946.js:2)\n    at XMLHttpRequest.y.onload (app.33d6a946.js:2)\nYes, Cannot read property 'URL' of undefined error was shown as red notification message on right top corner.\n\n. There is one thing I found.\nIf I created new container from webui to click Add container, and set environment variables, it can be modified it after launched to click Start container to reflect the changes.\nAnd if I used docker-compose like this, it worked too.\nversion: '2'\nservices:\n  redis-sample:\n    image: redis\n    environment:\n      KEY: VALUE\nBut if I used this compose file such as using GCR, it failed.\nversion: '2'\nservices:\n  redis-sample-gcr:\n    image: asia.gcr.io/foo/bar\n    environment:\n      KEY: VALUE. Is it necessary to be known to portainer for our registry? Or is there any tips to make it known to portainer?. Thank you so much, let me know if I should investigate and submit more detail.. @WTFKr0 I added the registry on Registries menu, and then it worked without any errors. Thank you so much!! I hope it will work without any manual operations!. Your approach is better than now as a first measure, but how about making enabling to set command line option for a private registry such as below.\nportainer:\n    image: portainer/portainer\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    command: >-\n      --admin-password=$$XXXXXXX\n      --add-registory={\"Asia GCR\": \"asia.gcr.io\"}\n      --add-registory={\"US GCR\": \"us.gcr.io\"}\n      --add-registory={\"EU GCR\": \"eu.gcr.io \"}\n    ports:\n      - \"9000:9000\"\n. @deviantony \n\nI'm not keen to support these kind of options on the CLI.\n\nOkay, I got it.\n\nI'm thinking that there might be a way to circumvent the existing registry implementation\n\nThanks, it helps me a lot!. ",
    "knall0": "Maybe I discovered a related bug; Docker.io seems not to be recognized as the Dockerhub-Registry and the same Error occurs.\nSteps to reproduce this Error:\n1. Start a (fresh) Portainer instance in docker\ndocker run -d -p 9000:9000 --name=\"portainer\" --privileged --restart=unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v /portainerdata:/data -e  portainer/portainer:1.15.3\n2. Start a Jenkins instance in docker:\ndocker run --privileged -p 8080:8080 -p 50000:50000 --name jenkins -v /jenkins/home:/var/jenkins_home jenkins/jenkins:2.73.2\n3.  Go to container Jenkins and hit Duplicate/edit\n4. Edit Image Configuration Name to:\ndocker.io/jenkins/jenkins:2.73.3\n5. Go again to container Jenkins and hit Duplicate/edit\n--> The Gui shows this Error:\nThe Docker registry for the docker.io/jenkins/jenkins:2.73.3 image is not registered inside Portainer, you will not be able to create a container. Please register that registry first.\nWorkaround: If I use in step 4 the image tag jenkins/jenkins:2.73.3 instead - so without the docker.io/ - there will be no error. But the dropdown menu suggests only image tags with docker.io/, so this will be the first one to try. \nI would try to recognize docker.io as dockerhub, so that the registry is registered. . related to \"replace mode\" #1691 Ownership changes through container edit/replace. ",
    "xenek": "Can confirm Knall0 issue...\n\"The Docker registry for the arm32v7/wordpress:latest image is not registered inside Portainer, you will not be able to create a container. Please register that registry first. \"\nWhile trying to duplicate/Edit the container.. ",
    "brando56894": "This happens for pretty much all of my images.. Has this been resolved in 1.17.1? It is still happening to me: \nFailure: can't read property of 'authentication' of null. ",
    "lweb20": "Temporary solution: Add the url docker.io in the Registries section.. ",
    "am-webdev": "I can confirm this happens for images from Docker Hub as well.\nPortainer version 1.16.4\nThe workaround from @lweb20 did not work for me. . ",
    "zbence": "maybe an export in xml or other format that portainer knows and I can import to other portainer instance in other swarm cluster. ",
    "CyrilPeponnet": "Make sense in my setup as I have a nfs volume mounted hosting several TB of data and from https://github.com/moby/moby/blob/8af4db6f002ac907b6ef8610b237879dfcaa5b7a/daemon/disk_usage.go#L70-L71 it looks like it will try to traverse the mount...\nIt didn't reach the 17.06 Milestone (https://github.com/moby/moby/pull/33620) . Forgot to add to keep up the good work \ud83d\udc4d Really nice project especially to handle swarm API.. Looks ok to me: \n\n. ",
    "DanH42": "I personally like the flexibility of being able to give the main admin user a different name, whether by deleting and re-creating, renaming, or setting it on installation. I wouldn't want to prevent deleting the built-in user unless choosing a different username was possible.\nAssuming users are able to be renamed, I'd also support preventing deletion of the built-in admin user, since that would also prevent possible mistakes like deleting the last/only admin user (since deleting yourself is currently possible).. ",
    "overra": "Sounds good to me @deviantony!. Sounds good to me!. Thanks for calling that out, I hate using that pattern if I don't have to. . ",
    "Pyton": "But knowing mounting path size can be counting by system commands eg. du -sh and cached for few mins. Additionally there may be option to turn off collecting that info. What do you think?. ",
    "subzero79": "Is it possible to add now the volume size? docker system df -v now returns size of the volumes, same as the api\ncurl -s --unix-socket /var/run/docker.sock http::/system/df | jq '.Volumes[]|.Name, .Mountpoint, .UsageData.Size'\n\"6be2bcc73b92d91b05edaa8061976f001fe3a86a5ea6aa078de77bfe6adb9732\"\n\"/media/dev-disk-by-label-docker/docker/volumes/6be2bcc73b92d91b05edaa8061976f001fe3a86a5ea6aa078de77bfe6adb9732/_data\"\n1067508\n\"7f8e2b46a5476765d7c87deca9bfc02fb44f9375c2eb56cd063b622038fede03\"\n\"/media/dev-disk-by-label-docker/docker/volumes/7f8e2b46a5476765d7c87deca9bfc02fb44f9375c2eb56cd063b622038fede03/_data\"\n0\n\"9d131462cd1a817f873be7a47f59c0669b22c6a697998638cca747fa2a9277a7\"\n\"/media/dev-disk-by-label-docker/docker/volumes/9d131462cd1a817f873be7a47f59c0669b22c6a697998638cca747fa2a9277a7/_data\"\n134117\n\"1d0eb6cb43f37a5840cd2f3567b21387e38c68fa49919f689fb2011748c45066\"\n\"/media/dev-disk-by-label-docker/docker/volumes/1d0eb6cb43f37a5840cd2f3567b21387e38c68fa49919f689fb2011748c45066/_data\"\n0\n\"594f896329420608196451efe138eb33f85c07e0e27681e7fce3e27e3264c04b\"\n\"/media/dev-disk-by-label-docker/docker/volumes/594f896329420608196451efe138eb33f85c07e0e27681e7fce3e27e3264c04b/_data\"\n0\n\"c9eced158e1384f2d4cc25e6ddd806050cb70e812a2930a5324524df20ae6a7e\"\n\"/media/dev-disk-by-label-docker/docker/volumes/c9eced158e1384f2d4cc25e6ddd806050cb70e812a2930a5324524df20ae6a7e/_data\"\n1471\n\"f411d367c3167f2ba8d6c7fac450f4597a5a5642f5241bac6dc2872164a641fe\"\n\"/media/dev-disk-by-label-docker/docker/volumes/f411d367c3167f2ba8d6c7fac450f4597a5a5642f5241bac6dc2872164a641fe/_data\"\n0\n\"06004a654ffcd609182a02dbd5a4c85147c405f156ebb00bccbef2fe908af706\"\n\"/media/dev-disk-by-label-docker/docker/volumes/06004a654ffcd609182a02dbd5a4c85147c405f156ebb00bccbef2fe908af706/_data\"\n0\n\"83ffa27b75ab56eae6e8a7918bea6f24785a50f68a8664be6bb4dce574f6e20e\"\n\"/media/dev-disk-by-label-docker/docker/volumes/83ffa27b75ab56eae6e8a7918bea6f24785a50f68a8664be6bb4dce574f6e20e/_data\"\n0\n\"4fab9b65786531e298a21c14e985f15e0c7ba8ad7b1799b45ce43476051f2021\"\n\"/media/dev-disk-by-label-docker/docker/volumes/4fab9b65786531e298a21c14e985f15e0c7ba8ad7b1799b45ce43476051f2021/_data\"\n1246978904\n\"775a4a337fdd1f46598c67053bd11c1e8beb1d5c8910d0a074f7af478b2b0c8b\"\n\"/media/dev-disk-by-label-docker/docker/volumes/775a4a337fdd1f46598c67053bd11c1e8beb1d5c8910d0a074f7af478b2b0c8b/_data\"\n0\n\"8a031b3dfcac79652c998c0ed5d9fcfe9c97d1dffa223dd9fa991475751add8c\"\n\"/media/dev-disk-by-label-docker/docker/volumes/8a031b3dfcac79652c998c0ed5d9fcfe9c97d1dffa223dd9fa991475751add8c/_data\"\n0\n\"ac4366dbb7f3b9d2d66dfc365a811bca53c4244c98ad7ca62dda46c196761534\"\n\"/media/dev-disk-by-label-docker/docker/volumes/ac4366dbb7f3b9d2d66dfc365a811bca53c4244c98ad7ca62dda46c196761534/_data\"\n20896\n\"b391c05bf6fb5f7139c00232e426d20a3c7ea6e044b88c73ff8c7ebfcfa50695\"\n\"/media/dev-disk-by-label-docker/docker/volumes/b391c05bf6fb5f7139c00232e426d20a3c7ea6e044b88c73ff8c7ebfcfa50695/_data\"\n131878\n\"edeee6d000906ef8246a7460faa8fb865fe978a70c6fdbe5ab3b61becd978452\"\n\"/media/dev-disk-by-label-docker/docker/volumes/edeee6d000906ef8246a7460faa8fb865fe978a70c6fdbe5ab3b61becd978452/_data\"\n0\n\"489fbd01c92a5202d57f89bee975d0329e3d1ebcb2e3229defdfe41f771c1e37\"\n\"/media/dev-disk-by-label-docker/docker/volumes/489fbd01c92a5202d57f89bee975d0329e3d1ebcb2e3229defdfe41f771c1e37/_data\"\n0\n\"f86db1314aebfad7ea6285edaf8d26e4bab8bbcb08a839a50791abc69521c2c7\"\n\"/media/dev-disk-by-label-docker/docker/volumes/f86db1314aebfad7ea6285edaf8d26e4bab8bbcb08a839a50791abc69521c2c7/_data\"\n32768\n\"48d24a9a6ce204092309adec3feb855ec94eed7a956c50132672fd6d1d7afa67\"\n\"/media/dev-disk-by-label-docker/docker/volumes/48d24a9a6ce204092309adec3feb855ec94eed7a956c50132672fd6d1d7afa67/_data\"\n0\n\"9d61dc4fe196185423e66fe8d3677253c050ed5b42a67d76178ce935b32eae57\"\n\"/media/dev-disk-by-label-docker/docker/volumes/9d61dc4fe196185423e66fe8d3677253c050ed5b42a67d76178ce935b32eae57/_data\"\n33574\n\"9e4c46c2099371e53a726bb665315657e76ca57ecc73c01eb57b42b59691d20a\"\n\"/media/dev-disk-by-label-docker/docker/volumes/9e4c46c2099371e53a726bb665315657e76ca57ecc73c01eb57b42b59691d20a/_data\"\n0\n\"f5c186ffa62e1fbecbbf37a3c9b83ad6b8ecf1098599f0e86df31cad1f66479c\"\n\"/media/dev-disk-by-label-docker/docker/volumes/f5c186ffa62e1fbecbbf37a3c9b83ad6b8ecf1098599f0e86df31cad1f66479c/_data\"\n33574\n\"2b3b99d8c76d04c7a5105571b68f023e5f59240418e3ac9d54ba2a3219c5f739\"\n\"/media/dev-disk-by-label-docker/docker/volumes/2b3b99d8c76d04c7a5105571b68f023e5f59240418e3ac9d54ba2a3219c5f739/_data\"\n32768\n\"3cc9cc54813389a7083e2f2f292ac9264151e7b962f1c1c8c670ec5a0ceccd54\"\n\"/media/dev-disk-by-label-docker/docker/volumes/3cc9cc54813389a7083e2f2f292ac9264151e7b962f1c1c8c670ec5a0ceccd54/_data\"\n59. I didn\u2019t know that. You mean on low powered devices or high number of volumes ?. ",
    "palmerabollo": "No luck, still the same message. It could be something related to my setup, but everything works if I replace 1.14.0 with 1.13.0.. I'll try to remove & pull the image and try it again in the next few days to see if it fixes the issue.\nThanks for your help.. It worked. Thanks for your time and help, @deviantony.. Yes, I'm using the --no-auth flag, with a proxy in front of it adding the auth. It's not Portainer's fault. Sorry and thank you!. @deviantony when do you plan to release the version 1.15.3. This bug is pretty annoying since you can't edit services.. ",
    "Nepitwin": "It is a firewall blocking from UFW not a portainer issue after UFW configurations with iptables false and configuration a NAT rule and forward chain policy all works.. ",
    "raushansingh629": "it works by editing manage access.\nthank you. ",
    "aggresss": "@liamcottam Thanks a lot . ",
    "sdouglasnelson": "I am using a local Portainer endpoint. I can confirm it works correctly from a remote endpoint, but for my use case I'd prefer to use a local one.. I am using a local Portainer endpoint. I can confirm it works correctly from a remote endpoint, but for my use case I'd prefer to use a local one.. ",
    "guntram": "@deviantony \n\nHey guys, im having a problem on creating a containername(title) based on a image with the sign \"-\".\n\nIt's about the title ;)\nMaybe try \"test-test\" or something like that.\nIf you use the minus in the title, the growl pops up telling that the only allowed characters are the usual alphabet, numbers, and \".-_\" - so it should accept minuses in the title, but it doesn't.. @deviantony \n\nHey guys, im having a problem on creating a containername(title) based on a image with the sign \"-\".\n\nIt's about the title ;)\nMaybe try \"test-test\" or something like that.\nIf you use the minus in the title, the growl pops up telling that the only allowed characters are the usual alphabet, numbers, and \".-_\" - so it should accept minuses in the title, but it doesn't.. ",
    "jammsen": "@deviantony \nI can't reproduce the behavior from yesterday, i just copy pasted didstopia/7dtd-server into both field.\nSometimes it works, sometimes it wont, the error messages arent really speaking language for the error, that occurs, so thats no help at all \ud83d\udc4e . ",
    "yassirh": "@ncresswell I have just tried to run as Administrator and ended up with ContainerAdministrator : \n\n\n. I am thinking we could use something like chosen to make the select box searchable... Any thoughts?. Great! I am looking into it :). @deviantony I have taken into consideration your comment. I think you can merge now :). @deviantony it is fixed :). Will look into it soon :)\n. @deviantony can you rebuild an image for this PR ?. @deviantony I am as shocked as you are by the changes on service.html! I will look into it.\nI will also change the name of the function to be clearer.. @deviantony  It should be all good now :). You are welcome :). I think this can be easily solved by setting a fixed width for this column and then use text-overflow: ellipsis; and a tooltip to show the entire name when hovered over.. @deviantony I agree. However, when do you want to truncate? based on the number of characters?. @deviantony @1138-4EB I think we can indeed only solve this for the images without a name and only display part of the hash while leaving the others intact since their names are meaningful. What do you think?. A filter hideshasum already exists but I think it is not working correctly : https://github.com/portainer/portainer/blob/develop/app/filters/filters.js#L283\nFrom what I understand it only shows image names that doesn't start with @sha when it should be sha. what do you think ?. @deviantony & @1138-4EB  Can you review the latest changes?. I was \"inspired\" by an other filter but your suggestion looks good. I changed the code to take it into consideration. . You should also update the function's comment to take into consideration the change :). my bad. It seems like portainer is showing the memory including cache. At the moment, we use memory_stats.usage the includes memory_stats.stats.cache. \njson\n\"memory_stats\":{\n      \"usage\":1536000,\n      \"max_usage\":2859008,\n      \"stats\":{\n         \"active_anon\":8192,\n         \"active_file\":450560,\n         \"cache\":708608,\n         \"dirty\":0,\n         \"hierarchical_memory_limit\":52428800,\n         \"hierarchical_memsw_limit\":0,\n         \"inactive_anon\":61440,\n         \"inactive_file\":258048,\n         \"mapped_file\":536576,\n         \"pgfault\":1115,\n         \"pgmajfault\":8,\n         \"pgpgin\":894,\n         \"pgpgout\":704,\n         \"rss\":69632,\n         \"rss_huge\":0,\n         \"total_active_anon\":8192,\n         \"total_active_file\":450560,\n         \"total_cache\":708608,\n         \"total_dirty\":0,\n         \"total_inactive_anon\":61440,\n         \"total_inactive_file\":258048,\n         \"total_mapped_file\":536576,\n         \"total_pgfault\":1115,\n         \"total_pgmajfault\":8,\n         \"total_pgpgin\":894,\n         \"total_pgpgout\":704,\n         \"total_rss\":69632,\n         \"total_rss_huge\":0,\n         \"total_unevictable\":0,\n         \"total_writeback\":0,\n         \"unevictable\":0,\n         \"writeback\":0\n      },\n      \"limit\":52428800\n   }\nThe cli actually doesn't show the cache in the used memory stats_helpers.go when using : docker stats containerid\nI will create a PR to fix this.. Should the validation depend on the current endpoint or should it be global ?. I will make a PR soon.. Is there a service that returns the stacks over all the endpoints ? I have found StackService.stacks. however, I am not sure it loads everything.  . There is a validation when creating a stack. Did you check it out ? Maybe I missed something. is there an other way to create a stock other than the /stacks/new page?. @deviantony Indeed, I have added validation in the templates view.. There is an issue when fetching the list stacks under a standalone. I have been a bit busy lately... So I will try to fix it soon :)\nMaybe the issue is related to my setup. So if you can test it and give me feedback, It would be great!. @Trojan295 I kind of have a pull request ready :). @ncresswell can you give me an example?. @ncresswell  the screenshots are not included in your respone :). @deviantony the colors on the chart have been changed (image below). As for the concern, @ncresswell had it turned out to be a MiB vs MB issue. \n\n. @deviantony @aiminickwong & @olljanat  can you test this PR and give me some feedback ?. I think that we do because the image name is shown in portainer in the sha256 format while only showing a subset of the hash when using docker ps \n\n\n. Sorry I completely misread your first comment.. What I am trying do here is replicate the behavior of the docker cli. So I don't get what you mean :). By trying I meant it is already replicating. Look at the attached screenshot.\n\n. Done. I have changed it to true. however, it seems to me that there is an issue when docker isn't in swarm mode. We try to load the services and we get a 503.. ",
    "spezzino": "this is already done\nendpoint.URL = $filter('stripprotocol')(endpoint.URL);. Sorry, I did not tag the issue here, its already open #1117. ",
    "tymik": "any actions on that? alternate ldap server is a must in every software that works with ldap auth. ",
    "StoneYunZhao": "Successfully updated to 1.14.0 by updating to 1.13.2 first, thanks.. Successfully updated to 1.14.0 by updating to 1.13.2 first, thanks.. ",
    "dcferreira": "Yeah, I have an uncommon use case in which I don't want my containers to restart. It's possible to change the restart condition after creating the service, but that's not very user friendly.. ",
    "mihailescu2m": "any updates on this, @StefanScherer ?. Thanks @StefanScherer I followed the discussion there - is there no way to get portainer working with native containers on windows server 2016?. ",
    "mithuns": "I tried using --privileged flag as well as the pipe for socket. But does not seem to be working for me , my test dsl is just \npipeline {\n    agent {\n        docker { image 'node:7-alpine' }\n    }\n    stages {\n        stage('Test') {\n            steps {\n                sh 'node --version'\n            }\n        }\n    }\n}\nBut I get this\nStarted by user admin\nRunning in Durability level: MAX_SURVIVABILITY\n[Pipeline] node\nRunning on Jenkins in /var/jenkins_home/workspace/test-pipeline\n[Pipeline] {\n[Pipeline] sh\n+ docker inspect -f . node:7-alpine\n/var/jenkins_home/workspace/test-pipeline@tmp/durable-8d0344e5/script.sh: 2: /var/jenkins_home/workspace/test-pipeline@tmp/durable-8d0344e5/script.sh: docker: not found\n[Pipeline] sh\n+ docker pull node:7-alpine\n/var/jenkins_home/workspace/test-pipeline@tmp/durable-dbf75ea1/script.sh: 2: /var/jenkins_home/workspace/test-pipeline@tmp/durable-dbf75ea1/script.sh: docker: not found\n[Pipeline] }\n[Pipeline] // node\n[Pipeline] End of Pipeline\nERROR: script returned exit code 127\nFinished: FAILURE\nThis is how I am running jenkins\ndocker run --privileged -it -e -d -p 8080:8080 -v //./pipe/docker_engine://./pipe/docker_engine -v C:\\Users\\mithuns\\jenkins_config:/var/jenkins jenkins/jenkins:lts. Yeah, sorry, I am not even using Portainer for this. I thought this had a more docker related solution than anything else, but thank you. I will post this on jenkins repo. \nThanks again. . ",
    "KooshkakiH": "hi\nI cant run can not use portainer on windows 2019(1809\n\n). are you supporting win10(1809)?\n. what is time of supporting win server 2019(1809) and win 10(1809)?. > Portainer 1.20.1 and Portainer agent 1.2.1 will be released this week.\nsupport win server(1809) and win10(1809)?. hi \nI have  this problem in windows registry 2019(1809)\ndocker push ipaddress:5000/webapi:1.0.0\nThe push refers to repository [192.168.7.62:5000/salespluswebapi]\nff93af9127f9: Layer already exists\n379d250f6177: Layer already exists\need857420622: Layer already exists\n822dd463d821: Layer already exists\nf71e080cf3ef: Layer already exists\ne65f9767f8cc: Layer already exists\n88bcb9e1942a: Layer already exists\naa8891847df9: Layer already exists\nb9fa4df06e58: Skipped foreign layer\n37c182b75172: Skipped foreign layer\nreceived unexpected HTTP status: 500 Internal Server Erro. ",
    "kevincam3": "Oh wow, looks like everything I wrote got stripped out, Crazy. Ok let me try to attached all the screenshots again and answer your questions.\nDocker Version: https://goo.gl/qnyJRv\nPortainer Dashboard: https://goo.gl/W8GoGA\nContainers view: https://goo.gl/aCHGvY\nErrors in console: https://goo.gl/pzY8iB\nI did not install it. I went to the command line and executed portainer.exe after downloading and extracting the binary yesterday. I started it as previously described you can see the command line screenshot. The errors in the console you can see in the screenshot https://goo.gl/pzY8iB. The message says \"This feature is not yet available for native Docker Windows containers.\" As previously mentioned I started Portainer by just executing the portainer.exe file not with any flags. I assume by \"...access it in private session mode\" you mean incognito mode in Chrome which is what I last tried.\nHere's the result after executing portainer.exe then opening the browser to http://localhost:9000 and entering my login credentials:\nhttps://goo.gl/jk9FDB\n. I don't know what to put for Endpoint URL since Docker is running on my locahost. I tried \"localhost\" and \"127.0.0.1\" if you could explain how to use \"Manage a remote Docker instance\" for docker running on the same machine then that would solve my problem.. That worked. Thanks a lot. This should get documented somewhere. Exposing daemon on tcp://localhost:2375 without TLS is actually a setting in the docker interface: https://goo.gl/FxfK6U\n. ",
    "rhalff": "Not sure if totally relevant to this issue, but I needed a tmpfs mount to link within portainer and have used the example from the docker site:\nbash\ndocker volume create --driver local \\\n    --opt type=tmpfs \\\n    --opt device=tmpfs \\\n    --opt o=size=100m,uid=1000 \\\n    foo\nIt's then selectable just as any volume.. ",
    "kwerle": "Yes, that is the fix.  My point was that it wasn't clear what the issue was.  A connectivity test would have nailed it at registry creation time - if that's possible...  Thanks!. ",
    "asasmoyo": "Hello! I would like to start my contribution to here. If no one working on this, I would like to take it :). Great :)\nI am thinking to do http request to URL/v2 (with auth if it is present) then check wether it returns 200. Do you think is it enough to just do this?. @deviantony please take a look my pr. Ah yes, you are correct. I'll check how docker implement this. Sorry I don't really get what you mean @WTFKr0. But isn't make things more complicated?\nI have checked how docker constructs the endpoints. Docker creates all possible combinations of the endpoint, prefer https over http and v2 over v1. \nSee: https://github.com/moby/moby/blob/master/registry/service.go#L296\nShould we also do this? We can run the checks each in goroutine and see if at least one of them is valid. @WTFKr0 I can work on this. Should I go with this?\n\nDocker creates all possible combinations of the endpoint, prefer https over http and v2 over v1.. @WTFKr0 please check my update. Yes it is working, I just checked it.\nRegarding the auth check, do all docker registry support basic auth? If so, it would be simple to check the authentication as well. @deviantony do we really need to do auth check here? I can try working on it if you want. @deviantony @WTFKr0 I've added auth check, but I think it only works in v2. I don't think auth in v1 works like in v2. Do you know any references about auth in v1? Or can we just try basic auth to the endpoint?. > we can add an option when adding a registry to accept non valid certificate too\n\n@deviantony @WTFKr0 should we do this?. Please check @deviantony @WTFKr0 \n\nIf the registry had a bad certificate, user should add registry url to --insecure-registries daemon option\n\nI think we'll also need to add a warning about this somewhere. Even if tls verification is disabled, push/pull actions to said registry would fail if the url is not in insecure registries.. > When activating TLS verification, i always got the \"Registry url invalid\" error, shouln't i get a \"Unable to validate registry server certificate\" error ?\nWhat kind of registry server did you use? I just tried it using official registry server v2 with auth enabled + self signed ssl, I got \"Unable to validate registry server certificate\" when I checked \"TLS Verification\". what should we do next for this? @WTFKr0 @deviantony . > IMO we need to add the ability to specify TLS options as we do for endpoints (IDK if all the options exposed in the endpoint creation form are required here).\nAgree, I think we should do this. If you are ok I can start implementing this\n\nAlso this work should be part of the registry management feature and thus should probably be rebased against the feat56-registry-management and merged into this branch instead of develop.\n\nI'll do the rebase before my next push. @deviantony Sorry for the delay, I'll finish this by the end of this week.\nSure, I'll check it out.. I'am wondering what should I do for uploading cert files. There is already file upload handler here:\nhttps://github.com/portainer/portainer/blob/develop/api/http/handler/upload.go#L33\nIf I'm correct, endpoint already use it by passing its endpointID as folder. Should I use this with, for example registry-registryID as folder? Or should I create a new upload handler for handling cert files for registry?. I am thinking to do this similar with endpoint. Client sends post registry request then send upload cert files requests. But if the cert files come after post registry, then we will not have required certs to do connection check (for tls enabled with client certificate / self signed certificate).\nCould you suggest me better approach? @deviantony @WTFKr0 \n. > Test registry connection (that would require the introduction of a new API endpoint)\nwhat action should trigger this? what about after client receives all responses for certs upload?. good point, I also just realised it can be written better. ",
    "friism": "Ah, using @StefanScherer's changes to use winio makes it work for me too.\n\n. @deviantony @StefanScherer ready for review. rebased, @StefanScherer feel free to give a whirl.\nStill need to do the API-related changes. I can take a look tmrw Friday. @deviantony @StefanScherer ready for review.\n@StefanScherer if you want, feel free to add the more detailed versioncheck as follow-up. Agreed, this was just a testing hack - I'll rebase out that commit. @deviantony what do you want to do here? Is there a way to extricate the server host OS with angular?. Git saved the day. @deviantony what about someone that has configured Docker to listen on a non-standard socket file or named pipe?. fixed. Sorry, you mentioned already and I forgot - fixed.. ",
    "PatrickLang": "Does anyone have a container pushed to Docker Hub that I could try?. Thanks! Giving it a look. Here's what I'm getting right now. I had to update to the latest docker/dockerd.exe from master.dockerproject.org first.\nProcess isolation (default on Windows Server 1709) - works\nwith --isolation=hyperv - verified both on Windows Server version 1709 and Windows 10 version 1709\nConnect Failure\nopen //./pipe/docker_engine: message readmode pipes not supported\nIs that consistent with what you're seeing @friism and @StefanScherer ?\nI also double checked that it was being handled by running with dockerd.exe -D:\nDEBU[2017-10-27T17:39:56.789671000Z] HCSShim::CreateContainer id=f967aa300ef7d9884c1d6c606f708e835cf27f73d86ed5850fe64f1126120383 config={\"SystemType\":\"Container\",\"Name\":\"f967aa300ef7d9884c1d6c606f708e835cf27f73d86ed5850fe64f1126120383\",\"Owner\":\"docker\",\"IgnoreFlushesDuringBoot\":true,\"LayerFolderPath\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\f967aa300ef7d9884c1d6c606f708e835cf27f73d86ed5850fe64f1126120383\",\"Layers\":[{\"ID\":\"68de52ca-5622-5c24-baea-708358f023c1\",\"Path\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\945ea8554f9fe65fecbc006179f0038e4b8288bc67f5df692fd2c2a624e7e2df\"},{\"ID\":\"d3f12bc6-6abd-5ca7-b984-961589f70759\",\"Path\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\7e9c7a371c6efdab8d14bab592f19f0143f92ed06717a8ce326a0239d4a3c804\"},{\"ID\":\"af336f59-35c1-517c-808d-81dd6cc8428d\",\"Path\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\77d9dc52b021d7b659430800a40cd93b5bf7045fc4a5ebb4b0db4255c744c51e\"},{\"ID\":\"4f18bbae-1111-5d0e-bb5b-88371b2a6ad7\",\"Path\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\7d314064c55d0f8148e123b0d3d493982ff0925a0f8d7e630af48185f8b7cd5a\"},{\"ID\":\"c3bd3eb5-7e5b-5353-8ed0-994e7cc72cec\",\"Path\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\d4efa9c6742564402e7c2dd344d86977e61264572921b2198f9b32e6224ed251\"},{\"ID\":\"768b0c9c-d4c6-5625-ac20-e2ebc27cf6d9\",\"Path\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\9ed561c60ebef7bf7f919a5e1136af7641e5e1b1e3f09069ff38471dced51518\"},{\"ID\":\"bc74a93e-df9c-5a77-b2f3-3e6c8d7c0981\",\"Path\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\8fd36097680b1c28f2c93fbe9754ab0ca683bf9b6a2fb13c76896d12808516e2\"}],\"HostName\":\"f967aa300ef7\",\"MappedDirectories\":[{\"HostPath\":\"C:\\\\ProgramData\\\\docker\\\\volumes\\\\e121b90864c40c674df5cb9bd64b19ede560d857f3cf9c6982df9106b3003218\\\\_data\",\"ContainerPath\":\"c:\\\\data\",\"ReadOnly\":false,\"BandwidthMaximum\":0,\"IOPSMaximum\":0,\"CreateInUtilityVM\":false}],\"MappedPipes\":[{\"HostPath\":\"\\\\\\\\.\\\\pipe\\\\docker_engine\",\"ContainerPipeName\":\"docker_engine\"}],\"HvPartition\":true,\"EndpointList\":[\"bdceaebb-3c12-49ff-bdf5-bb9340f45356\"],\"HvRuntime\":{\"ImagePath\":\"C:\\\\ProgramData\\\\docker\\\\windowsfilter\\\\9ed561c60ebef7bf7f919a5e1136af7641e5e1b1e3f09069ff38471dced51518\\\\UtilityVM\"},\"AllowUnqualifiedDNSQuery\":true}\nDEBU[2017-10-27T17:39:57.233108800Z] HCSShim::CreateContainer succeeded id=f967aa300ef7d9884c1d6c606f708e835cf27f73d86ed5850fe64f1126120383 handle=76718496\n\"MappedPipes\":[{\"HostPath\":\"\\\\\\\\.\\\\pipe\\\\docker_engine\",\"ContainerPipeName\":\"docker_engine\"}] is there as it should be. ",
    "carlfischer1": "@olljanat named pipes into process isolated containers will work with 18.03.1. use with hyper-v isolated containers requires PRs that landed too late to make it into 18.03.1-ee-1:\n\nMicrosoft/go-winio#82\nmoby/moby#37364\ndocker/cli#1157\n\nSee https://github.com/docker/cli/pull/1157#issuecomment-401489729. ",
    "troychn": "i find out answer in this page\n#31427\nthanks ! @deviantony . ",
    "nenadilic84": "It was a pleasure \ud83d\ude04 . Got it, will change that! Thanks for the feedback. Hey @deviantony, let me know if it's this what you had in mind. . Didn't test it end to end. Only with the strings... And is quite strange that this is happening.\nNeed to take a closer look.\nThanks for taking time to verify. Hi @deviantony, I did an end to end test and seems that all is working fine.\nThe reason why you see different hashes is that of the bcrypt algorithm. \nYou should do the comparison by using the function cryptoService.CompareHashAndData(adminPasswordHash, \"admin123\")\nLet me know if you need more info on the verification process.. So the steps are quite straightforward:\n```\n./build.sh test\ndocker tag portainer/portainer:linux-amd64 nenadilic84/portainer:test\necho -n \"test1234\" > portainer-pass\ncp portainer-pass /tmp/portainer/\nrun it\ndocker run -it \\\n    -p 9000:9000 \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    -v /tmp/portainer:/data \\\n    --name portainer \\\n    portainer/portainer:linux-amd64 --admin-password-file '/data/portainer-pass'\nor in docker swarm\necho -n test1234 | docker secret create portainer-pass -\ndocker service create \\\n    --name portainer \\\n    --secret portainer-pass \\\n    --publish 9000:9000 \\\n    --constraint 'node.role == manager' \\\n    --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n    nenadilic84/portainer:test \\\n    --admin-password-file '/run/secrets/portainer-pass' \\\n    -H unix:///var/run/docker.sock\n``\nWhile writing down the steps and comparing the comment above I realized you don't have theecho -nbut justechowhich adds the newline character0a` to the file/secret.\nTry it out with:\necho -n $PORTAINER_PASS | docker secret create portainer_password -\nI can also add, while reading a file, to ignore newline character, but not sure if we want to do that... Let me know on how to proceed...\n. Anyway, I've updated the other things you've mentioned and added trimming the newline in the GetStringFromFile function.\nIf you think that it's not necessary I can change the line: return strings.TrimSuffix(string(content), \"\\n\"), nil to something like: return string(content), nil. Updated the PR.\n@deviantony, let me know if it's all good.\n. Yup, this makes sense. The file package has a Service Struct that operates on files that are relative to the /data path, and in case of passing secrets the files are provided with the full path which is usually not in the /data. If I move this to the file package I would then create a global function for getting the string from a file only... Let me know if that is what you had in mind?. ",
    "Routhinator": "Right-o, slack seems a better place for this. I would also agree, however was presuming I missed something in this due to my docker experience being only about 6 months.. ",
    "si458": "@WTFKr0   phew... at least its not me going round the twist... its prob the TLSskipverify is switching on even tho the box is not ticked. https://github.com/portainer/portainer/blob/develop/app/components/endpoint/endpointController.js#L17 maybe something wrong with one of these config lines but cant work out what its doing?. you are indeed correct! \nbut being able to see what containers are using the volume in the volume tab would be nice!. \n. +1 \ud83d\udc4d . https://status.digitalocean.com/incidents/8sk3mbgp6jgl \nthis explains the outage, on the linuxserver Discord chat the developer says he uses DigitalOceans storage pool which is currently offline. You are indeed right!\nThank you!\nDunno how i missed the option!. this is still a present issue in 1.20.1,\nit seems to happen when using stacks in standalone mode as i cant get it to do this problem in swarm mode\nif i use docker-compose however, it has no problem at all. ok work around, you must set each driver to local for the volumes\nvolumes:\n    XXX:\n       driver: local\n. sorry to tag onto this but was this every implemented?\nyou cant run pi-hole from portainer anymore as it requires you to use 2 dns servers\n--dns=127.0.0.1 --dns=1.1.1.1\nit should be simple enough to implement on the networks tab of creating a container \ud83d\udc4d . @altmas5 I ended up using stacks (docker-compose) and using the dns setting in the file. im having a similar issue with the new 1.20.0 release ?\ni just keep getting 'unable to parse external templates'\nmy URL is set to 'https://raw.githubusercontent.com/portainer/templates/master/templates.json'\nbut also when looking at the debug console in chrome it is showing error 500 for the 'templates' command\n{\"err\":\"Unable to parse external templates\",\"details\":\"json: cannot unmarshal string into Go struct field Template.type of type portainer.TemplateType\"}\n. > @si458 use https://raw.githubusercontent.com/portainer/templates/master/templates-1.20.0.json instead.\nBINGO, thank you! fixed straight away \ud83d\udc4d . ",
    "thomasgilgenast": "Yes it is working for me now after pulling the image. Thanks for the lightning-fast fix and all-around excellent tool!. ",
    "badris1": "Solved the problem, ran it as without the --host flag\n./portainer --bind=:9091 --ssl --sslcert=\"location/name.crt\" --sslkey=\"location/name.csr\" --data=\"location\". ",
    "das-peter": "@ChexWarrior Stumbled across this as well. Question is - shouldn't it work with VirtualBox synced folders too?. ",
    "lucamaro": "Just a clarification for myself: the restriction implemented is about hiding bind mounts in container creation interface. This can still be easily bypassed creating a bind volume or a stack with volumes option. \nIs this correct? Is it affordable a much stronger check on volume and docker-compose file options?\nThank you!. Hello, is this issue to be reopened? May I help in some way?\nThank you,\nLuca. Thanks, even volume management is affected.. Hi, I would like to provide a PR for this enhancement. As a result, is it sufficient to add Attachable and Internal columns to networks list? Is this the correct order?\n\n. Ok, point 2 is similar, in the details page. Point 3 is already implemented, isn't it?. Hi,\nI would like to contribute a PR for this feature. I imagine a button \"Clone this config\" in the edit page and an additional (optional) parameter idToClone in state docker.configs.new to preload values in createConfigController.html form. Do you think is the right way to implement it?. I'm not sure that it is possible because data.Labels is an object, not an array. I'm not a javascript expert... is there a more elegant way than for in loop to iterate over object properties? . Ok, I'm changing the condition also to \nif (!$transition$.params().id) {\nbecause of the change to null query parameter.. Done. Done. Done. Done. Done. Done. Done, thank you for help.. ",
    "Oyabi": "Initially, I thought about the number of container but the resource limit (cpu/ram/disk/network card) is also nice.\nIn my opinion, both are interrelated and indissociable.. ",
    "dawnstrider": "In my opinion both attempts at limiting resources are a valid approach as well.\nLimiting the amounts of containers is more related to the organizational rules and may have nothing to do with the resources available on a hardware level. This kind of limitation is more important for an administrator of the business level I would assume.\nUsecase: A container provides a certain service and I do not want to have this service available more than XX times in my environment\nLimiting the amount of resources is more related to the infrastructure of a company as there is always a finite amount of resources available to the processes (cpu, ram,...) These limitations are more important for the infrastructure level administrator.\nUsecase: A portainer user should only be allowed to consume 6GB of ram in containers since there are many users that might also want to run other containers with alot of memory consumption.\n\nFor me personally, I would love to see the first point implemented. The reason being that portainer allows templates where you are not able to check/control the resources consumption. That makes is very difficult in my eyes to restrict the resources for a user.. ",
    "sarjk": "Hi Anthony, I have tried that but still don\u2019t see them.\nCan you confirm the URL that you use for the custom templates?\nI also notice that as soon I browse away from the setting page and browse back, the setting are lost.\nThanks\nSarj\nFrom: Anthony Lapenna [mailto:notifications@github.com]\nSent: 27 September 2017 08:54\nTo: portainer/portainer portainer@noreply.github.com\nCc: Sarj Kaur sarj.kaur@tecman.co.uk; Author author@noreply.github.com\nSubject: Re: [portainer/portainer] Issue using custom templates (#1241)\nNot sure what is the issue here, I can see the templates when using this custom templates source.\nMaybe try to force refresh using CTRL + F5?\n[portainer 57]https://user-images.githubusercontent.com/5485061/30901873-b4aaf05a-a369-11e7-84ea-8b5b7db4179e.png\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/1241#issuecomment-332440068, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ARLUT587G9s3x459Nh8yIF9OhEQKix7Bks5smf8AgaJpZM4PkApn.\n. Hi Anthony,\nI can see them all now. It think that the container needs to be restarted before the changes take effect.\nRegards\nSarj\nFrom: Anthony Lapenna [mailto:notifications@github.com]\nSent: 27 September 2017 10:58\nTo: portainer/portainer portainer@noreply.github.com\nCc: Sarj Kaur sarj.kaur@tecman.co.uk; Author author@noreply.github.com\nSubject: Re: [portainer/portainer] Issue using custom templates (#1241)\nDo you hit the Save button to update the settings?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://github.com/portainer/portainer/issues/1241#issuecomment-332472217, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ARLUT005cibJihKoMUDVG8C1Wxg-a0GAks5smhxFgaJpZM4PkApn.\n. ",
    "benyanke": "I'm also having this problem.\nPerhaps it's an issue with my fork of the templates?\nhttps://raw.githubusercontent.com/benyanke/templates/master/templates.json\n. Solved the issue...somewhat.\nIt worked when I added a container definition (I was using a stack definition in the json + yml).\nWhere do the stacks come forward in the GUI?. You're welcome.\nAnd thanks for this excellent tool. Makes docker a breeze to use both on my home server, and work desktop for development. . Are you saying that's a current solution, or a proposed solution? I'd be ok with that, if it's a future proposal. . I definitely see the value in the mode of operation as it currently exists, but especially if it's used for a larger place, it would be very nice to have it automatically create accounts behind the scenes on login if they don't exist already, allowing authentication to be handled completely by AD. Similarly, accounts disabled in AD would need to be disabled / deleted, in this scheme.\nPerhaps something like this:\n\nI've implemented AD auth on other apps I've written, so let me know if I can be of any help with this too. I've not worked on portainer, but there's a first time for everything!. My apologies - I thought I had my containers auto-updating with watchtower. It looks like it's already done when I manually updated!. ",
    "opera443399": "Thank you, it's a pleasure to use portainer in my work, all of my colleagues like this UI, at the same time, I have a chance to learn more about angularjs/go.\n. BTW, there is another demand, but I have no idea how to submit it(open an issue?):\nCan we just list all the containers by specific service without entrypoint switch. \nFrom our DEV user's point of view, there is a bad user experience and does not aid in productivity:\ncurrent steps to find the console:\n1 service -> N containers (on M nodes)\n\nif DEV want to open each container's console, they need to:\n    -> open the 'Service Details' page, filtering nodes with running tasks.  \n    -> select a node N1 and switched to entrypoint N1\n    -> find container C1 running on node N1 by filters in 'container list' page\n    -> in 'container details' page, open the console\n\n. yes, @deviantony yes, that's what I want. (Oh, I made a mistake\uff0cjust remember the name incorrectly. It's 'endpoint', not 'entrypoint', my mistake.)\nI'm following the issue now, thanks.\nand, feel sorry as I just noticed the info below after this PR:\n* Before you open an issue please review the contributing and conduct guidelines for this repository.. @deviantony thanks for letting me know the work on #461 is definitely the way to go.\nI know it's not the priority at the moment, just a way to show what kind of feature we might need in the future. \nAnd I'm new to open issue and PR on github, so I wonder if this is the right way to open an issue and PR here , after reading this: contributing. @deviantony @zsluedem \nI know this one.\nas I come from China, the GFW will block some URLS, such as the key word 'google', and golang.org is an alias for xxx.google.com:\nbash\n[root@dev_08 portainer]# host golang.org\ngolang.org is an alias for golang-consa.l.google.com.\ngolang-consa.l.google.com has address 216.239.37.1\nSo, golang.org will be blocked.\nHere is my solution:\n````bash\n1. download the src code from github to $GOPATH/src\n[root@dev_08 portainer]# go get github.com/golang/crypto/tree/master/bcrypt\n[root@dev_08 portainer]# go get github.com/golang/net/tree/master/websocket\n[root@dev_08 portainer]# cd $GOPATH/src\n[root@dev_08 src]# mkdir golang.org/x -p\n[root@dev_08 src]# mv github.com/golang/* golang.org/x/\n\n\nswitch back to src\n[root@dev_08 src]# cd /opt/portainer\n\n\nmodify the script(with another mount option for $GOPATH):\n[root@dev_08 portainer]# vim build/build_in_container.sh\nFROM:\ndocker run --rm -tv $(pwd)/api:/src -e BUILD_GOOS=\"$1\" -e BUILD_GOARCH=\"$2\" portainer/golang-builder:cross-platform /src/cmd/portainer\n\n\nTO:\ndocker run --rm -tv $(pwd)/api:/src -v $GOPATH/src/golang.org:/go/src/golang.org -e BUILD_GOOS=\"$1\" -e BUILD_GOARCH=\"$2\" portainer/golang-builder:cross-platform /src/cmd/portainer\n\nrebuild\n[root@dev_08 portainer]# grunt build\n(omitted.)\nCleaning \"dist/js/angular.37dfac18.js\"...OK\nCleaning \"dist/js/portainer.cab56db9.js\"...OK\nCleaning \"dist/js/vendor.4edc9b0f.js\"...OK\nCleaning \"dist/css/portainer.e7f7fdaa.css\"...OK\n\nDone, without errors.\n```\n. If a task failed and service will restart a new task, theservice log viewer` is the only way for dev to find what happened, and it's still useless till now(1.19.1), so I searched issues about this.\nfrom this one, I finally know why:\nhttps://github.com/moby/moby/issues/33673\nI expect the new service log viewer when it come out.\nwhat happened in my env\n\nafter deploy a service svc-demoA with 1 replica\n\n\n\nservice logs part1 -> tail\nbash\n[root@node-05 ~]# docker service logs -t --tail 100 svc-demoA\n2018-09-17T02:44:45.457809230Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T07:59:56.425595242Z svc-demoA.1.zpbl0h3nubl8@node-01    | demoA say hello\n2018-09-17T07:56:03.140764512Z svc-demoA.1.zn1q970z0sy1@node-01    | demoA say hello\n2018-09-17T02:44:45.462831374Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T07:59:56.425824456Z svc-demoA.1.zpbl0h3nubl8@node-01    | demoA say hello\n2018-09-17T07:59:56.425847438Z svc-demoA.1.zpbl0h3nubl8@node-01    | demoA say hello\n2018-09-17T07:56:03.142271273Z svc-demoA.1.zn1q970z0sy1@node-01    | demoA say hello\n2018-09-17T02:44:45.463506409Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T02:44:45.463517846Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T07:59:56.426150030Z svc-demoA.1.zpbl0h3nubl8@node-01    | demoA say hello\n2018-09-17T07:56:03.142304162Z svc-demoA.1.zn1q970z0sy1@node-01    | demoA say hello\n2018-09-17T07:56:03.142655812Z svc-demoA.1.zn1q970z0sy1@node-01    | demoA say hello\n2018-09-17T02:44:45.463522558Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T07:59:56.426179661Z svc-demoA.1.zpbl0h3nubl8@node-01    | demoA say hello\n2018-09-17T07:59:56.429073385Z svc-demoA.1.zpbl0h3nubl8@node-01    | demoA say hello\n2018-09-17T07:56:03.142671214Z svc-demoA.1.zn1q970z0sy1@node-01    | demoA say hello\n2018-09-17T02:44:45.463527298Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-18T01:37:25.571933523Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T02:07:17.273652923Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T02:07:17.275287143Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T01:37:25.573983875Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T02:07:17.275321508Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T01:37:25.574011279Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:37:25.578378704Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T02:07:18.277870280Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T01:37:56.670242055Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:37:56.670536793Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:41:48.259950179Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:41:48.260215072Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:47:06.043399860Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:47:06.043688544Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:47:24.904936012Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:47:24.905196203Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:51:52.617739899Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:51:52.618071695Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:53:28.085284777Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-18T01:53:28.085322561Z svc-demoA.1.w3rpj3qmfpi9@node-00    | demoA say hello\n2018-09-17T02:44:45.463532016Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T07:59:56.429095775Z svc-demoA.1.zpbl0h3nubl8@node-01    | demoA say hello\n2018-09-17T07:56:03.143701520Z svc-demoA.1.zn1q970z0sy1@node-01    | demoA say hello\n2018-09-17T07:56:03.145248696Z svc-demoA.1.zn1q970z0sy1@node-01    | demoA say hello\n2018-09-17T02:44:45.463536941Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T07:59:56.429859808Z svc-demoA.1.zpbl0h3nubl8@node-01    | demoA say hello\n2018-09-17T02:44:45.463541401Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T07:56:03.145262689Z svc-demoA.1.zn1q970z0sy1@node-01    | demoA say hello\n2018-09-17T02:44:45.463546357Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n2018-09-17T02:44:45.463550978Z svc-demoA.1.zq4rwctt0bgr@node-01    | demoA say hello\n\n\nservice logs part2 -> tail + -f \"desired-state=Running\"\nbash\n[root@node-05 ~]# docker service logs -t --tail 100 $(docker service ps -q -f \"desired-state=Running\" svc-demoA)\n2018-09-18T02:07:17.273652923Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T02:07:17.275287143Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T02:07:17.275321508Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T02:07:18.277870280Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n\n\nservice logs part3 -> tail + --since 12h\nbash\n[root@node-05 ~]# docker service logs -t --tail 100 --since 12h svc-demoA\n2018-09-18T02:07:17.273652923Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T03:04:50.833826550Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:04:50.833903659Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T02:07:17.275287143Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T02:07:17.275321508Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T03:04:50.833911037Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:04:50.835151713Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T02:07:18.277870280Z svc-demoA.1.7nllkrz2mh65@node-00    | demoA say hello\n2018-09-18T03:05:13.487648330Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:05:13.635449970Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:05:13.656766487Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:05:14.078569323Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:05:15.677518101Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:05:15.677886970Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:09:04.777431313Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:09:04.777709004Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n2018-09-18T03:09:15.562102872Z svc-demoA.1.vomyhyqjv2hk@node-00    | demoA say hello\n\n\nconclusion\nAs logs shown above, part1 is not easy to read. Sorting by timestamp looks nice, but it seems still not good enough.\n\n\nIMO, things below might help us quickly locate the latest and useful service logs:\n1. show the task id\nto know the timestamp -> task-id relationship\n\n\na filter option for Running tasks\nto lookup the latest logs quickly\n\n\na time range option\nto show a relative latest/history logs\n\n\n. @deviantony \nI'm trying to enhance the log-viewer today, here is what I changed, please take a look at this and let me know whether it works or not, thank you.\n2 parameters changed/added\n\n\n\nsince\nI'm trying to add a parameter: --since for log-viewer to provide the ability  to show logs since timestamp(\"show me the logs from this time: date +%s -d \"2018-10-16T09:08:00\"\")\n\n\n\ndemo-01: with default since value or empty\n\n\nRequest URL: http://127.0.0.1:9000/api/endpoints/1/docker/services/y2snecuew9rse98df06la9pcu/logs?since=0&stderr=1&stdout=1&tail=100&timestamps=1\ndemo-02: since changed\n\nRequest URL: http://127.0.0.1:9000/api/endpoints/1/docker/services/y2snecuew9rse98df06la9pcu/logs?since=1539688980&stderr=1&stdout=1&tail=100&timestamps=0\nNote: from docker api(Only return logs since this time, as a UNIX timestamp) we know --since is a unix-timestamp. Sadness to say, as I'm not familiar with JS,  just tried to define a function called strToTimestamp in portainer/app/docker/filters/filters.js to convert datetime to unix-timestamp and then used it in portainer/app/docker/views/services/logs/serviceLogsController.js, I guess you can handler this much better.\n\n\n\nlineCount\nlineCount: 2000\nIn my env,  get 2000 lines each time sometimes will failed with: 'Unable to retrieve container logs'\nI suggest to change the default value to 100 for a slow network(or later on we could let the user change some default log-viewer value in settings view?).\n. @deviantony OK, I will do it now, and I also wanted a timepicker component yesterday, but it's difficult for me. i'd appreciate your help to solve the timestamp technical problem. @olljanat \nupgrade portainer-agent(docker service rm and create) on exist docker swarm mode cluster. @olljanat yes, 3/5 is up\n5 manager nodes, no worker. @olljanat here is docker swarm info\nbash\n]# docker node ls\nID                            HOSTNAME  STATUS              AVAILABILITY        MANAGER STATUS      ENGINE VERSION\nzhi9fzzjsj7n9fsbh4junbj8n     node-03   Ready               Active              Reachable           18.03.1-ce\nzfs2vs9hyds4jdv5nq1vdgzrm     node-04   Ready               Active              Reachable           18.03.1-ce\n6jdb33ukhj980jkswhu78d7dt *   node-05   Ready               Active              Leader              18.03.1-ce\nvotldk83rc32e7wppz5szfnwx     node-06   Ready               Active              Reachable           18.03.1-ce\ntjhtfnfamcf02edpp0dgxinot     node-07   Ready               Active              Reachable           17.12.1-ce\n. @olljanat bash log history found that the portainer-agent container failed to run and restarted later, then repeat.\n\n\n\nbash\n~]# docker service ps portainer-agent \nID                  NAME                                            IMAGE                   NODE      DESIRED STATE       CURRENT STATE            ERROR                       PORTS\ng53fyx4a8toj        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm       portainer/agent:1.1.0   node-04   Ready               Ready 3 seconds ago                                  \nhyydh5qi5tj0        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n       portainer/agent:1.1.0   node-03   Ready               Ready 3 seconds ago                                  \npgulb2e5hbzr         \\_ portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:1.1.0   node-03   Shutdown            Failed 3 seconds ago     \"task: non-zero exit (2)\"   \nozj1blf9h683        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm       portainer/agent:1.1.0   node-04   Shutdown            Failed 3 seconds ago     \"task: non-zero exit (2)\"   \nq0j6fotg95kq         \\_ portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:1.1.0   node-04   Shutdown            Failed 9 seconds ago     \"task: non-zero exit (2)\"   \ncj1iilhio9jo        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n       portainer/agent:1.1.0   node-03   Shutdown            Failed 9 seconds ago     \"task: non-zero exit (2)\"   \n13ir0u6alaki        portainer-agent.votldk83rc32e7wppz5szfnwx       portainer/agent:1.1.0   node-06   Running             Running 16 seconds ago                               \no4ov0q2p88pr        portainer-agent.tjhtfnfamcf02edpp0dgxinot       portainer/agent:1.1.0   node-07   Running             Running 16 seconds ago                               \nyxpozb3tfa7m        portainer-agent.6jdb33ukhj980jkswhu78d7dt       portainer/agent:1.1.0   node-05   Running             Running 16 seconds ago                               \n8ywwn8fxkuau        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm       portainer/agent:1.1.0   node-04   Shutdown            Failed 15 seconds ago    \"task: non-zero exit (2)\"   \nbpn7ol1pazsc        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n       portainer/agent:1.1.0   node-03   Shutdown            Failed 15 seconds ago    \"task: non-zero exit (2)\"\n. @deviantony @olljanat sorry for the late support with a jet-lag\nthank you, it works.\nbash\n~]# docker service ls |grep agent\np71id0brrvhn        portainer-agent           global              5/5                 portainer/agent:1.0.0                                                 \n~]# docker service update --detach=false portainer-agent --image portainer/agent:2102\nportainer-agent\noverall progress: 5 out of 5 tasks \nvotldk83rc32: running   [==================================================>] \nzhi9fzzjsj7n: running   [==================================================>] \nzfs2vs9hyds4: running   [==================================================>] \n6jdb33ukhj98: running   [==================================================>] \ntjhtfnfamcf0: running   [==================================================>] \nverify: Service converged \n~]# docker service ls |grep agent\np71id0brrvhn        portainer-agent           global              5/5                 portainer/agent:2102                                                  \n~]# docker service ps portainer-agent\nID                  NAME                                        IMAGE                   NODE                     DESIRED STATE       CURRENT STATE             ERROR               PORTS\n19i99zhhag68        portainer-agent.tjhtfnfamcf02edpp0dgxinot   portainer/agent:2102    node-07   Running             Running 28 seconds ago                        \nabatavln2j6k        portainer-agent.6jdb33ukhj980jkswhu78d7dt   portainer/agent:2102    node-05   Running             Running 32 seconds ago                        \niodxmx4zdb6z        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:2102    node-04   Running             Running 36 seconds ago                        \nlygkuofatnki        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:2102    node-03   Running             Running 41 seconds ago                        \njq1pvd3bejhr        portainer-agent.votldk83rc32e7wppz5szfnwx   portainer/agent:2102    node-06   Running             Running 45 seconds ago                        \ntnbqd0yly5q5        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:1.0.0   node-04   Shutdown            Shutdown 37 seconds ago                       \nqan27vfc285i        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:1.0.0   node-03   Shutdown            Shutdown 41 seconds ago                       \na7zbm8v5ts0u        portainer-agent.votldk83rc32e7wppz5szfnwx   portainer/agent:1.0.0   node-06   Shutdown            Shutdown 47 seconds ago                       \nwpxpe3ro7vde        portainer-agent.tjhtfnfamcf02edpp0dgxinot   portainer/agent:1.0.0   node-07   Shutdown            Shutdown 28 seconds ago                       \n8yoaig1cfkuy        portainer-agent.6jdb33ukhj980jkswhu78d7dt   portainer/agent:1.0.0   node-05   Shutdown            Shutdown 33 seconds ago                       \n~]# docker service ps portainer-agent\nID                  NAME                                        IMAGE                   NODE                     DESIRED STATE       CURRENT STATE             ERROR               PORTS\n19i99zhhag68        portainer-agent.tjhtfnfamcf02edpp0dgxinot   portainer/agent:2102    node-07   Running             Running 33 seconds ago                        \nabatavln2j6k        portainer-agent.6jdb33ukhj980jkswhu78d7dt   portainer/agent:2102    node-05   Running             Running 37 seconds ago                        \niodxmx4zdb6z        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:2102    node-04   Running             Running 41 seconds ago                        \nlygkuofatnki        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:2102    node-03   Running             Running 46 seconds ago                        \njq1pvd3bejhr        portainer-agent.votldk83rc32e7wppz5szfnwx   portainer/agent:2102    node-06   Running             Running 50 seconds ago                        \ntnbqd0yly5q5        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:1.0.0   node-04   Shutdown            Shutdown 42 seconds ago                       \nqan27vfc285i        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:1.0.0   node-03   Shutdown            Shutdown 47 seconds ago                       \na7zbm8v5ts0u        portainer-agent.votldk83rc32e7wppz5szfnwx   portainer/agent:1.0.0   node-06   Shutdown            Shutdown 52 seconds ago                       \nwpxpe3ro7vde        portainer-agent.tjhtfnfamcf02edpp0dgxinot   portainer/agent:1.0.0   node-07   Shutdown            Shutdown 34 seconds ago                       \n8yoaig1cfkuy        portainer-agent.6jdb33ukhj980jkswhu78d7dt   portainer/agent:1.0.0   node-05   Shutdown            Shutdown 38 seconds ago                       \n~]# docker service ps portainer-agent\nID                  NAME                                        IMAGE                   NODE                     DESIRED STATE       CURRENT STATE            ERROR               PORTS\n19i99zhhag68        portainer-agent.tjhtfnfamcf02edpp0dgxinot   portainer/agent:2102    node-07   Running             Running 3 minutes ago                        \nabatavln2j6k        portainer-agent.6jdb33ukhj980jkswhu78d7dt   portainer/agent:2102    node-05   Running             Running 3 minutes ago                        \niodxmx4zdb6z        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:2102    node-04   Running             Running 3 minutes ago                        \nlygkuofatnki        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:2102    node-03   Running             Running 3 minutes ago                        \njq1pvd3bejhr        portainer-agent.votldk83rc32e7wppz5szfnwx   portainer/agent:2102    node-06   Running             Running 3 minutes ago                        \ntnbqd0yly5q5        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:1.0.0   node-04   Shutdown            Shutdown 3 minutes ago                       \nqan27vfc285i        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:1.0.0   node-03   Shutdown            Shutdown 3 minutes ago                       \na7zbm8v5ts0u        portainer-agent.votldk83rc32e7wppz5szfnwx   portainer/agent:1.0.0   node-06   Shutdown            Shutdown 3 minutes ago                       \nwpxpe3ro7vde        portainer-agent.tjhtfnfamcf02edpp0dgxinot   portainer/agent:1.0.0   node-07   Shutdown            Shutdown 3 minutes ago                       \n8yoaig1cfkuy        portainer-agent.6jdb33ukhj980jkswhu78d7dt   portainer/agent:1.0.0   node-05   Shutdown            Shutdown 3 minutes ago. logs\n```bash\n~]# docker service ps portainer-agent\nID                  NAME                                        IMAGE                   NODE                     DESIRED STATE       CURRENT STATE             ERROR               PORTS\n19i99zhhag68        portainer-agent.tjhtfnfamcf02edpp0dgxinot   portainer/agent:2102    node-07   Running             Running 9 minutes ago                       \nabatavln2j6k        portainer-agent.6jdb33ukhj980jkswhu78d7dt   portainer/agent:2102    node-05   Running             Running 9 minutes ago                       \niodxmx4zdb6z        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:2102    node-04   Running             Running 10 minutes ago                      \nlygkuofatnki        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:2102    node-03   Running             Running 10 minutes ago                      \njq1pvd3bejhr        portainer-agent.votldk83rc32e7wppz5szfnwx   portainer/agent:2102    node-06   Running             Running 10 minutes ago                      \ntnbqd0yly5q5        portainer-agent.zfs2vs9hyds4jdv5nq1vdgzrm   portainer/agent:1.0.0   node-04   Shutdown            Shutdown 10 minutes ago                     \nqan27vfc285i        portainer-agent.zhi9fzzjsj7n9fsbh4junbj8n   portainer/agent:1.0.0   node-03   Shutdown            Shutdown 10 minutes ago                     \na7zbm8v5ts0u        portainer-agent.votldk83rc32e7wppz5szfnwx   portainer/agent:1.0.0   node-06   Shutdown            Shutdown 10 minutes ago                     \nwpxpe3ro7vde        portainer-agent.tjhtfnfamcf02edpp0dgxinot   portainer/agent:1.0.0   node-07   Shutdown            Shutdown 9 minutes ago                      \n8yoaig1cfkuy        portainer-agent.6jdb33ukhj980jkswhu78d7dt   portainer/agent:1.0.0   node-05   Shutdown            Shutdown 9 minutes ago                      \n~]# docker service logs --since 15m portainer-agent \nportainer-agent.0.qan27vfc285i@node-03    | 2018/08/01 03:12:31 [INFO] memberlist: Suspect ad3eb18b9cf2 has failed, no acks received\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:33 Found addrs: [10.0.1.194/24]\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: 07cc8b5d093f 10.0.1.194\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:38 Found addrs: [10.0.1.195/24]\nportainer-agent.0.tnbqd0yly5q5@node-04    | 2018/08/01 03:12:30 [INFO] memberlist: Suspect ad3eb18b9cf2 has failed, no acks received\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: ffec7eafabef 10.0.1.195\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: b2cda557f4b5 10.0.1.189\nportainer-agent.0.tnbqd0yly5q5@node-04    | 2018/08/01 03:12:32 [INFO] serf: EventMemberJoin: 5e2e15658c79 10.0.1.193\nportainer-agent.0.tnbqd0yly5q5@node-04    | 2018/08/01 03:12:32 [INFO] memberlist: Marking ad3eb18b9cf2 as failed, suspect timeout reached (2 peer confirmations)\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: 5e2e15658c79 10.0.1.193\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: 434d71868ca5 10.0.1.188\nportainer-agent.0.tnbqd0yly5q5@node-04    | 2018/08/01 03:12:32 [INFO] serf: EventMemberFailed: ad3eb18b9cf2 10.0.1.191\nportainer-agent.0.tnbqd0yly5q5@node-04    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: 07cc8b5d093f 10.0.1.194\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: 85115bc828ae 10.0.1.190\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: 5e2e15658c79 10.0.1.193\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: 07cc8b5d093f 10.0.1.194\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: 85115bc828ae 10.0.1.190\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:41 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:46 [INFO] memberlist: Suspect b2cda557f4b5 has failed, no acks received\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 05fd6359f1a5 10.0.1.196\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: ddf458302249 10.0.1.197\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:50 [INFO] memberlist: Marking b2cda557f4b5 as failed, suspect timeout reached (2 peer confirmations)\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:50 [INFO] serf: EventMemberFailed: b2cda557f4b5 10.0.1.189\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:50 [INFO] memberlist: Suspect 434d71868ca5 has failed, no acks received\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:53 [INFO] memberlist: Marking 434d71868ca5 as failed, suspect timeout reached (1 peer confirmations)\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:53 [INFO] serf: EventMemberFailed: 434d71868ca5 10.0.1.188\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:29 Found addrs: [10.0.1.193/24]\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:32 [INFO] serf: EventMemberJoin: 5e2e15658c79 10.0.1.193\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:32 [INFO] serf: EventMemberJoin: a315638cb097 10.0.1.192\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:32 [INFO] serf: EventMemberJoin: 434d71868ca5 10.0.1.188\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:32 [INFO] serf: EventMemberJoin: b2cda557f4b5 10.0.1.189\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: b2cda557f4b5 10.0.1.189\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: 434d71868ca5 10.0.1.188\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:36 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: ffec7eafabef 10.0.1.195\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:41 [INFO] memberlist: Suspect 434d71868ca5 has failed, no acks received\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:45 [INFO] memberlist: Suspect b2cda557f4b5 has failed, no acks received\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:49 [INFO] memberlist: Suspect 85115bc828ae has failed, no acks received\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 05fd6359f1a5 10.0.1.196\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: ddf458302249 10.0.1.197\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:50 [INFO] serf: EventMemberFailed: b2cda557f4b5 10.0.1.189\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:53 [INFO] memberlist: Suspect 434d71868ca5 has failed, no acks received\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:55 [INFO] memberlist: Marking 85115bc828ae as failed, suspect timeout reached (2 peer confirmations)\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:12:55 [INFO] serf: EventMemberFailed: 85115bc828ae 10.0.1.190\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:13:00 [INFO] memberlist: Suspect 434d71868ca5 has failed, no acks received\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:13:04 [INFO] memberlist: Suspect 434d71868ca5 has failed, no acks received\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:13:05 [INFO] memberlist: Marking 434d71868ca5 as failed, suspect timeout reached (0 peer confirmations)\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:55 [INFO] memberlist: Suspect 434d71868ca5 has failed, no acks received\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:12:55 [INFO] serf: EventMemberFailed: 85115bc828ae 10.0.1.190\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:13:11 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:32 [INFO] serf: EventMemberJoin: 85115bc828ae 10.0.1.190\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:15:44 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:16:54 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:18:27 [INFO] serf: attempting reconnect to b2cda557f4b5 10.0.1.189:7946\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:20:07 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:13:05 [INFO] serf: EventMemberFailed: 434d71868ca5 10.0.1.188\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:13:06 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:14:16 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:14:49 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:15:22 [INFO] serf: attempting reconnect to b2cda557f4b5 10.0.1.189:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:16:02 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:16:35 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:18:38 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:19:11 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:20:14 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:21:17 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.lygkuofatnki@node-03    | 2018/08/01 03:22:20 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:32 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:36 [INFO] memberlist: Suspect a315638cb097 has failed, no acks received\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: 07cc8b5d093f 10.0.1.194\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:40 [INFO] memberlist: Suspect a315638cb097 has failed, no acks received\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: ffec7eafabef 10.0.1.195\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:44 [INFO] memberlist: Suspect a315638cb097 has failed, no acks received\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:46 Found addrs: [10.0.1.197/24]\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:30 [INFO] memberlist: Suspect ad3eb18b9cf2 has failed, no acks received\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: ddf458302249 10.0.1.197\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:21:40 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:22:13 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.iodxmx4zdb6z@node-04    | 2018/08/01 03:22:46 [INFO] serf: attempting reconnect to b2cda557f4b5 10.0.1.189:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:46 [INFO] memberlist: Marking a315638cb097 as failed, suspect timeout reached (1 peer confirmations)\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:46 [INFO] serf: EventMemberFailed: a315638cb097 10.0.1.192\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:49 [INFO] memberlist: Suspect b2cda557f4b5 has failed, no acks received\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: ddf458302249 10.0.1.197\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 05fd6359f1a5 10.0.1.196\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:50 [INFO] serf: EventMemberFailed: b2cda557f4b5 10.0.1.189\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:53 [INFO] memberlist: Marking 434d71868ca5 as failed, suspect timeout reached (1 peer confirmations)\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:53 [INFO] serf: EventMemberFailed: 434d71868ca5 10.0.1.188\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:55 [INFO] memberlist: Suspect 85115bc828ae has failed, no acks received\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:12:55 [INFO] serf: EventMemberFailed: 85115bc828ae 10.0.1.190\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:13:02 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:13:35 [INFO] serf: attempting reconnect to b2cda557f4b5 10.0.1.189:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:14:15 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:32 [INFO] serf: EventMemberJoin: 5e2e15658c79 10.0.1.193\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 05fd6359f1a5 10.0.1.196\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:34 [INFO] memberlist: Suspect a315638cb097 has failed, no acks received\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: 07cc8b5d093f 10.0.1.194\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 5e2e15658c79 10.0.1.193\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:38 [INFO] memberlist: Suspect a315638cb097 has failed, no acks received\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 07cc8b5d093f 10.0.1.194\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: ffec7eafabef 10.0.1.195\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 85115bc828ae 10.0.1.190\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:40 [INFO] memberlist: Marking ad3eb18b9cf2 as failed, suspect timeout reached (1 peer confirmations)\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:14:48 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:15:28 [INFO] serf: attempting reconnect to b2cda557f4b5 10.0.1.189:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:16:01 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:16:34 [INFO] serf: attempting reconnect to b2cda557f4b5 10.0.1.189:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:18:37 [INFO] serf: attempting reconnect to b2cda557f4b5 10.0.1.189:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:19:10 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:19:43 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:20:16 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:20:49 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:21:52 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.jq1pvd3bejhr@node-06    | 2018/08/01 03:22:25 [INFO] serf: attempting reconnect to 434d71868ca5 10.0.1.188:7946\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:40 [INFO] serf: EventMemberFailed: ad3eb18b9cf2 10.0.1.191\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:50 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:41 [INFO] serf: EventMemberJoin: ffec7eafabef 10.0.1.195\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:53 [INFO] memberlist: Suspect 85115bc828ae has failed, no acks received\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:42 [INFO] memberlist: Suspect ad3eb18b9cf2 has failed, no acks received\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:12:55 [INFO] serf: EventMemberFailed: 85115bc828ae 10.0.1.190\nportainer-agent.0.wpxpe3ro7vde@node-07    | 2018/08/01 03:12:42 [INFO] serf: attempting reconnect to ad3eb18b9cf2 10.0.1.191:7946\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:13:20 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:17:53 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:19:56 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:21:29 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.19i99zhhag68@node-07    | 2018/08/01 03:22:02 [INFO] serf: attempting reconnect to 85115bc828ae 10.0.1.190:7946\nportainer-agent.0.8yoaig1cfkuy@node-05    | 2018/08/01 03:12:28 [INFO] memberlist: Suspect ad3eb18b9cf2 has failed, no acks received\nportainer-agent.0.abatavln2j6k@node-05    | 2018/08/01 03:12:42 Found addrs: [10.0.1.196/24]\nportainer-agent.0.abatavln2j6k@node-05    | 2018/08/01 03:12:45 [INFO] serf: EventMemberJoin: 05fd6359f1a5 10.0.1.196\nportainer-agent.0.8yoaig1cfkuy@node-05    | 2018/08/01 03:12:32 [INFO] serf: EventMemberJoin: 5e2e15658c79 10.0.1.193\nportainer-agent.0.8yoaig1cfkuy@node-05    | 2018/08/01 03:12:32 [INFO] memberlist: Suspect ad3eb18b9cf2 has failed, no acks received\nportainer-agent.0.abatavln2j6k@node-05    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: ddf458302249 10.0.1.197\nportainer-agent.0.8yoaig1cfkuy@node-05    | 2018/08/01 03:12:35 [INFO] memberlist: Suspect ad3eb18b9cf2 has failed, no acks received\nportainer-agent.0.8yoaig1cfkuy@node-05    | 2018/08/01 03:12:36 [INFO] serf: EventMemberJoin: 07cc8b5d093f 10.0.1.194\nportainer-agent.0.abatavln2j6k@node-05    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: ffec7eafabef 10.0.1.195\nportainer-agent.0.8yoaig1cfkuy@node-05    | 2018/08/01 03:12:39 [INFO] memberlist: Suspect ad3eb18b9cf2 has failed, no acks received\nportainer-agent.0.abatavln2j6k@node-05    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 07cc8b5d093f 10.0.1.194\nportainer-agent.0.8yoaig1cfkuy@node-05    | 2018/08/01 03:12:40 [INFO] memberlist: Marking ad3eb18b9cf2 as failed, suspect timeout reached (1 peer confirmations)\nportainer-agent.0.8yoaig1cfkuy@node-05    | 2018/08/01 03:12:40 [INFO] serf: EventMemberFailed: ad3eb18b9cf2 10.0.1.191\nportainer-agent.0.abatavln2j6k@node-05    | 2018/08/01 03:12:50 [INFO] serf: EventMemberJoin: 5e2e15658c79 10.0.1.193\nportainer-agent.0.abatavln2j6k@node-05    | 2018/08/01 03:12:55 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\n```. I just update to v1.19.1 now to take some snapshots.\n\nv1.19.1 dashboard view\n\nv1.19.1 service-list view\n\n. except my network issue, IMO, service list is just a list, less data should be loaded onetime to speed up the content downloading time, no matter how bad my network is, as I can quickly find the service and jump to the service details view. @xAt0mZ about my network issue, I switched the network which visit the portainer through VPN to public network, then the timing for ever download is very fast, thank you for your tips, it's my fault.\ndashboard view\n\nservice-list view\n\n\nv1.19.1\n\ndashboard view\n\nservice-list view\n\n\nExpected behavior\nback to what I said yesterday, maybe this discuss will help us to speed up the content download time if we could simplify the date fetch process or something else.. @deviantony \nnet1=[office -> VPN -> IDC]    VS   net2=[office -> public-network -> IDC]\nThe above tests shows that my VPN network issue need to be checked in one hand, and the content size is a little larger in a slow network environment in the other hand.\neven in net2 we can find that 1.8 MB transferred | Finish: 1.08 s, it's a little slow, isn't it?. \n. use momentjs\n\n@deviantony besides, how to modify git log typo: 'mementjs' -> momentjs\n. > @opera443399 don't worry about the typo, is it working using moment?\nyes, it works, thank you!. @deviantony OK.\nActually, when you input an invalid(empty) datetime format, the since parameter will use value 0 instead, according to: portainer/app/docker/services/serviceService.js\nsince: since || 0,. > IMO, simply showing the last XXX logs is sufficient... ie show me the latest 50 logs, or latest 200... i dont think we need a time based filter at the moment.\n@ncresswell @deviantony \nPlease have a look at this issue:\n\n#1942 and https://github.com/moby/moby/issues/33673#issuecomment-308999521 again.\nI often use docker service logs cmd-line to find the latest logs. Here is what I found:\nshow me the latest 100 logs means:\nOnly return 100 log lines from the end of the logs.(from all tasks, disorderly, return 70 lines finally)\nshow me the latest 100 logs since 2018-10-17T09:00:00, means:\nOnly return 100 log lines from the logs which starts at 2018-10-17T09:00:00. (from all tasks, disorderly, return 20 lines finally, more easy to lookup)\nPOC:\nI just force update the service t001, then showing the 100 latest logs:\n2018-10-19T01:50:50.586630300Z Listening on port *:80,\n2018-10-19T01:57:47.659421400Z Update 'health check' status code = 801,\n2018-10-16T08:38:15.659120481Z Listening on port *:80,\n2018-10-19T01:57:48.824841600Z Update 'health check' status code = 801,\n2018-10-16T09:08:32.908666630Z Current 'health check' status code = 200,\n2018-10-19T01:57:49.307380200Z Update 'health check' status code = 801,\n2018-10-19T01:57:49.762312300Z Update 'health check' status code = 801,\n2018-10-19T01:57:50.259214200Z Update 'health check' status code = 801,\n2018-10-19T01:57:50.748869200Z Update 'health check' status code = 801,\n2018-10-19T01:57:51.167997600Z Update 'health check' status code = 801,\n2018-10-19T01:57:51.721189600Z Update 'health check' status code = 801,\n2018-10-16T09:08:39.699513037Z Current 'health check' status code = 200,\n2018-10-19T01:57:52.250384300Z Update 'health check' status code = 801,\n2018-10-16T09:08:39.885916846Z Current 'health check' status code = 200,\n2018-10-19T01:57:52.729288100Z Update 'health check' status code = 801,\n2018-10-16T09:08:40.061997925Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.220887109Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.382558883Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.566524294Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.742247644Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.918211777Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.094762647Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.254811320Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.757049674Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.866249990Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.951452884Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.035542926Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.120240293Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.197460590Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.282627551Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.370831008Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.451665723Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.531980019Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.617242551Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.699504852Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.783594712Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.865876692Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.950028667Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.032503596Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.116581223Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.199663434Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.282242276Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.365730808Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.450191074Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.531673407Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.613821923Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.698136981Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.780923311Z Current 'health check' status code = 200,\n2018-10-16T11:22:43.894496652Z Current 'health check' status code = 200,\n2018-10-16T11:22:44.093237653Z Current 'health check' status code = 200,\n2018-10-16T11:22:44.261005463Z Current 'health check' status code = 200,\n2018-10-16T11:22:44.429293493Z Current 'health check' status code = 200,\n2018-10-16T11:22:44.930430499Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.042197711Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.124021947Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.208119730Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.290020781Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.375838007Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.457025723Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.540649654Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.625579626Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.710933904Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.793384892Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.875793388Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.963588968Z Current 'health check' status code = 200,\n2018-10-16T11:23:32.332890668Z Update 'health check' status code = 302,\n2018-10-16T11:23:33.276234839Z Update 'health check' status code = 302,\n2018-10-16T11:23:36.273034389Z Update 'health check' status code = 302,\n2018-10-16T11:23:36.832181564Z Update 'health check' status code = 302,\n2018-10-16T11:23:37.296557059Z Update 'health check' status code = 302,\n2018-10-16T11:23:37.744654422Z Update 'health check' status code = 302,\n2018-10-16T11:23:38.168951676Z Update 'health check' status code = 302,\n2018-10-16T11:23:38.614798033Z Update 'health check' status code = 302,\n2018-10-16T11:23:39.113933150Z Update 'health check' status code = 302,\n\nif I use since\n2018-10-19T01:50:50.586630300Z Listening on port *:80,\n2018-10-19T01:57:47.659421400Z Update 'health check' status code = 801,\n2018-10-19T01:57:48.824841600Z Update 'health check' status code = 801,\n2018-10-19T01:57:49.307380200Z Update 'health check' status code = 801,\n2018-10-19T01:57:49.762312300Z Update 'health check' status code = 801,\n2018-10-19T01:57:50.259214200Z Update 'health check' status code = 801,\n2018-10-19T01:57:50.748869200Z Update 'health check' status code = 801,\n2018-10-19T01:57:51.167997600Z Update 'health check' status code = 801,\n2018-10-19T01:57:51.721189600Z Update 'health check' status code = 801,\n2018-10-19T01:57:52.250384300Z Update 'health check' status code = 801,\n2018-10-19T01:57:52.729288100Z Update 'health check' status code = 801,\n\nSo, I think since is useful for us.\n. > @opera443399 can you update the changes to include only what's related to the line number?\nOf course I will follow your advice, after we discussed. \nMore details:\n\nforce update the service t001 one more time:\n\nlogs explain:\nstatus code = 801  -> 1st update(2018-10-19)\nstatus code = 501  -> 2st update(2018-10-19)\nstatus code = 200/301 -> original(2018-10-16)\nshowing 100 latest logs(just empty the since input field):\n2018-10-19T01:50:50.586630300Z Listening on port *:80,\n2018-10-19T01:57:47.659421400Z Update 'health check' status code = 801,\n2018-10-16T08:38:15.659120481Z Listening on port *:80,\n2018-10-19T01:57:48.824841600Z Update 'health check' status code = 801,\n2018-10-19T02:12:34.654372500Z Listening on port *:80,\n2018-10-19T02:12:55.930805100Z Update 'health check' status code = 501,\n2018-10-16T09:08:32.908666630Z Current 'health check' status code = 200,\n2018-10-19T01:57:49.307380200Z Update 'health check' status code = 801,\n2018-10-19T01:57:49.762312300Z Update 'health check' status code = 801,\n2018-10-19T02:12:57.008224300Z Update 'health check' status code = 501,\n2018-10-19T01:57:50.259214200Z Update 'health check' status code = 801,\n2018-10-16T09:08:39.699513037Z Current 'health check' status code = 200,\n2018-10-19T01:57:50.748869200Z Update 'health check' status code = 801,\n2018-10-19T01:57:51.167997600Z Update 'health check' status code = 801,\n2018-10-19T01:57:51.721189600Z Update 'health check' status code = 801,\n2018-10-19T01:57:52.250384300Z Update 'health check' status code = 801,\n2018-10-19T01:57:52.729288100Z Update 'health check' status code = 801,\n2018-10-16T09:08:39.885916846Z Current 'health check' status code = 200,\n2018-10-19T02:12:57.530769700Z Update 'health check' status code = 501,\n2018-10-16T09:08:40.061997925Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.220887109Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.382558883Z Current 'health check' status code = 200,\n2018-10-19T02:12:58.079174900Z Update 'health check' status code = 501,\n2018-10-16T09:08:40.566524294Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.742247644Z Current 'health check' status code = 200,\n2018-10-16T09:08:40.918211777Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.094762647Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.254811320Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.757049674Z Current 'health check' status code = 200,\n2018-10-19T02:12:58.567684600Z Update 'health check' status code = 501,\n2018-10-16T09:08:41.866249990Z Current 'health check' status code = 200,\n2018-10-16T09:08:41.951452884Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.035542926Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.120240293Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.197460590Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.282627551Z Current 'health check' status code = 200,\n2018-10-19T02:12:59.071834000Z Update 'health check' status code = 501,\n2018-10-16T09:08:42.370831008Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.451665723Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.531980019Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.617242551Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.699504852Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.783594712Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.865876692Z Current 'health check' status code = 200,\n2018-10-16T09:08:42.950028667Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.032503596Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.116581223Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.199663434Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.282242276Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.365730808Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.450191074Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.531673407Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.613821923Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.698136981Z Current 'health check' status code = 200,\n2018-10-16T09:08:43.780923311Z Current 'health check' status code = 200,\n2018-10-16T11:22:43.894496652Z Current 'health check' status code = 200,\n2018-10-19T02:12:59.548750800Z Update 'health check' status code = 501,\n2018-10-16T11:22:44.093237653Z Current 'health check' status code = 200,\n2018-10-16T11:22:44.261005463Z Current 'health check' status code = 200,\n2018-10-16T11:22:44.429293493Z Current 'health check' status code = 200,\n2018-10-16T11:22:44.930430499Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.042197711Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.124021947Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.208119730Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.290020781Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.375838007Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.457025723Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.540649654Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.625579626Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.710933904Z Current 'health check' status code = 200,\n2018-10-19T02:13:00.040250900Z Update 'health check' status code = 501,\n2018-10-16T11:22:45.793384892Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.875793388Z Current 'health check' status code = 200,\n2018-10-16T11:22:45.963588968Z Current 'health check' status code = 200,\n2018-10-19T02:13:00.514386300Z Update 'health check' status code = 501,\n2018-10-16T11:23:32.332890668Z Update 'health check' status code = 302,\n2018-10-16T11:23:33.276234839Z Update 'health check' status code = 302,\n2018-10-16T11:23:36.273034389Z Update 'health check' status code = 302,\n2018-10-19T02:13:00.993011100Z Update 'health check' status code = 501,\n2018-10-16T11:23:36.832181564Z Update 'health check' status code = 302,\n2018-10-16T11:23:37.296557059Z Update 'health check' status code = 302,\n2018-10-16T11:23:37.744654422Z Update 'health check' status code = 302,\n2018-10-16T11:23:38.168951676Z Update 'health check' status code = 302,\n2018-10-16T11:23:38.614798033Z Update 'health check' status code = 302,\n2018-10-16T11:23:39.113933150Z Update 'health check' status code = 302,\n2018-10-19T02:13:01.482647900Z Update 'health check' status code = 501,\n2018-10-19T02:13:02.011462600Z Update 'health check' status code = 501,\n2018-10-19T02:13:02.513119100Z Update 'health check' status code = 501,\n\nshowing 100 latest logs since 24h(default action, just refresh the browser):\n2018-10-19T02:12:34.654372500Z Listening on port *:80,\n2018-10-19T01:50:50.586630300Z Listening on port *:80,\n2018-10-19T02:12:55.930805100Z Update 'health check' status code = 501,\n2018-10-19T02:12:57.008224300Z Update 'health check' status code = 501,\n2018-10-19T01:57:47.659421400Z Update 'health check' status code = 801,\n2018-10-19T02:12:57.530769700Z Update 'health check' status code = 501,\n2018-10-19T02:12:58.079174900Z Update 'health check' status code = 501,\n2018-10-19T01:57:48.824841600Z Update 'health check' status code = 801,\n2018-10-19T02:12:58.567684600Z Update 'health check' status code = 501,\n2018-10-19T01:57:49.307380200Z Update 'health check' status code = 801,\n2018-10-19T02:12:59.071834000Z Update 'health check' status code = 501,\n2018-10-19T02:12:59.548750800Z Update 'health check' status code = 501,\n2018-10-19T01:57:49.762312300Z Update 'health check' status code = 801,\n2018-10-19T02:13:00.040250900Z Update 'health check' status code = 501,\n2018-10-19T02:13:00.514386300Z Update 'health check' status code = 501,\n2018-10-19T01:57:50.259214200Z Update 'health check' status code = 801,\n2018-10-19T02:13:00.993011100Z Update 'health check' status code = 501,\n2018-10-19T01:57:50.748869200Z Update 'health check' status code = 801,\n2018-10-19T01:57:51.167997600Z Update 'health check' status code = 801,\n2018-10-19T02:13:01.482647900Z Update 'health check' status code = 501,\n2018-10-19T01:57:51.721189600Z Update 'health check' status code = 801,\n2018-10-19T02:13:02.011462600Z Update 'health check' status code = 501,\n2018-10-19T02:13:02.513119100Z Update 'health check' status code = 501,\n2018-10-19T01:57:52.250384300Z Update 'health check' status code = 801,\n2018-10-19T01:57:52.729288100Z Update 'health check' status code = 801,\n\nshowing 100 latest logs since 2018-10-19T10:00:00+08:00:\n2018-10-19T02:12:34.654372500Z Listening on port *:80,\n2018-10-19T02:12:55.930805100Z Update 'health check' status code = 501,\n2018-10-19T02:12:57.008224300Z Update 'health check' status code = 501,\n2018-10-19T02:12:57.530769700Z Update 'health check' status code = 501,\n2018-10-19T02:12:58.079174900Z Update 'health check' status code = 501,\n2018-10-19T02:12:58.567684600Z Update 'health check' status code = 501,\n2018-10-19T02:12:59.071834000Z Update 'health check' status code = 501,\n2018-10-19T02:12:59.548750800Z Update 'health check' status code = 501,\n2018-10-19T02:13:00.040250900Z Update 'health check' status code = 501,\n2018-10-19T02:13:00.514386300Z Update 'health check' status code = 501,\n2018-10-19T02:13:00.993011100Z Update 'health check' status code = 501,\n2018-10-19T02:13:01.482647900Z Update 'health check' status code = 501,\n2018-10-19T02:13:02.011462600Z Update 'health check' status code = 501,\n2018-10-19T02:13:02.513119100Z Update 'health check' status code = 501,\n\n. > Ok, trying to understand your use case for the since filter:\n\nAre you using it to show the latest log entries and to filter out disordered task log entries?\nWhat about finding a way to sort the logs via the timestamp? I believe that it would also solve the problems reported by other users in #1942\n\nThanks for your patience, @deviantony \nYes, I use it to filter out the log entries for my dev colleagues(my role is ops). It's a shame that I could not find a way to sort the logs via the timestamp simply using docker api or cmd. Finally I noticed the since parameter.\nWe have to sort it in Portainer after we get service logs from docker api, right? Regarding to my technical problem, I need your help again. If things become more complex, why not just add the ability to use since and lower lineCount to 100, before we could enhance the log-viewer with the ability to sort the logs via the timestamp in the future?\nIn conclusion, \n1. Add the ability to use since\n2. Just lower lineCount to 100\n3. Add the ability to sort the logs via the timestamp in Portainer\nWhat should we do now? . > @opera443399 if we add the ability to sort by timestamp, why would you still need the since filter?\n@deviantony \nOr, just I need this? Alright, if option 3 is the only choice, it's also OK for me, just lower the lineCount to filter less log entries. But I still want to explain why I need the since filter one more time.\nIf an issue occurred 30m ago, since+lineCount+sorted will return the log entries from that time range.\nif we just use lineCount+sorted, the result is not that accurate, we have to adjust the lineCount several times to filter the log entries.\nI suggest to keep the since filter as another choice for us(just like how we use it in docker cmd-line).\n. > Thanks for continuing the discussion, it's not that I do not want your since filter to be merge, I'm just trying to understand your problem so that we can figure the best solution.\nI see, just worried about not making it clear in English.\n\nDo you mean that you would need to adjust the lineCount until you can figure out the correct number that will display the logs for the last 30min?\n\nyes\n. > @opera443399 we're thinking about adding a select/dropdown with pre-defined values instead of an input to enter a timestamp.\n\nDefault values should be: last 10 minutes, last hour, last 4 hours, last day. That would be a good start, do you think you can update your PR to integrate these changes?\n\n@deviantony Please have a look at this changes:\n\n\n\n. @deviantony \nUpdated:\n\n\n. Agree with you. Another question, how to import momentjs in this angularjs project? I guess there is place to include moment in yarn or npm or something?. ",
    "mrts": "Thanks @deviantony, better to keep the discussion in one place!. ",
    "lrezende": "Should check if admin user exists here I think... \nhttps://github.com/portainer/portainer/blob/9c10a1def2121d8914ec43876adfd8d9d904600b/api/cmd/portainer/main.go#L239\nI know nothing about Go lang for now... Not able to create a PR. ",
    "vasilvestre": "@deviantony I don't know. I'm running the last one I think.. I've just used the docker run as installation guide ask.\nHow to get the logs ?. I've learned how to use docker without GUI.. Guyht will maybe be able to help you.\nThanks for help :). ",
    "guyht": "I am seeing this same issue.  Looks like auth is disabled, but it is still showing the login page.  When you try to login it gives an Authentication is disabled error:\nsudo docker logs -f 2a2d1de58f47c468ea354a90145e9f4ba0a3d9491d6bed2d8681c4f3a703b32e\n2017/10/08 22:17:09 Starting Portainer 1.14.3 on :9000\n2017/10/08 22:17:13 http error: User not found (code=404)\n2017/10/08 22:17:20 http error: Authentication is disabled (code=503)\n. ",
    "tvon": "FWIW I ran into this while using docker-compose and it eventually resolved itself (which to me suggests it was a browser caching issue).. ",
    "kamal24111991": "Hi,\nI'm facing issue with privileges of containers. I've multiple hosts on which docker-compose is running for different environments. now I've added multiple host in single Portainer server and data is reflecting fine for 'Admin' user.  \nNow i want to provide access of containers to my team member for which i created a team with name \"development\" and added user \"test\" in team . After that I've selected specific environment(endpoint) and change containers ownership from administrators to restricted access \"development\" team and for now test user can view the containers with their user.\nI would like to tell you that our deployment manage through CI tool \"Jenkins\".  In our deployment strategy firstly  docker-compose down  all services and spin up the new containers with new ID.  Now issue occur for test user and he can't view  new containers with same name because container ownership reset to \"Administrators\"  .\nPlease suggest to overcome on this situation. version: \"3.3\"\nservices:\n    webserver:\n      build:\n        context: .\n        dockerfile: Dockerfile-nginx\n        labels:\n           - portainer_ownership=restricted\n           - portainer_authorized_teams=[developers]\n      volumes:\n        - ./public:/var/www/html/public\n      depends_on:\n        - app\n      ports:\n        - \"8001:80\"\n      networks:\n        - dev-network\nI've tried with labels and build docker-compose stack but webserver container ownership don't change and it remains stick with \"Administrators\"\nPlease suggest !!. ",
    "jjesudassbah": "Also, When docker config functionality is implemented, can target be added to them as well?. ",
    "trinode": "I wouldn't mind how simple it was but knowing that a default install of portainer was a little more secure would be very reassuring.\nIn my case I'd be concerned about having to run multiple instances of a proxy for this purpose. I'm using swarm and have no need for a proxy as it (swarm) routes all the traffic for me, so this would be extra instance(s) on small VMs only for that purpose.\nin the simplest case:\nLogin request -> failed -> log attempt to db\nLogin request -> \ncheck count(*) from login_failures where failure_timepoint > now() - 5 minutes -> \nif > n don't even check password, deny (show message telling user to wait)\notherwise check_password\n(and also delete old login failures to keep things clean)\nBasically my reason for selecting portainer was low resource use and simplicity of installation / configuration, requiring a proxy would somewhat negate that\n. ",
    "julio-matarranz": "\ud83d\udc4d Any updates please ? . ",
    "StefanFl": "This would be a great feature. All our containers are deployed externally via GitLab CI / docker-compose. Every deploy sets the ownership to public. This is the main reason, why developers cannot get access to Portainer on our production environment. They should only see the containers they are responsible for.. ",
    "loky9000": "+1. ",
    "AlexJakeGreen": "+1\n. https://github.com/portainer/portainer/compare/develop...AlexJakeGreen:autocreate_ldap_user. @deviantony Here is the PR #1839\nThanks!\nps Maybe, it is better no not store ldap users in db at all since Portainer already uses signed cookies and user data (including roles) can be kept there. But I don't know how this approach fits further development plans and looks like it should be a different story.. New user receives jwt token, but yes, he is not added into any group and thus has to be managed additionally via web ui and this PR solves only a part regarding user autocreation.\nSo, user's permissions have to be granted in some way, and I can see several strategies:\n\n\nAdd new user into some preexisting 'default' team - in this way we skip ldap groups and still need manually give permissions via web ui. Possible, but not flexible for me because all my users live in LDAP\n\n\nAdd a third hardcoded ReadOnlyRole (first two are Admin and StandardUser) and assign it to user - user will be able to see resources from start, but admin still needs to assign him to a proper team later. This starts to be ok for me, but community may have different opinion, so confirmation needed. There was an issue for RO, but now it is closed and seems will be implemented in different way\n\n\nImplement mapping ldap group -> team, is the best, but needs much more work in both golang and js code + still need something for readonly access...\n. @deviantony Hi,\n\n\nI added an additional logic to check which groups user has in LDAP/AD. If a common name (cn) of a group is equal to team name in portainer then the user will be added into that team.\nExample:\nTeam 'ship_crew' exists in portainer;\nUser cn=Philip J. Fry,ou=people,dc=planetexpress,dc=com is a member of group cn=ship_crew,ou=people,dc=planetexpress,dc=com in LDAP;\nAs a result, user will be added into team 'ship_crew' during his login (groups are being checked each login).\nIf admin wants to deny access to ship_crew for this user then he removes him from group in ldap first, then removes him from team in portainer.\nAdded a short video explaining how it looks like in the first comment. Sorry guys, I have no free time for this project.. People should have a last resort for the case when LDAP is down, and I want to change that part to:\nIF user exists internally, has admin role and the password is not empty --> authenticate via internal db\nELSE authenticate according to settings.AuthenticationMethod\nWhat you think about this logic?. ",
    "Typz": "More generaically, maybe admins should be able to define \"policies\", so that they can setup different access control parameters depending on the container name/image/label/... of the new container(s).. ",
    "JermaHuang": "yes,and the button's privilege, such as 'delete' ,'stop'... maybe some user should not access to . Thanks,this solved my problem,i can write a script to registration hosts.\nsomehow, i think it maybe a function in the todo list\nbest wish. ",
    "flayks": "I second this. It could be very nice not to have public as a default privilege when you have multiple users on a same server. Also when you recreate a container, it removes the privileges so you have to redefine every time the restrictions\u2026. ",
    "gonzalo": "Same problem here, our services are deployed through gitilab / docker-compose and we do multiple deployments at day. It would be superusefull to have flags in docker compose to set ownership in a similar way we do with traefik for port publishing.. ",
    "timelf123": "This is a real pain in my ass right now - have we made any progress?. ",
    "mielune": "+1\nUsing CI/CD to deploy stacks, this feature will be great :) . Same issue with my cluster, waiting this to use integrated deploy in Portainer.. ",
    "SatvinderSinghNC4": "So in order to apply labels, docker compose will look like below??\ndeploy: \n  labels:\n   - portainer_ownership=restricted\n   - io.portainer.uac.teams=1,2,3. That didnt work, FYI im running the stack from outside, im not creating it in portainer. Below is the deploy excerpt from one of the services..\ndeploy:\n  replicas: 1\n  resources:\n     limits:\n       memory: 2g\n       cpus: '0.25'\n     reservations:\n       memory: 2g\n       cpus: '0.25'\n  restart_policy:\n    condition: on-failure\n  labels:\n    - \"io.portainer.uac.teams=devqc\". Understood, thanks...\n",
    "malde": "Just to double-check, this did not yet make it into 1.20.0, correct?. ",
    "oliveirafilipe": "Hi @deviantony, any release date prediction? This is a great feature, as is an access control list (ACL) to manage. ",
    "OrionDevelopment": "I second this motion.\nSome kind of read-only view is a needed.\nPortainer is not just a great orgastration tool, but it also gives a nice overview of the used resources, logs, and container information. In a lot of cases you want users to see what is going with their resources and systems without being able to modify either those, or other resources, it is simply said to easy to just hide the resources instead of making them readonly.. ",
    "matthewmrichter": "This would be the \"killer app\" for me - looking for a way to present logging to swarm users. But I don't trust them not to start mining crypto in our swarm if they have full access!. ",
    "mjdavies": "+1 for this. ",
    "wiked03": "Any update on this feature?  We are dying to use portainer, but we really need to have a group of users who can \"look but not touch\"  before we can get moving on it.. ",
    "schmidlop": "That worked. Thanks very much!. ",
    "paresy": "I had the same error. I was redeploying a container with the same configuration (on a new image) and this error appeared. \nThe container was previously created by the Synology Docker App. The host port seems to be missing?!\n\n. {\n    \"AppArmorProfile\": \"docker-default\",\n    \"Args\": [],\n    \"Config\": {\n        \"ArgsEscaped\": true,\n        \"AttachStderr\": false,\n        \"AttachStdin\": false,\n        \"AttachStdout\": false,\n        \"Cmd\": [\n            \"/usr/bin/symcon\"\n        ],\n        \"DDSM\": false,\n        \"Domainname\": \"\",\n        \"Entrypoint\": null,\n        \"Env\": [\n            \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n            \"LANG=de_DE.utf8\"\n        ],\n        \"Hostname\": \"IP-Symcon-Alexa\",\n        \"Image\": \"symcon/symcon:5.0-104\",\n        \"Labels\": {},\n        \"OnBuild\": null,\n        \"OpenStdin\": true,\n        \"StdinOnce\": false,\n        \"Tty\": true,\n        \"User\": \"\",\n        \"Volumes\": {\n            \"/root\": {},\n            \"/var/lib/symcon\": {},\n            \"/var/log/symcon\": {}\n        },\n        \"WorkingDir\": \"\"\n    },\n    \"Created\": \"2018-03-14T19:24:27.775806277Z\",\n    \"Driver\": \"aufs\",\n    \"ExecIDs\": null,\n    \"GraphDriver\": {\n        \"Data\": null,\n        \"Name\": \"aufs\"\n    },\n    \"HostConfig\": {\n        \"AutoRemove\": false,\n        \"Binds\": [\n            \"/volume1/Symcon/DockerAlexa/Data:/var/lib/symcon:rw\",\n            \"/volume1/Symcon/DockerAlexa/Log:/var/log/symcon:rw\",\n            \"/volume1/Symcon/DockerAlexa:/root:rw\"\n        ],\n        \"BlkioDeviceReadBps\": null,\n        \"BlkioDeviceReadIOps\": null,\n        \"BlkioDeviceWriteBps\": null,\n        \"BlkioDeviceWriteIOps\": null,\n        \"BlkioWeight\": 0,\n        \"BlkioWeightDevice\": null,\n        \"CapAdd\": null,\n        \"CapDrop\": null,\n        \"Cgroup\": \"\",\n        \"CgroupParent\": \"\",\n        \"ConsoleSize\": [\n            0,\n            0\n        ],\n        \"ContainerIDFile\": \"\",\n        \"CpuCount\": 0,\n        \"CpuPercent\": 0,\n        \"CpuPeriod\": 0,\n        \"CpuQuota\": 0,\n        \"CpuRealtimePeriod\": 0,\n        \"CpuRealtimeRuntime\": 0,\n        \"CpuShares\": 50,\n        \"CpusetCpus\": \"\",\n        \"CpusetMems\": \"\",\n        \"DeviceCgroupRules\": null,\n        \"Devices\": null,\n        \"DiskQuota\": 0,\n        \"Dns\": null,\n        \"DnsOptions\": null,\n        \"DnsSearch\": null,\n        \"Env\": [\n            \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n            \"LANG=de_DE.utf8\"\n        ],\n        \"ExtraHosts\": null,\n        \"GroupAdd\": null,\n        \"IOMaximumBandwidth\": 0,\n        \"IOMaximumIOps\": 0,\n        \"IpcMode\": \"\",\n        \"Isolation\": \"\",\n        \"KernelMemory\": 0,\n        \"Links\": null,\n        \"LogConfig\": {\n            \"Config\": {},\n            \"Type\": \"db\"\n        },\n        \"Memory\": 0,\n        \"MemoryReservation\": 0,\n        \"MemorySwap\": 0,\n        \"MemorySwappiness\": -1,\n        \"NanoCpus\": 0,\n        \"NetworkMode\": \"bridge\",\n        \"OomKillDisable\": false,\n        \"OomScoreAdj\": 0,\n        \"PidMode\": \"\",\n        \"PidsLimit\": 0,\n        \"PortBindings\": {\n            \"3777/tcp\": [\n                {\n                    \"HostIp\": \"0.0.0.0\",\n                    \"HostPort\": \"\"\n                }\n            ]\n        },\n        \"Privileged\": false,\n        \"PublishAllPorts\": false,\n        \"ReadonlyRootfs\": false,\n        \"RestartPolicy\": {\n            \"MaximumRetryCount\": 0,\n            \"Name\": \"no\"\n        },\n        \"Runtime\": \"runc\",\n        \"SecurityOpt\": null,\n        \"ShmSize\": 67108864,\n        \"UTSMode\": \"\",\n        \"Ulimits\": null,\n        \"UsernsMode\": \"\",\n        \"VolumeDriver\": \"\",\n        \"VolumesFrom\": null\n    },\n    \"HostnamePath\": \"/volume1/@docker/containers/6ef86731a959db1b90fd2bb38223fd790cf0e34e97a2dc10d5004980ae8c2311/hostname\",\n    \"HostsPath\": \"/volume1/@docker/containers/6ef86731a959db1b90fd2bb38223fd790cf0e34e97a2dc10d5004980ae8c2311/hosts\",\n    \"Id\": \"6ef86731a959db1b90fd2bb38223fd790cf0e34e97a2dc10d5004980ae8c2311\",\n    \"Image\": \"sha256:ad2bc2eba73e1e05b8d5b75ac6e2f192eca5c0b9cc3ca8de3233eb2d3c96b372\",\n    \"LogPath\": \"/volume1/@docker/containers/6ef86731a959db1b90fd2bb38223fd790cf0e34e97a2dc10d5004980ae8c2311/log.db\",\n    \"MountLabel\": \"\",\n    \"Mounts\": [\n        {\n            \"Destination\": \"/var/lib/symcon\",\n            \"Mode\": \"rw\",\n            \"Propagation\": \"\",\n            \"RW\": true,\n            \"Source\": \"/volume1/Symcon/DockerAlexa/Data\",\n            \"Type\": \"bind\"\n        },\n        {\n            \"Destination\": \"/var/log/symcon\",\n            \"Mode\": \"rw\",\n            \"Propagation\": \"\",\n            \"RW\": true,\n            \"Source\": \"/volume1/Symcon/DockerAlexa/Log\",\n            \"Type\": \"bind\"\n        },\n        {\n            \"Destination\": \"/root\",\n            \"Mode\": \"rw\",\n            \"Propagation\": \"\",\n            \"RW\": true,\n            \"Source\": \"/volume1/Symcon/DockerAlexa\",\n            \"Type\": \"bind\"\n        }\n    ],\n    \"Name\": \"/IP-Symcon-Alexa\",\n    \"NetworkSettings\": {\n        \"Bridge\": \"\",\n        \"EndpointID\": \"2acb30877a5a9112f41b5e2df12076e9cf4b219ebb8124e6bda5633f2b98e197\",\n        \"Gateway\": \"172.17.0.1\",\n        \"GlobalIPv6Address\": \"\",\n        \"GlobalIPv6PrefixLen\": 0,\n        \"HairpinMode\": false,\n        \"IPAddress\": \"172.17.0.4\",\n        \"IPPrefixLen\": 16,\n        \"IPv6Gateway\": \"\",\n        \"LinkLocalIPv6Address\": \"\",\n        \"LinkLocalIPv6PrefixLen\": 0,\n        \"MacAddress\": \"02:42:ac:11:00:04\",\n        \"Networks\": {\n            \"bridge\": {\n                \"Aliases\": null,\n                \"EndpointID\": \"2acb30877a5a9112f41b5e2df12076e9cf4b219ebb8124e6bda5633f2b98e197\",\n                \"Gateway\": \"172.17.0.1\",\n                \"GlobalIPv6Address\": \"\",\n                \"GlobalIPv6PrefixLen\": 0,\n                \"IPAMConfig\": null,\n                \"IPAddress\": \"172.17.0.4\",\n                \"IPPrefixLen\": 16,\n                \"IPv6Gateway\": \"\",\n                \"Links\": null,\n                \"MacAddress\": \"02:42:ac:11:00:04\",\n                \"NetworkID\": \"f4a0476e5a6ef6b4710e36f06951bff41445ca020a272c4c208c0cb6d2dbfaa7\"\n            }\n        },\n        \"Ports\": {\n            \"3777/tcp\": [\n                {\n                    \"HostIp\": \"0.0.0.0\",\n                    \"HostPort\": \"32773\"\n                }\n            ]\n        },\n        \"SandboxID\": \"be24bd57952966d9c170657c1aaf98734616f317a08daa53c58db220d130aabd\",\n        \"SandboxKey\": \"/var/run/docker/netns/be24bd579529\",\n        \"SecondaryIPAddresses\": null,\n        \"SecondaryIPv6Addresses\": null\n    },\n    \"Path\": \"/usr/bin/symcon\",\n    \"ProcessLabel\": \"\",\n    \"ResolvConfPath\": \"/volume1/@docker/containers/6ef86731a959db1b90fd2bb38223fd790cf0e34e97a2dc10d5004980ae8c2311/resolv.conf\",\n    \"RestartCount\": 0,\n    \"State\": {\n        \"Dead\": false,\n        \"Error\": \"\",\n        \"ExitCode\": 0,\n        \"FinishedAt\": \"0001-01-01T00:00:00Z\",\n        \"FinishedTs\": -62135596800,\n        \"OOMKilled\": false,\n        \"Paused\": false,\n        \"Pid\": 12903,\n        \"Restarting\": false,\n        \"Running\": true,\n        \"StartedAt\": \"2018-03-14T19:24:31.438597671Z\",\n        \"StartedTs\": 1521055471,\n        \"Status\": \"running\"\n    }\n}. ",
    "michaellee8": "Is this bug because of no port mapping exists hence no the port mapping object, and referenced as undefined?. Is this bug because of no port mapping exists hence no the port mapping object, and referenced as undefined?. @ncresswell . @ncresswell . Is this related to #2114 ?. Is this related to #2114 ?. @Codelica May I know what did you put at registry URL?. @Codelica May I know what did you put at registry URL?. From Gitlab doc:\n```\nUse different image names\nGitLab supports up to 3 levels of image names. The following examples of images are valid for your project:\nregistry.gitlab.com/michaellee8/portainer-registry-bug-test:tag\nregistry.gitlab.com/michaellee8/portainer-registry-bug-test/optional-image-name:tag\nregistry.gitlab.com/michaellee8/portainer-registry-bug-test/optional-name/optional-image-name:tag\nMay I know how do you handle the second/third type of registry paths?. From Gitlab doc:\nUse different image names\nGitLab supports up to 3 levels of image names. The following examples of images are valid for your project:\nregistry.gitlab.com/michaellee8/portainer-registry-bug-test:tag\nregistry.gitlab.com/michaellee8/portainer-registry-bug-test/optional-image-name:tag\nregistry.gitlab.com/michaellee8/portainer-registry-bug-test/optional-name/optional-image-name:tag\n```\nMay I know how do you handle the second/third type of registry paths?. May I know your working \"appropriate registry\" in second and third case?. May I know your working \"appropriate registry\" in second and third case?. Tried it out, still didn't works\n\n\n. Tried it out, still didn't works\n\n\n. ",
    "meee1": "in\n a.HostConfig.PortBindings.forEach(function(c) {\nif no previous exposed ports\na.ExposedPorts = undefined\nso it fails\n\n. ",
    "STX2k": "is still an Bug :( Hope it will fixed soon. ",
    "rgl": "I just tried on my rgl/docker-swarm-cluster-ubuntu-vagrant and it has the same problem (I used a bash script to show the colors):\n\nContrast that with the visual studio code 1.17 terminal:\n\nOr the gnome-terminal 3.20.2:\n\n. @deviantony sorry, what container do you mean/want?. This is also happening when running in a Windows Server 1709 container. It works with the suggested workaround:\nDockerfile\nWORKDIR /app\nENTRYPOINT [\"/app/portainer.exe\", \"--assets\", \".\"]. @1138-4EB its from https://github.com/rgl/docker-windows-core-insider-2016-vagrant/blob/master/images/portainer/Dockerfile. I just untar the portainer tarball to c:/app.. I would make all relative paths relative to the process current working directory. But make the default asset path to the executable directory, and do this by making defaultAssetsDirectory a variable that is set at runtime (before parsing the flags). . @deviantony works in windows too :-). ",
    "capur16": "would be great thanks. It is not necessary but it may be useful to view them and change them, for example, in different endpoints. Ok I pushed the changes. ",
    "open1234": "Thank u. ",
    "daiaji": "@WTFKr0 @deviantony \nAre you abandoning the plan for internationalization now?\nBecause I found that the recent submission of feat807-i18n was a year ago.. ",
    "ransunak": "@deviantony any update on selecting another endpoint if primary is not available ?. Is there any update on this issue?. Hi, i am using portainer/agent:lastest docker images to deploy  in multi node docker swarm environment.\nI am getting error while i reload the page as \"Endpoint connection Failure/Down\", and in the Home screen primary down . When i did analysis, i found the the Primary agent consumed the resource limit i have mentioned in the compose file.\nIs there any way to make other portainer agents running in multi node cluster as primary?( Like docker elects Leader from Manager)\n. Yes ,I have followed the same instructions. I observed, agent is taking complete host resource and when I limit the agent resource in compose file, agent will consume till the limit and shows as Down in the Portainer UI\nAfter restarting the again only, UI shows primary up.. ",
    "kaotika": "Hi, are there any updates on this issue?. Until implementation is finished, this workaround works for me. Use your existing ssh key pair or create a new one with ssh-keygen.\n```yaml\nversion: \"3.3\"\nservices:\n  dev:\n    image: portainer/portainer:develop\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - data:/data\n      - $SSH_AUTH_SOCK:/ssh-agent\n    environment:\n      - SSH_AUTH_SOCK=/ssh-agent\n      - SSH_KNOWN_HOSTS=/root/.ssh/known_hosts\n    secrets:\n      - source: pkey\n        target: /root/.ssh/id_rsa\n        mode: 0400\n      - source: pubkey\n        target: /root/.ssh/id_rsa.pub\n        mode: 0400\n      - source: known_hosts\n        target: /root/.ssh/known_hosts\n        mode: 0444\nvolumes:\n  data:\nsecrets:\n  pkey:\n    file: ./id_rsa\n  pubkey:\n    file: ./id_rsa.pub\n  known_hosts:\n    file: ./known_hosts\n``. I added a full example with an additional template container: https://github.com/datalyze-solutions/portainer-ssh.. @mallchin I didn't solved this. After every reboot I manually add the key by callingssh-add`.. ",
    "tfenster": "Very nice idea, didn't think about that. I currently don't have a need to access a secured repo, but definitely will try that when that comes up again. ",
    "toninis": "\nThere are two problems to tackle:\n* Using Docker images hosted in private Docker registries (behind authentication) inside templates (1)\n\n* Using stack files hosted in private Git repositories (behind Basic/SSH auth) inside templates (2)\n\nThe discussion in here have been mixing these two topics, I want to separate these issues. We'll tackle and discuss (1) in this issue, please open a new issue for (2).\n\nHello,\nIs there an issue to track the progress of the first issue ?\nThanks,\nAntonis. Hello and +1 for this,\nIs there a roadmap for this?\nThis a pretty handy feature as this would make portainer fully customizable.\n. Hello,\nThis happens because in the previous version the templates used the naming convention.\n\"stack\" , \"container\"  on the type field.\nNow the guys changed the template and their using numbers as in:\nhttps://portainer.readthedocs.io/en/stable/templates.html\nTemplate type, valid values are: 1 (container), 2 (Swarm stack) or 3 (Compose stack).\nSo the templates repo is outdated and needs revisit.\nIts normal.\nYou can use the build in templates. and you will be fine. No need to add the github repo. \nJust disable it or change use this template , change it and attach it with the updated type.. ",
    "zsluedem": "@opera443399 Thanks !!!! help a lot!. ",
    "mahald": "one thing im missing here is the possibility to upload additional files. I typically deploy a stack/yml file with a few other files (they must be in the same folder as the yml while running the command). These other files are either configs or secrets that then are added or updated automatically\nfor example like so:\n```\nthose file must be in the same folder when running docker stack deploy\nsecrets:\n  cert: \n    file: ./fullchain.pem\n```\n. +1. ",
    "BastienAr": "Is there any issue to follow to be notified about the avancement of the private git repositories ?. ",
    "Cerebus": "Can x86 be added back?  The Ubuntu docker.io i386 packages are relatively up-to-date (e.g., I've got docker.io-17.03 running on 32b Xenial), so a 32b docker CLI does exist.. Docker doesn't provide i386 binaries, but the Ubuntu project is keeping (somewhat) up to date with the open source tools, including CLI and containerd:\nhttps://packages.ubuntu.com/search?suite=all&arch=i386&searchon=names&keywords=docker.io\n. ",
    "abitrolly": "Is it possible to hack a quick fix until #317 is ready? It might happen that #317 will never be finished.. Looks like logs are autoscrolled even without this patch if scroll position is at the bottom. Could browsers handle it themselves?. ",
    "krisee99": "Wow, that was fast, thank you very much!\nAlso, I'm glad that I could contribute to this awesome software!. ",
    "stuartmacfarlane": "Just tested this on this version and it still has the problem:\nportainer-1.15.0-linux-amd64.tar.gz\nOnly works if I supply the \"-assets .\" option no matter weather I execute the binary from inside or outside of the working directory.. ",
    "bmanojlovic": "not a problem!. As requested issue #1291 is opened and closing this as redundant. as stated in issue #1292  this PR adds rpm based packaging and service startup using systemd service control daemon . no problem, thanks for portainer!. regarding copyright no problem at all, it is default for spec files so it can be removed\n. ",
    "anilskp": "I got the similar error with portainer 1.15.0 , any solution for this issue.. ",
    "pmothe": "I got the same problem, now I will not be able to connect worker end points.. The image portainer/portainer:develop working fine,  Thanks you very much for quick support.\n. ",
    "jamesmr89": "Rollback:\n--rollback | \u00a0 | API 1.25+\u00a0Rollback to previous specification\n--rollback-delay | \u00a0 | API 1.28+\u00a0Delay between task rollbacks (ns\\|us\\|ms\\|s\\|m\\|h)\n--rollback-failure-action | \u00a0 | API 1.28+\u00a0Action on rollback failure (\u201cpause\u201d\\|\u201dcontinue\u201d)\n--rollback-max-failure-ratio | \u00a0 | API 1.28+\u00a0Failure rate to tolerate during a rollback\n--rollback-monitor | \u00a0 | API 1.28+\u00a0Duration after each task rollback to monitor for failure (ns\\|us\\|ms\\|s\\|m\\|h)\n--rollback-order | \u00a0 | API 1.29+\u00a0Rollback order (\u201cstart-first\u201d\\|\u201dstop-first\u201d)\n--rollback-parallelism | \u00a0 | API 1.28+\u00a0Maximum number of tasks rolled back simultaneously (0 to roll back all at once)\nUpdate:\n--update-delay | \u00a0 | Delay between updates (ns\\|us\\|ms\\|s\\|m\\|h)\n--update-failure-action | \u00a0 | Action on update failure (\u201cpause\u201d\\|\u201dcontinue\u201d\\|\u201drollback\u201d)\n--update-max-failure-ratio | \u00a0 | API 1.25+\u00a0Failure rate to tolerate during an update\n--update-monitor | \u00a0 | API 1.25+\u00a0Duration after each task update to monitor for failure (ns\\|us\\|ms\\|s\\|m\\|h)\n--update-order | \u00a0 | API 1.29+\u00a0Update order (\u201cstart-first\u201d\\|\u201dstop-first\u201d)\n--update-parallelism | \u00a0 | Maximum number of tasks updated simultaneously (0 to update all at once)\n. I'm working on a PR for this but curious where in the UI others thing this should exist.\nI feel like in the update config of services perhaps?  (For service context).  What about container config?\nHere's what I have right now, not sure if this makes the most sense or not for services page:\n\n. Yea anywhere we can lookup if there is a newer image that exits would be good IMO. @deviantony, I think both would actually be useful.  Perhaps a notification on the services list that a new image exists, and maybe a button to trigger the update from the lists page?  Similar to firmware on something like the unifi controller.  But also an option within the service to auto pull and update would be nice.  Would there be logged events when that happens?  Would something need to be polling the reigistry constantly?  I would certainly like to be notified that an update was triggered, especially if it happens automatically.. Yes we have an internal certificate authority.\nOn Wed, Apr 25, 2018 at 10:48 PM Anthony Lapenna notifications@github.com\nwrote:\n\n@jamesmr89 https://github.com/jamesmr89 are you using self signed certs?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1845#issuecomment-384521031,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAErl5HFJP26fZEBnxJLYhOzvN1zzE_8ks5tsV-6gaJpZM4TkjSf\n.\n. I\u2019d say do that only when the user specifies preferably something like this\nwhere I could specify the CA to use. This would mean you would need to\nstore the CA in Portiner Data directory I would think.\n\nhttps://stackoverflow.com/questions/11621768/how-can-i-make-git-accept-a-self-signed-certificate/11622001#11622001\nJim\nOn Thu, Apr 26, 2018 at 12:25 AM Anthony Lapenna notifications@github.com\nwrote:\n\nSeems that we can override the default HTTP client when cloning the\nrepository.\nWe might want to always use a custom client and skip server verification.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1845#issuecomment-384540676,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAErl97GRwconGxVLArFet9yJt2lX9BXks5tsXZYgaJpZM4TkjSf\n.\n. \n",
    "swift1911": "+1. is any plan for this request?. EDIT by @xAt0mZ for better lisibility\nPOST response :\n[{\"CreatedAt\":\"2018-07-24T02:29:09.076287058Z\",\"DesiredState\":\"shutdown\",\"ID\":\"1ajq2mt2hf1gepyjux7kpeljb\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.200/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-27T08:08:16.637638692Z\",\"Version\":{\"Index\":3323732}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:28c730b8e5f1ae8fed8a872b7ed2f4c884fb039b\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":23,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"4d8154ed00a8d18f4922be9d501fbd7559f8da47dde0baabc679517c99f43424\",\"ExitCode\":255,\"PID\":0},\"Err\":\"task: non-zero exit (255)\",\"Message\":\"started\",\"PortStatus\":{},\"State\":\"failed\",\"Timestamp\":\"2018-07-27T08:08:18.371074068Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.070850622Z\",\"Version\":{\"Index\":3323769}},{\"CreatedAt\":\"2018-07-17T12:31:44.756718416Z\",\"DesiredState\":\"shutdown\",\"ID\":\"4mbiqd69yww30oiqxsa6pc99b\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.4.92/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-27T08:08:16.637638692Z\",\"Version\":{\"Index\":3323732}}}],\"NodeID\":\"wvd9iefds58l7z2yi2gqlrh0u\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:c641fccf8c649af2562c8e49b076187398e5c076\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":0,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"ed43543411088433dfe78b6e5903eb3237070bf69a4b10b0501764f120d1f2ac\",\"ExitCode\":0,\"PID\":20443},\"Message\":\"started\",\"PortStatus\":{},\"State\":\"running\",\"Timestamp\":\"2018-07-17T12:31:45.902582167Z\"},\"UpdatedAt\":\"2018-07-27T08:08:16.695010852Z\",\"Version\":{\"Index\":3323736}},{\"CreatedAt\":\"2018-07-23T10:12:36.333701685Z\",\"DesiredState\":\"shutdown\",\"ID\":\"8pv9iuwh1ebjmafpwr7wwwdra\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.137/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-23T09:21:41.925698392Z\",\"Version\":{\"Index\":2432054}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:fbfaa763014a39824cda95324937701ec72dfbd9\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":22,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"5f2034aebb039202a284d9bf6a1444ac50da51d92f50fb98031d99e0c6720672\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-27T08:08:18.441788705Z\"},\"UpdatedAt\":\"2018-07-27T08:08:20.91354386Z\",\"Version\":{\"Index\":3323760}},{\"CreatedAt\":\"2018-07-23T10:12:28.656467938Z\",\"DesiredState\":\"shutdown\",\"ID\":\"lt8q3piokxx7pmux7izi150d2\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.136/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-23T09:21:41.925698392Z\",\"Version\":{\"Index\":2432054}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:fbfaa763014a39824cda95324937701ec72dfbd9\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":22,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"dfeb60dff6b98af64b2fd6e022ec87080d098bc89a2507fbb268bb32c70b9bd2\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-27T08:08:18.447309934Z\"},\"UpdatedAt\":\"2018-07-27T08:08:20.931639131Z\",\"Version\":{\"Index\":3323761}},{\"CreatedAt\":\"2018-07-24T02:29:16.898786683Z\",\"DesiredState\":\"shutdown\",\"ID\":\"mcteuif6en6g0i9aughlu6e39\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.201/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-27T08:08:16.637638692Z\",\"Version\":{\"Index\":3323732}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:28c730b8e5f1ae8fed8a872b7ed2f4c884fb039b\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":23,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"1a58548a4137972ab9e11f7cfb3c373c035ccdcc6e12a81896b2e7ccca411b9f\",\"ExitCode\":255,\"PID\":0},\"Err\":\"task: non-zero exit (255)\",\"Message\":\"started\",\"PortStatus\":{},\"State\":\"failed\",\"Timestamp\":\"2018-07-27T08:08:18.425423437Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.754968944Z\",\"Version\":{\"Index\":3323781}},{\"CreatedAt\":\"2018-07-23T10:02:45.401822681Z\",\"DesiredState\":\"shutdown\",\"ID\":\"ncaaxh7s054lfkqc6gf1zo49e\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.131/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-23T09:21:41.925698392Z\",\"Version\":{\"Index\":2432054}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:916739d66609ba732aa246c81a1e4ec1d4080c56\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":21,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"5ebccff3fecbbf086a4a7bc9a3c3f7dd7e8dbac7cd101f0c137d985f251284eb\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-27T08:08:18.419699977Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.073465865Z\",\"Version\":{\"Index\":3323769}},{\"CreatedAt\":\"2018-07-27T08:08:19.085877871Z\",\"DesiredState\":\"running\",\"ID\":\"pgto7p20ufks3cc0xln9hktda\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.14/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-27T08:08:16.637638692Z\",\"Version\":{\"Index\":3323732}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:28c730b8e5f1ae8fed8a872b7ed2f4c884fb039b\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":23,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"fd5ca38de44b26cedd2e757691cfe68205c40b95c9bd00f39d50e3c220cb86da\",\"ExitCode\":0,\"PID\":2354},\"Message\":\"started\",\"PortStatus\":{},\"State\":\"running\",\"Timestamp\":\"2018-07-27T08:08:37.41829831Z\"},\"UpdatedAt\":\"2018-07-27T08:08:37.457581443Z\",\"Version\":{\"Index\":3323940}},{\"CreatedAt\":\"2018-07-23T03:40:30.923136648Z\",\"DesiredState\":\"shutdown\",\"ID\":\"rf5wwgsvsadv2tkj6ult49ded\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.2.170/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-23T09:21:41.925698392Z\",\"Version\":{\"Index\":2432054}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:627224b64b938183f5c472b22ff5682f5632e4df@sha256:d8df66c9c2e040989c5385ebff9f1ce145784ecbbf2c035d3a684f3bb5ade2ad\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":20,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"99dd13b6f7d75f94a98b66f554a68225fe5a3a6a9ca8cca02433e61809a2d6a3\",\"ExitCode\":-1,\"PID\":41121},\"Err\":\"No such container: activity-website-esf-fdd.1.rf5wwgsvsadv2tkj6ult49ded\",\"Message\":\"started\",\"PortStatus\":{},\"State\":\"failed\",\"Timestamp\":\"2018-07-23T09:21:42.978460548Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.079946422Z\",\"Version\":{\"Index\":3323769}},{\"CreatedAt\":\"2018-07-22T08:28:22.486763711Z\",\"DesiredState\":\"shutdown\",\"ID\":\"tyoc00zic2pw7k2ky4vjecncf\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.181/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-22T08:08:32.187746239Z\",\"Version\":{\"Index\":2387653}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:627224b64b938183f5c472b22ff5682f5632e4df\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":19,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"7b553e4809e23379593af3c9016f56fb6a07b04c7cbe6dfb9bf49665e98c96fe\",\"ExitCode\":0,\"PID\":0},\"Message\":\"finished\",\"PortStatus\":{},\"State\":\"complete\",\"Timestamp\":\"2018-07-23T09:21:42.961590304Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.053696345Z\",\"Version\":{\"Index\":3323767}},{\"CreatedAt\":\"2018-07-22T08:08:33.77825156Z\",\"DesiredState\":\"shutdown\",\"ID\":\"vbu0bel4mnvbqoadqbz7k0gjz\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.124/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-22T08:08:32.187746239Z\",\"Version\":{\"Index\":2387653}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:627224b64b938183f5c472b22ff5682f5632e4df\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":19,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"d2ccfe77110d7d7aa7bdb12994b128e9c628f3e9fa70a0fc322ee5ffd18c681a\",\"ExitCode\":0,\"PID\":0},\"Message\":\"finished\",\"PortStatus\":{},\"State\":\"complete\",\"Timestamp\":\"2018-07-23T09:21:42.988613557Z\"},\"UpdatedAt\":\"2018-07-27T08:08:20.935413434Z\",\"Version\":{\"Index\":3323761}},{\"CreatedAt\":\"2018-07-21T09:43:54.297739856Z\",\"DesiredState\":\"shutdown\",\"ID\":\"vjh15lmpehwq7ktfccwfk4d70\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.7.122/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-19T05:47:30.183601614Z\",\"Version\":{\"Index\":2370737}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:61d625cd16df216016c6458b88439e7c5d689d76\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":16,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"a43640b7d91df54125d3edf26e71523f2236600726e71bcb0b19149239477090\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-22T08:08:32.932012519Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.066110633Z\",\"Version\":{\"Index\":3323769}},{\"CreatedAt\":\"2018-07-27T08:08:21.090378612Z\",\"DesiredState\":\"running\",\"ID\":\"w5a6ek93vy4n3fi4iav7w8tfh\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.109/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-27T08:08:16.637638692Z\",\"Version\":{\"Index\":3323732}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:28c730b8e5f1ae8fed8a872b7ed2f4c884fb039b\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":23,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"9f216612eccc6449a875e7fd66a3c4754e7335ec601b91d62ec82c4bb3f04b95\",\"ExitCode\":0,\"PID\":17096},\"Message\":\"started\",\"PortStatus\":{},\"State\":\"running\",\"Timestamp\":\"2018-07-27T08:09:19.258566708Z\"},\"UpdatedAt\":\"2018-07-27T08:09:19.293536838Z\",\"Version\":{\"Index\":3323983}},{\"CreatedAt\":\"2018-07-21T09:18:36.082456506Z\",\"DesiredState\":\"shutdown\",\"ID\":\"wvf65eac9ptkaxmm7nb0t7nm4\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.7.114/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-19T05:47:30.183601614Z\",\"Version\":{\"Index\":2370737}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:72fbf9c36bffb3da117255b30b098a7030ddba96\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":15,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"edac92c49a5bf974cd232f55fc518d658b6b8e2189545f0914e512907d093a56\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-22T08:08:32.960623042Z\"},\"UpdatedAt\":\"2018-07-27T08:08:20.902623943Z\",\"Version\":{\"Index\":3323760}},{\"CreatedAt\":\"2018-07-23T03:40:05.738413913Z\",\"DesiredState\":\"shutdown\",\"ID\":\"x1y38dduimj705wjrgjd7cyyc\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.2.167/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-23T09:21:41.925698392Z\",\"Version\":{\"Index\":2432054}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:627224b64b938183f5c472b22ff5682f5632e4df@sha256:d8df66c9c2e040989c5385ebff9f1ce145784ecbbf2c035d3a684f3bb5ade2ad\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":20,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"8bf66a62871e0a7c78f9013f9cbe55d068c81f39825862472fe9a4b6aa21d439\",\"ExitCode\":0,\"PID\":40656},\"Err\":\"No such container: activity-website-esf-fdd.2.x1y38dduimj705wjrgjd7cyyc\",\"Message\":\"started\",\"PortStatus\":{},\"State\":\"failed\",\"Timestamp\":\"2018-07-23T09:21:43.001200673Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.078338276Z\",\"Version\":{\"Index\":3323769}},{\"CreatedAt\":\"2018-07-23T10:03:03.10808654Z\",\"DesiredState\":\"shutdown\",\"ID\":\"xdka8rzwangmod6qktmkvayun\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.132/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-23T09:21:41.925698392Z\",\"Version\":{\"Index\":2432054}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:916739d66609ba732aa246c81a1e4ec1d4080c56\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":21,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"e0ba265d38b7a2227fe08a64f7a5fceb7ee1eef4d9cc3b6b6ae203b2731fb8ed\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-27T08:08:18.507539858Z\"},\"UpdatedAt\":\"2018-07-27T08:08:20.910713417Z\",\"Version\":{\"Index\":3323760}},{\"CreatedAt\":\"2018-07-21T09:52:28.675955223Z\",\"DesiredState\":\"shutdown\",\"ID\":\"xe5sxlm79toxkfl08q2ayuueg\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.7.132/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-22T08:08:32.187746239Z\",\"Version\":{\"Index\":2387653}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:627224b64b938183f5c472b22ff5682f5632e4df\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":19,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"78f2062a90325657e3de8789ef7beb3017c4c491bb0cbdae39849648a7294e10\",\"ExitCode\":255,\"PID\":0},\"Err\":\"task: non-zero exit (255)\",\"Message\":\"started\",\"PortStatus\":{},\"State\":\"failed\",\"Timestamp\":\"2018-07-23T09:21:42.989060214Z\"},\"UpdatedAt\":\"2018-07-27T08:08:20.901272734Z\",\"Version\":{\"Index\":3323760}},{\"CreatedAt\":\"2018-07-19T06:45:08.484402378Z\",\"DesiredState\":\"shutdown\",\"ID\":\"ytsp8ku2sl9avt5vc3xkgirtx\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.1.134/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-19T05:47:30.183601614Z\",\"Version\":{\"Index\":2370737}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:49daabdf4c5f2e8b4f00b2776763ea2bf5fdfa61\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":11,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"542c22145c40935f13eabbc5ce0d2461f61e74ce913a276038f36ee9d761c9e3\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-22T08:08:32.926872805Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.053235073Z\",\"Version\":{\"Index\":3323767}},{\"CreatedAt\":\"2018-07-23T09:21:43.700102602Z\",\"DesiredState\":\"shutdown\",\"ID\":\"z57ko65q3bv2sapf9i96u199b\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.91/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-23T09:21:41.925698392Z\",\"Version\":{\"Index\":2432054}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":1,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:627224b64b938183f5c472b22ff5682f5632e4df@sha256:d8df66c9c2e040989c5385ebff9f1ce145784ecbbf2c035d3a684f3bb5ade2ad\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":20,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"e9643b5484f3ddbc735042c3ce53ff9dccd18a4b6a9b78193d67b74d221963fc\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-23T10:03:06.577792004Z\"},\"UpdatedAt\":\"2018-07-27T08:08:20.9338075Z\",\"Version\":{\"Index\":3323761}},{\"CreatedAt\":\"2018-07-23T09:21:43.702103839Z\",\"DesiredState\":\"shutdown\",\"ID\":\"zeqtn5meiqgulygmxfnmnr768\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.75/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-23T09:21:41.925698392Z\",\"Version\":{\"Index\":2432054}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:627224b64b938183f5c472b22ff5682f5632e4df@sha256:d8df66c9c2e040989c5385ebff9f1ce145784ecbbf2c035d3a684f3bb5ade2ad\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":20,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"5628aade16d642612dd576ae158fd9ec1909d40072105e5dd2ff48c0079469a3\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-27T08:08:18.415467299Z\"},\"UpdatedAt\":\"2018-07-27T08:08:20.913410124Z\",\"Version\":{\"Index\":3323760}},{\"CreatedAt\":\"2018-07-22T08:38:53.87292524Z\",\"DesiredState\":\"shutdown\",\"ID\":\"zj2g23allkdu5z2franfnjtfn\",\"Labels\":{},\"NetworksAttachments\":[{\"Addresses\":[\"10.255.0.204/16\"],\"Network\":{\"CreatedAt\":\"2018-05-24T02:34:07.580015233Z\",\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.driver.overlay.vxlanid_list\":\"4096\"}},\"ID\":\"bzf8ifktex1rn8h45gh9evhin\",\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{\"Name\":\"default\"}},\"Spec\":{\"DriverConfiguration\":{},\"IPAMOptions\":{\"Configs\":[{\"Gateway\":\"10.255.0.1\",\"Subnet\":\"10.255.0.0/16\"}],\"Driver\":{}},\"Ingress\":true,\"Labels\":{},\"Name\":\"ingress\",\"Scope\":\"swarm\"},\"UpdatedAt\":\"2018-07-22T08:08:32.187746239Z\",\"Version\":{\"Index\":2387653}}}],\"NodeID\":\"tyiz2zizgzjfosawq0vgyzm4m\",\"ServiceID\":\"0k6gt9j9ocfflk386cb97w716\",\"Slot\":2,\"Spec\":{\"ContainerSpec\":{\"Env\":[\"NODE_ENV=testing\",\"JAVA_HOME=/usr/local/java/jdk1.8.0_60/\",\"JAVA_HOME_8=/usr/local/java/jdk1.8.0_60/\",\"DEPLOY_DIR=/app/\",\"WORKING_DIR=/app/\",\"CONF_DIR=/app/conf\",\"DATA_DIR=/app/data\",\"LOGS_DIR=/data0/logs/java/activity.website.esf.fdd\",\"STD_LOG=/app/std.out\",\"FDD_ENV=test\"],\"Image\":\"docker.esf.fangdd.net/activity.website.esf.fdd:627224b64b938183f5c472b22ff5682f5632e4df\",\"Isolation\":\"default\",\"Mounts\":[{\"Source\":\"logs\",\"Target\":\"/data0/logs\",\"Type\":\"volume\"}]},\"ForceUpdate\":19,\"Placement\":{},\"Resources\":{\"Limits\":{},\"Reservations\":{}},\"RestartPolicy\":{\"Condition\":\"any\",\"Delay\":5000000000,\"MaxAttempts\":0,\"Window\":0}},\"Status\":{\"ContainerStatus\":{\"ContainerID\":\"f3dc16aba96d9e1924c924bf68a1c0e7d9b98f8a29cbebf86797871b5ec80aad\",\"ExitCode\":0,\"PID\":0},\"Message\":\"shutdown\",\"PortStatus\":{},\"State\":\"shutdown\",\"Timestamp\":\"2018-07-23T09:21:42.991164578Z\"},\"UpdatedAt\":\"2018-07-27T08:08:21.056471384Z\",\"Version\":{\"Index\":3323767}}]. @deviantony . @deviantony \n. ",
    "nevercast": "It would be nice if this could be specified during container creation so that the delay and signal are respected from the UI [Stop] button. Sometimes I don't wish to do an automatic update and just wish to stop my container so I can inspect it's files without it running, however I need it to exit gracefully so that files are flushed.. Oh hey its me there from the past.\n@jamesmr89 Did you ever get anywhere with the PR you were preparing? . ",
    "r7l": "Is there any news with this?. I've found the fix to my problem myself. The number of people having access to this site is limited due to strict policy. So i've disabled the Portainer login and this made it work!\nThanks allot for this software! It's awesome to work with.. > Be wary, we do not recommend disabling Portainer authentication.\nThat is understandable but when using Portainer with -p 127.0.0.1:9000:9000 settings behind the Nginx proxy, what kind of issues could this bring in?\nI would turn authentication back on but for that i would need to find a fix for my authentication problem with Nginx.. @deviantony Well, there is an option here called Question and i am already on slack but when i was asking a question there i was completely ignored. I only see one barely used channel there but i won't come to ask a question again.. ",
    "ningappa": "Any update on this?. ",
    "unsafecode": "+1 Must-have if you are using third-party services like Azure Container Registry. ",
    "kesonno": "Hello,\nI know this should be a closed issue, but I'm having problems trying to deploy stacks to a Swarm with private images hosted on DockerHub.\nPortainer v. 1.16.2, using the current portainer/portainer:develop image.\nDockerHub credentials correctly saved in the Registries page.\nIf I try to deploy with the command line, logged in a manager node, using --with-registry-auth flag, works correctly.\nI'm missing something?\nThanks in advance\nGennaro. Hi @deviantony \nit's a bit embarrassing... but you're right :) I was using different credentials in Portainer and cli.\nWork perfectly, thanks!\nGennaro. ",
    "nlippke": "For me this feature still doesn't work (using 1.16.5). I'm running a private registry (no DockerHub). I've added this registry with credentials to portainer. I've created a user, added this user to the list of authorized users for that registry. \nBut deploying a stack with a container from this registry failes.\nCommand line with --with-registry-auth works.. @deviantony Not sure why it is working now, but I removed the registry added it anew and now it seems to work (maybe wrong credentials). Sorry for bothering. . ",
    "pleblond": "Addresses #1322. Sure. #1332 . ",
    "utzb": "@ncresswell Sorry, I don't do twitter a lot. Please check out\nhttps://3.bp.blogspot.com/-Ti7qYTKYxlc/We-jaNY-5NI/AAAAAAAAAIc/aBRZO3NGOWE0UxGF-WjGOhBri4JvNFI5QCLcBGAs/s640/portainer-gist-1.png\nhttps://4.bp.blogspot.com/-yf_Bg7Y7DQc/We-jeITcdrI/AAAAAAAAAIg/Sluje1iTABQgxwDYVWTMinKQpKSfgQ3JACLcBGAs/s640/portainer-gist-2.png\nhttps://2.bp.blogspot.com/-vILWoItxdHs/We5sr0Qx_wI/AAAAAAAAAII/FZ72GSKxH8QVCsceeB-uS2KgttuOoacNQCLcBGAs/s640/portainer-images.png\nhttps://1.bp.blogspot.com/-8lwrU5TB4pc/We5sw1nDEJI/AAAAAAAAAIM/jH5cNrwf434rzZbqD_rLAGLZe2dvuG4egCLcBGAs/s640/portainer-containers.png\n(feel free to use in your twitter feed). @ncresswell sure: https://1.bp.blogspot.com/-P89I6qzWcn8/We-xq35a43I/AAAAAAAAAIw/twLRw3VQG9c_wg40XXpaAZml9KB90ogGQCLcBGAs/s640/portainer-gist-3.png. Thanks!\nWow, I wasn't aware of #938, but I like it!. s390 is 31-bit (sic! they used the 32nd bit to distinguish between 24 and 31 bit addressing) and not supported.\ns390x is the only relevant environment on IBM Z.\nLooking at the table, if os.arch returns ppc64, it should probably be mapped to ppc64le right at the beginning like x64->amd64, because I suspect that is what is right in buildBinary (not just in the downloadDockerBinary). @1138-4EB ppc is usually 32bit and I doubt anyone is using it (most if not all Linux distros have been 64 bit only for a long time, and docker is the next missing piece for 32 bit -- so not supported is IMHO the right classification), so I think only ppc64 should be mapped to ppc64le.. ",
    "drubinstein-enigma": "I apologize this was an accident.. ",
    "woudsma": "Cool! I don't use Twitter much, but you can find me @__mojibake. ",
    "remipichon": "@deviantony \nStack created via API ('string' method) appears \"external\". Is there a lot to do to have the details (services, tasks, docker compose....) for stacks created via the API? \nWould it make more sense to emulate the POST request done by the UI, would it work to use the same multipart form as Angular?\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/services/fileUpload.js#L33\nI have an external system that generates compose files, my goal is to leverage the Portainer's stack view, hence my need to have stacks created via the API to not be considered external. \n\nCheers and awesome work on the product. This curl\ncurl -X POST -d \"{\\\"SwarmID\\\":\\\"$SWARMID\\\", \\\"Name\\\":\\\"myStack4\\\",\\\"StackFileContent\\\":\\\"version: '3'\\nservices:\\n web:\\n   image: nginx\\n\\\"}]}\"  --header \"Authorization: Bearer $BEARER\" --header \"accept: application/json\" -H \"Content-Type: application/json;charset=UTF-8\" http://$HOST:9000/api/endpoints/1/stacks?method=string\nis the mimic of the post request made from the UI by copy pasting the compose file in the web editor. Apart from the cookie, I don't see any differences. Maybe is it something in the cookie? What kind of info the API needs to create an internal stack? \n\n\n. Well, \n portainer deployed from the Docker image ==> stack is created and appears as \"external\" \n portainer deployed from built code from master or develop ==> API answers an empty JSON map (instead of the stack ID just created), stack doesn't appear on the UI whereas stack can be found under data/compose/$stackName_$swarmId\nDid I miss something obvious? \nTried as well to update Docker, remove completely container, volume, /dist directory\n\nIf Details for external stacks is something that will happen, I can wait for it and don't bother with the API. \n",
    "trajano": "Can the stack be \"internalized\" after the fact?. After doing a docker stack deploy from the command line, can we convert it to an \"internal\" stack afterwards without removing and adding again.  Particularly if one of the stacks contains portainer itself. Virtual Box running CentOS provisioned by Vagrant on a Windows 10 Pro machine.. This is with the volume details.  The volume list appears correctly.  CentOS running on VirtualBox running on Windows 10 Pro. The error itself does not make sense based on what I glanced over https://github.com/portainer/portainer/blob/master/api/http/proxy/volumes.go#L59 and the result of docker volume inspect \"trajano/nexus\"\nWhich is \n```\n[\n    {\n        \"CreatedAt\": \"0001-01-01T00:00:00Z\",\n        \"Driver\": \"gluster:latest\",\n        \"Labels\": {\n            \"com.docker.stack.namespace\": \"ci\"\n        },\n        \"Mountpoint\": \"/var/lib/docker/plugins/dfc0c9776c706adee427abfe0ab1ff486161eb8ea0bc817c515002862f77c322/rootfs\",\n        \"Name\": \"trajano/nexus\",\n        \"Options\": {},\n        \"Scope\": \"global\",\n        \"Status\": {\n            \"args\": [\n                \"-s\",\n                \"store1\",\n                \"-s\",\n                \"store2\",\n                \"--volfile-id=trajano\",\n                \"--subdir-mount=/nexus\"\n            ],\n            \"mounted\": true\n        }\n    }\n]\n```\nThe code looks like it is supposed to get Name based on volumeIdentifier = \"Name\" which the output of inspect has.. @deviantony any update on this one?. I\u2019ll have to test, right now I don\u2019t use portainer.\nSent from Mail for Windows 10\nFrom: Anthony Lapenna\nSent: Tuesday, March 12, 2019 5:33 PM\nTo: portainer/portainer\nCc: Archimedes Trajano; Mention\nSubject: Re: [portainer/portainer] Viewing a managed volume plugin volumeresults in \"Docker volume identifier not found\" (#1799)\n@trajano are you able to reproduce this problem using the latest version of Portainer?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. To keep it simple I just do git clone https://trajano.visualstudio.com/DefaultCollection/_git/trajano note I do not specify any credentials\nHere is the output which asks for the credentials at that time\n[trajano@docker-engine ~]$ git clone https://trajano.visualstudio.com/DefaultCollection/_git/trajano\nCloning into 'trajano'...\nUsername for 'https://trajano.visualstudio.com': trajano@live.com\nPassword for 'https://trajano@live.com@trajano.visualstudio.com':\nremote:\nremote:                    vSTs\nremote:                  vSTSVSTSv\nremote:                vSTSVSTSVST\nremote: VSTS         vSTSVSTSVSTSV\nremote: VSTSVS     vSTSVSTSV STSVS\nremote: VSTSVSTSvsTSVSTSVS   TSVST\nremote: VS  tSVSTSVSTSv      STSVS\nremote: VS   tSVSTSVST       SVSTS\nremote: VS tSVSTSVSTSVSts    VSTSV\nremote: VSTSVST    SVSTSVSTs VSTSV\nremote: VSTSv        STSVSTSVSTSVS\nremote:                VSTSVSTSVST\nremote:                  VSTSVSTs\nremote:                    VSTs    (TM)\nremote:\nremote:  Microsoft (R) Visual Studio (R) Team Services\nremote:\nremote: We noticed you're using an older version of Git. For the best experience                                                                                                                                                             , upgrade to a newer version.\nremote: Found 726 objects to send. (15 ms)\nReceiving objects: 100% (726/726), 3.34 MiB | 6.47 MiB/s, done.\nResolving deltas: 100% (336/336), done.\n[trajano@docker-engine ~]$\nThere is also nothing explictly set outside \n[trajano@docker-engine ~]$ git config --global -l\nfatal: unable to read config file '/home/trajano/.gitconfig': No such file or directory\n[trajano@docker-engine ~]$ git config --system -l\nfatal: unable to read config file '/etc/gitconfig': No such file or directory\n[trajano@docker-engine ~]$ cd trajano -l\n[trajano@docker-engine trajano]$ git config --local -l\ncore.repositoryformatversion=0\ncore.filemode=true\ncore.bare=false\ncore.logallrefupdates=true\nremote.origin.url=https://trajano.visualstudio.com/DefaultCollection/_git/trajano\nremote.origin.fetch=+refs/heads/*:refs/remotes/origin/*\nbranch.master.remote=origin\nbranch.master.merge=refs/heads/master. @rbasore I did too:\n\nStep 3: Choose Create new Git Credentials and fill in your info and password. \n",
    "Littlejd1997": "+1\nI dont care if I cant view the docker compose file. Actually, for my use case that would be ideal. But deleting the stack, and viewing its services would be very useful. ",
    "nbaum": "@trajano\nI've found that one can deploy a stack with the same name and config as an external stack, and this \"overrides\" the external one, without appearing to try to redeploy anything. This seems to be a way to promote an external stack to an internal one, as long as you have the compose file.\nWe use this feature to make stacks manageable in Portainer after bootstrapping a swarm from the command line.\n@deviantony\nI'm hoping this isn't regarded as a bug. It would be an inconvenience if we couldn't do this any more!. That fixes the issue for me. :+1: . ",
    "axwell": "Is there a way to view the stack file configuration so i can recreate it ?\nThanks !. ",
    "joseluisq": "How about this case:\n\n\nA stack with some services:\nmy-stack\n-- 1.1 my-proxy-service\n-- 1.2 my-portainer-service\n\n\nA sandalone container with portainer:\n-- my-sandalone-portainer\n\n\nIt uses my-sandalone-portainer to deploy my-stack.\nBut my-stack/my-portainer-service has limited control over my-stack.\nHow deal with this situation?. More info Libcompose Unmaintained. ",
    "a1exus": "@ncresswell per your suggestion I've tried in incognito mode with exactly same results.. @deviantony compose. @deviantony I did exactly that, same results.. 2017/11/05 01:56:01 Starting Portainer 1.15.0 on :9000\n2017/11/05 01:57:03 http error: Invalid credentials (code=400)\n2017/11/05 01:56:26 http error: User not found (code=404). I can't now, I'll join later). Yes, but I followed instructions from documentation and it was working before I did last pull to refresh imagine. pulled develop tag:\nPulling portainer (portainer/portainer:develop)...\ndevelop: Pulling from portainer/portainer\nd1e017099d17: Pull complete\n28690c5c2cdb: Pull complete\nDigest: sha256:b8e420411862595bb35c41a2ee051229b3f7a666513978dadfca6fb17b234530\nStatus: Downloaded newer image for portainer/portainer:develop\nsame results(. I tried without reverse proxy, and everything works fine. I use following to configure reverse proxy:\nHow can I configure my reverse proxy to serve Portainer. @deviantony works for me). ",
    "jr-araujo": "@a1exus I think that you can start a portainer docker container using the command below:\npowershell\ndocker run --name portainer --env ADMIN_USERNAME=admin --env ADMIN_PASS=<USER_PASSWORD_GOES_HERE> -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\nAfter that, when you try to open portainer at http://localhost:9000 it will ask you again to inform a login and password for a \"NEW\" user (but it insn't a new user, ok?). Just, put as a login: admin and as password just put the same password that you put on the command line. Done! It will work !. @deviantony I forcely disagree with you, because I ran that command above on my machine and docker and the Portainer is running so good.. ",
    "presto9292": "Thanks for looking into it. I tend to agree. The published port is shown on the container at the host endpoint & that's probably good enough. ",
    "matjazmav": "@deviantony Yeh I'm, after configuring websockert in nginx it works. ",
    "nemd": "thx.. ",
    "RehanSaeed": "I think the second option would be better for Go or other apps that use the scratch base image.. Yes, thats exactly what I'm suggesting, maybe the Container page too. I'm no UI expert but I think some added metadata at the top level and maybe a few links could be useful.. You can provide a two/three labels which can translate to links. A link to the project behind the image, a link to the source code and a link to the license for the image.. ",
    "CassandraWin": "+1. ",
    "ssbkang": "I was able to reproduce this issue with the latest Portainer release, #2429 to be reviewed.. Guys, we have a potential fix for this issue - would you be able to test this image for us?\nportainerci/agent:feat49-update-library. Guys, we have a potential fix for this issue - would you be able to test this image for us?\nportainerci/agent:feat49-update-library. @timog oh wow, thanks for sharing that! Would you mind keeping your environment running for few more days to ensure it has been stabilised? . @mmgil are you running Docker for Windows or Docker on a Windows Server? \nI just tested running docker run -d --name portainer_agent --restart always --network portainer_agent_network -e AGENT_CLUSTER_ADDR=tasks.agent --mount type=npipe,source=\\\\.\\pipe\\docker_engine,target=\\\\.\\pipe\\docker_engine portainer/agent:windows1803-amd64 on a Windows Server 2016 version 1803 with Docker Engine version 18.03.1-ee-4 and npipe works fine.\nC:\\Users\\Administrator>docker run -d --name portainer_agent --restart always --network portainer_agent_network -e AGENT_CLUSTER_ADDR=tasks.agent --mount type=npipe,source=\\\\.\\pipe\\docker_engine,target=\\\\.\\pipe\\docker_engine portainer/agent:windows1803-amd64\n021eba2a3aae37d4e8f3654b2d97315e5e11874f331c9834eb9a1df8b6a94fc3\nC:\\Users\\Administrator>docker logs -f portainer_agent\n2018/10/29 21:15:42 [INFO] serf: EventMemberJoin: 021eba2a3aae 10.0.0.3\n2018/10/29 21:15:54 [WARN] memberlist: Failed to resolve tasks.agent: lookup tasks.agent: no such host\n2018/10/29 21:15:54 [INFO] - Starting Portainer agent version 1.1.2 on 0.0.0.0:9001 (cluster mode: true)\nI can however reproduce your issue on Docker for Windows - will see if I can find a fix or workaround for it.. @wyang18 what kind of workload are you running, do they have to interact with internet? . Without Docker Swarm, it is not possible to use a secret, so doing a docker inspect will always output plain username/password. One way is to use Docker's experimental feature to inject a secret as part of the actual Docker build using buildkit - have a look at the following Github repos:\n\nhttps://github.com/moby/buildkit\nhttps://github.com/moby/buildkit/blob/master/frontend/dockerfile/docs/experimental.md#run---mounttypesecret . @olljanat Thanks, will do a squash next time \ud83d\udc4d . Certs you use is CA signed? If not a trusted one, you need to add insecure-registry flag in your Docker Daemon file.\n. @deviantony I just pushed new manifests with the missing annotations, and also updated our release pipeline.\n\ndocker manifest inspect portainer/portainer:latest\n{\n   \"schemaVersion\": 2,\n   \"mediaType\": \"application/vnd.docker.distribution.manifest.list.v2+json\",\n   \"manifests\": [\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 739,\n         \"digest\": \"sha256:d0aac20ac34dafb354538dfe5ecbb61c9150af0d82517156330b921ebde4fce0\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 739,\n         \"digest\": \"sha256:98eac950b26754a304a04ccc2f88990f5ae9bd16f13e2ee038d264ce47dfb6ae\",\n         \"platform\": {\n            \"architecture\": \"arm\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 739,\n         \"digest\": \"sha256:65b910ab43ebe8581544a252496708bfb36ef2a25dca0219892ab7a08ee5d95f\",\n         \"platform\": {\n            \"architecture\": \"arm64\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 738,\n         \"digest\": \"sha256:e09399a9713497bf37c68f1585d69c559ddd24965e2e0574529ea1ce39adbbb3\",\n         \"platform\": {\n            \"architecture\": \"ppc64le\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 738,\n         \"digest\": \"sha256:5ad046da6ed85ee44c18ee450da287661f837ebae509f20c008f9116d924a3b9\",\n         \"platform\": {\n            \"architecture\": \"s390x\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 1984,\n         \"digest\": \"sha256:adc6222c9f74f2cbbff6d678c6e6b3e9f8684793697cb21c42fef964450b7a76\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"windows\",\n            \"os.version\": \"10.0.14393.2485\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 2105,\n         \"digest\": \"sha256:466c0bdd35fd97052df2e172971184443233a8222ecd87223e933a79e932aee5\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"windows\",\n            \"os.version\": \"10.0.16299.904\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 2105,\n         \"digest\": \"sha256:5d3e856cdb6eb41b0d19a4120c8abe6ba903325e563c7be8e18700adae839a58\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"windows\",\n            \"os.version\": \"10.0.17134.523\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 2106,\n         \"digest\": \"sha256:a653f25cc5c889295da14cb47881a8518c9bfb648c7e54f72499f4de3ed4cc43\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"windows\",\n            \"os.version\": \"10.0.17763.253\"\n         }\n      }\n   ]\n}\ndocker manifest inspect portainer/portainer:1.20.1\n{\n   \"schemaVersion\": 2,\n   \"mediaType\": \"application/vnd.docker.distribution.manifest.list.v2+json\",\n   \"manifests\": [\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 739,\n         \"digest\": \"sha256:d0aac20ac34dafb354538dfe5ecbb61c9150af0d82517156330b921ebde4fce0\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 739,\n         \"digest\": \"sha256:98eac950b26754a304a04ccc2f88990f5ae9bd16f13e2ee038d264ce47dfb6ae\",\n         \"platform\": {\n            \"architecture\": \"arm\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 739,\n         \"digest\": \"sha256:65b910ab43ebe8581544a252496708bfb36ef2a25dca0219892ab7a08ee5d95f\",\n         \"platform\": {\n            \"architecture\": \"arm64\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 738,\n         \"digest\": \"sha256:e09399a9713497bf37c68f1585d69c559ddd24965e2e0574529ea1ce39adbbb3\",\n         \"platform\": {\n            \"architecture\": \"ppc64le\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 738,\n         \"digest\": \"sha256:5ad046da6ed85ee44c18ee450da287661f837ebae509f20c008f9116d924a3b9\",\n         \"platform\": {\n            \"architecture\": \"s390x\",\n            \"os\": \"linux\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 1984,\n         \"digest\": \"sha256:adc6222c9f74f2cbbff6d678c6e6b3e9f8684793697cb21c42fef964450b7a76\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"windows\",\n            \"os.version\": \"10.0.14393.2485\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 2105,\n         \"digest\": \"sha256:466c0bdd35fd97052df2e172971184443233a8222ecd87223e933a79e932aee5\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"windows\",\n            \"os.version\": \"10.0.16299.904\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 2105,\n         \"digest\": \"sha256:5d3e856cdb6eb41b0d19a4120c8abe6ba903325e563c7be8e18700adae839a58\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"windows\",\n            \"os.version\": \"10.0.17134.523\"\n         }\n      },\n      {\n         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n         \"size\": 2106,\n         \"digest\": \"sha256:a653f25cc5c889295da14cb47881a8518c9bfb648c7e54f72499f4de3ed4cc43\",\n         \"platform\": {\n            \"architecture\": \"amd64\",\n            \"os\": \"windows\",\n            \"os.version\": \"10.0.17763.253\"\n         }\n      }\n   ]\n}\nThanks so much for picking this up @StefanScherer, legend! \ud83d\udc4d . @dbellingroth it seems like the agent containers aren't able to resolve other agent containers' IP addresses and uses the Docker host's DNS to try resolve tasks.agent - would you please double check the firewall requirement for the overlay network?. @altano Take a look at https://docs.docker.com/engine/security/apparmor/ - unlike SELinux, AppArmor profile needs to be defined during the docker run. --security-opt can be defined in your Stack file as per the document  - please try and let me know how it goes.. Hey @STaRDoGG try the following, which works for me:\nC:\\Users\\skan0>docker run --name portainer --restart unless-stopped -p 9090:9000 -e TZ=America/Chicago -v /var/run/docker.sock:/var/run/docker.sock -v \"C:/Users/skan0/Desktop/Portainer:/data\" portainer/portainer\n2019/02/14 22:06:40 Starting Portainer 1.20.0 on :9000. @javierma14 is there a reason for putting public IP for the --advertise-addr parameter? Wondering how the worker nodes talk to the manager. @deviantony Yeah, I can reproduce this\ndocker run -d --restart always --name portainer --isolation process -h portainer -p 9000:9000 -v C:\\ProgramData\\Portainer:C:\\Data -v //./pipe/docker_engine://./pipe/docker_engine portainer/portainer:1.20.2\n834f7cc4ebf3e6fd7a564eb77ebb2f85794c99e65d60b886f3eab2e79e4267bf\nC:\\Program Files\\Docker\\Docker\\Resources\\bin\\docker.exe: Error response from daemon: container 834f7cc4ebf3e6fd7a564eb77ebb2f85794c99e65d60b886f3eab2e79e4267bf encountered an error during Start: failure in a Windows system call: The virtual machine or container exited unexpectedly. (0xc0370106).. @ajkauffmann @NAVspecialist @linquize would you please give another go with the latest image?\nPS C:\\Users\\skan0> docker image pull portainer/portainer:latest\nlatest: Pulling from portainer/portainer\nDigest: sha256:a75450f44e2f5bcece74a273afcd0627029e423f6ea1ba20b3af62a5556bbb06\nStatus: Downloaded newer image for portainer/portainer:latest\nPS C:\\Users\\skan0>\nPS C:\\Users\\skan0> docker run -d -p 9000:9000 --name portainer --restart always -v C:\\ProgramData\\Portainer:C:\\Data -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine portainer/portainer:latest\n20d93158f13f4a0c1a64f8a77238872aa22e270395d5a49495dc860b418dfc8d\nPS C:\\Users\\skan0> docker logs -f 20d\n2019/03/08 14:59:06 Starting Portainer 1.20.2 on :9000. Please try without --isolation process for now, there seems to be an issue with this.. @ajkauffmann Thanks for testing. We've noticed that there is an issue with our current build - please use 1.20.1 for now, and we will get back to you soon as the build is fixed.. @ajkauffmann The latest image will be good now, please try again.. Awesome, thanks a lot for raising & testing this issue - closing!. As discussed, it is to control the Portainer version information for container images from a single point. Yep, I will make the change. ",
    "wuzhongok": "i run portainer with docker image portainer/portainer:pr1512 , cpu stats was much different with what i got when i ran cmd 'docker stats xxxxx',how to fix it? . ",
    "rafaelmluz": "I run portainer with docker image portainer/portainer:1.16.2 and  shown incorrectly stats.. Hi @deviantony When I see the \"statistics\" of Container. The graphics are send presented on a wrong scale, I believe. Very different from Docker stats for example.\n\n\n\n. @ncresswell @deviantony Yeah, but it's wrong on the graphic. It may be necessary to correct the scale.. ",
    "mr-bolle": "With the cpu stats i don't see any issues. Only with the memory usage it is incorrect chart / values.\nI use the current image v1.19.2 \n\n. ",
    "itsconquest": "We have been unable to reproduce this bug inside our environment using Portainer v1.20.2. The resource usage reported in the Portainer GUI looks to match the usage reported by the Docker cli.\nIf you are able to reproduce this issue on the latest version of Portainer, feel free to comment again and we can reopen this issue.. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. Hi there, thanks for taking the time to test this bug against the latest version of Portainer. I will reopen this issue and try and recreate it :). This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.\n. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. We have been unable to reproduce this bug inside our environment using Portainer v1.20.2. The resource usage reported in the Portainer GUI looks to match the usage reported by the Docker cli.\nIf you are able to reproduce this issue on the latest version of Portainer, feel free to comment again and we can reopen this issue.. Hi Marcelo, \nThanks for taking the time to reproduce this bug on the latest version of Portainer.\nI have reopened this issue and will have another go at reproducing his bug.. Glad we could work this out :) . Hi there,\nWe have been able to reproduce this bug based on Premik's advice and instructions. Hopefully this will help us get to the bottom of this bug! Our reproduction steps are below.\nReproducing using a Stack file\nStep 1: Spin up 2 Vagrant VMs to form a Docker cluster\nStep 2: Connect to the manager node via ssh:\nvagrant ssh swarmnode1\nStep 3: Using our portainer-agent-stack file add the Agent and Portainer UI to the swarm\ncurl -L https://downloads.portainer.io/portainer-agent-stack.yml \\\n    -o portainer-agent-stack.yml \ndocker stack deploy --compose-file=portainer-agent-stack.yml portainer\nStep 4: Enter below commands suggested by Premik (we used /bin/sh instead of /usr/bin/sh)\nsudo su\nexport p=$(docker  inspect --format '{{.State.Pid}}' $(docker ps | grep agent | cut -c-12))\nyes 'ls /proc/$p/fd | wc -l; sleep 2' | /bin/sh\nEvery 2 seconds the number of pages loaded in the Agent will be displayed.\nStep 5: Open the Portainer UI in the browser, create an account and navigate to the dashboard. Triggering the behaviour: Reloading the browser on the dashboard as well as switching between the dashboard and stacks should increase number of pages loaded by between 1&7 and will occasionally decrease by 1 before going up again.\n\nReproducing as Separate Services\nWhen deploying the Agent and the Portainer UI separately as services, this behaviour is repeatable.\n\nDeployment commands:\n\nWhat doesn't work\n1. When the Agent and Portainer UI are deployed on a singular manager node using the stack file deployment used earlier this behaviour was not repeatable. (User Premik who suggested this method had the same behaviour on a single node.)\n2. When the Agent is deployed from a stack file saved on the vagrant vm using the CLI and the Portainer UI is deployed using the docker run command below, and Portainer is connected to the Agent endpoint, this behaviour is NOT repeatable.\nDeployment commands used:\n\n\n. We have done some further investigation into this issue.\nThe ever increasing fd behaviour is reproducible when executing GET requests to the following endpoints of the API, only after loading the Portainer dashboard for the first time. If you don\u2019t physically load the dashboard in the browser first, get requests to the following endpoints won\u2019t trigger the behaviour.\n:9000/api/endpoints/1/docker/services\n:9000/api/endpoints/1/docker/nodes\n:9000/api/endpoints/1/docker/tasks\n:9000/api/endpoints/1/docker/secrets\n:9000/api/endpoints/1/docker/configs\n:9000/api/endpoints/1/docker/info\n:9000/api/endpoints/1/docker/swarm\nStep 1: Follow the instructions in my previous comment for reproducing using a stack file. This will output the number of fd every 2s in your CLI\nStep 2: Navigate to endpoint-ip:9000, create your user and navigate to the dashboard\nStep 3: Refresh the browser\nStep 4: Use the CLI or a tool like postman to complete get requests against one or more of the above endpoints\nYou should see the number of fd increase\nStopping the behaviour:\u2028\n- Step 1: Load the dashboard in the browser and refresh a few times to trigger the behaviour\nStep 2: Go to another view e.g services and refresh the page a few times and don\u2019t go back to dashboard. \nStep 3: Execute one or more get requests against the above endpoints\nYou should now see this doesn\u2019t increase the total fd. However loading the dashboard again and refreshing a few times will trigger it again\nOther things we tried/discovered\u2028\n\n\nIf we took all the requests that the dashboard makes and executed them together in postman in the same order, this behaviour can be reproduced, only after first loading the dashboard. If you execute these requests, without first loading the dashboard, this behaviour will not be reproduced.\u2028\n\n\nSwarm visualiser triggers this behaviour every 5s. \n\u2028Step 1: Log into Portainer in the browser and load the dashboard and make sure that the behaviour is triggered (if this hasn\u2019t triggered the behaviour refresh it a few times and it should).\u2028\nStep 2: Enter the swarm visualiser, and now you will notice fd is incremented every 5 seconds\n\n\nIf swarm visualiser is left triggering this behaviour every 5s, then memory used by the agent slowly increases over time.\n\n\nFollowing on from the above steps, enter the below command to output physical memory usage of the agent process every 2 seconds: \nwhile [ 1 ] ; do\n  grep VmRSS  /proc/$p/status ; sleep 2\ndone\n\n\n\nThis behaviour can also be observed via the top command, the below value highlighted in red should keep increasing:\n\n. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. This issue has been marked as stale as it has not had recent activity, it will be closed if no further activity occurs in the next 7 days. If you are able to reproduce this issue on the latest version of Portainer, feel free to leave a comment and we can pick up this issue again.. Hi there,\nAre you able to provide the logs of the Portainer agents running on your endpoints?. Hi there @alphaDev23, did you manage to find any potentially related issues on the go-git repo?\nIf not, feel free to open a new issue report if you are still observing this behaviour and we can test it.. Hi there,\nI was unable to reproduce this bug on a standard deployment of Portainer using our v1.20.2 image.\nI noticed you are using --host=unix:///var/run/docker.sock in conjunction with TLS options which does not make any sense in this situation because these TLS flags are only used with remote hosts. Can you remove these TLS flags from your command and try to recreate this behaviour?. I will close this issue for now. If you are able to reproduce on the latest version of Portainer feel free to comment and I can reopen this issue for you. . This seems to be a duplicate of #454 so I am closing this issue for now.\nFeel free to continue conversation over there.. This looks to be a duplicate of issue #394 so I will close this. \nFeel free to continue conversation over there.. As mentioned above, there is no shell package inside the Portainer image for security reasons. So you will not be able to execute a shell inside it.\n\n\nYou can refer to the comment made by @linquize in order to access the filesystem information of the container.. This request seems related to #454 and will be addressed as part of this feature request.. Hi there,\nWhat you are describing has already been mentioned in issue #81 so I will close this issue.\nIts worth noting that the \"--link\" option is being depreciated by Docker and will be eventually removed.. Hi there,\nAs I mentioned earlier #81 is a feature request for the ability to see the command used to create the container 'in the background'. Portainer doesn't have this functionality currently. \nAs for how containers communicate in Portainer, we use container networking and not the depreciated --link flag. Container networking is described in more detail here: https://docs.docker.com/v17.09/engine/userguide/networking/#default-networks. Hi There,\nI need more info on this,\nwhat command did you use to deploy Portainer?. ",
    "vincg": "Doh! No. On my desktop it was, but I forgot to set it on the host I was testing with. Thank you!!. ",
    "mcoms": "In the end, I used consul-template with the following template to generate endpoints.json from a docker-engine consul service:\nhcl\n{{- $services := service \"docker-engine|any\" -}}\n{{- $total_services := len $services | subtract 1 -}}\n[\n{{ range $i, $e := $services }}\n  {\n    \"Name\": \"{{ $e.Node }}\",\n    \"URL\": \"tcp://{{ $e.Address }}:{{ $e.Port }}\",\n    \"TLS\": true,\n    \"TLSSkipVerify\": false,\n    \"TLSCACert\": \"/certs/ca.pem\",\n    \"TLSCert\": \"/certs/cert.pem\",\n    \"TLSKey\": \"/certs/key.pem\"\n  }{{ if lt $i $total_services }},{{ end }}\n{{ end }}\n]\nI have a docker client certificate in /certs. This file gets rendered to /endpoints/endpoints.json and passed to Portainer with --external-endpoints=/endpoints/endpoints.json.\nI'm afraid my JS-foo isn't strong enough to actually implement it as a Portainer feature, but maybe someone can :). ",
    "Zappelphilipp": "okay, so this was just a misunderstanding on my side. I am going to try that tomorrow. Thank you very much!\nEDIT: got it, thank you a lot! dumb me. ",
    "yak1r": "No errors in console or UI, just not seeing these containers.\nis there any difference between the initial endpoint and the rest of the endpoints?\nMaybe the use of -H affected the communication between portainer and the nodes?. I totally missed that! Thanks for all the help @deviantony !\nI really liked your project and would like to contribute wherever I can\nMaybe I'll add an option to see containers from all endpoints. ",
    "upsala": "It would be nice, if the entries would be sorted by name.\nPlease use an other style for the current selected endpoint. Light blue on dark blue is not very readable.. I've found an similar problem. If I duplicate an container and doesn't delete the MAC-Adress it is duplicated. A warning would be nice at this point (maybe also for the IP-Addresses and the Hostname). That's a 'bug' from you shell, try the following:\nhttp --verify no https://localhost:9000/api/auth Username=\"admin\" Password=\"anything\\$else\"\nor this\nhttp --verify no https://localhost:9000/api/auth Username=\"admin\" Password='anything$else'. ",
    "Gabisonfire": "I saw that issue, but just to make sure, I would not need externally created containers to be consistent, just all default to \"private\" instead of \"public\". ",
    "kkuehl": "They way I had my .yml file was working outside of portainer, but thank you. \nI now have:\n```\nversion: '3.3'\nservices:\n  domfuzz:\n    image: dockerregistry.internal:5000/docker_domfuzz:latest\n    depends_on:\n      - fuzzmanager\n    deploy:\n      replicas: 4\n      restart_policy:\n        condition: on-failure\n    configs:\n      - central_fuzzmanager.env\n    networks:\n      - overlay\nconfigs:\n  central_fuzzmanager.env\n    external: true\nnetworks:\n  overlay:\n```\nportainer.io UI properly shows my central_fuzzmanager.env config details.\nI can still properly deploy this stack with\ndocker stack deploy -c my_file.yml my_stack\nWhen I paste the above contents into the stack editor\nname the stack test stack and then click deploy stack\nI get the following:\ncentral_fuzzmanager.env no such file or directory\ndocker stack ls \ndoes not show the stack as deployed.\nthe stack shows up in portainer's UI as an entry, but doesn't look like the other unmanaged stacks.\nMy config closely resembles the my_other_config portion of the example found here:\nhttps://docs.docker.com/compose/compose-file/#configs\n. So, I tracked down the issue.\n1. First I create a the config within portainer.\n2. I deploy a second that references the config.\n3. Note that there is an error about /data/compose/stack_name/config_name missing.\n4. I manually copied the config file into /data/compose/stack_name/config name and things work fine.\n. Yes, my .yml file is similar to yours.\nTested on 1.15.5 as well. \nWhen I manually copy the config file into compose/stack_name/\nthings work fine.. Here is my current test yml\n```\nversion: \"3.3\"\nThis is a domfuzz test container used to test the new central_fuzzmanager configs\nmechanism. The env_file method does not work in swarm mode.\nservices:\n  domfuzz_firefox:\n    build: ./domfuzz_firefox\n    image: dockerregistry.internal:5000/domfuzz_firefox:latest\n    container_name: domfuzz_firefox\n    cap_add:\n      - ALL\n    ulimits:\n      core: -1\n    deploy:\n      replicas: 4\n      restart_policy:\n        condition: on-failure\n    env_file:\n     - ./central_fuzzmanager.env\n    configs:\n      - central_fuzzmanager.env\n    networks:\n      - overlay\nconfigs:\n  central_fuzzmanager.env:\n    external: true\nnetworks:\n  overlay:\n```. docker stacks are supposed to ignore the env_file: from the docker compose yml file.\nWith that being said, you are correct that if I remove that section, things work properly.\nI guess ultimately, I would like to request that env_file: is ignored in swarm mode.\nSee https://docs.docker.com/docker-cloud/apps/stack-yaml-reference/ and the section Unsupported docker compose keys. This of course is accomplished by docker node rm \nIf I do this manually, it is removed from portainer which I guess is an okay workaround.. ",
    "hernandev": "Working for me as of right now:\n```yml\ntop level config entries:\nconfigs:\n  some-config:\n    external: true\nservices definitions\nservices:\n  app: \n    configs:\n      - source: some-config\n        target: /path/to/mount/inside/container\n```. ",
    "StancuFlorin": "That can also be a solutions but I consider it more like a \"hack\".. That can also be a solutions but I consider it more like a \"hack\".. ",
    "Yivan": "Thanks for yours answers, i just opened an improvement to docker to add possibility to get the FROM metadata information from the API:\nhttps://github.com/moby/moby/issues/35562. ",
    "xcbeyond": "@Redsandro @1138-4EB @deviantony @jpellerin which IED do you use import this github project ?. @mmgil \nFrom what has been discussed abovecan, i think you should developed for the Windows environment\u3002\nyou tell  me, how do you deploy,build portainer locally in windows system?\nthink you.. @deviantony can you tell me someone in your team is how build ? I tried to build in a Windows environment but failed.. @deviantony Registry management features is management features for private registries from feat56-private-registry-management \u3002#2215. ",
    "gzl10g": "This is a very useful feature.... . ",
    "carloscarnero": "The only thing I see is Starting Portainer 1.15.2 on :9000. Is there a way to increase the verbosity? I could not find any option to do so.. Since quay.io allows me to create a namespace with a period, I went ahead and pushed the Docker getting started project there. The resulting image URL is quay.io/carlos.carnero/hello-world:1.0 which can be used to duplicate the issue.\nUpdate: maybe it's better to use quay.io/carlos.carnero/hello-world:2.0 for the test since that's the official Docker hello-world:latest.. I can confirm that prepending quay.io to carlos.carnero/hello-world:2.0 will pull the image; and I also consider it redundant, UI-wise.. I'm trying to understand the behavior from the UI point of view. Why shouldn't the Registry and image Name inputs be blindly concatenated (with / as separator) when pulling the image?\nSuppose I enter nginx:latest on the image name and select DockerHub on the registry. That's equivalent to docker pull nginx:latest on the CLI (in this case, that registry should be null or the empty string).\nIf I had defined other registry, say quay.io, the result would be quay.io/nginx:latest (whether that exists or not, it's besides the point). Using that registry with the name user.name/hello-world:1.0 would yield quay.io/user.name/hello-world:1.0, which is still valid. It would seem that simple concatenation works.\nHowever, according to the previous link provided by @deviantony the image name could contain the registry hostname (and maybe the port). That means that a user could potentially set quay.io/user.name/hello-world:1.0 as the name and set quay.io as the registry, so concatenating would yield quay.io/quay.io/user.name/hello-world:1.0 which is obviously wrong.\nWhy is there a separate registries definitions? To keep authentication data for each one of them?\nI was thinking that the separate registry definition is superfluous, and maybe just provide an input field for the image name, which would recreate the experience of the CLI. But then, how would authentication would be managed? As @deviantony and @1138-4EB have remarked, parsing the image name into components is complex (for an image name like user.name/hello-world, how would the parser easily know that image.name is not a domain name and should interpret it as a path component?)\nUnless I'm grossly missundertanding something (a common ocurrence, BTW) my take would be:\n\nKeep the separate registry definitions, but remove the authentication data from that form, because...\nThe authentication data is moved to the user settings of the logged in user of the web application. One record (?) per globally defined registry, if needed.\nUse simple concatenation of the selected registry domain name with the user provided image name, with / as a separator.\n\nLet me repeat that I'm thinking only from the UI/UX point of view, so the above could be completely wrong.. > Maybe we should just replace the whole form part with only one text input, where the user would be able to put the full image name (that is, registry, repo, name and tags. e.g. docker.io/library/nginx:latest for example) and then give an optional ability to the user to use credentials?\n\nThis way, we do not need to parse the the entered text anymore (which makes it simpler on our end) and give the ability to the user to specify ANY of the following formats: nginx:latest, library/nginx:latest, docker.io/nginx:latest, docker.io/library/nginx:latest.\nSo instead of storing/managing registries, we could just be storing/managing registries credentials.\n\nI think this is a great idea, and it's even simpler than what I was suggesting earlier. It is very close to the CLI, and while I perfectly understand @1138-4EB's point of view:\n\nI think that Portainer should not \"just\" recreate the experience of the CLI. It should be easier, if possible.\n\nthis whole image name parsing can get hairy real quickly.\nBesides, if a user is used to docker image pull a.long.registry.name:5000/namespace/sub/image:tag why take that away from them? :wink:. ",
    "EtimoOscarNylander": "Our HAProxy was acting up and portainer was unreachable.\nI realize now though that there might be another explanation for why we got this behaviour, let me get back to you once I've ruled it out/verified it.. Turns out it was not what I thought it was, we do indeed get a 503 which gives us \"Invalid credentials\".\nAn edge case for sure! But preferably it would show something different - simply the status code or the status code in text form would probably be quite enough. ",
    "c0fe": "@1138-4EB \n1380 appears to be more what I was looking for. I was just wanting for it to make the container's contents be available in a set directory.. @1138-4EB yup but i need to access to edit them. I am also not sure about bind mount them, maybe volume mount might be better?. @1138-4EB here is the problem that I run into:\nThe image I am working with and the subsequent container that is spun up based on the image given requires me to make certain edits.\nDocumentation is very limited or poorly written for the container\nI am not certain of the container structure and  may not know of a particular file name until i see the file contents\nthe thing that i would need to accomplish is that:\ni can extract the file onto the host or some other machine\nmake the changes on a secondary machine\nupload the reconfigured file back into the container\nreboot the container for changes to take effect. @deviantony i was referring to this: https://docs.docker.com/engine/admin/volumes/volumes/. I checked it and the rule appears on its healthpage.\nI will post screenshots tomorrow.. @1138-4EB yes the domain is set in an external DNS to point to my external IP address, if I run without use of a proxy server, it is reachable externally.. @1138-4EB @WTFKr0 i have the following networks:\nProxy\nBridge\nThe containers that are supposed to be behind Traefik are set in Proxy and Traefik has two, Proxy and Bridge.. Here is the setup:\nhttps://i.imgur.com/2ZkjSjH.png\nhttps://i.imgur.com/Fb8uwNu.png\nSo I am not sure what I am doing wrong within portainer, I am still getting 404 error.. @WTFKr0 it appears that Portainer can't place the routes properly within Traefik.. @WTFKr0 I placed all the labels yet it says 404 not found. So where can the issue be?. @WTFKr0 This is venturing into traefik so I won't update the issue any longer but can you please advise on how i properly enable the --debug flag? is that just in the docker run flag or another command?. @deviantony will this option backup the linked data volumes as well or just the container?. ",
    "UnclePhil": "I've done the same upgrade on my x86 cluster ..... and config is present !!!!\nReally strange\nA build problem ??? . I'll do that this evening , and let you know\n. sorry for the delay. another instance is working perfectly. so i assume it\ns a rendering problem of something like this\nPh Koenig\n@phone\nLe 5 d\u00e9c. 2017 22:20, \"Anthony Lapenna\" notifications@github.com a \u00e9crit :\n\n@UnclePhil https://github.com/unclephil any update on this?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1446#issuecomment-349445109,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAcxk8hQiQebIGFXhQN_hfsH6eQoorwAks5s9bOggaJpZM4Qq5Hs\n.\n. \n",
    "dani-bl": "Hi, thanks for the reply, but i'm not able to create a new config, i got the empty page and i'm not able to write in the text field, even if i destroy the first one, i tryed to restart portainer but still the same behavior\nThanks. Thanks,this works. Hi, I had a similar issue and i could fix it cleaning cookies and sessions from my browser.\n. ",
    "sergioverde90": "OK, I close the issue.\nThanks!. ",
    "DreamCartier": "may i know how you solve this issue, i meet this issue ,so sad. ",
    "xoco70": "So I have lost my password, I cannot connect into my container, and recover it... not so good. Any alternatives?\n. ",
    "mhermosi": "I am trying to debug connection to ldap server... is there a way to at least call ping command to see if can see the ldap server from within the container? I tried from the Container Console functionality but no.... Hi @deviantony,\nI am doing some digging and I noticed that two nodes were running out of disk space. I think that might be the cause on those two nodes. I see on other nodes without disk space issues,  and they only have Exited containers but like 10 days ago and one 3 months ago... will check if that is consistent with some changes I made in the cluster\nThanks for the quick response.. ",
    "deonthomas": "Thanks. ",
    "SWW13": "I still have this issue with 1.16.3 and 1.16.4.\nTested with stack name docker-registry, docker_registry and dockerregistry.\nLet me know if you need more details.. I still have this issue with 1.16.3 and 1.16.4.\nTested with stack name docker-registry, docker_registry and dockerregistry.\nLet me know if you need more details.. ",
    "mattronix": "Thank you!! :)  \nMight I add great work on Portainer it's an amazing tool! . ",
    "SaschaWeisenberger": "any news on this issue? I just wanted to add a range of ports, would be helpful to have it in one entry (though I don't need to add 10000 ports like mattronix...). ",
    "lordSeaworth": "Don't think that proposes to add ENV that are ina sortable list where you can move them up or down in the list? or does it?. But then you still have to remove or readd alot of them if you lets say start with one at the top and a day or two later you have to add more env that are 'linked' then you have to add them to the end of the list. I rather have them sortable. Will be more usefull that way for some who want their ENV to be placed toghether wich holds simular value.. ",
    "SHSolution": "Hey,\nfor networks I don't need it. For images some times yes.\nBut once implemented it could be just a checkbox, activating / deactivating it per topic. The defaults per topic maybe different.. ",
    "granlem": "I don't get it why this issue and the duplicate #2027 are both closed now and reference to each other.\nThis is a favorable feature request, which probably many people (inclusive me) are looking for and which is not that hard to implement. Even the discussion #943 does not satisfy me. Therefore it would be nice if you keep open one of the issues. Thanks!. ",
    "mapero": "I run into the same problems after upgrading to portainer/portainer:linux-arm-1.15.5 when trying to update any stack (with or without env variables).\napp.23643f3d.js:3 TypeError: Cannot read property 'length' of null\n    at Object.a.removeInvalidEnvVars (app.23643f3d.js:47)\n    at o.b.deployStack (app.23643f3d.js:45)\n    at fn (eval at compile (app.23643f3d.js:5), <anonymous>:4:224)\n    at b (app.23643f3d.js:3)\n    at e (app.23643f3d.js:6)\n    at o.$eval (app.23643f3d.js:4)\n    at o.$apply (app.23643f3d.js:4)\n    at HTMLButtonElement.<anonymous> (app.23643f3d.js:6)\n    at Ga (app.23643f3d.js:2)\n    at HTMLButtonElement.c (app.23643f3d.js:2)\n(anonymous) @ app.23643f3d.js:3\n(anonymous) @ app.23643f3d.js:3\n$apply @ app.23643f3d.js:4\n(anonymous) @ app.23643f3d.js:6\nGa @ app.23643f3d.js:2\nc @ app.23643f3d.js:2. ",
    "creeonix": "@deviantony I don't know what to add. I tried to update portainer version to latest available, didn't helped at all. As a guess: some stacks have something old and incompatible with current release, but I cannot just stop them, it is prod environment affected by this bug.\n. @deviantony Looks like it works now.\nIs there any plans to make stack serializable back to yml? (like it is done on docker cloud). @deviantony Sorry for late response, yes, update fixes the issue.. ",
    "joeyhub": "Also -p 80 seems to want an address rather than a sole port. It's short for --bind which is misleading.. Suddenly local mysteriously works O_o. Is it possible you're blanking out the button when it shouldn't be or the colour scheme is making it look disabled plus all the warnings being misleading (as well as it defaulting to remotes tab)?\nCould we just have a --local flag for quickstart?. ",
    "xoxys": "No, the repo is reachable without authentification. But the Git Server is a self hosted Gitea Instance. git clone with native git client from command line works without issues... No it is not possible. @deviantony \nWith the Option ReferenceName: \"refs/heads/master\" set in git.PlainClone function the error was fixed. So the portainer code can looks like this:\n```\nfunc (service *Service) CloneRepository(url, destination string) error {\n    _, err := git.PlainClone(destination, false, &git.CloneOptions{\n        URL: url,\n                ReferenceName: branch,\n})\n\nreturn err\n\n}\n```\nWill test another branch than master today.. @deviantony Using an other branch does not fix the problem for me.. Create new Branch \"devel\" and set this as default branch... @deviantony \nYes it should, but it does not work. Same opinion! Also add support to get other attributes from LDAP and Attribute Mapping like Name, SurName, Email and Team Membership in relation to LDAP Attributes. @zeenlym See my comment, i think this feature is also needed. Don't use only LDAP Groups. I would suggest to make the relation to a team flexible with LDAP Attribute Mapping.. ",
    "chrisandchris": "Is it possible to use a git repo with authentication?. I can, of course. Going to do that in a couple of days.. I would love the idea about having a separate \"auth\" page where you can add auth details which may be used at various places. However, the question is how much work it needs to get done and how useful it will be (at first/soon).\nFor me, it is enough to simply have a user/pass field where I can enter credentials.. I will take a look at it next week.. ",
    "HuTaeh": "Hi,\nI have the same error as xoxys when i tried to deploy a stack from my Git Remote Server (GitLab).\nThe repository permission is set to public and i can clone him on other host.\nThe portainer log container\n2018/01/04 16:34:07 Starting Portainer 1.15.5 on :9000\n2018/01/04 16:35:06 http error: repository not found (code=500)\n2018/01/04 16:35:58 http error: repository not found (code=500)\nTechnical details:\n\nPortainer Version : 1.15.5 (latest)\nPlatform : Linux\nDocker Version : 17.12.0-ce\nCommand used to launch portainer : docker stack deploy -c docker-stack.yml Portainer\n\ndocker-stack.yml\n```\nversion: '3.3'\nservices:\n  portainer:\n    image: portainer/portainer:latest\n    ports:\n      - \"80:9000\"\n    volumes:\n      - portainer-data:/data\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - portainer-net\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager] \nnetworks:\n  portainer-net:\nvolumes:\n  portainer-data:\n```. Hi,\nI have the same error as xoxys when i tried to deploy a stack from my Git Remote Server (GitLab).\nThe repository permission is set to public and i can clone him on other host.\nThe portainer log container\n2018/01/04 16:34:07 Starting Portainer 1.15.5 on :9000\n2018/01/04 16:35:06 http error: repository not found (code=500)\n2018/01/04 16:35:58 http error: repository not found (code=500)\nTechnical details:\n\nPortainer Version : 1.15.5 (latest)\nPlatform : Linux\nDocker Version : 17.12.0-ce\nCommand used to launch portainer : docker stack deploy -c docker-stack.yml Portainer\n\ndocker-stack.yml\n```\nversion: '3.3'\nservices:\n  portainer:\n    image: portainer/portainer:latest\n    ports:\n      - \"80:9000\"\n    volumes:\n      - portainer-data:/data\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - portainer-net\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager] \nnetworks:\n  portainer-net:\nvolumes:\n  portainer-data:\n```. ",
    "zeenlym": "@xoxys i'm agree with you. Hy every one,\nI think LDAP mapping is the best solution, I can wait for it to be avalaible.\nThanks,. How about some system like jenkins credentials. You manage credentials username/password and ssh private key with access control in a page. Then when activating \"Use authentication\" you can choose credentials you have access to.. ",
    "tbouvet": "Agree with you. If we use LDAP settings, we shouldn't have to create users in portainer settings. In my case, I use filter to add ldap group filter but I want all guys who have the ldap group could be connected to portainer and without having to create users in portainer.\nAs @ncresswell said, we can switch teams to LDAP group.. ",
    "ulm0": "This is related to Swarm itself, it uses the hash generated instead of the tag, so Swarm can identify the differences across images with same tag but built and pushed in different dates, this is a nice use-case when using :latest images. ",
    "Svarto": "Is this the issue where this feature is being tracked? I am a bit confused as we are having two issues that are referenced to eachother.. ",
    "poVoq": "Why can't it behave like the duplicate/edit button of showing a error but recreating the container just sans all except one network? Why have the extra steps of renaming and removing the old containers?. ",
    "giminni": "After rebooting docker it works again. Got same behavior using traefik as my reverse proxy docker node\nI guess custom templates with self-CA certificates over a reverse proxy does not work properly.\nFrom docker log I got:\nGet https://<hostname>.<domain>/webp0/templ/portainer/templates.json: x509: certificate signed by unknown authority (code=500)\nFrom UI I got:\nFailure\nGet https://<hostname>.<domain>/webp0/templ/portainer/templates.json: x509: certificate signed by unknown authority\nIf I enter the URL directly \"https://hostname.domain/webp0/templ/portainer/templates.json\", I can see the JSON template.\nTechnical details:\nPortainer version: 1.15.5\nTarget Docker version (the host/cluster you manage): 17.09.1-ce\nPlatform (windows/linux): Ubuntu Core 16-2.30 (rev3750)\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer): \n  sudo docker run -d \\\n     -p \"$IP\"$(checkPort $PORT_MGMT_OUT):$PORT_MGMT_IN \\\n     --net $WEAVE_NET \\\n     $($HOME/bin/weave dns-args) \\\n     --dns-search $WEAVE_LOC \\\n     --hostname \"$(checkName).$WEAVE_DOM\" \\\n     --name \"$(checkName)\" \\\n     --mount type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock \\\n     --mount type=bind,source=$RUN/$NAME$INST/certs,target=/certs \\\n     --mount type=bind,source=$RUN/$NAME$INST/data,target=/data \\\n     --mount type=bind,source=$RUN/$NAME$INST/endpoints,target=/endpoints \\\n     --label \"traefik.enable=true\" \\\n     --label \"traefik.portainer.frontend.rule=PathPrefixStrip:/port$INST/\" \\\n     --label \"traefik.portainer=$PORT_MGMT_OUT\" \\\n     --label \"traefik.portainer.docker.network=$WEAVE_NET\" \\\n     portainer/portainer:linux-$PORT_ARCH-$PORT_VER\nTarget Swarm version (if applicable): N.A.\nBrowser: Firefox 52\n\n. ",
    "Sasha4ever": "The same problem with my own git repo to pull yml to deploy stack.. Link to setup https://github.com/apps/slack/installations/new. Are you sure? \n\nEither the app isn't installed on your repository or the repository does not exist. Install it to proceed.\nNote: You need to be an organization owner to install the app (or ask one to install it for you).\n. Unfortunately it doesn't help. \n",
    "Jitsusama": "I'm experiencing the same when trying to pull a docker-compose.yml file from a private Git repository. It would be nice to have UI to put in trusted certificates, or, at least, some documentation on how we can insert a trusted certificate into the portainer's host such that we can get around this error.. ",
    "cbrherms": "This is also the same within the containers list.\nGetting http://0.0.0.0:9000 on the portainer container as an example.\nIdeally if network connection for the container is set to bridge the url used should be the endpointIP (or swarmManagerIP) \nAlso, if using an external network driver such as macvlan then it should be the container assigned IP. At present the port url's aren't showing for that at all.. I'd assumed that a similar modification as #812 would have met this requirement. \nGave it a shot myself but could not get the specified Mac address to be used by the container. \nProbably requires a mind more suited to this kind of project rather than this here sysadmin. . After all the festivities had ended, resulting in a clearer head, been able to look in to the source code a bit more thoroughly to get my head around it\nWorking on a pull to add this in now. I've got so far as to have it working fine on container creation, just need to implement populating the current mac address in a recreate. Changes made. Do you want the feature related commits squashing?. Yeah, using the filter would be best rather than implementing a button to do it all. Too much opportunity to muck up and accidentally delete something you didn't want to.. ",
    "agrawal93": "Is this issue fixed in the latest develop codebase? I am running the docker image portainer/portainer:develop and when I click on any of the Published Ports in the Services section, it opens a new about:blank tab.\nCan you please help me with this?\nThanks in advance.. My stupidity. In the Endpoints section, I didn't mention the Public IP for the node. Probably that's what caused this.\nClosing the issue.. ",
    "fabrizio2210": "@deviantony \nWow, you fixed the problem.\nI executed  without the tag and it is working.\nTo explain the tag: at the beginning I deploy the container on the docker without Swarm and I used the tag linux-arm. All worked. So I used also for the service in Docker Swarm.. Any idea when this feature will be included?. ",
    "davidwhthomas": "Thanks for the reply. Good to hear it's possible!\nYes, I tried the double-quotes earlier too.\nUnfortunately, I wasn't able to login with \"admin\" and \"password\" using your provided portainer docker-compose.yml file, same \"Invalid credentials\" error\nI can see another error in the JS console, perhaps related to this?\napp.f319a0fb.js:3 POST http://localhost:9000/api/auth 422 (Unprocessable Entity)\n\nHere's some more details on that erroneous POST request\n\nTechnical details:\n\nPortainer version: portainer/portainer\nTarget Docker version (the host/cluster you manage): 17.09.0-ce-mac35 (19611)\nPlatform (windows/linux): OSX\nCommand used to start Portainer: docker-compose -f docker-compose-portainer.yml up -d\nBrowser: Chrome 62.0.3202.94 (Official Build)\n. > The --admin-password flag is only taken into account the first time Portainer is started. If the container is restarted, the flag will be ignored\n\nThat's it!\nI had the Portainer already started, then stopped with docker-compose stop\nI adjusted the config and ran docker-compose up -d which didn't set the password.\nHowever, it appears yes, one needs to set the password for the first container init.\nAfter running docker-compose down I was able to recreate the Portainer container with the admin password set from the docker-compose.yml file!\nMany thanks for the help and thanks again for the hard work on the excellent Docker administration app, great stuff.. ",
    "thomasricaud": "I did install portainer using the command line on the same host with my user, meaning i had the right access.\nI noticed that the file /var/run/docker.sock wasn't there (but i still could manage and see my containers on the portainer webUI) \nSo i asked the admin to reboot the daemon docker and it's working fine now. \n. When I said install I meant using the docker run command. Don't I need access to the daemon for that ?. The admin did the postinstall steps. My user is in a special groups to have access.(docker)\nWe had a machine reboot to add some memory. Maybe the daemon(and all the containers) was killed and not properly stopped at that step. Could that be the root cause of the docker.sock file disappearing?. Probably. Thanks for your help anyway. Since it's working now I'll close the issue.. ",
    "Nhoya": "Sure \n\n. What about insert a slider instead of truncate the characters? \nI mean, a slider inside the cell to scroll the entire name. ",
    "buehlmannpa": "@deviantony No OAuth does not work in our case. We use CAS as an open-source Single Sign On (SSO) provider. @deviantony We use the ReverseProxy to authenticate the user before the application. Then the application will send the username and the corresponding group as HTTP headers. \nI think the only thing missing is to read the username from the HTTP header.. ",
    "Korrd": "+1 \nSuch feature would be very useful for us too!. ",
    "natlibfi-arlehiko": "+1 For SSO authentication that expects username & group headers from a trusted proxy. Please use semver and do not introduce breaking changes in non-major versions :). ",
    "wieshka": "+1 For SSO auth (using Okta/OAuth). ",
    "edward-of-clt": "+1. ",
    "Thesola10": "+1 For SSO because it could allow for adding extra sign-in steps (like TOTP). ",
    "lukasmrtvy": "@ncresswell Is there any PR to track for this oauth extension? Thanks. Ups.. Is it paid/enterpise feature? I dont need it then :). No problem, totally understand to this. I thought that it was community contribution :). ",
    "AlDemion": "It's can be referenced to swarm mode? Because I see only containers that is located on the same node. If I go to other endpoint network tab, it shows to me containers running on that endpoint only. . ",
    "posquit0": "I need something like this. \nhttps://github.com/rancher/rancher-ecr-credentials. ",
    "Mobe91": "I would like to use portainer to manage my swarm cluster running on AWS. However, I need portainer to be able to access my Docker images stored in ECR. Without such a feature, I cannot use portainer. :(. ",
    "tcjennings": "I have a similar use case where I launch a swarm in AWS and use ECR for the images (and CodeCommit as repository, which is relevant to a different issue). I have applied an IAM role to my instances which grants Pull permissions to the repositories (i.e., I do not have to run aws ecr get-login or docker login). My workflow for launching stacks was too manual: ssh to the manager node, execute a shell script. Yet, registry auth worked.\nI have previously used https://github.com/dockersamples/docker-swarm-visualizer as a \"GUI\" but want to use portainer as a management layer for my stacks. Since I run portainer as a service on my swarm, it necessarily runs as a container itself, which puts the burden of the registry authentication inside the container, and what works on the host doesn't work in the container.\nMy workaround is this: wrap the portainer docker image in my own Dockerfile and use my own image instead:\nDockerfile\n```\nFROM golang:1.9 as ecr-helper\nRUN go get -u github.com/awslabs/amazon-ecr-credential-helper/ecr-login/cli/docker-credential-ecr-login\nWORKDIR /go/src/github.com/awslabs/amazon-ecr-credential-helper\nRUN make\nFROM busybox as busybox\nRUN which busybox\nFROM portainer/portainer:latest\nENV HOME=/\nCOPY --from=ecr-helper /go/src/github.com/awslabs/amazon-ecr-credential-helper/bin/local/docker-credential-ecr-login /bin/docker-credential-ecr-login\nCOPY config.json /.docker/config.json\nCOPY --from=busybox /bin/busybox /bin/busybox\nRUN [\"/bin/busybox\",\"--install\",\"-s\",\"/bin\"]\n```\nThis gives me a portainer image that's a little bigger but contains the AWS ecr-login helper binary (and a busybox for good measure so I can get a shell and poke around). Given the HOME environment and the config.json (straight from the ecr helper README, see below), I am able to launch stacks from portainer with images from the ECR.\nconfig.json\n{\n    \"credsStore\": \"ecr-login\"\n}\nYour mileage may vary, and I do +1 a feature that would bring support for revolving ecr credentials into portainer, but with IAM roles my workaround might be useful to others.. I would like to completely whitelabel portainer, but the GitHub dependency is blocking.\nWould like to see, in addition to whatever UX you design, a straightforward ability to specify in the templates.json how to authenticate or otherwise use the repository specified for an application stack.\nWould like to use AWS CodeCommit URLs as well as something local like GOGS if necessary.\nAlternatively, why can't I serve the stack YML files from the same nginx instance from which I serve the templates.json? Can the stack template specify a simple URL instead of a repository?. Apologies; don't want to pollute this issue's thread but that's what I mean by \"white label\" - change logo, use own templates, and having the stacks in those templates work with a private repo (or just via simple access to a file that's generally accessible).. +1 this feature. It would really relax the number of dependencies needed for a nice Portainer deployment in a potentially closed environment.\nRegarding the construction of potential configuration, you might not need separate URL and FILE configuration directives since you can describe a file path as a URI.\n\"repository\": {\n    \"url\": \"https://github.com/portainer/templates\",\n    \"stackfile\": \"stacks/cockroachdb/docker-stack.yml\"\n  }\n\"direct\": {\n    \"url\": \"https://server.com/portainer/stacks/cockroachdb/docker-stack.yml\"\n  }\n\"direct\": {\n    \"url\": \"file:///path/to/portainer/stacks/cockroachdb/docker-stack.yml\"\n  }\n. ",
    "jgrasl": "@tcjennings @deviantony unfortunately after the update to 1.17.0 aws login doesn't work anymore with the ecr login helper. If I'll have time I'll check what is changed why the binary is not called when docker pull initiated. I rebuilt the same with 1.16.5 which works perfectly but with the latest version ecr cache never get filled and as I see the helper binary is not called when a stack deployment ran.. @tcjennings @deviantony unfortunately after the update to 1.17.0 aws login doesn't work anymore with the ecr login helper. If I'll have time I'll check what is changed why the binary is not called when docker pull initiated. I rebuilt the same with 1.16.5 which works perfectly but with the latest version ecr cache never get filled and as I see the helper binary is not called when a stack deployment ran.. @deviantony As I see from the changes in the release the config json file is always overwritten by main() - > initStackManager ->  NewStackManager - > updateDockerCLIConfiguration. It works fine if I overwrite the HTTPheaders in the json file after portainer process is started but I cannot overwrite it at build time.\nI'll take a look if I can start portainer with a script inside the container instead of with the /portainer entry point so then I can modify the content of the json file after the process was initiated. But I fear the HTTP headers information are stored for a reason so I should not really remove it from that file. I'm not using the agent currently but it can be a problem for someone else.. @deviantony As I see from the changes in the release the config json file is always overwritten by main() - > initStackManager ->  NewStackManager - > updateDockerCLIConfiguration. It works fine if I overwrite the HTTPheaders in the json file after portainer process is started but I cannot overwrite it at build time.\nI'll take a look if I can start portainer with a script inside the container instead of with the /portainer entry point so then I can modify the content of the json file after the process was initiated. But I fear the HTTP headers information are stored for a reason so I should not really remove it from that file. I'm not using the agent currently but it can be a problem for someone else.. @deviantony With the pr1898 the content of the /config.json is preserved and a new config.json is created under /data. Altough that new config.json file only contains the HTTP header json nothing from the file copied build time and so the ecr login is not working with the cred helper.. @deviantony With the pr1898 the content of the /config.json is preserved and a new config.json is created under /data. Altough that new config.json file only contains the HTTP header json nothing from the file copied build time and so the ecr login is not working with the cred helper.. @deviantony sorry I forgot that. Now I did change it unfortunately now the data from my config json is not preserved. Under /data/config.json is only the HTTP headers. I am mapping the data volume to an external volume trough docker volumes to persist portainer config, can that be a problem?. @deviantony sorry I forgot that. Now I did change it unfortunately now the data from my config json is not preserved. Under /data/config.json is only the HTTP headers. I am mapping the data volume to an external volume trough docker volumes to persist portainer config, can that be a problem?. @deviantony yes using the pr docker image\n```\nFROM golang:1.9 as ecr-helper                                                                                          \nRUN go get -u github.com/awslabs/amazon-ecr-credential-helper/ecr-login/cli/docker-credential-ecr-login                \nWORKDIR /go/src/github.com/awslabs/amazon-ecr-credential-helper                                                        \nRUN make                                                                                                                 \nFROM busybox as busybox                                                                                                \nRUN which busybox                                                                                                        \nFROM portainer/portainer:pr1898                                                                                        \nCOPY --from=ecr-helper /go/src/github.com/awslabs/amazon-ecr-credential-helper/bin/local/docker-credential-ecr-login /bin/docker-credential-ecr-login\nCOPY config.json /data/config.json                                                                                     \nCOPY --from=busybox /bin/busybox /bin/busybox                                                                          \nRUN [\"/bin/busybox\",\"--install\",\"-s\",\"/bin\"]\n```\nBefore starting up the container I deleted the config.json file from the mounted data volume so should be no json file there at startup.. @deviantony yes using the pr docker image\n```\nFROM golang:1.9 as ecr-helper                                                                                          \nRUN go get -u github.com/awslabs/amazon-ecr-credential-helper/ecr-login/cli/docker-credential-ecr-login                \nWORKDIR /go/src/github.com/awslabs/amazon-ecr-credential-helper                                                        \nRUN make                                                                                                                 \nFROM busybox as busybox                                                                                                \nRUN which busybox                                                                                                        \nFROM portainer/portainer:pr1898                                                                                        \nCOPY --from=ecr-helper /go/src/github.com/awslabs/amazon-ecr-credential-helper/bin/local/docker-credential-ecr-login /bin/docker-credential-ecr-login\nCOPY config.json /data/config.json                                                                                     \nCOPY --from=busybox /bin/busybox /bin/busybox                                                                          \nRUN [\"/bin/busybox\",\"--install\",\"-s\",\"/bin\"]\n```\nBefore starting up the container I deleted the config.json file from the mounted data volume so should be no json file there at startup.. @deviantony no, just using a mapped directory with docker run, but it can be named of course if it's needed.\n-v /portainer/data/path/on/server:/data. @deviantony no, just using a mapped directory with docker run, but it can be named of course if it's needed.\n-v /portainer/data/path/on/server:/data. @deviantony for now I just put the config.json file under the mapped directory with the credsStore setup and startup portainer. This way my config got merged with the HTTP headers and ecr login works fine with the pr1898.. @deviantony for now I just put the config.json file under the mapped directory with the credsStore setup and startup portainer. This way my config got merged with the HTTP headers and ecr login works fine with the pr1898.. @deviantony I don't know if you plan to do any other support for ecr login but I think the credential helper could be a final solution. It only needs the credentials file which is already used by everyone who uses the aws cli so if the credsStore in the config json could be included by default in the portainer image we wouldn't need to put he file manually under the persisted /data directory only provide the credentials file.\nBut I'm completely happy with the current solution too since it works fine for me.\nThanks for the fix!. @deviantony I don't know if you plan to do any other support for ecr login but I think the credential helper could be a final solution. It only needs the credentials file which is already used by everyone who uses the aws cli so if the credsStore in the config json could be included by default in the portainer image we wouldn't need to put he file manually under the persisted /data directory only provide the credentials file.\nBut I'm completely happy with the current solution too since it works fine for me.\nThanks for the fix!. @deviantony Of course I understand, busy release time:) I can prepare a PR with what I thought and you guys can decide later if you'd like to merge it for a later release or not.. @deviantony Of course I understand, busy release time:) I can prepare a PR with what I thought and you guys can decide later if you'd like to merge it for a later release or not.. @dawidpawlowski You can log in to the container and remove /.ecr/cache.json file which stores login credentials. After that you run a new deployment it should recreate the file with valid login credentials to ecr.. @dawidpawlowski You can log in to the container and remove /.ecr/cache.json file which stores login credentials. After that you run a new deployment it should recreate the file with valid login credentials to ecr.. @dawidpawlowski I tried now to pull an image via portainer images it doesn't work me either but to be honest I never used that feature since stack will automatically pull the image it needs. I think pulling an individual image works differently. Is the stack cache.json file gets created if you try to deploy a stack file trough http://my-swam-manager-address:9000/#/stacks ? I think your configuration is fine.. @dawidpawlowski I tried now to pull an image via portainer images it doesn't work me either but to be honest I never used that feature since stack will automatically pull the image it needs. I think pulling an individual image works differently. Is the stack cache.json file gets created if you try to deploy a stack file trough http://my-swam-manager-address:9000/#/stacks ? I think your configuration is fine.. Hi @deviantony. I had the same issue after upgrading to 1.17. Since I don't have that many endpoints I recreated them and after that they're working fine. After the upgrade portainer wanted to use TLS I got the same error as @xrobau though endpoints were configured to use TCP. After deleting and recreating the endpoints they're working fine again.. Hi @deviantony. I had the same issue after upgrading to 1.17. Since I don't have that many endpoints I recreated them and after that they're working fine. After the upgrade portainer wanted to use TLS I got the same error as @xrobau though endpoints were configured to use TCP. After deleting and recreating the endpoints they're working fine again.. @deviantony yes, for me my existing TCP endpoints didn't work after updating to 1.17. My one endpoint with socket setup worked fine but all TCP endpoints had to be recreated to work again.\nEndpoint creation works fine for me in 1.17. @deviantony yes, for me my existing TCP endpoints didn't work after updating to 1.17. My one endpoint with socket setup worked fine but all TCP endpoints had to be recreated to work again.\nEndpoint creation works fine for me in 1.17. @deviantony simple TCP without TLS and I had the same error in the portainer log as @xrobau after update.\n2018/05/14 07:04:50 Migrating database from version 8 to 10.\n2018/05/14 07:04:50 Starting Portainer 1.17.0 on :9000\n2018/05/14 07:10:26 http: proxy error: tls: oversized record received with length 20527. @deviantony simple TCP without TLS and I had the same error in the portainer log as @xrobau after update.\n2018/05/14 07:04:50 Migrating database from version 8 to 10.\n2018/05/14 07:04:50 Starting Portainer 1.17.0 on :9000\n2018/05/14 07:10:26 http: proxy error: tls: oversized record received with length 20527. @deviantony I did update my endpoints I put them into a newly created group and after that I realized they're not working.. ",
    "reineruhry": "I've tried all workarounds with the new 1.17.0, may be because I'm using agents, it's not working! I tried adding config.json on /, on data on .docker... \nAny idea on how have it working?. @deviantony thanks! that worked, I was trying with the pr1898, do you know if it's now part of the 1.17.1?. ",
    "dawidpawlowski": "Have you any idea to test if it working without waiting 12 hours for ECR token expired?. @jgrasl I tried your solution and it seems to not working for me. Below I described my example stack setup and all steps what I done.\n\nI builded portainer workaround docker image as you wrote in posts above:\n```\nFROM golang:1.9 as ecr-helper                                                                                          \nRUN go get -u github.com/awslabs/amazon-ecr-credential-helper/ecr-login/cli/docker-credential-ecr-login                \nWORKDIR /go/src/github.com/awslabs/amazon-ecr-credential-helper                                                        \nRUN make                                                                                                                 \n\nFROM busybox as busybox                                                                                                \nRUN which busybox                                                                                                        \nFROM portainer/portainer:1.17.1                                                                                       \nCOPY --from=ecr-helper /go/src/github.com/awslabs/amazon-ecr-credential-helper/bin/local/docker-credential-ecr-login /bin/docker-credential-ecr-login\nCOPY config.json /data/config.json                                                                                     \nCOPY --from=busybox /bin/busybox /bin/busybox                                                                          \nRUN [\"/bin/busybox\",\"--install\",\"-s\",\"/bin\"]\n```\n\nCreated empty directory /path/on/server/portainer_data. Logged manually to ECR using aws-cli (to be able to download my test_service image from ECR) and deploy stack using docker-compose.yml file (with 2 nodes in swarm):\n```\nversion: '3.2'\nservices:\n  test_service:\n    image: 111111111.dkr.ecr.eu-west-1.amazonaws.com/test_service:1.0.10\n    ports:\ntarget: 80\n    mode: host\ndeploy:\n  replicas: 1\n  mode: replicated\n  endpoint_mode: dnsrr\n\n\n\nagent:\n    image: portainer/agent\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - agent_network\n    deploy:\n      mode: global\nportainer:\n    image: workaround-portainer:test5\n    command: -H tcp://tasks.agent:9001 --tlsskipverify\n    environment:\n      AWS_ACCESS_KEY_ID: MY_ACCESS_KEY\n      AWS_SECRET_ACCESS_KEY: MY_SECRET_ACCESS_KEY\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - /path/on/server/portainer_data:/data\n    networks:\n      - agent_network\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\nnetworks:\n  agent_network:\n    driver: overlay\nvolumes:\n  portainer_data:\n```\n\n\nAll runs properly. /path/on/server/portainer_data/config.json looks:\n{\"HttpHeaders\":{\"X-PortainerAgent-ManagerOperation\":\"1\",\"X-PortainerAgent-PublicKey\":\"somePublicKey\",\"X-PortainerAgent-Signature\":\"someSignature\"}}\nThere isn't config credsStore property so I replace evertything in /path/on/server/portainer_data/config.json with this:\n{\n    \"credsStore\": \"ecr-login\"\n}\nand restart portainer container. After restart /path/on/server/portainer_data/config.json looks:\n{\"HttpHeaders\":{\"X-PortainerAgent-ManagerOperation\":\"1\",\"X-PortainerAgent-PublicKey\":\"somePublicKey\",\"X-PortainerAgent-Signature\":\"someSignature\"},\"credsStore\":\"ecr-login\"}\nso, everythings looks fine.\n\n\nNext, I logged to portainer http://my-swam-manager-address:9000\n\n\nand update test_service version to some previous version 111111111.dkr.ecr.eu-west-1.amazonaws.com/test_service:1.0.9. It works, but when try to pull some image from my ECR using http://my-swam-manager-address:9000/#/images it doesn't work. It works when I downloading some images from DockerHub. \nI logged to the portainer container and there isn't /.ecr/cache.json file. It creates only when I run manually command docker-credential-ecr-login list. So I'm sure that after 12 hours I won't be able to update service image version.\nWhat I'm doing wrong? I can add that It works exactly the same without workaround - I can update services only for 12 hours after deploy stack.. So, @jgrasl when I deploy stack using http://my-swam-manager-address:9000/#/stacks then it works,  /.ecr/cache.json file is recreating. Thanks for help.. Unfortunately this workaround works only for deploying new stack. When I tried to update service version or scale service to the node where image is not pulled yet, operation fails with message 'No such image...'. .ecr/cache.json file is recreated only if I deploy new stack. With scaling and updating image version cache.json is not recreated.. ",
    "lucasforchino": "A workaround I found if your servers are not in aws but you are using ECR,  is updating the registry every 12 hours through the api using a cron job \nI'm using httpie to execute HTTP queries from the CLI and jq to parse the response\n!/bin/sh\necho \"get portainer token\"\nPORTAINER_TOKEN=$(http --ignore-stdin POST :9000/api/auth Username=username Password=password | jq -r '.jwt')\necho \"get aws token\"\nAWS_TOKEN=$(/root/.local/bin/aws ecr get-authorization-token --region sa-east-1 --output text --query authorizationData[].authorizationToken)\nAWS_DECODED_PASSWORD=$(echo $AWS_TOKEN | base64 -d | cut -d: -f2)\necho \"update the registry\"\nhttp --ignore-stdin PUT  :9000/api/registries/1 \"Authorization: Bearer $PORTAINER_TOKEN\"  username=AWS password=$AWS_DECODED_PASSWORD Authentication:=true. A workaround I found if your servers are not in aws but you are using ECR,  is updating the registry every 12 hours through the api using a cron job \nI'm using httpie to execute HTTP queries from the CLI and jq to parse the response\n!/bin/sh\necho \"get portainer token\"\nPORTAINER_TOKEN=$(http --ignore-stdin POST :9000/api/auth Username=username Password=password | jq -r '.jwt')\necho \"get aws token\"\nAWS_TOKEN=$(/root/.local/bin/aws ecr get-authorization-token --region sa-east-1 --output text --query authorizationData[].authorizationToken)\nAWS_DECODED_PASSWORD=$(echo $AWS_TOKEN | base64 -d | cut -d: -f2)\necho \"update the registry\"\nhttp --ignore-stdin PUT  :9000/api/registries/1 \"Authorization: Bearer $PORTAINER_TOKEN\"  username=AWS password=$AWS_DECODED_PASSWORD Authentication:=true. ",
    "pkaramol": "Proposed Workaround:\nCreate an image with the following entrypoint (and the needed dependencies like awscli installed):\neval $(aws ecr get-login --no-include-email --region eu-west-2)\ndocker pull <image_needed_from_ecr_1>\ndocker pull <image_needed_from_ecr_2>\n...\n\nYou should of course expose AWS_SECRET_ACCESS_KEY and AWS_ACCESS_KEY_ID vars to the above image (and make available via template.json)\nAdd:\ndeploy:\n     restart_policy: none\nTo the service of the above image;\nAdd:\ndepends_on:\n   service_above\nto services in docker-compose.yml using the above ecr images that need to become locally available first.\nHappy ecr-pulling. Stand-alone docker instance on my machine; (have not run docker swarm init so I am not in a swarm cluster). ",
    "ferm10n": "@pkaramol how is that supposed to refresh the aws auth token when it expires after 12 hours? You'd have to restart Portainer every time your tokens expire.. ",
    "alex88": "I've been able to get the registry created on AWS using https://github.com/johnvmt/portainer-ecr-credentials but even if the credentials are there I get No such image trying to use it in a service and/or a stack\nUpdate: my bad, I've typed the wrong AWS region :) now it seems to be working. ",
    "StoicPerlman": "Would anyone be open to the idea of adding a checkbox that gives the option to map container ports to the same host port. \nBy default the I believe publish all exposed ports just maps to a random host port. Very often I find myself just mapping 80:80, 443:443 for local development. If I already have these defined in the docker file it would be nice to have that checkbox to automap.. ",
    "rahulruikar": "@deviantony  .. \nI used following format for storing labels in template.\n             \"Labels\": {\n                     \"com.example.vendor\": \"Acme\",\n                     \"com.example.license\": \"GPL\",\n                     \"com.example.version\": \"1.0\"\n             },\nhttps://docs.docker.com/engine/api/v1.24/#3-endpoints\n  . with -t option I can see following\ndocker logs -t portainer\n2018-03-07T08:05:14.657865299Z 2018/03/07 08:05:14 Starting Portainer 1.16.3 on :9000\n2018-03-07T08:05:19.719824533Z 2018/03/07 08:05:19 http error: User not found (code=404)\n2018-03-07T08:05:21.415064176Z 2018/03/07 08:05:21 http error: Invalid credentials (code=400)\n2018-03-07T08:05:24.252680167Z 2018/03/07 08:05:24 http error: User not found (code=404)\nwithout -t \ndocker logs  portainer\n2018/03/07 08:05:14 Starting Portainer 1.16.3 on :9000\n2018/03/07 08:05:19 http error: User not found (code=404)\n2018/03/07 08:05:21 http error: Invalid credentials (code=400)\n2018/03/07 08:05:24 http error: User not found (code=404)\nI thought some information is duplicate.. Do you want to have default \"-t\" option enabled or slider/switch in log viewer to enable it and by default it as disabled ??\n. Ok no problem..I will send updated pull request.\nRegards,\nRahul\nOn Thu, 8 Mar 2018 at 11:06 am, Anthony Lapenna notifications@github.com\nwrote:\n\nFor me an application with a good logging system should write their own\ntimestamps. But I agree, some do not do it, so @rahulruikar\nhttps://github.com/rahulruikar I think that the best solution would be\nto add a switch \"Display timestamps\" which defaults to off.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1696#issuecomment-371341857,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHXNPYE00DxPVh_NBiXyW88jPX69waCaks5tcIQggaJpZM4Sf39h\n.\n-- \nSent from Gmail Mobile\n. I was bit busy..will try to submit it today.. c u in brisbane tomorrow :). @deviantony  I tried to reproduce this issue but couldnt. I had \"&' character in password for \"admin\" user.\ntried with placing \"&\" in password at different position but authentication was successful as expected.. @deviantony  I am thinking of \n   - Slider \"Authentication\"\n           - Username\n           - Password\n-   Rename existing button label from \"Update the stack\" ==> \"Update\"\n-   New button with label \"Redeploy\"\nwhat do you think ?. Update.. \n  @deviantony  I will go ahead with approach mentioned in your comment.\n\n@deviantony I didn\u2019t go with this approach because credentials could change Between saving with data and redeploy attempt(rare cases but possible). Also in one of thread you mentioned that portainer does not save these github credentials. \n. Ok..I will start working on #1752 this week.\nOn Thu, 26 Apr 2018 at 12:18 am, Anthony Lapenna notifications@github.com\nwrote:\n\nFollowing the discussion in #1793 (comment)\nhttps://github.com/portainer/portainer/pull/1793#issuecomment-384302019\nAs I'm not keen to store unencrypted credentials for git repositories\ninside Portainer I think that the way to go is to implement #1752\nhttps://github.com/portainer/portainer/issues/1752 first and then work\non this one.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1753#issuecomment-384303314,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHXNPSgOjCLCHiH5wMz2reZV7Jg52g8hks5tsIWmgaJpZM4S3Cmi\n.\n-- \nSent from Gmail Mobile\n. Hi Anthony,\nI won\u2019t be able to spend time on this anytime soon.\n\nRegards\nRahul\nOn Wed, 19 Sep 2018 at 1:24 pm, Anthony Lapenna notifications@github.com\nwrote:\n\n@rahulruikar https://github.com/rahulruikar are you still up to do the\nchanges?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/1755#issuecomment-422637295,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHXNPfQ32PMyfjuQRHi6Hlpv2bfm2clDks5ucbjmgaJpZM4S3FRE\n.\n-- \nSent from Gmail Mobile\n. Ok no problem..I will work on #1752 and then we will see about this PR\n\nOn Thu, 26 Apr 2018 at 12:14 am, Anthony Lapenna notifications@github.com\nwrote:\n\nHey @rahulruikar https://github.com/rahulruikar ! Sorry for the delay.\nFYI, I'm not able to build the backend:\ngithub.com/portainer/portainer/git\n../../../../../go/src/github.com/portainer/portainer/git/git.go:47: unknown field 'Username' in struct literal of type \"gopkg.in/src-d/go-git.v4/plumbing/transport/http\".BasicAuth\n../../../../../go/src/github.com/portainer/portainer/git/git.go:48: unknown field 'Password' in struct literal of type \"gopkg.in/src-d/go-git.v4/plumbing/transport/http\".BasicAuth\nWhilst this implementation looks good, I'm not really keen to store\nunencrypted git passwords in the Portainer database... (sorry I sent you on\nthis direction in #1753 (comment)\nhttps://github.com/portainer/portainer/issues/1753#issuecomment-377034493\n...)\nI'm thinking that #1752\nhttps://github.com/portainer/portainer/issues/1752 should be the\npriority at the moment, and we'll then be able to enable the update button\nusing ssh key auth.\nI'll keep this PR open as a reference for future work but marked as\npending until #1752 https://github.com/portainer/portainer/issues/1752\nis solved.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/1793#issuecomment-384302019,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHXNPbdsK7-my_FjddJfLlFGscd0TtiKks5tsIS6gaJpZM4TKNu_\n.\n-- \nSent from Gmail Mobile\n. ok..I will take a lot.. I was trying to avoid duplicate code.. no prob..I will post another pull request today.. no prob..will fix it and submit again.. no prob..will fix it and submit again.. \n",
    "siewert87": "Anyway. I used https://github.com/CWSpear/local-persist as a volume plugin and it's working like a charm.. ",
    "GoWebProd": "@deviantony I want to edit files from node. For example, bind root to portainer container and in web select some file from disk and edit it.. ",
    "DG1000": "Am 05.01.2018 um 13:43 schrieb Anthony Lapenna:\n\nClosed #1544 https://github.com/portainer/portainer/issues/1544 via #1552 https://github.com/portainer/portainer/pull/1552.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub https://github.com/portainer/portainer/issues/1544#event-1411216977, or mute the thread https://github.com/notifications/unsubscribe-auth/AHpGGeOkTC0demcTd2NzsFwVrnSRQH8Oks5tHhj0gaJpZM4RPpRv.\nMany thanks for fixing.\n\n. ",
    "thomasleveil": "It's all good now, replaying my scenario every container is now showing up in the container list :+1: . ",
    "lomby92": "Already tried @deviantony solution, works well.. ",
    "gopi-para-mpf": "I just tested the image. It pulled the compose file from a private git repository with username and password passed into authentication toggle, deployed a stack. It works.\n. ",
    "alexya": "@deviantony \n1. I don't have any reverse proxy. \n2. I tried https://x.x.x.x:8080, but failed.\n3. I removed the ssl, and started portainer server with http, it can work. \nI don't know how to get the log of portainer. I tried to connect to the container of portainer, but failed.\n```\ndocker exec -it 92e0d8abc7bf /bin/bash\nrpc error: code = 2 desc = oci runtime error: exec failed: container_linux.go:247: starting container process caused \"exec: \\\"/bin/bash\\\": stat /bin/bash: no such file or directory\"\ndocker exec -it 92e0d8abc7bf /bin/sh\nrpc error: code = 2 desc = oci runtime error: exec failed: container_linux.go:247: starting container process caused \"exec: \\\"/bin/sh\\\": stat /bin/sh: no such file or directory\"\n```\nCONTAINER ID        IMAGE                                                                                           COMMAND                  CREATED             STATUS              PORTS                 NAMES\n92e0d8abc7bf        portainer/portainer@sha256:3ba9597e6aa013a6545abfd281da0eb8de3791ae142e226cc3547e26afd2ac3a     \"/portainer -H uni...\"   4 minutes ago       Up 3 minutes        9000/tcp              portainer_portainer.1.we10ewb7546kmj6043448gk2l\n. I think the problem should be that I created a wrong certificate.\nI followed the doc from here http://portainer.readthedocs.io/en/stable/deployment.html#secure-portainer-using-ssl\nand specified the \"Command Name\" with FQDN when creating the certificate.\nCountry Name (2 letter code) [AU]:\nState or Province Name (full name) [Some-State]:\nLocality Name (eg, city) []:\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:\nOrganizational Unit Name (eg, section) []:\nCommon Name (e.g. server FQDN or YOUR name) []:\nAfter I created the container, the portainer site can work fine. \nThx. . ",
    "n8lauscher": "i run:\n$ mkdir ~/_docker_portainer\n$ cd ~/_docker_portainer\n$ openssl genrsa -out portainer.key 2048\n$ openssl ecparam -genkey -name secp384r1 -out portainer.key\n$ openssl req -new -x509 -sha256 -key portainer.key -out portainer.crt -days 3650\n$ docker run -d -p 443:9000 --name portainer --restart always -v ~/_docker_portainer:/certs -v portainer_data:/data portainer/portainer --ssl --sslcert /certs/portainer.crt --sslkey /certs/portainer.key\n$ curl localhost:9000\ncurl: (7) Failed to connect to localhost port 9000: Verbindungsaufbau abgelehnt\n$ docker container logs portainer\n2018/12/12 13:00:46 Templates already registered inside the database. Skipping template import.\n2018/12/12 13:00:46 Starting Portainer 1.20.0 on :9000\n$ docker ps -a\nCONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                   NAMES\n5cdeb4944047        portainer/portainer   \"/portainer --ssl --\u2026\"   4 minutes ago       Up 4 minutes        0.0.0.0:443->9000/tcp   portainer\nwhy i can\u00b4t login to portainer? \n. ",
    "kristoferlundgren": "@deviantony @doncicuto, portainer/portainer:pr1576 works as expected!\nPlease include this in the next release.\nThanx for a great product!\n. Thanks for the quick reply!\nAs you are well aware, multi-node data persistence in a docker swarm is not as straight forward as one would wish.\nI would appreciate if you looked at my other \"workaround\":\nFile: portainer-agent-stack.yml\n```\nversion: '3.2'\nservices:\n  portainer:\n    image: portainer/portainer\n    networks:\n      - portainer-network\n    ports:\n      - \"8080:9000\"\n    volumes:\n      - ./endpoints.json:/endpoints.json\n    command: # --data /tmp/data : Ephermeral data, intentionally lost on restart.\n      --data /tmp/data\n      --no-auth\n      --external-endpoints /endpoints.json\n      --tlsskipverify\n    environment:\n      LOG_LEVEL: debug\ndocker-socket:\n    image: alpine/socat:latest\n    networks:\n      - portainer-network\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    command:\n      tcp-listen:2375,fork,reuseaddr unix-connect:/var/run/docker.sock\n    deploy:\n      mode: global\nnetworks:\n  portainer-network:\n    driver: overlay\n```\nFile: endpoints.json\n[\n  {\n    \"Name\": \"docker-socket\",\n    \"URL\": \"tcp://tasks.docker-socket:2375\",\n    \"TLS\": false\n  }\n]\nStart stack with:\ndocker stack deploy -c portainer-agent-stack.yml --prune portainer\nNow, restarting Portainer with:\ndocker service update --force portainer_portainer\nPortainer restarts and successfully reconnects to the remote containers which expose /var/run/docker.sock on the private (secure) \"portainer-network\" network! \ud83d\udc4d \nAlthough, when running in a multi-node cluster. Looking at Portainer web -> Containers. The list of containers is not complete. It only lists one \"docker-socket\" container although \"docker-socket\" is successfully running on all nodes. \ud83d\udc4e \nIt seems Portainer does not resolve the DNS entry \"tasks.docker-socket\" to all it's IPs. To me it looks as if Portainer picks one IP and goes with that one. -bug?\nAlso, going through the hoops of creating a .json file (and separately managing that) could also be easier. Ex. Allow Portainer --host parameter to specify a non-tls entry.\nBR,\n/Kristofer. I might add that this will be deployed at customer sites, on private networks, not Internet exposed.\nManually restarting the agent service upon node failure requires documented procedures in case of node failure etc. Requiring a central/distributed storage backend for the /data dir is not a path I would like to go now since each site is different.\nThe installation should rather be a \"just-works\" deployment.\nI might go for the fallback, no-agent route:\n```\nversion: '3.2'\nservices:\n  portainer:\n    image: portainer/portainer\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - target: 9000\n        published: 8080\n        protocol: tcp\n        mode: host\n    command: # --data /tmp/data : Ephemeral data, intentionally lost on restart.\n      --data /tmp/data\n      --no-auth\n      --host unix:///var/run/docker.sock\n    environment:\n      LOG_LEVEL: debug\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\n```\n...where you connect to each host explicitly to manage the containers on that node in particular.\nPortainer is a fantastic product by the way!\n. Hi @deviantony, thanx for the feedback.\nI did not realize the resource aggregation was in the agent. I thought the agent was just a secured socat.\nI tried -H and --host to connect to a non-TLS endpoint but did not succeed. Noted now that --tlsskipverify implies TLS. Also --tlsskipverify is not documented: http://portainer.readthedocs.io/en/stable/configuration.html#available-flags\nI went with the no-agent, one Portainer per node deployment. It is good enough for now. Looking forward to the final solution!. I would advice against removing the --no-auth flag.\nFor example; As developers, we have many locked down private networks where we test various deployment scenarios.\nEven some customers where we deploy have a secured network environment where a no-auth deployment is feasible.\nAdding auth in certain environments adds complexity which usually results in \"password\" passwords and such.\nA suggestion: (ex. in combination with --no-auth)\nConsider adding a configurable source IP/network restriction.\nEx, Possibility to require source IPv4 network = 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16.\n(I.e. require private source IPv4 address, not routable on Internet.)\nIf X-Forwarded-For is present, it should be checked as well (https proxy).\n. @olljanat, SSO over OAuth with ex Github is not feasible when there is no Internet access. Many of our lab environments have limited/no external access.\nThink government, healthcare, fire/police, finance, telecom. All bigger businesses have very tight networking policies. Many would require a final deployment with security in mind but many have locked down environments in the backend that does not require it.\nGetting up and running with --no-auth is easy, no passing around the \"password\" password note. \nI'm not against SSO/RBAC/Logging, just not fond of removing --no-auth.. @olljanat In the proper config and environment, yes. You may have firewalls preventing access or creating a docker swarm overlay network without exposed ports, managed via ssh tunnel/proxies, binding exposed socket to localhost etc, etc.\n(I.e. there are other authentication mechanisms. Might be physical, network access or other)\nSecurity is complex, and there are many aspects to consider. Too many user credentials, and people tend to share them and write them down, is one aspect to consider.. ",
    "khelkun": "Hello @wo10378931 \nSorry to up this closed issue but did you find a way to workaround this error and remove the stack anyway?. ",
    "peterforeman": "I have the same problem, running Portainer 1.16.4. There is just 1 stack which I cannot remove, although \"docker stack ls\" does not list it. It looks like a '-' (dash) in the stack name is the culprit?. ",
    "wo10378931": "@khelkun \n@peterforeman \nI used potainer api to del stack\u3002\nForgive my bad English ~~ . @mateuszdrab \nmust be login ~  can use postman. ",
    "vajonam": "Inspect Before the re-create i.e using the \ndocker run -d -h sickrage --restart=always --name=sickrage -v /opt/docker_configs/sickrage/:/config -v /net:/net:shared -e TZ=America/Toronto -ePUID=1001 -e PGID=1001 -p 8081:10093 linuxserver/sickrage:latest\nto create container. \nhttps://pastebin.com/zmyniKQq\nHere after I do \"re-create\" in portainer. \nhttps://pastebin.com/sfExFXtm\nAs you can see under the /net volume the mode shared is missing. . Sorry forgot to mention that I am using \nportainer/portainer:1.15.5 \n. ",
    "yogeek": "So you propose the following alternatives :\n\"repository\": {\n    \"url\": \"https://github.com/portainer/templates\",\n    \"stackfile\": \"stacks/cockroachdb/docker-stack.yml\"\n  }\nAND/OR\n\"url\": \"http://localhost:8080/myfiles/stacks/docker-stack.yml\"\nAND/OR\n\"path\": \"/myfiles/stacks/docker-stack.yml\"\nAm I understand correctly ?\nIt makes sense and would add these new properties while keeping coherence with the current approach.\nIn this case, is the separation between \"url\" and \"stackfile\" still needed in the \"repository\" solution ? Have this separation been made in the first place in a specific purpose ?. Ok it seems indeed a good choice to be more flexible in the future version.\nFor the URL or PATH methods, I do not see any extra parameter for now but it may be easy for you to have a similar structure to parse in the different mode.\nThank you !\nPS : concerning the custom template file (on which I would have the same need to be able to point to a local template file instead of a server url), I saw a mention of a discussion to deprecate/not-deprecate the --template option but I can't find this dicsussion. Is it possible to have a link please ?\nPPS : in the same idea, the 'logo' field of a container or stack template is also an URL... Would it be possible to choose to grab it from a local path as well ? Maybe another PR ? The whole idea here is being able to benefit from Portainer template in an local environment without internet access by delivering all assets (logos, stack file, template files...) locally before launching Portainer. Does it make sense ?\n. Thanks @boissierflorian ! . I used the CLI direclty on the nodes for the time being but I will check with the \"-H\" options if it can helps. \nConcerning bash, yes I am sure it is in the image (the docker exec works with the bash command)\nFor the developer tools, I will send you the answer as soon as I can\nThanks for the help ! . Just tried the latest version this morning (1.16.3) : still having the same issue.\nHowever, some new info after some additional tests :\nWith Portainer running on my local host and managing remote Swarm nodes endpoints :\n- Container console on a container on remote manager endpoint : Failure no such exec\n- Container console on a container on any remote worker endpoint : Failure\nrpc error: code = 2 desc = containerd: process not found for container\nWith Portainer running on remote hosts managing local node endpoint(either a manager or a worker) :\n-  Container console on a local container : No error message but no console displayed\n. @deviantony Here is the console message in chrome dev tools when I hit \"Connect\" button on a container running on the manager node :\n\n\nwhen Portainer is running on my local host (and the gui displaying the error info box) :\napp.0c4b0cd0.js:3 POST http://localhost/portainer/api/endpoints/2/docker/exec/4c0d9bb3ee811f24d076f89c8707da1b6540bb8eaa4a5f7d7a17f26f77bb4410/resize?h=30&w=190 404 (Not Found)\n\n\nwhen Portainer is running (exposed on 8015 port) on the manager node (and the gui not displaying any error) : \napp.eb337e10.js:46 WebSocket connection to 'ws://XXX.XXX.XXX.XXX:8015/api/websocket/exec?id=4df5b8c0923b3067a4a70d827fb6f667cf178503196ca2444fc7292f5ea2ee49&endpointId=1' failed: Error during WebSocket handshake: net::ERR_CONNECTION_RESET\nIn the last message, the IP (replaced here by XXX.XXX.XXX.XXX) is the external IP of the manager (the same IP I use to connect to Portainer web page) . @cmsalmeida I do not understand your answer : the issue is fixed if you access portainer on 127.0.0.1 to manage a remote docker daemon ? If so, this does not fix the issue I have : whatever IP I use to access Portainer (localhost, 127.0.0.1...), I still cannot launch a console on a container of a remote environment\napp.0c4b0cd0.js:3 POST http://127.0.0.1/portainer/api/endpoints/2/docker/exec/25d893ac3e3db6284200771b02cf5e4b611dd25ccb35ab4d3cfcad50b3d3b620/resize?h=30&w=190 404 (Not Found). @cmsalmeida ok so it does not seem to be the same issue as mine... same result, but different cause. But maybe it will help portainer guys to investigate ? ^^. @deviantony Just had the same error on \"play-with-docker\". Steps to reproduce :\n\n\ngo to http://play-with-docker.com\n\nclick on the \"wrench\" icon to create a 5 nodes swarm cluster\non the manager1, deploy portainer : \ndocker run -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer\non the manager1, run a container :\ndocker run -p 8080:80 nginx\ngot to portainer by clicking the \"9000\" link in PWD\nGo to \"Containers\" and try to connect into the previously started container\nThe following error is displayed :\n\n\nThe chrome debugger shows the websocket errors. . @deviantony indeed, I just tested at home and no error. Is it possible that websocket are blocked when I am at work ? In any case, it does not seem to be the same problem as the one I raised originally in this issue. . ",
    "Marc3001": "+1 on this feature as I have an API generating dynamic docker-compose files and I'd be happy to bind portainer on it using url property in stack template definition.. +1. ",
    "ashmckenzie": "I'd also love this feature!  @deviantony, what is your current thinking in terms of how it would look from a UI perspective?  I'm happy to put up a PR!. ",
    "timrosskamp": "Would it maybe a good idea to remap the tap button, so that its inserting two spaces instead of a tab?\nThat way future confusion among beginners could be avoided and it's a better user experience to everyone.. ",
    "chrisvanderpennen": "Hey @deviantony, your PR fixes the connection issue.  I have an instance of portainer:pr1586 happily managing the Windows swarm node hosting it.  Thanks!\nThere's a few routes that still make the same request and pop up a toast of:\n\nFailure\nUnable to retrieve plugins\n\n\nactions/create/network\nactions/create/service\nactions/create/volume\n\nBut they appear to work fine despite the toast.  Would you like me to file a separate report for that?. Looks good. You're welcome, thanks for making a great tool :). ",
    "aobasher": "also we will love to have 2FA-methods as it is great mechanism for improving the security \nwondering if somebody has a start working on that if no I can work on the following  : \n\n\nSupport TOTP first. It works with many phone apps and with a lib it is relatively easy to implement\n\n\nAdd the option to enabled Google Authenticator.\n\n\nRecovery codes. Show them once when the mode is activated and urge users to write them down and store in a save place. Users can then login with one of them.. \n\n",
    "RaymondMouthaan": "Is there an option to add the parameter --resolve-image never to the docker stack deploy command?\nCurrently I use the command line to launch docker stack deploy like this:\n$docker stack deploy chronograf --resolve-image never --compose-file docker-compose-test.yml\nWhich makes it an external stack within Portainer.. @deviantony thanks for the quick answer \ud83d\udc4d , how do I open a feature request? . facing the same issue here, requested for assistance on glitter. @deviantony responded to check later today :). Thanks for your quick response! . ",
    "mrots": "I struggled for the past two hours with getting portainer to work on a fresh install of Cent7/Docker 1.12, pr1594 worked like a champ!  Thought I was losing my mind!. Thank you for the fix, @deviantony!. ",
    "mvillarejo": "this will be a great addition for rpi swarm clusters.. this will be a great addition for rpi swarm clusters.. thanks for the quick response. I'm deploying this stack from web:\n```\nversion: '3.2'\nservices:\n  agent:\n    image: portainer/agent:linux-arm64\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.role == worker]\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - target: 9001\n        published: 9001\n        protocol: tcp\n        mode: host\n    networks:\n      - portainer_agent\nnetworks:\n  portainer_agent:\n    driver: overlay\n. thanks for the quick response. I'm deploying this stack from web:\nversion: '3.2'\nservices:\n  agent:\n    image: portainer/agent:linux-arm64\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.role == worker]\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    ports:\n      - target: 9001\n        published: 9001\n        protocol: tcp\n        mode: host\n    networks:\n      - portainer_agent\nnetworks:\n  portainer_agent:\n    driver: overlay\n```. right, that was it.\nthis can be closed. Thanks. ",
    "eskan": "+1. ",
    "maocorte": "Hi, I have tried a solution like the image posted below.\n\nThe idea is to check service status using task background color and status label and use the border color to identify the service.\nThe function used to get the color for service is the same used into docker-swarm-visualizer, who use the service id.\nCould this example be a good solution for this feature?. Hi, looking the docker reference also other events not related to containers are missing (for example remove for networks and load, import, push and save for images), should be updated also them?\nAlso other sections (like service, nodes, secrets, etc..) are not actually managed by portainer, should them be added?\nThank you.. PR done, thank you for the feedback. Done, sorry for my forgetfulness!!!. ",
    "superphly": "It'd be nice to be able to specify a volume name to use (if present) or create (if not present) in application templates.. It'd be nice to be able to specify a volume name to use (if present) or create (if not present) in application templates.. What's the status of this? This is a fairly important feature for a deployment I'm working on.. What's the status of this? This is a fairly important feature for a deployment I'm working on.. That makes sense. I can appreciate that. Having the ability to add \"Portainer - XXX\" would be nice.. That makes sense. I can appreciate that. Having the ability to add \"Portainer - XXX\" would be nice.. ",
    "sanderd17": "Any progress on this? Just having a third button \"New Volume\" between \"Volume\" and \"Bind\" would probably do the trick. \nAnd warnings are optional IMO, docker also doesn't warn. And currently, as you have to create a new volume in advance, you also don't get a warning if you select a different volume from the list.. ",
    "nucleusv": "This occurs when only -ssl flags are enabled, docker-compose.yml:\n```yaml\nversion: '2.1'\nservices:\n  portainer:\n    image: 'portainer/portainer'\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/portainer/data:/data\n      - ./local-certs:/certs\n    entrypoint: /portainer  --ssl --sslcert /certs/portainer.crt --sslkey /certs/portainer.key --admin-password '${ENCR_PWD}'\n````\n. ",
    "Sigri44": "I use Debian 9.3, docker latest, portainer latest : \nroot@docker ~ # docker logs portainer\n2018/01/28 20:17:58 Migrating database from version 6 to 7.\n2018/01/28 20:17:58 Starting Portainer 1.16.1 on :9000\n2018/01/29 12:56:06 http: multiple response.WriteHeader calls\n2018/01/29 12:58:53 http: multiple response.WriteHeader calls\n2018/01/29 18:17:32 Starting Portainer 1.16.1 on :9000\n2018/01/29 18:32:12 Starting Portainer 1.16.1 on :9000\n2018/01/29 20:48:26 Starting Portainer 1.16.1 on :9000\nI don't see the new container, but today i have again a new container..\n\nPossibility it create after a reboot ?. To start docker, crontab : \n```\nLancement de Docker UI au boot\n@reboot docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer &\n```. So, i have delete the line at crontab, and launch this : \ndocker run -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer\nFor this moment, all is ok, i test for the next days.\nSee U soon. \nThx. ",
    "alues": "Same error occurred.\nI retag portainer/portainer:latest as portainer:latest. @deviantony \nEnv \n\nCentos 7 Docker\nCentos 7 with gnome desktop\nbash\nsudo docker volume create portainer_data\nsudo docker run -d --privileged --name \"portainer\" -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer:latest\nSame issue. sth wrong with installation?. hello world work fine. kk, sometime later I will resetup it. \nthx a lot, nice jobs. I had problem solved by reinstall the whole system. \nthx for ur reply.\nit maybe some odd problem in old system.. \n",
    "akaiserg": "Hi, I don't know  if this help. We had gotten the same message and   it turned out that I had  a problem with the  nginx's websocket module, we reinstalled the module and now it works like a  charm.. ",
    "trosemann": "I still think that portainer needs the possibility to use the docker save/load functionality since portainer often is the only interface to docker on a hostsystem as described in #935. And the reason that portainer is the only interface to docker ist most likely security. You don't want to give customers access to your host via SSH. And for security reasons it won't be  possible to bind the hosts docker socket to a container because if bind is allowed, you basically would have full access to the system. So the bind option will be blocked and you won't have the possibility to use docker load. That's why we need save/load option in portainer. This feature is quite important. Our experience is that companies create images for costumers and only provide tar balls. They don't want to upload their images to any repository.. This is not exactly a duplicate of #597. I was talking about a field to launch a full command. Not only options for the container creation. #597 is just about optional flags.. ",
    "ajeffco": "I'm having the exact same problem.  However portainer starts for me, I am able to log into the web interface and use it.  On the web interface, the version is shown as 1.16.1.  I do not know (yet) how to get version info from docker CLI.  \nI can provide whatever information you might need for this.. I followed the steps provided by pvdspoel22 and am no longer getting the error.  Thank you pvdspoel22.. ",
    "pvdspoel22": "Hi @deviantony \nVersion 1.16.1 is what's shown in the portainer GUI. When I inspect the container I do see the healthcheck configured still for that particular version though. I've attached a screenshot to clarify what I'm seeing.\n\n. docker logs portainer\n2018/01/24 07:23:26 Starting Portainer 1.16.1 on :9000\n2018/01/30 13:29:31 Starting Portainer 1.16.1 on :9000\n2018/01/31 07:49:26 Starting Portainer 1.16.1 on :9000\n. \n\n. To make it even weirder. I have the same situation on my Raspberry Pi at home as I have on my laptop.\nWhile my collegue, who updated from 1.16.0 to 1.16.1 just now to see if he got the same, does not have an issue at all.\nPi details\n$ docker ps\nCONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS                  PORTS                    NAMES\n5b7a18b541c1        lsioarmhf/headphones:latest     \"/init\"                  4 days ago          Up 4 days               0.0.0.0:8181->8181/tcp   headphones\nacb07ec0f0a6        lsioarmhf/duckdns:latest        \"/init\"                  4 days ago          Up 4 days                                        DuckDNS\n85a139818ce9        lsioarmhf/radarr:latest         \"/init\"                  4 days ago          Up 4 days               0.0.0.0:7878->7878/tcp   radarr\ndd6374a50fd7        lsioarmhf/sonarr:latest         \"/init\"                  4 days ago          Up 4 days               0.0.0.0:8989->8989/tcp   sonarr\n9ccf0eddd0c7        portainer/portainer:latest      \"/portainer\"             7 days ago          Up 7 days (unhealthy)   0.0.0.0:9000->9000/tcp   portainer\nab38315cbc07        v2tec/watchtower:armhf-latest   \"/watchtower -i 86400\"   3 weeks ago         Up 3 weeks                                       watchtower\n$ docker logs portainer\n2018/01/24 16:39:13 Starting Portainer 1.16.1 on :9000\n$ docker inspect portainer\n[\n    {\n        \"Id\": \"9ccf0eddd0c74e1b451a2e4e038e6a7433e0abd66464be594e51ea09b3e13536\",\n        \"Created\": \"2018-01-24T16:39:10.612579657Z\",\n        \"Path\": \"/portainer\",\n        \"Args\": [],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 5518,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2018-01-24T16:39:12.834980978Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\",\n            \"Health\": {\n                \"Status\": \"unhealthy\",\n                \"FailingStreak\": 11212,\n                \"Log\": [\n                    {\n                        \"Start\": \"2018-02-01T10:31:03.480380114+01:00\",\n                        \"End\": \"2018-02-01T10:31:03.894164605+01:00\",\n                        \"ExitCode\": 1,\n                        \"Output\": \"portainer: error: unknown short flag '-c', try --help\\n\"\n                    },\n                    {\n                        \"Start\": \"2018-02-01T10:31:33.894613707+01:00\",\n                        \"End\": \"2018-02-01T10:31:34.241919264+01:00\",\n                        \"ExitCode\": 1,\n                        \"Output\": \"portainer: error: unknown short flag '-c', try --help\\n\"\n                    },\n                    {\n                        \"Start\": \"2018-02-01T10:32:04.242425301+01:00\",\n                        \"End\": \"2018-02-01T10:32:04.587744764+01:00\",\n                        \"ExitCode\": 1,\n                        \"Output\": \"portainer: error: unknown short flag '-c', try --help\\n\"\n                    },\n                    {\n                        \"Start\": \"2018-02-01T10:32:34.588155237+01:00\",\n                        \"End\": \"2018-02-01T10:32:34.933720169+01:00\",\n                        \"ExitCode\": 1,\n                        \"Output\": \"portainer: error: unknown short flag '-c', try --help\\n\"\n                    },\n                    {\n                        \"Start\": \"2018-02-01T10:33:04.934118826+01:00\",\n                        \"End\": \"2018-02-01T10:33:05.27560459+01:00\",\n                        \"ExitCode\": 1,\n                        \"Output\": \"portainer: error: unknown short flag '-c', try --help\\n\"\n                    }\n                ]\n            }\n        },\n        \"Image\": \"sha256:595c367e0941bd7c21e399504cad0508c57ca50ae871ebab8b539473ef45d04b\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/9ccf0eddd0c74e1b451a2e4e038e6a7433e0abd66464be594e51ea09b3e13536/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/9ccf0eddd0c74e1b451a2e4e038e6a7433e0abd66464be594e51ea09b3e13536/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/9ccf0eddd0c74e1b451a2e4e038e6a7433e0abd66464be594e51ea09b3e13536/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/9ccf0eddd0c74e1b451a2e4e038e6a7433e0abd66464be594e51ea09b3e13536/9ccf0eddd0c74e1b451a2e4e038e6a7433e0abd66464be594e51ea09b3e13536-json.log\",\n        \"Name\": \"/portainer\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": [\n                \"/mnt/iscsi/docker/portainer:/data\",\n                \"/var/run/docker.sock:/var/run/docker.sock\"\n            ],\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {\n                \"9000/tcp\": [\n                    {\n                        \"HostIp\": \"\",\n                        \"HostPort\": \"9000\"\n                    }\n                ]\n            },\n            \"RestartPolicy\": {\n                \"Name\": \"unless-stopped\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": null,\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DiskQuota\": 0,\n            \"KernelMemory\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": -1,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": 0,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/aff085f6b5322079ed1e7eb7c5bd3e543063812979811613e7bfa4895f3b3a94-init/diff:/var/lib/docker/overlay2/0d402c4a6fca902eceba3ba521ed39a1db890ef10b65870f09c8e42e25f9a17e/diff:/var/lib/docker/overlay2/a6d34f72024a92fad6fdc01a7e36377fa86e7ec176a5d932f67cdbe52055a8b7/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/aff085f6b5322079ed1e7eb7c5bd3e543063812979811613e7bfa4895f3b3a94/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/aff085f6b5322079ed1e7eb7c5bd3e543063812979811613e7bfa4895f3b3a94/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/aff085f6b5322079ed1e7eb7c5bd3e543063812979811613e7bfa4895f3b3a94/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/mnt/iscsi/docker/portainer\",\n                \"Destination\": \"/data\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            },\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/var/run/docker.sock\",\n                \"Destination\": \"/var/run/docker.sock\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            }\n        ],\n        \"Config\": {\n            \"Hostname\": \"3ce273f7a4c0\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"9000/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"TZ=Europe/Amsterdam\",\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": null,\n            \"Healthcheck\": {\n                \"Test\": [\n                    \"CMD\",\n                    \"/portainer\",\n                    \"-c\"\n                ],\n                \"Interval\": 30000000000,\n                \"Timeout\": 5000000000,\n                \"Retries\": 3\n            },\n            \"Image\": \"portainer/portainer:latest\",\n            \"Volumes\": {\n                \"/data\": {}\n            },\n            \"WorkingDir\": \"/\",\n            \"Entrypoint\": [\n                \"/portainer\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {}\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"396a6a150381a9f348f1fd90075da9c85ce832972602515a6141740d9c1b7618\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"9000/tcp\": [\n                    {\n                        \"HostIp\": \"0.0.0.0\",\n                        \"HostPort\": \"9000\"\n                    }\n                ]\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/396a6a150381\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"9b9c705991ce6860490416a4bd6e7282c73d04a5e1717c43bc7be72df0e9a7cf\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.5\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:05\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"718a4213ea1046363c51ad9d5f0a55d213ecf9b76de06a5cb4b5b0b5bc3130e8\",\n                    \"EndpointID\": \"9b9c705991ce6860490416a4bd6e7282c73d04a5e1717c43bc7be72df0e9a7cf\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.5\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:05\"\n                }\n            }\n        }\n    }\n]\n. I've done the following on my Pi:\n$ docker stop portainer\nportainer\n$ docker rm portainer\nportainer\n$ docker image list\nREPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE\nlsioarmhf/sonarr           latest              8ca9e695a084        5 days ago          397MB\nlsioarmhf/radarr           latest              2770c6c11a4c        5 days ago          399MB\nlsioarmhf/headphones       latest              39572bd934b7        5 days ago          176MB\nlsioarmhf/duckdns          latest              33657ada75cb        5 days ago          22.9MB\nportainer/portainer        latest              595c367e0941        8 days ago          28.9MB\nv2tec/watchtower           armhf-latest        e708d89cb5a1        3 weeks ago         7.52MB\nlsioarmhf/domoticz         latest              22ab74662005        9 months ago        121MB\nlsioarmhf/home-assistant   latest              f19053f23b2d        13 months ago       296MB\n$ docker rmi 595c367e0941\nUntagged: portainer/portainer:latest\nUntagged: portainer/portainer@sha256:232742dcb04faeb109f1086241f290cb89ad4c0576e75197e902ca6e3bf3a9fc\nDeleted: sha256:595c367e0941bd7c21e399504cad0508c57ca50ae871ebab8b539473ef45d04b\nDeleted: sha256:519d7908181fa648197852c724cb183a94f3572470fe24e70fd1234dd7eae118\nDeleted: sha256:dd4969f97241b9aefe2a70f560ce399ee9fa0354301c9aef841082ad52161ec5\n$ docker image list\nREPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE\nlsioarmhf/sonarr           latest              8ca9e695a084        5 days ago          397MB\nlsioarmhf/radarr           latest              2770c6c11a4c        5 days ago          399MB\nlsioarmhf/headphones       latest              39572bd934b7        5 days ago          176MB\nlsioarmhf/duckdns          latest              33657ada75cb        5 days ago          22.9MB\nv2tec/watchtower           armhf-latest        e708d89cb5a1        3 weeks ago         7.52MB\nlsioarmhf/domoticz         latest              22ab74662005        9 months ago        121MB\nlsioarmhf/home-assistant   latest              f19053f23b2d        13 months ago       296MB\n$ docker run ...\nUnable to find image 'portainer/portainer:latest' locally\nlatest: Pulling from portainer/portainer\nd1e017099d17: Pull complete \necc795890715: Pull complete \nDigest: sha256:232742dcb04faeb109f1086241f290cb89ad4c0576e75197e902ca6e3bf3a9fc\nStatus: Downloaded newer image for portainer/portainer:latest\nae04b314955b8d443556180b9f833e01b3406329769a6d0dd151a4da64a04c11\n$ docker ps\nCONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                    NAMES\nae04b314955b        portainer/portainer             \"/portainer\"             7 minutes ago       Up 7 minutes        0.0.0.0:9000->9000/tcp   portainer\n5b7a18b541c1        lsioarmhf/headphones:latest     \"/init\"                  4 days ago          Up 4 days           0.0.0.0:8181->8181/tcp   headphones\nacb07ec0f0a6        lsioarmhf/duckdns:latest        \"/init\"                  4 days ago          Up 4 days                                    DuckDNS\n85a139818ce9        lsioarmhf/radarr:latest         \"/init\"                  4 days ago          Up 4 days           0.0.0.0:7878->7878/tcp   radarr\ndd6374a50fd7        lsioarmhf/sonarr:latest         \"/init\"                  4 days ago          Up 4 days           0.0.0.0:8989->8989/tcp   sonarr\nab38315cbc07        v2tec/watchtower:armhf-latest   \"/watchtower -i 86400\"   3 weeks ago         Up 3 weeks                                   watchtower\n$ docker logs portainer\n2018/02/01 09:54:26 Starting Portainer 1.16.1 on :9000\n$ docker inspect portainer\n[\n    {\n        \"Id\": \"ae04b314955b8d443556180b9f833e01b3406329769a6d0dd151a4da64a04c11\",\n        \"Created\": \"2018-02-01T09:54:24.213794133Z\",\n        \"Path\": \"/portainer\",\n        \"Args\": [],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 6237,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2018-02-01T09:54:26.17178088Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:595c367e0941bd7c21e399504cad0508c57ca50ae871ebab8b539473ef45d04b\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/ae04b314955b8d443556180b9f833e01b3406329769a6d0dd151a4da64a04c11/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/ae04b314955b8d443556180b9f833e01b3406329769a6d0dd151a4da64a04c11/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/ae04b314955b8d443556180b9f833e01b3406329769a6d0dd151a4da64a04c11/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/ae04b314955b8d443556180b9f833e01b3406329769a6d0dd151a4da64a04c11/ae04b314955b8d443556180b9f833e01b3406329769a6d0dd151a4da64a04c11-json.log\",\n        \"Name\": \"/portainer\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": [\n                \"/var/run/docker.sock:/var/run/docker.sock\",\n                \"/mnt/iscsi/docker/portainer:/data\"\n            ],\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {\n                \"9000/tcp\": [\n                    {\n                        \"HostIp\": \"\",\n                        \"HostPort\": \"9000\"\n                    }\n                ]\n            },\n            \"RestartPolicy\": {\n                \"Name\": \"unless-stopped\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": null,\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DiskQuota\": 0,\n            \"KernelMemory\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": -1,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": 0,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/51bad377b6827646d52ef636cc7822cda3495cbe664503a55ee5f5a841c20fc0-init/diff:/var/lib/docker/overlay2/913a33b8197fd673d043c405d36abae9f3feb673e5e05166fdf3fec68f084159/diff:/var/lib/docker/overlay2/e8de3dac2cde1339d18f6374b16bad8c246f2143c0b738c8067fbaf224f0ba97/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/51bad377b6827646d52ef636cc7822cda3495cbe664503a55ee5f5a841c20fc0/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/51bad377b6827646d52ef636cc7822cda3495cbe664503a55ee5f5a841c20fc0/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/51bad377b6827646d52ef636cc7822cda3495cbe664503a55ee5f5a841c20fc0/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/var/run/docker.sock\",\n                \"Destination\": \"/var/run/docker.sock\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            },\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/mnt/iscsi/docker/portainer\",\n                \"Destination\": \"/data\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            }\n        ],\n        \"Config\": {\n            \"Hostname\": \"ae04b314955b\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"9000/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"TZ=Europe/Amsterdam\",\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n            ],\n            \"Cmd\": null,\n            \"Image\": \"portainer/portainer\",\n            \"Volumes\": {\n                \"/data\": {}\n            },\n            \"WorkingDir\": \"/\",\n            \"Entrypoint\": [\n                \"/portainer\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {}\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"f0be726e8b6060a28e2f01a2f6c8b52a17eebbb5dff76b73d3fa34d425dec5ea\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"9000/tcp\": [\n                    {\n                        \"HostIp\": \"0.0.0.0\",\n                        \"HostPort\": \"9000\"\n                    }\n                ]\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/f0be726e8b60\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"7175518398f7c547eceb50329f9420c735589ce7edf6af24d870a62f8cda8a74\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.5\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:05\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"718a4213ea1046363c51ad9d5f0a55d213ecf9b76de06a5cb4b5b0b5bc3130e8\",\n                    \"EndpointID\": \"7175518398f7c547eceb50329f9420c735589ce7edf6af24d870a62f8cda8a74\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.5\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:05\"\n                }\n            }\n        }\n    }\n]\nAnd now the Healthcheck is gone and the Portainer container remains in healthy state.\nLooks like something went wrong initially with fully pulling the latest image or caching of the various layers or something ?\nI'm going to try the same now on my laptop.. Success on my laptop now as well. Re-pulling the latest portainer image again solved the issue.. The previous version was 1.16.0. I've got Watchtower installed as a container and that checks once a day for newer versions of all containers and updates them. So basically once a new version of Portainer is released, within 24 hours I've got it automatically running ;-). ",
    "comccoy": "I suddenly noticed I had this issue and the problem, I believe, was somehow 2 images for portainer were downloaded. I made sure both were removed and started a fresh container up and the error went away.\nREPOSITORY                TAG                 IMAGE ID            CREATED             SIZE\nportainer/portainer       latest              f6dd93561a5f        5 hours ago         35MB\nportainer/portainer       <none>              a8f2aeb34cf6        3 weeks ago         34MB. I suddenly noticed I had this issue and the problem, I believe, was somehow 2 images for portainer were downloaded. I made sure both were removed and started a fresh container up and the error went away.\nREPOSITORY                TAG                 IMAGE ID            CREATED             SIZE\nportainer/portainer       latest              f6dd93561a5f        5 hours ago         35MB\nportainer/portainer       <none>              a8f2aeb34cf6        3 weeks ago         34MB. ",
    "ns-cweber": "Apologies if this is the wrong place to ask this, but it seems related. How can I manage other nodes in my swarm through Portainer? Do I need to set up other endpoints? If so, the documentation for doing that seems sparse (https://portainer.readthedocs.io/en/stable/external_endpoints.html only tells me about the portainer config, but from what I'm reading, I presumably need to configure each node to listen over TCP?). I'm happy to file a new ticket or ask elsewhere.. ",
    "orubel": "I second this. Definitely need to see tokens associated with the swarm. I can pull up token via a command of:\ndocker swarm join-token [OPTIONS] (worker|manager)\nSo this should be something easy to display with the nodes (or at least with the manager node) so we can see the associated token.. JoinTokens look to be there.\n. Well you can set limit to the web UI through a variety of ways internally. I would say it's not your responsibility to secure the UI but the administrators pf the web server.. ",
    "remy-tiitre": "I didn't mention it in my original post, but my main idea for the post was actually that can I somehow turn on debug log or anything like that. With ldapsearch I can use -d 1 for example. Right now I just don't know what the exact problem is, I suspect that it fails with creating the TLS connection, but can't be sure. I don't even know if it really tries to use te CA certificate I provide.. Mika56 you use CentOS 7 as host?. It should probably be configurable parameter from command line or environment variable.. Bummer, we can't use public repos. Everything has to be cached through internal repo at least. Hope the support will be added soon.. ",
    "Mika56": "Works fine for me with Portainer 1.16.2.\nI'm using port 636 and TLS, did not set skip verification of server certificate and uploaded our root CA (in Base64 format !). We're using Debian as a host, but we're using Portainer under Docker so it should change anything. ",
    "danielvS373": "I had a similar Issue. It turned out that the TLS Connection failed because of the LDAP Windows Server Version (2012 R2). \nYou have to set a max TLS Version in a config when you have this Windows Server Version.\nTo fix this I changed one file in the portainer source code:\n\nportainer-1.19.2 -> api -> crypto -> tls.go\n\nAfter I changed the config it worked.\nBefore changes:\n\n// CreateTLSConfigurationFromDisk initializes a tls.Config using a CA certificate, a certificate and a key\n// loaded from disk.\nfunc CreateTLSConfigurationFromDisk(caCertPath, certPath, keyPath string, skipServerVerification bool) (*tls.Config, error) {\n    config := &tls.Config{}\n    config.InsecureSkipVerify = skipServerVerification  \n\nAfter changes: \n\n// CreateTLSConfigurationFromDisk initializes a tls.Config using a CA certificate, a certificate and a key\n// loaded from disk.\nfunc CreateTLSConfigurationFromDisk(caCertPath, certPath, keyPath string, skipServerVerification bool) (*tls.Config, error) {\n    config := &tls.Config{\n        MaxVersion: tls.VersionTLS11,\n    }\n    config.InsecureSkipVerify = skipServerVerification  \n\nThis maybe no sustainable solution but it worked for me in the first place.. It didn't work. Logs that were displayed:\n\n2018/10/29 08:42:31 http error: Unable to connect to LDAP server (err=LDAP Result Code 200 \"Network Error\": read tcp 172.18.0.3:39994->172.17.1.29:636: read: connection reset by peer) (code=500)\n\nAs mentioned you have to set the Max TLS Version. A connection with this Windows Server Version only works when the max version is set to TLS1.1. The default value that go is using when this is not set, is TLS1.2.. ",
    "himred": "Yes clearly, i missed that feature.\nThanks for the fast answer.\n. I can confirm I got this issue too with 1.17.1-dev in standalone mode (not swarm)\n. @rlogiacco if you force the volume name in the docker-compose file with\nvolumes:\n    XXX:\n       name: XXX\nThen it works as expected.\nIt's the easiest workaround I found until they fix the bug.. ",
    "Jannik-Lappe": "Hi @deviantony \nThanks for your reply.\nShort description of my test arrangement:\n- complete removal after a test (Containers, network, volumes,...)\n- different project names for each test (t1_, t2_,...)\n- two different test systems\n- new private sessions on different browsers each test\nDuring my tests without a traefik-password I had no troubles accessing portainer with the admin-password.\nSometimes during my test, I additionally started a blank webserver to test the traefik-password. There was no problem accessing the webserver with the preset password.. Thank you for your answer.\nThen I need to look for another way to secure my server.. ",
    "isuftin": "@deviantony That's an interesting solution. I'm hoping I can get that working with Portainer as part of a Docker swarm. So I played around with this in Docker Swarm. I have NGINX running as a reverse proxy as a service in Docker Swarm. I also have Portainer running as a service in Docker Swarm. The setup in a Swarm configuration needs a bit of tweaking. I'll explain:\nFirst I need to create the swarm using Docker Machine (skip to SERVICE DEPLOYING if you don't care about this):\nfor i in manager worker1 worker2 worker3; do docker-machine create -d virtualbox --engine-storage-driver overlay2 --virtualbox-memory \"1024\" --virtualbox-hostonly-nictype Am79C973 --virtualbox-cpu-count \"1\" $i;done\nThis creates four machines. A manager machine and three workers. Each has a gig of RAM, uses one CPU and has a specific NIC type that works best on a mac. Also they all use the overlay2 storage driver.\nThen I create a swarm:\ndocker-machine ssh manager docker init swarm --advertise-addr eth1\nBased on the output of that, I join the workers to the swarm:\nfor i in worker1 worker2 worker3; do docker-machine ssh $i docker swarm join --token SWMTKN-1-... 192.168.99.104:2377;done\nI then set my bash to work with the manager machine:\neval $(docker-machine env manager)\nNow that I have a swarm going, I can set up my services.\n---- SERVICE DEPLOYING ----\nFirst, the two services need to be able to attach to a common overlay network so that they may use the same swarm DNS resolver (so that NGINX may proxy to a network alias). Before I launched either container, I created a new overlay network in the swarm.\ndocker network create --driver=overlay general\nI then create the NGINX service using the following compose configuration named nginx-compose.yml:\n```\n\nversion: '3.4'\nnetworks:\n  general:\n    external: true\nconfigs:\n  nginx_config:\n    file: ./nginx.conf\nservices:\n  nginx-proxy:\n    image: nginx\n    ports:\n      - '80:80'\n    command: [nginx-debug, '-g', 'daemon off;']\n    configs:\n      - source: nginx_config\n        target: /etc/nginx/nginx.conf\n    networks:\n      general:\n        aliases:\n          - nginx\n```\nThe nginx.conf file looks like this:\n```\nevents {\n  worker_connections  4096;  ## Default: 1024\n}\nhttp {\nproxy_redirect          off;\n  proxy_set_header        Host            $host;\n  proxy_set_header        X-Real-IP       $remote_addr;\n  proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n  client_max_body_size    10m;\n  client_body_buffer_size 128k;\n  proxy_connect_timeout   90;\n  proxy_send_timeout      90;\n  proxy_read_timeout      90;\n  proxy_buffers           32 4k;\nresolver 127.0.0.11 valid=5s ipv6=off;\nserver { # simple reverse-proxy\n    listen       80;\n    server_name  nginx;\nlocation /portainer/ {\n  set $upstream_endpoint http://portainer:9000;\n  rewrite ^/portainer/(.*) /$1 break;\n  proxy_http_version 1.1;\n  proxy_set_header Connection \"\";\n  proxy_pass $upstream_endpoint;\n}\n\nlocation /portainer/api/websocket/ {\n  set $upstream_endpoint http://portainer:9000/api/websocket;\n  rewrite ^/portainer/api/websocket/(.*) /$1 break;\n  proxy_set_header Upgrade $http_upgrade;\n  proxy_set_header Connection \"upgrade\";\n  proxy_http_version 1.1;\n  proxy_pass $upstream_endpoint;\n}\n\n}\n}\n```\nI then launch the NGINX service via docker stack deploy -c nginx-compose.yml nginx\nMy Portainer compose file looks like the following (docker-compose.yml):\n```\nversion: '3.4'\nnetworks:\n  general:\n    external: true\nservices:\n  portainer:\n    image: portainer/portainer:1.16.1\n    ports:\n      - '9000:9000'\n    networks:\n      general:\n        aliases:\n          - portainer\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    entrypoint: /portainer -H unix:///var/run/docker.sock\n    deploy:\n      replicas: 1\n      labels:\n        swarm.service.label.service.name: \"portainer\"\n      placement:\n        constraints:\n          - node.role == manager\n```\nI launch this via docker stack deploy -c docker-compose.yml portainer\nNow if I go to the IP of any my machines at http://swarm-node-address/portainer, I get the admin init page for Portainer.\n\nI can also remove the Portainer service and redeploy it and NGINX picks up the new service with no issue. The pain I was having was that NGINX was only querying the Docker Swarm DNS resolver on startup, but not ever again. So if I redeployed the Portainer service, NGINX would forever give me a 502 Bad Gateway error. \nNow, I know almost nothing about NGINX, but through reading a few blogs, it looks like the magic is to:\n\nAdd a resolver directive to point to the static IP of the Swarm DNS resolver. It is always 127.0.0.11. Set a TTL for 5s or some short length of time.\nIn the location directives, use variables for the server name. That's the actual magic for dynamic DNS resolution\nThe trick when using variables (as explained in the above link) is to also use rewrite directives or else the proxy proxies to weird URIs\n\nVoila. @mister2d In our case, this would not work since it's running in a swarm along with other services. Each service requires a unique port and because it's in AWS behind an ELB, this complicates things a bit with security groups. While creating a new domain specifically for that service is an option for a solution, it is not an option for us. ",
    "danielfaust": "I would like to reopen this issue. The tile matches, but the reasoning differs: When I mount a part of my filesystem to hold the user data (-v ~/somepath/portainer:/data \\), then that filesystem is getting written into as root. If I now pull backups also of this directory via rsync from other machines, it won't copy that folder unless I do something to elevate rsync's privileges, or chown the files before backing up.. I am not sure if the overhead generated by the links should be a cause of concern.\nWhat I meant was to wrap the generated text of these two lines\nhttps://github.com/portainer/portainer/blob/3a3577754ef6ab9e821fa57823f6714ace11bd83/app/portainer/components/endpoint-list/endpoint-item/endpointItem.html#L47\nhttps://github.com/portainer/portainer/blob/3a3577754ef6ab9e821fa57823f6714ace11bd83/app/portainer/components/endpoint-list/endpoint-item/endpointItem.html#L58\nin a span containing a\nng-click=\"$ctrl.onSelect($ctrl.model, 'containers')\"\nng-click=\"$ctrl.onSelect($ctrl.model, 'images')\"\nrespectively, and a css with a :hover selector to set the cursor to pointer, eventually also dim the background of the element.\nI've tried to find the file containing the $scope.onSelect(model) to see how adding a second parameter would affect the code it executes ( I'm referring to the onSelect from here https://github.com/portainer/portainer/blob/3a3577754ef6ab9e821fa57823f6714ace11bd83/app/portainer/components/endpoint-list/endpoint-item/endpointItem.html#L1 which then would need to get extended to handle those extra parameters and change the route), but I wasn't able to find that function on GitHub.\nFor me personally just a direct link to the containers and the images would be enough, since I'm spending 90+% of my time in there when using Portainer.\nThanks a lot for putting all the effort into creating Portainer, it makes managing Docker containers and images so much easier.. If the user wants to access any of those things he just clicks on the big endpoint box to get to the endpoint dashboard, like we do now. I don't mean those 2 links per endpoint to replace the current big button, but only to enhance it by embedding those 2 small clickable spans.. ",
    "Jacq": "This sounds great also for me, we are missing a similar feature. \nCurrently when a stack is not needed anymore we delete the associated services but keep the stack in the editor (kind of \"archive\" for future deploy). \nFor us this works great except in the list of stacks there is no easy way to know if a stack is fully running or has been \"archive\" this way. \nIt would be great to allow assigning tags (as keywords to add multiple tags e.g. critical, archive, disabled, primary secondary....) to categorize stacks. This will make it possible to filter by these tags and group them as necessary or even hide specific tags.\n. The use of compose files for seems also the direct way, this should be extended with external networks and volumes created.\nIs it possible to export/backup the docker-compose files currently?\nI have checked in a docker swarm scenario and could not find in the gui a way to easily export all the stacks yaml files. Also try to access the portainer shell but as is based on scratch I cannot get a shell open.\nCheers,. > Hi @Jacq\n\n\nIs it possible to export/backup the docker-compose files currently?\n\nNot via the UI, but all the compose files for the stack created inside Portainer are stored in Portainer /data folder.\n\nThanks, here is a quick script to do the backup to use in cron tabs.\n```\n!/bin/bash\n1st arg is backup destination or use current folder\nif [ \"$#\" -ne 1 ]\nthen\n  path=. \nelse\n  path=$1\nfi\nprefix=date \"+%Y_%m_%d_%H_%M_%S\"\nportainer_volume=\"\"\ncontainer=$(docker ps -f \"volume=$portainer_volume\" -q)\ndocker cp $container:/data/ /tmp/portainer_backup\ndest=$path/\"portainer-data-$prefix.tgz\"\ntemp=/tmp/portainer_backup\necho \"Tar to $dest\"\ntar -zcvf $dest -C /tmp/portainer_backup .\necho \"Removing tmp folder $temp\"\nrm $temp -rf\n```. I can confirm this behavior, volumes appear unused and when selecting the related service the combo box shows no selection. . > I can confirm this behavior, volumes appear unused and when selecting the related service the combo box shows no selection.\nFixed partially using as volumes the name property with the full data store name:\nvolumes:\n   external:\n       name:  full volume name@my datastore. Similar issue here, sometimes portainer cannot connect to swarm but the swarm/containers are ok.\nPortainer notifies the endpoint is down, after a while without messing with portainer ui the endpoint becomes online. \nThis happened very few times with previous version but with latest 1.2.0 is very common, almost everytime I'm connected to portainer UI after some minutes.\nAgent logs:\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 12:20:27 [INFO] serf: EventMemberJoin: 72652f77b056 10.10.0.4\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 12:20:28 [INFO] serf: EventMemberJoin: f39c9df400a5 10.10.0.6\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 12:20:28 [INFO] serf: EventMemberJoin: 236583c83f6e 10.10.0.7\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 12:20:28 [INFO] serf: EventMemberJoin: f6fd914271eb 10.10.0.5\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 12:20:28 [INFO] serf: EventMemberJoin: b34307a5c7d2 10.10.0.3\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 12:20:28 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 15:27:40 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:50:45 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:50:50 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:51:25 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:51:31 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:51:35 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:51:47 http error: An error occured during websocket exec operation (err=websocket: close 1000 (normal): websocket: close 1005 (no status)) (code=500)\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:51:47 http: response.WriteHeader on hijacked connection\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:51:47 http: response.Write on hijacked connection\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/07 17:51:50 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/09 07:02:59 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.sj6e16xf8enx@docker1    | 2019/01/09 08:47:19 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 12:20:26 [INFO] serf: EventMemberJoin: 236583c83f6e 10.10.0.7\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 12:20:26 [INFO] serf: EventMemberJoin: f6fd914271eb 10.10.0.5\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 12:20:26 [INFO] serf: EventMemberJoin: b34307a5c7d2 10.10.0.3\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 12:20:26 [INFO] serf: EventMemberJoin: f39c9df400a5 10.10.0.6\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 12:20:26 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 12:20:28 [INFO] serf: EventMemberJoin: 72652f77b056 10.10.0.4\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: b34307a5c7d2 10.10.0.3\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 15:27:10 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 17:51:26 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.jcpuy99ateeb@docker4    | 2019/01/07 17:51:51 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: f6fd914271eb 10.10.0.5\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 12:20:25 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: b34307a5c7d2 10.10.0.3\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: f39c9df400a5 10.10.0.6\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 12:20:26 [INFO] serf: EventMemberJoin: 236583c83f6e 10.10.0.7\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 12:20:28 [INFO] serf: EventMemberJoin: 72652f77b056 10.10.0.4\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: f6fd914271eb 10.10.0.5\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 15:27:35 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: f39c9df400a5 10.10.0.6\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 12:20:25 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 12:20:26 [INFO] serf: EventMemberJoin: 236583c83f6e 10.10.0.7\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 12:20:28 [INFO] serf: EventMemberJoin: 72652f77b056 10.10.0.4\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 15:27:26 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 15:27:58 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 17:48:28 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/07 17:50:46 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/09 07:13:59 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.ssf0lzo2psfa@docker3    | 2019/01/09 07:50:59 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: f39c9df400a5 10.10.0.6\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: f6fd914271eb 10.10.0.5\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 15:28:06 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 12:20:25 [INFO] serf: EventMemberJoin: b34307a5c7d2 10.10.0.3\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 17:48:28 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 17:50:38 http error: The agent was unable to contact any other agent (err=Unable to find the targeted agent) (code=500)\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 17:50:51 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/07 17:51:36 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/09 07:00:31 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 12:20:25 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 12:20:26 [INFO] serf: EventMemberJoin: 236583c83f6e 10.10.0.7\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 12:20:28 [INFO] serf: EventMemberJoin: 72652f77b056 10.10.0.4\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:27:10 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.s03dl3hb8f36@docker5    | 2019/01/09 07:14:17 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:27:22 http error: An error occured during websocket exec operation (err=websocket: close 1000 (normal): websocket: close 1005 (no status)) (code=500)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:27:22 http: response.WriteHeader on hijacked connection\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:27:22 http: response.Write on hijacked connection\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:27:26 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:27:35 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:27:41 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:27:58 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 15:28:06 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/07 17:51:31 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/09 07:00:31 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/09 07:03:00 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/09 07:13:59 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/09 07:14:17 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/09 07:50:59 http error: Missing request signature headers (err=Unauthorized) (code=403)\nportainer_agent.0.yj05ptv0q95o@docker2    | 2019/01/09 08:47:20 http error: Missing request signature headers (err=Unauthorized) (code=403)\nPortainer log:\n```\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 12:21:44 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 12:21:44 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 12:48:41 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 12:48:41 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 12:48:41 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 12:48:41 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 15:27:10 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 15:27:26 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 15:27:35 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 15:27:41 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 15:27:58 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 15:28:06 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:48:28 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:50:38 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:50:46 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:50:51 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:51:22 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:51:26 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:51:31 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:51:36 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/07 17:51:51 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/08 07:29:37 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/08 07:29:37 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/08 07:29:37 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/08 07:29:37 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/08 15:29:41 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 07:00:31 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 07:03:00 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 07:13:59 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 07:14:17 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 07:50:59 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 08:47:20 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:48:46 http: proxy error: Docker container identifier not found\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:48:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:48:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:48:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:48:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:48:50 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:48:50 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:07 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:07 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:07 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:07 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:08 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:10 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:13 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:13 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:16 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:16 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:49:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.pm4uc1ek1t5a@docker5    | 2019/01/09 18:50:04 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n```. ",
    "tannerchung": "Oooo thanks for the update. I didn't know it was a limitation. Sorry I had to make an Issue out of it because I was using Portainer to debug my network setup and it played a big role in me interpreting something was off so I was investigating forever until I was 100% sure everything was set properly.\nAlso glad there's a solution coming for this.. ",
    "TopBanana123": "I have the exact same problem, after troubleshooting packet loss inside the docker network I noticed that many of the containers had duplicate MAC addresses. I corrected the issue, but it happens again if I edit/recreate a container with Portainer \n\n. ",
    "tjunussov": "Have same issue, after restarting host, i get duplicated mac addresses \n02:42:ac:12:00:02\nbms_timur_modbus | 172.18.0.4/16 | -   | 02:42:ac:12:00:06 | Leave Network\nbms_timur_grafana | 172.18.0.6/16 | -  | 02:42:ac:12:00:06 | Leave Network\nbms_timur_influxdb | 172.18.0.5/16 | - | 02:42:ac:12:00:05 | Leave Network\ntimur-proxy_nginx | 172.18.0.3/16 | -  | 02:42:ac:12:00:02 | Leave Network\nnginx-proxy  | 172.18.0.2/16 | -       | 02:42:ac:12:00:02 <--- THIS IS DUP\n. ",
    "ThrDev": "I'm having the same issue as well. I've been getting a flood of duplicate mac addresses, and am not sure whether it's docker's fault or portainer's fault.\nThanks!. ",
    "rthomas67": "I haven't noticed this happening on individual containers created outside of a stack (or even outside of Portainer), but it happens frequently on a simple stack with just two containers.  Even after I \"fix it\" by setting one of the mac addresses explicitly to something different, after some time (haven't noticed how much), I'll see that both containers have reverted to the same mac address, 02:42:ac:11:00:33, and again cannot talk to each other.  I know this may not add much context for finding the issue, but it's at least another data point confirming that the issue exists.\nAlso noticed that when I click \"Leave Network\" in the list of \"Connected Networks\" I see a popup error message that says the container is not connected to the network, instead of the normal message confirming that the container left the network.  This may indicate that something in the docker network driver is actually dropping the connection and Portainer isn't aware that it happened.  It seems like this message shouldn't occur if the Portainer page was just loaded/refreshed and still lists the network as \"connected\", complete with a \"leave network\" button to click.\n\n. ",
    "gaiterjones": "I am also trying to password protect portainer using auth_basic behind an nginx reverse proxy. The suggestion above doesn't appear to work\nlocation /portainer/api/auth { \n    auth_basic \"Restricted Content\";                                                                                                                      \n    auth_basic_user_file /data/.htpasswd;       \n  }\nI also tried\nlocation /portainer/#/auth {                                                   \n    auth_basic \"Restricted Content\";                                                                                                                      \n    auth_basic_user_file /data/.htpasswd;       \n  }\nThe basic auth login is not triggered. @jodumont did you get this working?. ",
    "saxcorp": "Is notone found a solution for this problem? \n. ",
    "ponahoum": "No. I confirm the issue it's very annoying.. I confirm this issue. It's very annoying\n\n\n. I confirm this issue, very annoying. It means that when we redeploy some of the containers of a stack, the containers can't reach each other by their aliases. I confirm this issue happens even when we use the raw template.json link from the GitHub Portainer repository. Hi @toninis, in fact using the proper templates.json file seem to solve the issue.\nhttps://raw.githubusercontent.com/portainer/portainer/develop/templates.json\nThank you very much; you can consider the issue closed. Just need to update the template.json at the root :) . PS : I'm the one who opened this issue yesterday with an old git account, I just deleted this account today. So my issue I solved :) Thank you anyway. I confirm this issue, nano is completely bugged with the Portainer live console.. ",
    "foscoj": "Trying to do the same right now, disabling basic auth for API seems to work, but is not the solution I'm trying to achieve.\nAny suggestions for some header magic which might help?. ",
    "KLuuKer": "@deviantony how about starting a new portainer_self_updater container and have that update the running portainer image?\nit's basically the same as a app starting a self updater\\patcher executable to let the running app update itself\nwhich is a trick used by allot of old desktop applications. @deviantony well in the non-docker case (which I think you can detect) you could do the same but with a extra executable\\script instead of docker image, you can't really get around building 2 separate updaters\nI would recommend having a detect-only mode (for admin's that would like to block this functionality)\nand some kind of permission so that not all users can just update it and possibly cause issues\\outages\n. ",
    "boissierflorian": "Hello, I would like to take this issue.. Yes sure, sorry for my mistake.. ",
    "dehy": "It's like Docker Cloud auto redeploy functionnality, and I can only \ud83d\udc4d . As Docker Cloud is closing, many people will seek for an alternative... and they are now. See last paragraph here https://docs.docker.com/docker-cloud/migration/#what-stays-the-same. Hi ! I'm the another user :)\nMy Technical details:\n\nAgent version:\n1.1.1\nPortainer version:\n1.19.1\nDocker version:\n18.06.0-ce\nPlatform (windows/linux):\nlinux/amd64 (Ubuntu 16.04.5 LTS up-to-date)\n\n2 network cards : eth0 (10.5.65.209/31) and eth1 (10.5.65.211/31) (+ lo and docker interfaces)\nThank @deviantony and @olljanat !. Hello everyone,\nfor me, the containers now start but they seems non functionnal. Like the logs above, I still have http error: The agent was unable to contact any other agent located on a manager node (err=Unable to find an agent on any manager node) (code=500) and [INFO] serf: attempting reconnect to 5ce766e8e2ec 10.0.3.194:7946 errors.\nThe web UI keeps failing at retrieving stacks or some other resources :(. Ok, so, I've just deleted the agent service for better logs, then redeployed the stack and now it seems working. The logs before were a redeploy of the stack after updating from 1.1.1 to 2102 (without deleting the service before).\nI'm running on dedicated servers on scaleway, online.net and kimsufi, all on ubuntu 16.04 except one (non faulty) on 14.04.\nThe logs after service rm and clean deploy:\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:46 [DEBUG] - Agent details: map[NodeName:devin Mode:swarm NodeRole:worker AgentPort:9001]\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:46 Found addrs: [10.0.3.228/24]\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:46 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:46 [DEBUG] - Using advertiseAddr: 10.0.3.228\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:46 [DEBUG] - Generating TLS files...\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:46 [DEBUG] - Agent details: map[NodeRole:worker AgentPort:9001 NodeName:joe Mode:swarm]\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:46 Found addrs: [10.0.3.234/24]\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:46 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:46 [DEBUG] - Using advertiseAddr: 10.0.3.234\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:46 [DEBUG] - Generating TLS files...\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:46 [DEBUG] - Using agent port: 9001\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:47 [DEBUG] - Agent details: map[Mode:swarm NodeRole:worker AgentPort:9001 NodeName:storage2]\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:47 Found addrs: [10.0.3.231/24]\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:47 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:47 [DEBUG] - Using advertiseAddr: 10.0.3.231\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:47 [DEBUG] - Generating TLS files...\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:48 [DEBUG] - Using agent port: 9001\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:48 [DEBUG] - Agent details: map[NodeRole:manager AgentPort:9001 NodeName:rohan Mode:swarm]\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:48 Found addrs: [10.0.3.229/24]\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:48 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:48 [DEBUG] - Using advertiseAddr: 10.0.3.229\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:48 [DEBUG] - Generating TLS files...\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:49 [DEBUG] - Agent details: map[NodeName:storage3 Mode:swarm NodeRole:worker AgentPort:9001]\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:49 Found addrs: [10.0.3.230/24]\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:49 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:49 [DEBUG] - Using advertiseAddr: 10.0.3.230\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:49 [DEBUG] - Generating TLS files...\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:49 [DEBUG] - Agent details: map[NodeName:cailhau Mode:swarm NodeRole:manager AgentPort:9001]\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:49 Found addrs: [10.0.3.235/24]\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:49 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:49 [DEBUG] - Using advertiseAddr: 10.0.3.235\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:49 [DEBUG] - Generating TLS files...\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:49 [DEBUG] - Agent details: map[NodeName:storage1 Mode:swarm NodeRole:worker AgentPort:9001]\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:49 Found addrs: [10.0.3.232/24]\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:49 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:49 [DEBUG] - Using advertiseAddr: 10.0.3.232\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:49 [DEBUG] - Generating TLS files...\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:49 [DEBUG] - Using agent port: 9001\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:49 [DEBUG] - Using agent port: 9001\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:49 [DEBUG] - Agent details: map[NodeName:storage4 Mode:swarm NodeRole:worker AgentPort:9001]\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:49 Found addrs: [10.0.3.233/24]\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:49 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:49 [DEBUG] - Using advertiseAddr: 10.0.3.233\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:49 [DEBUG] - Generating TLS files...\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:49 [DEBUG] - Using agent port: 9001\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:49 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.228\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:49 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:49 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:49 [DEBUG] - Using agent port: 9001\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:50 [DEBUG] - Agent details: map[NodeName:saint-jean Mode:swarm NodeRole:manager AgentPort:9001]\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:50 Found addrs: [10.0.3.236/24]\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:50 [DEBUG] - Using cluster address: tasks.agent\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:50 [DEBUG] - Using advertiseAddr: 10.0.3.236\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:50 [DEBUG] - Generating TLS files...\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:50 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:51 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.234\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:51 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:51 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:51 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:51 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:51 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:51 [DEBUG] - Using agent port: 9001\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:51 [DEBUG] - Using agent port: 9001\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.235\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:52 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.232\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:52 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:52 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.230\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:52 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:52 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.229\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:52 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:53 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:53 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:52 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:53 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:53 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:53 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:53 [DEBUG] - Using agent port: 9001\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.236\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.231\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:54 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:54 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:54 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.3.233\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [DEBUG] - Will join cluster via: tasks.agent\nportainer_agent.0.llsfedkwnt57@cailhau    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: 8a3ef2046350 10.0.3.230\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ec7cc0521608 10.0.3.236\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: e48839a96fee 10.0.3.228\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: 4933cf6baf76 10.0.3.229\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: 918f9351b1f5 10.0.3.235\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: bfb51dab8f07 10.0.3.231\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: 90658ac9cbb2 10.0.3.232\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ef7d9a272805 10.0.3.234\nportainer_agent.0.g584reypumw2@storage1    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.siz93b1mpd68@rohan    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.bpiggcmtys1b@saint-jean    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.ep97jgetorv0@joe    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.v169vs1mwzzg@storage2    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.rd7p3vigcu6j@devin    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.px0luf64sayg@storage3    | 2018/08/01 08:11:56 [INFO] serf: EventMemberJoin: ba858746a498 10.0.3.233\nportainer_agent.0.73tf18lqbtsf@storage4    | 2018/08/01 08:11:56 [INFO] - Starting Portainer agent version 1.1.1 on 0.0.0.0:9001 (cluster mode: true). Works like a charm after clean deployment. Maybe a note in the doc for upgrades?\nThanks guys! \ud83e\udd47 . To continue on this bug:\nI had a server hang, so I restarted it but then the agent went completely nuts and refused to reconnect to other nodes. force-updating the service did not work. I had to rm the service to redeploy it.\nI'll continue to check the logs in the future to give you a better look and I will try to understand the failure process. ",
    "zhangruhong": "I need this feature!  . ",
    "Cinezaster": "We also like to see this feature.\nOur current setup with docker cloud: \n1. We push our project on github\n2. Docker hub automatically builds a new image\n3. Docker cloud redeployed our images if this was configured that way\nWe used this setup for our development. \nWe have a dev branch that automatically builds and redeploys on git push\nWhen we merge to a staging this also automatically builds and redeploys\nWhen we merge the staging to production (master) it automatically gets build but we\nWith the current portainer we need to pull the latest image on the image page and after that we need to go to the service and update the service. . In Docker hub you have the ability to create a Webhook\nhttps://docs.docker.com/docker-hub/webhooks/ that triggers a post call whenever an image is build or a tag is added. \nSo we could trigger an image pull and redeploy in portainer.. @deviantony we never use the service-creation view to create our service but instead us a stackfile to create our service, would it be possible to add the webhook later via the service view?. Any news on this request?. @deviantony we will try it and test it @appsaloon. @deviantony, @JoJordens tested the feature, his only comment : tags of the images are <none> after an update.\n@ncresswell We're going to write a blog post this or next week about how to use this feature.. ",
    "Strum355": "Is this only for swarm services only or for independent containers as well?. Ah no worries, is there a rough eta on when we could see this for containers?. Im assuming a new enhancement request should be made to have automated deployment for individual containers?. ",
    "JoJordens": "@Cinezaster and I tried it out with the webhooks hub.docker provides. And it works, our services are automatically being updated after each push to a repository.\nBut the tags of the images that were updated are all <none>, both in the image list in portainer as well as when I look at docker images. This doesn't interfere with functionality however. We have multiple services using the same image with different tags, and they're all still using the correct image after the update.. @deviantony \n2019/01/15 08:56:09 Migrating database from version 14 to 16.\n2019/01/15 08:56:09 Templates already registered inside the database. Skipping template import.\n2019/01/15 08:56:09 Starting Portainer 1.20.0 on :9000\n2019/01/15 08:56:22 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/01/15 08:57:28 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 08:57:33 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 08:57:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 08:57:55 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:01:00 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:03:01 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:03:01 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:03:01 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:03:01 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:03:01 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:03:01 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:44 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\n2019/01/15 09:08:47 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:47 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:47 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:47 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:47 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:52 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:52 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:52 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:52 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:52 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:52 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:52 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:54 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:54 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:54 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:54 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:54 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:08:54 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:09:00 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:09:00 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:09:00 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:09:00 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:09:00 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:09:00 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:09:00 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:22:57 Templates already registered inside the database. Skipping template import.\n2019/01/15 09:22:57 Starting Portainer 1.20.0 on :9000\n2019/01/15 09:23:07 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/01/15 09:23:07 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/01/15 09:23:07 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/01/15 09:23:29 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\n2019/01/15 09:23:33 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:23:33 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:23:33 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:23:33 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:23:33 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:23:33 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:24:32 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:24:32 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:24:32 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:24:32 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:24:32 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:24:32 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:24:32 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:04 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\n2019/01/15 09:30:06 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:06 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:06 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:06 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:06 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:06 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:19 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:24 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:24 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:24 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:24 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:25 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:30:29 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:37:40 http error: Unauthorized (err=Unauthorized) (code=401)\n2019/01/15 09:37:40 http error: Unauthorized (err=Unauthorized) (code=401)\n2019/01/15 09:37:40 http error: Unauthorized (err=Unauthorized) (code=401)\n2019/01/15 09:38:14 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\n2019/01/15 09:38:20 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:38:20 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:38:20 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:38:20 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:38:20 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:38:20 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:03 http error: Unauthorized (err=Unauthorized) (code=401)\n2019/01/15 09:39:28 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:42 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\n2019/01/15 09:39:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:50 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:51 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:51 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:51 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:51 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:51 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:39:51 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:17 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\n2019/01/15 09:46:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:25 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:25 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:26 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:26 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:26 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:26 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:46:26 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:48:39 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:48:39 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:48:39 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:48:39 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:48:39 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:48:39 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:48:44 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:49:41 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\n2019/01/15 09:51:16 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 09:51:54 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 10:13:49 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\n2019/01/15 10:13:55 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 10:13:55 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 10:13:55 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 10:13:55 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 10:13:55 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 10:13:56 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/15 10:17:31 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/01/16 07:43:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:43:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:43:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:43:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:43:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:43:48 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:44:45 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:44:45 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:44:45 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:44:45 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:44:45 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:44:45 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/01/16 07:44:45 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nThis is what it looks like in chrome devtools.\n\n\n\n. @deviantony I thought so too at first so I tried using the portainerci/portainer:fix2556-frequent-offline-mode image before I created this issue. I tried again just now and the issue still persists.. @deviantony This bug still exists in version 1.20.1. @deviantony Yup, portainer 1.20.1 and agent 1.2.1. I'm still getting the same errors. Nothing has changed at all with the new versions.\nPortainer is running as a docker container on one server.\ndocker run --name portainer -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer\nThere's an nginx server taking care of ssl in front of portainer, but using portainer directly on port 9000 doesn't fix the problem so it doesn't look like nginx has anything to do with it.\nAnd the endpoints are running on other servers, each running the portainer agent as a docker service. Set up following this guide https://portainer.readthedocs.io/en/stable/agent.html#connecting-an-existing-portainer-instance-to-an-agent\n$ docker service create \\\n    --name portainer_agent \\\n    --network portainer_agent_network \\\n    --publish mode=host,target=9001,published=9001 \\\n    -e AGENT_CLUSTER_ADDR=tasks.portainer_agent \\\n    --mode global \\\n    --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=//var/lib/docker/volumes,dst=/var/lib/docker/volumes \\\n    portainer/agent. ",
    "kendrickm": "@ibnesayeed Yeah there was a bug around error handling causing it to segfault vs return an actual error. Are you using a webserver proxy in front of it?. @Premik Are you seeing other issues with your swarm itself? Or other containers? I've experienced several times if I have a service that fails to start, and I leave it for several hours, it will continually try to start and fail. This consumes filehands and causes the ec2 instance to end up failing.. This is the API side. The Frontend side switch and display of the webhook needs to be implemented. . Will the end result be that the user can select a host to run this on? If the endpoint is a load balancer to several hosts(ELB pointed to docker swarm managers for example) this could cause unexpected results.\n. I think having a one-time docker container run on a specific host is a viable use-case, but I think there should also be the ability to run ad-hoc scripts on the host itself. There might be OS level things that aren't available in a container you could want to run. . > I believe that the ELB setup could cause issues inside Portainer already\nThis is how I currently my main setup of Portainer due to the way swarm routes all traffic through the internal load balancing. I've just accepted the fat some of the features won't work for me.\n\nDo you have any example in mind that would not be supported by a privileged container? \n\nI'm envisioning a case where there OS that is running Docker could be different enough from the popular images and forcing the user to try and map a base image could cause problems. There could also be a potential for user mapping issues between users on the host and that user not existing from a container perspective. . ~~Is the end goal that the user upload a Dockerfile that will run on the targeted management host? If so should we assume that will contain the CMD they'll want?~~\nI see now they just select a base image and a script the user wants to run. . We'll probably need to capture the STDOUT/ERR here and log it back to the main interface? . ",
    "goalbased": "Does this support Windows?. I can't find the Service tab any idea? Do I need Swarm or something first?\n\n. ",
    "JSteunou": "@deviantony I was searching around to find an issue to this one https://github.com/portainer/portainer/issues/966 because even with this new logging viewer logs are still truncated (1.16.5) :( \nsee #1801 . I'm curious, where is this config?. ok found it and I can confirm that does the trick, but I'm not sure if I want set it on false on all my containers :/ . What should be set in comment? Because the 1st 8 characters are still strip, just only once by the .replace after newline instead of twice by substring + replace. Yep, I jumped on it thinking seeing a quick solution, but this was the wrong way.. ",
    "abhisaini": "if anyone else isnt doing it ....I am up for doing. oohkk thanks a lot...\nOne more thing...Since all the changes cant be done in once so I would like to do page by page\n. @deviantony  can I make changes in fork or do I need to make the branch as stated in CONTRIBUTING.md. Can u send me a invite for slack..my email is abhisni@iitk.ac.in. ",
    "johnmanko": "@deviantony I agree that this is a Docker issue (Docker issue referenced above).  Would you mind, however, keeping this open until I get a response from Docker?  I'll ping them now.. What are your Portainer, Docker and OS versions?. ",
    "nzwei": "Had the same issue with 1.16.3. Push from yesterday fixed it of me.. ",
    "kukam": "Hi, I had the same issue with Apache proxy_wstunnel.\nProxyPass /api/websocket ws://:9000/api/websocket/\nRequestHeader set Connection \"upgrade\"\nHeader set Connection \"Upgrade\"\nRequestHeader setifempty Connection \"Upgrade\"\nHeader set Upgrade \"websocket\"\nRequestHeader setifempty Upgrade \"websocket\". WebSocket connection to 'wss://mypage/api/websocket/exec?id=561747b024dcc2627c62881f83108610ef2f132cae7c88355db8c7b94c46de43&endpointId=1' failed: Error during WebSocket handshake: Unexpected response code: 400\nWrappedWebSocket @ VM2450:164\nj @ app.0c4b0cd0.js:44\n(anonymous) @ app.0c4b0cd0.js:44\n(anonymous) @ app.0c4b0cd0.js:3\n$eval @ app.0c4b0cd0.js:3\n$digest @ app.0c4b0cd0.js:3\n$apply @ app.0c4b0cd0.js:3\ni @ app.0c4b0cd0.js:3\nu @ app.0c4b0cd0.js:3\ny.onload @ app.0c4b0cd0.js:3\napp.0c4b0cd0.js:3 POST https://mypage/api/endpoints/1/docker/exec/561747b024dcc2627c62881f83108610ef2f132cae7c88355db8c7b94c46de43/resize?h=30&w=182 404 (Not Found). Hi, it is not possible. The apache configuration looks like this:\n\n    ServerName my.domain.ltd\n    DocumentRoot \"/var/www/html\"\n    ProxyPass / http://172.17.0.1:9000/\n    ProxyPassReverse / http://172.17.0.1:9000/\n    RequestHeader set Connection \"\"\n    \n    RequestHeader set Connection \"upgrade\"\n    Header set Connection \"Upgrade\"\n    RequestHeader setifempty Connection \"Upgrade\"\n    Header set Upgrade \"websocket\"\n    RequestHeader setifempty Upgrade \"websocket\"\n    ProxyPass ws://172.17.0.1:9000/api/websocket/\n    \n\n\n    ServerName my.domain.ltd\n    DocumentRoot \"/var/www/html\"\n    SSLEngine on\n    SSLCertificateFile /etc/acme/my.domain.ltd/public.cer\n    SSLCertificateKeyFile /etc/acme/my.domain.ltd/private.key\n    SSLCertificateChainFile /etc/acme/my.domain.ltd/ca.cer\n    ProxyPass / http://172.17.0.1:9000/\n    ProxyPassReverse / http://172.17.0.1:9000/\n    RequestHeader set Connection \"\"\n    \n    RequestHeader set Connection \"upgrade\"\n    Header set Connection \"Upgrade\"\n    RequestHeader setifempty Connection \"Upgrade\"\n    Header set Upgrade \"websocket\"\n    RequestHeader setifempty Upgrade \"websocket\"\n    ProxyPass ws://172.17.0.1:9000/api/websocket/\n    \n\n. ",
    "cmsalmeida": "I have same issue, after reading this, I tested accessing directly using 127.0.0.1:9000 and it worked.\nIn my case I'm using nginx.\nWhat should be the correct configuration, or how can I help debug this?. @yogeek Exactly. Not fixed if not accessing on 127.0.0.1.. Thank you for the link, updating the Nginx configuration accordingly worked.\n:+1: . ",
    "NonsenseInc": "@deviantony I have been experiencing a very similar problem: I am running portainer behind a caddy-proxy and got the same error. I fixed it by changing my config to:\nportainer.example.com {\n  log stdout\n  errors stdout\n  proxy / example.com:9000 {\n    websocket\n    transparent\n  }\n}\nMaybe you would like to include a caddy example as well in your documentation.... ",
    "navossoc": "I had the same issue here with caddy + portainer...\nThanks @NonsenseInc, the websocket keyword on the proxy directive did all the work, now it is working properly.\nI didn't experience this issue with the traefik in front of portainer and it didn't require any additional configuration, maybe, that is why I didn't notice the websocket connection.. ",
    "naegleria": "Hello, I still have this issue when trying to access trough Nginx with version 1.17.0. If I access directly (bypassing nginx), then it works.\nChrome console logs:\nWebSocket connection to 'wss://website.net:9999/portainer/api/websocket/exec?id=8d1318e442defe1d54c3d7b5560620084b3d9e505bed3925110731d3efdbae39&endpointId=1' failed: Error during WebSocket handshake: Unexpected response code: 403\nPOST https://website.net:9999/portainer/api/endpoints/1/docker/exec/8d1318e442defe1d54c3d7b5560620084b3d9e505bed3925110731d3efdbae39/resize?h=30&w=79 404 (Not Found)\nNginx config for Portainer part:\n```\nserver {\n   access_log /dev/stdout;\n   listen 9999 ssl;\n   server_name website.net;\n   ssl                  on;\n   ssl_certificate      /etc/nginx/ssl/website.net.crt;\n   ssl_certificate_key  /etc/nginx/ssl/website.net.key;\n   ssl_session_timeout 1d;\n   ssl_session_cache shared:SSL:50m;\n   ssl_session_tickets off;\n   proxy_ssl_session_reuse off;\n/.../\nlocation /portainer/ {\n       proxy_pass  http://portainer:9000/;\n       proxy_set_header Host $host;\n       proxy_set_header Upgrade $http_upgrade;\n       proxy_set_header Connection \"upgrade\";\n       proxy_http_version 1.1;\n   }\n   location /portainer/api/websocket/ {\n       proxy_set_header Upgrade $http_upgrade;\n       proxy_set_header Connection \"upgrade\";\n       proxy_http_version 1.1;\n       proxy_pass http://portainer:9000/api/websocket/;\n   }\n```. @deviantony It is working with 1.16.5 indeed, but it's also working now with 1.17.1. Sadly I don't have any environments that have an in-between version. I did not need to add what was suggested by christian-ek for it to work, neither was the location /portainer/api/websocket/ part necessary. I assume something was changed in 1.17.1 or this issue happens randomly.. ",
    "GoncaloBorges": "Hi All...\nI am also experiencing this issue in 18.03.1-ce. In my case i am not using any proxies and portainer is installed in the docker host itself. Restarting the portainer container does not seem to solve the issue but rebooting the host itself temporarily fixes it. But it comes to bite us again later. \nGoogle Chrome is showing me the following error. \nWebSocket connection to 'wss://XXXXXXX:9000/api/websocket/exec?id=27ed1cd0f73c\u2026GUiOjEsImV4cCI6MTUzMDUyMTk5M30.InwNAPNz7PpkEzILimQvOBgzS5kWTdOOHw2RLMP_7wU' failed: Error in connection establishment: net::ERR_CERT_AUTHORITY_INVALID\napp.c628b0f2.js:3 \nPOST https://XXXXXXX:9000/api/endpoints/1/docker/exec/27ed\u20260f73c4e\u2026/resize?h=30&w=55 404 ()\nLet me know if any further information is needed. I am hitting this quite often so it shouldn't be hard to get another error. Hi All...\nI am also experiencing this issue in 18.03.1-ce. In my case i am not using any proxies and portainer is installed in the docker host itself. Restarting the portainer container does not seem to solve the issue but rebooting the host itself temporarily fixes it. But it comes to bite us again later. \nGoogle Chrome is showing me the following error. \nWebSocket connection to 'wss://XXXXXXX:9000/api/websocket/exec?id=27ed1cd0f73c\u2026GUiOjEsImV4cCI6MTUzMDUyMTk5M30.InwNAPNz7PpkEzILimQvOBgzS5kWTdOOHw2RLMP_7wU' failed: Error in connection establishment: net::ERR_CERT_AUTHORITY_INVALID\napp.c628b0f2.js:3 \nPOST https://XXXXXXX:9000/api/endpoints/1/docker/exec/27ed\u20260f73c4e\u2026/resize?h=30&w=55 404 ()\nLet me know if any further information is needed. I am hitting this quite often so it shouldn't be hard to get another error. \n\nDeploying container on a RHEL7 box with selinux enabled.\nRunning container as user portainer which is part of the docker group. The command to deploy it is the following...\n\ndocker run -d \\\n  --label owner=PortainerUsyd \\\n  --privileged \\\n  -p 9000:9000 --name portainer \\\n  --restart always \\\n  -v $CERTS:/certs -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer \\\n  -H unix:///var/run/docker.sock \\\n  --logo \"\" \\\n  -l owner=PortainerUsyd \\\n  --ssl --sslcert /certs/selfsigned_portainer.crt --sslkey /certs/selfsigned_portainer.key\n\nThings work fine on deployment but after some time, we just loose this functionality. \n\nLet me know what else you need.. \n\n\nDeploying container on a RHEL7 box with selinux enabled.\n\nRunning container as user portainer which is part of the docker group. The command to deploy it is the following...\n\ndocker run -d \\\n  --label owner=PortainerUsyd \\\n  --privileged \\\n  -p 9000:9000 --name portainer \\\n  --restart always \\\n  -v $CERTS:/certs -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer \\\n  -H unix:///var/run/docker.sock \\\n  --logo \"\" \\\n  -l owner=PortainerUsyd \\\n  --ssl --sslcert /certs/selfsigned_portainer.crt --sslkey /certs/selfsigned_portainer.key\n\nThings work fine on deployment but after some time, we just loose this functionality. \nLet me know what else you need.. @deviantony  will do so and let you know if the problem persists. Just as a remark, in the current install i am using self signed certificates (which i was not expecting to be a problem).. @deviantony  will do so and let you know if the problem persists. Just as a remark, in the current install i am using self signed certificates (which i was not expecting to be a problem).. @deviantony The issue is not occurring on the HTTP instance since i deployed it yesterday. Moreover, the HTTPS instances kind of recovered and start working again. Today the error is not there... Strange.... @deviantony The issue is not occurring on the HTTP instance since i deployed it yesterday. Moreover, the HTTPS instances kind of recovered and start working again. Today the error is not there... Strange.... @deviantony Done (see issue #2022). @deviantony Done (see issue #2022). I understood when and how this problem appears in my case. It seems related to the HTTPS setup implemented via NGINX App template (provided in the APP Template Menu). It actually may be a more general problem for all containers wishing to set HTTPS.\n\nI was able to replicate the situation doing the following:\nAll operations are done using chrome and never closing the browser.\n1) Deploy portainer using -ssl* flags\n2) Log in to the application. In my case i am using a self sign certificate so i accept the security exception that my browser raises.\n3) Deploy NGINX app as offered in the 'App Template' menu. By default, the container will listen on 443 and 80 redirecting to different ports in the host\n4) Using http://fqdn:port_a (were port_a is the host port bridging with the container port 80) to access NGINX, everything is ok\n5) If, by change, you try to use https://fqdn:port_b  (were port_b is the host port bridging with the container port 443), and although nothing is listening there, that breaks the console access.\n6) To regain console access, i disabled my ethernet connection and switch to my wireless connection. Then, when i access to the portainer interface, I am prompted to accept the security exception for my self sign certificate (which i had done already in set 2). From that point on, i regain access to my containers console. I understood when and how this problem appears in my case. It seems related to the HTTPS setup implemented via NGINX App template (provided in the APP Template Menu). It actually may be a more general problem for all containers wishing to set HTTPS.\nI was able to replicate the situation doing the following:\nAll operations are done using chrome and never closing the browser.\n1) Deploy portainer using -ssl* flags\n2) Log in to the application. In my case i am using a self sign certificate so i accept the security exception that my browser raises.\n3) Deploy NGINX app as offered in the 'App Template' menu. By default, the container will listen on 443 and 80 redirecting to different ports in the host\n4) Using http://fqdn:port_a (were port_a is the host port bridging with the container port 80) to access NGINX, everything is ok\n5) If, by change, you try to use https://fqdn:port_b  (were port_b is the host port bridging with the container port 443), and although nothing is listening there, that breaks the console access.\n6) To regain console access, i disabled my ethernet connection and switch to my wireless connection. Then, when i access to the portainer interface, I am prompted to accept the security exception for my self sign certificate (which i had done already in set 2). From that point on, i regain access to my containers console. Currently we are not changing any code but just deploying it as it is. But\nwe are leveraging puppet and the APIs to provide ldap integration and\ndeploy some custom apps and volumes.\nI just want to give credit to the team which is developing the product and\nthe brand\nOn Mon, 13 Aug 2018 at 6:13 pm, Neil Cresswell notifications@github.com\nwrote:\n\nYou mean when reusing our code in your own project; ala the license text\nto insert within your license under OSS rules?\nOr simply a credit to Portainer?\nFor the former, we can help as its well defined.. for the later, we don\u2019t\nhave anything to date, but can help.\nFrom: GoncaloBorges notifications@github.com\nSent: Monday, 13 August 2018 7:59 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Acknowledgement Text (#2154)\nQuestion:\nDear All... I would like to properly acknowledge portainer in the\ndocumentation i am building internally. Is there any predefined text we\ncould include?\nThank you\nGoncalo\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2154&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RcvUzyYTCna99mXgAmPxCbS6mtGVRiAeD4WsEjHEnRc&s=muvpadgNZHMu9REPBreQNtIyJ8vr23KaVZ8KZd7k7nw&e=>,\nor mute the thread<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldQ1krSlw996AJum1W17zI1gTFYnks5uQTG0gaJpZM4V6C9-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RcvUzyYTCna99mXgAmPxCbS6mtGVRiAeD4WsEjHEnRc&s=vvny1tHyNj6KKJ1DHRvFtTW6mZgU9YygpodUP89ekN0&e=>.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2154#issuecomment-412441303,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AD_5MG3GMczkA8Nj7XIzCSVDr6KotuaEks5uQTUygaJpZM4V6C9_\n.\n. Currently we are not changing any code but just deploying it as it is. But\nwe are leveraging puppet and the APIs to provide ldap integration and\ndeploy some custom apps and volumes.\n\nI just want to give credit to the team which is developing the product and\nthe brand\nOn Mon, 13 Aug 2018 at 6:13 pm, Neil Cresswell notifications@github.com\nwrote:\n\nYou mean when reusing our code in your own project; ala the license text\nto insert within your license under OSS rules?\nOr simply a credit to Portainer?\nFor the former, we can help as its well defined.. for the later, we don\u2019t\nhave anything to date, but can help.\nFrom: GoncaloBorges notifications@github.com\nSent: Monday, 13 August 2018 7:59 p.m.\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Acknowledgement Text (#2154)\nQuestion:\nDear All... I would like to properly acknowledge portainer in the\ndocumentation i am building internally. Is there any predefined text we\ncould include?\nThank you\nGoncalo\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2154&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RcvUzyYTCna99mXgAmPxCbS6mtGVRiAeD4WsEjHEnRc&s=muvpadgNZHMu9REPBreQNtIyJ8vr23KaVZ8KZd7k7nw&e=>,\nor mute the thread<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrldQ1krSlw996AJum1W17zI1gTFYnks5uQTG0gaJpZM4V6C9-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=RcvUzyYTCna99mXgAmPxCbS6mtGVRiAeD4WsEjHEnRc&s=vvny1tHyNj6KKJ1DHRvFtTW6mZgU9YygpodUP89ekN0&e=>.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2154#issuecomment-412441303,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AD_5MG3GMczkA8Nj7XIzCSVDr6KotuaEks5uQTUygaJpZM4V6C9_\n.\n. Will try. Thanks.\n\nBut that does not explain why 1.19.1 works when used against the same\ndocker version.\n1.19.2 must use docker-runc in a way differently than 1.19.1.\nMaybe Anthony can explain why.\n. Will try. Thanks.\nBut that does not explain why 1.19.1 works when used against the same\ndocker version.\n1.19.2 must use docker-runc in a way differently than 1.19.1.\nMaybe Anthony can explain why.\n. Hi Anthony\nThanks for the fast reply. It is not a priority since my deployments are ok\nwith 1.19.1. I also will be unresponsive for a couple of weeks since I am\nstarting annual leave overseas. I can test when possible but probably not\nright away\nCheers\nGoncalo\n. Hi Anthony\nThanks for the fast reply. It is not a priority since my deployments are ok\nwith 1.19.1. I also will be unresponsive for a couple of weeks since I am\nstarting annual leave overseas. I can test when possible but probably not\nright away\nCheers\nGoncalo\n. @deviantony Sorry for the late reply. Confirming that it also solves the problem in my case.\nThank you. @deviantony Sorry for the late reply. Confirming that it also solves the problem in my case.\nThank you. ",
    "aaronbronow": "For me, the fix was to add proxy_set_header directives to my nginx server block.\n```\nserver {\n    listen      80;\n    server_name portainer.example.com;\nif ($http_x_forwarded_proto = 'http') {\n     return 301 https://$server_name$request_uri;\n}\n\nlocation / {\n    proxy_pass http://localhost:9000;\n    include /etc/nginx/proxy_params;\n    proxy_set_header Upgrade websocket;\n    proxy_set_header Connection Upgrade;\n}\n\n}\n```. ",
    "EnricoSx": "Thanks. ",
    "acidjunk": "Thanks for the quick reply. Tried creating a /data on all nodes (even workers), but the same problem persists. I'm not sure how to further debug this.. For me it works fine with the docker volume (and replicas == 1). But the command with bind doesn't work. The funny thing is that: --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock doesn't yield an error.\nHow can I preserve the install log? I've some time tomorrow to do a fresh reinstall.. All stuff executed from manager1\npermissions of /data:\n~ $ ls -al /\ntotal 72\ndrwxr-xr-x    1 root     root          4096 Feb 28 10:05 .\ndrwxr-xr-x    1 root     root          4096 Feb 28 10:05 ..\n-rwxr-xr-x    1 root     root             0 Feb 24 11:09 .dockerenv\ndrwxr-xr-x    1 root     root          4096 Jan  8 21:12 bin\ndrwxrwxr-x    2 docker   docker        4096 Feb 28 10:05 data\ndrwxr-xr-x    5 root     root           340 Feb 24 11:10 dev\n-rwxr-xr-x    1 root     root           743 Jan  8 21:07 entry.sh\ndrwxr-xr-x    1 root     root          4096 Feb 24 11:09 etc\ndrwxr-xr-x    1 root     root          4096 Feb 24 11:09 home\ndrwxr-xr-x    1 root     root          4096 Jan  8 21:12 lib\ndrwxr-xr-x    2 root     root          4096 Jan  8 21:12 lib64\ndrwxr-xr-x    5 root     root          4096 Dec  1 16:31 media\ndrwxr-xr-x    2 root     root          4096 Dec  1 16:31 mnt\ndr-xr-xr-x  124 root     root             0 Feb 24 11:10 proc\ndrwx------    2 root     root          4096 Dec  1 16:31 root\ndrwxr-xr-x    1 root     root          4096 Feb 24 11:10 run\ndrwxr-xr-x    2 root     root          4096 Dec  1 16:31 sbin\ndrwxr-xr-x    2 root     root          4096 Dec  1 16:31 srv\ndr-xr-xr-x   13 root     root             0 Feb 24 11:10 sys\ndrwxrwxrwt    2 root     root          4096 Dec  1 16:31 tmp\ndrwxr-xr-x    1 root     root          4096 Jan  8 21:12 usr\ndrwxr-xr-x    1 root     root          4096 Feb 24 11:09 var\n~ $\nPreviously /data was owned by root and only group was docker. I use ansible for maintenance on the manager nodes to ensure that the folder exists on all managers (and even workers) and also tried 777 on /data\nThe sock file is:\n~ $ ls -al /var/run/docker.sock \nsrw-rw----    1 root     docker           0 Feb 24 11:10 /var/run/docker.sock\nCmd to install portainer\n~ $ docker service create --name portainer --publish 9000:9000 --replicas=1 --constraint 'node.role == manager' --mount type=bind,src=//data,dst=/data \\ \n--mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock portainer/portainer \\\n-H unix:///var/run/docker.sock\noverall progress: 0 out of 1 tasks \n1/1: invalid mount config for type \"bind\": bind source path does not exist\nMaybe we are running into some docker cloud swarm mode beta problem?. Found some info here but still not sure if this is a bug or not\nhttps://github.com/moby/moby/issues/24089\n. I deployed the swarm on 24 feb: Docker version 17.12.0-ce, build c97c6d6\nTried:\ndocker service create --name load-balancer --replicas=3 \\ \n--mount type=bind,src=//data,dst=/usr/share/nginx/html nginx\nSame error.\nIn the mentioned ticket of moby/moby:\n\"Docker doesn't do data migration itself, so swarm can't be responsible for having the data on the machine. For stateful apps you need use something like ceph plugin to mount the storage on the node.\"\nI just wanted to try portainer by pinning it to manager1: but it seems that you are now forced into setting up a distributed filesystem (or use the volume mount). For now I think the only thing is to add a note to the docs :)\nI going to write a short tutorial about setting up Amazon EFS and use that as a distributed filesystem.\nThanks for all the help!. ",
    "devkws": "I am having the same issue with just 1 manager. The following command fails with\n1/1: invalid mount config for type \"bind\": bind source path does not exist\ndocker service create --name portainer --publish 9000:9000 \\ \n--constraint 'node.role == manager' \\\n --mount type=bind,src=/data,dst=/data \\\n--mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\nportainer/portainer -H unix:///var/run/docker.sock. I just ran into the same issue with a 1 manager deployment via docker for azure. . I need to check tomorrow but definitely latest stable as of yesterday. ",
    "yunielroque": "sudo mkdir -p /opt/portainer\nsudo chown $USER:docker /opt/portainer/. ",
    "6hopsaway": "yunielroque  -- That was such an obvious resolution.  Fixed the problem for me. Wish I could get 2 hours back.  . ",
    "ThyMYthOS": "It's not so obvious how to do it right, see https://github.com/portainer/portainer/issues/1401\nSo would be better to have a chapter in Portainer documentation as well.. ",
    "vGhost2000": "I try explain on examle:\n1) I have windows host machne with hyper-v virtual linux with docker+registry+portainer\n2) On virtual linux i have FS the following structure:\n/home/user/Projects/someProject1\n3) I share with samba whole /home/user/Projects/ folder.\n4) On windows host machne i mount disk S: to this folder and working in my preffered IDE on windows OS.\nWhen i need to build project i do this steps:\n1) C:\\WINDOWS\\system32> ssh user@192.168.88.71\n2) user@ubuntu$ cd ./Projects/someProject1\n3) user@ubuntu$ docker run --rm -v $(pwd):$(pwd) -v /var/run/docker.sock:/var/run/docker.sock -it registry.domain.me/someGroup/builder:latest /bin/sh\n4) root@310b4161ff4a# cd /home/user/Projects/someProject1\n5) root@310b4161ff4a# ./set_env.sh && cd ./docker && docker build -t registry.domain.me/someGroup/someProject1:${ENV_TAG} -f Dokerfile.dev ./../\nOR:\nroot@310b4161ff4a# ./set_env.sh && yarn install && yarn build && cd ./docker && docker-compose build\nwhere set_env.sh is bash script which export some ENV variables\n7) root@310b4161ff4a# docker login -u user -p passwd registry.domain.me\n8) root@310b4161ff4a# docker push registry.domain.me/someGroup/someProject1:${ENV_TAG}\n9) root@310b4161ff4a# docker-compose -d up\n10) root@310b4161ff4a# exit\nIt will be gareat if portainer do these steps for me.\nWhat I'm trying to ask to implement in portainer i try explain on next screenShots:\n1) i create build template once:\n\n2) then, i just click one button \"execute\":\n\n. ",
    "HaAlex": "Thanks for the quick response. :)\nI will have a look at the logging drivers.. ",
    "nallias": "@HaAlex a simple workaround -for those playing with apache- is to add another log destination than the default ones (mapped to stdout and stderr): https://serverfault.com/questions/536783/is-it-possible-to-have-2-error-logs-per-virtualhost-in-apache\nIn essence, in an apache vhost, replace:\n#ErrorLog ${APACHE_LOG_DIR}/error.log\n#CustomLog ${APACHE_LOG_DIR}/access.log combined\n\nWith:    \nErrorLog \"|$/usr/bin/tee -a ${APACHE_LOG_DIR}/error.log ${APACHE_LOG_DIR}/workaround_error.log\"\nCustomLog \"|$/usr/bin/tee -a ${APACHE_LOG_DIR}/access.log ${APACHE_LOG_DIR}/workaround_access.log\" combined.\n",
    "uduse": "I am having the exact same problem, but it doesn't matter if it's a stack-trace or not, it happens to all of my containers that prints all kinds of stuff. \n\nPortainer version: 1.16.4\nTarget Docker version (the host/cluster you manage):17.12.1-ce\nPlatform (windows/linux): linux\nCommand used to start Portainer: docker run -p 5704:9000 portainer/portainer\nBrowser: chrome. \n",
    "alexs20": "the same issue here, all and every line is incomplete. please fix it.\n\nbut CLI shows log properly\n~$ docker logs -f portainer\n2018/03/16 03:40:07 Starting Portainer 1.16.4 on :9000\n2018/03/16 03:40:24 http error: User not found (code=404)\n2018/03/16 03:50:46 Starting Portainer 1.16.4 on :9000\n2018/04/09 01:08:40 Starting Portainer 1.16.4 on :9000\n2018/04/09 03:21:45 Starting Portainer 1.16.4 on :9000\n2018/04/09 03:58:07 Starting Portainer 1.16.4 on :9000\n2018/04/09 03:58:42 Starting Portainer 1.16.4 on :9000\n2018/04/09 04:10:00 Starting Portainer 1.16.4 on :9000\n. @deviantony \nThe same\n\nWhy just not to create an extra parameter, such as \"Strip Leading Log Characters: 8\", so people can manually assign any value. @deviantony \nif you see my screenshot it is actually cutting the log of the Portainer itself ...\ni am running Xubuntu LTS 16.04.3 with the latest docker-ce. \nmaybe it is because of my region ... i am in Calgary/Canada,  so, the region selected is America/Edmonton\nbut anyway, will try to run the latest nginx today evening. yeah, it is somehow depends on interactive mode. when i ran nginx by just using -d flag it prints the log fine, but adding 'it' flags makes it to reproduce the problem\n[docker run --name some-nginx -d -p 8080:80 nginx] << OK LOG\n[docker run --name another-nginx -dit -p 8081:80 nginx] << BAD LOG. so far looks good on my work env... will try today evening on my home env docker, but i believe you have nailed it down. thanks\n. it also works fine in my home environment. properly showing all logs, exceptions, etc.... incorrect PR description\nyou should remove the header only if tty = false. ",
    "akbennett": "It seems to be tied to\n\"Config\": {\n\"Tty\": true\nIf I duplicate and re-deploy after setting only interactive (-i) instead of (-i -t) the log doesn't truncate, but I don't see the output that I should (as I require an interactive session). I need to confirm, but I wasn't seeing this a few weeks ago before I updated my docker runtime, now with on CE 18.03 it is affecting all containers in my template file where I set interactive: true\ntty: true\n\ntty:false\n\n. I can also confirm that the logs look right after loading portainer:pr1861 (even without restarting the suspect containers).  Great!. ",
    "DazWilkin": "@deviantony that would be great if you're willing.\nI'm a Googler and pinged the engineering team that owns GCR to gain their feedback on my solution. They may have a better approach.\nLet's please let this sit for a couple of days and I'll update when I hear back?. OK one of Google's Engineers replied to me and he suggested a more elegant solution using Service Accounts. This is also documented by Google (link). It requires a little more work but I've confirmed that it works:\nAssuming a GCR Repository named gcr.io/${PROJECT}:\n\nCreate a Service Account (called portainer) exclusively for use by Portainer for this repo:\n```\nROBOT=\"portainer\"\n\ngcloud iam service-accounts create ${ROBOT} \\\n--display-name=${ROBOT} \\\n--project=${PROJECT}\n2. Generate a JSON key for this Service Account called `portainer.key.json`:\ngcloud iam service-accounts keys create ./${ROBOT}.key.json \\\n--iam-account=${ROBOT}@${PROJECT}.iam.gserviceaccount.com \\\n--project=${PROJECT}\n3. Grant the Service Account \"objectViewer\" (can read) permission to the Google Cloud Storage bucket that backs the GCR repository. This is documented [here](https://cloud.google.com/container-registry/docs/access-control#granting_users_and_other_projects_access_to_a_registry).\ngsutil iam ch \\\nserviceAccount:${ROBOT}@${PROJECT}.iam.gserviceaccount.com:objectViewer \\\ngs://artifacts.${PROJECT}.appspot.com\n``\nYou should be able to confirm these settings by visiting the URLhttps://console.cloud.google.com/storage/browser?project=${PROJECT}`:\n\n\nCreate a custom registry in the Portainer UI\n`Name: gcr.io/${PROJECT}\nRegistry URL:  gcr.io/${PROJECT}\nUsername: _json_key\nPassword -- copy and paste the contents of portainer.key.json into this field\nAdd registry\n\n\nWhile these instructions may seem slightly obscure to the uninitiated, for someone that's interested in using Google Container Registry, they would be familiar with the Google Cloud Platform and would be familiar with these commands.. There's certainly no prohibition on using Swarm at Google but neither I nor my colleague mentioned Swarm in our comments. So I'm unclear where the irony arises. \nI'm using regular Docker Engine locally and Kubernetes Engine.. ",
    "jonjohnsonjr": "@deviantony that sounds great - feel free to bug me if our docs are unclear or if you run into issues.. ",
    "llitfkitfk": "caused by swarm down . /'p\u0254:tein\u0259/. https://github.com/portainer/portainer/issues/2546. ",
    "lahaxearnaud": "Same issue docker service logs worlds perfectly but in portainer I have the error: \nError grabbing logs: rpc error: code = Unknown desc = warning: incomplete log stream. some logs could not be retrieved for the following reasons: node s34e1eyn4tdn8sb56goseqmgw is not available, node 9qwv3hgwkrsnekyda3jquxnsh is not available\nOnly leader logs are available in portainer.\n. Same issue docker service logs worlds perfectly but in portainer I have the error: \nError grabbing logs: rpc error: code = Unknown desc = warning: incomplete log stream. some logs could not be retrieved for the following reasons: node s34e1eyn4tdn8sb56goseqmgw is not available, node 9qwv3hgwkrsnekyda3jquxnsh is not available\nOnly leader logs are available in portainer.\n. Nope. I still have the probleme. Nope. I still have the probleme. ",
    "gbhrdt": "I had exactly the same problem.\nRunning this command on the manager node fixed it for me. (Credits to https://github.com/moby/moby/issues/35011#issuecomment-373024725)\ndocker swarm ca --rotate. I can confirm the steps from @cadavre \nAnother way to make it \"work\" is to re-deploy the stack containing the services. When services are just updated via portainer their tasks just show as \"rejected\".. @deviantony You're totally right, the services are not all being restarted.\nBut there are still cases (like @cyberlink1 said) where you want to \"prepare\" changes to the stack file in portainer before updating the stack. I use the portainer compose editor heavily and sometimes I have stuff to change at the compose files (e.g. some new ENV vars) but don't want to restart the associated service. So what I miss is the ability to prepare those stack changes directly in portainer.. ",
    "Brookke": "My biggest issue around this at the moment is that unlike env the volume settings already exist under the advance menu, so I propose two options: \n1. Move the volume options out of the advanced options (only) when a user configurable binding is available.\n2. Separate optional volumes from preset volumes; this is slightly more complex to implement but would be more consistent. I appreciate this view, however the user already is being asked to enter environment variables, these too could be under the advanced menu like you mention, but they aren't. Now you might argue that environment variables are more important and required, however so are directory bindings for some containers such as Plex and Netatalk.\nFor users who want to use binding etc it's a very manual process right now and there is a lot of friction from remembering the bindings they need to do and setting them up properly in the first place, having a rich template support in my opinion would be a great feature that would open up portainer for a wider audience. You could even advertise/filter for templates that are \"click and deploy\" on the template list. You could even make a rule to not accept templates that require user bindings on the default feed and then most users wouldn't see this option unless they went out of their way to by changing the template feed they are using.. Any update on this?. ",
    "herwonowr": "Ahh, already update.. Hi @deviantony do you create this image with new PR FAv5, and update your grunt file? because I try this image and this image still using css file with \"../webfonts/\" font path dir.. Plase make sure your Docker daemon running and listen in TCP mode.. @djangofan you can try to create a directory in your home dir (e.g. /Users/username/portainer), and use the directory.\nTry this one:\ndocker run -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /Users/username/portainer:/data portainer/portainer\nNote: change username, with your real username.. Hey, @deviantony do you aware of this issue, I think we can move templates to github also.. Hi @deviantony fixed in the last commit. Hi, @deviantony I have tested this PR, it seems fixes the issue.. Hi, @deviantony I think it's should be added to all requests.. Hi, @deviantony yes, I mean API requests as well.. Hi @mihneaspirescu try using URL=\"tcp://10.9.217.22:2376\". Hi @deviantony please take a look at this line, It's doesn't match the registry handler, I think it's should be if match, _ := path.Match(\"/images/*/*/push\", requestPath); match {\nhttps://github.com/portainer/portainer/blob/2a9ba1f9a2abd0230dbf26c44dd6126525a8b9f4/api/http/proxy/transport.go#L261. It's been changed. hi, @ikarpovich I think we also need to add JSON content-type in the error header.\nhttps://github.com/portainer/portainer/blob/4f0e752d00890b7195f820cd53d7d66dc31d3bff/api/http/error/error.go#L15-L22. Yes, we need all of these, because of some icon from the previous version using prefix \"fa\" need to change to \"far\" instead of \"fas\". And for the brand icon, yes we use some of the icons like an example in the about page.. This section used to prepare replace the \"../webfonts\" string in the css file for fontawesome v5, because FA v5 using \"webfonts\" path dir instead of \"fonts\".. I used this to find and replace \"../webfonts/\" string in the css file because I don't want to use two directories to store the font files, so first grunt copy all the fontawesome font files to \"fonts\" directories and then grunt replace \"../webfonts/\" string with \"../fonts\" in the css file.. Here is an example of FA5 brand we used.. ",
    "snowshow": "You could try:\nbalena run -d -p 9000:9000 -v /var/run/balena.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer:arm\n. ",
    "pkoziol": "Now, I see I've mixed it in original commit. In my screenshot, EXPOSE 3001 layer is one before last, so it should have depth = 1 assuming that each new layer is added on the top of the previous one and top layer has depth = 0.\nAnyway, I've replaced all 'Depth' to 'Order'.. I wanted to be consistent with docker history <image id>, but maybe not the best idea when column is named \"Order\". Changed.. ",
    "atix1906": "Thank you for your answer. \nIs it possible to provide an example on how to buid an image via the API from URLs, e.g. from a git repo URL?. Perfect, thank you!. ",
    "eferley": "That would cover point 1 perfectly !. Sorry, I had to freeze my install so it's still an old version now...can't check. @sudipto92 I stumbled on the same problem and @HerwonoWr is right.\nYou can check that with ps x |grep dockerd and netstat -ln | grep 2375 on the host running the docker daemon.  Be aware of the important security considerations when \"opening\" the docker daemon to listen for TCP.\nThis is a pointer to the docker docs I had missed to set this up : \nhttps://docs.docker.com/engine/reference/commandline/dockerd/#daemon-socket-option\n. Hmm, @sudipto92 it all depends on your linux instance (platform/distribution) and the way it runs the Docker daemon.\nI think this issue does not actually belong to portainer but more to your specific docker/linux distribution.\nI can tell you about the setup I use, which is only one specific example of such \"distribution\" : AWS EC2 instance created from the latest AmazonLinux AMI (pre-installed docker, SystemV init): \nOn this specific platform, you can customize dockerd startup options in the /etc/sysconfig/docker file, which is used by the daemon startup script (/etc/rc.d/init.d/docker).  \nMy /etc/sysconfig/docker with the OPTIONS line edited to include both Unix socket + TCP 2375 on all its IP addresses : \n```\nThe max number of open files for the daemon itself, and all\nrunning containers.  The default value of 1048576 mirrors the value\nused by the systemd service unit.\nDAEMON_MAXFILES=1048576\nAdditional startup options for the Docker daemon, for example:\nOPTIONS=\"--ip-forward=true --iptables=true\"\nBy default we limit the number of open files per container\nOPTIONS=\"--default-ulimit nofile=1024:4096 -H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375\"\nHow many seconds the sysvinit script waits for the pidfile to appear\nwhen starting the daemon.\nDAEMON_PIDFILE_TIMEOUT=10\n```\n:warning: !!! BEWARE OF SECURITY ISSUES !!!\nFrom the docker docs I mentionned in https://github.com/portainer/portainer/issues/1729#issuecomment-373324800 : \n\nIf you need to access the Docker daemon remotely, you need to enable the tcp Socket. Beware that the default setup provides un-encrypted and un-authenticated direct access to the Docker daemon - and should be secured either using the built in HTTPS encrypted socket, or by putting a secure web proxy in front of it. You can listen on port 2375 on all network interfaces with -H tcp://0.0.0.0:2375, or on a particular network interface using its IP address: -H tcp://192.168.59.103:2375. It is conventional to use port 2375 for un-encrypted, and port 2376 for encrypted communication with the daemon. Having the node name on tasks lists (in stack or service details) would be useful as well : for example, AWS EC2 sets the hostname based on the private IP (generally dynamic, especially when using Auto-Scaling Groups) and if you gave a specific Name to some nodes in Portainer, you have to go to the swarm management to chek which node is IP-XX-YY-ZZ-TT, or use the docker CLI (docker service ps...)\n. \n",
    "joshuaavalon": "I have the same problem when deploying gitlab. I am looking at the console output. It works fine at start but the error show up suddenly. It probably caused by some string in the console output.. @deviantony I found it in \"Container logs\" (Click on the document icon). It occurred during the initialization of gitlab.. ",
    "dcharbonnier": "@deviantony please let us know when you fix the build, thx !. An access with credential is not really useful IMO, I don't think we want to put our credentials on portainer, we could create a specific user with restricted access but it's really complicated, an ssh access would be way better.\nGithub, gitlab, they all have a concept of deploy key that can be used for this purpose, you can only clone the repository and it's a read only access.\nhttps://godoc.org/gopkg.in/src-d/go-git.v4/plumbing/transport/ssh\nRepositoryAuthentication could be an enum None|Basic|Ssh. ok @deviantony, so this PR works for me, I tested it. \nJust I won't use it because IMO the point of taking a stack from a git url it to be able to version the stack and to update it with a simple button and the API. \nIf I have to destroy the stack and create a new one I don't see the enhancement but if some people want it it's done.. I would go for a key generated by portainer, the private key is never displayed (stored on the server on the stack folder so if we really need we can change/upload it with ssh) and the public one is just displayed (no edit), with the possibility to copy it.\nThen the user just need to add it to github (gitlab work the same)\n\n. not an issue for me anymore, I was interested on the project until I realized that there was no plan to support a swarm.. Yes. Exactly, sorry. The correct alpine image name is alpine, Alpine does not exist. ",
    "YoKv": "i find this issue in version 1.17.1\ni can deploy stack use git repository succesfully \nbut i edit git repository (hosted gitlab) and click the button \"update the stack\"\nthe yml file is not update and  success message is shown. @deviantony portainer/portainer:develop still failed\nthe commit change\n\n\"Update stack\" button  success message,but in the stack edit there is no change,and services are not reduce\n\n. ",
    "viyullas": "same here (version 1.17.1). Not for me.. I have a repository on gitlab with just deploys an image with a port mapping. I deploy it with the import form gitlab feature on portainer.\nThen just change the port binding on gitlab side and try to update the stack on portainer. No changes.. Portainer has all the necessary data to make the pull request.\nWhat's the intended use if not that? To get an initial configuration??\n. ",
    "summershrimp": "+1\n. ",
    "Jonher937": "+1 this is/was super useful to have. ",
    "sumodx": "Good news :-)\nI just tested the // notation on Docker for Windows and it works!\nSo basically we can offer portainer deployed on Windows hosts to manage the hosting Docker irrespective of Toolbox or Docker for Windows with this approach.\nAs its marked as \"good first issue\" I volunteer to make the change, let me know what to do.\nThanks!. Ok, yes it did give me the wrong idea that it wouldn't work at all on\nWindows. Found the // elsewhere and came back, some might not.\nThanks for creating such a useful utility!\nOn Fri, Mar 16, 2018 at 2:38 AM, Anthony Lapenna notifications@github.com\nwrote:\n\n@sumodx https://github.com/sumodx\nWe know that this is working for Toolbox & Docker for Windows. It's just\nnot available on Windows server 2016 actually. We just need to adjust that\nwarning in the codebase to be more precise maybe.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1728#issuecomment-373523444,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AA5VkzsQ5HM5tFyZEX4cApgF8cMhsnaFks5tethegaJpZM4SrEYm\n.\n. \n",
    "sudipto92": "I have also tried below command:\n--->  docker -H machine_name.domain.com:2375 info\noutput:\n---> error during connect: Get http://machine_name.domain.com:2375/v1.32/info: dial tcp Ip_Address:2375: connectex: No connection could be made because the target machine actively refused it.\n. I have follow the below url :\nhttps://docs.microsoft.com/en-us/virtualization/windowscontainers/manage-docker/configure-docker-daemon\nCurrently it is working for Docker Windows instance.\nafter running sc config docker binpath= \"\\\"C:\\Program Files\\docker\\dockerd.exe\\\" --run-service -H tcp://0.0.0.0:2375\"\nCan you suggest how same will running for linux instance?. @deviantony Can you provide document/url how to Configure the Docker engine for Windows and Linux containers. @deviantony yes I tried this, docker daemon is Configured for Windows container but still i am not able to Configure docker dameon for Linux container. Pls suggest me how to proceed.. it is same port 2375..\nMy issue is i am not able to initalize the docker daemon for linux container (Docker for windows). Docker version:   17.12.0-ce-win47 (15139)\nDocker engine:   17.12.0-ce. @dcharbonnier error still persist with Alpine image. I only tried to install Alpine on Linux container.\nI have already setup the Linux on hyperv mode\nWhen I run from cmd it will fetch the Alpine image but when I tried portainer to fetch image it shows error message. ",
    "gardellajuanpablo": "As google shows this thread for this problem, it can be fixed using the following endpoint: tcp:// docker.for.win.localhost:2375. Remember to enable tcp from docker settings at General tab.. As google shows this thread for this problem, it can be fixed using the following endpoint: tcp:// docker.for.win.localhost:2375. Remember to enable tcp from docker settings at General tab.. ",
    "cicorias": "ok, in the settings on the Portainer admin screen to the remote, ensure its just docker.for.win.localhost:2375\nthis of course requires the setting, unsecure, on Docker for windows Expose daemon on tcp://localhost:2375 without TLS\nWish we call could use same prefixes in documents, etc. . ",
    "petrosmm": "thanks to @G07cha and @cicorias I finally figured out how to connect from Portainer using LCOW it was docker.for.win.localhost:2375 ahhhh I was reading and I just could not get it!!!! HOW MADDENING!!!!!!!! here is a gist I just found pertaining to this issue. ",
    "wzshuang": "@ncresswell Thanks for your quickly reply, but the firewall is stopped, and still can't add endpoint.. @deviantony \nI found that host217 run docker with tlsverify:\n\nthen I add endpoint with tls enabled, and upload certs on host218 located at ~/.docker/machine/certs,it worked.\nThanks.. ",
    "djangofan": "Ok, I tried it and it didn't work.  I event re-installed Docker completely like so:\n\nuninstalled Docker and Virtualbox completely: including docker-machine rm default\ninstalled latest full install of VirtualBox\ninstalled Docker.dmg,  verified default docker-machine on 192.168.99.100\ninstalled extra Docker-Toolbox stuff, including Kitematic\n\nHere is the command I used to start Portainer, which fails to start it (see error below) :\n\ndocker run -d -p 9000:9000 --name=portainer -v /var/run/docker.sock:/var/run/docker.sock -v \"${HOME}/portainer:/data\" portainer/portainer --no-auth\n\n```\nme@MACPRO ~ $ docker run -d -p 9000:9000 --name=portainer -v /var/run/docker.sock:/var/run/docker.sock -v \"${HOME}/portainer:/data\" portainer/portainer --no-auth\nUnable to find image 'portainer/portainer:latest' locally\nlatest: Pulling from portainer/portainer\nd1e017099d17: Pull complete \n84edb4fad689: Pull complete \nDigest: sha256:c7d065f721266e24342f1b2d6fa6e5b451a0057f55df1a62dbf4d4513b629c8d\nStatus: Downloaded newer image for portainer/portainer:latest\n17ce28431750050c9b6827c5611112ce371144306e57fa4a7f4bb0cbcdba13fb\nme@MACPRO ~ $ docker logs portainer\n2018/03/17 19:45:50 Migrating database from version 0 to 8.\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x51c7c0]\ngoroutine 1 [running]:\ngithub.com/portainer/portainer/bolt.(Migrator).retrieveLegacyResourceControls.func1(0xc420146e00, 0xb18ce0, 0xc420146e00)\n    /go/src/github.com/portainer/portainer/bolt/migrate_dbversion1.go:66 +0xa0\ngithub.com/boltdb/bolt.(DB).View(0xc420142b40, 0xc4201bdae0, 0x0, 0x0)\n    /go/src/github.com/boltdb/bolt/db.go:629 +0x9f\ngithub.com/portainer/portainer/bolt.(Migrator).retrieveLegacyResourceControls(0xc4201bdcb0, 0x0, 0xc420146d20, 0xdfc3c0, 0xc420233cc0, 0xc4201bdb98)\n    /go/src/github.com/portainer/portainer/bolt/migrate_dbversion1.go:101 +0xa0\ngithub.com/portainer/portainer/bolt.(Migrator).updateResourceControlsToDBVersion2(0xc4201bdcb0, 0x0, 0x0)\n    /go/src/github.com/portainer/portainer/bolt/migrate_dbversion1.go:10 +0x40\ngithub.com/portainer/portainer/bolt.(Migrator).Migrate(0xc4201bdcb0, 0x2a, 0xc4201bdc90)\n    /go/src/github.com/portainer/portainer/bolt/migrator.go:42 +0x231\ngithub.com/portainer/portainer/bolt.(Store).MigrateData(0xc42024f650, 0x0, 0x0)\n    /go/src/github.com/portainer/portainer/bolt/datastore.go:141 +0x226\nmain.initStore(0xaf101b, 0x5, 0xe06600)\n    /src/cmd/portainer/main.go:52 +0x101\nmain.main()\n    /src/cmd/portainer/main.go:176 +0x97\n```\nPermissions look ok to me:\nme@MACPRO ~ $ ls -al portainer/\ntotal 24\ndrwxrwxrwx   5 me  staff    160 Mar 17 12:10 .\ndrwxr-xr-x+ 51 me  staff   1632 Mar 17 12:10 ..\ndrwxr-xr-x   2 me  staff     64 Mar 17 12:10 compose\n-rw-------   1 me  staff  32768 Mar 17 12:45 portainer.db\ndrwxr-xr-x   2 me  staff     64 Mar 17 12:10 tls\nme@MACPRO ~ $ ls -al /var/run/*.sock\nlrwxr-xr-x  1 root  daemon  60 Mar 17 11:54 /var/run/docker.sock -> /Users/me/Library/Containers/com.docker.docker/Data/s60\nsrw-------  1 root  daemon   0 Mar 17 11:15 /var/run/vpncontrol.sock. @deviantony   Thanks, that fixed it, and I had it temporarily working.   I wanted to make sure and so I deleted the container and tried re-creating it again and now I can't get it working again.   I'll let you know once I figure out the cause.\nThis is so frustrating.  Error I get now is:\njausten@MACPRO ~ $ docker run -it -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer:develop --no-auth\nUnable to find image 'portainer/portainer:develop' locally\ndevelop: Pulling from portainer/portainer\nd1e017099d17: Pull complete \n50c803e4d8bb: Pull complete \nDigest: sha256:95e4bee5151d50f1bae1ff1b3581411cad3f26bc703a7d0136c275bfc50cf7e4\nStatus: Downloaded newer image for portainer/portainer:develop\n2018/03/17 23:18:28 Starting Portainer 1.16.4 on :9000\n2018/03/17 23:38:15 http error: Endpoint not found (code=500)\n2018/03/17 23:38:16 http error: Endpoint not found (code=500)\nI am able to temporarily work around this by running socat on my local machine at 192.168.0.8:\nsocat TCP-LISTEN:2377,reuseaddr,fork UNIX-CONNECT:/var/run/docker.sock\nThen, Portainer can connect to that.. I am able to resolve this with a workaround of using a daemonized socat, instructions here:  https://gist.github.com/djangofan/d202ff132ca72ba4918d60846ec1fe76. ",
    "hktalent": "@djangofan \n```\ndocker run -it --cap-add=SYS_ADMIN --cap-add=NET_ADMIN --cap-add=ALL -v /Volumes/mtx_hktalent/mydb/mytools:/root/mytools  --net=host --expose 80-65530 -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix --device /dev/cu.Bluetooth-Incoming-Port:/dev/Bluetooth-Incoming-Port --device /dev/tty.Bluetooth-Incoming-Port:/dev/tty.Bluetooth-Incoming-Port --privileged  --name=\"kali-date '+%Y%m%d'\" $dckImg /bin/bash\ndocker: Error response from daemon: Mounts denied: EOF.\n$ docker run -it  -v /Volumes/mtx_hktalent/mydb/mytools:/root/mytools  --net=host --expose 80-65530 -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix  --privileged  --name=\"kali-2\" $dckImg /bin/bash\ndocker: Error response from daemon: Mounts denied: EOF.\ndocker run -it  --privileged  --name=\"kali-date '+%Y%m%d'\" $dckImg /bin/bash\nis ok\n```\n. ",
    "astrodad": "Sorry if I wasn\u2019t clear. This happens immediately when I log into the site. I tried to remove the container, and I get this when I try to define the local endpoint. . I\u2019m glad it\u2019s not just me. Is there some way to look at the Portainer logs? Issuing docker logs  doesn\u2019t yield anything useful, nor can I bash into the container. . That took care of it. So what\u2019s the best path forward? User a newer version of Docker?. ",
    "terxw": "Same here:\nPortainer version: pulled 18.03.2018\nTarget Docker version (the host/cluster you manage): Docker version 1.12.6, build 78d1802\nPlatform (windows/linux): LM 18.2/Ubuntu 16.04\nCommand used to start Portainer (compose.yml):\n```\n  portainer:\n    image: portainer/portainer\n    container_name: portainer\n    restart: always\n    privileged: true\n    command: --templates http://templates/templates.json\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ${USERDIR}/docker/portainer/data:/data\n    ports:\n      - \"9010:9000\"\n    environment:\n      - PUID=${PUID}\n      - PGID=${PGID}\n      - TZ=${TZ}\n```\nand  I tried running portainer from commandline with the same results:\n```\ndocker run -d -p 9010:9000 --restart always  --name portainer2 -v /data/docker/portainer/data:/data -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer\n```\nI tried editing /etc/default/docker, where i added:\n```\nDOCKER_OPTS=\"-H tcp://127.0.0.1:2375 -H unix:///var/run/docker.sock\"\n```\nbut the results are the same\ndocker service status\n```\n\u25cf docker.service - Docker Application Container Engine\n   Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)\n   Active: active (running) since Po 2018-03-19 17:08:32 CET; 3min 55s ago\n     Docs: https://docs.docker.com\n Main PID: 19540 (dockerd)\n    Tasks: 110\n   Memory: 41.7M\n   CGroup: /system.slice/docker.service\n           \u251c\u250019540 /usr/bin/dockerd -H tcp://127.0.0.1:2375 -H unix:///var/run/docker.sock\n           \u251c\u250019563 containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --shim containerd-shim --metrics-interval=0 --start-timeout 2m --state-dir /var/run/docker/libcontainerd/containerd --runtime runc\n           \u251c\u250020060 /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 9011 -container-ip 172.19.0.3 -container-port 9091\n           \u251c\u250020074 /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 9012 -container-ip 172.19.0.2 -container-port 9012\n           \u251c\u250020082 /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 6881 -container-ip 172.19.0.2 -container-port 6881\n           \u251c\u250020091 /usr/bin/docker-proxy -proto udp -host-ip 0.0.0.0 -host-port 6881 -container-ip 172.19.0.2 -container-port 6881\n           \u251c\u250020099 /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 9013 -container-ip 172.19.0.4 -container-port 8080\n           \u251c\u250020107 /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 9010 -container-ip 172.19.0.5 -container-port 9000\n           \u251c\u250020114 containerd-shim 60936dbcc06ec27ea65dcf21c9600459ca301059520bdf1373b4dd231b7f701d /var/run/docker/libcontainerd/60936dbcc06ec27ea65dcf21c9600459ca301059520bdf1373b4dd231b7f701d runc\n           \u251c\u250020124 containerd-shim d261c461e5c0df0345d283eedca42f3e593c0556a90e135054349e40ab397409 /var/run/docker/libcontainerd/d261c461e5c0df0345d283eedca42f3e593c0556a90e135054349e40ab397409 runc\n           \u251c\u250020144 containerd-shim 9cccc253bc32b378fd36830c48983b07ba1810b408e4c247a4a195e90f0e1178 /var/run/docker/libcontainerd/9cccc253bc32b378fd36830c48983b07ba1810b408e4c247a4a195e90f0e1178 runc\n           \u2514\u250020169 containerd-shim 00089981051a205a4b531c2b6915951bbeb1ea8869bc4f3c6a6c9e1899984c60 /var/run/docker/libcontainerd/00089981051a205a4b531c2b6915951bbeb1ea8869bc4f3c6a6c9e1899984c60 runc\n. Thanx for fixing this issue,portainer/portainer:develop``` is working!. ",
    "leokun": "Hy there. I have the same issue (using docker 17.03.2-ce).\nNone of  develop or pr1750 are working for me. Also, with those two I can't add any endpoint at all.. ",
    "glego": "Same here\n\n. ",
    "Ricapar": "Looks like someone at cloudinovasi.id forgot to cron their Let's Encrypt cert renewal :)\nWould it make more sense to have the image assets as part of portainer itself, rather than relying on external hosts?\nI can see this being an issue for anyone running portainer on an environment where they don't have external internet access.. ",
    "ChauskinRodion": "@jazoom hello. \nIs your question somehow related to zero-down-time update of docker containers? \nI'm trying to use portainer for that, have 2 replicas, but still hitting 'update service'  or 'apply changes' button shows me downtime for couple seconds. \nAs i see you use order: start-first option. where do you add in in stack file? \nThanks for help. @jazoom Thanks!. ",
    "anthraxn8b": "Hi!\nI got the same behavior by:\n1. deploying a stack via API with \"null\" swarmID (this resulted in an \"external\" stack)\n2. removing the \"external\" stack via ssh/docker binary\n3. deploying the same stack via API again (FAILS WITH: \"A stack already exists with this name\".)\nIs there any (simple) workaround to get the situation resolved until the bug is fixed?\nUpdate\nI accidentally used an old swarm id and that seems to be part of the strange behavior!. Info: Also empty body and 200 when updating stacks.. ",
    "j481": "I've developed a workaround script for this issue:\n Determine actual Swarm Custer ID (docker info)\n Stop Portainer Stack/Service/Container\n Use the boltdb database (portainer.db) \n Use the \"stacks\" bucket\n Get the the desired stacks by Id/Name \n Replace the old SwarmId with the new one\nI'm not a Go developer so the script is quite noobish and not determined for publication.\n. ",
    "jasonayre": "Also running into the\nDeployment error\nA stack already exists with this name, issue. \nUsing AWS/swarm, using a persisted volume via cloudstor. Not visibly in the UI (so unable to remove), and not there when doing docker stack ls etc, but it was still in portainers db (which was issue) -- I was able to resolve the issue using the portainer api as suggested above.\nAlso quick copy paste api steps for anyone else running into this:\n\n\nget token\nhttp POST https://example.com:9000/api/auth Username=\"admin\" Password=\"password\"\nreturns\n{\n    \"jwt\": \"mytoken\"\n}\n\n\nget stacks from api\nhttp GET https://example.com:9000/api/endpoints/1/stacks \\\n\"Authorization: Bearer mytoken\"\n\n\ndelete stack using returned stack id above\n\n\nhttp DELETE https://example.com:9000/api/endpoints/1/stacks/myapp_id \\\n\"Authorization: Bearer mytoken\"\n. ",
    "fe2bon4": "Hi Devian Antony.\nOn 1.18.1\nWe recently lost one of our manager nodes that portainer was managing. \nAfter that, All stack definitions turned to \"limited\" after bringing another manager in to replace.\nWe tried to just delete the stack and redeploy since we have the compose files but it said \"Cannot delete stack\". \nWent into the new manager and delete the stack, the stack also went away in portainer.\nTried to redeploy the stack with the same name and portainer said that:\n\nAlso tried to delete the stack using the 1.18.1 API and it returned:\n{\n    \"err\": \"Invalid query parameter: endpointId\"\n}\nFinally, i downloaded the portainer.db with the hopes of just opening it up and deleting the stack record.\nThis problem has not been solved so far. \nAm I doing anything wrong?\n. @deviantony \nThanks!!!\nThis worked properly and fixed our deployment.\nWill sure to note the scenario and follow the steps to fix this. \nI understand that keeping in sync with the swarm manager is a really tricky thing but I'm hoping we can get around to avoiding this problem again.. ",
    "Haxy89": "Sorry but I wrote wrong title for this feature request.\nI want to set up uid and gid for portainer process when starting portainer container.. Would be great to add two env parameters to portainer container start command, something like this:\ndocker run -d -p 9000:9000 --restart always -e PUID=1001 -e PGID=101 -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer\nAfter that all portainer processes into container should run as uid 1001 ang gid 101. \nThat means when I provide /data volume, owner for this volume and all files in it should be 1001 and group 101. I will try --user flag later and let you know.\nI could not found --user flag in documentation, is it out of date?. --user flag works but can not mount /var/run/docker.sock - need to be admin.\nIs it possible to mount docker.sock as admin and then use user from --user flag?. Full hd is low res? :D. Hi @deviantony \nI will attach logs and more info later today :). @deviantony \nLog:\n2018/08/07 14:52:57 http error: Unable to register HTTP proxy for the endpoint (err=open /data/tls/1/cert.pem: no such file or directory) (code=500)\nPortainer run command:\nsudo docker run -d -p 9000:9000 --name Portainer --restart always  -v /home/pi/portainer/certs:/certs -v /home/pi/portainer/data:/data portainer/portainer  -H tcp://192.168.0.5:2376 --tlsverify\nCerts are in /home/pi/portainer/certs but after I checked /data/tls folder is empty so this is why error occurs.. @deviantony \nI think problem is in this part:\n\nUpdate endpoint action sends null values in certs paths:\n\n. Still occurs in newest Portainer. \nCan anyone take care of it?\nThanks. I also want to add that Portainer should save position on left sidebar and columns in main containers table. Currently sidebar is always expanded and all columns are always show. Is it possible to add local and remote docker env at creation time?:\ndocker run -d -p 9000:9000 --name Portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /home/pi/portainer/certs:/certs -v /home/pi/portainer/data:/data portainer/portainer -H tcp://192.168.0.5:2376 --tlsverify -H unix:///var/run/docker.sock\nWill these visible as separate endpoints on Portianer home screen? \nCan I set endpoint name at creation time or do I need to change it after from web ui?. ",
    "rcdailey": "@deviantony How do you go about adding a user to the docker group from inside the container?. Sorry to ask but when will v3 be supported? I just want to use Portainer as a frontend GUI for docker-compose command line. This is just for my home lab. One physical machine, I don't deal with pods/clusters/nodes. Very simple setup. I just need to be able to manage my docker compose projects via the web application.\nOnce this is implemented, will I be able to convert an existing stack to a Portainer-managed one? Maybe I can import the docker-compose.yml file used to create it on the command line?. @MicahZoltu I ran that command but it just initializes my machine as a swarm manager. However, all of my old docker compose services are still the same as they were.\nAlso I'd like to know what the limitations are with swarm vs compose. For example, if --privileged isn't supported that is going to be a no-go. Is there an official list of stuff that swarm doesn't support but compose does?\nI'd still like to know if compose v3 is on the roadmap.. After having messed around with Docker Swarm a bit, I decided it's way overkill for my homelab. I really don't have more than one server, I don't need the complexities introduced by these features. Really if it just supports v3 compose I think that's the correct direction to go.. What's the reason for that?\nOn Mon, Mar 11, 2019 at 4:40 PM Neil Cresswell notifications@github.com\nwrote:\n\nWe will not be adding compose v3 support for anything but Swarm\nenvironments.\nFrom: Robert Dailey notifications@github.com\nSent: Tuesday, 12 March 2019 10:08 AM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Neil Cresswell neil@cresswell.net.nz; Comment \ncomment@noreply.github.com\nSubject: Re: [portainer/portainer] support compose version > 2 (#2054)\nAfter having messed around with Docker Swarm a bit, I decided it's way\noverkill for my homelab. I really don't have more than one server, I don't\nneed the complexities introduced by these features. Really if it just\nsupports v3 compose I think that's the correct direction to go.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2054-23issuecomment-2D471730187&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qbwK6Y07GS2E17K2cC2ekvBDn8ONCWhfKzuBo9L-adk&s=UuE75JJKLmjoVAAq2xax6scfFz60OM1-bopcXTYPqpU&e=>,\nor mute the thread<\nhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlaY5dq9g5kGo9dTM1CnznTy7V-5FhGks5vVsWUgaJpZM4VWpim&d=DwMFaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=qbwK6Y07GS2E17K2cC2ekvBDn8ONCWhfKzuBo9L-adk&s=QdnGbEg6kd4PuyOoRvb5d_wUOAj99gZScoqh72bvLxA&e=>.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2054#issuecomment-471741061,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABr6dh6WSLunMIS1tIAhmxw1Db5bGJjQks5vVs1JgaJpZM4VWpim\n.\n. Thank you for explaining. Does that mean that going forward, even for docker compose, doing services without swarm is not getting long term support? In other words, is it better to eventually move to swarm even if I only have 1 machine and do not need replication/etc and stuff?. For the record, this is happening on the following URI:\n\nhttps://portainer.domain.com/#/auth?redirect=portainer.auth\n\nI was assuming this was a reverse proxy configuration issue (NGINX). Looks like this is the root cause. Submitting my login information from that URI doesn't move me to anything. But if I refresh the page, I am logged in and on the dashboard.. ",
    "nkolban": "Howdy ... logging into Portainer shows it as being 1.16.3.   Delighted to run any tests or diagnostics desired.. Thank you Anthony.  What fantastic support.  As soon as I upgraded to 1.16.4 the screen issues I had all disappeared (see following).  Thank you again ... delighted user.\n\n. ",
    "marxenegls": "I have a similar issue ..\nWhen using the console in any container  the window jumps out of focus, the input line is out of sight , i tried using full screen mode but the same thing happens. It makes it very difficult to work with , other than that the app is great . \nTechnical details:\n\nPortainer version: 1.16.4\nTarget Docker version (the host/cluster you manage): 18.03.0-ce\nPlatform (windows/linux): arm64  Raspbian GNU/Linux 8 (jessie) (hypriot)\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer):\nTarget Swarm version (if applicable): \nBrowser: Opera. \n",
    "AkeluX": "Hello. I've just had the same issue with 1.17.0:\n- Enable and configure LDAP authentication\n- Logout\n- Try to login with the admin user and I get \"invalid credentials\"\nThe response status is HTTP 422 as well and instead of the usual HTTP 400 for other attempts with bad credentials. My admin password did contain \"&\". By the way, the LDAP users were working.\nI then wiped the data folder and went through the same steps, but with a password that doesn't contain \"&\". I could login.\nLet me know if you need more information or if I can try something else for you.. Yes, I've just tested 1.19.1 with the following passwords:\n- test&test18 -> can't login after enabling LDAP\n- test*test18 -> works fine after enabling LDAP\nI'm testing with this LDAP server: https://hub.docker.com/r/osixia/openldap/\nLet me know if you want more information.. ",
    "IvanJosipovic": "I just experienced this issue as well.. ",
    "kaeverens": "still happening. at least now I know why I can't login...\nand I don't remember enabling LDAP. just a fresh installation of Portainer. ",
    "vladbabii": "At the most basic level, this is what i would like:\n- when starting portainer, if there is key files in host,  generate one and display it whole once when setting up the user and password\n- if there are one or more keys (mounted volume,etc), list them and maybe show the public part of it.\nThis would allow me to deploy portainer reliably by mounting a network-shared volume wherever it runs in the cloud. \nAnything else I would consider \"extra\"...\n. ",
    "turbo": "This feature is also important for us. Additionally, I'd like to add VSTS (now called Azure DevOps) to the list of (tested) providers. There's another bug related to this: #1926. This seems to be the same error as https://github.com/portainer/portainer/issues/1926#issuecomment-391256007. Yes, the credentials are verified. For one, they work with docker login. Additionally, our usual build server (VSTS) is using the same credentials without issues.. Yes I have, yes it is.. There is definitely nothing wrong with the credentials. I even tried it on the manager node itself:\ntext\n$ docker login\n   ...\n$ docker pull ***/frontend\n...and now the image appears correctly in \"images\" in the portainer dashboard.\nHowever, when trying to use portainer to pull - no dice. Pull access denied. I have removed and re-added the credentials multiple times, it the exact same result.. This doesn't seem to be a new issue: https://github.com/portainer/portainer/issues/349#issuecomment-304901429. It's meant to say 1.17.0. I have meanwhile created another portainer deployment to double check, it exhibits the same behavior. I can also repro this locally.\n\nIt's not a credential issue as they are valid in all other systems\nIt's not a docker issue, as docker login + pull on the manager host works\n\n\nCould it be that you're hitting this issue #1434 ?\n\nNo, there is no period and the error message is different. The error is verbatim the one I posted in the initial above. It's a docker message, meaning the credentials never reach docker.\nFor the record, the image name is xman/frontend. Where \"x\" is a number.. This is how I deploy portainer btw:\n```yaml\nversion: \"3.6\"\nservices:\n  traefik:\n    image: traefik\n    command: \n      --web \\\n      --docker \\\n      --docker.swarmmode \\\n      --docker.domain=*.io \\\n      --docker.watch \\\n      --logLevel=DEBUG\n    networks:\n      - traefik-net\n    ports:\n      - \"80:80\"\n      - \"8080:8080\"\n      - \"443:443\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ./traefik.toml:/traefik.toml\n      - ./acme.json:/acme.json\n    deploy:\n      labels:\n        - \"traefik.port=8080\"\n        - \"traefik.docker.network=traefik-net\"\n        - 'traefik.frontend.rule=Host:router..io'\n        - 'traefik.enable=true'\n        - \"traefik.frontend.auth.basic=admin:*\"\n      placement:\n        constraints: [node.role==manager]\n    environment:\n      - DO_AUTH_TOKEN=\nportainer:\n    image: portainer/portainer\n    volumes:\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n      - \"/var/port/data:/data\"\n    networks:\n      - traefik-net\n    deploy:\n      placement:\n        constraints: [node.role == manager]\n      labels:\n        - \"traefik.enable=true\"\n        - \"traefik.port=9000\"\n        - \"traefik.docker.network=traefik-net\"\n        - \"traefik.frontend.rule=Host:cloud.****.io\"\nnetworks:\n  traefik-net:\n    external: true\n```\nAnd just for complete completeness, my firewall config is the following:\n\nAll swarm nodes can talk on any port to each other (TCP and UDP)\nThe manager node additionally exposes port 80, 443\nAll nodes expose 22\n\nEverything else works absolutely flawlessly.. Yes.. I'd really appreciate some guidance as to how to diagnose this, like\n\nHow and where can I verify that Portainer actually saved the credentials?\nWhere can I find related log entries for the failure?\n\nSomewhere along the way the error occurs, so it would be helpful to actually see what's happening.. @deviantony Yep, the credentials are there, and are indeed correct. So, what would be the next thing to check?\n```text\n$ strings portainer.db | grep -i dockerhub\ndockerhub\nDOCKERHUB{\"Authentication\":true,\"Username\":\"\",\"Password\":\"\"}endpoint_groups\ndockerhub\nDOCKERHUB{\"Authentication\":true,\"Username\":\"\",\"Password\":\"\"}endpoint_groups\n```. I'd like to take you up on that offer for a debug build. . BTW, as another data point: I've also created a private Azure registry. Setting the credentials for that in Portainer and then pulling the image works.. Thanks!\nA last additional data point: Quay also works.. So, here's what happened. First, a log of a successful login with Quay as the registry:\ntext\n2018/05/18 08:35:10 [DEBUG] - Original X-Registry-Auth header: eyJzZXJ2ZXJhZGRyZXNzIjoicXVheS5pbyJ9\n2018/05/18 08:35:10 [DEBUG] - Decoded header: {\"serveraddress\":\"quay.io\"}\n2018/05/18 08:35:10 [DEBUG] - Header data: {Username: Password: Serveraddress:quay.io}\n2018/05/18 08:35:10 [DEBUG] - Updated header: &{Username:USERNAME Password:QUAY_PWD Serveraddress:quay.io}\n2018/05/18 08:35:10 [DEBUG] - Updated header data: {\"username\":\"USERNAME\",\"password\":\"QUAY_PWD\",\"serveraddress\":\"quay.io\"}\n2018/05/18 08:35:10 [DEBUG] - Encoded header: ...\nNow, the failed Docker Hub login. I didn't redact the password because I've now changed it:\ntext\n2018/05/18 08:36:16 [DEBUG] - Original X-Registry-Auth header: eyJzZXJ2ZXJhZGRyZXNzIjoiIn0=\n2018/05/18 08:36:16 [DEBUG] - Decoded header: {\"serveraddress\":\"\"}\n2018/05/18 08:36:16 [DEBUG] - Header data: {Username: Password: Serveraddress:}\n2018/05/18 08:36:16 [DEBUG] - Updated header: &{Username:USERNAME Password:v7+HKb?9aT?ZETgj Serveraddress:docker.io}\n2018/05/18 08:36:16 [DEBUG] - Updated header data: {\"username\":\"USERNAME\",\"password\":\"v7+HKb?9aT?ZETgj\",\"serveraddress\":\"docker.io\"}\n2018/05/18 08:36:16 [DEBUG] - Encoded header: ...\nSo far exactly the bug I experienced. I then changed the Docker Hub password to be the same as QUAY_PWD above, and now the pull works:\ntext\n2018/05/18 08:39:06 [DEBUG] - Original X-Registry-Auth header: eyJzZXJ2ZXJhZGRyZXNzIjoiIn0=\n2018/05/18 08:39:06 [DEBUG] - Decoded header: {\"serveraddress\":\"\"}\n2018/05/18 08:39:06 [DEBUG] - Header data: {Username: Password: Serveraddress:}\n2018/05/18 08:39:06 [DEBUG] - Updated header: &{Username:USERNAME Password:QUAY_PWD Serveraddress:docker.io}\n2018/05/18 08:39:06 [DEBUG] - Updated header data: {\"username\":\"USERNAME\",\"password\":\"QUAY_PWD\",\"serveraddress\":\"docker.io\"}\n2018/05/18 08:39:06 [DEBUG] - Encoded header: ...\nI want to point out that the Docker Hub password was absolutely valid. I copied and pasted the password from the log into Docker Hub's pwd change form and it was accepted. Also all other build systems broke.\nAt this point I suspect some encoding shenanigans. Portainer seems to send the right header (the base64 result checks out).. Probably. Just to double check I temporarily changed it to the old password again, and again it fails.. For all I know, it was the Docker password. The password I used also caused intermittent 500 on Docker IDs server, so something is/was broken on their end.. Portainer send an invalid git request to the server (it appends git-upload-pack the the URL). This causes a GitProtocolException, with the following error message:\ntext\nTF401041: The Git protocol sent is not as expected (Unable to read the 4-byte length header of the message.).. This is likely a pretty major bug (missing multi_ack support) in go-git that has been unfixed for quite a while: https://github.com/src-d/go-git/issues/335#issuecomment-293629072\nThis is a real deal-breaker for us.. Out of curiosity, are bug fixed prioritized for businesses with a support subscription?. @olljanat I saw that, but we don't use any Windows agents. Since there is a discussion about pulling from git in #1752, I'd prefer a first-party solution.. @olljanat We're using VSTS as a code hosting platform, not as a build platform. Our issue is exactly what I described here and not more.\nThis is a bug in the git pull done by Portainer, it doesn't really matter what service is on the other end. We are paying Portainer customers and would like to see this resolved. VSTS (now called Azure DevOps btw.) integration beyond that might be relevant to other users, but not to us.. Yes, SSH would be the preferred way to connect to Azure DevOps for us.. This specifically prevents us from easily deploying the portainer agent via the template.. More details, here is the response payload:\njson\n{\n  \"err\": \"Unable to parse external templates\",\n  \"details\": \"json: cannot unmarshal string into Go struct field Template.type of type portainer.TemplateType\"\n}. I was using 1.19.1. I have never created custom templates. So the broken ones must be the built-in. How can I upgrade those? . The workaround worked. IMO if possible, the migration should be part of an upgrade. This is how it is handled e.g. in Confluence: If you update the image version over an old dataset, the dataset is migrated on startup - even between major versions.. ",
    "shyd": "Hi,\nI am looking forward to have this option as it would optimize my deployment process! \ud83d\udc4d \nTwo things I have in mind for this:\n1) Will sidecar files work? There are some config files I need to mount into the container for e.g. nginx.\n2) I'd love to have the feature to trigger these redeployments thru webhooks from dockerhub or CI/CD.\nCheers. ",
    "maddios": "oh, and when i run docker logs for the portainer instance I get:\n2018/03/22 20:26:18 Starting Portainer 1.16.4 on :9000\nthat's it\n. I can confirm that 1.16.2 does indeed work. thank you!. ",
    "audioscavenger": "I confirm too I had to revert back to 1.16.2.\nEven the develop TAG didn't work.\nwhat's incredible is that the API calls work just fine, and that it DID work the very first time I installed and started it. Never again after that, even by deleting the volume each time.\nthanks\n. @deviantony thanks for the update!\nI wish I could connect to slack without having to beg an administrator before posting just as I used to do with IRC. \nAnyway, I found the issue. Missing CONNECT method on the server. Please be my guest and close this thread :-). ",
    "rwagner-inf": "Hi @deviantony !\nI can not generate an invitation on slack.\n\nTo be practical, could you help me here and close the issue?\n. Hi @deviantony !\nAre some security headers interpreted by browsers, to protect the aplication of some attacks.\nX-Frame-Options\nX-Frame-Options response header improve the protection of web applications against Clickjacking. It declares a policy communicated from a host to the client browser on whether the browser must not display the transmitted content in frames of other web pages.\nX-XSS-Protection\nThis header enables the Cross-site scripting (XSS) filter in your browser.\nX-Content-Type-Options\nSetting this header will prevent the browser from interpreting files as something else than declared by the content type in the HTTP headers.\nOther fonts:\nhttps://www.owasp.org/index.php/Clickjacking\nhttps://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet\n. Yes @deviantony, should be in all requests.\nI already adjusted the code!\nThank you!. Hi @deviantony!\nI put it there.\nAnother security issue, if the Portainer is used with HTTPS, has another option that should be added. Is there another code that does this check, whether it's using HTTPS or not?\n. Hi @deviantony!\nI downloaded the code and made some modifications locally. And I succeeded.\nOne question, the headers below, can even be put in all the reponses?\nX-Content-Type-Options: nosniff\nX-Frame-Options: SAMEORIGIN\nX-Xss-Protection: \"1; mode = block\"\nBecause the way we had done, some destinations still ran out of the header, like /api/auth.\nSo I did the modification in another way, so that all the responses contain the headers. And I also made a modification to ssl.\nIf it is necessary to put the headers in all responses, I modify it in git and do another pull request.. ",
    "Dante3004": "Hi, i've the same issue. With the dev tools i've this error : \nFailed to load resource: the server responded with a status of 500 (Internal Server Error)\n:9000/api/endpoints/1/docker/images/create?fromImage=nginx&tag=latest . POST http://10.201.5.1:9000/api/endpoints/1/docker/images/create?fromImage=nginx&tag=latest 500 (Internal Server Error). \n. Effectivement c'est plus simple pour \u00e9changer :)\ndu coup :\n\n. My bad, dans \"Registries\" il faut mettre le \"Docker ID\" et non l'adresse email pour que cela fonctionne.\nMerci pour les infos :). ",
    "williamthompson-toast": "Figured out the issue. The page was cached in my browser. No need to address this issue.. As an update, I realized that on the authentication page, an error pops up saying \"Endpoints not found\" as well. Still have not resolved the issue.. ",
    "balanza": "I'm experiencing the very same bug. I'm in a 15'' laptop with 1366x768 resolution. In the Chrome console I noticed the style rule white-space: nowrap is missing. Just try to add it and the flaw is gone. \nBTW, there's the very same rule for the media query @media screen and (max-width: 767px).\nMaybe I can try to fix it and open a PR. +1. ",
    "funvit": "bad fix! you globally removed wrapping! this breaks long text output.... ",
    "moncho": "Ah yes, thanks, @deviantony.\nThey have been removed.. ",
    "faryon93": "@deviantony Thanks for your comments. I just pushed some commits containing your requested changes.. ",
    "amcsi": "Their shouldn't be any functional difference for normal use of this project, since container IDs would continue to be used in the URLs for anyone not rewriting the URLs manually.\nBut I don't know Docker Swarm that well, so if you feel like this would somehow negatively impact functionality related to Docker Swarm in the future, I can only trust you, especially since this is your project.. ",
    "dblackherod": "A temporary workaround for this issue is to create a user-defined network with a different subnet other than docker default (172.17.x.x/16) and run drone server and agent containers on that network. Using a DNS container for name/ip resolution also makes this workaround simpler to use.. ",
    "odg0318": "I checked docker repository and found a break point.\nhttps://github.com/moby/moby/blob/master/pkg/authorization/authz.go#L156\ndocker daemon use Content-Type to check application/json or not.\nBut when I checked Portainer request, Content-Type is application/json;charset=UTF-8.\nI think that a function in docker to check Content-Type is not nice.\nWhat do you think of removing charset? \n. @deviantony\nIn my opinion, my usecase is unnormal but it is not important now.\nAuthorization plugin is officially supported in docker ecosystem.\nBut creating a container using portainer, an erorr happens because of content-type, application/json;charset=utf8.\nAs you can see in docker source code, docker strictly check content-type. It allows only application/json.. 1. Portainer makes a request including content-type, application/json;charset=utf8.\n2. Docker allows only application/json not including charset. It compares just a string to a string.\n3. With authorization plugin, a request Portainer makes is considered as malformed because RequestBody is empty.\n4. Even though docker issue is resolved in the future, this problem would not be resolved with previous version's docker.\n. I wrongly clicked close button and so reopened. Sorry.. Resolved. #1791 . My pleasure. I closed my issue.. ",
    "Vad1mo": "ahh now, I see. TBH didn't know it was a button, until told it.\n\nI all remove the second part of my request. ",
    "ShaneCoufreur": "Hi @deviantony \nAll requests except 1 return status 200 on Dashboard page. The following payload + response is the 1 request that returns a 500.\n\nReproducable with curl: \ncurl 'http://localhost:8080/portainer/api/endpoints/2/stacks?swarmId=ugsmg1pkrlt3oz6s44qtz5sja' -H 'Pragma: no-cache' -H 'Accept-Encoding: gzip, deflate, br' -H 'Accept-Language: en-US,en;q=0.9,nl;q=0.8' -H 'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.139 Safari/537.36' -H 'Accept: application/json, text/plain, */*' -H 'Referer: http://localhost:8080/portainer/' -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOjEsImV4cCI6MTUyNTM4OTg2NH0.pGEUdiQdL3KwFo_qy4ELehpNjpBJOUcVkHxKepC1Qe0' -H 'Cookie: wp-settings-time-1=1519824022; _ga=GA1.1.382464288.1520351092' -H 'Connection: keep-alive' -H 'Cache-Control: no-cache' --compressed\nThe response is a JSON object:\n{\"err\":\"json: cannot unmarshal number into Go struct field Stack.Id of type portainer.StackID\"}\n. This started as soon as I ran the first docker image that had stacks implemented. The version before that did not allow me to create or deploy stacks.\nI did not use portainer yet to create / deploy stacks.\nIs there anything I can provide to help find the cause to the issue?. curl to just the address gives Unauthorized.\n$ curl http://localhost:8080/portainer/api/endpoints/2/stacks\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100    23  100    23    0     0    489      0 --:--:-- --:--:-- --:--:-- 23000{\"err\":\"Unauthorized\"}\nAdded auth headers from other working requests leads to same reported error:\n$ curl 'http://localhost:8080/portainer/api/endpoints/2/stacks' -H 'Pragma: no-cache' -H 'Accept-Encoding: gzip, deflate, br' -H 'Accept-Language: en-US,en;q=0.9,nl;q=0.8' -H 'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.139 Safari/537.36' -H 'Accept: application/json, text/plain, */*' -H 'Referer: http://localhost:8080/portainer/' -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOjEsImV4cCI6MTUyNTQ1NDg5OH0.Ur61tGhC7v1GiQGxq9Wrr5ti_JN5RQSphCpkkrFb8Ww' -H 'Cookie: wp-settings-time-1=1519824022; _ga=GA1.1.382464288.1520351092' -H 'Connection: keep-alive' -H 'Cache-Control: no-cache' --compressed\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100    96  100    96    0     0   6000      0 --:--:-- --:--:-- --:--:-- 96000{\"err\":\"json: cannot unmarshal number into Go struct field Stack.Id of type portainer.StackID\"}\n. I sent an email with the db enclosed to the mail address in your contact info.. I deleted the database and after spinning up a new instance the error no longer appears.\nThanks for investigating!. ",
    "ShaharHD": "ty for the quick response. @deviantony If I want to make this fully configurable (the actual list) and later have it matched (and saved) per container - where should I start?. ",
    "Pac23": "Nope,rebooting the pi solved the problem. Although the bridge from containers to the host still is broken. . the problem of no data sent/no gui was solved by rebooting the pi\nnothing in the logs\nAs far as the bridge/host thing goes i am trying to run pi hole on docker but pretty sure its a dhcp issue after digging around a lot,not related to the bridge/hosts. ",
    "ms82389157": "I have continued to try different configuration for the GIT container.  After reading Can't deploy stack from git repo (Gitea) #1481, I believe this is the same issue except it is with a locally created public http GIT repository.  There should be an option so that a stack can be deployed from the template without the need of GIT.. ",
    "cppbitman": "@deviantony \nI have already added my private repository to Portainer (Portainer settings->Registries->Add registry) and defined the credentials by enabling Authentication and designating Username and Password when adding registry. \nStill respond with the prompt \"Failure: no basic auth credentials \" when pushing an image to private registry. But I can pull an image from private registry by Portainer.\n. @deviantony \nThe same problem exists for docker hub. I have set Authentication enabled for DockerHub(Portainer settings->DockerHub) and designated Username and Password before pushing image to DockerHub. \nWhen I push image to DockerHub with portainer, it responds with the prompt \n\"Failure errors: denied: requested access to the resource is denied unauthorized: authentication required \"\nIt seems that authentication doesn't work for some reason.. ",
    "pantegrow": "Hi. Please assign it to me. I wanna edit ContainersDatatableController.js, add a new function this.ipComparator. Then I need edit containersDatatable.html where I change orderBy filter by adding custom comparator(ipComparator). Please give me permissions. @deviantony please look at the pull request https://github.com/portainer/portainer/pull/2334. Ok, will check tonight. Sorry for delay. ",
    "taliaga": "Confirming I managed to reproduce this issue\n. ",
    "dancn": "@deviantony thanks for cheking, do you have some suggestion for verbose logging?\nI just tried with the develop and I still have the error.\nThe toast message in the web interface is still\nDeployment error\nIgnoring unsupported options: restart open ./my_secret.txt: no such file or directory\nAnd from the console I see:\n```\ndocker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data2:/data portainer/portainer:develop\nUnable to find image 'portainer/portainer:develop' locally\ndevelop: Pulling from portainer/portainer\nd1e017099d17: Pull complete \n2ebf521bfe4d: Pull complete \nDigest: sha256:159c2cbdebfe8467c60930a4df439d81c342d1886fbbfff66181943edfa7ad43\nStatus: Downloaded newer image for portainer/portainer:develop\n2018/05/03 08:20:43 Starting Portainer 1.16.5 on :9000\n2018/05/03 08:21:28 http error: Ignoring unsupported options: restart\nopen ./my_secret.txt: no such file or directory\n (code=500)\n```\nBest,. > I'm able to reproduce using portainer/portainer:develop. Seems to be fixed in portainer/portainer:agent-support though which is going to be merged soon. Will investigate further once merged.\n\nJust tried on a fresh install, I can reproduce this in portainer/portainer:agent-support as well. Will investigate.\n\n\nI guess that the the failure in portainer/portainer:agent-support was due to a temporary change in the template repository made by me for debugging pourposes.\nNow the master branch of the template repo is restored to the original commit.\nMy latest test confirm that the stack is correclty deployed using:\nportainer/portainer:agent-support\nwhen I choose at first usage:\nConnect Portainer to the Docker environment you want to manage.\nLocal\nManage the local Docker environment\nI did not tested other configurations.. > @dancn now that #1828 has been merged, keen to retry with portainer/portainer:develop ?\nThanks @deviantony,\nunfortunately the issue is still here.\ndevelop: Pulling from portainer/portainer\nDigest: sha256:e2362ada03f02054f3a05d01707d75b243169fc5ed8e7929d8c31ca2d894d204\nStatus: Image is up to date for portainer/portainer:develop\nTo ease a bit the debug I updated the repo with the templates,\nsplitting the wordpress example in two:\n\nWordpress configs from same dir\n\nThe stack.yml file load files from the same dir of stack.yml.\n  The files are in the same dir.\n  The CLI deployment starts successfully.\n  The portainer deployment fails.\n\nWordpress configs from repo root\n\nThe stack.yml file load files from the same dir of stack.yml.\n  The files are in the repo root.\n  The CLI deployment fails for missing files.\n  The portainer deployment starts successfully, instead of failing.\nThis should confirm that something is wrong in the the path\ncomputation for configs/secrets files in the portainer side.\nBest,. ",
    "d1slact0r": "Just adding me to the list I want this aswell for VPN to work. (for more info: https://github.com/dperson/openvpn-client). ",
    "ikarpovich": "@herwonowr Good idea, thanks. Fixed that as well.. ",
    "brickyang": "Yes, it is exactly what I want.\nOn Wed, Apr 18, 2018 at 17:36 Hans-Joachim Krauch notifications@github.com\nwrote:\n\nIf it's not required, how about we set the hostname only when it's\ndefined in the template json (field to be added)?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1816#issuecomment-382327054,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AC_mpUD3aTgUubVY5P9hLXmEZL0opvcXks5tpwkjgaJpZM4TV7if\n.\n. @deviantony Yes. A app-health monitor system I am using need to identify the same application(same container name) running on different servers. This system is one of the most important systems provided by Alibaba/Alicloud.\n\nNow I have to using container panel to start containers manually. It is not cool and it blocked me to promote Portainer to other users.. @deviantony Good point...so how about add a hostname field on the \"start from template\" panel? Just like the network section of container panle do.. @deviantony Cool! An extra field in \"advanced settings\" is perfect.. @achim-k Please do. Thanks!. ",
    "achim-k": "@brickyang will you create an PR? Otherwise I could do it I think. Ok, will do this evening.. > I believe that we should add an extra input to be able to specify the hostname in the \"Advanced settings\" of the template creation. Could you add this field?\nDone. Not sure if that line needs to be added to other templates as well (Stack template, ...). ",
    "Papz303": "I think perhaps the issue here is arm is not supported (raspberry pi) . ",
    "rbasore": "I am having the same issue. I have created alternative creds in VSTS to allow basic auth. . ",
    "seryeb": "How many users in your Ldap scope? Two\nAlso, the username you created, what format is it? Username, or username@domain? Username\nThanks!. Bad account to connect to LDAP. With admin account everything ok.\nThanks and good job!!!. ",
    "dhenneke": "Thanks for the clarifications. Looks like I was too impatient. I was using the endpoint for a workaround to #1828, but this seems to be finally solved by you. Thanks for the awesome work!. ",
    "mback2k": "Why \"Portainer agent (closed-source software)\"?. ",
    "srbollin": "It appears current running containers are not picked up by the newly installed agent. All new containers are showing up without any issues.  It looks way better to manage swarm now. Good job! Will keep you posted if I see any issues.\n. FYI. I had just observed that containers on remote workers are not showing up in Cluster visualizer. They are visible in containers section but not in the visualizer.\n\n. @deviantony Yes, I had deployed them manually and expecting the visualizer to show all containers. \nMy mistake, Thanks for the info, I had deployed few hundred containers through services and they appear perfectly fine through swarm visualizer.. ",
    "thesobercoder": "Why doesn't the public show up when creating the service? It only shows up when updating.. It is not temporary. Every time I click I get the same error message.. Sure, sounds great!. ",
    "ProJaCore": "i have a single server and i use portainer on the same machine to list all local container; are there any pros that i get when using the agent?. ",
    "rsrini7": "I am also running into the same issue and i am using minikube for docker deamon and able to access docker endpoint (minikube exposed only ssl way)\nPlease help on selecting which crt, key has to be uploaded for TLS CA Certificate, TLS Certificate and TLS Key from my below (.minikube directory).\nGot some info from : #460 \n\nportainer ui:\n\n.minikube folder:\n\nPortainer log:\n\n. ",
    "TimvdEijnden": "Would it be possible to assign it to me @deviantony ? Seems like a good issue to start with \ud83d\ude0e . For me it's not clear how to distinguish between system-created and user-created networks.. json\n[{\n    \"Attachable\": false,\n    \"ConfigFrom\": {\n        \"Network\": \"\"\n    },\n    \"ConfigOnly\": false,\n    \"Containers\": {},\n    \"Created\": \"2018-12-06T11:32:04.311482209Z\",\n    \"Driver\": \"host\",\n    \"EnableIPv6\": false,\n    \"IPAM\": {\n        \"Config\": [],\n        \"Driver\": \"default\",\n        \"Options\": null\n    },\n    \"Id\": \"b31a17138db2f5c4b2a35fcae5ce783904d91f4a57d4e5b7ae02998de1d4fca6\",\n    \"Ingress\": false,\n    \"Internal\": false,\n    \"Labels\": {},\n    \"Name\": \"host\",\n    \"Options\": {},\n    \"Scope\": \"local\"\n}, {\n    \"Attachable\": false,\n    \"ConfigFrom\": {\n        \"Network\": \"\"\n    },\n    \"ConfigOnly\": false,\n    \"Containers\": {},\n    \"Created\": \"2018-12-06T11:32:04.203743371Z\",\n    \"Driver\": \"null\",\n    \"EnableIPv6\": false,\n    \"IPAM\": {\n        \"Config\": [],\n        \"Driver\": \"default\",\n        \"Options\": null\n    },\n    \"Id\": \"d084b76857b3050592c89e1eefd8cf1fa8020c7d13b56ee5e19a39b548f5713f\",\n    \"Ingress\": false,\n    \"Internal\": false,\n    \"Labels\": {},\n    \"Name\": \"none\",\n    \"Options\": {},\n    \"Scope\": \"local\"\n}, {\n    \"Attachable\": false,\n    \"ConfigFrom\": {\n        \"Network\": \"\"\n    },\n    \"ConfigOnly\": false,\n    \"Containers\": {},\n    \"Created\": \"2019-01-22T20:57:47.442617355+01:00\",\n    \"Driver\": \"bridge\",\n    \"EnableIPv6\": false,\n    \"IPAM\": {\n        \"Config\": [{\n            \"Gateway\": \"172.18.0.1\",\n            \"Subnet\": \"172.18.0.0/16\"\n        }],\n        \"Driver\": \"default\",\n        \"Options\": null\n    },\n    \"Id\": \"43f3d4d6ec03e33da70492cac43d01e014cd9d6eb0a672223cee52466697199b\",\n    \"Ingress\": false,\n    \"Internal\": false,\n    \"Labels\": {},\n    \"Name\": \"example\",\n    \"Options\": {},\n    \"Scope\": \"local\"\n}, {\n    \"Attachable\": false,\n    \"ConfigFrom\": {\n        \"Network\": \"\"\n    },\n    \"ConfigOnly\": false,\n    \"Containers\": {},\n    \"Created\": \"2019-01-21T09:29:16.137569887+01:00\",\n    \"Driver\": \"bridge\",\n    \"EnableIPv6\": false,\n    \"IPAM\": {\n        \"Config\": [{\n            \"Gateway\": \"172.17.0.1\",\n            \"Subnet\": \"172.17.0.0/16\"\n        }],\n        \"Driver\": \"default\",\n        \"Options\": null\n    },\n    \"Id\": \"86453b82d58911a1e3a08ab847284da4fcdfcaa06328dc765908eaba42e90e7f\",\n    \"Ingress\": false,\n    \"Internal\": false,\n    \"Labels\": {},\n    \"Name\": \"bridge\",\n    \"Options\": {\n        \"com.docker.network.bridge.default_bridge\": \"true\",\n        \"com.docker.network.bridge.enable_icc\": \"true\",\n        \"com.docker.network.bridge.enable_ip_masquerade\": \"true\",\n        \"com.docker.network.bridge.host_binding_ipv4\": \"0.0.0.0\",\n        \"com.docker.network.bridge.name\": \"docker0\",\n        \"com.docker.network.driver.mtu\": \"1500\"\n    },\n    \"Scope\": \"local\"\n}]\n43f3d4d6ec03e33da70492cac43d01e014cd9d6eb0a672223cee52466697199b is the user-created one. The only way to identify user-created networks is to check if the name is not equal to bridge, host or none. But that's not the preferred way to fix it IMHO. . If you want to create a network with a name of a predefined network, you get this error message:\noperation is not permitted on predefined host network\nIf you want to create a network with a name of an existing user-created network, you get:\nnetwork with name host1 already exists\nIt would be nice if the docker API exposes if an network is predefined or not. Ok I'll make a PR. This last instruction worked for me but the docs are not updated yet, see https://portainer.readthedocs.io/en/latest/contribute.html. \n\nWhen using the \"select all\" checkbox, the default networks are also selected and Portainer is trying to delete them. This also needs a fix.\n\nThis has been fixed now. @xAt0mZ It's been 4 days since my change, if you have the time please have a look.. Yes I can add that too. . @deviantony done. . I'm not really familiar with angular but I just checked the docs and this seems to work great.. Done. ",
    "FabianTe": "Has this made it's way into master yet?. Then I'll create a new PR at the templates repo, correct?. ",
    "Andyreas": "I feel so stupid but it says it's been merged in to master, still portainer doesn't support >v2? What am I missing.. > @Andyreas this change will only affect stacks deployed within a Swarm cluster.\nThat response time!\nThanks for clarifying. Is there an open issue or perhaps a deadline for when it will be supported without swarms? Just curious.. ",
    "jwalkins2017": "Any more thoughts on resolving this? I am using the api to deploy stacks and running into the same issue\n{\"err\":\"Unable to clone git repository\",\"details\":\"Get https://gitreposerver.internal.domain/info/docker-swarm.git/info/refs?service=git-upload-pack: x509: certificate signed by unknown authority\"}. ",
    "alphaDev23": "Same question.  Similar to @jwalkins2017, we are using the api to deploy stacks and are running into the same error with 17.1.  Has this issue been resolved in more recent api versions?\nFor the api it may be easiest to implement by adding, for example, a \"GitCloneVariables\" string as a key in the json definition.  To resolve this current issue, including \"GIT_SSL_NO_VERIFY=true\"in the string value would resolve the issue (in bash adding the same env var prior to a git command resolves the error).. If endpoint ID serves as a context to execute stack requests, shouldn't  the api  return an error when attempting to delete a stack that is deployed on a different endpoint ID?  Instead, delete changes the stack to a warning status in the UI indicating that the stack was created outside of portainer and does not allow further access to the stack via the UI.\nUsing the stack name as a unique identifier is a poor design decision.  Often, services of the same name need to be deployed on different stacks so the idea that a user has to check each stack prior to deploying to ensure there are no name conflicts is less than optimal (versus checking the UI to see if the name exists on the active endpoint).  While it is possible to get all stacks against all endpoints, it is not against a single endpoint (even when the endpoint id is specified) without further parsing. This defeats the purpose of providing an endpoint id in the GET request.\nTo summarize, at least GET and DELETE do not serve as a context to execute stack requests.. Thank you for re-opening and making the above changes which helps clarify the api.  As a feature request, it would be helpful to have the remaining methods for stacks implemented.. I would not tag this as a question and would not close it.  The issue still remains that portainer gets out of sync with the cluster and requires a restart of portainer.  \nCant' stacks be managed via the 'docker stack' command (https://docs.docker.com/engine/reference/commandline/stack/#options)? \nThe improvement in 1.18 is excellent.. Very frustrating.  Deploying stacks via docker-compose 3.x version works well in Portainer 1.17.1.  Furthermore, 3.x fully supports deploying swarm stacks per the docker-compose reference: \"A good place to start is the Getting Started tutorial which uses version 3 Compose stack files to implement multi-container apps, service definitions, and swarm mode.\"  See also https://docs.docker.com/compose/compose-file/. @MicahZoltu I was attempting to deploy 3.x compose files on portainer 1.20.1 to a swarm endpoint (18.06.1-ce) and I received the following error: \"\"{\\\"err\\\":\\\"yaml: unmarshal errors:\\n  line 1: cannot unmarshal !!str 3.4 into config.RawService\\\",\\\"details\\\":\\\"yaml: unmarshal errors:\\n  line 1: cannot unmarshal !!str 3.4 into config.RawService\\\"}\"\nIs this a different issue?  If you are referring to docker cloud stack files, I'm sure these are great but it is yet another technology with yet further unforeseen caveats when compose 3.x is perfectly capable of deploying swarm stacks.  As a note, the cloud stack files are not referenced as a file format in the 18.09 reference (these were in 18.03 - https://docs.docker.com/v18.03/docker-cloud/apps/stack-yaml-reference).  Not sure if all of this is being rolled into the compose format.. Since we are referring to the same docker-compose file format (initiated via stack deploy), I will retest using 1.20.1 on a different cluster (the previous cluster has been removed).  I do not believe that there was an issue with the previous swarm cluster itself.  I appreciate your input.\nIf anyone has any thoughts, to clarify, the error is \"\"\"{\"err\":\"yaml: unmarshal errors:\\n line 1: cannot unmarshal !!str 3.4 into config.RawService\",\"details\":\"yaml: unmarshal errors:\\n line 1: cannot unmarshal !!str 3.4 into config.RawService\"}\".. The issue, in my case, was the 'type' was not correctly set to '1' in the api POST, e.g. 'POST '{{ PORTAINER_IP }}/api/stacks?type=1&method=repository&endpointId=1'\nType was not required in the 1.17.1 api and I'm unsure why it must be manually set in the latest.  Portainer is able to determine whether the docker's endpoint is a swarm cluster or a standalone docker node via the 'Swarm' property in 'docker info'. Portainer already determines whether to display the 'Swarm' tab (on the left in the UI) through a docker api call.  Therefore, this additional Type parameter appears to unnecessarily increase the api's complexity and should be removed in a future api.\nAlso, the error '\"err\":\"yaml: unmarshal errors:\\n line 1: cannot unmarshal !!str 3.4 into config.RawService\"' could be better clarified to the end user to provide a better description of the problem.. @ncresswell, your comment \"We dont block bind mounts from stacks as we dont inspect the stack file.\" is a bug,  An admin expects that if the \"Disable bind mounts for non-administrators\" is set then users will not be able work around the issue by simply creating a stack with a bind mount.   Under the current implementation, all a user has to do is create a bind mount to \"/\" and they can modify any aspect of the underlying host by accessing the container via the console and modifying files on that volume.\nThe setting is important though because it would be great to be able to allow non-admin users to create containers and/or stacks without concern of the non-admin user having full access to the docker host.  \nWhen will this issue be fixed?  Without a fix, Portainer is not viable for the above use case (which is what the feature is intended to be used for).. Is there any estimated date on a fix for this issue?  Same issue here.  Using 1.20.1, docker 18.06.1-ce\nFrom portainer logs:\n2019/03/12 02:18:50 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n...\nFrom portainer/agent logs:\n2019/03/12 02:58:01 [INFO] serf: EventMemberJoin: 05cf54df6dd6 10.0.0.8\n2019/03/12 02:58:01 [INFO] serf: EventMemberJoin: c3a48f1fdd27 10.0.0.10\n2019/03/12 02:58:01 [INFO] serf: EventMemberJoin: 40d571ecff83 10.0.0.9\n2019/03/12 02:58:01 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true)\n2019/03/12 03:02:38 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\n...\nPer @rodneygp comment 24 days ago, has increasing the client timeout been investigated?\nEDIT:  The issue definitely appears to be a timeout issue.  In my case, there was a domain name specified in the no_proxy configuration that was not resolving with the nameservers specified in resolv.conf.  Once I fixed this issue, 'docker info' returned faster.  In the case where there is an issue with the dns server, 'docker info' takes longer to return (presumably because it is having difficulty resolving names) which results in portainer showing the node offline.\nWithout being able to change the timeout, the portainer agent is dependant on the docker daemon responding \"fast enough.\"  This makes portainer dependant on the proper functioning of external services, sufficient resources on the docker node, or any other issue that may affect the docker dameon's response time.  \nPlease add the ability to set the timeout via an environment variable.  Otherwise, the portainer agent does not have the robustness needed to be viable in a production environment.\nEDIT2:  After further use, the issue is still appearing even when there are no dns issues.\n@deviantony Is there an estimated date to fix this issue. Portainer becomes unusable when the nodes intermittently become unavailable.\n. @ToeiRei It appears that your login credentials are incorrect per your portainer logs.  Note, your error appears different than the issue referenced . Portainer uses a tremendous amount of memory during the deployment of stacks, over 8 GB is some cases.  This seems high.  Are there any plans to address this?. Git repository is ~214 MB.  Memory used is ~8.8 GB.  Occurred on 1.20.1.\nYes, smaller repositories work well.  I can reduce the size of the repositories (memory vs repo size appears to be correlated although I've done minimal testing) but I'm not sure the repo size in this example is that large relative to the memory used.  Thoughts? . I have merely limited the size of my repository in which the stack file is located as a workaround.  I believe there were other users with memory issues.  Additionally, I have upgraded portainer to version 1.20.1.  \nTo avoid further issues, I would recommend that your team creates a few different size repositories to see if there are still memory issues and to what extent.  You could easily create a random sized file and include it with the stack file to test.  8.8 GB or RAM to clone 214 MB is a lot (per my previous comment).  This issue, if not resolved, can easily overwhelm swarm nodes which may be limited in size in order to converse resources given that there are multiple nodes per cluster.. How is a person supposed to debug?  There are issues that require transparency of the portainer container file system, for example.. It does not appear to be directly related.  While I did not read in detail, #454 appears to be requesting links to endpoints.  This request is for information about the endpoint to be presented in the UI.  See description.\nPlease reopen.  \nAlso, I'm not sure why issues are just closed without giving the author any opportunity to respond. . I appreciate that but I had filed this under a feature request and it does not appear that the referenced issue is actually a duplicate.  It would be great the request, issue, etc. could be closed after giving the author time to respond.  Closing an issue removes the item from the default search options in github (issue:open) and indicates to other users that the issue is resolved, etc.  It should be beneficial to Portainer to receive feature requests because it should help shape the direction of the product(s).  Please keep in mind that when a user submits a feature request. issue, etc., they probably have put some thought into what they submit, e.g. they have spent time.\nI do believe Portainer is a great product to manage containers, I look forward to future releases, and I appreciate the your team's efforts.. Correct me if I'm wrong, but isn't the '1' in '/#/endpoints/1/docker/containers' the endpoint ID?  How is a user supposed to know the endpoint ID to put in the route if the user does not now the endpoint ID to begin with that is associated with enpoint in the UI?. The endpoint ID, for example is needed for api calls.  We currently instantiate stacks on Openstack Magnum via an ansible script.  The endpoint ID is an environmental variable in the ansible script.  After instantiation, stacks are managed via the UI.  \nThe endpoints are created prior to initializing a stack and it would be beneficial to retrieve the endpoint ID from the UI rather than having to execute a number of curl commands to retrieve the ID.  Further, the output of getting the endpoint information via curl can be verbose which requires further parsing.\nFinally, endpoints change whenever a cluster needs to be rebuilt.  Adding the endpoint via the UI, obtaining the ID via the UI, and then adding the endpoint ID to the env vars is the easiest. \nAs a side note, any integration that you can do with Openstack would be of further benefit.  Magnum only manages the swarm cluster infrastructure and Zun does not offer, as of Openstack Queens via the Openstack Horizon dashboard, the level of management and functionality that Portainer offers.. ",
    "neoindie": "@deviantony is this feature still considered or is there perhaps a better plan to support private repos? Thanks. ",
    "pwFoo": "Hi @deviantony,\nI tried to delete the stack with the remove button, but nothing happend. No error message and stack was still there. Also reloaded the page.\nAt the moment I moved from portainer to cli because of some problems (compose version support, tmpfs, remove stacks in ui).. Copy & paste compose content to editor in ui. \nMaybe redeployed / updated with modified content.\nThen try to remove the stack with the button. It takes some seconds anderen ends without error / sucess indicator.. Can't use the same system to reproduce it. I have to test / reproduce it with a test system.. I would close the issue because I need to reproduce it with a test system and don't know if anyone else have the same problem. If I use portainer again and get the same problem I'll open a new issue with all debugging information as needed.\nThanks!. ",
    "bobman": "I'm having the same issue. One container that can not be edited:\n{\n    \"AppArmorProfile\": \"\",\n    \"Args\": [\n        \"forego\",\n        \"start\",\n        \"-r\"\n    ],\n    \"Config\": {\n        \"ArgsEscaped\": true,\n        \"AttachStderr\": false,\n        \"AttachStdin\": false,\n        \"AttachStdout\": false,\n        \"Cmd\": [\n            \"forego\",\n            \"start\",\n            \"-r\"\n        ],\n        \"Domainname\": \"\",\n        \"Entrypoint\": [\n            \"/app/docker-entrypoint.sh\"\n        ],\n        \"Env\": [\n            \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n            \"NGINX_VERSION=1.13.12-1~stretch\",\n            \"NJS_VERSION=1.13.12.0.2.0-1~stretch\",\n            \"DOCKER_GEN_VERSION=0.7.4\",\n            \"DOCKER_HOST=unix:///tmp/docker.sock\"\n        ],\n        \"ExposedPorts\": {\n            \"80/tcp\": {}\n        },\n        \"Hostname\": \"0fde13b29ae7\",\n        \"Image\": \"jwilder/nginx-proxy:latest\",\n        \"Labels\": {\n            \"maintainer\": \"Jason Wilder mail@jasonwilder.com\"\n        },\n        \"MacAddress\": \"02:42:ac:11:00:03\",\n        \"OnBuild\": null,\n        \"OpenStdin\": false,\n        \"StdinOnce\": false,\n        \"StopSignal\": \"SIGTERM\",\n        \"Tty\": false,\n        \"User\": \"\",\n        \"Volumes\": {\n            \"/etc/nginx/certs\": {},\n            \"/etc/nginx/dhparam\": {},\n            \"/tmp/docker.sock\": {}\n        },\n        \"WorkingDir\": \"/app\"\n    },\n    \"Created\": \"2018-05-04T11:48:28.505389386Z\",\n    \"Driver\": \"overlay2\",\n    \"ExecIDs\": null,\n    \"GraphDriver\": {\n        \"Data\": {\n            \"LowerDir\": \"/var/lib/docker/overlay2/ac3949e8293c6865f97f6140291342380a6402d453990f0b7a3ffefb972e5673-init/diff:/var/lib/docker/overlay2/9ccc33400d68977e5b2efc6d9a44eced55bb4a44c8688cda726d911e9db9bb63/diff:/var/lib/docker/overlay2/de7ada7c4985a7a7e6e52e042a57550ad89efe36e26922b89506299bdb0aaccc/diff:/var/lib/docker/overlay2/ca23984eb337bc527fabe7325e7eef5b08bd42c2b8fd831f66576b5f79620250/diff:/var/lib/docker/overlay2/405c645923e8bda6703d80ca4e4d9af1148e338bdc6f896e19d3431f53fb4cd7/diff:/var/lib/docker/overlay2/de6ac1a25c966953759bf1760a21bc9e0e54795198f05f2fbb200bda53429914/diff:/var/lib/docker/overlay2/cb6a7c7815779f84b6e8cac5a8fc6ce0ab650b1dd493f830aa85149f84433380/diff:/var/lib/docker/overlay2/bbefaf1bc5b6653159bfcdec0121517e861ce0a2c86bb5e97f7d86111fbb18fd/diff:/var/lib/docker/overlay2/3de7fcdbe22310a968bfe1852fdbfea726f59ee32ae35ac396176f5a174a306b/diff:/var/lib/docker/overlay2/b8eaee630f3cd2117c4909c49c7ff75606eaeae0d3bbf1b201f7122c343b8d3d/diff:/var/lib/docker/overlay2/b7ff9cb8729589d4c44c55c0c95f538c3189b36407c268cf7a202bf39e5557ec/diff\",\n            \"MergedDir\": \"/var/lib/docker/overlay2/ac3949e8293c6865f97f6140291342380a6402d453990f0b7a3ffefb972e5673/merged\",\n            \"UpperDir\": \"/var/lib/docker/overlay2/ac3949e8293c6865f97f6140291342380a6402d453990f0b7a3ffefb972e5673/diff\",\n            \"WorkDir\": \"/var/lib/docker/overlay2/ac3949e8293c6865f97f6140291342380a6402d453990f0b7a3ffefb972e5673/work\"\n        },\n        \"Name\": \"overlay2\"\n    },\n    \"HostConfig\": {\n        \"AutoRemove\": false,\n        \"Binds\": [\n            \"/var/run/docker.sock:/tmp/docker.sock\",\n            \"cac6c433afd031ab6cc7293dafb23369cf406c66e6a6a5208915f6c5768959e7:/etc/nginx/certs\",\n            \"7a67285a6bd08b9f04e3a7dbb9d68aa4e96bac3fb811552d8c68348d74014766:/etc/nginx/dhparam\"\n        ],\n        \"BlkioDeviceReadBps\": null,\n        \"BlkioDeviceReadIOps\": null,\n        \"BlkioDeviceWriteBps\": null,\n        \"BlkioDeviceWriteIOps\": null,\n        \"BlkioWeight\": 0,\n        \"BlkioWeightDevice\": [],\n        \"CapAdd\": null,\n        \"CapDrop\": null,\n        \"Cgroup\": \"\",\n        \"CgroupParent\": \"\",\n        \"ConsoleSize\": [\n            0,\n            0\n        ],\n        \"ContainerIDFile\": \"\",\n        \"CpuCount\": 0,\n        \"CpuPercent\": 0,\n        \"CpuPeriod\": 0,\n        \"CpuQuota\": 0,\n        \"CpuRealtimePeriod\": 0,\n        \"CpuRealtimeRuntime\": 0,\n        \"CpuShares\": 0,\n        \"CpusetCpus\": \"\",\n        \"CpusetMems\": \"\",\n        \"DeviceCgroupRules\": null,\n        \"Devices\": [],\n        \"DiskQuota\": 0,\n        \"Dns\": [],\n        \"DnsOptions\": [],\n        \"DnsSearch\": [],\n        \"ExtraHosts\": null,\n        \"GroupAdd\": null,\n        \"IOMaximumBandwidth\": 0,\n        \"IOMaximumIOps\": 0,\n        \"IpcMode\": \"shareable\",\n        \"Isolation\": \"\",\n        \"KernelMemory\": 0,\n        \"Links\": null,\n        \"LogConfig\": {\n            \"Config\": {},\n            \"Type\": \"json-file\"\n        },\n        \"Memory\": 0,\n        \"MemoryReservation\": 0,\n        \"MemorySwap\": 0,\n        \"MemorySwappiness\": null,\n        \"NanoCpus\": 0,\n        \"NetworkMode\": \"bridge\",\n        \"OomKillDisable\": false,\n        \"OomScoreAdj\": 0,\n        \"PidMode\": \"\",\n        \"PidsLimit\": 0,\n        \"PortBindings\": {\n            \"80/tcp\": [\n                {\n                    \"HostIp\": \"\",\n                    \"HostPort\": \"80\"\n                }\n            ]\n        },\n        \"Privileged\": false,\n        \"PublishAllPorts\": false,\n        \"ReadonlyRootfs\": false,\n        \"RestartPolicy\": {\n            \"MaximumRetryCount\": 0,\n            \"Name\": \"always\"\n        },\n        \"Runtime\": \"runc\",\n        \"SecurityOpt\": null,\n        \"ShmSize\": 67108864,\n        \"UTSMode\": \"\",\n        \"Ulimits\": null,\n        \"UsernsMode\": \"\",\n        \"VolumeDriver\": \"\",\n        \"VolumesFrom\": null\n    },\n    \"HostnamePath\": \"/var/lib/docker/containers/5c2ab8f080b124175b09c81b14153477e7634e0feeafdc9644abadba4ca9a15a/hostname\",\n    \"HostsPath\": \"/var/lib/docker/containers/5c2ab8f080b124175b09c81b14153477e7634e0feeafdc9644abadba4ca9a15a/hosts\",\n    \"Id\": \"5c2ab8f080b124175b09c81b14153477e7634e0feeafdc9644abadba4ca9a15a\",\n    \"Image\": \"sha256:e143a63bea4be5b32d57ee46b479d276985906f02054b503cf49848f55ea6e39\",\n    \"LogPath\": \"/var/lib/docker/containers/5c2ab8f080b124175b09c81b14153477e7634e0feeafdc9644abadba4ca9a15a/5c2ab8f080b124175b09c81b14153477e7634e0feeafdc9644abadba4ca9a15a-json.log\",\n    \"MountLabel\": \"\",\n    \"Mounts\": [\n        {\n            \"Destination\": \"/etc/nginx/certs\",\n            \"Driver\": \"local\",\n            \"Mode\": \"z\",\n            \"Name\": \"cac6c433afd031ab6cc7293dafb23369cf406c66e6a6a5208915f6c5768959e7\",\n            \"Propagation\": \"\",\n            \"RW\": true,\n            \"Source\": \"/var/lib/docker/volumes/cac6c433afd031ab6cc7293dafb23369cf406c66e6a6a5208915f6c5768959e7/_data\",\n            \"Type\": \"volume\"\n        },\n        {\n            \"Destination\": \"/etc/nginx/dhparam\",\n            \"Driver\": \"local\",\n            \"Mode\": \"z\",\n            \"Name\": \"7a67285a6bd08b9f04e3a7dbb9d68aa4e96bac3fb811552d8c68348d74014766\",\n            \"Propagation\": \"\",\n            \"RW\": true,\n            \"Source\": \"/var/lib/docker/volumes/7a67285a6bd08b9f04e3a7dbb9d68aa4e96bac3fb811552d8c68348d74014766/_data\",\n            \"Type\": \"volume\"\n        },\n        {\n            \"Destination\": \"/tmp/docker.sock\",\n            \"Mode\": \"\",\n            \"Propagation\": \"rprivate\",\n            \"RW\": true,\n            \"Source\": \"/var/run/docker.sock\",\n            \"Type\": \"bind\"\n        }\n    ],\n    \"Name\": \"/laughing_ride\",\n    \"NetworkSettings\": {\n        \"Bridge\": \"\",\n        \"EndpointID\": \"\",\n        \"Gateway\": \"\",\n        \"GlobalIPv6Address\": \"\",\n        \"GlobalIPv6PrefixLen\": 0,\n        \"HairpinMode\": false,\n        \"IPAddress\": \"\",\n        \"IPPrefixLen\": 0,\n        \"IPv6Gateway\": \"\",\n        \"LinkLocalIPv6Address\": \"\",\n        \"LinkLocalIPv6PrefixLen\": 0,\n        \"MacAddress\": \"\",\n        \"Networks\": {\n            \"web\": {\n                \"Aliases\": [\n                    \"5c2ab8f080b1\"\n                ],\n                \"DriverOpts\": null,\n                \"EndpointID\": \"e266d18dbd57121746dc1fb14023905bacf1211107a385adddac1a4c465ae759\",\n                \"Gateway\": \"172.23.0.1\",\n                \"GlobalIPv6Address\": \"\",\n                \"GlobalIPv6PrefixLen\": 0,\n                \"IPAMConfig\": null,\n                \"IPAddress\": \"172.23.0.5\",\n                \"IPPrefixLen\": 24,\n                \"IPv6Gateway\": \"\",\n                \"Links\": null,\n                \"MacAddress\": \"02:42:ac:17:00:05\",\n                \"NetworkID\": \"845af1dda5bd6ca093f6f3b0082cfcda883a2ef35cffbc54668fc5f69f1898f4\"\n            }\n        },\n        \"Ports\": {\n            \"80/tcp\": [\n                {\n                    \"HostIp\": \"0.0.0.0\",\n                    \"HostPort\": \"80\"\n                }\n            ]\n        },\n        \"SandboxID\": \"77a47e71fab786d1cd48d5c9fd2fe707a45ccd1bea16b01de8035c112105a8f9\",\n        \"SandboxKey\": \"/var/run/docker/netns/77a47e71fab7\",\n        \"SecondaryIPAddresses\": null,\n        \"SecondaryIPv6Addresses\": null\n    },\n    \"Path\": \"/app/docker-entrypoint.sh\",\n    \"Platform\": \"linux\",\n    \"ProcessLabel\": \"\",\n    \"ResolvConfPath\": \"/var/lib/docker/containers/5c2ab8f080b124175b09c81b14153477e7634e0feeafdc9644abadba4ca9a15a/resolv.conf\",\n    \"RestartCount\": 0,\n    \"State\": {\n        \"Dead\": false,\n        \"Error\": \"\",\n        \"ExitCode\": 0,\n        \"FinishedAt\": \"2018-05-04T13:10:53.640059961Z\",\n        \"OOMKilled\": false,\n        \"Paused\": false,\n        \"Pid\": 11715,\n        \"Restarting\": false,\n        \"Running\": true,\n        \"StartedAt\": \"2018-05-04T13:10:54.718305989Z\",\n        \"Status\": \"running\"\n    }\n}\nand this here can be edited without problems:\n{\n    \"AppArmorProfile\": \"\",\n    \"Args\": [\n        \"phpmyadmin\"\n    ],\n    \"Config\": {\n        \"ArgsEscaped\": true,\n        \"AttachStderr\": false,\n        \"AttachStdin\": false,\n        \"AttachStdout\": false,\n        \"Cmd\": [\n            \"phpmyadmin\"\n        ],\n        \"Domainname\": \"\",\n        \"Entrypoint\": [\n            \"/run.sh\"\n        ],\n        \"Env\": [\n            \"PMA_ARBITRARY=1\",\n            \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n            \"PHPIZE_DEPS=autoconf \\t\\tdpkg-dev dpkg \\t\\tfile \\t\\tg++ \\t\\tgcc \\t\\tlibc-dev \\t\\tmake \\t\\tpkgconf \\t\\tre2c\",\n            \"PHP_INI_DIR=/usr/local/etc/php\",\n            \"PHP_EXTRA_CONFIGURE_ARGS=--enable-fpm --with-fpm-user=www-data --with-fpm-group=www-data\",\n            \"PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2\",\n            \"PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2\",\n            \"PHP_LDFLAGS=-Wl,-O1 -Wl,--hash-style=both -pie\",\n            \"GPG_KEYS=1729F83938DA44E27BA0F4D3DBDB397470D12172 B1B44D8F021E4E2D6021E995DC9FF8D3EE5AF27F\",\n            \"PHP_VERSION=7.2.4\",\n            \"PHP_URL=https://secure.php.net/get/php-7.2.4.tar.xz/from/this/mirror\",\n            \"PHP_ASC_URL=https://secure.php.net/get/php-7.2.4.tar.xz.asc/from/this/mirror\",\n            \"PHP_SHA256=7916b1bd148ddfd46d7f8f9a517d4b09cd8a8ad9248734e7c8dd91ef17057a88\",\n            \"VERSION=4.8.0.1\",\n            \"URL=https://files.phpmyadmin.net/phpMyAdmin/4.8.0.1/phpMyAdmin-4.8.0.1-all-languages.tar.gz\",\n            \"PHP_MD5=\"\n        ],\n        \"ExposedPorts\": {\n            \"80/tcp\": {},\n            \"9000/tcp\": {}\n        },\n        \"Hostname\": \"myadmin\",\n        \"Image\": \"phpmyadmin/phpmyadmin:latest\",\n        \"Labels\": {\n            \"version\": \"4.8.0.1\"\n        },\n        \"MacAddress\": \"02:42:ac:11:00:02\",\n        \"OnBuild\": null,\n        \"OpenStdin\": false,\n        \"StdinOnce\": false,\n        \"Tty\": false,\n        \"User\": \"\",\n        \"Volumes\": null,\n        \"WorkingDir\": \"/var/www/html\"\n    },\n    \"Created\": \"2018-05-04T13:34:41.469282046Z\",\n    \"Driver\": \"overlay2\",\n    \"ExecIDs\": null,\n    \"GraphDriver\": {\n        \"Data\": {\n            \"LowerDir\": \"/var/lib/docker/overlay2/c612ae7242f42c1c06b23a99daae676a5e603399470b08c36c967e8a37938c32-init/diff:/var/lib/docker/overlay2/c7dc41ab21f91d033769196050e566e83aeb60b40ced1de09b6dca9f2dd18841/diff:/var/lib/docker/overlay2/7f8066866fccc9c3db168d5e9ef18ee7a54718731393b352d93fbdcd82710bf7/diff:/var/lib/docker/overlay2/7180130d5f0e5658aae082df8ee73de13ebbf2000b62f7ec77bad6d40a38868a/diff:/var/lib/docker/overlay2/f142327cd8bb1084d11b6236226418165e8400a236d8991bad381a2850b84033/diff:/var/lib/docker/overlay2/501cbfafd1694333fdb15179653cf30c790c58e5060018fa77a5dd0c8662e316/diff:/var/lib/docker/overlay2/99ae574c84a97120287091cc693177336e01d9232e2cfff4c54404e0f3649638/diff:/var/lib/docker/overlay2/37bf2a9e4a2656b934b4adf131fd3496567462618f0a7666b2e978d2db1eeb9b/diff:/var/lib/docker/overlay2/1e25e005b63da2972d0e7766168dc6667bf6f7fc3daffb90cdc6eb21080e82c1/diff:/var/lib/docker/overlay2/912ff8fd49eb44917d92eb5edcd3e326319ee82b6d247405855a1c16f8232258/diff:/var/lib/docker/overlay2/40d321cc487b4432b98e637ed851109ff28efbe0c7ab503a920a50521dcf25ee/diff:/var/lib/docker/overlay2/f280745c47864242b05cc0314384acd24cf16b8b107e3150d2414807cf1d2b46/diff:/var/lib/docker/overlay2/caed9b9677a796383887d299986b01a9eb23bfd1fd055ab0339297f07e91318b/diff:/var/lib/docker/overlay2/68abc391c2d26080c9ee4400675a769359d730a5fde651b262a91639f09851c0/diff:/var/lib/docker/overlay2/7c550b649907e2dd9041323a82f039c5a8251c4b42bc92bf5cdb3b7668103325/diff:/var/lib/docker/overlay2/aab52bc4d83eb8215f752ef5ebc83e7217b6622bf2e055bf52bdc9a630980674/diff:/var/lib/docker/overlay2/b229c51a73a23d57961061e94679576d3a6f4adb9ea17f735e22db966dd091ed/diff:/var/lib/docker/overlay2/9f8701bcad5dae05b84ce2ecdd42209490418ad8620eb773a7c93cc1a242c079/diff:/var/lib/docker/overlay2/2c14503c9f0d67856edc87334817dd98926848541111e4f73631d66c7ce28c74/diff\",\n            \"MergedDir\": \"/var/lib/docker/overlay2/c612ae7242f42c1c06b23a99daae676a5e603399470b08c36c967e8a37938c32/merged\",\n            \"UpperDir\": \"/var/lib/docker/overlay2/c612ae7242f42c1c06b23a99daae676a5e603399470b08c36c967e8a37938c32/diff\",\n            \"WorkDir\": \"/var/lib/docker/overlay2/c612ae7242f42c1c06b23a99daae676a5e603399470b08c36c967e8a37938c32/work\"\n        },\n        \"Name\": \"overlay2\"\n    },\n    \"HostConfig\": {\n        \"AutoRemove\": false,\n        \"Binds\": [],\n        \"BlkioDeviceReadBps\": null,\n        \"BlkioDeviceReadIOps\": null,\n        \"BlkioDeviceWriteBps\": null,\n        \"BlkioDeviceWriteIOps\": null,\n        \"BlkioWeight\": 0,\n        \"BlkioWeightDevice\": null,\n        \"CapAdd\": null,\n        \"CapDrop\": null,\n        \"Cgroup\": \"\",\n        \"CgroupParent\": \"\",\n        \"ConsoleSize\": [\n            0,\n            0\n        ],\n        \"ContainerIDFile\": \"\",\n        \"CpuCount\": 0,\n        \"CpuPercent\": 0,\n        \"CpuPeriod\": 0,\n        \"CpuQuota\": 0,\n        \"CpuRealtimePeriod\": 0,\n        \"CpuRealtimeRuntime\": 0,\n        \"CpuShares\": 0,\n        \"CpusetCpus\": \"\",\n        \"CpusetMems\": \"\",\n        \"DeviceCgroupRules\": null,\n        \"Devices\": [],\n        \"DiskQuota\": 0,\n        \"Dns\": null,\n        \"DnsOptions\": null,\n        \"DnsSearch\": null,\n        \"ExtraHosts\": [],\n        \"GroupAdd\": null,\n        \"IOMaximumBandwidth\": 0,\n        \"IOMaximumIOps\": 0,\n        \"IpcMode\": \"shareable\",\n        \"Isolation\": \"\",\n        \"KernelMemory\": 0,\n        \"Links\": null,\n        \"LogConfig\": {\n            \"Config\": {},\n            \"Type\": \"json-file\"\n        },\n        \"Memory\": 0,\n        \"MemoryReservation\": 0,\n        \"MemorySwap\": 0,\n        \"MemorySwappiness\": null,\n        \"NanoCpus\": 0,\n        \"NetworkMode\": \"web\",\n        \"OomKillDisable\": false,\n        \"OomScoreAdj\": 0,\n        \"PidMode\": \"\",\n        \"PidsLimit\": 0,\n        \"PortBindings\": {},\n        \"Privileged\": false,\n        \"PublishAllPorts\": true,\n        \"ReadonlyRootfs\": false,\n        \"RestartPolicy\": {\n            \"MaximumRetryCount\": 0,\n            \"Name\": \"no\"\n        },\n        \"Runtime\": \"runc\",\n        \"SecurityOpt\": null,\n        \"ShmSize\": 67108864,\n        \"UTSMode\": \"\",\n        \"Ulimits\": null,\n        \"UsernsMode\": \"\",\n        \"VolumeDriver\": \"\",\n        \"VolumesFrom\": null\n    },\n    \"HostnamePath\": \"/var/lib/docker/containers/424c3c4beef3458484d3989f1ce542d696b30ade5ef3e38bf236346421cdd35e/hostname\",\n    \"HostsPath\": \"/var/lib/docker/containers/424c3c4beef3458484d3989f1ce542d696b30ade5ef3e38bf236346421cdd35e/hosts\",\n    \"Id\": \"424c3c4beef3458484d3989f1ce542d696b30ade5ef3e38bf236346421cdd35e\",\n    \"Image\": \"sha256:7af57eae1e90a48f78a82e91ba3eb8d0ac8b1a6745fdeb69f87134e8cb63a0ef\",\n    \"LogPath\": \"/var/lib/docker/containers/424c3c4beef3458484d3989f1ce542d696b30ade5ef3e38bf236346421cdd35e/424c3c4beef3458484d3989f1ce542d696b30ade5ef3e38bf236346421cdd35e-json.log\",\n    \"MountLabel\": \"\",\n    \"Mounts\": [],\n    \"Name\": \"/myadmin\",\n    \"NetworkSettings\": {\n        \"Bridge\": \"\",\n        \"EndpointID\": \"\",\n        \"Gateway\": \"\",\n        \"GlobalIPv6Address\": \"\",\n        \"GlobalIPv6PrefixLen\": 0,\n        \"HairpinMode\": false,\n        \"IPAddress\": \"\",\n        \"IPPrefixLen\": 0,\n        \"IPv6Gateway\": \"\",\n        \"LinkLocalIPv6Address\": \"\",\n        \"LinkLocalIPv6PrefixLen\": 0,\n        \"MacAddress\": \"\",\n        \"Networks\": {\n            \"web\": {\n                \"Aliases\": [\n                    \"424c3c4beef3\"\n                ],\n                \"DriverOpts\": null,\n                \"EndpointID\": \"e3d74dfc9e3246f23d109c63c6493def18778020189d39b8dc850ca2e6184098\",\n                \"Gateway\": \"172.23.0.1\",\n                \"GlobalIPv6Address\": \"\",\n                \"GlobalIPv6PrefixLen\": 0,\n                \"IPAMConfig\": {},\n                \"IPAddress\": \"172.23.0.2\",\n                \"IPPrefixLen\": 24,\n                \"IPv6Gateway\": \"\",\n                \"Links\": null,\n                \"MacAddress\": \"02:42:ac:11:00:02\",\n                \"NetworkID\": \"845af1dda5bd6ca093f6f3b0082cfcda883a2ef35cffbc54668fc5f69f1898f4\"\n            }\n        },\n        \"Ports\": {\n            \"80/tcp\": [\n                {\n                    \"HostIp\": \"0.0.0.0\",\n                    \"HostPort\": \"32781\"\n                }\n            ],\n            \"9000/tcp\": [\n                {\n                    \"HostIp\": \"0.0.0.0\",\n                    \"HostPort\": \"32780\"\n                }\n            ]\n        },\n        \"SandboxID\": \"39f5bf18f8ee82cd59cc26c60e9e49d739a9bb033ec0a8b2215a3c980fe366d4\",\n        \"SandboxKey\": \"/var/run/docker/netns/39f5bf18f8ee\",\n        \"SecondaryIPAddresses\": null,\n        \"SecondaryIPv6Addresses\": null\n    },\n    \"Path\": \"/run.sh\",\n    \"Platform\": \"linux\",\n    \"Portainer\": {\n        \"ResourceControl\": {\n            \"Id\": 10,\n            \"ResourceId\": \"424c3c4beef3458484d3989f1ce542d696b30ade5ef3e38bf236346421cdd35e\",\n            \"SubResourceIds\": [],\n            \"Type\": 1,\n            \"AdministratorsOnly\": true,\n            \"UserAccesses\": [],\n            \"TeamAccesses\": []\n        }\n    },\n    \"ProcessLabel\": \"\",\n    \"ResolvConfPath\": \"/var/lib/docker/containers/424c3c4beef3458484d3989f1ce542d696b30ade5ef3e38bf236346421cdd35e/resolv.conf\",\n    \"RestartCount\": 0,\n    \"State\": {\n        \"Dead\": false,\n        \"Error\": \"\",\n        \"ExitCode\": 0,\n        \"FinishedAt\": \"0001-01-01T00:00:00Z\",\n        \"OOMKilled\": false,\n        \"Paused\": false,\n        \"Pid\": 12425,\n        \"Restarting\": false,\n        \"Running\": true,\n        \"StartedAt\": \"2018-05-04T13:34:42.296799427Z\",\n        \"Status\": \"running\"\n    }\n}. OK, after some more digging in the browser console:\nIn the response from http://myhost:9000/api/endpoints/1/docker/containers/5c2ab8f080b124175b09c81b14153477e7634e0feeafdc9644abadba4ca9a15a/json\nThere is config.HostConfig.NetworkMode says \"bridge\"\nbut under NetworkSettings.Networks there is only the network, that I called \"web\".\nWhat happened:\nI created this container in the network \"bridge\", later I made the network \"web\" and changed the network of the container by joining the network \"web\" and then leaving \"bridge\".\nLooks like at some point the old config is still present. Hope that helps.. ",
    "douglasg14b": "\nWhat happened:\nI created this container in the network \"bridge\", later I made the network \"web\" and changed the network of the container by joining the network \"web\" and then leaving \"bridge\".\n\nThis i exactly what occurred to me as well. ",
    "ollieatseats": "I started a new container hello-world:linux and added the following two records\nconfig.management.local:10.22.8.9\nclient.management.local:10.22.8.9\nWhen the container started it only persisted the first record so I went in and added the second record again and it still did not persist it. \nI am running the docker host on a fully patched Ubuntu 16.04 Azure VM (DSv2) with 18.03.1-ce installed. If you cant recreate it, its probably just my environment, it just seems strange,. I added the second host name via the UI again and redeployed the container and it still not add the second value. . When I create the container I add the following host entries:\n\nOnce the container is created I then go in to edit the host entries to redeploy the container:\n\n. ",
    "itamarjp": "I am interested in this feature too.\n. ",
    "zx1986": "I need this too ...\nMy .env file is so long.. 2018/12/03 04:45:05 http error: Unable to find the endpoint associated to the stack inside the database (err=Object not found inside the database) (code=404)\nThe same error, Portainer 1.19.2\nI had remove the unavailable node from endpoints and docker swarm cluster.. Same case I faced :-(\nPortainer 1.19.2. ",
    "donvito": "Same request here. I think a table view with built-in filtering will work. We are running around 400+ containers using 30 nodes and it is literally impossible to use the visualizer.. @deviantony, I did a quick hack of the code. Here is the commit.\nhttps://github.com/donvito/portainer/commit/1db1ad046946fe8b06ae660e61ecdfd6fec441e5\nComparing the space used when showing as a card view.\n\nTable view of the nodes\n\nShowing 2 nodes. Since I don't have a multiple-node setup, I just copied the html to show how it looks.\n\n. You need to revisit the card design then if that's the purpose. It's not really useful if you're running so many nodes. Maybe the info inside the cards should just be compressed.. Looks better, the container boxes should wrap depending on the width of the browser.. How about compressing it? Like this... \n\nWould be good to have an option to open it in full screen without the left menus and top header if the purpose is to show in a command center.\n. ",
    "Diftraku": "Having used Portainer in production for a few years now, our swarm (and number of tasks) has grown to a point where a normal 16:10 monitor (1920x1200) is not big enough to properly display any of the information beyond the first few tasks on the three top-most nodes.\nI'm personally leaning towards a compressed layout, as it still shows what is important (the tasks) but removes excess whitespace. The table view would be nice to have, but I feel it should either be a toggle to switch the visualizer between the two layouts or a completely separate page (similar to how listing services work but with grouping per node).. After removing one node from a swarm a bit too hastily, I can vouch that hiding stuck/ghost tasks may be ill-advised, especially if you rely on using service names for routing connections (like HTTP from nginx service with a published port to a container belonging to a service with unpublished port, sharing the same network). Any \"ghosted\" tasks will still be considered as valid targets for the swarm's internal load balancing, regardless of their actual state (this took a while to figure out).\nThe workaround of scaling to 0, force updating and then scaling back does work, but it might require toggling back and forth with especially persistent ghost tasks.. ",
    "noonowl71": "I'm having a similar issue.\nI'm running portainer on a swarm with data persistence on a ceph volume. This way the container can move across all nodes. It works fine but the problem is when the service it's rescheduled on another node the portainer session expires so I have to log in again.\nI think it's because the session it's stored in memory and it's lost when container is moved to another node.\n@deviantony  Is it possible to store sessions on database to avoid this behavior?\nThanks. ",
    "ociotec": "I've also this issue (swarm on a x4 raspberry pi cluster) with latest dockerized portainer version (0.17.1). ",
    "PhxAudioPhile": "I'm running version 1.20.0 and am experiencing the same issue.  It will duplicate containers, images and volumes from time to time.  When it duplicates resources it will usually report the container or image on multiple nodes.  One of the resources is correct while the other reported resources are ghosts.  Refreshing the screen will usually get rid of them.\nI'm running an 11 node swarm with 3 managers and 8 workers.  Believe all the node servers are Ubuntu 16.04.. ",
    "mickkael": "I can confirm the same behavior here.\nDocker swarm with 3nodes; 2 rpi (18.09.0) and & 1 x86 (18.06.0-ce) in the same cluster\nportainer is running on rpi and agent on the others - 1.20.0\nthe container are counted 2x and 3x sometimes, but only on the x86. ",
    "Yumash": "Actually, i have checked (my references above) the real situation with puppet.\ndocker seems to be OK (except the dead agent containers somewhere on nodes), maybe GUI troubles?\nHaven't discovered duplicated agent images or running constrained containers.\nAlso, situation with agent restarting bothers me. In my mind agent should start once and live forever :). @deviantony \nHave some like issue. \nI see agents are restarting many times, and many dead agents appear than. Later they disappear, but the behaviour is strange.\n``# docker ps -a\nCONTAINER ID        IMAGE                    COMMAND             CREATED             STATUS                      PORTS                    NAMES\n3e6342a97530        portainer/agent:latest   \"./agent\"           17 minutes ago      Up 17 minutes               0.0.0.0:9001->9001/tcp   portainer_agent.k9n804mluwwpa98ln34z2qfdj.xg5bbwjijm69euaq2louwq66h\nff83adfed17d        portainer/agent:latest   \"./agent\"           20 minutes ago      Exited (2) 17 minutes ago                            portainer_agent.k9n804mluwwpa98ln34z2qfdj.rkq96pzcsqcoyehkaccway5sb\nroot@cloud202:/home/yumashev# docker log ff83adfed17d\ndocker: 'log' is not a docker command.\nSee 'docker --help'\nroot@cloud202:/home/yumashev# docker logs ff83adfed17d\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: ff83adfed17d 10.0.2.4\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: e4d95233528e 10.0.2.8\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: b4ce4e94185f 10.0.2.3\n2019/02/07 19:11:26 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true)\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: 8011992b39de 10.0.2.16\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: a8e28c16dfe4 10.0.2.5\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: 0cc483cbace4 10.0.2.9\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: daac8bb53879 10.0.2.17\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: 2de493a607bb 10.0.2.14\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: 475fd26e501c 10.0.2.12\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: 7e2aa1d86d78 10.0.2.7\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: 8ae5c6b1ea72 10.0.2.11\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: 9cea81fe96e9 10.0.2.15\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: b9d27506050d 10.0.2.6\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: ffa7d76b23be 10.0.2.10\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: cb5e283ab43c 10.0.2.18\n2019/02/07 19:11:26 [INFO] serf: EventMemberJoin: 79da56d51e57 10.0.2.13\npanic: interface conversion: interface {} is map[string]interface {}, not []interface {}\ngoroutine 368 [running]:\ngithub.com/portainer/agent/http/proxy.responseToJSONArray(0xc000722750, 0xc000024180, 0x10, 0x0, 0x0, 0xc000472040, 0x4295f2, 0xc000000008)\n    /home/tony/workspaces/go/src/github.com/portainer/agent/http/proxy/response.go:47 +0x304\ngithub.com/portainer/agent/http/proxy.(ClusterProxy).copyAndExecuteRequest(0xc00000c118, 0xc000672500, 0xc000462600, 0xc0003ea5a0, 0xc000024290)\n    /home/tony/workspaces/go/src/github.com/portainer/agent/http/proxy/cluster.go:101 +0x123\ncreated by github.com/portainer/agent/http/proxy.(ClusterProxy).executeRequestOnCluster\n    /home/tony/workspaces/go/src/github.com/portainer/agent/http/proxy/cluster.go:79 +0x87\n```. # curl -vvv https://downloads.portainer.io\n Rebuilt URL to: https://downloads.portainer.io/\n   Trying 159.89.223.83...\n connect to 159.89.223.83 port 443 failed: Connection timed out\n Failed to connect to downloads.portainer.io port 443: Connection timed out\n* Closing connection 0\ncurl: (7) Failed to connect to downloads.portainer.io port 443: Connection timed out\nAnyway, found agent config at docs.. Yes, deployed from such yml:\n```\nversion: '3.2'\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n      CAP_HOST_MANAGEMENT: 1\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    ports:\n      - target: 9001\n        published: 9001\n        protocol: tcp\n        mode: host\n    networks:\n      - portainer_agent\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\nnetworks:\n  portainer_agent:\n    driver: overlay\n    attachable: true\n```\ndocker stack deploy --compose-file=portainer-agent-stack.yml portainer\n. Sure\nDocker version 18.09.1, build 4c52b90\nUbuntu 16.04\nLocal network (192.168.2.1/24)\nOne of manager nodes has outer IP on separate interfaces (eth0). Local network for all nodes including manager is on interface eth1.. 16  (14 nodes, 2 managers). docker service create  --name portainer --publish 9000:9000  --replicas=1  --constraint 'node.hostname == mynode220'  --mount type=bind,src=/data/portainer,dst=/data     portainer/portainer\n(on the one of manager nodes). Yes, according to instructions from here. ",
    "apearson": "Hope you don't mind me taking this one.  Was very simple and was a reason to download the repo and explore it. . ",
    "acvejic": "Hi, this feature with custom command is exactly what I need. In current version there are /bin/bash /bin/sh and /bin/ash. For my implementation I need \"/bin/bash -l\" to create login session in order to load some configs.. ",
    "fslDev": "FYI, I'm seeing the same behavior connecting directly to Portainer (i.e. not behind a proxy). ",
    "nightah": "@deviantony pr1901 still fails with the same error:\n2018/05/16 00:53:04 Starting Portainer 1.17.0 on :9000\n2018/05/16 00:53:51 http error: websocket: request origin not allowed by Upgrader.CheckOrigin (code=500)\n2018/05/16 00:53:51 http: multiple response.WriteHeader calls\nThe frontend still displays the no such exec error also.. ",
    "intergate": "The problem is that nginx does not allow the websocket connection.\nThe problem can be solved easily if the configuration of Nginx adapt.\nlocation /wsapp/ {\n    proxy_pass http://wsbackend;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"Upgrade\";\n}. ",
    "khast3x": "@intergate thank you this worked for me.  \nDon't forget to rebuild with the docker-compose up --build option for changes to take effect\n```\n. @intergate thank you this worked for me.  \nDon't forget to rebuild with the docker-compose up --build option for changes to take effect\n```\n. ",
    "tripplet": "@deviantony \nJust tested portainer/portainer:pr1898 with the - \"./config.json:/config.json\" line remove from my compose file and works fine.\nThanks a lot for the quick issue handling.. ",
    "xrobau": "```\n[\n    {\n        \"Id\": 1,\n        \"Name\": \"vswarm-1\",\n        \"Type\": 0,\n        \"URL\": \"tcp://10.61.0.201:2375\",\n        \"GroupId\": 0,\n        \"PublicURL\": \"\",\n        \"TLSConfig\": {\n            \"TLS\": false,\n            \"TLSSkipVerify\": true\n        },\n        \"AuthorizedUsers\": [\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n},\n{\n    \"Id\": 2,\n    \"Name\": \"vswarm-2\",\n    \"Type\": 1,\n    \"URL\": \"tcp://10.61.0.202:2375\",\n    \"GroupId\": 1,\n    \"PublicURL\": \"10.61.0.202\",\n    \"TLSConfig\": {\n        \"TLS\": false,\n        \"TLSSkipVerify\": false\n    },\n    \"AuthorizedUsers\": [\n\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n},\n{\n    \"Id\": 3,\n    \"Name\": \"vswarm-3\",\n    \"Type\": 1,\n    \"URL\": \"tcp://10.61.0.203:2375\",\n    \"GroupId\": 1,\n    \"PublicURL\": \"10.61.0.203\",\n    \"TLSConfig\": {\n        \"TLS\": false,\n        \"TLSSkipVerify\": false\n    },\n    \"AuthorizedUsers\": [\n\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n},\n{\n    \"Id\": 4,\n    \"Name\": \"vswarm-4\",\n    \"Type\": 1,\n    \"URL\": \"tcp://10.61.0.204:2375\",\n    \"GroupId\": 1,\n    \"PublicURL\": \"10.61.0.204\",\n    \"TLSConfig\": {\n        \"TLS\": false,\n        \"TLSSkipVerify\": false\n    },\n    \"AuthorizedUsers\": [\n\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n},\n{\n    \"Id\": 5,\n    \"Name\": \"vswarm-5\",\n    \"Type\": 1,\n    \"URL\": \"tcp://10.61.0.205:2375\",\n    \"GroupId\": 1,\n    \"PublicURL\": \"10.61.0.205\",\n    \"TLSConfig\": {\n        \"TLS\": false,\n        \"TLSSkipVerify\": false\n    },\n    \"AuthorizedUsers\": [\n\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n}\n\n]\n```\nEdit: I did fix the GroupID after posting this, but the error has not changed.. The 502 comes when it's requesting /api/endpoints/1/docker/version. After some random clicking around, I discovered that I was actually logged in, and could click around.  I can connect to the two non-manager nodes without a problem, but when I try to switch to 1, 2, or 3, I get 502's on /api/endpoints/{id}/docker/(swarm|version|info).\n. All of them are. The first one was auto-created by the -H param when I created it.\nThis seems to be more puzzling as I go.\n\nI'm not getting a 502 when I manually fix the URL (remove /#/auth)  but something is missing in what is returned.. Still the TLS misconfiguration\n[root@vswarm-3 ~]# docker logs -f 7257da1ca8c4\n2018/05/14 05:54:53 Instance already has defined endpoints. Skipping the endpoint defined via CLI.\n2018/05/14 05:54:53 Starting Portainer 1.17.0 on :9000\n2018/05/14 05:55:06 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:00:19 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:00:19 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:00:19 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:00:33 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:00:33 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:00:33 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:00:36 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:00:36 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:18 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:18 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:18 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:24 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:24 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:24 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:30 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:30 http: proxy error: tls: oversized record received with length 20527\n2018/05/14 06:01:30 http: proxy error: tls: oversized record received with length 20527\n. I guess the next thing for me to do is a bisect.  Lets see if I can find your 'build a dev environment' document  again...  https://portainer.readthedocs.io/en/latest/contribute.html looks like it.\nIf you think the portainer.db will help you, I can put it in dropbox or something.\n. The problem is it shouldn't be using TLS at all to connect to the manager nodes. That is the issue. Something is telling Portainer to use TLS, and it shouldn't be. I had a browse through the changes, and nothing jumped out at me (but, I'm not a Go guy...).   I won't have time to do a Bisect until next week, as I'm on a pretty tight sprint at the moment 8-\\\n. @jgrasl that makes me think it is Database related.  So I tried an experiment - I deleted vswarm-3 and readded it. And now it's working fine. However, I can't see any difference!\nI grabbed a binary blob out of the portainer.db before the change:\n@^@^@^@^@^@^@^@^@^@^A{\"Id\":1,\"Name\":\"vswarm-1\",\"URL\":\"tcp://10.61.0.201:2375\",\"PublicURL\":\"10.61.0.201\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^B{\"Id\":2,\"Name\":\"vswarm-2\",\"Type\":1,\"URL\":\"tcp://10.61.0.202:2375\",\"GroupId\":1,\"PublicURL\":\"10.61.0.202\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^C{\"Id\":3,\"Name\":\"vswarm-3\",\"Type\":1,\"URL\":\"tcp://10.61.0.203:2375\",\"GroupId\":1,\"PublicURL\":\"10.61.0.203\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^D{\"Id\":4,\"Name\":\"vswarm-4\",\"Type\":1,\"URL\":\"tcp://10.61.0.204:2375\",\"GroupId\":1,\"PublicURL\":\"10.61.0.204\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":false},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^E{\"Id\":5,\"Name\":\"vswarm-5\",\"Type\":1,\"URL\":\"tcp://10.61.0.205:2375\",\"GroupId\":1,\"PublicURL\":\"10.61.0.205\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":false},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@\nAnd after:\n^@^@^@^@^@^A{\"Id\":1,\"Name\":\"vswarm-1\",\"URL\":\"tcp://10.61.0.201:2375\",\"PublicURL\":\"10.61.0.201\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^B{\"Id\":2,\"Name\":\"vswarm-2\",\"Type\":1,\"URL\":\"tcp://10.61.0.202:2375\",\"GroupId\":1,\"PublicURL\":\"10.61.0.202\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^D{\"Id\":4,\"Name\":\"vswarm-4\",\"Type\":1,\"URL\":\"tcp://10.61.0.204:2375\",\"GroupId\":1,\"PublicURL\":\"10.61.0.204\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":false},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^E{\"Id\":5,\"Name\":\"vswarm-5\",\"Type\":1,\"URL\":\"tcp://10.61.0.205:2375\",\"GroupId\":1,\"PublicURL\":\"10.61.0.205\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":false},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^F{\"Id\":6,\"Name\":\"vswarm-3\",\"Type\":1,\"URL\":\"tcp://10.61.0.203:2375\",\"GroupId\":1,\"PublicURL\":\"10.61.0.203\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":false},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}^@^@^@^@^@^@^@^@^@^@^@^\nBut now I can connect to vswarm-3 without an error. There must be some magic happening somewhere behind the scenes to do with node creation that isn't being done on a migration/upgrade.\nI won't re-do the other nodes, because it's possible that @deviantony might want my database after all 8). Oh, It looks like the problem is here\nhttps://github.com/portainer/portainer/blob/develop/api/http/client/client.go#L25\nThat's saying if TLS is enabled or if TLS Skip Verify is enabled, use TLS.  If Skip Verify is enabled, but TLS is not enabled, it shouldn't be using TLS.\n. These were added through the GUI a couple of versions ago. Nothing special or unusual was done.. It's still happening. I'm guessing that code snippet is somewhere else, too. . Current output of endpoints, after I recreated vswarm-3 (so it's now ID 6) -- I recreated it with 1.17.0, not with pr1896, btw.\n```\n[\n    {\n        \"Id\": 1,\n        \"Name\": \"vswarm-1\",\n        \"Type\": 0,\n        \"URL\": \"tcp://10.61.0.201:2375\",\n        \"GroupId\": 1,\n        \"PublicURL\": \"10.61.0.201\",\n        \"TLSConfig\": {\n            \"TLS\": false,\n            \"TLSSkipVerify\": true\n        },\n        \"AuthorizedUsers\": [\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n},\n{\n    \"Id\": 2,\n    \"Name\": \"vswarm-2\",\n    \"Type\": 1,\n    \"URL\": \"tcp://10.61.0.202:2375\",\n    \"GroupId\": 1,\n    \"PublicURL\": \"10.61.0.202\",\n    \"TLSConfig\": {\n        \"TLS\": false,\n        \"TLSSkipVerify\": true\n    },\n    \"AuthorizedUsers\": [\n\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n},\n{\n    \"Id\": 4,\n    \"Name\": \"vswarm-4\",\n    \"Type\": 1,\n    \"URL\": \"tcp://10.61.0.204:2375\",\n    \"GroupId\": 1,\n    \"PublicURL\": \"10.61.0.204\",\n    \"TLSConfig\": {\n        \"TLS\": false,\n        \"TLSSkipVerify\": false\n    },\n    \"AuthorizedUsers\": [\n\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n},\n{\n    \"Id\": 5,\n    \"Name\": \"vswarm-5\",\n    \"Type\": 1,\n    \"URL\": \"tcp://10.61.0.205:2375\",\n    \"GroupId\": 1,\n    \"PublicURL\": \"10.61.0.205\",\n    \"TLSConfig\": {\n        \"TLS\": false,\n        \"TLSSkipVerify\": false\n    },\n    \"AuthorizedUsers\": [\n\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n},\n{\n    \"Id\": 6,\n    \"Name\": \"vswarm-3\",\n    \"Type\": 1,\n    \"URL\": \"tcp://10.61.0.203:2375\",\n    \"GroupId\": 1,\n    \"PublicURL\": \"10.61.0.203\",\n    \"TLSConfig\": {\n        \"TLS\": false,\n        \"TLSSkipVerify\": false\n    },\n    \"AuthorizedUsers\": [\n\n    ],\n    \"AuthorizedTeams\": [\n\n    ],\n    \"Extensions\": [\n\n    ]\n}\n\n]\n```\n. Oh. Does PR1896 contain PR1892? I didn't look. Maybe that's why it's still not working 8). It failed to work immediately. The error is still present with pr1896. At that point I just recreated the three endpoints, as you should be easily able to recreate the issue locally.. If you can tell me how to set the TLSSkipVerify flag back on in the database, I'll be able to put it back to being broken 8). There's two problems, and while you've addressed the second (endpoint gets into an indeterminate TLS state), I don't think you've fully addressed the first - what to do WHEN an endpoint is in that state.  \nOther people (at least @jgrasl) have managed to get into this state, and it's very difficult for a non-technical user to fix.\nCan you readdress #1892 and find everywhere else that is making the same assumption? I guess that there's a lot of copy-and-pasted (rather than DRY!) TLS inits that I didn't find on my first look through.. > Actually you only need to re-create the endpoints in 1.17.0.\nWhich a user can't do if they're IN that state. Well, not without a bunch of hand-holding. . I've already deleted and recreated my endpoints, so I can't test it when it's in a broken state - unless there's some way for me to manually poke into the Portainer Database, to set the TLSSkipVerify flag on. \nSorry 8-(. ",
    "Zokormazo": "This should work then https://github.com/portainer/portainer/pull/1892. ",
    "parag-datar": "Hi @deviantony \nI am new to portainer and loved what you guys are doing here.\nI have added Created At column at the end of the table and attaching a screenshot here.\nWhat would be the appropriate order of the column?\nAlso, will it help if we use something like moment.js to make it human readable? Or will that be confusing while sorting on the column?\n\n. Sorry for not being clear in my last message.\n\nWhat would be the appropriate order of the column?\n\nWhat I mean is, including the Created At column, there are 9 columns. Currently, I have placed it at the end, after the Ownership column. Is that okay or should I place it somewhere else?\n\nWe're already using moment.js, have a look at the getisodate Angular filter that is used in other views.\n\nDone \ud83d\udc4d \n. > I found a strange issue while testing: try to click on the \"Columns\" setting and then directly on \"Settings\" (you can continue to alternate clicking on these two) it seems that some padding/marging is added on top of the container action bar... could you investigate this?\nI tried on FF and Chrome and that didn't happen for me. I clicked on Columns then Settings and alternated between them. Is that the way to reproduce it? Are you referring to the padding / margin mismatch when you show / hide State column?\n\nAfter that, we'll also need to persist the filters.\n\nDone \ud83d\udc4d I had already added that after my PR, was planning to add it with the review changes anyway\nThere is one potential issue though. Let's say the user hides all the columns and we persist these settings. Once the user refreshes, the containers list is going to be empty since there are no columns to be displayed in the table. Should we manually force the Name column to be there on initialization?\nAlso, what about Host column?\n. Yes added the Host column now. I am displaying the option in the menu only if showHostColumn is set, otherwise it doesn't make sense since the table is not displaying that anyway. Sure I have it ready. Let me add that. Done\n. Done\n. Done. ",
    "schemen": "Hi!\nThanks for the quick reply.\nWhen I add the ports with 9000:9000 I can log into Portainer/Create an admin user through the ingress IP or any IP belonging to the cluster.\nThe only log entry I receive on the portainer frontend is the following:\nportainer_app.1.meq603hr06nc@app3    | 2018/05/14 14:03:39 Starting Portainer 1.17.0 on :9000\nWhen accessed through the ingress network (i.e. \"host1.example.com:9000\") I can see everything and the agent works beautifully.. Maybe it's the involvment of multiple networks? Because without the agents and in it's standalone deployment version 1.17.0 works fine\nThe frontend is attached to two networks, the one for public access via portainer and the one for the agents.. This is currently not working. What I did:\n```\nversion: \"3\"\nservices:\n  app:\n    image: portainer/portainer\n    volumes:\n      - /var/data/portainer:/data\n    networks:\n      - traefik_public\n    deploy:\n      labels:\n        - traefik.frontend.rule=Host:swarm.example.com\n        - traefik.port=9000\n      placement:\n        constraints: [node.role == manager]\n    command: -H tcp://cluster.example.com:9001 --tlsskipverify\n    #command: -H unix:///var/run/docker.sock\nagent:\n    image: portainer/agent\n    ports:\n      - \"9001:9001\"\n    environment:\n      AGENT_CLUSTER_ADDR: cluster.example.com\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    deploy:\n      mode: global\nnetworks:\n  traefik_public:\n    external: true\n```\nThis is one of the errors I receive:\nportainer_app.1.1ohn2wq8pjiw@app1    | 2018/05/14 17:00:09 http: proxy error: Invalid Docker response\nAfter throwing out everything, it seems that I can still click at the Swarm field and see active tasks and the cluster visualisation, but everything else throws that error and times out.\nI've tried without TLS and with TLS but no verification.. Lemme try it out :) . @deviantony \nMh, sadly this is a negative. \nWhen i tried that I received the following error logs\nportainer_agent.0.9mhhupwt2tl9@app2    | 2018/05/14 18:18:44 [ERR] memberlist: Failed to send ping: write udp [::]:7946->10.255.0.68:7946: sendto: operation not permitted\nportainer_agent.0.j3nop71hf2cx@app3    | 2018/05/14 18:18:44 [ERR] memberlist: Failed to send ping: write udp [::]:7946->10.255.0.67:7946: sendto: operation not permitted\nportainer_agent.0.9mhhupwt2tl9@app2    | 2018/05/14 18:18:44 http error: Get https://10.255.0.67:9001/containers/json?all=1: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) (code=500)\nportainer_agent.0.8hvceadmf27i@app1    | 2018/05/14 18:18:44 http error: Get https://10.255.0.66:9001/images/json?all=0: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) (code=500)\nportainer_agent.0.9mhhupwt2tl9@app2    | 2018/05/14 18:18:44 http error: Get https://10.255.0.67:9001/volumes: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) (code=500)\nportainer_agent.0.8hvceadmf27i@app1    | 2018/05/14 18:18:44 http error: Get https://10.255.0.68:9001/networks: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) (code=500)\nportainer_agent.0.8hvceadmf27i@app1    | 2018/05/14 18:18:45 [ERR] memberlist: Failed to send ping: write udp [::]:7946->10.255.0.68:7946: sendto: operation not permitted\nAnd a lot more like that as time went on.\nis there any verbose option/debug option on the frontend side?. Yeah exactly like that. Although above solution would definitely not be ideal as it would expose the agents to any external access.\nI have found a workaround just now:\nIf I add the agents to the traefik_public network I was able to add the agents as an endpoint with the address tasks.agent:9001 again. This is probably working because they're all in the same network. \nI am really not sure what this issue might be here :S I hope I didn't bring a Traefik issue to you guys!\n. Sigh... It was my own fault, I am very sorry to bring this up.\nIf using multiple networks you should define which network to use for traefik so it doesn't fail at routing.\nhttps://docs.traefik.io/configuration/backends/docker/#using-docker-with-swarm-mode\nSo, a complete composer-file for traefik as an example would look like this:\n```\nversion: \"3\"\nservices:\n  app:\n    image: portainer/portainer\n    volumes:\n      - /var/data/portainer:/data\n    networks:\n      - traefik_public\n      - default\n    deploy:\n      labels:\n        - traefik.docker.network=traefik_public\n        - traefik.frontend.rule=Host:console.example.com\n        - traefik.port=9000\n      placement:\n        constraints: [node.role == manager]\n    command: -H tcp://tasks.agent:9001 --tlsskipverify\nagent:\n    image: portainer/agent\n    networks:\n      - default\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    deploy:\n      mode: global\nnetworks:\n  traefik_public:\n    external: true\n  default:\n    driver: overlay\n```\nI think this issue can be closed. This has been an issue on my traefik configuration.. ",
    "bal291": "They are both part of the same swarm cluster and are both managers. It is a mixed os swarm cluster. As you can see below, connected to the Linux Endpoint:\n\nNow connected to the Windows Endpoint and I was expecting to see the swarm menu items.\n\n. This is the /info response of the windows node.\njson\n{\n    \"ID\": \"EYKF:YT53:OIFF:333D:65SM:EMJH:QIJY:UZPS:AXHE:HSPJ:OZVK:3XVH\",\n    \"Containers\": 0,\n    \"ContainersRunning\": 0,\n    \"ContainersPaused\": 0,\n    \"ContainersStopped\": 0,\n    \"Images\": 63,\n    \"Driver\": \"windowsfilter\",\n    \"DriverStatus\": [[\"Windows\", \"\"]],\n    \"SystemStatus\": null,\n    \"Plugins\": {\n        \"Volume\": [\"local\"],\n        \"Network\": [\"l2bridge\", \"l2tunnel\", \"nat\", \"null\", \"overlay\", \"transparent\"],\n        \"Authorization\": null,\n        \"Log\": [\"awslogs\", \"etwlogs\", \"fluentd\", \"json-file\", \"logentries\", \"splunk\", \"syslog\"]\n    },\n    \"MemoryLimit\": false,\n    \"SwapLimit\": false,\n    \"KernelMemory\": false,\n    \"CpuCfsPeriod\": false,\n    \"CpuCfsQuota\": false,\n    \"CPUShares\": false,\n    \"CPUSet\": false,\n    \"IPv4Forwarding\": true,\n    \"BridgeNfIptables\": true,\n    \"BridgeNfIp6tables\": true,\n    \"Debug\": false,\n    \"NFd\": -1,\n    \"OomKillDisable\": false,\n    \"NGoroutines\": 26,\n    \"SystemTime\": \"2018-05-16T13:06:02.6974637+01:00\",\n    \"LoggingDriver\": \"json-file\",\n    \"CgroupDriver\": \"\",\n    \"NEventsListener\": 0,\n    \"KernelVersion\": \"10.0 14393 (14393.2125.amd64fre.rs1_release.180301-2139)\",\n    \"OperatingSystem\": \"Windows Server 2016 Standard\",\n    \"OSType\": \"windows\",\n    \"Architecture\": \"x86_64\",\n    \"IndexServerAddress\": \"https://index.docker.io/v1/\",\n    \"RegistryConfig\": {\n        \"AllowNondistributableArtifactsCIDRs\": [],\n        \"AllowNondistributableArtifactsHostnames\": [],\n        \"InsecureRegistryCIDRs\": [\"127.0.0.0/8\"],\n        \"IndexConfigs\": {\n            \"docker.io\": {\n                \"Name\": \"docker.io\",\n                \"Mirrors\": [],\n                \"Secure\": true,\n                \"Official\": true\n            }\n        },\n        \"Mirrors\": []\n    },\n    \"NCPU\": 1,\n    \"MemTotal\": 12582440960,\n    \"DockerRootDir\": \"C:\\\\ProgramData\\\\docker\",\n    \"HttpProxy\": \"\",\n    \"HttpsProxy\": \"\",\n    \"NoProxy\": \"\",\n    \"Name\": \"VM146\",\n    \"Labels\": null,\n    \"ExperimentalBuild\": false,\n    \"ServerVersion\": \"17.06.2-ee-10\",\n    \"ClusterStore\": \"\",\n    \"ClusterAdvertise\": \"\",\n    \"Runtimes\": null,\n    \"DefaultRuntime\": \"\",\n    \"Swarm\": {\n        \"NodeID\": \"\",\n        \"NodeAddr\": \"\",\n        \"LocalNodeState\": \"inactive\",\n        \"ControlAvailable\": false,\n        \"Error\": \"\",\n        \"RemoteManagers\": null\n    },\n    \"LiveRestoreEnabled\": false,\n    \"Isolation\": \"process\",\n    \"InitBinary\": \"\",\n    \"ContainerdCommit\": {\n        \"ID\": \"\",\n        \"Expected\": \"\"\n    },\n    \"RuncCommit\": {\n        \"ID\": \"\",\n        \"Expected\": \"\"\n    },\n    \"InitCommit\": {\n        \"ID\": \"\",\n        \"Expected\": \"\"\n    },\n    \"SecurityOptions\": []\n}. This is the Linux node /info response:\njson\n{\n    \"ID\": \"GCBJ:SLW3:4IWS:EM6O:ZILF:QURQ:6HL3:WWWH:E5YK:4JJG:25BZ:ALQA\",\n    \"Containers\": 2,\n    \"ContainersRunning\": 2,\n    \"ContainersPaused\": 0,\n    \"ContainersStopped\": 0,\n    \"Images\": 36,\n    \"Driver\": \"aufs\",\n    \"DriverStatus\": [[\"Root Dir\", \"/var/lib/docker/aufs\"], [\"Backing Filesystem\", \"extfs\"], [\"Dirs\", \"39\"], [\"Dirperm1 Supported\", \"true\"]],\n    \"SystemStatus\": null,\n    \"Plugins\": {\n        \"Volume\": [\"local\"],\n        \"Network\": [\"bridge\", \"host\", \"macvlan\", \"null\", \"overlay\"],\n        \"Authorization\": null,\n        \"Log\": [\"awslogs\", \"fluentd\", \"gcplogs\", \"gelf\", \"journald\", \"json-file\", \"logentries\", \"splunk\", \"syslog\"]\n    },\n    \"MemoryLimit\": true,\n    \"SwapLimit\": false,\n    \"KernelMemory\": true,\n    \"CpuCfsPeriod\": true,\n    \"CpuCfsQuota\": true,\n    \"CPUShares\": true,\n    \"CPUSet\": true,\n    \"IPv4Forwarding\": true,\n    \"BridgeNfIptables\": true,\n    \"BridgeNfIp6tables\": true,\n    \"Debug\": false,\n    \"NFd\": 56,\n    \"OomKillDisable\": true,\n    \"NGoroutines\": 147,\n    \"SystemTime\": \"2018-05-16T13:33:55.822037039+01:00\",\n    \"LoggingDriver\": \"json-file\",\n    \"CgroupDriver\": \"cgroupfs\",\n    \"NEventsListener\": 2,\n    \"KernelVersion\": \"4.4.0-87-generic\",\n    \"OperatingSystem\": \"Ubuntu 16.04.3 LTS\",\n    \"OSType\": \"linux\",\n    \"Architecture\": \"x86_64\",\n    \"IndexServerAddress\": \"https://index.docker.io/v1/\",\n    \"RegistryConfig\": {\n        \"AllowNondistributableArtifactsCIDRs\": [],\n        \"AllowNondistributableArtifactsHostnames\": [],\n        \"InsecureRegistryCIDRs\": [\"127.0.0.0/8\"],\n        \"IndexConfigs\": {\n            \"docker.io\": {\n                \"Name\": \"docker.io\",\n                \"Mirrors\": [],\n                \"Secure\": true,\n                \"Official\": true\n            }\n        },\n        \"Mirrors\": []\n    },\n    \"NCPU\": 2,\n    \"MemTotal\": 4139524096,\n    \"GenericResources\": null,\n    \"DockerRootDir\": \"/var/lib/docker\",\n    \"HttpProxy\": \"\",\n    \"HttpsProxy\": \"\",\n    \"NoProxy\": \"\",\n    \"Name\": \"Docker140\",\n    \"Labels\": [],\n    \"ExperimentalBuild\": false,\n    \"ServerVersion\": \"18.03.1-ce\",\n    \"ClusterStore\": \"\",\n    \"ClusterAdvertise\": \"\",\n    \"Runtimes\": {\n        \"runc\": {\n            \"path\": \"docker-runc\"\n        }\n    },\n    \"DefaultRuntime\": \"runc\",\n    \"Swarm\": {\n        \"NodeID\": \"ji8xn0c736eee3le7vxzoynyo\",\n        \"NodeAddr\": \"172.16.102.140\",\n        \"LocalNodeState\": \"active\",\n        \"ControlAvailable\": true,\n        \"Error\": \"\",\n        \"RemoteManagers\": [{\n                \"NodeID\": \"p5z3v2hslzw6rjr9773iz0vjd\",\n                \"Addr\": \"172.16.250.88:2377\"\n            }, {\n                \"NodeID\": \"ji8xn0c736eee3le7vxzoynyo\",\n                \"Addr\": \"172.16.102.140:2377\"\n            }\n        ],\n        \"Nodes\": 2,\n        \"Managers\": 2,\n        \"Cluster\": {\n            \"ID\": \"r8p4sa7wsfvja1kpknkrjqxbq\",\n            \"Version\": {\n                \"Index\": 9\n            },\n            \"CreatedAt\": \"2018-05-16T09:06:08.6111148Z\",\n            \"UpdatedAt\": \"2018-05-16T09:06:09.227267Z\",\n            \"Spec\": {\n                \"Name\": \"default\",\n                \"Labels\": {},\n                \"Orchestration\": {\n                    \"TaskHistoryRetentionLimit\": 5\n                },\n                \"Raft\": {\n                    \"SnapshotInterval\": 10000,\n                    \"KeepOldSnapshots\": 0,\n                    \"LogEntriesForSlowFollowers\": 500,\n                    \"ElectionTick\": 10,\n                    \"HeartbeatTick\": 1\n                },\n                \"Dispatcher\": {\n                    \"HeartbeatPeriod\": 5000000000\n                },\n                \"CAConfig\": {\n                    \"NodeCertExpiry\": 7776000000000000\n                },\n                \"TaskDefaults\": {},\n                \"EncryptionConfig\": {\n                    \"AutoLockManagers\": false\n                }\n            },\n            \"TLSInfo\": {\n                \"TrustRoot\": \"-----BEGIN CERTIFICATE-----\\nMIIBazCCARCgAwIBAgIUMSPJ4epO5VWfkCnf4kRwxAbuztMwCgYIKoZIzj0EAwIw\\nEzERMA8GA1UEAxMIc3dhcm0tY2EwHhcNMTgwNTE2MDkwMTAwWhcNMzgwNTExMDkw\\nMTAwWjATMREwDwYDVQQDEwhzd2FybS1jYTBZMBMGByqGSM49AgEGCCqGSM49AwEH\\nA0IABPPVpFUhiaGngJFb6e49KpxMItgxKwWycrVSZnkywC6EsvouoWOv3LSoIqRG\\nFDIt35rei7RU4guN+i2LwjSIq9GjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMB\\nAf8EBTADAQH/MB0GA1UdDgQWBBRKIAbu1B5PO0ks0X4rZ1LGesuPmDAKBggqhkjO\\nPQQDAgNJADBGAiEA5ZGifUuR/vJnQyufDhUQNHJeuj5TeU0tkAej90C8nb4CIQDp\\nvyDMoeXR1wiW3wCxUDEyMT0M1L75OYc/he/6IlRDbA==\\n-----END CERTIFICATE-----\\n\",\n                \"CertIssuerSubject\": \"MBMxETAPBgNVBAMTCHN3YXJtLWNh\",\n                \"CertIssuerPublicKey\": \"MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE89WkVSGJoaeAkVvp7j0qnEwi2DErBbJytVJmeTLALoSy+i6hY6/ctKgipEYUMi3fmt6LtFTiC436LYvCNIir0Q==\"\n            },\n            \"RootRotationInProgress\": false\n        }\n    },\n    \"LiveRestoreEnabled\": false,\n    \"Isolation\": \"\",\n    \"InitBinary\": \"docker-init\",\n    \"ContainerdCommit\": {\n        \"ID\": \"773c489c9c1b21a6d78b5c538cd395416ec50f88\",\n        \"Expected\": \"773c489c9c1b21a6d78b5c538cd395416ec50f88\"\n    },\n    \"RuncCommit\": {\n        \"ID\": \"4fc53a81fb7c994640722ac585fa9ca548971871\",\n        \"Expected\": \"4fc53a81fb7c994640722ac585fa9ca548971871\"\n    },\n    \"InitCommit\": {\n        \"ID\": \"949e6fa\",\n        \"Expected\": \"949e6fa\"\n    },\n    \"SecurityOptions\": [\"name=apparmor\", \"name=seccomp,profile=default\"]\n}\nIt has returned the swarm info. . That is strange how it isn't returning any swarm information. What docker api request does Portainer make to get the swarm settings? If I call 172.16.250.88:2376/info it returns the swarm settings.\n\"Swarm\": {\n        \"NodeID\": \"p5z3v2hslzw6rjr9773iz0vjd\",\n        \"NodeAddr\": \"172.16.250.88\",\n        \"LocalNodeState\": \"active\",\n        \"ControlAvailable\": true,\n        \"Error\": \"\",\n        \"RemoteManagers\": [\n            {\n                \"NodeID\": \"ji8xn0c736eee3le7vxzoynyo\",\n                \"Addr\": \"172.16.102.140:2377\"\n            },\n            {\n                \"NodeID\": \"p5z3v2hslzw6rjr9773iz0vjd\",\n                \"Addr\": \"172.16.250.88:2377\"\n            }\n        ],. It was my setup. Thanks for the help.. ",
    "jeremydouglass": "When I searched for what to do if the swarm menu was missing in Portainer, this issue was a top hit.\nI had a more basic problem while testing Portainer on a single node -- I had not run docker swarm init, so menus like Swarm and Secrets did not appear. I initially thought that I had a Portainer version number problem, as I had seen screenshots of a Secrets menu in recent versions of Portainer, and my menus looked different. It is obvious in retrospect, but it might make sense to indicate the swarm status in some other way in addition to present / missing menu items...?. ",
    "kidhasmoxy": "No, I'm unable to deploy new stacks and I did not change the endpoint. The only thing that happened (that I can tell) is that I updated the portainer version. I've also killed and redeployed the portainer stack just to see if that was part of the issue, but no change. \nI can't change the endpoint (I believe) as the entry URI is read only.. Rolling back to v 1.16.5 of Portainer (docker image) fixed the issue as a workaround, but the problem remains on 1.17. 16.5:\n[{\"Id\":6,\"Name\":\"! b (swarm)\",\"URL\":\"unix:///var/run/docker.sock\",\"PublicURL\":\"b.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]},{\"Id\":8,\"Name\":\"d\",\"URL\":\"tcp://d.example.com:2376\",\"PublicURL\":\"d.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]},{\"Id\":10,\"Name\":\"synology\",\"URL\":\"tcp://home.example.com:2376\",\"PublicURL\":\"home.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]},{\"Id\":12,\"Name\":\"a\",\"URL\":\"tcp://a.example.com:2375\",\"PublicURL\":\"a.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":false},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]},{\"Id\":13,\"Name\":\"c\",\"URL\":\"tcp://c.example.com:2376\",\"PublicURL\":\"c.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}]\n17.0\n[{\"Id\":6,\"Name\":\"! b (swarm)\",\"Type\":0,\"URL\":\"unix:///var/run/docker.sock\",\"GroupId\":0,\"PublicURL\":\"b.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]},{\"Id\":8,\"Name\":\"d\",\"Type\":1,\"URL\":\"tcp://d.example.com:2376\",\"GroupId\":1,\"PublicURL\":\"d.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]},{\"Id\":10,\"Name\":\"synology\",\"Type\":1,\"URL\":\"tcp://home.example.com:2376\",\"GroupId\":1,\"PublicURL\":\"home.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]},{\"Id\":12,\"Name\":\"a\",\"Type\":1,\"URL\":\"tcp://a.example.com:2375\",\"GroupId\":1,\"PublicURL\":\"a.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":false},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]},{\"Id\":13,\"Name\":\"c\",\"Type\":0,\"URL\":\"tcp://c.example.com:2376\",\"GroupId\":0,\"PublicURL\":\"c.example.com\",\"TLSConfig\":{\"TLS\":false,\"TLSSkipVerify\":true},\"AuthorizedUsers\":[],\"AuthorizedTeams\":[],\"Extensions\":[]}]. Those are the defaults for TLS and I they haven't affected anything thus far. Are you deprecating the ability to manage multiple endpoints entirely? It seems as though the interface still supports the capability, in fact there is a new environment switcher dialog for switching endpoints. Also I notice that there is a \"Group\" attribute added to the endpoint definition that makes me think you expect there to be enough to group. \nI can still do everything else across those multiple endpoints, it's just the 1 piece of functionality (stack update) that's broken. . That's good to hear. So it's broken in 1.17, but will be resolved in a future release?\nAs for the TLS setting, the slider in the UI is off for all of the endpoints, so maybe it's a default set in the app somewhere. . ",
    "webguy16": "Not sure if you are looking for general feedback, but pr1909 tag fixed it for me (same error/version/platform).. ",
    "Kyosuk3": "i confirm, same problem and pr1909 tag fixed it. ",
    "StefanTod": "I am getting the same problem on 1.20.0. When it comes to creating a new service, container or a stack, I get the following:\n2019/01/02 19:51:53 Get https://tasks.agent:9001/_ping: dial tcp: lookup tasks.agent on 127.0.0.11:53: no such host.\nI will be trying to downgrade to see if that fixes it. . ",
    "spyderz42": "Can we re-open this for 1.20.1? I don't get this error on 1.20.0, but when I upgrade to 1.20.1 I do. Can you \"mount\" the /run/secrets files in /certs? I can definitely change the names, but we don't want our unencrypted/unpassword protected key file on the regular file system to be mounted into the container.. It looks like the --secret src=secret,target=/dir was added somewhere between docker version 17.03 and 18.03. So, not working on the system I am setting up right now, but I guess it will work in the future when we upgrade.. ",
    "endersonmaia": "@itsconquest I'm using portainer 1.20.0 here, and have the same problem\n\n. @itsconquest I'm using portainer 1.20.0 here, and have the same problem\n\n. just updates the portioner stack to 1.20.2\nthat repetition of host gst01 on previous comment was weird\n\n. just updates the portioner stack to 1.20.2\nthat repetition of host gst01 on previous comment was weird\n\n. What commands can I run in my setup to debug it to you ?\n. What commands can I run in my setup to debug it to you ?\n. ",
    "meez14": "Wow - great. I love this process.. ",
    "G-regL": "Great. I did a search for this, but I didn't think to search for closed issues/PRs.\nThanks!. ",
    "eirinikos": "Thanks @deviantony !. ",
    "crosbymichael": "Shouldn't you at least contact the original copyright holder before changing the license? ;). The original code is MIT as well as original license that should be in LICENSE (we could have edited it to be parsed via github).  I wouldn't care and would have said no problem, re-license the entire thing if you want, but no one even asked.  You know I'm pretty chill ;). ",
    "rogaha": "https://softwareengineering.stackexchange.com/questions/157968/how-to-manage-a-copyright-notice-in-an-open-source-project -- keep the original license reference. . ",
    "dankohn": "@crosbymichael Just to be clear, we're not trying in any way to diminish your work or, in fact, to change the license. We saw this request as a reformatting so that GitHub would correctly understand that it is under the zLib license.. ",
    "filipvaleriu": "I have found that calling \ngit commit -m \"Init\"\nand afterwards\ngit push -u origin --all\nworks ok\n. Yes, i see now, you are corect about that.\nStill i ended up on this forum post, after i was stuck in that same error message for not beeing able to make an initial push for my newly created local git repository; after reading the post and finding also somewhere else some clues, not seeing anymore that was about pull instead of push, i thought might be helpfull for others to see a solution.\n. ",
    "KyleWiering": "Sorry, Missed the comment earlier. \nI'm going to try again - I wasn't getting an error.\nThe stack file did update (so if I used your example, the second would display in portainer)\nI hadn't tried updating replicas - but instead information about one of the services. If I do that inside portainer - it restarts the service. Doing it through the API did not end up restarting the service.. Hey, thanks for taking the time to look into this. I am unable to reproduce my own issue anymore.  The information I'd been updating was the version of the container for a service. However, that appears to be working as expected for me now. \nI suspect this was something on the swarm - not Portainer causing the issue. . ",
    "danielfrancora": "Hello all.\n@deviantony I can test that to. Just deployed the agents on our swarm cluster, but only on linux nodes and we have windows server core 1709 and 1803 on our swarm cluster.. Hi @deviantony \nI have tried the extended syntax, but portainer shows me an \"floating\" error message (on the right corner, as a red ballon): \"volumes must be a string\".\n\nForget to awnser:\nWhen I create this with docker service create on the host console it works fine:\ndocker service create \\\n--name Central --label 'traefik.port=80' \\\n--constraint 'node.labels.so == windows' \\\n--label traefik.frontend.rule=\"Host:oururl.test\" \\\n--mount type=bind,src=e:/Docker/docker-data/Central/CentralServicos/Anexos,dst=C:/Websites/Prod_CentralServicos/CentralServicos/Anexos \\\n--mount type=bind,src=e:/Docker/docker-data/Central/CentralServicos/Log,dst=C:/Websites/Prod_CentralServicos/CentralServicos/Log \\\n--mount type=bind,src=e:/Docker/docker-data/Central/GestaoRH/Arquivos,dst=C:/Websites/Prod_CentralServicos/GestaoRH/Arquivos \\\n--network traefik ourprivateimage. Hey again @deviantony \nI've made the changed you comment (now the stack is deployed sucefully), but we get the same error:\n\nThe stack:\nversion: \"3.2\"\nservices:\n  centralservicos:\n    image: private\n    volumes:\n      - type: bind\n        source: E:\\Docker\\docker-data\\Central\\CentralServicos\\Anexos\n        target: C:\\Websites\\Prod_CentralServicos\\CentralServicos\\Anexos\n      - type: bind\n        source: E:\\Docker\\docker-data\\Central\\GestaoRH\\Arquivos\n        target: C:\\Websites\\Prod_CentralServicos\\GestaoRH\\Arquivos\n      - type: bind\n        source: E:\\Docker\\docker-data\\Central\\CentralServicos\\Log\n        target: C:\\Websites\\Prod_CentralServicos\\CentralServicos\\Log\n    deploy:\n      labels:\n      - traefik.enable=true\n      - traefik.docker.network=traefik_traefik\n      - traefik.port=80\n      - traefik.backend=centralservicos\n      - traefik.backend.loadbalancer.sticky=true\n      - traefik.frontend.passHostHeader=true\n      - traefik.frontend.rule=Host:teste.com\n      - traefik.frontend.entryPoints=http\n      placement:\n        constraints:\n        - node.labels.so==windows\n        - node.labels.no==1\n    networks:\n      - traefik\nnetworks:\n  traefik:\n    external: true\n. The point is tat this compose files refers to a windows docker host, as the node.labels.so refer. The compose files created in the same way for linux hosts works perfectly. I'm expecting this kind of problem when Portainer trys to create a stack that is not in a linux host, but in a windows host.\nThe constraints its been respected, because the container is being assigned to sw-per01, who is a windows host.\nBut I'll follow your sugestion.\nThx in advance.. I think I found the problem, but I don't know why it happen.\nWhen I deploy the stack posted bellow, with you sugestion, look what happen with the mount types in Portainer:\n\nWhen I correct them manually by the portainer interface the container go up normally.\nAND when I create the container by the command line E:\\Docker\\docker-data\\Central> docker stack deploy -c .\\docker-compose.yml centralservicos it works perfectly.\nSo, something is wrong in portainer when working with windows stuff.. On linux distro: Docker version 18.03.1-ce, build 9ee9f40\nOn Windows distro: Docker version 17.06.2-ee-12, build fb5da67. I'm having trouble to make it understnd the full path to the docker-compose file. As soon as I make it right (never did it before using -H) I'll post here. \nWhat I'm doing: docker -H sw-per01:2375 stack deploy -c E:\\\\Docker\\\\docker-data\\\\Central\\\\docker-compose.yml centralservicos   open E:\\Docker\\docker-data\\Central\\docker-compose.yml: no such file or directory\nThx for the help.. @deviantony \nGood morning.\nSorry for the delay.\nI've tryd many forms to try your suggestion and I can't get it to work.\nWhen I run the command docker -H sw-per01:2375 stack deploy -c E:\\\\Docker\\\\docker-data\\\\Central\\\\docker-compose.yml centralservicos against one linux manager (sw-per01 is a windows manager) I get the following error:\nopen \\E:\\Docker\\docker-data\\Central\\docker-compose.yml: no such file or directory\nI also tryed many different ways to specify the path with no luck.\n. Hi @deviantony \nYes, the path e:\\Docker\\docker-data\\Central\\docker-compose.yml is locates in sw-per01 that is a windows manager.\nI'm running the command docker -H sw-per01:2375 stack deploy -c E:\\\\Docker\\\\docker-data\\\\Central\\\\docker-compose.yml centralservicos from sw-per06 that is a linux manager.\nSo, I'm running the command from a linux host against a windows host and I get that file not found.... but, If I copy the comand and remove the -H part and run it from the windows host it works perfectly.. Sorry for the delay, but I have some problems and coudn't put ir to work.\nI placed the compose-file on linux node and tryed to execute again the command, but I'm expecting the error:\n[root@sw-per06` centralservicos]# docker -H fd://10.10.10.191:2377 stack deploy -c docker-compose.yml centralservicos\nGet http://10.10.10.191:2377/v1.37/info: net/http: HTTP/1.x transport connection broken: malformed HTTP response \"\\x15\\x03\\x01\\x00\\x02\\x02\".\n* Are you trying to connect to a TLS-enabled daemon without TLS?\nEven all my swarm machines (4 windows and 4 linux) are in the enterprise domain I'm getting this message and I can't figure out how to disable it or put it to work with TLS.\nPortainer works fine because use the -H unix:///var/run/docker.sock statement.\nSorry, I trying to put it to work.. Hello @deviantony \nSorry for the newbie answer but I created the portainer like the stack I posted here at the beginning, and I didnt use any certificate when I created the endpoint inside portainer, I use the -H unix:///var/run/docker.sock to put it to work.\nI've tryed using my cert from godaddy and didn't work. I'll try with my AD CA.\nUpdate: Sorry but I can't put it to work. I'm not familiarized to much with linux to follow the docker tutorial to enable that thing and, by the way, I want to use one single certificate from godaddy to all managers, but I think its not possible and I didn't find any website with clearly instructions. I'll deploy the stacks from a windows node instead of using Portainer. Im glad flor the help and thanks a lot for you time. You can close the issue.. ",
    "valkheim": "No worries ! \ud83d\ude43 . ",
    "mbenedettini": "Yes, I'm sorry, I forgot to mention why I was using external endpoints in the first place.\nWhen using the original command -H tcp://tasks.agent:9001 --tlsskipverify :\n2018/05/30 14:17:57 Instance already has defined endpoints. Skipping the endpoint defined via CLI.\n2018/05/30 14:17:57 Starting Portainer 1.17.1 on :9000\nand when I try to log in I get \n{\"err\":\"dial unix /var/run/docker.sock: connect: no such file or directory\"}\nfrom a similar request made to api/endpoints/1/docker/version.\nAfter getting that error is that I tried defining the agent endpoint via external-endpoints.json.\nthanks,\nMariano. The current instance is deployed with just\ndocker run -d -p 9000:9000 -v /storage/portainer:/data -v \"/var/run/docker.sock:/var/run/docker.sock\" portainer/portainer\nand now I was trying to deploy the stack as described in http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\nI've copied the contents from /storage/portainer (currently a bind mount) to the volume portainer_data.. So I removed all endpoints from within the current instance, copied database to the volume used by the new portainer instance (deployed via the stack) and now it worked. Clearly it was some kind of problem with endpoints definition. Thanks for your help!. ",
    "ChristelleThiry": "Has there been news on this side?. ",
    "skleeschulte": "Using the -l option to hide Portainer does not work very well. The portainer_data volume is still visible (even if it's labeled with the \"hide-label\", which only seems to work for containers). The portainer image is listed and is wrongly marked as \"unused\".. ",
    "mc-wp": "Same problem for me. After adding stack, mounted volumes not selected in UI and not created. I'm using local-persit driver volume. If I create a volume in command line with: docker volume create -d local-persist -o mountpoint=/docker/nginx/conf. d nginx-dmz-df_nginx-conf --label \"com. docker. stack. namespace=nginx-dmz-df\". After the update stack, volumes are auto-select in the UI, but the service crash with an error: no suitable node (missing plugin on 1 node). It's necessary to remove all mounted volumes in UI and reset identically all volumes in UI and It's working.\n. ",
    "daiing": "Hi @deviantony \nnot one container\nall of the container can't show stats data\uff0cand show the error message. I can run 'docker stats' cmd and it shows full information,\nBut when I want to see stats in Protainer, system shows error message: \" Error running ps: exec: \"ps\": executable file not found in $PATH\". \n. can't use docker top , show msg : 'Error response from daemon: Error running ps: exec: \"ps\": executable file not found in $PATH'  , same with the Protainer \ud83d\ude2d . ",
    "EvanCreno": "I used Driver\"local\", I want to save nextcloud data to another HDD. @ncresswell . I got it, tks. @ncresswell . ",
    "omyhub": "\n\n\nSwarm\u3001SwarmKit\u3001Swarm mode\nI use swarm ,  the old network mode with extra  kv store.\nthe  portainer  doesn't  list  the  multihost .   I   want to  see it  on the board of  portainer . ",
    "mayank": "Hi @deviantony, it is a better practice to write return statement in the end of a function. Multiple return statements should be avoided. If it is necessary i will change it. . @deviantony done!! \ud83c\udf7e . @deviantony working fine. here are the screenshots.\nTemplate from portainer-templates\n\nPort added in the template form\n\nDeployed container shows the port mapping\n\n. @deviantony any updates? \ud83d\ude15 . @deviantony okay, please let me know if any changes required from my end.. ",
    "asbjorn": "Hi.\nI'm having the same behavior on my Portainer (v1.19.1) in that a docker container has an ever increasing memory usage (shown by the graph), while when using the docker stats from terminal it shows a perfect and steady memory usage. I've been hunting a \"memory leak\" ghost lately..\n\n. ",
    "277850318": "me too  memry report Incorrect. ",
    "flec": "I have the same issue with the gitlab registry with an image that has been created using a stack.\nTechnical details:\n\nPortainer version: 1.18.1\nDocker version (managed by Portainer): 18.03.1-ce\nPlatform (windows/linux): linux\nCommand used to start Portainer: docker-compose up -d using sample compose file from https://portainer.io/install.html\nBrowser: Chrome\nDocker without swarm mode. @olljanat You\u02cbre right, sorry that was a typo when creating the sample but the issue still persists. I\u02cbve updated the sample. . @olljanat It works, thank you very much!\nI'll keep this issue open since this a good workaround but the original issue still persists.. \n",
    "acuntex": "Seems to happen if you create the container using docker-compose and assign them a team.\nAfterwards a user who has no admin rights, gets this error.\nOnce you give the user admin rights, it works fine.. ",
    "GuusDeGraeve": "I'm also experiencing this issue. Exactly the same error message whenever I try to update an image for a container.\n\nFailure: Cannot read property 'URL' of null\n\nThe registry I'm using is a Google Container Registry (GCR) which I added through Portainer in the \"Registries\" section. I also enabled authentication and used a service account for it (_json_key as username etc...). Deploying a stack is no problem, only re-creating or pulling the \":latest\" of an image is throwing the error.\nI'm experiencing this as the admin user, so it's not related with roles or rights.\nI'm able to trigger it in multiple ways:\n- By going to a container detail view an clicking the \"re-create\" button + enabling the \"Pull latest image\" option\n- By going to a container detail view and clicking the image in the \"Container details\" section, then on the \"Image details\" view clicking the pull image icon in the \"Image tags\" section.\nTechnical details:\n- Portainer version 1.19.2\n- Docker version: 18.06.1-ce\n- Portainer installed using docker-compose and a compose file\n- Standalone docker node (no swarm). ",
    "kmute90": "is there any update on this? . ",
    "niXta1": "Wow, missed that one. Fixed the data folder but it's empty and problem persist.\nsudo docker stats <CONTAINER_ID>\nShows:\nCONTAINER                                                          CPU %               MEM USAGE / LIMIT    MEM %               NET I/O             BLOCK I/O           PIDS\na27b9ec69255b2189193532a9e2f3e714dcbee92116f213c7c4f1cf025e2640f   1.87%               3.79GiB / 7.787GiB   48.67%              1.62TB / 259GB      0B / 0B             0\nLooks ok to me.\nsudo docker top <CONTAINER_ID>\nError response from daemon: Unexpected pid '+': strconv.Atoi: parsing \"+\": invalid syntax\nI guess this is my problem and I need to talk to synology about this?. I reported the \"docker top\" error to Synology but never got an answer.... I got escalated to devs at Synology, top fails because I had an account name with an illegal character in it (space).\nAfter removing the space it works as expected.\n@lwitt, do try this workaround.. ",
    "lwitt": "Hi, \nI have exactly the same issue after upgrading to DSM 6.2 (more or less mandatory if you want to run a Synology device securely).\nIs there any progress or a possible workaround?. The strange fact is that Synology only provides a proprietary GUI on top of \"standard\" docker install.. I tried to use command line with exactly the same result.. ",
    "yamavol": "EDITED\nsorry, my problem was caused by a small mistake. The nginx parameter $uri do not contain request parameters.\nHi\nI am also having the same problem here. I'm not an expert in web application development, so I hope someone else solve it. \nHere is the screenshot showing the issue.\n\nServer environment: \nOS: debian stretch\nNginx: latest (1.15.1)\nIn the left window, portainer is accessed behind the proxy. HTTPS connection is enabled.\nIn the right window, portainer is accessed directly. \nThe following nginx configuration causes the problem(the left one).\nlocation ~ /portainer/(.*) {\n    resolver 127.0.0.11 valid=5s;\n    set $upstream portainer;\n    proxy_pass          http://$upstream:9000/$1;\n    proxy_set_header    Host                $host;    \n}\nThe resolver used below is the DNS service provided inside the docker network. I'm using it to let frontend nginx find the portainer container from the container_name.\nStrangely, the following configuration will not cause the issue. \nlocation ^~ /portainer/ {\n    resolver 127.0.0.11 valid=5s;\n    proxy_pass          http://portainer:9000/;\n    proxy_set_header    Host                $host;\n}\nI dumped the HTTP header to compare the two above using nginx-echo-headers , but indeed both were identical.\nBy the way, I am encountering a same issue on different application, so it might be a general server configuration problem. Hope these informations gives clue for the issue.. ",
    "raybooysen": "Thanks @deviantony . Thank you so much\nOn Sun, 17 Jun 2018, 15:01 Anthony Lapenna, notifications@github.com\nwrote:\n\n@raybooysen https://github.com/raybooysen Added via #1978\nhttps://github.com/portainer/portainer/pull/1978\nAlso note that you can disable the setting to truncate the container names\nin the table settings (top-right corner).\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1970#issuecomment-397859116,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAcMhRNq2wHuqCuXdaV9fYj63spmuAZ6ks5t9f6ygaJpZM4UnUYu\n.\n. \n",
    "hasnat": "Thanks for the review guys, for logs auto scroll to bottom could we try something like if scroll is at bottom of the log div it would keep scroll lock and if user scrolls up to look for previous log, it locks the log but keeps appending logs from container. (removing the need for scroll lock button) -- also this will hopefully be similar behaviour to terminal tail -f\nAs currently disabling and re-enabling refresh sometimes brings good number of log lines and at the same time throws you at bottom of the log so getting back to where you were and how many new lines have showed up e.g. user gets lost easily.\nLet me know if am not explaining it very well.. @deviantony Updated to keep only lines wrap/no-wrap button\nwill create another issue for other changes I mentioned.. @deviantony all yours now.. fixed in 78dde81b. fixed in 78dde81b. titles could be handy stating what command is for\nclear-cache, show-config, external-service-connectivity-check\naltho most of them can be guessed by reading the command but having title helps ops as some commands might not be easy to read and eliminates guess work.\nshall I replace -_ with space in titles there? (I'd prefer keeping as is). updated in 525fbcf4. fixed in 525fbcf4. fixed in 525fbcf4. ",
    "chris-fran": "@deviantony That's great, but whats the proper way of doing it at the moment? Maybe stopping the service, and then doing a couple of steps?. I'm always using :latest so no there is no @sha256 (this is just a development setup).  So I'd just:\n\nGo to the Image tab,  put the image name and select the registry and pull.\nGo to the Services tab, click on my service and click on Update the service\n\nAre these the correct steps?. @deviantony what I meant to say is that I don't need to work with digest, as I'll only be working with :latest. So maybe I can just pull on the Image tag, and redeploy the service?. ",
    "mrtargaryen": "@ncresswell  Hey, thans for the reply. I'm only learning these things. So, how do I bind mount /var/run/docker.sock as /var/run/docker.sock in portainer?\nI started Portainer in Kitematic (I also installed it using Kitematic). Great.\nI'm learning how to do that right now :-)\nThanks for your help.\nCheers\nSimon\nEncrypted email sent from Protonmail in Switzerland\n\u2010\u2010\u2010\u2010\u2010\u2010\u2010 Original Message \u2010\u2010\u2010\u2010\u2010\u2010\u2010\nOn June 22, 2018 6:38 AM, Neil Cresswell notifications@github.com wrote:\n\nHow did you start portainer?\nYou need to bind mount /var/run/docker.sock as /var/run/docker.sock in portainer.\nFrom: Simon [mailto:notifications@github.com]\nSent: Wednesday, 20 June 2018 12:02 PM\nTo: portainer/portainer portainer@noreply.github.com\nCc: Subscribed subscribed@noreply.github.com\nSubject: [portainer/portainer] Kitematic Installation - How to run? (#1983)\nHi.\nI installed Portainer via Kitematic on my iMac (macOS 10.13,5) on IP 192.168.99.1:32768\nWhen I try to create a local admin account I'm presented with a message (see image)\nError Messagehttps://urldefense.proofpoint.com/v2/url?u=https-3A__i.imgur.com_h2n8rMA.png&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N6_wBysDWkiQHqHGIQFlori8WHfhEhjW9aXpUlzEFVU&s=_rUVv0BJoyugdtiGuzYt6Lqb8en51RWH72s6XEKQak8&e=\nAnyone understand how to solve this issue?\nThanks :-)\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_1983&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N6_wBysDWkiQHqHGIQFlori8WHfhEhjW9aXpUlzEFVU&s=rzY2rkZ10gtF9J-mH-e8sMSuu_Ke7OKk7QJDpAGLGtY&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlafp88sDp-5F2ze02lNiOWnuj3KdgEks5t-2DZEVgaJpZM4Uuag-5F&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=N6_wBysDWkiQHqHGIQFlori8WHfhEhjW9aXpUlzEFVU&s=1Uc0Rpss0kV-jj2u2CGhrXPG-x1XmKvcZ2Ysg091tTI&e=.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.. \n",
    "bygui86": "With the configuration you wrote everything works perfectly :) Thanks a lot!!\nMy error was the network: instead of connecting to the kafka network 'kafka_n', I have to crate a different one (e.g. 'portainer_agent').\nNow I have a couple of other questions:\n- Do I have to deploy portainer as service on the same swarm and connected to the same portainer-agent network in order to let everything work properly, right?\n- Is it not possible somehow to run a portainer instance outside any swarm and let it connect to one or more agents deployed in one or more swarms?\nThanks a lot for your time. Great. Thank you very much!\nAnd compliments! Portainer is a really good project!. ",
    "rlogiacco": "Same issue here with Portainer version 1.18.1 and Docker version 1.13.1 on Atomic 3.10.0-862.3.2.el7.x86_64\nThe biggest problem is the volumes in use are those without the stack prefix, which leads to inevitable conflicts.\nThe method used to upload the stack (web editor, file upload, git container) doesn't seem to affect the result.\nThe temporary workaround I'm using (but can't be used for long) is to edit each container deployed, change the volume to the correct one and re-deploy the container\n\n. @himred I confirm your solution does work, even if it's cumbersome: I hope this gets fixed, but in the meanwhile, I'm going to update my compose files: thanks!. I really wish to use some sort of separator char in the stack name, possibly dots and dashes....\nI also believe the label need-confirmation can be removed: I confirm it is still present on 1.19.2. ",
    "Xyaren": "This is a very annoying bug - maybe important enough for 1.21.0 ?. ",
    "rkgrep": "Same issue with replicas count for replicated service with no constraints.\n\n\nPortainer 1.18.1\nDocker 18.03.1-ce\nUbuntu 16.04. ",
    "Umaaz": "We have experienced this issue again with nearly 1000000 log messages in 3 mins. Any update on this?. ",
    "daneZz": "I am running portainer as a service on a dedicated server. The same error occurs for me. A restart helps, but after some time (within 24 hours) the error re-occurs. So this is not only occurring on AWS.\nportainer[25005]: 2018/08/06 12:33:03 http: Accept error: accept tcp 127.0.0.1:8080: accept4: too many open files; retrying in 1s. @deviantony I used the \"Deploy Portainer without Docker\" part from the documentation on https://portainer.readthedocs.io/en/latest/deployment.html.. I figured why this happens. It seems that the connection amount of portainer continuously increases. I suspect that connections are properly closed.\nEnvironment\nPortainer version: 1.19.1 (runs as a service in Linux, not in a docker container).\nI am running a docker swarm with 10 docker servers. (DESTINATION_*). The portainer service is running on a dedicated server.\n\nCurrent open connections:\n\n```COMMAND   PID   USER        FD      TYPE         DEVICE SIZE/OFF            NODE NAME\nportainer 24681 portainer    5u     IPv4         1661338056      0t0        TCP SOURCE:49156->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer    6u     IPv4         1666996540      0t0        TCP SOURCE:60668->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer    7u     IPv4         1667123453      0t0        TCP SOURCE:37898->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer    8u     IPv4         1667118482      0t0        TCP SOURCE:40450->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer    9u     IPv4         1661338057      0t0        TCP SOURCE:34826->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   10u     IPv4         1667116664      0t0        TCP SOURCE:48878->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   11u     IPv4         1667117731      0t0        TCP SOURCE:42462->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   12u     IPv4         1667123468      0t0        TCP SOURCE:49850->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   13u     IPv4         1667125453      0t0        TCP localhost:webcache (LISTEN)\nportainer 24681 portainer   14u     IPv4         1667544168      0t0        TCP SOURCE:59596->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   15u     IPv4         1665297050      0t0        TCP SOURCE:49680->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   16u     IPv4         1667544169      0t0        TCP SOURCE:42882->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   17u     IPv4         1666995473      0t0        TCP SOURCE:49686->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   18u     IPv4         1667541323      0t0        TCP SOURCE:48350->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   19u     IPv4         1661598653      0t0        TCP SOURCE:50902->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   20u     IPv4         1667541324      0t0        TCP SOURCE:45284->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   21u     IPv4         1667544170      0t0        TCP SOURCE:59342->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   22u     IPv4         1667544172      0t0        TCP SOURCE:52908->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   23u     IPv4         1667536230      0t0        TCP SOURCE:60308->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   24u     IPv4         1667957567      0t0        TCP SOURCE:40926->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   25u     IPv4         1667930880      0t0        TCP SOURCE:52450->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   26u     IPv4         1667953275      0t0        TCP SOURCE:57918->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   27u     IPv4         1667957573      0t0        TCP SOURCE:60470->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   28u     IPv4         1667957574      0t0        TCP SOURCE:54846->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   29u     IPv4         1667964094      0t0        TCP SOURCE:40666->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   30u     IPv4         1667957575      0t0        TCP SOURCE:34232->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   31u     IPv4         1667957576      0t0        TCP SOURCE:41620->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   32u     IPv4         1668392513      0t0        TCP SOURCE:49886->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   33u     IPv4         1668400465      0t0        TCP SOURCE:33166->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   34u     IPv4         1668403233      0t0        TCP SOURCE:38628->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   35u     IPv4         1668400467      0t0        TCP SOURCE:41186->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   36u     IPv4         1668400468      0t0        TCP SOURCE:35562->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   37u     IPv4         1668400470      0t0        TCP SOURCE:49614->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   38u     IPv4         1668403236      0t0        TCP SOURCE:43180->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   39u     IPv4         1668392514      0t0        TCP SOURCE:50574->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   40u     IPv4         1668848037      0t0        TCP SOURCE:59476->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   41u     IPv4         1668851750      0t0        TCP SOURCE:42756->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   42u     IPv4         1668848759      0t0        TCP SOURCE:48218->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   43u     IPv4         1668851751      0t0        TCP SOURCE:50770->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   44u     IPv4         1668843039      0t0        TCP SOURCE:45152->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   45u     IPv4         1668848038      0t0        TCP SOURCE:59210->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   46u     IPv4         1668851755      0t0        TCP SOURCE:52776->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   47u     IPv4         1668851756      0t0        TCP SOURCE:60164->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   48u     IPv4         1668891221      0t0        TCP SOURCE:40768->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   49u     IPv4         1669302607      0t0        TCP SOURCE:52280->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   50u     IPv4         1669302610      0t0        TCP SOURCE:57750->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   51u     IPv4         1669302612      0t0        TCP SOURCE:60306->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   52u     IPv4         1669304343      0t0        TCP SOURCE:54682->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   53u     IPv4         1669304344      0t0        TCP SOURCE:40502->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   54u     IPv4         1661338249      0t0        TCP SOURCE:34068->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   55u     IPv4         1669304345      0t0        TCP SOURCE:41456->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   56u     IPv4         1669746836      0t0        TCP SOURCE:50410->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   57u     IPv4         1669745985      0t0        TCP SOURCE:33694->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   58u     IPv4         1669745986      0t0        TCP SOURCE:39176->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   59u     IPv4         1669748911      0t0        TCP SOURCE:41728->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   60u     IPv4         1669745589      0t0        TCP SOURCE:36104->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   61u     IPv4         1669745590      0t0        TCP SOURCE:50156->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   62u     IPv4         1669461959      0t0        TCP SOURCE:43722->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   63u     IPv4         1669745591      0t0        TCP SOURCE:51110->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   64u     IPv4         1670199401      0t0        TCP SOURCE:44070->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   65u     IPv4         1670197674      0t0        TCP SOURCE:60790->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   66u     IPv4         1670199402      0t0        TCP SOURCE:49538->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   67u     IPv4         1670196790      0t0        TCP SOURCE:52090->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   68u     IPv4         1670196791      0t0        TCP SOURCE:46466->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   69u     IPv4         1670196792      0t0        TCP SOURCE:60524->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   70u     IPv4         1670196794      0t0        TCP SOURCE:54096->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   71u     IPv4         1670200687      0t0        TCP SOURCE:33252->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   72u     IPv4         1670626194      0t0        TCP SOURCE:54820->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   73u     IPv4         1670623075      0t0        TCP SOURCE:43308->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   74u     IPv4         1670623076      0t0        TCP SOURCE:60288->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   75u     IPv4         1670619762      0t0        TCP SOURCE:34614->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   76u     IPv4         1670619763      0t0        TCP SOURCE:57222->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   77u     IPv4         1670623692      0t0        TCP SOURCE:43042->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   78u     IPv4         1670619764      0t0        TCP SOURCE:36608->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   79u     IPv4         1670623693      0t0        TCP SOURCE:44002->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   80u     IPv4         1671067751      0t0        TCP SOURCE:55022->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   81u     IPv4         1671074820      0t0        TCP SOURCE:38302->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   82u     IPv4         1671070856      0t0        TCP SOURCE:43770->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   83u     IPv4         1671067752      0t0        TCP SOURCE:46326->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   84u     IPv4         1671055820      0t0        TCP SOURCE:40734->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   85u     IPv4         1671070858      0t0        TCP SOURCE:54792->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   86u     IPv4         1671067757      0t0        TCP SOURCE:48358->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   87u     IPv4         1671062402      0t0        TCP SOURCE:55746->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   88u     IPv4         1671510542      0t0        TCP SOURCE:50478->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   89u     IPv4         1671503635      0t0        TCP SOURCE:38966->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   90u     IPv4         1671510543      0t0        TCP SOURCE:55940->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   91u     IPv4         1671503636      0t0        TCP SOURCE:58496->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer   92u     IPv4         1671510545      0t0        TCP SOURCE:52874->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer   93u     IPv4         1671510546      0t0        TCP SOURCE:38694->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer   94u     IPv4         1671510547      0t0        TCP SOURCE:60498->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer   95u     IPv4         1671510549      0t0        TCP SOURCE:39666->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer   96u     IPv4         1671972691      0t0        TCP SOURCE:34750->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer   97u     IPv4         1671978118      0t0        TCP SOURCE:51470->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer   98u     IPv4         1671979088      0t0        TCP SOURCE:40218->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer   99u     IPv4         1671979089      0t0        TCP SOURCE:42770->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  100u     IPv4         1671979092      0t0        TCP SOURCE:37158->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  101u     IPv4         1671979093      0t0        TCP SOURCE:51210->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  102u     IPv4         1671979094      0t0        TCP SOURCE:44776->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  103u     IPv4         1671979097      0t0        TCP SOURCE:52170->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  104u     IPv4         1672468200      0t0        TCP SOURCE:46970->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  105u     IPv4         1672472884      0t0        TCP SOURCE:35458->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  106u     IPv4         1672468203      0t0        TCP SOURCE:52438->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  107u     IPv4         1672468204      0t0        TCP SOURCE:54990->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  108u     IPv4         1672468206      0t0        TCP SOURCE:49372->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  109u     IPv4         1672474765      0t0        TCP SOURCE:35198->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  110u     IPv4         1672468209      0t0        TCP SOURCE:57002->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  111u     IPv4         1672468211      0t0        TCP SOURCE:36158->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  112u     IPv4         1672963762      0t0        TCP SOURCE:59388->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  113u     IPv4         1672951247      0t0        TCP SOURCE:47876->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  114u     IPv4         1672964595      0t0        TCP SOURCE:36630->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  115u     IPv4         1672963766      0t0        TCP SOURCE:39188->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  116u     IPv4         1672963768      0t0        TCP SOURCE:33576->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  117u     IPv4         1672964600      0t0        TCP SOURCE:47640->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  118u     IPv4         1672963772      0t0        TCP SOURCE:41206->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  119u     IPv4         1672963773      0t0        TCP SOURCE:48594->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  120u     IPv4         1673436783      0t0        TCP SOURCE:41866->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  121u     IPv4         1673437301      0t0        TCP SOURCE:58568->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  122u     IPv4         1673436785      0t0        TCP SOURCE:47328->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  123u     IPv4         1673436786      0t0        TCP SOURCE:49880->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  124u     IPv4         1673436787      0t0        TCP SOURCE:44256->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  125u     IPv4         1673436788      0t0        TCP SOURCE:58308->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  126u     IPv4         1673436789      0t0        TCP SOURCE:51874->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  127u     IPv4         1673436790      0t0        TCP SOURCE:59262->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  128u     IPv4         1673907078      0t0        TCP SOURCE:53058->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  129u     IPv4         1673907077      0t0        TCP SOURCE:41546->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  130u     IPv4         1673907081      0t0        TCP SOURCE:58526->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  131u     IPv4         1673907082      0t0        TCP SOURCE:32846->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  132u     IPv4         1673907083      0t0        TCP SOURCE:55454->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  133u     IPv4         1673907085      0t0        TCP SOURCE:41280->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  134u     IPv4         1673907086      0t0        TCP SOURCE:34846->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  135u     IPv4         1673907087      0t0        TCP SOURCE:42238->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  136u     IPv4         1673241716      0t0        TCP SOURCE:35400->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  137u     IPv4         1674384529      0t0        TCP SOURCE:52114->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  138u     IPv4         1674345383      0t0        TCP SOURCE:40868->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  139u     IPv4         1674374334      0t0        TCP SOURCE:43420->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  140u     IPv4         1674345384      0t0        TCP SOURCE:37802->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  141u     IPv4         1674345385      0t0        TCP SOURCE:51854->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  142u     IPv4         1674345386      0t0        TCP SOURCE:45420->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  143u     IPv4         1674380533      0t0        TCP SOURCE:52814->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  144u     IPv4         1674864995      0t0        TCP SOURCE:45974->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  145u     IPv4         1674850690      0t0        TCP SOURCE:34462->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  146u     IPv4         1674863810      0t0        TCP SOURCE:51448->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  147u     IPv4         1674863811      0t0        TCP SOURCE:54000->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  148u     IPv4         1674864998      0t0        TCP SOURCE:48382->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  149u     IPv4         1674854887      0t0        TCP SOURCE:34202->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  150u     IPv4         1674856413      0t0        TCP SOURCE:56000->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  151u     IPv4         1674856414      0t0        TCP SOURCE:35156->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  152u     IPv4         1675339606      0t0        TCP SOURCE:56046->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  153u     IPv4         1675341366      0t0        TCP SOURCE:44532->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  154u     IPv4         1675345013      0t0        TCP SOURCE:33276->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  155u     IPv4         1675341367      0t0        TCP SOURCE:35828->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  156u     IPv4         1675348475      0t0        TCP SOURCE:58436->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  157u     IPv4         1675348476      0t0        TCP SOURCE:44256->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  158u     IPv4         1675348477      0t0        TCP SOURCE:37822->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  159u     IPv4         1675348478      0t0        TCP SOURCE:45210->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  160u     IPv4         1673241861      0t0        TCP SOURCE:37426->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  161u     IPv4         1675848789      0t0        TCP SOURCE:54146->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  162u     IPv4         1675845727      0t0        TCP SOURCE:42894->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  163u     IPv4         1675835177      0t0        TCP SOURCE:45446->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  164u     IPv4         1675845474      0t0        TCP SOURCE:39822->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  165u     IPv4         1675835178      0t0        TCP SOURCE:53874->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  166u     IPv4         1675835179      0t0        TCP SOURCE:47440->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  167u     IPv4         1675845476      0t0        TCP SOURCE:54834->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  168u     IPv4         1676320733      0t0        TCP SOURCE:46832->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  169u     IPv4         1676316265      0t0        TCP SOURCE:35320->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  170u     IPv4         1676326915      0t0        TCP SOURCE:52300->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  171u     IPv4         1676321266      0t0        TCP SOURCE:54858->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  172u     IPv4         1676321267      0t0        TCP SOURCE:49240->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  173u     IPv4         1676317085      0t0        TCP SOURCE:35078->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  174u     IPv4         1676328237      0t0        TCP SOURCE:56878->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  175u     IPv4         1676324805      0t0        TCP SOURCE:36034->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  176u     IPv4         1676833576      0t0        TCP SOURCE:56750->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  177u     IPv4         1676831375      0t0        TCP SOURCE:45238->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  178u     IPv4         1676827178      0t0        TCP SOURCE:33986->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  179u     IPv4         1676833577      0t0        TCP SOURCE:36538->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  180u     IPv4         1676838133      0t0        TCP SOURCE:59152->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  181u     IPv4         1676838149      0t0        TCP SOURCE:44972->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  182u     IPv4         1676833707      0t0        TCP SOURCE:38538->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  183u     IPv4         1676827218      0t0        TCP SOURCE:45932->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  184u     IPv4         1677362406      0t0        TCP SOURCE:39226->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  185u     IPv4         1677362401      0t0        TCP SOURCE:55940->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  186u     IPv4         1677357296      0t0        TCP SOURCE:44694->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  187u     IPv4         1677353970      0t0        TCP SOURCE:47246->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  188u     IPv4         1677363636      0t0        TCP SOURCE:41628->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  189u     IPv4         1677363637      0t0        TCP SOURCE:55680->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  190u     IPv4         1677360214      0t0        TCP SOURCE:49246->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  191u     IPv4         1677363831      0t0        TCP SOURCE:56634->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  192u     IPv4         1677870447      0t0        TCP SOURCE:48904->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  193u     IPv4         1677870356      0t0        TCP SOURCE:37392->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  194u     IPv4         1677870473      0t0        TCP SOURCE:54366->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  195u     IPv4         1677861760      0t0        TCP SOURCE:56918->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  196u     IPv4         1677864786      0t0        TCP SOURCE:51312->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  197u     IPv4         1677864787      0t0        TCP SOURCE:37134->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  198u     IPv4         1677873442      0t0        TCP SOURCE:58936->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  199u     IPv4         1677873575      0t0        TCP SOURCE:38092->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  200u     IPv4         1678364090      0t0        TCP SOURCE:59606->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  201u     IPv4         1678360049      0t0        TCP SOURCE:48094->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  202u     IPv4         1678364091      0t0        TCP SOURCE:36836->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  203u     IPv4         1678364752      0t0        TCP SOURCE:39388->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  204u     IPv4         1678367691      0t0        TCP SOURCE:33770->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  205u     IPv4         1678366489      0t0        TCP SOURCE:47822->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  206u     IPv4         1678370847      0t0        TCP SOURCE:41388->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  207u     IPv4         1678370873      0t0        TCP SOURCE:48776->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  208u     IPv4         1678876750      0t0        TCP SOURCE:42684->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  209u     IPv4         1678733309      0t0        TCP SOURCE:59392->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  210u     IPv4         1678876761      0t0        TCP SOURCE:48146->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  211u     IPv4         1678876793      0t0        TCP SOURCE:50698->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  212u     IPv4         1678876817      0t0        TCP SOURCE:45086->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  213u     IPv4         1678878852      0t0        TCP SOURCE:59138->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  214u     IPv4         1678878853      0t0        TCP SOURCE:52704->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  215u     IPv4         1678878854      0t0        TCP SOURCE:60098->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  216u     IPv4         1679367010      0t0        TCP SOURCE:53886->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  217u     IPv4         1679387107      0t0        TCP SOURCE:42366->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  218u     IPv4         1679378815      0t0        TCP SOURCE:59354->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  219u     IPv4         1679387136      0t0        TCP SOURCE:33674->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  220u     IPv4         1679387137      0t0        TCP SOURCE:56282->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  221u     IPv4         1679387138      0t0        TCP SOURCE:42102->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  222u     IPv4         1679387139      0t0        TCP SOURCE:35668->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  223u     IPv4         1679387140      0t0        TCP SOURCE:43056->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  224u     IPv4         1679894060      0t0        TCP SOURCE:35852->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  225u     IPv4         1679894059      0t0        TCP SOURCE:52572->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  226u     IPv4         1679894062      0t0        TCP SOURCE:41320->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  227u     IPv4         1679888169      0t0        TCP SOURCE:43872->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  228u     IPv4         1679888170      0t0        TCP SOURCE:38260->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  229u     IPv4         1679894063      0t0        TCP SOURCE:52312->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  230u     IPv4         1679895198      0t0        TCP SOURCE:45884->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  231u     IPv4         1679892798      0t0        TCP SOURCE:53272->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  232u     IPv4         1680403556      0t0        TCP SOURCE:45320->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  233u     IPv4         1680391865      0t0        TCP SOURCE:33808->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  234u     IPv4         1680399953      0t0        TCP SOURCE:50794->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  235u     IPv4         1680403635      0t0        TCP SOURCE:53346->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  236u     IPv4         1680399954      0t0        TCP SOURCE:47722->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  237u     IPv4         1680399067      0t0        TCP SOURCE:33542->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  238u     IPv4         1680403857      0t0        TCP SOURCE:55340->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  239u     IPv4         1680403858      0t0        TCP SOURCE:34496->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  240u     IPv4         1680879067      0t0        TCP SOURCE:54836->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  241u     IPv4         1680860943      0t0        TCP SOURCE:43324->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  242u     IPv4         1680874277      0t0        TCP SOURCE:60304->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  243u     IPv4         1680879072      0t0        TCP SOURCE:34630->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  244u     IPv4         1680874281      0t0        TCP SOURCE:57244->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  245u     IPv4         1680879107      0t0        TCP SOURCE:43064->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  246u     IPv4         1680879108      0t0        TCP SOURCE:36630->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  247u     IPv4         1680869294      0t0        TCP SOURCE:44018->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  248u     IPv4         1681360677      0t0        TCP SOURCE:36948->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  249u     IPv4         1681360592      0t0        TCP SOURCE:53662->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  250u     IPv4         1681363127      0t0        TCP SOURCE:42414->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  251u     IPv4         1681361136      0t0        TCP SOURCE:44968->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  252u     IPv4         1681361137      0t0        TCP SOURCE:39356->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  253u     IPv4         1681360848      0t0        TCP SOURCE:53414->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  254u     IPv4         1681354292      0t0        TCP SOURCE:46980->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  255u     IPv4         1681363333      0t0        TCP SOURCE:54368->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  256u     IPv4         1681811381      0t0        TCP SOURCE:47850->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  257u     IPv4         1681811347      0t0        TCP SOURCE:36332->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  258u     IPv4         1681815341      0t0        TCP SOURCE:53324->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  259u     IPv4         1681815342      0t0        TCP SOURCE:55876->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  260u     IPv4         1681815345      0t0        TCP SOURCE:50258->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  261u     IPv4         1681820730      0t0        TCP SOURCE:36078->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  262u     IPv4         1681818434      0t0        TCP SOURCE:57876->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  263u     IPv4         1681815346      0t0        TCP SOURCE:37032->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  264u     IPv4         1682259433      0t0        TCP SOURCE:57416->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  265u     IPv4         1682245111      0t0        TCP SOURCE:45904->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  266u     IPv4         1682262017      0t0        TCP SOURCE:34646->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  267u     IPv4         1682249663      0t0        TCP SOURCE:37198->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  268u     IPv4         1682249664      0t0        TCP SOURCE:59812->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  269u     IPv4         1682249665      0t0        TCP SOURCE:45638->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  270u     IPv4         1681164304      0t0        TCP SOURCE:39204->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  271u     IPv4         1682245220      0t0        TCP SOURCE:46592->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  272u     IPv4         1682716691      0t0        TCP SOURCE:39346->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  273u     IPv4         1682703129      0t0        TCP SOURCE:56054->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  274u     IPv4         1682713355      0t0        TCP SOURCE:44808->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  275u     IPv4         1682717794      0t0        TCP SOURCE:47370->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  276u     IPv4         1682717808      0t0        TCP SOURCE:41758->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  277u     IPv4         1681164314      0t0        TCP SOURCE:55818->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  278u     IPv4         1681164315      0t0        TCP SOURCE:49384->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  279u     IPv4         1681164316      0t0        TCP SOURCE:56772->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  280u     IPv4         1683216233      0t0        TCP SOURCE:52400->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  281u     IPv4         1683221421      0t0        TCP SOURCE:40882->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  282u     IPv4         1683216235      0t0        TCP SOURCE:57862->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  283u     IPv4         1683222846      0t0        TCP SOURCE:60414->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  284u     IPv4         1683231049      0t0        TCP SOURCE:54796->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  285u     IPv4         1683231052      0t0        TCP SOURCE:40616->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  286u     IPv4         1683232785      0t0        TCP SOURCE:34182->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  287u     IPv4         1683232849      0t0        TCP SOURCE:41576->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  288u     IPv4         1683739616      0t0        TCP SOURCE:37268->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  289u     IPv4         1683704759      0t0        TCP SOURCE:53988->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  290u     IPv4         1683733255      0t0        TCP SOURCE:42736->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  291u     IPv4         1681164350      0t0        TCP SOURCE:45294->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  292u     IPv4         1683733256      0t0        TCP SOURCE:39670->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  293u     IPv4         1683742501      0t0        TCP SOURCE:53740->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  294u     IPv4         1683739620      0t0        TCP SOURCE:47310->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  295u     IPv4         1683745178      0t0        TCP SOURCE:54706->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  296u     IPv4         1684009384      0t0        TCP SOURCE:37564->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  297u     IPv4         1683946019      0t0        TCP SOURCE:49088->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  298u     IPv4         1684245417      0t0        TCP SOURCE:54556->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  299u     IPv4         1684245431      0t0        TCP SOURCE:57114->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  300u     IPv4         1684256396      0t0        TCP SOURCE:51490->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  301u     IPv4         1684263246      0t0        TCP SOURCE:37310->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  302u     IPv4         1684263282      0t0        TCP SOURCE:59114->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  303u     IPv4         1684009385      0t0        TCP SOURCE:38270->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  304u     IPv4         1677255941      0t0        TCP SOURCE:48118->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  305u     IPv4         1684798763      0t0        TCP SOURCE:59632->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  306u     IPv4         1684795620      0t0        TCP SOURCE:36862->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  307u     IPv4         1684785817      0t0        TCP SOURCE:39414->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  308u     IPv4         1681164366      0t0        TCP SOURCE:33796->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  309u     IPv4         1684798785      0t0        TCP SOURCE:47860->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  310u     IPv4         1684774009      0t0        TCP SOURCE:41426->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  311u     IPv4         1684799853      0t0        TCP SOURCE:48814->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  312u     IPv4         1676725813      0t0        TCP SOURCE:59290->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  313u     IPv4         1685337516      0t0        TCP SOURCE:42582->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  314u     IPv4         1685340346      0t0        TCP SOURCE:48068->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  315u     IPv4         1685113271      0t0        TCP SOURCE:50620->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  316u     IPv4         1685340349      0t0        TCP SOURCE:44996->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  317u     IPv4         1685107329      0t0        TCP SOURCE:59048->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  318u     IPv4         1685340350      0t0        TCP SOURCE:52614->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  319u     IPv4         1685333743      0t0        TCP SOURCE:60002->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  320u     IPv4         1678500644      0t0        TCP SOURCE:41418->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  321u     IPv4         1681164401      0t0        TCP SOURCE:52936->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  322u     IPv4         1685866465      0t0        TCP SOURCE:58404->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  323u     IPv4         1685846044      0t0        TCP SOURCE:60956->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  324u     IPv4         1685640303      0t0        TCP SOURCE:55332->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  325u     IPv4         1681164402      0t0        TCP SOURCE:41158->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  326u     IPv4         1681164403      0t0        TCP SOURCE:34730->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  327u     IPv4         1685865450      0t0        TCP SOURCE:42118->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  328u     IPv4         1686211156      0t0        TCP SOURCE:50746->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  329u     IPv4         1686351219      0t0        TCP SOURCE:34026->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  330u     IPv4         1686346896      0t0        TCP SOURCE:39488->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  331u     IPv4         1686350114      0t0        TCP SOURCE:42040->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  332u     IPv4         1686350115      0t0        TCP SOURCE:36422->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  333u     IPv4         1686351225      0t0        TCP SOURCE:50480->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  334u     IPv4         1686351226      0t0        TCP SOURCE:44046->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  335u     IPv4         1686361452      0t0        TCP SOURCE:51434->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  336u     IPv4         1686843600      0t0        TCP SOURCE:34048->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  337u     IPv4         1686769136      0t0        TCP SOURCE:45566->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  338u     IPv4         1686848589      0t0        TCP SOURCE:51034->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  339u     IPv4         1686843616      0t0        TCP SOURCE:53592->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  340u     IPv4         1686804845      0t0        TCP SOURCE:nimhub->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  341u     IPv4         1686819546      0t0        TCP SOURCE:33822->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  342u     IPv4         1686819547      0t0        TCP SOURCE:55620->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  343u     IPv4         1686819548      0t0        TCP SOURCE:34776->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  344u     IPv4         1687348195      0t0        TCP SOURCE:46022->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  345u     IPv4         1687337202      0t0        TCP SOURCE:57544->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  346u     IPv4         1687325159      0t0        TCP SOURCE:34774->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  347u     IPv4         1687337203      0t0        TCP SOURCE:37332->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  348u     IPv4         1687348208      0t0        TCP SOURCE:59946->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  349u     IPv4         1687322261      0t0        TCP SOURCE:45778->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  350u     IPv4         1687349920      0t0        TCP SOURCE:39360->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  351u     IPv4         1687340030      0t0        TCP SOURCE:46752->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  352u     IPv4         1687882837      0t0        TCP SOURCE:56662->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  353u     IPv4         1687869690      0t0        TCP SOURCE:39948->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  354u     IPv4         1687869699      0t0        TCP SOURCE:45416->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  355u     IPv4         1687880096      0t0        TCP SOURCE:47968->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  356u     IPv4         1687867204      0t0        TCP SOURCE:42350->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  357u     IPv4         1687864733      0t0        TCP SOURCE:56402->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  358u     IPv4         1687867425      0t0        TCP SOURCE:49974->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  359u     IPv4         1687867426      0t0        TCP SOURCE:57362->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  360u     IPv4         1688382162      0t0        TCP SOURCE:39430->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  361u     IPv4         1688391352      0t0        TCP SOURCE:50942->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  362u     IPv4         1688391365      0t0        TCP SOURCE:56404->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  363u     IPv4         1688391366      0t0        TCP SOURCE:58956->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  364u     IPv4         1688382251      0t0        TCP SOURCE:53332->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  365u     IPv4         1688391399      0t0        TCP SOURCE:39152->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  366u     IPv4         1688385769      0t0        TCP SOURCE:60950->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  367u     IPv4         1688393906      0t0        TCP SOURCE:40106->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  368u     IPv4         1683047857      0t0        TCP SOURCE:49626->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  369u     IPv4         1688905952      0t0        TCP SOURCE:32906->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  370u     IPv4         1688897574      0t0        TCP SOURCE:38368->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  371u     IPv4         1688912908      0t0        TCP SOURCE:40932->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  372u     IPv4         1688904726      0t0        TCP SOURCE:35308->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  373u     IPv4         1688912909      0t0        TCP SOURCE:49360->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  374u     IPv4         1688904727      0t0        TCP SOURCE:42932->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  375u     IPv4         1688912089      0t0        TCP SOURCE:50320->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  376u     IPv4         1689423946      0t0        TCP SOURCE:59786->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  377u     IPv4         1689414453      0t0        TCP SOURCE:43078->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  378u     IPv4         1689423223      0t0        TCP SOURCE:48540->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  379u     IPv4         1689414454      0t0        TCP SOURCE:51102->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  380u     IPv4         1689423228      0t0        TCP SOURCE:45484->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  381u     IPv4         1689414455      0t0        TCP SOURCE:59536->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  382u     IPv4         1689414456      0t0        TCP SOURCE:53102->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  383u     IPv4         1689426115      0t0        TCP SOURCE:60490->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  384u     IPv4         1689850991      0t0        TCP SOURCE:43746->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  385u     IPv4         1689963258      0t0        TCP SOURCE:55258->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  386u     IPv4         1689950614      0t0        TCP SOURCE:60720->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  387u     IPv4         1689953958      0t0        TCP SOURCE:35052->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  388u     IPv4         1689963282      0t0        TCP SOURCE:57672->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  389u     IPv4         1689950712      0t0        TCP SOURCE:43504->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  390u     IPv4         1689953959      0t0        TCP SOURCE:37070->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  391u     IPv4         1689953960      0t0        TCP SOURCE:44458->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  392u     IPv4         1690461659      0t0        TCP SOURCE:56780->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  393u     IPv4         1690464102      0t0        TCP SOURCE:40074->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  394u     IPv4         1690478983      0t0        TCP SOURCE:45536->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  395u     IPv4         1690464103      0t0        TCP SOURCE:48088->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  396u     IPv4         1690464104      0t0        TCP SOURCE:42464->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  397u     IPv4         1690465271      0t0        TCP SOURCE:56522->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  398u     IPv4         1690478999      0t0        TCP SOURCE:50094->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  399u     IPv4         1690479018      0t0        TCP SOURCE:57484->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  400u     IPv4         1690978976      0t0        TCP SOURCE:41966->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  401u     IPv4         1690991152      0t0        TCP SOURCE:53488->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  402u     IPv4         1690989921      0t0        TCP SOURCE:58950->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  403u     IPv4         1690989925      0t0        TCP SOURCE:33282->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  404u     IPv4         1690989927      0t0        TCP SOURCE:55890->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  405u     IPv4         1690983864      0t0        TCP SOURCE:41716->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  406u     IPv4         1690991168      0t0        TCP SOURCE:35282->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  407u     IPv4         1690991169      0t0        TCP SOURCE:42674->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  408u     IPv4         1691503342      0t0        TCP SOURCE:56680->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  409u     IPv4         1691515455      0t0        TCP SOURCE:45430->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  410u     IPv4         1691498425      0t0        TCP SOURCE:39968->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  411u     IPv4         1691429518      0t0        TCP SOURCE:47988->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  412u     IPv4         1691429519      0t0        TCP SOURCE:42364->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  413u     IPv4         1691510324      0t0        TCP SOURCE:56422->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  414u     IPv4         1691503492      0t0        TCP SOURCE:49988->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  415u     IPv4         1691518072      0t0        TCP SOURCE:57382->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  416u     IPv4         1691995512      0t0        TCP SOURCE:41600->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  417u     IPv4         1692051540      0t0        TCP SOURCE:53118->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  418u     IPv4         1692048532      0t0        TCP SOURCE:58580->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  419u     IPv4         1692048537      0t0        TCP SOURCE:32900->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  420u     IPv4         1692048541      0t0        TCP SOURCE:55514->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  421u     IPv4         1692042143      0t0        TCP SOURCE:41346->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  422u     IPv4         1692045727      0t0        TCP SOURCE:34918->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  423u     IPv4         1692051651      0t0        TCP SOURCE:42312->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  424u     IPv4         1692345247      0t0        TCP SOURCE:54016->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  425u     IPv4         1692563165      0t0        TCP SOURCE:37296->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  426u     IPv4         1692557550      0t0        TCP SOURCE:42758->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  427u     IPv4         1692563224      0t0        TCP SOURCE:45316->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  428u     IPv4         1692563225      0t0        TCP SOURCE:39706->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  429u     IPv4         1692563228      0t0        TCP SOURCE:53762->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  430u     IPv4         1692563272      0t0        TCP SOURCE:47328->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  431u     IPv4         1692560072      0t0        TCP SOURCE:54716->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  432u     IPv4         1693044490      0t0        TCP SOURCE:38848->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  433u     IPv4         1693066298      0t0        TCP SOURCE:50372->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  434u     IPv4         1693061475      0t0        TCP SOURCE:55846->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  435u     IPv4         1693061476      0t0        TCP SOURCE:58398->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  436u     IPv4         1693063694      0t0        TCP SOURCE:52774->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  437u     IPv4         1693066421      0t0        TCP SOURCE:38612->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  438u     IPv4         1693055583      0t0        TCP SOURCE:60410->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  439u     IPv4         1693061701      0t0        TCP SOURCE:39578->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  440u     IPv4         1693566843      0t0        TCP SOURCE:51756->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  441u     IPv4         1693558730      0t0        TCP SOURCE:35042->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  442u     IPv4         1693544321      0t0        TCP SOURCE:40504->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  443u     IPv4         1681165051      0t0        TCP SOURCE:43062->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  444u     IPv4         1693560906      0t0        TCP SOURCE:37438->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  445u     IPv4         1693573162      0t0        TCP SOURCE:51490->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  446u     IPv4         1693572342      0t0        TCP SOURCE:45056->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  447u     IPv4         1693551007      0t0        TCP SOURCE:52444->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  448u     IPv4         1694046294      0t0        TCP SOURCE:35358->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  449u     IPv4         1694049740      0t0        TCP SOURCE:46876->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  450u     IPv4         1694050327      0t0        TCP SOURCE:52344->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  451u     IPv4         1694032841      0t0        TCP SOURCE:54896->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  452u     IPv4         1694032849      0t0        TCP SOURCE:49272->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  453u     IPv4         1694050412      0t0        TCP SOURCE:35094->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  454u     IPv4         1694048837      0t0        TCP SOURCE:56892->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  455u     IPv4         1694050492      0t0        TCP SOURCE:36060->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  456u     IPv4         1694485102      0t0        TCP SOURCE:46950->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  457u     IPv4         1694486508      0t0        TCP SOURCE:58462->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  458u     IPv4         1694486782      0t0        TCP SOURCE:35692->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  459u     IPv4         1694496140      0t0        TCP SOURCE:38250->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  460u     IPv4         1694486785      0t0        TCP SOURCE:60864->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  461u     IPv4         1694493293      0t0        TCP SOURCE:46684->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  462u     IPv4         1694496236      0t0        TCP SOURCE:40262->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  463u     IPv4         1694498278      0t0        TCP SOURCE:47652->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  464u     IPv4         1694569164      0t0        TCP SOURCE:58466->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  465u     IPv4         1694892894      0t0        TCP SOURCE:41752->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  466u     IPv4         1694884037      0t0        TCP SOURCE:47214->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  467u     IPv4         1694896482      0t0        TCP SOURCE:49766->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  468u     IPv4         1694896483      0t0        TCP SOURCE:44142->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  469u     IPv4         1694892896      0t0        TCP SOURCE:58200->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  470u     IPv4         1694895164      0t0        TCP SOURCE:51772->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  471u     IPv4         1694896488      0t0        TCP SOURCE:59160->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  472u     IPv4         1695271966      0t0        TCP SOURCE:42580->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  473u     IPv4         1695277485      0t0        TCP SOURCE:54098->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  474u     IPv4         1695259451      0t0        TCP SOURCE:59560->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  475u     IPv4         1695271069      0t0        TCP SOURCE:33880->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  476u     IPv4         1695259452      0t0        TCP SOURCE:56500->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  477u     IPv4         1695277488      0t0        TCP SOURCE:42320->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  478u     IPv4         1695271070      0t0        TCP SOURCE:35892->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  479u     IPv4         1695277493      0t0        TCP SOURCE:43280->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  480u     IPv4         1695499211      0t0        TCP SOURCE:52950->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  481u     IPv4         1695499212      0t0        TCP SOURCE:36230->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  482u     IPv4         1695609813      0t0        TCP SOURCE:41692->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  483u     IPv4         1695624996      0t0        TCP SOURCE:44244->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  484u     IPv4         1695624997      0t0        TCP SOURCE:38626->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  485u     IPv4         1695619653      0t0        TCP SOURCE:52678->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  486u     IPv4         1695619654      0t0        TCP SOURCE:46244->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  487u     IPv4         1695613091      0t0        TCP SOURCE:53632->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  488u     IPv4         1695932453      0t0        TCP SOURCE:34362->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  489u     IPv4         1695934501      0t0        TCP SOURCE:45874->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  490u     IPv4         1695905572      0t0        TCP SOURCE:51336->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  491u     IPv4         1695922685      0t0        TCP SOURCE:53888->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  492u     IPv4         1695922686      0t0        TCP SOURCE:48264->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  493u     IPv4         1695932454      0t0        TCP SOURCE:34094->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  494u     IPv4         1695932319      0t0        TCP SOURCE:55894->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  495u     IPv4         1695932320      0t0        TCP SOURCE:35050->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  496u     IPv4         1696179022      0t0        TCP SOURCE:44602->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  497u     IPv4         1696240031      0t0        TCP SOURCE:56120->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  498u     IPv4         1696240032      0t0        TCP SOURCE:33350->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  499u     IPv4         1696217972      0t0        TCP SOURCE:35908->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  500u     IPv4         1696245526      0t0        TCP SOURCE:58516->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  501u     IPv4         1696240033      0t0        TCP SOURCE:44336->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  502u     IPv4         1696245527      0t0        TCP SOURCE:37908->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  503u     IPv4         1696245528      0t0        TCP SOURCE:45296->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  504u     IPv4         1696558188      0t0        TCP SOURCE:53380->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  505u     IPv4         1696559150      0t0        TCP SOURCE:36660->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  506u     IPv4         1696553544      0t0        TCP SOURCE:42134->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  507u     IPv4         1696553545      0t0        TCP SOURCE:44686->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  508u     IPv4         1696553546      0t0        TCP SOURCE:39062->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  509u     IPv4         1696558189      0t0        TCP SOURCE:53114->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  510u     IPv4         1696553548      0t0        TCP SOURCE:46704->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  511u     IPv4         1696556533      0t0        TCP SOURCE:54092->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  512u     IPv4         1696873256      0t0        TCP SOURCE:33752->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  513u     IPv4         1696877765      0t0        TCP SOURCE:45264->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  514u     IPv4         1696877766      0t0        TCP SOURCE:50726->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  515u     IPv4         1696877767      0t0        TCP SOURCE:53278->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  516u     IPv4         1696877768      0t0        TCP SOURCE:47654->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  517u     IPv4         1696877769      0t0        TCP SOURCE:33474->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  518u     IPv4         1696877770      0t0        TCP SOURCE:55272->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  519u     IPv4         1696877771      0t0        TCP SOURCE:34428->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  520u     IPv4         1697178341      0t0        TCP SOURCE:43298->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  521u     IPv4         1697177088      0t0        TCP SOURCE:54816->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  522u     IPv4         1697184077      0t0        TCP SOURCE:60278->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  523u     IPv4         1697184081      0t0        TCP SOURCE:34604->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  524u     IPv4         1697184082      0t0        TCP SOURCE:57212->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  525u     IPv4         1697184083      0t0        TCP SOURCE:43032->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  526u     IPv4         1697184084      0t0        TCP SOURCE:36598->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  527u     IPv4         1697184085      0t0        TCP SOURCE:43986->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  528u     IPv4         1697475659      0t0        TCP SOURCE:52372->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  529u     IPv4         1697479770      0t0        TCP SOURCE:35652->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  530u     IPv4         1697479771      0t0        TCP SOURCE:41114->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  531u     IPv4         1697479772      0t0        TCP SOURCE:43666->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  532u     IPv4         1697479773      0t0        TCP SOURCE:38042->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  533u     IPv4         1697478726      0t0        TCP SOURCE:52106->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  534u     IPv4         1697479777      0t0        TCP SOURCE:45672->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  535u     IPv4         1697479779      0t0        TCP SOURCE:53066->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  536u     IPv4         1697729899      0t0        TCP SOURCE:60484->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  537u     IPv4         1697729900      0t0        TCP SOURCE:43764->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  538u     IPv4         1697778308      0t0        TCP SOURCE:49232->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  539u     IPv4         1697778309      0t0        TCP SOURCE:51784->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  540u     IPv4         1697775151      0t0        TCP SOURCE:46160->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  541u     IPv4         1697775152      0t0        TCP SOURCE:60212->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  542u     IPv4         1697775153      0t0        TCP SOURCE:53784->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  543u     IPv4         1697778313      0t0        TCP SOURCE:32940->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  544u     IPv4         1698100189      0t0        TCP SOURCE:40462->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  545u     IPv4         1698113938      0t0        TCP SOURCE:51974->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  546u     IPv4         1698112734      0t0        TCP SOURCE:57442->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  547u     IPv4         1698113941      0t0        TCP SOURCE:59994->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  548u     IPv4         1698113942      0t0        TCP SOURCE:54370->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  549u     IPv4         1698113943      0t0        TCP SOURCE:40190->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  550u     IPv4         1698113944      0t0        TCP SOURCE:33756->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  551u     IPv4         1698113945      0t0        TCP SOURCE:41144->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  552u     IPv4         1698349191      0t0        TCP SOURCE:46432->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  553u     IPv4         1698360038      0t0        TCP SOURCE:57944->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  554u     IPv4         1698360039      0t0        TCP SOURCE:35174->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  555u     IPv4         1698360041      0t0        TCP SOURCE:37732->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  556u     IPv4         1698360042      0t0        TCP SOURCE:60340->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  557u     IPv4         1698360043      0t0        TCP SOURCE:46160->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  558u     IPv4         1698360044      0t0        TCP SOURCE:39726->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  559u     IPv4         1698360045      0t0        TCP SOURCE:47114->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  560u     IPv4         1698557751      0t0        TCP SOURCE:51564->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  561u     IPv4         1698557780      0t0        TCP SOURCE:34844->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  562u     IPv4         1698557781      0t0        TCP SOURCE:40306->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  563u     IPv4         1698557782      0t0        TCP SOURCE:42858->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  564u     IPv4         1698552079      0t0        TCP SOURCE:37234->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  565u     IPv4         1698552080      0t0        TCP SOURCE:51286->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  566u     IPv4         1698504676      0t0        TCP SOURCE:44858->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  567u     IPv4         1698552084      0t0        TCP SOURCE:52252->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  568u     IPv4         1698744895      0t0        TCP SOURCE:56082->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  569u     IPv4         1698735038      0t0        TCP SOURCE:39362->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  570u     IPv4         1698751827      0t0        TCP SOURCE:44824->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  571u     IPv4         1698744904      0t0        TCP SOURCE:47382->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  572u     IPv4         1698735039      0t0        TCP SOURCE:41759->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  573u     IPv4         1698744905      0t0        TCP SOURCE:55810->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  574u     IPv4         1698735040      0t0        TCP SOURCE:49376->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  575u     IPv4         1698720095      0t0        TCP SOURCE:56764->DESTINATION_H:2376 (ESTABLISHED)\nportainer 24681 portainer  576u     IPv4         1698924141      0t0        TCP SOURCE:60916->DESTINATION_A:2376 (ESTABLISHED)\nportainer 24681 portainer  577u     IPv4         1698930714      0t0        TCP SOURCE:44208->DESTINATION_B:2376 (ESTABLISHED)\nportainer 24681 portainer  578u     IPv4         1698926888      0t0        TCP SOURCE:49670->DESTINATION_C:2376 (ESTABLISHED)\nportainer 24681 portainer  579u     IPv4         1698926889      0t0        TCP SOURCE:52222->DESTINATION_D:2376 (ESTABLISHED)\nportainer 24681 portainer  580u     IPv4         1698926890      0t0        TCP SOURCE:46600->DESTINATION_E:2376 (ESTABLISHED)\nportainer 24681 portainer  581u     IPv4         1698926891      0t0        TCP SOURCE:60652->DESTINATION_F:2376 (ESTABLISHED)\nportainer 24681 portainer  582u     IPv4         1698926892      0t0        TCP SOURCE:54224->DESTINATION_G:2376 (ESTABLISHED)\nportainer 24681 portainer  583u     IPv4         1698926893      0t0        TCP SOURCE:33382->DESTINATION_H:2376 (ESTABLISHED)\n```\n\nEdit by xAt0mZ for better lisibility. ",
    "mrWinston": "Any Updates on this? I ran into the same issue again running portainer simply with: \ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\nOn an AWSLinux2 Host connected to 4 Docker Endpoints. It wasn't even running for 24 Hours before i had to restart portainer. \nPortainer Version: 1.19.1\nDocker Version: Docker version 18.03.1-ce, build 3dfb8343b139d6342acfd9975d7f1068b5b1c3d3\nOS: AWS Linux 2. ",
    "evenye": "I got the same issue , that I have to reboot the hosts everyday . @deviantony  got it , thanks so much for the comment ~ let's me close this case now . . ",
    "guppie70": "I am experiencing the same issue as well. I am running v1.19.1 on an AWS EC2 container. Have never heard of a snapshot feature - and if I search in the documentation (https://portainer.readthedocs.io/en/stable/search.html?q=snapshot&check_keywords=yes&area=default) for \"snapshot\" nothing pops up. So I have no clue if adding the flag will help.. @deviantony I have re-initiated my portainer container with the --no-snapshot flag. Since I do not know how to enforce the error, we will need to wait and see if portainer keeps running in the coming period. I am happy to share any other information that might help you to locate the problem though. Just let me know!. @deviantony \nPortainer seems to be running much more stable with the --no-snaspshot added. It's now up for 4 days without any issues!. ",
    "random-ua": "Having same issue almost every day. Swarm with 5 nodes, ~300 containers on AWS. \nI'll be glad to establish chat contact with you (gtalk, slack etc) to be able to provide more information about problem (straces etc) while it happening . ",
    "peteryhwong": "@deviantony we are now running portainer/portainer:1.19.2 and we are still facing the issue when using the portainer/agent:latest\n2018/09/26 21:20:37 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nPlease let us know if we need to make any other changes.\n. @deviantony thanks for this. In the mean time would --no-snapshot help?. @deviantony FYI so far adding --no-snapshot seems to have avoid the issue.. ",
    "Premik": "I had no luck with the --no-snapshot for the agent. Still the error occurs after a day. I have Amazon Linux 2 image running in Vbox. Compose file: \nagent:\n    image: portainer/agent     \n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n      #LOG_LEVEL: debug\n    command: --no-snapshot # https://github.com/portainer/portainer/issues/1991\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - portainer_agent\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\n      restart_policy:\n        delay: 30s\n        window: 30s\n        condition: on-failure\n    logging:\n      driver: journald. I had no luck with the --no-snapshot for the agent. Still the error occurs after a day. I have Amazon Linux 2 image running in Vbox. Compose file: \nagent:\n    image: portainer/agent     \n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n      #LOG_LEVEL: debug\n    command: --no-snapshot # https://github.com/portainer/portainer/issues/1991\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - portainer_agent\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\n      restart_policy:\n        delay: 30s\n        window: 30s\n        condition: on-failure\n    logging:\n      driver: journald. This was only in the agent log. Not in the Portainer log. \nOne thing I've noticed is the error usually affected agent only on the node where the Swarm manager is running. I have two other worker nodes and I haven't seen the error there. . This was only in the agent log. Not in the Portainer log. \nOne thing I've noticed is the error usually affected agent only on the node where the Swarm manager is running. I have two other worker nodes and I haven't seen the error there. . @kendrickm It could be. I had some failing containers here and there since this is may playground environment. But I restarted the Docker daemon pretty soon after I noticed the high cpu usage so can't tell for sure. I'll see if I can isolate the problem more the next time.\nAlthough I think the file handles were drained only in the agent's container. I run both portainer and agent in a container and docker sets the default ulimits pretty low (1024 for the file handlers I think). \nFollowing is the system log around that time:\n75e975d6612f = agent\ndacabed9f5bb = portainer\n```\nNov 12 21:30:01 node1 systemd[1]: Created slice User Slice of root.\nNov 12 21:30:01 node1 systemd[1]: Starting User Slice of root.\nNov 12 21:30:01 node1 systemd[1]: Started Session 703 of user root.\nNov 12 21:30:01 node1 systemd[1]: Starting Session 703 of user root.\nNov 12 21:30:01 node1 CROND[30587]: (root) CMD (/usr/lib64/sa/sa1 1 1)\nNov 12 21:30:01 node1 systemd[1]: Removed slice User Slice of root.\nNov 12 21:30:01 node1 systemd[1]: Stopping User Slice of root.\nNov 12 21:33:30 node1 dockerd[30308]: time=\"2018-11-12T21:33:30.237017361Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:9kjzpblmb4imxanaqvob58y05 leaving:false netPeers:3 entries:9 Queue qLen:0 netMsg/s:0\"\nNov 12 21:33:30 node1 dockerd[30308]: time=\"2018-11-12T21:33:30.237190457Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:vqxianltzhxqfxez24nv56eq7 leaving:false netPeers:3 entries:14 Queue qLen:0 netMsg/s:0\"\nNov 12 21:33:30 node1 dockerd[30308]: time=\"2018-11-12T21:33:30.237346370Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:utqf7lwusdr6be6ggee2z3i33 leaving:false netPeers:3 entries:11 Queue qLen:0 netMsg/s:0\"\nNov 12 21:38:30 node1 dockerd[30308]: time=\"2018-11-12T21:38:30.238596045Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:vqxianltzhxqfxez24nv56eq7 leaving:false netPeers:3 entries:14 Queue qLen:0 netMsg/s:0\"\nNov 12 21:38:30 node1 dockerd[30308]: time=\"2018-11-12T21:38:30.238726712Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:utqf7lwusdr6be6ggee2z3i33 leaving:false netPeers:3 entries:11 Queue qLen:0 netMsg/s:0\"\nNov 12 21:38:30 node1 dockerd[30308]: time=\"2018-11-12T21:38:30.238779981Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:9kjzpblmb4imxanaqvob58y05 leaving:false netPeers:3 entries:9 Queue qLen:0 netMsg/s:0\"\nNov 12 21:40:01 node1 systemd[1]: Created slice User Slice of root.\nNov 12 21:40:01 node1 systemd[1]: Starting User Slice of root.\nNov 12 21:40:01 node1 systemd[1]: Started Session 704 of user root.\nNov 12 21:40:01 node1 systemd[1]: Starting Session 704 of user root.                                                                                                                                                                                                         \nNov 12 21:40:01 node1 CROND[30800]: (root) CMD (/usr/lib64/sa/sa1 1 1)                                                                                                                                                                                                       \nNov 12 21:40:01 node1 systemd[1]: Removed slice User Slice of root.                                                                                                                                                                                                          \nNov 12 21:40:01 node1 systemd[1]: Stopping User Slice of root.                                                                                                                                                                                                               \nNov 12 21:43:18 node1 dhclient[4746]: DHCPREQUEST on eth1 to 192.168.1.1 port 67 (xid=0x42f1443d)                                                                                                                                                                            \nNov 12 21:43:18 node1 dhclient[4746]: DHCPACK from 192.168.1.1 (xid=0x42f1443d)                                                                                                                                                                                              \nNov 12 21:43:20 node1 dhclient[4746]: bound to 192.168.1.202 -- renewal in 15082 seconds.                                                                                                                                                                                    \nNov 12 21:43:30 node1 dockerd[30308]: time=\"2018-11-12T21:43:30.435330566Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:9kjzpblmb4imxanaqvob58y05 leaving:false netPeers:3 entries:9 Queue qLen:0 netMsg/s:0\"                                                \nNov 12 21:43:30 node1 dockerd[30308]: time=\"2018-11-12T21:43:30.435681069Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:vqxianltzhxqfxez24nv56eq7 leaving:false netPeers:3 entries:14 Queue qLen:0 netMsg/s:0\"                                               \nNov 12 21:43:30 node1 dockerd[30308]: time=\"2018-11-12T21:43:30.435722077Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:utqf7lwusdr6be6ggee2z3i33 leaving:false netPeers:3 entries:11 Queue qLen:0 netMsg/s:0\"                                               \nNov 12 21:48:30 node1 dockerd[30308]: time=\"2018-11-12T21:48:30.438736620Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:vqxianltzhxqfxez24nv56eq7 leaving:false netPeers:3 entries:14 Queue qLen:0 netMsg/s:0\"                                               \nNov 12 21:48:30 node1 dockerd[30308]: time=\"2018-11-12T21:48:30.438922906Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:utqf7lwusdr6be6ggee2z3i33 leaving:false netPeers:3 entries:11 Queue qLen:0 netMsg/s:0\"                                               \nNov 12 21:48:30 node1 dockerd[30308]: time=\"2018-11-12T21:48:30.439008482Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:9kjzpblmb4imxanaqvob58y05 leaving:false netPeers:3 entries:9 Queue qLen:0 netMsg/s:0\"                                                \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 5ms                                                                                                                       \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: proxy error: dial tcp 10.0.2.10:9001: socket: too many open files                                                                                                                                       \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 10ms                                                                                                                      \nNov 12 21:49:13 node1 dacabed9f5bb[30308]: 2018/11/12 21:49:13 http: proxy error: unexpected end of JSON input                                                                                                                                                               \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 20ms                                                                                                                      \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 40ms                                                                                                                      \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 80ms                                                                                                                      \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 160ms                                                                                                                     \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 320ms                                                                                                                     \nNov 12 21:49:14 node1 75e975d6612f[30308]: 2018/11/12 21:49:14 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 640ms                                                                                                                     \nNov 12 21:49:14 node1 75e975d6612f[30308]: 2018/11/12 21:49:14 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:15 node1 75e975d6612f[30308]: 2018/11/12 21:49:15 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:16 node1 75e975d6612f[30308]: 2018/11/12 21:49:16 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:17 node1 75e975d6612f[30308]: 2018/11/12 21:49:17 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:18 node1 75e975d6612f[30308]: 2018/11/12 21:49:18 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\n```. @kendrickm It could be. I had some failing containers here and there since this is may playground environment. But I restarted the Docker daemon pretty soon after I noticed the high cpu usage so can't tell for sure. I'll see if I can isolate the problem more the next time.\nAlthough I think the file handles were drained only in the agent's container. I run both portainer and agent in a container and docker sets the default ulimits pretty low (1024 for the file handlers I think). \nFollowing is the system log around that time:\n75e975d6612f = agent\ndacabed9f5bb = portainer\n```\nNov 12 21:30:01 node1 systemd[1]: Created slice User Slice of root.\nNov 12 21:30:01 node1 systemd[1]: Starting User Slice of root.\nNov 12 21:30:01 node1 systemd[1]: Started Session 703 of user root.\nNov 12 21:30:01 node1 systemd[1]: Starting Session 703 of user root.\nNov 12 21:30:01 node1 CROND[30587]: (root) CMD (/usr/lib64/sa/sa1 1 1)\nNov 12 21:30:01 node1 systemd[1]: Removed slice User Slice of root.\nNov 12 21:30:01 node1 systemd[1]: Stopping User Slice of root.\nNov 12 21:33:30 node1 dockerd[30308]: time=\"2018-11-12T21:33:30.237017361Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:9kjzpblmb4imxanaqvob58y05 leaving:false netPeers:3 entries:9 Queue qLen:0 netMsg/s:0\"\nNov 12 21:33:30 node1 dockerd[30308]: time=\"2018-11-12T21:33:30.237190457Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:vqxianltzhxqfxez24nv56eq7 leaving:false netPeers:3 entries:14 Queue qLen:0 netMsg/s:0\"\nNov 12 21:33:30 node1 dockerd[30308]: time=\"2018-11-12T21:33:30.237346370Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:utqf7lwusdr6be6ggee2z3i33 leaving:false netPeers:3 entries:11 Queue qLen:0 netMsg/s:0\"\nNov 12 21:38:30 node1 dockerd[30308]: time=\"2018-11-12T21:38:30.238596045Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:vqxianltzhxqfxez24nv56eq7 leaving:false netPeers:3 entries:14 Queue qLen:0 netMsg/s:0\"\nNov 12 21:38:30 node1 dockerd[30308]: time=\"2018-11-12T21:38:30.238726712Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:utqf7lwusdr6be6ggee2z3i33 leaving:false netPeers:3 entries:11 Queue qLen:0 netMsg/s:0\"\nNov 12 21:38:30 node1 dockerd[30308]: time=\"2018-11-12T21:38:30.238779981Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:9kjzpblmb4imxanaqvob58y05 leaving:false netPeers:3 entries:9 Queue qLen:0 netMsg/s:0\"\nNov 12 21:40:01 node1 systemd[1]: Created slice User Slice of root.\nNov 12 21:40:01 node1 systemd[1]: Starting User Slice of root.\nNov 12 21:40:01 node1 systemd[1]: Started Session 704 of user root.\nNov 12 21:40:01 node1 systemd[1]: Starting Session 704 of user root.                                                                                                                                                                                                         \nNov 12 21:40:01 node1 CROND[30800]: (root) CMD (/usr/lib64/sa/sa1 1 1)                                                                                                                                                                                                       \nNov 12 21:40:01 node1 systemd[1]: Removed slice User Slice of root.                                                                                                                                                                                                          \nNov 12 21:40:01 node1 systemd[1]: Stopping User Slice of root.                                                                                                                                                                                                               \nNov 12 21:43:18 node1 dhclient[4746]: DHCPREQUEST on eth1 to 192.168.1.1 port 67 (xid=0x42f1443d)                                                                                                                                                                            \nNov 12 21:43:18 node1 dhclient[4746]: DHCPACK from 192.168.1.1 (xid=0x42f1443d)                                                                                                                                                                                              \nNov 12 21:43:20 node1 dhclient[4746]: bound to 192.168.1.202 -- renewal in 15082 seconds.                                                                                                                                                                                    \nNov 12 21:43:30 node1 dockerd[30308]: time=\"2018-11-12T21:43:30.435330566Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:9kjzpblmb4imxanaqvob58y05 leaving:false netPeers:3 entries:9 Queue qLen:0 netMsg/s:0\"                                                \nNov 12 21:43:30 node1 dockerd[30308]: time=\"2018-11-12T21:43:30.435681069Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:vqxianltzhxqfxez24nv56eq7 leaving:false netPeers:3 entries:14 Queue qLen:0 netMsg/s:0\"                                               \nNov 12 21:43:30 node1 dockerd[30308]: time=\"2018-11-12T21:43:30.435722077Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:utqf7lwusdr6be6ggee2z3i33 leaving:false netPeers:3 entries:11 Queue qLen:0 netMsg/s:0\"                                               \nNov 12 21:48:30 node1 dockerd[30308]: time=\"2018-11-12T21:48:30.438736620Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:vqxianltzhxqfxez24nv56eq7 leaving:false netPeers:3 entries:14 Queue qLen:0 netMsg/s:0\"                                               \nNov 12 21:48:30 node1 dockerd[30308]: time=\"2018-11-12T21:48:30.438922906Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:utqf7lwusdr6be6ggee2z3i33 leaving:false netPeers:3 entries:11 Queue qLen:0 netMsg/s:0\"                                               \nNov 12 21:48:30 node1 dockerd[30308]: time=\"2018-11-12T21:48:30.439008482Z\" level=info msg=\"NetworkDB stats node1(d6efd5ef8ef9) - netID:9kjzpblmb4imxanaqvob58y05 leaving:false netPeers:3 entries:9 Queue qLen:0 netMsg/s:0\"                                                \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 5ms                                                                                                                       \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: proxy error: dial tcp 10.0.2.10:9001: socket: too many open files                                                                                                                                       \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 10ms                                                                                                                      \nNov 12 21:49:13 node1 dacabed9f5bb[30308]: 2018/11/12 21:49:13 http: proxy error: unexpected end of JSON input                                                                                                                                                               \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 20ms                                                                                                                      \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 40ms                                                                                                                      \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 80ms                                                                                                                      \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 160ms                                                                                                                     \nNov 12 21:49:13 node1 75e975d6612f[30308]: 2018/11/12 21:49:13 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 320ms                                                                                                                     \nNov 12 21:49:14 node1 75e975d6612f[30308]: 2018/11/12 21:49:14 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 640ms                                                                                                                     \nNov 12 21:49:14 node1 75e975d6612f[30308]: 2018/11/12 21:49:14 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:15 node1 75e975d6612f[30308]: 2018/11/12 21:49:15 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:16 node1 75e975d6612f[30308]: 2018/11/12 21:49:16 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:17 node1 75e975d6612f[30308]: 2018/11/12 21:49:17 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:18 node1 75e975d6612f[30308]: 2018/11/12 21:49:18 http: Accept error: accept tcp [::]:9001: accept4: too many open files; retrying in 1s                                                                                                                        \nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\nNov 12 21:49:19 node1 75e975d6612f[30308]: 2018/11/12 21:49:19 [ERR] memberlist: Error accepting TCP connection: accept tcp [::]:7946: accept4: too many open files\n```. I can confirm the dashboard reloading and fd going up behavior. I created a Vagrant+Ansible+AWS Linux2 image setup to reproduce this.\nv.zip\n1) Unzip the three files in the attachment  to a single folder and run vagrant up there.\n1) This would provision two VBox nodes. \nNote: There should be one Bridged Net adapter attached to each node (portnode1=081027D43801, portnode2=081027D43802). For some reason (Vagrant bug?) sometimes I got node2 with two Bridged adapters instead. If that happens stop the node2 and remove the extra network adapter and start it back up again.\n1) On first run Ansible should print a debug message with Portainer port and details. Eventually re-run later with vagrant provision\n1) vagrant ssh portnode1 to get to the node 1 shell and run:\nsudo su\nexport p=$(docker  inspect --format '{{.State.Pid}}' $(docker ps | grep agent | cut -c-12))\nyes 'ls /proc/$p/fd | wc -l; sleep 2' | /usr/bin/sh\nThis will list the number of Agent's process  fds every 2 seconds.\n1) Go to portainer web portnode2:9000/#/dashboard and click between Dashboard, Stack and back etc.The number of fd would go up aprox 9 new on each refresh..\nNote:\n It seems at least two nodes are required. I couldn't reproduce this while using a single node only.\n Ansible 2.8.0+ (dev version) is required because of the Docker modules\n. I can confirm the dashboard reloading and fd going up behavior. I created a Vagrant+Ansible+AWS Linux2 image setup to reproduce this.\nv.zip\n1) Unzip the three files in the attachment  to a single folder and run vagrant up there.\n1) This would provision two VBox nodes. \nNote: There should be one Bridged Net adapter attached to each node (portnode1=081027D43801, portnode2=081027D43802). For some reason (Vagrant bug?) sometimes I got node2 with two Bridged adapters instead. If that happens stop the node2 and remove the extra network adapter and start it back up again.\n1) On first run Ansible should print a debug message with Portainer port and details. Eventually re-run later with vagrant provision\n1) vagrant ssh portnode1 to get to the node 1 shell and run:\nsudo su\nexport p=$(docker  inspect --format '{{.State.Pid}}' $(docker ps | grep agent | cut -c-12))\nyes 'ls /proc/$p/fd | wc -l; sleep 2' | /usr/bin/sh\nThis will list the number of Agent's process  fds every 2 seconds.\n1) Go to portainer web portnode2:9000/#/dashboard and click between Dashboard, Stack and back etc.The number of fd would go up aprox 9 new on each refresh..\nNote:\n It seems at least two nodes are required. I couldn't reproduce this while using a single node only.\n Ansible 2.8.0+ (dev version) is required because of the Docker modules\n. Hi,\nI've tried the portainerci/agent:feat49-update-library: \n[root@portnode1 vagrant]# docker service ls\nID                  NAME                       MODE                REPLICAS            IMAGE                                     PORTS\nwuh6dfrc0ztc        portainerStack_agent       global              2/2                 portainerci/agent:feat49-update-library   \ncqn3heevayfi        portainerStack_portainer   replicated          1/1                 portainer/portainer:latest                *:9000->9000/tcp\nbut unfortunately no luck. The number of FDs is still growing up on each page refresh:\n[root@portnode1 vagrant]# yes 'ls /proc/$p/fd | wc -l; sleep 10' | /usr/bin/sh\n78\n83\n85\n85\n92\n118\n125\n125\n129\n137\n148\n160\n160\nedit: Adding logs. I can see some TLS errors. Not sure if this is related:\nPortainer:\n2019/03/17 16:05:52 Creating admin user with password hash $2y$05$cTEbk/D17AFDT4bOmEgD.eOxx8/StO5HkICdKHmClxL9IJ2a6yeWi,\n2019/03/17 16:05:52 Starting Portainer 1.20.2 on :9000,\n2019/03/17 16:05:55 http error: Invalid JWT token (err=Invalid JWT token) (code=401),\n2019/03/17 16:05:55 http error: Invalid JWT token (err=Invalid JWT token) (code=401),\n2019/03/17 16:05:55 http error: Invalid JWT token (err=Invalid JWT token) (code=401),\n2019/03/17 16:05:55 http error: Invalid JWT token (err=Invalid JWT token) (code=401),\nAgent1:\n2019/03/17 16:05:47 [DEBUG] - Agent details: map[NodeName:portnode1 Mode:swarm NodeRole:manager AgentPort:9001],\n2019/03/17 16:05:47 [DEBUG] - Using cluster address: tasks.agent,\n2019/03/17 16:05:47 [DEBUG] - Using advertiseAddr: 10.0.1.5,\n2019/03/17 16:05:47 [DEBUG] - Generating TLS files...,\n2019/03/17 16:05:47 [DEBUG] - Using agent port: 9001,\n2019/03/17 16:05:50 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.1.5,\n2019/03/17 16:05:50 [INFO] serf: EventMemberJoin: 52f06fab0640 10.0.1.5,\n2019/03/17 16:05:50 [DEBUG] - Will join cluster via: tasks.agent,\n2019/03/17 16:05:50 [INFO] serf: EventMemberJoin: 0cfc8aea9ae6 10.0.1.6,\n2019/03/17 16:05:50 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true),\n2019/03/17 16:09:05 http: TLS handshake error from 10.0.1.8:50102: EOF,\n2019/03/17 16:10:50 http: TLS handshake error from 10.0.1.8:50158: EOF,\n2019/03/17 16:10:50 http: TLS handshake error from 10.0.1.8:50160: EOF,\nAgent2:\n2019/03/17 16:05:47 [DEBUG] - Agent details: map[NodeRole:worker AgentPort:9001 NodeName:portnode2 Mode:swarm],\n2019/03/17 16:05:47 [DEBUG] - Using cluster address: tasks.agent,\n2019/03/17 16:05:47 [DEBUG] - Using advertiseAddr: 10.0.1.6,\n2019/03/17 16:05:47 [DEBUG] - Generating TLS files...,\n2019/03/17 16:05:47 [DEBUG] - Using agent port: 9001,\n2019/03/17 16:05:50 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.1.6,\n2019/03/17 16:05:50 [INFO] serf: EventMemberJoin: 0cfc8aea9ae6 10.0.1.6,\n2019/03/17 16:05:50 [DEBUG] - Will join cluster via: tasks.agent,\n2019/03/17 16:05:50 [INFO] serf: EventMemberJoin: 52f06fab0640 10.0.1.5,\n2019/03/17 16:05:50 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true),\n2019/03/17 16:05:52 http error: Missing request signature headers (err=Unauthorized) (code=403),\n. Hi,\nI've tried the portainerci/agent:feat49-update-library: \n[root@portnode1 vagrant]# docker service ls\nID                  NAME                       MODE                REPLICAS            IMAGE                                     PORTS\nwuh6dfrc0ztc        portainerStack_agent       global              2/2                 portainerci/agent:feat49-update-library   \ncqn3heevayfi        portainerStack_portainer   replicated          1/1                 portainer/portainer:latest                *:9000->9000/tcp\nbut unfortunately no luck. The number of FDs is still growing up on each page refresh:\n[root@portnode1 vagrant]# yes 'ls /proc/$p/fd | wc -l; sleep 10' | /usr/bin/sh\n78\n83\n85\n85\n92\n118\n125\n125\n129\n137\n148\n160\n160\nedit: Adding logs. I can see some TLS errors. Not sure if this is related:\nPortainer:\n2019/03/17 16:05:52 Creating admin user with password hash $2y$05$cTEbk/D17AFDT4bOmEgD.eOxx8/StO5HkICdKHmClxL9IJ2a6yeWi,\n2019/03/17 16:05:52 Starting Portainer 1.20.2 on :9000,\n2019/03/17 16:05:55 http error: Invalid JWT token (err=Invalid JWT token) (code=401),\n2019/03/17 16:05:55 http error: Invalid JWT token (err=Invalid JWT token) (code=401),\n2019/03/17 16:05:55 http error: Invalid JWT token (err=Invalid JWT token) (code=401),\n2019/03/17 16:05:55 http error: Invalid JWT token (err=Invalid JWT token) (code=401),\nAgent1:\n2019/03/17 16:05:47 [DEBUG] - Agent details: map[NodeName:portnode1 Mode:swarm NodeRole:manager AgentPort:9001],\n2019/03/17 16:05:47 [DEBUG] - Using cluster address: tasks.agent,\n2019/03/17 16:05:47 [DEBUG] - Using advertiseAddr: 10.0.1.5,\n2019/03/17 16:05:47 [DEBUG] - Generating TLS files...,\n2019/03/17 16:05:47 [DEBUG] - Using agent port: 9001,\n2019/03/17 16:05:50 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.1.5,\n2019/03/17 16:05:50 [INFO] serf: EventMemberJoin: 52f06fab0640 10.0.1.5,\n2019/03/17 16:05:50 [DEBUG] - Will join cluster via: tasks.agent,\n2019/03/17 16:05:50 [INFO] serf: EventMemberJoin: 0cfc8aea9ae6 10.0.1.6,\n2019/03/17 16:05:50 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true),\n2019/03/17 16:09:05 http: TLS handshake error from 10.0.1.8:50102: EOF,\n2019/03/17 16:10:50 http: TLS handshake error from 10.0.1.8:50158: EOF,\n2019/03/17 16:10:50 http: TLS handshake error from 10.0.1.8:50160: EOF,\nAgent2:\n2019/03/17 16:05:47 [DEBUG] - Agent details: map[NodeRole:worker AgentPort:9001 NodeName:portnode2 Mode:swarm],\n2019/03/17 16:05:47 [DEBUG] - Using cluster address: tasks.agent,\n2019/03/17 16:05:47 [DEBUG] - Using advertiseAddr: 10.0.1.6,\n2019/03/17 16:05:47 [DEBUG] - Generating TLS files...,\n2019/03/17 16:05:47 [DEBUG] - Using agent port: 9001,\n2019/03/17 16:05:50 [DEBUG] - Serf configured with AdvertiseAddr: 10.0.1.6,\n2019/03/17 16:05:50 [INFO] serf: EventMemberJoin: 0cfc8aea9ae6 10.0.1.6,\n2019/03/17 16:05:50 [DEBUG] - Will join cluster via: tasks.agent,\n2019/03/17 16:05:50 [INFO] serf: EventMemberJoin: 52f06fab0640 10.0.1.5,\n2019/03/17 16:05:50 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true),\n2019/03/17 16:05:52 http error: Missing request signature headers (err=Unauthorized) (code=403),\n. ",
    "tle211212": "I also encounter this bug. My setup is a swarm cluster having 2 nodes (1 master and 1 worker). I observe that each time I load / refresh the dashboard page (ie https://abc.yyy/portainer/#/dashboard), the portainer agent containers have increasing number of open files (/proc/agent proc id/fd). This leak also happens on previous verions: 1.18.1, 1.19.1, 1.19.2 and 1.20.0.. > portainer/agent:fix1991\nI tried agent:fix1991 but the leak is still not resolved.. Hi chiptus, here is the detail of my setup.\nOS: Centos7 + Oracle UEK R5 kernel\nDocker: docker-ce-18.06.1.ce-3.el7.x86_64\nThe yml file I used to deploy portainer is attached for your reference.\nportainer.txt\n. ",
    "chiptus": "can you try the following image portainer/agent:fix1991 to see if it fixes the problem? . can you try the following image portainer/agent:fix1991 to see if it fixes the problem? . Thanks for trying, we will continue trying with other solutions.\nOn Thu, Dec 13, 2018, 16:51 tle211212 <notifications@github.com wrote:\n\nportainer/agent:fix1991\nI tried agent:fix1991 but the leak is still not resolved.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1991#issuecomment-446995224,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUVF81XNA6Wt2H9mb_QYuVRtsIJAqdrks5u4mltgaJpZM4Uz2-d\n.\n. Thanks for trying, we will continue trying with other solutions.\n\nOn Thu, Dec 13, 2018, 16:51 tle211212 <notifications@github.com wrote:\n\nportainer/agent:fix1991\nI tried agent:fix1991 but the leak is still not resolved.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/1991#issuecomment-446995224,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUVF81XNA6Wt2H9mb_QYuVRtsIJAqdrks5u4mltgaJpZM4Uz2-d\n.\n. @tle211212 \nI also encounter this bug. My setup is a swarm cluster having 2 nodes (1 master and 1 worker). I observe that each time I load / refresh the dashboard page (ie https://abc.yyy/portainer/#/dashboard), the portainer agent containers have increasing number of open files (/proc/agent proc id/fd). This leak also happens on previous verions: 1.18.1, 1.19.1, 1.19.2 and 1.20.0.\n\nI can't reproduce this one, I have an agent deployed locally and on a swarm and both file descriptor count stay the same (I tried refreshing the dashboard, changing pages...). @tle211212 \n\nI also encounter this bug. My setup is a swarm cluster having 2 nodes (1 master and 1 worker). I observe that each time I load / refresh the dashboard page (ie https://abc.yyy/portainer/#/dashboard), the portainer agent containers have increasing number of open files (/proc/agent proc id/fd). This leak also happens on previous verions: 1.18.1, 1.19.1, 1.19.2 and 1.20.0.\n\nI can't reproduce this one, I have an agent deployed locally and on a swarm and both file descriptor count stay the same (I tried refreshing the dashboard, changing pages...). I can't reproduce. I did the following:\n1. create a private repo out of https://github.com/portainer/portainer-compose\n2. create a stack from this repo.\n3. after this worked tried to create another stack from the same repo - succeed\n. I can't reproduce. I did the following:\n1. create a private repo out of https://github.com/portainer/portainer-compose\n2. create a stack from this repo.\n3. after this worked tried to create another stack from the same repo - succeed\n. The following gives me the same error:\n- Name: test-template\n- Description: test-description\n- Type: Container\n  - Name: test-tmpl-container\n  - image: busybox\n  - network: none (actually any type failed)\n. The following gives me the same error:\n- Name: test-template\n- Description: test-description\n- Type: Container\n  - Name: test-tmpl-container\n  - image: busybox\n  - network: none (actually any type failed)\n. The error was due to sending the network object instead of name. The error was due to sending the network object instead of name. confirmed, docker-compose give two aliases to the network- first one is the hostname and the second one is the service name, and this is for some reason gets deleted.\nI'm not completely sure where it drops, I can see it inside $scope.fromContainer.NetworksConfig.Networks[0].Aliases before deploying, and afterwards it's gone.\nI think that the data sent to createContainer endpoint is missing it. confirmed, docker-compose give two aliases to the network- first one is the hostname and the second one is the service name, and this is for some reason gets deleted.\nI'm not completely sure where it drops, I can see it inside $scope.fromContainer.NetworksConfig.Networks[0].Aliases before deploying, and afterwards it's gone.\nI think that the data sent to createContainer endpoint is missing it. @dobe, thanks for reporting that.\nUnfortunately, I'm not able to reproduce. The steps I take is:\n1. create a new swarm\n2. create a new stack from https://github.com/portainer/portainer-compose using docker-stack.yml\n3. go into containers\n4. press different actions (quick actions and actions on the bar such as restart, stop)\nEverything works as expected, is there anything I should do differentely? . @dobe, thanks for reporting that.\nUnfortunately, I'm not able to reproduce. The steps I take is:\n1. create a new swarm\n2. create a new stack from https://github.com/portainer/portainer-compose using docker-stack.yml\n3. go into containers\n4. press different actions (quick actions and actions on the bar such as restart, stop)\nEverything works as expected, is there anything I should do differentely? . I found something.\nWriting this for documentation:\nwhen $ctrl.agentProxy is false than only the logs button is available and works\n\nwhen I set it to true by hardcoding it, both logs and console are available and both show this error\nThe transition errored, detail: Error: Param values not valid for state\n\n. I found something.\nWriting this for documentation:\nwhen $ctrl.agentProxy is false than only the logs button is available and works\n\nwhen I set it to true by hardcoding it, both logs and console are available and both show this error\nThe transition errored, detail: Error: Param values not valid for state\n\n. When I'm connected to an agent, everything works as expected. When I'm connected to an agent, everything works as expected. The following steps can reproduce the issue:\n\nDownload the following stack: https://github.com/portainer/templates/blob/master/stacks/ironfunctions/docker-stack.yml\nDeploy it inside the Vagrant Swarm cluster using the Docker CLI, e.g: docker -H 10.0.7.10:2375 stack deploy...\nDeploy the Portainer stack specified in the issue (without the deploy constraint) inside the Vagrant Swarm cluster using the Docker CLI (docker stack deploy...)\nAccess the Portainer instance deployed in the Vagrant Swarm cluster via 10.0.7.10:9000\nCheck the stacks of the first endpoint (should be an agent endpoint), you should see the ironfunctions stack as a limited stack\nTry to reproduce the issue\n\nIt seems like it's related to a limited stack. \nI also checked, the tasks object does return with a containerId, it seems like it disappears somewhere\n. The following steps can reproduce the issue:\n\nDownload the following stack: https://github.com/portainer/templates/blob/master/stacks/ironfunctions/docker-stack.yml\nDeploy it inside the Vagrant Swarm cluster using the Docker CLI, e.g: docker -H 10.0.7.10:2375 stack deploy...\nDeploy the Portainer stack specified in the issue (without the deploy constraint) inside the Vagrant Swarm cluster using the Docker CLI (docker stack deploy...)\nAccess the Portainer instance deployed in the Vagrant Swarm cluster via 10.0.7.10:9000\nCheck the stacks of the first endpoint (should be an agent endpoint), you should see the ironfunctions stack as a limited stack\nTry to reproduce the issue\n\nIt seems like it's related to a limited stack. \nI also checked, the tasks object does return with a containerId, it seems like it disappears somewhere\n. confirmed. confirmed. The error seems to be here:\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/components/template-list/template-list.js#L34\nit seems like we're filtering by type, but show-swarm-stack will always be true for a swarm endpoint.\nI think that either we don't let create compose stacks in this situation, or otherwise instead of having a toggle between container and swarm, we will have a select box to choose the type of templates to show\n. The error seems to be here:\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/components/template-list/template-list.js#L34\nit seems like we're filtering by type, but show-swarm-stack will always be true for a swarm endpoint.\nI think that either we don't let create compose stacks in this situation, or otherwise instead of having a toggle between container and swarm, we will have a select box to choose the type of templates to show\n. created\nOn Mon, Aug 13, 2018 at 4:29 PM Anthony Lapenna notifications@github.com\nwrote:\n\n@chiptus https://github.com/chiptus could you open a PR in\nhttps://github.com/portainer/portainer-docs to update the contribution\ndocumentation ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/2146#issuecomment-412559123,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUVF_nutJGT01x55bHD5HmKJVzREDV3ks5uQZtlgaJpZM4V2HHP\n.\n. created\n\nOn Mon, Aug 13, 2018 at 4:29 PM Anthony Lapenna notifications@github.com\nwrote:\n\n@chiptus https://github.com/chiptus could you open a PR in\nhttps://github.com/portainer/portainer-docs to update the contribution\ndocumentation ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/2146#issuecomment-412559123,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUVF_nutJGT01x55bHD5HmKJVzREDV3ks5uQZtlgaJpZM4V2HHP\n.\n. should we let the user rename, delete files? or just upload. should we let the user rename, delete files? or just upload. it is $sanitize that changes the password, but I wonder why you can't login. $sanitize runs also when you make a user, change pass, login, create admin. it is $sanitize that changes the password, but I wonder why you can't login. $sanitize runs also when you make a user, change pass, login, create admin. I was thinking of how to implement this, and I think the right approach is this:\nWith the migration button there will also be a duplication button:\n\n\nClicking on it will create a new stack with the same config as the current stack in the new endpoint. \nShould we allow to create the new stack on the same endpoint? Is that even possible?\n. I was thinking of how to implement this, and I think the right approach is this:\nWith the migration button there will also be a duplication button:\n\nClicking on it will create a new stack with the same config as the current stack in the new endpoint. \nShould we allow to create the new stack on the same endpoint? Is that even possible?\n. - [x] Rename view\n- [x] Remove actual Engine version, engine status and engine plugins panel\n- [x] Create Host details panel\n- [x] Create Engine details panel\n- [x] Create Swarm node details. - [x] Rename view\n- [x] Remove actual Engine version, engine status and engine plugins panel\n- [x] Create Host details panel\n- [x] Create Engine details panel\n- [x] Create Swarm node details. Can you give an example? This is how it works for me:\nI have two endpoints with different tags (1 with foo and the other with bar), when I search for bar I get the second.\nYou mean a more specific search, like tag:bar or something similar?. Can you give an example? This is how it works for me:\nI have two endpoints with different tags (1 with foo and the other with bar), when I search for bar I get the second.\nYou mean a more specific search, like tag:bar or something similar?. I'm not sure if it is suppose to be like that. But when clicking an endpoint it doesn't show any loading bar and screen doesn't change. If the endpoint is offline than ping takes time (a few seconds) in which the user just waits. In the first times I thought my click didn't register so I clicked a few times.. I'm not sure if it is suppose to be like that. But when clicking an endpoint it doesn't show any loading bar and screen doesn't change. If the endpoint is offline than ping takes time (a few seconds) in which the user just waits. In the first times I thought my click didn't register so I clicked a few times.. When following this:\n\nDeploy a dind container that will be used as an endpoint: docker run -d --privileged -p 3000:2375 --name endpoint01 docker:dind\nCreate a new Docker endpoint, use URL: myIP:3000.\nExplore the endpoint via the home view, looks fine. Create a container, go back to home, and click on refresh to trigger a snapshot.\nGo to your local endpoint, and stop the endpoint01 container.\n\nI can open the snapshot of the endpoint, but my created container is not shown in the containers list.\nAfter starting the endpoint01 container and refreshing the endpoints list (this makes a new snapshot?) it works, even after stopping the container.\nI guess that we should update the snapshot when creating new resources. When following this:\n\nDeploy a dind container that will be used as an endpoint: docker run -d --privileged -p 3000:2375 --name endpoint01 docker:dind\nCreate a new Docker endpoint, use URL: myIP:3000.\nExplore the endpoint via the home view, looks fine. Create a container, go back to home, and click on refresh to trigger a snapshot.\nGo to your local endpoint, and stop the endpoint01 container.\n\nI can open the snapshot of the endpoint, but my created container is not shown in the containers list.\nAfter starting the endpoint01 container and refreshing the endpoints list (this makes a new snapshot?) it works, even after stopping the container.\nI guess that we should update the snapshot when creating new resources. we have a potential fix for this, can you try running the agent with image portainer/agent:fix1991 and let us know if it fixes it?\nThanks!. we have a potential fix for this, can you try running the agent with image portainer/agent:fix1991 and let us know if it fixes it?\nThanks!. thanks for checking it, I'll continue to investigate. thanks for checking it, I'll continue to investigate. confirmed. Seems like the object that is sent as the Env property is the same object for the template\n[{name: \"env_var\", label: \"label\", preset: true,\u2026}]\ninstead of something like { \"env_var\":1 } which is what I expected. Might be related, but when I created variables, both were set to preset: true which made it select their default value. also changing a list var to a preset one doesn't clear the select list. just did, still didn't see the group name. I think this is the cause: https://github.com/portainer/portainer/blob/develop/api/http/security/filter.go#L103-L113\n/endpoint_groups returns empty.. Everything is default, I'll make a detailed instructions tomorrow morning\nOn Mon, Jan 14, 2019, 21:03 Anthony Lapenna <notifications@github.com wrote:\n\n@chiptus https://github.com/chiptus Need detailed instructions on how\nto reproduce this. What access policy is set for the user? On the endpoint?\nOn the group?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2308#issuecomment-454121914,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUVF89LJBHFtCJtep0MlsmzVefp8d49ks5vDNSEgaJpZM4W59xb\n.\n. only applies to containers, and work is a really basic draft. ## TODO:\n\n\n[x] refresh list after upload\n[x] upload to a different folder than root\n\nBUGS:\n\n[ ] upload is sort of working. after upload there's a new file with the same name and size, but when downloading, it is corrupted - the original file and the uploaded one has different checksums. and only binaries are getting corrupted, text files work good\n[x] File list isn't consistent with what I see on the host (through terminal)\n[x] if I uploaded files and changed the folder, when I'm back to that folder I don't see the uploaded file (until refresh). \n\nBackend\nIntroduction of a new Schedule entity with the following fields:\n\nName string\nEndpoints []EndpointId\nSchedule string\nScriptPath string\n\nNew API handlers to manage schedules:\n\n/schedules (GET)\n/schedules (POST): should support two different payloads (JSON for script content / form-data for file upload)\n/schedules/:id (GET)\n/schedules/:id (PUT)\n/schedules/:id (DELETE)\n\nLeads for a potential implementation:\n\nIt can re-use the existing cron library to manage scheduling / job executions. When a job is trigger, endpoints that are considered as Down should be ignored for now.\nScripts can be stored on disk in /data/schedules/:scheduleId\nWhen targeting a Swarm + agent environment, all node names in the cluster can be retrieved to execute the job on each node in the cluster\nEach container created as a part of a schedule should have the io.portainer.schedule.ID label set to scheduleID.. ## Implementation details:\n\n1. Schedule service (docker package)\nThis is the interface for handling actions on schedules.\nIt will provide the following methods:\nSchedules(): []Schedules\nSchedule(scheduleId int): returns the schedule object\nCreateSchedule(name string, endpoints [], schedule string, script []byte) : int\nUpdateSchedule(scheduleId int, name string, endpoints [], schedule string, script []byte)\nDeleteSchedule(scheduleId int)\n2. Bolt Schedule Service\nA new service inside the bolt package that is responsible to add, remove, update, get schedules in the db\n3. Cron Schedule Service\nResponsible of scheduling, removing and updating and running tasks schedules in cron\n. TODOs:\n\n[x] Task execution id\n[x] Which bind mounts do we want?\n[ ] Does the container need any name? (maybe somthing like job-exec-${taskId or hash}\n[ ] I had to add bash on the script command, maybe because my script missed a shebang. What would happen if we allow to run non-bash scripts?\n. We narrowed it down to the following bug:\nScenario - running script ls / on ubuntu:latest will cause a Client.Timeout when pulling the image on  a remote endpoint. When running on a local endpoint it works correctly.\nLooking to the insides of cli.PullImage it seems like docker does a http request that timeouts. This \"Client\" is not the docker client but a http client that is used internally by docker.\n\n. I think that an easy fix will be to pull the image by the client, either require it from the user or as we do when creating a container, just call ImageService.pull before executing the job . Host view should query agent only if the agent's api is bigger than some version?\nAnd browse feature should also be different:\nCan browse volumes, but using the old api for agent<=some version.\nCan browse volumes and hosts for agent>=some version.\nIs that correct?\nWhich versions?. - if agent version is v1, the browse button should be disabled with a title - \"Not available for this agent's version\"\n- plus if agent's version is v1, than the new api won't be available, no? so we query the old api url.\n- When does the check for version happens? on the first time the agent is introduced?. There should be some handshake to get the agent's api version. When would that happen? when creating the endpoint? on the snapshot?. > Have a look at how we check for the Docker API version for a potential implementation idea here, I'm not sure that we need to add this backend side.\nThe docker API version is on the endpoint model. That's what I was thinking, that when choosing endpoint it will figure out the agent version (if needed). as far as I understand from stateManager.js#L155, it is retrieved from the backend with /version call. I think this is a good direction, i'll add a ping method on the agentService. maybe, instead of pinging, just add a method /version that will give me the version? or /agent_version\n. Yes. When setting the endpoint model, the default would be version 1, unless this call works, and then the version will be set according to this. I can't reproduce and everything works as expected, but I think @Codelica is right. the function shouldn't be called immediately, but wait for pullImageIfNeeded to return, so something similar to his suggestion should be introduced.\nI'll make the fix and publish an image you can try to see if it helps . Can you please try running with image portainerci/portainer:fix2379-stop-container-after-pull?. @Codelica can you pull the image again and check if it's working for you, I removed the bind as oldContainer is in the function closure anyway. confirmed, it's related to the structure of the registry url. we look only for a domain, while the url in this issue includes a path. \nanother issue is that when using localhost, it ignores the registry and tries to push to dockerhub. \nlook in https://github.com/portainer/portainer/blob/6b05a3588142a9279f4d363c8a679d3380243caf/app/portainer/services/api/registryService.js#L69 \nand in https://github.com/portainer/portainer/blob/develop/app/docker/helpers/imageHelper.js#L7-L20\nit always separates the string based on the first slash. a quick fix will be to leave that as it is, and when search for repository by url (RegistryHelper.getRegistryByURL(data, imageDetails.registry);) we will do a check for existing substring instead of equality check.. @pch18, I made a fix, can you try running portainer with the image portainerci/portainer:fix2388-find-registry-by-url-segment. can you give more details about your environment, and what steps to reproduce?. About the build size - this is only for dev, on production (try running yarn build:client) it is much smaller.\nbuild speed - should be faster after first run, I'll check it again, clean should run only on the first run. Edit: after testing, it works as expected. changing some code in the codebase while the dev server is running (yarn start:client) results in a build time of less than 1s\nHot reload doesn't work (it's pretty hard to implement), what works is that the page refresh when there's a new build. @xAt0mZ did you try the app, didn't find any bugs?. that's great to hear.\npage reload will work when you run yarn start:client this will open a new window on localhost:8999 which serves as proxy to the dev server.\n localhost:9000 will still serve portainer but without the page reload. Yes, probably the additional kb is because of babel. \nI preferee to merge this before and then to think about other optimization, as any rebase from develop takes more work.\nI'll make a list of future tasks. I guess I'm still subscribed to this thread. It seems like dynamic imports\nare possible in angularjs but require more configurations than just using\nthe import function.\nInitially when creating this PR I planned to do this later on a different\nPR.\nYou can have a look on this article https://link.medium.com/oeNCce8P1U\nOn Wed, Mar 13, 2019, 18:57 baron_l notifications@github.com wrote:\n\nHere are the errors I faced during the testing on\nportainerci/portainer:pr2407\nNetwork details\n[image: 2019-03-13-173158_1920x1080_scrot]\nhttps://user-images.githubusercontent.com/7642331/54298056-5abac780-45b8-11e9-89e2-bbc1616b85de.png\nService creation\n[image: 2019-03-13-172453_1920x1080_scrot]\nhttps://user-images.githubusercontent.com/7642331/54298057-5abac780-45b8-11e9-8333-d5c206e9742e.png\nService edit\n[image: 2019-03-13-172113_1920x1080_scrot]\nhttps://user-images.githubusercontent.com/7642331/54298061-5b535e00-45b8-11e9-8350-c1c63d217135.png\nNodes details - dropdown sometimes not working (may be related to my\nbrowser)\n[image: 2019-03-13-172413_1920x1080_scrot]\nhttps://user-images.githubusercontent.com/7642331/54298058-5b535e00-45b8-11e9-9345-1eee3f1b5a15.png\nConfig creation\n[image: 2019-03-13-172244_1920x1080_scrot]\nhttps://user-images.githubusercontent.com/7642331/54298060-5b535e00-45b8-11e9-9ed6-2922dd5d2e43.png\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/pull/2407#issuecomment-472511825,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUVF6E7JwgnVvMyudpMC-NtyzN8wSFfks5vWS3igaJpZM4X914h\n.\n. confirmed\n\ninput field are not populated on initView and thus they are sent empty to create, so the new container doesn't have the same config. This can be fixed in two ways - either add the endpoint id to the url, or redirect from dashboard to home when endpoint is not available.\nI think the second option is easier in the short run, but then we need to consider adding this redirect to every endpoint route (/containers /images), the first option also makes sure that when we copy paste the url we will get the same endpoint.\nI'll check what is needed to do in both options.\n. As I thought the second option is much easier, but i still think the first one is better. this is confirmed, did exactly the steps mentioned. I'm not sure if the fix is what required, as it might fix this error, but not sure about what it causes other logs.\nnot sure what is the required behavior of logHelper.formatLogs. I also saw these problems, sounds like a duplicate of #2552 . confirmed using simple setup of https://github.com/deviantony/vagrant-swarm-cluster and current agent dev version\njust adding the swarm endpoint and trying to connect using console confirmed this bug. the PR changes has been moved to #2565 . I think the easiest workaround would be to link to the network name instead of the id. I checked that it works.. ```\nClient:\n Version:           18.09.1\n API version:       1.39\n Go version:        go1.10.6\n Git commit:        4c52b90\n Built:             Wed Jan  9 19:35:36 2019\n OS/Arch:           linux/amd64\n Experimental:      false\nServer: Docker Engine - Community\n Engine:\n  Version:          18.09.1\n  API version:      1.39 (minimum version 1.12)\n  Go version:       go1.10.6\n  Git commit:       4c52b90\n  Built:            Wed Jan  9 19:02:44 2019\n  OS/Arch:          linux/amd64\n  Experimental:     false\n. so what state should these containers be? running?\nI mean, if not, the count will not amount to total containers. sure, I'll remove it. ok. hmm, so I should also change the total amount to sum the running and stopped containers?. In other places where it isn't a swarm, you're expecting the right number, without a filter, no?\nI think it should be consistent. It makes it easier to see the components' API. you just need to look at the first few lines of the controller.. +1. yes, my component is expecting a promise so it can stop the `duplication/migrationInProcess` spinner. because if I change `stack.name` then on delete it tries to delete a stack with the new name. Might be better to pass to deletestack only the relevant parameters (stack name and anything else it needs), but I think this function is used in different places so it expects the stack object. it was used somewhere, but I removed it. should be TitleCamelCased:\n{ \n  File: file,\n  Image: imageName\n}\n``. Did you run some code-style tool? There are many changes in this file that are not related to this PR, makes it hard to review. useswitch?. Probably like in L167 - just volumes.Volumes. I'm not sure how, but the interceptors code is repeating itself. Maybe there's a way to make it DRY?. since it's the same information-panel. Maybe we can make a component out of this?. Maybe use JSON.parse/stringify?. I think endpoint provider should have.setEnpointfunction, I guess this happens anytime on changing endpoint. Anything was changed here beside code style? If it's only style I don't think it should be in this PR. Is that for seeing the script response? You can see it on the container's logs. no, the ping api isagentUrl/ping. I think we should use the new service, because we will need this change anyway one day, so why not do it now when we're on it?. I will fix it. this is fixed with the change in the version 1 browse service. I need the hostname to get the host-info, thus relying onSystemService.info()`. the catch on line 171 will catch it. ",
    "iwater": "any update for this bug? same on AWS AMI2. ",
    "briankabiro": "Would like to work on this. Have raised a PR for the same. \ud83d\ude03 . Would like to work on this issue. \u270b . Would the preference be to show the row and set the value as - if it's empty or not show the row completely if the field is empty?. Thanks, Tony. Let me get to work on it. \ud83d\udc4d . Hi @deviantony - I would like to work on this!\nAre we okay with the solution proposed where we default to Hostname when the Name hasn't been provided?. Thanks for the prompt response!. Hi Tony. I'll take a look at it again and make the necessary changes.. Hi @deviantony. I've made the changes and it should be okay now. Let me know if there's any refactoring I'll need to do.. Thanks, Tony. I'll take a look at it and update. . Hey, @deviantony!  I've made the requested changes(been a while \ud83d\ude09) - thanks again for the pointers. ",
    "fsx999": "no i don't.\nI only do http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\nI have nginx in reverse proxy mode + a swarm (1 manager, 6 nodes).. no i don't.\nI only do http://portainer.readthedocs.io/en/stable/deployment.html#inside-a-swarm-cluster\nI have nginx in reverse proxy mode + a swarm (1 manager, 6 nodes).. I try with a new installation : \n2018/06/25 14:31:25 Instance already has defined endpoints. Skipping the endpoint defined via CLI.\n2018/06/25 14:31:25 Starting Portainer 1.18.0 on :9000\n2018/06/25 14:32:56 http error: error during connect: Get https://tasks.agent:9001/v1.37/info: Forbidden\n(err=error during connect: Get https://tasks.agent:9001/v1.37/info: Forbidden) (code=500). I try with a new installation : \n2018/06/25 14:31:25 Instance already has defined endpoints. Skipping the endpoint defined via CLI.\n2018/06/25 14:31:25 Starting Portainer 1.18.0 on :9000\n2018/06/25 14:32:56 http error: error during connect: Get https://tasks.agent:9001/v1.37/info: Forbidden\n(err=error during connect: Get https://tasks.agent:9001/v1.37/info: Forbidden) (code=500). i do : docker stack deploy portainer -c docker-compose.yml with : \n```\nversion: '3'\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.agent\n      # AGENT_PORT: 9001\n      LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - agent_network\n    deploy:\n      mode: global\nportainer:\n    image: portainer/portainer\n    command: -H tcp://tasks.agent:9001 --tlsskipverify\n    environment:\n      - HTTPS_PROXY=http://192.168.0.1:3128\n      - HTTP_PROXY=http://192.168.0.1:3128\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - portainer_data:/data\n    networks:\n      - agent_network\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\nnetworks:\n  agent_network:\n    driver: overlay\nvolumes:\n  portainer_data:\n```\nI am on gitter if you want. i do : docker stack deploy portainer -c docker-compose.yml with : \n```\nversion: '3'\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.agent\n      # AGENT_PORT: 9001\n      LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - agent_network\n    deploy:\n      mode: global\nportainer:\n    image: portainer/portainer\n    command: -H tcp://tasks.agent:9001 --tlsskipverify\n    environment:\n      - HTTPS_PROXY=http://192.168.0.1:3128\n      - HTTP_PROXY=http://192.168.0.1:3128\n    ports:\n      - \"9000:9000\"\n    volumes:\n      - portainer_data:/data\n    networks:\n      - agent_network\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\nnetworks:\n  agent_network:\n    driver: overlay\nvolumes:\n  portainer_data:\n```\nI am on gitter if you want. You get it !\nWithout the HTTP_PROXY/HTTPS_PROXY environment variables it's work !!!\nBut not the app template :(\nBut i prefer without the app template.\n. You get it !\nWithout the HTTP_PROXY/HTTPS_PROXY environment variables it's work !!!\nBut not the app template :(\nBut i prefer without the app template.\n. It's possible, i will search it (it's not my proxy).\nThanks for your help.. It's possible, i will search it (it's not my proxy).\nThanks for your help.. ",
    "rems": "There is nothing in this directory\nshell\n/opt/portainer# tree -al\n.\n\u251c\u2500\u2500 compose\n\u251c\u2500\u2500 config.json\n\u251c\u2500\u2500 portainer.db\n\u251c\u2500\u2500 portainer.key\n\u251c\u2500\u2500 portainer.pub\n\u2514\u2500\u2500 tls. ",
    "ijzerbroot": "Thank you for your quick response!\nI upgraded by removing the existing stack and then creating it using the supplied yaml. (docker stack rm portainer && docker stack deploy -c yamlfile portainer). The number of nodes was correct (4 in my case)\nI have in the meantime decided to reboot the swarm and it seems this fixes my issue!\nI am now a bit concerned that the \"bug\" is not in fact a portainer-issue and I may have wasted your time, for which I apologize.\nShall i keep this one open in case you wish to determine whether the reboot is a necessity or rather a circumstantial site-specific issue ?\nI should\n. Thank you.\nFWIW: I tried the procedure again (after reboot) but this time using a stack-redeployment rather than first removing it.\nThis time I did not need to reboot after going from 1.17.1 to 1.18. I am not sure if that would have worked the first time; it's quite possible my Linux-nodes or Docker were troublesome before the reboot; this swarm does get software-updates from time-to-time and I tend to not restart if there has not been a kernel-update. Perhaps I should have.\nThank you for an amazing product; it's generally behaved admirably :). ",
    "salcedo": "external_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 08:52:06 http error: invalid argument \"/data/compose/\\\"/stacks/drupal7/docker-stack.yml\" for \"-c, --compose-file\" flag: line 1, column 14: bare \" in non-quoted-field\nexternal_portainer.1.weq8ha1uyu58@scanlan    | See 'docker stack deploy --help'.\nexternal_portainer.1.vec5arjz2qwt@scanlan    | ) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    |  (err=invalid argument \"/data/compose/\\\"/stacks/drupal7/docker-stack.yml\" for \"-c, --compose-file\" flag: line 1, column 14: bare \" in non-quoted-field\nexternal_portainer.1.weq8ha1uyu58@scanlan    | See 'docker stack deploy --help'.\nexternal_portainer.1.weq8ha1uyu58@scanlan    | ) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 08:52:23 http error: invalid argument \"/data/compose/\\\"/stacks/drupal7/docker-stack.yml\" for \"-c, --compose-file\" flag: line 1, column 14: bare \" in non-quoted-field\nexternal_portainer.1.weq8ha1uyu58@scanlan    | See 'docker stack deploy --help'.\nexternal_portainer.1.weq8ha1uyu58@scanlan    |  (err=invalid argument \"/data/compose/\\\"/stacks/drupal7/docker-stack.yml\" for \"-c, --compose-file\" flag: line 1, column 14: bare \" in non-quoted-field\nexternal_portainer.1.weq8ha1uyu58@scanlan    | See 'docker stack deploy --help'.\nexternal_portainer.1.weq8ha1uyu58@scanlan    | ) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:04:22 http error: read /data/compose/: is a directory\nexternal_portainer.1.weq8ha1uyu58@scanlan    |  (err=read /data/compose/: is a directory\nexternal_portainer.1.weq8ha1uyu58@scanlan    | ) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:07:34 http error: Unable to clone git repository (err=repository already exists) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:07:41 http error: Unable to clone git repository (err=repository already exists) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:08:03 http error: Unable to clone git repository (err=repository already exists) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:08:34 http error: Unable to clone git repository (err=repository already exists) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:27:23 http error: Unable to retrieve Compose file from disk (err=open /data/compose/34/docker-compose.yml: no such file or directory) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:27:38 http error: Unable to retrieve Compose file from disk (err=open /data/compose/14/docker-compose.yml: no such file or directory) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:27:51 http error: Unable to retrieve Compose file from disk (err=open /data/compose//stacks/drupal7/docker-stack.yml: no such file or directory) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:28:08 http error: Unable to retrieve Compose file from disk (err=open /data/compose//stacks/drupal7/docker-stack.yml: no such file or directory) (code=500)\nexternal_portainer.1.weq8ha1uyu58@scanlan    | 2018/06/25 09:33:38 http error: Unable to retrieve Compose file from disk (err=open /data/compose//stacks/drupal7/docker-stack.yml: no such file or directory) (code=500)\n. inside Portainer's /data/compose:\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 ?\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 !\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 #\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 $\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 %\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 &\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 '\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 (\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 )\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 *\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 +\ndrwxr-xr-x    5 root     root          4096 Jun 25 09:07 -\ndrwx------   40 root     root          4096 Jun 25 09:17 .\ndrwxr-xr-x    4 root     root          4096 Jun 25 04:47 ..\ndrwxr-xr-x    4 root     root          4096 Jun 25 09:07 .git\n-rw-r--r--    1 root     root           339 Jun 25 09:07 .gitignore\ndrwxr-xr-x    7 root     root          4096 Jun 25 09:11 0\ndrwxr-xr-x    7 root     root          4096 Jun 25 09:12 1\ndrwxr-xr-x    7 root     root          4096 Jun 25 09:13 2\ndrwxr-xr-x    7 root     root          4096 Jun 25 09:14 3\ndrwx------    7 root     root          4096 Jun 25 09:15 4\ndrwx------    2 root     root          4096 Jun 25 09:10 47\ndrwx------    2 root     root          4096 Jun 25 09:17 53\n-rw-r--r--    1 root     root           653 Jun 25 09:07 README.md\n-rw-r--r--    1 root     root           447 Jun 25 09:07 Vagrantfile\n-rw-r--r--    1 root     root           151 Jun 25 09:07 config.tf.dist\ndrwxr-xr-x    2 root     root          4096 Jun 25 09:07 configs\n-rw-r--r--    1 root     root           283 Jun 25 09:07 main.tf\ndrwxr-xr-x    4 root     root          4096 Jun 25 09:07 management-site\ndrwxr-xr-x    3 root     root          4096 Jun 25 09:07 playbooks\ndrwxr-xr-x    9 root     root          4096 Jun 25 09:07 stacks\nOK... THIS.... is bad. WTF?. Was so frustrated over this. Lost much sleep. Had to edit issue a couple times to cut back on the language. Thank you @deviantony :1st_place_medal: . ",
    "stefano-gristina": "Hi,\nThe standalone docker is one straight Docker Engine, not a cluster with one node.\nI already used docker version 2. Infact:\nversion: '2.3'\nservices:\nnginx:\nimage: nginx\nports:\n- 180:80\nAll endpoint are configured with TLS authentication. In this moment, I cannot create stack in no TLS protected endpoint.\nStefano. I think that the problem is how portainer pass the tls stuff to libcompose. Portainer should use the certification, key and ca, configured for the node involved.\nStefano. An update.\nWithous TLS authentication, it works but in the stack page two stacks are showed. \nThe first is without containers and contains the docker-compose file and the access is Total as configured.\nThe second contains the containers running but it's restricted without docker-compose.\nBest Regards\nStefano. News about it?\nThis functionality would be very much appreciated.\nStefano\n. 1.18.1 . Hi,\nI get this error:\n2018/07/17 13:15:33 http error: Unable to clone git repository (err=repository already exists) (code=500)\nThis works:\ngit clone http://10.20.20.201:8999/repos/test.git\nCloning into 'test'...\nUsername for 'http://10.20.20.201:8999': dvps\nPassword for 'http://dvps@10.20.20.201:8999': \ncd test\nls\ngit-server  stack-haproxy.yml  test.txt\nIf I create stack by GUI with these parameters I get the error above::\nRepository URL: http://10.20.20.201:8999/repos/test.git\nCompose path:stack-haproxy.yml \nRegards\nStefano. I downloaded the portainer 1.19.1 and the problem continue to persist.. I deleted inside /data/compose the directory test_p6jf28m105ht3bs34lo3i6tdq that was the only with .git directory. Now I have this error:\n2018/07/30 14:08:17 http error: Unable to clone git repository (err=object not found) (code=500)\nThis command works: \ngit clone http://10.2.2.2:8999/repos/test.git\ncd test\nls\nstack-haproxy-01.yml\nBy Portainer, I put:\nRepository URL: http://10.2.2.2:8999/repos/test.git\nCompose path: stack-haproxy-01.yml\nUsername and password.\nBest Regards\nStefano\n. @deviantony All the directories with integers contain docker-compose.yml already used and I cannot delete it.. @deviantony The folder with the highest number is 43:\nls -tlr\ntotale 84\ndrwx------. 2 root root 4096 17 ott  2017 3\ndrwx------. 2 root root 4096 17 ott  2017 4\ndrwx------. 2 root root 4096 17 ott  2017 6\ndrwx------. 2 root root 4096 28 feb 19.19 5\ndrwx------. 2 root root 4096 28 feb 19.19 2\ndrwx------. 2 root root 4096 11 apr 18.05 10\ndrwx------. 2 root root 4096 13 apr 18.59 12\ndrwx------. 2 root root 4096 20 apr 12.31 8\ndrwx------. 2 root root 4096 20 apr 15.56 9\ndrwx------. 2 root root 4096 25 apr 23.12 1\ndrwx------. 2 root root 4096 18 mag 14.33 11\ndrwx------. 2 root root 4096 28 mag 11.35 14\ndrwx------. 2 root root 4096 12 giu 12.26 16\ndrwx------. 2 root root 4096 19 giu 14.48 17\ndrwx------. 2 root root 4096 26 giu 09.55 18\ndrwx------. 2 root root 4096 29 giu 10.02 20\ndrwx------. 2 root root 4096 27 lug 10.48 32\ndrwx------. 2 root root 4096 27 lug 12.46 34\ndrwx------. 2 root root 4096 27 lug 13.12 35\ndrwx------. 2 root root 4096 27 lug 16.53 36\ndrwx------. 2 root root 4096 30 lug 17.48 43\nls -ltr 43\ntotale 11\n-rw-------. 1 root root 10828 30 lug 17.57 docker-compose.yml\nBut docker-compose.yml contains the last stack added in swarm. If I delete this 43, I will lost it. Right it?. @deviantony . Here the log:\n2018/08/01 09:06:41 [DEBUG] - Stack identifier: 44\n2018/08/01 09:06:41 [DEBUG] - Stack object: &{ID:44 Name:stack-test-git Type:1 EndpointID:21 SwarmID:p6jf28m105ht3bs34lo3i6tdq EntryPoint:stack-haproxy-01.yml Env:[] ProjectPath:/data/compose/44}\n2018/08/01 09:06:41 [DEBUG] - Git clone parameters: &{url:http://10.2.2.2:8999/repos/test.git referenceName: path:/data/compose/44 authentication:true username:xxxxxxxxx password:xxxxxxxxx}\n2018/08/01 09:06:41 http error: Unable to clone git repository (err=object not found) (code=500)\n  [root@docker-01~]# ls -ltr /gfs/portainer/compose/\ntotal 84\ndrwx------. 2 root root 4096 Oct 17  2017 3\ndrwx------. 2 root root 4096 Oct 17  2017 4\ndrwx------. 2 root root 4096 Oct 17  2017 6\ndrwx------. 2 root root 4096 Feb 28 19:19 5\ndrwx------. 2 root root 4096 Feb 28 19:19 2\ndrwx------. 2 root root 4096 Apr 11 18:05 10\ndrwx------. 2 root root 4096 Apr 13 18:59 12\ndrwx------. 2 root root 4096 Apr 20 12:31 8\ndrwx------. 2 root root 4096 Apr 20 15:56 9\ndrwx------. 2 root root 4096 Apr 25 23:12 1\ndrwx------. 2 root root 4096 May 18 14:33 11\ndrwx------. 2 root root 4096 May 28 11:35 14\ndrwx------. 2 root root 4096 Jun 12 12:26 16\ndrwx------. 2 root root 4096 Jun 19 14:48 17\ndrwx------. 2 root root 4096 Jun 26 09:55 18\ndrwx------. 2 root root 4096 Jun 29 10:02 20\ndrwx------. 2 root root 4096 Jul 27 10:48 32\ndrwx------. 2 root root 4096 Jul 27 12:46 34\ndrwx------. 2 root root 4096 Jul 27 13:12 35\ndrwx------. 2 root root 4096 Jul 27 16:53 36\ndrwx------. 2 root root 4096 Jul 30 17:48 43. @deviantony .Yes.. It works........... ",
    "gnought": "For a standalone docker engine, I could confirm that the portainer stack works in non-TLS, but NOT for TLS endpoint. Portainer will prompt \"Could not load X509 key pair: open /.docker/cert.pem: no such file or directory\". ",
    "theatricshrink": "This issue can be solved. Upgrading solved it. Thanks. ",
    "CooleRnax": "here is my stack\n```yml\nversion: '3.6'\nservices:\n  agent:\n    image: portainer/agent:latest\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    networks:\n      - agent_network\n    deploy:\n      mode: global\n  main:\n    image: portainer/portainer:latest\n    command: -H tcp://tasks.agent:9001 --tlsskipverify --ssl\n    ports:\n      - \"9000:9000\"\n    environment:\n      VIRTUAL_HOST: myhost\n      VIRTUAL_PROTO: https\n      LETSENCRYPT_HOST: myhost\n      LETSENCRYPT_EMAIL: myemail\n    volumes:\n      - /home/docker/portainer:/data\n      - /mycert:/certs/portainer.crt\n      - /mykey:/certs/portainer.key\n    networks:\n      - agent_network\n      - web_network\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\n      restart_policy:\n        condition: any\n    depends_on:\n      - \"agent\"\nnetworks:\n  agent_network:\n    driver: overlay\n  web_network:\n    external: true\n    name: web_network\n```. I mean that I can't see NAT node at dashboard (Nodes in the cluster),\nand I also can't see containers, images, networks and volumes of that node.\nBut I can see NAT node at services and Swarm visualizer.. I have resolved the issue. I needed to specifi WAN --advertise-addr when joined the swarm.. ",
    "tvdstaaij": "I can take a look at it in a week or so, leaving for vacation right now. Template management sounds promising!. I saw 776 but the reason I didn't consider this a dupe is that it looks like this was actually intended to work, since the relevant function takes into account the hostPort property. It is just not set on the model, I assume this was unintentional, because of the above and because it makes little sense to have three form fields per mapping and accept the Docker command line format to fill those, but then ignore the delimiter of the first two fields. So I still think this is good to fix if the current single-string format will still be supported for backwards compatibility, because the behavior goes against user expectation and the fix is highly trivial and non-breaking. If the old format will be dropped anyway this is indeed a non-issue. Cheers!. ",
    "sagar-chandarana": "I.E. the name of the user who is logged in. Ideally, we want to to able to pass this username as an environment variable to the stack. @deviantony we want it to be automated for the user, not give him a choice to define something else. Based on this username, we are mounting secrets and private keys into the container. Wrong username can reveal others' private keys.. ",
    "derDieDasJojo": "it was a reconnecting issue.\nthe provider had routing problems and afterwards not everything seem to have reconnected correctly.\ni restarted portainer and all portainer-agents.\nNow it works again. ",
    "lukey78": "Hi @deviantony, ok that works, thanks. Is that somewhere mentioned in the API docs?\nSo the correct way would be query-filtering the container list (that should work on each node for the whole swarm?), fetching out the \"NodeName\" and then specifically target that node with the X-Portainer-Agent-Target header?\n. ",
    "bluestingray": "@lukey78 Is there an issue opened up for documentation? Or has that already been closed out? I didn't see anything related to \"X-Portainer-Agent\" after a few searches.\nI'm just looking into how do I go about adding a header to the portainer agent requests in a swarm setup?. ",
    "seal-ss": "Woot \ud83c\udf89 . Yes, still fine for 1709 and 1803 windows images.. ",
    "ragaar": "Just to confirm, Will the final command look something like this?\ndocker run -d -p 9000:9000 -u ContainerAdministrator --name portainer --restart always -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine portainer/portainer. @deviantony\nDoesn't look like it's tied to Window's pipe-engine. So, you might create a new issue. Though, I think what you're encountering could be referenced in the documentation.\nI'd simplify the command you're running down to minimum inputs required and scale up from there to figure out which command is causing the error.\nAlso, just for reference you defined a data volume but to use it your volume command would look more like this: -v portainer_data:drive:\\path\\in\\container.\nFull disclosure: I've not done much with volumes in Windows, so I can't confirm the direction of the \\ from memory. But that problem, I know, is easy to find online :). Ahhh! That makes more sense. I don't have Windows either! lol. ",
    "guidoffm": "\n. ",
    "MGStudio": "For information I have try to create a simple stack with this docker-compose \n```\nversion: '2'\nservices:\n  redis:\n    image: redis:alpine\n  redis2:\n    image: redis:alpine\n```\nAnd the results is the same 2 stack are created \n\nI wanted to try this on the demo portainer, but the website is actually down.\n. ",
    "Aaron-K-T-Berry": "Id just like to add that this same bug also occurs when the first letter of the stack name is a capital letter even when all characters in the stack name are only a to z. ",
    "RotasOpera": "Can confirm bug is still present on 1.20.0. ",
    "PranavSathy": "Out of curiosity, did you encounter the issue in #1962 or has this been fixed ? I was having issues with Re-Create but did not experience these issues.. ",
    "keabarnes": "From what I remember about the problem, I wasn't able to ever re-create - it wasn't allowing me to get that far in the edit screen. ",
    "panay": "Yes, via Portainer. And I want to edit my theme like on a local computer with an automatic deploy to the Portainer.. OK, and how to edit files by the Portainer's console? I cannot do it.. I cannot do it. And I dunno why.\nI text: apt-get install nano and get a message: E: Unable to locate package nano. OMG, I updated the apt-get and it is working.. Thanks for your patience!. Oh, I'm sorry. I did logout and then did login again, and the problem was solved.. ",
    "vovecudalec": "Unfortunately, I cannot share this image. I have attached additional logs.\nlog.txt. ",
    "kfrajtak": "Great! Thanks for help.. ",
    "NigelKitcher": "@DjTrilogic  I only use Windows images so I took a fork and modified libcompose to get it to work. If you want to know what I changed drop a reply in here and I'll dig it out. I don't use Linux images so I've not fully tested. IIRC there is an item here about whether to continue to use libcompose or not?. @mersadk You may want to read this one https://github.com/portainer/portainer/issues/2054 as it also involves libcompose support.\n. Not something I have an immediate need for but I can see it would help to provide some custom self-servicing to the users. I'd want it to be able to run Powershell as well however as we're on Windows.. Hi @deviantony \nNo worries - we're just seeing what works well at the moment. \nThe preset value is a good option and one we will being proposed for QA (as we'll be adding and deleting templates using the Portainer API on each build so only a handful of them exist at a time and everything will be the same - apart from the image version tag). \nWhen it comes to Production the thinking so far has been to limit the number of templates to previous, current and next product version and to pull the customisations in. \nIf you're happy that Portainer will be ok with potentially hundreds of templates existing at a time then we can certainly write the scripts to push/sync the customisations  out as they are changed to the templates. It would then just be a case of letting the end users trialling them both and seeing what the UX is like.. @turbo On the global environment variables that sounds like something we have implemented (see issue https://github.com/portainer/portainer/issues/2411) to pull values out from a data source (currently an Excel spredsheet although we were thinking of extending it to be via ODBC). I'm planning on getting the changes up into my public repository shortly.\nIs that the sort of thing you have in mind? . Have you tried lower case only?. Have you looked at creating templates by calling the Portainer API? I do this to create templates using a simple Powershell script.\n. That -v isnt correct for Windows so it? \nShouldn't \"/var/run/docker.sock\" be npipe:////./pipe/docker_engine as its Windows not Linux?. ",
    "mersadk": "Are there any updates on this? I received this error on Windows Server 2019 machine with Docker Enterprise Edition.. I've switched to single node swarm setup but now I can't access any of my containers. I expose port 55500 but can't access it with localhost:55500. Do I need to run anything else besides docker swarm init?\nWhen I manualy change network of container to nat, it works.\nI'm running it on Windows Server 2019 with Docker Enterprise.. ",
    "vboufleur": "@deviantony How do I make the default value be automatically put in the input text box then? Which version should we pull?. Cool! Thanks a lot. @deviantony You know any way that I can make Portainer be more verbose about the error it's having while cloning? The API returns only this for me, and it's insufficient debug information:\n{\"err\":\"Unable to clone git repository\",\"details\":\"object not found\"}. Another thing, I've searched go-git repo for open and closed issues regarding submodules with this search term: is:issue submodule\nFound nothing related to the error I'm having, unfortunately.. I found the issue and I fixed it here.\nI went to the submodule and ran git checkout master. When using master portainer was able to clone the repo and use it successfully.\nSeems like the issue was because the submodule was in a \"Detached head state\" on the commit that the submodule is registered on the parent master.. That flag would be great! Right now I'm manually setting the Dockerhub credentials post deployment.. ",
    "danieldaeschle": "I also get an error with this. Cannot use portainer then. When will this be fixed?. yes i tried this too but it didn't worked for me... hmm. ",
    "Zebradil": "Okay, I see. Thanks for the explanation!. Not entirely. The idea was to avoid logging to the machine for manipulation with docker applications. So I created private git repos with all required configurations for particular application. But as soon as it's not possible to use relative paths in docker-compose.yml with portainer, I decided to just manage applications through terminal as it was before.\nSo, if it's not a bug, then it could be a feature request. But feel free to close this issue, if you don't need it anymore.. @olljanat I didn't know about config. I'll check it.\n@deviantony That's what I was trying to do, actually. But to be completely sure, I will create clean public repo to reproduce that.. I made a clean example, and the error appeared again.\nHere is the the repo: https://github.com/Zebradil/portainer-test\nIn the root directory of the repo:\n- docker-compose.yml\n- hosts\n- testdir/testfile\ndocker-compose.yml\n```yaml\nversion: \"2\"\nservices:\n  taskwarriorweb:\n    image: alpine:latest\n    volumes:\n      - ./testdir:/root/testdir\n      - ./hosts:/etc/hosts\n```\nAnd here are portainer logs for a stack creation:\nCreating network \"testingstack_default\" with driver \"\"\ntime=\"2018-07-17T12:41:01Z\" level=info msg=\"[0/1] [taskwarriorweb]: Starting \"\nPulling taskwarriorweb (alpine:latest)...\nlatest: Pulling from library/alpine\n8e3ba11ec2a2: Pulling fs layer\n8e3ba11ec2a2: Verifying Checksum\n8e3ba11ec2a2: Download complete\n8e3ba11ec2a2: Pull complete\nDigest: sha256:7043076348bf5040220df6ad703798fd8593a0918d06d3ce30c6c93be117e430\nStatus: Downloaded newer image for alpine:latest\ntime=\"2018-07-17T12:41:04Z\" level=error msg=\"Failed Starting taskwarriorweb : Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused \\\"process_linux.go:402: container init caused \\\\\\\"rootfs_linux.go:58: mounting \\\\\\\\\\\\\\\"/data/compose/1/hosts\\\\\\\\\\\\\\\" to rootfs \\\\\\\\\\\\\\\"/var/lib/docker/overlay2/e7201dbb44683763c692db3c8482efb8b091dcc879b8d67e5c684f07d9746c06/merged\\\\\\\\\\\\\\\" at \\\\\\\\\\\\\\\"/var/lib/docker/overlay2/e7201dbb44683763c692db3c8482efb8b091dcc879b8d67e5c684f07d9746c06/merged/etc/hosts\\\\\\\\\\\\\\\" caused \\\\\\\\\\\\\\\"not a directory\\\\\\\\\\\\\\\"\\\\\\\"\\\": unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type\"\ntime=\"2018-07-17T12:41:04Z\" level=error msg=\"Failed to start: taskwarriorweb : Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused \\\"process_linux.go:402: container init caused \\\\\\\"rootfs_linux.go:58: mounting \\\\\\\\\\\\\\\"/data/compose/1/hosts\\\\\\\\\\\\\\\" to rootfs \\\\\\\\\\\\\\\"/var/lib/docker/overlay2/e7201dbb44683763c692db3c8482efb8b091dcc879b8d67e5c684f07d9746c06/merged\\\\\\\\\\\\\\\" at \\\\\\\\\\\\\\\"/var/lib/docker/overlay2/e7201dbb44683763c692db3c8482efb8b091dcc879b8d67e5c684f07d9746c06/merged/etc/hosts\\\\\\\\\\\\\\\" caused \\\\\\\\\\\\\\\"not a directory\\\\\\\\\\\\\\\"\\\\\\\"\\\": unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type\"\n2018/07/17 12:41:04 http error: Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused \"process_linux.go:402: container init caused \\\"rootfs_linux.go:58: mounting \\\\\\\"/data/compose/1/hosts\\\\\\\" to rootfs \\\\\\\"/var/lib/docker/overlay2/e7201dbb44683763c692db3c8482efb8b091dcc879b8d67e5c684f07d9746c06/merged\\\\\\\" at \\\\\\\"/var/lib/docker/overlay2/e7201dbb44683763c692db3c8482efb8b091dcc879b8d67e5c684f07d9746c06/merged/etc/hosts\\\\\\\" caused \\\\\\\"not a directory\\\\\\\"\\\"\": unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type (err=Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused \"process_linux.go:402: container init caused \\\"rootfs_linux.go:58: mounting \\\\\\\"/data/compose/1/hosts\\\\\\\" to rootfs \\\\\\\"/var/lib/docker/overlay2/e7201dbb44683763c692db3c8482efb8b091dcc879b8d67e5c684f07d9746c06/merged\\\\\\\" at \\\\\\\"/var/lib/docker/overlay2/e7201dbb44683763c692db3c8482efb8b091dcc879b8d67e5c684f07d9746c06/merged/etc/hosts\\\\\\\" caused \\\\\\\"not a directory\\\\\\\"\\\"\": unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type) (code=500). No, I have a single machine with a portainer instance running on it.. Thanks! Please, tell me if you need any assistance with that.. ",
    "CamoMacdonald": "The container its self is removed - just the old network that isn't, what's very strange,\n\nOnce selecting recreate we see the above, followed by the newly created container being in the created state. \n\n. ",
    "earlgrei": "I can confirm this is happening in under 1.19.0.  It happened with the server that portainer is running on and did not happen before upgrading to 1.19.0.\nVersion | 18.03.1-ce\nAPI version | 1.37\nGo version | go1.9.5\nOS type | linux\nOS | Ubuntu 16.04.4 LTS\nArchitecture | amd64\nKernel version | 4.4.0-116-generic\nCommand: docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v SYS_Portainer:/data --mac-address=\"02:42:ac:11:00:aa\" --name SYS_Portainer --restart unless-stopped portainer/portainer:latest \n. ",
    "wangkai1994": "@deviantony result in command line is correct. There is 3 running tasks in Portainer but result in command line only have 2 running tasks(correct). @deviantony but the response is right\uff0cresult on website front is incorrect. @deviantony docker service create  --name portainer  --network portainer_agent_network     --publish 9000:9000   --replicas=1     --constraint 'node.hostname == s3-test-dk.fdd'     --mount type=bind,src=/data0/portainer,dst=/data     portainer/portainer -H \"tcp://tasks.portainer_agent:9001\" --tlsskipverify. @deviantony i think is front framework(or something in frontend) bug, because post response is correct. @deviantony container console crash when i send command. I think it is over 1024 byte in one line.When i resize container console(.../docker/exec/{}/resize?h=100&w=89), container console is normal.\n\n. waiting for you update in next version~!. @deviantony get. testing . \nit works. it is still not work ,i don't know why it is 1024\uff1f\n\n. it is not work when i resize terminal,it crash because bytes length no enough.\nso, can you reopen and fix it ?. #2249 . > Hi @SMARoovers\n\n@wangkai1994 issue is mainly related to being unable to query the endpoint after updating the settings but I'm pretty sure this problem is actually related to #2556\nWhat's your issue?\n\n+1. > I'm waiting for a few fixes myself, but at this point there have only been a couple fixes merged to the develop branch since 1.20.0. One is important for container edit/recreate, the other is for a potentially empty snapshot interval setting. Other fixes have been done on their own branches, but not merged into develop yet, which eventually makes it out to master/release. So it's hard to know what will make it into 1.20.1 or when it will come.\n\nIf you're using Docker and there is a particular fix branch you want try out, those do have images autobuilt and tagged at https://hub.docker.com/r/portainerci/portainer/tags\n@wangkai1994 if this is the pull request you're talking about, it looks like it should be in 1.20.0 already. 42f5aec\n\noh,2048 not large enough for web-terminal, so i pull this request https://github.com/portainer/portainer/pull/2549.  how can i get docker image build with this commit?. @deviantony can you change 2048 to 10240 or 20480?. +1 for having the same. But can you build a agent image with 10240bytes limit for me to test it ?. \n@deviantony crash again,How is progress?. ",
    "ordenador": "we have the same problem in our Portainer version 1.18.1, Docker version: 17.12.1-ce. @deviantony \nwe are using 'docker stack' without specify the network in the file, \nthe compose file of the stack is similar to:\n```\nversion: '3.1'\nservices:\n...\n  portainer:\n    image: portainer/portainer:1.18.1\n    ports:\n      - 9000:9000\n    volumes:\n      - /opt/portainer:/data\n    deploy:\n      replicas: 1\n      update_config:\n        parallelism: 1\n        delay: 10s\n...\n```. @deviantony we don't use the portainer agent, the connection it is through of API docker using certificates. ",
    "AlejandroDRM": "We have the same problem :S version 1.18.1\nIt says we have 6 running tasks, when we have only 3 running.. ",
    "torlenor": "We just had the same problem with our Portainer 18.1 installation.\nIn our case it seems Portainer created a directory /data/compose/5, tried to checkout the git repo, which failed, and we ended up with /data/compose/5/.git with a half existing git repository (just an assumption why .git was there). \nNow every time Portainer tried to checkout the git repository it always used /data/compose/5 as destination (maybe the next logical number for a stack?), but this failed because of the existing .git directory (hence the error \"http error: Unable to clone git repository (err=repository already exists) (code=500)\").\nDeleting it solved the problem for us, but we think this should be checked anyway. Maybe there is a cleanup step somewhere missing or maybe Portainer should just check if the directory for the new stack is already there and should just use a higher number (i.e., /data/compose/6 in our case).\nHope this helps.. ",
    "jackstrosahl": "Plans to have an in-browser text editor/file uploader?. ",
    "f3l1x": "Thanks. I'm looking forward to it.. ",
    "braaccckkk": "If you upgrade libcompose, would it be possible to deploy compose version >3 from portainer?. Is there any timeframe for this issue?. ",
    "mariolopjr": "@deviantony That would be amazing! I didn't realize just how many version 3 features I used (even version ~2.4 like HEALTHCHECK, etc.). Thanks to all for the wonderful work! :)\n. ",
    "krysennn": "Strange...\nI'm using docker-compose 3.6 version with Portainer and it works very well.. Oh! You're right, sorry i'm confused :). ",
    "MicahZoltu": "Where can I get more information on the difference between Swarm Stacks and Standalone Stacks?  I use docker-compose files to manage my deployments and make them portable across tools, but in Portainer UI I don't see a way to deploy a Swarm Stack, only the v2 stacks.  I'm really struggling with the limitations of v2.0 docker-compose files (in particular, networking related) and would like to figure out how to use a newer version of docker-compose files (e.g., v3 or at least v2.4).. Not that I know of.  :)  I have a host (Ubuntu), I installed Docker CE on it, I ran the Portainer container.  If that doesn't result in me having a Swarm cluster then no, I don't have one.\nFeel free to redirect me to some documentation if I'm just missing some critical piece of a puzzle here.  I am using Portainer to manage a single docker host, not a complex multi-host orchestration system.  I just want access to newer versions of docker-compose is all.. @alphaDev23 I followed these instructions and have been using swarm stacks ever since.  I'm quite happy with them overall, and it gives me access to 3.x docker-compose-like file format.. The things I deploy are Docker Swarm Stacks, which are almost identical to docker-compose files, to the point that the Compose File Reference documentation is used to cover both of them at the same time.  https://docs.docker.com/v18.03/compose/compose-file/#not-supported-for-docker-stack-deploy has a list of options that stack deploy doesn't support and there are inline comments in the documentation when individual settings differ (like volumes and deploy).\nI'm not sure what is causing your error, here is an example of stack file that is working in Portainer (1.19.2) for me right now:\n```yaml\nversion: '3.6'\nservices:\n  postgresql:\n    deploy:\n      restart_policy:\n        condition: 'any'\n    image: 'bitnami/postgresql:10'\n    networks:\n      - 'internal'\n    volumes:\n      - type: 'volume'\n        source: 'postgresql_data'\n        target: '/bitnami'\nnetworks:\n  internal:\n    external: true\nvolumes:\n  postgresql_data:\n```. @rcdailey I'm in the same situation, single node and just want a nice GUI for managing my containers and composes.  You can run this command to \"convert\" your single docker host into a single node \"docker swarm\".  From my experience so far, it is an improvement even if you never add any more nodes to the cluster.  Not only does Portainer now support docker swarm files (docker compose 3), but it also tracks stacks better (collections of services as defined by the docker swarm file).\nI was similarly apprehensive to convert my sinlge-node host into a \"swarm\" (it sounded like overkill) but it really ended up being better in the end.  I honestly don't know why Docker doesn't just make \"swarm mode\" the default.. @rcdailey Running that command doesn't visibly change much of anything, but it does make it so in Portainer you can add \"Stacks\", which are just (mostly) docker-compose v3 files.  It also adds support for docker commands like docker stack ... and docker service ..., but I do all management of that inside Portainer.\nI'm not sure if there is any good documentation that provides a nice comparison of what is available via docker swarm and what isn't.  The docker-compose vLatest reference has inline comments on what is and isn't supported (like deploy section is new in docker swarm, and volumes are slightly different, and health checks are unavailable IIRC.. @mersadk This probably isn't the right place to troubleshoot swarm problems, but in case it helps:\nI think by default swarm has an ingress network that it attaches containers to and when you expose a port it binds to that network, thus binding your service to that network which should make it accessible from localhost.  However, your stack file may specify a different network, or perhaps that network is setup differently on your host (likely if you have multiple networks on the host I would imagine).. ",
    "josephduchesne": "These aren't exactly equivalent since there are a decent number of docker-compose options that docker swarm ignores (--device, --privileged, etc.). Support for docker-compose 3.X would be really nice!. ",
    "lsascha": "Just noticed this limitation for non-stack setups after preparing templates etc... really annoying :(. Just noticed this limitation for non-stack setups after preparing templates etc... really annoying :(. Thanks. i now just initialized a single node swarm to use newer compose file versions.\nI was just baffled and unaware that this limitation existed because i used it successfully on a swarm setup before,\nIs libcompose not used for swarm setups?. Thanks. i now just initialized a single node swarm to use newer compose file versions.\nI was just baffled and unaware that this limitation existed because i used it successfully on a swarm setup before,\nIs libcompose not used for swarm setups?. thx for the explanation. Now another stupid question. Why is the official docker-compose CLI tool not used to deploy to standalone Docker hosts? ;). thx for the explanation. Now another stupid question. Why is the official docker-compose CLI tool not used to deploy to standalone Docker hosts? ;). ",
    "doubled1": "What about the other way around?  Use the binary if available and fall back to what it uses right now if it isn't?. ",
    "KopfKrieg": "There are a few (very few) options docker swarm doesn't support (but docker compose does). Also, encrypted (overlay) networks can cause a few issues. That's probably why swarm isn't the default.. Yes, I know it can be disabled, that's what I'm currently doing. But I also understand telemetry data can be useful and I'd like to provide the data, it's just that I don't want to have Google involved (because of, you guessed it, privacy).. ",
    "bb128b": "I believe this is fixed already by looks of it.. ",
    "qin8948050": "Done,The yaml of template is well. ",
    "brettzink": "I just deployed portainer/portainer:2078 and I'm using cap-add NET_ADMIN. I've noticed when editing/replacing a container, the capabilities get reset.  I have to reapply NET_ADMIN after hitting the \"Duplicate/Edit\" button. . @deviantony Thanks. I updated back to the mainline and 1.19.2 and this is working correctly. . ",
    "wicadmin": "@deviantony - Yes, inspiration definitely (especially the conciseness of it) , asking them to leverage it, probably, especially if they don't have a use/need for it now. I'm using 1.18.1, but I'll check out the latest from 1.19.1. \n. The enhancements are in the UI images in the OP. I have reviewed 1.19.1 Home view and although the concept is partially there, one still has to drill down two more clicks to see their containers and perform actions on them.. I don't see it being a \"disaster\" on the smaller end of things and perhaps there could be a option for those with a smaller footprint. Nevertheless, I see the idea isn't a welcome one so we'll just move forward with the old style drill down way of getting things done.. OK, the only way I can covey what I would like is to provide an example via a screenshot (as already done). What I find very efficient and easy to work with is having the containers and their status listed on the node with the ability to perform the actions as indicated in the second screenshot. That gives us a screen we can glance at at all times and see where things are at and easily make process changes, executing shells etc. without having to come off that single screen/page. Each of those actions pops up a modal dialog instead of navigating off the screen.\nI get it if no one else is open to the idea and therefore it doesn't need to be taken further. It is just one of the easiest and well designed things I have worked with in a long time both from a functional and efficiency (as well as productivity) standpoint and really sad to see it go.. Sounds good. Looking forward to it.. ",
    "shazChaudhry": "Looks like this issue has been introduced after portainer/portainer:1.18.1.\n--no-auth works as expected with v1.18.1. ",
    "egofelix": "It says \"Endpoints is not defined\" at the login page when --no-auth is used.. ",
    "uav2608": "I still have the similar issue. I am using version 1.20.1. but I do not have \"Endpoints not found\". it asks for login only.. ",
    "reloxx13": "same on raspberry 3b+ rasbian (Linux 4.14.54-v7+ armv7l GNU/Linux) after the update:\ndocker logs --tail 50 --follow --timestamps Portainer\n2018-07-28T11:09:30.901144226Z 2018/07/28 11:09:30 Unable to locate template file on disk\ncontainer is now in restart loop\ninstalled with:\ndocker run -d -p 5555:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /home/pi/Docker/Portainer/data:/data --name=Portainer --restart=always portainer/portainer\n( also tried portainer/portainer:linux-arm )\n1.18.1 works fine \nportainer/portainer:linux-arm-1.18.1. ",
    "paulmorabito": "@deviantony removing the custom templates line  and it works. Thank you.. ",
    "xvlcwk": "I'm sorry for the late response.\nI deployed and played around with it over the weekend and it works really good.\nThe only thing, that confused me, is that one can start to edit/create templates and only get warned about it not  working at the end. However this is not really a problem.\nI'm going to deploy it on our live station and will respond if there is something else going wrong, but so far it's working great!\nThank you very much.. I'm very sorry. I couldn't reproduce the issue on our live instance. I'm not sure how that happened before.\nWhen portainer is unable to parse the template, it will show the \"add template\" button and let you put in all the variables, before telling you, that it's unable to create It. However I don't think this is a problem at all, especially cause this means someone is already ignoring a big red warning.\nI have no Idea how I managed to get the edit button since portainer doesn't show the templates in that case. My best guess is that I had something broken in my or portainers cache.\nSo I'm very sorry for wasting your time.. ",
    "neculaesei": "I'm getting the same error while creating a template on 1.19.1.. ",
    "shred86": "Same issue - trying to create a new template on 1.19.1 and if I select anything for 'Network', I get 'Failure - Invalid request payload'. I don't see any way to manually add --net=host either to an App Template.. Ah okay, thanks! Perhaps another idea related to this then would be to add a field called something like \u201cExtra Options\u201d that lets you add additional options as plain text so you can define things that aren\u2019t a configurable item in the App Template.. ",
    "tadeogutierrez": "Still getting this error when creating template in 1.19.2. Still getting this error when creating template in 1.19.2. ",
    "ghalusa": "Confirming what @tadeogutierrez reported (error when creating template in 1.19.2).\nDetails\nresponse\n{\n  \"err\": \"Invalid request payload\",\n  \"details\": \"json: cannot unmarshal object into Go struct field templateCreatePayload.Network of type string\"\n}\npostData\n\"postData\": {\n            \"mimeType\": \"application/json\",\n            \"params\": [],\n            \"text\": \"{\\\"Type\\\":1,\\\"Name\\\":\\\"Drupal7\\\",\\\"Title\\\":\\\"Drupal 7\\\",\\\"Description\\\":\\\"Open-source content management framework\\\",\\\"Categories\\\":[\\\"CMS\\\"],\\\"Logo\\\":\\\"https://portainer.io/images/logos/drupal.png\\\",\\\"Image\\\":\\\"drupal:7.61\\\",\\\"Registry\\\":\\\"\\\",\\\"Network\\\":{\\\"Id\\\":\\\"e46765a52acf674b58c0cc67c74e08285a27a568573d154d77bbb2f5d9de6e83\\\",\\\"Name\\\":\\\"mynetwork\\\",\\\"Scope\\\":\\\"local\\\",\\\"Driver\\\":\\\"bridge\\\",\\\"Attachable\\\":false,\\\"Internal\\\":false,\\\"IPAM\\\":{\\\"Config\\\":[{\\\"Gateway\\\":\\\"172.20.0.1\\\",\\\"Subnet\\\":\\\"172.20.0.0/24\\\"}],\\\"Driver\\\":\\\"default\\\",\\\"Options\\\":null},\\\"Containers\\\":{},\\\"Options\\\":{},\\\"Labels\\\":{},\\\"ConfigFrom\\\":{\\\"Network\\\":\\\"\\\"},\\\"ConfigOnly\\\":false},\\\"RestartPolicy\\\":\\\"always\\\",\\\"Labels\\\":[],\\\"Env\\\":[],\\\"AdministratorOnly\\\":false,\\\"Ports\\\":[\\\"80/tcp\\\"],\\\"Volumes\\\":[{\\\"container\\\":\\\"/var/www/html\\\",\\\"bind\\\":\\\"\\\",\\\"readonly\\\":false,\\\"type\\\":\\\"auto\\\"}]}\"\n          }\npostData JSON (prettified)\n{\n  \"Type\": 1,\n  \"Name\": \"Drupal7\",\n  \"Title\": \"Drupal 7\",\n  \"Description\": \"Open-source content management framework\",\n  \"Categories\": [\n    \"CMS\"\n  ],\n  \"Logo\": \"https://portainer.io/images/logos/drupal.png\",\n  \"Image\": \"drupal:7.61-apache\",\n  \"Registry\": \"\",\n  \"Network\": {\n    \"Id\": \"e46765a52acf674b58c0cc67c74e08285a27a568573d154d77bbb2f5d9de6e83\",\n    \"Name\": \"mynetwork\",\n    \"Scope\": \"local\",\n    \"Driver\": \"bridge\",\n    \"Attachable\": false,\n    \"Internal\": false,\n    \"IPAM\": {\n      \"Config\": [\n        {\n          \"Gateway\": \"172.20.0.1\",\n          \"Subnet\": \"172.20.0.0/24\"\n        }\n      ],\n      \"Driver\": \"default\",\n      \"Options\": null\n    },\n    \"Containers\": {},\n    \"Options\": {},\n    \"Labels\": {},\n    \"ConfigFrom\": {\n      \"Network\": \"\"\n    },\n    \"ConfigOnly\": false\n  },\n  \"RestartPolicy\": \"always\",\n  \"Labels\": [],\n  \"Env\": [],\n  \"AdministratorOnly\": true,\n  \"Ports\": [\n    \"80/tcp\"\n  ],\n  \"Volumes\": [\n    {\n      \"container\": \"/var/www/html\",\n      \"bind\": \"\",\n      \"readonly\": false,\n      \"type\": \"auto\"\n    }\n  ]\n}. Hi @chiptus and @deviantony,\nWithout knowing much about what's going on under the hood, I'm taking a stab at this.\nI took a look at templateController.js:\nhttps://github.com/portainer/portainer/blob/develop/app/portainer/views/templates/edit/templateController.js#L43\nCould it be that template.Network should be template.Network.Name?\no.Name === template.Network.Name\nI say this because in the else, bridge is the name of the network.\nSo, with that in mind, it seems that line 43 should read:\ntemplate.Network = _.find(data.networks, function(o) { return o.Name === template.Network.Name; });. Hi @deviantony,\nDid you test it? I tested this locally, and out on the demo (http://demo.portainer.io/). Both failed with an Invalid request payload.\n\n. Oh, my apologies @deviantony. I just realized you said that this \"will be part of release 1.20\".\nThank you!. ",
    "simonvanderveldt": "I'm currently using portainer purely for a single node/server inside my home-network, separate vlan. So no need for auth, will only be annoying.\n. ",
    "ryanwilsonperkin": "We're looking to include Portainer in our local development tool used by ~60 engineers. The development tool starts portainer and opens it for them. We're trying to remove as much manual clicking from the users as possible, and we rely on --no-auth to skip one of those steps. IMO removing --no-auth would be a mistake.\nIf the intent is to remind the user this is potentially dangerous, what about renaming to --dangerous-no-auth (or similar)? . @ncresswell not in our case, no. We're strictly using it for local container management, so SSO would be unnecessary.. @ncresswell yep, this would just be running on their local development PCs and not centrally managed.\nBinding to just 127.0.0.1 sounds like a good call to me. I think Portainer is an amazing tool for improving local development and would advocate to go even further in that direction. Something like a --local flag could enable a whole bunch of sane defaults: listening on 127.0.0.1, defaulting to \"Local\" environment and \"local\" endpoints, disabling auth.. ",
    "robertbaker": "I actually want the ability to disable auth right in the web ui settings. I use docker w/ traefik and google auth. I have no use for internal auth.. Why not? It's not your job to make sure I'm being secure. Some of us use\n3rd party auth. Making this edible in the configuration would allow ansible\nscripts to set this. Using a command works but I just don't see why we\ncan't have the option in the config.\n. Why is anyone considering removing the ability to disabling auth in the spirit of 'protecting the children'? That's not how you do security. You can't stop people from hurting themselves, you're only going to hurt the people with valid use cases.\nI'm a single user, why would I want to login twice? I'm using a reverse proxy which is best practice. I'm using gapps oauth in the proxy to  do SSO. \nIcan't think of any web app that doesn't allow you to disable authentication.\nOut of the box it should be secure, but don't cripple users who have no need for your internal auth.\nThis is similar to the iframe deny security header issue a while back. Someone must have read a blog about security and put the header on by default and broke everyone who was using organzir/Heimdall/dashboards etc that embed apps in iframes.. I want to run this with organizr and this header isn't allowing me. ",
    "verbruggenalex": "Hi Neil,\nI'm also using Traefik setup with auth on it. At least some kind of plugin that integrates with Traefik would be nice (if it's in Portainers' stack). This allows you to protect each container individually as well.\nI know it's another product and it's a big decision to do an integration with another product. But having a reverse proxy is a requirement for a lot of people. I think if you poll your users you'll find plenty of them are using Traefik.\nI'm not really bothered by having the --no-auth flag or not. For me personally auth can stay and the flag may be removed. My main issue is to give easy access to other containers. That would mean docker label support for Traefik.\nNot having this information in Portainers' UI is pretty annoying for me.. ",
    "ripclaw786": "Certainly.  Can you please tell me the path to where Portainer stores its log file(s)?. Thanks.  Here you go:\nportainer_log.txt\n. Thank you, @olljanat and @deviantony.  Commenting out that line in my docker-compose.yml file did the trick.  \nI don't understand though, why it worked previously and started to give me problems in the last 2 weeks or so?\nI will now close this issue.  Many thanks again.. ",
    "erosenberg": "I believe I may be having a similar issue... I know this issue is closed but I got an error very similar today:\n2018/12/24 19:41:01 Templates already registered inside the database. Skipping template import.\n2018/12/24 19:41:01 Starting Portainer 1.20.0 on :9000\nCould that be related?\nHere is my service block in my docker-compose.yml\nportainer:\n        image: portainer/portainer:latest\n        container_name: portainer\n        restart: unless-stopped\n        network_mode: \"bridge\"\n        ports:\n            - '${IP_ADDRESS}:9000:9000'\n        environment:\n            - PUID=${PUID}\n            - PGID=${PGID}\n        volumes:\n            - './portainer:/data'\n            - '/var/run/docker.sock:/var/rnun/docker.sock'\n            - '/etc/localtime:/etc/localtime:ro'\nAnything look unusual off the top of your head? This issue is driving me nuts. @deviantony . @olljanat - Hey, thanks for the super fast response. I think that's what I posted above where it says \"Starting Portainer\", right?\nI fixed the issue (I assume you mean where it says \"rnun\")?\n. ",
    "Tarpsvo": "Hmm, is this a regression that will be addressed soon? Is it even possible for Portainer to work around this issue, if GitLab does not address the issue of not being able to use a FQDN when accessing the registry?. As a temporary workaround, I implemented two registries inside Portainer for GitLab:\nFirst one, that is used when pulling the image:\nregistry.gitlab.com/tarps\nSecond one, that is used to get rid of the \"registry for image is not registered inside Portainer\" warning:\nregistry.gitlab.com\nThe deeper you go with the forward slashes (/), the more \"fake\" registries you need to add to work around this. But as of writing this, I can successfully use registry.gitlab.com/tarps to pull images from GitLab when deploying containers (registry: registry.gitlab.com/tarps, image: whatever:WE-1).. Hmm, that's odd. I could've sworn it did not work previously and I was forced to include the username in the registry URL. Previously, I received a generic error saying \"invalid reference format\" and after changing the registry URL it started working even though I never had to rename any of the images or tags.\nAs of right now, I am unable to reproduce the error though. It seems it was an error somewhere else on my side. Disregard my reports, sorry. :disappointed: . ",
    "ldubrois": "I have a similar issue with a registry handled by Portus.\nWe are running Portainer 1.20.0 and Portus 2.4.1.\nOurs container's names are of this form:\nregistry.domain.com/[team]/[product]/[component]:[tag]\nPortus force the [team] segment (namespace in Portus convention). The namespace ensure the segregation for the security.\nWe have a 'invalid reference format' error when we try to pull an image in Portainer.\nWe have done some tests to 'isolate' the issue, and created a simple registry (without Portus and basic authentication).\nThe same image name in this registry give the same error.\nThe same image with a simple name (registry.domain.com/[name]:[tag]) works fine.\nObviously, each time, we try to pull the image from a docker pull command, and it works fine.\nWhat can I do ?\nThanks. Hi @Codelica \neffectively I had errors on the deployment of my stack. So, to test it, I tried to do it from the \"Images\".\nNow my stack is working, but as you said, Images still does not.\n. ",
    "onemorezero": "We are experiencing this issue as well. Specifically where we have endpoints behind a high latency/low bandwidth network link.. This is a very vanilla setup i.e. No swarm and no agent running. We have 5 endpoints configured locally and 2 remote endpoints configured over the high latency/low throughput link.. 5 services on each\n. ",
    "pabloa": "Hi. I updated to portainer 1.19.1 and all the pages are very slow. They need 1 or 2 minutes to load. My previous version was portainer 1.16 and it was working OK.. UPDATE: I could speed up portainer 1.19.1 if I enable caching in my browser. If I disable caching, then portainer 1.19.1 starts to be slow (like several minutes slow). \nPerhaps some component/js/font being loaded is slowing down everything else?. ",
    "qoh": "How would one go about implementing this? I can imagine it ideally should just be as simple as adding a toggle to the view, and considering its value when building the docker run command. Are there any references to where things like these are?\nIt looks like a container using the --init exposes that in the boolean HostConfig.Init property.. ",
    "nhendin": "Just wondering what the status of this is --- The very first non test container I tried to set up on my first day of using portainer failed since it needs --init  so it would be great to have..... ",
    "danielgrabowski": "In our case the variable name was shortened. The value is empty but the name is ENABLE_XDEBU instead of ENABLE_XDEBUG.. ",
    "zicklag": "I actually didn't know that that was a feature. :slightly_smiling_face: I have only ever run Portainer by mounting the Docker socket on one Swarm cluster at a time, so I didn't know of the option. In my experience, I had already deleted the old swarm by the time had started the new one.. @deviantony You are correct. I don't expect Portainer to migrate the actual containers to/from any other environments, I just want to be able to recover my stacks from the previously managed Swarm cluster. It was a matter of not wanting to lose quite a few stack yaml's and the environment variable configuration that came with them.\nAll that I would want Portainer to do for me is automate the process of replacing the Swarm ID references in the database and the stacks folder, just like I did manually.\nWhen I migrated my swarm cluster, I was thinking that I should be able to migrate all of my data, run Portainer on my new Swarm cluster with its data, and be able to use Portainer to start all of my stacks up again. To my surprise, I couldn't find any of my stacks in the Portainer UI. It took me a while before I found out why. I had to use Vim to inspect the Portainer database and find the references to the old Swarm ID.\nI think the simplest implementation of this feature would be the ability to view the stacks of disconnected Swarm clusters in the UI. The old Swarm could show as a disconnected endpoint that I could still browse the stacks of and still use the migrate feature to move the stacks from that endpoint to a new one.. ",
    "mvajid": "I am no longer running docker on my Windows 10 machine. Had to remove it from my work machine.\nHere it is from the server:\nPS C:\\Users\\mvajid> docker info\nContainers: 8\n Running: 0\n Paused: 0\n Stopped: 8\nImages: 12\nServer Version: 17.06.2-ee-14\nStorage Driver: windowsfilter\n Windows: \nLogging Driver: json-file\nPlugins: \n Volume: local\n Network: l2bridge l2tunnel nat null overlay transparent\n Log: awslogs etwlogs fluentd json-file logentries splunk syslog\nSwarm: inactive\nDefault Isolation: process\nKernel Version: 10.0 14393 (14393.2368.amd64fre.rs1_release_inmarket_aim.180712-1833)\nOperating System: Windows Server 2016 Datacenter\nOSType: windows\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 14GiB\nName: NAVDOCK\nID: 3CIG:UFHK:VYCX:NFXY:IS7H:LXIW:HIW7:CFVQ:J2ZT:NXH3:MJ4I:DMYY\nDocker Root Dir: C:\\ProgramData\\docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nExperimental: false\nInsecure Registries:\n 127.0.0.0/8\nLive Restore Enabled: false. Tried the same on a different Windows Server machine and I get the exact same error.\nHere is docker info from the other one:\nPS C:\\WINDOWS\\system32> docker info\nContainers: 3\n Running: 0\n Paused: 0\n Stopped: 3\nImages: 6\nServer Version: 18.03.1-ee-2\nStorage Driver: windowsfilter\n Windows: \nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: ics l2bridge l2tunnel nat null overlay transparent\n Log: awslogs etwlogs fluentd gelf json-file local logentries splunk syslog\nSwarm: inactive\nDefault Isolation: process\nKernel Version: 10.0 14393 (14393.2368.amd64fre.rs1_release_inmarket_aim.180712-1833)\nOperating System: Windows Server 2016 Standard Version 1607 (OS Build 14393.2368)\nOSType: windows\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 23.99GiB\nName: MVAJIDSRV\nID: EIYT:2EJR:RMIR:OG75:TIFB:SH7H:O6GO:4B2O:HJIS:4WCJ:HUEC:POEI\nDocker Root Dir: C:\\ProgramData\\docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nLabels:\nExperimental: false\nInsecure Registries:\n 127.0.0.0/8\nLive Restore Enabled: false\n. Thank you. I will try moving to the semi-annual channel i.e. 1803\nI am new to Docker as well. Once there is a fix, I just need to pull the latest portainer image right?. @deviantony I am using Portainer with Docker on Windows. Can I pull 1.18.1 for a new container? If yes, how do I do that please? Thank you.. @deviantony Thanks. I resolved it by updating to Docker version 18.0.3.xx but it's also important to note that the you can only mount named pipe if you use Windows Server 2016 1709 or higher. It's not supported on 1607.. ",
    "workingmachine": "I have detect the same issue.. ",
    "djthread": "It looks like I'm also experiencing this. When I use docker-compose up -d, network aliases are created for the services in the compose file. When I paste the same compose file into Portainer and create the stack, the network aliases are not created!\nThis means that my containers cannot talk to each other, at least in the usual way via the service name as the hostname.. It looks like I'm also experiencing this. When I use docker-compose up -d, network aliases are created for the services in the compose file. When I paste the same compose file into Portainer and create the stack, the network aliases are not created!\nThis means that my containers cannot talk to each other, at least in the usual way via the service name as the hostname.. ",
    "dobe": "ok, i think i was not clear ....\ngo to \"stacks\" overview, click on any stack, this will expand the service container/task list\nnow in this task list, the actions do not work\n. swarm config:\n```yml\nversion: '3.6'\nservices:\nagent:\n    image: portainer/agent:1.1.2\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    deploy:\n      mode: global\n  portainer:\n    image: portainer/portainer:1.19.1\n    ports:\n      - target: 9000\n        published: 9000\n        protocol: tcp\n        mode: host\n    command:\n      - \"-H\"\n      - \"tcp://tasks.agent:9001\"\n      - \"--tlsskipverify\"\n      - \"--admin-password\"\n      - \"some pass\"\n    deploy:\n      placement:\n        constraints:\n          - node.hostname == \n```\nall expected nodes are up\nnote that we do not have a persistent volume for portainer. @xAt0mZ yes, the stacks are defined outside of portainer. @deviantony fails for all tasks. ",
    "jeysibel": "Yes, you're correct, sorry for this bug report ... I forgot i'm using bash. But, I suggest to the doc team to correct the API examples replacing the \" \" by ' ', once that novice users can get confused trying to insert a password with special characters, like happened to me .. Hello, i opened this issue because, actually,  we're  migrating from legacy compose services to swarm services, they coexist in our approach, at this time.\nHow you must know, some services are more suitable to a stateless architecture than others, and, in this way we choosed migrate only part of services, thinking in security issues or avoid problems like when n+1 docker swarm nodes went off or with log replication stopped due network instability.\nWe're working on private cloud, as many others around the world, so I suggest you all to think in other scenarios that differ from the mainstrean. i'ts powerfull and fexible.\nThis bug  appear to be a low cost to correct and will turn portainer more flexible, once docker allow to run: stacks, single containers, compose e swarm stacks in a same docker node.\nThe issue was perceived when we create a docker machine to allow developers to learn and practice deploying and working with docker, so we need to supply templates to different needs and knowledge levels(from novice to the power user).. > Hi @jeysibel, is your Docker environment hosted inside a specific cloud provider infra? (AWS, GCP...)\nWe're currently using Private Cloud + Docker machines (18.06) installed on ubuntu 16.04 VM's, all of them in the same network/vlan, network traffic is ok between hosts.. Due to another strange behaviour from one of our deployed apps, i had to deep dive in docker swarm networking, so i'd discovered that, despite docker official create swarm tutorial only states that we have to ensure each worker to be able to connect to managers and vice versa, not about from a worker to another, we've to ensure that each docker node needs to be opened the docker ports to n-1 other nodes ( via iptables rules)\nSo, when a container placed in worker node A try to connect a container placed in worker B it routes traffic between the two workers (directly) instead through managers, so once i've opened the iptables ports in from 1 to n-1 docker nodes (managers and workers) the portainer agent status  stopped to be shown as down  ...\nFrom now I continue having problems sometimes when i try to read service logs or specific container logs or try to exec a console from docker-agent endpoint, if i try to read via console on swarm manager (where portainer is placed) everything is ok.\nI suggest to the portainer's devs to put a note or a troubleshoot section in the portainer agent documentation page (https://portainer.readthedocs.io/en/stable/agent.html) specifying that portainer agents need to talk each other and not only n agents to 1 portainer directly ... this way we've to ensure communication between docker worker nodes must be active with the service ports opened to the both sides ....\nPS: I think It's bug only happens when you apply firewall rules to the docker machines, in this case, I think the rules was so much restrictive, due the lack of precise information in the official docker documentation.  (https://docs.docker.com/engine/swarm/swarm-tutorial/create-swarm/ - \"The other nodes in the swarm must be able to access the manager at the IP address.\"). ",
    "sorenhansendk": "We have the same problems with our removed nodes. \nWe often add and remove nodes, so this is a very big issue for us.. We have the same issue, with ghost tasks on nodes there is removed. The tasks still \"running\" but the nodes dosen't exist anymore - but Portainer still shows the tasks on the overview.. ",
    "linuxart": "I have same issue.. ",
    "splasky": "Oh! I find the question.\nMy portainer.io version is 1.19.1.\nAnd my browser is firefox 61.0.1 on ubuntu 18.04.\nIt's work fine on chrome browser.\nMaybe firefox have this question.. ",
    "kasamachenkaow": "Any updates on this one, I'm looking the exactly feature.. ",
    "Leen15": "Hi @xAt0mZ , these are the steps that I followed:\nServices -> Add Service\nName: RedisArm\nImage: arm64v8/redis:latest\nPlacement constraints: node.role = worker\nServices View (Here Actions on that Task cannot be executed, mouse click doesn't work):\n\nTask View:\n\nContainers View:\n\nIn containers view I don't see the new redis container.\nBut, if i check on the node there are 4 containers running:\n\nMaster Node is an AWS EC2 host, the worker is arm64.\n. I tried with a total of 3 nodes, all arm64. \nFor two of them, at first deploy of the portainer agent I saw containers and can access to actions. \nAfter a reboot of the nodes, they disappeared in containers list and they didn't come back anymore.\nIs there a way to debug this situation?. Hi @deviantony, this is the screenshot.\n\nDocker service logs doesnt work :/. I'm using 17.03.2-ce on all nodes. (the default one for Ubuntu 16.04) . root@NANOPI-P2-1:~# docker logs c12f\n2018/08/11 11:33:37 [INFO] serf: EventMemberJoin: c12f70d6d62d 10.0.1.5\n2018/08/11 11:33:57 [INFO] - Starting Portainer agent version 1.1.2 on 0.0.0.0:9001 (cluster mode: true)\nThis is the same for all nodes. \nAt this time one node is visible, while the other 2 no.\nThis is the log of the only one visible:\nhttps://pastebin.com/C6qwQ4Q9. Is it mandatory that nodes should be able to see each others?\nThe current network (VPN) is configured for allow every node to see only the VPN and swarm Master Server. (It's a requirement for us) . I understood that agents exist for allow to main instance of Portainer to access to docker on every node. Is this wrong? I dont understand why every agent should be able to see the others and not only the main instance of Portainer.\nAnyway thanks for the help, I'll investigate on network configuration for check if there is a way. Maybe a network for every agent? . Thanks.\nJust a last question:\nCan you please link me a full configuration that should work in a swarm environment? \nI checked and your have 4-5 different configurations where you mount or not the docker.sock in portainer container, where you expose or not the 9001 port on host network for every agent, where you link or not volumes folder and so on.. \nIt's a pain to understand what should I use.\nCan you help me?\nAlso is there a way to enter in the agent with a console so I can check the network status of every agent? I tried bash, sh and ash but it seems none of them are available. . ",
    "fy1128": "I got this problem, after opening those ports, everything works fine.\nsudo ufw allow 2376/tcp && sudo ufw allow 7946/udp && sudo ufw allow 7946/tcp && sudo ufw allow 2377/tcp && sudo ufw allow 4789/udp. ",
    "WnP": "This issue looks related to #2001 . Ok, I've fixed this issue, the problem was that portainer agent must be used in a docker swarm stack, for 2 main reason:\n1) to be TLS protected\n2) because it's completely useless to use it outside of a swarm stack, agent provide cluster aware features\nAs a remainder I put my configuration here in case it could be helpful for others:\nin all configurations files you should remplace domain.tld to your own domain.\n\nfirst init your swarm cluster:\n\n```\nreplace 1.2.3.4 with your node IP\ndocker swarm init --advertise-addr 1.2.3.4 --listen-addr 0.0.0.0\n```\n\ncreate a swarm external network for tr\u00e6fik:\n\ndocker network create --scope \"swarm\" http_network\n\ncreate this minimal directory structure:\n\n.\n\u251c\u2500\u2500 stack.yml\n\u2514\u2500\u2500 traefik\n    \u251c\u2500\u2500 acme\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 acme.json\n    \u2514\u2500\u2500 traefic.toml\n\n\nacme.json is an empty json file with 600 permissions\n\n\ntraefic.toml\n\n\n```toml\ndefaultEntryPoints = [\"https\",\"http\"]\n[api]\nentryPoint = \"traefik\"\ndashboard = true\n[entryPoints]\n  [entryPoints.http]\n  address = \":80\"\n    [entryPoints.http.redirect]\n    entryPoint = \"https\"\n  [entryPoints.https]\n  address = \":443\"\n    [entryPoints.https.tls]\n    minVersion = \"VersionTLS12\"\n    cipherSuites = [\n      \"TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305\",\n      \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\",\n      \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\",\n      \"TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256\",\n      \"TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\",\n      \"TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA\"\n    ]\n  [entryPoints.traefik]\n  address = \":8080\"\n  [entryPoints.traefik.auth.basic]\n  users = [\"admin:{SHA}jLIjfQZ5yojbZGTqxg2pY0VROWQ=\"]\n[acme]\nemail = \"you@domain.tld\"\nstorage = \"/etc/traefik/acme/acme.json\"\nentryPoint = \"https\"\nonHostRule = true\nonDemand = false\n  [acme.httpChallenge]\n  entryPoint = \"http\"\n[docker]\nendpoint = \"unix:///var/run/docker.sock\"\ndomain = \"domain.tld\"\nwatch = true\nexposedbydefault = false\nswarmMode = false\nexposedByDefault = false\n```\nNote that this demo doesn't enable swarm mode, see tr\u00e6fik documentation if you plan to do so.\nBasic auth user is admin and password is 12345\n\nstack.yml\n\n```yaml\nversion: '3.2'\nnetworks:\n  agent_network:\n    driver: overlay\n    attachable: true\n  http_network:\n    external: true\nvolumes:\n  portainer_data:\nservices:\n  traefik:\n    image: traefik:latest\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    labels:\n      - traefik.enable=true\n      - traefik.frontend.rule=Host:traefik.domain.tld\n      - traefik.port=8080\n      - traefik.docker.network=http_network\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - ./traefik/traefik.toml:/traefik.toml:ro\n      - ./traefik/acme:/etc/traefik/acme\n    networks:\n      - http_network\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\nagent:\n    image: portainer/agent\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.agent\n      # AGENT_PORT: 9001\n      # LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - agent_network\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\nportainer:\n    image: portainer/portainer\n    command: -H tcp://tasks.agent:9001 --tlsskipverify\n    volumes:\n      - portainer_data:/data\n    networks:\n      - agent_network\n      - http_network\n    labels:\n      - traefik.enable=true\n      - traefik.docker.network=http_network\n      - traefik.frontend.rule=Host:portainer.domain.tld\n      - traefik.port=9000\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\n```\nnow deploy your stack using the following command:\ndocker stack deploy --compose-file=portainer-agent-stack.yml portainer\nNow if you want to deploy another stack using portainer with tr\u00e6fik as reverse proxy you just need to use the same network and relavent tr\u00e6fik labels, here is an example for cadvisor:\n```yaml\nversion: \"3\"\nnetworks:\n  http_network:\n    external: true\nservices:\n  cadvisor:\n    image: google/cadvisor:latest\n    volumes:\n      - /:/rootfs:ro\n      - /var/run:/var/run:rw\n      - /sys:/sys:ro\n      - /var/lib/docker/:/var/lib/docker:ro\n      - /dev/disk/:/dev/disk:ro\n    labels:\n      - traefik.enable=true\n      - traefik.frontend.rule=Host:cadvisor.domain.tld\n      - traefik.port=8080\n      - traefik.docker.network=http_network\n      - traefik.frontend.auth.basic=admin:{SHA}jLIjfQZ5yojbZGTqxg2pY0VROWQ=\n    networks:\n      - http_network\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\n```\nBasic auth user is admin and password is 12345\nNote that with this configuration only tr\u00e6fik export port through the node network, all other services expose ports through tr\u00e6fik network and are unavailable on node's network.\nEnjoy. Hi @deviantony,\nAt the moment it's not possible to use --host option with --external-endpoints.\nBy the way --host option is compatible with agent protocol so it would be nice if we can use both options --host for current swarm cluster connected to agent and --external-endpoints for external swarm cluster.\nLet me know your through. Hi @deviantony \nThat's perfect, it total fit my use case, not sure there's other cases where it could be useful to change ownership for a limited stack, then I close this issue.\nThanks a lot.. Same problem here, creating a new stack using portainer API result to a stack with limited control.\nAlso when removing the stack - using docker CLI - it's impossible to create a new stack with the same name, portainer complain that the stack name already exists.\nPortainer also keep the file under <portainer_data>/compose/<stack_id> after stack deletion.\nPortainer: 1.19.2\nDocker: 18.03.1-ce. After some tests I'm able to create some with total control using portainer API by passing the correct SwarmID attribute.. ",
    "mhaamann": "@deviantony I might have time to develop this feature. Do you have any comments on the look and feel?. ",
    "fabiopedrosa": "@deviantony Sorry, I didn't find 2110 on my searches. Watching that one closely.\nNo, I'm not using the agent, I have a separate portainer instance on each node. Would using the agent help?. @deviantony to me, I don't get any benefit of having all the tasks there in the services page, and that's always a bottleneck since you can easily have thousands of killed/stopped tasks per service.. ",
    "ApertureDevelopment": "Ok I fixed it now by the following:\n1. I recreated the GitLab container\n2. I Installed the latest gitlab ce version\nNow another problem happens when I try to open the console, I always get a timeout.. Ok I fixed it now by the following:\n1. I recreated the GitLab container\n2. I Installed the latest gitlab ce version\nNow another problem happens when I try to open the console, I always get a timeout.. Again: I fixed that, but the console problem is still existing. I already updated Docker to latest but still I cannot connect to the container console over portainer.. Again: I fixed that, but the console problem is still existing. I already updated Docker to latest but still I cannot connect to the container console over portainer.. Yes. Yes. Apache reverse proxy, OS is Linux Debian 9 Stretch. Apache reverse proxy, OS is Linux Debian 9 Stretch. This does not seem to be a reverse proxy issue, the reverse proxy is configured correctly, but the API url returns \njson\n{\n    \"message\": \"timeout waiting for exec session ready\"\n}. This does not seem to be a reverse proxy issue, the reverse proxy is configured correctly, but the API url returns \njson\n{\n    \"message\": \"timeout waiting for exec session ready\"\n}. ",
    "markusblogde": "Hi at all. I have updated my manual with the correct config. Connect to Console should work now. Markus\nhttps://markus-blog.de/index.php/2018/05/11/how-to-manage-docker-with-portainer-on-ubuntu-16-04-lts-with-apache2-as-reverse-proxy/\n. ",
    "juanluisbaptiste": "Any hints to get it working with traefik ?. @deviantony I found that link too but I can't see what's there that I'm missing to get the console access working. My setup is a single machine with no swarm.. I mean, agents are supposed to be used on remote hosts.. ",
    "MyTheValentinus": "Ok thanks for the quick response !\nHave nice day. Ok thanks for the quick response !\nHave nice day. I had not seen this menu, so much for me\nHave nice day. I had not seen this menu, so much for me\nHave nice day. ",
    "paul-griffith": "Maybe a table of the first N ports (by whatever sort), then if there are more than that exposed, a link to the 'Container Details' block (with those links then clickable?).\nThe 'Containers' table looks... okay with a long list of ports, but that could definitely get unwieldy:\n\nBut making the port configuration in 'Container Details' a table that matches the rest of the page better might be a good move (and easy to add links). Adding an anchor to go directly to the configuration details, or even specifically the port configuration, should be doable (I haven't looked at how Portainer creates pages, so I don't really know)\n. ",
    "pguichon": "Thx for you reply.\nI already read them.\nMy problem is only if the stack is not on the manager.\nIf I use a contraint like : \nyml\nplacement:\n        constraints: [node.role == manager]\nIt's work.\nI think it's a network problem (but I am not sure).\nI don't understand what I do wrong.\nI have \na manager  (with a portainer and traefik)  --> cluster1 (a worker with whoami)\n                                                                      --> cluster2 (a worker)\n                                                                      --> pgsql (a worker with a pgsql database)\nEverything work very well except that.\n. I find the problem : I have to use  command:  -api --docker --docker.swarmmode --docker.watch in the traefik-stack.yml\nThx for your reply. ",
    "davestephens": "Hmm, not easily without telling you a bunch of stuff I'm not allowed to tell you :-)\nUnder the \"LDAP Configuration\" section, that's just our AD DNS name which could resolve to any DC. Reader DN and password is an account that has r/o access to AD. Clicking \"Test Connectivity\" (and being able to log in as above) confirms this bit is OK.\nLDAP Security \nEverything off\nUser Search Configuration\nBase DN: DN to an AD OU that is the root of where all of our users live.\nUsername attribute: SAMAccountName\nFilter: (objectClass=person)\nGroup Search configuration\nGroup Base DN: a DN to an AD OU where our groups live\nGroup Membership Attribute: member\nGroup Filter: blank\nHopefully this helps.... That doesn't sound like the same issue.\nOn Thu, 16 Aug 2018, 22:09 WW-build, notifications@github.com wrote:\n\nHaving similiar issue. After setting up LDAP configuration I\u2019m unable to\nchange any configuration parameter, even switching to internal user DB\nisn\u2019t working.\nDetails: I\u2019ve deployed docker container with latest version of the\nportainer, setted up admin password, than I\u2019ve moved to Setting -\nAuthorization, switched to LDAP, typed in base DN, user for bind and his\npassword, while setting this up I\u2019ve typed user search dn and username and\ngroups name attributes, after this I\u2019ve saved those settings in oreer not\nto lose them, but wasn\u2019t able to change them after this, each time when I\u2019m\ntyping in new parameters and clicking Save button I\u2019m getting confirmation\nthat settings have been saved but after page update all setting are getting\nback to first setup.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2168#issuecomment-413685595,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAozMHNRzeP9NFdIXGJUs9ql26tTg-d7ks5uRd-FgaJpZM4V_llU\n.\n. @ncresswell Any thoughts on this?. @deviantony What confirmation do you need for this? Can I help at all by providing more info?. \n",
    "WW-build": "Having similiar issue. After setting up LDAP configuration I\u2019m unable to change any configuration parameter, even switching to internal user DB isn\u2019t working.\nDetails: I\u2019ve deployed docker container with latest version of the portainer, setted up admin password, than I\u2019ve moved to Setting - Authorization, switched to LDAP, typed in base DN, user for bind and his password, while setting this up I\u2019ve typed user search dn and username and groups name attributes, after this I\u2019ve saved those settings in oreer not to lose them, but wasn\u2019t able to change them after this, each time when I\u2019m typing in new parameters and clicking Save button I\u2019m getting confirmation that settings have been saved but after page update all setting are getting back to first setup.. Issue auto-resolved, by just re-downloading container.. ",
    "pommetjehorlepiep": "Thx @deviantony, that was a very quick reaction!\nI've tried it with the flag and that solved the problem!!!. ",
    "lukaspj": "I just tried synching a group without special characters, only letters, and it didn't work as well. So that wasn't it.\nI tried moving up the Group Base DN to the root of the AD, that didn't help either.\nEdit: If it matters, the CN of the user is on the form \"John Doe (JDOE)\"\nEdit2: Another note, the service user I'm using for Portainer, is the same I'm using for Jenkins where group-lookup works fine.. Found the culprit!\nThe issue is that the CN on the form \"John Doe (JDOE)\" fails for some reason.\nLogging in with a user that has a CN on the form \"Jane Doe\" without the (username) at the end works fine.\nNow, to find the source of this discrepancy... I'm not too strong at LDAP stuff, but is it possible that the parentheses would need to be escaped here:\nhttps://github.com/portainer/portainer/blob/develop/api/ldap/ldap.go#L142\nSince that comes out as:\n(&...(member=CN=John Doe (JDOE),DN=....))\nAnd if so, does anyone know how to escape those parentheses?. Based on:\nhttp://www.rlmueller.net/CharactersEscaped.htm\n\nParentheses needs to be escaped when querying an AD backend through the LDAP protocol.\nA further complication arises if you use LDAP filters to query Active Directory. For example, if you use ADO to query Active Directory, and you use the LDAP syntax, one of the clauses is an LDAP filter clause. Command line utilities like adfind and dsquery also accept LDAP filters. The LDAP filter specification assigns special meaning to the following characters:\n* ( ) \\ NUL\nThe\u00a0NUL\u00a0character is ASCII\u00a000. In LDAP filters these 5 characters should be escaped with the backslash escape character, followed by the two digit ASCII hex representation of the character. The following table documents this:\n* | \\2A\n( | \\28\n) | \\29\n\\ | \\5C\nNUL | \\00\n\nSorry for the horrible formatting of the table, on cellphone.\nI will see if I can whip up a PR soon.. @deviantony I answered your comment, and created a new commit. Be aware that I created a new commit in place of the old commit, which may break tracking for local branches.\nI wasn't sure what the preferred way of making changes in a PR was.. I have just tested this change, pulling from portainer/portainer:pr2209, and it worked with the users that had parentheses in their name.\nNo apparent issues.\nThanks for the review!. This issue is not isolated to Portainer, please disregard.. Definetly, in my fight with the editor / getting the code compiling I forgot to RTFM.\nI have created a new commit instead of the old one, which uses ldap.EscapeFilter instead of the custom function.. ",
    "technodrome": "Too bad, I am also using i386 Docker on Debian and I don't see any problems with that. You are supporting 386 on ARM - as many people are still using i386, why leave it out?. ",
    "tboloo": "Hi @deviantony \n\nWhat version of Windows are you using? \n\nI am using Windows 10 PRO 64b version 1803.\n\nAlso, how did you create the endpoint in Portainer? Did you use the local option during the initialization?\n\nyes.\nLocal option is only available during first run, if one want's to add local docker via + Add Endpoint there is no such option.\n\nYou'll not be able to use localhost when creating a new endpoint as it will resolve to the local IP of the container, instead you'll want to use the public IP address of your Windows host.\n\nIndeed, if I use public IP everything works as expected.\n. ",
    "giansalex": "docker.for.win.localhost:2375  works. ",
    "lucasjkr": "How about:\nIf there isn't a username set anywhere, then the default behavior occurs where you set the username and password yourself.  If its started with both username and password flags, then those are what it sets.\nThis is all stored in your persistent data, so if you ever rebuilt the container without destroying the volume, you keep your old passwords.\nThe remaining issues are if a user tries to build the container with either just a user name or just a password. I'd think if they built it with just a username in the env, then the initial screen would require them to set a password, but without being able to change the username; if build with just a password, it might be better to just discard that and require the user to enter both.\nI do agree, though, that dumping a random password in STDOUT is not the right thing to do!. I'm seeing the discussion in the #399, just seems like a more logical place to pass it through is in the environment rather than adding a flag to the command to setting a password from a different file altogether.\nAnyways, just a suggestion.. @ncresswell - I'm not seeing where Portainer is forced to use HTTPS? Seems port 9000 is unencrypted, nothing is recording in the logs or STDOUT. Which is generally fine, I'm using Nginx to reverse proxy and encrypt connections, the only problem is if Nginx goes down, I'd lose Portainer as well.\nI'm seeing from the Docs, the paths to the SSL certs are passed in as flags too? No ability to mount them via volumes?\nI'm sorry, clearly I'm asking questions too soon!\n(Back to original topic:  in the logs it does checks if there's an admin user in the database; seems like it would be simple to check \nif admin user is not in database:\n       if admin_user and admin_password are set in environment\n           create admin user with supplied password\n       else\n           show login form\nI'll close though unless want to keep talking about it! :). ",
    "halfer": "Have a 9,000th star for your work! :1st_place_medal: . @chiptus: I tried this a second time, and in fact got the result you describe. For the first go, I was monkeying around with saved passwords and faked JSON requests quite a bit, so I probably got something wrong.\nIncidentally, I wonder if there needs to be a notice that goes out with this release, to help manage unexpected issues. For affected users, any usernames/passwords saved in browsers or password keepers will no longer work.\n. > Do you mean that if we fix this the actual password will no longer work?\nYes, a browser-saved password won't work. In my above example, the browser thinks the password is WP<FjH\\MM]w=@Al2f&Im'nT\",~su9I5%Ujlabcef, but the password supplied to the auth creation system was WP (so that will be the password that was hashed and stored).\n\nOur idea is to authenticate without the sanitization call first, if it fails then authenticate with the sanitization call. If the second authentication succeed, the user will be asked to update his password (with an information message).\n\nThat would certainly be convenient, but it would continue to expose a small number of users to weaker passwords than they intended. I'd not be opposed to this, as long as that code was removed in a few months, otherwise it would prolong the problem indefinitely.\nThe alternative would be to let users bump into an access-denied message, and give clear instructions in your support channels about how to change the password on the console; while inconvenient, it does fix the weak password issue immediately. We could argue that Portainer users will generally be the kind of people who can fix this themselves, since they will usually be software or operations engineers.\nUltimately security/convenience/support are trade-offs that you'll need to decide on based on principles set out for this project. To some degree it may depend on how many people are affected by this - folks using password generators is pretty rare, so I'd go with 5%, and of course some auto-generated passwords won't contain angle brackets. Do you know roughly how many installs you have (e.g. do Portainer instances check for updates, so you have a rough ongoing idea?)\n. Great, sounds like a plan!. ",
    "Seraksab": "Hi @deviantony ,\nwe just encountered the same issue. Although the other way round.\nOur deployment is fully automated through Jenkins and the stacks are therefore created outside of portainer using multiple compose files per stack (different deployment per environment).\nIn order to monitor and administer the stacks we would like to make them accessible to different users.\nAs having everybody sign in and work as the admin user is clearly not ideal.\nIs there a chance that the option of updating the ownership of a limited stack will be added?. Just observed the same problem on our setup with 3 managers and 1 worker node.\ndocker: 18.0.6.1-ce\nportainer 1.19.2\nportainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc\nportainer/agent:latest@sha256:468f58ed0ae81cdae7dd377d813efbce6011709d1fe3b539f515d2e0623c40be\nagent stack was created via Portainer itself (App Templates -> Agent -> Deploy) \nUnfortunately we do not yet have proper resource monitoring in place, so i can't provide graphs for memory usage over time. \nHowever the 4 agents currently sit at:\n\nmanager1:  1.872  GiB  (running 26d)\nmanager2:  258.7 MiB  (running 26d)\nmanager3:  618.2 MiB  (running 20d)\nworker:       467.1 MiB  (running 4d)\n\nPortainer itself consumes a mere 12 MiB and has also be running for 26 days. ",
    "neothematrix": "I'm not sure if it's related to this, but I noticed, after updating from 1.18 to 1.19 that when the portainer container is running on my docker host, it leaves a lot of open file descriptor (mostly sockets), with enough time, the dockerd runs out of available filedescriptors (1024).\nTerminating the container immediately releases the open files.\nThe increase in filedescriptor usage seems also to happen every 5 minutes:\n\nServer:\n Version:      17.09.1-ce\n API version:  1.32 (minimum version 1.12)\n Go version:   go1.8.3\n Git commit:   a9fd393\n Built:        Wed Jul  4 07:19:37 2018\n OS/Arch:      linux/amd64\n Experimental: false\nthis is a docker version running on a QNap TS-251 (container station). ah! sorry about that I stopped at the first issue and didn't look at the rest.\nIs there an environment variable I can set to disable snapshot? Unfortunately on QNAP Container Station I cannot really add custom parameters as I don't control the \"docker run\" directly.. in my case, turning off snapshots (I managed to pass the --no-snapshot flag) seems to have completely solved the filedescriptor leak, latest deploy of the portainer container was at 18:00 in the graph:\n\nhowever I never noticed the memory leak issue:\n\nhowever I did change another parameter, I'm now bind mounting /var/run/docker.sock instead of the whole /var/run folder as I was doing before (I had no choice with Container Station since it allowed only directory bind mounts, not files), I'll try to perform a reverse-test by removing the --no-snapshot flag and see if the fd leak starts again.. @deviantony I just started it (without the no-snapshot parameter of course) and keeping it monitored, I'll let you know in a while the status of open file descriptors, meanwhile thanks for the fix!. 3 hours, no file descriptor leak and snapshot enabled, also no memory leak, but again, I was not experiencing it.. ",
    "Pandentia": "Would also like to chime in and say thanks, I pulled this image about 12 hours ago and haven't seen any leaking since. Anxiously waiting for this in the latest image :slightly_smiling_face: . ",
    "AdnanCukur": "Wondering the same thing\nEdit: Started portainer in swarm mode and then it works :). ",
    "francescbassas": "+1. ",
    "jstewart612": "Says \"Invalid stack name\" @deviantony \ntoolsweb_portainer.1.i9g6aup6kbmb@tools-web001.tools.useast2.xxxxxx.com    | 2018/08/27 14:47:11 http error: Invalid request payload (err=Invalid stack name) (code=400). Yep my fault @deviantony and now I've fixed it by removing setopt for POSTFIELDS and concatenating data to end of c.URL...... so, language-specific mistakes I was making.\nAPI is functional and I concur now with your original assessment.  Cheers, thanks for your responses @deviantony , and my apologies on the slight wastes of time to get there on mickey mouse stuff.. ",
    "mastacheata": "This is a misinformation from netstat. In modern linux IPv6 sockets accept IPv4 connections as well unless explicitly bound to a specific IPv6 address that is not link-local.. ",
    "sameep22": "Hi @deviantony ,\nNo, there is no reverse proxy. It is a relatively simple setup. Mostly default settings. \nI have the following ports open;\n9000 : Portainer\n9001 : Sonarr\n9002 : Radarr\nThe 9001 and 9002 ports work perfectly, but the portainer 9000 port is not accesible. Even when I try from the same PC.. Hey @deviantony \nThanks a lot. That solved the issue. \nIf you could spare me some time, I would be really interested to know what that line of code did, and why removing it solved the problem. Or you could direct me to some documentation where I could learn about it.\nThanks again,\nCheers!. ",
    "vabatta": "This is port mapping, not exposing. Should be expose: the keyword for the nginx proxy.. ",
    "myuseringithub": "Thanks @deviantony , I'm using it locally on Windows host machine. Had issues with spinning up the container using docker-compose yml file. So I tried docker command which also fails. \ndocker run -d -p 9000:9000 -v portainer_data:/data portainer/portainer\nThis is specific to LCOW, seems to still not support all functionalities containers require.. ",
    "yati1998": "I would to like to solve this issue. ",
    "cmizzi": "Also, it should be great if a token can update multiple services based on the same image.\nFor example : many of my services use the same image. Every time a new service is created, I have to add a new URL webhook to my ci. I would be nice if the webhook can be applied on many services and use a single URL in the deployment process.. ",
    "l-t-k": "Well, it seems like everything is working fine after the second portainer container spins up succesfuly. I am able to access the UI and can manage my swarm. It's just the first container failing to start\n\n. Yeah, seems logical to me as well. Tonight I tried several times and in the end the error came up 9 out of 10 times.. This is probably not related, but any idea why my node is creating new containers after reboot instead of spinning up the old containers? After two restarts:\n\n. ",
    "ellisonpatterson": "Issue is still happening, is there a way to manually resolve it for the time being?. > \n\nI use firefox on my ipad and dont have any such issue. You cannot use saved credentials, and must manually retype both user and password, but once you do that, login is fine.\n\u2026\nSent from my iPhone On 28/12/2018, at 7:34 AM, Ellison Patterson notifications@github.com<mailto:notifications@github.com> wrote: Bug description When attempting to login to Portainer from the Firefox iOS app, it simply says the login information is incorrect. I have it saved with Firefox so it auto-populates the username and password so maybe that is causing some type of snafu, but even if I type in the login information manually it still won't let me login. Expected behavior Successfully being able to login. Steps to reproduce the issue: Steps to reproduce the behavior: 1. Install Firefox for iOS 2. Go to portainer login address 3. Attempt to login with credentials 4. Login attempt invalid Technical details: * Portainer version: 1.20.0 (happened on older versions as well) * Docker version (managed by Portainer):docker 18.09.0 * Platform (windows/linux): Debian 9 * Command used to start Portainer (docker run -p 9000:9000 portainer/portainer): Portainer is handling this and/or docker systemd service. * Browser: Firefox iOS \u2014 You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2579&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VKsFtjflyYEer8KRucBQd28JbByfVgKt-cyL9h_rhuw&s=SaAKr4Xkzq0LL98yZuMy8sMntfEkPl0vnpg3FC0uj9Y&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlQlTtcJiXUsFEoEMsgXafZLZ6gG2ks5u9RLFgaJpZM4ZjEob&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=VKsFtjflyYEer8KRucBQd28JbByfVgKt-cyL9h_rhuw&s=u-504pj4peMkD2zqQ64SJDBS9mrlXDMdquvqtKhPYDU&e=.\n\nIsn't still an issue though since using saved credentials on other web applications does not introduce the issue I've described. If it is intended then shouldn't it display why it prevented you from logging in specifically?. ",
    "phretor": "Same here. Tested with agent:1.1.1 and portainer:0.18.0 - same issue.. ",
    "szthanatos": " I may find the reason : the port you want to publish mybe used.\nIn my case, I try to add a new swarm cluster to my existed portainer with stack file as portaioner document say. Then the two of the agent container's status turns around between 'ready'/'started'/'accepted' but never 'running', and the logs show: http error: Missing Portainer public key (err=Portainer public key unavailable) (code=403).\nThen I find 9001 is already used by someone else, so I change it & all agents work.. > Why are you wanting to chose the manager node? Overlay network is created across all hosts automatically. Rgds, Neil Cresswell On 1/11/2018, at 5:14 PM, \u673a\u667a\u7684\u82cf\u5148\u950b \nCause if I don't choose the manager node first, it may failed with message: 'Failure Cannot create a multi-host network from a worker node.Please create the network form a manager node.' (the default value of deployment-node is not always the manager node.). > Ah... You need to use the Portainer agent when managing swarm clusters... thats why we created the agent. See portainer.readthedocs.iohttp://portainer.readthedocs.io for info on deploying the agent. Rgds, Neil Cresswell On 1/11/2018, at 6:50 PM, \u673a\u667a\u7684\u82cf\u5148\u950b \nSorry for not reply timely. \nThanks for using guide, but I just want to describe a phenomenon. \nThe point is that the default node of overlay portioner UI set does not always the manager node, that's all what I wanna say :). ",
    "Ubusubus": "I'm generating this file, so I doubt that there're any errors in it. Except for maybe format was changed\n[\n    {\n        \"Name\": \"app-00\", \n        \"TLS\": true, \n        \"TLSCACert\": \"/etc/portainer/ca.pem\", \n        \"TLSCert\": \"/etc/portainer/portainer-cert.pem\", \n        \"TLSKey\": \"/etc/portainer/portainer-key.pem\", \n        \"URL\": \"tcp://10.0.0.60:2376\"\n    }, \n    {\n        \"Name\": \"app-01\", \n        \"TLS\": true, \n        \"TLSCACert\": \"/etc/portainer/ca.pem\", \n        \"TLSCert\": \"/etc/portainer/portainer-cert.pem\", \n        \"TLSKey\": \"/etc/portainer/portainer-key.pem\", \n        \"URL\": \"tcp://10.0.0.61:2376\"\n    }\n]. Ok. I will check it. Thanks for advice.\nI tried this way, but it doesn't allow me to save endpoint with new Group. It gives strange error when I press Update endpoint button:\n\nFailure\nUnable to register HTTP proxy for the endpoint. \n",
    "pdschandler": "I encountered this issue, and it seemed to boil down to the fact that when --external-endpoints is used, Portainer doesn't automatically assign them to the \"Unassigned\" group which it usually would (but cannot since --external-endpoints puts endpoints in a read-only state). Therefore, there is no grouping for the Manage features to refer to.\nIf you re-start your Portainer without the --external-endpoints flag and manually edit the endpoint in question to be in the Unassigned group... then it will work from that point forward, even if you go back to using --external-endpoints.\nThis issue essentially prevented me from using LDAP integration, until I figured out that the endpoints needed some sort of group assignment for user auto-creation to happen at all.. This would also help out any Open Directory servers still soldiering on out there (aka ours).. I am running into this problem on a fresh setup. This is the first time I've attempted this functionality since 19.1, in which it worked fine. So far, I'm getting this error every time. When it occurs, simply pressing the Create button a second time works. The old container stays behind as containername-old (nice that this system opts for caution and doesn't delete the old yet \ud83d\udc4d ). ",
    "wiryonolau": "is this equal to endpoint console access ?. ",
    "jancelin": "Portainer 1.19.1 on :9000. I had to wait until the next day to recreate the bug...\nIf my rpi is connected to the web (ethernet) once a day, then I can log in all day.\nIn absence of web (as this morning, boot on battery) Portainer does not accept the connection and tells me: Your session has expired\nNo logs via docker logs except except yesterday's: \n2018/09/04 14:18:32 Templates already registered inside the database. Skipping template import.\n2018/09/04 14:18:32 Starting Portainer 1.19.1 on :9000\n\n. I'm working on a date update problem....he tells me I'm yesterday\n```\npirate@geopoppy:~$ date\nTue Sep  4 15:29:56 UTC 2018\njancelin@jancelin:~$ date\nmercredi 5 septembre 2018, 09:57:04 (UTC+0200)\n```\n. ",
    "mazmar": "Could this be extended to all json definition? I'd like to create a template for our mock server where container port is fixed and user should choose only host port\ne.g\n\"ports\": [\n    \"{PORT}:80/tcp\"\n]. ",
    "alexrun": "Hello @jgallen23 \nCan you share the docker-compose.yml you are using to deploy the services?. ",
    "jgallen23": "here's the portainer part:\n```yaml\nversion: \"3.6\"\nservices:\n  portainer-agent:\n    image: portainer/agent\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.portainer-agent\n      # AGENT_PORT: 9001\n      # LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - agent_network\n    deploy:\n      mode: global\n      resources:\n        limits:\n          cpus: '0.5'\n          memory: 256M\n      placement:\n        constraints: [node.platform.os == linux]\nportainer:\n    image: portainer/portainer\n    command: -H tcp://tasks.portainer-agent:9001 --tlsskipverify --admin-password-file /run/secrets/portainerPass\n    ports:\n      - \"9000\"\n    volumes:\n      - portainer_data:/data\n    secrets:\n      - 'portainerPass'\n    networks:\n      - traefik-net\n      - agent_network\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\n      resources:\n        limits:\n          cpus: '0.7'\n          memory: 512M\n      labels:\n        traefik.port: \"9000\"\n        traefik.docker.network: \"traefik-net\"\nvolumes:\n  portainer_data:\nnetworks:\n  traefik-net:\n    external: true\n  agent_network:\n    driver: overlay\n    attachable: true\n  prometheus:\n    driver: overlay\nsecrets:\n  portainerPass:\n    external: true\n```. It actually looks much better on 18.03 vs 17.09:\n18.03:\n\n17.09\n\n. @mmhh1910 which version of docker are you on?. ",
    "mmhh1910": "I see the same problem. Below is a graph showing the used memory by portainer (orange) and the portainer agent on the same node. It's eating more and more until I force a restart of the service.\n\nThe memory consumption of the portainer agents on my other nodes looks similiar. I've tried versions 1.1.2, 1.1.0 and 1.0.0 of portainer/agent, but they all show this problem.\nConfiguration is pretty plain and simple:\n```\nversion: '3.3'\nservices:\n  ...\n  portainer:\n    image: portainer/portainer\n    command:\n      - --no-auth\n    deploy:\n      replicas: 1\n      labels:\n        - \"traefik.frontend.rule=Host:portainer.\"\n        - \"traefik.frontend.entryPoints=https,http\"\n        - \"traefik.frontend.headers.SSLRedirect=true\"\n        - \"traefik.port=9000\"\n        - \"traefik.docker.network=frontend\"\n        - \"traefik.frontend.auth.basic.users=<...>\"\n    networks:\n      - frontend\n      - portainer\n    volumes:\n      - portainer:/data\n      - /var/run/docker.sock:/var/run/docker.sock      \nportaineragent:\n    image: portainer/agent\n    networks:\n      - portainer\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n    deploy:\n      mode: global\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.portaineragent\n    logging:\n      options:\n        max-size: \"1500k\"\n...\nnetworks:\n  frontend:\n    external: true\n  portainer: {}\n```\nDocker engine version is 18.06.1-ce. > @mmhh1910 which version of docker are you on?\n18.06.1-ce\n. I've noticed that the bug goes away while I sleep - which adds a nice incentive to having a rest... :-)\n\nI've turned off my PC at 00:18 and turned it on again at 08:11 this morning with the portainer interface running in Chrome (connected to a remote swarm cluster). \nDid another quick test and I think it could be connected to having the container log view (which automatically fetches updates) for a portainer agent container open in Chrome. . Did another quick test: With no portainer GUI open each agent eats around addtional 3MB per hour. With the container log view open in the web GUI this rockets to around 80 MB per hour.\nThis might be two distinct problems. . ",
    "wuyuans": "I have been running portainer_agent for one more day,its memory always increase.\ndocker:18.06.1-ce\nportainer/agent:latest@sha256:468f58ed0ae81cdae7dd377d813efbce6011709d1fe3b539f515d2e0623c40be\n\n. ",
    "timog": "We are also experiencing an increase in memory consumption over time.\nHere is an example of one of our servers. We see the same patterns over all installations.\ndocker: 18.09.0\nportainer: 1.19.2\n\n. > @timog these stats are related to a Portainer agent container right?\nright, running portainer/agent. We deployed the fix and here are the results after 24 hours:\n\nIt seems the issue is still present.\nHere is the same graph over the last four days:\n\nWe also capped the memory of the container to 300 MB, to avoid memory exhaustion. We couldn't see a similar behavior for other containers.. @ssbkang thanks, looks far better now:\n\nOccasionally there are some portainer agent containers going OOM though.. @ssbkang sure, I keep you updated. ",
    "harrygulliford": "Same issue, this is portainer/agent running over a 7 day period.\n\nDocker w/ Swarm 18.09.0\nPortainer 1.19.2\nportainer/agent:latest@sha256:468f58ed0ae81cdae7dd377d813efbce6011709d1fe3b539f515d2e0623c40be\nportainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc\n. The original graph I had provided (just realised) was combined for 2x running instances of the agent. Here is the split memory usage of those running instances for the same period.\n\n\n@harrygulliford can you tell us how did you deploy Portainer and the agent?\n\n```\nversion: \"3.3\"\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.agent\n      # AGENT_PORT: 9001\n      # LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - net\n    deploy:\n      mode: global\n      placement:\n        constraints:\n          - node.platform.os == linux\nweb:\n    image: portainer/portainer\n    command: -H tcp://tasks.agent:9001 --tlsskipverify\n    volumes:\n      - data:/data\n    networks:\n      - net\n      - proxy\n    deploy:\n      mode: replicated\n      replicas: 1\n      labels:\n        - \"traefik.port=9000\"\n        - \"traefik.docker.network=proxy\"\n        - \"traefik.frontend.rule=Host:example.com\"\n      placement:\n        constraints:\n          - node.role == manager\nnetworks:\n  net:\n    driver: overlay\n    attachable: true\n  proxy:\n    driver: overlay\n    external: true\nvolumes:\n  data:\n``. @chiptus Unfortunately, it seems like the same issue is still present. Have been runningfix1991` for 6+ hours now and here are the results:\n\n. ",
    "MohanrajBabu": "@ncresswell Thanks, that would be helpful, in our setup we need to set the iprange.. Its Linux host - ubuntu \nTried to create macvlan network using both ethernet and wifi interface.\n```\nenp0s25: flags=4099  mtu 1500\n        inet 192.168.25.12  netmask 255.255.255.0  broadcast 0.0.0.0\n        ether 3c:97:0e:bf:e5:24  txqueuelen 1000  (Ethernet)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device interrupt 20  memory 0xf1500000-f1520000  \nwlp3s0: flags=4163  mtu 1500\n        inet 192.168.15.138  netmask 255.255.255.0  broadcast 192.168.15.255\n        inet6 fe80::f72a:652a:147d:7745  prefixlen 64  scopeid 0x20\n        ether 08:d4:0c:09:56:dc  txqueuelen 1000  (Ethernet)\n        RX packets 195192  bytes 208545673 (208.5 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 146507  bytes 29856016 (29.8 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n```\n\nThanks and Regards,\nMohan\n. Tried that, still same issue.\n\n\nBelow are system details.\nKernel Version: 4.13.0-46-generic\nOperating System: Ubuntu 17.10\nDocker Server Version: 18.06.1-ce\nThanks and Regards,\nMohan. Thanks, my bad. Its working fine.. ",
    "nguacon90": "I deployed following by document: https://portainer.readthedocs.io/en/stable/deployment.html.\nAlso expose via tcp without SSL. So we should Secure Portainer using SSL to prevent all attacker who can scan web interface api?\nThanks.. Are your docker hosts exposed on the internet too?\nIt's not exposed, only private network. I will research more for the attack.\nThanks. . ",
    "rjbaat": "Ahh i got it working with: node.labels.rack instead of just rack \ud83d\udc4d. . Worked with: -e REGISTRY_STORAGE_DELETE_ENABLED=true. ",
    "jtbrough": "I ran into this issue today w/ Portainer 1.20.0. The password contained the following \"special characters\":\n(hash)\n?(question mark)\nChanging the Docker Hub password to avoid those characters, and then updating the password stored for the registry in Portainer allowed my push to succeed. It certainly feels like there is an encoding issue w/ the password in Portainer.. ",
    "xZero707": "Just found https://blog.linuxserver.io/2017/04/05/protainer-now-with-lsio/\nWhich states: No longer available in versions later than 1.18.0\nWhy? It was a great feature! :disappointed: . I see. Thanks for reply. \nI tried starting portainer with --templates https://tools.linuxserver.io/portainer.json but that didn't work either. \nI do not require these, so I'll learn to live without it. \nKeep up great work! :1st_place_medal: \n. Was just going to report this. \nI noticed it as well in version 1.20.0 and is quite annoying as container is rendered unusable after edit, as long as additional single quotes are not removed. \n. ",
    "jhamlin-tibco": "Thanks for the help.  New to Docker here and wasn't aware that versioning matched the Windows build number.  Is there a reason when running the basic command Install-Package -Name docker -ProviderName DockerMsftProvider -Force wouldnt return v18.03 on a Windows 1803 server?  \nThe only way I was able to force the upgrade to v18.03 was by running Install-Package -Name docker -ProviderName DockerMsftProvider -RequiredVersion 18.03 -Update -Force\nSorry for the additional questions - still learning and trying to understand some of the Docker functionality.. Thank you for the clarification!. ",
    "rraymakers": "This looks like the same problem as #2301.. ",
    "altmas5": "I'm facing the same issue, I was trying to start a Pi-Hole container from Portainer but I didn't find where to put the --dns=127.0.0.1 --dns=1.1.1.1. Hi @deviantony, I opened #2726 . ",
    "phikai": "@nemchik Are you running this via docker image? Did you need to mount an additional volume?\nJust voicing my opinion also that this needs to be at the very least an option. Especially for people running the docker container of Portainer.. ",
    "DavidFW1960": "FWIW, if you use Caddy, you can add this to the Caddyfile:\nheader_downstream -X-Frame-Options. ",
    "SuperTrembler": "Spent way to much time troubleshooting why portainer was not working with muximux anymore... Please make this an opt-out setting. ",
    "FinalDes": "the security header can add on proxy level, not on app level,\nsecondly can you guys provide the Content-Security-Policy header rule to let system administrator to hardening the server and prevent hack, and those header should document it.. ",
    "Warmduscher": "the same behavior can be seen on the CMD field.. ",
    "DirkBaumeister": "Nevermind. I have seen the breaking change note in your release notes. I will close the issue now because it is not relevant anymore.. Nevermind. I have seen the breaking change note in your release notes. I will close the issue now because it is not relevant anymore.. ",
    "nuxsmin": "\nLooks like a duplicate of #2020\n\nIt's indeed...just note this behavior also occurs in latest Portainer's version\nThanks!. ",
    "SoXX-TheFennec": "no, but I tried it again and now it worked. Apparently, you are now allowed to CamelCase it or have special characters in them. That's a strange issue. but now i somehow get a different problem, when i try to update the stack portainer fails to do so.\nVolume \"db\" needs to be recreated - driver has changed\nwhy is that? Do i really need to delete the volume every time?. > yes, but as reported in #2020 it should create two stack (one empty and one containing your containers). If you cannot reproduce this 2 stacks problem, I'll keep this issue open as another problem.\nPortainer only created one stack for me, but it was empty as you can see. I don't get anything else.. Hello there, well I have the same issue but I used the correct Template structure. In fact, I copied the first entry from the docs to see if this resolves my issue. but it still won't work.\nI have a local Nginx server running as a Docker Container that serves the template.jason file. I can access it with my browser and therefore it works. But it seems that Portainer is unable to reach it.\nI used this snipped to test it.\nJSON\n[\n  {\n    \"type\": 1,\n    \"title\": \"Nginx\",\n    \"description\": \"High performance web server\",\n    \"logo\": \"https://cloudinovasi.id/assets/img/logos/nginx.png\",\n    \"image\": \"nginx:latest\",\n    \"ports\": [\n      \"8080:80/tcp\",\n      \"443/tcp\"\n    ]\n  },\n  {\n    \"type\": 1,\n    \"title\": \"Nginx2\",\n    \"description\": \"High performance web server\",\n    \"logo\": \"https://cloudinovasi.id/assets/img/logos/nginx.png\",\n    \"image\": \"nginx:latest\",\n    \"ports\": [\n      \"8080:80/tcp\",\n      \"443/tcp\"\n    ]\n  }\n]\nI run everything locally on my Mac, I also tested it on my Windows and Linux machine. I always get the same error. \nHere is the output from the Portainer log file:\n\n2018/10/27 10:13:15 HTTP error: Unable to retrieve external templates (err=Get http://localhost:8080/templates.json: net/HTTP: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)) (code=500)\n\nAnd some information about my docker/portainer setup.\n\nFresh install docker (version 18.06.1-ce) and portainer (1.19.2).\nDocker  and Portainer in Swarm mode\n. Yeah, that would make sense, but I tried now to make my the Server public and yet I have the same error. You can visit it here Template. It seems like that Portainer has a very hard time communicating with the Internet.\n\n\n2018/10/28 08:26:12 http error: Unable to retrieve external templates (err=Get http://fenpa.ws:4040/templates.json: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)) (code=500)\n2018/10/28 08:26:47 http error: Unable to retrieve external templates (err=Get http://fenpa.ws:4040/templates.json: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)) (code=500). Hmm, I will investigate this further. But thanks for the quick response.. \n",
    "frafra": "\nbut now i somehow get a different problem, when i try to update the stack portainer fails to do so.\nVolume \"db\" needs to be recreated - driver has changed\nwhy is that? Do i really need to delete the volume every time?\n\nSame issue here.. deleting and creating the stack has the same effect; volumes are not reused, and the new stack cannot be created:\n{\"err\":\"Volume \\\"ckan_storage\\\" needs to be recreated - driver has changed\",\"details\":\"Volume \\\"ckan_storage\\\" needs to be recreated - driver has changed\"}\n. Related to: https://github.com/docker/libcompose/issues/509\n@SoXX-TheFennec just add driver: local below every volume you define in docker-compose.yml. This is an external bug related to libcompose, not to portainer.. Ok, I played around with different line ending because I thought it could be related to it, but I was able to go forward using version: \"2\" instead of version: \"3\"; maybe those are two different issues (API not supporting version 3 and strange error / stack added but hidden).. Ah, I also get \"ghost\" containers when adding two different stacks using the same docker-compose files, but the first files due to a forbidden access error to an external registry.. Note: I did not added the same stack twice, but I got two stacks due to #2020.. Workaround: create the missing network and delete the stack.. Workaround: add an environment section to the docker-compose.yml on-the-fly (and do not send Env key):\n```\ncompose = open(args.stack_dir+'/docker-compose.yml').read()\nenv = dict(l.strip().split('=') for l in open(args.stack_dir+'/.env').readlines())\nWorkaround\nimport string\ncompose = string.Template(compose).substitute(env)\n```. Ops, sorry! :-). ",
    "Hugo1380": "@deviantony With stack deploy according to the documentation. Yes like this : \n$ curl -L https://portainer.io/download/portainer-agent-stack.yml -o portainer-agent-stack.yml\n$ docker stack deploy --compose-file=portainer-agent-stack.yml portainer. Yes, I added the TLS verification to my Docker Swarm, It wasn't originally.. Ok I will ping you on Slack !. Configure your TLS in the Docker daemon, rm and redeploy Portainer. And that work !. I don't see any side effect for this feature, that's right ?. ",
    "rushirajsilvertouch": "Fixed the issue Lapenna  - Kindly check again.. Required small changes and validation are done - kindly check.. Required small changes and validation are done - kindly check.. - We have added User Id stored when creating the key and store whole stack module with new deploy key option. ->  Kindly check.\n\nGive the actual ability to use the key to clone a git repository -> Can you provide the brief overview on how ssh key would be utilised to clone the repository? . \n",
    "xiejiangzhi": ":+1: \nI link a stack with a repo is better. \nManage stack is hard. When someone change the stack, I cannot know who changed it and what was changed.\nIf we can read a docker-compose.yml from a git repo and automaticaly update stack when this repo updated, I think it will be nice.. ",
    "aleex1848": "i just ran into the same problem.\nUbuntu 18.04.2 LTS \nDocker version 18.09.2, build 6247962\nportainer 1.20.1\nI set up a stack with different services and a bunch of environment variables. (it's a mailu stack)\nAt first environment vars where fine. I did not get it running so for troubleshooting i scaled one service from 1 to 0 and back to 1. At this moment when i changed scaling the service was in state \"rejected\" with error \"mount config for type \"bind\": bind source path does not exist:\" Maybe this has something to do with the occuring problem?\nAfter scaling this specific service has no environment variables. i tried to remove/prune all services but no luck.\nEdit: all the stack's services loosed the env variables, not only the scaled service.\ni copied my variables as .env file in the portainer_data/data/compose/X directory and referenced the file in the stack config to get it running.\n. ",
    "Mario-Hofstaetter": "\nDuplicate of #1379\nRegarding your problem, you could use Portainer API to automate the access control policy creations. For example, you could do something similar to this:\n* Send a GET request on `api/endpoints/<endpointId>/docker/containers/json` to retrieve the list of all the containers in your endpoint\n\n* For each container, send a POST request to `api/resource_controls` to create a public access control policy\n\nMore information about the usage of the Portainer API here: https://portainer.readthedocs.io/en/stable/agent.html\n\nThank you, with that i managed to set one container to public, now I have to write a tool for that.\nUnfortunately I feared that would be the answer. I now have to write a tool to comfortably control a tool which I installed to comfortably another tool :-(\n\nIs it possible to downgrade to older portainer Versions?\nAlternativly: Ist ist Possible to Change the DEFAULT owernship of containers created outsite of portainer?\n\nThanks.. > Yes, by reverting to Portainer < 1.19.2, all your resources should go back to public again.\nThank you, successfully switched to 1.19.1, and back to public.\nWill follow #1257 \nSince this is a test server, everything except portainer itself is public... ",
    "ondrejmirtes": "Oh, I figured it out thanks to https://github.com/portainer/portainer/issues/986#issuecomment-313865680, there's something weird going on with Docker and symlinks.. ",
    "Kantankerus": "Just ran into this, thanks for the pointers.  Since the official documentation mentions the possibility of using certbot (in passing), would it be a good idea to package this solution up into the official documentation or a link to it?. ",
    "HenriWahl": "Sounds cool - thanks!\n:+1: . ",
    "zhujik": "Ok my mistake was, that I had also defined \"preset\": true for those select values. The effect was that once I hit \"deploy stack\", the values where set back to the preset value, which is for selects nothing. . ",
    "alancapc": "we have found that issue as well. . ",
    "Hydragyrum": "This issue still seems to affect v1.20.1\nIf a preset value exists, it overrides the value list, even if the value list is selected.. Hello,\nIt appears that clearing the free-text input default value as well as the preset will force the selection properly. If one and/or the other is filled, then the preset value will take precedence.\nThere's still something unintuitive happening, but it's not as serious a bug as expected.. ",
    "rishipuri": "The issue here is with Compatibility Mode.\nThe screenshot shows it is running on IE7 which is quite old and probably not supported by portainer (although I can't find what browser portainer supports).\nChanging the Compatibility Mode to IE10 or above will fix the issue. . The issue here is with Compatibility Mode.\nThe screenshot shows it is running on IE7 which is quite old and probably not supported by portainer (although I can't find what browser portainer supports).\nChanging the Compatibility Mode to IE10 or above will fix the issue. . ",
    "kyalha": "@deviantony Thank you so much for approving!  :+1: . ",
    "jolleybin": "I also encountered the same problem today.\nDocker-runc for docker version 1.13.1 in system path /usr/libexec/docker/\nOnly the file name is docker-runc-current, and no system environment variables have been added.\nYou only need to execute the following command in the system to temporarily solve this problem:\ncd /usr/libexec/docker/\ncp docker-runc-current /usr/bin/docker-runc. Hi @deviantony\nI use this image to deploy the container after the test creation container can be created successfully.\nDid not encounter the previous error.\nThanks.\n. ",
    "croozey": "\nHey @GoncaloBorges @jolleybin\nAny of you could give a try to portainer/portainer:fix2314-docker-runc (linux amd64 only) and tell us if that solves your issue?\n\nYep, that fixed it for me :)\nCheers.. ",
    "gonzalesraul": "Hi, I believe the issue you are facing is that the image you are trying to use as a service there is no PID/process running.\nWhen you allocate a tty for your container, what it does is to run CMD instruction on centos Dockefile (/bin/bash) so then you will have a process running.\nJust to remember container are not virtual machines, and they serve a purpose, in this case, I would recommend you to extend that image (if you want it) and put your process to run.\nAnyway, there is till another option but if I would not recommend it except for testing purpose, you can add a command that hangs a pid there so the container will get up and running, for instance:\nsh\ndocker service create --replicas 1 --name os1 docker.io/centos:6.9 sleep infinity. ",
    "jedduff": "Yeah, I have this issue too. Cannot set network to container. But if I do it in cli, it run perfectly. ",
    "agster27": "I have the exact same issue as well.. ",
    "imWildCat": "Same issue found in 1.20.0. I am currently using Gitlab Registry.\nThe issue is that:\nAfter POST to the webhook, the related service is recreated. However, the image is not updated.\nPlease note that the image tag is not latest. Instead, it is branch name (e.g. master).\n. I am glad to say this problem can be resolved by adding this flag: --with-registry-auth when executing docker stack deploy.... ",
    "karimebiznext": "The command was wront this is the correct one :\ndocker run -p 9000:9000 -v \"/var/run/docker.sock:/var/run/docker.sock\" 4cf9d0df5885 .\n",
    "zablah": "It's not a cache problem, I'm using Private Browsing - incognito and a deferent browser such as firefox and chrome,\nas I Say before the error come from image load, so it's not a cache problem>. @deviantony \nI already create an administrator user but I can't login\nI got this error when I trying to create an administrator user:\nhttp error: Unable to create administrator user (err=An administrator user already exists) (code=409)\nand when I try to login I got:\nYour session has expired\nand I trying multi-browser with multi-profile, and private - incognito . ",
    "antonio-petricca": "I got the same error on a fresh installation!\n```\ndocker volume create portainer_data\ndocker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\n```. Hi, I get this:\n\n. Hi, there are the only log messages:\n\n2018/10/24 14:57:58 Templates already registered inside the database. Skipping template import.\n2018/10/24 14:57:58 Starting Portainer 1.19.2 on :9000\n2018/10/24 14:58:48 http error: No administrator account found inside the database (err=Object not found inside the database) (code=404)\n. Hi, I attached the request/response dumped by Opera network analysis tool. \n\nWhen I send the request I get a 403 error wich results in the above mentiod red error alert.\nlocalhost.zip\n. Hi, here some screenshots about error response:\n\n\n\n\n. I havesimply installed it as explained by https://portainer.io/install.html several times, on my PCs and on production environments, but this is the 1st time I get this problem!. I am on Linux Mint Mate 4bit (Ubuntu 18.04), 8Gb RAM, Docker 18.06.1-ce, build e68fc7a .\nAs I stated previously I use portainer with success since many time, and I did never get this problem!\nIs there some switch to increment log verbosity?. I did it several times, but nothing changed. I still getting the same error!\nOn Mon, Oct 29, 2018 at 9:12 AM Anthony Lapenna notifications@github.com\nwrote:\n\n@antonio-petricca https://github.com/antonio-petricca nope, no way to\naugment log verbosity.\nThis is a pretty strange issue and it's not really the same error as the\none reported by the OP. Long shot here, could you try to remove the\nportainer image and to re-deploy it?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2332#issuecomment-433821669,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGWhIoMtWcdt9gIz0WzM4qa2qo7SwQxzks5uprhzgaJpZM4XHrgk\n.\n. I use use Opera, for Production too.\n\nI switched on my Laptop to Firefox, and I could create the admin account!!!\nI used thre credentials on Opera, and it still doesn't work.\nNo problem, I will use Firefox for Portainer. :)\nThank you very much for your assistance!\nOn Mon, Oct 29, 2018 at 9:16 AM Anthony Lapenna notifications@github.com\nwrote:\n\n@antonio-petricca https://github.com/antonio-petricca tried with\nanother browser?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/portainer/portainer/issues/2332#issuecomment-433822716,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AGWhIo9lzbNxF3pnxRbDHRqxu_B7OJ-Jks5uprl2gaJpZM4XHrgk\n.\n. \n",
    "gitzhou": "Got the same problem. \nInspect the image latest tag on Docker Hub, found it was built 2 months ago\n\nSo I tried the tag fix2443-offline-browsing-perfomances, issue fixed... \n\n\ud83d\ude04  . > @gitzhou I'd recommend trying with develop instead, fix2443-offline-browsing-perfomances has not been merged nor tested yet.\n\nAre you using Opera as well?\n\nHi @deviantony  Thanks for teaching, I'll change the image tag.\nNo, I've tried Chrome and Firefox and both of them gave the same error message. ",
    "timhibberd": "Try restarting Docker. On my Windows 10 computer I launch Docker and once it is running I launch Portainer and get this error. If I then restart Docker, wait until it is running again and then try running Portainer it works fine. I have this problem on every boot and the Docker restart fixes the problem every time. This has been going on for as long as I can remember.\nThis Docker restart issue has been around for a while. See https://github.com/docker/for-win/issues/2303 (which appears closed but only because people gave up trying to figure out the root cause and just restart Docker to fix the problem).. ",
    "leMaik": "Same here, using Portainer 1.19.2\nWhat can I do to help fixing this?. @deviantony Hm\u2026 That doesn't work either, put I am able to pull an image manually with docker pull.\nCreating a service without manually pulling the image first results in Image not found errors. So I guess it's not a portainer issue then.. ",
    "SMARoovers": "If you're using Active Directory you could try and use this:\n(&(objectCategory=user)(memberOf:1.2.840.113556.1.4.1941:=CN=Developers,OU=Company,DC=Domain,DC=local)). I'm having some issues regarding LDAP too and am looking for some confirmation on the issue. But the screenshot leads to a Slack workspace I do not have access to. Would you mind explaining your issue a bit further or open up the screenshot?. I have the exact same issue. LDAP works fine but after I change something it breaks.\nUndoing the change does not help.\nWe are using Active Directory.\nI've had this issue with running Portainer in Windows Containers as well as running it in Ubuntu.\nThis is what Portainer is showing in the logs:\n2019/01/23 08:33:08 http error: Invalid credentials (err=Unauthorized) (code=422)\nUpdate: After filling in the reader password again, it started working again.. ",
    "xbebber": "I am having the same issue.. ",
    "bigmacd": "This code should fix this issue: \n```diff --git a/api/crypto/tls.go b/api/crypto/tls.go\nindex 641aed1..3c8ba01 100644\n--- a/api/crypto/tls.go\n+++ b/api/crypto/tls.go\n@@ -26,6 +26,7 @@ func CreateTLSConfigurationFromBytes(caCert, cert, key []byte, skipClientVerific\n                config.RootCAs = caCertPool\n        }\n\nconfig.MinVersion = tls.VersionTLS11  // feat2359 removed deprecated TLS1.0 protocol\n        return config, nil\n }\n\n@@ -54,6 +55,7 @@ func CreateTLSConfigurationFromDisk(caCertPath, certPath, keyPath string, skipSe\n                caCertPool.AppendCertsFromPEM(caCert)\n                config.RootCAs = caCertPool\n        }\n\nconfig.MinVersion = tls.VersionTLS11  // feat2359 removed deprecated TLS1.0 protocol\n        return config, nil\n }```\n\nCan I contribute this?. Done.  PR 2382.. gofmt is failing on line 1:\npackage crypto\nI don't see what is wrong with that line.. ran gofmt -w on tls.go and committed the change.  . ",
    "jeffglousher": "I am also using swarm on Ubuntu 18.04.1 with 5 nodes. I followed those deployment directions exactly and have the same error. I also tried tweaking a few things in the file and making it so that I can run without sudo and there was no success.\nI think this is related to the OP, but if following the docs works for @andydrew23 then I can make a separate issue. This is a testing swarm so I am free to try any suggestions.. Thanks to both of you for the fast replies. The linkedin post similar to my config is option 1, new instance with agent(s) on all nodes including the portainer node. The stack file looks the exact same as what you have on https://portainer.readthedocs.io/en/stable/deployment.html\n\nUbuntu 18.04.1 LTS (GNU/Linux 4.15.0-36-generic x86_64)\n\nI made the change to the stack file and here is my command trace:\nbox@ubuntu-1:~$ nano portainer-agent-stack.yml\nbox@ubuntu-1:~$ docker service rm portainer_portainer\nportainer_portainer\nbox@ubuntu-1:~$ docker service rm portainer_agent\nportainer_agent\nbox@ubuntu-1:~$ docker service ls\nID                  NAME                MODE                REPLICAS            IMAGE               PORTS\nbox@ubuntu-1:~$ docker volume ls\nDRIVER              VOLUME NAME\nbox@ubuntu-1:~$ docker stack deploy --compose-file=portainer-agent-stack.yml portainer\nCreating service portainer_portainer\nCreating service portainer_agent\nbox@ubuntu-1:~$ docker service ls\nID                  NAME                  MODE                REPLICAS            IMAGE                        PORTS\nv9gs5pfojx1x        portainer_agent       global              0/5                 portainer/agent:latest\nibvq0nxa0qy7        portainer_portainer   replicated          0/1                 portainer/portainer:latest   *:9000->9000/tcp\nbox@ubuntu-1:~$ docker service ps portainer_portainer\nID                  NAME                        IMAGE                        NODE                DESIRED STATE       CURRENT STATE             ERROR                              PORTS\nidyix2zdy3j5        portainer_portainer.1       portainer/portainer:latest   ubuntu-1            Ready               Rejected 3 seconds ago    \"mkdir /var/lib/docker: permis\u2026\"\nkywo2lo82o2z         \\_ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 8 seconds ago    \"mkdir /var/lib/docker: permis\u2026\"\ns1kjy93anr91         \\_ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 13 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\no30pl0e84hj1         \\_ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\nqc15rrbpmoy3         \\_ portainer_portainer.1   portainer/portainer:latest   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permis\u2026\"\nbox@ubuntu-1:~$ docker service ps --no-trunc portainer_portainer\nID                          NAME                        IMAGE                                                                                                NODE                DESIRED STATE       CURRENT STATE             ERROR                                        PORTS\nt7w1unpvmbeagad7ofx45mpia   portainer_portainer.1       portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Ready               Rejected 3 seconds ago    \"mkdir /var/lib/docker: permission denied\"\nli44aymkzs5itrks7dnmne8lv    \\_ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 8 seconds ago    \"mkdir /var/lib/docker: permission denied\"\ndyk7pbftgf1ud40mhdam4i4o5    \\_ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 13 seconds ago   \"mkdir /var/lib/docker: permission denied\"\nt1r4fndw629ybypx9uf3rjftr    \\_ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 18 seconds ago   \"mkdir /var/lib/docker: permission denied\"\ns1kjy93anr91kqmje1q87qq5w    \\_ portainer_portainer.1   portainer/portainer:latest@sha256:07c0e19e28e18414dd02c313c36b293758acf197d5af45077e3dd69c630e25cc   ubuntu-1            Shutdown            Rejected 33 seconds ago   \"mkdir /var/lib/docker: permission denied\"\nI still have the error \"mkdir /var/lib/docker: permission denied\"; am I doing anything wrong?. To install docker this way I setup a fresh Ubuntu VM. I used the built in option when installing Ubuntu to include docker. (when installing Ubuntu it gives you the option to include various tools, not sure what they call this)\nI didn't configure any AppArmour, but I did setup docker to run without sudo.\nNow that I'm checking it looks like this install method installs docker as a snap, so it looks like this could be the issue:\nbox@ubuntu-1:/etc/default$ docker info\nContainers: 0\n Running: 0\n Paused: 0\n Stopped: 0\nImages: 2\nServer Version: 18.06.1-ce\nStorage Driver: aufs\n Root Dir: /var/snap/docker/common/var-lib-docker/aufs\n Backing Filesystem: extfs\n Dirs: 4\n Dirperm1 Supported: true\nI'll pull the logs now, but I think you found the issue for me!. Yeah... Thanks for the help guys, I didn't even realize this was a snap, or that it had an abnormal setup until now. \nI don't have time today, but ill change the swarm config around and maybe rebuild the base Ubuntu image and test again. I bet there will be no issues then!. ",
    "sqrtroot": "Output of docker inspect (interesting mount part)\n\"Mounts\": [\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/data/compose/13/Config/HomeAssistant\",\n                \"Destination\": \"/config\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"rprivate\"\n            }\n        ],. Just tested this with alpine instead of home assistant. The issue still persists. It also shows this behaviour when you don't use a git repo but just a plain docker-compose file from the text editor. Any suggestions on where this problem could come from? I've read #1647 should fix that, but it doesn't look like it does.. ?. ",
    "6mon": "Hello,\nI also encounter this problem. Hello,\nI also encounter this problem. ",
    "michelkaeser": "+1 I have the same expectations as OP. ",
    "mmgil": "Hi @deviantony \nThanks for your attention.\nThe version Windows is: 10.0.17134.0\nI Create an cluster server with SMB 3.0 using SOFS (Scale Out File Server) and create an SMB Global Mapping for persist data of containers created.\nI used in the following document: https://docs.microsoft.com/en-us/virtualization/windowscontainers/manage-containers/container-storage\nNo error appears. Container simply gets the status Exited\nIf I use the volume C: it works, but this way I can not convert it into service to other nodes of the swarm provide high availability with persistence of the data.\nIn EventVwr Appears this Warning:\n\nIndex              : 946019\nEntryType          : Warning\nInstanceId         : 11\nMessage            : unable to get exit code for process [process=init error=process 1392 in container ca1f85dc51cdf73d3908ea10a9da97c40237e19039140a522afb0774d85140df encountered an error during ExitCode: failure in a\n                     Windows system call: Sistema de computa\u00e7\u00e3o encerrado inesperadamente. (0xc0370106) module=libcontainerd namespace=moby container=ca1f85dc51cdf73d3908ea10a9da97c40237e19039140a522afb0774d85140df]\nCategory           : (0)\nCategoryNumber     : 0\nReplacementStrings : {unable to get exit code for process, process=init error=process 1392 in container ca1f85dc51cdf73d3908ea10a9da97c40237e19039140a522afb0774d85140df encountered an error during ExitCode: failure in a\n                     Windows system call: Sistema de computa\u00e7\u00e3o encerrado inesperadamente. (0xc0370106) module=libcontainerd namespace=moby container=ca1f85dc51cdf73d3908ea10a9da97c40237e19039140a522afb0774d85140df}\nSource             : docker\nTimeGenerated      : 20/10/2018 15:13:53\nTimeWritten        : 20/10/2018 15:13:53\nUserName           :\n\n\n. @ncresswell \nYes. The container microsoft/windowsservercore:1709 is working, for example.\n. @deviantony \ni dont tryed with tag windows1709-amd64.\nthis moment my portainer is working in a Failover Cluster Microsoft without container.\nBut that's a good idea. I'll try and if necessary open a new issue here.. @xcbeyond \nI have not used Build or Docker-compose for Portainer deployment.\nAt another time I will try to use tag informed by the @deviantony.\nAt this point my portainer is running as a process with the Microsoft Failover Cluster. I downloaded the agent manually and registered as a resource in my failover cluster.\n\n. The output of the command\n\ndocker -H localhost info\nContainers: 1\n Running: 0\n Paused: 0\n Stopped: 1\nImages: 2\nServer Version: 18.06.1-ce\nStorage Driver: windowsfilter (windows) lcow (linux)\n Windows: \n LCOW: \nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: ics l2bridge l2tunnel nat null overlay transparent\n Log: awslogs etwlogs fluentd gelf json-file logentries splunk syslog\nSwarm: active\n NodeID: 761t2eo2xo7z0eyf6c2p5c7rl\n Is Manager: true\n ClusterID: tn35ptif9ogg55tkk7h67mm64\n Managers: 2\n Nodes: 2\n Orchestration:\n  Task History Retention Limit: 5\n Raft:\n  Snapshot Interval: 10000\n  Number of Old Snapshots to Retain: 0\n  Heartbeat Tick: 1\n  Election Tick: 10\n Dispatcher:\n  Heartbeat Period: 5 seconds\n CA Configuration:\n  Expiry Duration: 3 months\n  Force Rotate: 0\n Autolock Managers: false\n Root Rotation In Progress: false\n Node Address: 10.10.0.201\n Manager Addresses:\n  10.10.0.201:2377\n  10.10.0.202:2377\nDefault Isolation: hyperv\nKernel Version: 10.0 17134 (17134.1.amd64fre.rs4_release.180410-1804)\nOperating System: Windows 10 Pro for Workstations Version 1803 (OS Build 17134.286)\nOSType: windows\nArchitecture: x86_64\nCPUs: 8\nTotal Memory: 31.89GiB\nName: HOSTSERVER01\nID: OJMT:CGFD:N6GG:4RG3:YQNY:ZFPQ:QOPK:CQ4X:U3UI:UX4S:TMNA:T4K5\nDocker Root Dir: C:\\ProgramData\\Docker\nDebug Mode (client): false\nDebug Mode (server): true\n File Descriptors: -1\n Goroutines: 124\n System Time: 2018-10-28T01:37:43.2394993-03:00\n EventsListeners: 0\nRegistry: https://index.docker.io/v1/\nLabels:\nExperimental: true\nInsecure Registries:\n 127.0.0.0/8\nLive Restore Enabled: false\n. Hi @olljanat \n\nThanks for you attention.\nI am running Docker in Windows Mode.\n\n. Hi @olljanat \nI used this command:\n\ndocker run -d --name portainer_agent --restart always\n-e AGENT_CLUSTER_ADDR=tasks.agent --mount type=npipe,source=\\\\.\\pipe\\docker_engine,target=\\\\.\\pipe\\docker_engine\nportainer/agent\n\nWithout network overlay I receive the related errors in this topic.\nWhen I created a network overlay and I used this command recommended by you, I get this error:\n\nI must be wrong about something very simple in this last situation.. @ssbkang \nI am running Docker for Windows.\nMy Docker Engine don't is Enterprise Edition.\nMy Docker Engine is Community Edition (18.06.1-ce). \nWill I have to migrate to Windows Server 2016?\nUnfortunately, I have no way to install 1709 or 1803, only the Long-Term Servicing Channel (1607)\nIn this version the Docker does not support the \\.\\pipe. My environment is a pilot environment.\nI have a very low budget to enable an internal cloud solution using Microsoft solutions.\nAs I do not have Windows Server 1709 or 1803 in this pilot environment, I installed Windows 10 which is something equivalent to server 1803, with the exception of Docker be an version Community.\nIf I can make this project viable with Windows 10, I'm sure to justify investing to acquire Windows Server 1709 or 1803 through a Software Assurance agreement.\nThe Portainer is a fantastic tool that will help me to make this pilot project viable.\nA Cloud portal will consume the Portainer API's to create and show the environments per client (multi-tennant).\nBut I think I'll have to go to Windows Server 1803 in this pilot environment.. In this moment, my Portainer that running without docker in a Microsoft Failover Cluster. This is a other environment over this Dockers Servers.\nThe communication between servers of the Portainer and Docker Servers is through TCP using the port 2375... And this working very fine.\nI followed this way to ensure the persistence of the data of the Portainer, because I could not persist the data in a Global Mapping SMB\nBut, now, i need of the agent using npipe\n\n. @olljanat \nYeah!\nExactly.\nYou're absolutely right.. And how would it be in the case of the Portainer Agent in W2K19? (https://hub.docker.com/r/portainer/agent). >           FYI portainer agent version 1.2.1 has been released and should be compatible with Windows 1809. Portainer 1.20.1 coming soon.\n@deviantony \nI try to installer the portainer agente usgin:\ndocker run -d --name portainer_agent --restart always --network portainer_agent -e AGENT_CLUSTER_ADDR=tasks.portainer_agent --mount type=npipe,source=\\\\.\\pipe\\docker_engine,target=\\\\.\\pipe\\docker_engine portainer/agent:windows1809-amd64\nBut i receive the following error in docker logs:\n`\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc0001a3ee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc0001a3ee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc0001a3ee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc0001a3ee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc0001a3ee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc00017dee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc00017dee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc000177ee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc0001a3ee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\n`\nDid I do something wrong?. @deviantony \ni receive this error using this command:\n2019/01/24 08:35:28 [ERROR] - Error during agent initialization: AGENT_CLUSTER_ADDR environment variable is required\nAnd using:\ndocker run --rm -e AGENT_CLUSTER_ADDR=tasks.portainer_agent -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine portainer/agent\nreturn:\n2019/01/24 08:38:07 [ERROR] - Unable to retrieve advertise address: Unable to retrieve the address on which the agent can advertise. Check your network settings\nso, i create a overlay network:\n\nand i tryed this:\ndocker run --rm --network portainer_agent -e AGENT_CLUSTER_ADDR=tasks.portainer_agent -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine portainer/agent\nand:\n```\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc00017dee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\n```\nLooks like he's having trouble getting the address of the container.\n@StefanScherer \nIs there missing any DLL on NanoServer1809 for this method of the go get the address?\n. @deviantony \nWould you like me execute this command on a docker node without a swarm?. > @mmgil most probably that happens because code cannot find network card.\n\nCan you share docker info output from node where you are trying to run this?\n\n@olljanat \nThis is the docker info in my environment:\nPS C:\\> docker info\nContainers: 1\n Running: 1\n Paused: 0\n Stopped: 0\nImages: 2\nServer Version: 18.03.1-ee-5\nStorage Driver: windowsfilter\n Windows:\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: ics l2bridge l2tunnel nat null overlay transparent\n Log: awslogs etwlogs fluentd gelf json-file local logentries splunk syslog\nSwarm: active\n NodeID: 9bcz24ufxtr2q5xvxbk5tuwtj\n Is Manager: true\n ClusterID: zvrdvwubc4o5y91n33rf1wz73\n Managers: 4\n Nodes: 4\n Orchestration:\n  Task History Retention Limit: 5\n Raft:\n  Snapshot Interval: 10000\n  Number of Old Snapshots to Retain: 0\n  Heartbeat Tick: 1\n  Election Tick: 10\n Dispatcher:\n  Heartbeat Period: 5 seconds\n CA Configuration:\n  Expiry Duration: 3 months\n  Force Rotate: 0\n Autolock Managers: false\n Root Rotation In Progress: false\n Node Address: 10.10.0.63\n Manager Addresses:\n  10.10.0.61:2377\n  10.10.0.62:2377\n  10.10.0.63:2377\n  10.10.0.64:2377\nDefault Isolation: process\nKernel Version: 10.0 17763 (17763.1.amd64fre.rs5_release.180914-1434)\nOperating System: Windows Server 2019 Datacenter Version 1809 (OS Build 17763.107)\nOSType: windows\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 3.999GiB\nName: Docker03\nID: 4KHT:MGGV:EAOP:MLF3:JST2:CWTH:ZPLS:NPWR:7QWM:MUF3:UGIS:JFZI\nDocker Root Dir: C:\\ProgramData\\docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nLabels:\nExperimental: false\nInsecure Registries:\n 10.10.0.0/24\n 127.0.0.0/8\nLive Restore Enabled: false. @olljanat \nI've performed the update in the environment, this is the result of the docker info:\nContainers: 4\n Running: 1\n Paused: 0\n Stopped: 3\nImages: 2\nServer Version: 18.09.1\nStorage Driver: windowsfilter\n Windows:\nLogging Driver: json-file\nPlugins:\n Volume: local\n Network: ics l2bridge l2tunnel nat null overlay transparent\n Log: awslogs etwlogs fluentd gelf json-file local logentries splunk syslog\nSwarm: active\n NodeID: xoqobpg417er8csie9wojlki8\n Is Manager: true\n ClusterID: zvrdvwubc4o5y91n33rf1wz73\n Managers: 4\n Nodes: 4\n Default Address Pool: 10.0.0.0/8\n SubnetSize: 24\n Orchestration:\n  Task History Retention Limit: 5\n Raft:\n  Snapshot Interval: 10000\n  Number of Old Snapshots to Retain: 0\n  Heartbeat Tick: 1\n  Election Tick: 10\n Dispatcher:\n  Heartbeat Period: 5 seconds\n CA Configuration:\n  Expiry Duration: 3 months\n  Force Rotate: 0\n Autolock Managers: false\n Root Rotation In Progress: false\n Node Address: 10.10.0.62\n Manager Addresses:\n  10.10.0.61:2377\n  10.10.0.62:2377\n  10.10.0.63:2377\n  10.10.0.64:2377\nDefault Isolation: process\nKernel Version: 10.0 17763 (17763.1.amd64fre.rs5_release.180914-1434)\nOperating System: Windows Server 2019 Datacenter Version 1809 (OS Build 17763.253)\nOSType: windows\nArchitecture: x86_64\nCPUs: 4\nTotal Memory: 3.999GiB\nName: Docker02\nID: FGBN:GMVD:R6YM:4DHI:GMSP:73IY:LV4O:MIJI:5VEC:5NNC:MLMO:46EO\nDocker Root Dir: C:\\ProgramData\\docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nLabels:\nExperimental: false\nInsecure Registries:\n 10.10.0.0/24\n 127.0.0.0/8\nLive Restore Enabled: false\nbut, occurs the same error in portainer\\agent using docker run --rm --network portainer_agent -e AGENT_CLUSTER_ADDR=tasks.portainer_agent -v \\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine portainer/agent:\n```\npanic: runtime error: index out of range\ngoroutine 1 [running]:\nmain.retrieveAdvertiseAddress(0xac34e3, 0x1c, 0xc0001a3ee8, 0x1)\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:103 +0x396\nmain.main()\n        /home/tony/workspaces/go/src/github.com/portainer/agent/cmd/agent/main.go:144 +0x261\n```\ni'll try run a container with the image mcr.microsoft.com/windows/nanoserver:1809 in the network overlay portainer_agent to see if network is all right.. I executed two containers, one in node Docker01 and one in node Docker04 using overlay network portainer_agent and is working normally\n\n. > \n\n@mmgil are you using some special configuration which disables IPv6, etc? I can see that Link-local IPv6 Address is missing from those pictures. I just tested on my Win 2019 lab machine that it exists on there.\nCurrently Portainer agent is using second IP address from first vEthernet interface which it can find as normally first IP is link-local IPv6 and now it is failing on your env as there is only one IP.\n\noooooh, That must be it.\nIn fact I disabled the IPV6 of the template of the Virtual Machine in my environment.\nI will activate IPV6 in this environment and test again.. AND... vooooia l\u00e1 My Friends...\nIt's working. You are the sacred Monsters of the Portainer and Docker. Thank you very much for your help and congratulations.\n2019/01/24 19:58:33 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true). ",
    "jstuhli": "I can confirm the issue, same use case. Created the stack with the local docker endpoint, added portainer agent, removed the local endpoint, and now I'm unable to use the stacks I've created with portainer. The only solution I see is to remove the stack and recreate it.. ",
    "linehrr": "this change will be very similar to existing PR that's merged: https://github.com/portainer/portainer/pull/1516/files. found an issue.\nwhen container is configured with logging driver and option, it's not preserved or parsed out from docker inspect when trying to duplicate/edit. it basically falls back to default logging always, and user then needs to re-type the logging options and drviers.\nthis is from testing on portainer/portainer:pr2384\n\n. ",
    "irwiss": "For me this happens much more often if the image is pre-pulled or already on disk and much less often if the image is downloaded. ",
    "Trojan295": "I would like to handle this. No biggie :). Changed. ",
    "pch18": "1.19.2. version is 1.19.2. ",
    "kennyparsons": "I also have this issue. version 1.20.0. ",
    "hzlmn": "Seems like good first issue @deviantony can i take a look on this?. ",
    "JTT-JustTheTip": "Im fairly sure its mounted properly, I'm able to access the mount via the host effectively and all my other containers have there configs there and they seem to be able to access it. Would there be a definitive way of determining whether its been mounted or not?. No the config persists, so the mount must persist if that's the case, I have noticed an issue with the mount in that it has issues making folders in the docker config directory, I'm looking into that to see if that could be a cause . Seems to have been an issue with the way I was naming the docker compose files when i was uploading them, they were all called docker-compose.yml. The moment I changed the compose file names and rebuilt the stacks using those new files it was fine again after a host restart. \nCould it be possible to check for conflicting compose file names upon upload? That could stop the issue for future users? (Thats assuming that ive found the issue and not just hit pot luck ahahaha). ",
    "mkmitchell": "Yes sir.  You're absolutely correct!\nThank you. ",
    "mstansberry": "@deviantony I was using it with the following to create a python library (ansible modules to follow). Similar generation functionality is available from https://app.swaggerhub.com/apis/deviantony/Portainer/1.19.2, would just need to set the package/projectnames accordingly :)\n\u00bb docker run --rm -v ${PWD}:/local swaggerapi/swagger-codegen-cli generate -i /local/swagger.yaml -l swagger -o /local/out\n\u00bb docker run --rm -v ${PWD}:/local swaggerapi/swagger-codegen-cli generate -i /local/out/swagger.json -l python -o /local/out/python -c /local/config.json. Usage example:\nIn [1]: from future import print_function\n   ...: import time\n   ...: from portainer import AuthApi, AuthenticateUserRequest, api\n   ...: from portainer.api_client import ApiClient\n   ...: from portainer.rest import ApiException\n   ...:\n   ...: client = ApiClient()\n   ...: client.configuration.host = 'http://docker-mgr:9000/api'\n   ...: auth_api = AuthApi(client)\n   ...: request = AuthenticateUserRequest('admin', 'password')\n   ...: auth_key = auth_api.authenticate_user(request)\n   ...: client.configuration.api_key['Authorization'] = auth_key.jwt\n   ...:\n   ...: endpoints_api = api.EndpointsApi(client)\n   ...: endpoints_api.endpoint_list()\n   ...:\nOut[1]:\n[{u'AuthorizedTeams': [],\n  u'AuthorizedUsers': [],\n  u'AzureCredentials': {u'ApplicationID': u'',\n   u'AuthenticationKey': u'',\n   u'TenantID': u''},\n  u'Extensions': [],\n  u'GroupId': 1,\n  u'Id': 21,\n  u'Name': u'local',\n  u'PublicURL': u'',\n  u'Snapshots': [{u'DockerVersion': u'18.06.1-ce',\n    u'ImageCount': 2,\n    u'RunningContainerCount': 1,\n    u'ServiceCount': 1,\n    u'StackCount': 0,\n    u'StoppedContainerCount': 0,\n    u'Swarm': True,\n    u'Time': 1540652814,\n    u'TotalCPU': 8,\n    u'TotalMemory': 8388575232,\n    u'VolumeCount': 1}],\n  u'Status': 1,\n  u'TLSConfig': {u'TLS': False, u'TLSSkipVerify': False},\n  u'Tags': [],\n  u'Type': 1,\n  u'URL': u'unix:///var/run/docker.sock'}]. ",
    "xiftin84": "Hi, \n@deviantony by any chance do you have an ETA when this feature is going to deployed?\n. ",
    "Jaben": "I see this issue with when Portainer agent is running on a vSphere Volume as well.. ",
    "agrrh": "There's no /portainer address available in Portainer UI.\nSo try adding without /portainer to your Caddy config in order to strip this part of request.. There's no /portainer address available in Portainer UI.\nSo try adding without /portainer to your Caddy config in order to strip this part of request.. ",
    "mervynsword": "\nTry the configuration reported by one of our users here: portainer/portainer-docs#38 (comment)\n\nThank you very much.. ",
    "wyang18": "Portainer: 1.19.2\nDocker 18.06.1-ce\nNo registry created inside Portainer\nThis may be related to Docker. Tested few more, found out this is happening to Docker stack deploy command as well. \nMy local network is setup as:\nServer --> Linksys router --> internet\nBelow are the three scenarios I testes:\n1. Server disconnects Ethernet cable to Linksys\n - it takes 1 sec to update stack\n2. Server connects to Linksys with Ethernet cable, Linksys connects to internet\n - it takes 13 sec to update stack\n3. Server connects to Linksys with Ethernet cable, but Linksys disconnect from internet\n - it takes forever >10 min\nWhy the internet access matters? All images are pre-loaded locally.\n. Portainer: 1.19.2\nDocker: 18.06.1-ce\nNo registry created inside Portainer instance\nI have tried deploy/update stack with/without internet connection many times. \n\n@wyang18 what kind of workload are you running, do they have to interact with internet?\n\nNo, we have no service need internet. Under following setting:\n- Server connects to Linksys with Ethernet cable, but Linksys disconnect from internet\nRun command\ndocker stack deploy -c docker-compose.yml --resolve-image=never mystack\nThe service creating command was \"completed\" in less than a sec for all 18 services with the msg below:\n\"Creating service mystack_xxxxxx\"\n\nBut as you can see from the image above, the \"docker ps\" command returns no new containers, and status shows \"pending\" in portainer. \nIf I wait long enough (about 20 min), the containers for all 18 services are created eventually. \n. A work around for this issue is to tag all images locally instead of using the full path like gcr.io/xxxx. It seems fixed the deployment issue as long as we continue to pre-load images to server.\nThanks everybody for all valuable suggestions. . ",
    "Dumkaaa": "splitargs has keepQuotes as third parameter (boolean):\nfunction splitargs(input, sep, keepQuotes) { ... }\nparameter \"separator\" is omitted, because \"Default\" is assumed inside the function:\nvar separator = sep || /\\s/g;\nreference - splitargs.js#L11. ",
    "chreggy": "It's working on my Debian VM and Synology GUI. . Hello,\nthere is no error on deployment. Where can I see the real HTTP request ?. Hello,\n2 screenshots : \nWith Env variable, not saving it : \n\nWith a Label and saving OK : \n\nIs it what you want ?. ",
    "KamistixX": "I can confirm having the same issue on my Synology NAS. No error message at all but adding ENV variables just get ignored when deploying/editing a container.. ",
    "keteflips": "Same problem here with Portainer 1.20.1. ",
    "lafriks": "Problem is that when creating overlay network command to create new network must be sent to portainer agent on one of swarm managers nodes. Currently it will fail randomly if portainer sends command to agent that is on worker node. ",
    "quelo1972": "I have no errors, simply until yesterday I could not see any docker container and/or images!\nBut today I see them magically, I apologize!. ",
    "treyyoder": "\n@treyyoder what about defining an administrator access restriction on these secrets?\n\n@deviantony I believe defining an administrator access restriction to stacks that contain a secret is a viable solution for the short term.  Eventually I want to investigate methods of securely fetching secrets from a secret server at run-time.. ",
    "SalvadorSarpi": "I'm currently using a direct SSH connection and docker stack deploy, the issue with this approach is that you lose portainer features. olljanat/portainer-vsts-deploy runs only on windows hosts (because of powershell requirement) and also lacks some basic features.\nIMO a friendly integration should use portainer API, that means to create an Azure DevOps extension. I will look into that with my team, as we need this too.. @olljanat didn't saw that before. I miss the ability to see the stack details (compose) on portainer too.\nUsing SSH is the working alternative now.\nThanks for your insights, I'll be keeping more than an eye on this.. ",
    "uptlak": "I have 3 manager nodes on Centos 7, portainer and portainer agents running just fine. \nand 5 worker nodes on Windows Server 1803.\nOn worker nodes are running several applications, but I am unable to install a portainer agent on them. \nThe commands you provide does not work.\nAfter the first command, the container cannot even run, always restarting.. ",
    "lichti": "Hi @deviantony,\nThanks for the answer, shutdown instancet portainer if admin account was not created after awhile, it's an idea. But another idea is to create a token at application startup, and to create the admin password, you need to put that token. The user can get this token with docker logs.. Deployment procedure simple is good, but don't must to create a potential vulnerability. Sound good shutdown after five minutes, but are five minutes exposted to de world. Sound very simple to me the user configure a initial password by CLI parameter or environment variable.. CVE: https://nvd.nist.gov/vuln/detail/CVE-2018-19367. in my humble opinion, \"--no-authentication\" should not exist. Integration with oauth and saml are more important features and do not exist. But \"--no-authentication\" is forced by user by CLI parameter.. I do:\n docker run --rm -it -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --no-auth\nAnd:\ncurl -X GET -i http://127.0.0.1:9000/api/users/admin/check\nHTTP/1.1 404 Not Found\nContent-Type: application/json\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\nX-Xss-Protection: 1; mode=block\nDate: Tue, 20 Nov 2018 17:54:10 GMT\nContent-Length: 110\n{\"err\":\"No administrator account found inside the database\",\"details\":\"Object not found inside the database\"}\nIn this case, the Endpoint must return 204 and not 404. . UX cannot ignore security, to facilitating initial setup. We need aware users about scurity, and we need help them about this, not facilitating the setup but explaning the ploblem.. ",
    "b-dantas": "\nHi @deviantony,\nThanks for the answer, shutdown instancet portainer if admin account was not created after awhile, it's an idea. But another idea is to create a token at application startup, and to create the admin password, you need to put that token. The user can get this token with docker logs.\n\nA token or a temporary password is a good approach. Jenkins team adopted this approach on install procedure, for example. This avoid insecure public instances when them launches.\n\nOnce Jenkins is running, consult the log (/var/svc/log/network-http:jenkins.log) to retrieve the generated administrator password for the initial set up of Jenkins, usually it will be found at /var/lib/jenkins/home/secrets/initialAdminPassword. Then navigate to localhost:8080 to complete configuration of the Jenkins instance.\n\nReference: https://jenkins.io/doc/book/installing/. ",
    "ptScaler": "Portaine has no problem and displays normally, but I have encountered problems with docker API, I would like to ask how to solve them. Thank you very much. ",
    "CG-root": "@ncresswell thanks for the fast respond, high appreciated.\n  . ",
    "shariquemasood": "yes but same error. ",
    "nelsg": "I tried with --form TLS=true --form TLSSkipVerify=true, got {\"err\":\"Invalid request payload\",\"details\":\"Invalid certificate file. Ensure that the file is uploaded correctly\"}.\nI didn't find a command that works.. Fine, it works now, thanks !. ",
    "waja": "I just discovered that --no-analytics seems to work without problems.. > Yes, that disables the google analytics plugin we use to gauge uptake.\n\nNote that as an opensource project, we don\u2019t ask for much, but we do ask that wherever possible, please leave the GA enabled so we can see how uptake is tracking across the world.\n\nThis was just for testing, if commands work at all. Anyway ... still trying to use -l and --logo without success yet. . We discovered that https://github.com/portainer/portainer/releases/tag/1.13.2 mentions:\n\nNOTE: This release depreciate the following CLI flags:\n\n--hide-label, -l\n--logo\n--templates, -t\n\n\nAnd indeed, this is the release breaking those flags, it is working up until 1.13.1.\nIs there any new way instead to set those setting on starttime? When deploying a new portainer it would be very usefull not to have to click around in the web interface for those adjustments.. > FYI settings for these options were introduced in the Settings part of the UI.\n@deviantony We know this, but we want set those scripted when running the deployment scripts.. > Just a reamark, your version is 2 and docker stack works on 3, only compose supports version 2...\nThanks for your kind words @gybfefe. The wording in Portainer is stacks, see:\n\nAs you may know, version 3 is not supported in the Portainer stack configuration. See the following error: \n\nBut maybe I'm all wrong with this.\nWith kind regards, Jan.\n. > Which version of portainer do you use? :) \nI'm using, like stated above, 1.20.0 via docker image. My docker version is 18.09.1, as you see in the initial post. Anyway ... I'm not controling a docker swarm but a local entrypoint. . > Did you turn off in portainsers security settings this?: Disable bind mounts for non-administrators\nyes, I did.. >  >   Did you turn off in portainsers security settings this?: Disable bind mounts for non-administrators\n\nyes, I did.\n\nIt doesn't matter if it is turned on or off. The volume has in both cases the ownership set to \"administrators\".. ",
    "alancnet": "@deviantony I don't have a \"re-open\" button, but 127.0.0.1:54475->127.0.0.11:53 is clearly a DNS query to the container's internal DNS server.. ",
    "risajef": "Fixed many things. Works for me on a CentOS and an Ubuntu System.. Could a human give a comment on this pull request? The checks that fail are not from my code. I just adapted how it is done in the project. The tool tells me there is code duplication. But this was also before the case. And yes I could change the code such that this check does not fail but I think it would make the code less readable.. ",
    "hpbieker": "LGTM, but some questions:\n* With automatic user provisoning enabled: How can I use claims to grant or deny access to some user groups? Or is this not supported?. ",
    "thinklover": "I also encountered the same problem.\nSo I refresh this web page, that can be sovled.\nOS: centos 7\n. ",
    "gakowalski": "Same problem here with latest version. Refreshing page helps.. ",
    "BaVanDuong": "Hi @deviantony,\nI deploy Portainer and agent via docker stack with this compose file: https://portainer.io/download/portainer-agent-stack.yml\nDocker version:\nClient:\n Version:           18.09.0\n API version:       1.39\n Go version:        go1.10.4\n Git commit:        4d60db4\n Built:             Wed Nov  7 00:48:57 2018\n OS/Arch:           linux/amd64\n Experimental:      false\nServer: Docker Engine - Community\n Engine:\n  Version:          18.09.0\n  API version:      1.39 (minimum version 1.12)\n  Go version:       go1.10.4\n  Git commit:       4d60db4\n  Built:            Wed Nov  7 00:16:44 2018\n  OS/Arch:          linux/amd64\n  Experimental:     false\n. ",
    "yuklia": "Hi, @deviantony!\nPre-requirements:\nPortainer client (1.20.1) connects to remote docker daemon with no TLS\nPortainer on client machine: docker Engine: 18.09.0\nDocker daemon: 18.09.1\nportainer:\n    image: portainer/portainer\n    container_name: portainer\n    command: -H tcp://some_domain:2375\neverything seems to work fine but NO volumes are shown\n. @deviantony, the funny thing is host not protected by TLS)\nLook, I connect to amazon external load balancer\nwhich listen to targets (docker hosts) on port 2375. ",
    "unglaublicherdude": "We have a similar problem here. I set up a 2 node Test-Cluster where I am testing portainer 1.20.0 with agent version 1.2.0 under docker version Docker version 18.09.0.\nBefore the version updates we had the exact same problem as described by @jeysibel.\nOur setup are 2 VMs (Ubuntu 18.04.1) as Nodes (1 Master, 1 Worker). Our stack is actually described like this:\n```yaml\nversion: '3.2'\nservices:\n  portainer:\n    image: portainer/portainer:1.20.0\n    command: --no-analytics -H tcp://tasks.portainer-agent-internal:9001 --tlsskipverify\n    networks:\n      agent_network:\n      traefik:\n    volumes:\n     - portainer_data:/data\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\nportainer-agent-internal:\n    image: portainer/agent:1.2.0\n    environment:\n      AGENT_CLUSTER_ADDR: tasks.portainer-agent-internal\n    volumes:\n     - /var/run/docker.sock:/var/run/docker.sock\n     - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      agent_network:\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\nnetworks:\n  traefik:\n    external:\n      name: somename\n  agent_network:\n    driver: overlay\n    attachable: true\nvolumes:\n  portainer_data:\n ```\nWhen I fresh deploy this stack (meaning that I also had to remove the portainer-volume), and then login into portainer, the agent will have the status UP. \nBut there is already a startup error:\ntxt\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:37:37 http error: endpoint snapshot error (endpoint=primary, URL=tcp://tasks.portainer-agent-internal:9001) (err=Error response from daemon: )\nWhen I click onto this endpoint, everything seems to work until I click on the Volumes. It takes some time till an Error occurs. And after this error the agent will not work anymore.\nPortainer outputs these logs:\ntxt\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:21 http: proxy error: context canceled\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:24 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:24 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:25 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:25 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:25 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:25 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:25 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nmanagement_portainer.1.hjbuwee3cz5l@host    | 2018/12/14 09:39:49 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nAnd the portainer-agent logs:\ntxt\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:37:14 [INFO] serf: EventMemberJoin: 66e637779153 10.0.107.7\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:37:14 [INFO] serf: EventMemberJoin: 2b53335926b2 10.0.107.6\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:37:14 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:37:37 http error: Unable to execute cluster operation (err=Get https://10.0.107.6:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:37:37 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:38:42 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:39:21 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:39:21 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:39:21 http error: Unable to execute cluster operation (err=Get https://10.0.107.7:9001/volumes?filters=%7B%22dangling%22:%5B%22false%22%5D%7D: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:37:12 [INFO] serf: EventMemberJoin: 2b53335926b2 10.0.107.6\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:37:12 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:37:14 [INFO] serf: EventMemberJoin: 66e637779153 10.0.107.7\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:37:27 http error: Missing request signature headers (err=Unauthorized) (code=403)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:37:37 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:38:42 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:38:42 http error: Unable to execute cluster operation (err=Get https://10.0.107.7:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:39:21 http error: Unable to execute cluster operation (err=Get https://10.0.107.7:9001/volumes?filters=%7B%22dangling%22:%5B%22true%22%5D%7D: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:39:21 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:39:21 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:42:37 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nmanagement_portainer-agent-internal.0.j2tucp6p2hg0@host2    | 2018/12/14 09:42:37 http error: Unable to execute cluster operation (err=Get https://10.0.107.6:9001/volumes: net/http: request canceled (Client.Timeout exceeded while awaiting headers)) (code=500)\nmanagement_portainer-agent-internal.0.uirdsgmjzzrd@host1    | 2018/12/14 09:42:37 http error: Unable to proxy the request via the Docker socket (err=context canceled) (code=500)\nWhen reaching this status no restart (agent or portainer) will help recovering. I have to remove the stack and the volume and redeploy everything. This works until someone will click on the volumes again.\nAs additional info: The volume command is actually really slow for our docker engine it takes like 9 seconds. That is a problem we have to work on but all that should not blow the portainer agent like it actually does.\nArgh. And the volumes are also loaded on the dashboard. So it will break nevertheless. . I solved our Issue. And I now think it is different. My problem was a volume plugin spec pointing to a socket that did not exist anymore because we removed the daemon. After removing the specs portainer runs fine. But I still think this should not break the whole agent. . ",
    "nksupport-protsko": "Hi! We have similar issue, endpoint is marked as down. Restart and update don't help. \nThe same messages in portainer-agent logs:\n2018/12/29 16:57:50 [WARN] memberlist: Refuting a suspect message (from: 28e7b98c2624)\n2018/12/29 16:58:01 [INFO] memberlist: Suspect b8b37729c657 has failed, no acks received\n2018/12/29 16:58:09 [WARN] memberlist: Refuting a suspect message (from: b8b37729c657)\n2018/12/29 16:58:14 [INFO] memberlist: Suspect d10dcd14da8d has failed, no acks received\n2018/12/29 16:58:17 [INFO] serf: attempting reconnect to 8b3adfa511ac 10.0.0.53:7946\n2018/12/29 16:58:20 [ERR] memberlist: Push/Pull with d10dcd14da8d failed: dial tcp 10.0.0.71:7946: i/o timeout\n2018/12/29 16:58:20 [WARN] memberlist: Was able to connect to f97057df58c8 but other probes failed, network may be misconfigured\n2018/12/29 16:58:31 [INFO] memberlist: Suspect 28e7b98c2624 has failed, no acks received\nWe have portainer in swarm mode deployed with this stackfile:\nhttps://downloads.portainer.io/portainer-agent-stack.yml\n. ",
    "lifepeer": "Same issue and exactly the same stack file as above (straight from the documentation). Endpoin refresh through the web UI usually solves it very quickly but it's quite unstable.\nAgent logs:\nportainer_agent.0.juz0j6hmsuav@node1    | 2019/01/07 22:44:12 [INFO] serf: EventMemberJoin: 53222c54e5be 10.0.6.6\nportainer_agent.0.juz0j6hmsuav@node1    | 2019/01/07 22:44:14 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.juz0j6hmsuav@node1    | 2019/01/07 22:44:14 [INFO] serf: EventMemberJoin: c6141eafd580 10.0.6.8\nportainer_agent.0.vb7p2rfcrt2b@node3    | 2019/01/07 22:44:14 [INFO] serf: EventMemberJoin: c6141eafd580 10.0.6.8\nportainer_agent.0.vb7p2rfcrt2b@node3    | 2019/01/07 22:44:14 [INFO] serf: EventMemberJoin: 53222c54e5be 10.0.6.6\nportainer_agent.0.vb7p2rfcrt2b@node3    | 2019/01/07 22:44:14 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\nportainer_agent.0.vb7p2rfcrt2b@node3    | 2019/01/07 22:47:55 http: TLS handshake error from 10.0.6.3:43078: EOF\nportainer_agent.0.ivcqpesbpxzk@node2    | 2019/01/07 22:44:46 [INFO] serf: EventMemberJoin: 23ec18d0df73 10.0.6.7\nportainer_agent.0.ivcqpesbpxzk@ node2    | 2019/01/07 22:45:06 [INFO] - Starting Portainer agent version 1.2.0 on 0.0.0.0:9001 (cluster mode: true)\n\nPortainer log:\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:44:08 Templates already registered inside the database. Skipping template import.\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:44:08 Instance already has defined endpoints. Skipping the endpoint defined via CLI.\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:44:08 Starting Portainer 1.20.0 on :9000\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:46:34 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:46:34 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:46:34 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:46:39 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:49:38 background schedule error (endpoint snapshot). Unable to create snapshot (endpoint=node1, URL=tcp://tasks.agent:9001) (err=Cannot connect to the Docker daemon at tcp://tasks.agent:9001. Is the docker daemon running?)\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:49:47 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:49:47 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.dy7ex5nxmk0i@node1    | 2019/01/07 22:49:47 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n\netc.. ",
    "Einstein42": "+1. ",
    "ezhik97": "+1. ",
    "PrathikGopal": "+1\n. ",
    "Z10yTap0k": "+1. ",
    "radirad": "Hi\nI had the same problem.\nWith agent version 1.1.2 and everything works like a charm.\nWith 1.2.0 almost evert time i get timeout. \nPortainer version 1.20.0, docker 18.09.1 .. ",
    "baskinsy": "I'm experiencing similar issues like timeout or wrong information which they recover after a refresh. It is a newly deployed swarm cluster without any firewall rules applied. I have noticed that this happens only after sometime of inactivity on the Portainer UI. As long as you navigate in the UI it is ok but if you let it idle for sometime the issue is appearing (most of the times).. \n@deviantony Yes, I'm using v1.20.1 and latest agent also deployed as per the instructions. I'm getting inconsistency on displayed values (for example Dashboard shows wrong number of running and stopped containers) which are fixed with a refresh and also timeouts, which again recover with refresh on stacks list mainly and also on connect to container. Those are appearing usually after the UI has stayed idle for some period. \n. @deviantony sorry for the late reply, I'm out of base now and will try to catch some logs when I'm back. I'm using traefik so maybe there is a cache issue involved on displaying wrong values. I'll investigate further and update.. The only think I can spot for now is that I'm getting several of those errors on portainer container logs\n2019/02/19 12:11:52 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/19 12:11:52 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/19 12:11:52 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:05 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:06 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 07:22:06 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 11:26:38 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 11:26:38 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/20 11:26:38 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\nWill look further.. Hello again,\nI think I have managed to find a situation where portainer becomes unstable and also managed to replicate the issue after fixing it. I have a 6 node swarm cluster with 3 managers and 3 workers. Managers are the hosts named gd1,gd2,gd3 with the gd1 being the original swarm Leader. Everything works as expected and portainer is working flawlessly.\nAfter draining the gd1 node and reboot it, gd2 becomes the new Leader of the swarm cluster automatically. From that point portainer started to become unstable and the only thing I can see is that the gd2 node (the new Leader) has 0.0.0.0 IP listed on the Swarm menu on portainer. Multiple refreshes solve the issue of \"no endpoint connected\" or wrong displayed values. I have also recreate the cluster, redeploy everything and again drain the gd1, reboot it so gd2 became again the new Leader and the problem re-appeared immediately.  Portainer container was running on gd2 node from the beginning (I have a persistent share storage for portainer data so it doesn't matter on which node it runs but it was on gd2 and not redeployed during the change of the Leader.\nI can see these on logs\n2019/03/05 08:19:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:22 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:23 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:23 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:23 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:26 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:27 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:27 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:27 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:27 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:27 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:19:27 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\n2019/03/05 08:20:41 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nand on Swarm menu all nodes are listed with their correct IP instead of gd2 (the swarm Leader after rebooting the original Leader gd1) which is listed with 0.0.0.0 IP. On the initial setup gd2 was listed with the correct IP but after becoming a Leader it displayed 0.0.0.0.. ",
    "rodneygp": "Same problem here. We use ceph for data storage. And we have quite a lot of volumes. So, docker volume ls can take a while.\nIt seems like agent's timeout is too short. Can we tune it?. ",
    "brantxiong": "hi, @deviantony do you have docs about portainer/agent image parameters? like command:\nbash\ndocker run -d -p 9001:9001 --name portainer_agent --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/docker/volumes:/var/lib/docker.volumes portainer/agent\nCould we have any parameters to portainer_agent? . ",
    "d2dyno": "Yes this is quite annoying especially for frequent tasks, they leave quite the amount of orphaned containers.. ",
    "Nightbr": "Same here upgrade from 1.19 to 1.20\n2018/12/12 07:50:12 Migrating database from version 14 to 15.\n2018/12/12 07:50:13 Templates already registered inside the database. Skipping template import.\n2018/12/12 07:50:13 Failed to parse duration @every : time: invalid duration\n. Same here upgrade from 1.19 to 1.20\n2018/12/12 07:50:12 Migrating database from version 14 to 15.\n2018/12/12 07:50:13 Templates already registered inside the database. Skipping template import.\n2018/12/12 07:50:13 Failed to parse duration @every : time: invalid duration\n. Works! \n$ docker logs portainer_portainer_1\n2018/12/12 08:11:07 Migrating database from version 15 to 16.\n2018/12/12 08:11:08 Templates already registered inside the database. Skipping template import.\n2018/12/12 08:11:08 Starting Portainer 1.20.0 on :9000\n. Works! \n$ docker logs portainer_portainer_1\n2018/12/12 08:11:07 Migrating database from version 15 to 16.\n2018/12/12 08:11:08 Templates already registered inside the database. Skipping template import.\n2018/12/12 08:11:08 Starting Portainer 1.20.0 on :9000\n. ",
    "dovab": "Same issue here:\n2018/12/12 05:25:09 Migrating database from version 14 to 15.\n2018/12/12 05:25:09 Templates already registered inside the database. Skipping template import.\n2018/12/12 05:25:09 Failed to parse duration @every : time: invalid duration \nReverted back to 1.19.2 for now.. Works for me aswell!. ",
    "rhaamo": "@deviantony looks ok\nroot@oignon:/mnt/zfs/deadpool0/docker/portainer# docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /mnt/zfs/deadpool0/docker/portainer:/data portainerci/portainer:fix2542-empty-snapshot-interval\nUnable to find image 'portainerci/portainer:fix2542-empty-snapshot-interval' locally\nfix2542-empty-snapshot-interval: Pulling from portainerci/portainer\nd1e017099d17: Already exists \n803b519af3d4: Pull complete \nDigest: sha256:0f0e9260b7bf983a198e3f8037f78b065f21b049ac3271c6bf151224958156aa\nStatus: Downloaded newer image for portainerci/portainer:fix2542-empty-snapshot-interval\naf31733300c06540f6957fdaf143f5570abb1e1791eec514a6bc4dc3ce454708\nroot@oignon:/mnt/zfs/deadpool0/docker/portainer# docker logs portainer\n2018/12/12 08:10:26 Migrating database from version 15 to 16.\n2018/12/12 08:10:26 Templates already registered inside the database. Skipping template import.\n2018/12/12 08:10:26 Starting Portainer 1.20.0 on :9000. ",
    "panjunle": "Vimium cause the problem!. ",
    "kamerad": "I downloaded portainerci/portainer:pr2561 and did a test with an nginx container. This was the initial situation using Inspect:\n\"Cmd\": [\n            \"nginx\",\n            \"-g\",\n            \"daemon off;\"\n        ]\nAfter clicking \"Duplicate / Edit\" and saving without changing anything, the following container is created:\n\"Cmd\": [\n            \"nginx\",\n            \"-g\",\n            \"daemon\",\n            \"off;\"\n        ]\nThis container is unable to start, because the last argument was unintentionally separated:\nnginx: invalid option: \"off;\". > Try changing your cmd to: nginx -g \"daemon off;\"\nThat creates to following container:\n\"Cmd\": [\n            \"nginx\",\n            \"-g\",\n            \"\\\"daemon off;\\\"\"\n        ]\nI tried different ways to escape but didn't manage to get a working container.\n. I tested portainerci/portainer:fix2552-command-parsing and yes, my issue is resolved with this fix! My nginx container can now be modified/duplicated without issues. Thanks @deviantony!. ",
    "weskey007": "\nI downloaded portainerci/portainer:pr2561 and did a test with an nginx container. This was the initial situation using Inspect:\n\"Cmd\": [\n            \"nginx\",\n            \"-g\",\n            \"daemon off;\"\n        ]\nAfter clicking \"Duplicate / Edit\" and saving without changing anything, the following container is created:\n\"Cmd\": [\n            \"nginx\",\n            \"-g\",\n            \"daemon\",\n            \"off;\"\n        ]\nThis container is unable to start, because the last argument was unintentionally separated:\nnginx: invalid option: \"off;\"\n\nYea, I was afraid that a side-effect like that would show up.\nTry changing your cmd to: nginx -g \"daemon off;\". ",
    "denisgolius": "\n@denisgolius what do you mean by\n\nwhen I try to run docker login from gitlab server - I getting error\n\nAre you trying to login to Gitlab via the CLI ? Where are you seeing this error?\nError response from daemon: Get https://my-host.com/v2/: x509: certificate signed by unknown authority\n\nby running docker login from cmd on gitlab server. Omg. \nI also installed Harbor - with the same certs and it works well & I can do docker login to registry as well for pull and push docker images... \nMaybe there is a problems with using Portainer as/for docker registry ?. > > Maybe there is a problems with using Portainer as/for docker registry ?\n\nPortainer DO NOT act as a Docker registry (not like Harbor). What are you trying to achieve with Portainer?\n\nown docker hub analog for storing images. ",
    "XRyu": "Is it possible to get the docker container with this fix? i am encounterin the error too and would love to try and see if the fix works :). Great! Thank you, i will give it a try :D \ud83d\udc4d . ",
    "Greatsamps": "We have been running this patch, and Portainer fell over again. Not sure if related, but container logs were full of these such entries:\n2019/01/16 21:59:09 http: proxy error: unexpected end of JSON input\nRemoving and redeploying stack worked, but this is clearly not a long term solution. Hi,\nThis for sure looks like the same problem. Got same issues as before, i.e. system very unstable, and portainer logs are littered with entries such as these:\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:07:29 http: proxy error: unexpected end of JSON input\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:07:33 http: proxy error: unexpected end of JSON input\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:11:02 background schedule error (endpoint snapshot). Unable to create snapshot (endpoint=primary, URL=tcp://tasks.agent:9001) (err=request returned Bad Gateway for API route and version https://tasks.agent:9001/v1.24/info, check if the server supports the requested API version)\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:11:14 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:11:24 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:11:34 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:11:44 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:11:50 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:11:50 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nportainer_portainer.1.krygui8vu9hy@ln-swm-mg 2019/01/21 07:11:50 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nWe have 2 worker nodes, 1 manager node which is where portainer is running.. Hi,\nRunning  portainerci/portainer:fix2556-frequent-offline-mode \nThe problem does seem to be intermittent. We had an issue reported a few hours ago, and I've just gone to look at it, and its resolved.\nShould be noted we do have quite a large environment. 2000 Services/Containers\nRefresh interval is 5m. ",
    "gprashanthkumar": "Dear Developers,\nAnother direction,  Please use StefanScherer/chocolateyfest-talk  i.e chocolatey portainer as defined in his github post [https://github.com/StefanScherer/chocolateyfest-talk/tree/master/4-portainer]\nThis could help till we get from portainer registry.\nNote: This suggestion is for hosting portainer on Win server 2019 (ver 10.0.17763.107)\n. ",
    "egzonzeneli": "@deviantony and what about agent image ? \nI was looking to find anywhere portainer\\agent artifact under release of portainer or something, so i can create my docker image based on @StefanScherer, at least until the official image will support also 1809,  but couldn't find it!. @olljanat any ETA when the next portainer version will be released ?! thanks. . @deviantony thanks :), jumping on to it ... . @olljanat  did you found on your try`s also the problem with overlay networks\n\nError response from daemon: attaching to network failed, make sure your network options are correct and check manager logs\n\nIt seems overlay networks created on docker manager are not being seen from windows worker nodes,\nMy setup: \n3 Mangers\n5 Linux Workers\n2 Win1809 Workers \nAll are running on docker engine 18.09.1\n. ",
    "Heebron": "A re-deploy of the agents using portainer results in the following:\nportainer_portainer.1.u9ge6bxok8sf@ucfo-wgwk01    | 2018/12/18 11:13:23 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\nportainer_portainer.1.u9ge6bxok8sf@ucfo-wgwk01    | 2018/12/18 11:13:26 Response: map[err:Unable to execute cluster operation details:Get https://10.0.10.87:9001/containers/json: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)]\nportainer_portainer.1.u9ge6bxok8sf@ucfo-wgwk01    | 2018/12/18 11:13:26 http: proxy error: Invalid Docker response\nportainer_portainer.1.u9ge6bxok8sf@ucfo-wgwk01    | 2018/12/18 11:13:27 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nIt should not be using the https protocol.  Portainer is running without https inside the swarm.. A re-deploy of the agents using portainer results in the following:\nportainer_portainer.1.u9ge6bxok8sf@ucfo-wgwk01    | 2018/12/18 11:13:23 websocketproxy: Error when copying from backend to client: websocket: close 1006 (abnormal closure): unexpected EOF\nportainer_portainer.1.u9ge6bxok8sf@ucfo-wgwk01    | 2018/12/18 11:13:26 Response: map[err:Unable to execute cluster operation details:Get https://10.0.10.87:9001/containers/json: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)]\nportainer_portainer.1.u9ge6bxok8sf@ucfo-wgwk01    | 2018/12/18 11:13:26 http: proxy error: Invalid Docker response\nportainer_portainer.1.u9ge6bxok8sf@ucfo-wgwk01    | 2018/12/18 11:13:27 http error: Unable to query endpoint (err=Endpoint is down) (code=503)\nIt should not be using the https protocol.  Portainer is running without https inside the swarm.. > Just to confirm, everything in Portainer works except the container console?\nYes - everything else is working.\n. > Just to confirm, everything in Portainer works except the container console?\nYes - everything else is working.\n. Here is my Apache Httpd (2.4) virtual host config:\n```\nFor Portainer service\n\n  ServerName portainer.cloud.n-ask.com\nProxyRequests Off\n  ProxyPreserveHost On\nSSLEngine on\n  SSLCertificateKeyFile \"/run/secrets/wildcard-key.pem\"\n  SSLCertificateFile    \"/run/secrets/wildcard-cert.pem\"\n  SSLCACertificateFile  \"/run/secrets/cacerts.pem\"\n  SSLVerifyClient        require\n  SSLVerifyDepth         3\nRequestHeader    set X-Forwarded-Proto https env=HTTPS\nProxyPass        \"/api/websocket\" ws://portainer_portainer:9000/api/websocket enablereuse=Off nocanon\n  ProxyPassReverse \"/api/websocket\" ws://portainer_portainer:9000/api/websocket\nProxyPass        \"/\" http://portainer_portainer:9000/ enablereuse=Off nocanon\n  ProxyPassReverse \"/\" http://portainer_portainer:9000/\n\n```. Here is my Apache Httpd (2.4) virtual host config:\n```\nFor Portainer service\n\n  ServerName portainer.cloud.n-ask.com\nProxyRequests Off\n  ProxyPreserveHost On\nSSLEngine on\n  SSLCertificateKeyFile \"/run/secrets/wildcard-key.pem\"\n  SSLCertificateFile    \"/run/secrets/wildcard-cert.pem\"\n  SSLCACertificateFile  \"/run/secrets/cacerts.pem\"\n  SSLVerifyClient        require\n  SSLVerifyDepth         3\nRequestHeader    set X-Forwarded-Proto https env=HTTPS\nProxyPass        \"/api/websocket\" ws://portainer_portainer:9000/api/websocket enablereuse=Off nocanon\n  ProxyPassReverse \"/api/websocket\" ws://portainer_portainer:9000/api/websocket\nProxyPass        \"/\" http://portainer_portainer:9000/ enablereuse=Off nocanon\n  ProxyPassReverse \"/\" http://portainer_portainer:9000/\n\n```. ",
    "rjchicago": "We may be experiencing a similar issue.\n Swarm: 5 mgrs, 5 wrkrs\n Portainer UI: 1.20.0\n* Portainer Agent: 1.2.0\nConsole will connect to containers running on the same host as the Portainer UI, but will not longer connect to remote agents. The agent logs are littered with first record does not look like a TLS handshake. We are running Traefik with stickiness=true and Keepalived so we're always hitting the same Swarm node. We've determined that we can console into containers on the same host only. For example, if Keepalived is active on node-01, then we can console into containers on node-01, but not into containers on node-02 or node-03.\nAs @HitkoDev points out, Portainer 1.20.0 works fine with Agent 1.1.2 and we've since reverted all Swarms to this configuration. This issue appears present in Agent 1.2.0 only.. ",
    "unrinfosec": "Similar issue here. 1 mgr, 3 workers. No apache proxy though.\nSSL has been enabled for Portainer.\nSame error messages as above.. ",
    "HitkoDev": "I have Portainer behind Trafeik proxy (with SSL) and experience the same issue. Here are my findings so far:\n - console manages to connect after a couple of retries (I think it connects to a different WS URL, but it's too random to confirm)\n - latest Portainer (1.20.0) works fine with Agent 1.1.2, it's only agent 1.2.0 that causes problems. ",
    "stex79": "I am experiencing the same issue with latest portainer and agent versions.. I appreciate there is a workaround downgrading the agent version, but is this bug planned to be fixed?. I have tried portainer/agent:fix45 and I can open the console now, it seems to be working again.. ",
    "netadvanced": "Thanks @HitkoDev, I reverted my swarm to your suggestion and we're back in business \ud83d\udc4d\ud83c\udffc. ",
    "Power2All": "I'll wait for a permanent upstream fix, instead of using a branch.\nHope it will get solved, since I have the same issues as well.. ",
    "MordantWastrel": "We are not able to use this function 1.20.1. It worked intermittently for us in 1.20.0.\nThe screen just hangs when you click 'connect' and the network websocket request returns a 400:\nwss://portainer.inleague.io/api/websocket/exec?id=blahBlah&nodeName=mySwarmNode.inleague.io\nFrom the portainer agent log:\n\n2019/02/05 11:33:00 websocketproxy: Error when copying from client to backend: websocket: close 1006 (abnormal closure): unexpected EOF\n\nFrom the portainer log:\n\n2019/02/04 12:54:01 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/05 11:33:00 websocketproxy: couldn't upgrade websocket: the client is not using the websocket protocol: 'upgrade' token not found in 'Connection' header\n\nEverything else is working fine for us in 1.20.1. We do have NGINX proxying requests from portainer.inleague.io to the swarm and it operates on a whitelist, but the request is coming from a client that is otherwise having no problem connecting.. We were adding two headers:\n\nadd_header Strict-Transport-Security \"max-age=63072000; includeSubdomains\";\n    add_header X-Content-Type-Options nosniff;\n\nBut I removed them to no effect. I also had the server accept regular http requests (since we're IP whitelisting anyway) rather than redirecting http to https, but no difference there either. \nIs there another port that needs to be opened?. Ho boy, egg on my face! D'uh. \nThank you!. ",
    "Kris-ping": "here is the vi /usr/lib/systemd/system/docker.service:\n[root@backend ~]# vi /usr/lib/systemd/system/docker.service\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nBindsTo=containerd.service\nAfter=network-online.target firewalld.service\nWants=network-online.target\n[Service]\nType=notify\nthe default is not to use systemd for cgroups because the delegate issues still\nexists and systemd currently does not support the cgroup feature set required\nfor containers run by docker\nExecStart=/usr/bin/dockerd -H unix://\nExecReload=/bin/kill -s HUP $MAINPID\nTimeoutSec=0\nRestartSec=2\nRestart=always\nNote that StartLimit* options were moved from \"Service\" to \"Unit\" in systemd 229.\nBoth the old, and new location are accepted by systemd 229 and up, so using the old location\nto make them work for either version of systemd.\nStartLimitBurst=3\nNote that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.\nBoth the old, and new name are accepted by systemd 230 and up, so using the old name to make\nthis option work for either version of systemd.\nStartLimitInterval=60s\nHaving non-zero Limit*s causes performance problems due to accounting overhead\nin the kernel. We recommend using cgroups to do container-local accounting.\nLimitNOFILE=infinity\nLimitNPROC=infinity\nLimitCORE=infinity\nComment TasksMax if your systemd version does not supports it.\nOnly systemd 226 and above support this option.\nTasksMax=infinity\nset delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\nkill only the docker process, not all processes in the cgroup\nKillMode=process\n[Install]\nWantedBy=multi-user.target\n. @deviantony  I am use last version from below:\ndocker run -d -p 9000:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer. @deviantony Please close this issue because after 3 days, I have reinstall protainer then everything has been fixed, should be cache issue or similar matters.. Centos7/ Docker CE, the first time not deployed portainer well so I have removed it and re-deploy it then issue happens.. @deviantony :\ndocker run -d -p 9000:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer. @ncresswell  hi: SElinux disabled and now the duplicated entry was left 2 after 3 days elapsed, looks related to cookie, so question now maybe is how to remove cookie, and I already ran prune. \n\n\n. @deviantony all your mentioned steps I have did but not works.. hosted on Aliyun.com. @deviantony  is this bug fixed?. ",
    "chickenandpork": "https://github.com/Southclaws/machinehead/. ",
    "kevb": "\nhttps://github.com/Southclaws/machinehead/\n\nLooks interesting, but I'd like something Swarm specific. I'm currently working on a proof-of-concept for this, I'll update the thread when done.. Ok, so for anyone else stumbling onto this thread in the future, I've been working on a solution for this (with @vudknguyen).\n\nswarm-pack, loosely based on Helm.\nswarm-sync, loosely based on Flux.\n\nWe'd love contributors or to hear from anyone else trying to solve similar problems!\n. ",
    "javierma14": "I also have the same question, if @deviantony could help with this it'd be much appreciated.. Any update on this @Duvel @deviantony ?. @deviantony Thank you for your response. I have done yarn build but this command gives the following output. \nroot@Portainer:~/portainer# ls\nCODE_OF_CONDUCT.md  LICENSE    api  appveyor-ci.yml       assets  build.sh      gruntfile.js  package.json    test        yarn.lock\nCONTRIBUTING.md     README.md  app  appveyor-release.yml  build   distribution  index.html    templates.json  vendor.yml\nroot@Portainer:~/portainer# yarn build\n00h00m00s 0/0: : ERROR: [Errno 21] Is a directory: 'build'\nroot@Portainer:~/portainer#\nI installed yarn on a linux machine, ubuntu 18.04. Yarn was installed using the command apt install cmdtest\nThanks again.. Hi there @linquize ! I did not, but running yarn gives me an error ERROR: There are no scenarios; must have at least one. This is while being in the parent directory of portainer after doing a git clone. Here is the full output below:\nroot@Portainer:~/portainer# ls\nCODE_OF_CONDUCT.md  LICENSE    api  appveyor-ci.yml       assets  build.sh      gruntfile.js  package.json    test        yarn.lock\nCONTRIBUTING.md     README.md  app  appveyor-release.yml  build   distribution  index.html    templates.json  vendor.yml\nroot@Portainer:~/portainer# yarn\n00h00m00s 0/0: : ERROR: There are no scenarios; must have at least one.\nThank you for your reply! I look forward to hearing from you again. :). @linquize Thank you for your continued assistance. \nI cloned the container repo and then went inside the directory ./portainer/\nI was able to use npm install but am presented with the following error:\n```\nroot@Portainer:~/portainer# npm install\nnpm WARN deprecated @fortawesome/fontawesome-free-webfonts@1.0.9: This package is deprecated. See https://git.io/fNCzJ for information about upgrading.\nnpm ERR! git rev-list -n1 ~1.1.9: fatal: ambiguous argument '~1.1.9': unknown revision or path not in the working tree.\nnpm ERR! git rev-list -n1 ~1.1.9: Use '--' to separate paths from revisions, like this:\nnpm ERR! git rev-list -n1 ~1.1.9: 'git  [...] -- [...]'\nnpm ERR! git rev-list -n1 ~1.1.9:\nnpm ERR! git rev-list -n1 ~0.2.0: fatal: ambiguous argument '~0.2.0': unknown revision or path not in the working tree.\nnpm ERR! git rev-list -n1 ~0.2.0: Use '--' to separate paths from revisions, like this:\nnpm ERR! git rev-list -n1 ~0.2.0: 'git  [...] -- [...]'\nnpm ERR! git rev-list -n1 ~0.2.0:\nnpm ERR! git rev-list -n1 ~2.1.3: fatal: ambiguous argument '~2.1.3': unknown revision or path not in the working tree.\nnpm ERR! git rev-list -n1 ~2.1.3: Use '--' to separate paths from revisions, like this:\nnpm ERR! git rev-list -n1 ~2.1.3: 'git  [...] -- [...]'\nnpm ERR! git rev-list -n1 ~2.1.3:\nnpm ERR! git rev-list -n1 ~0.2.0: fatal: ambiguous argument '~0.2.0': unknown revision or path not in the working tree.\nnpm ERR! git rev-list -n1 ~0.2.0: Use '--' to separate paths from revisions, like this:\nnpm ERR! git rev-list -n1 ~0.2.0: 'git  [...] -- [...]'\nnpm ERR! git rev-list -n1 ~0.2.0:\nnpm ERR! git rev-list -n1 ~1.1.9: fatal: ambiguous argument '~1.1.9': unknown revision or path not in the working tree.\nnpm ERR! git rev-list -n1 ~1.1.9: Use '--' to separate paths from revisions, like this:\nnpm ERR! git rev-list -n1 ~1.1.9: 'git  [...] -- [...]'\nnpm ERR! git rev-list -n1 ~1.1.9:\nnpm WARN addRemoteGit Error: Command failed: git config --get remote.origin.url\nnpm WARN addRemoteGit\nnpm WARN addRemoteGit     at ChildProcess.exithandler (child_process.js:275:12)\nnpm WARN addRemoteGit     at emitTwo (events.js:126:13)\nnpm WARN addRemoteGit     at ChildProcess.emit (events.js:214:7)\nnpm WARN addRemoteGit     at maybeClose (internal/child_process.js:925:16)\nnpm WARN addRemoteGit     at Socket.stream.socket.on (internal/child_process.js:346:11)\nnpm WARN addRemoteGit     at emitOne (events.js:116:13)\nnpm WARN addRemoteGit     at Socket.emit (events.js:211:7)\nnpm WARN addRemoteGit     at Pipe._handle.close [as _onclose] (net.js:567:12)\nnpm WARN addRemoteGit  deviantony/splitargs#~0.2.0 resetting remote /home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e because of error: { Error: Command failed: git config --get remote.origin.url\nnpm WARN addRemoteGit\nnpm WARN addRemoteGit     at ChildProcess.exithandler (child_process.js:275:12)\nnpm WARN addRemoteGit     at emitTwo (events.js:126:13)\nnpm WARN addRemoteGit     at ChildProcess.emit (events.js:214:7)\nnpm WARN addRemoteGit     at maybeClose (internal/child_process.js:925:16)\nnpm WARN addRemoteGit     at Socket.stream.socket.on (internal/child_process.js:346:11)\nnpm WARN addRemoteGit     at emitOne (events.js:116:13)\nnpm WARN addRemoteGit     at Socket.emit (events.js:211:7)\nnpm WARN addRemoteGit     at Pipe._handle.close [as _onclose] (net.js:567:12)\nnpm WARN addRemoteGit   killed: false,\nnpm WARN addRemoteGit   code: 1,\nnpm WARN addRemoteGit   signal: null,\nnpm WARN addRemoteGit   cmd: 'git config --get remote.origin.url' }\nnpm WARN addRemoteGit Error: Command failed: git config --get remote.origin.url\nnpm WARN addRemoteGit\nnpm WARN addRemoteGit     at ChildProcess.exithandler (child_process.js:275:12)\nnpm WARN addRemoteGit     at emitTwo (events.js:126:13)\nnpm WARN addRemoteGit     at ChildProcess.emit (events.js:214:7)\nnpm WARN addRemoteGit     at maybeClose (internal/child_process.js:925:16)\nnpm WARN addRemoteGit     at Socket.stream.socket.on (internal/child_process.js:346:11)\nnpm WARN addRemoteGit     at emitOne (events.js:116:13)\nnpm WARN addRemoteGit     at Socket.emit (events.js:211:7)\nnpm WARN addRemoteGit     at Pipe._handle.close [as _onclose] (net.js:567:12)\nnpm WARN addRemoteGit  revolunet/angular-google-analytics#~1.1.9 resetting remote /home/admin/.npm/_git-remotes/git-github-com-revolunet-angular-google-analytics-git-1-1-9-bdac43b0 because of error: { Error: Command failed: git config --get remote.origin.url\nnpm WARN addRemoteGit\nnpm WARN addRemoteGit     at ChildProcess.exithandler (child_process.js:275:12)\nnpm WARN addRemoteGit     at emitTwo (events.js:126:13)\nnpm WARN addRemoteGit     at ChildProcess.emit (events.js:214:7)\nnpm WARN addRemoteGit     at maybeClose (internal/child_process.js:925:16)\nnpm WARN addRemoteGit     at Socket.stream.socket.on (internal/child_process.js:346:11)\nnpm WARN addRemoteGit     at emitOne (events.js:116:13)\nnpm WARN addRemoteGit     at Socket.emit (events.js:211:7)\nnpm WARN addRemoteGit     at Pipe._handle.close [as _onclose] (net.js:567:12)\nnpm WARN addRemoteGit   killed: false,\nnpm WARN addRemoteGit   code: 1,\nnpm WARN addRemoteGit   signal: null,\nnpm WARN addRemoteGit   cmd: 'git config --get remote.origin.url' }\nnpm ERR! git rev-list -n1 ~2.1.3: fatal: ambiguous argument '~2.1.3': unknown revision or path not in the working tree.\nnpm ERR! git rev-list -n1 ~2.1.3: Use '--' to separate paths from revisions, like this:\nnpm ERR! git rev-list -n1 ~2.1.3: 'git  [...] -- [...]'\nnpm ERR! git rev-list -n1 ~2.1.3:\nnpm WARN addRemoteGit Error: Command failed: git config --get remote.origin.url\nnpm WARN addRemoteGit\nnpm WARN addRemoteGit     at ChildProcess.exithandler (child_process.js:275:12)\nnpm WARN addRemoteGit     at emitTwo (events.js:126:13)\nnpm WARN addRemoteGit     at ChildProcess.emit (events.js:214:7)\nnpm WARN addRemoteGit     at maybeClose (internal/child_process.js:925:16)\nnpm WARN addRemoteGit     at Socket.stream.socket.on (internal/child_process.js:346:11)\nnpm WARN addRemoteGit     at emitOne (events.js:116:13)\nnpm WARN addRemoteGit     at Socket.emit (events.js:211:7)\nnpm WARN addRemoteGit     at Pipe._handle.close [as _onclose] (net.js:567:12)\nnpm WARN addRemoteGit  codeseven/toastr#~2.1.3 resetting remote /home/admin/.npm/_git-remotes/git-github-com-codeseven-toastr-git-2-1-3-fbd72d61 because of error: { Error: Command failed: git config --get remote.origin.url\nnpm WARN addRemoteGit\nnpm WARN addRemoteGit     at ChildProcess.exithandler (child_process.js:275:12)\nnpm WARN addRemoteGit     at emitTwo (events.js:126:13)\nnpm WARN addRemoteGit     at ChildProcess.emit (events.js:214:7)\nnpm WARN addRemoteGit     at maybeClose (internal/child_process.js:925:16)\nnpm WARN addRemoteGit     at Socket.stream.socket.on (internal/child_process.js:346:11)\nnpm WARN addRemoteGit     at emitOne (events.js:116:13)\nnpm WARN addRemoteGit     at Socket.emit (events.js:211:7)\nnpm WARN addRemoteGit     at Pipe._handle.close [as _onclose] (net.js:567:12)\nnpm WARN addRemoteGit   killed: false,\nnpm WARN addRemoteGit   code: 1,\nnpm WARN addRemoteGit   signal: null,\nnpm WARN addRemoteGit   cmd: 'git config --get remote.origin.url' }\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:deviantony/splitargs.git /home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e: Cloning into bare repository '/home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e'...\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:deviantony/splitargs.git /home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e: git@github.com: Permission denied (publickey).\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:deviantony/splitargs.git /home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e: fatal: Could not read from remote repository.\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:deviantony/splitargs.git /home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e:\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:deviantony/splitargs.git /home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e: Please make sure you have the correct access rights\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:deviantony/splitargs.git /home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e: and the repository exists.\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:revolunet/angular-google-analytics.git /home/admin/.npm/_git-remotes/git-github-com-revolunet-angular-google-analytics-git-1-1-9-bdac43b0: Cloning into bare repository '/home/admin/.npm/_git-remotes/git-github-com-revolunet-angular-google-analytics-git-1-1-9-bdac43b0'...\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:revolunet/angular-google-analytics.git /home/admin/.npm/_git-remotes/git-github-com-revolunet-angular-google-analytics-git-1-1-9-bdac43b0: git@github.com: Permission denied (publickey).\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:revolunet/angular-google-analytics.git /home/admin/.npm/_git-remotes/git-github-com-revolunet-angular-google-analytics-git-1-1-9-bdac43b0: fatal: Could not read from remote repository.\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:revolunet/angular-google-analytics.git /home/admin/.npm/_git-remotes/git-github-com-revolunet-angular-google-analytics-git-1-1-9-bdac43b0:\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:revolunet/angular-google-analytics.git /home/admin/.npm/_git-remotes/git-github-com-revolunet-angular-google-analytics-git-1-1-9-bdac43b0: Please make sure you have the correct access rights\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:revolunet/angular-google-analytics.git /home/admin/.npm/_git-remotes/git-github-com-revolunet-angular-google-analytics-git-1-1-9-bdac43b0: and the repository exists.\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:codeseven/toastr.git /home/admin/.npm/_git-remotes/git-github-com-codeseven-toastr-git-2-1-3-fbd72d61: Cloning into bare repository '/home/admin/.npm/_git-remotes/git-github-com-codeseven-toastr-git-2-1-3-fbd72d61'...\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:codeseven/toastr.git /home/admin/.npm/_git-remotes/git-github-com-codeseven-toastr-git-2-1-3-fbd72d61: git@github.com: Permission denied (publickey).\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:codeseven/toastr.git /home/admin/.npm/_git-remotes/git-github-com-codeseven-toastr-git-2-1-3-fbd72d61: fatal: Could not read from remote repository.\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:codeseven/toastr.git /home/admin/.npm/_git-remotes/git-github-com-codeseven-toastr-git-2-1-3-fbd72d61:\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:codeseven/toastr.git /home/admin/.npm/_git-remotes/git-github-com-codeseven-toastr-git-2-1-3-fbd72d61: Please make sure you have the correct access rights\nnpm ERR! git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:codeseven/toastr.git /home/admin/.npm/_git-remotes/git-github-com-codeseven-toastr-git-2-1-3-fbd72d61: and the repository exists.\nnpm ERR! Linux 4.15.0-1035-azure\nnpm ERR! argv \"/usr/bin/node\" \"/usr/bin/npm\" \"install\"\nnpm ERR! node v8.10.0\nnpm ERR! npm  v3.5.2\nnpm ERR! code 128\nnpm ERR! Command failed: git clone --template=/home/admin/.npm/_git-remotes/_templates --mirror git@github.com:deviantony/splitargs.git /home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e\nnpm ERR! Cloning into bare repository '/home/admin/.npm/_git-remotes/git-github-com-deviantony-splitargs-git-0-2-0-75bd514e'...\nnpm ERR! git@github.com: Permission denied (publickey).\nnpm ERR! fatal: Could not read from remote repository.\nnpm ERR!\nnpm ERR! Please make sure you have the correct access rights\nnpm ERR! and the repository exists.\nnpm ERR!\nnpm ERR!\nnpm ERR! If you need help, you may report this error at:\nnpm ERR!     https://github.com/npm/npm/issues\nnpm ERR! Please include the following file with any support request:\nnpm ERR!     /home/admin/portainer/npm-debug.log\nThere seems to be an error with the actual coning of the repo, although my understanding is that this was done when doinggit clone https://github.com/portainer/portainer.git```\nI have attached the npm-debug.log file in case you wanted to take a look at it.\nAgain, Thank you so much for helping me in troubeshooting this issue. It is very much appreciated.\nnpm-debug.log\n. Same question here. Would like to know when next release is scheduled and what it will include.. Hi @deviantony \nI was recently able to build a docker image using yarn but once doing yarn and then yarn start the docker container is created and running. The only issue is that it does not have any ports mapped to the VM so port 9000:9000. Typically I would use a docker run command with  the different flags that allow for port mapping and enabling things like SSL, but doing a docker run on the image created using yarn does not seem to work.\nCould you please provide some help on this?\nThanks in advance :). Thanks for quick response @deviantony! :) \nHow would I go about exposing the docker port? Or lets say I wanted to map port 9000 to port 500 on the host?\nThis is how I start the standard portainer image available on portainer.io:\n$ docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\nBut if for the container I use the image created by yarn start or just yarn then it will not start.\nFor example:\ndocker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/base:latest\nAny ideas?. @deviantony Thanks a ton! This worked :)\nI'm looking to make some changes to the css styling to then deploy. This should work.\nThanks again!. Hi @deviantony !\nThanks for the quick response.\nI walked through the guide you provided and verified that I have the latest versions of Docker, node.js, Yarn, Golang. I am now receiving this error:\n```Warning: Command failed: if [ -f dist/portainer ]; then echo \"Portainer binary exists\"; else build/build_binary.sh linux amd64; fi\ngithub.com/portainer/portainer (download)\ncreated GOPATH=/home/admin/go; see 'go help gopath'\npackage github.com/portainer/portainer: no Go files in /home/admin/go/src/github.com/portainer/portainer\npackage github.com/portainer/portainer/bolt: cannot find package \"github.com/portainer/portainer/bolt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/bolt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/bolt (from $GOPATH)\npackage github.com/portainer/portainer/cli: cannot find package \"github.com/portainer/portainer/cli\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cli (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cli (from $GOPATH)\npackage github.com/portainer/portainer/cron: cannot find package \"github.com/portainer/portainer/cron\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cron (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cron (from $GOPATH)\npackage github.com/portainer/portainer/crypto: cannot find package \"github.com/portainer/portainer/crypto\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/crypto (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/crypto (from $GOPATH)\npackage github.com/portainer/portainer/docker: cannot find package \"github.com/portainer/portainer/docker\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/docker (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/docker (from $GOPATH)\npackage github.com/portainer/portainer/exec: cannot find package \"github.com/portainer/portainer/exec\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/exec (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/exec (from $GOPATH)\npackage github.com/portainer/portainer/filesystem: cannot find package \"github.com/portainer/portainer/filesystem\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/filesystem (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/filesystem (from $GOPATH)\npackage github.com/portainer/portainer/git: cannot find package \"github.com/portainer/portainer/git\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/git (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/git (from $GOPATH)\npackage github.com/portainer/portainer/http: cannot find package \"github.com/portainer/portainer/http\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http (from $GOPATH)\npackage github.com/portainer/portainer/http/client: cannot find package \"github.com/portainer/portainer/http/client\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http/client (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http/client (from $GOPATH)\npackage github.com/portainer/portainer/jwt: cannot find package \"github.com/portainer/portainer/jwt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/jwt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/jwt (from $GOPATH)\npackage github.com/portainer/portainer/ldap: cannot find package \"github.com/portainer/portainer/ldap\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/ldap (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/ldap (from $GOPATH)\npackage github.com/portainer/portainer/libcompose: cannot find package \"github.com/portainer/portainer/libcompose\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/libcompose (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/libcompose (from $GOPATH)\nmain.go:9:2: no Go files in /home/admin/go/src/github.com/portainer/portainer\nmain.go:10:2: cannot find package \"github.com/portainer/portainer/bolt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/bolt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/bolt (from $GOPATH)\nmain.go:11:2: cannot find package \"github.com/portainer/portainer/cli\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cli (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cli (from $GOPATH)\nmain.go:12:2: cannot find package \"github.com/portainer/portainer/cron\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cron (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cron (from $GOPATH)\nmain.go:13:2: cannot find package \"github.com/portainer/portainer/crypto\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/crypto (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/crypto (from $GOPATH)\nmain.go:14:2: cannot find package \"github.com/portainer/portainer/docker\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/docker (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/docker (from $GOPATH)\nmain.go:15:2: cannot find package \"github.com/portainer/portainer/exec\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/exec (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/exec (from $GOPATH)\nmain.go:16:2: cannot find package \"github.com/portainer/portainer/filesystem\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/filesystem (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/filesystem (from $GOPATH)\nmain.go:17:2: cannot find package \"github.com/portainer/portainer/git\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/git (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/git (from $GOPATH)\nmain.go:18:2: cannot find package \"github.com/portainer/portainer/http\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http (from $GOPATH)\nmain.go:19:2: cannot find package \"github.com/portainer/portainer/http/client\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http/client (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http/client (from $GOPATH)\nmain.go:20:2: cannot find package \"github.com/portainer/portainer/jwt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/jwt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/jwt (from $GOPATH)\nmain.go:21:2: cannot find package \"github.com/portainer/portainer/ldap\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/ldap (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/ldap (from $GOPATH)\nmain.go:22:2: cannot find package \"github.com/portainer/portainer/libcompose\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/libcompose (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/libcompose (from $GOPATH)\nmv: cannot stat 'portainer': No such file or directory\n Use --force to continue.\nAborted due to warnings.\nerror Command failed with exit code 6.\n```\nI have tried doing yarn to build inside the go directory that is created as well as some other things to try to get it working. using --force does not really fix things.\nWhat do you suggest?\nThanks again!. Hey @deviantony Thanks again for the response, no luck with those instructions although I did notice that they were the same as the ones that I followed previously. The commands I am using are as follows:\n\ngit clone https://github.com/portainer/portainer.git\nln -s ${GOPATH}/src/github.com/portainer/portainer ${PWD}/portainer/api\ncd portainer\nyarn\nyarn start\n\nI received the same message as above. Let me know if you think I should try something else. :). @linquize I am not sure. What does this involve? Sorry am not familiarized with go.\nThanks!. @linquize Appreciate the quick response. I tried that but still am getting the same error with exit code 6. These are the updates steps:\n\ngit clone https://github.com/portainer/portainer.git\nexport GOPATH=`pwd`\nln -s ${GOPATH}/src/github.com/portainer/portainer ${PWD}/portainer/api\ncd portainer\nyarn\nyarn start\n\nAny ideas what could be the cause?. @linquize Sure thing here it is.\nMy go version is go1.11.5 linux/amd64\nLatest Error message:\n```\nroot@Tool:~/portainer# yarn start\nyarn run v1.13.0\n$ grunt run-dev\nRunning \"config:dev\" (config) task\n\n\nConfigure 1 variable for current target.\n\n\nRunning \"clean:app\" (clean) task\nRunning \"shell:buildBinary:linux:amd64\" (shell) task\ngithub.com/portainer/portainer (download)\npackage github.com/portainer/portainer/bolt: cannot find package \"github.com/portainer/portainer/bolt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/bolt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/bolt (from $GOPATH)\npackage github.com/portainer/portainer/cli: cannot find package \"github.com/portainer/portainer/cli\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cli (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cli (from $GOPATH)\npackage github.com/portainer/portainer/cron: cannot find package \"github.com/portainer/portainer/cron\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cron (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cron (from $GOPATH)\npackage github.com/portainer/portainer/crypto: cannot find package \"github.com/portainer/portainer/crypto\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/crypto (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/crypto (from $GOPATH)\npackage github.com/portainer/portainer/docker: cannot find package \"github.com/portainer/portainer/docker\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/docker (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/docker (from $GOPATH)\npackage github.com/portainer/portainer/exec: cannot find package \"github.com/portainer/portainer/exec\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/exec (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/exec (from $GOPATH)\npackage github.com/portainer/portainer/filesystem: cannot find package \"github.com/portainer/portainer/filesystem\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/filesystem (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/filesystem (from $GOPATH)\npackage github.com/portainer/portainer/git: cannot find package \"github.com/portainer/portainer/git\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/git (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/git (from $GOPATH)\npackage github.com/portainer/portainer/http: cannot find package \"github.com/portainer/portainer/http\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http (from $GOPATH)\npackage github.com/portainer/portainer/http/client: cannot find package \"github.com/portainer/portainer/http/client\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http/client (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http/client (from $GOPATH)\npackage github.com/portainer/portainer/jwt: cannot find package \"github.com/portainer/portainer/jwt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/jwt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/jwt (from $GOPATH)\npackage github.com/portainer/portainer/ldap: cannot find package \"github.com/portainer/portainer/ldap\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/ldap (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/ldap (from $GOPATH)\npackage github.com/portainer/portainer/libcompose: cannot find package \"github.com/portainer/portainer/libcompose\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/libcompose (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/libcompose (from $GOPATH)\nmain.go:9:2: no Go files in /home/admin/go/src/github.com/portainer/portainer\nmain.go:10:2: cannot find package \"github.com/portainer/portainer/bolt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/bolt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/bolt (from $GOPATH)\nmain.go:11:2: cannot find package \"github.com/portainer/portainer/cli\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cli (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cli (from $GOPATH)\nmain.go:12:2: cannot find package \"github.com/portainer/portainer/cron\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cron (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cron (from $GOPATH)\nmain.go:13:2: cannot find package \"github.com/portainer/portainer/crypto\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/crypto (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/crypto (from $GOPATH)\nmain.go:14:2: cannot find package \"github.com/portainer/portainer/docker\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/docker (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/docker (from $GOPATH)\nmain.go:15:2: cannot find package \"github.com/portainer/portainer/exec\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/exec (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/exec (from $GOPATH)\nmain.go:16:2: cannot find package \"github.com/portainer/portainer/filesystem\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/filesystem (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/filesystem (from $GOPATH)\nmain.go:17:2: cannot find package \"github.com/portainer/portainer/git\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/git (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/git (from $GOPATH)\nmain.go:18:2: cannot find package \"github.com/portainer/portainer/http\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http (from $GOPATH)\nmain.go:19:2: cannot find package \"github.com/portainer/portainer/http/client\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http/client (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http/client (from $GOPATH)\nmain.go:20:2: cannot find package \"github.com/portainer/portainer/jwt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/jwt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/jwt (from $GOPATH)\nmain.go:21:2: cannot find package \"github.com/portainer/portainer/ldap\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/ldap (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/ldap (from $GOPATH)\nmain.go:22:2: cannot find package \"github.com/portainer/portainer/libcompose\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/libcompose (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/libcompose (from $GOPATH)\nmv: cannot stat 'portainer': No such file or directory\nWarning: Command failed: if [ -f dist/portainer ]; then echo \"Portainer binary exists\"; else build/build_binary.sh linux amd64; fi\ngithub.com/portainer/portainer (download)\npackage github.com/portainer/portainer/bolt: cannot find package \"github.com/portainer/portainer/bolt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/bolt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/bolt (from $GOPATH)\npackage github.com/portainer/portainer/cli: cannot find package \"github.com/portainer/portainer/cli\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cli (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cli (from $GOPATH)\npackage github.com/portainer/portainer/cron: cannot find package \"github.com/portainer/portainer/cron\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cron (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cron (from $GOPATH)\npackage github.com/portainer/portainer/crypto: cannot find package \"github.com/portainer/portainer/crypto\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/crypto (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/crypto (from $GOPATH)\npackage github.com/portainer/portainer/docker: cannot find package \"github.com/portainer/portainer/docker\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/docker (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/docker (from $GOPATH)\npackage github.com/portainer/portainer/exec: cannot find package \"github.com/portainer/portainer/exec\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/exec (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/exec (from $GOPATH)\npackage github.com/portainer/portainer/filesystem: cannot find package \"github.com/portainer/portainer/filesystem\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/filesystem (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/filesystem (from $GOPATH)\npackage github.com/portainer/portainer/git: cannot find package \"github.com/portainer/portainer/git\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/git (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/git (from $GOPATH)\npackage github.com/portainer/portainer/http: cannot find package \"github.com/portainer/portainer/http\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http (from $GOPATH)\npackage github.com/portainer/portainer/http/client: cannot find package \"github.com/portainer/portainer/http/client\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http/client (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http/client (from $GOPATH)\npackage github.com/portainer/portainer/jwt: cannot find package \"github.com/portainer/portainer/jwt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/jwt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/jwt (from $GOPATH)\npackage github.com/portainer/portainer/ldap: cannot find package \"github.com/portainer/portainer/ldap\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/ldap (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/ldap (from $GOPATH)\npackage github.com/portainer/portainer/libcompose: cannot find package \"github.com/portainer/portainer/libcompose\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/libcompose (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/libcompose (from $GOPATH)\nmain.go:9:2: no Go files in /home/admin/go/src/github.com/portainer/portainer\nmain.go:10:2: cannot find package \"github.com/portainer/portainer/bolt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/bolt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/bolt (from $GOPATH)\nmain.go:11:2: cannot find package \"github.com/portainer/portainer/cli\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cli (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cli (from $GOPATH)\nmain.go:12:2: cannot find package \"github.com/portainer/portainer/cron\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/cron (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/cron (from $GOPATH)\nmain.go:13:2: cannot find package \"github.com/portainer/portainer/crypto\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/crypto (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/crypto (from $GOPATH)\nmain.go:14:2: cannot find package \"github.com/portainer/portainer/docker\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/docker (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/docker (from $GOPATH)\nmain.go:15:2: cannot find package \"github.com/portainer/portainer/exec\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/exec (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/exec (from $GOPATH)\nmain.go:16:2: cannot find package \"github.com/portainer/portainer/filesystem\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/filesystem (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/filesystem (from $GOPATH)\nmain.go:17:2: cannot find package \"github.com/portainer/portainer/git\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/git (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/git (from $GOPATH)\nmain.go:18:2: cannot find package \"github.com/portainer/portainer/http\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http (from $GOPATH)\nmain.go:19:2: cannot find package \"github.com/portainer/portainer/http/client\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/http/client (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/http/client (from $GOPATH)\nmain.go:20:2: cannot find package \"github.com/portainer/portainer/jwt\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/jwt (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/jwt (from $GOPATH)\nmain.go:21:2: cannot find package \"github.com/portainer/portainer/ldap\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/ldap (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/ldap (from $GOPATH)\nmain.go:22:2: cannot find package \"github.com/portainer/portainer/libcompose\" in any of:\n        /snap/go/3129/src/github.com/portainer/portainer/libcompose (from $GOROOT)\n        /home/admin/go/src/github.com/portainer/portainer/libcompose (from $GOPATH)\nmv: cannot stat 'portainer': No such file or directory\n Use --force to continue.\nAborted due to warnings.\nerror Command failed with exit code 6.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\n```\nThanks!. @linquize I have created a new directory and repeated all the steps in it. Unfortunately I still received the same error message.  I have nodejs version 8.10.0, and yarn version 1.13 if that is of any help.\nI did this on a brand new VM, Ubuntu 18.04 with docker freshly installed.\nIs this working for others?\nThanks for all the help!. Hey @deviantony !\nThanks for the instructions, I have followed those steps but am still presented with the same error noted above. I also uninstalled and reinstalled go using a method other than snap, and repeated the process with no success.\nI am running on Ubuntu 18.04, before having GO as a requirement this worked fine. Do you think the issue may be with Ubuntu?\nThanks!. @deviantony Will do :). Hi @deviantony !\nI deployed the agent using the instructions provided by the portainer web server, except I had to change the link since the one provided seems to be broken/nonexistant. On the Swarm manager I ran the following command:\ncurl -L https://d1jiktx90t87hr.cloudfront.net/354/wp-content/uploads/sites/2/dockers/agent-stack.yml -o agent-stack.yml && docker stack deploy --compose-file=agent-stack.yml portainer-agent\nLet me know what you think. Thanks.. Hey @deviantony \nI tried this and I was able to download and run, but it is still causing the same issue as above, where only information for the manager nodes appears.\nLogging does not show anything new either. I restarted the docker swarm as well.. Oh ok, thanks for the insight @deviantony . I am running these VMs in Azure. Any idea if this could be the cause? Or is there a direction you think I should take to find a solution for this? Am not familiarized with Docker Swarm.. Hey @deviantony I rebuilt all the VMs and am still presented with the same issue, but I noticed that when they are in the same datacenter and there Private IP is used that it functions correctly.\nIs it not possible to run Portainer in docker swarm accrross datacenters using Public IPs?\nThanks for all the help!. Hi @deviantony ,\nHere is how I created the Azure environment:\n4 VMs - 3 in Central datacenter, 2 in \"US East 2\"\n VM size: Standard D2s v3 (2 vcpus, 8 GB memory)\n OS: Ubuntu 18.04\n Installed Docker\n Started Swarm mode: docker swarm init --advertise-addr [Insert public IP here]\nUsed join token on other nodes\n installed portainer agent on manager node\n worker nodes come up with message above\nThat's the steps i'm taking. Let me know what you think.\nThanks!. Hi @ssbkang \nInitially I was not using the --advertise-addr parameter but that causes the manager node to give out a join token for the worker nodes that has an private IP, and given that the nodes are in different datacenters, a private IP will not route anywhere.\nAccording to docker documentation, the advertise-addr flag specifies the address that will be advertised to other members of the swarm for API access and overlay networking. If unspecified, Docker will check if the system has a single IP address, and use that IP address with the listening port (see --listen-addr). If the system has multiple IP addresses, --advertise-addr must be specified so that the correct address is chosen for inter-manager communication and overlay networking.\nWould you have set things up differently? Maybe using a different flag?\nThanks!. ",
    "reedv": "@deviantony \nMay be an issue with portainer not automatically creating the needed Portainer folder if not exists (not sure if this is intentional or not (did not see it mentioned in the installation instructions)).\nWas able to create new folders within the C:\\ProgramData\\ dir.\nChecking the folder permissions shows\nbash\n$ icacls ProgramData\nProgramData NT AUTHORITY\\SYSTEM:(OI)(CI)(F)\n            BUILTIN\\Administrators:(OI)(CI)(F)\n            CREATOR OWNER:(OI)(CI)(IO)(F)\n            BUILTIN\\Users:(OI)(CI)(RX)\n            BUILTIN\\Users:(CI)(WD,AD,WEA,WA)\nCreating a folder ProgramData_TEST on the Desktop and running\nbash\n$ docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v C:\\Users\\rvillanueva\\Desktop\\ProgramData_TEST\\Portainer:/data portainer/portainer\ndocker: Error response from daemon: Mount denied:\nThe source path \"C:/Users/me/Desktop/ProgramData_TEST/Portainer\"\ndoesn't exist and is not known to Docker.\nSee 'docker run --help'.\nyou can see it returns a similar error. Yet, after manually creating the Portainer folder within that Dektop dir. and rerunning\nbash\n$ docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v C:\\Users\\me\\Desktop\\ProgramData_TEST\\Portainer:/data portainer/portainer\nit then seems to run as expected, asking me to authorize permission to share C drive and such.. Got it, thanks.. ",
    "mountaindude": "docket stats:\n\nCONTAINER           CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS\nportainer           0.00%               12.86MiB / 11.72GiB   0.11%               92.1kB / 512kB      0B / 0B             0\n\ndocker top portainer\n\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                30527               30503               0                   09:53               ?                   00:00:00            /portainer -H unix:///var/run/docker.sock\nash-4.3#\n. \n",
    "WatskeBart": "I can confirm this issue. Having the same problem when trying to install a stack from a Portainer App \nTemplate as well as creating my own stack using a docker compose file.\nCreating a stack from the command line does work, using docker-compose. Adding stacks with Portainer worked perfectly in the past.. ",
    "jontey": "Can't create if using stack interface. However creating a single container works.. ",
    "hlubovac": "I actually didn't spot container-templates section - my bad :) I didn't have a need for app-templates, and I never scrolled down enough. This looks like it's exactly what I was looking for: a way to launch a container from within this UI, without having to log-in to the docker-host machine and execute docker-run command (I started hosting this in a VM, so interracting with docker has become slightly more complex, and I do need to frequently reset some of the containers that I have there).\nThat said, I also just noticed the \"recreate\" feature within container details - which also does exactly what I need, and perhaps even easier (having a container that needs to be reset, I don't need a template for this).\nThank you for taking the time to respond!. ",
    "devinant": "@SMARoovers @deviantony \nMy team is able to reproduce this bug. Since we're using Automatic User Provisioning, we noticed this behaviour when other teams started to complain about not being to log in. \nHere are the steps to reproduce:\n1. Go to Settings > Authentication\n2. Pick LDAP Authentication\n3. Fill in the details for LDAP Server, Reader DN and Password.\n4. Click on Test Connectivity. If the entered details are correct, then Portainer will notify.\n5. Click on Save Settings at the bottom of the page.\n6. Go to another page in the UI, e.g. Settings > About\n7. Go back to Settings > Authentication\nNotice, the Password input is empty.\n8. Scroll down and click on Save Settings. \nPortainer will store the empty password.\n9. Open the logs for the container, you should now see\nhttp error: Invalid credentials (err=Unauthorized) (code=422) when someone attempts to login.\nHope this helps.. Thanks for getting this fixed quickly \ud83d\udc4d . ",
    "gurpal2000": "closing - did not read the bit about insecure settings in daemon.json. ",
    "freexmonster": "\nUse: downloads.portainer.io/agent-stack.ymlhttp://downloads.portainer.io/agent-stack.yml\n\u2026\nSent from my iPhone On 30/12/2018, at 8:31 AM, claycooper notifications@github.com<mailto:notifications@github.com> wrote: Bug description The URL in the dialog for creating a new Portainer agent is broken. Steps to reproduce the issue: Steps to reproduce the behavior: 1. Go to /#/endpoints/new 2. Click on 'Agent' 3. Note directions in Information section 4. Trying \"curl -L https://portainer.io/download/agent-stack.ymlhttps://urldefense.proofpoint.com/v2/url?u=https-3A__portainer.io_download_agent-2Dstack.yml&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nP-Lbuv0K1ToCjc4AXv7BCyaySthD4bG6buqFssl3kU&s=eAdMU0RbN0tb9rKGvXTe98qqQjnD2jwQcjZWPA0i2AE&e= -I\" returns a 404 error. Technical details: * Portainer version: 1.20.0 * Docker version (managed by Portainer): N/A * Platform (windows/linux): N/A * Command used to start Portainer (docker run -p 9000:9000 portainer/portainer): N/A * Browser: N/A \u2014 You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHubhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_portainer_portainer_issues_2584&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nP-Lbuv0K1ToCjc4AXv7BCyaySthD4bG6buqFssl3kU&s=fp7qyWeXjBwMlxy3HYmTrNI2R0K54Oln9r7LN8ZtDxg&e=, or mute the threadhttps://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AWGrlT6eNJF-2D7zpRccR8PUANLFFqEs9Gks5u98L7gaJpZM4Zkr3T&d=DwMCaQ&c=euGZstcaTDllvimEN8b7jXrwqOf-v5A_CdpgnVfiiMM&r=0fx0h4vB56iTLpw2McH1ZD6TqG_QGpbggVOB-PfMJpM&m=nP-Lbuv0K1ToCjc4AXv7BCyaySthD4bG6buqFssl3kU&s=Spowfb--Rn8CcS4esJPm990VWjonNaLjTCOdo_JbM-o&e=.\n\nnot work. ",
    "TakeMeNL": "Woops!! .. sorry couldn't find a existing issue.. ",
    "frenck": "Thanks!. ",
    "tzoght": "Also\nWhen I run\nls -l /var/run/docker.sock\nI get:\nlrwxr-xr-x  1 tzoght  1704009625  67  1 Jan 11:58 /var/run/docker.sock -> /Users/tzoght/Library/Containers/com.docker.docker/Data/docker.sock. The solution was to do a Reset to Factory Defaults on Docker Desktop for Mac \"Removes all settings and data. Just like new.\"\n. ",
    "bvierra": "Per the docs you can easily disable it with a flag:\n--no-analytics: Disable analytics (default: false)\nhttps://portainer.readthedocs.io/en/stable/configuration.html#available-flags\n. ",
    "hiyao": "yes, but i don't know how to add in #2565, sorry. ",
    "dbellingroth": "\n@dbellingroth it seems like the agent containers aren't able to resolve other agent containers' IP addresses and uses the Docker host's DNS to try resolve tasks.agent - would you please double check the firewall requirement for the overlay network?\n\nThe nodes are all in the same local ethernet. So, if I get it right, the firewall should have no impact on communication between the nodes?\nBut as you mention it. When I deploy the stack it automatically renames the service to portainer_agent. Do I have to replace tasks.agent with tasks.portainer_agent?. > But as you mention it. When I deploy the stack it automatically renames the service to portainer_agent. Do I have to replace tasks.agent with tasks.portainer_agent?\nOK, tried that. But didn't make any difference. Also I started a service which is pinging tasks.portainer_agent and is connected to the overlay network to test, if IP resolution is working.\nping_agent.7.jc355hhcwg90@docker03     | 64 bytes from 10.0.0.4: seq=22 ttl=64 time=0.111 ms\nping_agent.9.m4xh77vjj2m9@docker03     | 64 bytes from 10.0.0.3: seq=21 ttl=64 time=0.434 ms\nping_agent.10.7xxtt654atfq@docker02    | 64 bytes from 10.0.0.5: seq=22 ttl=64 time=0.446 ms\nWorks. All three instances of Portainer Agent are reachable. I also tried executing nslookup in a container connected to the network. It correctly returns the 3 IP-Adresses of my nodes.\n```\n/ # nslookup tasks.portainer_agent\nnslookup: can't resolve '(null)': Name does not resolve\nName:      tasks.portainer_agent\nAddress 1: 10.0.0.23 portainer_agent.nirkn1ttmv5n4pubztkawrj8j.jdfj62kfznma3qzg37otxvn1m.portainer_agent_network\nAddress 2: 10.0.0.22 portainer_agent.lcmndlzc1z0qb8u1tdudhbzkn.l6mrcsl1hrc4pn96gdppnisfo.portainer_agent_network\nAddress 3: 10.0.0.24 portainer_agent.m4h6x834rmxbt2mewwewyv9ck.qsmaczwza27sbk2ijq4neb9ew.portainer_agent_network\n``. Is it possible that this has to do with startup timing? Because in some rare cases it just works.. > @dbellingroth it seems like the agent containers aren't able to resolve other agent containers' IP addresses and uses the Docker host's DNS to try resolvetasks.agent` - would you please double check the firewall requirement for the overlay network?\nYou are right. Our local dns server returns exactly the two wrong IP addresses. So it seems that somehow the DNS service discovery is not working. What I don't get is, why it works seamlessly when I start e.g. an alpine container connected to the overlay network and ping tasks.portainer_agent. I guessed it may have something to do with timing. But I manually restarted one agent container while the others where still running an it still wasn't able to find them.. Now I got it to work by doing the following changes:\n\nI changed tasks.portainer_agent to just portainer_agent\nBecause the agents still didn't find each other at startup I manually ssh'ed into two of the three nodes and kill the agent container. When they were automatically restarted they were able to see the already running agents on the other nodes.\n\nIn my eyes it looks like there is an issue with the containers starting up all at once.. ",
    "kennylam777": "Thanks @dbellingroth and @deviantony  for the conversation.\nI am facing similar situation.\nIn my setup, Weave was used instead of overlay network for inter-connecting portainer containers, here is my deploy configuration. The last alpine is used for debugging network problem.\n```\nversion: '3.5'\nservices:\n  agent:\n    image: portainer/agent\n    environment:\n      # REQUIRED: Should be equal to the service name prefixed by \"tasks.\" when\n      # deployed inside an overlay network\n      AGENT_CLUSTER_ADDR: tasks.agent\n      # AGENT_PORT: 9001\n      # LOG_LEVEL: debug\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - portainer-net\n    deploy:\n      mode: global\n      placement:\n        constraints: [node.platform.os == linux]\n  portainer:\n    image: portainer/portainer\n    command: -H tcp://tasks.agent.portainer-net:9001 --tlsskipverify\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - portainer_data:/data\n    networks:\n      - portainer-net\n    ports:\n      - target: 9000\n        published: 9000\n        protocol: tcp\n        mode: host\n    deploy:\n      mode: replicated\n      replicas: 1\n      placement:\n        constraints: [node.role == manager]\n  alpine:\n    image: alpine:3.8\n    command: tail -f /dev/null\n    networks:\n      - portainer-net\n    deploy:\n      mode: global\nnetworks:\n  portainer-net:\n   attachable: true\n   driver: weaveworks/net-plugin:latest_release\n   name: portainer-net\nvolumes:\n  portainer_data:\n```\nThere are 2 manager node in the Swarm cluster, and only one agent will be connected by the portainer instance, the symptom is similar to the beginning of this issue. From the log of agents, only local bridged address(172.18.0.x) of agents were shown in EventMemberJoin lines, where 062f6478a025 is the local instance of agent and bde2a6930b29 is the remote instance of agent. The expected address are 10.0.x.x from Weave.\n```\ndocker logs 062f6478a025\n2019/03/15 03:31:45 [INFO] serf: EventMemberJoin: 062f6478a025 172.18.0.5\n2019/03/15 03:31:45 [INFO] serf: EventMemberJoin: bde2a6930b29 172.18.0.4\n2019/03/15 03:31:45 [INFO] - Starting Portainer agent version 1.2.1 on 0.0.0.0:9001 (cluster mode: true)\n2019/03/15 03:31:57 [INFO] memberlist: Suspect bde2a6930b29 has failed, no acks received\n2019/03/15 03:32:02 [INFO] memberlist: Marking bde2a6930b29 as failed, suspect timeout reached (0 peer confirmations)\n2019/03/15 03:32:02 [INFO] serf: EventMemberFailed: bde2a6930b29 172.18.0.4\n2019/03/15 03:32:08 [INFO] memberlist: Suspect bde2a6930b29 has failed, no acks received\n2019/03/15 03:32:15 [INFO] serf: attempting reconnect to bde2a6930b29 172.18.0.4:7946\n2019/03/15 03:32:55 [INFO] serf: attempting reconnect to bde2a6930b29 172.18.0.4:7946\n2019/03/15 03:33:35 [INFO] serf: attempting reconnect to bde2a6930b29 172.18.0.4:7946\n2019/03/15 03:34:15 [INFO] serf: attempting reconnect to bde2a6930b29 172.18.0.4:7946\n```\nTo check if it is a problem related to DNS, I deployed an alpine service to do the nslookup in the stack, and I wonder if tasks.agent will be resolved to the locally bridged address instead of the Weave's one.\n```\ndocker exec -ti 93bab58d4f19 sh\n/ # ip addr\n1: lo:  mtu 65536 qdisc noqueue state UNKNOWN qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n570: ethwe0@if571:  mtu 1376 qdisc noqueue state UP\n    link/ether 0a:65:68:b8:68:89 brd ff:ff:ff:ff:ff:ff\n    inet 10.0.32.10/24 brd 10.0.32.255 scope global ethwe0\n       valid_lft forever preferred_lft forever\n572: eth0@if573:  mtu 1500 qdisc noqueue state UP\n    link/ether 02:42:ac:12:00:02 brd ff:ff:ff:ff:ff:ff\n    inet 172.18.0.2/16 brd 172.18.255.255 scope global eth0\n       valid_lft forever preferred_lft forever\n/ # nslookup tasks.agent\nnslookup: can't resolve '(null)': Name does not resolve\nName:      tasks.agent\nAddress 1: 10.0.32.9 portainer_agent.ctrzy9txo4te8ie0f7iout7tw.mm0cbmtwnajfy4d1m6dq8atjh.portainer-net\nAddress 2: 10.0.32.11 portainer_agent.liitbwgf19azkq24svgfwuyp1.q89gw551ljqyuuvminzuubxea.portainer-net\n/ # ping 10.0.32.9\nPING 10.0.32.9 (10.0.32.9): 56 data bytes\n64 bytes from 10.0.32.9: seq=0 ttl=64 time=29.040 ms\n64 bytes from 10.0.32.9: seq=1 ttl=64 time=13.504 ms\n64 bytes from 10.0.32.9: seq=2 ttl=64 time=13.542 ms\n^C\n--- 10.0.32.9 ping statistics ---\n3 packets transmitted, 3 packets received, 0% packet loss\nround-trip min/avg/max = 13.504/18.695/29.040 ms\n/ # ping 10.0.32.11\nPING 10.0.32.11 (10.0.32.11): 56 data bytes\n64 bytes from 10.0.32.11: seq=0 ttl=64 time=0.294 ms\n64 bytes from 10.0.32.11: seq=1 ttl=64 time=0.251 ms\n^C\n--- 10.0.32.11 ping statistics ---\n2 packets transmitted, 2 packets received, 0% packet loss\nround-trip min/avg/max = 0.251/0.272/0.294 ms\n```\nIt seems that tasks.agent was resolved to addresses in portainer-net as expected, let's see what if I explicitly specify portainer-net in the DNS name\n```\n/ # nslookup tasks.agent.portainer-net\nnslookup: can't resolve '(null)': Name does not resolve\nName:      tasks.agent.portainer-net\nAddress 1: 10.0.32.11 portainer_agent.liitbwgf19azkq24svgfwuyp1.q89gw551ljqyuuvminzuubxea.portainer-net\nAddress 2: 10.0.32.9 portainer_agent.ctrzy9txo4te8ie0f7iout7tw.mm0cbmtwnajfy4d1m6dq8atjh.portainer-net\n```\nSo I changed the AGENT_CLUSTER_ADDR: tasks.agent to AGENT_CLUSTER_ADDR: tasks.agent.portainer-net in the configuration of agents. But the agent instances still resolving 172.18.0.x as member addresses, same as shown on the above.\nSince the agent is not open-sourced, could I ask how will the environment variable AGENT_CLUSTER_ADDR be used in the agent? If it is taking the value of AGENT_CLUSTER_ADDR as a DNS name to resolve a list of IP address, or the agent agent will use Docker API to obtain member's IP address?\nI think adding a fallback mechanism may helps, like 'do the resolving of AGENT_CLUSTER_ADDR again if there are peers found, but no peers were connected after few trials' .\nTechnical details:\n\nPortainer version: 1.20.2\nTarget Docker version (the host/cluster you manage): 18.09.3\nPlatform (windows/linux): Linux, Ubuntu 16.04 + HWE Kernel 4.15.0-46\nCommand used to start Portainer (docker run -p 9000:9000 portainer/portainer): docker stack deploy\nCNI: Weave 2.5.1 (v2 plugin)\n. \n",
    "altano": "Thanks for looking at my problem\n\nYou can see apparmour denied message there.. \n\nYep that might be the main issue, not sure.\n\nMaybe take a look here:https://www.linuxquestions.org/questions/linux-software-2/apparmor%3D-denied-operation%3D-rename_src-profile%3D-usr-bin-freshclam-4175632652/\n\nThis looks like an app armor bug as well, but do you think it's related to the error I'm getting? They look different to me.. Thanks for looking at my problem\n\nYou can see apparmour denied message there.. \n\nYep that might be the main issue, not sure.\n\nMaybe take a look here:https://www.linuxquestions.org/questions/linux-software-2/apparmor%3D-denied-operation%3D-rename_src-profile%3D-usr-bin-freshclam-4175632652/\n\nThis looks like an app armor bug as well, but do you think it's related to the error I'm getting? They look different to me.. Interesting link, thanks @ssbkang. Instead of trying to follow the directions in docker.help I went in a different direction:\nInstead of allowing Ubuntu Server to install the docker snap during initial Ubuntu  installation, I didn\u2019t install docker at all and let docker machine provision it from scratch.\nNow docker.help isn\u2019t a known command so I assume I\u2019m no longer running docker in a snap.\nAnd, as far as I can tell, all my App Armor problems above are gone too? I\u2019ll keep poking around but Portainer has survived many reboots at this point so I\u2019m closing this issue for now.\ntl;dr don\u2019t install the docker snap on Ubuntu.. Interesting link, thanks @ssbkang. Instead of trying to follow the directions in docker.help I went in a different direction:\nInstead of allowing Ubuntu Server to install the docker snap during initial Ubuntu  installation, I didn\u2019t install docker at all and let docker machine provision it from scratch.\nNow docker.help isn\u2019t a known command so I assume I\u2019m no longer running docker in a snap.\nAnd, as far as I can tell, all my App Armor problems above are gone too? I\u2019ll keep poking around but Portainer has survived many reboots at this point so I\u2019m closing this issue for now.\ntl;dr don\u2019t install the docker snap on Ubuntu.. ",
    "akamensky": "@gybfefe \n\nDid you copy the domain.crt to the target docker engine ca.crt? And subjectAltName IP is required too in self managed systems, but I think AWS make it for you...\n\nI am not sure why would I need to copy \"domain.crt\" when the domain SSL cert is verifiable against standard system root certs? It is NOT self-signed certificate. It is AWS ECR.... ",
    "cadavre": "I'm struggling to run properly Docker Swarm on AWS EC2 instances with private ECR repository. Portainer isn't much help because it adds another layer of \"something can go wrong\".\nWhat I've found (or done) so far:\n1. I'm using CRON to run aws erc get-login on each node (manager and workers) just for a sake of being sure docker has access to repository.\n2. Fact: never pull :latest image on any worker! Portainer/Swarm will always use it as fallback, even if newer version is available in the repository. You should allow Swarm to always fetch latest version of images based on tag, but referenced by sha (and this is correct!).\n3. Portainer isn't aware of changing registry credentials. In fact it isn't also if you're changing password straight in Portainer console \"Registries\".\n4. Clicking on \"Update the service\" seems not to add --with-registry-auth parameter which ends up with No such image: ... and sha being removed from service's image!\n5. Manually calling docker service update --force --with-registry-auth service-name fixes the problem until next ECR credentials rotation.\n6. After manual service update --with-registry-auth you can succesfuly \"Update the service\" from Portainer until next ECR credentials rotation.\nI have no idea if I'm doing something wrong, but Portainer seems to have problems with private registries. One solution (while using manual docker login for ECR) could be to add --with-registry-auth for each \"Update the service\" while another than DockerHub repository is selected.. ",
    "Kramins": "I am also having the same issue but I am running my own swarm with a nexus docker repository. Portainer fails to find the image until I run docker pull <repo>/<image> . ",
    "exoszajzbuk": "What do you mean? Portainer must run on the current leader?\nI didn\u2019t remember in previous versions it had to be on the leader. :). Just tested it, the POST /nodes/<id>/update API call can be started from any of the nodes, not just the leader.. @gybfefe I'm not sure what you're talking about here.\nThe POST /nodes/<id>/update Docker API method can be called from any of the managers, not just the leader, tested it with 18.09.2 running in Swarm mode and has nothing to do with Portainer.\nYou see the web-based edit function in Portainer 1.20 when Portainer is running on the leader manager? The form used to edit the node name was simply removed during a refactor according to the state of the current codebase.. ",
    "till": "@deviantony Thank you for fixing right away! \ud83d\udc4d . @deviantony is copying the database file periodically the best way to make a backup?. @deviantony is it com.docker.compose.project?. If I may ask another question... \nFor context, I am trying to provide an update stack method. How do you support that when the docker-compose based stacks are not available through e.g. PUT /api/stacks/ID?. @deviantony Oh, so EndpointID is only for non-swarm nodes?. So it seems like, I have to GET /api/endpoints/X/docker/swarm to figure out if it is a Swarm node to start? Just seems like that \"info\" could (or should) be included in the GET /api/endpoints?. @deviantony I found:\n{\n...\n\"Snapshots\": [\n\u00a0{\n   ...\n   \"Swarm\": bool,\n   \"DockerVersion\": \"...\"\n }\n]\nSave to rely on that? It's not in the API documentation, I have been reading all responses now.\nThe call to \"/api/endpoints/X/docker/swarm\" is also slightly borked, I think \u2014 on a non-swarm node, it returns HTTP status code 200 with an error message. Should I make a ticket?. ",
    "brentco": "If it helps, here's a video: https://youtu.be/JBNsoScWWoA\nIt happens when just editing a container as well. Though, not ALL containers seem to be affected by it. Haven't found a pattern yet.\nUpdate:\nIf the container uses the entry point field it's not affected.. @deviantony Yes indeed it does: https://youtu.be/jVFo39ENCYQ. ",
    "amirakhan": "Thank you for the reply deviantony, i have implemented LDAP for my portainer and users logging in using LDAP credentails are getting no option at all and in order to give them access they have to be administrator as soon as i change the permission to administrator they can do everything with no restrictions, so i am really not sure how to restrict them to just have access to few of the containers.\nUsing the container option i can assign owner to particular container however if i revoke administrator access user unable to view anything not even the container he is the owner of and if a give administrator access he is able to view everything even the containers he is not the owner of..\nI hope i am not making you confused :). I think i have got what i needed, using the endpoints i have given access to the users and by changing the owners i have restricted the permission of the users to the containers... Not sure if you have implemented the view only access for the users to only view other containers as well.... Yes it is a problem with every container and I am sorry I am not sure what is reverse proxy i have simply used the below script from Portainer website which deploy Portainer server and agents.\n$ curl -L https://downloads.portainer.io/portainer-agent-stack.yml -o portainer-agent-stack.yml\n$ docker stack deploy --compose-file=portainer-agent-stack.yml portainer. Yes PFB the details for your reference.\n1) 6 Linux host having Red Hat operating system in-house (not on cloud) with no internet connectivity.\n2) Deployed Docker, Docker Swarm & Compose.\n3) Deployed Portainer using the above script.\nit was working fine however all of sudden stopped working.. My Portainer is on Docker container and for some reason I am unable to pull the docker logs. it seems I haven't mapped /var/log of container to the host.. 2019/02/26 10:36:17 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\n2019/02/26 11:52:25 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/26 11:52:25 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/26 11:52:25 http error: Invalid JWT token (err=Invalid JWT token) (code=401)\n2019/02/26 15:22:41 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/02/26 15:22:41 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/02/26 15:23:01 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/02/26 15:23:01 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/02/26 15:24:28 cron error: endpoint snapshot error (endpoint=primary, URL=tcp://tasks.agent:9001) (err=Error response from daemon: )\n2019/02/27 10:08:54 websocketproxy: couldn't dial to remote backend url websocket: bad handshake\n2019/02/27 11:05:12 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/02/27 11:05:12 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/02/27 11:05:37 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/02/27 11:05:37 http error: Invalid credentials (err=Unauthorized) (code=422)\n2019/03/01 03:44:29 cron error: endpoint snapshot error (endpoint=primary, URL=tcp://tasks.agent:9001) (err=Error response from daemon: ). ",
    "marcel-st": "Hi deviantony, \nI found the issue, the container for some reason didn't pick up the IPv6 address and tried to communicate using IPv4, which my docker server isn't running. I fixed the issue and it's working good now.. Hi deviantony, \nI found the issue, the container for some reason didn't pick up the IPv6 address and tried to communicate using IPv4, which my docker server isn't running. I fixed the issue and it's working good now.. ",
    "mcrosson": "@deviantony If you'd like to point me in the right direction I can take a shot at a small code change + PR. @deviantony Quick question\nWhere is the underlying code for things like Container.get({ id: id }).$promise in docker/services/containerService.js I can't seem to connect one of the dots here.\nEdit \nLooks like api/http/proxy/response.go has extractJSONField and it's somehow eating empty labels.\nIf the jsonObject returned for a key is empty string will it be assigned nill instead of empty string?. @deviantony Thanks!\nI did open a PR for the rest of the empty label updates for the container side. The only thing that I ran into is the extractJSONField bit during my testing. Outside of that the PR should be good to go.. @deviantony When I did my initial tests the empty labels were not coming through when duplicating the container. If they are coming through then things are 100% IMHO \ud83d\udc4d . ",
    "j2l": "nah, I found docs not updated. nah, I found docs not updated. ",
    "gualandri43": "UPDATE\nAfter further inspection, I believe the cause of my issue is not Portainer's pull, but that I ran out of space on the underlying machine hosting my Docker Engine. Therefore, new pulls weren't completing and the images being shown were of earlier/incomplete versions of the images. Trying the pull on a fresh machine worked as expected.\nThis cause was found by logging into the machine hosting Docker and Portainer and trying the image pull manually, receiving an out of space error message. \nPortainer's error message, as stated above, indicated that the pulled image could not be found, or the wrong (old) SHA was used, which is true since the pull didn't have hard disk space to complete. However, there was no indication from Portainer of the root cause of the image pull error. \nIf possible, I suggest adding a more specific error notification to Portainer to help diagnose issues like this.\n. ",
    "ryester27": "I have some more insight on this issue.\nWhen creating/recreating a container in Portainer, the NetworkMode parameter in the container's hostconfig.json file is always saved to use the container ID, instead of the name (e.g. \"NetworkMode\": \"container:543hde09....\" instead of \"NetworkMode\": \"container:vpn\"). If I manually edit the hostconfig.json file to use the name of the container instead, I can see the expected behavior the next time I attempt to edit the container in Portainer.\nThis also solves a separate issue I was having where I wasn't able to start/restart a container that used --net=container:vpn if that 'vpn' container was recreated prior. Probably due to the fact that the container ID doesn't exist anymore \nSo I guess the simple(?) solution to this is to make sure that the NetworkMode parameter always saves using the container name, instead of the ID.. ",
    "michaelbinks": "@deviantony seems you are right regarding the 'strangeness' of our issue. Our master node became unresponsive to docker commands overnight. We have just rebuilt the master, recreated the swarm and ran docker stack deploy against the example compose file. \nWorked first time!!! :+1: \nThanks for your efforts.. ",
    "amenasria": "Edit : In fact this issue occurs when moving upwards. It seems that a 'clear screen' function is missing when scrolling up the console.. ",
    "dgaikwad": "Still facing the same issue.. ",
    "EugeneKallis": "This has been happening to me too. ",
    "gokaygurcan": "/ping @deviantony . It's broken. I use portainer.example.com to access my portainer instance, and there, let's say I have a container that exposes port 3000. If I click that 3000 link on containers table, because of this default protocol above, it opens http://https//example.com:3000. \nLet me show it in a screenshot, maybe that makes sense then:\n\nIn this screenshot, I'm hovering 443 port of nginx container, and if you check the link on bottom left, you'll see it like http://http//portainer.gokaygurcan.com:443. This is also not correct and it's not coming from that nginx container's network settings, but I can live with that. My main problem is about the default protocol that causes duplicate http(s) in the url. \nI hope it makes more sense now. . Hi,\nSorry for cutting through your process. I submitted an issue with all the details and I hope it helps you to understand the problem and why I wanted to delete these http://s from URLs. \nBest,\nG.. Thank you. I'll be watching. . ",
    "rwos": "Hm, I'll try again with the latest release and report back.. @xAt0mZ okay, this is only broken for remote endpoints (exposing the docker API via tcp, not using portainer-agent here, so not sure if it works with that).\nWith a local endpoint everything works as expected (returns 404 and the message from your comment):\n$ docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock \\\n    portainer/portainer:1.20.1 --no-auth -H unix:///var/run/docker.sock\n$ curl -v localhost:9000/api/endpoints/1/docker/v1.25/networks/does_not_exist # this works\nWith a remote endpoint however (the endpoint setup will only work on docker-for-mac, but that's not the important point):\n```shell\n$ # simulate exposed docker api\n$ socat -d TCP-LISTEN:2376,range=127.0.0.1/32,reuseaddr,fork UNIX:/var/run/docker.sock\n$ # launch portainer and let it manage that endpoint\n$ docker run -p 9000:9000 \\\n    portainer/portainer:1.20.1 --no-auth -H tcp://host.docker.internal:2376\n$ curl -v localhost:9000/api/endpoints/1/docker/v1.25/networks/does_not_exist\n   Trying ::1...\n TCP_NODELAY set\n* Connected to localhost (::1) port 9000 (#0)\n\nGET /api/endpoints/1/docker/v1.25/networks/does_not_exist HTTP/1.1\nHost: localhost:9000\nUser-Agent: curl/7.54.0\nAccept: /\n< HTTP/1.1 502 Bad Gateway\n< X-Content-Type-Options: nosniff\n< X-Xss-Protection: 1; mode=block\n< Date: Tue, 12 Feb 2019 14:30:15 GMT\n< Content-Length: 0\n< \n* Connection #0 to host localhost left intact\n```\n. \n",
    "STaRDoGG": "@deviantony I'll go run through that link after this post, but at a glance the first thing I notice is he's written it for Docker for Windows, and I'm stuck using Docker Toolbox (DFW won't  run on my Win 10 machines; when Hyper-V is enabled I end up in a Windows boot loop).\nI just gave your command-line a test though and I get this:\ndocker run --name portainer --restart unless-stopped -p 9090:9000 -e TZ=America/Chicago -v /var/run/docker.sock:/var/run/docker.sock -v \"C:\\Users\\My Cloud\\AppData\\Roaming\\DockerConfigs\\Portainer\\Data\":/data portainer/portainer\ndocker: Error response from daemon: invalid mode: /data.\nNote that there's a space in the path at \"My Cloud\", so I have to wrap the entire path in quotes.. @NigelKitcher I could be wrong(?) but I think that is for Windows containers, and my Portainer is a Linux container.\n@ssbkang Unfortunately no luck. =/\nRunning from the regular command-line:\ndocker run --name portainer --restart unless-stopped -p 9090:9000 -e TZ=America/Chicago -v /var/run/docker.sock:/var/run/docker.sock -v \"C:/Users/My Cloud/AppData/Roaming/DockerConfigs/Portainer/Data:/data\" portainer/portainer:latest\ndocker: Error response from daemon: invalid mode: /data.\nand running from a bash prompt:\ndocker run --name portainer --restart unless-stopped -p 9090:9000 -e TZ=America/Chicago -v /var/run/docker.sock:/var/run/docker.sock -v \"C:/Users/My Cloud/AppData/Roaming/DockerConfigs /Portainer/Data:/data\" portainer/portainer:latest\nC:\\Program Files\\Docker Toolbox\\docker.exe: Error response from daemon: invalid mode: \\Program Files\\Git\\var\\run\\docker.sock.\n. Also a no-go: arrrrgh!\ndocker run --name portainer --restart unless-stopped -p 9090:9000 -e TZ=America/Chicago -it --mount src=\"%cd%\"\\DockerSock,dst=/var/run/docker.sock,type=volume --mount src=\"/c/Users/My Cloud/AppData/Roaming/DockerConfigs/Portainer/Data\",dst=/data,type=bind portainer/portainer\ndocker: Error response from daemon: create C:\\Users\\My Cloud\\AppData\\Roaming\\DockerConfigs\\Portainer\\DockerSock: \"C:\\\\Users\\\\My Cloud\\\\AppData\\\\Roaming\\\\DockerConfigs\\\\Portainer\\\\DockerSock\" includes invalid characters for a local volume name, only \"[a-zA-Z0-9][a-zA-Z0-9_.-]\" are allowed. If you intended to pass a host directory, use absolute path.. Thanks @deviantony , question though since I'm still pretty new to Docker; when you mount it solely as a volume, then the data is actually kept inside the VM itself rather than outside of it on the host, right? That's what I was hoping to avoid. I've had to destroy the default VM and recreate it several times already due to issues, and my concern is that if I always keep personalized data on the VM itself, if something happens to that VM, or I simply want to re-create it for any reason, all my data goes along with it. If I host the data on the actual host instead, it'll always be there no matter what happens to the VM itself. Am I correct in this, or do I have it wrong?. @deviantony Yep, you can map outside the VM with Toolbox. I've been doing it to several others successfully (i.e. Jackett, Ombi, Hydra, Organizr) and they work great. The host folders I use to store their data are all sub folders of the same folder (C:\\Users\\My Cloud\\AppData\\Roaming\\DockerConfigs) as well, so I'm thinking it might be a Portainer issue.\nThe only difference between Portainer and those is none of those use docker.sock; it kinda seems like that's throwing a wrench in the works here for some reason.\nIf you're bored and curious enough, perhaps you could run a Vagrant box with Windows 10 and Docker Toolbox on it, and give it a try?. ",
    "montanaflynn": "No problem, the logo is working for me now:\n\n. ",
    "einsqing": "I want to manage orders like this\ndocker run -p 6379:6379 --restart always --name redis -d redis. ",
    "dfraser": "\n\ndata is often unavailable in configuration and detail pages (endpoints, registries, logs, etc)\n\nDo you have a problem with all the views that are available under Portainer settings too ? E.g. endpoints, users, teams, etc...\n\nYes, frequently they fail to load, leaving a blank page, or a red error popup is presented.  I just got a \"Failure: Unable to retrieve extensions\" popup when viewing the Repositories page.\n. > > data is often unavailable in configuration and detail pages (endpoints, registries, logs, etc)\n\nDo you have a problem with all the views that are available under Portainer settings too ? E.g. endpoints, users, teams, etc...\n\nYes, frequently they fail to load, leaving a blank page, or a red error popup is presented.  I just got a \"Failure: Unable to retrieve extensions\" popup when viewing the Repositories page.\n. I've had a couple more like this... but nothing seemingly related to the UI errors.  Perhaps it's just my VM performance and the frontend is having trouble talking to the backend?\n2019/02/21 18:17:36 background schedule error (endpoint snapshot). Unable to create snapshot (endpoint=core3, URL=tcp://core3.....com:2375) (err=Cannot connect to the Docker daemon at tcp://core3.....com:2375. Is the docker daemon running?)\n2019/02/21 18:47:46 background schedule error (endpoint snapshot). Unable to create snapshot (endpoint=core2, URL=tcp://core2.....com:2375) (err=Cannot connect to the Docker daemon at tcp://core2.....com:2375. Is the docker daemon running?)\n. I've had a couple more like this... but nothing seemingly related to the UI errors.  Perhaps it's just my VM performance and the frontend is having trouble talking to the backend?\n2019/02/21 18:17:36 background schedule error (endpoint snapshot). Unable to create snapshot (endpoint=core3, URL=tcp://core3.....com:2375) (err=Cannot connect to the Docker daemon at tcp://core3.....com:2375. Is the docker daemon running?)\n2019/02/21 18:47:46 background schedule error (endpoint snapshot). Unable to create snapshot (endpoint=core2, URL=tcp://core2.....com:2375) (err=Cannot connect to the Docker daemon at tcp://core2.....com:2375. Is the docker daemon running?)\n. Timeouts seen on /api/endpoints/1/docker/networks, api/endpoints/1/docker/images/json?all=0, /api/endpoints/1/docker/containers/json?all=1 after about 10 seconds each.. Timeouts seen on /api/endpoints/1/docker/networks, api/endpoints/1/docker/images/json?all=0, /api/endpoints/1/docker/containers/json?all=1 after about 10 seconds each.. I moved portainer to a less loaded machine, and also found a half-configured volume plugin hanging around on one of my endpoint systems causing its docker volume ls command to take 30 seconds... removed that. \nAfter significant overall cleanup of my setup, portainer is now running smothly.\nThank you for your help!. I moved portainer to a less loaded machine, and also found a half-configured volume plugin hanging around on one of my endpoint systems causing its docker volume ls command to take 30 seconds... removed that. \nAfter significant overall cleanup of my setup, portainer is now running smothly.\nThank you for your help!. ",
    "Aphris-Karu": "Yes, all of my stacks were deployed via protainer other than portainer itself. I've been running it starting at 1.19.\nHere is the output of docker stack ls\n```\ndocker stack ls\nNAME                SERVICES            ORCHESTRATOR\nBOT-AI-Test         6                   Swarm\nGitlab              2                   Swarm\nLBMBots             9                   Swarm\nLidar               1                   Swarm\nStonerAi            5                   Swarm\nTest-DB-Stack       3                   Swarm\ndokuwiki            1                   Swarm\nmonitoring          5                   Swarm\nportainer           2                   Swarm\nradarr              1                   Swarm\nregistry            2                   Swarm\ntraefik             1                   Swarm\nweb-virt-cloud      1                   Swarm\nweb-virt-mgr        1                   Swarm\n```. Well I was running portainer/portainer so 1.19.2, I also ran 1.20.0 when it came out.\nI tried rolling back to 1.19.2 and while it fixed the login button I still can not see the stack or edit the stack yaml files. Same when I rolled it to 1.20.0.\nIs there a way to repair or recover the db? I really do not want to lose all those stack configs. . > @Aphris-Karu you might be able to inspect the database file using https://github.com/hasit/bolter or https://github.com/br0xen/boltbrowser to inspect the stack entries.\nIs there another option?\n```\n./boltbrowser -ro /mnt/portainer.db\npanic: runtime error: index out of range\n```\nI have tried several boltdb database tools and it appears the stack bucket is corrupted in some way as all the tools crash when I try to get them to show me the stack bucket. \nI have done some searching and am not seeing any tools to fix a broken boltdb. . Ok, turns out that portainer stores the stack configs as /data/compose/[##]/docker-compose.yml\nI shutdown portainer, moved the portainer.db to portainer.db.old, started portainer, and recreated all 14 of the stacks by copying each docker-compose.yml file information back into the stack on portainer.\nThe only thing not stored in those directories was the name of the stack.\nJust a thought: If portainer created a file in the directory with the name of the stack in it, then when portainer started with a clean DB if the data directories were there, it could scan the docker-compose.yml back into the database and name the stack. \nI dont know what caused the DB corruption but after re-installing all the stacks under 1.20.0 I upgraded to 1.20.1 and it did not recreate the problem. So I would think that the issue was not the upgrade.. ",
    "cyberlink1": "Anthony, \nI have wished I could do that as well. Though it is more so I can stage a production change before the outage window and then just select the services during the outage window and update them.\nThough the ability to designate a blue/green deployment would be another solution to the issue. . > @cyberlink1 how is it related to the ability to save a stack without deploying it? What prevents you from preparing the changes and using the \"Update the stack\" button during the outage window?\nMake the changes during the day at work, then shutdown the laptop and deploy the changes in the evening during the outage window. If you cant save it, it will not be there later.\nThough thinking about this and mulling it over I wonder if it would be better to be able to save to and pull the stack yaml from a repo like gitlab. At least that way there would be a way to back them up should you also have the issue in #2731 . ",
    "xme": "Confirmed working...\ndocker -H xxxxx:2375 ps\n. When running the container on the same host, it works... \nI'm lost :). Ok, problem solved!\nI took more time to deep dive and it was not a problem related to Portainer. It was a dump MTU issue (mismatch of MTU size between the Docker bridge used by Portainer and the VLAN interface used to connect to the remote Docker instance... Sorry for bugging you!. ",
    "rainmanhhh": "\nHi @rainmanhhh\nDo you mean the equivalent of using the --sysctl flag when using the Docker CLI ?\n\nyes.. ",
    "cbluth": "i am looking to do the same thing, more specifically this: docker run --rm --cap-add=NET_ADMIN --device=/dev/net/tun --sysctl net.ipv6.conf.all.disable_ipv6=0 -it ubuntu:18.04 bash. ",
    "NAVspecialist": "Yes I can reproceduce it too with same parameters.. Hello there\nI have tried without the --isolation process and then I can start Portainer without an error. But but when I try to connect to an endpoint (Local) then I get the error:\n\"Failure -Endpoint is unreachable and there is no snapshot available for offline browsing.\"\nI tried to change the \\.\\pipe\\docker_engine:\\.\\pipe\\docker_engine (backslash to forwardslash) but that made no difference. \nIn 1.20.1 - //./pipe/docker_engine://./pipe/docker_engine works quite fine also with --isolation process. ",
    "ajkauffmann": "I'm running by default in isolation process mode, so removing the option doesn't do much I guess.\nPulled the latest image (created 2019-03-08 02:20:41) and created the container. No error message during container creation, but it won't work after all.\nDocker logs gives me this error log:\n```\ndocker : 2019/03/08 16:24:09 open C:\\data/portainer.db: Access is denied.\nAt line:1 char:1\n+ docker logs portainer\n+ ~~~~~~~~~~~~~~~~~~~~~\n    + CategoryInfo          : NotSpecified: (2019/03/08 16:2...cess is denied.:String) [], RemoteException\n    + FullyQualifiedErrorId : NativeCommandError\n2019/03/08 16:24:10 open C:\\data/portainer.db: Access is denied.\n2019/03/08 16:24:11 open C:\\data/portainer.db: Access is denied.\n2019/03/08 16:24:12 open C:\\data/portainer.db: Access is denied.\n```\nThis was with volume -v C:\\ProgramData\\Portainer:C:\\Data\nWhen create the container without this volume, I get this output from the logs:\n```\ndocker : 2019/03/08 16:18:08 mkdir C:\\data/tls: Access is denied.\nAt line:1 char:1\n+ docker logs portainer\n+ ~~~~~~~~~~~~~~~~~~~~~\n    + CategoryInfo          : NotSpecified: (2019/03/08 16:1...cess is denied.:String) [], RemoteException\n    + FullyQualifiedErrorId : NativeCommandError\n2019/03/08 16:18:09 mkdir C:\\data/tls: Access is denied.\n2019/03/08 16:18:10 mkdir C:\\data/tls: Access is denied.\n2019/03/08 16:18:11 mkdir C:\\data/tls: Access is denied.\n2019/03/08 16:18:13 mkdir C:\\data/tls: Access is denied.\n```\nReverting back to version 1.20.1 and everything is normal again.. @ssbkang Tested and confirmed, it works with the latest image. Thanks for great work, much appreciated!. ",
    "Inglebard": "Thanks for the answer.\nDidn't notice this other issue.\n\nIts worth noting that the \"--link\" option is being depreciated by Docker and will be eventually removed.\n\nYeah, but how am i suppose to know what the portainer GUI does in background to create the container ?\nI don't know if network \"container\" use \"link\" option.\nI will try runlike.\n. ",
    "DenseComet": "Shoot yeah! \nHow do I change it? close the request and try again?\n. ",
    "chanwit": "Not sure if \"shared\" should be changed to \"Swarm-scope\"?\n\"When using Swarm, we recommend deploying containers in a Swarm-scope network. Looks like you don't have any Swarm-scope network, head over the networks view to create one.\". That's cool, Anthony !!. ",
    "a-roussos": "I agree with you about using clearer patterns :+1:. The ternary operator's condition should probably be stackCount === 1. I think we'll probably need to preserve the {{ $ctrl.model.Snapshots[0].StackCount }} bit before the noun in order to print the number of stacks. Also, the ternary operator's condition should perhaps be $ctrl.model.Snapshots[0].StackCount === 1? Sorry if I'm being pedantic! :wink:. "
}