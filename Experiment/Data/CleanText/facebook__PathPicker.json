{
    "pcottle": "(closing for now but have it on record)\n. Awesome! Do you think its worth adding to the usage bar as well? Bit worried about space....\n. > For now I think it's okay to leave it undocumented, people who got used to less/vi style g/G will be pleasantly surprised :)\nYeah I agree -- hopefully we don't go too far down the vim emulation rabbit hole\n. Yeah this is unfortunately an issue with git's output when it (thinks) there is not much space on the terminal. It truncates the path to .../ (notice the three dots) which basically blasts away all information about the path.\n@jingc ran into this as well, not sure what we can do here\n. Yeah I checked the man pages, --numstat should not abbreviate the path names;\n--numstat\n           Similar to --stat, but shows number of added and deleted lines in decimal notation and pathname without abbreviation, to make it\n           more machine friendly. For binary files, outputs two - instead of saying 0 0.\nClosing out since we can't do much here besides suggest --numstat if we detect a .../ pathname, and I'd be worried about that being noisy. Do you think that's worth adding?\n. Yeah lets at least do the readme thing. I'll see what I can do in the meantime though, since it is pretty confusing. ideally we actually output an error...\n. getting there...\n\n. \n\n^^ alright that should be a huge improvement\n. What version of python are you running? python --version. It's likely a Python 3.0 compatibility issue\n. PR #15 helped this a bit as well in the meantime -- @dannguyen @vimeitor have either of you tried that yet?\nLet me see what the python 2to3 converter says...\n. Hrm, this wouldn't work for a lot of mac setups that don't have the python2 command (since python 2.7 is the default) so this can't go in as-is\nDo we want to instead handle this in Issue #4? If we support both 3 and 2, we could get the best of both worlds.\n. Yeah lets move this into #83. We can likely put the filesystem logic as an experimental flag which should mitigate any performance issues we might encounter. I do think it's the right future of the project though, since then we can match on all sorts of things and eliminate a ton of false positives\n. :tada: :tada: :tada: Nice! Didn't realize curses had this, thanks for the sweet pull!\n. definitely down for this line:\n+BASEDIR=$(cd \"$BASEDIR\" && pwd)\nhowever i remember having to append the slashes since the brew installation has multiple hops. Let me get some command line output\n. [pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ git diff HEAD~10 --stat | fpp\nWHEREAMI is /usr/local/bin/../Cellar/fpp/0.5.3/bin/fpp\nWHEREAMI is /usr/local/bin/../Cellar/fpp/0.5.3/bin/../libexec/fpp\nnothing to do!\nYeah, see the tricky thing is that homebrew installs relative symbolic links, so switching to your first change unfortunately breaks:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ git diff HEAD~10 --stat | fpp\nWHEREAMI is ../Cellar/fpp/0.5.3/bin/fpp\n/usr/local/bin/fpp: line 19: cd: ../Cellar/fpp/0.5.3/bin: No such file or directory\npython: can't open file '/src/processInput.py': [Errno 2] No such file or directory\npython: can't open file '/src/choose.py': [Errno 2] No such file or directory\nnothing to do!\n. Do you mind updating with just the BASEDIR=$(cd \"$BASEDIR\" && pwd) change? ill happily accept that! that was just my shortsightedness / bash inexperience\n. @n06 I actually think this got solved in #16 since we have better symbolic link resolution everywhere. do you mind checking if that works for you? closing out in the meantime since this is on a stale rev\n. Oh this should be easy, justasec\n. [pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ ls -l ~/Library/LaunchAgents/*.plist | sed -e 's#/Users/pcottle/#~/#g'\n-rw-r--r--  1 pcottle  THEFACEBOOK\\Domain Users   697 May  6 09:10 ~/Library/LaunchAgents/com.adobe.AAM.Updater-1.0.plist\n-rw-r--r--  1 pcottle  THEFACEBOOK\\Domain Users  1009 Apr 11 14:42 ~/Library/LaunchAgents/com.github.facebook.watchman.plist\n-rw-r--r--@ 1 pcottle  THEFACEBOOK\\Domain Users   534 May  3 14:48 ~/Library/LaunchAgents/com.spotify.webhelper.plist\n-rw-r--r--  1 pcottle  THEFACEBOOK\\Domain Users   819 May  5 18:20 ~/Library/LaunchAgents/com.valvesoftware.steamclean.plist\n-rw-r--r--  1 pcottle  THEFACEBOOK\\Domain Users   677 Dec  1  2013 ~/Library/LaunchAgents/org.virtualbox.vboxwebsrv.plist\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ ls -l ~/Library/LaunchAgents/*.plist | sed -e 's#/Users/pcottle/#~/#g' | ../fpp\nthat should all work! lemme know if you have any issues -- im hoping to release a 0.5.6 tonight :tada: \n. Thanks for reducing the CSS specificity -- thats a habit I have from Facebook where our CSS can be downloaded in any order (so same-specificity rules are a recipe for bugs). Ours are deterministic though\nCan you point out where you are seeing the extra spacing? Or what browser you are using? I don't see any differences on chrome...\n\n\n. Ah I see -- this is a bit more semantically correct so sure I'll pull! Let me resolve the merge conflict I just introduced\n. Do you think the default selection colors of red / blue will look OK when using whatever terminal colors we have? it'd be cool if we could infer those somehow\nI agree this is a big step forward though when using the default colors though, otherwise its super visually jarring. Glad we already hired you @frantic haha\n\n:tada: :fireworks: \n. awesome!  however im still getting an error output when running this locally -- think you need to merge error stdout to devnull as well\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ ./fpp \n./fpp: line 27: type: python2: not found\n. Think it works best as:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ if type asd &> /dev/null; then echo \"git exists\"; fi\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ if type git &> /dev/null; then echo \"git exists\"; fi\ngit exists\n. Alright all good, thanks for adding linux support while maintaining our mac support!\n. :see_no_evil: it amazes me how hard resolving symlinks is. I tried a few variants of this until I landed on something that would work for both relative symlinks, absolute symlinks, multiple hops, etc etc.\nA little concerned about our zsh users, since it doesnt seem to be equivalent:\nhttp://stackoverflow.com/questions/9901210/bash-source0-equivalent-in-zsh\nWhile we look for a way to use either, let me pull this down and try\n. Yeah this seems to work for all my tests locally. this is what I could find on the difference between BASH_SOURCE and $0:\n\nconvention is that argv[0] is the name of the script, but it\u2019s not necessarily. you can easily change $0 of a script by calling it with execv or something differently. in fact, the way busybox works is it\u2019s this massive single binary that chooses its behavior based on what argv[0] is.\n\nfrom:\nhttp://www.mbeckler.org/blog/?p=152\nSo Lets go with $0 so we keep zsh compatibility\n. Yeah I have been meaning to get around to this -- totally can as well. a few questions for you @vitaut:\n- is the current user always guaranteed to have write capabilities into $HOME/.local/share? one of the nice things about the home directory is not having to worry about user permissions\n- is it guaranteed to exist? or will we have to mkdir -p beforehand?\nI'd love to resolve this though, and it shouldnt be hard since these are all constants in the code\n. yeah they are all temporary -- the only one that persists between sessions is the selection pickle and if thats gone its nbd.\nsame question -- is /tmp always guaranteed to be writeable? or on average more guaranteed to be writeable and exist compared to a home dir?\n. Alright -- this is coming tomorrow!\nwe'll be sharing the same pickle selection across users on the same machine, so maybe we should prepend by the username? pwd.getpwuid(os.getuid()).pw_name\n. Fixed by #77 !\n. Yeah I would be fine with that -- would accept the PR as long as it has a sane default and some basic test coverage (and would be in the help output). We have a number of env variables right now but so far its manageable\n. Hey @sandyarmstrong \nI can't seem to reproduce this -- we definitely allow multiple periods in the filename:\n\n\nCan you perhaps provide some example input or a solid repro?\nNote that we have separate regex for files that dont have a directory prepended to them (aka stuff like echo.py):\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L30\nbut we have to be a lot more restrictive with that regex since we dont want to match JS code like:\ndata.object.some.field\n(closing for now, reopen if you have the repro). a lot of this pain would go away if we simply checked if the file exists...\n. Thanks for the PR @wasade ! Some of this was a bit stale and got cleaned up by pep8 but I merged it in 2d327a4f382a52667b064306b9c8b7db0759a26d\n. Hrm, not sure why it's not giving you credit for the pull :-/ closing out in the meantime, let me know if you want a vanity change so we can make you an official contributor :tada: \n. Can you show the output of your git status command @hobzcalvin ? I believe this might be due to git doing abbreviated file paths which I fixed in #18 (well, at least warned against)\n. Weirdddd since we parse the top level directory for both git and mercurial here:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L38-L66\n@hobzcalvin I can't repro myself -- can you output the result of:\n- git --version\n- git rev-parse --show-toplevel when inside myrepo/inside\n- git rev-parse --show-toplevel when inside of myrepo\n? im wondering if our top level dir parsing is not correct\n. Gah yeah, this is an issue specific to git status. Heres the relevant block from the manpage:\n\nThe paths mentioned in the output, unlike many other Git commands, are made relative to the current directory if you are working in a subdirectory (this is on purpose, to help cutting and pasting). See the status.relativePaths config option below.\n\nEmphasis mine. :cry: :sob: You can of course turn this off but who will do that:\n\nIf the config variable status.relativePaths is set to false, then all paths shown are relative to the repository root, not to the current directory.\n\nWhereas of course git diff (and a bunch of other git commands) are made relative to the top level tree:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ git diff HEAD~2 --stat\n src/colorPrinter.py  |  2 +-\n src/parse.py         | 16 ++++++++--------\n src/processInput.py  |  1 +\n src/screenControl.py |  1 -\n src/test.py          | 10 +++++-----\n 5 files changed, 15 insertions(+), 15 deletions(-)\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ cd src/\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ git diff HEAD~2 --stat\n src/colorPrinter.py  |  2 +-\n src/parse.py         | 16 ++++++++--------\n src/processInput.py  |  1 +\n src/screenControl.py |  1 -\n src/test.py          | 10 +++++-----\n 5 files changed, 15 insertions(+), 15 deletions(-)\nI feel like we have two options:\n1. Dangerously introspect into the format of the piped input and detect if its a git status command, and then totally rework our logic. not ideal\n2. use filesystem validation to check for top-level git directory path prepending and, if that fails, switch to ./ and check again.\nI'll take a crack at 2. later today, since we need to move in that direction regardless\n. > What if you prepended a sequence of \"../\" until you had a file match and displayed only paths whose existence was confirmed?\nhrm, id rather check either the git level top dir or just the current dir, since going up forever seems a bit cargo-cultish (like killing a fly with a sledgehammer). this is next on my plate though after this release\n. This is fixed in #114!!\n. Totally correct @callumlocke! My bad, trying to keep up with all the incoming issues / PR's. Thanks! should be reflected on the site now\n. @sairion the symbolic link jazz might have been fixed by #16, can you try that? I'm not sure if this is required after pulling in that updated.\n@aledista my main concern for this is that the installation instructions would break if you cloned the repo as a different name. I do obviously list the cd command right after the clone, but in general this seems unnecessary since the symlink resolution should be able to handle the source being right there.\nGoing to close this one out since I think #16 fixes this, but let me know if after that it's still an issue!\n. @ninegene is this because of the differences in readlink? i'd actually rather introspect into the readlink -f option if thats possible rather than look at the operating system name\nAlso we just pulled #16 from the excellent @frantic, do you mind seeing if that resolves your situation? that should fix all the symlink resolution woes (I think this is on a stale rev).\nThanks a ton for the PR though! Closing out unless #16 doesnt fix your situation, then we can re-open\n. Awesome! thanks a bunch -- I used Google's yapf:\nhttps://github.com/google/yapf\nto get the original bulk of formatting down, but I agree with these changes so might as well be pep8 compliant!\n@aledista is there any way to easily test if all files are pep8 compliant? id be nice to make this part of the build step\n. I found https://github.com/jcrocholl/pep8/ hehe. I added a simple build script just so this doesnt regress (and neither do the tests) -- thanks for the help again!\n. Lets merge this into #83, since we'll have to go to the filesystem to validate build this\n. :tada: :fireworks: thanks! too easy :)\n. Stack overflow to the rescue:\nhttp://stackoverflow.com/questions/1112343/how-do-i-capture-sigint-in-python\nhaha :D that should fix the stacktrace spew, thanks @jdunk ! this was annoying me too, glad you filed. :tada: \n. Hey @ddaza,\nYou should find some linux instructions in the projects README:\n\nHowever if you're on a system without Homebrew, it's still quite easy to install PathPicker since it's essentially just a bash script that calls some Python. These steps more-or-less outline the process:\n\nhttps://github.com/facebook/PathPicker\nWe recently added linux support with the python2 command detection (not part of the public release yet) and are working on a linuxbrew recipe as well.\n. Thanks for the file @davidgorges ! I just pushed a fix now with some test coverage, this will make it into the next release :tada:\n. Yeah @SeanA208  we actually dont get any of the aliases that are already loaded in the shell script since we execute in another shell environment :_( So for bash we have to _manually* expand the aliases:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L55\nHowever no reason why we can't make a fallback...\n. Alright this is a bit hacky but e0604190d46c03b61869607fc2cc1b725b72a800 should work. Can you try that? I don't have zsh installed unfortunately :-/\n(obviously this isnt reflected in prod so youll have to make those changes manually to your brew installation)\nthanks @SeanA208 for the report!\n. @lsmag can you see if #16 fixes this for you?\n. I think since we added the if [[ $SOURCE == /* ]]; then in #16 then this will work for both relative and absolute symlinks -- so I'm going to call this closed! @lsmag can you try pulling down 16 and then trying?\n. @lsmag what does pacman do besides unpack the tar? does it handle symlinking and sha checks and such?\n. lets track this in #43 \n. We do load up the bashrc and check for aliases:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L109\nIs something else not working? What format are you aliases in?\n(closing for now, open up again if you have a solid repro)\n. >  I have source $HOME/.bash_aliases in my .bashrc and in .bash_aliases I have alias g=\"git \"\nyeah unfortunately we don't do recursive follows / sources :*( do either of you know if we could get bash to either:\n- give us the expanded format of a given alias\n  or even\n- give us the entire concat of the bashrc file\n  ?\nlet me try this inside the command script instead...\n. @shaneharter alias does not work inside shell scripts:\n[pcottle:~/Desktop:]$ alias | wc -l\n      54\n[pcottle:~/Desktop:]$ echo \"alias; echo 'alias is'; alias | wc -l\" > ./test.sh \n[pcottle:~/Desktop:]$ sh ./test.sh\nalias is\n       0\nunless you run with some weird mode, but that doesnt work for zsh\n. I somewhat have this issue as well, but I have a global flag to toggle it off. Basically I automatically ssh to my devserver at facebook unless I set a \"local mode\" flag\nWhat does yours do? We could add (yet another) environment variable for this but I'm curious what the use case is.\n. Haha, maybe  I should do something similar. Terminal startups should be more fun!\nFrom: Addison Bean notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Wednesday, June 1, 2016 at 3:59 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, Mention mention@noreply.github.com\u0002amp\u0003#109;\u0002amp\u0003#101;\u0002amp\u0003#110;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] BashRC (#34)\nOh yeah that's smart, thanks. Haha I just have this line in my .zshrc: fortune | cowsay | lolcat So I get a random fortune every time I start a new shell.\n\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/issues/34#issuecomment-223150007, or mute the threadhttps://github.com/notifications/unsubscribe/ABFRn2hnIoZp3_zf_fiK0W585Q4VqYUDks5qHg7pgaJpZM4ETK3G.\n. :tada: my thanks good sir!\n. Wow I can repro! Let me try to debug this...\n. Thanks for the file @jpeirce ! Just pushed a fix, will make it into the next release for sure.\nThis was happening because:\n- Your input had valid matches, but....\n- The matches were WAY down the list, more lines than the curses UI had available in the Y axis\nSo when the program started up with a scroll offset of 0, it crashed since it was trying to move the cursor to the first match (aka off the page). so just a quick update was needed before we move the cursor :tada: \nthanks a bunch! (note that it wont work with files that have spaces, so unfortunately most of our output will not match)\n. We are hopefully going to get synced to:\nhttps://github.com/Homebrew/linuxbrew\nSoon! So that will be the main way. The alternative is to install manually with the options listed in the README:\nhttps://github.com/facebook/PathPicker/blob/master/README.md\n. dont you need to pull in print from future?\nfrom __future__ import print\ndont want to drop 2.6+ support. but then we could support both!\nhttp://python3porting.com/noconv.html\nwould you like me to add it @zkanda ? or are you ok with the rebsae?\n. Sweet thanks for the rebase! Im getting one small error still though:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ git diff HEAD~10 | ./fpp\nTraceback (most recent call last):\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/processInput.py\", line 145, in <module>\n    doProgram()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/processInput.py\", line 123, in doProgram\n    pickle.dump(lineObjs, open(filePath, 'w'))\nTypeError: must be str, not bytes\nTraceback (most recent call last):\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 58, in <module>\n    curses.wrapper(doProgram)\n  File \"/usr/local/Cellar/python3/3.4.3/Frameworks/Python.framework/Versions/3.4/lib/python3.4/curses/__init__.py\", line 94, in wrapper\n    return func(stdscr, *args, **kwds)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 27, in doProgram\n    lineObjs = getLineObjs()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 34, in getLineObjs\n    lineObjs = pickle.load(open(filePath))\nTypeError: 'str' does not support the buffer interface\nalthough the tests past just fine with python3. it seems to be related to the pickle module -- do you know what differences there might be?\nOnce we get that solved I can run some more tests and then merge this! would be great to support both python3 and python2\n. Actually lets merge this for now since it doesnt break 2.6+ support, and pursue the pickle issue in parallel\n. Wow this is awesome!! :heart_eyes: The integration inside of the scrollbar is especially slick, and someone even asked for this internally at FB\nDo you mind rebasing on top of the recent changes? It's probably just the scrollbar bug I fixed earlier today\n. alright cool! i think ill merge this next. curious about your thoughts on:\n\nwhat do you think about making the X mode selectors only appear next to lines that are actual matches?\n\ni think that'll be a better experience\n. > It would also look like the matrix as you scroll.\nand thats a bad thing? lol jk\n\nI think this would be better solved with color - for example, green for actionable, or perhaps just greying out the unactionable.\n\nhrm yeah thats definitely something we could think about. ok cool, i'd be happy to merge this once nits are addressed (if you dont mind, or i can take a crack later this week)\n. Sweet! Looking forward to it. And yeah with the nice color code, adding decorators to this should be easy\n. Aight this is a bit out of date so I'm closing out the PR but would definitely be down to see a rebase of this!\n. > do I have to open another pull request? The changes to my fork aren't showing up here.\nYeah youll probably have to open up a new PR compared from the tip of your fork to master. I would make sure you're rebased on the latest version of master though -- try setting up your repo to fetch from mine as upstream and merge upstream/master\n. more info here:\nhttps://help.github.com/articles/syncing-a-fork/\n. I think it'd be pretty difficult to support fish, since just the differences between zsh and bash are already enough to give me headaches :P fish looks great though!\n. Thanks @davidcox143 ! Yep this must have been a duplicate\n. Yeah this would be sweet, ill have to ask around internally since i have no idea how to build / release a linux package. @Daniel15 let me know if you have any names in mind for people we can bug :)\n. Oh thanks for the tip @lsmag . I'd be fine with pointing towards fpp-git in AUR since we won't have to worry about updating the release (downside is that it'll run a less stable version of the code, aka master)\nAnyone have any objections to pointing to fpp-git? Or should we do that + pacaur?\nAlso thanks @jwatzman for the comment! Will ping you if we don't get any community contributions that work. I do agree that this is much easier than building hhvm releases\n. Alright now we are at least pointing to fpp-git, and non-Arch peeps can install manually. Closing out since I don't think maintaining our own distribution packages is going to be super sustainable (at least until we get some internal volunteers).\nIf anyone wants to attach the command line inputs to pull down / install that package, shoot em over! I can at least inline those instructions\n. @lsmag lemme know if you have the above^^\n. sure @Daniel15 -- hope people notice the \"help wanted\" label in bold\n. Sure @pallavagarwal07  -- could you try whipping up a list of the install commands for the different package managers that use the package we link to above? and make sure it works on debian / arch / fedora\nFor instance, we have the homebrew install command as :\nbrew update; brew install fpp; fpp\nIt'd be nice if we could point to something similar like:\npacaur -S fpp; fpp # for pacaur\narch apt-get fpp; fpp # for whatever works for arch\n. My only worry about Debian packages is that our team wouldn't know how to build / update / maintain them. Could you add to the scripts/makeDist.sh with the commands necessary? That way we can update it along with homebrew and keep everyone up to date\n. Yeah sure @pallavagarwal07 --\n1) Owner name: Peter Cottle\n2) Owner email: pcottle@fb.com\n. Hrm, the output of fpp --help is basically what I would describe as our man page. could we use that automatically somehow? maybe do it as part of the script?\n. > I think man pages are supposed to follow a very strict format.\nah well in that case, lets not bother. we can move this discussion to the PR!\n. glad you like the tool @20after4 ! As discussed in #69, we probably dont be going back towards a unixy mode of just outputting lines, but fzf would be a great tool to look at!\nI'll followup with how to do this in a local PR in #69\n. :tada: :heart_eyes:  thanks!\n. > I have no idea where the www/ is coming from\nYeah, we throw in the random www/ since thats the fallback for the facebook dev environment. its a giant hack though and super vestigial, so it should be removed regardless.\nQuestion for you @Haraldson / @Ramblurr  -- are you guys working in folders with version control? We should parse the top-level directory from version control and use that for the prepend:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L38-L66\nin the meantime ill fallback to ./\n. I guess the weird thing is that we will output paths with ./ but they are still valid:\n[pcottle:~/Dropbox (Facebook):]$ cat ./wip/./../wip/PathPicker/././src/choose.py  | wc -l\n      85\n@Haraldson / @Ramblurr its important to note though that the input you guys listed above is lacking some context on where the actual path is. with this change we'll assume ./system-images/android-21/google_apis/x86_64/NOTICE.txt is a valid file, but for commands like git grep thats not always valid\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. > More than 3 files in a vertical split in vim is of little/no use for most people and buffers are more easily navigable.\nI actually disagree -- with setting min col width (set winwidth=85) it can be quite manageable to have a bunch of splits but view the current one with >80 cols. I would try it out!\nWhat I don't like about buffers is that its not visually clear from the get-go that you've actually opened all the files, and a lot of people do :qa instead of :n so they dont even see the other files.\nWhat about splitting files into tabs instead? or throw up a warning?\nI actually think we should have some kind of user preferences file to store things like this is maybe the best bet\n. Closing for now, curious what you guys think about the tabs option. Or setting this as a user preference flag\n. @jacobk does using FPP_EDITOR solve your use case? or would you like us to check $VISUAL first?\n. :tada: \n. Alright I heard back about my approach in #59 so lets go with that! My only worry is that we source the entire .bashrc which might have side-effects. I actually use my bashrc to log onto my development server for facebook (automatically) so its kind of an aggressive script to source, but hopefully my situation is not super common.\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ git show --stat | ./fpp\ngetting input\nexecuting command:\nga  '/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/output.py'\n(ga is aliased to git add for me)\nshould work 100% for bash, and hoping zsh is the same way. can anyone test? \n. @langtianlang youll have to install from master, since 0d12fef0bcfd3e2c4ac2e4e72af7f35041931c7e is not in fpp 0.5.6:\n```\nexcerpt from 0.5.6's output.py\ndef getAliases():\n    try:\n        lines = open(os.path.expanduser(BASH_RC), 'r').readlines()\n    except IOError:\n```\neither follow the manual install instructions in the README or wait till tonight when I submit the new release :)\n. Thanks a bunch! The # etc comment is definitely an improvement\nsometimes the ~10 shows a more interesting output than just ~1, but i guess we are being quite assumptive about the history of your repo (assuming it has more than 9 commits). so im ok with that update -- not a huge leap forward but hopefully our ascii demos do enough talking for us\n. Very cool! This is a pretty beefy diff so it will take a while to look over, but just some high level comments:\n- how does this work on light terminal themes or terminals with different default colors? we just added support for using default colors so I want to make sure this looks ok\n- this basically just respects the color formatting of the input right, not adds any custom coloring? im wondering if theres an easier way to translate terminal color codes to ncurses color codes...\n. > Did someone just add use_default_colors()?\nyep! it was @frantic, great addition imo\n\nand i was hella surprised that there wasn't something already out there to do this... I searched but couldn't find anything except a super old post in a google group about it.\n\nah ok, that's too bad. yeah i dont think curses UIs in python are thattttt common to begin with.\nWe should be concerned with performance though, since with super long inputs I have actually noticed pathpicker starting to slow down / chug during the parsing and scrolling steps. I did some performance work earlier but want to make sure we dont ship any big regressions\n. >  I would like to see unit tests and I would write them. Do you have strong preferences on testing infra on python? As I don't usually write python I have none.\nyeah unfortunately we only have unit testing on the file parsing / regexing / prepending part :-/ I've googled a fair amount and haven't seen anything on how to possibly test curses-based UIs. I would even be down for just a generated file of expected vs actual output but even that's hard to produce I believe.\nIf you find anything on this let me know -- would be big improvement to the manual UI testing we have to do today\n. alright I cruised through and left some comments, very exciting! its super cool to see the color show up and makes the current version of fpp seem super basic (that it doesnt have color support). now if only git diff would always include color when piping to our program...\ndo you mind addressing the nits? most of it is just comments or class constants to explain some of the more confusing parts\n. > You can also set it to always to ignore the difference between terminals and pipes. You\u2019ll rarely want this; in most scenarios,\nah interesting!\n\nI will just update the code w/ your comments and rebase\n\nsweet, looking forward to it :blush:\n. :tada: \n. Alright thanks a bunch @lastquestion! It's pretty badass to have the color show up in fpp :D also glad you split the color printing out into a new class and kept the logic fairly self contained. this will make it in the next release for sure (maybe EOW)\n. @lastquestion i'll be part of the travis CI run shortly!\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. :tada: thanks for the test coverage! let me solve the merge conflict\n. Unfortunately now that we're a homebrew recipe, we can't submit to PyPI:\nhttps://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/Acceptable-Formulae.md\nAlso I'm hesitant to switch to PyPI since we might want to use other languages some day (curses UI written in react? yes pleaseeee), but thanks for your interest in the project!\n. :tada: thanks! mind if i add some test coverage for this?\n. Maybe we should add this to USAGE as well? i figure it should output during fpp --help as well as in the readme\nactually what do you think about putting it in only --help? Might be a better place for it anyways\n. Yeah going to move this into the --help output and maybe lower in the README :P\n. ```\n== Configuration == \nPathPicker offers a bit of configuration currently with more to come\nin the future.\n~ Editor ~\nThe $FPP_EDITOR environment variable can be set to tell PathPicker\nwhich editor to open the selected files with. If that variable\nis not set, $EDITOR is used the next fallback, with \"vim\" as a last resort.\nThat's a fairly in-depth overview of Facebook PathPicker.\nWe also provide help along the way as you\nuse the app, so don't worry and jump on in!\n\n``\n. @shaneharter I don't see that file having any of my aliases defined in my.bashrc`:\n```\n[pcottle:~:]$ cat /usr/bin/alias \n!/bin/sh\n$FreeBSD: src/usr.bin/alias/generic.sh,v 1.2 2005/10/24 22:32:19 cperciva Exp $\nThis file is in the public domain.\nbuiltin echo ${0##*/} | tr \\[:upper:] \\[:lower:] ${1+\"$@\"}\n[pcottle:~:]$ type -a go\ngo is aliased to `git checkout'\n```\nI think most people load their aliases through a bashrc/zshrc, so that might not work super well?\n. @frantic My crack at this is over in 0ae54808846d058f2e89a08501dab61a628f1434. Basically it adds the expand aliases option before sourcing (conditionally) a list of files. Output looks like:\nshopt -s expand_aliases\nif [ -f ~/.zshrc ]; then\n  source ~/.zshrc\nfi\nif [ -f ~/.bashrc ]; then\n  source ~/.bashrc\nfi\nif [ -f ~/.bash_profile ]; then\n  source ~/.bash_profile\nfi\nif [ -f ~/.bash_aliases ]; then\n  source ~/.bash_aliases\nfi\necho \"executing command:\"\necho \"go  './banana.py'\"\ngo  './banana.py'\nWorks well for bash and you get real sourcing. Looks like the zsh equivalent is:\nhttp://stackoverflow.com/questions/23258413/expand-aliases-in-non-interactive-shells\nsetopt aliases ?\nWhat do you guys think about doing that? Seems less hacky that introspecting the process ID\n(btdubs I guess I shouldn't pollute the repos paths right? ill try to do PR's in the future)\n. @frantic now that this is merged can you try in zsh land? I think we will need to guard the setop and shopt commands behind some kind if statement (or just output their error to dev null)\n. Ah yeah this wasn't pulled into 0.5.5. We added a few other bug fixes and python 3.0 support, so yeah lets add another release!\n. https://github.com/facebook/PathPicker/releases/tag/0.5.6\nhttps://github.com/Homebrew/homebrew/pull/39616\n:tada: \n. (closing for now, assuming PR is merged. if you guys want you can follow the manual install instructions and get unblocked ASAP since it'll be past frantics fix)\n. Thanks for the PR @davvid ! Curious about the workflow here -- the only tricky thing is now the execution of the shell script is split between python and the bash script (since now we have the os.system('sh ~/.fbPager.sh; rm -f ~/.fbPager.sh') so it complicates things like #59 where we need to decorate the bash script with a few headers\nAlso does this work for editing files? We would need to connect to dev/tty in that case right?\nI almost wonder if we could implement this instead as pure bash, something like\n```\n$PYTHONCMD \"$BASEDIR/src/processInput.py\"\nfunction runChooser {\n  exec 0<&-\n  chose.py // etc\n  sh ~/.fbPager.sh < /dev/tty\n}\nif $1 == '--keep-open'; then\n  while [true]:\n    runProgram()\nelse\n  runProgram()\nfi\n```\nsince we save the pickled selection and the files, this should give almost the exact same behavior without introducing the code complexity. what do you think?\n. > If no one beats me to it then I'll try to rework it with your suggestions in mind. Thanks for the review\nno problem @davvid, thanks for the interest in the project! After seeing how many changes have (recently) gone into the python stack and how many are planned (like moving the location of the pickled files), it'd be nice to keep that as simple as possible.\n. (lemme know if you cant get around to the refactor and I can take a stab and close out this PR)\n. yeah sure lemme take a stab at this\n. Boom!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp -ko\nUsing old result...\nnothing to do!\nUsing old result...\nnothing to do!\nUsing old result...\nnothing to do!\nUsing old result...\nexecuting command:\ncat '/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/scripts/buildAndTest.sh' '/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/format.py' | wc -l\n     199\nUsing old result...\n2 files to edit\nUsing old result...\nnothing to do!\nUsing old result...\nthrough the magic of stack overflow and ridiculous bash programming we have this down :tada: :tada: \n. Wow this is huge @dduong42 ! I don't write much python at all so a lot of the code is nowhere near pythonic (as you can probably tell)\nBefore I take a closer look at this, the function decorators are supported the same in python 3.0 right? We are close to getting python 3.0 support so don't want to regressin that sense\n. Yeah do you mind breaking this up into multiple PR's? Maybe on per file or class. We have a ton of incoming PR's so I think that'll be easier on everyone, since this will continue to get rebased on top of and go stale\nall about more succinct python though :heart_eyes: \n. (Closing for now, lets move to multiple PR's)\n. Sorry for the ~/www fallback, that is vestigial and only relevant for facebook dev environments.\nwe only do a hail-mary fallback punt if you are working outside of a git or mercurial repo, since we parse the top-level path here:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L38-L69\nso this shouldn't be superrrrr common, but i guess it's clearly happening.\nAnyways this is resolved by e302f16118e0a9bbd38b202e1d892a68b30f227c, update your version manually or wait for the next release to fix this! thanks all for the report\n. Ah my bad @Daniel15 !! @sahrens pointed this out in a comment thread and i immediately committed it without checking PR's, so I got to this before you :cry: definitely want to get another FB contributor though so try to find something else! maybe the sudo app-get support?\n. From looking around the web, it looks like curses cant determine if modifier keys are set:\nhttp://stackoverflow.com/questions/4684739/how-to-get-shiftx-altx-keys-in-curses/9775675#9775675\nhttp://stackoverflow.com/questions/9061111/ncurses-with-arrow-keys-plus-modifiers\nSince they aren't event sent to the terminal :-/ otherwise id love to add this and add other support for all sorts of modifiers\n(seems there is some third party library that attempts to do this but im hesitant to pull it in)\n. (wish we had a cantfix label, was looking for that one)\n. yeah i dont think its an issue with what the control codes are, but rather the fact that the terminal / curses doesnt receive them at all. only exceptions are situations like tmux which gets all the keypresses, but then tmux doesnt pipe them into the running terminal :P\nif you can get a working version in curses then id be down to implement (and we should update all those stack overflow answers haha) but keeping this closed for now\n. Hey @bradparks, thanks for your interest in the project!\nWe do have the A shortcut which will toggle all the files' selection mode, so thats at least something you can use when you have a lot of files.\nRegex and fuzzy searching did come up earlier when we were brainstorming the project, but we decided to stick to path matching early on to not try to do too many things at once. We're already criticized for doing too many things (its not unixy) so adding fuzzy search would make that worse. Besides I think excellent tools like fzf would be a better match, or you could simply just process the input before sending it into fpp.\nClosing it out for now but an interesting idea, its all about striking a balance\n. > It would also make more sense because a unix tool should try to do one thing well. I think with this in mind, it would even make sense to have two utilities that could together work as a path picker : the first one which does only the conversion from an output to a list of filenames, the second one which gives an UI to select one or more elements from a list.\nYeah, this has come up a bunch internally and externally. I'm a huge fan of the unix philosophy but I actually think a lot of the value of PathPicker is added by being a \"one-stop shop\" for everything you need to do with paths. Had we gone more unixy we would either have just:\n1. built the parsing of files and outputted those, or\n2. built the UI selector and worked with any kind of input\nBut neither of these would have been that great. With 1) developers would still have to do awkward xargs things (or put the command in a subshell like $(ls -l | fpp) which I find annoying). With 2) the input would require a lot of prep with regexes and sed to get into an acceptable format for selection (think of all the work git diff or git diff --stat requires)\nso we had to go into brave new territory and do a very non-unixy thing here, but I think it ended up really striking a perfect spot between utility and simplicity.\n. Anyways, I think it'd be quite easy to fork this project and refactor it to just output the list of files (basically remove the $PYTHONCMD \"$BASEDIR/src/choose.py\" < /dev/tty line and simply print the list out from python), but I don't think this is something we can support easily since. Let me know if you need pointers on the fork though! Who knows, maybe the fork would become more popular one day :P\n. Yeah the issue with cat ~/.fpp/.pickle is that those are pickled bytes from python, not plaintext. Sounds like you figured it out but heres a simple way to print out all the files from the pickled state:\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ python\nPython 2.7.6 (default, Sep  9 2014, 15:04:36) \n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.39)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n\n\nimport format\nimport pickle\nfileHandle = open('/Users/pcottle/.fpp/.pickle', 'rb')\nlineObjs = pickle.load(fileHandle)\nmatches = [lineObj for i, lineObj in lineObjs.items() if not lineObj.isSimple()]\nfor match in matches:\n...   print match.getFile()\n... \n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/assets/favicon.ico\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/assets/fpp-favicon.ico\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/assets/heading@2x.png\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/assets/launch_page.css\n./index.html\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/scripts/buildAndTest.sh\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/scripts/makeDist.sh\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/colorPrinter.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/format.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/formattedText.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/processInput.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/screenControl.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/test.py\n```\n. PathPicker won't work with files, since implementing NERDTree-like functionality is an antigoal. But NERDTree is a great tool for that if you want to check it out!\n\n\n\nYeah lets move this into #83 which is tracking the filesystem validation task, which allows us to do all sorts of more aggressive matching (since we wont overmatch on text)\n. one thing to note is that this makes our previous-selection-loading behavior not be backwards compatible:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ ./fpp\nUsing old result...\nTraceback (most recent call last):\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 58, in <module>\n    curses.wrapper(doProgram)\n  File \"/usr/local/Cellar/python3/3.4.3/Frameworks/Python.framework/Versions/3.4/lib/python3.4/curses/__init__.py\", line 94, in wrapper\n    return func(stdscr, *args, **kwds)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 27, in doProgram\n    lineObjs = getLineObjs()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 34, in getLineObjs\n    lineObjs = pickle.load(open(filePath, 'rb'))\nImportError: bad magic number in 'formattedText': b'\\x03\\xf3\\r\\n'\nso ill add something for this:\n\n. Alright this is the last python3 error I'm getting. selecting files to edit works fine but in command mode:\nFile \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/output.py\", line 176, in composeFileCommand\n    if '$F' in command:\nTypeError: 'str' does not support the buffer interface\n. Boom! I did a fairly wide audit and I think I hit up all code branches, and I think thats all we need for python3.0 support! :tada: :fireworks: thanks @zkanda for doing a big chunk of this\ni removed the changes you mentioned, so now python3.0 peeps will be running the real deal\n. Hrm I'm not sure of the benefits here -- you'll have to type git add either way (using the UI vs command line mode), and with our better alias support (coming soon) the command mode will be even more powerful.\nhow would this help your workflow @xatnys ?\n. Ahh hrmmm, yeah this is fairly legitimate. Let me keep this open for now, I do agree adding a bunch of aliases would be nice.\nAlso keep in mind that we have FPP_EDITOR bash variable which can be used instead of EDITOR, but a command line arg is even better\n. Ooooh that's a pretty sweet workflow @webglider, never thought about fpp as being a step in some totally different workflow / script.\nAlright you guys convinced me, ill add this right after I merge some of this UI testing work\n. Alright go for it @lastquestion ! It might require some rebasing after I land some of the testing infra but we can see what it looks like when yours goes up :D\n. Oh yeah @lastquestion I meant the dependency injection we have to do in order to test the curses UI. Its not really \"infra\" or a dependency but a fair refactor of the UI code. However I got it working in 7753a7385cdc3cbb79e502799134521f82a92254\nBasically then ScreenForTest can record the output of the curses commands and produce some actual expected output which we can record and test against. then we can add test cases for things like #92 and test on all versions of python too\nunittest was gonna be used regardless\n. > also would be super sweet to have a built in logging to stderr or whatever that we can use while dev. I use sys.stderr.write and then remove it when i commit, but a general purpose logger would be useful\nyeah we dont have general purpose logging, but you might also want to look at from output import debug which does a similar thing! thats what i use rather than stderr\n. yeah i think this should work! #99 and my followups got the majority of it, but I do think we should prevent command mode if you have a preset command...\n. Sorry, the CLA is required for us to merge this :-/ Also I'm not a fan of needing the sudo part either. Also keep in mind that readlink -f is not supported on osx!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ readlink -f\nreadlink: illegal option -- f\nso dont think this can go in\n. Yeah as @SamHasler said, closing this out for now. with react native proving how react transcends the web platform, im hoping that curses version shows up soon\n. Yeah false positives don't really hurt you, but they are less than ideal. lets merge this into #83 which tracks the filesystem validation side\n. I actually think this is one of the best features of PathPicker -- tools like less don't understand whats a file and whats not, so they require you to page through everythinggggggg instead of just what you might be interested in.\nEspecially for inputs like git diff where the filenames are really spread out, the quick jump is quite helpful imo\nI'll close out for now, but I'd be interested in seeing a PR for this since it shouldn't be terribly hard to built (unless you wanted to decorate the simple line that was matched)\n. Sweet! I'll resolve the merge conflict and rebase this today, but yeah I think this is the best option compared to using /tmp and dealing with multiple user issues.\nI might make another module here though that both can import so we dont duplicate these constants anywhere (which was a bad idea to begin with)\n. Alright we contain everything in ~/.fpp/ now, much cleaner. thanks @lastquestion for the suggested fix and pull request! :tada: \n. yeahhhhh woof there are probably a few things we'll need to do here:\n- the first is the most basic -- parse the incoming stdin as utf8 aware and be able to display it correctly\n- the second however is the more complex -- regex match against utf8 as well, meaning our regexes need to be updated.\nThe latter has me worried the most :see_no_evil: maybe @cosbynator can help us since he's mr utf8 regex:\nhttp://instagram-engineering.tumblr.com/post/118304328152/emojineering-part-2-implementing-hashtag-emoji\n. Closing this out since I don't think we'll be able to support in anytime soon (and I keep getting nagged by the reap bot), but once almost everyone is on python3 I can add it!\n. Yeah I'm interested @jbnicolai  -- can you link the source somewhere? Also I'm curious -- when running fpp normally in tmux, what is broken versus what does your script fix? We are working on getting color support in #53 which is the only thing I can think of that might be weird\n. > What this plugin allows is for the user to press a key combination (prefix + i) and run fpp over the most recently created stdout and stderr in the active TTY.\nahhh very cool!! yeah let me link this\n. > pacman is the package manager for Arch Linux, and this lets me list orphaned packages and then manually select those I want to remove, hit c and then type pacman -R and they are gone.\nAhh interesting, yeah I hadn't thought to use this for things that aren't paths / files! However something like:\nPick\nBash Dialog\nor\nfzf\nMight work better for arbitrary matches, since they have fuzzy-matching and all sorts of other goodies. We are going to be adding on file validation soon (where we actually do an os.path.isfile) as well, so this fork might become harder to maintain as we narrow in on the file case.\nAnyways interesting fork though! Thanks for your interest in the project :smile: \n. yeah that would be great -- what are the dependencies for tox? im assuming it can work with travis CI in #82 right? :)\n. Fixed by #86 \n. :heart_eyes: yeah that would be awesome @zkanda . I've been meaning to set this up but focused on getting the release off the ground first. would love a PR or can take a crack at it late this week, since it seems pretty simple\n. Yeah, this is a pretty tough problem to solve since once you start splitting on whitespace, you'll end up matching on everything, especially when looking at code diffs where files and code are mixed together.\nhowever I do think we could do something here behind an experimental flag that would basically be a super-matchy regex that actually checks on the filesystem level if the match is a file (and then only includes that).\nso let me retitle this issue, since i think we'll move in that direction regardless\n. Single files not prepended by paths that don't have extensions (like irbrc) are super similar to just words. Sure we could do filesystem validation to check these cases, but it's important to note that if we want to hit matches like that, we have to either:\n- Test every word (and if including spaces, every possible word+space combo) to detect if its a filesystem. this has a big complexity cost\n- special case the git status situation with a special regex that looks for modified / added / removed / moved / etc\nThe latter is the better bet here. For the git status input you just mentioned, doing a basic back-of-the-envelope calc yields that we would have to do 50 filesystem checks for word-like files:\n```\n\n\n\ninput = '''\n... On branch master\n... Your branch is up-to-date with 'origin/master'.\n... Changes not staged for commit:\n...   (use \"git add ...\" to update what will be committed)\n...   (use \"git checkout -- ...\" to discard changes in working directory)\n... \n...     modified:   irbrc\n...     modified:   pryrc\n...     modified:   rspec\n... \n... no changes added to commit (use \"git add\" and/or \"git commit -a\")\n... '''\nlen([word for word in input.split(' ') if len(word) > 0])\n50\n```\n\n\n\nAnd that's for a 9 line input. now say if you pipe an entire git diff command into fp -- say its ~1k lines, that means we might do ~5k filesystem checks.\nWe'll move in this direction eventually but I do want to point out how overmatching can be dangerous\n. Yeah true, although we should have some kind of sanity check to make sure O(files in your local dir) isn't too hard.\nAlso git outputs a lot of commands relative to the top level working tree, so we would have to check that too.\nBut I do like the idea of flipping it around!\n. Ok guys almost everything is addressed here! Check out #114 for the implementation. I'm going to make a separate issue for the spaces and extension-less files, since that will require another regex\n. :tada: :heart_eyes: awesome! especially the test coverage and breaking out the regex into comments, that's already a big improvement on the (previous) eye sore that it was.\n. I can't repro this -- I think it is solved by #31. @shunjili  can you try manually installing (instructions in readme) and trying to repro?\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ echo \"../homebrew/README.md\" | fpp\nexecuting command:\ncat '../homebrew/README.md' | wc -l\n      42\n\nclosing out for now since i think this is fixed\n. > Because the test coverage currently passes with all of those versions enabled I opted to test them all, for now... if you want to only test 1 version before merging this pull.\nnot at all! I think we should plan for the future and not regress from where we are now, so totally agree with testing a wide range.\nim planning on prototyping this week a few ways we can test the curses UI code, since that's all untested as of now :-/\n. Yep @metavida! I'm working on that right now -- started after I closed this PR. I'm not getting any orgs to show up on the travis page even after syncing:\n\nso I'm reaching out to some FB peeps to see how they got it to work for react...\n. Yep. I actually think I'm stuck on getting admin permissions over the repo now\n\n. \n. finally!\n\n. Do you mind if we chose #86 over this? My only hesitation with tox is that then we introduce a dependency and need setup.py, pip, etc etc. I kind of like how this project is a leaf node right now in the dependency graph, and since Travis CI provides the same functionality I think it's a lighter-weight solution\nBeen loving your other PR's though @zkanda, lemme know if you disagree on tox vs travis\n. thanks a bunch @hegazy ! Yeah once we get multiple versions of python tested (and more test coverage on the UI bits) hopefully we can avoid these in the future\n. I think there might have been a merge conflict which means I had to manually resolve it. do you know if theres a way to do manual merges but attribute the author to someone else? id be curious since definitely want to give you credit\n. Uh sure, if you want to open a PR that reverts and then reverts the revert, go for it\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. Hrm, I'm wondering if unicode support is worth dropping python2 support, or at least making it conditional on the version of python perhaps.\nwe'd also have to handle unix distributions where I believe the default python is python3 and only python2 exists (not python3 command, unlike installing with homebrew on mac).\nGlad you got this working though @zkanda, how does the screen output look like? Also is the output to the shell script correct as well?\n. Yeah good point @lastquestion . We already have a big error warning where we see git abbreviated paths:\n\nso maybe we could do something similar for unicode\n. Closing this out @zkanda since its overdue for a rebase (and we can track the feature in the task), but now that we are python 3.0 compatible i think it'd be easy-er to add this and just throw up a warning for utf8 files on python <3.0!\nat least handling the display of utf8 would get us headed in the right direction\n(also sorry to aggro-close but since Facebook internally tracks the average age of open pull requests and this is one of the only open PR's still, its driving our average up a lot :P )\n. > when addstr reads \\n on the very last line of text. \nahh hadn't thought about that case -- thanks! all about those off-by-one errors...\n. Hey @mknecht, this has been discussed a pair amount before (see #69) -- I think going 100% unix philosophy actually detracts one of the main value adds of PathPicker which is that it's a one-stop shop for the whole workfow that progress in logical order.\nI think something like https://github.com/mooz/percol does the \"select and pipe\" workflow really well, so if we switched to that we'd be an inferior version of that toll :P\nThe downside with \"select and pipe\" is that you have to compose your command ahead of time:\ngit checkout $(git branch -va | percol)\nor\nrm -rf $(ls -l | percol)\nmentally you have to go from:\n- What input do I have? What am I going to select out? and then what command do I want to run?\n- Ok lets compose that command based on the subshell results of the input command piped to the picker\nWhereas with PathPicker (imo) you just go:\n- I have some stdin -- lets pipe\n- Sweet, lets select this\n- I want to do.... this command (/me types it in)\n- boom!\nIt's more straightforward in my opinion. @KendallHopkins was asking about this last night at dinner.\nAnyways closing out in the meantime, but I think #72 could work really well for the alias workflow\n. Merged #92, thanks @mknecht for the report!\n. Yeah this works for me! We can handle either relative or absolute symlinks, but if linux needs absolute ones then I guess we can go for it\n. cc @metavida @lastquestion @frantic  @zkanda ^^\nAlso travis reporting back to me that the relative path resolution failed the tests was pretty sweet, since they passed locally!\n. Yeah I'm hoping I can build some kind of interactive mode where you can approve changes to the expected output. We have a bunch of codegen tests like that at FB, and its prettylightweight when its just a diff preview and you tap y/n\nMerging this in!\n. > it would have been nice to get introspection on the code that runs this; it's pretty hard to read the diffs per commit and there isn't a good branch point to do a complete diff. I hadn't yet merged upstream with my master, so I was able to read the diffs clearly, but that's not always true for everybody.\nYeah sorry, I always get freaked out about losing work so I push often. I had a whole separate branch with the ~10 diffs needed for this stacked, but I guess since I rebased instead of squashing+merging it was harder to read. I didn't realize people read commits that closely! I'll try to do better in the future\n\nI tend to feel that it's difficult to really cover and exercise all corner cases via integration testing, but on the flip side, just because you test all the components doesn't mean it all works. LOL. So it's super important.\n\nYeah we've actually seen a big swing towards integration testing internally at FB, and I'm a huge fan of it. Some unit tests (especially those with automocking) only cover a very very shallow layer of code functionality, and the gaps between code (which are the hardest to unit test) is where the majority of issues can be found. But this way we get piped stdin, keyboard input, and frame-by-frame inspection of the output which is pretty nice\n\nFor chrome, for example, I would initialize the chrome object, send it the curses wrapper, and then assert that it called addstr at the right places and with the right strings. Then when I say move the scrollbar I assert it clears the right things and then it draws the new scroll bar at the right place.\n\nYeah the curses / screen wrapper totally allows us to write those tests as well -- so I think it's good either way. My only worry about asserting individual addstr calls is that you can achieve the final output of the screen in multiple ways (with many different orderings or types of addstr calls), so its fairly implementation detaily. Hence why we only compare the final screen, regardless of how it was achieved\nI think tomorrow I'll try to add a mode that records some kind of attribute-based logic, so it shows which parts are underlined and which parts arent.\nthen filesystem validation and that command-passing mode if appropriate\n. How can you guys repro this? I actually can't repro at all, with python2 or python3.\n. \nah I see :P quite subtle!\n. Done! Thanks @lastquestion for the majority of the fix -- wanted to get this in ASAP before the weekend, since we just took out a bunch of Facebook ads for path picker and dont want any bugs if they install from master\n. > I'll rewrite to use the lambda and then it should be good to merge?\nyeah! i can do it as a followup if you want\n\nalso what's your thought about removing the match of record from fpp and moving it into choose\n\nsure thats fine, i kinda just had it there more for documentation anyways\n. actually ill just do the followups, want to get my hands on some code today anyways\n. Hrm @lastquestion i think the issue here is that bash includes the script dir as the first arg, and then python gets that by accident:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nthe opt OPTS\nUsing old result...\ni got args ['/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py']\n. Alright I fixed that but still get errors when using other args:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp --python3\nUsing old result...\nusage: fpp [-h] [-r] [-ko] [-c COMMAND [COMMAND ...]]\nfpp: error: unrecognized arguments: --python3\nwonder if we can make it more permissive\n. think we had another bug:\ndef initFromArgs(argv):\n-        args = ScreenFlags.getArgParser().parse_known_args(argv)\n+        (args, chars) = ScreenFlags.getArgParser().parse_known_args(argv)\n         return ScreenFlags(args)\n. no need to revert -- i fixed everything in the commands above. i think everything works now! try fetching from upstream and let me know\n. > Sorry about that again. Is there a good way for us to test this? It's weird cuz it spans the batch to python land.\ni think ill add a UI test that just mocks the command being passed in and then checks we present the error message in the ui\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. Majority of this looks good, but let me try pulling this down and fixing this with simply dirtying the lines and redrawing completely rather than each line printing past its //actual// size\nalso keep in mind that printing trailing whitespace might lead to weird conditions -- say we printed the chrome and then printed a line next to the chrome knowing it fit inside the chrome. If it prints the trailing whitespace it might print over the chrome and lead to weird bugs\n. > Dirtying the line is better though.\nYeah lemme know if that works -- should be pretty easy to tell our UI to just re-render the line that got changed\n. Closing in favor of #109\n. :clap: :joy_cat: too easy! thanks for the PR\n. I wouldnt exactly call this an \"error exit\" but i can see why itd be useful. Let me see if this can easily be done since that output comes from the script we generate...\n[pcottle:~/Desktop:]$ echo \"exit 1\" > ./test.sh\n[pcottle:~/Desktop:]$ sh ./test.sh && echo \"hi\"\n[pcottle:~/Desktop:]$ sh ./test.sh || echo \"hi\"\nhi\nah yeah should work!\n. [pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp && echo \"worked\"\nUsing old result...\nnothing to do!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp || echo \"failed\"\nUsing old result...\nnothing to do!\nfailed\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. @jbnicolai We fall back to using the old result only when we don't receive any new input. If we disabled using the old selection, all we could do is print out the usage command.\nWhat situation are you in where you want that to happen?\nmaybe its easier to run something like:\nfpp --clean; fpp\nthat takes care of clearing out the old result / pickled selection / anything else we have? I think thats more straightforward than something like \"dont use old result but im not giving you input either so... just print the usage() message\" with a separate flag.\nOpen to the PR though if theres something i didnt think of\n. oh whoops @jbnicolai  -- fpp --clean doesnt exist yet, but it will soon. let me update this real quick\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. yeah the set controller for the simple match was pretty silly -- i was clearly trying to maintain the interface even though theres no such thing in python\n. im actually not a huge fan of the @property decorator :-/ it makes context switching super hard coming from php and js (what i work in all day) which doestnt have an equivalent concept\ndo you mind if we dont merge this one in? I think we should either be consistent and use them everywhere or just stick to the normal getters and setters\n. > we should add a test for also adding commands that are picked up at the python level and make sure it eats the right commands and lets the other commands thru. I'll do that. Swamped today w/ real work tho.\nyeah itd be nice to test that -- might be a bit tricky. no rush though, real work is the priority!\n. cc @lastquestion @frantic \n. > Mind following up with those?\nthat way you can get credit for this!\n. Yeah markup style would have been interesting! At first I thought that would be hard since you would have to post process all the attribute maps but then I realized since you have the addstr function you can just do it inline :O that might have been more readable I guess too... Hrm. Anyways guess this works for now!\n. Yeah haha it's pretty meta. Might be annoying if we want to rename files one day (since some tests actually check if the input is a file) but I'll worry about that later! Might as well be efficient and use source code as the test input\n. Thanks Eng!! Yeah this is unfortunately case sensitive haha, my bad. Thanks for the PR!! \ud83d\udc4c\ud83c\udffb\ud83d\udc4b\ud83c\udffb\ud83d\ude4c\ud83c\udffb\ud83c\udf89\n. (I'll push this to the site once I'm on my desktop so you won't see the changes immediately)\n. Ahhhh that shellcheck project is cool. Thanks a bunch! Didn't know about the globbing expansion\n. alright, this is done now:\n~~for the git status issue, we actually need to change our prepend-path depending on a filesystem result -- so that might require some ugly threading~~\nso git status is handled, false positives handled, and all the testing is fixed. I punted on:\n\nShould this be behind a user flag or enabled for all? or perhaps able to be turned off?\n\nI'm not superrrr happy with the implementation, since its a fair amount of bool param threading which I never like. However using dependency injection or some kind of global module seemed overkill, and adding a flag to disable it seemed backwards as well (it should be a straight improvement).\nThe one thing I wish we could resolve is matchLine does the prependDir check once, and then we have to do the prependDir check again (with the same bool param threaded in) to actually format the LineMatch object. Solving this would require a big refactor though...\n. If we go to a global object that's accessible anywhere, we should also publish the writes globally (aka reimplement Flux but in Python).\nA global object is way cleaner but it gets messy when mutating it -- anyone can write from anywhere (even in the middle of your function call) it's hard to track down.\nI'd be down for ideas on cleaning this up though, since we have a ton of test coverage on it now\n. :clap: :heart_eyes: this is awesome @pallavagarwal07. Did you see my comment about the man pages? we could use the output of fpp --help to generate that, since it will show all the possible command line options and the most recent usage strings.\nIm installing dpkg via brew so hopefully I can run this myself as well. most of this is magic to me but im excited to try it out\n. hrm im getting one error:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ dpkg --build ./\ndpkg-deb: error: parsing file './/DEBIAN/control' near line 7:\n missing package name\nso i cant try it out. curious what you think about the man page but if we dont go that direction ill merge this PR just so we have somewhere to start for the linux packages\n. Thanks @tpalsulich for the check. I'm trying this out right now and I think a few things are broken if there's a space in the name:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:]$ ./package.sh \n/usr/bin/python: can't find '__main__' module in '/Users/pcottle/Dropbox'\nmkdir: /Users/pcottle/Dropbox: File exists\nWhich is yet again a reason why Dropbox shouldn't have introduced spaces in their enterprise product :angry: :rage: but I digress...\nlet me try to patch in some quotes and fix this up\n. [pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:]$ ln --symbolic\nln: illegal option -- -\nMy ln doesnt have the --symbolic option, only -s so ill change this too\n. There we go, finally got it to work and made the script much more idempotent:\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:]$ ./package.sh \nBuilding fpp version 0.5.7 at Wed, 20 May 2015 09:05:14 -0700\n====================\nControl file is:\n====================\nPackage: pathpicker\nVersion: 0.5.7\nArchitecture: all\nMaintainer: Peter Cottle pcottle@fb.com\nInstalled-Size: 209\nSection: misc\nPriority: optional\nDescription: Bash Output File Picker\n PathPicker parses piped input for files and presents it in a convenient UI.\n====================\nCreating symlink...\n====================\nChangelog is:\n====================\npathpicker (0.5.7) UNRELEASED; urgency=low\n\nRelease version 0.5.7.\n\n-- Peter Cottle pcottle@fb.comn  Wed, 20 May 2015 09:04:29 -0700\nGziping...\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/debian/usr/share/doc/pathpicker/changelog.gz already exists -- do you wish to overwrite (y or n)? y\nSetting permissions...\nfind: -exec: no terminating \";\" or \"+\"\nBuilding package...\ndpkg-deb: building package pathpicker' in../fpp.deb'.\nusage: chown [-fhv] [-R [-H | -L | -P]] owner[:group] file ...\n       chown [-fhv] [-R [-H | -L | -P]] :group file ...\nDone! Check out ../fpp.deb\n```\n@pallavagarwal07 something to consider also is that since usr/share/doc/pathpicker/changelog is tracked by version control, you cant just delete it since then we will have local changes to the directory. so ill add some stuff to fix that\n. Ahhh now its so clean :heart_eyes: \n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:master]$ ./package.sh \nBuilding fpp version 0.5.7 at Wed, 20 May 2015 09:11:12 -0700\n====================\nControl file is:\n====================\nPackage: pathpicker\nVersion: 0.5.7\nArchitecture: all\nMaintainer: Peter Cottle pcottle@fb.com\nInstalled-Size: 209\nSection: misc\nPriority: optional\nDescription: Bash Output File Picker\n PathPicker parses piped input for files and presents it in a convenient UI.\n====================\nCreating symlink...\n====================\nChangelog is:\n====================\npathpicker (0.5.7) UNRELEASED; urgency=low\n\nRelease version 0.5.7.\n\n-- Peter Cottle pcottle@fb.comn  Wed, 20 May 2015 09:11:12 -0700\nGziping...\nSetting permissions...\nBuilding package...\ndpkg-deb: building package pathpicker' in../fpp.deb'.\nusage: chown [-fhv] [-R [-H | -L | -P]] owner[:group] file ...\n       chown [-fhv] [-R [-H | -L | -P]] :group file ...\nRestoring template files...\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/debian/usr/bin\nDone! Check out fpp.deb\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:master]$ gs\nmaster...origin/master\n```\nOne thing is that logspew from the packager:\ndpkg-deb: building package `pathpicker' in `../fpp.deb'.\nusage: chown [-fhv] [-R [-H | -L | -P]] owner[:group] file ...\n       chown [-fhv] [-R [-H | -L | -P]] :group file ...\nthats ok right?\n. Thanks a bunch @pallavagarwal07 I definitely couldn't have done this on my own. Now that we have debian packages, I assume just including them with the next release so they can be downloaded is sufficient right? Is there any easy command we should list in the README for installation?\n. @pallavagarwal07 here's a link!\nhttps://dl.dropboxusercontent.com/u/15917930/fpp.deb\n. Alright great! I'll be sure to include the debian package in the next release and update the README with the link\n. Oh wait you can edit releases, let me put this up now...\n. Alright readme updated!\nhttps://github.com/facebook/PathPicker#linux\n. If you feel particularly compelled @pallavagarwal07 go ahead! But I'm not sure how \"bad\" it is to not have a manpage -- if its not a huge deal then maybe its not worth your time. However if its a huge debian \"faux pa\" then maybe we should\n. @pallavagarwal07 mind sending a PR for the README? you know what you're talking about haha\n. > I thought about this and maybe we can support left and right arrow to page screen width to the left and right. I'd rather do that then '...' abbrev.\nHrm, I'd rather actually do the abbreviation to be honest so the relevant parts fit in the screen and i don't have to scroll over. it'd also be helpful if you had output like\n./somethingsuperlongggggggggggggggggggggggggggggg/a1\n./somethingsuperlongggggggggggggggggggggggggggggg/a2\n./otherThingHere\n./OtherThingThere\n./somethingsuperlongggggggggggggggggggggggggggggg/a3\nhaving to bounce back and forth between sides of the screen would be tough.\nI don't think a flag would make sense here though -- we should just do this if your file match length is way too long compared to the chrome boundaries.\nmy only worry is how to implement the shortening logic -- @QwertyManiac would just showing the filename work for your case?\nactually @lastquestion we could do something interesting here and more intelligent than git -- we could just use up all the available space, so itd be something like\n./hadoop-mapreduce-|...|/client-hs/something-else.py | [f] is to select\n./hadoop-mapreduce-|...|/client-hs/something-cool.py | [j] is to go down\naka write up all the way until the chrome\n. \nI got this working pretty well! even responds to screen refreshes\n. :tada: :tada: :tada: \nWoohoo! This is way better -- deleting that hacky whitespace at the end of the expected test output feels quite nice :D\nI didn't know about delchar to be honest, clearly I should have read through more of the curses documentation. This is pretty sweet though, I like how we re-use the chrome boundaries to understand which lines to clear\nLemme merge this and followup with some nits\n. :tada: like the naming of \"character class,\" I couldn't figure out a good thing to call that inner grouping. lemme add one or two more examples of what it does / does not match\n. I had a small merge conflict on the Lines did not match for test %s:\\n\\nExpected:%s\\nActual  :% line from your other PR, so I just combined the two (visually lined them up and wrapped in quotes too)\n. Yep I definitely see the bug now, haha:\n\nthis totally lame the delch documentation doesnt mention anything about that. some thoughts:\n- What if we implemented clearLine the same as before (with delchar) but went right to left and painted the chrome again afterwards?\n- If we switched back to the normal emptystring printing, how bad does the test output look like? I almost think its a bit more clear to do whitespace printing from the untoggled-input to the chrome boundaries than to do what we were doing earlier, which was painting basically an \"arrow length\" of whitespace after\n. Lets go with #123 over this if thats OK -- I think the monkeypatching for the tests would be ideal to avoid, and it'd be nice to use delchar in some capacity. I would be down to add the pastScreens option though!\n. By pad you mean curses windows and pads right? https://docs.python.org/2/howto/curses.html#windows-and-pads\nAh very cool! Man I really should have just spent an afternoon reading through the curses docs before rolling some of this infra on my own :O\ni agree though, once the chrome is 100% its own pad then the delchar method will work flawlessly\n. By pad you mean curses windows and pads right? https://docs.python.org/2/howto/curses.html#windows-and-pads\nAh very cool! Man I really should have just spent an afternoon reading through the curses docs before rolling some of this infra on my own :O\ni agree though, once the chrome is 100% its own pad then the delchar method will work flawlessly.\nI guess the advantage of the pad is that we can reposition it off screen when its not displayed and move it back onscreen when appropriate? I guess our chrome is always shifting from the right to the bottom...\n. > it also would let us paint the line match txt once and then scroll it up and down without having to reprint the words i think. \nAh interesting! I see what you mean -- yeah I wonder if its more efficient for us to hold our more minimal representation in memory or to just dump everything into the buffer and let them (more efficiently perhaps?) do the repainting when it moves. \n. > I'll open a PR for the pastScreens and then we can add a test for wide like I had before. This will make sure we don't regress with the wide chrome and the delchar. \nah good point, that'd be nice to add.\n\nGod this dirty code has had 4 PRs against it already.\n\nPsh its not that bad!\n. Much better! Many thanks @pallavagarwal07 \n. Hrm -- how do you source your zshrc? does sourcing these files work?\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L33\n. Hrmmm. If you have a fresh bash script, can it successfully source your .zshrc file? something like\nsource ~/.zshrc\necho \"success\"\nIf you paste that into a test.sh and run it, what is the output? im wondering if its something weird with pretzo's configuration setup\n. Merged #138 so this is fixed! thanks again @hlian\n. whoops, this didnt post earlier:\n```\n\nI get the same errors when I do that.\n\nyeah, so this is an issue with sourcing your zshrc to begin with -- one of the assumptions of fpp's bash execution mode is that we can source all those files :P\nlet me check out #138 which is probably the better fix\n``\n. :tada: :clap: wooo awesome! I do think its more explicit threading and more.get(key, default)` values, but i think its cleaner from an internal API standpoint. thanks a bunch @lastquestion !\n. Hrm, I'm going to hold off on merging this since the Travis CI results came back negative (seems like the tests actually failed).\nCouldnt we just keep the right-to-left behavior though and just extend it to the edge of the chrome? that would consume the whole chrome content and then start chewing on the line, so the chrome doesnt bleed in.\nlemme try that..\n. Thanks @artemave ! This came up internally at Facebook and there were a number of interesting questions:\n-- Should search only match file paths or should it match against the whole input?\n-- Would it be case sensitive? Auto-case sensitive? support regexes?\n-- Would we allow specifying a fuzzy regex to filter the input first before displaying it?\nAnd then once we started exploring this idea, it became clear that PathPicker would start to try to do \"too many things\" at once, and the more unixy way would be to preprocess the input before sending it to PathPicker. So we decided this was a non-goal.\nHowever something like fzf would be a great tool to use in this case:\nhttps://github.com/junegunn/fzf\nClosing out since we won't realistically get to this, but if you have ideas for how to make fpp play better with certain workflows im interested!\n. oh fpp doesnt pipe anything out, so i think you would need to fzf first and then pipe into fpp\n. Closed in ~2 hours! Not too shabby :D Thanks for the report @dyerw, originally this would have been a bit scary of a feature to implement but now with filesystem validation and better test coverage, i can merge it more confidently\n. (The above is a before / after, where now we can highlight the deleted file)\n. Oh yeah good point, let me switch this\n. ugh apparently python3 is more restrictive about indices :*( thank you travis CI\n. @lastquestion ^^ might want to see the implementation of this. its pretty convenient!\n. > I think there's a very small bug where if you're in X mode and you enter command mode, you'll be back in select mode when you are back on the main choose screen. \nyeah I could see that happening -- we probably need to track some kind of lastMode variable to keep track of where we came from\n\nAlso I think the color of the text is white only because we are printing the scrollbar chrome right before, so the default color is set. It's not necessary but would be very good to use the color printer to affirmatively default to the default foreground color. (whew).\n\nyeah do you mind doing this @xavierbeynon  and possibly adding a test for X-mode as well? It should be easy if you just provide x as one of the mocked inputs to the test case and check for the right screen. that way we can see what this looks like\n. > Sorry for being late guys - I'm between situations right now. I could probably write a test this weekend and refactor the keys thing. I don't really want to do anything with color printer since I don't know what that is.\nits cool! let me see if i can merge this all in\n. Alright sweet! Thanks @xavierbeynon for the PR, rebasing was quite trivial (just a merge conflict in an expected test output file).\nNow that I'm playing around with this locally it actually is quite fun / useful :)\nwe should try to figure out how to turn off the cursor in x mode -- one more thing to fix\n. Fixed! Alright I think this is all wrapped up now, thanks again :tada: :clap: this should make it into the 0.6.1 release\n. Hey @hlian! Thanks for the PR -- I remember interactive mode coming up when I was figuring out alias expansion but I think I got stuck on a similar issue you had -- yosemite needing shopt to turn on alias expansion yet that not being an option in zshrc. also stack overflow seemed to widely discourage use of interactive mode, but I think our use case is a valid exception.\nI guess checking for the existence of shopt and then flipping the flag isn't the worst solution, but it does seem a little blunt (compared to sourcing).\nLet me pull this down and test locally -- I might actually prefer this though since sometimes sourcing bashrc's can have pretty aggressive side effects (I personally have a script to login automatically to my facebook dev server if a given flag is present, so that always trips me up when using fpp with bash sourcing)\n. @frantic do you remember any reasons why we avoided interactive mode in the past? I think the shopt was the main reason but given how others might be running into #125 my preference is to merge this in.\nLet's do it!\n. :tada: :clap: thanks @lastquestion! let me check out the behavior of --clean real quick after this -- i might add the exit back\n. Yay! glad the off-by-one error is fixed and we handled the super narrow window case.\nAny reason why you went with a larger change here @lastquestion? Im worried this might be a slight perf regression since now we are doing this calculation on every repaint rather than just when our status of needing truncation changes from false to true (or opposite).\nJust worried about merging in a bunch of code that I know works but I dont quite grok yet :O\n. Closing this out since its stale, reopen if you want!\n. I'll make sure to preserve #102 as well\n. Hrm unfortunately this doesnt work with the way we attach to dev/tty :cry: $? refuses to return the actual exit code of choose.py when checked after its executed, so im not sure what we can do here besides the current behavior (which is to exit with status 1 from the final bash script).\nsuggestions from bash wizards welcome :)\n. :tada: :clap: great PR! I missed this when switching from Facebook dev servers (which we all work on through ssh) to local-dev land.\nsublime is super popular -- wonder if we should look up support for textmate or atom or anything else\n. Yeah this is because grep services typically separate the filename from the results with either hyphens or colons depending on the context. heres an example:\n```\n\ngit grep -C 3 \"future\"\nusageStrings.py:from future import print_function\nusageStrings.py-from screenFlags import ScreenFlags\nusageStrings.py-\nusageStrings.py-USAGE_INTRO = '''\n```\n\nif we just blindly allowed hyphens in our filename extensions, we would mismatch on usageStrings.py-from :*(\nwe have filesystem validation now but even with that, we need a heirarchy of the regex waterfall, and that leads to a tough situation -- we will correctly match on filename without the hyphen extension, and then with filesystem validation will invalidate this match\n. so instead i need to loop through all regex results if filesystem validation is turned on and only return the first result that validates....\nanyways #148 should address this, but it wasnt easy! haha\n. Can you try using 0.6.0 by any chance? We added filesystem validation:\nhttps://github.com/facebook/PathPicker/releases/tag/0.6.0\nSo we can actually parse files with spaces in them now :) You should be able to upgrade via brew since thats the latest version:\nhttps://github.com/Homebrew/homebrew/blob/master/Library/Formula/fpp.rb\nOr just clone the repo and do brew install ./fpp.rb\n. The hyphens stuff will be easy to add, thats just a regex change.\nclosing this out since im pretty sure we have files with spaces working, but reopen if you can repro on 0.6\n. Are you talking about the Package Control.user-ca-bundle files? In order for those to parse, we need both spaces //and// hyphen support, and I just landed the hyphen support in that other task. so try installing from master! should work then. probably will update homebrew by EOW\n. Ah dang ok I'll take another look at this then\n. Ah this was easy to fix -- just needed to allow extensions to have hyphens in the regex that allows spaces :O woof. #149 should go in clean and then we are good!\n. Great to hear @benmccormick ! :heart_eyes: feel free to drop by and open issues in the future for other bugs / improvements\n. @mrandrewandrade can you attach a few things here for me to debug? try running the output of:\nfpp --version;\nls -la ~/.fpp/;\ngit status;\nnote that if git status only outputs files that are deleted, youll have to add -nfc to skip file checks\n. ```\n\u279c PathPicker git:(master) git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\nnothing to commit, working directory clean\n\u279c PathPicker git:(master)\n```\nAh yeah ok @mrandrewandrade I see what your problem is -- git status is listed as an example command to try out fpp but it will only work if some files have been changed, so git status actually outputs a list of changed files.\nRunning fpp on its own (with no previous result) won't do anything either, since it needs some input to show you the selector.\nHere's the easiest way to just open up the program:\necho \"foo/bar/banana.py\" | fpp --no-file-checks\nthat will open up the UI and should work regardless oh where you are. to try out with some real input, try:\ncd /usr/local/bin/PathPicker/;\ngit diff HEAD~10 --stat | fpp\nthat should allow you to open up the files.\nIts also important to note that //fpp wont automatically use the stdout from the previous command//, so typing \"ls\" and then typing in fpp doesn't do anything (since fpp thinks it is getting no input).\nHere the \"old result\" refers to the previous piped input to fpp. let me clarify this real quick\n. Sweet, I'm assuming the above worked :D hopefully the new error message makes this more clear!\n. :tada: :heart_eyes_cat: thank you so much @engz ! Let me merge this in\n. Lets merge into #155 since I think this was solved with a recent PR -- You can see we now use $SHELL in interactive mode:\nhttps://github.com/facebook/PathPicker/blob/master/fpp#L36\nTry installing from master and seeing if the issue persists @sr105 \n. \n. Yeah its unfortunate we have to change the position of the tooltip manually (which wouldnt work if we supported other locales) but GitHub might do something similar (or call into the hook that bootstrap exposes)\n. Get @sr105, thanks for the file. Yeah the main issue here is that the support and formatting for various editors can vary quite widely -- for instance vim only supports setting the line number when its only opening //one// file, whereas emacs and joe are quite different.\nOut of curiosity what is your $EDITOR set to? That's the variable we look at (if FPP_EDITOR is not set).\nThis is a similar issue for the command mode -- we have $F as a token to represent all files joined by a space, but if the user wanted line numbers, its not clear what format they would want them in.\nJust trying to understand your specific usecase -- id rather make a slightly more magical but frictionless solution for a specific editor than introduce too much complexity\n. Gonna close this out since it seems you're unblocked but lets continue the discussion\n. Ah cool, glad you got unblocked! I think having multiple formatting options is a bit intense (since the emacs and vim style is already handled) but I wouldn't be opposed to a PR that adds an option to output all the files and line numbers separated by some kind of token.\nAlso keep in mind that sometimes we don't have filenumbers available (for certain types of parsing), so you might get 0's in place of an actual filenumber.\nAnyways have fun path-picking!\n. @Muffo can you run fpp --version for me and attach that? We used to try sourcing the rc files but switched to running the shell in interactive mode, which is a safer option. If this happens on a legacy pathpicker client I wouldn't be surprised, but the new interactive shell mode fix should work.\nPathPicker should certainly work with just plain zsh regardless though\n. Ah yes, the source of the .fpp.sh is the smoking gun here. We already landed the fix for this in master but we shouldn't be sourcing any rc files directly.\nYou should be able to install from master to get the fix (see readme instructions) but I'll submit a new minor release, since I'm surprised that this didn't make it in\n. Alright PR submitted to homebrew:\nhttps://github.com/Homebrew/homebrew/pull/40501\nAnd release made:\nhttps://github.com/facebook/PathPicker/releases/tag/0.6.1\nYou can also install easily via homebrew by just cloning the repo and brew install ./fpp.rb (using the local file) once you are in the directory.\nclosing this out since the fix is out now!\n. No problem! This task was a good forcing function for me to get the fix out the door. My homebrew PR got merged so after brew update you should be good to go\n. Hrmmm... if we had //launched// with this feature I think it could have gone in, but now that we've been released for quite some time I don't want to break everyones muscle memory by adding this :crying_cat_face: itd be pretty thrashy to update and then have all your normal keystrokes lead to unexpected output.\nI also think each keystroke should be fairly \"KISS\" or keep-it-simple-stupid. Although usually the intention is to go downwards after selecting a file, the cases where that isnt true ends up being quite thrashy. Imagine you have a really long list and you actually only want to select the last entry in the file -- by moving the index to +1, you'll scroll all the way to the beginning of the list -- not even giving you an option to see if the selection worked. that would feel like a bug.\nadditionally say you are selecting files on the way up (rather than downwards) -- then you have to fight against each selection pushing you down.\nThis also breaks almost every test we have (since the expected output is different from keystrokes), hence why the build failed.\nAnyways, I'm going to close this out since it has some pros but also some cons. Thanks of the interest in the project though @prubel !\n. Hrm, I could be convinced for F! that way its a separate keystroke but similar (select-and-down)\nyeah if you run the tests and add another for the F functionality we could merge this in\n. Ah of course! my bad @prubel -- we updated the travis formula and everything but I forgot the docs. :tada: :clap: thanks\n. Hey @kcbsbo thanks for dropping a line!\nThat is super annoying -- I'm sure other projects have run into this before, let me followup internally with our open source team since all we need is an electronic signature (it just happens to be hosted on facebook.com, but could be hosted anywhere). Stay tuned!\n. Hey @kcbsbo, good news! We actually have a PDF version of the form that you can sign and email back, so we have a workaround :P bad news is that I'm having trouble tracking down the PDF version right now -- once it's monday here I can probably get a hold of it.\nIt's unfortunately a bit of a low-tech workaround (since I think you have to sign it manually and then scan it) but you only have to do the process once for all of our repos\n. Hey @kcbsbo! I got a copy of the PDF -- can you email me at pcottle@fb.com? I can send it over.\nClosing out in the meantime, thanks for your interest in the project though! :clap: \n. This looks great! yeah I bet all the tests pass without the usage string change, but a lot of them have the usage in it so youll have to delete and re-run the test. the git diff ends up showing the real changes at the end of the day\nthis looks great though! :clap: \n. Thanks for the update @prubel !! :clap: :tada: :tada: this looks great!\n. > How would the maintainers of this project be willing/interested in some glue code in your debian build script to generate and package a manpage?\nYeah certainly! This came up in #117 but @pallavagarwal07 commented saying that the format for man pages is fairly strict. Do you think its tractable to transform our --help output into a manpage somehow?\nI don't necessarily want to maintain a whole separate stack of help code but if we can integrate it easily with some glue code then I'm down\n. Thanks a bunch for the PR!\nI think the extra dependency is fine since it's only for dev. It would be nice to comment in the script with the right error message if it's not installed\n. Closed out in #161 , thanks a bunch again! woooo linux support\n. Travis test is good, thanks a ton @sethwoodworth ! :tada: :clap: \nIll make sure to generate the manpage when we make the next release\n. Hrm, @pallavagarwal07 did this come up in your testing? or @sethwoodworth was this apparent when you worked on the manpage stuff?\nI don't have a ubuntu machine handy so I can't easily repro, but these are mainly just warnings right? We don't really have any binaries so doing those checks wouldn't make sense. Can't tell how serious the others are\n. > Actually I did point these out. These warnings are only occurring when the packaging is done on a mac. When I use the exact same script on Linux, the packages give a clean lintian output.\nsweet, lets close this out then. mac users wont be the main customers of the debian packages and these arent a blocker anyways\n. Ah yeah I misread -- maybe I can reach out to coworkers to get them to build the packages when we have releases :/ actually our devservers are Debian I think so I'll try that next time \n. Yeah this is somewhat intentional for the REGEX_WITH_SPACES regex. otherwise we would parse almost everything in the stdin as a potential file and have to drop down to the filesystem to check if its a file or not. imagine if we were checking xiuliyun or staff or random bits of code in a git diff output\nill debug this though and see if we can selectively prepend a ./ and try to grab out the file. just worth mentioning it has performance considerations which is why we didnt just open up the flood gates from the getgo\n. \ncoming on up!\n. #yolo gonna merge this in since it passes locally\n. Very cool @edi9999 ! How do you end up doing the filepath extraction? it seems like you have pretty specific validators here:\nhttps://github.com/edi9999/path-extractor/blob/master/validators.go\nfor instance, that wouldnt work with something like a retina image asset (logo@2x.png) right?\nI do like the simplicity of the program though :D quite impressive.\nclosing this out since its not super actionable, but ill keep this in mind if someone files a similar issue\n. @dpagano can you attach the output of fpp --version? I'm almost certain this was only an issue only with our older releases; we have since switched to falling back to relative paths rather than ~/www. That functionality was vestigial / only applicable at Facebook where our sandbox is checked out at ~/www.\nI'm not super familiar with SVN though -- do SVN commands give filepaths as relative from the root of the repo? If so we might need to add SVN repo logic -- you can see here:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L126\nWe try to get either the hg root or the git root, but we dont have any logic for svn. Do you feel brave enough to add it? :D\n. Great! good to hear :+1: \n. Do you mean the .../ paths right? so this is actually an issue with git -- here is whats going on:\n-- first, git status actually produces different output depending on if its going to be displayed on the screen vs piped into another program\n-- when it gets piped, it decides to abbreviate the long paths with a preceding .../ to designate that the actual path got truncated. so all information is lost by the time it gets to fpp :cry: \n-- since we added filesystem validation, these paths get filtered out since they dont look like files\nYou can actually skip filesystem validation with the -nfc option, in which then when you select them:\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src/tests:master]$ echo \".../foo.py\" | fpp -nfc\nWarning! Some invalid or unresolvable files were detected.\nIt looks like one of these is a git abbreviated file with\na triple dot path (.../). Try to turn off git's abbreviation\nwith --numstat so we get actual paths (not abbreviated\nversions which cannot be resolved.\nAre you sure you want to continue? Ctrl-C to quit\n```\nwe produce a big nasty warning. but unfortunately since they are filtered out, i guess its hard to get into that warning state\n. @devisnik do you think it would be appropriate to warn when we get any of these files upon input? it would be a super jarring experience (well, super frictiony at least) but now that we have filesystem validation, its hard to understand why they arent selectable.\nactually, let me instead change it so we \"pretend\" these are legit files so we allow you to select them\n. All done! Next release won't have this issue :)\n. Yeah, this is an unfortunate issue with creating the packages on Mac systems (whereas debian ones don't produce packages that have these errors).\nThis is a dupe of #162, but I just realized that you can edit the file attachments for a given release, so I could update this ASAP. @jiawen or @eox-cs1 oe @pallavagarwal07 -- could any of you run the debian packager on your system and upload the package somewhere for the 0.6.1 release? I could then download it and replace the faulty one\n. Alright updated the release, new package is here:\nhttps://github.com/facebook/PathPicker/releases/tag/0.6.1\nThanks @pallavagarwal07 for the quick fix! closing this out for now\n. I trust you! :clap: \n. > It would be helpful if the executed command would be [optionally] added to the shell history\nyeah I totally agree @saveriomiroddi! I think we looked into this briefly when starting the tool but I must not have found the history -s command, which seems to do exactly this.\nlets see if I can add this to the bash script we execute. my only worry is that it will be in a separate context, so it wont affect your own history\n. :crying_cat_face: :cry: Yeah, this isn't possible since the history command modifies the subshell, not the shell its called from:\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nUsing previous input piped to fpp...\nexecuting command:\ncat '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/DepartureSelectView.js' '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/StationSelectView.js' | wc -l\n     284\nAdding to command history...\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ cat ~/.fpp/.fpp.sh \nif type shopt > /dev/null; then\n  shopt -s expand_aliases\nfi\necho \"executing command:\"\necho \"cat '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/DepartureSelectView.js' '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/StationSelectView.js' | wc -l\"\ncat '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/DepartureSelectView.js' '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/StationSelectView.js' | wc -l\necho \"Adding to command history...\"\nhistory -s \"cat '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/DepartureSelectView.js' '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/StationSelectView.js' | wc -l\"\n```\nafter I ran the above, the command wasn't added :-/\nIf anyone has suggestions on how to do this lemme know, but I think i'll have to close out in the meantime\n. > Although I now see that sh ~/.fpp/.fpp.sh basically gets me to the same place.\nyeah exactly, this should be exactly that (the last command run, plus some setup code). actually it would be somewhat trivial to alias fpp to actually execute fpp and then cat one of the lines to the actual bash history (but thats only possible with a top-level alias, nothing our code can control i believe)\nmy hesitation for a history file is then you have to worry about unbounded size, what number of lines to truncate at, a config option for the former, etc etc.\nlemme know if sh ~/.fpp/.fpp.sh doesnt solve what you want though!\n. Cool! lemme know\n. Oooh, I like the implementation of prepending all the history by line number so its easy to reference a previous one. if we get more requests for history functionality i might steal this implementation :)\n. /me facepalm\nThanks @evverx! I was meaning to make the README updating part of the script that runs when we build a new release, but I had no idea that GitHub releases has a /Latest/ auto redirect. how convenient! this is much better\n. Whoops sorry I missed this @Shenil ! I agree its already been discussed a bunch but since this PR has test coverage and covers a pretty valid usecase (files often in the root directories), I'm more than happy to merge it.\nThanks for contributing!\n. @glensc your commit over in https://github.com/pld-linux/fpp/commit/7060690fcf68e7f668562e37d33d51f5e974276e looks good, should we merge that?\n. Sorry about the delay on this, all the tarball stuff was contributed by the community (and I know far less than I probably should)\n. Hrm, I'm going to call on the linux expert-in-residence @pallavagarwal07 and @sethwoodworth who added the script. You guys have any ideas?\n. > so it is not currently an option to rename the folder hierarchy to accommodate no spacing.\nyeah understood. its tough to nail this down without a repro case -- can you report back with one and then we can add it to the test suite?\nA lot of the spaces implementation was super incremental (since i didnt want to start overmatching on code results) so i wouldnt be surprised if there were some edge cases.\nthe files werent being deleted right? you need to pass the -nfc flag in that case\n. (we have an internal bot that tracks open issues and docks points the longer they are open, so ima close this out till we have a repro -- but report back as soon as you have one!)\n. Hey @hajimezhao ! We dont have support for directories yet, mainly because directories are such a disjunct set from filepaths for most unix commands. We'd have to provide a command API that would somehow provide different tokens (or different commands) for filenames versus directories and all of that.\nIts not impossible to support, just requires a lot of work and careful consideration :P\nFor clipboard, yes you can! There are two things you might be interested in:\n- The first is the pbcopy command which copies to clipboard, so you can \"paste\". I think this command only comes on macs but is quite useful. you can pipe into copy like echo \"asd\" | pbcopy\n- The second is that we have a bit of hacky support for moving into the directory of a listed file. If you \"cd\" a file in FPP, we will actually copy it to a file in ~/.dircopy (since we execute in subshells and you cannot change the outer shells directory instantly).\nThen I have an alias to easily navigate to that directory:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ type -a cdp\ncdp is aliased to `cd \"$(cat ~/.dircopy)\"'\nso my workflow is essentially cd $F >> program exits >> cdp\n. Hope that helps!\n. :tada: :heart_eyes: thanks @pallavagarwal07 !!\n. Thanks for the bug report and repro case @ivan ! This is totally a bug -- there is only one way you can select files that are offscreen, and thats with the \"A\" command. youll see in the attached commit that this was a silly fix :P\nadding some test coverage...\n. Done! Should be fixed, thanks again :+1: \n. @derryl What version of FPP are you running? should be able to find out with fpp --version\nWe used to return ~/www/ as the repo path if we couldnt detect a git or mercurial repository, but we changed that in e302f16118e0a9bbd38b202e1d892a68b30f227c:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L159\nso now you shouldnt be getting ~/www at all.\n. Im pretty sure this is just due to an old version, but please reopen if you are getting it after upgrading :+1: \n. Great! Glad to hear you're unblocked and enjoy the tool -- I'm just glad we can give back to the OSS community\n. Hey @baest , yeah this is unfortunately a known issue :-/ it cant pick up things that //dont// look like files (like the fpp* which is a symbolic link i believe), or words that are all caps without any extensions or leading paths.\nYou can see what we support here:\nhttps://github.com/facebook/PathPicker/blob/master/src/tests/testParsing.py#L20\n. Gah, It'd be awesome to support this one day but I don't really think it'd be possible anywhere in the nearterm :-/ the issue is that we parse the entire input before pickling it and loading up the UI:\nhttps://github.com/facebook/PathPicker/blob/master/fpp#L27\nYou can always do something like head -n 100 to grab bits of the input first and pipe to fpp, but theres no way we could support streaming without a giant refactor at the moment.\nthanks for the input though!\n. Just a random question first -- what functionality of fpp are you looking for over something like NERDTree? the multiple selection and command mode perhaps?\nAnyways, I'm actually quite surprised this works as much as you described :P So the command gets correctly echo-ed out, but the vim session never resumes?\nI'm worried it's this line:\n$SHELL -i ~/.fpp/.fpp.sh < /dev/tty\ncan you possibly try without the < /dev/tty hook? should be able to edit the fpp bash script easily:\n[pcottle:~:]$ type -a fpp\nfpp is /usr/local/bin/fpp\n. > but removing the -i did fix it (though I'm not sure what that could now have broken).\ngah, yeah then we might have to close this out unless we can detect if we are inside the vim shell or not.\nbasically the -i option forces it to be interactive, so things like opening up vim / emacs / git add -p / whatever will actually work. Seems like vim's execution mode gets tripped up by running an interactive script.\nSeems like theres a similar issue over here too:\nhttps://github.com/zaiste/vimified/issues/89\n. (for context, we need the -i to both expand bashrc aliases iirc and make the tty stuff work. so reverting it would be a fairly big regression.\nim open to ideas on running conditionally with the -i option if we can somehow tell we are inside a vim subshell)\n. Hrmmmm this is quite odd. I assuming running cat './2010' './2011' normally works right?\nWhat about opening up in an editor? can you open those files in vim?\n. Do you have any weird customization in your .bashrc? can you attach it\nI'm on Yosemit as well (as well as all my coworkers, couple thousand FB engineers) and it works for everyone here. Login shell is standard bash:\n[pcottle:~:]$ bash --version\nGNU bash, version 3.2.57(1)-release (x86_64-apple-darwin14)\nCopyright (C) 2007 Free Software Foundation, Inc.\nbut i know a few people who use zsh with it. Never heard of csh though :O\n. Yeah @wkoszek we definitely have a dependency on bash. the reason why we use $SHELL is that we also support zsh which is fairly popular, so that way its dynamic.\nhowever since we don't support csh at all, what do you think about fpp instead just dropping down to bash? Basically I'm assuming fpp working in bash is better than no fpp at all.\ndo you think most csh users have either bash or zsh installed?\nI'd be down to throw up a PR for this in a bit, but I'd probably ask for you to test it (since I don't have csh or zsh installed :O I'm such a bad engineer clearly)\n. Yeah I'm basically proposing the logic that if you're not on zsh or sh, we just use bash shell by default rather than optimistically hoping that your shell can interpret the script we generated.\nhowever we do have support for zsh, so we can't just hardcode using bash shell @wkoszek.\nWhat do you guys think about the above? Would fish or csh users be annoyed that bash executes their commands?\n. > Unless we stick some ZSHisms there, and this script is simple and clean, I think calling /bin/sh on ~/.fpp/.fpp.sh should work.\nWe delegate to $SHELL in order to preserve the aliases of whatever shell we're using, whether that be zsh or bash. We had some pretty high demand for supporting zsh aliases, which is why we did the switch. Sorry @benmccormick  about the unintentional regression though :-/\nI think we should do:\n- If $BASH or $ZSH_NAME is set, defer to $SHELL. otherwise call /bin/sh. Heuristics stolen from http://stackoverflow.com/questions/3327013/how-to-determine-the-current-shell-im-working-on\n. Lemme whip up the PR for this real quick\n. Alright PR is up! Sorry this took so long to fix when it ended up being reasonably simple :P\nCsh / shell users -- do you all mind giving this a whirl and seeing if it fixes things?\n. alright merging in the PR since im pretty confident it works. woohoo! would love for one of you all to test locally though, if thats possible :P @benmccormick ?\n. > interesting I see that even if I'm currently in bash\nhrm thats super odd -- can you debug inside of ./fpp and make sure that indeed bash is being run? im almost thinking that somehow you're going back into fish from bash, since fish is clearly complaining about the exit status.\n\nMaybe just check directly if $SHELL ends with zsh and use $SHELL, or otherwise use sh?\n\nyep I can do that too. what happens if you hardcode ./fpp to run bash?\n. i thought that exit wont properly punt up the exit code of the last command for bash at least -- is that not the case? if so we can just switch to exit then, but i thought it had to be explicitly piped up\n. Resolved with #205 \n. Ah sweet! Does this fix #185 for you? Didn't realize we had something like $VIMRUNTIME\nkeep in mind that I think bashrc aliases wont expand in this mode (without the -i option) but I would need to check. thats better than hanging the shell though.\n. Another thought -- should we prevent going into editor mode if we are already inside a vim runtime when we launch fpp? I dont think theres a valid case for running vim as launched from a vim bash command\n. Lets do it! Thanks for putting up the fix -- this will make the next release, but in the meantime you can tell your friends to install from HEAD on master (since you already have the fix locally)\n. thanks @pallavagarwal07 !\n. Hey @banks ! I have good news for you :)\nThe reason why we don't detect deleted files is because we use //filesystem validation// on all of our matches (which is now on by default), so we can be a lot looser with our regexes and find all sorts of matches we otherwise wouldn't have been able to.\nSo if you want to select deleted files, just do fpp -nfc or fpp --no-file-checks.\nActually if you run fpp --help, your exact scenario is described as the reason why you might want to use that flag.\n. For directories, we unfortunately don't support these for the time being for a few reasons:\n- Editor support for directories varies a bunch. Vim and sublime and all those classics handle it just fine, but stuff like nano just seems to print out a blank screen\n- Command mode gets a bit trickier with directories, especially if you have selected both files and directories. we would probably need to have two separate replacement tokens\nHowever it's not impossible, just something we haven't thought through yet. I'll keep it on my radar since i do wish I could select directories sometimes (mainly for command mode)\n. lol yeah whoops, Facebook uses phabricator all day so its somewhat hardwired. glad i could help though!\n. for the editor case it's easy to add exit 0 and have it work, but for the command case we should properly propagate up the exit code if its non-zero. i was about to suggestion doing just a && exit 0 but that will break if people have ; after their command.\ncould we just check the exit code of the last command and use that?\nexit $?;\nI'd be down for a PR that does that -- should be safe!\n. :+1: :+1: :+1: PR would be awesome.\nI'm glad you find it useful too! Eliminating copy pasta and not having to use the mouse as much wer ebig motivators for me to finish it\n. :+1: :+1: :+1: :tada: \nWe probably could have scoped this to just the file open / command, but i appreciate the thoroughness! i assume #190 is silenced after this is merged too\n. Thanks @slackorama so much for putting up the PR for this! logic seems good -- its too bad we don't have test coverage for this though. I'll try to add something after this lands.\nAlso I should make a new release since this and a few other fixes have gone in recently... lemme file a task on myself to do that\n. Hey @jeffkile do you know the command line formatting for neovim's line number args? We have a manual mapping here:\nhttps://github.com/facebook/PathPicker/blob/371ffc2d8df002e16e7e063ce218023280fab50d/src/output.py#L95\nand neovim has an entry. does that not work? can you output ~/.fpp/.fpp.sh?\n. certainly! Would be much appreciated :) cc @pallavagarwal07 just as an fyi. i shoulda double checked in diff review though\n. hrm, might be version dependent then? @jeffkile what version are you running?\n. Have you outputted your $FPP_EDITOR or $VISUAL? we use those environment variables before falling back to $EDITOR. that might be the difference in behavior\nor output the ~/.fpp/.fpp.sh and paste it here so we can compare exactly\n. closing out since latest version supports the mapping we have\n. Ahhhhh hrm this might be tricky @dfordivam since we launch the vim process within another shell script here:\nhttps://github.com/facebook/PathPicker/blob/master/fpp#L50\nits actually two levels deep since we generate the fpp.sh.\nim not an expert in process suspension but i dont think we can support this easily, since im assuming processes launched from a shell script need to finish when the script exits.\nwhat workflow are you trying to support? you can also run commands from within vim (small consolation i know)\n. (closing out for now since i dont think this is technically possible to support, but curious to hear back)\n. Ahhhh yeah I see -- I usually just go with multiple tabs rather than suspending and resuming vim. interesting workflow though! sorry we couldn't help out, but sounds like you're getting some kind of use out of it\n. Good news! We are adding a flag for this in #222\n. sometimes i wish python had switch statements... thanks for the awesome PR :+1: . @jeffkile is working on changing the neovim mapping over in #193 \n. Yeah I think I was just being overly cautious here, seems fine to me. thanks for the negative LOC PR :+1: \ni think it'd be worth checking in neovim, but it does seem odd to throw for that combination\n. @frantic do you mind taking a look at this? #186 has the context (just look at the tail end)\n. @frantic :P\n. Hrm never seen that before, but yeah it looks like it cant even start up python tbh. \nwe just use the python command:\nhttps://github.com/facebook/PathPicker/blob/master/fpp#L23\ncan you try a simple script instead that opens up python and executes hello world or something?\n. closing out as I think this is mainly a virtualenv thing, but curious to hear back\n. Yeah thats a total yak shaving moment. Good luck doing down the rabbit hole!\n. @keneanung can you attach the input you are piping into fpp and the directory structure you are using? and where you are running it from?\nRunning with --nfc turns off a lot of our filesystem validation, so thats why partial matches and such show up (since its all guesswork)\n. Ah yeah, I'm certain this is just because our file extensions dont have ~ as an option and the spaces regex doesnt allow commas. I think I can probably open up the regexes though and not break our backwards compatibility, let me draft this up when I have free time next (Wednesday)\n. Alright threw this up! thanks to test coverage I can pretty confidently merge this :tada: \nno umlaut support yet, thats a utf8 thing with python2.7 that slows us down there :(\n. Ah yeah I'm sure thats the issue -- we support python 3 and run the tests in python3, but it doesnt cover 100% of the use cases.\n@nvictor do you mind throwing up the PR for that? Ill happily merge it ASAP :)\n. Yeah it'd be great! Closing out for now since this is mainly a feature request but ill keep it in mind for an intern project or something\n. Lets do it! We should probably also remove the logic that defers to either zsh or bash over in fpp\n. https://github.com/facebook/PathPicker/blob/master/fpp#L47\nWant to add a case for fish there and check if it works? thanks again @benmccormick for your contribution! After we get this settled I'll probably add a new release\n. > As is, with this fix, everything should work fine and I can use fish scripting commands if I want.\nAh great, thanks for the explanation then. Also sorry for the delay, was some craziness prepping for black friday over at FB.\n209 mentions formally supporting fish as a shell. do you think adding an if case condition for fish would be worthwhile? the you could run fishy commands right?\n. Yeah, this is unfortunately due to the fact that we launch the editor inside a subshell and attach it to tty directly. hence you cant simply suspend the editor process, since it belongs in that sub-shell process :(\nI think there was a similar issue to this earlier -- theres no real way to solve this i dont think, especially with supporting both zsh and bash.\nthanks for using FPP though! Lemme know if you have ideas (im not an expert on launching processes and separating them from the script being run, but also still blocking on them before exiting)\n. Good news @Firehed  we are adding a flag for this in #222\n. What would the command formatting be? right now we default to vim -O $files. you want to drop the -O?\nwe can make an env variable for this\n. on the way!\n. Awesome! thanks\n. Do you mean just in the README? theres some progress over on 205 in terms of potentially removing one of the conditions from the bash script, but we wont likely be able to run fish-y commands with fpp anytime soon.\nBut if you just mean in the README it'd be quite easy! Would have accepted the PR for that\n. Sweet. I just made a new release and uploaded to brew so ill update the readme\n. This is absolutely awesome! Really appreciate the thorough test coverage and cleanup along the way @gsheld. I'll take a deeper look tomorrow with some nits, but this can likely go in with minimal change.\nI agree that combining with a preconfigured command mode is nice. maybe provide a few example commands for git to isolate the bookmarks? for example, mercurial outputs something like:\n[pcottle:~/www:(explainNoMethods)]$ hg book\n   betterStats.preamend      1095557:c0e02bfc109b\n   debugSF                   1098767:f13654075612\n   emailRoundups             1095558:6cd95011bcf3\n * explainNoMethods          1102007:d620f805c859\nso if we matched on all text, you couldn't pipe it straight into hg update. git branch is a bit better but technically the currently checked out branch will have the * :P\nalso might have been nice to splice the file => path codemod into another PR, but nbd. im pretty lazy when interchanging the two, even though they arent technically equivalent\n. Alright more or less looked over everything -- some inline suggestions and nits that you can do in a followup (ideally), but this can go in! thanks again\n. Looks great! Ill try to add some UI tests after this goes in\n. Boom! now with test coverage too. thanks again @gsheld \n. ```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:allowDisableSplit]$ ./scripts/buildAndTest.sh \nPep8 Compliant!\nTested 11 cases for all-input matching.\n.Tested 58 cases for file fuzz.\n.Tested 58 cases.\n.Tested 7 dir cases.\n.Tested 53 resolvable cases.\n.Tested unresolvable case.\n.\n\nRan 6 tests in 0.114s\nOK\n.\n\nRan 1 test in 1.321s\nOK\nTests passed!\n```\n. passed locally so I'm assuming this is good\n. Hey @joanna-chen ! Thanks for the PR but I actually rely on the pep8 formatting to decide all of this kind of stuff. If I merge this we actually end up not being pep8 compliant:\n```\npcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ autopep8 -i -r ./src/\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ git status\nHEAD detached at origin/pr/215\nChanges not staged for commit:\n  (use \"git add ...\" to update what will be committed)\n  (use \"git checkout -- ...\" to discard changes in working directory)\nmodified:   src/format.py\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ git diff\ndiff --git a/src/format.py b/src/format.py\nindex 2535817..0f47159 100644\n--- a/src/format.py\n+++ b/src/format.py\n@@ -57,7 +57,8 @@ class LineMatch(object):\n         (path, num, matches) = result\n     self.originalPath = path\n\n\nself.path = path if allInput else parse.prependDir(path, withFileInspection=validateFileExists)\nself.path = path if allInput else parse.prependDir(\npath, withFileInspection=validateFileExists)\n         self.num = num line = str(self.formattedLine)\n\n```\n\n\nand that would fatal some of the scripts we have, so i wont merge this for now. thanks for the suggestion though! i highly recommend autopep8\n. Ah yes, because you might not have permissions :) great point! merging now, thanks a bunch\n. Hey @maikelmeyers,\nCan you describe your use case more? Fzf already allows selecting arbitrary input so I'm curious what the filter step on fpp would be used for.\nHistorically we've tried to stay away from the fzf workflow since they do such a better job at it :)\n. > the pre-filter filters all lines from the input which contain a file path (i.e. grep output).\nwould it simply output the lines that have a filepath match (as they came in) or would it output specifically the path in isolation? like say for:\n```\nasd dsa ~/real/path/to/file.py\noutput this?\nasd dsa ~/real/path/to/file.py\nor this?\n/home/pcottle/real/path/to/file.py\n```\nthis might be easy to do depending on the workflow, but i think integrating fzf as the selector would be quite difficult :-/\n. No worries -- helpful to hear your use case anyways :) glad you got unblocked!\n. and yeah with the \"command\" argument you can pass to fpp, you can wrap it easily in custom functionality\n. Thanks a bunch! @pallavagarwal07 do you mind just taking a quick sanity check look? We have pallavagarwal07 to thank for all the debian support, even if it wasn't 100% perfect :)\nThe explanation and code seems straightforward here though, so think this should be safe to merge.\n. Can you attack the full input to fpp somewhere in a gist, and maybe your directory structure?\nits expected we can catch spaces in names if they have a leading slash, but not if they are in the current directory (no leading slash)\n. Yeah, this is expected :( since the folder doesnt start with a leading slash, we can't recognize it. if we had to do all combinations of spaces + words before every input we'd quickly have a big performance problem.\nif we had something like\n./Spaced Project/a.txt\nthat would match it, but git outputs its paths in the way it chooses. sorry man!\n. thanks. double the commit points for a single change :)\n. Thanks for putting this up @ngavalas ! I'll go find the other issue we had with interactive vim mode and let them know we are adding a flag.\nTravis CI seems to have caught something:\nTraceback (most recent call last):\n  File \"testScreen.py\", line 15, in <module>\n    import screenTestRunner\n  File \"/home/travis/build/facebook/PathPicker/src/__tests__/screenTestRunner.py\", line 16, in <module>\n    import choose\n  File \"../choose.py\", line 17, in <module>\n    import screenControl\n  File \"../screenControl.py\", line 13, in <module>\n    import processInput\n  File \"../processInput.py\", line 19, in <module>\n    from usageStrings import USAGE_STR\n  File \"../usageStrings.py\", line 9, in <module>\n    from screenFlags import ScreenFlags\n  File \"../screenFlags.py\", line 49\n    return self.args.non_interactive\n                                   ^\nTabError: inconsistent use of tabs and spaces in indentation\nTests failed :*(\nThe command \"./scripts/buildAndTest.sh\" exited with 1.\ncan you try fixing it up and running the script again locally?\n. :tada: !! And our contributor count goes up by one haha. feel free to send a diff for the internal version so you dont have to wait for me to sync it over\n. > Is there a reason or some background you can point me to on why fpp doesn't just exec the process?\nI'm not a bashrc expert at all, but if you just blindly \"exec\" the process from either python or the wrapper bash script, it doesnt attach to TTY so your editor runs in the background with no one interacting with it.\nthe reason why we have all these hacks is because we want to go from:\n- piped input\n- interactive screen (TTY)\n- then either a straight command to execute OR another interactive screen (vim emacs or whatever)\n. Yeah, this is tricky since we the file both does not begin with a character and has no extension :-/ the .DS_STORE files are supposed to be ignored via most git configs btw, I would heavily suggest doing that\ni can add a test to match the examples/.DS_STORE result, but its a bit harder to match ./examples/.DS_STORE for a variety of reasons.\n. woo! got ./examples/.DS_STORE also :) will close this when i merge the PR\n. (also youll need to install from master once this gets merged :P )\n. > I know cleanup PR might not always be welcomed, but my editor flash red, so it annoyed me. \nnot at all, really appreciate it! I dont have any local linting set up, and I wish I did :P\n. Can you try adding some fish detection to this line:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L173\n? Seems like zsh doesnt mind that block, but fish does\n. I think so! Sorry for not updating sooner\n. Thanks for the fix!!\n. AHhhhh I swear I googled this and never got it to work. thanks so much, especially for adding the test! :tada: \n. i might whip up a release in a few days, since this is pretty nice to have\n. New release is live!\nhttps://github.com/Homebrew/homebrew-core/pull/370\n. \ud83c\udf89 \ud83d\udc4d  sounds great to me\n. @8v060htwyc can you clarify what this PR does?\n. Going to close out since its not clear what this does. new homebrew release is at:\nhttps://github.com/Homebrew/homebrew-core/pull/370\n. Can we add the fix I outlined above? I think just modifying the python is sufficient!\n. > Probably an overabundance of caution (this is actually my first PR ever).\nNo worries at all, welcome to the club! Glad you chose PathPicker with the honor \ud83d\udc4d \nThis looks great now, i'll go ahead and merge. Not sure when our next release is, we kinda just had one recently, but it will go out with the next release!\n. oooh yeah of course, i knew we probably referenced this directory elsewhere. sorry that merge was so half-baked @edentsai but thanks for putting up the fix!!\n. Woah this is very cool! \ud83d\udc4d  \ud83c\udf89  Do you think we should leave this as an actual command, or do you think its performant enough to just do it on hover?\n\ntestScreenInputs test failed, presumably because the sidebar options below mine aren't where the tests expect them to be.\n\nAh yeah, you'll have to regenerate a few tests. Honestly the easiest way is to just delete the files that fail, since if they don't exist, on the first run it will write out the expected output.\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src/tests:master]$ rm ./expected/simpleLoadAndQuit.txt \n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src/tests:master]$ python testScreen.py \nCould not find file ./expected/simpleLoadAndQuit.txt so outputting...\nF\n======================================================================\nFAIL: testScreenInputs (main.TestScreenLogic)\n\nTraceback (most recent call last):\n  File \"testScreen.py\", line 202, in testScreenInputs\n    self.compareToExpected(testCase, testName, screenData)\n  File \"testScreen.py\", line 212, in compareToExpected\n    self.compareLinesToExpected(testName, actualLines)\n  File \"testScreen.py\", line 229, in compareLinesToExpected\n    self.outputIfNotFile(testName, '\\n'.join(actualLines))\n  File \"testScreen.py\", line 247, in outputIfNotFile\n    'File outputted, please inspect %s for correctness' % expectedFile)\nAssertionError: File outputted, please inspect ./expected/simpleLoadAndQuit.txt for correctness\n\nRan 1 test in 0.034s\nFAILED (failures=1)\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src/tests:master]$ python testScreen.py \nTested simpleLoadAndQuit \n...\nTested longListEndKey \n.\n\nRan 1 test in 1.379s\nOK\n```\n. > Calling on hover is a good idea--only worry would be performance of getLengthInLines on files with a lot of lines as that particular function scales linearly with the size of the file, while the others should be relatively constant.\nhrmmm true. yeah we can leave it as a command then. that way we could add extra rows without performance considerations, maybe even git status one day!\nSounds good! thanks for the PR\n. Alright super close @rjdean123 ! Do you mind making the changes to clearSegment, testing with an extra long line width to see what off-screen-printing produces, and then trying to address the other comments if they arent too hard? I think this is a case where id be fine \"shelling-out\" to get some of the outputs of these commands, like the size of the file in human-readable terms (as long as its a bash builtin).\nanyways excited to merge this after an update :)\n. \ud83c\udf89  \ud83c\udf89  \ud83c\udf89  great feature addition @rjdean123 ! merged this all in. as extra credit do you want to try submitting a test case for this? if you go modify src/__tests__/testScreen.py you could add a test case like:\n'name': 'selectDownSelectInverse',\n    'inputs': ['f', 'j', 'f', 'A'],\n}, {\n    'name': 'testDescribeFile',\n    'inputs': ['d'],\n    'input': 'gitDiffSomeExist.txt',\n    'validateFileExists': True,\n    'withAttributes': True,\nas long as its a real file it should all work and we can get a test file to assert this all works\nthen ill get off my butt and add a new release soon...\n. its almostttt what we want -- the issue is that since the screen is by default narrow, the sidebar doesnt show, so your command output doesnt show. thats what im trying to get test coverage over\ni think you want to add\n'screenConfig': {\n         'maxX': 201,\n         'maxY': 40\n     },\nto your test case. then delete the file and re-run the test and make sure the output file as your command description area\n. Oh dangit yeah, that's tricky. That must mean that doing the ls and cat commands on the file ends up recording it as accessed.\nIf that's the case, is it worth having that line in the output? Its basically always going to be the current day / second if describing the file accesses it, right?\nFrom: Ryan Dean notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Saturday, July 23, 2016 at 2:17 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, Comment comment@noreply.github.com\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\u0002amp\u0003#109;\u0002amp\u0003#101;\u0002amp\u0003#110;\u0002amp\u0003#116;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] added test case for describe file feature (#234)\ngah, failing because the 'last accessed' line is different each run, will look more into this when I get some time tomorrow\n\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/pull/234#issuecomment-234740963, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn_08xZn3KwSNB0R3TQpbdLCW_gFKks5qYoUFgaJpZM4JTRpj.\n. ```\nTraceback (most recent call last):\n  File \"testScreen.py\", line 209, in testScreenInputs\n    allInput=('-ai' in args or '--all-input' in args),\n  File \"/home/travis/build/facebook/PathPicker/src/tests/screenTestRunner.py\", line 62, in getRowsFromScreenRun\n    choose.doProgram(screen, flags, CursesForTest(), lineObjs)\n  File \"../choose.py\", line 42, in doProgram\n    screen.control()\n  File \"../screenControl.py\", line 359, in control\n    self.processInput(inKey)\n  File \"../screenControl.py\", line 443, in processInput\n    self.describeFile()\n  File \"../screenControl.py\", line 349, in describeFile\n    self.helperChrome.outputDescription(self.lineMatches[self.hoverIndex])\n  File \"../screenControl.py\", line 77, in outputDescription\n    self.outputDescriptionPane(lineObj)\n  File \"../screenControl.py\", line 122, in outputDescriptionPane\n    lineObj.getOwnerUser(),\n  File \"../format.py\", line 130, in getOwnerUser\n    output = subprocess.check_output(bashCommand.split())\nAttributeError: 'module' object has no attribute 'check_output'\n\nRan 1 test in 0.912s\nFAILED (errors=1)\nTests failed :*(\n```\nhrm, seems like the tests fail now. mind checking? so close!\n. ooooh ugh i know why. its because the files are \"new\" when they get slurped over to travis and probably have different ownerships or whatever, so the expected values are different\nthere are two options:\n- use dependency injection / mocking to stub out the data returned. thats harder probably\n- add a simple ignoreLines: parameter to the test config that just ignores comparing the passed in lines:\nignoreLines: [45, 49, 51, 53]\nthat way we still execute the code, we just dont care what those specific lines are -- since they will change all the time\nsorry about the trouble here! i just want to double check your code is executing and tested -- even if we dont compare the output, getting it executing means if it throws a fatal we will catch that.\nand it sounds like it caught the 2.7/3.0 issue already :)\n. No worries!\nFrom: Ryan Dean notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Wednesday, August 31, 2016 at 9:24 AM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, Comment comment@noreply.github.com\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\u0002amp\u0003#109;\u0002amp\u0003#101;\u0002amp\u0003#110;\u0002amp\u0003#116;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] added test case for describe file feature (#234)\napologies this is taking so long, got quite busy at the end of the summer/start of the new year. should be good to work on this this weekend.\n\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/pull/234#issuecomment-243819492, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn3Hm1BwO8enr_6y_ZQ1-zBg4O8eFks5qlaqggaJpZM4JTRpj.\n. closing out since its stale\n. You'd also lose all aliases as well. Are you ok with that?\n. Ok cool! We can add this to the ever-growing list of random environment variables that tweak functionality :P\nDo you want to send the PR or should I? Should be fairly easy to whip up\n. https://github.com/facebook/PathPicker/blob/master/src/output.py#L88 is a good example, as well as\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L120\nyou probably want to modify this logic:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L173\nlemme know if you have other q's!\n. bit stale, closing this out. Can you attach a picture? id be open to changing it, curious how much better it looks\n. Hrm, so we use the curses API to do all of our screen printing and curses only has these colors:\n```\n    COLOR_BLACK   0\n    COLOR_RED     1\n    COLOR_GREEN   2\n    COLOR_YELLOW  3\n    COLOR_BLUE    4\n    COLOR_MAGENTA 5\n    COLOR_CYAN    6\n    COLOR_WHITE   7\n\n```\nbut we can change the rgb values of a given color. can you provide the rgb for bright white?\n. sorry this sat in my queue for a while! had some PTO. \n\nHardcoding RGB to \"maximum white\" might be too outstanding in case of a low-contrast color scheme.\n\nso you think we shouldnt change the RGB for the default white we use? \nare you looking to increase contrast across all the text that is displayed or simply the current selection?\n. youre right after testing this out it is much better! just shipped the change and re-generated all the tests with attribute mapping \ud83c\udf89 \n. Can you attach your fpp version? We had an issue with an exception getting thrown in some of the older versions that prevented navigation\n. worked fine for me in normal terminal:\n\nlet me try iterm\n. yeah worked again :-/\n\ndoes entering command mode work perhaps? if you control-c when it hangs, do you get a stack?\n. oh nowwwww i can repro. im guessing this has to do with the amount of prepended text in the match lines. let me try to investigate tmr during a normal workday\n. alright got a call stack! its an infinite loop in updateDecoratedMatch:\n```\nTraceback (most recent call last):\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 100, in \n    curses.wrapper(lambda x: doProgram(x, flags))\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/curses/wrapper.py\", line 43, in wrapper\n    return func(stdscr, args, *kwds)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 100, in \n    curses.wrapper(lambda x: doProgram(x, flags))\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 42, in doProgram\n    screen.control()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/screenControl.py\", line 362, in control\n    self.processDirty()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/screenControl.py\", line 602, in processDirty\n    self.lineObjs[index].output(self.colorPrinter)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/format.py\", line 269, in output\n    self.updateDecoratedMatch(maxLen=spaceForPrinting)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/format.py\", line 231, in updateDecoratedMatch\n```\n. Woohoo!! Fixed the bug and added test coverage \ud83c\udf89 \ud83c\udf89 \ud83c\udf89 . Thanks again for the bug report @ptzz and insisting that there was an issue when i couldnt repro at first :P\nturns out it was a pretty brutal but easy to make mistake around forgetting to take into account the prepended text when figuring out the max length. most inputs dont have long prepends which is why it wasnt easy to repro at first\n. Lets merge into #235 . I gave a few links to code in there if you want to take a stab at putting up the PR :)\nI agree that some bashrcs can be quite heavy, but when most people used command mode they assumed their aliases would work. so we developed for that scenario\n. I meant the variable name, exist_status instead of exit_status.\nDo you mind updating the PR with that commit and we can put it through the travis build again? #240  should have solved the build and if its green I'll merge it.\nThanks again @weakish for the PR and for teaching me about shells\n. Great! Thanks for the contribution \ud83c\udf89 and the build is passing too\n. Thank you!! Was wondering why it passed locally but the build was failing\n\ud83c\udf89 \ud83c\udf89 \n. Alright cool we can boldify these colors as well!\nHowever if you look at:\nhttps://github.com/facebook/PathPicker/commit/2c6e55a3f40c8d3e540af7184d57033b387600aa\nI had to add an expected mapping for that new color attribute for the screen tests, and then regen a lot of the tests since their output has \"changed\" to some degree. its a bit of a pain so I'll go ahead and do it for you, but let me know if you want to get added as a contributor with some other change\n. You're totally right -- gah. It's hard to get test coverage in this area since it relates to the actual bash execution.\nwill fix in a moment, thanks for the report!\n. Ah yes, this is leftover from when FPP was developed internally at Facebook. We have some code search / grepping tools that return paths that are absolute but without the preceding slash, and all of our repos are mounted off of our homedir like:\n[pcottle:~/www:(changeFoo)]$ pwd\n/home/pcottle/www\nhence, thats why the hack is there. we have a few thousand users internally so im hesitant to remove it, but you could just drop those two lines from your local version if you want.\nor we could add yet another env variable that turns it off :P\n. Can you try with fpp -nfc? its likely because of that top level www match\n. Try removing the www here:\nhttps://github.com/facebook/PathPicker/blob/master/src/repos.py#L16\n. resolved in #246 246\n. oh whoops, this wasnt the home dir one.\nbut related. removing www from that array will fix it\n. Can we split this out as two different PR's? One just adds that D key and the other changes the vim functionality right?\n. split it up -- i cant split it from my end :) thx for the contributions though!\n. closing out -- looking forward to the split version!\n. lol yet another env variable! :P thanks for adding the fix though \u221a\n. Haha nah its fine, I just meant that theres no good configuration file or anything so we just keep adding boolean ones :P nbd\nFrom: Matteo Landi notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Friday, September 23, 2016 at 3:21 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, Mention mention@noreply.github.com\u0002amp\u0003#109;\u0002amp\u0003#101;\u0002amp\u0003#110;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] Add support for disabling prepending home with slash (#246)\n@pcottlehttps://github.com/pcottle Did I take you too seriously when you proposed to fix it with a new env variable? Ooops :P\n\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/pull/246#issuecomment-249316251, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn1WCADG0I4F8-obtX-lIoqW4kUpyks5qtFECgaJpZM4KEYfM.\n. yeah this is expected, since its not part of our file name regex. do you have a use case in mind?\n. Good catch! I must have been lazy and just copied the shortcut that renders for me. thx for the issue -- must have been incorrect for years :O\n. Yeah, that's why its an easy mistake to make. Tested it \"myself\" but not a good test plan clearly\nFrom: nizamsp notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Tuesday, October 4, 2016 at 1:45 AM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, State change state_change@noreply.github.com\u0002amp\u0003#115;\u0002amp\u0003#116;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#101;\u0002amp\u0003#95;\u0002amp\u0003#99;\u0002amp\u0003#104;\u0002amp\u0003#97;\u0002amp\u0003#110;\u0002amp\u0003#103;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] git clone link is wrong in the readme file (#248)\nThank you! I was also wondering how come a 3021 star rated repo had this bug. I think you have reached only half of the potential users :)\nThe clone link would have worked for you since you own the repo.\n\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/issues/248#issuecomment-251329886, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn7iQFkUMTQ_tYLDHS2zicEm8Nq97ks5qwhItgaJpZM4KM1Sn.\n. can you give me a repro of the input you got where this happened? how many files are we talking?\nI think if you pipe in 1,000 files it might just hang for a while but im not sure\n. Ah yeah, I can repro. its likely due to the fact that it tries to render the selection and it goes off screen\njustasec\n. Fixed! \ud83c\udf89  and with some test coverage -- sorry this was clowny, I should have anticipated hundreds (or really just more than the screen height) of files would get added \n. Gah, so I'm trying to change this but I only get the \"edit\" link for personal repos:\n\nlet me ping other engineers who might have the right permissions to edit the repo description\n. Think it's fixed!\npcottle:~/Desktop:]$ curl https://api.github.com/repos/facebook/PathPicker > foo.json\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  6433  100  6433    0     0   8721      0 --:--:-- --:--:-- --:--:--  8716\n[pcottle:~/Desktop:]$ cat foo.json | jq .description\n\"PathPicker accepts a wide range of input -- output from git commands, grep results, searches -- pretty much anything.After parsing the input, PathPicker presents you with a nice UI to select which files you're interested in. After that you can open them in your favorite editor or execute arbitrary commands.\"\nbtw whats that http command you have?\n. I agree! However I don't even know where we would get started with this -- we have a lot of dependencies on bash/other shells for executing the script, and python curses doesn't work on windows either :-/\nclosing this out since I don't think we'd reasonably get to it, but it'd be great to see someone spiritually implement the same over in windows\n. \ud83c\udf89 \ud83c\udf89 \ud83d\udc4d \nthanks a ton! this is great, commented inline on my guess at how this even worked beforehand but curious if you have any theories.\n. Hrm, most people at work I talk to prefer columns rather than tabs (just because its immediately clear that $x files are open). And my other worry is that this has been the default behavior for over a year, and changing in this release would be a bit thrashy\nwould you be open to putting this behind some kind of system flag? . This is all greek to me; I trust the contributor community knows more than me :) thanks for the PR!. (next time we have a release this will be reflected). [pcottle:~/Desktop:]$ tar -czf crisis_launches.xlsx ./practice/ worked!. whoops i overwrote my excel file lol. but it still works. hrm @Boruch-Baum what do you mean? Forgive me but i have zero experience with *nix distributions, its all been written by external contributors.\nthe tar file is there for me. for debian we have a separate script that makes the release. Sorry for the delay -- was offline for the holidays. Did you clone the repository with git or just download a zip? I believe the debian script assumes its in a git repository and tries to clean up after itself. it shouldnt delete its own script though -- thats probably an issue with one of the assumptions breaking. Can you attach a screenshot? We often \"shorten\" the path with three dots so the full thing can be displayed in the terminal, and we assume the end of the path is more important than the front. OOoh yeah, this is actually upstream of our code and we can't do anything. Git for whatever reason checks if its getting piped into a stdin and decides to (not-so-)helpfully shorten and prepend the paths, and then we can't open them\n--numstat is the way to go. thanks @devisnik  for the fix. This PR doesn't appear to change any files/do anything? Any context you want to add @vikramojha89 ?. What shell were you actually using? I'm on 10.12.3. We delegate to shell only if we think we are in a bash or zsh environment\ncan you check what $BASH or $ZSH_NAME were outputting?. yeah this is quite odd, we can add in a hack to fix this but i'm just deciding the best course of action.\nshould we check $SHELL exists and, if so, then call it? what if they fix shell to resolve to /usr/bin/false? then the check becomes true and we have the same problem.\nshould we perhaps instead just check explicitly for $BASH and call $BASH for that case, and then shell for ZSH name?\nI'm leaning towards the latter but curious what you think.. comparing exactly to /bin/false seems odd -- could we instead do a check that shell exists as a file/executable?\nyoull have to forgive me for asking but my bash is really weak, i always have to google \"how to determine if file exists in bash\".... [pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nUsing previous input piped to fpp...\nnothing to do!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ SHELL='/bin/false'\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nUsing previous input piped to fpp...\nYour SHELL bash variable /bin/false does not exist, please export it explicitly\nnothing to do!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ SHELL='/bin/bash'\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nUsing previous input piped to fpp...\nnothing to do!\nalright should be fixed now! when installed off master. No problem!\nFrom: Heath Borders notifications@github.com\nReply-To: facebook/PathPicker reply@reply.github.com\nDate: Tuesday, April 4, 2017 at 5:45 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\nCc: Peter Cottle pcottle@fb.com, State change state_change@noreply.github.com\nSubject: Re: [facebook/PathPicker] Command fails when on OS X 10.12.4 when $SHELL isn't defined (#259)\nNice! Thanks!\n\u2014\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/issues/259#issuecomment-291692701, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRnx1eG673_p8uikYtmZpooe2qZXWZks5rsuQhgaJpZM4MsPZo.\n. can you paste your fpp --version? we fixed a few things relating to screen sizes recently. Ah yes I can repro, really has to get quite short height-wise to reproduce this :) . Thanks for the report @saveriomiroddi ! Should be fixed now, was actually quite simple. Yep! This was assuming that the lineObjs was always greater than the screen height which, as you found, is not a valid assumption :)\nthanks for the report! \ud83c\udf89  easy fix. thanks so much for taking a stab at this! cool to see people put up PR's for ideas :)\n\nI've noticed that just running scripts/buildAndTest.sh on my system (as instructed in CONTRIBUTING.md) is not enough - it needs to be run on all the Python supported versions.\n\nyeah so its a bit annoying, since it just uses the python in the path variable. i have python 3.something installed as python3 and just hack the script to use that instead (or set a higher priority path variable that uses that)\ni see that you extend the command display interface to show each command that you have binded. a few ideas:\n- this might not scale if people add dozens of commands, and since this is a power user feature anyways, why not perhaps just dont change the display at all?\n- related to that, an alternative would be to have a single command that shows the list of binded commands (full screen) that you can then exit out of with a single keypress.\nbut yeah seems like we need to change to configparser in python 3+:\nOK\nTraceback (most recent call last):\n  File \"testScreen.py\", line 15, in <module>\n    import screenTestRunner\n  File \"/home/travis/build/facebook/PathPicker/src/__tests__/screenTestRunner.py\", line 16, in <module>\n    import choose\n  File \"../choose.py\", line 20, in <module>\n    from keyBindings import KeyBindings\n  File \"../keyBindings.py\", line 2, in <module>\n    import ConfigParser\nImportError: No module named 'ConfigParser'\nTests failed :*(\nhttps://docs.python.org/3/library/configparser.html\n. > OOOK, I've commented everything. I will update the PR with the proposed changes. It will take some time because I've never programmed in Python, and I will need to maintain a good quality :-) So please bear with me :-)\nno problem at all!! this is a great first stab if you've never programmed in python; my apologies that you have to handle both python2 and python3, and the APIs are slightly different. maybe now you know why the transition to 3 has been stalled for years :P\ngood luck with the update, and yeah adding some tests would be nice but if its overly difficult I wouldnt stress about it. I can do some manual testing locally, and it seems like the codepath doesnt really change if you dont have this config file.\nrelated to that -- can we only change the display of the hotkey bindings if you have a config file in place? that will prevent you from having to modify a bunch of test files. > Before removing the display code with the current commit, nothing additional (compared to a configuration without bindings) was displayed when there were no bindings defined - am I misunderstanding?\nnope, that comment isnt relevant anymore if you dont display the bindings at all :) I was just suggesting two options -- dont show the bindings at all, or only show them if you have a config file (and dont include a config file in the test cases).\nit seemed like your original version of this PR added a bindings file for all the test cases, so all the test cases would have to be updated. but thats no longer relevant if we hide them :). hrm python test*.py fails in the unittest console:\nAttributeError: 'module' object has no attribute 'testParsing'\nguess that was the only polish I was going to add to this, looks great! thanks for the PR @smiroddi \u221a. Yeah the more appropriate thing here is to perhaps just use history + eval with something like:\neval \"$(fc -ln | tail -2 | head -1)\" | fpp\nthis worked for me, for example doing:\n```\n\nls -la\neval \"$(fc -ln | tail -2 | head -1)\" | fpp\n```\nand I was able to get the ls output piped into fpp. with a short alias that might make for a nice solution\n\nbut I do think having it re-execute as the default behavior is a bit too aggressive, especially when the last command could have been something destructive!\nthanks for dropping by with the feedback though. \ncan you clarify? ls -l | fpp works fine for me. Ooooh i see what you mean. Yeah sadly we only support one match per line, it'd be a huge overhaul to support multiple matches in a given line. Sadly this is probably out of scope, but you could try splitting on '->' in this case and grabbing the first result before piping to fpp.... Thanks for the PR @bgwines ! Do you have example workflow where this is helpful? Its the first I've had a request for -a so I'm just curious :P\nThis seems pretty clean though, think it's fine to merge even without a test. I'll try to add one though. Whoops, didn't make a PR for that but just pushed to master. But that should add a test for this :). Ah cool, thanks for the extra info. And yeah we already have the \u201cA\u201d keystroke to select everything, but if you\u2019re using FPP as part of a pipeline then eliminating keystrokes is always nice :P\nHave a nice weekend too!\nFrom: Brett Wines notifications@github.com\nReply-To: facebook/PathPicker reply@reply.github.com\nDate: Sunday, September 3, 2017 at 1:25 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\nCc: Peter Cottle pcottle@fb.com, Mention mention@noreply.github.com\nSubject: Re: [facebook/PathPicker] Recognize -a cmd-line arg (#268)\n@pcottlehttps://github.com/pcottle, thanks so much! Yeah; my use-case is the following: when switching between branches I want to open all the files that were \"relevant\" last time I was on it, so I can more easily resume that work. An approximation for that set of files is the files that were modified in the last commit on that branch, so I would run git show --name-only | fpp -c subl, then cmd-A, then enter. With this commit I can pass in the -a flag (I tried running it with -ni -ac subl, which would be even better because it cuts out another keystroke, but it didn't seem to work for some reason; perhaps I'm misunderstanding -ni).\nIn an ideal world I could add some sort of hook to get Sublime Text to recognize that I switched branches and have it run this automatically; I should look into that :P\n(I think Sublime Text has a concept of \"projects\" but I don't think it's perfectly suited to this workflow(?) based on preliminary fooling-around and this change is editor-agnostic anyway)\nHave a nice weekend!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/pull/268#issuecomment-326818628, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn-d4A1KgVxI-RjCIddNIRXx_CzZIks5seuEagaJpZM4PLFMi.\n. Hrm, this feels more like a downstream issue than upstream solvable by fpp.\nwe could try to guess which editor you have and how many files they support, but that could get out of sync with the version of vim or plugins you have (and we would treat all of vim the same)\nwe could detect an error code and then try again but that'd have to be on the bash level, not inside python where the command formatting happens.\nI don't see a super easy way of supporting this, but happy to review a PR or something more concrete! gonna close out in the meantime. (closing for now but have it on record)\n. Awesome! Do you think its worth adding to the usage bar as well? Bit worried about space....\n. > For now I think it's okay to leave it undocumented, people who got used to less/vi style g/G will be pleasantly surprised :)\nYeah I agree -- hopefully we don't go too far down the vim emulation rabbit hole\n. Yeah this is unfortunately an issue with git's output when it (thinks) there is not much space on the terminal. It truncates the path to .../ (notice the three dots) which basically blasts away all information about the path.\n@jingc ran into this as well, not sure what we can do here\n. Yeah I checked the man pages, --numstat should not abbreviate the path names;\n--numstat\n           Similar to --stat, but shows number of added and deleted lines in decimal notation and pathname without abbreviation, to make it\n           more machine friendly. For binary files, outputs two - instead of saying 0 0.\nClosing out since we can't do much here besides suggest --numstat if we detect a .../ pathname, and I'd be worried about that being noisy. Do you think that's worth adding?\n. Yeah lets at least do the readme thing. I'll see what I can do in the meantime though, since it is pretty confusing. ideally we actually output an error...\n. getting there...\n\n. \n\n^^ alright that should be a huge improvement\n. What version of python are you running? python --version. It's likely a Python 3.0 compatibility issue\n. PR #15 helped this a bit as well in the meantime -- @dannguyen @vimeitor have either of you tried that yet?\nLet me see what the python 2to3 converter says...\n. Hrm, this wouldn't work for a lot of mac setups that don't have the python2 command (since python 2.7 is the default) so this can't go in as-is\nDo we want to instead handle this in Issue #4? If we support both 3 and 2, we could get the best of both worlds.\n. Yeah lets move this into #83. We can likely put the filesystem logic as an experimental flag which should mitigate any performance issues we might encounter. I do think it's the right future of the project though, since then we can match on all sorts of things and eliminate a ton of false positives\n. :tada: :tada: :tada: Nice! Didn't realize curses had this, thanks for the sweet pull!\n. definitely down for this line:\n+BASEDIR=$(cd \"$BASEDIR\" && pwd)\nhowever i remember having to append the slashes since the brew installation has multiple hops. Let me get some command line output\n. [pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ git diff HEAD~10 --stat | fpp\nWHEREAMI is /usr/local/bin/../Cellar/fpp/0.5.3/bin/fpp\nWHEREAMI is /usr/local/bin/../Cellar/fpp/0.5.3/bin/../libexec/fpp\nnothing to do!\nYeah, see the tricky thing is that homebrew installs relative symbolic links, so switching to your first change unfortunately breaks:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ git diff HEAD~10 --stat | fpp\nWHEREAMI is ../Cellar/fpp/0.5.3/bin/fpp\n/usr/local/bin/fpp: line 19: cd: ../Cellar/fpp/0.5.3/bin: No such file or directory\npython: can't open file '/src/processInput.py': [Errno 2] No such file or directory\npython: can't open file '/src/choose.py': [Errno 2] No such file or directory\nnothing to do!\n. Do you mind updating with just the BASEDIR=$(cd \"$BASEDIR\" && pwd) change? ill happily accept that! that was just my shortsightedness / bash inexperience\n. @n06 I actually think this got solved in #16 since we have better symbolic link resolution everywhere. do you mind checking if that works for you? closing out in the meantime since this is on a stale rev\n. Oh this should be easy, justasec\n. [pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ ls -l ~/Library/LaunchAgents/*.plist | sed -e 's#/Users/pcottle/#~/#g'\n-rw-r--r--  1 pcottle  THEFACEBOOK\\Domain Users   697 May  6 09:10 ~/Library/LaunchAgents/com.adobe.AAM.Updater-1.0.plist\n-rw-r--r--  1 pcottle  THEFACEBOOK\\Domain Users  1009 Apr 11 14:42 ~/Library/LaunchAgents/com.github.facebook.watchman.plist\n-rw-r--r--@ 1 pcottle  THEFACEBOOK\\Domain Users   534 May  3 14:48 ~/Library/LaunchAgents/com.spotify.webhelper.plist\n-rw-r--r--  1 pcottle  THEFACEBOOK\\Domain Users   819 May  5 18:20 ~/Library/LaunchAgents/com.valvesoftware.steamclean.plist\n-rw-r--r--  1 pcottle  THEFACEBOOK\\Domain Users   677 Dec  1  2013 ~/Library/LaunchAgents/org.virtualbox.vboxwebsrv.plist\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ ls -l ~/Library/LaunchAgents/*.plist | sed -e 's#/Users/pcottle/#~/#g' | ../fpp\nthat should all work! lemme know if you have any issues -- im hoping to release a 0.5.6 tonight :tada: \n. Thanks for reducing the CSS specificity -- thats a habit I have from Facebook where our CSS can be downloaded in any order (so same-specificity rules are a recipe for bugs). Ours are deterministic though\nCan you point out where you are seeing the extra spacing? Or what browser you are using? I don't see any differences on chrome...\n\n\n. Ah I see -- this is a bit more semantically correct so sure I'll pull! Let me resolve the merge conflict I just introduced\n. Do you think the default selection colors of red / blue will look OK when using whatever terminal colors we have? it'd be cool if we could infer those somehow\nI agree this is a big step forward though when using the default colors though, otherwise its super visually jarring. Glad we already hired you @frantic haha\n\n:tada: :fireworks: \n. awesome!  however im still getting an error output when running this locally -- think you need to merge error stdout to devnull as well\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ ./fpp \n./fpp: line 27: type: python2: not found\n. Think it works best as:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ if type asd &> /dev/null; then echo \"git exists\"; fi\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ if type git &> /dev/null; then echo \"git exists\"; fi\ngit exists\n. Alright all good, thanks for adding linux support while maintaining our mac support!\n. :see_no_evil: it amazes me how hard resolving symlinks is. I tried a few variants of this until I landed on something that would work for both relative symlinks, absolute symlinks, multiple hops, etc etc.\nA little concerned about our zsh users, since it doesnt seem to be equivalent:\nhttp://stackoverflow.com/questions/9901210/bash-source0-equivalent-in-zsh\nWhile we look for a way to use either, let me pull this down and try\n. Yeah this seems to work for all my tests locally. this is what I could find on the difference between BASH_SOURCE and $0:\n\nconvention is that argv[0] is the name of the script, but it\u2019s not necessarily. you can easily change $0 of a script by calling it with execv or something differently. in fact, the way busybox works is it\u2019s this massive single binary that chooses its behavior based on what argv[0] is.\n\nfrom:\nhttp://www.mbeckler.org/blog/?p=152\nSo Lets go with $0 so we keep zsh compatibility\n. Yeah I have been meaning to get around to this -- totally can as well. a few questions for you @vitaut:\n- is the current user always guaranteed to have write capabilities into $HOME/.local/share? one of the nice things about the home directory is not having to worry about user permissions\n- is it guaranteed to exist? or will we have to mkdir -p beforehand?\nI'd love to resolve this though, and it shouldnt be hard since these are all constants in the code\n. yeah they are all temporary -- the only one that persists between sessions is the selection pickle and if thats gone its nbd.\nsame question -- is /tmp always guaranteed to be writeable? or on average more guaranteed to be writeable and exist compared to a home dir?\n. Alright -- this is coming tomorrow!\nwe'll be sharing the same pickle selection across users on the same machine, so maybe we should prepend by the username? pwd.getpwuid(os.getuid()).pw_name\n. Fixed by #77 !\n. Yeah I would be fine with that -- would accept the PR as long as it has a sane default and some basic test coverage (and would be in the help output). We have a number of env variables right now but so far its manageable\n. Hey @sandyarmstrong \nI can't seem to reproduce this -- we definitely allow multiple periods in the filename:\n\n\nCan you perhaps provide some example input or a solid repro?\nNote that we have separate regex for files that dont have a directory prepended to them (aka stuff like echo.py):\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L30\nbut we have to be a lot more restrictive with that regex since we dont want to match JS code like:\ndata.object.some.field\n(closing for now, reopen if you have the repro). a lot of this pain would go away if we simply checked if the file exists...\n. Thanks for the PR @wasade ! Some of this was a bit stale and got cleaned up by pep8 but I merged it in 2d327a4f382a52667b064306b9c8b7db0759a26d\n. Hrm, not sure why it's not giving you credit for the pull :-/ closing out in the meantime, let me know if you want a vanity change so we can make you an official contributor :tada: \n. Can you show the output of your git status command @hobzcalvin ? I believe this might be due to git doing abbreviated file paths which I fixed in #18 (well, at least warned against)\n. Weirdddd since we parse the top level directory for both git and mercurial here:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L38-L66\n@hobzcalvin I can't repro myself -- can you output the result of:\n- git --version\n- git rev-parse --show-toplevel when inside myrepo/inside\n- git rev-parse --show-toplevel when inside of myrepo\n? im wondering if our top level dir parsing is not correct\n. Gah yeah, this is an issue specific to git status. Heres the relevant block from the manpage:\n\nThe paths mentioned in the output, unlike many other Git commands, are made relative to the current directory if you are working in a subdirectory (this is on purpose, to help cutting and pasting). See the status.relativePaths config option below.\n\nEmphasis mine. :cry: :sob: You can of course turn this off but who will do that:\n\nIf the config variable status.relativePaths is set to false, then all paths shown are relative to the repository root, not to the current directory.\n\nWhereas of course git diff (and a bunch of other git commands) are made relative to the top level tree:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ git diff HEAD~2 --stat\n src/colorPrinter.py  |  2 +-\n src/parse.py         | 16 ++++++++--------\n src/processInput.py  |  1 +\n src/screenControl.py |  1 -\n src/test.py          | 10 +++++-----\n 5 files changed, 15 insertions(+), 15 deletions(-)\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ cd src/\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ git diff HEAD~2 --stat\n src/colorPrinter.py  |  2 +-\n src/parse.py         | 16 ++++++++--------\n src/processInput.py  |  1 +\n src/screenControl.py |  1 -\n src/test.py          | 10 +++++-----\n 5 files changed, 15 insertions(+), 15 deletions(-)\nI feel like we have two options:\n1. Dangerously introspect into the format of the piped input and detect if its a git status command, and then totally rework our logic. not ideal\n2. use filesystem validation to check for top-level git directory path prepending and, if that fails, switch to ./ and check again.\nI'll take a crack at 2. later today, since we need to move in that direction regardless\n. > What if you prepended a sequence of \"../\" until you had a file match and displayed only paths whose existence was confirmed?\nhrm, id rather check either the git level top dir or just the current dir, since going up forever seems a bit cargo-cultish (like killing a fly with a sledgehammer). this is next on my plate though after this release\n. This is fixed in #114!!\n. Totally correct @callumlocke! My bad, trying to keep up with all the incoming issues / PR's. Thanks! should be reflected on the site now\n. @sairion the symbolic link jazz might have been fixed by #16, can you try that? I'm not sure if this is required after pulling in that updated.\n@aledista my main concern for this is that the installation instructions would break if you cloned the repo as a different name. I do obviously list the cd command right after the clone, but in general this seems unnecessary since the symlink resolution should be able to handle the source being right there.\nGoing to close this one out since I think #16 fixes this, but let me know if after that it's still an issue!\n. @ninegene is this because of the differences in readlink? i'd actually rather introspect into the readlink -f option if thats possible rather than look at the operating system name\nAlso we just pulled #16 from the excellent @frantic, do you mind seeing if that resolves your situation? that should fix all the symlink resolution woes (I think this is on a stale rev).\nThanks a ton for the PR though! Closing out unless #16 doesnt fix your situation, then we can re-open\n. Awesome! thanks a bunch -- I used Google's yapf:\nhttps://github.com/google/yapf\nto get the original bulk of formatting down, but I agree with these changes so might as well be pep8 compliant!\n@aledista is there any way to easily test if all files are pep8 compliant? id be nice to make this part of the build step\n. I found https://github.com/jcrocholl/pep8/ hehe. I added a simple build script just so this doesnt regress (and neither do the tests) -- thanks for the help again!\n. Lets merge this into #83, since we'll have to go to the filesystem to validate build this\n. :tada: :fireworks: thanks! too easy :)\n. Stack overflow to the rescue:\nhttp://stackoverflow.com/questions/1112343/how-do-i-capture-sigint-in-python\nhaha :D that should fix the stacktrace spew, thanks @jdunk ! this was annoying me too, glad you filed. :tada: \n. Hey @ddaza,\nYou should find some linux instructions in the projects README:\n\nHowever if you're on a system without Homebrew, it's still quite easy to install PathPicker since it's essentially just a bash script that calls some Python. These steps more-or-less outline the process:\n\nhttps://github.com/facebook/PathPicker\nWe recently added linux support with the python2 command detection (not part of the public release yet) and are working on a linuxbrew recipe as well.\n. Thanks for the file @davidgorges ! I just pushed a fix now with some test coverage, this will make it into the next release :tada:\n. Yeah @SeanA208  we actually dont get any of the aliases that are already loaded in the shell script since we execute in another shell environment :_( So for bash we have to _manually* expand the aliases:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L55\nHowever no reason why we can't make a fallback...\n. Alright this is a bit hacky but e0604190d46c03b61869607fc2cc1b725b72a800 should work. Can you try that? I don't have zsh installed unfortunately :-/\n(obviously this isnt reflected in prod so youll have to make those changes manually to your brew installation)\nthanks @SeanA208 for the report!\n. @lsmag can you see if #16 fixes this for you?\n. I think since we added the if [[ $SOURCE == /* ]]; then in #16 then this will work for both relative and absolute symlinks -- so I'm going to call this closed! @lsmag can you try pulling down 16 and then trying?\n. @lsmag what does pacman do besides unpack the tar? does it handle symlinking and sha checks and such?\n. lets track this in #43 \n. We do load up the bashrc and check for aliases:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L109\nIs something else not working? What format are you aliases in?\n(closing for now, open up again if you have a solid repro)\n. >  I have source $HOME/.bash_aliases in my .bashrc and in .bash_aliases I have alias g=\"git \"\nyeah unfortunately we don't do recursive follows / sources :*( do either of you know if we could get bash to either:\n- give us the expanded format of a given alias\n  or even\n- give us the entire concat of the bashrc file\n  ?\nlet me try this inside the command script instead...\n. @shaneharter alias does not work inside shell scripts:\n[pcottle:~/Desktop:]$ alias | wc -l\n      54\n[pcottle:~/Desktop:]$ echo \"alias; echo 'alias is'; alias | wc -l\" > ./test.sh \n[pcottle:~/Desktop:]$ sh ./test.sh\nalias is\n       0\nunless you run with some weird mode, but that doesnt work for zsh\n. I somewhat have this issue as well, but I have a global flag to toggle it off. Basically I automatically ssh to my devserver at facebook unless I set a \"local mode\" flag\nWhat does yours do? We could add (yet another) environment variable for this but I'm curious what the use case is.\n. Haha, maybe  I should do something similar. Terminal startups should be more fun!\nFrom: Addison Bean notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Wednesday, June 1, 2016 at 3:59 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, Mention mention@noreply.github.com\u0002amp\u0003#109;\u0002amp\u0003#101;\u0002amp\u0003#110;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] BashRC (#34)\nOh yeah that's smart, thanks. Haha I just have this line in my .zshrc: fortune | cowsay | lolcat So I get a random fortune every time I start a new shell.\n\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/issues/34#issuecomment-223150007, or mute the threadhttps://github.com/notifications/unsubscribe/ABFRn2hnIoZp3_zf_fiK0W585Q4VqYUDks5qHg7pgaJpZM4ETK3G.\n. :tada: my thanks good sir!\n. Wow I can repro! Let me try to debug this...\n. Thanks for the file @jpeirce ! Just pushed a fix, will make it into the next release for sure.\nThis was happening because:\n- Your input had valid matches, but....\n- The matches were WAY down the list, more lines than the curses UI had available in the Y axis\nSo when the program started up with a scroll offset of 0, it crashed since it was trying to move the cursor to the first match (aka off the page). so just a quick update was needed before we move the cursor :tada: \nthanks a bunch! (note that it wont work with files that have spaces, so unfortunately most of our output will not match)\n. We are hopefully going to get synced to:\nhttps://github.com/Homebrew/linuxbrew\nSoon! So that will be the main way. The alternative is to install manually with the options listed in the README:\nhttps://github.com/facebook/PathPicker/blob/master/README.md\n. dont you need to pull in print from future?\nfrom __future__ import print\ndont want to drop 2.6+ support. but then we could support both!\nhttp://python3porting.com/noconv.html\nwould you like me to add it @zkanda ? or are you ok with the rebsae?\n. Sweet thanks for the rebase! Im getting one small error still though:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ git diff HEAD~10 | ./fpp\nTraceback (most recent call last):\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/processInput.py\", line 145, in <module>\n    doProgram()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/processInput.py\", line 123, in doProgram\n    pickle.dump(lineObjs, open(filePath, 'w'))\nTypeError: must be str, not bytes\nTraceback (most recent call last):\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 58, in <module>\n    curses.wrapper(doProgram)\n  File \"/usr/local/Cellar/python3/3.4.3/Frameworks/Python.framework/Versions/3.4/lib/python3.4/curses/__init__.py\", line 94, in wrapper\n    return func(stdscr, *args, **kwds)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 27, in doProgram\n    lineObjs = getLineObjs()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 34, in getLineObjs\n    lineObjs = pickle.load(open(filePath))\nTypeError: 'str' does not support the buffer interface\nalthough the tests past just fine with python3. it seems to be related to the pickle module -- do you know what differences there might be?\nOnce we get that solved I can run some more tests and then merge this! would be great to support both python3 and python2\n. Actually lets merge this for now since it doesnt break 2.6+ support, and pursue the pickle issue in parallel\n. Wow this is awesome!! :heart_eyes: The integration inside of the scrollbar is especially slick, and someone even asked for this internally at FB\nDo you mind rebasing on top of the recent changes? It's probably just the scrollbar bug I fixed earlier today\n. alright cool! i think ill merge this next. curious about your thoughts on:\n\nwhat do you think about making the X mode selectors only appear next to lines that are actual matches?\n\ni think that'll be a better experience\n. > It would also look like the matrix as you scroll.\nand thats a bad thing? lol jk\n\nI think this would be better solved with color - for example, green for actionable, or perhaps just greying out the unactionable.\n\nhrm yeah thats definitely something we could think about. ok cool, i'd be happy to merge this once nits are addressed (if you dont mind, or i can take a crack later this week)\n. Sweet! Looking forward to it. And yeah with the nice color code, adding decorators to this should be easy\n. Aight this is a bit out of date so I'm closing out the PR but would definitely be down to see a rebase of this!\n. > do I have to open another pull request? The changes to my fork aren't showing up here.\nYeah youll probably have to open up a new PR compared from the tip of your fork to master. I would make sure you're rebased on the latest version of master though -- try setting up your repo to fetch from mine as upstream and merge upstream/master\n. more info here:\nhttps://help.github.com/articles/syncing-a-fork/\n. I think it'd be pretty difficult to support fish, since just the differences between zsh and bash are already enough to give me headaches :P fish looks great though!\n. Thanks @davidcox143 ! Yep this must have been a duplicate\n. Yeah this would be sweet, ill have to ask around internally since i have no idea how to build / release a linux package. @Daniel15 let me know if you have any names in mind for people we can bug :)\n. Oh thanks for the tip @lsmag . I'd be fine with pointing towards fpp-git in AUR since we won't have to worry about updating the release (downside is that it'll run a less stable version of the code, aka master)\nAnyone have any objections to pointing to fpp-git? Or should we do that + pacaur?\nAlso thanks @jwatzman for the comment! Will ping you if we don't get any community contributions that work. I do agree that this is much easier than building hhvm releases\n. Alright now we are at least pointing to fpp-git, and non-Arch peeps can install manually. Closing out since I don't think maintaining our own distribution packages is going to be super sustainable (at least until we get some internal volunteers).\nIf anyone wants to attach the command line inputs to pull down / install that package, shoot em over! I can at least inline those instructions\n. @lsmag lemme know if you have the above^^\n. sure @Daniel15 -- hope people notice the \"help wanted\" label in bold\n. Sure @pallavagarwal07  -- could you try whipping up a list of the install commands for the different package managers that use the package we link to above? and make sure it works on debian / arch / fedora\nFor instance, we have the homebrew install command as :\nbrew update; brew install fpp; fpp\nIt'd be nice if we could point to something similar like:\npacaur -S fpp; fpp # for pacaur\narch apt-get fpp; fpp # for whatever works for arch\n. My only worry about Debian packages is that our team wouldn't know how to build / update / maintain them. Could you add to the scripts/makeDist.sh with the commands necessary? That way we can update it along with homebrew and keep everyone up to date\n. Yeah sure @pallavagarwal07 --\n1) Owner name: Peter Cottle\n2) Owner email: pcottle@fb.com\n. Hrm, the output of fpp --help is basically what I would describe as our man page. could we use that automatically somehow? maybe do it as part of the script?\n. > I think man pages are supposed to follow a very strict format.\nah well in that case, lets not bother. we can move this discussion to the PR!\n. glad you like the tool @20after4 ! As discussed in #69, we probably dont be going back towards a unixy mode of just outputting lines, but fzf would be a great tool to look at!\nI'll followup with how to do this in a local PR in #69\n. :tada: :heart_eyes:  thanks!\n. > I have no idea where the www/ is coming from\nYeah, we throw in the random www/ since thats the fallback for the facebook dev environment. its a giant hack though and super vestigial, so it should be removed regardless.\nQuestion for you @Haraldson / @Ramblurr  -- are you guys working in folders with version control? We should parse the top-level directory from version control and use that for the prepend:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L38-L66\nin the meantime ill fallback to ./\n. I guess the weird thing is that we will output paths with ./ but they are still valid:\n[pcottle:~/Dropbox (Facebook):]$ cat ./wip/./../wip/PathPicker/././src/choose.py  | wc -l\n      85\n@Haraldson / @Ramblurr its important to note though that the input you guys listed above is lacking some context on where the actual path is. with this change we'll assume ./system-images/android-21/google_apis/x86_64/NOTICE.txt is a valid file, but for commands like git grep thats not always valid\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. > More than 3 files in a vertical split in vim is of little/no use for most people and buffers are more easily navigable.\nI actually disagree -- with setting min col width (set winwidth=85) it can be quite manageable to have a bunch of splits but view the current one with >80 cols. I would try it out!\nWhat I don't like about buffers is that its not visually clear from the get-go that you've actually opened all the files, and a lot of people do :qa instead of :n so they dont even see the other files.\nWhat about splitting files into tabs instead? or throw up a warning?\nI actually think we should have some kind of user preferences file to store things like this is maybe the best bet\n. Closing for now, curious what you guys think about the tabs option. Or setting this as a user preference flag\n. @jacobk does using FPP_EDITOR solve your use case? or would you like us to check $VISUAL first?\n. :tada: \n. Alright I heard back about my approach in #59 so lets go with that! My only worry is that we source the entire .bashrc which might have side-effects. I actually use my bashrc to log onto my development server for facebook (automatically) so its kind of an aggressive script to source, but hopefully my situation is not super common.\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ git show --stat | ./fpp\ngetting input\nexecuting command:\nga  '/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/output.py'\n(ga is aliased to git add for me)\nshould work 100% for bash, and hoping zsh is the same way. can anyone test? \n. @langtianlang youll have to install from master, since 0d12fef0bcfd3e2c4ac2e4e72af7f35041931c7e is not in fpp 0.5.6:\n```\nexcerpt from 0.5.6's output.py\ndef getAliases():\n    try:\n        lines = open(os.path.expanduser(BASH_RC), 'r').readlines()\n    except IOError:\n```\neither follow the manual install instructions in the README or wait till tonight when I submit the new release :)\n. Thanks a bunch! The # etc comment is definitely an improvement\nsometimes the ~10 shows a more interesting output than just ~1, but i guess we are being quite assumptive about the history of your repo (assuming it has more than 9 commits). so im ok with that update -- not a huge leap forward but hopefully our ascii demos do enough talking for us\n. Very cool! This is a pretty beefy diff so it will take a while to look over, but just some high level comments:\n- how does this work on light terminal themes or terminals with different default colors? we just added support for using default colors so I want to make sure this looks ok\n- this basically just respects the color formatting of the input right, not adds any custom coloring? im wondering if theres an easier way to translate terminal color codes to ncurses color codes...\n. > Did someone just add use_default_colors()?\nyep! it was @frantic, great addition imo\n\nand i was hella surprised that there wasn't something already out there to do this... I searched but couldn't find anything except a super old post in a google group about it.\n\nah ok, that's too bad. yeah i dont think curses UIs in python are thattttt common to begin with.\nWe should be concerned with performance though, since with super long inputs I have actually noticed pathpicker starting to slow down / chug during the parsing and scrolling steps. I did some performance work earlier but want to make sure we dont ship any big regressions\n. >  I would like to see unit tests and I would write them. Do you have strong preferences on testing infra on python? As I don't usually write python I have none.\nyeah unfortunately we only have unit testing on the file parsing / regexing / prepending part :-/ I've googled a fair amount and haven't seen anything on how to possibly test curses-based UIs. I would even be down for just a generated file of expected vs actual output but even that's hard to produce I believe.\nIf you find anything on this let me know -- would be big improvement to the manual UI testing we have to do today\n. alright I cruised through and left some comments, very exciting! its super cool to see the color show up and makes the current version of fpp seem super basic (that it doesnt have color support). now if only git diff would always include color when piping to our program...\ndo you mind addressing the nits? most of it is just comments or class constants to explain some of the more confusing parts\n. > You can also set it to always to ignore the difference between terminals and pipes. You\u2019ll rarely want this; in most scenarios,\nah interesting!\n\nI will just update the code w/ your comments and rebase\n\nsweet, looking forward to it :blush:\n. :tada: \n. Alright thanks a bunch @lastquestion! It's pretty badass to have the color show up in fpp :D also glad you split the color printing out into a new class and kept the logic fairly self contained. this will make it in the next release for sure (maybe EOW)\n. @lastquestion i'll be part of the travis CI run shortly!\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. :tada: thanks for the test coverage! let me solve the merge conflict\n. Unfortunately now that we're a homebrew recipe, we can't submit to PyPI:\nhttps://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/Acceptable-Formulae.md\nAlso I'm hesitant to switch to PyPI since we might want to use other languages some day (curses UI written in react? yes pleaseeee), but thanks for your interest in the project!\n. :tada: thanks! mind if i add some test coverage for this?\n. Maybe we should add this to USAGE as well? i figure it should output during fpp --help as well as in the readme\nactually what do you think about putting it in only --help? Might be a better place for it anyways\n. Yeah going to move this into the --help output and maybe lower in the README :P\n. ```\n== Configuration == \nPathPicker offers a bit of configuration currently with more to come\nin the future.\n~ Editor ~\nThe $FPP_EDITOR environment variable can be set to tell PathPicker\nwhich editor to open the selected files with. If that variable\nis not set, $EDITOR is used the next fallback, with \"vim\" as a last resort.\nThat's a fairly in-depth overview of Facebook PathPicker.\nWe also provide help along the way as you\nuse the app, so don't worry and jump on in!\n\n``\n. @shaneharter I don't see that file having any of my aliases defined in my.bashrc`:\n```\n[pcottle:~:]$ cat /usr/bin/alias \n!/bin/sh\n$FreeBSD: src/usr.bin/alias/generic.sh,v 1.2 2005/10/24 22:32:19 cperciva Exp $\nThis file is in the public domain.\nbuiltin echo ${0##*/} | tr \\[:upper:] \\[:lower:] ${1+\"$@\"}\n[pcottle:~:]$ type -a go\ngo is aliased to `git checkout'\n```\nI think most people load their aliases through a bashrc/zshrc, so that might not work super well?\n. @frantic My crack at this is over in 0ae54808846d058f2e89a08501dab61a628f1434. Basically it adds the expand aliases option before sourcing (conditionally) a list of files. Output looks like:\nshopt -s expand_aliases\nif [ -f ~/.zshrc ]; then\n  source ~/.zshrc\nfi\nif [ -f ~/.bashrc ]; then\n  source ~/.bashrc\nfi\nif [ -f ~/.bash_profile ]; then\n  source ~/.bash_profile\nfi\nif [ -f ~/.bash_aliases ]; then\n  source ~/.bash_aliases\nfi\necho \"executing command:\"\necho \"go  './banana.py'\"\ngo  './banana.py'\nWorks well for bash and you get real sourcing. Looks like the zsh equivalent is:\nhttp://stackoverflow.com/questions/23258413/expand-aliases-in-non-interactive-shells\nsetopt aliases ?\nWhat do you guys think about doing that? Seems less hacky that introspecting the process ID\n(btdubs I guess I shouldn't pollute the repos paths right? ill try to do PR's in the future)\n. @frantic now that this is merged can you try in zsh land? I think we will need to guard the setop and shopt commands behind some kind if statement (or just output their error to dev null)\n. Ah yeah this wasn't pulled into 0.5.5. We added a few other bug fixes and python 3.0 support, so yeah lets add another release!\n. https://github.com/facebook/PathPicker/releases/tag/0.5.6\nhttps://github.com/Homebrew/homebrew/pull/39616\n:tada: \n. (closing for now, assuming PR is merged. if you guys want you can follow the manual install instructions and get unblocked ASAP since it'll be past frantics fix)\n. Thanks for the PR @davvid ! Curious about the workflow here -- the only tricky thing is now the execution of the shell script is split between python and the bash script (since now we have the os.system('sh ~/.fbPager.sh; rm -f ~/.fbPager.sh') so it complicates things like #59 where we need to decorate the bash script with a few headers\nAlso does this work for editing files? We would need to connect to dev/tty in that case right?\nI almost wonder if we could implement this instead as pure bash, something like\n```\n$PYTHONCMD \"$BASEDIR/src/processInput.py\"\nfunction runChooser {\n  exec 0<&-\n  chose.py // etc\n  sh ~/.fbPager.sh < /dev/tty\n}\nif $1 == '--keep-open'; then\n  while [true]:\n    runProgram()\nelse\n  runProgram()\nfi\n```\nsince we save the pickled selection and the files, this should give almost the exact same behavior without introducing the code complexity. what do you think?\n. > If no one beats me to it then I'll try to rework it with your suggestions in mind. Thanks for the review\nno problem @davvid, thanks for the interest in the project! After seeing how many changes have (recently) gone into the python stack and how many are planned (like moving the location of the pickled files), it'd be nice to keep that as simple as possible.\n. (lemme know if you cant get around to the refactor and I can take a stab and close out this PR)\n. yeah sure lemme take a stab at this\n. Boom!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp -ko\nUsing old result...\nnothing to do!\nUsing old result...\nnothing to do!\nUsing old result...\nnothing to do!\nUsing old result...\nexecuting command:\ncat '/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/scripts/buildAndTest.sh' '/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/format.py' | wc -l\n     199\nUsing old result...\n2 files to edit\nUsing old result...\nnothing to do!\nUsing old result...\nthrough the magic of stack overflow and ridiculous bash programming we have this down :tada: :tada: \n. Wow this is huge @dduong42 ! I don't write much python at all so a lot of the code is nowhere near pythonic (as you can probably tell)\nBefore I take a closer look at this, the function decorators are supported the same in python 3.0 right? We are close to getting python 3.0 support so don't want to regressin that sense\n. Yeah do you mind breaking this up into multiple PR's? Maybe on per file or class. We have a ton of incoming PR's so I think that'll be easier on everyone, since this will continue to get rebased on top of and go stale\nall about more succinct python though :heart_eyes: \n. (Closing for now, lets move to multiple PR's)\n. Sorry for the ~/www fallback, that is vestigial and only relevant for facebook dev environments.\nwe only do a hail-mary fallback punt if you are working outside of a git or mercurial repo, since we parse the top-level path here:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L38-L69\nso this shouldn't be superrrrr common, but i guess it's clearly happening.\nAnyways this is resolved by e302f16118e0a9bbd38b202e1d892a68b30f227c, update your version manually or wait for the next release to fix this! thanks all for the report\n. Ah my bad @Daniel15 !! @sahrens pointed this out in a comment thread and i immediately committed it without checking PR's, so I got to this before you :cry: definitely want to get another FB contributor though so try to find something else! maybe the sudo app-get support?\n. From looking around the web, it looks like curses cant determine if modifier keys are set:\nhttp://stackoverflow.com/questions/4684739/how-to-get-shiftx-altx-keys-in-curses/9775675#9775675\nhttp://stackoverflow.com/questions/9061111/ncurses-with-arrow-keys-plus-modifiers\nSince they aren't event sent to the terminal :-/ otherwise id love to add this and add other support for all sorts of modifiers\n(seems there is some third party library that attempts to do this but im hesitant to pull it in)\n. (wish we had a cantfix label, was looking for that one)\n. yeah i dont think its an issue with what the control codes are, but rather the fact that the terminal / curses doesnt receive them at all. only exceptions are situations like tmux which gets all the keypresses, but then tmux doesnt pipe them into the running terminal :P\nif you can get a working version in curses then id be down to implement (and we should update all those stack overflow answers haha) but keeping this closed for now\n. Hey @bradparks, thanks for your interest in the project!\nWe do have the A shortcut which will toggle all the files' selection mode, so thats at least something you can use when you have a lot of files.\nRegex and fuzzy searching did come up earlier when we were brainstorming the project, but we decided to stick to path matching early on to not try to do too many things at once. We're already criticized for doing too many things (its not unixy) so adding fuzzy search would make that worse. Besides I think excellent tools like fzf would be a better match, or you could simply just process the input before sending it into fpp.\nClosing it out for now but an interesting idea, its all about striking a balance\n. > It would also make more sense because a unix tool should try to do one thing well. I think with this in mind, it would even make sense to have two utilities that could together work as a path picker : the first one which does only the conversion from an output to a list of filenames, the second one which gives an UI to select one or more elements from a list.\nYeah, this has come up a bunch internally and externally. I'm a huge fan of the unix philosophy but I actually think a lot of the value of PathPicker is added by being a \"one-stop shop\" for everything you need to do with paths. Had we gone more unixy we would either have just:\n1. built the parsing of files and outputted those, or\n2. built the UI selector and worked with any kind of input\nBut neither of these would have been that great. With 1) developers would still have to do awkward xargs things (or put the command in a subshell like $(ls -l | fpp) which I find annoying). With 2) the input would require a lot of prep with regexes and sed to get into an acceptable format for selection (think of all the work git diff or git diff --stat requires)\nso we had to go into brave new territory and do a very non-unixy thing here, but I think it ended up really striking a perfect spot between utility and simplicity.\n. Anyways, I think it'd be quite easy to fork this project and refactor it to just output the list of files (basically remove the $PYTHONCMD \"$BASEDIR/src/choose.py\" < /dev/tty line and simply print the list out from python), but I don't think this is something we can support easily since. Let me know if you need pointers on the fork though! Who knows, maybe the fork would become more popular one day :P\n. Yeah the issue with cat ~/.fpp/.pickle is that those are pickled bytes from python, not plaintext. Sounds like you figured it out but heres a simple way to print out all the files from the pickled state:\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ python\nPython 2.7.6 (default, Sep  9 2014, 15:04:36) \n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.39)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n\n\nimport format\nimport pickle\nfileHandle = open('/Users/pcottle/.fpp/.pickle', 'rb')\nlineObjs = pickle.load(fileHandle)\nmatches = [lineObj for i, lineObj in lineObjs.items() if not lineObj.isSimple()]\nfor match in matches:\n...   print match.getFile()\n... \n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/assets/favicon.ico\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/assets/fpp-favicon.ico\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/assets/heading@2x.png\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/assets/launch_page.css\n./index.html\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/scripts/buildAndTest.sh\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/scripts/makeDist.sh\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/colorPrinter.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/format.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/formattedText.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/processInput.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/screenControl.py\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/test.py\n```\n. PathPicker won't work with files, since implementing NERDTree-like functionality is an antigoal. But NERDTree is a great tool for that if you want to check it out!\n\n\n\nYeah lets move this into #83 which is tracking the filesystem validation task, which allows us to do all sorts of more aggressive matching (since we wont overmatch on text)\n. one thing to note is that this makes our previous-selection-loading behavior not be backwards compatible:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ ./fpp\nUsing old result...\nTraceback (most recent call last):\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 58, in <module>\n    curses.wrapper(doProgram)\n  File \"/usr/local/Cellar/python3/3.4.3/Frameworks/Python.framework/Versions/3.4/lib/python3.4/curses/__init__.py\", line 94, in wrapper\n    return func(stdscr, *args, **kwds)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 27, in doProgram\n    lineObjs = getLineObjs()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 34, in getLineObjs\n    lineObjs = pickle.load(open(filePath, 'rb'))\nImportError: bad magic number in 'formattedText': b'\\x03\\xf3\\r\\n'\nso ill add something for this:\n\n. Alright this is the last python3 error I'm getting. selecting files to edit works fine but in command mode:\nFile \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/output.py\", line 176, in composeFileCommand\n    if '$F' in command:\nTypeError: 'str' does not support the buffer interface\n. Boom! I did a fairly wide audit and I think I hit up all code branches, and I think thats all we need for python3.0 support! :tada: :fireworks: thanks @zkanda for doing a big chunk of this\ni removed the changes you mentioned, so now python3.0 peeps will be running the real deal\n. Hrm I'm not sure of the benefits here -- you'll have to type git add either way (using the UI vs command line mode), and with our better alias support (coming soon) the command mode will be even more powerful.\nhow would this help your workflow @xatnys ?\n. Ahh hrmmm, yeah this is fairly legitimate. Let me keep this open for now, I do agree adding a bunch of aliases would be nice.\nAlso keep in mind that we have FPP_EDITOR bash variable which can be used instead of EDITOR, but a command line arg is even better\n. Ooooh that's a pretty sweet workflow @webglider, never thought about fpp as being a step in some totally different workflow / script.\nAlright you guys convinced me, ill add this right after I merge some of this UI testing work\n. Alright go for it @lastquestion ! It might require some rebasing after I land some of the testing infra but we can see what it looks like when yours goes up :D\n. Oh yeah @lastquestion I meant the dependency injection we have to do in order to test the curses UI. Its not really \"infra\" or a dependency but a fair refactor of the UI code. However I got it working in 7753a7385cdc3cbb79e502799134521f82a92254\nBasically then ScreenForTest can record the output of the curses commands and produce some actual expected output which we can record and test against. then we can add test cases for things like #92 and test on all versions of python too\nunittest was gonna be used regardless\n. > also would be super sweet to have a built in logging to stderr or whatever that we can use while dev. I use sys.stderr.write and then remove it when i commit, but a general purpose logger would be useful\nyeah we dont have general purpose logging, but you might also want to look at from output import debug which does a similar thing! thats what i use rather than stderr\n. yeah i think this should work! #99 and my followups got the majority of it, but I do think we should prevent command mode if you have a preset command...\n. Sorry, the CLA is required for us to merge this :-/ Also I'm not a fan of needing the sudo part either. Also keep in mind that readlink -f is not supported on osx!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ readlink -f\nreadlink: illegal option -- f\nso dont think this can go in\n. Yeah as @SamHasler said, closing this out for now. with react native proving how react transcends the web platform, im hoping that curses version shows up soon\n. Yeah false positives don't really hurt you, but they are less than ideal. lets merge this into #83 which tracks the filesystem validation side\n. I actually think this is one of the best features of PathPicker -- tools like less don't understand whats a file and whats not, so they require you to page through everythinggggggg instead of just what you might be interested in.\nEspecially for inputs like git diff where the filenames are really spread out, the quick jump is quite helpful imo\nI'll close out for now, but I'd be interested in seeing a PR for this since it shouldn't be terribly hard to built (unless you wanted to decorate the simple line that was matched)\n. Sweet! I'll resolve the merge conflict and rebase this today, but yeah I think this is the best option compared to using /tmp and dealing with multiple user issues.\nI might make another module here though that both can import so we dont duplicate these constants anywhere (which was a bad idea to begin with)\n. Alright we contain everything in ~/.fpp/ now, much cleaner. thanks @lastquestion for the suggested fix and pull request! :tada: \n. yeahhhhh woof there are probably a few things we'll need to do here:\n- the first is the most basic -- parse the incoming stdin as utf8 aware and be able to display it correctly\n- the second however is the more complex -- regex match against utf8 as well, meaning our regexes need to be updated.\nThe latter has me worried the most :see_no_evil: maybe @cosbynator can help us since he's mr utf8 regex:\nhttp://instagram-engineering.tumblr.com/post/118304328152/emojineering-part-2-implementing-hashtag-emoji\n. Closing this out since I don't think we'll be able to support in anytime soon (and I keep getting nagged by the reap bot), but once almost everyone is on python3 I can add it!\n. Yeah I'm interested @jbnicolai  -- can you link the source somewhere? Also I'm curious -- when running fpp normally in tmux, what is broken versus what does your script fix? We are working on getting color support in #53 which is the only thing I can think of that might be weird\n. > What this plugin allows is for the user to press a key combination (prefix + i) and run fpp over the most recently created stdout and stderr in the active TTY.\nahhh very cool!! yeah let me link this\n. > pacman is the package manager for Arch Linux, and this lets me list orphaned packages and then manually select those I want to remove, hit c and then type pacman -R and they are gone.\nAhh interesting, yeah I hadn't thought to use this for things that aren't paths / files! However something like:\nPick\nBash Dialog\nor\nfzf\nMight work better for arbitrary matches, since they have fuzzy-matching and all sorts of other goodies. We are going to be adding on file validation soon (where we actually do an os.path.isfile) as well, so this fork might become harder to maintain as we narrow in on the file case.\nAnyways interesting fork though! Thanks for your interest in the project :smile: \n. yeah that would be great -- what are the dependencies for tox? im assuming it can work with travis CI in #82 right? :)\n. Fixed by #86 \n. :heart_eyes: yeah that would be awesome @zkanda . I've been meaning to set this up but focused on getting the release off the ground first. would love a PR or can take a crack at it late this week, since it seems pretty simple\n. Yeah, this is a pretty tough problem to solve since once you start splitting on whitespace, you'll end up matching on everything, especially when looking at code diffs where files and code are mixed together.\nhowever I do think we could do something here behind an experimental flag that would basically be a super-matchy regex that actually checks on the filesystem level if the match is a file (and then only includes that).\nso let me retitle this issue, since i think we'll move in that direction regardless\n. Single files not prepended by paths that don't have extensions (like irbrc) are super similar to just words. Sure we could do filesystem validation to check these cases, but it's important to note that if we want to hit matches like that, we have to either:\n- Test every word (and if including spaces, every possible word+space combo) to detect if its a filesystem. this has a big complexity cost\n- special case the git status situation with a special regex that looks for modified / added / removed / moved / etc\nThe latter is the better bet here. For the git status input you just mentioned, doing a basic back-of-the-envelope calc yields that we would have to do 50 filesystem checks for word-like files:\n```\n\n\n\ninput = '''\n... On branch master\n... Your branch is up-to-date with 'origin/master'.\n... Changes not staged for commit:\n...   (use \"git add ...\" to update what will be committed)\n...   (use \"git checkout -- ...\" to discard changes in working directory)\n... \n...     modified:   irbrc\n...     modified:   pryrc\n...     modified:   rspec\n... \n... no changes added to commit (use \"git add\" and/or \"git commit -a\")\n... '''\nlen([word for word in input.split(' ') if len(word) > 0])\n50\n```\n\n\n\nAnd that's for a 9 line input. now say if you pipe an entire git diff command into fp -- say its ~1k lines, that means we might do ~5k filesystem checks.\nWe'll move in this direction eventually but I do want to point out how overmatching can be dangerous\n. Yeah true, although we should have some kind of sanity check to make sure O(files in your local dir) isn't too hard.\nAlso git outputs a lot of commands relative to the top level working tree, so we would have to check that too.\nBut I do like the idea of flipping it around!\n. Ok guys almost everything is addressed here! Check out #114 for the implementation. I'm going to make a separate issue for the spaces and extension-less files, since that will require another regex\n. :tada: :heart_eyes: awesome! especially the test coverage and breaking out the regex into comments, that's already a big improvement on the (previous) eye sore that it was.\n. I can't repro this -- I think it is solved by #31. @shunjili  can you try manually installing (instructions in readme) and trying to repro?\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ echo \"../homebrew/README.md\" | fpp\nexecuting command:\ncat '../homebrew/README.md' | wc -l\n      42\n\nclosing out for now since i think this is fixed\n. > Because the test coverage currently passes with all of those versions enabled I opted to test them all, for now... if you want to only test 1 version before merging this pull.\nnot at all! I think we should plan for the future and not regress from where we are now, so totally agree with testing a wide range.\nim planning on prototyping this week a few ways we can test the curses UI code, since that's all untested as of now :-/\n. Yep @metavida! I'm working on that right now -- started after I closed this PR. I'm not getting any orgs to show up on the travis page even after syncing:\n\nso I'm reaching out to some FB peeps to see how they got it to work for react...\n. Yep. I actually think I'm stuck on getting admin permissions over the repo now\n\n. \n. finally!\n\n. Do you mind if we chose #86 over this? My only hesitation with tox is that then we introduce a dependency and need setup.py, pip, etc etc. I kind of like how this project is a leaf node right now in the dependency graph, and since Travis CI provides the same functionality I think it's a lighter-weight solution\nBeen loving your other PR's though @zkanda, lemme know if you disagree on tox vs travis\n. thanks a bunch @hegazy ! Yeah once we get multiple versions of python tested (and more test coverage on the UI bits) hopefully we can avoid these in the future\n. I think there might have been a merge conflict which means I had to manually resolve it. do you know if theres a way to do manual merges but attribute the author to someone else? id be curious since definitely want to give you credit\n. Uh sure, if you want to open a PR that reverts and then reverts the revert, go for it\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. Hrm, I'm wondering if unicode support is worth dropping python2 support, or at least making it conditional on the version of python perhaps.\nwe'd also have to handle unix distributions where I believe the default python is python3 and only python2 exists (not python3 command, unlike installing with homebrew on mac).\nGlad you got this working though @zkanda, how does the screen output look like? Also is the output to the shell script correct as well?\n. Yeah good point @lastquestion . We already have a big error warning where we see git abbreviated paths:\n\nso maybe we could do something similar for unicode\n. Closing this out @zkanda since its overdue for a rebase (and we can track the feature in the task), but now that we are python 3.0 compatible i think it'd be easy-er to add this and just throw up a warning for utf8 files on python <3.0!\nat least handling the display of utf8 would get us headed in the right direction\n(also sorry to aggro-close but since Facebook internally tracks the average age of open pull requests and this is one of the only open PR's still, its driving our average up a lot :P )\n. > when addstr reads \\n on the very last line of text. \nahh hadn't thought about that case -- thanks! all about those off-by-one errors...\n. Hey @mknecht, this has been discussed a pair amount before (see #69) -- I think going 100% unix philosophy actually detracts one of the main value adds of PathPicker which is that it's a one-stop shop for the whole workfow that progress in logical order.\nI think something like https://github.com/mooz/percol does the \"select and pipe\" workflow really well, so if we switched to that we'd be an inferior version of that toll :P\nThe downside with \"select and pipe\" is that you have to compose your command ahead of time:\ngit checkout $(git branch -va | percol)\nor\nrm -rf $(ls -l | percol)\nmentally you have to go from:\n- What input do I have? What am I going to select out? and then what command do I want to run?\n- Ok lets compose that command based on the subshell results of the input command piped to the picker\nWhereas with PathPicker (imo) you just go:\n- I have some stdin -- lets pipe\n- Sweet, lets select this\n- I want to do.... this command (/me types it in)\n- boom!\nIt's more straightforward in my opinion. @KendallHopkins was asking about this last night at dinner.\nAnyways closing out in the meantime, but I think #72 could work really well for the alias workflow\n. Merged #92, thanks @mknecht for the report!\n. Yeah this works for me! We can handle either relative or absolute symlinks, but if linux needs absolute ones then I guess we can go for it\n. cc @metavida @lastquestion @frantic  @zkanda ^^\nAlso travis reporting back to me that the relative path resolution failed the tests was pretty sweet, since they passed locally!\n. Yeah I'm hoping I can build some kind of interactive mode where you can approve changes to the expected output. We have a bunch of codegen tests like that at FB, and its prettylightweight when its just a diff preview and you tap y/n\nMerging this in!\n. > it would have been nice to get introspection on the code that runs this; it's pretty hard to read the diffs per commit and there isn't a good branch point to do a complete diff. I hadn't yet merged upstream with my master, so I was able to read the diffs clearly, but that's not always true for everybody.\nYeah sorry, I always get freaked out about losing work so I push often. I had a whole separate branch with the ~10 diffs needed for this stacked, but I guess since I rebased instead of squashing+merging it was harder to read. I didn't realize people read commits that closely! I'll try to do better in the future\n\nI tend to feel that it's difficult to really cover and exercise all corner cases via integration testing, but on the flip side, just because you test all the components doesn't mean it all works. LOL. So it's super important.\n\nYeah we've actually seen a big swing towards integration testing internally at FB, and I'm a huge fan of it. Some unit tests (especially those with automocking) only cover a very very shallow layer of code functionality, and the gaps between code (which are the hardest to unit test) is where the majority of issues can be found. But this way we get piped stdin, keyboard input, and frame-by-frame inspection of the output which is pretty nice\n\nFor chrome, for example, I would initialize the chrome object, send it the curses wrapper, and then assert that it called addstr at the right places and with the right strings. Then when I say move the scrollbar I assert it clears the right things and then it draws the new scroll bar at the right place.\n\nYeah the curses / screen wrapper totally allows us to write those tests as well -- so I think it's good either way. My only worry about asserting individual addstr calls is that you can achieve the final output of the screen in multiple ways (with many different orderings or types of addstr calls), so its fairly implementation detaily. Hence why we only compare the final screen, regardless of how it was achieved\nI think tomorrow I'll try to add a mode that records some kind of attribute-based logic, so it shows which parts are underlined and which parts arent.\nthen filesystem validation and that command-passing mode if appropriate\n. How can you guys repro this? I actually can't repro at all, with python2 or python3.\n. \nah I see :P quite subtle!\n. Done! Thanks @lastquestion for the majority of the fix -- wanted to get this in ASAP before the weekend, since we just took out a bunch of Facebook ads for path picker and dont want any bugs if they install from master\n. > I'll rewrite to use the lambda and then it should be good to merge?\nyeah! i can do it as a followup if you want\n\nalso what's your thought about removing the match of record from fpp and moving it into choose\n\nsure thats fine, i kinda just had it there more for documentation anyways\n. actually ill just do the followups, want to get my hands on some code today anyways\n. Hrm @lastquestion i think the issue here is that bash includes the script dir as the first arg, and then python gets that by accident:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nthe opt OPTS\nUsing old result...\ni got args ['/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py']\n. Alright I fixed that but still get errors when using other args:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp --python3\nUsing old result...\nusage: fpp [-h] [-r] [-ko] [-c COMMAND [COMMAND ...]]\nfpp: error: unrecognized arguments: --python3\nwonder if we can make it more permissive\n. think we had another bug:\ndef initFromArgs(argv):\n-        args = ScreenFlags.getArgParser().parse_known_args(argv)\n+        (args, chars) = ScreenFlags.getArgParser().parse_known_args(argv)\n         return ScreenFlags(args)\n. no need to revert -- i fixed everything in the commands above. i think everything works now! try fetching from upstream and let me know\n. > Sorry about that again. Is there a good way for us to test this? It's weird cuz it spans the batch to python land.\ni think ill add a UI test that just mocks the command being passed in and then checks we present the error message in the ui\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. Majority of this looks good, but let me try pulling this down and fixing this with simply dirtying the lines and redrawing completely rather than each line printing past its //actual// size\nalso keep in mind that printing trailing whitespace might lead to weird conditions -- say we printed the chrome and then printed a line next to the chrome knowing it fit inside the chrome. If it prints the trailing whitespace it might print over the chrome and lead to weird bugs\n. > Dirtying the line is better though.\nYeah lemme know if that works -- should be pretty easy to tell our UI to just re-render the line that got changed\n. Closing in favor of #109\n. :clap: :joy_cat: too easy! thanks for the PR\n. I wouldnt exactly call this an \"error exit\" but i can see why itd be useful. Let me see if this can easily be done since that output comes from the script we generate...\n[pcottle:~/Desktop:]$ echo \"exit 1\" > ./test.sh\n[pcottle:~/Desktop:]$ sh ./test.sh && echo \"hi\"\n[pcottle:~/Desktop:]$ sh ./test.sh || echo \"hi\"\nhi\nah yeah should work!\n. [pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp && echo \"worked\"\nUsing old result...\nnothing to do!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp || echo \"failed\"\nUsing old result...\nnothing to do!\nfailed\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. @jbnicolai We fall back to using the old result only when we don't receive any new input. If we disabled using the old selection, all we could do is print out the usage command.\nWhat situation are you in where you want that to happen?\nmaybe its easier to run something like:\nfpp --clean; fpp\nthat takes care of clearing out the old result / pickled selection / anything else we have? I think thats more straightforward than something like \"dont use old result but im not giving you input either so... just print the usage() message\" with a separate flag.\nOpen to the PR though if theres something i didnt think of\n. oh whoops @jbnicolai  -- fpp --clean doesnt exist yet, but it will soon. let me update this real quick\n. In the 0.5.7 release, adding PR to homebrew now:\nhttps://github.com/facebook/PathPicker/releases/tag/0.5.7\n. yeah the set controller for the simple match was pretty silly -- i was clearly trying to maintain the interface even though theres no such thing in python\n. im actually not a huge fan of the @property decorator :-/ it makes context switching super hard coming from php and js (what i work in all day) which doestnt have an equivalent concept\ndo you mind if we dont merge this one in? I think we should either be consistent and use them everywhere or just stick to the normal getters and setters\n. > we should add a test for also adding commands that are picked up at the python level and make sure it eats the right commands and lets the other commands thru. I'll do that. Swamped today w/ real work tho.\nyeah itd be nice to test that -- might be a bit tricky. no rush though, real work is the priority!\n. cc @lastquestion @frantic \n. > Mind following up with those?\nthat way you can get credit for this!\n. Yeah markup style would have been interesting! At first I thought that would be hard since you would have to post process all the attribute maps but then I realized since you have the addstr function you can just do it inline :O that might have been more readable I guess too... Hrm. Anyways guess this works for now!\n. Yeah haha it's pretty meta. Might be annoying if we want to rename files one day (since some tests actually check if the input is a file) but I'll worry about that later! Might as well be efficient and use source code as the test input\n. Thanks Eng!! Yeah this is unfortunately case sensitive haha, my bad. Thanks for the PR!! \ud83d\udc4c\ud83c\udffb\ud83d\udc4b\ud83c\udffb\ud83d\ude4c\ud83c\udffb\ud83c\udf89\n. (I'll push this to the site once I'm on my desktop so you won't see the changes immediately)\n. Ahhhh that shellcheck project is cool. Thanks a bunch! Didn't know about the globbing expansion\n. alright, this is done now:\n~~for the git status issue, we actually need to change our prepend-path depending on a filesystem result -- so that might require some ugly threading~~\nso git status is handled, false positives handled, and all the testing is fixed. I punted on:\n\nShould this be behind a user flag or enabled for all? or perhaps able to be turned off?\n\nI'm not superrrr happy with the implementation, since its a fair amount of bool param threading which I never like. However using dependency injection or some kind of global module seemed overkill, and adding a flag to disable it seemed backwards as well (it should be a straight improvement).\nThe one thing I wish we could resolve is matchLine does the prependDir check once, and then we have to do the prependDir check again (with the same bool param threaded in) to actually format the LineMatch object. Solving this would require a big refactor though...\n. If we go to a global object that's accessible anywhere, we should also publish the writes globally (aka reimplement Flux but in Python).\nA global object is way cleaner but it gets messy when mutating it -- anyone can write from anywhere (even in the middle of your function call) it's hard to track down.\nI'd be down for ideas on cleaning this up though, since we have a ton of test coverage on it now\n. :clap: :heart_eyes: this is awesome @pallavagarwal07. Did you see my comment about the man pages? we could use the output of fpp --help to generate that, since it will show all the possible command line options and the most recent usage strings.\nIm installing dpkg via brew so hopefully I can run this myself as well. most of this is magic to me but im excited to try it out\n. hrm im getting one error:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ dpkg --build ./\ndpkg-deb: error: parsing file './/DEBIAN/control' near line 7:\n missing package name\nso i cant try it out. curious what you think about the man page but if we dont go that direction ill merge this PR just so we have somewhere to start for the linux packages\n. Thanks @tpalsulich for the check. I'm trying this out right now and I think a few things are broken if there's a space in the name:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:]$ ./package.sh \n/usr/bin/python: can't find '__main__' module in '/Users/pcottle/Dropbox'\nmkdir: /Users/pcottle/Dropbox: File exists\nWhich is yet again a reason why Dropbox shouldn't have introduced spaces in their enterprise product :angry: :rage: but I digress...\nlet me try to patch in some quotes and fix this up\n. [pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:]$ ln --symbolic\nln: illegal option -- -\nMy ln doesnt have the --symbolic option, only -s so ill change this too\n. There we go, finally got it to work and made the script much more idempotent:\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:]$ ./package.sh \nBuilding fpp version 0.5.7 at Wed, 20 May 2015 09:05:14 -0700\n====================\nControl file is:\n====================\nPackage: pathpicker\nVersion: 0.5.7\nArchitecture: all\nMaintainer: Peter Cottle pcottle@fb.com\nInstalled-Size: 209\nSection: misc\nPriority: optional\nDescription: Bash Output File Picker\n PathPicker parses piped input for files and presents it in a convenient UI.\n====================\nCreating symlink...\n====================\nChangelog is:\n====================\npathpicker (0.5.7) UNRELEASED; urgency=low\n\nRelease version 0.5.7.\n\n-- Peter Cottle pcottle@fb.comn  Wed, 20 May 2015 09:04:29 -0700\nGziping...\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/debian/usr/share/doc/pathpicker/changelog.gz already exists -- do you wish to overwrite (y or n)? y\nSetting permissions...\nfind: -exec: no terminating \";\" or \"+\"\nBuilding package...\ndpkg-deb: building package pathpicker' in../fpp.deb'.\nusage: chown [-fhv] [-R [-H | -L | -P]] owner[:group] file ...\n       chown [-fhv] [-R [-H | -L | -P]] :group file ...\nDone! Check out ../fpp.deb\n```\n@pallavagarwal07 something to consider also is that since usr/share/doc/pathpicker/changelog is tracked by version control, you cant just delete it since then we will have local changes to the directory. so ill add some stuff to fix that\n. Ahhh now its so clean :heart_eyes: \n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:master]$ ./package.sh \nBuilding fpp version 0.5.7 at Wed, 20 May 2015 09:11:12 -0700\n====================\nControl file is:\n====================\nPackage: pathpicker\nVersion: 0.5.7\nArchitecture: all\nMaintainer: Peter Cottle pcottle@fb.com\nInstalled-Size: 209\nSection: misc\nPriority: optional\nDescription: Bash Output File Picker\n PathPicker parses piped input for files and presents it in a convenient UI.\n====================\nCreating symlink...\n====================\nChangelog is:\n====================\npathpicker (0.5.7) UNRELEASED; urgency=low\n\nRelease version 0.5.7.\n\n-- Peter Cottle pcottle@fb.comn  Wed, 20 May 2015 09:11:12 -0700\nGziping...\nSetting permissions...\nBuilding package...\ndpkg-deb: building package pathpicker' in../fpp.deb'.\nusage: chown [-fhv] [-R [-H | -L | -P]] owner[:group] file ...\n       chown [-fhv] [-R [-H | -L | -P]] :group file ...\nRestoring template files...\n/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/debian/usr/bin\nDone! Check out fpp.deb\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/debian:master]$ gs\nmaster...origin/master\n```\nOne thing is that logspew from the packager:\ndpkg-deb: building package `pathpicker' in `../fpp.deb'.\nusage: chown [-fhv] [-R [-H | -L | -P]] owner[:group] file ...\n       chown [-fhv] [-R [-H | -L | -P]] :group file ...\nthats ok right?\n. Thanks a bunch @pallavagarwal07 I definitely couldn't have done this on my own. Now that we have debian packages, I assume just including them with the next release so they can be downloaded is sufficient right? Is there any easy command we should list in the README for installation?\n. @pallavagarwal07 here's a link!\nhttps://dl.dropboxusercontent.com/u/15917930/fpp.deb\n. Alright great! I'll be sure to include the debian package in the next release and update the README with the link\n. Oh wait you can edit releases, let me put this up now...\n. Alright readme updated!\nhttps://github.com/facebook/PathPicker#linux\n. If you feel particularly compelled @pallavagarwal07 go ahead! But I'm not sure how \"bad\" it is to not have a manpage -- if its not a huge deal then maybe its not worth your time. However if its a huge debian \"faux pa\" then maybe we should\n. @pallavagarwal07 mind sending a PR for the README? you know what you're talking about haha\n. > I thought about this and maybe we can support left and right arrow to page screen width to the left and right. I'd rather do that then '...' abbrev.\nHrm, I'd rather actually do the abbreviation to be honest so the relevant parts fit in the screen and i don't have to scroll over. it'd also be helpful if you had output like\n./somethingsuperlongggggggggggggggggggggggggggggg/a1\n./somethingsuperlongggggggggggggggggggggggggggggg/a2\n./otherThingHere\n./OtherThingThere\n./somethingsuperlongggggggggggggggggggggggggggggg/a3\nhaving to bounce back and forth between sides of the screen would be tough.\nI don't think a flag would make sense here though -- we should just do this if your file match length is way too long compared to the chrome boundaries.\nmy only worry is how to implement the shortening logic -- @QwertyManiac would just showing the filename work for your case?\nactually @lastquestion we could do something interesting here and more intelligent than git -- we could just use up all the available space, so itd be something like\n./hadoop-mapreduce-|...|/client-hs/something-else.py | [f] is to select\n./hadoop-mapreduce-|...|/client-hs/something-cool.py | [j] is to go down\naka write up all the way until the chrome\n. \nI got this working pretty well! even responds to screen refreshes\n. :tada: :tada: :tada: \nWoohoo! This is way better -- deleting that hacky whitespace at the end of the expected test output feels quite nice :D\nI didn't know about delchar to be honest, clearly I should have read through more of the curses documentation. This is pretty sweet though, I like how we re-use the chrome boundaries to understand which lines to clear\nLemme merge this and followup with some nits\n. :tada: like the naming of \"character class,\" I couldn't figure out a good thing to call that inner grouping. lemme add one or two more examples of what it does / does not match\n. I had a small merge conflict on the Lines did not match for test %s:\\n\\nExpected:%s\\nActual  :% line from your other PR, so I just combined the two (visually lined them up and wrapped in quotes too)\n. Yep I definitely see the bug now, haha:\n\nthis totally lame the delch documentation doesnt mention anything about that. some thoughts:\n- What if we implemented clearLine the same as before (with delchar) but went right to left and painted the chrome again afterwards?\n- If we switched back to the normal emptystring printing, how bad does the test output look like? I almost think its a bit more clear to do whitespace printing from the untoggled-input to the chrome boundaries than to do what we were doing earlier, which was painting basically an \"arrow length\" of whitespace after\n. Lets go with #123 over this if thats OK -- I think the monkeypatching for the tests would be ideal to avoid, and it'd be nice to use delchar in some capacity. I would be down to add the pastScreens option though!\n. By pad you mean curses windows and pads right? https://docs.python.org/2/howto/curses.html#windows-and-pads\nAh very cool! Man I really should have just spent an afternoon reading through the curses docs before rolling some of this infra on my own :O\ni agree though, once the chrome is 100% its own pad then the delchar method will work flawlessly\n. By pad you mean curses windows and pads right? https://docs.python.org/2/howto/curses.html#windows-and-pads\nAh very cool! Man I really should have just spent an afternoon reading through the curses docs before rolling some of this infra on my own :O\ni agree though, once the chrome is 100% its own pad then the delchar method will work flawlessly.\nI guess the advantage of the pad is that we can reposition it off screen when its not displayed and move it back onscreen when appropriate? I guess our chrome is always shifting from the right to the bottom...\n. > it also would let us paint the line match txt once and then scroll it up and down without having to reprint the words i think. \nAh interesting! I see what you mean -- yeah I wonder if its more efficient for us to hold our more minimal representation in memory or to just dump everything into the buffer and let them (more efficiently perhaps?) do the repainting when it moves. \n. > I'll open a PR for the pastScreens and then we can add a test for wide like I had before. This will make sure we don't regress with the wide chrome and the delchar. \nah good point, that'd be nice to add.\n\nGod this dirty code has had 4 PRs against it already.\n\nPsh its not that bad!\n. Much better! Many thanks @pallavagarwal07 \n. Hrm -- how do you source your zshrc? does sourcing these files work?\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L33\n. Hrmmm. If you have a fresh bash script, can it successfully source your .zshrc file? something like\nsource ~/.zshrc\necho \"success\"\nIf you paste that into a test.sh and run it, what is the output? im wondering if its something weird with pretzo's configuration setup\n. Merged #138 so this is fixed! thanks again @hlian\n. whoops, this didnt post earlier:\n```\n\nI get the same errors when I do that.\n\nyeah, so this is an issue with sourcing your zshrc to begin with -- one of the assumptions of fpp's bash execution mode is that we can source all those files :P\nlet me check out #138 which is probably the better fix\n``\n. :tada: :clap: wooo awesome! I do think its more explicit threading and more.get(key, default)` values, but i think its cleaner from an internal API standpoint. thanks a bunch @lastquestion !\n. Hrm, I'm going to hold off on merging this since the Travis CI results came back negative (seems like the tests actually failed).\nCouldnt we just keep the right-to-left behavior though and just extend it to the edge of the chrome? that would consume the whole chrome content and then start chewing on the line, so the chrome doesnt bleed in.\nlemme try that..\n. Thanks @artemave ! This came up internally at Facebook and there were a number of interesting questions:\n-- Should search only match file paths or should it match against the whole input?\n-- Would it be case sensitive? Auto-case sensitive? support regexes?\n-- Would we allow specifying a fuzzy regex to filter the input first before displaying it?\nAnd then once we started exploring this idea, it became clear that PathPicker would start to try to do \"too many things\" at once, and the more unixy way would be to preprocess the input before sending it to PathPicker. So we decided this was a non-goal.\nHowever something like fzf would be a great tool to use in this case:\nhttps://github.com/junegunn/fzf\nClosing out since we won't realistically get to this, but if you have ideas for how to make fpp play better with certain workflows im interested!\n. oh fpp doesnt pipe anything out, so i think you would need to fzf first and then pipe into fpp\n. Closed in ~2 hours! Not too shabby :D Thanks for the report @dyerw, originally this would have been a bit scary of a feature to implement but now with filesystem validation and better test coverage, i can merge it more confidently\n. (The above is a before / after, where now we can highlight the deleted file)\n. Oh yeah good point, let me switch this\n. ugh apparently python3 is more restrictive about indices :*( thank you travis CI\n. @lastquestion ^^ might want to see the implementation of this. its pretty convenient!\n. > I think there's a very small bug where if you're in X mode and you enter command mode, you'll be back in select mode when you are back on the main choose screen. \nyeah I could see that happening -- we probably need to track some kind of lastMode variable to keep track of where we came from\n\nAlso I think the color of the text is white only because we are printing the scrollbar chrome right before, so the default color is set. It's not necessary but would be very good to use the color printer to affirmatively default to the default foreground color. (whew).\n\nyeah do you mind doing this @xavierbeynon  and possibly adding a test for X-mode as well? It should be easy if you just provide x as one of the mocked inputs to the test case and check for the right screen. that way we can see what this looks like\n. > Sorry for being late guys - I'm between situations right now. I could probably write a test this weekend and refactor the keys thing. I don't really want to do anything with color printer since I don't know what that is.\nits cool! let me see if i can merge this all in\n. Alright sweet! Thanks @xavierbeynon for the PR, rebasing was quite trivial (just a merge conflict in an expected test output file).\nNow that I'm playing around with this locally it actually is quite fun / useful :)\nwe should try to figure out how to turn off the cursor in x mode -- one more thing to fix\n. Fixed! Alright I think this is all wrapped up now, thanks again :tada: :clap: this should make it into the 0.6.1 release\n. Hey @hlian! Thanks for the PR -- I remember interactive mode coming up when I was figuring out alias expansion but I think I got stuck on a similar issue you had -- yosemite needing shopt to turn on alias expansion yet that not being an option in zshrc. also stack overflow seemed to widely discourage use of interactive mode, but I think our use case is a valid exception.\nI guess checking for the existence of shopt and then flipping the flag isn't the worst solution, but it does seem a little blunt (compared to sourcing).\nLet me pull this down and test locally -- I might actually prefer this though since sometimes sourcing bashrc's can have pretty aggressive side effects (I personally have a script to login automatically to my facebook dev server if a given flag is present, so that always trips me up when using fpp with bash sourcing)\n. @frantic do you remember any reasons why we avoided interactive mode in the past? I think the shopt was the main reason but given how others might be running into #125 my preference is to merge this in.\nLet's do it!\n. :tada: :clap: thanks @lastquestion! let me check out the behavior of --clean real quick after this -- i might add the exit back\n. Yay! glad the off-by-one error is fixed and we handled the super narrow window case.\nAny reason why you went with a larger change here @lastquestion? Im worried this might be a slight perf regression since now we are doing this calculation on every repaint rather than just when our status of needing truncation changes from false to true (or opposite).\nJust worried about merging in a bunch of code that I know works but I dont quite grok yet :O\n. Closing this out since its stale, reopen if you want!\n. I'll make sure to preserve #102 as well\n. Hrm unfortunately this doesnt work with the way we attach to dev/tty :cry: $? refuses to return the actual exit code of choose.py when checked after its executed, so im not sure what we can do here besides the current behavior (which is to exit with status 1 from the final bash script).\nsuggestions from bash wizards welcome :)\n. :tada: :clap: great PR! I missed this when switching from Facebook dev servers (which we all work on through ssh) to local-dev land.\nsublime is super popular -- wonder if we should look up support for textmate or atom or anything else\n. Yeah this is because grep services typically separate the filename from the results with either hyphens or colons depending on the context. heres an example:\n```\n\ngit grep -C 3 \"future\"\nusageStrings.py:from future import print_function\nusageStrings.py-from screenFlags import ScreenFlags\nusageStrings.py-\nusageStrings.py-USAGE_INTRO = '''\n```\n\nif we just blindly allowed hyphens in our filename extensions, we would mismatch on usageStrings.py-from :*(\nwe have filesystem validation now but even with that, we need a heirarchy of the regex waterfall, and that leads to a tough situation -- we will correctly match on filename without the hyphen extension, and then with filesystem validation will invalidate this match\n. so instead i need to loop through all regex results if filesystem validation is turned on and only return the first result that validates....\nanyways #148 should address this, but it wasnt easy! haha\n. Can you try using 0.6.0 by any chance? We added filesystem validation:\nhttps://github.com/facebook/PathPicker/releases/tag/0.6.0\nSo we can actually parse files with spaces in them now :) You should be able to upgrade via brew since thats the latest version:\nhttps://github.com/Homebrew/homebrew/blob/master/Library/Formula/fpp.rb\nOr just clone the repo and do brew install ./fpp.rb\n. The hyphens stuff will be easy to add, thats just a regex change.\nclosing this out since im pretty sure we have files with spaces working, but reopen if you can repro on 0.6\n. Are you talking about the Package Control.user-ca-bundle files? In order for those to parse, we need both spaces //and// hyphen support, and I just landed the hyphen support in that other task. so try installing from master! should work then. probably will update homebrew by EOW\n. Ah dang ok I'll take another look at this then\n. Ah this was easy to fix -- just needed to allow extensions to have hyphens in the regex that allows spaces :O woof. #149 should go in clean and then we are good!\n. Great to hear @benmccormick ! :heart_eyes: feel free to drop by and open issues in the future for other bugs / improvements\n. @mrandrewandrade can you attach a few things here for me to debug? try running the output of:\nfpp --version;\nls -la ~/.fpp/;\ngit status;\nnote that if git status only outputs files that are deleted, youll have to add -nfc to skip file checks\n. ```\n\u279c PathPicker git:(master) git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\nnothing to commit, working directory clean\n\u279c PathPicker git:(master)\n```\nAh yeah ok @mrandrewandrade I see what your problem is -- git status is listed as an example command to try out fpp but it will only work if some files have been changed, so git status actually outputs a list of changed files.\nRunning fpp on its own (with no previous result) won't do anything either, since it needs some input to show you the selector.\nHere's the easiest way to just open up the program:\necho \"foo/bar/banana.py\" | fpp --no-file-checks\nthat will open up the UI and should work regardless oh where you are. to try out with some real input, try:\ncd /usr/local/bin/PathPicker/;\ngit diff HEAD~10 --stat | fpp\nthat should allow you to open up the files.\nIts also important to note that //fpp wont automatically use the stdout from the previous command//, so typing \"ls\" and then typing in fpp doesn't do anything (since fpp thinks it is getting no input).\nHere the \"old result\" refers to the previous piped input to fpp. let me clarify this real quick\n. Sweet, I'm assuming the above worked :D hopefully the new error message makes this more clear!\n. :tada: :heart_eyes_cat: thank you so much @engz ! Let me merge this in\n. Lets merge into #155 since I think this was solved with a recent PR -- You can see we now use $SHELL in interactive mode:\nhttps://github.com/facebook/PathPicker/blob/master/fpp#L36\nTry installing from master and seeing if the issue persists @sr105 \n. \n. Yeah its unfortunate we have to change the position of the tooltip manually (which wouldnt work if we supported other locales) but GitHub might do something similar (or call into the hook that bootstrap exposes)\n. Get @sr105, thanks for the file. Yeah the main issue here is that the support and formatting for various editors can vary quite widely -- for instance vim only supports setting the line number when its only opening //one// file, whereas emacs and joe are quite different.\nOut of curiosity what is your $EDITOR set to? That's the variable we look at (if FPP_EDITOR is not set).\nThis is a similar issue for the command mode -- we have $F as a token to represent all files joined by a space, but if the user wanted line numbers, its not clear what format they would want them in.\nJust trying to understand your specific usecase -- id rather make a slightly more magical but frictionless solution for a specific editor than introduce too much complexity\n. Gonna close this out since it seems you're unblocked but lets continue the discussion\n. Ah cool, glad you got unblocked! I think having multiple formatting options is a bit intense (since the emacs and vim style is already handled) but I wouldn't be opposed to a PR that adds an option to output all the files and line numbers separated by some kind of token.\nAlso keep in mind that sometimes we don't have filenumbers available (for certain types of parsing), so you might get 0's in place of an actual filenumber.\nAnyways have fun path-picking!\n. @Muffo can you run fpp --version for me and attach that? We used to try sourcing the rc files but switched to running the shell in interactive mode, which is a safer option. If this happens on a legacy pathpicker client I wouldn't be surprised, but the new interactive shell mode fix should work.\nPathPicker should certainly work with just plain zsh regardless though\n. Ah yes, the source of the .fpp.sh is the smoking gun here. We already landed the fix for this in master but we shouldn't be sourcing any rc files directly.\nYou should be able to install from master to get the fix (see readme instructions) but I'll submit a new minor release, since I'm surprised that this didn't make it in\n. Alright PR submitted to homebrew:\nhttps://github.com/Homebrew/homebrew/pull/40501\nAnd release made:\nhttps://github.com/facebook/PathPicker/releases/tag/0.6.1\nYou can also install easily via homebrew by just cloning the repo and brew install ./fpp.rb (using the local file) once you are in the directory.\nclosing this out since the fix is out now!\n. No problem! This task was a good forcing function for me to get the fix out the door. My homebrew PR got merged so after brew update you should be good to go\n. Hrmmm... if we had //launched// with this feature I think it could have gone in, but now that we've been released for quite some time I don't want to break everyones muscle memory by adding this :crying_cat_face: itd be pretty thrashy to update and then have all your normal keystrokes lead to unexpected output.\nI also think each keystroke should be fairly \"KISS\" or keep-it-simple-stupid. Although usually the intention is to go downwards after selecting a file, the cases where that isnt true ends up being quite thrashy. Imagine you have a really long list and you actually only want to select the last entry in the file -- by moving the index to +1, you'll scroll all the way to the beginning of the list -- not even giving you an option to see if the selection worked. that would feel like a bug.\nadditionally say you are selecting files on the way up (rather than downwards) -- then you have to fight against each selection pushing you down.\nThis also breaks almost every test we have (since the expected output is different from keystrokes), hence why the build failed.\nAnyways, I'm going to close this out since it has some pros but also some cons. Thanks of the interest in the project though @prubel !\n. Hrm, I could be convinced for F! that way its a separate keystroke but similar (select-and-down)\nyeah if you run the tests and add another for the F functionality we could merge this in\n. Ah of course! my bad @prubel -- we updated the travis formula and everything but I forgot the docs. :tada: :clap: thanks\n. Hey @kcbsbo thanks for dropping a line!\nThat is super annoying -- I'm sure other projects have run into this before, let me followup internally with our open source team since all we need is an electronic signature (it just happens to be hosted on facebook.com, but could be hosted anywhere). Stay tuned!\n. Hey @kcbsbo, good news! We actually have a PDF version of the form that you can sign and email back, so we have a workaround :P bad news is that I'm having trouble tracking down the PDF version right now -- once it's monday here I can probably get a hold of it.\nIt's unfortunately a bit of a low-tech workaround (since I think you have to sign it manually and then scan it) but you only have to do the process once for all of our repos\n. Hey @kcbsbo! I got a copy of the PDF -- can you email me at pcottle@fb.com? I can send it over.\nClosing out in the meantime, thanks for your interest in the project though! :clap: \n. This looks great! yeah I bet all the tests pass without the usage string change, but a lot of them have the usage in it so youll have to delete and re-run the test. the git diff ends up showing the real changes at the end of the day\nthis looks great though! :clap: \n. Thanks for the update @prubel !! :clap: :tada: :tada: this looks great!\n. > How would the maintainers of this project be willing/interested in some glue code in your debian build script to generate and package a manpage?\nYeah certainly! This came up in #117 but @pallavagarwal07 commented saying that the format for man pages is fairly strict. Do you think its tractable to transform our --help output into a manpage somehow?\nI don't necessarily want to maintain a whole separate stack of help code but if we can integrate it easily with some glue code then I'm down\n. Thanks a bunch for the PR!\nI think the extra dependency is fine since it's only for dev. It would be nice to comment in the script with the right error message if it's not installed\n. Closed out in #161 , thanks a bunch again! woooo linux support\n. Travis test is good, thanks a ton @sethwoodworth ! :tada: :clap: \nIll make sure to generate the manpage when we make the next release\n. Hrm, @pallavagarwal07 did this come up in your testing? or @sethwoodworth was this apparent when you worked on the manpage stuff?\nI don't have a ubuntu machine handy so I can't easily repro, but these are mainly just warnings right? We don't really have any binaries so doing those checks wouldn't make sense. Can't tell how serious the others are\n. > Actually I did point these out. These warnings are only occurring when the packaging is done on a mac. When I use the exact same script on Linux, the packages give a clean lintian output.\nsweet, lets close this out then. mac users wont be the main customers of the debian packages and these arent a blocker anyways\n. Ah yeah I misread -- maybe I can reach out to coworkers to get them to build the packages when we have releases :/ actually our devservers are Debian I think so I'll try that next time \n. Yeah this is somewhat intentional for the REGEX_WITH_SPACES regex. otherwise we would parse almost everything in the stdin as a potential file and have to drop down to the filesystem to check if its a file or not. imagine if we were checking xiuliyun or staff or random bits of code in a git diff output\nill debug this though and see if we can selectively prepend a ./ and try to grab out the file. just worth mentioning it has performance considerations which is why we didnt just open up the flood gates from the getgo\n. \ncoming on up!\n. #yolo gonna merge this in since it passes locally\n. Very cool @edi9999 ! How do you end up doing the filepath extraction? it seems like you have pretty specific validators here:\nhttps://github.com/edi9999/path-extractor/blob/master/validators.go\nfor instance, that wouldnt work with something like a retina image asset (logo@2x.png) right?\nI do like the simplicity of the program though :D quite impressive.\nclosing this out since its not super actionable, but ill keep this in mind if someone files a similar issue\n. @dpagano can you attach the output of fpp --version? I'm almost certain this was only an issue only with our older releases; we have since switched to falling back to relative paths rather than ~/www. That functionality was vestigial / only applicable at Facebook where our sandbox is checked out at ~/www.\nI'm not super familiar with SVN though -- do SVN commands give filepaths as relative from the root of the repo? If so we might need to add SVN repo logic -- you can see here:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L126\nWe try to get either the hg root or the git root, but we dont have any logic for svn. Do you feel brave enough to add it? :D\n. Great! good to hear :+1: \n. Do you mean the .../ paths right? so this is actually an issue with git -- here is whats going on:\n-- first, git status actually produces different output depending on if its going to be displayed on the screen vs piped into another program\n-- when it gets piped, it decides to abbreviate the long paths with a preceding .../ to designate that the actual path got truncated. so all information is lost by the time it gets to fpp :cry: \n-- since we added filesystem validation, these paths get filtered out since they dont look like files\nYou can actually skip filesystem validation with the -nfc option, in which then when you select them:\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src/tests:master]$ echo \".../foo.py\" | fpp -nfc\nWarning! Some invalid or unresolvable files were detected.\nIt looks like one of these is a git abbreviated file with\na triple dot path (.../). Try to turn off git's abbreviation\nwith --numstat so we get actual paths (not abbreviated\nversions which cannot be resolved.\nAre you sure you want to continue? Ctrl-C to quit\n```\nwe produce a big nasty warning. but unfortunately since they are filtered out, i guess its hard to get into that warning state\n. @devisnik do you think it would be appropriate to warn when we get any of these files upon input? it would be a super jarring experience (well, super frictiony at least) but now that we have filesystem validation, its hard to understand why they arent selectable.\nactually, let me instead change it so we \"pretend\" these are legit files so we allow you to select them\n. All done! Next release won't have this issue :)\n. Yeah, this is an unfortunate issue with creating the packages on Mac systems (whereas debian ones don't produce packages that have these errors).\nThis is a dupe of #162, but I just realized that you can edit the file attachments for a given release, so I could update this ASAP. @jiawen or @eox-cs1 oe @pallavagarwal07 -- could any of you run the debian packager on your system and upload the package somewhere for the 0.6.1 release? I could then download it and replace the faulty one\n. Alright updated the release, new package is here:\nhttps://github.com/facebook/PathPicker/releases/tag/0.6.1\nThanks @pallavagarwal07 for the quick fix! closing this out for now\n. I trust you! :clap: \n. > It would be helpful if the executed command would be [optionally] added to the shell history\nyeah I totally agree @saveriomiroddi! I think we looked into this briefly when starting the tool but I must not have found the history -s command, which seems to do exactly this.\nlets see if I can add this to the bash script we execute. my only worry is that it will be in a separate context, so it wont affect your own history\n. :crying_cat_face: :cry: Yeah, this isn't possible since the history command modifies the subshell, not the shell its called from:\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nUsing previous input piped to fpp...\nexecuting command:\ncat '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/DepartureSelectView.js' '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/StationSelectView.js' | wc -l\n     284\nAdding to command history...\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ cat ~/.fpp/.fpp.sh \nif type shopt > /dev/null; then\n  shopt -s expand_aliases\nfi\necho \"executing command:\"\necho \"cat '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/DepartureSelectView.js' '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/StationSelectView.js' | wc -l\"\ncat '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/DepartureSelectView.js' '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/StationSelectView.js' | wc -l\necho \"Adding to command history...\"\nhistory -s \"cat '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/DepartureSelectView.js' '/Users/pcottle/Dropbox (Personal)/wip/MinCalTrain/src/js/views/StationSelectView.js' | wc -l\"\n```\nafter I ran the above, the command wasn't added :-/\nIf anyone has suggestions on how to do this lemme know, but I think i'll have to close out in the meantime\n. > Although I now see that sh ~/.fpp/.fpp.sh basically gets me to the same place.\nyeah exactly, this should be exactly that (the last command run, plus some setup code). actually it would be somewhat trivial to alias fpp to actually execute fpp and then cat one of the lines to the actual bash history (but thats only possible with a top-level alias, nothing our code can control i believe)\nmy hesitation for a history file is then you have to worry about unbounded size, what number of lines to truncate at, a config option for the former, etc etc.\nlemme know if sh ~/.fpp/.fpp.sh doesnt solve what you want though!\n. Cool! lemme know\n. Oooh, I like the implementation of prepending all the history by line number so its easy to reference a previous one. if we get more requests for history functionality i might steal this implementation :)\n. /me facepalm\nThanks @evverx! I was meaning to make the README updating part of the script that runs when we build a new release, but I had no idea that GitHub releases has a /Latest/ auto redirect. how convenient! this is much better\n. Whoops sorry I missed this @Shenil ! I agree its already been discussed a bunch but since this PR has test coverage and covers a pretty valid usecase (files often in the root directories), I'm more than happy to merge it.\nThanks for contributing!\n. @glensc your commit over in https://github.com/pld-linux/fpp/commit/7060690fcf68e7f668562e37d33d51f5e974276e looks good, should we merge that?\n. Sorry about the delay on this, all the tarball stuff was contributed by the community (and I know far less than I probably should)\n. Hrm, I'm going to call on the linux expert-in-residence @pallavagarwal07 and @sethwoodworth who added the script. You guys have any ideas?\n. > so it is not currently an option to rename the folder hierarchy to accommodate no spacing.\nyeah understood. its tough to nail this down without a repro case -- can you report back with one and then we can add it to the test suite?\nA lot of the spaces implementation was super incremental (since i didnt want to start overmatching on code results) so i wouldnt be surprised if there were some edge cases.\nthe files werent being deleted right? you need to pass the -nfc flag in that case\n. (we have an internal bot that tracks open issues and docks points the longer they are open, so ima close this out till we have a repro -- but report back as soon as you have one!)\n. Hey @hajimezhao ! We dont have support for directories yet, mainly because directories are such a disjunct set from filepaths for most unix commands. We'd have to provide a command API that would somehow provide different tokens (or different commands) for filenames versus directories and all of that.\nIts not impossible to support, just requires a lot of work and careful consideration :P\nFor clipboard, yes you can! There are two things you might be interested in:\n- The first is the pbcopy command which copies to clipboard, so you can \"paste\". I think this command only comes on macs but is quite useful. you can pipe into copy like echo \"asd\" | pbcopy\n- The second is that we have a bit of hacky support for moving into the directory of a listed file. If you \"cd\" a file in FPP, we will actually copy it to a file in ~/.dircopy (since we execute in subshells and you cannot change the outer shells directory instantly).\nThen I have an alias to easily navigate to that directory:\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src:master]$ type -a cdp\ncdp is aliased to `cd \"$(cat ~/.dircopy)\"'\nso my workflow is essentially cd $F >> program exits >> cdp\n. Hope that helps!\n. :tada: :heart_eyes: thanks @pallavagarwal07 !!\n. Thanks for the bug report and repro case @ivan ! This is totally a bug -- there is only one way you can select files that are offscreen, and thats with the \"A\" command. youll see in the attached commit that this was a silly fix :P\nadding some test coverage...\n. Done! Should be fixed, thanks again :+1: \n. @derryl What version of FPP are you running? should be able to find out with fpp --version\nWe used to return ~/www/ as the repo path if we couldnt detect a git or mercurial repository, but we changed that in e302f16118e0a9bbd38b202e1d892a68b30f227c:\nhttps://github.com/facebook/PathPicker/blob/master/src/parse.py#L159\nso now you shouldnt be getting ~/www at all.\n. Im pretty sure this is just due to an old version, but please reopen if you are getting it after upgrading :+1: \n. Great! Glad to hear you're unblocked and enjoy the tool -- I'm just glad we can give back to the OSS community\n. Hey @baest , yeah this is unfortunately a known issue :-/ it cant pick up things that //dont// look like files (like the fpp* which is a symbolic link i believe), or words that are all caps without any extensions or leading paths.\nYou can see what we support here:\nhttps://github.com/facebook/PathPicker/blob/master/src/tests/testParsing.py#L20\n. Gah, It'd be awesome to support this one day but I don't really think it'd be possible anywhere in the nearterm :-/ the issue is that we parse the entire input before pickling it and loading up the UI:\nhttps://github.com/facebook/PathPicker/blob/master/fpp#L27\nYou can always do something like head -n 100 to grab bits of the input first and pipe to fpp, but theres no way we could support streaming without a giant refactor at the moment.\nthanks for the input though!\n. Just a random question first -- what functionality of fpp are you looking for over something like NERDTree? the multiple selection and command mode perhaps?\nAnyways, I'm actually quite surprised this works as much as you described :P So the command gets correctly echo-ed out, but the vim session never resumes?\nI'm worried it's this line:\n$SHELL -i ~/.fpp/.fpp.sh < /dev/tty\ncan you possibly try without the < /dev/tty hook? should be able to edit the fpp bash script easily:\n[pcottle:~:]$ type -a fpp\nfpp is /usr/local/bin/fpp\n. > but removing the -i did fix it (though I'm not sure what that could now have broken).\ngah, yeah then we might have to close this out unless we can detect if we are inside the vim shell or not.\nbasically the -i option forces it to be interactive, so things like opening up vim / emacs / git add -p / whatever will actually work. Seems like vim's execution mode gets tripped up by running an interactive script.\nSeems like theres a similar issue over here too:\nhttps://github.com/zaiste/vimified/issues/89\n. (for context, we need the -i to both expand bashrc aliases iirc and make the tty stuff work. so reverting it would be a fairly big regression.\nim open to ideas on running conditionally with the -i option if we can somehow tell we are inside a vim subshell)\n. Hrmmmm this is quite odd. I assuming running cat './2010' './2011' normally works right?\nWhat about opening up in an editor? can you open those files in vim?\n. Do you have any weird customization in your .bashrc? can you attach it\nI'm on Yosemit as well (as well as all my coworkers, couple thousand FB engineers) and it works for everyone here. Login shell is standard bash:\n[pcottle:~:]$ bash --version\nGNU bash, version 3.2.57(1)-release (x86_64-apple-darwin14)\nCopyright (C) 2007 Free Software Foundation, Inc.\nbut i know a few people who use zsh with it. Never heard of csh though :O\n. Yeah @wkoszek we definitely have a dependency on bash. the reason why we use $SHELL is that we also support zsh which is fairly popular, so that way its dynamic.\nhowever since we don't support csh at all, what do you think about fpp instead just dropping down to bash? Basically I'm assuming fpp working in bash is better than no fpp at all.\ndo you think most csh users have either bash or zsh installed?\nI'd be down to throw up a PR for this in a bit, but I'd probably ask for you to test it (since I don't have csh or zsh installed :O I'm such a bad engineer clearly)\n. Yeah I'm basically proposing the logic that if you're not on zsh or sh, we just use bash shell by default rather than optimistically hoping that your shell can interpret the script we generated.\nhowever we do have support for zsh, so we can't just hardcode using bash shell @wkoszek.\nWhat do you guys think about the above? Would fish or csh users be annoyed that bash executes their commands?\n. > Unless we stick some ZSHisms there, and this script is simple and clean, I think calling /bin/sh on ~/.fpp/.fpp.sh should work.\nWe delegate to $SHELL in order to preserve the aliases of whatever shell we're using, whether that be zsh or bash. We had some pretty high demand for supporting zsh aliases, which is why we did the switch. Sorry @benmccormick  about the unintentional regression though :-/\nI think we should do:\n- If $BASH or $ZSH_NAME is set, defer to $SHELL. otherwise call /bin/sh. Heuristics stolen from http://stackoverflow.com/questions/3327013/how-to-determine-the-current-shell-im-working-on\n. Lemme whip up the PR for this real quick\n. Alright PR is up! Sorry this took so long to fix when it ended up being reasonably simple :P\nCsh / shell users -- do you all mind giving this a whirl and seeing if it fixes things?\n. alright merging in the PR since im pretty confident it works. woohoo! would love for one of you all to test locally though, if thats possible :P @benmccormick ?\n. > interesting I see that even if I'm currently in bash\nhrm thats super odd -- can you debug inside of ./fpp and make sure that indeed bash is being run? im almost thinking that somehow you're going back into fish from bash, since fish is clearly complaining about the exit status.\n\nMaybe just check directly if $SHELL ends with zsh and use $SHELL, or otherwise use sh?\n\nyep I can do that too. what happens if you hardcode ./fpp to run bash?\n. i thought that exit wont properly punt up the exit code of the last command for bash at least -- is that not the case? if so we can just switch to exit then, but i thought it had to be explicitly piped up\n. Resolved with #205 \n. Ah sweet! Does this fix #185 for you? Didn't realize we had something like $VIMRUNTIME\nkeep in mind that I think bashrc aliases wont expand in this mode (without the -i option) but I would need to check. thats better than hanging the shell though.\n. Another thought -- should we prevent going into editor mode if we are already inside a vim runtime when we launch fpp? I dont think theres a valid case for running vim as launched from a vim bash command\n. Lets do it! Thanks for putting up the fix -- this will make the next release, but in the meantime you can tell your friends to install from HEAD on master (since you already have the fix locally)\n. thanks @pallavagarwal07 !\n. Hey @banks ! I have good news for you :)\nThe reason why we don't detect deleted files is because we use //filesystem validation// on all of our matches (which is now on by default), so we can be a lot looser with our regexes and find all sorts of matches we otherwise wouldn't have been able to.\nSo if you want to select deleted files, just do fpp -nfc or fpp --no-file-checks.\nActually if you run fpp --help, your exact scenario is described as the reason why you might want to use that flag.\n. For directories, we unfortunately don't support these for the time being for a few reasons:\n- Editor support for directories varies a bunch. Vim and sublime and all those classics handle it just fine, but stuff like nano just seems to print out a blank screen\n- Command mode gets a bit trickier with directories, especially if you have selected both files and directories. we would probably need to have two separate replacement tokens\nHowever it's not impossible, just something we haven't thought through yet. I'll keep it on my radar since i do wish I could select directories sometimes (mainly for command mode)\n. lol yeah whoops, Facebook uses phabricator all day so its somewhat hardwired. glad i could help though!\n. for the editor case it's easy to add exit 0 and have it work, but for the command case we should properly propagate up the exit code if its non-zero. i was about to suggestion doing just a && exit 0 but that will break if people have ; after their command.\ncould we just check the exit code of the last command and use that?\nexit $?;\nI'd be down for a PR that does that -- should be safe!\n. :+1: :+1: :+1: PR would be awesome.\nI'm glad you find it useful too! Eliminating copy pasta and not having to use the mouse as much wer ebig motivators for me to finish it\n. :+1: :+1: :+1: :tada: \nWe probably could have scoped this to just the file open / command, but i appreciate the thoroughness! i assume #190 is silenced after this is merged too\n. Thanks @slackorama so much for putting up the PR for this! logic seems good -- its too bad we don't have test coverage for this though. I'll try to add something after this lands.\nAlso I should make a new release since this and a few other fixes have gone in recently... lemme file a task on myself to do that\n. Hey @jeffkile do you know the command line formatting for neovim's line number args? We have a manual mapping here:\nhttps://github.com/facebook/PathPicker/blob/371ffc2d8df002e16e7e063ce218023280fab50d/src/output.py#L95\nand neovim has an entry. does that not work? can you output ~/.fpp/.fpp.sh?\n. certainly! Would be much appreciated :) cc @pallavagarwal07 just as an fyi. i shoulda double checked in diff review though\n. hrm, might be version dependent then? @jeffkile what version are you running?\n. Have you outputted your $FPP_EDITOR or $VISUAL? we use those environment variables before falling back to $EDITOR. that might be the difference in behavior\nor output the ~/.fpp/.fpp.sh and paste it here so we can compare exactly\n. closing out since latest version supports the mapping we have\n. Ahhhhh hrm this might be tricky @dfordivam since we launch the vim process within another shell script here:\nhttps://github.com/facebook/PathPicker/blob/master/fpp#L50\nits actually two levels deep since we generate the fpp.sh.\nim not an expert in process suspension but i dont think we can support this easily, since im assuming processes launched from a shell script need to finish when the script exits.\nwhat workflow are you trying to support? you can also run commands from within vim (small consolation i know)\n. (closing out for now since i dont think this is technically possible to support, but curious to hear back)\n. Ahhhh yeah I see -- I usually just go with multiple tabs rather than suspending and resuming vim. interesting workflow though! sorry we couldn't help out, but sounds like you're getting some kind of use out of it\n. Good news! We are adding a flag for this in #222\n. sometimes i wish python had switch statements... thanks for the awesome PR :+1: . @jeffkile is working on changing the neovim mapping over in #193 \n. Yeah I think I was just being overly cautious here, seems fine to me. thanks for the negative LOC PR :+1: \ni think it'd be worth checking in neovim, but it does seem odd to throw for that combination\n. @frantic do you mind taking a look at this? #186 has the context (just look at the tail end)\n. @frantic :P\n. Hrm never seen that before, but yeah it looks like it cant even start up python tbh. \nwe just use the python command:\nhttps://github.com/facebook/PathPicker/blob/master/fpp#L23\ncan you try a simple script instead that opens up python and executes hello world or something?\n. closing out as I think this is mainly a virtualenv thing, but curious to hear back\n. Yeah thats a total yak shaving moment. Good luck doing down the rabbit hole!\n. @keneanung can you attach the input you are piping into fpp and the directory structure you are using? and where you are running it from?\nRunning with --nfc turns off a lot of our filesystem validation, so thats why partial matches and such show up (since its all guesswork)\n. Ah yeah, I'm certain this is just because our file extensions dont have ~ as an option and the spaces regex doesnt allow commas. I think I can probably open up the regexes though and not break our backwards compatibility, let me draft this up when I have free time next (Wednesday)\n. Alright threw this up! thanks to test coverage I can pretty confidently merge this :tada: \nno umlaut support yet, thats a utf8 thing with python2.7 that slows us down there :(\n. Ah yeah I'm sure thats the issue -- we support python 3 and run the tests in python3, but it doesnt cover 100% of the use cases.\n@nvictor do you mind throwing up the PR for that? Ill happily merge it ASAP :)\n. Yeah it'd be great! Closing out for now since this is mainly a feature request but ill keep it in mind for an intern project or something\n. Lets do it! We should probably also remove the logic that defers to either zsh or bash over in fpp\n. https://github.com/facebook/PathPicker/blob/master/fpp#L47\nWant to add a case for fish there and check if it works? thanks again @benmccormick for your contribution! After we get this settled I'll probably add a new release\n. > As is, with this fix, everything should work fine and I can use fish scripting commands if I want.\nAh great, thanks for the explanation then. Also sorry for the delay, was some craziness prepping for black friday over at FB.\n209 mentions formally supporting fish as a shell. do you think adding an if case condition for fish would be worthwhile? the you could run fishy commands right?\n. Yeah, this is unfortunately due to the fact that we launch the editor inside a subshell and attach it to tty directly. hence you cant simply suspend the editor process, since it belongs in that sub-shell process :(\nI think there was a similar issue to this earlier -- theres no real way to solve this i dont think, especially with supporting both zsh and bash.\nthanks for using FPP though! Lemme know if you have ideas (im not an expert on launching processes and separating them from the script being run, but also still blocking on them before exiting)\n. Good news @Firehed  we are adding a flag for this in #222\n. What would the command formatting be? right now we default to vim -O $files. you want to drop the -O?\nwe can make an env variable for this\n. on the way!\n. Awesome! thanks\n. Do you mean just in the README? theres some progress over on 205 in terms of potentially removing one of the conditions from the bash script, but we wont likely be able to run fish-y commands with fpp anytime soon.\nBut if you just mean in the README it'd be quite easy! Would have accepted the PR for that\n. Sweet. I just made a new release and uploaded to brew so ill update the readme\n. This is absolutely awesome! Really appreciate the thorough test coverage and cleanup along the way @gsheld. I'll take a deeper look tomorrow with some nits, but this can likely go in with minimal change.\nI agree that combining with a preconfigured command mode is nice. maybe provide a few example commands for git to isolate the bookmarks? for example, mercurial outputs something like:\n[pcottle:~/www:(explainNoMethods)]$ hg book\n   betterStats.preamend      1095557:c0e02bfc109b\n   debugSF                   1098767:f13654075612\n   emailRoundups             1095558:6cd95011bcf3\n * explainNoMethods          1102007:d620f805c859\nso if we matched on all text, you couldn't pipe it straight into hg update. git branch is a bit better but technically the currently checked out branch will have the * :P\nalso might have been nice to splice the file => path codemod into another PR, but nbd. im pretty lazy when interchanging the two, even though they arent technically equivalent\n. Alright more or less looked over everything -- some inline suggestions and nits that you can do in a followup (ideally), but this can go in! thanks again\n. Looks great! Ill try to add some UI tests after this goes in\n. Boom! now with test coverage too. thanks again @gsheld \n. ```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:allowDisableSplit]$ ./scripts/buildAndTest.sh \nPep8 Compliant!\nTested 11 cases for all-input matching.\n.Tested 58 cases for file fuzz.\n.Tested 58 cases.\n.Tested 7 dir cases.\n.Tested 53 resolvable cases.\n.Tested unresolvable case.\n.\n\nRan 6 tests in 0.114s\nOK\n.\n\nRan 1 test in 1.321s\nOK\nTests passed!\n```\n. passed locally so I'm assuming this is good\n. Hey @joanna-chen ! Thanks for the PR but I actually rely on the pep8 formatting to decide all of this kind of stuff. If I merge this we actually end up not being pep8 compliant:\n```\npcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ autopep8 -i -r ./src/\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ git status\nHEAD detached at origin/pr/215\nChanges not staged for commit:\n  (use \"git add ...\" to update what will be committed)\n  (use \"git checkout -- ...\" to discard changes in working directory)\nmodified:   src/format.py\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:]$ git diff\ndiff --git a/src/format.py b/src/format.py\nindex 2535817..0f47159 100644\n--- a/src/format.py\n+++ b/src/format.py\n@@ -57,7 +57,8 @@ class LineMatch(object):\n         (path, num, matches) = result\n     self.originalPath = path\n\n\nself.path = path if allInput else parse.prependDir(path, withFileInspection=validateFileExists)\nself.path = path if allInput else parse.prependDir(\npath, withFileInspection=validateFileExists)\n         self.num = num line = str(self.formattedLine)\n\n```\n\n\nand that would fatal some of the scripts we have, so i wont merge this for now. thanks for the suggestion though! i highly recommend autopep8\n. Ah yes, because you might not have permissions :) great point! merging now, thanks a bunch\n. Hey @maikelmeyers,\nCan you describe your use case more? Fzf already allows selecting arbitrary input so I'm curious what the filter step on fpp would be used for.\nHistorically we've tried to stay away from the fzf workflow since they do such a better job at it :)\n. > the pre-filter filters all lines from the input which contain a file path (i.e. grep output).\nwould it simply output the lines that have a filepath match (as they came in) or would it output specifically the path in isolation? like say for:\n```\nasd dsa ~/real/path/to/file.py\noutput this?\nasd dsa ~/real/path/to/file.py\nor this?\n/home/pcottle/real/path/to/file.py\n```\nthis might be easy to do depending on the workflow, but i think integrating fzf as the selector would be quite difficult :-/\n. No worries -- helpful to hear your use case anyways :) glad you got unblocked!\n. and yeah with the \"command\" argument you can pass to fpp, you can wrap it easily in custom functionality\n. Thanks a bunch! @pallavagarwal07 do you mind just taking a quick sanity check look? We have pallavagarwal07 to thank for all the debian support, even if it wasn't 100% perfect :)\nThe explanation and code seems straightforward here though, so think this should be safe to merge.\n. Can you attack the full input to fpp somewhere in a gist, and maybe your directory structure?\nits expected we can catch spaces in names if they have a leading slash, but not if they are in the current directory (no leading slash)\n. Yeah, this is expected :( since the folder doesnt start with a leading slash, we can't recognize it. if we had to do all combinations of spaces + words before every input we'd quickly have a big performance problem.\nif we had something like\n./Spaced Project/a.txt\nthat would match it, but git outputs its paths in the way it chooses. sorry man!\n. thanks. double the commit points for a single change :)\n. Thanks for putting this up @ngavalas ! I'll go find the other issue we had with interactive vim mode and let them know we are adding a flag.\nTravis CI seems to have caught something:\nTraceback (most recent call last):\n  File \"testScreen.py\", line 15, in <module>\n    import screenTestRunner\n  File \"/home/travis/build/facebook/PathPicker/src/__tests__/screenTestRunner.py\", line 16, in <module>\n    import choose\n  File \"../choose.py\", line 17, in <module>\n    import screenControl\n  File \"../screenControl.py\", line 13, in <module>\n    import processInput\n  File \"../processInput.py\", line 19, in <module>\n    from usageStrings import USAGE_STR\n  File \"../usageStrings.py\", line 9, in <module>\n    from screenFlags import ScreenFlags\n  File \"../screenFlags.py\", line 49\n    return self.args.non_interactive\n                                   ^\nTabError: inconsistent use of tabs and spaces in indentation\nTests failed :*(\nThe command \"./scripts/buildAndTest.sh\" exited with 1.\ncan you try fixing it up and running the script again locally?\n. :tada: !! And our contributor count goes up by one haha. feel free to send a diff for the internal version so you dont have to wait for me to sync it over\n. > Is there a reason or some background you can point me to on why fpp doesn't just exec the process?\nI'm not a bashrc expert at all, but if you just blindly \"exec\" the process from either python or the wrapper bash script, it doesnt attach to TTY so your editor runs in the background with no one interacting with it.\nthe reason why we have all these hacks is because we want to go from:\n- piped input\n- interactive screen (TTY)\n- then either a straight command to execute OR another interactive screen (vim emacs or whatever)\n. Yeah, this is tricky since we the file both does not begin with a character and has no extension :-/ the .DS_STORE files are supposed to be ignored via most git configs btw, I would heavily suggest doing that\ni can add a test to match the examples/.DS_STORE result, but its a bit harder to match ./examples/.DS_STORE for a variety of reasons.\n. woo! got ./examples/.DS_STORE also :) will close this when i merge the PR\n. (also youll need to install from master once this gets merged :P )\n. > I know cleanup PR might not always be welcomed, but my editor flash red, so it annoyed me. \nnot at all, really appreciate it! I dont have any local linting set up, and I wish I did :P\n. Can you try adding some fish detection to this line:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L173\n? Seems like zsh doesnt mind that block, but fish does\n. I think so! Sorry for not updating sooner\n. Thanks for the fix!!\n. AHhhhh I swear I googled this and never got it to work. thanks so much, especially for adding the test! :tada: \n. i might whip up a release in a few days, since this is pretty nice to have\n. New release is live!\nhttps://github.com/Homebrew/homebrew-core/pull/370\n. \ud83c\udf89 \ud83d\udc4d  sounds great to me\n. @8v060htwyc can you clarify what this PR does?\n. Going to close out since its not clear what this does. new homebrew release is at:\nhttps://github.com/Homebrew/homebrew-core/pull/370\n. Can we add the fix I outlined above? I think just modifying the python is sufficient!\n. > Probably an overabundance of caution (this is actually my first PR ever).\nNo worries at all, welcome to the club! Glad you chose PathPicker with the honor \ud83d\udc4d \nThis looks great now, i'll go ahead and merge. Not sure when our next release is, we kinda just had one recently, but it will go out with the next release!\n. oooh yeah of course, i knew we probably referenced this directory elsewhere. sorry that merge was so half-baked @edentsai but thanks for putting up the fix!!\n. Woah this is very cool! \ud83d\udc4d  \ud83c\udf89  Do you think we should leave this as an actual command, or do you think its performant enough to just do it on hover?\n\ntestScreenInputs test failed, presumably because the sidebar options below mine aren't where the tests expect them to be.\n\nAh yeah, you'll have to regenerate a few tests. Honestly the easiest way is to just delete the files that fail, since if they don't exist, on the first run it will write out the expected output.\n```\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src/tests:master]$ rm ./expected/simpleLoadAndQuit.txt \n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src/tests:master]$ python testScreen.py \nCould not find file ./expected/simpleLoadAndQuit.txt so outputting...\nF\n======================================================================\nFAIL: testScreenInputs (main.TestScreenLogic)\n\nTraceback (most recent call last):\n  File \"testScreen.py\", line 202, in testScreenInputs\n    self.compareToExpected(testCase, testName, screenData)\n  File \"testScreen.py\", line 212, in compareToExpected\n    self.compareLinesToExpected(testName, actualLines)\n  File \"testScreen.py\", line 229, in compareLinesToExpected\n    self.outputIfNotFile(testName, '\\n'.join(actualLines))\n  File \"testScreen.py\", line 247, in outputIfNotFile\n    'File outputted, please inspect %s for correctness' % expectedFile)\nAssertionError: File outputted, please inspect ./expected/simpleLoadAndQuit.txt for correctness\n\nRan 1 test in 0.034s\nFAILED (failures=1)\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker/src/tests:master]$ python testScreen.py \nTested simpleLoadAndQuit \n...\nTested longListEndKey \n.\n\nRan 1 test in 1.379s\nOK\n```\n. > Calling on hover is a good idea--only worry would be performance of getLengthInLines on files with a lot of lines as that particular function scales linearly with the size of the file, while the others should be relatively constant.\nhrmmm true. yeah we can leave it as a command then. that way we could add extra rows without performance considerations, maybe even git status one day!\nSounds good! thanks for the PR\n. Alright super close @rjdean123 ! Do you mind making the changes to clearSegment, testing with an extra long line width to see what off-screen-printing produces, and then trying to address the other comments if they arent too hard? I think this is a case where id be fine \"shelling-out\" to get some of the outputs of these commands, like the size of the file in human-readable terms (as long as its a bash builtin).\nanyways excited to merge this after an update :)\n. \ud83c\udf89  \ud83c\udf89  \ud83c\udf89  great feature addition @rjdean123 ! merged this all in. as extra credit do you want to try submitting a test case for this? if you go modify src/__tests__/testScreen.py you could add a test case like:\n'name': 'selectDownSelectInverse',\n    'inputs': ['f', 'j', 'f', 'A'],\n}, {\n    'name': 'testDescribeFile',\n    'inputs': ['d'],\n    'input': 'gitDiffSomeExist.txt',\n    'validateFileExists': True,\n    'withAttributes': True,\nas long as its a real file it should all work and we can get a test file to assert this all works\nthen ill get off my butt and add a new release soon...\n. its almostttt what we want -- the issue is that since the screen is by default narrow, the sidebar doesnt show, so your command output doesnt show. thats what im trying to get test coverage over\ni think you want to add\n'screenConfig': {\n         'maxX': 201,\n         'maxY': 40\n     },\nto your test case. then delete the file and re-run the test and make sure the output file as your command description area\n. Oh dangit yeah, that's tricky. That must mean that doing the ls and cat commands on the file ends up recording it as accessed.\nIf that's the case, is it worth having that line in the output? Its basically always going to be the current day / second if describing the file accesses it, right?\nFrom: Ryan Dean notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Saturday, July 23, 2016 at 2:17 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, Comment comment@noreply.github.com\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\u0002amp\u0003#109;\u0002amp\u0003#101;\u0002amp\u0003#110;\u0002amp\u0003#116;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] added test case for describe file feature (#234)\ngah, failing because the 'last accessed' line is different each run, will look more into this when I get some time tomorrow\n\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/pull/234#issuecomment-234740963, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn_08xZn3KwSNB0R3TQpbdLCW_gFKks5qYoUFgaJpZM4JTRpj.\n. ```\nTraceback (most recent call last):\n  File \"testScreen.py\", line 209, in testScreenInputs\n    allInput=('-ai' in args or '--all-input' in args),\n  File \"/home/travis/build/facebook/PathPicker/src/tests/screenTestRunner.py\", line 62, in getRowsFromScreenRun\n    choose.doProgram(screen, flags, CursesForTest(), lineObjs)\n  File \"../choose.py\", line 42, in doProgram\n    screen.control()\n  File \"../screenControl.py\", line 359, in control\n    self.processInput(inKey)\n  File \"../screenControl.py\", line 443, in processInput\n    self.describeFile()\n  File \"../screenControl.py\", line 349, in describeFile\n    self.helperChrome.outputDescription(self.lineMatches[self.hoverIndex])\n  File \"../screenControl.py\", line 77, in outputDescription\n    self.outputDescriptionPane(lineObj)\n  File \"../screenControl.py\", line 122, in outputDescriptionPane\n    lineObj.getOwnerUser(),\n  File \"../format.py\", line 130, in getOwnerUser\n    output = subprocess.check_output(bashCommand.split())\nAttributeError: 'module' object has no attribute 'check_output'\n\nRan 1 test in 0.912s\nFAILED (errors=1)\nTests failed :*(\n```\nhrm, seems like the tests fail now. mind checking? so close!\n. ooooh ugh i know why. its because the files are \"new\" when they get slurped over to travis and probably have different ownerships or whatever, so the expected values are different\nthere are two options:\n- use dependency injection / mocking to stub out the data returned. thats harder probably\n- add a simple ignoreLines: parameter to the test config that just ignores comparing the passed in lines:\nignoreLines: [45, 49, 51, 53]\nthat way we still execute the code, we just dont care what those specific lines are -- since they will change all the time\nsorry about the trouble here! i just want to double check your code is executing and tested -- even if we dont compare the output, getting it executing means if it throws a fatal we will catch that.\nand it sounds like it caught the 2.7/3.0 issue already :)\n. No worries!\nFrom: Ryan Dean notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Wednesday, August 31, 2016 at 9:24 AM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, Comment comment@noreply.github.com\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\u0002amp\u0003#109;\u0002amp\u0003#101;\u0002amp\u0003#110;\u0002amp\u0003#116;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] added test case for describe file feature (#234)\napologies this is taking so long, got quite busy at the end of the summer/start of the new year. should be good to work on this this weekend.\n\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/pull/234#issuecomment-243819492, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn3Hm1BwO8enr_6y_ZQ1-zBg4O8eFks5qlaqggaJpZM4JTRpj.\n. closing out since its stale\n. You'd also lose all aliases as well. Are you ok with that?\n. Ok cool! We can add this to the ever-growing list of random environment variables that tweak functionality :P\nDo you want to send the PR or should I? Should be fairly easy to whip up\n. https://github.com/facebook/PathPicker/blob/master/src/output.py#L88 is a good example, as well as\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L120\nyou probably want to modify this logic:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L173\nlemme know if you have other q's!\n. bit stale, closing this out. Can you attach a picture? id be open to changing it, curious how much better it looks\n. Hrm, so we use the curses API to do all of our screen printing and curses only has these colors:\n```\n    COLOR_BLACK   0\n    COLOR_RED     1\n    COLOR_GREEN   2\n    COLOR_YELLOW  3\n    COLOR_BLUE    4\n    COLOR_MAGENTA 5\n    COLOR_CYAN    6\n    COLOR_WHITE   7\n\n```\nbut we can change the rgb values of a given color. can you provide the rgb for bright white?\n. sorry this sat in my queue for a while! had some PTO. \n\nHardcoding RGB to \"maximum white\" might be too outstanding in case of a low-contrast color scheme.\n\nso you think we shouldnt change the RGB for the default white we use? \nare you looking to increase contrast across all the text that is displayed or simply the current selection?\n. youre right after testing this out it is much better! just shipped the change and re-generated all the tests with attribute mapping \ud83c\udf89 \n. Can you attach your fpp version? We had an issue with an exception getting thrown in some of the older versions that prevented navigation\n. worked fine for me in normal terminal:\n\nlet me try iterm\n. yeah worked again :-/\n\ndoes entering command mode work perhaps? if you control-c when it hangs, do you get a stack?\n. oh nowwwww i can repro. im guessing this has to do with the amount of prepended text in the match lines. let me try to investigate tmr during a normal workday\n. alright got a call stack! its an infinite loop in updateDecoratedMatch:\n```\nTraceback (most recent call last):\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 100, in \n    curses.wrapper(lambda x: doProgram(x, flags))\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/curses/wrapper.py\", line 43, in wrapper\n    return func(stdscr, args, *kwds)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 100, in \n    curses.wrapper(lambda x: doProgram(x, flags))\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/choose.py\", line 42, in doProgram\n    screen.control()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/screenControl.py\", line 362, in control\n    self.processDirty()\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/screenControl.py\", line 602, in processDirty\n    self.lineObjs[index].output(self.colorPrinter)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/format.py\", line 269, in output\n    self.updateDecoratedMatch(maxLen=spaceForPrinting)\n  File \"/Users/pcottle/Dropbox (Facebook)/wip/PathPicker/src/format.py\", line 231, in updateDecoratedMatch\n```\n. Woohoo!! Fixed the bug and added test coverage \ud83c\udf89 \ud83c\udf89 \ud83c\udf89 . Thanks again for the bug report @ptzz and insisting that there was an issue when i couldnt repro at first :P\nturns out it was a pretty brutal but easy to make mistake around forgetting to take into account the prepended text when figuring out the max length. most inputs dont have long prepends which is why it wasnt easy to repro at first\n. Lets merge into #235 . I gave a few links to code in there if you want to take a stab at putting up the PR :)\nI agree that some bashrcs can be quite heavy, but when most people used command mode they assumed their aliases would work. so we developed for that scenario\n. I meant the variable name, exist_status instead of exit_status.\nDo you mind updating the PR with that commit and we can put it through the travis build again? #240  should have solved the build and if its green I'll merge it.\nThanks again @weakish for the PR and for teaching me about shells\n. Great! Thanks for the contribution \ud83c\udf89 and the build is passing too\n. Thank you!! Was wondering why it passed locally but the build was failing\n\ud83c\udf89 \ud83c\udf89 \n. Alright cool we can boldify these colors as well!\nHowever if you look at:\nhttps://github.com/facebook/PathPicker/commit/2c6e55a3f40c8d3e540af7184d57033b387600aa\nI had to add an expected mapping for that new color attribute for the screen tests, and then regen a lot of the tests since their output has \"changed\" to some degree. its a bit of a pain so I'll go ahead and do it for you, but let me know if you want to get added as a contributor with some other change\n. You're totally right -- gah. It's hard to get test coverage in this area since it relates to the actual bash execution.\nwill fix in a moment, thanks for the report!\n. Ah yes, this is leftover from when FPP was developed internally at Facebook. We have some code search / grepping tools that return paths that are absolute but without the preceding slash, and all of our repos are mounted off of our homedir like:\n[pcottle:~/www:(changeFoo)]$ pwd\n/home/pcottle/www\nhence, thats why the hack is there. we have a few thousand users internally so im hesitant to remove it, but you could just drop those two lines from your local version if you want.\nor we could add yet another env variable that turns it off :P\n. Can you try with fpp -nfc? its likely because of that top level www match\n. Try removing the www here:\nhttps://github.com/facebook/PathPicker/blob/master/src/repos.py#L16\n. resolved in #246 246\n. oh whoops, this wasnt the home dir one.\nbut related. removing www from that array will fix it\n. Can we split this out as two different PR's? One just adds that D key and the other changes the vim functionality right?\n. split it up -- i cant split it from my end :) thx for the contributions though!\n. closing out -- looking forward to the split version!\n. lol yet another env variable! :P thanks for adding the fix though \u221a\n. Haha nah its fine, I just meant that theres no good configuration file or anything so we just keep adding boolean ones :P nbd\nFrom: Matteo Landi notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Friday, September 23, 2016 at 3:21 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, Mention mention@noreply.github.com\u0002amp\u0003#109;\u0002amp\u0003#101;\u0002amp\u0003#110;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] Add support for disabling prepending home with slash (#246)\n@pcottlehttps://github.com/pcottle Did I take you too seriously when you proposed to fix it with a new env variable? Ooops :P\n\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/pull/246#issuecomment-249316251, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn1WCADG0I4F8-obtX-lIoqW4kUpyks5qtFECgaJpZM4KEYfM.\n. yeah this is expected, since its not part of our file name regex. do you have a use case in mind?\n. Good catch! I must have been lazy and just copied the shortcut that renders for me. thx for the issue -- must have been incorrect for years :O\n. Yeah, that's why its an easy mistake to make. Tested it \"myself\" but not a good test plan clearly\nFrom: nizamsp notifications@github.com\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#102;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#105;\u0002amp\u0003#111;\u0002amp\u0003#110;\u0002amp\u0003#115;\u0002amp\u0003#64;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nReply-To: facebook/PathPicker reply@reply.github.com\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#64;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nDate: Tuesday, October 4, 2016 at 1:45 AM\nTo: facebook/PathPicker PathPicker@noreply.github.com\u0002amp\u0003#80;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#80;\u0002amp\u0003#105;\u0002amp\u0003#99;\u0002amp\u0003#107;\u0002amp\u0003#101;\u0002amp\u0003#114;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nCc: Peter Cottle pcottle@fb.com\u0002amp\u0003#112;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#116;\u0002amp\u0003#116;\u0002amp\u0003#108;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#102;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;, State change state_change@noreply.github.com\u0002amp\u0003#115;\u0002amp\u0003#116;\u0002amp\u0003#97;\u0002amp\u0003#116;\u0002amp\u0003#101;\u0002amp\u0003#95;\u0002amp\u0003#99;\u0002amp\u0003#104;\u0002amp\u0003#97;\u0002amp\u0003#110;\u0002amp\u0003#103;\u0002amp\u0003#101;\u0002amp\u0003#64;\u0002amp\u0003#110;\u0002amp\u0003#111;\u0002amp\u0003#114;\u0002amp\u0003#101;\u0002amp\u0003#112;\u0002amp\u0003#108;\u0002amp\u0003#121;\u0002amp\u0003#46;\u0002amp\u0003#103;\u0002amp\u0003#105;\u0002amp\u0003#116;\u0002amp\u0003#104;\u0002amp\u0003#117;\u0002amp\u0003#98;\u0002amp\u0003#46;\u0002amp\u0003#99;\u0002amp\u0003#111;\u0002amp\u0003#109;\nSubject: Re: [facebook/PathPicker] git clone link is wrong in the readme file (#248)\nThank you! I was also wondering how come a 3021 star rated repo had this bug. I think you have reached only half of the potential users :)\nThe clone link would have worked for you since you own the repo.\n\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/issues/248#issuecomment-251329886, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn7iQFkUMTQ_tYLDHS2zicEm8Nq97ks5qwhItgaJpZM4KM1Sn.\n. can you give me a repro of the input you got where this happened? how many files are we talking?\nI think if you pipe in 1,000 files it might just hang for a while but im not sure\n. Ah yeah, I can repro. its likely due to the fact that it tries to render the selection and it goes off screen\njustasec\n. Fixed! \ud83c\udf89  and with some test coverage -- sorry this was clowny, I should have anticipated hundreds (or really just more than the screen height) of files would get added \n. Gah, so I'm trying to change this but I only get the \"edit\" link for personal repos:\n\nlet me ping other engineers who might have the right permissions to edit the repo description\n. Think it's fixed!\npcottle:~/Desktop:]$ curl https://api.github.com/repos/facebook/PathPicker > foo.json\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  6433  100  6433    0     0   8721      0 --:--:-- --:--:-- --:--:--  8716\n[pcottle:~/Desktop:]$ cat foo.json | jq .description\n\"PathPicker accepts a wide range of input -- output from git commands, grep results, searches -- pretty much anything.After parsing the input, PathPicker presents you with a nice UI to select which files you're interested in. After that you can open them in your favorite editor or execute arbitrary commands.\"\nbtw whats that http command you have?\n. I agree! However I don't even know where we would get started with this -- we have a lot of dependencies on bash/other shells for executing the script, and python curses doesn't work on windows either :-/\nclosing this out since I don't think we'd reasonably get to it, but it'd be great to see someone spiritually implement the same over in windows\n. \ud83c\udf89 \ud83c\udf89 \ud83d\udc4d \nthanks a ton! this is great, commented inline on my guess at how this even worked beforehand but curious if you have any theories.\n. Hrm, most people at work I talk to prefer columns rather than tabs (just because its immediately clear that $x files are open). And my other worry is that this has been the default behavior for over a year, and changing in this release would be a bit thrashy\nwould you be open to putting this behind some kind of system flag? . This is all greek to me; I trust the contributor community knows more than me :) thanks for the PR!. (next time we have a release this will be reflected). [pcottle:~/Desktop:]$ tar -czf crisis_launches.xlsx ./practice/ worked!. whoops i overwrote my excel file lol. but it still works. hrm @Boruch-Baum what do you mean? Forgive me but i have zero experience with *nix distributions, its all been written by external contributors.\nthe tar file is there for me. for debian we have a separate script that makes the release. Sorry for the delay -- was offline for the holidays. Did you clone the repository with git or just download a zip? I believe the debian script assumes its in a git repository and tries to clean up after itself. it shouldnt delete its own script though -- thats probably an issue with one of the assumptions breaking. Can you attach a screenshot? We often \"shorten\" the path with three dots so the full thing can be displayed in the terminal, and we assume the end of the path is more important than the front. OOoh yeah, this is actually upstream of our code and we can't do anything. Git for whatever reason checks if its getting piped into a stdin and decides to (not-so-)helpfully shorten and prepend the paths, and then we can't open them\n--numstat is the way to go. thanks @devisnik  for the fix. This PR doesn't appear to change any files/do anything? Any context you want to add @vikramojha89 ?. What shell were you actually using? I'm on 10.12.3. We delegate to shell only if we think we are in a bash or zsh environment\ncan you check what $BASH or $ZSH_NAME were outputting?. yeah this is quite odd, we can add in a hack to fix this but i'm just deciding the best course of action.\nshould we check $SHELL exists and, if so, then call it? what if they fix shell to resolve to /usr/bin/false? then the check becomes true and we have the same problem.\nshould we perhaps instead just check explicitly for $BASH and call $BASH for that case, and then shell for ZSH name?\nI'm leaning towards the latter but curious what you think.. comparing exactly to /bin/false seems odd -- could we instead do a check that shell exists as a file/executable?\nyoull have to forgive me for asking but my bash is really weak, i always have to google \"how to determine if file exists in bash\".... [pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nUsing previous input piped to fpp...\nnothing to do!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ SHELL='/bin/false'\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nUsing previous input piped to fpp...\nYour SHELL bash variable /bin/false does not exist, please export it explicitly\nnothing to do!\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ SHELL='/bin/bash'\n[pcottle:~/Dropbox (Facebook)/wip/PathPicker:master]$ ./fpp\nUsing previous input piped to fpp...\nnothing to do!\nalright should be fixed now! when installed off master. No problem!\nFrom: Heath Borders notifications@github.com\nReply-To: facebook/PathPicker reply@reply.github.com\nDate: Tuesday, April 4, 2017 at 5:45 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\nCc: Peter Cottle pcottle@fb.com, State change state_change@noreply.github.com\nSubject: Re: [facebook/PathPicker] Command fails when on OS X 10.12.4 when $SHELL isn't defined (#259)\nNice! Thanks!\n\u2014\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/issues/259#issuecomment-291692701, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRnx1eG673_p8uikYtmZpooe2qZXWZks5rsuQhgaJpZM4MsPZo.\n. can you paste your fpp --version? we fixed a few things relating to screen sizes recently. Ah yes I can repro, really has to get quite short height-wise to reproduce this :) . Thanks for the report @saveriomiroddi ! Should be fixed now, was actually quite simple. Yep! This was assuming that the lineObjs was always greater than the screen height which, as you found, is not a valid assumption :)\nthanks for the report! \ud83c\udf89  easy fix. thanks so much for taking a stab at this! cool to see people put up PR's for ideas :)\n\nI've noticed that just running scripts/buildAndTest.sh on my system (as instructed in CONTRIBUTING.md) is not enough - it needs to be run on all the Python supported versions.\n\nyeah so its a bit annoying, since it just uses the python in the path variable. i have python 3.something installed as python3 and just hack the script to use that instead (or set a higher priority path variable that uses that)\ni see that you extend the command display interface to show each command that you have binded. a few ideas:\n- this might not scale if people add dozens of commands, and since this is a power user feature anyways, why not perhaps just dont change the display at all?\n- related to that, an alternative would be to have a single command that shows the list of binded commands (full screen) that you can then exit out of with a single keypress.\nbut yeah seems like we need to change to configparser in python 3+:\nOK\nTraceback (most recent call last):\n  File \"testScreen.py\", line 15, in <module>\n    import screenTestRunner\n  File \"/home/travis/build/facebook/PathPicker/src/__tests__/screenTestRunner.py\", line 16, in <module>\n    import choose\n  File \"../choose.py\", line 20, in <module>\n    from keyBindings import KeyBindings\n  File \"../keyBindings.py\", line 2, in <module>\n    import ConfigParser\nImportError: No module named 'ConfigParser'\nTests failed :*(\nhttps://docs.python.org/3/library/configparser.html\n. > OOOK, I've commented everything. I will update the PR with the proposed changes. It will take some time because I've never programmed in Python, and I will need to maintain a good quality :-) So please bear with me :-)\nno problem at all!! this is a great first stab if you've never programmed in python; my apologies that you have to handle both python2 and python3, and the APIs are slightly different. maybe now you know why the transition to 3 has been stalled for years :P\ngood luck with the update, and yeah adding some tests would be nice but if its overly difficult I wouldnt stress about it. I can do some manual testing locally, and it seems like the codepath doesnt really change if you dont have this config file.\nrelated to that -- can we only change the display of the hotkey bindings if you have a config file in place? that will prevent you from having to modify a bunch of test files. > Before removing the display code with the current commit, nothing additional (compared to a configuration without bindings) was displayed when there were no bindings defined - am I misunderstanding?\nnope, that comment isnt relevant anymore if you dont display the bindings at all :) I was just suggesting two options -- dont show the bindings at all, or only show them if you have a config file (and dont include a config file in the test cases).\nit seemed like your original version of this PR added a bindings file for all the test cases, so all the test cases would have to be updated. but thats no longer relevant if we hide them :). hrm python test*.py fails in the unittest console:\nAttributeError: 'module' object has no attribute 'testParsing'\nguess that was the only polish I was going to add to this, looks great! thanks for the PR @smiroddi \u221a. Yeah the more appropriate thing here is to perhaps just use history + eval with something like:\neval \"$(fc -ln | tail -2 | head -1)\" | fpp\nthis worked for me, for example doing:\n```\n\nls -la\neval \"$(fc -ln | tail -2 | head -1)\" | fpp\n```\nand I was able to get the ls output piped into fpp. with a short alias that might make for a nice solution\n\nbut I do think having it re-execute as the default behavior is a bit too aggressive, especially when the last command could have been something destructive!\nthanks for dropping by with the feedback though. \ncan you clarify? ls -l | fpp works fine for me. Ooooh i see what you mean. Yeah sadly we only support one match per line, it'd be a huge overhaul to support multiple matches in a given line. Sadly this is probably out of scope, but you could try splitting on '->' in this case and grabbing the first result before piping to fpp.... Thanks for the PR @bgwines ! Do you have example workflow where this is helpful? Its the first I've had a request for -a so I'm just curious :P\nThis seems pretty clean though, think it's fine to merge even without a test. I'll try to add one though. Whoops, didn't make a PR for that but just pushed to master. But that should add a test for this :). Ah cool, thanks for the extra info. And yeah we already have the \u201cA\u201d keystroke to select everything, but if you\u2019re using FPP as part of a pipeline then eliminating keystrokes is always nice :P\nHave a nice weekend too!\nFrom: Brett Wines notifications@github.com\nReply-To: facebook/PathPicker reply@reply.github.com\nDate: Sunday, September 3, 2017 at 1:25 PM\nTo: facebook/PathPicker PathPicker@noreply.github.com\nCc: Peter Cottle pcottle@fb.com, Mention mention@noreply.github.com\nSubject: Re: [facebook/PathPicker] Recognize -a cmd-line arg (#268)\n@pcottlehttps://github.com/pcottle, thanks so much! Yeah; my use-case is the following: when switching between branches I want to open all the files that were \"relevant\" last time I was on it, so I can more easily resume that work. An approximation for that set of files is the files that were modified in the last commit on that branch, so I would run git show --name-only | fpp -c subl, then cmd-A, then enter. With this commit I can pass in the -a flag (I tried running it with -ni -ac subl, which would be even better because it cuts out another keystroke, but it didn't seem to work for some reason; perhaps I'm misunderstanding -ni).\nIn an ideal world I could add some sort of hook to get Sublime Text to recognize that I switched branches and have it run this automatically; I should look into that :P\n(I think Sublime Text has a concept of \"projects\" but I don't think it's perfectly suited to this workflow(?) based on preliminary fooling-around and this change is editor-agnostic anyway)\nHave a nice weekend!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/facebook/PathPicker/pull/268#issuecomment-326818628, or mute the threadhttps://github.com/notifications/unsubscribe-auth/ABFRn-d4A1KgVxI-RjCIddNIRXx_CzZIks5seuEagaJpZM4PLFMi.\n. Hrm, this feels more like a downstream issue than upstream solvable by fpp.\nwe could try to guess which editor you have and how many files they support, but that could get out of sync with the version of vim or plugins you have (and we would treat all of vim the same)\nwe could detect an error code and then try again but that'd have to be on the bash level, not inside python where the command formatting happens.\nI don't see a super easy way of supporting this, but happy to review a PR or something more concrete! gonna close out in the meantime. ",
    "frantic": "Was thinking about that as well. For now I think it's okay to leave it undocumented, people who got used to less/vi style g/G will be pleasantly surprised :)\n. @cboden, @kkoch986 - could you please try #16 and see if it works for you?\n. $ brew update\n$ brew doctor\n. > Do you think the default selection colors of red / blue will look OK when using whatever terminal colors we have?\nMany other apps use red and blue colors, so if background doesn't play nicely with these - other apps will look bad as well (git, hg, anything else that does colors).\n. Cool, makes sense!\n. Should be fixed by 577936913642847c6a5bfd5bc232baf9b4a2a9e6. @pcottle - can we roll out another minor release? :)\n. very clever!\n. Definitely cleaner than my attempt #59. Yeah, shopt I think, also bash on osx was weird.\n(P.S. My hack to get $SHELL by invoking ps is so lame)\n. :fireworks: \n. Was thinking about that as well. For now I think it's okay to leave it undocumented, people who got used to less/vi style g/G will be pleasantly surprised :)\n. @cboden, @kkoch986 - could you please try #16 and see if it works for you?\n. $ brew update\n$ brew doctor\n. > Do you think the default selection colors of red / blue will look OK when using whatever terminal colors we have?\nMany other apps use red and blue colors, so if background doesn't play nicely with these - other apps will look bad as well (git, hg, anything else that does colors).\n. Cool, makes sense!\n. Should be fixed by 577936913642847c6a5bfd5bc232baf9b4a2a9e6. @pcottle - can we roll out another minor release? :)\n. very clever!\n. Definitely cleaner than my attempt #59. Yeah, shopt I think, also bash on osx was weird.\n(P.S. My hack to get $SHELL by invoking ps is so lame)\n. :fireworks: \n. ",
    "Chandler": "I couldn't figure out how to make git diff --stat use fully qualified paths but there are some other commands that do work.\ngit diff --numstat HEAD~1 | fpp\ngit diff --name-status HEAD~1 | fpp\n. I ran into this error the very first time I tried fpp and spent a few min trying to figure it out so I imagine the hint would be pretty useful. Especially if we are sure that \"...\" is only used to indicate truncation and not a valid path (... is technically valid).\nCould just put a note about the --stat issue in the readme, since --stat is the example used in the demo.\n. I couldn't figure out how to make git diff --stat use fully qualified paths but there are some other commands that do work.\ngit diff --numstat HEAD~1 | fpp\ngit diff --name-status HEAD~1 | fpp\n. I ran into this error the very first time I tried fpp and spent a few min trying to figure it out so I imagine the hint would be pretty useful. Especially if we are sure that \"...\" is only used to indicate truncation and not a valid path (... is technically valid).\nCould just put a note about the --stat issue in the readme, since --stat is the example used in the demo.\n. ",
    "dannguyen": "Ah yes, I'm on Python 3.x\n. Thanks...I had tried my hand at fixing what seems to be pretty easy changes for 3.x compat but couldn't figure out the pickle errors\n. Ah yes, I'm on Python 3.x\n. Thanks...I had tried my hand at fixing what seems to be pretty easy changes for 3.x compat but couldn't figure out the pickle errors\n. ",
    "vimeitor": "@pcottle I can confirm that it works very well. It's a good first step for sure :).\n. Oh, sorry about that. Yes, being able to run it with both versions of python would definitely be great.\n. @pcottle I can confirm that it works very well. It's a good first step for sure :).\n. Oh, sorry about that. Yes, being able to run it with both versions of python would definitely be great.\n. ",
    "sdornan": "Would love for this to be compatible with Python 3.\n. Would love for this to be compatible with Python 3.\n. ",
    "facebook-github-bot": "Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\nIf you are contributing on behalf of someone else (eg your employer): the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions.\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\nIf you are contributing on behalf of someone else (eg your employer): the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions.. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\nIf you are contributing on behalf of someone else (eg your employer): the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions.. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\nIf you are contributing on behalf of someone else (eg your employer): the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions.. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla. If you are contributing on behalf of someone else (eg your employer), the individual CLA may not be sufficient and your employer may need the corporate CLA signed.\nIf you have received this in error or have any questions, please contact us at cla@fb.com. Thanks!. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\nIf you are contributing on behalf of someone else (eg your employer): the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions.\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\nIf you are contributing on behalf of someone else (eg your employer): the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions.. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\nIf you are contributing on behalf of someone else (eg your employer): the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions.. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\nIf you are contributing on behalf of someone else (eg your employer): the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions.. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla. If you are contributing on behalf of someone else (eg your employer), the individual CLA may not be sufficient and your employer may need the corporate CLA signed.\nIf you have received this in error or have any questions, please contact us at cla@fb.com. Thanks!. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!. ",
    "kkoch986": "had the exact same experience, fixed by changing \nwhile [ -h \"$WHEREAMI\" ]; do\n  WHEREAMI=$(dirname \"$WHEREAMI\")\"/\"$(readlink \"$WHEREAMI\")\ndone\nto \nwhile [ -h \"$WHEREAMI\" ]; do\n  WHEREAMI=$(readlink \"$WHEREAMI\")\ndone\n. works for me\n.  had the exact same experience, fixed by changing \nwhile [ -h \"$WHEREAMI\" ]; do\n  WHEREAMI=$(dirname \"$WHEREAMI\")\"/\"$(readlink \"$WHEREAMI\")\ndone\nto \nwhile [ -h \"$WHEREAMI\" ]; do\n  WHEREAMI=$(readlink \"$WHEREAMI\")\ndone\n. works for me\n. ",
    "cboden": "works for me as well\n. :+1: LGTM\n. works for me as well\n. :+1: LGTM\n. ",
    "sandyarmstrong": "Yeah, this is pretty annoying. I have the following little patch applied but it can cause some false positives when piping git status output, for example:\n```\ndiff --git a/src/parse.py b/src/parse.py\nindex 8ee9175..1e2283e 100644\n--- a/src/parse.py\n+++ b/src/parse.py\n@@ -22,10 +22,10 @@ import logger\n REPOS = ['www']\nMASTER_REGEX = re.compile(\n-    '(\\/?([a-z.A-Z0-9-]+\\/)+[a-zA-Z0-9-.]+.[a-zA-Z0-9]{1,10})[:-]{0,1}(\\d+)?')\n+    '(\\/?([a-z.A-Z0-9-]+\\/)+[a-zA-Z0-9-.]+)[:-]{0,1}(\\d+)?')\n OTHER_BGS_RESULT_REGEX = re.compile(\n     '(\\/?([a-z.A-Z0-9-]+\\/)+[a-zA-Z0-9.]{3,})[:-]{0,1}(\\d+)')\n-JUST_FILE = re.compile('([a-zA-Z0-9-]+.[a-zA-Z]{1,10})\\s+')\n+JUST_FILE = re.compile('([a-zA-Z0-9-.]+)\\s+')\n FILE_NO_PERIODS = re.compile(\n     '([a-zA-Z0-9-\\/]{1,}\\/[a-zA-Z0-9-]{1,})(\\s|$|:)+')\n```\nBetween this bug and https://github.com/facebook/PathPicker/issues/18, the released fpp is unusable on most of my repositories. But that diff makes it work well enough.\n. @mrjbq7 on Hacker News, the devs said it's because users at Facebook keep their code mounted on network drives, and that would be slow. But they are open to adding it as an option.\n. Your example only works because you provided an absolute path. It fails with relative paths. For example:\nbash\ntouch ~/banana.Project.sln\ncd ~\necho banana.Project.sln | fpp\nls | fpp\nThen you'll see the bad matching. I've tested with latest master.\n. Fixed in https://github.com/facebook/PathPicker/commit/37923571d8efc9020bf793ebb1e2fb1950c53ae2.\n. Duplicate of https://github.com/facebook/PathPicker/issues/18, which needs to be reopened.\n. :100: Thanks!\n. Yeah, this is pretty annoying. I have the following little patch applied but it can cause some false positives when piping git status output, for example:\n```\ndiff --git a/src/parse.py b/src/parse.py\nindex 8ee9175..1e2283e 100644\n--- a/src/parse.py\n+++ b/src/parse.py\n@@ -22,10 +22,10 @@ import logger\n REPOS = ['www']\nMASTER_REGEX = re.compile(\n-    '(\\/?([a-z.A-Z0-9-]+\\/)+[a-zA-Z0-9-.]+.[a-zA-Z0-9]{1,10})[:-]{0,1}(\\d+)?')\n+    '(\\/?([a-z.A-Z0-9-]+\\/)+[a-zA-Z0-9-.]+)[:-]{0,1}(\\d+)?')\n OTHER_BGS_RESULT_REGEX = re.compile(\n     '(\\/?([a-z.A-Z0-9-]+\\/)+[a-zA-Z0-9.]{3,})[:-]{0,1}(\\d+)')\n-JUST_FILE = re.compile('([a-zA-Z0-9-]+.[a-zA-Z]{1,10})\\s+')\n+JUST_FILE = re.compile('([a-zA-Z0-9-.]+)\\s+')\n FILE_NO_PERIODS = re.compile(\n     '([a-zA-Z0-9-\\/]{1,}\\/[a-zA-Z0-9-]{1,})(\\s|$|:)+')\n```\nBetween this bug and https://github.com/facebook/PathPicker/issues/18, the released fpp is unusable on most of my repositories. But that diff makes it work well enough.\n. @mrjbq7 on Hacker News, the devs said it's because users at Facebook keep their code mounted on network drives, and that would be slow. But they are open to adding it as an option.\n. Your example only works because you provided an absolute path. It fails with relative paths. For example:\nbash\ntouch ~/banana.Project.sln\ncd ~\necho banana.Project.sln | fpp\nls | fpp\nThen you'll see the bad matching. I've tested with latest master.\n. Fixed in https://github.com/facebook/PathPicker/commit/37923571d8efc9020bf793ebb1e2fb1950c53ae2.\n. Duplicate of https://github.com/facebook/PathPicker/issues/18, which needs to be reopened.\n. :100: Thanks!\n. ",
    "mrjbq7": "Why not just use something like os.path.isfile(pathname) to detect files?\n. That makes sense - however, half of my files seem not to have extensions and so this doesn't work very well.  I also, don't see the need to differentiate between files and directories, since opening directories could be a valid use-case, too.\n. +1\n. Why not just use something like os.path.isfile(pathname) to detect files?\n. That makes sense - however, half of my files seem not to have extensions and so this doesn't work very well.  I also, don't see the need to differentiate between files and directories, since opening directories could be a valid use-case, too.\n. +1\n. ",
    "pedrox": "After #50, this issue is actualy about dot files and with no period in the CWD.\nIt seems that those are not detected by design since it's more likely that they are not paths in the input. For the CWD I don't believe checking path existence would be a problem with network drive. Let's patch that.\n. Please, close this as a duplicate of #50.\n. I believe dot files inside directory are not a problem.\nSo the issue is actualy about dot files and with not period in the current directory. Do you confirm? It seems that those are not detected by design since it's more likely that they are not paths in the input.\n. This is a duplicate of #7.\n. Absolutely not.\nEm 08/05/2015 2:05 PM, \"Peter Cottle\" notifications@github.com escreveu:\n\n[image: :tada:] thanks! mind if i add some test coverage for this?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/pull/57#issuecomment-100299891.\n. Describe what do not work.\n. After #50, this issue is actualy about dot files and with no period in the CWD.\nIt seems that those are not detected by design since it's more likely that they are not paths in the input. For the CWD I don't believe checking path existence would be a problem with network drive. Let's patch that.\n. Please, close this as a duplicate of #50.\n. I believe dot files inside directory are not a problem.\nSo the issue is actualy about dot files and with not period in the current directory. Do you confirm? It seems that those are not detected by design since it's more likely that they are not paths in the input.\n. This is a duplicate of #7.\n. Absolutely not.\nEm 08/05/2015 2:05 PM, \"Peter Cottle\" notifications@github.com escreveu:\n[image: :tada:] thanks! mind if i add some test coverage for this?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/pull/57#issuecomment-100299891.\n. Describe what do not work.\n. \n",
    "joni2back": "It makes sense, could be very hard to parse filenames without dots, taking into account that could be combined with another texts :disappointed: \nSo, as @mrjbq7 says, os.path.isfile could be the best option although would be slow\n. It makes sense, could be very hard to parse filenames without dots, taking into account that could be combined with another texts :disappointed: \nSo, as @mrjbq7 says, os.path.isfile could be the best option although would be slow\n. ",
    "CameronBanga": "I'm an idiot. Thought I had ran this morning, must not have. Apologies!\n. I'm an idiot. Thought I had ran this morning, must not have. Apologies!\n. ",
    "n06": "Ah I see, the perils of being on linux and not OS X. I'll change this to just include the scoping for now, and see if I can come up with something else for the path issues later\n. Ah I see, the perils of being on linux and not OS X. I'll change this to just include the scoping for now, and see if I can come up with something else for the path issues later\n. ",
    "SteveByerly": "The issue is that rows need to be nested somewhere in a container. The row in the jumbotron was outside of the container. Based on how the html and css were structured, i updated as made sense to me.\n\n. The issue is that rows need to be nested somewhere in a container. The row in the jumbotron was outside of the container. Based on how the html and css were structured, i updated as made sense to me.\n\n. ",
    "vitaut": "Although all systems I've been working on have writable $HOME/.local/share, I can't say whether this directory is guaranteed to exist, so it's probably safer to check and create if it doesn't.\nOn a closer inspection though.fbPager* files look more like temporary files (are they?) rather than some user-specific settings and could probably be stored in /tmp.\n. I think it's safe to assume that /tmp is writable.\n. :+1: for $HOME/.config/fpp. Adding another, even hidden, directory in $HOME just for one application looks like an overkill.\n. @SamHasler XDG_CONFIG_HOME may not be set by default (it is not set on Ubuntu 14.04 for instance).\n. Although all systems I've been working on have writable $HOME/.local/share, I can't say whether this directory is guaranteed to exist, so it's probably safer to check and create if it doesn't.\nOn a closer inspection though.fbPager* files look more like temporary files (are they?) rather than some user-specific settings and could probably be stored in /tmp.\n. I think it's safe to assume that /tmp is writable.\n. :+1: for $HOME/.config/fpp. Adding another, even hidden, directory in $HOME just for one application looks like an overkill.\n. @SamHasler XDG_CONFIG_HOME may not be set by default (it is not set on Ubuntu 14.04 for instance).\n. ",
    "zkanda": "I think it's safe to assume that everything under the users directory is owned by the user.\nA lot of projects is either using $HOME/.config or a dedicated folder in home:\nE.g.\n\n. I can confirm this issue,\n\n. Urgh I got a bit confused with rebasing, but yeah I applied your suggestion. :)\n. I suggest breaking this into multiple pr's, being more pythonic is very subjective.\nBut I agree, using property decorator is very pythonic. :)\n. I think we can already revert the changes made here: https://github.com/facebook/PathPicker/blob/master/fpp#L32\n. Woot! The latter seems scary to implement. :hankey: \n. tox dependencies is just virtualenv and pylib.\nSuccessfully installed py-1.4.27 tox-1.9.2 virtualenv-12.1.1\n. Fixes #78 \n. I think it's safe to assume that everything under the users directory is owned by the user.\nA lot of projects is either using $HOME/.config or a dedicated folder in home:\nE.g.\n\n. I can confirm this issue,\n\n. Urgh I got a bit confused with rebasing, but yeah I applied your suggestion. :)\n. I suggest breaking this into multiple pr's, being more pythonic is very subjective.\nBut I agree, using property decorator is very pythonic. :)\n. I think we can already revert the changes made here: https://github.com/facebook/PathPicker/blob/master/fpp#L32\n. Woot! The latter seems scary to implement. :hankey: \n. tox dependencies is just virtualenv and pylib.\nSuccessfully installed py-1.4.27 tox-1.9.2 virtualenv-12.1.1\n. Fixes #78 \n. ",
    "lastquestion": "$HOME/.fpp is preferable to me... that way fpp doesn't have to deal with user issues.\nproposed PR: https://github.com/facebook/PathPicker/pull/77\n. since color code is merged, you can have dark grey versus white bold text pretty easily. you can just print decorated text or i would suggest printing with color pairs using ColorPrinter. Although probably would need to factor out setAttributes into a getAttributeCode(...) and setAttributes (lines 26-40)\n. @pcottle yeah it's a big diff and I also don't like a lot of how I hacked it. I realized this morning that the printing for matched lines can be much simpler now that we can actually inject the attributes we want (underscore, background color) directly into the formatted line; we wouldn't need to print the before(), then middle, then after(). Also, there's some complexity around keeping the formatted_line versus the stripped line and doing matching and keeping the indices in order, but if I'm super awake and actually white board the cases out I think I can rewrite it to use regex and split out the lines into formatted regions.\n- Good point: it should use -1 for the background color so it uses the default. Did someone just add use_default_colors()? I rebased and merged pretty quickly and noticed that but didn't git blame to see how that cropped up; when I was hacking I don't remember it there\n- yes - it should take the input color formatting, apply the right attrs, and only override when the matched line requires it because you're hovering over the proposed link. and i was hella surprised that there wasn't something already out there to do this... I searched but couldn't find anything except a super old post in a google group about it.\nI am going to work on it this weekend a little bit on the plane if I can.\n. @pcottle this is a much, much better implementation. \nThis implementation splits on regex, is much cleaner, simplifies the code for doing decorations on the matches, and works on default light color terms as well. \nI think this is reviewable. I would like to see unit tests and I would write them. Do you have strong preferences on testing infra on python? As I don't usually write python I have none.\n. @pcottle I think in general most pipe tools seem to support color so I personally just have it turned on all the time but I'm not sure... probably we can add something at the readme level mentioning color. \n\nYou can also set it to always to ignore the difference between terminals and pipes. You\u2019ll rarely want this; in most scenarios, if you want color codes in your redirected output, you can instead pass a --color flag to the Git command to force it to use color codes. The default setting is almost always what you\u2019ll want.\n\nI will just update the code w/ your comments and rebase\n. Wow, the amount of code change going in is large...rebasing every day makes me wanna get this in now.\nOK, so I updated per comments, and now we cache the decorated matches actually so I think perf ought to be pretty good. I manually tested on light / dark chrome and ran the test suite. all passed\n. hey @pcottle it would be much easier if README or CONTRIB mentioned that pep8 is required so you don't have to keep on fixing other PR's. It's easy to run and I just didn't know we needed to run it.\n. :+1: this is really nice and I have a parallel PR that's worse then your implementation\n. I have a PR half in flight on this one if you haven't started yet @pcottle which i was gonna try and finish tonight\n. did you decide on a testing infra? prob unittest because it's built into python and wouldn't require a dependecy?\n. oic that's good approach. the mock is nice, also would be super sweet to have a built in logging to stderr or whatever that we can use while dev. I use sys.stderr.write and then remove it when i commit, but a general purpose logger would be useful\n. if we are gonna stick with unittest i'll write some unit tests for the color stuff after the test stuff lands also.\n. Fixed in https://github.com/facebook/PathPicker/pull/99\n. Actually, the only reason I want this is for things like git diff | fpp where I want to examine every line of the diff and if a diff has an issue, I want to quickly open the corresponding file. \nIf I go from one link to another right now, I might lose half a page of diff that I can't read because the diff for the previous file is so big that it spans multiple pages.  In that case, I'd have to open up git diff and then remember which files I wanted to touch and then open up git status and then fpp on that? \nHm, actually 90% of the time I actually probably want page up/down by page, and then up|down on matched line. \nIt might be confuzzling but another option I'd probably want to prototype out as well is \"navigate on matched lines and then page per page\". Terrible description, but what I mean is, up|down move the cursor thru matched lines until it can't find another one on the same page. Then it moves the page forward and shows the next text page, and then you nagivate thru that. It's more of a change to the scroll algorithm.\nHowever this might mean you would scroll to a page w/ no matched text and then you're forced to press down again. And in a very big input I'm not sure if this is better or worse.\n. How do you deal with the situation where when you're looking at git diff the next link forces fpp to scroll down so much you miss some diff?\n. fixes https://github.com/facebook/PathPicker/issues/17\n. I think the import module is a good idea but I didn't want to make a big PR. :+1: \n. @jbnicolai fyi your link is broken. actual link https://github.com/jbnicolai/tmux-fpp\nrandom question, what happens if the output of the last command is greater then the screen buffer size?\n. On the flip side, @pcottle , we can do it the reverse way: consider we only need to do \"crazy stuff\" if the word is basically a file in the current dir, because otherwise it must have some sort of path (whether relative or absolute).\nSo, instead of matching words and then doing a filesystem check, let's just grab a list of all files in the current dir FIRST, and then match against the words.\nThis is basically O(number of files in your local dir only), versus O(size of input).\n. ls could be really slow on a mapped share or if there are tens of thousands of files in the local dir only. IMHO another interesting approach, which would be hard in the current arch: run it as a subprocess during picking, aka let's implement incremental searching. hard work. maybe another major release. prob put the ls under the same experimental flag as for the other file stuff ?\n. :clap: :clap: :tada: let's :beer: \n. we can totally detect unicode even in python2, so a possible approach that would be pretty solid IMHO is to detect, quit and print out \"you need python3 yo: here is #{python --version}\"\nfor ppl with unicode, they'll know that to get what they really want they'll have to get python3, for people who couldn't care less, fpp Will Just Work for almost any unix-y environment, and for people who we detected wrong, they at least know how to fix it or google the right term to fix. (or we can put some info in the diagnostic, too)\n. You can't pipe the output of a curses program, because curses uses stdout with control characters to print to the terminal.\nYou want this feature request: https://github.com/facebook/PathPicker/issues/72 I think.\n. Actually, this is because your console is only about ~30 lines high. \nFixed in PR #92 \n. A couple of thoughts. This is a really solid mocking approach, IMHO.\nit would have been nice to get introspection on the code that runs this; it's pretty hard to read the diffs per commit and there isn't a good branch point to do a complete diff. I hadn't yet merged upstream with my master, so I was able to read the diffs clearly, but that's not always true for everybody.\n1. the curses mock is really needed and good.\n2. Full integration testing - which I would claim this to be - is super important. :clap: :clap: I tend to feel that it's difficult to really cover and exercise all corner cases via integration testing, but on the flip side, just because you test all the components doesn't mean it all works. LOL. So it's super important.\nIt's an interesting conversation, and I generally believe that unit testing is more efficient, tends to be less fragile, and provides more value. I'd like for us to write some unit tests utilizing the new curser mock (which is excellent) and the input module (which is again great).\nTo give a specific example, I would be very interested in writing tests that would exercise the chrome, the scroll bar, the command entry mode, the color printing, the forthcoming x-mode, etc. in a unit testing fashion. \nFor chrome, for example, I would initialize the chrome object, send it the curses wrapper, and then assert that it called addstr at the right places and with the right strings. Then when I say move the scrollbar I assert it clears the right things and then it draws the new scroll bar at the right place. \nThat's not to say the scroll bar is not testable in a replay system, it's just more brittle.\n1. I tend to believe in code versus configuration. It's a bit of a gulp versus grunt conversation. For example, I'd probably want to write tests in python that each specify the inputs and expected outputs, as opposed to configuration based auto-compare against certain files in a directory. \n. > Yeah sorry, I always get freaked out about losing work so I push often. I had a whole separate branch with the ~10 diffs needed for this stacked, but I guess since I rebased instead of squashing+merging it was harder to read. I didn't realize people read commits that closely! I'll try to do better in the future\nI think you had a branch but you merged it and I didn't know which branch it was when I first started reading. I was hoping to read a github branch:branch diff, and I ended up reading my master against upstream master which was clear and not per commit. I think we all commit pretty often nowadays which is why the value of the branch diff is so high now. Like I think screentestDI branch was basically what I was looking for but I couldn't find a merge commit for it in the first couple of commits in master so I got lost. \n\nYeah we've actually seen a big swing towards integration testing internally at FB, and I'm a huge fan of it. \n\nI haven't decided either way how I feel about it yet. This is getting off topic and I would be totally happy to get a beer and discuss this off-line. I do feel that there is value in full stack integration tests but that we don't yet as an industry have good knowledge about how to write unit-integration tests. I want to test the peanut butter glue that lives between the two slices of toast in isolation, as opposed to testing the entire PBJ sandwich as a whole.\n\nMy only worry about asserting individual addstr calls is that you can achieve the final output of the screen in multiple ways (with many different orderings or types of addstr calls), so its fairly implementation detaily\n\nRight, right, the tests would still wait for the entire result to be composed, just like the current integration test does, but would only assert on the correct values of parts of the screen that is \"interesting to that test\", as opposed to the complete screen. \n\nI think tomorrow I'll try to add a mode that records some kind of attribute-based logic, so it shows which parts are underlined and which parts arent.\n\nFor this I would suggest actually writing out the format specifiers using the code in colorprinter; e.g. when you see a setattr in the curses mock, write out the corresponding format specifier. You only need to write a special case when addstr directly holds an attribute too, and that can be easily achieved by saving and then restoring the existing attribute. This way, the resulting recoded output can actually just be catt'ed on the console and get the real, colored and underlined text you're supposed to see. additionally your input can contain the attribute format specifiers as well. \n. I noticed this earlier today. It was introduced by color support. I will open a PR for it today or tomorrow. Thanks for the bug report.\n. Fixed in #100 \n. I need to fix up that PR.... \nTry to generate an input with one match at the end of the line. it should show up on a git diff for example.\n. LOL did you really? I hope you aren't paying too much CPM. ^) Thanks, I'll look at your implementation now and follow up on everything that's happened, I saw your PRs. Thanks again for using PRs, it lets people follow along and understand the code evolution even if they can't get to stuff right that minute. \n. One thing: in fpp: I'd like to remove the matching of record and do that in choose.py, but by doing so, we'd slightly change behavior: we wouldn't print the record text until after processInput finishes. @pcottle: are you fine with that? IMHO it would clean up the code for longer term. Or, we can instantiate a copy of ScreenFlags in processInput and do the outputting there, if you'd like.\n. Another thing: I wanted to support prefilling in the command in command-mode, but it was very difficult to do so. Basically, there isn't a default built in text-box in ncurses, and the only thing that exists that sort of does what we would want is urwid (https://github.com/wardi/urwid), but it's way too heavyweight and the text box there still doesn't support insert-mode.\nI think we should code up our own text entry widget and turn back on the cursor for the command mode if we want to support prefilled in commands from the command line in that screen. I like the idea of it and we should do it in a separate, follow up PR.\n. I'll rewrite to use the lambda and then it should be good to merge?\n. also what's your thought about removing the match of record from fpp and moving it into choose\n. Argh, yeah, revert this.\na) I forgot that we are not stripping the other arguments into argparse\nb) there is something super weird with how \"$@\" is expanded in bash. \nSorry, did you revert it already? to fix it, we  should add the other args to the argparse arguments so it doesn't blow up on --python3 etc.\nfor the other, I think the OPTS expands differently right? I didn't test with --python3 or --ko with -c at the same time for example. My bad again.\n. OK, cool. I'll fetch from upstream, double check. Sorry about that again. Is there a good way for us to test this? It's weird cuz it spans the batch to python land.\n. Also, I cleaned up some magic constants in formattedText.\n. @pcottle : regarding the white space chrome issue - not an issue, the function printUpTo takes care of bounding no matter what kind of input is printed.\nDirtying the line is better though. I will redo the PR\n. Yah, I'll tackle this and the broken #99 later tonight.\n. I think that @jbnicolai may actually be calling the python processes directly.\n. :clap: we should add a test for also adding commands that are picked up at the python level and make sure it eats the right commands and lets the other commands thru. I'll do that. Swamped today w/ real work tho.\n. Yes, very clever. And clearer then a markup based approach. Interesting... could be useful in other applications and context too. :+1:\n. :+1:. interesting design choice! I would have probably done something different with like, markup style, but this is highly readable, which is very nice! Nice.\n. LOL I love it the tests are the sources of fpp itself. #inception\n. This feels good! Comments (mostly just agreeing with you verbosely):\n1. You're right; the bool threading just doesn't feel good. I would advocate for a settings object that's globally accessible; we can repurpose the ScreenFlags class for this, because basically it's about the same kind of issue: \"what are the configurations for this object\". ScreenFlags currently figures out \"what the user set as the configuration\". We can combine the two, make it a singleton object, and call it a day. There is some complication about pickling: when loading a previous pickle, you'd also want to load the previous settings as well, but this can be resolved by pickling the settings as well.\n2. Dealing with matchline: Yes, it's a bit annoying as well. I agree. A bigger refactor here would be needed, but it's also necessary. It's obviously clear because we do file stuff and parsing paths etc in a file called format, LOL. \nBoth of these things are things I will try to make PRs for, but first I want to fix up the space printing dirty/non-dirty thing. :)\n. I'd generally design a readonly singleton that can be assigned as a whole only at certain places; e.g. startup, \"settings page exit\", etc. whatever systems need to be restarted have a clean place to restart and you can rely on settings not changing under you at any time. \nBut all this may be moot. it will be cleaner and less parameter-threading once formatter stops calling parser for file resolving. Let's take a look at it after I try to do that early this week. (Of course you are moving pretty fast, so I dunno whether you've had done a pass of refactoring by then...)\n. I thought about this and maybe we can support left and right arrow to page screen width to the left and right. I'd rather do that then '...' abbrev.\nTo do this, we'd probably want to use pad or implement a more generic dirty / scroll mechanism. Something I'll think about after trying to get a pad PR out. \nNot sure how @pcottle feels...\n. Your argument is sound, it would be annoying to bounce back and forth.\nWe should abbrev so that it \"just fits\" inside the chrome, which is actually a great feature, because right now I think most console break the line, which makes \"click to select\" the biggest pain ever. I know I've done the thing where you select half the line, copy, select the other half, go back halfway to add the missing '/', all the while cursing...\nBecause we are a pipe, I think the tools before us assume \"infinite width screen\", basically, so we have the full path = good so we can resolve it, and we can abbrev as we wish dynamically on display.\nLet's abbrev dynamically \"all the way up to the chrome\".\nIf we get the abbrev algorithm wrong and ppl complain, we can add a feature to \"unabbrev\" with say \".\" as the key and then it could allow left|right paging. but let's try without first, I am pretty sure if we do a dumb algo that makes sure the filename is always visible and abbrevs the middle 99% of people will be happy.\n. I plan to open a follow on PR to use pad so we can actually paint the entire scroll buffer and cache it; curses takes care of painting onto the visible screen via refresh. It will greatly simplify the painting code and also be faster - we will never write a line twice until it changes highlight/hover/select state. I need to do some investigation on size limits though - like I'll try it with 10/50/100k lines and so, make sure it is performant. If so, it'll clean up a lot of code nicely.\n. Yeah, that other fix would have caused a merge conflict. thanks for fixing it up! :+1: \n. Hmmm, on further thought, I think it's OK to use delchar because soon if we use pad we can completely separate the chrome output from the scroll output and there won't be any chrome to fuck up when you're erasing.\nI would prefer option (a) here instead of (b) \n. Yah I mean pad... It also would let us paint the line match txt once and then scroll it up and down without having to reprint the words i think. I am going to experiment first and make sure the documentation isn't missing anything and that it'll work with large buffers (10k lines etc). \n. Unsure. It's why I'm gonna experiment. If the perf/memory is very close (as in ~5%) it's worth moving to pad because our code would be a lot simpler. But if the perf is a big difference then :(\n. Yeah, I think this is good, and also gives us a forward path for more stuff later where we can split the chrome with the scroll. \nI'll open a PR for the pastScreens and then we can add a test for wide like I had before. This will make sure we don't regress with the wide chrome and the delchar. God this dirty code has had 4 PRs against it already. \n. Lol you don't like the 20 line comment I wrote? Haha. Yah both commits do the same thing, so I'm cool w either \ud83d\udc4d\n. :+1: \n. Ooohh, we should fix this better by using the printer instead of stdscr: addstr in that implementation uses default color https://github.com/facebook/PathPicker/blob/master/src/colorPrinter.py#L53\nactually using 0 is also not good, because it's white and i think on a bright console we'd get white on white? I didn't test yet cuz I haven't merged master today\n. I think there's a very small bug where if you're in X mode and you enter command mode, you'll be back in select mode when you are back on the main choose screen. Also I think the color of the text is white only because we are printing the scrollbar chrome right before, so the default color is set. It's not necessary but would be very good to use the color printer to affirmatively default to the default foreground color. (whew). I could do that in my cleanup PR #139 if @pcottle merges this first.\n. Woops, I didn't test --clean.yeah. thanks!\n. #139 will cause this to merge conflict I think. I'll rebase after it gets merged.\n. $HOME/.fpp is preferable to me... that way fpp doesn't have to deal with user issues.\nproposed PR: https://github.com/facebook/PathPicker/pull/77\n. since color code is merged, you can have dark grey versus white bold text pretty easily. you can just print decorated text or i would suggest printing with color pairs using ColorPrinter. Although probably would need to factor out setAttributes into a getAttributeCode(...) and setAttributes (lines 26-40)\n. @pcottle yeah it's a big diff and I also don't like a lot of how I hacked it. I realized this morning that the printing for matched lines can be much simpler now that we can actually inject the attributes we want (underscore, background color) directly into the formatted line; we wouldn't need to print the before(), then middle, then after(). Also, there's some complexity around keeping the formatted_line versus the stripped line and doing matching and keeping the indices in order, but if I'm super awake and actually white board the cases out I think I can rewrite it to use regex and split out the lines into formatted regions.\n- Good point: it should use -1 for the background color so it uses the default. Did someone just add use_default_colors()? I rebased and merged pretty quickly and noticed that but didn't git blame to see how that cropped up; when I was hacking I don't remember it there\n- yes - it should take the input color formatting, apply the right attrs, and only override when the matched line requires it because you're hovering over the proposed link. and i was hella surprised that there wasn't something already out there to do this... I searched but couldn't find anything except a super old post in a google group about it.\nI am going to work on it this weekend a little bit on the plane if I can.\n. @pcottle this is a much, much better implementation. \nThis implementation splits on regex, is much cleaner, simplifies the code for doing decorations on the matches, and works on default light color terms as well. \nI think this is reviewable. I would like to see unit tests and I would write them. Do you have strong preferences on testing infra on python? As I don't usually write python I have none.\n. @pcottle I think in general most pipe tools seem to support color so I personally just have it turned on all the time but I'm not sure... probably we can add something at the readme level mentioning color. \n\nYou can also set it to always to ignore the difference between terminals and pipes. You\u2019ll rarely want this; in most scenarios, if you want color codes in your redirected output, you can instead pass a --color flag to the Git command to force it to use color codes. The default setting is almost always what you\u2019ll want.\n\nI will just update the code w/ your comments and rebase\n. Wow, the amount of code change going in is large...rebasing every day makes me wanna get this in now.\nOK, so I updated per comments, and now we cache the decorated matches actually so I think perf ought to be pretty good. I manually tested on light / dark chrome and ran the test suite. all passed\n. hey @pcottle it would be much easier if README or CONTRIB mentioned that pep8 is required so you don't have to keep on fixing other PR's. It's easy to run and I just didn't know we needed to run it.\n. :+1: this is really nice and I have a parallel PR that's worse then your implementation\n. I have a PR half in flight on this one if you haven't started yet @pcottle which i was gonna try and finish tonight\n. did you decide on a testing infra? prob unittest because it's built into python and wouldn't require a dependecy?\n. oic that's good approach. the mock is nice, also would be super sweet to have a built in logging to stderr or whatever that we can use while dev. I use sys.stderr.write and then remove it when i commit, but a general purpose logger would be useful\n. if we are gonna stick with unittest i'll write some unit tests for the color stuff after the test stuff lands also.\n. Fixed in https://github.com/facebook/PathPicker/pull/99\n. Actually, the only reason I want this is for things like git diff | fpp where I want to examine every line of the diff and if a diff has an issue, I want to quickly open the corresponding file. \nIf I go from one link to another right now, I might lose half a page of diff that I can't read because the diff for the previous file is so big that it spans multiple pages.  In that case, I'd have to open up git diff and then remember which files I wanted to touch and then open up git status and then fpp on that? \nHm, actually 90% of the time I actually probably want page up/down by page, and then up|down on matched line. \nIt might be confuzzling but another option I'd probably want to prototype out as well is \"navigate on matched lines and then page per page\". Terrible description, but what I mean is, up|down move the cursor thru matched lines until it can't find another one on the same page. Then it moves the page forward and shows the next text page, and then you nagivate thru that. It's more of a change to the scroll algorithm.\nHowever this might mean you would scroll to a page w/ no matched text and then you're forced to press down again. And in a very big input I'm not sure if this is better or worse.\n. How do you deal with the situation where when you're looking at git diff the next link forces fpp to scroll down so much you miss some diff?\n. fixes https://github.com/facebook/PathPicker/issues/17\n. I think the import module is a good idea but I didn't want to make a big PR. :+1: \n. @jbnicolai fyi your link is broken. actual link https://github.com/jbnicolai/tmux-fpp\nrandom question, what happens if the output of the last command is greater then the screen buffer size?\n. On the flip side, @pcottle , we can do it the reverse way: consider we only need to do \"crazy stuff\" if the word is basically a file in the current dir, because otherwise it must have some sort of path (whether relative or absolute).\nSo, instead of matching words and then doing a filesystem check, let's just grab a list of all files in the current dir FIRST, and then match against the words.\nThis is basically O(number of files in your local dir only), versus O(size of input).\n. ls could be really slow on a mapped share or if there are tens of thousands of files in the local dir only. IMHO another interesting approach, which would be hard in the current arch: run it as a subprocess during picking, aka let's implement incremental searching. hard work. maybe another major release. prob put the ls under the same experimental flag as for the other file stuff ?\n. :clap: :clap: :tada: let's :beer: \n. we can totally detect unicode even in python2, so a possible approach that would be pretty solid IMHO is to detect, quit and print out \"you need python3 yo: here is #{python --version}\"\nfor ppl with unicode, they'll know that to get what they really want they'll have to get python3, for people who couldn't care less, fpp Will Just Work for almost any unix-y environment, and for people who we detected wrong, they at least know how to fix it or google the right term to fix. (or we can put some info in the diagnostic, too)\n. You can't pipe the output of a curses program, because curses uses stdout with control characters to print to the terminal.\nYou want this feature request: https://github.com/facebook/PathPicker/issues/72 I think.\n. Actually, this is because your console is only about ~30 lines high. \nFixed in PR #92 \n. A couple of thoughts. This is a really solid mocking approach, IMHO.\nit would have been nice to get introspection on the code that runs this; it's pretty hard to read the diffs per commit and there isn't a good branch point to do a complete diff. I hadn't yet merged upstream with my master, so I was able to read the diffs clearly, but that's not always true for everybody.\n1. the curses mock is really needed and good.\n2. Full integration testing - which I would claim this to be - is super important. :clap: :clap: I tend to feel that it's difficult to really cover and exercise all corner cases via integration testing, but on the flip side, just because you test all the components doesn't mean it all works. LOL. So it's super important.\nIt's an interesting conversation, and I generally believe that unit testing is more efficient, tends to be less fragile, and provides more value. I'd like for us to write some unit tests utilizing the new curser mock (which is excellent) and the input module (which is again great).\nTo give a specific example, I would be very interested in writing tests that would exercise the chrome, the scroll bar, the command entry mode, the color printing, the forthcoming x-mode, etc. in a unit testing fashion. \nFor chrome, for example, I would initialize the chrome object, send it the curses wrapper, and then assert that it called addstr at the right places and with the right strings. Then when I say move the scrollbar I assert it clears the right things and then it draws the new scroll bar at the right place. \nThat's not to say the scroll bar is not testable in a replay system, it's just more brittle.\n1. I tend to believe in code versus configuration. It's a bit of a gulp versus grunt conversation. For example, I'd probably want to write tests in python that each specify the inputs and expected outputs, as opposed to configuration based auto-compare against certain files in a directory. \n. > Yeah sorry, I always get freaked out about losing work so I push often. I had a whole separate branch with the ~10 diffs needed for this stacked, but I guess since I rebased instead of squashing+merging it was harder to read. I didn't realize people read commits that closely! I'll try to do better in the future\nI think you had a branch but you merged it and I didn't know which branch it was when I first started reading. I was hoping to read a github branch:branch diff, and I ended up reading my master against upstream master which was clear and not per commit. I think we all commit pretty often nowadays which is why the value of the branch diff is so high now. Like I think screentestDI branch was basically what I was looking for but I couldn't find a merge commit for it in the first couple of commits in master so I got lost. \n\nYeah we've actually seen a big swing towards integration testing internally at FB, and I'm a huge fan of it. \n\nI haven't decided either way how I feel about it yet. This is getting off topic and I would be totally happy to get a beer and discuss this off-line. I do feel that there is value in full stack integration tests but that we don't yet as an industry have good knowledge about how to write unit-integration tests. I want to test the peanut butter glue that lives between the two slices of toast in isolation, as opposed to testing the entire PBJ sandwich as a whole.\n\nMy only worry about asserting individual addstr calls is that you can achieve the final output of the screen in multiple ways (with many different orderings or types of addstr calls), so its fairly implementation detaily\n\nRight, right, the tests would still wait for the entire result to be composed, just like the current integration test does, but would only assert on the correct values of parts of the screen that is \"interesting to that test\", as opposed to the complete screen. \n\nI think tomorrow I'll try to add a mode that records some kind of attribute-based logic, so it shows which parts are underlined and which parts arent.\n\nFor this I would suggest actually writing out the format specifiers using the code in colorprinter; e.g. when you see a setattr in the curses mock, write out the corresponding format specifier. You only need to write a special case when addstr directly holds an attribute too, and that can be easily achieved by saving and then restoring the existing attribute. This way, the resulting recoded output can actually just be catt'ed on the console and get the real, colored and underlined text you're supposed to see. additionally your input can contain the attribute format specifiers as well. \n. I noticed this earlier today. It was introduced by color support. I will open a PR for it today or tomorrow. Thanks for the bug report.\n. Fixed in #100 \n. I need to fix up that PR.... \nTry to generate an input with one match at the end of the line. it should show up on a git diff for example.\n. LOL did you really? I hope you aren't paying too much CPM. ^) Thanks, I'll look at your implementation now and follow up on everything that's happened, I saw your PRs. Thanks again for using PRs, it lets people follow along and understand the code evolution even if they can't get to stuff right that minute. \n. One thing: in fpp: I'd like to remove the matching of record and do that in choose.py, but by doing so, we'd slightly change behavior: we wouldn't print the record text until after processInput finishes. @pcottle: are you fine with that? IMHO it would clean up the code for longer term. Or, we can instantiate a copy of ScreenFlags in processInput and do the outputting there, if you'd like.\n. Another thing: I wanted to support prefilling in the command in command-mode, but it was very difficult to do so. Basically, there isn't a default built in text-box in ncurses, and the only thing that exists that sort of does what we would want is urwid (https://github.com/wardi/urwid), but it's way too heavyweight and the text box there still doesn't support insert-mode.\nI think we should code up our own text entry widget and turn back on the cursor for the command mode if we want to support prefilled in commands from the command line in that screen. I like the idea of it and we should do it in a separate, follow up PR.\n. I'll rewrite to use the lambda and then it should be good to merge?\n. also what's your thought about removing the match of record from fpp and moving it into choose\n. Argh, yeah, revert this.\na) I forgot that we are not stripping the other arguments into argparse\nb) there is something super weird with how \"$@\" is expanded in bash. \nSorry, did you revert it already? to fix it, we  should add the other args to the argparse arguments so it doesn't blow up on --python3 etc.\nfor the other, I think the OPTS expands differently right? I didn't test with --python3 or --ko with -c at the same time for example. My bad again.\n. OK, cool. I'll fetch from upstream, double check. Sorry about that again. Is there a good way for us to test this? It's weird cuz it spans the batch to python land.\n. Also, I cleaned up some magic constants in formattedText.\n. @pcottle : regarding the white space chrome issue - not an issue, the function printUpTo takes care of bounding no matter what kind of input is printed.\nDirtying the line is better though. I will redo the PR\n. Yah, I'll tackle this and the broken #99 later tonight.\n. I think that @jbnicolai may actually be calling the python processes directly.\n. :clap: we should add a test for also adding commands that are picked up at the python level and make sure it eats the right commands and lets the other commands thru. I'll do that. Swamped today w/ real work tho.\n. Yes, very clever. And clearer then a markup based approach. Interesting... could be useful in other applications and context too. :+1:\n. :+1:. interesting design choice! I would have probably done something different with like, markup style, but this is highly readable, which is very nice! Nice.\n. LOL I love it the tests are the sources of fpp itself. #inception\n. This feels good! Comments (mostly just agreeing with you verbosely):\n1. You're right; the bool threading just doesn't feel good. I would advocate for a settings object that's globally accessible; we can repurpose the ScreenFlags class for this, because basically it's about the same kind of issue: \"what are the configurations for this object\". ScreenFlags currently figures out \"what the user set as the configuration\". We can combine the two, make it a singleton object, and call it a day. There is some complication about pickling: when loading a previous pickle, you'd also want to load the previous settings as well, but this can be resolved by pickling the settings as well.\n2. Dealing with matchline: Yes, it's a bit annoying as well. I agree. A bigger refactor here would be needed, but it's also necessary. It's obviously clear because we do file stuff and parsing paths etc in a file called format, LOL. \nBoth of these things are things I will try to make PRs for, but first I want to fix up the space printing dirty/non-dirty thing. :)\n. I'd generally design a readonly singleton that can be assigned as a whole only at certain places; e.g. startup, \"settings page exit\", etc. whatever systems need to be restarted have a clean place to restart and you can rely on settings not changing under you at any time. \nBut all this may be moot. it will be cleaner and less parameter-threading once formatter stops calling parser for file resolving. Let's take a look at it after I try to do that early this week. (Of course you are moving pretty fast, so I dunno whether you've had done a pass of refactoring by then...)\n. I thought about this and maybe we can support left and right arrow to page screen width to the left and right. I'd rather do that then '...' abbrev.\nTo do this, we'd probably want to use pad or implement a more generic dirty / scroll mechanism. Something I'll think about after trying to get a pad PR out. \nNot sure how @pcottle feels...\n. Your argument is sound, it would be annoying to bounce back and forth.\nWe should abbrev so that it \"just fits\" inside the chrome, which is actually a great feature, because right now I think most console break the line, which makes \"click to select\" the biggest pain ever. I know I've done the thing where you select half the line, copy, select the other half, go back halfway to add the missing '/', all the while cursing...\nBecause we are a pipe, I think the tools before us assume \"infinite width screen\", basically, so we have the full path = good so we can resolve it, and we can abbrev as we wish dynamically on display.\nLet's abbrev dynamically \"all the way up to the chrome\".\nIf we get the abbrev algorithm wrong and ppl complain, we can add a feature to \"unabbrev\" with say \".\" as the key and then it could allow left|right paging. but let's try without first, I am pretty sure if we do a dumb algo that makes sure the filename is always visible and abbrevs the middle 99% of people will be happy.\n. I plan to open a follow on PR to use pad so we can actually paint the entire scroll buffer and cache it; curses takes care of painting onto the visible screen via refresh. It will greatly simplify the painting code and also be faster - we will never write a line twice until it changes highlight/hover/select state. I need to do some investigation on size limits though - like I'll try it with 10/50/100k lines and so, make sure it is performant. If so, it'll clean up a lot of code nicely.\n. Yeah, that other fix would have caused a merge conflict. thanks for fixing it up! :+1: \n. Hmmm, on further thought, I think it's OK to use delchar because soon if we use pad we can completely separate the chrome output from the scroll output and there won't be any chrome to fuck up when you're erasing.\nI would prefer option (a) here instead of (b) \n. Yah I mean pad... It also would let us paint the line match txt once and then scroll it up and down without having to reprint the words i think. I am going to experiment first and make sure the documentation isn't missing anything and that it'll work with large buffers (10k lines etc). \n. Unsure. It's why I'm gonna experiment. If the perf/memory is very close (as in ~5%) it's worth moving to pad because our code would be a lot simpler. But if the perf is a big difference then :(\n. Yeah, I think this is good, and also gives us a forward path for more stuff later where we can split the chrome with the scroll. \nI'll open a PR for the pastScreens and then we can add a test for wide like I had before. This will make sure we don't regress with the wide chrome and the delchar. God this dirty code has had 4 PRs against it already. \n. Lol you don't like the 20 line comment I wrote? Haha. Yah both commits do the same thing, so I'm cool w either \ud83d\udc4d\n. :+1: \n. Ooohh, we should fix this better by using the printer instead of stdscr: addstr in that implementation uses default color https://github.com/facebook/PathPicker/blob/master/src/colorPrinter.py#L53\nactually using 0 is also not good, because it's white and i think on a bright console we'd get white on white? I didn't test yet cuz I haven't merged master today\n. I think there's a very small bug where if you're in X mode and you enter command mode, you'll be back in select mode when you are back on the main choose screen. Also I think the color of the text is white only because we are printing the scrollbar chrome right before, so the default color is set. It's not necessary but would be very good to use the color printer to affirmatively default to the default foreground color. (whew). I could do that in my cleanup PR #139 if @pcottle merges this first.\n. Woops, I didn't test --clean.yeah. thanks!\n. #139 will cause this to merge conflict I think. I'll rebase after it gets merged.\n. ",
    "mcchrish": "Should it be possible to define a custom FPP_DIR environment variable? Say, I want to move it to $HOME/.config/fpp.\n. Should it be possible to define a custom FPP_DIR environment variable? Say, I want to move it to $HOME/.config/fpp.\n. ",
    "SamHasler": "Would supporting XDG_CONFIG_HOME if it's set give more users a cleaner home\ndir by default?\nOn Dec 30, 2015 5:23 PM, \"Peter Cottle\" notifications@github.com wrote:\n\nYeah I would be fine with that -- would accept the PR as long as it has a\nsane default and some basic test coverage (and would be in the help\noutput). We have a number of env variables right now but so far its\nmanageable\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/17#issuecomment-168038383.\n. I know. I'm just saying if XDG_CONFIG_HOME is set, use it, as that's where\nthat user keeps their config.\nOn Dec 31, 2015 2:25 PM, \"Victor Zverovich\" notifications@github.com\nwrote:\n@SamHasler https://github.com/SamHasler XDG_CONFIG_HOME may not be set\nby default (it is not set on Ubuntu 14.04 for instance).\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/17#issuecomment-168203088.\n. I think they're more likely to rewrite it in JavaScript than Python given what pcottle said in https://github.com/facebook/PathPicker/issues/56#issuecomment-100743171\n\nI think that a JavaScript implementation might be preferable given that windows installation under git-bash doesn't work: ImportError: No module named '_curses'\n. Would supporting XDG_CONFIG_HOME if it's set give more users a cleaner home\ndir by default?\nOn Dec 30, 2015 5:23 PM, \"Peter Cottle\" notifications@github.com wrote:\n\nYeah I would be fine with that -- would accept the PR as long as it has a\nsane default and some basic test coverage (and would be in the help\noutput). We have a number of env variables right now but so far its\nmanageable\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/17#issuecomment-168038383.\n. I know. I'm just saying if XDG_CONFIG_HOME is set, use it, as that's where\nthat user keeps their config.\nOn Dec 31, 2015 2:25 PM, \"Victor Zverovich\" notifications@github.com\nwrote:\n@SamHasler https://github.com/SamHasler XDG_CONFIG_HOME may not be set\nby default (it is not set on Ubuntu 14.04 for instance).\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/17#issuecomment-168203088.\n. I think they're more likely to rewrite it in JavaScript than Python given what pcottle said in https://github.com/facebook/PathPicker/issues/56#issuecomment-100743171\n\nI think that a JavaScript implementation might be preferable given that windows installation under git-bash doesn't work: ImportError: No module named '_curses'\n. ",
    "wasade": "@pcottle, sorry for the slow reply. That's weird it's not giving credit given that git blame shows the changes (e.g., see here). Anyway, no worries, just was taking a random walk through the code base :) This is awesome though\n. @pcottle, sorry for the slow reply. That's weird it's not giving credit given that git blame shows the changes (e.g., see here). Anyway, no worries, just was taking a random walk through the code base :) This is awesome though\n. ",
    "loganlinn": "came to report this issue too. my use case is also git status\n. came to report this issue too. my use case is also git status\n. ",
    "lefoy": "I have the same issue, I can't open files when I'm not in the toplevel git directory.\n. I have the same issue, I can't open files when I'm not in the toplevel git directory.\n. ",
    "hobzcalvin": "```\n09:11:13@~/test/myrepo/inside> git status\nOn branch master\nUntracked files:\n  (use \"git add ...\" to include in what will be committed)\nnested/morethings.stuff\n\nnothing added to commit but untracked files present (use \"git add\" to track)\n09:11:15@~/test/myrepo/inside> git status | fpp\nexecuting command:\ngit add '/Users/grant/test/myrepo/nested/morethings.stuff'\nfatal: pathspec '/Users/grant/test/myrepo/nested/morethings.stuff' did not match any files\n09:11:26@~/test/myrepo/inside> cd ..\n09:11:54@~/test/myrepo> git status | fpp\nexecuting command:\ngit add '/Users/grant/test/myrepo/inside/nested/morethings.stuff'\n09:12:01@~/test/myrepo> git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD ...\" to unstage)\nnew file:   inside/nested/morethings.stuff\n\n09:12:07@~/test/myrepo>\n.\n09:11:13@~/test/myrepo/inside> git status\nOn branch master\nUntracked files:\n  (use \"git add ...\" to include in what will be committed)\nnested/morethings.stuff\n\nnothing added to commit but untracked files present (use \"git add\" to track)\n09:11:15@~/test/myrepo/inside> git status | fpp\nexecuting command:\ngit add '/Users/grant/test/myrepo/nested/morethings.stuff'\nfatal: pathspec '/Users/grant/test/myrepo/nested/morethings.stuff' did not match any files\n09:11:26@~/test/myrepo/inside> cd ..\n09:11:54@~/test/myrepo> git status | fpp\nexecuting command:\ngit add '/Users/grant/test/myrepo/inside/nested/morethings.stuff'\n09:12:01@~/test/myrepo> git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD ...\" to unstage)\nnew file:   inside/nested/morethings.stuff\n\n09:12:07@~/test/myrepo>\n```\n. ",
    "ruslanosipov": "+1, can not edit files with Vim unless I'm in a Git top level directory. Vim receives quoted path string and assumes it to be a new file name.\n. +1, can not edit files with Vim unless I'm in a Git top level directory. Vim receives quoted path string and assumes it to be a new file name.\n. ",
    "metavida": "I was able to reproduce this issue locally but only when the selected file was within a sub-folder of the current working directory. See attached screencast.\n\nHere's the output of git status and git status | fpp + ls -l\n``` bash\nmarcoswk src [master\u2022] $ git status\nOn branch master\nYour branch is up-to-date with 'facebook/master'.\nChanges to be committed:\n  (use \"git reset HEAD ...\" to unstage)\nnew file:   new/issue20.py\nmodified:   test.py\n\nmarcoswk src [master\u2022] $ git status | fpp\ngetting input\nexecuting command:\nls -l '/Users/marcoswk/workspace/PathPicker/new/issue20.py' './test.py'\nls: /Users/marcoswk/workspace/PathPicker/new/issue20.py: No such file or directory\n-rw-r--r--@ 1 marcoswk  staff  8238 May 11 21:09 ./test.py\n```\nAs you can see, for whatever reason, the full path except the src directory is used when selecting the new/issue20.py file.\n. I've got a WIP fix for this: https://github.com/metavida/PathPicker/compare/master...include_git_status_dotfiles\n. Thanks for checking out this ticket @pedrox. First, I'd like to make a clarification. When I say \"dotfile\" I mean \"any file that begins with a period\"[1].\n\nI believe dot files inside directory are not a problem.\n\nI confirmed that PathPicker does not recognize dotfiles within a directory by adding the following case to test.py on the latest master branch commit.\npy\n{\n    'input': 'tmp/.gitignore',\n    'match': True,\n    'file': 'tmp/.gitignore',\n    'num': 0\n}\n``` bash\n$ git log -n1 | head -n1\ncommit 7b0bef202b9f4783197459e26fe658f404b99188\n$ python src/test.py\n...\n======================================================================\nFAIL: testFileMatch (main.TestParseFunction)\n\nTraceback (most recent call last):\n  File \"src/test.py\", line 244, in testFileMatch\n    self.checkFileResult(testCase)\n  File \"src/test.py\", line 252, in checkFileResult\n    testCase['input'])\nAssertionError: Line \"tmp/.gitignore\" did not match any regex\n\nRan 5 tests in 0.007s\nFAILED (failures=2, errors=1)\n```\n\nThis is a duplicate of #7.\n\nTo my reading, issue #7 is about detecting files with no extensions (e.g. Makefile). While this issue is similar, I would suggest that this ticket is not a duplicate of #7 because it's quite possible to have a dotfile with an extension (e.g. .env.production or .hidden.txt).\n. This seems like a duplicate of #7 \n. Travis CI has built-in support for testing multiple python versions (and the test suite is currently passing for 2.6 through 3.4) so I don't think we would need to use tox within Travis CI.\n. @pcottle thanks for merging! A note. Although the .travis.yml file exists in the git repo, you still have to head over to https://travis-ci.org and sign in + activate the Github webook for the PathPicker project: http://docs.travis-ci.com/user/getting-started/#Step-one%3A-Sign-in\nOnce those 2 steps are complete, every Pull request will automatically be tested. A bit less work for you!\n. Excellent! Did you try the \"Review and add your authorized Orgs.\" link at the bottom of the left-hand column of that Travis CI page? When I visit that link I'm taken to a GitHub \"Authorized applications\" page. Maybe in the \"Organization access\" portion of that page you'll have the option to give Travis CI access to the Facebook org repos?\n\n. Nice! CI for the win!\nLove the ability to pass in an arbitrary full text input. Having to provide the full expected output is a bit frail (e.g. any change at all to the real output will break all existing tests) but that's definitely something that can be improved on & having better test coverage is a big win in the short term.\n. I was able to reproduce this issue locally but only when the selected file was within a sub-folder of the current working directory. See attached screencast.\n\nHere's the output of git status and git status | fpp + ls -l\n``` bash\nmarcoswk src [master\u2022] $ git status\nOn branch master\nYour branch is up-to-date with 'facebook/master'.\nChanges to be committed:\n  (use \"git reset HEAD ...\" to unstage)\nnew file:   new/issue20.py\nmodified:   test.py\n\nmarcoswk src [master\u2022] $ git status | fpp\ngetting input\nexecuting command:\nls -l '/Users/marcoswk/workspace/PathPicker/new/issue20.py' './test.py'\nls: /Users/marcoswk/workspace/PathPicker/new/issue20.py: No such file or directory\n-rw-r--r--@ 1 marcoswk  staff  8238 May 11 21:09 ./test.py\n```\nAs you can see, for whatever reason, the full path except the src directory is used when selecting the new/issue20.py file.\n. I've got a WIP fix for this: https://github.com/metavida/PathPicker/compare/master...include_git_status_dotfiles\n. Thanks for checking out this ticket @pedrox. First, I'd like to make a clarification. When I say \"dotfile\" I mean \"any file that begins with a period\"[1].\n\nI believe dot files inside directory are not a problem.\n\nI confirmed that PathPicker does not recognize dotfiles within a directory by adding the following case to test.py on the latest master branch commit.\npy\n{\n    'input': 'tmp/.gitignore',\n    'match': True,\n    'file': 'tmp/.gitignore',\n    'num': 0\n}\n``` bash\n$ git log -n1 | head -n1\ncommit 7b0bef202b9f4783197459e26fe658f404b99188\n$ python src/test.py\n...\n======================================================================\nFAIL: testFileMatch (main.TestParseFunction)\n\nTraceback (most recent call last):\n  File \"src/test.py\", line 244, in testFileMatch\n    self.checkFileResult(testCase)\n  File \"src/test.py\", line 252, in checkFileResult\n    testCase['input'])\nAssertionError: Line \"tmp/.gitignore\" did not match any regex\n\nRan 5 tests in 0.007s\nFAILED (failures=2, errors=1)\n```\n\nThis is a duplicate of #7.\n\nTo my reading, issue #7 is about detecting files with no extensions (e.g. Makefile). While this issue is similar, I would suggest that this ticket is not a duplicate of #7 because it's quite possible to have a dotfile with an extension (e.g. .env.production or .hidden.txt).\n. This seems like a duplicate of #7 \n. Travis CI has built-in support for testing multiple python versions (and the test suite is currently passing for 2.6 through 3.4) so I don't think we would need to use tox within Travis CI.\n. @pcottle thanks for merging! A note. Although the .travis.yml file exists in the git repo, you still have to head over to https://travis-ci.org and sign in + activate the Github webook for the PathPicker project: http://docs.travis-ci.com/user/getting-started/#Step-one%3A-Sign-in\nOnce those 2 steps are complete, every Pull request will automatically be tested. A bit less work for you!\n. Excellent! Did you try the \"Review and add your authorized Orgs.\" link at the bottom of the left-hand column of that Travis CI page? When I visit that link I'm taken to a GitHub \"Authorized applications\" page. Maybe in the \"Organization access\" portion of that page you'll have the option to give Travis CI access to the Facebook org repos?\n\n. Nice! CI for the win!\nLove the ability to pass in an arbitrary full text input. Having to provide the full expected output is a bit frail (e.g. any change at all to the real output will break all existing tests) but that's definitely something that can be improved on & having better test coverage is a big win in the short term.\n. ",
    "alphang": "\n\"I was able to reproduce this issue locally but only when the selected file was within a sub-folder of the current working directory.\"\n\nThis is true for me as well. If I go up to the top level git dir, then it works. \nHowever, if I try it from a subfolder then I can reproduce the issue.\n. > \"I was able to reproduce this issue locally but only when the selected file was within a sub-folder of the current working directory.\"\nThis is true for me as well. If I go up to the top level git dir, then it works. \nHowever, if I try it from a subfolder then I can reproduce the issue.\n. ",
    "ghost": "What if you prepended a sequence of \"../\" until you had a file match and displayed only paths whose existence was confirmed?\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Hey Peter!\nThe PR is completed and ready for review. Compared to the last commit, the (relevant) changes are:\n\ncustom bindings are not shown anymore;\nadded python 3 support;\nadded test suite for the bindings configuration file decode.\n\nThe last doubt I have is whether the binding detection fragment (for boundKey, command in self.keyBindings.bindings:) should stay at the top or the bottom of processInput().\nIf we assume this usage is advanced, I think it should stay at the top, since it gives the option to override standard fpp keys.. Note that I've followed your indication:\n\nthis might not scale if people add dozens of commands, and since this is a power user feature anyways, why not perhaps just dont change the display at all?\n\nI'm not sure now about this:\n\nrelated to that -- can we only change the display of the hotkey bindings if you have a config file in place? that will prevent you from having to modify a bunch of test files\n\nBefore removing the display code with the current commit, nothing additional (compared to a configuration without bindings) was displayed when there were no bindings defined - am I misunderstanding?. What if you prepended a sequence of \"../\" until you had a file match and displayed only paths whose existence was confirmed?\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!\n. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!\n. Hey Peter!\nThe PR is completed and ready for review. Compared to the last commit, the (relevant) changes are:\n\ncustom bindings are not shown anymore;\nadded python 3 support;\nadded test suite for the bindings configuration file decode.\n\nThe last doubt I have is whether the binding detection fragment (for boundKey, command in self.keyBindings.bindings:) should stay at the top or the bottom of processInput().\nIf we assume this usage is advanced, I think it should stay at the top, since it gives the option to override standard fpp keys.. Note that I've followed your indication:\n\nthis might not scale if people add dozens of commands, and since this is a power user feature anyways, why not perhaps just dont change the display at all?\n\nI'm not sure now about this:\n\nrelated to that -- can we only change the display of the hotkey bindings if you have a config file in place? that will prevent you from having to modify a bunch of test files\n\nBefore removing the display code with the current commit, nothing additional (compared to a configuration without bindings) was displayed when there were no bindings defined - am I misunderstanding?. ",
    "callumlocke": "you're doing a good job :+1:\n. you're doing a good job :+1:\n. ",
    "sairion": "Following current instruction and executing $ fpp gives error reads \"Too many levels of symbolic links\" ... I made it work with ln -s $(pwd)/fpp /usr/local/bin/fpp but this works also ;)\n. @pcottle Newest master (at the moment I write this) with the instruction still gives me same error, \n\u279c  ~  fpp\nzsh: too many levels of symbolic links: fpp\n(Actually I uses zsh, I should have said above.)\n. Following current instruction and executing $ fpp gives error reads \"Too many levels of symbolic links\" ... I made it work with ln -s $(pwd)/fpp /usr/local/bin/fpp but this works also ;)\n. @pcottle Newest master (at the moment I write this) with the instruction still gives me same error, \n\u279c  ~  fpp\nzsh: too many levels of symbolic links: fpp\n(Actually I uses zsh, I should have said above.)\n. ",
    "ninegene": "16 works great. Thanks.\n. #16 works great. Thanks.\n. ",
    "aledista": "@pcottle, I'm glad you found my commit helpful! For style conventions I generally use https://flake8.readthedocs.org\n. @pcottle, I'm glad you found my commit helpful! For style conventions I generally use https://flake8.readthedocs.org\n. ",
    "idf": "+1 for this issue. \n. +1 for this issue. \n. ",
    "jdunk": "@pcottle Nice, thanks!  :)\n. @pcottle Nice, thanks!  :)\n. ",
    "groomsy": "Ditto for filenames containing '+' (Objective-C categories anyone?).\n. Ditto for filenames containing '+' (Objective-C categories anyone?).\n. ",
    "recognosco": "duplicate and already has been patched.\n. duplicate and already has been patched.\n. ",
    "bmwang": "you'll have to be a little bit careful - osx ships with posix readlink, and this script is written for osx. iirc, the posix readlink doesnt have the -f flag\non linux you'll be using gnu readlink, which is different and has the -f flag.\nthat's not the issue, thogh\nit looks like readlink is giving you an absolute path when the script was written for a readlink that gives a relative path. this is probably because you symlinked fpp using an absolute path, which, imo, should be valid.\nit wbn if the WHEREAMI resolution would respect symlinks created with absolute paths.\n. you'll have to be a little bit careful - osx ships with posix readlink, and this script is written for osx. iirc, the posix readlink doesnt have the -f flag\non linux you'll be using gnu readlink, which is different and has the -f flag.\nthat's not the issue, thogh\nit looks like readlink is giving you an absolute path when the script was written for a readlink that gives a relative path. this is probably because you symlinked fpp using an absolute path, which, imo, should be valid.\nit wbn if the WHEREAMI resolution would respect symlinks created with absolute paths.\n. ",
    "lsmag": "Yup, it worked, thanks =D\n. I uploaded the package to AUR, it can be installed using yaourt, aura or even downloading the package and calling # pacman -U <path-to-pathpicker.tar.gz>. Maybe change the README to add that?\n. @pcottle the package I built will download fpp from git, unpack on /opt and create a symlink on /usr/bin.\n. There's also (fpp-git)[https://aur.archlinux.org/packages/fpp-git/] in AUR which installs PathPicker directly from github's master.\nAlso, maybe it's better not to point pacaur as the package manager? I use aurapm, for example.\n. I believe most Arch users know how to install an AUR package, so I don't believe favouring a certain package manager is good (and there are many )\n. Yep @Daniel15 , I was only answering @pcottle 's question regarding AUR or AUR+pacaur ;)\n. You can point to the Arch wiki, it has a link for the AUR helpers\n. Yup, it worked, thanks =D\n. I uploaded the package to AUR, it can be installed using yaourt, aura or even downloading the package and calling # pacman -U <path-to-pathpicker.tar.gz>. Maybe change the README to add that?\n. @pcottle the package I built will download fpp from git, unpack on /opt and create a symlink on /usr/bin.\n. There's also (fpp-git)[https://aur.archlinux.org/packages/fpp-git/] in AUR which installs PathPicker directly from github's master.\nAlso, maybe it's better not to point pacaur as the package manager? I use aurapm, for example.\n. I believe most Arch users know how to install an AUR package, so I don't believe favouring a certain package manager is good (and there are many )\n. Yep @Daniel15 , I was only answering @pcottle 's question regarding AUR or AUR+pacaur ;)\n. You can point to the Arch wiki, it has a link for the AUR helpers\n. ",
    "soheil": "I have a ll alias to do ls -l it didn't work...\nOn Thu, May 7, 2015 at 6:17 PM, Peter Cottle notifications@github.com\nwrote:\n\nWe do load up the bashrc and check for aliases:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L109\nIs something else not working? What format are you aliases in?\n(closing for now, open up again if you have a solid repro)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/34#issuecomment-100060082.\n. I have a ll alias to do ls -l it didn't work...\n\nOn Thu, May 7, 2015 at 6:17 PM, Peter Cottle notifications@github.com\nwrote:\n\nWe do load up the bashrc and check for aliases:\nhttps://github.com/facebook/PathPicker/blob/master/src/output.py#L109\nIs something else not working? What format are you aliases in?\n(closing for now, open up again if you have a solid repro)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/34#issuecomment-100060082.\n. \n",
    "cosinequanon": "I can repro this. I have source $HOME/.bash_aliases in my .bashrc and in .bash_aliases I have alias g=\"git \"\nGo to a git repository, and enter:\ntouch foo.txt\nls -l ./foo.txt | fpp\nthen press c and enter g add\nI get the error: /home/sgoder/.fbPager.sh: line 4: g: command not found\n. I can repro this. I have source $HOME/.bash_aliases in my .bashrc and in .bash_aliases I have alias g=\"git \"\nGo to a git repository, and enter:\ntouch foo.txt\nls -l ./foo.txt | fpp\nthen press c and enter g add\nI get the error: /home/sgoder/.fbPager.sh: line 4: g: command not found\n. ",
    "shaneharter": "@pcottle Can't you just use alias ? \n. @pcottle Yeah i saw that after, sorry for the distraction :) Been using fpp for a few days now, :+1: \n. If the goal is just to support aliases, why not just remove the code that scans for aliases in .bashrc (etc) and instead just use the output of /usr/bin/alias ? \nEdit: nvm, this makes no sense on more careful consideration.. the only way to know what aliases are there is to load the shell as you're doing. \n. @pcottle Can't you just use alias ? \n. @pcottle Yeah i saw that after, sorry for the distraction :) Been using fpp for a few days now, :+1: \n. If the goal is just to support aliases, why not just remove the code that scans for aliases in .bashrc (etc) and instead just use the output of /usr/bin/alias ? \nEdit: nvm, this makes no sense on more careful consideration.. the only way to know what aliases are there is to load the shell as you're doing. \n. ",
    "Addisonbean": "Is there a way to prevent it from sourcing my .zshrc? My .zshrc prints something every time it is executed and that can get annoying if I'm not starting up a new shell.\n. Oh yeah that's smart, thanks. Haha I just have this line in my .zshrc: fortune | cowsay | lolcat So I get a random fortune every time I start a new shell.\n. Is there a way to prevent it from sourcing my .zshrc? My .zshrc prints something every time it is executed and that can get annoying if I'm not starting up a new shell.\n. Oh yeah that's smart, thanks. Haha I just have this line in my .zshrc: fortune | cowsay | lolcat So I get a random fortune every time I start a new shell.\n. ",
    "Daniel15": "I don't know anyone that uses Linuxbrew, seems pretty odd to use that rather than actual packages. Would be good to have this packaged up and pushed to Debian/Ubuntu (and/or your own package source)\n. I have no idea either :D I think @ptarjan and @jwatzman maintain the HHVM packaging scripts so they might know how to get started with this.\n. We should still make .deb and .rpm packages for distros that use those.\n. Yes, Debian users don't use AUR packages though. Not everyone uses Arch :)\nSent from my mobile.\nOn May 12, 2015 2:33 PM, \"lsmag\" notifications@github.com wrote:\n\nI believe most Arch users know how to install an AUR package, so I don't\nbelieve favouring a certain package manager is good (and there are many\nhttps://wiki.archlinux.org/index.php/AUR_helpers#AUR_search.2Fbuild_helpers\n)\n\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/43#issuecomment-101428168.\n. Oh right :+1: \n. @pcottle  - Can we keep this task open for tracking purposes, until we have .rpm and .deb packages? Most likely someone will open an identical task when they notice a lack of packages, so we should still keep this open to track that.\n. Haha that's okay, no worries :+1: \n. I don't know anyone that uses Linuxbrew, seems pretty odd to use that rather than actual packages. Would be good to have this packaged up and pushed to Debian/Ubuntu (and/or your own package source)\n. I have no idea either :D I think @ptarjan and @jwatzman maintain the HHVM packaging scripts so they might know how to get started with this.\n. We should still make .deb and .rpm packages for distros that use those.\n. Yes, Debian users don't use AUR packages though. Not everyone uses Arch :)\n\nSent from my mobile.\nOn May 12, 2015 2:33 PM, \"lsmag\" notifications@github.com wrote:\n\nI believe most Arch users know how to install an AUR package, so I don't\nbelieve favouring a certain package manager is good (and there are many\nhttps://wiki.archlinux.org/index.php/AUR_helpers#AUR_search.2Fbuild_helpers\n)\n\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/43#issuecomment-101428168.\n. Oh right :+1: \n. @pcottle  - Can we keep this task open for tracking purposes, until we have .rpm and .deb packages? Most likely someone will open an identical task when they notice a lack of packages, so we should still keep this open to track that.\n. Haha that's okay, no worries :+1: \n. \n",
    "heyitsxavier": "Thanks - done.\n. I avoided that because having a cryptogram (BGFUWXYZ), or a really spaced out ABCDE along the side would be less clear than labeling the lines.  It would also look like the matrix as you scroll.\nIt could be argued that because x mode is an advanced feature, that it doesn't need to be particularly intuitive.  And you're certainly right - hitting a marked key with no result is awkward.  But IMO that's a symptom of interspersing actionable items among unactionable ones.  I think this would be better solved with color - for example, green for actionable, or perhaps just greying out the unactionable.\n. I can work on it this weekend\n. Sorry this is late, but I rebased and went through your nits.  I'll improve the color mode for another time.\n. I'm not familiar with this - do I have to open another pull request?  The changes to my fork aren't showing up here.\n. Sorry for being late guys - I'm between situations right now.  I could probably write a test this weekend and refactor the keys thing.  I don't really want to do anything with color printer since I don't know what that is.\n. Thanks - done.\n. I avoided that because having a cryptogram (BGFUWXYZ), or a really spaced out ABCDE along the side would be less clear than labeling the lines.  It would also look like the matrix as you scroll.\nIt could be argued that because x mode is an advanced feature, that it doesn't need to be particularly intuitive.  And you're certainly right - hitting a marked key with no result is awkward.  But IMO that's a symptom of interspersing actionable items among unactionable ones.  I think this would be better solved with color - for example, green for actionable, or perhaps just greying out the unactionable.\n. I can work on it this weekend\n. Sorry this is late, but I rebased and went through your nits.  I'll improve the color mode for another time.\n. I'm not familiar with this - do I have to open another pull request?  The changes to my fork aren't showing up here.\n. Sorry for being late guys - I'm between situations right now.  I could probably write a test this weekend and refactor the keys thing.  I don't really want to do anything with color printer since I don't know what that is.\n. ",
    "davidcox143": "This was actually fixed by @pcottle in commit 79b3d25. \nIssue should be marked as closed.\n. This was actually fixed by @pcottle in commit 79b3d25. \nIssue should be marked as closed.\n. ",
    "diwu1989": "+1\nlinuxbrew?! wat is that?! Make it work with apt-get please.\n. +1\nlinuxbrew?! wat is that?! Make it work with apt-get please.\n. ",
    "gutenye": "For ArchLinux, Install it by $ pacaur -S fpp\n. For ArchLinux, Install it by $ pacaur -S fpp\n. ",
    "jwatzman": "https://github.com/hhvm/packaging/blob/master/hhvm/deb/package is how HHVM does it -- that runs on a cronjob on a VM on a Mac Pro under someone's desk :-P Someone was in the process of writing a proper Debian package, which might be the way to go -- AIUI it isn't actually that hard, and has a lot better tooling than some random shell script, Debian is actually quite good at that sort of thing. As for the actual builds, last I heard the sandcastle/Fog team(s) were working on getting Debian VMs on Sandcastle so we can do our CI/builds that way; I got access to a couple VMs but never really got it set up, and haven't heard anything more about the actual infra and CI stuff there.\nFeel free to grab me in the office if you want to chat; sometime May 25 or after would be best unless this is urgent, I'm working on the HHVM lockdown right now.\n. But you're going to have a much easier time since it looks like this is just pure python, right? Most of the HHVM complexity has to do with supporting finding several third-party libraries (or building new enough versions of them if the distro's is too old) for C++ compilation, and then generalizing that over a bunch of different supported versions of Debian and Ubuntu.\n. https://github.com/hhvm/packaging/blob/master/hhvm/deb/package is how HHVM does it -- that runs on a cronjob on a VM on a Mac Pro under someone's desk :-P Someone was in the process of writing a proper Debian package, which might be the way to go -- AIUI it isn't actually that hard, and has a lot better tooling than some random shell script, Debian is actually quite good at that sort of thing. As for the actual builds, last I heard the sandcastle/Fog team(s) were working on getting Debian VMs on Sandcastle so we can do our CI/builds that way; I got access to a couple VMs but never really got it set up, and haven't heard anything more about the actual infra and CI stuff there.\nFeel free to grab me in the office if you want to chat; sometime May 25 or after would be best unless this is urgent, I'm working on the HHVM lockdown right now.\n. But you're going to have a much easier time since it looks like this is just pure python, right? Most of the HHVM complexity has to do with supporting finding several third-party libraries (or building new enough versions of them if the distro's is too old) for C++ compilation, and then generalizing that over a bunch of different supported versions of Debian and Ubuntu.\n. ",
    "pallavagarwal07": "I am a student of IIT Kanpur with a lot of free time and multiple testing platforms (Debian, Arch, Fedora). Is there anything I can do to help?\n. @pcottle OK, I'll get right on it. \n. @pcottle \nI think the best way of distributing it to debian platforms would be with a .deb package. It installs instantly and since the project is pure python, the .deb package is extremely easy to create.\nHere is the one I created using current master branch : \nhttps://drive.google.com/file/d/0B6jsnt965ZwraVk1bEo2VmpXd1U/view?usp=sharing\nIt should install on any debian based OS.\n. I'll write a script as soon as I generalize the method (extracting necessary details from the package itself) \nCould you tell me the Name and email of the person whose info is to be written in packaging control file (Maintainer: is a necessary field) ?\n. @pcottle\nDebian packages also require (or rather recommend) a man page for every executable (in this case fpp). Is there one? Or should I skip the man page in the packaging?\n. @pcottle\nI think man pages are supposed to follow a very strict format. Scripting to use the same at both places wouldn't be hard at all if the existing is modified to fit the criteria (should I do it?) \nFor now, I have done it without the man page (help command obviously still works) and opened a pull request. Have you seen it? \n. @pcottle Yes, I saw the comment. The format of the man pages is usually fixed. I don't think the same page can be used. I'll have to read up a bit more before I can say for sure.\n. Try this:\ninstall devscripts package, comment out lines from 3-12 in makeDist.py and run ./scripts/makeDist.py from the source directory (in which scripts, debian) folders are present\nI have used debuild command to create packages. It runs both dpkg and some verify script internally. But this works perfectly on mine. Will try directly by dpkg and report back\n. Yeah. Getting the same errors when running dpkg manually although dpkg-buildpackage command works perfectly.\n. The more I am trying dpkg, the more I'm convinced that the method I followed was debhelper specific. Run using the script in makeDist. It also rewrites one of the file to have the correct version number and timestamp. So package won't be build directly anyway.\nEDIT:I don't know if this is possible to do in Mac OS. It seems like Mac only has support for dpkg, while all the new documents on debian packaging are based on the dh tools.\nDoes the script necessarily have to run on Mac? \n. @pcottle\nIs there a chance I could talk to you (on chat / skype)? I think I can fix the problem but I have some doubts like about where the script would be run etc.\n. @pcottle \nI have rewritten the files on basis of dpkg. Now executing package.sh inside the debian directory creates the .deb file in the parent without any problems.\nNote: file should be executed from inside the debian directory, fakeroot should be installed.\nPlease review\n. @pcottle \nDid you check this yet? The script only uses fakeroot, sed, and dpkg now. They should all work fine on Mac.\n. Thanks, I'll keep that in mind. Should I do the rpm packages next? \n. Seems fine, although I would be more relieved if I tested the deb built on your system by installing it on mine\n. Installation usually is done by double clicking. On worst cases it can be installed by dpkg -i command.  Although I haven't met a debian system where double clicking the downloaded file didn't work \n. Seems to install and work fine :smile: But Lintian is giving some errors. Lintian checks for .deb packages for best practices. The deb produced on my system isn't giving any :frowning: \n. Anyway, those are only warnings. Shouldn't cause any trouble.\n. Awesome! \nLet me know if I should write a man page for this. Debian packages are usually expected to have one. \n. Please break up the Linux section into parts. AUR is for Arch ONLY.\n.deb package is only for debian systems. \n.rpm, which should be the next ToDo, would be for RedHat Linux derivatives\n. Will do. \n. I am ready to help, if needed.\n. @sethwoodworth \nfpp.1 would go in debian/usr/share/man/man1.\n. Actually I did point these out. These warnings are only occurring when the packaging is done on a mac. When I use the exact same script on Linux, the packages give a clean lintian output. \n. @pcottle \nI think you misunderstood. The errors are because the packages are created on Mac, not because of installing on one. \nAnyway, I did check, and the warnings shouldn't cause any real trouble\n. Here it is:\nhttps://drive.google.com/file/d/0B6jsnt965Zwrc05UYnFEVHVhQTQ/view?usp=sharing\nEDIT: @jiawen I don't have Ubuntu installed (and linux mint isn't returning any serious errors/warnings). Could you tell me what Ubuntu's Software Center has to say about this one?\nEDIT 2: @pcottle There still seems to be one error about man page compression. I'll have to go through @sethwoodworth's PR to fix that.\n. @yggdr\nFrom which directory were you running the script? \n. I don't know why it was missing, but it's there right now.\nhttps://aur.archlinux.org/packages/fpp-git/\n@pcottle I think this issue can be closed. \n. That's weird. I've been using neovim for over 6 months and it supports both\nnvim +17 'file.c'\nand\nnvim 'file.c' +17 formats.\n. @jeffkile Could you ensure that the file is being opened in nvim (:version after opening file via fpp)? It might be not obvious if both vim and nvim use the same vimrc and maybe it's reading nvim environment variable and thus nvim format but attempting to open the file finally with vim?\n. I never noticed the first mistake. Thanks a bunch for fixing that. Seems great !\n. I am a student of IIT Kanpur with a lot of free time and multiple testing platforms (Debian, Arch, Fedora). Is there anything I can do to help?\n. @pcottle OK, I'll get right on it. \n. @pcottle \nI think the best way of distributing it to debian platforms would be with a .deb package. It installs instantly and since the project is pure python, the .deb package is extremely easy to create.\nHere is the one I created using current master branch : \nhttps://drive.google.com/file/d/0B6jsnt965ZwraVk1bEo2VmpXd1U/view?usp=sharing\nIt should install on any debian based OS.\n. I'll write a script as soon as I generalize the method (extracting necessary details from the package itself) \nCould you tell me the Name and email of the person whose info is to be written in packaging control file (Maintainer: is a necessary field) ?\n. @pcottle\nDebian packages also require (or rather recommend) a man page for every executable (in this case fpp). Is there one? Or should I skip the man page in the packaging?\n. @pcottle\nI think man pages are supposed to follow a very strict format. Scripting to use the same at both places wouldn't be hard at all if the existing is modified to fit the criteria (should I do it?) \nFor now, I have done it without the man page (help command obviously still works) and opened a pull request. Have you seen it? \n. @pcottle Yes, I saw the comment. The format of the man pages is usually fixed. I don't think the same page can be used. I'll have to read up a bit more before I can say for sure.\n. Try this:\ninstall devscripts package, comment out lines from 3-12 in makeDist.py and run ./scripts/makeDist.py from the source directory (in which scripts, debian) folders are present\nI have used debuild command to create packages. It runs both dpkg and some verify script internally. But this works perfectly on mine. Will try directly by dpkg and report back\n. Yeah. Getting the same errors when running dpkg manually although dpkg-buildpackage command works perfectly.\n. The more I am trying dpkg, the more I'm convinced that the method I followed was debhelper specific. Run using the script in makeDist. It also rewrites one of the file to have the correct version number and timestamp. So package won't be build directly anyway.\nEDIT:I don't know if this is possible to do in Mac OS. It seems like Mac only has support for dpkg, while all the new documents on debian packaging are based on the dh tools.\nDoes the script necessarily have to run on Mac? \n. @pcottle\nIs there a chance I could talk to you (on chat / skype)? I think I can fix the problem but I have some doubts like about where the script would be run etc.\n. @pcottle \nI have rewritten the files on basis of dpkg. Now executing package.sh inside the debian directory creates the .deb file in the parent without any problems.\nNote: file should be executed from inside the debian directory, fakeroot should be installed.\nPlease review\n. @pcottle \nDid you check this yet? The script only uses fakeroot, sed, and dpkg now. They should all work fine on Mac.\n. Thanks, I'll keep that in mind. Should I do the rpm packages next? \n. Seems fine, although I would be more relieved if I tested the deb built on your system by installing it on mine\n. Installation usually is done by double clicking. On worst cases it can be installed by dpkg -i command.  Although I haven't met a debian system where double clicking the downloaded file didn't work \n. Seems to install and work fine :smile: But Lintian is giving some errors. Lintian checks for .deb packages for best practices. The deb produced on my system isn't giving any :frowning: \n. Anyway, those are only warnings. Shouldn't cause any trouble.\n. Awesome! \nLet me know if I should write a man page for this. Debian packages are usually expected to have one. \n. Please break up the Linux section into parts. AUR is for Arch ONLY.\n.deb package is only for debian systems. \n.rpm, which should be the next ToDo, would be for RedHat Linux derivatives\n. Will do. \n. I am ready to help, if needed.\n. @sethwoodworth \nfpp.1 would go in debian/usr/share/man/man1.\n. Actually I did point these out. These warnings are only occurring when the packaging is done on a mac. When I use the exact same script on Linux, the packages give a clean lintian output. \n. @pcottle \nI think you misunderstood. The errors are because the packages are created on Mac, not because of installing on one. \nAnyway, I did check, and the warnings shouldn't cause any real trouble\n. Here it is:\nhttps://drive.google.com/file/d/0B6jsnt965Zwrc05UYnFEVHVhQTQ/view?usp=sharing\nEDIT: @jiawen I don't have Ubuntu installed (and linux mint isn't returning any serious errors/warnings). Could you tell me what Ubuntu's Software Center has to say about this one?\nEDIT 2: @pcottle There still seems to be one error about man page compression. I'll have to go through @sethwoodworth's PR to fix that.\n. @yggdr\nFrom which directory were you running the script? \n. I don't know why it was missing, but it's there right now.\nhttps://aur.archlinux.org/packages/fpp-git/\n@pcottle I think this issue can be closed. \n. That's weird. I've been using neovim for over 6 months and it supports both\nnvim +17 'file.c'\nand\nnvim 'file.c' +17 formats.\n. @jeffkile Could you ensure that the file is being opened in nvim (:version after opening file via fpp)? It might be not obvious if both vim and nvim use the same vimrc and maybe it's reading nvim environment variable and thus nvim format but attempting to open the file finally with vim?\n. I never noticed the first mistake. Thanks a bunch for fixing that. Seems great !\n. ",
    "Lbatson": "+1 it's great so far but this would be very useful\n. +1 it's great so far but this would be very useful\n. ",
    "beno2832": "stop\nOn May 8, 2015 8:32 AM, \"Lance Batson\" notifications@github.com wrote:\n\n+1. it's great so far but this would be very useful\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/44#issuecomment-100235296.\n. stop\nOn May 8, 2015 8:32 AM, \"Lance Batson\" notifications@github.com wrote:\n+1. it's great so far but this would be very useful\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/44#issuecomment-100235296.\n. \n",
    "jkup": "Literally 2 minutes after posting this I saw #42. Sorry, closing now!\n. Literally 2 minutes after posting this I saw #42. Sorry, closing now!\n. ",
    "Haraldson": "Experiencing the same. When the working directory is ~/www/project/, and I select a file and try running the command git add on it, PathPicker is attempting to add the file ~/www/src/app/app.js, while the proper path would be ~/www/project/www/src/app/app.js.\nThe command open, on the other hand, generates a full path like this: /Users/name/www/project/~/www/src/app/app.js, also not working. Without the tilde it\u2019s golden.\n. Experiencing the same. When the working directory is ~/www/project/, and I select a file and try running the command git add on it, PathPicker is attempting to add the file ~/www/src/app/app.js, while the proper path would be ~/www/project/www/src/app/app.js.\nThe command open, on the other hand, generates a full path like this: /Users/name/www/project/~/www/src/app/app.js, also not working. Without the tilde it\u2019s golden.\n. ",
    "Mattias-": "3 seems like an arbitrary number.\nPersonally I'd prefer to have the limit at 2 rather than 3.\n. 3 seems like an arbitrary number.\nPersonally I'd prefer to have the limit at 2 rather than 3.\n. ",
    "peteryates": "It is an arbitrary number; I'm equally as happy with 2\n. I'm against vim's tags because I think they're horribly confusing.\nThe winwidth option looks good and isn't too overwhelming.  Unfortunately, though, this solution would require prior knowledge (I'd never heard of it despite having used vim almost-daily for more than twelve years!) and setup in vim, so someone using fpp for the first time could still be overwhelmed by something like this:\n\n. It is an arbitrary number; I'm equally as happy with 2\n. I'm against vim's tags because I think they're horribly confusing.\nThe winwidth option looks good and isn't too overwhelming.  Unfortunately, though, this solution would require prior knowledge (I'd never heard of it despite having used vim almost-daily for more than twelve years!) and setup in vim, so someone using fpp for the first time could still be overwhelmed by something like this:\n\n. ",
    "robenkleene": "Another vote for opening the files in buffers rather than. My expectation is that fpp will open files the same way vim would normally open them (e.g., vim file1.txt file2.txt, i.e., in buffers). \nThe multiple buffer editing feature in vim is designed for this exact case, e.g., it gives a warning when the user quits before addressing all the opened files.\nThis is a common situation already when composing shell commands with vim (e.g., with grep and xargs). I don't see any reason fpp needs special treatment here.\nI also don't see the need for a user preference, if a user wants fpp to use tabs instead of buffers, they can already simply set FPP_EDITOR=vim -O. EDIT: Actually I take this back, setting the FPP_EDITOR this way would break other vim specific features such as opening at the line number of a match. So a configuration parameter would be appropriate to ensure that these features work well together.\nAll imo of course, ps for those looking to disable the split behavior setting to be vim followed by a space does the trick: FPP_EDITOR=\"vim \". EDIT: But this also breaks other vim specific features such as opening at the line number of a match.\n. Another vote for opening the files in buffers rather than. My expectation is that fpp will open files the same way vim would normally open them (e.g., vim file1.txt file2.txt, i.e., in buffers). \nThe multiple buffer editing feature in vim is designed for this exact case, e.g., it gives a warning when the user quits before addressing all the opened files.\nThis is a common situation already when composing shell commands with vim (e.g., with grep and xargs). I don't see any reason fpp needs special treatment here.\nI also don't see the need for a user preference, if a user wants fpp to use tabs instead of buffers, they can already simply set FPP_EDITOR=vim -O. EDIT: Actually I take this back, setting the FPP_EDITOR this way would break other vim specific features such as opening at the line number of a match. So a configuration parameter would be appropriate to ensure that these features work well together.\nAll imo of course, ps for those looking to disable the split behavior setting to be vim followed by a space does the trick: FPP_EDITOR=\"vim \". EDIT: But this also breaks other vim specific features such as opening at the line number of a match.\n. ",
    "imod": "directories with periods are also not recognized properly\n. directories with periods are also not recognized properly\n. ",
    "joeguilmette": "a big +1 from me. i wouldn't go so far as to say useless without aliases, but it would be much more useful if i were able to use aliases.\n. a big +1 from me. i wouldn't go so far as to say useless without aliases, but it would be much more useful if i were able to use aliases.\n. ",
    "langtianlang": "@pcottle Using 0.5.6. Zsh aliases did not work for me\n\u279c  code/stuff git:(master) \u2717 gs | fpp\ngetting input\nexecuting command:\nga '/Users/llang/code/stuff/thing.rb'\n/Users/llang/.fpp/.fpp.sh: line 4: ga: command not found\n\u279c  code/stuff git:(master) \u2717 brew upgrade fpp\nError: fpp 0.5.6 already installed\n\u279c  code/upclookup git:(master) \u2717 ga\nNothing specified, nothing added.\nMaybe you wanted to say 'git add .'?\n. @pcottle Using 0.5.6. Zsh aliases did not work for me\n\u279c  code/stuff git:(master) \u2717 gs | fpp\ngetting input\nexecuting command:\nga '/Users/llang/code/stuff/thing.rb'\n/Users/llang/.fpp/.fpp.sh: line 4: ga: command not found\n\u279c  code/stuff git:(master) \u2717 brew upgrade fpp\nError: fpp 0.5.6 already installed\n\u279c  code/upclookup git:(master) \u2717 ga\nNothing specified, nothing added.\nMaybe you wanted to say 'git add .'?\n. ",
    "Eyjafjallajokull": "+1\n. +1\n. ",
    "sametmax": "+1 You can provide the bash script as an asset if you want, but it's probably easier to just make a setuptool entrypoint calling a Python function. If you need guidance for this, ping me.\n. I won't do that. Good bye.\n. +1 You can provide the bash script as an asset if you want, but it's probably easier to just make a setuptool entrypoint calling a Python function. If you need guidance for this, ping me.\n. I won't do that. Good bye.\n. ",
    "davvid": "I implemented this same exact feature (with this same exact env. variable name) before checking here and realizing that you did the same.  :+1: for this feature, this would be very helpful.\n. I did test it with editing files (that was my use case: vim and gvim), so that did work, but as you said, it made the code a bit complex.\nIf no one beats me to it then I'll try to rework it with your suggestions in mind.  Thanks for the review\n. thanks y'all. please feel free to take a stab at it -- it'll probably be\nabout a week or two before I'll have a chance to take a look.\nOn May 10, 2015 11:10 AM, \"Peter Cottle\" notifications@github.com wrote:\n\n(lemme know if you cant get around to the refactor and I can take a stab\nand close out this PR)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/pull/61#issuecomment-100676117.\n. I implemented this same exact feature (with this same exact env. variable name) before checking here and realizing that you did the same.  :+1: for this feature, this would be very helpful.\n. I did test it with editing files (that was my use case: vim and gvim), so that did work, but as you said, it made the code a bit complex.\n\nIf no one beats me to it then I'll try to rework it with your suggestions in mind.  Thanks for the review\n. thanks y'all. please feel free to take a stab at it -- it'll probably be\nabout a week or two before I'll have a chance to take a look.\nOn May 10, 2015 11:10 AM, \"Peter Cottle\" notifications@github.com wrote:\n\n(lemme know if you cant get around to the refactor and I can take a stab\nand close out this PR)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/pull/61#issuecomment-100676117.\n. \n",
    "deefour": "@pcottle thanks! :beers: \n. @pcottle thanks! :beers: \n. ",
    "npike": "Same.\n. Same.\n. ",
    "chrisguilbeau": "+1 same output.\n. +1 same output.\n. ",
    "dduong42": "The changes won't affect the python 3 compatibility :).\n. The changes won't affect the python 3 compatibility :).\n. ",
    "mahamudul007": "Duoss4462@gmail.com\n. Duoss4462@gmail.com\n. Duoss4462@gmail.com\n. Duoss4462@gmail.com\n. ",
    "gsheld": "+ 1\n. @pcottle Glad you liked the diff. I'll create another PR for cleanup when I have a chance. I actually found a small bug with the commit you just merged as well, so that will also be addressed in the next PR.\nThanks for reviewing!\n. @pcottle Here's the followup PR as promised. Let me know if you'd like me to update the wiki or the homebrew recipe.\n. @pcottle Glad to help! Good call with the additional test coverage.\n. + 1\n. @pcottle Glad you liked the diff. I'll create another PR for cleanup when I have a chance. I actually found a small bug with the commit you just merged as well, so that will also be addressed in the next PR.\nThanks for reviewing!\n. @pcottle Here's the followup PR as promised. Let me know if you'd like me to update the wiki or the homebrew recipe.\n. @pcottle Glad to help! Good call with the additional test coverage.\n. ",
    "brentvatne": "Same problem here, on a React Native project I ran:\nag RCTNavItem node_modules | fpp\nI then scrolled down to node_modules/react-native/React/Views/RCTNavItem.h:12:@interface RCTNavItem : UIView and pressed enter\nIt opened:\n~/www/node_modules/react-native/React/Views/RCTNavItem.h\nI wanted it to open the relative path:\n./node_modules/react-native/React/Views/RCTNavItem.h\n. To anyone else having the issue I mentioned above with ag, for now it works fine to do ag searchterm path --ackmate | fpp\n. great, thanks @pcottle! this was actually happening from within a git repo\n. Same problem here, on a React Native project I ran:\nag RCTNavItem node_modules | fpp\nI then scrolled down to node_modules/react-native/React/Views/RCTNavItem.h:12:@interface RCTNavItem : UIView and pressed enter\nIt opened:\n~/www/node_modules/react-native/React/Views/RCTNavItem.h\nI wanted it to open the relative path:\n./node_modules/react-native/React/Views/RCTNavItem.h\n. To anyone else having the issue I mentioned above with ag, for now it works fine to do ag searchterm path --ackmate | fpp\n. great, thanks @pcottle! this was actually happening from within a git repo\n. ",
    "dutzi": "+1 for command line svn\n. +1 for command line svn\n. ",
    "mstorus": "Would it be sufficient to listen for the Shift Out and Data Link Escape control codes?\nEven if you can't tell if a modifier key was set, pressing Ctrl-n and Ctrl-p seem to produce those control codes, respectively. (codes 14 and 16 http://en.wikipedia.org/wiki/ASCII#ASCII_control_characters)\nI'm not very familiar with curses, so I don't know how portable this solution is.\n. Would it be sufficient to listen for the Shift Out and Data Link Escape control codes?\nEven if you can't tell if a modifier key was set, pressing Ctrl-n and Ctrl-p seem to produce those control codes, respectively. (codes 14 and 16 http://en.wikipedia.org/wiki/ASCII#ASCII_control_characters)\nI'm not very familiar with curses, so I don't know how portable this solution is.\n. ",
    "edi9999": "Hi, If I do the following:\nfunction doProgram {\n  # process input from pipe and store as pickled file\n  $PYTHONCMD \"$BASEDIR/src/processInput.py\"\n  # now close stdin and choose input...\n  exec 0<&-\n  # $PYTHONCMD \"$BASEDIR/src/choose.py\" < /dev/tty\n  # execute the output bash script\n  # sh ~/.fpp/.fpp.sh < /dev/tty\n  cat ~/.fpp/.pickle\n}\nI don't get the list of filenames as a result. Where can I get the list of the possible files ?\nHere is what I get with ls | /.fpp\n(dp0\nI0\nccopy_reg\n_reconstructor\np1\n(cformat\nSimpleLine\np2\nc__builtin__\nobject\np3\nNtp4\nRp5\n(dp6\nS'index'\np7\nI0\nsS'line'\np8\nS'assets\\n'\np9\nsbsI1\ng1\n(cformat\nLineMatch\np10\ng3\nNtp11\nRp12\n(dp13\ng7\nI1\nsS'end'\np14\nI15\nsS'hovered'\np15\nI00\nsS'selected'\np16\nI00\nsS'start'\np17\nI0\nsS'num'\np18\nI0\nsS'file'\np19\nS'./CONTRIBUTING.md'\np20\nsS'originalFile'\np21\nS'CONTRIBUTING.md'\np22\nsS'group'\np23\nS'CONTRIBUTING.md'\np24\nsg8\nS'CONTRIBUTING.md\\n'\np25\nsbsI2\ng1\n(g2\ng3\nNtp26\nRp27\n(dp28\ng7\nI2\nsg8\nS'fpp\\n'\np29\nsbsI3\ng1\n(g10\ng3\nNtp30\nRp31\n(dp32\ng7\nI3\nsg14\nI6\nsg15\nI00\nsg16\nI00\nsg17\nI0\nsg18\nI0\nsg19\nS'./fpp.rb'\np33\nsg21\nS'fpp.rb'\np34\nsg23\nS'fpp.rb'\np35\nsg8\nS'fpp.rb\\n'\np36\nsbsI4\ng1\n(g10\ng3\nNtp37\nRp38\n(dp39\ng7\nI4\nsg14\nI10\nsg15\nI00\nsg16\nI00\nsg17\nI0\nsg18\nI0\nsg19\nS'./index.html'\np40\nsg21\nS'index.html'\np41\nsg23\nS'index.html'\np42\nsg8\nS'index.html\\n'\np43\nsbsI5\ng1\n(g2\ng3\nNtp44\nRp45\n(dp46\ng7\nI5\nsg8\nS'LICENSE\\n'\np47\nsbsI6\ng1\n(g2\ng3\nNtp48\nRp49\n(dp50\ng7\nI6\nsg8\nS'PATENTS\\n'\np51\nsbsI7\ng1\n(g10\ng3\nNtp52\nRp53\n(dp54\ng7\nI7\nsg14\nI9\nsg15\nI00\nsg16\nI00\nsg17\nI0\nsg18\nI0\nsg19\nS'./README.md'\np55\nsg21\nS'README.md'\np56\nsg23\nS'README.md'\np57\nsg8\nS'README.md\\n'\np58\nsbsI8\ng1\n(g2\ng3\nNtp59\nRp60\n(dp61\ng7\nI8\nsg8\nS'scripts\\n'\np62\nsbsI9\ng1\n(g2\ng3\nNtp63\nRp64\n(dp65\ng7\nI9\nsg8\nS'src\\n'\np66\nsbs.%\n. Found how to make it work now, I will be releasing a fork \n. They is one main regex that filters probable file paths. Those then get invalidated by some validators ( for example if the path is origin/master) it is probably not a file.\nThe goal is to return things that look like path names, eg return what a human would say are path names from a stream.\nIt doesn't use anything else than the content of the passed stream (eg doesn't use the file system to see if those files exist) . It also doesn't reformat the path names.\nThe strength is that it can be piped from/to anything\n. Hi, If I do the following:\nfunction doProgram {\n  # process input from pipe and store as pickled file\n  $PYTHONCMD \"$BASEDIR/src/processInput.py\"\n  # now close stdin and choose input...\n  exec 0<&-\n  # $PYTHONCMD \"$BASEDIR/src/choose.py\" < /dev/tty\n  # execute the output bash script\n  # sh ~/.fpp/.fpp.sh < /dev/tty\n  cat ~/.fpp/.pickle\n}\nI don't get the list of filenames as a result. Where can I get the list of the possible files ?\nHere is what I get with ls | /.fpp\n(dp0\nI0\nccopy_reg\n_reconstructor\np1\n(cformat\nSimpleLine\np2\nc__builtin__\nobject\np3\nNtp4\nRp5\n(dp6\nS'index'\np7\nI0\nsS'line'\np8\nS'assets\\n'\np9\nsbsI1\ng1\n(cformat\nLineMatch\np10\ng3\nNtp11\nRp12\n(dp13\ng7\nI1\nsS'end'\np14\nI15\nsS'hovered'\np15\nI00\nsS'selected'\np16\nI00\nsS'start'\np17\nI0\nsS'num'\np18\nI0\nsS'file'\np19\nS'./CONTRIBUTING.md'\np20\nsS'originalFile'\np21\nS'CONTRIBUTING.md'\np22\nsS'group'\np23\nS'CONTRIBUTING.md'\np24\nsg8\nS'CONTRIBUTING.md\\n'\np25\nsbsI2\ng1\n(g2\ng3\nNtp26\nRp27\n(dp28\ng7\nI2\nsg8\nS'fpp\\n'\np29\nsbsI3\ng1\n(g10\ng3\nNtp30\nRp31\n(dp32\ng7\nI3\nsg14\nI6\nsg15\nI00\nsg16\nI00\nsg17\nI0\nsg18\nI0\nsg19\nS'./fpp.rb'\np33\nsg21\nS'fpp.rb'\np34\nsg23\nS'fpp.rb'\np35\nsg8\nS'fpp.rb\\n'\np36\nsbsI4\ng1\n(g10\ng3\nNtp37\nRp38\n(dp39\ng7\nI4\nsg14\nI10\nsg15\nI00\nsg16\nI00\nsg17\nI0\nsg18\nI0\nsg19\nS'./index.html'\np40\nsg21\nS'index.html'\np41\nsg23\nS'index.html'\np42\nsg8\nS'index.html\\n'\np43\nsbsI5\ng1\n(g2\ng3\nNtp44\nRp45\n(dp46\ng7\nI5\nsg8\nS'LICENSE\\n'\np47\nsbsI6\ng1\n(g2\ng3\nNtp48\nRp49\n(dp50\ng7\nI6\nsg8\nS'PATENTS\\n'\np51\nsbsI7\ng1\n(g10\ng3\nNtp52\nRp53\n(dp54\ng7\nI7\nsg14\nI9\nsg15\nI00\nsg16\nI00\nsg17\nI0\nsg18\nI0\nsg19\nS'./README.md'\np55\nsg21\nS'README.md'\np56\nsg23\nS'README.md'\np57\nsg8\nS'README.md\\n'\np58\nsbsI8\ng1\n(g2\ng3\nNtp59\nRp60\n(dp61\ng7\nI8\nsg8\nS'scripts\\n'\np62\nsbsI9\ng1\n(g2\ng3\nNtp63\nRp64\n(dp65\ng7\nI9\nsg8\nS'src\\n'\np66\nsbs.%\n. Found how to make it work now, I will be releasing a fork \n. They is one main regex that filters probable file paths. Those then get invalidated by some validators ( for example if the path is origin/master) it is probably not a file.\nThe goal is to return things that look like path names, eg return what a human would say are path names from a stream.\nIt doesn't use anything else than the content of the passed stream (eg doesn't use the file system to see if those files exist) . It also doesn't reformat the path names.\nThe strength is that it can be piped from/to anything\n. ",
    "xatnys": "Indeed, this is more convenience / desired workflow than an outright improvement. There's a simplicity to splitting the workflow into two steps;  something like this:\n- enter command pipeline: foo | bar | fpp\n- select files -> ENTER\nSo, at least to me, it seems like it'd be more natural to fit in applying commands in the first step rather than after the file selection process. I'm not sure what the alias support specifically entails, but I suppose I'm looking to be able to create some specialized fpp aliases. I can hack around it by abusing $EDITOR so this is certainly not imperative. I'm currently doing this:\nfunction fpp-add { EDITOR='git add' fpp }\n. Indeed, this is more convenience / desired workflow than an outright improvement. There's a simplicity to splitting the workflow into two steps;  something like this:\n- enter command pipeline: foo | bar | fpp\n- select files -> ENTER\nSo, at least to me, it seems like it'd be more natural to fit in applying commands in the first step rather than after the file selection process. I'm not sure what the alias support specifically entails, but I suppose I'm looking to be able to create some specialized fpp aliases. I can hack around it by abusing $EDITOR so this is certainly not imperative. I'm currently doing this:\nfunction fpp-add { EDITOR='git add' fpp }\n. ",
    "webglider": "@pcottle having this feature will also greatly help people who want to write scripts which use fpp. An example would be a script which downloads a set of zip files into a folder cds into it and pipes an ls into fpp allowing the user to select some of the zip files after which it would automatically unzip them or do something like that. Now to achieve this kind of functionality fpp has to have the option of passing commands to be executed as parameters (in this case the unzip command)\n. @pcottle having this feature will also greatly help people who want to write scripts which use fpp. An example would be a script which downloads a set of zip files into a folder cds into it and pipes an ls into fpp allowing the user to select some of the zip files after which it would automatically unzip them or do something like that. Now to achieve this kind of functionality fpp has to have the option of passing commands to be executed as parameters (in this case the unzip command)\n. ",
    "christylewis1978-36": "Stay off my account\nOn Wednesday, May 13, 2015, Lin Xu notifications@github.com wrote:\n\noic that's good approach. the mock is nice, also would be super sweet to\nhave a built in logging to stderr or whatever that we can use while dev. I\nuse sys.stderr.write and then remove it when i commit, but a general\npurpose logger would be useful\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/72#issuecomment-101777859.\n. Stay off my account\n\nOn Wednesday, May 13, 2015, Lin Xu notifications@github.com wrote:\n\noic that's good approach. the mock is nice, also would be super sweet to\nhave a built in logging to stderr or whatever that we can use while dev. I\nuse sys.stderr.write and then remove it when i commit, but a general\npurpose logger would be useful\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/72#issuecomment-101777859.\n. \n",
    "eduardtm": "I ran into the same issue during my first minutes of using fpp, +1\n. I ran into the same issue during my first minutes of using fpp, +1\n. ",
    "BillLeecn": "Cosbynator's regex is used to match emoji, but more characters should be matched to handle unicode filenames. For East Asians, CJK Unified Ideographs is important. It consists of serveral unicode ranges:\n- CJK Unified Ideographs: 4E00 to 9FFF\n- CJK Unified Ideographs Extension A: 3400 to 4DBF\n- CJK Unified Ideographs Extension B: 20000 to 2A6DF\n- CJK Unified Ideographs Extension C: 2A700 to 2B73F\n- CJK Unified Ideographs Extension D: 2B740 to 2B81F\nAs a Simplified Chinese users, I think (at least) 4E00 to 9FFF and 3400 to 4DBF should be matched.\n. Cosbynator's regex is used to match emoji, but more characters should be matched to handle unicode filenames. For East Asians, CJK Unified Ideographs is important. It consists of serveral unicode ranges:\n- CJK Unified Ideographs: 4E00 to 9FFF\n- CJK Unified Ideographs Extension A: 3400 to 4DBF\n- CJK Unified Ideographs Extension B: 20000 to 2A6DF\n- CJK Unified Ideographs Extension C: 2A700 to 2B73F\n- CJK Unified Ideographs Extension D: 2B740 to 2B81F\nAs a Simplified Chinese users, I think (at least) 4E00 to 9FFF and 3400 to 4DBF should be matched.\n. ",
    "jbnicolai": "@pcottle Oops, can't believe I forgot to link it when creating the issue. Here it is!\nWhen running fpp normally in tmux it works exactly as expected. However, you have to remember to insert fpp in the pipeline when executing your command. What this plugin allows is for the user to press a key combination (prefix + i) and run fpp over the most recently created stdout and stderr in the active TTY.\nIf you look at this gif in the original issue you see fpp is never executed manually on git diff. The user ran git diff, realized he wanted to pick a path and pressed prefix + i afterwards.\n. @lastquestion thank you, I fixed the link!\nIt will truncate it, I suppose. Good question, let me do some testing and report back :)\n. Thanks!\n. @pcottle didn't know about --clean, that'll serve my purposes just fine :)\n@lastquestion my use case is a bit obscure. It's for a tmux plugin (tmux-fpp) which runs fpp over the last generated stdout \n. Thanks for the heads-up @pcottle, and no worries. Won't update till tomorrow at the earliest ;-)\n. Thanks!\n. Yeah shellcheck is amazing! :)\n. @pcottle Oops, can't believe I forgot to link it when creating the issue. Here it is!\nWhen running fpp normally in tmux it works exactly as expected. However, you have to remember to insert fpp in the pipeline when executing your command. What this plugin allows is for the user to press a key combination (prefix + i) and run fpp over the most recently created stdout and stderr in the active TTY.\nIf you look at this gif in the original issue you see fpp is never executed manually on git diff. The user ran git diff, realized he wanted to pick a path and pressed prefix + i afterwards.\n. @lastquestion thank you, I fixed the link!\nIt will truncate it, I suppose. Good question, let me do some testing and report back :)\n. Thanks!\n. @pcottle didn't know about --clean, that'll serve my purposes just fine :)\n@lastquestion my use case is a bit obscure. It's for a tmux plugin (tmux-fpp) which runs fpp over the last generated stdout \n. Thanks for the heads-up @pcottle, and no worries. Won't update till tomorrow at the earliest ;-)\n. Thanks!\n. Yeah shellcheck is amazing! :)\n. ",
    "MissCrazyRarity": "It has issues as do we all and I need some help any sites known that I can go  to learn \n. It has issues as do we all and I need some help any sites known that I can go  to learn \n. ",
    "stephanschubert": "I moved my comment from #94 to this one to keep it all in one place.\nI ran git status in my ~/git/dotfiles repository and i'm using thoughtbot's rcm tool for management which is why the files are not prefixed with a .:\n```\nOn branch master\nYour branch is up-to-date with 'origin/master'.\nChanges not staged for commit:\n  (use \"git add ...\" to update what will be committed)\n  (use \"git checkout -- ...\" to discard changes in working directory)\nmodified:   irbrc\nmodified:   pryrc\nmodified:   rspec\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n```\nOnly and/or in the last line is recognized - incorrectly. \n. I have no idea about performance patterns of git ls-files but maybe detection of .git and some clever combination of git ls-files's options could provide a middle way between \"special case for git output\" and \"ls the whole current directory\"?\n. Just realized there are even more already closed/moved issues about this. I'll close this one and add it as a comment to #83. \n. I moved my comment from #94 to this one to keep it all in one place.\nI ran git status in my ~/git/dotfiles repository and i'm using thoughtbot's rcm tool for management which is why the files are not prefixed with a .:\n```\nOn branch master\nYour branch is up-to-date with 'origin/master'.\nChanges not staged for commit:\n  (use \"git add ...\" to update what will be committed)\n  (use \"git checkout -- ...\" to discard changes in working directory)\nmodified:   irbrc\nmodified:   pryrc\nmodified:   rspec\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n```\nOnly and/or in the last line is recognized - incorrectly. \n. I have no idea about performance patterns of git ls-files but maybe detection of .git and some clever combination of git ls-files's options could provide a middle way between \"special case for git output\" and \"ls the whole current directory\"?\n. Just realized there are even more already closed/moved issues about this. I'll close this one and add it as a comment to #83. \n. ",
    "hegazy": "Shit, the commit is not assigned to my profile --\n. Actually, the problem is from my side. Git wasn't configured correctly at my machine like discussed here https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/#common-reasons-that-contributions-are-not-counted\nCan I change it with a another commit? :-)\n. Sorry, that would be very silly to do, I like the clean history. \nAnyway, Thank you very much for the great project.\n. @pcottle It's the same issue @devisnik mentioned I guess as I can't open the file itself as it's opening the path prefixed with those three dots\n. @devisnik Works for me too! But why --stat is displaying the full qualified paths on standard output and converts it when getting piped?. We can also use the command like this git show HEAD --stat=<width> It seems that the default value is set to 80. We can override that by increasing <width>. Shit, the commit is not assigned to my profile --\n. Actually, the problem is from my side. Git wasn't configured correctly at my machine like discussed here https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/#common-reasons-that-contributions-are-not-counted\nCan I change it with a another commit? :-)\n. Sorry, that would be very silly to do, I like the clean history. \nAnyway, Thank you very much for the great project.\n. @pcottle It's the same issue @devisnik mentioned I guess as I can't open the file itself as it's opening the path prefixed with those three dots\n. @devisnik Works for me too! But why --stat is displaying the full qualified paths on standard output and converts it when getting piped?. We can also use the command like this git show HEAD --stat=<width> It seems that the default value is set to 80. We can override that by increasing <width>. ",
    "mknecht": "Hm, nah, what about detecting that stdout is a PIPE and thus not showing the curses interface, but just printing the detected paths to stdout. Would such a PR be accepted?\n. Ah, nice! :) Didn't see the connection.\nClosing, thanks!\n. Hm, nah, what about detecting that stdout is a PIPE and thus not showing the curses interface, but just printing the detected paths to stdout. Would such a PR be accepted?\n. Ah, nice! :) Didn't see the connection.\nClosing, thanks!\n. ",
    "engz": "\ud83d\ude4c\nOn Sat, May 16, 2015 at 9:49 AM Peter Cottle notifications@github.com\nwrote:\n\n(I'll push this to the site once I'm on my desktop so you won't see the\nchanges immediately)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/pull/112#issuecomment-102650505.\n. :tada: \n. Yay!!\nOn Sat, Jun 6, 2015 at 1:48 PM Peter Cottle notifications@github.com\nwrote:\nClosed #153 https://github.com/facebook/PathPicker/issues/153 via\n6459147\nhttps://github.com/facebook/PathPicker/commit/64591479034e7636b6ad1d0d31e417d3afbf58d1\n.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/153#event-324435610.\n. \ud83d\ude4c\nOn Sat, May 16, 2015 at 9:49 AM Peter Cottle notifications@github.com\nwrote:\n(I'll push this to the site once I'm on my desktop so you won't see the\nchanges immediately)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/pull/112#issuecomment-102650505.\n. :tada: \n. Yay!!\nOn Sat, Jun 6, 2015 at 1:48 PM Peter Cottle notifications@github.com\nwrote:\nClosed #153 https://github.com/facebook/PathPicker/issues/153 via\n6459147\nhttps://github.com/facebook/PathPicker/commit/64591479034e7636b6ad1d0d31e417d3afbf58d1\n.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/153#event-324435610.\n. \n",
    "tbpalsulich": "Works for me on Ubuntu 15.04:\n``\n\u279c  PathPicker git:(DebianPackaging) cd debian \n\u279c  debian git:(DebianPackaging) \u2717 fpp --help\nzsh: command not found: fpp\n\u279c  debian git:(DebianPackaging) ./package.sh \ndpkg-deb: building packagepathpicker' in `../fpp.deb'.\n\u279c  debian git:(DebianPackaging) \u2717 sudo dpkg -i ../fpp.deb\nSelecting previously unselected package pathpicker.\n(Reading database ... 216159 files and directories currently installed.)\nPreparing to unpack ../fpp.deb ...\nUnpacking pathpicker (0.5.7) ...\nSetting up pathpicker (0.5.7) ...\n\u279c  debian git:(DebianPackaging) \u2717 sudo apt-get install -f\nReading package lists... Done\nBuilding dependency tree     \nReading state information... Done\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n\u279c  debian git:(DebianPackaging) \u2717 fpp --help\n\nWelcome to fpp, the Facebook PathPicker! We hope your stay\n...\n\u279c  debian git:(DebianPackaging) \u2717 sudo apt-get remove pathpicker\nReading package lists... Done\nBuilding dependency tree     \nReading state information... Done\nThe following packages will be REMOVED:\n  pathpicker\n0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.\nAfter this operation, 214 kB disk space will be freed.\nDo you want to continue? [Y/n] y\n(Reading database ... 216214 files and directories currently installed.)\nRemoving pathpicker (0.5.7) ...\n\u279c  debian git:(DebianPackaging) \u2717 fpp --help\nzsh: command not found: fpp\n```\n. I'm mobile right now. But, from what I remember, you'll need some quotes around {}.\n. Works for me on Ubuntu 15.04:\n``\n\u279c  PathPicker git:(DebianPackaging) cd debian \n\u279c  debian git:(DebianPackaging) \u2717 fpp --help\nzsh: command not found: fpp\n\u279c  debian git:(DebianPackaging) ./package.sh \ndpkg-deb: building packagepathpicker' in `../fpp.deb'.\n\u279c  debian git:(DebianPackaging) \u2717 sudo dpkg -i ../fpp.deb\nSelecting previously unselected package pathpicker.\n(Reading database ... 216159 files and directories currently installed.)\nPreparing to unpack ../fpp.deb ...\nUnpacking pathpicker (0.5.7) ...\nSetting up pathpicker (0.5.7) ...\n\u279c  debian git:(DebianPackaging) \u2717 sudo apt-get install -f\nReading package lists... Done\nBuilding dependency tree     \nReading state information... Done\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n\u279c  debian git:(DebianPackaging) \u2717 fpp --help\n\nWelcome to fpp, the Facebook PathPicker! We hope your stay\n...\n\u279c  debian git:(DebianPackaging) \u2717 sudo apt-get remove pathpicker\nReading package lists... Done\nBuilding dependency tree     \nReading state information... Done\nThe following packages will be REMOVED:\n  pathpicker\n0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.\nAfter this operation, 214 kB disk space will be freed.\nDo you want to continue? [Y/n] y\n(Reading database ... 216214 files and directories currently installed.)\nRemoving pathpicker (0.5.7) ...\n\u279c  debian git:(DebianPackaging) \u2717 fpp --help\nzsh: command not found: fpp\n```\n. I'm mobile right now. But, from what I remember, you'll need some quotes around {}.\n. ",
    "raine": "I'm not sure about the specifics, but I use prezto.\nI source .zshsecrets from .zshrc and .zshsecret sources commands.zsh\nBut the weird thing about that error output is that commands.zsh is not in the home directory, but rather in a directory under it.\n. I get the same errors when I do that.\n. Awesome.\n. I'm not sure about the specifics, but I use prezto.\nI source .zshsecrets from .zshrc and .zshsecret sources commands.zsh\nBut the weird thing about that error output is that commands.zsh is not in the home directory, but rather in a directory under it.\n. I get the same errors when I do that.\n. Awesome.\n. ",
    "artemave": "Thanks for the detailed explanation! \nHow would you use fzf? fpp | fzf seems to be eating every second input character.\n. Thanks for the detailed explanation! \nHow would you use fzf? fpp | fzf seems to be eating every second input character.\n. ",
    "dyerw": "@pcottle thanks for the quick fix!\n. @pcottle thanks for the quick fix!\n. ",
    "benmccormick": "Ah, I checked to see if there was a newer version but forgot to call brew update first.\nUnfortunately the file system validation seems to remove the false positives but not actually correctly identify that the file with a space in it exists.  \n\n. None of the files above were selectable except the bottom one.  Does the hyphen issue effect hyphens in  folders as well as extensions?  If not I'd expect sublime/user-packages/Package Control.cache to work.  \nUpdate: Confirmed that this issue persists on master.  \nSorry for the pain.  Sublime configuration files are admittedly an awful hodge-podge of edge cases for this type of thing.\n. Confirmed that this all looks good now on master.  Thanks!  I'm excited about this project and have been enjoying using it.\n. @pcottle Fish users at least run commands that get executed by bash all the time.  The reasons for running fish (nicer defaults, cleaner scripting language for user-written scripts) are orthagonal to whatever 3rd party scripts use.  I use bash scripts, python scripts, ruby scripts/etc all the time.  It doesn't matter.\nFWIW I was coming to report this issue as a regression.  Previously fpp worked fine on fish.\n. @pcottle haha sure, give me a second.\n. Hmm, so not working for me.  I'm still seeing \n\u276f ack test | ./fpp\n$? is not the exit status. In fish, please use $status.\n~/.fpp/.fpp.sh (line 3): exit $?;\ninteresting I see that even if I'm currently in bash\nbash-3.2$ ack test | ./fpp\n$? is not the exit status. In fish, please use $status.\n~/.fpp/.fpp.sh (line 3): exit $?;\n. Ok so after a little debugging it looks like $BASH is set for me when run from within a bash script\nso while in fish, running this script\n```\n!/bin/bash\necho $BASH\n```\nechoes /bin/bash because the shebang causes it to be run from within a bash context.\n. Maybe just check directly if $SHELL ends with zsh and use $SHELL, or otherwise use sh?\n. @pcottle so after looking some more it was really this PR: https://github.com/facebook/PathPicker/issues/190 that broke things for fish.\nexit $? is not a valid command for fish. \nI think changing this to just exit should implicitly do the same thing right?  My understanding is that for both bash and fish, returning the last exit code is the default behavior for exit and the $? is just making explicit\n. @pcottle internet says that this should be ok:\nhttp://tldp.org/LDP/abs/html/exit-status.html\nAnd a quick test makes it seem ok.\nTossed a quick stackoverflow question up to see if we could learn from wiser scripters than me, and it seems like the answer is that there is no difference\n. @pcottle so the problem is that fish users already fall into that if statement (which is why this was a problem to begin with)\nSince fpp is a bash script (#!/bin/bash at the top), it gets run in bash even when called from fish.  That causes $BASH to be defined, but $SHELL to still be fish.  If $FISH had been hitting the second if statement and we were running the script with bash, everything would have been fine before as long as I didn't try to use any fishy commands.  \nAs is, with this fix, everything should work fine and I can use fish scripting commands if I want.\nI don't believe the second half of that if statement is ever going to be hit though, unless csh/ksh/whatever act differently when running a bash script.  If you want what I think was the intended behavior, you'll have to check whether $SHELL ends with bash, fish, or zsh.  Personally I think you're probably just better off axing the if statement though.\n. \nQuick example of the behavior described in my last comment.\n. @pcottle I personally don't do very much with Fish as a scripting language, so it doesn't matter to me.  I use fish for the autocomplete/history and write my scripts in python for the most part, with an occasional fish or bash script that I use shebangs to run with the correct shell.  I don't care about doing fancy fishy things within PathPicker, 90% of the time I'm just using it to open files in an editor.  What I cared about with this was it not crashing if I did ack -l foo | fpp\nOther people might care more, but its not a big deal to me\n. Ah, I checked to see if there was a newer version but forgot to call brew update first.\nUnfortunately the file system validation seems to remove the false positives but not actually correctly identify that the file with a space in it exists.  \n\n. None of the files above were selectable except the bottom one.  Does the hyphen issue effect hyphens in  folders as well as extensions?  If not I'd expect sublime/user-packages/Package Control.cache to work.  \nUpdate: Confirmed that this issue persists on master.  \nSorry for the pain.  Sublime configuration files are admittedly an awful hodge-podge of edge cases for this type of thing.\n. Confirmed that this all looks good now on master.  Thanks!  I'm excited about this project and have been enjoying using it.\n. @pcottle Fish users at least run commands that get executed by bash all the time.  The reasons for running fish (nicer defaults, cleaner scripting language for user-written scripts) are orthagonal to whatever 3rd party scripts use.  I use bash scripts, python scripts, ruby scripts/etc all the time.  It doesn't matter.\nFWIW I was coming to report this issue as a regression.  Previously fpp worked fine on fish.\n. @pcottle haha sure, give me a second.\n. Hmm, so not working for me.  I'm still seeing \n\u276f ack test | ./fpp\n$? is not the exit status. In fish, please use $status.\n~/.fpp/.fpp.sh (line 3): exit $?;\ninteresting I see that even if I'm currently in bash\nbash-3.2$ ack test | ./fpp\n$? is not the exit status. In fish, please use $status.\n~/.fpp/.fpp.sh (line 3): exit $?;\n. Ok so after a little debugging it looks like $BASH is set for me when run from within a bash script\nso while in fish, running this script\n```\n!/bin/bash\necho $BASH\n```\nechoes /bin/bash because the shebang causes it to be run from within a bash context.\n. Maybe just check directly if $SHELL ends with zsh and use $SHELL, or otherwise use sh?\n. @pcottle so after looking some more it was really this PR: https://github.com/facebook/PathPicker/issues/190 that broke things for fish.\nexit $? is not a valid command for fish. \nI think changing this to just exit should implicitly do the same thing right?  My understanding is that for both bash and fish, returning the last exit code is the default behavior for exit and the $? is just making explicit\n. @pcottle internet says that this should be ok:\nhttp://tldp.org/LDP/abs/html/exit-status.html\nAnd a quick test makes it seem ok.\nTossed a quick stackoverflow question up to see if we could learn from wiser scripters than me, and it seems like the answer is that there is no difference\n. @pcottle so the problem is that fish users already fall into that if statement (which is why this was a problem to begin with)\nSince fpp is a bash script (#!/bin/bash at the top), it gets run in bash even when called from fish.  That causes $BASH to be defined, but $SHELL to still be fish.  If $FISH had been hitting the second if statement and we were running the script with bash, everything would have been fine before as long as I didn't try to use any fishy commands.  \nAs is, with this fix, everything should work fine and I can use fish scripting commands if I want.\nI don't believe the second half of that if statement is ever going to be hit though, unless csh/ksh/whatever act differently when running a bash script.  If you want what I think was the intended behavior, you'll have to check whether $SHELL ends with bash, fish, or zsh.  Personally I think you're probably just better off axing the if statement though.\n. \nQuick example of the behavior described in my last comment.\n. @pcottle I personally don't do very much with Fish as a scripting language, so it doesn't matter to me.  I use fish for the autocomplete/history and write my scripts in python for the most part, with an occasional fish or bash script that I use shebangs to run with the correct shell.  I don't care about doing fancy fishy things within PathPicker, 90% of the time I'm just using it to open files in an editor.  What I cared about with this was it not crashing if I did ack -l foo | fpp\nOther people might care more, but its not a big deal to me\n. ",
    "mrandrewandrade": "Actually I figured it out.  I just had to run:\nfpp --clean\n. Actaully nevermind.\nWhen I run:\ngit status | fpp\nIt stops working again\n. \u279c  ~  fpp\nUsing old result...\nNo lines matched!!\n\u279c  ~  fpp --version;\nfpp version 0.6.0\n\u279c  ~  ls -la ~/.fpp/;\ntotal 56\ndrwxr-xr-x  2 anon anon  4096 May 30 12:44 .\ndrwx------ 49 anon anon 16384 May 31 17:48 ..\n-rw-r--r--  1 anon anon   134 May 31 17:48 .fpp.log\n-rw-r--r--  1 anon anon    26 May 31 17:48 .fpp.sh\n-rw-r--r--  1 anon anon  1969 May 30 12:44 .pickle\n. \u279c  cd /usr/local/bin/PathPicker/\n\u279c  PathPicker git:(master) ls\nassets  CONTRIBUTING.md  debian  fpp  fpp.rb  index.html  LICENSE  PATENTS  README.md  scripts  src\n\u279c  PathPicker git:(master) fpp\nUsing old result...\nNo lines matched!!\n\u279c  PathPicker git:(master) git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\nnothing to commit, working directory clean\n\u279c  PathPicker git:(master) \n. Thanks!\n. Actually I figured it out.  I just had to run:\nfpp --clean\n. Actaully nevermind.\nWhen I run:\ngit status | fpp\nIt stops working again\n. \u279c  ~  fpp\nUsing old result...\nNo lines matched!!\n\u279c  ~  fpp --version;\nfpp version 0.6.0\n\u279c  ~  ls -la ~/.fpp/;\ntotal 56\ndrwxr-xr-x  2 anon anon  4096 May 30 12:44 .\ndrwx------ 49 anon anon 16384 May 31 17:48 ..\n-rw-r--r--  1 anon anon   134 May 31 17:48 .fpp.log\n-rw-r--r--  1 anon anon    26 May 31 17:48 .fpp.sh\n-rw-r--r--  1 anon anon  1969 May 30 12:44 .pickle\n. \u279c  cd /usr/local/bin/PathPicker/\n\u279c  PathPicker git:(master) ls\nassets  CONTRIBUTING.md  debian  fpp  fpp.rb  index.html  LICENSE  PATENTS  README.md  scripts  src\n\u279c  PathPicker git:(master) fpp\nUsing old result...\nNo lines matched!!\n\u279c  PathPicker git:(master) git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\nnothing to commit, working directory clean\n\u279c  PathPicker git:(master) \n. Thanks!\n. ",
    "sr105": "'.' should be used instead of 'source' since '.' means the same thing and is part of the POSIX standard for sh.\nAlso, if \"sh\" in the main fpp shell script is replaced with $SHELL, the problem disappears. \n. Dug through the code and figured out that line numbers are supported for \"emacs\", \"joe\", and \"vim\". So, I created a symlink to my editor script and named it joe. Then, I set FPP_EDITOR=joe. That didn't work because fpp appears to follow the symlink. So, I named my script joe and created a symlink with the old name and all is good. \nIt would still be nice to support outputting file:line as an option and let the user's command/editor parse it.\n. The EDITOR and symlink stuff must have been an error on my part because I can't reproduce it.\nFor now, I have a symlink named joe that points to a shell script. The script takes the list of filenames and sends them over ssh to another script which uses emacsclient to open them on another machine. I mangle each path like this before I send them:\nfor each path in \"$@\":\n     path = /ssh:user@host:$(realpath $path)\nI pass '+[0-9]+' args as-is.\nI was thinking that when the EDITOR is not explicitly emacs, joe, or vim, there could be an option (off by default like today) to pass the paths in $F as path:line and let the user parse them. The option could take an optional argument to specify style:\n-X [type]\noptional type can be:\n    v - vi style:         \"file +line\" for one file\n    e - emacs style:      \"+line file\" for each file\n    g - grep style:       \"file:line\" for each file (default)\nif EDITOR or FPP_EDITOR is vi, emacs, or joe, -X is ignored and line number styles are set automatically\n. -X [char]      output file and line number for each file separated by char. Default char is ':'. If no line number is found, 0 is used. Example: file.txt:78.\n. I think you're right about limiting the options. If you can parse one format, you can parse any.\n. '.' should be used instead of 'source' since '.' means the same thing and is part of the POSIX standard for sh.\nAlso, if \"sh\" in the main fpp shell script is replaced with $SHELL, the problem disappears. \n. Dug through the code and figured out that line numbers are supported for \"emacs\", \"joe\", and \"vim\". So, I created a symlink to my editor script and named it joe. Then, I set FPP_EDITOR=joe. That didn't work because fpp appears to follow the symlink. So, I named my script joe and created a symlink with the old name and all is good. \nIt would still be nice to support outputting file:line as an option and let the user's command/editor parse it.\n. The EDITOR and symlink stuff must have been an error on my part because I can't reproduce it.\nFor now, I have a symlink named joe that points to a shell script. The script takes the list of filenames and sends them over ssh to another script which uses emacsclient to open them on another machine. I mangle each path like this before I send them:\nfor each path in \"$@\":\n     path = /ssh:user@host:$(realpath $path)\nI pass '+[0-9]+' args as-is.\nI was thinking that when the EDITOR is not explicitly emacs, joe, or vim, there could be an option (off by default like today) to pass the paths in $F as path:line and let the user parse them. The option could take an optional argument to specify style:\n-X [type]\noptional type can be:\n    v - vi style:         \"file +line\" for one file\n    e - emacs style:      \"+line file\" for each file\n    g - grep style:       \"file:line\" for each file (default)\nif EDITOR or FPP_EDITOR is vi, emacs, or joe, -X is ignored and line number styles are set automatically\n. -X [char]      output file and line number for each file separated by char. Default char is ':'. If no line number is found, 0 is used. Example: file.txt:78.\n. I think you're right about limiting the options. If you can parse one format, you can parse any.\n. ",
    "Muffo": "@pcottle thanks for the reply.\nHere is the output of fpp --version:\n```\n\nfpp --version\nfpp version 0.6.0\n```\n\nI have also asked help on Stackoverflow and they have replied me saying I was probably sourcing zsh scripts from bash.\nI have checked my ~/.bash_profile and ~/.bashrc but I didn't see any trace of the zsh scripts.\nI haven't fully understood one of the comment about fpp being written in pure Python, but maybe it makes more sense to you...\n. Here is the output of /bin/bash -x \"$(whence fpp)\" that I was suggested to run:\n```\n\n/bin/bash -x \"$(whence fpp)\"\n+ SOURCE=/usr/local/bin/fpp\n+ '[' -h /usr/local/bin/fpp ']'\n+++ dirname /usr/local/bin/fpp\n++ cd -P /usr/local/bin\n++ pwd\n+ BASEDIR=/usr/local/bin\n++ readlink /usr/local/bin/fpp\n+ SOURCE=/usr/local/PathPicker/fpp\n+ [[ /usr/local/PathPicker/fpp != /* ]]\n+ '[' -h /usr/local/PathPicker/fpp ']'\n+++ dirname /usr/local/PathPicker/fpp\n++ cd -P /usr/local/PathPicker\n++ pwd\n+ BASEDIR=/usr/local/PathPicker\n+ PYTHONCMD=python\n+ doProgram\n+ python /usr/local/PathPicker/src/processInput.py\nUsing old result...\n+ exec\n+ python /usr/local/PathPicker/src/choose.py\n+ sh /root/.fpp/.fpp.sh\n```\n\nThis is the content of /root/.fpp/.fpp.sh:\nshopt -s expand_aliases\nif [ -f ~/.zshrc ]; then\n  source ~/.zshrc\nfi\nif [ -f ~/.bashrc ]; then\n  source ~/.bashrc\nfi\nif [ -f ~/.bash_profile ]; then\n  source ~/.bash_profile\nfi\nif [ -f ~/.bash_aliases ]; then\n  source ~/.bash_aliases\nfi\necho \"executing command:\"\necho \"ls '/root/myfile'\"\nls '/root/myfile'\nHere is where I am sourcing the ~/.zshrc and causing the error.\n. Thanks a lot @pcottle !\nI'll try it tomorrow :+1:\n. @pcottle thanks for the reply.\nHere is the output of fpp --version:\n```\n\nfpp --version\nfpp version 0.6.0\n```\n\nI have also asked help on Stackoverflow and they have replied me saying I was probably sourcing zsh scripts from bash.\nI have checked my ~/.bash_profile and ~/.bashrc but I didn't see any trace of the zsh scripts.\nI haven't fully understood one of the comment about fpp being written in pure Python, but maybe it makes more sense to you...\n. Here is the output of /bin/bash -x \"$(whence fpp)\" that I was suggested to run:\n```\n\n/bin/bash -x \"$(whence fpp)\"\n+ SOURCE=/usr/local/bin/fpp\n+ '[' -h /usr/local/bin/fpp ']'\n+++ dirname /usr/local/bin/fpp\n++ cd -P /usr/local/bin\n++ pwd\n+ BASEDIR=/usr/local/bin\n++ readlink /usr/local/bin/fpp\n+ SOURCE=/usr/local/PathPicker/fpp\n+ [[ /usr/local/PathPicker/fpp != /* ]]\n+ '[' -h /usr/local/PathPicker/fpp ']'\n+++ dirname /usr/local/PathPicker/fpp\n++ cd -P /usr/local/PathPicker\n++ pwd\n+ BASEDIR=/usr/local/PathPicker\n+ PYTHONCMD=python\n+ doProgram\n+ python /usr/local/PathPicker/src/processInput.py\nUsing old result...\n+ exec\n+ python /usr/local/PathPicker/src/choose.py\n+ sh /root/.fpp/.fpp.sh\n```\n\nThis is the content of /root/.fpp/.fpp.sh:\nshopt -s expand_aliases\nif [ -f ~/.zshrc ]; then\n  source ~/.zshrc\nfi\nif [ -f ~/.bashrc ]; then\n  source ~/.bashrc\nfi\nif [ -f ~/.bash_profile ]; then\n  source ~/.bash_profile\nfi\nif [ -f ~/.bash_aliases ]; then\n  source ~/.bash_aliases\nfi\necho \"executing command:\"\necho \"ls '/root/myfile'\"\nls '/root/myfile'\nHere is where I am sourcing the ~/.zshrc and causing the error.\n. Thanks a lot @pcottle !\nI'll try it tomorrow :+1:\n. ",
    "prubel": "Good points. I should have run the tests. What about something like 'F'? or maybe 'd' for down, and it's also right next to f?\n. Gack, I'll get the test fixed up and resubmit. CI sure is nice.\n. Good points. I should have run the tests. What about something like 'F'? or maybe 'd' for down, and it's also right next to f?\n. Gack, I'll get the test fixed up and resubmit. CI sure is nice.\n. ",
    "sethwoodworth": "Great!\nI've reworked a bit of the existing strings. I preserved all of the exportable string variables from USAGE_* but have added more of my own.  I am generating an asciidoc markup file as an intermediary step and using a2x from asciidoc to generate a manpage.\nIs requiring asciidoc to occasionally regenerate the manpage an issue?  Also, where should fpp.1 go for the sake of debian packaging?\n. Good idea, script now throws an error message if a2x isn't installed.  And CLA signed.\n. This PR is so we can discuss what changes if any should be made to the generated manpage, and to see if everyone is happy with a requirement on the asciidoc a2x tool.\n. I can build the .deb and install it on my machine (debian jessie) without any issue.\nI recommend building your .deb files using travis releases\n. Thank you! Although I run Debian, I'd never added a manpage to a Debian package before.\n. Can you gist the output of xmllint --nonet --noout --valid\n\"/storage/code/PathPicker/debian/usr/share/man/man1/manpage.xml please?\nOn Tue, Jul 28, 2015 at 9:31 PM, Pallav Agarwal notifications@github.com\nwrote:\n\n@yggdr https://github.com/yggdr\nFrom which directory were you running the script?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/175#issuecomment-125799465\n.\n. Great!\n\nI've reworked a bit of the existing strings. I preserved all of the exportable string variables from USAGE_* but have added more of my own.  I am generating an asciidoc markup file as an intermediary step and using a2x from asciidoc to generate a manpage.\nIs requiring asciidoc to occasionally regenerate the manpage an issue?  Also, where should fpp.1 go for the sake of debian packaging?\n. Good idea, script now throws an error message if a2x isn't installed.  And CLA signed.\n. This PR is so we can discuss what changes if any should be made to the generated manpage, and to see if everyone is happy with a requirement on the asciidoc a2x tool.\n. I can build the .deb and install it on my machine (debian jessie) without any issue.\nI recommend building your .deb files using travis releases\n. Thank you! Although I run Debian, I'd never added a manpage to a Debian package before.\n. Can you gist the output of xmllint --nonet --noout --valid\n\"/storage/code/PathPicker/debian/usr/share/man/man1/manpage.xml please?\nOn Tue, Jul 28, 2015 at 9:31 PM, Pallav Agarwal notifications@github.com\nwrote:\n\n@yggdr https://github.com/yggdr\nFrom which directory were you running the script?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/175#issuecomment-125799465\n.\n. \n",
    "dpagano": "@pcottle My bad, sorry.\nbrew insisted that I had the last version, but it was wrong (I had 0.5.5). I now installed 0.6.1 by hand and it works.\nI think you can close this issue.\n. @pcottle My bad, sorry.\nbrew insisted that I had the last version, but it was wrong (I had 0.5.5). I now installed 0.6.1 by hand and it works.\nI think you can close this issue.\n. ",
    "devisnik": "Thank you, wasn't aware of that git issue. Works fine with --numstat.\nI think it makes total sense to just fail when selecting one of them. \nLooking forward to the next release!\n. @hegazy Did you see #167 ?. Using --numstat instead of --stat with the git command works for me.. Thank you, wasn't aware of that git issue. Works fine with --numstat.\nI think it makes total sense to just fail when selecting one of them. \nLooking forward to the next release!\n. @hegazy Did you see #167 ?. Using --numstat instead of --stat with the git command works for me.. ",
    "jiawen": "Sorry for the delay, this fell off my radar. The 0.6.1 .deb works great on Ubuntu 14.04 and installs without any warnings. Thanks!\n. Sorry for the delay, this fell off my radar. The 0.6.1 .deb works great on Ubuntu 14.04 and installs without any warnings. Thanks!\n. ",
    "oalders": "@pcottle Would it be reasonable to have fpp log it's history to some arbitary file like ~/.fpp/.fpp_history? At that point it would be trivial to get the last line and re-execute it.  Personally, I'd prefer having a global history over having none at all.\n. Although I now see that sh ~/.fpp/.fpp.sh basically gets me to the same place.\n. I've lived with this for a couple of days and it mostly takes care of my needs, but I sometimes find that I need to re-execute the command previous to the last one I just used, so that's the biggest shortcoming for me so far.\nI understand that adding a history file would bring some added complexity.  I think that's a valid concern.  I'll have a look at your suggestion to alias fpp and try and cat something to my bash history.  If I come up with something useful, I'll post it here as an example. \n. This is what I now have in my .bashrc. Seems to be working well and it's really speeding up my workflow.  Thanks very much for the suggestion (and for your work on this utility).\n``` bash\nfunction fpp() {\n    local fpp=$(type -fp fpp)\nHISTORY_FILE=\"$HOME/.fpp/.fpp_history\"\nFPP_CACHE=\"$HOME/.fpp/.fpp.sh\"\n\ntouch $HISTORY_FILE\n\n# fpp --history just displays entire history prefixed by line numbers\n# fpp --redo will re-exec the last entry in the history file\n# fpp --redo -1 will also re-exec the last entry in the history file\n# fpp --redo -2 will re-exec the second last line in the history file\n# fpp --redo 11 will re-exec entry number 11 in the history file\ncase \"$1\" in\n    --history)\n    cat -n $HISTORY_FILE\n    return 1\n    ;;\n    --redo)\n    if [ $2 ] ; then\n        if [ $2 \\> 0 ] ; then\n            LAST_HISTORY_LINE=$(head -n $2 $HISTORY_FILE |tail -n 1)\n        else\n            LINE_NUMBER=$(( $2 * -1))\n            LAST_HISTORY_LINE=$(tail -n $LINE_NUMBER $HISTORY_FILE | head -n 1)\n        fi\n    else\n        LAST_HISTORY_LINE=$(tail -n 1 $HISTORY_FILE )\n    fi\n\n    eval $LAST_HISTORY_LINE\n    return 1\n    ;;\nesac\n\nLAST_HISTORY_LINE=$(tail -n 1 $HISTORY_FILE)\n$fpp \"$@\"\nLAST_COMMAND=$(tail -n 2 $FPP_CACHE | head -n 1)\n\n# Don't keep adding the same command to the history file.\n# Also, don't log a message about a no-op.\n\nif [[ (\"$LAST_COMMAND\" != 'echo \"nothing to do!\" && exit 1') && (\"$LAST_COMMAND\" != \"$LAST_HISTORY_LINE\") ]] ; then\n    echo $LAST_COMMAND >> $HISTORY_FILE\nfi\n\n}\n```\nThe code lives at https://github.com/oalders/dot-files/blob/8dcf2bf7911d02fa070f1eae0e95cb126292089c/bashrc#L147\n. Stealing is good.  :)  My implementation above turned out to be buggy and also based on an older version of fpp.  I've updated the code in the comment above with the fixed version.  I've also written a short blog post about it: http://www.olafalders.com/2016/01/14/adding-history-to-fpp-facebook-pathpicker/\n. @saveriomiroddi thanks for pointing that out!. There was some discussion about this in #171 . @pcottle Would it be reasonable to have fpp log it's history to some arbitary file like ~/.fpp/.fpp_history? At that point it would be trivial to get the last line and re-execute it.  Personally, I'd prefer having a global history over having none at all.\n. Although I now see that sh ~/.fpp/.fpp.sh basically gets me to the same place.\n. I've lived with this for a couple of days and it mostly takes care of my needs, but I sometimes find that I need to re-execute the command previous to the last one I just used, so that's the biggest shortcoming for me so far.\nI understand that adding a history file would bring some added complexity.  I think that's a valid concern.  I'll have a look at your suggestion to alias fpp and try and cat something to my bash history.  If I come up with something useful, I'll post it here as an example. \n. This is what I now have in my .bashrc. Seems to be working well and it's really speeding up my workflow.  Thanks very much for the suggestion (and for your work on this utility).\n``` bash\nfunction fpp() {\n    local fpp=$(type -fp fpp)\nHISTORY_FILE=\"$HOME/.fpp/.fpp_history\"\nFPP_CACHE=\"$HOME/.fpp/.fpp.sh\"\n\ntouch $HISTORY_FILE\n\n# fpp --history just displays entire history prefixed by line numbers\n# fpp --redo will re-exec the last entry in the history file\n# fpp --redo -1 will also re-exec the last entry in the history file\n# fpp --redo -2 will re-exec the second last line in the history file\n# fpp --redo 11 will re-exec entry number 11 in the history file\ncase \"$1\" in\n    --history)\n    cat -n $HISTORY_FILE\n    return 1\n    ;;\n    --redo)\n    if [ $2 ] ; then\n        if [ $2 \\> 0 ] ; then\n            LAST_HISTORY_LINE=$(head -n $2 $HISTORY_FILE |tail -n 1)\n        else\n            LINE_NUMBER=$(( $2 * -1))\n            LAST_HISTORY_LINE=$(tail -n $LINE_NUMBER $HISTORY_FILE | head -n 1)\n        fi\n    else\n        LAST_HISTORY_LINE=$(tail -n 1 $HISTORY_FILE )\n    fi\n\n    eval $LAST_HISTORY_LINE\n    return 1\n    ;;\nesac\n\nLAST_HISTORY_LINE=$(tail -n 1 $HISTORY_FILE)\n$fpp \"$@\"\nLAST_COMMAND=$(tail -n 2 $FPP_CACHE | head -n 1)\n\n# Don't keep adding the same command to the history file.\n# Also, don't log a message about a no-op.\n\nif [[ (\"$LAST_COMMAND\" != 'echo \"nothing to do!\" && exit 1') && (\"$LAST_COMMAND\" != \"$LAST_HISTORY_LINE\") ]] ; then\n    echo $LAST_COMMAND >> $HISTORY_FILE\nfi\n\n}\n```\nThe code lives at https://github.com/oalders/dot-files/blob/8dcf2bf7911d02fa070f1eae0e95cb126292089c/bashrc#L147\n. Stealing is good.  :)  My implementation above turned out to be buggy and also based on an older version of fpp.  I've updated the code in the comment above with the fixed version.  I've also written a short blog post about it: http://www.olafalders.com/2016/01/14/adding-history-to-fpp-facebook-pathpicker/\n. @saveriomiroddi thanks for pointing that out!. There was some discussion about this in #171 . ",
    "saveriomiroddi": "For reference, there is a st00pid-easy solution:\nalias fph='fpp && history -s $(tail -n 2 $HOME/.fpp/.fpp.sh | head -n 1)'\n\nIt can also be recycled in other aliases.\nSome tweaks can be applied:\n\nexecute regardless of success of the previous operation (; in place of &&)\nchecking that a command has actually been executed\netc.etc.\n\nbut the basic form is good enough to accomplish the task.\n. Revision https://github.com/facebook/PathPicker/commit/46cf45e170ec0cb147255c04c5c54d89e16d136c is v0.7.2.. Hello!\nIs there any guideline for Python 3.x (in particular, related to the configuration parser import)?\nI've noticed that just running scripts/buildAndTest.sh on my system (as instructed in CONTRIBUTING.md) is not enough - it needs to be run on all the Python supported versions.. Related to the bindings display (can't reply to your reply):\n\nthis might not scale if people add dozens of commands, and since this is a power user feature anyways, why not perhaps just dont change the display at all?\nrelated to that, an alternative would be to have a single command that shows the list of binded commands (full screen) that you can then exit out of with a single keypress.\n\nOK; I think it's a good idea to go for the idea #1, then there's always time to implement #2 as extra feature - agile style :-). Related to the configuration parser:\n\nbut yeah seems like we need to change to configparser in python 3+:\n\nI will propose some code for handling both versions; I don't think there is a pretty way of doing so, but let's see.\n. OOOK, I've commented everything. I will update the PR with the proposed changes. It will take some time because I've never programmed in Python, and I will need to maintain a good quality :-) So please bear with me :-). Thanks to you, too! :+1:. For reference, there is a st00pid-easy solution:\nalias fph='fpp && history -s $(tail -n 2 $HOME/.fpp/.fpp.sh | head -n 1)'\n\nIt can also be recycled in other aliases.\nSome tweaks can be applied:\n\nexecute regardless of success of the previous operation (; in place of &&)\nchecking that a command has actually been executed\netc.etc.\n\nbut the basic form is good enough to accomplish the task.\n. Revision https://github.com/facebook/PathPicker/commit/46cf45e170ec0cb147255c04c5c54d89e16d136c is v0.7.2.. Hello!\nIs there any guideline for Python 3.x (in particular, related to the configuration parser import)?\nI've noticed that just running scripts/buildAndTest.sh on my system (as instructed in CONTRIBUTING.md) is not enough - it needs to be run on all the Python supported versions.. Related to the bindings display (can't reply to your reply):\n\nthis might not scale if people add dozens of commands, and since this is a power user feature anyways, why not perhaps just dont change the display at all?\nrelated to that, an alternative would be to have a single command that shows the list of binded commands (full screen) that you can then exit out of with a single keypress.\n\nOK; I think it's a good idea to go for the idea #1, then there's always time to implement #2 as extra feature - agile style :-). Related to the configuration parser:\n\nbut yeah seems like we need to change to configparser in python 3+:\n\nI will propose some code for handling both versions; I don't think there is a pretty way of doing so, but let's see.\n. OOOK, I've commented everything. I will update the PR with the proposed changes. It will take some time because I've never programmed in Python, and I will need to maintain a good quality :-) So please bear with me :-). Thanks to you, too! :+1:. ",
    "Shenil": "Anytime. Glad to see it get merged!\n. Anytime. Glad to see it get merged!\n. ",
    "glensc": "@pcottle the pld-linux/fpp@7060690 fix is fpp.spec packaging fix in pld-linux. i don't know how the release tarballs are generated in this project, so no fix from me. i guess it's done manually? but i suggest to create tarballs with gnu tar, not bsd tar to solve the issues. and compress them too to have tar.gz extension justified ;)\n. @pcottle the pld-linux/fpp@7060690 fix is fpp.spec packaging fix in pld-linux. i don't know how the release tarballs are generated in this project, so no fix from me. i guess it's done manually? but i suggest to create tarballs with gnu tar, not bsd tar to solve the issues. and compress them too to have tar.gz extension justified ;)\n. ",
    "gliptak": "To try to help the extended attributes we could try setting --format ustar\nhttps://xorl.wordpress.com/2012/05/15/admin-mistakes-gnu-bsd-tar-and-posix-compatibility/. @pcottle Peter, could you run the script on your Mac to validate that the z flag is there with tar. If it isn't I will submit a slightly updated PR.. Thanks :). To try to help the extended attributes we could try setting --format ustar\nhttps://xorl.wordpress.com/2012/05/15/admin-mistakes-gnu-bsd-tar-and-posix-compatibility/. @pcottle Peter, could you run the script on your Mac to validate that the z flag is there with tar. If it isn't I will submit a slightly updated PR.. Thanks :). ",
    "yggdr": "I'm running the script either from its own directory, or from the git root.\nhttps://gist.github.com/yggdr/4eb89dd1b4ffb028a6bc\n(I can manually download the DTD just fine.)\n. Just tried it again on FreeBSD 11.0 and it works fine now, so I'm closing this.. I'm running the script either from its own directory, or from the git root.\nhttps://gist.github.com/yggdr/4eb89dd1b4ffb028a6bc\n(I can manually download the DTD just fine.)\n. Just tried it again on FreeBSD 11.0 and it works fine now, so I'm closing this.. ",
    "derryl": "@pcottle That did the trick! :blush: Thanks for the swift response -- FPP is a wonderful tool, keep up the great work.\n. @pcottle That did the trick! :blush: Thanks for the swift response -- FPP is a wonderful tool, keep up the great work.\n. ",
    "baest": "I'm \"attaching\" the .pickle file after doing a \"ls -F --color=auto | fpp -r\":\n(dp0\nI0\nccopy_reg\n_reconstructor\np1\n(cformat\nSimpleLine\np2\nc__builtin__\nobject\np3\nNtp4\nRp5\n(dp6\nS'index'\np7\nI0\nsS'controller'\np8\nNsS'formattedLine'\np9\ng1\n(cformattedText\nFormattedText\np10\ng3\nNtp11\nRp12\n(dp13\nS'plainText'\np14\nS'assets/'\np15\nsS'text'\np16\ng15\nsS'segments'\np17\n(lp18\nS''\np19\nag15\nasbsbsI1\ng1\n(cformat\nLineMatch\np20\ng3\nNtp21\nRp22\n(dp23\ng7\nI1\nsS'selected'\np24\nI00\nsS'end'\np25\nI15\nsS'hovered'\np26\nI00\nsg9\ng1\n(g10\ng3\nNtp27\nRp28\n(dp29\ng14\nS'CONTRIBUTING.md'\np30\nsg16\ng30\nsg17\n(lp31\ng19\nag30\nasbsS'afterText'\np32\ng1\n(g10\ng3\nNtp33\nRp34\n(dp35\ng14\ng19\nsg16\nNsg17\n(lp36\ng19\nag19\nasbsS'beforeText'\np37\ng1\n(g10\ng3\nNtp38\nRp39\n(dp40\ng14\ng19\nsg16\nNsg17\n(lp41\ng19\nag19\nasbsS'start'\np42\nI0\nsg8\nNsS'num'\np43\nI0\nsS'file'\np44\nS'./CONTRIBUTING.md'\np45\nsS'originalFile'\np46\ng30\nsS'decoratedMatch'\np47\ng1\n(g10\ng3\nNtp48\nRp49\n(dp50\ng14\nS'CONTRIBUTING.md'\np51\nsg16\nS'\\x1b[30;40;4mCONTRIBUTING.md'\np52\nsg17\n(lp53\ng19\nag19\naS'30;40;4'\np54\naS'CONTRIBUTING.md'\np55\nasbsS'group'\np56\ng30\nsS'isTruncated'\np57\nI00\nsbsI2\ng1\n(g2\ng3\nNtp58\nRp59\n(dp60\ng7\nI2\nsg8\nNsg9\ng1\n(g10\ng3\nNtp61\nRp62\n(dp63\ng14\nS'debian/'\np64\nsg16\ng64\nsg17\n(lp65\ng19\nag64\nasbsbsI3\ng1\n(g2\ng3\nNtp66\nRp67\n(dp68\ng7\nI3\nsg8\nNsg9\ng1\n(g10\ng3\nNtp69\nRp70\n(dp71\ng14\nS'fpp'\np72\nsg16\ng72\nsg17\n(lp73\ng19\nag72\nasbsbsI4\ng1\n(g20\ng3\nNtp74\nRp75\n(dp76\ng7\nI4\nsg24\nI00\nsg25\nI6\nsg26\nI00\nsg9\ng1\n(g10\ng3\nNtp77\nRp78\n(dp79\ng14\nS'fpp.rb'\np80\nsg16\ng80\nsg17\n(lp81\ng19\nag80\nasbsg32\ng1\n(g10\ng3\nNtp82\nRp83\n(dp84\ng14\ng19\nsg16\nNsg17\n(lp85\ng19\nag19\nasbsg37\ng1\n(g10\ng3\nNtp86\nRp87\n(dp88\ng14\ng19\nsg16\nNsg17\n(lp89\ng19\nag19\nasbsg42\nI0\nsg8\nNsg43\nI0\nsg44\nS'./fpp.rb'\np90\nsg46\ng80\nsg47\ng1\n(g10\ng3\nNtp91\nRp92\n(dp93\ng14\nS'fpp.rb'\np94\nsg16\nS'\\x1b[30;40;4mfpp.rb'\np95\nsg17\n(lp96\ng19\nag19\naS'30;40;4'\np97\naS'fpp.rb'\np98\nasbsg56\ng80\nsg57\nI00\nsbsI5\ng1\n(g20\ng3\nNtp99\nRp100\n(dp101\ng7\nI5\nsg24\nI00\nsg25\nI10\nsg26\nI00\nsg9\ng1\n(g10\ng3\nNtp102\nRp103\n(dp104\ng14\nS'index.html'\np105\nsg16\ng105\nsg17\n(lp106\ng19\nag105\nasbsg32\ng1\n(g10\ng3\nNtp107\nRp108\n(dp109\ng14\ng19\nsg16\nNsg17\n(lp110\ng19\nag19\nasbsg37\ng1\n(g10\ng3\nNtp111\nRp112\n(dp113\ng14\ng19\nsg16\nNsg17\n(lp114\ng19\nag19\nasbsg42\nI0\nsg8\nNsg43\nI0\nsg44\nS'./index.html'\np115\nsg46\ng105\nsg47\ng1\n(g10\ng3\nNtp116\nRp117\n(dp118\ng14\nS'index.html'\np119\nsg16\nS'\\x1b[30;40;4mindex.html'\np120\nsg17\n(lp121\ng19\nag19\naS'30;40;4'\np122\naS'index.html'\np123\nasbsg56\ng105\nsg57\nI00\nsbsI6\ng1\n(g2\ng3\nNtp124\nRp125\n(dp126\ng7\nI6\nsg8\nNsg9\ng1\n(g10\ng3\nNtp127\nRp128\n(dp129\ng14\nS'LICENSE'\np130\nsg16\ng130\nsg17\n(lp131\ng19\nag130\nasbsbsI7\ng1\n(g2\ng3\nNtp132\nRp133\n(dp134\ng7\nI7\nsg8\nNsg9\ng1\n(g10\ng3\nNtp135\nRp136\n(dp137\ng14\nS'PATENTS'\np138\nsg16\ng138\nsg17\n(lp139\ng19\nag138\nasbsbsI8\ng1\n(g20\ng3\nNtp140\nRp141\n(dp142\ng7\nI8\nsg24\nI00\nsg25\nI9\nsg26\nI00\nsg9\ng1\n(g10\ng3\nNtp143\nRp144\n(dp145\ng14\nS'README.md'\np146\nsg16\ng146\nsg17\n(lp147\ng19\nag146\nasbsg32\ng1\n(g10\ng3\nNtp148\nRp149\n(dp150\ng14\ng19\nsg16\nNsg17\n(lp151\ng19\nag19\nasbsg37\ng1\n(g10\ng3\nNtp152\nRp153\n(dp154\ng14\ng19\nsg16\nNsg17\n(lp155\ng19\nag19\nasbsg42\nI0\nsg8\nNsg43\nI0\nsg44\nS'./README.md'\np156\nsg46\ng146\nsg47\ng1\n(g10\ng3\nNtp157\nRp158\n(dp159\ng14\nS'README.md'\np160\nsg16\nS'\\x1b[30;40;4mREADME.md'\np161\nsg17\n(lp162\ng19\nag19\naS'30;40;4'\np163\naS'README.md'\np164\nasbsg56\ng146\nsg57\nI00\nsbsI9\ng1\n(g2\ng3\nNtp165\nRp166\n(dp167\ng7\nI9\nsg8\nNsg9\ng1\n(g10\ng3\nNtp168\nRp169\n(dp170\ng14\nS'scripts/'\np171\nsg16\ng171\nsg17\n(lp172\ng19\nag171\nasbsbsI10\ng1\n(g2\ng3\nNtp173\nRp174\n(dp175\ng7\nI10\nsg8\nNsg9\ng1\n(g10\ng3\nNtp176\nRp177\n(dp178\ng14\nS'src/'\np179\nsg16\ng179\nsg17\n(lp180\ng19\nag179\nasbsbs.\n. I'm \"attaching\" the .pickle file after doing a \"ls -F --color=auto | fpp -r\":\n(dp0\nI0\nccopy_reg\n_reconstructor\np1\n(cformat\nSimpleLine\np2\nc__builtin__\nobject\np3\nNtp4\nRp5\n(dp6\nS'index'\np7\nI0\nsS'controller'\np8\nNsS'formattedLine'\np9\ng1\n(cformattedText\nFormattedText\np10\ng3\nNtp11\nRp12\n(dp13\nS'plainText'\np14\nS'assets/'\np15\nsS'text'\np16\ng15\nsS'segments'\np17\n(lp18\nS''\np19\nag15\nasbsbsI1\ng1\n(cformat\nLineMatch\np20\ng3\nNtp21\nRp22\n(dp23\ng7\nI1\nsS'selected'\np24\nI00\nsS'end'\np25\nI15\nsS'hovered'\np26\nI00\nsg9\ng1\n(g10\ng3\nNtp27\nRp28\n(dp29\ng14\nS'CONTRIBUTING.md'\np30\nsg16\ng30\nsg17\n(lp31\ng19\nag30\nasbsS'afterText'\np32\ng1\n(g10\ng3\nNtp33\nRp34\n(dp35\ng14\ng19\nsg16\nNsg17\n(lp36\ng19\nag19\nasbsS'beforeText'\np37\ng1\n(g10\ng3\nNtp38\nRp39\n(dp40\ng14\ng19\nsg16\nNsg17\n(lp41\ng19\nag19\nasbsS'start'\np42\nI0\nsg8\nNsS'num'\np43\nI0\nsS'file'\np44\nS'./CONTRIBUTING.md'\np45\nsS'originalFile'\np46\ng30\nsS'decoratedMatch'\np47\ng1\n(g10\ng3\nNtp48\nRp49\n(dp50\ng14\nS'CONTRIBUTING.md'\np51\nsg16\nS'\\x1b[30;40;4mCONTRIBUTING.md'\np52\nsg17\n(lp53\ng19\nag19\naS'30;40;4'\np54\naS'CONTRIBUTING.md'\np55\nasbsS'group'\np56\ng30\nsS'isTruncated'\np57\nI00\nsbsI2\ng1\n(g2\ng3\nNtp58\nRp59\n(dp60\ng7\nI2\nsg8\nNsg9\ng1\n(g10\ng3\nNtp61\nRp62\n(dp63\ng14\nS'debian/'\np64\nsg16\ng64\nsg17\n(lp65\ng19\nag64\nasbsbsI3\ng1\n(g2\ng3\nNtp66\nRp67\n(dp68\ng7\nI3\nsg8\nNsg9\ng1\n(g10\ng3\nNtp69\nRp70\n(dp71\ng14\nS'fpp'\np72\nsg16\ng72\nsg17\n(lp73\ng19\nag72\nasbsbsI4\ng1\n(g20\ng3\nNtp74\nRp75\n(dp76\ng7\nI4\nsg24\nI00\nsg25\nI6\nsg26\nI00\nsg9\ng1\n(g10\ng3\nNtp77\nRp78\n(dp79\ng14\nS'fpp.rb'\np80\nsg16\ng80\nsg17\n(lp81\ng19\nag80\nasbsg32\ng1\n(g10\ng3\nNtp82\nRp83\n(dp84\ng14\ng19\nsg16\nNsg17\n(lp85\ng19\nag19\nasbsg37\ng1\n(g10\ng3\nNtp86\nRp87\n(dp88\ng14\ng19\nsg16\nNsg17\n(lp89\ng19\nag19\nasbsg42\nI0\nsg8\nNsg43\nI0\nsg44\nS'./fpp.rb'\np90\nsg46\ng80\nsg47\ng1\n(g10\ng3\nNtp91\nRp92\n(dp93\ng14\nS'fpp.rb'\np94\nsg16\nS'\\x1b[30;40;4mfpp.rb'\np95\nsg17\n(lp96\ng19\nag19\naS'30;40;4'\np97\naS'fpp.rb'\np98\nasbsg56\ng80\nsg57\nI00\nsbsI5\ng1\n(g20\ng3\nNtp99\nRp100\n(dp101\ng7\nI5\nsg24\nI00\nsg25\nI10\nsg26\nI00\nsg9\ng1\n(g10\ng3\nNtp102\nRp103\n(dp104\ng14\nS'index.html'\np105\nsg16\ng105\nsg17\n(lp106\ng19\nag105\nasbsg32\ng1\n(g10\ng3\nNtp107\nRp108\n(dp109\ng14\ng19\nsg16\nNsg17\n(lp110\ng19\nag19\nasbsg37\ng1\n(g10\ng3\nNtp111\nRp112\n(dp113\ng14\ng19\nsg16\nNsg17\n(lp114\ng19\nag19\nasbsg42\nI0\nsg8\nNsg43\nI0\nsg44\nS'./index.html'\np115\nsg46\ng105\nsg47\ng1\n(g10\ng3\nNtp116\nRp117\n(dp118\ng14\nS'index.html'\np119\nsg16\nS'\\x1b[30;40;4mindex.html'\np120\nsg17\n(lp121\ng19\nag19\naS'30;40;4'\np122\naS'index.html'\np123\nasbsg56\ng105\nsg57\nI00\nsbsI6\ng1\n(g2\ng3\nNtp124\nRp125\n(dp126\ng7\nI6\nsg8\nNsg9\ng1\n(g10\ng3\nNtp127\nRp128\n(dp129\ng14\nS'LICENSE'\np130\nsg16\ng130\nsg17\n(lp131\ng19\nag130\nasbsbsI7\ng1\n(g2\ng3\nNtp132\nRp133\n(dp134\ng7\nI7\nsg8\nNsg9\ng1\n(g10\ng3\nNtp135\nRp136\n(dp137\ng14\nS'PATENTS'\np138\nsg16\ng138\nsg17\n(lp139\ng19\nag138\nasbsbsI8\ng1\n(g20\ng3\nNtp140\nRp141\n(dp142\ng7\nI8\nsg24\nI00\nsg25\nI9\nsg26\nI00\nsg9\ng1\n(g10\ng3\nNtp143\nRp144\n(dp145\ng14\nS'README.md'\np146\nsg16\ng146\nsg17\n(lp147\ng19\nag146\nasbsg32\ng1\n(g10\ng3\nNtp148\nRp149\n(dp150\ng14\ng19\nsg16\nNsg17\n(lp151\ng19\nag19\nasbsg37\ng1\n(g10\ng3\nNtp152\nRp153\n(dp154\ng14\ng19\nsg16\nNsg17\n(lp155\ng19\nag19\nasbsg42\nI0\nsg8\nNsg43\nI0\nsg44\nS'./README.md'\np156\nsg46\ng146\nsg47\ng1\n(g10\ng3\nNtp157\nRp158\n(dp159\ng14\nS'README.md'\np160\nsg16\nS'\\x1b[30;40;4mREADME.md'\np161\nsg17\n(lp162\ng19\nag19\naS'30;40;4'\np163\naS'README.md'\np164\nasbsg56\ng146\nsg57\nI00\nsbsI9\ng1\n(g2\ng3\nNtp165\nRp166\n(dp167\ng7\nI9\nsg8\nNsg9\ng1\n(g10\ng3\nNtp168\nRp169\n(dp170\ng14\nS'scripts/'\np171\nsg16\ng171\nsg17\n(lp172\ng19\nag171\nasbsbsI10\ng1\n(g2\ng3\nNtp173\nRp174\n(dp175\ng7\nI10\nsg8\nNsg9\ng1\n(g10\ng3\nNtp176\nRp177\n(dp178\ng14\nS'src/'\np179\nsg16\ng179\nsg17\n(lp180\ng19\nag179\nasbsbs.\n. ",
    "alecjacobson": "Exactly, I like the multiple selection + command mode. (I hadn't heard of NERDTree before).\nRemoving < /dev/tty from that line did not fix the problem, but removing the -i did fix it (though I'm not sure what that could now have broken).\n. I agree it's better than hanging the shell. It's also possible to load\n.bashrc etc. explicitly using the source command.\nPersonally, I actually do like the ability to launch the editor from vim\nmode. This matches the behavior of issue :vim filename within vim: a new\nvim process is run, quitting that one will pop up to the original one.\nOn Mon, Aug 31, 2015 at 12:59 PM, Peter Cottle notifications@github.com\nwrote:\n\nAnother thought -- should we prevent going into editor mode if we are\nalready inside a vim runtime when we launch fpp? I dont think theres a\nvalid case for running vim as launched from a vim bash command\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/pull/187#issuecomment-136428349.\n. Exactly, I like the multiple selection + command mode. (I hadn't heard of NERDTree before).\n\nRemoving < /dev/tty from that line did not fix the problem, but removing the -i did fix it (though I'm not sure what that could now have broken).\n. I agree it's better than hanging the shell. It's also possible to load\n.bashrc etc. explicitly using the source command.\nPersonally, I actually do like the ability to launch the editor from vim\nmode. This matches the behavior of issue :vim filename within vim: a new\nvim process is run, quitting that one will pop up to the original one.\nOn Mon, Aug 31, 2015 at 12:59 PM, Peter Cottle notifications@github.com\nwrote:\n\nAnother thought -- should we prevent going into editor mode if we are\nalready inside a vim runtime when we launch fpp? I dont think theres a\nvalid case for running vim as launched from a vim bash command\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/pull/187#issuecomment-136428349.\n. \n",
    "wkoszek": "Yes. Cat and Vim normally work. In fpp neither works.\nDo you test on Yosemite? What's your login shell?\nW.\nOn Saturday, August 29, 2015, Peter Cottle notifications@github.com wrote:\n\nHrmmmm this is quite odd. I assuming running cat './2010' './2011'\nnormally works right?\nWhat about opening up in an editor? can you open those files in vim?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/186#issuecomment-135996792\n.\n\n\nWojciech A. Koszek\nwojciech@koszek.com\nhttp://www.koszek.com/\n. I use iTerm2 too. Just tried with Terminal. Didn't work at all (even ncurses UI didn't start)\nYou reminded me:\nTried from my test account--plain MacOSX user with bash as a shell. I sudo'ed to it. And then it worked.\n. Ok, I've looked at it closer: fpp is dependent on bash. If your login shell is csh just like mine, it doesn't work. Proof:\n```\n/w/repos/PathPicker] wk% cat ~/.fpp/.fpp.sh\nif type shopt > /dev/null; then\n  shopt -s expand_aliases\nfi\necho \"executing command:\"\necho \"vim './README.md'\"\nvim './README.md'\n```\nSo nothing special. But it's a Bash syntax. In line 36 I've put an echo:\n/w/repos/PathPicker] wk% sed -n 36p fpp\n  echo $SHELL -i ~/.fpp/.fpp.sh < /dev/tty\nThen I run it in my terminal and of course it showed bin/csh. So I reproduced lack of result by doing:\n[wkoszek-macbook:/w/repos/PathPicker] wk% /bin/csh -i ~/.fpp/.fpp.sh < /dev/tty\n[wkoszek-macbook:/w/repos/PathPicker] wk%\nBut:\n[wkoszek-macbook:/w/repos/PathPicker] wk% /bin/bash -i ~/.fpp/.fpp.sh < /dev/tty\nexecuting command:\nvim './README.md'\nIn CSH when I force $SHELL to point to /bin/bash, it works. We need to either put this, or make fpp detect the shell type accordingly.\n. @pcottle I think just referring to /bin/sh instead of $SHELL should work as the \"best effort\" solution. Bash shell I believe is always there as /bin/sh. \n. @pcottle When I dissected fpp, my understanding was that we use $SHELL for a script that fpp generates. Unless we stick some ZSHisms there, and this script is simple and clean, I think calling /bin/sh on ~/.fpp/.fpp.sh should work. I think this:\nif type shopt > /dev/null; then\n  shopt -s expand_aliases\nfi\nis an obstacle, but not hard to get rid of.\n. Yes. Cat and Vim normally work. In fpp neither works.\nDo you test on Yosemite? What's your login shell?\nW.\nOn Saturday, August 29, 2015, Peter Cottle notifications@github.com wrote:\n\nHrmmmm this is quite odd. I assuming running cat './2010' './2011'\nnormally works right?\nWhat about opening up in an editor? can you open those files in vim?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/186#issuecomment-135996792\n.\n\n\nWojciech A. Koszek\nwojciech@koszek.com\nhttp://www.koszek.com/\n. I use iTerm2 too. Just tried with Terminal. Didn't work at all (even ncurses UI didn't start)\nYou reminded me:\nTried from my test account--plain MacOSX user with bash as a shell. I sudo'ed to it. And then it worked.\n. Ok, I've looked at it closer: fpp is dependent on bash. If your login shell is csh just like mine, it doesn't work. Proof:\n```\n/w/repos/PathPicker] wk% cat ~/.fpp/.fpp.sh\nif type shopt > /dev/null; then\n  shopt -s expand_aliases\nfi\necho \"executing command:\"\necho \"vim './README.md'\"\nvim './README.md'\n```\nSo nothing special. But it's a Bash syntax. In line 36 I've put an echo:\n/w/repos/PathPicker] wk% sed -n 36p fpp\n  echo $SHELL -i ~/.fpp/.fpp.sh < /dev/tty\nThen I run it in my terminal and of course it showed bin/csh. So I reproduced lack of result by doing:\n[wkoszek-macbook:/w/repos/PathPicker] wk% /bin/csh -i ~/.fpp/.fpp.sh < /dev/tty\n[wkoszek-macbook:/w/repos/PathPicker] wk%\nBut:\n[wkoszek-macbook:/w/repos/PathPicker] wk% /bin/bash -i ~/.fpp/.fpp.sh < /dev/tty\nexecuting command:\nvim './README.md'\nIn CSH when I force $SHELL to point to /bin/bash, it works. We need to either put this, or make fpp detect the shell type accordingly.\n. @pcottle I think just referring to /bin/sh instead of $SHELL should work as the \"best effort\" solution. Bash shell I believe is always there as /bin/sh. \n. @pcottle When I dissected fpp, my understanding was that we use $SHELL for a script that fpp generates. Unless we stick some ZSHisms there, and this script is simple and clean, I think calling /bin/sh on ~/.fpp/.fpp.sh should work. I think this:\nif type shopt > /dev/null; then\n  shopt -s expand_aliases\nfi\nis an obstacle, but not hard to get rid of.\n. ",
    "walterdolce": "Looks not to be working on iTerm2 with fish either\nYosemite // iTerm2 2.1.1 // fish 2.1.0\n. ^ It's not just for csh. It doesn't work on fish either.\n. Looks not to be working on iTerm2 with fish either\nYosemite // iTerm2 2.1.1 // fish 2.1.0\n. ^ It's not just for csh. It doesn't work on fish either.\n. ",
    "banks": "@pcottle thanks for the reply and shame on me for not Reading The Fantastic Manual...\nTotal aside: your use of //italics// looks like another phabricator user who often forgets the subtle differences between Markdown and Remarkup ;)\n. @pcottle thanks for the reply and shame on me for not Reading The Fantastic Manual...\nTotal aside: your use of //italics// looks like another phabricator user who often forgets the subtle differences between Markdown and Remarkup ;)\n. ",
    "slackorama": "This fixes it but I'm unsure if it'll break other use cases?\n```\ndiff --git a/src/output.py b/src/output.py\nindex a5cb491..ad547c0 100644\n--- a/src/output.py\n+++ b/src/output.py\n@@ -43,6 +43,7 @@ def execComposedCommand(command, lineObjs):\n     appendAliasExpansion()\n     appendIfInvalid(lineObjs)\n     appendFriendlyCommand(command)\n+    appendToFile('exit 0')\ndef editFiles(lineObjs):\n@@ -54,6 +55,7 @@ def editFiles(lineObjs):\n     command = joinEditCommands(partialCommands)\n     appendIfInvalid(lineObjs)\n     appendToFile(command)\n+    appendToFile('exit 0')\n# Private helpers\n```\n. Thanks for checking my logic. Good point about the commands.\nI'll put a PR together and send it along.\nThanks for path picker by the way. Saves me tons of copy pasta.\n. Yeah, same thing with a script that just has echo \"HI\" in it. \n```\n(conch)\nme@slackorama~/tmp\n; echo 'echo \"HI\"; exit 0;' > test.sh\n(conch)\nme@slackorama~/tmp\n; zsh -i test.sh                   \n/home/slack/.virtualenvs/slackorama/bin/python: No module named virtualenvwrapper\nvirtualenvwrapper.sh: There was a problem running the initialization hooks. \nIf Python could not import the module virtualenvwrapper.hook_loader,\ncheck that virtualenvwrapper has been installed for\nVIRTUALENVWRAPPER_PYTHON=/home/slack/.virtualenvs/conch/bin/python and that PATH is\nset properly.\nHI\n```\nDoesn't seem like it breaks anything.  Just annoying it seems like.\nWell, looks like it's time for some yak shaving.\n. This fixes it but I'm unsure if it'll break other use cases?\n```\ndiff --git a/src/output.py b/src/output.py\nindex a5cb491..ad547c0 100644\n--- a/src/output.py\n+++ b/src/output.py\n@@ -43,6 +43,7 @@ def execComposedCommand(command, lineObjs):\n     appendAliasExpansion()\n     appendIfInvalid(lineObjs)\n     appendFriendlyCommand(command)\n+    appendToFile('exit 0')\ndef editFiles(lineObjs):\n@@ -54,6 +55,7 @@ def editFiles(lineObjs):\n     command = joinEditCommands(partialCommands)\n     appendIfInvalid(lineObjs)\n     appendToFile(command)\n+    appendToFile('exit 0')\n# Private helpers\n```\n. Thanks for checking my logic. Good point about the commands.\nI'll put a PR together and send it along.\nThanks for path picker by the way. Saves me tons of copy pasta.\n. Yeah, same thing with a script that just has echo \"HI\" in it. \n```\n(conch)\nme@slackorama~/tmp\n; echo 'echo \"HI\"; exit 0;' > test.sh\n(conch)\nme@slackorama~/tmp\n; zsh -i test.sh                   \n/home/slack/.virtualenvs/slackorama/bin/python: No module named virtualenvwrapper\nvirtualenvwrapper.sh: There was a problem running the initialization hooks. \nIf Python could not import the module virtualenvwrapper.hook_loader,\ncheck that virtualenvwrapper has been installed for\nVIRTUALENVWRAPPER_PYTHON=/home/slack/.virtualenvs/conch/bin/python and that PATH is\nset properly.\nHI\n```\nDoesn't seem like it breaks anything.  Just annoying it seems like.\nWell, looks like it's time for some yak shaving.\n. ",
    "jeffkile": "Yeah that manual mapping is wrong. It should be this\nif editor in ['vim', 'nvim'] and lineNum != 0:\n        return '\\'%s\\' +%d' % (filePath, lineNum)\n    elif editor in ['vi', 'nano', 'joe', 'emacs'] and lineNum != 0:\n        return '+%d \\'%s\\'' % (lineNum, filePath)\nCan I submit a pull request?\n. NVIM 0.0.0-alpha+201508100001 (compiled Aug 11 2015 10:53:00) \nI'm using using Fish, tmux and OSX as well.\nI just tried it from the command line and oddly enough both ways @pallavagarwal07 suggested work fine for me ... but only from the command line. When using FPP only the line number after the file name works for me.\nShould I still push up the PR or should I look in to this further?\n. Yeah that manual mapping is wrong. It should be this\nif editor in ['vim', 'nvim'] and lineNum != 0:\n        return '\\'%s\\' +%d' % (filePath, lineNum)\n    elif editor in ['vi', 'nano', 'joe', 'emacs'] and lineNum != 0:\n        return '+%d \\'%s\\'' % (lineNum, filePath)\nCan I submit a pull request?\n. NVIM 0.0.0-alpha+201508100001 (compiled Aug 11 2015 10:53:00) \nI'm using using Fish, tmux and OSX as well.\nI just tried it from the command line and oddly enough both ways @pallavagarwal07 suggested work fine for me ... but only from the command line. When using FPP only the line number after the file name works for me.\nShould I still push up the PR or should I look in to this further?\n. ",
    "dfordivam": "I usually work on multiple projects/repos, so when I return back to work, I use 'git status' to fetch the files on which I need to work. Fpp turned out to be a useful tool to both see the status and open the files (hmmm... I know its called laziness).\nBut I do need to minimize the vim occasionally to do other stuff on terminal. I guess I will have to use fpp with this limitation then.\n. I usually work on multiple projects/repos, so when I return back to work, I use 'git status' to fetch the files on which I need to work. Fpp turned out to be a useful tool to both see the status and open the files (hmmm... I know its called laziness).\nBut I do need to minimize the vim occasionally to do other stuff on terminal. I guess I will have to use fpp with this limitation then.\n. ",
    "keneanung": "This is my current output of git status of the git repository https://github.com/keneanung/svof with a few changes that are not staged yet.\nfpp has issues with the umlaut \u00e4 (minor issue, not part of this actually), but it also won't recognise the svo (install the zip, not me).xml file for example. The files that end with the tilde won't be recognised either (they are backup files of gedit)\n```\n$ git status\nAuf Branch UploadReleaseToAutoupdate\nIhr Branch ist auf dem selben Stand wie 'keneanung/UploadReleaseToAutoupdate'.\n\u00c4nderungen, die nicht zum Commit vorgemerkt sind:\n  (benutzen Sie \"git add ...\", um die \u00c4nderungen zum Commit vorzumerken)\n  (benutzen Sie \"git checkout -- ...\", um die \u00c4nderungen im Arbeitsverzeichnis zu verwerfen)\nge\u00e4ndert:       doc/conf.py\nge\u00e4ndert:       svo (install the zip, not me).xml\nge\u00e4ndert:       svo template/config.lua\n\nUnbeobachtete Dateien:\n  (benutzen Sie \"git add ...\", um die \u00c4nderungen zum Commit vorzumerken)\n.travis.yml~\nclasslist.lua~\ndoc/enchanter.rst~\ndoc/index.rst~\ndofree_deleayed.txt\ngenerate.lua~\nmachineAccount\nmachineAccount~\nout\noutput.txt\nown svo/ndb-help.lua\npassword\npassword~\nprecommit.lua~\nraw-svo.controllers.lua~\nraw-svo.defs.lua~\nraw-svo.dict.lua~\nraw-svo.dor.lua~\nraw-svo.metalimbcounter.lua~\nraw-svo.misc.lua~\nraw-svo.monklimbcounter.lua~\nraw-svo.serverside.lua~\nraw-svo.setup.lua~\nraw-svo.skeleton.lua~\nsvo (enchanter).xml~\ntravis.sh~\n\nkeine \u00c4nderungen zum Commit vorgemerkt (benutzen Sie \"git add\" und/oder \"git commit -a\")\n``\n. This is my current output ofgit status` of the git repository https://github.com/keneanung/svof with a few changes that are not staged yet.\nfpp has issues with the umlaut \u00e4 (minor issue, not part of this actually), but it also won't recognise the svo (install the zip, not me).xml file for example. The files that end with the tilde won't be recognised either (they are backup files of gedit)\n```\n$ git status\nAuf Branch UploadReleaseToAutoupdate\nIhr Branch ist auf dem selben Stand wie 'keneanung/UploadReleaseToAutoupdate'.\n\u00c4nderungen, die nicht zum Commit vorgemerkt sind:\n  (benutzen Sie \"git add ...\", um die \u00c4nderungen zum Commit vorzumerken)\n  (benutzen Sie \"git checkout -- ...\", um die \u00c4nderungen im Arbeitsverzeichnis zu verwerfen)\nge\u00e4ndert:       doc/conf.py\nge\u00e4ndert:       svo (install the zip, not me).xml\nge\u00e4ndert:       svo template/config.lua\n\nUnbeobachtete Dateien:\n  (benutzen Sie \"git add ...\", um die \u00c4nderungen zum Commit vorzumerken)\n.travis.yml~\nclasslist.lua~\ndoc/enchanter.rst~\ndoc/index.rst~\ndofree_deleayed.txt\ngenerate.lua~\nmachineAccount\nmachineAccount~\nout\noutput.txt\nown svo/ndb-help.lua\npassword\npassword~\nprecommit.lua~\nraw-svo.controllers.lua~\nraw-svo.defs.lua~\nraw-svo.dict.lua~\nraw-svo.dor.lua~\nraw-svo.metalimbcounter.lua~\nraw-svo.misc.lua~\nraw-svo.monklimbcounter.lua~\nraw-svo.serverside.lua~\nraw-svo.setup.lua~\nraw-svo.skeleton.lua~\nsvo (enchanter).xml~\ntravis.sh~\n\nkeine \u00c4nderungen zum Commit vorgemerkt (benutzen Sie \"git add\" und/oder \"git commit -a\")\n```\n. ",
    "kiranps": "@pcottle i like vertical spits when there is only 2 file. opening more than 2 file in splits looks ugly. i use airline so i have clear view of how many file are open\n. @pcottle i like vertical spits when there is only 2 file. opening more than 2 file in splits looks ugly. i use airline so i have clear view of how many file are open\n. ",
    "ptzz": "+1, an env variable for dropping -O would be useful\n. Here you go:\n\nIn the iTerm color config it's clear that using \"bright white\" would fix the problem in this case:\n\nMy current workaround is to increase the \"Minimum contrast\" setting in iTerm, which works well. Didn't have any issues with other applications though, and have been using this color scheme for a couple of years.\nMaybe a better approach is to use the \"Foreground\" color, as defined in iTerm prefs (corresponds to \"Text\" color in normal Terminal app)? That's the color for vanilla text in the terminal.\n. RGB for ANSI \"Bright White\" would depend on the color scheme, but using \"as white as possible\" (R=G=B=255) it looks like this:\n\nThere seems to be a way to access the current terminal palette, from http://stackoverflow.com/questions/18551558/how-to-use-terminal-color-palette-with-curses:\n\nPassing the number -1 as color falls back to the default background and foreground colors\n\nGuess this could be used to get the same text color as normal text (might not be white though).\n\ncolors pairs 1-16 are the terminal color palette\n\nLooks like bright white for the current color scheme is color pair 8.\nAnother option might be to use the A_BOLD or A_REVERSE curses color properties (looking at https://docs.python.org/2/howto/curses.html, haven't done any curses stuff myself)\nNot sure which of these options are the best guarantee for a minimum contrast across all systems, color schemes and terminals... If the fpp selection background is fixed to blue, then bright white for the text is probably a good option as the default terminal text could potentially be blue. Hardcoding RGB to \"maximum white\" might be too outstanding in case of a low-contrast color scheme.\n. > If the fpp selection background is fixed to blue, then bright white for the text is probably a good option\nLooks like this can be achieved by the following change:\n\n(I never understood why ANSI treats bold and bright as the same thing. Code 0 is Bold or increased intensity )\n. I think RGB for default white can stay as is. And only change from default white to bold/bright white when the text is selected.\nI think the snippet in my last post should do the trick -- just needs some additions so that bold/bright attribute is used both for all text on non-default background color (only hovered text is taken care of now)\n. Great! Does it makes sense to add bright attribute to the two other cases as well (self.hovered and self.selected and self.selected)? This is how it looks for those cases now:\n\n. 0.7.1 fresh install with Homebrew. Tried with HEAD as well, same problem.\n. Odd. Entering commands does not work and there is no stack trace on ctrl-c. CPU is 100% for the fpp process (executing choose.py). Same problem in normal terminal btw.\nSeems it only occurs with -a flag to ls. A minimal repro for me is:\nmkdir tmp2\ncd tmp2\n~/tmp2$ touch aaaaaaaa.py\n~/tmp2$ touch aaaaaaaa2.py\n~/tmp2$ /bin/ls -l | fpp\nStill fine for you?\n. Good to hear! \ud83d\udc4d \n. Yeah I noticed the tests failing and that it seemed non-trivial to fix. Thanks for integrating!\n. +1, an env variable for dropping -O would be useful\n. Here you go:\n\nIn the iTerm color config it's clear that using \"bright white\" would fix the problem in this case:\n\nMy current workaround is to increase the \"Minimum contrast\" setting in iTerm, which works well. Didn't have any issues with other applications though, and have been using this color scheme for a couple of years.\nMaybe a better approach is to use the \"Foreground\" color, as defined in iTerm prefs (corresponds to \"Text\" color in normal Terminal app)? That's the color for vanilla text in the terminal.\n. RGB for ANSI \"Bright White\" would depend on the color scheme, but using \"as white as possible\" (R=G=B=255) it looks like this:\n\nThere seems to be a way to access the current terminal palette, from http://stackoverflow.com/questions/18551558/how-to-use-terminal-color-palette-with-curses:\n\nPassing the number -1 as color falls back to the default background and foreground colors\n\nGuess this could be used to get the same text color as normal text (might not be white though).\n\ncolors pairs 1-16 are the terminal color palette\n\nLooks like bright white for the current color scheme is color pair 8.\nAnother option might be to use the A_BOLD or A_REVERSE curses color properties (looking at https://docs.python.org/2/howto/curses.html, haven't done any curses stuff myself)\nNot sure which of these options are the best guarantee for a minimum contrast across all systems, color schemes and terminals... If the fpp selection background is fixed to blue, then bright white for the text is probably a good option as the default terminal text could potentially be blue. Hardcoding RGB to \"maximum white\" might be too outstanding in case of a low-contrast color scheme.\n. > If the fpp selection background is fixed to blue, then bright white for the text is probably a good option\nLooks like this can be achieved by the following change:\n\n(I never understood why ANSI treats bold and bright as the same thing. Code 0 is Bold or increased intensity )\n. I think RGB for default white can stay as is. And only change from default white to bold/bright white when the text is selected.\nI think the snippet in my last post should do the trick -- just needs some additions so that bold/bright attribute is used both for all text on non-default background color (only hovered text is taken care of now)\n. Great! Does it makes sense to add bright attribute to the two other cases as well (self.hovered and self.selected and self.selected)? This is how it looks for those cases now:\n\n. 0.7.1 fresh install with Homebrew. Tried with HEAD as well, same problem.\n. Odd. Entering commands does not work and there is no stack trace on ctrl-c. CPU is 100% for the fpp process (executing choose.py). Same problem in normal terminal btw.\nSeems it only occurs with -a flag to ls. A minimal repro for me is:\nmkdir tmp2\ncd tmp2\n~/tmp2$ touch aaaaaaaa.py\n~/tmp2$ touch aaaaaaaa2.py\n~/tmp2$ /bin/ls -l | fpp\nStill fine for you?\n. Good to hear! \ud83d\udc4d \n. Yeah I noticed the tests failing and that it seemed non-trivial to fix. Thanks for integrating!\n. ",
    "ReadmeCritic": ":smile: \n. :smile: \n. ",
    "kevinastone": ":+1: \n. #205 fixed my issue running fpp under fish.\n. :ok_hand: \n. :+1: \n. #205 fixed my issue running fpp under fish.\n. :ok_hand: \n. ",
    "joanna-chen": "interesting, i will definitely check out autopep8 thanks! :smile: \n. interesting, i will definitely check out autopep8 thanks! :smile: \n. ",
    "maikelmeyers": "fzf does not know what a file path is. It can not filter out the file paths from the input by itself. Ideally it would need a pre- and a post filter. The pre-filter filters all lines from the input which contain a file path (i.e. grep output). This filtered output is piped into fzf. With fzf you select the lines with the files you want to process in some way. After pressing Enter this selected lines go into the post-filter. This one filters now the concrete file paths and send it to the $EDITOR or other command. In principle it is the same as fpp already does, but with fzf as the selection tool. Maybe it would be a better idea to have an option that enables to select fzf as internal selection tool.\nI could do this filters with sed and/or awk or whatever, but fpp does already a good job at this, so why reinventing the wheel :)\n. Sorry for bothering you. I now wrote a small bash wrapper script around fzf, which does nearly the same as fpp, at least for file paths and web urls.\n. fzf does not know what a file path is. It can not filter out the file paths from the input by itself. Ideally it would need a pre- and a post filter. The pre-filter filters all lines from the input which contain a file path (i.e. grep output). This filtered output is piped into fzf. With fzf you select the lines with the files you want to process in some way. After pressing Enter this selected lines go into the post-filter. This one filters now the concrete file paths and send it to the $EDITOR or other command. In principle it is the same as fpp already does, but with fzf as the selection tool. Maybe it would be a better idea to have an option that enables to select fzf as internal selection tool.\nI could do this filters with sed and/or awk or whatever, but fpp does already a good job at this, so why reinventing the wheel :)\n. Sorry for bothering you. I now wrote a small bash wrapper script around fzf, which does nearly the same as fpp, at least for file paths and web urls.\n. ",
    "mattfaluotico": "Here is a gist. https://gist.github.com/mattfxyz/60812914cf06aa193ad5\nI had to recreate the issue (work project). \nan iOS project named \"sample project\" creates another folder called \"sample project\" for the source. The files inside that source folder are either not found or return the wrong path (I've seen both) \n. Here is a gist. https://gist.github.com/mattfxyz/60812914cf06aa193ad5\nI had to recreate the issue (work project). \nan iOS project named \"sample project\" creates another folder called \"sample project\" for the source. The files inside that source folder are either not found or return the wrong path (I've seen both) \n. ",
    "ches": "Hi, sorry for commenting/asking a question on a closed issue, but this seems the most relevant place. I can open a new one if you like.\nI came here from #206 because I just hit that issue, and it caused me to lose work in my editor. That's pretty nasty default behavior, having not noticed that this --non-interactive flag exists until now (it's only helpful after you know you need it \ud83d\ude22 ).\n\nInteractive mode is not really meant to execute shell scripts the way we're using it in fpp, but since it's already in and I don't want to really break some users' workflows\n\nI agree, and I'd argue that this bad experience and possibility of losing work warrants considering changing the default, maybe when a major version bump comes along if that's the project's policy? It's still 0.x so if you're following Semantic Versioning then all bets are still off\u2026 I'd be curious to hear use cases where people actually depend on the interactive shell behavior, beyond aliases, etc. which I think can be solved.\nThis is from the bash man page (emphasis mine):\n\nWhen  bash is invoked as an interactive login shell, or as a non-inter-\nactive shell with the --login option, it first reads and executes  com-\nmands  from  the file /etc/profile, if that file exists.  After reading\nthat file, it looks for ~/.bash_profile, ~/.bash_login, and ~/.profile,\nin  that order, and reads and executes commands from the first one that\nexists and is readable.\n\nIf loading aliases and such is desired, I believe that's the \"right\" way to do it: a login shell, but not interactive.\nI can try to work up a change to propose and see how it works, but before digging in I wanted to ask, @pcottle said this on #206:\n\nthis is unfortunately due to the fact that we launch the editor inside a subshell and attach it to tty directly\n\nIs there a reason or some background you can point me to on why fpp doesn't just exec the process?\nThanks for the tool, it's useful!\n. Hi, sorry for commenting/asking a question on a closed issue, but this seems the most relevant place. I can open a new one if you like.\nI came here from #206 because I just hit that issue, and it caused me to lose work in my editor. That's pretty nasty default behavior, having not noticed that this --non-interactive flag exists until now (it's only helpful after you know you need it \ud83d\ude22 ).\n\nInteractive mode is not really meant to execute shell scripts the way we're using it in fpp, but since it's already in and I don't want to really break some users' workflows\n\nI agree, and I'd argue that this bad experience and possibility of losing work warrants considering changing the default, maybe when a major version bump comes along if that's the project's policy? It's still 0.x so if you're following Semantic Versioning then all bets are still off\u2026 I'd be curious to hear use cases where people actually depend on the interactive shell behavior, beyond aliases, etc. which I think can be solved.\nThis is from the bash man page (emphasis mine):\n\nWhen  bash is invoked as an interactive login shell, or as a non-inter-\nactive shell with the --login option, it first reads and executes  com-\nmands  from  the file /etc/profile, if that file exists.  After reading\nthat file, it looks for ~/.bash_profile, ~/.bash_login, and ~/.profile,\nin  that order, and reads and executes commands from the first one that\nexists and is readable.\n\nIf loading aliases and such is desired, I believe that's the \"right\" way to do it: a login shell, but not interactive.\nI can try to work up a change to propose and see how it works, but before digging in I wanted to ask, @pcottle said this on #206:\n\nthis is unfortunately due to the fact that we launch the editor inside a subshell and attach it to tty directly\n\nIs there a reason or some background you can point me to on why fpp doesn't just exec the process?\nThanks for the tool, it's useful!\n. ",
    "Carreau": "Thanks !\n\nnot at all, really appreciate it! I dont have any local linting set up, and I wish I did :P\n\nI use vim syntastic with let g:syntastic_python_checkers = ['pyflakes'] if it can be of help. \n. Woo awesome, thanks !\n. Thanks !\n\nnot at all, really appreciate it! I dont have any local linting set up, and I wish I did :P\n\nI use vim syntastic with let g:syntastic_python_checkers = ['pyflakes'] if it can be of help. \n. Woo awesome, thanks !\n. ",
    "uri": "Yeah removing the call to appendToFile fixes the problem.\n. Yeah removing the call to appendToFile fixes the problem.\n. ",
    "petr-tik": "is this closed then?\n. is this closed then?\n. ",
    "edentsai": "When I set $FPP_DIR environment variable in bash, i got a problem below:\n``` bash\n[~/demo-fpp] $ mkdir my-fpp\n[~/demo-fpp] $ ls -a my-fpp/\n./  ../\n[~/demo-fpp] $ export FPP_DIR=\"$HOME/demo-fpp/my-fpp\"\n[~/demo-fpp] $ echo 'hello' > foo\n[~/demo-fpp] $ echo 'hello' > foo2\n[~/demo-fpp] $ find foo* -type f -d 0 | fpp\nbash: ~/.fpp/.fpp.sh: No such file or directory\n[~/demo-fpp] $ ls -a my-fpp/\n./        ../       .fpp.log  .fpp.sh   .pickle\n```\nBecause fpp script still try to read file from ~/.fpp/.fpp.sh\nif [ -n \"$BASH\" -o -n \"$ZSH_NAME\" ]; then\n    $SHELL $IFLAG ~/.fpp/.fpp.sh < /dev/tty\n  else\n    /bin/bash $IFLAG ~/.fpp/.fpp.sh < /dev/tty\n  fi\nMaybe we need to define a FPP_DIR variable in fpp script.\n. I send a PR to fixes above: https://github.com/facebook/PathPicker/pull/232\n. When I set $FPP_DIR environment variable in bash, i got a problem below:\n``` bash\n[~/demo-fpp] $ mkdir my-fpp\n[~/demo-fpp] $ ls -a my-fpp/\n./  ../\n[~/demo-fpp] $ export FPP_DIR=\"$HOME/demo-fpp/my-fpp\"\n[~/demo-fpp] $ echo 'hello' > foo\n[~/demo-fpp] $ echo 'hello' > foo2\n[~/demo-fpp] $ find foo* -type f -d 0 | fpp\nbash: ~/.fpp/.fpp.sh: No such file or directory\n[~/demo-fpp] $ ls -a my-fpp/\n./        ../       .fpp.log  .fpp.sh   .pickle\n```\nBecause fpp script still try to read file from ~/.fpp/.fpp.sh\nif [ -n \"$BASH\" -o -n \"$ZSH_NAME\" ]; then\n    $SHELL $IFLAG ~/.fpp/.fpp.sh < /dev/tty\n  else\n    /bin/bash $IFLAG ~/.fpp/.fpp.sh < /dev/tty\n  fi\nMaybe we need to define a FPP_DIR variable in fpp script.\n. I send a PR to fixes above: https://github.com/facebook/PathPicker/pull/232\n. ",
    "rjdean123": "testScreenInputs test failed, presumably because the sidebar options below mine aren't where the tests expect them to be. taking a look at this now, if anyone has any information about how the tests are set up please let me know.\n. @pcottle thanks for the feedback! It's a helpful feature for forgetful users like me who need a little help remembering which file's which sometimes haha.\nCalling on hover is a good idea--only worry would be performance of getLengthInLines on files with a lot of lines as that particular function scales linearly with the size of the file, while the others should be relatively constant.\nI haven't noticed any issues with it yet, and I don't expect any, however I haven't tried on any ~huge~ files.\nI'll test a bit and add the feature to hover when I get the chance.\n. @pcottle cool, git status is a good idea.... I'll fix the tests then take a look at how we could accomplish that.\n. tests pass now, fixed a bug\n. @pcottle everything should be addressed in the line comments, but overall i believe I implemented everything except for the human readable size format.\nI'm gonna keep looking for a robust way to do that, might just end up implementing it in python.\nthanks :D\nEDIT: was way over complicating things... human readable size done.\n. gah, failing because the 'last accessed' line is different each run, will look more into this when I get some time tomorrow\n. yeah, that's what i figured--removed the time last accessed feature. luckily i dont think that was one of the more useful features, I think time last modified is more likely to be helpful anyways\n. ah, of course haha. weird, they passed locally before I pushed. \nwill take a look later today.\n. so the expected output file is being generated for a file on my machine, and when it's tested on Travis, the information doesn't line up, which is actually correct behavior. is there a way to generate the expected output on the test server?\nBut, luckily digging through this issue, I did also realize that a python function i was using was new to python 2.7, and so I was able to rewrite some things to make sure fpp plays nicely with 2.6+/3.0+.\n. Got it, yeah, the tests have already proven to be helpful!\ntaking a look at this now.\n. apologies this is taking so long, got quite busy at the end of the summer/start of the new year. should be good to work on this this weekend.\n. testScreenInputs test failed, presumably because the sidebar options below mine aren't where the tests expect them to be. taking a look at this now, if anyone has any information about how the tests are set up please let me know.\n. @pcottle thanks for the feedback! It's a helpful feature for forgetful users like me who need a little help remembering which file's which sometimes haha.\nCalling on hover is a good idea--only worry would be performance of getLengthInLines on files with a lot of lines as that particular function scales linearly with the size of the file, while the others should be relatively constant.\nI haven't noticed any issues with it yet, and I don't expect any, however I haven't tried on any ~huge~ files.\nI'll test a bit and add the feature to hover when I get the chance.\n. @pcottle cool, git status is a good idea.... I'll fix the tests then take a look at how we could accomplish that.\n. tests pass now, fixed a bug\n. @pcottle everything should be addressed in the line comments, but overall i believe I implemented everything except for the human readable size format.\nI'm gonna keep looking for a robust way to do that, might just end up implementing it in python.\nthanks :D\nEDIT: was way over complicating things... human readable size done.\n. gah, failing because the 'last accessed' line is different each run, will look more into this when I get some time tomorrow\n. yeah, that's what i figured--removed the time last accessed feature. luckily i dont think that was one of the more useful features, I think time last modified is more likely to be helpful anyways\n. ah, of course haha. weird, they passed locally before I pushed. \nwill take a look later today.\n. so the expected output file is being generated for a file on my machine, and when it's tested on Travis, the information doesn't line up, which is actually correct behavior. is there a way to generate the expected output on the test server?\nBut, luckily digging through this issue, I did also realize that a python function i was using was new to python 2.7, and so I was able to rewrite some things to make sure fpp plays nicely with 2.6+/3.0+.\n. Got it, yeah, the tests have already proven to be helpful!\ntaking a look at this now.\n. apologies this is taking so long, got quite busy at the end of the summer/start of the new year. should be good to work on this this weekend.\n. ",
    "scottjacobsen": "Yes, not a problem.\n. If you want to point me in the right direction I'm happy to give it a\ngo.\nRunning\nag -i 'non.*interactive'\nwas not enlightening. I can see where the option is parsed, but not\nwhere it is used.\n. Yes, not a problem.\n. If you want to point me in the right direction I'm happy to give it a\ngo.\nRunning\nag -i 'non.*interactive'\nwas not enlightening. I can see where the option is parsed, but not\nwhere it is used.\n. ",
    "weakish": "\nI meant the variable name\n\nSorry. Fixed now. Thanks.\n. > I meant the variable name\nSorry. Fixed now. Thanks.\n. ",
    "shushanxingzhe": "Yes of course,Do you mean I split it and commit again or you'll do that\n. Yes of course,Do you mean I split it and commit again or you'll do that\n. ",
    "iamFIREcracker": "@pcottle Did I take you too seriously when you proposed to fix it with a new env variable?  Ooops :P\n. @pcottle Did I take you too seriously when you proposed to fix it with a new env variable?  Ooops :P\n. ",
    "nizamsp": "Thank you! I was also wondering how come a 3021 star rated repo had this bug. I think you have reached only half of the potential users :)\nThe clone link would have worked for you since you own the repo. \n. Thank you! I was also wondering how come a 3021 star rated repo had this bug. I think you have reached only half of the potential users :)\nThe clone link would have worked for you since you own the repo. \n. ",
    "mellowcandle": "Easily reproducable: 184 files for instance:\nfind . -name *.c | fpp\nfind output:\n./tests/tests.c\n./arch/x86/kernel/cpu.c\n./arch/x86/kernel/ioapic.c\n./arch/x86/kernel/apic.c\n./arch/x86/kernel/gdt.c\n./arch/x86/kernel/idt.c\n./drivers/timer/i8254.c\n./drivers/input/kbd.c\n./drivers/acpi/acpica/rsinfo.c\n./drivers/acpi/acpica/psxface.c\n./drivers/acpi/acpica/evmisc.c\n./drivers/acpi/acpica/nseval.c\n./drivers/acpi/acpica/hwsleep.c\n./drivers/acpi/acpica/nsprepkg.c\n./drivers/acpi/acpica/nsaccess.c\n./drivers/acpi/acpica/tbutils.c\n./drivers/acpi/acpica/uteval.c\n./drivers/acpi/acpica/psscope.c\n./drivers/acpi/acpica/dsinit.c\n./drivers/acpi/acpica/nswalk.c\n./drivers/acpi/acpica/utxferror.c\n./drivers/acpi/acpica/utascii.c\n./drivers/acpi/acpica/tbinstal.c\n./drivers/acpi/acpica/utprint.c\n./drivers/acpi/acpica/evevent.c\n./drivers/acpi/acpica/dsdebug.c\n./drivers/acpi/acpica/psloop.c\n./drivers/acpi/acpica/utstrtoul64.c\n./drivers/acpi/acpica/utaddress.c\n./drivers/acpi/acpica/evgpeutil.c\n./drivers/acpi/acpica/dsobject.c\n./drivers/acpi/acpica/exregion.c\n./drivers/acpi/acpica/nsload.c\n./drivers/acpi/acpica/utnonansi.c\n./drivers/acpi/acpica/utxfinit.c\n./drivers/acpi/acpica/evxface.c\n./drivers/acpi/acpica/exconvrt.c\n./drivers/acpi/acpica/hwtimer.c\n./drivers/acpi/acpica/utdebug.c\n./drivers/acpi/acpica/exoparg1.c\n./drivers/acpi/acpica/utexcep.c\n./drivers/acpi/acpica/nsxfobj.c\n./drivers/acpi/acpica/hwgpe.c\n./drivers/acpi/acpica/utcopy.c\n./drivers/acpi/acpica/utclib.c\n./drivers/acpi/acpica/utglobal.c\n./drivers/acpi/acpica/nsrepair2.c\n./drivers/acpi/acpica/exstore.c\n./drivers/acpi/acpica/utmisc.c\n./drivers/acpi/acpica/nsinit.c\n./drivers/acpi/acpica/dsfield.c\n./drivers/acpi/acpica/nsalloc.c\n./drivers/acpi/acpica/exmutex.c\n./drivers/acpi/acpica/rsdumpinfo.c\n./drivers/acpi/acpica/psopinfo.c\n./drivers/acpi/acpica/exfield.c\n./drivers/acpi/acpica/nsutils.c\n./drivers/acpi/acpica/evregion.c\n./drivers/acpi/acpica/psutils.c\n./drivers/acpi/acpica/utalloc.c\n./drivers/acpi/acpica/uterror.c\n./drivers/acpi/acpica/tbdata.c\n./drivers/acpi/acpica/exoparg6.c\n./drivers/acpi/acpica/rsmemory.c\n./drivers/acpi/acpica/hwpci.c\n./drivers/acpi/acpica/rscalc.c\n./drivers/acpi/acpica/utobject.c\n./drivers/acpi/acpica/epos_hal.c\n./drivers/acpi/acpica/exprep.c\n./drivers/acpi/acpica/utosi.c\n./drivers/acpi/acpica/nsxfname.c\n./drivers/acpi/acpica/hwvalid.c\n./drivers/acpi/acpica/exstorob.c\n./drivers/acpi/acpica/evrgnini.c\n./drivers/acpi/acpica/exfldio.c\n./drivers/acpi/acpica/dsutils.c\n./drivers/acpi/acpica/utmutex.c\n./drivers/acpi/acpica/utpredef.c\n./drivers/acpi/acpica/dswload2.c\n./drivers/acpi/acpica/tbfind.c\n./drivers/acpi/acpica/exoparg3.c\n./drivers/acpi/acpica/utlock.c\n./drivers/acpi/acpica/exresolv.c\n./drivers/acpi/acpica/nsarguments.c\n./drivers/acpi/acpica/exmisc.c\n./drivers/acpi/acpica/evxfgpe.c\n./drivers/acpi/acpica/nsparse.c\n./drivers/acpi/acpica/exresnte.c\n./drivers/acpi/acpica/tbxface.c\n./drivers/acpi/acpica/exutils.c\n./drivers/acpi/acpica/nsobject.c\n./drivers/acpi/acpica/utstate.c\n./drivers/acpi/acpica/rsio.c\n./drivers/acpi/acpica/utinit.c\n./drivers/acpi/acpica/hwxfsleep.c\n./drivers/acpi/acpica/hwxface.c\n./drivers/acpi/acpica/hwregs.c\n./drivers/acpi/acpica/dswscope.c\n./drivers/acpi/acpica/utxface.c\n./drivers/acpi/acpica/hwesleep.c\n./drivers/acpi/acpica/dsmethod.c\n./drivers/acpi/acpica/evglock.c\n./drivers/acpi/acpica/tbprint.c\n./drivers/acpi/acpica/dsargs.c\n./drivers/acpi/acpica/utxfmutex.c\n./drivers/acpi/acpica/utuuid.c\n./drivers/acpi/acpica/rslist.c\n./drivers/acpi/acpica/nsdump.c\n./drivers/acpi/acpica/nsconvert.c\n./drivers/acpi/acpica/dsmthdat.c\n./drivers/acpi/acpica/exstoren.c\n./drivers/acpi/acpica/dswstate.c\n./drivers/acpi/acpica/evgpe.c\n./drivers/acpi/acpica/pstree.c\n./drivers/acpi/acpica/rsmisc.c\n./drivers/acpi/acpica/exdebug.c\n./drivers/acpi/acpica/hwacpi.c\n./drivers/acpi/acpica/nspredef.c\n./drivers/acpi/acpica/evhandler.c\n./drivers/acpi/acpica/tbfadt.c\n./drivers/acpi/acpica/utresrc.c\n./drivers/acpi/acpica/evgpeinit.c\n./drivers/acpi/acpica/rsirq.c\n./drivers/acpi/acpica/nsxfeval.c\n./drivers/acpi/acpica/evsci.c\n./drivers/acpi/acpica/nsrepair.c\n./drivers/acpi/acpica/utids.c\n./drivers/acpi/acpica/pswalk.c\n./drivers/acpi/acpica/excreate.c\n./drivers/acpi/acpica/tbxfload.c\n./drivers/acpi/acpica/nsnames.c\n./drivers/acpi/acpica/exconcat.c\n./drivers/acpi/acpica/utdecode.c\n./drivers/acpi/acpica/dscontrol.c\n./drivers/acpi/acpica/tbxfroot.c\n./drivers/acpi/acpica/utmath.c\n./drivers/acpi/acpica/rsaddr.c\n./drivers/acpi/acpica/dswexec.c\n./drivers/acpi/acpica/utownerid.c\n./drivers/acpi/acpica/evgpeblk.c\n./drivers/acpi/acpica/evxfevnt.c\n./drivers/acpi/acpica/dswload.c\n./drivers/acpi/acpica/psopcode.c\n./drivers/acpi/acpica/rscreate.c\n./drivers/acpi/acpica/rsutils.c\n./drivers/acpi/acpica/evxfregn.c\n./drivers/acpi/acpica/exsystem.c\n./drivers/acpi/acpica/utbuffer.c\n./drivers/acpi/acpica/exconfig.c\n./drivers/acpi/acpica/rsserial.c\n./drivers/acpi/acpica/uthex.c\n./drivers/acpi/acpica/rsxface.c\n./drivers/acpi/acpica/extrace.c\n./drivers/acpi/acpica/psobject.c\n./drivers/acpi/acpica/psargs.c\n./drivers/acpi/acpica/exdump.c\n./drivers/acpi/acpica/utcache.c\n./drivers/acpi/acpica/dsopcode.c\n./drivers/acpi/acpica/nsdumpdv.c\n./drivers/acpi/acpica/exresop.c\n./drivers/acpi/acpica/utstring.c\n./drivers/acpi/acpica/uttrack.c\n./drivers/acpi/acpica/psparse.c\n./drivers/acpi/acpica/exnames.c\n./drivers/acpi/acpica/utdelete.c\n./drivers/acpi/acpica/exoparg2.c\n./drivers/acpi/acpica/nssearch.c\n./drivers/acpi/acpi.c\n./drivers/video/VIDEO_textmode.c\n./drivers/serial/serial.c\n./kernel/ticks.c\n./kernel/interrupts.c\n./kernel/kernel.c\n./kernel/panic.c\n./kernel/mmodules.c\n./lib/string.c\n./lib/elf.c\n./lib/printk.c\n./lib/ctype.c\n./lib/kmalloc.c\n./mem/kheap.c\n./mem/virtual.c\n./mem/physical.c\n./modules/program.c\nOn Fri, Oct 7, 2016 at 5:12 AM, Peter Cottle notifications@github.com\nwrote:\n\ncan you give me a repro of the input you got where this happened? how many\nfiles are we talking?\nI think if you pipe in 1,000 files it might just hang for a while but im\nnot sure\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/249#issuecomment-252137266,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ACY1EWLdsSBAsj6EJCxC2Z6QmdLtJa-Uks5qxap3gaJpZM4KN0DX\n.\n. Easily reproducable: 184 files for instance:\n\nfind . -name *.c | fpp\nfind output:\n./tests/tests.c\n./arch/x86/kernel/cpu.c\n./arch/x86/kernel/ioapic.c\n./arch/x86/kernel/apic.c\n./arch/x86/kernel/gdt.c\n./arch/x86/kernel/idt.c\n./drivers/timer/i8254.c\n./drivers/input/kbd.c\n./drivers/acpi/acpica/rsinfo.c\n./drivers/acpi/acpica/psxface.c\n./drivers/acpi/acpica/evmisc.c\n./drivers/acpi/acpica/nseval.c\n./drivers/acpi/acpica/hwsleep.c\n./drivers/acpi/acpica/nsprepkg.c\n./drivers/acpi/acpica/nsaccess.c\n./drivers/acpi/acpica/tbutils.c\n./drivers/acpi/acpica/uteval.c\n./drivers/acpi/acpica/psscope.c\n./drivers/acpi/acpica/dsinit.c\n./drivers/acpi/acpica/nswalk.c\n./drivers/acpi/acpica/utxferror.c\n./drivers/acpi/acpica/utascii.c\n./drivers/acpi/acpica/tbinstal.c\n./drivers/acpi/acpica/utprint.c\n./drivers/acpi/acpica/evevent.c\n./drivers/acpi/acpica/dsdebug.c\n./drivers/acpi/acpica/psloop.c\n./drivers/acpi/acpica/utstrtoul64.c\n./drivers/acpi/acpica/utaddress.c\n./drivers/acpi/acpica/evgpeutil.c\n./drivers/acpi/acpica/dsobject.c\n./drivers/acpi/acpica/exregion.c\n./drivers/acpi/acpica/nsload.c\n./drivers/acpi/acpica/utnonansi.c\n./drivers/acpi/acpica/utxfinit.c\n./drivers/acpi/acpica/evxface.c\n./drivers/acpi/acpica/exconvrt.c\n./drivers/acpi/acpica/hwtimer.c\n./drivers/acpi/acpica/utdebug.c\n./drivers/acpi/acpica/exoparg1.c\n./drivers/acpi/acpica/utexcep.c\n./drivers/acpi/acpica/nsxfobj.c\n./drivers/acpi/acpica/hwgpe.c\n./drivers/acpi/acpica/utcopy.c\n./drivers/acpi/acpica/utclib.c\n./drivers/acpi/acpica/utglobal.c\n./drivers/acpi/acpica/nsrepair2.c\n./drivers/acpi/acpica/exstore.c\n./drivers/acpi/acpica/utmisc.c\n./drivers/acpi/acpica/nsinit.c\n./drivers/acpi/acpica/dsfield.c\n./drivers/acpi/acpica/nsalloc.c\n./drivers/acpi/acpica/exmutex.c\n./drivers/acpi/acpica/rsdumpinfo.c\n./drivers/acpi/acpica/psopinfo.c\n./drivers/acpi/acpica/exfield.c\n./drivers/acpi/acpica/nsutils.c\n./drivers/acpi/acpica/evregion.c\n./drivers/acpi/acpica/psutils.c\n./drivers/acpi/acpica/utalloc.c\n./drivers/acpi/acpica/uterror.c\n./drivers/acpi/acpica/tbdata.c\n./drivers/acpi/acpica/exoparg6.c\n./drivers/acpi/acpica/rsmemory.c\n./drivers/acpi/acpica/hwpci.c\n./drivers/acpi/acpica/rscalc.c\n./drivers/acpi/acpica/utobject.c\n./drivers/acpi/acpica/epos_hal.c\n./drivers/acpi/acpica/exprep.c\n./drivers/acpi/acpica/utosi.c\n./drivers/acpi/acpica/nsxfname.c\n./drivers/acpi/acpica/hwvalid.c\n./drivers/acpi/acpica/exstorob.c\n./drivers/acpi/acpica/evrgnini.c\n./drivers/acpi/acpica/exfldio.c\n./drivers/acpi/acpica/dsutils.c\n./drivers/acpi/acpica/utmutex.c\n./drivers/acpi/acpica/utpredef.c\n./drivers/acpi/acpica/dswload2.c\n./drivers/acpi/acpica/tbfind.c\n./drivers/acpi/acpica/exoparg3.c\n./drivers/acpi/acpica/utlock.c\n./drivers/acpi/acpica/exresolv.c\n./drivers/acpi/acpica/nsarguments.c\n./drivers/acpi/acpica/exmisc.c\n./drivers/acpi/acpica/evxfgpe.c\n./drivers/acpi/acpica/nsparse.c\n./drivers/acpi/acpica/exresnte.c\n./drivers/acpi/acpica/tbxface.c\n./drivers/acpi/acpica/exutils.c\n./drivers/acpi/acpica/nsobject.c\n./drivers/acpi/acpica/utstate.c\n./drivers/acpi/acpica/rsio.c\n./drivers/acpi/acpica/utinit.c\n./drivers/acpi/acpica/hwxfsleep.c\n./drivers/acpi/acpica/hwxface.c\n./drivers/acpi/acpica/hwregs.c\n./drivers/acpi/acpica/dswscope.c\n./drivers/acpi/acpica/utxface.c\n./drivers/acpi/acpica/hwesleep.c\n./drivers/acpi/acpica/dsmethod.c\n./drivers/acpi/acpica/evglock.c\n./drivers/acpi/acpica/tbprint.c\n./drivers/acpi/acpica/dsargs.c\n./drivers/acpi/acpica/utxfmutex.c\n./drivers/acpi/acpica/utuuid.c\n./drivers/acpi/acpica/rslist.c\n./drivers/acpi/acpica/nsdump.c\n./drivers/acpi/acpica/nsconvert.c\n./drivers/acpi/acpica/dsmthdat.c\n./drivers/acpi/acpica/exstoren.c\n./drivers/acpi/acpica/dswstate.c\n./drivers/acpi/acpica/evgpe.c\n./drivers/acpi/acpica/pstree.c\n./drivers/acpi/acpica/rsmisc.c\n./drivers/acpi/acpica/exdebug.c\n./drivers/acpi/acpica/hwacpi.c\n./drivers/acpi/acpica/nspredef.c\n./drivers/acpi/acpica/evhandler.c\n./drivers/acpi/acpica/tbfadt.c\n./drivers/acpi/acpica/utresrc.c\n./drivers/acpi/acpica/evgpeinit.c\n./drivers/acpi/acpica/rsirq.c\n./drivers/acpi/acpica/nsxfeval.c\n./drivers/acpi/acpica/evsci.c\n./drivers/acpi/acpica/nsrepair.c\n./drivers/acpi/acpica/utids.c\n./drivers/acpi/acpica/pswalk.c\n./drivers/acpi/acpica/excreate.c\n./drivers/acpi/acpica/tbxfload.c\n./drivers/acpi/acpica/nsnames.c\n./drivers/acpi/acpica/exconcat.c\n./drivers/acpi/acpica/utdecode.c\n./drivers/acpi/acpica/dscontrol.c\n./drivers/acpi/acpica/tbxfroot.c\n./drivers/acpi/acpica/utmath.c\n./drivers/acpi/acpica/rsaddr.c\n./drivers/acpi/acpica/dswexec.c\n./drivers/acpi/acpica/utownerid.c\n./drivers/acpi/acpica/evgpeblk.c\n./drivers/acpi/acpica/evxfevnt.c\n./drivers/acpi/acpica/dswload.c\n./drivers/acpi/acpica/psopcode.c\n./drivers/acpi/acpica/rscreate.c\n./drivers/acpi/acpica/rsutils.c\n./drivers/acpi/acpica/evxfregn.c\n./drivers/acpi/acpica/exsystem.c\n./drivers/acpi/acpica/utbuffer.c\n./drivers/acpi/acpica/exconfig.c\n./drivers/acpi/acpica/rsserial.c\n./drivers/acpi/acpica/uthex.c\n./drivers/acpi/acpica/rsxface.c\n./drivers/acpi/acpica/extrace.c\n./drivers/acpi/acpica/psobject.c\n./drivers/acpi/acpica/psargs.c\n./drivers/acpi/acpica/exdump.c\n./drivers/acpi/acpica/utcache.c\n./drivers/acpi/acpica/dsopcode.c\n./drivers/acpi/acpica/nsdumpdv.c\n./drivers/acpi/acpica/exresop.c\n./drivers/acpi/acpica/utstring.c\n./drivers/acpi/acpica/uttrack.c\n./drivers/acpi/acpica/psparse.c\n./drivers/acpi/acpica/exnames.c\n./drivers/acpi/acpica/utdelete.c\n./drivers/acpi/acpica/exoparg2.c\n./drivers/acpi/acpica/nssearch.c\n./drivers/acpi/acpi.c\n./drivers/video/VIDEO_textmode.c\n./drivers/serial/serial.c\n./kernel/ticks.c\n./kernel/interrupts.c\n./kernel/kernel.c\n./kernel/panic.c\n./kernel/mmodules.c\n./lib/string.c\n./lib/elf.c\n./lib/printk.c\n./lib/ctype.c\n./lib/kmalloc.c\n./mem/kheap.c\n./mem/virtual.c\n./mem/physical.c\n./modules/program.c\nOn Fri, Oct 7, 2016 at 5:12 AM, Peter Cottle notifications@github.com\nwrote:\n\ncan you give me a repro of the input you got where this happened? how many\nfiles are we talking?\nI think if you pipe in 1,000 files it might just hang for a while but im\nnot sure\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/facebook/PathPicker/issues/249#issuecomment-252137266,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ACY1EWLdsSBAsj6EJCxC2Z6QmdLtJa-Uks5qxap3gaJpZM4KN0DX\n.\n. \n",
    "gkze": "@pcottle https://github.com/jkbrzt/httpie -- very good\n. @pcottle https://github.com/jkbrzt/httpie -- very good\n. ",
    "Conky5": "Updated to allow travis to do the autopep8 check and make formatting corrections so that the build passes.\n. @pcottle you're welcome! You're correct, it wrote to stderr and \"Pep8 Compliant!\" would be printed, and the script would return success.\n. Updated to allow travis to do the autopep8 check and make formatting corrections so that the build passes.\n. @pcottle you're welcome! You're correct, it wrote to stderr and \"Pep8 Compliant!\" would be printed, and the script would return success.\n. ",
    "brwong": "My vim command reference, FYI\nStack Overflow - Vim : Open multiples files on different lines. I changed it so that \"vim\" acts as before (columns, but with the correct line number jumps), and setting FPP_EDITOR to \"vim -p\" opens new tabs.\nAs usual, I'm open to suggestions.. My vim command reference, FYI\nStack Overflow - Vim : Open multiples files on different lines. I changed it so that \"vim\" acts as before (columns, but with the correct line number jumps), and setting FPP_EDITOR to \"vim -p\" opens new tabs.\nAs usual, I'm open to suggestions.. ",
    "sidd607": "the package.sh scripts deletes the package.sh file and then does a git checkout . If you are building from a non git folder, package.sh is deleted and then git checkout fails and thorws the error.. the package.sh scripts deletes the package.sh file and then does a git checkout . If you are building from a non git folder, package.sh is deleted and then git checkout fails and thorws the error.. ",
    "hborders": "\ncan you check what $BASH or $ZSH_NAME were outputting?\n\nI echo-ed $BASH and $SHELL right before the if:\necho \"bash: $BASH, shell: $SHELL\"\n  if [ -n \"$BASH\" -o -n \"$ZSH_NAME\" ]; then\n    $SHELL $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\n  else\n    /bin/bash $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\n  fi\nand got this output:\nbash: /bin/bash, shell: /bin/false\nOf course, if I export SHELL=/usr/local/bin/bash in my .bashrc everything works fine.. I think you should prefer $SHELL if possible, and just handle this specific case. It really seems like an OS X bug to me. Thus, do something like:\nif [ -n \"$BASH\" -o -n \"$ZSH_NAME\" ]; then\n  if [ \"${SHELL}\" -ne \"/bin/false\" ]\n    $SHELL $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\n  else\n    $BASH $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\n  fi\nelse\n  /bin/bash $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\nfi. That makes sense. I'm just thinking since this is a hacky workaround, mitigation should be limited to mitigate possible side-effects.\nIt might even be good to emit a warning message to stderr saying they should export SHELL explicitly to work around this bug.. Nice! Thanks!. > can you check what $BASH or $ZSH_NAME were outputting?\nI echo-ed $BASH and $SHELL right before the if:\necho \"bash: $BASH, shell: $SHELL\"\n  if [ -n \"$BASH\" -o -n \"$ZSH_NAME\" ]; then\n    $SHELL $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\n  else\n    /bin/bash $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\n  fi\nand got this output:\nbash: /bin/bash, shell: /bin/false\nOf course, if I export SHELL=/usr/local/bin/bash in my .bashrc everything works fine.. I think you should prefer $SHELL if possible, and just handle this specific case. It really seems like an OS X bug to me. Thus, do something like:\nif [ -n \"$BASH\" -o -n \"$ZSH_NAME\" ]; then\n  if [ \"${SHELL}\" -ne \"/bin/false\" ]\n    $SHELL $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\n  else\n    $BASH $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\n  fi\nelse\n  /bin/bash $IFLAG \"$FPP_DIR/.fpp.sh\" < /dev/tty\nfi. That makes sense. I'm just thinking since this is a hacky workaround, mitigation should be limited to mitigate possible side-effects.\nIt might even be good to emit a warning message to stderr saying they should export SHELL explicitly to work around this bug.. Nice! Thanks!. ",
    "ri-aje": "they are not about the same, right? #171 wants fpp assembled commands to enter some sort of history, whereas I want it to execute my last command (already in history) for me when invoked naked. put it in an example,\nbash-prompt> my-last-command \nbash-prompt> fpp\nand I want the fpp command executes as if I have typed \"my-last-command | fpp\" in its place. this should be easier to implement than #171. fpp only needs to check if it is sitting on a piped position and if not, then tail -1 ~/.bash_history and execute it for me then process its outputs.\n. on a second thought, maybe history|tail -2|head -1 is better.. they are not about the same, right? #171 wants fpp assembled commands to enter some sort of history, whereas I want it to execute my last command (already in history) for me when invoked naked. put it in an example,\nbash-prompt> my-last-command \nbash-prompt> fpp\nand I want the fpp command executes as if I have typed \"my-last-command | fpp\" in its place. this should be easier to implement than #171. fpp only needs to check if it is sitting on a piped position and if not, then tail -1 ~/.bash_history and execute it for me then process its outputs.\n. on a second thought, maybe history|tail -2|head -1 is better.. ",
    "zhanggang807": "\nif 'll' command output a soft link. Got it.. \nif 'll' command output a soft link. Got it.. ",
    "bgwines": "@pcottle, thanks so much! Yeah; my use-case is the following: when switching between branches I want to open all the files that were \"relevant\" last time I was on it, so I can more easily resume that work. An approximation for that set of files is the files that were modified in the last commit on that branch, so I would run git show --name-only | fpp -c subl, then cmd-A, then enter. With this commit I can pass in the -a flag (I tried running it with -ni -ac subl, which would be even better because it cuts out another keystroke, but it didn't seem to work for some reason; perhaps I'm misunderstanding -ni).\nIn an ideal world I could add some sort of hook to get Sublime Text to recognize that I switched branches and have it run this automatically; I should look into that :P\n(I think Sublime Text has a concept of \"projects\" but I don't think it's perfectly suited to this workflow(?) based on preliminary fooling-around and this change is editor-agnostic anyway)\nHave a nice weekend!. @pcottle, thanks so much! Yeah; my use-case is the following: when switching between branches I want to open all the files that were \"relevant\" last time I was on it, so I can more easily resume that work. An approximation for that set of files is the files that were modified in the last commit on that branch, so I would run git show --name-only | fpp -c subl, then cmd-A, then enter. With this commit I can pass in the -a flag (I tried running it with -ni -ac subl, which would be even better because it cuts out another keystroke, but it didn't seem to work for some reason; perhaps I'm misunderstanding -ni).\nIn an ideal world I could add some sort of hook to get Sublime Text to recognize that I switched branches and have it run this automatically; I should look into that :P\n(I think Sublime Text has a concept of \"projects\" but I don't think it's perfectly suited to this workflow(?) based on preliminary fooling-around and this change is editor-agnostic anyway)\nHave a nice weekend!. "
}