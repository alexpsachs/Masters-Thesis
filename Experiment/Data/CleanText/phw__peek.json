{
    "phw": "I have not yet experienced this. Can you start Peek from a terminal and post the output of such a case?\n. Sorry for the long delay in answering. I am not able to reproduce this. Even longer videos work fine, and I have recorded a couple of demo sessions for my applications. But it might be related to #2.\n\nSeeing the ouput I am a little surprised that you use an external tool for recording. (I know nothing about this matter so I don't judge, I am just surprised).\n\nffmpeg in general does a very nice job, I just did not want to reinvent the wheel. But the code is structured in a way that I can plugin another recording backend and I think I will try you pixbuf suggestion. Also to see whether this helps with #2 . The AVI generated by ffmpeg is really larger than I think it should be.\n. > The script is around 150 lines I planed to propose it as a sample example for the Ruby-GNOME2 project. If you want I could send you a link (ruby is not that hard to understand and the script is simple)\nThat would be great. I am actually quite familiar with Ruby, even though my Ruby programming is a bit rusty :D I figured the timing would be the greatest issue.\n. My suspicion to all of these issues are memory restrictions. On Arch Linux by default /tmp will be mounted as a memory filesystem using your RAM. So temporary files will consume RAM, and Peek generates temporary files to hold the recording. If you are low on memory one solution would be to mount /tmp not in RAM but use your HDD or SSD for it.\n\nOther problem that i have is the performance, normally i haven't leaks in memory, but in the final, after take the empty gif, doesn't matter if reboot the laptop, i have memory leaks because peek.\n\nMemory leaks do not survive reboots :) But during run time the temporary files could be the issue. Peek should actually clean up all temporary files once it doesn't need them anymore, but maybe in case of the above error some files are left behind.\n. Closing this since I bieve this has improved in the current git master. I will make a new release soon. Please feel free to open new issues if you experience this with the latest code.. While refactoring the recorders to support multiple formats I found a race condition where Peek did not wait for ffmpeg to finish its job before passing this on to ImageMagick. This is very likely to be the root cause of this issue. Fix will be in the next release.. @SalahAdDin Not quite sure, but soon. Actually I want to get the things on https://github.com/phw/peek/milestone/1 finished and then I will release this as Peek 1.0, since it will include all the features I initially aimed for. Expect a release in the next 1 or 2 weeks, depending on how I find the time.. @SalahAdDin Release has been out for a few weeks: https://github.com/phw/peek/releases. Might be related to the fact that the screen recording uses temp files, and by default /tmp on Arch is a RAM disk. What approximate duration and area was your recording?\nI will look into this and see whether I can reduce the used storage.\n. Try to start Peek like this to use the tmp directory in your home (or set any other path you want): \nTMPDIR=$HOME/tmp peek\n. And if you don't want to have /tmp use your RAM at all but use the disk instead you need to disable tmpfs, see https://wiki.archlinux.org/index.php/Tmpfs for pointers on how to do this.\n. > @phw Is there a reason why you're using huffyuv output? It's ridiculously HUGE.\nNo, no particular reason other than that it worked. I had also a short try with using PNG output, but was not too satisfied with the output I got. But actually I did not invest any more time in trying to optimize this after I had first satisfactory quality results :) Thanks for the link, will definitely change this.\n. Ok, finally found the time to test this and use libx264rgb instead of huffyuv output. huffyuv is indeed ridiculously large. For comparison I recorded a roughly 900 x 500 pixel area, and I recorded about 500 frames. With huffyuv the temporary file was about 300 MB large, with libx264rgb only 3 MB. I think this should solve most RAM issues encountered, and everything else not fixed by this can still use the TMPDIR=$HOME/tmp peek workaround.. Sorry for the way too late reply :(\nI can't really tell you why your file is so big without more information. What exactly is \"big\" and \"long\"?\nIn general ImageMagick is used to convert the animation to GIF and it does a very decent job in minifying the frames: Each frame will only contain the data that differs from the one before.\nIn general for animated GIFs there are a few rules to follow for good results:\n- Use a low framerate. 15fps seems to work quite well for me\n- Avoid too much change. If there is heavy animation the frames will differ a lot\n- Avoid too many colors, since GIF is limited to a 256 color pallette. This one is not so much about file size but more about visual quality.\nOtherwise I'd need some real world comparison to tell you more, e.g. an animation you think is large and not so big and a comparable animation you recorded with peek which you consider too big.\n. Thanks @chteuchteu for doing this investigation. It is also my suspicion that Peek is already doing a nice job (thanks to imagemagick in this case) of reducing the file size. In the end Gif is just not well suited for doing large animations with a lot of changes, as the optimization completely depends on just having the differences in each frame. I lean toward closing this, but maybe we should have some kind of FAQ first :)\n. I have added a FAQ to the README. Looks like this is an issue with DRI3 on intel. Same flickering happens with other screen recording software, goes away immediately if switching to DRI2. I don't think there is anything that can be done in Peek.\n. Likely related to the issue reported at https://bbs.archlinux.org/viewtopic.php?id=211166 (see also the linked upstream bug).\nThat should at least fix the window position. As for the size i will switch to a mechanism that persists the recording window size / position instead of the main window. This way we will get consistent sizes even when somebody e.g. switches themes (with different border widths etc.).\n. Your window manager needs to support compositing in order for the cut-out area of the Peek window to work. I have no idea of Mate's default window manager, but according to https://wiki.archlinux.org/index.php/MATE#Enabling_compositing it should support compositing, but it is disabled by default. \nCan you verify whether enabling compositing solves the issue?\n. Glad this solved it for you :)\nSince I see no way to support Windows with \"holes\" in it with Gtk3 without composition and I have no plans to implement any workaround I close this issue.\n. Thanks for the info. I could maybe detect whether compositing is enabled or not and issue a warning in the application. And probably add short instructions for different desktop environment to the README\n. Recording without compositor will be enabled by https://github.com/phw/peek/pull/148. I am sorry, but Linux Mint 17.3 does only have Gtk 3.10 available, see http://packages.linuxmint.com/search.php?keyword=libgtk-3-0&release=rosa&section=any\nBut Peek requires at least Gtk 3.14 to work, and I won't invest time supporting older versions. I am myself not very familiar with Linux Mint (even though I used it for a short while a few years back), but you might be lucky finding a PPA for a newer Gtk build somewhere. Or you upgrade to the new version \n. Ca you post the output of:\napt search libgtk-3-0\n. I just realized Mint 17 might not have the new apt, so maybe paste the output from apt-cache show libgtk-3-0 and dpkg -s libgtk-3-0\n. Yes, looks like the version of Gtk from that ppa at https://launchpad.net/~gnome3-team/+archive/ubuntu/gnome3-staging/ is still only 3.12 for Ubuntu Trusty, which probably is what your Mint version is based on. I am not sure whether there is a reasonable way to install Gtk 3.14 or later, sorry.\n. Thanks a lot, merged. It would actually be really nice to have a PPA there up and running, but for now that deb I provide is easiest for me to maintain, since I don't use Ubuntu myself. But if somebody wants to setup a PPA and maintain it that would be awesome :)\n. No good idea about the Gnome top bar, since the Window can't move there. I had given some thought to the other use cases:\n1. Real full screen recording: IMHO Gif is not well suited for full screen recording, but I was thinking about enabling a full screen mode (e.g. hit F11 and use keyboard shortcuts to trigger the recording). Not very high priority though\n2. Recording area not reachable due to window borders and conrols: This is obviously a limitation of the UI, and one I thought about before doing Peek. However, I like the UI this way so much that this is a tradeoff I was willing to make. There are a few things I could do to reduce the impact of this, though:\n   a. Maybe make the position (top, bottom) of the recording button configurable or even auto adjust. The very first version used a bottom recording button, I liked it better at the top. But why not change it.\n   b. Have some recording mode where the controls will fade out\n. What's likely happening here is that the inner borders of the Peek Window get recorded as well. I have to look into this, any special theme you are using or the default?\nI already did some tweaking of the recording area, but maybe this is theme dependent sometimes and I have to add theme specific tweak. But maybe the new recording implementation proposed in #1 would also help here.\n. This is a Gtk styling issue. I had already looked into it in the past and did not find the cause. But I have now committed a fix that will fix this. It is kind of a workaround, since it removes the rounded borders from the headerbar, but interestingly this also removes the gray bars. Somehow the border caused by this on the Window was visible in the recording area.\nThe change is only active on Ubuntu Unity, since I could not reproduce it elsewhere. But if anybody experiences this somewhere else let me know and we can hopefully fix it there, too.. @probonopd Yes, I want to make a new release. Until then there is now a PPA, see https://github.com/phw/peek/issues/15#issuecomment-279704016\nLet me know if this works as expected.. Running a compositor is a requirement for this to work, sot this would have been my first guess. Also I found I had issues with screen capturing in virtual machines with a similar result, but this did actually not just affect Peek but other screen capturing tools as well.\nJust to be sure: When you run Peek the inner area is shown transparent? What happens, if you use ffmpeg and x11grab over the Peek window?\n. @cars10 Do you have a compositor running?\n. @dmsmidt, @jruz, @ibrahima and everybody else having issues clicking through the recording area please have a look at issue #52. Trying to find a common component here, so far my bet is on Compton. But just in cade, can you provide the Gtk version used in the linked issue?\n. Added FAQ with the compositing requirement explained.. Just a note that removing the need for a compositor is work in progress, see https://github.com/phw/peek/issues/147. Very strange, I have no good idea right now what's happening or how to debug it. Do you have any useful log output in journald?\n. Thanks all for digging into this. It makes perfect sense since Peek does not contain a dbus service file right now. My bad, will fix it. I just wonder why it never caused problems for me and seems to affect mostly Fedora.\n. Ok, now we got it. Yes, hard coded path is definitely a bad idea, needs to be handled by cmake.\n. @fb87 I have committed a fix, so the CMAKE_INSTALL_PREFIX is used in the service file during build.\n@heent Thanks for the SPEC file. But shouldn't the package install to /usr instead of /usr/local? You can specify the prefix for cmake with e.g. cmake -DCMAKE_INSTALL_PREFIX=/usr .\n. Nice idea, like it. The trick will be to make that as lean and simple as the rest of the interface. But I definitely think that would be a nice enhancement.\nI will however not be able to tackle this anytime soon, a few other things that need to be taken care of first. \n. I also like the Nautilus solution for its simplicity. One thing to keep in mind us that currently the Gif is created by imagemagick, which does remove redundant information from the frames. So the editing view should be shown before the final Gif is generated.\nIt would be best to tackle #1 before dealing with this.\n. The upcoming Peek 1.2 will extract all frames as PNG before processing it. This makes it easier to hook into this and implement this functionality. Probably it could just be added as a special post processor (which opens a new view).. Absolutely, I would very much like to see this. But at least at the moment it is unrealistic that I will be able to maintain the PPA and keep it up to date, so I would need some help here. If anybody can set this up it would be awesome :)\n. And the next version of Peek will give you a \"--version\" command line parameter, so you can easily compare your local version.\n. Thanks @probonopd for that AppImage. The recipe looks simple enough, and it is easy to run. Unfortunately that AppImage you made does not run on my Arch installation and upon executing it fails with:\n$ ./Peek-0.7.2.glibc2.14-x86_64.AppImage \n/tmp/.mount_GvkHNy/usr/bin/peek: symbol lookup error: /usr/lib/libpangoft2-1.0.so.0: undefined symbol: hb_buffer_set_cluster_level\nOtherwise I like the idea, also of building it automatically with travis. Would it be possible to also offer a 32 bit one (probably requires me to look into the 32 bit cross-compiling, something I have avoided so far). If you could provide a pull request for this it would be great.\nMy main issue with all the packaging is, that I don't want to do it myself and that it should make a minimum of effort when releasing, as I have problems finding the time for development anyway. Having a PPA would at least have been something I know how to do, but as I don't use Ubuntu myself it is hard to keep up with all different versions (I know, since I am kind of maintaining the PPA for another project and have to look into strange build errors frequently when new Ubuntu versions become available).\nSnappy images sound interesting, but they are to me (despite all claims) very Ubuntu specific. E.g. I don't see any other \"app store\" despite the Ubuntu one. If somebody wants to maintain such a package I am fine with it, but for the above reasons it will not be me.\nAnother option would be Flatpak, which I personally find more interesting than Snappy, not least because of its integration into Gnome Software.\n. > > Having a PPA would at least have been something I know how to do\n\nThen you can use something like the recipe I posted above to convert debs in the (ideally trusty or older) ppa to an AppImage mostly automatically.\n\nThat's also a possible plan for having the 32 bit build. It is probably easier to setup the PPA (getting 32 bit builds for free) then to add the cross compiling to the CMake build.\n\n@phw not 100% sure but undefined symbol: hb_buffer_set_cluster_level seems like an issue with your base system; see http://unix.stackexchange.com/questions/235012/problem-with-gtk-application-s\n\nI rather suspect something wrong with the libraries where this was build against, as I have very recent and usually unmodified versions of all the libraries on my system. My bet is often on some Debian / Ubuntu patching happening :)\nFrom your recipe it is not entirely clear to me how and from where the Peek binaries for the AppImage are obtained. Is it something specified when creating the final AppImage from the recipe?\n. I think that's the one mentioned by the user at:\nhttp://www.omgubuntu.co.uk/2016/08/peek-desktop-gif-screen-recorder-linux#comment-2894366969\nDoesn't look like he wants to manage it, but I could ask him to give me access or at least the configuration used. OBS would have the benefit that it could also build for other systems. On the other hand I found OBS to be a bit unpleasant to use the last time I tried.\n. Ok, we are getting somewhere :) I have finally started get this going, there is now a daily build PPA at:\nhttps://code.launchpad.net/~peek-developers/+archive/ubuntu/daily\nThe code is built using this recipe: https://code.launchpad.net/~peek-developers/+recipe/peek-daily\nThe packaging information is actually in an orphan branch in the main Peek git repository, see https://github.com/phw/peek/tree/debian-packaging\nI would appreciate if somebody could have a loom at this and give me some feedback, since it has been a very long time since I fiddled with Debian packaging and Launchpad PPAs, and the Launchpad UI is horrible.. @probonopd Trusty is currently failing due to GTK version, but I want to lower the required version anyway, see #54.\nIf that fixes the build also for Precise I will let it also build there. Otherwise I won't bother with Precise since it's end of life is imminent.. @probonopd I tried to get this work for Trust, but I have decided there will be no builds for trusty, Peek is using too many features that are not available in Gtk 3.10 and the glib and gio versions trusty provides and would require workarounds or getting disabled, and this will be too much for me to support.. Ok, this seems to work now. I have updated the README.\nThere are two PPAs now, one with daily builds and one for stable releases:\n\nhttps://code.launchpad.net/~peek-developers/+archive/ubuntu/daily\nhttps://code.launchpad.net/~peek-developers/+archive/ubuntu/stable. @oleerik Thanks for the hint, that would make sense. I already got the same report once, and could not find out what it was.\n\nOne option is to build the package with the makepkg --nocheck option. If using AUR helpers you have to look there if and how this can be done. Or edit the PKGBUILD and remove the check function.\nNot sure whether I can do something about the tests. Maybe only execute them when inside a X session?\n. As a final update: I have disabled the checks in the AUR package for now. I still don't understand what was happening, if I found out I will re-enable the checks again.\n. Thanks :D\n. Yes, makes sense.Will do this\n. Mint 17.3 is unsupported due to a too old Gtk version (minimum is Gtk 3.14). See also issue #8 \n. I gave to see how Gtk handles this and how it affects coordinates. But probably the new recording method mentioned in issue #1 will help here , too\n. This was fixed with pull request #22\n. I don't think I will remove this, it is one of the features I use a lot myself to access the just recorded files :) \nIt is a big redundant if you also have the open file manager option enabled, so maybe it could be disabled in this case. Or just make it a (probably hidden) option.\n. The issue I try to solve here is that most simple screenshot/screen cast utilities, such as the Gnome screenshot tool or similar, just stop after saving the file. But actually creating that screencast is just part of a larger workflow and I usually want to do something with the recorded file afterwards (edit it, share it, upload or copy it somewhere etc.)\nWith the notification that works pretty well for me, but I'm open for suggestions here as long as they don't involve blowing up Peek into something like Shutter :)\n. > It is a big redundant if you also have the open file manager option enabled, so maybe it could be disabled in this case.\nJust as a note: Showing the file manager and showing the notification is already mutual exclusive, so no confusing double notification here at least :)\n. My current idea is to have a status area inside the peek window as a semi transparent bar at the bottom of the window. This could be used to show the rendering progress as suggested in #58, but the actual notification would stay around after recording, showing the file name and allowing one to open the file manager or open the file directly in the preferred application or even more.\nMy proposed solution is something like this:\n\n\nAfter recording the whole recording area stays dark during post processing to indicate it is not yet ready for recording again. The notification bar area at the bottom shows the processed file name together with a progress indicator.\n\n\n\nAfter post processing the window is ready for recording again, but the semi transparent notification area at the bottom still shows the saved file name and an icon to open the file in the file manager. This could be expanded to open the file in the preferred application or share it (see e.g. #60). Once the next recording starts the notification bar is hidden again. You can also explicitly close the notification bar with the X on the right in case you want to get a better look at what is behind it (e.g. to exactly position the recording area again).\n\n\n\nThoughts?\n. The main issue I have with this is that it adds another button to the header bar, effectively increasing the minimum size the window can have. I want to avoid this if possible.\nPoints (b) and (d) can also be implemented with the proposed notification bar. Point (c) I don't quite understand, there is now no pop-up other than the file chooser and the proposed UI above also does not involve a pop-up.. I have committed a change that hides the button labels on small window sizes. This allows a smaller recording area, but probably also allows another small button without causing much issues.\nYour suggestion is probably the easier one to get all wanted functionality in, so I will probably just give it a try.. Ok, I've added the option to not show the notifications. The default is notifications enabled. Also enabling the \"Open file manager\" option will never show notifications, just as before.\nThe only case where notifications will be used no matter what is when you close Peek while it is still rendering. In this case it will use desktop notifications to inform the user that it continues rendering, and when it is finished.. No, there is no 1.2.2 release yet. You will have to use the unstable version from http://flatpak.uploadedlobster.com/peek-master.flatpakref\nI will do a release soon, maybe this weekend.. Thanks a lot, merged. I cannot test this right now, but looking good. I am a bit concerned about the exact border position, if it is off by only a single pixel the recording will show it. But I have to look into that issue anyway.\n. One of the most important things on my todo list here and my top personal annoyance when recording :) I hope to have time to get this done soon.\n. I have somewhat a solution for this. The current git master provides command line parameters to toggle the recording. So if Peek is already running you can run:\npeek --start\n\nto start recording in the running instance. Likewise you can stop with peek --stop. Most useful is maybe peek --toogle, which will start or stop recording based on the current state.\nThe idea is that you can bind those commands to a global kyboard shortcut inside your desktop environment, e.g. in Gnome you can configure shortcuts in the preferences.\nThe problem with adding shortcuts directly to Peek is, that normal application shortcuts won't help, since you normally don't have Peek focused when recording. So you need global shortcuts. Global shortcuts however require integration in each desktop environment. Or you use X directly, but with things like Wayland and Mir knocking on the door this is not a very future proof implementation. So either way, this is quite some work to support it everywhere, so I am not sure I will do that. At least not soon.. Started work on that. Keyboard shortcut is already working in latest master, it just needs a UI to configure it and maybe it needs to be disabled on Wayland because it should not work there anyway.\nWhat do you think is a suitable default shortcut? For now it is Ctrl+Alt+R, does that make sense or does it clash with any important default?. There is now a UI for changing the keyboard shortcut:\n\n. Yes, that's something I really should do :)\n. > Holy cow! You're quick :)\nNa, you are just lucky ;) The things I want to do for Peek pile up due to other commitments, but I wanted to get some things done for a new release again and this one was easy to do.\n. @lolilolicon Thanks for that, that could help. I cannot really reproduce the lagging here, but it could help :)\n. I think this should be fixed by fixing #2. Please reopen if this occurs even with the latest revision from git.. Thanks a lot, merged :)\nPlease note that you can also update translations via Transifex on https://www.transifex.com/phwolfer/peek/dashboard/\n. @kropp FYI, I have moved translations from Transifex to Weblate, see https://github.com/phw/peek/issues/36#issuecomment-261588876 for details\n. I definitely want to do this, but it requires re-architecting the recording feature (which I want to do anyway as it will fix a lot of issues). The current method was just the quickest way I could do it by using ffmpeg, and I cannot move the recording area dynamically there.\n. See https://github.com/phw/peek/issues/171#issuecomment-323610027. Yes, would be good to have. I have to check how this can be handled with cmake\n. Closing this as there is now a PPA for Ubuntu, which will fix most requests for this. For other cases this should be fixed by the packaging for different distributions. Great suggestion, I think this will really improve the user experience and should not be difficult to implement.\n. @pepa65: Can you open a new issue for this? Comments in long closed comments are likely to be forgotten. Thanks.. > ...the last hundreds of milliseconds (or seconds) at the end of the recording, because they often just contain moving the mouse to the \u201estop\u201c button.\nThat's definitely something annoying me seriously :) My preferred solution to this actually is to support keyboard shortcuts (see #23 ), but the crop option could be added additionally.\n. @srichakradhar Yes, and that keyboard shortcut can be configured in the preferences.\nGlobal keyboard shortcuts don't work for Wayland, but if the desktop environment / compositor allows configuring global shortcuts you can get the same functionality by binding a shortcut to peek --toggle. E.g. I have configured this on GNOME Wayland:\n\nI should document this somewhere :). I am not sure about the crop function, but having #14 would probably solve this. I am inclined to close this issue, but will think about #14 first a bit.. Yes, as of now Wayland is not supported. I definitely want to support Wayland, but screen recording on Wayland currently is a bit more difficult, as there  is no official Wayland screen recording API for now. There are however APIs provided by the Compositors. E.g. Weston provides one, and Gnome also has one, but I haven't looked at it yet.\n. @Nevax07 Thanks, but it doesn't really help here, sorry.\nThe issue here itself is well known, and there are actually two points to it:\n1. ffmpeg itself does not yet support taking screenshots in Wayland, so it is obvious this doesn't work. We can wait until ffmpeg supports it, but I have no idea whether they have any plans to do so. Also I want to move away from using ffmpeg for screen capturing.\n2. There is (for now) not the \"Wayland Screen Capture Protocol\". There have been talks about this, but for now the individual compositors have their own implementation. Gnome Shell provides a DBUS service for screen capturing, Weston also has some solution (which I haven't looked into, yet).\nSo my current plan actually is to support the Gnome service as a first step, as Gnome IMHO currently provides the best Wayland experience and people are already using it.\n. I have committed support for recording via the DBus service provided by Gnome Shell, which also works on Wayland. This new backend is used automatically when Gnome Shell is detected, but you can still use the ffmpeg backend if needed by starting peek with the new backend switch:\npeek --backend=ffmpeg\n\nThis is as far as I can currently go with Wayland support, and is of course limited to the Gnome implementation for now. Please open issues for other Wayland compositors if needed. For Mir see #39.. Just a heads up here that this is, despite my hopes yesterday, not fixed, and probably never will be. While I have recording working, the way Wayland works does not allow Peek to set the recording area position correctly. The whole idea of the Peek UI is that you can set the recording area by moving and resizing the window itself.\nOn Wayland this does not work, as there is intentionally no such thing as global window coordinates, so Peek as no way to figure out its position on the screen. The Peek model of selecting the recording area just does not work there. The only way this could be fixed would be if the compositor would provide a service to specify the recording position relative to the application window, and not an absolute position as the Gnome Shell screenshot/screencast services currently do.\nPlease note that it is absolutely possible to implement a screen recording app using the Gnome Shell serviceunder Wayland, but you have to use the options provided there. E.g. you can record fullscreen or ask the service to let the user select an area. But this is a completely different app, and the main reason I developed Peek was about the user interface I wanted to have as it is.\nIf any possibility to make the Peek model work on a Wayland compositor comes up in future I am more than happy to revisit this again, but for now this is not going anywhere. And I am maybe most disappointed by this since this is one of the last apps that keeps me from migrating to Wayland :(\nAlso there are indications the very same issue might come up on Mir, but I have not investigated this any further.. Ok, probably final word on this: There is a workaround \ud83d\ude04!\nWhen using Gnome Shell Wayland session you can use Peek to record the screen by using the latest git revision and  forcing Peek into launching as an X11 app:\nGDK_BACKEND=x11 peek\n\nBy this peek will not use the native Wayland backend but will run under XWayland instead, which provides native window coordinates. I will make this the default in the desktop file, as Peek is otherwise unusable on Gnome Shell with Wayland.. @Ads20000 The general screenshot issue has already been discussed, and at least for now there is no interest in supporting a screenshot/screencast protocol inside the core Wayland specification, but rather the individual compositors can implement something (and they do).\nAlso the second issue of not allowing absolute coordinates for applications is a well made decision for Wayland with quite a few advantages and will not change, see e.g. the discussion at https://lists.freedesktop.org/archives/wayland-devel/2015-September/024410.html \nIf we bring this up somewhere it should probably be addressed to the developers of the individual compositors, not sure how successful this will be. If somebody wants to start a discussion about this somewhere that's ok, but it won't be me as I won't have the time and energy such a discussion requires.\nSeriously XWayland will stick around for a while, since too much software is still X based.. No, won't help. Greenrecorder just uses the Gnome Shell DBus service for screen recording, which Peek also already supports. Without that recording on Wayland would not work at all. Note how Greenrecorder's features are restricted in Wayland. That is because they can only support the use cases as provided by the DBus service.\nThe main issue Peek has is the positioning of the recording area, a problem Greenrecorder doesn't have. See the Peek FAQs at https://github.com/phw/peek/blob/master/README.md#why-no-native-wayland-support. As a side note green-recorder is struggling with exactly the same positioning issue: https://github.com/green-project/green-recorder/issues/16. @fbruetting Interesting, I think it errors due to the height being set to 0. Now the height shouldn't make a problem at all, that part even works natively on Wayland. Could be a GTK bug.\nWhat versions of GTK and Gnome are this?. i added a separate issue for this on https://github.com/phw/peek/issues/98. Thanks a lot :)\nJust a note that you can also update translations on Transifex at https://www.transifex.com/phwolfer/peek . But I'm fine with pull requests, also\n. Just saw, you also translated on Transifex :) I will from time to time sync the translations, so no real need to have also a pull request. \nAnd thanks again\n. > BTW I'm not able to run peek in another language as English. Am I missing something? Other applications run just fine whit other env LANG locales, but peek doesn't.\nHave you installed to /usr/local? I noticed that I also cannot run it in any other language when I have installed it to /usr/local (the default for source installs), but installed to /usr it works just fine. I assumed this is some misconfiguration on my system, but haven't investigated any further.\n. Ok, looks like this was a issue with Peek not setting the locale path. I have just pushed a change https://github.com/phw/peek/commit/477fc672d9b7606854010383a835f94e0c82646c\nCan you try the current master and see whether this fixes the issue for you?\n. The desktop file is also put into /usr/local/share/applications/, and that's working for me just fine. Does your system not use it?\nAnother question regarding the Arabic version: Does the right-to-left layout work for you? I just tried to run Peek with an Arabic locale, and AFAIK GTK should enable the RTL layout, but it doesn't trigger.\n. That's looking good :)\nRegarding the missing .desktop file I can look into it. Can you open an issue here and give me the output of the build commands, especially make and make install? It should show the generation and installation of com.uploadedlobster.peek.desktop somewhere.\n. @bil-elmoussaoui I had tried using Peek with Transifex, but it didn't work as well as I wanted. I had txgh setup for a while, which does some basic syncing between Github and Transifex. But it is limited in this regard (mostly due to API limitations of Transifex). See the discussion at https://github.com/phw/peek/issues/36#issuecomment-256444715\nI favor Weblate here, its synchronization with Github is superb and it is a full two way sync (meaning I can still accept translation pull requests here and get them automatically synced back to weblate). If you want I can assist FeedReader on the localization part and setup either solution.. Definitely not a separate repository. Git has no very convenient support for this and it complicates things unnecessarily. What could be an option is to sync with a separate branch and occasionally merge back. But unless I would squash the commits on merging (which I don't want to) the individual commits will still be visible.\nIn the end I am quite happy with the translation commits. They are not too numerous and for me translation updates are just as important as any other change to the program code itself or other components which also are not part of the \"real code\" like build system or documentation.. Most translations in this dialog are predefined by Gtk, if they need to be changed it must be done upstream. The files are at https://git.gnome.org/browse/gtk+/tree/po\nRegarding the Window's title I am not sure what is happening, Peek does not explicitly set the direction. I will see if I can get my system configured for proper RTL layout so I can actually test it.\n. Probably also a Gtk issue. Can you say which desktop environment and which version of Gtk you are using?\nHere are two results from my systems:\n\nPeek on my Arch Linux box with Gnome 3.22 / Gtk 3.22 (this is using CSD, so does not have the issue in the title bar anyway)\n\nPeek on Ubuntu 16.04 with Unity and Gtk 3.18\nWhat's wrong on Unity is the alignment of the title, but the bilingual text looks fine. Also some spelling differences can be seen, the first screenshot should reflect the more or less current state of the translations in Gtk, does it fix the mistakes you see?\nAll in all I am probably going to close this, from the side of Peek everything seems to be ok and the issues encountered are either Gtk or desktop related.\n. Ok, I'm closing this. I did a last test on Debian 8 also with Xfce and Gtk 3.14 where I can reproduce it, but it is clearly a Gtk issue. That version of Gtk also does not turn around the arrow on the recording button :D, so Gtk is getting better and better with each release in regards to its RTL support.\n\n. For me the most important advantage is that it fully integrates with Git. That means any changes to the pot file will automatically be shown on Weblate, and all translations will automatically be committed and pushed back to git. This also sets the translator as the committer, which is also very nice to track contributions.\nI also find it easier to navigate and the quality checks are useful. The translation editor is maybe not as modern looking as Transifex', but also good to use.\nLet's see, my request to be hosted there still needs to be answered, and that can take a while :D\n. Thanks for the tip, looks great and easy enough to set up :+1: Will give it a try before switching to Weblate.\n. I have set up txgh and tested it a bit in both directions. looks good so far. If this turns out to be a viable solution I will keep it. Only downside I see so far is that it probably does not support translations changed in source (git) to be synced back to transifex, only pot file changes.\n. What I mean is that txgh currently supports the following two use cases:\n1. Translations are completed on Transifex => the translation will be pushed to GitHub\n2. A translation source file (the .pot file) is changed in Git (e.g. because new strings where added to the app) => the source file will be pushed to Transifex so new or changed strings are available for translation.\nWhat it does not support is the translations themselves being changed in Git (e.g. by a pull request). This will not trigger the translations gettings synced to Transifex. But that's no too bad, as I prefer getting the translations via Transifex anyway and if necessary I can push myself.\n. TL;DR: Go to https://hosted.weblate.org/projects/peek/ to translate Peek, stop using Transifex ;)\nLong version:\nTransifex has worked ok as a first solution, but it is lacking regarding integration with Git and Github. I had tried an intermediate solution using txgh, but the result was not satisfactory. @nijel from Weblate was kind enough and enabled the Peek project on Weblate, which gives us a couple of benefits:\n- Translations are automatically pushed into Git whenever new translations have been made\n- Changes to the translations in the Git repository are immediately shown in Weblate, as are changes to the POT file\n- Preview images, showing the actual usage of a string to the translator\n- Comprehensive quality checks\n- Prioritization of strings\n- Translations will be credited to the actual translator in Git\n- It is open source, actively developed and the developer is a great guy :)\nIf you want to continue translating Peek, please do so from now on on https://hosted.weblate.org/projects/peek/ . I know it means yet another account to create, but IMHO it is well worth it.\nI have set the Transifex project to private now. Existing translators still have access, and I will monitor the Transifex project for changes for a while, but in a few weeks I will completely shut it down.\nIf you have any questions or comments, please comment here or write me directly on ph.wolfer@gmail.com.\nThanks again to all who have translated so far,\nPhilipp\n. And we already have a first result, a completed Polish translation :)\nhttps://github.com/phw/peek/commit/85917bb500fa3755c7e11b70fc491cfaf1fba827 shows how a Weblate commit looks like.\n. Thanks for this. I had been thinking about this patch for a while, but I am hesitant to add an option for this. This setting is usually not needed, and the recent changes to the handling of temporary files and the reduction of file sizes seem to help. So I am going to close this for now, especially as I think the TMPDIR=/var/tmp peek solution will work for the rare cases someone needs this.. Thanks a lot :) Updates from transifex happen automatically\n. Definitly another thing to consider :) I haven't researched how Mir handles Screenahots, yet, but will do.\n. Does anybody here now how and if Mir handles screenshots? Is it possible to plug into this somehow, e.g. by a DBus service or something?. Ok, got it, there is a \"mirscreencast\" utility. Should have the options we need, see\nhttp://bazaar.launchpad.net/~mir-team/mir/development-branch/view/head:/src/utils/screencast.cpp#L470\nNow the annoying part is probably to actually set up Mir somehow to test :(. @gerboland Awesome to hear from you. Yes, the security issue is probably the harder thing to solve. I am a bit surprised that Gnome Shell offers a screenshot API on Wayland without any security related implementation, but they probably just wanted to get existing functionality going before tackling this.\nI commented on the launchpad bug. Given the recent annoucements around Mir and Unity I personally don't think Mir will stay around for the desktop. I will not invest any development time on this myself and will close this issue unless there is some sign that Mir will continue to be a thing for the desktop and there is some interest in Mir support for Peek.. Thanks a lot for this, I want to update the README anyway to add more installation instructions and a FAQ section, will take care of this then.\n. I have updated the README with Fedora instructions. Also thanks for sharing the ninja example, tried it and love it. Builds indeed faster. But I decided against adding it to the README in order to not complicate things. That's most likely a driver issue, I have seen similar in the past with screen recording and remote desktop software.\nIf you are using Intel graphics, try switching between UXA and SNA, see https://wiki.archlinux.org/index.php/intel_graphics#SNA_issues \n. Thanks :) When I defined the framerate boundaries I thought about this, but decided to keep it at 5 fps and see if somebody requests otherwise :D\n. Thanks again :) Will have to keep this option avialble when I change the recording method, but will take care of this when it comes\n. Thanks a lot for this, looks good :+1: \n. Yes, but this is already reported at #27 \ud83d\ude09\n. Thanks a lot for this, merged :) I have also synced it with Transifex, you should be able to join the language team there\n. @eson57 FYI, I have moved translations from Transifex to Weblate, see https://github.com/phw/peek/issues/36#issuecomment-261588876 for details\n. I am not a huge fan of error popups, but this surely needs some better handling, yes.. I added a dialog for showing error details. But not 100% finished, the displayed errors are rather basic for now. I keep this open as I want to show actual error output in case of commands called.. Sorry, I have no experience with Kali. What desktop environment and window manager is used here?\nWhy are you running it as root? Is the whole WM running as root? Does running it as a normal user make any difference?. Closing this as there is not enough information to pin this down. Feel free to re-open with additional details.. Do you mean when clicking into the recording area does not allow you to interact with the application behind Peek? This is absolutely supposed to work, if not it is a bug.\nAt issue #12 some people are reporting this does not work under i3. But it could also be related to the Gtk version used.\nWhat desktop environment and window manager are you using? Which version of Gtk?. @mephux Thanks a lot for this investigation, very much appreciated. But looks like there is not much I can do, if it needs probably be addressed in Gtk and/or i3\nTo be honest tiling window managers are not really the target for Peek. I am happy if it works there, but I probably won't invest time debugging and fixing it myself. I will accept patches, though :)\nClosing this for now, feel free to reopen if there is some chance we can get this fixed here.. I was playing with i3 and sway a bit and also tried it there (actually quite like i3, even though tiling window managers are not my thing in general). Found out this was reported to i3 a few days back: https://github.com/i3/i3/issues/2742 . Fact is that i3 does not support the shape extension, and this was left out somewhat intentional as it is not a typical use case for tiling window managers. Maybe they will consider implementing this :)\nOn Sway it is a different story. There is some click through behavior, but the clicks are triggered completely off and moving & resizing the peek window is nearly impossible (the entire handling of floating windows seems to be buggy, but sway is work in progress anyway). Also tracked for Awesome WM at https://github.com/awesomeWM/awesome/issues/1827. Yes, specifying the file output could make sense. Will see if I can add it.\n@seanmavley Not sure about that. I understand the idea here, but actually there are tools just for that. E.g. you can achieve scriptng like that with ffcast + ffmpeg. Does not really fit well into Peek, which really is supposed to be a GUI.. My first reaction on this was that I won't fix it, since I have no interest in doing workarounds for an old version that is hard to test for me. But the commit that raised the required version was https://github.com/phw/peek/commit/5ca016bb7185ebc438103de4753a38969e52d464 , and the reason stated here would be easy to work around. Not really a blocker.\nI will see if this really is the only place I used a Gtk 3.14 function. If it is I will try to get back to 3.10 as a minimum. If I provide you a test build, could you try it?. @csrgxtu Took me longer to find the time due to the year suddenly ending and everybody being surprised by it :)\nBut here we go, a special build just for you: https://drive.google.com/open?id=0B4YQhIuWC-gcRDc5Q09ySmthVW8\nCan you try whether this works for you?. Ok, I gave that a try, but it turns out to require more changes than I am comfortable with. Trusty is out of luck sorry.. People who want to use this on Ubuntu 14.04 \"Trusty\" could try using the development Snap package. I haven't tried this and don't know whether this is fully supported on Trusty, but give it a try:\nFirst install Snap with (requires trusty-updates repository to be enabled):\nsudo apt-get install snapd\n\nThen install Peek snap:\nsudo snap install peek --edge --devmode. Yes, you should :) This changed recently. @Kukanani First, please don't comment on old closed threads, when new issues arise just open a new issue. I don't look at closed threads usually.\n\nFor your issue: Snap handling is currently changing a lot as I want to get this finally released to the stable channel. At the moment please try installing with:\nsudo snap install peek --beta\n\nWould be great if you could leave feedback on https://github.com/phw/peek/issues/84 with your experience using it.. That's actually not a dialog created by Peek, but the way the desktop notification is presented to you. What desktop environment are you using? I have to check how much control I have over the way this dialog is shown.. There should be no dialog at all, just a desktop notification. Haven't used Unity for a long time, but I think it notifications show up in the upper right.\nThe fix should be rather easy by just removing the extra button I add to the notification. I think that's what's triggering the dialog to show.. Issue indeed was that Unity does not allow actions in desktop notifications, because the notifications are not clickable. As soon as there is any action it will show a dialog instead.\nFixed this by removing the action. A workaround is to enable \"Open in file manager\" in the options, this will open the file manager directly and will not show the notification at all.. I had actually been working on libav support already, but as I thought it would be straight forward at first it had some unexpected differences to ffmpeg. The idea was of course to support both.\nI will see if I can finish the work on it, but my problem is currently that I currently hardly find the time to do tasks that take a bit longer.. I have implemented libav support. Currently this is automatic, if ffmpeg is available that is used, avconv is second choice.\nI would be happy if somebody could test this. For Ubuntu there is now a daily built PPA at https://code.launchpad.net/~peek-developers/+archive/ubuntu/daily. @khurshid-alam Indeed, thanks for the heads up. Fixed and packages updated (currently building, should be read in a few minutes).. Sorry, missed this somehow. This sounds a lot like #12.\nDo you have compositing enabled? Please note that there is a known issue with i3 which will not allow you to ineract with the UI inside the recording area.. Closing this as there is not enough information to pin this down. My best guess is that compositing was not enabled, see #12 and https://github.com/phw/peek#the-recording-area-is-all-black-how-can-i-record-anything . Feel free to re-open with additional details if compositing does not solve the issue.. Not sure if a real progressbar is feasible, depends on whether I can get a meaningful progress from the file conversion. But the button already changes to a \"Rendering\u2026\" label while saving. Adding an animated spinner icon to this would probably improve it. . I had a quick look into this. Currently I am calling ImageMagick convert as a command. It has a `-monitor' option, but at least for GIF conversion it is not helpful for building a progress report, see https://gist.github.com/phw/500244f21235ad9239833d18d4b72007\nIt looks like it would be possible by using ImageMagick via its C API, see http://stackoverflow.com/questions/31666616/monitor-imagemagick-convert-progress-with-python\nThat's something I wanted to do anyway eventually, but I won't be able to look into this any time soon.. If somebody wants to work on this feel free to give it a go.. Just as an update: With the use of gifski (#212) there is a nice progress bar output on console we could use to gather progress details.. There is now at least a spinner during the processing, this will be in the 1.2.0 release. I will see if it is feasible to get progress information in a later release.\n\n. Not sure about that one. On the one hand I absolutely agree: After you have finished a record the next thing is to do something with the file. That's my main grief with for example Gnome Screenshots, which is quick and easy to use but after you have saved the file you are a bit lost. So I want Peek to support you in your whole workflow.\nOn the other hand I do not want to implement and maintain a huge list of sharing possibilities (FTP, SSH, Flickr, Twitter, or whatever other fancy things comes to your mind).\nSo far my solution to this is that Peek has the \"show in file manager\" option, which will open your file manager showing the file you just created, so you can immediately continue working with that. Also the save file dialog should actually be able to open FTP folders directly.. Just a heads up that you already can do this (at least on GNOME, you have to check if other environments also support toggling the fullscreen mode). To do so in GNOME:\n\nOpen GNOME Control Center, got to Keyboard settings and search for \"Toggle fullscreen mode\". If not defined, set a keyboard shortcut for it (I used Super+ F12)\nIn Peek make sure you have a keyboard shortcut set to start recording (default is Ctrl + Alt + r).\nUsing the configured keyboard shortcuts first Toggle Peek into fullscreen mode the start recording\nTo stop recording use Peek's keyboard shortcut again, get out of fullscreen again.\n\nOf course this is something Peek could do on its own. My idea currently is that we add a \"Fullscreen\" checkbox to the new format selection popover. If checked Peek will switch into full screen mode before starting to record, and it will automatically unfullscreen when recording stops (so you get the UI back). \nOf course this requires that Peek can set a global keyboard shortcut to stop recording. That means it is built with libkeybinder and the shortcut can be registered (doesn't conflict with any other global shortcut). I would just disable the fullscreen option if no keyboard shortcut is configured.. @slabua That's true, not sure what to do about this :(. Duplicate of #55\nThat's actually not a dialog created by Peek directly but the way the desktop notification is presented to you by the desktop environment. You are using Unity, too, right?. @hottwaj This second issue looks a lot like a broken setup, as ffmpeg cannot find some libraries.\nthe information given in the original report really does not help in finding the issue. Please try the latest release 0.9.1 and see if this fixes the issue. If start Peek from the command line and post the output here.. Closing this as there is not enough information to pin this down. Feel free to re-open with additional details if you can reproduce this with the latest release.. Best thing probably would be to start it from command line and look at the console output.\nOne suspicion, since you are on Ubuntu: Peek currently requires ffmpeg to be installed (the real thing), it does not work with avconv, see also #56. I have committed a fix for this. The new behavior will clip the recording area if Peek is partially outside the screen. That way you record exactly what you see.\nThis probably works best with a single monitor or multiple monitors of equal resolution that form a nice rectangular area. On my setup with a large and a small monitor I can still get some weird cases of recorded noise or no recording at all when placing peek on the edges, but this gets arbitrarily complex and I will leave it as is for now.. Yes, most likely a video driver  issue. Please see my answer at https://github.com/phw/peek/issues/42#issuecomment-258705832. I have no experience with Nvidia drivers and possible fixes.\nYou can try with other screen recording software if it makes a difference, maybe this gives us some clue.. Closing this as I don't think this is inside the issues I can fix. I have added this problem to the new FAQ section in the readme.. Do other apps use X-DesktopUtility? I would see not much sense in a category not in use.\n@Mailaender You added this in https://github.com/csmk/peek/commit/e7375ec16b514ca66f09a766dc088994d70d06dc, what was the exact reason for it.. Thanks for the input. Do we really need the sub category? I think Utilities is a rather fitting category given the simplistic nature of Peek, also the Gnome screenshot tool uses GTK;GNOME;Utility;X-GNOME-Utilities;\nAlso I can't find anything in the menu spec that a sub category is required, https://standards.freedesktop.org/menu-spec/latest/apas02.html just says it can be used. And looking through the desktop files on my system plenty specify just a main category.\nI mean Categories=GTK;GNOME;Graphics;2DGraphics; could be an option, but I tend toward dropping the sub category as I can't find anything fitting.. @Mailaender Will te openSUSE build accept something outside that list you linked, e.g. anything starting with \"X-\"?. Thanks for the suggestion, Robert. I had already thought about this when testing on Ubuntu.\nI honestly think that needing Ubuntu / Unity specific patches for everything is a pain in the ass. But given the popularity of Ubuntu I will probably look into this and make it work somehow :). Currently not possible, sorry. There is an open feature request #61 for this. Thanks, will try to remember to update this with new releases :). apt install should also work on newer Ubuntu / Debian releases, AFAIK it is going to replace apt-get. But apt-get maybe is more universal. Thanks a lot for this. I have now added a Ubuntu PPA which should simplify things.\nSee https://code.launchpad.net/~peek-developers/+archive/ubuntu/stable and https://code.launchpad.net/~peek-developers/+archive/ubuntu/daily. Thanks a lot to you all for the kind words :)\nI also take this as a reminder that I am behind in working on this tool, there are things that need to be done, I just have to find the time for it :). No particular reason other than GIF is still more universal usable and it is what I needed. Having said that I want to make MP4 an option. Haven't thought about WEBM yet, but I don't see a reason against it.\nBut just to be clear: the focus of Peek is definitely in making short screen recordings of parts of the screen, and the support for proper video formats won't mean that changes :) I have no intentions of turning Peek into a feature packed general purpose screen recording solution.. I took the freedom to update the title of this feature request, I hope you don't mind.. I have committed WebM support. Not yet sure about MP4, but if needed it should be easy to add now.. It took me a while to see the issue, but does the Peek window in this case automatically unmaximize? Very strange, cannot reproduce. I will try if I can reproduce on Ubuntu Unity.. I an reproduce on Ubuntu 16.04 with Unity. Had not the time to do any serious debugging yet, and also not sure what causes it so far :( Will keep you updated.. I have a suspicion: Once the recording starts I try to freeze the window size, so you cannot accidentally resize your window. I suspect this goes wrong in the full screen case on Unity. Have to check whether I can detect this and workaround it.. I think I found a fix for this, at least I cannot reproduce it anymore. Would be great if you could test with the daily PPA. Exactly that. It is currently still building the new packages, so give it a few minutes. You can see the current status on  https://code.launchpad.net/~peek-developers/+recipe/peek-daily. You are welcome, I am glad this is fixed. The imagemagick convert command is a dependency, I think that is missing for you. Try if installing imagemagick helps to solve this.. Thanks for letting me know. As you are using Gnome there is good news: the current development version can be run under a Gnome Wayland session, it is using the built-in screen recording of Gnome Shell. The only requirement is that you have to run it as an X app with XWayland, fully native Wayland is not yet possible.. This has already been reported in #55 and is fixed in master, I just haven't come around to make a proper release.\nThis is actually some Ubuntu Unity specific notification stupidity, where the notification turns into a dialog box as soon as actions are involved.. Really depends. If you want a bottom panel and want to have a distribution that is technical close to Ubuntu, maybe give Linux Mint a try with the Cinnamon desktop. I used it for a while after my Ubuntu times and actually liked the interface. Downside for me was, that they depend on Ubuntu packages, which depends on Debian packages and all three do their share of patching. So if you encounter a bug it can be hard to see who is to blame (and it is often not upstream).\nPersonally I use Arch Linux with the Gnome 3 desktop. Reasons for me are the up-to-date packages, no or minimal patching of upstream releases and full control over what gets installed and which service activated. Downside is probably a higher technical involvement required.\nIf I wouldn't be using Arch I would likely give Fedora a try. Have not really used it myself, but heard much good.\nAlso I like and use Gnome 3, but if you dislike mostly empty top panels that cannot be moved to the bottom probably not for you \ud83d\ude09 On the other hand there are plenty of extensions for Gnome 3 that allow you to fill that panel with useful and useless stuff.. This is already implemented. If it is not working for you I am not sure I can do something.\nWhat desktop environment / window manager and what version of Gtk are you using?\nIt is already known that this does not work in all window managers, notably i3 and awesome. See issue #52. Yes, I would love to see this packaged in Debian :) So if somebody can make this happens this would be awesome.. Just a heads up that I have released Peek 0.9 and updated the Debian build files in https://github.com/phw/peek/tree/debian-packaging, so this is probably the right time to do more packaging.\nAlso some review of the Debian packaging files by a real packager would be good, my Debian packaging fu is not very good. Given that I have just \"stolen\" the packaging from http://main.mepis-deb.org/mx/testrepo/pool/test/p/peek/ and done only little changes they are probably good, though :). Just a heads up that Peek 1.0 is out. Dependencies changed a bit, it now need libkeybinder3 to build and run. Also I added gstreamer-plugins as recommended to the Ubuntu packages as they are needed when using the new native Gnome Shell recording.\nsee https://github.com/phw/peek/blob/debian-packaging/debian/control\n. @kretcheu I recently added the debian control files to the main repo, due to #144 (package for Elementary OS) . Now I know this is discouraged as it makes it harder for Debian to override those files and package. How bad is it really? As #144 is currently going nowhere I could remove it again, but later it could be required to add it again. What is your suggestion?. @kretchau Thanks for your opinion. Having a completely separate directory wouldn't work for Elementary, as they have very strict and limited technical limitations and expect a debian sub-directory on the top level. But I will just remove that again for now, since I can't use the Elementary build service anyway as of now.. @kretcheu I have put out a new release 1.1.0 ready for packaging :). @kretcheu Ping?. @hosiet Very cool, thanks a lot. Let me know if there is anything that needs tweaking on my side. @hosiet FYI, I plan to do a new release later this week or early next week, so all your changes will be available there. Ping me, if there is anything else I should tweak.\nOne thing in your packaging: You can remove the Suggest: imagemagick after the new release, all ImageMagick related code is finally gone for good.. That's very strange indeed. Looks a bit like #51, but I cannot reproduce (also on Arch).\nSome ideas to debug:\n\nTry using the latest git revision of Peek, I changed the recording a bit.\nTry recording directly with ffmpeg, does this produce a working video?\nIt could be a video driver issue, what are you using?\nDoes other screen recording work?\nIs this on a physical machine or inside a VM?. I have released version 0.9 and update the AUR package, so this is maybe the easiest way to verify whether this newer version works or not. Otherwise some more info as asked above could probably help to pint this down. Ok, strange anyway. My best bet is still on the Intel driver. You could try switching between UXA and SNA acceleration methods (see the Arch wiki), change from whatever you are using now to the other option and see if this helps. In my experience this often helps in issues like that.\n\nAnother option would be to install the latest master from Peek. I have added a new gnome-shell backend which will use the screen recording provided by Gnome Shell via DBus. Maybe that works better (~~and it will also work on a Gnome Wayland session~~ Update: no, it doesn't completely work on Wayland, see https://github.com/phw/peek/issues/33#issuecomment-281613072).. I am closing this, feel free to reopen if you have more information.. Ok, obviously under Wayland it is not even possible to get absolute Window coordinates, see https://lists.freedesktop.org/archives/wayland-devel/2015-September/024410.html\nThat's a bummer and probably prevents peek from working on Wayland at all. I knew about the limitations that you cannot arbitrarily position windows, but had hoped you can at least get the coordinates.. So what would be needed is a way to request a screen cast relative to the current Window position or something like that. Until this comes around there is nothing I can do.. Agreed, wanted to add one anyway. Just have to do a nice recording again.\nHope you enjoy Peek and it fits your needs.. Thanks a lot. @Bajoja Can you review my changes on https://github.com/phw/peek/commit/1cbd135b7f2d3d94c36b82836dcc8b9c374ddc43#diff-2158217562061121145ed8bd1cae555a?\nCurrent git version requires libkeybinder3 library and I added it to the spec file as I thought it probably should be added, but no experience with building for Fedora :). Thanks for checking. @Bajoja Just noticed I broke the icon name, the line\n%{_datadir}/icons/hicolor/*/apps/com.uploadedlobster.peek.%{name}.png\n\nShould of course not include .peek :) Sorry for that, will fix here.\n. Thanks :) Already fixed here https://github.com/phw/peek/commit/9d469320eb8014a16f5a35c7f24fcbefe40f03e0\nBut of course let me know of any other changes required, as I did al the canges without actually testing.. Can you start Peek from command line and post the entire output here?. Ok, that at east shows the video was recorded and the problem is after that. \nFrom the look of it it seems to be the issue I thought I fixed. Just to be sure you are using the latest daily: Do you have the \"output format\" option in the preferences (where you can select between GIF an WebM)? Can you post the output of dpkg -s peek?. Ok, looking good. Maybe there is still some timing issue with saving. In theory it should wait until rendering finishes before doing the actual saving. I will try to reproduce.. I have a suspicion, you are using libav-tools, right? I had some trouble determining the exit status of libav-tools, I think this breaks. I will try to reproduce, but it will take some time as I don't have access to my machine with libav-tools right now.. I have added some debug output to track this down, as I can neither reproduce it nor do I have a good idea what this could be. Can you install the latest from the daily build PPA and run Peek from command line with \nG_MESSAGES_DEBUG=all peek\n\nThen try to reproduce the issue and give me the complete output of that.\nI also tried reproducing it. There is one way I can get a 0 byte file, that is starting and stopping quickly again (as the recording process needs a short time to actually capture a first frame, but we are talking a fraction of a second here). Have to think what I do about this, but for you this is happening when recording more than 5 seconds, so clearly a different issue.. Tried again, looked at the code. I absolutely cannot reproduce this here, tested on Ubuntu 16.04 and my Arch Linux box. Given that Ubuntu 17.04 is not even released yet it maybe is just a glitch there.\nDefinitely not a blocker. I leave this open, but I really need more info to fix this.. @xerada Please see https://github.com/phw/peek/issues/112 for discussion and workaround\nI am closing this, as the original issue probably was fixed by previous patches and all follow up comments sound like duplicates or variations of #112. Imagesize is now down to about 66 MB and everything is running in devmode.\nIf using strict mode the app just hangs when stopping the recording without any output, post processing does not start and there is not file chooser shown. Also no output in /var/log/syslog . Not sure what is happening or how to debug.. If somebody wants to try snap packages are built regularly at https://code.launchpad.net/~phw/+snap/peek-daily. I have enabled publishing to the store into edge, should be available once the current build is finished :) \nFor what is missing I am unsure. If I run in strict mode if you click stop it just never shows the save dialog and never starts the post processing. And absolutely no output, not even something about missing permissions in syslog. I had no time to look into this in more detail so far, but I just build it using this snapcraft.yaml which does not yet add any permissions.\n@popey: When you say you tested the app and it works, it was also in devmode, right?\n\nGreat that you're trying to support Flatpak, AppImage, and Snap!\n\nI have no strict preferences, but I see how important it is to let users access the app as easy as possible :) I gave this kind of a race with the goal to support at least one of those for Peek 1.0. Flatpak made it, Snap had some troubles just before the finishing line and AppImage still confuses me ;)\n. Looks like this will take some time until it hits the store. There is a manual review required for some reason. I will keep you updated.. @popey Sorry, we probably had bad timing, as I just had pushed some unrelated changes and the build triggered again. At least I got both the unblock and the review reqiured mails. I have now pushed another change from which I think it will not trigger the review. I think the dbus slot I added for testing is unneeded but causes the review, see https://github.com/phw/peek/commit/50af73a0d1572a78e588b72b06776068f80b2b1f. Published on Edge. I have not yet tested it myself.. I have it locally almost running in strict mode. Only thing currently missing is opening the file manager after saving. This requires access to the DBus interface \"org.freedesktop.FileManager1\", but I have no idea how to grant this. Documentation is very sparse on this.. Accessing arbitrary DBus services does not seem to be possible right now. Also found not other way to launch the file manager from within a snap. snapd-xdg-open looked promising at first, but it does not allow file:// scheme. Also it requires installation on the host side, since it is a snapd plugin.\nIn general the only way to solve this seems to be to have a snapd plugin which handles this. With such a plugin the \"org.freedesktop.FileManager1\" DBus service could be made accessible. But in any way, this always requires the user to install a separate package on the host beside the snap for Peek.\nIt does definitely not make sense to provide a plugin just for Peek, then the user could just install Peek from PPA. Some more generic solution is needed. Right now I probably have to disable the \"launch file manager\" option for the snap version.. @popeye I find that interesting, because I get similar feedback a lot. For me this is a major annoyance with most screenshot/-cast apps as I want to use the file usually directly after saving :). I had some quick talk on IRC. The current view on this from snapd is to only provide access to selected DBus services that have been security reviewed. For this reason alone I don't see much chance to get support for org.gnome.Shell.Screencast (as it currently does not require any user interaction to give permission to record the screen, and it is also not used on Ubuntu).\nI have requested some way to open the file manager at https://bugs.launchpad.net/snapd/+bug/1672652\nOtherwise this snap somewhat works, but I would have to disable the \"open in file manager\" feature for now before turning on strict mode. But I honestly don't want to implement any workarounds for Snap and invest too much time getting this to run, so I will leave it as is for now. Snap just does not seem to be ready for prime time at the moment. If someone wants to use Peek via Snap it works fine in devmode. New builds will be pushed to the edge channel and, I will probably add a note in the README on how to install and run those. . > also ideally we'd want Peek working on Ubuntu Next (all-Snappy, Unity8, and Mir)\nMir is a completely different story, I wouldn't hold my breath for this :) But good point is they at least want to support screenshot / screen recording  capabilities for third-party apps. See https://github.com/phw/peek/issues/39 for details.\n\ndoes the Edge build publish the master branch or the released version?\n\nCurrently Launchpad automatically builds the latest master and publishes it to next. When there is a new release I can also publish this to beta as stable.\n\nMaybe perhaps you could then recommend the Snap command-line install instead of the PPA because everything is working and Snaps are less risky when it comes to dependencies and update silently.\n\nPPA will likely stay the recommended default as long as devmode is required. The PPA installed version is easier to support for me for now, with Snap specific issues harder to replicate and debug. But I will add the snap install instructions.. Just if you wondered why there was no update to the package dispite code changes: The package is in manual review mode again, don't know how long that will take.\nReason is, that the package exports the peek DBus service, and exporting a DBus service triggers the manual review. This is not required for devmode, but will be required (or at least desirable) in strict mode. I will wait a bit for the review to happen.. > This is incorrect. Snaps do auto refresh, but you can also force refresh with \"snap refresh\".\nThe --devmode prevents the auto refresh. Just running snap refresh does nothing, and snap refresh peek gives a warning about devmode. You really have to run snap refresh peek --devmode to update.. I have now changed the package to use classic confinement. In theory this should allow us to get a fully functional package, that is distributable in the stable or beta channels and can auto-update.\nThis once again requires a manual review. @popey Can I bug you about this once more :). Yes, let's wait for some feedback \ud83d\udc4d . Ok, so I think the best way forward for now is using the classic confinement. This way I will be able to release this as a stable application where users get proper updates and can use the full functionality of the app. @evandandrea contacted me regarding the review for the store and I just answered him with some details.\nI am sure snap will continue to gain more possibilities, and I am more than happy to update the snap to get access to the missing functionality (currently this is opening the file manager on the location of the saved file somehow, and accessing org.gnome.Shell.Screencast on GNOME Shell in order to record in a Wayland session.\n@niemeyer @popey Some general Feedback on my experience with Snap: For me getting the snap to this point was more troublesome then I had originally imagined.\n\n\nFor one I still struggle finding some details in the documentation on snapcraft.io. Mostly I have trouble finding the list of available slots, it is somewhat well hidden in a link on one of the documentation pages. And in general the whole plugs / slots system is not explained in detail. Also I read about the gnome platform app being available soon, but could not find any details on how such a platform snap would be used.\n\n\nTesting was difficult for me, as I don't use Ubuntu. Did most of the initial work in a Virtual Machine, which was not that comfortable for me to use. Never managed to get the snapcraft utility to run with docker.\n\n\nHaving only the option between strict and classic assignment is a bit strange. Basically it is an all or nothing approach, whereas e.g. in Flatpak you can punch holes to the parts you need (e.g. give access to a specific DBus service). I understand where you are aiming at, and the end result will be great, but in the meantime it can be hard to package legacy apps or apps with special requirements (and the whole screencasting / screenshooting things seems to be a rather unsolved issue in the post-X era with Wayland and sandboxing).\n\n\nStill I think Snap is a good thing to move and I am quite happy to support it here. By the way, build.snapcraft.io is fantastic.. > That's exactly what interfaces are for in snaps...\nBut to my understanding an interface is provided by the host system, there is no way for me to implement an interface which gets shipped as part of my snap, right? So how would I go about getting my Peek Snap access e.g. org.gnome.Shell.Screencast?. @niemeyer Thanks a lot for the details, but I was aware of most of it already. I will watch this list and switch to proper interfaces for the missing functionality once available. Currently I don't have the time to look into this myself to provide patches for what I need, especially as those cases are probably difficult to get right with security.\n. On other news: Peek is now up with classic confinement and thus installable with the --classic flag and not devmode, and in theory this would enable me to move it to a stable channel. In practice I cannot install it at all on my Arch system as \"classic confinement is not yet supported on your distribution\" :( No matter how I turn this, some problem pops up :( There is a list of which distribution supports classic confinement. The ones missing it are Fedora, CentOS and Arch. One could argue that Fedora users are better of with Flatpak, and Arch users will probably stick more to native packages.\nI will test with Ubuntu next, and if everything is fine proceed with publishing the Peek Snap in a stable channel.. @sziberov sudo snap install peek --edge --classic should be correct now (the docs need updating). Not sure what this error means. So far I only tested on my Ubuntu 16.04 64bit VM without issues. But this sounds more like a general snap support question to me.. Just as a reminder to myself: Found out snapd 2.27 should allow users to enable classic confinement on distributions not officially supporting it (e.g. Arch and Fedora, see my comment above). This will help me test this. See https://forum.snapcraft.io/t/install-classic-on-arch/1576 for details.. @sziberov I could reproduce and rebuilt the package with strict confinement again.\nCan you test installing peek with\nsudo snap install peek --beta\n\nIf this works well (it does for me) I will promote this to stable.\nNote that my solution now for the limitations is that I completely disable gnome-shell recorder and file manager integration in the snap build. That just can't work right now.\nI am also going to test using the gnome platform snap, that probably will reduce the snap size further.. @sziberov Coul well be that the package was not yet updated when you tried. Also i386 builds are sometimes a bit behind, since they are built on launchpad and the other packages on snapcraft.io, as the latter does not do i386 builds.\nAnd I changed to beta so people can test the build I think is stable and I can mess around with edge :)\n@Ads20000 Thanks for that thread, will try this. Is there some actual documentation on how to use the gnome-platform snap? So far it is mostly trial and error on my part based on the infos provided at https://wiki.ubuntu.com/snapcraft/parts. Ok, new status on the edge channel :) I have finally used the gnome-3.24-platform content snap, brings down the size to ~58 MB (still much, not sure I miss something). But it requires additional command line foo to get running, complete install involves:\nsudo snap install peek --edge\nsudo snap install gnome-3-24\nsudo snap connect peek:gnome-3-24-platform gnome-3-24:gnome-3-24-platform\n\nCould not figure out how to use the gnome-3-26-1604 content snap instead that @Ads20000  mentioned, as the desktop-gnome-platform part seems to rely on 3.24. As I understand gnome-3-26-1604 would allow auto connecting, which at least would remove the third command from above. Not sure about installing the content snap itself, but I guess this is not yet automated.\nNot happy with so many commands to be run :(. I asked on the forum topic about using gnome-3-26-1604 . Once this is solved I would be more or less happy with it (not 100%, as I had to cut down features to make it work). My plan is to definitely release a stable snap together with the next Peek release.. I have releases Peek 1.1.0 and with it finally a stable Snap package. The newest install instructons are:\nsudo snap install gnome-3-26-1604\nsudo snap install peek\n\nThe README has been updated. i386 package is currently building and will be available later.\nThanks to everybody who provided support here. This was harder than expected, but with all your help I got it working in the end :). > Aside: support for i386 on https://build.snapcraft.io is coming.\nJust saw i386 builds on snapcraft.io are working snce recently :D Great. This is now basically possible, I added a flatpak.json, for which a flatpak image can be built with something like this:\nflatpak-builder --repo=/home/phw/flatpak-repo com.uploadedlobster.peek flatpak.json --force-clean\n\nYou can also generate a flatpak bundle with:\nflatpak build-bundle ~/flatpak-repo peek.flatpak com.uploadedlobster.peek\n\nThings that do not yet work:\n\nNotifications: According to https://github.com/flatpak/flatpak/issues/81 handled by the portal. Not sure how this actually should work, but I see no notification here. Also tried adding --talk-name=org.gtk.Notifications to the flatpak.json without success.\nThe option to open the file manager does not work. No good idea how to solve this, inside the sandbox all the appinfo magic Peek does at https://github.com/phw/peek/blob/master/src/desktop-integration.vala#L13 does not give results. Notification issue is solved, this requires xdg-desktop-portal to be installed (together with a suitable backend, xdg-desktop-portal-gtk currently).. Issue of launching the file manager also solved by using org.freedesktop.FileManager1 . I start to like DBus, especially as Vala makes it so easy to use.. Added build instructions at https://github.com/phw/peek/blob/master/BUILD_NOTES.md#flatpak\n\nThe Flatpak version is working fine now, with all functionality supported. I will probably just provide a downloadable .flatpak standalone package for the next release and bother with setting up a proper repository later.. This is now completed and we have a repository, see https://github.com/phw/peek#flatpak . The stable branch is not yet filled, but will be once I release Peek 1.0 in the next days.. Thanks for reporting. Could you try if other screen recording software suffers from the same issue?\nIn the end Peek is just using ffmpeg to do the recording, and issues like this are often driver related in which case there is not much I can do :(. Ok. I would love to offer you a workaround, but I have no experience with the Nvidia driver and the available settings and I also can't test it.\nTwo things I found that could be related:\nhttp://unix.stackexchange.com/questions/156155/x11grab-flickers-in-opengl-draw-areas\nhttp://askubuntu.com/questions/263996/fixing-the-nvidia-graphics-screen-flicker-issue\nI will leave this issue open for a while, maybe somebody else has some idea on this.. @gort818 Thanks, I added this info the FAQs.\n@BrainAxe It would be cool if you could try if this also works for you.. @bil-elmoussaoui That would be great, I like your work on Terminix. What do you need from my side? My idea is to keep it simple. Have an animation showing Peek, a quick feature overview, installation instructions and the FAQ section from the README on a separate page.\n@darim92 Cool :) I am not sure how and if it makes sense to share the work, but maybe bil-elmoussaoui can say how you can assist him.. Just created the repository and invited you: https://github.com/phw/peek-website. @bil-elmoussaoui No problem, I am pretty busy myself right now. Looking forward to the final result :) Thanks again. @ferreiradaselva There actually is one, but @bil-elmoussaoui is working on a much better site, and we have placed it in a separate repository: https://github.com/phw/peek-website/tree/beta\nUnfortunately due to both Bilal and myself struggling for finding the time this is taking some time :). I tend to like the way of building it with Travis CI. This might be interesting:\nMaybe interesting: https://github.com/probonopd/AppImageKit/wiki/Docker-Hub-Travis-CI-Workflow. One thing that concerns me a bit is the fact that the app image built with the Peek.yml recipe from above (built on Ubuntu 16.04) does not run on my arch linux due to missing symbols in libpangoft2:\n./Peek-0.9.1.glibc2.14-x86_64.AppImage: symbol lookup error: /usr/lib/libpangoft2-1.0.so.0: undefined symbol: hb_buffer_set_cluster_level\n\n@probonopd: Are there some best practices on how to build AppImages that are compatible with different Linux distributions as good as possible?. Loading the schema from relative path is already in the code, but I think disabled in release build. I can take care of that.\nAvconv is a fork of ffmpeg, you need either one or another. Ubuntu had for a while switched to avconv, but they have since changed back. There is a compatibility package libav-tools, but it just is a wrapper for ffmpeg calls.\nI can look into building a minimal ffmpeg, but building ffmpeg is a bit of a mess and minimizing it often is a bit trial and error with all the dependencies, so this will quickly take some time.. For starting the binaries I would suggest just to set PATH, we could have a small wrapper to start the Peek executable if necessary.. Better the other way round if possible, ffmpeg and no avconv. convert from Imagemagick is also needed, it is used to generate a optimized GIF afterwards.. Peek is already loading the settings schema in ./data/schemas/ relative to current working directory. Does this help?. Ok, got it. Will change :). I played around with ffmpeg and imagemagick while exploring flatpaks, see https://github.com/phw/peek/blob/master/flatpak.json . Both give quite small results and the built time is really ok.. I hope so :) Not yet quite sure how you want this to work, where should I place the binaries?. @probonopd Ok, we are probably getting somewhere :) I took your changes to travis.yml, put them into the build-appimnage branch and added the build scripts for ImageMagick and ffmpeg. I think I also understood things good enough to get them running. \nI am a bit confused by linuxdeployqt (it looks so Qt specific), but it seems to work.\nThe build ran at https://travis-ci.org/phw/peek/builds/211031336 and produced an appimage. It is even running for me (I have the settings schema and dependencies installed, so this is not failing for me). But I get GTK theme parsing errors. \nNext step will be to fix the relative path issues for executables, gsettings and ImageMagick config. I think I will add a launcher script that sets up a sane environment to run in. That's cleaner then messing around in the code to hack this into somehow for this specific environment, don't want many workarounds there.. @probonopd Sorry, never forgot about this, but had to find the time to tackle this again. The issue you had above was kinda expected, as I had said above the paths were not yet set correctly for everything inside the AppImage. You have to set the proper environment variables for this to work.\nI have now setup the build on OpenSUSE's OBS and hopefully setup the environment properly: https://build.opensuse.org/package/show/home:phiwo:peek/peek\nResult is looking good, but so far I have only tested it on my Arch system. Need to test it in other distros. Latest AppImages can be downloaded on https://download.opensuse.org/repositories/home:/phiwo:/peek/AppImage/\nCould you give the appimage.yml file a quick review?. Works well on Ubuntu 16.04 and Fedora 25. Only thing I had to do is to force the theme used to Adwaita, as the system theme often is not usable unless the Gtk version of the host matches the bundled one. I could not bundle Gtk and expect it on the host, but this brings other issues. I'm actually ok with forcing the theme in this situation.. Thanks for the analysis and all the support. I though I had it nearly running, but copying in libgio ended up copying much more libraries, including libglib and libpango, which failed with missing configuration and failed loading fonts. Also icons are missing all over the place.\nIn addition using the SUSE libs now required libselinux, which broke things for Arch. At this point I will just give up on Ubuntu Trusty, not worth the trouble. I know those users can run the Snap. I am more than happy that the AppImage is running on newer distributions.\nOnly sad point for me is that AppImageHub won't work this way. Any plans here for supporting AppImages that run only on newer than Trusty?. > Yes, once Trusty is no longer a supported (by the vendor) version.\nThat's still a while :) But Trusty makes in general sense as a target for AppImage.\nBtw, now that I have managed to build a working AppImage I am not sure I prefer AppImage or Flatpak, both from a user's and developer's point of view. Both have some advantages.\nBut I found the start into AppImage hard. It's not that the documentation is missing something, it's more how it is structured. Both Flatpak and Snappy emphasize strongly on the tooling, so you quickly see how you can use snapcraft / flatpak-builder to get things built.\nAppImage's documentation focuses more on the structure and the available options. You are told to get a proper AppDir, but than you have to search what an AppDir is, how it is structured and what tools exist to create it. Likewise it tells you to gather binaries somehow, whereas Snappy / Flatpak quickly show you how to package libraries and support the common build tools out of the box. The lack of concrete instructions makes the entry rather hard.\nIt also does not seem the tooling is lacking much in general. There are the YML recipes used by OBS, there is the OBS support, there are handy tools like linuxdeployqt (which despite its Qt focus is useful as a general purpose library gatherer / bundler, but that's not very clear, I would have never touched this tool if you hadn't done so in your first attempt), there is sandboxing. But if you don't know anything about AppImage you are a bit lost between all those options :). Just to get some perspective: How large is the area you are recording and what frame rate have you set?\nAlso I assume $HOME/tmp does exist and is not itself on a RAM disk. Some people also suggest to set MAGICK_TMPDIR in addition to TMPDIR, even though the last should also be picked up by Imagemagick, but you might want to try it ( see also http://www.imagemagick.org/discourse-server/viewtopic.php?t=7664). Ok, yes. Can easily reproduce with such a large screen area, my RAM usage of the convert process even got as high as 9 GB (recorded for a bit more than 15 seconds with 15fps). The end result is also 18MB in size.\nIn the end GIF is not very well suited for large recordings, so reducing the framerate and having a smaller recording area is probably advisable, as a 18MB GIF is not really useful in many cases. So my suggestion for this kind of recording is to use the new option to use WebM instead of GIF (which will directly record to WebM, without any conversion process afterwards).\nHaving said this, there are maybe some things that could be done resource usage wise. The way it currently works is that a video is recorded which then gets converted to an optimized GIF with convert.\nOne thing I will need anyway for some use cases is instead of storing a video file  store individual screenshots for each frame. Maybe this performs better with convert. It will probably use more space during recording again, but convert has to do that frame extraction anyway. Also this would allow to use gifsicle instead of convert, which allows the same kind of optimizations but is a specialized tool for the job. I don't know whether this will improve resource usage, but it is worth a try.. Just to get some perspective at what disk usage we can end up with lossless single image frames saved as PNGs during recording:\nA PNG file with roughly the area of your recording 1221*860 ends up with slightly over 1 MB for me. Recording for 15 seconds with 15 fps will take 225 MB temp file space. On the other hand ImageMagick also generates a temporary file when decoding the video, and for me this quickly is several hundred megabyte large with such a large recording area.. Looks like convert does adjust its resource usage based on the system. So me getting a 9 GB temporary file (I have 16 GB total memory) on the conversion while you get something above 4 GB for the same recording size and length might be caused by this, and I don't have to worry about that users actually need to have 9 GB of RAM available as a strict requirement.\nOne can limit the resource usage of convert with the -limit parameter, see http://stackoverflow.com/questions/15384879/imagemagick-using-more-than-2gb-of-memory-to-convert-pdf-files . Of course setting the limit to strict can result in conversion errors, also it is always a trade of and limiting one area (e.g. RAM) might increase usage in another (e.g. processing time).. GIFV is more or less just a fancy marketing term for using MP4 in place of animated GIFs :)\nThe current git master already had WebM support, I added additional MP4 support in https://github.com/phw/peek/commit/1bf5309b6f038386a37c8f78b412f48e497b8042 today.\nI would recommend either using WebM or MP4 for your use case, the recording area is a bit too large for getting good results with GIF. Depending on the use case you could also try to reduce the framerate.\nI keep this issue open for optimizing the resource usage of the GIF recording. I would like to try out the various ideas I have for this, but not before the 1.0 release.. > But what about WebP? How do you think it'd bare?\nNo idea really. WebP is very similar to WebM regarding its underlying technology. I know there is some kind of animation support for WebP also, but not sure how this compares to GIF or a real video format like WebM. Browser support seems to be not very good: http://caniuse.com/#search=webp. There is not yet a terminix-git package in the AUR. I thought about uploading one, but was too lazy to maintain it, even if it is small work. You can use this PKGBUILD I was just using myself to test installation:\n```shell\npkgname=peek-git\npkgver=1.0.0b1\npkgrel=1\npkgdesc=\"Simple animated GIF screen recorder with an easy to use interface\"\narch=('i686' 'x86_64')\nurl=\"https://github.com/phw/peek\"\nlicense=('GPL3')\nprovides=('peek=${pkgver}')\nconflicts=('peek')\ndepends=(gtk3 libkeybinder3 ffmpeg imagemagick)\nmakedepends=(cmake vala gettext)\nsource=(git+https://github.com/phw/peek.git)\nsha1sums=('SKIP')\nbuild() {\n        cd \"${srcdir}/peek\"\n        cmake -DCMAKE_INSTALL_PREFIX=/usr \\\n                -DBUILD_TESTS=ON \\\n                -DGSETTINGS_COMPILE=OFF .\n        make\n}\ncheck() {\n        cd \"${srcdir}/peek\"\n        make test\n}\npackage() {\n        cd \"${srcdir}/peek\"\n        make DESTDIR=${pkgdir} install\n}\n```\n. At http://littlesvr.ca/apng/gif_apng_webp1.html there is a comparisson between GIF, APNG and WebP (lossy and lossless). Interestingly GIF does very well, WebP is nearly always significantly larger. APNG also does quite well and is smaller then GIF, but again browser support is lacking (http://caniuse.com/#search=apng).\nNo real alternatives IMHO. I would still recommend using GIF in cases where it fits your needs and otherwise use WebM.. I have finally added that peek-git package to the AUR :) https://aur.archlinux.org/packages/peek-git/\n\nAlright, thanks. I guess that answers and closes this issue in that case?\n\nYes, I will close this issue. I have also committed some changes that will help with regards to resource usage. For one, ffmpeg already encodes the recording in the format ImageMagick expects, so there is not re-encoding necessary (which costs time and a bit extra disk space). Also the intermediary files are all placed in the user's home directory now (in XDG_CACHE_DIR, which defaults to $HOME/.cache). This helps with high RAM usage due to /tmp being mounted as a RAM disk in many cases. I think /tmp is just a bad default for large temporary files.\nFor the future I want to analyse this in a bit more detail and see whether I can improve this even more, but let's first see how the changes are helping.. Recorded with ImageMagick backend:\n\nRecorded with Ffmpeg backend:\n\nAPNG version (this also uses the Ffmpeg backend, see #108):\n\n. I have not yet experienced this myself so far, but adding a small amount of\ndelay does surely no harm, so I will do it.\nI would still like to know what's happening, though. Actually the dialog\nshould show up only after recording has finished, but there was a bug with\nthis before version 0.9. Which version are you using, 0.8, 0.9 or latest\ndaily?\nIf latest daily, are you by any chance running on Gnome 3 (because the\ndaily will use Gnome's built-in recording)\nAm 26.02.2017 10:18 vorm. schrieb \"PePa\" notifications@github.com:\n\nWhich I don't think anybody wants. Not sure if it's just me... I've just\nimplemented a little sleep here, which helps. There might be a better\nsolution.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/90, or mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAB0nOgylzRZFgkEm893zRbOOKLmyrndks5rgUNzgaJpZM4MMT_k\n.\n. One last question: When you start Peek from command line, what screen recorder backend does it show? I assume ffmpeg, it should output something like:\n\nUsing screen recorder backend ffmpeg. I think I could fix it properly without the timeout. Actually the showing the file chooser and sending the stop signal happened in parallel, so if stopping the recording process took to long it actually could happen that the file chooser itself got recorded (I still could not reproduce it on my machine, though). This is fixed now and the file chooser is only shown after the recording process stopped.\n\nAlso while debugging this I realized that running the post processing on the file was not started until the file chooser closed (I broke this with a recent update). Now the order of processing is fixed again and the post processing happens in parallel to the user choosing the save file.\nThanks for reporting this and being patient with all my questions :). So you would basically set a fixed size and have the image always scaled to this. I would do this in a way that would keep the aspect ration  or course, but create an image where neither width and height are larger than the configured values (if used).\nWould you also expect a smaller image getting upscaled?\n\nbut with the project being so responsive, I thought I might try a feature request\n\nDon't want to disappoint you, but I will actually have to reduce this a bit soon. Currently I am striving to get the basics done as I had originally imagined them and get this out as a 1.0 release. After that I will work on new features, but development will likely slow down a bit again. Having said this, this feature request here is definitely a good idea where I have use cases myself (e.g. when producing animations for a website, where all images should have a fixed width). Not sure how it will end up quality wise, but we'll see. The feature itself is easy enough to implement.\n. Not sure what is happening here, as I am also running on Arch. ffmpeg seems to have recorded the video, but then convert fails (which will call ffmpeg again):\nconvert: delegate failed `'ffmpeg' -nostdin -v -1 -i '%i' -vframes %S -vcodec pam -an -f rawvideo -y '%u.pam' 2> '%u'' @ error/delegate.c/InvokeDelegate/1919.\n\nI am unhappy anyway about convert needing to decode the video again and will likely switch over to capturing the frames separately.. Can you give latest git revision a try?\nI have committed a change that avoids  the re-encoding of the video by convert if ffmpeg was used. For the new gnome-shell backend this does not yet work. But I also changed the location of the intermediary files to be inside /home, memory issues with /tmp could very well have been the cause for your problem.. I finally uploaded the peek-git PKGBUILD to the AUR, maybe the most convenient method to test the latest version: https://aur.archlinux.org/packages/peek-git/. > Perhaps, the other non-peek-git packages should be flagged outdated to avoid confusion.\nNo, it should not as it is not outdated. The peek package is the latest release and will be updated when there is a new release. peek-git installs the latest revision from git and is for people who want to use the latest development version.. @Skylsmoi No, your error is different. Do you gave ffmpeg or avconv installed? Make sure ffmpeg is working. If your issues isn't solved by this please open a new issue here.. The most likely explanation is, that your system runs out of RAM and starts swapping. Do you have /tmp mounted as a RAM disk? How much RAM do you have?\nIf this is the issue, try using a temporary directory somewhere else, e.g. create \"tmp\" in your home and run Peek with:\nTMPDIR=$HOME/tmp peek\n\nAlso can you give some more detail on what you are recording? How large is the area you record? How long do you record? What framerate is set in options?. I don't see anything off. Not entirely sure, but as the TMPDIR=$HOME/tmp workaround helped the most likely explanation is that the temp dir used was actually on one of those tmpfs mounts you see above. Maybe you can check if TMPDIR is set to something special.\n799 MB temp dir available would not be much, and the really bad thing for convert is that temp space would compete with RAM available. And convert uses both.. Did you run \"apt update\" after adding the PPA? Can you give the output of \"dpkg -s peek\"?. Yes, the PPA from the README should be used.. Thanks a lot for the kind words. I hope you'll enjoy version 1.0 which I should release in the next couple of days.\nI close this for now :). I had speculated it would maybe be older versions. Could you run Peek with\nG_MESSAGES_DEBUG=all peek\n\nand post the output while resizing here?\nI probably need to install Fedora to actually test this.. Ok, tested this on Fedora 25, cannot reproduce at all. The displayed recording area always displays correctly in the window and the video produced is also of correct size. Tested on X11 and Wayland (both with Wayland and X11 backend).\nI would appreciate if you could install the latest version from master (I just realized the stable release does not output debug info on resizing as the master does) and post the debug output from your system, maybe this gives some clue.. Please give the console output of\nG_MESSAGES_DEBUG=all GDK_BACKEND=x11 peek\n\nTry resizing the window, there should be debug output about the recording area size.. Thanks a lot for this. Actually the issue is your HiDPI screen. I committed a change that I think would fix this.\nAs I don't have a high resolution screen and my Gnome session hangs when I attempt to set the scaling factor to anything other than 1, I would appreciate if you could test this. Please also test the recording, it could be that the gnome-shell recording does expect unscaled coordinates, so if the recorded area is off and larger than expected please tell me and I change that.. > but the screen still gets transparent when hovering the mouse over it.\nThe screen gets transparent after a small timeout, the size indicator is only shown during resizing and shortly after.\n\nWhen starting the recording, moving the window cancels the recording.\n\nYes, because recording while the window is moved is unsupported, and there is now way of preventing moving the window.\n\nFurthermore I cannot do recording because of some ffmpeg error\n\nUnfortunately convert hides all the output  of ffmpeg. One way to debug what is actually happening could be to copy the temp file while recording (e.g. /home/frank/.cache/peek/peekZE95WY.avi) and run it through\nffmpeg\" -nostdin -i \"/home/frank/.cache/peek/peekZE95WY.avi\" -vcodec pam -an -f rawvideo -y \"somefile.pam\"\n\nThis should give us some idea why it is failing. Also try to playback that AVI file, maybe the recording already produces a broken file. In that case please check whether the GNOME built-in screen recording works for you, or test with WebM recording in Peek. \nIf you cannot catch an avi file during recording, you could also look at  /home/frank/.cache/peek/ if there is any left over .avi file, even though those should be cleaned up. Or you use the recorded file in https://github.com/phw/peek/issues/101 (the ZIP in the issue description).\n\nBut still I got asked where to save the file?! \n\nYes, because starting the post processing and showing the file dialog happens in parallel, so when the file dialog is shown it is not yet known whether the post processing will succeed.\n. Ok, thanks a lot for the testing and feedback, very much appreciated.\nRegarding ffmpeg not found: For one Peek really needs some error feedback to users, there is already a ticket for this.\nSecond thing is that I want to get rid of the ffmpeg dependency when Gnome Shell recording is used. For now imagemagick still needs ffmpeg to convert the recorded video. I have to figure out if I can record with gstreamer in a format Imagemagick can use directly without conversion.. @Prior99 For i3 this is a known limitation, see https://github.com/phw/peek/issues/52. @daiyi: Cannot reproduce on Cinnamon 3.2.6 (Mint 8.1). So I think this was actually a bug that has been fixed.\nBut while testing on Cinnamon I found some issues with displaying the notifications. Does Peek show a desktop notification for you, after you saved a file? The option \"Open file manager after saving\" needs to be disabled for this.\nFor me the notification showed up once after much testing, but only very quickly and never again. Tried different approaches displaying the notification without luck.. @daiyi: No, sorry. I meant this seems to be fixed in Mint 8.1 with Cinnamon 3.2.6. I actually think there is nothing I can do in Peek to fix this. I have so gar only tested on Mint 8.1, but I will also test on Mint 8 to be sure.. @daiyi: I finally could test this on Mint 18 with Cinnamon 3.0.7, but I cannot reproduce this at all.\nHere is an animation of me recording on Cinammon. I have no trouble clicking the underlying UI;\n\nNot sure what this could be. What video driver are you using? Do you use the 2D mode of Cinnamon (which I tested also, and works for me too).. Thanks a lot for this, very useful indeed. Didn't know about key-mon, but I could imagine integrating this directly into Peek in a future release :). Can you try running convert -set delay 15 -layers Optimize peekEZC8WY.avi peekEZC8WY.gif on that file? Finished for me in under a minute.\nAlso please try the latest master release, there has been changes to how the recording works, which requires less work for convert.\nIf it still does not work please give some more details about what OS you use and which version of ImageMagick and ffmpeg this is.. Please test the latest master then and let me know if the issue is fixed there.\nThis is exactly what gets executed by Peek, so it should actually not make a difference and make your system hang. However, the way Peek stored the temporary files could quickly eat up your RAM, if you had /tmp also mounted as a RAM disk (which many distributions have enabled by default). This is much improved in the latest release. Also there will be a 1.0 release soon.. Can you guys test the latest from git master and run it from command line with:\nPEEK_MAGICK_DEBUG=All \nThen give me the output. And please give some more info about your system, especially what OS and which version of ImageMagivk is used.. @brw Nothing unusual here. How large was the screen area you have been recording, and for how long did you record? The conversion can take quite some time, and convert allocates a lot of memory quickly (depending on how much RAM you have). When convert is running, does your system start swapping?\nDoes this happen all of the time or only for some recordings? Does lowering the size / time / framerate help?. I really think we are talking about memory issues here (also for the original problem reported). The main problem with Peek before 1.0 was, that it was storing temporary files in /tmp. Now in many distributions /tmp is actually a RAM disk.\nNow convert uses both /tmp by default and allocates a lot of memory, especially for the optimization of the GIF. It actually takes the memory based on what is available (in one test for the same file convert used roughly 4 GB on an 8 GB system, but nearly 9 GB on my 16 GB laptop). But if you also fill the /tmp RAM disk with several hundred megabytes of image frames this competes with the RAM usage and you quickly get into swapping.\nNext thing would be to investigate to limit the RAM imagemagick uses. You can override its resource usage, but I probably have to be clever about it. Needs some testing with what we can get away for typical GIF conversion.\n\nRecorded almost my whole screen (1700x700 or something), tried it a few times with a duration of 15 seconds up to a minute, my system does start swapping.\n\nGIF is really not the right format for such large resolutions. The result will be huge. Also recording length should be short, definitely under a minute. For larger and / or longer recordings I would recommend using the WebM or MP4 format also supported.\n. I am going to close this issue. As the recording was significantly refactored for the upcoming 1.2 release I think this should be fixed. Please try out the latest development version. If you still encounter problems with recording feel free to open a new issue.. Nice idea. Could actually be as easy as just record the countdown we display anyway (so just have a \"Include countdown in recording\" option. Will consider this for the post 1.0 release.. You need either ffmpeg or avconv installed. Peek tries to detect this by calling which ffmpeg and which avconv, both seem to fail for your system (that's likely the two \"Child process exited with code 1\" errors). \nffmpeg is preferred, with avconv provided for compatibility mainly for Debian. avconv has some annoying small differences and also some limitations (mainly you cannot disable recording the mouse cursor).. Closing this as I think the issue was just the missing ffmpeg. Feel free to open a new issue if you still have problems with ffmpeg installed.. Not sure about this, it is starting to get a bit off from the GIF recorder thing :) If I support this it will definitely only be available for WebM / MP4 recording, and it will stay simple to setup (a single toggle to turn it on / off, PulseAudio required).. @ciscorucinski Agreed, but unfortunately I will not find the time to work on this any time soon. Help appreciated.. The screenshot is from Peek 0.8 or earlier. Please install the latest 1.0.0 and see if this fixes your issues.\nWhat exactly do you mean by \"didn't seem to register\"?. Can you please run Peek from command line, record and save a GIF and post the complete output here?\nAlso please tell me which version of Ubuntu you use and what the output of convert -version is.. Thanks, this setup should work. But I really need the output from peek. Please open a terminal and run:\nG_MESSAGES_DEBUG=all peek\n\nThen record a GIF and save it and post the output here.. This is very very strange.  ffmpeg records the video, and it also is not empty (roughly 5 MB in size). But ImageMagick cannot decode it. I will try to reproduce this on Ubuntu 16.04. If I send you a test file could you try converting this with convert?. @johannesE It is actually more likely you encounter https://github.com/phw/peek/issues/112 , please have a look at that issues and the workarounds presented here.. > I would still appreciate it if you could show me any kind of error message when I try to create a gif and something fails.\nDefinitely Peek must have this :) Hope I can work on it again soon.. I am going to close this issue. As the recording was significantly refactored for the upcoming 1.2 release I think this should be fixed. Please try out the latest development version. If you still encounter problems with recording feel free to open a new issue.. Thanks :) I struggled a bit where to put that, but I think it is Ok next to Flatpak.\n\nSorry for not squashing the commits, not sure how I can do that easily.\n\nDon't worry. GitHub now has that nifty \"squash and merge\" feature now, so I could even handle that from my phone ;). I thought about this, too, when reading that Chrome 59 will add support APNG. Not 100% sure yet, as this would require different tools (both imagemagick and ffmpeg do not handle APNG). Have to investigate a bit more. But I actually would like to support it, as it fits well into what Peek is doing.\nAlso see my comment on https://github.com/phw/peek/issues/89#issuecomment-283091038 for some more information on APNG and WebP. But the point about browser support will change if Chrome jumps in and support it. For MS Edge it is at least under review: https://wpdev.uservoice.com/forums/257854-microsoft-edge-developer/suggestions/6513393-apng-animated-png-images-support-firefox-and-sa. I just learned that ffmpeg can generate apng. Not quite sure since when this was available, the official documentation also does not mention the APNG muxer, but it exists (https://trac.ffmpeg.org/wiki/SponsoringPrograms/GSoC/2015#AnimatedPortableNetworkGraphicsAPNG). And with my current changes to use ffmpeg also for GIF this becomes quite trivial to add, so expect this in the next release :D\nSame is true for WebP by the way, although I tried it and was not happy with the quality produced.. I implemented this, just needs some testing in different distributions and updating of the custom ffmpeg builds for app packages.\nBut it is working great for me here locally.. Working well in master branch. I would welcome some testing and feedback, but for now I think this is working fine.. Just follow the instructions and run it with XWayland by calling:\nGDK_BACKEND=x11 peek\n\nIf you start it via the desktop shortcut it should already be set correctly.. What do you mean the desktop shortcut doesn't work? Does it do nothing or does it show that Wayland info dialog?\nFrom the terminal just run\nGDK_BACKEND=x11 peek\n\nDoes that work?. Ok, I'll investigate. I know what's happening: since Peek is DBus activatable the command from the Desktop file is not used, but the one from the service file.I will fix that later today.. Has been fixed, just tested with the actual peek-git package. Please update your peek-git package and it should work.. Yaourt had the \"--devel\" parameter for this.\nyaourt -Syua --devel\n\nThis will update all your packages that have outdated version numbers and will also rebuild all VCS packages (-git, -bzr etc.)\nOr if you want to update only a single package you can just run \"yaourt -Syu peek-git\" again.. No, pacman is for binary package sources only. For the AUR you either\ndownload the PKGBUILD and build with makepkg or you use one of the AUR\nhelpers to automate this.\nAm 19.03.2017 2:55 nachm. schrieb \"JulianLai\" notifications@github.com:\n\n@phw https://github.com/phw Can Pamac do that?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/109#issuecomment-287618265, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAB0nOlz16Jo2Ya85XLS9aoONEfGnGYxks5rnTO9gaJpZM4MhUs6\n.\n. Currently not possible, but there is already an issue for that: https://github.com/phw/peek/issues/61\n\nPlease note that full screen recording with GIF might not be a good idea unless you scale the image down (use the scale factor for that). Otherwise the GIF will quickly get huge.. Could reproduce. Depended a bit on the browser, e.g. Chrome worked fine for me. Reason was the h264 encoding profile used, now uses the web save baseline profile.. This looks like you have not enough space available on /tmp. Either you are low on disk space or /tmp is a RAM disk with insufficient space for the temp files convert created.\nIn current master I have already fixed setting the temp folder for convert, it will now use $HOME/.cache/peek . So if possible please try the latest git revision of Peek and see if this fixes your issue. Alternatively try setting the environment variable MAGICK_TMPDIR to a directory with enough disk space and see if this helps.. Please check your disc space on $HOME. Good catch, I don't have this limit set. It all comes down that convert uses a huge amount of resources when converting frames to an animated GIF with the -optimize flag. I need a solution of this because this is the root cause for the majority of bug reports I receive.. Can you guys post the output of convert -list resource. This gives me an idea with which resource restrictions we are dealing here. For me this is:\nResource limits:\n  Width: 107.4MP\n  Height: 107.4MP\n  Area: 33.439GP\n  Memory: 15.571GiB\n  Map: 31.143GiB\n  Disk: unlimited\n  File: 768\n  Thread: 4\n  Throttle: 0\n  Time: unlimited. > Memory: 256MiB\nThis explains why the 1GB disk cache is not sufficient. Maybe the solution for now is to overwrite those values when launching convert. But this needs some testing with which limits peek can get away with.\n. @Jokero The disk limit is not the only resource limit. Maybe more important is the memory limit. Please run convert -list resource to see the current limits on your system. Some examples show that the memory limit is set to 256 MB in many cases, try something higher instead like:\n<policy domain=\"resource\" name=\"memory\" value=\"2GiB\"/>. I have added explicit resource limits to the call of `convert`. Disk usage is unlimited, and memory usage is limited to 90% of available memory at the time of invoking convert.\n\nWould be great if somebody could test this with the current master revision.\nSee also https://github.com/phw/peek/issues/125#issuecomment-332165686. @Jokero with these limits that shouldn't be the problem. Maybe your's is a different issue. Can you post the output of Peek when run from the command line?. @Jokero This shows that the process was killed by the OS, probably took too much RAM. I gues you have no or only little swap space? Did you test the latest development version?\nIn general for what you are doing you shouldn't be using the GIF format anyway. Even if it finishes rendering the GIF, nearly 1 minute recording of 1466x987 will easily end up in file of several hundred MBs in size. Not sure how this is useful. Change the output format to WebM or MP4 in the settings.\nPeek's GIF recording is really meant to capture short snippets of parts of your screen.. I close this issue now as I think the 1.1.0 release manages the RAM usage well enough. It can't do magic though, ImageMagick just works as it works and the GIF format is in the end just not optimized for this kind of usage anyway.. Everybody still affected by this might want to read https://github.com/phw/peek/issues/125#issuecomment-336094122 and try the latest git revision. I made some attempts to use ffmpeg directly instead of ImageMagick and this looks promising so far.. \u0411\u043e\u043b\u044c\u0448\u043e\u0435 \u0441\u043f\u0430\u0441\u0438\u0431\u043e. Peek has an icon, and it should show up. You probably have to run gtk-update-icon-cache or restart the shell to see it (on Arch Linux gtk-update-icon-cache runs automatically after package installation and that usually does the trick).\nAnyway, the icon is not too pretty :) See  https://github.com/phw/peek/blob/master/data/icons/256x256/com.uploadedlobster.peek.png . It was a quick shot I got from someone, and it served well. But it does not fit well with other icons and doesn't tell much about the app.\nIf you want to give this a go I am more than happy to replace this icon .. > What did you have in mind style wise? Tango, flat?\nI think Tango like is fine. It should look nice with the icons you find on a typical GNOME or Unity desktop. I found my original request for an icon: https://www.reddit.com/r/freedesign/comments/3zlcqc/request_application_logo_for_open_source_animated/\nI still have no good idea about what the icon should show. A thing that changed a bit is, that Peek no longer is exclusively recording only GIFs.\n\nOk, weird. The icon finally showed up after 2 reboots...\n\nGnome Shell sometimes has some issues picking icons up, I have experienced this with other software as well. But normally running gtk-update-icon-cache or restarting the shell with Alt+F2, r does the trick for me. Also when I tested the Fedora package in a Virtual Machine it worked right away. I would say if the icons are installed at the right location this is a Gnome glitch.. See also my comment on https://github.com/phw/peek/issues/115. @bertob Is your offer still valid? Would be happy to see a new icon for Peek, but lack the skills to fix this myself.. @bertob I like this very much, great work. What about just getting rid of the \"PEEK\" text? Then it would already work well I think.. Thanks, this is awesome. Also like the color. What is your recommendation on providing PNG scaled versions for this? If I read the current HIG correctly it is recommended to only provide the SVG, so this should be fine, right?. Thanks, prepared everything in https://github.com/phw/peek/pull/390/\n@bertob Are you fine with how I credited you in these changes?. Thanks a lot, finally merged. I thought about this for a while. I definitely want to have an icon that is more suggestive than the current \"P\", but this icon looks kind of too stylized, with only single color flat shapes.\nThere are currently two issues open about a new icon. I am going to close this in favor of https://github.com/phw/peek/issues/114, feel free to comment there.. Can you give a screenshot of this area you recorded? My guess is that this short recording just had too many colors and this is the best palette ImageMagick could come up with. Does recording a different area make any differences?\nAlso please try starting Peek with peek --backend=ffmpeg and see if this changes the quality.\nSome general recommendations for recording GIFs are in the FAQs at https://github.com/phw/peek#why-are-the-gif-files-so-big\n. This is likely due to the fact that the gnome-shell backend currently works on a lossy encoded source video, and lossy encoding often leads to more colors. I will try to change that to record the raw RGB data before converting to GIF.. What is a bit strange is that I cannot reproduce this at all (and I use the gnome-shell backend all the time). What version of Gnome Shell is that?. And could also try recording the very same screen as WebM and post the result here?. I checked in a change I hope will help, recording to MP4 as intermediate format for GIF creation. Unfortunately I still cannot reproduce this myself. Can you try the latest version from the daily PPA at https://code.launchpad.net/~peek-developers/+recipe/peek-daily ? Should be updated in a few minutes.. Still need a different solution, as the x264 codec is part of gstreamer ugly plugins and I don't want to hard depend on those for the core functionality.. @spasarok That's unrelated and something I cannot do much about. The GIF format is limited to 256 colors. If the image has more colors the colors might get substituted by similar colors or dithering might be applied. Color gradients, such as in the colored areas in your example, are really bad. In your case the green colors are added to the color palette, and reused in dithering for the greyish part on the left.\nTry recording a scene with less colors or use a proper video format for output (WebM or MP4).. gnome-shell backend now also uses raw video as source for GIFs. I close this as fixed, please let me know if it still happens with latest master (will do a release soon).. Icons are installed in share/icons/hicolor/, e.g. /usr/share/icons/hicolor/256x256/apps/com.uploadedlobster.peek.png. Currently available in the sizes you can see at https://github.com/phw/peek/tree/master/data/icons. /usr/share/icons/hicolor/256x256/apps/com.uploadedlobster.peek.png. That's strange, according to the log the \"convert\" process was killed with a \"SIGKILL\" signal. I suspect it is running out of memory and the kernel starts terminating processes. Can you look at your memory usage when this happens. ~How much RAM do you have?~ (8GB, you already said that ;) )\nFYI: convert tends to allocate all the memory it can get, and it seems to sometimes be a bit too optimistic about that. You can set limits for its resource usage. Looking at convert and setting memory constraints is on my todo list, but it requires some testing with which constraints Peek can get away with. . To lower resource usage you could also try to reduce the frame rate or area you are recording.. You can set the framerate in settings. It is already at 10fps by default, which is low but good to keep GIF sizes acceptable.\nAlso when recording on HiDPI displays the scale factor setting can be useful. If you set it e.g. to 2 you will record at only halftime the resolution.\nCan you take a look at RAM usage when Peeks post processing is running?. The new release 1.1.0 limits memory usage to  90% of free memory at time of convert invocation. This should prevent this scenario most of the times.\nPlease note that ImageMagick will fall back to disc storage when not enough memory is available, slowing down the conversion.. > @phw what's it means?\nMainly that you should give the latest daily build a try :) You can install the latest development version from a Ubuntu PPA, Snappy, Flatpak or from source, see https://github.com/phw/peek#installation. Ok, I'll wait. Let me know when you know more :). Clsoing this based on https://github.com/phw/peek/issues/84#issuecomment-289410952\nBut thanks for looking into this, I also wondered about it, especially as I don't have the snap daemon running all the time.. Thanks for pointing this out, fixed. Actually it worked for everybody who had a Git account and SSH keys associated for it, write access is not required. That's also the reason why I never realized this doesn't work for anonymous access.\n\nAlso, currently Debian \"Jessie\" supplies gettext-0.19.3-2 but that provokes a:\n\nAs this is really not critical and only affects the AppData localization, which usually doesn't matter for local installs anyway, I won't include any information on this in the README. I think users who care about this can easily find the gettext version in jessie-backports.\n\nYou may also want to ensure that you have the ffmpeg package installed - I didn't - which proved awkward when I selected it to use\n\nI think Jessie does not have ffmpeg, but you can use libav-tools instead, Peek will detect this and use avconv instead of ffmpeg. It has some limitations, e.g. the option to not record the mouse cursor does not work and the avconv backend is generally less tested.\n\nMudlet: \"A cross-platform, open source, and super fast MUD client with scripting in Lua\")\n\nCool :). Please see #12, you need compositing (e.g. using compton) for this to work.\nAlso on i3 the click-through does not work, see #52 and the FAQs. No, won't change it, sorry. The fully namespaced icon name is a requirement for icons exported byFlatpak, and I don't see a reason to handle the naming differently in other cases. How exactly does this make problems with icon themes? You should be able to just use com.uploadedlobster.peek.png as a name for custom icons as well.. The icon name has to start with com.uploadedlobster.peek, after that it doesn't matter.\nTraditionally the icon names were the same as the executable, but the trend is to have all those files installed in shared location have to use the full namespaced app name to avoid clashes.\nI still don't understand how having the icon names start with peek would make any difference for icon themes. AFAIK the names in a theme just have to match. If an icon is present in a theme that is used, if not it searches in base themes or in hicolor as final fallback.. Sorry for the delay. I am quite aware that the majority of applications use the executable name for the icon as well, that has been that way for a long time and even was the recommendation in the desktop file spec. But applications are moving towards namespaced resource names (for desktop files, DBus service files, appdata descriptions, geschema files and icons), and Flatpak even makes this a requirement. Most Gnome apps already do this. Have a look what ls /usr/share/icons/hicolor/32x32/apps/*.*.*.* will output on your system. If you have some Gnome apps installed chances are there are a few namespaced icons as well.\nIf you use com.uploadedlobster.peek.png in the icon theme that should just work as well. Yes, the icon name is a bit longer, but this also makes it unique in case some other application also gets called Peek.\nIn short: If at all this is only a tiny issue, and renaming the icon is not an option anyway.\n. Please try running Peek from command line and see if it starts here. If that works but starting from shortcut does not, have a look at the output of \"journalctl -f\" while starting Peek. I tried to reproduce this and opened and installed peek instead of peek-git on my Arch. But for both installs Peek opens just fine via desktop shortcut. It would be great if you could try this again, and if it still does not open please give the output as asked above.\nOtherwise I will write this off as a temporary glitch with desktop files on your install and close this.. No idea, please run \"journalctl -f, then try opening Peek via desktop shortcut and give the journal output here. Also please tell me the desktop environment used.. @SalahAdDin There is something messed up with DBus activation. Can you give me the following information:\n\nWhat desktop environment is this?\nCan you give me the contents of /usr/share/dbus-1/services/com.uploadedlobster.peek.service?\n\nAs a workaround you might comment out DBusActivatable in the com.uploadedlobser.peek.desktop file, but please give me the above information nevertheless.\n. That's the wrong path there. I went digging and found https://github.com/Antergos/antergos-packages/blob/master/antergos/peek/PKGBUILD , which seems to be the PKGBUILD for the Antergos package. It is broken, the CMAKE_INSTALL_PREFIX should be set to /usr, not ${pkgdir}/usr\nI have reported this issue on https://github.com/Antergos/antergos-packages/issues/180\nIn the meantime I would suggest you install the peek package from https://aur.archlinux.org/packages/peek/ , that has a proper working PKGBUILD.\n. Can you please give me the content of /usr/share/dbus-1/services/com.uploadedlobster.peek.service again? Also the output of makepkg when you built peek would help a lot.. Thanks for testing this. I am very sure you are still running the Antergos package. If you installed it with e.g. yaourt, it will prefer binary packages in official repositories. And since there is an Antergos package it will use that. The output of pacman -Qi peek could confirm this. If the description is \"An animated GIF recorder.\" it is the Antergos package. Also the build time would be older, if you just installed the AUR package the build time will be current.. > I reinstalled from AUR: yaourt -Sbu peek.\nAre you sure it installed from AUR? Since the package peek is in the Antergos repos this will not install from AUR, yaourt will prefer the repo package. Did yaourt ask you to review the PKBUILD? If yes, please do and double check it is the correct one.\n. I am closing this issue. The PKGBUILD for Antergos has been updated and there was a rebuild of the package, see http://build.antergos.com/build/6275.\nNot sure why the PKGBUILD specifies version 1.0.1-2, but the built package is displayed as 1.0.1-1. If in doubt uninstall and reinstall the package. Yes, this is already known and there are a couple of issues about this already. It comes down to imagemagick's cinvert using basically all the resources it can get when optimizing the final GIF. Looking into how limiting the resources for convert affects the processing is on my to-do list.\nI would be really curious which software that is you claim produces GIFs only 10% the size for the same recording.. What you can currently do is turn down the framerate. For a lot of recordings you can get away with 7 or 8 fps and still get decent results (it is an animated GIF after all).\nBut there is definitely room for improvement and this is planned for the 1.1 release. Currently I am just tight on time again and this needs some playing around with different settings, so not sure how long this will take :). Currently there is not much difference between the development and stable version, so yes, same issues apply. It all comes down to ImageMagick's resource usage here :(. @diwu1989 Yes, definitely the resource limits have to be set, see https://github.com/phw/peek/issues/112 . But definitely not 64MB :)\nEvaluating and testing this is on my todo list for the next release. I am currently very tight on time, I hope I can work on this soon again. Sorry for the long time without update on this.\nGiven the comment of @trelemar I just wanted to point out that recording GIFs with 30 fps or more is probably a bad idea, unless you keep it very short or small. You will quickly end up with a file of several hundred megabytes in size, I don't think this is of much use. There is a reason why the default is 10 fps. Personally I would recommend a framerate between 8 and 15 fps.\nIf what you are recording really requires a framerate that high use a proper video format, Peek supports WebM and MP4.. Ok, still struggling with this. The main problem is, that I have two issues to fight:\n\nThis one, where the resource usage eats up all RAM and causes swapping\nThe direct opposite, where default ImageMagick resource restrictions are too strict (#112)\n\nI have now introduced a change where I actively set the resource limits for disk usage (unlimited, will use whatever is available) and memory usage. For memory usage I use 80% of total available memory, but that might be too much on lower memory systems. Maybe I should use 80% of MemAvailable (at time of calling convert) instead? That would still leave some room for other processes to grow. Any suggestions?. After some testing new metric: Convert gets a memory limit of 90% of the available memory at time of invocation. I think this will scale. But I keep this issue open for some feedback. Would be happy if somebody could try the current master version.\nSome observation: It is really important to give convert enough memory. Giving it less will just cause it to use more disk space and things get slow quickly.\nAnother observation: All tools using convert to create GIF files while using the -layers Optimize flag suffer from this. Despite claims that other tools using convert do this faster / more memory effcient (e.g. in #177) I have found no evidence this is the case and was always able to reproduce it with whatever tool I tested.\nBottom line: The GIF file format really isn't made for your HiDPI full-screen 10 minute recording you plan to do. The end result will not be to your satisfaction no matter what I do here. Use WebM or MP4 for this, use GIF for small recordings of screen areas. I should make this clearer in the FAQs.. I close this issue now as I think the 1.1.0 release manages the RAM usage well enough. It can't do magic though, ImageMagick just works as it works and the GIF format is in the end just not optimized for this kind of usage anyway.. I reopen this, as I think I am near a better solution. I experimented with using ffmpeg instead of ImageMagick for conversion, and the results are promising.\nIf somebody of you could test the latest git revision and run Peek with PEEK_POSTPROCESSOR=ffmpeg set:\nPEEK_POSTPROCESSOR=ffmpeg peek\n\nThis will force the usage of ffmpeg for generating the final GIF. In my tests it used far less resources, took less time and often generated a smaller file. Also files looked fine, but I haven't tested too many scenarios for now.\nIf this is working well I could make it the default. Also this would allow some more optimizations, e.g. using compressed temporary video files, saving a lot of temporary disk space.\nNote: I am not yet sure how new the ffmpeg version needs to be. Older versions did not do well with generating GIF output. So if you post any results, please let me know the output of ffmpeg -version. @orschiro Thanks in advance :) The daily PPA should work, it looks like it already built the latest code.. > Impressive! Although there seems to be a quality decrease, right?\nThanks for testing. Not sure about the quality, but that's my main concern and the reason I am asking for feedback :) My quick tests so far looked pretty comparable.\n. Thanks a lot for testing and giving feedback. I will definitely switch to using ffmpeg. My tests so far are pretty good, and if quality issues come up we can experiment with different filters, but the defaults seem to be good already.\nI will keep around the ImageMagick post processing for a while so people can use it as a fallback when issues arise, but I will probably drop the ImageMagick code later. As a side effect I will likely also remove the optional libav-tools backend entirely, as this would still require ImageMagick to generate the GIF.\n\n... although it got a bit laggy during the convert phase.\n\nYes, noticed that too. I will launch the post-processing or maybe the entire recording in a proper thread. So far I came away with calling everything asynchronously (the real work is done in separate process anyway when the external tools get launched), but also forking off external processes adds some notable lag to the UI.. The latest code works quite well. Now uses gifski by default, if available (see #212). I won't invest any time adding threading support to the recording process, the current asynchroneous implementation works quite well for me currently. I will revisit this if this becomes necessary.. I have no good explanation right now why this might be happening. I will try to reproduce this, but Peek does not actively try to grab the focus, so I hope I can find anything.. Some status update: I could not reproduce this with just key-mon on my system (Arch Linux, Gnome).\nNext up is testing this with Xfce on my Ubuntu 16.04 VM.. So I am completely puzzled and cannot reproduce this at all. First I installed Xfce4 on my Ubuntun 16.04 VM. I installed key-mon from official repositories and peek from stable PPA and also tried freshly compiled from source. This is what I do:\n\nI open key-mon and peek (tried both first starting once, than another)\nI click on start recording\nI click inside the Peek window to focus the application underneath (tried with gedit, tilix and nautilus)\nI start interacting with the window below using my keyboard (e.g. typing commands in terminal, writing text in gedit, copy pasting etc.)\n\nAt no point could I trigger the peek window to grab the focus. I also tried with various XFCE focus related settings in Window Manager and Window Manager Tweaks, most importantly I enabled and disabled the two you had mentioned (they are called \"Activate focus stealing prevention\" and \"Honor standard ICCCM focus hints\" in English).\nI also did the same on another VM with Linux Mint 18.1 installed. I am out of ideas right now :(. > Did you also get any key-mon warnings, like this:\n\n\"/usr/local/lib/python2.7/dist-packages/keymon/shaped_window.py:78: Warning: Source ID 323 was not found when attempting to remove it\"\ngobject.source_remove(self.timeout_timer)\n\nNo, I didn't. But this is actually interesting, as things installed in /usr/local are not from official packages. Maybe you had an old version installed manually in /usr/local. Try the output of which key-mon, I am pretty sure this will show /usr/local/bin/key-mon. Try removing all key-mon related files from /usr/local and then run the system installed key-mon in /usr/bin/key-mon\nIf this still does not solve the issue you could look at the output in journalctl -f if there is anything suspicious while this happens. . Indeed, with activated \"Highly visible click\" I can reproduce the issue. Interestingly it is always Peek gaining the focus, no matter where you click (inside the Peek window or completely elsewhere). This is related to the fact that Peek is set to be displayed always on top of other windows. I can also reproduce this by setting any other window to always on top (by right clicking on the window header). That window will then behave exactly as Peek.\n\nProbably, this can be closed? I assume it's more of an issue with key-mon... :-/\n\nYes, this seems to be an issue with key-mon (maybe in combination with the XFCE window manager, as I cannot reproduce e.g. on Gnome). I guess for the click highlighting to work it has to change the focus, and key-mon probably contains some code to give the focus back, which fails here. I am curious and want to look into the key-mon code to confirm that, so I keep this issue open a bit. But I currently do not expect that I can do anything in Peek about it :(. @Lenbok Yes, yours is a separate issue. This one is specifically about key-mon.\nBut also in your case I don't think I can do anything, this is in the responsibility of the window manager. Peek can do nothing against the window manager giving it the focus. The workaround is to disable focus follows mouse while recording.\nIf you think the window manager should be clever enough to take cut out areas of windows into account when focus follows mouse is active file a bug against Window Maker. Good idea :). I am not sure this covers the use case completely. As I understand it, the idea is to have a shortcut to quickly toggle show / hide of the Peek window. As Peek is usually not focused this requires a global shortcut. The idea is to have a quick way to get the Peek window out of the way and back to the same position while working on a recording. @Tiagojdferreira did I get this right?. Nah, that can't work as the distribution name is different. What I actually meant was downloading the precompiled deb packages and installing them with dpkg should work. But I have removed the misleading comment now, building your own package is the better approach.. I can try to fix that. Currently this gets put to the left on Unity. I will see if I can detect how this is configured for Mate and set it accordingly. If I cannot autodetect I will probably add a hidden option to force it.. Fixed, can you try the latest development version? I have generalized my approach to determine the position, so this should now work independent of the desktop environment used (previously it used a hard coded check for Unity).. How did you install peek? From the daily PPA? If so the package was rebuilt 2 hours ago and should be up to date. Please check the package version, it should currently be \"1.0.1-0+git509\\~ppa11~ubuntu17.04.1\".. Pretty strange, works for me on Mate installed on Ubuntu 16.04 with the setting enabled in mate-tweak as shown on your screenshot. Please make sure no instance of Peek is already running and try starting Peek with\nG_MESSAGES_DEBUG=all peek\n\nThen post the output here. It should show some info about how the decoration layout is configured on your system.. Oh, never mind, my bad. The package in the daily PPA was not up to date, it was rebuild with the minor README change I did eralier. Currently rebuilding, should be ready any moment: https://code.launchpad.net/~peek-developers/+recipe/peek-daily. By default if you are running on Gnome Peek will use the gnome-shell backend. That requires the gstreamer bad plugins for MP4 recording. The gstreamer1-plugins-bad-freeworld package from the RPM fusion repository provides those.\nAlternatively you can use the ffmpeg backend by launching Peek with \npeek -b ffmpeg\n\nI should add a note about this to the README. And the main issue here is better error reporting in Peek, but that is planned for one of the next releases :). Strange that you have that package installed but it doesn't work, maybe the MP4 support requires yet another package. Could you do me a favour and look at the output of \"journalctl -f\" when you start recording with the gnome-shell? This could give us some clue why it fails.. Thanks. I cannot tell right away if the message \"Can not initialize x264 encoder\" means the x264 encoder is not installed or something is broken with it. I will do some testing with Fedora myself and try to figure out what needs to be installed for this to run and update the README. Looked at this a bit, there are two issues here:\n\nThe documentation and package dependencies are wrong, you need gstreamer1-plugins-ugly installed as this contains the x264 encoder. I have checked in a fix for this.\nIn your case you seem to already have this installed, but I can reproduce the \"Error in recording pipeline: Can not initialize x264 encoder.\" error on my Fedora installation.\n\nThis second issue is a bit critical, as I experimented with also using the x264 encoder for GIF creation under gnome-shell to fix for #116. Trying to figure out what is wrong on Fedora and whether I can workaround it or document a solution.. x264 encoding seems to be broken on Fedora. I tried it from command line with:\ngst-launch-1.0 -v filesrc location=test.webm ! decodebin ! x264enc ! mp4mux ! filesink location=output.mp4\n\nSame thing works when using WebM:\ngst-launch-1.0 -v filesrc location=test.webm ! decodebin ! vp8enc ! webmmux ! filesink location=output.webm. Yes, RPM Fusion provides it.\n\n\nPerhaps before the x264 encoder is fixed, as a workaround Fedora build should depend on ffmpeg by default?\n\nAs Fedora defaults to GNOME on Wayland this is not really a solution. But maybe I could default to the gnome-shell backend only if it detects both a GNOME session and Wayland. Currently it checks only for GNOME and enables it there.\n. I tested my above command lines with test video files from http://techslides.com/sample-webm-ogg-and-mp4-video-files-for-html5 and then even the x264 encoder worked. But if used with the gnome-shell DBus service or when trying to decode and re-encode a webm file generated by Peek it fails. This seems to indicate that while there seems to be some bug with the encoder in Fedora 25 it might be possible to get a workaround for it.. I wonder whether this is actually  duplicate of https://github.com/phw/peek/issues/141 . I will test again with newest release. > P.s. any plan to make Peek works in Wayland?\nSorry for the late answer on this, missed this comment. Peek already works on Wayland in a Gnome session (will use the Gnome Shell DBus API for screen recording). Requires XWayland to be present (but that should be the default). See https://github.com/phw/peek#why-no-native-wayland-support for details.\nFor this issue I close it, might very well have been #141\n. Good point. I leave the corresponding Mir support issue open until it is clearer what Mir does, and as long as Mir is somewhat alive I will consider accepting patches. But from what I can currently see it will likely die at some point.. This pretty sure was you system starting to swap. The RAM usage of imagemagick can become enormous. ImageMagick has dynamic resource management that is somewhat based on the RAM you have in your system. I am currently experimenting with different input formats, it looks like this has an impact on RAM usage.\n\nthere was no sign of GIF even though I went through the process of naming it and saving under \" Videos \" before it hung\n\nThat is to be expected, the file gets placed there when ImageMagick finishes. As you did not let it finish there is no file.\nI am closing this. Not because it is not relevant but because there are already multiple issues all having the same root cause (high RAM usage).. But it worked for you previously? Did something change or is this a different system?\nThe error message indicates that there is not enough disk space for processing, how much space is there in your home? If it crashed in between maybe there are also left over files in /home/seanh/.cache/peek/. Seems to be a duplicate of #112 . The core of the issue seems to be ImageMagick convert having some issues with the \"distributed pixel cache\" (whatever this is). But the fact that it also affects the flatpak version puzzles me, because this comes with its own convert and I cannot reproduce the issue there.\nI close this, please follow #112 for updates.. No good idea :) One thing: It is running different installations. E.g. do you have a Flatpak or Snap version installed? Becaus e.g. I have both the OS package and the Flatpak version installed, and my desktop shortcut is currently opening the Flatpak version. On the Flatpak (and probably also Snap) dev versions GIF recording on Gnome Shell is currently broken. You could run journalctl -f and see if there is any error output.. Thanks :). Sure, makes sense to include it. You can open a pull request with the man page included (I would put it in data/manpage in the repository). I can take care if adding it to cmake to install it. Or just post the man page here in the ticket and I will add it.. Thanks a lot for this, I have included the manpage in the build. Will do a new release soon.. Thanks a lot :). I was hesitant to add such an option, as in the past people could just set TMP_DIR. But since Peek is now handling the cache directory itself I will probably add a hidden dconf option.\n\nI found that peek has left a > 1GB file in its cache directory in my home directory (and has not removed it, maybe result of a crash or something).\n\nIf there are leftover files in there just clean it up. After Peek finished recording this directory should be empty. If there is anything left it is likely due to some crash (or it is a bug).\n. Makes definitely sense in this setup. Still this is rather low on my priority list, the setup seems uncommon enough (it kinda defeats the purpose of the cache directory). But patches welcome :). > ...and it is cleared on reboot etc.\nI don't mean to imply you shouldn't be using this setup, as long as you know what you do this is fine. With \"it defeats the purpose of the cache directory\" I just mean your usage nullifies some reasons why cache files are used in the first place.\nDon't count Peek here. Peek just uses ~/.cache as temp file storage. Temp files are usually written for data you need to keep around for a short period of time, but the developer considers this data to be to large to hold in RAM. After being used it is thrown away again. Fast access is important here, hence it makes sense to have this in tmpfs as long as you know you have enough RAM to hold temporary data for the applications you use.\nThe typical cache file is different. Cache files are written for data that is a) expensive to recreate (e.g. obtained over slow network or created via processor intensive calculations) and b) the data can be again in the future (avoiding the recreation). If you put ~/.cache on a tmpfs you get the benefit of very fast cache access at the expense of frequent cache recreations. This makes the cache for some applications less useful or in some cases probably completely useless (e.g. if the application only uses the cache to speed up startup, and you start that application only once per session and then reboot).\nBottom line: You have to know what applications you use for the right choice to weight pros and cons, and that's the reason I consider this an unusual configuration for general purpose usage.\nTo offer a workaround: Why not symlink ~/.cache/peek to some persistent location?. @sQVe This sounds more like https://github.com/phw/peek/issues/198 . The new GIF encoding with ffmpeg seems to make issues. Can you try with peek release version 1.1.0 instead?. The latest Peek from git should be rather low on resource usage, including the temporary space. Of course this can still grow to sizes too large for a RAM disk (depending on what you record), but in any way I am pretty confident this is not a too big deal anymore.\nAnyway, I'll keep this issue open as you have convinced me that this needs to be configurable in some cases :). You are on Ubuntu, right? Ubuntu sets really tight default resource limits for Ubuntu, see https://github.com/phw/peek/issues/112#issuecomment-296690302 and following comments for the issue and workarounds.\nI will close this, as there are already enough tickets that are all related to the same root cause (imagemagick's resource usage). I will try to fix this, but I am currently too tight on time to work on it. I hope this will change soon.. I don't fully get the issue. You mean you cannot resize the height because the bottom window edge is outside the window? You should be able to grab the top edge, make the window smaller in height, than pull it up until you see the bottom corner again. Basically the same you'd do with every other window.\nThe other question is how you ended up with such a large window. Did you use peek on a larger monitor before?. So you can't grab the top of the window for resizing? Is this the case for all windows of all apps? This sounds more like a desktop environment issue, not sure what I can do about it in peek :(. I just experienced this on XFCE where I could not grab the bottom even though it was visible. Seemed to be a theme issue. Maybe it is similar reason you cannot grab the top. What theme are you using? Also is it the same on other windows?. No response from OP, closing as I don't think this is something Peek can handle. Looks like a theming bug to me.. There is a similar issue #199 . I can probably work around this by theme, as we now have a nice theme specific CSS selection in the code. But I need to know which theme this is to be able to act on this.. No, this is definitely not expected and a bug. I can reproduce when using ffmpeg with the h.264 codec and scaling, as soon as the resulting video width or height is not divisible by 2. But also when using the gnome-shell backend with h.264, in that case even without scaling.\nThe reason is that the h.264 codec requires an even number of pixels. Without scaling ffmepg takes care of this by just reducing the pixels by one if they are odd, but with scaling this seems to break.\nI guess the solution is just to adjust the sizes accordingly for h.264. Will do a fix. See also related question at https://stackoverflow.com/questions/20847674/ffmpeg-libx264-height-not-divisible-by-2. Makes sense \ud83d\udc4d . I did this a little bit different: When closing peek while rendering, it will finish rendering / saving the file and show a notification afterwards. What do you think about it? I am no big fan of dialog boxes and of too much interaction with simple apps, so I personally like it. I would at least like to get this released and gather some feedback :)\nThis commit also fixes the issue that closing whole recording could lead to left over temp files.. Thanks :). Sorry for the late reply. Can you look at the output of journalctrl -f while you encounter this issue? There should be some error message from gnome-shell. Also please let me know the gnome version you are using.\nAs a workaround use the ffmpeg backend by launing peek with:\npeek -b ffmpeg. Looks like you don't have ffmpeg installed, but that's required.. Thanks for the suggestion, I will consider this.. I would like to support this, but https://github.com/elementary/houston/issues/436 currently blocks this, as I don't intent to change the app name (which is already in use) nor implement any crazy workaround.\n\nOne option might be to fork my own project just for publishing to Elementary, but I don't really want to maintain that.. Just for the record there are two blockers currently:\n\nThe crazy requirements for the app name\nThe insistence of Elementary to include Debian control files directly in the repository (which is problematic, since Debian discourages this and it will make Debian packaging harder, and also the files would be Elementary specific and are not necessarily reusable by Debian or Ubuntu)\n\nI really consider forking the project into a separate repository for this, but I need some automatic way to keep it updated without too much trouble. Not high priority at the moment.. Thanks for this. I had once asked about it in their chat, but having an issue is better.\nI really like the general way they handle builds for their store, but the two issues I have blocking me really go against established best practices. It's ok if you build something explicitly for Elementary, but adopting an existing, published app gets harder.\nStill want to set this up even with the blockers present, but don't know when I will find the time.. I will close this as a duplicate of #112 . Please see the comments at https://github.com/phw/peek/issues/112#issuecomment-296997382 for a workaround.. Strange indeed. Cannot reproduce, but definitely a bug. Only one question: Do you use the ffmpeg or gnome-shell backend (gnome-shell backend is obviously only used on gnome-shell, but if you are unsure start Peek from command line and it will output the backend used).. This is definitely a timing issue caused by the multi threaded nature of the recording. As I hide the counter and start recording in parallel this seems to overlap. One quick fix would be to add a small timeout. But actually there already is a small delay between Peek starting the recording and the first frame being recorded, as initializing the recorder takes some time, depending on the system. E.g. from invoking ffmpeg to ffmpeg actually capturing the first frame there is some delay while ffmpeg initializes. I would like to avoid adding more artificial delay here.\nI will try to start recording on the hide signal of the delay indicator.. Thanks a lot, your feedback is very much appreciated. The documentation on those features is a bit scarce and so are the examples using it. I remember this was quite some trial and error based on some (maybe not so good example) until this worked as I wanted it. So getting some feedback from somebody who knows more about the internals here is awesome.\nI tried your changes quickly and they seem to do what I want. Now I just need to test this on non compositing WM and then I'll release it :). > Well, doesn't this indicate that the input region is also \"a bit off\" in this case?\nYes, that's true. The issue here is I think that the dropdown itself is a shaped GDK window. As I haven't found a way to get the exact region I ended up only getting the outer Widget rectangle and stanced that out of my input area. Just for the input nobody really noticed.. > Really just rendering artifacts or could it be that the region used for the shape was mis-computed?\nThe pixels are also click through, independent of whether I actually use input_shape_combine_region or not. It's a bit strange, but for now I count it off as a WM bug. I will try to reproduce elsewhere.\n\n. This does not work well on Awesome 3.5.6. The transparent content of the window is not updated when the window is moved, only when I switch the workspace it gets redrawn. It also always shows the background :( Will try on Awesome 4 next.\n\n. Tested on awesome 4, there it is fully working. Click through works also.\nOn i3 it does not work at all, but according to https://github.com/i3/i3/issues/2742 the shape extension is not implemented there, so no big surprise.. @psychon Thanks again for the help here :) Merged and ready for next release. See https://github.com/elementary/houston/issues/436. Thanks a lot. I merged this too early. Looks like CMAKE_INSTALL_DATAROOTDIR and related directories from https://cmake.org/cmake/help/v3.0/module/GNUInstallDirs.html are relative, and this breaks install() calls :(. Ok, fixed. It was mainly the import of GNUInstallDirs missing. After that I used the proper variables for a few more paths. Thanks again for this improvement \ud83d\udc4d . I had byzanz support on my original feature list, but I dropped it after I could not get the recording to work as I needed it. AFAIK byzanz actually does not expose a library (or at least none gets installed by default), and the command line tool byzanz-record expects you to set a duration in advance (defaults to 10 seconds). That's not really what I want and I found no way around this.\nRegarding the quality: Which version of peek are you using and with which recording backend (peek will tell you if you start it, one of gnome-shell, ffmpeg or avconv)?\nBecause what I see above is likely mostly caused by video encoding artifacts in the source video recorded, and those get only worse when converted to GIF (as it increases the number of colors and makes an optimal palette more difficult, and also more changes per frame). Until 1.0.3 the gnome-shell backend used a lossy source video, and that would explain the bad results.\nJust for a quick test I recorded part of that byzanz animation with Peek 1.0.3, the result is much smaller and better quality (you can't really compare it to your original recordings, though).\n\n. Cool, good to see that it turns out so much better. I am glad I got that fixed finally :)\nYes, still a bit larger. Byzanz actually does one nice thing: it has a dynamic delay between frames, whereas the files from Picard have a fixed delay. That means there is even a layer in the files if it is totally empty and unchanged from the first.\nBut when I look at the results the main difference seems to be that the file generated with Peek use some dithered colors, whereas Byzanz uses more flat colors. I think that explains both the larger file size of Peek and why Byzanz' colors are more off.\nAnyway, I am going to close this, as I don't intent to implement byzanz support. It would need some patches to upstream byzanz to be usable for Peek.. I actually suspect this has more to do with the size of the recording view than the dash. Are you recording as GIF?\nCan you please run peek from command line and make a recording that fails, than post the console output here. Also make sure to use latest Peek 1.0.3, as this actually fixes a quality issue with gnome-shell recording that also affected file size and therefor postprocessing times negatively.. @e-cloud, are you also using the Flatpak version? Then this would actually be very strange.Your error is that convert runs into configured resource limits, see https://github.com/phw/peek/issues/112 for discussion and workarounds.\n@Alexander-Wilms Can you give your console output?. Closing this as duplicate of #112. Is this latest development version from PPA? There were some changes to the build system yesterday that did not work well at first and needed fixing. I will look into the PPA builds and see if there were any issues with the latest revision.. I can confirm this with 1.0.3-0+git573, the files are installed all into the wrong place. But fixed with latest latest Peek 1.0.3-0+git576. Please run a full apt update and then apt install peek to install that.. > I have the same issue on manjaro.\nNo, it's not the same issue, this here is specifically about a packaging error in the Ubuntu packages.\nHow did you install Peek? This sounds like whatever package you use, it does not install the schema properly. Try running as root:\nglib-compile-schemas /usr/share/glib-2.0/schemas. Stow and GSettings schemas need some extra work: whenever you stow or unstow an application in `~/.local` which provides a glib schema you will need to run\n\nglib-compile-schemas ~/.local/share/glib-2.0/schemas\n\nAlso by default applications might not pick up GSettings schemas from ~/.local, you likely will have to expand your $XDG_DATA_DIRS:\nexport XDG_DATA_DIRS=$HOME/.local/share/:$XDG_DATA_DIRS\n\nBest set this in your ~/.profile.\nBy far the easier solution would be to build peek from AUR and install it as a proper package :)\n\nDo I need to open another issue?\n\nLet's see if we could handle it here :) If the above doesn't help, yes please, add another issue. It's easier to keep track of than to discuss in a long closed issue.. Definitely useful, but not entirely sure I will implement this. You can easily get this by using a tool like key-mon, see also https://github.com/phw/peek#how-can-i-capture-mouse-clicks-andor-key-strokes\nI keep this feature request open and look at my options for doing this directly in Peek.. @peteruithoven Yes, that's another option. But I don't think screenkey supports showing clicks, only keypresses.. Can you please give the version of Gtk installed? I though I would actually check for this being available :(. Also please let me know how you installed Peek: from source or using the Fedora repository in the README?\nIf you use this repository please note that it was compiled against Fedora 25 and thus might not work on 24 due to older Gtk version. In this case I recommend using the Flatpak version, or if you prefer install from source.\nI can still add a runtime check to fix this, will look into it.. @lexoyo The packages at https://software.opensuse.org/package/peek are all for Fedora 25 and later and are compiled against at least GTK 3.22. They won't work on older GTK versions.\nFor Fedora 24 please install from source: https://github.com/phw/peek#installation. I can reproduce this. I guess this has to do that the files are created as temporary files and just copied over then. I will look into it.. This sounds very much like you system runs out of RAM and starts swapping, so yes, I think this is kind of a duplicate of https://github.com/phw/peek/issues/125.\nHow much RAM do you have, and especially how much is available? \nOne thing to try would be the reverse of what is suggested in https://github.com/phw/peek/issues/112#issuecomment-296690302 and follow-up posts: So instead of increasing the resource limits, try to set them to a value that actually is available on your system. Of course if you set it too strict you could end with the error of #112 . But if this works for you I would be very much interested in the values :). > Would it be possible to always record in MP4, and convert later that MP4 to GIF, if GIF was the selected output format?\nThat's basically already how it works. That conversion step is what is taking time after recording and is using up your computers resources. Just that it does not record to MP4 but to raw video, which saves one conversion step in ImageMagick.\n\nI don't see then why converting an arbitrary MP4 to GIF would crash machines.\n\nIt doesn't \"crash\" your machine in that sense. It is using up you physical RAM, forcing your machine to start swapping RAM to disk, which quickly slows down everything to a crawl. You can wait it out if you are patient. At the end Peek (or more specifically the ImageMagick convert process) will either finish or, if it completely runs out of memory, crash. In a low memory situation the kernel might also decide to terminate other processes.\nClosing this as a duplicate of #125. I am not entirely sure what your question is, so I give you a couple of answers:\n\nYou start recording a video by clicking the \"Record\" button at the top of Peek's window\nYou can change the output format (GIF, WebM or MP4) in the preferences.\nThe preferences can be opened in the app menu.\nThe app menu is located in the top bar if you are using Gnome or Unity. If you are using a different desktop environment or the application menu is disabled the Peek window will contain an icon that opens the app menu.. Issue resolved by support in gitter. Ubuntu 14.04 is not supported by the PPA, due to the GTK version available there. But people have reported the snap package works for them, see https://github.com/phw/peek/issues/54\n\nPlease try installing snap and then install peek with:\nsudo snap install peek --edge. Closing for now, please let me know if the snap approach doesn't work for you.. @pnatraj I no longer provide or support a snap package for Peek. For details please see https://www.reddit.com/r/Ubuntu/comments/870bcn/snap_support_for_peek_screen_recorder_discontinued/. Yes, I have to look into it, thanks for the heads up. The tests are all crashing for some reason, but I don't see any change on Peek's side to cause this. It could be related to recent OS upgrade at Travis CI, will investigate.. Fixed again without changes on my side, seems to have been a travisci issue. Thanks, closing as duplicate of https://github.com/phw/peek/issues/58. Thanks for this, have to rework Snapping a bit again but plan to push it to stable channel soon :D. What exactly do you mean with \"it hangs\"? When saving it takes a while to convert the recorded video to a GIF. As long as it is processing, the record button stays inactive. When it finishes it becomes active again. Depending on the size and duration of your recording this can take a while and use a lot of RAM.\n\nIt can happen that this process aborts due to restrictive default resource limits for imagemagick on Ubuntu. In this case you can have a look at https://github.com/phw/peek/issues/112 for workarounds.. If your computer starts to react slowly this is an indicator that your physical RAM is used up and the system starts swapping. Yes, imagemagick can use a huge amount of RAM during this processing.\nYou might try editing /etc/ImageMagick-6/policy.xml and setting a limit for resource memory. See also https://github.com/phw/peek/issues/112#issuecomment-296690302 and following.\nI will close this as a duplicate of https://github.com/phw/peek/issues/125. My preferred solution would be to get #125 fixed. Probably I need to ask the ImageMagick guys why the resource usage is sometimes so ridiculous high when optimizing GIF files. \nI can still add a FAQ section though, as manual tweaking of ImageMagick's resource limits might be needed in some cases no matter what I do here.. I will close this, as Peek now uses either ffmpeg or (if installed) gifski. Both solution don't have this massive RAM usage of ImageMagick and perform quite well, so I don't think this is an issue anymore.. Duplicate of #112\nThe comments there also explain how to increase ImageMagicks resource limits by editing /etc/ImageMagick-6/policy.xml. Duplicate of #27\nBut I actually think that #27 is a wontfix, as I don't see a way to handle this. The app does not get notified synchronously on window moves, so all attempts to do this would likely record the window borders. . For now in version 1.0.3 you have to enable compositing for your window manager. See this FAQ for version 1.0.3: https://github.com/phw/peek/tree/v1.0.3#the-recording-area-is-all-black-how-can-i-record-anything\nBut good news: The current master release already works without compositing. So if you feel comfortable installing from source you can try this. Otherwise I will hopefully soon create a new release.. That sounds like a very useful idea. I just don't know whether this can be done and if so how. Probably also desktop related. Will need some research, if you know anything about this let me know.. So I had some look into this, and I found no really good way of doing this. All the solutions are desktop specific. In general it would always be what the nonotifs code does for Ubuntus notify-osd: Stop the process handling the notifications, launch up a replacement that captures the notifications silently. When finished start the notification handler again and resend all missed notifications.\nBut this would be different for every desktop environment and I really don't want to go into this. If there would be a generalized separate service dealing with this I would consider using it, but given my lack of time I won't be the one writing such a service.. Yes, could be helpful. Maybe even a quick select. My only concern is that it will make the label longer. But since the label autohides anyway this does not matter much.\nI am also no opposed to have some kind of quick switching, e.g. by having an arrow dropdown behind the button :). Hey, looking cool so far. This is going into the direction I had imagined.\nTwo notes:\n\n\nI actually would like to have a way to still do a one-click record start. So we should somehow separate the start recording with default format, and format selection. I had thought of using a https://developer.gnome.org/gtk3/stable/GtkMenuToolButton.html for this.\n\n\nHaving the popover to be actual clickable is a bit tricky, due to the content area being set to clickthrough. Have a look at AppMenu.update_input_shape(), it already does this for the appmenu, if it is part of the window (https://github.com/phw/peek/blob/master/src/ui/application-window.vala#L404)\n\n\nHaving something like this in update_input_shape()  should work:\nif (pop_format.visible) {\n  var pop_format_region = create_region_from_widget (pop_format);\n  window_region.union (pop_format);\n}. @orschiro  The development packages should all soon be up-to-date if you want to try it :). You simply can't with the window logic, this would require another way of selecting the recording area. No plans to change this, though, sorry.. Can you run peek with\nG_MESSAGES_DEBUG=all peek\nand then save a file with \"Launch file manager\" enabled, then post the output here.\nPeek tries various strategies to open the file manager, I am curious what it chooses for your environment.\n. Ok, so it's using the org.freedesktop.FileManager1 DBUS service, which is the default to use if available. Now we have to figure out how this is working in this case. I fear for XFCE it is enough that Nautilus is installed, as Nautilus provides this service (its not the only file manager doing so, though) and Thunar not.\nRelated issue for XFCE and Thunar: https://bugzilla.xfce.org/show_bug.cgi?id=12414\nI will try to figure out how to best solve this. Maybe I will just blacklist the usage of this service for XFCE.. Just to have this here: Obviously uninstalling Nautilus would be a workaround, but likely not one you want (there is for sure a reason you have it installed).. After further though I decided to do nothing and close this. As you said, once XFCE supports this itself it is a non-issue, and any workaround I introduce would likely break things. Further more if I blacklist this service for XFCE, the feature would be broken completely when running inside Flatpak, as this relies in this service (due to the sandboxing).. I think this is a duplicate of \nhttps://github.com/phw/peek/issues/125 and related https://github.com/phw/peek/issues/112 (all coming down to the resource issues with ImageMagick).\nBut your recording times and resulting processing times are really extreme, far off from what I have experienced myself so far. But your large PAM files suggest a large image size. How large is the screen area you are recording?. > ... converting such that big files give me 251 mb of first.gif and 220 mb of second.gif with -layers Optimize. and it just take no more than 5-6 second to render with kdenlive or ffmpeg in terminal. ( I am writing this to assuere that my machine is healty).\nCan you explain more what you did, a bit confused by the use of -layers Optimize and the statement that it took only seconds with ffmpeg? Did you use ffmpeg or ImageMagick to do the conversion? Trying to understand the difference here. My experience is that as soon as you use convert with -layers optimize the resource usage blows up. For reference Peek just runs (variables just added to make it clear what is used there):\nconvert -debug None -set delay $framedelay -layers Optimize -define registry:temporary-path=$sometempdir $inputfile $outputfile. > really small, it just \"1613x738\"\n\nUnrelated to the issue here, but recording this area as GIF is not really small, especially when doing more than just a few seconds. IMHO you are better served with setting WebM or MP4 as output format here. You can also experiment with the framerate, but Peek's default framerate of 8fps is already pretty low and tuned towards GIF recording.. The reason I am not recording to webm/mp4 and convert this to gif are:\n\n\nAs both formats are lossy and can cause color artifacts, this sometimes lead to even more color problems when doing the GIF conversion. Got better results when converting directly the lossless input (see https://github.com/phw/peek/issues/116).\n\n\nWhenever I tried to convert webm/mp4 with convert directly, it first converted the input file into a temporary .pam file and then ran the GIF conversion on that. So Peek now records directly to .pam and feeds that to convert, avoiding the additional conversion step (which took quite some time and extra disk space)\n\n\nWhat I see most other tools are doing is saving the frames as separate PNG files. Maybe this is faster, have to test. Could even save some space for the temporary files. Downside is I cannot easily do this with the gnome-shell backend, as I cannot control the final output sink of the gstreamer pipeline used and it expects to output a single file.. Had a quick look at silentcast: It first records lossless video file as ffvhuff in a Matroska container, converts this to PNG files and then runs ImageMagick on the PNG files (with the same -layers optimize option turned on).\nI had always tried avoiding any additional conversion step to an intermediate format (PNG in this case), but will try and compare. If this turns out to be more resource and / or time efficient I will use this. The important things to measure are:\n\nTotal conversion time\nMaximum memory use\nMaximum temporary disk space use. Some preliminary results: I have two files input.pam (274.6). and input.mkv (85.7 MB). The PAM file is a rawvideo file as used currently by Peek, the input.mkv is a ffvhuff encoded lossless file. Both have  identical content (actually I recorded the MKV file with a patched Peek and converted the PAM file from it with ffmpeg). The recording is 10 seconds long at 8fps and a size of 1009 x 1055 px.\n\nI convert the PAM file to GIF similar how Peek does it currently using the following script:\nconvert -set delay 12.5 \\\n  -layers Optimize \\\n  -define registry:temporary-path=$(dirname $0)/tmp \\\n  input.pam output-from-pam.gif\n\nFor the MKV file I convert it to PNG first and then convert the PNGs to GIF (similar to how silentcast does it):\nffmpeg -i input.mkv -r 8 png/f-%03d.png\nconvert -adjoin -delay 12.5 } \\\n  -layers Optimize \\\n  png/f-[0-9][0-9][0-9].png output-from-mkv.gif\n\nThe result is in both cases a 6.6 MB sized GIF, the output of both conversions is binary identical. I measured the execution time and RAM usage using the \"time\" utility:\nCommand being timed: \"./convert-mkv.sh\"\nUser time (seconds): 47.03\nSystem time (seconds): 3.33\nPercent of CPU this job got: 145%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:34.56\nAverage shared text size (kbytes): 0\nAverage unshared data size (kbytes): 0\nAverage stack size (kbytes): 0\nAverage total size (kbytes): 0\nMaximum resident set size (kbytes): 2874384\nAverage resident set size (kbytes): 0\nMajor (requiring I/O) page faults: 0\nMinor (reclaiming a frame) page faults: 1832389\nVoluntary context switches: 1888\nInvoluntary context switches: 13678\nSwaps: 0\nFile system inputs: 8\nFile system outputs: 37936\nSocket messages sent: 0\nSocket messages received: 0\nSignals delivered: 0\nPage size (bytes): 4096\nExit status: 0\n\nCommand being timed: \"./convert-pam.sh\"\nUser time (seconds): 39.59\nSystem time (seconds): 3.21\nPercent of CPU this job got: 134%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:31.73\nAverage shared text size (kbytes): 0\nAverage unshared data size (kbytes): 0\nAverage stack size (kbytes): 0\nAverage total size (kbytes): 0\nMaximum resident set size (kbytes): 2873844\nAverage resident set size (kbytes): 0\nMajor (requiring I/O) page faults: 1\nMinor (reclaiming a frame) page faults: 1763222\nVoluntary context switches: 1582\nInvoluntary context switches: 9802\nSwaps: 0\nFile system inputs: 24\nFile system outputs: 12944\nSocket messages sent: 0\nSocket messages received: 0\nSignals delivered: 0\nPage size (bytes): 4096\nExit status: 0\n\nSo in summary converting to PNG first was about 8% slower, both methods used about the same amount of maximum RAM (2.74 GB). No win here for the PNG method.\nThe temporary files created by Peek are much smaller for PNG method:\n\nPAM file: 274.6 MB\nMKV file + PNGs: 85.7 MB + 12.6 MB = 98,3 MB\n\nDid not measure any temporary files created by ffmpeg or convert processes, if any, but I guess this is about the same in both cases.\nI have to test this with a larger file, one of the category that really makes trouble. But so far I don't see much difference. The longer processing time could be an acceptable trade off for lower temp file sizes, as those tend to get very big at the moment.. For reference this is the GIF result from the above test:\n\n. I am not sure I will continue on this issue, my tests brought no real benefit of the silentcast method.\nBut please try the latest release of Peek (1.1.0). Peek now handles the memory limits of ImageMagick. In your output above one can see that you have a memory limit of 256MB by default. This is really low for convert, and it will fall back of using disk instead, which is way slower and could explain your long rendering times. The new Peek will allow convert to use 90% of free RAM (at time of invoking convert).. I just pushed changes that allow using ffmpeg directly instead of ImageMagick to convert the video to GIF. In my first tests this runs far less resource intensive and faster and produces sometimes even smaller output files. Could you give latest master branch a go and let me know if this works for you?\nIn order to use it you will have for now to start Peek with PEEK_POSTPROCESSOR=ffmpeg set, e.g.\nPEEK_POSTPROCESSOR=ffmpeg peek\n\nIf ImageMagick is out of the equation I can also use compressed temporary video files (e.g. ffvhuff as in my tests above), greatly reducing the temporary space required.. I close this, as latest Peek from git now uses either ffmpeg or (if installed) gifski, both tools don't use that exorbitant amount of RAM. Also the temporary files are now much smaller. Overall I think peek now does solve this even better than silentcast.. That's DBUs activation being enabled for the app. Don't know why this is not working for you, never had any issues with it on Unity. Is there any output in journalctl when you try to start it?. Great this is solved. ~/.local/share/applications/peek.desktop is a custom shortcut, this must have been manually created. It should not exist due to any official installation method. How did you install peek anyway?. That with lock to launcher makes sense. Never tested this, will have a look :). I cannot reproduce this in my Ubuntu 16.04 install with Unity. First I do not see the \"Add to dash\" entry (for none of the icons in my launcher). I have \"Lock to launcher\", which I can use and it works.\nAnd never do I get any entry in ~/.local/share/applications/ or duplicate entries in the dash. Is your Ubuntu 16.04 up to date with the latest updates?. Closing, as I can neither reproduce this nor do I think this is a specific Peek issue. The desktop file is not special in any way, this looks rather like an issue of the launcher.. It is hard to say what you mean with \"better quality\" and \"less pixelated\", can you provide an example.\nIn general you should be aware that the GIF format is limited to 256 colors. So if you record something with many colors you will get color distortions and dithering. In general ImageMagick does a decent job at getting a good color palette, but it can't do magic ;) \nHaving said this it could be possible to tweak this in Peek by calling imagemagick with maybe different dithering algorithms to improve results (but this quickly depends on the type of content you captured).\nFor some background see\nhttp://www.imagemagick.org/Usage/anim_opt/#color_problem\nhttp://www.imagemagick.org/Usage/quantize/#colors. @NolanSkyKinsley GIFV is pretty much just a fancy marketing term for using MP4 in place of animated GIFs :)\nPeek already supports recording MP4 (and WebM), you can choose the output format in the settings.. Just to comment on the two GIFs you posted: The second one uses dithering to create the color gradient, which produces those single pixels, while the first one uses distinct color areas, which is why you see those clear lines of color (as GIF just does not allow for enough colors to make it really smooth).\nPersonally I think the second image gives a better overall quality of the image when viewed. I really have to look really closely to realize the colors are dithered, while I clearly see the colored lines in the first image without looking closely. But this is probably a) a matter of preference and b) it really depends on what you capture.\nI can try making this an option, but it is rather low on my priority list.. You might be interested in #212 and try the latest git release (see instructions in the ticket there).\nTL;DR: I added support for the new gifski utility to generate the GIFs. File size is bigger, but quality is amazing.. I consider this closed with the inclusion of the excellent gifski tool. See #212 for details, but the bottom line is that you have to use the latest git version and have the gifski tool installed, then you will have high quality encoding with configurable quality setting.\nIf you don't want to install from source you can also use the flatpak development release, it already includes gifski.. That is very strange, what desktop environment are you using?\nWhile recording this darkening is not visible inside the Peek window, right?. This is an issue with ffmpeg and VAAPI, looks like you need a newer version of libva than you have installed. This is not something Peek deals directly with.\nNo issues here using ffmpeg 3.3.3 with libva 1.8.3.. In the currently released version you need compositing enabled in your window manager. Depending on the desktop environment / window manager you use there should be some option to enable it.\nThe current git version works without compositing.. I close this as I strongly suspect the missing compositing is the issue here. If this does not solve your problem feel free to comment again with additional info on the desktop environment and / or window manager you are using and I will reopen.. It is very unusual that a package from repositories creates anything in /usr/local, that looks strange. You are sure the package got installed?\nWhat is the output of\ndpkg -s\n\nAlso you need the convert utility installed, does it exist?. Great ist works now :). Flatpak should work, can you give details on the error when you run it from console? It is likely you run into https://github.com/phw/peek/issues/11\nWhen did you try installing the Snap? Current version should work, the version up on edge a couple of days ago would have the issue you described. In general the snap support is experimental and changes currently.\nYou can also try the beta channel, which is reported to work:\n  So\n\nsnap install peek --beta. Sounds like a file permission issue to me. Did you install Peek Flatpak from flathub or following the instructions in the README (which uses my own Flatpak repository)?\nCould you try installing the latest master release via \nflatpak install --user http://flatpak.uploadedlobster.com/peek-master.flatpakref\n\nAnd run that with\nflatpak run com.uploadedlobster.peek//master\n\nI fixed a file permission issue there, might be related. Thanks a lot for reporting :). I have put out a new release with updated Snap and Flatpak packages. Could you try those (please see the updated Snap install instructions in the README)?\nI cannot reproduce this issue at all, but I think this is related to the file permission bug Peek had before the 1.1.0 release.. Closing for now, as I expect the packages to work. Please let me know if there are still issues and I will reopen this.. Please see #112 for discussion and workarounds. Basically you have to increase your ImageMagick resource limits.. Sorry, unfortunately I never took the chance to learn French, so I'll have to answer in English :)\nFrom what I can tell via Google translate you want to be able to capture multiple times with interruptions / pauses, and only when finishing the final recording a final video will be generated consisting of all the recorded parts. Is this about right? Maybe similar to #40?. Closing as duplicate of #40 and #250. Thank you very much, that's most appreciated.\nJust as an info you can also update the translations online at https://hosted.weblate.org/projects/peek/translations/ . Changes there will automatically get merged back.. > cache resources exhausted\nImageMagick needs quite some memory to complete the rendering. How much free RAM and disk on /home do you have when you run Peek?\nAlso your GIF will get very large quickly (several hundred MB) when recording large screen areas for a longer time, don't think this is useful. Try using the WebM or MP4 format for this use case. I should add a prominent warning about this somewhere :)\n\nIt almost appears that it's trying to Save before it's done Rendering\n\nNo, it doesn't :). That's plenty and a 10 second clip should definitely work. Can you try running with\nG_MESSAGES_DEBUG=all peek\n\nand paste the console output of a failed run? The latest version sets the memory limit for ImageMagick to workaround the issue that on many distributions it is set to a very low default. Maybe this is not working as expected and sets it too low. The debug output will tell.. There are changes in the current development version to use ffmpeg instead of ImageMagick. This should finally resolve the various cases of resource usage bugs reported here.\nCan you try the latest development version and tell me how it works for you?\nI am going to close this in favor of #125. It's not just Ctrl-Q, it's also \"Quit\" in App menu or everything else that closes the application directly(as opposed to closing the window). That means the application close event needs to be interrupted and everything handled there. Might need some refactoring, but haven't looked into it yet.. This was easier than I had originally thought :). This is pretty strange, especially that it seems to be coupled to mouse actions. Can you try two things:\n\n\nTry recording a WebM or MP4 file instead of a GIF (you can change this in the settings). This will tell us whether the behavior is in the recorded video or happens during conversion to GIF.\n\n\nIf you are using Gnome, try the ffmpeg recording backend. For this start first start Peek from command line, it will output which recording backend it is using (on Gnome it should show gnome-shell, otherwise ffmpeg). If gnome-shell is used, try\npeek -b ffmpeg\n\nand see if the issue is still reproducible.. > Recording an MP4 does not work at all.\n\n\nYou need gstreamer1-plugins-ugly installed for MP4, see https://github.com/phw/peek#fedora . But testing with WebM alone should be fine for this issue.\n\nbtw, fedora 26 runs on wayland, not X11. I don't know if this makes a difference.\n\nA huge one, in this case you are limited to the gnome-shell backend. Wayland does not allow arbitrary clients to capture other windows, as X does. Hence your result with only the mouse cursor when using ffmpeg.\nThe interesting results are, that WebM works without issue, but when recording a GIF the issue is still tied to mouse movement even if the mouse is not recorded. Do mouse actions outside the recording area also effect this?\nAt this time I suspect it is not actually the conversion from video to GIF, as this has no relationship to mouse actions, especially when the cursor is not even visible. So it must be the recorded video. For GIF recording a pretty large lossless video file gets recorded, maybe your system starts dropping frames because it gets too busy. Not sure why simple mouse movements should cause this, though. Do you see anything special in resource usage while recording? Maybe also check disk IO with iotop.. >> You need gstreamer1-plugins-ugly installed for MP4\n\nI just installed it. Same result (black gif with corrupted pointer movement).\n\nNo, the black GIF happens when you try to record with ffmpeg backend, that just won't work on Wayland, you have to use X for that. gstreamer1-plugins-ugly is needed for recording MP4 with the gnome-shell backend.\n\nI don't know if these Past duration X too large mean something for you.\n\nMaybe. Can you make this WebM available somewhere so I can test?. I tried two things:\n\n\nI tried to reproduce this issue. Could have been nobody realized, since I mainly record short snippets where I constantly interact with mouse / keyboard or if not there is no animation that makes the speed up visible. But my self recorded GIFs have a constant speed no matter whether I move the mouse or not. I will later try to reproduce with Fedora 26\n\n\nI tried converting your WebM file to a GIF with the same convert command Peek uses, but the result is fine. However, even in your WebM there is one small speedup at 13:49:46 . Could be framerate related, though.\n\n\nOne thing you could try is increase the framerate in settings. I mean for keeping the GIF size and processing time low it is really best to keep the framerate as low as possible, but for testing maybe it gives us a glue what is happening here.. I just pushed some changes that remove the need to use ImageMagick for GIF generation and uses ffmpeg instead. This is actually something that could solve your issue here, too.\nCan you try the latest github revision? As you are on Fedora the easiest way is probably to use the devel Flatpak from peek-master.flatpakref .\nTo run with ffmpeg GIF generation you have to set PEEK_POSTPROCESSOR=ffmpeg, so e.g. for the Flatpak version start it with:\nPEEK_POSTPROCESSOR=ffmpeg flatpak run com.uploadedlobster.peek\n\nOr if you installed from source run PEEK_POSTPROCESSOR=ffmpeg peek.\n. Ok, the last run is actually interesting, because it rules out ImageMagick as the point of failure.\nSo next steps:\n\nI still need to try to reproduce this on Fedora 26. I have only a VM, though, so results might not be comparable.\nI will push changes how the intermediate video file for GIF gets recorded in the next days. Those changes might make a difference.\nIf you could try again on X11 but with -b ffmpeg this would also help to narrow down the cause (if this works well it would mean gnome-shell recording is to blame)\n\nAnd thanks a lot for all your debugging.. Thanks again, I had expected this. For me this looks like an issue with the GNOME Shell screen recording, but still not sure why this happens. I tried to reproduce this on both Fedora 25 and 26 without luck. I recorded GNOME system monitor as this updates periodically. Just to be sure: The issue is independent for you of the software that is recorded, right?\nNext thing will be that I change the intermediate video format. Still looking into the best video codec to use for this with GStreamer. I want to use a compressed format to have smaller temp file sizes (currently it writes the raw video stream to disk, and that gets huge quickly), at the same time it must be high quality to avoid color palette issues in the final GIF. Also it should be available in free GStreamer packages and not require any non-free package.. Ok, I will close this issue then. As I said earlier this is or was likely an issue in Gnome Shell itself.\nRegarding the Flatpak: The difference in look.is because Flatpak cannot use the GTK theme from your system, as themes are not compatible between GTK Versions. That's why by default all Flatpak apps use Adwaita. But some themes have been packaged as Flatpak addons in flathub.org, installing them allow Flatpak apps to use those themes.\nFor uninstalling you will need to use the --user switch, as this Flatpak was installed in user mode and not system wide:\nflatpak uninstall --user com.uploadedlobster.peek. This should work, can you check your flatpak version and what `flatpak list -a` shows? It should show both `com.uploadedlobster.peek` and `com.uploadedlobster.peek.Locale`. If `com.uploadedlobster.peek.Locale` is missing, try removing and reinstalling `com.uploadedlobster.peek`. It should pull in the Locale package as well.. Btw, the arabic translation is missing a single string that is marked as requiring review, could you take a look?\n\nhttps://hosted.weblate.org/translate/peek/translations/ar/?type=fuzzy\nThanks in advance. \u0634\u0643\u0631\u0627 \u062c\u0632\u064a\u0644\u0627\nI have taken your suggestion and the translation is finally 100% complete again :D \nAlso glad to hear this worked after a reinstall, I'll write this off as an Flatpak oddity.\n. Thanks a lot. Don't forget to add yourself to the translator-credits string ;). Just in case you didn't know, you can also translate online at https://hosted.weblate.org/projects/peek/translations/it/ . Changes there will directly get written back to the github repository.\nBut if you prefer working offline and open pull requests here that's also fine, it works in both directions :). Cool, thanks. The build errors with\n/home/travis/build/phw/peek/po/it.po:76: 'msgid' and 'msgstr' entries do not both end with '\\n'\nCan you take a look?. grazie mille. @pharaone There are a couple of strings marked as \"fuzzy\" / needing review, see https://hosted.weblate.org/translate/peek/translations/it/?type=fuzzy\nAre those ok?. Thanks for the quick feedback, I just updated them. Thanks a lot. Not sure about this one, especially as this is hard to predict. I am currently changing the GIF generation and I hope to get rid of all the resource issues Peek currently has, so this might not be necessary anymore.\nCould you try the latest development version and see if this works better for you in general?. I have finished my refactoring of the recording. I got rid of the imagemagick post processing, which had this exorbitant memory usage. This also allowed me to refactor the recording itself and use a compressed temporary video file again.\nThat means both disk and RAM usage are now significantly lowered. I still don't see an easy way to have get a proper estimate of the available recording time across all supported formats and recorders, and I have no intentions for monitoring disk and memory usage, there are dedicated tools for this. So I will close this issue.\nI might add a display of elapsed recording time somewhere, as I think this is useful and actually in the scope of Peek. But that's a different story :). https://github.com/phw/peek/issues/214. Yes, duplicate, but see especially #125 . There are changes in the current development release to get rid of ImageMagick, which should eliminate those issues finally.\nCan you try the latest development release and tell me how this works for you?. This does not seem to be the latest code you are running. Please try installing via the daily PPA (see https://github.com/phw/peek/blob/master/README.md#ubuntu) or from source. \nInteresting is the Gtk-WARNING **: Failed to measure available space warning, not sure where this comes from, is there anything special about your /home/steve/.cache folder (tmpfs or something)?\nIf you want to continue using the stable version you must be aware that ImageMagick needs quite some RAM and disk space for processing GIFs (several GB are not uncommon). Peek 1.1.0 will by default give ImageMagick 90% of your free RAM, so make sure you have plenty of RAM free when recording. If ImageMagick runs out of RAM it will use the disk instead.. That's strange, as it still uses ImmageMagick, and the latest code should default to using ffmpeg. Can you try running it with PEEK_POSTPROCESSOR=ffmpeg peek?\nOr double check if you are running the correct binary. A source install will default to be in /usr/local/bin/peek.. You are probably running the older packaged version from /usr/bin/peek, please run the source install from /usr/local/bin/peek. Sure, but this is mainly their thing to do :)\nSee also https://github.com/phw/peek/issues/78\nNot sure how the flow of packages between Debian and Peek is nowadays.. Weird. Looks like something goes wrong when the palette file gets generated. Can you post the complete output of Peek? I suspect the actual issue is already earlier, maybe we can see something in the output. Also it is important to know whether the ffmpeg or gnome shell backend was used (it will always be ffmpeg unless you are using gnome shell).\nFor a quick workaround run peek with PEEK_POSTPROCESSOR=imagemagick peek and it will use the old approach for GIF (this won't help with APNG, this only works with the new code).. @gort818 This is very strange, are you sure release 1.1.0 works? Because your ffmpeg recording already fails, in  both cases the recorded file is empty (\"Output file is empty, nothing was encoded\" and \"Finishing stream 0:0 without any data written to it.\"). And absolutely nothing changed in this regard, ffmpeg in 1.1.0 gets called exactly as in the current development version. For how long did you record? What desktop environment are you using?\n@irk3n-dev Likely a different issue, please open a new issue and post the full console output of Peek there.. Still not sure what is happening here. I checked, the recording of the pam file is completely unchanged compared to 1.1.0 . Also cannot reproduce, maybe I have to test with Cinnamon.. Can you all try the latest git revision again? I could finally reproduce, changed the intermediary output format. This is probably an intermediate fix, but curious if it fixes your issues.. > ah, maybe you already know,\nI didn't know, but I kind of expected this (it works for me, but ImageMagick relies on global config files for this). But I think the ImageMagick backend just has to go, especially when we have both ffmpeg (fast, low RAM usage, small gif size, ok quality) and gifski (slow, low RAM usage, large GIF size, excellent quality) ImageMagick does not bring anything to the table (slow, huge RAM usage, small gif size, ok quality). This is fixed in the git master branch.. @C0rn3j  This specific bug was never released and is already fixed. If you have issues recording with the current stable version I recommend trying the latest development version.  But there will be a new release soon.. Is this the default Ubuntu theme? Which version of Ubuntu is this on? Maybe I have to tweak the styling for this particular theme a bit.. Actually it is so thin by purpose, but with the Adwaita theme or Arc (which I use) it is not a big deal, since the area to grab for resizing is larger then just the thin border (you can grab slightly outside the border).\nI have to test, maybe you could even click slightly inside the border, but this is prevented by the click through of Peek. If so I might make the click-through area 2 or 3 pixel smaller to allow for easier resizing.. > Please tell me if I can help you or if you need more details about the issue.\nI will take a look. What GTK theme is this then?. I cannot really reproduce this. This is how Peek looks with the default Ubuntu Ambiance theme on Ubuntu 17.10 GNOME:\n\nYou can drag the border easily, as the entire shadow area around the window is draggable.\nSame on 16.04 Unity:\n\nHaven't tested that KDE theme yet.\n. Now I also tried the Breeze theme. It maybe looks thinner, but behaves exactly the same. Just to make this clear: In the screenshots above I have easily an area of 10-14 pixels around the edge where I can drag. Isn't that the case for you?\nAlso I can make the visible border around the inner recording area thicker, but that has no influence on the area that is available for resizing. Peek just provides as much space for resizing as every other window I tried to open.. @davidv171 The only screenshot here that looks of is https://i.imgur.com/GoITz3b.png from your original report. This is also Ambiance, right? What desktop environment is it?. Just an update: In order to reproduce this I tried installing KDE Plasma in my Ubuntu 16.04 VM. Unfortunately Plasma is completely unusable and broken there (most windows are undecorated and full of graphical glitches) and I can't really test with this. Maybe I should install a newer Kubuntu instead or run on real hardware via live CD.. I installed KDE Neon in a VM to test this, and yes, I can easily reproduce it. Unfortunately this seems to be an issue with KWin having issues with GTK3 client side decorations (CSD). For some reason the drop shadow is not rendered (which in case of CSD windows GTK3 would need to do). I don't know whether this is a defect in GTK3 or KWin. I could also reproduce the very same annoying issue with GNOME Todo and GNOME calculator.\nThere are two workarounds:\n\n\nChange the GTK3 theme\nIn Settings > Application Style > GNOME Application Style set the GTK3 theme to \"default\". Now Peek will have a larger draggable border, but GTK applications will look a bit out of place and less integrated.\n\n\nSet theme and window manager overrides for Peek\nBasically do what is described in https://www.reddit.com/r/kde/comments/563snw/no_shadows_around_some_windows_in_kde_57/ for Peek.\nIn [ System settings ] -> [ Window management ] -> [ Window rules ] -> [ Appearance & Fixes ] , set [ No titlebar and frame] to No\nIn [ System settings ] -> [ Application Style ] -> [ Window decoration ] -> [ Breeze theme setting ] -> [ Window specific overrides ], Set [ border size ] to Normal and set [ Hide Window title bar ] to yes.\nThe last step differs a bit from the linked description. The border size should be set to Normal or Tiny, but not No border. With No border you would get an ugly resize triangle in the lower right border, which also is visible in recordings. Still this looks a bit odd, as there will be an extra frame around the Peek window, but it makes it usable.\n\n\nNext step is trying to figure out if I can do anything in the theming to make it work a bit better on KWin with Breeze. After all the default GTK3 theme Adwaita seems to have a workaround for it.. Related discussion and bug: https://bugzilla.gnome.org/show_bug.cgi?id=729721\nThe status quo is that GTK does not draw the shadow, as it causes issues with KWin. Not sure exactly what the issues are, but presumably it has to do with size calculations, as the shadows are outside the window and should not be taken by the WM as the outer border of the entire window.. I made some changes to the theme to allow for a larger resize border on Plasma if the Breeze theme is used:\n\nCould you try the latest development release to see if this fixes your issue? Daily PPA builds and Snap package on edge  are currently building and should provide the latest code soon.\n. @cGuille I guess the theme detection is not working as it should. Currently I have to detect whether KDE is running to get th\nKDE's theme config. Could you give me the output of env on your system. Especially the values of XDG_SESSION_DESKTOP, DESKTOP_SESSION and XDG_CURRENT_DESKTOP.\nBasically all KDE users using the default theme are affected. I think given the general disagreement between the KWin and GTK teams regarding CSD it is unlikely we will get a proper solution from upstream, so a workaround sounds like a good idea.. @cGuille Ok, that should work. What is the contents of $HOME/.config/gtk-3.0/settings.ini? Can you also start Peek (latest source again) with\nG_MESSAGES_DEBUG=all peek\n\nThat should output the detected GTK theme.. That's actually all looking good :( No idea why this is not working. What KDE version on which distribution is this? I only tested on KDE Neon with latest Plasma.\nEdit: Also the GTK version. Could be the required CSS class is missing.. > What is MADE and how can I find out its version?\nSorry, I am writing from my mobile and auto correction jumped in, meant KDE. What GTK version is installed?. Yes, thanks a lot for this info. I will try to figure out what's still going wrong :). @cGuille I tested on Kubuntu 16.04 with Breeze theme, works for me. I tested on the live CD and installed from daily PPA. Could you also test the daily PPA version:\nsudo add-apt-repository ppa:peek-developers/daily\nsudo apt update\nsudo apt install peek. That's the latest version. Have you disabled all the KDE settings overrides that I mentioned above as a workaround?. > Oh no, I thought it was either the workaround or the fix. Sorry.\nNot sure we understand each other: The fix alone should be enough. The workarounds should not be applied in this case. I don't know what happens if you apply the workarounds, but it could very well interfere with the fix... Back at this again. @gandalf3  I like your suggestion, so I have it a quick and dirty try. In the branch https://github.com/phw/peek/tree/easier-window-resizing-on-kde the click-through behavior is disabled while not recording. And then you can easily resize as you said using the mouse (Alt + right click). Currently it is a bit confusing, because the overlay is not shown, so the area is completely transparent. But I will likely clean this up and show the overlay all the time.\nApart from this I am still puzzled why the theme changes are not applied in some cases. For me Peek works very much like any native KDE application regarding the resizing behavior. For me the resizing area at the edges in anooyingly small in all apps, this seems to be a general issue with the Breeze theme.. I wanted to test this myself before merging anything, but don't have the time for it right now. But for all that I know i3 does not support the X shape extension, and without this the click through cannot work AFAIK. See also https://github.com/i3/i3/issues/2742 .\n@McKean Is clicking and interacting with the recorded content possible for you or just the recording? Do you have a compositor (e.g. compton) running?. I am not an i3 user, but I think now I get it. While click-through is not working on i3, i3 is flexible enough to do with Peek whatever you want, also having it ignore Peek's wish to be always on top and send it to that hidden scratchpad workspace where it is not visible but still maintains its coordinates. Is this about right?\nThanks for this addition to the documentation.. Yes, I already considered this but never actually implemented it. Needs some way to handle duplicate names (e.g. just append (1) or so). Not high priority, but patches welcome :). As Peek is only using the built-in screen recording capabilities of Gnome Shell this is most likely a Gnome Shell bug (as also noted in the launchpad bug).\nCan you try recording a video in GNOME Shell itself and see if this also freezes your display? The default keyboard shortcut for this is Shift + Ctrl+ Alt + R, but this can be changed in Gnome's keyboard settings. Recordings are saved in your Video folder.. @EECSGEEK The preferences are available from the app menu. On GNOME Shell this is available by clicking on the application name (\"Peek\") in the upper status bar on the left. On Unity it works the same. If the app menu is disabled by configuration or if you are using a DE that does not support the app menu, it will be shown in the Peek window's headerbar (there will be a Peek icon which will open the app menu).. I tried to reproduce this with Ubuntu 17.10 under wayland, but it works for me without issue. Anyway, this is pretty sure a Gnome Shell bug. Peek itself does nothing else but instruct Gnome Shell to start recording.\nThere is a upstream report at https://bugzilla.gnome.org/show_bug.cgi?id=790008 . I would recommend you add details about your system to this bug report, that might help the Gnome developers to track this down. Maybe you all have a common setup, this could e.g. be video card / driver related.\nAs a workaround switch to X.org for now. Closing as upstream issue.. I see how this makes sense in some cases. As you are limited to the keyboard shortcuts then this is definitely an advanced option, but I could even show a small hint \"Press Ctrl+R to start\" into the window.\nI will consider this, but not high priority right now.. I just implemented this as it was easy enough to do, start peek with --no-headerbar. I first feared hiding the headerbar would break the layout, but at least here it looks ok.\nI will keep this issue open as I want to add that indicator showing the keyboard shortcut to use. Also maybe some testing with more themes.. Not quite.  You first have to start peek  with --no-headerbar, than another call to peek --start will start recording (in all open windows if you have opened multiple). Something like this:\npeek --no-headerbar &\npeek --start\nYou can stop again later with\npeek --stop\nBut I probably should change Peek so that peek --start first opens a new window, if there is no window yet. Than peek --no-headerbar --start would work.. It's likely I will release this feature as is in 1.2.0 and improve the user experience later on.. See #234. No, this is the typical \"cache resource exhausted\" error you get due to ImageMagick's excessive RAM usage.\n@RokkerRuslan Peek 1.1.0 uses ImageMagick to convert the recorded videos to GIF files. I would recommend you to use the latest development version which does not use ImageMagick anymore and is lighter on resources. Easiest way for you is probably to switch to the daily PPA, see https://github.com/phw/peek/blob/master/README.md#ubuntu\nAlso see https://github.com/phw/peek/issues/196 for related discussion.\nIf you want to keep using Peek 1.1.0 stable some advice:\n\nRecord smaller video (smaller screen area)\nUse the MP4 or WebM formats for recording\nMake sure you have enough free RAM available (I'd recommend at least 2-4 GB, but it's not easy to say how much ImageMagick will actually need).\n\nClosing this as a duplicate of #125, #196 and others.. Thanks. I wanted to avoid having too detailed info here and keep the install instructions as concise as possible, but it seems to be an issue sometimes :) . Please see #190 , seems to be the same issue. But I closed #190 because it magically went away, and it didn't look like a Peek issue but rather some oddity with the screen recording in GNOME Shell.. Thanks a lot for this :) I will have a look, but it will take a few days. But I definitely want to include this into the next release.. @p-e-w Thanks for the feedback. And kudos for ternimal, clearly one of the coolest things I've seen in a while :)\n\nThe header bar is wasting space at the moment and more than these two buttons can fit.\n\nWe don't have too much space here actually :) Even the current record button was considered too large by some. Currently the button's label will hide when you resize the window below a certain threshold (I just noticed this functionality is broken in this branch, but we can fix this up later). So whatever we add here should be (a) secondary functionality and (b) it should hide if there is not enough space to allow for smaller window sizes.\n\nThat way, you have a natural language sentence expressing what is going to happen.\n\nI am not so keen on your frame rate idea, but maybe we have to see how it would look like. But the language structure is a problem in localization. If we want to do this properly we would need to have the button position localizable, and I don't think this helps in getting a consistent interface.\n\nI also think the widgets should be left-aligned in the header bar instead of centered, which is what other applications using buttons in the header bar (Gedit, Simple Scan) are doing. The center/right area would then be freed up for information like rectangle dimensions, time elapsed, file size estimate(?), or similar, which is currently sorely missing.\n\nI agree in general, moving the button to the left will give the proper space to other information. Time estimate is definitely missing (#214). Not sure why I would need the dimensions during recording (but maybe display them when not recording, and show time elapsed instead during recording). And I don't think there will be a file size estimate unless somebody comes up with a fairly accurate implementation that works across all formats, encoders and quality settings Peek supports (see also #195).\n@gort818: if you want to give this a go you are welcome. But I would suggest we get this change merged first and then go on with further restructuring. And as you said, the idea with the many buttons could get cluttered, I would first focus on the moving the button left and show additional info.. Thanks for this, looking good now :) I will give this a final test and merge it than. I'm still pretty busy with work prjects and I need a clear head for peek, so give a few days.\nAnd thanks a lot @p-e-w for the detailed review, much appreciated.\n\nOne thing that looks odd to me is that OUTPUT_FORMAT_X are constants rather than an enum, though I recognize that this was already the case before so if at all it should be resolved independently from this PR.\n\nI originally wanted to do this as an enum, but than had trouble to figuring out how to bind this to the settings schema and doing string comparison was easier without investing too much time. PRs or suggestions to improve this welcome.\n. Just two minor changes. The icon as posted above, and also I noticed that the format is not visible in the button text on initial launch. I think something like\nselect_format (settings.get_string (\"recording-output-format\"));\n\nin the constructor should do the trick.\nUPDATE: Actually this.recorder.config.output_format should already be available if you access it after the call to settings.bind. And merged :) Thanks a lot, good work. . I haven't had too many code contributions so far, but I should start adding an AUTHORS file. Please let me know how you would like to be credited there.. Is this the latest Peek version? There was a fix for this in Peek 1.0.2, see https://github.com/phw/peek/issues/146. Closing this as I think that an older Peek version (< 1.0.2) was used here. Feel free to comment if this is not the case.. I can finally reproduce. Actually the countdown is not included at the beginning, but on the very last frame. Looks like this is happening when recording stops and the UI gets reset again for the next recording.. Ok, can't reproduce it again and looking at the code path I have no clue what could cause it. The timeout really should be hidden until a new recording gets started. . I got another weired case where the countdown was shown neither at the start nor end, but 1 or 2 frames into the animation. Unfortunately I deleted the file.\nReally not sure what is happening here. Might be some GTK3 quirk.. Actually this even happens to me without the countdown active in many cases, but it is not reliable reproducable. Just sometimes I get a gray frame. This currently has highest priority for me, I want to get this fixed for the next release. In the worst case I have to add some random timeout.. I pushed a change from which I hope will fix this issue. But as this is so hard to reproduce for me I can't be sure. I would aprreciate if someone could test the development version a try and use this for a while to see if this issue is gone.\nEither build from source or use the Flatpak dev version (see README), this is already up-to-date.. Hooray! I haven't had the issue, too, so far. Let's hope this really fixed it. I will do a new release soon.. I consider this closed for now with Peek 1.3.0 (will be available shortly).. I just had it again :( Countdown visible in the first frame. I have to investigate again.. You probably need to run \nglib-compile-schemas /usr/share/glib-2.0/schemas\n\nafter installing the RPM. You have to run this whenever you add or remove a schema file from that location. Actually the package management should handle this (my Fedora test installation does this automatically). But I don't have much experience with RPM based systems, sorry running this manually.\n\nDoes anyone know why peek is looking in the current working directory for this?\n\nIt looks in the current folder too make it easier to run from source for testing and development. Otherwise you would have to install the schema just for running from source. It is not meant to be used like this, do a make install or packaging for proper usage.. Great to hear you got it working. I am not sure how to handle this in the .spec file properly. It seems not to be necessary for Fedora, probably dnf runs this automatically when necessary.\nCurrently the .spec is pretty Fedora specific anyway :). I can't say for sure and can't test it for now, but try executing the following commands from command line:\nsudo snap install gnome-3-26-1604\nsudo snap connect peek:gnome-3-26-1604 gnome-3-26-1604:gnome-3-26-1604\n\nI currently would recommend to install Peek via command line. Peeks needs to be connected to the gnome-3-26-1604 snap, and snap does not yet fully automate this connection. The current status is that the second of above commands should be done automatically on installation, but installing gnome-3-26-1604 is still a manual step. I know the snap developers work on automating that, too, but it probably will take a few releases of snapd until that works.. > That worked (after a 150MB download).\nGood to hear :)\nYeah, that's how Snap (or Flatpak) works. Since everything is bundled the sizes increase. But that gnome-3-26-1604 snap can be shared between applications, thus the file size of the Peek snap can be a bit lower.. Installations instructions are at https://github.com/phw/peek#installation\nWhat problems do you actually have? As there are no CentOS packages I am aware of you can either install from source or try the Fedora packages and see if they are installable (probably not). Another option would be Flatpak, but not sure how this is supported in CentOS.. Another option is of course using the AppImage, that's maybe the easiest way if it is working on CentOS 7.. This sounds like you are missing the corresponding development packages. I don't know about the package naming in CentOS, but you likely need to install the development packages for gtk3, cairo and keybinder3. The package names likely end with -devel, something like gtk3-devel, keybinder3--devel etc.. This looks like an awesome tool. I will give this a test run as soon as possible and implement this in peek. Another option for replacing ImageMagick finally :). Here we go with a first quick implementation. For now hidden behind an environment variable. To test install the gifski executable somewhere in your $PATH and run latest peek from git with:\nPEEK_POSTPROCESSOR=gifski peek\n\nLooking good so far. I haven't done many tests, but the quality seems to be great. But the images are significantly larger, in my tests the size was roughly doubled.\nI like gifski and want to keep it as an option, but use ffmpeg by default. Not yet sure how to best expose this option to the user.. Some more observations: Rendering the GIF takes way more time than with ffmpeg, but memory usage stays low all the time :) Quality is much better. I will try to upload an example later.. This sounds an awful lot like the issues reported at https://github.com/phw/peek/issues/198\nI have no idea really, especially since I did not change anything in the recording itself. If you run\nPEEK_POSTPROCESSOR=imagemagick ./peek\n\nyou should get exactly the same behavior as with Peek 1.1.0, does this make a difference?. It's interesting, the initial ffmpeg command for recording the video (pam file) shows time=00:00:04.00 at the end. The later ffmpeg commands loading the file show Duration: 00:00:00.04. Something is wrong here. I have to refactor the recording part anyway (writing the data to that pam file only made sense in combination with imagemagick).. Can you try again latest master? I could finally reproduce, changed the intermediary output format. This is probably an intermediate fix.. gifski now supports a quality setting (0-100). This is interesting, because in a quick test a quality of around 50-60 gave me pretty similar results than ffmpeg, but with smaller file size. Ffmpeg still encodes faster, but it's kinda ok with gifski in lower quality settings.\nThere is a big case of making gifski the default and add a slider for quality. My current idea is to just do that with gifski, settting the default quality to 60. The user can then configure the quality with a slider. And if gifski is not available fall back to ffmpeg without quality setting.\nSome comparisson, first with ffmpeg:\n\ngifski quality 100:\n\ngifski quality 60:\n\n. I have made gifski the default. If gifski is available it will be used, if not Peek will fallback to ffmpeg.\nBy default Peek will use a quality setting of 60. But you can change it in the preferences, see below. This setting is only available if gifski is installed.\n\n. Thanks a lot for this testing. Yes, these results speak against gifski as default, especially as gifski cannot play out its huge advantage on the typical screen recording content (application interfaces without too many colors).\nMy results have been indeed different, gifski with q=60 was around the file size of ffmpeg, even a bit smaller sometimes. But the final file size depends so heavily on the recorded content and colors shown. For tests I encoded the WebM video in test.zip with ffmpeg, imagemagick and gifski in different quality. My results where:\n\nimagemagick: 4.1 MB\nffmpeg: 3.9 MB\ngifski q 100: 5.9 MB\ngifski q 80: 4.5 MB\ngifski q 60: 3.8 MB\ngifski q 40: 3.3 MB\ngifski q 20: 2.8 MB\n\nNew plan: I add a checkbox to enable gifski.. Which version of gifski do you use? gifski 0.5 compiled from AUR, or gifski-git, or the official binary from gifski release page?\nUPDATE: Additional discussion at https://github.com/phw/peek/commit/daba57c7b70694a36263fa4780b8af49afe9c16f. How did you install Peek? As it is not possible to install Peek in 14.04 from source I assume you are using the snap version, right?\nIf so, the snap.package is not yet update to include gifski. Due to the Sandboxer nature of snap apps it cannot use your system wide installation.. @andersaamodt No, not currently. The flatpak builds already include gifski, but I don't know whether you can run this on 14.04. I will update the snaps to include gifski before the next release.. @andersaamodt I have updated the snaps to include gifski, could you try the latest snap from the edge channel if it works for you?\nsudo snap install --edge peek . What do you mean with progress bar? Do you see the gifski settings in Peek's preferences. Thanks, that makes sense :). That last view already looks quite nice. What about centering the recording time between buttons and window controls?. Not sure actually, I consider myself a GTK beginner still :) But I could take a look, do you have the code up somewhere?. Please see https://github.com/phw/peek/issues/202 and the Gnome Shell Bug at https://bugzilla.gnome.org/show_bug.cgi?id=790008. You should also be able to switch to the Xorg session instead of Wayland.. Please see #202 and the Gnome Shell Bug at https://bugzilla.gnome.org/show_bug.cgi?id=790008. The files are removed after recording, if there are any left over files it is due e.g. Peek being interrupted during recording. Just clean out `.cache/peek`.\n\nMain  reason for huge file and memory usage was the use of ImageMagick. The next release gets rid of this and thus has a way lower temp space usage.\n\nMaybe it's better to place such files in /tmp, so that even after reboot the files are removed?!\n\nOriginally Peek placed the files in $TEMP, but that turned out to being a bad idea as it is a RAM disk on many systems.. I actually like it this way. We could still make the icon red (but keep the -symbolic version, just color it differently), but I am not sure this will work with all themes and I would like to honor theme defaults. Also the button being blue depends on  the theme, it uses the default for a \"primary\" button. E.g. on the new Ubuntu 17.10 theme it will be green.\n@p-e-w Thoughts?. I consider this closed for now, but feel free to comment on the new layout. Here is a screenshot for reference:\n\n. gifski support is not yet released. You will have to use the latest development version or wait for a new release (I plan to release soon). You can install development versions from source, as Flatpak or Snap or from PPA, see the README for details.. The ffmpeg recording is terminated, this is probably due to disk space issues. How much free space do you have in $HOME/.cache ?\nPlease also try the latest development version, the recording was refactored and Peek now requires far less disk space and memory.. Please see #202 and the Gnome Shell Bug at https://bugzilla.gnome.org/show_bug.cgi?id=790008. Fixed with #223. Good catch, thanks. I wish there was a less hacky way to identify that menu :(. Thanks again. True, needs to be changed now. Is setting the SMALL_WINDOW_SIZE enough or do we need to handle more due to the new layout with popover button?. I went a little bit different route and optimized the layout a bit. The 300 pixel still works for me now. I tested even with 18pt Cantarell font, still it's enough to trigger the label hiding :). Good idea! Yes, using the app title makes sense. I think the only reason I disabled it was that it made problems with the centered button layout. But since we don't use that anymore let's use the title for the time.\nThis also makes it easy to display two lines of information should we need it.. Great work, tried it and it is really cool. I have to get used to the new button location, but the recording time is really useful I must admit :) Also it is good to have it centered, it is easy to spot then.\nNow please just fix the spacing around = and += (lines 257 and 259) and this is good to get merged :)\nFYI: I want to get this merged and see how my fixes for https://github.com/phw/peek/issues/199 work out. Then give it a week to see if any issues pop up and give some more time to get translations updated. And next weekend I want to finally release 1.2.0 :). Thanks a lot again, merged. That's due of the sandboxing and limited access to the filesystem. As a quick fix for you run\nflatpak --user override --filesystem=home com.uploadedlobster.peek\n\nIn the end I am limited to the following choices, all of which currently require some compromises:\n\n\nThe status quo with limited file system access. Good from a sandboxing perspective but unsatisfying for the user.\n\n\nGiving access to the entire home folder. Better user experience, but it nullifies some of the advantages of the sandbox. But that's probably what I will do.\n\n\nThe best solution would be to use the file chooser portal. That will allow the user to select any location in the file system, and the sandboxed app only gets access to exactly that single file. Downside currently is that the \"open in file manager\" feature doesn't work well with that (see https://github.com/flatpak/xdg-desktop-portal/issues/95).\n\n\nPlease also note that I have only limited control over the Peek package on flathub. All I can do is opening pull requests on https://github.com/flathub/com.uploadedlobster.peek/ and poking people to act on them. And since I was not good at poking somebody this time the package still was not updated to the latest 1.1.0. Your specific issue was also reported at https://github.com/flathub/com.uploadedlobster.peek/issues/3\nFor the time being you can also use my own Flatpak repository, see https://github.com/phw/peek#flatpak . I will eventually move the stable builds entirely to flathub, but only once Flathub builds get more automated and I gain more control over it.. You can give access to the ntfs partition just with the same --filesystem parameter, just pass the path to your mount point to it (edit: you can pass --filesystem multiple times).\nThe bookmark thing is really only solvable with using GtkFileChooserNative (option 3 from above). That's actually implemented in Peek, but I build the Flatpak packages without it since it breaks the \"open in file browser feature\", which is rather essential to me.. I have updated the Flatpak build files and future versions of Peek will come with full access to $HOME by default.. Nice thing is that pipewire supports gstreamer, so in theory you could use a gstreamer pipeline to capture the screen into the file. In practice I was not yet able to figure it out :) Something like this is supposed to work:\ngst-launch-1.0 pipewiresrc name=pipewiresrc path=10 ! videoconvert ! ximagesink\n\nNot sure about the path, I could not get pipewire to list my screen.. https://wiki.gnome.org/Projects/Mutter/RemoteDesktop. For use inside Flatpak: https://github.com/flatpak/xdg-desktop-portal/pull/122. Sure, still interested in this. I am pretty busy myself and won't find the time soon.\nJust as a general guidelines for the implementation: My main concern is again that the minimal window size will be increased by the change. So maybe there needs to be some logic again to only show the full hint at a certain size.. @gort818 Much appreciated :) Currently I also struggle to find some time, but definitely want to work on some of the bugs and features here, too.. Please see #228. Just as an info: I hope to release 1.2.0 this weekend (things are looking good so far). That's the main reason why I don't bother updating the stable Flatpak right now ;). Please see #228 and #235. I don't think bundling this will solve the issue, as the DBus service will still not be running. Also this is not really an issue unless you rely on accessibility services, at which point you likely have installed at-spi2-core anyway.. Found the issue, currently the launcher assumes that $XDG_DATA_DIRS is set. If this is not set it should assume a default of /usr/local/share/:/usr/share/.\nCan you verify that this variable is not set in your case?. @probonopd I tried to fix this by checking whether XDG_DATA_DIRS is already set, as my launcher script appends to it:\nif [ -z \"$XDG_DATA_DIRS\" ]\nthen\n  XDG_DATA_DIRS=/usr/local/share/:/usr/share/\nfi\nexport XDG_DATA_DIRS=$BASE_DIR/usr/share/:$XDG_DATA_DIRS\nBut I found that XDG_DATA_DIRS is already set to XDG_DATA_DIRS=/tmp/.mount_gXr9lb/usr/share/: when my script gets launched. Does the AppImage default launcher already set this? If so it also should handle the case that this is not always set.\nAccording to the spec a default of /usr/local/share/:/usr/share/ should be assumed.\n. Opened a pull request at https://github.com/AppImage/AppImageKit/pull/552. Fixed for Peek by just setting /usr/local/share/:/usr/share/ no matter what.. You mean the AppImage? For some reason the 32bit builds of AppImages on the openSUSE Build Service  stopped a few weeks ago. An older release is available at https://download.opensuse.org/repositories/home:/phiwo:/peek/AppImage/ .\nI will add a 32 bit build again as soon as OBS is fixed.. https://github.com/openSUSE/open-build-service/issues/4183#issuecomment-349231663. Unfortunately this does not tell us much. I have to see if I can improve the error output here, I would have at least expected the gifski command to fail, in which case its error output should be visible here.\nCan you try whether gifski works for you to convert a video from command line? Follow the instructions on https://github.com/ImageOptim/gifski to convert a video to PNG files using ffmpeg and then convert those files to a GIF with gifski. Basically this is:\nffmpeg -i video.webm frame%04d.png\ngifski -o anim.gif frame*.png. I fear the only workaround is to compile gifski yourself. I also had issues on some systems with gifski being compiled with openmp support, the workaround then is to compile it without this. Also https://github.com/ImageOptim/gifski/issues/9 might be releated.\n\nI am going to close this here, as this should be solved in gifski.. Yes, I am aware of this, but I don't know how to avoid it :(\nThe problem is in C you could just give NULL to the call of gtk-message-dialog-new. But if you pass null in Vala it actually calls gtk-message-dialog-new with \"%s\". I think this is a bug in the Vala bindings I can't don anything about in Peek.. Thanks, happy you enjoy it. I keep this issue open and report it to Vala as soon as I have some more time for it.. https://bugzilla.gnome.org/show_bug.cgi?id=791215. A fix for this is now in the Vala repository (https://git.gnome.org/browse/vala/commit/?id=84c8584). So starting with the next Vala release cleaner code will be generated and these warnings should go away.. Ups, reopening. Forgot that I still have to change the code to use null instead of \"\". I will do this once a new Vala release is out and I can test it. This will make the warning even more ugly for older Vala versions, though, but it's cleaner in general.. New version introduced another issue, but worked around the warning for now.. Are you using Gnome (most likely even Gnome Wayland on Ubuntu 17.10)? If so, please see #202 and the Gnome Shell Bug at https://bugzilla.gnome.org/show_bug.cgi?id=790008\nA quick workaround is to use X11 instead of Wayland, and if it still freezes use the ffmpeg backend instead of gnome-shell by starting Peek with peek -b ffmpeg. Note that this will only work on X11 anyway, so first try using X11.. Closing as duplicate. gnome-3.-26-1604 is just the platform snap, which provides basic libraries for snaps using the gnome stack (so not every snap has to bundle everything and snaps can be smaller). It is unrelated to the gnome version you have installed (you can even have an older version installed locally).\nJust follow the commands printed and it should work. Please note that the Peek snap does not work under Wayland, if you want to use Wayland you should install Peek from the PPA.. Yes, please try using the PPA for now. That's pretty unfortunate that the Snap does not support GNOME Wayland, but Ubuntu 17.10 switched to GNOME Wayland as default. I actually don't know how to deal with this situation for now.\nI have added a new issue https://github.com/phw/peek/issues/245 to track this.. Thanks for this. Peek should actually already have rather good support for Chinese. The simplified Chinese translation is complete, the traditional script translation is missing some translations, see https://hosted.weblate.org/projects/peek/translations/zh_Hant/ . If you spot any mistakes in translations those can be edited online at https://hosted.weblate.org/projects/peek/translations/\nI also have app store translations (short description and long description), maybe those can be used for the Deepin store, too:\n\nzh_Hans\nPeek\n\u7b80\u5355\u6613\u7528\u7684\u5c4f\u5e55\u5f55\u5236\u5668\nPeek \u4f7f\u5f97\u5728\u5c4f\u5e55\u4e0a\u5f55\u5236\u6307\u5b9a\u533a\u57df\u53d8\u5f97\u7b80\u5355\u3002\u6bd4\u5982: \u4f60\u53ef\u4ee5\u7b80\u5355\u7684\u628aPeek\u7a97\u53e3\u79fb\u52a8\u5230\u4f60\u60f3\u8981\u5f55\u5236\u7684\u533a\u57df\uff0c\u7136\u540e\u6309\u4e0b\"\u5f55\u5236\"\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u65b9\u4fbf\u7684\u5c55\u793a\u81ea\u5df1\u5e94\u7528UI\u7684\u529f\u80fd\u6216\u662f\u5728\u9519\u8bef\u62a5\u544a\u4e2d\u5c55\u793a\u9519\u8bef\u3002Peek \u5bf9\u5236\u4f5cGIF\u52a8\u753b\u6709\u4f18\u5316\uff0c\u4f46\u662f\uff0c\u5982\u679c\u4f60\u559c\u6b22\u7684\u8bdd\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5f55\u5236MP4 \u6216\u8005 WebM\u3002\n\u7279\u8272\uff1a\n\n\u9009\u62e9\u8981\u5f55\u5236\u7684\u5c4f\u5e55\u533a\u57df\n\u5c06\u5f55\u5236\u7684\u89c6\u9891\u4fdd\u5b58\u4e3a\u4f18\u5316\u8fc7\u7684 GIF \u52a8\u753b\n\u76f4\u63a5\u5f55\u5236\u4e3a WebM \u6216 MP4 \u683c\u5f0f\n\u4e3a\u4efb\u52a1\u4f18\u5316\u7684\u7b80\u5355\u7528\u6237\u754c\u9762\n\u81ea\u52a8\u7f29\u653e\u5f55\u5236\u7684\u89c6\u9891\n\u652f\u6301 HiDPI \u5c4f\u5e55\n\u53ef\u4ee5\u5728 GNOME Shell Wayland \u4f1a\u8bdd\u5185\u4f7f\u7528(\u4f7f\u7528 XWayland)\n\nPeek \u4e0d\u662f\u4e00\u4e2a\u62e5\u6709\u6269\u5c55\u529f\u80fd\u7684\u901a\u7528\u5c4f\u5e55\u5f55\u5236\u5e94\u7528\uff0c\u5b83\u552f\u4e00\u7684\u529f\u80fd\u5c31\u662f\u5728\u5c4f\u5e55\u4e0a\u5f55\u5236\u5c0f\u5de7\u65e0\u58f0\u7684 GIF\uff0cMP4\u548cWebM\u89c6\u9891\u3002\n\nzh_Hant\nPeek\n\u7c21\u55ae\u6613\u7528\u7684\u87a2\u5e55\u9304\u5f71\u8edf\u9ad4\nPeek \u8b93\u9304\u88fd\u4e00\u90e8\u5206\u7684\u87a2\u5e55\u622a\u53d6\u8b8a\u5f97\u66f4\u52a0\u5bb9\u6613\u3002\u9019\u662f\u5c08\u9580\u88ab\u8a2d\u8a08\u4f86\u9304\u88fd\u90e8\u5206\u87a2\u5e55\u5340\u584a\u7684\uff0c\u4f8b\u5982\u5728\u793a\u7bc4\u8edf\u9ad4\u64cd\u4f5c\u6216\u8005\u91cd\u73fe bug \u72c0\u6cc1\u6642\u5c31\u80fd\u6d3e\u4e0a\u7528\u5834\u3002\u6709\u4e86 Peek\uff0c\u60a8\u53ea\u8981\u628a Peek \u7684\u8996\u7a97\u653e\u7f6e\u5728\u60a8\u60f3\u9304\u5f71\u7684\u5340\u584a\uff0c\u7136\u5f8c\u6309\u4e0b\u300c\u9304\u5f71\u300d\u5373\u53ef\u3002Peek \u5df2\u91dd\u5c0d\u7522\u751f GIF \u52d5\u756b\u9032\u884c\u512a\u5316\uff0c\u4e0d\u904e\u9700\u8981\u7684\u8a71\u4e5f\u80fd\u76f4\u63a5\u9304\u88fd WebM \u6216\u8005 MP4 \u683c\u5f0f\u3002\n\u529f\u80fd\uff1a\n\n\u53ef\u9078\u53d6\u6b32\u9304\u88fd\u7684\u87a2\u5e55\u5340\u584a\n\u53ef\u5c07\u9304\u88fd\u7684\u5f71\u7247\u5132\u5b58\u70ba\u7d93\u512a\u5316\u7684 GIF \u52d5\u756b\n\u53ef\u76f4\u63a5\u9304\u88fd\u6210 WebM \u6216 MP4 \u683c\u5f0f\n\u7c21\u55ae\u6613\u7528\u7684\u754c\u9762\n\u53ef\u81ea\u52d5\u7e2e\u5c0f\u5f71\u7247\u89e3\u6790\u5ea6\n\u652f\u63f4 HiDPI \u87a2\u5e55\n\u652f\u63f4 GNOME Shell Wayland \u6a21\u5f0f\uff08\u900f\u904e XWayland\uff09\n\nPeek \u4e26\u4e0d\u662f\u5c08\u9580\u7528\u4f86\u9304\u5f71\u7684\u61c9\u7528\u7a0b\u5f0f\uff0cPeek \u5c08\u6ce8\u5728\u9304\u88fd\u87a2\u5e55\u5340\u584a\u4e26\u8f38\u51fa\u6210 GIF \u52d5\u756b\u6216\u7121\u8072\u7684 WebM\u3001MP4 \u5f71\u7247\u3002. @umpirsky The freezing issue is another thing, please see #202 and the Gnome Shell Bug at https://bugzilla.gnome.org/show_bug.cgi?id=790008. I opened a discussion at https://forum.snapcraft.io/t/screen-recording-on-wayland/3563. @umpirsky It's not only affecting Peek, but screen recording on GNOME Wayland in general. But so far only Ubuntu seems to be affected.. @umpirsky Just to be clear, you have neither installed Peek nor the other screen recorder as a Snap, right? And you can tell what it is, that's not promotion and mentioning other screen recorders is for sure not banned here :). Ok, we have currently two issues here:\n\nStarting the snap segfaults on Wayland. This should be solvable, I already made some progress here\nOnce Peek starts recording will not work, since there is no screen recording interface for Snaps (see linked discussion above). Best thing I could do right now is show a dialog explaining the user to either use X11 or install Peek via PPA, Flatpak or AppImage.\n\nActually the situation is very dissatisfying. I am very close to just trash the Snap version again and stop dealing with this until the situation has significantly improved.. Snap packages are no longer supported, see https://www.reddit.com/r/Ubuntu/comments/870bcn/snap_support_for_peek_screen_recorder_discontinued/. This also came up in #53. Not really high priority for me as I think if you want the ability to script this you are probably better off with using something like ffcast + ffmpeg directly. Also window positioning will work with XWayland, but won't work on native Wayland (but for now Peek requires XWayland anyway).\nBut I am open to accept pull requests. Peek already can save and restore the window size and position, that logic could be reused and be initialized with command line parameters. One thing that would need to be changed is having Peek restore the actual position and size of the recording area instead of the window position and size. I wanted to do this change anyway, as it would e.g. keep the recording area consistent between launches even if one changes the GTK theme.. Sounds useful, also for myself :) Should be totally possible.\nI am just pretty loaded with work, so it will take a while until I work on features for Peek again. But maybe somebody wants to give this a shot :). I fear this will be a wontfix. I experimented with it, but when I copy the GIF to the clipboard it will only consist of a single frame as PNG no matter how I try :( From a quick view it looks like the X11 clipboard only supports single pixbuf objects, there seems to be no way to store arbitrary binary data of a certain type.\nBut I don't have experience with this, I will see if there is anything to be done about it. But it is not looking good at the moment.\n. The chromium issue mentions the workaround of copying text/html payload instead (basically just a <img src=\"data:image/png;base64,...\">, I will test this.. Some very basic proof of concept, which copies the image to the clipboard after saving.\nIt allows to:\n- Paste the image into a rich text editor (tested with GMail on Firefox and Chrome and with LibreOffice Writer)\n- Copy the image file with a file manager (tested only with Nautilus)\nAlso tested in evolution when creating a mail, there it attaches the file to the e-mail.\nThis won't help to e.g. copy the file into an image editor. It also doesn't cover the case of e.g. github, since there is no rich text editor there (also in my tests data uris did not work in github markdown).. The issue seems to be \n[error]: baseline profile doesn't support a bit depth of 10\n\nI assume you have libx264-10bit installed then? Currently not sure how to work around this, have to research. One way of course would be to have this be detected somehow and disable the baseline profile for this case (with the downside of #111, but better than failing to record).\nCurrent workaround is to install libx264 instead of libx264-10bit. Yes, the AppImage has ffmpeg and libx264 bundled :)\nGlad to see it is working for you now. I will try to find a solution to handle this case more cleanly.. Does gifski run on it's own? Please try running gifski as described on https://github.com/phw/peek/issues/240#issuecomment-348435154. As this is a gifski issue it should be reported there. How did you install gifski? If you installed from source try compiling it without the openmp option, that caused defaults for me in some environments (but I could not yet debug it). Got it :) Will test this after the holidays. Two more questions:\n\nAre you running this on Gnome or not?\n\nCan you give me the output of ffmpeg -version?. Some preliminary tests using the ffmpeg backend:\n\n\nFor WebM and GIF / APNG (also using Matroska internally) the minimum frame rate seems to be 3fps\n\nFor MP4 the minimum framerate seems to be 4fps\n\nUsing the gnome-shell backend recording works down to 1fps in all formats.. I think this is basically the same as #186. I close the other issue as I don't fully understand it anyway due to the French :)\nNot sure about the UI for this, have to think about it. But very useful feature for sure. Should probably be solved together with the pause feature requested in #40.. You are likely trying to run the Peek snap on Gnome Wayland. The snap version does not support Wayland yet, please install from PPA.. I am closing this in favor of #245. What exactly did you do to \"install with sudo to get it to show up in the Applications in Elementary OS\"?\nMost likely you ran peek with sudo and now /home/linuxian/.cache/peek/ is owned by root and you don't have permissions to it. Try running\nrm -rf /home/linuxian/.cache/peek/\n\nthen try starting Peek again. You really should not use sudo for starting most software as this will often cause permission issues like this.. The panel is on top of every Window, there is no way for Peek to get renered atop of that. But the layering does not really matter anyway, the Peek window is just a tool to select the recording position. Apart from that it takes no part in the recording itself.. As an interesting sidenote, this is also the reason why one can make Peek work on i3, even though the i3 window manager does not support the click through (and thus would not allow UI interaction with the recording area). But the workaround is to place the Peek window to select the recording area, but then during recording actually send it to the background ;) . \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u0441\u043f\u0430\u0441\u0438\u0431\u043e. Is this with the GNOME desktop? I cannot reproduce this here on my GNOME on Arch, I will try to reproduce this on Ubuntu 17.10.\nLikely this is related to the fact that recording stops when the window position or size changes.. @arist0tl3 That's expected behavior. First make sure you have gstreamer1.0-plugins-good and gstreamer1.0-plugins-ugly installed.\nIf it still does not work  take a look at journalctl if there is any log output when you start recording. \nA few questions to narrow down the issue:\n\nWhat format are you recording (GIF, WebM, MP4)?\nAre you running on X11 or Wayland?\nWhat Linux distribution is this?. @SuperHori Was your question answered, can this be closed? Or is there still some issue?. Closing for now, feel free to give more details if you still need some help.. Is it only the lock screen or is the notification actually shown in the notification area when you are logged in? Does the notification dissapear when you interact with it?\n\nHaving a running Peek instacnce is not required for the notification to be there. Unless you have dismissed it it will stay around if the DE supports persistent notifications (as GNOME does). If you click the notification it will invoke Peek again to handle the action (you won't see Peek in this case, but it will open, handle opening Nautilus and close again).. > I don't see any notification area.\nGNOME calls it the \"message tray\". You can open it by clicking on the clock at the top or pressing Super + M. It holds all still active notifications and upcoming calendar events. It's quite a fundamental piece of the desktop ;). If you have gifski reproducible segfaulting, please report this to the gifski project. Peek just uses this as an external tool, there is nothing to be done inside Peek.\nOne thing to try is compiling gifski without the openmp feature, see https://github.com/ImageOptim/gifski#building for details.\n. Thanks a lot. Is this on Wayland or X11?. Thanks, I will look into it. Yes, usually the WM matters in cases like this :). @Komzpa I actually think this could be a theme bug. What theme are you using?. I cannot reproduce this (tested with Plasma 5.12), but I am very certain that it is a theming bug. Please make sure the Breeze-Dark theme you use matches the underlying GTK version, as GTK theming really is sensitive to versio changes.. Ubuntu 14.04 is unsupported, Peek can't be built for it. But I have heard from users that the Snap version works, see https://github.com/phw/peek#snappy\nNot sure what is required to install Snap on Ubuntu 14.04, but Canonical for sure has some documentation on this.. That's not really much info to go with. What file format are you recording? Is this on GNOME Shell or something else? If you start Peek from command line is there any addititional output?. Thanks for the details. It might be that the Gnome Shell screen recorder is not working for you. Do you have gstreamer1.0-plugins-good installed? If not, please install it.\nIf this does not solve the issue looking at journalctl -f while starting the recording should show more details what's going wrong.\n\nsorry, but the message above was generated automagically by the application when clicking \"report\".\n\nYeah, I know, sorry :) I have to make this more useful and also encourage users to provide more info.\n. Thanks for the details. I think ffmpeg is missing something here. I currently experience very similar error with the same message Unable to find a suitable output format...  with ffmpeg 3.4.1 in the Flatpak. However, same version works well on Arch. I will investigate.. Ah, I was so focused on you mentioning Debian that I totally missed that you installed via Flatpak. So this is essentially a Flatpak issue. I wonder if some Gnome platform update broke things.. It was indeed a library mismatch. The bundled ffmpeg did not use the ffmpeg libraries build for Peek but some provided for the runtime, and those where missing some features required. I updated the flatpaks.\n@briner Could you test whether the new builds on Flathub work now for you? I have updated the stable builds on flathub and the dev build I host myself.. Tested again, it is working for me now (both the stable build from flathub and the dev build). Please let me know if this should not work for you.. I am not maintaining this repository and can currently not test myself, but maybe it just does not work with Fedora 27. I have actually setup my own repositories a while back, but as I was not sure whether I can maintain them I have not announced it. But please try if any of those repositories work:\n\nhttps://download.opensuse.org/repositories/home:/phiwo:/peek/Fedora_25/home:phiwo:peek.repo\nhttps://download.opensuse.org/repositories/home:/phiwo:/peek/Fedora_26/home:phiwo:peek.repo\nhttps://download.opensuse.org/repositories/home:/phiwo:/peek/Fedora_Rawhide/home:phiwo:peek.repo\n\nFedora 27 is not yet available on the opensuse build server. But if one of the above work for you I will update the install instructions for Fedora to use those repositories instead.\nIf this still fails I would recommend installing the Flatpak version. Fedora has excellent support for Flatpak, and the Flatpak version of Peek supports all features.\n. I am not sure I understand the question correctly :) You can resize and move the Peek window like any other window to change the recording area.\nIf you actually the entire screen (full screen) however, this is currently not possible. See https://github.com/phw/peek/issues/61. I see, looks tricky :( Please try enabling compositing in XFCE settings. Normally GTK windows will draw a shadow around the window, which is in addition to the optical effect also used to increase the area in which a window can be grabbed for resizing. Apart from that changing themes can help.\nThere is also a separate issue for this, see https://github.com/phw/peek/issues/199 . It is mostly about KDE, but maybe some of the comments and tips there will help.\nI am closing this as a duplicate then.. That's usually a driver issue, please the the FAQ at https://github.com/phw/peek#my-recorded-gifs-flicker-what-is-wrong\nIn case you are using GNOME you can also try to switch to the ffmpeg backend by running peek -b ffmpeg  (if you are not using GNOME this is the default).. Thanks for the feedback :). Using the dark theme is intentional. Peek uses the dark variant if the theme provides one (and Adwaita does). For me this matches better with Peek being a kind of frame you move around atop other windows. But if you don't like this behavior you can change it with dconf:\ndconf write /com/uploadedlobster/peek/interface-prefer-dark-theme false\n\nThe close button is strange, that should actually only happen if you have configured the window buttons accordingly. Can you give me the output of\ndconf read /org/gnome/desktop/wm/preferences/button-layout\n\nAnd also please run Peek with:\nG_MESSAGES_DEBUG=all flatpak run com.uploadedlobster.peek\n\nAmong other output there should be a line like the following:\n** (peek:3): DEBUG: application-window.vala:824: Decoration layout: menu:minimize,close\n\nThe string menu:minimize,close is the decoration layout. It should actually match the output of the above dconf query if you are on GNOME. If close is on the left of the colon that means the close button gets placed on the left side, and GTK applications usually honor that unless they override it.\nWhat OS is this, Fedora or Ubuntu? Do you have other desktop environments installed that could interfere here?. > Currently with default Fedora 27. But I used the same home folder with LM 18.3 Cinnamon and eOS Loki in the past. Maybe that's why?\nYes, probably. That /org/gnome/desktop/wm/preferences/button-layout is empty indicates that this is loaded from somewhere else, but I don't know from where. I will try to find out.. Ok, it is unusual that this setting is not configured in /org/gnome/desktop/wm/preferences/button-layout, but it might also be in dconf read /org/gnome/shell/extensions/classic-overrides/button-layout if you used the classic session once.\nIt can also be configured in the files $HOME/.config/gtk-3.0/settings.ini or /etc/gtk-3.0/settings.ini. Do you have those files and what's their content?\nSomehwere this is set to close:menu,maximize for you, if you find the location you could either remove (and use the default) it or change it to something like menu:maximize,close.. @Schyken Can you also check what the output of running peek with G_MESSAGES_DEBUG=all is? \nDid you also install with Flatpak or otherwise?\nFor Flatpak run: \nG_MESSAGES_DEBUG=all flatpak run com.uploadedlobster.peek\n\nFor a normal install just:\nG_MESSAGES_DEBUG=all peek\n\n. Thanks for the report. This error usually indicates there is something wrong with the GNOME shell screen recording. A common issue is a missing gstreamer good and/or ugly plugins package. Unfortunately this info is not enough to see what is missing. \n\nWhat distribution is this?\nWhat format did you try to record?\nHow was Peek installed (from package, distribution, Flatpak, Snap, AppImage?)\nCan you look at the output of journalctl -f while you see this error and post it here?. For MP4 recording you need the gstreamer ugly plugins installed. I don't know whether this is available in Endless or not and how it would be named. Please refer to Endless for this, I could not find a public available package list. Some distributions don't include the x264 codec due to licensing / patent issues.. I consider this answered, please let me know if that's not the case.. For me this sounds like a video driver issue or something. What happens if you record you dektop using GNOMEs built-in screen recording (default Shift + Ctrl + Alt + R), does this have the same issues?\n\nWhat if you start Peek with the ffmpeg backend:\npeek -b ffmpeg. The freezing is already reported at https://bugzilla.gnome.org/show_bug.cgi?id=790008 . Interesting that you are not affected by it when using Peek.\n\nOne last shot: Have you enabled gifski? The video issues visually remind me of a video issue gifski had in earlier releases. If so please try disabling gifski. Can you also try recording WebM to see if this issue is only limited to GIF?\nIf gifski is not involved and WebM also is broken this is definitely an upstream issue and should be reported in the GNOME bug tracker. Might be driver related, so make sure to also note which video card and driver you have.\n\npeek -b ffmpeg results in just a black video, but with the correct resolution.\n\nIf you are on Wayland this is to be expected ;) Sorry, I missed that information.. Closing this as an upstream issue. If screen recording is so seriously broken for you on Wayland I would suggest staying with X11 for the time being.. This is a very strange issue, I have not seen it before. No idea how this can happen, the last time I tested on Xfce this definitely did not happen. I will take a look.. I can reproduce this on xfce 4.12. Very strange indeed.. This is a Xfce bug, see https://bugzilla.xfce.org/show_bug.cgi?id=13338\nI will workaround this by not disabling window resize on Xfce. Please note that accidentally resizing the window will immediatelly interrupt the recording.\nI will close this issue as there is nothing else I can do right now, but I will make sure to deal with the workaround should the Xfce issue get resolved.. Please check your file permissions on /home/abcd/snap/peek/619/ or /home/abcd/snap/peek/. Did you maybe run Peek with sudo at some point in the past?. @faridosc Unless you are using the Snap version your's is a different issue. Please run Peek from command line and see if there is any error output. And open a new issue. . @evenfrost Does it save the file for you? Works for me, I also get the GLib-GIO-WARNING **: Error creating IO channel for /proc/mounts: Permission denied (g-file-error-quark, 2) error, but saving works.\n@Xavi007 Can you save to any other file location? Saving to the snap folder is probably not the best idea anyway :). @evenfrost Do I get this right: So even if you save to somewhere entirely different, let's say directly to /home/evenfrost/ you get the error for the path '/home/evenfrost/snap/peek/619/Peek 2018-02-07 15-02.gif' ?. I can absolutely not reproduce this. I would suggest you install Peek by other means, e.g. from PPA, as Flatpak or AppImage.\nAs it stands currently I will likely discontinue the Snap packages in the near future anyway.. Snap packages are no longer supported, see https://www.reddit.com/r/Ubuntu/comments/870bcn/snap_support_for_peek_screen_recorder_discontinued/. I can't really reproduce this. For testing I recoreded a large file (1800x900 pixels, 30 seconds long) with both byzanz and Peek. byzanz took around 15 seconds to postprocess the file, Peek around 20 seconds. I don't think this is a deal breaker. Also as Peek is using either ffmpeg or gifski to do the GIF generation there is little I can do about this anyway.\nSpeaking of gifski: In case you have the gifski option enabled slow encoding is to be expected.. Debian 8 does not contain ffmpeg in its repository, but instead uses libav-tools (avconv). Peek used to work with libav-tools and still somewhat does, but as avconv provides limited functionality I can no longer support it and have removed it from the package dependency.\nIf you want to try it you can edit the dependencies at https://github.com/phw/peek/blob/master/CMakeLists.txt#L224 and replace ffmpeg  with ffmpeg | libav-tools, imagemagick. This will require you to also install imagemagick.\nPlease note the following:\n\nThe code is untested. In theory it should still work, but it might not. And if it doesn't I won't fix it.\nWhen using avconv the GIF creation by default uses ImageMagick's convert, with all the issues this caused (high RAM and disk usage, long processing). I would recommend you to install gifski, this will improve the situation.\nI will completely remove avconv support in one of the following releases, likely 1.3\nAPNG recording won't work\n\nOther options include just installing from source (without package) or installing Peek 1.1.0, but I wouldn't recommend this.. I actually had this on my original feature list. In theory there is no reason why it shouldn't be portable, especially since ffmpeg screen capturing is also available on Windows. There are a few minor places that use Linux specific APIs that need to be adapted, but nothing too complicated.\nBut I definitly lack the time to tackle this myself at the moment :( Any help appreciated.. Without more information this is impossible to tell: \n\nWhat format are you recording?\nHow large is the area you are recording, how long is it recording?\nIs there any error output if you start peek from command line?\nWhat does \"hangs\" mean? Does it just take a long time or is it doing nothing? Check your processes, is there any Peek or ffmpeg related process? What is the resource usage?. Make sure no instance of Peek is running when launching it from command line, otherwise it will just reuse the existing process.. Are you guys running on Wayland or X11? Multiple monitors? Anything special about the recording area (e.g. spans accross monitors or partially outside the view)?. Still no clue here. Maybe it is about the storage location, is there anything special about the location of $HOME/.cache/?. @sdvillal And you also get the \"Failed to measure available space\" message? And Is this really the end of your output? there should be some activity afterwards. Ok, had some idea in #279. Please try the latest from AUR and tell me if it works.\n\nAnd please let me know which desktop environment you are using ( sdvillal has XFCE). @sdvillal the fact that you are probably using the Antergos package somewhat ruins my theory :D But could you try the (https://aur.archlinux.org/packages/peek/)?. @olsonpm Your problem looks different. You see the the file chooser, right? Actually there doesn't seem to be anything wrong with your setup, all the messages looks normal. Post processing can take some while depending on the size and length of the recording. When you closed the Peek window it should have shown you a desktop notification, and unless you forcefully kill the Peek process it should finish rendering in the background and show another notification when it is finished. I assume you cancelled the process after you saw the messages on close?. Yes, I also re-enabled the native file chooser on the AUR build again. Looking at the Antergos PKGBUILD I also cannot spot anything wrong, maybe the just have to rebuild it (and it looks like they did / do that, see https://github.com/Antergos/antergos-packages/commit/e242af03450194ec2cbf250c27204325dc2537ca#diff-864e41333d045ddbf1a1373ae7f3709e)\nClosing this issue for now.\nEdit: @sdvillal Thanks for confirming this, so it was just a rebuild.. Yes. Try updating gifski, the recent releases fixed some crashes.\nClosing as an upstream issue. That's using gifsicle. I actually had not a good experience when I tried this, but I will have a look again.\nJust to make sure: You are not using gifski, right? Because with gifski large sizes are to be expected.. @devel0 Are you using gnome-shell? If so, #288 led to large files and this will be fixed in the next release.\nApart from that there is a feature request #291 to use giflossy (a forked gifsicle with lossy compression option), that's what's being used by record-screen. I have not yet done testing and can't say for now whether it will bring any advantage.\nUsing the plain gifsicle has no advantage. Compared to the default ffmpeg encoder used by Peek I got files nearly 30% larger with dithered colors.\nI will close this issue, since both #288 and #291 cover this already.. Thanks. Would also be great if you could see if there are differences for you when using peek -b gnome-shell vs. peek -b ffmpeg. In the current development version this should be pretty much the same.. Great, good to hear. I have actually some issues here with the new setup, conversion to GIF sometimes fails now. But I am on it and will figure out how to fix this.. You should install gstreamer ugly plugins, those are required for MP4 recording. What distro are you using? Your distro likely does not ship the necessary codecs. You might want to try with the ffmpeg backend, run peek with\npeek -b ffmpeg\n\nBut that might have the same issue. You might have to figure out how to enable the H.264 codec on your distro.. I am closing this. If you have trouble installing the gstreamer ugly plugins on your distribution I recommend you to use the flatpak version.\nIf the missing gstreamer ugly plugins where not actually the issue, please let me know.. Please see #277, likely missing gstreamer ugly plugins. This is likely the same as #274, but you gave me an idea. Can you test the latest from AUR?\nWhat I disabled again was the use of GtkFileChooserNative. It is working well for me on my GNOME, but maybe I have to test with other DEs.. Closing as duplicate of #274. Thank you very much for this suggestion. I don't know for sure if it is 100% feasible to do, but I like the idea very much. I think the basic implementation idea would be something like:\n\nAfter Peek was resized, capture the screen (maybe not only inside Peek, but some area around it?)\nUse some edge detection algorithm\nTry to re-position / resize the Peek window so that it matches edges that are near (a few pixels) the recording window edges\nOptionally: Draw lines where the edges are to visualize them\n\nNow that repositioning thing might make trouble. Especially it would be another thing that is currently not portable to Wayland. For now this would have no effect, since Peek works only with XWayland anyway due to other window management issues\nHaving said all this, I have no plans to work on this anytime soon. While this really sounds like an interesting thing to do I absolutely lack the time. So if anybody is interested at fiddling with this, please do!. Working as expected. It can take a short time before the recorder has initialized. And just quickly clicking start / stop wouldn't create a usable video in most cases anyway, therefore if you cancel before 1s it just stops. . Ah, ok. That's of course a different issue.\n@fschutt This is actually the first time I hear of the Trinity desktop, I have to see how I can run that for testing. Does it support compositing and if so, is this enabled for you?\nAlso as a quick workaround you can set the countdown to 0 (disabling it) in settings. That way Peek at least behaves less confusing.. Yes, the compositor is required for the transparency. But actually the countdown is supposed to still appear even without compositor, it would in this case just render on a solid dark gray background.\nI can test on Xfce without compositor and see how it works there. But if I cannot reproduce it there I won't be able to do much as supporting Trinity is just way outside the scope of DEs I am actively willing to support.. It works on Xfce without compositing, also on Mate. I won't investigate this any further since supporting a window manager that is obsolete for over a decade now is not something I would do. More than likely any fix to this would nee to be done to the Trinity version of KWin.. Some more questions:\n\nDoes opening Dolhpin work if you enable the \"Show file manager after saving\" option in Peek's preferences (this will circumvent the notification and show the file manager directly)?\n\nPlease give me the output of:\nG_MESSAGES_DEBUG=all flatpak run com.uploadedlobster.peek\n\n\n\nWhat distro is this?\n\nIf possible it would be helpful to see whether a natively installed Peek (non-flatpak) works as expected\n\nI tried reproducing this on my KDE Neon VM with Plasma 5.12, but unfortunately the Flatpak version  doesn't show me notificatioins at all (even though Peek is sending one). I am probably missing something. With a native installed Peek everything works as it should.. Not sure, but something must be wrong with the way Flatpak is setup here. Just to make sure your DBus is working as it should, does the following command open your file manager with the home folder open?\ndbus-send --session --print-reply --dest=org.freedesktop.FileManager1 /org/freedesktop/FileManager1 org.freedesktop.FileManager1.ShowFolders array:string:\"file://$HOME\" string:\"\"\nAlso do you have xdg-desktop-portal-kde installed? Not sure that is needed in this case, but it at least it is required for a fully functional Flatpak setup.. Ok, we are now a step further  :-) Thanks for the help so far. Now that this error is gone the output of G_MESSAGES_DEBUG=all flatpak run com.uploadedlobster.peek would be helpful again. It should tell us how Peek is trying to open the file manager (in case of Flatpak it should use the DBus method, but Peek uses some fallbacks if this doesn't work).. Sorry, took me some time to get back to this. For me this looks like a general Flatpak issue. From the log I would say Peek is not even receiving the signal that opening the file was requested. Also the many other DBus related issues in the log indicate that there is something wrong in your setup regarding Flatpak and DBus. I cannot reproduce any of this on my KDE Neon VM.\nI would suggest you bring this up with the Flatpak team, or maybe see if this will work better in Ubuntu 18.04. But it doesn't look like I can do anything in Peek to handle this.. There are two things here:\n\n\nThe Binding '<Ctrl><Alt>R' failed! warning: This is unrelated to Peek not starting, usually it just means that the given shortcut is already in use. In Peek itself you can change the shortcut to anything you want, this should solve this issue.\n\n\nPeek not starting due to \"Unable to create default screen recorder.\": On KDE Peek uses ffmpeg to record the screen, please install ffmpeg and try starting Peek again.. @rwarren I will close this as I highly suspect ffmpeg was missing for you. If this was not the issue, please let me know.. Hey, thanks and sorry for the long delay. I want to review this but just don't fine the time :( Hope to get back to Peek next week.. > on one of my desktops running Mint 18.3 get_window_width was not working as intended .. any thoughts on that.. on my arch machine no issues at all. But with Mint area.width is working.\n\n\nWas this with Cinnamon or Mate? You could try to add some debug output to see what values get_window_width and area.width actually have.\nNot sure about this, but I'll merge it for now. Doesn't make a big difference anyway :)\n. That's seems to be a ffmpeg install issue. What distribution is this and how did you install ffmpeg? How was Peek installed?. @pontikis Yes, that is not the version from official 16.04 repositories. You probably installed that one via a PPA. I would personally stay away from PPAs that install entire new versions for system level libs, that's just calling for trouble :). For MP4 recording you need the gstreamer ugly plugins installed.Please refer to your distribution for how to install this. Note that some distributions don't include the x264 codec due to licensing / patent issues.. Still could be the same reason, as I wrote above some distributions don't include x264 and you have to install it either separately or from completely different sources.\nPlease look into journalctl, there should be an error message from Gnome Shell with more details. And please tell me your distribution.. I am closing this as I am pretty sure the issue is either missing gstreamer ugly plugins or the plugins are not supporting the x264 codec. In both cases the output of journalctl should tell more, please refer to the documentation of your distro on how to install these parts.\nIf this does not solve your issues, please let me know and provide the output of journalctl.. Are you recording on Gnome? If so, could you try and see whether recording with the ffmpeg backend (start Peek with peek -b ffmpeg) does make any difference?. I can reproduce this by comparing results from the gnome-shell and ffmpeg backend. I am actually not surprised, the ffmpeg uses a lossless video as source for GIF generation, while gnome-shell backend uses a high quality but lossy video.\nI have to figure out what option gstreamer offers for lossless video by default.. I did some testing and I will go with VP9 encoder here. With highest quality settings I got perfectly clean frames when no changes happened, even though gstreamer does not seem to support the explicit \"lossless\" option that the reference encoder offers.\nJust to sumarize and clarify the problem here for later reference:\nPeek on Gnome by default uses Gnome Shell's built-in screen recorder, because that's also working on Wayland. That screen recorder uses gstreamer, and when invoking the Gnome Shell recorder Peek passes a custom gstreamer pipeline.\nFor GIF generation you want lossless video, since you want to avoid any artifacts that would increase the colors or lead to dirty frames as shown above. My requirements are:\n\nThe resulting video file should be small, as it will be stored as a temporary file and space there might be limited\nThe video must be lossless\nSaving as individual frames, e.g. as PNG, does not work, as the gnome-shell recorder expects a single output in the pipeline\n\nThe use of VP9 seems to satisfy these conditions.. I cannot reproduce, but this seems to be an issue with the gnome shell screen recorder. As a workaround you could use the ffmpeg backend by starting peek with peek -b ffmpeg. Ok. I'm gonna close this, as I have no influence in this case. If this bothers you you should file a bug against gnome-shell. But given that it works on my Gnome 3.26 it could well be this has already been fixed upstream.. Lol :) But yes, definitely. My main concern right now is how to structure the settings. I want to make it easy for the user to choose between different options without requiring extensive research.. @kornelski Thanks for the input.\nI did some initial testing with a quick 15 seconds screen recording, converting a intermediary video file as generated by Peek with the options used by Peek. The video itself is a screen recording of this github issue tracker, so plain color areas, not too many colors (not the area where e.g. gifski shows its strength). The video frames are extracted to single files using ffmpeg and converted to gif using ffmpeg, gifski, gifsicle and giflossy. The file sizes:\n\nFfmpeg: 7.2 MB\ngifski (quality 60): 10.0 MB (with a bit better colors at some points)\n\nNow I can use gifsicle / giflossy as a postprocessor on those outputs to further optimize them:\nFor ffmpeg:\n- gifsicle (optimize 3): 6.7 MB, -7%\n- giflossy (optimize 3, lossy 50): 4.5 MB, -38%\nFor gifski:\n- gifsicle (optimize 3): 9.6 MB, -4%\n- giflossy (optimize 3, lossy 50): 9.6 MB, -4%\nSo using giflossy would really bring the file size down significantly when using ffmpeg. It ads some extra post processing time, but I haven't done any measurements on this. If only gifsicle is available it doesn't help that much. Also adding giflossy as a post processor to gifski does not help much, but that was kind of expected.\nI tend to just use giflossy if available as a postprocessor by default, and maybe add an option to disable it.\nHere is the smallest of the files I could generate:\n\n. This was asked, at lease indirectly, in the past. This might be something that could be added, but to be honest it has a rather low priority for me, as Peek was always meant to fix my needs for a quick and easy little screen recorder.\nIf this gets added, it's UI should be really minimal and should not interfere with the current minimal UI. One idea would be to add \"Screenshot\" as just another output format with special handling.. Yes, as you've seen I already made some changes and even considered it. As my aim was to make everything as compatible as possible by default, and also because I was not sure which versions of ffmpeg and gstreamer would be needed, I had left the VP8 as default.\nBut I am happy to add VP9. Maybe I'll just add two entries for webm: WebM (VP8), WebM (VP9). Or some advanced tab with per format options.. I wonder if there is any good reason to use VP8. I tried to find something about compatibility, but VP8 / VP9 supports seems to go hand-in-hand wherever I looked. @aoloe Any opinion on this? I tend to just change this over to VP9 and ignore VP8, as it offers no advantages.. I changed it to VP9. Let's see, I personally have no issue with this. If somebody comes up and as good reasons to use VP8 instead I will add an option to configure it.. Thanks for the bug report. The directory naming is a direct result of the translation tool used for Peek, I have to figure out how to best deal with this.\n@nijel Any thoughts on this?. @nijel Thanks for the input. I have renamed the files now, glad to hear weblate can deal with this naming.\nFor desktop use it completely makes sense to follow this naming. Peek was literally the only software installed on my system which used the zh_Hans and zh_Hant naming.. Thanks a lot. I messed this up :(. Those files are generated from the respective upstream sources. I have to lookup this. But I find it a bit strange to include them here, as the files are essentially parts of other projects. Would a script be sufficient that pulls upstream sources and builds the files?\nAlso you should be aware that vala-dbus-binding-tool is not perfect and the generated files might need some manual tweaking. As far as I remember this was the case for at least one of the interfaces. I don't really consider those files auto generated files in the sense that you could include this in your build process. Rather vala-dbus-binding-tool was used as a scaffolding tool, more like you might use code snippets in your editor to speed up writing repetitive code.. Please make sure you have a working ffmpeg on your system. How did you install ffmpeg? What distribution are you using? There should be some package providing the missing  libvdpau library.. I am not sure about this. Maybe do it like this:\n\nHave a sharing dialog shown after saving, for now with only the options: \nOpen in file manager\nUpload to Imgur\nMaybe the \"open with\" as shown above, but we could do this in a separate issue\n\n\nRemove the \"Show file manager after saving\" option, and replace it with \"Show sharing dialog after saving\"\n\nNot sure about having a default option. When this bypasses the dialog I don't know how people escape from this again. I would exclude this for now.\nFor the dialog itself I would keep it very simple and easy to understand. I like the selection boxes Gnome Tweak Tools uses for some choices, they provide some extra information:\n\nI am not sure how Imgur works, but I assume you need to authenticate? So we need some functionality for this as well.. A more general approach would be https://github.com/phw/peek/issues/230 , actually handing off the issue to other tools. I mean part of this is why I added the \"Show in file manager\" option in the first place: It easily allows you to work with the file with whatever tool you can use to open it.\nBut being able to upload images is a often requested feature, so I don't see it as a mistake to implement it here. Also for 2 or 3 services if they are popular enough. We can still refactor the code and move it into a separate tool later on.\n@A1rPun: You don't have to use the feature, I don't see why you should stop using the rest of the tool just because Imgur upload gets implemented.. > I never stated that I don't trust Imgur, I just wanted to protect this great tool for more issue requests for other different services which I don't trust.\nDefinitely. I think you can be sure this won't get too much. But we need to start with some sharing features, I tried ignoring this and similar feature requests long enough :) And Imgur is a) popular enough and b) the API looks simple enough to give this a go.. @gort818 Yes, something like this as selection. When putting it into the final dalog I would just put some spacing around. And a checkmark like in the following screen would help:\n\nFor the buttons I would suggest adding a headerbar with Ok and Cancel button.. @gort818 No, not directly. But I would probably look at how Gnome Tweaks does it and copy that. The screenshot above is from there.. Thanks a lot for this! I will definitely give this a test drive in the next days!. Do you use Gnome? If so try starting Peek with the ffmpeg backend: peek -b\nffmpeg\nIf that fixes your issue it is the built-in Gnome Shell recording that is\nto blame. If not, does it work if you lower the framerate?\n-- \nPhilipp Wolfer\nparolu \u2013 work together smoothly\nhttps://www.parolu.io\nAll-in-one collaboration tool for designers, developers & project managers\njesusrivas89 notifications@github.com schrieb am Mo., 26. M\u00e4rz 2018,\n06:13:\n\nHi, I have problems with Webm and mp4, especially with the webm. Here are\nsome examples:\nWebm at 48 frames:\nhttps://gfycat.com/LittleClutteredIsabellineshrike\nWebm with 10 frames:\nhttps://gfycat.com/CommonScentedHammerheadbird\nin both videos it looks like it jumps I'm using version 1.3.0 of Peek\nnow the videos are in another color and when I upload the webm to another\nhosting they look different\nSame Webm to 48 frames in another hosting:\nhttps://webmshare.com/q5MX7\nSame webm to 10 frames in another hosting:\nhttps://webmshare.com/oPaYQ\nOn my Linux Mint Mate 18.3 Sylvia 64Bit looks like this:\nhttps://imgur.com/a/tg1U3\nAs you can see in Xplayer it looks bad but in VLC and MPV it shows the\ncolor correctly\nI hope you can help me solve this problem. Thanks in advance\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/299, or mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAB0nHN3RLZ3g2U2SMiJn6ibLV-Kc6Wuks5tiGrcgaJpZM4S6fws\n.\n. Yes, unless you actually used gnome there is no difference in starting it with peek or peek -b ffmpeg, as ffmpeg is the default backend.\n\nI have committed a change that I think will fix your color issues. Not sure about the speedup. I need to look into this.. @jesusrivas89 Could you test with the just released Peek 1.3.1 ? This should fix your color issues, not sure about the jumping. Thanks for the report, I can reproduce. This is a missing build optioin for the bundled ffmpeg. This also affects the flatpak build. I will publish updated Flatpak and AppImage builds later today. A fixed appimage is available at https://github.com/phw/peek/releases/tag/1.3.1. I will fix this in the AppImage and Flatpak builds (both are affected). The builds should be available tomorrow. I close this as a duplicate of #300 for now.. Duplicate of #300 and #301\nThis is already fixed for the latest Flatpak. AppImage needs updating. A Hotkey for starting / stopping the recording is already supported and can be configured in Peek's preferences. The default is Ctrl + Alt + R\nAn exception is if you use Wayland (Gnome Wayland, other desktop environments are not yet supported on Wayland), in this case global hotkeys are unsupported. In this case you can configure a hotkey in the desktop environment and bind it to peek --toggle\nYou can also use this truck if Peek's global hotkeys don't work for you.. This seems to be some issue that the ffmpeg from /home/urvanov/anaconda3/bin/ is used. This is not the first time and project I see anaconda messing up things, since it tends to install tons of binaries and libraries and hides the system provided ones.\nPlease start Peek with a $PATH variable that does not contain /home/urvanov/anaconda3/bin/, or at least has the system ones at the front.. I added a bug report for Anaconda: https://github.com/ContinuumIO/anaconda-issues/issues/9138\nMaybe they will fix their behavior, which is pre-programmed to cause issues like this. In any way, you as a user should fix your $PATH.. @mingwandroid Ok, thanks for the heads up. So the PATH modification is a separate step done by the user, but is neither recommended nor documented that way? That makes sense.\nThat probably means I can close https://github.com/ContinuumIO/anaconda-issues/issues/9138 again :) I just felt like bringing this up since I got a similar issue reported twice already, and it looked to me like a general issue Anaconda handled this. . I cannot replicate this, but I also have no WQHD display to test and cannot set a 125% scaling here.\nNevertheless, since Peek just uses the builtin screen recording of Gnome Shell this is most likely an upstream issue. What happens if you use the built in screen recording (triggered by Ctrl + Shift + Alt + R by default)?\nOn X11 you could fall back to using Peek with the ffmpeg backend by starting it with peek -b ffmpeg.\n. Actually this is a duplicate of #268, which also has an upstream bug report.. That's odd, usually compton was the fix for issues, not the cause. What desktop environment / WM are you running?. Sorry, missed it, Awesome :) There is a related issue https://github.com/awesomeWM/awesome/issues/1827 , where it is confirmed to work without compositor.\nI have personally no experience with compton and only little with Awesome, and this is likely a \"wontfix\". Happy for any hints / help, though.. @DougBeney You mean you are running compton in Gnome Shell!?. I am closing this as whatever this is it is basically a window manager thing. Regarding awesome and clickthrough my last information was that it does not support input shapes at all, so in theory the click through should not work with and without compton running. There is a workaround described in #52 with floating windows and putting Peek behind the thing you want to record.. Your ffmpeg seems to miss functionality, likely vp9 encoding. The --disable-libvpx is likely to blame.\nSee https://github.com/phw/peek/blob/master/data/flatpak/flatpak-master.json#L37 for a list of minimal configure options that are needed for ffmpeg to support all the features Peek requires.\nIf you don't want to use MP4 encoding you can do without libx264 and MP4 muxer, but the rest is pretty much required.. Closing this as I think that has been answered. If not please let me know.. Your ffmpeg crashes with a segmentation fault. Does ffmpeg work for you in general? Was it installed from repositories?\nIt could be that the change to vp9 causes these issues, in this case it might work if you use Peek 1.2 instead.\nHaving said this I neither support ffmpeg 2.8 nor Ubuntu 16.04 and won't make any changes to accomodate those versions.. There was a duplicate of this reported at #314\nI am closing this one as well as I don't support ffmpeg 2. I have updated the README to reflect this.. The error often indicates missing gstreamer plugins. You need at least the gstreamer \"good\" plugins installed. If you want to record MP4 you also need the \"ugly\" plugins.\nIf this is not the issue a look at journalctl -f while triggering this error in Peek should show more details on the reason.\nIf the above doesn't help there is always the possibility to use the ffmpeg backend instead of the gnome-shell one by running Peek with peek -b ffmpeg. I am considering this answered. Please let me know and provide more details if this is not the case.. actually this is one situation where the reported error does not really help identifying the issue :(\nCan you:\n\nBefore Launching Peek, run journalctl -f\nStart Peek from command line with G_MESSAGES_DEBUG=all ./peek, reproduce the error and post the output here together with any related output from journalctl above (there might be some gnome-shell errors).\n\nI assume this is on Gnome? X11 or Wayland?\nAs a workaround if you are on Gnome / X11 try running peek with the ffmpeg backend by launching peek -b ffmpeg. No worries, I just came back from vacation and catching up on stuff :). Thanks for this analysis. I already observed this random build errors when building the Arch package, but could not find the cause. But this is a likely explanation, as doing parallel build is the difference of my Arch package builds and doing local builds during development (where I never observed this issue).\nI will try looking into this, but I don't have much experience with cmake, so any hint in debugging this is welcome. . So I played with this, but currently was not able to reproduce the build failure. Tried with make and various make -jn variations.\nOne possible workaround could be to use ninja instead of make (by using cmake -GNinja), but of course this introduces yet another build time dependency. Also not sure if this really fixes the issue, but at least I have never seen it happen when using ninja.\nSome similar issue is at https://www.bountysource.com/issues/47981582-parallel-builds-fail-due-to-race-condition , but no fix. They just moved to meson, which made the issue obsolete.. Ok, I found something, and that is likely an error in Peek's build files: The issue is easily reproducible if building the tests is enabled with cmake -DBUILD_TESTS=ON. In this case make -j8 is very likely to cause the issue for me, lower numbers not so much (makes sense, less race competitors).\nWhen building with tests some build targets are duplicates, there are warnings such as:\ntests/CMakeFiles/peek-test-screen-recorder-cli-screen-recorder.dir/build.make:126: warning: overriding recipe for target 'src/recording/recording-area.c'\ntests/CMakeFiles/peek-test-screen-recorder-cli-screen-recorder.dir/build.make:97: warning: ignoring old recipe for target 'src/recording/recording-area.c'\ntests/CMakeFiles/peek-test-screen-recorder-cli-screen-recorder.dir/build.make:135: warning: overriding recipe for target 'src/defaults.c'\ntests/CMakeFiles/peek-test-screen-recorder-cli-screen-recorder.dir/build.make:112: warning: ignoring old recipe for target 'src/defaults.c'\ntests/CMakeFiles/peek-test-screen-recorder-cli-screen-recorder.dir/build.make:138: warning: overriding recipe for target 'src/utils.c'\ntests/CMakeFiles/peek-test-screen-recorder-cli-screen-recorder.dir/build.make:118: warning: ignoring old recipe for target 'src/utils.c'\nThis seams to be the source of all the race conditions. I am pretty sure I am doing something bad in https://github.com/phw/peek/blob/master/tests/CMakeLists.txt, but I don't know exactly how I should fix this. Will do some research, but any help appreciated.\n. @gort818 Yes, I think that makes sense. I have been playing with this thought for a while, but until know there was no real reason to switch over to Meson. But this issue changes things a bit. Just have to make sure all functionality is present again. I saw Gnome Builder creates meson build files for new Vala Projects, could be a good starting point.. I started adding Meson build files in #321. Basic build and install works already. I cannot say yet if it solves the issue here, since I haven't added building the tests yet, but I am optimistic.\nIn any way, this is the very first time I use Meson, so I would appreciate some feedback if someone has some more experience in this. So far I already like it, the entire syntax and structure is much more sane than CMake :). @hosiet You have several options right now. For the current release I recommend building with CMake, but without the tests:\ncmake -DBUILD_TESTS=OFF\n\nThis should successfully allow parallel builds. Alternatively build using CMake + Ninja\ncmake -GNinja\n\nGoing forward I would recommend to use Meson, I will do a new release soon. The next release will allow both CMake and Meson, but I will drop CMake support at some point (rather sooner than later).. @hosiet Thanks a lot for the analysis and the patch. Yes, that patch makes sense for this case, I have applied your commit to master.\nHaving said this I will go forward with Meson and will make it the default build system for Peek. Using Meson has been a very smooth and pleasant experience. Compared to CMake setting everything up took far less time with Meson.\nHowever, since Peek currently needs a rather new version of Meson which is not easily available on older distributions I will keep the CMake build around for a while. Just consider CMake officially deprecated, it will only get the necessary updates going forward.. This is on gnome, right? If so, is this reproducible with the integrated Gnome Shell screen recording?\nWhat happens if you launch peek with peek -b ffmpeg?. Your ffmpeg is crashing with a segmentation fault, this is a bug in ffmpeg.\nBut I don't support ffmpeg 2, you should use ffmpeg 3 at least (ffmpeg 4 is yet untested).. What version of ffmpeg is this and how did you install it? It looks like it was built without x11grab / xcb support. If you built ffmpeg from source please try compiling it with --enable-libxcb. Maybe you even have to specify --enable-libxcb\n. See also https://bugs.funtoo.org/browse/FL-4269. Closing, no user feedback. But compiling ffmpeg with xcb support should fix this.. Please take a look at the logs in journalctl, gnome shell should report some more details about the error.\n\nrunning with: peek -b ffmpeg it does not show the error but only records the mouse pointer moving and a black screen behind\n\nThat indicates you are using Wayland, ffmpeg cannot record on Wayland.. @conde2 You are missing the x264 codec. On Arch you need to install gst-plugins-ugly for this.. Again we need the output from gnome-shell in the journal, otherwise it's just guessing. Could be the same issue, could be something different now.\nIt is possible that gnome-shell needs to be restarted after the plugins have been installed, not sure about that.. Please refer to the answers on https://github.com/phw/peek/issues/287. Yes, full screen recording is currently unsupported, see #61. This is one situation where the reported error does not really help identifying the issue :(\nCan you:\nBefore Launching Peek, run journalctl -f\nStart Peek from command line with G_MESSAGES_DEBUG=all ./peek, reproduce the error and post the output here together with any related output from journalctl above (there might be some gnome-shell errors).\n\nI assume this is on Gnome? X11 or Wayland?\nAs a workaround if you are on Gnome / X11 try running peek with the ffmpeg backend by launching peek -b ffmpeg. Thanks a lot for this. @krobelus Yes, right. Maybe it could also be just a separate task that can be run on demand, I think that would be sufficient in most cases. Maybe just before the po files get updated (target update-po in CMake, I think I don't yet have a target for it in Meson).\nAnd yes, going forward it looks like Meson will be used. I like it very much so far and will likely merge the Meson branch soon. I will keep CMake in parallel for a while and see if everything is fine (I have to see how this complicates builds on older systems that don't provide Meson).. Ok, I've merged the Meson build. There was already a target for updating po files (peek-update-pot). A reason more for liking Meson, the whole gettext thing is fully supported with only a single line build script :)\nSo if you want to see how to add this LINGUAS update to Meson got ahead :). > I consider that a sensible approach because it's dangerous to edit generated files.\n\nSo I think to generate LINGUAS we should maybe just have a tiny script in tools which makes it explicit that it changes the file inside the source tree.\n\nI am not against putting this into a script file. But note that meson also supports so called run targets that are supposed to just add a target to invoke an external command, and that is meant to help in development tasks that actually could manipulate source files. Actually the peek-update-po target defined by the i18n module does this. The rule meson does not write to the source files is only true for the build itself, and updating the LINGUAS file is not part of the build but a development task.\n. I have no plans to support this. There is a related issue #53 asking for a command line parameter to specify the output file, that's something I am considering. But I won't go any further for this.\nFor complete scriptability something like using ffcast + ffmpeg is a far better solution.. I don't support avconv anymore. If possible install ffmpeg. You could also try to install Peek version 1.1.0, that's the last version that included tested avconv support.. Thanks for reporting.\nYes. Please make sure you have gstreamer ugly plugins installed and also the H264 codec. If that does not solve your issue, have a look at the gnome shell output in journalctl.. Thanks for reporting, unfortunately this does not allow me to investigate the issue. Can you do the following:\n\nCan you start peek from command line and see if there is additional output?\nPleaese also have a look at the output in journalctl, maybe there is some additional info logged there\nAlso what desktop environment are you using and what file format did you try to record to?. Thanks a lot. As you suggested I reverted the other commit.\n\nI will likely keep CMake around for quite a while just to allow easier building on older systems with older meson, but no need to have more features there.. Duplicate of #61. That's very strange, especially as you say GIF recording works. Because under the hood GIF also records a WebM file which then gets converted into a GIF animation. There are some differences in qality settings, but that strange.\nSome questions:\n\nAre you using Wayland or X?\nIf on X, does running Peek with the ffmpeg backend (run peek -b ffmpeg) work better?\nDoes using the built-in Gnome Shell screen recorder work (start / stop with Ctrl + Alt + Shift + R by default, results are placed in your videos folder)?\nGIFs actually work as expected and contain the full animation?\nCan you provide me a sample WebM file?\n\n\nI noticed that webm processing takes a fraction of the gif's\n\nThat's expected. WebM is just recorded as is, while for GIF first a video is recorded and then it needs to be converted into GIF. Pretty weird, especially when screencast works (Peek on Gnome is using Gnome's screencast capability in the background). So far I cannot reproduce this, but I will test a bit more and also compare the default Gnome screencast settings and see if there is any difference that could be responsible.\nOne thing you could try is using different framerates. Is this maybe only happing on higher framerates?. A few questions to narrow this down:\n\nDid you record on Gnome or some other DE?\nWayland or X?\nDoes recording a WebM have the same effect?\nIf on Gnome, does using the built-in Gnome Shell screen recorder work (start / stop with Ctrl + Alt + Shift + R by default, results are placed in your videos folder)?\nIf on Gnome X11 session, does starting Peek with peek -b ffmpeg make any difference?. The most likely reason for this is that you are missing the h264 codec required. On Gnome gstreamer is used, on Arch you need to install the gst-plugins-ugly plugin for this.\n\nIf this does not solve the issue please look at the output of journalctl when this issue occurs. Gnome should log some more details about this.. Closing as duplicate of https://github.com/phw/peek/issues/287 and similar issues. If the above does not fix your problem please let me know.. The most likely reason for this is that you are missing the h264 codec required. On Gnome gstreamer is used, on Arch you need to install the gst-plugins-ugly plugin for this.\nIf this does not solve the issue please look at the output of journalctl when this issue occurs. Gnome should log some more details about this.\nPlease see also  #287 . Closing as duplicate. Yes, I think I already had this fixed, but probably forgot to publish a new build. Will look into it, thanks for reporting.. @flamendless Please note that there is no officially supported snap app anymore. Where did you get the snap from?. Yes, that sounds useful. I will consider adding this.. Does this only happens when recording MP4 or with all formats? For MP4 the most likely reason for this is that you are missing the h264 codec required. On Gnome gstreamer is used, on Arch you need to install the gst-plugins-ugly plugin for this.\nIf this does not solve the issue please look at the output of journalctl when this issue occurs. Gnome should log some more details about this.\nSee also #287 and related issues.\n. Please refer to the answers on https://github.com/phw/peek/issues/287. Thanks and sorry for the delay in feedback. I definitely will merge this. According to https://standards.freedesktop.org/menu-spec/latest/apa.html AudioVideo must be added as well.. Please refer to the answers on https://github.com/phw/peek/issues/287. The schema needs to be installed. I guess you haven't use make install to install Peek on your system but try to run from the build dir instead, right?\nIf you don't want to install Peek the easiest way to just install the schema is probably to copy data/com.uploadedlobster.peek.gschema.xml to /usr/local/share/glib-2.0/schemas/ and then run:\nglib-compile-schemas /usr/local/share/glib-2.0/schemas/\n\nI actually had some code to compile and load the schema from the local data dir, but this worked only with CMake anyway and I never got it ported to Meson and it is very hackish and only meant for quickly running locally for development purposes. I don't know if this still works and will remove the still existent code related to this.. @szoper If you don't like the App menu at the top you can disable it with GNOME Tweak. Peek will then use the default fallback, which is providing the App menu in the application toolbar.. Closing as duplicte of #287 . Thanks, I'll merge this. But why those strange \u00bb...\u00ab French quotation marks?. Closing as duplicate of #315, please compile ffmpeg with --enable-libxcb. Thanks a lot for your packaging, and sorry for the delay.. Thanks. Sorry, I did not see this before. Has been fixed by https://github.com/phw/peek/pull/394. Please see my comment on https://github.com/phw/peek/issues/367. Thanks a lot for this and sorry for the delay in merging. I assume you were missing some dependencies. Are you recording on Gnome? X or Wayland? Are ffmpeg and the GStreamer good and ugly plugins installed?. Thanks for the details. Can you have journalctl -f running while doing a Peek recording and see if there is any output related to this? Probably something by gnome-shell?\nAlso please test the following:\n\nPlease run loginctl show-session $(loginctl | grep $(whoami) | awk '{print $1}') -p Type to check your session type. It will either output Type=x11 or Type=wayland (I think the default on Ubuntu should be X, but not sure)\nSee if  the built-in Gnome screen recorder works. By default I think you start and stop recording the screen with Shift+Ctrl+Alt+r, the result is placed in your Videos folder\n\nA workaround, at least if you are on X, could be to start Peek with peek -b ffmpeg. This will use ffmpeg for screen recording and should work as long as you are not using Wayland.. Actually Flatpak should install the required runtime itself, I'm not sure why it doesn't. You should probably bring this up on https://github.com/flatpak/flatpak/issues\nHowever, to manually fix the issue you should be able to manually install it by running\nflatpak install flathub org.gnome.Platform//3.26. No, this is a separate issue. Wayland is supported as long as you are using Gnome with XWayland available. That you are not able to type is a bug somewhere. This definitely worked at some point. Can you not type anywhere or just not click through the Peek window?. Please make sure you have the GStreamer \"Good\" plugins installed and if you want to record MP4 additionally the \"Ugly\" plugins. If this does not solve your issue, please comment here again with more details about your Linux setup (distribution, installed gstreamer packages, Wayland or X) and what file format you tried to record.. The old command was for the case were Flathub was not setup at all. I don't really understand why it does not work as expected, but as I understand flathub is nowadays pre-configured so this should be save to update.\n\nThanks for this and sorry for the long delay in merging. Please refer to the answers on https://github.com/phw/peek/issues/287. Please refer to the answers on https://github.com/phw/peek/issues/287. Please refer to the answers on https://github.com/phw/peek/issues/287. Please refer to the answers on https://github.com/phw/peek/issues/287. > I don't know a better way to say this, but the icon bears a strong resemblance to the PornHub logo.\nNow you said this I can't unthink it :(\nNo, seriously, replacing the icon would be most welcomed by me anyway. I just personally lack the design talent to fix this, so I need somebodies help with it. See also https://github.com/phw/peek/issues/114. @smaragdus Agreed that I also don't see the similarities. But since I would like to change the icon anyway it would be \"fixed\". Also if some people get this association I'm not here to judge that.\nClosing as a duplicate of #114. Please refer to the answers on https://github.com/phw/peek/issues/287. Please refer to the answers on https://github.com/phw/peek/issues/287.  @snwh, @jimmac, @lapo: How would you like to be credited here for the icon? Thanks for your work, it's awesome!. @yannicka @BrainBlasted Thanks a lot to both of you for this and sorry for the long delay. This project basically lay dormant for too long now, I really want to get back to updating it.\n@BrainBlasted Thanks also for the detailed review, I think I have addressed all issues you found. I'm going ahead and merge this, if you have anything to add please let me know.. Thanks and sorry for the long delay in merging. The most common cause of this are missing gstreamer-good- or gstreamer-ugly-plugins packages. If you record MP4 and get this error this usually means the h.264 codec is missing, which usually is provided by the gstreamer-ugly-plugins package. Refer to your distribution's documentation on how to install it\nYou can also look into the output of journalctl, there should be some gnome-shell logging with more details.. See also #287. Thanks, merged. Thanks for the report. Your ffmpeg was compiled without some required functionality. How did you install ffmpeg? From source or from distribution?\nIf you installed from source please see https://github.com/phw/peek/blob/master/data/flatpak/flatpak-stable.yml#L35 for a list of minimal configure options required for ffmpeg to be used by Peek.\nIf you use Anaconda this is a frequent cause of issues like this. In this case make sure $HOME/anaconda3/bin/ is not in your $PATH variable. See also https://github.com/phw/peek/issues/304. This is a known issue of i3. Please see https://github.com/phw/peek/issues/52 and https://github.com/i3/i3/issues/2742 . A workaround is to put the peek window behind other windows (which is of course not really how it is intended to work, but it works).\nActually there has been some work on this on the i3 side, it might work with i3 4.16.1, see https://github.com/i3/i3/pull/3514 . But I haven't personally tested this.\nAlso mentioned at https://github.com/phw/peek#why-cant-i-interact-with-the-ui-elements-inside-the-recording-area. Thanks. Please refer to the answers on https://github.com/phw/peek/issues/287. No, it doesn't currently. It probably would not be too difficult actually, since the underlying use of ffmpeg to record the screen also works on macOS (just needs some different parameters). Main work would probably be around getting the build to work cleanly on macOS and figuring out how to do the packaging.\nBut I personally don't have any plans to tackle that. I'll accept pull request adding macOS support, though :D. Please refer to the answers on https://github.com/phw/peek/issues/287. I can't reproduce this here. Could be a vala issue, what version of vala are you using?. Please refer to the answers on https://github.com/phw/peek/issues/287. Is dbus in general working for you? This looks like a general setup issue on your side, please make sure dconf is setup properly. I think you should look for support on this on the Void Linux support channels.. This is an issue with your ffmpeg install, some library incompatibility. Please refer to ffmpeg and/or your distribution about this.. This is likely a duplicate of #287, please refer to the answers there. Usually this is fixed by installing gstreamer ugly plugins. The string must be marked as translatable by wrapping it in _(), e.g. record_button.set_label(_(\"Record as GIF\")). I'd probably also change this to a single base string with printf like\n_(\"Record as %s\").printf (_(\"GIF\")). I broke this in master branch by adding a recorder.config object. You should rebase this branch against master and change this to `recorder..config.output_format`. Btw, that's a nice example of there being no merge conflict, but built will fail anyway ;). As this functionality is repeating for all buttons (and maybe there will be even more in the future) I would wrap it in a select_format () helper function, something like this:\n\n```\nprivate string get_format_name (format) {\n    switch (format) {\n      case OUTPUT_FORMAT_APNG: return (\"APNG\");\n      case OUTPUT_FORMAT_GIF: return (\"GIF\");\n      case OUTPUT_FORMAT_MP4: return (\"MP4\");\n      case OUTPUT_FORMAT_WEBM: return (\"WebM\");\n      default: return \"\";\n    }\n}\nprivate void select_format (format) {\n    recorder.config.output_format = format;\n    var format_name = get_format_name (format);\n    record_button.set_label (_(\"Record as %s\").printf (format_name));\n    pop_format.hide ();\n}\n```\nThat's easier to extend and change in the future.. Please check the whitespace usage. The Peek code uses spaces and no tabs.. No need for this in class scope, this variable is only used once.. See my comment below for adding a select_format() method. This could be reused here to avoid duplication of generating the label texts.\nIn addition I have constants defined for the different formats in defaults.vala. What happens if we add this for all themes? Does it do any harm?. I'd add the above two lines to a static helper function get_theme_name() in desktop-integration.vala. This way it can be reused in application.vala.. I am not so keen on the look of this, can we change it to media-record-symbolic? Better fits the layout I think.. I think this is more easy to do with Timeout.add, see how the start countdown is done in prepare_start_recording. Also the Timeout documentation at https://valadoc.org/glib-2.0/GLib.Timeout.add_full.html. Please add some spaces around =, makes it way more readable :). I would format as mm:ss, e.g. 08:33 for 8 minutes and 33 seconds. That's easy to do with printf and the modulo operator:\n\"%02d:%02d\".printf (seconds / 60, seconds % 60);. That's true. You could still store the start time (in seconds) and on each interval calculate the elapsed time. That way a small time slip in the Timeout calls does not lead to wrongly displayed time.. And yes, add_seconds_full could be tried. There is some info that the first call can be delayed by up to one second, though. Never tried it.. Old habbits :p Also two lines lower. I am just curious, why is stop_button.sensitive needed to be checked?. So let's see how this works out. If we find out the time will vary too much for longer recordings, we can first maybe try to increase the priority here or do the time calculation on each call based on a start time.. You should mark this as non-translatable. Also please change the default \"label\" into \"00:00\", that way it looks nicer in glade.. I would suggest to call this from inside `start_recording ()`. Also note that  `start_recording ()` gets called on two locations, currently your branch works only if one has configured displaying the start recording timeout.. Please update the spacing around `=` and `+=` below, than this PR looks great code wise.. You should be able to replace the custom handling of the shortcut string by using Gtk's builtin functions for that:\n\nstring keys = shortcut.get_string (\"keybinding-toggle-recording\");\nuint accelerator_key;\nGdk.ModifierType accelerator_mods;\nGtk.accelerator_parse (keys, out accelerator_key, out accelerator_mods);\nvar shortcut_hint = Gtk.accelerator_get_label (accelerator_key, accelerator_mods);\nshortcut_label.set_text (\"Start/Stop: \" + shortcut_hint);\nSee also shortcut-label.vala where I also used this to display the shortcut on older Gtk versions.. Please make sure to have a space before and after =. Also Peek commonly uses a space before function parantheses. That's not a style I normally use, but most other Vala apps I saw used that, and I thought it would make sense to follow commonly used coding style ;). I would put the client ID into a constant IMGUR_CLIENT_ID. I think it is better to completely hide the row if it's not available for other formats. It was not completely clear to me why the Imgur option was not selectable. Also it might be better to whitelist formats, since this avoids breaking things if new formats are added to Peek.. Better to give the rows descriptive names, e.g. \"imgur_row\". Both here in the code and in the .ui file.\nAlso I would put the entire Imgur specific code into a separate function like do_imgur_upload(), same for the open in file manager option. This will leave only the if ... else if selectoin in this callback, making the code easier to read and easier to extend with additional options. Later we can probably refactor it to put the different handlers (imgur upload, open in file manager etc.) into separate classes with a common interface.. It would probably be easier and more flexible to pass the File object to the ShareDialog instead of just the URI. Also use File.get_path() instead of file.get_uri(), see my comment below.. If you use File.get_path() instead of File.get_uri() you can avoid this string manipulation. Also the %20 replacement above and likely some other url encoded things that could sneak into the URI part.. Consider using Soup.Session.queue_message for asynchroneously sending the message and not block here. You will need to put the rest of this function into the callback.. Fixed. Added this. I missed that, will try to fix after merge. Fixed in https://github.com/phw/peek/commit/0f4a29dca333bdbd848c5722fe4e4cb7716255fb\nThanks again. ",
    "cedlemo": "I have tried recording with different times:\n-     1 min -> files is saved but is empty no crash of the application\n-     30 sec-> files is saved but is empty no crash of the application\n-     20 sec-> file ok\nThe ouput:\npeek\nffmpeg version 3.0 Copyright (c) 2000-2016 the FFmpeg developers\n  built with gcc 5.3.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libdcadec --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxvid --enable-shared --enable-version3 --enable-x11grab\n  libavutil      55. 17.103 / 55. 17.103\n  libavcodec     57. 24.102 / 57. 24.102\n  libavformat    57. 25.100 / 57. 25.100\n  libavdevice    57.  0.101 / 57.  0.101\n  libavfilter     6. 31.100 /  6. 31.100\n  libavresample   3.  0.  0 /  3.  0.  0\n  libswscale      4.  0.100 /  4.  0.100\n  libswresample   2.  0.101 /  2.  0.101\n  libpostproc    54.  0.100 / 54.  0.100\nInput #0, x11grab, from ':0+168,132':\n  Duration: N/A, start: 1457357508.631989, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 722x503, 15 fps, 15 tbr, 1000k tbn, 15 tbc\n[huffyuv @ 0x55f4e3cec4a0] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55f4e3cec960] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55f4e3cf4f60] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55f4e3cf7ac0] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55f4e3cc98e0] using huffyuv 2.2.0 or newer interlacing flag\nOutput #0, avi, to '/tmp/peekXZOUDY.avi':\n  Metadata:\n    ISFT            : Lavf57.25.100\n    Stream #0:0: Video: huffyuv (HFYU / 0x55594648), rgb24, 722x502, q=2-31, 200 kb/s, 15 fps, 15 tbn, 15 tbc\n    Metadata:\n      encoder         : Lavc57.24.102 huffyuv\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> huffyuv (native))\nPress [q] to stop, [?] for help\nRecording stopped15 q=-0.0 size=  346943kB time=00:01:07.26 bitrate=42252.1kbits/s speed=   1x    \nframe= 1015 fps= 15 q=-0.0 Lsize=  349020kB time=00:01:07.66 bitrate=42253.8kbits/s speed=   1x    \nvideo:348991kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.008437%\nSeeing the ouput I am a little surprised that you use an external tool for recording. (I know nothing about this matter so I don't judge, I am just surprised). So I guess the process is:\n-    use the peek window in order to have coordinate\n-    use ffmpeg for recording a video of this part\n-    transforme this video to gif. \nThe part of conversion and save seem to be very heavy in term of resources usage.\nJust a question:\nWhy don't you use pixbufs of your window in order to get image of the underlying windows at a \"f\" frenquencie and use them to build the gif. \n. > But the code is structured in a way that I can plugin another recording backend and I think I will try you pixbuf suggestion.\nI have done a little program with ruby in order to see if how it could work (it was after I asked it)\nThe idea was to get the pixbuf with a timeout and then build a gif with rmagick.\nThe script is around 150 lines I planed to propose it as a sample example for the Ruby-GNOME2 project. If you want I could send you a link (ruby is not that hard to understand and the script is simple)\nThe issue is to find the good timing to register the pixbuf then use the good timing with rmagick so that the gif is smooth\n. I haven't proposed yet but here is the code (quite ugly):\n``` ruby\n!/usr/bin/env ruby\nrequire \"gtk3\"\nrequire \"cairo\"\nrequire \"rmagick\"\nclass AlphaWindow < Gtk::Window\n  def initialize\n    super()\nheader = Gtk::HeaderBar.new\nheader.set_title(\"Giffffff\")\nheader.show_close_button = true\nset_titlebar(header)\nrecord_button = Gtk::Button.new(:label => \"Record\")\n\nstop_button = Gtk::Button.new(:label => \"Stop\")\nstop_button.sensitive = false\n\nrecord_button.signal_connect \"clicked\" do |widget|\n  set_keep_above(true)\n  record\n  stop_button.sensitive = true\n  widget.sensitive = false\nend\n\nstop_button.signal_connect \"clicked\" do |widget|\n  set_keep_above(false)\n  stop_record\n  make_gif\n  record_button.sensitive = true\n  widget.sensitive = false\nend\n\nheader.pack_start(record_button)\nheader.pack_end(stop_button)\n\nset_app_paintable(true)\nset_default_size(1200, 600)\n\nsignal_connect(\"delete_event\") do\n  Gtk.main_quit\nend\n\nsignal_connect(\"screen-changed\") do |widget, _old_screen|\n  screen_changed(widget)\nend\n\n@recording_view = Gtk::Box.new(:vertical,0)\n@recording_view.visible = true\n@recording_view.can_focus = false\n@recording_view.set_width_request(100)\n@recording_view.set_height_request(100)\n@recording_view.pack_start(Gtk::Label.new(\"Pof\"))\nadd(@recording_view)\n\n@recording_view.signal_connect \"draw\" do |widget, event|\n  cr = widget.window.create_cairo_context\n  cr.set_operator(Cairo::OPERATOR_CLEAR) \n  if @supports_alpha\n    cr.set_source_rgba(0.0, 0.0, 0.0, 0.5)\n  else\n    cr.set_source_rgb(0.0, 0.0, 0.0)\n  end\n  cr.fill\n\n  win_region = create_region_from(widget.toplevel)\n  rec_region = create_region_from(widget)\n  win_region.subtract!(rec_region)\n  self.input_shape_combine_region(win_region)\n\n  false\nend\n\nscreen_changed(self)\n@nb = 0\n@files = []\n\nend\ndef create_region_from(widget)\n    x, y, w, h = widget.allocation.to_a\n    x, y = widget.translate_coordinates(widget.toplevel, 0, 0)\n    region = Cairo::Region.new([x , y , w, h])\n  end\ndef screen_changed(widget)\n    visual = widget.screen.rgba_visual\n    if visual && widget.screen.composited?\n      set_visual(visual)\n      @supports_alpha = true\n    else\n      set_visual(widget.screen.system_visual)\n      @supports_alpha = false\n    end\n  end\ndef stop_record\n    GLib::Source.remove(@timer) if @timer\n  end\ndef record\n    @timer = GLib::Timeout.add(200) do\n      queue_draw\n      x, y, w, h = @recording_view.allocation.to_a\n      _x, _y = @recording_view.translate_coordinates(self, 0, 0)\n      x, y = window.position \n      @nb += 1\n      filename = \"/tmp/pof#{@nb}.png\"\n      @files << filename\n      pix = Gdk.default_root_window.to_pixbuf(x + _x , y +_y , w, h)\n      pix.save(filename, \"png\")\n      true\n    end\n  end\ndef make_gif\n    gif = Magick::ImageList.new(*@files)\n    gif.delay = 1\n    gif.ticks_per_second = 5 \n    gif.write(\"pof_animated.gif\")\n  end\nend\nalpha = AlphaWindow.new\nalpha.show_all\nGtk.main\n```\n. For saving the window size : \n\ngtk_window_set_default_size() must now be combined with gtk_window_get_size(). See https://wiki.gnome.org/HowDoI/SaveWindowState for up-to-date best-practice for saving window size\n\nfrom https://wiki.gnome.org/ThreePointNineteen/ReleaseNotes in the What's new for developpers > Gtk + part .\nRegards\n. ",
    "SalahAdDin": "I have the same problem.\nIn the first, all is well, two beautiful and lovely gift, them, i make the same gif one by one time, at least five times.\nI take two screen shots :+1: \n\n\nOne empty gif ever.\nOther problem that i have is the performance, normally i haven't leaks in memory, but in the final, after take the empty gif, doesn't matter if reboot the laptop, i have memory leaks because peek.\nThis is my SO:\nbash\n               `.-/::/-``\n            .-/osssssssso/.               salahaddin@TulipanROG\n           :osyysssssssyyys+-             OS: Antergos \n        `.+yyyysssssssssyyyyy+.           Kernel: x86_64 Linux 4.7.2-1-ARCH\n       `/syyyyyssssssssssyyyyys-`         Uptime: 53m\n      `/yhyyyyysss++ssosyyyyhhy/`         Packages: 1316\n     .ohhhyyyyso++/+oso+syy+shhhho.       Shell: zsh 5.2\n    .shhhhysoo++//+sss+++yyy+shhhhs.      Resolution: 1920x1080\n   -yhhhhs+++++++ossso+++yyys+ohhddy:     DE: Gnome \n  -yddhhyo+++++osyyss++++yyyyooyhdddy-    WM: GNOME Shell\n .yddddhso++osyyyyys+++++yyhhsoshddddy`   WM Theme: Numix-Frost-Light\n`odddddhyosyhyyyyyy++++++yhhhyosddddddo   GTK Theme: Arc [GTK2/3]\n.dmdddddhhhhhhhyyyo+++++shhhhhohddddmmh.  Icon Theme: Xenlism-Wildfire-ThursDay\nddmmdddddhhhhhhhso++++++yhhhhhhdddddmmdy  Font: Cantarell 11\ndmmmdddddddhhhyso++++++shhhhhddddddmmmmh  CPU: Intel Core i7-4720HQ CPU @ 3.6GHz\n-dmmmdddddddhhyso++++oshhhhdddddddmmmmd-  RAM: 2812MiB / 15941MiB\n .smmmmddddddddhhhhhhhhhdddddddddmmmms. \n   `+ydmmmdddddddddddddddddddmmmmdy/.     \n      `.:+ooyyddddddddddddyyso+:.`\n. Here are the trace back:\nbash\npeek                                                                                                                                    \ue0b2 1 \u21b5 \ue0b2 2846 \ue0b2 21:45:46 \nffmpeg version 3.1.3 Copyright (c) 2000-2016 the FFmpeg developers\n  built with gcc 6.1.1 (GCC) 20160802\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxvid --enable-netcdf --enable-shared --enable-version3 --enable-x11grab\n  libavutil      55. 28.100 / 55. 28.100\n  libavcodec     57. 48.101 / 57. 48.101\n  libavformat    57. 41.100 / 57. 41.100\n  libavdevice    57.  0.101 / 57.  0.101\n  libavfilter     6. 47.100 /  6. 47.100\n  libavresample   3.  0.  0 /  3.  0.  0\n  libswscale      4.  1.100 /  4.  1.100\n  libswresample   2.  1.100 /  2.  1.100\n  libpostproc    54.  0.100 / 54.  0.100\n[x11grab @ 0x55c406843b00] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+182,304':\n  Duration: N/A, start: 1473734755.661748, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1294x585, 15 fps, 1000k tbr, 1000k tbn, 1000k tbc\n[huffyuv @ 0x55c40686e760] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55c40687d740] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55c406882060] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55c406886e00] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55c40688bac0] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55c406890780] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55c406895440] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55c40689a100] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x55c40684cdc0] using huffyuv 2.2.0 or newer interlacing flag\n[avi @ 0x55c40684b7c0] Using AVStream.codec to pass codec parameters to muxers is deprecated, use AVStream.codecpar instead.\nOutput #0, avi, to '/tmp/peekVZ40NY.avi':\n  Metadata:\n    ISFT            : Lavf57.41.100\n    Stream #0:0: Video: huffyuv (HFYU / 0x55594648), rgb24, 1294x584, q=2-31, 200 kb/s, 15 fps, 15 tbn, 15 tbc\n    Metadata:\n      encoder         : Lavc57.48.101 huffyuv\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> huffyuv (native))\nPress [q] to stop, [?] for help\nRecording stopped15 q=-0.0 size=  538407kB time=00:01:02.46 bitrate=70607.8kbits/s speed=   1x    \nframe=  944 fps= 15 q=-0.0 Lsize=  542517kB time=00:01:02.93 bitrate=70619.1kbits/s speed=   1x    \nvideo:542489kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.005121%\n. @phw. when going you to release new version? I'm waiting for it.. @phw Did you finish it man?. Thanks!. @phw \nI have the same problem:\nbash\n ~ \ue0b0 peek                                                                                                                                      \ue0b2 \u2713 \ue0b2 5589 \ue0b2 12:07:51 \nUsing screen recorder backend gnome-shell\nRecording to file /home/salahaddin/.cache/peek/peek9GZBYY.avi\nError: Child process killed by signal 9\nFile save error: Error when getting information for file '/home/salahaddin/.cache/peek/peekVYGDYY.gif': No existe el fichero o el directorio\nTemp file delete error: Error removing file /home/salahaddin/.cache/peek/peekVYGDYY.gif: No existe el fichero o el directorio\nRecording to file /home/salahaddin/.cache/peek/peekJ5U3XY.avi\nError: Child process killed by signal 9\nFile save error: Error when getting information for file '/home/salahaddin/.cache/peek/peekTVVGYY.gif': No existe el fichero o el directorio\nTemp file delete error: Error removing file /home/salahaddin/.cache/peek/peekTVVGYY.gif: No existe el fichero o el directorio\nRecording to file /home/salahaddin/.cache/peek/peekVXL7XY.avi\nError: Child process killed by signal 9\nFile save error: Error when getting information for file '/home/salahaddin/.cache/peek/peekJ0NDYY.gif': No existe el fichero o el directorio\nTemp file delete error: Error removing file /home/salahaddin/.cache/peek/peekJ0NDYY.gif: No existe el fichero o el directorio\nRecording to file /home/salahaddin/.cache/peek/peek4COIYY.avi\nError: Child process killed by signal 9\nFile save error: Error when getting information for file '/home/salahaddin/.cache/peek/peek20I6XY.gif': No existe el fichero o el directorio\nTemp file delete error: Error removing file /home/salahaddin/.cache/peek/peek20I6XY.gif: No existe el fichero o el directorio\nI tried many times with long and very short gifs but never save it.\nI record the memory usage and i have this:\n\nAs you can see peek eats all memory, but in a horrible way, eat 8GB but never save a gif.\nThis is a very big problem about performance and use.\nI want to make clear that i'm using HD: 1920x1080, but i tried also reduce a lot of the resolution.. @phw what's it means?. With new version in Antergos i have the same problem: I do click in the peek icon but peek doesn't init.\nBut if i'll go to the terminal and put peek, enter,  peek inits corretly.\nWhat happen @phw ?. Here is the traceback:\nbash\nabr 13 12:28:27 TulipanROG dleyna-renderer-service[29465]: Enabled : F\nabr 13 12:28:27 TulipanROG dleyna-renderer-service[29465]: Entries: (null)\nabr 13 12:28:27 TulipanROG dleyna-renderer-service[29465]: Calling GetRenderers method\nabr 13 12:28:27 TulipanROG dleyna-renderer-service[29465]: Client :1.1433 lost\nabr 13 12:28:29 TulipanROG dleyna-renderer-service[29465]: dLeyna: Exit\nabr 13 12:28:29 TulipanROG dbus-daemon[1100]: Activating service name='com.uploadedlobster.peek'\nabr 13 12:28:29 TulipanROG dbus-daemon[1100]: Activated service 'com.uploadedlobster.peek' failed: Failed to execute program com.uploadedlobster.peek: No such file or directory\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **: gdk_pixbuf_from_pixdata() called on: at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **:         Encoding raw at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **:         Dimensions: 16 x 16 at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **:         Rowstride: 64, Length: 1048 at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **:         Copy pixels == false at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **: gdk_pixbuf_from_pixdata() called on: at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **:         Encoding raw at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **:         Dimensions: 16 x 16 at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **:         Rowstride: 64, Length: 1048 at /usr/bin/shutter line 2891.\nabr 13 12:28:33 TulipanROG shutter.desktop[27755]: GdkPixbuf-LOG **:         Copy pixels == false at /usr/bin/shutter line 2891.. I'm working in Antergos Linux 64Bits.\nhere is the content:\n[D-BUS Service]\nName=com.uploadedlobster.peek\nExec=/pkg/pkg/peek/usr/bin/peek --gapplication-service. I tried with AUR package:\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: Port: 0\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: Push host port: 0\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: [Logging settings]\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: Log Type : 0\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: Log Level: 0x13\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: [Network filtering settings]\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: Enabled : F\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: Entries: (null)\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: Calling GetRenderers method\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16725]: Client :1.536 lost\nabr 13 14:44:41 TulipanROG dleyna-renderer-service[16254]: dLeyna: Exit\nabr 13 14:44:42 TulipanROG dleyna-renderer-service[16725]: dLeyna: Exit\nabr 13 14:44:42 TulipanROG dbus-daemon[1071]: Activating service name='com.uploadedlobster.peek'\nabr 13 14:44:42 TulipanROG dbus-daemon[1071]: Activated service 'com.uploadedlobster.peek' failed: Failed to execute program com.uploadedlobster.peek: No such file or directory\nSame problem, and worst.. [D-BUS Service]\nName=com.uploadedlobster.peek\nExec=/pkg/pkg/peek/usr/bin/peek --gapplication-service. I reinstalled from AUR: yaourt -Sbu peek.. Now, didn't It, you are right. . Yep, is solved. Thank you! . ",
    "military1": "The same problem on Antargos. be the solution?\n. ",
    "lode": "I know from SilentCast (https://github.com/colinkeenan/silentcast) that it saves the temporary files on disk, somewhere in /home. A bit ugly, but maybe better suited for larger animations.\n. I'm used to SilentCast (https://github.com/colinkeenan/silentcast) which allows the same although with a more lean interface: you get a Nautilus window with the images and you can i.e. delete files before they are converted to gif.\n(I don't like the messy interface of SilentCast though, Peek is way nicer! :+1:)\n. Personally I wouldn't find it too messy to have a button to open Nautilus as a first step. The interface would stay clean and you get another known interface. Indeed as you say, it takes quite some time before you have such an interface remade in Peek itself (to remove, copy, reorder, etc.)\n. FYI, Gnome's screencast feature (https://help.gnome.org/users/gnome-help/stable/screen-shot-record.html.en) uses Ctrl+Alt+Shift+R by default.. ",
    "strixaluco": "I'm having empty gifs with a similar output as above, except for notable ImageMagick's-related errors: \nconvert: delegate failed `\"avconv\" -v -1 -i \"%i\" -vframes %S -vcodec pam -an -f rawvideo -y \"%u.pam\" 2> \"%Z\"' @ error/delegate.c/InvokeDelegate/1310.\nconvert: unable to open image `/tmp/magick-12086Su1hLuf0PyXb.pam': No such file or directory @ error/blob.c/OpenBlob/2712.\nconvert: no images defined `/tmp/peekL6O3OY.gif' @ error/convert.c/ConvertImageCommand/3210.\nEnvironment:\nDebian 8 Stable + backports\nPeek 0.7.2\nFull log:\n```\npeek\nffmpeg version 3.1.3-1~bpo8+1 Copyright (c) 2000-2016 the FFmpeg developers\n  built with gcc 4.9.2 (Debian 4.9.2-10)\n  configuration: --prefix=/usr --extra-version='1~bpo8+1' --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --cc=cc --cxx=g++ --enable-gpl --enable-shared --disable-stripping --disable-decoder=libopenjpeg --disable-decoder=libschroedinger --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --disable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librubberband --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzvbi --enable-openal --enable-opengl --enable-x11grab --enable-libdc1394 --enable-libiec61883 --enable-libzmq --enable-frei0r --enable-chromaprint --enable-libopencv --enable-libx264\n  libavutil      55. 28.100 / 55. 28.100\n  libavcodec     57. 48.101 / 57. 48.101\n  libavformat    57. 41.100 / 57. 41.100\n  libavdevice    57.  0.101 / 57.  0.101\n  libavfilter     6. 47.100 /  6. 47.100\n  libavresample   3.  0.  0 /  3.  0.  0\n  libswscale      4.  1.100 /  4.  1.100\n  libswresample   2.  1.100 /  2.  1.100\n  libpostproc    54.  0.100 / 54.  0.100\nInput #0, x11grab, from ':0+36,225':\n  Duration: N/A, start: 1475819738.493736, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 856x435, 15 fps, 15 tbr, 1000k tbn, 1000k tbc\n[huffyuv @ 0x1d52480] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x1d55600] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x1d58d00] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x1d5c480] using huffyuv 2.2.0 or newer interlacing flag\n[huffyuv @ 0x1d2b4c0] using huffyuv 2.2.0 or newer interlacing flag\n[avi @ 0x1d2a320] Using AVStream.codec to pass codec parameters to muxers is deprecated, use AVStream.codecpar instead.\nOutput #0, avi, to '/tmp/peekFNMROY.avi':\n  Metadata:\n    ISFT            : Lavf57.41.100\n    Stream #0:0: Video: huffyuv (HFYU / 0x55594648), rgb24, 856x434, q=2-31, 200 kb/s, 15 fps, 15 tbn, 15 tbc\n    Metadata:\n      encoder         : Lavc57.48.101 huffyuv\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> huffyuv (native))\nPress [q] to stop, [?] for help\nframe=   13 fps=0.0 q=-0.0 size=    4369kB time=00:00:00.66 bitrate=53689.0kbitsframe=   21 fps= 20 q=-0.0 size=    7821kB time=00:00:01.20 bitrate=53390.9kbitsframe=   29 fps= 18 q=-0.0 size=   11291kB time=00:00:01.73 bitrate=53364.1kbitsframe=   37 fps= 17 q=-0.0 size=   14771kB time=00:00:02.26 bitrate=53383.2kbitsframe=   45 fps= 17 q=-0.0 size=   18258kB time=00:00:02.80 bitrate=53417.9kbitsframe=   53 fps= 17 q=-0.0 size=   21755kB time=00:00:03.33 bitrate=53465.1kbitsframe=   61 fps= 16 q=-0.0 size=   25259kB time=00:00:03.86 bitrate=53513.6kbitsframe=   69 fps= 16 q=-0.0 size=   28797kB time=00:00:04.40 bitrate=53614.8kbitsframe=   77 fps= 16 q=-0.0 size=   32386kB time=00:00:04.93 bitrate=53778.2kbitsframe=   85 fps= 16 q=-0.0 size=   36050kB time=00:00:05.46 bitrate=54022.1kbitsframe=   93 fps= 16 q=-0.0 size=   39776kB time=00:00:06.00 bitrate=54307.5kbitsRecording stopped \nframe=   96 fps= 16 q=-0.0 Lsize=   42609kB time=00:00:06.40 bitrate=54539.0kbits/s speed=1.04x  \nvideo:42601kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.018559%\nconvert: delegate failed \"avconv\" -v -1 -i \"%i\" -vframes %S -vcodec pam -an -f rawvideo -y \"%u.pam\" 2> \"%Z\"' @ error/delegate.c/InvokeDelegate/1310.\nconvert: unable to open image/tmp/magick-12086Su1hLuf0PyXb.pam': No such file or directory @ error/blob.c/OpenBlob/2712.\nconvert: no images defined `/tmp/peekL6O3OY.gif' @ error/convert.c/ConvertImageCommand/3210.\n```\n. In fact, I'm not having empty gif issues with Peek 0.8.0 anymore. Unfortunately, can't tell for sure what was the reason, but v. 0.8.0 definitely has been problematic for some period of time. Maybe recent update of ffmpeg or ImageMagick eliminated the bug.. ",
    "Kabouik": "I get the 0 bytes gifs too, especially when I try to record a large area or more than 15 sec. It also comes with horrible performance (extreme lag, freezes), while everything works correctly and smoothly  when Peek succeeds in generating a working gif. I have an i5 CPU with 8 GB RAM and 3 GB of Swap on a ssd, running Solus 1.2.1.. ",
    "mareknovotny": "how could default /tmp be changed to something else?\n. thanks! it works fine\n. ",
    "lolilolicon": "@phw Is there a reason why you're using huffyuv output? It's ridiculously HUGE.\nI know nothing about the matter, but see the comment on this page recommending libx264rgb, for instance.\nYou may want to check out this famous post on how to produce high quality GIF using ffmpeg.\nPersonally, I use PNG output (e.g. %05d.png) and post-process with ImageMagick or Gifsicle.\n. @phw perhaps consider capping convert resources, see this comment, for example.\n. > I can see that it quickly fills up all available memory for recordings longer than 15-20 seconds\nSee issue #2 \n. ",
    "chteuchteu": "I used to use ScreenToGif on Windows to record gifs: please know that I'm delighted there's a Linux alternative!\nI used ScreenToGif to record the following gif (used in one of my projects' README):\n\nIn order to compare file sizes, I recorded quite the same animation with Peek:\n\nEven if these are not quite comparable, they are still based on the same filesize scale (framerate, colors amount, duration, \"change rate\"/animation speed).\nHere's the conclusion: ScreenToGif produced a 58,2 kB file while Peek saved a 16,6 kB file. Peek wins!\nShould this issue be closed? We could mention it somewhere in the documentation though, or lead some more tests\n. +1 for the FAQ!\n. Nice! Yet another thing to put in our F.A.Q.!\n. Nice one ideed! (but messy indeed, just like you said)\nI'd rather have a ScreenToGif interface though - an horizontal list of frames: when scrolling, you get a nice preview of what the gif will look like. Plus, you can fit contextual information (frame duration & index) easier\n. Yes indeed, you can browse this page to see the latest releases: Releases. There's even an atom feed you can watch!\n. ",
    "bobblkabb": "For me disabling changing vsync option in Plasma (5.14.3) did the trick:\nOption:\nTear prevention (vsync) = Never\nSettings path:\nSystem Settings > Hardware > Display and Monitor > Compositor Settings for Desktop Effects\n. ",
    "pakhomchik": "installing  xcompmgr and running xcompmgr -c solved the problem.\nThanx. Great application!:)\n. ",
    "freddii": "in mate 1.8.1 i had to enable software-composing-windowmanager:\nsystem > settings > window > enable [x] software-composing-windowmanager\n. For xfce 4.12:\nEnglish:\nApplications > Settings > Windows Manager Tweaks > Compositor > Enable Display Compositing\nGerman:\nMen\u00fc > Einstellungen > Feineinstellung der Fensterverwaltung > Komposit [x]Anzeigenkomposit aktivieren\n. same here:\nfreddii@debian:~$ peek\nUsing screen recorder backend ffmpeg\ndouble free or corruption (fasttop)\nAborted\nfreddii@debian:~$ peek --version\nPeek 1.3.1\nI am using debian testing\n. ",
    "mbnoimi": "I installed recent Gtk from the following PPA but unfortunately I'm still get same error!\n- PPA\nsudo add-apt-repository ppa:gnome3-team/gnome3-staging\nsudo add-apt-repository ppa:gnome3-team/gnome3\n- Error detailes\n```\nE: peek: unstripped-binary-or-object usr/bin/peek\nW: peek: hardening-no-relro usr/bin/peek\nE: peek: missing-dependency-on-libc needed by usr/bin/peek\nE: peek: changelog-file-missing-in-native-package\nE: peek: no-copyright-file\nE: peek: description-starts-with-package-name\nE: peek: extended-description-is-empty\nW: peek: binary-without-manpage usr/bin/peek\nW: peek: desktop-entry-contains-unknown-key usr/share/applications/com.uploadedlobster.peek.desktop:13 DBusActivatable\nLintian finished with exit status 1\n``\n. The output ofapt-cache show libgtk-3-0`\n```\napt-cache show libgtk-3-0\nPackage: libgtk-3-0\nSource: gtk+3.0\nPriority: optional\nSection: libs\nInstalled-Size: 6708\nMaintainer: Ubuntu Developers ubuntu-devel-discuss@lists.ubuntu.com\nArchitecture: amd64\nVersion: 3.12.2-0ubuntu15.2~trusty1\nRecommends: hicolor-icon-theme, libgtk-3-bin\nSuggests: librsvg2-common, gvfs\nProvides: gtk3-binver-3.0.0\nDepends: libgtk-3-common (>= 3.12.2), libatk-bridge2.0-0 (>= 2.5.3), libatk1.0-0 (>= 2.7.5), libc6 (>= 2.14), libcairo-gobject2 (>= 1.10.0), libcairo2 (>= 1.13.0~20140204), libcolord1 (>= 0.1.10), libcups2 (>= 1.6.2), libfontconfig1 (>= 2.9.0), libgdk-pixbuf2.0-0 (>= 2.27.1), libglib2.0-0 (>= 2.39.90), libpango-1.0-0 (>= 1.32.4), libpangocairo-1.0-0 (>= 1.32.4), libpangoft2-1.0-0 (>= 1.32.4), libwayland-client0 (>= 1.3.92), libwayland-cursor0 (>= 1.3.90), libx11-6 (>= 2:1.4.99.1), libxcomposite1 (>= 1:0.3-1), libxcursor1 (>> 1.1.2), libxdamage1 (>= 1:1.1), libxext6, libxfixes3, libxi6 (>= 2:1.2.99.4), libxinerama1, libxkbcommon0 (>= 0.2.0-0ubuntu3~), libxrandr2 (>= 2:1.2.99.3), shared-mime-info\nPre-Depends: multiarch-support\nBreaks: gnome-themes-standard (<< 3.6), gtk3-engines-unico (<< 1.0.2-0ubuntu2), libvte-2.90-9 (<< 1:0.32), libwebkitgtk-3.0-0 (<< 1.8.0), murrine-themes (<= 0.98.2)\nFilename: pool/main/g/gtk+3.0/libgtk-3-0_3.12.2-0ubuntu15.2~trusty1_amd64.deb\nSize: 2072822\nMD5sum: 5400eb51f625eb8cd6ac0021d1704474\nSHA1: 4fa5bd1595731d26f3f8c1688d821a3fbf2dabf5\nSHA256: 2e5d415181d94494f9411bcf7df9fa55199d923849f73ca0435f93d0df703a0c\nDescription-en: GTK+ graphical user interface library\n GTK+ is a multi-platform toolkit for creating graphical user\n interfaces. Offering a complete set of widgets, GTK+ is suitable\n for projects ranging from small one-off tools to complete application\n suites.\n .\n This package contains the shared libraries.\nDescription-md5: 2d73631a8c144c8ea021cee46ee049b5\nMulti-Arch: same\nOriginal-Maintainer: Debian GNOME Maintainers pkg-gnome-maintainers@lists.alioth.debian.org\nPackage: libgtk-3-0\nPriority: optional\nSection: libs\nInstalled-Size: 6562\nMaintainer: Ubuntu Developers ubuntu-devel-discuss@lists.ubuntu.com\nOriginal-Maintainer: Debian GNOME Maintainers pkg-gnome-maintainers@lists.alioth.debian.org\nArchitecture: amd64\nSource: gtk+3.0\nVersion: 3.10.8-0ubuntu1.6\nProvides: gtk3-binver-3.0.0\nDepends: libgtk-3-common (>= 3.10.8), libatk-bridge2.0-0 (>= 2.5.3), libatk1.0-0 (>= 2.7.5), libc6 (>= 2.14), libcairo-gobject2 (>= 1.10.0), libcairo2 (>= 1.13.0~20140204), libcolord1 (>= 0.1.10), libcups2 (>= 1.6.2), libfontconfig1 (>= 2.9.0), libgdk-pixbuf2.0-0 (>= 2.27.1), libglib2.0-0 (>= 2.39.4), libpango-1.0-0 (>= 1.32.4), libpangocairo-1.0-0 (>= 1.32.4), libpangoft2-1.0-0 (>= 1.32.4), libwayland-client0 (>= 1.3.92), libwayland-cursor0 (>= 1.2.0), libx11-6 (>= 2:1.4.99.1), libxcomposite1 (>= 1:0.3-1), libxcursor1 (>> 1.1.2), libxdamage1 (>= 1:1.1), libxext6, libxfixes3, libxi6 (>= 2:1.2.99.4), libxinerama1, libxkbcommon0 (>= 0.2.0-0ubuntu3~), libxrandr2 (>= 2:1.2.99.3), shared-mime-info\nPre-Depends: multiarch-support\nRecommends: hicolor-icon-theme, libgtk-3-bin\nSuggests: librsvg2-common, gvfs\nBreaks: gnome-themes-standard (<< 3.6), gtk3-engines-unico (<< 1.0.2-0ubuntu2), libvte-2.90-9 (<< 1:0.32), libwebkitgtk-3.0-0 (<< 1.8.0), murrine-themes (<= 0.98.2)\nFilename: pool/main/g/gtk+3.0/libgtk-3-0_3.10.8-0ubuntu1.6_amd64.deb\nSize: 1960312\nMD5sum: 689f31ab08568e18f46a81ec557ad735\nSHA1: 05bb104e62379d03abada6a5eadb39ef0e76a685\nSHA256: 210daf4eac10b9067beaee1976e3e2ac613ef1f9d2ecc399a8fd98e0918b7ebc\nDescription-en: GTK+ graphical user interface library\n GTK+ is a multi-platform toolkit for creating graphical user\n interfaces. Offering a complete set of widgets, GTK+ is suitable\n for projects ranging from small one-off tools to complete application\n suites.\n .\n This package contains the shared libraries.\nDescription-md5: 2d73631a8c144c8ea021cee46ee049b5\nMulti-Arch: same\nHomepage: http://www.gtk.org/\nBugs: https://bugs.launchpad.net/ubuntu/+filebug\nOrigin: Ubuntu\nPhased-Update-Percentage: 0\nSupported: 5y\nTask: ubuntu-desktop, ubuntu-usb, kubuntu-desktop, kubuntu-full, kubuntu-active-live, kubuntu-active-desktop, kubuntu-active-full, kubuntu-active-live, edubuntu-desktop, edubuntu-usb, xubuntu-desktop, mythbuntu-frontend, mythbuntu-frontend, mythbuntu-desktop, mythbuntu-backend-slave, mythbuntu-backend-slave, mythbuntu-backend-master, mythbuntu-backend-master, lubuntu-core, ubuntustudio-desktop, ubuntu-gnome-desktop\nPackage: libgtk-3-0\nPriority: optional\nSection: libs\nInstalled-Size: 6558\nMaintainer: Ubuntu Developers ubuntu-devel-discuss@lists.ubuntu.com\nOriginal-Maintainer: Debian GNOME Maintainers pkg-gnome-maintainers@lists.alioth.debian.org\nArchitecture: amd64\nSource: gtk+3.0\nVersion: 3.10.8-0ubuntu1.4\nProvides: gtk3-binver-3.0.0\nDepends: libgtk-3-common (>= 3.10.8), libatk-bridge2.0-0 (>= 2.5.3), libatk1.0-0 (>= 2.7.5), libc6 (>= 2.14), libcairo-gobject2 (>= 1.10.0), libcairo2 (>= 1.13.0~20140204), libcolord1 (>= 0.1.10), libcups2 (>= 1.6.2), libfontconfig1 (>= 2.9.0), libgdk-pixbuf2.0-0 (>= 2.27.1), libglib2.0-0 (>= 2.39.4), libpango-1.0-0 (>= 1.32.4), libpangocairo-1.0-0 (>= 1.32.4), libpangoft2-1.0-0 (>= 1.32.4), libwayland-client0 (>= 1.3.92), libwayland-cursor0 (>= 1.2.0), libx11-6 (>= 2:1.4.99.1), libxcomposite1 (>= 1:0.3-1), libxcursor1 (>> 1.1.2), libxdamage1 (>= 1:1.1), libxext6, libxfixes3, libxi6 (>= 2:1.2.99.4), libxinerama1, libxkbcommon0 (>= 0.2.0-0ubuntu3~), libxrandr2 (>= 2:1.2.99.3), shared-mime-info\nPre-Depends: multiarch-support\nRecommends: hicolor-icon-theme, libgtk-3-bin\nSuggests: librsvg2-common, gvfs\nBreaks: gnome-themes-standard (<< 3.6), gtk3-engines-unico (<< 1.0.2-0ubuntu2), libvte-2.90-9 (<< 1:0.32), libwebkitgtk-3.0-0 (<< 1.8.0), murrine-themes (<= 0.98.2)\nFilename: pool/main/g/gtk+3.0/libgtk-3-0_3.10.8-0ubuntu1.4_amd64.deb\nSize: 1959304\nMD5sum: 9c42a1ae67477967440a69774a729fbf\nSHA1: c62924e816d57835165cc482e6ee3b2bcf7e56ec\nSHA256: 0d9ecd51fafe7709153676501643acfe13aa22f31482513e2560a9043e5622ae\nDescription-en: GTK+ graphical user interface library\n GTK+ is a multi-platform toolkit for creating graphical user\n interfaces. Offering a complete set of widgets, GTK+ is suitable\n for projects ranging from small one-off tools to complete application\n suites.\n .\n This package contains the shared libraries.\nDescription-md5: 2d73631a8c144c8ea021cee46ee049b5\nMulti-Arch: same\nHomepage: http://www.gtk.org/\nBugs: https://bugs.launchpad.net/ubuntu/+filebug\nOrigin: Ubuntu\nSupported: 5y\nTask: ubuntu-desktop, ubuntu-usb, kubuntu-desktop, kubuntu-full, kubuntu-active-live, kubuntu-active-desktop, kubuntu-active-full, kubuntu-active-live, edubuntu-desktop, edubuntu-usb, xubuntu-desktop, mythbuntu-frontend, mythbuntu-frontend, mythbuntu-desktop, mythbuntu-backend-slave, mythbuntu-backend-slave, mythbuntu-backend-master, mythbuntu-backend-master, lubuntu-core, ubuntustudio-desktop, ubuntu-gnome-desktop\nPackage: libgtk-3-0\nPriority: optional\nSection: libs\nInstalled-Size: 6546\nMaintainer: Ubuntu Developers ubuntu-devel-discuss@lists.ubuntu.com\nOriginal-Maintainer: Debian GNOME Maintainers pkg-gnome-maintainers@lists.alioth.debian.org\nArchitecture: amd64\nSource: gtk+3.0\nVersion: 3.10.8-0ubuntu1\nProvides: gtk3-binver-3.0.0\nDepends: libgtk-3-common (>= 3.10.8), libatk-bridge2.0-0 (>= 2.5.3), libatk1.0-0 (>= 2.7.5), libc6 (>= 2.14), libcairo-gobject2 (>= 1.10.0), libcairo2 (>= 1.13.0~20140204), libcolord1 (>= 0.1.10), libcups2 (>= 1.6.2), libfontconfig1 (>= 2.9.0), libgdk-pixbuf2.0-0 (>= 2.27.1), libglib2.0-0 (>= 2.39.4), libpango-1.0-0 (>= 1.32.4), libpangocairo-1.0-0 (>= 1.32.4), libpangoft2-1.0-0 (>= 1.32.4), libwayland-client0 (>= 1.3.92), libwayland-cursor0 (>= 1.2.0), libx11-6 (>= 2:1.4.99.1), libxcomposite1 (>= 1:0.3-1), libxcursor1 (>> 1.1.2), libxdamage1 (>= 1:1.1), libxext6, libxfixes3, libxi6 (>= 2:1.2.99.4), libxinerama1, libxkbcommon0 (>= 0.2.0-0ubuntu3~), libxrandr2 (>= 2:1.2.99.3), shared-mime-info\nPre-Depends: multiarch-support\nRecommends: hicolor-icon-theme, libgtk-3-bin\nSuggests: librsvg2-common, gvfs\nBreaks: gnome-themes-standard (<< 3.6), gtk3-engines-unico (<< 1.0.2-0ubuntu2), libvte-2.90-9 (<< 1:0.32), libwebkitgtk-3.0-0 (<< 1.8.0), murrine-themes (<= 0.98.2)\nFilename: pool/main/g/gtk+3.0/libgtk-3-0_3.10.8-0ubuntu1_amd64.deb\nSize: 1959484\nMD5sum: fd302d459225223266a91211628827a6\nSHA1: 3130e54fba46fc3ccdb64ef5a7257b4ec876b1eb\nSHA256: 68375ad38f71586470b420afc2bc5b630419aae086e31a8b6515768f3de80c61\nDescription-en: GTK+ graphical user interface library\n GTK+ is a multi-platform toolkit for creating graphical user\n interfaces. Offering a complete set of widgets, GTK+ is suitable\n for projects ranging from small one-off tools to complete application\n suites.\n .\n This package contains the shared libraries.\nDescription-md5: 2d73631a8c144c8ea021cee46ee049b5\nMulti-Arch: same\nHomepage: http://www.gtk.org/\nBugs: https://bugs.launchpad.net/ubuntu/+filebug\nOrigin: Ubuntu\nSupported: 5y\nTask: ubuntu-desktop, ubuntu-usb, kubuntu-desktop, kubuntu-full, kubuntu-active-live, kubuntu-active-desktop, kubuntu-active-full, kubuntu-active-live, edubuntu-desktop, edubuntu-usb, xubuntu-desktop, mythbuntu-frontend, mythbuntu-frontend, mythbuntu-desktop, mythbuntu-backend-slave, mythbuntu-backend-slave, mythbuntu-backend-master, mythbuntu-backend-master, lubuntu-core, ubuntustudio-desktop, ubuntu-gnome-desktop\nPackage: libgtk-3-0\nSource: gtk+3.0\nVersion: 3.10.8~8+qiana\nArchitecture: amd64\nMaintainer: Ubuntu Developers ubuntu-devel-discuss@lists.ubuntu.com\nInstalled-Size: 6550\nPre-Depends: multiarch-support\nDepends: libgtk-3-common (>= 3.10.8~8+qiana), libatk-bridge2.0-0 (>= 2.5.3), libatk1.0-0 (>= 2.7.5), libc6 (>= 2.14), libcairo-gobject2 (>= 1.10.0), libcairo2 (>= 1.13.0~20140204), libcolord1 (>= 0.1.10), libcups2 (>= 1.6.2), libfontconfig1 (>= 2.9.0), libgdk-pixbuf2.0-0 (>= 2.27.1), libglib2.0-0 (>= 2.39.4), libpango-1.0-0 (>= 1.32.4), libpangocairo-1.0-0 (>= 1.32.4), libpangoft2-1.0-0 (>= 1.32.4), libwayland-client0 (>= 1.3.92), libwayland-cursor0 (>= 1.2.0), libx11-6 (>= 2:1.4.99.1), libxcomposite1 (>= 1:0.3-1), libxcursor1 (>> 1.1.2), libxdamage1 (>= 1:1.1), libxext6, libxfixes3, libxi6 (>= 2:1.2.99.4), libxinerama1, libxkbcommon0 (>= 0.2.0-0ubuntu3~), libxrandr2 (>= 2:1.2.99.3), shared-mime-info\nRecommends: hicolor-icon-theme, libgtk-3-bin\nSuggests: librsvg2-common, gvfs\nBreaks: gnome-themes-standard (<< 3.6), gtk3-engines-unico (<< 1.0.2-0ubuntu2), libvte-2.90-9 (<< 1:0.32), libwebkitgtk-3.0-0 (<< 1.8.0), murrine-themes (<= 0.98.2)\nProvides: gtk3-binver-3.0.0\nMulti-Arch: same\nHomepage: http://www.gtk.org/\nPriority: optional\nSection: libs\nFilename: pool/upstream/g/gtk+3.0/libgtk-3-0_3.10.8~8+qiana_amd64.deb\nSize: 2018506\nSHA256: 71f39d4087c0052698b50af74d9e4ab589f2158c2476514c14d8a8bd0590915d\nSHA1: 61c2a2a7b04fb6dd548da134d9b9c85c45068ee6\nMD5sum: 6c124217f10450823efaba11cd4f22b4\nDescription-en: GTK+ graphical user interface library\n GTK+ is a multi-platform toolkit for creating graphical user\n interfaces. Offering a complete set of widgets, GTK+ is suitable\n for projects ranging from small one-off tools to complete application\n suites.\n .\n This package contains the shared libraries.\nDescription-md5: 2d73631a8c144c8ea021cee46ee049b5\nOriginal-Maintainer: Debian GNOME Maintainers pkg-gnome-maintainers@lists.alioth.debian.org\n``\n- The output ofdpkg -s libgtk-3-0`\n```\ndpkg -s libgtk-3-0\nPackage: libgtk-3-0\nStatus: install ok installed\nPriority: optional\nSection: libs\nInstalled-Size: 6550\nMaintainer: Ubuntu Developers ubuntu-devel-discuss@lists.ubuntu.com\nArchitecture: amd64\nMulti-Arch: same\nSource: gtk+3.0\nVersion: 3.10.8~8+qiana\nProvides: gtk3-binver-3.0.0\nDepends: libgtk-3-common (>= 3.10.8~8+qiana), libatk-bridge2.0-0 (>= 2.5.3), libatk1.0-0 (>= 2.7.5), libc6 (>= 2.14), libcairo-gobject2 (>= 1.10.0), libcairo2 (>= 1.13.0~20140204), libcolord1 (>= 0.1.10), libcups2 (>= 1.6.2), libfontconfig1 (>= 2.9.0), libgdk-pixbuf2.0-0 (>= 2.27.1), libglib2.0-0 (>= 2.39.4), libpango-1.0-0 (>= 1.32.4), libpangocairo-1.0-0 (>= 1.32.4), libpangoft2-1.0-0 (>= 1.32.4), libwayland-client0 (>= 1.3.92), libwayland-cursor0 (>= 1.2.0), libx11-6 (>= 2:1.4.99.1), libxcomposite1 (>= 1:0.3-1), libxcursor1 (>> 1.1.2), libxdamage1 (>= 1:1.1), libxext6, libxfixes3, libxi6 (>= 2:1.2.99.4), libxinerama1, libxkbcommon0 (>= 0.2.0-0ubuntu3~), libxrandr2 (>= 2:1.2.99.3), shared-mime-info\nPre-Depends: multiarch-support\nRecommends: hicolor-icon-theme, libgtk-3-bin\nSuggests: librsvg2-common, gvfs\nBreaks: gnome-themes-standard (<< 3.6), gtk3-engines-unico (<< 1.0.2-0ubuntu2), libvte-2.90-9 (<< 1:0.32), libwebkitgtk-3.0-0 (<< 1.8.0), murrine-themes (<= 0.98.2)\nConffiles:\n /etc/gtk-3.0/settings.ini 191064916afe4b1fbc4bac9e105baa69\nDescription: GTK+ graphical user interface library\n GTK+ is a multi-platform toolkit for creating graphical user\n interfaces. Offering a complete set of widgets, GTK+ is suitable\n for projects ranging from small one-off tools to complete application\n suites.\n .\n This package contains the shared libraries.\nHomepage: http://www.gtk.org/\nOriginal-Maintainer: Debian GNOME Maintainers pkg-gnome-maintainers@lists.alioth.debian.org\n```\n. The problem still occurs for sure.\n. @oleerik I'm working now on upgrade process from LM 17.3 -> 18\n. Works like a charm in Linux Mint 18 xfce x64\n. ",
    "fosspill": "@mbnoimi what about upgrading to the newest linux mint?\n. Experiencing the same issue. I believe you need to run a proper compositor for peek to work, however I did try with the built-in nvidia compositor and still got the black output.\nEDIT: Maybe trying xcompmgr or compton might be an idea?\n. Hello! I experienced the same issue while trying to install it in a tmux session. It seems like the tests needs some X session to be accessible to install.\nAll I did was run a normal xterm window and install it there. Worked fine.\n. I believe this \"issue\" could be closed? Maybe adding it to some FAQ might be a good idea.\n. Huh, I really like that idea @fb87! \nHowever, I think the notifications works really well the way they are.\n. ",
    "Bajoja": "Another interesting idea would be to draw a rectangle with the mouse, the area you want to record, as already happens with some screen recorders and screen capture tools.\n. I had the same problem, but after package and install it as RPM solved the problem.\n. @phw that's correct.. @phw i wiil take care of this soon, i wiil make a pull request to fix this. @phw Ok i will test and launch 1.0 . Build successfull, 1.0 launch for fedora. ",
    "fbruetting": "Maybe you can copy the workflow of Shutter optionally (but also keep the current one, because there you possibly could drag the window while recording). ;)\n. Other solutions:\n\u2022 Move Peeks window by holdung the Super key down and dragging the window with the mouse across the top bar.\n\u2022 The same is possible via Alt + F7 + Arrow keys (or mouse).\n\u2022 Set an additional monitor to be positioned above your main screen, then you can drag Peeks window over the top bar.. Here (Fedora 24) it doesn't start per application menu either. But it starts per command line somehow\u2026\n. Try per CLI.\n. So it can't be an error due to missing packages. Normally CMake should throw an error when dependencies are missing.\n. You're right, but directories should NEVER be hardcoded because most are set by CMake and can be changed at installation.\n. @phw, can you please add the fix to master?\n. Standard is /usr/local/, custom directories should be specified by -D CMAKE_INSTALL_PREFIX.\n. Works, thanks!\n. Ok, I see\u2026 an option at least would be great!\n. Ok, I understand your workflow. But some people like me, who just make one Gif and upload it to a Github bug report, trash the notification center. ;P But I have an idea, since Gnome loves popups (and me too, and maybe even you ;P):\nYou could integrate a button or symbol in the header bar, which when clicked, opens a popup. This popup lists all screencasts done in this session as file names or some other describing text (Shutter-like behaviour, but with the style of the open button in Gedit). Below the list, but still inside the popup (or alternatively in the main view) you could draw the first or middle frame (or play the screencast) of the currently mouse-overed screencast as preview. And when you click on a screencast item in the list, the entry could expand on the bottom and show icons for \"open in file manager\", \"edit\", \"copy\", \"share\" and \"trash\" for example (like the notifications in Android behave when dragged down). Being able to drag and drop an item of the list would also be beneficial, if you already got some other video editing program open, or want to save a screencast in a specific folder. This method has the advantage of easily accessing all screencasts done in a session and starting various actions on them. What do you think?\n. Why shouldn't the frame be ready for another recording while the former recording is processed in the background? Can't processing be done in a separate thread?\nAs described above, I'd suggest a button like the \"open\" button in Gedit. Could be named \"Saved (2)\" or \"2 (saved) Recordings\" or whatever\u2026 And if you click on it, a popup gets opened below (like in Gedit) and shows a list of all previous recordings of that session. Clicking it could open the recording itself or (maybe through a separate icon) the containing folder. Advantages are (a) no sight-blocking bar which has to be clicked away most times, (b) access to all instead of just one previous recording, (c) no popup appearing for those people who don't need it, and (d) a preview image could be shown. What's your opinion of my suggestion? :). Okay, then maybe a small square button with just a number inside? If there are no previous (or cleared) recordings, the button can disappear, which gives you minimal frame size. With (c) I meant the notification, sorry.. It just came to my mind, that a timeline view could be shown after clicking on e.g. a \u201eedit/crop/etc\u201c button, when the screencast is finished. In this timeline, the start and end could be moved via a slider like in video editing software, and even pauses (#40) should be made possible\u2026 so just some simple editing stuff, nothing complex. :). Jeah, could be just a shortcut like \u201ccut off the last second\u201d, because that would be of use very often \u2013 so the people don\u2019t need to search for the correct frame from which to crop.. Green Recorder is able to record on Wayland. Could stealing some code help in this case? [Maybe you can steal / get inspired by some other features, too. ^^]\nhttp://www.omgubuntu.co.uk/2017/03/green-recorder-wayland-screen-recorder?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+d0od+%28OMG%21+Ubuntu%21%29. Well, doesn't work under Wayland at my station at all. I just see the resolution \"562x0\" \u2013 no matter how big the size of the window is, and:\n$ GDK_BACKEND=x11 peek\nUsing screen recorder backend gnome-shell\nError: GDBus.Error:org.gtk.GDBus.UnmappedGError.Quark._g_2dio_2derror_2dquark.Code19: Invalid params\nError: GDBus.Error:org.gtk.GDBus.UnmappedGError.Quark._g_2dio_2derror_2dquark.Code19: Invalid params. Makes not much sense since almost every other distro on the planet uses FFmpeg (some switched back to FFmpeg in the past years). Further FFmpeg seems better for the future, because they got the fastest AV1 encoder on the planet and should provide better overall performance.. Yes, and the contrary is true for us (Fedora / RHEL / most other distros): Depending on libav would pull a (superfluous) dependency for us. We don't have libav shipped, but FFmpeg. I read some articles last year and came to the point that FFmpeg seems to be better than libav, so I prefer the current situation for both reasons.\n// Third reason: Swapping to libav doesn't provide any advantage besides the dependency change (and assumably less performance).. You're right, sorry!. Showing status is fine, but showing progress would be very nice for longer screencasts!. I use latest Fedora 25 with Gnome 3.22.2, GTK 3.22.9 and libwayland-{client,serer} 1.12.0.. Now it's \"714x4\". Here's the console output:\n$ GDK_BACKEND=x11 peek\nUsing screen recorder backend gnome-shell\nCould not start recording, already an active recording using org.gnome.Shell.Screencast?. Here's the output, maybe it's due to my UHD screen. But further the recording area turns completely transparent after hovering the mouse over it, I even can't see the resolution anymore.\nhttp://pastebin.com/Kw1ZgUNV. Pixel sizes are correct, but the screen still gets transparent when hovering the mouse over it.\nWhen starting the recording, moving the window cancels the recording.\nFurthermore I cannot do recording because of some ffmpeg error, as you'll see in the output. But still I got asked where to save the file?! I saved \"it\" and there was no file appearing in this directory.\n$ GDK_BACKEND=x11 peek\nUsing screen recorder backend gnome-shell\nRecording to file /home/frank/.cache/peek/peekZJ9XWY.avi\nRecording canceled with return code 0\nRecording to file /home/frank/.cache/peek/peekZE95WY.avi\nconvert: delegate failed `\"ffmpeg\" -nostdin -v -1 -i \"%i\" -vframes %S -vcodec pam -an -f rawvideo -y \"%u.pam\" 2> \"%Z\"' @ error/delegate.c/InvokeDelegate/1332.\nconvert: unable to open image `/tmp/magick-16203x68fOownvhwX.pam': No such file or directory @ error/blob.c/OpenBlob/2702.\nconvert: no images defined `/home/frank/.cache/peek/peekCWVSWY.gif' @ error/convert.c/ConvertImageCommand/3241.\nError: Der Kindprozess wurde mit Status 1 beendet\nFile save error: Fehler beim Holen der Informationen f\u00fcr Datei \u00bb/home/frank/.cache/peek/peekCWVSWY.gif\u00ab: No such file or directory\nTemp file delete error: Fehler beim Entfernen der Datei \u00bb/home/frank/.cache/peek/peekCWVSWY.gif\u00ab: No such file or directory. Ok, MP4 and WEBM works, and somehow ffmpeg wasn't installed and I had to install it. I really thought it was installed already, however, I think this needs to be checked. Then GIF works on Wayland, too.\nI ran the command with this output:\nInput #0, avi, from 'peekMJGAXY.avi':\n  Duration: N/A, start: 0.000000, bitrate: N/A\n    Stream #0:0: Video: vp8 (VP80 / 0x30385056), yuv420p, 625x545, 15 fps, 15 tbr, 15 tbn, 15 tbc\n[rawvideo @ 0x555e8ddcc0a0] Using AVStream.codec to pass codec parameters to muxers is deprecated, use AVStream.codecpar instead.\nOutput #0, rawvideo, to 'somefile.pam':\n  Metadata:\n    encoder         : Lavf57.41.100\n    Stream #0:0: Video: pam, rgb24, 625x545, q=2-31, 200 kb/s, 15 fps, 15 tbn, 15 tbc\n    Metadata:\n      encoder         : Lavc57.48.101 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (vp8 (native) -> pam (native))\nframe=  113 fps=0.0 q=-0.0 Lsize=  112772kB time=00:00:07.53 bitrate=122632.6kbits/s speed=15.6x    \nvideo:112772kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%. Cool, thanks!. Great!. No, there are other errors occurring with Gnome\u2019s internal recording function (resizing icons aren\u2019t shown at all for both cursor themes).\nFFMPEG doesn\u2019t work at all, as you see in the attachment. Maybe because of UHD and Wayland?\nPeek 2018-04-30 20-44.zip\nPeek by the way shows Gtk-Message: Failed to load module \"pk-gtk-module\" in the command line. And I run it via Flatpak.\n. Ah cool, I'm on Wayland.\nAm 11.08.2018 8:46 nachm. schrieb Alessandro notifications@github.com:\nI will work on this, just to make sure are you using X11 or Wayland?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread. \n. I assume this could be due to some modifications which were done to GtkWindow or so, as regular GTK windows always scale like expected. There are just a few programs which don\u2019t scale (Firefox and Electron applications). Maybe you find something in their bug trackers or can see if some GDK/GTK top levels were modified somehow?. Yeah, should work automatically. Maybe it\u2019s an issue due to changed DPI in conjunction with recording? Or do you use some kind of recording widget, that prevents DPI change?\nMaybe you can strip the code down to the very minimal basic window (commment out that video recording area), to see if that will work?. ",
    "tankgit": "I found a way to record the screen with top bar(gnome) @phw @jjnilton \n\nrun peek from command line with --no-headerbar.\nand then press 'Ctrl+Alt+R' to start recording, there will be 3s count-down, and during this time, move the recording area to wherever you want, including top bar. (you can move it by pressing the hotkey and left mouse button at the edge of the window, in my case, it's SUPER+LMB)\nenjoy your recording with top bar  ^_^. \n",
    "WyRe": "\n1. run peek from command line with --no-headerbar.\n\n@tankgit I've noticed that's not necessary. However it keeps recording the bottom border of peek's window.\n\n. ",
    "dankranz": "Hello Phillipp. Peek is a very nice little program. I am using the Ubuntu\ndefault theme. I have attached a gif to show you what it is doing. I found\nout I can load it into Gimp and simply crop off the grey bars and it works\nfine.\nThanks for getting back to me.\nKeep up the great work.\nDan Kranz\nOn Thu, Sep 1, 2016 at 3:58 AM, Philipp Wolfer notifications@github.com\nwrote:\n\nWhat's likely happening here is that the inner borders of the Peek Window\nget recorded as well. I have to look into this, any special theme you are\nusing or the default?\nI already did some tweaking of the recording area, but maybe this is theme\ndependent sometimes and I have to add theme specific tweak. But maybe the\nnew recording implementation proposed in #1\nhttps://github.com/phw/peek/issues/1 would also help here.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/11#issuecomment-244004647, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AUYBOdvZpzMNL81fYaMk5b4oWdyoV5LHks5qloWUgaJpZM4JxuRR\n.\n. \n",
    "probonopd": "Example recorded on Ubuntu 16.04 with Peek-0.7.2.glibc2.14-x86_64.AppImage:\n\n. Will there be a new release with a new deb?. @phw \nThank you, working well for me. I generated a Peek-0.8.0.glibc2.14-x86_64.AppImage based on the ppa, and this works on Ubuntu 16.04 without the grey bars.\nhttps://bintray.com/probono/AppImages/Peek/0.8.0.glibc2.14#files. How about an AppImage?\nI have uploaded an experimental one to\nhttps://bintray.com/probono/AppImages/Peek/_latestVersion#files\nJust download the AppImage, make it executable, and run. The GIF below was made with it :-)\nShould run on 2014ish or later distributions.\nSome rough edges expected, testing and polishing might be needed.\n\n@phw let me know if you are interested in this. If yes, I can extend your existing .travis.yml so that a fresh, continuous AppImage is produced on each build. (The AppImage above was made from debs using this recipe, but I understand you are looking for something more \"agile\").\n. @Ads20000 Check AppImageUpdate.\n. @phw not 100% sure but undefined symbol: hb_buffer_set_cluster_level seems like an issue with your base system; see http://unix.stackexchange.com/questions/235012/problem-with-gtk-application-s\n. > Otherwise I like the idea, also of building it automatically with travis.\nIf you want to go this route then you don't need deb packaging to produce an AppImage. Examples:\nhttps://github.com/search?q=%22Package+the+binaries+built+on+Travis-CI+as+an+AppImage%22&type=Code&utf8=%E2%9C%93\n\nWould it be possible to also offer a 32 bit one (probably requires me to look into the 32 bit cross-compiling, something I have avoided so far). If you could provide a pull request for this it would be great.\n\nI haven't investigated this area much but it's definitely doable; the MuseScore project provides AppImages for x86_64, i686, and armhf (e.g., Raspberry Pi).\n\nMy main issue with all the packaging is, that I don't want to do it myself and that it should make a minimum of effort when releasing\n\nAppImage is made with this use case in mind... :)\n\nHaving a PPA would at least have been something I know how to do\n\nThen you can use something like the recipe I posted above to convert debs in the (ideally trusty or older) ppa to an AppImage mostly automatically.\n. > From your recipe it is not entirely clear to me how and from where the Peek binaries for the AppImage are obtained. Is it something specified when creating the final AppImage from the recipe?\nThe script that runs the recipe is at https://github.com/probonopd/AppImages/blob/master/recipes/meta/Recipe\n. @phw would it be possible to add trusty and/or precise to the ppa?\nThanks.. Agree. @Ads20000 who puts together the AppImage can decide what to bundle, and what to use from the target system(s). The peek project could decide to bundle Gtk 3.10 and the glib and gio versions required by peek as private copies inside the AppImage. Still Gtk 3.10, glib and gio should be compiled on the oldest systems they still can be compiled on, in order not to draw in the latest glibc etc. versions. The result would be a bigger AppImage that still would work on older distributions.. @Ads20000 Yes, as long as the newer version of GTK (than 3.10) would be compiled on an older distribution.. I have it almost running, but right now I am getting GLib-GIO-ERROR **: Settings schema 'com.uploadedlobster.peek' is not installed.\nCan you load the schema from a relative path (relative to the main executable, ../share/glib-2.0/schemas/ relative to the path where peek executable is, which can be found from /proc/self/exe) rather from the default absolute path /usr/share/glib-2.0/schemas/?\nI think this can be done around here.\nSimilarly, could you look for avconv and any other required helper binaries next to the peek executable in addition to the $PATH?\nThat way it should continue to work when installed traditionally, but would also make the application relocateable.\nhttps://people.gnome.org/~gcampagna/docs/Gio-2.0/Gio.SettingsSchemaSource.new_from_directory.html\nA workaround would be to use a wrapper bash script that exports $XDG_DATA_DIRS and $PATH, but I'd like to avoid that and use a cleaner solution if possible.. Also I am a bit confused how avconv works. It seems like it also needs ffmpeg for converting from avi to gif. Why not use ffmpeg to record then, in the first place?\nCan you build a minimal required version of ffmpeg on Travis CI with all the options and dependencies disabled that are not needed for peek in order to reduce the dependency tree and, hence, reduce AppImage size?. OK, using avconv should be fine, no ffmpeg needed then? Do we need convert from ImageMagick?. ImageMagick and ffmpeg are huge beasts, the best way to do this would be to compile them with everything disabled at build time that is not absolutely necessary. I would greatly appreciate if you could do this. Let's see how far we can bring down those 55 MB :-)\nFor ImageMagick, see http://blog.schdbr.de/imagemagic-osx-static-relocatable-build/ under \"manual\". Ideally we can do with additional environment variables such as $MAGICK_HOME.. No, because this is relative to the directory where the user is in (which could be anywhere) but we need relative to the application binary.. Very cool @phw - can you build these in https://github.com/phw/peek/blob/master/.travis.yml?. Please have .travis.yml install them to PREFIX /usr, I will then take it from there.. Hi @phw thanks for looking into this. With your AppImage, I get\n```\n(peek-x86-64.appimage:11449): GLib-GIO-ERROR **: Settings schema 'com.uploadedlobster.peek' is not installed\nTrace/breakpoint trap\n```\nThe same issue I discussed here.. Ping @phw :-). Works great on Ubuntu 16.04.1 LTS (Xenial Xerus).. But:\n```\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.1 LTS\"\nNAME=\"Ubuntu\"\nVERSION=\"14.04.1 LTS, Trusty Tahr\"\nID=ubuntu\nID_LIKE=debian\nPRETTY_NAME=\"Ubuntu 14.04.1 LTS\"\nVERSION_ID=\"14.04\"\nHOME_URL=\"http://www.ubuntu.com/\"\nSUPPORT_URL=\"http://help.ubuntu.com/\"\nBUG_REPORT_URL=\"http://bugs.launchpad.net/ubuntu/\"\nNo protocol specified\nDBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-dTEtMO0L2O,guid=102a9d938e2276459c7f9ea659dbd15d\nDBUS_SESSION_BUS_PID=19872\n/mnt/usr/lib/peek/peek-run: symbol lookup error: /mnt/usr/lib/peek/peek-run: undefined symbol: g_application_add_main_option\n```\nTested on ubuntu-14.04.1-desktop-amd64.iso using testappimage.. Let's debug:\n```\nme@host:~$ Downloads/peek-1507392410.d9fbe79-Build74.1.glibc2.14-x86_64.AppImage  --appimage-extract\nme@host:~$ LD_DEBUG=libs ./squashfs-root/AppRun 2>&1 | grep \" init: /usr/\"\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libXdmcp.so.6\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libxcb.so.1\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libX11.so.6\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libdrm.so.2\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libdatrie.so.1\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libffi.so.6\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0\n     20000: calling init: /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libthai.so.0\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libfontconfig.so.1\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libpango-1.0.so.0\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libpangoft2-1.0.so.0\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libpangocairo-1.0.so.0\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libgio-2.0.so.0\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libgdk_pixbuf-2.0.so.0\n     20000: calling init: /usr/lib/x86_64-linux-gnu/gvfs/libgvfscommon.so\n     20000: calling init: /usr/lib/x86_64-linux-gnu/gio/modules/libgvfsdbus.so\n     20000: calling init: /usr/lib/x86_64-linux-gnu/gio/modules/libdconfsettings.so\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libicudata.so.55\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libicuuc.so.55\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libxml2.so.2\n     20000: calling init: /usr/lib/x86_64-linux-gnu/libcroco-0.6.so.3\n     20000: calling init: /usr/lib/x86_64-linux-gnu/librsvg-2.so.2\n     20000: calling init: /usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-svg.so\n     20000: calling init: /usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/2.10.0/loaders/libpixbufloader-png.so\n```\nEverything with \"gdk\" in the name may be suspect. So let's see:\n```\nme@host:~$ grep -r g_application_add_main_option squashfs-root/\nBinary file squashfs-root/usr/lib/peek/peek-run matches\nSo, this symbol is not resolved within the AppImage\nLet's check which libraries reference it on the (Xenial) host system\nme@host:~$ grep -r g_application_add_main_option /usr/lib/\ngrep: /usr/lib/cups/backend/serial: Permission denied\nBinary file /usr/lib/x86_64-linux-gnu/girepository-1.0/Gio-2.0.typelib matches\nBinary file /usr/lib/x86_64-linux-gnu/libgio-2.0.so.0.4800.1 matches\nBinary file /usr/lib/x86_64-linux-gnu/libgiomm-2.4.so.1.3.0 matches\n```\nSo I assume you'd need to bundle the gio stuff, hoping it doesn't introduce other \"too new\" dependencies.. Yes, once Trusty is no longer a supported (by the vendor) version.\nBut I respect your decision.. Thanks for your valuable feedback. AppImage is a volunteer-based community effort, so pull requests are highly welcome, as are wiki edits.. Workaround:\n$ sudo apt install at-spi2-core\nMaybe this can be bundled?. As long as it will still run without this being present in the system, it shall be fine.. Similar to https://github.com/AppImage/AppImages/issues/51. Thanks!. libfreetype.so.6 shall not be bundled.. The Peek AppImage should be changed to not bundle libfreetype.so.6.. ",
    "dandv": "Just installed Peek, so happy I no longer have to depend on the abandoned GifRecorder!\nI found the same problem with the grey bars. No special theme or anything. Hoping for a fix soon!\n\n. Interestingly, LICEcap on WINE doesn't record those bars.. The daily PPA works for me too. Yay, no more gray bars!. I've just noticed huge memory and CPU use with a longer recording (~30 seconds):\n\nAnother time when I had less RAM available, my Ubuntu 16.04 locked up and I had to just wait for a few minutes.. I see, thanks.\nBTW, I've been considering ditching Ubuntu, in large part because of their stubborn pigheadedness in not giving any shit on user requests such as making the close button location configurable or moving the stupid top panel (which is empty 99% of the time and just wastes space) to the bottom.\nWhat other distro/DE do you recommend? Not KDE/Plasma - way too broken.. Same problem with the latest Peek version from the Ubuntu repos, but it got worse. Not only does my 16GB RAM machine freeze, but the animation isn't saved. I've wasted half an hour by now because I kept saving over the same filename, and kept seeing the old screencast.. I have the problem in #125 too, but if I record MP4s, saving is very fast, and there's no enormous RAM usage. Would it be possible to always record in MP4, and convert later that MP4 to GIF, if GIF was the selected output format? (If this is how Peek already works, apologies, but I don't see then why converting an arbitrary MP4 to GIF would crash machines.). ",
    "ibrahima": "If it helps, I'm able to record with Peek using Awesome WM (another tiling WM) and compton. However, I'm not able to click through the recording window to the windows underneath.\n. Neat! Pretty excited to see that this might work without hackery in Awesome in the near future.. I'm experiencing this with AwesomeWM+Compton, on 3.18.9-1ubuntu3.1 (Ubuntu 16.04, fully patched).\nMy suspicion is that the way tiling managers work and/or the interaction with Compton is preventing the clicks from going through to the background application. There might be particular window state/flags that makes it work for you; with Awesome, if I start recording, and then send the Peek window to the background, I can interact with the application that I want to record, but if it's supposed to actually click through to the application behind it then that might require specific support for tiling WMs. For Awesome, I tried to set up rules for the Peek application so that it is floating but not always on top, but I seem to have done something wrong, but if I manually send it to the background then I can interact while it's recording that part of the screen.. ",
    "KabbAmine": "Using i3 here with compton, and no problem so far using Peek.\nSome tips here:\n- Set Peek as a floated window\n- After starting the recording, select the recording zone using keyboard (There is no way to select it using the mouse)\n. ",
    "cars10": "I experience the same issue with awesome wm. Just black - nothing works.\n. ",
    "jruz": "i3 + compton here, works for recording but no way to get click through, resizes the window when I click.\nAny luck anyone?\n. ",
    "dmsmidt": "Using i3 + compton or xcompmgr, also no luck interacting with the window below my floating peek.\nNote: focus_follows_mouse no doesn't work.\n. @mephux a patch for i3 would be great.\nBut would be even better if it isn't tiling WM specific.\nI use: gtk3 3.22.4-1 and i3-wm 4.13-1.. @mephux thanks for your time, @phw a pitty we can't get this working. Could you mention the known limitations on the project page?. ",
    "erfanio": "I was having the same problem. (in i3)\nThe fix was running both peek and the window you want to record in floating mode (with peek resized to the area you want to record), hit record on peek and switch to the other floating window, do your thing, then switch back and stop.. ",
    "oliversturm": "I can confirm what @erfanio suggests. I'm running i3 without compton on three 4k screens and often have trouble due to excessive resolution :) Using the described method looks a bit odd, but works perfectly in my setup.. ",
    "Shnifty": "Hopefully this helps. I didn't search these errors yet:\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.ControlCenter.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.Boxes.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.Calculator.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.clocks'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.Contacts.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.Documents'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.Nautilus'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.Bijiben.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='org.gnome.seahorse.Application'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.Boxes.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.Calculator.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.ControlCenter.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.clocks'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.Nautilus'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.seahorse.Application'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.Contacts.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.Documents'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Successfully activated service 'org.gnome.Bijiben.SearchProvider'\nSep 02 14:33:51  /usr/libexec/gdm-x-session[1912]: Activating service name='com.uploadedlobster.peek'\nSep 02 14:33:52  /usr/libexec/gdm-x-session[1912]: Activated service 'com.uploadedlobster.peek' failed: Failed to execute program com.uploadedlobster.peek: No such file or directory\nSep 02 14:33:52  org.gnome.Bijiben.SearchProvider[1965]: Unable to load location /home/<user>/.local/share/bijiben: No such file or directory\nSep 02 14:33:52  org.gnome.Bijiben.SearchProvider[1965]: (bijiben-shell-search-provider:10900): GLib-GObject-CRITICAL **: g_object_unref: assertion 'G_IS_OBJECT (object)' failed\nSep 02 14:33:52  org.gnome.Bijiben.SearchProvider[1965]: (bijiben-shell-search-provider:10900): GLib-GObject-CRITICAL **: g_object_unref: assertion 'G_IS_OBJECT (object)' failed\nSep 02 14:33:52  org.gnome.Bijiben.SearchProvider[1965]: (bijiben-shell-search-provider:10900): GLib-GObject-CRITICAL **: g_object_unref: assertion 'G_IS_OBJECT (object)' failed\nSep 02 14:33:52  org.gnome.Bijiben.SearchProvider[1965]: sending the mass change\n. I tried to gather as much info as possible. Hopefully it helps.\n```\n$ sudo dnf list installed | grep ^gtk\ngtk+.x86_64                            1:1.2.10-81.fc23         @fedora       \ngtk-murrine-engine.x86_64              0.98.2-10.fc23           @updates      \ngtk-update-icon-cache.x86_64           3.18.9-1.fc23            @updates      \ngtk-vnc2.x86_64                        0.5.4-2.fc23             @koji-override-0\ngtk2.i686                              2.24.30-1.fc23           @updates      \ngtk2.x86_64                            2.24.30-1.fc23           @updates      \ngtk2-engines.x86_64                    2.20.2-10.fc23           @fedora       \ngtk3.x86_64                            3.18.9-1.fc23            @updates      \ngtk3-devel.x86_64                      3.18.9-1.fc23            @updates      \ngtkmm24.x86_64                         2.24.4-7.fc23            @koji-override-0\ngtkmm30.x86_64                         3.18.1-1.fc23            @updates      \ngtksourceview3.x86_64                  3.18.2-1.fc23            @updates      \ngtkspell.x86_64                        2.0.16-10.fc23           @fedora       \ngtkspell3.x86_64                       3.0.9-1.fc23             @updates        \n```\n```\n$ sudo dnf list installed | grep -i ^glib\nglib.x86_64                            1:1.2.10-46.fc23         @fedora       \nglib-networking.x86_64                 2.46.1-1.fc23            @koji-override-0\nglib2.i686                             2.46.2-2.fc23            @updates      \nglib2.x86_64                           2.46.2-2.fc23            @updates      \nglib2-devel.x86_64                     2.46.2-2.fc23            @updates      \nglibc.i686                             2.22-18.fc23             @updates      \nglibc.x86_64                           2.22-18.fc23             @updates      \nglibc-common.x86_64                    2.22-18.fc23             @updates      \nglibc-devel.x86_64                     2.22-18.fc23             @updates      \nglibc-headers.x86_64                   2.22-18.fc23             @updates      \nglibmm24.x86_64                        2.46.2-1.fc23            @updates \n```\n$ sudo dnf list installed | grep -i ^imagemagick\nImageMagick.x86_64                     6.9.2.7-1.fc23           @updates        \nImageMagick-c++.x86_64                 6.9.2.7-1.fc23           @updates        \nImageMagick-libs.x86_64                6.9.2.7-1.fc23           @updates\n$ sudo dnf list installed | grep -i ^ffmpeg\nffmpeg.x86_64                          2.8.7-1.fc23             @rpmfusion-free-updates-testing\nffmpeg-compat.x86_64                   0.6.7-9.fc23             @rpmfusion-free \nffmpeg-devel.x86_64                    2.8.7-1.fc23             @rpmfusion-free \nffmpeg-libs.x86_64                     2.8.7-1.fc23             @rpmfusion-free-updates-testing\n$ sudo dnf list installed | grep -i ^cmake\ncmake.x86_64                           3.4.3-1.fc23             @updates        \n$ sudo dnf list installed | grep -i ^vala\nvala.x86_64                            0.30.2-1.fc23            @updates        \n$ sudo dnf list installed | grep -i ^gettext\ngettext.x86_64                         0.19.8.1-1.fc23          @updates        \ngettext-common-devel.noarch            0.19.8.1-1.fc23          @updates        \ngettext-devel.x86_64                   0.19.8.1-1.fc23          @updates        \ngettext-libs.x86_64                    0.19.8.1-1.fc23          @updates\n$ sudo cmake . && make\n-- Found Vala: /usr/bin/valac (found version \"0.30.2\") \n-- Found Vala: /usr/bin/valac (found suitable version \"0.30.2\", minimum required is \"0.22\") \n-- GSettings schemas will be installed locally.\n-- GSettings shemas will be compiled.\n-- GSettings schemas will be installed into /usr/local/share/glib-2.0/schemas/\n-- Copying schema to build directory /home/shnifty/peek/data/schemas\n-- Building development schema in /home/shnifty/peek/data/schemas\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/shnifty/peek\n[ 93%] Built target peek\n/home/shnifty/peek/po/uk_UA.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-uk_UA-gmo\n/home/shnifty/peek/po/es.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-es-gmo\n/home/shnifty/peek/po/pl.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-pl-gmo\n/home/shnifty/peek/po/fr.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-fr-gmo\n/home/shnifty/peek/po/de.po: 31 translated messages.\n[ 93%] Built target generate-peek-de-gmo\n/home/shnifty/peek/po/pt_PT.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-pt_PT-gmo\n/home/shnifty/peek/po/lt.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-lt-gmo\n[ 93%] Built target update-gmo\n[100%] Built target build-desktop-file\n$ sudo make install\n[ 93%] Built target peek\n/home/shnifty/peek/po/uk_UA.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-uk_UA-gmo\n/home/shnifty/peek/po/es.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-es-gmo\n/home/shnifty/peek/po/pl.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-pl-gmo\n/home/shnifty/peek/po/fr.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-fr-gmo\n/home/shnifty/peek/po/de.po: 31 translated messages.\n[ 93%] Built target generate-peek-de-gmo\n/home/shnifty/peek/po/pt_PT.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-pt_PT-gmo\n/home/shnifty/peek/po/lt.po: 29 translated messages, 2 untranslated messages.\n[ 93%] Built target generate-peek-lt-gmo\n[ 93%] Built target update-gmo\n[100%] Built target build-desktop-file\nInstall the project...\n-- Install configuration: \"\"\n-- Up-to-date: /usr/local/bin/peek\n-- Up-to-date: /usr/local/share/glib-2.0/schemas/com.uploadedlobster.peek.gschema.xml\n-- Compiling GSettings schemas\n-- Up-to-date: /usr/local/share/applications/com.uploadedlobster.peek.desktop\n-- Up-to-date: /usr/local/share/icons/hicolor/16x16/apps/peek.png\n-- Up-to-date: /usr/local/share/icons/hicolor/24x24/apps/peek.png\n-- Up-to-date: /usr/local/share/icons/hicolor/32x32/apps/peek.png\n-- Up-to-date: /usr/local/share/icons/hicolor/48x48/apps/peek.png\n-- Up-to-date: /usr/local/share/icons/hicolor/256x256/apps/peek.png\n-- Up-to-date: /usr/local/share/icons/hicolor/512x512/apps/peek.png\n-- Up-to-date: /usr/local/share/dbus-1/services/com.uploadedlobster.peek.service\n-- Installing: /usr/local/share/locale/de/LC_MESSAGES/peek.mo\n-- Installing: /usr/local/share/locale/es/LC_MESSAGES/peek.mo\n-- Installing: /usr/local/share/locale/fr/LC_MESSAGES/peek.mo\n-- Installing: /usr/local/share/locale/lt/LC_MESSAGES/peek.mo\n-- Installing: /usr/local/share/locale/pl/LC_MESSAGES/peek.mo\n-- Installing: /usr/local/share/locale/pt_PT/LC_MESSAGES/peek.mo\n-- Installing: /usr/local/share/locale/uk_UA/LC_MESSAGES/peek.mo\n$ peek -v\nPeek 0.7.2\n. > So I've discovered that you need the following (maybe) on fedora 22:\n\nsudo dnf install gtk3-devel ffmpeg ffmpeg-libs imagemagick ImageMagick-devel glib gtk+\n\nI was only missing ImageMagick-devel so I installed it and ran the cmake/make but it did not fix anything, sorry. \n. Yes, CLI still works. The app menu still doesn't.\n. I have found the issue. I believe there is an issue with the .desktop files. I was able to get it working with a custom file but I'd like to identify what is wrong with the default files. I will post again shortly.\n. Okay, I've gotten the default build to work by modifying:\n/usr/local/share/applications/com.uploadedlobster.peek.desktop\nRemove this line:\nDBusActivatable=true\nThen restart Gnome:\n<alt>+<F2> r <Enter>\nUnfortunately I do not know what that setting is for but at least we know the source of the problem.\n. No problem.  Upon further digging, I've discovered that the dbus config file is pointing to /usr/bin/peek which should perhaps be /usr/local/bin/peek? I really don't know much about dbus so I don't know if changing it would break it for a different distro.\n$ cat dbus/com.uploadedlobster.peek.service \n[D-BUS Service]\nName=com.uploadedlobster.peek\nExec=/usr/bin/peek --gapplication-service\n. I confirmed that updating the Exec path in the dbus file also fixes the issue.\n. I pulled the changes and rebuilt and it works! Thanks!\n. ",
    "anavarre": "It'd be really nice to have a step-by-step installation procedure for Fedora users as well in the README.\n. @phw from where I sit this is really straight forward and works well. Thank you.\n```\n$ sudo add-apt-repository ppa:peek-developers/daily\n[sudo] password for anavarre: \n Daily builds for the Peek animated GIF recorder\n More info: https://launchpad.net/~peek-developers/+archive/ubuntu/daily\nPress [ENTER] to continue or ctrl-c to cancel adding it\ngpg: keyring /tmp/tmp_lh3fua0/secring.gpg' created\ngpg: keyring/tmp/tmp_lh3fua0/pubring.gpg' created\ngpg: requesting key 76BAFBC6 from hkp server keyserver.ubuntu.com\ngpg: /tmp/tmp_lh3fua0/trustdb.gpg: trustdb created\ngpg: key 76BAFBC6: public key \"Launchpad PPA for Peek Developers\" imported\ngpg: Total number processed: 1\ngpg:               imported: 1  (RSA: 1)\nOK\n$ sudo apt-get update\n(snipped)\nFetched 2,348 kB in 2s (990 kB/s)\nReading package lists... Done\n$ sudo apt-cache search ^peek\npeek - create animated GIF screencasts\n$ sudo apt-get install peek\nReading package lists... Done\nBuilding dependency tree     \nReading state information... Done\nThe following NEW packages will be installed:\n  peek\n0 upgraded, 1 newly installed, 0 to remove and 7 not upgraded.\nNeed to get 63.5 kB of archives.\nAfter this operation, 263 kB of additional disk space will be used.\nGet:1 http://ppa.launchpad.net/peek-developers/daily/ubuntu xenial/main amd64 peek amd64 0.8.0-0~ppa201702141228~ubuntu16.04.1 [63.5 kB]\nFetched 63.5 kB in 0s (260 kB/s)\nSelecting previously unselected package peek.\n(Reading database ... 270537 files and directories currently installed.)\nPreparing to unpack .../peek_0.8.0-0~ppa201702141228~ubuntu16.04.1_amd64.deb ...\nUnpacking peek (0.8.0-0~ppa201702141228~ubuntu16.04.1) ...\nProcessing triggers for bamfdaemon (0.5.3~bzr0+16.04.20160824-0ubuntu1) ...\nRebuilding /usr/share/applications/bamf-2.index...\nProcessing triggers for gnome-menus (3.13.3-6ubuntu3.1) ...\nProcessing triggers for desktop-file-utils (0.22-1ubuntu5) ...\nProcessing triggers for mime-support (3.59ubuntu1) ...\nProcessing triggers for libglib2.0-0:i386 (2.48.2-0ubuntu1) ...\nProcessing triggers for libglib2.0-0:amd64 (2.48.2-0ubuntu1) ...\nProcessing triggers for hicolor-icon-theme (0.15-0ubuntu1) ...\nSetting up peek (0.8.0-0~ppa201702141228~ubuntu16.04.1) ...\n```. Typical memory usage involves 2 Chrome sessions, Spotify, Telegram, Dropbox, a dropdown terminal and a few low-memory utils (Redshift, Albert, Autokey...)\n$ free -m\n              total        used        free      shared  buff/cache   available\nMem:          11707        5852        1908         614        3945        4131\nSwap:          1906         754        1152\nReading #112 again, I found:\n$ for i in memory disk; do grep \"<policy domain=\\\"resource\\\" name=\\\"$i\\\"\" /etc/ImageMagick-6/policy.xml ; done\n  <!-- <policy domain=\"resource\" name=\"memory\" value=\"2GiB\"/> -->\n  <!-- <policy domain=\"resource\" name=\"disk\" value=\"16EB\"/> -->\nAnd\n```\n$ convert -list resource\n  File       Area     Memory        Map       Disk   Thread  Throttle       Time\n\n768   24.552GB  11.433GiB  22.865GiB  unlimited        4         0  unlimited\n```. ",
    "airtonix": "@Shnifty @Bajoja care to share the exact dnf install package names for the dependancies?\n. So I've discovered that you need the following (maybe) on fedora 22:\nbash\nsudo dnf install gtk3-devel ffmpeg ffmpeg-libs imagemagick ImageMagick-devel glib gtk+\n. ",
    "heent": "By the way, if anyone wants to package it, here is the SPEC file.\n```\nName:           peek\nVersion:        0.7.2\nRelease:        1%{?dist}\nSummary:        An animated GIF recorder\nLicense:        GPLv3\nURL:            https://github.com/phw/peek\nSource0:        https://github.com/phw/peek/archive/v%{version}.tar.gz#/%{name}-%{version}.tar.gz\nBuildRequires:  cmake\nBuildRequires:  vala-devel\nBuildRequires:  gettext\nBuildRequires:  pkgconfig(gtk+-3.0) >= 3.14\nRequires:       ffmpeg\nRequires:       ImageMagick\n%description\nA simple tool that allows you to record short animated GIF images \nfrom your screen.\n%prep\n%autosetup\n%build\n%cmake -DBUILD_TESTS=OFF .\n%make_build\n%install\nrm -rf $RPM_BUILD_ROOT\n%make_install\n%find_lang %{name}\n%files -f %{name}.lang\n%license LICENSE\n%{_bindir}/%{name}\n%{_datadir}/applications/com.uploadedlobster.%{name}.desktop\n%{_datadir}/dbus-1/services/com.uploadedlobster.%{name}.service\n%{_datadir}/glib-2.0/schemas/com.uploadedlobster.%{name}.gschema.xml\n%{_datadir}/icons/hicolor/*/apps/%{name}.png\n%changelog\n* Sun Sep 04 2016 Roseanne Levert dinnae@yandex.com - 0.7.2-1\n- First package\n```\n. ",
    "matheusgeres": "Is it possible to verify if a new version has released? It's a good idea to see when something new is released and I think it's possible to run something like 'dpkg -i' to install it.\n. ",
    "Ads20000": "Could I suggest skipping the PPA stage and going straight to packaging with Snappy (with a probably out-of-date DEB in the official repositories for those who want it)? I think one of the points of Snappy is to end the necessity for people to have to add lots of PPAs to keep packages up-to-date more than the default repositories do. All you have to do is make a Snap and then upload it to the official store and voila, Ubuntu users (as well as Arch and Debian Unstable users, and Fedora, Gentoo and OpenSUSE users with the Snappy repository enabled) have up-to-date Peek. I don't think it's too hard to keep a Snap updated once it's made.\n. Great job @probonopd (I'm not a contributor here but well done for getting it done)! The more package formats the better (as long as they're fairly low maintenance, and formats like Snappy and AppImage I think usually are once you've got the initial implementation done), I do think that Snappy is better though because they automatically update.\nI had a look at trying to get Spotify Web Player for Linux (another FOSS application) bundled into a Snap but it might be more work than I thought to snap applications...great AppImage is so easy\n. @probonopd That's good but that doesn't look very automatic (it is decentralised, after all)? I quite like the Snappy system where although the default store is the Ubuntu one (which makes it quite centralised), it is possible to set up an alternative app store.\nOh, you are the creator/maintainer of AppImageKit, didn't realise! Well like I say, properly automatic updating I think is probably necessary if you want this to become the dominant format. Also the capability to use libraries that are already on the system or in other AppImages (only if they're the same version) to bring down file size? If they could be intelligent and use parts of libraries in other versions which are the same then that would be even cooler.\n. Yes I agree @phw that's probably Snappy's biggest problem, despite Ubuntu's efforts it's still, funnily enough, too Ubuntu-y.\n. Also I think the purpose of these new efforts was to try and make them easy enough universal packaging systems that the developers themselves could package and cut out the middleman, but I guess if you don't really have the time to package then that can't be helped.\n. @probonopd Is there any way to work around this with AppImage or is Peek a bit too integrated with the rest of the system for that to be possible (i.e. if you bundled your own GTK in the AppImage and/or I did in the Snap then it could work?)\nEdit: Yes you said you got this working on 2014+ distros?. @probonopd No I meant could Peek bundle a newer version of GTK (than 3.10) inside the AppImage to get it to work on older distros??. @phw you should probably inform the Wayland devs, maybe by filing a bug here?\nI'm sure they'd want you to be using Wayland rather than XWayland if possible, but definitely worth filing a bug so that it's on there somewhere even if they close it.. Yeah, though if it's a glitch there ideally we'd want to find out what the glitch is so they can fix it!. @phw Wow! Great that you're trying to support Flatpak, AppImage, and Snap!\nAnd if it's working in devmode could you upload your master branch as Snaps to an Edge channel on the Snappy store (there's probably a switch for this in Launchpad)? Then anyone could install it with sudo snap install --edge --devmode peek and it would stay automatically updated so we wouldn't need to redownload it every new build :). Yeah, making specific Snappy workarounds in your application sounds too demanding, sounds like the Snappy devs need to sort this out...\nUnless if they can't because their security standards don't allow them to @popey? Maybe Peek should then just use Classic confinement, but then would it be displayed in Ubuntu Software and also ideally we'd want Peek working on Ubuntu Next (all-Snappy, Unity8, and Mir)?. One more question @phw , does the Edge build publish the master branch or the released version? Because you can use Devmode in Beta builds too if I recall correctly, maybe you should release your stable version Snaps to Beta and have automated master branch Edge builds, until strict 100% works.\nBecause you can use a string for your version number, the version of the master branch builds can just be 'master'!\nMaybe perhaps you could then recommend the Snap command-line install instead of the PPA because everything is working and Snaps are less risky when it comes to dependencies and update silently.. Edit: Not sure about this, hold on\nUrgh, I've learnt that actually unconfined (or Edge? I'm guessing it's the fact it's unconfined but I could be wrong) Snaps don't automatically (and in the background) update as I claimed in a previous comment so sorry about that.\nSo for that to happen we need to fix the bugs preventing this app from being confined.. @phw @popey OK yes Niemeyer says that 'classic is today a viable alternative if people can't confine their snaps properly yet but want to do non-development releases.'\nUnfortunately we don't seem to be able to confine Peek properly, so we'll have to use classic for the time being, which is a shame, because it means that either our snapcrafting skills or snappy itself isn't good enough yet to confine apps like Peek properly.. @phw With using the gnome platform snap, you may find this thread helpful if you haven't seen it yet. The snap you want to connect to is gnome-3-26-1604 and snappy will auto-connect your snap to it so no extra commands needed from the user.. > Not happy with so many commands to be run :(\nYeah it's not good. The last one won't be necessary if we can get the 3.26 (16.04) content snap working, I know it means you'll need to make a forum account but could you comment in the actual thread and try and get an answer from jdstrand (a snappy dev, I think!?) and/or daniel (a much more experienced, technical, and successful snapcrafter than I am)? I think that'll be the fastest way to get help (they'll want it to be easy to use for other upstreams too) :)\nAs for the second command, I've filed a forum topic here, hopefully someone will answer :). @phw It's a universal package format so I think it makes sense next to Flatpak (when there's an AppImage ready, that should probably go near Snappy/Flatpak, above both if you prioritise decentralisation and below both if you prioritise ease-of-use and easier updates etc), and below Flatpak since the stable version isn't there yet and the Snap isn't finished.. Wait DON'T MERGE THIS, I might've misunderstood something. ",
    "mohamedsakhri": "What about this OBS Ubuntu repository? Who is maintaining it and is it \"official\"? I contacted Andrew from webupd8.org to provide and maintain a PPA for Peek. If this OBS isn't maintained anymore, Andrew could help.\n. It's up to you to decide. As I said, If you prefer a PPA, Andrew may help ;-)\n. Another related feature would be to automatically adjust the recording area to match a window. For example select a window per click and Peek picks it ;-)\nSome screencast programs who use ffmepg have this feature, like vokoscreen.\n. You are welcome :)\nAfter translating on Transfix I waited some days before making a pull request..\nBTW I'm not able to run peek in another language as English. Am I missing something? Other applications run just fine whit other env LANG locales, but peek doesn't.\n. Yes, it's installed in /usr/local/bin/peek. But this is the default behaviour. I didn't change anything in the compiling & installing steps.\n. It looks good now. Thanks :+1:\nA peek.desktop file isn't generated in /usr/share/applications/ though.\n. In my system the desktop file isn't generated at all. I tried to uninstall and than reinstall peek, but the same result. I'm using Linux Mint 18 XFCE.\nThe Arabic version looks good in my system. The RTL layout is used.\n\n. I followed the output of the build commands. The desktop file is generated, but in /usr/local/share/applications/com.uploadedlobster.peek.desktop. I expected it to be in /usr/share/applications, that's why I was looking there and haven't found it. \nBTW you may want to sync the translation from transifix. I changed some Arabic sentences to suite the context better.\n. I just noticed you mentioned the path of the desktop file in a previous message. I didn't pay attention to local in it. Sorry.\n. @phw I didn't want to open a new issue for this because it's just a thought that crosses my mind whenever I take a look at the commits.\nThought: \nThe synchronization of the translations with Github is great, no doubt about it. But when you take a look at the commits it's hard to follow the developpement of the App (I mean the real Code) because there are many translations' commits.\nWouldn't be better to create a repo only for the translations? I think you wouldn't have to change the project's structure, but only the git repos. Maybe a reop inside a repo.. . The Window's title should be \"Peek \u0639\u0646\u0652\". \"\u0639\u0646\u0652\" is \"about\" in Arabic, than followed by Peek, from right to left. As you can see in the screenshot, the order is flipped.\n. I'm using Linux Mint 18 with XFCE as DE, GTK 3.18. I also tested on Cinnamon. Same result.\nYou are right. It's a GTK issue. I've just tested another program who has a similar about window and it has the same issue.\n. I didn't know about weblate. Does it have a significant advantage compared to transifex? \n. Have you took a look at txgh? It's mentioned also in the official website: Github \u2013 Transifex Integration.\n. You are welcome. Glad to help :+1: \n\nOnly downside I see so far is that it probably does not support translations changed in source (git) to be synced back to transifex, only pot file changes.\n\nWhat do you mean exactly? Could you provide a use case as an example? \n. According to the documentation [How it works] this use case isn't supported. I think it's the right behaviour and it shouldn't be supported because the services should stay separated as they are defined for. Transifex to translate and git(hub) to handle files versions.\n. I've given Weblate a try. It has really good features to understand the context of each string, like source information (sometimes with screenshot) and the translation in other languages the translator can understand.\nThe interface is IMHO not so user friendly like Transifex. It must take some time to get used to it.\n@phw Out of topic: Did you to display the issues ordered by last issue first rather than last answer first or is it the default behaviour in Github? I've been active in some projects and they have \"last answer first\".\n. @nijel I'm no UX expert neither and I've only used Weblate for a short time till now. \nFor me I have the impressions that there is too much items/entries in the interfaces. It is nice to have many features but that can be disturbing and prevent the user from doing the main work they want to do: translating.\nSo my suggestion would be to define a few main goals/features and make them accessible to the user easily in a user friendly interface, simple and clean.\nIn the screenshot below you can see how \"messy\" the interface can get. In this case I think \"Translations\" is the most important part of the page and it should be in focus.\n\n. ",
    "khurshid-alam": "@phw \nI can build peek into my own PPA. But to do it properly you need to set it up properly on launchpad so that you don't have to maintain it. It will compile automatically when it detect new changes.\n1, First create a new project on launchpad named \"Peek\". Create a PPA (named \"peek-daily\") under the project.\n\n\nUnder project->code select import. Select target and source both as git. Give a name to the main branch (for example: trunk). Obviously owner should be yourself\n\n\n\n\n\nCreate a new repo \"Peek-Packaging\" at GitHub which must contain only the debian folder (you can copy from the OBS repo)\n\n\nImport the packaging repo in the same manner as the main repo. Give any name during the import like \"debian-packaging\"\n\n\nGo to Project (i.e peek)-> code-> view git repositories. Click on lp:~USERNAME/kee/+git/trunk. Then click on create a packaging recipe.\n\n\nGive a recipe name. Select your own PPA & check distribution series. (zesty, xenial...etc)\n\n\nNow the recipe contents. It should look like this:\n\n\n```\ngit-build-recipe format 0.4 deb-version {debupstream}+{time}\nlp:~USERNAME/keep/+git/trunk master\nnest-part packaging lp:~USERNAME/keep/+git/debian-packaging debian debian master\n```\n\n\nSave it and click on \"Request Build\". It will start building your code! For errors check the build-logs. Don't get confused with the name \"build-daily\". It only builds  when it detects any changes in the main or the packaging repo.\n\n\nDONE!\n\n\nIt will only import master branch. You can use use separate branch for releases. During recipe creation you can use that particular branch instead of trunk.\n. @phw Working wonderfully well. Thanks.. @fbruetting Distro doesn't choose which one is default. It's the application that depends on it forces distro to ship it by default. Also it doesn't matter which one is the future. As of now, libav hasn't deprecated and Ubuntu and all other Ubuntu based distros (Elementary, Mint etc) use it as default. If peek can work with libav there is no need to pull another dependency. And about encoder....libav works just fine with AV1.. @fbruetting \n\nDepending on libav would pull a (superfluous) dependency for us.\n\nYou misunderstood. See @phw comment. It will depend either on ffmpeg OR libav whichever available.. @phw \nI think you need to change dependency under debian/control. Assuming avconv is your run time dependency it should be\ndiff\nPackage: peek\nArchitecture: any\nDepends: ${misc:Depends},\n ${shlibs:Depends},\n- ffmpeg,\n+ libav-tools | ffmpeg,\n+ libavcodec57,\n imagemagick\nDescription: create animated GIF screencasts\n. It is reproducible when I use a app launcher like Kupfer during recording.If I save it before it finish rendering most times I get a 0-byte gif. But there is no way no know as rendering doesn't show any progress. (webm is fine though)\n\n(peek:4878): GLib-GIO-CRITICAL **: g_file_new_for_path: assertion 'path != NULL' failed\n(peek:4878): GLib-GIO-CRITICAL **: g_file_get_path: assertion 'G_IS_FILE (file)' failed\nconvert-im6.q16: missing an image filename `Optimize' @ error/convert.c/ConvertImageCommand/3255.\nlibavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\n[x11grab @ 0x80262760] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+73,109':\n  Duration: N/A, start: 1487909210.900420, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1188x624, 12 fps, 1000k tbr, 1000k tbn, 1000k tbc\nNo pixel format specified, bgr0 for H.264 encoding chosen.\nUse -pix_fmt yuv420p for compatibility with outdated media players.\n[libx264rgb @ 0x8026ad40] using cpu capabilities: MMX2 SSE2Fast SSSE3 Cache64 SlowShuffle\n[libx264rgb @ 0x8026ad40] profile High 4:4:4 Predictive, level 2.1, 4:4:4 8-bit\nOutput #0, avi, to '/tmp/peekHKPRVY.avi':\n  Metadata:\n    ISFT            : Lavf57.56.101\n    Stream #0:0: Video: h264 (libx264rgb) (H264 / 0x34363248), bgr0, 594x312, q=-1--1, 12 fps, 12 tbn, 12 tbc\n    Metadata:\n      encoder         : Lavc57.64.101 libx264rgb\n    Side data:\n      cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: -1\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> h264 (libx264rgb))\nPress [q] to stop, [?] for help\nPast duration 0.606987 too large     467kB time=00:00:03.58 bitrate=1068.1kbits/s speed=0.976x  \nPast duration 0.856224 too large\nPast duration 0.757011 too large     686kB time=00:00:05.83 bitrate= 964.0kbits/s speed=0.998x  \nPast duration 0.639381 too large\nPast duration 0.873650 too large\nPast duration 0.767296 too large     867kB time=00:00:06.91 bitrate=1027.4kbits/s speed=0.999x  \nPast duration 0.969414 too large     944kB time=00:00:07.41 bitrate=1042.1kbits/s speed=0.992x  \nPast duration 0.999413 too large    1065kB time=00:00:11.16 bitrate= 780.9kbits/s speed=   1x   \nPast duration 0.984886 too large    1072kB time=00:00:11.75 bitrate= 747.4kbits/s speed=   1x  \nPast duration 0.953453 too large\nPast duration 0.706902 too large\nPast duration 0.992531 too large\nPast duration 0.797188 too large    1206kB time=00:00:15.08 bitrate= 655.2kbits/s speed=   1x   \nPast duration 0.634377 too large\nframe=  188 fps= 12 q=-1.0 Lsize=    1246kB time=00:00:15.75 bitrate= 648.0kbits/s speed=1.01x  \nvideo:1236kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.815629%\n[libx264rgb @ 0x8026ad40] frame I:1     Avg QP:20.00  size:177793\n[libx264rgb @ 0x8026ad40] frame P:187   Avg QP:12.58  size:  5817\n[libx264rgb @ 0x8026ad40] mb I  I16..4: 100.0%  0.0%  0.0%\n[libx264rgb @ 0x8026ad40] mb P  I16..4:  2.1%  0.0%  0.0%  P16..4: 17.4%  0.0%  0.0%  0.0%  0.0%    skip:80.5%\n[libx264rgb @ 0x8026ad40] coded y,u,v intra: 34.7% 36.1% 35.7% inter: 6.9% 6.9% 6.9%\n[libx264rgb @ 0x8026ad40] i16 v,h,dc,p: 65% 29%  4%  2%\n[libx264rgb @ 0x8026ad40] kb/s:642.81\n. \n\ndpkg -s peek\nPackage: peek\nStatus: install ok installed\nPriority: optional\nSection: video\nInstalled-Size: 386\nMaintainer: Philipp Wolfer ph.wolfer@gmail.com\nArchitecture: i386\nVersion: 0.9.1-0+git301~ppa7~ubuntu17.04.1\nDepends: dconf-gsettings-backend | gsettings-backend, libc6 (>= 2.4), libcairo2 (>= 1.10.0), libglib2.0-0 (>= 2.41.4), libgtk-3-0 (>= 3.14), libkeybinder-3.0-0 (>= 0.3.0), ffmpeg | libav-tools, imagemagick\nDescription: create animated GIF screencasts\n Peek creates animated GIF screencasts using ffmpeg and imagemagick. It was\n built for the specific use case of recording screen areas, e.g., for easily\n showing UI features of your own apps or for showing a bug in bug reports. It is\n not a general purpose screencast app with extended features and it never\n will be.\n. libav-tools started depending on ffmpeg. It uses ffmpeg for conversion. But regardless, the situation is same with or without avconv. \nHowever webm works out of the box.. ",
    "atomfrede": "@oleerik @phw Thanks, will try it out!\n. Removing check from the PKBUILD works just fine! Thanks for the hint @oleerik \n. ",
    "kribblo": "I'd much rather have it in the interface or something, maybe \"Open last\" next to \"Record\" when a last is existing, could also show progress there.\nBut either way, maybe the icon could not be an angry red error one, I was certain something had gone horribly wrong. :) Blue \"i\" for information maybe or a thumbs up?. ",
    "orschiro": "I also vote for an option in the preferences to disable notifications and prevent them from cluttering the notification tray \u2013 in my case Cinnamon. \n\n. @phw great addition! Is the 1.2.2 version already available via Flatpak?\nCannot install using flatpak install --user https://flathub.org/repo/appstream/com.uploadedlobster.peek.flatpakref\n\n. That worked excellently. Thanks!\nThe new feature works perfectly. Finally no notifications. :-)\n. Is there a technical limitation to recording full-screen? \nCan't we put the application into full-screen mode with F11 like many other applications?. I found the problem! \n[x11grab @ 0x5591d90c3d20] Capture area 390x613 at position 1079.120 outside the screen size 1366x768\n:0+1079,120: Invalid argument\nError: Child process exited with code 1\nRecording stopped unexpectedly with return code 256\nTwo ideas:\n\nCan Peek record despite being outside the screen?\nCan we easily prevent Peek from going outside the screen?. Thank you so much for this fix!\n\nI cannot wait to receive it on my Ubuntu 16.10 and test it. :-)\nOn Tue, Feb 21, 2017 at 6:11 PM Philipp Wolfer notifications@github.com\nwrote:\n\nI have committed a fix for this. The new behavior will clip the recording\narea if Peek is partially outside the screen. That way you record exactly\nwhat you see.\nThis probably works best with a single monitor or multiple monitors of\nequal resolution that form a nice rectangular area. On my setup with a\nlarge and a small monitor I can still get some weird cases of recorded\nnoise or no recording at all when placing peek on the edges, but this gets\narbitrarily complex and I will leave it as is for now.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/64#issuecomment-281410155, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAKbw5Z0Doa4dSRXOk8XmP3x3Mc93WP7ks5rexrBgaJpZM4Lh_m1\n.\n. Wow, I really appreciate your efforts!\n\nAnd I guess I am not the only Ubuntu user who will like that. :-)\n-R. This is fantastic, thank you so much @phw! . Any ideas what is causing this behaviour on Ubuntu 16.10 Unity?. Thank you, Philipp!\nLet me know if I can provide you with any further information.\nOn Mon, Feb 20, 2017 at 4:32 PM Philipp Wolfer notifications@github.com\nwrote:\n\nI an reproduce on Ubuntu 16.04 with Unity. Had not the time to do any\nserious debugging yet, and also not sure what causes it so far :( Will keep\nyou updated.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/74#issuecomment-281109017, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAKbwxirrWm5xJj219ud26jNb3UBOOVoks5rebH5gaJpZM4L06wc\n.\n. Maybe it has something to do with Unity's topbar?\n\nOn Thu, Feb 23, 2017 at 3:27 PM Philipp Wolfer notifications@github.com\nwrote:\n\nI have a suspicion: Once the recording starts I try to freeze the window\nsize, so you cannot accidentally resize your window. I suspect this goes\nwrong in the full screen case on Unity. Have to check whether I can detect\nthis and workaround it.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/74#issuecomment-282004957, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAKbw0DNOeXK069SCi9AsGPndqFrGpWyks5rfZdIgaJpZM4L06wc\n.\n. Wow, great!\n\nThis one?\nsudo add-apt-repository ppa:peek-developers/daily\nOn Fri, Feb 24, 2017 at 9:37 AM Philipp Wolfer notifications@github.com\nwrote:\n\nI think I found a fix for this, at least I cannot reproduce it anymore.\nWould be great if you could test with the daily PPA\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/74#issuecomment-282235397, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAKbw9JnAHibE1oPkLtDspUaPoNWUmb0ks5rfpbAgaJpZM4L06wc\n.\n. Great, it seems to work with the new version. \n\nThank you so much! :-). I am on Ubuntu MATE:\norschiro@x230:~$ convert -list resource\nResource limits:\n  Width: 16KP\n  Height: 16KP\n  Area: 128MP\n  Memory: 256MiB\n  Map: 512MiB\n  Disk: 1GiB\n  File: 768\n  Thread: 4\n  Throttle: 0\n  Time: unlimited\nFrequently, Peek fails to write the actual result to the file saying it is a caching issue. Short recordings normally work fine. Long ones fail all the time.. @dustinmoorenet what was the exact workaround for you? Did you change the value 1GiB to something else?. Thanks for your hard work, Philipp!\n. Happy to test! Can I install this version from the ppa or Deb file?\nEl 12/10/2017 12:58, \"Philipp Wolfer\" notifications@github.com escribi\u00f3:\n\nReopened #125 https://github.com/phw/peek/issues/125.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/125#event-1289993520, or mute the\nthread\nhttps://github.com/notifications/unsubscribe-auth/AAKbw6ma4Y3SjDDB3fhHC_3pxgo2DDoLks5srfC_gaJpZM4MsAtG\n.\n. Impressive! Although there seems to be a quality decrease, right?\n\nIn any case, performance and stability is great. :-)\n\n. Let's wait for more people to give feedback then \u263a\n. Hmm... 1.2.1 should already use it, right @phw?. @phw, thank you!\nDoes this information maybe help you?\n\n. Thank you, @phw!\nI just received Peek 1.0.1.\nHowever, the button is still to the right instead of left.. Yes, it is the correct package:\norschiro@x230:~$ sudo dpkg -i Desktop/peek_1.0.1-0+git509-ppa11-ubuntu17.04.1_amd64.deb \n[sudo] password for orschiro: \n(Reading database ... 456889 files and directories currently installed.)\nPreparing to unpack .../peek_1.0.1-0+git509-ppa11-ubuntu17.04.1_amd64.deb ...\nUnpacking peek (1.0.1-0+git509~ppa11~ubuntu17.04.1) over (1.0.1-0+git509~ppa11~ubuntu17.04.1) ...\nSetting up peek (1.0.1-0+git509~ppa11~ubuntu17.04.1) ...\nProcessing triggers for bamfdaemon (0.5.3+17.04.20170406-0ubuntu1) ...\nRebuilding /usr/share/applications/bamf-2.index...\nProcessing triggers for gnome-menus (3.13.3-6ubuntu5) ...\nProcessing triggers for desktop-file-utils (0.23-1ubuntu2) ...\nProcessing triggers for mime-support (3.60ubuntu1) ...\nProcessing triggers for libglib2.0-0:i386 (2.52.0-1) ...\nProcessing triggers for libglib2.0-0:amd64 (2.52.0-1) ...\nProcessing triggers for hicolor-icon-theme (0.15-1) .... ```\norschiro@x230:~$ G_MESSAGES_DEBUG=all peek\n(peek:7747): Gtk-DEBUG: Connecting to session manager\n (peek:7747): DEBUG: desktop-integration.vala:160: Desktop: MATE\n (peek:7747): DEBUG: application.vala:301: Decoration layout: close,minimize,maximize:menu\n (peek:7747): DEBUG: desktop-integration.vala:160: Desktop: MATE\n (peek:7747): DEBUG: application.vala:41: Loading local settings failed: Failed to open file \u201c./data/gschemas.compiled\u201d: open() failed: No such file or directory\n** (peek:7747): DEBUG: application.vala:194: Changed keybinding_toggle_recording  => R\n (peek:7747): DEBUG: desktop-integration.vala:160: Desktop: MATE\n (peek:7747): DEBUG: utils.vala:68: Looking for executable ffmpeg (0): /usr/bin/ffmpeg\nUsing screen recorder backend ffmpeg\n (peek:7747): DEBUG: desktop-integration.vala:160: Desktop: MATE\n (peek:7747): DEBUG: recording-area.vala:38: Absolute recording area x: 111, y: 93, w: 295, h: 556\n (peek:7747): DEBUG: recording-area.vala:45: Screen w: 1366, h: 768\n (peek:7747): DEBUG: recording-area.vala:58: Clipped recording area x: 111, y: 93, w: 295, h: 556\n (peek:7747): DEBUG: recording-area.vala:69: Scaled recording area x: 111, y: 93, w: 295, h: 556\n (peek:7747): DEBUG: recording-area.vala:38: Absolute recording area x: 111, y: 93, w: 295, h: 556\n (peek:7747): DEBUG: recording-area.vala:45: Screen w: 1366, h: 768\n (peek:7747): DEBUG: recording-area.vala:58: Clipped recording area x: 111, y: 93, w: 295, h: 556\n** (peek:7747): DEBUG: recording-area.vala:69: Scaled recording area x: 111, y: 93, w: 295, h: 556\n``.511` is working. Cool!\nThank you so much! :-)\n\n. Neither did I install Flatpak nor a Snap version.\nI am using the latest dev version from the PPA on Ubuntu 17.04 MATE.\nStrange...\nI will do some more investigating and get back!. Thanks!\nI will close this as probably user error.. Thanks for your comment despite being a duplicate. \nI should have searched better.\nYes, I am on Ubuntu MATE at the moment. \nI look forward to addressing this problem! :-). It got fixed. Thank you! :-). @peteruithoven thanks! I will watch the other issue and if a solution or workaround emerges, create the FAQ item. \nFor now, I am using the .webm file format, especially for larger recordings. But I am not sure if that's a proper response to the FAQ question because it doesn't use the .gif format.\nWhat do you think?. So let's wait until we have more information on this. Thanks for keeping this up!. Thanks for your prompt feedback!\nI can only help by sharing the following links with you:\n\nhttps://launchpad.net/nonotifs\nhttps://ubuntu-mate.community/t/disable-notifications/8028\n\nHope that helps!\nOn 08/10/2017 05:20 PM, Philipp Wolfer wrote:\n\nThat sounds like a very useful idea. I just don't know whether this can \nbe done and if so how. Probably also desktop related. Will need some \nresearch, if you know anything about this let me know.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub \nhttps://github.com/phw/peek/issues/173#issuecomment-321583845, or mute \nthe thread \nhttps://github.com/notifications/unsubscribe-auth/AAKbw0dGsWwYo2MJ2nvwyJz7HPIgeJJ2ks5sWx_RgaJpZM4OzhpD.\n. I see what you're saying. The call for a desktop agnostic solution...\n\nWell, thanks! Maybe someone will come up with this in the future.. I see what you're saying. The call for a desktop agnostic solution...\nWell, thanks! Maybe someone will come up with this in the future.. > I am also no opposed to have some kind of quick switching, e.g. by having an arrow dropdown behind the button :)\nOoh, this sounds excitingly good! :-). @gort818 this looks perfect! How can I test? :-). Sounds good. Thanks, Alessandro!\n. @gort818 followed the compile from source instructions [1].\nBut [2] produces an error:\n```\norschiro@x230:/tmp/peek/build$ cmake -DCMAKE_INSTALL_PREFIX=/usr/local ..\n-- Could NOT find Vala (missing: VALA_EXECUTABLE) \nCMake Error at /usr/share/cmake-3.9/Modules/FindPackageHandleStandardArgs.cmake:137 (message):\n  Could NOT find Vala (missing: VALA_EXECUTABLE) (Required is at least\n  version \"0.22\")\nCall Stack (most recent call first):\n  /usr/share/cmake-3.9/Modules/FindPackageHandleStandardArgs.cmake:377 (_FPHSA_FAILURE_MESSAGE)\n  cmake/FindVala.cmake:65 (find_package_handle_standard_args)\n  CMakeLists.txt:27 (find_package)\n-- Configuring incomplete, errors occurred!\nSee also \"/tmp/peek/build/CMakeFiles/CMakeOutput.log\".\n```\nCan you help?\n[1] https://github.com/gort818/peek/tree/format-popover#from-source\n[2] cmake -DCMAKE_INSTALL_PREFIX=/usr/local ... Thanks! It finished building peek but if I run it [1], I don't get to see your dropdown menu. \norschiro@x230:/tmp/peek/build$ ls -la\ntotal 672\ndrwxr-xr-x  9 orschiro orschiro   4096 Okt 22 09:57 .\ndrwxr-xr-x 12 orschiro orschiro   4096 Okt 22 09:57 ..\n-rw-r--r--  1 orschiro orschiro  39387 Okt 22 09:57 application.h\n-rw-r--r--  1 orschiro orschiro  45297 Okt 22 09:57 application_internal.h\n-rw-r--r--  1 orschiro orschiro  38235 Okt 22 09:57 CMakeCache.txt\ndrwxr-xr-x 36 orschiro orschiro   4096 Okt 22 09:57 CMakeFiles\n-rw-r--r--  1 orschiro orschiro   2264 Okt 22 09:57 cmake_install.cmake\n-rw-r--r--  1 orschiro orschiro   1196 Okt 22 09:57 cmake_uninstall.cmake\n-rw-r--r--  1 orschiro orschiro   3592 Okt 22 09:57 CPackConfig.cmake\n-rw-r--r--  1 orschiro orschiro   4026 Okt 22 09:57 CPackSourceConfig.cmake\n-rw-r--r--  1 orschiro orschiro    284 Okt 22 09:57 CTestTestfile.cmake\n-rw-r--r--  1 orschiro orschiro   2603 Okt 22 09:57 DartConfiguration.tcl\ndrwxr-xr-x  5 orschiro orschiro   4096 Okt 22 09:57 data\n-rw-r--r--  1 orschiro orschiro  78498 Okt 22 09:57 Makefile\n-rwxr-xr-x  1 orschiro orschiro 410800 Okt 22 09:57 peek\ndrwxr-xr-x  3 orschiro orschiro   4096 Okt 22 09:57 po\ndrwxr-xr-x  6 orschiro orschiro   4096 Okt 22 09:57 src\ndrwxr-xr-x  3 orschiro orschiro   4096 Okt 22 09:57 Testing\ndrwxr-xr-x  3 orschiro orschiro   4096 Okt 22 09:57 tests\ndrwxr-xr-x  2 orschiro orschiro   4096 Okt 22 09:57 ui\n[1] orschiro@x230:/tmp/peek/build$ ./peek. Hang on. I think I didn't check out the right branch...\nLet me try again!. @gort818 here is my feedback [1]. :-)\n[1] https://www.useloom.com/share/ea24a461c6bf4eda887e1b2dd598bd91. @gort818 great! Here [1] are two more feedbacks. :-)\n[1] https://www.useloom.com/share/0a980874fbb143439efd18f4d3aa1072. @gort818 feedback time! :-)\nhttps://www.useloom.com/share/e92b8fa19ecb4a04a97efeb6285f8a35. @gort818 just tried it and it looks and feels great! No further remarks from my side. \nThanks for your work!. @gort818 you're welcome! I am very glad I could help and test. :-). @gort818 fantastic! Thank you all for your work. I guess we can close this? :-). @phw I will definitely give it a try! :-). OK, thanks for your reply, anyway!\nFor these situations I will use a different tool like simple screen recorder.. Thanks! I guess it's better to first have it in Debian and then let it flow down to Ubuntu. :-). Understood. Thanks! :-). Haha, nice. Thanks for sharing that although I am not an i3 user. :-). Hey @phw \nThanks for your explanation!\n\nBut if you don't like this behavior you can change it with dconf:\n\nWorks! :-)\n\nCan you give me the output of\n\nIt's empty...\n[orschiro@localhost ~]$ dconf read /org/gnome/desktop/wm/preferences/button-layout\n[orschiro@localhost ~]$\n\nAnd also please run Peek with:\n\n[orschiro@localhost ~]$ G_MESSAGES_DEBUG=all flatpak run com.uploadedlobster.peek\n** (peek:2): DEBUG: desktop-integration.vala:168: Desktop: GNOME\n** (peek:2): DEBUG: application.vala:286: GTK theme: Adwaita\n** (peek:2): DEBUG: desktop-integration.vala:168: Desktop: GNOME\n** (peek:2): DEBUG: application.vala:341: Decoration layout: close:menu,maximize\n** (peek:2): DEBUG: desktop-integration.vala:168: Desktop: GNOME\n** (peek:2): DEBUG: application.vala:42: Loading local settings failed: Failed to open file \u201c./data/gschemas.compiled\u201d: open() failed: No such file or directory\n** (peek:2): DEBUG: application.vala:221: Changed keybinding_toggle_recording  => <Ctrl><Alt>R\n** (peek:2): DEBUG: desktop-integration.vala:168: Desktop: GNOME\nUsing screen recorder backend gnome-shell\n** (peek:2): DEBUG: application-window.vala:818: Decoration layout: close:menu,maximize\nHmm. So mine is different.\n\nWhat OS is this, Fedora or Ubuntu? Do you have other desktop environments installed that could interfere here?\n\nCurrently with default Fedora 27. But I used the same home folder with LM 18.3 Cinnamon and eOS Loki in the past. Maybe that's why?\n. > but I don't know from where. I will try to find out.\nAwesome, thanks! Let me know if I can help somehow.... Here we go:\n[orschiro@localhost ~]$ dconf read /org/gnome/shell/extensions/classic-overrides/button-layout\n[orschiro@localhost ~]$\nEmpty....not using the classic mode.\nConfig files:\n[orschiro@localhost ~]$ cat $HOME/.config/gtk-3.0/settings.ini\n[Settings]\ngtk-font-name=Noto Sans 10\ngtk-theme-name=Breeze\ngtk-icon-theme-name=breeze\ngtk-fallback-icon-theme=gnome\ngtk-toolbar-style=GTK_TOOLBAR_ICONS\ngtk-menu-images=1\ngtk-button-images=1\n[orschiro@localhost ~]$ cat /etc/gtk-3.0/settings.ini\ncat: /etc/gtk-3.0/settings.ini: No such file or directory\n\nSomehwere this is set to close:menu,maximize for you, if you find the location you could either remove (and use the default) it or change it to something like menu:maximize,close.\n\nHmm ok. Let's see if I can find it..\n. @phw could you merge this one, please?\nThank you!. @phw you're much welcome, thanks for the merge! :-). ",
    "kropp": "@phw yes, the border is bit off and I can see it (at least in Unity on Ubuntu 16.04). I was going to debug this next.\n. ",
    "Deevad": "Ctrl+Alt+R sounds good here. Thank you for the new feature!. ",
    "leoherzog": "Holy cow! You're quick :) \n. ",
    "lots0logs": "I also experienced this. I'm using Arch. The severity of the issue depends on how much RAM is available on your system, the length of your recording, and how much activity you are recording (meaning how much of the screen has to be redrawn from one frame to the next because it changed). I have a memory monitor widget in my task bar and I can see that it quickly fills up all available memory for recordings longer than 15-20 seconds. The kernel then tries to flush whatever it can to swap but that doesnt prevent the system from stalling for a couple seconds. I think for a lower-end system it would stall for a lot longer (I have a core i7 with 12MB RAM). What sucks about the issue is that 2 out of 3 times you end up losing your recording because when the system stops lagging the file it saves is empty (0 bytes). \n. @lolilolicon Yeah I can't believe I didn't realize that from the start! \n\n. @vangourd I started working on this in #37 but havent had time to finish it yet :grimacing: . I've found that it works if you do this:\nexport TMPDIR=/var/tmp\nTMPDIR=/var/tmp peek. ",
    "vangourd": "I'm on Elementary OS Loki with it's Ubuntu 16.04 base on an Intel NUC6I3SYK. \nPeek actually locks up my system so badly I have to reboot (Cannot restart Xserver CTRL-ALT-BACKSPACE, cannot change to a terminal (CTRL + F1). I have to manage my memory well as this system doesn't have an abundance of it but I would love to see some better limits on how Peek uses resources. I'm assuming that's what is causing this problem for me. \nI can't seem to find any relevant logs on the issue in my journal, or in my Xserver logs. I attempted your TMP directory change recommendation but it opened Peek and I was unable to record anything after the fact. I'm assuming that might be a permissions problem so I will attempt to troubleshoot that later but I wanted to get a comment written as this software is pretty important to me building docs. \nLet me know if I can provide any more useful debugging info. . ",
    "C0rn3j": "\nand I cannot move the recording area dynamically there.\n\nFor me this isn't as much of an issue as the recording abruptly stopping. \nI wouldn't mind not having an option to move the window (although it'd be preferred), but the fact that a small slip-up(moving the tab instead of pressing stop) can ruin all the work I put into recording does bother me greatly.. How about a different approach - is there a way to disable window moving while the recording is going on? \nAs in the only thing you could interact with would be the stop button.. @phw \nPlease do a release with this bugfix, it took me a while to figure out why I can't take any video ^^. I did indeed have issues on the stable version, using devel version made it work.\nGood to hear a release is gonna come soon.. ",
    "douglasg14b": "Would very much like to see this.. ",
    "dAnjou": "What for? The vast majority of desktop machines - this tool's only target area - are running 64bit distros. I wouldn't spend time on this if I were you.. ",
    "pepa65": "I need a slight delay before it pops up, sometimes it gets captured at the end.. Just what's current on Github's master branch, 0.9.1 is says. I'm running Ubuntu MATE 16.04.. It does output that when you start Peek from the commandline. It's either ffmpeg or avconv. I have both, and it seems to prefer ffmpeg, so: Using screen recorder backend ffmpeg. Sounds great, happy to have a real improvement, so far so good, it compiles and works!. For this one need, I would set it to the desired dimension (width=600 in my case), I would not care if it is upsampled or downsampled. I imagine in the preference dialog, there are 2 more boxes that can be filled in. When width is set to a certain value, then height and the downsample factor (no longer an integer...) are set accordingly (to the current size of the sample window -- when the window gets resized, the width/eight/resample-factor that was last filled in by the user stays the same, the other values get adjusted according to the new size of the sample window). Probably get rid of the +/- button on the downsampling entry, and allow for a greater range. It would be very cool and useful!. ",
    "srichakradhar": "@phw I guess now we have a keyboard shortcut for this.. Ctrl + Alt + R. ",
    "pharaone": "With Mir there is way for recording the screen, can you support mir?\n. maybe whit mir screencast, with it you can record videos of the screen\n2017-02-21 18:23 GMT+01:00 Philipp Wolfer notifications@github.com:\n\nDoes anybody here now how and if Mir handles screenshots? Is it possible\nto plug into this somehow, e.g. by a DBus service or something?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/39#issuecomment-281413746, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AQXhhj28_YgvBws-i0_h3d6LvAHfYCFwks5rex2IgaJpZM4Kjouc\n.\n. *with\n\n2017-02-21 18:44 GMT+01:00 Emanuele Antonio Faraone <emanueleant03@gmail.com\n\n:\nmaybe whit mir screencast, with it you can record videos of the screen\n2017-02-21 18:23 GMT+01:00 Philipp Wolfer notifications@github.com:\n\nDoes anybody here now how and if Mir handles screenshots? Is it possible\nto plug into this somehow, e.g. by a DBus service or something?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/39#issuecomment-281413746, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AQXhhj28_YgvBws-i0_h3d6LvAHfYCFwks5rex2IgaJpZM4Kjouc\n.\n\n\n. Thanks @gerboland . Thanks!\n\nIl 13 ott 2017 10:19 AM, \"Philipp Wolfer\" notifications@github.com ha\nscritto:\n\nJust in case you didn't know, you can also translate online at\nhttps://hosted.weblate.org/projects/peek/translations/it/ . Changes there\nwill directly get written back to the github repository.\nBut if you prefer working offline and open pull requests here that's also\nfine, it works in both directions :)\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/pull/192#issuecomment-336384044, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AQXhhpkZp007em_uHE-CFFAzPcmGtK6Bks5srxz-gaJpZM4P39qT\n.\n. Fixed, sorry for before. Now it works! . Prego!\n\nIl 13 ott 2017 5:28 PM, \"Philipp Wolfer\" notifications@github.com ha\nscritto:\n\ngrazie mille\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/pull/193#issuecomment-336485934, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AQXhhqZVjFfrILLV-3rXsewPo5PUZSU_ks5sr4GngaJpZM4P4c3D\n.\n. Yes, I don't know why are marked as fuzzy\n\nIl 14 ott 2017 6:31 PM, emanueleant03@gmail.com ha scritto:\nYes, I don't know why they are\nIl 14 ott 2017 6:30 PM, \"Philipp Wolfer\" notifications@github.com ha\nscritto:\n@pharaone https://github.com/pharaone There are a couple of strings\nmarked as \"fuzzy\" / needing review, see https://hosted.weblate.org/\ntranslate/peek/translations/it/?type=fuzzy\nAre those ok?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/pull/193#issuecomment-336646672, or mute the\nthread\nhttps://github.com/notifications/unsubscribe-auth/AQXhhtM1cfZIJgc6Bsv0tzsFIb8j9I8_ks5ssOGPgaJpZM4P4c3D\n.\n. ",
    "Nevax07": "Here it is my log, maybe it will be helpful.\nnov. 02 07:28:03 arch-obelix dbus-daemon[815]: Activating service name='com.uploadedlobster.peek'\nnov. 02 07:28:03 arch-obelix dbus-daemon[815]: Successfully activated service 'com.uploadedlobster.peek'\nnov. 02 07:28:03 arch-obelix dleyna-renderer-service[3027]: dLeyna: Exit\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: ffmpeg version 3.2 Copyright (c) 2000-2016 the FFmpeg developers\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   built with gcc 6.2.1 (GCC) 20160830\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libavutil      55. 34.100 / 55. 34.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libavcodec     57. 64.100 / 57. 64.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libavformat    57. 56.100 / 57. 56.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libavdevice    57.  1.100 / 57.  1.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libavfilter     6. 65.100 /  6. 65.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libavresample   3.  1.  0 /  3.  1.  0\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libswscale      4.  2.100 /  4.  2.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libswresample   2.  3.100 /  2.  3.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   libpostproc    54.  1.100 / 54.  1.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: [x11grab @ 0x55e0b1c15b00] Stream #0: not enough frames to estimate rate; consider increasing probesize\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: Input #0, x11grab, from ':0+29,64':\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   Duration: N/A, start: 1478068113.477336, bitrate: N/A\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:     Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1088x575, 15 fps, 1000k tbr, 1000k tbn, 1000k tbc\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: [huffyuv @ 0x55e0b1c48080] using huffyuv 2.2.0 or newer interlacing flag\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: [huffyuv @ 0x55e0b1c4e4c0] using huffyuv 2.2.0 or newer interlacing flag\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: [huffyuv @ 0x55e0b1c52120] using huffyuv 2.2.0 or newer interlacing flag\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: [huffyuv @ 0x55e0b1c562c0] using huffyuv 2.2.0 or newer interlacing flag\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: [huffyuv @ 0x55e0b1c20200] using huffyuv 2.2.0 or newer interlacing flag\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: Output #0, avi, to '/tmp/peekZ22AQY.avi':\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   Metadata:\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:     ISFT            : Lavf57.56.100\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:     Stream #0:0: Video: huffyuv (HFYU / 0x55594648), rgb24, 1088x574, q=2-31, 200 kb/s, 15 fps, 15 tbn, 15 tbc\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:     Metadata:\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:       encoder         : Lavc57.64.100 huffyuv\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: Stream mapping:\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]:   Stream #0:0 -> #0:0 (rawvideo (native) -> huffyuv (native))\nnov. 02 07:28:33 arch-obelix com.uploadedlobster.peek[815]: Press [q] to stop, [?] for help\nnov. 02 07:28:40 arch-obelix com.uploadedlobster.peek[815]: [1.3K blob data]\nnov. 02 07:28:40 arch-obelix com.uploadedlobster.peek[815]: video:49400kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.016574%\nnov. 02 07:28:45 arch-obelix dbus[407]: [system] Activating via systemd: service name='org.freedesktop.hostname1' unit='dbus-org.freedesktop.hostname1.service'\n. ",
    "bilelmoussaoui": "@phw We have the same issue with transifex not being able to auto-sync with Github repository (on FeedReader) and we didn't get the change to get it into weblate. Maybe we can give it a try to get a github bot to do this work?\nShouldn't be too hard, just update the resources whenever a new commit is pushed to github. The next step is to sync the translations from transifex to github, i don't know if there's an API or a way to detect if a change was commited to auto-sync it with github , might worth some digging . @phw that would be really great!! . @phw i can take care of that :) \nI've done Lollypop, FeedReader and Terminix website\n. @phw Give me some days and just create a new repository so i can keep my work on it; shouldn't take so much of time:+1: . @phw can you ping me once it's done, so i can start working on it before the weekend . @phw Thanks :+1: . @phw Just to let you know that i have been quite busy those last days but i started working on it. Should be ready before next week :tada: . \nShould be ready pretty soon! sorry for the delay!. @gort818 Yeah, I'm just so busy with finals currently. But I will push the whole code by the end of this month. Sorry for the long dealy! \n. Should be About Peek. Apps shouldn't have specific themes patches. If it's an issue upstream, it should be fixed there. . The menu shouldn't use a GtkButtonBox. It looks ugly :/. See Music for example: https://gitlab.gnome.org/GNOME/gnome-music/blob/master/data/ui/AppMenu.ui. ",
    "dawidd6": "Very nice @phw \n. ",
    "nijel": "@mohamedsakhri We indeed lack some UX expert at Weblate, any suggestions how to improve user experience are welcome :-).\n. Good point, however let's avoid polluting this issue tracker even more and move discussion to Weblate issue tracker: https://github.com/nijel/weblate/issues/1283. This is actually standard name (see RFC 4646 and RFC 4647). You can find reasoning in several places (eg. https://code.djangoproject.com/ticket/18419) - it doesn't make sense to bind traditional/simplified variants with country as they are used in more countries. Still if you prefer to use zh_CN and zh_TW for some reason, just rename the files and Weblate will work just fine.. The problem with country based names is that you want to use same translation for zh_CN and zh_SG, similarly for zh_HK and zh_TW.\nAs written before, Weblate will work with any naming, feel free to rename the files to whatever you find appropriate. It defaults to follow standards when creating new translations, but it's flexible in accepting other naming.. ",
    "sorawee": "Does this really fix the lagging problem? I tried running peek with:\nTMPDIR=/var/tmp MAGICK_TMPDIR=/var/tmp MAGICK_TEMPORARY_PATH=/var/tmp peek\nBut it's also badly lagging.. ",
    "gerboland": "Hey folks,\nI work on Unity8 and Mir. Screenshotting is something we have basic support for, the mirscreencast utility shows that. We are lacking in API to allow more advanced screenshotting utilities like peek however.\nTo test mirscreencast, install a recent Ubuntu and add the \"unity8-desktop-session\" package. You should be able to choose between Unity7 and Unity8 in the login screen from then on. Bring up Unity8, and then from command line mirscreencast will work - but as root-only!!\nBut we need to add API to allow users to screenshot their session without a root password. For security reasons, allowing any application to screenshot whenever it likes is a risk, so we need to mediate that (probably a prompt to the user asking if it is ok, for the first time). These are things we need to do, before Peek will work nicely. \nI've logged a bug with Unity8 to track this effort: https://bugs.launchpad.net/unity8/+bug/1666902\nYou'll need to wait until that bug is resolved before this ticket can be attempted.\nThanks for the interest, it would be great to get Mir support in your awesome app!\n-G. ",
    "AlanGriffiths": "@phw just to mention another option for \"setting up Mir to test\" - you can run a simple Mir server on your X11 desktop: https://bazaar.launchpad.net/~mir-team/miral/trunk/view/head:/getting_and_using_miral.md\nYou'll still want to validate with Unity8, but the more familiar environment is helpful in the early stages.. @phw you may well be right. I'm hoping to be in a position to clarify later this week.. ",
    "sincerefly": "Thanks!. ",
    "laurybueno": "It works perfectly now! Thanks a lot for your time!\n. ",
    "m-kuhn": "That's what I expected. Power to the user :stuck_out_tongue_winking_eye: \n. ",
    "eson57": "Yes, thanks. I was hoping for that. :+1: \n. Yes, thanks! That is noted.\n. ",
    "mephux": "@phw ah, makes sense. I am using i3. I'll look into it and see if I can figure it out and submit a PR.. @phw gtk 3.22.4-1. @phw had a chance to poke around, and it will take custom work to get it to work with i3 correctly (a lot I think). I'm assuming it will be custom for each tiling WM. \nAnyhow, will see if I can get a patch for i3 working at least.. @phw @ibrahima @dmsmidt I looked at this for a few days. No idea why it's now allowing it to pass through. I debugged everything I could think of. Super confused on this one. :-\\\n. to further elaborate compton is likely the problem but I couldn't pin it down.. ",
    "pciavald": "Would be interested in this feature too. Switching to another software for now, but i'll gladly come back if the thread is updated.. ",
    "erayaydin": "I'm also interesting with this feature. For now, you can use scratchpad. Open peek and set location after starting peek, hide peek to scratchpad. When you finished recording you can get 'peek' from scratchpad. It will record :+1: \nBut there should be a nice way for recording i3 window with peek.. ",
    "tmccombs": "Peek is the best gif screen recorder I have found. I wish it worked better with i3.. ",
    "grepsedawk": "So the way to do it is to make both peek and the window you're trying to capture into \"floating mode\" ($mod + shift + space is default).\nPut peek just above the window you want to capture and fire away...\nIt's a pain but better than nothing:\n\nNOTE: compton or equal must be running.\n. @MattMcMurray Nice tip, that's definitely easier than moving all the windows around like an ancient windowed WM. @nberrios Thanks, I had to do like 3 hours of research over something so small to finally find that... Lol. ",
    "MattMcMurray": "Furthering @pachonk's point: Stacked ($mod+s) and tabbed ($mod+w) mode also work . ",
    "nberrios": "@pachonk yer a wizard. ",
    "AndreasBackx": "Unfortunately if you want to record something like polybar, you cannot easily set it to floating mode.. ",
    "seanmavley": "If terminal-only commands will be added, then I think recording time interval and perhaps dimensions should be specified too.\nSo something like:\npeek -o OUTPUT.gif -t 10 -w 250 -h 250\nwhere -o is output filename, -t is seconds to record, -w and -h is width and height in pixels respectively.\nOr something along the lines of these. ",
    "ArsenArsen": "Seems good, but what I was thinking was still popping up the record screen and have it save by a terminal command. I still want it to be a user chosen area. \nGreat work by the way. . > Also I assume $HOME/tmp does exist and is not itself on a RAM disk. \nCorrect.\n\nHow large is the area you are recording and what frame rate have you set?\n\nQuarter, approx, of a 1920*1080 monitor. In fact, the white lines on my screenshot are Peek window corners. Default framerate.\n\nSome people also suggest to set MAGICK_TMPDIR in addition to TMPDIR\n\nWill try now\nEDIT: Same results.. Actually, the area is 1221*860 pixels, re measured it.. Hmm, could there be a record as webm too? Which would modify my output flag suggestion to have %f replaced with the format. Also, to add to that one too, and I'm getting a bit sidetracked here, excuse me, a - could be a good idea to have the file get sent to stdout with all other logging removed. Again, excuse me for going off topic of this issue. . Oh sorry about that, I miss read the comment. Will try webm today when I'm home. . Yeah, pretty apparent that convert limits itself just enough to not trigger OOM. For me, it's an 8GB RAM system and between things running I had chromium, KDE, Konsole, OpenSSH session, and an IDE open, which would consume about slightly less than 4GB of RAM, which adds up to the OOM statement. I'd personally sacrifice processing time for resources, but as you said, it might affect other things. Maybe webp or gifv targets for converting could solve this problem? . > GIFV is more or less just a fancy marketing term for using MP4 in place of animated GIFs :)  \nI assumed so when I couldnt find the format specs\nBut what about WebP? How do you think it'd bare?. I see. Is there a AUR for peek dev or should I compile myself to test with webm?. Alright, thanks. I guess that answers and closes this issue in that case?. ",
    "csrgxtu": "yep, i will try it if you can build one. just paste the link here.. i am using ubuntu 14.04, and peek depends on libgtk-3-0, my current window environment is lower than that.\n```bash\narcher@ThinkPad:~/Downloads$ sudo dpkg -i peek-0.8.0-issue-54-Linux.deb \nSelecting previously unselected package peek.\n(Reading database ... 207303 files and directories currently installed.)\nPreparing to unpack peek-0.8.0-issue-54-Linux.deb ...\nUnpacking peek (0.8.0) ...\ndpkg: dependency problems prevent configuration of peek:\n peek depends on libgtk-3-0 (>= 3.14); however:\n  Version of libgtk-3-0:amd64 on system is 3.10.8-0ubuntu1.6.\ndpkg: error processing package peek (--install):\n dependency problems - leaving unconfigured\nProcessing triggers for gnome-menus (3.10.1-0ubuntu2) ...\nProcessing triggers for desktop-file-utils (0.22-1ubuntu1) ...\nProcessing triggers for mime-support (3.54ubuntu1.1) ...\nProcessing triggers for libglib2.0-0:amd64 (2.40.2-0ubuntu1) ...\nProcessing triggers for hicolor-icon-theme (0.13-1) ...\nErrors were encountered while processing:\n peek\n```. ",
    "tylercollier": "Peek is awesome and I'm so happy it works on Ubuntu 14.04.5.\nThe only tricky part for me, since this was my first time using a snap package, was that the executable was not found. This article helped:\n\nHowever, the first time you try to run a snap on 14.04, you might experience the error \u201cThe command cannot be found\u201d. This is due to the fact that \u201c/snap/bin\u201d has not been added to the $PATH environment variable. To do so, a script called \u201capps-bin-path.sh\u201d has been added to /etc/profile.d. It will automatically run after you reboot or re-login and add snaps launchers to your path. When this is done, snaps should launch as expected\n\nSo, running $ /snap/bin/peek worked for me.. ",
    "Tusharsb": "@phw when I try\nsudo snap install peek --edge --devmode \nI get this warning\n```\nerror: This revision of snap \"peek\" was published using classic confinement and\n       thus may perform arbitrary system changes outside of the security\n       sandbox that snaps are usually confined to, which may put your system at\n       risk.\n   If you understand and want to proceed repeat the command including\n   --classic.\n\nHesitatingly when I try\nsudo snap install peek --edge --devmode --classic\nsnap tells me\nerror: cannot install \"peek\": cannot use classic and devmode flags together\n``\nI didn't tried removingdevmodeflag with onlyclassic` flag. Should I? Kindly suggest. ",
    "Kukanani": "Unfortunately, I'm having some trouble running the classic snap:\n/snap/peek/222/command-peek.wrapper: 2: exec: desktop-launch: not found\nThis issue does is not isolated to peek, it seems to affect other classic snaps as well. I installed Peek via sudo snap install peek --beta and was pleasantly surprised to find it working perfectly in 14.04! Thanks for a great utility.. ",
    "hellocatfood": "Thanks for the clarification. What should the dialogue look like? I'm using Unity on Ubuntu 16.04.. ",
    "djmaze": "Duplicate of #57. ",
    "slabua": "This way, though, does not allow to record the gnome-shell interface.\nEdit: I just noticed that there's already issue #10 for that.. @phw Yes strange, ffmpeg by itself is able to record the gnome-shell. Just my feeling, it looks like in peek it's somehow recording on a layer right below the shell (if such layered architecture even exists), because it does record the wallpaper beneath indeed.. ",
    "JianwenLi-GS": "It would be nice if peek can record top bar of the gnome shell.. ",
    "ElijahLynn": "Was super excited to use Peek, as it is so simple. But yeah, just went to record my first GIF of the gnome power down settings in the top right and realized I cannot. Would really welcome this capability. . ",
    "najcardboyz": "I think so, peek is a great tool for making GIF, it's great if you can record gnome-shell panels. ",
    "elevine": "Yep I'm using Ubuntu with Unity.  Thanks for the quick response!. ",
    "hottwaj": "Not sure if this is exactly the same issue, but on Linux Mint 16.04 recording doesn't work and the save dialog doesn't appear - I get the following in the console:\n```\nffmpeg: error while loading shared libraries: libx264.so.146: cannot open shared object file: No such file or directory\nError: Child process exited with code 127\nRecording stopped unexpectedly with return code 32512\nError: Broken pipe\nRecording stopped unexpectedly with return code 0\n(peek:13094): GLib-WARNING **: Error flushing string: Broken pipe\n```\nStrangely if I run peek under sudo everything works fine - maybe I've got a bad setup?\nCheers. ",
    "mehcode": "I'm actually using the NVIDIA binary drivers. Hmm. Darn. I was hoping for an easy solution. Heh. I can try seeing if the OSS drivers fare better here.. ",
    "Mailaender": "You need to define a sub-category, but you are right, I chose an invalid one according to https://en.opensuse.org/openSUSE:Packaging_desktop_menu_categories#Utility. Yes, maybe even Categories=GTK;GNOME;Graphics;2DGraphics;RasterGraphics;. I think I copied the category from the shutter.desktop https://launchpad.net/shutter which in retrospect wasn't a good template. Sorry.. The @openSUSE build service rpmlint is kinda strict and will error the build and delete all binaries so I will be forced to patch in a second category. I assume this is required to make it look good on the hierarchical KDE menus and SUSE was traditionally very KDE focussed.. Yes, I think the X- prefix will result in an ignore for the check script and most desktops will then sort the utility in a category like \"other\" or \"misc\".. ",
    "ian-moone": "So, shouldn't it be Categories=GTK;GNOME;Graphics;2DGraphics;?. ",
    "MariusQuabeck": "I can reproduce the issue on Ubuntu 16.10 (unity). ",
    "hoto": "Thanks @phw for help :)\nI'm stupid not to read the actual project Readme in the first place ;)\nI've installed ImageMagic and ImageMagic-devel (just to be sure).\nGifs are now being saved but they are black (sometimes mouse is visible).\nI've checked the avi files and they are also black.\nHere is a sample gif with just a cursor:\n\nThe only thing I'm not sure I have is Window manager with compositing enabled.\nBut after googling it I gave up as I don't want to break something on my fedora...\nOutput from the console:\n\nI'm closing this one as I won't be making changes to window composition as I find it too risky.\nThanks for help!. i finally found out why it did not work, I was using the default Wayland instead of Xorgs. After switching to Xorgs peek is working on my Fedora 25.\nTo change to Xorgs (got the screenshot from the internet, it's not mine) select the one that says Xorgs:\n\nIt works!\n\n. ",
    "bit101": "Ah, OK. Looks to be an i3 issue. I had a look through the other issues before I posted, but missed that one.. Verified it's working well enough under a different wm. Thanks.. ",
    "kretcheu": "Hi,\nI just did the ITP (Intent to package) thats the first step for package can enter in Debian.\nI will try to make a deb package according Debian policies and then send to my sponsor to verification and aproval. \nTo see what happends:\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=855666\nregards.. Debian now is in Full-freeze, so no new packages is allowed.\nstretch is almost ready, when it is released I will can upload to news packages.\n. On page: https://wiki.debian.org/UpstreamGuide#Initial_Packaging \nyou can find some instructions.\nI think that if you want to put debian recipe use a separate directory for this like:\npackaging/debian\npackaging/arch . @phw when you tag another version without debian directory I will make a package and send to my sponsor to aprove.\nthanks. I did a txt file and them I use a litle script using txt2man to make groff file.\nfor NAME in $(find . -maxdepth 1 -name \"*txt\" -printf \"%f\\n\")\ndo\n    LEVEL=$(head -n1 $NAME | cut -d'\"' -f2 )\n    MAN=$(echo ${NAME%%.txt})\n    head -n1 $NAME > $MAN.$LEVEL\n    txt2man $NAME | grep -v '^.TH ' >> $MAN.$LEVEL\ndone\npeek.1.txt\npeek.man.zip\n. ",
    "kyodev": "news about package in debian repo by @kretcheu?. ok, boring, then we must wait...\nthanks for this new package in Debian. with Stretch (debian9), in /etc/ImageMagick-6/policy.xml, I have too:\n<policy domain=\"resource\" name=\"disk\" value=\"1GiB\"/>\nbut it's for:\n\nAny large image is cached to disk rather than memory\n\nconvert -list resource\nResource limits:\n  Width: 16KP\n  Height: 16KP\n  Area: 128MP\n  Memory: 256MiB\n  Map: 512MiB\n  Disk: 1GiB\n  File: 768\n  Thread: 4\n  Throttle: 0\n  Time: unlimited. ",
    "yangfl": "@kretcheu hi, are you still working on this? Or do you need help? I'm looking forward to this package in Debian. :). ",
    "hosiet": "I came across this project days before and believe it is worthwhile to push peek into Debian repository. Unfortunately we've already missed the deadline for Ubuntu 18.04 LTS but it could appear in future versions of Debian and Ubuntu.\nAs a Debian Maintainer, I've set up a packaging repository on Debian's GitLab instance: https://salsa.debian.org/hosiet-guest/peek\nPrevious work by @kretcheu is evaluated and merged into this packaging repository. I'm looking to push it into Debian Archive recently.\n@kretcheu , is it okay if I just \"hijack\" your ITP report and continue with the work?. Uploaded and being reviewed on Debian side: https://ftp-master.debian.org/new/peek_1.3.1-1.html , it may take days or months.\nSee also previous package review at https://bugs.debian.org/895580\nIf accepted, the package information will be available at https://tracker.debian.org/pkg/peek .\n\nUpdate: Already accepted. You may close this issue now.. While I understand that zh_CN and zh_TWcannot fully represent Simplified Chinese and Traditional Chinese, binding country/region with translation is reasonable since each region has different standards in character and words. For example,\n\nzh_CN is for Chinese in China mainland, a simplified Chinese variant\nzh_SG is for Chinese in Singapore, a simplified Chinese variant\nzh_HK is for Chinese in Hong Kong SAR, a traditional Chinese variant\nzh_TW is for Chinese in Taiwan, a traditional Chinese variant\n\nThe ideal situation is that we organize translations for all those variants (which happens in some large projects like KDE). With smaller projects, zh_CN is used to represent Simplified Chinese and zh_TW is used to represent Traditional Chinese.\n\nWell those above is not the most important reason. The most important thing is that current installation will make Chinese translations invalid because the system only recognize .mo files inside zh_CN dir if locale is set to zh_CN. Files under /usr/share/locale/zh_Hans/ simply won't work and that is a bug.. As long as enough information is provided (in git repo, not in issue tracker) to show those files' origin, I don't want to bother with it too. It's just that Debian's package reviewer might catch and raise the issue later thus preparation in advance is preferable.\nTheir origin is needed even if actually came from another project. Please provide those information if you could.. Thanks, that helps.. @phw I finally have some time to dig into it and here's my analysis:\nIt is clear that the problem is caused by the uncertain build order when doing multi-threaded build. We know that tests need application.h, which is generated by valac during the build of main peek executable. As a result, we can force all tests target to depend on the main peek executable target.\nPatch attached here:\n```diff\nrom: Boyuan Yang 073plan@gmail.com\nDate: Wed, 13 Jun 2018 18:07:42 +0800\nSubject: tests: Force build tests after main executable target\n\ntests/CMakeLists.txt | 16 ++++++++++++++++\n 1 file changed, 16 insertions(+)\ndiff --git a/tests/CMakeLists.txt b/tests/CMakeLists.txt\nindex 23a4db3..087d0ca 100644\n--- a/tests/CMakeLists.txt\n+++ b/tests/CMakeLists.txt\n@@ -17,6 +17,10 @@ add_test(\n   test-desktop-integration\n   ${PROJECT_NAME}-test-desktop-integration)\n+add_dependencies(\n+  ${PROJECT_NAME}-test-desktop-integration\n+  ${PROJECT_NAME})\n+\n # /utils/\n vala_precompile(VALA_TEST_UTILS_C\n     test-utils.vala\n@@ -34,6 +38,10 @@ add_test(\n   test-utils\n   ${PROJECT_NAME}-test-utils)\n+add_dependencies(\n+  ${PROJECT_NAME}-test-utils\n+  ${PROJECT_NAME})\n+\n # /screen-recorder/recording-area/\n vala_precompile(VALA_TEST_RECORDING_AREA_C\n     screen-recorder/test-recording-area.vala\n@@ -50,6 +58,10 @@ add_test(\n   screen-recorder-test-recording-area\n   ${PROJECT_NAME}-screen-recorder-test-recording-area)\n+add_dependencies(\n+  ${PROJECT_NAME}-screen-recorder-test-recording-area\n+  ${PROJECT_NAME})\n+\n # /screen-recorder/cli-screen-recorder/\n vala_precompile(VALA_TEST_COMMAND_LINE_SCREEN_RECORDER_C\n     screen-recorder/test-cli-screen-recorder.vala\n@@ -79,3 +91,7 @@ add_executable(\n add_test(\n   test-screen-recorder-cli-screen-recorder\n   ${PROJECT_NAME}-test-screen-recorder-cli-screen-recorder)\n+\n+add_dependencies(\n+  ${PROJECT_NAME}-test-screen-recorder-cli-screen-recorder\n+  ${PROJECT_NAME})\n```\nIt is tested that peek won't fail to build after applying this patch.\nNOTE This patch is based on 1.3.1 release. You may need to rebase it against latest git HEAD.\n@phw Do you think it is an acceptable approach?. As a GNOME user, you should be aware that top menu can be opened by clicking on the top icon using right mouse button.. @sguillia With #354 merged, I think this PR can be closed as well.. @sguillia That does not make sense. This is a list of build dependencies; when building packages, ffmpeg is never needed. If you want to emphasize that ffmpeg is needed runtime, you should write it elsewhere.. @Gwarks I have sent a Pull Request #354 containing such update.\n@phw could you please review and merge it?. ",
    "linuxundich": "Hi phw, I installed version 0.9, but the prioblem remains. Here are some basic informations about my system here:\n$ inxi -F\nSystem:    Host: isleofskye Kernel: 4.9.11-1-ARCH x86_64 (64 bit) Desktop: Gnome 3.22.3 Distro: Arch Linux\nMachine:   Device: desktop Mobo: N/A model: N/A BIOS: American Megatrends v: 080015 date: 08/13/2010\nCPU:       Dual core Intel Core i3 530 (-HT-MCP-) cache: 4096 KB \n           clock speeds: max: 2933 MHz 1: 1200 MHz 2: 1200 MHz 3: 1200 MHz 4: 1200 MHz\nGraphics:  Card: Intel Core Processor Integrated Graphics Controller\n           Display Server: X.Org 1.19.1 driver: intel Resolution: 1920x1080@59.93hz, 1280x1024@60.02hz\n           GLX Renderer: Mesa DRI Intel Ironlake Desktop GLX Version: 2.1 Mesa 17.0.0\nAudio:     Card Intel 5 Series/3400 Series High Definition Audio driver: snd_hda_intel\n           Sound: Advanced Linux Sound Architecture v: k4.9.11-1-ARCH\nNetwork:   Card-1: Intel 82578DM Gigabit Network Connection driver: e1000e\n           IF: enp0s25 state: up speed: 1000 Mbps duplex: full mac: 00:01:2e:2f:fb:d4\n           Card-2: Ralink RT2790 Wireless 802.11n 1T/2R PCIe driver: rt2800pci\n           IF: wls128 state: down mac: 7e:c1:5d:42:77:5a\nDrives:    HDD Total Size: 720.2GB (25.9% used)\n           ID-1: /dev/sda model: SanDisk_SDSSDP06 size: 64.0GB\n           ID-2: /dev/sdb model: SAMSUNG_HM641JI size: 640.1GB\n           ID-3: USB /dev/sdc model: STORAGE_DEVICE size: 16.0GB\nPartition: ID-1: / size: 53G used: 29G (57%) fs: ext4 dev: /dev/sda1\n           ID-2: /home size: 587G used: 140G (26%) fs: ext4 dev: /dev/sdb1\n           ID-3: swap-1 size: 6.35GB used: 2.98GB (47%) fs: swap dev: /dev/sda2\nSensors:   System Temperatures: cpu: 46.0C mobo: 28.0C\n           Fan Speeds (in rpm): cpu: N/A fan-1: 0 fan-2: 629 fan-3: 0 fan-4: 0 fan-5: 0\nInfo:      Processes: 250 Uptime: 1:24 Memory: 741.7/3631.4MB Client: Shell (bash) inxi: 2.3.8\nBut it looks like it's related to every recording software. I've got the same problem with SimpleScreenRecorder. So i guess, we can close this one, since there's a deeper problem with my system here.. ",
    "aveao": "Can repro (at least used to be able to, not anymore). I feel like it's more of a problem when the gif's resolutions are big, though.. I have moved to Arch Linux since my last comment, and am having the same issue. After the frame count exceeds a certain amount (seems like ~1200), convert hangs up my pc and runs very slowly, sometimes never even finishes. I usually have to kill it by hand.. ",
    "ponsfrilus": "Hi folks,\n   I was having the same problem with an older version (sorry no sure witch one), so I've installed the latest one through the ppa, and the error differ a little bit but seems to be related.\nPeek version\n~ \u00bb peek -v                                                                                                                                                                               \nPeek 1.0.1\nPeek package status\n~ \u00bb dpkg -s peek\nPackage: peek\nStatus: install ok installed\nPriority: optional\nSection: video\nInstalled-Size: 487\nMaintainer: Philipp Wolfer <ph.wolfer@gmail.com>\nArchitecture: amd64\nVersion: 1.0.1-0~ppa11~ubuntu16.04.1\nDepends: dconf-gsettings-backend | gsettings-backend, libc6 (>= 2.4), libcairo2 (>= 1.10.0), libglib2.0-0 (>= 2.41.4), libgtk-3-0 (>= 3.16.2), libkeybinder-3.0-0 (>= 0.3.0), ffmpeg | libav-tools, imagemagick\nRecommends: gstreamer1.0-plugins-good, gstreamer1.0-plugins-bad\nDescription: Simple animated GIF screen recorder with an easy to use interface\n Peek creates animated GIF screencasts using FFmpeg and ImageMagick. It was\n built for the specific use case of recording screen areas, e.g., for easily\n showing UI features of your own apps or for showing a bug in bug reports. It is\n not a general purpose screencast app with extended features and it never\n will be.\n .\n It also requires a window manager with compositing enabled.\nHomepage: https://github.com/phw/peek\nPeek\n~ \u00bb peek\nUsing screen recorder backend ffmpeg\nffmpeg version 2.8.11-0ubuntu0.16.04.1 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 5.4.0 (Ubuntu 5.4.0-6ubuntu1~16.04.4) 20160609\n  configuration: --prefix=/usr --extra-version=0ubuntu0.16.04.1 --build-suffix=-ffmpeg --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --cc=cc --cxx=g++ --enable-gpl --enable-shared --disable-stripping --disable-decoder=libopenjpeg --disable-decoder=libschroedinger --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzvbi --enable-openal --enable-opengl --enable-x11grab --enable-libdc1394 --enable-libiec61883 --enable-libzmq --enable-frei0r --enable-libx264 --enable-libopencv\n  WARNING: library configuration mismatch\n  avcodec     configuration: --prefix=/usr --extra-version=0ubuntu0.16.04.1 --build-suffix=-ffmpeg --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --cc=cc --cxx=g++ --enable-gpl --enable-shared --disable-stripping --disable-decoder=libopenjpeg --disable-decoder=libschroedinger --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzvbi --enable-openal --enable-opengl --enable-x11grab --enable-libdc1394 --enable-libiec61883 --enable-libzmq --enable-frei0r --enable-libx264 --enable-libopencv --enable-version3 --disable-doc --disable-programs --disable-avdevice --disable-avfilter --disable-avformat --disable-avresample --disable-postproc --disable-swscale --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libvo_aacenc --enable-libvo_amrwbenc\n  libavutil      54. 31.100 / 54. 31.100\n  libavcodec     56. 60.100 / 56. 60.100\n  libavformat    56. 40.101 / 56. 40.101\n  libavdevice    56.  4.100 / 56.  4.100\n  libavfilter     5. 40.101 /  5. 40.101\n  libavresample   2.  1.  0 /  2.  1.  0\n  libswscale      3.  1.101 /  3.  1.101\n  libswresample   1.  2.101 /  1.  2.101\n  libpostproc    53.  3.100 / 53.  3.100\nInput #0, x11grab, from ':0+958,361':\n  Duration: N/A, start: 1497348472.344557, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 807x597, 10 fps, 10 tbr, 1000k tbn, 10 tbc\nOutput #0, rawvideo, to '/home/nbo/.cache/peek/peekF8WR1Y.pam':\n  Metadata:\n    encoder         : Lavf56.40.101\n    Stream #0:0: Video: pam, rgb24, 806x596, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc56.60.100 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nframe= 1245 fps= 10 q=-0.0 Lsize= 1752229kB time=00:02:04.50 bitrate=115295.3kbits/s    \nvideo:1752229kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nError: Child process killed by signal 9\nFile save error: Error when getting information for file '/home/nbo/.cache/peek/peek1HMQ1Y.gif': No such file or directory\nTemp file delete error: Error removing file: No such file or directory\nI can confirm it's only happening with large GIFs - it's working fine with short one. It should not be related to space on disk:\n~ \u00bb df -h\nFilesystem                   Size  Used Avail Use% Mounted on\n[...]\n/dev/mapper/ubuntu--vg-root  213G  177G   25G  88% /\n[...]\nAny advices ?. Just some additional tests (660x444 size, Framerate 10), terminal capture with peek output:\n\n1000 frames OK\nframe= 1007 fps= 10 q=-0.0 Lsize=  845116kB time=00:01:40.70 bitrate=68750.6kbits/s    \nvideo:845116kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\n2000 frames NOT OK\nframe= 2009 fps= 10 q=-0.0 Lsize= 1686036kB time=00:03:20.90 bitrate=68750.6kbits/s    \nvideo:1686036kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nError: Child process killed by signal 9\nFile save error: Error when getting information for file '/home/nbo/.cache/peek/peekF03K1Y.gif': No such file or directory\nTemp file delete error: Error removing file: No such file or directory\n1500 frames NOT OK\nframe= 1502 fps= 10 q=-0.0 Lsize= 1260540kB time=00:02:30.20 bitrate=68750.6kbits/s    \nvideo:1260540kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nError: Child process killed by signal 9\nFile save error: Error when getting information for file '/home/nbo/.cache/peek/peekE2Q90Y.gif': No such file or directory\nTemp file delete error: Error removing file: No such file or directory\nSo my last test is 1200 frames -> OK\nframe= 1208 fps= 10 q=-0.0 Lsize= 1013803kB time=00:02:00.80 bitrate=68750.6kbits/s    \nvideo:1013803kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nConvert process freeze the computer for a while:\nPID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND     \n31961 nbo       20   0 6473440 3.082g    828 D  97.7 41.1   0:27.77 convert. \n",
    "xereda": "How was this bug? I have version 17.04 of Ubuntu, version 1.0.3 of Peek and I have the same problem.. I have a same problem. \n```\nxereda@xereda ~> peek\nUsing screen recorder backend ffmpeg\nffmpeg version 3.2.4-1build2 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.3.0 (Ubuntu 6.3.0-8ubuntu1) 20170221\n  configuration: --prefix=/usr --extra-version=1build2 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\n[x11grab @ 0x56461eb08fe0] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+62,66':\n  Duration: N/A, start: 1499258323.669850, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1857x1013, 10 fps, 1000k tbr, 1000k tbn, 1000k tbc\nOutput #0, rawvideo, to '/home/xereda/.cache/peek/peek4XHU2Y.pam':\n  Metadata:\n    encoder         : Lavf57.56.101\n    Stream #0:0: Video: pam, rgb24, 928x506, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.64.101 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\n[swscaler @ 0x56461eb1cea0] Warning: data is not aligned! This can lead to a speedloss\nPast duration 0.931740 too large  276526kB time=00:00:20.10 bitrate=112701.4kbits/s dup=3 drop=0 speed=   1x  \nPast duration 0.979134 too large  302665kB time=00:00:22.00 bitrate=112701.4kbits/s dup=3 drop=1 speed=1.02x  \nPast duration 0.995277 too large  608081kB time=00:00:44.20 bitrate=112701.4kbits/s dup=3 drop=1 speed=   1x  \nframe=  515 fps= 10 q=-0.0 Lsize=  708511kB time=00:00:51.50 bitrate=112701.4kbits/s dup=3 drop=1 speed=   1x  \nvideo:708511kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nconvert-im6.q16: unable to get registry ID cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted/home/xereda/.cache/peek/peek4XHU2Y.pam' @ error/cache.c/OpenPixelCache/3945.\nconvert-im6.q16: no images defined `/home/xereda/.cache/peek/peekCNIK2Y.gif' @ error/convert.c/ConvertImageCommand/3258.\nError: Processo filho concluiu com c\u00f3digo 1\nFile save error: Erro ao obter informa\u00e7\u00e3o para o arquivo \u201c/home/xereda/.cache/peek/peekCNIK2Y.gif\u201d: Arquivo ou diret\u00f3rio n\u00e3o encontrado\nTemp file delete error: Erro ao remover arquivo /home/xereda/.cache/peek/peekCNIK2Y.gif: Arquivo ou diret\u00f3rio n\u00e3o encontrado\n```. +1. What strikes me is the performance of the \"recordit\" app (Mac and win). It manages to generate animated gifs, with HD resolution, and still upload to your server. This all without consuming too much processor and machine memory. Maybe it would not be worth a study on him !?. ",
    "popey": "Agree with @Ads20000 this is fantastic! If you can push directly to the store, we can certainly get more testing done. I tested the snap here and it works well, so thank you so much for the work you've done so far!. I've rejected the first upload in the store to allow the review to move to the next release you uploaded. Which wasn't the right move, sorry. I'll sort this. :). Ok, awesome. I'll keep an eye out for it. . ok, looks like the review passed and they're ready to publish.. I have. It works. For anyone else who wants to try:-\nsnap install peek --edge --devmode is the magic.. To be honest however i run peek, i never \"use\" the file manager dialogue. I generally just press enter an additional time to make it save the gif. Same for most screen casting apps i care less where it is saved and more that it is saved. If it ends up always saving in the same place that's a bonus in my mind because I know where i will find it, wherever that may be.. I'm afk most of the weekend, so will take a look at the review (if nobody else beats me to it) on Monday.. \"Urgh, I've learnt that actually unconfined (or Edge? I'm guessing it's the fact it's unconfined but I could be wrong) Snaps don't automatically (and in the background) update as I claimed in a previous comment so sorry about that\"\nThis is incorrect. Snaps do auto refresh, but you can also force refresh with \"snap refresh\".. Ok, you're correct, and I'm incorrect. I have started a thread on the forum because I do not believe this is the right behaviour.\nhttps://forum.snapcraft.io/t/why-do-devmode-snaps-not-auto-update/1028. Hm. Shall we wait until we get a reply from the thread? I've bumped the architect about it.. Note that @phw said snap install peek --beta and you did snap install peek --edge --classic. Has the i386 build also been bumped along with the x86_64 one? Looks like it hasn't because when I tried to snap install peek --beta in my i386 VM, it tells me it's a classic snap.\nHowever, I have seen the issue 'desktop-launch: not found' when installing a classic desktop snap. The app launch line might need to be:-\ncommand: bin/desktop-launch $SNAP/bin/peek  # (or whatever the path to the peek binary is)\nHowever, peek worked fine for me using snap install peek --beta (without classic)\n\n. @sziberov edge and beta contain the same. That's not the issue. It's the fact you used --classic.\nRunning snap info peek n my x86_64 laptop:-\ntracking:    beta\ninstalled:   1.0.3+git (225) 74MB -\nrefreshed:   2017-09-22 12:44:17 +0100 BST\nchannels:                    \n  stable:    \u2013                    \n  candidate: \u2013                    \n  beta:      1.0.3+git (225) 74MB -\n  edge:      1.0.3+git (225) 74MB -\nOn my x86 VM:\nchannels:                    \n  stable:    \u2013                    \n  candidate: \u2013                    \n  beta:      1.0.3+git (224) 78MB classic\n  edge:      1.0.3+git (227) 78MB -. ",
    "niemeyer": "@Ads20000 This is just part of the process, and we shouldn't feel bad for it. Snapping up applications with proper confinement is literally getting easier every day with new interfaces and new capabilities in snaps. Having an application that is half-way there means half the work has been done and we can benefit from it today. The second half can easily come next. . Thanks for the feedback, @phw. Some follow ups:\n\n\nIndeed, that's a problem and we're working on it. You'll have a much more clear list of available interfaces in the command line itself (PR is already up), and we're constantly working on improving the documentation via the forum at https://forum.snapcraft.io/c/doc. Some further organization is needed and we'll work on that.\n\n\nIf you can't run snapd locally, a VM is indeed the best shot at the moment I think. Running snapd inside Docker requires Docker itself to do some work, because both Docker and snapd make use of the same kernel infrastructure and require wide access into the system to set the containers up.\n\n\nThat's exactly what interfaces are for in snaps, and it is in fact much more flexible than what you might get in some other systems. You can poke arbitrary holes in DBus, AppArmor, seccomp, udev, and pretty much anything else necessary through them. Even file sharing across snaps is possible (the content interface). These are what enable strict snaps to claim what they need.. No, the interface type is defined by snapd. The interface endpoints (the plugs and slots) are actually part of snaps themselves. Each one of these types defines what happens when the given interface is connected, and the two ends may get specific benefits out of it depending on how the interface is defined.\n\n\nHere is the implementation of the network-status interface, for example, offering access to particular DBus services:\nhttps://github.com/snapcore/snapd/blob/master/interfaces/builtin/network_status.go\nAnd here is a more general DBus one:\nhttps://github.com/snapcore/snapd/blob/master/interfaces/builtin/dbus.go. Also worth into the ever-growing list which includes other kinds of interfaces:\nhttps://github.com/snapcore/snapd/tree/master/interfaces/builtin. ",
    "sziberov": "```\nkayover@kayover-Lenovo-G580:~$ sudo snap install peek --edge --devmode\n\u043e\u0448\u0438\u0431\u043a\u0430: This revision of snap \"peek\" was published using classic\n              confinement and thus may perform arbitrary system changes outside\n              of the security sandbox that snaps are usually confined to, which\n              may put your system at risk.\n          If you understand and want to proceed repeat the command\n          including --classic.\n\nkayover@kayover-Lenovo-G580:~$ sudo snap install peek --edge --devmode --classic\u043e\u0448\u0438\u0431\u043a\u0430: cannot install \"peek\": cannot use classic and devmode flags\n              together\nkayover@kayover-Lenovo-G580:~$ sudo snap install peek --edge --classicpeek (edge) 1.0.3+git from 'phw' installed\nkayover@kayover-Lenovo-G580:~$ peek\n/ not root-owned 1023:1023\nkayover@kayover-Lenovo-G580:~$ sudo peek\n/ not root-owned 1023:1023\nkayover@kayover-Lenovo-G580:~$ snap run peek\n/ not root-owned 1023:1023\nkayover@kayover-Lenovo-G580:~$ sudo snap run peek\n/ not root-owned 1023:1023\nkayover@kayover-Lenovo-G580:~$ \n```\nWhat's wrong? I'm using Ubuntu 32bit 17.04 with gnome de.\nEven tried from root terminal, no luck too.. @phw I seen on other snap package here that \"sudo chown root:root /\" will fix this error, and yes, this error is gone. But new is appeared : /snap/peek/224/command-peek.wrapper: 2: exec: desktop-launch: not found\n. \n. @popey Wait, he edited his comment. There was '--edge' minute ago!. ",
    "evandandrea": "\nAlso i386 builds are sometimes a bit behind, since they are built on launchpad and the other packages on snapcraft.io, as the latter does not do i386 builds.\n\nAside: support for i386 on https://build.snapcraft.io is coming. It's waiting on being able to specify the architectures you want your snap to build on in the snapcraft.yaml, which is getting final design next week.. I think that was a transient test failure. This PR just updates the docs.. ",
    "BrainAxe": "Thanks for replying. I just found out other screen recording software (kazam) also having same problem in screen recording :( . Thanks @gort818 for the information. It works and I am relieved from unwanted pain.\nI am very grateful to @phw  for keeping this issue opened. I found the setting in OpenGL Settings, here is a screenshot you can add this in FAQs and thanks again. :)\n\n. ",
    "gort818": "I had luck with changing the allow flipping setting for the Nvidia driver.. Glad to help guys!. @bil-elmoussaoui are you still working on this?. @bertob That is pretty awesome!. Could we just add the minimize button to the headerbar? Or are we talking about keyboard shortcut to completely hide the window?. It looks like the Radiance theme.. I have an idea for this, what about have a notify event for the record button and have a drop down menu with formats. I will test this out this weekend.. @phw @orschiro Here is a quick test, how does it look? \nWhat do you guys think?\n\n. @orschiro It is in my test here https://github.com/gort818/peek/tree/format-popover.. But so far it is just graphical It won't do anything atm, give me some time and I will get it going and let you know when it is ready to test :). @orschiro ok check it out https://github.com/gort818/peek/tree/format-popover build that and let me know what you think.. You need Vala installed. . @orschiro  thanks for the feedback, if you don't mind can you give it another try?\n@phw Thanks for the notes, I have updated my branch to include to GtkMenuButton. Everything works on my end. Here are some screenshots:\n\n\n. @orschiro  I was curious so I ran ubuntu 17.10 to test for you, so for so good! Take a look!\n\n\n. @orschiro Thanks so much for the feedback extremely helpful! I'm not sure why the popmenu is not inheriting the default style on Gnome, on cinnamon it works fine, I will investigate that. \nOn your second point what do you think about changing the record label when selecting format? For example if I select gif it would say \"record as gif\" ? Or have check buttons or radio buttons?. Ok we are getting somewhere! \n\n. @orschiro Ok after hours of testing there is only an issue with Ubuntu themes, specifically Ambiance theme! So I checked for users themes and if they are using Ambiance it shows like the photo above. I have a feeling they are still many bugs in the Ambiance and Radiance themes.\nArc and Adwaita look gorgeous,\n\n\n . @orschiro Thanks once again for the feedback! Unfortunately I cannot seem to do much about the theme, I had to use a work around just to get the popover to match the headerbar colors This is strictly a Ambiance theme issue with Ubuntu by default buttons are white with black text. So anyway take a look and tell me what you think!\nI also added changing of the record button label depending on what format you choose.\n@phw If you get a chance I would love if you could check it out, I would like to know your opinion as well. https://github.com/gort818/peek/tree/format-popover. @orschiro Ok I couldn't help myself I made specific style changes for user with the ambiance theme. I think this is as far as I can go..(Been tearing my hair out!) but we made some progress!\n\n . @orschiro Great to hear!! I will do so more slight changes and issue a pr for @phw to review.\nThanks for all your testing!. #207 . @orschiro This has been merged.. @phw What if we overwite crtl q to behave as the window close event?. Yeah pretty cool, very nice!. > Using screen recorder backend ffmpeg\nwebmgifffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nInput #0, x11grab, from ':0+227,101':\n  Duration: N/A, start: 1508689385.013648, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 479x193, 10 fps, 10 tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nFinishing stream 0:0 without any data written to it.\nOutput #0, rawvideo, to '/home/alessandro/.cache/peek/peekB8527Y.pam':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: pam, rgb24, 479x193, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 pam\nframe=    0 fps=0.0 q=0.0 Lsize=       0kB time=00:00:00.00 bitrate=N/A speed=   0x  \nvideo:0kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\nOutput file is empty, nothing was encoded (check -ss / -t / -frames parameters if used)\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\n/home/alessandro/.cache/peek/peekB8527Y.pam: Invalid data found when processing input\nError: Child process exited with code 1\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\n/home/alessandro/.cache/peek/peekB8527Y.pam: Invalid data found when processing input\nError: Child process exited with code 1\nError deleting palette file: Error removing file /home/alessandro/.cache/peek/peekQNCC8Y.png: No such file or directory\nFile save error: Error when getting information for file \u201c/home/alessandro/.cache/peek/peek3LEG8Y.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/alessandro/.cache/peek/peek3LEG8Y.gif: No such file or directory. Here is the output with the workaround\n\nPEEK_POSTPROCESSOR=imagemagick ./peek\nUsing screen recorder backend ffmpeg\ngifffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nInput #0, x11grab, from ':0+227,101':\n  Duration: N/A, start: 1508689469.701404, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 479x193, 10 fps, 10 tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nFinishing stream 0:0 without any data written to it.\nOutput #0, rawvideo, to '/home/alessandro/.cache/peek/peekYD067Y.pam':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: pam, rgb24, 479x193, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 pam\nframe=    0 fps=0.0 q=0.0 Lsize=       0kB time=00:00:00.00 bitrate=N/A speed=   0x  \nvideo:0kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\nOutput file is empty, nothing was encoded (check -ss / -t / -frames parameters if used)\nconvert: improper image header /home/alessandro/.cache/peek/peekYD067Y.pam' @ error/pnm.c/ReadPNMImage/284.\nconvert: no images defined/home/alessandro/.cache/peek/peek3L1I8Y.gif' @ error/convert.c/ConvertImageCommand/3258.\nError: Child process exited with code 1\nFile save error: Error when getting information for file \u201c/home/alessandro/.cache/peek/peek3L1I8Y.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/alessandro/.cache/peek/peek3L1I8Y.gif: No such file or directory\n. Also I just tested on Ubuntu 17.10 if backed is gnome-shell it works brilliantly, but if I use ffmpeg it saves the file as a gif but unfortunately  it is just a static image.\n\n\n. @phw  Here is the output using release peek-1.1.0 it works beautifully , I am using Cinnamon. I tried recording for a few seconds and up to a minute\n\n./peek-1.1.0\n Using screen recorder backend ffmpeg\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nInput #0, x11grab, from ':0+331,138':\n  Duration: N/A, start: 1508974958.940594, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 677x450, 10 fps, 10 tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nOutput #0, rawvideo, to '/home/alessandro/.cache/peek/peekXXXXXX.pam':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: pam, rgb24, 677x450, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 pam\nframe=   11 fps=0.0 q=-0.0 size=    9728kB time=00:00:01.10 bitrate=72447.1kbitsframe=   16 fps= 16 q=-0.0 size=   14080kB time=00:00:01.60 bitrate=72089.6kbitsframe=   22 fps= 14 q=-0.0 size=   19456kB time=00:00:02.20 bitrate=72447.1kbitsframe=   28 fps= 13 q=-0.0 size=   24832kB time=00:00:02.80 bitrate=72651.3kbitsframe=   34 fps= 12 q=-0.0 size=   30208kB time=00:00:03.40 bitrate=72783.5kbitsframe=   40 fps= 12 q=-0.0 size=   35584kB time=00:00:04.00 bitrate=72876.0kbitsframe=   45 fps= 12 q=-0.0 size=   39936kB time=00:00:04.50 bitrate=72701.3kbitsframe=   51 fps= 11 q=-0.0 size=   45312kB time=00:00:05.10 bitrate=72783.5kbitsframe=   57 fps= 11 q=-0.0 size=   50688kB time=00:00:05.70 bitrate=72848.4kbitsframe=   63 fps= 11 q=-0.0 size=   56064kB time=00:00:06.30 bitrate=72901.0kbitsframe=   69 fps= 11 q=-0.0 size=   61440kB time=00:00:06.90 bitrate=72944.4kbitsframe=   75 fps= 11 q=-0.0 size=   66816kB time=00:00:07.50 bitrate=72980.9kbitsframe=   80 fps= 11 q=-0.0 size=   71168kB time=00:00:08.00 bitrate=72876.0kbitsframe=   85 fps= 11 q=-0.0 Lsize=   75870kB time=00:00:08.50 bitrate=73121.0kbits/s speed=1.06x  \nvideo:75870kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\n\n\n. @sQVe What de are you using?. @phw  Awesome thanks !. I am going to boot up a Kubutu live cd and do some testing with this.. I just tested on plasma 5.15 the newest release and breeze theme finally works! They fixed a lot of gtk theme problems in the latest release.. Seems to be the same problem here #198 . Awesome! My pleasure :). @p-e-w Thanks so much for taking a look, thanks for the feedback. I can definitely do that, but I am thinking it might make the header bar a bit cluttered but I will post a picture of a mock-up and let's see how it looks . Also I saw your  'Simulate a lifeform in the terminal' That is one of the coolest things I have seen in a while.\n@phw What do you think of the proposed changes?. Ok thanks for the review I will get on these changes in the next 2 days.. @phw Ok I made some changes, please let me know what you think, after this gets merged I would like to work on some more restructuring.. apparently I cannot spell function.. @phw Ok thanks! Wow I am a mess :( I will get right on that.. @phw I hope I caught all the formatting issues, also I changed the record icon #218 . Thanks for your patience.. awesome thanks I appreciate the review @p-e-w I confused you with @phw you guys have the same name... @p-e-w Thanks!. @phw Done and done :). > And merged :) Thanks a lot, good work.\nNo problem!\n\nI haven't had too many code contributions so far, but I should start adding an AUTHORS file. Please let me know how you would like to be credited there.\n\nI would be honored!. @phw You can credit me as Alessandro Toia. I just got it for the first time as well.. I might do some testing with this over the weekend.. Got a working example! Still got some work to do to make it look nicer, but the functionality is there.\n\n. \n\nHere is a another one with the buttons left aligned .. \n\n. Ok cool I will do some tests later and let's see how it looks.. @phw I am having a hard time centering the recording time label widget any idea how to go about this?. I'll set up a branch later when I get home. . Ok take a look!\nhttps://github.com/gort818/peek/tree/update_time. #227 . @p-e-w This has been merged we changed the record icon, it is not a red circle but a circle nonetheless, I think it looks great.. Just tested works perfectly awesome job!. This will need some changes with the formatting of the label any help appreciated.. trying to center the label on the headbar and having some difficulties.. Ok I gave it try everything seems to be working, let me know what you think.. now how to make it look pretty??. Ok now to get started on the ui changes.. I will have some later for you to take a look at.. Here are the buttons left aligned\n\n\n. \n\nOk I'm getting somewhere. I changed the headerbar (removed custom title, added the buttonbox and all the goodies) and used the headerbar title as the time display as it is always centered. \nIs this something that is feasible it all seems to work, but you might have a reason for using the custom title??\nI will put these changes in a different branch, as I have not merged them yet. But let me know if this can work.\n. \n\nHere are some shots with Gnome so we can see how it looks with the application menu.\n. Ok awesome I updated the branch take a took.. I think it is looking really great!. Ok done, very nice :)!. Ohh that is a good idea.. Thanks! \ud83d\udc4d . Here is quick test obliviously needs more work\n\n. @phw are you still interested in this? Sorry been a little busy lately, I got some free time would love to finish this up.. Still haven't forgot.. going to try to tackle this on the weekend if I have time. . Got something nice coming along, pull request coming shortly\n\n\n. The minimal window is not increased the label text will scale down once the window is below the threshold. . Fixed with #285 . We can close this guy . I would like to help with this but I am not familiar with Windows.. My wife would love to use this on Windows. @phw any tips to get started? Maybe if you point me in the right direction I can try it out.. Just curious are you waiting until after the countdown to press stop? Yes there should be a save dialog.\nTry running peek with  G_MESSAGES_DEBUG=all peek \nlet's see if anything stands out.. \nHere is a photo of the countdown it should start as soon as you click record.\nAre you talking about the time elapsed counter? Middle of the titlebar?\n\nJust want to make sure were are on the same page?\n. Ok you can change the the delay to 0 in the preferences. As to why it is\nnot showing I'm not sure tbh I've never heard of that desktop until today.\nI might test out the desktop and see if if I can find out why the countdown\nisn't showing up.\nOn Feb 21, 2018 4:30 PM, \"fschutt\" notifications@github.com wrote:\n\nThe big number / countdown you have in your first screenshot doesn't\nappear for me. If I press \"start recording\", it looks like this:\n[image: test_1]\nhttps://user-images.githubusercontent.com/12084016/36513359-859f2af4-176f-11e8-878d-6fbfe928c3b2.png\nAs you can see, no 4..3..2..1 countdown is showing (like in your first\nscreenshot), so I assumed that the recorder is immediately running. When I\nclick \"stop\" in that timeframe, nothing happens (which is probably\nexpected). If I press \"stop\" after the countdown appears in the top\ntitlebar, it works as expected. So the actual bug is that the 4..3..2..1\ncountdown blocking the screen isn't showing.\nThis is using the Trinity Desktop Environment, not sure if this is a bug\nthat may only appear on a non-GNOME DE.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/281#issuecomment-367525981, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AIrTiS9b1KoZHQYiCxXoL-HMroG1EwqZks5tXLU2gaJpZM4SJk1g\n.\n. @phw I believe the issue @fschutt is having is the countdown is active but it is invisible.. Can you post the output from the terminal?. Cannot reproduce this, you do have libkeybinder3 correct?. \n. No problem, no rush it took me three months to get around to doing this! :). @phw Have you got a chance to take a look?. Thanks for the review, I am glad it worked as it is supposed to. I should get around to it today.. Ok pushed the changes.. another note I changed this line \nif (get_window_width () < SMALL_WINDOW_SIZE)\n\nto\n\nif (area.width < SMALL_WINDOW_SIZE)\n\non one of my desktops running Mint 18.3 get_window_width was not working as intended .. any thoughts on that.. on my arch machine no issues at all. But with Mint area.width is working..  (peek:26573): DEBUG: application-window.vala:345: area.width: 298\n (peek:26573): DEBUG: application-window.vala:346: get_window_width(): 346\nThat is interesting.. get_window_width is always 48px larger on linux mint. What would be the best to implement this? Have an check option for imgur upload, when you are done recording open a dialog box asking whether you wish to upload? or just skip the dialog and get straight to the upload?\nI might be interested in working on this.. what are your opinions on the best way to go about doing this?. I like it but it does seem to a little too much.. what do you think @phw ?. Ok I like that, I have a client id for imgur for anonymous uploads.. now just to figure out how to implement it in vala.. maybe libsoup or libcurl for the https request.\nProbably going to need some help with this.. should be fun :). @zero-master thanks I will look into this.. @A1rPun  I see were you are coming from, but I am not using any of their code or libraries it is a simple https POST request.. \nI also checked the Giphy api.. unfortunately there is no upload api available at the moment they said there are working on it https://github.com/Giphy/GiphyAPI/issues/157. Good news I have a working example now just to implement it! Soon we shall be able to upload to imgur!. @phw something like this?\n\n. @phw any idea how to get the check-marks on the right side? I played with it quite a bit couldn't figure it out with adding a button and label for the check-mark. I wonder if the check-mark moves according the theme.. @phw thanks for the tip I figured it out!. \n\nOk getting somewhere. Ok I got the basic functionality working if any of you want to give a test drive, atm peek returns the imgur link in the terminal.\nhttps://github.com/gort818/peek/tree/imgur. Awesome.. a lot more changes made today :). I have updated my Imgur branch recently if anyone wants to test it out,\nhttps://github.com/gort818/peek/tree/imgur. Added a bunch more goodies, still a lot of work to do. But the imgur upload is working, should I have a gtk text box to show the link of the file or just have it open in a web browser?\nTake a look when you get a chance it is still pretty messy atm.\nTODO: \n1. ~~Add error handling for the json parser.~~\n2. Add functionality for opening in file manager\n3. What to do with the imgur link when finished uploading.\n4. Clean up code.. Just a side note we cannot upload webm files to imgur.\nhttps://help.imgur.com/hc/en-us/articles/115000083326-What-files-can-I-upload-What-is-the-size-limit-\n~~And for some reason I cannot get mp4 files to upload.~~\nEdit: Imgur does not support mp4 uploads through their api :(. @cocochepeau once we get this branch merged we will look into other options for uploads, thanks for the heads up!. @phw everything seems to function well enough, I am not sure how to proceed when you get a chance can you give this a test. I am going to need some help integrating this.. not sure what is the best way yet.. @phw Have you had any time to take a look yet?. Thanks for taking the time to review this! I will take a look this week and make some changes!. Was out of town the past week, trying to get this done soon, sorry for the delay.. my old thinkpad died on me:( just got a new laptop.. sorry for the delay. Finally go around to it, thanks for your suggestions all made perfect sense. take a look :). I just remembered we switch to meson, going to have to make some changes to the build file.. Ok now works great with meson, just need to have libsoup installed.. @phw Love it you could take another look :). Maybe we should move to meson? Obviously it is like putting a band-aid on the issue but it seems meson is the future.. Go to preferences, you can set the delay. . Looks like you need libx264, \n\napt seach libx264\n\nand install. Awesome good news, glad you found the problem!. Go to preferences and change the framerate.. \n. are you using Gnome? Should be at the top in the task bar.. Check #287  see if that helps.. Can you tell us what Desktop environment you are using? or are you using a tiling window manager?. There is no way to change the window size from the command line as of now, I have never used mate, I am sure there are keybindings to change position of the window.\nDo you have a open window list where you can maximize and minimize windows?. Check #287 see if that helps.. I tested the image with ffprobe and is showing the gif is indeed 25 fps.. To be honest it looks fine to me maybe mouse movement is a little laggy. But you could be right I'm not sure what could be causing that, let's wait for @phw to chime in.\nAwesome Keyboard by the way!. When the headerbar title is changed it uses that in the taskbar on Plasma.\nBefore recording\n\nAnd while recording \n\n. I will work on this, just to make sure are you using X11 or Wayland?. Do know any other applications that work this way?  I would like to see how it is implemented.. Well I checked the tilix source code, I think I have a pretty good idea how it is done, will just need you to test it when it is ready :). Hmm I did some research as I am not to familiar with wayland, be it seems it should automatically scale, I am not sure what I'm missing, I checked a few of the default gnome programs I could not find anything about scaling.\nA little stumped. . I don't have the hardware to test at the moment, can you see if the branch helps at all..not sure if it does anything at all.\nhttps://github.com/gort818/peek/tree/hidpi. Check this #315. Check #287 and see if that helps.. Check #287 see if that helps.. Check #287 see if that helps.. Check #287 see if that helps.. check this issue #315. spam. Spam. Check #287 see if that helps.. Looks awesome! Thanks @bertob . There is no wayland support https://github.com/phw/peek#why-no-native-wayland-support. I misunderstood,  can you post the output of G_MESSAGES_DEBUG=all peek ?. oops... Forgot to change my environment. It does not always behave correctly I have tested with over 10 themes and it is really hit and miss, The only reason I have it set for ambiance because the default for the popover menu was white and it just looked horrible. But now we have an easy way to make changes for specific themes :). Yeah, if you find a more elegant solution let me know, we could use radiobuttons and group them that is the only option I can think of at the moment.. Sure it looks good too me.. Old habits die hard :(. What about using add_seconds_full? https://valadoc.org/glib-2.0/GLib.Timeout.add_seconds_full.html. I initalially choose  not to use Timeout because\n\nNote that timeout functions may be delayed, due to the processing of other event sources. Thus they should not be relied on for precise timing\n\nBut I will give a test!. Oh yeah It is automatic.. like autopilot :). To be honest It is not needed, I was doing some testing and left it in there. It will be removed.. oops.. that is one thing I really need to work on. well that makes it easier thanks!. ",
    "WolfieWerewolf": "I know this is an old ticket but I also had the same issue and the above solution resolved it for me.  Thank you.. ",
    "darim92": "I would also like to help out :) . ",
    "linusg": "Any update on this?. What I forgot mentioning:\nwhen run from the command line peek chooses ffmpeg as its backend:\n\nUsing screen recorder backend ffmpeg. Crap, I must have missed that. Thanks for your time, I'll try building from source or installing a dev version from the PPA!. \n",
    "felselva": "I think you can create a github site on this repository by creating a gh-pages branch.. ",
    "binarytrails": "Thank you for the swift response.\nI tried recording and good news, everything works! I absolutely love the simplicity of the usage.\nPerhaps, the other non-peek-git packages should be flagged outdated to avoid confusion. Otherwise, there seems to be a very high peek in the CPU (laptop freeze) during the rendering stage but once finished, everything is back to normal. Maybe it is not related to the software.. ",
    "Skylsmoi": "I think I have the same issue on debian\nUsing screen recorder backend gnome-shell\nRecording to file /home/come/.cache/peek/peekF5XVYY.mp4\nconvert: delegate failed `\"ffmpeg\" -v -1 -i \"%i\" -vframes %S -vcodec pam -an -f rawvideo -y \"%u.pam\" 2> \"%Z\"' @ error/delegate.c/InvokeDelegate/1310.\nconvert: unable to open image `/home/come/.cache/peek/magick-21081jTiiLtLHVsyp.pam': Aucun fichier ou dossier de ce type @ error/blob.c/OpenBlob/2712.\nconvert: no images defined `/home/come/.cache/peek/peek7848YY.gif' @ error/convert.c/ConvertImageCommand/3210.\nError: Le processus fils s'est termin\u00e9 avec le code 1\nTemp file delete error: Erreur \u00e0 la suppression du fichier\u00a0: Aucun fichier ou dossier de ce type\nCan you provide a similar fix for debian please ?. indeed, ffmpeg wasn't installed.\nIt now works fine ! thank you for your quick help\nMaybe you should add ffmpeg in the dependencies list in the debian install section. ",
    "rajinder-yadav": "I just updated, still same problem on saving!\nI was quick this time and keep the process before my system went foobar!. Thanks @phw that helped.\nI do not have /tmp mounted anywhere special. The only thing I noticed is my /var folder was low, other than this everything else seem fine space wise.\nThis is what I have, other than the tmpfs do you see anything off? FYI: I did clean up /var just now.\nsh\nvar: $ df -h\nFilesystem      Size  Used Avail Use% Mounted on\nudev            3.9G     0  3.9G   0% /dev\ntmpfs           799M  9.6M  789M   2% /run\n/dev/sdb2        47G  7.2G   38G  17% /\ntmpfs           3.9G  118M  3.8G   3% /dev/shm\ntmpfs           5.0M  4.0K  5.0M   1% /run/lock\ntmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup\n/dev/sdb1       226M  142M   69M  68% /boot\n/dev/sdb6        29G  2.9G   24G  11% /opt\n/dev/sdb5       4.6G  1.8G  2.6G  42% /var\n/dev/sdd6       165G   55G  102G  35% /mnt/karma-home\n/dev/sdb7       170G  133G   29G  83% /home\ntmpfs           799M     0  799M   0% /run/user/118\ntmpfs           799M   16K  799M   1% /run/user/1000\n. Yes I did.\nsh\n$ dpkg -s peek\nPackage: peek\nStatus: install ok installed\nPriority: optional\nSection: video\nInstalled-Size: 380\nMaintainer: Philipp Wolfer <ph.wolfer@gmail.com>\nArchitecture: amd64\nVersion: 0.8.0\nDepends: libgtk-3-0 (>= 3.14), libglib2.0-0 (>= 2.38), ffmpeg, imagemagick\nDescription: Peek - an animated GIF recorder. I purged the PPA and went with the Ubuntu PPA from the readme, I not have peek 0.9.1, will see if it still hangs my systems.. ",
    "Prior99": "I am experiencing the same problem on Arch Linux using i3.. @phw sad, but thanks. . ",
    "daiyi": "@phw oh nice! In the next release? I'm using peek 0.9.1\nI am indeed getting a notification when \"Open file manager after saving\" is off.\n. This is my inxi -G info:\nGraphics:  Card-1: Intel 3rd Gen Core processor Graphics Controller\n           Card-2: NVIDIA GF117M [GeForce 610M/710M/810M/820M / GT 620M/625M/630M/720M]\n           Display Server: X.Org 1.18.3 drivers: intel (unloaded: fbdev,vesa) FAILED: nouveau\n           Resolution: 1920x1080@60.00hz\n           GLX Renderer: Mesa DRI Intel Ivybridge Mobile\n           GLX Version: 3.0 Mesa 11.2.0\nI can't find information about Cinnamon's 2D mode. What is that? How can I tell if I'm using it?\nI'm now using peek 1.0.3 and I still can't click through ):\n\n. ",
    "xstable": "This command convert -set delay 15 -layers Optimize peekEZC8WY.avi peekEZC8WY.gif works... also under a minute.. Last record worked like a charm now on Manjaro-Linux.. I'm currently on 1.2.1 and a short gif-screencast (with FPS 10) was freezing my i7 (12GB RAM) for > 5 Minutes (before I hardreset).\nFrom which Version does the ffmpg hack work?. OK, yes, seems to work.\nSo please make ffmpeg as default, so that there is no need to set the Env-Variable for ffmpeg. So please add a kind of garbage collector.\nMeans on peek startup, check if there are .pam-cache-files which cause from interupted previous sessions, and if yes... remove them.. ",
    "brw": "Exact issue here on both 1.0.0 and the latest master. It worked fine two weeks ago. . OS: Arch Linux\nImageMagick version: 6.9.8.0-1\n\u276f uname -a\nLinux bacon 4.10.2-1-ARCH #1 SMP PREEMPT Mon Mar 13 17:13:41 CET 2017 x86_64 GNU/Linux\nLog: http://pastebin.com/DQPBTHeH. Recorded almost my whole screen (1700x700 or something), tried it a few times with a duration of 15 seconds up to a minute, my system does start swapping.\nBut yea, didn't think of just making it smaller or shorter, works fine that way now, so it's just the conversion my 8GB of RAM is not able to handle \u00af_(\u30c4)_/\u00af.\nI did have the issue of it not stopping with converting at all at first (not even after having waited for 30 minutes for a very short recording, basically freezing my system) but it looks like I might have accidentally used the latest release instead of the latest master when I thought I wasn't, so that doesn't seem to be a problem anymore.. ",
    "luong-komorebi": "I can confirm this issue on Xubuntu 16.04.2 and latest version of Peek. ",
    "ciscorucinski": "This is much needed! This is by far the best screen recorder that I have found.  Would love to use this instead of anything else.\nFor some reason, SimpleScreenRecorder will not record the screen but will record the audio. Peek will record the screen but not the audio.. ",
    "ghost": "-Yes.screenshot from the previous version\n-1.0.0 I've installed\n-does not save as an animated GIF\n-the GIF does not appear in the saved location that you register\n. -Version: Ubuntu 16.4\nVersion: ImageMagick 6.8.9-9 Q16 x86_64 2017-03-14 http://www.imagemagick.org\nCopyright: Copyright (C) 1999-2014 ImageMagick Studio LLC\nFeatures: DPC Modules OpenMP\nDelegates: bzlib cairo djvu fftw fontconfig freetype jbig jng jpeg lcms lqr ltdl lzma openexr pangocairo png rsvg tiff wmf x xml zlib. ```\n(peek:4239): Gtk-DEBUG: Connecting to session manager\n (peek:4239): DEBUG: desktop-integration.vala:133: Desktop: Unity\n (peek:4239): DEBUG: application.vala:303: Decoration layout: menu:minimize,maximize,close\n (peek:4239): DEBUG: desktop-integration.vala:133: Desktop: Unity\n (peek:4239): DEBUG: application.vala:43: Loading local settings failed: Failed to open file './data/gschemas.compiled': open() failed: B\u00f6yle bir dosya ya da dizin yok\n** (peek:4239): DEBUG: application.vala:196: Changed keybinding_toggle_recording  => R\n (peek:4239): DEBUG: desktop-integration.vala:133: Desktop: Unity\n (peek:4239): DEBUG: utils.vala:68: Looking for executable ffmpeg (0): /usr/bin/ffmpeg\nUsing screen recorder backend ffmpeg\n (peek:4239): DEBUG: desktop-integration.vala:133: Desktop: Unity\n (peek:4239): DEBUG: recording-area.vala:38: Absolute recording area x: 614, y: 296, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4239): DEBUG: recording-area.vala:58: Clipped recording area x: 614, y: 296, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:69: Scaled recording area x: 614, y: 296, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:38: Absolute recording area x: 614, y: 296, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4239): DEBUG: recording-area.vala:58: Clipped recording area x: 614, y: 296, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:69: Scaled recording area x: 614, y: 296, w: 421, h: 275\n (peek:4239): DEBUG: application-window.vala:415: freeze_window_size w: 423, h: 313\n (peek:4239): DEBUG: recording-area.vala:38: Absolute recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4239): DEBUG: recording-area.vala:58: Clipped recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:69: Scaled recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:38: Absolute recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4239): DEBUG: recording-area.vala:58: Clipped recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:69: Scaled recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:38: Absolute recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4239): DEBUG: recording-area.vala:58: Clipped recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:69: Scaled recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:38: Absolute recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4239): DEBUG: recording-area.vala:58: Clipped recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:69: Scaled recording area x: 849, y: 285, w: 421, h: 275\n** (peek:4239): DEBUG: application-window.vala:333: Recording area: 849, 285, 421, 275\n** (peek:4239): DEBUG: utils.vala:23: Cache directory does already exist /home/...../.cache/peek\n** (peek:4239): DEBUG: utils.vala:38: Temp file: /home/...../.cache/peek/peek1ST4WY.pam\n (peek:4239): DEBUG: recording-area.vala:38: Absolute recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4239): DEBUG: recording-area.vala:58: Clipped recording area x: 849, y: 285, w: 421, h: 275\n (peek:4239): DEBUG: recording-area.vala:69: Scaled recording area x: 849, y: 285, w: 421, h: 275\nffmpeg version 2.8.11-0ubuntu0.16.04.1 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 5.4.0 (Ubuntu 5.4.0-6ubuntu1~16.04.4) 20160609\n  configuration: --prefix=/usr --extra-version=0ubuntu0.16.04.1 --build-suffix=-ffmpeg --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --cc=cc --cxx=g++ --enable-gpl --enable-shared --disable-stripping --disable-decoder=libopenjpeg --disable-decoder=libschroedinger --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzvbi --enable-openal --enable-opengl --enable-x11grab --enable-libdc1394 --enable-libiec61883 --enable-libzmq --enable-frei0r --enable-libx264 --enable-libopencv\n  WARNING: library configuration mismatch\n  avcodec     configuration: --prefix=/usr --extra-version=0ubuntu0.16.04.1 --build-suffix=-ffmpeg --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --cc=cc --cxx=g++ --enable-gpl --enable-shared --disable-stripping --disable-decoder=libopenjpeg --disable-decoder=libschroedinger --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzvbi --enable-openal --enable-opengl --enable-x11grab --enable-libdc1394 --enable-libiec61883 --enable-libzmq --enable-frei0r --enable-libx264 --enable-libopencv --enable-version3 --disable-doc --disable-programs --disable-avdevice --disable-avfilter --disable-avformat --disable-avresample --disable-postproc --disable-swscale --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libvo_aacenc --enable-libvo_amrwbenc\n  libavutil      54. 31.100 / 54. 31.100\n  libavcodec     56. 60.100 / 56. 60.100\n  libavformat    56. 40.101 / 56. 40.101\n  libavdevice    56.  4.100 / 56.  4.100\n  libavfilter     5. 40.101 /  5. 40.101\n  libavresample   2.  1.  0 /  2.  1.  0\n  libswscale      3.  1.101 /  3.  1.101\n  libswresample   1.  2.101 /  1.  2.101\n  libpostproc    53.  3.100 / 53.  3.100\nInput #0, x11grab, from ':0+849,285':\n  Duration: N/A, start: 1489739408.335988, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 421x275, 12 fps, 12 tbr, 1000k tbn, 12 tbc\nOutput #0, rawvideo, to '/home/...../.cache/peek/peek1ST4WY.pam':\n  Metadata:\n    encoder         : Lavf56.40.101\n    Stream #0:0: Video: pam, rgb24, 210x137, q=2-31, 200 kb/s, 12 fps, 12 tbn, 12 tbc\n    Metadata:\n      encoder         : Lavc56.60.100 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\n[swscaler @ 0x2092b60] Warning: data is not aligned! This can lead to a speedloss\n (peek:4239): DEBUG: base-screen-recorder.vala:39: Recording stopped91.8kbits/s  \nframe=   65 fps= 12 q=-0.0 Lsize=    5483kB time=00:00:05.41 bitrate=8291.8kbits/s  \nvideo:5483kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\n (peek:4239): DEBUG: command-line-screen-recorder.vala:29: Recorder process closed\n (peek:4239): DEBUG: command-line-screen-recorder.vala:33: recording process exited, term_sig: 0, exit_status: 0, success: true\n (peek:4239): DEBUG: Temporary file /home/...../.cache/peek/peek1ST4WY.pam, 5614245 bytes\n (peek:4239): DEBUG: base-screen-recorder.vala:46: Started post processing\n (peek:4239): DEBUG: utils.vala:23: Cache directory does already exist /home/...../.cache/peek\n** (peek:4239): DEBUG: utils.vala:38: Temp file: /home/...../.cache/peek/peekJG6SWY.gif\n (peek:4239): DEBUG: imagemagick-post-processor.vala:36: Running ImageMagick convert, saving to /home/...../.cache/peek/peekJG6SWY.gif\n (peek:4239): DEBUG: utils.vala:23: Cache directory does already exist /home/...../.cache/peek\n (peek:4239): DEBUG: application-window.vala:479: Showing file chooser\nconvert: NegativeOrZeroImageSize /home/...../.cache/peek/peek1ST4WY.pam' @ error/pnm.c/ReadPNMImage/415.\nconvert: no images defined/home/...../.cache/peek/peekJG6SWY.gif' @ error/convert.c/ConvertImageCommand/3210.\nError: Child process exited with code 1\n (peek:4239): DEBUG: base-screen-recorder.vala:49: Finished post processing\nFile save error: Error when getting information for file '/home/...../.cache/peek/peekJG6SWY.gif': B\u00f6yle bir dosya ya da dizin yok\n** (peek:4239): DEBUG: application-window.vala:359: Deleting temp file file:///home/...../.cache/peek/peekJG6SWY.gif\n** (peek:4239): DEBUG: application-window.vala:423: unfreeze_window_size w: 423, h: 313\nTemp file delete error: Error removing file: B\u00f6yle bir dosya ya da dizin yok\n```. @phw  Yes. let's test it.. Peek 1.0.1\n\n.......... ~ $ G_MESSAGES_DEBUG=all peek\n(peek:4200): Gtk-WARNING : Theme parsing error: xfce.css:17:22: Not a valid image\n(peek:4200): Gtk-DEBUG: Connecting to session manager\n (peek:4200): DEBUG: desktop-integration.vala:140: Desktop: X-Cinnamon\n (peek:4200): DEBUG: application.vala:303: Decoration layout: menu:minimize,maximize,close\n (peek:4200): DEBUG: desktop-integration.vala:140: Desktop: X-Cinnamon\n (peek:4200): DEBUG: application.vala:43: Loading local settings failed: Failed to open file './data/gschemas.compiled': open() failed: B\u00f6yle bir dosya ya da dizin yok\n (peek:4200): DEBUG: application.vala:196: Changed keybinding_toggle_recording  => R\n (peek:4200): DEBUG: desktop-integration.vala:140: Desktop: X-Cinnamon\n (peek:4200): DEBUG: utils.vala:68: Looking for executable ffmpeg (0): /usr/bin/ffmpeg\nUsing screen recorder backend ffmpeg\n(peek:4200): Gtk-WARNING : Theme parsing error: xfce.css:17:22: Not a valid image\n (peek:4200): DEBUG: desktop-integration.vala:140: Desktop: X-Cinnamon\n (peek:4200): DEBUG: recording-area.vala:38: Absolute recording area x: 492, y: 346, w: 456, h: 229\n (peek:4200): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4200): DEBUG: recording-area.vala:58: Clipped recording area x: 492, y: 346, w: 456, h: 229\n (peek:4200): DEBUG: recording-area.vala:69: Scaled recording area x: 492, y: 346, w: 456, h: 229\n (peek:4200): DEBUG: recording-area.vala:38: Absolute recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4200): DEBUG: recording-area.vala:58: Clipped recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:69: Scaled recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: application-window.vala:410: freeze_window_size w: 500, h: 300\n (peek:4200): DEBUG: recording-area.vala:38: Absolute recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4200): DEBUG: recording-area.vala:58: Clipped recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:69: Scaled recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:38: Absolute recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4200): DEBUG: recording-area.vala:58: Clipped recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:69: Scaled recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:38: Absolute recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4200): DEBUG: recording-area.vala:58: Clipped recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:69: Scaled recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:38: Absolute recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4200): DEBUG: recording-area.vala:58: Clipped recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:69: Scaled recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: application-window.vala:328: Recording area: 492, 356, 456, 219\n** (peek:4200): DEBUG: utils.vala:23: Cache directory does already exist /home/.../.cache/peek\n** (peek:4200): DEBUG: utils.vala:38: Temp file: /home/.../.cache/peek/peekHBFUXY.pam\n (peek:4200): DEBUG: recording-area.vala:38: Absolute recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:4200): DEBUG: recording-area.vala:58: Clipped recording area x: 492, y: 356, w: 456, h: 219\n (peek:4200): DEBUG: recording-area.vala:69: Scaled recording area x: 492, y: 356, w: 456, h: 219\nffmpeg version 2.8.11-0ubuntu0.16.04.1 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 5.4.0 (Ubuntu 5.4.0-6ubuntu1~16.04.4) 20160609\n  configuration: --prefix=/usr --extra-version=0ubuntu0.16.04.1 --build-suffix=-ffmpeg --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --cc=cc --cxx=g++ --enable-gpl --enable-shared --disable-stripping --disable-decoder=libopenjpeg --disable-decoder=libschroedinger --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzvbi --enable-openal --enable-opengl --enable-x11grab --enable-libdc1394 --enable-libiec61883 --enable-libzmq --enable-frei0r --enable-libx264 --enable-libopencv\n  WARNING: library configuration mismatch\n  avcodec     configuration: --prefix=/usr --extra-version=0ubuntu0.16.04.1 --build-suffix=-ffmpeg --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --cc=cc --cxx=g++ --enable-gpl --enable-shared --disable-stripping --disable-decoder=libopenjpeg --disable-decoder=libschroedinger --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzvbi --enable-openal --enable-opengl --enable-x11grab --enable-libdc1394 --enable-libiec61883 --enable-libzmq --enable-frei0r --enable-libx264 --enable-libopencv --enable-version3 --disable-doc --disable-programs --disable-avdevice --disable-avfilter --disable-avformat --disable-avresample --disable-postproc --disable-swscale --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libvo_aacenc --enable-libvo_amrwbenc\n  libavutil      54. 31.100 / 54. 31.100\n  libavcodec     56. 60.100 / 56. 60.100\n  libavformat    56. 40.101 / 56. 40.101\n  libavdevice    56.  4.100 / 56.  4.100\n  libavfilter     5. 40.101 /  5. 40.101\n  libavresample   2.  1.  0 /  2.  1.  0\n  libswscale      3.  1.101 /  3.  1.101\n  libswresample   1.  2.101 /  1.  2.101\n  libpostproc    53.  3.100 / 53.  3.100\nInput #0, x11grab, from ':0+492,356':\n  Duration: N/A, start: 1490772887.122198, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 456x219, 15 fps, 15 tbr, 1000k tbn, 15 tbc\nOutput #0, rawvideo, to '/home/.../.cache/peek/peekHBFUXY.pam':\n  Metadata:\n    encoder         : Lavf56.40.101\n    Stream #0:0: Video: pam, rgb24, 228x109, q=2-31, 200 kb/s, 15 fps, 15 tbn, 15 tbc\n    Metadata:\n      encoder         : Lavc56.60.100 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nframe=   10 fps=0.0 q=-0.0 size=     729kB time=00:00:00.66 bitrate=8954.3kbits/frame=   18 fps= 17 q=-0.0 size=    1312kB time=00:00:01.20 bitrate=8954.3kbits/frame=   26 fps= 16 q=-0.0 size=    1895kB time=00:00:01.73 bitrate=8954.3kbits/frame=   34 fps= 16 q=-0.0 size=    2478kB time=00:00:02.26 bitrate=8954.3kbits/frame=   42 fps= 16 q=-0.0 size=    3061kB time=00:00:02.80 bitrate=8954.3kbits/frame=   50 fps= 16 q=-0.0 size=    3644kB time=00:00:03.33 bitrate=8954.3kbits/frame=   58 fps= 16 q=-0.0 size=    4226kB time=00:00:03.86 bitrate=8954.3kbits/frame=   66 fps= 15 q=-0.0 size=    4809kB time=00:00:04.40 bitrate=8954.3kbits/ (peek:4200): DEBUG: base-screen-recorder.vala:39: Recording stopped\nframe=   67 fps= 15 q=-0.0 Lsize=    4882kB time=00:00:04.46 bitrate=8954.3kbits/s  \nvideo:4882kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\n (peek:4200): DEBUG: command-line-screen-recorder.vala:29: Recorder process closed\n (peek:4200): DEBUG: command-line-screen-recorder.vala:33: recording process exited, term_sig: 0, exit_status: 0, success: true\n (peek:4200): DEBUG: Temporary file /home/.../.cache/peek/peekHBFUXY.pam, 4999473 bytes\n (peek:4200): DEBUG: base-screen-recorder.vala:46: Started post processing\n (peek:4200): DEBUG: utils.vala:23: Cache directory does already exist /home/.../.cache/peek\n** (peek:4200): DEBUG: utils.vala:38: Temp file: /home/.../.cache/peek/peekGYFJXY.gif\n** (peek:4200): DEBUG: utils.vala:23: Cache directory does already exist /home/.../.cache/peek\n (peek:4200): DEBUG: imagemagick-post-processor.vala:34: Running ImageMagick convert, saving to /home/.../.cache/peek/peekGYFJXY.gif, using temporary path /home/.../.cache/peek\nconvert: NegativeOrZeroImageSize /home/.../.cache/peek/peekHBFUXY.pam' @ error/pnm.c/ReadPNMImage/415.\nconvert: no images defined/home/.../.cache/peek/peekGYFJXY.gif' @ error/convert.c/ConvertImageCommand/3210.\n (peek:4200): DEBUG: application-window.vala:474: Showing file chooser\nError: Child process exited with code 1\n (peek:4200): DEBUG: base-screen-recorder.vala:49: Finished post processing\n (peek:4200): DEBUG: application-window.vala:476: Selected file file:///home/.../Videolar/Peek%202017-03-29%2010-34.gif\nFile save error: Error when getting information for file '/home/.../.cache/peek/peekGYFJXY.gif': B\u00f6yle bir dosya ya da dizin yok\n** (peek:4200): DEBUG: application-window.vala:354: Deleting temp file file:///home/.../.cache/peek/peekGYFJXY.gif\n** (peek:4200): DEBUG: application-window.vala:418: unfreeze_window_size w: 500, h: 300\nTemp file delete error: Error removing file: B\u00f6yle bir dosya ya da dizin yok\n. @CasperHK i agree with you.that's more like it .. ",
    "johannesE": "I am pretty sure that I have the same problem. The gif is just not saved. No error message or anything.. @phw That is possible, even though I don't see any resource spikes during the render phase. What I found out yesterday is that gifs are not made for large images and if I set the resolution downsampling on my 4k display to at least 2, everything works as expected. Thank god, because there is no good alternative to peek. The simplicity is outstanding and I'm grateful for the work you put into it.\nI would still appreciate it if you could show me any kind of error message when I try to create a gif and something fails.. Great, thanks!. ",
    "JulianLai": "@phw \nI have to do it in terminal.\nThe desktop shortcut doesn't work.. @phw help?. @phw Yes, it works in termianl with GDK_BACKEND=x11, but the desktop shortcut shows the Wayland info dialog.. @phw \nIt works now, thanks.\nBy the way, it's my first time to try an arch base distro, do I have to reinstall the package from AUR everytime? Is there any other way to get the updates from git? It seems like yaourt -Syua won't get the updates from git.. @phw Can Pamac do that?. ",
    "GeneralBison": "I'm still getting this issue with the $HOME/.cache/peek path.\nUsing screen recorder backend gnome-shell\nRecording to file /home/mb/.cache/peek/peek7AOBYY.avi\nconvert-im6.q16: unable to get registry ID `cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted `/home/mb/.cache/peek/magick-7318Tr4HTGXvvg7f.pam' @ error/cache.c/OpenPixelCache/3945.\nError: Child process exited with code 1\nFile save error: Error when getting information for file \u201c/home/mb/.cache/peek/peekTV2BYY.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/mb/.cache/peek/peekTV2BYY.gif: No such file or directory. Disk space should not be an issue, I have 74GB free.\nI was able to get a gif recording by turning the resolution downsampling up.\nThis is on Ubuntu 17.04 Beta.. ",
    "brandonmp": "Same problem on ubuntu 17.04 stable, ~~but uninstalling & installing Peek nightly from the nightly PPA seemed to have fixed it.~~  [ETA: a few minutes later the problem came back.  Upon some testing it looks like recordings of a few seconds work fine,but anything longer throws errors below]\ndetails: \n20 GB of Ram and 27 GB of space available on /home partition. \nI just installed 17.04 yesterday in a clean install, but prior to that, Peek worked fine in 16.10. \nNot sure if graphics drivers matter here, but I'm on a GTX 960 so I tried both nouveau & nvidia drivers, same outcome (i think both output are the same, but included them anyway just in case).\nhere's the error output with Nouveau drivers:\n21:12:07:bmp:~ peek\nUsing screen recorder backend gnome-shell\nRecording to file /home/bmp/.cache/peek/peekD3VWYY.avi\nconvert-im6.q16: unable to get registry ID `cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted `/home/bmp/.cache/peek/magick-16485RML4f5yiaCMB.pam' @ error/cache.c/OpenPixelCache/3945.\nconvert-im6.q16: no images defined `/home/bmp/.cache/peek/peek9KGXYY.gif' @ error/convert.c/ConvertImageCommand/3258.\nError: Child process exited with code 1\nFile save error: Error when getting information for file \u201c/home/bmp/.cache/peek/peek9KGXYY.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/bmp/.cache/peek/peek9KGXYY.gif: No such file or directory\nand here's the output after switching to Nvidia drivers 375.39:\n21:14:28:bmp:~ peek\nUsing screen recorder backend gnome-shell\nRecording to file /home/bmp/.cache/peek/peekRQ4SYY.avi\nconvert-im6.q16: unable to get registry ID `cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted `/home/bmp/.cache/peek/magick-28623_9UPlVYVj9Ae.pam' @ error/cache.c/OpenPixelCache/3945.\nError: Child process exited with code 1\nFile save error: Error when getting information for file \u201c/home/bmp/.cache/peek/peekDS21YY.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/bmp/.cache/peek/peekDS21YY.gif: No such file or directory\n21:15:28:bmp:~\n. sure, thanks for looking into this @phw \n```\n\n$ convert -list resource\nResource limits:\n  Width: 16KP\n  Height: 16KP\n  Area: 128MP\n  Memory: 256MiB\n  Map: 512MiB\n  Disk: 1GiB\n  File: 768\n  Thread: 4\n  Throttle: 0\n  Time: unlimited\n```. \n",
    "seanh": "I think I've found the issue or at least a workaround. On my system /etc/ImageMagick-6/policy.xml contains:\n<policy domain=\"resource\" name=\"disk\" value=\"1GiB\"/>\nIf I change that to 10GiB then (so far) it seems to work again. I'm using the master branch built from source currently. However, Peek spends a very long time (minutes) in \"Rendering...\" so I wonder whether imagemagick's disk cache size limit is what changed, or whether that limit was always 1GB and something else changed that causes Peek to take a lot longer to render and create a much larger cache file.\n. $ convert -list resource\nResource limits:\n  Width: 16KP\n  Height: 16KP\n  Area: 128MP\n  Memory: 256MiB\n  Map: 512MiB\n  Disk: 10GiB\n  File: 768\n  Thread: 8\n  Throttle: 0\n  Time: unlimited\n(This is after I edited the imagemagick config file from 1gb to 10gb). Here's a screenshot of the web page I was recording:\n\nI don't think it's the colours of the web page or app, for example here's a recording of a different page in a different browser, same issue:\n\nHere's a recording made with peek --backend=ffmpeg, I think you can still see the same colour issue but it's much less bad, and the speeding up seems to be gone:\n\nI tried the avconv backend too, results look similar to ffmpeg.\nThanks for the link. Following the advice on the page you linked, if I set my framerate from 30 (which I had set it to) down to 15 and use the ffmpeg backend then I can get a GIF output with no visible problems:\n\n. Here's a webm video as requested (github won't let me upload it): https://www.dropbox.com/s/6h0mhl4q8vzwe3h/Peek%202017-03-22%2012-15.webm?dl=0\nThis was with the framerate set back up to 30 (so you can compare it to the early, problematic videos above) and with the default backend (no --backend arg passed to peek). Looks perfect.. I just double-checked that even with the framerate reduced to 15 the GIF output with the default backend is still very bad. To get a good GIF I need framerate down to 15 and ffmpeg backend. So that's what I'll do for now. Hi, I installed the daily PPA to try and test this for you but ran into another issue: https://github.com/phw/peek/issues/133. Stable version seems to have the same issue. Peek is unfortunately completely unusable for me now. Went back and tried versions 1.0.0 and 0.9.1 (building from source), also tried the flatpak, and each different --backend, all have the same problem.\nIt did work for me before yes, on this same system. I did recently upgrade to Ubuntu Gnome 17.04, maybe that caused it?\nLots of space left in my home (about 40GB).\nLeftover cache files:\n$ ls .cache/peek/\npeek7EDJYY.pam  peekIQ80XY.gif  peekMRGJXY.pam  peekYWYLXY.pam\n$ du -hs .cache/peek/*\n939M    .cache/peek/peek7EDJYY.pam\n1.1M    .cache/peek/peekIQ80XY.gif\n0       .cache/peek/peekMRGJXY.pam\n0       .cache/peek/peekYWYLXY.pam. Tried emptying out .cache/peek but that didn't help (same crash, and afterwards .cache/peek is still empty). ",
    "leethargo": "I have the same issue: On small/short recordings, everything works fine, but with larger animations, it spends 2-5 seconds in \"Rendering\", then the file does not show up. I the same resource limits for convert on Debian Stretch.. ",
    "dustinmoorenet": "on Ubuntu Gnome 17.04\nconvert -list resource\nResource limits:\n  Width: 16KP\n  Height: 16KP\n  Area: 128MP\n  Memory: 256MiB\n  Map: 512MiB\n  Disk: 1GiB\n  File: 768\n  Thread: 4\n  Throttle: 0\n  Time: unlimited\nI tried the workaround and it worked :tada: . Thanks @seanh  and @phw. yes, 10GiB. I didn't check to see if I could set it lower at like 5GiB.. I have the same problem. I am running Ubuntu Gnome 17.04 using the ubuntu ppa listed in installation guide. It is up to date.\nHere is the terminal output\nUsing screen recorder backend gnome-shell\nRecording to file /home/dustin/.cache/peek/peekRYHM1Y.avi\nconvert-im6.q16: unable to get registry ID `cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted `/home/dustin/.cache/peek/magick-2233MKAysxkgbSdt.pam' @ error/cache.c/OpenPixelCache/3945.\nconvert-im6.q16: no images defined `/home/dustin/.cache/peek/peekGXEQ1Y.gif' @ error/convert.c/ConvertImageCommand/3258.\nError: Child process exited with code 1\nFile save error: Error when getting information for file \u201c/home/dustin/.cache/peek/peekGXEQ1Y.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/dustin/.cache/peek/peekGXEQ1Y.gif: No such file or directory\nShorter GIFs create without problems.. ",
    "teletrail": "I'm also having this issue, have changed .cache/peek to have 777 permissions, didn't seem to help.\nrunning latest version from git, compiled following debian instructions.\nconvert -list resource\nResource limits:\n  Width: 16KP\n  Height: 16KP\n  Area: 128MP\n  Memory: 256MiB\n  Map: 512MiB\n  Disk: 1GiB\n  File: 768\n  Thread: 4\n  Throttle: 0\n  Time: unlimited\n\nffmpeg version 3.2.6-1+b3 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.3.0 (Debian 6.3.0-19) 20170618\n  configuration: --prefix=/usr --extra-version=1+b3 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\nInput #0, x11grab, from ':0+204,151':\n  Duration: N/A, start: 1500948969.825304, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1069x477, 10 fps, 10 tbr, 1000k tbn, 1000k tbc\nOutput #0, rawvideo, to '/home/preview/.cache/peek/peekNPX93Y.pam':\n  Metadata:\n    encoder         : Lavf57.56.101\n    Stream #0:0: Video: pam, rgb24, 1069x477, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.64.101 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nframe=  517 fps= 10 q=-0.0 Lsize=  772371kB time=00:00:51.70 bitrate=122384.2kbits/s speed=1.01x  \nvideo:772371kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nconvert-im6.q16: unable to get registry ID cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted/home/preview/.cache/peek/peekNPX93Y.pam' @ error/cache.c/OpenPixelCache/3945.\nconvert-im6.q16: no images defined `/home/preview/.cache/peek/peekPN5N3Y.gif' @ error/convert.c/ConvertImageCommand/3258.\nError: Child process exited with code 1\nFile save error: Error when getting information for file \u201c/home/preview/.cache/peek/peekPN5N3Y.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/preview/.cache/peek/peekPN5N3Y.gif: No such file or directory\n. ",
    "morsok": "Had the same issue, I can confirm that modifying the setting to 10gb works for me too. Previously it failed silently.. ",
    "ivoanjo": "Indeed, I had been bitten by this and had to use other tools for longer gifs, but I do prefer using Peek. It would be useful for peek at least to watch for any failures from convert and send users towards this report, as silently failing is very confusing (and frustrating).\nNevertheless, thanks for all your hard work on peek :D :+1: . ",
    "FelixDefrance": "Hi, I confirm, editing /etc/ImageMagick-6/policy.xml and set Disk to 10G work for me ;). ",
    "miili": "Same here, that's the workaround! @phw This should be mentioned in the README.md to be present on the landing page.. Did you add that string or modify that policy?. ",
    "Jokero": "Adding <policy domain=\"resource\" name=\"disk\" value=\"10GiB\"/> didn't help me. Ubuntu 16.04\nSo peek is totally useless now. I added it to /etc/ImageMagick-6/policy.xml. Maybe there is some difference between version for debian and ubuntu, because I didn't have initially this line with 1GiB:\n<policy domain=\"resource\" name=\"disk\" value=\"1GiB\"/>. @phw \n\nThe disk limit is not the only resource limit. Maybe more important is the memory limit. Please run convert -list resource to see the current limits on your system. Some examples show that the memory limit is set to 256 MB in many cases\n\n```sh\n$ convert -list resource\n  File       Area     Memory        Map       Disk   Thread  Throttle       Time\n\n768    16.56GB  7.7113GiB  15.423GiB      10GiB        4         0  unlimited\n```. It happens only when I try to record long video https://gist.github.com/Jokero/a06324c081ebd15973047e0b2b0b7b7f. @phw Development version works the same. But I totally agree with you that gif is not suited for long videos :+1: . ",
    "palyla": "I'm tested latest version. Problem still reproducing\nPS Sorry for formatting. I don't know how to do it correctly.\n\npalyla@spb-tmg-01:~$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Debian\nDescription:    Debian GNU/Linux 9.1 (stretch)\nRelease:        9.1\nCodename:       stretch\n`palyla@spb-tmg-01:~$ peek --backend=ffmpeg\n (peek:24295): WARNING : Binding 'R' failed!\nRequested screen recorder backend ffmpeg\n(peek:24295): Gtk-WARNING **: Theme parsing error: gtk.css:68:35: The style property GtkButton:child-displacement-x is deprecated and shouldn't be used anymore. It will be removed in a future version\n(peek:24295): Gtk-WARNING **: Theme parsing error: gtk.css:69:35: The style property GtkButton:child-displacement-y is deprecated and shouldn't be used anymore. It will be removed in a future version\nffmpeg version 3.2.7-1~deb9u1 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.3.0 (Debian 6.3.0-18) 20170516\n  configuration: --prefix=/usr --extra-version='1~deb9u1' --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\n[x11grab @ 0x5631cd3f8f00] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+375,70':\n  Duration: N/A, start: 1506434092.255643, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1031x780, 10 fps, 1000k tbr, 1000k tbn, 1000k tbc\nOutput #0, rawvideo, to '/home/palyla/.cache/peek/peekXXXXXX.pam':\n  Metadata:\n    encoder         : Lavf57.56.101\n    Stream #0:0: Video: pam, rgb24, 1031x780, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.64.101 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nRecording canceled with return code 0485kB time=00:00:08.00 bitrate=193008.3kbits/s speed=1.04x  \nframe=   86 fps= 10 q=-0.0 Lsize=  202621kB time=00:00:08.60 bitrate=193008.3kbits/s speed=1.02x  \nvideo:202621kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nffmpeg version 3.2.7-1~deb9u1 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.3.0 (Debian 6.3.0-18) 20170516\n  configuration: --prefix=/usr --extra-version='1~deb9u1' --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\n[x11grab @ 0x55f185152f00] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+408,39':\n  Duration: N/A, start: 1506434107.338632, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1031x780, 10 fps, 1000k tbr, 1000k tbn, 1000k tbc\nOutput #0, rawvideo, to '/home/palyla/.cache/peek/peekXXXXXX.pam':\n  Metadata:\n    encoder         : Lavf57.56.101\n    Stream #0:0: Video: pam, rgb24, 1031x780, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.64.101 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nPast duration 0.946999 too large  428803kB time=00:00:18.20 bitrate=193008.3kbits/s speed=1.02x  \nPast duration 0.999062 too large  445295kB time=00:00:18.90 bitrate=193008.3kbits/s dup=1 drop=0 speed=1.02x  \nframe=  196 fps= 10 q=-0.0 Lsize=  461787kB time=00:00:19.60 bitrate=193008.3kbits/s dup=1 drop=0 speed=1.01x  \nvideo:461787kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nconvert-im6.q16: unable to get registry ID cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted/home/palyla/.cache/peek/peekXXXXXX.pam' @ error/cache.c/OpenPixelCache/3945.\nError: \u0414\u043e\u0447\u0435\u0440\u043d\u0438\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043b\u0441\u044f \u0441 \u043a\u043e\u0434\u043e\u043c 1\nFile save error: \u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0444\u0430\u0439\u043b\u0435 \u00ab/home/palyla/.cache/peek/peekXXXXXX.gif\u00bb: \u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u0438\u043b\u0438 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430\nTemp file delete error: Error removing file /home/palyla/.cache/peek/peekXXXXXX.gif: \u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u0438\u043b\u0438 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430\npalyla@spb-tmg-01:~$ \npalyla@spb-tmg-01:~$ \npalyla@spb-tmg-01:~$ peek\n (peek:24550): WARNING : Binding 'R' failed!\nUsing screen recorder backend ffmpeg\n(peek:24550): Gtk-WARNING **: Theme parsing error: gtk.css:68:35: The style property GtkButton:child-displacement-x is deprecated and shouldn't be used anymore. It will be removed in a future version\n(peek:24550): Gtk-WARNING **: Theme parsing error: gtk.css:69:35: The style property GtkButton:child-displacement-y is deprecated and shouldn't be used anymore. It will be removed in a future version\nffmpeg version 3.2.7-1~deb9u1 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.3.0 (Debian 6.3.0-18) 20170516\n  configuration: --prefix=/usr --extra-version='1~deb9u1' --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\n[x11grab @ 0x5621d156ff00] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+408,39':\n  Duration: N/A, start: 1506434389.662479, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1031x780, 10 fps, 1000k tbr, 1000k tbn, 1000k tbc\nOutput #0, rawvideo, to '/home/palyla/.cache/peek/peekXXXXXX.pam':\n  Metadata:\n    encoder         : Lavf57.56.101\n    Stream #0:0: Video: pam, rgb24, 1031x780, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.64.101 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nframe=   72 fps= 10 q=-0.0 Lsize=  169636kB time=00:00:07.20 bitrate=193008.3kbits/s speed=1.03x  \nvideo:169636kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nffmpeg version 3.2.7-1~deb9u1 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.3.0 (Debian 6.3.0-18) 20170516\n  configuration: --prefix=/usr --extra-version='1~deb9u1' --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\n[x11grab @ 0x555caa01bf00] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+437,104':\n  Duration: N/A, start: 1506434452.741770, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1031x780, 10 fps, 1000k tbr, 1000k tbn, 1000k tbc\nOutput #0, rawvideo, to '/home/palyla/.cache/peek/peekXXXXXX.pam':\n  Metadata:\n    encoder         : Lavf57.56.101\n    Stream #0:0: Video: pam, rgb24, 1031x780, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.64.101 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nPast duration 0.852425 too large 1463112kB time=00:01:02.10 bitrate=193008.3kbits/s dup=44 drop=6 speed=   1x  \nframe=  658 fps= 10 q=-0.0 Lsize= 1550287kB time=00:01:05.80 bitrate=193008.3kbits/s dup=44 drop=42 speed=1.01x  \nvideo:1550287kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nconvert-im6.q16: unable to get registry ID cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted/home/palyla/.cache/peek/peekXXXXXX.pam' @ error/cache.c/OpenPixelCache/3945.\nconvert-im6.q16: no images defined /home/palyla/.cache/peek/peekXXXXXX.gif' @ error/convert.c/ConvertImageCommand/3258.\nError: \u0414\u043e\u0447\u0435\u0440\u043d\u0438\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043b\u0441\u044f \u0441 \u043a\u043e\u0434\u043e\u043c 1\nFile save error: \u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0444\u0430\u0439\u043b\u0435 \u00ab/home/palyla/.cache/peek/peekXXXXXX.gif\u00bb: \u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u0438\u043b\u0438 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430\nTemp file delete error: Error removing file /home/palyla/.cache/peek/peekXXXXXX.gif: \u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u0438\u043b\u0438 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430\npalyla@spb-tmg-01:~$. \n",
    "JasonLG1979": "\nPeek has an icon, and it should show up. You probably have to run gtk-update-icon-cache or restart the shell to see it (on Arch Linux gtk-update-icon-cache runs automatically after package installation and that usually does the trick).\n\nMust be a bug in the packaging. Neither gtk-update-icon-cache nor restarting the shell shows the icon.\n\nIf you want to give this a go I am more than happy to replace this icon .\n\nWhat did you have in mind style wise? Tango, flat?\n. Ok, weird. The icon finally showed up after 2 reboots.... ",
    "meetdilip": "How do you want the new icon to look like ? Any pointers ?. Forgot to mention. 100 % crafted by me. . Thanks. Where can I find \n\n/apps/com.uploadedlobster.peek.png\n. Is it possible have a name for icon that starts with peek  ? Would be easier to manage that way. \n\nPS : In Papirus, most icon names are just their app names. I am not sure why it is different in this case.. Just trying to explain my point. Please see how icons are named in the apps folder of Papirus\n\n. ",
    "bertob": "Hi, Tobias from the GNOME design team here.\nWe're working on a new icon style for GNOME, which will make it much easier to make app icons because it's simpler, more geometric, and there are fewer sizes. We will update all core GNOME apps' icons to the new style for 3.32 early next year, but some third-party apps are already starting to use them.\nIf you're interested in a new icon following the new guidelines I'd be happy to provide one.. @phw sure is. This is one of the ideas we've been playing with:\n\nI'm not super happy with the small text at the top, but I think as a direction it could work.. Ok, I think i found something that works:\n\nUnfortunately Github doesn't allow uploading SVG (which is seriously weird, especially given that it does allow PPTX), so I put the hicolor and symbolic in a zip\ncom.uploadedlobster.peek.zip\n. @phw yes, you don't need any PNGs.\nHave a look at this MR as an example of how they new icons are used: https://gitlab.gnome.org/GNOME/geary/merge_requests/63/diffs. @phw can you change my email to tbernard@gnome.org?\nAlso, the icon was a collaboration with @snwh, @jimmac, and @lapo, so not sure what the best way to attribute credit is.. Can we merge this? :). ",
    "baranpirincal": "Hey @phw , if you still need a logo design for Peek, I can help you. If you have an idea, feel free to share with me.. ",
    "spasarok": "Has this been resolved? I'm also having a problem with poor gif quality. My gifs are turning out grainy in some place and with green spots in others.\n\n. Makes sense, thanks for the response.. ",
    "ooduor": "@phw What arguments do I pass to reduce the frame rate? \nReducing the area of recording is tricky. I thought it was size since I was initially recording a web page of the HD monitor and now moved the page to the smaller laptop screener and the same persists.\nThanks for the quick response.. @phw Quick one, where to I specify these settings, like frame rate and scale factor?. @phw Oh, never mind. I have found it in preference menu.... ",
    "krychu90": "+1. ",
    "nebutron": "Haven't had a chance as I do need to use Peek during the week. I will try to get this tested this weekend and let you know. If not, I will let you know and you can close it.. That is good it's being looked into. Really need to have this working.\nAs for the size. I mention it in the sense that I know it is possible, but it isn't a software available for Linux so it isn't really comparable (also not open source).\nIt's called CloudApp (getcloudapp.com). It does a few things, but selecting an area, recording it (either as gif, or video) and then auto uploading with a link. All takes a few seconds.\nNow obviously the sizes do vary depending on how long, but I have downloaded quite a few of them to see the size and the largest was 30MB, but the average was 2MB.\nYour recording may be higher quality though (but I'd say hard to tell). So I think ultimately what I would like to see would be a quality option. Turn it down kind of thing to be faster or higher quality.\n(getting off topic now I suppose). Does the same issue occur on the non developer version? Heavy system use and all that? As you know, I started another ticket for the regular version about it not launching. If I can get it working, just curious if it has the same problem here.. Thanks. I will keep using this version then.\nI hope it can be fixed soon-ish :) . ",
    "diwu1989": "When the convert command is called, i think we should be passing in memory limit to be a sane amount, such as 64MB\nsee documentation on -limit\nhttp://www.imagemagick.org/script/command-line-options.php#limit\nhttps://github.com/phw/peek/blob/c0300fd72400347624234fb2d40bc26c0bf99daa/src/post-processing/imagemagick-post-processor.vala#L38-L42. Right, as long as it doesn't eat up 4GB on a machine that only has 8GB of ram, thanks\nI also wonder if we can tell Imagemagick to be more lazy about optimization, I don't necessarily care as much about the file size, but more about the speed.\nGraphicmagick might also be a good alternative to imagemagick for performance speedup. ffmpeg is way better, please switch to using it for default!\nas for quality, we can tune ffmpeg configs later for that, really just care about stability and performance first.. ",
    "pohmelie": "This is huge problem, and should be fixed with highest priority. Cause app became unusable. My ubuntu freeze for more than 10 minutes and it looks like it wont stop soon.. ",
    "RobertMatkulcik": "Same problem here.... ",
    "trelemar": "Stopped using Peek because of this. Sorry devs, my computer freezes if I record a gif > 30 fps and longer than like 8 seconds. . ",
    "jsoftwareengineering": "Another part of this issue is that the user doesn't get any visual feedback about what the state of the program is. \nFor example, I think I closed peek before it was done saving some larger gifs since I didn't know it was still doing something. Perhaps some kind of animation could play while one should be waiting (like this saving gif which I found using a google image search and so probably couldn't be used). \nIf you are interested in pursuing this, I could make something that you can use or you could likely find something with a clear and free license.  . ",
    "dessalines": "Same problem here. \n. ",
    "luizrogeriocn": "I tested with the daily PPA using PEEK_POSTPROCESSOR=ffmpeg and it worked, although it got a bit laggy during the convert phase.\nBefore using that, the convert phase would just freeze everything and I had to force reset the system.. ",
    "chanoch": "Changing profile.xml to allow a file size limit of 10GiB instead of 1GiB also worked when changing the color profile of an image from RGB to CMYK btw. . ",
    "Moini": "Thank you! \nAdditional info that may help with reproducing: I'm using the Xfce desktop, and it's actually LM 18.1 (always forget...). Just tested again to make sure it's consistent (it is). Also tested with other programs (e.g. Thunderbird). As soon as I do no longer actively hold down a mouse button, focus goes to the peek window (can be identified by the active window listing in the task bar).. In case it's important: \nSettings in Xfce settings manager for Window behaviour specifics (sorry, no idea what it's in English, German interface here): \n- prevent loss of focus and \n- take normal ICCCM focus hint into account\nare checked.\n(unchecking 'prevent loss of focus' doesn't make a difference (rebooted)). Thank you very much for this thorough testing, @phw .\nCan you think of anything that I could try to help figure out the issue?\n(just tried the Windows method: uninstall/reinstall, and even purge - but didn't help, either)\nE.g. is it possible to somehow log what's happening?\nIt might be that it's due to some older component on my system - I had upgraded from the previous LTS version (last year), and who knows what that did... It certainly didn't go 100% smooth.\nDid you also get any key-mon warnings, like this:\n\"/usr/local/lib/python2.7/dist-packages/keymon/shaped_window.py:78: Warning: Source ID 323 was not found when attempting to remove it\"\n  gobject.source_remove(self.timeout_timer)\n. Ha - you're right, thank you, phw! \nI had a self-compiled version (with some fixes that made the click indicator more stable and something that was specifically changing settings for my keyboard) installed, long ago, I now remember.\nI had thought that the later version would have superseded the old one, but obviously, that wasn't the case. \nUnfortunately that crazy click-indicator-doesn't-go-away-if-I-click-and-drag issue in key-mon is back now, and the focus issue is still there, but it's inconsistent now. It seems to be dependent on click-drag, timing and other mouse movements... When I change the mouse position, and click in a different place, focus goes to peek. When I only click in the same position, focus stays in clicked window.\nBut if I disable the 'highly visible click' in key-mon settings, then it works as expected! I liked the click-indicator, but it's less important than the focus for keyboard shortcuts. Clicks will still show in the mouse symbol.\n(I'd be curious if you can reproduce the inconsistent behaviour with the highly-visible click turned on - maybe that steals focus temporarily and doesn't return it to the correct window that had it before... But that would be a key-mon issue, not a peek issue, I guess).. No output of 'journalctl -f' during test.\nJust for completeness, a gif (look at task bar and mouse indicator to see what happens with focus and clicks):\n\nProbably, this can be closed? I assume it's more of an issue with key-mon... :-/\n. Thank you for all your help with this - you helped even though it turned out to not be related to peek. If you ever need any help with Inkscape, please let me know :). Yes, that will be helpful. Sometimes, due to other people also working on my computer, I only have very little disk memory left, and if I record anything where the cache file exceeds this remainder, I might run into difficulties.. Solved it with a symlink to from /home/username/.cache/peek to /tmp - worked for me.. Thank you, @phw !. Great, thank you, @phw !. Works with gifski 0.8.2 from https://gif.ski/. Updating to gifski 0.8.2 from https://gif.ski/ solved the issue for me.. ",
    "Lenbok": "I have the same problem of not being able to interact with the apps underneath peek. In my case I do not use key-mon, but I do use focus-follows-mouse in my window manager (window maker with compton). Peek is constantly on top, grabbing focus so there is no way to interact with the underlying apps that I am wanting to record. If I use alt-tab to select the underlying app, peek re-pushes itself to top, re-grabbing the focus.\nShould I file a separate issue?\n. ",
    "Tiagojdferreira": "I haven't use peek in a while as I haven't done any tutorials lately, so I don't remember the exact use case. Given that I love shortcuts, I am sure that the minimize button wouldn't cut it. People who start using an app a lot always prefer a keyboard shortcut. I think adding a new button to do it in the UI is always a great idea (to show new users the functionality), that shows a small description and the keyboard shortcut on hover.. ",
    "aryasenna": "Okay, but I have gstreamer1-plugins-bad-freeworld installed already.\nAnyhow, adding the -b ffmpeg works but with a warning:\n[swscaler @ 0x1292900] Warning: data is not aligned! This can lead to a speedloss\nThe resulting mp4 file seems to be fine.\nI guess I'll modify the desktop file to include the flag and re-modify it on every update for now.\nThanks! I think it's fine to close the issue?. Sure, here you go.\n[me@localhost ~] $ peek\nUsing screen recorder backend gnome-shell\nRecording to file /home/me/.cache/peek/peekWBKOYY.mp4\n^C\n[me@localhost ~] $ journalctl -f\nApr 16 15:23:31 localhost org.gnome.Shell.desktop[5568]: Recording to /home/me/.cache/peek/peekWBKOYY.mp4\nApr 16 15:23:31 localhost gnome-shell[5568]: Error in recording pipeline: Can not initialize x264 encoder.\nApr 16 15:23:31 localhost gnome-shell[5568]: recorder_record_frame: assertion 'recorder->current_pipeline != NULL' failed\nApr 16 15:23:33 localhost gnome-shell[5568]: shell_recorder_close: assertion 'recorder->state != RECORDER_STATE_CLOSED' failed\n. You're welcome. I'll let the issue open, till then, I guess.. Interesting. I am not familiar enough with the x264 encoder to file a bug report. But I recall \"ugly\" means that package is not distributed by Fedora Projects. \nA quick Google search seems to point into rpmfusion (http://download1.rpmfusion.org/free/fedora/releases/25/Everything/x86_64/os/repoview/gstreamer-plugins-ugly.html), and FWIW I use the one from negativo17: https://github.com/negativo17/gstreamer1-plugins-ugly\nPerhaps before the x264 encoder is fixed, as a workaround Fedora build should depend on ffmpeg by default?\n. Sorry I have been away for quite a while. Just upgraded to Fedora 26 and this issue is no longer reproducible. Not sure if's due to change in Fedora or fix on #141 as you suggested.\nSo I think it's safe to close this issue..?\nP.s. any plan to make Peek works in Wayland?. ",
    "sQVe": "I for one, and many others (especially Arch users), need this option heavily as it is quite common that $HOME/.cache is tmpfs. My setup for $HOME/.cache is: /home/sqve/.cache tmpfs noatime,nodev,nosuid,size=500M.\nThis makes peek crash, really quick, when 500MB is used. Adding a option or a environment variable to set the cache directory would solve this.. @phw I'd love to create a patch but I'm very unfimiliar with Vala and don't have much spare time to play around with. I do not agree that the setup defeats the purpose of a cache directory though. The idea about having it in tmpfs is that it is way faster, saves writes to SSD and it is cleared on reboot etc. The only application that has had problems with this, and the limit of 500MB, is in fact peek, and I've been running this setup for 4+ years.. @phw Yeah I fully agree that this setup is somewhat unusual. I'm fully aware on what this setup does and those are the reasons I run my setup like this. I prefer having my cache set for only one specific session, which I haven't had a problem with until now.\nUsing a symlink is a great suggestion. I will try that and see it that makes a difference. :beers: . @phw That did not make a difference. I still get the following:\n```\n% peek                                                                                 \nUsing screen recorder backend ffmpeg\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\n[x11grab @ 0x555c96faab00] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+1286,829':\n  Duration: N/A, start: 1509094297.797364, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1268x605, 10 fps, 1000k tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nOutput #0, rawvideo, to '/home/sqve/.cache/peek/peekK26U8Y.pam':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: pam, rgb24, 1268x605, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 pam\nframe=   50 fps= 10 q=-0.0 Lsize=  112377kB time=00:00:05.00 bitrate=184118.7kbits/s speed=1.04x  \nvideo:112377kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nInput #0, image2, from '/home/sqve/.cache/peek/peekK26U8Y.pam':\n  Duration: 00:00:00.04, start: 0.000000, bitrate: 23014840 kb/s\n    Stream #0:0: Video: pam, rgb24, 1268x605, 25 tbr, 25 tbn, 25 tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (pam (native) -> png (native))\nPress [q] to stop, [?] for help\nOutput #0, image2, to '/home/sqve/.cache/peek/peekJ7748Y.png':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: png, rgba, 16x16 [SAR 1:1 DAR 1:1], q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 png\nframe=    0 fps=0.0 q=0.0 Lsize=N/A time=00:00:00.00 bitrate=N/A speed=   0x  \nvideo:0kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\nOutput file is empty, nothing was encoded (check -ss / -t / -frames parameters if used)\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nInput #0, image2, from '/home/sqve/.cache/peek/peekK26U8Y.pam':\n  Duration: 00:00:00.04, start: 0.000000, bitrate: 23014840 kb/s\n    Stream #0:0: Video: pam, rgb24, 1268x605, 25 tbr, 25 tbn, 25 tbc\n/home/sqve/.cache/peek/peekJ7748Y.png: Invalid data found when processing input\nError: Child process exited with code 1\nFile save error: Error when getting information for file \u201c/home/sqve/.cache/peek/peekPQVO8Y.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/sqve/.cache/peek/peekPQVO8Y.gif: No such file or directory\n```. @phw Symlinking is working like a charm. I suggest closing this issue.\n198 is the exact issue I was having. When reverting back to AUR peek package instead of peek-git everything works like it should.. I have this exact issue too. Going from AUR package peek-git to peek (which is version 1.1.0) solves the issue.. @gort818 I'm not using a DE. I only use i3 as a window manager.. I cannot get this to work. The instructions are a bit fuzzy, what do you exactly mean by \"stack it with the intended window\"?. I'm not getting it to click through eventhough I'm floating both windows with peek on top. I'm also having issues with the tmp file having no content in it when I use i3.. I can now confirm that using either stacked, tabbed or floating both windows (peek and the window to be recorded) in i3 is working to record with peek :+1:.. @phw That is correct. There are plenty of different ways for it to work with i3. :+1:.",
    "pleabargain": "Hi you said\n\nYou should be able to grab the top edge, make the window smaller in height, than pull it up until you see the bottom corner again.\n\nbut that is exactly what I cannot do... :(\nre: monitor:\nI have two monitors. One IS larger than the other. HTH.\n. This is no longer an issue in Peek 1.3.1\nthank you\n. ",
    "VxMxPx": "That's great. I'm glad you did it like this. I agree about dialogs.\nI absolutely love this app btw ;). ",
    "harryyuanfeng": "journalctl -f\nNo journal files were found.\nhere is output when a start peek.\npeek -b ffmpeg\nRequested screen recorder backend ffmpeg\nError: Failed to execute child process \"ffmpeg\" (No such file or directory)\nthis is what I got with peek -b ffmpeg. Thanks, that was the problem.. ",
    "peteruithoven": "@phw I've been a bit bold and opened a issue on the second blocker you mentioned, there has been a respond there that might be of interest to you.\nhttps://github.com/elementary/houston/issues/544#issuecomment-331938507. I also like the visual style of screenkey, but is has worked very unstable for me. . Good point: https://github.com/wavexx/screenkey/issues/43, https://github.com/wavexx/screenkey/issues/18. Also see: https://github.com/phw/peek/issues/125. ",
    "vadi2": "ffmpeg.. ",
    "psychon": "\nI remember this was quite some trial and error based on some (maybe not so good example) until this worked as I wanted it.\n\nRule of thumb: Shapes can only make a pixel fully transparent or opaque. If you want some partial transparency, then it's not helping you. So the count down in https://raw.githubusercontent.com/phw/peek/master/data/screenshots/peek-recording-itself.gif \"should not work\" with the shapes (it looks half-see-through, for that you really need a compositing manager and an ARGB visual).\nFeel free to ping me if these changes broke anything and people start complaining. :-). > Without compositing I sometimes had some rendering artifacts of the window border left over outside the window after resizing (tested on XFCE). \nHm. Really just rendering artifacts or could it be that the region used for the shape was mis-computed? In the latter case, this could be a bug that also affects the input region (i.e.: What if those pixels were not click-through?). If it is really just an artifact, then... dunno. Once upon a time I managed to run into a bug in Xorg with shapes....\nBesides that: Looks good to me. Hopefully people without a compositing manager will now be more happy with peek. :-). > When the fallback app menu is used and no compositing is available (which is not unlikely to happen together) the app menu dropdown renders with a black background, \nWell, doesn't this indicate that the input region is also \"a bit off\" in this case? Those black pixels would \"eat\" clicks as well instead of passing them on to whatever is below. But yeah, I guess that this is not really \"that bad\".. (awesome 3 ignores the SHAPE extension as well, so what you are seeing is: Peek's window has a shape so does not draw \"in the middle\", but awesome's frame window does not have a shape. The result is that whatever happens to be visible in there before the switch to another tag stays visible. Try running xeyes in awesome 3, the result is quite ugly. ;-) ). @jwhendy: What's your openbox version? I didn't really check, but at least openbox does something with shaped windows: http://sources.debian.net/src/openbox/3.4.11.1-1/openbox/client.h/#L251\nEdit: And does xeyes work as expected?. Ahhh... I was looking for such a file (I failed to find the definitions of the various widget), but I was looking only inside of src/ui/. This explains why I did not see it. :-). ",
    "jwhendy": "Just found peek and then wondered why I just had a black window on openbox! I replaced my install with peek-git, and while this works much better, I get similar results to the descriptions above for awesome < 4.\nI realize this a closed PR, but wanted to add the results of another non-compositing window manager for reference (since it wasn't mentioned).. $ openbox --version\nOpenbox 3.6.1\nAs mentioned it works much better than the released version of peek, but doesn't redraw the screen in unchanged areas (like the example above. Here's a demo: peek continues to show the ffmpeg startup output, even though I opened a new tab and see only black + that single line I'm typing (watch the top):\n\nHope that makes sense!. ",
    "crantisz": "Ok, I'm going to update Peek, now it 1.0.0 version . 1.0.3 version records much smaller files! 0.4MB its very close to byzanz:\n\nbyzanz still smaller, but colors not so accurate.. So, its great result. I think this noize at background ads more size:\n\nAnd also, byzanz can skip frames:\n\n. ",
    "Alexander-Wilms": "Yes, I'm recording as GIF. And I noticed that the issue also occurs if the Peek window is only almost maximised, so you're probably right.\nI'll post the console output later today.. I ran it today, and the only issue seems to be that it takes very long to render the gif. Maybe I previously closed peek too early.\nOutput:\n** (peek:2): WARNING **: Couldn't connect to accessibility bus: Failed to connect to socket /tmp/dbus-lhrHYuSfgA: Connection refused\nGtk-Message: Failed to load module \"pk-gtk-module\"\nGtk-Message: Failed to load module \"pk-gtk-module\"\nUsing screen recorder backend gnome-shell\nRecording to file /home/awilms/.var/app/com.uploadedlobster.peek/cache/peek/peekV14S1Y.avi. ",
    "e-cloud": "same problem here. The most important save feature is offline now and then. And there is not dash opened.. \n. No, I install it from ppa. @phw thx, solve it with upgrading the config of imagemaigck. ",
    "roxma": "I have the same issue on manjaro.\nI've tried master HEAD, v1.0.3, v1.0.1. None of them works. > How did you install Peek?\nI install it from source. (There's wired issue with the flatpak package I'm using currently.)\nHere's my installation script (on manjaro):\n```bash\n!/bin/sh\nset -x\nmkdir -p ~/.local/src/\ncd ~/.local/src/\nif [ ! -d peek ]\nthen\n    git clone --depth 1 https://github.com/phw/peek.git\nfi\nmkdir peek/build\ncd peek/build\ncmake -DCMAKE_INSTALL_PREFIX=~/.local/stow/peek ..\nmake\nmake install\ncd ~/.local/stow\nstow peek\n```\n\nThis sounds like whatever package you use, it does not install the schema properly. Try running as root:\n\nUnfortunately glib-compile-schemas /usr/share/glib-2.0/schemas didn't help.\n```\n[roxma@roxma-pc ~]$ sudo glib-compile-schemas /usr/share/glib-2.0/schemas\n[sudo] password for roxma: \n[roxma@roxma-pc ~]$ peek\n(peek:9337): GLib-GIO-ERROR **: Settings schema 'com.uploadedlobster.peek' is not installed\nTrace/breakpoint trap (core dumped)\n```\n\nNo, it's not the same issue, this here is specifically about a packaging error in the Ubuntu packages.\n\nDo I need to open another issue?. @phw  It's working. Thank you very much!. ",
    "khalilfazal": "Hey guys, I created this PR here: https://github.com/wavexx/screenkey/pull/45\nHopefully this goes a long way towards resolving this issue too \ud83d\ude04 . I haven't worked on this project in a while. There is just the one PR. The first post there is up-to-date with what's in the PR.. ",
    "luzpaz": "@khalilfazal do you plan to submit a PR to peek as well ?. Thanks for the explanation and also thank you for this cool program. Cheers!. Can reproduce:\nKernel: 4.15.7-1-MANJARO x86_64 bits: 64 gcc: 7.3.0\nDesktop: Xfce 4.12.4 (Gtk 2.24.31) Distro: Manjaro Linux 17.1.6 \nPeek 1.2.2-7-g0cbdd30\nWhen I try to stop a screencast recording, the button stays depressed and the taskbar counter keeps on rolling. This doesn't only happen with gif though. . Thanks for the fix, can't reproduce in the latest 1.3.0 \nSweet!. Code from xfce4-screenshooter to upload to imgur (it's in c) \nhttps://github.com/xfce-mirror/xfce4-screenshooter/blob/master/lib/screenshooter-imgur.c\nhttps://github.com/xfce-mirror/xfce4-screenshooter/blob/master/lib/screenshooter-imgur.h\n. Both :stuck_out_tongue_closed_eyes:\ndialog box + the option to make it seamless (\"don't ask me again\" checkbox)\nWhat would be awesome but perhaps overcomplicated:\n\nJust like in xfce4-screenshooter a dialog box that pops up after the screenshot is completed, allows different option, especially the option to open the screenshot in a certain application like gimp, inkscape etc...\nIn the context of Peek, folks could choose to open the animated gif or mp4 with kdenlive for example... . @a1p4ca xfce-screenshooter (https://github.com/phw/peek/issues/298#issuecomment-376458814) bundled in with xfce has imgur and ZimageZ as options. People still use that. So I don't agree with your premise. . ",
    "ucuptimposu": "version gtk3, the complete version gtk3-3.20.10-1.fc24.x86_64.\ni was install manually from \nhttps://software.opensuse.org/package/peek\n. And finally i,m installed Fedora 26, worked..... ",
    "lexoyo": "same here. ",
    "pnatraj": "not sure this this issue is very specific to me but i am running ubuntu 14 and i am unable to install peek through snap\nsudo snap install peek --edge\nZOE ERROR (from /usr/lib/snap/snap): zoeParseOptions: unknown option (--edge)\nZOE library version 2006-07-28\n. ",
    "tamalsaha": "By hangs, I mean I can't move my mouse cursor when it is processing. It is a short 1-2 min recording. I have waited almost 4-5 mins for processing.. ",
    "Krandelbord": "I have the same error in peek 1.0.3\n``\nframe=  290 fps= 10 q=0.0 Lsize=  304654kB time=00:00:29.00 bitrate=86059.4kbits/s dup=12 drop=10    \nvideo:304654kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nconvert: unable to get registry IDcache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert: cache resources exhausted `/home/emil/.cache/peek/peekL7FI5Y.pam' @ error/cache.c/OpenPixelCache/3943.\nError: Child process exited with code 1\nFile save error: Error when getting information for file '/home/emil/.cache/peek/peekV4N34Y.gif': No such file or directory\nTemp file delete error: Error removing file /home/emil/.cache/peek/peekV4N34Y.gif: No such file or directory\n```. ",
    "SunyataZero": "Thank you for the help! I'll probably try the master version\nKind Regards, Tord. ",
    "hptnc": "Peek 1.3.1\nblack line during recording \u00bb https://giphy.com/gifs/cY4CKHMQxdBFWXzu7r/html5. ",
    "Yanpas": "Here is gist. >Maybe I will just blacklist the usage of this service for XFCE\nI guess it would be better to do nothing here since it's Xfce problem. Soon Xfce may receive support for this feature. May be closed, thanks :). ",
    "azzamsa": "Update 1 \nthe output produced, after following comment here\n<policy domain=\"resource\" name=\"disk\" value=\"1GiB\"/> \nto 10GiB.\nI try to record three times, 5 seconds, 30 seconds and 1 minute. \n\n\n5 second recording give me an output with very short duration, it does not record the whole 5 second activity, and it takes 15 minutes to render\n\n\n30 second recording give me an output with very short duration, it just record the first 1-2 second recording duration, the .pam file in .cache was 2 GB, and take more than 40 - 1 hour to render.\n\n\n1 minute recording give me no output, after more than 40 minutes rendering, no output produced, and the pam file was 2.7 GB\n\n\nmy machine is \nCPU: Intel i5-7200U (4) @ 3.1GHz\nGPU: NVIDIA GeForce 920MX\nMemory: 796MB / 3856MB\nNote : I do not use my GPU when rendering. but with the same long videos .mkv .webm I have very fast time to render using video editing software.\nmaybe for this time I have to using screen recorder and converting videos manually to gif using ffmpeg.\n. really small, it just \"1613x738\"\nI just run peek for 3 second to paste this output here. hope it can help figure out the problems.\n``` bash\n$ peek\nUsing screen recorder backend ffmpeg\nffmpeg version 3.2.5-1 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.3.0 (Debian 6.3.0-18) 20170516\n  configuration: --prefix=/usr --extra-version=1 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libebur128 --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\n  libavutil      55. 34.101 / 55. 34.101\n  libavcodec     57. 64.101 / 57. 64.101\n  libavformat    57. 56.101 / 57. 56.101\n  libavdevice    57.  1.100 / 57.  1.100\n  libavfilter     6. 65.100 /  6. 65.100\n  libavresample   3.  1.  0 /  3.  1.  0\n  libswscale      4.  2.100 /  4.  2.100\n  libswresample   2.  3.100 /  2.  3.100\n  libpostproc    54.  1.100 / 54.  1.100\n[x11grab @ 0x5650c739df00] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+4,77':\n  Duration: N/A, start: 1503741787.976999, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1613x738, 10 fps, 1000k tbr, 1000k tbn, 1000k tbc\nOutput #0, rawvideo, to '/home/myuser/.cache/peek/peek06DZ5Y.pam':\n  Metadata:\n    encoder         : Lavf57.56.101\n    Stream #0:0: Video: pam, rgb24, 1613x738, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.64.101 pam\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nframe=   22 fps= 11 q=-0.0 Lsize=   76726kB time=00:00:02.20 bitrate=285699.7kbits/s speed=1.13x\nvideo:76726kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\n```\nit produce Peek 2017-08-26 17-03.gif which fine ouput and record all the 2 seconds. \nsecond try\nI try peek again hour ago, this is the result.\n\nI try recording my emacs activity on my 1366 x 768 screen, around 30 seconds. hoping get the good result from peek and uploaded here.\nthe pam result is \n\n``` bash\n$ du -sh peek63IJ5Y.pam\n1.3G    peek63IJ5Y.pam\nand\n$ du -sh peek65GZ5Y.pam\n1.9G    peek65GZ5Y.pam\n```\nand become more extreme\n``` bash\n$ du -hs peek\n12G     peek\nafter some minutes\n$ du -hs peek\n8.1G    peek\n```\n- and it takes more than 25 minutes to render, so i kill the process.\nthis is my output of  convert -list resource\nbash\n$ convert -list resource\nResource limits:\n  Width: 16KP\n  Height: 16KP\n  Area: 128MP\n  Memory: 256MiB\n  Map: 512MiB\n  Disk: 10GiB\n  File: 768\n  Thread: 4\n  Throttle: 0\n  Time: unlimited\nNote : for comparison, I recoreded my screen using kazam for 40 seconds and produce the output 6 mb with .webm and 3 mb of with .mp4, converting such that big files give me 251 mb of first.gif and 220 mb of second.gif with -layers Optimize. and it just take no more than 5-6 second to render with kdenlive or ffmpeg in terminal. ( I am writing this to assuere that my machine is healty).\n. >Can you explain more what you did, a bit confused by the use of -layers Optimize and the statement that it took only seconds with ffmpeg? Did you use ffmpeg or ImageMagick to do the conversion? Trying to understand the difference here. My experience is that as soon as you use convert with -layers optimize the resource usage blows up. For reference Peek just runs (variables just added to make it clear what is used there)\nI am sorry, I have made you confused. I mean in Note section is the step I use when I don't use peek. because peek takes loot of my CPUS and RAM. so I try to record my screen using Kazam Scren recoder and convert the .webm/.mp4 result manually.\n\nUnrelated to the issue here, but recording this area as GIF is not really small, especially when doing more than just a few seconds. IMHO you are better served with setting WebM or MP4 as output format here. You can also experiment with the framerate, but Peek's default framerate of 8fps is already pretty low and tuned towards GIF recording.\n\nyes, Yesterday I am looking for the standard duration and area for gif recording, any suggestion ?\nI will try to make gif with Peek with your preferred timing duration and area size, so i will report the result here\n. I just want to share my experience with Silentcast , maybe this can give a benefit.\nSilencast does not natively support i3wm, but this is the workaround. Does't work in i3wm #49. the cool piece is temptoanim  it convert the temp.mkv result from scren record to gif with relatively fast and does not eat lot of my machine resources.\nthis is my GIF result.\nI just want to share, I hope this can help this issue.\n\n. I will try everything above as you suggest, and report the result here, soon.\nThanks lot for your contribution to community :). Sorry, I have so many task at hand, and I can't report peek here. \nThank you very much for your contribution to community.\nI still report peek if I have time in the following weeks.. ",
    "bchauvin": "Nothing shows up when using the --gapplication-service argument.\nWhen using the regular command: com.uploadedlobster.peek[1445]: Using screen recorder backend ffmpeg\nI solved the issue by removing the ~/.local/share/applications/peek.desktop entirely, now I only see a single entry and all went back to normal. Not really sure what happened but problem is solved.. Thanks for your comment, it helped me understand where the issue comes from.\nSteps to reproduce:\n- Install Peek using Ubuntu PPA\n=> At this point, Peek has a single entry in the dash\n\n\nLaunch Peek\n=> Works fine\n\n\nRight-click on Peek icon in the launcher\n=> Several options are offered, including \"Lock to launcher\" and \"Add to dash\"\n\n\nChoose \"Add to dash\"\n=> Two entries appear in the dash for Peek, one triggers Peek with the argument (leading to the behavior described previously), second launches Peek normally\n\n\nLaunch Peek using second entry\n=> Peek launches and works as expected\n\n\nRight click on launcher icon, choose \"Lock to launcher\"\n\nsudo find / -name \"peek.desktop\"\n=> ~/.local/share/applications/peek.desktop\n\nThere are probably alternate ways to get that, looking into it.. Actually, just using the \"Lock to launcher\" option after starting Peek for the first time is sufficient to get the ~/.local/share/applications/peek.desktop created.. Agreed, that's very weird! Thanks for looking :)\nFYI just using the \"Lock to launcher\" option after starting Peek for the first time is sufficient to get the ~/.local/share/applications/peek.desktop created.\nFrom there, you can do:\n- sudo apt purge peek\n- sudo apt autoremove\n- sudo find / -name \"peek.desktop\"\n=> ~/.local/share/applications/peek.desktop. ",
    "gornostal": "Hi,\nHere are two gifs. The first one was created using shell script that converts video to gif (see below), the second using Peek.\nNotice the pixelated background gradient on the input box in second gif.\nI'm not familiar with ffmpeg and I find Its CLI complicated. I would prefer using software like Peek for creating gifs.\nI wonder if you can tell why the first gif turned out to be better quality by looking at the script?\n\n\n```bash\n!/bin/sh\npalette=\"/tmp/palette.png\"\nfilters=\"fps=15\"\nffmpeg -v warning -i $1 -vf \"$filters,palettegen\" -y $palette\nffmpeg -v warning -i $1 -i $palette -lavfi \"$filters [x]; [x][1:v] paletteuse\" -y $2\n```\n. Thanks for the explanation @phw . Thanks @phw . ",
    "NolanSyKinsley": "Will Peek ever have gifv, or rather mp4 comparability for high quality uploads?. Oh... I think I know what is causing it, shadows from compton. I will have to config compton to exempt peek from shadow effects. . ",
    "PhilipCard": "I have a problem i'm trying to solve for a while but did not find a solution yet.\nWhen i open Peek on my Ubuntu16.04, the window is black instead of transparent. \nI've tried to uninstall and reinstall the application but always end up with the black window that does not record anything ! \nDoes someone has a solution to that problem ? \nHere's a screenshot of my problem : \n\n. ",
    "ralexrdz": "Thanks man! Lots of help! The problem was that apt installation failed got stuck on some dependacy, I tried to  install imagemagick manually, and created that usr/local folder. I uninstall that, fix dependancy and now it works!. ",
    "RomuloPBenedetti": "console gives nothing, it shows ffmpeg logging, and when I click in \"save\" it did not save and nothing is printed to console, the strange part is that the file manager from Peek shows the old saved file if I try to save another record, but dolphin and ls show the file did not exist.. ",
    "fran6t": "Oh sorry I had not seen feature i think yes it's pretty similar #40  I wish the gif is built only from clicking successively on a button.\nTo do this here is a solution that could be considered\nCurrent button unchanged.\nThe operation could be this:\nAdded 3 additional group buttons.\nButton 1 to start multiple capture (waiting to click button 2)\nButton 2 captures a single image when clicking on it\nClick button 2 as many times as the image needs\nButton 3 build gif\nConclusion:\nIf I pressed 4 times on button 2 the gif is therefore made up of 4 images\nSorry for my bad English. ",
    "sschemel": "11gb of 16gb free RAM \n120+ GB disk \nOnly trying to take a quick 10 second clip. . ",
    "arthurgeron": "I have the same bug, I tried recording for 3 seconds and saving, this was the messages I got on terminal:\nUsing screen recorder backend gnome-shell\nRecording to file /home/hellguy/.cache/peek/peekXXXXXX.avi\nRecording canceled with return code 0\nError: Child process exited with code 2\nRecording to file /home/hellguy/.cache/peek/peekXXXXXX.avi\nFile save error: Error when getting information for file \u201c/home/hellguy/.cache/peek/peekXXXXXX.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/hellguy/.cache/peek/peekXXXXXX.gif: No such file or directory\nOBS: It seems to work when running as sudo. ",
    "ktsaou": "Recording an MP4 does not work at all. It logs:\nCould not start recording, already an active recording using org.gnome.Shell.Screencast?\nRecording with -b ffmpeg produces garbage gifs:\n\nThis is the log:\n```\n$ peek -b ffmpeg\nRequested screen recorder backend ffmpeg\n(peek:12931): Gtk-WARNING **: Theme directory emoties/scalable of theme Uniform+ has no size field\nffmpeg version 3.3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7 (GCC)\n  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --docdir=/usr/share/doc/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags='-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic' --extra-ldflags='-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld ' --extra-cflags='-I/usr/include/nvenc ' --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libvo-amrwbenc --enable-version3 --enable-bzlib --disable-crystalhd --enable-fontconfig --enable-frei0r --enable-gcrypt --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libcdio --enable-indev=jack --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libmp3lame --enable-nvenc --enable-openal --enable-opencl --enable-opengl --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libx265 --enable-libxvid --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-libmfx --enable-runtime-cpudetect\n  libavutil      55. 58.100 / 55. 58.100\n  libavcodec     57. 89.100 / 57. 89.100\n  libavformat    57. 71.100 / 57. 71.100\n  libavdevice    57.  6.100 / 57.  6.100\n  libavfilter     6. 82.100 /  6. 82.100\n  libavresample   3.  5.  0 /  3.  5.  0\n  libswscale      4.  6.100 /  4.  6.100\n  libswresample   2.  7.100 /  2.  7.100\n  libpostproc    54.  5.100 / 54.  5.100\nInput #0, x11grab, from ':0+2660,390':\n  Duration: N/A, start: 1507713428.824420, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 738x290, 10 fps, 10 tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nOutput #0, rawvideo, to '/home/costa/.cache/peek/peekXXXXXX.pam':\n  Metadata:\n    encoder         : Lavf57.71.100\n    Stream #0:0: Video: pam, rgb24, 738x290, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.89.100 pam\nframe=  288 fps= 10 q=-0.0 Lsize=  180597kB time=00:00:28.80 bitrate=51369.8kbits/s speed=1.02x  \nvideo:180597kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\n```\nRecording without capturing the mouse, has the same effect. On this gif I was moving the mouse up to 12:20:54, then I stopped. As you can see it runs faster when I stopped:\n\n. btw, fedora 26 runs on wayland, not X11. I don't know if this makes a difference.. Recording a WebM (without -b ffmpeg) does not have the issue. Timing seems right.. > You need gstreamer1-plugins-ugly installed for MP4\nI just installed it. Same result (black gif with corrupted pointer movement).\n\nDo mouse actions outside the recording area also effect this?\n\nYes, it does not matter where the pointer is.\n\nmaybe your system starts dropping frames because it gets too busy. Not sure why simple mouse movements should cause this, though. Do you see anything special in resource usage while recording? Maybe also check disk IO with iotop.\n\nThe system is totally idle. This is a high-end laptop (Dell XPS 9560, Core i7, 32GB RAM, 1TB SSD, kernel 4.13.4, fedora 26). I made all tests with just a web browser, a shell and peek open. It has a 4K HiDPI display, but I also made a few tests on an external HD monitor. Same result.\n. Switched to Xorg and tested it there too. It still happens. If the mouse pointer does not move, it goes faster.. btw, converting the webm file to gif, gives this output:\n$ ffmpeg -i 'Peek 2017-10-11 13-59.webm' 'Peek 2017-10-11 13-59.gif'\nffmpeg version 3.3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7 (GCC)\n  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --docdir=/usr/share/doc/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags='-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic' --extra-ldflags='-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld ' --extra-cflags='-I/usr/include/nvenc ' --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libvo-amrwbenc --enable-version3 --enable-bzlib --disable-crystalhd --enable-fontconfig --enable-frei0r --enable-gcrypt --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libcdio --enable-indev=jack --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libmp3lame --enable-nvenc --enable-openal --enable-opencl --enable-opengl --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libx265 --enable-libxvid --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-libmfx --enable-runtime-cpudetect\n  libavutil      55. 58.100 / 55. 58.100\n  libavcodec     57. 89.100 / 57. 89.100\n  libavformat    57. 71.100 / 57. 71.100\n  libavdevice    57.  6.100 / 57.  6.100\n  libavfilter     6. 82.100 /  6. 82.100\n  libavresample   3.  5.  0 /  3.  5.  0\n  libswscale      4.  6.100 /  4.  6.100\n  libswresample   2.  7.100 /  2.  7.100\n  libpostproc    54.  5.100 / 54.  5.100\nInput #0, matroska,webm, from 'Peek 2017-10-11 13-59.webm':\n  Metadata:\n    encoder         : GStreamer matroskamux version 1.12.2\n    creation_time   : 2017-10-11T10:59:36.000000Z\n  Duration: 00:00:16.42, start: 0.005000, bitrate: 26 kb/s\n    Stream #0:0(eng): Video: vp8, yuv420p(progressive), 738x290, SAR 1:1 DAR 369:145, 10 fps, 10 tbr, 1k tbn, 1k tbc (default)\n    Metadata:\n      title           : Video\nFile 'Peek 2017-10-11 13-59.gif' already exists. Overwrite ? [y/N] y\nStream mapping:\n  Stream #0:0 -> #0:0 (vp8 (native) -> gif (native))\nPress [q] to stop, [?] for help\n[swscaler @ 0x5620f57bb700] No accelerated colorspace conversion found from yuv420p to bgr8.\nOutput #0, gif, to 'Peek 2017-10-11 13-59.gif':\n  Metadata:\n    encoder         : Lavf57.71.100\n    Stream #0:0(eng): Video: gif, bgr8, 738x290 [SAR 1:1 DAR 369:145], q=2-31, 200 kb/s, 10 fps, 100 tbn, 10 tbc (default)\n    Metadata:\n      title           : Video\n      encoder         : Lavc57.89.100 gif\nPast duration 0.699989 too large\nPast duration 0.879997 too large\nPast duration 0.869987 too large\n    Last message repeated 1 times\nPast duration 0.699989 too large\nPast duration 0.809990 too large\nPast duration 0.979988 too large\nPast duration 0.769997 too large\nPast duration 0.999992 too large\nPast duration 0.859993 too large\nPast duration 0.669991 too large\nPast duration 0.699989 too large\nPast duration 0.859993 too large\nPast duration 0.689995 too large\nframe=   67 fps=0.0 q=-0.0 Lsize=     139kB time=00:00:16.31 bitrate=  69.9kbits/s dup=0 drop=2 speed= 147x    \nvideo:138kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.947508%\nI don't know if these Past duration X too large mean something for you. I am totally ignorant of this, but it could mean that the durations of a few frames are wrong.\nWhen converting from webm to gif, the animation has the right timing (but I don't know if ffmpeg fixed that).. > Maybe. Can you make this WebM available somewhere so I can test?\nHere it is: https://drive.google.com/file/d/0Byg-KnB4yqk6WElZSGZNVXNZaEE/view?usp=sharing. > gstreamer1-plugins-ugly is needed for recording MP4 with the gnome-shell backend.\nYou are right. MP4s do not have the timing issue either.\nSo, only GIFs when the mouse does not move.. > Can you try the latest github revision?\nInstalled again from source. Same result:\n\nWith PEEK_POSTPROCESSOR=ffmpeg peek, same result:\n\nTesting now with flatpack.... Installed with:\nsh\nflatpak install --user http://flatpak.uploadedlobster.com/peek-master.flatpakref\n\nRun with:\nsh\n$ flatpak run com.uploadedlobster.peek\nGtk-Message: Failed to load module \"pk-gtk-module\"\nGtk-Message: Failed to load module \"pk-gtk-module\"\nUsing screen recorder backend gnome-shell\nRecording to file /home/costa/.var/app/com.uploadedlobster.peek/cache/peek/peekFZEZ7Y.avi\nThe issue is still here:\n\n\nRun with:\nsh\n$ PEEK_POSTPROCESSOR=ffmpeg flatpak run com.uploadedlobster.peek\nGtk-Message: Failed to load module \"pk-gtk-module\"\nGtk-Message: Failed to load module \"pk-gtk-module\"\nUsing screen recorder backend gnome-shell\nRecording to file /home/costa/.var/app/com.uploadedlobster.peek/cache/peek/peek05JV7Y.avi\nffmpeg version 3.3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.2.0 (GCC)\n  configuration: --prefix=/app --disable-debug --disable-static --enable-gpl --enable-libvpx --enable-libx264 --enable-shared --enable-libxcb --enable-libxcb-xfixes --disable-libxcb-shape --disable-ffplay --disable-ffprobe --disable-ffserver --disable-doc --disable-everything --enable-decoder=rawvideo --enable-decoder=png --enable-encoder=libx264 --enable-encoder=libvpx_vp8 --enable-encoder=rawvideo --enable-encoder=pam --enable-encoder=png --enable-encoder=gif --enable-demuxer=avi --enable-demuxer=image2 --enable-muxer=mp4 --enable-muxer=webm --enable-muxer=rawvideo --enable-muxer=gif --enable-muxer=image2 --enable-filter=crop --enable-filter=scale --enable-filter=fps --enable-filter=palettegen --enable-filter=paletteuse --enable-protocol=file --enable-indev=xcbgrab\n  libavutil      55. 58.100 / 55. 58.100\n  libavcodec     57. 89.100 / 57. 89.100\n  libavformat    57. 71.100 / 57. 71.100\n  libavdevice    57.  6.100 / 57.  6.100\n  libavfilter     6. 82.100 /  6. 82.100\n  libswscale      4.  6.100 /  4.  6.100\n  libswresample   2.  7.100 /  2.  7.100\n  libpostproc    54.  5.100 / 54.  5.100\nInput #0, avi, from '/home/costa/.var/app/com.uploadedlobster.peek/cache/peek/peek05JV7Y.avi':\n  Duration: 00:00:15.20, start: 0.000000, bitrate: 68488 kb/s\n    Stream #0:0: Video: rawvideo, bgra, 738x290, 68939 kb/s, 10 fps, 10 tbr, 10 tbn, 10 tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> png (native))\nPress [q] to stop, [?] for help\nOutput #0, image2, to '/home/costa/.var/app/com.uploadedlobster.peek/cache/peek/peekREUN7Y.png':\n  Metadata:\n    encoder         : Lavf57.71.100\n    Stream #0:0: Video: png, rgba, 16x16 [SAR 1:1 DAR 1:1], q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.89.100 png\n[Parsed_palettegen_1 @ 0x101d160] 255(+1) colors generated out of 3038 colors; ratio=0.083937\nframe=    1 fps=0.0 q=-0.0 Lsize=N/A time=00:00:00.10 bitrate=N/A speed=0.487x    \nvideo:1kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\nffmpeg version 3.3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.2.0 (GCC)\n  configuration: --prefix=/app --disable-debug --disable-static --enable-gpl --enable-libvpx --enable-libx264 --enable-shared --enable-libxcb --enable-libxcb-xfixes --disable-libxcb-shape --disable-ffplay --disable-ffprobe --disable-ffserver --disable-doc --disable-everything --enable-decoder=rawvideo --enable-decoder=png --enable-encoder=libx264 --enable-encoder=libvpx_vp8 --enable-encoder=rawvideo --enable-encoder=pam --enable-encoder=png --enable-encoder=gif --enable-demuxer=avi --enable-demuxer=image2 --enable-muxer=mp4 --enable-muxer=webm --enable-muxer=rawvideo --enable-muxer=gif --enable-muxer=image2 --enable-filter=crop --enable-filter=scale --enable-filter=fps --enable-filter=palettegen --enable-filter=paletteuse --enable-protocol=file --enable-indev=xcbgrab\n  libavutil      55. 58.100 / 55. 58.100\n  libavcodec     57. 89.100 / 57. 89.100\n  libavformat    57. 71.100 / 57. 71.100\n  libavdevice    57.  6.100 / 57.  6.100\n  libavfilter     6. 82.100 /  6. 82.100\n  libswscale      4.  6.100 /  4.  6.100\n  libswresample   2.  7.100 /  2.  7.100\n  libpostproc    54.  5.100 / 54.  5.100\nInput #0, avi, from '/home/costa/.var/app/com.uploadedlobster.peek/cache/peek/peek05JV7Y.avi':\n  Duration: 00:00:15.20, start: 0.000000, bitrate: 68488 kb/s\n    Stream #0:0: Video: rawvideo, bgra, 738x290, 68939 kb/s, 10 fps, 10 tbr, 10 tbn, 10 tbc\nInput #1, image2, from '/home/costa/.var/app/com.uploadedlobster.peek/cache/peek/peekREUN7Y.png':\n  Duration: 00:00:00.04, start: 0.000000, bitrate: 198 kb/s\n    Stream #1:0: Video: png, rgba(pc), 16x16 [SAR 1:1 DAR 1:1], 25 tbr, 25 tbn, 25 tbc\nStream mapping:\n  Stream #0:0 (rawvideo) -> fps\n  Stream #1:0 (png) -> paletteuse:palette\n  paletteuse -> Stream #0:0 (gif)\nPress [q] to stop, [?] for help\nOutput #0, gif, to '/home/costa/.var/app/com.uploadedlobster.peek/cache/peek/peekPEVH7Y.gif':\n  Metadata:\n    encoder         : Lavf57.71.100\n    Stream #0:0: Video: gif, pal8, 738x290, q=2-31, 200 kb/s, 10 fps, 100 tbn, 10 tbc (default)\n    Metadata:\n      encoder         : Lavc57.89.100 gif\nframe=  152 fps=141 q=-0.0 Lsize=     193kB time=00:00:15.11 bitrate= 104.7kbits/s speed=  14x    \nvideo:191kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 1.030543%\nSame result:\n\n. > If you could try again on X11 but with -b ffmpeg this would also help to narrow down the cause (if this works well it would mean gnome-shell recording is to blame)\nRun on Xorg, with:\n```\n$ peek -b ffmpeg\nRequested screen recorder backend ffmpeg\n(peek:7371): Gtk-WARNING **: Theme directory emoties/scalable of theme Uniform+ has no size field\nffmpeg version 3.3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7 (GCC)\n  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --docdir=/usr/share/doc/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags='-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic' --extra-ldflags='-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld ' --extra-cflags='-I/usr/include/nvenc ' --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libvo-amrwbenc --enable-version3 --enable-bzlib --disable-crystalhd --enable-fontconfig --enable-frei0r --enable-gcrypt --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libcdio --enable-indev=jack --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libmp3lame --enable-nvenc --enable-openal --enable-opencl --enable-opengl --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libx265 --enable-libxvid --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-libmfx --enable-runtime-cpudetect\n  libavutil      55. 58.100 / 55. 58.100\n  libavcodec     57. 89.100 / 57. 89.100\n  libavformat    57. 71.100 / 57. 71.100\n  libavdevice    57.  6.100 / 57.  6.100\n  libavfilter     6. 82.100 /  6. 82.100\n  libavresample   3.  5.  0 /  3.  5.  0\n  libswscale      4.  6.100 /  4.  6.100\n  libswresample   2.  7.100 /  2.  7.100\n  libpostproc    54.  5.100 / 54.  5.100\nInput #0, x11grab, from ':0+2058,412':\n  Duration: N/A, start: 1507814240.174216, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 738x290, 10 fps, 10 tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nOutput #0, rawvideo, to '/home/costa/.cache/peek/peekXYEZ7Y.pam':\n  Metadata:\n    encoder         : Lavf57.71.100\n    Stream #0:0: Video: pam, rgb24, 738x290, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.89.100 pam\nframe=  317 fps= 10 q=-0.0 Lsize=  198782kB time=00:00:31.70 bitrate=51369.8kbits/s speed=1.02x  \nvideo:198782kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\n```\nThis works perfectly!\n\n. > I tried to reproduce this on both Fedora 25 and 26 without luck.\nIt seems I can't reproduce it anymore either.\nI updated both fedora and peek and I tried several times.\nSo it seems it has been fixed somehow...\nOne thing I would like to ask is this (probably related to flatpack):\nWhen I start peek from an icon, I get this:\n\nBut when I start it from a shell, I get this:\n\nI see flatpack installed gnome 3.26:\nsh\n$ flatpak list\nRef                                    Options     \ncom.uploadedlobster.peek/x86_64/master user,current\norg.gnome.Platform/x86_64/3.26         user,runtime\nI think the icon starts peek with gnome 3.26 (that's why the difference in colors).\nBut it seems I can't remove it:\n```sh\n$ flatpak uninstall com.uploadedlobster.peek/x86_64/master\nerror: com.uploadedlobster.peek master not installed\n$ flatpak uninstall com.uploadedlobster.peek\nerror: com.uploadedlobster.peek master not installed\n$ flatpak info com.uploadedlobster.peek\nRef: app/com.uploadedlobster.peek/x86_64/master\nID: com.uploadedlobster.peek\nArch: x86_64\nBranch: master\nOrigin: com.uploadedlobster.peek-origin\nCommit: 06f37685331cf8ce758589ab006dd4acde34af06797d8fcc7d8355b30e047446\nLocation: /home/costa/.local/share/flatpak/app/com.uploadedlobster.peek/x86_64/master/06f37685331cf8ce758589ab006dd4acde34af06797d8fcc7d8355b30e047446\nInstalled size: 9.6 MB\nRuntime: org.gnome.Platform/x86_64/3.26\n```\nAny ideas how to uninstall it?\n. Thank you!. ",
    "sarmadka": "Thanks @phw, uninstalling and reinstalling solved the issue.\nI looked at the translation and it looks good but I suggested a minor change. Basically, the translation was saying \"simple animated picture recorder...\" and I suggested changing it into \"simple screen recorder...\". It's a very minor change, so if you prefer to stick with the original suggestion then it's perfectly fine; I just thought my suggestion is more descriptive of what the app actually does.\nThanks for the great app by the way :+1: . ",
    "as3mbus": "tried the source build from the master branch. still troubles me on when i should finish my recording. maybe a workaround with simple information about memory usage and it's limit that would really help.. ",
    "StephanMeijer": "Could be a duplicate of #188 . Will try and feedback :). Seems to work!. It does not :(\n```\nUsing screen recorder backend gnome-shell\nRecording to file /home/steve/.cache/peek/peekXXXXXX.avi\n(peek:21601): Gtk-WARNING **: Failed to measure available space: The specified location is not supported\nconvert-im6.q16: unable to get registry ID cache:hosts' @ error/registry.c/GetImageRegistry/201.\nconvert-im6.q16: DistributedPixelCache '127.0.0.1' @ error/distribute-cache.c/ConnectPixelCacheServer/244.\nconvert-im6.q16: cache resources exhausted/home/steve/.cache/peek/magick-21655BDj5nXDmZGe5.pam' @ error/cache.c/OpenPixelCache/3945.\nconvert-im6.q16: no images defined `/home/steve/.cache/peek/peekXXXXXX.gif' @ error/convert.c/ConvertImageCommand/3258.\nError: Child process exited with code 1\nFile save error: Error when getting information for file \u201c/home/steve/.cache/peek/peekXXXXXX.gif\u201d: No such file or directory\nTemp file delete error: Error removing file /home/steve/.cache/peek/peekXXXXXX.gif: No such file or directory\n```. - I installed from source.\n- I've got 16 GB ram.\nSpecial thing: my home partition is encrypted.\n. It uses ffmpeg and convert as far as I can read using htop. It doesn't use much RAM (like 1 - 2 % of 16 GB)\n$ whereis peek\npeek: /usr/bin/peek /usr/local/bin/peek /usr/share/man/man1/peek.1.gz\n. Using /usr/local/bin/peek outputs ffmpeg-things. Binaries don't seem to be equal. Will comment on that later.. /usr/local/bin/peek seems to work. Thanks. Maybe I didn't remove the old version properly.\nP.S.: this piece of software is great. ",
    "irk3n-dev": "I have the same problem with Ubuntu 17.10\nWARNING: library configuration mismatch\n. ",
    "jtyr": "I'm using Arch Linux with KDE and I have problems with Peek built from the peek as well as from the peek-git package. The final GIF has only ~10KiB. I can see the size of the ~/.cache/peek/peekXXXXXX.pam file is increasing but if I try to play it with VLC, it loops only the first second (like in the final GIF). There are no errors in the Peek logs:\n$ peek                               \nUsing screen recorder backend ffmpeg\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 7.2.0 (GCC)\n  configuration: --prefix=/usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gmp --enable-gnutls --enable-gpl --enable-ladspa --enable-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libiec61883 --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxcb --enable-libxvid --enable-shared --enable-version3\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nInput #0, x11grab, from ':0+959,494':\n  Duration: N/A, start: 1509278715.154771, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 955x548, 10 fps, 10 tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nOutput #0, rawvideo, to '/home/user/.cache/peek/peekXXXXXX.pam':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: pam, rgb24, 955x548, q=2-31, 200 kb/s, 10 fps, 10 tbn, 10 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 pam\nframe=  123 fps= 10 q=-0.0 Lsize=  188594kB time=00:00:12.30 bitrate=125606.6kbits/s speed=1.02x    \nvideo:188594kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nEDIT: I have discovered that if I disable Plasma 5 effects (CTRL+ALT+F12), it starts recording just fine.. ",
    "ronjouch": "\nCan you all try the latest git revision again? I could finally reproduce, changed the intermediary output format. This is probably an intermediate fix, but curious if it fixes your issues.\n\n@phw fixes the problem for me \ud83d\udc4d.. @phw ah, maybe you already know, but also note that the fix broke PEEK_POSTPROCESSOR=imagemagick for me. With the fix, I get this:\n```\n~ PEEK_POSTPROCESSOR=imagemagick /opt/peek/build/peek\n (peek:30606): WARNING : Binding 'R' failed!\nUsing screen recorder backend ffmpeg\nffmpeg version 3.4-static http://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.4.0 (Debian 6.4.0-7) 20170920\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc-6 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gray --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-librtmp --enable-libsoxr --enable-libspeex --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxvid --enable-libzimg\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\n[x11grab @ 0x48d9ee0] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+654,459':\n  Duration: N/A, start: 1509724229.505680, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1233x547, 5 fps, 1000k tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> ffvhuff (native))\nPress [q] to stop, [?] for help\nOutput #0, matroska, to '/home/ronj/.cache/peek/peekHFWZ8Y.mkv':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: ffvhuff (FFVH / 0x48564646), rgb24, 1233x547, q=2-31, 200 kb/s, 5 fps, 1k tbn, 5 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 ffvhuff\nframe=   53 fps=5.2 q=-0.0 Lsize=   37271kB time=00:00:10.40 bitrate=29355.4kbits/s speed=1.02x\nvideo:37268kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.009093%\nconvert: no decode delegate for this image format MKV' @ error/constitute.c/ReadImage/501.\nconvert: no images defined/home/ronj/.cache/peek/peekM6ZQ8Y.gif' @ error/convert.c/ConvertImageCommand/3210.\nError: Child process exited with code 1\nFile save error: Error when getting information for file '/home/ronj/.cache/peek/peekM6ZQ8Y.gif': No such file or directory\nTemp file delete error: Error removing file: No such file or directory\n``. @phw installed gifski from cargo (runninggifski --helpworks), built peek from source and ran it withPEEK_POSTPROCESSOR=gifski`.\nBut before we talk gifski I need help with the build, my self-built peek is borked: with or without the PEEK_POSTPROCESSOR variable, the output GIF is always a single frame (around 20kB or 100kB, depending on what I captured).\nThis is the first time I build peek, so I may have done something wrong. HALP.\n\nUbuntu 16.04.3 / Unity / Compiz\nFollowed build peek from source steps, except the final make install, which felt undesired (since I have a ppa install) & unnecessary (since docs mention I can \"Run directly from source\" after build).\nBuild went fine after installing the \ud83d\udc4d documented deps.\nSettings: Format=GIF, Delay=2, Framerate=5, Downsampling=1, Cursor=true.\nFrom the log below I see Peek is using my PATH ffmpeg 3.4, which is an official static build. Bad?\n\nLog:\n```\n /opt/peek/build  \u00b1 master  ./peek\n (peek:28992): WARNING : Binding 'R' failed!\nUsing screen recorder backend ffmpeg\nffmpeg version 3.4-static http://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.4.0 (Debian 6.4.0-7) 20170920\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc-6 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gray --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-librtmp --enable-libsoxr --enable-libspeex --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxvid --enable-libzimg\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\n[x11grab @ 0x5c94f40] Stream #0: not enough frames to estimate rate; consider increasing probesize\nInput #0, x11grab, from ':0+1288,120':\n  Duration: N/A, start: 1509718090.487766, bitrate: N/A\n    Stream #0:0: Video: rawvideo (BGR[0] / 0x524742), bgr0, 1233x547, 5 fps, 1000k tbr, 1000k tbn, 1000k tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (rawvideo (native) -> pam (native))\nPress [q] to stop, [?] for help\nOutput #0, rawvideo, to '/home/ronj/.cache/peek/peek3LVY8Y.pam':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: pam, rgb24, 1233x547, q=2-31, 200 kb/s, 5 fps, 5 tbn, 5 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 pam\nframe=   20 fps=5.5 q=-0.0 Lsize=   39520kB time=00:00:04.00 bitrate=80936.7kbits/s speed=1.11x\nvideo:39520kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%\nffmpeg version 3.4-static http://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.4.0 (Debian 6.4.0-7) 20170920\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc-6 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gray --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-librtmp --enable-libsoxr --enable-libspeex --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxvid --enable-libzimg\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nInput #0, image2, from '/home/ronj/.cache/peek/peek3LVY8Y.pam':\n  Duration: 00:00:00.04, start: 0.000000, bitrate: 8093668 kb/s\n    Stream #0:0: Video: pam, rgb24, 1233x547, 25 tbr, 25 tbn, 25 tbc\nStream mapping:\n  Stream #0:0 -> #0:0 (pam (native) -> png (native))\nPress [q] to stop, [?] for help\nOutput #0, image2, to '/home/ronj/.cache/peek/peekY13Z8Y.png':\n  Metadata:\n    encoder         : Lavf57.83.100\n    Stream #0:0: Video: png, rgba, 16x16 [SAR 1:1 DAR 1:1], q=2-31, 200 kb/s, 5 fps, 5 tbn, 5 tbc\n    Metadata:\n      encoder         : Lavc57.107.100 png\nframe=    0 fps=0.0 q=0.0 Lsize=N/A time=00:00:00.00 bitrate=N/A speed=   0x\nvideo:0kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\nOutput file is empty, nothing was encoded (check -ss / -t / -frames parameters if used)\nffmpeg version 3.4-static http://johnvansickle.com/ffmpeg/  Copyright (c) 2000-2017 the FFmpeg developers\n  built with gcc 6.4.0 (Debian 6.4.0-7) 20170920\n  configuration: --enable-gpl --enable-version3 --enable-static --disable-debug --disable-ffplay --disable-indev=sndio --disable-outdev=sndio --cc=gcc-6 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-gray --enable-libfribidi --enable-libass --enable-libvmaf --enable-libfreetype --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-librubberband --enable-librtmp --enable-libsoxr --enable-libspeex --enable-libvorbis --enable-libopus --enable-libtheora --enable-libvidstab --enable-libvo-amrwbenc --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxvid --enable-libzimg\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nInput #0, image2, from '/home/ronj/.cache/peek/peek3LVY8Y.pam':\n  Duration: 00:00:00.04, start: 0.000000, bitrate: 8093668 kb/s\n    Stream #0:0: Video: pam, rgb24, 1233x547, 25 tbr, 25 tbn, 25 tbc\n/home/ronj/.cache/peek/peekY13Z8Y.png: Invalid data found when processing input\nError: Child process exited with code 1\nFile save error: Error when getting information for file '/home/ronj/.cache/peek/peekSI0T8Y.gif': No such file or directory\nTemp file delete error: Error removing file: No such file or directory\n```. @phw\n\nThis sounds an awful lot like the issues reported at #198\n\nIndeed, thanks for the pointer \ud83d\udc4d.\n\nI have no idea really, especially since I did not change anything in the recording itself. If you run\nPEEK_POSTPROCESSOR=imagemagick ./peek\nyou should get exactly the same behavior as with Peek 1.1.0, does this make a difference?\n\nIt does: with this flag recording works as before.\n\nIt's interesting, the initial ffmpeg command for recording the video (pam file) shows time=00:00:04.00 at the end. The later ffmpeg commands loading the file show Duration: 00:00:00.04. Something is wrong here. I have to refactor the recording part anyway (writing the data to that pam file only made sense in combination with imagemagick).\n\n\ud83d\udc4d, feel free to ping me when I can try the refactor. Or to avoid derailing the gifski discussion, ping #198, I subscribed to it. Thanks for the prompt feedback!. @phw #198 fixed with your latest changes, and gifski postprocessor working! As expected, output is beautiful and filesize is huge.. @phw \n\ngifski now supports a quality setting (0-100). This is interesting, because in a quick test a quality of around 50-60 gave me pretty similar results than ffmpeg, but with smaller file size. Ffmpeg still encodes faster, but it's kinda ok with gifski in lower quality settings.\nThere is a big case of making gifski the default and add a slider for quality. My current idea is to just do that with gifski, settting the default quality to 60. The user can then configure the quality with a slider. And if gifski is not available fall back to ffmpeg without quality setting.\n\nPure awesome \ud83d\udc4d; we can have our PNGQuant awesomeness cake and eat it in GIF-land \ud83d\ude42. I guess/hope that will still let users customize capture framerate (but there's no reason not to, right?), it remains an important way to keep GIF filesize reasonable. Ping me here if/when a first implementation is available, I'll be glad to test it.. Works for me. @phw awesome work \ud83d\udc4d.. > I have made gifski the default. If gifski is available it will be used, if not Peek will fallback to ffmpeg.\n\nBy default Peek will use a quality setting of 60. But you can change it in the preferences, see below. This setting is only available if gifski is installed.\n\n@phw I've been playing with it (latest master gifski+peek), but for now I feel it's a bad idea to replace ffmpeg, because although gifski now advertises a quality setting, gifski remains in a whole diffrent ballpark regarding filesize, even when setting minimum gifski quality. See for yourself on similar screencasts (manual timing and clicking, so that's not a 100% exact comparison, but still gives an idea):\n\n\nBaseline ffmpeg: 300kB\n\n\n\nGifski q=20: 1.2MB\n\n\n\nGifski q=100: 1MB (yes, smaller than q=20, I guess it's actually just a bit shorter)\n\n\n\nIt feels like high quality makes for a bit less dithering, but overall filesize remains huge (300kB \u2192 ~1MB).\nAm I doing something wrong? (Do you get the same behavior when fiddling with gifski quality?) If you confirm the huge filesizes regardless of gifski quality, please keep ffmpeg as an option.. @phw thinking about the non-effect of the new gifski slider, could it simply be that my build is screwed? Especially, I didn't make install, so the xml conf schemas were not deployed. I noticed that running from the build folder with ./peek succeeds in making peek run (whereas if I just run /opt/peek-git/build/peek from ~ it crashes with a gschemas error), so it looks like new schemas (including the gifsky quality integer) are used, but could something more be wrong, causing a constant/default be passed to gifski regardless of the slider position?. @phw cool; good point, UX/discoverability matters! Thanks for the continued work on Peek \ud83d\ude42.. ",
    "davidv171": "Changed to defualt theme. Gnome. https://i.imgur.com/PmEZR1r.png\nThis is how it looks like with. Still way too thin but at least it's not transparent anymore. . Okay. Thank you for your time. . @phw yes it was ambiance. . Since I cant edit on mobile its gnome(think I mentioned that somewhere) . ",
    "cGuille": "Hello!\nI just installed Peek and encountered the same issue on KDE (Plasma 5.5.5).\nIt is nearly impossible to resize the window.\nBesides that, Peek seems really nice! Thank you.\nPlease tell me if I can help you or if you need more details about the issue.. > What GTK theme is this then?\nI am not famliar with desktop themes so I am not sure I use a GTK theme since I run KDE.\nThe KDE theme is Breeze (I suppose it corresponds to this project), this is one of the official (pre-installed) themes as far as I know.\nIn the KDE settings there is an option to choose GTK themes, maybe this is what is used for GTK applications? If that is so, The GTK theme is also Breeze, presumably this.\nDoes this answer your question?\nFor your information, here is how Peek looks on my machine:\n\n. Hello @phw,\nThank you for considering the issue.\n\nNow I also tried the Breeze theme. It maybe looks thinner, but behaves exactly the same. Just to make this clear: In the screenshots above I have easily an area of 10-14 pixels around the edge where I can drag. Isn't that the case for you?\n\nNo, not for me.\nIt seems that:\n- I can resize the window using the top of the window, as there is the title bar.\n- I can resize the window using the left border if I am really careful (I suppose it is a 1px hitbox).\n- I can not resize the window at all using the bottom nor the right border of the window.\n\nAlso I can make the visible border around the inner recording area thicker, but that has no influence on the area that is available for resizing. Peek just provides as much space for resizing as every other window I tried to open.\n\nThis is not the case on KDE\u00a0: the issue I described does not apply to windows of other applications such as Firefox, Konsole, KeePassXC\u2026. I cloned the repo and tried to tweak some properties in the application-window.ui file without success. I tried to set a border width; it displayed a border but it was not related to the ability to grab the window for resize.\nThen I made a bit of research on the subject and found nothing. It was difficult since I do not know anything about GTK or desktop application UI in general, so maybe I did not search with proper keywords.\nIn the end I found a workaround using the KDE settings: I configured a KWin keyboard shortcut to resize the current window. I still can not grab the window's edges to resize it, but I can trigger a resize using a custom keyboard shortcut.. I made a screen capture of Peek (using Peek :smile: ) to demonstrate the following statement:\n\nIt seems that:\n- I can resize the window using the top of the window, as there is the title bar.\n- I can resize the window using the left border if I am really careful (I suppose it is a 1px hitbox).\n- I can not resize the window at all using the bottom nor the right border of the window.\n\n. Hello,\nThank you for trying this!\nI built Peek from sources (on master).\nUnfortunately, this does not seem to do the trick on my setup:\n\nBut if the issue is caused by GTK or KWin, maybe you should not change anything in Peek?\nAs far as I am concerned, I can deal with it thanks to the workaround described earlier in the thread, and we do not even know if this issue concerns a lot of setups. \n. Here it is:\n$ env | grep -E '(XDG_SESSION_DESKTOP|DESKTOP_SESSION|XDG_CURRENT_DESKTOP)'\nDESKTOP_SESSION=/usr/share/xsessions/plasma\nXDG_SESSION_DESKTOP=KDE\nXDG_CURRENT_DESKTOP=KDE. $ cat $HOME/.config/gtk-3.0/settings.ini\n[Settings]\ngtk-font-name=Noto Sans Regular 10\ngtk-theme-name=Breeze\ngtk-icon-theme-name=breeze\ngtk-fallback-icon-theme=Humanity\ngtk-toolbar-style=GTK_TOOLBAR_ICONS\ngtk-menu-images=1\ngtk-button-images=1\n```\n$ G_MESSAGES_DEBUG=all ./peek \n(peek:8255): Gtk-DEBUG: Connecting to session manager\n (peek:8255): DEBUG: desktop-integration.vala:168: Desktop: KDE\n (peek:8255): DEBUG: application.vala:286: GTK theme: Breeze\n (peek:8255): DEBUG: desktop-integration.vala:168: Desktop: KDE\n (peek:8255): DEBUG: application.vala:341: Decoration layout: menu:minimize,maximize,close\n (peek:8255): DEBUG: desktop-integration.vala:168: Desktop: KDE\n (peek:8255): DEBUG: desktop-integration.vala:168: Desktop: KDE\n** (peek:8255): DEBUG: utils.vala:68: Looking for executable ffmpeg (0): /usr/bin/ffmpeg\nUsing screen recorder backend ffmpeg\n (peek:8255): DEBUG: application-window.vala:793: Decoration layout: menu:minimize,maximize,close\n (peek:8255): DEBUG: recording-area.vala:38: Absolute recording area x: 410, y: 239, w: 759, h: 431\n (peek:8255): DEBUG: recording-area.vala:45: Screen w: 1600, h: 900\n (peek:8255): DEBUG: recording-area.vala:58: Clipped recording area x: 410, y: 239, w: 759, h: 431\n (peek:8255): DEBUG: recording-area.vala:69: Scaled recording area x: 410, y: 239, w: 759, h: 431\n (peek:8255): DEBUG: recording-area.vala:38: Absolute recording area x: 410, y: 239, w: 759, h: 431\n (peek:8255): DEBUG: recording-area.vala:45: Screen w: 1600, h: 900\n (peek:8255): DEBUG: recording-area.vala:58: Clipped recording area x: 410, y: 239, w: 759, h: 431\n (peek:8255): DEBUG: recording-area.vala:69: Scaled recording area x: 410, y: 239, w: 759, h: 431\n (peek:8255): DEBUG: application-window.vala:204: delete_event: recorder.is_recording=false, window.is_postprocessing=false\n** (peek:8255): DEBUG: application.vala:116: Application got shutdown signal\n```\n. What is MADE and how can I find out its version?\nI use Kubuntu 16.04 (upgraded from previous versions). \nIt runs KDE Plasma 5.5.5 with Qt 5.5.1. \n\n. Does this answer the question? I am not sure.\n```\n$ dpkg -l libgtk2.0-0 libgtk-3-0\nDesired=Unknown/Install/Remove/Purge/Hold\n| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend\n|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)\n||/ Name                       Version            Architecture       Description\n+++-==========================-==================-==================-==========================================================\nii  libgtk-3-0:amd64           3.18.9-1ubuntu3.3  amd64              GTK+ graphical user interface library\nii  libgtk2.0-0:amd64          2.24.30-1ubuntu1.1 amd64              GTK+ graphical user interface library\nii  libgtk2.0-0:i386           2.24.30-1ubuntu1.1 i386               GTK+ graphical user interface library. Nothing changed for me. :s\nThe update did happen from the daily PPA:\n[\u2026]\nR\u00e9ception de:1 http://ppa.launchpad.net/peek-developers/daily/ubuntu xenial/main amd64 peek amd64 1.1.0-1+git788~ppa17~ubuntu16.04.1 [149 kB]\n[\u2026]\nHere is the installed version:\n$ dpkg -l peek\nDesired=Unknown/Install/Remove/Purge/Hold\n| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend\n|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)\n||/ Name                              Version               Architecture          Description\n+++-=================================-=====================-=====================-========================================================================\nii  peek                              1.1.0-1+git788~ppa17~ amd64                 Simple screen recorder with an easy to use interface\nBut the issue remains.. > That's the latest version. Have you disabled all the KDE settings overrides that I mentioned above as a workaround?\nOh no, I thought it was either the workaround or the fix. Sorry.. So we understood each other until you last question, which I misinterpreted.\nNo, I did not changed the settings as in your workaround.\nI prefer using a keyboard shortcut to resize the window rather than affecting my whole desktop environment.. ",
    "pcj": "I can confirm this in ubuntu 16.04 with gnome desktop. Basically impossible to resize, but double-clicking the title bar does maximize it.. Can I use peek to record peek itself?  (Probably not). @phw If you want a decent dedicated linux laptop, the Dell XPS 13 with ubuntu 16.04 preinstalled is pretty good.  Something like $1500 cheaper than a Mac too.. ",
    "gandalf3": "Would it be possible to draw the transparent overlay which shows the window size up until recording starts? That way we could easily resize with a Alt (or Meta) + Right mouse drag. Then the fix doesn't depend on a specific theme/desktop environment.. @phw Excellent, that's so much better! This way it's easier to use on more unusual WMs as well; I'm currently running bspwm which doesn't do edge-resizing at all, making some version of AltRMB rather indispensable. That said, even when I was using KDE I pretty much never used the edges to resize, preferring SuperRMB. . ",
    "atar-axis": "I have exactly the same problem, using Antergos and latest KDE on Breeze Theme.\n\ncat $HOME/.config/gtk-3.0/settings.ini\n[Settings]\ngtk-application-prefer-dark-theme=false\ngtk-button-images=1\ngtk-cursor-theme-name=Breeze_Snow\ngtk-fallback-icon-theme=Adwaita\ngtk-font-name=ABeeZee Regular 10\ngtk-icon-theme-name=breeze\ngtk-menu-images=1\ngtk-primary-button-warps-slider=0\ngtk-theme-name=Breeze\ngtk-toolbar-style=GTK_TOOLBAR_ICONS\n```\nflood@flood-r3 ~> env G_MESSAGES_DEBUG=all peek\n(peek:19161): Gtk-DEBUG: Connecting to session manager\n(peek:19161): Gtk-DEBUG: Failed to get the GNOME session proxy: The name org.gnome.SessionManager is not owned\n(peek:19161): Gtk-DEBUG: Failed to get the Xfce session proxy: The name org.xfce.SessionManager is not owned\n(peek:19161): Gtk-DEBUG: Failed to get an inhibit portal proxy: The name org.freedesktop.portal.Desktop is not owned\n (peek:19161): DEBUG: desktop-integration.vala:168: Desktop: KDE\n (peek:19161): DEBUG: application.vala:286: GTK theme: Breeze\n (peek:19161): DEBUG: desktop-integration.vala:168: Desktop: KDE\n (peek:19161): DEBUG: application.vala:341: Decoration layout: menu:minimize,maximize,close\n (peek:19161): DEBUG: desktop-integration.vala:168: Desktop: KDE\n (peek:19161): DEBUG: application.vala:221: Changed keybinding_toggle_recording  => R\n (peek:19161): WARNING : Binding 'R' failed!\n (peek:19161): DEBUG: desktop-integration.vala:168: Desktop: KDE\n (peek:19161): DEBUG: utils.vala:68: Looking for executable ffmpeg (0): /usr/bin/ffmpeg\nUsing screen recorder backend ffmpeg\n(peek:19161): Gtk-WARNING **: Theme parsing error: gtk.css:68:35: The style property GtkButton:child-displacement-x is deprecated and shouldn't be used anymore. It will be removed in a future version\n(peek:19161): Gtk-WARNING **: Theme parsing error: gtk.css:69:35: The style property GtkButton:child-displacement-y is deprecated and shouldn't be used anymore. It will be removed in a future version\n(peek:19161): Gtk-WARNING **: Theme parsing error: gtk.css:71:36: The style property GtkCheckMenuItem:indicator-size is deprecated and shouldn't be used anymore. It will be removed in a future version\n(peek:19161): Gtk-WARNING : Theme parsing error: gtk.css:76:30: The style property GtkExpander:expander-size is deprecated and shouldn't be used anymore. It will be removed in a future version\n (peek:19161): DEBUG: application-window.vala:824: Decoration layout: menu:minimize,maximize,close\n (peek:19161): DEBUG: recording-area.vala:38: Absolute recording area x: 382, y: 315, w: 468, h: 216\n (peek:19161): DEBUG: recording-area.vala:45: Screen w: 1366, h: 768\n (peek:19161): DEBUG: recording-area.vala:58: Clipped recording area x: 382, y: 315, w: 468, h: 216\n (peek:19161): DEBUG: recording-area.vala:69: Scaled recording area x: 382, y: 315, w: 468, h: 216\n (peek:19161): DEBUG: recording-area.vala:38: Absolute recording area x: 382, y: 315, w: 468, h: 216\n (peek:19161): DEBUG: recording-area.vala:45: Screen w: 1366, h: 768\n (peek:19161): DEBUG: recording-area.vala:58: Clipped recording area x: 382, y: 315, w: 468, h: 216\n (peek:19161): DEBUG: recording-area.vala:69: Scaled recording area x: 382, y: 315, w: 468, h: 216\n```\n. I can confirm that, latest Plasma finally fixed the issue somehow,\nit's still very thin but at least doable!\n\n. sorry, i think i forgot to mention at #279 that I am also using the antergos package!\nthe problem appears at: antergos/peek 1.2.2-1\nbut does not at: aur/peek 1.2.2-1\nnot a big deal when i can simply use the aur package instead - thanks!. ",
    "McKean": "@sQVe see this screenshot:\n\n@phw yes I'm using compton, I'm not sure if it works without. Clicking works perfectly fine too. I can upload a video if this would help.\nOne thing that would be beneficial is to be able to start peek without that top bar, that way it would record the whole window which is stacked (you can see in the screenshot that it will not capture the top part). Other than that it works really well.\nedit:\n@phw I just tested disabling compton and it worked!. i3 stacked windows no compton:\n. @sQVe great to hear, instead of using the two floating windows approach I would recommend using the scratchpad method, where you put Peek into a scratch pad if you want to have a strictly defined area to record.. @phw yeah that's pretty much it. Also the reason why I'm requesting: https://github.com/phw/peek/issues/203\nBut perhaps I should just try and contribute towards such a feature myself :). yeah, you could use the semi transparent surface and show that text on it x/y centered. once you start the capture it will not show anymore and everyone is happy. Perhaps also allow a flag which will start capturing directly. That would follow the gnu way of being able to plug in/out applications easily.\nThat would make it possible to have a key binding in i3 for example which will stack that window and start recording, when stoped the file is generated and the application is closed. Ideally then have dropobox uploader take the fila and generate a public link for sharing.. Very nice!\n. so when doing --no-headerbar --start it will start right away, am I right? then ctrl + alt r and it will stop?\nI guess only thing missing would be --file to set a save path. Then one could write a bash script which starts peek with all the params, arranges the windows, and then does something with the resulting file (eg dropbox upload public link fetch)\nNot quite... I guess it's a bit tricky to wait for peek to end. So a self destruction upon save might be necessary. I'm just thinking out loud.. ah gotcha. sorry for my post edit...\nso ideally: peek --no-headerbar --start --autoclose --type gif --file ~/gifs/temp.gif. although perhaps it might be better to do as you mentioned:\npeek --no-headerbar\ni3 window modifications (stacking)\npeek --start --autoclose --type gif --file $(myfile)\ndo something with $(myfile). ",
    "jikamens": "https://bugs.launchpad.net/ubuntu/+source/xorg-server/+bug/1727742. >Can you try recording a video in GNOME Shell itself and see if this also freezes your display? The default keyboard shortcut for this is Shift + Ctrl+ Alt + R...\nWorks fine, doesn't freeze display.. Why is there a discussion about opening the preferences window in an issue which has nothing to do with that?. ",
    "DougBeney": "Thanks for posting. I'm experiencing the same issue on 17.10.. > Can you try recording a video in GNOME Shell itself and see if this also freezes your display? The default keyboard shortcut for this is Shift + Ctrl+ Alt + R...\nThat seems to be the problem for me. Freezes display exactly like in Peek. \n. @phw I'm having this issue on Fedora 28 w/ GNOME Shell 3.28.1.. @phw My bad, didn't read the issue 100% correctly. I'll open a new issue to better explain it.. ",
    "kevzlou7979": "+1 this is happening to me also. And there's no option to close it. . ",
    "EECSGEEK": "How can I get the setting/preferance windows about peek?\nI can't find the FPS setting on peek.\nI try 'peek --help-all' but no answer\n--Ubuntu17.10_amd64. @phw \nThank you!I find the little triangle icon on top menu.\n. ",
    "fatso83": "To save other people a search, here's a link to how you fix the issue by switching to Xorg. ",
    "p-e-w": "This is a wonderful improvement; I only wish it went even further! The header bar is wasting space at the moment and more than these two buttons can fit. The framerate, which is probably the next most used setting, could also be accommodated:\n[Record] as [GIF ] at [ 10][+-] fps\n            [APNG]\n            [WebM]\n            [MP4 ]\nThe widgets in brackets are a button, a dropdown, and a SpinButton, respectively. The text between is just labels. That way, you have a natural language sentence expressing what is going to happen.\nI also think the widgets should be left-aligned in the header bar instead of centered, which is what other applications using buttons in the header bar (Gedit, Simple Scan) are doing. The center/right area would then be freed up for information like rectangle dimensions, time elapsed, file size estimate(?), or similar, which is currently sorely missing.\n. @gort818 Just noticed that you seem to have copied application-window.vala from src/ui to ui. Is that intentional?\nCode quality looks OK now. Of course, @phw is the boss. Let's see what he has to say...\n. Indentation levels of if and } do not align.\n. There should be no whitespace after ( and before ). There should be a space before {. See the following block.\n. There should be a space before the comment.\n. Indentation level does not align with previous line.\n. ?\n. ?. Missing blank line.\n. Indentation.\n. Indentation.\n. Too many blank lines.\n. This code duplication screams for some kind of unification where the format is a parameter, but I don't know if that's possible when using an XML UI definition.\n. Indentation.\n. Indentation does not match switch.\n. Indentation does not match private.\n. Indentation does not match if.\n. Missing whitespace around =.\n. Missing indentation.\n. These blank lines were not there before so I think they should be removed. Same below.\n. Too many blank lines, should match spacing between other methods.\n. Too many blank lines.\n. ",
    "DylanC": "@phw - This happened to me recently in v1.2.2. I could see the last screen of the countdown right at the start of my gif. I will see can I record an example for you. Only workaround for me was to turn off the countdown. . @phw - Built from source. The fix works. :) . @phw - Apologies, I should have used the search first. Yes, I'm using 17.10 with Gnome. The strange thing is it worked for maybe 5 times and now stopped working entirely on Gnome.\nI will try with X session and let you know how I get on.. Recording at 15fps seemed to work but 30 did not. System would freeze for a while before the error popup happened. . @phw - This worked. Thanks!. @phw - Understandable of course. I have Gnome v3.26.2. Hopefully its fixed in a newer release.. ",
    "dlbnco": "For me, it seems to happen when the cursor is active when the countdown gets to zero and it starts recording.. ",
    "nipunasudha": "Thank you for looking into the issue I posted. I'm hopeful you guys would be able to find a solution.. ",
    "darkvertex": "glib-compile-schemas /usr/share/glib-2.0/schemas made it work from any folder, yay!\nNow I just need to figure out how to get my rpm to do that for me. Tried to put glib-compile-schemas %{buildroot}/%{_datadir}/glib-2.0/schemas in the %install block but it didn't want to run when building the rpm since it requires root. I guess it needs to go somewhere else...\nIn any case, thanks a lot for the tip, I am closer to making it work! Will post here if and when I am successful.\n. Woohoo! Got it:\n%post\nglib-compile-schemas /usr/share/glib-2.0/schemas\nAdded that, now my rpm works. My CentOS7 rpm is good, huzzah! Thanks again.\n. ",
    "pasniak": "That worked (after a 150MB download). \nThanks!. ",
    "animan01": "From source not work correctly.\n\n$ cmake -DCMAKE_INSTALL_PREFIX=/usr/local ..\n-- Found Vala: /usr/bin/valac (found version \"0.34.6\") \n-- Found Vala: /usr/bin/valac (found suitable version \"0.34.6\", minimum required is \"0.22\") \n-- checking for module 'gtk+-3.0>=3.14'\n--   package 'gtk+-3.0>=3.14' not found\nCMake Error at /usr/share/cmake/Modules/FindPkgConfig.cmake:279 (message):\n  A required package was not found\nCall Stack (most recent call first):\n  /usr/share/cmake/Modules/FindPkgConfig.cmake:333 (_pkg_check_modules_internal)\n  CMakeLists.txt:31 (pkg_check_modules)\n-- checking for module 'cairo'\n--   package 'cairo' not found\nCMake Error at /usr/share/cmake/Modules/FindPkgConfig.cmake:279 (message):\n  A required package was not found\nCall Stack (most recent call first):\n  /usr/share/cmake/Modules/FindPkgConfig.cmake:333 (_pkg_check_modules_internal)\n  CMakeLists.txt:32 (pkg_check_modules)\n-- checking for module 'keybinder-3.0'\n--   package 'keybinder-3.0' not found\nCMake Error at /usr/share/cmake/Modules/FindPkgConfig.cmake:279 (message):\n  A required package was not found\nCall Stack (most recent call first):\n  /usr/share/cmake/Modules/FindPkgConfig.cmake:333 (_pkg_check_modules_internal)\n  CMakeLists.txt:36 (pkg_check_modules)\nCMake Error at CMakeLists.txt:57 (if):\n  if given arguments:\n\"VERSION_EQUAL\" \"3.16\" \"OR\" \"VERSION_GREATER\" \"3.16\"\n\nUnknown arguments specified\n-- Configuring incomplete, errors occurred!\nSee also \"Peek/peek/build/CMakeFiles/CMakeOutput.log\".\n\nExample, keybinder was installed - https://i.imgur.com/glYcHyj.png\n. Hm...really does work :). phw, thanks for helping!. ",
    "andersaamodt": "I have installed gifski 0.6.0 on Ubuntu 14.04 but when I open Peek the preferencs box does not show the quality slider. Is it not detecting gifski correctly?. Ah. Is there a workaround?. Hmm, I installed the update but there is still no progress bar.. No, they don't show up. ",
    "cb109": "Worked around by switching to Unity as window manager.. ",
    "uqmessias": "@phw \nDo you know if it was already fixed and if it was, how can I get the fix and upgrade my system?\n. ",
    "mcampbell508": "I can confirm this is an issue. \nHad 3+GB free on a machine before recording...\nStarted recording a gif which was about 20 seconds and system froze due to insufficient space available.\nI guess 20 seconds is a bit too long for a gif, but still this seems a bit off, to me.\nAwesome tool though, by far the best available on Linux :+1:  . ",
    "patrickelectric": "I updated to the last version and now is working.\nTy.. ",
    "esfourteen": "after further investigation, this seems to be a known bug under gnome/wayland.. ",
    "glaubersm": "Thank you fot your detailed post.\nOverride command works to save files to home, but two problmens remain: it's not possible to save the gif to my ntfs partition and bookmarks (\"DADOS\" and \"Desktop\") are not available in side bar.. Thank you phw.\nHave a nice day.. solved after replace libx264-10bit with libx264.\nAppImage works even when libx264-10bit is installed.\nThank you.\n. ",
    "zensubz": "Hi,\nThanks for your kind response. Yes, the issue seems to be with gifski. I prepared a small video with peek in webm format and did the exercise you have mentioned. The output (when gifski was called-in) is:\ngifski -o testanim.gif frame*.png\nFrame 2 / 178  _............................................................................... 18m Segmentation fault\nI had actually downloaded gifski (v0.6.1, release binary from its website), and it indeed gives information when invoked with 'gifski --help' via command-line. But it fails, at least in my case, to do the conversion job. \nOther than this small issue involving gifski, there is as such no problem working with your great software. I am not sure if I have to file any bug-report to gifski - compiling it from source seems to be a bit tedious as I don't have rust/cargo in my system. . ",
    "ernstki": "I can confirm that compiling gifski from source (using rustup-init from here) and no extra options beyond what're mentioned in ImageOptim/gifski#9 fixed this problem for me on elementaryOS Loki (0.4, which derives from Ubuntu 16.something).\nA summary of the steps necessary:\n```bash\nif you're bold and brave\ncurl https://sh.rustup.rs -sSf | sh\nor else https://github.com/rust-lang-nursery/rustup.rs/#other-installation-methods\nwe need to have ~/.cargo/bin in our path\necho 'source $HOME/.cargo/env' >> .bashrc\nsource $HOME/.cargo/env\ncd /place/where/you/do/dev/stuff\ngit clone https://github.com/ImageOptim/gifski.git\ncd gifski\ncargo run --release\ncargo install\n```\nFinally, either run peek from that same shell or log out and back in again, since your login shell won't have ~/.cargo/bin in your path until you do that. Peek won't show the \"Use gifski\" option unless it finds it in your $PATH.. ",
    "mlaitinen": "Ahh, ok. I've been using Ubuntu for many years but it's the first time I hear about snaps.\nI installed the snap and conneted peek, but now I get:\n```\n$ peek\n(peek:5460): Gtk-WARNING **: Locale not supported by C library.\n    Using the fallback 'C' locale.\nUsing screen recorder backend ffmpeg\n/snap/peek/619/bin/launch-peek: line 7:  5460 Segmentation fault      (core dumped) peek\n```. Ah, might be related to Wayland. I don't know what that is but I'll try to install Peek from the PPA.. ",
    "jingle0927": "@phw   Thanks. ",
    "umpirsky": "It causes entire system to freeze for me and only option is to hard reset.. Thanks @phw!\nIt's sad seeing Peek loosing customers because of Gnome Shell bug.. @phw I have installed a screen recorder that works fine on Wayland. Don't want to promote here, but if you want to check it out for educational purposes, I can share via email or here. It's open source too.. @phw Ye, that might be the case, I experimented with the snap. :). I like the dialog, if you can detect this bugs and prevent them, it will be good for the app and it's users.\nUntil they resolve it.. Smart move.. ",
    "aoloe": "i would also wish, to to set a few \"common\" sizes (and eventually positions).\ncurrently, iv'e solved it with a python script that allows me to set the size of any window.\n+--------------+-+-+ +-----+\n|1200 x 840    | v | | add |\n+--------------+-+-+ +-----+\n|800 x 1200        |\n|1300 x 800        |\n+------------------+. have you tested if lossygif also brings big advantages for \"common\" screen captures? as i understood the article i've read, it was mainly for compressing movie snippets (as in the example above).... the less options, the better : - )\ni have not much experience with video and codecs, so my opinion is not really relevant...\nbut i'm creating a workflow around webm with VP9 and -- for what i'm doing -- it's much faster and produces smaller files.\nif nobody has a technical objection, i'm for VP9 only.... ",
    "ewnd9": "Just for the reference a corresponding issue in the Chromium tracker https://bugs.chromium.org/p/chromium/issues/detail?id=356210. ",
    "frmdstryr": "Come to think of it, I've only ever uploaded screenshots using copy and paste.  Also tried to copy and paste a gif here and it only uses the url so I guess this is just not supported. Drag and drop seems to be the only way to do this (vs manually browsing).\nPerhaps another approach would be to add a \"drag\" target to the last created file right in peek that you can simply drag and drop from peek?  I guess this is not saving much time as it already shows a pop-up to open the file anyways (although I do forget where I save them sometimes and it would be useful). \nI can close this if this is a wontfix.. ",
    "rubaboo": "I think these are two separate issues. It doesn't work with Framerate 10 and gifski enabled, and doesn't work at all with Framerate 1 and an interval shorter than about 6 seconds.. I just wanted to make a screenshot (not animated), that's why framerate 1. :)\nCan you add a screenshot functionality, so there is no need for another app just for that?. No. I'm renaming this issue so it's not a duplicate.\nFrame 141 / 1900  ########_....................................................................................................... 30s Segmentation fault. I'll try again to explain... Using gifski is not really important to me. The other issue I found is that peek gives the same error message when the framerate is set to 1. Regardless of gifski setting. So I'd like to report that issue with peek, here. I renamed the issue accordingly. This is not about gifski anymore.\nHere are the conditions that lead to Missing output file after post processing. error:\nOutput format: GIF\n\"Use gifski\" is unchecked, clear.\nFramerate: 1\nStart recording and stop in 3 seconds or so.\nIt spins \"Rendering\" for a moment, then there is \"Save animation\" dialog, and when I hit Save, I get the error.. On xfce 4.12.\n$ ffmpeg -version\nffmpeg version 3.4.1-1 Copyright (c) 2000-2017 the FFmpeg developers\nbuilt with gcc 7 (Debian 7.2.0-17)\nconfiguration: --prefix=/usr --extra-version=1 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --disable-stripping --enable-avresample --enable-avisynth --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-libpulse --enable-librubberband --enable-librsvg --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libssh --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzmq --enable-libzvbi --enable-omx --enable-openal --enable-opengl --enable-sdl2 --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-libopencv --enable-libx264 --enable-shared\nlibavutil      55. 78.100 / 55. 78.100\nlibavcodec     57.107.100 / 57.107.100\nlibavformat    57. 83.100 / 57. 83.100\nlibavdevice    57. 10.100 / 57. 10.100\nlibavfilter     6.107.100 /  6.107.100\nlibavresample   3.  7.  0 /  3.  7.  0\nlibswscale      4.  8.100 /  4.  8.100\nlibswresample   2.  9.100 /  2.  9.100\nlibpostproc    54.  7.100 / 54.  7.100. ",
    "Qwertie-": "Hah, I didn't even know I was running wayland but I checked and that seems to be the case.. ",
    "i-snyder": "That did it, thanks! I usually don't run software with sudo, but I think what must've happened is I ran it through Nautilus in sudo mode on accident. Now that I'm understanding this all better now I'll be sure to be more careful with sudo in the future. Thanks for the super quick response and the explanation!. ",
    "arist0tl3": "I get a different experience -- the peek window \"stays\" on the initial workspace, but records whatever is at that screen position when moving around the workspaces.\nGnome 3.8.13\nUbuntu 16.04.3 LTS 64-bit\nI also use https://extensions.gnome.org/extension/484/workspace-grid/\n\n. ",
    "fenimore": "Hmm ok, so it's expected behavior? And yeah, it's only in the lockscreen, I don't see any notification area. So I went to the gnome settings and disabled the notifications for peek and it went away. So I suppose you can close this? . ",
    "Heliotrop": "gifski crashed with SIGSEGV (gifski 0.7.1)\n. ",
    "Komzpa": "This is x11. KDE, if matters.. @phw I use Breeze-Dark for all qt, gtk2, gtk3.. ",
    "briner": "Hi,\nsorry, but the message above was generated automagically by the application when clicking \"report\".\nI did have launch it within my console.\nI'm running in with gnome-shell within wayland on a Debian Testing\ncED\n```\nflatpak run com.uploadedlobster.peek/x86_64/stable\n(peek:3): Gtk-WARNING **: Locale not supported by C library.\n    Using the fallback 'C' locale.\nUsing screen recorder backend gnome-shell\nRecording to file /home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peek6FR8CZ.mkv\nError: Child process exited with code 1\nError deleting temporary file /home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peek6FR8CZ.mkv: Command \"ffmpeg -y -i /home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peek6FR8CZ.mkv -vf fps=5,palettegen /home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekCXG7CZ.png\" failed with status 256 (received signal 0).\nOutput:\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers  built with gcc 6.2.0 (GCC)  configuration: --prefix=/app --disable-debug --disable-static --enable-gpl --enable-libvpx --enable-libx264 --enable-shared --enable-libxcb --enable-libxcb-xfixes --disable-libxcb-shape --disable-ffplay --disable-ffprobe --disable-ffserver --disable-doc --disable-everything --enable-decoder=libvpx_vp8 --enable-decoder=h264 --enable-decoder=png --enable-decoder=rawvideo --enable-encoder=apng --enable-encoder=ffvhuff --enable-encoder=gif --enable-encoder=libvpx_vp8 --enable-encoder=libx264 --enable-encoder=libx264rgb --enable-encoder=png --enable-demuxer=image2 --enable-demuxer=matroska --enable-muxer=apng --enable-muxer=gif --enable-muxer=image2 --enable-muxer=matroska --enable-muxer=mp4 --enable-muxer=webm --enable-filter=crop --enable-filter=fps --enable-filter=palettegen --enable-filter=paletteuse --enable-filter=scale --enable-protocol=file --enable-indev=xcbgrab  WARNING: library configuration mismatch  avutil      configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  avcodec     configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  avformat    configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  avdevice    configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  avfilter    configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  swscale     configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  swresample  configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  postproc    configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  libavutil      55. 78.100 / 55. 78.100  libavcodec     57.107.100 / 57.107.100  libavformat    57. 83.100 / 57. 83.100  libavdevice    57. 10.100 / 57. 10.100  libavfilter     6.107.100 /  6.107.100  libswscale      4.  8.100 /  4.  8.100  libswresample   2.  9.100 /  2.  9.100  libpostproc    54.  7.100 / 54.  7.100Input #0, matroska,webm, from '/home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peek6FR8CZ.mkv':  Metadata:    encoder         : GStreamer matroskamux version 1.12.4    creation_time   : 2018-01-18T13:54:07.000000Z  Duration: 00:00:12.06, start: 0.016000, bitrate: 489 kb/s    Stream #0:0(eng): Video: vp8, yuv420p(progressive), 1094x774, SAR 1:1 DAR 547:387, 5 fps, 1k tbr, 1k tbn, 1k tbc (default)    Metadata:      title           : Video[NULL @ 0xe9fe40] Unable to find a suitable output format for '/home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekCXG7CZ.png'/home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekCXG7CZ.png: Invalid argument\nRecording canceled: Missing output file after post processing.\nBRINER: Now there is a dialog telling : Recording Error: An unexpected error occured during recording. Recording was aborted\n```\nflatpak list\nRef                                                   Options       \ncom.uploadedlobster.peek/x86_64/stable                system,current\ncom.vinszent.GnomeTwitch/x86_64/stable                system,current\nde.haeckerfelix.gradio/x86_64/stable                  system,current\norg.nextcloud.Nextcloud/x86_64/stable                 system,current\norg.telegram.desktop/x86_64/master                    system        \norg.telegram.desktop/x86_64/stable                    system,current\norg.freedesktop.Platform.Icontheme.Adwaita/x86_64/1.0 system,runtime\norg.freedesktop.Platform.VAAPI.Intel/x86_64/1.6       system,runtime\norg.gnome.Platform/x86_64/3.24                        system,runtime\norg.gnome.Platform/x86_64/3.26                        system,runtime\norg.kde.Platform/x86_64/5.9                           system,runtime\nflatpak info com.uploadedlobster.peek/x86_64/stable\nRef: app/com.uploadedlobster.peek/x86_64/stable\nID: com.uploadedlobster.peek\nArch: x86_64\nBranch: stable\nOrigin: flathub\nDate: 2017-12-03 16:37:08 +0000\nSubject: Release 1.2.1 (ee24a4cc)\nCommit: 57459940c1d047cbd23318bc303d6ab224a01341282eabc92de46188d832c4a1\nParent: 17bb112edbdf083eb32c83d7293fc91c4c10f9affb7b31811371c31483b37700\nLocation: /var/lib/flatpak/app/com.uploadedlobster.peek/x86_64/stable/57459940c1d047cbd23318bc303d6ab224a01341282eabc92de46188d832c4a1\nInstalled size: 7.3 MB\nRuntime: org.gnome.Platform/x86_64/3.26\nflatpak --version\nFlatpak 0.10.2.1\n. Hi,\nyes, I do have the plugins-good\ndpkg -l| grep plugins-good\nii  gstreamer1.0-plugins-good:amd64                             1.12.4-1                             amd64        GStreamer plugins from the \"good\" set\njournalctl -f gives (this is long). The line jumps was added by me: the first just after clicking start, the second just before clicking stop.\n``\njan 19 11:35:16 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Activating service name='org.gnome.Calculator.SearchProvider' requested by ':1.10' (uid=1000 pid=1872 comm=\"/usr/bin/gnome-shell \")\njan 19 11:35:16 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Activating service name='org.gnome.Contacts.SearchProvider' requested by ':1.10' (uid=1000 pid=1872 comm=\"/usr/bin/gnome-shell \")\njan 19 11:35:16 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Activating service name='org.gnome.Nautilus' requested by ':1.10' (uid=1000 pid=1872 comm=\"/usr/bin/gnome-shell \")\njan 19 11:35:16 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Activating service name='org.gnome.clocks' requested by ':1.10' (uid=1000 pid=1872 comm=\"/usr/bin/gnome-shell \")\njan 19 11:35:16 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Successfully activated service 'org.gnome.Calculator.SearchProvider'\njan 19 11:35:16 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Successfully activated service 'org.gnome.Nautilus'\njan 19 11:35:16 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Successfully activated service 'org.gnome.clocks'\njan 19 11:35:16 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Successfully activated service 'org.gnome.Contacts.SearchProvider'\njan 19 11:35:16 cedian gnome-software[2129]: running search with refine-flags=require-icon with timeout=60 with max-results=20 with search=pee on plugin=flatpak took 8ms\njan 19 11:35:16 cedian org.gnome.Nautilus[1829]: sys:1: PyGIWarning: Nautilus was imported without specifying a version first. Use gi.require_version('Nautilus', '3.0') before import to ensure that the right version gets loaded.\njan 19 11:35:16 cedian dhclient[1272]: DHCPREQUEST of 129.194.132.128 on wlp4s0 to 1.1.1.1 port 67\njan 19 11:35:17 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Activating service name='com.uploadedlobster.peek' requested by ':1.10' (uid=1000 pid=1872 comm=\"/usr/bin/gnome-shell \")\njan 19 11:35:17 cedian systemd[906]: Started flatpak-com.uploadedlobster.peek-6817.scope.\njan 19 11:35:17 cedian peek[6827]: Locale not supported by C library.\n                                           Using the fallback 'C' locale.\njan 19 11:35:17 cedian dbus-daemon[1829]: [session uid=1000 pid=1829] Successfully activated service 'com.uploadedlobster.peek'\njan 19 11:35:17 cedian gnome-shell[1872]: Object Clutter.Clone (0x55f1fa491ad0), has been already finalized. Impossible to get any property from it.\njan 19 11:35:17 cedian gnome-shell[1872]: Object Clutter.Clone (0x55f1fa491ad0), has been already finalized. Impossible to set any property to it.\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: == Stack trace for context 0x55f1f455d000 ==\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #0 0x7ffefc879360 b   resource:///org/gnome/shell/ui/tweener.js:73 (0x7f9c5c4ddef0 @ 9)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #1 0x7ffefc879400 b   resource:///org/gnome/shell/ui/tweener.js:105 (0x7f9c5c4df230 @ 36)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #2 0x7ffefc8794a0 b   resource:///org/gnome/shell/ui/tweener.js:92 (0x7f9c5c4df098 @ 52)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #3 0x7ffefc87a410 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:203 (0x7f9c5c4e9cd0 @ 54)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #4 0x7ffefc87a560 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:332 (0x7f9c5c4e9d58 @ 1626)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #5 0x7ffefc87a610 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:345 (0x7f9c5c4e9de0 @ 100)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #6 0x7ffefc87a6a0 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:360 (0x7f9c5c4e9e68 @ 10)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #7 0x7ffefc87a720 I   resource:///org/gnome/gjs/modules/signals.js:126 (0x7f9c5c4e2b38 @ 386)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #8 0x7ffefc87a7d0 b   resource:///org/gnome/shell/ui/tweener.js:208 (0x7f9c5c4df808 @ 159)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #9 0x7ffefc87a830 I   resource:///org/gnome/gjs/modules/_legacy.js:82 (0x7f9c5c4c2bc0 @ 71)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #10 0x7ffefc87a830 I   resource:///org/gnome/shell/ui/tweener.js:183 (0x7f9c5c4df780 @ 20)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #11 0x7ffefc87a8c0 I   self-hosted:917 (0x7f9c5c4ee5e8 @ 394)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: == Stack trace for context 0x55f1f455d000 ==\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #0 0x7ffefc879360 b   resource:///org/gnome/shell/ui/tweener.js:80 (0x7f9c5c4ddef0 @ 82)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #1 0x7ffefc879400 b   resource:///org/gnome/shell/ui/tweener.js:105 (0x7f9c5c4df230 @ 36)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #2 0x7ffefc8794a0 b   resource:///org/gnome/shell/ui/tweener.js:92 (0x7f9c5c4df098 @ 52)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #3 0x7ffefc87a410 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:203 (0x7f9c5c4e9cd0 @ 54)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #4 0x7ffefc87a560 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:332 (0x7f9c5c4e9d58 @ 1626)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #5 0x7ffefc87a610 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:345 (0x7f9c5c4e9de0 @ 100)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #6 0x7ffefc87a6a0 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:360 (0x7f9c5c4e9e68 @ 10)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #7 0x7ffefc87a720 I   resource:///org/gnome/gjs/modules/signals.js:126 (0x7f9c5c4e2b38 @ 386)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #8 0x7ffefc87a7d0 b   resource:///org/gnome/shell/ui/tweener.js:208 (0x7f9c5c4df808 @ 159)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #9 0x7ffefc87a830 I   resource:///org/gnome/gjs/modules/_legacy.js:82 (0x7f9c5c4c2bc0 @ 71)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #10 0x7ffefc87a830 I   resource:///org/gnome/shell/ui/tweener.js:183 (0x7f9c5c4df780 @ 20)\njan 19 11:35:17 cedian org.gnome.Shell.desktop[1872]: #11 0x7ffefc87a8c0 I   self-hosted:917 (0x7f9c5c4ee5e8 @ 394)\njan 19 11:35:17 cedian evolution-addre[6729]: Unknown valueb\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian evolution-addre[6729]: Unknown value b\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian evolution-addre[6729]: Unknown valueb\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian evolution-addre[6729]: Unknown value b\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian evolution-addre[6729]: Unknown valueb\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian evolution-addre[6729]: Unknown value b\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian gnome-contacts-[6672]: Unknown valueb\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian gnome-contacts-[6672]: Unknown value b\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian gnome-contacts-[6672]: Unknown valueb\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian gnome-contacts-[6672]: Unknown value b\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian gnome-contacts-[6672]: Unknown valueb\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:17 cedian gnome-contacts-[6672]: Unknown value `b\\' for ENCODING parameter.  values will be treated as raw\njan 19 11:35:26 cedian org.gnome.Shell.desktop[1872]: Recording to /home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekZ3G9CZ.mkv\njan 19 11:35:31 cedian dhclient[1272]: DHCPREQUEST of 129.194.132.128 on wlp4s0 to 1.1.1.1 port 67\njan 19 11:35:36 cedian com.uploadedlobster.peek[1829]: Error: Child process exited with code 1\njan 19 11:35:36 cedian com.uploadedlobster.peek[1829]: Error deleting temporary file /home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekZ3G9CZ.mkv: Command \"ffmpeg -y -i /home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekZ3G9CZ.mkv -vf fps=5,palettegen /home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekXQTGDZ.png\" failed with status 256 (received signal 0).\njan 19 11:35:36 cedian com.uploadedlobster.peek[1829]: Output:\njan 19 11:35:36 cedian com.uploadedlobster.peek[1829]: ffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers  built with gcc 6.2.0 (GCC)  configuration: --prefix=/app --disable-debug --disable-static --enable-gpl --enable-libvpx --enable-libx264 --enable-shared --enable-libxcb --enable-libxcb-xfixes --disable-libxcb-shape --disable-ffplay --disable-ffprobe --disable-ffserver --disable-doc --disable-everything --enable-decoder=libvpx_vp8 --enable-decoder=h264 --enable-decoder=png --enable-decoder=rawvideo --enable-encoder=apng --enable-encoder=ffvhuff --enable-encoder=gif --enable-encoder=libvpx_vp8 --enable-encoder=libx264 --enable-encoder=libx264rgb --enable-encoder=png --enable-demuxer=image2 --enable-demuxer=matroska --enable-muxer=apng --enable-muxer=gif --enable-muxer=image2 --enable-muxer=matroska --enable-muxer=mp4 --enable-muxer=webm --enable-filter=crop --enable-filter=fps --enable-filter=palettegen --enable-filter=paletteuse --enable-filter=scale --enable-protocol=file --enable-indev=xcbgrab  WARNING: library configuration mismatch  avutil      configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  avcodec     configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  avformat    configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  avdevice    configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  avfilter    configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  swscale     configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  swresample  configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  postproc    configuration: --prefix=/usr --disable-debug --disable-doc --disable-static --enable-gpl --enable-optimizations --enable-libvpx --enable-shared --disable-ffplay --disable-ffprobe --disable-ffserver --disable-everything --enable-gnutls --enable-libfontconfig --enable-libfreetype --enable-libopus --enable-libpulse --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libwebp --enable-openal --enable-opengl --enable-sdl2 --enable-decoder='pcm_s16be,pcm_s24be,pcm_mulaw,pcm_alaw' --enable-decoder='pcm_u8,pcm_s16le,pcm_s24le,pcm_f32le' --enable-decoder='theora,vorbis,vp8,vp9,mp3,flac,webp' --enable-decoder='rawvideo,png,gif' --enable-parser='opus,vp3,vorbis,vp8,mpegaudio,flac' --enable-demuxer='ogg,matroska,wav,mp3,gif,flac' --enable-filter='crop,scale' --enable-protocol=file  libavutil      55. 78.100 / 55. 78.100  libavcodec     57.107.100 / 57.107.100  libavformat    57. 83.100 / 57. 83.100  libavdevice    57. 10.100 / 57. 10.100  libavfilter     6.107.100 /  6.107.100  libswscale      4.  8.100 /  4.  8.100  libswresample   2.  9.100 /  2.  9.100  libpostproc    54.  7.100 / 54.  7.100Input #0, matroska,webm, from '/home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekZ3G9CZ.mkv':  Metadata:    encoder         : GStreamer matroskamux version 1.12.4    creation_time   : 2018-01-19T10:35:26.000000Z  Duration: 00:00:10.33, start: 0.011000, bitrate: 463 kb/s    Stream #0:0(eng): Video: vp8, yuv420p(progressive), 1094x774, SAR 1:1 DAR 547:387, 5 fps, 1k tbr, 1k tbn, 1k tbc (default)    Metadata:      title           : Video[NULL @ 0x6b7aa0] Unable to find a suitable output format for '/home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekXQTGDZ.png'/home/briner/.var/app/com.uploadedlobster.peek/cache/peek/peekXQTGDZ.png: Invalid argument\njan 19 11:35:36 cedian com.uploadedlobster.peek[1829]: Recording canceled: Missing output file after post processing.\n```\n. That made my day. Thank you very much for your fast resolution.\nNow, it works like a charm !\n. ",
    "mauriandres": "Hello Philipp,\nThank you very much for getting back to me!\nI ended up installing it via FlatPak and it worked great!\nGreat educational tool!\nAppreciate your attention,\nMauricio\nOn Jan 23, 2018 3:02 PM, \"Philipp Wolfer\" notifications@github.com wrote:\nI am not maintaining this repository and can currently not test myself, but\nmaybe it just does not work with Fedora 27. I have actually setup my own\nrepositories a while back, but as I was not sure whether I can maintain\nthem I have not announced it. But please try if any of those repositories\nwork:\n\nhttps://download.opensuse.org/repositories/home:/phiwo:/\n   peek/Fedora_25/home:phiwo:peek.repo\n   https://download.opensuse.org/repositories/home:/phiwo:/peek/Fedora_25/home:phiwo:peek.repo\nhttps://download.opensuse.org/repositories/home:/phiwo:/\n   peek/Fedora_26/home:phiwo:peek.repo\n   https://download.opensuse.org/repositories/home:/phiwo:/peek/Fedora_26/home:phiwo:peek.repo\nhttps://download.opensuse.org/repositories/home:/phiwo:/\n   peek/Fedora_Rawhide/home:phiwo:peek.repo\n   https://download.opensuse.org/repositories/home:/phiwo:/peek/Fedora_Rawhide/home:phiwo:peek.repo\n\nFedora 27 is not yet available on the opensuse build server. But if one of\nthe above work for you I will update the install instructions for Fedora to\nuse those repositories instead.\nIf this still fails I would recommend installing the Flatpak version.\nFedora has excellent support for Flatpak, and the Flatpak version of Peek\nsupports all features.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/263#issuecomment-359912435, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/Adeu9tyBveaOwfMZf5pqBnBmrYVHp_rGks5tNjq5gaJpZM4RqAio\n.\n. ",
    "emartinezpinzon": "Yes, it is correct, you can resize it by resizing the window like any other. I'm using XFCE and for some reason it's harder to do it. I had thought about whether the application would allow me to set these sizes from some configuration window.\nThank you.. This is what is happening to me, I can resize the window but it is somewhat stressful. Hehehe\nHe is trolling me!. ",
    "StephenFluin": "Turning off \"Allow Flipping\" in nvidia-settings fixed it.\n\n. ",
    "timroes": "I can confirm, that \"Allow Flipping\" fixes this issue reliable for me (Nvidia GeForce GTX 750 Ti, Driver version 390.48 on Archlinux).\nIn case you need/want to automate this: nvidia-settings -a 'AllowFlipping=0' works for setting it. Be aware that nvidia-settings behaves rather strange, and if you open the nvidia-settings GUI after you used the above command, it will just overwrite the setting with (as far as I see) the value it had the last time the UI was opened.. ",
    "Schyken": "Popping in to note that I too have the close button on the left side window. (You're not alone!)\nF27 (GNOME)\nAfter reading through the comments, I checked my gsettings and they're not showing anything under the mentioned categories. I don't have a shared home folder though.. ",
    "kun7": "hello, thanks for quick reply\ni've downloaded from endless os app center while i was trying to record in mp4 format.\nJan 26 16:10:20 endless systemd[877]: Starting GNOME Terminal Server...\nJan 26 16:10:20 endless dbus-daemon[916]: Successfully activated service 'org.gnome.Terminal'\nJan 26 16:10:20 endless systemd[877]: Started GNOME Terminal Server.\nJan 26 16:10:54 endless gnome-shell[1030]: ShellRecorder: failed to parse pipeline: no element \"x264enc\"\nJan 26 16:10:54 endless gnome-shell[1030]: shell_recorder_close: assertion 'recorder->state != RECORDER_STATE_CLOSED' failed\nJan 26 16:10:54 endless gnome-software-service.desktop[1243]: Failed to initialize recorder: Could not start recording, already an active recording using org.gnome.Shell.Screencast?\n. ",
    "moqmar": "Well, Shift + Ctrl + Alt + R leads to a complete system lockup under Wayland, no matter the scaling and/or computer. :D\npeek -b ffmpeg results in just a black video, but with the correct resolution.\ngnome-shell --version returns GNOME Shell 3.26.2. WebM is broken too, gifski is not installed. So, I guess it is indeed a Gnome issue.\nBut thanks for the help. :). Well, compared to Wayland X11 literally can't scale at all, so that would obviously solve that issue. :smile:\nI still use X11 on my desktop computer where I don't need any scaling, and Peek works like a breeze there - together with the awesome UI it's a program I really like to use.. Upstream issue on the GNOME bug tracker: https://bugzilla.gnome.org/show_bug.cgi?id=795189. ",
    "novoid": "I can copy that behavior: I can't resize the peek window after the first recording as well.\nDebian stable (Stretch) using xfce4 v4.12. ",
    "Art-2": "Glad this is a know issue on Xfce, thanks.. I have the same problem on Xubuntu 18.04 recording Gifs and Webms with relative high fps\nGif @ 24 fps using Peek (installed)\n\nGif @ 24 fps using Peek (Appimage)\n\n. ",
    "blackPantherOS": "Same issue i can't resize Peek window in Plasma . ",
    "evenfrost": "Same here for Ubuntu 16.10. Started to appear recently, no permission errors before.. Permissions are the same as for other local files, owned by me ($USER). Ran peek via the desktop icon, not from Terminal.. \n. @phw Nope, saving not working, I get the very Error opening file '/home/evenfrost/snap/peek/619/Peek 2018-02-07 15-02.gif': Permission denied error as OP. And saving in home folder shouldn't have permission issues, why is it a bad idea? Also, the folder is owned by me as seen on screenshot.. This is weird, I can save the file in other home directory (e.g. ~/downloads) but not in~/snap` one though they have same permisssions:\n\nOutput when saving to ~/snap (couldn't save):\nbash\n(peek:19022): GLib-GIO-WARNING **: Error creating IO channel for /proc/mounts: Permission denied (g-file-error-quark, 2)\nFile save error: Error opening file '/home/evenfrost/snap/Peek 2018-02-26 17-40.gif': Permission denied\nOutput when saving to ~/downloads (saved):\nbash\n(peek:19022): GLib-GIO-WARNING **: Error creating IO channel for /proc/mounts: Permission denied (g-file-error-quark, 2). ",
    "faridosc": "on archlinux i can't render to any format anymore. maybe due to ffmpeg update?. Confirm using the AUR version works. It is an Antergos packaging issue.. ",
    "Xavi007": "My bad, didn't follow this up, but I tried it today, so here is more info from command line\n```\n(peek:26597): Gtk-WARNING **: Locale not supported by C library.\n    Using the fallback 'C' locale.\nGtk-Message: Failed to load module \"overlay-scrollbar\"\nUsing screen recorder backend ffmpeg\n(peek:26597): GLib-GIO-WARNING **: Error creating IO channel for /proc/mounts: Permission denied (g-file-error-quark, 2)\nFile save error: Error opening file '/home/abcd/snap/peek/619/Peek 2018-02-17 17-39.gif': Permission denied\nmethod return time=1518869378.851552 sender=:1.928 -> destination=:1.927 serial=3 reply_serial=2\n```. ",
    "AlexMiroshnikov": "Thanks a lot for a quick and detailed answer!. ",
    "smaragdus": "I would appreciate Windows version very much.. This is perhaps the dullest post I have ever read on GitHub. I do not think that porn maniacs should determine program icons. I checked the above mentioned site and its logo is very different- it is square, it has different colour, it uses 'PH' letters for its logo, so I find absolutely no similarities. What others might have think is not a real argument at all. When one wants to find similarities they find it.. ",
    "jonaspm": "\nI would appreciate Windows version very much.\n\nI would too.. ",
    "ronanyeah": "Thanks for the reply. I'll provide more information at some point. However when I open from the command line it appears to fork (?) the process so no logs are visible in the terminal. Is there a flag to prevent that?. Great, thank you.\n```\n\u20ac peek\nUsing screen recorder backend gnome-shell\nRecording to file /home/ronan/.cache/peek/peekCAM6DZ.mkv\n(peek:17858): Gtk-WARNING **: Failed to measure available space: The specified location is not supported\n(The warning prints out 8 times.).\n\u20ac echo $XDG_SESSION_TYPE\nwayland\n```. ",
    "LazyBun": "+1 same error message as @ronanyeah \n$ uname -a\nLinux user 4.15.1-2-ARCH #1 SMP Sun Feb 4 22:27:45 UTC 2018 x86_64 GNU/Linux. @phw \n- X11 \n- 1 laptop monitor + 2 other\n- nothing special about recording area. Interesting. I've checked the contents of $HOME/.cache/peek/ and the recordings I've made are here all right. For some reason Peek is not able to move them to specified destination. I'll try to verify whether it's an issue on my side or Peek's side. . ",
    "sdvillal": "I have the same symptoms, also arch. Nothing really strikes me as wrong in this log:\nEDIT: and I also have the temporary files in ~/.cache/peek/.\n```sh\n~/.c/peek \u276f\u276f\u276f G_MESSAGES_DEBUG=all peek\n(peek:20538): Gtk-DEBUG: Connecting to session manager\n(peek:20538): Gtk-DEBUG: Failed to get the GNOME session proxy: The name org.gnome.SessionManager is not owned\n (peek:20538): DEBUG: desktop-integration.vala:168: Desktop: XFCE\n (peek:20538): DEBUG: application.vala:286: GTK theme: Numix-Frost-Light\n (peek:20538): DEBUG: desktop-integration.vala:168: Desktop: XFCE\n (peek:20538): DEBUG: application.vala:341: Decoration layout: close,maximize,minimize:\n (peek:20538): DEBUG: desktop-integration.vala:168: Desktop: XFCE\n (peek:20538): DEBUG: application.vala:42: Loading local settings failed: Failed to open file \u201c./data/gschemas.compiled\u201d: open() failed: No such file or directory\n** (peek:20538): DEBUG: application.vala:221: Changed keybinding_toggle_recording  => R\n (peek:20538): DEBUG: desktop-integration.vala:168: Desktop: XFCE\n (peek:20538): DEBUG: utils.vala:68: Looking for executable ffmpeg (0): /usr/bin/ffmpeg\nUsing screen recorder backend ffmpeg\n (peek:20538): DEBUG: application-window.vala:824: Decoration layout: menu,close,maximize,minimize:\n (peek:20538): DEBUG: recording-area.vala:38: Absolute recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:45: Screen w: 3440, h: 1440\n (peek:20538): DEBUG: recording-area.vala:58: Clipped recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:69: Scaled recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:38: Absolute recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:45: Screen w: 3440, h: 1440\n (peek:20538): DEBUG: recording-area.vala:58: Clipped recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:69: Scaled recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: application-window.vala:587: freeze_window_size w: 1030, h: 635\n (peek:20538): DEBUG: recording-area.vala:38: Absolute recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:45: Screen w: 3440, h: 1440\n (peek:20538): DEBUG: recording-area.vala:58: Clipped recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:69: Scaled recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:38: Absolute recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:45: Screen w: 3440, h: 1440\n (peek:20538): DEBUG: recording-area.vala:58: Clipped recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:69: Scaled recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:38: Absolute recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:45: Screen w: 3440, h: 1440\n (peek:20538): DEBUG: recording-area.vala:58: Clipped recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:69: Scaled recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:38: Absolute recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:45: Screen w: 3440, h: 1440\n (peek:20538): DEBUG: recording-area.vala:58: Clipped recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:69: Scaled recording area x: 1682, y: 457, w: 976, h: 536\n** (peek:20538): DEBUG: application-window.vala:468: Recording area: 1682, 457, 976, 536\n** (peek:20538): DEBUG: utils.vala:23: Cache directory does already exist /home/santi/.cache/peek\n** (peek:20538): DEBUG: utils.vala:38: Temp file: /home/santi/.cache/peek/peekU6F8DZ.webm\n (peek:20538): DEBUG: recording-area.vala:38: Absolute recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:45: Screen w: 3440, h: 1440\n (peek:20538): DEBUG: recording-area.vala:58: Clipped recording area x: 1682, y: 457, w: 976, h: 536\n (peek:20538): DEBUG: recording-area.vala:69: Scaled recording area x: 1682, y: 457, w: 976, h: 536\n** (peek:20538): DEBUG: base-screen-recorder.vala:55: Recording stopped\n. I git bisected. Found no problem. Then I turned my attention to where the package comes from. Apparently the antergos repo. So probably we should report there:\nhttps://github.com/Antergos/antergos-packages/blob/master/antergos/peek/PKGBUILD. @phw It always works if building from scratch - I have just tried your updated AUR. Works withGtkFileChooserNative``` ON and OFF. I think this is a no-action from your side, and just some packages need to be rebuilt - I guess antergos and manjaro for a start.. The antergos package has already been fixed.. ",
    "olsonpm": "Like LazyBun my files save correctly in ~/.cache/peek.  It just hangs on Rendering... presumably trying to save the file to the selected location.\nI'm running arch on a desktop with 2 monitors, nothing special about the recording area.\n\u279c  ~ echo $XDG_SESSION_TYPE\nx11\n\u279c  ~ uname -a\nLinux arch-home 4.15.3-1-ARCH #1 SMP PREEMPT Mon Feb 12 23:01:17 UTC 2018 x86_64 GNU/Linux\nRunning the same command as sdvillal, I get\n\nShow details\n```\n\u279c  ~ G_MESSAGES_DEBUG=all peek      \n(peek:9115): Gtk-DEBUG: Connecting to session manager\n (peek:9115): DEBUG: desktop-integration.vala:168: Desktop: GNOME\n (peek:9115): DEBUG: application.vala:286: GTK theme: Numix-Frost-Light\n (peek:9115): DEBUG: desktop-integration.vala:168: Desktop: GNOME\n (peek:9115): DEBUG: application.vala:341: Decoration layout: menu:minimize,maximize,close\n (peek:9115): DEBUG: desktop-integration.vala:168: Desktop: GNOME\n (peek:9115): DEBUG: application.vala:42: Loading local settings failed: Failed to open file \u201c./data/gschemas.compiled\u201d: open() failed: No such file or directory\n** (peek:9115): DEBUG: application.vala:221: Changed keybinding_toggle_recording  => R\n (peek:9115): DEBUG: desktop-integration.vala:168: Desktop: GNOME\nUsing screen recorder backend gnome-shell\n (peek:9115): DEBUG: application-window.vala:824: Decoration layout: menu:minimize,maximize,close\n (peek:9115): DEBUG: recording-area.vala:38: Absolute recording area x: 27, y: 69, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:45: Screen w: 3840, h: 1080\n (peek:9115): DEBUG: recording-area.vala:58: Clipped recording area x: 27, y: 69, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:69: Scaled recording area x: 27, y: 69, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:38: Absolute recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:45: Screen w: 3840, h: 1080\n (peek:9115): DEBUG: recording-area.vala:58: Clipped recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:69: Scaled recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: application-window.vala:587: freeze_window_size w: 390, h: 381\n (peek:9115): DEBUG: recording-area.vala:38: Absolute recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:45: Screen w: 3840, h: 1080\n (peek:9115): DEBUG: recording-area.vala:58: Clipped recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:69: Scaled recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:38: Absolute recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:45: Screen w: 3840, h: 1080\n (peek:9115): DEBUG: recording-area.vala:58: Clipped recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:69: Scaled recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:38: Absolute recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:45: Screen w: 3840, h: 1080\n (peek:9115): DEBUG: recording-area.vala:58: Clipped recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:69: Scaled recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:38: Absolute recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:45: Screen w: 3840, h: 1080\n (peek:9115): DEBUG: recording-area.vala:58: Clipped recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:69: Scaled recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: application-window.vala:468: Recording area: 2697, 390, 336, 282\n (peek:9115): DEBUG: gnome-shell-dbus-recorder.vala:151: Using GStreamer pipeline vp8enc min_quantizer=0 max_quantizer=0 cq_level=0 cpu-used=5 deadline=1000000 threads=%T ! queue ! webmmux\n (peek:9115): DEBUG: utils.vala:23: Cache directory does already exist /home/phil/.cache/peek\n** (peek:9115): DEBUG: utils.vala:38: Temp file: /home/phil/.cache/peek/peek6HHOEZ.mkv\nRecording to file /home/phil/.cache/peek/peek6HHOEZ.mkv\n (peek:9115): DEBUG: recording-area.vala:38: Absolute recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:45: Screen w: 3840, h: 1080\n (peek:9115): DEBUG: recording-area.vala:58: Clipped recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: recording-area.vala:69: Scaled recording area x: 2697, y: 390, w: 336, h: 282\n (peek:9115): DEBUG: base-screen-recorder.vala:55: Recording stopped\n (peek:9115): DEBUG: base-screen-recorder.vala:67: Started post processing\n** (peek:9115): DEBUG: utils.vala:68: Looking for executable ffmpeg (0): /usr/bin/ffmpeg\n (peek:9115): DEBUG: post-processing-pipeline.vala:30: Running post processor PeekPostProcessingFfmpegPostProcessor with files 1\n (peek:9115): DEBUG: utils.vala:23: Cache directory does already exist /home/phil/.cache/peek\n** (peek:9115): DEBUG: utils.vala:38: Temp file: /home/phil/.cache/peek/peekUF6KEZ.png\n (peek:9115): DEBUG: application-window.vala:637: Showing file chooser (GtkFileChooserDialog)\n (peek:9115): DEBUG: utils.vala:23: Cache directory does already exist /home/phil/.cache/peek\n** (peek:9115): DEBUG: utils.vala:38: Temp file: /home/phil/.cache/peek/peekDNVTEZ.gif\n** (peek:9115): DEBUG: application-window.vala:639: Selected file file:///home/phil/Peek%202018-02-13%2021-59.gif\n```\n\n\nThen when I close the peek window\n\nShow details\n** (peek:9115): DEBUG: application-window.vala:211: delete_event: recorder.is_recording=false, window.is_postprocessing=true\n** (peek:9115): DEBUG: desktop-integration.vala:168: Desktop: GNOME\n\n\nI will have time to do any debugging if you can give me direction on what to look for.. @phw, i let it run for 30 minutes on a 16 second 500x300 clip.  previously i ran it on a much larger screen clip size and did not have to wait long at all.  Also note the rendering was saved just fine in the cache folder.\nEdit: woooo @atar-axis solution worked for me.. ",
    "msdalp": "have the same problem. it just stuck at rendering on Manjaro. I reverted to 1.2.0.1 and it works fine btw. any other version higher than that stucks at rendering including the git aur.\nkernel 4.14.16-1-MANJARO\ndriver video-intel\ngpu intel uhd graphics 620\ncpu intel i7-8550u. ",
    "AshleyMcVeigh": "The error stops when gifski is disabled, therefore I believe this is the same issue as https://github.com/phw/peek/issues/240. ",
    "devel0": "Thank you for the update, I will try development version too.\nTo now I attached a test with my current Ubuntu peek version at this link that shows a 600k vs 173k file size of the same record ( note mismatch colors on avatar due to overlap of reocordings preview 3,2,1 timer ).\nMy current config follows:\n- peek 1.2.2\n- screen_record ( version )\n- os\n```\nlsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 17.10\nRelease:    17.10\nCodename:   artful\n- gnome\ngnome-shell --version\nGNOME Shell 3.26.2\n```. I confirm that latest peek version ( 1.3.1 ) works generating gif with size almost equal to those generated with screen recorder. Example.\nthank you. ",
    "francisconp": "I tried to install it, but I had the same problem:\nFollow my list of installed packages:\ngstreamer1-plugins-base-1.12.4-1.fc27.x86_64\ngstreamer-0.10.36-18.fc27.x86_64\ngstreamer1-plugins-bad-free-1.12.4-1.fc27.x86_64\ngstreamer1-plugins-ugly-free-1.12.4-2.fc27.x86_64\ngstreamer1-plugins-bad-free-gtk-1.12.4-1.fc27.x86_64\ngstreamer1-1.12.4-1.fc27.x86_64\ngstreamer1-plugins-good-1.12.4-1.fc27.x86_64\nPackageKit-gstreamer-plugin-1.1.8-1.fc27.x86_64\ngstreamer-tools-0.10.36-18.fc27.x86_64\n. ",
    "fschutt": "Aha, so if you press \"stop\" before the countdown appears, it just does nothing and the save dialog doesn't appear, which was why I was so confused. The countdown appears with a delay of several seconds (if you press \"record GIF\" it takes roughly 4 seconds to show the countdown). \nMay I ask why having a delayed countdown is important or why there is no error message \"please wait for the countdown to start\" ? I only noticed that there is a countdown after you told me, it's not very visible. . The big number / countdown you have in your first screenshot doesn't appear for me. If I press \"start recording\", it looks like this:\n\nAs you can see, the 4..3..2..1 countdown isn't showing (like in your first screenshot), so I assumed that the recorder is immediately running. When I click \"stop\" in that timeframe, nothing happens (which is probably expected). If I press \"stop\" after the countdown appears in the top titlebar, it works as expected. So the actual bug is that the 4..3..2..1 countdown blocking the screen isn't showing.\nThis is using the Trinity Desktop Environment, not sure if this is a bug that may only appear on a non-GNOME DE. . I haven't had the time to check, sorry. I think I have it off, because the performance isn't great when I turn it on / problems with graphics drivers. I'll see if it still happens if I turn on compositing. . So as it turns out, if the compositor is active it works as expected. Why drawing a number in a window requires a compositor is beyond me, but I don't think that's the fault of peek. Maybe it's because of the transparency effect.\nIf no compositor is active, it either shows a black screen or a completely blank one.. ",
    "crouthamela": "Sure, here is the output of me running Peek as a Flatpak (my normal method) and recording/saving a WebM, then clicking the pop-up. The last error message occurs when clicking the pop-up.\n```\nandrew@andrew-XPS-13-9360:~$ flatpak run com.uploadedlobster.peek\n (peek:3): WARNING : Couldn't connect to accessibility bus: Failed to connect to socket /tmp/dbus-vsgYli2CJG: Connection refused\n (peek:3): WARNING : Binding 'R' failed!\nUsing screen recorder backend ffmpeg\n(peek:3): GLib-GIO-CRITICAL **: g_dbus_proxy_new: assertion 'G_IS_DBUS_CONNECTION (connection)' failed\n(peek:3): GLib-GIO-CRITICAL **: g_dbus_proxy_new: assertion 'G_IS_DBUS_CONNECTION (connection)' failed\n(peek:3): GLib-GIO-CRITICAL **: g_dbus_proxy_new: assertion 'G_IS_DBUS_CONNECTION (connection)' failed\n(peek:3): GLib-GIO-CRITICAL **: g_dbus_proxy_new: assertion 'G_IS_DBUS_CONNECTION (connection)' failed\n(peek:3): GLib-GIO-CRITICAL **: g_dbus_proxy_new: assertion 'G_IS_DBUS_CONNECTION (connection)' failed\n(peek:3): GLib-GIO-CRITICAL **: g_simple_action_activate: assertion 'simple->parameter_type == NULL ? parameter == NULL : (parameter != NULL && g_variant_is_of_type (parameter, simple->parameter_type))' failed\nandrew@andrew-XPS-13-9360:~$\n```\nI am running:\nPeek 1.2.2\nKDE Plasma Version: 5.12.1\nKDE Frameworks Version: 5.43.0\nQt Version: 5.9.1\nKernel Version 4.13.0-32-generic\nOS Type: 64-bit. 1. It does not. The terminal has no output either regarding a Dolphin opening attempt either.\n2. Peek Debug.txt\n3. Kubuntu 17.10 with Backports PPA\n4. I installed native Peek 1.2.2 from the Peek Stable PPA and it works as expected.. The dbus command works in a terminal.\nInterestingly I did not have xdg-desktop-portal-kde installed, I suppose I'll let the KDE Discover team know that would be a good dependency for plasma-discover-flatpak-backend. After installing, the terminal message g_simple_action_activate: has gone away when I click the notification, but Dolphin still fails to open.. No problem, I've been writing KDE bugs for days too :)\nDebug: Peek Debug 2.txt\nThe notification appears (and I click on it) after Temp file deleted: true is shown in the debug, but I don't see anything appear regarding DBus.. FYI - Apparently everyone is on their computer right now, and the KDE Neon and Kubuntu teams have already pushed a patch to fix dependencies so the xdg-desktop-portal-kde package will be included in the future. :). ",
    "rikmills": "\nFYI - Apparently everyone is on their computer right now, and the KDE Neon and Kubuntu teams have already pushed a patch to fix dependencies so the xdg-desktop-portal-kde package will be included in the future. :)\n\nhttps://launchpad.net/ubuntu/+source/plasma-discover/5.12.1-0ubuntu2. ",
    "shollingsworth": "I'm seeing this same issue, did an strace and these are the top hits\npeek starts, but I can't bring the window to the foreground (Using KDE)\n94 28550 recvmsg(7, 0x7ffc2d519140, 0)     = -1 EAGAIN (Resource temporarily unavailable)\n    101 28550 close(13)                         = 0\n    163 28550 poll([{fd=3, events=POLLIN}, {fd=7, events=POLLIN}, {fd=8, events=POLLIN}], 3, 500) = 1 ([{fd=7, revents=POLLIN}])\n    216 28550 recvmsg(7, 0x7ffc2d519640, 0)     = -1 EAGAIN (Resource temporarily unavailable)\n    220 28550 recvmsg(7, 0x7ffc2d519790, 0)     = -1 EAGAIN (Resource temporarily unavailable)\n    238 28550 close(12)                         = 0\n    350 28550 poll([{fd=7, events=POLLIN}], 1, -1) = 1 ([{fd=7, revents=POLLIN}])\n    383 28550 poll([{fd=7, events=POLLIN|POLLOUT}], 1, -1) = 1 ([{fd=7, revents=POLLOUT}])\n    396 28550 futex(0x7fd3f87e5428, FUTEX_WAKE_PRIVATE, 2147483647) = 0\n    454 28550 recvmsg(7, 0x7ffc2d519770, 0)     = -1 EAGAIN (Resource temporarily unavailable)\n    644 28550 poll([{fd=3, events=POLLIN}, {fd=7, events=POLLIN}, {fd=8, events=POLLIN}], 3, 0) = 0 (Timeout). ",
    "pontikis": "Hello @phw ! Yes, you are right. I have libsodium.so.23.1.0 in Xubuntu 16.04 LTS.\nSo, symlinking\nln -s libsodium.so.23.1.0 libsodium.so.18\nseems to solve the problem. Thanks! \n(Peek installed using https://github.com/phw/peek#ubuntu) - ffmpeg using apt. @phw I suppose you may close the issue. Thanks!. ",
    "TungstenOxide": "I have the ugly plugins installed, but I still get the same error.. ",
    "pablox-cl": "FWIW, if you are using Wayland, you need to log out and log in, since wayland can't reload gnome-shell on the fly.. If you are on wayland, you need to log out and log in, since there's  no way to restart gnome shell \"live\", as you could on X.. ",
    "skerit": "Just to confirm: I was indeed using gnome-shell.. ",
    "rvsosn": "duplicate #287. ",
    "kornelski": "The settings can be reduced to:\n\n[x] Fast conversion\n[x] High quality\n[x] Small file\nChoose two.. It does help with screenshots a bit too, since anti-aliasing, icons and gradients can be lossily-compressed. \nIt will have an annoying tendency of making completely flat and white areas look dirty, because when it has a choice of few white pixels vs few white pixels & one light gray one, the latter seems like better compression.\n. \n",
    "furai": "This would be really cool feature to have.. ",
    "hulkco": "Thanks for the reply,  i made your sugesstion right now :) . Ok,  the problem its the ffmpeg installed in my sistema,  thanks,  i close the isue. ",
    "zero-master": "These might help you:\nhttps://github.com/3demax/tray-uploader/blob/master/tray.vala\nhttps://github.com/antono/synapse/blob/master/src/plugins/imgur-plugin.vala\nhttps://gist.github.com/twolfson/ad9084fb286e1baee969bbe5eabebe5f. If you want this tool to be popular, you'll have to support use case which enables easy sharing on at least one of the top website.\nWhat's wrong with imgur?\nI always had this tool installed but I never looked for it because I knew, I'll have to manually take the gif and upload it somewhere before I send the URL to my friend. That's too much effort which shouldn't be needed in 2018.. ",
    "A1rPun": "If this will get implemented you only have to wait for the following questions : can it upload to facebook? can it upload to instagram?\nThe \"upload to site X\" features rely on a third party site and as a dev I'm not a fan of that. A better way is have another neglectible program that uploads a folder or individual images to any media site.\nThis is just my 2 cents. Also if I see some program use a third party I don't trust I stop using the program. . @phw Fair enough, code can be altered and be updated when said services go down (if ever).\nI never stated that I don't trust Imgur, I just wanted to protect this great tool for more issue requests for other different services which I don't trust. . Alright good luck with the implementation :)! Imgur is indeed a popular site, I personally use Giphy but can't have it all :stuck_out_tongue: . ",
    "jesusrivas89": "Hi. I do not use Gnome I use Linux Mint Mate but I used the command that em said: peek -b ffmpeg\nOpen the program perfectly but I get the same result and I lowered the frame rate to 6 and the same result, so I put the two examples of frame rates up to 48 and 10 to show that at both speeds the result is the same. @phw the color correction is excellent it looks good now, unfortunately the jumps continue to exist. But thank you very much for the new version.. ",
    "mingwandroid": "We do not recommend people modify their PATH permanently or globally. When they want to use Anaconda they should activate it as that sets PATH for that session only.. We are reforming our ways around this I would say!\nWe still offer an option to modify PATH on Unix but now warn against it on Windows at least. I'll try to make sure that for the next release we push the activate way on all OSes since it's far better for everyone.. ",
    "nanangarsyad": "Just found out how to fix this issue.\nWell it seemed, the running process of compton causing peek to show that behavior (well, I'm not quite sure actually).\nSo by, disabling/excluding peek in compton.conf seemed fix this issue, well, in my case it fixed. Not sure whether it's applicable for other.\nHere's how I exclude peek from compton render.\n```\nshadow-exclude = [\n    \"class_g = 'Peek'\"\n];\nfade-exclude = [\n    \"class_g = 'Peek'\"\n];\nfocus-exclude = [\n    \"class_g = 'Peek'\"\n];\nopacity-rule = [\n    \"99:class_g = 'Peek'\"\n];\n```\nBellow is sample of peek when compton is running in background/daemon mode.\n\n. ",
    "oz123": "You should compile ffmpeg with the flag vpx.. ",
    "armills": "Submitted to Gentoo for anyone who lands here from Google:\nhttps://bugs.gentoo.org/672586. ",
    "dimuls": "Gnome 3 X11. ",
    "balta2ar": "I had the same error message. I launched peek in a terminal and it printed this:\n```\n$ peek         \nUsing screen recorder backend ffmpeg\nRecording canceled\nError: Child process exited with code 127\nError deleting temporary file /home/bz/.cache/peek/peekV1O8IZ.webm.0001.png: Command \"gifski --fps 20 --quality 60 -o /home/bz/.cache/peek/peek3I00IZ.gif /home/bz/.cache/peek/peekV1O8IZ.webm.0001.png /home/bz/.cache/peek/peekV1O8IZ.webm.0002.png /home/bz/.cache/peek/peekV1O8IZ.webm.0003.png /home/bz/.cache/peek/peekV1O8IZ.webm.0004.png /home/bz/.cache/peek/peekV1O8IZ.webm.0005.png /home/bz/.cache/peek/peekV1O8IZ.webm.0006.png /home/bz/.cache/peek/peekV1O8IZ.webm.0007.png /home/bz/.cache/peek/peekV1O8IZ.webm.0008.png /home/bz/.cache/peek/peekV1O8IZ.webm.0009.png /home/bz/.cache/peek/peekV1O8IZ.webm.0010.png /home/bz/.cache/peek/peekV1O8IZ.webm.0011.png /home/bz/.cache/peek/peekV1O8IZ.webm.0012.png /home/bz/.cache/peek/peekV1O8IZ.webm.0013.png /home/bz/.cache/peek/peekV1O8IZ.webm.0014.png /home/bz/.cache/peek/peekV1O8IZ.webm.0015.png /home/bz/.cache/peek/peekV1O8IZ.webm.0016.png /home/bz/.cache/peek/peekV1O8IZ.webm.0017.png /home/bz/.cache/peek/peekV1O8IZ.webm.0018.png /home/bz/.cache/peek/peekV1O8IZ.webm.0019.png /home/bz/.cache/peek/peekV1O8IZ.webm.0020.png /home/bz/.cache/peek/peekV1O8IZ.webm.0021.png /home/bz/.cache/peek/peekV1O8IZ.webm.0022.png /home/bz/.cache/peek/peekV1O8IZ.webm.0023.png /home/bz/.cache/peek/peekV1O8IZ.webm.0024.png /home/bz/.cache/peek/peekV1O8IZ.webm.0025.png /home/bz/.cache/peek/peekV1O8IZ.webm.0026.png /home/bz/.cache/peek/peekV1O8IZ.webm.0027.png /home/bz/.cache/peek/peekV1O8IZ.webm.0028.png /home/bz/.cache/peek/peekV1O8IZ.webm.0029.png /home/bz/.cache/peek/peekV1O8IZ.webm.0030.png /home/bz/.cache/peek/peekV1O8IZ.webm.0031.png /home/bz/.cache/peek/peekV1O8IZ.webm.0032.png /home/bz/.cache/peek/peekV1O8IZ.webm.0033.png /home/bz/.cache/peek/peekV1O8IZ.webm.0034.png /home/bz/.cache/peek/peekV1O8IZ.webm.0035.png /home/bz/.cache/peek/peekV1O8IZ.webm.0036.png /home/bz/.cache/peek/peekV1O8IZ.webm.0037.png /home/bz/.cache/peek/peekV1O8IZ.webm.0038.png /home/bz/.cache/peek/peekV1O8IZ.webm.0039.png /home/bz/.cache/peek/peekV1O8IZ.webm.0040.png /home/bz/.cache/peek/peekV1O8IZ.webm.0041.png /home/bz/.cache/peek/peekV1O8IZ.webm.0042.png /home/bz/.cache/peek/peekV1O8IZ.webm.0043.png /home/bz/.cache/peek/peekV1O8IZ.webm.0044.png /home/bz/.cache/peek/peekV1O8IZ.webm.0045.png /home/bz/.cache/peek/peekV1O8IZ.webm.0046.png /home/bz/.cache/peek/peekV1O8IZ.webm.0047.png /home/bz/.cache/peek/peekV1O8IZ.webm.0048.png /home/bz/.cache/peek/peekV1O8IZ.webm.0049.png /home/bz/.cache/peek/peekV1O8IZ.webm.0050.png /home/bz/.cache/peek/peekV1O8IZ.webm.0051.png /home/bz/.cache/peek/peekV1O8IZ.webm.0052.png /home/bz/.cache/peek/peekV1O8IZ.webm.0053.png /home/bz/.cache/peek/peekV1O8IZ.webm.0054.png /home/bz/.cache/peek/peekV1O8IZ.webm.0055.png /home/bz/.cache/peek/peekV1O8IZ.webm.0056.png /home/bz/.cache/peek/peekV1O8IZ.webm.0057.png /home/bz/.cache/peek/peekV1O8IZ.webm.0058.png\" failed with status 32512 (received signal 0).\nOutput:\ngifski: error while loading shared libraries: libavformat.so.57: cannot open shared object file: No such file or directory\nRecording canceled: Missing output file after post processing.\n```\nI reinstalled (recompiled) gifski and the error was gone.\nMaybe peek could catch this output and present it to the user, which could help to track down the issue faster? Just a random idea.. ",
    "cocochepeau": "Hey,\nWould you like giving a try to Up2Share instead (https://up2sha.re)? I\u2019m looking for an app that can serve as a desktop client to record image/gif/videos.\nWe support webm/mp4/gif uploads and previews as well. The current API is behind an API token but I\u2019m sure we can work on public endpoints easily.\nLet me know what you think.. Thanks - feel free to ping me if you need anything. :). ",
    "mkyral": "Hi,\nI've ffmpeg compiled with xcb support, but recording fails (was working before)\n```\nworker /home/marian # emerge -av ffmpeg\nThese are the packages that would be merged, in order:\nCalculating dependencies... done!\n[ebuild   R    ] media-video/ffmpeg-3.3.6:0/55.57.57::gentoo  USE=\"X alsa bzip2 encode gnutls gpl hardcoded-tables iconv mp3 network opengl postproc sdl theora threads truetype vorbis x264 xcb xvid zlib (-altivec) -amr -amrenc -bluray -bs2b -cdio -chromaprint -chromium -cpudetection -debug -doc -fdk -flite -fontconfig -frei0r -fribidi -gcrypt -gme -gmp -gsm -iec61883 -ieee1394 -jack -jpeg2k -kvazaar -ladspa -libass -libcaca -libilbc -librtmp -libsoxr -libv4l -lzma (-mipsdspr1) (-mipsdspr2) (-mipsfpu) (-mmal) -modplug -nvenc -openal -openh264 -openssl -opus -oss -pic -pulseaudio -rubberband -samba (-schroedinger) -snappy -sofalizer -speex -ssh -static-libs -test -twolame -v4l -vaapi -vdpau -vpx -wavpack -webp -x265 -zeromq -zimg -zvbi (-celt%)\" ABI_X86=\"32 (64) (-x32)\" CPU_FLAGS_X86=\"aes avx avx2 fma3 mmx mmxext sse sse2 sse3 sse4_1 sse4_2 ssse3 -3dnow -3dnowext -fma4 -xop\" FFTOOLS=\"aviocat cws2fws ffescape ffeval ffhash fourcc2pixfmt graph2dot ismindex pktdumper qt-faststart sidxindex trasher\" 0 KiB\nTotal: 1 package (1 reinstall), Size of downloads: 0 KiB\n```\n```\nCommand \"ffmpeg -f x11grab -show_region 0 -framerate 10 -video_size 1120x707 -i :0+521,372 -filter:v scale=iw/1:-1 -codec:v libvpx-vp9 -lossless 1 -r 10 -y /home/marian/.cache/peek/peekI3JBSZ.webm\" failed with status 256 (received signal 0).\nOutput:\nffmpeg version 3.3.6 Copyright (c) 2000-2017 the FFmpeg developers  built with gcc 7.3.0 (Gentoo 7.3.0-r3 p1.4)  configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --docdir=/usr/share/doc/ffmpeg-3.3.6/html --mandir=/usr/share/man --enable-shared --cc=x86_64-pc-linux-gnu-gcc --cxx=x86_64-pc-linux-gnu-g++ --ar=x86_64-pc-linux-gnu-ar --optflags='-march=native -O2 -pipe' --disable-static --enable-avfilter --enable-avresample --disable-stripping --disable-indev=v4l2 --disable-outdev=v4l2 --disable-indev=oss --disable-indev=jack --disable-outdev=oss --enable-bzlib --disable-runtime-cpudetect --disable-debug --disable-gcrypt --enable-gnutls --disable-gmp --enable-gpl --enable-hardcoded-tables --enable-iconv --disable-lzma --enable-network --disable-openssl --enable-postproc --disable-libsmbclient --enable-ffplay --enable-sdl2 --disable-vaapi --disable-vdpau --enable-xlib --enable-libxcb --enable-libxcb-shm --enable-libxcb-xfixes --enable-zlib --disable-libcdio --disable-libiec61883 --disable-libdc1394 --disable-libcaca --disable-openal --enable-opengl --disable-libv4l2 --disable-libpulse --disable-libopencore-amrwb --disable-libopencore-amrnb --disable-libfdk-aac --disable-libopenjpeg --disable-libbluray --disable-libcelt --disable-libgme --disable-libgsm --disable-mmal --disable-libmodplug --disable-libopus --disable-libilbc --disable-librtmp --disable-libssh --disable-libschroedinger --disable-libspeex --enable-libvorbis --disable-libvpx --disable-libzvbi --disable-libbs2b --disable-chromaprint --disable-libflite --disable-frei0r --disable-libfribidi --disable-fontconfig --disable-ladspa --disable-libass --enable-libfreetype --disable-librubberband --disable-netcdf --disable-libzmq --disable-libzimg --disable-libsoxr --enable-pthreads --disable-libvo-amrwbenc --enable-libmp3lame --disable-libkvazaar --disable-nvenc --disable-libopenh264 --disable-libsnappy --enable-libtheora --disable-libtwolame --disable-libwavpack --disable-libwebp --enable-libx264 --disable-libx265 --enable-libxvid --disable-amd3dnow --disable-amd3dnowext --disable-fma4 --disable-xop --cpu=host --disable-doc --disable-htmlpages --enable-manpages  libavutil      55. 58.100 / 55. 58.100  libavcodec     57. 89.100 / 57. 89.100  libavformat    57. 71.100 / 57. 71.100  libavdevice    57.  6.100 / 57.  6.100  libavfilter     6. 82.100 /  6. 82.100  libavresample   3.  5.  0 /  3.  5.  0  libswscale      4.  6.100 /  4.  6.100  libswresample   2.  7.100 /  2.  7.100  libpostproc    54.  5.100 / 54.  5.100Unrecognized option 'lossless'.Error splitting the argument list: Option not found\n```. ",
    "conde2": "May 03 14:25:24 archlinux gnome-shell[722]: ShellRecorder: failed to parse pipeline: no element \"x264enc\"\nMay 03 14:25:24 archlinux gnome-shell[722]: shell_recorder_close: assertion 'recorder->state != RECORDER_STATE_CLOSED' failed\nMay 03 14:25:25 archlinux gnome-shell[722]: Object Meta.WindowActor (0x559b01f94450), has been already finalized. Impossible to get any pr>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: == Stack trace for context 0x559aff1b4000 ==\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #0 0x7ffecc4425a0 b   resource:///org/gnome/shell/ui/tweener.js:73 (0x7fe55c0ddef0>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #1 0x7ffecc442db0 b   resource:///org/gnome/shell/ui/tweener.js:105 (0x7fe55c0df23>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #2 0x559aff4c8bb0 i   resource:///org/gnome/shell/ui/tweener.js:92 (0x7fe55c0df098>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #3 0x7ffecc444190 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:203 (0x>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #4 0x7ffecc4442e0 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:332 (0x>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #5 0x7ffecc444390 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:345 (0x>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #6 0x7ffecc444420 b   resource:///org/gnome/gjs/modules/tweener/tweener.js:360 (0x>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #7 0x7ffecc4444a0 I   resource:///org/gnome/gjs/modules/signals.js:126 (0x7fe55c0e>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #8 0x7ffecc444550 b   resource:///org/gnome/shell/ui/tweener.js:208 (0x7fe55c0df80>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #9 0x7ffecc4445b0 I   resource:///org/gnome/gjs/modules/_legacy.js:82 (0x7fe55c0c2>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #10 0x7ffecc444660 b   resource:///org/gnome/shell/ui/tweener.js:183 (0x7fe55c0df7>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #11 0x7ffecc4446f0 I   self-hosted:917 (0x7fe55c0ee5e8 @ 394)\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: == Stack trace for context 0x559aff1b4000 ==\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #0 0x7ffecc4425a0 b   resource:///org/gnome/shell/ui/tweener.js:80 (0x7fe55c0ddef0>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #1 0x7ffecc442db0 b   resource:///org/gnome/shell/ui/tweener.js:105 (0x7fe55c0df23>\nMay 03 14:25:25 archlinux org.gnome.Shell.desktop[722]: #2 0x559aff4c8bb0 i   resource:///org/gnome/shell/ui/tweener.js:92 (0x7fe55c0df098>\n. \nI've installed it and x264 codec and still have the same problem.. ",
    "krobelus": "I noticed this generation is only done a configuration time but not at build time. So this might not be what we want.\nI also found a simple way to do it in meson at configuration time. It may be enough to force a reconfigure if the contents of po/ have changed.. Yes, meson looks very good so far.\nAfter looking into this further, it might not be a good idea to generate LINGUAS from within the build system. In order for msgfmt to work, LINGUAS has to be located in the same directory as the translation files, so it needs to be in the source tree.\nFrom the meson documentation at http://mesonbuild.com/Running-Meson.html\n\nMeson will not under any circumstances write files inside the source directory (if it does, it is a bug and should be fixed).\n\nI consider that a sensible approach because it's dangerous to edit generated files.\nSo I think to generate LINGUAS we should maybe just have a tiny script in tools which makes it explicit that it changes the file inside the source tree.\nAdditionally, we could have meson check that all *.po files actually show up in LINGUAS. Similar to this, they just do it the other way round, verifying that all entries in LINGUAS have a corresponding translation file. However, it is probably nicer to optionally have these checks in the gettext meson module.. Sorry for the long delay..\nYeah, it makes sense to use a run target, I learnt something new :)\nI did it in https://github.com/phw/peek/pull/328. So https://github.com/phw/peek/pull/320 should probably be reverted.\n. ",
    "AlexWayfer": "Duplicate of #287, I think.. ",
    "smac89": "Got this error too:\nPeek: 1.3.1\nGTK: 3.22.29\nGLib: 2.56.0\nLinux 4.15.0-33-generic #36-Ubuntu SMP Wed Aug 15 16:00:05 UTC 2018 x86_64 GNU/Linux\nScreenshot:\n\nSome log from journalctl:\nlog\nAug 27 13:43:49 lenovix com.uploadedlobster.peek[3928]: Error: Child process exited with code 127\nAug 27 13:43:49 lenovix com.uploadedlobster.peek[3928]: Error deleting temporary file /home/user/.cache/peek/peek0ARFOZ.webm: Command \"ffmpeg -y -i /home/user/.cache/peek/peek0ARFOZ.webm -vf fps=10,palettegen /home/user/.cache/peek/peekRLMBOZ.png\"\nAug 27 13:43:49 lenovix com.uploadedlobster.peek[3928]: Output:\nAug 27 13:43:49 lenovix com.uploadedlobster.peek[3928]: ffmpeg: error while loading shared libraries: libx264.so.148: cannot open shared object file: No such file or directory\nAug 27 13:43:49 lenovix com.uploadedlobster.peek[3928]: Recording canceled: Missing output file after post processing.\nAug 27 13:44:42 lenovix com.uploadedlobster.peek[3928]: Error: Child process exited with code 127\nAug 27 13:44:42 lenovix com.uploadedlobster.peek[3928]: Error deleting temporary file /home/user/.cache/peek/peekAXPFOZ.webm: Command \"ffmpeg -y -i /home/user/.cache/peek/peekAXPFOZ.webm -vf fps=10,palettegen /home/user/.cache/peek/peekTTYMOZ.png\"\nAug 27 13:44:42 lenovix com.uploadedlobster.peek[3928]: Output:\nAug 27 13:44:42 lenovix com.uploadedlobster.peek[3928]: ffmpeg: error while loading shared libraries: libx264.so.148: cannot open shared object file: No such file or directory\nAug 27 13:44:42 lenovix com.uploadedlobster.peek[3928]: Recording canceled: Missing output file after post processing.\nAug 27 13:45:01 lenovix com.uploadedlobster.peek[3928]: Found ffmpeg: /usr/lib/chromium-browser/libffmpeg.so\nAug 27 13:45:01 lenovix com.uploadedlobster.peek[3928]:         avcodec: 3806052\nAug 27 13:45:01 lenovix com.uploadedlobster.peek[3928]:         avformat: 3804516\nAug 27 13:45:01 lenovix com.uploadedlobster.peek[3928]:         avutil: 3673956\nAug 27 13:45:01 lenovix com.uploadedlobster.peek[3928]: Ffmpeg version is OK! Let's use it.\nAug 27 13:45:01 lenovix com.uploadedlobster.peek[3928]: Created new window in existing browser session.\nAug 27 13:46:22 lenovix com.uploadedlobster.peek[3928]: Using screen recorder backend gnome-shell\nAug 27 13:46:22 lenovix com.uploadedlobster.peek[3928]: Recording to file /home/user/.cache/peek/peek0ARFOZ.webm\nAug 27 13:46:22 lenovix com.uploadedlobster.peek[3928]: Recording to file /home/user/.cache/peek/peekAXPFOZ.webm\nAug 27 13:47:08 lenovix dbus-daemon[3928]: [session uid=1000 pid=3928] Activating service name='org.gnome.Totem' requested by ':1.463' (uid=1000 pid=6489 comm=\"/usr/bin/nautilus --gapplication-service \" label=\"unconfined\")\nAug 27 13:47:08 lenovix dbus-daemon[3928]: [session uid=1000 pid=3928] Successfully activated service 'org.gnome.Totem'\nLooks like ffmpeg is missing something.... Looks like it is already installed:\n```bash\n\u279c sudo apt search libx264\nSorting... Done\nFull Text Search... Done\nlibx264-152/bionic,now 2:0.152.2854+gite9a5903-2 amd64 [installed,automatic]\n  x264 video coding library\nlibx264-dev/bionic,now 2:0.152.2854+gite9a5903-2 amd64 [installed]\n  development files for libx264\n15:47:59 in /opt \n\u279c sudo apt install libx264-dev\nReading package lists... Done\nBuilding dependency tree     \nReading state information... Done\nlibx264-dev is already the newest version (2:0.152.2854+gite9a5903-2).\n0 to upgrade, 0 to newly install, 0 to remove and 0 not to upgrade.\n```\n\nSo as I was about to post the above, I found what the problem was.\nI had installed ffmpeg locally for my user and the local installation did not have all the requirements. I solved it by uninstalling the user version with brew uninstall --force ffmpeg, and now it is working as expected because it is now using the one installed by the system!\n\n. ",
    "rugk": "Actually I could reproduce it with Nautilus, so maybe it is more related to Wayland than to Firefox. Every time the nautilus window get's unfocused, I clicked on the Peek screen recording area (the \"hole\"):\n\n. Actually I just noticed it is even worth: The window is actually also intercepting keystrokes! \ud83d\ude32. Any reaction by @phw here? This is a long-standing issue, and made the Peek application totally useless since my bug report. In the past (before that report), it worked flawlessly.\nBTW, @Andrew-Wichmann and @WilcoM, feel free to upvote the top comment in this issue to show you are also affected.. ",
    "Andrew-Wichmann": "I'm having the same issue with Ubuntu 18.04 and Firefox. The window focus is not very intuitive.. Haven't used Peek in awhile but I have a use case for it again now.  I'd really like to see this fixed. ",
    "WilcoM": "Same issue here since i've updated to Ubuntu 18.04.. Can't click through the recording window.. ",
    "spaasis": "Also, no extra messages when running via terminal. Okay, here's some answers\n\nX\nActually, the ffmpeg webm contains the whole animation!\nScreencast seems to work\nGIFs work as intended\n\nHere are two roughly 15s clips (the skipping time is mostly due to the stream being recorded. The important part is that both clips should cut off at or just before the counter hits xx.yy.15)\nWith ffmpeg - complete\ngnome-shell - skips\nBoth files are the same size (1,6MB) which is a bit weird\n. Okay, it seems to have more to do with what's on the screen (being recorded or not) than anything else (checked the framerates, no difference).\nI took plenty of 15s recordings from different windows (desktop background, Thunderbird, Firefox) and they're all doing fine, but if I have a video or a stream playing while I'm recording it skips quite a lot.\nAt the same time the gnome-shell CPU and Memory consumption go through the roof.\nI have absolutely no idea how the whole screen capture can work okay, but the partial capture doesn't... ",
    "o-alquimista": "1 & 2: Installed the flatpak package on Debian 9 with GNOME on X, but it also happens under Wayland; I can reproduce this on Fedora Workstation as well.\n\n\nThe recorded WebM has the same freezing and glitching the GIF has.\n\n\nVideos recorded with the built-in screen recorder are perfect. Yes, they appear at ~/Videos\n\n\nI tested with both gnome-shell and ffmpeg backends by specifying them in the command. One backend records the video just fine: gnome-shell. But ffmpeg doesn't. This made me realize I was only having this problem with other DEs, because here with GNOME the gnome-shell backend is the default, so it works out-of-the-box.\n\n\nBy choosing ffmpeg or using a different DE, the videos end up corrupted, freezing and jumping scenes in a predictable way. I mean, it freezes always at the same time of playback, jumps through a lot of scenes and then resumes when it's almost ending. It's not random, it happens in the same way every time.. ",
    "kayaksan": "\n\nDid you record on Gnome or some other DE?\n\n\nI am using XFCE. More specifically, the version from Linux Mint 18.3.\n\n\nWayland or X?\n\n\nX.\n\n\nDoes recording a WebM have the same effect?\n\n\nYes. The same freezing effect.\n\n\nIf on Gnome X11 session, does starting Peek with peek -b ffmpeg make any difference?\n\n\nEven though I'm not on Gnome, I tried the command; the backend doesn't record the GIF just fine. No success.. ",
    "maximbaz": "I also have the same issue on Arch Linux + lightdm + i3wm. Thanks for the tip with downsampling, this is the only way to record smooth gifs currently.\nFor reference, here is what happens when I record the same actions with downsampling of 2 and 1. I'm doing exactly the same actions on both gifs, but notice how half of my steps are simply gone from the high-quality gif, e.g. it froze and skipped opening of the menu.\n\n\nI'm attaching the original gif.zip in case you want to analyze them, because I think Github might tamper with pictures after uploading.\n. ",
    "matheuscorreia": "Having the same exact issue on Elementary OS + Gala. ",
    "gogoprog": "Same issue here:\npeek 1.3.1\nArchlinux\nAwesomeWM 4.2\nxorg-server 1.20.0\nnvidia 396.24\n. Any news on this?. ",
    "anonimoconiglio": "Exactly the same issue either under Archlinux (KDE 5.13; xorg-server 1.20.0-9; xf86-video-intel) and under Antergos (with an NVIDIA driver). . ",
    "solorvox": "Same issue as well in both Webm and Gif formats.  Even using high-res gifs.\nPeek (flatpack) 1.3.1\nLinux Mint 18.3 kernel 4.15.0-24-generic\nCinnamon: 3.6.7+sylvia\nXserver-xorg-core: 1.18.4-0ubuntu0.7 \nNvidia drivers: 384.130\n. ",
    "flamendless": "I have this similar error on the snap app. ",
    "debestesok": "please help\n. ",
    "Ranguna": "Thanks but where are the preferences ?\n\n. Yep it was in the task bar.\nThank you very much and keep it up :ok_hand: . ",
    "kinkylol": "Hi,\nThanks for the reply.\nIt's Debian 9\nLinux mla_pc 4.9.0-6-amd64 #1 SMP Debian 4.9.88-1+deb9u1 (2018-05-07) x86_64 GNU/Linux\nwith\nMate Desktop Environment 1.16.2\nRegards,\n. @CoryPulm Thanks a lot, it solves the issue.\nI just had to install both 'Mate Twea' and 'Compiz' with apt-get.\nRegards\n. ",
    "therox": "I have same problem in exactly the save environment. Is there any way to \"Unfullscreen\" app?. ",
    "nafidurmus": "I have same problem. ",
    "CoryPulm": "I had the same issue with Mate 1.12.1 + Ubuntu 16.04.4 LTS.\nI had to go into Mate's ControlCenter > Mate Tweak > Windows and set the Window Manager to 'Compiz', then set it to 'Marco (no compositor)' then finally back to my normal WM.. ",
    "szoper": "Ouch, you're right.\nI'm wondering if anything can be done to facilitate this. I even hoped for a runtime argument to open the preferences from CLI.. ",
    "bastianilso": "I have the same issue. I am using Peek from Flathub.. ",
    "mondalaci": "That may be the case, but when watching it, it certainly does not feel like 25 fps. There must be an issue in the pipeline.. Thanks!. ",
    "mariobl": "Peek is based on GTK, so I consider it as Gnome-related software. The German Gnome translation team uses the french quotation marks by default for ages, see https://wiki.gnome.org/de/UebersetzungsRichtlinien.\nThanks for merging the translation!. ",
    "sguillia": "@hosiet This could be closed, but I think it would cost nothing to add ffmpeg to the list of dependencies. Agreed. The runtime error message should then be improved.. After cmake, I was used to run make (which does not pull ffmpeg in this case). I should have run make package. Sorry!. ",
    "bentolor": "As a workaround: Uninstalling via PPA (sudo apt purge peek and then installing via: flatpak install flathub org.gnome.Platform//3.26 and flatpak install --user https://flathub.org/repo/appstream/com.uploadedlobster.peek.flatpakref produces a version which works fine.. @phw  I have vanilla ubuntu-desktop installed as well as ffmpeg, libgstreamer1.0-0 including libgstreamer-plugins-good1.0-0, libgstreamer-plugins-base1.0-0, libgstreamer-plugins-bad1.0-0 and libgstreamer-gl1.0-0.\nI'm using the default Ubuntu desktop which means Gnome Shell with X (?).  . Hello @phw \nTL;DR: For some reasons Peek started to work. Typical user-claim\u2122 provided:  I did not change anything!1!\nFor the records: \n\nType=x11\nGnome screen recorder works, puts them in my home directory (Video is a symblink to a write-protected location)\njournalctf -f does not provide any errors related to  this issue.\n\nSorry for bothering you. And thanks for your help! \nIf I'm able to reproduce, I'll come back to this issue.. @phw I assumed that too. Really having a hard time with Flatpak. It mostly does not work at-all yet. Hopefully it will graduate soon.\nThanks for you quick reply. I reported it upstream. See linked issue.. ",
    "simonbcn": "Same problem on Arch Linux. I suppose this is related to the general issue with Wayland: https://github.com/phw/peek/issues/33\nBut the developer wontfix.. In desktop applications (other than the browser) I can neither click nor type.. ",
    "madflow": "@simonbcn Thanks for the hint! I will close this issue since it is a duplicate.. @phw I cannot type click through the window. I guess it is more precise to say, that the underlying window containing the textarea/console etc. does not get focused when I click on it through the peek window. When I open the Gnome Terminal and focus the window by clicking \"next\" to the Peek frame, then I can type again.\nEDIT: I has been a while - Clicking on links on webpages or on browser controls does work - just not typing.. ",
    "Anudorannador": "Me too.\nBut I found  a simple solution :)\n\n\nMake the application that you want to interact (or say typing into) always on the top. Just simply right click on the title bar and click \"Always on the top\";\n\n\nClick Peek's Record button to record;\n\n\nRight click Peek's tile bar and uncheck  \"Always on the top\". \n\n\nAnd now you can input : ) \nBTW, do not take the step 3 before step 2, cause when you click Record button, Peek is on the top again.\nGenerally speaking, always ensure the application  you want to interact with is on the top and Peek is not on the top.\nAnd I just tested my OS, archlinux, Peek installed by pacman -S peek and version is 1.3.1-3.. ",
    "fvromera": "I have the same problem in Fedora 29 using Gnome + Wayland. Only can type on gnome shell, but cannot type in whatever other windows (Firefox, Sublime Text, etc.). I test changing to Gnome+Xorg and can type in all places again, so its some problem with Gnome+Wayland.. ",
    "Migacz85": "Same issue here, I cannot click throught window :( I'm currenty using i3wm on manjaro. \nDesktop=i3\nType=x11\nThere should be just option do turnof this frame, thats all.. ",
    "dima74": "Sorry, there is already same pr: #357. ",
    "rcano": "same here. ",
    "JobLeonard": "Also explains the cause of #364, I think.\nFor the record, I got the correct link from the flathub org page:\n\nI assume they are auto-generated and the most likely to be correct.\n. ",
    "joshuayuan": "Just installed peek, and get a similar error.\n\nCommand \"ffmpeg -f x11grab -show_region 0 -framerate 10 -video_size 1082x625 -i :0+123,164 -filter:v scale=iw/1:-1, crop=iw-mod(iw\\,2):ih-mod(ih\\,2) -codec:v libx264 -preset:v fast -profile:v baseline -pix_fmt yuv420p -r 10 -y /home/aaron/.cache/peek/peekBIG9RZ.mp4\" failed with status 256 (received signal 0).\nOutput:\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers  built with gcc 7.2.0 (crosstool-NG 8a21ab48)  configuration: --prefix=/home/aaron/anaconda3 --disable-doc --enable-shared --extra-cflags='-fPIC -I/home/aaron/anaconda3/include' --extra-cxxflags='=-fPIC' --extra-libs='-L/home/aaron/anaconda3/lib -lz' --enable-pic --disable-static --disable-gpl --disable-nonfree --disable-openssl --enable-libvpx --cc=/home/aaron/anaconda3/bin/x86_64-conda_cos6-linux-gnu-cc --cxx=/home/aaron/anaconda3/bin/x86_64-conda_cos6-linux-gnu-c++ --enable-libopus  libavutil      55. 78.100 / 55. 78.100  libavcodec     57.107.100 / 57.107.100  libavformat    57. 83.100 / 57. 83.100  libavdevice    57. 10.100 / 57. 10.100  libavfilter     6.107.100 /  6.107.100  libswscale      4.  8.100 /  4.  8.100  libswresample   2.  9.100 /  2.  9.100Unrecognized option 'show_region'.Error splitting the argument list: Option not found. \n",
    "ts-web": "I'd be willing to put in some legwork to draw up some alternate icon proposals.. I'll draw up some ideas this evening if I can make some time. Thanks :+1: . ",
    "jreidthompson": "ok -- this error is caused by ffmpeg being built without vpx support.  rebuilding with vpx support resolves the error and gif recording starts and completes fine. ",
    "jimmac": "Is this blocking on vanity? ;) \nThe aboutbox is quite exposed and perfect fine from my POV.. ",
    "snwh": "About box/name only credit is fine by me as well.. ",
    "BrainBlasted": "You'll want to remove ui/gtk/menus.ui, as that's what creates the shell menu.. You'll want to set the spacing to 6px, otherwise the separator at the end, the menu button, and the close button will all have no padding between them.\nsuggestion\n        <property name=\"spacing\">6</property>. The proper margin for the primary menu is 12, not 6 - that's a mistake I made in the Music implementation.\nsuggestion\n        <property name=\"margin\">12</property>. Instead of a GtkBox here, you can add the GtkMenuButton directly as a child of the GtkHeaderBar.. \"New Window\" and a GtkSeparator should be above this.. Items are currently aligned to the center, when they should be aligned to the left for Primary Menus. ",
    "jerameel": "Also does not run on Fedora 29,\n```\nlibfontconfig.so.1: undefined symbol: FT_Done_MM_Var\n```\nRuns fine with the workaround.... ",
    "derekhawker": "I had this issue but it was independent of Peek (also happened when I use other screen recorders). There could be several issues, but for me it was fixed by changing my \"AccelMethod\" from \"sna\" to \"uxa\"  in my x11 xorg conf\nhttps://wiki.archlinux.org/index.php/Intel_graphics#SNA_issues\n/etc/X11/xorg.conf.d/\n```\nSection \"Device\"\n    Identifier  \"Device0\"\n    Driver      \"intel\"\n    BusID       \"PCI:0:2:0\"\nOption      \"AccelMethod\" \"sna\"\nOption      \"AccelMethod\" \"uxa\"\nOption      \"DRI\"    \"true\"\n\nEndSection\n ```. ",
    "Naoray": "ended up adding the daily repository ppa:peek-developers/daily. ",
    "uusijani": "Alternatively, after adding the PPA, replace 'cosmic' with 'bionic' in the sources list, as the package for Bionic currently appears to install and work in Cosmic just fine (from my brief testing).\n. ",
    "xoan": "Ops, duplicated of #357 . ",
    "wwwjay": "What could be the reason for this ?. Let me have a look thanks.\nOn Tue, Dec 11, 2018 at 11:36 AM Philipp Wolfer notifications@github.com\nwrote:\n\nThe most common cause of this are missing gstreamer-good- or\ngstreamer-ugly-plugins packages. If you record MP4 and get this error this\nusually means the h.264 codec is missing, which usually is provided by the\ngstreamer-ugly-plugins package. Refer to your distribution's documentation\non how to install it\nYou can also look into the output of journalctl, there should be some\ngnome-shell logging with more details.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/phw/peek/issues/402#issuecomment-446116380, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/Ao2NJnbtoFrNxfjo0m4ska3IfvqLlPd2ks5u326agaJpZM4ZM4AA\n.\n. \n",
    "vans163": "I said Xorg backend, this is not wayland. I dont use wayland and probably never will as something better will come along.. ",
    "ivanbcco": "```(peek:12439): Gtk-DEBUG: Connecting to session manager\n (peek:12439): DEBUG: desktop-integration.vala:168: Desktop: MATE\n (peek:12439): DEBUG: application.vala:286: GTK theme: Mint-X\n (peek:12439): DEBUG: desktop-integration.vala:168: Desktop: MATE\n (peek:12439): DEBUG: application.vala:341: Decoration layout: menu:minimize,maximize,close\n (peek:12439): DEBUG: desktop-integration.vala:168: Desktop: MATE\n (peek:12439): DEBUG: application.vala:221: Changed keybinding_toggle_recording  => R\n (peek:12439): DEBUG: desktop-integration.vala:168: Desktop: MATE\n (peek:12439): DEBUG: utils.vala:68: Looking for executable ffmpeg (0): /usr/bin/ffmpeg\nUsing screen recorder backend ffmpeg\n (peek:12439): DEBUG: application-window.vala:860: Decoration layout: menu:minimize,maximize,close\n (peek:12439): DEBUG: recording-area.vala:38: Absolute recording area x: 28, y: 74, w: 1384, h: 796\n (peek:12439): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:12439): DEBUG: recording-area.vala:58: Clipped recording area x: 28, y: 74, w: 1384, h: 796\n (peek:12439): DEBUG: recording-area.vala:69: Scaled recording area x: 28, y: 74, w: 1384, h: 796\n (peek:12439): DEBUG: recording-area.vala:38: Absolute recording area x: 1, y: 1, w: 1438, h: 898\n (peek:12439): DEBUG: recording-area.vala:45: Screen w: 1440, h: 900\n (peek:12439): DEBUG: recording-area.vala:58: Clipped recording area x: 1, y: 1, w: 1438, h: 898\n** (peek:12439): DEBUG: recording-area.vala:69: Scaled recording area x: 1, y: 1, w: 1438, h: 898\n```. ",
    "PabloDinella": "Sorry, the problem was with another source. Removing that solved my problem.. ",
    "beeblebrox3": "@phw I'm not sure, probably apt-get from official repos of my distro. But I did \"clean install\" and is working now. Thanks!. ",
    "karate": "I have the same problem (using ffmpeg to save as GIF).. ",
    "lisael": "Same here with Peek 1.3.1 / ffmpeg 4.1-1 from debian sid.\nI also use I3 + compton\n. ",
    "Nirvandil": "Same error on Gentoo, glibc 2.28, peek 1.3.1, ffmpeg 4.1.1. ",
    "AronNovak": "@phw \n```\nAvailable Packages\nName         : vala\nVersion      : 0.42.5\nRelease      : 1.fc29\nArchitecture : i686\nSize         : 2.0 M\nSource       : vala-0.42.5-1.fc29.src.rpm\nRepository   : updates\nSummary      : A modern programming language for GNOME\nURL          : https://wiki.gnome.org/Projects/Vala\nLicense      : LGPLv2+ and BSD\nDescription  : Vala is a new programming language that aims to bring modern\n             : programming language features to GNOME developers without imposing any\n             : additional runtime requirements and without using a different ABI\n             : compared to applications and libraries written in C.\n             : \n             : valac, the Vala compiler, is a self-hosting compiler that translates\n             : Vala source code into C source and header files. It uses the GObject\n             : type system to create classes and interfaces declared in the Vala\n             : source code. It's also planned to generate GIDL files when gobject-\n             : introspection is ready.\n             : \n             : The syntax of Vala is similar to C#, modified to better fit the GObject\n             : type system.\nName         : vala\nVersion      : 0.42.5\nRelease      : 1.fc29\nArchitecture : x86_64\nSize         : 1.8 M\nSource       : vala-0.42.5-1.fc29.src.rpm\nRepository   : updates\n```. ",
    "SOTVM": "I`m Sorry.\nI don`t seen   --no-headerbar Options. ",
    "avalonv": "Thanks for responding. \nIt seems it was really a dconf issue on my side, on a fresh void install it is working perfectly!. ",
    "WestCoastMassacre": "ffmpeg: relocation error: ffmpeg: symbol av_hwdevice_iterate_types version LIBAVUTIL_55 not defined\n. ",
    "yannicka": "Done. What should it use?. Theme specific style removed.. Thanks. I've changed, it's better?. "
}