{
    "baotiao": "can you fix this bug? you can submit an issue, then we will merge it.\nThank you\n. Yes, you are right. we don't need to check whether the point is NULL before we delete it.\ncan you submit an issue to help us fix these bugs?\n. we have removed these unnecessary pointers\n. @elfring we don't like use these kind of smart pointer, we think we can control raw pointer well. we are the guys who think c++ is c with class. So we don't use lots of c++11, c++14 feature.\nAbsolutely, many c++11's feature is nice feature. But it change all the time, so we think we don't need to catch up with these new feature.\n. Yes, you are right, the double beginning underscore __ is reverse for special usage. We have fix this issue by add just one underscore at the end.\nThanks for you issue\n. we think these functions are always run well. If we need to check every return value from the function, we will all many unusable code in it, it also makes the code unreadable.\nso we just check the return values when we consider we need.\n. hello @elfring @bigpyer   thanks for your issue\ncan you guys tell me your inconveniences to use the makefile? Since we think the makefile is flexible enough to build our program.\nThe precondition is that we focus on the centos and ubuntu platform. We will not support osx and windows platform.\nThank you\n. @elfring I don't know that we should add catch exceptions in main.\nI will reading you article and decide whether we should add it.\nAnyway thanks for your advice. You are a c++ guru, you know  lots of details of c++.\n. good job. . close the issue, since we have discuss in wechat\n. done\n. can you tell me your usage? In Qihoo, there is less then 10% users use lua script when they use redis. So we haven't supported lua script.\n. Thanks for your issue. True be told, we don't support pipeline interface well in pika since  there is just a little users in our company use pipeline interface. If you guys really need these feature, we well add fix these problems in recently days. @qdaxb @xiaopengbilly \n. we have support PIPELINE, close this issue\n. right.\nwe don't support master-slave from config file. we want the user to use pika the same way as redis. And we have considered to useing config file, but useing config file will add new learning cost to user. So we negate this way.\n. pika \u7684\u573a\u666f\u5b9a\u4f4d\u975e\u5e38\u660e\u786e, \u5c31\u662f\u4e00\u4e2a\u5927\u5bb9\u91cf\u7684redis. \u89e3\u51b3redis\u7684\u5185\u5b58\u74f6\u9888\u7684\u95ee\u9898. \u5728\u8fd9\u79cd\u60c5\u51b5\u4e4b\u4e0b, \u5e0c\u671b\u7528\u6237\u4e0d\u9700\u8981\u4fee\u6539\u4efb\u4f55\u4ee3\u7801\u5c31\u53ef\u4ee5\u8fdb\u884c\u8fd9\u4e2a\u8fc1\u79fb. \n\u7136\u540e\u4ece\u53ef\u7ef4\u62a4\u6027\u7684\u89d2\u5ea6\u6765\u8bf4, \u5e0c\u671b\u8fd9\u4e2a\u670d\u52a1\u662f\u5f00\u53d1\u7ed9DBA\u4f7f\u7528\u7684, \u800c\u4e0d\u662f\u7ed9\u5f00\u53d1\u4eba\u5458. \u56e0\u6b64\u6613\u7528\u6027\u4e0a\u6765\u8bf4\u5e94\u8be5\u8fd8\u662f\u505a\u5f97\u53ef\u4ee5\u7684\nhuststore \u662f\u516c\u53f8\u5185\u90e8\u53e6\u5916\u4e00\u4e2a\u56e2\u961f\u5f00\u53d1\u7684, \u5e94\u8be5\u4e5f\u6709\u5bf9\u5e94\u7684\u4f7f\u7528\u573a\u666f, \u6211\u4eec\u8fd8\u4e0d\u592a\u4e86\u89e3.\n. \u9ed8\u8ba4codis \u4f7f\u7528redis \u7684\u65b9\u6cd5\u6765\u4f7f\u7528pika \u5c31\u884c, \u4e0d\u9700\u8981\u505a\u6539\u52a8\n. \u5199\u5e76\u53d1\u60c5\u51b5\uff1a\u6bcf\u4e2a\u5b9e\u4f8b 200 W/s (\u57fa\u51c6\u6d4b\u8bd5\u65f6\u53ef\u4ee5\u652f\u6301 3.6w W/s)\u3002\u6bcf\u4e2a\u5b9e\u4f8b\uff0c\u6bcf\u6b21\u5e73\u5747\u66f4\u65b0 40w KV\u3002\n\u8fd9\u4e2a\u662f\u4ec0\u4e48\u610f\u601d, \u6ca1\u770b\u660e\u767d?. @kkfnui  \u5728\u5199\u6570\u636e\u7684\u65f6\u5019\u6709\u6ca1\u6709\u5927\u6982\u7684\u78c1\u76d8\u538b\u529b\u4fe1\u606f, dstat, \u6211\u4eec\u597d\u5e2e\u4f60\u5b9a\u4f4d\u95ee\u9898.\n. @kkfnui  \u56e0\u4e3a\u5982\u679c\u6bcf\u4e2a\u5b9e\u4f8b\u6bcf\u79d2\u5199\u5165\u53ea\u6709168. \u90a3\u4e48IO \u5927\u6982\u662f\n168 * 20k = 3.28M. \u8fd9\u4e2aIO \u592a\u5c0f\u4e86. . good job. Thank you. Done. \u4f60\u8bd5\u8bd5\u5e76\u53d1\u7684\u73af\u5883\u4e0b\u9762\u662f\u4e0d\u662f\u9700\u8981\u52a0\u9501\u6765\u505a\u8fd9\u4e2a\u4e8b\u60c5,  \u6709\u6ca1\u6709\u53ef\u80fd\u662f\u5e76\u53d1\u7684\u65f6\u5019\u4e0d\u52a0\u9501\u7684\u63d2\u5165list \u5bfc\u81f4\u7684\u95ee\u9898. ok. \u76ee\u524d\u56e2\u961f\u7cbe\u529b\u6709\u9650, \u6240\u4ee5\u60f3\u4e13\u95e8\u641e\u597d centos \u4e0a\u9762\u7684\u652f\u6301, \u6bd5\u7adfcentos \u662f\u7528\u7684\u6700\u591a\u7684\u7ebf\u4e0aserver \u4e86\n. \u8fd9\u4e2a\u6211\u4eec\u5728wiki \u4e0a\u9762\u6dfb\u52a0\u4e00\u4e0b. \u4e0d\u80fd.  \u4f46\u662f\u6211\u4eec\u6709\u5de5\u5177\u4ece redis \u8fc1\u79fb\u5230 pika. \u4e5f\u6709\u5de5\u5177\u4ece pika \u8fc1\u79fb\u5230 redis. \u4f60\u80fd\u63d0\u4ea4\u4e00\u4e2a patch \u4fee\u6539\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\u4e48?\n. @BreakTom \u5df2\u7ecf\u89e3\u51b3\u4e86\u4e48?\n. \u76ee\u524d\u8fd8\u4e0d\u652f\u6301,  \u53ef\u4ee5\u652f\u6301\u4eceredis \u7528\u5de5\u5177\u5c06\u6570\u636e\u5bfc\u5165\u5230Pika. \u4f1a\u6709\u7684.. since 512m is too small in today's environment, we will compile a debian binary package recently. @yanjie108   \u786e\u5b9e\u662f\u65e7\u7248\u672c\u5185\u5b58\u95ee\u9898, \u5347\u7ea7\u5c31\u53ef\u4ee5\u4e86. @yanjie108  \u80fd\u5426\u628a\u8fd0\u884c\u65f6\u523b\u7684\u5185\u5b58\u4fe1\u606f\u7b49\u7b49\u53d1\u7ed9\u6211\u4eec. @fancy-rabbit   can you give a performance example to compare with ptmalloc, tcmalloc and jemalloc. There is some viewpoint that tcmalloc is suit for small memory malloc, and so on. I really want a benchmark.. @rfyiamcool  \u8d5e. pika \u8fdb\u7a0b\u88ab\u6740\u4ee5\u540e\u662f\u4e0d\u4f1a\u4e22\u65e5\u5fd7\u7684, pika \u5bf9\u5199\u5165\u7684\u4fdd\u62a4\u7ea7\u522b\u548credis \u4e00\u6837. \u5177\u4f53\u53ef\u4ee5\u770b\u8fd9\u4e2a\u65e5\u5fd7\nhttp://baotiao.github.io/2017/03/02/data-to-disk/. @derbyguyb   \u6709\u6253\u7b97\u652f\u6301, \u6211\u4eec\u5728\u60f3\u540e\u7eed\u5982\u4f55\u652f\u6301... you can add it yourself. good idea. can you do some tests case and make a pull request to us, we will very pleasure  to see the result.. 2.2.5 \u7248\u672c\u5728\u7ebf\u4e0a\u8fd0\u884c\u6709\u597d\u51e0\u4e2a\u6708\u4e86, \u76ee\u524d\u516c\u53f8\u5185\u90e8, \u516c\u53f8\u5916\u90e8\u90fd\u6ca1\u6709\u53cd\u9988\u5185\u5b58\u6cc4\u9732\u7684\u95ee\u9898.\n\u80fd\u5426\u63d0\u4f9b\u66f4\u591a\u7684\u65e5\u5fd7\u4fe1\u606f\u6211\u4eec \u6392\u67e5\u4e00\u4e0b. \u4f60\u628alog \u4fe1\u606f\u4e5f\u63d0\u4f9b\u51fa\u6765, \u4ee5\u53ca\u63d0\u4f9b\u4e00\u4e0b dmesg \u7684\u4fe1\u606f. \u5982\u679c\u53ef\u4ee5\u7684\u8bdd \u7528 pmap -x pid(pika \u7684\u8fdb\u7a0b\u53f7)  \u63d0\u4f9b\u7ed9\u6211\u4eec. \u8d5e! \u611f\u8c22\u63d0\u4f9b\u8be6\u7ec6\u7684\u65e5\u5fd7, \u6211\u4eec\u5206\u6790\u5206\u6790, \u660e\u5929\u7ed9\u4f60\u7ed3\u8bba \u8f9b\u82e6\u4e86. @xtudouh   \u6211\u4eec\u540e\u7eed\u4f1a\u4f18\u5316\u8fd9\u5757\u5185\u5b58\u4f7f\u7528\u7684\u903b\u8f91,  \u8fd8\u4f1a\u8fdb\u4e00\u6b65\u7684\u51cf\u5c11\u5185\u5b58\u4f7f\u7528. \u4f60\u73b0\u5728\u6682\u65f6\u7684\u505a\u6cd5\u53ef\u4ee5\u628a\u8fd9\u4e2a\u8fde\u63a5\u7684\u6709\u6548\u65f6\u95f4\u8bbe\u7f6e\u6210 1s \u6765\u89e3\u51b3. pika \u8fd9\u4e2a\u4e0a\u9762\u6709\u4e00\u4e2a\u7528\u6237\u63d0\u4f9b\u7684 Dockerfile  \u5e94\u8be5\u53ef\u4ee5\u4f7f\u7528\n. \u55ef  \u53ef\u4ee5. \u8fd9\u4e2a\u4e0b\u964d\u662f\u5728\u9884\u671f\u8303\u56f4\u5185\u7684, \u56e0\u4e3a\u6570\u636e\u6253\u4e86\u4ee5\u540e, \u5e95\u5c42\u7684\u5f15\u64ce\u4e5f\u9700\u8981\u505a\u6570\u636e\u7684compact \u7b49\u7b49\u64cd\u4f5c . @tigerzhang     \u8bf4\u5f97\u5bf9.. @hea   \u53ef\u4ee5\u8fd9\u6837,   \u6216\u8005\u4f60\u53ef\u4ee5\u52a0\u5927\u70b9\u5185\u5b58. \u4e5f\u4e00\u5b9a\u53ef\u4ee5\u589e\u52a0\u6027\u80fd. \u55ef  \u6709\u95ee\u9898\u968f\u65f6\u8054\u7cfb\u6211\u4eec \u54c8\u54c8. \u4f60\u8fd9\u4e2a\u6570\u636e80G \u7684\u8bdd \u5176\u5b9e\u5b58\u5728redis \u91cc\u9762\u7684\u8bdd\u4f1a\u6709320G \u5de6\u53f3. \u8fd9\u4e2a\u662f\u6211\u4eec\u5b9e\u9645\u6d4b\u8bd5\u7684\u4e00\u4e2a\u4e1a\u52a1\u7684\u7ebf\u4e0a\u6570\u636e, redis\u548c pika \u7684\u538b\u7f29\u6bd4\u80fd\u591f\u8fbe\u5230 1:4. @hea  \u80fd\u5426\u7528 iostat -xm 1 \u6216\u8005 dstat \u770b\u4e00\u4e0b\u76ee\u524d\u7684\u78c1\u76d8IO, \u4ee5\u53ca\u4f60\u7684\u5355\u4e2avalue \u7684\u5927\u5c0f\u662f\u591a\u5927. @hea   \u90a3\u5c31\u662f\u4e0d\u5199slot \u6027\u80fd\u5176\u5b9e\u6bd4 ssdb \u597d\u5f97\u591a.. 120w/\u5206\u949f . @hea\n1243540 / 60  = 20725  \u6570\u636e\u7684\u5927\u5c0f\u662f 1k \u4e5f\u5c31\u662f \u4e0a\u5c42\u4f60\u770b\u5230\u7684io \u5927\u6982\u662f 20.725MB/s   \u90a3\u4e48\u5bf9\u4e8e\u5e95\u4e0b\u7684\u5f15\u64ce\u6765\u8bf4, \u7531\u4e8e\u5199\u653e\u5927\u7684\u5b58\u5728, \u6240\u4ee5\u78c1\u76d8io \u5dee\u4e0d\u591a\u662f 200 MB/s  \u5bf9\u4e8e\u4f60\u8fd9\u4e2a\u78c1\u76d8\u7684\u6027\u80fd\u662f\u6b63\u5e38\u7684\u4e86. @hea   \u8d5e. @hea @KernelMaker   \u8fd9\u4e2a\u7ed3\u679c\u975e\u5e38\u597d\u5462.. . @hea   \u8d5e.\n\u7b49\u4f60\u4e0a\u7ebf \u6211\u4eec\u628a\u4f60\u4eec\u52a0\u5230 user list \u91cc\u9762.  \u8fd9\u662f\u6211\u4eec\u89c1\u8fc7\u5728\u4e91\u670d\u52a1\u5668\u4e0a\u6700\u8be6\u7ec6\u7684\u6d4b\u8bd5\u4e86..\n. \u76ee\u524d\u6682\u65f6\u4e0d\u652f\u6301 exec \u547d\u4ee4. @jianqingdu   \u770b\u7684\u633a\u7ec6\u7684,  \u6709\u65f6\u95f4\u4e00\u8d77\u548c\u6211\u4eec\u4f18\u5316 nemo. @xmm1989218  \u6709\u6ca1\u6709\u66f4\u8be6\u7ec6\u7684log \u6211\u4eec\u770b\u770b.. @bittoy  \u6211\u4eec\u76ee\u524d\u8fd8\u6ca1\u6709\u7cbe\u529b\u5b8c\u6574\u7684\u53bb\u652f\u6301 codis, \u6240\u4ee5\u6709\u95ee\u9898\u6bd4\u8f83\u6b63\u5e38. \u4f60\u8981\u662f\u6709\u7cbe\u529b\u6b22\u8fce\u53c2\u4e0e\u8fdb\u6765. \u76ee\u524dPika \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 \u4e8c\u8fdb\u5236\u5305, \u89e3\u538b\u5c31\u53ef\u4ee5. \u6bd4docker \u8fd8\u65b9\u4fbf @airclear   \u4f60\u53ef\u4ee5\u8bd5\u8bd5. @Leviathan1995   \u4ea4\u7ed9\u4f60\u4e86, \u5c11\u5e74. \u8fd9\u4e2a\u95ee\u9898\u51fa\u73b0\u6982\u7387\u5f88\u4f4e, \u7b49\u6211\u4eec\u590d\u73b0\u7684\u65f6\u5019\u5728\u4fee\u590d. good job,  boy.\n. pika \u6682\u65f6\u4e0d\u652f\u6301 hash-zipmap-max-entries \u8fd9\u4e2a\u53c2\u6570. where do you use the compress option?. \u7edf\u4e00\u6539\u6210public \u4e00\u683c\u7f29\u8fdb. \u6539\u6210\u7528 printf \u6216\u8005 snprintf, \u522b\u7528iostream. When we use c, declare all variables at the head of the function is a good habit. The reason is that this is good for compiler optimization. However, in cpp, it is not a good habit to do this way. Since cpp has pay expense of the construct. . we don't suggest use goto in our program, since goto make the program unreadable... ",
    "songbingyu": "I have commit a  pull request   #4 \n. ",
    "KernelMaker": "Thx\n. We have fixed it, thx!\n. pika get the ip address from \"eth0\"(DEFAULT) at startup and use it in connecting with master, check your network card configuration and find out whether the \"eth0\" exists\nHere is the current way to get the ip of the local host, we will change it later and make it more flexible: \n``` cpp\nbool PikaServer::ServerInit() {\nint fd;\n  struct ifreq ifr;\nfd = socket(AF_INET, SOCK_DGRAM, 0);\n  ifr.ifr_addr.sa_family = AF_INET;\n  strncpy(ifr.ifr_name, \"eth0\", IFNAMSIZ-1);\n  ioctl(fd, SIOCGIFADDR, &ifr);\n  close(fd);\nhost_ = inet_ntoa(((struct sockaddr_in *)&ifr.ifr_addr)->sin_addr);\n  port_ = g_pika_conf->port();\nreturn true;\n}\n```\n. checkout the tag(v2.0.5), change the code and rebuild, Thanks for the reports. ^^\ncpp\nstrncpy(ifr.ifr_name, \"eth1\", IFNAMSIZ-1);\n. Hi unoexperto:\n    We are planning to supporting LUA in Pika, but it may take a while before we finally release this cause there are something we have to consider and solve:\n1). Accomplish a built-in LUA interpreter in Pika\n2). LUA supporting requires Pika to support the atomic semantic like MULTI/EXEC commands in Redis, it would bring a performance penalty. Pika store data in disk not memory, if we simply use only one thread to serve, like Redis, we can easily bring atomic semantic, but the performance will decrese 4~6X, which is not what the Pika's users want. We need to find out a better way\nAnyway, we belive that LUA supporting will come sooner or later, thanks for using^^. Thanks for the reports! Because we don't inspect EPOLLIN when handing EPOLLOUT, it works well without pipeline before. When you use pipeline to executing multi commands, both side(pika & client) may have deadlock because the tcp sending buffer become full\uff0cthen the client may be blocked as you said. we have fixed it in v2.1.0, try^^\n. Thx for reporting!!!\nwrite_buffer_size is used to set memtable size of rocksdb at startup and could't be modified in running time.\nwe tried it but didn't observe the behivious you described, can you give us more details about this\uff1f\n. we will add this feature in the next version\uff0ccoming soon\uff0cthx^^\n. pika use rocksdb as its storage engine, it doesn't cache more data in memory except for blockcache(8M default). write-buffer-size is only used to adjust the size of memtable and memtable is not used as cache. \nAnyway, you can adjust \"max-cache-files\"(5000 default) to enlarge the size of tablecache. To an extent it could improve performance when you have a HUGE dataset in pika\n. Thx\n. \u611f\u8c22\u53cd\u9988\uff01\n\u4f60\u7684\u673a\u5668\u6709\u4e24\u5757\u7f51\u5361\uff1f\u8fd9\u4e2a\u95ee\u9898\u5e94\u8be5\u662fslave\u542f\u52a8\u7684\u65f6\u81ea\u52a8\u8bbe\u7f6e\u7684server ip\u548c\u771f\u6b63\u7ed1\u5b9a\u7684ip\u4e0d\u4e00\u6837\u9020\u6210\u7684\uff0c\u5173\u4e8e\u7ed1\u5b9a\u7f51\u5361\u7684\u95ee\u9898\u6211\u4eec\u5df2\u7ecf\u5728\u6700\u65b0\u7684master\u5206\u652f\u52a0\u4e0a\u4e86\uff0c\u4f60\u53ef\u4ee5\u62c9\u4e0b\u6765\u7f16\u8bd1\u8bd5\u4e00\u4e0b\uff0c\u5e94\u8be5\u53ef\u4ee5\u89e3\u51b3\u4f60\u7684\u95ee\u9898^^\n. \u4f60\u770b\u4e0b\u51fa\u73b0\u95ee\u9898\u540eslave\u7684\u65e5\u5fd7\uff0cpika\u7684slave\u7aef\u9ed8\u8ba4\u4f1a\u7528\u914d\u7f6eport\u52a03000\u6765\u4f5c\u4e3arsync\u7684\u7aef\u53e3\uff0c\u4f60\u53ef\u4ee5\u770b\u4e0b\u90a3\u4e2a\u7aef\u53e3\u518d\u51fa\u95ee\u9898\u65f6\u7684\u72b6\u6001\n. pika\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u5efa\u7acb\u4e3b\u4ece\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u52a0\u4e00\u4e0b\u7684\n. \u53ef\u4ee5\u901a\u8fc7slaveof no one\u6765\u7ec8\u6b62\u4e3b\u4ece\u5173\u7cfb\uff1b\n\u4f60\u91cd\u542f\u7684\u662f\u4ece\u8fd8\u662f\u4e3b\uff1f\u5982\u679c\u662f\u4ece\u7684\u8bdd\uff0cdown\u72b6\u6001\u53ef\u80fd\u662f\u56e0\u4e3a\u4e3b\u4ece\u89c1binlog\u504f\u79fb\u91cf\u5dee\u8ddd\u8fc7\u5927\u89e6\u53d1\u5168\u540c\u6b65\uff0c\u7b49\u5168\u540c\u6b65\u7ed3\u675f\u540e\u5c31\u6062\u590d\u6210up\u4e86\n. \u5e94\u8be5\u662f\u4ece\u7684binlog\u504f\u79fb\u91cf\u5927\u4e8e\u4e86\u4e3b\u7684binlog\u504f\u79fb\u91cf\uff0c\u4e3b\u6ca1\u6cd5\u627e\u5230\u540c\u6b65\u70b9\uff0c\u53ef\u80fd\u662f\u4f60\u5728\u4e3b\u4ece\u5173\u7cfb\u5efa\u7acb\u4e4b\u524d\u7ed9\u4ece\u5199\u8fc7\u6570\u636e\u5427\n. \u662f\u7684\n. pika 2.1.2\u5df2\u53d1\uff0c\u5df2\u7ecf\u652f\u6301\u914d\u7f6eslaveof\u4e86\n. Thank ^^\n. \u591a\u8c22\u53cd\u9988\uff0cpika\u8fd9\u91cc\u9664\u4e86\u8fde\u63a5\u6570\u4e0a\u9650\u4e4b\u5916\u6ca1\u6709\u5176\u4ed6\u9650\u5236\uff0c\u4f60\u53ef\u4ee5\u5148\u6392\u67e5\u4e00\u4e0b\uff1a\n1. \u51fa\u9519\u65f6\u6bb5\u5ba2\u6237\u7aef\u62a5\u4ec0\u4e48\u9519\uff0c\u8d85\u65f6\uff1f\n2. \u5982\u679c\u662f\u8d85\u65f6\u9519\u8bef\uff0c\u770b\u4e0b\u65e0\u54cd\u5e94\u65f6\u6bb5pika\u7684\u6162\u65e5\u5fd7\uff0c\u731c\u6d4b\u90a3\u4e2a\u65f6\u5019\u53ef\u80fd\u662f\u4f60\u4eec\u6709\u5728\u96c6\u4e2d\u6267\u884c\u8017\u65f6\u6bd4\u8f83\u591a\u7684\u8bf7\u6c42\uff0c\u5bfc\u81f4\u5176\u4ed6\u8bf7\u6c42\u65e0\u6cd5\u54cd\u5e94\n\u53e6\u5916\uff0c\u4f60\u4eec\u7528\u7684pika\u7684\u7248\u672c\u662f\u591a\u5c11\u5462\uff1f\n. \u4f60\u4eec\u7684\u8fde\u63a5\u6570\u53caQPS\u90fd\u4e0d\u5927\uff0c\u4e0d\u5e94\u8be5\u51fa\u73b0\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u6211\u770b\u56fe\u91cc\u7684\u9ad8\u5cf0\u65f6\u6bb5\u662f\u572813:20\u523013:25\u4e4b\u95f4\uff0c\u8fd9\u6bb5\u65f6\u95f4\u7684\u6162\u65e5\u5fd7\u4e5f\u6b63\u5e38\u5417\uff1f\u5982\u679c\u786e\u8ba4\u6392\u9664\u6162\u8bf7\u6c42\u9020\u6210\u7684\u963b\u585e\uff0c\u90a3\u8bf7\u518d\u786e\u8ba4\u4e00\u4e0b\uff1a\n1. \u670d\u52a1\u5668\u5728\u95ee\u9898\u65f6\u6bb5\u7684\u8d1f\u8f7d\u4fe1\u606f\uff1aCPU\uff0c\u5185\u5b58\u53ca\u78c1\u76d8\u5360\u7528\uff0c\u78c1\u76d8\u53ca\u7f51\u7edcio\n2. \u5e73\u65f6\u72b6\u6001\u4e0b\u5ba2\u6237\u7aef\u90fd\u6709\u4ec0\u4e48\u8bf7\u6c42\uff1f\u9ad8\u5cf0\u72b6\u6001\u4e0b\u591a\u51fa\u6765\u7684100\u591a\u5ba2\u6237\u7aef\u5728\u505a\u4ec0\u4e48\u8bf7\u6c42\uff1f\u4f60\u4eec\u6709zset\u7684\u5220\u9664\u6216\u8fc7\u671f\u64cd\u4f5c\u5417\uff0c\u662f\u5426\u9891\u7e41\uff1f\n3. \u95ee\u9898\u65f6\u6bb5\u51fa\u9519\u7684\u5ba2\u6237\u7aef\u662f\u8fde\u63a5\u8d85\u65f6\u8fd8\u662f\u8bfb\u5199\u8d85\u65f6\uff1f\n4. \u95ee\u9898\u65f6\u6bb5\u7684\u6301\u7eed\u65f6\u95f4\u5927\u6982\u591a\u4e45\u5462\uff1f\u5982\u679c\u7a33\u5b9a\u590d\u73b0\uff0c\u4f60\u53ef\u4ee5\u5728\u51fa\u95ee\u9898\u65f6\u901a\u8fc7htop\u6216strace\u6765\u770b\u4e0b\u5f53\u65f6pika\u7684\u7ebf\u7a0b\u72b6\u51b5\uff0c\u662f\u5426\u6709\u5361\u5728\u4ec0\u4e48\u8c03\u7528\u4e0a\u4e4b\u7c7b\u7684\n\u8f9b\u82e6\u5566^^\n. \u55ef\uff0c\u5e94\u8be5\u662fzrange\u8bf7\u6c42\u8fc7\u5927\u5bfc\u81f4\u7ebf\u7a0b\u5361\u6b7b\uff1b\n1. \u6bcf\u6761\u547d\u4ee4\u6267\u884c\u5b8c\u5982\u679c\u6ee1\u8db3\u5237\u6162\u65e5\u5fd7\u7684\u6761\u4ef6\u5e94\u8be5\u662f\u4f1a\u5199\u5230\u6162\u65e5\u5fd7\u6587\u4ef6\u4e2d\u7684\uff0c\u4f60\u8bf4\u7684\u6162\u65e5\u5fd7\u4e2d\u6ca1\u6709\u6709\u4e24\u4e2a\u539f\u56e0\uff1a1) \u90a3\u6761\u7279\u522b\u6162\u7684\u547d\u4ee4\u76f4\u5230\u5173\u95ed\u670d\u52a1\u65f6\u59cb\u7ec8\u6ca1\u6709\u6267\u884c\u5b8c\uff1b2) \u53ef\u80fd\u5237\u5230\u6587\u4ef6\u4e2d\u4e86\u4f60\u6ca1\u6709\u627e\u5230\u3002\u53e6\u5916\u50cfzrange\u8fd9\u79cd\u8bfb\u547d\u4ee4\u662f\u4e0d\u4f1a\u5199\u5230binlog\u4e2d\uff0c\u53ea\u6709\u5199\u547d\u4ee4\u624d\u4f1a\u5199binlog\n2. \u5982\u679czset\u6709\u8f83\u9891\u7e41\u5e76\u4e14\u5927\u91cf\u7684\u8fc7\u671f\u64cd\u4f5c\uff08\u5df2\u8fc7\u671f\uff09\uff0c\u8fd9\u6837\u7684\u60c5\u51b5\u4f1a\u7a0d\u5fae\u5f71\u54cdzrange\u7684\u6267\u884c\u6548\u7387\uff0c\u5982\u679c\u4f60\u4eec\u7684\u8fc7\u671f\u64cd\u4f5c\u5f88\u591a\u5e76\u4e14\u5df2\u7ecf\u6709\u5927\u91cf\u7684\u5143\u7d20\u5df2\u7ecf\u8fc7\u671f\uff0c\u63a8\u8350\u5728\u8d1f\u8f7d\u4f4e\u5cf0\u65f6\u624b\u52a8\u6267\u884ccompact\u547d\u4ee4\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8zrange\u7684\u6267\u884c\u901f\u5ea6\n3. pika\u662f\u57fa\u4e8ekv\u7684\u63a5\u53e3\u6765\u5b9e\u73b0\u7684zset\u548chash\u7ed3\u6784\uff0c\u6240\u4ee5zrange\uff0chkeys\u548chgetall\u7684\u590d\u6742\u5ea6\u5747\u4e3aO(N)\uff0c\u4e0d\u8fc7\u4e0d\u540c\u4e8eredis\u7684\u5185\u5b58\u64cd\u4f5c\uff0cpikaO(N)\u7684\u6bcf\u6b21\u64cd\u4f5c\u662f\u5bf9\u78c1\u76d8\u8fdb\u884c\u8bfb\u5199\uff08\u5f53\u7136\u7531\u4e8ecache\uff0c\u4e5f\u4e0d\u662f\u5168\u90e8\u8fdb\u884c\u78c1\u8bfb\u5199\u78c1\u76d8\uff09\uff0c\u8fd9\u4e09\u4e2a\u64cd\u4f5c\u7684\u6027\u80fd\u5747\u4f4e\u4e8eredis\n4. \u5728\u6570\u636e\u91cf\u8f83\u5927\u7684\u60c5\u51b5\u4e0b\u4e0d\u63a8\u8350\u76f4\u63a5\u4f7f\u7528keys\uff0chkeys\uff0chgetall\u7b49\u83b7\u53d6\u5168\u91cf\u6570\u636e\u7684\u63a5\u53e3\uff0c\u53ef\u4ee5\u4f7f\u7528scan\uff0chscan\u52a0count\u6765\u66ff\u4ee3\uff0c\u5c06\u4e00\u6b21\u8bf7\u6c42\u5207\u5206\u4e3a\u591a\u6b21\u6765\u6267\u884c\n. \u8fd9\u4e2a\u662f\u7531rocksdb\u652f\u6301\u7684\uff0c\u901a\u8fc7iterator\u53ef\u4ee5\u6309\u7167\u5b57\u5178\u5e8f\u5c06key\u4ece\u5c0f\u5230\u5927\u904d\u5386\u51fa\u6765\uff0c\u6240\u4ee5nemo\u53ea\u9700\u8981\u5c06\u5b58\u5728rocksdb\u7684key\u6309\u4e00\u5b9a\u65b9\u5f0f\u62fc\u63a5\u7ec4\u7ec7\uff08\u770b\u8fd9\u91cc\uff09\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u76f8\u5173\u6392\u5e8f\u4e86\n. \u5728nemo\u5c42\u9762\u662fO(m)\uff0c\u4e0d\u8fc7\u771f\u6b63\u5728rocksdb\u7684\u5c42\u9762\u8fd8\u662fO(N)\uff0c\u5177\u4f53\u7684\u539f\u56e0\u4f60\u53ef\u4ee5\u770b\u4e0bnemo\u548crocksdb\u7684\u5b9e\u73b0\n. \u5f15\u64ce\u5bf9member\u7684\u5927\u5c0f\u6ca1\u6709\u9650\u5236\uff0c\u4e0d\u8fc7\u534f\u8bae\u89e3\u6790\u6a21\u5757\u9ed8\u8ba4\u5faa\u73af\u4f7f\u75282M\u7684buffer\uff0c\u6240\u4ee5\u8bf4\u5982\u679c\u5728\u534f\u8bae\u5305\u4e2d\u6709\u5355\u4e2a\u5b57\u6bb5\u5927\u4e8e2M\uff0c\u670d\u52a1\u7aef\u4f1a\u76f4\u63a5\u5173\u95ed\u8fde\u63a5\u505c\u6b62\u89e3\u6790\uff0c\u8fd9\u4e2a\u4f60\u4eec\u53ef\u4ee5\u518dpink\u7684\u4ee3\u7801\u91cc\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u53bb\u8c03\u6574\uff0c\u4e0d\u8fc7\u4f60\u4eec\u5355\u4e2a\u5b57\u6bb5\u5c312M\u662f\u6709\u4e9b\u5927\u4e86\u3002\u3002\u3002\n. \u4e0d\u4f1a\u963b\u585e\u8bf7\u6c42\uff0c\u662frocksdb\u7684\u7279\u6027\uff0c\u4e0d\u8fc7\u5728\u6570\u636e\u91cf\u5f88\u5927\u5e76\u4e14\u6267\u884cinfo keyspace\u65f6\u4e0d\u63a8\u8350compact\n. \u6211\u4eec\u6253\u4e86\u53ef\u4ee5\u76f4\u63a5\u7528\u7684\u4e8c\u8fdb\u5236\u5305\u65b9\u4fbf\u5927\u5bb6\u76f4\u63a5\u4e0b\u8f7d\u4f7f\u7528\uff0c\u5982\u679c\u4f60\u4eec\u9700\u8981\u5bf9pika\u4ee3\u7801\u8fdb\u884c\u6539\u52a8\u5c31\u9700\u8981\u6539\u52a8\u5b8c\u91cd\u65b0\u7f16\u8bd1\u4e86\u3002\n\u5360\u7528\u7a7a\u95f4\u662f\u6b63\u5e38\u7684\uff0c\u4e0d\u8fc7\u4f60\u8bf4\u76842.7G\u7684\u65e5\u5fd7\u6587\u4ef6\u662f\u4ec0\u4e48\u6587\u4ef6\u5462\uff1f\n. \u7f16\u8bd1\u5b8c\u4e4b\u540e\u9664\u4e86output\u76ee\u5f55\u5916\u5176\u4ed6\u7684\u90fd\u53ef\u4ee5\u4e0d\u7528\u4e86\uff0c300M\u7684\u5360\u7528\u7a7a\u95f4\u6ca1\u95ee\u9898\u7684\uff0c\u653e\u5fc3\u5427\n. pika\u9ed8\u8ba4\u7684\u53d1\u9001MAX_MESSAGE\u662f64M\uff0c\u5e94\u8be5\u662f\u548credis\u4e00\u6837\u7684\uff0c\u4f60\u4eeckeys\u7684\u7ed3\u679c\u662f\u4e0d\u662f\u592a\u5927\u4e86\uff0c\u540c\u6837\u7684\u6570\u636e\u4e4b\u524d\u7528redis\u65f6\u6267\u884ckeys\u6ca1\u6709\u95ee\u9898\u5417\uff1f\n. \u4f60\u662f\u6539\u4e86pink\u7684REDIS_MAX_MESSAGE\u662f\u5417\uff1f\u9700\u8981\u5206\u522b\u5bf9pink\u548cpika\u6267\u884cmake clean\u540e\u5728\u91cd\u65b0make\n. \u8fd9\u4e2a\u7b49\u4e8e\u7ed9\u4e00\u4e2aclient\u5206\u914d\u7684rbuf\u7684\u5927\u5c0f\uff0c\u5e76\u4e14wbuf\u6700\u5927\u4e3a\u8be5\u503c\u768432\u500d\uff0c\u5982\u679c\u592a\u5927\u5e76\u4e14\u5ba2\u6237\u7aef\u6570\u76ee\u8f83\u591a\uff0c\u5728server\u7aef\u6bd4\u8f83\u8017\u5185\u5b58\n. 8G\u592a\u5927\u4e86\uff0c\u73b0\u5728\u9ed8\u8ba4rbuf\u662f2M\uff0cwbuf\u662f64M\uff0c\u6211\u89c9\u5f97*2\u5dee\u4e0d\u591a\u4e86\uff0c\u518d\u591a\u5c31\u4e0d\u5408\u9002\u4e86\n. \u8fd9\u4e2a\u9519\u5c31\u662f\u4e00\u6b21\u53d6\u5f97\u6570\u636e\u8fc7\u591a\uff0c\u5bfc\u81f4wbuf\u5b58\u4e0d\u4e0b\u800c\u62a5\u9519\uff0c\u76ee\u524d\u8fd8\u6ca1\u6709\u6536\u5230\u548c\u4f60\u7c7b\u4f3c\u9519\u8bef\u7684\u53cd\u9988\uff0c\u90a3\u4f60\u518d\u6539\u5927\u70b9\u8bd5\u8bd5\uff0c4\uff0c_8\u4e4b\u7c7b\u7684\u5427\n. \u8fd9\u4e2a\u662f\u4e3b\u4ece\u540c\u6b65\u7684binlog\uff0c\u4e0d\u7528\u624b\u52a8\u5220\u9664\uff0cpika\u4f1a\u6839\u636e\u914d\u7f6e\u81ea\u52a8\u5220\u9664\uff0c\u5982\u679c\u81ea\u52a8\u5220\u9664\u5931\u6548\uff0c\u53ef\u4ee5\u68c0\u67e5\u4e00\u4e0b\u8be5\u8282\u70b9\u662f\u5426\u6709\u6302slave\uff0c\u53ef\u80fd\u7531\u4e8eslave\u5360\u7684\u540c\u6b65\u70b9\u6bd4\u8f83\u9760\u524d\u5bfc\u81f4\u524d\u9762\u7684\u6587\u4ef6\u90fd\u6ca1\u6cd5\u81ea\u52a8\u5220\u9664\n. pika\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528redis\u7684\u5ba2\u6237\u7aef\u3002\n\u76ee\u524d\u6211\u4eec\u7ebf\u4e0a\u5e38\u89c1\u7684\u7528\u6cd5\u7684\u4e00\u4e3b\u591a\u4ece+\u8bfb\u5199\u5206\u79bb\u6765\u6269\u5c55\uff0c\u8fd9\u6837\u7684\u65b9\u5f0f\u5199\u5165\u4f9d\u65e7\u662f\u5355\u70b9\uff0c\u4e0d\u8fc7\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7ed9pika\u4e0a\u5c42\u6302codis\u6765\u8fdb\u884c\u5206\u7247\u3002\u76ee\u524d\u6211\u4eec\u8fd8\u6ca1\u67091pb\u7684\u7ebf\u4e0a\u4f7f\u7528\u573a\u666f\uff0c\u8fd9\u4e2a\u9700\u8981\u9a8c\u8bc1\u3002\n. \u55ef\uff0cpika\u7684\u5b9a\u4f4d\u5c31\u662f\u5728\u529f\u80fd\u4e0a\u63a5\u8fd13.0\u4e4b\u524d\u7684redis\uff08\u4e0d\u652f\u6301cluster\uff0c\u4ec5\u652f\u6301\u901a\u8fc7slaveof\u6765\u505a\u4e3b\u4ece\uff09\uff0c\u76ee\u524d\u6211\u4eec\u516c\u53f8\u5185\u90e8\u6ca1\u6709\u7ed9pika\u6302codis\u505a\u5206\u7247\uff0c\u5355\u5b9e\u4f8b\u6700\u5927\u57282T\u5de6\u53f3\n. \u6682\u65f6\u8fd8\u6ca1\u6709\u652f\u6301\u5206\u7247\u7684\u8ba1\u5212\uff0c\u4f60\u53ef\u4ee5\u5148\u6302codis\u6765\u5b9e\u73b0\n. \u770b\u4f60\u53d1\u7684\u4fe1\u606f\u91cc\u9762tablecache\u548cmemtable\u53ea\u5360\u4e86300M\u7684\u5185\u5b58\uff0c\u4e0d\u5927\uff0c\u6240\u4ee5\u5185\u5b58\u53ef\u80fd\u90fd\u88ab\u5ba2\u6237\u7aef\u8fde\u63a5\u7ed9\u5360\u4e86\uff08\u6bcf\u4e2a\u5ba2\u6237\u7aef\u9ed8\u8ba4\u53604M\uff09\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u8fde\u63a5\u6570\u8fc7\u591a\u4f1a\u5bfc\u81f4\u5185\u5b58\u8fc7\u5927\n. pika\u5bf9\u8d85\u8fc7timeout\u65f6\u95f4\u4e0d\u6d3b\u52a8\u7684\u5ba2\u6237\u7aef\u4f1a\u4e3b\u4ececlose\uff0c\u4e4b\u6240\u4ee5\u51fa\u73b0FIN_WAIT2\u662f\u56e0\u4e3apika\u65ad\u5f00\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u6ca1\u6709\u8c03\u7528close\u64cd\u4f5c\uff0c\u4e00\u76f4\u5904\u5728close_wait\u72b6\u6001\u3002\n1. \u4f60\u53ef\u4ee5\u68c0\u67e5\u4e00\u4e0b\u4f60\u4eec\u5ba2\u6237\u7aef\u7684\u7528\u6cd5\uff0c\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fc7\u591a\u6b7b\u8fde\u63a5\u6302\u5728\u4e0a\u9762\uff08\u63a8\u8350\uff09\n2. \u53ef\u4ee5\u5728\u670d\u52a1\u7aef\u8bbe\u7f6etcp_mem\u53c2\u6570\u6765\u9650\u5236tcp\u5185\u5b58\u4f7f\u7528\uff0c\u4e0d\u8fc7\u5982\u679c\u6b63\u5e38\u8fde\u63a5\u8d85\u8fc7\u4e86\u8fd9\u4e2a\u503c\u4f1a\u505c\u6b62\u5206\u914d\u65b0\u7684tcp\u8fde\u63a5\uff08\u8c28\u614e\u4f7f\u7528\uff09\n. \u7528\u6cd5\u548credis\u4e00\u6837\uff0cexpire key seconds\uff0c\u4f60\u53ef\u4ee5\u53c2\u8003redis\u7684\u547d\u4ee4http://redis.io/commands/expire\n. pika\u53ef\u4ee5\u5141\u8bb8\u4e0d\u540c\u6570\u636e\u7ed3\u6784\u6709\u76f8\u540c\u7684key\uff0c\u4e0d\u8fc7del\uff0cexpire\u7b49\u90fd\u662f\u540c\u65f6\u5bf9\u6240\u6709\u6570\u636e\u7ed3\u6784\u6709\u6548\uff0c\u63a8\u8350\u5728\u4f7f\u7528\u4e2d\u6700\u597d\u4e0d\u8981\u5b58\u5728\u76f8\u540c\u7684key\n. \u76ee\u524d\u8fd8\u4e0d\u652f\u6301. See the implement of the slash::RecordMutex may shoot your confusion, we use mutex_record like this in pika_client_conn: \ng_pika_server->mutex_record_.Lock(argv_[1]);. No. The number of the worker-thread is limited and every worker-thread could only execute one operation at the same time. A worker-thread usually lock only one RecordMutex at the beginning of the write operation and unlock(and free if needed) it when the operation is done. . 2. pika use record mutex to guarantee the thread-safety for every key. 1. All connections are spread out over all worker threads, and pika use epoll to serve several clients simultaneously\u3002Read the code and learn something about epoll may solve you confusion.\n\nNot exactly. I mean pika do not support expanding space automatically and smoothly, but you can do some trick to get what you want, like add a new slave which storing data in huge new disk.. Nice Job!. bool PikaTrysyncThread::Send() {\n  pink::RedisCmdArgsType argv;\n  std::string wbuf_str;\n  std::string masterauth = g_pika_conf->masterauth();\n  if (masterauth != \"\") {\n    argv.push_back(\"auth\");\n    argv.push_back(masterauth);\n    pink::RedisCli::SerializeCommand(argv, &wbuf_str);\n  }\n......\n}\n\u8fd9\u91cc\u517c\u5bb9\u6709\u70b9\u95ee\u9898\u5427\uff1f\u5982\u679cmasterauth\u4e3a\u7a7a\u4f46requestpass\u4e0d\u4e3a\u7a7a\uff0c\u5728send\u7684\u65f6\u5019\u8fd8\u662f\u9700\u8981\u5148\u7528requestpass\u6765\u8fdb\u884cauth\u7684\n. \u6570\u636e\u843d\u76d8\u3002\u4f60\u8bf4\u7684\u7f13\u5b58\u662f\u6307\uff1f. \u4e0d\u7528\u62c5\u5fc3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5199write_buffer_size\u4e4b\u524d\u4f1a\u5199wal\u65e5\u5fd7\uff0c\u53ea\u8981\u65e5\u5fd7\u6210\u529f\u5c31\u4e0d\u4f1a\u4e22. \u90fd\u6ca1\u6709\u4e25\u683c\u7684\u9650\u5236\uff0c\u4e0d\u8fc7pika\u66f4\u9002\u5408value\u8f83\u5c0f\u7684\u573a\u666f<1M. @Leviathan1995 \u8fd8\u9700\u8981\u6d4b\u8bd5\u4e0b\u548credis GEO\u76f8\u540c\u547d\u4ee4\u4e0d\u540ccase\u4e0b\u8fd4\u56de\u503c\u662f\u5426\u4e00\u6837\uff0c\u4e00\u5b9a\u8981\u548credis\u7528\u6cd5\u53ca\u8fd4\u56de\u7ed3\u679c\u517c\u5bb9\uff0c\u6216\u660e\u786e\u6307\u51fa\u65e0\u6cd5\u505a\u5230100%\u517c\u5bb9\u7684case\uff0c\u5c06\u6765\u65b9\u4fbf\u7528\u6237\u4eceredis GEO\u8fc1\u79fb\u5230pika GEO\u4e4b\u524d\u8fdb\u884c\u8bc4\u4f30. pika\u6709\u884c\u9501\u7684\uff0c\u6709\u7a33\u5b9a\u590d\u73b0\u7684case\u5417\uff1f\u53d1\u4e00\u4e0b\u5427. @boyxp pika\u5185\u90e8\u6709\u884c\u9501\u8fdb\u884c\u4fdd\u8bc1\uff0c\u4e0d\u9700\u8981\u4e0a\u5c42\u518d\u505a\u989d\u5916\u4fdd\u62a4\uff0c\u5982\u679c\u4f60\u90a3\u8fb9\u6709\u590d\u73b0case\u53ef\u4ee5\u63d0\u4f9b\u7ed9\u6211\u4eec\uff0c\u8c22\u8c22. \u8bbe\u7f6e\u4e00\u4e2a\u5927\u70b9\u7684\u503c\uff0c\u6bd4\u59823600 * 24 * 365\u3002\u3002\u3002. \u7528\u5907\u4efd\u7684dump\u76ee\u5f55\u66ff\u6362\u6570\u636e\u76ee\u5f55\uff0c\u91cd\u542f\u670d\u52a1. \u6570\u636e\u91cf\u4e0e\u5185\u5b58\u6bd4\u4f8b\u6ca1\u6709\u4e25\u683c\u8981\u6c42\uff0c\u53ef\u4ee5\u968f\u610f. \u4f1a\u7684\uff0c\u4e0d\u8fc7pika\u4e0d\u4f1a\u5728\u5185\u5b58\u4e2d\u7f13\u5b58\u6570\u636e\uff0c\u6240\u4ee5\u5185\u5b58\u5927\u5c0f\u4ec5\u4ec5\u5f71\u54cd\u64cd\u4f5c\u7cfb\u7edfpagecache\u53carocksdb tablecache\u7684\u7f13\u5b58\u6548\u679c\uff0c\u8fd9\u4fe9\u5f53\u7136\u8d8a\u5927\u8d8a\u597d\uff0c\u4e0d\u8fc7\u5373\u4f7f\u5168\u90e8\u5173\u95ed\u4e5f\u4e0d\u5f71\u54cd\u6b63\u786e\u6027\uff0c\u4ecerocksdb tablecache\u6765\u770b\uff0c\u6211\u4eec\u6d4b\u8bd5\u5f53\u6309\u9ed8\u8ba4\u7f13\u5b585000\u4e2asst\u53e5\u67c4\u65f6\u5927\u6982\u5360\u75286-8G\u5185\u5b58\uff0c\u6240\u4ee5\u6700\u597d\u5927\u4e8e8G. \u6709coredump\u5417\uff1f. \u8d5e\uff01\u7684\u786e\u6709\u8fd9\u4e2a\u95ee\u9898\uff0c\u5df2\u7ecf\u4fee\u590d\u4e86\uff0c\u8c22\u8c22\uff01. Thanks, we will consider solving your problem in a more better way and welcome your suggestions. \u8d5e\ud83d\udc4d. well done. \u8c22\u8c22\u53cd\u9988\uff0c\u5173\u4e8e\u4f9d\u8d56\u5e93\u6211\u4eec\u5728\u4e2d\u6587\u7684README\u4e0a\u6709\u5199\uff0c\u662f\u5305\u542blibgoogle-glog-dev\u7684. thanks. @Leviathan1995 \u8d5e\ud83d\udc4d. \u5e94\u8be5\u662f\u4f60\u7684value\u592a\u5927\u5e76\u4e14\u5199\u5165\u538b\u529b\u4e5f\u4e0d\u5c0f\uff0c\u6240\u4ee5\u9020\u6210\u5f15\u64cecompaction\u4efb\u52a1\u505a\u4e0d\u8fc7\u6765\u5bfc\u81f4stall\u6216stop\uff0c\u4f60\u53ef\u4ee5\u770b\u4e0brocksdb\u7684LOG\u786e\u8ba4\u4e0b. \u597d\u7684\uff0c\u6211\u4eec\u6709\u7a7a\u6253\u4e00\u4e2a\u4f20\u5230release. Thx. \u4e0d\u652f\u6301\u4ecerdb\u5bfc\u5165\u5230pika\uff0c\u76ee\u524d\u53ea\u652f\u6301\u4eceaof\u5230pika. \u6211\u8bb0\u7684\u8fd9\u4e2a\u6709\u5728\u7fa4\u91cc\u8ba8\u8bba\u8fc7\uff0c\u597d\u50cf\u662f\u4f60\u641e\u9519\u4e86\uff0c\u73b0\u5728\u8fd8\u6709\u95ee\u9898\u5417\uff1f. \u5355\u5411\u7684\uff0c\u4e0d\u4f1a\u540c\u6b65\u5230master\uff0c\u4e0d\u8981\u8fd9\u6837\u5b50\u7528\uff0c\u4f1a\u5bfc\u81f4\u4e3b\u4ecebinlog\u4e0d\u4e00\u81f4\u4ece\u800c\u5f15\u53d1\u90e8\u5206\u540c\u6b65\u65f6\u7684\u9519\u8bef. \u5982\u679c\u662f\u5355\u5b9e\u4f8b\u62a5\u8fd9\u4e2a\u65e5\u5fd7\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u4f60\u7684binlog\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65e9\u4e8e\u5927\u4e8e\u4f60\u914d\u7f6e\u7684expire-logs-days\uff0c\u4f46\u603b\u4e2a\u6570\u5c0f\u4e8e10\u4e2a\uff08pika\u9ed8\u8ba4\u6700\u5c0f\u4fdd\u755910\u4e2a\uff09\uff0c\u6240\u4ee5\u62a5\u8fd9\u4e2a\u65e5\u5fd7\uff0c\u6ca1\u4e8b\u7684\uff0c\u7b49\u4f60\u6709\u540e\u7eed\u5199\u5165\u5c31\u4f1a\u9010\u4e2a\u5220\u9664\u8001\u7684\u4e86. you should exec \"info keyspace 1\" to run a background counting job, more details in wiki :-). range\u63a5\u53e3\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n)\uff0c\u4f46\u9274\u4e8e\u8fd9\u4e2a\u662f\u78c1\u76d8\u8bfb\uff0c\u6240\u4ee5\u6574\u4f53range\u8981\u6bd4redis\u6162. \u7684\u786e\uff0c\u6211\u52a0\u4e00\u4e0b\uff0c\u611f\u8c22. 1. wait\u662f\u9700\u8981\u505a\u5168\u540c\u6b65\uff0c\u5e94\u8be5\u662f\u4f60master\u7684\u5199\u5165\u91cf\u592a\u5927\u5e76\u4e14expire-logs-nums\u914d\u7f6e\u592a\u5c0f\uff0c\u5bfc\u81f4\u5168\u540c\u6b65\u4e4b\u540e\u53c8\u51fa\u73b0\u504f\u79fb\u91cf\u627e\u4e0d\u5230\u7684\u60c5\u51b5\uff0c\u8c03\u5927expire-logs-nums\u8bd5\u8bd5\u5427\nwbuf is too large\u662f\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u8bf7\u6c42\uff0c\u4e00\u6b21\u6027\u8bfb\u53d6\u6570\u636e\u8fc7\u591a\uff0c\u5927\u4e8e64M\uff0c\u8d85\u8fc7\u4e0a\u9650\u4e86. dump\u76ee\u5f55\u4e0b\u5c31\u662f\u5168\u540c\u6b65\u53d1\u9001\u7684db\u5feb\u7167\uff0c\u8981\u662f\u5df2\u7ecf\u5168\u540c\u6b65\u7ed3\u675f\u540e\uff0c\u624b\u52a8\u5220\u4e86\u5c31\u884c. \u8fd9\u4e2a\u4f20\u8f93\u901f\u5ea6\u5c31\u662frsync\u7684\u901f\u5ea6\u4e86\uff0cpika\u76ee\u524d\u53ea\u80fd\u505a\u9650\u901f\uff0c\u6ca1\u6cd5\u52a0\u901f. \u5173\u95edpika->\u66f4\u65b0\u4e8c\u8fdb\u5236\u6587\u4ef6\u53ca\u914d\u7f6e\u6587\u4ef6->\u542f\u52a8pika. Applied. Thanks.. \u8bfb\u53d6\u7528\u7684\u4ec0\u4e48\u63a5\u53e3\uff1f\npika\u662f\u4e00\u76f4OPS\u53ea\u670910\u8fd8\u662f\u7a81\u7136\u964d\u523010\uff1f\n\u964d\u523010\u4e4b\u524d\u5bf9pika\u6709\u4ec0\u4e48\u64cd\u4f5c\uff1f\n\u5f53\u65f6\u670d\u52a1\u7aef\u7684\u8d1f\u8f7d\u5982\u4f55\uff1f\n\u7ebf\u4e0a\u5728\u90fd\u4f7f\u7528\u4ec0\u4e48\u63a5\u53e3\uff1f. 2.2.6\u5c06\u4f1a\u652f\u6301pika\u5c06kv\u5bfc\u51fa\u81f3txt\uff0c\u5e76\u4ecetxt\u5bfc\u56de\u81f3pika. It seems that the write2file doesn't match the manifest, touch the write2file231 and try again. \u548c https://github.com/Qihoo360/pika/issues/123 \u91cd\u590d. \u5f00\u53d1\u5b8c\u6210\uff0c\u6d4b\u8bd5\u4e2d.... pika \u6682\u4e0d\u652f\u6301cluster\uff0c\u4f60\u8bf4\u7684\u662f\uff1f. \u4f60\u7528\u7684\u662f\u54ea\u4e2a\u7248\u672c\uff0cpika 2.2.3\u4fee\u590d\u4e86\u4e00\u4e2a\u5185\u5b58\u7684\u95ee\u9898. \u5ba2\u6237\u7aef\u8fde\u63a5\u6570\u6709\u591a\u5c11\u5462\uff1f\u90fd\u662f\u4ec0\u4e48\u8bf7\u6c42\uff1f. pika\u4e00\u4e2a\u8fde\u63a5\u4f7f\u75284M\u7684\u5185\u5b58\uff0c\u800c\u4e14\u4f60\u7528\u7684\u662fmget\u8fd9\u6837\u7684\u8bf7\u6c42\uff0c\u4e5f\u6709\u53ef\u80fd\u628awritebuffer\u6491\u5230\u5927\u4e8e4M\uff0c4M*2000\u5c31\u5dee\u4e0d\u591a8G\u591a\u4e86\uff0crocksdb\u53c8\u5360\u4e865G\u591a\uff0c\u8fd9\u5c31\u5df2\u7ecf\u5f88\u5927\u4e86\uff0c\u4f60\u628a\u8fde\u63a5\u6570\u964d\u4e00\u4e0b\u5427\uff0c\u5185\u5b58\u4e0d\u591f. \u8fde\u63a5\u6570\u964d\u5230300\u4e86\uff0c\uff0c\u5185\u5b58\u5462\u5360\u7528\u591a\u5c11\u5462\uff1f\u6211\u770b\u4f60\u53d1\u7684\uff0c\u8fde\u63a5\u65701065\uff0c\u7b97\u4e0a\u5f15\u64ce\u5360\u7528\u76845g\uff0c\u4e00\u5171\u4f7f\u752814g\u5185\u5b58\u5dee\u4e0d\u591a\u7684\n\ninfo\u91cc\u663e\u793a\u7684\u5185\u5b58\u5360\u7528\u4ec5\u4ec5\u662f\u5f15\u64ce\u7684\u5360\u7528. @yanjie108 \u5982\u679c\u8fde\u63a5\u6570\u964d\u4e0d\u4e0b\u53bb\uff0c\u90a3\u4f60\u53ea\u80fd\u8c03\u5c0fmax-open-files\u914d\u7f6e\u9879\uff0c\u727a\u7272\u6027\u80fd\u6362\u53d6\u4e00\u4e9b\u5185\u5b58\u5427\uff0c\u9ed8\u8ba45000\uff0c\u4f60\u53ef\u4ee5\u8c03\u52301000\u8bd5\u8bd5. \u4f60\u7684\u8fd9\u79cd\u60c5\u51b5\u4e0d\u662f\u5185\u5b58\u6cc4\u6f0f\uff0c\u5c31\u662f\u8fde\u63a5\u6570\u592a\u591a\u5e76\u4e14\u8bf7\u6c42\u7684\u6570\u636e\u8f83\u5927\u5bfc\u81f4\u7684\uff0c\u5982\u679c\u6761\u4ef6\u5141\u8bb8\u7684\u8bdd\uff0c\u4f60\u53ef\u4ee5\u65ad\u5f00\u8fde\u63a5\u89c2\u5bdf\u4e0b\u5185\u5b58\u662f\u5426\u4f1a\u4e0b\u964d\uff0c\u6211\u4eec\u8fd9\u8fb9\u4e5f\u51fa\u73b0\u8fc7\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u4e0d\u8fc7\u673a\u5668\u5185\u5b58160G\uff0c\u6240\u4ee5\u5f71\u54cd\u4e0d\u5927\uff0c\u4e4b\u524dpika\u7ebf\u4e0a\u6709\u8fc7\u5185\u5b58\u5360\u752850G\uff0c\u6211\u4eec\u65ad\u5f00\u6240\u4ee5\u8fde\u63a5\u89c2\u5bdf\uff0c\u5185\u5b58\u8fc5\u901f\u56de\u843d\u81f38G\uff0c\u8fd8\u662f\u63a8\u8350\u4f60\u51cf\u5c11\u8fde\u63a5\u6570\uff0c1000\u591a\u8fde\u63a5\u6302\u5728pika\u4e0a\u5176\u5b9e\u6ca1\u592a\u5927\u610f\u4e49. \u8c22\u8c22\u5173\u6ce8\npika\u6682\u65f6\u4e0d\u8003\u8651\u652f\u6301\u5206\u7247\uff0c\u76ee\u524d360\u5185\u90e8\u8fd8\u662f\u6309\u7167\u539f\u6709redis\u7684\u4f7f\u7528\u65b9\u5f0f\u6765\u7528pika\uff0cclient\u6ca1\u505a\u4efb\u4f55\u4fee\u6539\u3002\u5982\u679c\u4f60\u6709\u5206\u7247\u9700\u6c42\u7684\u8bdd\uff0c\u53ef\u4ee5\u8003\u8651\u5728pika\u4e0a\u9762\u6302codis\uff0cpika\u517c\u5bb9codis. \u540e\u7eed\u6211\u4eec\u52a0\u4e00\u4e0b\u5bf9jemalloc\u7684\u652f\u6301. yes. try to use hscan instead of hgetall. Try v2.2.3, we have fixed some bug which could cause memory leak\nhttps://github.com/Qihoo360/pika/wiki/Pika-ChangeLog. \u611f\u8c22\u53cd\u9988\uff0c\u6211\u4eec\u8fd9\u8fb9\u770b\u4e00\u4e0b. it looks like that nemo-rocksdb is not compatible with rocksdb, which release version of rocksdb do you use?. \u5df2\u89e3\u51b3. 2.2.6\u7684\u8fde\u63a5\u5185\u5b58\u52a8\u6001\u7533\u8bf7\u91ca\u653e\uff0c\u4e0d\u518d\u9700\u8981\u663e\u793a. pika\u4e0d\u652f\u6301multi. pika\u5bf9\u4e0d\u652f\u6301\u7684\u547d\u4ee4\u62a5\u9519\uff0c\u5e94\u8be5\u662f\u88ab\u5ba2\u6237\u7aef\u5ffd\u7565\u4e86. multi\u548cexec\u4e4b\u95f4\u7684\u547d\u4ee4\uff0cpika\u4f1a\u6b63\u786e\u6267\u884c\uff0c\u4e0d\u8fc7\u6b64\u65f6\u4e0d\u4fdd\u8bc1\u539f\u5b50\uff0c\u5c31\u548c\u666e\u901a\u8bf7\u6c42\u4e00\u6837. scan\u3001keys\u8fd9\u79cd\u7528\u6237\u63a5\u53e3\u6211\u4eec\u8fd8\u662f\u5c3d\u53ef\u80fdredis\u4fdd\u6301\u4e00\u81f4. v2.2.6\u5c06\u4f1a\u652f\u6301keys\u63a5\u53e3\u53ea\u8f93\u51fa\u6307\u5b9a\u7c7b\u578b\uff0cscan\u63a5\u53e3\u4e0d\u5b9e\u73b0\u8be5\u529f\u80fd. \u8bf7\u7ed9\u51fa\u8be6\u7ec6\u590d\u73b0\u6b65\u9aa4\uff0c\u6211\u8fd9\u8fb9\u6d4b\u8bd5\u6ca1\u6709\u95ee\u9898. 1. hgetall\uff1a\u8fd9\u4e2a\u5e94\u8be5\u6ca1\u95ee\u9898\uff0c\u53ef\u80fd\u662f\u4f60\u4eec\u540e\u6765\u6709\u91cd\u65b0\u5199\u8fc7\u6216\u8005persist\u8fc7\u8fd9\u4e2akey\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bfb\u51fa\u6765\n2. ttl\uff1a\u8fd4\u56de-2\u662f\u4e00\u4e2abug\uff0c\u5df2\u7ecf\u57282.2.2\u4fee\u590d\u4e86. \u90fdDel\u6389\u4e86\u8fd8\u80fdhgetall\u51fa\u6765\uff1f\u76ee\u524d\u4ece\u6765\u6211\u4eec\u7ebf\u4e0a\u4ece\u672a\u9047\u5230\u8fd9\u6837\u7684\u60c5\u51b5\u4e5f\u672a\u6536\u5230\u5916\u90e8\u7c7b\u4f3c\u7684\u53cd\u9988\uff0c\u8bf7\u5148\u6392\u9664\u4e0b\u662f\u4e0d\u662f\u6d4b\u8bd5\u65b9\u6cd5\u6709\u95ee\u9898\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u80fd\u63d0\u4f9b\u4e0b\u590d\u73b0\u65b9\u6cd5\u5417\uff1f. \u8fd9\u4e2a\u662f\u6162\u65e5\u5fd7\uff0cpika\u6682\u65f6\u4f7f\u7528error level\u4e13\u95e8\u6253\u5370\u6162\u65e5\u5fd7. \u6307\u4ee4\u96c6\u4e0d\u517c\u5bb9\uff0c\u63a8\u8350\u4f60\u6839\u636eREADME\u81ea\u5df1\u7f16\u8bd1\u4e00\u4e0b\u6700\u65b0\u7248\u6765\u4f7f\u7528. \u4f7f\u7528git clone\u83b7\u53d6\u6e90\u4ee3\u7801\uff0c\u56e0\u4e3a\u662fsubmodule\u7684\u5f62\u5f0f\u4f9d\u8d56\u5176\u4ed6\u5e93\uff0c\u6240\u4ee5third\u4e0b\u5176\u4ed6\u4f9d\u8d56\u9700\u8981\u6267\u884csubmodule\u76f8\u5173\u547d\u4ee4\u83b7\u53d6\uff0c\u5177\u4f53\u7f16\u8bd1\u65b9\u6cd5\u53c2\u8003\uff1ahttps://github.com/Qihoo360/pika/blob/master/README_CN.md. \u6211\u4eec\u8fd1\u671f\u4f1a\u4fee\u6539\u8fd9\u91cc\uff0c\u8ba9\u7f16\u8bd1\u66f4\u7b80\u5355\u4e00\u4e9b\uff0c\u611f\u8c22\u53cd\u9988. @yanbingwei86 \u6211\u5df2\u7ecf\u66f4\u65b0\u4e86pika\u7f16\u8bd1\uff0c\u73b0\u5728\u53ea\u9700clone\u4e0b\u6765\u6700\u65b0\u7684\u4ee3\u7801\u5e93\u5e76\u4e14\u76f4\u63a5make\u5c31\u53ef\u4ee5\u4e86\uff0c\u4f60\u53ef\u4ee5\u7528master\u6700\u65b0\u63d0\u4ea4\u5c1d\u8bd5\u4e0b\uff0c\u6709\u4ec0\u4e48\u95ee\u9898\u518d\u53cd\u9988\n\u5177\u4f53\u53ef\u53c2\u8003\nhttps://github.com/Qihoo360/pika/blob/master/README_CN.md. Applied, thanks. @gaodq @baotiao \u4e00\u8d77\u6765review\u4e00\u4e0b. \u6211\u770b\u4f60\u7528\u7684\u662f\u957f\u8fde\u63a5+HGETALL\uff0c\u5982\u679c\u8bf7\u6c42\u7684\u6570\u636e\u7ed3\u679c\u7279\u522b\u5927\u7684\u8bdd\uff0c\u6709\u53ef\u80fd\u4f1a\u5bfc\u81f4client\u7684buffer\u5360\u7528\u8f83\u5927\uff0c\u6700\u591a\u4e00\u4e2aclient\u5360\u7528128M\u3002\n\u4f60\u8fd9\u6837\u6d4b\u8bd5\u4e00\u4e0b\uff1a\n  1. \u7f16\u8bd1\u73af\u5883\u5b89\u88c5tcmalloc\uff0c\u7f16\u8bd1\u4e00\u4e2atcmalloc\u7684pika\n  2. \u7ebf\u4e0a\u8fd0\u884cpika\u5230\u5185\u5b58\u5360\u752850G+\u7684\u65f6\u5019\uff0c\u4e3b\u52a8\u65ad\u5f00\u6216\u5173\u95ed\u6240\u6709\u5ba2\u6237\u7aef\n  3. \u7528redis-cli\u8fde\u4e0apika\uff0c\u6267\u884ctcmalloc free\n\u7136\u540e\u89c2\u5bdf\u5185\u5b58\u662f\u5426\u6709\u56de\u843d\uff0c\u6211\u4eec\u7ebf\u4e0a\u4e5f\u9047\u89c1\u8fc7\u5185\u5b58\u5360\u7528\u8fc7\u5927\u7684\u95ee\u9898\uff0c\u540e\u6765\u7528\u6b64\u65b9\u6cd5\u8bc1\u660e\u662f\u5ba2\u6237\u7aef\u7684\u6b63\u5e38\u5360\u7528\uff0c\u5982\u679c\u771f\u662f\u8fd9\u6837\uff0c\u5c31\u8003\u8651\u51cf\u5c11\u8fde\u63a5\u6570\u6765\u964d\u4f4e\u5185\u5b58\u5360\u7528. \u55ef\u55ef\uff0c\u8fd9\u79cd\u60c5\u51b5\u53ea\u80fd\u5728\u8fde\u63a5\u6570\u548c\u5185\u5b58\u4e4b\u95f4\u53d6\u4e2a\u5e73\u8861\u4e86\u3002\u518d\u4e0d\u884c\u5c31\u662f\u7528\u9650\u5236\u8fde\u63a5\u6570+\u77ed\u8fde\u63a5\u7684\u65b9\u5f0f\u8bd5\u8bd5\uff0c\u5e94\u8be5\u4f1a\u6bd4\u957f\u8fde\u63a5\u597d\u4e00\u4e9b. \u591a\u8c22\u53cd\u9988\uff0c\u8fd9\u4e2a\u6211\u4eec\u5728\u505a\u4e4b\u524d\u5df2\u7ecf\u8003\u8651\u8fc7\u4e86\uff0c\u73b0\u5728\u5b58\u5165\u5f15\u64ce\u7684\u65f6\u95f4\u6233\u662f32\u4f4d\uff0c\u8981\u652f\u6301\u66f4\u5927\u7684\u8fc7\u671f\u65f6\u95f4\u53ea\u9700\u8981\u752864\u4f4d\u5373\u53ef\uff0c\u4e0d\u8fc7\u76f8\u6bd4\u4e8e\u672a\u96e8\u7ef8\u7f2a\u89e3\u51b3\u51e0\u5341\u5e74\u540e\u8fc7\u671f\u4e0d\u53ef\u7528\u7684\u95ee\u9898\uff0c\u6211\u4eec\u76ee\u524d\u66f4\u5e0c\u671bdb\u5927\u5c0f\u5c3d\u53ef\u80fd\u7684\u5c0f\uff0c\u6240\u4ee5\u6682\u65f6\u5c31\u514832\u4f4d\u5427. yum install glog-devel\nhttps://github.com/Qihoo360/pika/blob/master/README_CN.md. v2.2.6\u5df2\u7ecf\u5b9e\u73b0write buffer\u7684\u81ea\u52a8\u7533\u8bf7\u53ca\u91ca\u653e. 1. list\u7684\u4fee\u6539\u4e00\u822c\u90fd\u4f1a\u5c06\u5bf9\u5f15\u64ce\u7684\u591a\u6b21\u5199\u5165\u64cd\u4f5c\u5408\u5e76\u5728\u4e00\u4e2abatch\u91cc\u6765\u4fdd\u8bc1\u539f\u5b50\u6027\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5f71\u54cd\u5230\u8bfb\u53d6\u7684\u6b63\u786e\u6027\n2. mset\u8fd9\u79cdkv\u7684\u64cd\u4f5c\uff0c\u5176\u5b9e\u90fd\u4e0d\u9700\u8981\u52a0\u9501\u4fdd\u62a4\u7684\uff0c\u5e95\u4e0b\u4e5f\u662f\u901a\u8fc7batch\u6765\u4fdd\u8bc1\u539f\u5b50\u6027\u7684. 1. \u770b\u4e86\u4e0b\u4ee3\u7801\uff0clist\u8bfb\u53d6\u63a5\u53e3\u4e2d\u7684\u591a\u6b21get\u64cd\u4f5c\u4e4b\u95f4\u7684\u786e\u4f1a\u56e0\u4e3a\u4e00\u4e2abatch\u5199\u800c\u4e0d\u4e00\u81f4\uff0c\u8fd9\u91cc\u53ef\u4ee5\u6539\u6210\u8bfb\u53d6\u63a5\u53e3\u90fd\u662f\u57fa\u4e8esnapshot\u6765\u505a\uff0c\u8fd9\u6837\u5728\u4fdd\u8bc1\u4e00\u81f4\u7684\u540c\u65f6\u6027\u80fd\u4e5f\u4f1a\u6bd4\u8bfb\u5199\u76f8\u4e92\u62a2\u9501\u7684\u6027\u80fd\u8981\u9ad8\u4e00\u4e9b\n2. \u55ef\u662f\u7684\uff0cnemo\u91cc\u7684\u884c\u9501\u4e3b\u8981\u5c31\u662f\u4e3a\u4e86\u4fdd\u62a4\u5199db\u548cbinlog\u7684\u539f\u5b50\u6027\uff0c\u5f53\u65f6\u8003\u8651\u8fc7\u5bf9\u4e8ekv\u63a5\u53e3\u7684\u591akeys\u5199\u5165\u64cd\u4f5c\u8be5\u5982\u4f55\u52a0\u9501\uff0c\u540e\u6765\u6211\u4eec\u6743\u8861\u5f53\u65f6\u5f00\u53d1\u6210\u672c\u548c\u7ebf\u4e0a\u9700\u8981\uff0c\u5c31\u7edf\u4e00\u6309\u7167\u53ea\u5bf9\u7b2c\u4e00\u4e2akey\u52a0\u9501\n\u76ee\u524dpika\u7528\u7684nemo\u5e93\u5df2\u7ecf\u5f88\u8001\u4e86\uff0c\u5f88\u591a\u8bbe\u8ba1\u548c\u5b9e\u73b0\u90fd\u4e0d\u662f\u5f88\u4f18\uff0c\u5f00\u53d1\u5b8c\u53cc\u4e3b\u548cpika_hub\u4e4b\u540e\uff0c\u6211\u4eec\u540e\u91cd\u5934\u8bbe\u8ba1\u5b9e\u73b0nemo\uff0c\u5230\u65f6\u5019\u518d\u4e00\u8d77\u89e3\u51b3\u4f60\u53cd\u9988\u7684\u8fd9\u4e2a\u95ee\u9898\uff0c\u76ee\u524d\u5c31\u5148\u7ef4\u6301\u73b0\u72b6\u5427\uff0canyway\uff0c\u611f\u8c22\u53cd\u9988:-). @jianqingdu \u8d5e\ud83d\udc4d\uff0cpika\u4e4b\u6240\u4ee5\u4f9d\u8d56\u8fd9\u4e48\u591a\u5e93\uff08pink\uff0cnemo\uff0cslash\uff0cnemo-rocksdb\uff09\u662f\u56e0\u4e3a\u8fd9\u4e9b\u5e93\u662f\u5728\u6211\u4eec\u5e73\u65f6\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u6574\u7406\u603b\u7ed3\u51fa\u6765\u7684\uff0c\u6211\u4eec\u5f88\u591a\u5176\u4ed6\u7684\u9879\u76ee\u4e5f\u5728\u7528\u3002\u53ef\u8bfb\u6027\u80af\u5b9a\u6ca1\u6709\u5168\u90e8\u5199\u5728pika\u4e2d\u597d\uff0c\u4e0d\u8fc7\u4e3a\u4e86\u590d\u7528\uff0c\u8fd9\u53ea\u80fd\u8fd9\u6837\u3002\n\u4f60\u7684kedis\u6211\u7b80\u5355\u626b\u4e86\u4e0b\uff0c\u5b9e\u73b0\u7684\u5f88\u68d2\uff0c\u4e0d\u8fc7expire\u91c7\u7528\u548credis\u4e00\u6837\u7684\u5b9e\u73b0\uff0c\u901a\u8fc7\u7ebf\u7a0b\u53bb\u4e0d\u65ad\u626b\u518d\u5220\u9664\u4f1a\u52a0\u5267\u5f15\u64ce\u7684\u5199\u653e\u5927\u95ee\u9898\u3002\u53e6\u5916\u60f3\u95ee\u4e0b\u4f60\u591a\u6570\u636e\u7ed3\u6784\u7684\u5220\u9664\u548c\u8fc7\u671f\u662f\u600e\u4e48\u505a\u7684\u5462\uff1f\n\u8fd1\u671f\u6211\u4eec\u5728\u8003\u8651\u91cd\u6784\u6211\u4eec\u7684\u591a\u6570\u636e\u7ed3\u6784\u5e93nemo\uff0c\u89e3\u51b3\u5df2\u77e5\u7684\u95ee\u9898\u5e76\u4f18\u5316\u6027\u80fd\n\u6b22\u8fce\u4ea4\u6d41. pika\u53ea\u7528rsync\u6765\u505a\u5168\u540c\u6b65\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\u7684\u540c\u6b65\u662f\u901a\u8fc7\u626b\u63cfbinlog\u6765\u8fdb\u884c\u5b9e\u65f6\u540c\u6b65\u7684\uff0c\u4f60\u7684\u662f\u4ec0\u4e48\u76d8\uff0c\u987a\u5e8f\u8bfbbinlog\u5e94\u8be5\u4e0d\u4f1a\u6709\u8fd9\u4e48\u5927\u7684\u6027\u80fd\u5f00\u9500. \u8fd9\u4e2a\u95ee\u9898\u57282.2.6\u4e4b\u524d\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u53d1\u5e032.2.6\u4e4b\u524dmerge\u4e86\u4e00\u4e2anemo\u5e93\u7684pr\uff0cbug\u5728\u90a3\u91cc\uff0c\u73b0\u5728\u5df2\u7ecf\u4fee\u590d\u4e86\uff0c2.2.6\u5df2\u7ecf\u6ca1\u6709\u95ee\u9898\u4e86\uff0c\u611f\u8c22\u53cd\u9988. \u65b0\u7684\u63a5\u53e3\u6211\u4eec\u4f1a\u6392\u671f\u9646\u7eed\u652f\u6301. \u662f\u7684\uff0c\u5982\u679cmanifest\u548cbinlog\u5b9e\u9645\u4fe1\u606f\u4e0d\u4e00\u81f4\uff0c\u4f1acrash\uff0c\u51fa\u73b0\u6982\u7387\u5f88\u4f4e\uff0c\u540e\u7eed\u6211\u4eec\u4fee\u590d\u4e0b. \u591adb\u652f\u6301. \u653e\u5f00\u591a\u6570\u636e\u7ed3\u6784key\u957f\u5ea6\u9650\u5236. \u611f\u8c22\u53cd\u9988\n\u662f\u7684\uff0c\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\n\u4e0d\u8fc7pika\u548credis\u4e00\u6837\u4e0d\u4fdd\u8bc1\u4e3b\u4ece\u540c\u6b65\u4e25\u683c\u7684\u4e00\u81f4\u6027\uff08redis\u9ed8\u8ba4\u4e5f\u4e0d\u4f1a\u68c0\u67e5\u6bcf\u4e00\u6761\u547d\u4ee4\u662f\u5426\u540c\u6b65\u6210\u529f\uff09. \u611f\u8c22\u53cd\u9988\u3002\nSORT\u547d\u4ee4\u8986\u76d6string\u53ca\u591a\u79cd\u6570\u636e\u683c\u5f0f\uff0c\u76ee\u524dpika\u7684\u591a\u6570\u636e\u683c\u5f0f\u57fa\u7840\u4e0a\u652f\u6301SORT\u6bd4\u8f83\u9ebb\u70e6\uff0c\u6682\u65f6\u4e0d\u6253\u7b97\u652f\u6301\u4e86\u3002\n\u4e0d\u8fc7\u6211\u4eec\u4e0b\u4e00\u6b65\u8ba1\u5212\u662f\u91cd\u6784pika\u7684\u591a\u6570\u636e\u7ed3\u6784\u5b9e\u73b0\uff0c\u5230\u65f6\u5019\u4f1a\u5c06SORT\u9700\u6c42\u5728\u8bbe\u8ba1\u65f6\u8003\u8651\u5176\u4e2d\u7684\u3002. \u611f\u8c22\u53cd\u9988\uff1a\n1. \u5173\u4e8eslaveof no one\u4e4b\u540e\uff0cslave\u4e0a\u7684\u6570\u636e\u4f1a\u53d8\u6ca1\u7684\u73b0\u8c61\uff0c\u6211\u731c\u6d4b\u5e94\u8be5\u662f\u6570\u636e\u672c\u8eab\u6709\u8fc7\u671f\u5c5e\u6027\uff0c\u56e0\u4e3aslaveof no one\u5e76\u4e0d\u4f1a\u5bf9db\u505a\u4efb\u4f55\u64cd\u4f5c\u3002\n2. \u5173\u4e8eslave binlog\u504f\u79fb\u5927\u4e8emaster\u7684\u73b0\u8c61\uff0c\u662f\u56e0\u4e3a2.3.0\u7684binlog\u4e2d\u6211\u4eec\u5b58\u4e86\u66f4\u591a\u7684\u4fe1\u606f\u7528\u6765\u652f\u6301\u53cc\u4e3b\u53ca\u8de8\u673a\u623f\u540c\u6b65\uff0c\u6240\u4ee5\u53ea\u80fd\u548c2.3.0\u505a\u4e3b\u4ece\n3. \u5168\u540c\u6b65\u4e4b\u540e\u4e0d\u80fd\u589e\u91cf\u540c\u6b65\u7684\u73b0\u8c61\uff0c\u5e94\u8be5\u662f\u4f60\u914d\u7f6e\u7684\u4fdd\u7559binlog\u4e2a\u6570\u592a\u5c11\uff0c\u800c\u5168\u540c\u6b65\u6267\u884c\u4e4b\u95f4\u8f83\u957f\uff0c\u5bfc\u81f4\u5168\u540c\u6b65\u4e4b\u540e\u5bf9\u5e94\u7684\u540c\u6b65\u70b9\u53c8\u627e\u4e0d\u5230\u4e86\uff0c\u8c03\u5927\u8bd5\u8bd5. @fancy-rabbit \u76ee\u524d\u53ea\u80fd\u901a\u8fc7\uff1a1. \u65ad\u5f00\u4e3b\u4ece\uff1b2. \u5347\u4e3b\uff1b3. \u5347\u4ece\uff1b4. \u91cd\u65b0\u5efa\u7acb\u4e3b\u4ece\u6765\u505a\u5347\u7ea7\uff1b\n@Leviathan1995 \u770b\u4e0b\u8fd9\u91cc\u5982\u4f55\u5e73\u6ed1\uff0c\u6211\u5728\u60f3\u662f\u4e0d\u662f\u53ef\u4ee5\u4e3b\u4ece\u540c\u6b65\u505a\u6210\u4e0d\u4f9d\u8d56slave\u672c\u5730\u6587\u4ef6\u504f\u79fb\uff0c\u800c\u662fmaster\u6bcf\u6761\u547d\u4ee4\u90fd\u9644\u5e26\u8fd9\u6761\u547d\u4ee4\u5728master\u7684binlog\u504f\u79fb\uff0cslave\u53ea\u9700\u8981\u4e0d\u65ad\u66f4\u65b0\u8bb0\u5f55\u8fd9\u4e2a\u503c\u5c31\u597d\uff0c\u5982\u679c\u53d1\u751f\u95ea\u65ad\u9700\u8981\u7eed\u4f20\uff0c\u76f4\u63a5\u7528\u5f53\u524d\u8bb0\u5f55\u7684\u6700\u65b0\u7684\u504f\u79fb\u6765\u5411master\u8bf7\u6c42\u7eed\u4f20\uff1f\u8fd9\u6837\u662f\u4e0d\u662f\u66f4\u597d\u4e00\u70b9\uff1f. \u8fd8\u5f97\u8c03\u6574\u4e00\u4e0brlimit RLIMIT_NOFILE\uff0c\u53c2\u8003\u4e00\u4e0bpika \u521d\u59cb\u5316\u548credis config set\u7684\u5b9e\u73b0. Hi @topilski, Pika uses the redis protocol and compatible with most of redis commands,  you can use hiredis to access to pika directly . Here is the Support commands. \no -> completely compatible with redis\n\uff01-> partially compatible with redis\n\u00d7 -> not support\nwe don't have our own pika client, pika users always use redis-client directly.\nIt would be great if pika could be integrate into FastoNoSQL :-). pika support master-slaves mode like redis do(full and partitial sync), and support sentinels. Have no logo and use rocksdb as its backend storage engine. @topilski pika support TTL like redis\nmaybe you can run a pika on your server and use redis-cli access to it, have a try :-). @utopiazh pika support 'compact' command to trigger Manual Compaction in rocksdb\uff0chave a try :-). \u8d5e\uff0c\u611f\u8c22\u53cd\u9988\u3002\n@Axlgrep \u786e\u8ba4\u4e0b\u662f\u5426\u5b58\u5728\u95ee\u9898\u3002\n@prcyangli \u80fd\u5426\u518d\u6539\u4e00\u4e0bpika_client_conn.cc\u4e2d\u4f60\u4fee\u6539\u7684\u90a3\u90e8\u5206\u7684\u7f29\u8fdb. @Leviathan1995 @Axlgrep review\u4e00\u4e0b. @xtudouh \u4f60\u53ef\u4ee5\u6267\u884cbgsave\u6253\u4e00\u4e2adb\u5feb\u7167\uff0c\u7136\u540e\u7528pika_to_redis\u8fc1\u79fb\u8fd9\u4e2adb\u5feb\u7167\u5c31\u884c\u4e86\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528\u505c\u670d\u52a1\u4e86\uff0c\u4e0d\u8fc7\u8fd8\u662f\u9700\u8981\u505c\u5199. \u8fd9\u91cc\u8c8c\u4f3c\u53ef\u4ee5\u4e0d\u9700\u8981extern\uff1f\uff1f\uff1f. bug???. \u4e0d\u8981\u76f4\u63a5\u505a\u5185\u5b58\u62f7\u8d1d\uff0c\u4f7f\u7528\u5bf9\u5e94\u7684decode\u51fd\u6570. \u5e94\u8be5\u5199\u89e3\u6790\u5230\u7684server_id. @gaodq \u8fd9\u91cc\u4e3a\u4ec0\u4e48\u8981\u5199\u81ea\u5df1\u7684server_id\uff0c\u800c\u4e0d\u662fmaster\u7684server_id. @gaodq \u8fd9\u91cc\u4e3a\u4ec0\u4e48\u8981\u5220\u9664\u540e4\u4e2afields. \u5220\u6389. \u53ef\u80fd\u548c\u6b63\u5e38Gensid\u51b2\u7a81. bug???. \u8fd9\u91cc\u6b63\u5e38\u4e3b\u4ece\u60c5\u51b5\u4e0b\u4e5f\u4e0d\u8fdb\u5165syncerror\u72b6\u6001\u4e86\uff0c\u73b0\u5728\u5df2\u7ecf\u6539\u6210\u65e0\u9650\u91cd\u8bd5\u4e86. \u8fd9\u91cc\u8981\u60f3\u529e\u6cd5\u6807\u8bb0\u51fa\u6765\u53cc\u4e3b\u5931\u8d25\u7684\u72b6\u6001. \u5927\u5c0f\u5199. all. atomic???. \u7b80\u5316\uff0c\u4e25\u683c. else \uff1f. \u53bb\u6389\uff1f. \u4e3a\u4ec0\u4e48\u53bb\u6389\u8fd9\u4e2a\uff1f. \u8fd9\u6b65\u662f\u4e0d\u662f\u6ca1\u5fc5\u8981\uff1f203\u884c\u5df2\u7ecf\u77e5\u9053filenum\u548coffset\u4e86. \u8fd9\u4e2a\u5730\u65b9\u83b7\u53d6\u7684\u504f\u79fb\u4e0d\u80fd\u4fdd\u8bc1\u662f\u53d1\u9001\u7ed9\u5bf9\u7aef\u5feb\u7167\u5bf9\u5e94\u7684\u504f\u79fb\u5427\uff1f. \u5728\u7ea7\u8054\u4e3b\u4ece\u7684\u60c5\u51b5\u4e0b\uff0cA<-B<-C\uff0cB\u4f1a\u5373\u662f\u4e3b\u4e5f\u662f\u4ece\uff0c\u9700\u8981\u6709\u8fd9\u4e2a\u72b6\u6001\uff0c\u4e0d\u80fd\u53bb\u6389. \u7528is_pubsub()?. set_is_pubsub()?. \u4e3a\u5565\u6709\u4e2a\u7a7a\u683c\uff1f. pink\u91cc\u4e0d\u662f\u6709\u8fd9\u4e2a\u51fd\u6570\u4e86\u5417\uff1f. \u8981\u4e48\u5c31\u53bb\u6389pink\u91cc\u7684ConstructPubSubResp\uff0c\u90fd\u4ea4\u7ed9pika\u6765\u6784\u9020\uff0c\u6309\u7406\u8bf4pink\u7684pubsub\u4e0d\u5e94\u8be5\u6709\u534f\u8bae\u76f8\u5173\u7684\u4e1c\u897f. \u8fd9\u91cc\u4e0d\u5bf9\u5427\uff0c\u8981\u662f\u4e00\u4e2a\u975e\u6cd5\u8fde\u63a5\u8fde\u8fdb\u6765\uff0c\u4e5fPlus\uff1f\u90a3\u4e0d\u662f\u6709\u95ee\u9898\u4e86. \u6267\u884cPLUS\u4f1a\u628astatus\u53d8\u6210CONNECTED\u5427. ",
    "elfring": "Thanks for your small source code improvement.\n. I suggest to care a bit more about exception safety in C++ classes where several objects are dynamically created.\nWould you like to reconsider the usefulness of smart pointers once more?\n. Thanks for your improvement of affected include guards.\n. I suggest to avoid ignorance of return values a bit more. Would you like to detect every error situation as early as possible?\nHow do you think about to improve static source code analysis also for your software?\n. - Does a tool like \"autoscan\" show any software dependencies that you find worth for further considerations?\n- How do you think about to support more development environments by the reuse of build system generators?\n. ",
    "tigerzhang": "cmake +1\n. @hea \u5199\u5165\u901f\u5ea6\u4f9d\u8d56\u4e8e\u78c1\u76d8\u7684 IOPS\u3001rocksdb \u7684 compact \u9891\u7387\u3002\u8ddf\u78c1\u76d8\u7528\u91cf\u5173\u7cfb\u4e0d\u5927\u3002. ",
    "cx3ptr": "build system like QConf\uff0c +1\n. 1.Yes\n2.One client connection belongs to special work thread, work thread handle request sequentially. \u8fd9\u4e2apika\u6709\u4ece\u5b9e\u4f8b\u5417?\u5982\u679c\u6709\u4ece\u5b9e\u4f8b\uff0c\u53ef\u4ee5\u901a\u8fc7'info Log'\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u6587\u4ef6\u504f\u79fb\uff0c\u6709\u53ef\u80fd\u8fd9\u4e2abinlog\u6b63\u88ab\u67d0\u4e2a\u4ece\u5b9e\u4f8b\u4f7f\u7528\u3002. No,pika doesn't support lua script and transaction. ",
    "Leviathan1995": "59 Pika already support for GEO.. @CatKang \u6211\u8ba1\u5212\u5c06\u7b2c5\u4f4d\u5206\u914d\u7ed9\u547d\u4ee4\u7c7b\u578b, \u76ee\u524d\u5176\u5b83\u5c5e\u6027\u67094\u4e2a, \u5373\u5b58\u653e\u572832,64,128,255. \u6dfb\u52a0\u547d\u4ee4GEORADIUS, GEORADIUSBYMEMBER.\n\u7b80\u5355\u7684\u6d4b\u8bd5\u7528\u4f8b:\n127.0.0.1:9221> GEOADD Sicily 13.361389 38.115556 \"Palermo\" 15.087269 37.502669 \"Catania\"\n(integer) 2\n127.0.0.1:9221> GEORADIUS Sicily 15 37 200 km WITHDIST WITHCOORD WITHHASH asc\n1) 1) \"Catania\"\n   2) \"56.465174352955216\"\n   3) 1) \"15.087661743164062\"\n      2) \"37.502842051731029\"\n   4) \"53092153485\"\n2) 1) \"Palermo\"\n   2) \"190.42765439947635\"\n   3) 1) \"13.361434936523438\"\n      2) \"38.115392905981523\"\n   4) \"53086852359\"\n127.0.0.1:9221> GEORADIUS Sicily 15 37 200 km WITHDIST WITHCOORD WITHHASH count 1\n1) 1) \"Catania\"\n   2) \"56.465174352955216\"\n   3) 1) \"15.087661743164062\"\n      2) \"37.502842051731029\"\n   4) \"53092153485\"\n127.0.0.1:9221> GEOADD Sicily 13.583333 37.316667 \"Agrigento\"\n(integer) 1\n127.0.0.1:9221> GEORADIUSBYMEMBER Sicily Agrigento 100 km\n1) \"Agrigento\"\n2) \"Palermo\"\n127.0.0.1:9221> GEORADIUS Sicily 15 37 10 km\n(empty list or set). @KernelMaker \u6211\u73b0\u5728\u4eba\u5de5\u6d4b\u8bd5\u4e86\u4e00\u904d\uff0c\u4e0eredis\u534f\u8bae\u517c\u5bb9\uff0c\u662f\u5426\u6709\u66f4\u5408\u7406\u7684\u6d4b\u8bd5\u65b9\u6cd5\uff1f. georadius\u7f3a\u5c11\u4e00\u4e2aoptionstore \u548c storedist \u9020\u6210\u4e86bug.\n\u76ee\u524d\u8dd1\u6d4b\u8bd5\u53ef\u4ee5\u6b63\u5e38\u7684\u7ed3\u675f,\u4f46\u662f\u6709\u4e9b\u6d4b\u8bd5\u7528\u4f8b\u65e0\u6cd5\u901a\u8fc7,\u539f\u56e0\u6709\u7684\u662f\u56e0\u4e3a\u7cbe\u5ea6\u95ee\u9898 \u6709\u7684\u662f\u56e0\u4e3apika\u672c\u8eab\u7684\u63a5\u53e3\u95ee\u9898. @CatKang  @KernelMaker  please review it, thanks.. @jojo59516 pikatests\u662f\u53ef\u7528\u7684, \u56e0\u4e3a\u591a\u4e86\u4e00\u7ea7\u76ee\u5f55, \u4f60\u53ef\u4ee5\u6309\u7167redis\u7684\u6d4b\u8bd5\u65b9\u6cd5\u5c06pikatests\u4e0btests\u6587\u4ef6\u5939\u79fb\u52a8\u5230pika\u7684\u6839\u76ee\u5f55\u4e0b,\u7136\u540e\u53d6\u6d88server.tcl\u7b2c221\u884c\u4ee3\u7801\u7684\u6ce8\u91ca, \u542f\u52a8\u65b9\u5f0f\u4fee\u6539\u4e3a-c\u7684.. #131 . done.. #133 . Done. #127 . #137 Done. done. @KernelMaker \u4fee\u6539\u65e5\u5fd7\u7b49\u7ea7\uff0c\u5373Redis\u9700\u8981\u9a8c\u8bc1\u65f6\u5982\u679c\u672a\u8f93\u5165\u5bc6\u7801\u6216\u5bc6\u7801\u8f93\u5165\u9519\u8bef\uff0c\u7a0b\u5e8f\u5c06\u4f1a\u62a5\u8b66\u544a\u65e5\u5fd7\u4e14sender\u7ebf\u7a0b\u4f1a\u9000\u51fa.. Done.. @batcom  \u80fd\u8d34\u4e0b\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u5417\uff1f. @batcom \u80fd\u4e0d\u80fd\u8bb2\u4e00\u4e0b\u4f60\u7684\u4f7f\u7528\u65b9\u6cd5\uff1f. #164 . @yanbingwei86 \u4f9d\u8d56\u7684\u5305\u76f4\u63a5git submodule init, \u7136\u540egit submodule update, \u4e0d\u7528\u624b\u52a8\u53bb\u4e0b\u8f7d\u3002. @yanbingwei86 \u4f60\u624b\u52a8\u4e0b\u8f7d\u7684\u4f9d\u8d56\u5e93\u6709\u53ef\u80fdpika\u8fd8\u4e0d\u517c\u5bb9\uff0c\u6240\u4ee5\u5efa\u8bae\u4f60\u8fd8\u662f\u7528git submodule.. \u4f9d\u8d56\u5e93\u6709\u7684\u8fd8\u4f1a\u518d\u6b21\u4f9d\u8d56\u522b\u7684\u5e93\uff0c\u4f60\u8fdb\u4f9d\u8d56\u5e93\u91cc\u518d\u6b21git submodule . \u4f60\u8fdbthird\u76ee\u5f55\u4e0b\u7684\u4f9d\u8d56\u5e93\u770b\u770b\u662f\u5426\u6709.gitmodules \u6709\u7684\u5c31\u9700\u8981\u518d\u6b21git submodule. @xtudouh \u4f60\u7528\u7684\u662f\u6700\u65b0\u7248\u672c\u5417  \u6211\u9a8c\u8bc1\u4e00\u4e0b. @xtudouh \u662f\u7684\uff0c\u76ee\u524dtimestamp\u662f32\u4f4d\u7c7b\u578b. 32\u4f4d\u7684\u65f6\u95f4\u6233\u662f\u80fd\u8868\u793a\u52302038\u5e74\u7684\uff0c\u4e0d\u77e5\u9053\u4f60\u4eec\u4e3a\u4ec0\u4e48\u9700\u8981\u628a\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u90a3\u4e48\u4e45\uff1f. @xtudouh \u6211\u4eec\u5e95\u5c42\u7684\u5b58\u50a8\u7528\u7684\u662frocksdb, rocksdb \u652f\u6301\u7684ttl\u76ee\u524d\u662f32\u4f4d\u3002. ok. @chenyingjie2012  \u5e94\u8be5\u662f\u6267\u884c\u4e86pika\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u7684redis\u547d\u4ee4\npika\u76ee\u524d\u652f\u6301\u7684\u63a5\u53e3. \u548c\u4e0a\u9762\u4e00\u4e2a\u95ee\u9898\u554a. @chenyingjie2012 \u770b\u4e00\u4e0bwiki \u6709\u8be6\u7ec6\u7684\u4ecb\u7ecd. \u7a0d\u7b49 \u6211\u4eec\u8fd9\u8fb9\u9a8c\u8bc1\u4e00\u4e0b. glog-0.3.3. These libraries are universal and you can install them by yourself. @airclear \u7f3a\u5c11gflags. \u597d\uff0c\u8c22\u8c22\uff0c\u8fd9\u4e2a\u6211\u4eec\u4e00\u76f4\u5728\u8003\u8651\u6539\u8fdb\u2026\nAirclear notifications@github.com\u4e8e2017\u5e7410\u67083\u65e5 \u5468\u4e8c\u4e0b\u534810:11\u5199\u9053\uff1a\n\n@Leviathan1995 https://github.com/leviathan1995\nPackage gflags-2.1.1-6.el7.x86_64 already installed and latest version\n\u5927\u795e\uff0c\u5b98\u65b9\u80fd\u641e\u4e2adocker\u955c\u50cf\u5417\uff1f\u8fd9\u6837\u80fd\u6781\u5927\u964d\u4f4e\u4f7f\u7528\u95e8\u69db\u554a\uff0c\u6709\u5229\u4e8e\u4f20\u64ad\u3002\u3002\u3002\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/Qihoo360/pika/issues/194#issuecomment-333854191, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AHcMRdpAacm6C4JNqIjIO7RM_abdHHERks5sokCAgaJpZM4Pp4D6\n.\n. @squalfof  \u975e\u5e38\u611f\u8c22\uff0c\n\u7b2c\u4e00\u4e2a\u95ee\u9898 \u91cd\u590d\u7684\u53e6\u4e00\u4e2arpush \u5e94\u8be5\u662frpushx \u76ee\u524d\u5df2\u7ecf\u4fee\u6539\uff0c\u7b2c\u4e8c\u4e2a string\u547d\u4ee4\u76ee\u524d\u4e0d\u5f71\u54cd\u4f7f\u7528\uff0c\u7b2c\u4e09\u4e2a\u5e94\u8be5\u662f\u6211\u4eec\u7684typo\u9519\u8bef\uff0c\u5e94\u8be5\u662f\u201c\u89e3\u9664\u6587\u4ef6\u963b\u6b62\u5220\u9664\u201d\n. @squalfof \u5173\u4e8ePika\u63a5\u53e3Wiki\u5df2\u7ecf\u66f4\u65b0, Keys\u4e0eStrings\u90e8\u5206\u5df2\u7ecf\u533a\u5206. \u540e\u7eed\u7ee7\u7eed\u66f4\u65b0\u6574\u4e2aPika\u7684\u6587\u6863. @CocaCola183  \u53ef\u4ee5\u4f7f\u7528delbackup\u547d\u4ee4\uff0c\u5220\u9664dump\u76ee\u5f55\u4e0b\u9664\u6b63\u5728\u4f7f\u7528\uff08\u5168\u540c\u6b65\u4e2d\uff09\u7684db\u5feb\u7167\u5916\u7684\u5176\u4ed6\u5feb\u7167\n\u6216\u8005\u6dfb\u52a0expire-dump-days\u914d\u7f6e\uff0c\u53ef\u4ee5\u6309\u5929\u81ea\u52a8\u7ed9\u5220\u9664\u4e0d\u9700\u8981\u7684db\u5feb\u7167. @CocaCola183 \u7c7b\u4f3c\u5e38\u89c4\u7684\u547d\u4ee4 cli \u8fde\u4e0a\u53bb \u8f93\u5165 delbackup. LGTM. @ustczz  \u4f7f\u7528\u6700\u65b0\u7248 \u53ef\u76f4\u63a5\u5728release\u9875\u9762\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u4f7f\u7528:https://github.com/Qihoo360/pika/releases. nemo\u5e93zset\u63a5\u53e3double\u53c2\u6570\u7cbe\u5ea6\u95ee\u9898 . \u53c2\u8003redis slaveof \u4f7f\u7528\u65b9\u6cd5. \u975e\u5e38\u611f\u8c22\uff0c\u5df2\u7ecf\u4fee\u6539\u4e86. \u628aPika\u89c6\u4e3aRedis\u5373\u53ef\uff0c\u4f7f\u7528\u65b9\u6cd5\u4e0eRedis\u4e00\u81f4\u3002\u5177\u4f53\u4f7f\u7528\u53c2\u8003Redis\u4f7f\u7528\u65b9\u6cd5. @KernelMaker  \u53ef\u4ee5\u6539\u6210\u53cc\u4e3b\u7c7b\u4f3c\u7684\u6a21\u5f0f, \u89e3\u6790binlog\u7684\u540c\u65f6\u8bb0\u5f55filnum\u548coffset\u5728\u672c\u5730\u7684manifset\u3002. @baotiao Set the option of compression in Rocksdb\n\n. Thanks!. @topilski  That's interesting. Pika compatible with Redis protocol, so maybe both use the same way to connect.. @topilski Pika Command . We have not yet the English version of  wiki, you can use google to translate this page.. @topilski We created a log just now. Pika Logo. and Pika supports TTL keys.. Pika needs to use info keyspace 1 asynchronous count that how much receive keys,  and not support the multi-db feature.. @topilski  You need to info keyspace 1 after Insert some values to the list. . Pika does not support Unix sockets @topilski . @topilski  Thank you very much.. We will expose all of the options in next store engine blackwidow. done. \u6ca1\u6709snappy\u7684\u5e93. \u4ec0\u4e48\u64cd\u4f5c\u7cfb\u7edf?  \u4f60\u73b0\u5728\u7528\u7684\u8fd9\u4e2aPika\u662f\u4e0d\u662f\u7f16\u8bd1\u597d\u4e86\u4ece\u4e0d\u522b\u7684\u5730\u65b9\u62f7\u8fc7\u6765\u7684?. ldd output/bin/pika \u770b\u4e00\u4e0b\u7f3a\u4ec0\u4e48\u5e93. make distclean \u7136\u540e\u91cd\u65b0\u7f16\u8bd1\u4e00\u4e0b. gcc\u95ee\u9898. \u4f60\u7684/usr/local/lib\u6216\u8005 /lib/x86_64-linux-gnu/\u8fd9\u4e24\u4e2a\u76ee\u5f55\u4e0b\u6ca1\u6709snappy\u7684\u52a8\u6001\u5e93, \u88c5\u597d\u786e\u8ba4\u4e00\u4e0b.so\u6587\u4ef6. \u672c\u673a\u88c5rsync\u4e86\u5417\n. \u6ca1\u9519\u4e86. master\u8bbe\u7f6e\u4e86\u5bc6\u7801\uff0cslave\u4e0d\u8bbe\u7f6emasterauth\u65e0\u6cd5\u5efa\u7acb\u8fde\u63a5. \u73b0\u5728\u4e24\u8fb9123456\u8fd8\u4e0d\u884c?. @dreamtraveler  \u6211\u8fd9\u8fb9\u590d\u73b0\u4e86 \u6b63\u5728\u6392\u67e5. @dreamtraveler  \u975e\u5e38\u611f\u8c22\uff0c\u662f\u6211\u4eec\u4ee3\u7801\u7684\u95ee\u9898\uff0c\u6211\u5df2\u7ecf\u4fee\u590d\u4e86\uff0c\u9a6c\u4e0a\u63d0\u4ea4\uff0c\u5982\u679c\u4f60\u7740\u6025\u4f7f\u7528\uff0c\u53ef\u4ee5\u7a0d\u540e\u81ea\u5df1\u4fee\u6539\u4e00\u884c\u4ee3\u7801fix\u8fd9\u4e2a\u95ee\u9898.. @dreamtraveler https://github.com/Qihoo360/pika/commit/8712df7e226e6e8d562370af137a713cae6bd26a \u4f60\u770b\u4e00\u4e0b\u6211\u8fd9\u4e2acommit\uff0c\u7136\u540e\u628a\u4f60\u672c\u5730\u7684\u4ee3\u7801\u8fd9\u884c\u6539\u4e00\u4e0b\uff0c\u5e94\u8be5\u5c31\u53ef\u4ee5\u4e86. . @dreamtraveler \u95ee\u9898\u4fee\u590d\u4e86\u5417?. master\u914d\u7f6erequirepass : 123456, slave\u914d\u7f6emasterauth : 123456  \u8fd8\u4e0d\u884c\uff1f\n. @dreamtraveler \u6211\u8fd9\u8fb9\u914d\u7f6e\u4e86\u4e3b\u4ece\u8fde\u63a5\u5c31\u6ca1\u6709\u95ee\u9898\u4e86\u3002 \nrequirepass: 123456\n\u4f60\u628a\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u8d34\u4e0a\u6765\u770b\u4e00\u4e0b. \u5047\u5982\u4f60\u8bbe\u7f6e\u4e86requirepass\uff0c\u4e3b\u4ece\u5efa\u7acb\u8fde\u63a5\u4f7f\u7528\u7684\u5185\u90e8\u547d\u4ee4trysync\u662f\u9700\u8981\u63d0\u4f9b\u7ba1\u7406\u5458\u5bc6\u7801. @dreamtraveler  \u76ee\u524d\u4e00\u5207\u6b63\u5e38\u5417?. \u4f60\u662f\u540e\u6765\u88c5\u7684snappy\u5417\uff1f \u91cd\u65b0\u7f16\u8bd1\u4e00\u4e0brocksdb  . ok. fixed.. fixed.. \u4ec0\u4e48\u7248\u672c?. \u4e3b\u4ece\u90fd\u662f2.3.3\u5417 \u73b0\u5728\u4e3b\u8fd8\u5728\u5199\u5165\u5417?. \u4f60\u76ee\u524d\u80fd\u91cd\u542f\u4e3b\u7684\u673a\u5668\u5417. @oooldcoder  QQ\u7fa4:  294254078  \u6c9f\u901a\u65b9\u4fbf\u4e00\u70b9. @derbyguyb  https://github.com/Qihoo360/pika/wiki/pika-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E. sync-thread-num \u4ee3\u8868\u5904\u7406Binlog\u7684\u7ebf\u7a0b\u6570\u91cf. \u4f60\u4f7f\u7528redis-py\u7684keys()\u63a5\u53e3\u7684\u4e4b\u524d \u7528redis-cli\u8fde\u4e0aPika\u8f93\u5165monitor\u547d\u4ee4 \u770b\u4e0b. @suclnchoi \u770b\u65e5\u5fd7Pika\u6ca1\u6709\u95ee\u9898 \u5c31\u662fkeys\u547d\u4ee4\u6709\u70b9\u6162. @xtudouh \u4f60\u8fc1\u79fb\u7684\u65f6\u5019 \u9700\u8981\u505cPika\u670d\u52a1. @pengzhuoxu \u4f60slaveof\u547d\u4ee4\u8f93\u5165\u7684\u662f\u4ec0\u4e48? . \u5168\u540c\u6b65\u7528\nslaveof ip port force. @pengzhuoxu \u770b\u4e0b\u6587\u6863 https://github.com/Qihoo360/pika/wiki/Pika%E5%8F%8C%E4%B8%BB%E6%96%87%E6%A1%A3\n\u53cc\u4e3b\u6a21\u5f0f\u4e0b\u8981\u4f7f\u7528slaveof. @unisqu max_bytes_for_level_multiplier just means that to limit the size of each level.. @unisqu Pika would not crash, but hints that the disk is full.\n@Axlgrep #190 \n. @CatKang \u5df2\u4fee\u6539\uff0cGEODIST\u9700\u8981kCmdFlagsRead.. @CatKang \u5df2\u4fee\u6539.. geoadd\u53c2\u6570\u6700\u5c11\u4e2a\u6570\u4e3a-5\ngeopos\u53c2\u6570\u6700\u5c11\u4e2a\u6570\u4e3a-2\n127.0.0.1:6379> geoadd xj 1.0 2.0 kt\n(integer) 0\n127.0.0.1:6379> geopos xj \n(empty list or set)\ngeodist\u53c2\u6570\u6700\u5c11\u4e2a\u6570\u4e3a-4\ngeohash\u53c2\u6570\u6700\u5c11\u4e2a\u6570\u4e3a-2\n127.0.0.1:6379> geohash xj\n(empty list or set)\ngeoradius\u53c2\u6570\u6700\u5c11\u4e2a\u6570\u4e3a-6\ngeoradiusbymember\u53c2\u6570\u6700\u5c11\u4e2a\u6570\u4e3a-5\n. PIKA_ROLE_MASTER | PIKA_ROLE_SLAVE \u662f 0000 0011 | 0000 0001 = 0000 0011 \nPIKA_ROLE_DOUBLE_MASTER \u662f 0000 0011\n\u6709\u51b2\u7a81. pink\u91cc\u662fredis conn \u91cc\u6784\u9020Publish\u7684\u54cd\u5e94\u6d88\u606f\n\u8fd9\u91cc\u662fpika conn\u6784\u9020sub unsub\u7684\u54cd\u5e94\u6d88\u606f \npublish\u7684\u54cd\u5e94\u6d88\u606f\u7531pink\u53d1\u9001 \nsub unsub\u7684\u54cd\u5e94\u6d88\u606f\u7531pika\u8fd9\u5c42\u53d1\u9001. \u55ef Pubsub\u6ca1\u6709\u4e0e\u534f\u8bae\u76f8\u5173\u7684\u4e1c\u897f \u8c03\u7528\u7684\u662fredis conn\u91cc\u9762\u7684\u63a5\u53e3\u6784\u9020publish\u7684\u6d88\u606f. \u6b63\u5728\u4fee\u6539. @left2right maybe you need to use bulk strings in this case. \u53c2\u6570\u5148\u8f6c\u4e3a\u5c0f\u5199\u518d\u7edf\u4e00\u5224\u65ad. \u6240\u6709\u7684\u8fde\u63a5\u90fd\u662f\u653e\u8fdb\u6765\u7684\uff0c\u7136\u540e\u901a\u8fc7\u7b2c\u4e00\u6761\u547d\u4ee4auth sid\u6765\u5224\u65ad\u6765\u6e90\u5408\u6cd5.. \u4ee3\u7801\u5728\u4f60\u672c\u5730\u7f16\u8bd1\u901a\u8fc7\u4e86\u5417\uff1fargv_\u8fd9\u4e2a\u53d8\u91cf\u4e0d\u5b58\u5728\u7684. @prcyangli \u7f29\u8fdb\u4fee\u6539\u4e00\u4e0b\u5427. ",
    "heming79": "\u6211\u4eec\u5185\u5916\u7f51\u5206\u5f00\u7684 \u4e0d\u80fd\u7528 eth1 \u5417 \nMay i use eth1 \uff1f   or br0 br1  ,\nI change the code \uff1f and rebuild one \uff1f\neth1      Link encap:Ethernet  HWaddr 52:5B:63:2E:BE:F2\n          inet addr:192.168.7.63  Bcast:192.168.7.255  Mask:255.255.252.0\n          inet6 addr: fe80::505b:63ff:fe2e:bef2/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:244827786 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:96013785 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:25739430538 (23.9 GiB)  TX bytes:14231082544 (13.2 GiB)\n\u4f55\u660e \u7cfb\u7edf\u8fd0\u7ef4\u4e2d\u5fc3 \u603b\u76d1/\u5408\u4f19\u4eba\n\u4ebf\u739b--\u667a\u6167\u60a8\u7684\u5546\u4e1a\u672a\u6765 \nEMAR--Make your business future smarter\n\n\u7535\u8bdd\uff1a010-53553118-8798\n\u4f20\u771f\uff1a010-53553119\n\u624b\u673a\uff1a18611972542\n\u90ae\u7bb1\uff1aheming@emar.com\n\u5730\u5740\uff1a\u5317\u4eac\u5e02\u671d\u9633\u533a\u4e09\u95f4\u623f\u4e1c\u67f3\u5df7\u7532\u4e00\u53f7\u9662\u610f\u83f2\u514b\u5927\u53a6A\u5ea7\n\u90ae\u7f16\uff1a100024\nFrom: SongZhao\nDate: 2016-06-20 10:54\nTo: Qihoo360/pika\nCC: heming79; Author\nSubject: Re: [Qihoo360/pika] slaveof masterip port error (#14)\npika get the ip address from \"eth0\"(DEFAULT) at startup and use it in connecting with master, check your network card configuration and find out whether the \"eth0\" exists\nHere is the current way to get the ip of the local host, we will change it later and make it more flexible: \nbool PikaServer::ServerInit() {\n  int fd;\n  struct ifreq ifr;\n  fd = socket(AF_INET, SOCK_DGRAM, 0);\n  ifr.ifr_addr.sa_family = AF_INET;\n  strncpy(ifr.ifr_name, \"eth0\", IFNAMSIZ-1);\n  ioctl(fd, SIOCGIFADDR, &ifr);\n  close(fd);\n  host_ = inet_ntoa(((struct sockaddr_in *)&ifr.ifr_addr)->sin_addr);\n  port_ = g_pika_conf->port();\n  return true;\n}\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. \u80fd\u52a0\u6211qq 1294425453 \uff0c\u6216\u8005 \u5fae\u4fe1 18611972542 \u6211\u54a8\u8be2\u4e00\u4e0b\u5417\uff1f\n\u80fd\u4e0d\u80fd\u7528codis \u6216 redis cluster \u6765\u8c03\u5ea6 pika \u3002 \u8fd9\u6837\u5c31\u80fd\u771f\u6b63\u5b9e\u73b0\u6d77\u91cf\uff0c\u9ad8\u53ef\u7528\u67b6\u6784 \u3002\n\u4f55\u660e \u7cfb\u7edf\u8fd0\u7ef4\u4e2d\u5fc3 \u603b\u76d1/\u5408\u4f19\u4eba\n\u4ebf\u739b--\u667a\u6167\u60a8\u7684\u5546\u4e1a\u672a\u6765 \nEMAR--Make your business future smarter\n\n\u7535\u8bdd\uff1a010-53553118-8798\n\u4f20\u771f\uff1a010-53553119\n\u624b\u673a\uff1a18611972542\n\u90ae\u7bb1\uff1aheming@emar.com\n\u5730\u5740\uff1a\u5317\u4eac\u5e02\u671d\u9633\u533a\u4e09\u95f4\u623f\u4e1c\u67f3\u5df7\u7532\u4e00\u53f7\u9662\u610f\u83f2\u514b\u5927\u53a6A\u5ea7\n\u90ae\u7f16\uff1a100024\nFrom: SongZhao\nDate: 2016-06-20 11:27\nTo: Qihoo360/pika\nCC: heming79; Author\nSubject: Re: [Qihoo360/pika] slaveof masterip port error (#14)\ncheckout the tag(v2.0.5), change the code and rebuild, Thanks for the reports. ^^\nstrncpy(ifr.ifr_name, \"eth1\", IFNAMSIZ-1);\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. ",
    "flabby": "According to rocksdb's memory usage, we add 2 types of rocksdb memory usage: \n- db_memtable_usage: which is the memtable usage;\n- db_tablereader_usage: which is Indexes and bloom filters's usage;\nWe can see the results when we use info command\n``` shell\nData\ndb_size:0M\ncompression:snappy\nused_memory:96681\ndb_memtable_usage:1207Bytes\ndb_tablereader_usage:0Bytes\n```\nnote: db_size and used_memory  are just the data size of db directory, not the memory usage\nMaybe later, we will add the other 2 types of rocksdb's memory usage.\n. We have added wiki about Compile and Run, which includes Ubuntu.\nMore feedbacks is expecting. \n. \u76ee\u524dPika\u7684bit\u8303\u56f4\u662f 2^21\uff1b \n\u76ee\u524dbit\u7684\u5b9e\u73b0\u6bd4\u8f83\u7b80\u5355\uff0c\u53ea\u662f\u9650\u5236\u56fa\u5b9a\u957f\u5ea6\uff1b\u4e4b\u540e\u6211\u4eec\u4f1a\u8003\u8651\u5347\u7ea7\uff0c\u652f\u6301\u6bd4\u8f83\u5927\u7684\u8303\u56f4\uff1b\n\u4e34\u65f6\u7684\u89e3\u51b3\u65b9\u6848\u662f\u5728Pika\u7684\u4ee3\u7801\u4e2d\u628a\u9650\u5236\u8c03\u5927\u70b9\uff1b. QQ group:  294254078 \nPika\u7684\u5185\u5b58\u5360\u7528\u4e3b\u8981\u5206\u4e3a\u4e24\u5927\u90e8\u5206\uff1a\n \u7f51\u7edc\u548c\u903b\u8f91\u76f8\u5173\u7684\uff1a \n    - \u7f51\u7edc\u6536\u53d1\u7f13\u51b2\uff1a \u8fd9\u4e2a\u548c\u7528\u6237\u8fde\u63a5\u6570\u76f8\u5173\n \u5f15\u64ce\u76f8\u5173\u7684\uff08\u8fd9\u5757\u6bd4\u8f83\u591a\uff09\uff1a\n    -  info\u547d\u4ee4\u80fd\u770b\u5230\u5f15\u64ce\u4e24\u79cd\u5185\u5b58\u5360\u7528 memtable\u548ctable_reader;\n    -  \u5176\u4ed6\u7684\u6682\u65f6\u770b\u4e0d\u5230\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u589e\u52a0\u66f4\u7ec6\u81f4\u7684\u76d1\u63a7\uff1b\n\u76ee\u524d\u80fd\u591f\u9650\u5236\u5185\u5b58\u5360\u7528\u7684\u51e0\u4e2a\u53c2\u6570\uff1a\n write-buffer-size \uff1a \u63a7\u5236\u5f15\u64ce\u7684memtable\uff1b\n maxclients \n* max-cache-files \uff1a \u63a7\u5236\u5f15\u64ce\u7f13\u5b58\u7684\u6587\u4ef6\u53e5\u67c4. ",
    "fancy-rabbit": "is there any plans?\nRate limiter is very useful to control the rate of background flushing and compacting.\nseems that can be easily achieved by exposing some of the options of rocksdb.\n. @left2right \nthe 'sync' button in the 'groups' section of codis-fe leads to a `synced_failed' status, but actually the SLAVEOF commands succeeded.\nin function \nfunc (c *Client) SetMaster(master string) error {}\nin codis 3.2's src/utils/redis/client.go:170\n\n    c.conn.Send(\"MULTI\")\n    c.conn.Send(\"CONFIG\", \"SET\", \"masterauth\", c.Auth)\n    c.conn.Send(\"SLAVEOF\", host, port)\n    c.conn.Send(\"CONFIG\", \"REWRITE\")\n    c.conn.Send(\"CLIENT\", \"KILL\", \"TYPE\", \"normal\")\n    values, err := redigo.Values(c.Do(\"EXEC\"))\n\n\nbecause pika doesn't suport MULTI/EXEC, it will throw the error message.\nthe log of codis-dashboard looks like this:\n\n2017/06/07 18:41:34 fsclient.go:216: [INFO] fsclient - update /codis3/codis-demopika/group/group-0001 OK\n2017/06/07 18:41:34 topom_action.go:111: [WARN] sync-[10.19.113.124:9221] process action\n2017/06/07 18:41:34 topom_group.go:598: [WARN] redis 10.19.113.124:9221 set master to 10.19.113.124:9222 failed\n[error]: Err unknown or unsupported command 'multi'\n    4   /home/travis/gopath/src/github.com/CodisLabs/codis/pkg/utils/redis/client.go:57\n            github.com/CodisLabs/codis/pkg/utils/redis.(Client).Do\n    3   /home/travis/gopath/src/github.com/CodisLabs/codis/pkg/utils/redis/client.go:180\n            github.com/CodisLabs/codis/pkg/utils/redis.(Client).SetMaster\n    2   /home/travis/gopath/src/github.com/CodisLabs/codis/pkg/topom/topom_group.go:597\n            github.com/CodisLabs/codis/pkg/topom.(Topom).newSyncActionExecutor.func1\n    1   /home/travis/gopath/src/github.com/CodisLabs/codis/pkg/topom/topom_action.go:117\n            github.com/CodisLabs/codis/pkg/topom.(Topom).ProcessSyncAction\n    0   /home/travis/gopath/src/github.com/CodisLabs/codis/pkg/topom/topom.go:238\n            github.com/CodisLabs/codis/pkg/topom.(*Topom).Start.func4\n        ... ...\n2017/06/07 18:41:34 topom_group.go:557: [WARN] server-[10.19.113.124:9221] action failed = true\n\nmaybe simply support MULTI/EXEC, as described in #73 will simply resolve this problem.. now it's compatible in 3.0 thus this issue could be closed^_^. #140 . @baotiao i'm glad to do so when i have time (unluckily few time to do the benchmark these weeks). this PR is just a workaround for pika to compile (now rocksdb takes jemalloc but pika prefers tcmalloc lol...) .\nhttps://github.com/facebook/rocksdb/issues/1442 describes this situation more clearly.\nForce rocksdb to link tcmalloc is an alternative.\nWhich is better depends on the benchmark. I'll update this issue when I finish the benchmark.\nand of course welcome others to do it, especially those who cannot commpile pika because of the existence of libjemalloc lol......... err... close this issue due to the compilation problem is solved. if there're any evidences that jemalloc performs better, i'll open another ^_^. because of which of tc/jemalloc is more suitable for pika, close this until there's more test result.\nNOTE: maybe some more work todo with pika to support jemalloc stats/debugging lol. in PikaDispatchThread::Handles::AccessHandle()\nif (ip == \"127.0.0.1\") {\n    ip = g_pika_server->host();\n}\n\u6709\u4ec0\u4e48\u7279\u6b8a\u7528\u610f\u4e48.... \u770b\u8d77\u6765 slotsrestore \u548c restore \u547d\u4ee4\u90fd\u6ca1\u6709\u3002\n\u53ef\u4ee5\u8bd5\u8bd5\u770b redis-migrate-tool\uff0ccodis/pika \u4fa7\u8fde proxy \u7aef\u53e3\uff0c\u7c7b\u578b\u6307\u5b9a\u4e3a single. #172 . pipeline \u7684\u65f6\u5019\u4e0d\u8981\u7528 transaction\uff08\u5c31\u662f\u4e0d\u8981\u7528 multi/exec\uff09\uff0cpython \u5ba2\u6237\u7aef\u6709\u9009\u9879\u7684\uff0c\u4ed4\u7ec6\u770b\u4e00\u4e0b. \u7b2c\u4e00\u4e2a\u95ee\u9898\uff0c\u76ee\u524d\u7684\u5b9e\u73b0\u4f3c\u4e4e\u8bfb\u53d6\u5df2\u7ecf\u901a\u8fc7 Snapshot \u5b9e\u73b0\u4e86\n\u7b2c\u4e8c\u4e2a\u95ee\u9898\uff0cblackwidow \u5b9e\u73b0\u91cc\u5bf9\u6240\u6709 key \u52a0\u4e86\u9501\uff0c\u4f46\u662f pika_client_conn.cc \u91cc\u4ecd\u7136\u8fd8\u662f\u7b2c\u4e00\u4e2a key. \u5728 codis-dashboard \u914d\u7f6e\u91cc\u628a semi-async \u6539\u6210 sync\u3002. seems it tried to connect to 10.27.2.2 with the interface which has 116.62.3.9 ...\nenable the 'network-interface' option in pika.conf and use the appropriate interface will solve this issue.. 1. +1\n2. \u6ca1\u592a\u770b\u61c2\uff0c\u672c\u6765 c \u548c b \u5c31\u662f\u540c\u6b65\u7684\uff1f. try \u6700\u65b0 master \u5206\u652f\u7684\u4ee3\u7801\uff0c\u5f00 level-compaction-dynamic-level-bytes \u8bd5\u8bd5\uff1f. good job @left2right which will save my life when scaling out.\nwill test it more thoroughly within 2017 lol. LGTM~ @baotiao @KernelMaker \nplease review & consider merging it (to avoid upgrade of pink/nemo break this again?lol) for us codis users to try the new better migration methods conveniently.. @KernelMaker \u7b2c\u4e8c\u70b9\uff0c\u5982\u679c\u4e34\u65f6\u7528 2.2.x \u4e3b\uff0c2.3.0 \u4ece\uff0c\u4ec0\u4e48\u60c5\u51b5\u4e0b\u53ef\u4ee5\u6709\u9650\u5ea6\u5730 run\uff1f\n\u4e3b\u8981\u8003\u8651\u5e73\u6ed1\u5347\u7ea7\u5207\u6362\u3002. @KernelMaker @Leviathan1995 get it. \uff08\u4e0d\u8fc7\u770b\u8d77\u6765\u77ed\u671f\u5185\u53ea\u80fd\u5fcd\u53d7 downtime \u4e86\uff1f\uff09. hey @Leviathan1995 @KernelMaker how is it going?\nit's running on our codis+pika cluster for a month, except that slot migrations didn't propagate to slaves correspondingly(due to the original design by @left2right ), lol. emmm... ping this @Axlgrep \nsince blackwidow is now the current engine, is there any possibility that exposes bulkload ?. cool @prcyangli for slotsrestore.... #249 . start spinning on fd 3568:\n\nread/write operations when CPU is 100% hogged;\n\n\nluckily recovered: (but it didn't often happen, spinning may last for hours)\n\n. @Leviathan1995 pink submodule not updated?233. \u8bd5\u8bd5\u770b\u6700\u65b0 master \u5206\u652f\uff0cmerge \u4e86\u6211\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u7684\u4ee3\u7801\n\u4f46\u662f\u5982\u679c\u662f NAT \u73af\u5883\u4e0b\uff0c\u53ef\u80fd\u4e0d\u4e00\u5b9a\u884c\uff08\u6211\u6ca1\u6709\u73af\u5883\u53ef\u4f9b\u6d4b\u8bd5\uff09\n\u591a\u7f51\u5361\u4e0d\u7ed1\u5b9a\u60c5\u51b5\u4e0b\u5df2\u7ecf ok \u4e86. pika \u5168\u540c\u6b65\u73b0\u5728\u662f rsync \u76f4\u63a5\u603c\u8fc7\u53bb\u7684\u65b9\u5f0f\uff0c\u6240\u4ee5\u90fd\u4e0d\u592a\u597d\u641e\u3002\u3002\n\u7ed9\u4f60\u4e2a\u601d\u8def\uff0c\u5148 bgsave \u4e00\u4e2a\u5feb\u7167\uff0c\u628a\u8fd9\u4e2a\u5feb\u7167\u8fc1\u79fb\u8fc7\u53bb\n\u8fd9\u4e2a\u5feb\u7167\u76ee\u5f55\u4e0b\u7684 info \u6587\u4ef6\u662f binlog \u7684 filename \u548c position\uff0c\u4ece\u8fd9\u4e2a\u5730\u65b9\u5f00\u59cb\u987a\u5e8f\u89e3\u6790 binlog \u5e76\u4e14\u628a\u5bf9\u5e94\u7684\u547d\u4ee4\u53d1\u5230 redis\u3002\n\uff08\u6211\u80fd\u8c03\u4f83\u4e00\u4e0b\u5417\u5c31\u662f\u4f60\u8ba9pika\u5f00\u53d1\u7ec4\u7ed9\u4f60\u5f00\u53d1pika\u5230\u522b\u7684\u5730\u65b9\u7684\u8fc1\u79fb\u5de5\u5177\u4ed6\u4eec\u80af\u5b9a\u6ca1\u52a8\u529b\uff09. redis \u6709\u8fd9\u4e2a\u4e48\uff1f. https://github.com/Qihoo360/pika/wiki/pika-blackwidow%E5%BC%95%E6%93%8E%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%A0%BC%E5%BC%8F#blackwidow%E7%9B%B8%E5%AF%B9%E4%BA%8Enemo%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8A%BF. scan is not allowed?\u4f60\u8fde\u7684\u54ea\u513f\u554a. \u9009 db \u672c\u8eab\u5e94\u8be5\u4e0d\u4f1a\u62a5\u5427\u3002scan \u547d\u4ee4 pika \u4e5f\u652f\u6301\u554a\n\u770b\u4e00\u4e0b\u5177\u4f53\u53d1\u4e86\u54ea\u4e2a\u547d\u4ee4pika\u4e0d\u652f\u6301\uff1f. 0.8 \u539f\u6765\u662f keys\u3002\n\u80fd\u5e2e\u5fd9\u770b\u4e0b\u5177\u4f53\u53d1\u4e86\u4ec0\u4e48\u547d\u4ee4 pika \u4e0d\u652f\u6301\u4e48\uff1f\n\u6309\u7167 https://github.com/Qihoo360/pika/wiki/pika-%E6%94%AF%E6%8C%81%E7%9A%84redis%E6%8E%A5%E5%8F%A3%E5%8F%8A%E5%85%BC%E5%AE%B9%E6%83%85%E5%86%B5\n\uff0cscan \u547d\u4ee4\u662f\u652f\u6301\u7684\uff0c\u4e0d\u77e5\u9053\u662f\u5426\u6709\u7ec6\u8282\u5dee\u5f02\u3002. pika \u7684 select \u662f\u4e2a\u7a7a\u547d\u4ee4\uff0c\u800c\u4e14\u53ea\u652f\u6301 0-15\nselect 16 \u80af\u5b9a\u662f\u4e0d\u884c\u3002\u3002\u3002\u3002. duplicate of #228 .\npika doesn't have hash-zipmap-max-entries or hash-max-ziplist-entries(of redis>=2.6). so there aren't such optimizations like redis.\npika isn't a in-memory database like redis, it's based on rocksdb and stores data on disks.\nHow pika stores hash/set/zset/list in rocksdb is documented here:\nhttps://github.com/Qihoo360/pika/wiki/pika-blackwidow%E5%BC%95%E6%93%8E%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%A0%BC%E5%BC%8F\nsorry no English version yet, you may need to access via google translate:(. added some fixes into this PR, mainly for\nbetter handling of auth error/broken connection detection&migration resuming/signal handling, etc.\n. alternative\u7684\u65b9\u6cd5\uff0c\u4e00\u4e2a\u662f\u9ed8\u8ba4\u8c03\u5927\u70b9\uff0c\u8fd8\u4e00\u4e2a\u662f\u4f20\u9012\u53c2\u6570\u7684\u65f6\u5019\u4e0d\u4f20 rocksdb::BlockBasedTableOptions,\u4f20\u4e2astruct\uff0c\u91cc\u8fb9\u4e00\u4e2arocksdb::BlockBasedTableOptions\u4f46\u662f\u4e0d\u521d\u59cb\u5316block_cache\uff0c\u518d\u4f20\u4e2aint\u7684size\u8fdb\u53bb\uff0c\u5728blackwidow\u7684\u5404\u4e2aOpen\u91cc\u521d\u59cb\u5316LRUCache....\n\u611f\u89c9\u8fd9\u662f\u4e2a\u4ea7\u54c1\u95ee\u9898. which version of pika are you using in your production environment?\nwhat did you mean by 'string record' which 'comes faster'?\nto be more clearer, did you mean that in the dual-master mode, you did\nHSET key field val\non instance1, and\nSADD key2 member or SPOP key2\non instance2,\nbut the hash value of the corresponding key does not exist on instance 2?. @iseriser are there any clues in the pika.ERROR log?\nsince binlog writing is serialized, it looks a bit weird.\nis the issue reproducible under a master-slave configuration, or only occurs when dual-master mode is used? are the server-ids of the 2 masters different with each other?\nfurthermore, if necessary and possible, you can sent your corresponding binlog(write2filexxx) to @Axlgrep to do some analyzing.\nand the QQ group (294254078) might be more convenient to communicating with the dev team, if you have one :). nice job!. \u95ee\u98981\uff0c.gitmodules\u91cc\u6709\u5f15\u7528\u7248\u672c\u7684\u3002\n\u95ee\u98982\uff0c\u7528\u4e8c\u8fdb\u5236\u597d\u4e86\u3002\u60f3\u7f16\u8bd1\u7684\u8bddclone\u4ee3\u7801\u5e76\u4e14checkout\u5230\u5bf9\u5e94\u7684tag\u3002. thanks boy~. kCmdNameSlotsMgrtAsyncStatus. kCmdNameAsyncCancel. errrr, this command's output is like:\n\"dest server: 10.11.11.101:9222\\r\\nslot number: 39\\r\\nmigrating  : no\\r\\nmoved keys : 128\\r\\nremain keys: 0\\r\\n\"\ncould it be more human readable?. won't be necessary after https://github.com/Qihoo360/pink/commit/51e4bbeed2c9dbf2f728400369fc9d19d482bfe2#diff-9b6af85329e3015c44cf81fb59fd1686\ntake effects in pika?. this may bring down performance.\nbut considering about the condition that large keys are sliced into multiple pieces(batches for migration), it might be the clearest and simplest solution to avoid the possibility of leaving garbage data in socket buffers.. found a way works well when large keys are sliced. see https://github.com/Qihoo360/pika/pull/236. \u662f\u3002\u3002\u3002\u8c03\u8bd5\u5fd8\u4e86\u5220. ",
    "unoexperto": "Hey guys, I came from LedisDB project which I believe is developed by someone from your team.\nI use LedisDB in production and I'm quite happy with it. I serve scientific articles via HTTP from it. Currently I have 76M articles in my DB. I heavily rely on LUA because it's critical sometimes to make decision on DB instead of fetching article's XML from DB to API server. I have 10X difference in response time.\nAlso sometimes it's very convenient to do maintenance on DB. For example I build huge bitsets for articles. Fetching 100GB of compressed XML to set bunch of bits would take very long time.\nTherefore seeing LUA support in Pika would be dealbreaker for me :)   . ",
    "qdaxb": "\u7b80\u5355\u6d4b\u8bd5\u540e\u53d1\u73b0pipeline\u7684key\u9010\u6e10\u589e\u5927\uff0c\u8d85\u8fc72w\u4e4b\u540e\u6709\u51e0\u7387\u5361\u6b7b\uff0c3w+\u5361\u6b7b\u51e0\u7387\u6bd4\u8f83\u5927\u3002\n\u590d\u73b0\u7a0b\u5e8f\uff1a\n```\npackage test;\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.Pipeline;\npublic class SampleController {\npublic static void main(String[] args) throws Exception {\n    try {\n        String[] hostAndPort = args[0].split(\":\");\n\n        Jedis jedis = new Jedis(hostAndPort[0], Integer.parseInt(hostAndPort[1]));\n        int loopCount = Integer.parseInt(args[1]);\n        final int idCount = Integer.parseInt(args[2]);\n\n        for (int i = 0; i < loopCount; i++) {\n            final int finalI = i;\n\n            long start = System.currentTimeMillis();\n            Pipeline pipeline = jedis.pipelined();\n            if (\"set\".equalsIgnoreCase(args[3])) {\n                for (int j = 0; j < idCount; j++) {\n                    pipeline.hincrBy(\"test\" + finalI + j, \"field\", 1);\n                }\n            } else {\n                for (int j = 0; j < idCount; j++) {\n                    pipeline.hget(\"test\" + finalI + j, \"field\");\n                }\n            }\n            pipeline.syncAndReturnAll();\n            long end = System.currentTimeMillis();\n            System.out.println(\"count:\" + idCount + \",time:\" + (end - start));\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    System.exit(0);\n}\n\n}\n```\nfor i in {1..100000..5000}; do java -jar test.jar host:port 10 $i set  ; done\njava -jar test.jar host:port 10 30000 set\n. ",
    "yzwwf": "Thank you for replying. I have just found that there is a new version of the master branch.  It turns out that the latest version does not have this problem.\n. ",
    "wangmang": "\u6211\u4eec\u4e4b\u524d\u4e00\u76f4\u7528\u7684redis\uff0c\u56e0\u4e3a\u6570\u636e\u81a8\u80c0\u5728\u8003\u8651\u5207\u6362\u5230pika\uff0c \u53ef\u662fredis\u662f\u652f\u6301\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u76f4\u63a5\u6307\u5b9a slaveof \u7684\uff0c\u6211\u4eec\u7528\u7684redis\u662f3.0\u3002\n. \u597d\u7684\uff0c\u8c22\u8c22\uff0c\u52a0\u6cb9^^\n. ",
    "lonre": "\ud83d\udc4d \n. ",
    "mazhenyang": "\u673a\u5668\u53ea\u6709\u4e00\u5757\u7f51\u5361\u3002\n. ",
    "life191919": "\u4f60\u597d\uff1a\u80fd\u5c06\u4e3b\u4ece\u7684\u914d\u7f6e\u7b80\u5355\u7c98\u8d34\u4e00\u4e0b\u5417\uff1f\u6211\u76ee\u524d\u53ea\u80fd\u4ece\u547d\u4ee4\u91cc\u9762\u8bbe\u7f6e\u4e3b\u4ece\uff0c\u914d\u7f6e\u6587\u4ef6\u4e0d\u77e5\u9053\u600e\u4e48\u5199\n. \u597d\u7684\uff0c\u8c22\u8c22\uff01\n. \u4e3b\u4ece\u8bbe\u7f6e\u597d\u4e86\u4e4b\u540e\u5982\u679c\u8981\u5173\u95ed\uff0c\u662f\u53ea\u80fd\u91cd\u542f\u670d\u52a1\u5417\uff0c\u662f\u5426\u4e5f\u6709\u547d\u4ee4\u53ef\u4ee5\u5173\u95ed\uff1f\u6211\u8bbe\u7f6e\u4e3b\u4ece\u540e\uff0c\u7136\u540e\u91cd\u542f\u670d\u52a1\uff0c\u518d\u8bbe\u7f6e\u4e3b\u4ece\u53d1\u73b0\u4e00\u76f4\u662fdown\u7684\u72b6\u6001\uff1f\u8fd9\u4e2a\u53ef\u80fd\u662f\u4ec0\u4e48\u539f\u56e0\uff1f\n. W0920 10:29:49.895725 12553 pika_trysync_thread.cc:71] Reply from master after trysync: OK\nW0920 10:29:49.895807 12553 pika_trysync_thread.cc:71] Reply from master after trysync: ERR InvalidOffset\nW0920 10:29:49.895823 12553 pika_trysync_thread.cc:97] something wrong with sync, come in SyncError stage\nW0920 10:29:49.895834 12553 pika_server.cc:475] Sync error, set repl_state to PIKA_REPL_ERROR\n\u6211\u770b\u4e86\u4e00\u4e0b\u65e5\u5fd7\uff0c\u62a5\u8fd9\u4e2a\u9519\u8bef\n. \u54e6\uff0c\u662f\u8fd9\u4e2a\u539f\u56e0\uff0c\u90a3\u6211\u73b0\u5728\u76f4\u63a5\u6e05\u7a7a\u4ece\u7684\u6570\u636e\u5e94\u8be5\u4e5f\u65e0\u6cd5\u540c\u6b65\u4e86\u5427\u3002\u5982\u679c\u6211\u4ee5\u540e\u6570\u636e\u91cf\u5927\u4e86\uff0c\u9700\u8981\u5728\u4e0d\u505c\u6b62\u4e3b\u5e93\u7684\u60c5\u51b5\u52a8\u6001\u589e\u52a0\u4ece\u5e93\uff0c\u662f\u4e0d\u662f\u53ea\u8981\u65b0\u5efa\u4e00\u4e2a\u4ecepika\uff0c\u7136\u540e\u8bbe\u7f6e\u4e3b\u4ece\u540e\u7b49\u5f85\u540c\u6b65\u6570\u636e\u5c31\u53ef\u4ee5\u4e86\uff1f\n. \u597d\u7684\uff0c\u660e\u767d\u4e86\uff0c\u8c22\u8c22\uff01\n. \u4e4b\u524d\u8bf4\u76842.7G\uff0c\u5305\u62ec\u5b89\u88c5\u597d\u540e\u7684third\u8fd9\u4e2a\u76ee\u5f55\uff0c\u6b64\u76ee\u5f55\u5360\u7528\u4e86956M\uff0c\u5176\u4e2d\u4e3b\u8981\u5728nemo\u76ee\u5f55\u4e0b\u9762\u3002\u7136\u540e\u968f\u4fbfset\u51e0\u4e2a\u6570\u503c\u540edb\u76ee\u5f55\u4e0b\u97625\u4e2a\u6587\u4ef6\u5939\u5206\u522b\u5360\u7528300M\u5de6\u53f3\u3002\u5206\u522b\u5728\u6bcf\u4e2a\u76ee\u5f55\u4e0b\u9762\u7684sst\u6587\u4ef6\u540e\u9762\u4f1a\u6709\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u6b64\u6587\u4ef6\u5360\u7528\u7a7a\u95f4\u662f300M\u5de6\u53f3\n. \u597d\u7684\uff0c\u8c22\u8c22\uff01\n. \u600e\u4e48\u770bslave\u7684\u540c\u6b65\u70b9\n. \u5982\u679c\u624b\u52a8\u5220\u9664\u4e86\uff0c\u4f1a\u6709\u4ec0\u4e48\u5f71\u54cd\uff0c\u4e3b\u4ece\u540c\u6b65\u4f1a\u5931\u6548\u5417\uff1f\u8fd8\u9700\u8981\u91cd\u65b0\u505a\u4e00\u6b21\u4e3b\u4ece\u5417\uff1f\n. \u540c\u6b65\u5931\u8d25\u540e\u8fd8\u80fd\u6062\u590d\u5417\uff1f\u8fd8\u662f\u8bf4\u53ea\u80fd\u91cd\u65b0\u518d\u521b\u5efa\u4e00\u53f0\u4ece\u4e86\uff1f\n\u8fd8\u6709\u5c31\u662f\u5982\u4f55\u67e5\u770bslave\u7684\u540c\u6b65\u70b9\uff1f\u4ee5\u53ca\u5982\u679c\u540c\u6b65\u70b9\u6bd4\u8f83\u9760\u524d\u5bfc\u81f4\u524d\u9762\u7684\u6587\u4ef6\u90fd\u6ca1\u6cd5\u81ea\u52a8\u5220\u9664\u7684\u60c5\u51b5\u5982\u4f55\u5904\u7406\uff1f\n. ",
    "toontong": "\u4e3b\u4ece\u4e0d\u80fd\u6b63\u5e38\u540c\u6b65\uff0c\u6211\u6b65\u9aa4\uff1a\n1.  \u673a\u5668\u301010-13-84-10 \u3011\u4e0a\u4f1a\u6709\u591a\u4ebapika\uff0c\u76d1\u542c\u7aef\u53e3\u5206\u522b \u662f 6010\u30016020\u30016030\u3001\n2. \u5173\u95ed 6010\u7684\u8fdb\u7a0b\uff0c\u5e76\u6e05\u7a7a\u914d\u7f6e\u4e2ddatadir\u76ee\u5f55\u4e0b\u6240\u6709\u6570\u636e, \u5305\u62ecdb\u3001log\u76ee\u5f55\u3002\n3. \u76f8\u5f53\u65b0\u542f\u52a8\u4e00\u4e2apika\u8fdb\u7a0b\uff0c\u7136\u540e slaveof \u6307\u5411\u53e6\u4e00\u53f0\u673a\u301010-13-84-13\u3011--\u6b64\u673a\u4e5f\u8dd1\u591a\u4e2apika\uff0c\u7aef\u53e39010\u30019020\u3001\u7b49\u3002\n4. \u7ed3\u679c\uff0ctcp\u8fde\u63a5\u6210\u529f\u540e\uff0c\u62a5ERR InvalidOffset\u9519\uff0c\u53c2\u770b\u4e0b\u9762\u5168\u8d34\u51fa\u6765\u7684\u65e5\u5fd7\u3002\n5. \u65e5\u5fd7\u4e2d\uff0c\u8fd8\u6709\u4e00\u4e2a\u7591\u95ee\uff0c\u6709\u4e00\u53e5\uff1a AccessHandle succeeded, My server id: 38 Master auth server id: 38.\n\u8fd9\u4e2aid\u4e00\u76f4\u5728\u53d8\uff0c\u6b63\u5e38\u5417\uff1fmaster/slave id \u76f8\u7b49\uff0c\u6b63\u5e38\u5417\uff1f\n\u4f7f\u7528\u7248\u672c\u662f\uff1a\n`\nServer\npika_version:3.0.5\npika_git_sha:f02f9e9683dd3ecbfc5723c64e119dc2aeaa725b\npika_build_compile_date: Nov 21 2018\nos:Linux 3.10.0-862.11.6.el7.x86_64 x86_64\narch_bits:64\nprocess_id:16920\ntcp_port:6010\nthread_num:10\nsync_thread_num:6\nuptime_in_seconds:1191\nuptime_in_days:1\nconfig_file:/etc/pika/pika_9010-slave_6010.conf\nserver_id:1\n`\n[root@10-13-84-10 log]# cat pika.INFO\nLog file created at: 2018/12/12 10:54:01\nRunning on machine: 10-13-84-10\nLog line format: [IWEF]mmdd hh:mm:ss.uuuuuu threadid file:line] msg\nI1212 10:54:01.596189 16920 pika.cc:184] Server at: /etc/pika/pika_9010-slave_6010.conf\nI1212 10:54:01.596638 16920 pika_server.cc:192] Using Networker Interface: enp2s0f0\nI1212 10:54:01.596875 16920 pika_server.cc:235] host: 10.13.84.10 port: 6010\nI1212 10:54:01.596946 16920 pika_server.cc:68] Prepare Blackwidow DB...\nI1212 10:54:01.650662 16920 pika_server.cc:73] DB Success\nI1212 10:54:01.650682 16920 pika_server.cc:89] Worker queue limit is 2100\nI1212 10:54:01.651162 16920 pika_binlog.cc:103] Binlog: Manifest file not exist, we create a new one.\nI1212 10:54:01.661379 16920 pika_server.cc:109] double recv info: filenum 0 offset 0\nI1212 10:54:01.663250 16920 pika_server.cc:336] Pika Server going to start\nI1212 10:54:04.663343 16938 pika_trysync_thread.cc:235] Should connect master\nI1212 10:54:04.663750 16938 pika_trysync_thread.cc:245] Connect to master ip:10.13.84.13 port: 9010\nI1212 10:54:04.667872 16938 pika_trysync_thread.cc:259] Finish to start rsync, path:/disk/ssd/pika-cluster/6010/dbsync/\nI1212 10:54:05.668093 16938 pika_trysync_thread.cc:267] rsync successfully started, address:10.13.84.10:9010\nI1212 10:54:05.668171 16938 pika_trysync_thread.cc:66] *5\n$7\ntrysync\n$11\n10.13.84.10\n$4\n6010\n$1\n0\n$1\n0\nW1212 10:54:05.668387 16938 pika_trysync_thread.cc:91] Reply from master after trysync: wait\nI1212 10:54:05.668512 16938 pika_trysync_thread.cc:114] Need wait to sync\nI1212 10:54:07.668722 16938 pika_trysync_thread.cc:176] Information from dbsync info. master_ip: 10.13.84.13, master_port: 9010, filenum: 19, offset: 92015865\nI1212 10:54:07.692994 16938 pika_server.cc:429] Prepare change db from: /disk/ssd/pika-cluster/6010/db_bak\nI1212 10:54:07.722394 16938 pika_server.cc:446] Change db success\nI1212 10:54:07.843099 16938 pika_trysync_thread.cc:227] Success Update Master Offset\nI1212 10:54:09.843207 16938 pika_trysync_thread.cc:235] Should connect master\nI1212 10:54:09.843516 16938 pika_trysync_thread.cc:245] Connect to master ip:10.13.84.13 port: 9010\nI1212 10:54:09.847259 16938 pika_trysync_thread.cc:259] Finish to start rsync, path:/disk/ssd/pika-cluster/6010/dbsync/\nI1212 10:54:10.847499 16938 pika_trysync_thread.cc:267] rsync successfully started, address:10.13.84.10:9010\nI1212 10:54:10.847564 16938 pika_trysync_thread.cc:66] *5\n$7\ntrysync\n$11\n10.13.84.10\n$4\n6010\n$2\n19\n$8\n92015865\nW1212 10:54:10.847898 16938 pika_trysync_thread.cc:91] Reply from master after trysync: 9\nI1212 10:54:10.847952 16938 pika_trysync_thread.cc:102] Recv sid from master: 9\nI1212 10:54:10.847960 16938 pika_trysync_thread.cc:280] Open write-binlog mode\nI1212 10:54:10.872125 16938 pika_trysync_thread.cc:289] Trysync success\nI1212 10:54:10.872254 16977 pika_slaveping_thread.cc:25] *2\n$4\nspci\n$1\n9\nI1212 10:54:12.848114 16936 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.13.84.13 connecting\nI1212 10:54:12.848155 16936 pika_server.cc:678] Master-Slave connection established successfully\nI1212 10:54:12.848173 16936 pika_binlog_receiver_thread.h:56] Master conn factory create pika new master conn\nI1212 10:54:12.848212 16936 pika_new_master_conn.cc:258] BinlogReceiverThread AccessHandle succeeded, My server id: 9 Master auth server id: 9\nI1212 10:57:02.425243 16925 pika_admin.cc:92] Start slaveof, stop rsync first\nI1212 10:57:02.897114 16977 pika_slaveping_thread.cc:63] Close Slaveping Thread now\nI1212 10:57:07.884256 16938 pika_trysync_thread.cc:235] Should connect master\nI1212 10:57:07.884498 16938 pika_trysync_thread.cc:245] Connect to master ip:10.13.84.13 port: 9020\nI1212 10:57:07.888563 16938 pika_trysync_thread.cc:259] Finish to start rsync, path:/disk/ssd/pika-cluster/6010/dbsync/\nI1212 10:57:08.888773 16938 pika_trysync_thread.cc:267] rsync successfully started, address:10.13.84.10:9010\nI1212 10:57:08.888823 16938 pika_trysync_thread.cc:66] *5\n$7\ntrysync\n$11\n10.13.84.10\n$4\n6010\n$2\n19\n$8\n92015939\nW1212 10:57:08.889118 16938 pika_trysync_thread.cc:91] Reply from master after trysync: 38\nI1212 10:57:08.889256 16938 pika_trysync_thread.cc:102] Recv sid from master: 38\nI1212 10:57:08.889282 16938 pika_trysync_thread.cc:280] Open write-binlog mode\nI1212 10:57:08.913131 16938 pika_trysync_thread.cc:289] Trysync success\nI1212 10:57:08.913257 16992 pika_slaveping_thread.cc:25] *2\n$4\nspci\n$2\n38\nI1212 10:57:10.889310 16936 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.13.84.13 connecting\nI1212 10:57:10.889395 16936 pika_server.cc:678] Master-Slave connection established successfully\nI1212 10:57:10.889413 16936 pika_binlog_receiver_thread.h:56] Master conn factory create pika new master conn\nI1212 10:57:10.889454 16936 pika_new_master_conn.cc:258] BinlogReceiverThread AccessHandle succeeded, My server id: 38 Master auth server id: 38\nI1212 11:00:07.833597 16927 pika_admin.cc:92] Start slaveof, stop rsync first\nI1212 11:00:07.938637 16992 pika_slaveping_thread.cc:63] Close Slaveping Thread now\nI1212 11:00:12.926740 16938 pika_trysync_thread.cc:235] Should connect master\nI1212 11:00:12.926983 16938 pika_trysync_thread.cc:245] Connect to master ip:10.13.84.13 port: 9010\nI1212 11:00:12.931593 16938 pika_trysync_thread.cc:259] Finish to start rsync, path:/disk/ssd/pika-cluster/6010/dbsync/\nI1212 11:00:13.931816 16938 pika_trysync_thread.cc:267] rsync successfully started, address:10.13.84.10:9010\nI1212 11:00:13.931913 16938 pika_trysync_thread.cc:66] *5\n$7\ntrysync\n$11\n10.13.84.10\n$4\n6010\n$2\n22\n$8\n69832015\nW1212 11:00:13.932193 16938 pika_trysync_thread.cc:91] Reply from master after trysync: ERR InvalidOffset\nW1212 11:00:13.932263 16938 pika_trysync_thread.cc:117] Connect to master error: ERR InvalidOffset\nW1212 11:00:13.932287 16938 pika_trysync_thread.cc:123] something wrong with sync, come in SyncError stage\nW1212 11:00:13.932308 16938 pika_server.cc:708] Sync error, set repl_state to PIKA_REPL_ERROR\nI1212 11:03:13.902215 16925 pika_admin.cc:92] Start slaveof, stop rsync first\nI1212 11:03:15.943832 16938 pika_trysync_thread.cc:235] Should connect master\nI1212 11:03:15.944048 16938 pika_trysync_thread.cc:245] Connect to master ip:10.13.84.13 port: 9020\nI1212 11:03:15.948702 16938 pika_trysync_thread.cc:259] Finish to start rsync, path:/disk/ssd/pika-cluster/6010/dbsync/\nI1212 11:03:16.948953 16938 pika_trysync_thread.cc:267] rsync successfully started, address:10.13.84.10:9010\nI1212 11:03:16.949014 16938 pika_trysync_thread.cc:66] *5\n$7\ntrysync\n$11\n10.13.84.10\n$4\n6010\n$2\n22\n$8\n69832015\nW1212 11:03:16.949944 16938 pika_trysync_thread.cc:91] Reply from master after trysync: 39\nI1212 11:03:16.950016 16938 pika_trysync_thread.cc:102] Recv sid from master: 39\nI1212 11:03:16.950027 16938 pika_trysync_thread.cc:280] Open write-binlog mode\nI1212 11:03:16.974475 16938 pika_trysync_thread.cc:289] Trysync success\nI1212 11:03:16.974599 17086 pika_slaveping_thread.cc:25] *2\n$4\nspci\n$2\n39\nI1212 11:03:18.950165 16936 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.13.84.13 connecting\nI1212 11:03:18.950232 16936 pika_server.cc:678] Master-Slave connection established successfully\nI1212 11:03:18.950246 16936 pika_binlog_receiver_thread.h:56] Master conn factory create pika new master conn\nI1212 11:03:18.950279 16936 pika_new_master_conn.cc:258] BinlogReceiverThread AccessHandle succeeded, My server id: 39 Master auth server id: 39\nI1212 11:06:15.319440 16933 pika_admin.cc:92] Start slaveof, stop rsync first\nI1212 11:06:16.000030 17086 pika_slaveping_thread.cc:63] Close Slaveping Thread now\nI1212 11:06:20.987421 16938 pika_trysync_thread.cc:235] Should connect master\nI1212 11:06:20.987643 16938 pika_trysync_thread.cc:245] Connect to master ip:10.13.84.13 port: 9010\nI1212 11:06:20.992214 16938 pika_trysync_thread.cc:259] Finish to start rsync, path:/disk/ssd/pika-cluster/6010/dbsync/\nI1212 11:06:21.992449 16938 pika_trysync_thread.cc:267] rsync successfully started, address:10.13.84.10:9010\nI1212 11:06:21.992501 16938 pika_trysync_thread.cc:66] *5\n$7\ntrysync\n$11\n10.13.84.10\n$4\n6010\n$2\n22\n$8\n69832236\nW1212 11:06:21.992713 16938 pika_trysync_thread.cc:91] Reply from master after trysync: ERR InvalidOffset\nW1212 11:06:21.992813 16938 pika_trysync_thread.cc:117] Connect to master error: ERR InvalidOffset\nW1212 11:06:21.992847 16938 pika_trysync_thread.cc:123] something wrong with sync, come in SyncError stage\nW1212 11:06:21.992869 16938 pika_server.cc:708] Sync error, set repl_state to PIKA_REPL_ERROR. \u540c\u4e00\u65f6\u95f4\uff0cmaster\u65e5\u5fd7\u3002\n\u867d\u7136\u65e5\u5fd7\u4e0a\u89e3\u91ca\u5f88\u6e05\u695a\uff0cslave\u7684\u65e5\u5fd7\u504f\u79fb\u5927\u4e8emaster\uff0c\u4f46\u6211slave \u662f\u65b0\u542f\u52a8\u7684\uff0c\u600e\u4e48\u53ef\u80fd\u65e5\u5fd7\u504f\u79fb\u503c \u5927\u4e8emaster\uff1f\uff1f\n\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u6211\u5220\u9664datadir\u76ee\u5f55\uff0c\u90fd\u4e0d\u80fd\u4f7f\u65e5\u5fd7\u504f\u79fb\u91cd\u7f6e0\uff1f flushall \u4e5f\u4e0d\u884c\u3002\nI1212 11:00:13.943833   663 pika_admin.cc:175] Trysync, Slave ip: 10.13.84.10 Slave port:6010 filenum: 22 pro_offset: 69832015\nI1212 11:00:13.943889   663 pika_server.cc:497] Add new slave, 10.13.84.10:6010\nW1212 11:00:13.943903   663 pika_admin.cc:200] slave offset is larger than mine, slave ip: 10.13.84.10 slave port: 6010 filenum: 22 pro_offset_: 69832015\nI1212 11:06:22.004318   664 pika_admin.cc:175] Trysync, Slave ip: 10.13.84.10 Slave port:6010 filenum: 22 pro_offset: 69832236\nI1212 11:06:22.004367   664 pika_server.cc:497] Add new slave, 10.13.84.10:6010\nW1212 11:06:22.004380   664 pika_admin.cc:200] slave offset is larger than mine, slave ip: 10.13.84.10 slave port: 6010 filenum: 22 pro_offset_: 69832236. > \u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u6709\u4e00\u9879\u662flog-path\uff0c \u8fd9\u4e2a\u662f\u65e5\u5fd7\u7684\u8def\u5f84\uff0c\u5220db\u76ee\u5f55\u662f\u6ca1\u7528\u7684\n\u6211\u8868\u8fbe\u4e0d\u591f\u5b8c\u6574\uff0c\u6211\u628a3\u4e2a\u76ee\u5f55\uff1adb\uff0cdbsync\uff0clog \u5168\u5220\u9664\u4e86\u3002\n\u5e76\u4e14\u9ebb\u70e6\u8be6\u7ec6\u770b\u4e00\u4e0b\u65e5\u5fd7\uff1a\"pika_server.cc:109] double recv info: filenum 0 offset 0 I1212 10:54:01.663250 16920 \"\nslalve\u6253\u5370\u51fa offset\uff1a0\u4e86\uff0c\u521a\u542f\u52a8\u65f6\u3002  \u65b9\u4fbfIM\u6c9f\u901a\u4e00\u4e0b\u5417. \n\u8d34\u4e00\u5e45\u56fe\u8bf4\u660e\u4e00\u4e0b\u7ed3\u679c \u3002\n\u8865\u5145\u56fe2\uff1a pika \u7248\u672c\uff0c\u662f\u76f4\u63a5\u4e0b\u8f7drc\u9875\u7684bin\u7f16\u8bd1\u7248\u672c\u3002\n\n. ",
    "Axlgrep": "\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u6709\u4e00\u9879\u662flog-path\uff0c \u8fd9\u4e2a\u662f\u65e5\u5fd7\u7684\u8def\u5f84\uff0c\u5220db\u76ee\u5f55\u662f\u6ca1\u7528\u7684. \u53ef\u4ee5\u76f4\u63a5\u5728\u6211\u4eec\u7684QQ\u7fa4\u91cc\u4ea4\u6d41\uff0c \u7fa4\u53f7:294254078. \u8fd9\u91cc\u5e94\u8be5\u662f\u5bf9\u5e94\u4e8e\u4e0b\u9762\u7684ip != g_pika_server->host()\u90a3\u4e2a\u5224\u65ad, \u5982\u679c\u8fde\u63a5\u91cf\u6570\u91cf\u5df2\u7ecf\u8fbe\u5230\u4e86maxclients\u4e0a\u7ebf\uff0c\u8fd8\u662f\u5141\u8bb8\u672c\u673a\u4e0a\u7684\u51e0\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5\u4e0apika\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u5bf9\u5e94\u4e8eroot_connection\uff0c\u4e0d\u8fc7\u597d\u50cf\u6ca1\u5fc5\u8981\u76f4\u63a5\u628aip\u7684\u503c\u7ed9\u53d8\u4e86\uff0c \u76f4\u63a5\u5728\u4e0b\u9762\u505a\u5224\u65ad\u5c31\u53ef\u4ee5\u4e86. #275 done. \u76ee\u524d\u6211\u4eec\u65b0\u7684\u5f15\u64ce\u4e0a\u5e76\u6ca1\u6709\u6253\u7b97\u52a0\u5165blpop,  \u8fd9\u4e2a\u8fd8\u9700\u540e\u671f\u8c03\u7814. done. \u9ed1\u540d\u5355\u662f\u751f\u6548\u7684\uff0c \u4f46\u662f\u4f1a\u5b58\u5728\u533a\u5206\u5927\u5c0f\u5199\u7684\u95ee\u9898\uff0c \u4e0d\u8fc7\u6700\u65b0\u7684\u7248\u672c\u6211\u4eec\u5df2\u7ecf\u4fee\u590d\u4e86\uff0c userblacklist\u4e0d\u518d\u533a\u5206\u5927\u5c0f\u5199. \u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u6709requirepass\u548cuserpass, \u5982\u679c\u4f60\u4f7f\u7528requirepass\u767b\u5f55\u7684\u8bdd\uff0c\u662f\u4e0d\u53d7userblacklist\u7684\u9650\u5236\u7684\u3002. 1. \u6211\u4eec2.3.3\u7684\u7248\u672c\u662f\u6709\u95ee\u9898\u7684\uff0cuserblacklist\u662f\u4f1a\u533a\u5206\u5927\u5c0f\u5199\uff0c \u8fd9\u4e2a\u95ee\u9898\u6211\u4eec\u5df2\u7ecf\u4fee\u590d\u4e86\uff0c \u4f60\u53ef\u4ee5\u83b7\u53d6\u6700\u65b0\u7684\u7248\u672c\u81ea\u5df1\u7f16\u8bd1\u4f7f\u7528\n2. \u4f60\u53ef\u4ee5\u7406\u89e3\u7528requirepass\u767b\u5f55\u662froot\u6743\u9650\uff0c \u7528userpass\u767b\u5f55\u662f\u666e\u901a\u6743\u9650(\u53d7userblacklist\u9650\u5236). \u5e76\u4e0d\u662f\u6bcf\u4e2aDel\u547d\u4ee4\u90fd\u4f1a\u89e6\u53d1compact\uff0c Pika\u5e95\u5c42\u91c7\u7528rocksdb\u4f5c\u4e3a\u5b58\u50a8\u5f15\u64ce\uff0c \u5f53rocksdb\u7684\u67d0\u4e00Level\u7684sst\u6587\u4ef6\u4e2a\u6570\u8fbe\u5230\u4e00\u5b9a\u7684\u6570\u91cf\u7684\u65f6\u5019\u624d\u4f1a\u89e6\u53d1compact.. \u540e\u7eed\u4f1a\u652f\u6301\u7684. @oldcai \u4f1a\u52a0\u7684. \u6211\u4eecPika\u5c06\u8981\u6362\u4e0a\u65b0\u7684\u5f15\u64ce\u4e86\uff0c \u5230\u65f6\u5019\u5c31\u4e0d\u4f1a\u5b58\u5728nemo, nemo-rocksdb\u90fd\u4f9d\u8d56rocksdb\u7684\u95ee\u9898\u4e86. \u4f60\u7528\u7684\u662f\u54ea\u4e2a\u7248\u672c\u7684pika, \u4e4b\u524dPika\u51fa\u73b0\u8fc7\u4f60\u8bf4\u7684\u8fd9\u4e2a\u95ee\u9898\uff0c\u5bf9\u5176\u8fdb\u884c\u8fc7\u4fee\u590d. \u597d\uff0c \u6211\u4eec\u770b\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898. \u55ef\uff0c\u76ee\u524d\u662f\u4e0d\u652f\u6301\u7684\uff0c Wiki\u7684\u62fc\u5199\u9519\u8bef\u5df2\u7ecf\u6539\u8fc7\u6765\u4e86. \u4f1a\u843d\u76d8\u7684\uff0c \u5177\u4f53\u903b\u8f91\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0bpika\u4e0btools\u76ee\u5f55\u91cc\u9762\u7684\u6e90\u7801. \u6570\u636e\u91cf\u5927\u7684\u8bdd\uff0c \u7531\u4e8erocksdb\u4f1a\u505acompact\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u5199\u5165\uff0c \u4f46\u662f\u8fd9\u4e2a\u5dee\u8ddd\u786e\u5b9e\u6709\u70b9\u5927\uff0c \u662f\u4e0d\u662f\u4e00\u5343\u591a\u4e07\u6761\u6570\u636e\u4e2d\u6709\u5927\u91cf\u91cd\u590d\u7684key\uff0c \u5bfc\u81f4\u591a\u7ebf\u7a0b\u4e4b\u95f4\u9501\u62a2\u5360\u5360\u7528\u4e86\u65f6\u95f4\uff1f. \u76ee\u524d\u6682\u65f6\u4e0d\u652f\u6301\u8fd9\u4e2a\u529f\u80fd. \u662f\u4e0d\u662f\u8bbe\u7f6e\u4e86\u5b9a\u65f6\u4efb\u52a1\u6bcf\u5929\u8fd9\u4e2a\u70b9\u5728\u505acompact?. \u6b63\u5728\u66f4\u65b0wiki, \u53ef\u4ee5\u770b\u4e00\u4e0b\u554a. Pika\u9664\u4e86\u4f1a\u76d1\u542c\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u63a5\u6536\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u7aef\u53e3\uff0c \u8fd8\u4f1a\u76d1\u542c\u8be5\u7aef\u53e3\u53f7+1000\u7684\u7aef\u53e3\u53f7, \u548c\u8be5\u7aef\u53e3\u53f7+2000\u7684\u7aef\u53e3\u53f7\uff0c\u7528\u4f5c\u5185\u90e8binlog\u7684\u63a5\u6536\u548c\u7ef4\u6301\u5fc3\u8df3. \u55ef. Pika\u652f\u6301\u54e8\u5175. \u6211\u4eec\u7528QQ\u4ea4\u6d41\u7fa4\uff1a 294254078. \u8fd9\u4e2a\u5e94\u8be5\u662f\u4f60pika\u4e0a\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u5df2\u7ecf\u8fbe\u5230\u4e0a\u9650\u4e86\uff0c \u4f60\u53ef\u4ee5\u6267\u884cinfo clients\u770b\u4e00\u4e0bpika\u5f53\u524d\u7684\u8fde\u63a5\u91cf\u662f\u591a\u5c11\uff0c \u8fd9\u4e2a\u4e0a\u9650\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8fdb\u884c\u4fee\u6539. \u6211\u4eec\u81ea\u5df1\u6ca1\u6709\u63a8\u51fa\u8fd9\u79cd\u5de5\u5177\uff0c \u4f46\u662f\u6709\u4eba\u7528open falcon \u6536\u96c6\u6570\u636e\uff0cgrafana \u51fa\u76d1\u63a7\u56fe\u8868\uff0c \u5177\u4f53\u7684\u4f7f\u7528\u65b9\u5f0f\u53ef\u4ee5\u5728\u6211\u4eecPika\u7684\u6280\u672f\u4ea4\u6d41\u7fa4\u91cc\u95ee\u95ee. \u4f60\u8fd9\u4e2a\u5e94\u8be5\u662f\u6709\u5176\u4ed6\u7684pika\u8fdb\u7a0b\u6301\u6709\u4e86\u8fd9\u4e2adb\u6ca1\u6709\u5173\u95ed\u5427. \u6790\u6784\u51fd\u6570\u90a3\u91cc\u4e24\u4e2a\u7a7a\u683c\u7684\u7f29\u8fdb\uff0c \u6539\u4e00\u4e0b\u5427. \u53ef\u4ee5\u770b\u4e00\u4e0bPikaServer::ClientList(std::vector *clients)\u65b9\u6cd5\uff0c\u5982\u679c\u6ca1\u6709\u4f20\u53c2\u7684\u8bdd\u662f\u4e0d\u4f1a\u83b7\u53d6client list\u7684\uff0c \u53ea\u662f\u7b80\u5355\u7684\u8fd4\u56de\u6570\u91cf. \u4e4b\u6240\u4ee5\u4e0d\u76f4\u63a5\u8fd4\u56declient list\u800c\u662f\u901a\u8fc7\u4f20\u5165\u6307\u9488\u7684\u65b9\u5f0f\u83b7\u53d6client list\u662f\u4e3a\u4e86\u51cf\u5c11\u5185\u5b58\u62f7\u8d1d\uff0c\u8fd4\u56de\u503c\u8868\u793aclient list\u7684\u6570\u91cf\u4e5f\u672a\u5c1d\u4e0d\u53ef\u554a. Tell me the detailed scenario in pika technology exchange group. qq exchange group 294254078. @527593036 \u91cd\u65b0\u4e0b\u8f7d\u4e00\u4e0b3.0.2\u7684\u5305\uff0c \u6211\u4eec\u4e4b\u524d\u7684\u90a3\u4e2a\u5305\u6709\u70b9\u95ee\u9898\uff0c \u91cd\u65b0\u6253\u4e86\u4e00\u4e2a. \u76ee\u524d\u6211\u4eec\u63d0\u4f9b\u4e86\u5de5\u5177\u5c06pika\u7684\u6570\u636e\u5bfc\u51fa\u5230redis, \u4f46\u662f\u4e0d\u652f\u6301\u540c\u6b65\u589e\u91cf\u6570\u636e\u5230hbase\u6216\u8005\u5176\u4ed6nosql\u7cfb\u7edf\uff0c\u53e6\u5916pika\u7684binlog\u548credis\u4e5f\u4e0d\u662f\u517c\u5bb9\u7684.... We followed your description, but did not appear the problem you said, can you contact us in our qq technology exchange group (294254078). becase pika3.0 replace the storage engine, So the old versions of pika_to_txt are no longer compatible,  we will release the new version of pika_to_txt as soon as possible. https://github.com/Qihoo360/pika/wiki/\u8fc1\u79fbString\u7c7b\u578b\u6570\u636e\u5230txt\u6587\u672c. \u7528\u7684Pika\u662f\u4ec0\u4e48\u7248\u672c\uff0c\u7528\u7684\u65f6\u5019Pika\u5f00\u4e86\u51e0\u4e2a\u7ebf\u7a0b\uff1f. \u6539\u6210\u591a\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u4e86\uff0c rpush\u5e76\u4e0d\u662f\u5931\u8d25\u4e86\uff0c\u800c\u662f\u9700\u8981\u7b49\u5230\u524d\u9762\u90a3\u4e2akeys\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\u624d\u8f6e\u5230\u5b83\u6267\u884c. \u66f4\u65b0\u4e00\u4e0bsnappy\uff0c\u7136\u540e\u91cd\u65b0\u7f16\u8bd1\u4e00\u4e0b\u8bd5\u8bd5. \u76ee\u524d\u4e0d\u652f\u6301. @koolhazz \u80fd\u5426\u63d0\u4f9b\u5177\u4f53\u7684\u590d\u73b0\u6b65\u9aa4\uff1f. #388  fixed. contact me in the QQ technology exchange group.. \u6211\u4eec\u770b\u4e00\u4e0b\n. \u786e\u8ba4\u95ee\u9898\u4e86\uff0c binlog\u89e3\u6790\u6709\u95ee\u9898\uff0c \u6211\u4eec\u4fee\u590d\u4e00\u4e0b. \u4ec0\u4e48\u7248\u672c\u7684, \u6bcf\u6b21\u6267\u884czrevrange\u90fd\u6162\u4e48\uff0c \u8fd9\u4e2a128.15s\u5f88\u5938\u5f20\u554a.... \u4f60\u505a\u4e00\u6b21compact\u4e4b\u540e\u7136\u540ezrange\u548czrevrange\u76f8\u540c\u533a\u95f4\u7684\u5143\u7d20\uff0c\u770b\u4f1a\u4e0d\u4f1a\u597d\u4e00\u70b9\uff1f. #413 \u4fee\u6539\u4e86zrevrange\u7684\u884c\u4e3a. \u9700\u8981\u5b89\u88c5\u4e00\u4e0bglog. ldd\u770b\u4e00\u4e0b\uff0c \u5b89\u88c5\u6210\u529f\u4e4b\u540e\u91cd\u65b0\u7f16\u8bd1Pika\u4e86\u5417\uff1f. make distclean \u7136\u540e\u518d make,  \u8fd8\u6709\u95ee\u9898\u5728\u7fa4\u91cc\u95ee\u5427\uff0c \u7fa4\u53f7: 294254078. \u4f60\u88c5\u4e00\u4e2agflags\u5c31\u884c\u4e86.... \u90a3\u4f60\u53bb/usr/include\u548c/usr/local/include\u4e0b\u627e\u4e00\u4e0b\u6709\u6ca1\u6709gflags\u7684\u5934\u6587\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\u518d\u91cd\u88c5\u4e00\u904d\u8bd5\u4e00\u4e0b. \u540e\u7eed\u4f1a\u652f\u6301\u96c6\u7fa4\u6a21\u5f0f\uff0c \u4f46\u662f\u4e0d\u4e00\u5b9a\u517c\u5bb9Redis3.0. \u89e3\u4e00\u4e0b\u51b2\u7a81\uff0c \u8fd8\u6709\u76f4\u63a5\u8c03\u7528AppendString()\u5c31\u53ef\u4ee5\u4e86, \u4e0d\u9700\u8981\u5148AppendStringLen(). \u4e0d\u662f\u5df2\u7ecf\u5408\u4e86\u4e48\uff1f. db_size_human\u4ee5MB\u4e3a\u5355\u4f4d\uff0c\u4f60\u8fd9\u4e2a\u4e0d\u52301MB\uff0c\u5c31\u76f4\u63a5\u5c55\u793a0\u4e86. \u652f\u6301. Pika\u4e0d\u80fd\u76f4\u63a5\u8bbe\u7f6e\u4f7f\u7528\u5185\u5b58\u7684\u4e0a\u9650\uff0c \u4f46\u662f\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539write-buffer-size\uff0cmaxclients\u7b49\u53c2\u6570\uff0c\u95f4\u63a5\u7684\u63a7\u5236\u5185\u5b58\u4f7f\u7528\u91cf. Pika\u5185\u5b58\u4f7f\u7528\u5927\u4f53\u5206\u4e3a\u4e24\u7c7b\uff0c\u4e00\u7c7b\u662fMemtable/Immutable memtable\u4ee5\u53ca\u5404\u79cdCache\u5360\u7528\u7684\u5185\u5b58\uff0c\u53e6\u5916\u4e00\u79cd\u662fPika\u4e3a\u6bcf\u6761\u8fde\u63a5\u5206\u914d\u7684\u8bfb\u5199\u7f13\u51b2\u533a\uff0c\u6211\u4eec\u5185\u90e8\u4f7f\u7528write-buffer-size\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c \u8fde\u63a5\u91cf\u4e0d\u52301000\uff0c100\u591aGB\u7684Pika\u5b9e\u4f8b\uff0c\u4e00\u822c\u4f7f\u75287GB\u5de6\u53f3\u7684\u5185\u5b58\uff0c \u4f60\u53ef\u4ee5\u9884\u4f30\u4e00\u4e0b\u4f60\u7684\u6570\u636e\u91cf. Pika\u5e95\u90e8\u91c7\u7528\u7684\u5b58\u50a8\u5f15\u64ce\u662fRocksdb\uff0c \u4f60\u53ef\u4ee5\u4e86\u89e3\u4e00\u4e0bRocksdb. #457 . \u53ef\u80fd\u662f\u4e00\u6b21\u5199\u5165\u7684\u6570\u636e\u8fbe\u5230\u7684Pika\u4e3a\u4e00\u6761\u8fde\u63a5\u5206\u914d\u7684\u8bfb\u7f13\u51b2\u533a\u4e0a\u9650\uff0c\u65ad\u8fde\u4e86\uff0c \u5728pika/third/pink/pink/include/pink_define.h\u4e2d\u5c06REDIS_MAX_MESSAGE\u7684\u503c\u8c03\u5927\u4e00\u70b9\u91cd\u65b0\u7f16\u8bd1\u8bd5\u4e00\u4e0b. \u6211\u4eec\u5185\u90e8\u4f1a\u8ba8\u8bba\u4e00\u4e0b\u8fd9\u4e2a\u9700\u6c42. @g3ne \u76ee\u524d\u6b63\u5728\u5bf9\u540c\u6b65\u6d41\u7a0b\u8fdb\u884c\u68b3\u7406\u6539\u9020\uff0c\u540e\u7eed\u8fd9\u4e2a\u95ee\u9898\u4f1a\u89e3\u51b3. redis-copy\u786e\u5b9e\u4e0d\u652f\u6301redis\u65e0\u5bc6\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528aof_to_pika. \u7528\u7684\u4ec0\u4e48\u5ba2\u6237\u7aef\uff0c \u662f\u4e0d\u662f\u8d85\u65f6\u8fde\u63a5\u65ad\u5f00\u4e86\uff1f. \u7528\u5ba2\u6237\u7aef\u6267\u884c\u547d\u4ee4\u4e4b\u524d\u5982\u679c\u7531\u4e8e\u8fde\u63a5\u65ad\u5f00\uff0c\u5ba2\u6237\u7aef\u4f1a\u6709\u91cd\u8fde\u673a\u5236\u4e48\uff1f. \u770b\u4e0a\u53bb\u662fRocksdb\u4e2dPosixRandomAccessFile\u6790\u6784\u7684\u65f6\u5019\u51fa\u73b0\u7684\u95ee\u9898\uff0c\u4f60\u8fd9\u4e2a\u95ee\u9898\u662f\u5076\u73b0\u8fd8\u662f\u5fc5\u73b0\uff1f. \u5c1d\u8bd5\u7528\u4e00\u4e0b\u6211\u4eec\u53d1\u5e03\u7684\u4e8c\u8fdb\u5236\u5462\uff0c \u56e0\u4e3a\u5f88\u591a\u5305\u6211\u4eec\u90fd\u662f\u9759\u6001\u6253\u8fdb\u53bb\u7684\uff0c\u53d7\u4f60\u4eec\u73af\u5883\u5f71\u54cd\u4f1a\u5c0f\u4e00\u70b9. \u4e0b\u6b21\u5f00coredump\u89c2\u5bdf\u4e00\u4e0b. \u53ef\u4ee5\u81ea\u5df1\u7528strip\u547d\u4ee4\u5c06\u8c03\u8bd5\u4fe1\u606f\u548c\u7b26\u53f7\u4fe1\u606f\u53bb\u6389. 1.  If you have four large hash tables, they can also take up a lot of disk space\n2. from the info, Pika is performing a compact operation, this can also result in some additional disk space usage, you can wait for compact to finish before watch disk usage. \u6570\u636e\u6709\u8bbe\u7f6e\u8fc7\u671f\u4e48. \u5728QQ\u7fa4\u91cc\u6c9f\u901a\u5427. \u76ee\u524d\u6ca1\u6709. not exactly\uff0cit depends on your usage scenario. info keyspace\u662f\u5f02\u6b65\u7edf\u8ba1\uff0c \u4f60\u7edf\u8ba1\u6570\u636e\u7684\u65f6\u5019\u505c\u5199\u4e86\u4e48\uff1f. Pika\u7684\u7248\u672c\u53f7\uff0c \u6570\u636e\u662f\u5426\u5e26\u6709TTL\uff0c\u8fd8\u6709\u662f\u5426\u662f\u5168\u540c\u6b65\uff1f. \u4f46\u662f\u4f60\u4e3b\u5e93\u7684info keyspace\u662f\u663e\u793a\u6709\u5e26\u6709\u8fc7\u671f\u5c5e\u6027Key\u7684. \u53ef\u4ee5\u5148\u770b\u770b\u6211\u4eec\u7684wiki. wiki\u91cc\u9762\u6709\u4ecb\u7ecd. glog\u9700\u8981\u81ea\u5df1\u5b89\u88c5. \u597d. \u8fd9\u4e2a\u662f\u4e0d\u662f\u591a\u4f59\u7684\u5440\uff1f. ",
    "yunfan": "\u611f\u8c22\u6dfb\u52a0 \u4f46\u6587\u4e2d git clone git@github.com:Qihoo360/pika \u8fd9\u4e00\u6bb5\u5728\u6211\u8fd9\u91cc\u662f\u8d70\u4e0d\u901a\u7684 \u9700\u8981\u6539\u4e3a git clone https://github.com/Qihoo360/pika \u671b\u66f4\u6b63\n\u53e6\u5916\u4f60\u4eec\u7684\u4ed3\u5e93\u4e5f\u592a\u5927\u4e86\n. thank you very much . ",
    "joostshao": "\u5efa\u8bae\u6bcf\u6b21release\u7684\u65f6\u5019\uff0c\u5305\u62ecdebian lts\u7248\u672c\u7684deb\u5305\uff0c \u8fd9\u6837\u5c31\u7701\u53bb\u4e86\u81ea\u5df1\u7f16\u8bd1\u7684\u65f6\u95f4\uff0c\u867d\u7136\u7f16\u8bd1\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u4f46\u662fdebian\u5bf9\u4e8e\u90e8\u7f72\u7684\u65f6\u5019\u786e\u5b9e\u5f88\u9ebb\u70e6\u3002\n\u6240\u4ee5\u5efa\u8baerepo\u91cc\u9762\u6dfb\u52a0package\u7684\u811a\u672c\uff0c\u7c7b\u4f3cor\u6700\u65b0\u7684\u6253\u5305 https://github.com/openresty/openresty-packaging\n. +1. ",
    "gaodq": "Done.. WIP #207 . Done.\nhttps://github.com/Qihoo360/pika/releases/tag/v2.3.0. Working in branch upgrade_pink. \u8fd9\u662f\u54ea\u4e2a\u7248\u672c\u7684pika\uff0c\u6267\u884c\u4e0bsubmodule update\u5c06submodule\u66f4\u65b0\u5230\u76f8\u5e94\u7248\u672c\u8bd5\u8bd5. @Greking \u5982\u679c\u76f4\u63a5\u7528\u4e8c\u8fdb\u5236\u5c31\u4e0d\u7528\u5b89\u88c5\u5f00\u53d1\u5305\u4e86\uff0cDokerfile\u6211\u4fee\u6539\u4e86\u4e0b\uff0c\u53ef\u4ee5\u81ea\u5df1\u6784\u5efa\u955c\u50cf\u4e86\u3002. @cuixin \u8fd9\u4e2a\u5e94\u8be5\u662frocksdb\u6ca1\u7528\u6700\u65b0\u7248gcc\u7f16\u8fc7. gdb\u62a5\u9519\u5728pink\u7684src/redis_conn.cc:328\u884c\uff0c\u4f46\u5185\u5bb9\u4e0d\u6b63\u5e38\uff0c\u6000\u7591\u662fpink submodule\u6ca1\u6709\u66f4\u65b0\u5230\u54cd\u5e94\u7684\u7248\n\u672c\uff0c\u5728pika\u76ee\u5f55\u4e0b\nmake distclean\ngit submodule update\nmake\n\u91cd\u65b0\u7f16\u8bd1\u4e00\u4e0b\u8bd5\u8bd5\n\u6216\u8005\u76f4\u63a5\u4f7f\u7528\u6211\u4eec\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\uff0c\u6216\u8005docker\u955c\u50cf\uff0c\u5728release\u91cc\u53ef\u4ee5\u4e0b\u8f7d. #166 \n204 . #166\n204 . https://github.com/Qihoo360/pika/wiki/pika\u7684\u4e00\u4e9b\u7ba1\u7406\u547d\u4ee4\u65b9\u5f0f\u8bf4\u660e#info-keyspace\n\u53c2\u8003\u4e00\u4e0b\u8fd9\u4e2awiki\uff0cinfo keyspace\u7684\u7528\u6cd5. We are not going to support cmake, you can have a try and submit a PR :). Thanks for feedback.. @Keleir docker\u955c\u50cf\u4ecev2.3.0\u624d\u5f00\u59cb\u652f\u6301\u7684. \u770b\u4e00\u4e0b\u7f51\u5361\u7684\u5386\u53f2\u6d41\u91cf\u76d1\u63a7\u5462\uff1f. \u7f51\u5361\u7684\u6d41\u91cf\u548c\u78c1\u76d8IO\u6709\u6ca1\u6709\u5173\u7cfb\uff0c\u5c31\u662f\u5728io\u9ad8\u5cf0\u7684\u65f6\u5019\u7f51\u5361\u662f\u4e0d\u662f\u4e5f\u6709\u9ad8\u5cf0\u5462. \u73b0\u5728\u4e0d\u652f\u6301. ",
    "wenbin1989": "\u60a8\u597d\uff0c\u591a\u8c22\u56de\u590d\u3002\n\u662f\u7528v2.1.0 release\u9875\u9762\u4e0b\u8f7d\u7684\u7248\u672c\u3002\n1. \u8d85\u65f6\u65e0\u54cd\u5e94\uff0c\u8bfb\u53d6\u548cping\u90fd\u6709\u5931\u8d25\uff0c\u5199\u5165\u5931\u8d25\u8bb0\u5f55\u51e0\u4e4e\u6ca1\u6709\n2. \u5bf9\u5e94\u65f6\u95f4\u6bb5\u7684\u6162\u65e5\u5fd7\u5982\u4e0b\uff1a\n   E0818 13:12:28.273990  3163 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525948, duration(us): 88793\n   E0818 13:12:28.529270  3158 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525948, duration(us): 106312\n   E0818 13:12:28.547597  3162 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525948, duration(us): 91680\n   E0818 13:12:28.848769  3158 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525948, duration(us): 99824\n   E0818 13:12:29.079372  3163 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 22972\n   E0818 13:12:29.096505  3160 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525948, duration(us): 99720\n   E0818 13:12:29.239689  3161 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 66341\n   E0818 13:12:29.270689  3163 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 13290\n   E0818 13:12:29.357663  3158 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 38935\n   E0818 13:12:29.479305  3158 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 33931\n   E0818 13:12:29.751195  3160 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 28785\n   E0818 13:12:29.777120  3158 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 90224\n   E0818 13:12:29.831889  3163 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 64940\n   E0818 13:12:30.040900  3161 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525949, duration(us): 73030\n   E0818 13:12:30.095551  3158 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525950, duration(us): 34525\n   E0818 13:12:30.132876  3163 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525950, duration(us): 77279\n   E0818 13:12:30.188822  3157 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525950, duration(us): 26481\n   E0818 13:12:30.237318  3163 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525950, duration(us): 76070\n   E0818 13:12:30.285257  3157 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525950, duration(us): 46266\n   E0818 13:12:30.331856  3161 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525950, duration(us): 146982\n   E0818 13:12:30.475834  3161 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525950, duration(us): 10140\n   E0818 13:12:30.582893  3163 pika_client_conn.cc:121] command:zrange, start_time(s): 1471525950, duration(us): 128008\n\u4e0e\u6b63\u5e38\u65f6\u95f4\u6bb5\u6bd4\u8f83\u6ca1\u6709\u660e\u663e\u533a\u522b\u3002\n\u6545\u969c\u65f6\u95f4\u70b9\u4e0e\u8fde\u63a5\u6570\u589e\u957f\u70b9\u5747\u5b8c\u5168\u543b\u5408\uff0c\u611f\u89c9\u8fde\u63a5\u6570\u4e5f\u5e76\u4e0d\u662f\u5f88\u591a\uff0c\u57fa\u672c\u90fd\u5728500\u4e00\u4e0b\u3002\u6392\u67e5\u4e00\u4e9b\u5927\u6279\u91cf\u7684\u8bf7\u6c42\uff0c\u5747\u4e0e\u6545\u969c\u65f6\u95f4\u70b9\u4e0d\u4e00\u81f4\u3002\n\u8c22\u8c22\u3002\n. \u60a8\u597d\uff0c\u611f\u8c22\u56de\u590d\u3002\n\u95ee\u9898\u5df2\u786e\u5b9a\uff0c\u662f\u7531\u4e8e\u7528ZRANG\u8bfb\u53d6\u4e00\u4e2a\u6210\u5458\u6570\u7279\u522b\u5927\u7684key\uff0810w+\uff09\u65f6\uff0cpika\u5b9e\u4f8b\u5047\u6b7b\uff0c\u9020\u6210\u5176\u4ed6\u5176\u4ed6\u8bf7\u6c42\u4e0d\u65ad\u7684\u5728\u8fde\u63a5\u6c60\u4e2d\u65b0\u5efa\u5ba2\u6237\u7aef\u8fde\u63a5\u5bfc\u81f4\u8fde\u63a5\u6570\u4e0a\u5347\uff0c\u800c\u4e0d\u662f\u8fde\u63a5\u6570\u4e0a\u5347\u5bfc\u81f4\u6545\u969cT-T\u3002\u51fa\u9519\u7684\u5ba2\u6237\u7aef\u90fd\u662f\u8bfb\u5199\u8d85\u65f6\uff0c\u95ee\u9898\u64cd\u4f5c\u4e5f\u90fd\u6ca1\u6709\u5199\u5230binlog\u4ee5\u53ca\u6162\u65e5\u5fd7\u4e2d\u3002\n\u95ee\u9898\u65f6\u6bb5\u670d\u52a1\u5668\u8d1f\u8f7d\u6b63\u5e38\uff0cCPU idle\u5927\u6982\u8fd8\u670930 - 50\uff0cio\u4e5f\u6b63\u5e38\u3002\u8be5\u670d\u52a1\u5668\u4e0a\u8fd8\u5728\u53e6\u4e00\u4e2a\u786c\u76d8\u6709\u53e6\u4e00\u4e2apika\u5b9e\u4f8b\uff0c\u5728\u95ee\u9898\u65f6\u6bb5\u4e5f\u8fd0\u884c\u6b63\u5e38\u3002\n\u6709zset\u7684\u5220\u9664\u6216\u8005\u8fc7\u671f\u64cd\u4f5c\uff0c\u6bcf\u5c0f\u65f6\u4e00\u6b21\uff0c\u4e0d\u8fc7\u786e\u5b9e\u6709\u4e00\u4e9b\u5f02\u5e38\u5bfc\u81f4\u7684zset\u6210\u5458\u6570\u8fc7\u591a\u3002\n\u8fd8\u60f3\u9ebb\u70e6\u8bf7\u6559\u4e0b\uff0cpika\u7684ZRANGE\u548cHKEYS\uff08\u6216HGETALL\uff09\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5206\u522b\u662f\u4ec0\u4e48\uff1f\u6211\u770bredis\u5206\u522b\u662fO(log(N)+M)\u4e0eO(N)\uff0c\u4e0d\u77e5\u9053pika\u4e2d\u4f9d\u8d56nemo\u4e0erocksdb\u7684\u5b9e\u73b0\u5177\u4f53\u6709\u4ec0\u4e48\u533a\u522b\uff0c\u8c22\u8c22\u3002\n. \u591a\u8c22\u7b54\u590d\uff01\n\u8fd8\u6709\u4e2a\u95ee\u9898\u60f3\u8bf7\u6559\u4e0b\uff0c\u9ebb\u70e6\u4e86\u3002\n\u6211\u770bnemo\u4ee3\u7801\u4e2d\u5bf9\u4e8ezset\u7684\u5b9e\u73b0\uff0c\u5728zadd\uff0czrange\u7b49\u4e2d\u5747\u6ca1\u6709\u770b\u5230\u6392\u5e8f\u903b\u8f91\u3002\u4e0d\u77e5\u9053\u6392\u5e8f\u662f\u5728\u4ec0\u4e48\u65f6\u5019\u8fdb\u884c\u7684\uff1f\u591a\u8c22\u3002\n. \u6240\u4ee5\u5373\u4f7f\u4e00\u4e2a\u5f88\u5927\u7684zset\uff0c\u5982\u679c\u7528zrange\u53ea\u8bfbm\u4e2a\u7684\u8bdd\uff0c\u590d\u6742\u5ea6\u4e5f\u53ea\u662fO(m)\uff1f\n. ",
    "liuhualh": "\u4e86\u89e3\uff0c\u8c22\u8c22\n\u53e6\u5916\uff0c\u60f3\u518d\u786e\u5b9a\u4e00\u4e0b\uff0cpika\u5728\u8fdb\u884ccompact(\u81ea\u52a8\u6216\u624b\u52a8)\uff0c\u662f\u4e0d\u4f1a\u963b\u585e\u4e1a\u52a1\u8bf7\u6c42\uff1f\n\u5982\u679c\u662f\uff0c\u8fd9\u4e2a\u7279\u6027\u662f\u5e95\u5c42rockdb\u652f\u6491\u7684\u5417\uff1f\n. \u8c22\u8c22\n. ",
    "hjl0508": "\u7528redis\u8fdb\u884ckeys\u65f6\u4e00\u76f4\u6ca1\u6709\u95ee\u9898\n. \u6570\u636e\u5e93\u4e2dkey\u7684\u603b\u6570\u91cf\u57281500w\u5de6\u53f3\uff0c\u7b26\u5408patter\u7684key\u7531300w\u5de6\u53f3\n. \u8fd9\u4e2a\u503c\u7684\u6700\u5927\u503c\u53ef\u4ee5\u591a\u5c11\uff1f2\u768427\u6b21\u65b9\uff1f\u4f1a\u5bf9pika\u7684\u5176\u4ed6\u529f\u80fd\u6709\u5f71\u54cd\u5417\uff1f\n. \u6211\u4e0d\u592a\u6e05\u695arbuf\u548cwbuf\u5bf9\u5185\u5b58\u7684\u5f71\u54cd\uff0c\u6240\u4ee5\u60f3\u786e\u5b9a\u4e0b\uff0c\u5982\u679cpika\u7684\u673a\u5668\u662f8G\u7684\u5185\u5b58\uff0c\u53ea\u8003\u8651\u4e2a\u5355\u5ba2\u6237\u7aef\u4e0b\uff0crbuf\u53ef\u4ee5\u8bbe\u591a\u5c11\uff1f8G/32\u8fd8\u662f8G?\n. *2\u5df2\u7ecf\u8bd5\u8fc7\u4e86\uff0c\u8fd8\u662f\u62a5\u4e86\u201credis.exceptions.ResponseError: buf is too large\u201d\u8fd9\u4e2a\u9519\u8bef\u3002\u6211\u60f3\u95ee\u4e0b\uff0c\u76ee\u524d\u6709\u6ca1\u6709\u5176\u4ed6\u4eba\u9047\u5230keys\u4e0d\u51fa\u6570\u636e\u7684\u60c5\u51b5\u4ee5\u53ca\u89e3\u51b3\u529e\u6cd5\uff1f\n. \u884c\uff0c\u6211\u518d\u8bd5\u8bd5\u3002\u8fd8\u6709\u4e00\u4e2a\u7591\u95ee\uff0c\u672c\u6765\u60f3\u7528scan\u64cd\u4f5c\u4ee3\u66ffkeys\u64cd\u4f5c\u7684\uff0c\u4f46\u662f\u76f8\u5bf9\u4e8eredis\u7684scan\u64cd\u4f5c\uff0cpika\u7684scan\u64cd\u4f5c\u4f1a\u6162\u5f88\u591a\uff0c\u8fd9\u4e2a\u53ef\u4e0d\u53ef\u4ee5\u6539\u8fdb\u5462\uff1f\n. ",
    "CatKang": "\u4e0d\u53ef\u4ee5\u624b\u52a8\u5220\u9664\uff0c\u5982\u679c\u662f\u4e3b\u53ef\u80fd\u5bfc\u81f4\u5df2\u6709\u7684\u540c\u6b65\u7ebf\u7a0b\u540c\u6b65\u5931\u8d25\n. 1\uff0c\u5982\u679c\u7531\u4e8e\u624b\u52a8\u5220\u9664\u4e86\u4e3b\u7684binlog\u5bfc\u81f4\u540c\u6b65\u5931\u8d25\uff0c\u53ef\u4ee5\u5c06\u4e3b\u4e0a\u4e4b\u524d\u7684binlog\u5168\u90e8\u90fd\u5220\u9664\uff0c\u6240\u6709\u7684\u4ece\u91cd\u65b0salveof no\uff0c slaveof \u6765\u91cd\u65b0\u5efa\u7acb\u4e3b\u4ece\u5173\u7cfb\n2\uff0c\u5728slave\u4e0a\u6267\u884cinfo\u547d\u4ee4\uff0c\u5176\u4e2dbinlog_offset\u770b\u5230\u7684\u5c31\u662f\u5f53\u524d\u7684\u540c\u6b65\u70b9\n3\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bslave\u4f1a\u5728\u540c\u6b65\u8fc7\u7a0b\u4e2d\u4e0d\u65ad\u7684\u540e\u79fb\u81ea\u5df1\u7684\u540c\u6b65\u70b9\uff0c\u4ece\u800cmaster\u8fd9\u8fb9\u5c31\u53ef\u4ee5\u5220\u9664\u8f83\u8001\u7684\u6587\u4ef6\u3002\u5982\u679c\u4e00\u76f4\u6709slave\u5360\u7528\u8f83\u65e9\u7684\u540c\u6b65\u70b9\uff0c\u53ef\u80fd\u662fslave\u6709\u5f02\u5e38\u60c5\u51b5\u53d1\u751f\u3002\u5982\u679c\u771f\u7684\u53d1\u751f\u4e86\uff0c\u6211\u4eec\u518d\u4f9d\u60c5\u51b5\u8ba8\u8bba\u5427\n. \u65e5\u5fd7\u7684\u610f\u601d\u662f\u5f53\u5220\u9664\u7f16\u53f7\u4e3a1\u7684binlog\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u5220\u9664\u6761\u4ef6\u4e0d\u6ee1\u8db3\u65e0\u6cd5\u5220\u9664\u3002\n\u8fd9\u6761\u65e5\u5fd7\u662fWARNING\u7ea7\u522b\uff0c\u5e94\u8be5\u4e0d\u4f1a\u5f71\u54cd\u6b63\u5e38\u8fd0\u884c\n\u89e6\u53d1binlog\u5220\u9664\u6709\u4e09\u4e2d\u60c5\u51b5\uff1a\n1\uff0c\u5ba2\u6237\u7aef\u6267\u884cpurgelogsto\u547d\u4ee4\n2\uff0c\u5ba2\u6237\u7aef\u6267\u884cslaveof\u5e76\u5236\u5b9afilenum\uff0c\u4f1a\u5220\u9664filenum\u540e\u8fb9\u7684binlog\n3\uff0cpika\u5f53binlog\u8d85\u8fc7expire-logs-nums\u6216\u65f6\u95f4\u957f\u4e8eexpire-logs-days\u65f6\u81ea\u52a8\u5220\u9664\nps: pika\u4f1a\u53e6\u5916\u591a\u4fdd\u7559\u5341\u4e2abinlog\n\u5220\u9664\u6761\u4ef6\u4e0d\u6ee1\u8db3\u56e0\u800c\u65e0\u6cd5\u5220\u9664\u7684\u53ef\u80fd\u6709\uff1a\n1\uff0c\u5f53\u524d\u7684server\u6709\u4e3b\u89d2\u8272\uff0c\u8be5binlog\u88ab\u5360\u7528\n2\uff0cpika\u5f53\u524d\u7684binlog\u603b\u6570\u5df2\u7ecf\u4e0d\u591f\u5341\u4e2a\n\u9488\u5bf9\u5f53\u524d\u95ee\u9898\uff0c\u53ef\u4ee5\u786e\u8ba4\u4e0b\u5f53\u524d\u62a5\u9519\u7684\u4ece\u662f\u5426\u8fd8\u662f\u4e3b\uff0c\u6216\u8005binlog\u603b\u6570\u4e0d\u591f\u5341\u4e2a\n. include/pika_command.h \u4e2d\u7684CmdFlags\u662f\u8bb0\u5f55\u4e86\u547d\u4ee4\u7684\u5404\u79cd\u5c5e\u6027\uff0c\u4f1a\u548cCmdFlagsMask\u505a\u4f4d\u8fd0\u7b97\u3002\u5176\u4e2d\u4f4e2\uff0c3\uff0c4\u4f4d\u662f\u8bb0\u5f55\u547d\u4ee4\u7c7b\u578b\u7684\uff0c\u6240\u4ee5\u76ee\u524d\u53ea\u80fd\u6709\u516b\u79cd\u3002kCmdFlagsGeo            = 18, \u8fd9\u6837\u5b9a\u4e49\u4f1a\u88ab\u89e3\u6790\u4e3akCmdFlagsLocal | kCmdFlagsKv\n\u53ef\u4ee5\u591a\u5206\u914d\u51e0\u4f4d\u7ed9\u547d\u4ee4\u7c7b\u578b\uff0c\u5c06\u540e\u8fb9\u7684\u5176\u4ed6\u5c5e\u6027\u7684\u4f4d\u540e\u79fb\u5427\u3002. \u5173\u4e8e\u6d4b\u8bd5\uff0credis/tests/unit\u4e0b\u9762\u6709redis\u7684\u63a5\u53e3\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u7528\u8fd9\u4e2a\u8dd1\u4e0b\u8bd5\u8bd5\u3002\u53ef\u4ee5\u7684\u8bdd\u9ebb\u70e6\u7ed9pika\u4e5f\u6dfb\u52a0\u4e00\u4e0b\u5427.\npika/pikatests/TESTREAD \u8fd9\u4e2a\u91cc\u9762\u6709pika\u7684\u6d4b\u8bd5\u8bf4\u660e\n\u53ef\u4ee5\u5148\u5c06redis\u7684geo\u6d4b\u8bd5\u811a\u672c\u6dfb\u52a0\u5230pika/pikatests/tests\u4e0b\u9762\uff0c\u7136\u540e\u6309TESTREAD\u8fd9\u4e2a\u8bf4\u660e\u8dd1\u8d77\u6765. \u611f\u8c22\u8d21\u732egeo\u4ee3\u7801\uff0c\u6709\u65f6\u95f4\u53ef\u4ee5\u5b8c\u5584\u4e0b\u6d4b\u8bd5\u811a\u672c\u548cwiki\u4e2dpika \u652f\u6301\u7684redis\u63a5\u53e3\u53ca\u517c\u5bb9\u60c5\u51b5\u4e2d\u7684\u5185\u5bb9. Thanks for the patch. \nThe deadlock problem is indeed exist, and we realized that it is some kind of design flaw.\nWe are going to redesign the lock operation of \"Trysync\" function soon, to avoid the deadlock. Meanwhile a small read-write lock is desired. Your suggestion will always be welcome.. This problem has been fixed in fd3d236e887e03f7d4299f94a549ecbb574cdc66. kCmdFlagsMaskAdminRequire \u8fd9\u4e2a\u5730\u65b9\u5e94\u8be5\u662f256. geodist\u9700\u8981\u662fkCmdFlagsWrite\u5417\uff0cwrite\u547d\u4ee4\u662f\u6539\u53d8\u5e93\u72b6\u6001\u7684\u547d\u4ee4\uff0c\u4f1a\u901a\u8fc7binlog\u540c\u6b65\u5230\u6240\u6709\u7684\u4ece\u3002. \u8fd9\u91cc\u662f\u4e0d\u662f\u53ef\u4ee5\u76f4\u63a5ZAdd\uff0c\u800c\u4e0d\u7528\u5148ZScore\u5728ZAdd\uff0cZAdd\u4f1a\u5224\u65ad\u662f\u4e0d\u662f\u5b58\u5728\uff0c\u6700\u540e\u4e00\u4e2a\u51fa\u53c2ret\u53ef\u4ee5\u62ff\u5230\u65b0\u589e\u7684\u4e2a\u6570\u3002\u53e6\u5916\uff0c\u6700\u597d\u80fd\u628a\u683c\u5f0f\u5bf9\u5176\u6574\u7406\u4e0b. \u8fd9\u91ccCmdInfo\u4ee3\u8868\u5e94\u8be5\u6709\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u5305\u62ec\u547d\u4ee4\u540d\u5728\u5185\uff0c\u8d1f\u6570\u4ee3\u8868\u6700\u5c11\u53c2\u6570\u4e2a\u6570\uff0c\u4f1a\u5728Cmd DoIntial\u65f6\u68c0\u67e5\n\u51e0\u4e2a\u547d\u4ee4\u7684\u8fd9\u4e2a\u503c\u662f\u4e0d\u662f\u6709\u95ee\u9898\uff0c\u6bd4\u5982geoadd \u5e94\u8be5\u662f-5\uff0cgeoadd key longitude latitude member\uff1b geopos\u5e94\u8be5\u662f-3; geodist -4; geohash -3; georadius -6; georadiusbymember -5. \u8fd9\u6b65\u5224\u65ad\u53ef\u4ee5\u653e\u5230\u4e0a\u9762\u7684CheckArg\uff0c \u5c06georeaius\u547d\u4ee4\u7684CmdInfo\u7b2c\u4e8c\u4e2a\u53c2\u6570\u914d\u6210-6.\nGeoRadiusByMemberCmd\u4e2d\u4e5f\u662f\u4e00\u6837. kCmdFlagsMaskAdminRequire \u548c kCmdFlagsAdminRequire \u90fd\u5e94\u8be5\u662f256\nkCmdFlagsMaskAdminRequire \u662f\u63a9\u7801\uff0c\u4f1a\u8ddfFlag\u505a\u4f4d\u4e0e\uff0c\u6765\u83b7\u53d6\u7b2c9\u4f4d\u662f\u4e0d\u662f\u4e3a1. \u597d\u7684. This read-write lock is critical, since it will block almost all other operations. So that we expect it as small as possible.. ",
    "a651694192": "\u4e0d\u592a\u660e\u767d\u3002 \u4e3b\u4ece\u7684\u610f\u601d\u662freplica\u5417\uff1f \u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e2a\u9879\u76ee\u5e76\u4e0d\u652f\u6301\u5206\u5e03\u5f0f\uff1f\n. \u4f60\u4eec\u73b0\u5728\u6709\u652f\u6301\u5230\u7684\u6700\u5927\u6570\u636e\u91cf\u662f\u591a\u5c11\u5462\uff1f\n. \u660e\u767d\u4e86\u3002 \u9ebb\u70e6\u80fd\u8d34\u4e0b\u4f60\u4eec2T\u65f6\u7684\u4e3b\u673a\u914d\u7f6e\u5417\uff1f \u6211\u89c9\u5f97\u5206\u5e03\u5f0f\u5fc5\u4e0d\u53ef\u5c11\u554a\uff0c\u540e\u671f\u4f1a\u4e0d\u4f1a\u52a0\u4e0a\u8fd9\u4e9b\u529f\u80fd\u5462\uff1f\n. ",
    "wikimore": "\u8fde\u63a5\u7684\u5360\u7528\u5185\u5b58\u6570\u53ef\u4ee5\u9650\u5236\u5417\n. ",
    "czt0611": "\u53d1\u73b0\u5185\u5b58\u5360\u7528\u8f83\u5927\u5b9e\u4f8b\uff0cserver\u7aef\u6709\u597d\u591aFIN_WAIT2\u72b6\u6001\u8fde\u63a5\uff0c\u5728\u6392\u67e5server\u7aef\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5\u8fd9\u5757\u548cclient~\n. \u91cd\u65b0\u7528tcmalloc\u7f16\u8bd1\u5347\u7ea7\u540e\u95ee\u9898\u89e3\u51b3\uff1b\u540c\u65f6\u5173\u95ed\u5927\u5185\u5b58\u9875\uff1b\u957f\u8fde\u63a5timeout\u53c2\u6570\u65f6\u95f4\u53ef\u4ee5\u8bbe\u7f6e\u957f\u4e9b. ",
    "jabirukaka07": "@czt0611  \u95ee\u9898\u662f\u5426\u6709\u8fdb\u5c55? \u6211\u4eec\u9047\u5230\u540c\u6837\u7684\u95ee\u9898, \u5185\u5b58\u4e00\u76f4\u4e0a\u6da8.  \u67e5\u770b\u8fde\u63a5\u6570\u4e00\u76f4\u7a33\u5b9a\u5728551\n\u4e0d\u6e05\u695a\u662f\u4ec0\u4e48\u5206\u914d\u4e86\u597d\u591a60+M\u7684\u5185\u5b58, \u914d\u7f6e\u9664\u4e86\u6539\u7aef\u53e3\u53f7, \u548c\u6570\u636e\u8def\u5f84, \u5176\u4ed6\u90fd\u9ed8\u8ba4.\n\u53d1\u73b0\u521a\u90e8\u7f72\u540e\u51e0\u4e2a\u5c0f\u65f6, \u8fd8\u6ca1\u6709\u5ba2\u6237\u7aef\u8fde\u63a5, \u5185\u5b58\u5c31\u5df2\u7ecf\u5f00\u59cb\u5728\u589e\u957f, 8G\u7684\u5185\u5b58 \u5dee\u4e0d\u591a1\u5929\u591a\u5c31\u5360\u7528\u6ee1\u4e86.\nServer\npika_version:2.1.4\nos:Linux 3.10.0-327.22.2.el7.x86_64 x86_64\narch_bits:64\nprocess_id:841\ntcp_port:8221\nthread_num:2\nsync_thread_num:6\nuptime_in_seconds:105153\nuptime_in_days:2\nconfig_file:/etc/pika.conf\nData\ndb_size:202542462\ndb_size_human:193M\ncompression:snappy\nused_memory:214169327\nused_memory_human:204M\ndb_memtable_usage:214168579\ndb_tablereader_usage:748\nLog\nlog_size:234959963\nlog_size_human:224M\nsafety_purge:none\nexpire_logs_days:7\nexpire_logs_nums:80\nbinlog_offset:2 21416791\nClients\nconnected_clients:551\nStats\ntotal_connections_received:457150\ninstantaneous_ops_per_sec:273\ntotal_commands_processed:7423504\nis_bgsaving:No, 20161215215341, 0\nis_scaning_keyspace:No\nis_compact:No\nReplication(MASTER)\nrole:master\nconnected_slaves:0\nKeyspace\nTime:1970-01-01 08:00:00\nkv keys:0\nhash keys:0\nlist keys:0\nzset keys:0\nset keys:0\n\u4e24\u6b21pmap \u7ed3\u679c\u5bf9\u6bd4\n\u7b2c\u4e00\u6b21:\n0000000000400000   2504K r-x-- pika\n0000000000871000     20K r---- pika\n0000000000876000      4K rw--- pika\n0000000000877000     36K rw---   [ anon ]\n0000000001a11000    660K rw---   [ anon ]\n0000000001ab6000  28296K rw---   [ anon ]\n00007fa160000000  63492K rw---   [ anon ]\n00007fa163e01000   2044K -----   [ anon ]\n00007fa164000000  51204K rw---   [ anon ]\n00007fa167201000  14332K -----   [ anon ]\n00007fa168000000   8196K rw---   [ anon ]\n00007fa168801000  57340K -----   [ anon ]\n00007fa16c000000  63492K rw---   [ anon ]\n00007fa16fe01000   2044K -----   [ anon ]\n00007fa170000000  65128K rw---   [ anon ]\n00007fa173f9a000    408K -----   [ anon ]\n00007fa174000000  63492K rw---   [ anon ]\n00007fa177e01000   2044K -----   [ anon ]\n00007fa17c000000  63492K rw---   [ anon ]\n00007fa17fe01000   2044K -----   [ anon ]\n00007fa180000000  63492K rw---   [ anon ]\n00007fa183e01000   2044K -----   [ anon ]\n00007fa184000000  65128K rw---   [ anon ]\n00007fa187f9a000    408K -----   [ anon ]\n00007fa18c000000  53252K rw---   [ anon ]\n00007fa18f401000  12284K -----   [ anon ]\n00007fa194000000  63492K rw---   [ anon ]\n00007fa197e01000   2044K -----   [ anon ]\n00007fa19c000000  63492K rw---   [ anon ]\n00007fa19fe01000   2044K -----   [ anon ]\n00007fa1a0000000  63492K rw---   [ anon ]\n00007fa1a3e01000   2044K -----   [ anon ]\n00007fa1a4000000  63492K rw---   [ anon ]\n00007fa1a7e01000   2044K -----   [ anon ]\n00007fa1a8000000  63492K rw---   [ anon ]\n00007fa1abe01000   2044K -----   [ anon ]\n00007fa1ac000000  63492K rw---   [ anon ]\n00007fa1afe01000   2044K -----   [ anon ]\n00007fa1b0000000  63492K rw---   [ anon ]\n00007fa1b3e01000   2044K -----   [ anon ]\n00007fa1b4000000  63492K rw---   [ anon ]\n00007fa1b7e01000   2044K -----   [ anon ]\n00007fa1bc000000  63492K rw---   [ anon ]\n00007fa1bfe01000   2044K -----   [ anon ]\n00007fa1c4000000  63492K rw---   [ anon ]\n00007fa1c7e01000   2044K -----   [ anon ]\n00007fa1cc000000  63492K rw---   [ anon ]\n00007fa1cfe01000   2044K -----   [ anon ]\n00007fa1d0000000  63492K rw---   [ anon ]\n00007fa1d3e01000   2044K -----   [ anon ]\n00007fa1d4000000  63492K rw---   [ anon ]\n00007fa1d7e01000   2044K -----   [ anon ]\n00007fa1d8000000  63492K rw---   [ anon ]\n00007fa1dbe01000   2044K -----   [ anon ]\n00007fa1dc000000  63492K rw---   [ anon ]\n00007fa1dfe01000   2044K -----   [ anon ]\n00007fa1e4000000  63492K rw---   [ anon ]\n00007fa1e7e01000   2044K -----   [ anon ]\n00007fa1ec000000  63492K rw---   [ anon ]\n00007fa1efe01000   2044K -----   [ anon ]\n00007fa1f0000000  63492K rw---   [ anon ]\n00007fa1f3e01000   2044K -----   [ anon ]\n00007fa1f4000000  45060K rw---   [ anon ]\n00007fa1f6c01000  20476K -----   [ anon ]\n00007fa1f8000000  65128K rw---   [ anon ]\n00007fa1fbf9a000    408K -----   [ anon ]\n00007fa1fc000000  63492K rw---   [ anon ]\n00007fa1ffe01000   2044K -----   [ anon ]\n00007fa204000000  63492K rw---   [ anon ]\n00007fa207e01000   2044K -----   [ anon ]\n00007fa20c000000  63492K rw---   [ anon ]\n00007fa20fe01000   2044K -----   [ anon ]\n00007fa214000000  63492K rw---   [ anon ]\n00007fa217e01000   2044K -----   [ anon ]\n00007fa21c000000  65128K rw---   [ anon ]\n00007fa21ff9a000    408K -----   [ anon ]\n00007fa220000000  63492K rw---   [ anon ]\n00007fa223e01000   2044K -----   [ anon ]\n00007fa228000000  63492K rw---   [ anon ]\n00007fa22be01000   2044K -----   [ anon ]\n00007fa22c000000  63492K rw---   [ anon ]\n00007fa22fe01000   2044K -----   [ anon ]\n00007fa230000000  63492K rw---   [ anon ]\n00007fa233e01000   2044K -----   [ anon ]\n00007fa238000000  63492K rw---   [ anon ]\n00007fa23be01000   2044K -----   [ anon ]\n00007fa240000000  63492K rw---   [ anon ]\n00007fa243e01000   2044K -----   [ anon ]\n00007fa248000000  63492K rw---   [ anon ]\n00007fa24be01000   2044K -----   [ anon ]\n00007fa250000000  63492K rw---   [ anon ]\n00007fa253e01000   2044K -----   [ anon ]\n00007fa258000000  63492K rw---   [ anon ]\n00007fa25be01000   2044K -----   [ anon ]\n00007fa260000000  63492K rw---   [ anon ]\n00007fa263e01000   2044K -----   [ anon ]\n00007fa268000000  63492K rw---   [ anon ]\n00007fa26be01000   2044K -----   [ anon ]\n00007fa26c000000  63492K rw---   [ anon ]\n00007fa26fe01000   2044K -----   [ anon ]\n00007fa270000000  63492K rw---   [ anon ]\n00007fa273e01000   2044K -----   [ anon ]\n00007fa278000000  63492K rw---   [ anon ]\n00007fa27be01000   2044K -----   [ anon ]\n00007fa27c000000  63492K rw---   [ anon ]\n00007fa27fe01000   2044K -----   [ anon ]\n00007fa280000000  63492K rw---   [ anon ]\n00007fa283e01000   2044K -----   [ anon ]\n00007fa288000000  63492K rw---   [ anon ]\n00007fa28be01000   2044K -----   [ anon ]\n00007fa28c000000  63492K rw---   [ anon ]\n00007fa28fe01000   2044K -----   [ anon ]\n00007fa294000000  65128K rw---   [ anon ]\n00007fa297f9a000    408K -----   [ anon ]\n00007fa29c000000  63492K rw---   [ anon ]\n00007fa29fe01000   2044K -----   [ anon ]\n00007fa2a4000000  63492K rw---   [ anon ]\n00007fa2a7e01000   2044K -----   [ anon ]\n00007fa2ac000000  63492K rw---   [ anon ]\n00007fa2afe01000   2044K -----   [ anon ]\n00007fa2b0000000  63492K rw---   [ anon ]\n00007fa2b3e01000   2044K -----   [ anon ]\n00007fa2b4000000  63492K rw---   [ anon ]\n00007fa2b7e01000   2044K -----   [ anon ]\n00007fa2bc000000  63492K rw---   [ anon ]\n00007fa2bfe01000   2044K -----   [ anon ]\n00007fa2c0000000  63492K rw---   [ anon ]\n00007fa2c3e01000   2044K -----   [ anon ]\n00007fa2c4000000  63492K rw---   [ anon ]\n00007fa2c7e01000   2044K -----   [ anon ]\n00007fa2cc000000  65128K rw---   [ anon ]\n00007fa2cff9a000    408K -----   [ anon ]\n00007fa2d4000000  63492K rw---   [ anon ]\n00007fa2d7e01000   2044K -----   [ anon ]\n00007fa2dc000000  63492K rw---   [ anon ]\n00007fa2dfe01000   2044K -----   [ anon ]\n00007fa2e4000000  63492K rw---   [ anon ]\n00007fa2e7e01000   2044K -----   [ anon ]\n00007fa2e8000000  64548K rw---   [ anon ]\n00007fa2ebf09000    988K -----   [ anon ]\n00007fa2ec000000  65128K rw---   [ anon ]\n00007fa2eff9a000    408K -----   [ anon ]\n00007fa2f4000000    132K rw---   [ anon ]\n00007fa2f4021000  65404K -----   [ anon ]\n00007fa2f8000000    132K rw---   [ anon ]\n00007fa2f8021000  65404K -----   [ anon ]\n00007fa2fc000000    132K rw---   [ anon ]\n00007fa2fc021000  65404K -----   [ anon ]\n00007fa304000000    132K rw---   [ anon ]\n00007fa304021000  65404K -----   [ anon ]\n00007fa30c000000    132K rw---   [ anon ]\n00007fa30c021000  65404K -----   [ anon ]\n00007fa310000000    132K rw---   [ anon ]\n00007fa310021000  65404K -----   [ anon ]\n00007fa314000000    140K rw---   [ anon ]\n00007fa314023000  65396K -----   [ anon ]\n00007fa318000000    144K rw---   [ anon ]\n00007fa318024000  65392K -----   [ anon ]\n00007fa31c000000  55300K rw---   [ anon ]\n00007fa31f601000  10236K -----   [ anon ]\n00007fa320000000  63872K rw---   [ anon ]\n00007fa323e60000   1664K -----   [ anon ]\n00007fa324000000  63492K rw---   [ anon ]\n00007fa327e01000   2044K -----   [ anon ]\n00007fa328000000  63492K rw---   [ anon ]\n00007fa32be01000   2044K -----   [ anon ]\n00007fa32c000000  63496K rw---   [ anon ]\n00007fa32fe02000   2040K -----   [ anon ]\n00007fa330000000  63492K rw---   [ anon ]\n00007fa333e01000   2044K -----   [ anon ]\n00007fa334000000  63492K rw---   [ anon ]\n00007fa337e01000   2044K -----   [ anon ]\n00007fa33b7ff000      4K -----   [ anon ]\n00007fa33b800000   8192K rw---   [ anon ]\n00007fa33c000000  63492K rw---   [ anon ]\n00007fa33fe01000   2044K -----   [ anon ]\n00007fa340000000  63492K rw---   [ anon ]\n00007fa343e01000   2044K -----   [ anon ]\n00007fa344662000      4K -----   [ anon ]\n00007fa344663000   8192K rw---   [ anon ]\n00007fa344e63000      4K -----   [ anon ]\n00007fa344e64000   8192K rw---   [ anon ]\n00007fa345664000      4K -----   [ anon ]\n00007fa345665000   8192K rw---   [ anon ]\n00007fa345e65000      4K -----   [ anon ]\n00007fa345e66000   8192K rw---   [ anon ]\n00007fa3467fd000      4K -----   [ anon ]\n00007fa3467fe000   8192K rw---   [ anon ]\n00007fa3477ff000      4K -----   [ anon ]\n00007fa347800000   8192K rw---   [ anon ]\n00007fa348000000  63492K rw---   [ anon ]\n00007fa34be01000   2044K -----   [ anon ]\n00007fa34c000000  63492K rw---   [ anon ]\n00007fa34fe01000   2044K -----   [ anon ]\n00007fa350000000  63492K rw---   [ anon ]\n00007fa353e01000   2044K -----   [ anon ]\n00007fa354000000  63492K rw---   [ anon ]\n00007fa357e01000   2044K -----   [ anon ]\n00007fa358000000  63492K rw---   [ anon ]\n00007fa35be01000   2044K -----   [ anon ]\n00007fa35c000000  63492K rw---   [ anon ]\n00007fa35fe01000   2044K -----   [ anon ]\n00007fa360000000  63492K rw---   [ anon ]\n00007fa363e01000   2044K -----   [ anon ]\n00007fa364000000  63492K rw---   [ anon ]\n00007fa367e01000   2044K -----   [ anon ]\n00007fa368000000  63492K rw---   [ anon ]\n00007fa36be01000   2044K -----   [ anon ]\n00007fa36c000000  63496K rw---   [ anon ]\n00007fa36fe02000   2040K -----   [ anon ]\n00007fa370000000  63492K rw---   [ anon ]\n00007fa373e01000   2044K -----   [ anon ]\n00007fa374000000  63492K rw---   [ anon ]\n00007fa377e01000   2044K -----   [ anon ]\n00007fa378000000  63496K rw---   [ anon ]\n00007fa37be02000   2040K -----   [ anon ]\n00007fa37c000000  63492K rw---   [ anon ]\n00007fa37fe01000   2044K -----   [ anon ]\n00007fa380000000  63492K rw---   [ anon ]\n00007fa383e01000   2044K -----   [ anon ]\n00007fa384000000  63492K rw---   [ anon ]\n00007fa387e01000   2044K -----   [ anon ]\n00007fa388000000  63492K rw---   [ anon ]\n00007fa38be01000   2044K -----   [ anon ]\n00007fa38c000000  63492K rw---   [ anon ]\n00007fa38fe01000   2044K -----   [ anon ]\n00007fa390000000  63500K rw---   [ anon ]\n00007fa393e03000   2036K -----   [ anon ]\n00007fa394000000  63492K rw---   [ anon ]\n00007fa397e01000   2044K -----   [ anon ]\n00007fa398000000    132K rw---   [ anon ]\n00007fa398021000  65404K -----   [ anon ]\n00007fa39c000000  63500K rw---   [ anon ]\n00007fa39fe03000   2036K -----   [ anon ]\n00007fa3a0000000    132K rw---   [ anon ]\n00007fa3a0021000  65404K -----   [ anon ]\n00007fa3a43c4000   4096K rw-s- write2file2\n00007fa3a47c4000      4K -----   [ anon ]\n00007fa3a47c5000   8192K rw---   [ anon ]\n00007fa3a4fc5000      4K -----   [ anon ]\n00007fa3a4fc6000   8192K rw---   [ anon ]\n00007fa3a57c6000      4K -----   [ anon ]\n00007fa3a57c7000   8192K rw---   [ anon ]\n00007fa3a5fc7000      4K -----   [ anon ]\n00007fa3a5fc8000   8192K rw---   [ anon ]\n00007fa3a67c8000      4K -----   [ anon ]\n00007fa3a67c9000   8192K rw---   [ anon ]\n00007fa3a6fc9000      4K -----   [ anon ]\n00007fa3a6fca000   8192K rw---   [ anon ]\n00007fa3a77ca000      4K -----   [ anon ]\n00007fa3a77cb000  10244K rw---   [ anon ]\n00007fa3a81cc000      4K -----   [ anon ]\n00007fa3a81cd000   8192K rw---   [ anon ]\n00007fa3a89cd000   1752K r-x-- libc-2.17.so\n00007fa3a8b83000   2048K ----- libc-2.17.so\n00007fa3a8d83000     16K r---- libc-2.17.so\n00007fa3a8d87000      8K rw--- libc-2.17.so\n00007fa3a8d89000     20K rw---   [ anon ]\n00007fa3a8d8e000     84K r-x-- libgcc_s-4.8.5-20150702.so.1\n00007fa3a8da3000   2044K ----- libgcc_s-4.8.5-20150702.so.1\n00007fa3a8fa2000      4K r---- libgcc_s-4.8.5-20150702.so.1\n00007fa3a8fa3000      4K rw--- libgcc_s-4.8.5-20150702.so.1\n00007fa3a8fa4000   1024K r-x-- libm-2.17.so\n00007fa3a90a4000   2048K ----- libm-2.17.so\n00007fa3a92a4000      4K r---- libm-2.17.so\n00007fa3a92a5000      4K rw--- libm-2.17.so\n00007fa3a92a6000    932K r-x-- libstdc++.so.6.0.19\n00007fa3a938f000   2048K ----- libstdc++.so.6.0.19\n00007fa3a958f000     36K r---- libstdc++.so.6.0.19\n00007fa3a9598000      8K rw--- libstdc++.so.6.0.19\n00007fa3a959a000     84K rw---   [ anon ]\n00007fa3a95af000     28K r-x-- librt-2.17.so\n00007fa3a95b6000   2044K ----- librt-2.17.so\n00007fa3a97b5000      4K r---- librt-2.17.so\n00007fa3a97b6000      4K rw--- librt-2.17.so\n00007fa3a97b7000     20K r-x-- libsnappy.so.1.1.4\n00007fa3a97bc000   2044K ----- libsnappy.so.1.1.4\n00007fa3a99bb000      4K r---- libsnappy.so.1.1.4\n00007fa3a99bc000      4K rw--- libsnappy.so.1.1.4\n00007fa3a99bd000     60K r-x-- libbz2.so.1.0.6\n00007fa3a99cc000   2044K ----- libbz2.so.1.0.6\n00007fa3a9bcb000      4K r---- libbz2.so.1.0.6\n00007fa3a9bcc000      4K rw--- libbz2.so.1.0.6\n00007fa3a9bcd000     84K r-x-- libz.so.1.2.7\n00007fa3a9be2000   2044K ----- libz.so.1.2.7\n00007fa3a9de1000      4K r---- libz.so.1.2.7\n00007fa3a9de2000      4K rw--- libz.so.1.2.7\n00007fa3a9de3000    112K r-x-- libglog.so.0\n00007fa3a9dff000   2048K ----- libglog.so.0\n00007fa3a9fff000      4K r---- libglog.so.0\n00007fa3aa000000      4K rw--- libglog.so.0\n00007fa3aa001000     64K rw---   [ anon ]\n00007fa3aa011000     92K r-x-- libpthread-2.17.so\n00007fa3aa028000   2044K ----- libpthread-2.17.so\n00007fa3aa227000      4K r---- libpthread-2.17.so\n00007fa3aa228000      4K rw--- libpthread-2.17.so\n00007fa3aa229000     16K rw---   [ anon ]\n00007fa3aa22d000    128K r-x-- ld-2.17.so\n00007fa3aa42c000      4K rw---   [ anon ]\n00007fa3aa42d000     64K rw-s- manifest\n00007fa3aa43d000      4K rw---   [ anon ]\n00007fa3aa43e000     32K rw---   [ anon ]\n00007fa3aa446000     16K rw---   [ anon ]\n00007fa3aa44a000      8K rw---   [ anon ]\n00007fa3aa44c000      4K r---- ld-2.17.so\n00007fa3aa44d000      4K rw--- ld-2.17.so\n00007fa3aa44e000      4K rw---   [ anon ]\n00007ffdb7089000    132K rw---   [ stack ]\n00007ffdb71bd000      8K r-x--   [ anon ]\nffffffffff600000      4K r-x--   [ anon ]\n\u7b2c\u4e8c\u6b21:\n0000000000400000   2504K r-x-- pika\n0000000000871000     20K r---- pika\n0000000000876000      4K rw--- pika\n0000000000877000     36K rw---   [ anon ]\n0000000001a11000    660K rw---   [ anon ]\n0000000001ab6000  28296K rw---   [ anon ]\n00007fa158000000  28676K rw---   [ anon ]\n00007fa159c01000  36860K -----   [ anon ]\n00007fa15c000000   2180K rw---   [ anon ]\n00007fa15c221000  63356K -----   [ anon ]\n00007fa160000000  63492K rw---   [ anon ]\n00007fa163e01000   2044K -----   [ anon ]\n00007fa164000000  63492K rw---   [ anon ]\n00007fa167e01000   2044K -----   [ anon ]\n00007fa168000000  63492K rw---   [ anon ]\n00007fa16be01000   2044K -----   [ anon ]\n00007fa16c000000  63492K rw---   [ anon ]\n00007fa16fe01000   2044K -----   [ anon ]\n00007fa170000000  65128K rw---   [ anon ]\n00007fa173f9a000    408K -----   [ anon ]\n00007fa174000000  63492K rw---   [ anon ]\n00007fa177e01000   2044K -----   [ anon ]\n00007fa17c000000  63492K rw---   [ anon ]\n00007fa17fe01000   2044K -----   [ anon ]\n00007fa180000000  63492K rw---   [ anon ]\n00007fa183e01000   2044K -----   [ anon ]\n00007fa184000000  65128K rw---   [ anon ]\n00007fa187f9a000    408K -----   [ anon ]\n00007fa18c000000  53252K rw---   [ anon ]\n00007fa18f401000  12284K -----   [ anon ]\n00007fa194000000  63492K rw---   [ anon ]\n00007fa197e01000   2044K -----   [ anon ]\n00007fa19c000000  63492K rw---   [ anon ]\n00007fa19fe01000   2044K -----   [ anon ]\n00007fa1a0000000  63492K rw---   [ anon ]\n00007fa1a3e01000   2044K -----   [ anon ]\n00007fa1a4000000  63492K rw---   [ anon ]\n00007fa1a7e01000   2044K -----   [ anon ]\n00007fa1a8000000  63492K rw---   [ anon ]\n00007fa1abe01000   2044K -----   [ anon ]\n00007fa1ac000000  63492K rw---   [ anon ]\n00007fa1afe01000   2044K -----   [ anon ]\n00007fa1b0000000  63492K rw---   [ anon ]\n00007fa1b3e01000   2044K -----   [ anon ]\n00007fa1b4000000  63492K rw---   [ anon ]\n00007fa1b7e01000   2044K -----   [ anon ]\n00007fa1bc000000  63492K rw---   [ anon ]\n00007fa1bfe01000   2044K -----   [ anon ]\n00007fa1c4000000  63492K rw---   [ anon ]\n00007fa1c7e01000   2044K -----   [ anon ]\n00007fa1cc000000  63492K rw---   [ anon ]\n00007fa1cfe01000   2044K -----   [ anon ]\n00007fa1d0000000  63492K rw---   [ anon ]\n00007fa1d3e01000   2044K -----   [ anon ]\n00007fa1d4000000  63492K rw---   [ anon ]\n00007fa1d7e01000   2044K -----   [ anon ]\n00007fa1d8000000  63492K rw---   [ anon ]\n00007fa1dbe01000   2044K -----   [ anon ]\n00007fa1dc000000  63492K rw---   [ anon ]\n00007fa1dfe01000   2044K -----   [ anon ]\n00007fa1e4000000  63492K rw---   [ anon ]\n00007fa1e7e01000   2044K -----   [ anon ]\n00007fa1ec000000  63492K rw---   [ anon ]\n00007fa1efe01000   2044K -----   [ anon ]\n00007fa1f0000000  63492K rw---   [ anon ]\n00007fa1f3e01000   2044K -----   [ anon ]\n00007fa1f4000000  45060K rw---   [ anon ]\n00007fa1f6c01000  20476K -----   [ anon ]\n00007fa1f8000000  65128K rw---   [ anon ]\n00007fa1fbf9a000    408K -----   [ anon ]\n00007fa1fc000000  63492K rw---   [ anon ]\n00007fa1ffe01000   2044K -----   [ anon ]\n00007fa204000000  63492K rw---   [ anon ]\n00007fa207e01000   2044K -----   [ anon ]\n00007fa20c000000  63492K rw---   [ anon ]\n00007fa20fe01000   2044K -----   [ anon ]\n00007fa214000000  63492K rw---   [ anon ]\n00007fa217e01000   2044K -----   [ anon ]\n00007fa21c000000  65128K rw---   [ anon ]\n00007fa21ff9a000    408K -----   [ anon ]\n00007fa220000000  63492K rw---   [ anon ]\n00007fa223e01000   2044K -----   [ anon ]\n00007fa228000000  63492K rw---   [ anon ]\n00007fa22be01000   2044K -----   [ anon ]\n00007fa22c000000  63492K rw---   [ anon ]\n00007fa22fe01000   2044K -----   [ anon ]\n00007fa230000000  63492K rw---   [ anon ]\n00007fa233e01000   2044K -----   [ anon ]\n00007fa238000000  63492K rw---   [ anon ]\n00007fa23be01000   2044K -----   [ anon ]\n00007fa240000000  63492K rw---   [ anon ]\n00007fa243e01000   2044K -----   [ anon ]\n00007fa248000000  63492K rw---   [ anon ]\n00007fa24be01000   2044K -----   [ anon ]\n00007fa250000000  63492K rw---   [ anon ]\n00007fa253e01000   2044K -----   [ anon ]\n00007fa258000000  63492K rw---   [ anon ]\n00007fa25be01000   2044K -----   [ anon ]\n00007fa260000000  63492K rw---   [ anon ]\n00007fa263e01000   2044K -----   [ anon ]\n00007fa268000000  63492K rw---   [ anon ]\n00007fa26be01000   2044K -----   [ anon ]\n00007fa26c000000  63492K rw---   [ anon ]\n00007fa26fe01000   2044K -----   [ anon ]\n00007fa270000000  63492K rw---   [ anon ]\n00007fa273e01000   2044K -----   [ anon ]\n00007fa278000000  63492K rw---   [ anon ]\n00007fa27be01000   2044K -----   [ anon ]\n00007fa27c000000  63492K rw---   [ anon ]\n00007fa27fe01000   2044K -----   [ anon ]\n00007fa280000000  63492K rw---   [ anon ]\n00007fa283e01000   2044K -----   [ anon ]\n00007fa288000000  63492K rw---   [ anon ]\n00007fa28be01000   2044K -----   [ anon ]\n00007fa28c000000  63492K rw---   [ anon ]\n00007fa28fe01000   2044K -----   [ anon ]\n00007fa294000000  65128K rw---   [ anon ]\n00007fa297f9a000    408K -----   [ anon ]\n00007fa29c000000  63492K rw---   [ anon ]\n00007fa29fe01000   2044K -----   [ anon ]\n00007fa2a4000000  63492K rw---   [ anon ]\n00007fa2a7e01000   2044K -----   [ anon ]\n00007fa2ac000000  63492K rw---   [ anon ]\n00007fa2afe01000   2044K -----   [ anon ]\n00007fa2b0000000  63492K rw---   [ anon ]\n00007fa2b3e01000   2044K -----   [ anon ]\n00007fa2b4000000  63492K rw---   [ anon ]\n00007fa2b7e01000   2044K -----   [ anon ]\n00007fa2bc000000  63492K rw---   [ anon ]\n00007fa2bfe01000   2044K -----   [ anon ]\n00007fa2c0000000  63492K rw---   [ anon ]\n00007fa2c3e01000   2044K -----   [ anon ]\n00007fa2c4000000  63492K rw---   [ anon ]\n00007fa2c7e01000   2044K -----   [ anon ]\n00007fa2cc000000  65128K rw---   [ anon ]\n00007fa2cff9a000    408K -----   [ anon ]\n00007fa2d4000000  63492K rw---   [ anon ]\n00007fa2d7e01000   2044K -----   [ anon ]\n00007fa2dc000000  63492K rw---   [ anon ]\n00007fa2dfe01000   2044K -----   [ anon ]\n00007fa2e4000000  63492K rw---   [ anon ]\n00007fa2e7e01000   2044K -----   [ anon ]\n00007fa2e8000000  64548K rw---   [ anon ]\n00007fa2ebf09000    988K -----   [ anon ]\n00007fa2ec000000  65128K rw---   [ anon ]\n00007fa2eff9a000    408K -----   [ anon ]\n00007fa2f4000000    132K rw---   [ anon ]\n00007fa2f4021000  65404K -----   [ anon ]\n00007fa2f8000000    132K rw---   [ anon ]\n00007fa2f8021000  65404K -----   [ anon ]\n00007fa2fc000000    132K rw---   [ anon ]\n00007fa2fc021000  65404K -----   [ anon ]\n00007fa304000000    132K rw---   [ anon ]\n00007fa304021000  65404K -----   [ anon ]\n00007fa30c000000    132K rw---   [ anon ]\n00007fa30c021000  65404K -----   [ anon ]\n00007fa310000000    132K rw---   [ anon ]\n00007fa310021000  65404K -----   [ anon ]\n00007fa314000000    140K rw---   [ anon ]\n00007fa314023000  65396K -----   [ anon ]\n00007fa318000000    144K rw---   [ anon ]\n00007fa318024000  65392K -----   [ anon ]\n00007fa31c000000  55300K rw---   [ anon ]\n00007fa31f601000  10236K -----   [ anon ]\n00007fa320000000  63872K rw---   [ anon ]\n00007fa323e60000   1664K -----   [ anon ]\n00007fa324000000  63492K rw---   [ anon ]\n00007fa327e01000   2044K -----   [ anon ]\n00007fa328000000  63492K rw---   [ anon ]\n00007fa32be01000   2044K -----   [ anon ]\n00007fa32c000000  63496K rw---   [ anon ]\n00007fa32fe02000   2040K -----   [ anon ]\n00007fa330000000  63492K rw---   [ anon ]\n00007fa333e01000   2044K -----   [ anon ]\n00007fa334000000  63492K rw---   [ anon ]\n00007fa337e01000   2044K -----   [ anon ]\n00007fa33b7ff000      4K -----   [ anon ]\n00007fa33b800000   8192K rw---   [ anon ]\n00007fa33c000000  63492K rw---   [ anon ]\n00007fa33fe01000   2044K -----   [ anon ]\n00007fa340000000  63492K rw---   [ anon ]\n00007fa343e01000   2044K -----   [ anon ]\n00007fa344662000      4K -----   [ anon ]\n00007fa344663000   8192K rw---   [ anon ]\n00007fa344e63000      4K -----   [ anon ]\n00007fa344e64000   8192K rw---   [ anon ]\n00007fa345664000      4K -----   [ anon ]\n00007fa345665000   8192K rw---   [ anon ]\n00007fa345e65000      4K -----   [ anon ]\n00007fa345e66000   8192K rw---   [ anon ]\n00007fa3467fd000      4K -----   [ anon ]\n00007fa3467fe000   8192K rw---   [ anon ]\n00007fa3477ff000      4K -----   [ anon ]\n00007fa347800000   8192K rw---   [ anon ]\n00007fa348000000  63492K rw---   [ anon ]\n00007fa34be01000   2044K -----   [ anon ]\n00007fa34c000000  63492K rw---   [ anon ]\n00007fa34fe01000   2044K -----   [ anon ]\n00007fa350000000  63492K rw---   [ anon ]\n00007fa353e01000   2044K -----   [ anon ]\n00007fa354000000  63492K rw---   [ anon ]\n00007fa357e01000   2044K -----   [ anon ]\n00007fa358000000  63492K rw---   [ anon ]\n00007fa35be01000   2044K -----   [ anon ]\n00007fa35c000000  63492K rw---   [ anon ]\n00007fa35fe01000   2044K -----   [ anon ]\n00007fa360000000  63492K rw---   [ anon ]\n00007fa363e01000   2044K -----   [ anon ]\n00007fa364000000  63492K rw---   [ anon ]\n00007fa367e01000   2044K -----   [ anon ]\n00007fa368000000  63492K rw---   [ anon ]\n00007fa36be01000   2044K -----   [ anon ]\n00007fa36c000000  63496K rw---   [ anon ]\n00007fa36fe02000   2040K -----   [ anon ]\n00007fa370000000  63492K rw---   [ anon ]\n00007fa373e01000   2044K -----   [ anon ]\n00007fa374000000  63492K rw---   [ anon ]\n00007fa377e01000   2044K -----   [ anon ]\n00007fa378000000  63496K rw---   [ anon ]\n00007fa37be02000   2040K -----   [ anon ]\n00007fa37c000000  63492K rw---   [ anon ]\n00007fa37fe01000   2044K -----   [ anon ]\n00007fa380000000  63492K rw---   [ anon ]\n00007fa383e01000   2044K -----   [ anon ]\n00007fa384000000  63492K rw---   [ anon ]\n00007fa387e01000   2044K -----   [ anon ]\n00007fa388000000  63492K rw---   [ anon ]\n00007fa38be01000   2044K -----   [ anon ]\n00007fa38c000000  63492K rw---   [ anon ]\n00007fa38fe01000   2044K -----   [ anon ]\n00007fa390000000  63500K rw---   [ anon ]\n00007fa393e03000   2036K -----   [ anon ]\n00007fa394000000  63492K rw---   [ anon ]\n00007fa397e01000   2044K -----   [ anon ]\n00007fa398000000    132K rw---   [ anon ]\n00007fa398021000  65404K -----   [ anon ]\n00007fa39c000000  63500K rw---   [ anon ]\n00007fa39fe03000   2036K -----   [ anon ]\n00007fa3a0000000    132K rw---   [ anon ]\n00007fa3a0021000  65404K -----   [ anon ]\n00007fa3a43c4000   4096K rw-s- write2file2\n00007fa3a47c4000      4K -----   [ anon ]\n00007fa3a47c5000   8192K rw---   [ anon ]\n00007fa3a4fc5000      4K -----   [ anon ]\n00007fa3a4fc6000   8192K rw---   [ anon ]\n00007fa3a57c6000      4K -----   [ anon ]\n00007fa3a57c7000   8192K rw---   [ anon ]\n00007fa3a5fc7000      4K -----   [ anon ]\n00007fa3a5fc8000   8192K rw---   [ anon ]\n00007fa3a67c8000      4K -----   [ anon ]\n00007fa3a67c9000   8192K rw---   [ anon ]\n00007fa3a6fc9000      4K -----   [ anon ]\n00007fa3a6fca000   8192K rw---   [ anon ]\n00007fa3a77ca000      4K -----   [ anon ]\n00007fa3a77cb000  10244K rw---   [ anon ]\n00007fa3a81cc000      4K -----   [ anon ]\n00007fa3a81cd000   8192K rw---   [ anon ]\n00007fa3a89cd000   1752K r-x-- libc-2.17.so\n00007fa3a8b83000   2048K ----- libc-2.17.so\n00007fa3a8d83000     16K r---- libc-2.17.so\n00007fa3a8d87000      8K rw--- libc-2.17.so\n00007fa3a8d89000     20K rw---   [ anon ]\n00007fa3a8d8e000     84K r-x-- libgcc_s-4.8.5-20150702.so.1\n00007fa3a8da3000   2044K ----- libgcc_s-4.8.5-20150702.so.1\n00007fa3a8fa2000      4K r---- libgcc_s-4.8.5-20150702.so.1\n00007fa3a8fa3000      4K rw--- libgcc_s-4.8.5-20150702.so.1\n00007fa3a8fa4000   1024K r-x-- libm-2.17.so\n00007fa3a90a4000   2048K ----- libm-2.17.so\n00007fa3a92a4000      4K r---- libm-2.17.so\n00007fa3a92a5000      4K rw--- libm-2.17.so\n00007fa3a92a6000    932K r-x-- libstdc++.so.6.0.19\n00007fa3a938f000   2048K ----- libstdc++.so.6.0.19\n00007fa3a958f000     36K r---- libstdc++.so.6.0.19\n00007fa3a9598000      8K rw--- libstdc++.so.6.0.19\n00007fa3a959a000     84K rw---   [ anon ]\n00007fa3a95af000     28K r-x-- librt-2.17.so\n00007fa3a95b6000   2044K ----- librt-2.17.so\n00007fa3a97b5000      4K r---- librt-2.17.so\n00007fa3a97b6000      4K rw--- librt-2.17.so\n00007fa3a97b7000     20K r-x-- libsnappy.so.1.1.4\n00007fa3a97bc000   2044K ----- libsnappy.so.1.1.4\n00007fa3a99bb000      4K r---- libsnappy.so.1.1.4\n00007fa3a99bc000      4K rw--- libsnappy.so.1.1.4\n00007fa3a99bd000     60K r-x-- libbz2.so.1.0.6\n00007fa3a99cc000   2044K ----- libbz2.so.1.0.6\n00007fa3a9bcb000      4K r---- libbz2.so.1.0.6\n00007fa3a9bcc000      4K rw--- libbz2.so.1.0.6\n00007fa3a9bcd000     84K r-x-- libz.so.1.2.7\n00007fa3a9be2000   2044K ----- libz.so.1.2.7\n00007fa3a9de1000      4K r---- libz.so.1.2.7\n00007fa3a9de2000      4K rw--- libz.so.1.2.7\n00007fa3a9de3000    112K r-x-- libglog.so.0\n00007fa3a9dff000   2048K ----- libglog.so.0\n00007fa3a9fff000      4K r---- libglog.so.0\n00007fa3aa000000      4K rw--- libglog.so.0\n00007fa3aa001000     64K rw---   [ anon ]\n00007fa3aa011000     92K r-x-- libpthread-2.17.so\n00007fa3aa028000   2044K ----- libpthread-2.17.so\n00007fa3aa227000      4K r---- libpthread-2.17.so\n00007fa3aa228000      4K rw--- libpthread-2.17.so\n00007fa3aa229000     16K rw---   [ anon ]\n00007fa3aa22d000    128K r-x-- ld-2.17.so\n00007fa3aa42c000      4K rw---   [ anon ]\n00007fa3aa42d000     64K rw-s- manifest\n00007fa3aa43d000      4K rw---   [ anon ]\n00007fa3aa43e000     32K rw---   [ anon ]\n00007fa3aa446000     16K rw---   [ anon ]\n00007fa3aa44a000      8K rw---   [ anon ]\n00007fa3aa44c000      4K r---- ld-2.17.so\n00007fa3aa44d000      4K rw--- ld-2.17.so\n00007fa3aa44e000      4K rw---   [ anon ]\n00007ffdb7089000    132K rw---   [ stack ]\n00007ffdb71bd000      8K r-x--   [ anon ]\nffffffffff600000      4K r-x--   [ anon ]\n. @czt0611 \u8c22\u8c22\u56de\u590d,  \u660e\u5929\u8bd5\u4e00\u4e0b.. \n\u66f4\u65b0\u4e00\u4e0b\u72b6\u6001. \u622a\u56fe\u662f\u5b89\u88c5\u540e\u4e00\u5929\u5de6\u53f3\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5. \u7b2c\u4e00\u4e2a\u66f2\u7ebf\u662f\u521a\u5b89\u88c5\u8fd0\u884c, \u8fd8\u672a\u6709\u8fde\u63a5\u65f6\u5185\u5b58\u4f7f\u7528\u7387\u5f00\u59cb\u4e0a\u5347, \u7136\u540e\u4e00\u4e2a\u5927\u7684\u4e0a\u5347\u662f\u5f00\u59cb\u6709\u5ba2\u6237\u7aef\u8fde\u63a5, \u4e4b\u540e\u53c8\u7a33\u5b9a\u4e0a\u5347(\u4e2d\u95f4\u4e00\u6b21\u5927\u7684\u4e0a\u5347\u662f\u7531\u4e8e\u8fd0\u884c\u4e86\u4e00\u4e2a\u5176\u4ed6\u7a0b\u5e8f, \u53ef\u4ee5\u5ffd\u7565).  \u5230\u4e86\u51cc\u66681\u70b9\u534a\u5de6\u53f3\u5185\u5b58\u8d8b\u4e8e\u7a33\u5b9a, 8G\u7684\u5185\u5b58\u4f7f\u7528pika\u5360\u7528\u7387\u5927\u6982\u572880%\n\u4eca\u5929\u51c6\u5907\u7528tcmalloc\u91cd\u65b0\u7f16\u8bd1, \u5728\u8fd0\u884c\u770b\u770b\u60c5\u51b5.   . ",
    "aegsea": "\u4f60\u597d\uff0c\u6211\u770b\u6587\u6863\u8bf4pika\u4e2dsting\u7c7b\u578b\u7684key\u548chset\u7c7b\u578b\u7684key\u53ef\u4ee5\u76f8\u540c\uff0c\u8bf7\u95eeexpire\u547d\u4ee4\u7684key\u53c2\u6570\u662f\u600e\u4e48\u533a\u5206\u662fhset\u7c7b\u578b\u8fd8\u662fstring\u7c7b\u578b\u7684\uff1f\n. ",
    "kkfnui": "\u7ebf\u4e0a\u670915\u4e2a\u8282\u70b9\uff0c\u6bd4\u5982\u4e00\u6b21\u540c\u6b65\u6570\u636e\u91cf\u6709 2123838\uff0c \u6301\u7eed\u65f6\u95f4 14min\u3002\n\u90a3\u4e48\u5e73\u5747\u5230\u6bcf\u4e2a\u5b9e\u4f8b\u6bcf\u79d2\u7684\u5199\u6b21\u6570\u662f  168.558571429\uff0c \u6bcf\u4e2a\u5b9e\u4f8b\u66f4\u65b0KV\u603b\u6570\u5c31  14w. \u597d\uff0c\u6211\u89c2\u5bdf\u4e0b. ",
    "frankxieke": "Is that map too large when using a map to hold all the keys in RecordMutex?. Thanks for your explanation.  I get it. \n. Does One worker thread only service one Connection?\nHow does pika make full use of the work thread potential If there are more clients than the work thread?. One More Question,\n Does pika support expand space when the space if out of usage? If yes, how?. Thanks a lot @KernelMaker . \nLet me read the Code again.\nGreat work anyway !!. ",
    "left2right": "pika is one terrific database product ,compatible with redis protocal and commands, but right now from my point of view, it does not have cluster resolution?  hope this pr could help provide one approach, pika as codis servers. as writed above, if switch is off ,it is all the same with the official version~. fix compatible problem. yes, already in the master branch, thx . \u8fd9\u4e2a\u95ee\u9898\u540e\u6765\u548c\u4e00\u4e2a\u5bf9rocksdb\u6bd4\u8f83\u4e86\u89e3\u7684\u670b\u53cb\u6c9f\u901a\u4e86\u4e0b\uff0c\u5982\u679c\u6bcf\u4e2aslot\u5bf9\u5e94\u4e00\u4e2arocksdb\u5f15\u64ce\uff0c\u6bcf\u4e2aserver\u4e0a\u5206\u5e03\u51e0\u5341\u751a\u81f3\u51e0\u767e\u7684slot\uff0c\u800c\u6bcf\u4e2arocksdb\u4f1a\u4f7f\u7528\u4e00\u4e9b\u7cfb\u7edf\u8d44\u6e90\uff0c\u8fd9\u4e48\u591a\u7684rocksdb\u5f15\u64ce\u653e\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u9762\uff0c\u4e0d\u592a\u73b0\u5b9e\u3002\u540e\u9762\u4f1a\u63a8\u4e0bpika\u652f\u6301\u5f02\u6b65\u8fc1\u79fb\u8fd9\u4e2a\uff0c\u6bcf\u79d2\u8fbe\u5230\u4e07\u7ea7key\u7684\u8fc1\u79fb\u901f\u5ea6\uff0c\u8fd9\u4e2a\u5728\u751f\u4ea7\u73af\u5883\u5e94\u8be5\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\uff0c\u6240\u4ee5\u5173\u95ed\u8fd9\u4e2aissue\u3002. \u8fd9\u4e2a\u7f16\u8bd1\u5931\u8d25\u662f\u7531\u4e8e\u8fd9\u6b21pika\u5347\u7ea7\uff0c\u5bfc\u81f4\u7f16\u8bd1\u5b89\u88c5\u65b9\u5f0f\u53d1\u751f\u53d8\u5316\u5bfc\u81f4\u7684\uff0c\u4f60\u53ef\u4ee5\u6309\u4e0b\u9762\u6b65\u9aa4\u8bd5\u4e0b\uff1a\ngit clone --recursive https://github.com/Qihoo360/pika\ncd pika\n docker build -f Dockerfile -t pika-image .\ndocker run --name PIKA -p 9221:9221 -d pika-image pika -c conf/pika.conf\nredis-cli -h {virtual-machine-ip} -p 9221\n\u73a9\u7684\u6109\u5feb\uff5e. \u548cDockerfile\u6ca1\u6709\u5173\u7cfb\uff0c\u6211\u6309\u6211\u8bf4\u7684\u4e0a\u9762\u7684\u6b65\u9aa4\u8fdb\u884c\u4e86\u9a8c\u8bc1\u540e\u56de\u590d\u7684\uff0c\u5982\u679c\u4f60\u6309\u4e0a\u9762\u7684\u6b65\u9aa4build\u8fd8\u662f\u6709\u95ee\u9898\uff0c\u6211\u60f3\u53ef\u80fd\u662f\u4f60\u73af\u5883\u7684\u95ee\u9898\u3002\u3002 @askie . \u8fd9\u4e2a\u5e94\u8be5\u662f\u7531\u4e8ecodis 3.0\u53ca\u4e4b\u540e\u5728\u6dfb\u52a0server\u65f6\uff0ccodis\u4f1a\u5411\u540e\u7aefserver\u53d1\u9001slotsinfo\u547d\u4ee4\u8fdb\u884c\u68c0\u67e5\uff0c\u800cpika\u5728\u652f\u6301codis\u65f6\u6709\u4e00\u4e2a\u5f00\u5173\uff0c\u53ea\u6709\u5728\u6253\u5f00\u5f00\u5173\u7684\u60c5\u51b5\u4e0b\uff0cslots\u76f8\u5173\u7684\u547d\u4ee4\u624d\u53ef\u4ee5\u652f\u6301\u6210\u529f\u3002\u6240\u4ee5\u4f60\u53ef\u4ee5\u53c2\u8003http://www.jianshu.com/p/07bc0483e56c \u8fd9\u4e2a\u5c06\u5f00\u5173\u6253\u5f00\uff0c\u5e94\u8be5\u5c31\u53ef\u4ee5\u4e86\u3002\n\u5176\u5b9e\u8fd9\u4e2a\u53ef\u4ee5\u505a\u4e0b\u6539\u52a8\uff0c\u5bf9slotsinfo\u547d\u4ee4\u4f7fpika\u9ed8\u8ba4\u652f\u6301\uff08\u4e0d\u6253\u5f00\u5f00\u5173\u65f6\uff09\u5373\u53ef\u3002\u4f46\u6709\u4e2a\u95ee\u9898\u662f\u5982\u679c\u9ed8\u8ba4\u652f\u6301slotsinfo\uff08\u4e0d\u6253\u5f00\u5f00\u5173\uff09\uff0c\u7528\u6237\u80fd\u591f\u6b63\u5e38\u90e8\u7f72\u4f7f\u7528codis\uff0c\u5c31\u6f5c\u610f\u8bc6\u8ba4\u4e3a\u662f\u8fc1\u79fb\u76f8\u5173\u7684\u547d\u4ee4\u90fd\u53ef\u4ee5\uff0c\u800c\u8fd9\u65f6\uff08\u6ca1\u6253\u5f00\u5f00\u5173\uff09\u4f1a\u5bfc\u81f4\u8fc1\u79fb\u5931\u8d25\uff0c\u5bf9\u4e8ecodis\u4e00\u4e9b\u521d\u7ea7\u7528\u6237\uff0c\u53ef\u80fd\u5c31\u9020\u6210\u7ebf\u4e0a\u8fc1\u79fb\u5931\u8d25\uff0c\u4e22\u5931\u6570\u636e\u4e86\u3002\u6240\u4ee5\u6211\u76ee\u524d\u89c9\u5f97\u6bd5\u7adf\u597d\u7684\u5c31\u662f\u6253\u5f00\u652f\u6301codis\u8fc1\u79fb\u5f00\u5173\u5427\uff0c\u540e\u9762\u6211\u627e\u65f6\u95f4\u518d\u8fd9\u4e2a\u95ee\u9898\u4e0a\u518d\u505a\u4e9b\u601d\u8003\uff0c\u770b\u770b\u600e\u6837\u8ba9\u5927\u5bb6\u4f7f\u7528\u65b9\u4fbf\uff0c\u800c\u4e14\u4e0d\u81f3\u4e8e\u6709\u592a\u5927\u7684\u95ee\u9898\u3002. \u8fd9\u5e94\u8be5\u4e0d\u662f\u6302\u6389\u7684\u539f\u56e0\uff0c\u770b\u770blog\u8fd8\u6709\u6ca1\u6709\u5176\u4ed6\u6709\u95ee\u9898\u7684\u70b9\uff0c\u770b\u770bcore dump\u6587\u4ef6\uff0c\u4e00\u822c\u6211\u9047\u5230\u7684\u6302\u6389\uff0c\u591a\u662foom\u5bfc\u81f4\u7684\u770b\u4e0b/var/log/messages\uff0c\u7efc\u5408\u8fd9\u51e0\u4e2a\u5e94\u8be5\u5c31\u627e\u5230\u6302\u6389\u539f\u56e0\u4e86\u3002. fe\u663e\u793a\u7684\u662f\u5185\u5b58\u7684\u4f7f\u7528\uff0c\u662f\u57fa\u4e8eredis info\u547d\u4ee4\u89e3\u6790\u83b7\u5f97\u7684\uff0c\u800cpika info\u547d\u4ee4\u8fd4\u56de\u548credis\u662f\u4e0d\u76f8\u540c\u7684\uff0c\u6240\u4ee5fe\u4e0a\u9762\u7684\u663e\u793a\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\uff0c\u770b\u770b\u5b9e\u9645\u4f7f\u7528\u7684\u60c5\u51b5. codis proxy\u5c31\u662f\u5c06\u8bf7\u6c42\u8f6c\u4e86\u4e0b\u53d1\u7ed9\u540e\u7aefserver\u4e86\uff0c\u548c\u76f4\u63a5\u8fde\u63a5pika\u6ca1\u592a\u5927\u5b9e\u8d28\u4e0a\u7684\u533a\u522b\uff0c\u6211\u80fd\u60f3\u5230codis\u8fde\u63a5\u540e\u7aefpika server\u7684\u95ee\u9898\u5c31\u662f\uff0ccodis\u9ed8\u8ba4\u548c\u540e\u7aefserver\u662f\u5355\u8fde\u63a5\u7684\uff0c\u5bfc\u81f4\u6027\u80fd\u6bd4\u8f83\u4f4e\uff08\u53ef\u4ee5\u7528\u591a\u8fde\u63a5\u89e3\u51b3\uff09\uff0c\u4f46\u8fd9\u4e2a\u4e0d\u5e94\u8be5\u5bfc\u81f4\u540e\u7aefserver pika\u6302\u6389\u3002\u6240\u4ee5\u6211\u6709\u4e9b\u6000\u7591\u5e94\u8be5\u662f\u76f4\u63a5\u538bpika\uff0c\u4e5f\u53ef\u80fd\u4f1a\u6302\u6389\u3002\u5bf9\u8fd9\u4e2acore dump\u6587\u4ef6\u6211\u5b9a\u4f4d\u4e0d\u5230\u95ee\u9898\u7684\u539f\u56e0\u3002\u4e5f\u8bb8 @baotiao @KernelMaker \u80fd\u5e2e\u5fd9\u5b9a\u4f4d\u4e0b\uff1f. \u4f60\u52a0\u5165294254078 \u8fd9\u4e2apika\u4ea4\u6d41\u7fa4\uff0c\u5c06\u4f60\u7684\u60c5\u51b5\uff0c\u5c24\u5176\u662fcore dump\u7684\u5185\u5bb9\u548cpika\u7684\u51e0\u4f4d\u4f5c\u8005\u4ea4\u6d41\u4e0b\uff0c\u770b\u4f60\u7684core dump\u6587\u4ef6\u662f\u5e95\u5c42\u5e93\u7684\u5730\u65b9\uff0c\u4ed6\u4eec\u719f\u6089\uff0c\u5982\u679c\u80fd\u5b9a\u4f4d\u5230\u662fcodis\u7684\u95ee\u9898\uff0c\u6211\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5b9a\u4f4d\u95ee\u9898\u7684\u539f\u56e0\uff0c\u6211\u5bf9pika\u4e86\u89e3\u7684\u5f88\u6d45 \uff5e @wyf0705 . aha\uff0cforgot this PR, but i think this PR may introduce some chaos\uff0c so just close it. async\u6a21\u5f0f\u7684\u8fc1\u79fb\u662f\u4f5c\u8005\u6700\u65b0\u52a0\u4e0a\u7684\uff0ccodis \u7684\u6587\u6863\u4e5f\u6ca1\u8ddf\u65b0https://github.com/CodisLabs/codis/blob/release3.2/doc/redis_change_zh.md\uff0c\u6211\u4f1a\u5c1d\u8bd5\u7740\u6dfb\u52a0\uff0c\u636e\u76ee\u524d\u4e86\u89e3\u7684\u60c5\u51b5\u770b\uff0casync\u6a21\u5f0f\u80fd\u591f\u5927\u5e45\u5ea6\u63d0\u5347\u8fc1\u79fb\u901f\u5ea6\uff0c\u770b\u770b\u80fd\u4e0d\u80fd\u5e26\u6765\u8fd9\u6837\u7684\u6548\u679c\uff5e. @spinlock \u591a\u8c22\u4f60\u7684\u610f\u89c1\uff0c\u5176\u5b9e\u505a\u8fd9\u4e2a\u9488\u5bf9codis 3.2\u7684\u652f\u6301\u4e3b\u8981\u662f\u8003\u8651\u5230\u4e4b\u524dcodis\u8fc1\u79fb\u901f\u5ea6\u8fc7\u6162\u7684\u95ee\u9898\uff0c\u5bf9\u4e8eredis\u8fd9\u6837\u6570\u636e\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u4e4b\u524d\u7684\u8fc1\u79fb\u901f\u5ea6\u867d\u7136\u4e0d\u5feb\uff0c\u4f46\u8fd8\u53ef\u4ee5\u63a5\u53d7\uff0c\u4f46\u5bf9\u4e8epika\u8fd9\u6837\uff0c\u5355\u673a\u4e00\u822c\u5b58\u50a8\u6570\u636e\u51e0\u767eG\uff0c\u751a\u81f3\u4e0aT\u7684\u6570\u636e\uff0c\u8fd9\u6837\u7684\u8fc1\u79fb\u901f\u5ea6\u751f\u4ea7\u73af\u5883\u57fa\u672c\u65e0\u6cd5\u63a5\u53d7\u7684\u3002\u6240\u4ee5\u8003\u8651\u628a\u5f02\u6b65\u8fc1\u79fb\u5b9e\u73b0\u4e86\uff08\u6216\u8005\u5728\u8fd9\u4e2a\u57fa\u7840\u4e0a\u5b9e\u73b0pika\u5feb\u901f\u7684\u8fc1\u79fb\u65b9\u6848\uff09\u3002\u53ea\u662f\u6539\u4e00\u4e9b\u51fd\u6570\u540d\u5b57\uff0c\u4e0d\u5982\u6539\u914d\u7f6e\u6587\u4ef6\u7528sync\u6a21\u5f0f\uff5e\u591a\u8c22\u610f\u89c1. @AleutianXie \u4f60\u7684\u95ee\u9898\u548c\u8fd9\u4e2aissue\u6ca1\u6709\u5173\u7cfb\uff0c\u4f60\u53ef\u4ee5\u4ece\u65b0\u63d0\u4e00\u4e2a\uff0c\u628a\u76f8\u5173\u7684\u95ee\u9898\u63cf\u8ff0\u4e0b\uff0c\u6211\u53ef\u4ee5\u5e2e\u5fd9\u770b\u770b\uff0c\u6216\u8005\u53bbpika\u7684\u4ea4\u6d41\u7fa4\u4e5f\u53ef\u4ee5\uff5e. \u8fd9\u4e2a\u76ee\u524d\u5df2\u7ecf\u5b8c\u6210\u5f00\u53d1\u548c\u81ea\u6d4b\uff0c\u89c1http://www.jianshu.com/p/7b9e383e63a6, \u6b22\u8fce\u5c1d\u8bd5\uff5e. merged,done. codis\u7684slot\u8fc1\u79fb\u5206\u4e24\u79cd\uff0csync\u548casync\uff0csync\u7684\u7248\u672c\u662fcodis1.X,codis2.X\u4ee5\u53cacodis3.0\u548ccodis3.1\u548ccodis3.2\uff08\u9700\u8981\u914d\u7f6e\u4e3async\u6a21\u5f0f\uff09\uff1basync\u7684\u7248\u672c\u4e3acodis3.2\npika\u5f53\u524d\u652f\u6301sync\u6a21\u5f0f\uff0c\u6240\u4ee5\u652f\u6301. slotmigrate : yes\n===\u68c0\u67e5\u4e0b\u652f\u6301\u8fc1\u79fb\u7684\u8fd9\u4e2a\u662f\u5426\u8bbe\u4e3ayes\u4e86\uff0c\u53ef\u4ee5\u901a\u8fc7config get slotmigrate\u83b7\u5f97\uff0c\u5982\u679c\u4e3ano\uff0c\u53ef\u4ee5\u901a\u8fc7config set slotmigrate yes \u8bbe\u7f6e. \u8fd9\u662f\u7531\u4e8ecodis\u5728\u5efa\u7acb\u4e3b\u4ece\u65f6\u8bbe\u7f6emaster\uff0c\u53d1\u9001\u7684\u547d\u4ee4\u7528\u5230\u4e86\u4e8b\u52a1\uff0c\u800cpika\u4e0d\u652f\u6301\uff0c\u8bbe\u7f6e\u5931\u8d25\u5bfc\u81f4\u7684. \u4fee\u6539\u4ee3\u7801\uff0c\u4f60\u53ef\u4ee5\u8bd5\u8bd5\u8fd9\u4e2ahttps://github.com/left2right/codis/tree/release3.2-pika. cool. this pr is based on pika version 2.2.3, there are some changes in those submodules like pink, therefore it needs more test, close this pr, and some time later will repoen it when the testing work is finished.. \u5728\u201cnemo\u201d\u5c42\u5bf9key\u8fdb\u884c\u7f16\u7801\u7684\u65f6\u5019\uff0c\u5c06key\u5206\u7247\u8003\u8651\u8fdb\u53bb\uff0c\u65e0\u8bba\u540e\u9762\u91c7\u53d6redis-cluster\u8fd8\u662fcodis\u7684\u96c6\u7fa4\u89e3\u51b3\u65b9\u6848\uff0cslot\u5e94\u8be5\u662f\u8981\u8003\u8651\u7684\u4e00\u4e2a\u70b9\uff0c\u5982\u679c\u80fd\u5728key\u7f16\u7801\u65f6\uff0c\u5982\u73b0\u5728\u7684k+key\uff0c\u6539\u4e3ak+slot+key\uff0c\u8fd9\u6837\u5728\u6269\u5bb9\u8fc1\u79fb\u65f6\u901f\u5ea6\u4e0a\u4f1a\u5feb\u66f4\u591a\uff5e\uff5e. goup1\u7684master\u662fA\uff0cgroup2\u7684master\u662fB\uff0cB\u7684slave\u662fC\uff0c\u5c06B\u505a\u4e3aA\u7684slave\uff0c\u4f1a\u6709\u4e00\u6b21\u5168\u540c\u6b65\uff0cA\u7684\u6570\u636e\u540c\u6b65\u5230B\uff0c\u5728\u540c\u6b65\u5b8c\u540e\u67e5\u770b\uff0cA\u91cc\u9762\u7684\u6570\u636e\u5728B\u91cc\u9762\u53ef\u67e5\u770b\u5230\uff0c\u4f46\u5728C\u91cc\u9762\u4e0d\u53ef\u67e5\u770b\u5230\uff0c\u5373A\u7684\u6570\u636e\u5e76\u6ca1\u6709\u56e0\u4e3aA->B->C\u8fd9\u6837\u7684\u540c\u6b65\u5173\u7cfb\u540c\u6b65\u5230C\u91cc\u9762\uff0c\u9700\u8981C\u65ad\u5f00\u548cB\u7684\u4e3b\u4ece\u5173\u7cfb\uff0c\u518d\u91cd\u65b0\u5168\u540c\u6b65\u4e00\u6b21B\u5230C. https://www.jianshu.com/p/07bc0483e56c blog on how pika support codis slot migration, plz help me review this PR, thx @fancy-rabbit @KernelMaker . ",
    "ddling1216": "\u914d\u7f6e\u6587\u4ef6\u91cc\u6709\u4e2awrite_buffer_size,\u6570\u636e\u662f\u5148\u5199\u5230\u8fd9,\u6ee1\u4e86\u4e4b\u540eflush\u5230\u78c1\u76d8\uff1f\u4f1a\u4e0d\u4f1a\u5b58\u5728\u65ad\u7535\u6570\u636e\u4e22\u5931. set\u64cd\u4f5c\u540e\uff0c\u8fd4\u56de\u6210\u529f\uff0c\u6570\u636e\u662f\u5426\u5c31\u6301\u4e45\u5316\u5230\u78c1\u76d8\uff1f. ",
    "yanjie108": "\u5565\u65f6\u5019\u53ef\u4ee5\uff1f. \u88abkill \u7684\u7248\u672c\u662f 2.2.0 \u90a3\u6211\u5347\u7ea7\u4e00\u4e0b\n\u6211\u4eec\u4e5f\u6709\u75282.2.3\u7684\u5e94\u7528\uff0c\u7ebf\u4e0a\u5df1\u8fd0\u884c8\u5929\uff0c\u76ee\u524d\u5185\u5b58\u5df2\u7ecf\u5360\u752889%\uff0cpika2.2.3 \u662f\u4e0d\u662f\u5df2\u7ecf\u63a7\u5236\u4e86\u6700\u5927\b\u5185\u5b58\u9632\u6b62\u88ab\u64cd\u4f5c\u7cfb\u7edfkill\u6389\u5462\n\u8c22\u8c22. @baotiao   pika 2.2.3 \u8fd0\u884c\u4e8618\u5929\u88ab\u64cd\u4f5c\u7cfb\u7edfkill\u4e86\uff0c\u751f\u4ea7\u7cfb\u7edf\u6709\u4ec0\u4e48\u914d\u7f6e\u4fee\u6539\u5efa\u8bae\u4e48\uff0c\u8c22\u8c22.  \u8fde\u63a5\u6570\u5feb\u88abkill\u7684\u65f6\u5019\u4e5f\u6ca1\u8d85\u8fc72000\n\u53ea\u7528\u5230 kv(\u6709\u8fc7\u671f\u65f6\u95f4)\u548chash 2\u79cd\u6570\u636e\u7c7b\u578b\n\u67e5\u8be2\u4e3b\u8981\u7528 MGET HMGET  key\u7684\u6570\u91cf\u90fd\u6709\u63a7\u5236\nqps\u9ad8\u5cf06000\u5de6\u53f3\n\u4e0b\u9762\u662finfo\u4fe1\u606f(2017-07-22 17:00\u91cd\u542f\u540e\u7684\u4fe1\u606f)\nServer\npika_version:2.2.3\nos:Linux 2.6.32-504.30.3.el6.x86_64 x86_64\narch_bits:64\nprocess_id:31198\ntcp_port:9221\nthread_num:7\nsync_thread_num:6\nuptime_in_seconds:104172\nuptime_in_days:2\nconfig_file:conf/pika.conf\nData\ndb_size:162598712782\ndb_size_human:155066M\ncompression:snappy\nused_memory:6234660920\nused_memory_human:5945M\ndb_memtable_usage:229407720\ndb_tablereader_usage:6005253200\nLog\nlog_size:5266483112\nlog_size_human:5022M\nsafety_purge:write2file42789\nexpire_logs_days:7\nexpire_logs_nums:10\nbinlog_offset:42799 20354602\nClients\nconnected_clients:916\nStats\ntotal_connections_received:186159\ninstantaneous_ops_per_sec:2993\ntotal_commands_processed:255012298\nis_bgsaving:No, , 0\nis_slots_reloading:No, , 0\nis_scaning_keyspace:No\nis_compact:No\ncompact_cron:\nReplication(MASTER)\nrole:master\nconnected_slaves:0\nKeyspace\nTime:2017-07-23 21:52:57\nkv keys:9683606\nhash keys:14096\nlist keys:0\nzset keys:0\nset keys:0\n. \u597d\u7684\uff0cthx. @KernelMaker   \u62bd\u7a7a\u5e2e\u6211\u770b\u4e00\u4e0b\uff0c\u987a\u4fbf\u7ed9\u4e2a\u4f18\u5316\u5efa\u8bae \u4ee5\u4e0b\u662f\u8fd0\u884c6\u5929\u7684\u4fe1\u606f\uff0c\u5185\u5b58\u4e5f\u5feb\u8017\u5149\u4e86\n\u8fde\u63a5\u6570\u5df2\u7ecf\u5728\u4e0d\u5f71\u54cd\u4e1a\u52a1\u7684\u60c5\u51b5\u4e0b\u63a7\u5236\u6700\u5c0f\u4e86 \u67096\u53f0web\u670d\u52a1\u4e00\u53f0\u6700\u5927300\u4e2a\u8fde\u63a5\n\u6211\u770binfo Log\u663e\u793a5\u4e2aG\u662f\u5360\u5185\u5b585\u4e2aG\u4e48\n\u4e07\u5206\u611f\u8c22\n-------------top-------------------\nPID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND\n31198 root      20   0 20.3g  14g 4112 S 20.6 92.6   1626:07 pika\n-------------free-------------------\nfree\n             total       used       free     shared    buffers     cached\nMem:      16331772   16149600     182172          0       3132     671072\n-/+ buffers/cache:   15475396     856376\n-------------info-------------------\nServer\npika_version:2.2.3\nos:Linux 2.6.32-504.30.3.el6.x86_64 x86_64\narch_bits:64\nprocess_id:31198\ntcp_port:9221\nthread_num:7\nsync_thread_num:6\nuptime_in_seconds:408230\nuptime_in_days:6\nconfig_file:conf/pika.conf\nData\ndb_size:162505129496\ndb_size_human:154976M\ncompression:snappy\nused_memory:6197895568\nused_memory_human:5910M\ndb_memtable_usage:204396456\ndb_tablereader_usage:5993499112\nLog\nlog_size:5372015880\nlog_size_human:5123M\nsafety_purge:write2file43808\nexpire_logs_days:7\nexpire_logs_nums:10\nbinlog_offset:43818 36818515\nClients\nconnected_clients:1065\nStats\ntotal_connections_received:721103\ninstantaneous_ops_per_sec:1771\ntotal_commands_processed:1000207220\nis_bgsaving:No, , 0\nis_slots_reloading:No, , 0\nis_scaning_keyspace:No\nis_compact:No\ncompact_cron:\nReplication(MASTER)\nrole:master\nconnected_slaves:0\nKeyspace\nTime:2017-07-27 10:20:38\nkv keys:10512249\nhash keys:14163\nlist keys:0\nzset keys:0\nset keys:0\n. @baotiao . @KernelMaker   \u62b1\u6b49\u6211\u6ca1\u6709\u63cf\u8ff0\u6e05\u695a\n    \u6211\u7684\u610f\u601d\u662f\u4e00\u53f0web\u670d\u52a1\u5668\u94fe\u63a5\u6c60\u914d\u7f6e\u4e86\u6700\u5927300 \n    1000\u5de6\u53f3\u7684\u8fde\u63a5\u6709\u529e\u6cd5\u9632\u6b62\u88abkill\u5417\n\u8c22\u8c22\n. @KernelMaker   \u4f60\u4eec\u5728\u751f\u4ea7\u73af\u5883\u6ca1\u6709\u78b0\u5230\u88abkill\u7684\u60c5\u51b5\u4e48\n\u4f60\u4eec\u7684\u573a\u666f\u662f\u6e38\u620f qps\u4e5f\u4e0d\u4f1a\u4f4e\u5427 \n\u4eca\u5929\u53c8\u88abkill\u4e86\uff0c\u5df2\u7ecf\u662f\u7b2c\u4e09\u6b21\u4e86\uff0c\u670d\u52a1\u53ea\u80fd\u575a\u6301\u4e00\u661f\u671f\u3002. @baotiao   @KernelMaker    \u95ee\u4e2a\u5c0f\u767d\u95ee\u9898\uff0c\u5185\u5b58\u4fe1\u606f\u6307\u4ec0\u4e48\uff1f\u8d34\u4e862\u4e2a\u65e5\u5fd7\u4e00\u4e2a\u73b0\u5728\u7684top  \u4e00\u4e2a\u662f\u88abkill\u65f6\uff0c\u548cpika\u76f8\u5173\u7684\u7cfb\u7edf\u65e5\u5fd7\uff0c\u5927\u795e\u6709\u7a7a\u5e2e\u770b\u770b\n------------\u8fd9\u4e2a\u662f\u73b0\u5728top\u770b\u7684\u4fe1\u606f---------\ntop - 10:36:02 up 112 days, 0 min,  2 users,  load average: 0.05, 0.02, 0.00\nTasks: 183 total,   1 running, 182 sleeping,   0 stopped,   0 zombie\nCpu(s):  2.0%us,  0.9%sy,  0.0%ni, 97.0%id,  0.0%wa,  0.0%hi,  0.1%si,  0.0%st\nMem:  16331772k total, 16178572k used,   153200k free,    28136k buffers\nSwap:        0k total,        0k used,        0k free,  6990872k cached\nPID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND\n 1079 root      20   0 18.3g 8.1g 4976 S 18.3 52.2 232:26.26 pika\n-----------\u4e0b\u9762\u662f\u88abkill\u76f8\u5173\u7684pika\u7cfb\u7edf\u65e5\u5fd7------------\nJul 30 19:52:13 localhost kernel: [9623794.839519] pika invoked oom-killer: gfp_mask=0x201da, order=0, oom_adj=0, oom_score_adj=0\nJul 30 19:52:13 localhost kernel: [9623794.839523] pika cpuset=/ mems_allowed=0\nJul 30 19:52:13 localhost kernel: [9623794.839525] Pid: 31213, comm: pika Tainted: G        W  ---------------    2.6.32-504.30.3.el6.x86_64 #1\nJul 30 19:52:13 localhost kernel: [9623794.839526] Call Trace:\nJul 30 19:52:13 localhost kernel: [9623794.839533]  [] ? cpuset_print_task_mems_allowed+0x91/0xb0\nJul 30 19:52:13 localhost kernel: [9623794.839537]  [] ? dump_header+0x90/0x1b0\nJul 30 19:52:13 localhost kernel: [9623794.839541]  [] ? security_real_capable_noaudit+0x3c/0x70\nJul 30 19:52:13 localhost kernel: [9623794.839543]  [] ? oom_kill_process+0x82/0x2a0\nJul 30 19:52:13 localhost kernel: [9623794.839545]  [] ? select_bad_process+0xe1/0x120\nJul 30 19:52:13 localhost kernel: [9623794.839547]  [] ? out_of_memory+0x220/0x3c0\nJul 30 19:52:13 localhost kernel: [9623794.839550]  [] ? __alloc_pages_nodemask+0x89f/0x8d0\nJul 30 19:52:13 localhost kernel: [9623794.839554]  [] ? alloc_pages_current+0xaa/0x110\nJul 30 19:52:13 localhost kernel: [9623794.839556]  [] ? __page_cache_alloc+0x87/0x90\nJul 30 19:52:13 localhost kernel: [9623794.839558]  [] ? find_get_page+0x1e/0xa0\nJul 30 19:52:13 localhost kernel: [9623794.839568]  [] ? generic_file_aio_read+0x585/0x700\nJul 30 19:52:13 localhost kernel: [9623794.839572]  [] ? do_sync_read+0xfa/0x140\nJul 30 19:52:13 localhost kernel: [9623794.839583]  [] ? perf_event_task_sched_out+0x33/0x70\nJul 30 19:52:13 localhost kernel: [9623794.839587]  [] ? autoremove_wake_function+0x0/0x40\nJul 30 19:52:13 localhost kernel: [9623794.839593]  [] ? security_file_permission+0x16/0x20\nJul 30 19:52:13 localhost kernel: [9623794.839595]  [] ? vfs_read+0xb5/0x1a0\nJul 30 19:52:13 localhost kernel: [9623794.839597]  [] ? sys_pread64+0x82/0xa0\nJul 30 19:52:13 localhost kernel: [9623794.839602]  [] ? system_call_fastpath+0x16/0x1b\nJul 30 19:52:13 localhost kernel: [9623794.839603] Mem-Info:\nJul 30 19:52:13 localhost kernel: [9623794.839604] Node 0 DMA per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.839606] CPU    0: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.839607] CPU    1: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.839608] CPU    2: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.839609] CPU    3: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.839610] CPU    4: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.839611] CPU    5: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.839612] CPU    6: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.839613] CPU    7: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.839614] Node 0 DMA32 per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.839616] CPU    0: hi:  186, btch:  31 usd:  60\nJul 30 19:52:13 localhost kernel: [9623794.839617] CPU    1: hi:  186, btch:  31 usd:  62\nJul 30 19:52:13 localhost kernel: [9623794.839618] CPU    2: hi:  186, btch:  31 usd:  47\nJul 30 19:52:13 localhost kernel: [9623794.839619] CPU    3: hi:  186, btch:  31 usd:  44\nJul 30 19:52:13 localhost kernel: [9623794.839620] CPU    4: hi:  186, btch:  31 usd:  94\nJul 30 19:52:13 localhost kernel: [9623794.839621] CPU    5: hi:  186, btch:  31 usd:  30\nJul 30 19:52:13 localhost kernel: [9623794.839622] CPU    6: hi:  186, btch:  31 usd:  22\nJul 30 19:52:13 localhost kernel: [9623794.839623] CPU    7: hi:  186, btch:  31 usd:  64\nJul 30 19:52:13 localhost kernel: [9623794.839624] Node 0 Normal per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.839626] CPU    0: hi:  186, btch:  31 usd: 176\nJul 30 19:52:13 localhost kernel: [9623794.839627] CPU    1: hi:  186, btch:  31 usd:  10\nJul 30 19:52:13 localhost kernel: [9623794.839628] CPU    2: hi:  186, btch:  31 usd:  41\nJul 30 19:52:13 localhost kernel: [9623794.839629] CPU    3: hi:  186, btch:  31 usd:  52\nJul 30 19:52:13 localhost kernel: [9623794.839630] CPU    4: hi:  186, btch:  31 usd:  50\nJul 30 19:52:13 localhost kernel: [9623794.839631] CPU    5: hi:  186, btch:  31 usd:  69\nJul 30 19:52:13 localhost kernel: [9623794.839632] CPU    6: hi:  186, btch:  31 usd: 136\nJul 30 19:52:13 localhost kernel: [9623794.839633] CPU    7: hi:  186, btch:  31 usd:  71\nJul 30 19:52:13 localhost kernel: [9623794.839635] active_anon:3986522 inactive_anon:171 isolated_anon:0\nJul 30 19:52:13 localhost kernel: [9623794.839636]  active_file:285 inactive_file:1788 isolated_file:0\nJul 30 19:52:13 localhost kernel: [9623794.839636]  unevictable:0 dirty:170 writeback:0 unstable:0\nJul 30 19:52:13 localhost kernel: [9623794.839637]  free:33382 slab_reclaimable:4700 slab_unreclaimable:7869\nJul 30 19:52:13 localhost kernel: [9623794.839637]  mapped:312 shmem:172 pagetables:10759 bounce:0\nJul 30 19:52:13 localhost kernel: [9623794.839639] Node 0 DMA free:15692kB min:60kB low:72kB high:88kB active_anon:0kB inactive_anon:0kB active_file:0kB inactive_file:0kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:15304kB mlocked:0kB dirty:0kB writeback:0kB mapped:0kB shmem:0kB slab_reclaimable:0kB slab_unreclaimable:0kB kernel_stack:0kB pagetables:0kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:0 all_unreclaimable? yes\nJul 30 19:52:13 localhost kernel: [9623794.839644] lowmem_reserve[]: 0 3512 16137 16137\nJul 30 19:52:13 localhost kernel: [9623794.839646] Node 0 DMA32 free:65108kB min:14692kB low:18364kB high:22036kB active_anon:3117388kB inactive_anon:0kB active_file:788kB inactive_file:6920kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:3596500kB mlocked:0kB dirty:352kB writeback:0kB mapped:524kB shmem:0kB slab_reclaimable:3104kB slab_unreclaimable:2688kB kernel_stack:128kB pagetables:2292kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:1207 all_unreclaimable? yes\nJul 30 19:52:13 localhost kernel: [9623794.839652] lowmem_reserve[]: 0 0 12625 12625\nJul 30 19:52:13 localhost kernel: [9623794.839654] Node 0 Normal free:52728kB min:52824kB low:66028kB high:79236kB active_anon:12828700kB inactive_anon:684kB active_file:352kB inactive_file:232kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:12928000kB mlocked:0kB dirty:328kB writeback:0kB mapped:724kB shmem:688kB slab_reclaimable:15696kB slab_unreclaimable:28788kB kernel_stack:1544kB pagetables:40744kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:896 all_unreclaimable? yes\nJul 30 19:52:13 localhost kernel: [9623794.839659] lowmem_reserve[]: 0 0 0 0\nJul 30 19:52:13 localhost kernel: [9623794.839661] Node 0 DMA: 34kB 28kB 116kB 132kB 264kB 1128kB 0256kB 0512kB 11024kB 12048kB 34096kB = 15692kB\nJul 30 19:52:13 localhost kernel: [9623794.839666] Node 0 DMA32: 3874kB 5188kB 34916kB 36432kB 22864kB 88128kB 25256kB 4512kB 01024kB 12048kB 14096kB = 63372kB\nJul 30 19:52:13 localhost kernel: [9623794.839671] Node 0 Normal: 121164kB 238kB 116kB 132kB 164kB 1128kB 1256kB 1512kB 11024kB 12048kB 04096kB = 52728kB\nJul 30 19:52:13 localhost kernel: [9623794.839676] 2204 total pagecache pages\nJul 30 19:52:13 localhost kernel: [9623794.839677] 0 pages in swap cache\nJul 30 19:52:13 localhost kernel: [9623794.839678] Swap cache stats: add 0, delete 0, find 0/0\nJul 30 19:52:13 localhost kernel: [9623794.839679] Free swap  = 0kB\nJul 30 19:52:13 localhost kernel: [9623794.839680] Total swap = 0kB\nJul 30 19:52:13 localhost kernel: [9623794.863171] 4194303 pages RAM\nJul 30 19:52:13 localhost kernel: [9623794.863173] 111360 pages reserved\nJul 30 19:52:13 localhost kernel: [9623794.863174] 1904 pages shared\nJul 30 19:52:13 localhost kernel: [9623794.863175] 4044023 pages non-shared\nJul 30 19:52:13 localhost kernel: [9623794.863176] [ pid ]   uid  tgid total_vm      rss cpu oom_adj oom_score_adj name\nJul 30 19:52:13 localhost kernel: [9623794.863190] [  438]     0   438     2670      112   6     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.863192] [  748]     0   748     1019       22   6       0             0 agetty\nJul 30 19:52:13 localhost kernel: [9623794.863195] [ 1038]    81  1038     5351       58   1       0             0 dbus-daemon\nJul 30 19:52:13 localhost kernel: [9623794.863196] [ 1067]     0  1067     1020       28   0       0             0 acpid\nJul 30 19:52:13 localhost kernel: [9623794.863198] [ 1178]     0  1178    20323      226   6       0             0 master\nJul 30 19:52:13 localhost kernel: [9623794.863200] [ 1191]    89  1191    20386      233   6       0             0 qmgr\nJul 30 19:52:13 localhost kernel: [9623794.863202] [ 1194]     0  1194     5124      163   6       0             0 crond\nJul 30 19:52:13 localhost kernel: [9623794.863204] [ 1207]     0  1207     5385       47   6       0             0 atd\nJul 30 19:52:13 localhost kernel: [9623794.863206] [ 1355]     0  1355    24666      111   3       0             0 sgagent\nJul 30 19:52:13 localhost kernel: [9623794.863208] [ 1593]     0  1593     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.863210] [ 1596]     0  1596     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.863211] [ 1598]     0  1598     1016       22   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.863213] [ 1600]     0  1600     1016       22   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.863215] [ 1604]     0  1604     2670      117   6     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.863217] [ 1605]     0  1605     2669      110   0     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.863219] [ 1606]     0  1606     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.863221] [ 1608]     0  1608     1016       21   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.863223] [ 9286]   500  9286     4504       48   3       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.863225] [ 9288]   500  9288     4504      191   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.863227] [ 9289]   500  9289     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.863229] [ 9290]   500  9290     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.863230] [ 9291]   500  9291     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.863232] [ 9292]   500  9292     4507       62   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.863235] [27750]     0 27750    23289       76   6     -17         -1000 auditd\nJul 30 19:52:13 localhost kernel: [9623794.863237] [19731]     0 19731    62992     1253   6       0             0 rsyslogd\nJul 30 19:52:13 localhost kernel: [9623794.863239] [24617]     0 24617    16665      178   6     -17         -1000 sshd\nJul 30 19:52:13 localhost kernel: [9623794.863241] [19232]     0 19232     9462     4671   6       0             0 secu-tcs-agent\nJul 30 19:52:13 localhost kernel: [9623794.863243] [19241]     0 19241      768      342   6       0             0 sap1004\nJul 30 19:52:13 localhost kernel: [9623794.863245] [19243]     0 19243     7866     3075   3       0             0 sap1005\nJul 30 19:52:13 localhost kernel: [9623794.863247] [19620]     0 19620    11827     1440   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.863249] [19628]     0 19628    15060     1839   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.863251] [19629]     0 19629   109425     2553   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.863253] [23964]     0 23964     1792     1408   6       0             0 sap1002\nJul 30 19:52:13 localhost kernel: [9623794.863255] [ 4812]     0  4812     9754     3737   6       0             0 sap1009\nJul 30 19:52:13 localhost kernel: [9623794.863257] [31198]     0 31198  5300488  3965305   0       0             0 pika\nJul 30 19:52:13 localhost kernel: [9623794.863259] [18891]     0 18891     2331       92   6       0             0 watchdog.sh\nJul 30 19:52:13 localhost kernel: [9623794.863261] [31004]    89 31004    20347      220   6       0             0 pickup\nJul 30 19:52:13 localhost kernel: [9623794.863263] [  934]     0   934     1018       21   1       0             0 sleep\nJul 30 19:52:13 localhost kernel: [9623794.863265] Out of memory: Kill process 31198 (pika) score 943 or sacrifice child\nJul 30 19:52:13 localhost kernel: [9623794.863268] Killed process 31198, UID 0, (pika) total-vm:21201952kB, anon-rss:15860312kB, file-rss:908kB\nJul 30 19:52:13 localhost kernel: [9623794.865541] pika invoked oom-killer: gfp_mask=0xd0, order=0, oom_adj=0, oom_score_adj=0\nJul 30 19:52:13 localhost kernel: [9623794.865543] pika cpuset=/ mems_allowed=0\nJul 30 19:52:13 localhost kernel: [9623794.865546] Pid: 31222, comm: pika Tainted: G        W  ---------------    2.6.32-504.30.3.el6.x86_64 #1\nJul 30 19:52:13 localhost kernel: [9623794.865547] Call Trace:\nJul 30 19:52:13 localhost kernel: [9623794.865553]  [] ? cpuset_print_task_mems_allowed+0x91/0xb0\nJul 30 19:52:13 localhost kernel: [9623794.865557]  [] ? dump_header+0x90/0x1b0\nJul 30 19:52:13 localhost kernel: [9623794.865560]  [] ? security_real_capable_noaudit+0x3c/0x70\nJul 30 19:52:13 localhost kernel: [9623794.865563]  [] ? oom_kill_process+0x82/0x2a0\nJul 30 19:52:13 localhost kernel: [9623794.865564]  [] ? select_bad_process+0xe1/0x120\nJul 30 19:52:13 localhost kernel: [9623794.865567]  [] ? out_of_memory+0x220/0x3c0\nJul 30 19:52:13 localhost kernel: [9623794.865569]  [] ? __alloc_pages_nodemask+0x89f/0x8d0\nJul 30 19:52:13 localhost kernel: [9623794.865574]  [] ? kmem_getpages+0x62/0x170\nJul 30 19:52:13 localhost kernel: [9623794.865576]  [] ? fallback_alloc+0x1ba/0x270\nJul 30 19:52:13 localhost kernel: [9623794.865578]  [] ? cache_grow+0x2cf/0x320\nJul 30 19:52:13 localhost kernel: [9623794.865581]  [] ? _cachealloc_node+0x99/0x160\nJul 30 19:52:13 localhost kernel: [9623794.865583]  [] ? kmem_cache_alloc+0x123/0x190\nJul 30 19:52:13 localhost kernel: [9623794.865586]  [] ? taskstats_exit+0x305/0x390\nJul 30 19:52:13 localhost kernel: [9623794.865590]  [] ? do_exit+0x157/0x870\nJul 30 19:52:13 localhost kernel: [9623794.865593]  [] ? do_group_exit+0x58/0xd0\nJul 30 19:52:13 localhost kernel: [9623794.865597]  [] ? get_signal_to_deliver+0x1f6/0x460\nJul 30 19:52:13 localhost kernel: [9623794.865601]  [] ? do_signal+0x75/0x870\nJul 30 19:52:13 localhost kernel: [9623794.865605]  [] ? cp_new_stat+0xe4/0x100\nJul 30 19:52:13 localhost kernel: [9623794.865608]  [] ? pvclock_clocksource_read+0x58/0xd0\nJul 30 19:52:13 localhost kernel: [9623794.865611]  [] ? sys_futex+0x7b/0x170\nJul 30 19:52:13 localhost kernel: [9623794.865613]  [] ? do_notify_resume+0x90/0xc0\nJul 30 19:52:13 localhost kernel: [9623794.865616]  [] ? int_signal+0x12/0x17\nJul 30 19:52:13 localhost kernel: [9623794.865617] Mem-Info:\nJul 30 19:52:13 localhost kernel: [9623794.865618] Node 0 DMA per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.865620] CPU    0: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.865621] CPU    1: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.865622] CPU    2: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.865623] CPU    3: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.865624] CPU    4: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.865625] CPU    5: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.865626] CPU    6: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.865627] CPU    7: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.865628] Node 0 DMA32 per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.865630] CPU    0: hi:  186, btch:  31 usd:  60\nJul 30 19:52:13 localhost kernel: [9623794.865632] CPU    1: hi:  186, btch:  31 usd:  62\nJul 30 19:52:13 localhost kernel: [9623794.865633] CPU    2: hi:  186, btch:  31 usd:  47\nJul 30 19:52:13 localhost kernel: [9623794.865635] CPU    3: hi:  186, btch:  31 usd:  44\nJul 30 19:52:13 localhost kernel: [9623794.865637] CPU    4: hi:  186, btch:  31 usd:  94\nJul 30 19:52:13 localhost kernel: [9623794.865638] CPU    5: hi:  186, btch:  31 usd:  30\nJul 30 19:52:13 localhost kernel: [9623794.865639] CPU    6: hi:  186, btch:  31 usd:  22\nJul 30 19:52:13 localhost kernel: [9623794.865640] CPU    7: hi:  186, btch:  31 usd:  64\nJul 30 19:52:13 localhost kernel: [9623794.865641] Node 0 Normal per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.865642] CPU    0: hi:  186, btch:  31 usd: 175\nJul 30 19:52:13 localhost kernel: [9623794.865643] CPU    1: hi:  186, btch:  31 usd:  10\nJul 30 19:52:13 localhost kernel: [9623794.865644] CPU    2: hi:  186, btch:  31 usd:  41\nJul 30 19:52:13 localhost kernel: [9623794.865645] CPU    3: hi:  186, btch:  31 usd:  52\nJul 30 19:52:13 localhost kernel: [9623794.865647] CPU    4: hi:  186, btch:  31 usd:  50\nJul 30 19:52:13 localhost kernel: [9623794.865648] CPU    5: hi:  186, btch:  31 usd:  69\nJul 30 19:52:13 localhost kernel: [9623794.865649] CPU    6: hi:  186, btch:  31 usd:  46\nJul 30 19:52:13 localhost kernel: [9623794.865650] CPU    7: hi:  186, btch:  31 usd:  71\nJul 30 19:52:13 localhost kernel: [9623794.865652] active_anon:3986522 inactive_anon:171 isolated_anon:0\nJul 30 19:52:13 localhost kernel: [9623794.865653]  active_file:285 inactive_file:1788 isolated_file:0\nJul 30 19:52:13 localhost kernel: [9623794.865654]  unevictable:0 dirty:170 writeback:0 unstable:0\nJul 30 19:52:13 localhost kernel: [9623794.865654]  free:33382 slab_reclaimable:4700 slab_unreclaimable:7869\nJul 30 19:52:13 localhost kernel: [9623794.865655]  mapped:312 shmem:172 pagetables:10759 bounce:0\nJul 30 19:52:13 localhost kernel: [9623794.865656] Node 0 DMA free:15692kB min:60kB low:72kB high:88kB active_anon:0kB inactive_anon:0kB active_file:0kB inactive_file:0kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:15304kB mlocked:0kB dirty:0kB writeback:0kB mapped:0kB shmem:0kB slab_reclaimable:0kB slab_unreclaimable:0kB kernel_stack:0kB pagetables:0kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:0 all_unreclaimable? yes\nJul 30 19:52:13 localhost kernel: [9623794.865661] lowmem_reserve[]: 0 3512 16137 16137\nJul 30 19:52:13 localhost kernel: [9623794.865663] Node 0 DMA32 free:65108kB min:14692kB low:18364kB high:22036kB active_anon:3117388kB inactive_anon:0kB active_file:788kB inactive_file:6920kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:3596500kB mlocked:0kB dirty:352kB writeback:0kB mapped:524kB shmem:0kB slab_reclaimable:3104kB slab_unreclaimable:2688kB kernel_stack:128kB pagetables:2292kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:1207 all_unreclaimable? yes\nJul 30 19:52:13 localhost kernel: [9623794.865668] lowmem_reserve[]: 0 0 12625 12625\nJul 30 19:52:13 localhost kernel: [9623794.865670] Node 0 Normal free:52728kB min:52824kB low:66028kB high:79236kB active_anon:12828700kB inactive_anon:684kB active_file:352kB inactive_file:232kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:12928000kB mlocked:0kB dirty:328kB writeback:0kB mapped:724kB shmem:688kB slab_reclaimable:15696kB slab_unreclaimable:28788kB kernel_stack:1544kB pagetables:40744kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:896 all_unreclaimable? yes\nJul 30 19:52:13 localhost kernel: [9623794.865675] lowmem_reserve[]: 0 0 0 0\nJul 30 19:52:13 localhost kernel: [9623794.865676] Node 0 DMA: 34kB 28kB 116kB 132kB 264kB 1128kB 0256kB 0512kB 11024kB 12048kB 34096kB = 15692kB\nJul 30 19:52:13 localhost kernel: [9623794.865681] Node 0 DMA32: 3874kB 5188kB 34916kB 36432kB 22864kB 88128kB 25256kB 4512kB 01024kB 12048kB 14096kB = 63372kB\nJul 30 19:52:13 localhost kernel: [9623794.865686] Node 0 Normal: 120854kB 238kB 116kB 132kB 164kB 1128kB 1256kB 1512kB 11024kB 12048kB 0*4096kB = 52604kB\nJul 30 19:52:13 localhost kernel: [9623794.865692] 2204 total pagecache pages\nJul 30 19:52:13 localhost kernel: [9623794.865693] 0 pages in swap cache\nJul 30 19:52:13 localhost kernel: [9623794.865694] Swap cache stats: add 0, delete 0, find 0/0\nJul 30 19:52:13 localhost kernel: [9623794.865695] Free swap  = 0kB\nJul 30 19:52:13 localhost kernel: [9623794.865695] Total swap = 0kB\nJul 30 19:52:13 localhost kernel: [9623794.887692] 4194303 pages RAM\nJul 30 19:52:13 localhost kernel: [9623794.887694] 111360 pages reserved\nJul 30 19:52:13 localhost kernel: [9623794.887695] 1911 pages shared\nJul 30 19:52:13 localhost kernel: [9623794.887695] 4044139 pages non-shared\nJul 30 19:52:13 localhost kernel: [9623794.887696] [ pid ]   uid  tgid total_vm      rss cpu oom_adj oom_score_adj name\nJul 30 19:52:13 localhost kernel: [9623794.887712] [  438]     0   438     2670      112   6     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.887714] [  748]     0   748     1019       22   6       0             0 agetty\nJul 30 19:52:13 localhost kernel: [9623794.887716] [ 1038]    81  1038     5351       58   1       0             0 dbus-daemon\nJul 30 19:52:13 localhost kernel: [9623794.887718] [ 1067]     0  1067     1020       28   0       0             0 acpid\nJul 30 19:52:13 localhost kernel: [9623794.887720] [ 1178]     0  1178    20323      226   6       0             0 master\nJul 30 19:52:13 localhost kernel: [9623794.887722] [ 1191]    89  1191    20386      233   6       0             0 qmgr\nJul 30 19:52:13 localhost kernel: [9623794.887724] [ 1194]     0  1194     5124      163   6       0             0 crond\nJul 30 19:52:13 localhost kernel: [9623794.887725] [ 1207]     0  1207     5385       47   6       0             0 atd\nJul 30 19:52:13 localhost kernel: [9623794.887727] [ 1355]     0  1355    24666      111   3       0             0 sgagent\nJul 30 19:52:13 localhost kernel: [9623794.887729] [ 1593]     0  1593     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.887731] [ 1596]     0  1596     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.887733] [ 1598]     0  1598     1016       22   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.887735] [ 1600]     0  1600     1016       22   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.887737] [ 1604]     0  1604     2670      117   6     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.887739] [ 1605]     0  1605     2669      110   0     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.887740] [ 1606]     0  1606     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.887742] [ 1608]     0  1608     1016       21   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.887744] [ 9286]   500  9286     4504       48   3       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.887746] [ 9288]   500  9288     4504      191   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.887748] [ 9289]   500  9289     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.887750] [ 9290]   500  9290     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.887752] [ 9291]   500  9291     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.887753] [ 9292]   500  9292     4507       62   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.887756] [27750]     0 27750    23289       76   6     -17         -1000 auditd\nJul 30 19:52:13 localhost kernel: [9623794.887758] [19731]     0 19731    62992     1253   6       0             0 rsyslogd\nJul 30 19:52:13 localhost kernel: [9623794.887760] [24617]     0 24617    16665      178   6     -17         -1000 sshd\nJul 30 19:52:13 localhost kernel: [9623794.887762] [19232]     0 19232     9462     4671   6       0             0 secu-tcs-agent\nJul 30 19:52:13 localhost kernel: [9623794.887764] [19241]     0 19241      768      342   6       0             0 sap1004\nJul 30 19:52:13 localhost kernel: [9623794.887766] [19243]     0 19243     7866     3075   6       0             0 sap1005\nJul 30 19:52:13 localhost kernel: [9623794.887768] [19620]     0 19620    11827     1440   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.887770] [19628]     0 19628    15060     1839   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.887772] [19629]     0 19629   109425     2555   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.887773] [23964]     0 23964     1792     1408   6       0             0 sap1002\nJul 30 19:52:13 localhost kernel: [9623794.887775] [ 4812]     0  4812     9754     3738   6       0             0 sap1009\nJul 30 19:52:13 localhost kernel: [9623794.887777] [31214]     0 31198  5300488  3965305   6       0             0 pika\nJul 30 19:52:13 localhost kernel: [9623794.887779] [18891]     0 18891     2331       92   6       0             0 watchdog.sh\nJul 30 19:52:13 localhost kernel: [9623794.887781] [31004]    89 31004    20347      220   6       0             0 pickup\nJul 30 19:52:13 localhost kernel: [9623794.887783] [  934]     0   934     1018       21   1       0             0 sleep\nJul 30 19:52:13 localhost kernel: [9623794.888367] barad_agent invoked oom-killer: gfp_mask=0x201da, order=0, oom_adj=0, oom_score_adj=0\nJul 30 19:52:13 localhost kernel: [9623794.888371] barad_agent cpuset=/ mems_allowed=0\nJul 30 19:52:13 localhost kernel: [9623794.888373] Pid: 19638, comm: barad_agent Tainted: G        W  ---------------    2.6.32-504.30.3.el6.x86_64 #1\nJul 30 19:52:13 localhost kernel: [9623794.888374] Call Trace:\nJul 30 19:52:13 localhost kernel: [9623794.888380]  [] ? cpuset_print_task_mems_allowed+0x91/0xb0\nJul 30 19:52:13 localhost kernel: [9623794.888384]  [] ? dump_header+0x90/0x1b0\nJul 30 19:52:13 localhost kernel: [9623794.888388]  [] ? security_real_capable_noaudit+0x3c/0x70\nJul 30 19:52:13 localhost kernel: [9623794.888390]  [] ? oom_kill_process+0x82/0x2a0\nJul 30 19:52:13 localhost kernel: [9623794.888392]  [] ? select_bad_process+0xe1/0x120\nJul 30 19:52:13 localhost kernel: [9623794.888394]  [] ? out_of_memory+0x220/0x3c0\nJul 30 19:52:13 localhost kernel: [9623794.888397]  [] ? alloc_pages_nodemask+0x89f/0x8d0\nJul 30 19:52:13 localhost kernel: [9623794.888401]  [] ? alloc_pages_current+0xaa/0x110\nJul 30 19:52:13 localhost kernel: [9623794.888403]  [] ? __page_cache_alloc+0x87/0x90\nJul 30 19:52:13 localhost kernel: [9623794.888405]  [] ? find_get_page+0x1e/0xa0\nJul 30 19:52:13 localhost kernel: [9623794.888406]  [] ? filemap_fault+0x1a7/0x500\nJul 30 19:52:13 localhost kernel: [9623794.888411]  [] ? __do_fault+0x54/0x530\nJul 30 19:52:13 localhost kernel: [9623794.888413]  [] ? handle_pte_fault+0xf7/0xb00\nJul 30 19:52:13 localhost kernel: [9623794.888418]  [] ? mntput_no_expire+0x30/0x110\nJul 30 19:52:13 localhost kernel: [9623794.888420]  [] ? handle_mm_fault+0x299/0x3d0\nJul 30 19:52:13 localhost kernel: [9623794.888424]  [] ? __do_page_fault+0x146/0x500\nJul 30 19:52:13 localhost kernel: [9623794.888428]  [] ? kvm_clock_read+0x1c/0x20\nJul 30 19:52:13 localhost kernel: [9623794.888431]  [] ? kvm_clock_get_cycles+0x9/0x10\nJul 30 19:52:13 localhost kernel: [9623794.888435]  [] ? ktime_get_ts+0xb1/0xf0\nJul 30 19:52:13 localhost kernel: [9623794.888438]  [] ? pvclock_clocksource_read+0x58/0xd0\nJul 30 19:52:13 localhost kernel: [9623794.888440]  [] ? kvm_clock_read+0x1c/0x20\nJul 30 19:52:13 localhost kernel: [9623794.888447]  [] ? kvm_clock_get_cycles+0x9/0x10\nJul 30 19:52:13 localhost kernel: [9623794.888449]  [] ? getnstimeofday+0x57/0xe0\nJul 30 19:52:13 localhost kernel: [9623794.888453]  [] ? do_page_fault+0x3e/0xa0\nJul 30 19:52:13 localhost kernel: [9623794.888456]  [] ? page_fault+0x25/0x30\nJul 30 19:52:13 localhost kernel: [9623794.888457] Mem-Info:\nJul 30 19:52:13 localhost kernel: [9623794.888458] Node 0 DMA per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.888459] CPU    0: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.888461] CPU    1: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.888462] CPU    2: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.888463] CPU    3: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.888464] CPU    4: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.888465] CPU    5: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.888466] CPU    6: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.888467] CPU    7: hi:    0, btch:   1 usd:   0\nJul 30 19:52:13 localhost kernel: [9623794.888468] Node 0 DMA32 per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.888469] CPU    0: hi:  186, btch:  31 usd:  60\nJul 30 19:52:13 localhost kernel: [9623794.888470] CPU    1: hi:  186, btch:  31 usd:  62\nJul 30 19:52:13 localhost kernel: [9623794.888471] CPU    2: hi:  186, btch:  31 usd:  47\nJul 30 19:52:13 localhost kernel: [9623794.888473] CPU    3: hi:  186, btch:  31 usd:  44\nJul 30 19:52:13 localhost kernel: [9623794.888474] CPU    4: hi:  186, btch:  31 usd:  94\nJul 30 19:52:13 localhost kernel: [9623794.888475] CPU    5: hi:  186, btch:  31 usd:  30\nJul 30 19:52:13 localhost kernel: [9623794.888476] CPU    6: hi:  186, btch:  31 usd:  23\nJul 30 19:52:13 localhost kernel: [9623794.888477] CPU    7: hi:  186, btch:  31 usd:  64\nJul 30 19:52:13 localhost kernel: [9623794.888478] Node 0 Normal per-cpu:\nJul 30 19:52:13 localhost kernel: [9623794.888479] CPU    0: hi:  186, btch:  31 usd: 162\nJul 30 19:52:13 localhost kernel: [9623794.888480] CPU    1: hi:  186, btch:  31 usd:  10\nJul 30 19:52:13 localhost kernel: [9623794.888481] CPU    2: hi:  186, btch:  31 usd:  41\nJul 30 19:52:13 localhost kernel: [9623794.888482] CPU    3: hi:  186, btch:  31 usd:  51\nJul 30 19:52:13 localhost kernel: [9623794.888483] CPU    4: hi:  186, btch:  31 usd:  50\nJul 30 19:52:13 localhost kernel: [9623794.888484] CPU    5: hi:  186, btch:  31 usd:  69\nJul 30 19:52:13 localhost kernel: [9623794.888485] CPU    6: hi:  186, btch:  31 usd:  52\nJul 30 19:52:13 localhost kernel: [9623794.888486] CPU    7: hi:  186, btch:  31 usd:  71\nJul 30 19:52:13 localhost kernel: [9623794.888489] active_anon:3986522 inactive_anon:171 isolated_anon:0\nJul 30 19:52:13 localhost kernel: [9623794.888490]  active_file:285 inactive_file:1714 isolated_file:0\nJul 30 19:52:13 localhost kernel: [9623794.888490]  unevictable:0 dirty:73 writeback:0 unstable:0\nJul 30 19:52:13 localhost kernel: [9623794.888491]  free:33382 slab_reclaimable:4700 slab_unreclaimable:7869\nJul 30 19:52:13 localhost kernel: [9623794.888491]  mapped:312 shmem:172 pagetables:10759 bounce:0\nJul 30 19:52:13 localhost kernel: [9623794.888492] Node 0 DMA free:15692kB min:60kB low:72kB high:88kB active_anon:0kB inactive_anon:0kB active_file:0kB inactive_file:0kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:15304kB mlocked:0kB dirty:0kB writeback:0kB mapped:0kB shmem:0kB slab_reclaimable:0kB slab_unreclaimable:0kB kernel_stack:0kB pagetables:0kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:0 all_unreclaimable? yes\nJul 30 19:52:13 localhost kernel: [9623794.888497] lowmem_reserve[]: 0 3512 16137 16137\nJul 30 19:52:13 localhost kernel: [9623794.888499] Node 0 DMA32 free:65108kB min:14692kB low:18364kB high:22036kB active_anon:3117388kB inactive_anon:0kB active_file:788kB inactive_file:6920kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:3596500kB mlocked:0kB dirty:352kB writeback:0kB mapped:524kB shmem:0kB slab_reclaimable:3104kB slab_unreclaimable:2688kB kernel_stack:128kB pagetables:2292kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:1207 all_unreclaimable? yes\nJul 30 19:52:13 localhost kernel: [9623794.888505] lowmem_reserve[]: 0 0 12625 12625\nJul 30 19:52:13 localhost kernel: [9623794.888506] Node 0 Normal free:52728kB min:52824kB low:66028kB high:79236kB active_anon:12828700kB inactive_anon:684kB active_file:352kB inactive_file:0kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:12928000kB mlocked:0kB dirty:0kB writeback:0kB mapped:724kB shmem:688kB slab_reclaimable:15696kB slab_unreclaimable:28788kB kernel_stack:1544kB pagetables:40744kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:416 all_unreclaimable? no\nJul 30 19:52:13 localhost kernel: [9623794.888512] lowmem_reserve[]: 0 0 0 0\nJul 30 19:52:13 localhost kernel: [9623794.888513] Node 0 DMA: 34kB 28kB 116kB 132kB 264kB 1128kB 0256kB 0512kB 11024kB 12048kB 34096kB = 15692kB\nJul 30 19:52:13 localhost kernel: [9623794.888519] Node 0 DMA32: 3874kB 5188kB 34916kB 36432kB 22864kB 88128kB 25256kB 4512kB 01024kB 12048kB 14096kB = 63372kB\nJul 30 19:52:13 localhost kernel: [9623794.888523] Node 0 Normal: 121164kB 268kB 116kB 132kB 164kB 1128kB 1256kB 1512kB 11024kB 12048kB 04096kB = 52752kB\nJul 30 19:52:13 localhost kernel: [9623794.888528] 2204 total pagecache pages\nJul 30 19:52:13 localhost kernel: [9623794.888529] 0 pages in swap cache\nJul 30 19:52:13 localhost kernel: [9623794.888530] Swap cache stats: add 0, delete 0, find 0/0\nJul 30 19:52:13 localhost kernel: [9623794.888531] Free swap  = 0kB\nJul 30 19:52:13 localhost kernel: [9623794.888532] Total swap = 0kB\nJul 30 19:52:13 localhost kernel: [9623794.912255] 4194303 pages RAM\nJul 30 19:52:13 localhost kernel: [9623794.912256] 111360 pages reserved\nJul 30 19:52:13 localhost kernel: [9623794.912257] 1974 pages shared\nJul 30 19:52:13 localhost kernel: [9623794.912258] 4044257 pages non-shared\nJul 30 19:52:13 localhost kernel: [9623794.912259] [ pid ]   uid  tgid total_vm      rss cpu oom_adj oom_score_adj name\nJul 30 19:52:13 localhost kernel: [9623794.912273] [  438]     0   438     2670      112   6     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.912276] [  748]     0   748     1019       22   6       0             0 agetty\nJul 30 19:52:13 localhost kernel: [9623794.912278] [ 1038]    81  1038     5351       58   1       0             0 dbus-daemon\nJul 30 19:52:13 localhost kernel: [9623794.912280] [ 1067]     0  1067     1020       28   0       0             0 acpid\nJul 30 19:52:13 localhost kernel: [9623794.912282] [ 1178]     0  1178    20323      226   6       0             0 master\nJul 30 19:52:13 localhost kernel: [9623794.912283] [ 1191]    89  1191    20386      233   6       0             0 qmgr\nJul 30 19:52:13 localhost kernel: [9623794.912286] [ 1194]     0  1194     5124      163   6       0             0 crond\nJul 30 19:52:13 localhost kernel: [9623794.912287] [ 1207]     0  1207     5385       47   6       0             0 atd\nJul 30 19:52:13 localhost kernel: [9623794.912289] [ 1355]     0  1355    24666      111   3       0             0 sgagent\nJul 30 19:52:13 localhost kernel: [9623794.912291] [ 1593]     0  1593     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.912293] [ 1596]     0  1596     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.912295] [ 1598]     0  1598     1016       22   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.912298] [ 1600]     0  1600     1016       22   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.912302] [ 1604]     0  1604     2670      117   6     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.912304] [ 1605]     0  1605     2669      110   0     -17         -1000 udevd\nJul 30 19:52:13 localhost kernel: [9623794.912306] [ 1606]     0  1606     1016       22   7       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.912308] [ 1608]     0  1608     1016       21   3       0             0 mingetty\nJul 30 19:52:13 localhost kernel: [9623794.912310] [ 9286]   500  9286     4504       48   3       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.912312] [ 9288]   500  9288     4504      189   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.912314] [ 9289]   500  9289     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.912316] [ 9290]   500  9290     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.912318] [ 9291]   500  9291     4504       72   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.912320] [ 9292]   500  9292     4507       59   6       0             0 zabbix_agentd\nJul 30 19:52:13 localhost kernel: [9623794.912322] [27750]     0 27750    23289       76   6     -17         -1000 auditd\nJul 30 19:52:13 localhost kernel: [9623794.912324] [19731]     0 19731    62992     1259   6       0             0 rsyslogd\nJul 30 19:52:13 localhost kernel: [9623794.912326] [24617]     0 24617    16665      178   6     -17         -1000 sshd\nJul 30 19:52:13 localhost kernel: [9623794.912328] [19232]     0 19232     9462     4671   6       0             0 secu-tcs-agent\nJul 30 19:52:13 localhost kernel: [9623794.912330] [19241]     0 19241      768      342   6       0             0 sap1004\nJul 30 19:52:13 localhost kernel: [9623794.912332] [19243]     0 19243     7866     3151   4       0             0 sap1005\nJul 30 19:52:13 localhost kernel: [9623794.912334] [19620]     0 19620    11827     1440   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.912336] [19628]     0 19628    15060     1839   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.912338] [19629]     0 19629   109425     2555   6       0             0 barad_agent\nJul 30 19:52:13 localhost kernel: [9623794.912340] [23964]     0 23964     1792     1402   6       0             0 sap1002\nJul 30 19:52:13 localhost kernel: [9623794.912341] [ 4812]     0  4812     9754     3741   6       0             0 sap1009\nJul 30 19:52:13 localhost kernel: [9623794.912344] [18891]     0 18891     2331       92   6       0             0 watchdog.sh\nJul 30 19:52:13 localhost kernel: [9623794.912346] [31004]    89 31004    20347      220   6       0             0 pickup\nJul 30 19:52:13 localhost kernel: [9623794.912348] [  934]     0   934     1018       21   1       0             0 sleep\n. \u597d\u7684\uff0c\b\u8c22\u8c22. \u7248\u672c\u53f7 2.2.3. ",
    "n59yl": "when?. ",
    "hiqbn": "Is cluster support coming soon?. Can you give example / more detailed explanation?. ",
    "boyxp": "\u662fpika\u81ea\u5e26\u7684\u52a0\u9501\uff1f\u8fd8\u662f\u81ea\u5df1\u5b9e\u73b0\u3002\u6211\u5f00wiki\u91cc\u6ca1\u6709\u76f8\u5173\u65b9\u6cd5\ud83d\ude02. \u7528\u538b\u6d4b\u5de5\u5177\u6a21\u62df\u5e76\u53d1100\uff0c\u6301\u7eed10\u79d2\uff0c\u65e0\u6cd5\u590d\u73b0\u4e86\u3002\n\u6211\u5728\u7ebf\u4e0a\u518d\u8bd5\u8bd5. ",
    "koolhazz": "\u770b\u5230\u4ee3\u7801\u7684\u65f6\u5019\u660e\u767d\u4e86\u8bbe\u7f6e\u7684\u903b\u8f91\u3002\u8c22\u8c22\u3002\n. \u6211\u4eec\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u4e5f\u78b0\u5230\u7c7b\u4f3c\u7684\u95ee\u9898\uff0c\u4f46\u662f\u6211\u4eec\u914d\u7f6e\u6ca1\u6709\u5f00\u542fcompact-cron . \n. \n. \u4ee5\u89e3\u51b3\u3002\u9700\u8981\u91cd\u65b0\u7f16\u8bd1rocketdb. ",
    "wangcn": "\u8d85\u51fa\u5185\u5b58\u5f88\u591a\u4e0d\u4f1a\u5f71\u54cd\u8bfb\u5199\u6027\u80fd\u5417\uff1f. ",
    "flyhope": "\u6709\uff0c\u4e0d\u8fc7\u6709104M\uff0c\u4f20\u4e0d\u4e0a\u6765\u5440\u3002\n\u7528redis-cli\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u8fde\u63a5\u4e0aPKIA\u540e\uff0c\u76f4\u63a5\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\uff0c100%\u5fc5\u73b0\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u91cd\u73b0\u4e00\u4e0b\u3002. ",
    "lhkzh": "\u55ef\uff0c\u597d\u7684\u3002\u6211\u5b9e\u9645\u5bf9\u6bd4\u4e86\u4e00\u4e0b\uff0c\u90a3\u4e2a\u5e95\u5c42nemo\u5b58\u50a8\u7684bit\u6570\u636e\u548credis\u7684\u4e5f\u662f\u6709\u5dee\u5f02\u7684\uff0c\u76f4\u63a5\u62d6\u8fc7\u53bb\u6362\u8fc7\u6765\uff0c\u662f\u6709\u4e9b\u95ee\u9898\u7684\uff0c\u6570\u636e\u4e0d\u4e00\u81f4\u3002. ",
    "masterdxy": "\u987a\u4fbf\u518d\u95ee\u4e00\u4e0b\uff0c\u6709\u6ca1\u6709\u76f8\u5173\u7684QQ\u7fa4\uff1f. Node 0 Normal free:54920kB min:54960kB low:68700kB high:82440kB active_anon:13169316kB inactive_anon:664kB active_file:884kB inactive_file:404kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:13445120kB mlocked:0kB dirty:12kB writeback:0kB mapped:1572kB shmem:684kB slab_reclaimable:56456kB slab_unreclaimable:196044kB kernel_stack:3776kB pagetables:36196kB unstable:0kB bounce:0kB writeback_tmp:0kB pages_scanned:608 all_unreclaimable? no\nlowmem_reserve[]: 0 0 0 0\nNode 0 DMA: 24kB 28kB 116kB 132kB 164kB 0128kB 1256kB 0512kB 11024kB 12048kB 34096kB = 15752kB\nNode 0 DMA32: 5364kB 1268kB 8716kB 7732kB 6864kB 63128kB 45256kB 19512kB 81024kB 42048kB 04096kB = 57056kB\nNode 0 Normal: 106034kB 3448kB 22516kB 12232kB 4164kB 0128kB 0256kB 0512kB 01024kB 02048kB 0*4096kB = 55292kB\n679 total pagecache pages\n0 pages in swap cache\nSwap cache stats: add 0, delete 0, find 0/0\nFree swap  = 0kB\nTotal swap = 0kB\n4194303 pages RAM\n110892 pages reserved\n1166 pages shared\n4035155 pages non-shared\n[ pid ]   uid  tgid total_vm      rss cpu oom_adj oom_score_adj name\n[  518]     0   518     2716      158   3     -17         -1000 udevd\n[  978]     0   978      373       21   2       0             0 aliyun-service\n[ 1105]     0  1105     2715      162   2     -17         -1000 udevd\n[ 1249]     0  1249    62799      668   1       0             0 rsyslogd\n[ 1265]     0  1265     6657       46   1       0             0 syslog-ng\n[ 1266]     0  1266    14157      137   1       0             0 syslog-ng\n[ 1286]    28  1286   157557      124   2       0             0 nscd\n[ 1313]     0  1313     6130      153   2       0             0 AliYunDunUpdate\n[ 1359]     0  1359    17458     1484   5       0             0 AliYunDun\n[ 1402]     0  1402    16556      178   0     -17         -1000 sshd\n[ 1413]    38  1413     6649      134   0       0             0 ntpd\n[ 1757]     0  1757    29223      177   0       0             0 crond\n[ 1906]     0  1906    37461     1149   3       0             0 AliHids\n[ 1971]     0  1971     1016       19   7       0             0 mingetty\n[ 1973]     0  1973     1016       18   5       0             0 mingetty\n[ 1975]     0  1975     1016       19   1       0             0 mingetty\n[ 1977]     0  1977     1016       19   0       0             0 mingetty\n[ 1979]     0  1979     2715      157   3     -17         -1000 udevd\n[ 1980]     0  1980     1016       18   4       0             0 mingetty\n[ 1982]     0  1982     1016       18   3       0             0 mingetty\n[ 5402]   496  5402    18691      101   6       0             0 zabbix_agentd\n[ 5408]   496  5408    18691      239   1       0             0 zabbix_agentd\n[ 5409]   496  5409    18692      135   0       0             0 zabbix_agentd\n[ 5410]   496  5410    18692      137   2       0             0 zabbix_agentd\n[16321]     0 16321  4963172  3929406   0       0             0 pika\nOut of memory: Kill process 16321 (pika) score 934 or sacrifice child\nKilled process 16321, UID 0, (pika) total-vm:19852688kB, anon-rss:15717252kB, file-rss:356kB\n. ",
    "askie": "@left2right \u4f7f\u7528\u7684\u5c31\u662f\u6700\u65b0\u7684Dockerfile\u8fdb\u884c\u7684build\uff0c\u51fa\u73b0\u7684\u4e0a\u9762\u7684\u9519\u8bef\u3002. docker build -f Dockerfile -t pika-image .\n\u8fd9\u4e00\u6b65\uff0c\u5c31\u662f\u7528\u7684Dockerfile\u8fdb\u884cbuild\uff0c\u5c31\u662f\u8fd9\u4e00\u6b65\u51fa\u9519\u8d70\u4e0d\u4e0b\u53bb\u7684\u3002\n@left2right . \u770b\u5230\u5dee\u522b\u4e86\uff0c\u6211\u518d\u8bd5\u8bd5\u770b. ",
    "wyf0705": "\u679c\u7136\u6253\u5f00\u4e86\u5c31\u53ef\u4ee5\u4e86\uff0c\u8c22\u8c22\uff01\n\u4f46\u73b0\u5728\u6709\u4e00\u4e2a\u65b0\u95ee\u9898\uff0ccodis3.0\u4ee5pika\u4f5c\u4e3aserver\uff0c\u5f53\u6211\u7528redis-benchmark\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u540e\u53f0pika-server\u6709\u6302\u6389\u7684\uff0c\u91cd\u542f\u4ee5\u540e\uff0c\u8fd8\u662f\u4f1a\u6709\uff0c\u770b\u65e5\u5fd7\u4e5f\u6ca1\u6709\u770b\u5230\u6302\u6389\u7684\u539f\u56e0\uff0c\u53ea\u662f\u62a5\u4e86\u5982\u4e0b\u4fe1\u606f\uff0c\u5e2e\u5fd9\u5206\u6790\u4e0b\uff0c\u8c22\u8c22\nLog file created at: 2017/05/03 14:22:46\nRunning on machine: tr730n91-app\nLog line format: [IWEF]mmdd hh:mm:ss.uuuuuu threadid file:line] msg\nE0503 14:22:46.263049 140454 pika_client_conn.cc:136] command: \"SET\" \"key:000015179466\" \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\", start_time(s): 1493792566, duration(us): 10266\nE0503 14:22:51.272236 140341 pika_client_conn.cc:136] command: \"SET\" \"key:000056986528\" \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\", start_time(s): 1493792571, duration(us): 13178\nE0503 14:22:51.272255 140386 pika_client_conn.cc:136] command: \"SET\" \"key:000078435589\" \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\", start_time(s): 1493792571, duration(us): 12900\nE0503 14:22:51.272265 140415 pika_client_conn.cc:136] command: \"SET\" \"key:000016099174\" \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\", start_time(s): 1493792571, duration(us): 12935\nE0503 14:22:51.272274 140401 pika_client_conn.cc:136] command: \"SET\" \"key:000001456346\" \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\", start_time(s): 1493792571, duration(us): 12932\n. \u6211\u8fd9\u8fb9\u770b\u4e86core\u6587\u4ef6\uff0c\u62a5\u4e86\u5982\u4e0b\u9519\u8bef\uff0c\u6211\u5728fe\u754c\u9762\u770bserver\u7684\u7a7a\u95f4\u90fd\u662f1GB\uff0c\u8fd9\u662f\u9ed8\u8ba4\u7684\u5417\uff1f\n(gdb) bt\n0  0x00000034fbc89788 in memcpy () from /lib64/libc.so.6\n1  0x000000000051ca95 in slash::PosixMmapFile::Append (this=0xdd91e0, data=Unhandled dwarf expression opcode 0xf3\n) at src//env.cc:433\n2  0x000000000045e695 in Binlog::EmitPhysicalRecord (this=0xdd8ff0, t=Unhandled dwarf expression opcode 0xf3\n) at src/pika_binlog.cc:273\n3  0x000000000045e842 in Binlog::Produce (this=0xdd8ff0, item=Unhandled dwarf expression opcode 0xf3\n) at src/pika_binlog.cc:321\n4  0x000000000045eaca in Binlog::Put (this=0xdd8ff0, item=...) at src/pika_binlog.cc:199\n5  0x0000000000469696 in PikaClientConn::DoCmd (this=0x7f4e18000a60, opt=...) at src/pika_client_conn.cc:108\n6  0x0000000000469ddc in PikaClientConn::DealMessage (this=0x7f4e18000a60) at src/pika_client_conn.cc:144\n7  0x00000000006285eb in pink::RedisConn::ProcessInputBuffer (this=0x7f4e18000a60) at src/redis_conn.cc:312\n8  0x0000000000628736 in pink::RedisConn::GetRequest (this=0x7f4e18000a60) at src/redis_conn.cc:355\n9  0x00000000004c0405 in pink::WorkerThread::ThreadMain (this=0xc04ba0)\nat ./third/pink/output/include/worker_thread.h:175\n\n10 0x0000000000624ef6 in pink::Thread::RunThread (arg=0xc04ba0) at src/pink_thread.cc:56\n11 0x00000034fc007aa1 in start_thread () from /lib64/libpthread.so.0\n12 0x00000034fbce893d in clone () from /lib64/libc.so.6\n. \u5173\u4e8e\u4e0a\u9762\u7684core\u6587\u4ef6\uff0c\u80fd\u5e2e\u5fd9\u5206\u6790\u4e00\u4e0b\u662f\u54ea\u91cc\u7684\u95ee\u9898\u5417\uff1f\u6211\u8fd9\u8fb9\u673a\u5668\u5185\u5b58\u5927\u6982\u6709200G\uff0cSSD\u67092\u4e2a\u591aT\uff0c\u7a7a\u95f4\u5e94\u8be5\u591f\u7528\uff0c\u6211\u8bd5\u4e86\u5f80\u5355\u4e2apika\u91cc\u538b\u6570\u636e\u6ca1\u95ee\u9898\uff0c\u5c31\u662f\u6302\u5230codis\u4e0b\u5c31\u4f1a\u6709\u6302\u6389\u7684\u3002\u3002\u3002. \u6211\u8fd9\u8fb9\u53c8\u8bd5\u4e86\u4e0b\uff0c\u5982\u679ccodis\u4e0b\u53ea\u6302\u4e00\u4e2apika\uff0c\u538b\u6570\u636e\u65f6\u4e0d\u4f1a\u6302\u6389\uff0c\u591a\u4e8e1\u4e2a\u5c31\u4f1a\u6709\u6302\u6389\u7684\uff0c\u6211\u8bd5\u4e86\u6302\u4e24\u4e2apika\uff0c\u538b\u4e00\u4f1a\u513f\u5c31\u6709\u4e00\u4e2a\u6302\u6389\u4e86. \u55ef\uff0c\u5df2\u7ecf\u628a\u76f8\u5173\u4fe1\u606f\u53d1\u7ed9\u4f5c\u8005\u5e2e\u5fd9\u89e3\u51b3\u4e86\uff0c\u591a\u8c22\uff01. ",
    "yleemj": "\u597d\u50cf\u662f\u6253\u5f00\u7684\u6587\u4ef6\u53e5\u67c4\u592a\u591a\u4e86\uff0c\u8c03\u5927\u5c31\u53ef\u4ee5\u4e86. ",
    "jasonhe88": "i messed up jemalloc and tcmalloc,,,,,,this issue got fixed. \u592a\u597d\u4e86\uff0c\u8c22\u8c22. ",
    "AleutianXie": "@left2right \u6211\u4eec\u7528codis 3.2 \u7ed9\u4e24\u4e2apika group migrate slot \u62a5slotsmgrttagslot-async\u547d\u4ee4\u4e0d\u652f\u6301\u3002\n. @spinlock \u6309\u4f60\u8bf4\u7684\u4fee\u6539\u540e\u8fd8\u662f\u4e0d\u884c\uff0c\n2017/05/26 17:34:02 topom_action.go:35: [WARN] slot-[0] process action\n2017/05/26 17:34:02 topom.go:222: [WARN] process slot action failed\n[error]: ERR value is not an integer or out of range\n    6   /usr/lib/golang/bin/src/github.com/CodisLabs/codis/pkg/utils/redis/client.go:55\n            github.com/CodisLabs/codis/pkg/utils/redis.(Client).Do\n    5   /usr/lib/golang/bin/src/github.com/CodisLabs/codis/pkg/utils/redis/client.go:161\n            github.com/CodisLabs/codis/pkg/utils/redis.(Client).MigrateSlot\n    4   /usr/lib/golang/bin/src/github.com/CodisLabs/codis/pkg/utils/redis/client.go:368\n            github.com/CodisLabs/codis/pkg/utils/redis.(Pool).MigrateSlot\n    3   /usr/lib/golang/bin/src/github.com/CodisLabs/codis/pkg/topom/topom_slots.go:241\n            github.com/CodisLabs/codis/pkg/topom.(Topom).newSlotActionExecutor.func1\n    2   /usr/lib/golang/bin/src/github.com/CodisLabs/codis/pkg/topom/topom_action.go:43\n            github.com/CodisLabs/codis/pkg/topom.(Topom).processSlotAction\n    1   /usr/lib/golang/bin/src/github.com/CodisLabs/codis/pkg/topom/topom_action.go:18\n            github.com/CodisLabs/codis/pkg/topom.(Topom).ProcessSlotAction\n    0   /usr/lib/golang/bin/src/github.com/CodisLabs/codis/pkg/topom/topom.go:221\n            github.com/CodisLabs/codis/pkg/topom.(*Topom).Start.func3\n        ... ...\n2017/05/26 17:34:08 topom_slots.go:86: [WARN] slot-[0] action prepare:. @left2right \u5df2\u7ecf\u65b0\u5f00issue. https://github.com/Qihoo360/pika/issues/100. \u70e6\u8bf7\u62bd\u7a7a\u770b\u770b\uff0c\u8c22\u8c22. ",
    "spinlock": "@AleutianXie Codis3.2 \u91cc\u9762\uff0c\u4fee\u6539\u4e00\u4e0b dashboard \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u628a migration \u7684\u65b9\u6cd5\u6539\u6210 sync \u6a21\u5f0f\u5c31\u53ef\u4ee5\u517c\u5bb9\u5df2\u6709\u7684\u5b9e\u73b0\u4e86\u3002. @left2right async \u7684\u8fc1\u79fb\u5bf9 Redis \u8fd9\u79cd single thread \u7684\u5e94\u7528\u8fd8\u662f\u6bd4\u8f83\u6709\u610f\u4e49\u7684\uff0c\u4f46\u662f\u5bf9 pika \u8fd9\u79cd\u591a\u7ebf\u7a0b\u60c5\u51b5\u5c31\u5f88\u96be\u8bf4\u3002\u4e0d\u8fc7\u65b0\u5f15\u5165\u7684 API \u53ef\u4ee5\u4e00\u4e2a batch \u79fb\u52a8\u591a\u4e2a Key/Value \u6570\u636e\uff0c\u4ece\u8fd9\u70b9\u4e0a\u770b\uff0c\u5982\u679c pika \u652f\u6301\u4e00\u4e0b\u7684\u8bdd\uff0c\u8fc1\u79fb\u5e94\u8be5\u4f1a\u6bd4\u4e4b\u524d\u6709\u4e0d\u5c0f\u63d0\u5347\u3002\n\u5173\u4e8e\u63a5\u53e3\uff0casync \u7684\u63a5\u53e3\u548c\u4e4b\u524d\u7684 sync \u63a5\u53e3\u53ea\u5728\u53c2\u6570\u4e0a\u6709\u4e00\u4e9b\u5dee\u5f02\uff0c\u8fd4\u56de\u503c\u683c\u5f0f\u4ee5\u53ca\u610f\u4e49\u6ca1\u53d8\uff08\u517c\u5bb9\u7684\uff09\u3002\n\u5176\u5b9e\u6ca1\u5fc5\u8981\u5173\u5fc3 3.2 \u4e0b\u9762\uff0c\u6211\u5bf9 Redis \u7684\u4fee\u6539\uff0c\u56e0\u4e3a Codis Proxy & Dashboard \u63a5\u53e3\u6ca1\u53d8\uff0c\u800c\u4e14\u4e0d\u5173\u5fc3\u5730\u4e0b\u5177\u4f53\u5b9e\u73b0\u7ec6\u8282\u3002\u54ea\u6015\u628a\u539f\u6709\u7684 sync \u7684\u8fc1\u79fb\u6362\u4e2a\u540d\u5b57\u3001\u53c2\u6570\u8c03\u6574\u4e00\u4e0b\u90fd\u80fd\u5de5\u4f5c\uff08\u6700\u5dee\u60c5\u51b5\u4e0b\uff0c\u53e6\u5f00\u4e00\u4e2a thread \u53bb\u505a migration\uff09\u3002Codis \u5728 Redis \u4e0a\u5b9e\u73b0\u7684\u8fd9\u4e48\u590d\u6742\u7684\u6700\u91cd\u8981\u7684\u539f\u56e0\u662f\u8003\u8651\u5230\u5355\u7ebf\u7a0b\uff0c\u800c pika \u663e\u7136\u6ca1\u6709\u8fd9\u4e2a\u987e\u8651\u3002. ",
    "winjeg": "\u8c22\u8c22. ",
    "treemanzhou": "\u597d\u7684 \u611f\u8c22. ",
    "uileyar": "\u6709\u6ca1\u6709\u4ece\u5b9e\u4f8b\u600e\u4e48\u770b\uff1f\ninfo Log\u83b7\u5f97\u7684\u6570\u636e\uff1a\nLog\nlog_size:1470M\nsafety_purge:write2file63\nexpire_logs_days:7\nexpire_logs_nums:10\nbinlog_offset:73 92888282\n. ",
    "BreakTom": "\u6743\u9650\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u6cd5\u53c2\u7167https://segmentfault.com/q/1010000000131667. \u55ef\uff0c\u89e3\u51b3\u4e86\uff0c\u8c22\u8c22. ",
    "mgxian": "\u6709\u89e3\u51b3\u65b9\u6cd5\u5417\uff1f @left2right . \u597d\u7684 \u8c22\u8c22  \u6211\u53bb\u770b\u4e0b. ",
    "derbyguyb": "\u8c22\u8c22\uff0c\u53bb\u5c1d\u8bd5\u4e00\u4e0b\uff0c\u8fd8\u6709\u4e2a\u95ee\u9898\u8bf7\u6559\uff0c\u6211\u5728dump\u76ee\u5f55\u4e0b\u53d1\u73b0\u6709\u4e24\u4e2a\u65e5\u671f\u76ee\u5f55\uff0c\u5e76\u4e14\u65e5\u671f\u76ee\u5f55\u4e0b\u7684\u76ee\u5f55\u7ed3\u6784\u548cdb\u4e0b\u7684\u7ed3\u6784\u4e00\u6837\uff0c\u6211\u600e\u4e48\u6e05\u7406dump\u76ee\u5f55\u4e0b\u7684\u6570\u636e\uff0cdumpoff\u53ef\u4ee5\u5417\uff1f. \u8c22\u8c22. \u6211\u4e5f\u7528\u4e86multi + exec\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u62a5\u9519\uff0c\u8bf7\u95eepika\u7684\u4e0d\u652f\u6301\u662f\u5ffd\u7565\u8fd9\u4e9b\u547d\u4ee4\uff1f\uff0c\u8fd8\u662f\u62a5\u9519\uff1f\u4f46\u6211\u5b9e\u9645\u4f7f\u7528\u5e76\u6ca1\u6709\u6536\u5230\u9519\u8bef\u3002. \u8bf7\u95eepika\u662f\u5426\u6253\u7b97\u6709\u652f\u6301multi, exec\uff1f. pika\u662f\u600e\u4e48\u81ea\u52a8\u6e05\u9664\u8fc7\u671f\u7684\u6570\u636e\u7684\uff1f. \u5982\u679cpika\u91cc\u9762\u67095,6\u767e\u4e07\u7684\u7684key\uff0c\u5e76\u4e14\u90fd\u662f\u6709\u8fc7\u671f\u65f6\u95f4\u7684\uff0c\u6bcf\u5929\u90fd\u670916000\u4e2a\u5de6\u53f3\u7684key\u4f1a\u8fc7\u671f\uff0c\u8bf7\u95eepika\u662f\u600e\u4e48\u81ea\u52a8\u6e05\u7406\u8fd9\u4e9b\u8fc7\u671f\u6570\u636e\u7684\u5462\uff1f\u5927\u6982\u9700\u8981\u591a\u4e45\uff1f\u8c22\u8c22. \u770b\u4e86\u4f60\u4eec\u7684\u6587\u6863\uff0c\u53d1\u73b0\u662f\u7528version\u5b57\u6bb5\u6765\u6807\u8bb0\u5220\u9664\uff0c\u4e0d\u662f\u5b9e\u9645\u5220\u9664\u6570\u636e\uff0c\u6211\u4e5f\u4e3b\u52a8\u4f7f\u7528DEL\u8fdb\u884c\u5220\u9664\u8fd4\u56de\u7684\u662f\u201c0\u201d\uff0c\u518d\u4f7f\u7528HGETALL\u8fd8\u662f\u53ef\u4ee5\u83b7\u53d6\u5230\u6570\u636e\uff0c\u90a3\u4e48\u4f60\u4eec\u5927\u6982\u591a\u4e45\u4f1a\u6e05\u7406\u8fd9\u4e9b\u5df2\u7ecf\u88ab\u6807\u8bb0\u4e3a\u5220\u9664\u7684\u6570\u636e\u5462\uff1f. \u5f53\u524d\u7ebf\u4e0a\u7684\u6570\u636e\u5c31\u662f\u8fd9\u79cd\u60c5\u51b5\uff0ckey\u662f\u6709\u8fc7\u671f\u7684\uff0c\u53d1\u73b0\u672c\u5e94\u8be5\u8fc7\u671f\u7684key\u786e\u8fd8\u5b58\u5728\u7740\uff0cttl\u8fd4\u56de-2\uff0cdel\u8fd4\u56de0\uff0c\u4f46\u662f\u8fd8\u662f\u53ef\u4ee5\u7528hgetall\u83b7\u53d6\u6570\u636e \n\n. \u5df2\u7ecf\u5347\u7ea7\u52302.2.6\u4e86\uff0c\u73b0\u5728\u4e5f\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u4e86\uff0c\u5475\u5475. \u76f8\u540c\u95ee\u9898\uff0c\u8bf7\u6559\u6709\u4ec0\u4e48\u529e\u6cd5\u89e3\u51b3\u5417\uff1f\u67e5\u770bslave\u7684\u673a\u5668\uff0crsync\u4f7f\u7528\u5185\u7f51ip\u76d1\u542c\uff0c\u770b\u4e86master\u7684log\uff0c\u4e5f\u662f\u5f80slave\u7684\u5185\u7f51ip\u53d1\u9001\uff0c\u5bfc\u81f4\u5168\u91cf\u540c\u6b65\u5931\u8d25. thread-num\u662f\u4e0d\u662f\u51b3\u5b9a\u4e86WorkerThread\u7684\u6570\u91cf\uff1f\nBinlogReceiver\uff1a\u5b58\u57281\u4e2a\uff0c\u90a3\u4e48sync-thread-num\u5230\u5e95\u51b3\u5b9a\u7684\u662f\u4ec0\u4e48\u662fmaster\u7684BinlogSender\u5417\uff1f. \u8fd8\u662fsync-thread-num\u51b3\u5b9a\u4e86BinlogBGWorker\u7684\u6570\u91cf\uff1f. \u673a\u5668\u4e3a4\u683830G\u5185\u5b58. \u539f\u56e0\u5e94\u8be5\u662f\u9879\u76ee\u91cc\u4f1a\u6709\u53d1\u9001DEL\u547d\u4ee4\uff0c\u5c1d\u8bd5\u4fee\u5c06DEL\u6539\u4e3aEXPIRE key 1\u6765\u8fbe\u5230\u5220\u9664\u6570\u636e\u540eCPU\u5c31\u6062\u590d\u4e86\n\u5e76\u4e14\u67e5\u770bLOG\u6587\u4ef6\uff0c\u53d1\u73b0DEL\u4f1a\u89e6\u53d1 [default] Manual compaction starting\n\u4e0d\u77e5\u9053\u8fd9\u79cd\u60c5\u51b5\u662f\u4e0d\u662f\u53ef\u4ee5\u8fdb\u884c\u4f18\u5316\n. \u597d\u7684\uff0c\u8c22\u8c22\uff0c\u90a3\u4e48\u5bf9\u4e8eDEL\u8fd9\u79cd\u60c5\u51b5PIKA\u662f\u5426\u80fd\u8003\u8651\u76f8\u5173\u7684\u4f18\u5316\uff0c\u800c\u4e0d\u662f\u6bcf\u4e2aDEL\u547d\u4ee4\u90fd\u89e6\u53d1COMPACT\u5462. ",
    "Hisoka-J": "\u4f60\u5c06\u8981\u7528\u5728\u4ec0\u4e48\u573a\u666f\uff1f. \u5982\u679c\u4e0d\u9700\u8981\u8003\u8651\u589e\u91cf\u6570\u636e\u7684\u8bdd\uff0c\u4f1a\u6bd4\u8f83\u5bb9\u6613\u505a. 1.\u4ece\u5e93\u662f\u5426\u7ecf\u5386\u4e86\u5168\u91cf\u540c\u6b65\uff1f\n2.\u5982\u679c\u662f\u7eed\u4f20\uff0c\u662f\u5426\u4e3a\u624b\u52a8\u8bbe\u7f6eoffset\uff1f\n3.\u5f53\u524d\u540c\u6b65\u529f\u80fd\u662f\u5426\u6b63\u5e38\uff1f\u65b0\u6267\u884c\u7684incr\u547d\u4ee4\u80fd\u5426\u6b63\u5e38\u540c\u6b65\uff1f. \u6211\u4eec\u5c1d\u8bd5\u4e86\u591a\u6b21\u90fd\u672a\u80fd\u590d\u73b0\uff0c\u8bf7\u5e2e\u5fd9\u63d0\u4f9b\u66f4\u591a\u7ec6\u8282\uff0c\u8c22\u8c22\uff01\n\n. redis\u91cc\u9762 info all \u53ef\u4ee5\u770b\u5230\u5404\u4e2a\u547d\u4ee4\u7684qps\u65f6\u95f4\u4ee5\u53ca\u54cd\u5e94\u65f6\u95f4\uff0c \u5e0c\u671b\u80fd\u52a0\u66f4\u591a\u8fd9\u65b9\u9762\u7684\u4fe1\u606f\u3002\n\u8fd9\u4e2a\u4e00\u5b9a\u4f1a\u5bf9\u6027\u80fd\u9020\u6210\u5f71\u54cd\uff0c\u6211\u4eec\u9700\u8981\u8bc4\u4f30\u4e00\u4e0b\n\n\u53e6\u5916 key\u6570\u91cf \u4fe1\u606f\u80fd\u5426\u5b9e\u73b0\u7684\u8ddfredis\u4e00\u6837\u7cbe\u51c6\npika\u5bf9\u4e8ekey\u7684\u5c55\u793a\u662f\u7cbe\u51c6\u7684\uff0c\u4f8b\u5982\u5df2\u7ecf\u8fc7\u671f\u7684key\u662f\u7edd\u5bf9\u4e0d\u4f1a\u88ab\u8bb0\u5165\u7684\uff0c\u4f46\u505a\u65e0\u6cd5\u505a\u5230\u5b9e\u65f6\u7edf\u8ba1\uff0c\u8fd9\u4e2a\u95ee\u9898\u76ee\u524d\u89e3\u51b3\u4e0d\u4e86\uff0c\u62b1\u6b49. \u6211\u4eec\u5df2\u7ecf\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u8ba1\u5212\u672c\u5468\u5185\u53d1\u5e03. \u90a3\u4e2a\u8fc7\u671f\u65f6\u95f4\u7684\u95ee\u9898\uff1f\u6211\u770b\u53cd\u9988\u4e86\u54e6\uff0c\u76ee\u524d\u7ef4\u6301\u73b0\u72b6\u3002. @hea \n\u975e\u5e38\u68d2\u7684\u6d4b\u8bd5. 2.3.1\u5c06\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898. \u4e4b\u524d\u6211\u4eec\u8003\u8651\u8fc7\uff0c\u4f46\u56e0\u4e3a\u5728\u5927\u6570\u636e\u91cf\u4e0b\u5168\u91cf\u540c\u6b65\u8017\u65f6\u592a\u4e45\u800c\u6700\u7ec8\u653e\u5f03\uff0c\u4e0d\u8fc7\u6211\u4eec\u4f1a\u63d0\u4f9b\u5176\u5b83\u65b9\u6765\u5b9e\u73b0\u4e0d\u505c\u673a\u5347\u7ea7. \u53ef\u4ee5\u4f7f\u7528\ninfo stats\n\u67e5\u770bcompact\u3001keyspace\u662f\u5426\u6267\u884c\u5b8c\u6bd5\n\u76ee\u524d\u8fd8\u6ca1\u6709\u8fdb\u5ea6\u6761\u7684\u529f\u80fd. \u56e0\u4e3a\u4f60\u6ca1\u6709\u914d\u7f6euserpass\uff0c\u6240\u4ee5userpass\u4e3a\u7a7a\uff0c\u90a3\u4e48\u5f53\u672a\u4f7f\u7528\u5bc6\u7801\u7684\u65f6\u5019\u5c31\u4f1a\u4ee5user\u7684\u8eab\u4efd\u767b\u5f55\n\u6211\u4eec\u5efa\u8bae\u4e0d\u8981\u5c06\u4efb\u4f55\u5bc6\u7801\u53c2\u6570\u8bbe\u7f6e\u4e3a\u7a7a. \u53ef\u80fd\u662f\u7279\u6b8a\u5b57\u7b26\u9020\u6210\u7684\u95ee\u9898\uff0c\u540e\u7eed\u6211\u4eec\u8fdb\u884c\u4fee\u590d\uff0c\u611f\u8c22\u53cd\u9988\uff0c\u5bf9\u4f7f\u7528\u7684\u4e0a\u7684\u4e0d\u4fbf\u8868\u793a\u62b1\u6b49. \u76ee\u524duserblacklist\u53ea\u80fd\u9650\u5236\u901a\u8fc7userpass\u767b\u5f55\u7684\u7528\u6237\n\u901a\u8fc7requirepass\u767b\u5f55\u7684\u7528\u6237\u4e0d\u53d7userblacklist\u7684\u9650\u5236. DEL\u547d\u4ee4\u89e6\u53d1\u7684COMPACT\u4f1a\u6dd8\u6c70\u6389\u5df2\u88ab\u5220\u9664\u7684\u6570\u636e\uff0c\u800cEXPIRE\u7684KEY\u5e76\u4e0d\u4f1a\u5728TLL\u5230\u671f\u540e\u7acb\u5373\u88ab\u5f15\u64ce\u6dd8\u6c70\u6389\u76f8\u5173\u6570\u636e\uff0c\u6240\u4ee5\u4f60\u7684\u95ee\u9898\u6709\u6240\u6539\u5584\u3002\n\u4f46\u8fd9\u4e9b\u6ca1\u6709\u53ca\u65f6\u6dd8\u6c70\u7684\u6570\u636e\u7ec8\u7a76\u90fd\u4f1a\u56e0COMPACT\u800c\u6dd8\u6c70\u6389\uff0c\u800c\u90a3\u65f6\u6d89\u53ca\u5927\u91cf\u6dd8\u6c70\u6570\u636e\u7684COMPACT\u5bf9\u4f60\u7684\u5f71\u54cd\u53ef\u80fd\u4f1a\u66f4\u5927\u3002\n\u672a\u53ca\u65f6\u6dd8\u6c70\u7684\u6570\u636e\u548cCOMPACT\u7684\u5173\u7cfb\u5c31\u597d\u6bd4\uff1a\u51fa\u6765\u6df7\uff0c\u8fdf\u65e9\u8981\u8fd8. \u4f60\u597d\uff0c\u8fd9\u4e2a\u529f\u80fd\u6211\u4eec\u5728\u65b0\u5f15\u64ce\u91cd\u6784\u5b8c\u6bd5\u4e4b\u540e\u4f1a\u5c1d\u8bd5\u589e\u52a0\u3002\n. \u76ee\u524dpika\u5e76\u6ca1\u6709\u50cfredis\u90a3\u6837\u7ef4\u62a4\u4e00\u4e2akey\u7684\u201c\u8bbf\u95ee\u8bb0\u5f55\u201d\uff0c\u6240\u4ee5\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u7c7b\u4f3c\u7684\u547d\u4ee4. \u9664\u4e86\u5199\u5165\u6d41\u91cf\u589e\u957f\u9020\u6210\u7684io\u538b\u529b\u589e\u5927\uff0cpika\u7684auto-compact\u4e5f\u4f1a\u5360\u7528\u4e00\u5b9aIO\uff0c\u4f46auto-compact\u4e5f\u662f\u7531\u5199\u5165\u89e6\u53d1\u7684. \u76ee\u524d\u53ea\u6709db0\u5e76\u4e14\u65e0\u8bbaselect n\u5176\u5b9e\u90fd\u662fselect 0\n\u540e\u7eed\u4f1a\u652f\u6301\u591adb\uff0c\u4f46\u7531\u4e8e\u6d89\u53ca\u5230\u5f15\u64ce\u5c42\u7684\u8bbe\u8ba1\uff0c\u8fd9\u4e2a\u529f\u80fd\u65e0\u6cd5\u592a\u5feb\u5b9e\u73b0. \u597d\u7684\u6211\u4eec\u770b\u4e00\u4e0b. \u53ef\u5426\u5c06flushall\u5907\u4efd\u65f6mv\u6587\u4ef6\u5939\u65f6\u5019\uff0c\u76ee\u6807\u6587\u4ef6\u5939\u540d\u79f0\u589e\u52a0\u65f6\u95f4\u6233\n\u8fd9\u4e2a\u6211\u4eec\u8ba8\u8bba\u4e00\u4e0b\n\u53e6\u5916flushall\u547d\u4ee4\u53ef\u4ee5\u914d\u7f6e\u6539cmd\u540d\npika\u652f\u63012\u4e2a\u7528\u6237\uff1aadmin/user\uff0cuser\u7528\u6237\u6709\u4e13\u95e8\u7684\u7528\u6237\u547d\u4ee4\u9ed1\u540d\u5355\u529f\u80fd. @xcl3721 @digitzone \npika\u65b0\u7248\u662f\u52a0\u4e86\u6162\u65e5\u5fd7\u6765\u6e90IP\u7684\uff0c\u8bf7\u770b\u4e00\u4e0bchange log. \u4e0d\u652f\u6301\uff0c\u4e0d\u8981\u8fd9\u6837\u4f7f\u7528. \u540e\u7eed\u4f1a\u589e\u52a0\u76f8\u5173\u529f\u80fd. \u8bd5\u4e00\u4e0b\nslaveof 172.26.22.141  9221. \u5982\u679c\u662fredis4.0\u53ca\u4ee5\u4e0a\u7248\u672c\uff0c\u5728\u4f7f\u7528aof_to_pika\u7684\u65f6\u5019\u9700\u8981\u5173\u95ed\u6df7\u5408aof\u53c2\u6570. \u8fd9\u4e2a\u529f\u80fd\u5df2\u7ecf\u5728\u6211\u4eec\u7684\u6539\u8fdb\u5217\u8868\u4e2d. \u8bd5\u7740\u5c06timeout\u8bbe\u7f6e\u523028800\uff0c\u89c2\u5bdf\u4e00\u4e0b\u95ee\u9898\u662f\u5426\u4ecd\u7136\u5b58\u5728\uff0c\u5982\u679c\u89e3\u51b3\u90a3\u4e48\u8bf7\u5728\u4ee3\u7801\u4e2d\u589e\u52a0\u91cd\u8fde\u673a\u5236\uff0c\u907f\u514d\u8fde\u63a5sleep\u540e\u8fbe\u5230timeout\u9608\u503c\u88abpika server\u5f3a\u5236\u65ad\u5f00. > timeout\u53ef\u4ee5\u50cfredis\u4e00\u6837\u8bbe\u7f6e\u62100\u561b\uff0c\u5c31\u662f\u6ca1\u6709\u8d85\u65f6\u65ad\u5f00\n\u53ef\u4ee5\uff0ctimeout\u53c2\u6570\u8bbe\u7f6e\u4e3a0\u65f6\u4e3a\u4e0d\u8d85\u65f6\n. \u4e0d\u652f\u6301\u7684. Please reply the HLEN results of these 4 keys. > 127.0.0.1:9221> HLEN test1.20190219_155201\n\n(integer) 60023872\n127.0.0.1:9221> HLEN test2.20190216_083002\n(integer) 62658203\n127.0.0.1:9221> HLEN test3.20190219_215201\n(integer) 41451168\n127.0.0.1:9221> HLEN test4.20190219_075501\n(integer) 41451168\n\nIf you deleted lots of keys, you need run 'compact' to free up disk space.You can use the 'is_compact' status value in 'info stats' to see the running status of the compact. If its status is 'ALL', it indicates that this compact is still running. Disk space will be released when 'compact' ends.. \u5177\u4f53\u662f\u54ea\u4e2a\u7248\u672c\u7684pika\uff1f. \u662f\u4f8b\u5982\u5f15\u64ce\u5c42\u3001\u6570\u636e\u7ed3\u6784\u7684\u5b9e\u73b0\u4e48\uff1f. ",
    "jellychen": "so \u4ec0\u4e48\u65f6\u5019\u652f\u6301\u554a\uff1f. ",
    "dio": "Do we have this pika proxy ready? Is the way using twemproxy is the same as ssdb or redis cluster itself?. ",
    "AlexStocks": "I think it should upload its conf while running.. ",
    "digitzone": "\u8bfb\u53d6\u662fphp redis\u7684\u63a5\u53e3\n\u6d4b\u8bd5\u670d\u52a1\u5668\uff0c\u538b\u6d4b\uff0c\u5355\u8fdb\u7a0b\u53ea\u80fd\u523010\u5de6\u53f3\n\u670d\u52a1\u5668\u662f\u7ebf\u4e0a\u7684slave\uff0c\u53ea\u8dd1pika\uff0c\u6d4b\u8bd5\u7684\u65f6\u5019CPU\u98d9\u5347\n\u7ebf\u4e0a\u90fd\u662f\u7528\u7684 php redis\u63a5\u53e3. \u6211\u518d\u8865\u5145\u4e00\u70b9\n20181201.log:E1201 12:49:35.914727 15149 pika_binlog_bgworker.cc:81] command:flushall, start_time(s): 1543639775, duration(us): 477792\n\u8fd9\u4e2a\u6162\u67e5\u8be2\u65e5\u5fd7\u6ca1\u6709\u5199\u6e90IP\n\u5982\u679c\u5199\u4e86\u6e90ip\uff0c\u6211\u5c31\u6709\u53ef\u80fd\u627e\u5230\u6267\u884c\u547d\u4ee4\u7684\u4eba\uff0c\u8ba9\u4ed6\u53bb\u627e\u9886\u5bfc\u8ba4\u9519\uff0c\u6211\u7684\u9505\u80fd\u51cf\u5c1130%\n\u5bf9\u6807redis\u91cc\u662f\u6709\u6e90ip\u5730\u5740\u7684\u3002\u3002\u3002\u3002\n. ",
    "moshangcheng": "@KernelMaker, thanks, it's OK now. ",
    "rfyiamcool": "\u6069\u6069\uff0c\u611f\u8c22. \u53ef\u4ee5\u7684\uff0c\u65b0\u7248\u662f\u517c\u5bb9\u7684. \u597d\u7684\uff0c\u8c22\u8c22. \u6069\u6069, \u8c22\u8c22.    . good luck. @Axlgrep A @fancy-rabbit  \u8c22\u8c22\u5927\u795e\u66f4\u65b0\u3002. ",
    "guoeq": "@baotiao 2.2.0 \u5df2\u7ecf\u652f\u6301codis\u4e86\uff1f. @baotiao \u54c8\u54c8\uff0c\u6211\u4eec\u7684\u6587\u6863\u9700\u8981\u66f4\u65b0\u4e00\u4e0b\u4e86. ",
    "LordRoad": "ENV: integrated pika with jedis.  use it with basic API: hgetall, get, set, expire...\nperformance:\n\n\nkeys with ttl, recommended conf in production env. almost all 32GB physical memory is swallowed by pika but only ~7GB db data.  connection leak? ttl leak? or caused by pika setting?\n\n\nrestart pika, hgetall always not usable (pretty slow).  we had to flush all.\n\n\nany suggestion? . ",
    "batcom": "@Leviathan1995\n\u5c31\u662fpika\u5b98\u65b9\u9ed8\u8ba4\u7684\u914d\u7f6e\n@baotiao \u4f46\u662f\u6211\u7684\u5185\u5bb9\u7684\u786e\u4e22\u5931\u4e86\uff0c\u6d4b\u8bd5\u4e86\u597d\u51e0\u6b21\uff0c\u6240\u4ee5\u624d\u8bf4\u4e0d\u6562\u7528\u7684\uff0c\u4e0d\u77e5\u9053\u662f\u4e0d\u662f\u914d\u7f6e\u6709\u95ee\u9898\u3002\u4f60\u82e5\u4e0d\u4fe1\uff0c\u6211\u53ef\u622a\u56fe\u91cd\u73b0\u4f60\u770b\u3002\nPika port\nport : 9221\nThread Number\nthread-num : 1\nSync Thread Number\nsync-thread-num : 6\nItem count of sync thread queue\nsync-buffer-size : 10\nPika log path\nlog-path : ./log/\nPika glog level: only INFO and ERROR\nloglevel : info\nPika db path\ndb-path : ./db/\nPika write-buffer-size\nwrite-buffer-size : 268435456\nPika timeout\ntimeout : 60\nRequirepass\nrequirepass :pikamdaxue520\nMasterauth\nmasterauth :pikamdaxue520\nUserpass\nuserpass :mdaxue\nUser Blacklist\nuserblacklist :\nDump Prefix\ndump-prefix :\ndaemonize  [yes | no]\ndaemonize : yes\nslotmigrate  [yes | no]\nslotmigrate : no\nDump Path\ndump-path : ./dump/\nExpire-dump-days\nexpire-dump-days : 1\npidfile Path\npidfile : ./pika.pid\nMax Connection\nmaxclients : 20000\nthe per file size of sst to compact, defalut is 2M\ntarget-file-size-base : 20971520\nExpire-logs-days\nexpire-logs-days : 7\nExpire-logs-nums\nexpire-logs-nums : 10\nRoot-connection-num\nroot-connection-num : 2\nSlowlog-log-slower-than\nslowlog-log-slower-than : 10000\nslave-read-only(yes/no, 1/0)\nslave-read-only : 0\nPika db sync path\ndb-sync-path : ./dbsync/\ndb sync speed(MB) max is set to 125MB, min is set to 0, and if below 0 or above 125, the value will be adjust to 125\ndb-sync-speed : -1\nnetwork interface\nnetwork-interface : eth1\nreplication\nslaveof : master-ip:master-port\nCronTask, format: start:end-ratio, like 02-04/60, pika will check to schedule compaction between 2 to 4 o'clock everyday\nif the freesize/disksize > 60%\ncompact-cron :\n\nCritical Settings\n\nbinlog file size: default is 100M,  limited in [1K, 2G]\nbinlog-file-size : 104857600\nCompression\ncompression : snappy\nmax-background-flushes: default is 1, limited in [1, 4]\nmax-background-flushes : 1\nmax-background-compactions: default is 1, limited in [1, 4]\nmax-background-compactions : 2\nmax-cache-files default is 5000\nmax-cache-files : 5000\nmax_bytes_for_level_multiplier: default is 10, you can change it to 5\nmax-bytes-for-level-multiplier : 10\n. \u76f4\u63a5kill -9 \u6216\u8005\u91cd\u542f\u7684\u65f6\u5019\uff0c\u5728\u81ea\u5df1\u673a\u5668\u4e0a\u9762\uff0c\u53e6\u5916pika\u53ef\u6709systemd \u81ea\u542f\u52a8\u811a\u672c\uff0c\u56e0\u4e3a\u6211\u5728/etc/rc.local \u91cc\u9762\u76f4\u63a5\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\u7684bin/pika -c conf/pika.conf\u90fd\u4e0d\u884c\uff0c(/etc/rc.local\u91cc\u4e5f\u6709\u5176\u5b83\u547d\u4ee4\uff0c\u90fd\u80fd\u6b63\u5e38\u6267\u884c\uff0c\u987a\u5e8f\u4e5f\u6362\u8fc7). @songdeng1990 \u611f\u8c22\uff0c\u6d4b\u8bd5\u4e86\u4e0b\uff0c\u8fd8\u771f\u662f\u8fd9\u4e2a\u95ee\u9898\u5bfc\u81f4\u7684\u3002\u592a\u611f\u8c22\u4e86\u3002. ",
    "songdeng1990": "@batcom \u53ef\u80fd\u6ce8\u610f\u4e0b\uff0c\u7531\u4e8e\u914d\u7f6e\u6587\u4ef6\u4e2ddb-path : ./db/\uff0c\u8fd9\u662f\u4e2a\u76f8\u5bf9\u76ee\u5f55\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u6bcf\u6b21\u6267\u884c\u7684bin/pika -c conf/pika.conf\u6240\u5728\u7684\u76ee\u5f55\u4e0d\u540c\uff0c\u53ef\u80fd\u5bfc\u81f4\u6bcf\u6b21\u542f\u52a8\u90fd\u5728\u4e00\u4e2a\u65b0\u7684\u76ee\u5f55\u542f\u52a8\u7684\uff0c\u9020\u6210\u6570\u636e\u4e22\u5931\u7684\u5047\u50cf\u3002\u6240\u4ee5db-path\u7b49\u76ee\u5f55\u914d\u7f6e\u6700\u597d\u914d\u7f6e\u6210\u7edd\u5bf9\u8def\u5f84\u3002\u6211\u8e29\u8fc7\u8fd9\u4e2a\u5751~~. ",
    "lordoffox": "\u65b0\u5efa\u7684\u4e3b\u5e93\u548c\u65b0\u5efa\u7684\u4ece\u5e93\n\u7136\u540e\u6211\u518d\u6b21\u6267\u884c\u4e3b\u5e93\u7684incr\uff0c\u4ece\u5e93\u5230\u73b0\u5728\u8fd8\u6ca1\u6709\u5bf9\u5e94\u7684key. \u7b2c\u4e8c\u6b21incr\u7684\u540c\u6b65\u8fc7\u6765\u4e86\uff0c\u4f46\u662f\u4e3b\u5e93\u548c\u4ece\u5e93\u7684\u503c\u4e0d\u4e00\u6837\uff0c\u5e94\u8be5\u662f\u6f0f\u6389\u4e86\u4e00\u4e2a\n\u8bf7\u95ee\u600e\u4e48\u8fdb\u884c\u624b\u52a8\u5168\u91cf\u540c\u6b65\u5462. \u5177\u4f53\u6b65\u9aa4\u662f\n\u65b0\u5efa\u4e3b\u5e93\nincr set\u7b49\u4e00\u4e9b\u64cd\u4f5c\u540e\n\u4ece\u5e93\u518d\u8fde\u4e0a\u6765\nincr\u7684key\u6ca1\u6709\u5728\u4ece\u5e93\u770b\u89c1\n\u7136\u540e\u4e3b\u5e93\u518d\u6b21incr\n\u4ece\u5e93\u80fd\u770b\u89c1incr\u7684key\uff0c\u4f46\u662f\u503c\u4e0d\u4e00\u6837. ",
    "dumingyou": "debian\u73af\u5883\n\u4e34\u65f6\u89e3\u51b3\u65b9\u6cd5\uff1a\n\u4fee\u6539rsync.cc\uff0c  rsync \u547d\u4ee4\u524d\u52a0sudo\nsudo rsync kill\nsudo rsync --daemon\u3002\u3002\u3002. ",
    "CocaCola183": "@KernelMaker \u597d\u7684\uff0c\u6211\u8bd5\u4e0b. @Leviathan1995 \u611f\u8c22\u6062\u590d\uff01\u6211\u5148\u8bd5\u8bd5. @Leviathan1995 \u4e0d\u597d\u610f\u601d\u518d\u8bf7\u6559\u4e0bdelbackup\u547d\u4ee4\u5982\u4f55\u4f7f\u7528\uff1f\u6211\u5728\u6587\u6863\u4e2d\u6ca1\u6709\u627e\u5230\u3002\u3002. \u597d\u7684. @Leviathan1995 \u95ee\u9898\u89e3\u51b3\u4e86\uff0c\u975e\u5e38\u611f\u8c22. \u770b\u5230wiki\u7684\u76f8\u5173\u5185\u5bb9\u4e86\n```\n\u538b\u7f29\u65b9\u5f0f[snappy | none]\u9ed8\u8ba4\u4e3asnappy\uff0c\u4e00\u65e6\u542f\u52a8\u4e0d\u53ef\u4fee\u6539\ncompression : snappy\n```. ",
    "yanbingwei86": "\u4e0b\u8f7d\u6e90\u7801\u7f16\u8bd1\u5404\u79cd\u7f3a\u6587\u4ef6\uff0c\u597d\u7d2f\uff0c\u7f16\u8bd1\u9009\u9879\u6709\u70b9\u4e71. \u6211\u5df2\u7ecf\u4e0b\u8f7d\u4e86\uff0c\u4f46\u662fmake\u7f16\u8bd1\u7684\u65f6\u5019\u662f\u5c42\u5c42\u9012\u8fdb\u7684\uff0c\u5230third\u76ee\u5f55\u4e0b\u9762\u7684\u4f9d\u8d56\u5305\u65f6\u53c8\u6709\u5404\u79cd\u7f16\u8bd1\u9519\u8bef. git submodule\u5e76\u4e0d\u80fd\u4e00\u6b21\u4e0b\u8f7d\u5168\u90e8\u7684\u4f9d\u8d56\uff0c\u6211\u4e5f\u662fgit submodule\u4e0b\u8f7d\u7684\n. \u597d \u6211\u770b\u4e0b\u5230\u5e95\u4f9d\u8d56\u591a\u5c11\u5c42. ",
    "hawkingrei": "@fancy-rabbit pika\u4e0d\u652f\u6301codis3.2,\u5e0c\u671b\u4e4b\u540e\u53ef\u4ee5\u5b8c\u7f8e\u652f\u6301. ",
    "xtudouh": "PMAP \n12872:   /usr/local/pika/bin/pika -c /usr/local/pika/conf/pika.6379.conf\nAddress           Kbytes     RSS   Dirty Mode   Mapping\n0000000000400000    3524    3392       0 r-x--  pika\n0000000000970000       8       8       8 rw---  pika\n0000000000972000      52      52      52 rw---    [ anon ]\n0000000001ad3000 138901300 36986568 36986568 rw---    [ anon ]\n00000037aa600000      20      20       0 r-x--  libsnappy.so.1\n00000037aa605000    2044       0       0 -----  libsnappy.so.1\n00000037aa804000       4       4       4 rw---  libsnappy.so.1\n00007f89a544c000       4       0       0 -----    [ anon ]\n00007f89a544d000    8192      24      24 rw---    [ anon ]\n00007f89a5c4d000    4096    2452     584 rw-s-  write2file1571\n00007f89a604d000       4       0       0 -----    [ anon ]\n00007f89a604e000    8192       8       8 rw---    [ anon ]\n00007f89a684e000       4       0       0 -----    [ anon ]\n00007f89a684f000    8192       8       8 rw---    [ anon ]\n00007f89a704f000       4       0       0 -----    [ anon ]\n00007f89a7050000    8192       8       8 rw---    [ anon ]\n00007f89a7850000       4       0       0 -----    [ anon ]\n00007f89a7851000    8192       8       8 rw---    [ anon ]\n00007f89a8051000       4       0       0 -----    [ anon ]\n00007f89a8052000    8192       8       8 rw---    [ anon ]\n00007f89a8852000       4       0       0 -----    [ anon ]\n00007f89a8853000    8192      20      20 rw---    [ anon ]\n00007f89a9053000       4       0       0 -----    [ anon ]\n00007f89a9054000    8192      20      20 rw---    [ anon ]\n00007f89a9854000       4       0       0 -----    [ anon ]\n00007f89a9855000    8192      20      20 rw---    [ anon ]\n00007f89aa055000       4       0       0 -----    [ anon ]\n00007f89aa056000    8192      20      20 rw---    [ anon ]\n00007f89aa856000       4       0       0 -----    [ anon ]\n00007f89aa857000    8192      16      16 rw---    [ anon ]\n00007f89ab057000       4       0       0 -----    [ anon ]\n00007f89ab058000    8192      20      20 rw---    [ anon ]\n00007f89ab858000       4       0       0 -----    [ anon ]\n00007f89ab859000    8192      20      20 rw---    [ anon ]\n00007f89ac059000       4       0       0 -----    [ anon ]\n00007f89ac05a000    8192      20      20 rw---    [ anon ]\n00007f89ac85a000       4       0       0 -----    [ anon ]\n00007f89ac85b000    8192       8       8 rw---    [ anon ]\n00007f89ad05b000       4       0       0 -----    [ anon ]\n00007f89ad05c000    8192      24      24 rw---    [ anon ]\n00007f89ad85c000       4       0       0 -----    [ anon ]\n00007f89ad85d000    8192       8       8 rw---    [ anon ]\n00007f89ae05d000      40      40       0 r-x--  libunwind.so.8.0.1\n00007f89ae067000    2044       0       0 -----  libunwind.so.8.0.1\n00007f89ae266000       4       4       4 rw---  libunwind.so.8.0.1\n00007f89ae267000      60      48      48 rw---    [ anon ]\n00007f89ae276000    1756    1536       0 r-x--  libc-2.17.so\n00007f89ae42d000    2048       0       0 -----  libc-2.17.so\n00007f89ae62d000      16      16      16 r----  libc-2.17.so\n00007f89ae631000       8       8       8 rw---  libc-2.17.so\n00007f89ae633000      20      12      12 rw---    [ anon ]\n00007f89ae638000      84      60       0 r-x--  libgcc_s-4.8.3-20140911.so.1\n00007f89ae64d000    2048       0       0 -----  libgcc_s-4.8.3-20140911.so.1\n00007f89ae84d000       4       4       4 rw---  libgcc_s-4.8.3-20140911.so.1\n00007f89ae84e000    1028     480       0 r-x--  libm-2.17.so\n00007f89ae94f000    2044       0       0 -----  libm-2.17.so\n00007f89aeb4e000       4       4       4 r----  libm-2.17.so\n00007f89aeb4f000       4       4       4 rw---  libm-2.17.so\n00007f89aeb50000     920     884       0 r-x--  libstdc++.so.6.0.19\n00007f89aec36000    2044       0       0 -----  libstdc++.so.6.0.19\n00007f89aee35000      36      36      36 r----  libstdc++.so.6.0.19\n00007f89aee3e000       8       8       8 rw---  libstdc++.so.6.0.19\n00007f89aee40000      84      16      16 rw---    [ anon ]\n00007f89aee55000     288     284       0 r-x--  libtcmalloc.so.4.1.0\n00007f89aee9d000    2044       0       0 -----  libtcmalloc.so.4.1.0\n00007f89af09c000      12      12      12 rw---  libtcmalloc.so.4.1.0\n00007f89af09f000     144     120     120 rw---    [ anon ]\n00007f89af0c3000      28      28       0 r-x--  librt-2.17.so\n00007f89af0ca000    2044       0       0 -----  librt-2.17.so\n00007f89af2c9000       4       4       4 r----  librt-2.17.so\n00007f89af2ca000       4       4       4 rw---  librt-2.17.so\n00007f89af2cb000      88      84       0 r-x--  libpthread-2.17.so\n00007f89af2e1000    2048       0       0 -----  libpthread-2.17.so\n00007f89af4e1000       4       4       4 r----  libpthread-2.17.so\n00007f89af4e2000       4       4       4 rw---  libpthread-2.17.so\n00007f89af4e3000      16       4       4 rw---    [ anon ]\n00007f89af4e7000    1044     812       0 r-x--  libprotobuf.so.8.0.0\n00007f89af5ec000    2044       0       0 -----  libprotobuf.so.8.0.0\n00007f89af7eb000      24      24      24 rw---  libprotobuf.so.8.0.0\n00007f89af7f1000     112     112       0 r-x--  libglog.so.0\n00007f89af80d000    2044       0       0 -----  libglog.so.0\n00007f89afa0c000       8       8       8 rw---  libglog.so.0\n00007f89afa0e000      64      12      12 rw---    [ anon ]\n00007f89afa1e000     132     132       0 r-x--  ld-2.17.so\n00007f89afc1b000       4       4       4 rw---    [ anon ]\n00007f89afc1c000      64      64       4 rw-s-  manifest\n00007f89afc2c000      48      48      48 rw---    [ anon ]\n00007f89afc38000      28      28      28 rw---    [ anon ]\n00007f89afc3f000       4       4       4 r----  ld-2.17.so\n00007f89afc40000       4       4       4 rw---  ld-2.17.so\n00007f89afc41000       4       4       4 rw---    [ anon ]\n00007ffdbd493000    3084      40      40 rw---    [ stack ]\n00007ffdbd7d0000       8       0       0 r----    [ anon ]\n00007ffdbd7d2000       8       4       0 r-x--    [ anon ]\nffffffffff600000       4       0       0 r-x--    [ anon ]\n\ntotal kB 18014124763303980 36997764 36987968\nDMESG\n[Sat Aug 26 00:42:02 2017] traps: WorkerThread[4036] general protection ip:6078f6 sp:7f050fb47480 error:0 in pika[400000+371000]\n[Sat Aug 26 01:58:29 2017] [ 9543]   508  9543 41791537 15550122   36220     163  2016756             0 pika\n[Sat Aug 26 01:58:29 2017] Out of memory: Kill process 9543 (pika) score 987 or sacrifice child\n[Sat Aug 26 01:58:29 2017] Killed process 9543 (pika) total-vm:167166148kB, anon-rss:62200488kB, file-rss:0kB\n[Sat Aug 26 04:18:48 2017] [10316]   508 10316 45157992 15550764   36832     176  2016595             0 pika\n[Sat Aug 26 04:18:48 2017] Out of memory: Kill process 10316 (pika) score 988 or sacrifice child\n[Sat Aug 26 04:18:48 2017] Killed process 10316 (pika) total-vm:180631968kB, anon-rss:62203056kB, file-rss:0kB\n[Sat Aug 26 06:20:42 2017] [11693]   508 11693 47491920 15547147   38212     184  2016663             0 pika\n[Sat Aug 26 06:20:42 2017] Out of memory: Kill process 11693 (pika) score 987 or sacrifice child\n[Sat Aug 26 06:20:42 2017] Killed process 11693 (pika) total-vm:189967680kB, anon-rss:62188588kB, file-rss:0kB\n\n. \u4f60\u4eec\u662f\u771f\u8f9b\u82e6\uff0c\u90fd\u8fd9\u4e48\u665a\u4e86. 1.\u73b0\u5728\u7528\u7684pika\u5c31\u662ftcmalloc\u94fe\u63a5\u7684\n2.\u73b0\u5728\u4e1a\u52a1\u60c5\u666f\u5c31\u662f\u5355\u6b21\u8bf7\u6c42\u6570\u636e\u91cf\u8f83\u5927\uff0c\u4e4b\u524d\u662f\u8d85\u51fa\u4e86write_buf\u8bbe\u5b9a\u768464M\u9650\u5236\u7684\uff0c\u6570\u636e\u6839\u672c\u53d6\u4e0d\u51fa\u6765\uff0c\u540e\u6765\u6211\u4eec\u5728\u5ba2\u6237\u7aef\u8c03\u7528\u505a\u4e86\u4e2a\u5206\u6279\uff0c\u4e00\u6b21\u901a\u8fc7pipeline\u8bf7\u6c4210\u4e2akey\u7684\u6570\u636e\uff0c\u6570\u636e\u80fd\u53d6\u51fa\u6765\u4e86\uff0c\u4f46\u662f\u5185\u5b58\u4f7f\u7528\u5f88\u53d8\u6001\uff0c\u8fdc\u8fdc\u8d85\u51fa\u4e4b\u524d\u7528codis\u505a\u5b58\u50a8\u65f6\u5019\u7684\u5b58\u50a8\u4f7f\u7528\uff0c\u53ef\u80fd\u8ddf\u6211\u4eec\u4e1a\u52a1\u672c\u8eab\u6709\u5173\u5427\uff0c\u4f46\u5185\u5b58\u4f7f\u7528\u5f88\u5927\u662f\u5ba2\u89c2\u7684\n3.\u6211\u4f1a\u5c1d\u8bd5\u8c03\u7528tcmalloc free\uff0c\u770b\u80fd\u4e0d\u80fd\u964d\u4f4e\u5185\u5b58\u4f7f\u7528\uff0c\u5173\u4e8e\u5ba2\u6237\u7aef\u94fe\u63a5\u6570\u7684\u95ee\u9898\uff0c\u8fd8\u8981\u505a\u4e00\u4e9b\u6d4b\u8bd5\uff0c\u5e73\u8861\u5ef6\u65f6\u548c\u5185\u5b58\u4f7f\u7528\uff0c\u9009\u62e9\u4e00\u4e2a\u5408\u9002\u7684\u8fde\u63a5\u6570. \u6309\u7167\u4f60\u8bf4\u7684\u65b9\u6cd5\u5c1d\u8bd5\u4e86\uff0c\u65ad\u5f00\u94fe\u63a5\u540e\uff0c\u8c03\u7528tcmalloc free, \u76f4\u63a5\u91ca\u653e\u4e8650G\u7684\u5185\u5b58. \u597d\u7684\uff0c\u8c22\u8c22\u4e86\uff0c\u9ebb\u70e6\u770b\u4e0b\u95ee\u9898 #180 \uff0c\u8fd9\u4e2a\u95ee\u9898\u5e94\u8be5\u7b97\u662fbug\uff0c\u4f46\u4f60\u4eec\u8c8c\u4f3c\u6ca1\u53cd\u9988. \u662f\u7684\u30022.2.5\u7684\u7248\u672c. \u8fd9\u4e2a\u95ee\u9898\uff0c\u5e94\u8be5\u4fee\u590d\u4e00\u4e0b\uff0cexpireat \u65f6\u95f4\u6233\u752832\u4f4d\u7684\u592a\u5c0f\u4e86\uff0c\u53ea\u80fd\u8868\u793a\u52302038\u5e74\uff0c\u8fd9\u4e2a\u7248\u672c\u53d1\u5e03\u987a\u4fbf\u628a\u8fd9\u4e2a\u95ee\u9898\u89e3\u51b3\u4e86\u5427. \u629b\u5f00\u6211\u4eec\u7684\u4e1a\u52a1\uff0c\u65f6\u95f4\u6233\u4f7f\u752832\u4f4d\u662f\u4e0d\u9760\u8c31\u7684\uff0c\u96be\u9053\u8fd9\u4e2aexpireat\u53ea\u80fd\u53ea\u7528\u52302038\u5e74\u5417\uff0c\u5efa\u8bae\u4fee\u590d\u4e0b. \u6069\uff0c\u672c\u6765\u6211\u4eec\u7684\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u76842099\u5e74\u7684\uff0c\u540e\u6765\u6539\u62102038\u5e74\u4e86\uff0c\u6682\u65f6\u7684\u8bdd\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u4f60\u4eec\u8003\u8651\u4e0b\u5427\uff0c\u4e2a\u4eba\u8ba4\u4e3a32\u4f4d\u7684\u65f6\u95f4\u6233\u662f\u4e0d\u5408\u7406\u7684\uff0c\u6211\u770b\u4f60\u4eec\u7684rocksdb \u662f\u7528\u7684\u81ea\u5df1\u7684\u5e93\uff0c\u6539\u4e0b\u6e90\u7801\u5e94\u8be5\u80fd\u89e3\u51b3. \u597d\u7684\uff0c\u6211\u4eec\u73b0\u5728\u6ca1\u5565\u95ee\u9898\uff0c\u4f60\u4eec\u5e73\u8861\u4e0b\u5427\uff0c\u4f18\u5148\u7ea7\u4e0d\u9ad8. \u987a\u4fbf\u53cd\u9988\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u73b0\u5728\u5728AWS centos6 \u4e0a\u9762\u7f16\u8bd1\u9700\u8981\u505a\u4e00\u4e9b\u989d\u5916\u7684\u52a8\u4f5c\u624d\u80fd\u6b63\u5e38\u7f16\u8bd1\uff1a\n1. \u4fee\u6539Makefile, \u6240\u6709GLOG \u5148\u5173\u7684ifeq ($(360), 1)\u7684\u5224\u65ad\u6ce8\u91ca\u6389\n2. \u4e0b\u8f7d\u6700\u65b0\u7684glog\uff0c\u8986\u76d6third\u91cc\u9762\u7684glog\n3. \u5c06glog\u7684\u52a8\u6001\u94fe\u63a5\u5e93copy\u5230/usr/lib64/\u4e0b\u9762\n\u7136\u540e\u518d\u6267\u884c\u7f16\u8bd1\u624d\u53ef\u4ee5\uff0c\u76f4\u63a5make\u4f1a\u62a5logging.h\u627e\u4e0d\u5230\uff0c\u7f16\u8bd1\u901a\u8fc7\u540e\u4e5f\u4f1a\u63d0\u793alibglog.so.0\u4e0d\u5b58\u5728\uff0c\u80fd\u5426\u5bf9makefile\u505a\u4e9b\u4fee\u6539\uff0c\u7701\u53bb\u4e0a\u9762\u7684\u52a8\u4f5c\uff1f. \u5728\u4e0d\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u7684\u65f6\u5019\uff0c\u5982\u4f55\u964d\u4f4e\u51fa\u73b0\u6982\u7387. \u96be\u9053\u4e0d\u662f\u6211\u628a\u5199\u7684\u670d\u52a1\u505c\u4e86\u4ee5\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fc1\u4e86\u5417\uff0c\u770b\u8fd9\u4e2a\u5de5\u5177\u4ecb\u7ecd\uff0c\u4e0d\u65ad\u8bfb\u53d6aof\u65b0\u589e\u5185\u5bb9\uff0c\u90a3\u8fd9\u6837\u7684\u8bdd\uff0c\u5373\u4f7f\u662f\u4e0d\u65ad\u5199\u5165\u4e5f\u5e94\u8be5\u652f\u6301\u7684\u624d\u5bf9\u5427. @KernelMaker \u6709\u9053\u7406\uff0c\u4f46\u5e0c\u671b\u80fd\u652f\u6301\u5373\u65f6\u8fc1\u79fb\u7684\u529f\u80fd. ",
    "andrew-qiu": "\u597d\u54e6\uff0c\u4e4b\u524d\u6ca1\u6ce8\u610f\u5230\uff0c\u7a7a\u4e86\u8bd5\u8bd5\u3002\u671f\u5f85\u4ee5\u540e\u5728\u4ed3\u5e93\u76f4\u63a5\u955c\u50cf\u54df @baotiao \u563f\u563f. ",
    "hea": "\u611f\u8c22\u56de\u590d\uff0c\u8bf7\u95ee\u5982\u679c\u78c1\u76d8\u4f7f\u7528\u91cf\u572880%\u4ee5\u4e0b\uff0c\u80fd\u4e0d\u80fd\u4fdd\u969c\u8fd9\u4e2a\u5e73\u5747\u5199\u5165\u901f\u5ea6\u7ef4\u6301\u5728180w/\u5206\u949f\uff1f. @tigerzhang \u611f\u8c22\u56de\u590d\uff0c\u6709\u4ec0\u4e48\u65b9\u6cd5\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u95ee\u9898\u5417\uff0c\u6bd4\u5982\u8bf4\uff0c\u5355\u53f0\u673a\u5668\u7684\u6570\u636e\u91cf\u5e94\u8be5\u572850g\u5de6\u53f3\uff0c\u4e0d\u5b9c\u8fc7\u9ad8\uff0c\u6216\u8005\u628acompact \u7684\u4efb\u52a1\u8c03\u6574\u5230\u51cc\u6668\u8bbf\u95ee\u91cf\u5c0f\u7684\u65f6\u5019. @baotiao \u611f\u8c22\u56de\u590d\uff0c\u6211\u628a\u4efb\u52a1\u8c03\u6574\u5230\u51cc\u6668\uff0c\u5355\u673a\u6570\u636e\u8fd880g\u5de6\u53f3\uff0c\u5185\u5b58\u52a0\u523032G\u518d\u8bd5\u8bd5. @baotiao \n\n\u4f60\u8fd9\u4e2a\u6570\u636e80G \u7684\u8bdd \u5176\u5b9e\u5b58\u5728redis \u91cc\u9762\u7684\u8bdd\u4f1a\u6709320G \u5de6\u53f3\n\n\u8bf7\u95ee \u8fd9\u4e2a\u662f\u8bf4reids\u788e\u7247\u7387\u592a\u9ad8\uff0c\u8fd8\u662f\u8bf4pika\u768480g\u662f\u538b\u7f29\u540e\u7684\uff0c\u628a320G\u7684\u6570\u636e\u538b\u7f29\u5230\u4e8680G. \u8bf4\u4e0b\u76ee\u524d\u7684\u6d4b\u8bd5\u60c5\u51b5\n\u786c\u4ef6\u73af\u5883\n\u817e\u8baf\u4e91 8\u6838cpu\uff0c32G\u5185\u5b58\uff0c100G SSD\u672c\u5730\u786c\u76d8\uff0c\n\u73b0\u8c61\u63cf\u8ff0\n\u6700\u521d\u5199\u5165\u901f\u5ea6 200w/\u5206\u949f\uff0c\u4e4b\u540e\u6bcf\u5206\u949f\u7684\u91cf\u90fd\u5728\u53d8\uff0c\u6709\u4e0b\u964d\u7684\u8d8b\u52bf\uff0c\u4e0b\u9762\u662f\u627e\u4e86\u51e0\u6761(\u4e0d\u5b9a\u65f6\u66f4\u65b0\u6570\u636e)\ndbsize=18507901 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1570535 | Tue Sep  5 13:23:01 CST 2017\ndbsize=141557859 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1491574 | Tue Sep  5 14:52:01 CST 2017\ndbsize=189130896 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1146394 | Tue Sep  5 15:31:01 CST 2017\ndbsize=200692630 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 973103 | Tue Sep  5 15:41:01 CST 2017\ndbsize=213779411 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1393728 | Tue Sep  5 15:52:01 CST 2017\ndbsize=218438846 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1158135 | Tue Sep  5 15:56:01 CST 2017\ndbsize=408409747 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 900074 | Tue Sep  5 18:39:01 CST 2017\ndbsize=422770228 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1506580 | Tue Sep  5 18:51:01 CST 2017\ndbsize=433132272 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1191457 | Tue Sep  5 18:59:01 CST 2017\ndbsize=448407540 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1090942 | Tue Sep  5 19:12:01 CST 2017\ndbsize=697821337 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 849550 | Tue Sep  5 23:25:01 CST 2017\ndbsize=745815722 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 756401 | Wed Sep  6 00:23:01 CST 2017\ndbsize=823919557 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 838631 | Wed Sep  6 01:59:01 CST 2017\ndbsize=879938865 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 791560 | Wed Sep  6 03:10:01 CST 2017\ndbsize=1037078380 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 691494 | Wed Sep  6 06:40:02 CST 2017\ndbsize=1130132251 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 646315 | Wed Sep  6 08:54:02 CST 2017\ndbsize=1146616263 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 632650 | Wed Sep  6 09:19:01 CST 2017\ndbsize=1173194893 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 704875 | Wed Sep  6 09:59:01 CST 2017\ndbsize=1175742215 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 601661 | Wed Sep  6 10:03:02 CST 2017\n\u914d\u7f6e\u6587\u4ef6\u540c\u4e0a\u6587\u6bd4\u8f83\u53ea\u4fee\u6539\u4e86\ncompact-cron : 02-04/90\n. ### \u6570\u636e\u8bf4\u660e\uff0c\u8fd9\u4e2avalue\u7684\u5927\u5c0f\u5e94\u8be5\u6ca1\u95ee\u9898\n\n\u5b89\u88c5\u5de5\u5177\u5305\nyum install sysstat\n\u6267\u884c\u547d\u4ee4\n```\niostat -xm 1\nLinux 2.6.32-504.30.3.el6.x86_64 (VM_49_188_centos)     09/05/2017  x86_64    (8 CPU)\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          62.18    0.00   19.80    0.03    0.00   17.98\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.03     6.65    3.02    1.52     0.11     0.03    65.89     0.01    1.41    0.74    2.71   0.43   0.19\nvdb               0.05  6440.26    1.62   78.97     0.06    24.89   634.00     0.16    1.99    0.34    2.03   0.17   1.34\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          74.00    0.00   17.12    0.00    0.00    8.88\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00  5107.00    0.00   70.00     0.00    20.22   591.66     0.09    1.30    0.00    1.30   0.33   2.30\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          74.34    0.00   17.15    0.00    0.00    8.51\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     2.00    0.00    5.00     0.00     0.03    11.20     0.02    4.80    0.00    4.80   1.60   0.80\nvdb               0.00  8540.00    0.00   95.00     0.00    30.30   653.22     0.12    1.19    0.00    1.19   0.21   2.00\n. \u8dd1\u4e86\u4e0d\u523012\u4e2a\u5c0f\u65f6\uff0c\u786c\u76d8\u4e0d\u8db310g\u5c31\u505c\u4e86\uff0c\u8fd9\u4e2a\u4e0b\u964d\u770b\u7740\u662f\u5f88\u660e\u663e\u7684\ndbsize=18507901 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1570535 | Tue Sep  5 13:23:01 CST 2017\ndbsize=433132272 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1191457 | Tue Sep  5 18:59:01 CST 2017\ndbsize=448407540 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1090942 | Tue Sep  5 19:12:01 CST 2017\ndbsize=697821337 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 849550 | Tue Sep  5 23:25:01 CST 2017\ndbsize=745815722 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 756401 | Wed Sep  6 00:23:01 CST 2017\ndbsize=823919557 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 838631 | Wed Sep  6 01:59:01 CST 2017\ndbsize=879938865 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 791560 | Wed Sep  6 03:10:01 CST 2017\ndbsize=1037078380 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 691494 | Wed Sep  6 06:40:02 CST 2017\ndbsize=1130132251 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 646315 | Wed Sep  6 08:54:02 CST 2017\ndbsize=1146616263 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 632650 | Wed Sep  6 09:19:01 CST 2017\ndbsize=1173194893 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 704875 | Wed Sep  6 09:59:01 CST 2017\ndbsize=1175742215 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 601661 | Wed Sep  6 10:03:02 CST 2017\niostat\n[root@VM_49_188_centos ~]# iostat -xm 1\nLinux 2.6.32-504.30.3.el6.x86_64 (VM_49_188_centos)     09/06/2017  x86_64    (8 CPU)\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          48.90    0.00   15.79    7.88    0.00   27.43\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.02     5.62    2.19    1.53     0.04     0.03    39.51     0.00    1.17    0.57    2.03   0.38   0.14\nvdb               0.08  6310.12 6281.76   99.98    35.36    24.89    19.33     1.71    0.27    0.24    2.02   0.09  56.30\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          24.78    0.00    9.56   15.47    0.00   50.19\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00     5.00 15080.00    4.00    83.22     0.04    11.30     3.09    0.21    0.21    0.00   0.07  98.40\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          25.69    0.00    8.69   16.50    0.00   49.12\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00     0.00 14637.00    1.00    80.74     0.00    11.30     2.99    0.21    0.21    1.00   0.07  97.00\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          23.65    0.00    8.68   14.59    0.00   53.08\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     1.00    0.00    2.00     0.00     0.01    12.00     0.01    3.00    0.00    3.00   1.50   0.30\nvdb               0.00     1.00 14055.00    3.00    77.62     0.02    11.31     3.17    0.23    0.23    1.00   0.07  97.70\n```\n\n. \u611f\u8c22360 \u5b8b\u540c\u5b66\u7684\u5206\u6790\n1. \u6253\u5f00compact\u65f6\uff0c\u5199\u5165\u53d8\u6162\u662f\u56e0\u4e3arocksdb\u7684compact\u65f6\u4f60\u7684\u78c1\u76d8util\u57fa\u672c\u5df2\u7ecf\u5360\u6ee1\uff0c\u8fd9\u65f6\u5019\u8bfb\u5199\u90fd\u4f1a\u53d8\u6162\uff1b2. \u5173\u95edcompact\u65f6\uff0c\u56e0\u4e3a\u7684\u6d4b\u8bd5\u7684\u63a5\u53e3\u5305\u542b\u7c7b\u4f3cincr\u8fd9\u79cd\u5e95\u5c42\u5b9e\u73b0\u9700\u8981\u8fdb\u884cGet\u7684\u63a5\u53e3\uff0c\u6240\u4ee5\u5173\u95edcompact\u540e\uff0c\u968f\u7740\u5199\u5165\u7684\u8fdb\u884c\uff0cGet\u7684\u901f\u5ea6\u56de\u8d8a\u6765\u8d8a\u6162\uff0c\u8fd9\u4e5f\u5c31\u5bfc\u81f4\u4e86\u4f60\u7684\u6d4b\u8bd5\u7528\u4f8b\u8d8a\u8dd1\u8d8a\u6162\n\u4f60\u8bd5\u8bd5\uff1a\u5173\u95edrocksdb\u7684compact\uff0c\u8c03\u5927rocksdb\u7684stall\u53castop\u9608\u503c\uff0c\u7136\u540e\u4f60\u7684\u6d4b\u8bd5\u7a0b\u5e8f\u4e2d\u53ea\u8fdb\u884cset\uff0c\u770b\u770b\u901f\u5ea6\u662f\u5426\u7a33\u5b9a\n\u6839\u672c\u539f\u56e0\u8fd8\u662f\u76d8\u7684util\u8dd1\u6ee1\u4e86\n. 50\u4e2a \u5ba2\u6237\u7aef ssdb \u538b\u6d4b\n```\nfunc ssdbTestSet(db *ssdb.Client ) {\n    for(true){\n        u1 := uuid.NewV4().String()\n        _,err := db.Do(\"set\", \"key\"+u1, \"1kvalue\")\n        if(nil != err){\n            log.Println(\"err\",err)\n        }else{\n    }\n}\n\n}\n\u53d6ssdb info\u91cc\u7684binlogs.max_seq\ndbsize= 2589389 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1544697 | Wed Sep  6 16:14:01 CST 2017\ndbsize= 16149505 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1372101 | Wed Sep  6 16:23:01 CST 2017\ndbsize= 17349462 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1199957 | Wed Sep  6 16:24:01 CST 2017\ndbsize= 18589615 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1240153 | Wed Sep  6 16:25:01 CST 2017\ndbsize= 20892786 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1111741 | Wed Sep  6 16:27:01 CST 2017\ndbsize= 23500244 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1443720 | Wed Sep  6 16:29:01 CST 2017\ndbsize= 24790356 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1290112 | Wed Sep  6 16:30:01 CST 2017\ndbsize= 25837801 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1047445 | Wed Sep  6 16:31:02 CST 2017\ndbsize= 26919168 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1081367 | Wed Sep  6 16:32:01 CST 2017\ndbsize= 27738174 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 819006 | Wed Sep  6 16:33:01 CST 2017\ndbsize= 32297319 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1428485 | Wed Sep  6 16:37:01 CST 2017\ndbsize= 33600410 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1303091 | Wed Sep  6 16:38:01 CST 2017\ndbsize= 35702738 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 895724 | Wed Sep  6 16:40:01 CST 2017\ndbsize= 36794168 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1091430 | Wed Sep  6 16:41:01 CST 2017\ndbsize= 41444746 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1418323 | Wed Sep  6 16:45:01 CST 2017\ndbsize= 42547682 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1102936 | Wed Sep  6 16:46:01 CST 2017\ndbsize= 45495224 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1021788 | Wed Sep  6 16:49:01 CST 2017\ndbsize= 46378926 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 883702 | Wed Sep  6 16:50:01 CST 2017\ndbsize= 47098691 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 719765 | Wed Sep  6 16:51:01 CST 2017\ndbsize= 61676925 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1476779 | Wed Sep  6 17:05:01 CST 2017\n```\n. ## ssdb \u548c pika\u7684\u5bf9\u6bd4\uff0c\u5982\u679c\u65b9\u5f0f\u6709\u95ee\u9898\uff0c\u8bf7\u591a\u6307\u6559\nssdb \u786c\u4ef6\u73af\u5883   \u817e\u8baf\u4e91\u4e3b\u673a 8\u683832G  100G SSD\u672c\u5730\u76d8\npika \u786c\u4ef6\u73af\u5883   \u817e\u8baf\u4e91\u4e3b\u673a  8\u683832G  200G SSD\u672c\u5730\u76d8\n\u5728\u6700\u540e10\u5206\u949f\u7684\u65f6\u5019\uff0cssdb\u5e73\u5747\u80fd\u523080w/\u5206\u949f\uff0cpika\u5e73\u574770w/\u5206\u949f\nssdb\u7ed3\u679c \u53d6ssdb info\u91cc\u7684binlogs.max_seq\uff0c\u53ea\u6709set\u64cd\u4f5c\ndbsize= 2589389 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1544697 | Wed Sep  6 16:14:01 CST 2017\ndbsize= 4142666 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1553277 | Wed Sep  6 16:15:01 CST 2017\ndbsize= 5670150 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1527484 | Wed Sep  6 16:16:01 CST 2017\ndbsize= 7189285 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1519135 | Wed Sep  6 16:17:01 CST 2017\ndbsize= 8718772 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1529487 | Wed Sep  6 16:18:01 CST 2017\ndbsize= 10213071 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1494299 | Wed Sep  6 16:19:01 CST 2017\ndbsize= 11736291 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1523220 | Wed Sep  6 16:20:01 CST 2017\ndbsize= 13287728 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1551437 | Wed Sep  6 16:21:01 CST 2017\ndbsize= 14777404 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1489676 | Wed Sep  6 16:22:01 CST 2017\ndbsize= 16149505 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1372101 | Wed Sep  6 16:23:01 CST 2017\ndbsize= 923733909 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 845771 | Thu Sep  7 10:17:01 CST 2017\ndbsize= 923787529 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 53620 | Thu Sep  7 10:18:01 CST 2017\ndbsize= 924615661 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 828132 | Thu Sep  7 10:19:01 CST 2017\ndbsize= 925262978 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 647317 | Thu Sep  7 10:20:01 CST 2017\ndbsize= 925876848 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 613870 | Thu Sep  7 10:21:01 CST 2017\ndbsize= 926785196 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 908348 | Thu Sep  7 10:22:01 CST 2017\ndbsize= 927636954 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 851758 | Thu Sep  7 10:23:01 CST 2017\ndbsize= 928458872 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 821918 | Thu Sep  7 10:24:01 CST 2017\ndbsize= 929324221 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 865349 | Thu Sep  7 10:25:01 CST 2017\ndbsize= 929949002 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 624781 | Thu Sep  7 10:26:01 CST 2017\npika\u7ed3\u679c \u5f00\u542f\u4e86cosid(\u6211\u4eec\u7684\u4e1a\u52a1\u6700\u7ec8\u9700\u8981\u653e\u5230codis\u91cc)\uff0c\u53d6dbsize\uff0cpipeline \u53ea\u6709set\u64cd\u4f5c\uff0cset\u7684\u503c\u548cssdb set\u7684\u503c\u4e00\u6837\ndbsize=3343121 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 3049759 | Wed Sep  6 18:42:01 CST 2017\ndbsize=5864640 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2521519 | Wed Sep  6 18:43:01 CST 2017\ndbsize=8374521 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2509881 | Wed Sep  6 18:44:01 CST 2017\ndbsize=10586053 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2211532 | Wed Sep  6 18:45:01 CST 2017\ndbsize=12651430 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2065377 | Wed Sep  6 18:46:01 CST 2017\ndbsize=14904522 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2253092 | Wed Sep  6 18:47:01 CST 2017\ndbsize=17130624 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2226102 | Wed Sep  6 18:48:01 CST 2017\ndbsize=19417898 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2287274 | Wed Sep  6 18:49:01 CST 2017\ndbsize=21649496 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2231598 | Wed Sep  6 18:50:01 CST 2017\ndbsize=23593982 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1944486 | Wed Sep  6 18:51:01 CST 2017\ndbsize=1057203847 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 719243 | Thu Sep  7 10:18:01 CST 2017\ndbsize=1057925347 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 721500 | Thu Sep  7 10:19:01 CST 2017\ndbsize=1058622397 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 697050 | Thu Sep  7 10:20:01 CST 2017\ndbsize=1059313161 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 690764 | Thu Sep  7 10:21:01 CST 2017\ndbsize=1060042433 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 729272 | Thu Sep  7 10:22:01 CST 2017\ndbsize=1060793083 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 750650 | Thu Sep  7 10:23:01 CST 2017\ndbsize=1061552410 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 759327 | Thu Sep  7 10:24:01 CST 2017\ndbsize=1062289297 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 736887 | Thu Sep  7 10:25:01 CST 2017\ndbsize=1062992361 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 703064 | Thu Sep  7 10:26:01 CST 2017\n. ## pika set \u6027\u80fd\u6d4b\u8bd5\n\u786c\u4ef6\u73af\u5883\npika100 \u786c\u4ef6\u73af\u5883 \u817e\u8baf\u4e91\u4e3b\u673a 8\u683832G 100G SSD\u672c\u5730\u76d8\npika200 \u786c\u4ef6\u73af\u5883 \u817e\u8baf\u4e91\u4e3b\u673a 8\u683832G 200G SSD\u672c\u5730\u76d8\n\u6d4b\u8bd5\u65b9\u6cd5\n50\u4e2aredis\u5ba2\u6237\u7aef\u8fde\u63a5\uff0cset\u7684key\u4e3auuid\u4ea7\u751f\uff0cvalue\u5927\u5c0f1k\n\u8bf4\u660e\npika slotmigrate \u4e3a no(\u5173\u95edcodis\u8fc1\u79fb\u529f\u80fd)\uff0c\u7ed3\u5408\u4e0a\u9762\u7684\u6d4b\u8bd5\uff0cslotmigrate \u7684\u5f00\u5173\u5bf9\u6027\u80fd\u5f71\u54cd\u5f88\u5927\uff0c\u4f46\u662f\u672c\u6b21\u6d4b\u8bd5\u7684\u65f6\u95f4\u4e0d\u8db312\u5c0f\u65f6\uff0c\u4e0a\u9762\u7684\u6d4b\u8bd5\u662f16\u4e2a\u5c0f\u65f6\uff0c\u7ee7\u7eed\u8dd1\u4e0b\u53bb\uff0c\u5e76\u4e0d\u786e\u5b9a\u6027\u80fd\u4e0b\u964d\u5230\u4ec0\u4e48\u7a0b\u5ea6\uff0c\u540e\u7eed\u8fd8\u5728\u6d4b\u8bd5\u3002\n\u786c\u76d8\u8d8a\u5927\u6027\u80fd\u8d8a\u597d\uff0c\u540c\u6837\u662f\u817e\u8baf\u4e91\u7684\u672c\u5730ssd\u76d8\uff0c200G\u7684\u5199\u5165\u6027\u80fd\u4e5f\u6bd4100G\u7684\u8981\u9ad8\uff0c\u5355\u4eceset\u64cd\u4f5c\u4e0a\u770b\uff0c\u6bcf\u5206\u949f\u5dee60w\u5de6\u53f3\uff0c\u4e0d\u8fc7\u90fd\u4f34\u968f\u8fd9\u5199\u7684\u8d8a\u591a\uff0c\u5199\u7684\u4e5f\u8d8a\u6162\n\u53d6\u6570\u65b9\u6cd5\u4e3a\u6bcf\u5206\u949f\u53d6\u4e00\u6b21info\u4e2d\u7684total_commands_processed\n```\n100G total_commands_processed=5019787 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1866623 | 200G total_commands_processed=7830353 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 3124965 | Thu Sep  7 17:53:01 CST 2017\n100G total_commands_processed=6929445 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1909658 | 200G total_commands_processed=10982429 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 3152076 | Thu Sep  7 17:54:01 CST 2017\n100G total_commands_processed=8838998 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1909553 | 200G total_commands_processed=14170022 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 3187593 | Thu Sep  7 17:55:01 CST 2017\n100G total_commands_processed=10723491 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1884493 | 200G total_commands_processed=17279516 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 3109494 | Thu Sep  7 17:56:01 CST 2017\n100G total_commands_processed=12575572 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1852081 | 200G total_commands_processed=20487395 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 3207879 | Thu Sep  7 17:57:01 CST 2017\n100G total_commands_processed=14431196 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1855624 | 200G total_commands_processed=23544871 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 3057476 | Thu Sep  7 17:58:01 CST 2017\n100G total_commands_processed=16320416 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1889220 | 200G total_commands_processed=26374820 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2829949 | Thu Sep  7 17:59:01 CST 2017\n100G total_commands_processed=18208010 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1887594 | 200G total_commands_processed=28934956 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2560136 | Thu Sep  7 18:00:01 CST 2017\n100G total_commands_processed=20083973 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1875963 | 200G total_commands_processed=31508009 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2573053 | Thu Sep  7 18:01:01 CST 2017\n100G total_commands_processed=21967962 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1883989 | 200G total_commands_processed=34161156 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2653147 | Thu Sep  7 18:02:01 CST 2017\n100G total_commands_processed=859283508 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1036189 | 200G total_commands_processed=1064633637 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1543074 | Fri Sep  8 04:00:01 CST 2017\n100G total_commands_processed=860357122 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1073614 | 200G total_commands_processed=1066342396 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1708759 | Fri Sep  8 04:01:01 CST 2017\n100G total_commands_processed=861470307 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1113185 | 200G total_commands_processed=1067920327 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1577931 | Fri Sep  8 04:02:01 CST 2017\n100G total_commands_processed=862590233 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1119926 | 200G total_commands_processed=1070080196 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2159869 | Fri Sep  8 04:03:01 CST 2017\n100G total_commands_processed=863708001 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1117768 | 200G total_commands_processed=1071638310 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1558114 | Fri Sep  8 04:04:01 CST 2017\n100G total_commands_processed=864613048 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 905047 | 200G total_commands_processed=1072871948 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1233638 | Fri Sep  8 04:05:01 CST 2017\n100G total_commands_processed=865879233 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1266185 | 200G total_commands_processed=1074362872 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1490924 | Fri Sep  8 04:06:01 CST 2017\n100G total_commands_processed=867036487 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1157254 | 200G total_commands_processed=1075747083 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1384211 | Fri Sep  8 04:07:02 CST 2017\n100G total_commands_processed=868073003 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1036516 | 200G total_commands_processed=1076923809 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1176726 | Fri Sep  8 04:08:01 CST 2017\n100G total_commands_processed=869339127 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1266124 | 200G total_commands_processed=1078564088 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1640279 | Fri Sep  8 04:09:01 CST 2017\n```\n. ## pika set \u6027\u80fd\u6d4b\u8bd5\n\u73af\u5883\npika2.2.5\n\u786c\u4ef6\u73af\u5883 \u817e\u8baf\u4e91\u4e3b\u673a 8\u683832G 200G SSD\u672c\u5730\u76d8\n\u6d4b\u8bd5\u65b9\u6cd5\n50\u4e2aredis\u5ba2\u6237\u7aef\u8fde\u63a5\uff0cset\u7684key\u4e3auuid\u4ea7\u751f\uff0cvalue\u5927\u5c0f1k\n\u8bf4\u660e\npika slotmigrate \u4e3a no(\u5173\u95edcodis\u8fc1\u79fb\u529f\u80fd)\n\u53d6\u6570\u65b9\u6cd5\u4e3a\u6bcf\u5206\u949f\u53d6\u4e00\u6b21info\u4e2d\u7684total_commands_processed\n\u95ee\u9898\n\u6d4b\u8bd521\u5c0f\u65f6\u5de6\u53f3\uff0c\u5076\u5c14\u51fa\u73b0\u5199\u5165\u901f\u5ea6\u6210\u500d\u4e0b\u964d\uff0c\u4e0d\u786e\u5b9a\u662f\u4ec0\u4e48\u539f\u56e0\u3002\n\u611f\u8c22360\u9648\u540c\u5b66\u7684\u56de\u7b54\n\u8fd9\u4e2a\u5c5e\u4e8e\u6b63\u5e38 \u5e95\u4e0b\u5f15\u64ce\u6709 compact \u7684\u65f6\u5019 \u78c1\u76d8io \u5360\u6ee1\u4e86\n\u6240\u4ee5\u5bf9\u5199\u5165\u6709\u5f71\u54cd\n\u8fd9\u4e2a \u6d4b\u8bd5 \u662f\u5e95\u4e0b\u81ea\u52a8\u89e6\u53d1\u7684 \u6bd4\u8f83\u7ec6..\n1243540 / 60  = 20725  \u6570\u636e\u7684\u5927\u5c0f\u662f 1k \u4e5f\u5c31\u662f \u4e0a\u5c42\u4f60\u770b\u5230\u7684io \u5927\u6982\u662f 20.725MB/s   \u90a3\u4e48\u5bf9\u4e8e\u5e95\u4e0b\u7684\u5f15\u64ce\u6765\u8bf4, \u7531\u4e8e\u5199\u653e\u5927\u7684\u5b58\u5728, \u6240\u4ee5\u78c1\u76d8io \u5dee\u4e0d\u591a\u662f 200 MB/s  \u5bf9\u4e8e\u4f60\u8fd9\u4e2a\u78c1\u76d8\u7684\u6027\u80fd\u662f\u6b63\u5e38\u7684\u4e86\n\u7559\u7591\uff1a\u7531\u4e8e\u4ecezabbix\u91cc\u6ca1\u6709\u770b\u5230\u51f8\u8d77\u7684io\uff0c\u540e\u7eed\u4f1a\u518d\u8fdb\u884c\u6d4b\u8bd5\uff0c\u9a8c\u8bc1\u8fd9\u4e2a\u7ed3\u8bba\n```\n\u6700\u521d\u7a33\u5b9a\u76843\u5206\u949f\n200G \u603b\u91cf=12772614 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2763112 | Fri Sep  8 17:27:01 CST 2017\n200G \u603b\u91cf=15516056 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2743442 | Fri Sep  8 17:28:01 CST 2017\n200G \u603b\u91cf=18301884 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2785828 | Fri Sep  8 17:29:01 CST 2017\n\u4e2d\u95f4\u65f6\u6bb5\u67d03\u5206\u949f\uff0c\u6709\u6210\u500d\u7684\u4e0b\u964d\n200G \u603b\u91cf=510494082 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2563931 | Fri Sep  8 21:21:01 CST 2017\n200G \u603b\u91cf=511110047 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 615965 | Fri Sep  8 21:22:01 CST 2017\n200G \u603b\u91cf=513679125 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2569078 | Fri Sep  8 21:23:01 CST 2017\n\u4e2d\u95f4\u65f6\u6bb5\u67d03\u5206\u949f\uff0c\u6709\u6210\u500d\u7684\u4e0b\u964d\n200G \u603b\u91cf=668363689 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2088984 | Fri Sep  8 22:49:01 CST 2017\n200G \u603b\u91cf=669299990 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 936301 | Fri Sep  8 22:50:01 CST 2017\n200G \u603b\u91cf=671925525 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 2625535 | Fri Sep  8 22:51:01 CST 2017\n\u4e2d\u95f4\u65f6\u6bb5\u67d03\u5206\u949f\uff0c\u6709\u6210\u500d\u7684\u4e0b\u964d\n200G \u603b\u91cf=1804138303 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1394924 | Sat Sep  9 13:50:01 CST 2017\n200G \u603b\u91cf=1804811358 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 673055 | Sat Sep  9 13:51:01 CST 2017\n200G \u603b\u91cf=1806179368 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1368010 | Sat Sep  9 13:52:01 CST 2017\n\u6700\u540e3\u5206\u949f\uff0c\u4e0b\u4e00\u5206\u949f\u78c1\u76d8\u5df2\u6ee1\n200G \u603b\u91cf=1824903949 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1273636 | Sat Sep  9 14:08:01 CST 2017\n200G \u603b\u91cf=1826270497 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1366548 | Sat Sep  9 14:09:01 CST 2017\n200G \u603b\u91cf=1827514037 \u4e0a1\u5206\u949f\u5185\u5199\u5165\u91cf 1243540 | Sat Sep  9 14:10:01 CST 2017\n```. \u5408\u5e76\u65f6\uff0c\u78c1\u76d8\u8ddf\u4e0d\u4e0a\u4e86\n\n```\nMon Sep 11 15:58:45 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          17.96    0.00    9.80    0.38    0.00   71.86\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00 21046.00  478.00  241.00    16.46    83.15   283.73     0.80    1.11    0.32    2.66   0.10   7.40\nMon Sep 11 15:58:46 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          18.31    0.00   10.21    0.12    0.00   71.36\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00 10182.00  366.00  121.00    13.48    40.25   225.94     0.42    0.86    0.28    2.63   0.10   4.80\nMon Sep 11 15:58:47 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          18.73    0.00    9.86    0.12    0.00   71.29\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    1.00     0.00     0.00     8.00     0.00    3.00    0.00    3.00   3.00   0.30\nvdb               0.00 19405.00    0.00  219.00     0.00    76.66   716.86     0.52    2.37    0.00    2.37   0.14   3.10\nMon Sep 11 15:58:48 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          18.70    0.00    9.66    0.13    0.00   71.52\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00 48014.00    0.00  372.00     0.00   134.08   738.15     3.72    7.15    0.00    7.15   0.17   6.40\nMon Sep 11 15:58:49 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          16.86    0.00    9.81    1.13    0.00   72.20\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               2.00 55765.00  247.00  647.00     9.27   275.29   651.87    14.65   17.57    1.04   23.88   0.18  15.90\nMon Sep 11 15:58:50 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          18.30    0.00    9.77    0.25    0.00   71.68\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00 15772.00  394.00  182.00    15.10    62.32   275.28     0.53    0.91    0.27    2.32   0.09   5.00\n```\n. ### \u73af\u5883\n\u817e\u8baf\u4e91 8\u683832G  200SSD\u672c\u5730\u76d8\n\u8bf4\u660e\npika slotmigrate \u4e3a no(\u5173\u95edcodis\u8fc1\u79fb\u529f\u80fd)\n\u53d6\u6570\u65b9\u6cd5\u4e3a\u6bcf\u5206\u949f\u53d6\u4e00\u6b21info\u4e2d\u7684total_commands_processed\n\u65f6\u95f4 9\u670811\u53f7 17\uff1a30 \u5230 9\u670812\u53f7 11\u70b9\n50\u4e2a\u5ba2\u6237\u7aef\u5199\u5165pika\ngolang\nfunc test(client *redis.Client){\n    for true{\n        pipe:=client.Pipeline();\n        u1 := uuid.NewV4().String()\n        key0 := u1+\":user:0\"\n        pipe.Incr(key0);\n        pipe.Incr(u1+\":user:1\");\n        pipe.Incr(u1+\":user:2\");\n        pipe.Incr(u1+\":user:3\");\n        pipe.Incr(u1+\":user:4\");\n        //\u68c0\u67e5\u662f\u5426\u5904\u7406\u8fc7\n        pipe.Exists(u1)\n        pipe.Set(u1+\":orderId\",\"1\",time.Hour*24);\n        pipe.LPush(u1+\":user:4\",\n            \"{'openId':'5C2Y0__vYLYG0ahd6BdpVU','yyyappid':'97107fa23','action':'minus',\" +\n                \"'spend':1000,\" +\n                \"'note':'note',\" +\n                \"'logTime':1503383236932,'userVc':542939,'clientName':'search','clientBusinessName':'game'}\");\n        _ ,err:= pipe.Exec();\n        if(nil!=err){\n            fmt.Println(err)\n        }\n    }\n}\n\u4e3b\u673aCPU\u76d1\u63a7\n\n\n\n\u5199\u5165\u7edf\u8ba1\n```\n\u6700\u521d\u7684\u51e0\u5206\u949f  \u8fd9\u4e2a\u65f6\u5019 io\u7684%util \u5927\u90e8\u5206\u4e3a0\n200G \u603b\u91cf=46547437 \u4e0a1s\u5185\u5199\u5165\u91cf 70879 | 2017\u5e74 09\u6708 11\u65e5 \u661f\u671f\u4e00 17:30:00 CST\n200G \u603b\u91cf=46616569 \u4e0a1s\u5185\u5199\u5165\u91cf 69132 | 2017\u5e74 09\u6708 11\u65e5 \u661f\u671f\u4e00 17:30:01 CST\n200G \u603b\u91cf=46686622 \u4e0a1s\u5185\u5199\u5165\u91cf 70053 | 2017\u5e74 09\u6708 11\u65e5 \u661f\u671f\u4e00 17:30:02 CST\n\u5728\u6700\u4f4e\u7684\u65f6\u5019  \u8fd9\u4e2a\u65f6\u5019 io\u7684%util \u57283 \u5de6\u53f3\n200G \u603b\u91cf=1646981331 \u4e0a1s\u5185\u5199\u5165\u91cf 545 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 04:29:55 CST\n200G \u603b\u91cf=1646982132 \u4e0a1s\u5185\u5199\u5165\u91cf 801 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 04:29:59 CST\n200G \u603b\u91cf=1646982957 \u4e0a1s\u5185\u5199\u5165\u91cf 825 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 04:30:01 CST\n\u540e\u6765\u8d8b\u4e8e\u5e73\u7a33 \u8fd9\u4e2a\u65f6\u5019 io\u7684%util \u572840 \u5de6\u53f3\n200G \u603b\u91cf=2227539568 \u4e0a1s\u5185\u5199\u5165\u91cf 33823 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 11:11:31 CST\n200G \u603b\u91cf=2227572857 \u4e0a1s\u5185\u5199\u5165\u91cf 33289 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 11:11:32 CST\n200G \u603b\u91cf=2227610149 \u4e0a1s\u5185\u5199\u5165\u91cf 37292 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 11:11:33 CST\n```\n. ### \u73af\u5883\n\u817e\u8baf\u4e91 8\u683832G 200SSD\u672c\u5730\u76d8\n\u8bf4\u660e\npika slotmigrate \u4e3a no(\u5173\u95edcodis\u8fc1\u79fb\u529f\u80fd)\n\u53d6\u6570\u65b9\u6cd5\u4e3a\u6bcf\u5206\u949f\u53d6\u4e00\u6b21info\u4e2d\u7684total_commands_processed\n\u65f6\u95f4 9\u670812\u53f7 22 \u5230 9\u670813\u53f7 10\u70b9\n\u611f\u8c22 KernelMaker\u7684\u5206\u6790\u4e0e\u5efa\u8bae\nlist\u7684\u5f15\u64ce level 0\u6587\u4ef6\u5f88\u591a\uff0cstall\u4f1a\u8ba9\u5199\u53d8\u6162\nlevel 0\u591a\u7684\u8bdd\uff0c\u8bfb\u6027\u80fd\u4e5f\u4f1a\u6709\u5f71\u54cd\uff0c\u50cf\u4f60\u7684incr\uff0cexists\uff0clpush\u7b49\u90fd\u6709\u8bfb\u64cd\u4f5c\n\u770b\u4f60list\u7684log\uff0c\u5199\u5165\u91cf\u8fd8\u662f\u5f88\u5927\u7684\uff0c\u8fd9\u6837\u77ed\u65f6\u95f4\u5185level 0\u4f1a\u79ef\u6512\u5f88\u591a\uff0c\u7136\u540e\u4e00\u6b21\u6027compact\u5230level 1\uff0c\u7136\u540elevel 1\u53d8\u5927\u8ddf\u591a\uff0c\u5bfc\u81f4level 1\u5728\u81ea\u52a8compact\u7684score\u9ad8\uff0c\u7136\u540e\u81ea\u52a8compact\u4e00\u76f4\u5728\u505a\u9ad8score\u7684level 1\uff0c\u8fdf\u8fdf\u4e0d\u641elevel 0\uff0c\u7136\u540elevel 0\u6324\u538b\uff0c\u53d1\u751fstall\n\u8fd9\u597d\u50cf\u5c31\u662f\u4e3a\u4ec0\u4e48\u4f60\u4e0a\u5c42\u5199\u5165\u4e00\u4f1a\u5feb\u4e00\u4f1a\u6162\n\u6211\u5bf9\u6bd4\u4e86\u4e00\u4e0b\u524d\u540e\u65e5\u5fd7\uff0c\u5e94\u8be5\u5c31\u662f\u6211\u6628\u5929\u8bf4\u7684\u90a3\u4e2a\u539f\u56e0\uff0c\u5199\u5165\u91cf\u6bd4\u8f83\u5927\uff0c\u5728Level 1\u8f83\u5927\u65f6\u5bf9\u5e94\u7684score\u5927\u4e8eLevel 0\u7684score\uff0c\u5bfc\u81f4Level 0\u7684compact\u8fdf\u8fdf\u505a\u4e0d\u4e86\uff0c\u7136\u540e\u4e0a\u5c42\u7ee7\u7eed\u5199\u5165\u9020\u6210Level 0\u79ef\u538b\u4ece\u800cstall\uff0c\u63d0\u9ad8compact\u7ebf\u7a0b\u6570\u4e4b\u540e\uff0cLevel 1 -> Level 2\u4f1a\u52a0\u901f\uff0c\u7f13\u89e3\u4e86Level 0\u7684\u79ef\u538b\uff0c\u4e0d\u4f1a\u53d1\u751fstall\uff0c\u6240\u4ee5\u4f60\u4e0a\u5c42\u4e5f\u5c31\u4e0d\u4f1a\u6296\u52a8\u4e86\n\u8fd9\u4e00\u7248pika\u7684\u6700\u5927compact\u7ebf\u7a0b\u6570\u9650\u5236\u57284\u4e2a\uff0c\u4e0b\u4e00\u7248\u6211\u6539\u5927\u4e00\u70b9\n\u914d\u7f6e\u6587\u4ef6\u8c03\u6574\nmax-background-compactions : 4\n\u76ee\u524d\u6d4b\u8bd5\u7684\u7ed3\u679c\u6bd4\u4e0a\u6b21\u597d\u5f88\u591a\n```\n200G \u603b\u91cf=2418403 \u4e0a1s\u5185\u5199\u5165\u91cf 91330 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 22:10:30 CST\n200G \u603b\u91cf=2509546 \u4e0a1s\u5185\u5199\u5165\u91cf 91143 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 22:10:32 CST\n200G \u603b\u91cf=2601159 \u4e0a1s\u5185\u5199\u5165\u91cf 91613 | 2017\u5e74 09\u6708 12\u65e5 \u661f\u671f\u4e8c 22:10:33 CST\n200G \u603b\u91cf=1209428475 \u4e0a1s\u5185\u5199\u5165\u91cf 40408 | 2017\u5e74 09\u6708 13\u65e5 \u661f\u671f\u4e09 04:32:00 CST\n200G \u603b\u91cf=1209465791 \u4e0a1s\u5185\u5199\u5165\u91cf 37316 | 2017\u5e74 09\u6708 13\u65e5 \u661f\u671f\u4e09 04:32:01 CST\n200G \u603b\u91cf=1209506445 \u4e0a1s\u5185\u5199\u5165\u91cf 40654 | 2017\u5e74 09\u6708 13\u65e5 \u661f\u671f\u4e09 04:32:02 CST\n200G \u603b\u91cf=2049403726 \u4e0a1s\u5185\u5199\u5165\u91cf 34517 | 2017\u5e74 09\u6708 13\u65e5 \u661f\u671f\u4e09 10:36:13 CST\n200G \u603b\u91cf=2049443609 \u4e0a1s\u5185\u5199\u5165\u91cf 39883 | 2017\u5e74 09\u6708 13\u65e5 \u661f\u671f\u4e09 10:36:14 CST\n200G \u603b\u91cf=2049484023 \u4e0a1s\u5185\u5199\u5165\u91cf 40414 | 2017\u5e74 09\u6708 13\u65e5 \u661f\u671f\u4e09 10:36:15 CST\n```. \u611f\u8c22 baotiao \u548c KernelMaker \u5bf9\u6d4b\u8bd5\u7684\u652f\u6301\u4e0e\u5e2e\u52a9\n\u603b\u7ed3\n\n\n\u5982\u679c\u4e0d\u9700\u8981\u968f\u65f6\u8fc1\u79fb\u6570\u636e\u7684\u529f\u80fd\uff0c\u6302\u5230codis\u540e\u9762\u7684pika \u914d\u7f6e\u4e2dslotmigrate \u4e5f\u53ef\u4ee5\u4e3ano\uff0c\u7b49\u9700\u8981\u8fc1\u79fb\u7684\u65f6\u5019\u518d\u8bbe\u7f6e\u4e3ayes\uff08\u6ca1\u6709\u5b9e\u9645\u6d4b\u8bd5\u8fc7\uff0c\u6302\u5230codis\u540e\u7684\u6d4b\u8bd5\u5982\u679c\u6709\u95ee\u9898\u4f1a\u65b0\u5f00issue\uff09\u3002\n\n\n\u5982\u679c\u7531\u4e8ecompact\u5bfc\u81f4\u7684\u4e0a\u5c42\u5e94\u7528\u6709\u5ef6\u8fdf\uff0c\u53ef\u4ee5\u8c03\u6574max-background-compactions\u53c2\u6570\uff0c2.2.5\u7684\u7248\u672c\u6700\u5927\u4e3a4\n\n\n\u6d4b\u8bd5\u7ed3\u675f\n\u5c06\u8fd120\u5c0f\u65f6\u7684\u6301\u7eed\u5199\u5165\uff08api\u6709\u8bfb\u53d6\u64cd\u4f5c\uff09\n\u76ee\u524d\u78c1\u76d8\u5269\u4f59108G\uff0c\u5199\u5165\u7a33\u5b9a\u57283w/s\u5de6\u53f3\uff0c %util 70 \u5de6\u53f3\uff0cpika\u6027\u80fd\u6ee1\u8db3\u4e1a\u52a1\u9700\u8981\n```\nWed Sep 13 15:51:02 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          56.45    0.00   17.65    5.38    0.00   20.53\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00   442.00 4927.00   22.00    33.52     1.81    14.62     1.75    0.35    0.35    0.32   0.14  71.00\nWed Sep 13 15:51:04 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          56.48    0.00   18.20    4.36    0.00   20.95\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00 10350.00 4733.00  156.00    31.82    41.04    30.52     1.53    0.31    0.27    1.69   0.13  63.60\nWed Sep 13 15:51:05 CST 2017\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n          53.59    0.00   17.78    4.04    0.00   24.59\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00  7404.00 6831.00  117.00    38.97    29.38    20.15     1.53    0.22    0.20    1.53   0.10  70.90\n```\n. ",
    "mtio": "+1\nnode-redis\u5ba2\u6237\u7aef\uff0cReplyError: Err unknown or unsupported command 'exec'. ",
    "chenyingjie2012": "raise response\nredis.exceptions.ResponseError: wrong number of arguments or unsupported command\n\u6211\u7684\u4e5f\u51fa\u73b0\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u4e2a\u95ee\u9898\u4f60\u662f\u600e\u4e48\u89e3\u51b3\u7684\u5462\uff1f. \u597d\u50cf\u8ddf\u6211\u9047\u5230\u95ee\u9898\u4e0d\u662f\u4e00\u4e2a\u4e1c\u897f\uff0c\u4e3e\u4e2a\u4f8b\u5b50\u554a\nimport redis\nr=redis.StrictRedis(host='10.40.0.70',port='9221')\nr.hset(name='search', key='google', value='second')\nr.hset(name='search', key='baidu', value='top1@china')\npipeline = r.pipeline()\npipeline.hmget(name='search', key=['google', 'baidu']) #\u6709\u5927\u91cf\u8fd9\u79cd\u67e5\u8be2\uff0c\u6240\u4ee5\u4e3a\u4e86\u51cf\u5c11\u7f51\u7edc\u5ef6\u8fdf\uff0c\u60f3\u7528redis\u63d0\u4f9b\u7684pipeline\u529f\u80fd\npipeline.execute()\n\u5c31\u5f00\u59cb\u62a5\u9519\u4e86\uff0c\u90a3\u4e2apika \u67e5\u4e86\u4e00\u4e0b\u4e0d\u662f\u6211\u7528\u7684\u8fd9\u4e2aredis\u7684python\u5ba2\u6237\u7aef\uff0c\u5404\u4f4d\uff0c\u8fd9\u79cd\u95ee\u9898\u7528redis pipeline\u600e\u4e48\u641e\u5b9a\n. @Leviathan1995  \u5fd8\u4e86at\u4e86\u2026\u2026 . @Leviathan1995  \u8bf7\u6559\u4e00\u4e0b\uff0cpika\u662f\u4ec0\u4e48\u4e1c\u897f\u5440\uff0c\u4e0d\u61c2\u8fd9\u4e2a\u5440\uff0c\u53bb\u597d\u597d\u770b\u770b\u4f60\u5206\u60f3\u7684\u90a3\u4e2a\u94fe\u63a5\u5148. ",
    "jianqingdu": "batch\u53ea\u662f\u4fdd\u8bc1\u5199\u5165\u7684\u539f\u5b50\u6027\n1. list\u7684\u8bfb\u53d6\u4f1a\u6709\u591a\u6b21read\u64cd\u4f5c\uff0c\u6bd4\u5982\u8bfb\u53d6\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u8bfb\u53d6\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u8fd9\u65f6\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u901a\u8fc7batch\u64cd\u4f5c\u4fee\u6539\u4e86\u8fd9\u4e2alist\uff0c\u8fd9\u65f6\u8bfb\u53d6\u7ebf\u7a0b\u8bfb\u53d6\u7b2c\u4e09\u4e2a\u5143\u7d20\u65f6\uff0c\u662f\u4e0d\u662f\u4f1a\u6709\u95ee\u9898\n2. \u5bf9\u4e8ereplication\u4f1a\u6709\u95ee\u9898\uff0c\u6bd4\u5982\u4e24\u4e2a\u7ebf\u7a0b\u540c\u65f6\u64cd\u4f5c\uff0c\u4e00\u4e2a\u7ebf\u7a0bmset k1 v1 k2 v2, \u53e6\u4e00\u4e2a\u7ebf\u7a0bset k2 v3,\n\u7531\u4e8e\u5199\u5165\u53ea\u5bf9\u7b2c\u4e00\u4e2akey\u52a0\u9501\uff0c\u6240\u4ee5\u4e24\u4e2a\u7ebf\u7a0b\u90fd\u80fd\u540c\u65f6\u5199\u5165\uff0c\u8fd9\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u987a\u5e8f\u7684\u60c5\u51b5\u5bfc\u81f4\u4e3b\u5907\u7684k2\u503c\u4e0d\u4e00\u81f4: \n  mset k1 v1 k2 v2\n  set k2 v3\n  binlog set k2 v3\n  binlog mset k1 v1 k2 v2\n. @baotiao  pika\u611f\u89c9\u4f9d\u8d56\u7684\u4e1c\u897f\u592a\u591a\u4e86\uff0c\u770b\u7740\u548c\u7f16\u8bd1\u90fd\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u81ea\u5df1\u4e5f\u505a\u4e86\u4e00\u4e2a\u7528RocksDB\u505a\u5b58\u50a8\u5f15\u64ce\uff0c\u517c\u5bb9Redis\u534f\u8bae\u7684kv\u5b58\u50a8\u670d\u52a1\uff0c\u76f8\u6bd4pika\uff1a\n  1. \u652f\u6301\u591adb\u53f7\n  2. zset\u7684score\u652f\u6301double\u7c7b\u578b\n  3. \u4e0d\u540c\u6570\u636e\u7c7b\u578b\u7684key\u4e0d\u5141\u8bb8\u91cd\u590d\n  4. \u53ea\u4f9d\u8d56RocksDB\u5e93\uff0c\u7f16\u8bd1\u6bd4\u8f83\u7b80\u5355\n  5. \u6bd4\u8f83\u5b8c\u5584\u7684Tcl\u6d4b\u8bd5\u811a\u672c\u652f\u6301\n\u5730\u5740\u662f:  https://github.com/jianqingdu/kedis\n. \u5386\u53f2\u5305\u88b1\u7684\u95ee\u9898\u662f\u6bd4\u8f83\u7ea0\u7ed3\n\u901a\u8fc7\u7ebf\u7a0b\u626b\u63cf\u5220\u9664TTL\u8d85\u65f6\u7684key\u786e\u5b9e\u4f1a\u6709\u5199\u653e\u5927\u7684\u95ee\u9898\uff0c\u4e0d\u8fc7\u5982\u679c\u4e0d\u53bb\u6539RocksDB\u7684\u5b9e\u73b0\uff0c\u4e5f\u5c31\u53ea\u80fd\u8fd9\u4e48\u5e72\u4e86\n\u5bf9\u4e8e\u590d\u6742\u6570\u636e\u7ed3\u6784\uff0c\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u5230RocksDB\u7684\u5143\u6570\u636e\u952e\u503c\u5bf9\uff0c\u503c\u91cc\u9762\u6709\u6570\u636e\u7c7b\u578b\uff0cttl\u503c\u548c\u5143\u7d20\u4e2a\u6570\uff0c\u7136\u540e\u6bcf\u4e2a\u5143\u7d20\u5bf9\u5e94\u5230RocksDB\u7684\u952e\u503c\u5bf9\u7684\u952e\u91cc\u9762\uff0c\u662f\u4ee5\u6570\u636e\u7c7b\u578b\uff0c\u771f\u5b9ekey \u5f00\u5934\uff0c\u6240\u4ee5\u8981\u5220\u9664\u65f6\uff0c\u7528\u4e00\u4e2a\u8fed\u4ee3\u5668\u5c31\u53ef\u4ee5\u904d\u5386\u4e00\u4e2akey\u4e0b\u7684\u6240\u6709\u5143\u7d20\uff0c\u7136\u540e\u7528WriteBatch\u539f\u5b50\u5220\u9664\uff0cRocksDB\u6709DeleteRange()\u63a5\u53e3\uff0c\u4e0d\u8fc7\u770b\u90a3\u4e2a\u63a5\u53e3\u7684\u6ce8\u91ca\uff0c\u662f\u4e00\u4e2a\u5b9e\u9a8c\u6027\u8d28\u7684\u6027\u80fd\u4f18\u5316\uff0c\u6240\u6709\u6ca1\u6562\u7528\uff0c\u6240\u4ee5\u5982\u679c\u590d\u6742\u6570\u636e\u7c7b\u578b\u7684\u5143\u7d20\u4e2a\u6570\u5f88\u591a\u7684\u65f6\u5019\uff0c\u6709\u53ef\u4ee5\u76f4\u63a5\u628a\u5199\u5165\u7684IO\u6253\u6ee1\n\u590d\u6742\u6570\u636e\u7ed3\u6784\u7684\u8fc7\u671f\u5b9e\u73b0\u548cstring\u7c7b\u578b\u4e00\u6837\uff0c\u6709\u4e00\u4e2a\u7279\u6b8a\u7684TTL\u6570\u636e\u7c7b\u578b\uff0c\u91cc\u9762\u6309TTL\u6392\u5e8f\uff0c\u8fd8\u6709\u4e00\u4e9b\u4fe1\u606f\u8868\u793a\u8fd9\u4e2akey\u662f\u54ea\u4e2a\u7c7b\u578b\uff0c\u7136\u540e\u6709\u4e2a\u72ec\u7acb\u7684\u7ebf\u7a0b\u4f1a\u53bb\u904d\u5386\u8fd9\u4e2a\u524d\u7f00\uff0c\u76f4\u5230TTL\u503c\u5927\u4e8e\u5f53\u524d\u65f6\u95f4\u4e3a\u6b62\uff0c\u7136\u540e\u5220\u9664\u90a3\u4e9b\u5230\u671f\u7684key\n. ",
    "Coneboy-k": "@jianqingdu  \u5199\u653e\u5927\u95ee\u9898\uff0c\u53ef\u4ee5\u653e\u5165\u51cc\u6668\u8fd9\u4e2a\u65f6\u95f4\u6bb5\u6765\u8fdb\u884c\u64cd\u4f5c\u3002\u7c7b\u4f3c\u65b9\u6848\u53ef\u4ee5\u53c2\u8003\u4e0b\u65e5\u5fd7\u578bmq\u7cfb\u7edf\u7684\u5b9e\u73b0\u3002 kedis \u4e2d\u7684 ttl \u8bbe\u8ba1\u5f88\u8d5e\uff0c\u4f46\u6211\u6709\u4e2a\u7591\u95ee\uff0c\u51fa\u4e8e\u4ec0\u4e48\u8003\u8651\uff0cmeta key \u4e0d\u52a0\u4e0aversion \u53f7\uff1f pika\u7684version \u53ef\u4ee5\u505a\u5230\u79d2\u5220\uff0c\u8fd9\u4e2a\u5f88\u8d5e\u7684\u5904\u7406\u3002 . ",
    "xmm1989218": "\u4e0d\u597d\u610f\u601d \u8fd9\u8fb9io\u4e00\u76f4\u662f\u6bd4\u8f83\u9ad8\u7684 \u4e0a\u9762\u6df7\u90e8\u4e86mysql \u6211\u521a\u770b\u5230\u6700\u65b0\u7248\u672cfix\u4e86 rsync\u540c\u6b65\u65f6\u5931\u8d25\u7684\u95ee\u9898 \u6211\u6700\u8fd1\u518d\u53bb\u8bd5\u8bd5\u770b. ",
    "bittoy": "\u77e5\u9053\u4e86\uff0c\u8c22\u8c22\uff0c\u6211\u4f1a\u7559\u610f\u8fd9\u5757\u7684 @baotiao . @fancy-rabbit \u6309\u4f60\u8bf4\u7684\u914d\u7f6e\u76ee\u524d\u6ca1\u6709\u51fa\u73b0\u95ee\u9898\uff0c\u5341\u5206\u611f\u8c22. timeout\u53ef\u4ee5\u50cfredis\u4e00\u6837\u8bbe\u7f6e\u62100\u561b\uff0c\u5c31\u662f\u6ca1\u6709\u8d85\u65f6\u65ad\u5f00. ",
    "squalfof": "thanks for quick response.\n-- the version of gtest ?\n-- the version of gflags ?. As glog v0.3.3 released around 2013-02-01, thought the appropriate version of its deps should be\n-- gflags v2.0, release on 21 Apr 2013 \n-- gtest v1.6,   release 19 Apr 2011 \ntry recent version you'll encounter error message during compiling.\nanyway, i'll close this issue. thanks. \u53e6\u5916\uff0cstring \u90e8\u5206\u547d\u4ee4\u7684\u6392\u5217\uff0c\u53ef\u5426\u6309\u7167\u5b57\u6bcd\u5e8f\u5217\u51fa\uff0c\u8fdb\u884c\u67e5\u627e\u4f1a\u65b9\u4fbf\u5f88\u591a. \"Pika \u5feb\u7167\u5f0f\u5907\u4efd\u65b9\u6848\" \u6d41\u7a0b\u56fe\u91cc\u7684 \u201c\u63a5\u89e6\u6587\u4ef6\u963b\u6b62\u5220\u9664\u201d \u662f\u5426\u662f \u201c\u7ed3\u675f\u6587\u4ef6\u963b\u6b62\u5220\u9664\u201d\u6216\u8005\u201c\u53d6\u6d88\u201d \uff1f. \u5ba2\u6c14\u3002\u8f9b\u82e6\u4e86\u3002. @Leviathan1995 \u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u201cwiki redis \u652f\u6301\u7684\u63a5\u53e3\u53ca\u517c\u5bb9\u60c5\u51b5\u201d \u91cc\u9762 string \u7684\u7b2c\u4e00\u884c\u7684\u547d\u4ee4\uff0c\u4f8b\u5982 del, exists, expire \u662f\u5168\u5c40\u7684\u5417\uff1f\u8fd8\u662f\u53ea\u4f5c\u7528\u4e8e string \u7684\uff1f\u591a\u8c22. \u539f\u6765\u662f\u5168\u5c40\u7684. Cool, thanks. ",
    "airclear": "\u5410\u69fd\u4e00\u4e0b\uff0c\u7f16\u8bd1\u4f53\u9a8c\u771f\u662f\u7cdf\u900f\u4e86\u3002\u3002\u3002\n\u4f7f\u7528docker\u62a5\u9519\uff0c\u5404\u79cd\u901a\u4e0d\u8fc7:\u88c5\u4e86EPEL\uff0c\u80fd\u88c5\u4e0aglog\u4e86\uff0c\u7136\u540e\u4e4b\u540e\u8fd8\u62a5\u6ca1\u6709 which\u547d\u4ee4\u9519\u8bef~~\n\u6839\u636e\u6559\u7a0b\u4f7f\u7528centos\u7f16\u8bd1\u4e00\u6837\u62a5\u9519\nGEN      build_version.cc\n  CC       pika_command.o\nIn file included from ./include/pika_client_conn.h:9:0,\n                 from ./include/pika_admin.h:9,\n                 from /data/apps/pika/src/pika_command.cc:6:\n/usr/include/glog/logging.h:85:27: fatal error: gflags/gflags.h: No such file or directory\n #include <gflags/gflags.h>\n                           ^\ncompilation terminated.\nmake: *** [/data/apps/pika/src/pika_command.o] Error 1\n. @Leviathan1995  \n\nPackage gflags-2.1.1-6.el7.x86_64 already installed and latest version\n\n\u5927\u795e\uff0c\u5b98\u65b9\u80fd\u641e\u4e2adocker\u955c\u50cf\u5417\uff1f\u8fd9\u6837\u80fd\u6781\u5927\u964d\u4f4e\u4f7f\u7528\u95e8\u69db\u554a\uff0c\u6709\u5229\u4e8e\u4f20\u64ad\u3002\u3002\u3002\n. ",
    "Greking": "gflags-devel   glog-devel\u662f\u8981\u5b89\u88c5\u5f00\u53d1\u5305\u5427\uff01. ",
    "T0mmyliu": "\"lots of trivial problem while using rsync\" \u662f\u6307\u7684\u7528rsync daemon\u8fd9\u79cd\u5de5\u5177\u4f1a\u9047\u5230\u5c0f\u95ee\u9898\u8fd8\u662f\u8bf4\u57fa\u4e8e\u6587\u4ef6\u7684\u5168copy\u8fd9\u79cd\u673a\u5236\u4f1a\u6709\u70b9\u5c0f\u95ee\u9898\u5440. ",
    "imneov": "\u9644\u4e0a\u914d\u7f6e\u6587\u4ef6\n```\nPika port\nport : 9221\nThread Number\nthread-num : 30\nSync Thread Number\nsync-thread-num : 6\nItem count of sync thread queue\nsync-buffer-size : 10\nPika log path\nlog-path : /pika-9221/log/\nPika glog level: only INFO and ERROR\nloglevel : error\nPika db path\ndb-path : /pika-9221/db/\nPika write-buffer-size\nwrite-buffer-size : 268435456\nPika timeout\ntimeout : 60\nRequirepass\nrequirepass : mypass\nMasterauth\nmasterauth : mypass\nUserpass\nuserpass : mypass\nUser Blacklist\nuserblacklist :\nDump Prefix\ndump-prefix :\ndaemonize  [yes | no]\ndaemonize : yes\nslotmigrate  [yes | no]\nslotmigrate : yes\nDump Path\ndump-path : /pika-9221/dump/\nExpire-dump-days\ndump-expire : 0\npidfile Path\npidfile : /pika-9221/pika-9221.pid\nMax Connection\nmaxclients : 20000\nthe per file size of sst to compact, defalut is 2M\ntarget-file-size-base : 20971520\nExpire-logs-days\nexpire-logs-days : 7\nExpire-logs-nums\nexpire-logs-nums : 10\nRoot-connection-num\nroot-connection-num : 2\nSlowlog-log-slower-than\nslowlog-log-slower-than : 10000\nslave-read-only(yes/no, 1/0)\nslave-read-only : 0\nPika db sync path\ndb-sync-path : /pika-9221/dbsync/\ndb sync speed(MB) max is set to 125MB, min is set to 0, and if below 0 or above 125, the value will be adjust to 125\ndb-sync-speed : -1\nnetwork interface\nnetwork-interface : eth0\nreplication\nslaveof : 121.41.45.182:6379\nmasterauth Stip1234\n\nCronTask, format: start-end/ratio, like 02-04/60, pika will check to schedule compaction between 2 to 4 o'clock everyday\nif the freesize/disksize > 60%. NOTICE:if compact-interval is set, compact-cron will be mask and disable.\ncompact-cron :\n\nCompact-interval, format: interval/ratio, like 6/60, pika will check to schedule compaction every 6 hours,\nif the freesize/disksize > 60%. NOTICE:compact-interval is prior than compact-cron;\ncompact-interval :\n\nCritical Settings\n\nbinlog file size: default is 100M,  limited in [1K, 2G]\nbinlog-file-size : 2048576000\nCompression\ncompression : snappy\nmax-background-flushes: default is 1, limited in [1, 4]\nmax-background-flushes : 1\nmax-background-compactions: default is 1, limited in [1, 4]\nmax-background-compactions : 4\nmax-cache-files default is 5000\nmax-cache-files : 5000\nmax_bytes_for_level_multiplier: default is 10, you can change it to 5\nmax-bytes-for-level-multiplier : 10\n. \u6d4b\u8bd5\u60c5\u51b5\uff1a\n$ ../../codis-vip/bin/redis-cli -p 9221  info\nServer\npika_version:2.2.6\npika_git_sha:e646201f53c5584294bdb2dece7b073f0d0e69b2\npika_build_compile_date: Oct 18 2017\nos:Linux 3.10.0-514.26.2.el7.x86_64 x86_64\narch_bits:64\nprocess_id:21083\ntcp_port:9221\nthread_num:20\nsync_thread_num:6\nuptime_in_seconds:54391\nuptime_in_days:2\nconfig_file:config/pika.conf\nData\ndb_size:38285582123\ndb_size_human:36511M\ncompression:snappy\nused_memory:823964088\nused_memory_human:785M\ndb_memtable_usage:216998104\ndb_tablereader_usage:606965984\nLog\nlog_size:1742087400\nlog_size_human:1661M\nsafety_purge:write2file1497\nexpire_logs_days:7\nexpire_logs_nums:10\nbinlog_offset:1507 25162013\nClients\nconnected_clients:2\nStats\ntotal_connections_received:310\ninstantaneous_ops_per_sec:1\ntotal_commands_processed:1498233\nis_bgsaving:No, , 0\nis_slots_reloading:No, , 0\nis_scaning_keyspace:No\nis_compact:No\ncompact_cron:\ncompact_interval:\nReplication(MASTER)\nrole:master\nconnected_slaves:0\nKeyspace\nTime:1970-01-01 08:00:00\nkv keys:0\nhash keys:0\nlist keys:0\nzset keys:0\nset keys:0\n[codis@iZbp15rln164lky0vwuvmuZ db]$ ps aux |grep pika\ncodis    21083 42.1 95.6 18854120 15563756 pts/1 Sl+ Oct19 382:18 bin/pika -c config/pika.conf\ncodis    26678  0.0  0.0 112652   968 pts/0    S+   10:29   0:00 grep --color=auto pika\n[db]$ netstat -ant |grep 9221 |wc -l\n5\n```\ntcmalloc free\u524d\ntcmalloc stats\n```\n 1) \"------------------------------------------------\"\n 2) \"MALLOC:    15747635256 (15018.1 MiB) Bytes in use by application\"\n 3) \"MALLOC: +   2868363264 ( 2735.5 MiB) Bytes in page heap freelist\"\n 4) \"MALLOC: +     46470680 (   44.3 MiB) Bytes in central cache freelist\"\n 5) \"MALLOC: +      1169152 (    1.1 MiB) Bytes in transfer cache freelist\"\n 6) \"MALLOC: +     23083696 (   22.0 MiB) Bytes in thread cache freelists\"\n 7) \"MALLOC: +     75235328 (   71.8 MiB) Bytes in malloc metadata\"\n 8) \"MALLOC:   ------------\"\n 9) \"MALLOC: =  18761957376 (17892.8 MiB) Actual memory used (physical + swap)\"\n10) \"MALLOC: +    234561536 (  223.7 MiB) Bytes released to OS (aka unmapped)\"\n11) \"MALLOC:   ------------\"\n12) \"MALLOC: =  18996518912 (18116.5 MiB) Virtual address space used\"\n13) \"MALLOC:\"\n14) \"MALLOC:        1163875              Spans in use\"\n15) \"MALLOC:             33              Thread heaps in use\"\n16) \"MALLOC:           8192              Tcmalloc page size\"\n17) \"------------------------------------------------\"\n18) \"Call ReleaseFreeMemory() to release freelist memory to the OS (via madvise()).\"\n19) \"Bytes released to the\"\ntop\nPID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\n21083 codis     20   0 17.981g 0.014t      0 S   0.0 95.7 382:20.84 pika\n```\ntcmalloc free\u540e\n```\ntcmalloc stats\n1) \"------------------------------------------------\"\n 2) \"MALLOC:    15747637304 (15018.1 MiB) Bytes in use by application\"\n 3) \"MALLOC: +            0 (    0.0 MiB) Bytes in page heap freelist\"\n 4) \"MALLOC: +     46467376 (   44.3 MiB) Bytes in central cache freelist\"\n 5) \"MALLOC: +      1168128 (    1.1 MiB) Bytes in transfer cache freelist\"\n 6) \"MALLOC: +     23085976 (   22.0 MiB) Bytes in thread cache freelists\"\n 7) \"MALLOC: +     75235328 (   71.8 MiB) Bytes in malloc metadata\"\n 8) \"MALLOC:   ------------\"\n 9) \"MALLOC: =  15893594112 (15157.3 MiB) Actual memory used (physical + swap)\"\n10) \"MALLOC: +   3102924800 ( 2959.2 MiB) Bytes released to OS (aka unmapped)\"\n11) \"MALLOC:   ------------\"\n12) \"MALLOC: =  18996518912 (18116.5 MiB) Virtual address space used\"\n13) \"MALLOC:\"\n14) \"MALLOC:        1163861              Spans in use\"\n15) \"MALLOC:             33              Thread heaps in use\"\n16) \"MALLOC:           8192              Tcmalloc page size\"\n17) \"------------------------------------------------\"\n18) \"Call ReleaseFreeMemory() to release freelist memory to the OS (via madvise()).\"\n19) \"Bytes released to the\"\ntop\nPID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\n21083 codis     20   0 17.981g 0.014t      0 S   0.7 94.5 382:21.13 pika\n```\n. ",
    "neolf": "\u4e0d\u8c03\u7528 doMigrate migrateKeyTTl \u51fd\u6570\u4f9d\u7136\u51fa\u73b0\u5185\u5b58\u66b4\u6da8\u3002\ndoMigrate\uff1ahttps://github.com/Qihoo360/pika/blob/b1f378d420ce8eccf2f18b4ba72f6d6e7307d00d/src/pika_slot.cc#L132\nmigrateKeyTTl\uff1ahttps://github.com/Qihoo360/pika/blob/b1f378d420ce8eccf2f18b4ba72f6d6e7307d00d/src/pika_slot.cc#L196. ",
    "ustczz": "get. ",
    "cuixin": "\u987a\u4fbf\u8bf4\u4e00\u53e5\uff0c\u6211\u5728\u7528g++ 7.2.0\u7f16\u8bd1\u65f6\uff0c\u9700\u8981\u4fee\u6539rocksdb\u4e0b\u9762\u4e09\u4e2a\u6e90\u7801\nutil/thread_local.h\n    utilities/persistent_cache/block_cache_tier_file.h\n    utilities/persistent_cache/volatile_tier_impl.h\n\u52a0\u5165\uff1a\n```\ninclude \n```\n\u8981\u4e0d\u62a5\u9519\u54e6. ",
    "DapengWei": "\u4e0d\u540c\u7c7b\u578bkey\u91cd\u540d\u95ee\u9898\u3002. ",
    "yushengery": "\u652f\u6301CAS\u7279\u6027. \u4f18\u5316\u6279\u91cf\u5199\u7684\u6027\u80fd\uff0c\u51cf\u5c11\u6279\u91cf\u5199\u7684\u65f6\u5019compact. \u4f18\u5316hash\u7684\u6027\u80fd\uff0c\u5982\u679chash\u6570\u636e\u7ed3\u6784\u7684\u5927\u5c0f\u5728\u4e00\u5b9a\u8303\u56f4\u4e4b\u5185\uff0c\u4f7f\u7528KV\u7684\u65b9\u5f0f\u6765\u5b58\u50a8\uff1f. ",
    "huangzhiyong": "\u7cbe\u5ea6\u653e\u5f00. ",
    "starjiang": "\u4f18\u5316list range \u64cd\u4f5c,\u5f00\u542fblock cache. ",
    "Stephan14": "OK\uff0c 3q. ",
    "freeaswind": "\u5df2\u4e86\u89e3 3q. \u94fe\u63a5 \u653e\u5730\u5740\u680f\u8bbf\u95ee \u5c34\u5c2c\u554a. Pika module 2.2.6. ",
    "lixianliang": "master\u662f\u5148\u5199db\u5728\u5199binlog\n1. \u82e5\u5199db\u6210\u529f\u4e86\u4f46binlog\u5199\u5931\u8d25\u4e86\uff1b\u8fd9\u4e2a\u65f6\u5019master slave\u6570\u636e\u4e0d\u4e00\u81f4\u4e86. ",
    "Weilor": "\u4e3b\u5907\u540c\u6b65\u5b8c\u6210\u540e\u5f88\u77ed\u65f6\u95f4\u5c31\u6267\u884c\u4e86slaveof no one\uff0c\u8fd9\u4f1a\u662f\u9020\u6210\u8fd9\u4e2a\u9519\u8bef\u7684\u539f\u56e0\u5417\uff1f\u63d0\u793a\u4e3b\u5907\u540c\u6b65\u5b8c\u6210\u540e\u662f\u5426\u8fd8\u5728\u8fdb\u884c\u5176\u4ed6\u7684\u540c\u6b65\u64cd\u4f5c\uff1f. \u8fd8\u6709\u4e24\u4e2a\u73b0\u8c61\n1.\n2.3.0\u7248\u672c\u4f5c\u4e3aSlave\u548c2.2.4\u7248\u672c\u7684Master\u540c\u6b65\u5b8c\u6210\u540e\uff0c\u53d1\u73b0binlog offset\u51fa\u73b0\u4e86slave\u9886\u5148\u4e8emaster\u7684\u73b0\u8c61\uff0c\u5982master\u4e3abinlog_offset:496 12323328\uff0cslave\u4e3abinlog_offset:496 20536991\n2.\n\u6700\u65b0\u7684\u73b0\u8c61\u662f\uff0c\u5373\u4f7f\u4e0d\u5728slave\u8282\u70b9\u4e0a\u4f7f\u7528slaveof no one\uff0c\u8fc7\u4e00\u6bb5\u65f6\u95f4\uff0c\u91cc\u9762\u7684key\u4e5f\u4f1a\u88ab\u5220\u9664\u5230\u51e0\u4e4e\u6ca1\u6709\uff0c\u4f46db\u6587\u4ef6\u5927\u5c0f\u4e0d\u53d8\uff0c\u540c\u65f6binlog offset\u4f1a\u8d85\u8fc7master\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e2a\u65f6\u5019\u518d\u8bd5\u7740\u8fdb\u884c\u4e3b\u4ece\u91cd\u65b0\u540c\u6b65\u4f1a\u62a5\u9519\uff0c\u53ea\u80fd\u5220\u6389db\u91cd\u65b0\u540c\u6b65\n  . 2.3.1\u7248\u672c\u514b\u670d\u4e86key\u88ab\u5220\u9664\u7684\u73b0\u8c61\uff0c\u4f46\u662f\u51fa\u73b0\u4e86\u4e3b\u4ece\u4e0d\u540c\u6b65\uff0c\u57fa\u672c\u4e0a\u5168\u91cf\u540c\u6b65\u7ed3\u675f\u540e\u5c31\u4e0d\u518d\u8fdb\u884c\u589e\u91cf\u540c\u6b65\u4e86\u2026\u2026\n\u50cf\u6211\u4e00\u6837\u5e0c\u671b\u80fd\u5728\u65b0\u65e7\u7248\u672c\u95f4\u65e0\u7f1d\u5e73\u6ed1\u5347\u7ea7\u7684\u540c\u5b66\u5f97\u591a\u6ce8\u610f\u4e86. ",
    "Keleir": "java\n$ docker pull pikadb/pika:v2.2.6\nError response from daemon: manifest for pikadb/pika:v2.2.6 not found. ",
    "topilski": "Hi @Leviathan1995 , can i use hiredis? i think not all redis commands pika db supported, isn't it? Can you specify which commands supported? May be pika have some cli implementation?. SSH access, clusters, sentinels, modules? Do you have some logo of pika product? Something like this: https://github.com/fastogt/fastonosql/blob/master/src/resources/fastonosql/images/64x64/redis.png. Also which backend for saving keys using in db?. \nIn mostly pika compatibility is ready, but need to select redis connection. I think more clearly will be create pika item in connections combobox, for this i need logo image and list of supported commands, it is all what need for first integration step.. Few years ago SSDB also didn't have logo, https://github.com/ideawu/ssdb/issues/623 may be you have ability to create simple logo?. Do you have TTL keys?. Hi @Leviathan1995 , thank you!. Hi, in mostly i finished pika integration. But i have 1 question do you have command to receive keys count in selected DB? Also how much databases can be on server? in redis 16 by default. \n\n. Hi @Leviathan1995 , can you describe this screenshot?\n why kv 2? and why list 0?\n. \n\nImplementation finished, should work TTL, SSH, TLS, Binary keys, UTF-8, edit/remove/add keys and many other features. Do you have unix sockets? or i should remove this ability from settings?. Thank you @Leviathan1995 , done.. ",
    "prcyangli": "\u63d0\u4ea4\u7684\u7248\u672c\u4e0d\u5bf9\u5e94\uff0c\u4ee5\u524d\u7684\u7248\u672cargv_\u662f\u547d\u4ee4\u7c7b\u7684\u4e00\u4e2a\u6210\u5458\uff0c\u73b0\u5728\u53d8\u6210\u51fd\u6570\u5c40\u90e8\u53d8\u91cf\u4e86\uff0c\u5df2\u7ecf\u6539\u8fc7\u6765\u4e86\nbug\u4e3b\u8981\u95ee\u9898\u662f\uff0c\u5982\u679c\u5199binlog\u89e6\u53d1\u5931\u8d25\u8fd4\u56de\u65f6\uff0c\u5199\u547d\u4ee4\u4e4b\u524d\u6301\u6709\u7684\u9501\u6ca1\u6709\u91ca\u653e\uff0cpika\u9000\u51fa\u65f6\u6d88\u8017\u8fd9\u4e9b\u9501\u7684\u65f6\u5019\u5c31\u4f1a\u89e6\u53d1coredump. \u65b0\u52a0\u5165\u4e86slotsrestore\u547d\u4ee4\u652f\u6301\uff0c\u73b0\u5728\u652f\u6301\u4f7f\u7528codis\u76f4\u63a5\u5c06redis\u4e2d\u7684\u6570\u636e\u8fc1\u79fb\u5230pika. ",
    "tigerspring": "\u6211\u6267\u884c\u4e86 install snappy-devel \uff0c\u8fd9\u4e2a\u5e94\u8be5\u662f\u5b89\u88c5snappy\u7684\u5e93\u547d\u4ee4\u5427\uff1f\n\u5982\u679c\u4e0d\u662f\u6211\u5e94\u8be5\u600e\u4e48\u5b89\u88c5snappy\u5e93\uff1f. \u6211\u7684pika\u662f\u4ecegit\u91cc\u4e0b\u8f7d\u7684\u6e90\u7801,\u5207\u5230\u4e86tag v2.3.2\uff0c\u7136\u540e\u81ea\u884c\u7f16\u8bd1\u7684. \n. \u7f16\u8bd1\u7684\u65f6\u5019\u4e00\u76f4\u62a5\u8b66\u544a\uff0c\u8fd9\u662f\u600e\u4e48\u56de\u4e8b\uff1f\n\n. \u91cd\u65b0\u7f16\u8bd1\u540e\u8fd8\u662f\u62a5\u9519\n[FATAL] open kv db failed, Invalid argument: Compression type Snappy is not linked with the binary.. ",
    "Delicate-Feel": "\u8fd9\u4e2a\u95ee\u9898\u6709\u8bf4\u6cd5\u4e86\u5417. ",
    "yangtingdba": "\u5347\u7ea7\u52302.3.2\u8bd5\u8bd5\u5462\uff1f\n\u6211\u770b2.3.2 \u7279\u522b\u8bf4\u4e86\u8fd9\u4e2a\u95ee\u9898\nBug\u4fee\u590d\uff1a\n\u4fee\u590dv2.3.1\u89e3\u6790\u8fc7\u957f\u547d\u4ee4\u65f6\u5931\u8d25\u7684\u95ee\u9898      \u540c\u6b65\u89e3\u6790\u597d\u50cf\u4e5f\u6709\u95ee\u9898\uff1f. ",
    "dreamtraveler": "rsync \u662f\u6709\u7684\uff0c\u6211\u662fubuntu 16.04 \u7f16\u8bd1\u65f6\u8bf4\u627e\u4e0d\u5230 glog/logging.h , \u6211\u5c31\u76f4\u63a5\u4e0b\u8f7d\u7684 release 2.3.1\n\u4e0d\u8fc7\u6211\u628a master \u7684 userpass \u53bb\u6389\u662f\u6210\u529f\u7684\uff0c \u52a0\u4e0a\u7684\u914d\u7f6e\u662f master \u7684 userpass :  123456,  slave \u7684 masterauth : 123456 , \u5e94\u8be5\u6ca1\u9519\u5427.. \u90a3\u4e3a\u5565\u7a7a\u5bc6\u7801\u662f\u53ef\u4ee5\u7684. master \u8bbe\u7f6e\u4e86\u5bc6\u7801\u65f6\uff0cslave \u7684 masterauth \u786e\u5b9a\u8bbe\u7f6e\u4e86\u3002. \u662f\u7684. \u597d\u7684\uff0c\u6211\u7b49\u7b49. \u597d\uff0c\u6211\u7b49\u4f60\u4eec\u7684\u63d0\u4ea4\u5427.\nubuntu \u4e0a \u7f16\u8bd1\u627e\u4e0d\u5230 glog/logging.h \u7684\u95ee\u9898\uff0c\u6211\u7528 sudo apt-get install libgoogle-glog-dev \u89e3\u51b3\u4e86. \u597d\u7684. \u8fd8\u662f\u4e0d\u884c\uff0c\u73b0\u5728\u7684 log \u662f\u8fd9\u6837\u7684\nI0228 16:53:29.068449  3894 pika_trysync_thread.cc:239] Should connect master\nI0228 16:53:29.072197  3894 pika_trysync_thread.cc:254] Finish to start rsync, path:./dbsync/\nI0228 16:53:29.072393  3894 pika_trysync_thread.cc:257] Connect to master ip:10.0.74.107port: 9221\nI0228 16:53:29.072463  3894 pika_trysync_thread.cc:68] 2\n$4\nauth\n$6\n123456\n5\n$7\ntrysync\n$11\n10.0.74.107\n$4\n9222\n$1\n0\n$1\n0\nW0228 16:53:29.072818  3894 pika_trysync_thread.cc:93] Reply from master after trysync: OK\nW0228 16:53:29.073019  3894 pika_trysync_thread.cc:93] Reply from master after trysync: ERR NOAUTH Authentication required.\nW0228 16:53:29.073060  3894 pika_trysync_thread.cc:125] something wrong with sync, come in SyncError stage\nW0228 16:53:29.073078  3894 pika_server.cc:684] Sync error, set repl_state to PIKA_REPL_ERROR. \u5bf9\u7684. master \u52a0\u4e0a requirepass: 123456 \u53ef\u4ee5\u4e86. \u6211\u4e4b\u524d\u7684master \u662f userpass : 123456. requirepass \u4e0d\u662f\u5bc6\u7801\u7ba1\u7406\u5458\u5bc6\u7801\u5417\uff0c \u600e\u4e48\u53d8\u6210\u4e3b\u4ece\u8bbe\u7f6e\u7684\u5bc6\u7801\u4e86. @Leviathan1995 \u90fd\u6b63\u5e38\u4e86\uff0c\u8c22\u8c22. ",
    "chinyajie": "@Leviathan1995 \u8c22\u8c22\u4f60\u7684\u63d0\u793a\uff0c\u5b8c\u5168\u91cd\u65b0\u7f16\u8bd1\u4ee5\u540e\u5c31\u53ef\u4ee5\u4e86. ",
    "NickYang1988": "\u540c\u6837\u9047\u5230\u8fd9\u4e2a\u95ee\u9898\uff0cmaster\u662f3.0.4\uff0cslave\u662f3.0.6. ",
    "oooldcoder": "2.3.3. \u4ece\u8282\u70b9\u662f2.3.1\uff0c\u4e3b\u8fd8\u5728\u5199. \u6211\u5347\u7ea7\u52302.3.3\u8bd5\u8bd5. \u73b0\u5728\u4ece\u8282\u70b9\u7684\u4fe1\u606f\u53d8\u6210info\u4e86\uff0c\u4f46\u662f\u597d\u50cf\u8fd8\u662f\u5728\u4e0d\u65ad\u91cd\u8fde\nI0404 08:05:54.580471 16879 pika_master_conn.cc:39] BinlogReceiverThread AccessHandle succeeded, My server id: 8 Master auth server id: 8\nI0404 08:05:57.628657 16879 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.11.2.108 connecting\nI0404 08:05:57.628836 16879 pika_master_conn.cc:39] BinlogReceiverThread AccessHandle succeeded, My server id: 8 Master auth server id: 8\nI0404 08:06:00.675173 16879 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.11.2.108 connecting\nI0404 08:06:00.675330 16879 pika_master_conn.cc:39] BinlogReceiverThread AccessHandle succeeded, My server id: 8 Master auth server id: 8\nI0404 08:06:03.720875 16879 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.11.2.108 connecting\nI0404 08:06:03.721076 16879 pika_master_conn.cc:39] BinlogReceiverThread AccessHandle succeeded, My server id: 8 Master auth server id: 8\nI0404 08:06:06.765970 16879 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.11.2.108 connecting\nI0404 08:06:06.766118 16879 pika_master_conn.cc:39] BinlogReceiverThread AccessHandle succeeded, My server id: 8 Master auth server id: 8\nI0404 08:06:09.815393 16879 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.11.2.108 connecting\nI0404 08:06:09.815629 16879 pika_master_conn.cc:39] BinlogReceiverThread AccessHandle succeeded, My server id: 8 Master auth server id: 8\nI0404 08:06:12.861456 16879 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.11.2.108 connecting\nI0404 08:06:12.861644 16879 pika_master_conn.cc:39] BinlogReceiverThread AccessHandle succeeded, My server id: 8 Master auth server id: 8\nI0404 08:06:15.907827 16879 pika_binlog_receiver_thread.cc:41] Master Binlog Sender: 10.11.2.108 connecting\nI0404 08:06:15.908037 16879 pika_master_conn.cc:39] BinlogReceiverThread AccessHandle succeeded, My server id: 8 Master auth server id: 8\n\u4e3b\u8282\u70b9\u8fd8\u662f\u4e0b\u9762\u8fd9\u6837\nW0404 08:07:24.390429 17899 pika_server.cc:1267] Could not purge 248, since it is already be used\nI0404 08:07:27.297178 18254 pika_binlog_sender_thread.cc:258] BinlogSender Connect slave(10.11.2.109:10221) OK\nW0404 08:07:27.344449 18254 pika_binlog_sender_thread.cc:313] BinlogSender send slave(10.11.2.109:10221) failed,  IO error: write error Connection reset by peer\nI0404 08:07:30.344875 18254 pika_binlog_sender_thread.cc:258] BinlogSender Connect slave(10.11.2.109:10221) OK\nW0404 08:07:30.394187 18254 pika_binlog_sender_thread.cc:313] BinlogSender send slave(10.11.2.109:10221) failed,  IO error: write error Connection reset by peer\nI0404 08:07:33.394608 18254 pika_binlog_sender_thread.cc:258] BinlogSender Connect slave(10.11.2.109:10221) OK\nW0404 08:07:33.444864 18254 pika_binlog_sender_thread.cc:313] BinlogSender send slave(10.11.2.109:10221) failed,  IO error: write error Connection reset by peer\nW0404 08:07:34.391208 17899 pika_server.cc:1267] Could not purge 248, since it is already be used\nI0404 08:07:36.445292 18254 pika_binlog_sender_thread.cc:258] BinlogSender Connect slave(10.11.2.109:10221) OK\nW0404 08:07:36.493350 18254 pika_binlog_sender_thread.cc:313] BinlogSender send slave(10.11.2.109:10221) failed,  IO error: write error Connection reset by peer\nI0404 08:07:39.493803 18254 pika_binlog_sender_thread.cc:258] BinlogSender Connect slave(10.11.2.109:10221) OK\nW0404 08:07:39.543514 18254 pika_binlog_sender_thread.cc:313] BinlogSender send slave(10.11.2.109:10221) failed,  IO error: write error Connection reset by peer\nI0404 08:07:42.543972 18254 pika_binlog_sender_thread.cc:258] BinlogSender Connect slave(10.11.2.109:10221) OK\n\u80fd\u5e2e\u5fd9\u770b\u4e00\u4e0b\uff0c\u51fa\u73b0\u8fd9\u4e2a\u6211\u662f\u6709\u4ec0\u4e48\u4e1c\u897f\u914d\u9519\u4e86\u8fd8\u662f\uff1f. \u6211\u8fd9\u8fb9\u4e3b\u8282\u70b9\u7684\u914d\u7f6e\uff1a\n```\nPika port\nport : 9221\nThread Number\nthread-num : 1\nSync Thread Number\nsync-thread-num : 8\nItem count of sync thread queue\nsync-buffer-size : 10\nPika log path\nlog-path : ./log/\nPika glog level: only INFO and ERROR\nloglevel : INFO\nPika db path\ndb-path : ./db/\nPika write-buffer-size\nwrite-buffer-size : 1073741824\nPika timeout\ntimeout : 60\nRequirepass\nrequirepass :\nMasterauth\nmasterauth :\nUserpass\nuserpass :\nUser Blacklist\nuserblacklist :\nDump Prefix\ndump-prefix :\ndaemonize  [yes | no]\ndaemonize : yes\ndaemonize : no\nslotmigrate  [yes | no]\nslotmigrate : no\nslotmigrate : yes\nDump Path\ndump-path : ./dump/\nExpire-dump-days\ndump-expire : 0\npidfile Path\npidfile : ./pika.pid\nMax Connection\nmaxclients : 20000\nthe per file size of sst to compact, defalut is 2M\ntarget-file-size-base : 20971520\nExpire-logs-days\nexpire-logs-days : 7\nExpire-logs-nums\nexpire-logs-nums : 10\nRoot-connection-num\nroot-connection-num : 10\nSlowlog-log-slower-than\nslowlog-log-slower-than : 10000\nslave-read-only(yes/no, 1/0)\nslave-read-only : false\nPika db sync path\ndb-sync-path : ./dbsync/\ndb sync speed(MB) max is set to 125MB, min is set to 0, and if below 0 or above 125, the value will be adjust to 125\ndb-sync-speed : 125\nThe slave priority\nslave-priority : 100\nnetwork interface\nnetwork-interface : eth1\nreplication\nslaveof : master-ip:master-port\nCronTask, format: start-end/ratio, like 02-04/60, pika will check to schedule compaction between 2 to 4 o'clock everyday\nif the freesize/disksize > 60%. NOTICE:if compact-interval is set, compact-cron will be mask and disable.\ncompact-cron :\nCompact-interval, format: interval/ratio, like 6/60, pika will check to schedule compaction every 6 hours,\nif the freesize/disksize > 60%. NOTICE:compact-interval is prior than compact-cron;\ncompact-interval :\nserver-id for hub\nserver-id : 1\nThe peer-master config\ndouble-master-ip :\ndouble-master-port :\ndouble-master-server-id :\n\nCritical Settings\n\nbinlog file size: default is 100M,  limited in [1K, 2G]\nbinlog-file-size : 104857600\nCompression\ncompression : snappy\nmax-background-flushes: default is 1, limited in [1, 4]\nmax-background-flushes : 1\nmax-background-compactions: default is 2, limited in [1, 8]\nmax-background-compactions : 2\nmax-cache-files default is 5000\nmax-cache-files : 5000\nmax_bytes_for_level_multiplier: default is 10, you can change it to 5\nmax-bytes-for-level-multiplier : 10\n```\n\u4ece\u8282\u70b9\u7684\u914d\u7f6e\n```\nPika port\nport : 9221\nThread Number\nthread-num : 1\nSync Thread Number\nsync-thread-num : 8\nItem count of sync thread queue\nsync-buffer-size : 10\nPika log path\nlog-path : ./log/\nPika glog level: only INFO and ERROR\nloglevel : INFO\nPika db path\ndb-path : ./db/\nPika write-buffer-size\nwrite-buffer-size : 1073741824\nPika timeout\ntimeout : 60\nRequirepass\nrequirepass :\nMasterauth\nmasterauth :\nUserpass\nuserpass :\nUser Blacklist\nuserblacklist :\nDump Prefix\ndump-prefix :\ndaemonize  [yes | no]\ndaemonize : yes\ndaemonize : no\nslotmigrate  [yes | no]\nslotmigrate : no\nslotmigrate : yes\nDump Path\ndump-path : ./dump/\nExpire-dump-days\ndump-expire : 0\npidfile Path\npidfile : ./pika.pid\nMax Connection\nmaxclients : 20000\nthe per file size of sst to compact, defalut is 20M\ntarget-file-size-base : 20971520\nExpire-logs-days\nexpire-logs-days : 7\nExpire-logs-nums\nexpire-logs-nums : 10\nRoot-connection-num\nroot-connection-num : 10\nSlowlog-log-slower-than\nslowlog-log-slower-than : 10000\nslave-read-only(yes/no, 1/0)\nslave-read-only : true\nPika db sync path\ndb-sync-path : ./dbsync/\ndb sync speed(MB) max is set to 125MB, min is set to 0, and if below 0 or above 125, the value will be adjust to 125\ndb-sync-speed : 125\nThe slave priority\nslave-priority : 100\nnetwork interface\nnetwork-interface : eth1\nreplication\nslaveof : master-ip:master-port\nslaveof : *\nCronTask, format: start-end/ratio, like 02-04/60, pika will check to schedule compaction between 2 to 4 o'clock everyday\nif the freesize/disksize > 60%. NOTICE:if compact-interval is set, compact-cron will be mask and disable.\ncompact-cron :\nCompact-interval, format: interval/ratio, like 6/60, pika will check to schedule compaction every 6 hours,\nif the freesize/disksize > 60%. NOTICE:compact-interval is prior than compact-cron;\ncompact-interval :\nserver-id for hub\nserver-id : 1\nThe peer-master config\ndouble-master-ip :\ndouble-master-port :\ndouble-master-server-id :\n\nCritical Settings\n\nbinlog file size: default is 100M,  limited in [1K, 2G]\nbinlog-file-size : 104857600\nCompression\ncompression : snappy\nmax-background-flushes: default is 1, limited in [1, 4]\nmax-background-flushes : 1\nmax-background-compactions: default is 2, limited in [1, 8]\nmax-background-compactions : 2\nmax-cache-files default is 5000\nmax-cache-files : 5000\nmax_bytes_for_level_multiplier: default is 10, you can change it to 5\nmax-bytes-for-level-multiplier : 10\n```. \u53ef\u4ee5\u91cd\u542f\u7684\u3002\u4e3b\u7684\u8282\u70b9\u91cd\u542f\u4e86\u670d\u52a1\uff0c\u8fd8\u662f\u4e00\u6837\u3002\u91cd\u542f\u673a\u5668\u4e5f\u8fd8\u662f\u4e00\u6837. ",
    "suclnchoi": "1  redis-py\n`>>> len(r.keys('b*'))\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.5/dist-packages/redis/connection.py\", line 392, in read_response\n    raise socket.error(SERVER_CLOSED_CONNECTION_ERROR)\nOSError: Connection closed by server.\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.5/dist-packages/redis/client.py\", line 668, in execute_command\n    return self.parse_response(connection, command_name, **options)\n  File \"/usr/local/lib/python3.5/dist-packages/redis/client.py\", line 680, in parse_response\n    response = connection.read_response()\n  File \"/usr/local/lib/python3.5/dist-packages/redis/connection.py\", line 624, in read_response\n    response = self._parser.read_response()\n  File \"/usr/local/lib/python3.5/dist-packages/redis/connection.py\", line 403, in read_response\n    (e.args,))\nredis.exceptions.ConnectionError: Error while reading from socket: ('Connection closed by server.',)\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.5/dist-packages/redis/connection.py\", line 392, in read_response\n    raise socket.error(SERVER_CLOSED_CONNECTION_ERROR)\nOSError: Connection closed by server.\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"\", line 1, in \n  File \"/usr/local/lib/python3.5/dist-packages/redis/client.py\", line 1032, in keys\n    return self.execute_command('KEYS', pattern)\n  File \"/usr/local/lib/python3.5/dist-packages/redis/client.py\", line 674, in execute_command\n    return self.parse_response(connection, command_name, **options)\n  File \"/usr/local/lib/python3.5/dist-packages/redis/client.py\", line 680, in parse_response\n    response = connection.read_response()\n  File \"/usr/local/lib/python3.5/dist-packages/redis/connection.py\", line 624, in read_response\n    response = self._parser.read_response()\n  File \"/usr/local/lib/python3.5/dist-packages/redis/connection.py\", line 403, in read_response\n    (e.args,))\nredis.exceptions.ConnectionError: Error while reading from socket: ('Connection closed by server.',)\n\n\n\n`\n2  redis-cli monitor\n\n\n\n127.0.0.1:9221> monitor\nOK\n1523981551.558675 [192.168.138.205:34856] \"KEYS\" \"b*\"\n3  pika log\nI0418 00:10:32.265847 25851 pika_server.cc:232] host: 192.168.138.205 port: 9221\nI0418 00:10:32.265877 25851 pika_server.cc:67] Prepare DB...\nI0418 00:10:35.883287 25851 pika_server.cc:70] DB Success\nI0418 00:10:35.883335 25851 pika_server.cc:85] Worker queue limit is 20100\nI0418 00:10:35.883862 25851 pika_binlog.cc:117] Binlog: Find the exist file.\nI0418 00:10:35.883922 25851 pika_server.cc:107] double recv info: filenum 0 offset 0\nI0418 00:10:35.884230 25851 pika_server.cc:321] Pika Server going to start\nE0418 00:32:11.387550 26256 pika_client_conn.cc:251] command: \"KEYS\" \"b*\", start_time(s): 1523981551, duration(us): 1179787096\n. ",
    "simpson9527": "\u73b0\u5728\u6d4b\u8bd5\u7684\u7ed3\u679c\u662f\uff1a\n**slave\u7aef\u7684\u914d\u7f6e\n\u914d\u7f6e\u6587\u4ef6\u4e2drequirepass\u3001masterauth\u3001userpass\u5747\u6709\u914d\u7f6e\n\n\u4f46\u662f\u5728\u547d\u4ee4\u884c\u4e2d\u770b\u5230\u7684requirepass\u3001masterauth\u90fd\u662f\u7a7a\u7684\n\n\u4e3b\u4ece\u4e5f\u8fde\u4e0d\u4e0a\n\n**master\u7aef\u7684\u914d\u7f6e\n\u914d\u7f6e\u6587\u4ef6\u4e2drequirepass\u3001masterauth\u3001userpass\u5747\u6709\u914d\u7f6e\n\n\u5728\u547d\u4ee4\u884c\u4e2d\u770b\u5230\u7684requirepass\u3001masterauth\u90fd\u662f\u7a7a\u7684\n\n\u4e3b\u4ece\u590d\u5236\u72b6\u6001\u9519\u8bef\n\n. \u521a\u521a\u6d4b\u8bd5\u4e86\uff0c\u9ed1\u540d\u5355\u5168\u90e8\u66ff\u6362\u6210\u5c0f\u5199\uff0c\u5728\u901a\u8fc7\u5bc6\u7801\u8ba4\u8bc1\u4e4b\u540e\uff0c\u4ecd\u7136\u53ef\u4ee5\u6267\u884c\u9ed1\u540d\u5355\u4e2d\u7684\u5371\u9669\u547d\u4ee4. \u4f46\u662frequirepass\u53ea\u6709\u5728userblacklist\u53c2\u6570\u7684\u5185\u5bb9\u90fd\u914d\u7f6e\u6210\u5c0f\u5199\u4e4b\u540e\uff0c\u624d\u80fd\u751f\u6548\u3002\u50cf\u4f60\u6240\u8bf4\u7684\uff0c\u5982\u679c\u4f7f\u7528requirepass\u767b\u5f55\uff0cuserblacklist\u5c31\u65e0\u6548\u4e86\u3002\u90a3\u4e48\u8fd9\u4e2a\u5730\u65b9\u5c31\u67091\u4e2a\u95ee\u9898\uff1apika\u5982\u4f55\u5728\u589e\u52a0\u5bc6\u7801\u8ba4\u8bc1\u7684\u57fa\u7840\u4e0a\uff0c\u5bf9\u9ad8\u5371\u547d\u4ee4\u505a\u5c4f\u853d\u64cd\u4f5c\u3002\u6bd4\u5982\u50cfredis\u90a3\u6837\uff0c\u5728\u63d0\u4f9b\u5bc6\u7801\u8ba4\u8bc1\u7684\u57fa\u7840\u4e0a\uff0c\u63d0\u4f9b\u5bf9\u9ad8\u5371\u547d\u4ee4\u7684rename\u529f\u80fd\u3002\u56e0\u4e3a\u5373\u4f7f\u662f\u6709\u5bc6\u7801\u8ba4\u8bc1\uff0c\u4f46\u662f\u4e00\u65e6\u5bc6\u7801\u88ab\u7834\u8bd1\uff0c\u5c31\u53ef\u4ee5\u6267\u884c\u9664shutdown\u4ee5\u4e3a\u7684\u6240\u6709\u64cd\u4f5c\u4e86. 1\u3001\u8fd9\u91cc\u987a\u4fbf\u95ee\u4e0b\uff0cpika-linux-x86_64-v2.3.3.tar\uff0c\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u5305\u662f\u53ef\u4ee5\u76f4\u63a5\u89e3\u538b\u5230\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u7684\u5427\uff1f\n2\u3001\u521a\u624d\u53c8\u505a\u4e86\u4e00\u4e2a\u6d4b\u8bd5\uff0c\u5728\u4e3b\u4ece\u90fd\u53ea\u914d\u7f6euserpass\u7684\u60c5\u51b5\u4e0b\uff0c\u590d\u5236\u65e0\u6cd5\u5efa\u7acb\uff0c\u901a\u8fc7127.0.0.1\u767b\u5f55\u65e0\u6cd5shutdown\u3002\u5728\u914d\u7f6erequirepass\u548cmasterauth\u7684\u60c5\u51b5\u4e0b\uff0c\u590d\u5236\u6b63\u5e38\uff0c\u4f46\u662f\u901a\u8fc7IP\u8fde\u63a5pika\u7136\u540e\u8ba4\u8bc1\u5bc6\u7801\u53ef\u4ee5\u76f4\u63a5flushall\u3002\u540c\u65f6\u914d\u7f6erequirepass\u548cmasterauth\u4ee5\u53causerpass\uff0cuserpass\u7684\u503c\u5728\u542f\u52a8\u65f6\u770b\u4e0d\u5230\uff0c\u901a\u8fc7IP\u767b\u5f55\u7684\u5ba2\u6237\u7aef\u4ecd\u7136\u662f\u4f7f\u7528requirepass\u505a\u8ba4\u8bc1\u3002\u8fd9\u6837\u7684\u8bdd\uff0cPika\u662f\u4e0d\u662f\u53ea\u80fd\u9009\u62e9\u5728\u5bc6\u7801\u5c42\u505a\u5b89\u5168\u9632\u62a4\u6216\u8005\u5728\u547d\u4ee4\u5c42\u505a\u5c4f\u853d\u64cd\u4f5c\uff08\u901a\u8fc7\u8bbe\u7f6euserpass\u548cuserblacklist\uff0c\u672c\u5730\u767b\u5f55\u7684\u90fd\u65e0\u6cd5\u6267\u884cshutdown\u7b49\u64cd\u4f5c\uff09\uff0c\u800c\u65e0\u6cd5\u505a\u5bc6\u7801\u548c\u9ad8\u5371\u547d\u4ee4\u7684\u53cc\u5c42\u9632\u62a4\u3002\u6211\u7684\u9700\u6c42\u662f\u7ed9\u5f00\u53d1\u666e\u901a\u6743\u9650\uff0c\u5e76\u5c4f\u853d\u5371\u9669\u547d\u4ee4\uff0cDBA\u4fdd\u7559\u6700\u9ad8\u6743\u9650\uff0c\u53ef\u4ee5\u6267\u884c\u5371\u9669\u547d\u4ee4\u3002. ",
    "oldcai": "\u8003\u8651\u7684\u600e\u4e48\u6837\uff0c\u6253\u7b97\u652f\u6301\u5417\ud83d\ude02. ",
    "yihaoDeng": "\u4ece\u8282\u70b9\u542f\u52a8\uff0c \u5f00\u59cb\u5168\u540c\u6b65\uff0c\u5982\u679c\u5728\u5168\u540c\u6b65\u6ca1\u6709\u505a\u5b8c\u4e4b\u524d\uff0c\u5c31\u6740\u6389pika\u8fdb\u7a0b\uff0c\u4f1a\u5bfc\u81f4\u4ece\u8282\u70b9\u7684Rsync \u670d\u52a1\u4e00\u76f4\u8fd8\u5b58\u5728\uff0c\u9020\u6210\u8d44\u6e90\u6cc4\u6f0f\uff0c \u5efa\u8bae\u5728\u5f00\u59cb/\u5173\u95edRsync \u7684\u65f6\u5019\u8bbe\u7f6e\u6807\u8bb0\uff0c \u5728\u9000\u51fapika\u8fdb\u7a0b\u7684\u65f6\u5019\u68c0\u67e5\u8be5\u6807\u8bb0\uff0c\u5982\u679cRsync \u5f00\u542f\u7740\uff0c\u5c31\u5173\u95ed\u4e00\u4e0b\u3002  . @Axlgrep  \u6700\u8fd1\u4e00\u5468\u5728\u4e0a\u9762github \u62c9\u7684\u6e90\u7801..... ",
    "LoveTommy": "txt_to_pika\u5bfc\u5165\u5185\u90e8\u505a\u4e86\u54ea\u4e9b\u64cd\u4f5c\uff0c\u6570\u636e\u540c\u6b65\u5230\u78c1\u76d8\u4e86\u5417. \u6211\u7528txt_to_pika\u5bfc\u516578121\u6761\u8bb0\u5f55\u65f6\u95f4\u662f17S\uff0c\u5bfc\u51651\u53434\u767e\u4e07\u6761\u65f6\u95f4\u5c31\u523018min\u4e86\uff0c\u5dee\u8ddd\u6709\u70b9\u5927. ",
    "lgbo-dev": "comapct\u7684\u76f8\u5173\u914d\u7f6e\u5982\u4e0b\uff0c\u90fd\u6ce8\u91ca\u6389\u4e86\n# CronTask, format: start-end/ratio, like 02-04/60, pika will check to schedule compaction between 2 to 4 o'clock everyday\n#                   if the freesize/disksize > 60%. NOTICE:if compact-interval is set, compact-cron will be mask and disable.\n#compact-cron :\n# Compact-interval, format: interval/ratio, like 6/60, pika will check to schedule compaction every 6 hours,\n#                           if the freesize/disksize > 60%. NOTICE:compact-interval is prior than compact-cron;\n#compact-interval :. \u7f51\u5361\u6d41\u91cf\u5728io\u9ad8\u671f\u95f4\uff0c\u5927\u6982\u572840MB/s. ",
    "llfioenig": "\u90a3\u5c31\u662f\u8bf4\u6211\u5427port \u4fee\u6539\u4e0b\uff0c\u8fd9\u4e9b\u7aef\u53e3\u4e5f\u4f1a\u76f8\u5e94\u6539\u53d8\u3002\u90a3\u6211\u518d\u8bd5\u8bd5\u3002. \u5df2\u89e3\u51b3. \u597d\u7684\uff0c\u8c22\u8c22. ",
    "yanglfyangl1978": "\u597d\u7684\uff0c\u8c22\u8c22\uff0c\u6709\u5fae\u4fe1\u4ea4\u6d41\u7fa4\u5417\uff1f. \u6211\u5728\u4f7f\u7528\u7684\u65f6\u5019\u78b0\u5230\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\u65e5\u5fd7\u4e2d\u62a5\u4e86Max connection reach\nW0706 13:49:38.323585 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\nW0706 13:49:38.323662 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\nW0706 13:49:38.323755 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\nW0706 13:49:38.323896 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\nW0706 13:49:38.324008 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\nW0706 13:49:38.324189 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\nW0706 13:49:38.324286 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\nW0706 13:49:38.324365 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\nW0706 13:49:38.324461 10684 pika_dispatch_thread.cc:65] Max connections reach, Deny new comming: 192.168.1.219\n[root@localhost log]# \n\u6211\u4eec\u670d\u52a1\u5668\u7684\u914d\u7f6e\uff1a\n[root@localhost conf]# ulimit -a\ncore file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 61261\nmax locked memory       (kbytes, -l) 64\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 102400\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 102400\nvirtual memory          (kbytes, -v) unlimited\nfile locks                      (-x) unlimited\nPika\u7684\u914d\u7f6e\u662f\uff1a\ndump-expire : 0\npidfile Path\npidfile : ./pika.pid\nMax Connection\nmaxclients : 20000\n\u76ee\u524d\u670d\u52a1\u5668\u4e0a\u6ca1\u5176\u5b83\u7684\u670d\u52a1\uff0c\u91cd\u542fPika\u540e\u4e00\u5207\u6b63\u5e38\u3002\n\u8bf7\u95ee\u4e4b\u524d\u78b0\u5230\u8fc7\u7c7b\u4f3c\u95ee\u9898\u5417\uff1f\u6709\u4ec0\u4e48\u7ebf\u7d22\u5417\uff1f. \u6211\u56de\u6765\u518d\u770b\u770b\u5427\uff0c\u4e4b\u524d\u770bclient\u5e94\u8be5\u662f6000\u591a\uff0c\u6211\u8bbe\u7f6e\u7684maxclients : 20000\uff0c\u6240\u4ee5\u6709\u70b9\u5947\u602a\u3002. ",
    "zohead": "\u6211\u7528 redis desktop manager\uff0c\u80fd\u8fde\u63a5\u670d\u52a1\u5668\uff0c\u4f46\u9009 db \u65f6\u4f1a\u62a5\u9519\uff1a\nscan commands not supported by redis-server\n\u7528 java RedisClient \u6dfb\u52a0\u670d\u52a1\u5668\uff0c\u4e5f\u4f1a\u62a5\u9519\uff1a\njava.lang.NullPointerException\n        at com.cxy.redisclient.integration.JedisCommand.getRedisVersion(JedisCommand.java:108)\n        at com.cxy.redisclient.integration.JedisCommand.runCommand(JedisCommand.java:44)\n        at com.cxy.redisclient.integration.JedisCommand.execute(JedisCommand.java:34). \u6362\u56de\u8001\u7248\u672c\uff080.8\uff09\u7684 redis desktop manager \u5c31\u80fd\u770b\u5230\u6570\u636e\u4e86\uff0c\n0.9.xx \u7248\u672c\u5c31\u662f\u9009\u62e9 db \u5c31\u62a5\u9519. redis desktop manager \u70b9\u51fb db \u65f6\u53ea\u80fd\u770b\u5230\u8fd9\u4e2a\uff1a\n2018-08-13 10:35:50 : Connection: pika > [runCommand] select 16\n2018-08-13 10:35:50 : Connection: pika > Response received : -ERR invalid DB index\n\u7136\u540e\u62a5 scan commands not supported by redis-server. ",
    "yifeikong": "\u8bf7\u95ee\u6709\u652f\u6301\u7684\u8ba1\u5212\u5417\uff1f. ",
    "chenbobaoge": "\u5c1d\u8bd5\u5220\u9664./db/strings/LOCK\n\u4f46\u4ecd\u7136\u542f\u52a8\u4f1a\u62a5\u540c\u6837\u7684\u9519\u8bef. \u662f\u8fd9\u4e2a\u539f\u56e0  \u8c22\u8c22. ",
    "git-hulk": "@baotiao fixed and rebased, thanks for your review.. @Axlgrep \u8fd9\u4e2a\u662f\u81ea\u52a8 format\u7684\uff0c\u6211\u8fd8\u4ee5\u4e3a\u662f struct \u6545\u610f\u4fdd\u7559\u7684. \u55ef\uff0c\u770b\u5230\u4e86\uff0c\u4e0d\u89c9\u5f97\u62c6\u5206\u5f00\u633a\u597d\u7684\u4e48\uff0cclient list \u5c31\u5e94\u8be5\u5c31\u53ea\u8fd4\u56de\u5217\u8868\u5c31\u597d\u4e86\uff0c\u901a\u8fc7\u53c2\u6570\u6765\u63a7\u5236\u662f\u5426\u83b7\u53d6\u5217\u8868\u6709\u70b9\u53cd\u76f4\u89c9\uff1f. \u6211\u4e0d\u662f\u8bf4\u8fd4\u56de\u6570\u91cf\u6709\u95ee\u9898\uff0c\u6211\u7684\u610f\u601d\u662f\u901a\u8fc7\u63a7\u5236 client list \u662f\u5426\u4e3a nil \u6765\u63a7\u5236\u662f\u5426\u62f7\u8d1d\u6765\u5b9e\u73b0 client num \u7684\u529f\u80fd\u4e0d\u89c9\u5f97\u5947\u602a\uff1f \u5982\u679c\u4f60\u4e0d\u662f\u8fd9\u4e2a\u4ee3\u7801\u7684\u5f00\u53d1\uff0c\u4f60\u7b2c\u4e00\u53cd\u5e94\u4f1a\u60f3\u5230\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 client list \u6765\u5b9e\u73b0 client num \u7684\u529f\u80fd\uff1f. Those variables were moved while declaring the variables after the goto wasn't allowed, not the c's code style. use goto to clean up the resources and nested loops shouldn't be harmful?? while it would make the code more clean and tidy. goto is not the evil when we using it in right replace.. ",
    "unisqu": "where is the exchange group?. I just want to say it's a great piece of software and hope to see this implemented when possible. Will wait for it. Thanks.. i saw this, i guess they are related. thx. ",
    "pengzhuoxu": "\u4ece\u53cc\u4e3b\u6a21\u5f0f\u6539\u4e3a\u4e3b\u4ece\u6a21\u5f0f\u540e\uff0cslaveof \u547d\u4ee4\u8fd4\u56de\u503c\u4e3a \u201cOK\u201d\uff0c\u4f46\u6570\u636e\u4f9d\u7136\u672a\u540c\u6b65\u8fc7\u6765. \u6587\u6863\u8bf4\u5168\u540c\u6b65\u4e0d\u4f9d\u8d56 binlog\uff0c\u662f\u8fd9\u6837\u7684\u5417\uff1f. @Leviathan1995 \n\nslaveof ip port\n\n\u7528\u7684 telnet . @Leviathan1995 \u53cc\u4e3b\u6a21\u5f0f\u4e0b\u80fd\u7528\u5417\uff1f. @Leviathan1995 \u8fd9\u5c31\u56de\u5230\u6700\u521d\u7684\u72b6\u51b5\u4e86\n\n-ERR Server is not in correct state for slaveof\n\nReplication(DOUBLEMASTER)\nrole:double_master\nmaster_host:10.110.1.91\nmaster_port:9221\nmaster_link_status:up\nslave_read_only:0\nrepl_state: connected\nconnected_slaves:1\nslave0:ip=10.110.1.91,port=9221,state=online,sid=100,lag=0\nDoubleMaster(DOUBLEMASTER)\nrole:double_master\nthe peer-master host:10.110.1.91\nthe peer-master port:9221\nthe peer-master server_id:100\ndouble_master_mode: True\nrepl_state: 3\ndouble_master_recv_info: filenum 0 offset 46376694. \u6587\u6863\u91cc\u5199\u7684\u662f\u6837\u4f8b\u662f\uff1a\n  slaveof 192.168.10.1\n\u4e0d\u5e26\u7aef\u53e3\u53f7\u4f1a\u76f4\u63a5\u62a5\u9519\uff1a\n-ERR wrong number of arguments for 'slaveof' command\n. \u6211\u6700\u540e\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u628a\u53cc\u4e3b\u4e2d\u9700\u8981\u540c\u6b65\u7684db\u548clog\u5168\u90e8\u6e05\u7a7a\uff0c\u518d\u6267\u884c\uff1a\nslaveof ip port. ",
    "527593036": "3.0.2\u4e3b\u4ece\u6a21\u5f0f\u4e0b(\u65b0\u5efa)\uff0c\u4e5f\u51fa\u73b0\u6570\u636e\u4e0d\u540c\u6b65\u60c5\u51b5, \u7248\u672c\u4fe1\u606f\u5982\u4e0b\uff0c3.0.0\u662f\u53ef\u4ee5\u7684\u3002\n./pika -h\nPika module 3.0.2\nusage: pika [-hv] [-c conf/file]\n        -h               -- show this help\n        -c conf/file     -- config file \n  example: ./output/bin/pika -c ./conf/pika.conf\n\u914d\u7f6e\u4fe1\u606f\nslaveof : master-ip:master-port\nslaveof : 10.99.1.3:6375\nserver-id for hub\nserver-id : 4\n\u4e3b\u4fe1\u606f\uff1a\n127.0.0.1:6375> info data\nData\ndb_size:27290661\ndb_size_human:26M\ncompression:snappy\nused_memory:27259016\nused_memory_human:25M\ndb_memtable_usage:27259016\ndb_tablereader_usage:0\n127.0.0.1:6375> info replication\nReplication(MASTER)\nrole:master\nconnected_slaves:1\nslave0:ip=10.99.1.4,port=6375,state=online,sid=3,lag=0\n\u4ece\u4fe1\u606f\n127.0.0.1:6375> info data\nData\ndb_size:291085\ndb_size_human:0M\ncompression:snappy\nused_memory:8000\nused_memory_human:0M\ndb_memtable_usage:8000\ndb_tablereader_usage:0\n127.0.0.1:6375> info replication\nReplication(SLAVE)\nrole:slave\nmaster_host:10.99.1.3\nmaster_port:6375\nmaster_link_status:up\nslave_priority:100\nslave_read_only:1\nrepl_state: connected. ",
    "iseriser": "I am using 3.0.2 binary release. Both instances running on the same machine connected over loopback interface.\nOn instance1 I do \"HSET key1 field val\" (size of value is about 1MB) and \"SADD key2 member\" right after (next line in PHP code). On instance2 \"SPOP key2\" returns \"member\" which is correct, but \"key1 field\" is not set.\n. ",
    "littlechaser": "\n\u7528\u7684Pika\u662f\u4ec0\u4e48\u7248\u672c\uff0c\u7528\u7684\u65f6\u5019Pika\u5f00\u4e86\u51e0\u4e2a\u7ebf\u7a0b\uff1f\n\n2.3.3\u7248\u672c\uff0c\u5355\u7ebf\u7a0b. > \u6539\u6210\u591a\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u4e86\uff0c rpush\u5e76\u4e0d\u662f\u5931\u8d25\u4e86\uff0c\u800c\u662f\u9700\u8981\u7b49\u5230\u524d\u9762\u90a3\u4e2akeys\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\u624d\u8f6e\u5230\u5b83\u6267\u884c\n\u641c\u560e\uff0c\u7ed3\u6848\u4e86\u3002. ",
    "purplegrape": "\u95ee\u9898\u662fsubmodule \u4e0d\u5b8c\u6574\uff0c\u989d\u5916\u8fd8\u4f9d\u8d56gflags\u3001snappy\uff0c\u4ee5\u53cagperftools\u7684\u7279\u5b9a\u7248\u672c. pika has other third party deps,  like glog, gflag,gperftools, which are not include in the git\nit's not possible to build pika alone\nwhat's worse, pika deps on speical version of the deps, they have to release official binary everytime\nI strongly suggest add deps as  git submoule asap. ",
    "WinterChen": "3.0\u7248\u7684\uff0c\u6bcf\u6b21\u6267\u884czrevrange\u5f88\u6162\uff0c\u4f46\u662f\u6267\u884czrange\u8fd8\u662f\u6bd4\u8f83\u5feb\u7684\uff0c\u4e0d\u8fc7\u6211\u7684zset\u6709\u70b9\u5927\uff0c5\u4ebf\u4e2a\u5143\u7d20. ",
    "Arthur-Shi": "\u5982\u679c\u6211\u7528\u4e8c\u8fdb\u5236\u7684\u5305\uff0c\u6211\u4e0b\u8f7d\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u505a\u4ec0\u4e48\u5417\uff1f \n\u4e3a\u4ec0\u4e48\u6211\u8fd0\u884c\nconnection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))\n\u4f1a\u62a5\u9519\nAttributeError: module 'pika' has no attribute 'BlockingConnection'\n\u4e0b\u8f7d\u89e3\u538b\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u4ec0\u4e48\u64cd\u4f5c\u5c3c\uff1fmake\uff1f\n. \u6211\u7684glog\u5df2\u7ecf\u5b89\u88c5\u6210\u529f\u4e86\nll /usr/local/lib\ntotal 2980\ndrwxr-xr-x  5 root root     4096 12\u6708 12 21:14 ./\ndrwxr-xr-x 12 root root     4096 11\u6708  6 15:28 ../\n-rw-r--r--  1 root root  2107430 12\u6708 12 21:14 libglog.a\n-rwxr-xr-x  1 root root      943 12\u6708 12 21:14 libglog.la\nlrwxrwxrwx  1 root root       16 12\u6708 12 21:14 libglog.so -> libglog.so.0.0.0\nlrwxrwxrwx  1 root root       16 12\u6708 12 21:14 libglog.so.0 -> libglog.so.0.0.0\n-rwxr-xr-x  1 root root   916488 12\u6708 12 21:14 libglog.so.0.0.0\ndrwxr-xr-x  2 root root     4096 12\u6708 12 21:14 pkgconfig/\ndrwxrwsr-x  4 root staff    4096 7\u6708  31 08:38 python2.7/\ndrwxrwsr-x  3 root staff    4096 7\u6708  31 08:31 python3.5/\n\u4f46\u662f\u6211\u8fd0\u884c:\n~/pika$ ./output/bin/pika -c ./conf/pika.conf\n./output/bin/pika: error while loading shared libraries: libglog.so.0: cannot open shared object file: No such file or directory\n\u600e\u4e48\u529e\u5462\n. max@max:~/pika$ ldd output/bin/pika\n    linux-vdso.so.1 =>  (0x00007ffda57f0000)\n    libglog.so.0 => /usr/local/lib/libglog.so.0 (0x00007f517d918000)\n    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f517d6fb000)\n    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f517d4f3000)\n    libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f517d2d9000)\n    libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f517cf57000)\n    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f517cc4e000)\n    libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f517ca38000)\n    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f517c66e000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f517db48000)\n\u6211\u91cd\u65b0\u7f16\u8bd1\u7684pika \u51fa\u73b0\u4e86\u8fd9\u4e2a\u95ee\u9898\uff1a\n./output/bin/pika -c ./conf/pika.conf\npath : ./conf/pika.conf\n-----------Pika server 3.0.5 ----------\n-----------Pika config list----------\n 1 port 9221\n 2 thread-num 1\n 3 sync-thread-num 6\n 4 sync-buffer-size 10\n 5 log-path ./log/\n 6 loglevel info\n 7 db-path ./db/\n 8 write-buffer-size 268435456\n 9 timeout 60\n10 requirepass \n11 masterauth \n12 userpass \n13 userblacklist \n14 dump-prefix \n15 dump-path ./dump/\n16 dump-expire 0\n17 pidfile ./pika.pid\n18 maxclients 20000\n19 target-file-size-base 20971520\n20 expire-logs-days 7\n21 expire-logs-nums 10\n22 root-connection-num 2\n23 slowlog-write-errorlog no\n24 slowlog-log-slower-than 10000\n25 slowlog-max-len 128\n26 slave-read-only yes\n27 db-sync-path ./dbsync/\n28 db-sync-speed -1\n29 slave-priority 100\n30 server-id 1\n31 double-master-ip \n32 double-master-port \n33 double-master-server-id \n34 write-binlog yes\n35 binlog-file-size 104857600\n36 identify-binlog-type new\n37 max-cache-statistic-keys 0\n38 small-compaction-threshold 5000\n39 compression snappy\n40 max-background-flushes 1\n41 max-background-compactions 2\n42 max-cache-files 5000\n43 max-bytes-for-level-multiplier 10\n-----------Pika config end----------\nWARNING: Logging before InitGoogleLogging() is written to STDERR\nW1214 16:28:43.600029 21219 pika.cc:167] your 'limit -n ' of 1024 is not enough for Redis to start. pika have successfully reconfig it to 25000\nI1214 16:28:43.600251 21219 pika.cc:184] Server at: ./conf/pika.conf\nI1214 16:28:43.600639 21219 pika_server.cc:192] Using Networker Interface: enp4s0\nI1214 16:28:43.600832 21219 pika_server.cc:235] host: 10.211.203.76 port: 9221\nI1214 16:28:43.600881 21219 pika_server.cc:68] Prepare Blackwidow DB...\n[FATAL] open kv db failed, Invalid argument: Compression type Snappy is not linked with the binary.\n\u611f\u8c22\u5927\u4f6c\u7684\u5e2e\u52a9\uff0c\u6211\u770b\u4e86issue\u8bf4\u662fsnappy\u5b89\u88c5\u7684\u95ee\u9898\uff0c\u53ef\u662f\u6211\u662fgithub\u4e0a\u62c9\u7684snappy\u5b89\u88c5\u7684\u554a\u3002\n\u6211make\u5b8c\u4e5fmake install\u4e86 \u6240\u4ee5\u6211\u5c06snappy.a \u8fd9\u4e2a\u6587\u4ef6 \u590d\u5236\u5728\u4e86 /usr/local/lib \u6216\u8005 /lib/x86_64-linux-gnu/\n\u6211\u4e0d\u77e5\u9053\u518d\u600e\u4e48link\u4e86\uff0c\u5728 /usr/local/lib/\u91cc\u7684.so\u6587\u4ef6 \u6211\u4e5f\u590d\u5236\u8fc7\u4e86\u3002 \u6211\u6700\u540e\u4e5f\u91cd\u65b0\u7f16\u8bd1\u4e86\uff0c\u8fd8\u662f\u4e0d\u884c\u3002\n\u6c42\u52a9\uff01\uff01\uff01\n. \u6211\u8bd5\u8fc7\u4e86 \u8fd8\u4e0d\u884c  \u8c22\u8c22 \u6211\u52a0\u7fa4\u95ee . ",
    "xiewenwei": "\u6211\u4e5f\u9047\u5230\u540c\u6837\u7684\u95ee\u9898\uff0c\u62a5\u9519\u5982\u4e0b\nar: \u6b63\u5728\u521b\u5efa lib/libblackwidow.a\nmake[1]: \u79bb\u5f00\u76ee\u5f55\u201c/home/bhuser/pika/third/blackwidow\u201d\n  GEN      build_version.cc\n  CC       build_version.o\n  CC       pika_set.o\nIn file included from ./include/pika_binlog_transverter.h:11:0,\n                 from ./include/pika_command.h:17,\n                 from ./include/pika_set.h:8,\n                 from /home/bhuser/pika/src/pika_set.cc:7:\n/usr/include/glog/logging.h:85:27: \u81f4\u547d\u9519\u8bef\uff1agflags/gflags.h\uff1a\u6ca1\u6709\u90a3\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\n #include <gflags/gflags.h>\n                           ^\n\u7f16\u8bd1\u4e2d\u65ad\u3002\nmake: *** [/home/bhuser/pika/src/pika_set.o] \u9519\u8bef 1\n\u7136\u540e\u5b89\u88c5  gflags-devel \u4e4b\u540e\uff0c\u518d\u6b21\u7f16\u8bd1\u5c31\u597d\u4e86\u3002\n. ",
    "haxianhe": "\n\u53ef\u662f\uff0c\u6211\u5df2\u7ecf\u5b89\u88c5gflags\u4e86...\u8fd8\u662f\u627e\u4e0d\u5230\u6587\u4ef6. ",
    "xcl3721": "\u6536\u5230\uff0c\u975e\u5e38\u611f\u8c22. > \u6211\u518d\u8865\u5145\u4e00\u70b9\n\n20181201.log:E1201 12:49:35.914727 15149 pika_binlog_bgworker.cc:81] command:flushall, start_time(s): 1543639775, duration(us): 477792\n\u8fd9\u4e2a\u6162\u67e5\u8be2\u65e5\u5fd7\u6ca1\u6709\u5199\u6e90IP\n\u5982\u679c\u5199\u4e86\u6e90ip\uff0c\u6211\u5c31\u6709\u53ef\u80fd\u627e\u5230\u6267\u884c\u547d\u4ee4\u7684\u4eba\uff0c\u8ba9\u4ed6\u53bb\u627e\u9886\u5bfc\u8ba4\u9519\uff0c\u6211\u7684\u9505\u80fd\u51cf\u5c1130%\n\u5bf9\u6807redis\u91cc\u662f\u6709\u6e90ip\u5730\u5740\u7684\u3002\u3002\u3002\u3002\n\n@Hisoka-J \u6253\u6270\u4e00\u4e0b\u8fd9\u4e2a\u53ef\u5426\u4e5f\u505a\u4e2a\u8003\u8651\uff0c\u8f9b\u82e6\u4e86\uff01. \u975e\u5e38\u611f\u8c22\uff01. ",
    "mengjiajia088": "java.lang.ClassCastException: [B cannot be cast to java.util.List\n    at redis.clients.jedis.Connection.getRawObjectMultiBulkReply(Connection.java:276)\n    at redis.clients.jedis.JedisPubSub.process(JedisPubSub.java:123)\n    at redis.clients.jedis.JedisPubSub.proceed(JedisPubSub.java:117)\n    at redis.clients.jedis.Jedis.subscribe(Jedis.java:2779)\n    at com.epoint.core.utils.memory.RedisCacheUtil.subscribe(RedisCacheUtil.java:3252)\n    at com.epoint.basic.cache.redis.Subscriber.run(Subscriber.java:86)\n    at java.lang.Thread.run(Thread.java:745)\n\u5728\u4f7f\u7528pika\u8fde\u63a5\u8ba2\u9605\u65f6\u8c03\u7528\u76d1\u542cping\u5219\u62a5\u9519\u3002. \u76ae\u5361\u5185\u90e8\u5c01\u88c5\u4e86\u8ba2\u9605\u7684\u5b58\u6d3b\u68c0\u6d4b\u4e48\uff1f. ",
    "welliamcao": "@Axlgrep \u611f\u8c22\u56de\u590d\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u95f4\u63a5\u7684\u63a7\u5236\u5185\u5b58\u4f7f\u7528\u91cf\uff0c\u6211\u4e0d\u662f\u592a\u7406\u89e3\uff0c\u80fd\u7ed9\u4e2a\u5927\u6982\u8ba1\u7b97\u65b9\u5f0f\u5417\uff1f\u6211\u4e1a\u52a1\u573a\u666f\u662f\u5e0c\u671b\u80fd\u591f\u5728\u4e24\u53f0256GB\u7684\u673a\u5668\u4e0a\u90e8\u7f72\u5206\u522b\u90e8\u7f72\u4e24\u4e2aPika\uff0c\u4e24\u53f0\u670d\u52a1\u5668\u4e0a\u7684\u56db\u4e2aPika\u80fd\u591f\u4e92\u4e3a\u4e3b\u5907\uff0c\u5229\u7528Sentinel\u6765\u505a\u6545\u969c\u5207\u6362\uff0c\u5185\u5b58\u4f7f\u7528\u91cf\u4e0d\u8d85\u8fc7\u7269\u7406\u670d\u52a1\u5668\u5185\u5b58\u3002. \u8c22\u8c22. ",
    "g3ne": "\u4e0d\u540c\u533a\u57df\u6216\u673a\u623f\u7684\u4e24\u4e2a\u5185\u7f51\u5e76\u4e0d\u4e92\u901a\uff0c\uff08slaveof \u5185\u7f51ip\uff09\u4e0d\u80fd\u5f7b\u5e95\u89e3\u51b3\u95ee\u9898\u3002\n\u7ffb\u770bissues\uff0c\u53d1\u73b0\u6b64\u95ee\u9898\u548c #255 \u76f8\u4f3c\uff0c\u90fd\u56e0\u5185\u7f51ip\u5bfc\u81f4\u3002\n\u5f02\u5e38\u4ea7\u751f\u7684\u6d41\u7a0b\uff1atrysync\u6570\u636e\u5305\u63d0\u4ea4\u5185\u7f51ip\uff0cHeartbeat\u5fc3\u8df3\u5305\u63d0\u4ea4\u5916\u7f51ip\uff0c\u5bfc\u81f4\u89e6\u53d1 DeleteSlave(...) \u3002\n\u80fd\u5426\u8003\u8651\u4f7f\u7528slave\u6301\u4e45\u8fde\u63a5\u6765\u89e3\u51b3\u8fd9\u4e2a\u5185\u7f51\u95ee\u9898\uff1f\n\u8fd9\u6837\u7684\u8bdd\uff0cmaster\u5c31\u4e0d\u518d\u8ba4\u8bc1slave\u7684ip\uff0ctrysync\u5305\u4ec5\u8ba4\u8bc1requirepass\u5373\u53ef\u4fdd\u8bc1\u8fde\u63a5\u5b89\u5168\uff0c\nslave\u4e2d\u65ad\u91cd\u8fde\u65f6\u4ea6\u4f1a\u53d1\u9001\u6b64\u523b\u540c\u6b65\u7684\u72b6\u6001\uff0cmaster\u4e5f\u4e0d\u7528\u518d\u7ef4\u62a4\u5fc3\u8df3\u8d85\u65f6\u4fe1\u606f\uff0c\nmaster\u4e0d\u518d\u4e3b\u52a8\u8fde\u63a5slave\uff0c\u540c\u6b65\u65f6\u4e5f\u53ea\u9700\u904d\u5386\u5df2\u8fde\u63a5\u7684slave\u4f9d\u6b21\u53d1\u9001\u5373\u53ef\u3002\n. ",
    "wjunkang": "\u662f\u7528\u7684go\u7684\u5ba2\u6237\u7aef\uff1ahttps://github.com/juhanoi/radix. ",
    "jencoldeng": "\u73af\u5883\uff1apika 3.0.5\uff0cgcc 4.8\uff0cgcc\u662f\u81ea\u5df1\u7f16\u8bd1\u5b89\u88c5\u7684. > \u770b\u4e0a\u53bb\u662fRocksdb\u4e2dPosixRandomAccessFile\u6790\u6784\u7684\u65f6\u5019\u51fa\u73b0\u7684\u95ee\u9898\uff0c\u4f60\u8fd9\u4e2a\u95ee\u9898\u662f\u5076\u73b0\u8fd8\u662f\u5fc5\u73b0\uff1f\n1-\u5076\u5c14\u51fa\u73b0\uff1b\n2-\u6211\u4e5f\u6000\u7591\u548c\u7f16\u8bd1\u73af\u5883\u6709\u5173\uff0c\u4f46\u662f\u6ca1\u6cd5\u91cd\u73b0\uff0c\u4e5f\u4e0d\u77e5\u9053\u600e\u4e48\u67e5\uff0c\u6240\u4ee5\u5148\u628a\u95ee\u9898\u53d1\u51fa\u6765. \u6211\u8bd5\u8bd5\n\u5176\u5b9e\u6211\u8fd9\u4e2a\u4e5f\u662f\u9759\u6001\u6253\u5305\uff0c\u7ebf\u4e0a\u90e8\u7f72\u61d2\u5f97\u627e\u5e93\u3002. ",
    "gupta2007vaibhav": "127.0.0.1:9221> HLEN test1.20190219_155201\n(integer) 60023872\n127.0.0.1:9221> HLEN test2.20190216_083002\n(integer) 62658203\n127.0.0.1:9221> HLEN test3.20190219_215201\n(integer) 41451168\n127.0.0.1:9221> HLEN test4.20190219_075501\n(integer) 41451168\n. issue resolved. thanks.!. ",
    "tylershi": "v3.0.7\n. \u8fd9\u4e9b\u6570\u636e\u57fa\u672c\u90fd\u662f\u8981\u6c38\u4e45\u4fdd\u5b58\u7684\uff0c\u6240\u4ee5\u6ca1\u6709\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4. \u4e3b\u4ece\u540c\u6b65\u6570\u636e\u91cf\u4e0d\u4e00\u81f4\u7684\u95ee\u9898. \u662f\u7684\uff0c\u6570\u636e\u662f\u6628\u5929\u4e2d\u5348\u5bfc\u5165\u7684\uff0c\u4e0b\u5348\u5c31\u5df2\u7ecf\u5b8c\u6210\u5bfc\u5165\u4e86\uff0c\u671f\u95f4\u518d\u4e5f\u6ca1\u6709\u63d2\u5165\u8fc7\u6570\u636e. pika\u7248\u672c\u4e3a\u6700\u65b0\u7248\uff0cV3.0.7,\u6240\u6709\u6570\u636e\u90fd\u6ca1\u6709\u8bbe\u7f6ettl. \u60f3\u770b\u4e00\u4e9b\u5177\u4f53\u7684\u539f\u7406\u5b9e\u73b0\uff0c\u4f7f\u7528\u5c42\u9762\u90fd\u5df2\u7ecf\u719f\u6089\u4e86. \u662f\u7684. "
}