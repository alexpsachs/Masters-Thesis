{
    "mikejohnstn": "Great.\n. Observation: since the current app already has tabs as the root view, I suspect it could feel strange to add another layer of tabs inside the editor view (which is currently a modal).\nI know we're not doing it yet, so not a big concern. I only mention it because I've seen this idea a couple times. A more complete solution may need to change how the root view works, too.\n. For capturing new events, @sendhil can hook up @bummytime with Mixpanel stats.\n. Yeah, good to get some kind of size control into an iteration once the visual editor is out there. People on lower bandwidth connections ask about it in Helpshift.\n. If you'd like to further mitigate the risk, we could limit this to only users who create an account in the app. They probably have the fewest expectations.\n. ",
    "TooTallNate": "Those formatbar buttons seem a little small to me. Like smaller than a regular keyboard key.\n. nodeName is definitely always upper-case\n. ",
    "sendhil": "Looking nice.\n. @bummytime - let me know what data you want to capture and I'll help you get it done.\n. I think this busted because it didn't have travis.yml as I didn't realize https://github.com/wordpress-mobile/WordPress-iOS-Editor/pull/80 wasn't merged in.\n. Sizing too, we've gotten quite a few complaints via reviews about people wanting to adjust the size of their images.\n. Let me know if you need any particular help, but of those events:\n- New post starts is currently tracked via this event here - https://github.com/wordpress-mobile/WordPressCom-Analytics-iOS/blob/develop/WordPressCom-Analytics-iOS/WPAnalytics.h#L13\n- Saves are tracked here - https://github.com/wordpress-mobile/WordPressCom-Analytics-iOS/blob/develop/WordPressCom-Analytics-iOS/WPAnalytics.h#L16\n- Published posts here - https://github.com/wordpress-mobile/WordPressCom-Analytics-iOS/blob/develop/WordPressCom-Analytics-iOS/WPAnalytics.h#L15\n. @diegoreymendez - did you mean to submit this against release/4.4?\n. Woops, I thought this was the main repo.\n. :shipit:\n. Might want to reproduce the crash here as not everyone has the crashlytics credentials.\n. As a side note - I've seen a few reviews complaining about this :.\n. I think this is worthwhile as there's a good chance we'll drop iOS 7 support. \n. Looks good.\n. @bummytime - I'll ask.\n. :boom:\n. Looks good to me.\n. What's a smaple project ;)?\n. Closing as a result of #3702\n. Are you using Cocoapods 0.38? At the present moment we're having some issues with it and instead we use 0.37.2.\n. See my comment over at https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/709#issuecomment-136606339\n. Closing as per https://github.com/wordpress-mobile/WordPress-iOS/issues/4519 and https://github.com/wordpress-mobile/MediaPicker-iOS/issues/91\n. Technically wouldn't you want to use NSParameterAssert?\n. Do we need the '^void()' here?\n. The readwrite seems redundant?\n. @aerych  can chime in more here, but we're trying to drop the use of [UIColor colorWithHexString] as we want to drop the dependency on DTCoreText. This is okay for this PR but perhaps make another issue that cleans out the use of this.\n. Formatting seems really odd here?\n. ",
    "bummytime": "Nice job @thianhlu. To @TooTallNate's point above, I am assuming the accessory toolbar buttons will be the same size as they are now:\n\nI'm not sure it the plus sign means \"image or video\" in my mind, but having the ability to add an image while the keyboard is up is a win in my book.\nAre still thinking implementing tags in a similar way as Simplenote?\n. @coreh Re: the hide keyboard button, the accessory toolbar is the same on iPhone and iPad. On the iPhone, the hide keyboard button is missing on Apple's keyboard:\n\nDoesn't make it correct of course, we could easily remove that on an iPad. :-) In addition, we need to think about custom keyboards on iOS 8 as well!\n. I like the way Messages handles the keyboard as well \u2014 something to investigate me thinks. \nAs far as the custom keyboards go, I just meant that they may or may not have a hide keyboard button on them. So it might be difficult to simply remove that button from the accessory toolbar just because the user is on an iPad.\nMy understanding is that the custom keyboards are global, but I have not researched much on that yet either.\n. Just an update...still occurring on iOS9:\n\n. @thianhlu I am really not sure. We use the word \"Posts\" in the main blog menu and then \"New Post\" at the top of the screen when creating a new post...having a another \"Post\" in the upper right hand corner may be confusing (noun vs. verb).  \nWith all that said, if we go forward with what you proposed in #1 then I think it works well :-)\n. @thianhlu The inactive color and font for the nav bar buttons are set app-wide.  We currently have an inactive color of 0.667 white and the button font is Open sans regular 16.0 (Navbar title is open Sans bold 16.0). Is this a change to be made globally?\n/cc @drw158 \n. @thianhlu @drw158 Roger that. I'll update the code shortly.\n. All of the things have been semibolded (actually just the righthand navbar button).\n. @thianhlu Could you get me the chevron graphics above?\n. For context, from a user:\n\nWhen adding tags to a post it would be great to see a list of the most frequently used tags and be able to select from these.\n. @SergioEstevao Yup. See the plus button on the accessory toolbar in #1 \n. @thianhlu @meremagee Nice work on compiling those stats. The toolbar combinations you suggest make sense. I will run with that.\n. Current punch list:\n- [x] Refactor the UI/UX to show video upload and processing progress. #602 \n- [x] Determine the endgame of wordpress-mobile/wpxmlrpc#12\n- [x] Resolve some of the errors I am still seeing when uploading videos on 4G/LTE.\n. Moved WIP branch from PR to: https://github.com/wordpress-mobile/WordPress-iOS/tree/issue/editor-14-video-support\n. Thanks @mgarza1812! \n\nAs of right now, the new, visual editor is our highest priority. We are anticipating releasing that in the next month or so. As soon as that is released and stable, we are going to attack all things media...including videos! \n. @JiRybar Right now the new WYSWYG editor is our #1 priority. It has taken longer than we originally planned, however the latest builds are looking very good and we are rolling it out to select users in the 4.6 release.\nWe are planning on shipping updates for the media picker (which should include video) in the 4.8 or 4.9 iOS release (Early Q1 2015). Obviously I cannot make any firm guarantees here, but this is our plan.\n. @richardmax Videos are imminent (https://github.com/wordpress-mobile/WordPress-iOS/pull/3503)! As of right now, they are slotted in for the WPiOS 5.1 release.\nThanks for sticking with us! :grinning: \n. @richardmax Roughly, sometime in the middle to end of May.\n. Will be addressed in #9 \n. Fixed in https://github.com/wordpress-mobile/WordPress-iOS/commit/8ca431037d67b83bc50328a3bb21477646e87172\n. Closing, duplicate of #13 \n. Bump. Another request from a user for this. FWIW, the new editor can do this, we just have the alignment buttons turned off in the format bar.\n. Closing this guy in favor of #407 \n. This is expected behavior. The OS sends a SIGKILL to the app whenever a privacy update is made. See:\n- https://devforums.apple.com/message/715855\n- https://devforums.apple.com/message/714178\n- http://stackoverflow.com/a/12810719\nClosing this for now since we restore the user's current state (the post/page they are currently editing) when the app is resumed.\n. Closing because of https://github.com/wordpress-mobile/WordPress-iOS/pull/1827\n. Closing because of new make-a-link dialog:\nhttps://github.com/wordpress-mobile/WordPress-iOS/pull/1827\n. By attachments, I am assuming this is media to be (or was) uploaded to the server for a given post.\n@thianhlu I'm not sure if this will make sense in the new look and feel or not. Any opinions?\nIt may be nice to show the user some kind of progress bar or count that reflects the current upload queue for media...\n. This has been addressed.\n. Closing because of the upcoming post list enhancements.\n. No longer a valid issue.\n. Closing because of new image meta data editing feature.\n. Addressed.\n. Closing...dup of https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/230\n. @jeremeylduvall Yeah, as I look at this I have no idea why I closed it. \ud83d\ude10 It is two different things. Looks like we have this issue open right now: https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/300 \nWhy don't we go with that one if you are good with it.\n. Another user reported this issue:\nhttp://ios.forums.wordpress.org/topic/scheduled-post-gets-published-instead?replies=1\nJust as an update:\n\nA user reported that posts publish immediately, after going back and forth it turns out that it happens specifically when you've already drafted a post. Once I figured that out I can replicate consistently:\n- Create a post in wp-admin or elsewhere (not in app)\n- Load up app, change publish date\n- ~~Buttons don't update to say \"Schedule\", instead just says \"Update\"~~ [Not in new editor]\n- If you hit Update the post is uploaded but status is still draft, time stamp is current, and the scheduled time is lost.\n\nYup. Still is happening.\n. Another user report:\n\nI\u2019ve discovered that if you save a post as a draft in the #iOS app (beta v. 4.9.0.20150223), and then schedule it to be published in the future, it will be published immediately instead.\nSteps to reproduce:\n1. Create a new post in the iOS app\n2. Save it as a draft\n3. Go back to the settings and schedule it for a future date/time\n4. Tap the Schedule link to schedule the post\nResult: It\u2019s published immediately instead of on the scheduled date\nIt wasn\u2019t a big deal for the post I was scheduling 5 minutes in the future, but when I reproduced it on a post being scheduled a week out it was more disturbing. :)\n\nLooking at this for 4.9.\n. The fix for this: https://github.com/wordpress-mobile/WordPress-iOS/issues/3032 is causing the issue here.\n. Addressed: https://github.com/wordpress-mobile/WordPress-iOS/pull/2585\n. This is a dup of #115, closing.\n. It should be noted that I seemed to be able to trigger this error when I queued up a buttload of images to upload.\n. Closing this in favor of https://github.com/wordpress-mobile/WordPress-iOS/issues/3364\n. From another user:\n\nIt's really hard to get photos off my phone in an edited state, so I'm trying to create a draft from the WP app first which of course would only let me add 5 photos at once (arg!) so I kept doing that, but falling asleep in between and photos would fail but I had no way of knowing which ones, and it wouldn't retry.\n\nWe also need to show which photos failed uploading and offer a retry mechanism.\n. I'll close it for you! :-)\n. This should be fixed.\n. Looks good to me. :shipit: \n. @diegoreymendez fixed this issue.\n. Looks like 3 system-level (UIWindow) notifications fire when the user taps on the UIWebView to edit the post body\n- UIKeyboardWillShowNotification\n- UIKeyboardWillHideNotification\n- UIKeyboardWillShowNotification\nthus causing the keyboard jiggle.\n. Also, these redundant notifications are fired when WordPress-iOS-Editor is integrated into the main WPiOS application, not during EditorDemo's execution.\n. ## Notification Detail\nShown in order.\n1st notification:\n``` bash\nName:UIKeyboardWillShowNotification\nObject:(null)\nUser Info:{\n    UIKeyboardAnimationCurveUserInfoKey = 7;\n    UIKeyboardAnimationDurationUserInfoKey = \"0.25\";\n    UIKeyboardBoundsUserInfoKey = \"NSRect: {{0, 0}, {320, 216}}\";\n    UIKeyboardCenterBeginUserInfoKey = \"NSPoint: {160, 676}\";\n    UIKeyboardCenterEndUserInfoKey = \"NSPoint: {160, 460}\";\n    UIKeyboardFrameBeginUserInfoKey = \"NSRect: {{0, 568}, {320, 216}}\";\n    UIKeyboardFrameChangedByUserInteraction = 0;\n    UIKeyboardFrameEndUserInfoKey = \"NSRect: {{0, 352}, {320, 216}}\";\n}\nSent from:\n(\n    0   WordPress                           0x00000001003e0abd -[UIAlertView(TLAlertView) tlsw_show] + 1910\n    1   WordPress                           0x00000001003e591f SparkMethodSwizzle + 319\n    2   UIKit                               0x00000001036d2584 -[UIInputViewTransition postNotificationsForTransitionStart] + 815\n    3   UIKit                               0x00000001036c9696 -[UIPeripheralHost(UIKitInternal) executeTransition:] + 1076\n    4   UIKit                               0x00000001036cb661 -[UIPeripheralHost(UIKitInternal) setInputViews:animationStyle:] + 737\n    5   UIKit                               0x00000001036e7881 -[UIWebBrowserView assistFormNode:] + 237\n    6   UIKit                               0x00000001154671b9 -[UIWebBrowserViewAccessibility(SafeCategory) assistFormNode:] + 74\n    7   libdispatch.dylib                   0x000000010564372d _dispatch_client_callout + 8\n    8   libdispatch.dylib                   0x0000000105634009 _dispatch_barrier_sync_f_slow_invoke + 51\n    9   libdispatch.dylib                   0x000000010564372d _dispatch_client_callout + 8\n    10  libdispatch.dylib                   0x00000001056333fc _dispatch_main_queue_callback_4CF + 354\n    11  CoreFoundation                      0x0000000105335289 CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE + 9\n    12  CoreFoundation                      0x0000000105282854 __CFRunLoopRun + 1764\n    13  CoreFoundation                      0x0000000105281d83 CFRunLoopRunSpecific + 467\n    14  GraphicsServices                    0x0000000106803f04 GSEventRunModal + 161\n    15  UIKit                               0x00000001032ade33 UIApplicationMain + 1010\n    16  WordPress                           0x0000000100005e84 main + 68\n    17  libdyld.dylib                       0x00000001058945fd start + 1\n    18  ???                                 0x0000000000000001 0x0 + 1\n)\nReceived By:\nUITextSelectionView <0x0x10e2d6d50> (inputViewWillAnimate)\nUITextSelectionView <0x0x1185ac400> (inputViewWillAnimate)\nUITextSelectionView <0x0x1185b1550> (inputViewWillAnimate)\nEditPostViewController <0x0x118eae2c0> (keyboardWillShowOrHide:)\nUIWebBrowserView <0x0x112098e00> (_keyboardWillShow:)\n```\n2nd notification:\n``` bash\nName:UIKeyboardWillHideNotification\nObject:(null)\nUser Info:{\n    UIKeyboardAnimationCurveUserInfoKey = 7;\n    UIKeyboardAnimationDurationUserInfoKey = \"0.25\";\n    UIKeyboardBoundsUserInfoKey = \"NSRect: {{0, 0}, {320, 216}}\";\n    UIKeyboardCenterBeginUserInfoKey = \"NSPoint: {160, 460}\";\n    UIKeyboardCenterEndUserInfoKey = \"NSPoint: {160, 676}\";\n    UIKeyboardFrameBeginUserInfoKey = \"NSRect: {{0, 352}, {320, 216}}\";\n    UIKeyboardFrameChangedByUserInteraction = 0;\n    UIKeyboardFrameEndUserInfoKey = \"NSRect: {{0, 568}, {320, 216}}\";\n}\nSent from:\n(\n    0   WordPress                           0x00000001003e0abd -[UIAlertView(TLAlertView) tlsw_show] + 1910\n    1   WordPress                           0x00000001003e591f SparkMethodSwizzle + 319\n    2   UIKit                               0x00000001036d2584 -[UIInputViewTransition postNotificationsForTransitionStart] + 815\n    3   UIKit                               0x00000001036c9696 -[UIPeripheralHost(UIKitInternal) executeTransition:] + 1076\n    4   UIKit                               0x00000001036cb661 -[UIPeripheralHost(UIKitInternal) setInputViews:animationStyle:] + 737\n    5   UIKit                               0x00000001036e7421 -[UIWebBrowserView _stopAssistingFormNode] + 98\n    6   UIKit                               0x00000001036e81fc -[UIWebBrowserView webView:elementDidBlurNode:] + 252\n    7   CoreFoundation                      0x00000001052ccf1c invoking + 140\n    8   CoreFoundation                      0x00000001052ccdc4 -[NSInvocation invoke] + 308\n    9   CoreFoundation                      0x00000001052ccf86 -[NSInvocation invokeWithTarget:] + 54\n    10  WebKit                              0x000000010903acaa -[WebSafeForwarder forwardInvocation:] + 138\n    11  CoreFoundation                      0x00000001052c8b85 _forwarding + 453\n    12  CoreFoundation                      0x00000001052c8938 CF_forwarding_prep_0 + 120\n    13  CoreFoundation                      0x00000001052ccf1c invoking + 140\n    14  CoreFoundation                      0x00000001052ccdc4 -[NSInvocation invoke] + 308\n    15  WebCore                             0x000000010a029269 ZL20HandleDelegateSourcePv + 105\n    16  CoreFoundation                      0x0000000105266d21 CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION + 17\n    17  CoreFoundation                      0x00000001052665f2 __CFRunLoopDoSources0 + 242\n    18  CoreFoundation                      0x000000010528246f __CFRunLoopRun + 767\n    19  CoreFoundation                      0x0000000105281d83 CFRunLoopRunSpecific + 467\n    20  GraphicsServices                    0x0000000106803f04 GSEventRunModal + 161\n    21  UIKit                               0x00000001032ade33 UIApplicationMain + 1010\n    22  WordPress                           0x0000000100005e84 main + 68\n    23  libdyld.dylib                       0x00000001058945fd start + 1\n    24  ???                                 0x0000000000000001 0x0 + 1\n)\nReceived By:\nUITextSelectionView <0x0x10e2d6d50> (inputViewWillAnimate)\nUITextSelectionView <0x0x1185ac400> (inputViewWillAnimate)\nUITextSelectionView <0x0x1185b1550> (inputViewWillAnimate)\nEditPostViewController <0x0x118eae2c0> (keyboardWillShowOrHide:)\nUIWebBrowserView <0x0x112098e00> (_keyboardWillHide:)\n```\n3rd notification:\n``` bash\nNotification Details:\nName:UIKeyboardWillShowNotification\nObject:(null)\nUser Info:{\n    UIKeyboardAnimationCurveUserInfoKey = 7;\n    UIKeyboardAnimationDurationUserInfoKey = \"0.25\";\n    UIKeyboardBoundsUserInfoKey = \"NSRect: {{0, 0}, {320, 216}}\";\n    UIKeyboardCenterBeginUserInfoKey = \"NSPoint: {160, 676}\";\n    UIKeyboardCenterEndUserInfoKey = \"NSPoint: {160, 460}\";\n    UIKeyboardFrameBeginUserInfoKey = \"NSRect: {{0, 568}, {320, 216}}\";\n    UIKeyboardFrameChangedByUserInteraction = 0;\n    UIKeyboardFrameEndUserInfoKey = \"NSRect: {{0, 352}, {320, 216}}\";\n}\nSent from:\n(\n    0   WordPress                           0x00000001003e0abd -[UIAlertView(TLAlertView) tlsw_show] + 1910\n    1   WordPress                           0x00000001003e591f SparkMethodSwizzle + 319\n    2   UIKit                               0x00000001036d2584 -[UIInputViewTransition postNotificationsForTransitionStart] + 815\n    3   UIKit                               0x00000001036c9696 -[UIPeripheralHost(UIKitInternal) executeTransition:] + 1076\n    4   UIKit                               0x00000001036cb661 -[UIPeripheralHost(UIKitInternal) setInputViews:animationStyle:] + 737\n    5   UIKit                               0x00000001036e7881 -[UIWebBrowserView assistFormNode:] + 237\n    6   UIKit                               0x00000001154671b9 -[UIWebBrowserViewAccessibility(SafeCategory) assistFormNode:] + 74\n    7   UIKit                               0x00000001036e80e6 -[UIWebBrowserView webView:elementDidFocusNode:] + 221\n    8   CoreFoundation                      0x00000001052ccf1c invoking + 140\n    9   CoreFoundation                      0x00000001052ccdc4 -[NSInvocation invoke] + 308\n    10  CoreFoundation                      0x00000001052ccf86 -[NSInvocation invokeWithTarget:] + 54\n    11  WebKit                              0x000000010903acaa -[WebSafeForwarder forwardInvocation:] + 138\n    12  CoreFoundation                      0x00000001052c8b85 _forwarding + 453\n    13  CoreFoundation                      0x00000001052c8938 CF_forwarding_prep_0 + 120\n    14  CoreFoundation                      0x00000001052ccf1c invoking + 140\n    15  CoreFoundation                      0x00000001052ccdc4 -[NSInvocation invoke] + 308\n    16  WebCore                             0x000000010a029269 ZL20HandleDelegateSourcePv + 105\n    17  CoreFoundation                      0x0000000105266d21 CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION + 17\n    18  CoreFoundation                      0x00000001052666b9 __CFRunLoopDoSources0 + 441\n    19  CoreFoundation                      0x000000010528246f __CFRunLoopRun + 767\n    20  CoreFoundation                      0x0000000105281d83 CFRunLoopRunSpecific + 467\n    21  GraphicsServices                    0x0000000106803f04 GSEventRunModal + 161\n    22  UIKit                               0x00000001032ade33 UIApplicationMain + 1010\n    23  WordPress                           0x0000000100005e84 main + 68\n    24  libdyld.dylib                       0x00000001058945fd start + 1\n    25  ???                                 0x0000000000000001 0x0 + 1\n)\nReceived By:\nUITextSelectionView <0x0x10e2d6d50> (inputViewWillAnimate)\nUITextSelectionView <0x0x1185ac400> (inputViewWillAnimate)\nUITextSelectionView <0x0x1185b1550> (inputViewWillAnimate)\nEditPostViewController <0x0x118eae2c0> (keyboardWillShowOrHide:)\nUIWebBrowserView <0x0x112098e00> (_keyboardWillShow:)\n```\n. This has been fixed.\n. Closing.\n. Also, it is worth mentioning we received feedback to make the font larger in general.\n. @thianhlu you specified Menlo as the font family in the HTML editor (#110), what should we use on the WYSIWYG side? We previously used OpenSans (and use it everywhere else in the app).\n. Fixed in latest.\n. Works on iOS 9.\n. Retested on iOS9 and I don't think it is an issue anymore. Will reopen if we get more reports.\n. This is happening in the new editor. See https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/137\n. From a user:\n\nNew visual editor: some weirdness when switching from visual to html:\n1. Type some stuff and leave a space after what you\u2019ve typed\n2. Tap \u2018HTML\u2019\n3. a nonbreaking space code shows:\n\n\n\n4) Go back to Visual, enter a couple of hard-returns, and switch back and it enters some visible divs where the hard returns were:\n\n\n. Just a quick update to this issue. As @diegoreymendez and I kill a lot of other open issues, we are getting closer to the web editor in terms of markup. For example, a lot of the <br> and <div> tags should no longer appear. \nIn order to fix the remaining items here, we will probably need to add a clean() or sanitize() method that tidy's everything up.\n. @meremagee would you do me a big favor and take a quick peek at this? I am wondering if we are at a point where the editor is \"good enough\" and we can either close or push this issue forward (with specific todo's).\ndanke!\n. Thank you @meremagee for looking into this! \n\nwhen I add trailing whitespace, on the app, I get the non-breaking code space, whereas on the wp-admin text editor, I don't\n\nAction item: We can try to suppress all &nbsp; as the user is editing.\n\nin the app, extra returns/enters show as <p><p/><p><p/><p><br></p>... whereas on the text editor they come through as\n\n<p> is the default paragraph separator in the iOS editor. The enter key triggers a new paragraph so I am not sure if this needs to be changed. (Also FWIW, once the user begins typing in an empty <p> containing a <br>, the <br> disappears.)\n. @meremagee can we move all shortcode-related stuff from this issue to #85?\n. @meremagee Gotcha. I am just trying to make the issues more bite-size. :-)\n. Based on discussions with @diegoreymendez, this will most likely be a single view controller that manages preview and edit modes.\n. \nScreencap of \"edit\" mode\n. @diegoreymendez, per @thianhlu the keyboard will always be up when editing (the cancel action is the only thing that lowers it).\n. The output of this issue/task should probably feed #105 \n. @thianhlu how are we handling the keyboard here? Always up?\n. Related:\n- #64 \n- #88 \n- #83 \n- #65 \n. @thianhlu The HTML icon above...is this \"internationalized\" enough for global users?\n. From a user:\n\nHTML mode doesn\u2019t scroll quite far enough down to see everything (underlaps the toolbar)\n. @thianhlu Have you thought about this design on an iPad?\n\nA few things to consider:\n1. The keyboard down button on the keyboard (which we cannot control).\n2. Placement of the HTML button since ZSS currently hides the always-visible view where the HTML button is on an iPhone\n3. The potential to have no keyboard visible if an external keyboard is used.\n\n. @coreh That is called a form sheet..and we could potentially do that.\n. Just doing a cursory walkthrough, everything seems to work as expected on iOS8 in the sim and device.\n. Not going to close this yet until @diegoreymendez is done with his stuff in #105 and we get a chance to test things in iOS8.\n. Everything seems to be checking out on iOS 8 across a variety of devices. Going to close this for now expecting one-off issues to be tracked separately.\n. Probably related to #61\n. If the images are already cached (e.g. by viewing the post in preview) you will see them in the editor.\n. Hooray! :tada: :balloon: \n. @diegoreymendez fixed this like a champ.\n\n. @meremagee Any specific metrics we should be tracking?\n. All done.\n. @thianhlu any thoughts?\n. @thianhlu sorry for being dense here, but are you agreeing with @mikejohnstn? \n\nonly users who create an account in the app\n\n:grinning: \n. @coreh good point\n. The quick type bar is imp'ed at the OS level. The user is able to minimize it like so: \n\n. @thianhlu Another thing to consider is the media upload spinner we currently have in the nav bar:\nhttps://cloudup.com/cAumXv-djr5\nIf you tap the spinner while it is visible, it gives the user the option of canceling the upload. (Relates to #75)\n. Imp'ed here: \n- https://github.com/wordpress-mobile/WordPress-iOS/commit/a2fc31b6c2dcbdf82e7c8395109dfde989a96fa9\n- https://github.com/wordpress-mobile/WordPress-iOS/commit/ec2268002cb70e6d4ad309da62147275947ff1f3\n- https://github.com/wordpress-mobile/WordPress-iOS/commit/865b511d637919baccc8b744ed72f639db9de45b\n. Related to #126 \n. @diegoreymendez :thumbsup: \n. This is already done in here => https://github.com/wordpress-mobile/WordPress-iOS/pull/2291\n. Fixed in https://github.com/wordpress-mobile/WordPress-iOS/commit/e8b2073c6cdb4ab7bdba2a8bdd31e34cb4334621\n. This is really nice work @diegoreymendez. I :heart: how you cleaned everything up with the creation of WPEditorView. \nI would say if you address my previous comments (if possible), :shipit: \n. Because of the new retry feature (https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/348), the user will see the image with a failed overlay. Closing this for now.\n. @thianhlu \n\nRemove 1px gray bar under Nav bar.\n\niOS gives you that \"for free\" ;-) It is consistent with the rest of WPiOS.\n. @thianhlu We can get rid of it. Just wanted to point out that other parts of the app will still have it. Here is a quick vid of the editor with the bar shadow being removed:\nhttps://cloudup.com/ceDCpzgc7wW\n. @thianhlu Cool. Let me check in with the other guys to see if we can work around the Helpshift issue that prevented them from doing this.\n. Fixed here: https://github.com/wordpress-mobile/WordPress-iOS/pull/2433\n. @thianhlu Title-wise this is how it will look:\n\nGroovy?\n. Visually, it looks like the Reader's title font is smaller than what 30px is defined as in our CSS. 20px may be closer in size:\n\n\n. @thianhlu the mention styling should probably wait until the changes here:\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/tree/feature/add-mention-to-neweditor\nland in a release branch. \n/cc @allendav @oguzkocer \n. No worries @oguzkocer! Thanks for letting me know.\n. @thianhlu there is no title in the HTML view ever since we moved the title inline with the WYSIWYG view. Would you like us to duplicate it there?\n\nHere is what the padding and line height changes look like:\n\nIs this ok?\n. @thianhlu Here is a quick video of the title field on the HTML source view in action:\nhttps://cloudup.com/cE2MCZwAaVd\nright now I just made it fixed at the top. Should it remain that way or would you like it to scroll up with the HTML content?\n. @thianhlu just to follow up, @diegoreymendez and I were chatting this morning about this. \nWe both agree that leaving the post title fixed to the top of the HTML view screen probably makes the most sense for 4.6.  I say this because, for 4.7 or 4.8, we want to change the entire HTML source view to a non-native control similar to the WYSIWYG editor. SO any work we do here will basically be thrown away.\n. Hooray! :cake: \n. >  Might be a good idea to move to 4.7 (ie: the release after the public release).\nFull public release is now 4.8...pushing this to future because of complexity. \n. Possibly related to:\n- https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/18\n- https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/39\n- https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/75\n. @meremagee is this on a private site?\n. @thianhlu What is that typeface in the tip bubble? Also, what bg color is that?\n. @thianhlu Here is a quick demo of what I got:\nhttps://cloudup.com/cuzDJhL6sNP\n- I changed \"Click to edit post\" to \"tap to edit post\" (no clicking on mobile :grinning: )\n- Ignore the fact that the tooltip always appears when opening a post...doing it for a quick demo\n. This appears to be fixed in the latest 4.5 build.\n. Prolly related to #226 \n. Related to https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/204\n. This was fixed in #382 \n. Was fixed in https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/227\n. > The insert link dialog now displays the URL stored in the device's clipboard by default.\nShould we check to make sure this is a valid URL before pasting it into the URL field?\n/cc @thianhlu \n. Do you think we should change the keyboard type to UIKeyboardTypeURL when in the URL field?\n. Looks like there might be an issue inserting a link without selecting any text. Here's a vid:\nhttps://cloudup.com/cHoTZ5SvvCu\n. That is all I have for now @diegoreymendez. Code looks great...I love the asserts and doc comments! :tada: \n. @meremagee I can dig that. A couple of things:\n1. I am assuming if the device's connectivity is spotty, we will need to default to the simple preview.\n2. Are you saying that any new post created on device needs to be automatically created server-side? At present, we are just creating a local copy and only pushing it to the server if the user saves it as a draft or publishes it. (If it is a local copy we don't have access to the users Wordpress theme to render the post appropriately)\n. @meremagee so what are the final todos for this issue? I am not sure...\n. \n. Seems to work now. :tada: \n. Also reported from a user:\n\n\nWP app version: 4.8.0.20150210 (2af40c9)\niOS version: 8.1.3 (device: iPad Air 2)\n\nThe categories selection screen is missing a title. Also, the top padding is missing.\n. No longer an issue\n. Not an issue anymore. Closing.\n. Not editor related.\n. Not an editor issue..plus it was fixed. :-)\n. > Since all themes share the same UI on mobile web, this feature isn't very useful.\n\nNot necessarily the case anymore. Closing.\n. Not a high priority. Closing for now.\n. This includes adding captions, editing image title, and the alt title.\n. Have not seen this in a while. Closing.\n. Moar details from another user:\n\nActually, it seems like the blog you are posting to IS updated, but the displayed name is not. To repro:\n 1- Open app.\n2- Hit New Post icon (pencil).\n3- Observe title of the site you\u2019re posting to (Site A).\n4- Write some content.\n5- Click site title and select a different site (Site B).\n6- The site title being displayed still be for Site A.\n7- Publish the post. It will publish on Site B.\n. Fixed.\n. @meremagee I am having some trouble trying to repro this issue. Any advice?  :confused:\n. @meremagee Any updates on this? Safe to close this issue?\n. Closing as a dup of #407 \n. Here is a vid of it: https://cloudup.com/cmj-yILI2VE\n. From the same user:\nAlso, this same thing applies when starting a new post. You can\u2019t tap anywhere in the editor area to place the initial cursor. You have to tap right on the \u201cShare your story here\u2026\u201d line.\n. From another user:\nI just tried uploading several pictures from the go karting activity today and after I had selected 5 pictures, I was not able to select any more.\nI would expect some sort of notice stating that I had reached the maximum selected photos.\n\n\n. Again, the entire reason this limit exists is to help alleviate memory pressure and timeout issues many users were experiencing. The ultimate fix for this issue may be to completely refactor the way we are uploading media.\n. Just as an update, @SergioEstevao's PR (https://github.com/wordpress-mobile/WordPress-iOS/pull/2745) should fix this issue. The max upload limit has been increased to 10 for the v4.6 release and if it goes well, we could consider removing the limit completely. \n. As of WPiOS 4.4, no longer able to repro this issue. Closing.\n. This might be an easy fix...simply disable the format bar buttons when the user taps back into the title field.\n. Per @thianhlu:\n@mentions need to be styled like links just like WP iOS https://cloudup.com/ceFquITnG8A\nref #153 \n. Seems to only happen on device...not the sim.\n. Closing because this is a dup of the issues @meremagee mentioned above.\n. Same thing happens also after adding a picture to the post.\n. From another user:\n\nI\u2019m not sure why but it\u2019s not scrolling on my device:\nTap pencil icon\nStart writing a new post\nWhen it goes beyond the toolbar\u2026 doesn\u2019t scroll\n. So doing a little testing, it looks like line breaks/new lines in a contenteditable node are determined by what the parent node is. For example if the text you are editing is wrapped in a <p>, new lines will be <p>'s. However if your text is not wrapped in anything or wrapped in a <div>, newlines will be <div>'s.\n\nHere is a video of this behavior:\nhttps://cloudup.com/c3jaoXYKXWT\nI am going to try making our main contenteditable node a <p> instead of <body> to see if we can stop using <div>'s for new lines.\n. Video of similar issue from a user:\nhttps://cloudup.com/iRxISogEhZJ\n. @diegoreymendez this looks great. Maybe add a label to the testing VC to explain why it is there. Otherwise :shipit: !\n. @diegoreymendez looks good to me. :shipit: \n. From another user:\n\nI recently opened up a post in the latest WPiOS internal beta that I had started on the laptop. When trying to select a featured image, I noticed that I could only set a featured image that was already on my phone.\nI would expect that I could also set a featured image that had been added to the post as well.\n. @Codelica there is indeed hope! :-) \n\nThis is a feature we are looking to implement in the near term. Hard to pin down an exact date, but I would say roughly Q2 of this year.\n. Closing in favor of: https://github.com/wordpress-mobile/WordPress-iOS/issues/3456\n. :shipit: \n. > Set the cursor back to the top of the content\n:+1:\n. Similar to #234, we are waiting on some more faults to fire now that we have the asserts in place.\n. I am going to close this issue for now \u2014 nothing conclusive was ever found.\n. Just as a status update, during our initial investigations nothing conclusive was found. We are currently waiting for this fault to fire a few more times in the WP Internal builds now that we have more asserts defined in code. \n. I am going to close this issue for now \u2014 nothing conclusive was ever found.\n. :shipit: \n. :shipit: \n. @diegoreymendez Nice work. What are the thoughts behind removing the placeholder from the editor when it is not in edit mode? It seems like that is something that should always be visible (assuming there is no user text in the editor).\n. Also when running this on my 5s running iOS8, I am noticing some screen flashing when the editor gains focus. In some cases the cursor would just disappear.\n. > I definitely think it would make sense to make this configurable (zss_editor.alwaysShowPlaceholder or something like that). \n:heart: it! do it! :grinning: \n. @diegoreymendez re: the flashing, I was able to capture it on the sim (iPhone 6). Here is a video: https://cloudup.com/c8URQMZLfZx\n(Note how I have to tap on the editor screen a few times to get the cursor to display.)\n. :shipit: \n. :shipit: \n. :tada: :balloon: \n. When the user adds an image, it is immediately uploaded to the media library of the current site and referenced in the editor by it's URL. Changing the site would require us to re-upload those same images to the new site's media lib and update all of the URLs in the editor.\nAll of this can obviously be done but there is a little bit of complexity to consider especially if the user is on a flaky connection.\n. @thianhlu Maybe we could think about completely refactoring the blog picker to something that matches the users mental model ?\nref: https://github.com/wordpress-mobile/WordPress-iOS/issues/3253\n. :shipit: \n. :shipit: \n. Hooray! :hocho: \n. From another user on an iPad with external keyboard:\n\nWhen composing a post with an external keyboard, the post box doesn\u2019t auto-scroll as you add more content. Basically, once you hit the bottom of the post box, your content seems to get lost and cut off. Sometimes, it seems like I can scroll down and access it. Other times, I can\u2019t for some reason (can\u2019t track down why). I\u2019ll keep testing, but here\u2019s a screenshot of what I\u2019m seeing:\n\n\nI verified this is an issue on both the new and old editors.\n. :shipit: \n. From another user:\n\nI\u2019m currently unable to select Post Formats using the iOS app 4.6.0.20141031 on my .org blog \u2014 clicking the button just flashes the active state of the button but doesn\u2019t do anything.\n\n(User confirmed exiting and going back into the post fixed the issue)\n. This appears to be an issue with the new editor only. Roughly, the steps to repro are:\n1. Create a new post\n2. Set its status to 'Draft' and save it\n3. Edit the post, and try to change its status to something else\n4. Save it again\nNote: Does not happen every time.\n. Retested on latest iOS9-only internal \u2014 seems to work now. Closing.\n. Just tested in 5.7 internal and this issue seems to be fixed. Closing.\n. Mattt Thompson has a nice breakdown of it here: http://nshipster.com/wkwebkit/\n. Good work on this @diegoreymendez! We will keep our fingers crossed for real cookie support soon...\n. From another user:\n\nI did some field testing with the latest version today and I found that sometimes when flipping from settings for a post back to the post, the image I had inserted would disappear from the visual editor, but it would still actually be there (say, if I tried to insert it again, I\u2019d end up with two).\n. Looks like the picture can also vanish after typing the title field. From another user:\nToday I noticed that if I clicked the title, directly after adding an image, that the image in the new editor, WP iOS 8.0.2, would disappear. Also, I noticed that if I clicked on preview that the image would show. But, when I switched back to the editor, the image was still gone.\nSteps to repro:\n- Create new post\n- Add image\n- Click title bar\nNow, I went ahead and did a bit more testing, and I found that if I added the image, then added text, then clicked the title bar, that everything worked fine.\n. Navbar layout has been tamed.\n. Overall this is really nice work @diegoreymendez (as always). I just had a few nits and questions.\n. @diegoreymendez Also, it looks like the title field allows <p> tags:\n\n\nWe might what to prohibit that.\n. Your original text above refs this: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/265\nI am assuming this is not fixed for the old editor, just the new one...? \n. Let's :shipit: this bad boy!\n. @thianhlu \n\n\n\n. :shipit: \n. :shipit: \n. Looks good @diegoreymendez. I tested this on a number of devices and version and could not get it to break.\n:shipit: \n. :shipit: \n. This is fixed.\n. Awesome sauce. :shipit: \n. The bulk of this was addressed in #153 ... closing for now.\n. :shipit: \n. Also note that this could be a bigger issue since we just removed the status bar on the options screen in the new editor.\nFrom a user (the tiny spinner this user is referencing is now hidden):\n\nWhen I add a featured image, there\u2019s a good chunk of time (at least, it\u2019s a long time on my sadly slow connection) when the only indication that the image is being uploaded is the spinner at the very top of the screen:\n\n\n. :shipit: \n. > A user has requested to be able to sort the posts in the app in the same way they can be sorted in the Dashboard. (Feature request: sort posts by size and last modified date)\n. Post filtering now exists. Closing.\n. @aerych came up with this: https://cloudup.com/cjb2RaT3o8Q\n. @diegoreymendez \n\nFixed.\n\nFamous last words.... :grinning:  (kidding)\n. @meremagee \n\nadd the native tooltip to enable users to select and change inline: \n\nthat is already in place:\n\nGood enough?\n. After a discussion with @meremagee, we decided that automatically switching text direction based on the current keyboard is not a high priority given:\n- We have the context menu arrows as described in #305 which can move individual paragraphs from RTL to LTR\n- We now support RTL at the document level #303 \n- This functionality will be pretty tricky to implement in a UIWebView.\nClosing for now.\n. @meremagee Is this different that #304 ? Perhaps I am just a little \"slow\" tonight :-)\n\n. The tooltip we get for \"free\".\n. Beyond my placeholder questions, this looks really nice @diegoreymendez! \n. Oh, just as a FYI, after you insert an image the web view scrolls to the top of the content.\n. :shipit: \n. @meremagee I think for the 4.6 release, we should just uniformly implement the blocking dialog - not letting the user post until the upload is complete. I :heart: your solution, but fear that implementing it will be a can of worms and technically goes against our code freeze rulez.\n/cc @diegoreymendez \n. Sorry, should've pinged @thianhlu here too....\n. Renaming this issue to provide a little more clarity.\n. (This is in reference to @meremagee's comment above)\n. :boom: \n. Sorry @meremagee, this is still an issue....it is just less bad on the iPhone 6.\n. Fixed.\n. Note that XCode 6.1 insists on updating the XML project format to JSON ;-)\n. Closing...captured in #243 \n. \n\n. :shipit: \n. Note lines 111 and 112 of that log\n. @diegoreymendez I updated the colors per @drw158's recommendations.\n. :+1: \n. Ping @oguzkocer just so you are in the loop :smile: \n. :ghost: \n. @meremagee can you test this again once a new 4.6 build is cut?\n. :shipit: \n. With the limited testing I was able to do in my hobbled XCode environment, your patch seems to have fixed this issue on iOS7. :+1: :shipit: \n. Works great on both iOS 7 and 8. :shipit: \n. Nice job @diegoreymendez :shipit: \n. :shipit: \n. :+1: Doing this will also allow us to port more easily over to Android.\n. Playing devil's advocate here....is this something that can wait until we are past the 4.8 release? This is a pretty large change to be introducing now. In addition, @diegoreymendez has a nice fix here: https://github.com/wordpress-mobile/WordPress-iOS-Editor/pull/460 that might buy us a little time. \n. @thianhlu thoughts on the question above?\n. Ok @diegoreymendez, ready for you to take another looksie :eyes: when you have a moment.\n. So, I was not able to get this bug to appear on both 7.1 devices or the sim. However, there is a noticeable improvement in keyboard responsiveness on iOS 7.1. \nIn addition, @diegoreymendez IS able to repro this bug in his environment and the gc call fixes it. \nI say :shipit: !!\n. Repro Steps:\n1. Insert an image into a post.\n2. Quickly save the post before the image finishes uploading.\n3. Reopen the post.\nCurrent behaviour: the image will not show properly, because it's still pointing at the old local URL.\nExpected behaviour: we should probably let the user know that if they save before the image finishes uploading, the image will not be added to the post.\n. Media alert text:\n\n@thianhlu did you want a different title?\n. Nopes. This is not fixed. In the 4.6.20141105 build, it seems like the \"local url\" image src still occurs 50% of the time.\n/cc @meremagee @diegoreymendez \n. > Can we change the nav bar text to just \"Uploading\" + spinner\nYup.\n\nAfter acknowledging the modal, it seems like upload takes even longer, any reason why?\n\nIt shouldn't but I will investigate.\n\nQuestion: Instead of this, could we implement an option inside of modal to cancel upload?\n\nLike when the user taps the spinner now?\n\n. @thianhlu:\n\n. @thianhlu \n\n. @thianhlu One more interaction for you to take a peek at when using the \"Confirm Navigation\" dialog everywhere (vs. the blocking dialog). \nThe current behavior of this dialog is that, when the \"Yes\" button is tapped, it kills the uploads and stays on the same screen. Applying this dialog to preview, options, and \"X\" causes the initial action to be cancelled. After the user cancels the upload by tapping \"Yes\", they would then need to click the same action again:\nhttps://cloudup.com/chiUKeD4rmP\nConversely, if they tap \"Not Now\", the dialog will disappear and the app stays on the same screen. Then if the user taps the same action again (and uploads are still in progress), they will still see the same dialog.\nIf this behavior is ok, we can put this into 4.6. If we need to modify the default behavior of this dialog, this probably should be tracked as a separate issue (https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/307) and included in the 4.7 release since this is going beyond the scope of a simple bug fix.\n. Added a small delay after the remote image swap request is sent to the web view. I was unable to repro this issue after the change. @meremagee please put this on your \"things to hammer on\" list :grinning:\n. :shipit: (I still can't get that OOM error to pop :smile: )\n. > The user would then tap on the red icon, which would bring up a list of options for the user:\n\nTry uploading again.\nRemove the image.\n\n:+1: \n. Design idea from @diegoreymendez:\nWhen we insert a temporary local URL, lets mark that image node with some kind of \"unfinished\" flag. Perhaps a data attribute? Then, if the upload fails and the user saves a post, we can ask them if we can retry the upload (even if they save a draft and reopen the post).\n. Fixed.\n. :shipit: \n. For now, we are going to block the HTML view when uploads are in progress.\n. @diegoreymendez Do we need to make dimming support the UITextField title on the HTML view?\n. :shipit: \n. :shipit: \n. I think this is a little bit higher priority now. I can fairly consistently cause this:\n\n(Note the lack of an close toolbar button)\nRepro:\n- Create a new post with some content\n- Switch to another app and do other stuff (leave editor in edit mode)\n- Wait a few minutes\n- Reopen WPiOS\nIt is possible to exit this screen by tapping \"Edit\" then tapping the \"X\" on the left hand side of the navbar.\n. Sans spelling mistakes, :shipit: \n. I agree with @SergioEstevao.\n. Nice job @diegoreymendez  :shipit: \n. @diegoreymendez looks good. :shipit: \n. :shipit: \n. @diegoreymendez \n\nMore work is needed in this feature, but for the time being this fix is an improvement.\n\nAgree. :+1: \nref: #115 \n:shipit: :banana: \n. @meremagee The next 4.6 build is going to have a number of fixes that may have taken care of this issue. I spent a good amount of time trying to repro this issue with that branch and was not able to. \nWould you mind testing this again when the next internal is released?\n. @meremagee when this happens, the cursor is in the title field, correct? If you tap the editor field does the format bar then appear?\nI was able to repro this once, but could not do it again :-/\n. Being realistic and taking my name off this for now.\n. Fixed here: https://github.com/wordpress-mobile/WordPress-iOS-Editor/pull/464\n. @diegoreymendez overall, I really like this refactoring of the toolbar. I tested the hell out of it on a bunch of devices and iOS versions...seems pretty solid to me. For that, I give you a golf clap:\n\nBesides the style nits I mentioned above I would say :shipit: !\n. @thianhlu, @diegoreymendez found a way to keep the editing experience the way it always was (left to right animation). We are not using a modal...closing this for now.\n. @meremagee Is this something we can just close?\n. >  I noticed that several apps show a different pre-restore image and restored VC. Pretty standard and the effort put here may not be worth it. Closing this.\nAgree 100%. Standard stuff\n. @meremagee nice catch.\n. That is exactly what I was thinking.... :grinning: What's one more callback between friends?\n. @SergioEstevao with your progress updates, can we call this issue closed?\n. @meremagee Based on your screenshots above, this issue appears to afflict the both the new and old editor...?\n. @diegoreymendez the black rectangle of death lives!\n. Thanks @thianhlu! \n\n. Closing this. The 3x assets for the X and chevron will be addressed here: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/439\n. Nice catch!\n. @thianhlu I think this might be an easy fix.\n@diegoreymendez if you happen to log on before me in the morning, I think this line is the culprit here:\nhttps://github.com/wordpress-mobile/WordPress-iOS/blob/c1b46582118246b89063a619dde7d7e4f19d5835/WordPress/Classes/ViewRelated/Post/PostPreviewViewController.m#L208\nNote how it's referring to the original post which would not exist when previewing in view-only mode. I think we should be able to change this to NSString *link = self.apost.permaLink;\n...but note that I am tired and could be missing something too :-D\n. @meremagee I clearly must be doing something incorrectly trying to repro:\nhttps://cloudup.com/cBhFp3DIGsX\nany advice?\n. @meremagee can you do lookback of it?\n. This should be fixed here: https://github.com/wordpress-mobile/WordPress-iOS/pull/2901\n. This should be fixed here: \n. Color commentary ==> that text uses /n/n instead of </p> tags and therefore only works in the native UITextView view (the HTML source view) but not in a contenteditable node within a UIWebView.  We will probably have to do some kind of text sanitizing after it's pasted into the visual editor...\n. @meremagee @thianhlu How is this?\n\n. Looks like this is an issue on iOS7 only and if you tap the editor screen again the keyboard will appear.\niOS7: https://cloudup.com/crdz7DRS_S1\niOS8: https://cloudup.com/cX8rsKKszDD\n. Closing since we dropped iOS7 support.\n. @thianhlu I can answer this. After publishing, the legacy editor takes the user to the post list for the blog they chose to post to. In the new editor, the modal editor screen is just dismissed and the user remains where they started from.\n@meremagee mentioned above:\n\ntaken back to reader\nfeel lost\n\nI can totally see that. BUT I can also see the user being confused because we navigated them to another spot in the app underneath a modal view....kind of like \"Surprise! You are here now.\"\nI guess it also depends on what that giant pencil button means. Is it navigation or an action? Since it is on a tab bar, you could make the case that it is navigation, but I view it more as an action. \"I want to create a post right now\".\nJust my 2 pesos.\n. @thianhlu Roger roger.\n. @thianhlu Like so?\n\n(Open Sans Regular 18pt)\n. @thianhlu would you like the HUD to display something if an error occurs attempting to publish/save/schedule a post/page?\n. @thianhlu for example (the text sucks, I realize):\n\n\n. Just passing thru to reference our other dup posts issues:\n- https://github.com/wordpress-mobile/WordPress-iOS/issues/2804 (FWIW I think this is the primary cause here)\n- https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/202\n- https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/24\n. Addressed.\n. @meremagee \n\nexisting user, wp.com site: added media, hit X in post before upload initiated (before saw \"uploading\"+ spinner), crash (repro'ed 3 times in a row) : https://cloudup.com/cye4cwaF6ij\n\nDo you think we should bust this out into a separate bug?\n. @thianhlu \n\nAre you talking about the highlight bar gaps within the button itself (1) or the spaces in between each button (2)?\n. @thianhlu any thoughts on the question above?\n. Also applies to italicized text as well.\n. Prolly related to #506 \n. @meremagee \n\nnote: in html view, the wp-media library url has replaced the local url\n\nTells me the local-remote image swap worked, however the web view is not loading that image for whatever reason. I was not able to repro the \"2nd repro\" above, but I wonder if the same thing happened (remote URL is correct, image did not load). \nIt would be interesting to see if you saved a draft post that contained that white box, leave the post screen, then reopened the post if the image would appear correctly. \n. @diegoreymendez Would you mind taking a peek at this first thing Monday morning?\n. Bump. From a user:\n\nAs for the lag, it doesn't appear to be a resource issue. This happens both when initially creating a post and while editing. Again, this was an issue that didn't exist with the previous version of the app and only seems to occur in the visual editor (Typing in this conversation window seems to work perfectly!) \n. reviewing\n. @diegoreymendez Code looks fine. The only nit I can see is the body placeholder text sometimes flashes twice when you focus on the title field. However, I don't think that should get in the way of this fix. As far as my :eyes: can tell, the animation jank has been expelled.\n\n:shipit: \n. > Unfortunately the iOS + javascript integrations can take a ton of time to get right. So far we have been spending lots on time on research, because some features tend to fail like this. \nSooooo true. Our goal is to make this hybrid editor appear to be 100% native, so we have been sweating all the minor details to make a compelling experience.\n\nI'd honestly not merge this unless we can get that feature fixed\n\n:+1: \n\nI'd start by looking for ways in which we can overlay or draw the progress bar on top of the image.\n\nI agree 1000%. The small bar above the image is better, but it appears to be disassociated with the image itself because its floating a few pixels above it:\n\n(I do like the opacity fade in.) @thianhlu what are your thoughts in terms of the design?\n. Feature has been added. Closing.\n. Interesting bug, though I am not sure how the user got into this state because I am not able to repro. I tested on both device and sim. Here is a video of my attempt on the sim (warning it may make you a little dizzy :grimacing: ):\nhttps://cloudup.com/cvrj_12Cmte\n@sendhil Did the user say if they could consistently do this?\n. For some context on image size, see discussion thread here: https://github.com/wordpress-mobile/WordPress-iOS/pull/2585\n. > Would it be okay to move the thumb cell above the Details header since its not editable where as all the other options are?\n@thianhlu did you give @aerych an answer for this?\n. From a user regarding features we must add:\n\nAbility to make a new link open in a new window rather than adding 'target=_blank' to every link I insert manually\n. @thianhlu is this still a thing?\n. :boom: \n. @SergioEstevao also, is there a current issue that this PR is for?  This one:\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/423 ?\n. @SergioEstevao nice work. If you address my one issue noted above (suppressing the action sheet),  I'd say you can :shipit: \n. @diegoreymendez ZSS icon removal ticket created: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/440\n. Looks good. :shipit: \n. Related: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/376\n. Just tested on the 5.7 internal (iOS 9). Seems like the issue only happens when an image is \"involved\". If I have a long post with just text, I am able to select and drag. \n. Latest assets are in develop branch (ready for 4.8).\n. Closing in favor of #720 \n. This should be fixed here: https://github.com/wordpress-mobile/WordPress-iOS/pull/2901\n. Nice fix @diegoreymendez. Works like a champ. :shipit: \n. @meremagee Now that the post list has been refactored & redesigned thanks to @aerych's hard work, are these issues anymore?\n. :shipit: \n. I was not able to see the black background of the UIWebViewScrollView anymore. However I suspect @meremagee will be the true test. :wink: :hamster: \n\nBesides my comment on the comment, :shipit: \n. @SergioEstevao This PR looks good. If I would have to nitpick on something it would be the spacing between the retry icon and the \"Failed\" message. On an iPhone it isn't too bad, but when viewed on an iPad, the spacing seems a little large (especially with photos in portrait):\n\nI know you are waiting on @thianhlu to finalize the font type and size, but I will guess that the Failed message should be larger and in bold...it is a little hard to see.\n. Looks good @SergioEstevao :shipit: \n. Fixed.\n. Nice work on this @aerych. @diegoreymendez really captured all of the things I would comment on about the code, so I will talk about the UI instead. \nI realize we have a separate issue to handle shortcodes, but I was wondering if there was a way we could style the shortcode text within the editor so it is perhaps less noticeable to the end user. Adding some image metadata now gives us:\n\nSeeing [caption width=\"400\" align=\"aligncenter\"][/caption] inline with the text in the visual editor may be a little disorienting to the end user (/cc @meremagee). \nJust thinking out loud here...maybe the ideal is not displaying it in the visual editor, but have it visible in the HTML editor. \n. > What are your thoughts on the best approach to the demo form? Its as simple as possible right now.\nFor the editor demo, I think it is good enough. Maybe make sure the bottom field (Width) moves up when the keyboard is displayed.\n. @aerych I think this is great. I will let @diegoreymendez chime in too, but it is a :shipit: from me!\n. Hola @aerych. Nice work improving this feature. I have not started reviewing the latest code yet, but I did run through the feature itself and had a few general comments. First thing I noticed is that on smaller screens (iPhone 4s), the edit icon appears very large:\n\nIs this something that could get scaled down? For reference, it looks good on iPads:\n\nNext I made a quick video demonstrating 3 potential issues:\nhttps://cloudup.com/cQiYu40qpy4\n1) When the image is \"uploading\", I can still tap it and see the edit icon. In addition it appears to interfere with the behavior @SergioEstevao introduced with upload progress (tap to stop an upload). \n2) Note at the end of the video there is a weird issue where the progress bar never disappears after tapping edit during an upload. \n3) The content view seems to jump around a bit when editing. Is there anything we can do to combat UIWebView here?\nFor points 1 and 2, maybe a quick solution is to disable image editing during an upload OR if the image is in a failed state?\nMoving on to code next...\n. @aerych Also I noticed the image edges were fuzzy again. Was this on purpose?\n. Looks great @aerych :shipit: this bad boy!\n. :shipit: \n. Fixed.\n. @diegoreymendez Within the context of the demo app this fix works great. I am reviewing the \"Retry media upload\" PR today so hopefully we can land this soon. It's up to you, but this can :shipit: based on the demo app IMHO\n. Closing in favor of #665 \n. @thianhlu any thoughts on this guy?\n. :shipit: \n. @thianhlu roger that!\n. > iPhone format bars will be unchanged?\nThat is correct\n\nI'm wondering if it would be good to frame this not in terms of iPhone vs iPad but in terms of available screen-size.\n\nI thought the same thing as well, but ultimately decided on this approach because things will be changing with Calypso soonish.\n. > Btw, I dig the spacing and grouping of the toolbar buttons on the iPad. They look nice and I'm kind of wondering if the landscape iPhone toolbar could take advantage of the spacing too. :D\nLet me explore that and get back to ya. :-)\n. @thianhlu yeah, ultimately there isn't any room to do this on smaller devices.\n. @aerych Changes made. Would you mind taking one moar quick peek?\n. > Being able to add images from other people photo stream is a priority?\nGood question. My vote is no, or at least no for 4.7.\n. > Can we try and clip the borders/edges so they are not blurred? We would probably have to put inside a div like (http://stackoverflow.com/questions/12224320/defined-edges-with-css3-filter-blur).\nGreat idea! Looks much more crisp.\n\n. This works for me. Thanks for checking this out @SergioEstevao !\n. :shipit: \n. Tested it on multiple devices and it works like a champ. Nice job finding a workaround for the webview redraw. I say :shipit: \n. :shipit: \n. @SergioEstevao I just ran your PR and have general comments which I'll just leave here so @meremagee can chime in too. Overall I like having the user know why the image selection just stops, so this is a good add IMHO.\n1) Should \"Need Help?\" take the user somewhere? Right now it just dismisses the alert. Do we even need that option? Perhaps OK is enough??\n2) @meremagee you kewl with the copy in this alert?\n. > Low priority\n@meremagee did this really become high priority for 4.8?\n. Ok @diegoreymendez made your recommended updates...lemme know.\n. Added a new issue for the bug listed above here: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/494\n. :shipit: \n. :shipit: \n. :shipit: \n. @diegoreymendez you are correct. We were planning on leaving the option in settings so users could revert if they chose to do so.\n. This seems pretty serious. @SergioEstevao could you investigate this? \n. A couple of things... I have been experimenting with different approaches to suppress the &nbsp; including:\n- Real time substitution\n- Bulk removal/replace when the editor loses focus\n- Bulk removal/replace when raw content is requested from the editor.\nAll of these things have strange side effects. The biggest one being the contenteditable node in UIWebView does not recognize trailing spaces that are not &nbsp;. You can see this if you switch from the visual editor to the HTML editor and back again. Example:\nhttps://cloudup.com/cTW7tPqGAz9\nSo...for 4.8, I am recommending we punt on this and regroup around what the best course of action is to handle spaces.\nFWIW, looks like spaces gives core problems too: https://core.trac.wordpress.org/ticket/26842 :-)\n/cc @meremagee \n. Note, we needed to be careful here because of this PR: https://github.com/wordpress-mobile/WordPress-Editor-iOS/pull/581\n. Closing this master issue because #411 and #586 can stand on their own.\n. > Note that adding urls on their own line to embed does not work on the ios app at the moment since we're re-linking it upon publish.\n@meremagee and I talked about this offline...just adding it here for the official record. In my current local 4.8 build, I am able to add a raw youtube URL (https://www.youtube.com/watch?v=gJ8O3mxlDkc), unlink it, and publish it. The video appears to embed properly in that published post. \n. This PR will also fix #360.\n. Closing this issue because it will be addressed in #708.\n. Instead of creating a new issue, I'll just add this here. After upgrading I reopened the app which was restored on the new post screen for the editor:\n\n...the on-boarding displayed as expected, but I was unable to dismiss it. Trapped.\n\n. @diegoreymendez I should add that I was able to minimize the QuickType bar and tap a corner of the dismiss button, but the average Joe may not know that.\n. From another user:\n\nI posted from the iOS app using the new editor this morning and realized it went to the wrong blog at first. Oops. Turns out my primary blog was no longer the selected blog. In \u201cMy Sites\u201d, a different blog was also selected. Switching back to my primary blog solved everything, but somehow the app seems to have lost my previously selected blog in between upgrades.\n. @aerych nice sleuthing.\n. This commit: https://github.com/wordpress-mobile/WordPress-iOS-Editor/commit/45fa1fffa5d5d964fd035a348d42783fece979a7 may be the culprit here. When I check the previous commit out the placeholder color works. On this commit, it doesn't.\n\nSeems like the color CSS value on div#zss_field_content.field is not being set for some reason.\nPrevious commit:\n\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/commit/45fa1fffa5d5d964fd035a348d42783fece979a7 commit:\n\n. :boom: \n. @diegoreymendez After you commit this fix, could you update the main WPiOS repo with the latest editor pod?\n. Tested..works great. :shipit: \n. This should be fixed now.\n. Closing since this was fixed here and has the resolved > test label.\n. @meremagee \n\nupon opening the \"failed\" draft, should not see \"unsaved changes: this post has local changes that were not saved. you can now save them or discard them\" alert\n\n\u00bfPor qu\u00e9? \n. :shipit: \n. I should also mention the reason I removed this addition of the space was because even if the user deleted all of the text in a field, it would always contain a space when getHTML() is called.\n. Thanks @aerych :-) I was debugging for like 25 minutes and when I found that I had a good laugh!\n. @diegoreymendez I had one comment above...do what you want with that. The fix works well. :shipit: \n. :shipit: \n. Thanks for the report @debex. I am moving this issue to the main WPiOS repo: https://github.com/wordpress-mobile/WordPress-iOS/issues/3199\n. Lots of these issues have been addressed and #411 captures the other formatting issue with he first line. Closing this for now.\n. Also #568 \n. @SergioEstevao After you fix the nits above I would say this is a :shipit: \n. :shipit: \n. @thianhlu I don't think this is an issue looking at the latest internal so I am closing this. If you feel it is, please reopen. \n. :shipit: \n. Logged the pencil shift here: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/564\n:shipit: \n. Closing. Not able to repro on latest internal with iOS9.\n. @aerych http://xscopeapp.com/\n. This looks better to me...but I agree, we can let @thianhlu sort it out. :grinning: \n. @aerych https://cloudup.com/cRclIE52yuA\n. @meremagee ok to close?\n. Thanks @debex! Agree that this is odd behavior.\n. Related: https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/591\n. Bump. Another user's comment:\n\nWhen I begin typing on the \u201cShare your story here\u201d field, first letter is not capitalized by default. Only the title is currently.\n. This has been addressed.\n. :shipit: \n. @diegoreymendez this update fixes the format bar issue nicely. One thing...when I run pod install on the example project again, it looks like Cocoapods wants to remove a file and update the project. Can we incorporate those updates into this PR?\n. :shipit:\n. @SergioEstevao Taking a look now...\n. So @SergioEstevao, this works well in my tests. :shipit: \n. Looks good @SergioEstevao :shipit: \n\nRef #544 \n. @diegoreymendez Like we chatted about offline, after profiling the editor with rangy in use, I saw the Selection Change Event dispatch take about 150ms every time it fired. I don't think this is something to be concerned with right now because the editor was very responsive on a variety of devices.\nGood patch! :shipit: \n. Note that there is a known selection issue with the closest word to the cursor (even though nothing is currently selected). You can see this here:\nhttps://cloudup.com/cBVo01m6JjE\nAs you can see, the selection disappears immediately. This appears to be an iOS bug that cannot be addressed right now.\n. Looks good @aerych :shipit: \n. > Any suggestions? I can't find any way to solve this problem.\n@vhikd are you asking about how to solve this from a development perspective or as an app user? \n. @vhikd Gotcha. \nWell, I would probably start with the suggestion @coreh made above - capture the compositionstart and compositionend events here and set a new flag which would restrict any additional input in the ZSSField when this flag is true. In terms of where to restrict input, this would be a good place to start looking.\nGood luck!\n. The linebreak we can address. However the shift that occurs when switching modes may be a little tougher because we are actually swapping from a UIWebView to a native UITextView. This feature: https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/335 would probably help matters.\n. @thinah We can play around with positioning and see if we can get things to line up better.\n. Ok @thianhlu & @meremagee I have a PR coming down the pipe that should help matters here. Note that part of the \"jumping\" y'all are seeing is due to the QuickType bar appearing in visual mode and not in HTML:\n\n\n. One more thing to note: in HTML mode the title is fixed whereas in Visual mode it is not. This will account for some of the scrolling differences between modes.\nRef: #335 \n. already done.\n. Just updating this with recent Slack conversation....this fix will land in WPiOS 5.1. Well test again on that internal.\n. I should mention that I did change the functions in Assets/wpsave.js and Assets/wpload.js a little bit. I added comments and a null check at the top of each function (in order to fix some bugs I was seeing in the editor).\n. awesome @diegoreymendez !\n. @SergioEstevao Just my style nit above, otherwise you are good to go! :shipit: \n. Closing in favor of #636 \n. @astralbodies has volunteered to test this PR on iOS7!\n:raised_hands: \n. @SergioEstevao I walked through all the code and it looks good \u2013 lots of clear comments and code. I would like to take a little bit more time to test on device and will report back here shortly.\n. @SergioEstevao you may want to run pod install again in the demo app. Looks like there are some updates.\n. @SergioEstevao just tested your latest stuff. Seems pretty solid. Were there any final todo's that you wanted to get done?\n. Ok @SergioEstevao, just ran through your latest. Let's do this! :shipit: \n. :boom: \n. Good idea from @astralbodies: instead of making the editor webview \"accessibility friendly\", perhaps automatically launch the legacy editor if voiceover is enabled.\n. @aerych. Good question. The issue we are running into with UIWebView/WKWebView as the foundation for the new editor is less than ideal accessibility (as compared to our previous 100% native implementation). So to me, the options are:\n1. Keep the legacy editor around so blind users can have a functional editor (to them).\n2. Deprecate and remove the legacy editor and do what we can with the new editor knowing it will be less than ideal (in visual mode).\n3. Consider forcing voiceover users into the HTML mode of the new editor (which is native) and improve that experience for them.\n@astralbodies do you have any thoughts here based on your chats with sight-impaired users?\n. > If we can confirm the accessible nature of the new editor...\nI will do this.\n. @SergioEstevao my vote would definitely be for either 2 or 3. I like 3 in that we just take care of it for the user. However, I am wondering it the type of user that would try to upload a TIFF (or whatever uncommon format) would be upset if we convert their file without warning.\nIf you held a :gun: to my head, I would say let's go with option 3.\n. :+1: \n. :shipit: \n. It is not possible...sorry.\n. Ahhh yes. This has been on our todo list forever. Nice job @SergioEstevao. \nIt looks like you may need to pod install the example project (the project file was dirty for me after I did so). Beyond that, I tested things and everything still seems to work. So a :shipit: from me.\n. :shipit: \n. @diegoreymendez I noticed that text is being removed when selecting both blockquoted and non-blockquoted text. Also looks like there are some rogue <span> tags making it into html mode:\nhttps://cloudup.com/czmPCusTHjb\n. @diegoreymendez were you ready for me to take another looksie at this?\n. @diegoreymendez Nah, I just appended \"WIP\" to the end of the PR title. Lemme know if you want/need any helps. :grinning: \n. @diegoreymendez when running through this I noticed the issue I described above still exists. Was this something you specifically fixed with the latest updates?\n. @diegoreymendez from the github issue noted at the top of the PR:\n\nwe're adding an extra br or blank line of sorts at the end of blockquotes. See this post published from wp-admin and how it renders on the mobile editor\n\nit looks like this is still happening (at least visually):\n\nWas this something that was going to be addressed in this PR?\n. Really nice work @diegoreymendez. Let me know your thoughts on some of my feedback.\n. > Yes it was. Although at this point I'd rather not tick that item as completed yet, and treat that issue in a different PR (to wrap this one up and start from scratch). Does that sound good to you?\n:+1: \n. Nice @diegoreymendez ! :shipit: \n. Hey @diegoreymendez I just noticed rangy 1.3 official just came out a few days ago. Looks like we are using 1.3 beta 2 here...might want to upgrade it. \n. :+1: \n. @diegoreymendez yeps! :shipit: \n. :shipit: \n. @SergioEstevao After you address my comment nit above, I say :shipit: \n. @meremagee is this bug about the inability to select a blockquote or the fact you cannot make one at all? If it's the latter, it will be fixed here: https://github.com/wordpress-mobile/WordPress-Editor-iOS/pull/622\n. Looks like this is fixed. Tested in latest internal.\n. Hey @diegoreymendez I gave this a run through and looked over the code. The code looks fine but I had a few questions regarding general usage.\n- Tests 1 and 2 worked like a champ. I really like this and wonder if there is any value in using this to check for the proper loading of other scripts.\n- The dialog that appears is obviously pretty noisy. Any thoughts on possibly disabling this on app store builds as a precaution? \n- Test 3 worked great. So helpful now.\n. :shipit: \n. Bump. Request from another user:\nhttps://twitter.com/ralfa/status/617806096716140544\n. Also ping @sendhil because the more, the merrier. \n. Ok @diegoreymendez the WPiOS test branch should be good to go.\nRef: https://github.com/wordpress-mobile/WordPress-iOS/pull/3550\n. @SergioEstevao do you think this could get fixed for 5.1?\n. :shipit: \n. :shipit: \n. :boom: \n. @skadithasan19 Unfortunately this exception is deep in Apple's stack and (seemingly) unrelated to our code. We are looking to swap out UIWebView with WKWebView in an upcoming release which, based on some preliminary tests, seems to address this issue. \n. Still happens in iOS 9 sadly.\nRef #260 \n. Looks like a nice little improvement @diegoreymendez. :shipit: \n. @SergioEstevao thanks for reviewing this.\n. Looks good @thianhlu. Prolly can take care of https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/640 as well in this issue.\n. Sure @thianhlu \n. Related: https://github.com/wordpress-mobile/WordPress-iOS/issues/4815\n. Sounds great @thianhlu !\n. Note: because of alpha channel issues with the UIToolbars + input accessory view we are holding off on implementing the chevron divider above.\n. @thianhlu I made issues for your points above: #679 & #680 \n. @thianhlu there may be an issue with the circular animation in the format bar. See: \n\nSince the toolbar buttons are square, portions of the animation will be clipped.\n. @thianhlu Still working out the exact animation imp...video will come shortly. However I think you can see the issue when you scrub the sample animation video above:\n\n...the initial outer circle is huge and overlaps neighboring icons.\n. @thianhlu here is a quick video of just the outer ring animation: \nhttps://cloudup.com/cHhbipOw1Qy\nThis is basically as big as I can go with that ring without clipping.\n. @thianhlu Here is another rough cut of the animation now with an inner circle that scales out and fades (initial color is still black):\nhttps://cloudup.com/cvNo0uRdB-K \nLots of levers we can pull here. :-) \n. @thianhlu Last update tonight :-)\nhttps://cloudup.com/ckvuNErkNu2\n. @Spacelapp I'm assuming you are referring to this line in the example app?\n. @Spacelapp It looks like you are using an earlier pod version v0.6 or older. In the latest editor pod (v0.7) that code no longer exists.\n. @Spacelapp I would suspect it is something in your local environment. Perhaps try deleting the Podfile.lock file and Pods directory and running pod install again or specifying the version number in your podFile...e.g. pod 'WordPress-iOS-Editor', '0.7'\n. Bump. Reported by another user:\n\nI started the upload, and while it was doing its thing I tapped on the title field and started typing \u2014 then boom, the image appeared.\n. @teemobean You could try setting self.editing = NO; in the viewDidLoad method of your class that subs WPEditorViewController. Then when you are ready to beginning editing, you can call startEditing.\n\nThe title field actually gains focus in JavaScript here.\n. Great to hear @teemobean!\n. Is this still an issue @SergioEstevao?\n. Thanks @diegoreymendez \n. @aerych Running the example app now and noticed the placeholder font for the title is Open Sans now:\n\nIs this by design?\n. @aerych I wasn't really aware these changes were coming (@thianhlu maybe you did). Is the new all-Merriweather aesthetic our new standard now?\n. Thanks for the info @mnt. @aerych it looks like we are defaulting the body text to 16px...do we need to change this to 14px?\n. @aerych The visual side looks good. You may want to also increase the size of the HTML title/placeholder to match the latest updates:\nhttps://cloudup.com/cJkrG0GYstJ\nVisual:\n\nHTML:\n\n. Word. :shipit: \n. All done!\n. Thanks @aerych. Fixes are forthcoming. Also I will ask @thianhlu about the proper selected state color.\n. @thianhlu what color would you like for the selected/pressed state on the format bar:\n\n?\n. @thianhlu also, what are your thoughts on speeding up the animation?\n(Current animation speed: https://cloudup.com/ckvuNErkNu2)\n. @aerych want to take another peek at this?\n. Thanks @aerych, I combed through everything and I'm pretty sure I got all of the .0s and fs. :wink: \n. Fixed.\n. Chevron is no longer needed...see #708 \n. Thanks @SergioEstevao. \nYeah The cropped link icon is by design with the updates from #675. @thianhlu increased the size of the icons themselves and the format bar now will scroll on any phone except the 6+. We are going to introduce another tooltip to point out the bar scrolls fwiw: #676 \n. The cropped link icon is by design with the updates from #675. @thianhlu increased the size of the icons themselves and the format bar now will scroll on any phone except the 6+. We are going to introduce another tooltip to point out the bar scrolls fwiw: #676 \n. Reopening this because @SergioEstevao noted some trouble scrolling the format bar on the 4s.\n. I like the idea of the drop shadow @thianhlu, but unfortunately, we are going to run into the same alpha issue as the chevron: #680. :iphone: :gun: \n. Should be fixed now.\n. Not sure what you are really asking for here @tinhbka. \n. @tinhbka If you are asking how to implement a custom input view on a UIWebVIew, we are not doing that in this project. We are using a custom input accessory view. See:\nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/blob/75fb2a143151ce6c9e255e5ee98527fe330a04ca/Classes/UIWebView%2BGUIFixes.m\nSince your question is more general, I would consider asking it on Stack Overflow or somewhere else similar.\n. \n. Fixed in #690 \n. Thanks @astralbodies !!\n. Thanks @astralbodies!\n\nAt some point I'd say whack the Pods directory from the sample project \n\nOn my todo list now. :-)\n. :shipit: \n. Tried to repro on iOS 9 and could not except when there was media below the fold. Because of this I am closing this issue in favor of #422. \nThanks for the report @barathank! \n. Ok @SergioEstevao I will look at the other PR. For this one, it's a :shipit: \n. Thanks @itsaboutcode \n. Thanks @RobinChao! \nIf I am understanding your question correctly, you are asking if it's possible to have the editor add custom HTML to to the format bar so the user can insert it by pressing a button. Unfortunately there is no built-in way to do this, however you could fork the editor and write the code yourself. Take a look at this:\nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/blob/1b614724fbc005be4346c7870498658c8b537267/Classes/WPEditorView.m#L1772-L1976\nwhen a format button is pressed, it calls into JS and one of these functions is subsequently executed:\nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/blob/1b614724fbc005be4346c7870498658c8b537267/Assets/ZSSRichTextEditor.js#L346-L554\nwhich adds the tag to your editor document. So to insert custom HTML, you would have to create a new function in JS that does what what you need, and then create a function that wraps it in Obj-C. \nHope this helps!\n. Thanks for reporting this @wongzigii \n. Word.\n/cc @meremagee \n. Just a few more images showing the editor in as the primary app with soft keyboard:\nSlide over:\n\nSplit view (1 third):\n\nSplit view (middle):\n\nIt seems like the most logical course of action (at least as a 1st step) is to refactor any logic that is explicitly driven by specific devices or orientation. In its place, we can take advantage of the size classes and trait collections that Apple recommends. \n\nSo in our situation, that would mean switching to the iPhone (aka compact) format bar and the iPad bar (aka Regular) when appropriate.\nAlso, we should see if it is possible to leverage autolayout in the input accessory view so the padding between format icons can be adjusted automagically:\n\n@thianhlu I am going to explore these ideas and let you know what I come up with. \n. Leaving an update here from an offline conversation. We have decided to use the current iPhone style format bar for the compact size and the current iPad format bar for the regular size:\n\n. No timeline on Cocoapods 0.38 support yet @KevinMartin.\n. Closing this issue in favor of #709 \n. cc @sendhil ...pleeeeeeeaaaaaseeee  \nyou are da :bomb: \n. @diegoreymendez Ok. You are going to have a lot of PRs coming your way. ;-)\n. @thianhlu would you mind providing a little more context for this issue? Perhaps a video?\n. Thanks @thianhlu! \nI am pretty sure this got closed out as one of those wack-a-mole bugs \u2014 fixing this would break something else. Now that the death of iOS7 support is on the horizon, we can revisit this again.\n. @diegoreymendez thanks for checking this out again!\n. :tada: :balloon: \n. @thianhlu Is this on device or the sim? Is there a reliable way to repro? \n. Tested this in develop on WPiOS \u2014 looks like the issue may not be occurring over there.\nhttps://cloudup.com/cPZAPiVa1dP\n(Targeting iOS9 only!)\n. @thianhlu I am going to close this issue for right now since this will be addressed in #708.\n. Needs to happen after #708 PR is integrated into WPiOS.\n. This has been addressed. Closing.\n. Thanks for reporting this @hammyhamza.  I am closing this issue since this feature request is captured in #496 .\n. @hammyhamza, pull requests are welcome. ;-)\n. Ref #728 ... Punch list for iOS 9 support:\n- [x] update the project files to iOS9\n- [x] Fix any outstanding warnings\n- [x] Pod updates\n- [x] Remove UIAlertView+Blocks\n. @diegoreymendez would you be able to review this PR?\n. @SergioEstevao I fixed the two issues you mentioned. Let me know if there is anything else. Thanks!\n. By popular demand, I will be busting up this PR into smaller ones. Stay tuned.\n/cc @diegoreymendez \n. Thanks for reporting this @hammyhamza. I am not sure if I am following you here. Pressing the bold button and then typing text seems to work on in the EditorDemo. Could you provide specific steps to repro?\n. @hammyhamza I am going to close this bug in favor of #411. Thanks!\n. Word!\n. Thanks @diegoreymendez \n. Thanks @diegoreymendez !\n. Could not repro FWIW. :boom: \n. :+1: :shipit: \n. @astralbodies I logged the rotation issue in #736. If you find anything related to it feel free to append comments/findings there.\n. Just as an update to a convo @astralbodies and I had offline, in testing on device he saw the format bar resize issue using the following steps (no rotation needed):\n1. Kill the app\n2. Launch full screen with keyboard showing.\n3. Home button out to main screen.\n4. Launch Notes.\n5. Swipe out 1/3 floating screen of EditorDemo - leave keyboard up (edited)\n6. Dock 1/3.\n7. Swipe out 1/2 screen. Keyboard should still be up, toolbar shows half compressed.\nNot able to repro on the sim. :-( Luckily I finally got my hands on a iPad Pro to check this out for myself.\n. @astralbodies that issue appears to be a function of our input acc view swizzling. Would you be ok with me logging that as a separate issue outside of this PR?\n. @astralbodies ok logged that issue in #740. Let me know if there is anything else you find.\n. Thanks @astralbodies !\n. This appears to be fixed in commit b9c72ad2d518bbb5ad2d6153f075d92515295fb0 as part of #735.\n:tada: \n. :shipit: \n. Thanks @koke. I needed to make sure all the 5.8 changes got merged in first. Sorry for the trouble. :-)\n. After an offline convo, @rachelmcr and I agreed to close this issue in favor of #411.\n. Thanks @astralbodies !\n. Nice work @koke.\n:shipit: \n. Ref https://github.com/wordpress-mobile/WordPress-iOS/issues/4427\n. @bagia This change works, but leaves a gap in the toolbar for whatever button is hid (as I am sure you know :smile: ). In the near future, we should probably user a Stack View which contains all the buttons to make this easier, but for now :shipit: \n. @bagia the 1.0 (1.0.1) release branches are baked for the WPiOS 5.8 release and won't see this change. So I would recommend directly referencing the commit hash you need for your feature. (Sorry if this was made clear in Slack already, just putting it here to be thorough :hamster: ).\n. ping @sendhil \n. @bagia thanks for adding this issue. Please feel free to post any updates (no matter how rough) to this issue when you are looking for some feedback. Text is great, pictures and video are even better :-)\n. > Now I'm more thinking about storing the resulting pictures on the device, and maybe upload them. This will need a more heavy-weight logic, but it is also increase the potential of the feature: you could take a photo from your camera roll, and then edit it with this feature: for instance circle things or draw on top of them...\nI :heart: this approach! (and also agree that the inline images will make for a large post model which will probably cause unforeseen issues)\n. Good stuff @bagia, post a video when you have something roughly working.\n. Ping @aerych just because we saw some weirdness with the post list too.\n. Commented to @diegoreymendez offline about this, just commenting here for posterity...in the demo app, the format bar accessory view does not appear on the iPad Pro:\n\n. Also just as a followup, I am not seeing the iPad Pro format bar in the WPiOS tester branch either:\n\n. @diegoreymendez I checked this out and it is no worse than what we had before. :grinning: In either case, the selection doesn't save for me.\n\nImages sometimes get stuck and can't be deleted but this is also true with the previous selection-saving method.\n\nIs there are way to repro this that you are aware of?\n. Gotcha...thanks for the video. I was expecting the selection to be saved coming back from editing an image :-) So looks good to me. :shipit: \n. Thanks @ReadmeCritic :grinning: :shipit: \n. Works as expected and code is square @diegoreymendez. As I was testing it, I was wondering about what you said in https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/722#issuecomment-184792626\n\nHowever if the user double taps on an existing word to add a link, closing the dialogue should probably maintain the previous selection. Thoughts?\n\nCould be a personal preference but in using this fix, it felt like the selection should always be dismissed and cursor placed right after the link. For grins I looked at what the web did when creating links with selected text and they dismiss the selection too. \u00af(\u30c4)/\u00af\nI could go either way tbh. Perhaps @rachelmcr has some strong opinions.\n\n. Looks good @diegoreymendez :shipit: \n. @diegoreymendez you are a machine! :shipit: \n. Sorry for the late reply! Works for me! (late :shipit: :grinning: )\n. Thanks for the issue @viettrungphan! I am going to close this one in favor of the #655.\n. Tested this pretty well and I can't find any issues introduced with this fix. Looks good not seeing the JS errors anymore! :-)\nNice fix @SergioEstevao :shipit: \n. @SergioEstevao Unfortunately, yes:\n\n. w00t! :shipit: \n. @koke if @mattmiklic is happy, I am happy. :-) Seriously, everything looks ok form my perspective, so if y'all are good with it :shipit: \n. :boom: \n. @SergioEstevao Ok, I tested this pretty thoroughly. The attribs are being set properly and images behave as expected in calypso and wp-admin. Code is square too. Nice fix!\n:shipit: \n. Nice work on this @SergioEstevao! So looking at the editor demo, 3 things strike me about the updated legacy editor toolbar:\n1) All of the buttons feel like they are always selected or on. I am wondering if we shouldn't default to the grey color used in the other toolbar and then have the WordPress blue come in when a user taps a button and revert back to the same grey. When working with previous designers on the new toolbar, it was a design goal to make sure the content takes priority when typing, not the toolbar. Seeing the blue buttons focuses my eye there. I understand the user will not be using the editors side-by-side to make such comparisons, but I think it may be something to consider:\n\n2) The toolbar button spacing seems unbalanced when in portrait mode on the 6 and 6 Plus. I know they are in groupings, which makes sense in landscape or bigger screens, I get a sense they are misaligned when pushed together more closely:\n\n3) On iPads, the icons and their groupings seem like they could be spread out a little bit more. Lots of whitespace:\niPad Pro:\n\niPad Retina:\n\nAs always, my disclaimer is that I am not a designer...I just play one on TV.\n. Another think I noticed @SergioEstevao is that when testing multitasking on the iPad pro, i was able to get the format bar to \"stick\" multiple times when resizing and rotating. This may be a bug for another PR, but wanted to note it here:\n\nI had a LOT of fun with the same issue here: https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/736 :grin: \n. @SergioEstevao the toolbar is looking better! It no longer gets stuck while multitasking, colors are more inline with the other toolbar, and the spacing between icons looks good on the 6 and 6 Plus:\n \nDid you want to have different background grays on the legacy and \"new\" toolbars? (I realize the appearance proxy settings in your WPiOS test branch may not be final.)\n. @SergioEstevao This is really coming together nice! There is 1 more visual nit to look at:\n\nI think there needs to be a little more upper & lower padding on the post title and more upper padding on the content body. It seems a little cramped (especially on an iPad Pro :grinning: ).\n. @SergioEstevao One other question for you...do you think we should make the font color black as well?\n. @SergioEstevao Code-wise I think you are in good shape \u2014 love all that red! Let me know your thoughts on the two questions above. Nice work!\n. Awesome sauce. SO I am going to give you a :shipit: and call out one thing you may or may not want to address:\n\nYou may want a little more breathing room (padding) above the content body. Do what you will. :+1: :v: \n. :boom: \n. ty @elibud and @diegoreymendez !. @SergioEstevao positioning does look good, but I am seeing a similar issue with the media button on the iPhone 8 (iPhone X looks good):\n\n<UIImageView: 0x7fae44135750; frame = (0 0; 35 44); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO;. @SergioEstevao The icon sizes look good and all display across multiple devices.\nHowever, I noticed there was extra padding on the bottom of the format bar when the keyboard first displays (this happened on both iOS 10 & 11, multiple devices):\n\nThe padding disappears when you dismiss the soft keyboard and then re-enable it.\n. @SergioEstevao really nice job keeping at this! \nOn the iPhone X, when the soft keyboard is not visible, the format bar is not tap-able:\n\nThis does not appear to be the case on iPads with a hardware keyboard (even when the shortcuts & predictive text bars are turned off). Sooooo, I am not sure if this is a showstopper or not, but I thought I would point it out.\n. Also, the bottom inset fix from your latest commit seems to have fixed that issue on both iOS 10 & 11! \ud83d\ude04 . @SergioEstevao Your latest commit fixed all of the issues seen on the X (plus it still works everywhere else). \ud83c\udf89 After addressing @frosty's comments above it's a :shipit: from me.. Buh bye Fastclick, we hardly new ye...\n. Just a style nit...we usually do not use file comments unless it's doc or API related. \n. Style issue again :grinning: \n. I think I agree with your comment here. Perhaps we should just wack this entire method. I d/l'ed your branch and commented out this entire method and could not see any adverse effects.\n. Is there a way we could do this now?\n. Assert :+1: \n. This pertains to my previous comment. Does it make sense to convert any random text in the pasteboard to a URL?\n. Whether :-)\n. Whether :-)\n. is isUsingiOS just here for debugging purposes? (So you can test drive this on the desktop?)\n. More of general question here...did you find that this approach worked consistently with mobile safari?\n. Why id?\n. I believe the general style we have now is not to use header comments\n. Wack the header comment\n. Is it worth putting this towards the top of the file?\n. Should we remove these debug lines or perhaps create an official \"debug mode\"?\n. Will the 320 literal work on an iPad?\n. Interesting fix. Is there an downside to calling this a lot while scrolling? (Performance, fps drop, memory, etc)\n. I had a buddy that always called a \"weak self\"  welf :grinning:  (weakSelf is fine.)\n. This is freakin awesome. I love this method! :heart: \n. Need to use a NSLocalizedString with hint.\n. Need to use a NSLocalizedString with hint.\n. :+1: \n. I can indeed! :see_no_evil: \n. Sigh... :-)\n. :+1: \n. :+1: \n. Why this image?\n. Is this the image we were supposed to use for the placeholder? (I can't remember)\n. Yeah I debated about doing that. I figured the shared pod would be updated eventually :-D  I'll make the update here.\n. :+1: \n. Love the title\n. No. :-D\nSo, @thianhlu wanted our title to be the same size as reader titles. I visually compared the two titles at various sizes and 18px in the web view seems to be the best match to 15px in native (in Merriweather bold)...\n. This is a tried and true regex I have used for years BUT I agree that what you suggest is cleaner. I will make it happen.\n. I'll bust it up in to separate methods.\n. Is there any other kind of garbage? :trollface: \n. :+1: \n. spelling mistake? getJoinedFocusedFieldIdAndCaretArguments\n. spelling mistake? getJoinedFocusedFieldIdAndCaretArguments\n. spelling mistake? getJoinedFocusedFieldIdAndCaretArguments\n. spelling mistake? getJoinedFocusedFieldIdAndCaretArguments\n. Any chance of SSL URLs burning us here?\n. Hooray! :tada: \n. Just a style nit...no file headers typically :cake: \n. Same nit as above...file header...\n. file header... :tada: \n. Love to see all this red! :+1: \n. Nice job removing this...I always hated it.\n. I agree with your logic here. As long as we have a near term goal to migrate this logic the the Shared pod, I am cool with it.\n. @diegoreymendez Yeah, I was just being cautious..all those years of Java dev I guess ;-) I can remove the guard.\n. I think there might be an issue here if the user adds an image outside of our app (e.g. using the media picker on the web).  If the image element does not have an id, the ID selector won't find anything. A good example of this is trying to delete our \"cowboy cat\" picture in the demo app.\nFor reference, I just created a post on the web and inserted an image from the media library...this was the HTML (no id):\nhtml\n<img class=\"alignnone size-medium wp-image-1156\" src=\"https://bummypublic.files.wordpress.com/2014/12/img_00053.jpg?w=300\" alt=\"IMG_0005\" width=\"300\" height=\"199\" />\nWe may have to come up with a more sophisticated way to find the image we want to delete OR perhaps create IDs for images that are missing them when the user loads the post into the editor...\n. Ok. Seeing the function name ZSSEditor.removeImage made me think more generally in that there are use cases where this method would fail silently.\n. To avoid confusion, maybe you could add some quick logic to suppress the action sheet if imageId is nil or empty.\n. I will fix...not sure how that changed actually :-/\n. These two issues are the same one :-)\n. :+1: \n. @aerych did you die a little inside because you used a \"k\" before a constant name? :grinning:\n. Make sense to me...change forth coming\n. I will fix\n. I always thought nodeName returned the name in uppercase. Better safe than sorry I suppose...\nhttp://ejohn.org/blog/nodename-case-sensitivity/\n. @diegoreymendez  always has the descriptive comments :grinning: \n. Sigh. I am beginning to get tired of dealing with the web view. :disappointed: \n. Does this need to be a larger value for crisper edges?\n. This works for me. I think my obtuse approach was the result of late-night coding. :wink: \n. :+1: \n. :+1: \n. :+1: \n. What are your thoughts on moving this to WPDeviceIdentification as a stand-alone method?\n. :weary: nice job with finding this.  I swear we need a blog post that enumerates all of the workarounds we have done!\n. Status: VERIFIED WONTFIX\nHeh.\n. :cop: Style Police...would you mind putting a @brief above this function?\n. Missing semi colon\n. Missing semi colon\n. I was going to mention that you forgot the semi-colon, but it looks like it is auto-inserted for ya. :-)\n. Works for me, I'll make this change.\n. Just a style nit. Would you mind spacing this out a little bit, like:\njavascript\nvar linkTag = '<a href=\"' + imageNode.attr(\"src\") + '\"></a>';\n. Update the comment? :-)\n. Another style nit: newline after 100 chars\n. s/descriptuon/description\n. @SergioEstevao what is this code working around? If it was not here, does a touch event exhibit strange behavior?\n. :+1: \n. @SergioEstevao since these 3 lines are repeated above (1051-1053), is there a way we could simplify this?\n. @SergioEstevao Could you put a descriptive comment in here to explain why this delay is being introduced?\n. @SergioEstevao we used the callback through iframe trick to help avoid callbacks getting lost (WPHybridCallbacker.prototype.callbackThroughIFrame). Did you see evidence of this occurring?\n. Sounds good @SergioEstevao .\n. Could we describe in a little more detail what kind of check we are performing in this function?\n. Could you put a @brief and/or @details comment here?\n. Is this function still being used?\n. Yeps habit is in play here too. I'lll fix.\n. Was this the root cause of the crasher before (posterURL was nil)?\n. Good catch @SergioEstevao..will fix.\n. :tada: \n. Formatting issue? ^\n. Good add @SergioEstevao! Works great on the iPad Pro with multitasking and rotation.\n. :heart:  this approach.\n. Maybe add a descriptive TODO: or other comment here reminding us about the shared pod dependency being removed?. Maybe add a descriptive TODO: or other comment here reminding us about the shared pod dependency being removed?. @SergioEstevao For posterity, could you put a quick comment here about why this is used?. ",
    "thianhlu": "Yup all depends on if we add or remove options from the wysiwyg. We will most definitely make tiny adjustments to even out height and spacing of individual icons. \nThe plus button is a placeholder for right now. \nTags will be very similar to simplenote. specific requirements will be broken down into their own issues\n. closing\n. updated\n. Re: the weight of the font. I want to use Medium/Semi-bold for the primary action button on our pages. Apple recommends not using Bold but I would like to follow the UI recommendations when it comes to distinguishing the primary buttons (just like Mail app on ios. like the Send btn).\nRe: opacity. Thats fine with me. \n. \n\n. Yup, just the weight change for primary actions and yes the weight is the same whether its active or not.\n. Updated ^ to reflect new bar and btns.\nWe need to use the icons for Close and Cancel to make space for blog picker on multi-site users. Since our first go around will only be new users, they prob wont see the blog picker anyways but we need to put it in there.\n. done by diego\n. closing for now, out of scope\n. Yeah good call, let call it what it is which is just another view.\n. So Meredith got a bunch of data around clicks (inside of the editor) and the resulting html tags in the post output for a date range. The main goal was to see if we could remove certain buttons from iOS - iPhone WSYIWYG bar while adding in one for adding media.\n\nSome findings:\n- Bold, Italics and Anchor tags are the most used formatting tags in terms of clicks as well as output. \n- There were a lot of clicks on the More button but our findings show that we also changed the \"more button from text, saying \"More\" on the secondary nav to a hamburger-like icon on the single nav. Since the resulting HTML tag output was quite low, our assumption is that people clicked on this new icon thinking it was a second nav. Once they found out it wasn't, they removed the more tag since the tag count is so low relative to the clicks.\n- The best combination is to drop del and more and add the add image and ul on iphone. While on ipad we can include more such as del, more, ol, align-left, align-right and align-center\n- It is kind of pain to compile all this data. We need to make sure we are capturing events and resulting output somewhere for this editor.\n. closing\n. This is a feature request right? Let's hold off when we tackle all the media stuff after editor.\n. seems like we use a combination of dashicons, noticons and custom icons inside of ios. Im going to use noticons as a baseline and tweak them for our app.\n. \ndownload icons from here: https://cloudup.com/cAZp6443EAd\n*note we will have to see if this spacing is a good on ipad. We will most likely right align them like google does\n. No touched state since these are page links\n. dup\n. moving to 4.5\n. I haven't done this one yet :) \n. WIP\n\nFigured with the additional real estate on the toolbar we can group logical options together and use white space to separate them. We can also add more if we want like justification stuff, etc.\n- playing around with bumping font size and title size\n- displaying this as a modal\n. - [x] Toolbar spacing. With additional width below, the only changes are we will center the bar horizontally and add some margin (80px width per icon, 20px margin between icons if they are next to eachother and 80px spacing between sections) according to this image: https://cloudup.com/cnR_dJ473mu\n- [x] Navbar spacing. Tweaks to spacing with additional width. See here: https://cloudup.com/cKYx-8sxFEx  related to #264\n- [x] Post area.\n  - Post Title font-size 36px\n  - Line-height 56px\n  - Body text font-size 36px\n  - Width of body (~90characters) = 1120px\n  - Post title & post body divider is different from iphone = 1120px\n@2x\nAt this point just doing small styling adjustments since large scale changes would come down the line in Calypso.\n. cool animation:\nhttp://codepen.io/andreasstorm/full/AnjHk/\n. closing for something more specific\n. This will be fixed by #109 \n. duplicate, closing\n. This is being addressed.\n. Let's investigate trying to pre-load/fetch content in 4.5, closing\n. closing for new issue\n. https://cloudup.com/cfuOCxEUJpU\nWIP\n. Things we trying to figure out:\n- Replicate a similar experience to Android flow where users clicks an existing post from Post_list and goes into a reader like preview. The user would then click Edit to change something.\n- Remove the interim step of Edit that exists today. User should be put directly into editing the post and have all the options on that screen. \n- Add an HTML/Visual Toggle\n- This would most likely be for users iOS 7 + \n- New users would be able to edit posts and create new posts in the new WSIWYG.\n- Depending on complexity, editing existing posts for current users would probably put them only in HTML edit mode.\n. closing\n. opensans \n. duplicate, related to #65\n. not relevant anymore\n. @bummytime Can you scope out this issue and make a list of the differences so we can see how far off we are\n. Looks really good.\n- [ ] suppress all &nbsp;\n. Posts generated on WP-admin (web). Add a post that has a line breaks (pressing return). On WP-admin, the UI creates a <p> which also maps to Visual Mode. If you open this same post on Mobile-editor, it does not display the line break on our visual/default mode but it does on the HTML mode. Sadly it does not display the  <p> either.\n- [ ] Make sure we are properly handling paragraphs created in WP-admin Text mode. The HTML that is saved down should provide us with the proper <p> to render in our Mobile editor (visual & html)\n. Yup will do, working on a video to show you first.\n. Animation to Edit_Post\nhttps://cloudup.com/cmrKyelX1VE\nSlight flash of the header bar is intended.\n. actually this is perfect. only tweak that would be nice if we can delay or separate the toolbar animation from the keyboard. \n. Sounds good. Lets close and ill open a new one for 4.5\n. Yup keyboard always up\n. Button taps example\nhttps://cloudup.com/cnPWUeUOQBa\n. \nPost btn is disabled when the post is empty.\n. related to #130 \n. - [ ] Styling of code editor\n- [ ] page transition from html to visual\n. \nfont-family: menlo\n. Animation: https://cloudup.com/c56DysD6r2W\nSlight animation with thin line is intended.\ncc @bummytime \n. this looks good, ill open up specific issues for styling and spacing\n. closing since we have #169 \n. - [ ] Active state is now blue, redo all icons\n. \n- Media, link, unlink, strike-thru are new\n- list, num list and underline have been adjusted\n- cap-heights now all consistent\nI need to clean them up and export them in 40_40 and 80_80 for default and high-light state.\n. updated icons\nhttps://cloudup.com/cuapovMJQs8\nExcept for HTML button, still working on that one\n. @thianhlu you may need to resize preview and option icons\n. HTML button\nhttps://cloudup.com/cM7kp0P6fwh\n. Cog and Preview are 30_30 and 60_60.\nhttps://cloudup.com/cvnYU4C1HUn\n. Also we dont need extra margin on the buttons. The pngs have the same spacing as you requested. 40*40\n. closing\n. Note:\n- We need to make sure we track New post starts, saves, to publish flow.\n- btn clicks on all toolbar options\n. Closing, we have specific issues now\n. Yup correct, only new iOS accounts get the new editor\n. hahah yup\n. - People who sign up for WP on iOS app will be using the new Editor for New Posts and Editing Posts\n- All existing iOS users and people who already had a WP account that just installed the iOS app will be using the existing editor.\n. also we can remove that word suggestion area.\n. related to #139\n. closing since we have specific fix in #139 \n. Specifically, it shouldn't show HTML in the Reader/Post Preview\n. So @bummytime \nFor existing posts, picker is gone.\nFor new posts, I'll create something really minimal. \nI also have updated icons for preview and option, as well as spacing between on the mock #114\n. ###### New post with only one blog\n\n- We will leave menu bar area blank if its New and you only have one blog, which should be the most common situation. \nNew post with on an account with multiple blogs\n\n- Note that it if you are inside of a Blog already, it should pre-select the right blog just like on WP iOS right now.\n- Same font size and weight as the Done Button. Also we have that little arrow already in the repo\nEditing existing post\n\n. @diegoreymendez @bummytime icons needed to be updated cause I didnt realize we changed the base colors in the iOS app.\nhttps://cloudup.com/cI3HjMjjKsc\n. In case its not clear, the Link btn toggles to the Unlink btn\n. Lets replace with Remove link and if user taps Link address in Edit mode, display that modal again\n. https://cloudup.com/cM026TUMbPD\ncc @diegoreymendez and @bummytime \nmoving to 4.5\n. adding in bummys note \n@thianhlu Another thing to consider is the media upload spinner we currently have in the nav bar:\nhttps://cloudup.com/cAumXv-djr5\nIf you tap the spinner while it is visible, it gives the user the option of canceling the upload. (Relates to #75)\n. Title getting cut off \n. closing\n. Eric also reported this:\nTap a post to view its detail.  Tap Edit.  Make a change to the title.  The Update button is still disabled. \n. mere is right. its unlink for this one\n. updated cc @bummytime @diegoreymendez \n. @thianhlu need X asset\n. @bummytime #137 has the updated X icon as well. I have also updated the inactive color of the links.\n. Meaning we can't get rid of it? Since this is a different state of the nav bar I would like to remove or change it to the same color as the nav bar\n. @bummytime great news. Chatted with Dave and this was already an outstanding issue. https://github.com/wordpress-mobile/WordPress-iOS/issues/1928\nLets change the 1px bar color in the entire WPiOS app to #007eb1\n. @bummytime @diegoreymendez Do you think we should collapse toolbar if user is editing title? \n. Agreed. adding to list above ^\n. Sorry about that, I was listing everything @2x. So I want the bar at 40px and the divider at 28px ( I had it wrong before)\n. yup center it vertically so there is 6px above and below\n. Related to #171 and #282\n. Great catch, lets use the exact size as the reader.\n. Ohhh, so it was at 2x sizes. Try 18px and 16px and see which one looks better\n. related #103\n. Looks awesome! Yeah lets add in Post title there as well\n. Sounds good. Can you create a new issue ^\n. Sounds good. Moving to 4.5\n. K, show them disabled then.\n. Moving this back into 4.8, we are gonna need to do this one\n. closing\n. Post title area is currently fixed on the screen (sticky). It should be just like the Post content area and flow under the nav bar.\n@thianhlu related to #171\n. Perfect and sounds good\n. Similar issue reported:\nTap a post with not content to view its detail. Tap edit. Tap into the content to make a change.  Note that the cursor is inserted after the placeholder, so the placeholder is treated as part of the post content.  Notice also that the text remains placeholder \u201cgrey\u201d.\n. Additional ppl having this issue without the img\n. WIP\n\n. \nRight now we will only use the tip on the Edit button for new users. Animation here:\nhttps://cloudup.com/cNDC4QK6fZ7\nUsers can dismiss the tip by clicking anywhere on the screen including the Edit button. It only shows once upon the first time they go into an existing post.\n. This will need to be completed at the beginning of 4.7\n. open-sans, 12pt, light (which we may not use so regular should be fine).\nwp-dark-gray: #324155\n. @diegoreymendez lets go with #1. Let make sure we only display on Updating a link rather than new link like your example.\n. \nbreaks\n\nalso posted on #241 \n. Related issue:\nTap the Edit button on the tab bar to invoke the modal editor.  Type some text.  Tap the x to dismiss the editor.  The editor remains visible and there is no way for me to discard it without submitting the post.  Seems related to the issue above.  Only seems to happen if I\u2019ve made an edit.  Opening and dismissing the editor works if I make no other changes. \n. @bummytime I think we need to do some basic validation. If there is no TLD, add .com; if user enters in cnn.com, we prepend http://\n@diegoreymendez If user doesn't have text selected and adds a link without \"Text to display\", you can just add in Link\n. So the current implementation is similar to what we have production. If the post is Published, it then can render the themed preview, if not it gives the simple one.\nIn 4.5, let's explore a way to render a themed one before a user publishes.\n. No action, closing since details are in #153 \n. moving to 4.7\n. If this is the case. Set the cursor back to the top of the content if user switches back to Visual.\n. I'll define the exact line height and paragraph margin shortly\n\nOn Sep 20, 2014, at 11:23 AM, Diego Rey Mendez notifications@github.com wrote:\nWe're currently handling returns by adding  tags around the new line. This is not looking weird in the new editor, so it could be a good idea to change the global style for paragraph tags to reduce the spacing between them.\nThere's also a problem with the first line changing position when you tap return.\nHere's a video showing the problem.\n\u2014\nReply to this email directly or view it on GitHub.\n. Body > p\nfont: 16px 'open sans'\nline-height: 24px or 1.5em\nmargin-bottom: 24px\n\n@1x\nI will be re-adding a separator between title and post so the gap will look much better\n. related to #171\n. related to #153\n. @2x\n\n\n. Nice find. We will address this.\n. nice! Conditional warnings are a good route.\nCan we see if we can keep it within 100-110 characters? maybe like:\nChanging sites will preserve the post, but you will need to re-add your categories. Are you sure?\n@bummytime @diegoreymendez  Why would images be lost, can we keep them?\n. @bummytime roger. seems like low hanging fruit that we can address when we do the media stuff.\n. Looks awesome. Lets go with:\n- Choosing a different site will keep text, but you will need to add your image(s) again. Are you sure? \n- Choosing a different site will keep text, but you will need to add categories again. Are you sure? \n- Choosing a different site will keep text, but you will need to add media and categories again. Are you sure?\n. We are using same eye as current prod iOS. Closing for now since we will address later on when we review icons.\n. related to #4 \n. Using 'open-sans'\n. \n. By removing underline and implementing these changes we can prob remove horizontal scroll\n. Awesome @bummytime !\n. Note: Post title is the placeholder for Title. \n. I'll create one today that is similar to the one on the other editor project. Are we able to immediately get the dimensions of the image?\n. So we store the image client side. Do we need a placeholder on the editor itself? Or only for the blog post if upload isnt done?\n. Ah, perfect.\n. Something for now. Will most likely do tap to download and progress in later iterations. I will export pngs and clean up spacing but this should give you an idea.\n\n\n. Let's keep the blocking alert for now. Let's change the text.\nYou are currently uploading media. Please wait until this completes.\n. Out of scope for next 2 releases, closing for now.\n. Amazing!\n. @meremagee any chance we can nail down a specific set up key strokes?\n. @diegoreymendez Can you take a quick peek at this one to gauge the effort required\n. @diegoreymendez Is this definitely fixed?\n. Also happens when switching from html mode to visual mode if the cursor is on first line\n. Note: Post title will not be fixed after this change.\n. Sounds good, moving out of this milestone\n. looks perfect\n. @bummytime Can we change the nav bar text to just \"Uploading\" + spinner \nQuestion: After acknowledging the modal, it seems like upload takes even longer, any reason why?\nQuestion: Instead of this, could we implement an option inside of modal to cancel upload?\n. @bummytime Let's make the nav updates ^\nAlso, lets combine the blocking modal and the cancel uploads modal into one. This will make it really clear.\nConfirm Navigation\nYou are currently uploading media. This will cancel the uploads in progress. Are you sure?\nNot now / Yes\n. Few more tweaks:\nCan we change title to \"Confirm Navigation\"\nChange \"this will\" to \"this action will\"\nCan we put \"Are you sure?\" on its own line. \u00a0\n. nah wait till you turn it into a webview in 4.7\n. video here:\nhttps://lookback.io/watch/PK9JdDwFuWGhY5Bqw\n. This is related to all the work @SergioEstevao is doing.\n. @SergioEstevao Perhaps we can leverage the same alert that @bummytime is working on #406\n. @SergioEstevao sounds good. Can we add retry then? Upload failed, tap to\nretry\nOn Tue, Dec 9, 2014 at 12:27 AM, S\u00e9rgio Est\u00eav\u00e3o notifications@github.com\nwrote:\n\n@Thianlu I was thinking more in a overlay on top of the image saying that\nit failed. Don't want to show an alert for each failed image.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/361#issuecomment-66249000\n.\n. Good point, probably better to with very little text. \n\nwe can do something like this\n- since we are applying a filter, if it fails we should change color of progress bar and dim things a bit.\n  \n. Do you want 1x, 2x, 3x or SVG? @bummytime @diegoreymendez do we use retry image anywhere in the app?\n. Lets use the Google icon for now since we don't have one part of the noticons or dashicons pack.\nHere is the SVG, https://cloudup.com/coj_EkvGk7U\nI applied a tiny drop shadow on the text and icon:\nbox-shadow: 0px 1px 1px 0px rgba(0,0,0,0.20);\n. @SergioEstevao \nfont-size: 24pt;\nfont-family: 'open-sans';\nfont-weight: 600\nSVG is 48*48 but we make bigger if it looks too small\n. @bummytime \nhere are the icons \nhttps://cloudup.com/cV6g9AMSqsH\nFew things to note:\n- Removed underline and unlink from icon pack\n- Sizing has been tweaked on toolbar icons to same icon grid, backgrounds are same size as always\n- @3x icons included\n- Nav bar icons are now on 44 * 44 backgrounds\n. Closing for now.\n. @bummytime can you see if this is an easy fix? \n. @bummytime can you double check. We fixed this with #167\n. @meremagee Can you confirm if this is a change from current 4.5 behavior.\n. Yup not a bug but I would like to address this by adding some confirmation alerts. This will help the folks who like seeing the post list for confirmation that \"its there\".\n\n\n\n@bummytime you can use the icon you have been using in the visual editor one.\n. Looks awesome, a few tweaks\n- Change color to #324155 (WP dark blue) and opacity: .95\n- Add 10pt padding-top and padding-bottom\n. moving to 4.7\n. no longer an issue\n. Looks great! Some suggestions:\n- I would suggest having the progress bar directly attached to the image.\n- I made the bar 2px taller and rounded the end. Also updated the color to the wp blue\n- I would also make the image transparent and make it full opaque once the image is done uploading.\n\n. Just taking a look, we should probably implement something similar to Post Options and retain that same look and feel for consistency. The main thing I'll take a look at is having a state where users can tap the image (select it) then see an option to see image settings. More to come...\n@meremagee for sanity check, can you:\n- Do a quick sweep of the inputs we have already in the iOS app (e.g. post settings).\n- Also, lets compile a list of the image options usage. Would like to see how often it is being used, doesn't have to be too comprehensive. \n. @aerych @meremagee WIP\nhttps://cloudup.com/cFvBfPhdY3q\nSome things we will need to review:\n- Do all these options make sense on mobile. In some cases we see the app as a supplement to the web vs in some cases we treat it as mobile only experience. A great example is image size which the user will never be able to truly preview so it may be confusing to some and helpful for others.\n- I did not include url to image since its not editable on wp-admin anyways.\n- I think we are all on the same page to not include any of the shortcode, meta on the visual view, only HTML view\n- Its probably best to re-use the same inputs and look at feel of the current options page. I did a real quick example of this in the video ^. I changed the spacing as well make the font-size a tad smaller on the form inputs. In this example, the text would be right aligned like what we have now. We could also try another type of input that is more iOS'ish that uses the placeholder and you type over it but this would mean reviewing all inputs throughout the app and updating them......\n- Tapping the image would reveal the Edit option. Tapping on another part of the page or another part of the image would dismiss this. Not even sure if Edit is even the right language to use.\n- I only used the stuff we currently have in wp-admin and grouped them in the same manner.\n- I'm using the same style as the upload mock for Sergios project except I added background blur. If we go with this then lets update that style as well.\n. @aerych I will update with pencil icon as well as putting thumbnail in the options screen. \n. @aerych you wanted something like this?\n\n. Yup sorry haven't done either yet. I will provide an updated version today.\n. @aerych @bummytime \nWith image at top. \n\nPerhaps we display both text and icon on large images and just the icon on smaller images. I needed to add the circle cause the pencil by itself felt out of place and odd. lmk\n\n. Sounds good @aerych. Also @bummytime mentioned we should keep this design similar to Image upload retry if we plan to keep the circle with icon.\n. @aerych here is svg https://cloudup.com/cmd2cAga83A\ncheck out #474\n. @bummytime give these a whirl\nhttps://cloudup.com/c7b_n0vFnbP\n. @diegoreymendez Just make the post button disabled in this edge case\n. dup of #367 \n. We are trying to achieve two things with this feature. We want to introduce active/existing users of the app to the new & improved editor by showing them some feature onboarding so this comes as no surprise. The other main goal is showing users who do not post but did upgrade the app an encouraging onboarding to see if we can get them posting again.\nWIP - We can do this many different ways but here is an example of a really slim onboarding. We would show a different message based on if they are active or not. Ignore the placeholder content.\n\n- Note we would prob get rid of \"Edit\" tip we have implemented in this case.\nOr we can do something larger with more information like \n\nOr we can do a full screen one but rather not since we prob want to reserve that for full new user onboarding.\ncc @meremagee @bummytime \n. Ignore color of the tip as well, we can change that\n. K chatted with @bummytime \nWe are gonna ditch the tooltip/call to action version and just do the modal. Also, we are keeping the tip. updated mock to come\n. \n@meremagee We will need better copy for this modal. Possibly new image depending on copy.\n@bummytime We will be displaying this upon open of the app after upgrade. Do not show to new users who have visual editor already enabled. Also, keep edit tip in place.\n. WIP let me know if you guys like it and I'll clean it up and make svg\n\n. \n. - The button is the same right? I'm ok with either. I would like to go the new asset cause it looks visually more appealing and we can use the same asset if we do an email.\n- Is the overlay lighter that usual or is that the default one? If so, make the separator line a bit lighter. Is it possible to do 0.5px line?\n- @meremagee For the copy...Instead of \"This version of the WordPress app\" can we try \"This update of the Wordpress iOS app\"\n. Awesome\n1) Lets change popup image. Here is are the images up to 3x: https://cloudup.com/cUj6itrkwMx\n2) Make the 0.5px line\n3) Use the latest text by mere \"The WordPress app for iOS now includes a beautiful new visual editor. Try it out by creating a new post.\"\nQuestion: If the user updates WP iOS then opens the app, sees onboarding but immediately closes the app. Let's make sure they see the onboarding again until they take \"Great, thanks\"\n. Not enough space on iPhone to do this right? Yeah logical grouping is nice.\n. So the one in #427 and this one will prob end up the same. But really nothing to do other than make the background tint darker and blur the image a bit. There is also a slight drop-shadow on the text.\nIf they are doing it with css, you can do it with -webkit-filter: blur and -webkit-filter: grayscale\n. \nLet's try:\nBackground\n-webkit-filter: blur(4px) grayscale(0.3);\nCan we try and clip the borders/edges so they are not blurred? We would probably have to put inside a div like (http://stackoverflow.com/questions/12224320/defined-edges-with-css3-filter-blur).\nFailed text\ntext-shadow: 0 1px 2px rgba(0,0,0,.06);\nfont-size: 20px\nRetry Icon\nopacity: 0.9;\nbackground: #FFFFFF;\nheight: 54px\nwidth 54px\nRetry Icon circle\nopacity: 0.9;\nborder: 4px solid #FFFFFF;\n-webkit-border-radius: 60px\nheight: 120px\nwidth 120px\nNote we are going to use this same one on #427 cc @aerych \n. @bummytime looks great! You should also add a bit more padding on the right side next to the HTML bar so it evens out on both sides.\n. @diegoreymendez \nFor logo: add 36px above and below.\nUnder copy: add 36px spacing below\nThin gray bar: 0.5px (let's see how that looks) as well as change color to #d2dee6 (WP Medium Gray)\nGreat thanks: Let's increase font-size to 16px (different than what i provided in mock)\nOtherwise looks awesome\n. good call\n. Lots of the copy you have for the blog post can be re-used here, its very concise and valuable info.\nLets do all users who not yet updated to 4.8 ~ 1wk after release. We would have one call to action which would bring them to itunes app store to upgrade. We will want to track clicks then ultimately upgrades just to see how these perform.\nExtra bonus points if we can segment users like:\n4.7\n4.6\n4.5\n4.0-4.4\n< 3.9\nMight be interesting to see and tweak emails for those groups but no worries if its too complicated.\n. Few questions/comments:\n- Email subject is \"New Visual Editor\"? Change this to something that is more descriptive and actionable. Something like \"Update your WordPress mobile app\"\n- The copy seems almost too short. We aren't really saying anything compelling to give users a reason to update their app. Can we add back in some of your text from ^.\n- Let's not use the term iOS in this email. Better to use iPhone.\n- Email will need a graphic whether it be the animation you mentioned or the image we used in the onboarding. Big concern here is the image/gif should not be too large (file size wise).\n- Width looks fine, just double check character count by line. Less than 70?\n- Update app button is too wide. Max-width on that should be similar to width on the phone. \n- Is the template responsive? \n- Are we restricted to only this template? The header bar is quite tall and overwhelms the rest of the email. \n- Triple check that this isn't going out to anyone that has already updated the app, new users that already have it and that the list contains only unique emails.\n. What's the latest look like?\n. Sizing and spacing seem a bit off and it is my fault cause I was giving some of those measurements above in @2x. Completely my fault.\nWe should simplify a bit and have only the 2 breakpoints for now. \n- For small, you can keep the same with just the label.\n- For large and mid, they would be the same as @SergioEstevao latest version. You can use the same SVG sizing for circle as #559 like \n  \n. Can you attach a screengrab?\n. Looks awesome @SergioEstevao \nCan you add some space between the icon and Failed label. You can use the same spacing that @aerych is using on Edit Image\n. Sorry to nit. Can you move retry icon down 1px within the circle border. \nAlso instructions (circle and label) are meant to be centered vertically and horizontally within the image overlay. I believe @aerych has this logic/spacing already implemented, can we leverage his otherwise I can provide exact spacing later today. cc @meremagee \n. I meant 1px, updated comment above ^\n. Looks great @SergioEstevao \n. No perfect answer for this due to the orientation of the icon. If we move @aerych new version over 1px to the left, I think it looks great. like so\n\n. thanks @bummytime \n. nice find @bummytime \n. Yup, lets make note and continue to compile all the feedback requests and then prioritize them. In this case we can do a few things like slide the toolbar back up when user goes to the post body.\n. Specifically, the Post title is shifting down 1px and the linebreak/hr is shifting up 1px and darkening. \n. Dumb question but can't we place them in the exact same location x, y wise so the post title stays in same spot? Or are we adding in some padding on the uiview that we cant really add in the uitextview\n. related to #600\n. @SergioEstevao good idea! We could add a selector like the alignment option or just prefill with the media file url and have it preselected upon tap so they can quickly erase or write over with their custom url\n. Looks really good @SergioEstevao \nGood point on the Edit icon. We could keep the video player looking like this \n\nand still have that same interaction?\ncc @bummytime \n. @SergioEstevao It would be cool if we can always display a frame from the video on the UI and reuse the same UI as failed, uploading. Using a dashicon in this example.\n\n. In the case we dont have a frame we can display gray BG with the message above\n. Using the wp dark gray\n\n. If you prefer something more lightweight, we were going to do something like #293 which is nice when we have no idea how big it will be or if we want it to be less prominent on the UI.\n. I can do either. Want me to do vector in PDF or SVG?\n. Chatted with @drw158 and he may have some bandwidth for a better icon. \nOtherwise we will use dashicon here, https://github.com/melchoyce/dashicons/blob/master/svg/format-video.svg\n. WP Gray Dark\n2e4453\n. @drw158 maybe something like this?\n\n. K on it.\n. \n@bummytime thoughts?\nIm gonna redo our icons on 4444.\n. @bummytime it appears it was just the X and chevron back icon are on 3030. Do you want this on 44?\n. @bummytime updated icons on 44*44\nhttps://cloudup.com/cu1cPa1nJZ4\n. Re: disabled state. So right now the lightest Gray we have in the style guide we have is Gray Light.\nOption 1:\n- background-color: Gray Light\n- color: Gray Lighten 30\n  \n- Too light and not enough contrast\nOption 2:\n- background-color: Gray Light\n- color: Gray Lighten 20\n  \n- Too much contrast, no longer looks disabled\nOption 3:\n- background-color: Gray Light at 0.5 opacity\n- color: Gray Lighten 30\n  \n- Strikes the best balance but not \"officially\" part of style guide since its a derivative of Gray Light. This is by far the best route to go. Use hex #F9FBFC so content doesn't bleed under.\ncc @bummytime \n. @bummytime A few notes for this one:\n- Let's increase the height of the separator/divider to 34\n- We can leave the chevron out for now and break out into a separate issue. We will still try and implement this on the Android side of things.\n- Are we using the icon for the HTML button? We prob had a reason I'm forgetting. \n. Closing @bummytime took care of all the issues\n. Can you upload a video? The animation fades out near the edges so maybe it wont be a big issue.\n. Changes look really great @bummytime. This is good to go. Thanks!\n. I wasn't aware. @aerych Are you changing the reader to display Merriweather as well? If not, I'm not sure what prompted the change cause we would want to keep the two (display and creation) in sync. We initially had Merriweather in early mocks but we changed to open-sans because of the reader.\nAlso is this just simply a font swap or are you making adjustment so we keep similar x-heights and line-heights?\n. - [x] @thianhlu Add Chevron image\n. @bummytime here is svg and PDF (includes vector).\nhttps://cloudup.com/cZhdbyqhYW0\nLet me know if you want me to export with shadow or apply programmatically. Also, do you want me to export in black/white and use tint to apply correct color.\n. CSS for shadow is:\nbox-shadow: -1px 0px 2px 0px rgba(46,68,83,0.50);\n. @bummytime active state should still be same #659  \nYeah no worries, we can speed up the animation a bit. I haven't played with it on an actual device so I wanted to start somewhere.\n. @bummytime @SergioEstevao One thing to note is if we determine that we can't implement the chevron, we might have to introduce a slight drop shadow to help the user understand the depth (in addition to the onboarding). I do want to keep the icons at 44*44 to keep inline with iOS touch target sizes but perhaps we can save some space by remove some padding from left button and some padding on the HTML button. Just a thought.\n. Lets come up with a complete list of all the fixes and features we will want/need to support (looking at notes.app will be a good proxy)\n. sounds good bummy. so with autolayout we should define the min/max of each button and button grouping, as well as what happens when we go below a min width for the entire format bar (horizontal scroll, sub menu, etc) so it works on every ios device\n. :+1: \n. https://cloudup.com/cSjhdJdYxiX\nsame issue as before but I think we closed it out for some reason\n. forgot we cant do anything about this, closing\n. Device. So pretty straight forward for both.\n1) Open up demo in portrait -> switch to landscape -> start editing -> add new split window (any app) -> toggle back to editor, type some stuff -> dismiss split window by dragging to the right. \n2) Open up  Open up demo in portrait -> switch to landscape -> start editing -> add new split window (any app) to 50% of the screen\n. videos here:\nhttps://cloudup.com/c65SGxL9zRX\n. Awesome. If we can, let's show once to users once they have updated to 5.7 upon creating new post or editing existing.\n. All the colors should be the same as what is in the production app right now.\n. ",
    "coreh": "I believe the keyboard isn't getting split only because of the accessory view. There's a lot of space on the header region on the iPad app, so perhaps the buttons could be moved there? The \"hide keyboard\" button is also duplicated on the accessory view\n. Yeah, most apps have some weird way of hiding it. The way i like the most is the way Messages and Facebook do it (by dragging down) but that only works if there's a long scroll view going on.\nIs it possible to have a custom keyboard limited only to your app? I thought they were global. Also can you inherit from Apple's keyboard or do you have to write one from scratch? Because that's some serious amount of work.\n. Shouldn't they have very thin outlines like the native icons, instead of filled shapes?\n. I think if possible we should consider displaying a floating \"window/panel\" thing, like Mail does: the \"page\" is too wide. Maybe we should also use larger fonts too?\n\n. @bummytime Or we could check for the available height and disable the toolbar, or switch to transparent/floating cancel and publish buttons.\n. wrong repo? ;)\n. :+1: You're on :fire: !\n. Is that input inside of the WebView? If so, this could be caused by repositioning the cursor/changing content during an IME composition. We've hit this on Automattic/editor before.\nThe special compositionstart and compositionend events are emitted before and after the user starts to input text using a special foreign input method. Input Method Editors can perform manipulations of text content on their own, and they expect the caret to stay still. Moving the caret can easily break things.\nA simple way of handling this is to take notice of the events, store a flag marking that a composition is taking place and don't do anything with the input while a composition is taking place. That's what we do here, in the editor-normalizer module.\n. Would be nice if this info was hidden \"above the fold\" when you scroll the post, particularly on smaller devices.\n. BOOM! :stuck_out_tongue: \n. i(nternationalizatio)n\n. ",
    "drw158": "Increasing the font weight for the primary action here makes sense to me. We should keep non-primary actions using the regular weight. \nJust to clarify, this primary action text here should be using the same weight whether it is active or inactive.\n. I noticed if I tap Options and then go back, the text changes to the correct font.\n. Here are some options with the new photo icons included (2nd row) for reference:\n\nI prefer 3 or 4\n. Here is the svg for No. 4:\nhttps://cloudup.com/cjzt9g8Wt-z\n. allTAllShadeGrey might be a good equivalent to #c6c6c6. \nSorry, our style guide isn't in the best of shape it should be easier in the future to pick a color.\n. I believe this should be wordPressBlue\nHex equivalent is #0087be\n. This should probably be #e8f0f5 from our style guide.\n. ",
    "SergioEstevao": "Hi,\nCouldn't we move or replicate  the add media button in the keyboard toolbar.\nFor me it feels strange that when you are writing text in the editor you\nneed to close the keyboard to add a photo or video.\nSergio\nS\u00e9rgio Est\u00eav\u00e3o\nOn 14 June 2014 22:37, Thianh Lu notifications@github.com wrote:\n\nYeah good call, let call it what it is which is just another view.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/10#issuecomment-46100398\n.\n. Released on 5.1\n. Since version 4.6 it will stop the spinner and show an alert view with an error message if something goes wrong.\n. It's solved since 4.6, now the moment user selects an image the spinner shows immediately. Before the spinner only showed up when the upload started ignoring the time it took to convert the asset before upload.\n. Using the REST API this will only be possible when we update to version 1.1of the API. \n\nVersion 1.0 cannot change this parameter.\nSo this issue is dependent on this one: https://github.com/wordpress-mobile/WordPress-iOS/issues/2989\n. Closing this issue because it's a duplicated of this one: https://github.com/wordpress-mobile/WordPress-iOS/issues/4942 and it's being solved here: https://github.com/wordpress-mobile/WordPress-iOS/pull/5095 \n. @thianhlu do you have any suggestions how you want to show that the upload failed?\n. @Thianlu I was thinking more in a overlay on top of the image saying that it failed. Don't want to show an alert for each failed image.\n. @thianhlu @meremagee could we have an icon/image or a graphic representation that represent the failed stated? Instead of text that needs to be localised for each language and can have layout issues? \n. @thianhlu @meremagee could it be something like this?\n\n. Can you provide the color references and the retry image?\nOn Thursday, 11 December 2014, Thianh Lu notifications@github.com wrote:\n\nGood point, probably better to with very little text.\nwe can do something like this\n- since we are applying a filter, if it fails we should change color\n  of progress bar and dim things a bit.\n  https://camo.githubusercontent.com/47f3ebca93131a43b15bcba0fc544961e440b273/68747470733a2f2f636c6f756475702e636f6d2f634c3773546179485648432b\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/361#issuecomment-66549455\n.\n. SVG will be good.\n\nOn Thu, Dec 11, 2014 at 1:04 AM, Thianh Lu notifications@github.com wrote:\n\nDo you want 1x, 2x, 3x or SVG? @bummytime https://github.com/bummytime\n@diegoreymendez https://github.com/diegoreymendez do we use retry image\nanywhere in the app?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/361#issuecomment-66553543\n.\n. @thianhlu @meremagee @diegoreymendez @bummytime \n\nAfter much fighting with html css and svg, I was able to make it look like this:\n\nand then you tap on the image and see this \n\nIf you tap retry it removes the overlay and starts the upload again.\nLooking at your reference screenshot @thianhlu, I need from you the Font size and Font type you want to use for the message: \"Failed\".\n. This should be solved on build 4.7\n. How does this change play with this https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/15\n. My progress PR will take care of this.\n. Yep that code is gone from de code base you can close it.\n. This bug will be hard to solve unless we find a solution to report progress that doesn't insert any html element on the DOM and only does CSS styling.\n. @diegoreymendez \nThe second issue that you found:\n\" Found another issue when tapping an image that's uploading. The progress bar disappears and the image's transparency gets \"struck\".\"\nIt's a by design on the editor demo  I'm just testing when you click on a image to simulate a failed upload.\nThe bug related to content I don't see an easy way around it any html that we add to represent the progress will always be part of the DOM and can be moved around, any ideas how to solve this?\n. Ok, the jumping to the beginning? was this happening before my changes? or just started now?\n. This is solved, so I'm closing it.\n. The dashed line was removed from the preview and edit mode on this commit.\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/commit/b65dac2a254be422576f0ed8ea6561022d17a95e\nSo this is resolved on the 0.3 branch.\n. Yes\nOn Wednesday, 3 December 2014, Matt Bumgardner notifications@github.com\nwrote:\n\n@SergioEstevao https://github.com/SergioEstevao also, is there a\ncurrent issue that this PR is for? This one:\n423 https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/423\n?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/pull/433#issuecomment-65480001\n.\n. My latest commit addresses the size and position of the label.\n. I think this is now solved in 4.7 branch because of this PR https://github.com/wordpress-mobile/WordPress-iOS/pull/2943\n. this was fixed by this https://github.com/wordpress-mobile/WordPress-iOS-Editor/pull/454. What branch where you using to?\n. Fixed since 0.4\n. This is fixed on the 4.7 build. By this PR https://github.com/wordpress-mobile/WordPress-iOS/pull/2943\n. I've been working on this and found why this happens and some possible workarounds.\n\nThe reason we see the caret in the wrong position is a combination of using:\n- content-editable=false on the elements surrounding the image while it's uploading.\n- and using a hidden-char around the images to allow to be able to select around the images.\nThe content-editable=false cannot be removed or else the users will be able to remove the uploading style and progress bar while it's happening.\nIf we remove the hidden-char we have two main limitation:\n- we cannot position the caret near the image if there is no characters around it. This is noticeable if you have a complete empty post and add one or more images or if you insert multiple images and then  want to add text in between images.\n- We cannot \"Select All\" the content of the post. This issue only happens while the uploading is happening. After the upload is finished the problem is solved because we remove the extra elements and the content-editable=false.\nThe best solution/workaround I found out is to replace the hidden-char by a \u00a0. This allows all functionality to still work  with the only downside of adding extra tags on the html and some space between images.\nWhat do you guys think? @meremagee @bummytime @diegoreymendez @thianhlu \n. I believe this is also solved by this PR https://github.com/wordpress-mobile/WordPress-iOS/pull/3024\n. Do you still see this on the latest 4.8 release @meremagee?\n. Maybe you don't know this, but if you click on the media uploading.. message on the navbar it shows you an alert than allows you to cancel all ongoing uploads.\n. @meremagee  Being able to add images from other people photo stream is a priority? I can a have a look on that... but I can also disable the option. \n. This is a failed image with the following filter parameters: -webkit-filter: blur(5px) grayscale(20%);\n\nGood? @meremagee and @thianhlu \n. I tested this a while and it's tricky to solve here what happens:\n- When we are editing the post, every time the content changes we autosave it.\n- When we add images the same happens.\n- When the phone goes to sleep for one hour the app is normally killed by the system.\n- When it's restored the app starts again on the same screen it has the html, but lost all temporary information that allows us to do media retries...\nSo we need to find a way to store the temporary ids in order to be able to restore them even if the app gets killed by the system.\nWe could just clean all the extra progress content and temporary images if we are restoring the post... What do you think @meremagee and @bummytime ?\n. \nWhat do you think @meremagee ?\n. :shipit: \n. I will have a look\n. Looks good :shipit: \n. @meremagee  I think I did this on purpose for smaller devices, can you try to do the same in lansdcape mode on the same device?\n. Looks good :shipit: \n. Looks good for me, I will give it the :shipit: \n. :shipit: \n. \n. \n. :shipit: \n. I've implement #599 so now the link info will be pre-filed now, thanks @aerych !\n. I add a first go on the UX of the video upload interface. I followed the same design as the image uploader. Don't mind the picker interface this is just the standard iOS interface for picking videos not the same we use on the application.\nHere is a video of the interface in action:\nhttps://cloudup.com/c-rqHMMB39G\nDo you agree with this interface @bummytime @thianhlu ?\nOne thing that I took notice is that if we plan to do a meta edit option for video we will no be able to it the same way as the images because of the Play button that shows up in the middle of the video, in the same place we put the edit icon (pencil). \n. Are you saying to just use the player bottom bar and drop the main play\nicon on the Middle of the video? Do we keep that bar always visible? Do we\nstop doing click to play in all the video frame?\nAnd what we want to do when we click to edit the video? At the moment\nwpadmin doesn't do anything...\nOn Tuesday, 24 March 2015, Thianh Lu notifications@github.com wrote:\n\nLooks really good @SergioEstevao https://github.com/SergioEstevao\nGood point on the Edit icon. We could keep the video player looking like\nthis\nhttps://camo.githubusercontent.com/dc62370340f0918aed61df0b9577c6ae06723c6d/68747470733a2f2f636c6f756475702e636f6d2f63714d516e4f5a5078505a2b\nand still have that same interaction?\ncc @bummytime https://github.com/bummytime\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/602#issuecomment-85096021\n.\n. After discussing with @thianhlu we decided that at the moment we will only have video insert and upload UI, edit of meta options will be done in the future and addressed in a different issue.\n\nThe standard UI for media controls will be used.\n. @thianhlu we need some ui/ux to show as a video placeholder when we still finding or processing a video element. This could happen for example when we open a post with wpvideo shortcode and it can take a while to get the video url of the video. It can also after the upload when we switch from the local url to the remote urls.\n. Are you planning an image or SVG?\n. SVG like we did for retry and please send me the color reference\nOn Wed, Apr 1, 2015 at 10:30 AM, Thianh Lu notifications@github.com wrote:\n\nI can do either. Want me to do vector in PDF or SVG?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/602#issuecomment-88256125\n.\n. @astralbodies, can you save a video on of the dismissal of the keyboard in iOS7. I added code to fix a bug in iOS8 that kept the keyboard in front of the video. Maybe I need to deactivate it on iOS7.\n\nThe second issue is not related to this PR it looks a bug on the UIImagePicker.\n. After discussing with @astralbodies we found out that in the iOS7 even not dismissing the keyboard explicitly we still see a flash effect so we are keeping the code to dismiss in iOS 7.\n. I tested this a bit and found a way to know what are the available formats on the site and how to convert the images to one of them. \nSo now we have to decide how to present this to the user:\n1. Show a message to the user that the file is in an invalid format when he selects it to add to the post.\n2. Show a message that there is a issue with the file format and ask if we can convert it to another format (JPG) before uploaded it.\n3. Convert it automatically and don't ask anything to the user\ncc @bummytime @thianhlu \n. Ok I will do 3, I will convert automatically and for lossless formats like TIFF I will convert to PNG that is also lossless. \n. This issue is solved, any unsupported image file formatted is now converted to jpg automatically.\n. Fixed by #624 and #626 \n. Solved by Aztec.. Please don't merge this just now, need to test it with videos and photos insertion.\n. @diegoreymendez, at the moment it's working but looking at the code I see you didn't the invocation in the two place where I was worried about it. There are:\nZSSField.prototype.sendImageTappedCallback\nZSSField.prototype.sendVideoTappedCallback\nthe main issue that I found out when doing this is that when calling ZSSField callback we add a parameter to the callback URL called id to identify the field being changed. This was conflicting with the id parameter of these callbacks.\nLooking back this was error on the implementation of these methods instead of using id, they need to change to use something called mediaID. \nIf you want after you merge this in I can do the necessary changes on the editor to make this work properly.\n. :shipit: \n. I stil got some warning regarding Cocoalumberjack on these files:\n- Example/EditorDemo/WPAppDelegate.m -> still doing the import the old way\n- Example/EditorDemo/WPViewController -> string the import the old way\n- Example/EditorDemo/WPEditorDemoLoggingConfiguration.h and .m the ddLogLevel variable need to be update to the type DDLogLevel\nAll the other warning are gone, so when you address this I can give it the go.\n. :shipit:\n. Solved by #789 \n. This is working and I say :shipit: but I noticed this on the demo app https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/683\n. :shipit:\n. Excellent catch @rachelmcr!  I will fix this.\n. :shipit: \n. :shipit: \n. :shipit: \n. For the authors, shouldn't we use just Automattic mobile@automattic.com?\n. For me it's just that if someones leaves Automattic that mail will stop existing, while the mobile@automattic should always be there. \n. For me is ok then :) :shipit: \n. :shipit: Good catch @diegoreymendez \n. One last question, do we really need to do the dance of resign/becomeFirstResponder on the source code view? In there we are using the standard UITextView and no hack for the acessoryInputView so should the rotation work by itself?\n. ok then so :shipit: \n. @mattmiklic the only question that I have here, is that on the images and videos when an upload fails we where showing a message saying \"failed because of ....\", and after an upload is done we where showing a \"Edit\" text when tapping on the image. both of these where using Open San and now they where replaced for the system font (SF). Should we use that or Merriweather?\n. Hi there, we don't support flash in our visual editor, and for my knowledge iOS in general is unable to display flash movies. \nI think your only option is to add the tag in the HTML mode and then publish and see it on the web.\n. Should be fixed on the next 6.1 release.\n. The purpose of that method is to insert a local image while an upload is happening to the server, and when the upload is finished and you have the final url of the image to replace the local url for the remote url.\nThe media ID is important because is how the code finds the local image to replace it. You can generate any random ID and associate it with that particular image.\nIf you just want to insert an image that already is on a server you can use the \"insertImage\" method.\n. Did you test this on the latest 6.1 internal release?\n. Ok, I think we have that fixed for the next release of the 6.1 build, I will keep an eye on it.\n. @rachelmcr does this happen to you all the times you do the steps?\n. @diegoreymendez: This can be tested on this branch issue/editor-798-test on the main app repo.\n. @astralbodies ready for another round of review. I converted the NSLog to DDLogInfo so remember to switch to the correct log level on the WPEditorDemoLoggingConfiguration.m in order to see the remove message.\n. @astralbodies: This is expected because when tapping and selecting to\ncancel then code path goes the other way around, the Native code sends a\nmessage to the web view to remove the image, so no callback is needed to\nnotify that the image was removed.\n. This is a bad bug to have in editor so I should we should add it to 6.1.\n. I'm going to merge this on the editor, then we can make the decision on the main repo if we want this fix in.\n. @astralbodies we do support media in the legacy editor, but just images, and we show a progress indicator in the navigation bar where you can click and see the progress.\n\n. @astralbodies the media experience  that was is one the reasons that I wanted to improve the legacy editor. And the WPMediaPicker is accessible i think I do the same description that the photos app does but I can improve on that.\n. @bummytime do you mind to have a look again for the toolbar stuck/size issues? I think I've got them sorted out with this last commit.\n. I created this branch on the main app editor/test_new_legacy_editor to help test the integration of this new version.\n. @bummytime ready for another look, I also update the branch on the main app for testing. You can also have look in the code now, because I think it's final now.\n. @bummytime I followed your lead and updated the size of the title field and switch the color to black.\n. I increased the space as you asked @bummytime. You can see it here:\n\nI'm going forward and merge this in, thanks for the thorough review!\n. :shipit: \n. Did you run to this problem using the sample app? Or  using the WordPress app?\n. The editor uses a webview so there isn't any feasible way to use reusable views. One thing that could help is to use lower resolution images when adding them to the webview, at the moment the sample app uses the full resolution but that could be changed to user lower resolution images.\n. @IsVivian are using the editor in a standalone app, or using it inside the main WordPress app?\nIf you are using it on the main WordPress app you can go to the Me section -> App Settings -> Image Size and reduce the size of the images that are used/upload in the app.\n. Hi there for you to use the current version of the pod you will need to remove the use of API calls that are iOS 9 and also to rollback some fixes that where specific for iOS 7.\nI think the easiest way will be to use to version 0.9.1 of the pod, that was the last version that supported iOS 7 and above.\n. These changes cause a side effect that is no desirable: when you don't have any text on the field(content or text) the selection is not saved has expected but then the focus is also not restored to the correct field.\nBesides not restoring selection this cause issues when inserting media because there is no element to focus when coming back to the editor view after selecting the media.\n. @diegoreymendez I still see the issue that when you remove all the content and you are only seeing the placeholders if you try to insert an image it fails and if you go to another screen and back the selection is lost.\n. :shipit: , good work @diegoreymendez.\n. @frosty Do you mind adding these shortcuts to the legacy editor also?\n. @frosty I tested it a bit more on the device and found the following issues:\n- on the visual editor, the shortcuts don't work  on the HTML mode\n- on the visual editor, when you use a shortcut, the corresponding icon on the toolbar should be activated. For bold, italic and underline the icons that are getting activated are the one on the new standard keyboard toolbar on the iPad, is this expected?\n. Ok, let's proceed with this anyway I think it will be good for our users with keyboards, even if they are few of them. :shipit: \n. @frosty should the links when pasted on the editor show up as links? or they just show has plain text in the editor?\n. :shipit: \n. Hi Gio, \nAre you talking about the button in the toolbar to insert images? or the option to edit image attributes after the image is added to the post?\nCheers,\n. :shipit: \n. One issue that I detected, is that if you add three parapgrahs, then blokquote the middle one.\nThen try to insert an image before the blockquote is pushed out of the text.\n. Blockquotes should apply to the full paragraph? or only to the selected text?\n. @diegoreymendez check this video: https://cloudup.com/cuPtsI8nKcL\n. I tested this on the integration branch, and found some issues:\n- If you add two paragraphs. Then insert a group of image in the middle of the two paragraphs. If you press delete all the images are deleted in one go\n- If you cancel an image upload, by tapping on it and choose Cancel Upload the image next to it is canceled also.\n. @diegoreymendez I had a look on develop and it looks that both  issues already happens there, so I will investigate them in separate tickets.\n. :shipit:\n. @diegoreymendez if you want to have a look on the main app, I have test branch there called issue/3911_use_video_shortecode_on_self_hosted. @frosty @bummytime any ideas to fix this? it looks that iOS11 we don't have full control of the size of the buttons. They are changed depending of the space available.. @bummytime and @frosty ready for another look.. @frosty ready for another look.. @frosty tweaked it a bit more. Have a look.. @bummytime and @frosty ready for a final look. @bummytime thanks for keep testing it. So I did one more change that solves the problem you found out. Can you please give it a final look?\n@frosty if you want to check it too?. @frosty changed the toolbar height to a constant. Ready for final approval!. @frosty ready for another look\n. Ok\n. ok\n. Fixed\n. Done\n. done\n. This is only to remove images that are canceled not all images. The demo\napp is just a test. I agree that we should have a better way is ID the\nimages specially the ones that come from a post made in the web.\nOn Wednesday, 3 December 2014, Matt Bumgardner notifications@github.com\nwrote:\n\nIn Assets/ZSSRichTextEditor.js:\n\n@@ -727,6 +727,25 @@ ZSSEditor.markImageUploadFailed = function(imageNodeIdentifier) {\n     element.attr(\"contenteditable\",\"false\");\n };\n+/\n- *  @brief      Remove the image from the DOM.\n- \n- *  @param      imageNodeIdentifier     This is a unique ID provided by the caller.\n- /\n  +ZSSEditor.removeImage = function(imageNodeIdentifier) {\n-    var element = $('#'+imageNodeIdentifier);\n\nI think there might be an issue here if the user adds an image outside of\nour app (e.g. using the media picker on the web). If the image element does\nnot have an id, the ID selector won't find anything. A good example of this\nis trying to delete our \"cowboy cat\" picture in the demo app.\nFor reference, I just created a post on the web and inserted an image from\nthe media library...this was the HTML (no id):\n\nWe may have to come up with a more sophisticated way to find the image we\nwant to delete OR perhaps create IDs for images that are missing them when\nthe user loads the post into the editor...\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/pull/433/files#r21260342\n.\n. 3 is a magic number?\n. Magic 3 again.\n. merge issue, I will add it back, I thought I got it right.\n. Do you think it's worth to make all this elements use the data attribute instead of id? like the image?\nThis way I could create a method named getNodeWithIdentifier(nodeType, identifier)? and use it on all of them.\n. Maybe add an extension on UIDevice there is already one for detecting iOS8\n. Good question I copy this from the image code. But I will test it without. \n. No this must got by mistake, it was from another PR that is merged in dev already\n\nOn Wednesday, 8 April 2015, Diego Rey Mendez notifications@github.com\nwrote:\n\nIn Classes/WPEditorView.m\nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/pull/618#discussion_r27928868\n:\n\n@@ -1127,7 +1046,7 @@ - (BOOL)isVideoPressInfoRequestScheme:(NSString )scheme\n- (BOOL)isSelectionStyleScheme:(NSString)scheme\n  {\n  -   static NSString* const kCallbackScheme = @\"callback-video-fullscreen\";\n  -   static NSString* const kCallbackScheme = @\"callback-selection-style\";\n\nIs this related to the issue being solved?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/pull/618/files#r27928868\n.\n. It needs to be removed altogether\n. If you remember @bummytime we had similar issues with video insertion and upload.I also have a user on the forum complaining about this. To be honest it doesn't happen 100% of times but I've seen it happen and when it does it's the event  not getting called at all in the objc code.\n\nOnly when we go iOS 8 only and can use the new WebView we will be 100% sure.\n. I thought so initially, but this was just the tip of the iceberg. Have a look on this PR https://github.com/wordpress-mobile/WordPress-iOS/pull/4116 for further details.\n. The string OK should be localised.\n. Should't we be using cocoa pods 0.38.2?\n. I noticed that we where loosing the focus and selection on rotation, if we change the code like this it looks it works better: \nWPEditorField *field = [self.editorView focusedField];\n            [self.editorView saveSelection];\n            [field blur];\n            [field focus];\n            [self.editorView restoreSelection];\nCan you test on your iPad Pro to see if we don't mess up anything.\n. @nheagy what happens if the paste has images and text? will the plain text be length zero also?\n. It's ok for now to keep as it is, depending on the progress you make, we can come back here and handle the other scenarios.\n. Missing focusedField the code should be like this: focusedField.getTextWithoutNbspOrBom();\n. This shortcut should be renamed to be \"Insert Media\" and maybe change the shortcut to Cmd + M\n. They do, but I was just wary if they change in the future.. Change it for a constant. intrinsicContentSize is returning zero.... You are right, going to change this, I think I was testing something then ended up leaving this.. Good catch.. ",
    "mgarza1812": "Just updated to the latest IOS release, was curious, how soon video uploading might be back?\nAppreciate all your hard work thus far! garzafx.com :P -Mark\n. Wow..thanks for the prompt update. Looking forward to both changes ;)!\n. Wow, that post just made my day. \nLike on the scale of a new Star Wars trailer kinda awesome!\n. ",
    "JiRybar": "Any new ETA for the video feature?\n. ",
    "richardmax": "When are you planning to add video back to this app? Theres been nothing about it for months and a year has almost past since the feature was removed. Not moaning (yes ok a bit) - just asking! Its not like video is less important nowadays - tell vine!, lets move with the times guys! \n. Awesome... drum role... crack open the champers.... lets get vlogging!!!!\nWhens 5.1 landing?\n. ",
    "astralbodies": "\n. Wow, good to know.  That seems asinine!  But yet if I change locales a notification is fired off.  Oy.\n. This issue was originally from 2013 and was moved into this repo. I'm okay with closing it for now.\n. Looks good @diegoreymendez - definitely not an expert of the ZSSRichTextEditor library but it looks like a simple enough change.  :shipit: \n.  Editor - Migrating to WKWebView\n. :shipit: \n. Looks good on iOS 7.  My only comments:\n- When previewing the video after its attached, tapping on full screen briefly overlays the keyboard dismissing. Maybe we can not dismiss the keyboard since the full screen hides the keyboard?\n- When initially giving permission to photos, tapping No presents a white screen. Dismissing and going back in then shows the \"no permission\" screen. This may not be related to this PR.\n. A bit more detail after watching a blind user interact with the app:\n- Title and Body fields are not labeled for VoiceOver\n- Switching to HTML mode (plain text mode?) doesn't have an audible confirmation on what happened (and focus doesn't shift for selected VO control)\n- Options button in Plain (legacy) editor isn't labeled\n. I want to say HTML mode was doable but there was some problem with there being no distinction between the title and the body of the post. The legacy editor wasn't also terribly accessible due to the Options being at the bottom of the post and it didn't announce what it was for.\nIf we can confirm the accessible nature of the new editor I say we stick with it and HTML mode.\nHere's what I'm thinking:\n1. User edits or creates a new post.\n2. VoiceOver is detected and the editor isn't HTML already and a UIActivityView is presented asking them to choose HTML mode explaining its a better VO experience.\n   3a. User chooses Yes and HTML mode is selected. \n   3b. User chooses No and the editor remains the same. Popup never reappears.\nThis assumes the HTML mode state is retained on the device.\n. Awesomesauce :shipit: \n. :shipit: \n. Simple enough :shipit: \nAt some point I'd say whack the Pods directory from the sample project :wink: \n. On iOS 7 if you tap on the \"I'm a link\" and click cancel on the UIAlertView for updating the link, the colors of the buttons stay grey rather than going back to the faded blue. As you click around and use the buttons they return to the right color.\n\n. Other than the one glitchy thing on iOS 7 (which may be unrelated to the changes and therefore another issue) I say :shipit: \n. Video of the bug: https://cloudup.com/cXkEpVW2TgB\n. The resizing of that bar was fixed with that commit!\nOne issue I'm seeing as I'm mid-drag of the 1/3 floating window:\n\n. @bummytime Totes :smile: \n. I say :shipit: :grinning: \n. Looks good! :shipit: \n. Reviewing now @SergioEstevao :smile: \n. It looks like -editorViewController:mediaRemoved: is only being called when I have a post with just an image and I either delete it or click on it to cancel. If I put an image between two paragraphs of text this method is not called.\n. Looks like deleting the image calls the delegate - awesome! It appears that tapping the image and selecting cancel upload does not call the delegate now ever.\n. Got it - then we're good :shipit: \n. As long as @sendhil  is okay with putting this in 6.1 :smile: \n. I am seeing this warning:\n\n. I think the styling of the keyboard accessory bar should match the regular editor.\nIn WPiOS, the coloring looks way off:\n\nversus\n\nComparison of EditorDemo:\n\n. I'll leave the ultimate decision about design up to @bummytime with his amount of experience redesigning the visual editor.\nIf we're going to support media with this PR I'd like to see some sort of visual cue that an upload is happening that is cancel-able and also accessible with VoiceOver.\n. @SergioEstevao Okay I wasn't seeing that because I was in text editing mode with the keyboard visible.\n. @diegoreymendez This fix will be in WPiOS 6.2 most likely, right?\n. :shipit: for now - a better overall solution for all our repos is needed. This one probably won't scale but its easy enough to refactor.\n. @rachelmcr You're completely right - I had to switch sites before I posted that picture. Genius!\n. :shipit: \nThanks for that!\n. Thanks @bummytime - added a comment to the main editor VC about why the code was commented out.. You could dump iOS 8 support :smile: \n. I like using NSParameterAssert but I think that's just personal preference not a rule. :smile: \n. Commented code - maybe should be deleted?\n. Should probably use DDLog i/o NSLog\n. ",
    "meremagee": "done: https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/427\n. in new/visual editor, they are currently displayed in order of selection\n. resolved. media now added at cursor & receive immediate visual feedback from locally stored img.\n. resolved in new editor\n. @aerych it's not present in new editor, so safe to close here. If it's still an option in the legacy editor, let's re-open there: wordpress-mobile/WordPress-iOS#298\n. It discards changes made since the last time the post was saved, so if the post is one that had previously saved content, it will not discard all the content - it will remove the recent local edits and maintain the saved/published contents from before as expected.\nIf the post is a locally saved draft that was created all in one session (never been saved/published), we throw this alert upon opening the post:\n\nHow likely is it that the user ignores the alert, adds to the post, hits cancel, opts to discard, and expects the previous local draft to remain?\n. Are we able to leverage the shortcode api endpoint to render the content of the shortcodes inline on mobile, making the WYSIWYG consistent all-around?\nIf so, I think implementation-wise, we could prioritize like this:\n1. render shortcodes in preview post mode (when you click title of post from post list)\n2. figure out interaction for shortcode transformation within editor (i.e. render shortcodes inline within edit view after user closes shortcode with ] then hits space or something)\ncc @thianhlu \n. since we handle captions visually inline, closing this and opening a more detailed issue for broader shortcode handling\n. related: possibly scale images to fit within device screen\n\npublished: http://meretesting.wordpress.com/2014/08/04/what-up/\n. Looks consistent with behavior on cloudup editor & interim/wp-admin editors\n. markup in app (4.6) and in wp-admin text: https://cloudup.com/cd10CoEJRpN\nLooks good. The only differences I spot:\n1. when I add trailing whitespace, on the app, I get the non-breaking code space, whereas on the wp-admin text editor, I don't.\n2. in the app, extra returns/enters show as <p><p/><p><p/><p><br></p>... whereas on the text editor they come through as \n&nbsp;\n&nbsp;\n&nbsp;\n&nbsp;\n. Yep - the difference don't seem like bugs; just wanted them noted for posterity!\n. shortcodes/embeds:\n- [ ] we're adding styling to shortcodes and embeddable links - if we don't, they will be rendered upon publish as embeds. Legacy editor vs. visual editor: https://cloudup.com/cULwdiyxm68\n(currently, if a link is pasted on a single line, it gets linked upon publish instead of embedded. shortcodes, however, aren't published at all and get this treatment in wp-admin: [youtube=<span style=\"font-size: 12pt; line-height: 24px;\">https://www.youtube.com/watch?v=XilH8-TfxeA]</span></p> as shown in the stream above)\n. note: if you hit enter/return to create new paragraph in html mode, a new p is created but does not inherit p tags (even if you switch back to visual or save > return to post). this is more consistent with wp-admin styling. \n. @bummytime if there's nothing we can do to make it work upon publish as it's supposed to, then I suppose we need to punt. The diff between this and #85 is that 85 includes crafting a nice ui/ux for adding embeds into the app whereas this has to do with rending shortcodes and embeds improperly (differently than wp-admin)\n. created separate issues for each with a master issue for tracking here: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/501\nclosing this now-massive post in favor of the cleaned up versions\n. consider input for anchor text as well, like current implementation in ios app. If text is selected when link button is clicked, the text prefills the anchor input; if no text selected, user can then add anchor text\n\n. I can do a runthrough on Mixpanel to see if there is anything that T didn't mention that we'll need for consistency against prior builds. @sendhil is the guy to chat with to make sure events, properties, and metrics are set up properly.\n. Rundown of the stats & properties we currently send to mixpanel https://github.com/wordpress-mobile/WordPress-iOS/blob/develop/WordPress/Classes/Utility/Analytics/WPAnalyticsTrackerMixpanel.m#L204\n. So instead of adding new properties, @sendhil and I discussed keeping the button properties consistent with the current builds where we can (and add any untracked properties that we may need that are specific to new editor). Then, we can add a \"flag\" to distinguish our editor, allowing us to filter by our editor within the current mixpanel data while preserving the consistent, clean structure that mobile has instituted.\nexample\nCoding a flag for \"created account on mobile\" full source:\n\nHow the filter works on mixpanel:\n\n. > Let's make sure we are scaling down the images so they fit correctly.\nSee https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/86\n. fixed\n. I asked happiness if they had any resources gathered around this already, but the answer was nope. I've put together a little list from sources I found with a little hunting. If at any point we want to bring in more people, getting more via request sounds like it wouldn't be too challenging: http://apps.wordpress.org/2009/02/17/looking-for-a-few-good-hardware-testers/\n. More info: update only enabled if you tap into Title field before editing body. If you only edit the text area, it remains disabled.\n. related https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/137\n. for v1, going to enable richtext but leave media disabled. there's more complexity around implementing media since we've changed the flow with local placeholders.\nwe want the html editor to be able to be a fully functional replacement for folks partial to the legacy editor, but since it's 2+ clicks to add media on legacy editor currently, disabling media from html in the interim is not necessarily deprecating the experience. this should only be thought of as an interim solution as we prioritize other 4.8 blockers, and should be high priority for 4.9.\nfor now:\n- show add media button disabled in html ui\n- hit add media button > alert: need to switch to visual to add media\nultimately, preferred behavior would be:\n- hit add media from html format bar\n- go to photo library > select images\n- see \"uploading...\" in nav bar\n- insert remote url in img src\nux for switching modes during upload tbd: for now, blocked\n. https://cloudup.com/iFSgCED2qnd\nIt seems to be related to updating the hockeyapp build + 2fa. When I update the app on the iPad, I get a popup that says something about 2fa password, but the app appears to function normally. BUT, if I don't logout > reset my app password on desktop web then\n- I can't load posts (per this issue)\n- publishing posts fail\nClosing since this is a testing-specific issue and resetting app password resolves!\n. a p2 - must have been. good catch!\n. Also:\n\n. related, from user\n\nType some stuff, tap bold, keep typing, tap bold again to turn it off, keep typing, then hit backspace a bunch.... when the cursor gets to the bold section it will turn bold on automatically (smart!) but when you backspace past the bold part it doesn't turn off again\n. Original issue is fixed. Nice work.\n. \"Share your story\" should not show in preview/published view, so to mimic the \"published\" content, the content should be empty until you hit edit > then in edit mode, see \"share your story here...\" placeholder.\n. lgtm at the moment. if we run into this again, will reopen.\n. The WYSIWYG editor itself seems like as much of a \"simple preview\" as our current implementation of the simple preview (albeit without displaying tags inline).\n\nmaybe hitting preview while editing \"saves\" and renders on server-side at that time. If connection is too low, we give a nice error msg. I don't think this would be much of a problem since their low connectivity would likely block publishing as well.\n@thianhlu thoughts?\n. Related: if you edit a published post, adding content, then hit preview again, the updates don't display in the server-rendered content.\n. Per slack discussion...\nBecause themed previews will always take a round trip to the server, we have a few options:\n- we can bundle \"preview\" & \"save\" so that we always save and fetch a copy of the latest edits from the server before we preview (this is what the web interim editor does). This would necessitate a good enough connection to make the round trip.\n- we keep it snappy and local with styling that matches the Reader (which strips themes and renders everything uniformly). I have notes on the differences between the preview and reader styling if need be. This would work on a poor connex.\n- we keep it snappy and local and don't change the default. This would work on a poor connex.\nRegardless, since it's \"fine\" as is, pushing this to the next release so @thianhlu can make the styling decision.\n. resolved\n. closing here in favor of reopening in ios repo since we'll have to dig into the api code a bit to see where the issue is. we're not updating revisions for self-hosted nor .com sites from legacy nor new editor at the moment.\n. Yep - when you click to switch a couple of times, you can see that there is a check mark next to the blog that is supposed to be selected though the name of the blog isn't updated in the picker.\n. note - if you add media, block title changes to correct one\n. also, adding image inserts new line above\n. It's very random for me, and I can't think of anything particular in my workflow that triggers it. I do often test while on the train (i.e. spottier connection over data) if that could be a factor. I'll test more this evening and see if I can repro - if not, we're safe to close since it doesn't hamper functionality - just a UI annoyance. \n. nope, no updates. closing for now. will add any updates here and reopen if it's reproducible. thanks @bummytime \n. not new-editor specific (happens in 4.4 whether or not new editor is enabled) but in our domain as part of the \"editing experience\" per chat with bummy.\n. I can update post formats for new, existing, and draft posts for my private blog. I cannot for my public blog. Will continue to test to see if that's consistent.\n. note to self - during next build cycle get data on # of images added via mobile apps and mobile web if possible\n@meremagee\n. related: \n- content truncated - https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/141\n- missing words after adding media - https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/131\n- placeholder editable - https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/162\n. re picture, it's noted here, but good to have as a separate issue. thanks @bummytime \n. from user:\n\nWhen typing a long-ish post, the focus doesn't automatically go down to the line you're on if it goes below the text input editor. That means you need to manually swipe it down like a typewriter. It also means you can't see any auto-correct suggestions if they are on the bottom line.\n. from user:\nif you keep typing enough content, you can keep right on typing even though the text you're entering is \"behind\" the keyboard...\n\nhttp://d.pr/i/34zZ\n. dupe https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/252\n. dup https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/203\n. related, from user\n\nParagraph spacing is different in editor vs. site\n\nin editor: http://d.pr/i/7wY0\npublished: http://wp.me/p3F7sc-oi\n. related, from user\n\nweird nested <div>'s in HTML mode, not sure how they got there, was just hitting Return to enter new lines...\n\nhttp://d.pr/i/BigO\n. really good find, bummy\n. update, need to tap to add cursor (not automattically input at beginning of post content anymore)\n. also related https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/141. Since it's merged into the local build already, closing to keep things streamlined. Will reopen after merged into WPiOS 4.4 if there are any regressions.\n. note to self: if no images nor categories are set, there is no alert and content is seamlessly preserved.\nupdated copy for media/categories coming soon.\n. @thianhlu  - options for context-specific copy, longest to shortest in each section: https://cloudup.com/cqJwC4JOh4e\nMost of the options assume we can fill the post/page value dynamically. If not, we'll rethink a bit.\nPing me for updates/adds or word selection based on wordcount fit.\n. Roger that. Updated copy (for at least an interim if we end up just handling media/category longer term) will be added this afternoon.\n. @thianhlu - updated options w/ char count: https://cloudup.com/iXuvmnn4UYs\n. update - current behavior:\nmedia\n\nswitching post with media looks like it works seamlessly\ndon't get a blocker\nit's using the remote url from the original blog's media library\nare we okay with this or we want to go with the proposed blockers (assuming the latter, but wanted to update status here)\nvideo: https://lookback.io/watch/ZsSZFmxRNvmeftH4C\n\ncategories\n\nget blocker indicating that you will lose categories & media as described above: https://cloudup.com/ceFM4bkr3kn\n. since it doesn't break anything now, pushing to 4.9\n. dupe of https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/171 and related to https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/241\n. fixed in https://github.com/wordpress-mobile/WordPress-iOS-Editor/pull/250\n. fixed.\n. fixed\n. dupe of https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/215. Closing 215 in favor of having this higher on the issue list.\n. Haven't been able to repro in recent builds.\n. Note: can't repro on ios7\n. regressed\n\n\nclicking \u201cReturn\u201d when typing the title adds multiple lines to the title. I don\u2019t think that should be happening, maybe it should just move to the content instead?\n. moving to 4.9 - media milestone\n. resolved. new issue created for option to un-obscure pw if desired in main repo.\n. from user:\nthe existing mobile app editor works as expected \u2014 when I switch to an RTL keyboard the cursor moves to the right side of the screen (but if I close the keyboard and re-open it (still in the existing editor) the title moves to the left side, so not perfect)\n. dup\n. from a user, video: https://lookback.io/watch/n4waXN26uNwFXzjH3\n. Can still repro in ios7 like this:\n- add image\n- focus text area again to bring up keyboard\n- without scrolling to bottom of img, hit enter and start typing\n- can't scroll\n. regression - happening on iphone again\n\nhttps://lookback.io/watch/YS8WEiHLYNsnjNvLX\nand also on ipad with split keyboard as noted in https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/394\n. still get this in latest 4.7 beta build, ios7\n. repro'ed on ios8/ipad mini - https://lookback.io/watch/kyjkuGK3Y2urnugFk\n. added \"resolved > test\" label to help me sort instead of keeping this open.\n. still happens - iphone 5s & ipad 2, ios7\n. ios7 works because it dismisses keyboard upon img insertion. good enough work-around for now. :+1: \n. i initially had this in #304 as well, but i decided to break the 2 issues apart:\n- 304 is just allowing a user to switch between rtl and ltr based on which keyboard they have set in a particular paragraph\n- this is about adding the tooltip on select/hold\n. \n. The production app currently displays the following\n\nInstead of throwing an alert and/or discarding media upon state change, let's bundle media uploading with the post state change. In other words, when you're taken to the post list after hitting post/save, you'll see \"UPLOADING...\" progress indicator next to the post title. Let's just prolong this process to let media finish uploading before the post state is changed:\n\nDown the road, we could add stages to the progress indicator to show the 2 processes more explicitly, like \"media uploading...\" then \"saving post...\"\n. relatively low percentage of users are hitting the app from a 6+, and the issue \"resolves itself\" if you click the publish options again, so pushing this to 4.7\n. this appears to be resolved. @bummytime sanity check?\n. video from a user: https://lookback.io/watch/6MPiHQ7MfbCrwhjA2\n. on ios7, I can repro consistently when:\n1. I hit \"new post\" from posts list or reader\n2. After I've added at least 1 img > misspell a word > dismiss auto-correct tooltip by hitting spacebar \nipad, ios 7:\n- deleting content rapidly reveals that it's not a line, but rather a(n input?) box: https://lookback.io/watch/BroybgTrfYPmN3QAT\nnote: this does happen outside of the above contexts, like when auto-correct tooltip isn't active and when you haven't added an image. These are just the most reliable steps to repro I've found. Continuing to dig...\n. Repro:\n- open new post on visual editor\n- type title\n- click home button to leave wp beta app (in my case, i opened 3 other apps  to read messages between the time i left the wp app and opened again later)\n- open wp beta app ~1 hour later\n- blank screen > have to kill app to use again\n. ios-8 specific. looks good on ios7.\n(happens for me on ios8 sim but not on ios7 in the beta app)\n. another way to repro:\n- type a sentence\n- add image\n- go back and edit that sentence a couple times\n- cannot scroll below image\nhttps://lookback.io/watch/iQidahYQQe9CYJ6pK\n. roger\n. Looks good now! :+1: \n. Appears to be resolved (tested ios7)\n. yep, dupe https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/328\n. I'm getting that, too (ios7)\n. dup https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/318\n. Note from a user:\n\nThe image upload isn't working for me at all. It looks like it's uploaded fine but doesn't put the image in. It's odd. It seems to upload the image to the media library fine.\n\nvideo: https://lookback.io/watch/LjpBDnGqfHsPjpomH\nSounds like the image uploads to the media library, but there may be an issue in swapping out the remote for the local image which forces the upload to \"hang\" in the UI.\n. Alert would be more of an interim solution, where you would get something like...\n- local placeholder added\n- alert (for 1 or many if possible to aggregate): \"Oops the image upload failed. Please try again.\"\n- failed local placeholders removed with a nice animation\nAn interactive overlay would, I agree, be preferred (but potentially more complicated):\n- local placeholder added\n- progress on placeholder\n- upload fails\n- see something like \"Upload failed. Tap to try the upload again\" overlay on local placeholder.\n- tap > restart upload\n- if user does not tap to upload, strip any failed uploads from published/saved post.\ncc @thianhlu \n. #15 is largely resolved by @aerych's img settings work. This issue is also outdated, so closing now and we can refine once we have more usage around how people engage with the media edit settings. \n. I don't have data for where lists are placed in the HTML, but I can tell you that from a sample of 250k posts created and published via mobile, the breakdown of list usage is lower volume than other frequently used style options. Let's punt to 4.7\n. related: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/360\n. still happens in 4.6.0.20141117: https://cloudup.com/cbowR6ioJ5c\n. appears to be fixed (tested ios7 and ios8)\n. yup. will reopen if needed for any reason.\n. moving to 4.9 since this is more aesthetic than functional\n. Note: when .com post is saved as draft, the title appears in <p> tags while uploading, too, but they do not appear in the published post. Would be great to eliminate the <p> being displayed altogether.\nhttps://lookback.io/watch/uRGioNic83WbZFoHD\n. Yep\n. related https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/301\n. closing - it takes you back to the original view mode, which is consistent and makes all portions of the editor navigable. though this still feels like a flow we could smooth out, not a priority for now.\n. :stabby:\n\n. yep - to force a locally saved post, I dbl-tapped the home button then quit the app while in a post. should be able to repro the \"crash\" that way and get a locally stored post\n. thx @diegoreymendez \n. 5s, ios7\nI don't get a blocker, but I can crash the app doing the same repro steps when I hit \"save to draft\" now. log: https://cloudup.com/cye4cwaF6ij\n. It has crashed the last 3 times I tried, so no lookback yet. It appears to happen after adding media and before you see the \"uploading spinner.\" I'm on a slower connection which may contribute.\n. closing in favor of https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/503\n. Awesome\n. Sure thing! while in testing mode, just wanted to log as many specifics as I could without getting sidetracked. \n. moving to 4.9\n. 2nd repro:\n- start new post\n- skip title and add cursor to body\n- add image first thing \n- remote fails to replace local after upload is finished\nhttps://lookback.io/watch/BFeeHJdD9ByCdZmu7\n. I can repro using the first steps on 2 public blogs, so investigating a bit more...\n\nIt would be interesting to see if you saved a draft post that contained that white box, leave the post screen, then reopened the post if the image would appear correctly. - @bummytime \n\nConfirmed, images do appear inline when I return to a saved post (where initially they \"disappeared\"/became little boxes)\n. Giving happiness engineers a heads up on this so they can help users troubleshoot should users run into similar issues.\nMoving to 4.7\n. Happens more regularly for me in 4.7, ios 7\nwifi connex: https://lookback.io/watch/ztyBHxsaWhK9fyit7\ndata connex: https://lookback.io/watch/RY65CeKsuaHqNYP5k\n- open app from sleep\n- go to new post using global post button in footer\n- start typing\n. happens inconsistently enough & likely related to post restoration, pushing to 4.9\n. Also, if adding multiple images, the focus will continually jump to the top of the post as uploads complete if you try to scroll down\nhttps://lookback.io/watch/f88DNJW3wD8pmBm9x\n. can't repro immediately - moving to 4.9 - media milestone\n. can't repro consistently - moving to 4.9 - media milestone\n. In beta app on my iphone5s (ios7), the issue is subtler. Upon restoring to a post with media, the entire post is rendered immediately (including media), then the whole post, including text/title/media, seems to refresh (fades out then back in). Can't get a lookback that fast since recording stops when I kill the app.\n. pushing to 4.9\n. can't repro. closing for now.\n. Need from @thianhlu:\n- modal styling specs\n- specs for ui implementation in the visual editor\n. quick sweep of various mobile app screens on ios: https://cloudup.com/cOlUHrvWNA1\nimage options usage: will do. this one will take a bit longer to dig through what we have and potentially get a data request together. updates forthcoming.\n. makes sense to me to remove description given all inputs in the edit modal serve to update the image locally and don't get fed back into the media library. Since description doesn't affect the markup in any way, won't be saved in the media library w/ the image object, and doesn't appear in the \"edit\" modal in wp-admin, it should be removed.\n. also reported by a non a8c user:\nhttps://lookback.io/watch/iknnpWzWvwyJPNQSt\n. moving to 4.9\n. Nice - I'll check it out and close/edit accordingly once the PR is merged and shipped in an updated beta.\n. Looks good, @SergioEstevao!\n. will just make the request in 427\n. verified that it happens across devices and iOS versions - repro consistently on ios7/iphone5s and ios8/ipadmini\nhttps://lookback.io/watch/WqFjjjetaxrQfN2c3\n. - tooltip outside of editor context to notify users that may not have gone to editor that there is a more user-friendly experience\n- reusable for onboarding of other, future features\n- associated with user so it\u2019s only shown once\n. Nice!\nMy preference would be to show both to all users who upgrade.\n- tool tip on reader upon upgrade (dismissed on tap/nav) - don't show if user hits editor first somehow\n- \"new editor\" + details overlay when you hit the new editor after upgrade (dismissed with alert conf)\nI think the message is universal and helpful whether you use the editor regularly (gives the heads up you need not to feel lost) or if you haven't used the editor in a while (seeing something about a new experience might be the incentive you need to check it out). \nThis would also eliminate some complexity around determining active/non-active users.\n. After playing with a few drafts and getting feedback, let's go with something like this: \nTitle: Brand new editor\nText: This version of the WordPress app includes a beautiful new visual editor. Try it out by creating a new post.\nConfirm/dismiss: Great, thanks!\nImage: same for now\nwhy?\n- since a user may skim and exit before reading entirely, want title to be descriptive enough to capture meaning at a glance\n- conveys visual editor updates without using jargon (media, html, rich text, etc)\n- with translation/no translation in mind, keeping idioms to a minimum\n- clear yet descriptive\n- not mentioning option to disable in prompt bc html view of editor should be robust & stable enough for users partial to the legacy editor\n. @diegoreymendez - waiting on image asset from @thianhlu. just put a placeholder for now :+1: \n. works for me. \nsince the navigation is changing as well, I actually like how @diegoreymendez used the \"new post\" button to help folks make that mental leap. thoughts @thianhlu?\n\n. The WordPress app for iOS now includes a beautiful new visual editor. Try it out by creating a new post.\nsince many people may have auto-updates in the background, let's just remove the allusion to update/version entirely\nthoughts?\n. > Question: If the user updates WP iOS then opens the app, sees onboarding but immediately closes the app. Let's make sure they see the onboarding again until they take \"Great, thanks\"\nnew issue for this specifically https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/510\n. moving to 4.9 - media milestone (a fix here forces a regression on #422 & #421)\n. wondering what the implications would be in adding  &nbsp;s would be against https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/500\n. video: https://lookback.io/watch/Y5suZxN5THWMJwdC5\n. Looks awesome. Great work, @SergioEstevao!\n. Looks great. Thx @SergioEstevao \n. Suggested flows:\n- new post > cancel post. regardless of whether media is uploading or not, show slide up alert: \"you have unsaved changes. discard/save draft/keep editing.\" If user taps discard > cancel post and all uploads. If user taps save draft > throw alert to wait until imgs upload. If user taps keep editing, continue upload per usual.\n. Thanks @SergioEstevao - I'm aware of the current flow. I tagged this for @thianhlu for a UX review because it's not very intuitive and essentially removes an action that, I believe, should be an anchor/extremely consistent. When all else fails, the user should be able to hit Cancel, see an expected screen, and have the option to immediately exit the post. It is a lot to ask, especially of new users, to intuit that they should a) hit cancel b) get alert that they can't cancel c) hit uploading d) get alert/option to cancel upload e) hit cancel again f) see normal screen... without any UI hints.\nIn essence, it shouldn't matter if a user is uploading media if they want to trash the post (or if they opt to continue editing). Only if the user wants to save the post in this state, should we have to throw an alert.\nNot urgent, but this feels broken usability-wise (not functionality-wise, since it works as we wrote it).\n. ux is still a bit funky, but it works. closing for now.\n. resolved (video of updated behavior here)\n. sorry - had added when i was initially logging the crash, then after narrowing down to other people's streams, i didn't move it.\ni don't have any data on this, but it doesn't seem that far fetched that someone would add an image from a shared stream. there is no ownership indicator in the albums list > they all appear equally accessible, so having it crash 100% of the time is pretty awful. if we can make those albums not clickable in the albums list, that would be a fine interim solution.\nmoving to 4.8 as it's likely not a frequently hit flow\n. No longer crashes. Nice! Opening a couple issues for refinement.\n. specs here https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/550\n. moving to 4.9 - media milestone\n. > We could just clean all the extra progress content and temporary images if we are restoring the post...\nthanks for the detailed description, @SergioEstevao! this is a great fallback solution and one i would be comfortable with for the 4.8 release. long-term, it would be great to store the temp id's and give the option to retry again.\n. moving to 4.9 - media milestone\n. looks like it hasn't regressed - i have just been hitting more crashes than usual in testing, so it was more evident than usual that we default to top blog if blog selected is nil.\nmarked as enhancement for the future since defaulting to primary blog would still be a nice-to-have\n. can't repro\n. Configurability is something we have yet to discuss. It's not out of the question, but at this nascent point in the WYSIWYG editor's lifespan, stability is higher priority than customizability.\nTabled as far as internal dev goes, but let's circle back to configurable settings when we chat about web/native.\n. Closing for now to keep the repo streamlined. Will re-open when/if it becomes relevant for a specific release cycle.\n@meoz - thanks for the suggestion & the initiative on modifying the sourcecode to meet your needs.\n. throwing an alert here actually seems contrarian to apple's human interface guidelines, but seems like a totally reasonable interim solution: https://cloudup.com/iqzB3fMiWJY\n1. Long-term preferred solution: graceful indication in UI. If we could fade/make un-selectable all images once the user has hit 10. Example: https://cloudup.com/iOly7pvDq2T\n2. Short-term if faster/easier: alert. Let's go with single-button alert as @bummytime suggests.\nmessage: You can only add 10 photos at a time\nconfirm/dismiss: OK\n. single button alert is implemented, so closing for now - can look into more graceful ui implementation down the road \n. Yup - the goal is to fix the issues w/ the html view in new editor to meet the needs of users who prefer the legacy editor (related issues tagged #html), but at least for an interim period allow them to switch back in settings w/ the toggle!\n. I'm seeing some interesting multi-paragraph quote behavior in 5.0 develop: https://cloudup.com/iYH3AgnjMEw\nExpected: \n- quoting multiple paragraphs should preserve paragraph spacing\n- while in a quote, hitting enter should keep you in quote and add new line (as it does), but tapping quote icon in format bar should then unquote that line and set cursor at beginning of new p. Here's what that looks like on wp-admin: https://cloudup.com/iBxLenwbhgJ\n@bummytime - let's get a sanity check that post mutation isn't changing this and generally make sure there aren't regressions\n. closing here and opening a new issue with refinement specs\n. SGTM - the editor is stable at the moment and refactoring seems higher risk than necessary atm. (Assumption) Also, for those preferring to edit html, they are more likely to be familiar with &nbsp;. Moving to 4.9.\n. we now remove extra spacing entirely, consolidating any number of enter/returns to just 1 new paragraph. this has parity w/ io editor. :thumbsup: \n. moving to 4.9\n. note - wp-admin doesn't suppress all nbsp's. we now render the html the same as wp-admin text, which will include occasional, random-seeming nbsp's. It's much cleaner overall.\n. Related:\n- post drafted & published on web, html view: https://cloudup.com/ieWC50JaIAT\n- rendered on mobile, visual mode: https://cloudup.com/ivpFlcODGhF\n- rendered on mobile, text mode: https://cloudup.com/icAblUoft7m\n- updated visual layout on mobile manually, visual mode: https://cloudup.com/i5FPeJyFCfY\n- viewed html after manual editor in visual editor (spacing collapses): https://cloudup.com/isXrDiToTJm\n. so much better.\n. stream w/ example of when someone pastes text into web editor: https://cloudup.com/cdTV_RDJOag\ncommentary from @bummytime: \n\nColor commentary ==> that text uses /n/n instead of  tags and therefore only works in the native UITextView view (the HTML source view) but not in a contenteditable node within a UIWebView. We will probably have to do some kind of text sanitizing after it's pasted into the visual editor...\n. moving to 4.9\n. upon pasting a url, it is auto-linkified, even if it's an embed since we're not doing any server-side validation on-paste in the mobile app. \n\nIf the user manually un-links the url within the shortcode syntax, it should embed just fine\n\nNote that adding urls on their own line to embed does not work on the ios app at the moment since we're re-linking it upon publish.\nclosing for now since shortcode works w/ manual unlink. will circle back when we think through a better ui generally.\n. new behavior not working properly. logged new issue here https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/586\n. moved to 4.8.1 hotfix\n. here's ipad2 https://cloudup.com/iwyxMX1KmW5\n. I got this on my ipad2 (ios7) yesterday but when I try to repro on my iphone5s (ios7), the app crashes upon hitting new post 2nd time. Log: https://cloudup.com/cjE_NsiPmmI\n. Looks pretty good against the original specs: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/325 so I'm adding low priority tag\n. fixed in https://github.com/wordpress-mobile/WordPress-iOS-Editor/pull/554\n. @meremagee - I have two questions on this issue:\n\nRegarding the text, we currently have an almost similar message... should I still change it to match the message requested above?\n\nYep - change to...\nThe WordPress app for iOS now includes a beautiful new visual editor. Try it out by creating a new post.\n\nThe icons look kind of huge to me, is this the correct size? If we want to keep this size I think I can add some additional spacing on top to make it look less cluttered.\n- Keep as spec'ed here: https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/466#issuecomment-71579195\n- difficult for me to see what it looks like with the limited text bug on ios7 ^^\n. > For logo: add 36px above and below.\nUnder copy: add 36px spacing below.\n\n@thianhlu - with added whitespace does not fit on horizontally positioned phone - thoughts?\n. To make landscape-responsive, made decision to adjust img size & condense whitespace on slack. should be even whitespace above & below text & text width narrowed for better word flow.\nthis is the finished modal aside from one more update - matching \"great, thanks\" blue to img blue\n\n. fixed with https://github.com/wordpress-mobile/WordPress-iOS/pull/3193\n. > I would propose that if we can detect that no content has been added/modified (and thus wouldn't prompt to Save Draft), that we shouldn't prompt anything, and that we should just leave the view.\n@beaulebens just came to note the same thing. The concern, of course, would be that it may be disorienting if a user accidentally hits X. Can be determined via user testing/user feedback however.\n. needs a thorough look: https://lookback.io/watch/H3Yim6DAkf8gi9MzQ\n- should not be able to \"save\" a draft of a completely empty post as noted\n- upon opening the \"failed\" draft, should not see \"unsaved changes: this post has local changes that were not saved. you can now save them or discard them\" alert\n- should not get options upon hitting X/cancel again to \"update draft\" (or, really get the blocker at all)\n- if hit discard, should not get follow-up alert about unsaved changes\nalso referenced here https://github.com/wordpress-mobile/WordPress-iOS/issues/3112#issuecomment-72048338\n. IF there is zero content in the post? If it's the case that we just always save the local draft, then that is fine. If there is a way to see that the post has 0 contents, probably better not to save at all?\nthe crux of my logic is that we should never get into a state where a user can save an entirely empty draft because the process of discarding it seems to be increasingly friction-filled\n. should also get this blocker - in the last case, i was able to nav to html to see local placeholder in src\n\n. getting blocker as expected now\n. sometimes I have 2 images fail, one has the full overlay and one doesn't. assuming it's not device but img display size?\nthe arrow in and of itself doesn't quite invoke \"failed\"\n. addressed here in specs https://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/550\nsame image w/ 2 different \"retry\" implementations https://cloudup.com/cLS7BcVwKBR\n. @thianhlu - your thoughts much appreciated on who you'd like to receive the notice as audience will determine email content\n- all users with the iOS app?\n- all users who have not updated to 4.8 ~1wk after release?\n- all users who will/should receive the new editor via update, install?\n. > We will want to track clicks then ultimately upgrades just to see how these perform.\nClicks will be tracked in mailchimp. Looping in @sendhil as background so we can segment user list & get upgrades tracking in place.\n. copy v1:\nWe\u2019re thrilled to announce that latest release of WordPress for iOS includes a beautiful new visual editor. \nWith the new editor, you can add rich text like bold, italics, links, and lists naturally as you type. You can also insert images with a tap, seeing real-time uploading progress and images right in the post.\nUpdate the WordPress app for iOS to try it out!\nbutton: Update app now\nwe could create a gif or use the onboarding img somewhere for visual aide\n. here's a basic basic basic draft (i'd update the footer since recipients would also be .org users):\n\nadvised by editorial, the current template and company voice on other product notifs doesn't lend itself well to really playful verbiage, but let me know what you think @thianhlu and we can take it in any other direction.\nwe'll have a pro visual editor animation finished result ~next week. i think it would be a pretty great addition to a fairly stale, straightforward email. we could run an a/b with the animation and just text to see which performs better. or, we could move forward with a just-text email this week.\n. > Are we restricted to only this template?\nNope. we can do anything custom if you want that on your plate (looked through the MC ones but nothing jumped out as a good, clean option). I could also see what we've made in-house - where we send emails with a custom script, but I like the test options of mc more than winging it. The template as-is is pretty corporate and I couldn't balance the onboarding graphic in a lovely way, but I'll keep trying. I'll come up with more compelling language, too. \n\nTriple check that this isn't going out to anyone that has already updated the app\n\nWe'll pull from current version lists which won't include anyone with 4.8 or higher. Won't pull until just before the email goes out.\n\nBetter to use iPhone\n\nWhat about users with ipads & ipods? We could probably sort by device and send a specific draft to each if you'd prefer, but this does make the process slightly more complex, i.e. vulnerable to user error.\n. lower priority - pushing to 4.9\n. this can happen upon post restoration if update happens while app is closed & user is on a post if the user has new editor enabled. The catch, however, is that for these users (w/ editor enabled) we won't be showing onboarding.\nthat said, we do crash the app if user doesn't have new editor > leaves app on legacy editor > app updates > user opens app. logged here\n- should we reset app to my sites or reader upon upgrade & save anything in legacy > local draft?\n- try to gracefully switch legacy > new editor if user restores state to editor after update? + collapse keyboard and overlay onboarding atop post?\n. > Are users who had previously enabled the editor seeing the onboarding tip?\nNope! Thus, I think having fixed the crasher - which is the only flow through which I can think of to get the editor + onboarding - makes this issue null. Testing a couple of other things to make sure.\n@diegoreymendez @bummytime - can you think of any ways to get here on which I'm blanking?\n. given onboarding logic...\n- show onboarding to users who do not have editor available\n- never restore to legacy editor\n- must dismiss onboarding to navigate to another page\na user should never get into a scenario where they see both onboarding & editor at the same time. closing.\n. cc @aerych \n. cc @thianhlu - can you please give guidance/specs for centering/adjusting the icon? It is centered pixel-wise, but assuming you want it adjusted so that it looks balanced\n. closing based on recent updates - we can re-open an issue re img centering/balancing for 4.9. blurred img outline is ios7 specific, so lower priority (can fix in 4.9 if need be)\n. should work as is. :+1: \n. Upon open after crash > dismiss alert to send crash report > see onboarding ui for ~1sec before it disappears\n. Given we haven't had a visual mode until now and didn't have a header ui interaction previously, we don't have solid usage metrics for a benchmark. I do have a good sample of html tags from posts published from mobile that reveals headers haven't been widely input. Of course, there is bias in that sample since there also wasn't a header button.\nFor now, let's call it a bug - we should preserve anything user adds in html - and I'll keep my finger on the pulse of user requests and run another sample after the visual editor is live for a bit!\n. seems to be triggered for any styles when something is hyperlinked, including the case where you don't have any richtext and simply link one word\n. interim solution is to dismiss keyboard if onboarding is ever shown on new editor - this will preempt the \"getting stuck\" issue. the rotation glitch appears to be on the ios side and isn't reproducible in xcode. closing for now and ensuring users can't ever get stuck when build is cut. if a user hits this edgecase flow, they will see onboarding upon next app open.\n. I realized this is probably updated in dev, but I haven't seen the latest cut yet. Adding to \"resolved > test\" and closing for now.\n. Will do. If this appears to be a trend, we could also experiment with allowing user to hit \"media/img\" icon while in title like they can with HTML (then set focus to body if it's on title and follow add media flow as usual)\n. Looks much better. Thanks for the clarification around the difference in fixed/scrolled @bummytime \n. will test when 5.1 beta hits\n. also logged in main ios repo: https://github.com/wordpress-mobile/WordPress-iOS/issues/3366\n. Let's look into sanitizing paste from other apps in visual editor\n. Pasting from safari (tested lipsum.com content) adds spans/styling as well.\n(This can, apparently, cause some fun edge-case issues if you paste text that's surrounded w/ \"s then add media within. WP reads the initial quote then closes it with the first \" within a span tag, exposing the html: https://cloudup.com/crnq1v15mou)\n. > If you held a :gun: to my head, I would say let's go with option 3\nWe can update the app FAQ so that happiness engineers have a reference for directing any users who want more info\n. Can't make one if post is empty - because it won't select if the post is empty, so both. I'll keep my eye on #622 - didn't see this issue listed. \n. :+1: \n. regressed, should look like this https://github.com/wordpress-mobile/WordPress-Editor-iOS/pull/505\n. related to https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/531; formerly fixed in https://github.com/wordpress-mobile/WordPress-iOS/pull/3286\n. ",
    "rachelmcr": "I tested this in the latest beta v. 5.9.0.20160126 and this is no longer an issue. I logged in to the app, opened the editor, and it defaulted to my primary blog. Closed as resolved. :)\n. Are there other likely sources of failure for the location UI (since https://github.com/wordpress-mobile/WordPress-iOS/issues/1969 was fixed)? If not, I'm inclined to close this issue since there haven't been any recent reports of UI glitches like this.\n. I tested this in WPiOS 6.2.0.20160429 (using iPhone 6, iOS 9.3.1). I can no longer reproduce this issue. I always get a logged-in view of the posts, and my view is only counted in stats when viewing a published post on a private blog (expected behavior). In other cases, the view stats don't change for the posts I viewed.\n. This came up in app feedback recently:\n\nOne feature that would be very nice is the ability to make posts sticky within app.\n\nInternal ref: AppbotX 28801. We received another request for this feature in support (internal ref: 198191-h).. In addition to the missing Size field, other fields are (now) also missing as reported in #752. I'm going to close this issue as a dupe since the newer issue includes some other related, missing fields.\n. This was resolved in the main repo: https://github.com/wordpress-mobile/WordPress-iOS/issues/2698. A user reported this typing lag again on iPhone 5, iOS 9.2.1, app v. 5.8. The issue was specifically with the visual editor; disabling the visual editor improved their typing experience.\n. Two users reported this issue in app reviews using app v. 6.0:\nReview 1:\n\nIt's great and easy to navigate, but there is significant lag when typing your posts.\n\nReview 2:\n\nThe main problem is the ridiculous lag between typing and presentation; I find myself waiting up to ten seconds for a sentence I just typed to actually show up in the editor window.\n. Another user requested an \"open link in new window\" feature in the link modal. I'm adding it here since it's also mentioned above, but let me know if I should open a new issue for this feature request.\n. The editor no longer wraps text in p tags at all. Instead, paragraphs are separated with two lines breaks in the HTML view. Screenshots: https://cloudup.com/caKwmWIW01L\n\nThat behavior is consistent with the Calypso and WP Admin editors. Screenshots: https://cloudup.com/cDXNCncP-ou\nThe end result is that the initial img, ol, or ul is not wrapped in p tags, and the rest of the text in the post is. However, since that is consistent across platforms, I think we can consider it expected behavior here.\nTested in WPiOS 6.2.0.20160429 using iPhone 6, iOS 9.3.1 and in EditorDemo using a simulator.\n. I tested with the original steps and can still reproduce this issue. It's definitely confusing/disconcerting \u2014 even if I select a different site from the site picker in the editor, once I close the editor and reopen it I expect it to revert to the site I'm on in the My Sites tab. (And I'd expect it to revert to my default site when on other tabs in the app.)\nTested in WPiOS 6.2.0.20160429 using iPhone 6, iOS 9.3.1\n. I confirmed that auto-capitalization is not enabled in:\n- Image title\n- Image caption\n- Image alt text\nThe post content area does auto-capitalize now.\nTested in WPiOS 6.2.0.20160429 on iPhone 6, iOS 9.3.1\n. Related Android editor issue: https://github.com/wordpress-mobile/WordPress-Editor-Android/issues/81\n. I re-tested this issue and can no longer reproduce it. On a WordPress.com site with a custom domain, I can preview a saved draft every time without any errors.\nTested on WPiOS 6.2.0.20160429 using iPhone 6, iOS 9.3.1\n. This was also reported in https://github.com/wordpress-mobile/WordPress-iOS/issues/3828 and in recent testing autocorrect worked as expected with an external keyboard. Closing as it works for me now.\n. Another user requested (in an app store review) that we add a word count.\nFor comparison, in Calypso the word count appears in the bottom right corner of the editor (only visible when you scroll to the bottom of the editor, not pinned to the bottom right):\n\n. A user sent us feedback (Ref: AppbotX 26970) requesting this feature:\n\nA word count in the writing screen, when creating a new post would be beneficial. This was requested again recently in an app review:\nI primarily use this for writing draft blog posts. I'd love to see a word count featured added.\n\n@joesondow We aren't currently working on this feature, but we are tracking requests and will consider adding it in the future. Patches are also welcome! :). I confirmed that this is still an issue as of beta app v. 6.1.0.20160331. If I tap on the \"uploading\" progress bar or the uploading image directly, I can stop the upload, but if I simply backspace over it the uploading progress bar keeps going and the image uploads to the media library. I also expected the image upload to be canceled, if possible.\n. A user also reported this in Helpshift issue 56817. I reproduced it in the latest 5.8 beta.\n. This behavior was also reported in #808 for Vietnamese keyboards:\n\nStep to reproduce:\n1. Go to iPhone keyboard setting, add language Vietnamese.\n2. On WPE, switch to edit mode.\n3. Switch keyboard to Vietnamese.\n4. Press on A and A one more time you will get \u00c2 character.\n5. Press another character such as A.\nResult: WP auto break the line like:\n------------------Starting of Editor ---------------------\n\u00c2\na |<-- caret position\nSame bug with another character like E and E -> \u00ca , D and D -> \u0110, U and W -> \u01af, O and W -> \u01a0 , U and J -> \u1ee4 , O and J -> \u1ecc...\n\nI reproduced the issue on my iPhone 6, iOS 9.3.1, WPiOS 6.2.0.20160429.\n. A user reported this issue again (for Korean) in an iOS 6.2 app review (2 stars). Just noting it here to keep track of user reports.\n. I'd say we're resolving this issue in 6.8 (available in the app store soon) with the addition of a \"Save as draft\" quick action on new drafts: https://github.com/wordpress-mobile/WordPress-iOS/pull/6207\nUsers will be able to tap the ellipsis menu in the top right and select \"Save as draft.\" (This addresses the original issue of making it easier to save drafts to the server; I think an auto save feature would need to be discussed separately.)\nMarking this issue as resolved since this will be released with version 6.8.. I checked on the same device (iPhone 6) running iOS 9.2.1 and the beta 6.0.0.20160208 and I can't reproduce it there, either. Looks ok to me now.\n. > Should we ask the user if he wants to delete the post?\nThat sounds reasonable to me. Theoretically the user might be trying to remove the post content without completely deleting it, but doesn't seem as likely.\n. Ah, I understand now. I don't think we need to offer to delete it \u2014 the current behavior seems reasonable to me, and users can always delete the post from the post list if that is their intent. I haven't heard of confusion from users about this behavior, so I'd say we can leave it as is.\n. Could this be related to https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/752?\n. I agree with @bummytime \u2014 I would expect the selection to always be dismissed (the same as in the web editor) after I finish adding a link, even when I explicitly select the text before adding the link.\nI don't feel super strongly about it, either, but given that the web does it that way, I'd argue for consistency based on that at least (unless there's a compelling reason why an app user might expect different behavior).\n. I confirmed this is fixed (confirmed in 6.3 beta); closing the issue.\n. I thought it happened every time, but I just tried again and it didn't happen. To be sure, I tried this sequence of exact steps:\n- Close the app completely (double-tap the home button and swipe to close)\n- Open the app (already logged in) - it opens to the My Sites tab\n- Tap the editor icon at the bottom of the app\n- Tap into the post body in the editor\n- Tap the Add Media icon\n- In the media picker, select an image from the camera roll and tap Done\nMost times I complete those steps, the toolbar disappears. However, it looks like this isn't consistently reproducible. I can't think of any other factors that might be interfering, but I'll keep testing to see if there's another factor involved in the issue.\n. I still haven't been able to reproduce this consistently. It seems to happen whenever I select an image to upload and then almost immediately select \"Done\" in the media picker, and doesn't happen if I wait in between selecting an image and selecting \"Done.\" However, I'm not sure that's reliable.\nA few other notes:\n- Testing with the same blog can produce different results\n- Testing with the same image can produce different results\n- Adding multiple images to the same post (one at a time) can produce different results\n- Nothing is logged in the activity log when this issue happens\n- Any action that makes the keyboard disappear and reappear also brings the toolbar back (e.g. navigating to post settings and returning, canceling an upload)\n. Another user (in an app review) reported the toolbar disappearing:\n\nThe toolbar randomly disappears while writing posts (have to exit draft and go back in to get it back).\n\nThis also still happens to me sporadically but I haven't found reliable steps to reproduce.\n. I checked this in the new beta v. 6.1.0.20160406 and this isn't an issue there. Closing as resolved.\n. This is an issue again, as seen on iPhone 6, iOS 10.1.1, WPiOS 6.8.0.20161129.. Thank you for reporting this! The issue you described sounds like one that was reported for Korean keyboards, as well: https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/705\nI'm going to close this report in favor of that one, and add the details from this report there.\n. I believe the issue is unrelated to the post content, and is actually related to the site picker in the editor. I can reproduce this issue consistently with these steps:\n1. Open the editor\n2. Use the site picker to switch sites\n3. Enter a post title\n4. Publish post\n. Another user reported this for iPad, stable 6.1 release:\n\nThe keyboard of the iPad keeps hiding every few secs. I can't finish a single sentence. Really annoying.\n. One theory, based on a recent support issue and the mention of autosave above: These users may all be using the Calypso editor in the in-app browser, and running into keyboard issues due to autosave there. When I test this on my iPhone, I run into glitchy behavior with the cursor and typing while using the Calypso editor from within the app.\n\nIf this theory is correct, preventing this behavior (e.g. with #5475) could resolve this issue.\n. This comes up on a regular basis in app reviews and support. A recent request is in 148751-h.. While we're at it, it would be nice to visually represent page breaks, too. (A user mentioned this in a recent app review.) Page breaks can be added with <!--nextpage--> in the HTML editor.\nThis is what the Calypso visual editor uses for page breaks:\n\n. I can reproduce this issue when switching between the Visual and HTML editors (either direction).\nIt's worth noting that the Calypso editor has similar behavior, as reported here: https://github.com/Automattic/wp-calypso/issues/1637\nTested on iPhone 6, iOS 9.3.5, WPiOS 6.5.0.20160901\nRelated Android issue: https://github.com/wordpress-mobile/WordPress-Editor-Android/issues/349\n. Thanks for the report! There is an issue with formatting text at the very beginning of a post, which we're tracking here: https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/754\nIt sounds like that's the bug here, so I'm going to close this duplicate report. Please let us know if you're seeing a larger issue with formatting.\n. Another reason for adding this support: consistency for removing media from the post.\nCurrently, you cannot backspace over a failed media upload to remove it. Instead, you have to tap on the image and choose to remove the failed upload. Adding support for tapping to remove successfully uploaded media would create a consistent tap-to-remove experience.. Thank you for reporting these issues. There are open issues for the disappearing content in the demo app (https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/856), the undo/redo functionality (https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/496), and starting a post with formatted text (https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/754).\nPatches for those issues are welcome. :) However, our current development focus is on a new, native editor: https://github.com/wordpress-mobile/AztecEditor-iOS. ",
    "diegoreymendez": "@astralbodies - I'm closing this as it seems to have been fixed by this PR.\nI've tested this in the latest from develop in WPiOS and could not reproduce it.\n. Closing, as this seems not to be the case anymore.  This is what the app is showing now:\n\n. Could not reproduce this issue. I'm assuming this has been fixed since the ticket is really old.\n. @astralbodies - I agree with @meremagee on this one.  I know this can feel a bit dangerous for users, but there's a specific dialog when the post is opened to explain to the user they need to save the post.\nTo be honest I think that a good alternative to this could be to force-saving posts as remotely-stored drafts at certain checkpoints.  Thoughts on this? (also ping @meremagee, @rachelmcr).\n. PS: there's also a technical reason why I recommend against trying to offer this functionality - we'd need to offer more than 1 level of post revision objects in CoreData, which could bring a lot of different issues.\n. Closing.\n. @thianhlu - Hey there.  I was wondering what the requirements for this ticket are.\n. @bummytime - I could not reproduce this issue under 4.5.  Should I close it?\n. Links can now be removed and updated.\n. @bummytime - I'm not entirely sure what the problem is.  Can you explain it to me with a quick description?  Thanks!\n. Fixed.\n. I did some research no this issue, and it definitely seems to be a performance issue in UIWebView.  Not much we can do unfortunately - although we could show a \"Loading\" overlay of some sort.\n. Tested this both in the visual and legacy editor.  I could not reproduce this, and assume it's been fixed by now with our changes.\n. @bummytime @thianhlu - I have a doubt regarding the keyboard staying up: currently the top navigation bar is being hidden while editing.  This means that in order to tap on the \"Cancel\" or \"Done\" buttons we'll need to either show the navigation bar during editing, or allow the user to lower the keyboard at some point.  I think the solution that looks better is allowing the user to lower the keyboard to save or cancel from the navigation bar.\n. @thianhlu - Here's a video showing the current state of the editor: https://cloudup.com/cOAa5vC_LHc.  Let me know if there's any feedback.\n. Merged into feature/editor-update.\n. Hey @thianhlu if you want you can assign this one to me.\n. Hello @thianhlu !  I've uploaded the current edit transition so you can see what it looks like right now:\nhttps://cloudup.com/ctJLshyD9sC\nI've noticed you mention a slight flashing of the navigation bar, but to be honest I'm not really seeing it.  I imagine that after tapping on the edit button the bar is flashing to a slightly-whiter color?\n. @thianhlu - Do you mean the toolbar that's directly attached to the keyboard, where the style buttons appear?\nI'd suggest to eventually target that for v4.5.  If you agree, maybe we can open it as a new ticket as well?.\nThe reason is that the toolbar for web views has to be added in a very hackish way, and implementing that animation could mean big changes (as in time consuming).\n. All right, since @thianhlu created a new ticket for the toolbar thingie, I'm closing this one.\n. I've manually merged the changes by @bummytime with my recent changes into the main editor branch.\n. Fixed.\n. Fixed by Mr. @aerych.\n. Merged into feature/editor-update.\n. Hi @thianhlu.  I've implemented the new selection animation on the source button.  I still need to do some extra coding to propagate the change to all other buttons - but that should be fairly minor.  Here's how it looks like... please feel free to criticize anything that doesn't look right.\nhttps://cloudup.com/cL-tSEm_t3k\n. Just some info when testing this ticket: there's a big toolbar issue that will be handled separately from this ticket.  It's present in older versions of our editor too.\n. @thianhlu - There are still some issues when enabling or disabling the toolbar options, but the animation is complete.  I'm closing this ticket so we can deal with the bugs in new tickets.\n. I made a small video showing the bug.\n. Fixed in commit e445d25b6e566483a4bb7cc5d94dd5c335832480.\n. More information on this issue in this post @StackOverflow.com.\n. Fixed.\n. I'm moving the last pending issue to a different ticket.  Closing this one.\n. Fixed.\n. Fixed.\n. Fixed.\n. Fixed.\n. Fixed.\n. Completed.\n. :squirrel: \n. Note to self: seems like UL was broken with my latest changes, so I need to bring that one back in.\n. @thianhlu - Right now the edit button allows you to update the link address when pressed the second time.  Should we still replace that functionality with the remove link feature?\n. Completed.\n. Additional info: it seems to only happen with the virtual keyboard, and not with a hardware one.\n. Fixed.\n. We're going to be using the following URL:\nwordpress://editor?available=1&enabled=1\nBy loading this URL the new visual editor will be both available in the settings screen and enabled.\n. Done.\n. /cc @bummytime\n. Additional info: the editor seems to work correctly with a hardware keyboard.  It seems to have issues when tapping on the virtual keyboard.\n. Fixed.\n. I just realized that my commit to fix this issue was made to develop by mistake.  I've resubmitted to release/0.2.1 (WPiOS v4.4).\n. Fixed.\n. Closed since this has been fixed a while back.\n. Fixed \"Margin on the Preview / Options btns\".\n. @thianhlu - Since nothing is enabled in the toolbar, I'd say yes.  We'd only loose the ability to switch to HTML view while editing the title, but I don't think that's a big deal.\n. @thianhlu - About 'Height should be 80px'.  It's currently 44 - if I'm reading this right, we want it to be almost twice as tall as it is now?\nAlso about 'Divider line is 54px tall', it's 44px tall right now, I imagine we want it to follow the toolbar height (which is going to be 80px).  Correct?\n. @thianhlu - Thanks... regarding the divider being 28px... should I center it and leave some empty space above and below it?\n. Created the issue.\n. @bummytime - The cake is a lie!\n. @thianhlu - Having the ability to use the toolbar items in HTML mode will require an additional toolbar-handling engine (ie: we can't just enable it, it needs additional logic to work).  This is something that I'd suggest to move to 4.5 since it'll take some extra time to get working.\n. @thianhlu - This is a complex one which I'd only recommend to tackle after the first public release.  Might be a good idea to move to 4.7 (ie: the release after the public release).\n. @thianhlu, @meremagee - I was wondering about this ticket... is this a bug?  Can you guys provide me with steps to reproduce?\n. @thianhlu - Thanks, that clears it up for me.  I'll be checking out the options we have to handle this.\n. @thianhlu - I've reviewed this in more depth and unfortunately this will require a big layout modification on our end.  I'm moving this to 4.5 since this sort of change can turn out to be quite disruptive.\nSome extra technical details: Right now we have a text view for the title, and a web view below it for the content.  The scroll bar is on the web view, which is why scrolling down does not hide the title.  In order to have a scroll bar that affects both views, we have to either move the title field to the web view by adding a HTML input field (which will result in several modifications to how our objc code interacts with our javascript code) or having a scroll view to hold both (which I think would not be clean and can potentially cause other issues).\nThe best solution is the first one, but it'd be better to implement that earlier in the development cycle of a new version.\n. Fixed.\n. The issue seems to be closely related to a method in WPEditorViewController:\nobjective-c\n- (void)showInsertLinkDialogWithLink:(NSString *)url title:(NSString *)title;\nIf you add these instructions to the beginning of the method (thus skipping it's normal behavior) the bug goes away:\nobjective-c\n[self insertLink:@\"test\" title:@\"\"];\nreturn;\n. Displaying a standard alert view does not cause this issue:\nobjective-c\n- (void)showInsertLinkDialogWithLink:(NSString *)url title:(NSString *)title\n{\n    UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@\"Test\" message:@\"Test\" delegate:nil cancelButtonTitle:@\"Cancel\" otherButtonTitles:@\"OK\", nil];\n    [alert show];\n}\n. More info on this: the reason why the standard UIAlert doesn't cause this issue is because it doesn't try to gain focus.  This issue seems to trigger when a control steals focus from the UIWebView we use to edit the content.\n. Fixed.\n. Fixed.\n. This issue is awaiting the WordPress-iOS integration PR review.\n. I've ticket the \"Insert\" vs \"Update\" title issue, since I'm not being able to reproduce it in the latest code.\n. Hey @thianhlu.  Adding the blue \"Remove link\" option to the alert dialog as shown in the picture is not doable through Apple's APIs.  The options we have to add this button are the following:\n1. Use a standard button as shown in the picture below.\n2. Use a custom alert dialog such as this one.  But I usually advice against this kind of approach if there's a standard way (option 1) because third party components may break with new iOS versions, while standard solutions won't.  We'd also need to rewrite our alert view extension UIAlertView+Blocks.m.\n. Done.\n. Fixed.\n. Hey @thianhlu, I've just tested this and I have some doubts.\nYou mention that tapping on \"Share your story here...\" does nothing, after you select a post from the list that happens not to have a body.\nIf I understand correctly the issue may be that the placeholder \"Share your story here...\" is shown even when the post is not in edit mode.\nIs this the case?\nAnd if this is the case, what's the expected behaviour?  Should the placeholder text be hidden, or should tapping on it enable edit mode?\n. Thanks Meredith!\n. @bummytime, @jleandroperez - Can you guys check this out please?  Thanks!\n. @sendhil - I'll ask tomorrow if a version change is needed for this.\n. @bummytime - Not sure it's working 100% as we want, but theoretically [NSURL URLWithString:] already checks for that.  In any case it would be good to bring that up in testing to see if there's any fail case.\n. I've just noticed that when inserting a new link, editing the title has no effect on the link you are inserting, so I'll add that to this PR.\n. @bummytime - Inserting a link without a previous selection now works.  Thanks for the video report!\n. @bummytime, @jleandroperez - Anything else before we merge?\n. Fixed.\n. Fixed.\n. Fixed.\n. PR for WPiOS is here.\n. We should probably copy to the new editor the fixes that @bummytime applied to the old editor in this ticket.\n. Fixed.\n. @bummytime - I'll try to reproduce this in my branch for toolbar style improvements, in which the toolbar is disabled while editing the title.\n. Cannot reproduce anymore in the current version, since the toolbar style improvements removed the style bar.\n. @meremagee - I'm working on a fix for this, but if there's any chance to get the full wordpress://newpost URL (complete with the additional query parameters he's using), it would be good for testing the fixes.  Is there any chance to request this from the user?\n. The PR is available here and waiting for review.\n. As suggested by @koke, we're currently stripping all HTML from posts created by clicking on a link, until we can properly handling stripping javascript.\n. @sendhil, @bummytime  - Mind checking this PR out?  Thanks!\n. This PR is for the Toolbar Styling issue.\n. @sendhil, @bummytime - Let me know if we can go forward and merge.  Thanks!\n. @hugobaeta - We ended up going with standard colors, although I couldn't find the exact one you mention.  I'll talk on monday with @sendhil, and @drw158 to try and figure that out.\n. Fixed.\n. @koke - Fixed addSlashes for the JS injection PR in WPiOS.\n. I've added this ticket to implement unit tests on all public methods in WPEditorViewController, since it's the most important class in the pod, and a good starting point.  The reason why I'm not implementing them now is to speed things up a bit for WPiOS v4.4, and also because there are some additional tasks that must be performed to start writing unit tests for this pod, that are not related to this issue.\n. This will be continued here.\n. @jleandroperez - Small review, whenever you have a moment. :)\n. Fixed.\n. @astralbodies - Small commit.  Can you review it?  Thanks!\n. @bummytime - Whenever you have a second, can you check this one out please?  Thanks!\n. @bummytime - Added the VC to iPad plus the message to explain it's purpose.\n. @oguzkocer  - Review?  Thanks!\n. I've just committed some changes that were missing from the initial commit.\n. The cursor is set again.  However keeping the position of the cursor when switching between modes may be very complex to implement, and I would suggest to move this one to 4.7 (after the first public release).\nWhy it's complex: HTML selections are very sensible to modifications of the content.  If the HTML is modified while in source mode, there's no direct and easy way to restore the original selection when going back to visual mode.\n. Fixed.\n. @sendhil - Good call, just added an alternative link for the raw logs.\n. /cc @bummytime \n. :squirrel: \n. /cc @bummytime \n. /cc @bummytime, @sendhil \n. @bummytime Thanks!  It's actually a requirement from this ticket.  It's not so clear there, but the request was not to show \"Share your story here...\" while not in edit mode.\nI definitely think it would make sense to make this configurable (zss_editor.alwaysShowPlaceholder or something like that).  Let me know if that sounds good and I'll implement it.\n. @bummytime - Regarding that second comment I didn't notice the flash so I'll hold this back for a bit more and check that out.\n. @bummytime - The focusing and flashing problems should be fixed.  However making it possible to configure when the placeholder shows will be handled through a different ticket to avoid making this one too extensive, if that's fine for you.  This ticket is again ready for review.\n. @bummytime - Here's the ticket for the configuration option.\n. The underlying issue is fixed, but we still need to integrate this into WPiOS.\n. /cc @bummytime \n. @thianhlu, @meremagee - Thoughts?\n. @thianhlu - Since the initial feature has already been committed and merged, would you mind creating a new ticket for the new spacing issue/improvements?  Thanks!\n. @meremagee - Is this necessary?  I think this may not be necessary or worth it at this time.\n. I'll close for now since I was the one who opened this ticket in the first place.\n. @bummytime - Let me know if this is ok! :dancers: \n. Fixed.\n. /cc @bummytime \n. Still reproducible under iOS 9.0 by following these steps:\n1. Reset the simulator.\n2. Launch the app.\n3. Sign in\n4. As soon as you sign in, disconnect the wifi.\n5. Create a new post.\n6. Reconnect wifi - the post format is never loaded.\n. Fixed.\n. Fixed.\n. This is a status message posted by @SergioEstevao in an initial/tentative PR.  I'm posting this here for context:\n\nTrying to upgrade the uses of UIWebView to WKWevView, here a list of main issues to solve:\n- [x] Port the hack to have a read/write customAccessoryView from UIWebView to WKWebView\n- [ ] ~~Remove unnecessary hacks~~ (EDIT by Diego: let's leave this for v2).\n- [x] Make custom fonts load in the web view, because it looks it does;t have access to system ones.\n- [ ] ~~Port javascript html schema callbacks to use WKUserContentController~~ (EDIT by Diego: let's leave this for v2)\n. Custom fonts are now loading in the web view.\n. I'll be implementing native callbacks in a separate branch named feature/260-wkwebview-native-callbacks.  That way we can either decide to merge them as part of this PR or in a separate one.\n. When integrating this into WPiOS we have these issues:\n- [x] When posting, the last character typed is not saved.\n- [x] Can't update a post after editing it - the button remains greyed out.\n. @SergioEstevao - Changing back and forth from source mode to regular mode should be working fine now.  I just applied a fix for the issues you were seeing.\n. Fixed the remaining issues we'd found.  Will keep testing before creating a PR.\n. Fixed an issue with device rotation by removing an old hack that seems not to be necessary anymore.  Ping @bummytime to confirm.\n. @rachelmcr, @bummytime: Added several fixes for the focusing issues and recovery.  Also added a fix for the input accessory view issues when using an iPad.\nMore specifically:\n- The focus should now return after adding images.\n- The input accessory view should now be visible when using an iPad.\n. Due to limitations in WKWebView, we're putting this idea on hold for now.\nIn particular we're not able to present images from private blogs, as there's no mechanism to add authentication cookies to those requests.\nWe'll keep this issue open and branch feature/260-wkwebview will be kept updated in case we find a solution for this problem.\nMore information:\nhttps://bugs.webkit.org/show_bug.cgi?id=140191\n. I'm dissociating myself from this task for the time being, and until cookies-adding support for WKWebView comes out.\n. I was able to reproduce this issue.  It's caused by some code we have to detect empty posts (which apparently needs to be fixed).  Thanks for the report, @roundhill !\n. Fixed.\n. :shipit: \n. Fixed.\n. /cc @bummytime \n. Just some final info: created a new ticket for the title <p> tag bug.\nAlso regarding #265 I did fix some focusing issues in the link editor, but I'm not entirely sure if those were the same from the original code, or introduced again by me in this branch! :) (I'm \"da bugmaker\"!)\n. Since we're already using CocoaLumberjack, we're going to be using that too for the editor.\n. Fixed.\n. Fixed.\n. Brought back some old code to fix this, which was deleted by mistake.\n. Fixed.\n. /cc @bummytime \n. Fixed.\n. /cc @bummytime \n. /cc @bummytime \n. Thanks @bummytime!\n. /cc @bummytime \n. /cc @jleandroperez \n. Fixed.\n. /cc @jleandroperez \n. Moving this to 4.7 since it's too huge a change to include so soon.\n. Fixed.\n. @maxme talked with the #design channel people, and they recommended to use this image.\n. @thianhlu - Not until downloaded.  We may have some hints in the HTML code or not - if the user defined the image \"display\" size regardless of the real image's size - but I wouldn't count too much on it.  IMHO given the size of the editor window, we could go for a relatively small placeholder until the real image is loaded.\n. @thianhlu - Correction!  @meremagee (correctly) pointed out that for images uploaded by the user we WILL have this information.  I was thinking about the case where you open some post and the HTML loads a remote image you don't upload.\n. @thianhlu - Actually when you're uploading the image, we'll show the image right away, even though you're still uploading it.\n. @thianhlu - We still need the placeholder image for the case in which you open a post for the first time (for example a post you created in the web editor) and the images need to be downloaded.  I'd show a placeholder in that case.\n. Fixed.\n. @meremagee - I am currently not being able to reproduce this.  I believe this bug may have been fixed by this PR from 4 days ago.  I'll close this as fixed for the time being.\nYou should be able to test this in the latest internal builds.\n. Yep confirmed.\n. Fixed.\n. To reproduce this, test from WPiOS under iOS 7.1.  Make sure the virtual keyboard is up when the focus i s still on the title field.  Select the content and add a tall image.  100% reproduction rate.\n. Fixed.\n. We should get this little guy a suit.\n\nJokes aside... I'm on it.\n. @meremagee - I'm leaving this ticket for you to close, since it's proving to be a very recurrent issue, and I'm not entirely sure the case I fixed is the same you're seeing.\nThis is not included in v4.7 due to timing, but it should be testable in the next internal release.\n. Fixed.\n. @meremagee - Actually it should work anyway.  The keyboard remaining hidden was introduced by another PR recently but is coincidential - it's a separate bug we should be able to resolve regardless.\n. @meremagee - This is the issue for the keyboard problem.\n. Fixed.\n. Dude, this is awesome! :)\n. @bummytime - I'm currently on a very bad internet connection so I couldn't really check-out the code and test (I'm at the airport).  Regarding the visual check I didn't find anything wrong, good job!\nOne final thought that may spawn a new ticket: I believe it's possible the user may change the keyboard in real time (ie: a user that has both an english and an arabic keyboard enabled).  Sticking to the first keyboard the editor is opened with may not be accurate - I'm not too sure of what the \"correct\" behavior would be.\n. I don't think any of my comments warrant changes in your commit - maybe another ticket... so :shipit:.\n. /cc @bummytime - Ping!\n. Thanks I'll handle the scrolling issue through this ticket. It's not exactly the same issue but I'll\n. /cc @meremagee - For UX review, improvements, changes, etc.\n. Fixed.\n. Nice work.  Only 1 comment.\n. :shipit: \n. Thank yooooouuuu, Sir!\n. Fixed.\n. Fixed.\n. :shipit: \n. I'm not being able to reproduce this anymore.  I believe this was fixed by this PR.\n. I could reproduce this on the simulator - iPhone 5, iOS 8.1.\n. Fixed.\n. Just a few minor comments above.  Awesome changes.  And extra points for fixing the style of the font methods.\nLet me know what you decide about the coloring thing so I can approve the merge.\n. :shipit: \n. Fixed.\n. @thianhlu - It was, but it regressed on the latest builds.  The cause is the fix we used for this bug.  I'm reopening this bug until we can figure out if there's a way to have both working properly.\n. Fixed again, after a regression caused by fixing this issue.\n. PS: not included in v4.7 due to timing\n. @thianhlu - I'm moving the dimming to a 4.7 ticket, since I couldn't find an easy way to achieve that now.\n. Done.\n. Great report from @meremagee.  Scary stuff!  :fearful:  I'm checking this out.\n. I can't reproduce this particular issue, but I'm seeing a memory problem under iOS 7 which seems to be a UIWebView bug, and it's possible that this bug is coming up differently on devices (ie: focus reset instead of the crash I'm seeing).\nI'll fix that bug and then ask you to re-test this, since I can't reproduce it myself.\n. @SergioEstevao - This one's ready for merging.\n. @bummytime - Some additional info:\n- This PR fixes this issue.\n- The WPiOS branch you can use to test this is: issue/editor-301-cant-scroll-after-adding-media\n. Fixed.\n. @bummytime - This PR includes some fixes from another PR, since I needed them here.  You may want to review the other PR first.\n. Thanks!\n. Since I reopened this, and apparently for no reason, I'm closing it again.\n. Good job!  Just tested this and it seems ok to me.  Let me know when this is ready so I can give it the :+1: it deserves :bow: \n. Cool addition of the semicolons.  Also the title creation now looks so modular it's beautiful :astonished: \n:shipit: \n. Only found an issue with moving the caret, but it seems to be a WebKit issue, so we'll handle it through a separate ticket.\n:shipit: \n. Additional info regarding this problem here.\nIt seems there's no way for us to intercept arrow key presses to fix this behaviour.\n. And still more info on a possible solution here.\nWe implemented the proposed methods but while the -(NSArray*)keyCommands method was called, the selectors we returned were not.\nI wonder if this is because we need to subclass the UIWebView to allow it to become first responder.\n. Fixed.\n. Fixed.\n. Was actually not fixed.  Reopening until a new fix is available.\n. Fixed.\n. Very small comment above... feel free to :shipit: when done!  Nice work.\n. @bummytime - Awesome catch! :shipit: \n. I think it would be really nice if we managed to show the icon you mention in point. 1 be overlaid on top of the image and maybe darken it a bit (instead of replacing the image).\nThe user would then tap on the red icon, which would bring up a list of options for the user:\n- Try uploading again.\n- Remove the image.\n. Fixed.\n. Fixed.\n. @bummytime - Reviewing this.\n. Fixed.\n. NOTE: the legacy editor will be fixed in this issue.\n. Duplicates this issue.  Closing for now.\n. Fixed.\n. @thianhlu - Not yet, since we don't really have the retry feature working yet.  It's one of the media features that was delayed a bit by other features.\n. Fixed.\n. Fixed.\n. Fixed.\n. @jleandroperez - No need to update the version number since we use commit numbers in WPiOS anyway.  We usually match our releases to WPiOS releases.\n. Good call.  This change will require some thought and testing though, so it's a very good idea to postpone until after 4.6 is out.\n. @bummytime - Aside from my 2 comments above, this looks all right to me!  As soon as you decide what to do with those, please feel free to :shipit:\n. Thanks. \u270c\ufe0f\n. Fixed.\n. Removing my assignation until I can actively work on this one (hopefully soon :smile:).\n. @thianhlu - Just found a fix for this issue that doesn't require showing the screen modally.  The bottom bar is now hidden at all times for the editor.\n. Fixed.\n. Since the legacy editor is being phased out, and since we have so many issues to take care of for the new editor, I'm putting this one on hold.\n. I noticed that several apps show a different pre-restore image and restored VC.  Pretty standard and the effort put here may not be worth it.  Closing this.\n. Fixed.\n. :shipit: \n. :shipit: \n. Fixed.\n. Just tested on iPhone 5, 6, 6+, iPad retina and it looks great.  Checking out the code now...\n. See my comments above, but otherwise thanks for bringing this back in (which I probably broke heh)... nice job! :shipit: \n. @bummytime - Maybe we can execute a callback from JS when the image is fully displayed.\n. :laughing: We're the callback squad!\n. Fixed.\n. Fixed.\n. @bummytime - Yes :(\n. @meremagee mentioned this may be related to this issue, so we should be testing both if any 1 is fixed.\n. Fixed.\n. Hey @meremagee - I know what this is.  Just realized today we have an edge case causing this.\nSteps to reproduce:\n1. Create new post, or open an existing one.\n2. Edit, add content.\n3. Make the app crash somehow (this may also happen when you quit the app, not sure yet).\n4. Reopen the app and go see the post.\nCurrent behaviour: the post you can see in the list of posts is either blank (if on step 1 you created a new post) or the original post before your modifications (if on step 1 you edited an existing post).\nThis happens because the temporary modifications to the post are never properly saved or discarded.\n. So there's 2 things I think we need to do to fix this issue.\n1. Make sure state restoration is working properly for new posts: if you quit the app when editing a post, reopening the app should bring you back to that post.  I've found a small bug with the restoration logic that's preventing this.  Nothing big fortunately.\n2. If the app crashed and the post had local changes you didn't save or discard... when tapping on the post to see it's contents the editor should force it into edit mode and tell you that your unsaved changes have been recovered.  At that point you can either save or discard them.\n. The first point in my previous post was fixed in this PR.\nI'll start working on the second point.\n. A new issue was opened for the changes we still need to make.  The original issue reported here is now fixed.\n. I'm on it.  I'll take a look at the line you mention @bummytime.\n. @meremagee, @thianhlu, @bummytime - It seems like this was inverted for some strange reason.  The full preview will now be used by default - the only exception being if you're editing the post, in which case the simple preview will be used instead.\n. Fixed.\n. I agree on what @bummytime  says.\n. I'm seeing this again.  Opening up.\n. Actually it's not exactly the same behaviour so I'll open a new issue.\n. Reviewing...\n. :shipit: \n. Sure!\nSent from my iPhone\n\nOn Nov 23, 2014, at 11:41 PM, Matt Bumgardner notifications@github.com wrote:\n@diegoreymendez Would you mind taking a peek at this first thing Monday morning?\n\u2014\nReply to this email directly or view it on GitHub.\n. Ok so regarding the initial report unfortunately we don't have image support for private sites yet.  Or more accurately: images will be uploaded, just not visible from the device.\n\n@aerych already added support for this, but it will be released on 4.7 most probably.\n. @meremagee - Hey there.  Just wanted to check with you if this issue is still coming up for our testers (outside of private blogs).\n. Closing this for now as it should be fixed.\n. :shipit: \n. Fixed.\n. Found a bug when uploading an image and typing text right afterwards.\nHere's a video of it.\n. @SergioEstevao - Found another issue when tapping an image that's uploading.  The progress bar disappears and the image's transparency gets \"struck\".\nHere's a video of this issue.\n. @SergioEstevao - I'm pausing the review now, since the two issues in the video will probably require some changes to this.\nSo on the up side:\n- The look is awesome.\n- The fading-in of the image and the progress bar look are spot on.\n- The code looks very clean, nice job.\nOn the down side:\n- The two issues I posted on the videos mean we have to hold a bit more on this PR.\n/cc @thianhlu and @meremagee to chime in on those.\n. Also please let me know when those are fixed since I'd like to have an extra run at this PR before pushing the changes.\n. @SergioEstevao - Regarding the second video I posted: I'll review that keeping in mind it's forcing the download to fail by design.  Thanks.\nRegarding the first video:\nUnfortunately the iOS + javascript integrations can take a ton of time to get right.  So far we have been spending lots on time on research, because some features tend to fail like this.  I'd honestly not merge this unless we can get that feature fixed - mostly because we may need to switch approach to fix this issue.\nI'd start by looking for ways in which we can overlay or draw the progress bar on top of the image.  I'd also try looking for CSS solutions that don't add objects to the DOM hierarchy.  For example playing with background-image... or content: url(image);, or other such tools.\n. Looking nice.  Still I'm getting two more issues:\nFirst issue.\nSecond issue.\n. I'll open two tickets for the issues reported above.\n:shipit: \n. @SergioEstevao - Can you please look into this issue?\n. This is new afaik.\n. @SergioEstevao - I'm reviewing old tickets and noticed this one is assigned to you.  Is this ticket still valid?\n. No longer reproducible.\n. No longer reproducible.\n. Fixed.\n. @meremagee mentioned this may be related to this issue, so we should be testing both if any 1 is fixed.\n. Fixed.\n. @bummytime - One last comment: I think we should create a separate ticket to remove what's not needed anymore (the ZSS icons, underline, keyboard).  Thoughts?\nOther than that, please feel free to :shipit: .  This is good.\n. So this issue is still happening when I test it.  If you prefer to handle that separately just remove the reference in the PR and we can handle it at a second time.\n. @sergio - So both issue 301 and 394 are unaffected by this PR.  Just change the PR description and we can take those separately.\nAlso please assign this issue to yourself.\n. :shipit: \n. Fixed.\n. Not working properly, yet.  Need to apply some extra fixes.\n. Fixed.\n. Fixed.\n. Fixed.\n. @bummytime - Info on how to test this:\n1. Check-out the WPiOS branch issue/editor-430-black-borders.\n2. Run pod install.\n3. Launch the iPhone 5 (iOS 7.1) simulator.\n4. Create a post and save it.\n5. Open the post again.\n6. Edit the post, add some text to the end of the contents you already have (it's not triggered by the title here).\n7. Discard changes.\nWithout the delay I added, the title and separator HR are not rendered here.  With the delay I added, it's rendered properly.\n. @aerych - Just reviewed the code... I'll be testing this and will let you know if there's anything on that front.\n. :shipit: \n. I :heart:  PRs that remove code.  I've checked the changes here in github and using this line to filter out the removed files:\ngit diff a02bfc7e40ea03140fc553ad257d1583ac3638ca --diff-filter=CM > diff.txt\nAnd it looks good.  This is also compiling properly and there are no analyzer errors... so :shipit: \nNice work @sendhil!\n. Fixed (although not included in v4.7 due to timing).\n. @meremagee - Is there a download link for the pen icon?\n. Closed by mistake.  Reopening.\n. @thianhlu - Replies to your questions:\n- The button icon is the same.  It was chosen as the temporary artwork, but it turned out to be nice that it refers to the button you should be pressing to follow the popup's instructions.\n- The overlay should be the default but I'll double check it.  We should be able to make a 0.5px line.\n- Since there's a question by @meremagee about this, please let me know guys if a change is needed.\nPoints 1 and 2 are ready to be worked on... for point 3 I'd need the final text.  Let me know @meremagee and @thianhlu  !\n. Fixed.\nThe remaining requests where opened as different issues:\n- Issue 510.\n- Issue 519.\n. There currently isn't any mechanism to do this.  The set of elements available is currently hard coded.  @meremagee and @thianhlu should be able to reply as to wether there are plans to bring this feature in.\n. Closing this, to merge the changes into release/0.3 instead.\n. Again wrong... should be against release/0.3\n. This can be tested in WPiOS branch issue/editor-324-janky-animation.\n. Small issue, I'd be ok with treating this as a different ticket if you prefer:\n1. Go to source mode\n2. Select some text\n3. Tap the link button\n4. Cancel\nCurrent behaviour: no text is selected\nExpected behaviour: the last selection should be maintained\n. So just check my previous message and we're ready to :shipit: !  Nice work!\n. @meremagee, @bummytime - Should users still see the option in settings to go back to the old editor?  I think it would be a good thing to offer them a chance to go back for the time being, but need confirmation on this.\n. Fixed.\n. Fixed.\n. @bummytime - Looks awesome, builds, runs... :shipit: \n. :shipit: \n. Fixed.\n. Fixed.\n. @bummytime - That's scary.  Especially considering that the app may restore state in a different number of similar but different situations.\n. @bummytime - Opened a separate issue for the editor state restoration madness.\n. Fixed.\n. @aerych - I was able to track this back to this commit.  I wasn't able to spot where it's coming from, but I imagine it may be because of some change in the editor pod code.\nPS: I'm assigning this to you since I will not be here tomorrow during the day (and this is kind of high priority I imagine).  I will be available later tomorrow so leave me a note here if you need me to follow up.\n. Here's a video of the problem.  The video was not recorder in the latest version but in the commit reported in my previous message.\n. May be related to this issue.\n. @aerych - Thanks I'll follow up from that commit.\n. @aerych - Just found that not calling any javascript code seems to fix it.  I'll upload and let you know so you can test it.  My goal here is to get to a point where the current solution is enough for us to be able to spend time in something more solid.. cough native cough.\n. Fixed.\n. Reopening until this PR is merged.\n. This can be tested in WPiOS branch issue/editor-514-blank-editor.\n. @bummytime - Definitely.  I'm working on @aerych 's observations and will take care of doing that as soon as I can merge this in.\n. @aerych - I've changed the CGRectGetWidth and CGRectGetHeight in other places in the code too.\nI know this would require another review, but since the fixes in this PR need to be added to a new build ASAP I'm merging it right away.\nI'd only need you to please check this tomorrow when you're available just in case.  The changes are just a few so I'm not expecting there to be any issues.\n. @meremagee - I have two questions on this issue:\n1. Regarding the text, we currently have an almost similar message... should I still change it to match the message requested above?\nThis version of the WordPress app includes a beautiful new visual editor. Try it out by creating a new post.\n1. The icons look kind of huge to me, is this the correct size?  If we want to keep this size I think I can add some additional spacing on top to make it look less cluttered.\n\n. During testing I'm seeing problems with deleting the first word in a paragraph.  Also had problems setting the first word in a paragraph to bold or italic.\n. @SergioEstevao - Just some style comments above.  Please let me know when this is ready for a second :eyes: .\n. :shipit: \n. Completed.\n. Also - a blockquote can't be removed visually unless it's the closest parent format block.\n. Fixed.\n. I'm late to the party... awesome catch @bummytime!  And I share @aerych 's dumbfoundedness (did I just make that word up?)...\n. Changed the code following the comments above, and added some details to a comment to make it easier to reproduce the initial issue.\nReady for another :eyes: \n. :shipit: \nJust make sure to integrate the necessary changes into WPiOS if any.  Specifically calling saveSelection if that's needed.\n. Nice catch.  :shipit: \n. The crash is resolved in a different issue, so I'm leaving that out for now.\nAre users who had previously enabled the editor seeing the onboarding tip?\n. Agreed.  Let's keep an eye out for this though.\n. :shipit:\n. @aerych - Try adding this by hand in the HTML editor:\nhtml\n<b contentEditable=\"false\" style=\"-webkit-user-select: none;\">Hello there</b>\n. @aerych - Shall we close this or do we want to make this more specific to fix certain tags?\n. :+1:\n. Thanks for the report.  Should be an easy fix.\n. It seems there's some strange problem with the legacy restoration code, when the new editor is enabled. In order to fix this issue in a secure manner I disabled the legacy editor restoration if the new editor should be used instead - the result is that the post will be saved as draft but the legacy editor window will not be restored and the app won't crash.\n. Fixed.\n. On my end this is ready to :shipit: .\n. @meremagee - Isn't this a usability issue as well?  It sounds to me like we should be offering a way for the user to add a header in visual mode, without needing to switch.\n. We used not to show the toolbar when the user was typing the title, but that made it impossible to switch to HTML mode, since that's where the HTML mode button is.  That's the reason why the toolbar was shown even when the title was selected.\nJust a bit of important background since we'll need to solve that issue if the toolbar is hidden.\n. @bummytime - Done!\n. Works nicely for me. :shipit: \n. @aerych - Changes completed.  Let me know if there's anything else.\n. Fixed.\n. :shipit: \n. FYI @bummytime, @meremagee \n. :+1:\n. I'm on this right now... sorry for the delay @bummytime \n. :shipit: \n. /cc @bummytime, @aerych \n. @bummytime - Still on it... I'm having a hard time finding the right logic to fix the issue you found.  Want me to close the PR until it's ready again?\n. @bummytime - Updated!  Finally :)\nIt still fixes the above bugs and some extra stuff.  Paragraph support is improved so it should be more difficult for the user to type outside of paragraphs - which in turn is a good thing to better stick to the web editor support.\nI'm pretty sure we'll still find issues with blockquotes, especially when adding them inside other elements (such as lists).\nMy idea at this point would be to merge this in, if during your review we feel this is better than what we have, and open bugs for anything minor you may find.\nLet me know your thoughts.\nTest 1:\n- Play with blockquotes, enable and disable at will.\n- Make sure nothing breaks.  I'll open new issues for any minor bugs we find.\n- Blockers and major issues will still be fixed in this PR.\nTest 2:\n- Try to write outside of paragraphs.  It can still be possible by editing the sources or pasting but it should be almost imposible to write outside paragraphs by typing in the visual editor.\nTest 3:\n- Make sure the issue reported at the top of this PR is fixed.\n. PS: @bummytime - most of the changes are in the project file, not sure why but I'll deal with those when merging. The PR is not that huge so don't worry. :)\n. PS2: @bummytime - also had to update some rangy files.  You should be able to skip those entirely.\n. @bummytime - Yes it was.  Although at this point I'd rather not tick that item as completed yet, and treat that issue in a different PR (to wrap this one up and start from scratch).  Does that sound good to you?\nBtw, this review has been extremely positive for the code.  Very nice job!\n. I just fixed the exception you found in your tests and fixed the bug that was making some paragraphs disappear when enabling blockquotes.\n. Considering this is working as it is I'd prefer to split this new update into a new PR, if that sounds good to you.\n. Hey bummy, just double checking if this is ready to ship.  Let me know!\n. /cc @SergioEstevao, @bummytime, @aerych\n. As discussed over Slack, the dialog should be ok even on release builds, as the editor should be terribly broken to show that message and it would at least offer us better user feedback if that ever happened.\n. @bummytime - Is the WPiOS testing branch issue/editor-603-paste-text-fail?\nIf that's the case, I'm getting an error when installing the pods that I believe was fixed recently in develop.  Merging develop into your branch should fix this.\n\nReport\n\nWhat did you do?\nWhat did you expect to happen?\nWhat happened instead?\n\nStack\nCocoaPods : 0.35.0\n        Ruby : ruby 2.0.0p481 (2014-05-08 revision 45883) [universal.x86_64-darwin14]\n    RubyGems : 2.0.14\n        Host : Mac OS X 10.10.3 (14D131)\n       Xcode : 6.2 (6C131e)\n         Git : git version 1.9.5 (Apple Git-50.3)\nRuby lib dir : /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib\nRepositories : master - https://github.com/CocoaPods/Specs.git @ 8e67850b7a9953771d03e70a879eada1f33ef2a5\nPlugins\ncocoapods-plugins : 0.3.2\ncocoapods-trunk   : 0.4.1\ncocoapods-try     : 0.4.3\nPodfile\n``` ruby\nsource 'https://github.com/CocoaPods/Specs.git'\nxcodeproj 'WordPress/WordPress.xcodeproj'\ninhibit_all_warnings!\nplatform :ios, '7.0'\npod '1PasswordExtension', '1.1.2'\npod 'AFNetworking', '~> 2.5.2'\npod 'Reachability', '3.1.1'\npod 'NSURL+IDN', '0.3'\npod 'DTCoreText',   '1.6.13'\npod 'UIDeviceIdentifier', '~> 0.1'\npod 'SVProgressHUD', '~>1.1.3'\npod 'AMPopTip', '~> 0.7'\npod 'wpxmlrpc', '~> 0.8'\npod 'Mixpanel', '2.5.4'\npod 'CocoaLumberjack', '~>1.9'\npod 'NSLogger-CocoaLumberjack-connector', '~>1.3'\npod 'google-plus-ios-sdk', '~>1.5'\npod 'CrashlyticsLumberjack', '~>1.0.0'\npod 'HockeySDK', '~>3.6.0'\npod 'Helpshift', '~>4.10.0'\npod 'CTAssetsPickerController', '~> 2.9.3'\npod 'Lookback', '0.9.2', :configurations => ['Release-Internal']\npod 'MRProgress', '~>0.7.0'\npod 'Automattic-Tracks-iOS', :git => 'https://github.com/Automattic/Automattic-Tracks-iOS.git', :tag => '0.0.1', :configurations => ['Debug', 'Release-Internal']\npod 'EmailChecker', :podspec => 'https://raw.github.com/wordpress-mobile/EmailChecker/master/ios/EmailChecker.podspec'\npod 'MGImageUtilities', :git => 'git://github.com/wordpress-mobile/MGImageUtilities.git', :branch => 'gifsupport'\npod 'NSObject-SafeExpectations', '0.0.2'\npod 'Simperium', '0.7.9'\npod 'WordPressApi', '~> 0.3.4'\npod 'WordPress-iOS-Shared', '0.3'\npod 'WordPress-iOS-Editor', :git => 'https://github.com/wordpress-mobile/WordPress-Editor-iOS.git', :commit => '410a94de9b71ef4cb300f5215d3ef09bfdd7abfb'\npod 'WordPressCom-Stats-iOS', '0.3.0'\npod 'WordPressCom-Analytics-iOS', '0.0.30'\npod 'SocketRocket', :git => 'https://github.com/jleandroperez/SocketRocket.git', :commit => '3ff6038ad95fb94fd9bd4021f5ecf07fc53a6927'\npod 'WordPress-AppbotX', :git => 'https://github.com/wordpress-mobile/appbotx.git', :commit => '303b8068530389ea87afde38b77466d685fe3210'\ntarget 'WordPressTodayWidget', :exclusive => true do\n  pod 'WordPressCom-Stats-iOS', '0.3.0'\nend\ntarget :WordPressTest, :exclusive => true do\n  pod 'OHHTTPStubs', '1.1.1'\n  pod 'OCMock'\nend\ntarget 'UITests', :exclusive => true do\n    pod 'KIF/IdentifierTests', '~>3.1'\nend\n```\nError\nOpenURI::HTTPError - 404 Not Found\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/open-uri.rb:353:in `open_http'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/open-uri.rb:709:in `buffer_open'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/open-uri.rb:210:in `block in open_loop'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/open-uri.rb:208:in `catch'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/open-uri.rb:208:in `open_loop'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/open-uri.rb:149:in `open_uri'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/open-uri.rb:689:in `open'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/open-uri.rb:34:in `open'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/external_sources/podspec_source.rb:14:in `block in fetch'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/user_interface.rb:70:in `titled_section'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/external_sources/podspec_source.rb:11:in `fetch'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer/analyzer.rb:296:in `fetch_external_source'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer/analyzer.rb:273:in `block (2 levels) in fetch_external_sources'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer/analyzer.rb:272:in `each'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer/analyzer.rb:272:in `block in fetch_external_sources'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/user_interface.rb:49:in `section'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer/analyzer.rb:271:in `fetch_external_sources'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer/analyzer.rb:57:in `analyze'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer.rb:184:in `analyze'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer.rb:106:in `block in resolve_dependencies'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/user_interface.rb:49:in `section'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer.rb:105:in `resolve_dependencies'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/installer.rb:90:in `install!'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/command/project.rb:71:in `run_install_with_update'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/command/project.rb:101:in `run'\n/Library/Ruby/Gems/2.0.0/gems/claide-0.7.0/lib/claide/command.rb:271:in `run'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/command.rb:45:in `run'\n/Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/bin/pod:43:in `<top (required)>'\n/usr/bin/pod:23:in `load'\n/usr/bin/pod:23:in `<main>'\n. :shipit: \n. Heh, was wondering why I couldn't check this out... branch was dead already :smile: \nLooks good indeed though.\n. @SergioEstevao - First review is complete... I tested it and it seems to be working all right.  Please check my comments and let me know when this is ready for another look.\n. :shipit:\n. @bummytime - Please don't merge this yet, as this was branched from this pending PR.\n. @bummytime - This is now ready to review.  All the unnecessary changes were removed.\n. Also /cc @SergioEstevao.\n. @SergioEstevao - Let me know.\n. @SergioEstevao - Good points... I think at this time the best is to treat the changes you mention separately - they're related but it'll be easier for us to review the code by splitting it.  Let me know when it's ready and I can help you reviewing it.\n. Thank you!\n. @aerych - May I bother you with this quick review?  Thanks!\n. @bummytime - I just realized @aerych will not be available for a while.  Mind taking a look at this PR?\n. @SergioEstevao - Good catch... although weird... even after seeing that your indications are correct I wasn't getting those warnings at all.  Even tried a full cleanup, but still no warnings on my end.\nCan you check now and let me know if you get any additional warnings on your end?  Thanks.\n. /cc @sendhil - I think we'll need to wait for this for 5.2.\n. :shipit: \n. :shipit: \n. :shipit: \n. Adding some information for future reference.\nI was testing this issue today and fount out that dictation started failing only after a new paragraph was requested by the user.  I also started noticing error messages in Xcode showing the following message:\n```\n2016-01-07 01:00:25.335 WordPress[7576:4024723] Given text range '(null)' we could not find the last hypothesis \"Testing.\nWhat is your name?\". The likely cause is that something modified the text store or the hypothesis during dictation.\n```\nI started thinking about what may be causing this problem.  And then I noticed the dictation algorithm sometimes goes back to previous words to correct them.  I realized our code manipulates how paragraphs are created quite heavily - which may make it more difficult for the dictation algorithm to go back to previous words.  So I ended up commenting this line, which solved the dictation issues for me.\nI'm not sure this is a good solution though, as I'd have to evaluate if there's any side effects of removing that line, though.\n/cc @bummytime, @astralbodies - Any thoughts?\n. Some extra info - it seems like in addition to the line above, we would also need to remove this method and all calls to it.  Unfortunately that doesn't seem possible for us at this point.\n. I'm dissociating myself from this task for the time being, and until we can find an alternative to UIWebView and the hacks we applied to use it.\n. /cc @SergioEstevao \n. Closing this, as an alert message is now being displayed when clicking on this button in HTML mode.\n/cc @bummytime \n. @zzStar - Are you still seeing this issue?\n. There is already an easy way to save as draft, which is to:\n1. Create a post\n2. Tap X\n3. Save as Draft.\nHowever, while useful... it may be non-obvious.\nMy suggestion would be to replace the publish button with a \"Done\" or \"Save\" button for a post that was never published and, the first time the user taps on it, ask if they want to save the post as a draft, or just post it right away.\n. Thanks for the report @lizkarkoski.\nPinging @rachelmcr to make sure this is triaged.. @bummytime, @sendhil - Joining in by request of @sendhil...\nConsidering we recently had several issues caused by large PRs (one of which was mine), and how visible those issues were, I'm very wary of taking the responsibility of reviewing large PRs without extra caution.\nThat said, there are a few changes I'd like to propose:\n1. I think we should try splitting this PR up a bit since there's a few changes that could be made more atomic.  I believe we can do it gradually, and for starters we could have:\n   1. 1 PR against develop to remove the unused code\n   2. 1 PR against develop to remove the unused images\n   3. 1 PR against develop to add WPEditorFormatbarView.h without wiring it to the code.  This would be a code-review only.\n   4. The rest of the code we can re-evaluate once the previous PRs are merged into develop.  The diff is going to be much smaller and maybe we can split some more.\n2. We should tag the editor for our testers to fully review once these changes are merged in.  We should also provide details about these changes to our testers.  Is that something we have a mechanism for @sendhil?\nI know this means extra work, but I really believe this'll turn out for the better.  @bummytime feel free to ping me if there's anything that doesn't look right / doesn't make sense in my proposal above.\n. I've been testing this under iOS 9.2 in both the UIWebView and the new WKWebView branch and it seems like there's no way to fix this for the time being.\n. @rachelmcr - I think this would be OK when inserting both the link and the link name from scratch.\nHowever if the user double taps on an existing word to add a link, closing the dialogue should probably maintain the previous selection.  Thoughts?\n. When I try pod install I am getting this warning:\ntext\n[!] Your Podfile has had smart quotes sanitised. To avoid issues in the future, you\nshould not use TextEdit for editing it. If you are not using TextEdit, you should turn\noff smart quotes in your editor of choice.\n. Hey @bummytime .  Having some trouble running the pod install step.  This is what I'm getting:\n```\n[diegoreymendez@rMBP-Diego ~/Documents/Diego/Trabajo/Automattic/git/WordPress-iOS-Editor/Example] pod install\nUpdating local specs repositories\nCocoaPods 0.39.0 is available.\nTo update use: gem install cocoapods\nUntil we reach version 1.0 the features of CocoaPods can and will change.\nWe strongly recommend that you use the latest version at all times.\nFor more information see http://blog.cocoapods.org\nand the CHANGELOG for this version http://git.io/BaH8pQ.\nAnalyzing dependencies\ndyld: warning, LC_RPATH @executable_path/../../../../../../../SharedFrameworks in /Applications/Xcode.app/Contents/SharedFrameworks/DVTFoundation.framework/Versions/A/../../..//DVTInstrumentsFoundation.framework/Versions/A/DVTInstrumentsFoundation being ignored in restricted program because of @executable_path\ndyld: warning, LC_RPATH @executable_path/../lib in /Applications/Xcode.app/Contents/Frameworks/IDEFoundation.framework/Versions/A/../../../../Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/libclang.dylib being ignored in restricted program because of @executable_path\ndyld: warning, LC_RPATH @executable_path/../lib in /Applications/Xcode.app/Contents/Frameworks/IDEFoundation.framework/Versions/A/../../../../Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/libLTO.dylib being ignored in restricted program because of @executable_path\ndyld: warning, LC_RPATH @executable_path/../Frameworks in /Applications/Xcode.app/Contents/PlugIns/Xcode3Core.ideplugin/Contents/MacOS/Xcode3Core being ignored in restricted program because of @executable_path\nFetching podspec for WordPress-iOS-Editor from ../\n[!] Unable to satisfy the following requirements:\n\nWordPress-iOS-Editor (from../) required by Podfile\nWordPress-iOS-Editor (= 0.8.1) required by Podfile.lock\n\n[!] Your Podfile has had smart quotes sanitised. To avoid issues in the future, you should not use TextEdit for editing it. If you are not using TextEdit, you should turn off smart quotes in your editor of choice.\n``\n. :shipit: Nice!\n. @bummytime - Behaves nicely in my tests and couldn't break anything.  The migrated code looks good too.  Nice work! :shipit: \n. Code looks fine.  Testing!\n. Getting some warnings I wasn't expecting to get (given the description of this PR) inAFNetworking`.  Aside from that all good.\nPlease review if those warnings were expected and feel free to :shipit: if they are.\n. @bummytime, @rachelmcr - I'm not being able to reproduce this in the latest development branch.\nTested under iOS: 9.0, 9.2 using the simulator in both cases.\n. Closing for the time being.\n. Reopening.  Thanks for the report @KiwiNiksta.\n. :shipit: and let me know when the version # is ready so I can integrat!  Thanks!\n. :shipit:\n. @rachelmcr, @meremagee - For new posts, we shouldn't let the user save an empty post.\nBut what's the expected behavior for posts in which the user removed all of the content before clicking the X button?\nShould we ask the user if he wants to delete the post?\n. @rachelmcr - The current behavior is that when the user taps on X after deleting all the content, we simply cancel his post modification attempt and revert all changes.\nI'm bringing this up because this would be a valid alternative.  Do you think the user would expect to be offered to delete the blog instead?  Just double checking ideas.\n. Awesome, thanks @rachelmcr.\n. Moved the info above to #260.\nClosing this for now as it's going to take some extra time to get this ready.\n. For historical context: some of the code added in this PR was validated or taken from this older PR by @SergioEstevao.\n. I'm closing this PR as there are limitations with WKWebView preventing the editor from fully working.\nMore specifically: there's no mechanism for setting cookies when attempting to download images.  Since some blogs are private, images need to have the necessary authentication cookies set.\nMore information can be found in #260.\n. @bummytime - Here's a video showing how the selection saving is working now.  Works the same with the old code.\nRegarding the images getting stuck, I couldn't reproduce it today, but I was getting exactly the same behavior as before.  Unfortunately I don't have reproduction steps.\n. Ty @bummytime!  I'm planning to work on all kind of improvements on that too, but this particular change was meant as a code simplification while keeping our existing feature set.\n. The :shipit: message was added to the issue instead of here, so I'm merging.\n. @bummytime - Thank you for the feedback.  I don't feel too strongly about this but would like to know what @rachelmcr thinks, as well, before proceeding.\n. Thanks guys.  Changes applied!  Let me know if this is good to go.\n. Ty!\n. @bummytime - Hahaha thanks!  These are really small things, but I'm hoping they'll make a difference!\n. /ping @jleandroperez !\n. Removing myself from this issue for the time being as I have too many assigned issues.\n. @SergioEstevao - I prefer to be listed there myself.\nI do think we should all use the @automattic.com addresses, though.  Thoughts @bummytime?\n. Just added the mobile@automattic.com address on top.  Also switched all emails to @automattic.com since we're contributing through Automattic.\n. Reassigning since @SergioEstevao reviewed this.  Ty!\n. Ty @bummytime !\n. :shipit: \n. Thank you @bummytime for reviewing this.\n. @SergioEstevao - I misunderstood your question earlier.  If the changes have all been reviewed (expect from the version bump) feel free to :shipit:.\n. Fixed by @kurzee in https://github.com/wordpress-mobile/WordPress-iOS/pull/4923.\n. Looks good to me. :shipit:\n. @nheagy - Sorry for the delay in reviewing this.  It's looking good on my end.  All comments are minor things.\nAt some point this is going to help us expans our copy & paste support for more elaborate content, but for now, being able to paste single images is a nice addition.\nLet me know when this is ready for another look.\n. :shipit: \n. Talked with @astralbodies - I'm reassigning to me since I'm free to tackle it.\n. @SergioEstevao - What's the iOS branch I can test this with?\n. @SergioEstevao - Check out this video.  The two big issues I'm seeing are:\n- If the video is the first thing you add, you can't type before it.\n- There's a caret coming up right in the middle of the video.\n. :shipit: \n. It seems even a simple <br> will cause this behavior.  I've tested this by bypassing wp.saveText from this line and wp.loadText from this line, so I can edit any HTML code from the HTML editor (and make sure the HTML is maintained when switching to visual mode).\n. Commenting all the code in this method fixes the issue, so it's clearly in our end.\n. @astralbodies - This is already merged into WPiOS, for a 6.2 release indeed.\n. We're actually not using any private APIs.\nMore specifically:\n- Navigating the view hierarchy requires no private APIs.\n- Comparing an object's class name to a string requires no private APIs.\n- Swizzling methods requires no private APIs.\nEDIT: even when we retrieve the view that you mention, we treat it exclusively as a UIView object, which has a public definition.\n. Just to give a bit more info about this, we're not aware of any way around this solution at this time.\nClosing.\n. @rachelmcr - I've modified the ticket description to include 100% repro steps, based off yours (with just one extra step).  Thanks a ton for figuring it out.  I'm already working on a fix.\n. Update: it seems that the reason why we're seeing the weird character being added to the title, is that a library we're using to backup and restore the selection is inserting them for marking purposes.\nThe library is Rangy, and the code that's causing things to break can be found here.  It triggers this javascript method which effectively adds the invisible markers.\nRight after that, we handle the blur even in javascript which in turn tries to empty the title field if it has no visible content.  The reason we do this, is to make sure the placeholder text is shown to the user when there's no visible content (the placeholder text is only shown when the field is COMPLETELY empty, with no invisible markers in it).\nThe method fails to empty its contents, because it's not checking for the markers that rangy inserts and considers them to be valid content (in fact if you reproduce this bug, you'll notice the title field is empty when opening the site picker).\nThus, when retrieving the contents of the field, we're also retrieving Rangy's invisible markers (which happens to be the byte order marker).\nProposed fix is coming up.\n. Fixed in v1.7.\n. Duplicate.\n. @SergioEstevao - Understood... I'll analyze options to make sure the focus is properly restored.\n. @SergioEstevao - Ready for another look.\nThe uploading issue and the code error are both resolved.\nPS: also updated the WPiOS branch\n. @SergioEstevao - Ready to try again.  I think the problem we were seeing in the editor example app was caused by a double selection save (due to some old code that should've been deleted).\nCould you try again and let me know?\n. I just solved one issue that may have been causing this (some variables needed a null assignment).\n. Thanks for all the feedback @SergioEstevao!\n. @frosty - Sorry for the delay... reviewing now.\n. Confirming the error is gone.  Nice job on properly documenting the code.\n:shipit: \n. @frosty - Merging since you're afk!\n. Works perfectly to remove the issue.\n:shipit: \n. For my first attempt I'm using the initializer:\nswift\nNSAttributedString(HTMLData:documentAttributes)\nThe problem with using this initializer is that for a string with no style information at all I'm already getting these attributes:\n(lldb) po attributes\n\u25bf 3 elements\n  \u25bf [0] : 2 elements\n    - .0 : \"CTForegroundColor\"\n  \u25bf [1] : 2 elements\n    - .0 : \"NSFont\"\n  \u25bf [2] : 2 elements\n    - .0 : \"NSParagraphStyle\"\nWhich means we'll have extra tags when attempting to convert the NSAttributedString back to HTML.  We can't use this mechanism unless we find a way around that limitation.\n. I'm trying out HTML/XML parsers to see which one is best for our converter.  I've tried using NSXMLParser initially, since that's provided by Apple but it seems to fail quite easily with rather cryptic error messages such as:\nError Domain=NSXMLParserErrorDomain Code=111 \"(null)\"\nin the case of this rather simple test HTML:\nhtml\n<HTML style='a' bold face='123'>Hello World!</HTML>\nI'm going to be tring Fuzi next.\n. With the same test HTML string, Fuzi fails too, but in a different way.  When the parser reads the HTML tag it only recognizes the style attribute (and ignores the custom bold and face attributes):\n(lldb) po root\n<HTML style=\"a\"/>\nThis StackOverflow.com question has several answers pointing out that empty attributes are perfectly valid.  On top of that, we need to make sure we maintain any custom additions by the user, so we can't afford data loss.\nFuzi is thus ruled out for now.\n. TBXML doesn't seem to be producing correct Swift headers, unfortunately.\n. libxml2's HTMLParser seems the way to go.  It's a bit complicated since it's basically C methods called from Swift code, but it seems to be the easiest solution so far.\nI'll be uploading some sample code tomorrow.\n. Closing.  Continues here.\n. Fixed.  Will be released in WPiOS 6.4.\n. Regarding your second question, blockquote applies to block elements (not selection).  This was requested as-is back in the day.\n. > One issue that I detected, is that if you add three parapgrahs, then blokquote the middle one.  Then try to insert an image before the blockquote is pushed out of the text.\nCan you provide more precise steps (or even better a video) showing the issue?  I tried repeating the steps provided but I didn't see any strange behaviour with the editor.\n. @SergioEstevao - Good catch.\nHowever I could reproduce this in develop as well, meaning the issue is unrelated to the current changes.\nI've created a separate ticket for this bug.\n. @SergioEstevao - Added a fix to the image issue in this PR.  Check it out.\nThe ticket is #842.\n. You can test all these changes in WPiOS using branch editor/integrate-latest.\n. There are no plans right now to implement this editor as a view.\nThat said, you should probably try out the new Aztec native editor which is available as a view.. Works nicely for me. :shipit: \n. The GPL is fundamentally incompatible with iOS development. You cannot comply with\nboth the terms of Apple's Developer Program and with the terms of the GPL. Thus\nreleasing iOS code under GPL and claiming it is \"Open Source\" is, at best, misleading.\nI'd recommend contacting the WordPress Foundation directly to address any concerns with our software being in the iOS App Store.\nAdditionally, you haven't properly acknowledged all of the non-GPL'd code in this\nproject; your LICENSE file only includes a copy of the GPL, whereas it should include\ncopies of all the other licenses that apply\nThanks for pointing this out.  We've just added a local copy of the license files to make sure we're complying with their terms.\nand there are files in your project (WPEditorView.m in particular) that appear at first\nglance to be derived from code subject to someone else's copyright but where the\ncopyright notice has been removed or omitted somehow.\nWe've just added copyright notices to WPEditorView.h and WPEditorView.m to clear out any confusion regarding attribution and copyright.\nI've reviewed the file's initial commit, and it seems that some of the code is indeed coming from ZSSRichTextEditor.h and ZSSRichTextEditor.m, but failed to keep the copyright notices.\n. Ty @astralbodies !\n. Thanks for going the extra mile, @koke!  I appreciate it.. @adrianmcgee - Can you describe the original issue in detail, with a step by step to reproduce the issue you were seeing?\nThis is the best way for us to evaluate and test this PR.  Thanks!. Unfortunately stripping Javascript from HTML may not be very trivial.\nHere's an old personal attempt to solve a similar issue, that simply turned off an old post-creating mechanism in the App, instead of stripping JS code.\nSorry I didn't provide this information before but I only remembered about it now.\nI'll check if our endpoint is actually taking care of stripping the JS code, since that would make this issue mostly cosmetic (ie: client-side only).. @qiaoyan - Can you confirm this is not a problem anymore?. Closing then.  Thanks!. \ud83d\ude22\n. @sendhil - The only difference is that NSParameterAssert has a pre-configured description for the failure.  But all things considered the proposed change is a good idea (less code, more descriptive).\n. @aerych - Sounds good.  One question though: I've used the hex methods for colors that are not present in WPStyleGuide.  I was wondering if I should be adding these colors to it at all - and if so who chooses the new names for the colors.\nPS: I will add them as RGB if not, but was wondering about the process of adding new colors to WPStyleGuide.\n. The reason why I set readwrite explicitly instead of implicitly, is because by adding it you're stating it's writeable by design - ie: some thought was put into it.\nWhen the attribute is missing IMHO, you end up wondering if the developer thought about that at all.  Writing it down, clears up any doubts on the intent.\nAs an additional bonus, it tends to make properties align better. \ud83d\udc4c\n. @thianhlu - These are the color codes I couldn't find a match for, in our WPStyleGuide class: #7c7c7c (normal toolbar items color), #c8c8c8 (toolbar borders).  If you agree to it I can ping the users mentioned by @aerych.\n. Thanks!\n. Yep!  When I set it to false I can test the editor on the desktop to some degree, and the callbacks show up.\n. The method ZSSField.prototype.callbackThroughIFrame is indeed showing up more callbacks than by just the window.location as we did before.  Before using this method I was seeing some callbacks went ignored silently by our web view.\n. Yes, although there's something new and particular I'd like to propose for this purpose.  I just created a ticket to see if I can get my friend @bummytime to turn a blind eye on this for the time being. \ud83d\ude01\n. Awesome catch!  That line started out as a testing line and ended up staying in. :)\n. I imagine you mean moving the string to be public at the top of this file?  I try to avoid that when a constant is highly local and used in a single method, as it happens here, as it really doesn't have that much of a purpose outside of the method and would not be used anywhere else.\n. Actually, I tested this extensively, and prior to having this added the scroll view height update seemed to fail at times, and have a weird delay.\nTo put it in other words, I tried this as a last resource fix, and it was sooooo much better than triggering the same call on resize events coming from the HTML.  By adding this workaround the refresh seems to be even faster than it was before it.\nI added lots of notes because it was sort of the ultimate fix for the height issues.\n. There's space to doubt if he was referencing weak self or a weak elf?  Ok bad joke, I really have to improve on my humor... :-1:\n. Hahahah, thanks! \ud83d\ude1c\n. Good catch.\n. :+1:\n. Just a small doubt here... what does i18n stand for?\n. :+1:\n. Old testing code.  Removed.\n. Old testing code... removed now.  Good catch.\n. The only change that I'd suggest is adding all these conditions inside a method like isIPhoneSixPlus or similar.  The reason is that putting these checks together in such a method would:\n1. Allow for the creation of a shared iPhone6+ checking mechanism, eventually.\n2. Make the code a bit easier to read.\n3. Make the purpose of the conditions easier to fix, if we find we need to narrow them down, or change them (ie: we're giving these checks a very precise meaning).\n. Hey @bummytime.  I was asked in this ticket not to use custom colors, but only colors from WPStyleGuide.\nSince this issue is from August, and the comment I received was from September, I believe the color request in this ticket may be outdated.\nPing @hugobaeta so he can chime in and propose a good option.\n. Also ping @drw158.\n. Same as above.\n. Awesome addition!\n. @bummytime - Should this be 15px?\n. @bummytime - Regular expressions can be sometimes a pain because they may end up acting on false positives.  I'm not sure if there's a false positive this case would take, but there's a built-in alternative through the strippedHtml() method which would be to implement in our Javascript fields a method like:\njavascript\nZSField.prototype.strippedHtml = function() {\n    return this.wrappedObject.text();\n}\n. I'd consider splitting the title creation into a different method to separate responsibilities. Calling it inside this one should be OK though.\n. :+1:\n. Just a naming thing... maybe negativeSeparatorForToolbar or something like that?\n. They're green variables. :recycle: :panda_face: \n. We should be OK as we're looking for the string \"://\".  The addition of \"http://\" only happens if there's no scheme.\n. I'd guard this inside if (_titlePlaceholderText != titlePlaceholderText) { ... code goes here ... }.\nNot a deal breaker, but it's a good addition.\n. Same as above.\n. I just keep forgetting about this. \ud83d\ude1c\n. Deleting stuff (and not breaking anything) is one of my favorite redesign tasks. \ud83d\ude08\n. :+1:\n. Now we do.\n. Just wondering, but is there a case where the rightToolbarDivider should be allowed to be nil at this point?  I believe that since we have the creation ensured above we can just assign the background color directly here.\n. Since it has no contents, we can remove the @details tag.\n. Small maintainability improvement: use a variable for 'progress-'+ imageNodeIdentifier since it's used in two spots.  That way if someone modifies the code we're sure both places use the same ID.\n. Remove the @details tag since it's empty.\n. Small readability improvement: I'd recommend to go a bit more verbose and explain what failed in the method name.\nFor example: markImageUploadFailed().\n. Small maintainability improvement: I have a comment above about using a variable for this... but since it's used across different methods it would be great to have a method that can be used as:\nthis.progressIdentifier(imageNodeIdentifier); that returns '#progress-'+imageNodeIdentifier.\n. Indentation seems to be off here.\n. The return value in this method is not being used to supress a default handler.  We should either remove the return value and this comment, or send the value back to JS somehow to supress the default handler.\n. Change to the spacing to *imagesAdded.\n. I can still see this one in my latest pull.\n. Create a variable for storing 'img_container_' + imageNodeIdentifier since it's reused below.  That way a change will impact both lines.\n. Remove the comment since it's confusing.\n. Does this cause problems if the tag is not available yet?\n. I'd suggest for consistency across our code to change the javascript var img_container to camel case.\n. Add some spacing close to the + symbols for improved readability... ie: var html = img_container + progress + '<img id=\"' ...\n. Also it seems the leading hiddenChar is set in one pleace and the trailing hiddenChar in another, which could make it difficult to track where it's being added.\nI'd remove that from the previous code and add a final line of code along the lines of:\nhtml = hiddenChar + html + hiddenChar;\nI think it would help on readability / maintainability.\n. Sweetness! :bow: :beers: \n. Is the timer being removed from the dictionary once invalidated?\n. Replace the magic number and put in an else statement, since we don't want this condition evaluated if the previous if block condition was true.\n. Remove the commented code.\n. Remove timer if it's not used anymore.\n. Remove timer if it's not used anymore.\n. You're rolling back recent changes by removing this line.\n. Nice :+1:\n. Create a method like you did for getImageNodeWithIdentifier().  It's a good idea since I see this is being used in a few different places.\n. Same comment as above... a method for this would be great to reduce redundancy.\n. Yeah I imagined... I think that simply re-adding this would be ok.  Thanks!\n. I think that for the purpose of this PR I'd just implement a method to get the ID, and another to get the element, but with the same code you already have.  The reason for this is that I'd avoid adding more features in right now.\nI'd consider opening a different ticket for further improvements to break things up a bit.\nThat way we can just make sure this is pushed fast today, and make improvements afterwards.\n. Minor: break at 80 chars?\n. Seems like an auto-merge issue.\n. I'd suggest to either remove the commented line or ad an explanation of why it's useful/important to keep it (so the reader knows why it's there).\n. This is not really important, but it took me a while to understand that if the image has an imageId it means that it's still being uploaded.\nSo a few things:\n- Are we a 100% sure that the image having an ID means it's being uploaded?  Is there a chance the user may add an ID to the image manually and then tap on it causing this code to trigger for a false positive?\n- If the imageId is a 100% for uploads only, I'd add a local BOOL variable to make the code more readable such as:\n```\nBOOL imageIsBeingUploaded = imageId.length > 0;\nif (imageIsBeingUploaded) {\n    // etc\n}\n``\n. I think it'd be good to give a very brief explanation of what the class does here.\n. Do you think this is something we can import from theNSObject+SafeExpectationspod that WPiOS uses?\n. Is this something we should ask for in aninitmethod?  The reason I ask is that it feels like this class only makes sense if you initialize it with a givenWPImageMeta- in fact the code seems to be assigning theimageMetaright after initializing this VC.\n. Since it seems we're ignoring it anyway, I'd just remove the return value from this method, and from the delegate method declarations.\n. There's anaddSlashesmethod inWPEditorView`, which I feel would be appropriate for this case.\n. So looking at the code here, it feels like it can be broken up a bit into smaller methods that make it clearer to the reader.\nI'm not sure what the best way to break this method up would be, but I noticed there are a few comments in this method breaking up the code for the reader, so maybe those commentds can be \"replaced\" by methods?\nA rough example of what I mean (even though my code makes no sense):\njavascript\n// Generate the `a` element options, if they exist.\n...<block_of_code>...\nhtml = wp.html.string( options );\ncould maybe be replaced with something like:\njavascript\nhtml = generateAElementOption(props);\n. I'd say no worries for now - I really didn't notice it was coming from a storyboard.  I'd just keep it simple for now (ie: not change this).\n. Yes, I didn't notice that these were coming from somewhere else.  I still feel the original source should split this up a bit, but I agree we get better value out of not diverting too much from it right now.\n. :+1: I guess we'll find out in the next few days how they combine.\n. This line should be removed or a comment added to explain its purpose.\n. Does this method need to send the enabled styles when it does nothing? (ie: when it doesn't go into the IF block)\n. I'd consider changing the second expression to nodeName.toLowerCase() == 'a' to avoid having to deal with case sensitivity.\n. Following the logic I was wondering if the else condition should halt execution of this method.  Same for the if blocks below.\n. Since this code is almost identical to the code written in ZSSEditor.selectImageCaptionNode maybe we can have a method to obtain the caption node (ie: getCaptionNodeForImage or something similar) and reduce redundancy?  Just a thought.\n. :+1: :two: \n. @TooTallNate - Thanks for the tip.  We'll be able to revert the other toLowerCase() at some point, then.\nEDIT: thanks to @bummytime as well for bringing it up.\n. The above line took a bit for me to understand properly, and I feel it's prone to breaking if the source view type is changed for any reason.  I feel a more robust approach could be along the lines of:\nview == seld.editorView.sourceView\nThoughts?\n. Was testing this to see if it was possible to see the toolbar items when no field was focused, but of course it isn't.  I can see how this is necessary for source mode to be able to show the toolbar items.\nNice work. :+1: \n. Just to reduce code redundancy a bit, and it's a small gain: but what about creating a method that contains line 1163 - 1165, so we can just call that method in all repetitions below?\n. Do we need to move this into the isInVisualMode case?\n. :+1:\n. We could assert that tag is not nil.  Not a big addition but assertions can work wonders with cases such as this one when something goes bad.\n. Well, since this shouldn't be called at all outside of visual mode... I'd stick an NSAssert(self.isInVisualMode, @\"...\"); instead of the if block (or in addition if you prefer, but then you can wrap all code lines inside the if block since nothing should really execute).\n. Nice call!  That method is a 100% less prone to making coding mistakes.  Took me a while to find it though and got me scratching my head (because of the slightly different name, mind you, heh).\n. @aerych - Regarding your first comment: I've actually given up on properly calculating the height here, and decided to do it after a very small delay.  The code that sets the last calculated height basically makes sure that the web view doesn't change the content size on its own (which is causing some janky animations when switching the focus from the title to the content).\nThis code is definitely not of my liking, but I think the kind of changes we need to remove this are kind of too drastic this close to the editor's 4.8 release.  My idea is to bring up that there are some fragile spots in the editor and that there are some changes we may need to make to fix those spots.\nRegarding your second comment: sounds definitely good to me.  It's just one of those things I find hard to remember at times, so it's also a very nice thing that you brought it up in the review.  I definitely encourage it becoming a standard / convention.  It makes the code easier to read & maintain, even if by a very slight difference.\n. Nice check, good addition.\nOne note though, when comments are used to explain what the code is doing, it usually means that readability can be improved.\nFor example, instead of:\n``` javascript\nZSSEditor.getYCaretInfo = function() {\n   var y = 0;\n   var height = 0;\n   var selection = window.getSelection();\nif (! selection.rangeCount) { // if no selection available just return 0\n   // ...etc...\n}\n```\n...use...\n``` javascript\n/\n * @returns {0, 0} if there is no selection.\n /\nZSSEditor.getYCaretInfo = function() {\n   var y = 0;\n   var height = 0;\n   var selection = window.getSelection();\nvar noSelection = !selection.rangeCount;\nif (noSelection) {\n   // ...etc...\n}\n``\n. I think this can be safely removed.\n. As we discussed in chat... use{-999, -999}` for the time being, to signal there is no caret.\nIn the future we should return null and make sure that cascades back to the editor nicely.\n. Created a new issue to improve this in version 4.9.\n. When comments are used to explain what the code is doing, it usually means that readability can be improved to remove the comment.\nFor example, instead of:\n``` javascript\nZSSEditor.getYCaretInfo = function() {\n   var y = 0;\n   var height = 0;\n   var selection = window.getSelection();\nif (! selection.rangeCount) { // if no selection available just return 0\n   // ...etc...\n}\n```\n...use...\n``` javascript\n/\n * @returns {0, 0} if there is no selection.\n /\nZSSEditor.getYCaretInfo = function() {\n   var y = 0;\n   var height = 0;\n   var selection = window.getSelection();\nvar noSelection = !selection.rangeCount;\nif (noSelection) {\n   // ...etc...\n}\n```\n. The last part of this comment should be changed to something like:\nobjective-c:\n// WORKAROUND: To fix this issue we use a different method to obtain the Y position instead.\n. Since the method being called is not used anywhere else anymore, you should remove it from the sources.\n. Good call.  I ended up adding a method to WPDeviceIdentification since that class has the intention of providing these methods.\n. Well, copy basically ensures that these properties are not changed after being assigned, but in this case there's no such risk, since the original objects are also handled entirely by this class.\nWill change these.\n. Good eye.  It didn't break while I was testing but you're right that it will after being set to null once.\n. PS: the reason it's good to keep this.caretArguments as an array is that there were some performance issues related to continuously re-creating that array, so I ended up reusing the object.\n. Should also be fixed by the fix for your previous comment.\n. Is this related to the issue being solved?\n. Is this commented on purpose?\n. Just to separate concerns a bit, I'd recommend to place the code to create / initialize the mutation observer in a method of it's own and call it here with a single line instead.  It feels like this method should handle a higher level logic.\n. Since a single node should only have one identifier, why not place this condition in an else clause?  That way we will avoid evaluating both if \"img_container_\" is found.\n. Remove the extra spacing between parenthesis and parameters.\nDo the same for the calls inside this method.\n. Tab alignment is off.\n. Done!  And more!  Read below...\nThis was actually very enlightening and an awesome example of why documentation is important.  After reviewing the comments and seeing the code I realized something was wrong.  I ended up:\n1. Moving the code to the field class.\n2. Adding some controls that were missing from this method, and that where outside of it when they shouldn't have been.\nWhile fixing this I also found and fixed a related issue with the title field, that was showing some strange characters when trying to delete or modify it.\n. Done!\n. No... there's a better alternative which is using the property parentElement.  I just removed this method.\n. The tab alignment seems to be off.\n. The tab alignment seems to be off.\n. I think the latest versions of Xcode are ignoring the project default for spaces vs tabs.\n. ...and using the user default in all cases, instead.\n. The alignment's a bit off in this line.\n. I think the scope of allowing single images to be pasted is fine, for starters.\n. Starting in this line, the code seems very similar to this.\nI'd suggest adding a method to handle it instead.\n. ",
    "jeremeylduvall": "@bummytime delayed follow-up here. Looks like you closed this in favor of #230 (which was closed for #3456). As far as I can tell, galleries weren't addressed in #3456. Should we re-open this one?\nMentioned in 107491-h\n. Works for me! Not sure how I missed that one. Thanks!\n. I'm working with a user in a private email thread that's having some issues with the YouTube embed. When he adds the URL within the body of the text, it turns up as a link rather than the embed. I'm unable to reproduce in the same (latest) version in production. When he tries to embed the link, it gets wrapped in p tags as shown here:\nhttp://d.pr/i/16CnG\nHowever, it seems to be a bit inconsistent. If he publishes a new page with just the link (pasted in the HTML editor), it embeds. However, if he adds more text around the link (before and after), it gets hyperlinked instead. Here are some screenshots from his latest test:\nhttps://cloudup.com/clG25HsE2nY\nSimilar issue?\n. ",
    "aerych": "The custom size fields are no longer present. Maybe close this one?\n. > If it's still an option in the legacy editor, let's re-open there\n\nNope. :)  Closing.\n. Bah!\n. Since this issue is specific to a particular implementation of the editor this repo doesn't seem the best fit to wrangle the issue.  Closing and reopening wordpress-mobile/WordPress-iOS#404. \n. Appears fixed in version 2.6.1 of CTAssetsPickerController.  Unable to reproduce on a device or in the simulator.  Close. \n. I'm no longer able to reproduce this behavior. Works as expected on hardware and in the simulator.  Let's close for now and reopen if it turns back up. \n. Got the doubled post to occur, with the legacy editior, while testing the current develop branch.  The steps I took:\n- Beginning with an empty post list (all posts were deleted)\n- Tapped to create a new post\n- Added a one word title, and one word for the content. \n- Dismissed keyboard.\n- Tapped publish\n\nBack in the post list I see the post with an updating status. After a brief period, the post appears duplicated in the list, but in its published status. After another short period, the 'uploading' version appears in the list in its published status. \n\n. > Would \"Large\" mean the same pixels set in the Media Settings on my site?\nI think so.  The current plan is to respect the blog's image size settings specified in wp-admin > media settings.  \nIf you have other thoughts or questions please share!\n. > I don't know how hard would it be to show the actual size in the selector\nThe current aim is to make this a global setting. Since there can be multiple blogs in the app I'm not sure it wouldn't make sense to put the pixel value unless we made this a per-blog setting instead, and I don't think it makes sense to do that just to show a specific pixel size. \nOn the other hand, if there was just a single blog in the app it might make sense. \n. @quicoto @TheJeffr0 @theukedge  You can see more of the conversation related to the size selector in the pull request: https://github.com/wordpress-mobile/WordPress-iOS/pull/2585\n@quicoto The proposed implementation will show the pixel sizes. :)\n@TheJeffr0 @theukedge Good points, and I agree.  I think an ideal solution would allow for both reducing the file size of the upload, and setting the display width / height. These are the kind of things we'll work to address in an improved media feature.  Please be patient, a better solution is coming!\n. Closed in https://github.com/wordpress-mobile/WordPress-iOS/issues/2585\n. Tested in the simulator on iOS 7.1 & 8 iPhone and iPad.  Looks solid.  Saw some other preexisting wonkiness when dismissing the keyboard that's unrelated to the change. \nShip it sir! :shipit: \n. Just spit-balling, but maybe the slowness could be caused by multiple observers registered with notification center?\n. For reference, some screen shots of the admin edit modal. Taken from desktop FF sized to 320x480. Functional, but I might not say \"pretty\". \n\n\n\n. Thanks @thianhlu! \n\nDo all these options make sense on mobile. In some cases we see the app as a supplement to the web vs in some cases we treat it as mobile only experience. A great example is image size which the user will never be able to truly preview so it may be confusing to some and helpful for others.\n\nWe probably do not need to show all of the options. For instance, text placed in the title and description attributes do not have any effect on the image markup or the caption short code. IIRC those values are stored with the attachment in the media library and used on the image\u2019s link page and gallery detail views.  I think we can also  ignore most of the items under the Advanced Options section of the wp-admin edit image modal (e.g. image border, link css class, etc.)\nBeing able to set the image display size has been a HUGE topic in the iOS forums, and one of the motivations for me jumping into to help with editing image meta. We absolutely want to keep it and arguably it should have preferential placement.  \n\nI did not include url to image since its not editable on wp-admin anyways.\n\n+1\n\nI think we are all on the same page to not include any of the shortcode, meta on the visual view, only HTML view\n\nYep yep.\n\nIts probably best to re-use the same inputs and look at feel of the current options page. I did a real quick example of this in the video ^. I changed the spacing as well make the font-size a tad smaller on the form inputs. In this example, the text would be right aligned like what we have now. We could also try another type of input that is more iOS'ish that uses the placeholder and you type over it but this would mean reviewing all inputs throughout the app and updating them......\n\nI like this approach for consistency.  I think there is probably a consensus that the existing options screen is kinda \u201cmeh\u201d but maybe now isn\u2019t the time to reinvent it.  \n\nTapping the image would reveal the Edit option. Tapping on another part of the page or another part of the image would dismiss this. Not even sure if Edit is even the right language to use\n\nLove the blur effect.  This works great for photos but I\u2019m wondering about the size of the icon and the Edit text and how well it would work with smaller images a user might have inserted into a post they are editing. (Think of a rebus.)  Also the localizations of \u201cEdit\u201d will have varying widths. Would it be cleaner to just use the pencil icon like in wp-admin? \n\nI only used the stuff we currently have in wp-admin and grouped them in the same manner.\n\nWas that the Insert Media modal you were looking at?  The Edit modal (the one you get when you select an image in the visual editor, then tap the pencil icon) is similar but has a different order.  Just wanting to make sure we\u2019re talking about the same things.  I\u2019d favor the organization of the edit modal for its slightly simpler approach. \n. @thianhlu What do you think about adding a thumbnail of the image being edited to the options screen, maybe as a kind of table header? I'm thinking of a distracted user who forgets which image he's editing and might benefit from the reminder.  Just a thought. \n. @thianhlu That'll work :)  I'd envisioned a large thumb and centered but maybe that approach would take up too much space. Its probably best to show as many of the options as possible.  \nWould it be okay to move the thumb cell above the Details header since its not editable where as all the other options are? \n. > I will update with pencil icon \n@thianhlu Is the plan to still go with this icon? Not clear if the intention was to just use the icon or still show text as well. \n. @thianhlu Works for me!  \nOne last question. I think we probably don't need the Description field until we're hooked up to the user's media library since there is nothing in the image / caption markup to handle the description. Does this sound reasonable? \n. Thanks for all the help @thianhlu @meremagee and @bummytime.  Closed this now that its PR is merged.\n. I agree the visual appearance is a little weird. I'm really a fan of using data attrs to flag \"display-only\" markup.  We could do some sort of filtering when switching between html and visual modes and also before publishing.  My impression is that implementing something like that isn't huge in scope and could be a manageable subtask. \n. @SergioEstevao @bummytime @diegoreymendez \nReady for another look :)\n. I've updated this branch with a better approach to inserting the formatted caption. There was some strange behavior with the content-editiable insertHTML method depending on what the adjacent markup was.\nI've also update the branch with selected styles similar to as discussed in #474. I've taken this a bit further and alter the selected appearance according to the size of the image.  The following screen shots demo the different levels (note that I just reuse the same image and force the different styles to show how they might look). \nImages that are large enough will show the full selection overlay, which is the circled icon plus the text.\nIf the image is too small to show the full overlay, the circle is dropped. \nA very small image will only show the icon.\n@bummytime @diegoreymendez @SergioEstevao  Ready for yet another round!\nlarge image\n\nsmaller image\n\nsmall image\n\n. > First thing I noticed is that on smaller screens (iPhone 4s), the edit icon appears very large:\nShould we we scale down the graphic or adjust the points at which the different parts of the overlay are taken away? \n\nFor points 1 and 2, maybe a quick solution is to disable image editing during an upload OR if the image is in a failed state?\n\nGood catch re the conflict with uploading. My original intent was to not show the editor while uploading. I'll make the change.\n\nAlso I noticed the image edges were fuzzy again. Was this on purpose?\n\nNo.  I'm thinking the css probably needs tweaking to account for different screen/image sizes. \nThanks @bummytime \n. Hiya @bummytime. \nI've added a check for an uploading image and adjusted the size threshold for the large style overlay. \nI'm wondering if the fuzziness might be a simulator issue.  I can reproduce it (kind of) in the iPad simulator where the majority of the image edge is crisp but a portion is fuzzy.  I can't reproduce it on an actual device.  Does this match your experience? \nRe: the scrolling.  We touched on this in chat and I followed up with a test in the current develop branch. I can reproduce the scrolling behavior there by tapping on text or an image in the editor.  I think addressing that behavior is better handled in its own PR since its preexisting and this PR is already rather long. \n. Awesome, thanks @bummytime!  Closing this PR in favor of $490 as it targets the correct release branch. Will merge that one. \n. > What branch where you using to?\nDevelop. The branch is shown in the link above ;)  I guess 0.4 hasn't been merged back? \n. > iPhone format bars will look the same.\niPhone format bars will be unchanged? \n. I'm wondering if it would be good to frame this not in terms of iPhone vs iPad but in terms of available screen-size. This might anticipate the day we can use the size classes introduced in iOS 8, but in the short term it could benefit owners of the iPhone 6+ and its monster screen. \n. Btw, I dig the spacing and grouping of the toolbar buttons on the iPad. They look nice and I'm kind of wondering if the landscape iPhone toolbar could take advantage of the spacing too. :D\n. Took it for a quick test drive.  Looks good :)  :shipit: \n. :boom: \n. @#$! JavaScript and its truthiness. \n. For realz this time. \n. Refs #491 \n. Did some cursory testing. I can't reproduce this behavior on iOS 8 on a device, but I can on iOS 7.1.  However, there appears to be something more afoot.\nIn the iOS 7 simulator I get a crash with the following message logged to the console:\n2015-01-29 11:00:19.768 WordPress[2485:60b] *** WebKit discarding exception: <CALayerInvalidGeometry> CALayer position contains NaN: [0 nan]\n2015-01-29 11:00:19.822 WordPress[2485:60b] *** Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: [160 nan]\nOn an iPhone 4 running iOS 7.1, I do not experience a crash, but where the app worked smoothly prior to opening the editor, after opening the editor a second time things get very strange.  Here's a video:\nhttps://cloudup.com/c7dGo1MrPhw\n. @diegoreymendez I've gone back through the commit history, testing the pod at various stages. The Core Animation related crash seems to have been introduced with 6ff4826a5129177cd03be7a5be95d1f869f912ec. It doesn't occur in commits prior to this.\n. Diego and I tracked the crash down to two lines in WPEditorView refreshVisibleViewportAndContentSize (in the current develop branch). \nCalling either [self.webView stringByEvaluatingJavaScriptFromString:@\"$(document.body).height();\"]; or self.webView.scrollView.contentSize = CGSizeMake(self.frame.size.width, newHeight); seems to be the trigger, but never for the first time the editor is opened. \n. @diegoreymendez, just following up on our chat. I'm setting the assignment back to you. Tag!\n. Tested, and works great. I made a couple of minor notes that really don't require any action. :shipit: when ready! \n. @diegoreymendez No worries.  Took a look and the changes look spot on. Nice work yo.\n. oopsie!\n. Good eye @meremagee \n. I'm dumbfounded how a space could be so unfriendly. \n:shipit:  \nAnd then you commented before I cound submit my comment :) \n\nit would always contain a space when getHTML() is called.\n\nGood point!\n. Maybe refs #536\n. Closed in #541 \n. Thanks @SergioEstevao :) \n. It looks like the opacity was missing, and the edit text font size was using points instead of pixels.  The rest looks like it matches. \n\nnoted that the pencil icon isn't centered & sizing appears off\n\nI'm not sure how to judge this one. It appears centered and sized according to the spec?\n. Hiya Thian, \nA largish image shows the circle icon + text, a smaller image omits the circle if the spacing would be too tight.  The smallest images just show text.  Breaks are at a height of 200px (smallish) and 100px (very small). \nHere's how it looks currently:\n\n\n. Quick note: when I was getting the screen shots I noticed the pencil icon in the sans-circle version was much smaller than the pencil version in the circle version. I have this corrected locally (and reflected in the screen shots above) but I haven't pushed this to the repo pending any other changes @thianhlu might have. \n. cc @bummytime for review\n. @diegoreymendez Oh nice! Thanks for the tip. That looks like its gonna do the trick :)\n. Closed in #580 \n. cc @SergioEstevao for review\n. Looks good.  Took it for a test drive on the iPhone and iPad simulators. Tried it with different sized images and the alignment just worked :) \n:shipit: from me. \n. The icon as it appears with the changes in this PR.\n\n. What is that tool you're using to measure, @bummytime? \n. I think I'm going to defer this until @thianhlu can have a look.  Adjusting the diagonal spacing makes the horizontal spacing look off to me. \n\n. https://cloudup.com/cz_cP0zrc9B\n@thianhlu or @bummytime  do you have a working version of sketch? Mine has expired. Would you be able to make the change and export the group as an svg file? \n. Yah. Handled in #561 which tagged onto the end of #549 after it had closed. \n. Dup of https://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/555\n. cc @diegoreymendez Would you be up for a review? \n. Thanks Diego!\n. Changes look good to me Diego :)  :shipit: \n. cc @bummytime for a quick review\n. Thanks Matt!\n. Looks good to me @bummytime, and it works perfect in the simulator.   :shipit: \n. > perhaps automatically launch the legacy editor if voiceover is enabled\nIs the legacy editor considered deprecated? Should we be adding more dependency on it at this point? \n. Our forum users were asking about the status of this one.  I see the milestone shuffle but since this was never assigned I'm guessing we haven't looked too closely at the underlying cause? \n. > noticed the placeholder font for the title is Open Sans now\nOops. Thanks for catching that. I'll get it sorted out. \n\nIs the new all-Merriweather aesthetic our new standard now?\n\nAs far as content goes, that's my understanding.  @mnt can probably go into more detail.  I think if there's any doubt then let's hold off on this PR until everyone is on the same page! \n. Hi @thianhlu.  Its part of the \"calypsofication\" work. We'll be using Merriweather for content areas including the reader. \nMy thought for this patch was just a simple font swap. It didn't occur to me that x-heights and/or line-heights might also need an adjustment. Thanks for mentioning that! \n. Some screen shots of Merriweather in the demo app: https://cloudup.com/cEEqN_o5ZcE\n. @bummytime Yeppers!  We've been chatting about whether it made sense to use the smaller font and line sizes on the iPhone or always use the larger and possibly more legible sizes intended for the iPad.  We're going to try using the iPad styles everywhere, so we'll keep the 16px line height but there are a couple other tweaks coming.\n. Ready for round two @bummytime !!\n. Huh... They are the same size for me.  iPhone 5s simulator iOS 8.3.  Which simulator + OS combo did you use? \n\n. HTML mode.  Okay. On the same page now.  :tired_face:\nThe visual editor is so good I forgot all about the html source ;)\n. @bummytime third time's the charm?\n. Thanks Matt!\n. Hiya @bummytime.   I had some nitpicky comments regarding types and formatting. \nTwo observations I had were that the animations felt a tiny bit slow to me, and the icon pressed states seemed very washed out against the toolbar background. They were almost invisible. \n. fwiw, we currently use 0.2 sec animation when presenting the search bar, and a 0.3 sec animation in the post cards when the More button is pressed.  IIRC the system uses a 0.25 sec animation when revealing the keyboard.\n. Nice @bummytime. Animations are nice and snappy now :) \nI think the selected state looks washed out next to the other enabled icons but I'll defer to @thianhlu. The user may not even notice since their finger should (in theory) cover the button in its selected state. Perhaps being overly thorough I check the RGB values with Digital Color Meter.  When title field is selected, and the keyboard buttons are disabled, they are RGB: 235, 242, 245.\n\nHowever, when a button is tapped its showing. RGB: 239, 245, 247\n\nThe difference is subtle.  I'd guessing either the disabled or selected state is applying a slight tint affecting the button appearance.  I probably wouldn't fuss with it, just an observation. \nEverything else looks good so :shipit: from me unless @thianhlu has changes. \n. Another report from https://ios.forums.wordpress.org/topic/problems-with-ios-dictation?replies=1\n\nFirstly, I want to say thanks for the WordPress iOS app. I love the idea of being able to dictate my blog posts, simply by talking to my iPhone. However, I've noticed that dictating text into the new post editor doesn't work properly.\nTo reproduce the problem, simply create a new post, and start dictating text. Now let's say that you make a mistake. Since the iOS dictator has no delete feature, you need to break out of it to fix a mistake. Hit Done to get out of the dictator and then press backspace.\nI expected the last character dictated to be deleted, but instead the cursor just jumps up a line and then back down when you press backspace a second time. You can keep pressing backspace indefinitely, but it doesn't delete the text that you just dictated.\nAlso, sometimes the text that you just dictated gets inserted twice. This seems to depend on whether the dictator had finished correcting your text before you hit \"Done\".\nI've also noticed that dictation mode often drops out of its own accord without me even pressing Done, which is really annoying.\nFinally, \"new line\" doesn't always start a new paragraph, and \"new paragraph\" inserts multiple blank lines. Moving the cursor back to try and fix this doesn't seem to work properly. You end up with blank lines that are difficult to delete. To fix this, I found I needed to go to HTML mode and edit it there.\n. Looks like adding/updating the class attribute and specifying one for wp-image-___ where the ___ is the attachment ID should fix the issue with the missing fields.\n. > but the output of the image markup is also missing the new (Wordpress 4.4) responsive code (srcset etc).\n\n@rawzone Is that baked into core now or still a plugin? I've just tried inserting an image into a post via the web wp-admin but I'm not seeing the srcset attribute added.  I've tried on an install of 4.4 and on the latest nightly build.   Am I missing a step? \n. @rawzone Thanks for the follow up.  It looks like I have something wonky with my test sites I need to sort out. \n. > Looks like adding/updating the class attribute and specifying one for wp-image- where the  is the attachment ID should fix the issue with the missing fields.\nPotentially related issue with thumbnails: https://ios.forums.wordpress.org/topic/the-change-of-jpg-to-jpeg-causing-plugins-to-fail?replies=9#post-14506\n. Totally related :)  Closing as a dup.  Nice catch @rachelmcr \n. Works great! \n:shipit: \n. Nice.  Small change, and everything seems to work as expected.\n:shipit: \n. Yep. I think its best to use either the stock RGB methods or, preferably, the color methods from WPStyleGuide.  The smaller DTCoreText's footprint is across our codebase the easier it will be to migrate away from it later. \n. >  I was wondering if I should be adding these colors to it at all - and if so who chooses the new names for the colors.\nWe want to be consistent with the colors used in the app.  If one of the existing colors isn't the right fit I think the best thing to do would be to ping either @drw158 or @hugobaeta.  They are also probably best suited to answer when a new color should be added and how the naming conventions work.\n. Oopsie!  Meant to go back and find the consts for a textnode :) Will update.\n. I think that was a comment I overlooked. Will nuke. \n. The ID was something @SergioEstevao was using to flag uploads and is switching to a different mechanism for the reasons you mentioned.  This branch isn't updated with those changes.\n. Agreed\n. Absolutely. I wasn't seeing that dependency and was hesitant to add it.\n. Maybe?  I'm unfamiliar with how to instantiate a VC from a storyboard while passing in an argument to its init method and the current approach was my quick solution.  I can look into it. \n. Agreed\n. Good tip!\n. I'd prefer to keep the methods borrowed from WordPress core as close to intact as possible.  Changes to the methods in core would likely be valid changes to the methods here.  There are some modifications from original (that i need to better document!) that would need to be taken into account, but splitting the methods up would make it a bit more of a challenge. \n. Yes. Just a little. ;)\n. Related :) \nhttps://github.com/wordpress-mobile/WordPress-iOS-Editor/issues/451\n. Xcode is flagging this as an unused variable\n. Would it be make sense to move these styles into the css file, and then update document.body.className with the relevant class for a true IF check? \n. Going to leave this one as is since this is the same practice used in core, and also Nathans comment. \n. Good eye. \n. Each if block should be checked independently. An image may or may not have an anchor, or a caption. This is kind of explained in the brief but maybe it could be clarified. \n. Its a good thought :)  Will do\n. Actually, I think it doesn't. \n. Not really related to this PR but thought I'd mention since as I noticed it.  We could probably use CGSize newSize  = newValue.sizeValue; and avoid the out argument here. \n. It took me a second to realize that we were setting the scrollView's contentSize.height back to the last recorded height.  Maybe I need more coffee?\nI'd thought we were trying to use the CG macros for extracting values from a CGRect: CGRectGetWidth(self.frame) for instance.  Maybe its not a convention, just more personal style? \n. > because of the slightly different name \ndoH! It was a difference in the Mac and iOS docs and I didn't notice I was looking at that mac version. Sorry about that.\n. Why copy? \n. It looks like caretArguments starts off as an array with 0 for the yOffset and height, but if caretInfo is ever null then caretArguments is also set to null.  Maybe it should just start out as null? \n. If caretArguments was ever set to null then this would break. Maybe we need to add this.caretArguments = []; above this line? \n. Maybe a question of personal style but it would be nicer to test for truth and return instead of doing the work inside the conditional block.  Not a blocker by any stretch, just a thought.\nif (this.isComposing ) { return;  } \n. Since these are used for radius, and UIBezierPathbezierPathWithArcCenter:radius:startAngle:endAngle:clockwise takes a CGFloat for its radius arg, these should probably be declared as CGFloats. \nBut fwiw, foundation types like NSInteger would generally be preferred over C types like int\n. For the CGFloats, Its safe to drop the f and let the compiler worry about exactly which flavor of floating point the CGFloat should actually be. \n. CGFloat raidus\n. For type consistency the denominators should probably be a CGFloat literals. Maybe just add a .0? \n. Tab :)\n. Should this also check for selected status before assigning the normalTintColor? \n. Purely a matter of preference, but maybe check for equality and return and avoid nesting, vs checking for inequality and doing the work inside an if block.\n. For type consistency maybe add .0 to the assignments \n. Maybe add .0 for the literals in CGRectMake\n. Same comment about CGRectMake\n. removedOnCompletion is set twice?  It looks like all animations are removed in animationDidStop:finished: anyway so does this need to be set to NO at all? \n. missing carriage return\n. Hard habit to break and it used to be a best practice.\n. .f \nI'm sorry, I know this is very nitpicky\n. .0 for type consistency maybe?\n. .0 also here\n. fs \n. ",
    "doomi": "there should be a setting to define the default \"web display setting\" of images when creating posts (Thumbnail, Medium, Large, Full Size). currently, every single image in a new post has to be edited to change it's web display size. . ",
    "markoheijnen": "I just have updated the ticket with a different angle to solve this.\n. ",
    "jleandroperez": ":shipit: \n. @sendhil looks great! :shipit: \n. @diegoreymendez everything looks great! :shipit: !!\n. :shipit:\n. Looks good Diego! :shipit: \n. :shipit: \n. Looks good Diego, :shipit:\n. Closing this one since we already have a Search implemented in the site picker.\nThanks Rachel!. Looking good @diegoreymendez!. Confirmed, no extra spaces are being added.\n:shipit: \n. ",
    "pmaiorana": "And just to clarify: the bug happens independent of camera.app, that's just what I used to replicate it for the video. That is, it happens with any app that adds a new image to your Camera Roll (e.g., saving a drawing from Paper has the same effect), not only when using the camera.\n. ",
    "tahseen0amin": "can we not have HTML button in toolbar ?\n. ",
    "oguzkocer": "@bummytime We have been altering the @mentions solution and that branch we had might not make it to the release branch. Once the new solution (implemented for notification comments) is merged into the main repo, we will be re-implementing it for the new editor as well. I hope that doesn't affect you guys!\n/cc @allendav @thianhlu \n. Looks good @diegoreymendez!\n. Looks good! :shipit:\n. Out of habit, I still do this sometimes :(\n. ",
    "Yajo": "Did I really file this against iOS? Sorry, I meant Android.\n. ",
    "kwonye": "Another report today requesting this feature. This is, thanks @tommi. Closing.\n. Thanks @bummytime! :blush: \n. @frosty I believe this is the same underlying cause as the safari share issue.\n. Not an Editor bug. Opened wordpress-mobile/WordPress-iOS#5296 instead.\n. ",
    "sarahblackstock": "Requested today here: 176897-h (internal ref). ",
    "shaheero": "There's no issue #176897.. \nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/176897. +1. ",
    "allendav": "I saw this / reproduced this too this morning.\n. ",
    "roundhill": "\nalso, adding image inserts new line above\n\n^ This! I was trying to add an image at the top of the post and found it quite tough to get the cursor positioned right so I could delete the extra space before the image.\n. Yay! Glad you found the issue.\n\nOn 8 Oct 2014, at 06:22, Diego Rey Mendez notifications@github.com wrote:\nThanks @roundhill!\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "koke": "This is the code I used\nhttps://gist.github.com/koke/aea2b5f105aa8fdbda60\n. Looks good, although this is the kind of code that could definitely benefit from some unit tests, just to be sure.\n. Just leaving a note that the webkit bug was resolved a couple weeks ago, so hopefully it'll land on iOS 11. It seems there's still a race condition:\n- If I tap \"Post\" while it's uploading, I get the alert\n- If I tap \"Post\" as soon as the \"Uploading...\" indicator disappears, the post publishes with a broken image\n- If I wait a couple seconds after \"Uploading...\" is gone, the post publishes with the correct image\n. https://github.com/wordpress-mobile/WordPress-iOS/issues/4434\n. Closing this one since it's easier to reapply changes than to fix conflicts. I'll re-submit soon\n. No problem, thanks to this I just noticed I missed a couple things in the legacy editor :)\n. Finally fixed Travis \ud83d\ude12 . Oops, lots of conflicts and travis fails. Can you merge develop?. OK, take two using delegate methods. ",
    "hugobaeta": "I wouldn't merge until the color is fixed to conform to our designguidelines. Instead of #7c7c7c, we should have something like this: http://codepen.io/hugobaeta/pen/Fvuta  (similar value - try squinting, you'll barely see the difference - but within our hues)\n. ",
    "p3ob7o": "The lack of Media library access also creates a second problem: images that you do have on your device and want to use both as featured and in the content are uploaded twice, which is bad on several levels:\n- Wasted bandwidth.\n- Wasted storage resources on the server.\n- Duplicate content in the Media Library\n. ",
    "Codelica": "Are there any plans for this?  Looks like the Android version has support, so there is hope.  Maybe. :)\n. ",
    "apeatling": "\ud83d\udc4d\n. ",
    "nheagy": "WKWebView now has a cookie managing API in iOS 11 \ud83d\ude04\n. @diegoreymendez @SergioEstevao Thanks for looking this over.\nI've fixed those few things, now. I also changed from PNG to JPEG representation of the NSData to avoid problems with rotation. This only affects the demo app, the WordPress-iOS app (or any other app using the editor) will still get a UIImage from the editor itself, and can implement more robust rotation code.\n. If it has both, the text will paste and the image will not. IMO the best way to solve this is to have the native code trigger with all pastes, where it can handle multiple items on the pasteboard.\nNot sure if that's something to implement now, or as a second phase after this one?\n. Should be fixed now.\n. Refactored a big chunk of both methods. Let me know what you think.\n. ",
    "quicoto": "Nice.\nWould \"Large\" mean the same pixels set in the Media Settings on my site?\n. @aerych I think that would be the best approach. I don't know how hard would it be to show the actual size in the selector. Something like \"Large (1024x1024)\".\n. ",
    "TheJeffr0": "Why does it make sense to apply a \"one size fits all\" setting to a site? That's almost just as bad as not having an option to choose the image size in a post. What was the problem with the previous image size selector when uploading an image to a post? \n. ",
    "theukedge": "I'm not bothered whether it's a per-blog setting, or a per-image setting, however, I don't think it's wise to have a global setting: you can have multiple different sites for multiple different editors/clients all with their own needs and I don't think this is a one size fits all approach works here.\n. ",
    "andrewspittle": "I just ran in to this on my own self-hosted site on Nov. 21st. Can confirm it's still an issue with this post.\n. ",
    "Essayoh": "Debug logs from customer reporting what I believe to be the same issue here - https://gist.github.com/Toof/b7c4e57f4094c2ca5084\n. ",
    "davidventernet": "Hi guys. I just reached out for help via in-app support and was directed here. I'm experiencing the same issue with input lag while creating or editing a post. Let me know what I can do or provide to help with fixing the issue. \n. ",
    "meoz": "Same issue on iPhone6, ios8\n. Ok , so I'll need to modify the sourcecode myself if I want to have buttons removed.\nThanks for the answer. Cheers.\n. ",
    "beaulebens": "I would propose that if we can detect that no content has been added/modified (and thus wouldn't prompt to Save Draft), that we shouldn't prompt anything, and that we should just leave the view. I find it annoying when I tap into the editor, then immediately tap out, to have to confirm my \"unsaved changes\" (of which there are none).\n. ",
    "vhikd": "Any suggestions? I can't find any way to solve this problem.\n. @bummytime ,I am a developer.I want to find a way to solve this problem. I have been working on it more than a day. And I can't find any way to change it better. Could you help me to solve this problem?\n. @bummytime , I'm not familiar with js . I had try anyway in iOS develop, and I can't find a way to get it done. I will try to add a flag in the js file to handle different events.\nThanks for your reply.\n. ",
    "joesondow": "Are there any plans to implement this any time soon? It would be enormously helpful. . ",
    "aforcier": "This may be fixed by importing the changes made to the ZSSEditor Android-side in this commit.\nBackstory: https://github.com/wordpress-mobile/WordPress-Editor-Android/pull/244#issuecomment-138863969\n. When testing how the Android editor handles U+2028 (it has the same issue as the iOS editor), I found that U+2029 (invisible paragraph separator) causes the same issue.\nI checked and this looks like it also affects the iOS editor.\n. ",
    "clickysteve": "Adding my voice to those asking for this. Seems like a perfect addition to the mobile app for groups of people who are travelling with mobile devices only, and using a shared blog to document their travels. \nFor example: \n3 people with separate accounts working on shared posts on a single blog, who want to post as a single user. This is easily done on wp-admin/Calypso by changing the author of the post, but currently impossible to do on Mobile app alone. The workaround is to either log out and in of accounts (which is an extra step or few if you have 2fa enabled), or to log in to the web version in Safari and change the author before publishing that way. It would be great if author switching was enabled in the app to avoid this. \n. ",
    "ebinnion": "@meremagee asked me if I could repro this issue and I was able to with the steps above.\n. ",
    "webmaster2015": "Is there any progress on this? I has been two years since the bug was first added here for action!!!. ",
    "catehstn": "Hi @webmaster2015 we are working on an all-new editing experience, so we have no plans to look at this issue.\nMore information: https://make.wordpress.org/mobile/2017/04/08/introducing-the-aztec-mobile-editors/ . Hi! This editor is deprecated and no longer updated. Can I suggest you take a look at Aztec instead? https://github.com/wordpress-mobile/AztecEditor-iOS. ",
    "skadithasan19": "i am facing the same issue. do you know how can i fix this issues?\n. ",
    "slozo": "If You are still using UIWebView I have the workaround to fix this issue, by using the NSObject category.\nYou can find the code on stackoverflow. \nNOTE: I don't know if this will pass App Store review.\n. ",
    "Spacelapp": "@bummytime no, when I install WordPress-Editor via Cocoapods (pod 'WordPress-iOS-Editor') I got these lines of code in WPEditorView:\n- (NSString)editorRawHTML\n  {\n  NSString filePath = [[NSBundle mainBundle] pathForResource:@\"editor\" ofType:@\"html\"];\n  NSData fileContentData = [NSData dataWithContentsOfFile:filePath];\n  NSString fileContentString = [[NSString alloc] initWithData:fileContentData encoding:NSUTF8StringEncoding];\nreturn fileContentString;\n  }\n. @bummytime yeah, but why when I integrate it with pod 'WordPress-iOS-Editor' ?\n. ",
    "an85888": "\u8d5e\n. ",
    "teemobean": "@bummytime Hi - thanks! That worked like a charm. I ended up updating the javascript to not take the focus, as there wasn't another good mechanism to call startEditing in my app. Thank you for your help!\n. ",
    "mattmiklic": "The switch to Merriweather was proposed back in April and has currently been implemented in the Calypso Reader, Posts, and Pages sections.\nThe font size and line height should be determined by our pre-existing modular scale: https://wordpress.com/design-handbook/typography/\nSpecifically: 14px/21px for small screen devices and 16/24px for large screen devices.\n\n. Everything is looking good to me here so far in a quick overview; will continue to test in real-world use.\n. @SergioEstevao Both of those should be in system fonts. Thanks for checking!\n. ",
    "tommi": "@kwonye is this a duplicate of #568?\n. ",
    "tinhbka": "ok tks for care\n. ",
    "RobinChao": "very  thanks.  i will try.\n. ",
    "michaelmou": "I had try it use \"document.execCommand('insertiframe', false, html);\"\nBut , It didn't work.\n. `ZSSEditor.insertHTML = function(html) {\n```\nvar currentField = this.getFocusedField();\nif (currentField.isMultiline()) {\n    // When inserting HTML in the editor (like media), we must make sure the caret is wrapped in a\n    // paragraph tag.  By forcing to have all content inside paragraphs we obtain a behavior that's\n    // much closer to the one we have in our web editor.\n    //\n    currentField.wrapCaretInParagraphIfNecessary();\n}\ndocument.execCommand('insertHTML', false, html);\n```\n//    document.execCommand('insertiframe', false, html);\n//    ActiveDocument.execCommand(\"insertiframe\", false, html);\n    this.sendEnabledStyles();\n};`\n. I can really display it on the iOS UIWebView and WXWebView .And does your Visual Editor render a html like a webview??  I think so , so i just ask you why does a webView so different from inner WebView.. And then do you get some infomation about fixing it?? Thank you\nSent from Michaels...\n\nOn Mar 18, 2016, at 18:26, S\u00e9rgio Est\u00eav\u00e3o notifications@github.com wrote:\nHi there, we don't support flash in our visual editor, and for my knowledge iOS in general is unable to display flash movies. \nI think your only option is to add the tag in the HTML mode and then publish and see it on the web.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub\n. And I try removeImage else, it doesn't work neither.\n. \n",
    "viettrungphan": "http://stackoverflow.com/questions/11520184/editable-webview-getting-scrolled-to-top-by-itself/11546601\nThis is UIWebView error, fixed this by using swizzleMethod.\n-(void)swizzleMethod:(SEL)origSel from:(Class)origClass toMethod:(SEL)toSel from:(Class)toClass{\n    Method origMethod = class_getInstanceMethod(origClass, origSel);\n    Method newMethod = class_getInstanceMethod(toClass, toSel);\n    method_exchangeImplementations(origMethod, newMethod);\n}\n-(void)disableMethod:(SEL)sel onClass:(Class)cl{\n    [self swizzleMethod:sel from:cl toMethod:@selector(doNothing) from:[self class]];\n}\n-(void)enableMethod:(SEL)method onClass:(Class)cl {\n    [self swizzleMethod:@selector(doNothing) from:[self class] toMethod:method from:cl];\n}\n-(void)doNothing{\n}\n-(void)keyboardWillShow:(NSNotification *)aNotification  {\n    // scroll view will scroll to beginning, but we save current offset\n    [self disableMethod:@selector(setContentOffset:) onClass:[UIScrollView class]];\n}\n-(void) keyboardShown:(NSNotification*) notification  {\n[self enableMethod:@selector(setContentOffset:) onClass:[UIScrollView class]];\n}\n. Yes @wongzigii  WPEditorView, but you can  put the code some where with instance of webView that you working on. \n. ",
    "wongzigii": "@viettrungphan Thank you for your information! I will check it out tomorrow.\n. @viettrungphan  Which file did you fixed? Is the WPEditorView.m ?\n. ",
    "zzStar": "No, I am using Cocoapods  0.37.2 .\nthis is my Podfile :\n\nI notice that Target Membersship property is Public:\n\n. Can I manually using it?\nIf delete 'use_frameworks!' from podfile it works\uff0cI do not know why?\n. ",
    "kevinmartin": "When do you plan on adding support for Cocoapods 0.38+?\n/cc @kennysmoothx\n. ",
    "lizkarkoski": "I have a user in the public support forums requesting an easier way to save a draft, particularly, an auto save feature. http://en.forums.wordpress.com/topic/wp-app-for-iphone-abandoning-my-blog-drafts . A user reached out to us via Twitter requesting a more tag in the mobile app: https://twitter.com/user/status/830114222235320320. A user reached out to us via Twitter requesting a more tag in the mobile app: https://twitter.com/user/status/830114222235320320. ",
    "frosty": "Yep, so it looks as though this is due to differing clipboardData data types. When getting clipboard data in JavaScript, you must specify the type of data you want to retrieve \u2013 for example:\nvar plainText = clipboardData.getData('text/plain');\nLinks copied via YouTube are available as both plain text and with the text/uri-list data type. However, links copied via Safari are only available as the latter. We were previously only fetching data from the clipboard as plain text, which is why these Safari links were getting ignored. Fix coming up... \n. @SergioEstevao I've managed to add support to the legacy editor. I had to add a UITextView subclass, and I've explained the reason for that in its documentation comments.\n. Thanks for the comments, @SergioEstevao \u2013 sorry for the delay in replying!\n\non the visual editor, when you use a shortcut, the corresponding icon on the toolbar should be activated\n\nThis is working for me \u2013 can you confirm that it's definitely not for you? I can record a GIF / video if necessary.\n\non the visual editor, the shortcuts don't work on the HTML mode\n\nI've taken a look at this and it seems to be the same issue as with the legacy editor: HTML uses a UITextView, which suffers from the same iOS 9 bug. I'm just thinking about the best way to approach fixing this in both places (alongside working on other stuff), and I'll try and get something pushed up soon!\n. @SergioEstevao I've been looking into highlighting the toolbar buttons, and the problem only affects the Bold and Italic buttons. It's the same iOS 9 bug, where our custom methods for these shortcuts aren't called. The issue is that we seem to have no way of knowing then the user's pressed the keyboard shortcut. I've even hooked up the editor to Safari's inspector, and no javascript events get fired when you press Cmd+B/ Cmd+I. \nIt's up to you whether you want to proceed without these two buttons getting highlighted as soon as you press the shortcut? They do highlight once you start pressing other keys, and as you noted the B / I icons on the top of the keyboard get highlighted too. I think the benefit of having the shortcuts in the first place outweighs these few issues.\n. Thanks @SergioEstevao!\n. I was wondering that myself. I think plain text is probably the right choice, for a couple of reasons:\n- If you want a link, you can tap the link button. It will automatically use the URL on the clipboard if one is there.\n- If you want to e.g. embed a YouTube video, you just want to paste the raw URL into the post (not a link)\n. @diegoreymendez Thanks for merging this whilst I was away!\n. Fixed by https://github.com/wordpress-mobile/WordPress-iOS/pull/6231#merged-event%23merged-event. Thanks @SergioEstevao!. Just running the demo app \u2013 the positioning of items looks better, but it seems like some of them are still getting squashed in portrait orientation:\n\nThis is on iPhone 8, iOS 11.0. fwiw, seeing the same on the legacy editor \u2013 here's one of the buttons:\n<UIImageView: 0x7ff817f3f030; frame = (0 0; 39 44); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x60800043cc00>>. Latest changes definitely fix the 'flying toolbar', and the sizes of the items are more consistent. However, I noticed on an iPhone SE sized device, we lose the last toolbar item on iOS 11, which doesn't happen on iOS 10:\n\n. Same on iPhone 8 \u2013 notice the small image icon:\n\n. How come we're setting the image on the bar button item? Isn't that not displayed if we're using a customView?. Can we at make this a constant somewhere? But how come it's 42 and not the default 44 for a toolbar? Can we use the toolbar's intrinsicContentSize.height instead?. Don't all these fields have the same inputAccessoryView? Can we just set this once?. you can just return the CGSizeMake directly instead of creating a variable.. How come this is static rather than just a property?. I'd probably remove this change as it's not directly related to the PR?. Should we just use the background colour of the toolbar that's passed into this method?. We should call super here.. FYI you can shortcut this to toolbar.backgroundColor ?: [[WPLegacyEditorFormatToolbar appearance] backgroundColor];. ",
    "hamzaansari09": "But  both UNDO and REDO are still not working\n. No i managed some workaround\n. I can reproduce this issue for bold and italic.\nRemove all the text in the editor now enable bold / italic and try to type. \nSame issue occurs in Wordpress iOS Application\n. ",
    "xineason": "But both UNDO and REDO are still not working\n. @hammyhamza  did you fixed it?\n. ",
    "iosyaowei": "both UNDO and REDO are still not working\uff0c how do  ???. ",
    "KiwiNiksta": "On iPhone6s, iOS 10.1.1, I had this exact problem, 3rd November 2016.\nDescription: \nWrote content last night, upgraded phone overnight, hadn't saved post.  Next day, app displayed half message box and keyboard (see picture).  I couldn't select the post, nor access the message box (tried return).  App was effectively frozen.  \nWork-around: \nDoubleclick home button, and swiped up wordpress app to close it.  Restarted the wordpress app, navigated to posts and the post appeared in list, marked as local. Selected \"Edit\" on post, and app presented message box without keyboard so I was able to save / discard changes.\n\n\n. ",
    "bagia": "@bummytime Thanks. Yes, I do realize this and it kind of make sense in the context I want to use this method. I'm not very familiar with your integration process. Yesterday you merged these changes to the \"develop\" branch; will they ever make it to the Pod v1.0?\n. @bummytime I will.\nI'm still doing some research at the moment, especially around how to store the resulting images.\nAt first I was thinking I could store them as inline (base64-encoded) images in the body of the HTML. But I see that even the smallest image is already generating a big bunch of base64 data (base64 is big by nature, that doesn't help).\nNow I'm more thinking about storing the resulting pictures on the device, and maybe upload them. This will need a more heavy-weight logic, but it is also increase the potential of the feature: you could take a photo from your camera roll, and then edit it with this feature: for instance circle things or draw on top of them...\nLet me know if you have any thought/comment to share with me on that.\n. I haven't had much time to work on this lately, but I did put some hours today. I'm moving towards a feature where you tap an image, and this puts the image in a sort of \"edit mode\" where you can draw on top of it. I guess at some point I'll figure out a way to have a button to start \"fresh\" with a blank image.\nI'm now able to synchronize an image tag to a canvas and vice versa, including when switching the editor from edit mode to HTML mode.\nI still need to work on storage/persistence. At the moment I'm still using base64 but it clearly doesn't scale when using photos.\nI'm also starting to think about the controls I'm going to need (to switch to edit mode, to save, to switch tools, etc.). Not too sure of the direction I'll take there (either another toolbar on top of the main one, or maybe a floating control written in HTML/Js).\n. ",
    "rawzone": "We encounter this problem as well...\nNot only are the fields missing in the editor, but the output of the image markup is also missing the new (Wordpress 4.4) responsive code (srcset etc).\n. @aerych This is indeed build in to Wordpress 4.4. I tried to setup a fresh Wordpress 4.4 and added a image to a test post. And sure thing, image output is using the new responsive markup. (srcset, sizes etc).\nI've done this testing in a brand new Wordpress 4.4 install with the Twenty Fifteen theme.\nSee this screenshot\n. @aerych No problems. Should you need any further information, please do not hesitate to contact me\n. ",
    "ReadmeCritic": ":tada: \n. ",
    "wahyusumartha": "i've got this problem as well, \nwhen i trying to copied and pasted text into the editor and put the cursor behind the first word, and then for some reason i could not remove that part, \n. ",
    "GioValentin": "what is the point of having a uniqueID and a mediaID. are they the same thing? \n. UPDATE: you just need to uncomment the \"use frameworks!\" \n. I figured it out. I am not using a navigation controller so I had to just use self instead of self.navigation controller dismiss. Thank you for the reply back. \n. ",
    "designsimply": "Tested and confirmed: 1m25s\nNote: the problem happens for me no matter what icon I tap in the top bar, not just the Post/Update link.\n. @SergioEstevao, I didn't test with the 6.1 internal release earlier\u2014tested it just now, and it's broken in a different way. I am able to interact with the app if I tap the top icons in a post while images are uploading and I can publish the post, but the images end up broken in the post preview and live post.\nVideo: 3m12s (tested with iOS 9.3 iPhone 6S WPiOS6.1.0.20160318)\nPosts for ref:\n- http://watchingstormsrollby.me/2016/03/28/more-images/\n- http://watchingstormsrollby.me/2016/03/28/one-more-try/\n\nSeen at http://watchingstormsrollby.me/2016/03/28/more-images/ using Chrome 49.0.2623.87 on Mac OS X 10.11.13\nScreenshot showing a broken image from the \"more images\" test post:\nsrc looks wonky:\n<span id=\"img_container_F40FD4FC-77D6-405A-8A42-1E4BC5E7A10F\" class=\"img_container\"><img src=\"/var/mobile/Containers/Data/Application/897A7E74-9AE1-42D6-97A6-DB8D86DC0BBB/Documents/Media/img_3647-thumbnail.jpeg\" alt=\"\" class=\"uploading\" scale=\"0\"></span>\n. ",
    "adrianmcgee": "I've tested this issue on iPad Air 2, iOS 10.3.2, WPiOS 7.7 and cannot reproduce.\n\n\n. This is my first pull request so if I've done anything incorrectly please let me know :-) Thanks. ",
    "mick20": "Thanks for your reply.\nI run the sample app on my iphone6. \nWhen I added around 20 pictures, the app become very slow and I cannot do anything on that.\nIt shows that the app occupied around 100mb memory...\nIs there any reusable solution as it said in the brief?\n. ",
    "IsVivian": "How to change lower resolution images?\n. I have upload the image, but the image will disappear sometimes when I use \"[self.editorView insertLocalImage:self.serviceImgURL uniqueId:self.imageID];\" I don't know how to solve it.\n. ",
    "hackjie": "ok, thanks for your answer, i will try version 0.9.1 of the pod and test\nit, thanks again, haha\n2016-04-22 16:43 GMT+08:00 S\u00e9rgio Est\u00eav\u00e3o notifications@github.com:\n\nHi there for you to use the current version of the pod you will need to\nremove the use of API calls that are iOS 9 and also to rollback some fixes\nthat where specific for iOS 7.\nI think the easiest way will be to use to version 0.9.1 of the pod, that\nwas the last version that supported iOS 7 and above.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub\nhttps://github.com/wordpress-mobile/WordPress-Editor-iOS/issues/809#issuecomment-213331217\n. \n",
    "kriskorn": "A recent user request for this feature. (Ticket ID: 3126310). ",
    "tech4solitude": "Got it .. Thanks .\n. ",
    "twisturn": "How do you solve it?. ",
    "francescoyang": "Did I should change some Info.plist ,or something? I  replace My project Info.plist with demo's Info.plist, It's also not work\n. ",
    "yuyedaidao": "I have the some issue\n. same problem. the same problem. Help me! . ",
    "Sunny-zhao": "mark. ",
    "Homosum": "mark. same problem,hasn't found a way out.... Another problem is the 'redo' and 'undo'  js-founctions does not work.. 0ne more problem  is that the 'Bold' function doesn't work until the keyboard has put out words twice, besides 'Italic' function and so on.. 0ne more problem  is that the 'Bold' function doesn't work until the keyboard has put out words twice, besides 'Italic' function and so on.. ",
    "OldestDriver": "Have you solve the problem\uff1f can you tell me how?\n. ",
    "lujiuyin": "same problem. ",
    "wwwang89": "I fixed it like this:\nin WPImageMeta.m file, comment the below line,\n//@import NSObject_SafeExpectations;  \nand import like :\nimport \"NSObject+SafeExpectations.h\".",
    "MrZhaoying": "you must in pod file add    use_frameworks!  On the platform: ios, 9.0, and target xxx middle  or change  @import NSObject_SafeExpectations; to #import \"NSDictionary+SafeExpectations.h\"\n. ",
    "liuzhen2008": "Looks like i just need to modify things under pod in xcode. Is that correct?\n. ",
    "JiangYuf": "me too, please fix quickly. ",
    "davidseek": "Embarassing but I wasn't able to find it, because I have called:\nfunc editorTextDidChange(_ editorController: WPEditorViewController!) {\n        editorController.bodyText \n}\nI needed to call:\nfunc editorTextDidChange(_ editorController: WPEditorViewController!) {\n        self.bodyText \n}\nNow I'm good...\nclosed.",
    "laughmaker": "you need modify the source. like this\n\n\n      <div contenteditable=\"false\" id=\"zss_field_title\" class=\"field\" nostyle>\n      </div>\n      <div contenteditable=\"false\" id=\"separatorDiv\" >\n          <hr/>\n\n\n\n\n. \n",
    "ldu1101": "my app should support ios8.0, but WP did not support ios8.0. i should how to do. ",
    "LBingRun": "How do you solve it?. ",
    "elibud": "@diegoreymendez do you want to move this to the Aztec repo?. Thanks @qiaoyan \n@diegoreymendez is this OK to close?. ",
    "qiaoyan": "for reference, behavior corrent in AztecEditor-iOS version 1.0.0-beta.12, but not in it's earlier versions.\n. Hi, I think it is not a problem for AztecEditor-iOS anymore, the change happens between AztecEditor-iOS version 1.0.0-beta.11.1 and version 1.0.0-beta.12.. ",
    "liudeliude": ". who can tell me\uff0cthanks. .",
    "JiangWenjia": "\n. ",
    "mokai": "We add a cover component, which adds directly to the editor.html\n. Me too.. ",
    "YanaWanger": "I've had this problem, too. ",
    "rameshrathi": "Have you found any solution to this ?. "
}