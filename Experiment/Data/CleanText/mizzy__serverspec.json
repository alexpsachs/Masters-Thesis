{
    "mizzy": "Great work! Thanks a lot!\nSome specs don't work on my environment.So let me check them.\n. Ah, specs run the command actually, so it is natural that specs don't work. I understand.\nI should introduce mock or stub in specs.\nI will think about it later.\n. I fixed some code, added description to README and released as 0.0.2.\nThanks for your great work! I appreciate you very much.\n. Released as v2.9.1.\n. Thanks.\nBut \"should exists_user\" is not correct. \"should be_user\" would be better.\nAlso \"should exists_group\" should be \"shoule be_group\".\nPlease fix them.\n. Thanks for fixing them!\nI made some fixes and merged.\n:+1:\n. Thanks a lot! :bow:\n. Thanks! Nice work!\n. Thanks.I will check them later.\n.  \"be_running and\" and \"be_process\" are same meaning essentially.\nBecause if the process exists, it is running, too.\nSo I deleted the code related to be_process.\nBut the process checking in be_running is good idea.\nSo I merged the code related to it.\nThanks.\n. Thanks a lot!\n. Thanks!\n. Thanks a lot!\n. LGTM! :+1:\nThanks and merged.\n. I've released as 0.1.1.\nI've added this matcher and your name on the site.\nhttp://serverspec.org/matchers.html\nhttp://serverspec.org/contributors.html\nThanks a lot!\n. Thanks. I've merged and released as v0.1.3.\n. :+1:\n. Oh, I see.Thanks for working on a fix.\n. Thanks!\n. This is nice idea.\nI think that 'after' and 'before' are more explicit than  'from' and 'to' .\nHow do you think about it?\n. > I think 'after' and 'before' is good If use separate is the main pattern.\nAgree.\nAll patterns are not exclusive, so I will add 'after' and 'before' after merging your code.\nThanks a lot.\n. I've released as v0.1.5.\nThanks a lot! :smile:\n. Released as v0.1.6. Thanks.\n. Great work! Thanks a lot!\n. Released as v0.1.7.\n. Thanks!\n. This is very interesting idea.\nBut serverspec should work without installation of Puppet.\nSo I merged this request and removed dependency on Puppet from serverspec core.\n. And It's possible that I will remove Puppet backend in the future.\n. I found that your commits breaks the compatibility.\nAlso your commits are highly abstracted and complex.\nI'd like to keep serverspec code base simple.\nSo I will revert your commits.Sorry,\n. With PR 36, I found that be_running matcher's behavior changed. Before PR 36, it checks with commands.check_running() and commands.check_process. But with PR 36, it uses only check_running(). This breaks backward compatibility.\nI thought there might be another compatibility breaker.So I reverted.\nIf you can implement them without breaking backward compatibility, I will accept it.\n. > Hmmm no, PR 36 still uses both commands check_running and check_process:\n\nraphink@739ff34#L2R74\n\nOh, I missed that. Sorry.I understand that you care backward compatibility.\nSorry for my misunderstanding.\nAnd I'd like to try merge your PRs again.\nThanks.\n. No problem :smile: \n. I've tested and it seems there are no problems.\nSo I've released as v.0.2.1. Thanks!\n. I've merged and fixed some points.\n- Fixed to adapt to specification changes of #36 \n- Fixed some specs\n- be_zfs(value).property(property) is unnatural, so fixed it to be_zfs.with({ property => value })\nPlease see 425349b and 09e322703e87 .\nI confirmed that all specs are passed, but did not confirmed on Solaris.\nSo please check them on Solaris.\nIf there will be no problem, I will released as v0.2.2.\nThanks.\n. > but I found be_zfs.with is not strict. \"be_zfs.with({'compression' =>\n\n'on'})\" never fail, because 'on' matches\n'compression'.\n% zfs get -H compression rpool |grep on\nrpool   compression     off     default\n\nI've fixed that in #41 .Please check it.\n. > Failures:\n\n1) rpool\n     Failure/Error: })\n       expected \"rpool\" to be zfs\n     # ./spec/localhost/zfs.rb:10:in `block (2 levels) in '\n\nPlease paste the content of ./spec/localhost/zfs.rb.\nAnd I will fix the command \"/sbin/zfs get -H #{key} #{zfs} | grep ' #{value} '\"\nto \"/sbin/zfs list -H -o #{key} #{zfs} | grep ^#{value}$\". Thanks.\n. I've fixed the command for exact match.Please check it.\n. Do multiple properties work fine? Or Only does command fixing work?\n. I see what you point.I will merge to master.\nIf you have any idea to find which property is wrong with multiple properties, please tell me.\nThanks.\n. You can write the spec without { and } like this.\nruby\nit { should be_zfs.with( 'compression' => 'on' ) }\nOr\nruby\nit do\n  should be_zfs.with(\n    'mountpoint'  => '/rpool',\n    'compression' => 'on'\n  )\nend\n. Merged and release as v0.2.2. Thanks!\n. Thanks!\n. I've release as v0.2.2. Thanks!\n. \u65e9\u901f\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n. It seems very useful.Thanks.\n. Great work! Thanks.\n. Very Nice! Thanks!\nI've fixed a little. See 917ec94 and 789fd01 .\nAnd released as v0.2.5.\n. Thanks.Merged and release as v0.2.6.\n. \"be_svcprop\" seems unnatural as English.\nHow about this?\n``` ruby\ndescribe 'svc:/network/http:apache22' do \n  # Single property\n  it { should have_svcprop('httpd/enable_64bit').with_value('false') }\n# Multiple properties\n  it do\n    should have_svcprops(\n      'httpd/enable_64bit' => 'false',\n      'httpd/server_type'  => 'worker'\n    )\n  end\nend\n```\n. It seems good.Thanks!\n. Good work! Thanks.\n. Thanks.\n. Thanks!\n. Thanks!\n. Thanks! Released as v0.2.11.\n. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\nbe_permissive, be_disabled \u3082\u3001\u3042\u3063\u3066\u3082\u3088\u3055\u305d\u3046\u3067\u3059\u306d\u30fc\u3002\n\u305f\u3057\u304b\u306b\u3001be_disabled \u306f\u3001\u30b5\u30fc\u30d3\u30b9\u7528\u30de\u30c3\u30c1\u30e3\u306b be_enabled \u304c\u3042\u308b\u306e\u3067\u3001\u308f\u304b\u308a\u3065\u3089\u304f\u306a\u308a\u305d\u3046\u306a\u3093\u3067\u3059\u304c\u3001\u3082\u3057 selinux \u4ee5\u5916\u306b\u3082 be_disabled \u4f7f\u3044\u305f\u304f\u306a\u3063\u305f\u3089\u3001\nruby\nRSpec::Matchers.define :be_disabled do\n  match do |target|\n    if target == 'selinux'\n      backend.check_selinux(example, 'disabled')\n    elsif target == 'foo'\n      backend.check_foo(example, 'disabled')\n    end\n  end\nend\n\u307f\u305f\u3044\u306b\u3059\u308b\u3068\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\uff08\u73fe\u72b6\u306f selinux \u3060\u3051\u306a\u306e\u3067\u3001if \u306f\u306a\u3057\u3067\u3044\u304d\u306a\u308a backend.check_selinux \u547c\u3073\u51fa\u3059\u5f62\u3067\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\uff09\n\u3067\u3001be_permissive, be_disabled \u8ffd\u52a0\u306b\u3042\u305f\u3063\u3066\u306f\u3001\nruby\ndef check_enforcing\n  \"/usr/sbin/getenforce | grep 'Enforcing'\"\nend\n\u3053\u308c\u3092\nruby\ndef check_selinux mode\n  \"/usr/sbin/getenforce | grep -i '#{mode}'\"\nend\n\u307f\u305f\u3044\u306b\u3059\u308b\u3068\u3001\u30b3\u30de\u30f3\u30c9\u30921\u500b\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u3053\u3093\u306a\u611f\u3058\u3067\u8ffd\u52a0\u4fee\u6b63\u3057\u3066\u3082\u3089\u3063\u3066\u826f\u3044\u3067\u3059\u304b\uff1f\n. \u3042\u3001\u4e0a\u306e\u30b3\u30fc\u30c9\u3001target \u306e\u90e8\u5206\u306f subject \u306e\u65b9\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002RSpec\u7684\u306b\u3002\n. \u3046\u30fc\u3093\u3001\u305d\u308c\u3060\u3068 \"Enforcing should be selinux\" \u3068\u3044\u3046\u6587\u7ae0\u306b\u306a\u308b\u306e\u3067\u3001\u82f1\u8a9e\u3068\u3057\u3066\u304a\u304b\u3057\u3044\u3067\u3059\u306d\u3002\"SELinux should be enforcing\" \u3068\u306a\u308b\u3079\u304d\u3067\u3059\u306d\u3002\n\u306a\u306e\u3067\u3001\u6307\u6458\u3068\u305a\u308c\u3066\u308b\u3068\u3044\u3046\u3088\u308a\u3001\u5168\u7136\u9055\u3046\u65b9\u5411\u306b\u884c\u3063\u3061\u3083\u3063\u3066\u308b\u3088\u3046\u306a\u2026\n\u5143\u3005\u306e\ndescribe 'selinux' do\n  it { should be_enforcing }\nend\n\u306f\u6b63\u3057\u3044\u3067\u3059\u3002\u50d5\u304c\u6307\u6458\u3057\u3066\u308b\u5185\u5bb9\u306f\u3001\u3053\u308c\u306b\u30d7\u30e9\u30b9\u3057\u3066\u3001be_permissive \u3068 be_disabled \u304c\u3042\u308b\u3068\u3044\u3044\u3067\u3059\u306d\u3001\u3068\u3044\u3046\u3053\u3068\u3068\u3001\u305d\u306e\u5185\u90e8\u7684\u306a\u5b9f\u88c5\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3001\u3067\u3059\u306d\u3002\n\u3042\u3068 be_selinux_add \u3082\u82f1\u8a9e\u3068\u3057\u3066\u306f\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u50d5\u3067\u3042\u308c\u3070 add-selinux-matchers \u3068\u304b support-selinux-matchers \u3068\u304b\u306b\u3057\u307e\u3059\u306d\u3002\uff08\u307e\u3042\u3053\u306e\u8fba\u306f\u3042\u307e\u308a\u6c17\u306b\u3057\u306a\u304f\u3066\u3044\u3044\u3067\u3059\u3051\u3069\u3002\uff09\n. \u4ed5\u5207\u308a\u76f4\u3057\u306b\u3064\u3044\u3066\u306f\u307e\u3060\u5f8c\u306b\u3057\u3066\u3001\u3044\u3063\u305f\u3093\u3053\u3053\u3067\u63c9\u3080\u3060\u3051\u63c9\u3093\u3067\u3057\u307e\u3044\u307e\u3057\u3087\u3046\u3002\u3067\u3001\u5b8c\u5168\u306b\u56fa\u307e\u3063\u305f\u3089\u3001\u5c65\u6b74\u3092\u304d\u308c\u3044\u306b\u3059\u308b\u305f\u3081\u306b\u3001\u5225\u30d6\u30e9\u30f3\u30c1\u3067\u3057\u304d\u308a\u306a\u304a\u3059\u306e\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u306d\u3002\n. \u306f\u3044\u3001\u305d\u306e\u65b9\u5411\u6027\u3067\u5927\u4e08\u592b\u3067\u3059\uff01\n. ### commands/base.rb \u3068 commands/redhat.rb \u306b\u3064\u3044\u3066\ncommands/base.rb \u3068 commands/redhat.rb \u306b\u8ffd\u52a0\u3055\u308c\u3066\u308b\u5185\u5bb9\u304c\u307e\u3063\u305f\u304f\u4e00\u7dd2\u306a\u306e\u3067\u3001redhat.rb \u306e\u65b9\u306f\u8ffd\u52a0\u4e0d\u8981\u3067\u3059\u306d\u3002redhat.rb \u306f base.rb \u3092\u7d99\u627f\u3057\u3066\u308b\u306e\u3067\u3002\ncheck_enforcing, check_permissive, check_disabled \u306b\u3064\u3044\u3066\n\u4f3c\u305f\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u30923\u3064\u8ffd\u52a0\u3057\u3066\u308b\u306e\u306f\u7121\u99c4\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3072\u3068\u3064\u306b\u307e\u3068\u3081\u305f\u65b9\u304c\u3044\u3044\u3067\u3059\u3002\ndef check_selinux mode\n        \"/usr/sbin/getenforce | grep -i '#{mode}'\"\n      end\n\u305d\u306e\u4e0a\u3067\u3001matchers/be_disabled.rb \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\nbackend.check_selinux(example, 'disabled')\nexample \u306f\u4ed6\u306e\u30de\u30c3\u30c1\u30e3\u30fc\u306b\u5023\u3063\u3066\u3001\u5fc5\u305a\u6e21\u3059\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nbe_permissive, be_enforcing \u3082\u540c\u69d8\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n. \u304a\u3001\u307b\u3093\u3068\u3060\u3002\u4f55\u304b\u304a\u304b\u3057\u3044\u3067\u3059\u306d\u3002 @kenjiskywalker \u3055\u3093\u306e\u30b3\u30fc\u30c9\u306b\u554f\u984c\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u3055\u305d\u3046\u3067\u3059\u306d\u3002\u78ba\u8a8d\u3057\u307e\u3059\u30fc\u3002\n. \u73fe\u72b6\u3060\u3068\u3001rake spec \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\n$ rspec ./spec/debian/commands_spec.rb ./spec/debian/matchers_spec.rb ./spec/gentoo/commands_spec.rb ./spec/gentoo/matchers_spec.rb ./spec/redhat/commands_spec.rb ./spec/redhat/matchers_spec.rb ./spec/solaris/commands_spec.rb ./spec/\nsolaris/matchers_spec.rb\n\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u4e00\u6c17\u306b\u5b9f\u884c\u3057\u3066\u308b\u3093\u3067\u3059\u304c\u3001\u3053\u308c\u304c\u826f\u304f\u306a\u3044\u3067\u3059\u306d\u3002\u3053\u308c\u306f\u50d5\u304c\u66f8\u3044\u305f\u5143\u3005\u306eRakefile\u304c\u304a\u304b\u3057\u3044\u3067\u3059\u306d\u3002\u4eca\u307e\u3067\u554f\u984c\u304c\u51fa\u306a\u304b\u3063\u305f\u306e\u304c\u4e0d\u601d\u8b70\u306a\u304f\u3089\u3044\u3067\u3059\u3002\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u3067Rakefile\u4fee\u6b63\u3057\u307e\u3059\u306d\u3002\u554f\u984c\u70b9\u306e\u3054\u6307\u6458\u3001\u611f\u8b1d\u3067\u3059\u3002\n\u305d\u308c\u4ee5\u5916\u306e @kenjiskywalker \u3055\u3093\u304c\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u306f\u304a\u304a\u3080\u306d\u554f\u984c\u306a\u3055\u305d\u3046\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u306e\u65b9\u3067\u3061\u3087\u3063\u3068\u3060\u3051\u4fee\u6b63\u3057\u3066\u30de\u30fc\u30b8\u3057\u307e\u3059\u30fc\u3002\n. Rakefile \u3068\u3044\u3046\u304b\u3001\u50d5\u306e spec \u306e\u66f8\u304d\u65b9\u306e\u554f\u984c\u3067\u3057\u305f\u3002\nspec/debian/commands_spec.rb \u3068\u304b spec/redhat/commands_spec.rb \u3068\u304b\u3067\u3001\u305d\u308c\u305e\u308c\u306e OS \u7528\u30d8\u30eb\u30d1\u30fc\u3092\u76f4\u63a5 include \u3057\u3066\u308b\u3093\u3067\u3059\u304c\u3001\u540c\u3058 commands \u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u308b\u306e\u3067\u3001\u5148\u306b include \u3055\u308c\u305f\u65b9\u304c\u305a\u3063\u3068\u6709\u52b9\u306b\u306a\u308b\u3088\u3046\u3067\u3001\u5f8c\u304b\u3089 include \u3057\u305f\u65b9\u3067\u306f\u3001\u671f\u5f85\u901a\u308a\u306e\u52d5\u4f5c\u306b\u306a\u3089\u306a\u3044\u307f\u305f\u3044\u3067\u3059\u3002\u00a0\u306a\u306e\u3067\u3001\u76f4\u63a5\u30d8\u30eb\u30d1\u30fc\u3092 include \u3059\u308b\u306e\u306f\u3084\u3081\u3066\u3001\nruby\ndescribe 'be_enabled', :os => :redhat do\n  subject { commands.check_enabled('httpd') }\n  it { should eq 'chkconfig --list httpd | grep 3:on' }\nend\n\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u66f8\u304b\u306a\u3044\u3068\u30c0\u30e1\u306a\u3088\u3046\u3067\u3059\u3002\u3053\u308c\u306f\u4eca\u56de\u306e\u30d7\u30eb\u30ea\u30af\u3068\u306f\u95a2\u4fc2\u306a\u304f\u3001\u5143\u306e\u50d5\u306e\u30b3\u30fc\u30c9\u306e\u554f\u984c\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u3067\u4fee\u6b63\u3057\u307e\u3059\u30fc\u3002\n\n\u5199\u7d4c\u3067\u3044\u3051\u308b\u304b\u3068\u601d\u3063\u305f\u3093\u3067\u3059\u304c\u3001\u3084\u3063\u3071\u308aRSpec\u308f\u304b\u3063\u305f\u4e0a\u3067\u66f8\u304b\u306a\u3044\u3068\u30c0\u30e1\u3067\u3059\u306d\u3002\n\n\u50d5\u3082\u307e\u3060\u307e\u3060\u308f\u304b\u3063\u3066\u306a\u3044\u306e\u3067\u3001\u4e00\u7dd2\u306b\u5b66\u3093\u3067\u3044\u304d\u307e\u3057\u3087\u3046\uff01\n\n\u6b21\u306epullreq\u306e\u6642\u306f\u30d3\u30b7\u3063\u3068\u30ad\u30e1\u308c\u308b\u3088\u3046\u306b\u7cbe\u9032\u3057\u3066\u53c2\u308a\u307e\u3059\u3002\n\n\u671f\u5f85\u3057\u3066\u307e\u3059\uff01\n\n\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\n\u3053\u3061\u3089\u3053\u305d\u3001\u5b66\u3076\u70b9\u304c\u8272\u3005\u3042\u308a\u307e\u3057\u305f\u3002\u307e\u305f\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\uff01\n. Kernel parameter checking is good idea.But I'd like to check a kernel parameter like this.\nruby\ndescribe 'net.ipv4.tcp_syncookies' do\n  its(:value) { should eq 1 }\nend\nTo do this, I must implement before filter in serverspec.I will implement it later.\nThanks.\n. I've implemented in #69 . So close this pull request.\n. Thanks.LGTM.\nAnd if you will add specs to debian, gentoo and solaris, I will appreciate you.\n(Because matchers added by you will be available in those platforms.)\n. ':os => :redhat' are written in all OSes ...\n. Good.Thanks!\n. Thanks!\n. Thanks.You wake up too late :smiley: \n. You should fix spec/*/commands.rb, too.\n. LGTM. Thnaks! \n. These matchers are very useful!\nServerspec runs shell commands to test servers.\nSo you should define shell commands to test in commands/base.rb like this.\n``` ruby\ndef check_mounted(path)\n  \"mount | grep -w 'on #{path}'\"\nend\ndef check_resolvable(name, type)\n  if type == 'hosts'\n    cmd = \"grep -w #{name} /etc/hosts\"\n  elsif type == 'dns'\n    cmd = \"nslookup #{name}\"\n  else\n    cmd = \"getent hosts #{name}\"\n  end\n  cmd\nend\n```\nAnd you don't need to touch backend/exec.rb .\n. Thanks! LGTM.\nAnd I'd like to you change spec files spec/debian/*, spec/gentoo/*, spec/redhat/* and spec/solaris/* .\n(You don't need to test on those platforms.Only just change these files to pass specs for matchers and commands you've added.)\n\nmay i ask why you prefer shell commands instead of ruby builtin library ? i think its because of the remote execution of commands with ssh ?\n\nExactly, you're right.\n. Great! Thanks!\nI've merged and made some fixes like 1c829a29.\nAnd I will try to change be_mounted like this.\nruby\ndescribe '/' do\n  it { should be_mounted.with( :type => 'ext4', :options => { :rw => true, :mode => 620 } ) }\nend\nAfter implementing this, I will release as gem.\nThanks!\n. Merged.Thanks.\n. Thanks!\n. Thanks!\n. Thanks!\n. Thanks!\n. Thanks!\n. Thanks!\n. It seems that /etc/image-id is also added to any other OS by Eucalyptus.\nhttps://github.com/eucalyptus/Eucalyptus-Scripts/blob/master/EMI-IDs\nSo it is not good to detect the type of OS by this file.\npuppetlabs/facter detects Amazon Linux by checking /etc/system-release.\nhttps://github.com/puppetlabs/facter/blob/master/lib/facter/operatingsystem.rb#L107\nSo this will be better:\ndiff\n+        elsif run_command('ls /etc/system-release')[:exit_status] == 0\n+          'RedHat' # Amazon Linux\n. Thanks.I've cherry-picked only ed8691d .\n. I don't like the expression like this.\nruby\n    context \"to localhost on port ssh\" do\n      it { should be_reachable }\n    end\nIt seems natural as English, but so complicated to learn and implement.\nSubject should contain only the host name or ip address for simpleness.\nAnd, other matchers don't take these kind of the subject, so it is strange that only be_reachable takes the subject like that.It breaks the integrity.\n. \"be_reachable\" without any arguments should check the host reachability with ICMP.\n``` ruby\nICMP reachability checking\ndescribe 'localhost' do\n  it { should be_reachable }\nend\n```\n. Thnaks.I've merged and made some fixes.\n. Your patch doesn't work well. So I will not merge it.\nFor example,\nhttps://github.com/matsuu/serverspec/commit/82f9a805fe9e95ac9f87110ceae23b1b933ba19a#L6L132\nThis cron check command results in error.\n``` text\ncrontab -u root -l | grep -- \\\\\\\\ \\\\\\\\ \\\\\\\\ \\\\\\\\ \\\\\\*\\ /usr/local/bin/batch.sh\nzsh: no matches found: \\*\\\n```\nAlso error occurs with bash.\n```\ncrontab -u root -l | grep -- \\\\\\\\ \\\\\\\\ \\\\\\\\ \\\\\\\\ \\\\\\*\\ /usr/local/bin/batch.sh\ngrep: Trailing backslash\n```\nRuby's shellwords escapes the characters that are not needed to be escaped, so I will not use shellwords in serverspec.\n. I've tried your patch in other environment and it works well.So I reopen this issue and will check deeply.\n. Ah, I see.\ncrontab -u root -l | grep -- \\\\\\\\\\\\*\\\\ \\\\\\\\\\\\*\\\\ \\\\\\\\\\\\*\\\\ \\\\\\\\\\\\*\\\\ \\\\\\\\\\\\*\\\\ /usr/local/bin/batch.sh\nAbove runs as below actually.\n`\ncrontab -u root -l | grep -- \\\\\\*\\ \\\\\\*\\ \\\\\\*\\ \\\\\\*\\ \\\\\\*\\ /usr/local/bin/batch.sh\nSo it works well.\nSorry for my misunderstanding.\n```\n. It looks work well. Thanks!\n. LGTM. Thanks a lot !\n. Thanks!\nYou should write \"#90\" to refer the issue.\n. Man page of route says \"This program is obsolete. For replacement check ip route.\"\nSo I don't like to use route command.\nAnd the command ip route brings the output like this.\n$ ip route\n192.168.10.0/24 dev br0  proto kernel  scope link  src 192.168.10.11 \n192.168.122.0/24 dev virbr0  proto kernel  scope link  src 192.168.122.1 \n169.254.0.0/16 dev br0  scope link  metric 1004 \ndefault via 192.168.10.1 dev br0\nThis is very differ from route command.\nSo you should write a matcher independent from the format of route command and ip route command.\n. I think have_routing is better.\n. How about this?\nruby\ndescribe 'routing table' do\n  it { should have_routing_entry( :destination => 'default', :gateway => '192.168.0.1' )\nend\n. Above example contains 'routing' twice, so it would be better like this.\nruby\ndescribe 'routing table' do\n  it { should have_entry( :destination => 'default', :gateway => '192.168.0.1' )\nend\n. When have_iptables_rule was implemented, I think  I can't recognize what rule it is with only have_rule.\nBut I realized that I could recognize what rule it is by checking a subject.\nIf two types of subjects both use have_entry matcher, you can write code like this.\nruby\nRSpec::Matchers.define :have_entry do |attr|\n  match do |subject|\n    if subject == 'routing table'\n      backend.check_routing_table(example, attr)\n    elsif subject = 'foo'\n      backend.check_foo(example, attr)\n    end\n  end\nend\nAnd specs are like these.\n``` ruby\ndescribe 'iptable' do\n  it { should have_entry ... }\nend\ndescribe 'foo' do\n  it { should have_entry ... }\nend\n`\n. `if subject == 'routing table' ... end is not needed now.You should add if block when other type of subject uses this matcher.\n. I'd like to write spec like this.\nruby\nit do\n    should have_entry(\n      :destination => '192.168.100.0/24',\n      :interface => 'eth0',\n      :gateway => '192.168.10.1',\n    )\nend\nAnd, I  don't like you to use \"33.33.33.0\" as sample IP address.\nPlease use IP address ranges for private networks.\n. I like be_default_gateway more than be_default_gw.Could you fix it please?\n. OK\n\u2014\nSent from Mailbox for iPhone\nOn Mon, May 13, 2013 at 7:55 PM, studio3104 notifications@github.com\nwrote:\n\nwith_interface is OK??\nReply to this email directly or view it on GitHub:\nhttps://github.com/mizzy/serverspec/pull/92#issuecomment-17804835\n. Please fix spec/darwin/commands_spec.rb and matchers_spec.rb.\n. LGTM.Thanks!\n. :+1:\n. Serverspec is for \"testing servers\", not for \"testing Ruby codes\".\n\nSo subject takes the string representing the server resource (e.g. /etc/passwd) and doesn't take Ruby Class.\nBut it is safe to check the subject is class or not, so I merge your patch.\nThanks a lot.\n. Great! Thanks!\n. Which is better do you think?\n- have_md5checksum\n- match_md5checksum\n. Thanks for your answer.I think so, too.\nYou don't need to send a pull request-again.\nOnly you have to do is change your code and push your code to this branch.\nYour change will be added to this pull request automatically.\n. Thanks!\n. Thanks a lot! I've added some comments to your commits.Please check it.\nAnd could you add a test for commands.check_access_by_user to spec/*/commands_spec.rb for debian, darwin, gentoo, redhat and solaris, please?\n. Thanks! I've merged and released as v0.2.27.\n. Thanks!\n. Merged and released as v0.2.28.\n. Thanks!\n. Tanks a lot!\n. I've finished implementing  service type.So I will merge and release it.\n. Thanks!\n. Thanks!\n. Released as v0.4.8.\n. Oh, I missed the situation of multiple versions.Your code is correct.Thanks!\n. Thanks!\n. Thnaks! This is very useful.\nI've merged and released as v0.4.11.\n. Thanks!\n. Thanks @cs-travis . Looks good to me.\nBut tests are failing.So you should also fix spec/debian/commands_spec.rb.\nYou can run tests with the command rake spec locally.\nAnd please change /usr/sbin/service to service.Because I changed serverspec to use relative path in #129 .\n. Sorry for merging too late.I've missed the additional commit.\n. I've released as v0.6.1. Thanks!\n. I like this.\n``` ruby\n describe 'Gem' do\n    let(:path) { \"/usr/local/rbenv/shims\" }\n%w(pry\n   awesome_print\n   bundler\n   hub\n   active_support).each do |p|\n  describe package(p) do\n    it { should be_installed.by('gem') }\n  end\nend\n\nend\n```\nBecause this is general and can be used with other matchers.\n. Ah, but I don't know how to implement my idea.So it seems that your original idea is better.\nI will think about it.\n. Another idea is writing path setting in spec_helper.rb like this.\nruby\nRSpec.configure do |c|\n  c.path = '/usr/local/rbenv/shims:/sbin:/usr/sbin'\n  ...\nend\nHow about this?\n. I've implemented my idea in #133 .Please check it.\n. In some environments, adding PATH to the command causes error sorry, you are not allowed to set the following environment variables.\nSo I've fixed this with #133 and released it.\nSo I will close this issue.Thanks for your pull request.\n. I've made tiny fix and released as v0.4.14. Thanks!\n. \u304a\u30fc\u3001\u306a\u308b\u307b\u3069\u3001\u3053\u3046\u3044\u3046\u5b9f\u88c5\u306b\u306a\u308b\u306e\u304b\u30fc\u3002\u53c2\u8003\u306b\u306a\u308b\u3002\n\u3042\u3068\u3001nil \u306f\u4f55\u6545\u304b\u771f\u306b\u306a\u308b\u3068\u601d\u3044\u8fbc\u3093\u3067\u305f\u306e\u3067\u3001if ! xxx.nil? \u307f\u305f\u3044\u306a\u66f8\u304d\u65b9\u3057\u3066\u305f\u3093\u3060\u3051\u3069\u3001\u52d8\u9055\u3044\u3060\u3063\u305f\u3002\u6dfb\u524a\u3042\u308a\u304c\u3068\u3046\uff01\n\u81ea\u5206\u306e Ruby \u529b\u3067\u306f\u3059\u3050\u306b\u7406\u89e3\u3067\u304d\u306a\u3044\u30b3\u30fc\u30c9\u3082\u3042\u308b\u306e\u3067\u3001\u3058\u3063\u304f\u308a\u898b\u3055\u305b\u3066\u3082\u3089\u3044\u307e\u3059\u30fc\u3002\n. module \u3067 super \u3067\u304d\u308b\u3053\u3068\u306f\u3058\u3081\u3066\u77e5\u3063\u305f\uff01\u52c9\u5f37\u306b\u306a\u308b\u306a\u30fc\u3002\n\u3044\u3063\u305f\u3093\u30de\u30fc\u30b8\u3057\u307e\u3059\u306d\u3002\u30de\u30fc\u30b8\u5f8c\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u3057\u305f\u308a\u3068\u304b\u3001\u30c6\u30b9\u30c8\u8ffd\u52a0\u3057\u305f\u308a\u3068\u304b\u3057\u307e\u3059\u3002\n. Tests are failing. So please fix test code, too.\n. Only you have to do is fixing code and push it again.\nYou don't need to send a pull request again.\nThanks.\n. LGTM.Thanks!\n. Merged and released as v0.5.1.Thanks a lot!\n. Thanks!\n. Released as v0.5.2.\n. Thanks!\n. Thanks! But tests are failing, so I will fix them.\n. Thanks! I've made some fixes to your commit. Please check 864d60e .\n. Close #149\n. Thanks!\n. Thanks for your patch.\nPlease add tests to spec//commands_spec.rb.\n. > I found that spec/commands_spec.rb do'nt have check_installed_by_npm testcase.\nThanks! I will add them.\n. I omit a intentionally because it is verbose, but it is good to be able to choose both syntax.\nI found that should be_a_file also calls file? method, not a_file? method.\nSo it is not need to define alias.(Other matchers are same, too.)\nI will merge your commits other than lib/serverspec/type/file.rb.\nThanks!\n. I see.\n. Thanks.\nI will merge your patches after you putting tests.\nYou should send patches and its tests at same time.Without tests, I can't sure your patches work correctly.\nPlease send both patches and its tests at same time next time.\n. Merged, added specs and released as v0.9.3.Thanks.\n. \u304a\u3001\u30ca\u30a4\u30b9\u3002\u305f\u3060\u3001repository\u3060\u3068\u5e45\u304c\u5e83\u3059\u304e\u308b\u306e\u3068\u3001\u3068\u308a\u3042\u3048\u305aRedHat\u7cfb\u3060\u3051\u3001\u3063\u3066\u3053\u3068\u306a\u3089\u3001yumrepo \u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u540d\u306e\u65b9\u304c\u826f\u3055\u305d\u3046\u3002yumrepo \u306f Puppet \u6a19\u6e96\u306e type \u306b\u3082\u3042\u308b\u3057\u3001Chef \u306e Cookbook \u3082\u5b58\u5728\u3059\u308b\u306e\u3067\u3002\n. Thanks!\n. LGTM\n. \u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5ea6\u306bFork\u3057\u3066\u308b\u307f\u305f\u3044\u3060\u3051\u3069\u3001\u4f55\u304b\u7406\u7531\u304c\u3042\u308b\u306e\u304b\u306a\uff1f\u3081\u3093\u3069\u304f\u3055\u304f\u306a\u3044\uff1f\n\u4e00\u5ea6Fork\u3057\u305f\u3082\u306e\u3092\u305d\u306e\u307e\u307e\u4f7f\u3044\u7d9a\u3051\u305f\u3089\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3002\n. Thanks! Tests for the platforms other than RedHat failed, so I've fixed them.\n. Thanks!\n. Thanks!\n. Thanks.You're right.\nIf you will fix them and send me a pull request, I will very appreciate it and merge it.\n. Great work! Thanks!\n. Thanks!\n. \u3044\u304f\u3064\u304b\u306e\u7406\u7531\u3067\u30ea\u30b8\u30a7\u30af\u30c8\u3057\u307e\u3059\u3002\n1. ps \u3067\u30d7\u30ed\u30bb\u30b9\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u305f\u3081\u306e commands.check_process \u306f\u65e2\u306b\u5b58\u5728\u3057\u307e\u3059 https://github.com/serverspec/serverspec/blob/master/lib/serverspec/commands/base.rb#L88\n2. be_running \u3067 ps \u306b\u3088\u308b\u30c1\u30a7\u30c3\u30af\u306f\u65e2\u306b\u884c\u3063\u3066\u3044\u307e\u3059 https://github.com/serverspec/serverspec/blob/master/lib/serverspec/backend/exec.rb#L66\n3. be_proc_running \u3068\u3044\u3046\u66f8\u304d\u65b9\u306f\u4ed6\u306e\u30de\u30c3\u30c1\u30e3\u3068\u4e00\u8cab\u6027\u304c\u306a\u3044\u3067\u3059\u306d\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u7533\u3057\u8a33\u306a\u3044\u3067\u3059\u304c\u3001\u30de\u30fc\u30b8\u305b\u305a\u306b\u30af\u30ed\u30fc\u30ba\u3057\u307e\u3059\u3002\n. \u304a\u3001\u3059\u3070\u3089\u3057\u3002\n\uff1e upstart\u3068supervisor\u3092\u540c\u5217\u306b\u6271\u3063\u3066\u3088\u3044\u304b\u3069\u3046\u304b\u304c\u5c11\u3057\u6c17\u306b\u306a\u3063\u3066\u3044\u307e\u3059\n\u3053\u308c\u306f\u5225\u306b\u6c17\u306b\u3057\u306a\u304f\u3066\u3044\u3044\u3068\u601d\u3046\u3088\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067LGTM\u306a\u306e\u3067\u30de\u30fc\u30b8\u3002\n. \u30b0\u30ec\u30fc\u30c8\u3002\n. \u3042\u308a\u304c\u3068\uff01\n. Very cool! Thanks!\n. Just released as v0.6.18.\n. Thanks!\n. Thanks!\n. Thnaks! I will check it later.\n. I think this syntax is better because this is same as linux_kernel_parameter.\nruby\ndescribe php_config('memory_limit') do\n  its(:value) { should eq '128M' }\nend\n. If you update your code and push to this branch, this pull request will be updated.\nSo you don't need to resend a pull request.\n. Thanks.\nI've changed how to write test code recently, so I've fixed tests and merged your pull request.\nThis resource type will be very useful.Thanks a lot!\n. \u3053\u3061\u3089\u3053\u305d\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u9001\u3063\u3066\u9802\u304f\u3060\u3051\u3067\u3082\u3068\u3066\u3082\u3042\u308a\u304c\u305f\u3044\u306e\u3067\u3001\u3042\u307e\u308a\u96e3\u3057\u304f\u8003\u3048\u305a\u306b\u3001\u304a\u6c17\u8efd\u306b\u9001\u3063\u3066\u304f\u3060\u3055\u3044\u3002\nphp.ini \u307e\u308f\u308a\u306f\u30c8\u30e9\u30d6\u30eb\u304c\u8d77\u304d\u3084\u3059\u3044\u306e\u3067\u3001\u3053\u3093\u306a\u98a8\u306b\u7c21\u5358\u306b\u30c6\u30b9\u30c8\u3067\u304d\u308b\u4ed5\u7d44\u307f\u304c\u3042\u308b\u3068\u3001\u3068\u3066\u3082\u5f79\u7acb\u3064\u3068\u601d\u3044\u307e\u3059\u3002\n\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n. \u3042\u3068\u3001be_listening.with(:tcp) \u3058\u3083\u306a\u304f be_listening.with('tcp') \u306b\u3057\u3066\u6b32\u3057\u3044\u3002\u4ed6\u306e\u30de\u30c3\u30c1\u30e3\u3068\u306e\u4e00\u8cab\u6027\u3068\u3044\u3046\u610f\u5473\u3067\u3002\n\u30b7\u30f3\u30dc\u30eb\u306e\u65b9\u304c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3088\u308a\u3082\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u5c11\u306a\u3044\u3060\u308d\u3046\u3051\u3069\u3001\u73fe\u6bb5\u968e\u3067\u6c17\u306b\u3059\u308b\u3053\u3068\u3067\u306f\u306a\u3044\u3057\u3001\u3053\u306e\u30b3\u30fc\u30c9\u3060\u3068\u3001\u6587\u5b57\u5217\u3067\u3082\u30b7\u30f3\u30dc\u30eb\u3067\u3082\u3069\u3061\u3089\u3067\u3082\u3044\u3051\u308b\u3068\u601d\u3046\u3051\u3069\u3001\u3042\u308b\u30de\u30c3\u30c1\u30e3\u304c\u6587\u5b57\u5217\u3067\u3001\u5225\u306e\u30de\u30c3\u30c1\u30e3\u304c\u30b7\u30f3\u30dc\u30eb\u3060\u3068\u3001\u4f7f\u3046\u4eba\u304c\u6df7\u4e71\u3059\u308b\u3060\u308d\u3046\u3057\u3001\u30b7\u30f3\u30dc\u30eb\u3063\u3066Ruby\u306b\u6163\u308c\u3066\u3044\u306a\u3044\u4eba\u306b\u306f\u308f\u304b\u308a\u306b\u304f\u3044\u6982\u5ff5\u306a\u306e\u3067\u3001serverspec \u3092\u5229\u7528\u3059\u308b\u5c64\u306e\u4eba\u306b\u306f\u3001\u308f\u304b\u308a\u306b\u304f\u3044\u3060\u308d\u3046\u3057\u3001\u3068\u3044\u3063\u305f\u7406\u7531\u3067\u3001\u6587\u5b57\u5217\u3067\u7d71\u4e00\u3057\u305f\u3044\u3067\u3059\u3002\n\u305d\u308c\u304b\u3089\u3001spec \u306b udp \u306e\u30c6\u30b9\u30c8\u3082\u3042\u308b\u3068\u3044\u3044\u306a\u3002\n. Good!\n. Great! Thanks!\n. Thanks!\n. Thanks.\nYou should use alias method rather than defining a new method like this.\n``` ruby\ndef check_installed(package,version=nil)\n  cmd = \"rpm -q #{escape(package)}\"\n  if ! version.nil?\n    cmd = \"#{cmd} | grep -w -- #{escape(version)}\"\n  end\n  cmd\nend\nalias :check_installed_by_rpm :check_installed\n``\n. Thanks!\n. \u3042\u308a\u304c\u3068\u3046\uff01\u30de\u30fc\u30b8\u3057\u307e\u3057\u305f\u3002\n. Thanks.\n. Thanks.\n. Thnaks.I've simplified a little and merged and released it.\n. It seems thatsudocauses the error.It works fine withoutsudoin my environment.I wil fix it.\n. I've confirmed that(and)withsudocauses the error.I will remove(and)whenbe_enforcingandbe_permissive.\n. I've fixed with #218 and released as v0.6.30. Please check it.\n. It's not the problem specific to this command.It's a general issue of the command that composed by several commands concatenated by&&or||`.\nI've heard this problem from @ftnk at July Tech Festa 2013 just today.\nI will fix this issue by fixing Backend::Exec and Backend::Ssh.\n(Or patches are welcome.)\n. Thanks a lot, @kui !\n. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\u9802\u3044\u305f\u4fee\u6b63\u3067\u554f\u984c\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001!\u306f\u5b58\u5728\u3057\u306a\u3044\u304b1\u3064\u3060\u3051\u3042\u308b\u304b\u3001\u306e\u3069\u3061\u3089\u304b\u306e\u72b6\u614b\u3067\u30012\u3064\u4ee5\u4e0a\u7d9a\u304f\u30b1\u30fc\u30b9\u306f\u306a\u3055\u305d\u3046\u306a\u306e\u3067\u3001!*\u3092!?\u306b\u4fee\u6b63\u3057\u305f\u306e\u3068\u3001!\u306e\u5834\u5408\u3060\u3051\u3067\u306f\u306a\u304f(\u306e\u5834\u5408\u3082\u3001\u5f8c\u308d\u306e\u7a7a\u767d\u6587\u5b57\u3092\u540c\u69d8\u306b\u6271\u3063\u305f\u65b9\u304c\u826f\u3055\u305d\u3046\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u306e\u3067\u3001\u00a5s*\u306e\u4f4d\u7f6e\u3092\u5f8c\u308d\u306b\u305a\u3089\u3057\u307e\u3057\u305f\u3002\n\u305d\u308c\u304b\u3089\u3001\u4eca\u5f8c\u3053\u306e\u3042\u305f\u308a\u306e\u30c6\u30b9\u30c8\u304c\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u3001\u5225\u9014\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\nv0.7.1\u3068\u3057\u3066\u30ea\u30ea\u30fc\u30b9\u6e08\u307f\u3067\u3059\u3002\n\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\u4eca\u5f8c\u3068\u3082\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n. Thanks!\nI've merged and released as v0.7.2.\n. Thanks!\n. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u3066\u30010.7.4\u3067\u30ea\u30ea\u30fc\u30b9\u3057\u307e\u3057\u305f\u3002\n. \u30a8\u30b9\u30b1\u30fc\u30d7\u3055\u308c\u3066\u308b\u306e\u3067\u30af\u30a9\u30fc\u30c8\u3057\u306a\u304f\u3066\u5927\u4e08\u592b\u306a\u306f\u305a\u306a\u3093\u3067\u3059\u3051\u3069\u3001\u5177\u4f53\u7684\u306b\u554f\u984c\u304c\u51fa\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u3082\u3089\u3048\u307e\u3059\u304b\uff1f\n\u4fee\u6b63\u7bc4\u56f2\u304c\u5927\u304d\u304f\u3066\u5f71\u97ff\u5927\u304d\u3044\u306e\u3068\u3001\u30af\u30a9\u30fc\u30c8\u3092\u5897\u3084\u3059\u3068\u305d\u306e\u5206\u8907\u96d1\u306b\u306a\u308b\u306e\u3067\u3001\u30af\u30a9\u30fc\u30c8\u3059\u308b\u4ee5\u5916\u306b\u3082\u5bfe\u65b9\u6cd5\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u691c\u8a0e\u3057\u305f\u3044\u306e\u3067\u3001\u5177\u4f53\u7684\u306b\u3069\u3046\u3044\u3046\u554f\u984c\u304c\u51fa\u3066\u308b\u306e\u304b\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n. \u4fee\u6b63\u7bc4\u56f2\u5927\u304d\u3044\u3001\u3068\u3044\u3046\u307b\u3069\u3067\u3082\u306a\u3044\u304b\u3002\u3068\u306f\u8a00\u3048\u3001\u81ea\u5206\u306fzsh\u3067\u7279\u306b\u554f\u984c\u8d77\u304d\u3066\u306a\u3044\u306e\u3067\u3001\u76f4\u3055\u306a\u304f\u3066\u3044\u3044\u3082\u306e\u306f\u76f4\u3055\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u3044\u306e\u3067\u3001\u5177\u4f53\u7684\u306b\u3069\u3046\u3044\u3046\u554f\u984c\u304c\u8d77\u304d\u3066\u308b\u306e\u304b\u6559\u3048\u3066\u3082\u3089\u3048\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u30fc\u3002\n. \u304a\u304a\u3001\u306a\u308b\u307b\u3069\u3002\u898b\u3066\u307f\u307e\u3059\u306d\u30fc\u3002\n. \u3042\u30fc\u3001\u30b3\u30de\u30f3\u30c9\u306e\u7d44\u307f\u7acb\u3066\u65b9\u304c\u4ed6\u306e\u3068\u9055\u3063\u3066\u3001^ \u304c\u30a8\u30b9\u30b1\u30fc\u30d7\u304b\u3089\u6f0f\u308c\u3066\u308b\u304b\u3089\u3067\u3059\u306d\u3002\u305d\u306e\u4e0a\u306b\u3042\u308b\u3001check_grouped \u307f\u305f\u3044\u306a\u5f62\u306b\u66f8\u304d\u63db\u3048\u3066\u3082\u3089\u3046\u65b9\u304c\u3001\u5168\u4f53\u3068\u3057\u3066\u4e00\u8cab\u6027\u304c\u3042\u3063\u3066\u3088\u3055\u305d\u3046\u3067\u3059\u306d\u3002\n. gem \u4ee5\u5916\u3082\u8a72\u5f53\u3059\u308b\u3084\u3064\u76f4\u3057\u3066\u304f\u308c\u305f\u3093\u3067\u3059\u306d\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n. 785dfa1 \u3060\u3051 cherry-pick \u3057\u3066\u30de\u30fc\u30b8\u3057\u307e\u3057\u305f\u30fc\u30020.7.5 \u3067\u30ea\u30ea\u30fc\u30b9\u3057\u3066\u307e\u3059\u3002\n\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n. \u3042\u30fc\u3001builtin command \u3060\u3068\u305d\u3046\u306a\u308b\u3093\u3067\u3059\u304b\u306d\u3002\u3068\u306f\u8a00\u3048\u3001pre_command \u3067\u6307\u5b9a\u3055\u308c\u308b\u306e\u306f builtin command \u3060\u3051\u3068\u306f\u9650\u3089\u306a\u3044\u306e\u3067\u3001\u5358\u7d14\u306b sudo \u5916\u3059\u3060\u3051\u3060\u3068\u4ed6\u306b\u3082\u5f71\u97ff\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3057\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u4ed6\u306b\u5bfe\u5fdc\u65b9\u6cd5\u304c\u306a\u3044\u304b\u8003\u3048\u3066\u307f\u307e\u3059\u30fc\u3002\uff08pre_command \u306e\u305d\u3082\u305d\u3082\u306e\u7acb\u3061\u4f4d\u7f6e\u7684\u306a\u3082\u306e\u3082\u542b\u3081\u3066\u3002\uff09\n. \u81ea\u5206\u304c pre_command \u3064\u304b\u3063\u3066\u306a\u304f\u3066\u3001\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u304c\u898b\u3048\u306a\u304f\u3066\u3001\u3069\u3046\u3059\u308b\u306e\u304c\u6b63\u3057\u3044\u304b\u5224\u65ad\u3067\u304d\u306a\u3044\u306e\u3067\u3001 @linyows \u3055\u3093\u304c\u5177\u4f53\u7684\u306b\u3069\u3093\u306a\u611f\u3058\u3067\u4f7f\u3063\u3066\u308b\u306e\u304b\u3001\u6559\u3048\u3066\u3082\u3089\u3048\u307e\u3059\u304b\uff1f\u305d\u308c\u3092\u898b\u3066\u3069\u3046\u3059\u308b\u306e\u304c\u3044\u3044\u304b\u8003\u3048\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u30fc\u3002\n. \u306a\u308b\u307b\u3069\u306a\u308b\u307b\u3069\u3002let(:path) { ... } \u3060\u3068\u7528\u4ef6\u6e80\u305f\u305b\u306a\u3044\u611f\u3058\u3067\u3059\u304b\uff1f\nsource \u3057\u3066\u304b\u3089 && \u3067\u3064\u306a\u3052\u3066\u3055\u3089\u306b sudo \u3068\u304b\u306b\u306a\u308b\u3068\u3001\u52d5\u304d\u304c\u8907\u96d1\u3067\u5909\u306a\u30c8\u30e9\u30d6\u30eb\u8d77\u3053\u308a\u305d\u3046\u3067\u3001path \u8a2d\u5b9a\u3067\u6e08\u3080\u306a\u3089\u305d\u3046\u3057\u305f\u65b9\u304c\u3044\u3044\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u306a\u30fc\u3001\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n. \u4e86\u89e3\u3067\u3059\uff01\n. Thanks a lot! Looks good to me.\n. Released as v0.7.6.\n. Did you close this issue by mistake?\n. Thanks.I've merged and released as v0.7.7.\n. Thanks!\n. Thanks.Released as v0.7.8.\n. Thanks!I've merged and release as v0.7.9.\n. Thanks! Released as v0.7.10.\n. This fix breaks compatibility, so I cannot accept this fix.\n. I will also think about it.Thanks for your reporting and patch.\n. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\u30de\u30fc\u30b8\u3057\u3066\u30010.7.12\u3067\u30ea\u30ea\u30fc\u30b9\u3057\u307e\u3057\u305f\u3002\n. Thanks!\nI've merged and released as v0.7.13.\n. @smontanari Thanks for your contribution. I've merged your code, fixed a little and released as v0.9.0.\n. Merged and released as v0.9.2. Thanks a lot!\n. \u3053\u308c\u306f\u3068\u3066\u3082\u826f\u3044\u3067\u3059\u306d\uff01\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n. coveralls\u306e\u3084\u3064\u306f\u6c17\u306b\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u3053\u3061\u3089\u306e\u30c6\u30b9\u30c8\u306e\u69cb\u9020\u306e\u554f\u984c\u3067\u3001\u30ab\u30d0\u30ec\u30c3\u30b8\u304c\u6b63\u5e38\u306b\u8868\u793a\u3067\u304d\u3066\u3044\u306a\u3044\u306e\u3067\u3002\n. \u3053\u3061\u3089\u3082\u30c1\u30a7\u30c3\u30af\u304c\u7518\u304b\u3063\u305f\u3067\u3059\u3002\u304a\u6c17\u306b\u306a\u3055\u3089\u305a\u306b\u30fc\u3002\n. Thanks.\n. Thanks.\n. Thanks!\n. Thanks.This is a good hack.\nBut spec_helper.rb generated by serverspec-init is an example.\nAnyone can customize it\nSo if someone would like to customize spec_helper.rb, he should customize\nhis own spec_helper.rb, not setup.rb.\n. Thanks.But I took another approach to fix this.Please see #266 .\n. spec_helper generated by serverspec-init  is just only an example.So if you need to set LANG, you should customize your own spec_helper, not serverspec-init.\nAnd there might be someone who would like to run serverspec under other LANG setting, so I don't like to set LANG=C as default.\n. Thanks!\n. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\u554f\u984c\u306a\u3055\u305d\u3046\u3067\u3059\u306e\u3067\u3001\u30de\u30fc\u30b8\u3057\u307e\u3059\u3002\n. Thanks!\n. Thanks for your patch.It's great.\nIn #235,  @mlafeldt seems to like to write severspec like this:\n``` ruby\n  it 'has right content' do\n    expect(command 'cat /tmp/config').to return_stdout <<EOS\nHost someidentifier\n  HostName github.com\n  Port 22\n  User git\n  IdentityFile /tmp/id_rsa_someidentifier\nHost someidentifier2\n  HostName github.com\n  Port 22\n  User git\n  IdentityFile /tmp/id_rsa_someidentifier2\nEOS\n  end\n```\nBut this patch doesn't seem to meet this demand.\n. ruby\nexpect().to return_stdout_lines(/foo/, /bar/)\nis same as \nexpect().to return_stdout(/foo/)\nexpect().to return_stdout(/bar/)\nisn't it?\nI think it is sufficient that we have only return_stdout.\nI don't like to increase similar matchers.\n. I understand what you would like to do.I will consider the best way to implement it.\n. Thanks @smontanari , I agree your opinion totally.\nAnd I understand the need of flexible command feature.\nSo I've implemented #280 . How about this, @rickhull ?\nThis style is more clear and meaningful, I think.\n. Thanks for your checking, @rickhull !\n. Thanks for your cheking, @rickhull and @smontanari .\nI've just merged to master.I'm looking forward your pull request, @smontanari .\n. Thanks!\n. Thanks!\n. Thanks!\n. Thanks!\n. Thanks!\n. Released as v0.10.12.\n. Thanks! Just released as v0.10.13.\n. What do you mean one of Ssh backend ? check_running of Exec backend is not different from Ssh backend.\n. I'd like to check service running both with OS specific service command and ps command.\nYour change breaks this behavior. So I cannot accept this pull request.\n. Serverspec::Backend::Ssh inherits Serverspec::Backend::Exec, so Serverspec::Backend::Ssh also calls Serverspec::Backend::Exec#check_running.\nSo check_running behavior is not different between Exec and Ssh.\nIt seems that you don't understand this behavior.\n. No problem :smile:\n. Thanks.\n. Thanks!\n. Released as v0.11.4.\n. LGTM. Thanks! I've merged and released as v0.11.5.\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Ah, I've got this error after merging.\n```\n  1) File \"/dev\" command should eq \"stat -f %Lp /dev\"\n     Failure/Error: its(:command) { should eq \"stat -f %Lp /dev\" }\n   expected: \"stat -f %Lp /dev\"\n        got: \"stat -f%Lp /dev\"\n\n   (compared using ==)\n # ./spec/freebsd/file_spec.rb:112:in `block (2 levels) in <top (required)>'\n\n2) File \"/dev\" command should eq \"stat -f %Lp /dev\"\n     Failure/Error: its(:command) { should eq \"stat -f %Lp /dev\" }\n   expected: \"stat -f %Lp /dev\"\n        got: \"stat -f%Lp /dev\"\n\n   (compared using ==)\n # ./spec/freebsd/file_spec.rb:153:in `block (2 levels) in <top (required)>'\n\n```\nPlease fix the command of specinfra or the spec file of serverspec.\n(I don't know which is correct.)\n. Released as v1.0.0.\n. Thanks!\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Thanks.I moved this spec to specinfra.Sorry for confution.\n. Released as v1.0.0.\n. > I think there is a trap with the use of >=. For example, '2.2.5' >= '2.2.14'. \nYes, I know :-) It is an example to show that you can use any matchers or operators.\n\nI would also prefer to return nil if the package is not installed.\n\nSure.I will fix it soon.\n. I've fixed to return nil if the package is not installed.\nPlease check it.\n. Thanks for your checking!\n. I've released specinfra v0.0.14 and serverspec v0.13.4.\n. Released as v1.0.0.\n. Thanks!\n. Released as v1.0.0.\n. Very useful!\n. I see.\nI will revert this merge. How do you think, @ryotarai ?\n. Released as v1.0.0.\n. Thanks!\n. Released as v0.13.6.\n. Released as v1.0.0.\n. Thanks!\n. Released as v1.0.0.\n. Thanks!\n. Released as v1.0.0.\n. Thanks a lot!\n. Released as v0.14.0.\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Released as v1.0.0.\n. > It seems that expect notation does not call custom matchers.\nThis is wrong. expect notation calls custom matchers, but subject is not the expected one.\nCustom matchers should not check the subject class.\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Thanks!\n. Released as v1.0.0.\n. Thanks!\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Thanks!\n. Released as v0.15.1.\n. Released as v1.0.0.\n. Released as v0.15.1.\n. Released as v1.0.0.\n. Released as v0.15.2.\n. Released as v1.0.0.\n. Released as v0.15.2.\n. Released as v1.0.0.\n. Thanks for your pull request and mentioning about serverspec in your tweets.\nBut very sorry, I will not accept your pull request.\nspec_helper.rb generated by serverspec-init is just an example, so\n1. You should customize your own spec_helper.rb for your purpose.Not serverspec-init.\n2. I'd like to keep the sample spec_helper.rb simple.\n3. I don't like SSH password login.It's my policy.Even though I understand the existence of such kind of legacy servers, but I would not like to put the code that doesn't fit my policy to my product.\nBut it is a good tip, so I will put an example of spec_helper.rb to use SSH passwrd login in this page.\nhttp://serverspec.org/advanced_tips.html\nVery apologize and thanks for using serverspec.\nIn the next chance of my business trip to Fukuoka, I'd like to meet you.\nI will give you the serverspec sticker.\n. Yes, I know it, but its is very useful, readable and understandable.So I will continue to use its as long as rspec-its will be provided. And I don't know any good alternatives.\nI don't think we should use only features supported in rspec-core.\n. Sorry, @Tacahilo , I've misunderstood.So I've removed my comment.\n. Released as v0.15.3.\n. Released as v1.0.0.\n. Released as v0.15.3.\n. Released as v1.0.0.\n. Released as v0.15.4.\n. Released as v1.0.0.\n. Thanks a lot.\nBut I don't like so many fixes on one pull request.Please separate it into small pull requests.\n. You don't need to bump version and should not modify runtime_dependency.\nYou fixed only tests, so runtime_dependency is not related to your fix.\n. Testing external http hosts does not match the purpose of serverspec.\nSo I cannot accept this pull request.Sorry.\n. The main purpose of serverspec is testing the state of servers, not behavior.\nSo it's not adequate.\n. Thanks!\n. Released as v0.15.4.\n. Released as v1.0.0.\n. Thanks!\n. Released as v0.15.4.\n. Released as v1.0.0.\n. Thanks.\n. Released as v0.15.4.\n. Released as v1.0.0.\n. Thanks!\n. Released as v0.15.4.\n. Released as v1.0.0.\n. Released as v0.15.4.\n. Released as v1.0.0.\n. Released as v0.15.4.\n. Released as v1.0.0.\n. Released as v0.15.4.\n. Released as v1.0.0.\n. Please write tests to avoid this kind of bug.See spec directory.\n. Thanks.\n. Released as v0.15.5.\n. Released as v1.0.0.\n. Thanks!\n. Released as v0.15.5.\n. Released as v1.0.0.\n. RSpec 3 is still beta and it may change in the future, so I would not like to support it currently.\nspec_helper generated by serverspec-init is only an example, \nso if someone would like to use RSpec 3, he should rewrite spec_helper by himself.\n. Thanks!\n. Sorry.I closed this by my mistake.\n. Released as v1.5.0.\n. Released as v2.0.0.beta3.\n. Thanks!\n. Released as v0.16.0.\n. Released as v1.0.0.\n. Released as v1.0.0.\n. Released as v1.1.0.\n. Released as v1.1.0.\n. Thanks!\n. Released as v1.1.0.\n. I cannot understand what you mean. You fixed the only test code.So you didn't fix anything.\n. Released as v1.2.0.\n. Released as v1.2.0.\n. Released as v1.2.0.\n. Thanks!\n. Released as v1.3.0.\n. Thanks!\n. Released as v1.4.0.\n. Great!Thanks!\n. Released as v1.4.1.\n. Released as v2.0.0.beta2.\n. Released as v1.7.0.\n. Thanks!\n. Released as v1.5.0.\n. Released as v2.0.0.beta3.\n. Released as v1.5.0.\n. Released as v2.0.0.beta3.\n. Thanks!\n. Released as v1.6.0.\n. Released as v2.0.0.beta3.\n. Thanks.\nruby\n  it { should be_exist }\nThis should be should exist, right ?\n. I see.\n. Released as v1.7.0.\n. I would appreciate if you show me the sample output of this patch.\n. Thanks.\n. You override dump_failure and dump_failure_info, but these dump not only failure info but also success info.I think it's not good.\nMaybe you should create a custom formatter instead of overriding formatters in existence.\nhttps://www.relishapp.com/rspec/rspec-core/docs/formatters/custom-formatters\n. I don't have any ideas about it, because I don't need that kind of feature and am not interested in it.\nIt is OK that you create your own custom formatter and use it, but I will not include it in Serverspec\nbecause I don't need it and I don't think so many people need it.\n. As I said before, you should do this by your custom formatter.\nYou should not override success info of the formatter in existence.\nSo I close this.\n. Released as v2.0.0.beta5.\n. Released as v1.7.1.\n. Great.Thanks.\n. Released as v1.8.0.\n. Released as v2.0.0.beta6.\n. Released as v2.0.0.beta6.\n. I will remove these kind of specs in v2.0.So I don't care about it.\nBut thanks.\n. Released as v1.8.0.\n. Thanks.\n. Released as v1.8.0.\n. Released as v1.8.0.\n. Thanks!\n. Released as v1.9.0.\n. Ah, good point! Thanks!\n. Released as v1.9.0.\n. Released as v1.9.0.\n. Thanks.\n. Released as v1.9.1.\n. Released as v1.9.1.\n. :wink: \n. Great! Thanks!\n. Released as v2.0.0.beta8.\n. The main mission of Serverspec is testing statuses of the target server, but this resource type tests the mysql host other than the target host.So this does not match the mission of Serverspec.\nYou should use infrataster for that purpose.\nhttps://github.com/ryotarai/infrataster\n. > These checks should be run on the target MySQL server and from there we should be able to determine if a user/database exists, and that an appropriate grant statement also exists to allow authentication from a given host.\nTotally, yes.\n. In adittion, I'm thinking that be_reachable is inappropriate to the mission of Serverspec now.\n. Serverspec/Spefinra's basic style is Run command via SSH, so if you use Ruby MySQL client, it will not fit the style.It needs another new backend mysql backend.I don't like to add another backend other than current backends.\nAs I said before, it seems that infrataster meets your demand rather than serverspec.Please use it.\nhttps://github.com/ryotarai/infrataster\n. Thanks!\n. Released as v1.10.0.\n. Released as v1.10.0.\n. Released as v2.0.0.beta9.\n. Please do not commit integration-test. You may use git commit -a . Don't use it.\n. Sorry, above comment is my mistake. No problem.\n. Released as v1.11.0.\n. Thanks!\n. Released as v1.12.0.\n. Released as v2.0.0.beta11.\n. Released as v2.0.0.beta11.\n. Released as v2.0.0.beta13.\n. Released as v2.0.0.beta14.\n. https://github.com/serverspec/serverspec/blob/master/lib/serverspec.rb#L13\nThis override does not work with RSpec3.And other errors may occur. I'm focusing\non developing v2 beta now. So I will not support RSpec3 with Serverspec v1. \nUse Serverspec v2 beta.\nYou can install v2 beta with gem install serverspec --pre.\n. Released as v2.0.0.beta15.\n. Released as v2.0.0.beta16.\n. Released as v1.12.0.\n. Released as v2.0.0.beta17.\n. Thanks.\n. Released as v1.12.0.\n. Thanks.\n. Released as v1.13.0.\n. I've fixed to use Ruby naming convention by #460 .\nSorry for missing that.\n. Released as v1.14.0.\n. Released as v2.0.0.beta17.\n. Released as v2.0.0.beta18.\n. Released as v2.0.0.beta19.\n. Thanks.\n. Released as v1.15.0.\n. Thanks.\n. Released as v1.16.0.\n. Thanks.\n. Released as v1.16.0.\n. Could you implement this in Specinfra::Processor just like routing table, please ?\nI'd like to put OS specific code only in Specinfra.\n. Thanks!\n. Released as v2.0.0.beta21.\n. I will not support RSpec 2.x with Serverspec v1. I will release Serverspec v2 soon and it supports RSpec 3.\n. You can use Serverspec v2 beta. It is almost stable.\n. - Please write description.\n- I will release v2 tomorrow and will not maintain v1 anymore. So please send pull requests to 2.0 branch. (Branch name 2.0 will be renamed to master after releasing v2.)\n. Thanks!\n. Released as v2.0.1.\n. Write description.\n. Write how you can write test code with this fix in description.\n. Thanks!\n. Released as v2.1.0.\n. I think that result should kept as-is for testing. So it's intentional the omission of strip.\n. If you find the document is not correct, you can fix it by yourself.\nhttps://github.com/serverspec/serverspec.github.io\nThanks.\n. How about changing should be_present to should exist ?\nSome resource types use exist, but there are no resource types using be_present .\n. Only its syntax is sufficient to testing image settings. So please ommit have_setting matcher.\nAnd RSpec code is Ruby code. I think it should obey Ruby coding style. So\nits(:Architecture) { should eq 'amd64' } should be its(:architecture) { should eq 'amd64' } .\nYou can use String#to_camel_case and String#to_snake_case with Specinfra to convert each other.\nhttps://github.com/serverspec/specinfra/blob/master/lib/specinfra.rb#L62\n. Hmm, I  see. Please give me time to think about how we should handle the parameter name.\n. How about another implementation #482 ?\n. Thanks for checking!\n. Just released #482 .\n. You can fix it by yourself because Serverspec is OSS.\nBTW, updated to use multi_json and released as v2.3.1.\nSee #485 .\n. You can fix it and send a pull request.\n. I'm thinking host resource type is not suitable for Serverspec. Because other resourse types are for testing a target host itself, but host resource type is for testing the hosts other than a target host.\nI'm thinking remove host resource type. So I will not update it\n. Released as v2.3.0.\n. How about 8fc68e4 , @KitaitiMakoto ? You can write a test like this with this commit:\nruby\nclass TestPackage < Serverspec::TestCase\n  def test_package_nginx_is_installed\n    assert { package('nginx').installed? }\n  end\nend\n. Thanks for checking it!\n. Released as v2.2.0.\n. Released as v2.2.0.\n. Released as v2.3.1.\n. spec_helper generated by serverspec-init is an only example and everyone don't use highline.\nSo I will not include highline in serverspec.gemspec.\nYou should include highline in your Gemfile.\n. Thanks.\n. Rakefile generated by your fix does not work in my environment. rake spec do nothing.\nSo I've reverted this merge.\n. And circular dependency is not occurred in my environment. What version of rake do you use ?\n. It's development dependency, not runtime dependency .\n. Ah, thanks for your detailed inspection. I've got it.\nI will think about how to avoid this problem.\n. Host resource type is for testing remote host reachability and so on from test target host, not for testing the tatget host itself. Your code tests the target host itself. It does not match for the purpose of host resource type.\nAnd I'm thinkng remove this resource type because this tests behaviours, not states. Serverspec is the tool for testing states of servers. If you'd like to test behaviours, you should use Infrataster . \n. > why not add these to the Host resource and then deprecate the be_resolvable & be_reachable matchers (as they test behaviour, rather than state)?\nI don't like to change the functions of the existent resource type. It causes confusing.\n. Specinfra has host_inventory as an undocumented experimental feature. It's not implemented sufficiently and can get very few infomations(memory size and ec2 metadata) currently.\nI've added the ability to get hostname, domain and fqdn to host_inventory with serverspec/specinfra#263 .\nWith this update, you can test the hostname like this.\nruby\ndescribe host_inventory['hostname'] do\n  it { should eq 'server' }\nend\nPlease use this feature.\n. Thanks.\n. Released as v2.4.0.\n. Thanks!\n. Released as v2.5.0.\n. Thanks!\n. Released as v2.5.0.\n. Thanks!\n. Released as v2.6.0.\n. Thanks.\n. Released as v2.7.0.\n. Thanks!\n. Released as v2.7.1.\n. Thanks!\n. Released as v2.7.1.\n. All tests fail in travis. So I cannot accept this fix.\nhttps://travis-ci.org/serverspec/serverspec/builds/44142808\n\nIf there is a use case for Serverspec to be included at the top level, could we add some similar logic?\n\nYes, please.\n. Thanks for detailed explanation. \n. \n. Released as v2.7.2.\n. Released as v2.7.2.\n. \u4ee5\u4e0b\u306e\u70b9\u304c\u6c17\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n- /etc/fstab \u306e\u5185\u5bb9\u3092\u898b\u3066\u3044\u308b\u3060\u3051\u306e\u3088\u3046\u306a\u306e\u3067\u3001\u4f55\u3089\u304b\u306e\u7406\u7531\u3067 mount \u304c\u5916\u308c\u3066\u3044\u308b\u5834\u5408\u3067\u3082\u3001\u30c6\u30b9\u30c8\u304c\u901a\u3063\u3066\u3057\u307e\u3046\uff1f\n- noauto \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3064\u3044\u3066\u308b\u5834\u5408\u3067\u3082\u3001be_auto_mounted \u3067\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306f\u3061\u3087\u3063\u3068\u9055\u548c\u611f\u3002\n\u76ee\u7684\u3068\u3057\u3066\u306f\u3001/etc/fstab \u306b\u7279\u5b9a\u306e\u30a8\u30f3\u30c8\u30ea\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u305f\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3057\u3087\u3046\u304b\uff1f\u3082\u3057\u305d\u3046\u3067\u3042\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30c6\u30b9\u30c8\u3059\u308c\u3070\u5341\u5206\u304b\u306a\u3001\u3068\u3082\u601d\u3044\u307e\u3057\u305f\u3002\nruby\ndescribe file('/etc/fstab') do\n  its(:content) { should match %r!^/dev/sda1\\s+/mnt\\s+ext4\\s+ro,errors=remount-ro,barrier=0\\s+0\\s+2$! }\nend\n\u307e\u305f\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\nruby\ndescribe fstab do\n  it do\n    should have_entry(\n      :spec        => '/dev/sda1',\n      :mount_point => '/mnt',\n      :type        => 'ext4',\n      :options     => { ... },\n      :dump        => 0,\n      :pass        => 2,\n    )\n  end\nend\n. file \u306e content \u30de\u30c3\u30c1\u3060\u3068\u3001\u6b63\u898f\u8868\u73fe\u304c\u898b\u3065\u3089\u3044\u306e\u3067\u3001\u3042\u308b\u7a0b\u5ea6\u62bd\u8c61\u5316\u306f\u3042\u3063\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nbe_auto_mounted \u3060\u3068\u3001\u540d\u524d\u3068\u5b9f\u614b\u304c\u4e56\u96e2\u3057\u3066\u3001\u5b9f\u969b\u306b\u4f55\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u304b\u304d\u3061\u3093\u3068\u628a\u63e1\u3057\u306b\u304f\u3044\u306e\u3067\u306f\u3001\u3068\u3044\u3046\u306e\u304c\u61f8\u5ff5\u3067\u3059\u306d\u3002\u3053\u308c\u3060\u3068\u3001\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u308b\u304b\u3069\u3046\u304b\u306e\u30c1\u30a7\u30c3\u30af\u307e\u3067\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u306f\u3001\u3068\u601d\u308f\u308c\u3066\u3057\u307e\u3044\u305d\u3046\u3067\u3059\u3057\u3002\n\u306a\u306e\u3067\u3001\u3042\u308b\u7a0b\u5ea6\u62bd\u8c61\u5316\u3057\u3064\u3064\u3082\u3001\u62bd\u8c61\u5316\u3057\u3059\u304e\u305a\u306b\u3001\u5b9f\u88c5\u304c\u60f3\u50cf\u3067\u304d\u308b\u3082\u306e\u304c\u671b\u307e\u3057\u3044\u3067\u3059\u306d\u3002\u305d\u3046\u3044\u3046\u610f\u5473\u3067\u306f\u3001\u4e0a\u3067\u66f8\u3044\u305f\u3088\u3046\u306a\u3001fstab \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3092\u5b9a\u7fa9\u3059\u308b\u3001\u3050\u3089\u3044\u304c\u3001\u30d0\u30e9\u30f3\u30b9\u304c\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3002\u62bd\u8c61\u5316\u3057\u3064\u3064\u3082\u3001/etc/fstab \u306e\u4e2d\u8eab\u30c1\u30a7\u30c3\u30af\u3057\u3066\u308b\u3093\u3060\u308d\u3046\u306a\u3001\u3068\u3044\u3046\u306e\u304c\u900f\u3051\u3066\u898b\u3048\u308b\u306e\u3067\u3002\n\n\u6b21\u304b\u3089\u306f\u3082\u3046\u5c11\u3057\u3001\u4ed6\u306e\u30de\u30c3\u30c1\u30e3\u306e\u8a2d\u8a08\u306b\u5408\u308f\u305b\u308b\u3088\u3046\u306b\u8003\u616e\u3057\u307e\u3059\u3002\n\n\u4ed6\u306e\u30de\u30c3\u30c1\u30e3\u3067\u3082\u3001\u521d\u671f\u306b\u3064\u304f\u3063\u305f\u3082\u306e\u306f\u5909\u66f4\u3084\u524a\u9664\u304c\u3057\u3065\u3089\u3044\u306e\u3067\u3001\u3042\u307e\u308a\u3044\u3051\u3066\u306a\u3044\u3051\u3069\u3001\u305d\u306e\u307e\u307e\u6b8b\u3057\u3066\u3044\u308b\u3001\u3068\u3044\u3063\u305f\u3082\u306e\u3082\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\n\u4e00\u5ea6\u8ffd\u52a0\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u5f8c\u304b\u3089\u5909\u66f4\u3084\u524a\u9664\u3057\u3065\u3089\u3044\u306e\u3067\u3001\u65b0\u898f\u306b\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3084\u30de\u30c3\u30c1\u30e3\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u306f\u3001\u614e\u91cd\u306b\u3044\u304d\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\u308f\u304b\u3089\u306a\u3044\u3053\u3068\u3084\u6c17\u306b\u306a\u308b\u3053\u3068\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3001\u4f55\u306a\u308a\u3068\u8cea\u554f\u3057\u3066\u304f\u3060\u3055\u3044\uff01\n. \u306a\u308b\u307b\u3069\u306a\u308b\u307b\u3069\u3002mount \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3067\u3082\u3044\u3044\u304b\u3082\u3067\u3059\u306d\u3002\n\u3053\u3093\u306a\u611f\u3058\u304b\u306a\u30fc\u3002\nruby\ndescribe mount('/mnt') do\n  it { should be_mounted }\n  it { should be_enabled }\n  its(:device)  { should eq '/dev/sda1' }\n  its(:type)    { should eq 'ext4' }\n  its(:options) { should include 'ro' }\nend\n. \u305f\u3060\u3053\u308c\u3060\u3068\u3001fstab \u3067\u5b9a\u7fa9\u3057\u3066\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3001\u4eca\u5b9f\u969b\u306b\u3069\u3046\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u308b\u304b\u3001\u3069\u3061\u3089\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u304b\u304c\u60a9\u307e\u3057\u3044\u3067\u3059\u3057\u3001\u305d\u308c\u305e\u308c\u304c\u4e56\u96e2\u3057\u3066\u308b\u3053\u3068\u306b\u6c17\u3065\u3051\u306a\u3055\u305d\u3046\u3067\u3059\u306d\u3002\n\uff08\u4e21\u65b9\u30c1\u30a7\u30c3\u30af\u3059\u308b\u305f\u3081\u306b\u3001mikeda \u3055\u3093\u306e\u6848\u306e2\u3064\u304c\u51fa\u3066\u304d\u305f\u308f\u3051\u3067\u3059\u306d\u3002\uff09\n\u306a\u306e\u3067\u3001\u30c6\u30b9\u30c8\u76ee\u7684\u306e\u5834\u5408\u306f\u3001fstab \u306e\u30c1\u30a7\u30c3\u30af\u3068 mount \u306e\u30c1\u30a7\u30c3\u30af\u306f\u5225\u306b\u3059\u308b\u306e\u304c\u3084\u306f\u308a\u826f\u3044\u6c17\u304c\u3057\u3066\u304d\u307e\u3057\u305f\u3002\n. \u305d\u3046\u3067\u3059\u306d\u3001fstab \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u304c\u73fe\u5b9f\u7684\u3067\u3059\u306d\u30fc\u3002\n. \u3053\u3063\u3061\u306f\u30af\u30ed\u30fc\u30ba\u3057\u307e\u3059\u306d\u3002\n. Thanks!\n. Released as v2.7.2.\n. \u3069\u3046\u3082\u3067\u3059\uff01\n. Released as v2.8.0.\n. Thanks.\n. Released as v2.8.1.\n. Thanks !\n. Released as v2.8.2.\n. Thanks.\n. Released as v2.9.0.\n. Thanks.\n. Released as v2.9.0.\n. Thanks.\n. Released as v2.9.1.\n. OpenSSL is just one of the SSL libraries. So I don't like the name openssl_certificate and openssl_key. x509_certificate and x509_private_key would be better.\n. Thanks!\n. Released as v2.10.0.\n. > May i provide documentation for https://github.com/serverspec/serverspec.github.io as PR \nYes, please.\n. Thanks!\n. Released as v2.10.1.\n. Great! Thanks.\n. Released as v2.10.2.\n. Thanks!\n. Released as v2.11.0.\n. Thanks!\n. Released as v2.12.0.\n. Thanks!\n. Released as v2.13.0.\n. \u3044\u3044\u3067\u3059\u306d\uff01\n. Released as v2.14.0.\n. You should use https://github.com/y310/rspec-retry or else.\n. Thanks!\n. Released as v2.14.1.\n. You can test the result of docker inspect  like this. (Sorry, it's undocumented.)\nruby\ndescribe docker_container('test-001') do\n  its(['HostConfig.PortBindings.8080/tcp']) do\n    should eq [{ 'HostIp' => '', 'HostPort' => '8080'}]\n  end\nend\nPlease use this syntax. I don't like to add original matchers as much as possible.\n. I'm thinking we should use the matchers which RSpec has by default as much as possible.\nSo this sytax is prefer:\nruby\ndescribe user('foo') do\n  its(:maximum_password_change_days) == 99999\nend\nWith this syntax, we can use other operators like this:\nruby\ndescribe user('foo') do\n  its(:maximum_password_change_days) < 99999\nend\nAnd I feel that maximum_password_change_days is ambiguous a bit.\nHow about maximum_password_valid_days ?\n. > I will update serverspec to use the its syntax.\nThanks!\n\nThe question I have is: Is it really worth adding the extra abstraction with specinfra? Am I better off just running the command?\n\nIt is OK to write the OS independent command like openssl directory. If the command and options do not vary from OSes(Linux, BSD, Solaris, AIX ...), abstraction is not needed. (I'm ignoring Windows, because I don't use it. If Windows users would like to use that kind of function, they should fix the function to work on Windows by themselves.)\nSo if chage command works on every OSes supported by Serverspec/Specinfra in a similar way, it is OK to write it directory.\nOr you can write directory even though it does not work on every OSes. When the abstraction will be needed, someone who need the abstraction will fix it.  (Threre is a phrase \"Premature optimization is the root of all evil.\")  You don't need to care the OSes which you don't use.\n. Thanks for fixing. Is minimum_days_between_password_changes more correct English ? I'm not native English speaker, so I don't tell which is good password_change and password_changes.\n. I see. Thanks!\n. Released as v2.15.0.\n. > I'll issue a pull request tonight to add the documentation to the website as well\nI appreciate it very much. Thanks!\n. Other types uses be_enabled, so I think it is consistent to use be_enabled. How do you think about it ?\n. I understand that you said. You're right. So you don't need to fix it. I will merge this patch as is.\nThanks a lot!\n. Released as v2.16.0.\n. You should test file resource strictly with be_file, be_directory, be_socket and so on. exists? is a bit ambiguous. So I will not add exists? to file resource.\n. @jhoblitt Ah, I see what you would like to do with this PR. Please write your aim of the PR in the description field.\n. Thanks for updating the description! It's sufficient.\nPlease do not mind about test. I understand it.\n. Released as v2.17.0.\n. \u3069\u3046\u3082\u3067\u3059\uff01\n. Released as v2.17.1.\n. Thanks.\n. Released as v2.17.1.\n. Thanks!\n. Released as v2.18.0.\n. Released as v2.19.0.\n. Released as v2.20.0.\n. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n. Released as v2.21.0.\n. Thanks!\nI think have_audit_rule is not needed. It can be substituted like this.\nruby\ndescribe linux_audit_system do\n  its(:rules) { should include '-w /etc/audit/ -p wa' }\n  its(:rules) { should include '-w /var/lib/ -p wa' }\n  its(:rules) { should include %r!/var/lib/! }\n  its(:rules) { should_not include %r!/var/log! }\nend\nWe should use standard RSpec matchers as much as we can.\nAnd tests failed in Ruby 1.8.7. Please fix this.\nhttps://travis-ci.org/mizzy/serverspec/builds/74105963\n. LGTM!\n. Released as v2.21.0.\n. Released as v2.21.1.\n. Thanks!\n. Released as v2.22.0.\n. Thanks.\n. Released as v2.23.0.\n. Thanks!\n. Released as v2.23.1.\n. As you see in https://github.com/mizzy/specinfra/blob/master/lib/specinfra/command/base/file.rb#L58 ,\nthe command executed by contain matcher is very complicated and hard to debug. This matcher already has other bugs. I will obsolete this feature in future. (I mention it in http://serverspec.org/resource_types.html .)\nSo I will not accept any changes about this matcher. Please use its(:content) instead of contain.\n. Ah, sorry, your fix is for command resource, not file resource. I've misunderstood it.\nI will check again.\n. This should work.\nruby\ndescribe command('[command to get some http reponse headers]') do\n  its(:stdout) do\n    should match %r{\nLocation\n.*\nhttp://domain/\n.*\nConnection\n    }mx\n  end\nend\nI can't tell what your code fix. The result seems to be same as the code before fix.\nSo I close this.\n. I see. But from and to also cause the same problem by replacing / with .*. Bad design of this matcher cause this problem. So I will obsolete this matcher. Please use its(:stdout) { should match ... } . \n. Thanks.\n. Released as v2.24.0.\n. Thanks!\n. Released as v2.24.1.\n. Thanks.\n. Released as v2.24.1.\n. Thanks for reporting. But your fix breaks the tests.\nhttps://travis-ci.org/mizzy/serverspec/builds/82025860\nIn my environment, all tests pass successfully with some warnings.\nSo I close this.\nThanks.\n. Thanks!\nPlease do not mind the failure of Appveyor build. It's not related to your fix.\nIt will be fixed by #539 .\n. Released as v2.24.2.\n. Thanks!\n. Released as v2.24.2.\n. Thanks!\n. Released as v2.24.2.\n. We can access all attributes of docker inspect like this.\nruby\ndescribe docker_container('foo') do\n  its(['HostConfig.RestartPolicy.MaximumRetryCount']) { should == 0 }\nend\nI think we should use this syntax as much as possible.\nBut if you think it's hard to write or hard to read about some attributes, then think about adding matchers.\n. Thanks!\n. Released as v2.24.3.\n. You should use https://github.com/ryotarai/infrataster for that purpose.\n. Thanks for your pull request.\nBut spec_helper.rb generated by serverspec-init is just an example. You should customize your own spec_helper.rb for your purpose. Not serverspec-init.\nAnd I'd like to keep the sample spec_helper.rb simple. So I close this. Sorry.\n. Thanks!\nBut it would be better that owner_user and owner_group are owner and group\nbecause Chef and Puppet use these words.\nhttps://docs.puppetlabs.com/references/latest/type.html#file\nhttps://docs.chef.io/resource_file.html\n. Thanks!\nOne more thing, it would be useful that mode is octal, not string.\n. Ah, let me rethink about it. Thanks for reporting!\n. Sorry for letting you wait. I didn't think of any good ideas. So I'd like to merge current code.\nCould you fix this line to pass tests, please ?\nhttps://github.com/twolfson/serverspec/blob/dev/add.more.file.methods.sqwished/spec/type/base/file_spec.rb#L352\n. Thanks!\n. Released as v2.29.0.\n. Thanks!\n. Released as v2.25.0.\n. > a. Mysqld command is not in default location under PATH under centos7, \nYou should set PATH environment variable.\nSee \"PATH environment variable\" of http://serverspec.org/advanced_tips.html\n\nb. Mariadb recommonds to use mysqladmin command to search for variables\n\nThere are cases that mysqladmin needs user name and password depends on the privilege settings.\nBut mysqld --verbose --help does not need them. So easy to use.\n. Thanks! LGTM.\n. Released as v2.26.0.\n. php_config and php_ini have similar functions. It's confusing.\nI'd like to avoid it.\nHow about extending php_config like this ?\nruby\n describe php_config('session.cache_expire', :ini => '/etc/php5/fpm/php.ini') do\n    its(:value) { should eq 180 }\n  end\n. Thanks!\n. Released as v2.26.0.\n. Commits history is strange. You must rebase your branch on master. Don't merge master to your branch.\nI will not merge this if you don't clean your history.\nIf you don't know how to clean, close this pull request and open new one.\n. It seems very verbose that we must specify a configuration file.\nYou should check related config files automatically.\n. But there should be default path and file names.\n. > Do you suggest that there should be separate resource types for each file?\nNo. You should check all files internally with hadoop_config type.\n. > But, if a test fails it prints the whole xml file, is there anyway to limit that?\nNo. Serverspec shows the command, stdout and stderror when fail. Current version does not support choosing not to show them.\n. LGTM. Thanks for your contribution!\n. Released as v2.27.0.\n. Thanks!\n. Released as v2.28.0.\n. Thanks!\n\nRemoving the pipe solves the problem, but I guess the correct way for such cases should be decided for the whole project. For example to make run_command to behave like bash with 'set -o pipefail'.\n\nThanks for your advice. I'll check it.\n. Released as v2.29.1.\n. > If yes, let me know and I'll resubmit.\nYes, please. Thanks!\n. Thanks @jzohrab. I'll consider it.\nAnyway, I'll merge your PR.\nThanks a lot !\n. Released as v2.29.2.\n. Thanks!\n. Released as v2.30.0.\n. Thanks!\n. Released as v2.30.0.\n. Great! Thanks!\n. Released as v2.30.0.\n. Thanks!\n. Released as v2.30.1.\n. Thanks!\nIt would be very nice if you modify the documentation.\nhttps://github.com/serverspec/serverspec.github.io\n. Released as v2.31.0.\n. Thanks!\n. Released as v2.31.1.\n. Thanks!\n. @thedrow @sawanoboly Yes, please! Thanks!\n. Released as v2.32.0.\n. OK, thanks!\n. Released as v2.32.0.\n. Thanks! \nI like php_extension rather than php_ext .  Could you change it, please ?\n. Thanks a lot !\n. Released as v2.32.0.\n. json_file would be better. Could you please fix it ?\n. Thanks!\n. Released as v2.33.0.\n. Thanks.\n. Released as v2.33.0.\n. Thanks a lot!\n. Released as v2.34.0.\n. Thanks!\n. Released as v2.35.0.\n. Thanks!\n. Released as v2.35.0.\n. Thanks.\n. Released as v2.36.0.\n. LGTM!\n. Released as v2.36.0.\n. Thanks!\n. Released as v2.36.1.\n. So many topics in one pull request. Please include one topic in one pull request.\n. > 1. Refactored setup.rb as a first step in my wish to modify it to accept command-line params in addition to the interactive mode (menu, user input).\nRefactoring is good, but I will not add a function to accept command-line params. serverspec-init is for generating example files for beginners. If you like to customize these files, you should edit these files directly.\n. Sorry for merging late, thanks!\n. Released as v2.36.1.\n. You should do this in your Gemfile.\n. Serverspec does not depend on 2.59.6 strictly. It works with specinfra >= 2.53.\nSo it is not proper to fix gemspec of serverspec.\nIf you'd like to use latest version of specinfra, you write it in your Gemfile.\nUsers should be free to choose the version of specinfra, even if the version has bugs.\nAnd the bug about homebrew_cask does not affect users who do not use MacOS.\n. > The ~> notation confuses me sometimes\nMe too.\n\nsorry bout the confusion there\n\nNo problem \ud83d\ude03  Thanks for reporting.\n. Thanks.\n. Released as v2.36.1.\n. I think I don't need test for setup.rb. This is only one file and not so complicated to test it. Increasing code is increasing the cost to maintain. I will not add functions to setup.rb anymore as mentioned in #572. So don't need test and refactoring.\n. I will not add functions to serverspec-init, so I will not accept that kind of pull request.\n. Sorry, I missed this pull request. Thanks!\n. Released as v2.37.0.\n. Thanks. You don't need to fix the failing tests.\n. Released as v2.36.1.\n. Thanks!\n. Released as v2.37.0.\n. Thanks!\n. Released as v2.37.1.\n. Oh, easy mistake ... Good catch! Thanks!\n. Released as v2.37.2.\n. Thanks!\n. Released as v2.37.2.\n. \u3069\u3046\u3082\u3067\u3059\uff01. Released as v2.38.0.. You can get all cron table entries and use rexexp like this:\nruby\ndescribe cron do\n  its(:table) { should match  /you can use regexp/ }\nend\nSorry, I forget to document it.\n. >  I'll be happy to send a PR to update the docs.\nThanks! The repo is https://github.com/serverspec/serverspec.github.io .\n. Patches are welcome.. stdout_as_json is OK. I'll merge this.\nI will not support curl resource. Because it can access any http hosts other than test target host. It's too much free.. Released as v2.38.0.. Write description.\ncommand resource is sufficient for the purpose of testing environment variables.. LGTM. Released as v2.38.1.. Thanks.. Released as v2.39.0.. Released as v2.39.1.. SSM would be interesting. I will accept if you will create SSM backend.\nYou can extend serverspec without module structure like this.\nhttps://github.com/jantman/serverspec-extended-types\nSo I will not make serverspec support module structure for now.. Thanks.. Released as v2.39.2.. LGTM. Thanks!. Released as v2.40.0.. LGTM.. Released as v2.41.0.. Thanks.. Released as v2.41.1.. Thanks!. Released as v2.41.2.. Released as v2.41.3.. Thanks!. Thanks for your contribution.\n1st, the title of this pr is 'Adds features to docker containers', but this includes the feature about service resource. Please separate it into another pull request.\n2nd, I prefer\nruby\nits(:uptime) { should be > 4 }\nthan\nruby\nit { should have_uptime_greater_than 4 }\n3rd, It's not good to have systemd specific feature in service resource.\n. Thanks for your PR. But this error does not occur in my environment(Ubuntu 16.04).\nAnd this PR breaks backward compatibility. So I will not accept this PR.. Could you tell me how to reproduce this error, please? I will investigate it.. Do you test nested lxc containers (containers in cotainers) ?\nIf not, you should set backend to :exec .. It seems that you don't understand how serverspec backends works and confuse lxc type and lxc backend.\nLxc type is for checking containers exsiting and running from outside of containers.\nLxc backend is for running tests inside containers.\nSo it's nonsense to use both lxc type and lxc backend at the same time.\nFor example, this code checks that \"container name\" exists inside \"container name\".\n```\nset :backend, :lxc\nset :lxc, \"container name\"\ndescribe lxc(\"cotainer name\") do\n  it { should exist }\nend\n```. I thought you ran tests something like this because you wrote \"it { should exist }\" in your first description.\n```\nset :backend, :lxc\nset :lxc, \"container name\"\ndescribe lxc(\"cotainer name\") do\n  it { should exist }\nend\n```\nBut I confirmed that lxc backend fails by error you wrote when testing other than lxc type.\nSorry, I misunderstood what you said.\nI will investigate this problem further more.\n. I've fixed specinfra to solve this problem and released as 2.73.3. \nhttps://github.com/mizzy/specinfra/pull/656\nPlease try with specinfra v2.73.3.\nThanks for your reporting and sorry for my misunderstanding what you mean.. Thanks!. belong_to_primary_group and belong_to_group matchers are for users, not groups.\n. It seems grep is better than pgrep, as @darron said.\n. How about this ?\nruby\ndef check_authorized_key user, key\n  \"grep -w '#{key}' ~#{user}/.ssh/authorized_keys\"\nend\n. And, root@serverspec.local is a comment, so ssh-rsa ABCDE...XYZ root@serverspec.local and ssh-rsa ABCDE...XYZ foo@bar.local are identical.\nI think you should check the key without a comment like this.\nruby\ndef check_authorized_key user, key\n  key.sub!(/\\s+\\S+$/, '') if key.match(/^\\S+\\s+\\S+\\s+\\S+$/)\n  \"grep -w '#{key}' ~#{user}/.ssh/authorized_keys\"\nend\n. You don't need before and after hooks.Because specs for serverspec don't run command actually.\nSee: https://github.com/mizzy/serverspec/blob/master/spec/spec_helper.rb\n. ruby\n    ret = backend.run_command(backend.commands.check_file_md5checksum(file, pattern))\n    ret[:exit_status] == 0\nThis should be like this:\nruby\n    backend.check_file_md5checksum(example, file, pattern)\nHere, method_missing is called because check_file_md5checksum is not implemented in Backend::Exec.\nhttps://github.com/mizzy/serverspec/blob/master/lib/serverspec/backend/exec.rb#L32\nAnd method_missing runs commands.check_file_md5checksum(file, pattern) and check its exit status.\n. If this method is not defined, method_missing do the same thing.So you can omit this method.\n. I like the order \"example, file, @by_user, 'x'\" because 3 options from first are same as check_executable.\n. If  /etc/selinux/config content is like below, grep -i -- enforcing will return 0.\n```\nThis file controls the state of SELinux on the system.\nSELINUX= can take one of these three values:\nenforcing - SELinux security policy is enforced.\npermissive - SELinux prints warnings instead of enforcing.\ndisabled - SELinux is fully disabled.\nSELINUX=disabled\nSELINUXTYPE= type of policy in use. Possible values are:\ntargeted - Only targeted network daemons are protected.\nstrict - Full SELinux protection.\nSELINUXTYPE=targeted\n```\nSo grep -i -- SELINUX=#{escape(mode)} would be better.\n. NotImplementedError class is defined in Base class, so this is not needed.\n(Linux class and Darwin class also have this class, but they are wrong.So I will fix them.)\n. I've fixed all of the methods to use parentheses according to Ruby Styleguide just now.\nSo please add parentheses.\n. Add parentheses, please.\n. Add parentheses, please.\n. yum repolist -C is better.Because without -C option, yum command tries to download metadata and it may take long time.\n. yum repolist -C is better.\n. spec//port_spec.rb \u306e\u65b9\u3067\u30b3\u30de\u30f3\u30c9\u306e\u30c1\u30a7\u30c3\u30af\u3082\u3084\u3063\u3066\u308b\u306e\u3067\u3001\u3053\u3063\u3061\u306f\u8ffd\u52a0\u3057\u306a\u304f\u3066\u3044\u3044\u3088\u3002\n\u3053\u306e commands_spec.rb \u81ea\u4f53\u5b8c\u5168\u306b\u306a\u304f\u3059\u4e88\u5b9a\u3067\u3059\u3002\n. \u3053\u306e\u8ffd\u52a0\u3082\u4e0d\u8981\u3067\u3059\u3002\n. \u3053\u308c\u3082\u4e0d\u8981\u3002\n. \u3053\u308c\u3082\u4e0d\u8981\u3002\n. \u3053\u308c\u3082\u4e0d\u8981\u3002\n. This shows only php_config and does not show the parameter name when a test fails.\nSo you should not define this to_s method.\nIf you don't define this method here, the method defined in base class will be called.\nhttps://github.com/serverspec/serverspec/blob/master/lib/serverspec/type/base.rb#L8\n. \u8a72\u5f53\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u306a\u3051\u308c\u3070\u3001exit status 1 \u3092\u8fd4\u3059\u307f\u305f\u3044\u3060\u304b\u3089\u3001exit status \u898b\u308b\u3060\u3051\u3067\u5341\u5206\u3060\u3068\u601d\u3046\u3093\u3060\u3051\u3069\u3001stdout \u3082\u898b\u3066\u308b\u306e\u306f\u4f55\u304b\u7406\u7531\u304c\u3042\u308b\u306e\u304b\u306a\uff1f\n. should_not \u306e\u5834\u5408\u306f its(:command) \u306e\u30c6\u30b9\u30c8\u306f\u306a\u304f\u3066\u3082\u3044\u3044\u3088\u3002should \u306e\u5834\u5408\u3068\u540c\u3058\u3060\u304b\u3089\u3002\uff08\u3042\u3063\u3066\u3082\u5bb3\u306f\u306a\u3044\u3051\u3069\u3002\uff09\n. \u3042\u308c\u3001unmonitored \u3060\u3068 1 \u3092\u8fd4\u3055\u306a\u3044\uff1f\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3082\u3088\u308b\uff1f\u4ffa\u304c\u8a66\u3057\u305f0.13.2\u3067\u306f1\u3092\u8fd4\u3059\u3057\u3001master \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u3082\u305d\u3046\u306a\u3063\u3066\u308b\u3088\u3046\u306b\u8aad\u3081\u308b\u3051\u3069\u3002\nhttps://github.com/mojombo/god/blob/master/lib/god/cli/command.rb#L96\n. > type/service.rb\u306ebackend.respond_to?(:check_monitored_by_god)\u304cfalse\u3092\u8fd4\u3057\u3066\u3057\u307e\u3044\u3001\u4f8b\u5916\u304c\u9001\u51fa\u3055\u308c\u308b\n\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u306e\u305b\u3044\u3067 backend/exec.rb \u306b\u660e\u793a\u7684\u306b\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3001\u3068\u3044\u3046\u306e\u3082\u5fae\u5999\u306a\u306e\u3067\u3001backend.respond_to? \u306b\u3088\u308b\u30c1\u30a7\u30c3\u30af\u306f\u5916\u3057\u3066\u3082\u3044\u3044\u304b\u3082\u306d\u3002\n\u305d\u306e\u5834\u5408\u306f\u3001\nundefined method `check_monitored_under_hoge' for #<Serverspec::Commands::RedHat:0x007f801c501290>\n\u307f\u305f\u3044\u306a\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3051\u3069\u3001\u3053\u308c\u3067\u3082\u5341\u5206\u308f\u304b\u308b\u3057\u3002\n. \u4ed6\u306e check_running_under_xxxx \u3068\u304b\u3068\u4e00\u8cab\u6027\u306a\u3044\u3058\u3083\u3093\u3001\u3063\u3066\u30c4\u30c3\u30b3\u30df\u3042\u308b\u3068\u601d\u3046\u3051\u3069\u3001\u57fa\u672c\u7684\u306b\u306f\u3001\u3053\u3053\u3067\u66f8\u3044\u305f\u65b9\u91dd\u306b\u63c3\u3048\u3066\u3044\u3053\u3046\u3068\u601d\u3063\u3066\u308b\u3002\n. \u8a66\u3057\u306b supervisor \u3092\u3053\u3093\u306a\u611f\u3058\u306b\u5909\u3048\u3066\u307f\u305f\u3002\nhttps://github.com/serverspec/serverspec/pull/210\n\u3053\u3093\u306a\u98a8\u306b\u3001backend.respond_to?\u3092commands.respond_to?\u306b\u5909\u3048\u308b\u3068\u3001\u4f8b\u5916\u3092\u6295\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306d\u3002\n. For what purpose do you define this?\n. What rspec version do you use? \nI ran a test with rspec v2.14.7 and saw the html report, but I could not see the difference between with to_ary and without to_ary.\nI'd like to check the behavior.Please tell me the rspec version you use.\n\nSo, maybe this could be moved in the base class instead.\n\nI think so, too.\n. Thanks. --format json causes the error without to_ary. I got it.\nI will move it to the base class after merging this pull request.\n. No problem.Thanks for considering it.\n. This space is needed for readability.\n. I did not think anything. Just copied your code :-)\n. Thanks. I will think about it.\n. This should be a public method.\n. Please remove this line.\n. In my environment (the version of auditctl is v2.2), auditctl -s returns AUDIT_STATUS: enabled=1 flag=1 pid=881 rate_limit=0 backlog_limit=320 lost=0 backlog=0 . So grep \"^enabled\" does not match even if audit system is enabled.\n. This line is not needed bacuse private was called already.\n. ruby\ndoc = ::Nokogiri::XML(@runner.get_file_content('/etc/hadoop/conf/hdfs-site.xml'))\n. Nokogori is too heavy to install for the users which do not need use this type.\nSo please change like this.\nruby\nbegin\n  require 'nokogiri'\nrescue LoadError\n  fail \"nokogiri is not available. Try installing it.\"\nend\n. It would be better hdfs_config instead of hdfs.\n. Please put these lines in HdfsConfig class like this.\n``` ruby\nmodule Serverspec::Type\n  class HdfsConfig < Base\n    def initialize(name=nill)\n      super\n  begin\n    require 'nokogiri'\n  rescue LoadError\n    fail \"nokogiri is not available. Try installing it.\"\n  end\nend\n\n``\n. Could you changeinitializemethod ofServerspec::Type::Base`, please ?\noptions would be useful for other types.\n. How about this like #548 ?\nruby\ndescribe hdfs_config('dfs.nameservices', :file => '/path/to/file') do\n    its(:value) { should eq \"test1\" }\n  end\nYou should rebase your branch on latest master to implement this.\n. You can't use Dir.glob() because this works only locally.\n. This line is not needed. Just write when /#{@name}/ after case line.\n. This test does not work as you intend. Please remove this file.\n. If you intend to reduce regular expression compile time, it's OK. But regx is not common. regex is common.\n. Method signature of initialize of Serverspec::Type::Base had changed recently.\nhttps://github.com/mizzy/serverspec/commit/e34b78e9250a1f52eeb01b0954eeb71d3a14bbf6\nSo please change this line like below.\nruby\ndef initialize(name=nil, options={})\n. Thanks for your PR. Could you change match do |name| to match do |subject| instead of this line , please?\n. And please rewrite other name to subject.\n. Thanks a lot!. ",
    "ttakamura": "Thank you for merge and adjust my code!\n\nI should introduce mock or stub in specs.\n\nI think so too. we should use mock or stub to run specs on some environment like CI server.\n. ",
    "studio3104": "Thank you for the confirmation.\nPlease check back because the fixed.\n. As of your advice, I added specs to the Solaris Debian, and Gentoo.\nPlease check again!!\n. I am sorry...\nFixed, please check again.\n. Sorry.. sorry.. sorry...\nI fixed, please check agein...\n. Thank you for advice.\nI stopped to use netstat command, use ip command.\nAnd then, I chose the format that is independent from the command of either.\nexample for test of routing table.\nruby\ndescribe '33.33.33.0' do\n  it { should be_routed }\n  it do\n    should be_routed.with(\n      :interface => 'eth1',\n      :gateway => 'default',\n      :netmask => '24'\n    )\n  end\nend\nexample for test of default gateway's ip address.\nruby\ndescribe 'default' do\n  it { should be_routed }\n  it do\n    should be_routed.with(\n      :interface => 'eth0',\n      :gateway => '10.0.2.2',\n    )\n  end\nend\nThank you confirmation.\n. By the way, about the name of the matcher.\nI came up with only these...\n- be_routable\n- have_routing\nHow do you think??\n. cool!!\nI will try to fix as you said!!!!\n. Just leave have_entry, I feel that there are too versatile to...\n'iptables' is used twice in example of have_iptables_rule, is it fine?\n. I see!\nIt is a great idea! !\nI understand and accept, and implement that way.\n. I tried to implement as your advice.\nconfirmation please.\nspecs example\n``` ruby\ndescribe 'routing table' do\n  it do\n    should have_entry(\n      :destination => '33.33.33.0',\n      :interface => 'eth1',\n      :gateway => 'default',\n    )\n  end\nit do\n    should have_entry(\n      :destination => 'default',\n      :interface => 'eth0',\n      :gateway => '10.0.2.2',\n    )\n  end\nend\n```\n. Sorry, I fixed.\nPlease confirmation again.\n. Sure. You're right. I agree.\nI will try to reimplement.\n. I reimplement as your advice.\nruby\ndescribe 'routing table' do\n  it do\n    should have_entry(\n      :destination => '192.168.100.0/24',\n      :interface   => 'eth1',\n      :gateway     => '192.168.10.1',\n    )\n  end\nend\nAnd I also added a matcher for the default gateway.\nWriting both are possible, but I think the latter is more suitable.\nruby\ndescribe 'routing table' do\n  it do\n    should have_entry(\n      :destination => 'default',\n      :interface   => 'eth0',\n      :gateway     => '192.168.10.1',\n    )\n  end\nend\nor\nruby\ndescribe '192.168.10.1' do\n  it { should be_default_gw }\n  it { should be_default_gw.with_interface('eth0') }\nend\nPlease confirmation again.\n. with_interface is OK??\n. I fixed, please confirmation again.\n. Fixed. How about?\n. I am glad to merged!!\nThank you so much!!!!\n. ",
    "tomohiro": "I've opened new pull request #23 \n. \u30af\u30ed\u30fc\u30ba\u3059\u308b Issue \u9593\u9055\u3048\u307e\u3057\u305f\n. Thank you for merge and  your advice!\n. ",
    "darron": "Perfect - thanks! Works great now!\n```\n[master] darron@~/Desktop/solr: rake spec\n/Users/darron/.rbenv/versions/1.9.3-p392/bin/ruby -S rspec spec/solr-berkshelf/jetty_spec.rb\n.....\nFinished in 0.16861 seconds\n5 examples, 0 failures\n```\n. There is a problem - it matches the grep process now and so doesn't notice if the process dies.\nWorking on a fix.\n. I wasn't sure pgrep was always available on all your supported platforms.\nIs it?\nOn Wed, Apr 3, 2013 at 4:16 PM, Rapha\u00ebl Pinson notifications@github.comwrote:\n\nIn lib/serverspec/commands/base.rb:\n\n@@ -36,7 +36,7 @@ def check_running service\n       end\ndef check_process process\n-        \"ps aux | grep -qw #{process}\"\n-        \"ps aux | grep -w #{process} | grep -qv grep\"\n\nAnother way of achieving this is to replace the first letter of processby adding\n[] around it, doing grep -qw \"[a]bc\" instead of grep -qw \"abc\".\nActually, wouldn't it be better to use pgrep here?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mizzy/serverspec/pull/33/files#r3646338\n.\n. Actually I don't think pgrep will work for this reliably - here's what I\nget:\n\nroot@solr-berkshelf:~# pgrep jetty\nroot@solr-berkshelf:~# echo $?\n1\nroot@solr-berkshelf:~# ps aux | grep -w jetty | grep -qv grep\nroot@solr-berkshelf:~# echo $?\n0\nroot@solr-berkshelf:~# ps aux | grep -w jetty | grep -v grep\njetty    12169  0.4 23.3 1543184 87252 ?       Sl   Apr03   1:12 /usr/bin/java -Dsolr.solr.home=/opt/solr -Djetty.port=8085 -Djetty.home=/opt/jetty -Djava.io.tmpdir=/tmp -jar /opt/jetty/start.jar --pre=etc/jetty-logging.xml --daemon\nDoing it this way is one way to check and see if a process is there - that's not a usual process - pgrep works great with things like ssh:\nroot@solr-berkshelf:~# pgrep sshd\n1211\n11206\n11226\nBut it doesn't find my jetty process - because it's run under java. It does find java:\nvagrant@solr-berkshelf:~$ pgrep java\n12169\nI suppose we could use grep with [j]etty - that would work too.\n. ",
    "gongo": "I think 'after' and 'before'  is good If use separate is the main pattern.\nIf use at same time is the main pattern, 'from' and 'to'\n``` ruby\n  it { should contain('hoge').from(/A/).to(/B/) }\nit { should contain('hoge').after(/A/) }\n  it { should contain('hoge').before(/B/) }\n```\nI think use at the same time will be the main pattern. (e.g. httpd.conf <VirtualHost *:80> .. </Virtualhost> )\n. thanks!\n\nAll patterns are not exclusive, so I will add 'after' and 'before' after merging your code.\n\nyoroshiku onegaishimasu.\n. ",
    "raphink": "OK. I can do without the PR 38 as I could provide the backend myself, but I need PR 36 in order to able to plug a backend that does not use commands. The only abstraction it adds is making backends into classes so that you're not limited to launching commands for tests. If this can't be merged, I'll have to resort to forking the code base, cause there's no way I can use the Puppet backend cleanly otherwise.\n. Hmmm no, PR 36 still uses both commands check_running and check_process:\nhttps://github.com/raphink/serverspec/commit/739ff34b9ca18178af281468e3a39fcd48b2e40e#L2R74\nThe difference is that it calls backend.check_running, and in the case of the Exec/Ssh backends, the implementation happens to call both commands.check_running and commands.check_process. Calling both commands is an implementation matter, not a backend one, which is why the matcher only calls backend.check_running. Some backends (the Puppet one for example) don't need to call check_process in their implementation.\nNote that all specs passed with both PR 36 and 38, so if compatibility was broken, it would probably be missing specs.\n. About complexity, as surprising as it might seem, the goal of these PRs is precisely to make things more simple: matchers only call backend.check_something, making the code as simple as can be, since all the implementation complexity is moved to the backend classes.\n. Thank you very much @mizzy :-)\nIf you find any issues, please let me know and I'll do my best to help with them.\n. Thanks. Sorry if I've been a bit too pushy.\n. Great!\n. Another way of achieving this is to replace the first letter of process by adding [] around it, doing grep -qw \"[a]bc\" instead of grep -qw \"abc\".\nActually, wouldn't it be better to use pgrep here?\n. http://www.math.utah.edu/~beebe/unix/p/pgrep.html shows the support for it. Maybe it could be used when available, although that's not easy since all commands are launched through SSH.\n. ",
    "ftnk": "Thank you for merge and fix.\nIt works fine on Solaris.\nbut I found be_zfs.with is not strict. \"be_zfs.with({'compression' =>\n'on'})\" never fail, because 'on' matches\n'compression'.\n% zfs get -H compression rpool |grep on\nrpool   compression     off     default\nI'll fix it later.\n2013/4/8 Gosuke Miyashita notifications@github.com\n\nI've merged and fixed some points.\n- Fixed to adapt to specification changes of #36https://github.com/mizzy/serverspec/issues/36\n- Fixed some specs\n- be_zfs(value).property(property) is unnatural, so fixed it to\n  be_zfs.with({ property => value })\nI confirmed that all specs are passed, but did not confirmed on Solaris.\nSo please check them on Solaris.\nIf there will be no problem, I will released as v0.2.2.\nThanks.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mizzy/serverspec/pull/40#issuecomment-16030134\n.\n. Supporting multiple property is good idea and\nit works.\n\nBut with multi property,  Failure/Error output does not make sense.\nFailures:\n1) rpool\n     Failure/Error: })\n       expected \"rpool\" to be zfs\n     # ./spec/localhost/zfs.rb:10:in `block (2 levels) in '\nwith this output., I  can't find out which property is wrong.\n2013/4/8 Gosuke Miyashita notifications@github.com:\n\nI've fixed the edge case mentioned in #40 .\nAnd also I've added a feature that be_zfs.with takes multple properties like\nthis.\nit do\n  should be_zfs.with({\n    'mountpoint'  => '/rpool',\n    'compression' => 'off',\n  })\nend\n@ftnk , I appreciate if you check them.\n\nYou can merge this Pull Request by running\ngit pull https://github.com/mizzy/serverspec\nmultiple_properties_with_be_zfs_matcher\nOr view, comment on, or merge it at:\nhttps://github.com/mizzy/serverspec/pull/41\nCommit Summary\nSupport multiple properties with be_zfs matcher and fix edge case\nFile Changes\nM lib/serverspec/commands/solaris.rb (7)\nM spec/solaris/commads_spec.rb (15)\nPatch Links:\nhttps://github.com/mizzy/serverspec/pull/41.patch\nhttps://github.com/mizzy/serverspec/pull/41.diff\n. About edge case mentioned in #40\n\nI'm sorry for writing wrong output of \"zfs get -H compression rpool\".\nCorrectly, output is tab separated.\nAnd \"/sbin/zfs list -H -o #{key} #{zfs}\" returns value only.\n% zfs list -H -o compression rpool\noff\nI think \"/sbin/zfs list -H -o #{key} #{zfs} | grep ^#{value}$\" is\nbetter than \"/sbin/zfs get -H #{key} #{zfs} | grep ' #{value} '\".\n2013/4/8 Gosuke Miyashita notifications@github.com:\n\nI've fixed the edge case mentioned in #40 .\nAnd also I've added a feature that be_zfs.with takes multple properties like\nthis.\nit do\n  should be_zfs.with({\n    'mountpoint'  => '/rpool',\n    'compression' => 'off',\n  })\nend\n@ftnk , I appreciate if you check them.\n\nYou can merge this Pull Request by running\ngit pull https://github.com/mizzy/serverspec\nmultiple_properties_with_be_zfs_matcher\nOr view, comment on, or merge it at:\nhttps://github.com/mizzy/serverspec/pull/41\nCommit Summary\nSupport multiple properties with be_zfs matcher and fix edge case\nFile Changes\nM lib/serverspec/commands/solaris.rb (7)\nM spec/solaris/commads_spec.rb (15)\nPatch Links:\nhttps://github.com/mizzy/serverspec/pull/41.patch\nhttps://github.com/mizzy/serverspec/pull/41.diff\n. ./spec/localost/zfs.rb\n\n```\nrequire 'spec_helper'\ndescribe 'rpool' do\n  it { should be_zfs }\nit do\n    should be_zfs.with({\n      'mountpoint'  => '/rpool',\n      'compression' => 'on',\n    })\n  end\nend\n```\nAnd real values are as below\n% zfs list -H -o mountpoint rpool\n/rpool\n% zfs list -H -o compression rpool\noff\ntest ./spec/localost/zfs.rb\n```\n% ruby19 -S rspec ./spec/localhost/zfs.rb\n.F\nFailures:\n1) rpool\n     Failure/Error: })\n       expected \"rpool\" to be zfs\n     # ./spec/localhost/zfs.rb:10:in `block (2 levels) in <top\n```\n(required)>'\n```\nFinished in 0.04138 seconds\n2 examples, 1 failure\nFailed examples:\nrspec ./spec/localhost/zfs.rb:6 # rpool\n```\n. Thanks. It works fine!\n2013/4/9 Gosuke Miyashita notifications@github.com\n\nI've fixed the command for exact match.Please check it.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mizzy/serverspec/pull/41#issuecomment-16086442\n.\n. Both of them work.\n\nProblem about multiple properties is result output.\ntest below\nit { should be_zfs.with({ 'compression' => 'on' }) }\nreturn like below\n1) rpool\n     Failure/Error: it { should be_zfs.with({ 'compression' => 'on' }) }\nI can find out value of 'compression' is wrong.\ntest multiple properies\nit do\n    should be_zfs.with({\n      'mountpoint'  => '/rpool',\n      'compression' => 'on',\n    })\n  end\nreturn like below.\n1) rpool\n     Failure/Error: })\n       expected \"rpool\" to be zfs\nWith this output, I can't find out which value is wrong, mountpoint?\ncompression?\nAnd I need to check each value.\nSingle property is better for me.\n2013/4/9 Gosuke Miyashita notifications@github.com\n\nDo multiple properties work fine? Or Only does command fixing work?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mizzy/serverspec/pull/41#issuecomment-16086843\n.\n. It's better!\n\nI'll fix it.\n2013/4/11 Gosuke Miyashita notifications@github.com\n\n\"be_svcprop\" seems unnatural as English.\nHow about this?\ndescribe 'svc:/network/http:apache22' do\n  # Single property\n  it { should have_svcprop('httpd/enable_64bit').with_value('false') }\n# Multiple properties\n  it do\n    should have_svcprops(\n      'httpd/enable_64bit' => 'false',\n      'httpd/server_type'  => 'worker',\n    )\n  endend\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mizzy/serverspec/pull/53#issuecomment-16232781\n.\n. Thank you for merge.\n\n2013/4/11 Gosuke Miyashita notifications@github.com\n\nGood work! Thanks.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mizzy/serverspec/pull/55#issuecomment-16236069\n.\n. Thanks. not too late, I woke up too early.\n\n2013/5/1 Gosuke Miyashita notifications@github.com\n\nThanks.You wake up too late [image: :smiley:]\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mizzy/serverspec/pull/73#issuecomment-17249835\n.\n. Solaris \u306e\u30b3\u30de\u30f3\u30c9\u3092\u7528\u610f\u3057\u3066\u3082\u3089\u3048\u305f\u306e\u306f\u3046\u308c\u3057\u3044\u306e\u3067\u3059\u304c\u3001\n\u6b8b\u5ff5\u306a\u304c\u3089\u3001\u7528\u610f\u3057\u3066\u3044\u305f\u3060\u3044\u305f\u30b3\u30de\u30f3\u30c9\u3067\u306f\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\nregexp = \".*\\.#{port} \"\n    \"netstat -an -P #{protocol} 2> /dev/null | egrep 'LISTEN|Idle' | grep -- #{escape(regexp)}\"\nSolaris \u7528\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5fc5\u8981\u3060\u3051\u3069\u30b3\u30de\u30f3\u30c9\u306e\u78ba\u8a8d\u304c\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001\nraise NotImplementedError.new \u3057\u3066\u3082\u3089\u3048\u308b\u3068\u3001\nSolaris \u7528\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5fc5\u8981\u3060\u3068\u308f\u304b\u308b\u306e\u3067\u52a9\u304b\u308a\u307e\u3059\u3002\n. ",
    "kentaro": "After discussion with mizzy, I'll try such a form as be_running.under('supervisor').\n. ",
    "kenjiskywalker": "``` ruby\ndescribe 'Enforcing' do\n  it { should be_selinux }\nend\ndescribe 'Permissive' do\n  it { should_not be_selinux }\nend\ndescribe 'Disabled' do\n  it { should_not be_selinux }\nend\n```\n\u30b3\u30e1\u30f3\u30c8\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\u72b6\u614b\u3092\u6e21\u3057\u3066\u305d\u306e\u72b6\u614b\u306b\u5bfe\u3057\u3066\u6b63\u3057\u3044\u304b\u3069\u3046\u304b\u3068\u3044\u3046\u30c1\u30a7\u30c3\u30af\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3054\u6307\u6458\u9802\u3044\u305f\u5185\u5bb9\u3068\u30ba\u30ec\u3066\u3044\u305f\u3089\u7533\u3057\u8a33\u306a\u3044\u3067\u3059\u3002\n\u3082\u3057\u30ba\u30ec\u3066\u3044\u305f\u3089\u3053\u3053\u304c\u3082\u3046\u3061\u3087\u3063\u3068\u3053\u3046\u306a\u3093\u3060\u3088\uff01\u3063\u3068\u3044\u3046\u306e\u3092\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u307e\u305b\uff01\n\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\uff01\n. \u30d6\u30e9\u30f3\u30c1\u306e\u540d\u524d\u3001be_selinux_add\u304c\u6b63\u3057\u3044\u3067\u3059\u306d\u3002\n\u554f\u984c\u306a\u3055\u305d\u3046\u3060\u3063\u305f\u3089\u4e00\u65e6\u30af\u30ed\u30fc\u30ba\u3057\u3066\u30d6\u30e9\u30f3\u30c1\u5207\u308a\u76f4\u3057\u3066pullreq\u9001\u308a\u306a\u304a\u3057\u307e\u3059\u3002\n. be_selinux\u306f\u306a\u3057\u3067\u3001be_enforcing\u306e\u65b9\u5411\u306b\u623b\u3057\u3066 \nbe_permissive,be_disabled\u3092\u8ffd\u52a0\u3059\u308b\u3068\u3044\u3046\u5bfe\u5fdc\u306b\u3057\u3088\u3046\u304b\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\u3067\u3001\u5927\u4e08\u592b\u3067\u3059\u304b\u306d\u3002(\u30d6\u30e9\u30f3\u30c1\u540d\u306fsupport-selinux-matchers\u3068\u3057\u3066)\n. \u30aa\u30b9\uff01\u3067\u306f\u4e00\u65e6close\u3057\u3066\u6539\u3081\u3066pullreq\u9001\u308a\u307e\u3059\uff01\n\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\u66f8\u304d\u63db\u3048\u3066\u307f\u307e\u3057\u305f\uff01  \n\u4e0b\u8a18\u306e\u901a\u308aRedHat\u3068Solaris\u306e\u30c6\u30b9\u30c8\u3092\u540c\u6642\u306b\u8d70\u3089\u305b\u308b\u3068\u5931\u6557\u3057\u307e\u3059\u3002\nhttps://github.com/mizzy/serverspec/pull/52/files\n\u3053\u3061\u3089\u306epullreq\u3092\u53c2\u8003\u306b\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u5b9f\u88c5\u65b9\u6cd5\u306b\u554f\u984c\u3042\u308a\u307e\u3059\u3067\u3057\u3087\u3046\u304b\uff01\n\u30c6\u30b9\u30c8\u7d50\u679c\nRedHat\u306e\u307f[\u6210\u529f]\n```\n% rspec ./spec/redhat/commands_spec.rb ./spec/redhat/matchers_spec.rb                                                                                                                        [support-selinux-matchers ~/dev/serverspec]..................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n........................................\nFinished in 0.13444 seconds\n123 examples, 0 failures\n```\nSolaris\u306e\u307f[\u6210\u529f]\n```\n% rspec ./spec/solaris/commands_spec.rb ./spec/solaris/matchers_spec.rb                                                                                                                      [support-selinux-matchers ~/dev/serverspec]................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.................................................\nFinished in 0.14562 seconds\n```\nRedHat\u4ee5\u5916[\u6210\u529f]\n```\n% rspec ./spec/debian/commands_spec.rb ./spec/debian/matchers_spec.rb ./spec/gentoo/commands_spec.rb ./spec/gentoo/matchers_spec.rb ./spec/solaris/commands_spec.rb ./spec/solaris/matchers_spec.rb                               ............................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n...................................................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.....................................................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.................................................\nFinished in 0.4381 seconds\n360 examples, 0 failures\n```\nSolaris\u4ee5\u5916[\u6210\u529f]\n```\nrspec ./spec/debian/commands_spec.rb ./spec/debian/matchers_spec.rb ./spec/gentoo/commands_spec.rb ./spec/gentoo/matchers_spec.rb ./spec/redhat/commands_spec.rb ./spec/redhat/matchers_spec.rb                                 ............................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n...................................................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.......................................................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n........................................\nFinished in 0.4149 seconds\n353 examples, 0 failures\n```\nDebian\u3068Gentoo[\u6210\u529f]\n```\n% rspec ./spec/debian/commands_spec.rb ./spec/debian/matchers_spec.rb ./spec/gentoo/commands_spec.rb ./spec/gentoo/matchers_spec.rb                                                          [support-selinux-matchers ~/dev/serverspec]............................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n...................................................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.....................................\nFinished in 0.27616 seconds\n230 examples, 0 failures\n```\nRedHat\u3068Solaris[\u5931\u6557]\n```\n% rspec  ./spec/redhat/commands_spec.rb ./spec/redhat/matchers_spec.rb ./spec/solaris/commands_spec.rb ./spec/solaris/matchers_spec.rb                                                       [support-selinux-matchers ~/dev/serverspec]\n..................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.........................FFF............................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.******\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.................................................\nFailures:\n1) Serverspec matchers of Red Hat family behaves like support be_enforcing matcher selinux Enforcing\n     Failure/Error: it { should be_enforcing }\n     Serverspec::Commands::Base::NotImplementedError:\n       Serverspec::Commands::Base::NotImplementedError\n     Shared Example Group: \"support be_enforcing matcher\" called from ./spec/redhat/matchers_spec.rb:57\n     # ./lib/serverspec/commands/base.rb:121:in check_selinux'\n     # ./lib/serverspec/backend/exec.rb:29:incheck_zero'\n     # ./lib/serverspec/backend/exec.rb:37:in method_missing'\n     # ./lib/serverspec/matchers/be_enforcing.rb:3:inblock (2 levels) in '\n     # ./spec/support/shared_matcher_examples.rb:231:in `block (3 levels) in '\n2) Serverspec matchers of Red Hat family behaves like support be_permissive matcher selinux Permissive\n     Failure/Error: it { should be_permissive }\n     Serverspec::Commands::Base::NotImplementedError:\n       Serverspec::Commands::Base::NotImplementedError\n     Shared Example Group: \"support be_permissive matcher\" called from ./spec/redhat/matchers_spec.rb:58\n     # ./lib/serverspec/commands/base.rb:121:in check_selinux'\n     # ./lib/serverspec/backend/exec.rb:29:incheck_zero'\n     # ./lib/serverspec/backend/exec.rb:37:in method_missing'\n     # ./lib/serverspec/matchers/be_permissive.rb:3:inblock (2 levels) in '\n     # ./spec/support/shared_matcher_examples.rb:237:in `block (3 levels) in '\n3) Serverspec matchers of Red Hat family behaves like support be_disabled matcher selinux Disabled\n     Failure/Error: it { should be_disabled }\n     Serverspec::Commands::Base::NotImplementedError:\n       Serverspec::Commands::Base::NotImplementedError\n     Shared Example Group: \"support be_disabled matcher\" called from ./spec/redhat/matchers_spec.rb:59\n     # ./lib/serverspec/commands/base.rb:121:in check_selinux'\n     # ./lib/serverspec/backend/exec.rb:29:incheck_zero'\n     # ./lib/serverspec/backend/exec.rb:37:in method_missing'\n     # ./lib/serverspec/matchers/be_disabled.rb:3:inblock (2 levels) in '\n     # ./spec/support/shared_matcher_examples.rb:243:in `block (3 levels) in '\nFinished in 0.2715 seconds\n253 examples, 3 failures\nFailed examples:\nrspec ./spec/support/shared_matcher_examples.rb:231 # Serverspec matchers of Red Hat family behaves like support be_enforcing matcher selinux Enforcing\nrspec ./spec/support/shared_matcher_examples.rb:237 # Serverspec matchers of Red Hat family behaves like support be_permissive matcher selinux Permissive\nrspec ./spec/support/shared_matcher_examples.rb:243 # Serverspec matchers of Red Hat family behaves like support be_disabled matcher selinux Disabled\n```\n\u3059\u3079\u3066[\u5931\u6557]\n```\n% rspec ./spec/debian/commands_spec.rb ./spec/debian/matchers_spec.rb ./spec/gentoo/commands_spec.rb ./spec/gentoo/matchers_spec.rb ./spec/redhat/commands_spec.rb ./spec/redhat/matchers_spec.rb ./spec/solaris/commands_spec.rb ./spec/\nsolaris/matchers_spec.rb\n............................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n...................................................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.......................................................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.........................FFF............................................................................................\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.\n\n\"get_stdout\" matcher is deprecated.\nUse \"return_stdout\" matcher instead.\n\n.................................................\nFailures:\n1) Serverspec matchers of Red Hat family behaves like support be_enforcing matcher selinux Enforcing\n     Failure/Error: it { should be_enforcing }\n     Serverspec::Commands::Base::NotImplementedError:\n       Serverspec::Commands::Base::NotImplementedError\n     Shared Example Group: \"support be_enforcing matcher\" called from ./spec/redhat/matchers_spec.rb:57\n     # ./lib/serverspec/commands/base.rb:121:in check_selinux'\n     # ./lib/serverspec/backend/exec.rb:29:incheck_zero'\n     # ./lib/serverspec/backend/exec.rb:37:in method_missing'\n     # ./lib/serverspec/matchers/be_enforcing.rb:3:inblock (2 levels) in '\n     # ./spec/support/shared_matcher_examples.rb:231:in `block (3 levels) in '\n2) Serverspec matchers of Red Hat family behaves like support be_permissive matcher selinux Permissive\n     Failure/Error: it { should be_permissive }\n     Serverspec::Commands::Base::NotImplementedError:\n       Serverspec::Commands::Base::NotImplementedError\n     Shared Example Group: \"support be_permissive matcher\" called from ./spec/redhat/matchers_spec.rb:58\n     # ./lib/serverspec/commands/base.rb:121:in check_selinux'\n     # ./lib/serverspec/backend/exec.rb:29:incheck_zero'\n     # ./lib/serverspec/backend/exec.rb:37:in method_missing'\n     # ./lib/serverspec/matchers/be_permissive.rb:3:inblock (2 levels) in '\n     # ./spec/support/shared_matcher_examples.rb:237:in `block (3 levels) in '\n3) Serverspec matchers of Red Hat family behaves like support be_disabled matcher selinux Disabled\n     Failure/Error: it { should be_disabled }\n     Serverspec::Commands::Base::NotImplementedError:\n       Serverspec::Commands::Base::NotImplementedError\n     Shared Example Group: \"support be_disabled matcher\" called from ./spec/redhat/matchers_spec.rb:59\n     # ./lib/serverspec/commands/base.rb:121:in check_selinux'\n     # ./lib/serverspec/backend/exec.rb:29:incheck_zero'\n     # ./lib/serverspec/backend/exec.rb:37:in method_missing'\n     # ./lib/serverspec/matchers/be_disabled.rb:3:inblock (2 levels) in '\n     # ./spec/support/shared_matcher_examples.rb:243:in `block (3 levels) in '\nFinished in 0.56124 seconds\n483 examples, 3 failures\nFailed examples:\nrspec ./spec/support/shared_matcher_examples.rb:231 # Serverspec matchers of Red Hat family behaves like support be_enforcing matcher selinux Enforcing\nrspec ./spec/support/shared_matcher_examples.rb:237 # Serverspec matchers of Red Hat family behaves like support be_permissive matcher selinux Permissive\nrspec ./spec/support/shared_matcher_examples.rb:243 # Serverspec matchers of Red Hat family behaves like support be_disabled matcher selinux Disabled\n```\n. \u3088\u304b\u3063\u305f\uff01\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\u5199\u7d4c\u3067\u3044\u3051\u308b\u304b\u3068\u601d\u3063\u305f\u3093\u3067\u3059\u304c\u3001\u3084\u3063\u3071\u308aRSpec\u308f\u304b\u3063\u305f\u4e0a\u3067\u66f8\u304b\u306a\u3044\u3068\u30c0\u30e1\u3067\u3059\u306d\u3002\n\u6b21\u306epullreq\u306e\u6642\u306f\u30d3\u30b7\u3063\u3068\u30ad\u30e1\u308c\u308b\u3088\u3046\u306b\u7cbe\u9032\u3057\u3066\u53c2\u308a\u307e\u3059\u3002\n\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n. \u306a\u308b\u307b\u3069\u306a\u308b\u307b\u3069\uff01\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n:+1: \n. ",
    "takatoshi-maeda": "Hello. \nI was fixed a place where it has been pointed out.\nI changed the regular expression only one place.\nruby\n  def check_authorized_key user, key\n    # Supports only when EOL has a blank.\n    key.sub!(/\\s+\\S*$/, '') if key.match(/^\\S+\\s+\\S+\\s+\\S*$/)                                                                                                                                                                                                           \n    \"grep -w '#{key}' ~#{user}/.ssh/authorized_keys\"\n  end\nI think EOL has a blank only when not good case.\nbut, this case when ssh login success.\nI thought the test should be successful if can log in with SSH.\nMy environment success all specs.(Mac OS X 10.8.2)\nIt was confirmed that it is run successfully on CentOS6.3.\n(commentedkey, uncommentedkey, EOL has a blank only case)\nOther environments is not able to test yet...sorry...\nBut Rspec is all green.\nPlease confirm.\nThank you:-)\n. Hi.\nnice!\nI did not know how to write that.\nAnd that the end-of-line SSH public key points to comment.\nI will resend two modifications pullreques.\nI was able to learn few knowledge.\nThanks:-)\n. ",
    "wubel": "hello :)\ni have updated the pull request and implemented the matchers with shell commands. i hope ive done the rebasing right. \nmay i ask why you prefer shell commands instead of ruby builtin library ? i think its because of the remote execution of commands with ssh ? \nregards\n. done\n. thx for your review :) to do a normal ping check without any arguments seems like a really good idea. i will change the code that it behaves like you posted and update the pull request.\n. ive updated the code. now you can only use \"host:port\" and \"host\" (which makes a icmp check) as description. and i have removed the tcp and udp listeners from the specs.\nruby\n    # icmp check\n    context \"127.0.0.1\" do\n      it { should be_reachable }\n    end\n    # ping fail\n    context \"localhost2\" do\n      it { should_not be_reachable }\n    end\n. ",
    "matsumana": "Thank you for your information.\nHas re-modified.\n. ",
    "danshultz": "thank you\n. ",
    "netmarkjp": "I think match_md5checksum is better.\nShuld I change name and pull-request again?\n. ",
    "flozano": "Hi!\nJust added the missing command tests, reordered the parameters and removed the unneeded method (didn't know that ruby 'magic' :) )\n. Thanks for accepting the merge!\n. I've had someone review the commands and it seems I used a redhat-specific thing - or something that, at least in debian, is not available. runuser is part of core util-linux but I've seen some references about it not being available in debian for some reason.\n. ",
    "matsuo": "Thanks. OK, I have fixed.\n. Thanks. I think so, too. I have updated and tested with v10.4.11, v10.5.8, v10.6.8, v10.7.5, v10.8.3.\n. ",
    "adrienthebo": ":+1: for this behavior\n. ",
    "naoya": "LGTM\n. ",
    "bobziuchkovski": "+1 Ran into this upstart service detection issue.  I pulled cs-travis' commit 400a50c and it works as expected.\n. Np, thanks for the current merge.\n. ",
    "linyows": "Ah, I see. I'll try that on.\n. Many thanks!\n. \u304a\u3001\u30c6\u30b9\u30c8\u66f8\u3044\u3066\u306a\u304f\u3066\u3059\u3044\u307e\u305b\u3093\uff01\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n. \u8aac\u660e\u4e0d\u8db3\u3067\u3059\u3044\u307e\u305b\u3093\u3002\u3048\u3068\u3001server\u306eshell\u304czsh\u306e\u5834\u5408\u306bbe_installed.by('gem')\u3060\u3068^\u304c\u539f\u56e0\u3067\u30de\u30c3\u30c1\u3057\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n. \u624b\u5143\u3067 gem list | grep ^pry \u3068\u304b\u3084\u308b\u3068\u306f\u3084\u3044\u3059\u306d\n. \u304a\u3001\u6c17\u3065\u304b\u306a\u304b\u3063\u305f\uff01\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\u5909\u66f4\u3057\u307e\u3059\u3002\n. \u3044\u3048\u3044\u3048\u3001\u30a2\u30c9\u30d0\u30a4\u30b9\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059 :ramen: \n. \u304a\u3001\u3067\u3059\u3088\u306d\u3002\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\n. rbenv\u3068\u304bnodebrew\u7cfb\u306e\u30d1\u30b9\u3092\u901a\u3059\u70ba\u306e\u307f\u306b\u3064\u304b\u3063\u3066\u3044\u307e\u3059\n. \u4ed6\u306e\u4eba\u3068\u304b\u3069\u3046\u306a\u3093\u3067\u3057\u3087\u3046\u3002\u6559\u3048\u3066\u307b\u3057\u3044\u3067\u3059\u306d\u3002\u3002\u3002\n. \u78ba\u304b\u306bpre_command\u3067\u3084\u3063\u3066\u3057\u307e\u3046\u3068\u8907\u96d1\u3059\u306d\u3002\u5225\u306bpath\u8a2d\u5b9a\u3067\u554f\u984c\u306a\u3044\u306e\u3067path\u8a2d\u5b9a\u4f7f\u3046\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n. ",
    "youyo": "grep -i -- SELINUX=#{escape(mode)} is good more!\nShould I re-pull request would you like?\nI do not understand well the github...\n. I understand!\nThank you!\n. That's right.\nFixed.\n. ",
    "kotakanbe": "I found that spec/commands_spec.rb do'nt have check_installed_by_npm testcase.\n. ",
    "ijin": "\"should be_a_file\" makes more grammatical sense than \"should be_file\"\nditto for be_directory and be_socket.\nI made it an alias method for backward compatibility.\n. Thanks! It might be good if there's some mention of this in the docs.\n. ",
    "hfm": "I fixed it!\nThank you very much.\n. I completed adding parentheses.\n. see also: https://github.com/serverspec/specinfra/pull/53\nThis test fails unless specinfra is merged with pull request serverspec/specinfra#53 .\n. This announcement said, (sorry, my PR comment is a little mistake), \n- pkgng binary packages are available on 8.3, 8.4, 9.1, 9.2, 10.0 and HEAD.\n- pkgng officially supports VERSION 10.0.\n. @mizzy sorry, I wrongly mentioned. I removed my comments.\n. I'll add new FreeBSD10 class, and it indent to support pkgng.\nI remake pull-request.\n. see also: serverspec/specinfra#54\n. pkgng documentation is here:\n  http://www.freebsd.org/doc/en/books/handbook/pkgng-intro.html\n. This test fails unless https://github.com/serverspec/specinfra/issues/54 merge.\n. Oh test failed, but this failure is not this PR.\nhttps://travis-ci.org/serverspec/serverspec/jobs/21863756\nGem::InstallError: octokit requires Ruby version >= 1.9.2.\n. ",
    "kitak": "debian\u7cfb\u3068\u304b\u3082\u610f\u8b58\u3057\u3066\u3001repository\u306b\u3057\u305f\u306e\u3067\u3059\u304c\u3001\u305f\u3057\u304b\u306b\u5e45\u304c\u5e83\u3044\u3067\u3059\u306d...\nyumrepo\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n. \u305f\u3057\u304b\u306b\u305d\u3046\u3067\u3059\u306d... Fork\u3057\u305f\u3082\u306e\u3092\u4f7f\u3044\u7d9a\u3051\u307e\u3059\n. @ftnk \n\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\u30b3\u30de\u30f3\u30c9\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\u4eca\u5f8c\u306fraise NotImplementedError.new\u3057\u307e\u3059m( )m\n. @mizzy \n\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01 \u4fee\u6b63\u3057\u307e\u3057\u305f\n. \u4e86\u89e3\u3067\u3059\u3002\n\u30c6\u30b9\u30c8\u306e\u65b9\u3092\u6587\u5b57\u5217\u3067\u6e21\u3059\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n. \u8a72\u5f53\u30d7\u30ed\u30bb\u30b9\u304c\u76e3\u8996\u3055\u308c\u3066\u3044\u306a\u3044\u72b6\u614b\u3067\u300cunmonitored\u300d\u3068\u51fa\u529b\u3055\u308c\u3066exit status 0\u3092\u8fd4\u3059\u306e\u3067\u3001stdout\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\n\u306f\u3058\u3081\u306fcommands/base.rb\u306b\u4ee5\u4e0b\u306e\u69d8\u306acheck_monitored_by_god\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u3001method_missing\u306b\u30d7\u30ed\u30ad\u30b7\u3055\u305b\u3088\u3046\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\nruby\ndef check_monitored_by_god(process)\n  \"god status #{escape(process)} | grep -- ^#{escape(process)}:\\\\ up\"\nend\ntype/service.rb\u306ebackend.respond_to?(:check_monitored_by_god)\u304cfalse\u3092\u8fd4\u3057\u3066\u3057\u307e\u3044\u3001\u4f8b\u5916\u304c\u9001\u51fa\u3055\u308c\u308b\u306e\u3067\u51fa\u529b\u3092\u8abf\u3079\u308b\u5b9f\u88c5\u3092backend/exec.rb\u306b\u79fb\u3057\u307e\u3057\u305f\u3002\n\u4ed6\u306e\u89e3\u6c7a\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001backend/exec.rb\u3067respond_to?\u30e1\u30bd\u30c3\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u65b9\u6cd5\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001check_monitored_by_god\u30e1\u30bd\u30c3\u30c9\u306e\u305f\u3081\u3060\u3051\u306b\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u306e\u3082\u5927\u3052\u3055\u3060\u3068\u601d\u3044\u3001\u73fe\u5728\u306e\u5f62\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nruby\ndef respond_to?(name)\n  return true if commands.respond_to? name && name =~ /^check/\n  super\nend\n. \u306f\u3044\uff01\n. > \u3053\u3093\u306a\u98a8\u306b\u3001backend.respond_to?\u3092commands.respond_to?\u306b\u5909\u3048\u308b\u3068\u3001\u4f8b\u5916\u3092\u6295\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306d\u3002\n\u4e86\u89e3\u3067\u3059\u3002commands.respond_to?\u3067\u78ba\u8a8d\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\n\nunmonitored \u3060\u3068 1 \u3092\u8fd4\u3055\u306a\u3044\uff1f\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3082\u3088\u308b\uff1f\n\n\u3053\u308c\u306f\u50d5\u306e\u52d8\u9055\u3044\u3067\u3057\u305f\u3002\u3059\u3044\u307e\u305b\u3093\u3002Task, Group\u3092\u6307\u5b9a\u305b\u305a\u306bgod status\u3059\u308b\u3068unmonitored\u306a\u3082\u306e\u304c\u3042\u3063\u3066\u30820\u3092\u8fd4\u3059\u306e\u3067\u305d\u306e\u6319\u52d5\u3068\u52d8\u9055\u3044\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u3044\u3066\u306fecho $?\u3067\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u30bd\u30fc\u30b9\u3092\u76f4\u63a5\u898b\u306b\u3044\u3063\u305f\u307b\u3046\u304c\u78ba\u5b9f\u3067\u3059\u306d... \u6c17\u3092\u3064\u3051\u307e\u3059\u3002\nstdout\u3092\u8abf\u3079\u306a\u3044\u3088\u3046\u306b\u4fee\u6b63\u3057\u3066\u3001method_missing\u306b\u30d7\u30ed\u30ad\u30b7\u3055\u305b\u308b\u3088\u3046\u306b\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002\n. ",
    "sohgo": "I think \"-s sh\" is necessary (it should be -s /bin/sh)  because the login shell of some users (e.g. daemon program and/or system users) can be /usr/sbin/nologin and/or /bin/false etc. If these login shells are used, the test will always fail.\nAny comments are appreciated.\n. Thanks for your comment. I will send a pull request later.\n. Thanks for your work.\n. ",
    "muddydixon": "I could not understand the product deeply, so thank you for fixing my pull request and merge it!\n. ",
    "inokappa": "\u627f\u77e5\u81f4\u3057\u307e\u3057\u305f\u3002\n\u30b3\u30e1\u30f3\u30c8\u9802\u304d\u6709\u96e3\u3046\u5fa1\u5ea7\u3044\u307e\u3057\u305f\u3002\n. ",
    "koemu": "I appreciate it.\n. Thank you for review my code!\nUpdate code based on your advice. Then I'll repost a \"Pull Request\".\n. > So you don't need to resend a pull request.\nSorry about that.\n. I'm just update \"php_config\".\nPlease check it, again.\nNote: Usage\n``` ruby\ndescribe 'php config' do\n  context php_config('memory_limit') do\n    its(:value) { should eq '128M' }\n  end \ncontext php_config('default_mimetype') do\n    its(:value) { should match /text\\/html/ }\n  end \ncontext php_config('default_socket_timeout') do\n    its(:value) { should <= 60 }\n  end \nend\n```\n. Sorry. I'll verify.\n. Thank you very much for your coding advice, too.\n(From here, I written in Japanese.)\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u8a18\u8ff0\u306b\u969b\u3057\u3066\u3001\u304a\u624b\u6570\u3092\u304a\u304b\u3051\u3057\u3066\u6050\u7e2e\u3067\u3057\u305f\u3002\n\u3044\u305f\u3060\u3044\u305f\u30a2\u30c9\u30d0\u30a4\u30b9\u3068\u30b3\u30fc\u30c9\u3092\u57fa\u306b\u3001\u6b21\u56de\u306ePull Request\u3067\u306f\u5b8c\u6210\u5ea6\u3092\u4e0a\u3052\u3066\u884c\u304f\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001\u4eca\u56de\u306ePHP\u306e\u8a2d\u5b9a\u30c6\u30b9\u30c8\u304c\u3001\u7686\u69d8\u306e\u304a\u5f79\u306b\u7acb\u3066\u3070\u5e78\u3044\u3067\u3059\u3002\n\u3069\u3046\u3082\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n. ",
    "hayato1980": "Just as you say.\nI revert and reimplement by alias.\n. ",
    "kui": "umm... When I use be_enforcing or be_permissive, your modification cause a syntax error:\n1) SELinux\n     Failure/Error: it { should be_enforcing }\n       sudo (getenforce | grep -i -- enforcing && grep -i -- ^SELINUX=enforcing$ /etc/selinux/config)\n       bash: -c: line 0: syntax error near unexpected token `getenforce'\nbash: -c: line 0: `sudo (getenforce | grep -i -- enforcing && grep -i -- ^SELINUX=enforcing$ /etc/selinux/config)'\n       expected enforcing? to return true, got false\n     # ./spec/common/selinux_spec.rb:4:in `block (2 levels) in <top (required)>'\n. I've check it. But, it's not works right, because getenforce is located in /usr/sbin. So, It's required that PATH env variable includes /usr/sbin or that getenforce is executed with sudo (such as my pull req).\nI've executed with be_disabled and a debian box installed selinux-basics:\n1) SELinux\n     Failure/Error: it { should be_disabled }\n       sudo test ! -f /etc/selinux/config || (getenforce | grep -i -- disabled && grep -i -- ^SELINUX=disabled$ /etc/selinux/config)\n       bash: getenforce: command not found\n       expected disabled? to return true, got false\n     # ./spec/common/selinux_spec.rb:4:in `block (2 levels) in <top (required)>'\ngetenforce location and attributes on Debian 6:\nsh\n$ sudo ls -l `sudo which getenforce`\n-rwxr-xr-x 1 root root 5152 Jul 21  2010 /usr/sbin/getenforce\n. LGTM. With your patch, my specs works just as I intended.\n. ",
    "ryotarai": "I'm sorry that I closed this pull request temporarily because I wondered this is implemented in a correct way.\nI reopened now. Please merge this.\n. I sent a pull request to serverspec.github.io. (serverspec/serverspec.github.io#4)\n. I'm sorry for my misunderstanding.\nI forgot Serverspec::Backend::Ssh inherits Serverspec::Backend::Exec.\nI close this issue. Thank you.\n. @mizzy @vincentbernat \nPull request #316 looks good to me!\nBut it seems to contain a typo. I commented on #316 .\n. Is this a typo?\nVersion -> version\n. BTW, is the following part necessary?\nruby\n          if val.is_a? Version\n            @epoch = val.epoch\n            @version = val.Version\n            return\n          end\n. ",
    "cl-lab-k": "i see, but some problem still stay. so i reconsider how to fix it.\n. ",
    "smontanari": "@mizzy No worries. I'm happy to continue improving the support for windows, it's still at an early stage and potentially there's lots more to add\n. If I may input my opinion on this matter: most of what serverspec already does is running commands and verifying the output or  the exit status. for instance, when you run\n. sorry guys, I'm not very familiar with this editor.\nI was saying, when you run:\nruby\ndescribe service('some-service') do\n  it { should be_running }\nend\nyou actually running (e.g. in Debian):\nservice some-service status | grep 'running'\nwhich basically is equivalent to running the service command and then checking its output, right?\nSo, on one side I agree with @rickhull that a command type that allows you to execute an arbitrary command and then grab its output to perform any assertion is pretty convenient and to some extent desirable, because it lets me work around all the tests that I cannot yet run with the current serverspec types.\nOn the other hand though, one of the reasons I like serverspec is because it puts a layer of abstraction on top of that technique, and simplifies and makes your tests more readable, as well as more portable.\nSo, referring to the example above (the ssh config file), why not creating an sshconfig type in serverspec that lets you write something like this:\nruby\ndescribe sshconfig('someuser') do\n  it do \n    should identify('someidentifier').\n         with_remote_host('github.com').\n         and_user('git').\n         with_identityfile('/tmp/id_rsa_someidentifier')\n  end\nend\nThis is just an example I used to explain my opinion, I don't mean we necessarily have to create such type. But in general I believe we should strive to enrich the nice DSL in serverspec and encourage people to use it to make their tests easier to read. While I think having a more flexible command feature (with multiline support) is a good thing, we must be aware of the risk that it would become the shortcut everyone would use to perform its tests, making the tests harder to understand and basically reducing serverspec to just a simple ssh wrapper\n. Looks good to me. Only thing I would probably have to change a little the code in the command type to accomodate the case of when we use winrm instead of ssh, to cater for windows commands. I've got already some work in progress in my windows-support branch to allow running commands from windows, but I'll wait until this change is all nicely merged into master before submitting a pull request\n. ",
    "coveralls": "\nCoverage remained the same when pulling 526eaa1c6e8587b54729caf0552ec63ca6842ccf on include-detectos-in-freebsd-specs into c526585134a2d5aa3429e066155d187f81bab210 on master.\n. \nCoverage increased (+91.49%) when pulling 67f543231b4eeaa1394a0e4d29a9bd89d5799ff1 on include-detectos-in-darwin-specs into 73324c7b02fccf9f2a8d716244ca8ff544b2eca2 on master.\n. \nCoverage increased (+94.93%) when pulling 05095eeb8a990976a99f5c09ae640af53118ce18 on include-detectos-in-aix-specs into 1dcf5e69c66e16aa8492e839ea771eeb9634770a on master.\n. \nCoverage remained the same when pulling 05095eeb8a990976a99f5c09ae640af53118ce18 on include-detectos-in-aix-specs into 1dcf5e69c66e16aa8492e839ea771eeb9634770a on master.\n. \nCoverage increased (+95.83%) when pulling 10a594803b816a34ede411d99437a825e82f1fd6 on include-detectos-in-debian-specs into 1dcf5e69c66e16aa8492e839ea771eeb9634770a on master.\n. \nCoverage remained the same when pulling ab864b197beb18229bc81dafbe5d3104c980e018 on include-detectos-in-gentoo-specs into 1dcf5e69c66e16aa8492e839ea771eeb9634770a on master.\n. \nCoverage increased (+95.83%) when pulling 081a9fb3c730f458d85b87c190346bed1217ecd0 on include-detectos-in-redhat-specs into 1dcf5e69c66e16aa8492e839ea771eeb9634770a on master.\n. \nCoverage remained the same when pulling 7a6e5fdbcadf25a2eace9dce9394e5753e6cc0d9 on include-detectos-in-solaris-specs into a0a3631b4ad55dcb56cba07843b1b87502d1ffa7 on master.\n. \nCoverage increased (+23.96%) when pulling 2e2b8a154f42993e9d8684fe05a2528537cd4a77 on include-detectos-in-windows-specs into e5619dcc748f97dba8f05c670fe526c8ce6da615 on master.\n. \nCoverage increased (+95.83%) when pulling 79533a3e7591a8a55f2d88176b40a23293fcb467 on aibou:master into e7ff0230452be971d3f89f9fe83aebeb731ab1d0 on serverspec:master.\n. \nCoverage increased (+86.76%) when pulling 31b070d5b93122b633cab0f7409d00a0dbc25fdb on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage remained the same when pulling dcb9bd257ef435e43ff8cade6ab781cffe7a912d on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage increased (+88.26%) when pulling 6d18138f8ab1985df312b151fb5a690f479ac0c1 on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage increased (+88.18%) when pulling b0b42c79119f92f72c09fc27ab32db20af6477fb on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage increased (+91.4%) when pulling a7516082d3f4e62131e24cf3ec975e2135796637 on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage increased (+88.43%) when pulling fd33d3fd57876cc541b2eddc40d11b195a40ba39 on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage increased (+87.35%) when pulling 3022dea571aacb93fe24eff5c48609aea09ea56e on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage increased (+56.44%) when pulling 002a63689ff4039b35863443d4ac4ad408786175 on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage increased (+92.89%) when pulling 42a14a1d968d7bb569d7cce9d15fc2e2d5dd2768 on set-backend-by-config-in-specs into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on master.\n. \nCoverage increased (+95.83%) when pulling ffdd9feccc2f735216a8031afd97a0cc9853e322 on aibou:master into d86fbf613954d0b5c5f2a8aec7673e31fdbf275d on serverspec:master.\n. \nCoverage decreased (-25.25%) when pulling e0f6a23bfb405e55f8ba07a73c9b27548aa67a27 on coveralls-merged into 181fe35db52abb84e8a96f6f0ad2d35908223e2d on master.\n. \nChanges Unknown when pulling c4a42071809b28378137b14590f83ac090c43781 on introduce-property-instead-of-attr into * on master*.\n. ",
    "aibou": "\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n. ",
    "sawanoboly": "Okay.\nClosed\n. \u30a4\u30e4\u30f3...\n:x: Run vagrant reload ubuntu1404\ncd $WERCKER_SOURCE_DIR\n$ cd \"$WORKING_DIR\"\n$ export WERCKER_STEP_ROOT=\"/wercker/steps/wercker/script/0.0.0\"\n$ export WERCKER_STEP_ID=\"ef42b9e2-2104-4321-9d65-3532a7d029dd\"\n$ export WERCKER_STEP_NAME=\"script\"\n$ export WERCKER_REPORT_NUMBERS_FILE=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/numbers.ini\"\n$ export WERCKER_REPORT_MESSAGE_FILE=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/message.txt\"\n$ export WERCKER_REPORT_ARTIFACTS_DIR=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/artifacts\"\n$ mkdir -p $WERCKER_REPORT_ARTIFACTS_DIR\n$ export WERCKER_STEP_TEMP=\"/tmp/$WERCKER_STEP_ID\"\n$ source '/wercker/wercker-build-essentials/init.sh'\n$ mkdir -p $WERCKER_STEP_TEMP\n$ vagrant reload ubuntu1404\n==> ubuntu1404: Rebooting the droplet...\nGuest-specific operations were attempted on a machine that is not\nready for guest communication. This should not happen and a bug\nshould be reported.\n. :+1:\n. Hi,\nAppVeyor uses http://rubyinstaller.org to install rubies. Please remove for now. I'll add 2.3 when it is available on AppVeyor.\n. @thedrow \nI think it's good. How about you, @mizzy ?\n. I've created ticket to resolve this to appveyor. http://help.appveyor.com/discussions/questions/2224-ruby-23\nPlease wait their response.\n. I'll retry test after Apr 10 \ud83d\udcc6  https://github.com/appveyor/ci/milestones/apr-10\n. https://ci.appveyor.com/project/serverspec-windows-integration-test/serverspec/build/110/job/l5wxy69f8of33oxp\nruby --version\nruby 2.3.0p0 (2015-12-25 revision 53290) [i386-mingw32]\ngem --version\n2.6.3\nOK, it's ready to merge \ud83d\udc9a  @thedrow @mizzy \n. @StefanScherer \nI seem that it is Powershell 5.0's bug. Probably 5.1 or later doesn't cause it.\nFYI, we have conversation about similar issue in below topic.\nhttp://help.appveyor.com/discussions/problems/5170-progresspreference-not-works-always-shown-preparing-modules-for-first-use-in-stderr\n. ",
    "rickhull": "ah, good point.  perhaps a specific matcher like\nexpect().to return_stdout_lines(/foo/, /bar/)\n. ok, that should do it!   :)\n. but doesn't that mean we run the command, over ssh, multiple times?\n. really, what I'd like to do is just grab the output lines, and then run asserts/matchers/tests on the output.  I don't really like having these tests be couple to the running of the command.  mostly i wanted to check 6 or 8 things in the output of a single command, and i was poking around to see what the options were, and I saw the ticket about multiline support.\nHonestly though, I'd just like to run the command and then test the output.\n. Yep, this is exactly what I am looking for!\n. +1\n. ",
    "jhaals": "Thanks for the quick release @mizzy :+1: \n. ",
    "lamanotrama": ":smile: \n. :smiley: \n. ",
    "fnichol": "Hi there, I realize that I haven't yet submitted any specs to cover this change, but I'd like to get some feedback first to make sure:\n- this is on the right track\n- this change is in line with the codebase\n- there aren't any other hidden issues this could produce (this behavior could possibly be enabled with a configuration??)\nAnyway, thank you so so very much for Serverspec. This is an amazingly useful project for our community!!\n. That's great news, thank you for the fast turnaround!\n. ",
    "vincentbernat": "That would be very useful! However, I think there is a trap with the use of >=. For example, '2.2.5' >= '2.2.14'. But this is unrelated to the functionality (we can use this functionality with a regular expression instead or do splitting before comparison).\nI would also prefer to return nil if the package is not installed.\n. It suits my need! Thanks!\n. Unfortunately, Gem::Version is rather limited to what it accepts. Most distributions will use versions like 1.2.3-10 which won't be accepted by Gem::Version.\n. Please wait a few minutes, I will propose an alternative.\n. See pull request #316. Bear in mind that I am an absolute beginner with Ruby. Maybe there is a more elegant way to do the same thing!\n. Updated.\n. Yes, the .dup was a leftover of a previous more complex version.\n. I will send a PR for the documentation today.\n. I don't use it. I will remove it.\n. If I don't define it, I cannot use --format json or --format html for reports. It is used to get the description of the test right. I didn't look at RSpec, but I suppose that if the class doesn't respond to this message, it will build something from its name. So, maybe this could be moved in the base class instead.\n. I am using RSpec 2.14.7. Try the JSON report, I am sure that it was needed for it. If you cannot reproduce the issue, I will provide a backtrace.\n. ",
    "nabeken": "Thanks!\n. ",
    "nishigori": "Thanks & Congrats :man: \n. ",
    "elmundio87": "This pull request is paired with https://github.com/serverspec/specinfra/pull/47\n. Linked to https://github.com/serverspec/serverspec/pull/343\n. Paired with https://github.com/serverspec/specinfra/pull/62\n. ",
    "k1LoW": "OK, I understand. Thank you for your careful review. \n\nI will give you the serverspec sticker. \n\nThank you!! I like serverspec logo, design and designing flow. I'd like to meet you too.\n. ",
    "banyan": "I think its syntax gonna be extracted from rspec-core, so it's better to avoid to use.\n\nWe plan to move its out of rspec-core and into an external gem.\n\nhttp://myronmars.to/n/dev-blog/2013/07/the-plan-for-rspec-3\nhttps://github.com/rspec/rspec-its\n. ",
    "punkle": "@mizzy I accept that testing external http requests does not fit with the purpose of serverspec. However, this change also enables the ability to test locally configured http servers. This would be comparable to testing the existing port type.\n. ",
    "naga2raja": "Modified the README.md with the latest Serverspec output\n. ",
    "tagomoris": "https://github.com/serverspec/serverspec/issues/369\n. :)\n. ",
    "yujinakayama": "I'm fine with that. Thanks!\n. ",
    "KitaitiMakoto": "Thank you!\n. :+1:\n. Exactly I thought! Thank you.\nI think it may prevent \"where is this method defined?\" confusion.\n. How's to define a subclass like Serverspec::TestCase < Test::Unit::TestCase?\n. Mine? I don't have anything about that... Anyway, I think it's nice if there is a base class to use instead of extending Test::Unit::TestCase directly.\n. ",
    "cosmo0920": "Oh, sorry.\nshould exist is correct.\nI updated PR description.\n. Thanks for merging!\n. > I will remove these kind of specs in v2.0.So I don't care about it.\nOh, I see.\nBut, thank you for merging!\n. It's my pleasure!\n. ",
    "udzura": "good :tulip: \n. :heart_decoration: \n. :+1: :relaxed: \n. ",
    "SnehaM": "Testcases;\nhttpd_spec.rb file\n```\nrequire 'spec_helper'\ndescribe package('pacemaker') do\n  it { should be_installed }\nend\ndescribe command('whoami') do\n  it { should return_stdout 'root' }\nend\ndescribe 'Linux kernel parameters' do\n  context linux_kernel_parameter('kernel.msgmnb') do\n    its(:value) { should eq 65536 }\n  end\nend\n```\noutput:\n```\n[root@localhost serverspec_test]# rake spec evidence=true\n/usr/bin/ruby -S rspec spec/localhost/httpd_spec.rb\nF..\nEvidence:\n1) Package \"pacemaker\" should be installed\n      Failure:\n       rpm -q pacemaker\n       package pacemaker is not installed\n      # ./spec/localhost/httpd_spec.rb:3\n2) Command \"whoami\" should return stdout \"root\"\n      Success:\n       whoami\n       root\n      # ./spec/localhost/httpd_spec.rb:7\n3) Linux kernel parameters Linux kernel parameter \"kernel.msgmnb\" value should eq 65536\n      Success:\n       /sbin/sysctl -q -n kernel.msgmnb\n       65536\n      # ./spec/localhost/httpd_spec.rb:12\nFinished in 0.04516 seconds\n3 examples, 1 failure\nFailed examples:\nrspec ./spec/localhost/httpd_spec.rb:3 # Package \"pacemaker\" should be installed\n/usr/bin/ruby -S rspec spec/localhost/httpd_spec.rb failed\n```\n. I have written a custom formatter EvidenceCollector for collecting evidences.\nThere are two approaches for collecting output.\nI would like to have your views on both approaches.\nApproach 1\nSuccess and Failure testcases results will be print separately\n[root@localhost serverspec_test]# rake spec:evidence\n/usr/bin/ruby -S rspec ./spec/localhost/httpd_spec.rb --require /usr/lib/ruby/gems/1.8/gems/serverspec-1.7.0/lib/evidence_formatter.rb --format EvidenceCollector\nF..\nSuccess:\n  2) Command \"whoami\" should return stdout \"root\"\n       Success:\n       whoami\n       root\n      # ./spec/localhost/httpd_spec.rb:7\n  3) Linux kernel parameters Linux kernel parameter \"kernel.msgmnb\" value should eq 65536\n       Success:\n       /sbin/sysctl -q -n kernel.msgmnb\n       65536\n      # ./spec/localhost/httpd_spec.rb:12\nFailures:\n  1) Package \"pacemaker\" should be installed\n     Failure/Error: it { should be_installed }\n       rpm -q pacemaker\n       package pacemaker is not installed\n       expected Package \"pacemaker\" to be installed\n     # ./spec/localhost/httpd_spec.rb:3\nFinished in 0.04128 seconds\n3 examples, 1 failure\nFailed examples:\nrspec ./spec/localhost/httpd_spec.rb:3 # Package \"pacemaker\" should be installed\n/usr/bin/ruby -S rspec ./spec/localhost/httpd_spec.rb --require /usr/lib/ruby/gems/1.8/gems/serverspec-1.7.0/lib/evidence_formatter.rb --format EvidenceCollector failed`\n\nApproach 2\nEvidence will be print first (it will include success as well as failed testcases evidences) and then failed testcases result will get print.\n[root@localhost serverspec_test]# rake spec:evidence\n/usr/bin/ruby -S rspec ./spec/localhost/httpd_spec.rb --require /usr/lib/ruby/gems/1.8/gems/serverspec-1.7.0/lib/evidence_formatter.rb --format EvidenceCollector\nF..\nEvidence:\n  1) Package \"pacemaker\" should be installed\n      Failure:\n       rpm -q pacemaker\n       package pacemaker is not installed\n      # ./spec/localhost/httpd_spec.rb:3\n  2) Command \"whoami\" should return stdout \"root\"\n      Success:\n       whoami\n       root\n      # ./spec/localhost/httpd_spec.rb:7\n  3) Linux kernel parameters Linux kernel parameter \"kernel.msgmnb\" value should eq 65536\n      Success:\n       /sbin/sysctl -q -n kernel.msgmnb\n       65536\n      # ./spec/localhost/httpd_spec.rb:12\nFailures:\n  1) Package \"pacemaker\" should be installed\n     Failure/Error: it { should be_installed }\n       rpm -q pacemaker\n       package pacemaker is not installed\n       expected Package \"pacemaker\" to be installed\n     # ./spec/localhost/httpd_spec.rb:3\nFinished in 0.04202 seconds\n3 examples, 1 failure\nFailed examples:\nrspec ./spec/localhost/httpd_spec.rb:3 # Package \"pacemaker\" should be installed\n/usr/bin/ruby -S rspec ./spec/localhost/httpd_spec.rb --require /usr/lib/ruby/gems/1.8/gems/serverspec-1.7.0/lib/evidence_formatter.rb --format EvidenceCollector failed\n\nWhich of the above approach will you suggest for this feature\nCustom Formatter\nFor achieving this I have written a Custom Formatter EvidenceCollector( inherited from ProgressFormatter) with a method dump_evidence.\nThis method will print either success cases (Approach 1) or evidences (Approach 2).\nThis method is called from method start_dump of ProgressFormatter.\nMethod of execution\n1. Pass the arguments from command line\n \n2. Setting these arguments in a rake task\nnamespace :spec do\n   RSpec::Core::RakeTask.new('evidences') do |t|\n     t.rspec_opts = %w[--require /usr/lib/ruby/gems/1.8/gems/serverspec-1.7.0/lib/evidence_formatter.rb --format EvidenceCollector]\n   end\n   end\nand then execute by\n   $rake spec:evidence\nIs it good way for custom formatter and feature? \nPlease correct me anything wrong \n. When we execute serverspec testcases, it already gives us the detailed information about failed testcases only that includes command executed at backend and its output also.\nUsual output of serverspec\n[root@localhost serverspec_test]# rake spec\n/usr/bin/ruby -S rspec spec/localhost/httpd_spec.rb\n..F\nFailures:\n  1) Command \"whoami\" should return stdout \"localhost\"\n     Failure/Error: it { should return_stdout 'localhost' }\n       whoami\n       root\n       expected Command \"whoami\" to return stdout \"localhost\"\n     # ./spec/localhost/httpd_spec.rb:26\nFinished in 0.04673 seconds\n3 examples, 1 failure\nFailed examples:\nrspec ./spec/localhost/httpd_spec.rb:26 # Command \"whoami\" should return stdout \"localhost\"\n/usr/bin/ruby -S rspec spec/localhost/httpd_spec.rb failed\n\nThis feature is implemented for successfully executed testcases. \nHow it is useful for successful testcases\n-  It may happen that we have written some wrong testcase and that will always pass.\n  In this case we don\u2019t have any evidence to verify what actual command is executed and what its output is.\n  If we have this feature we can look at output and verify the result\n- We will be able to know the actual command that is executed at backend and its output always.\n. ",
    "electrical": "I think this is a useful feature if it would only do this on failed tests.\nThat will allow you to trace down why a certain test failed and with which value it actual got back.\n. ",
    "mattt416": "Hi @mizzy,\nThis test validates that the target server can connect to MySQL on the specified host using the optionally provided user/password/database.  The specified host may be localhost or an external IP.  \nThe idea being that the target server relies on a MySQL user/database (hosted locally or remotely) and if that user/database do not exist (or that combination does not grant access) then the target server will be non-functional.  The goal is not to test the remote MySQL service, however that will happen as a by-product of what we're doing.\nI suppose you could look at this matcher in a similar way as you would be_reachable.  You're not testing general network connectivity w/ that matcher, however obviously it has to be up and operational for those checks to succeed.\n. Hi @mizzy,\nGiving this some thought I think I understand what you are saying.  These checks should be run on the target MySQL server and from there we should be able to determine if a user/database exists, and that an appropriate grant statement also exists to allow authentication from a given host.\nLet me see if I can rework this a bit.\n-Matt\n. To move forward w/ this, I'd need to change https://github.com/serverspec/specinfra/pull/147 to use a ruby MySQL client instead.  Do you have any objections?  This is what I have in mind:\n- use show databases for particular database\n- query mysql.user table for user, password, and host\n- query mysql.database table for database, user, and host\nThese three checks can then be used to determine if a database has been created with the relevant grants.\n. Sure thing, thanks!\n. ",
    "ifor2u": "Thank you for your comment.\nI will take care in future.\n. ",
    "chantra": "the build failure does not seem to be related to the code change. It does not even get tested as far as I can see.\n. ",
    "jasperla": "Sure, I've moved it to Specinfra and opened serverspec/specinfra#225. \n. ",
    "tosmi": "if possible please upload this release to rubygems.org, otherwise installing beaker-rspec via gem fails\n. ",
    "CtrlZvi": "Depends on https://github.com/serverspec/specinfra/pull/240.\n. ",
    "mwrock": "ok.\nSo is it correct to say then that all usages of\nit { should return_stdout 'foo' }\nfrom v1 should be changed to add a newline\nits(:stdout) { should eq 'foo\\n' }\nThis feels awkward and requires lots of changes to existing tests but unless I'm missing something that is the only way to make the tests pass.\nThanks!\n. I'm happy to do that, just want to confirm this is the correct behavior which I am assuming it is. I will send a fix.\nThanks for this great tool!\n. ",
    "rossbachp": "I like it :-) Many Thanks\n. Great, you find a effective way to check docker inspect results :-) Nice, and without specinfra addition. We can add easily more useful matchers like has_env, has_ports be_architecture ...\n+1 \n. Really cool :)\nMany thanks to Andreas and Gosuke for that docker support. Now I can use it as example at my news paper article\u2026 Nice!\nPeter\nAm 15.10.2014 um 16:45 schrieb Gosuke Miyashita notifications@github.com:\n\nReleased as v2.3.0.\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "aschmidt75": "Renamed present to exists, remove have_setting matcher.\nString#to_camel_case unfortunately did not work out for combined names, i.e. \nits(:hostConfig_networkMode) \nwould have been changed to .Hostconfig.Networkmode, but docker inspect filter parameter is very strict about the names to be filtered. Solved it with an extra string transformation Docker command class in specinfra. For simpler names such as its(:architecture) it works as well.\nspec example:\n```\nrequire 'spec_helper'\ndescribe docker_image('busybox:latest') do\n  it { should exist }\nits(:architecture) { should eq 'amd64' }\nend\ndocker run -tdi --name \"c1\" busybox\ndescribe docker_container('c1') do\n  it { should exist }\n  it { should be_running }\nits(:hostConfig_networkMode) { should eq 'bridge' }\n  its(:path) { should eq '/bin/sh' }\nend\ndocker run -tdi --name \"c2\" -v /data:/tmp busybox\ndescribe docker_container('c2') do\n  it { should be_running }\n  it { should have_volume('/tmp','/data') }\nend\n```\n. ok, great. \nAs an alternative, instead of supporting arbitrary variables using method_missing, we could implement each variable as an individual matcher, like\ndef architecture \n  @runner.get_docker_inspect(@name, '.Architecture').stdout.strip\nend\nplus additional things such as it { should expose_port(....) }\n. Great, the :inspection matcher allows for a more clear readability.\nOne (minor) drawback of the json gem runtime dependency is that it includes a native extension (and must compile on target hosts9, whereas json_pure does not.\n. so i'm closing this pull request in favor of #482 \n. cool, thx\n. good point, changed names to x509.\n. Great, thanks! May i provide documentation for https://github.com/serverspec/serverspec.github.io as PR or would you prefer to maintain docs yourself?\n. Thanks for the hints, implemented it as suggested, 1.8.7 is ok now.\nrules\nTo check that auditd has a given auditing rule. Argument can be a string for equality comparison or a regular expression.\ndescribe linux_audit_system do\n  its(:rules) { should include '-w /etc/audit/ -p wa' }\n  its(:rules) { should include '-w /var/lib/ -p wa' }\n  its(:rules) { should include %r!/var/lib/! }\n  its(:rules) { should_not include %r!/var/log! }\nend\n. Great, thanks for merging! I'm going to provide docs within the next days. \n. ok, on my fedora 21 it's v2.4.3. this makes the status_of method a bit trickier, but not much. I'm going to have a look at this.\n. change came with https://fedorahosted.org/audit/ticket/3 https://fedorahosted.org/audit/browser/trunk/src/auditctl-listing.c?rev=1001 11 months ago. i think i would need to support both forms, single and multi line.\n. ",
    "martinb3": "The json gem requirement has really broken things for some folks in the community, see the bottom of #482.\n. Hello! I'd be glad to fix it, but my fix would have been to revert the commit. I figured you would prefer to fix it in a way that would preserve the new features. Thank you! \n. ",
    "ymdmkhk": "Thank you for detailed explanation. I understand.\n. ",
    "Mahito": "after add dependency.\n```\n% cat Gemfile.lock                                                                                                                  [~/repos/serverspec_test]\nGIT\n  remote: https://github.com/Mahito/serverspec.git\n  revision: df923a8df81017bb65eeb6352d0d478609513ea4\n  branch: add_gemspec_to_highline\n  specs:\n    serverspec (2.3.1)\n      highline\n      multi_json\n      rspec (~> 3.0)\n      rspec-its\n      specinfra (~> 2.3)\nGEM\n  remote: https://rubygems.org/\n  specs:\n    diff-lcs (1.2.5)\n    highline (1.6.21)\n    multi_json (1.10.1)\n    net-scp (1.2.1)\n      net-ssh (>= 2.6.5)\n    net-ssh (2.9.1)\n    rspec (3.1.0)\n      rspec-core (~> 3.1.0)\n      rspec-expectations (~> 3.1.0)\n      rspec-mocks (~> 3.1.0)\n    rspec-core (3.1.7)\n      rspec-support (~> 3.1.0)\n    rspec-expectations (3.1.2)\n      diff-lcs (>= 1.2.0, < 2.0)\n      rspec-support (~> 3.1.0)\n    rspec-its (1.0.1)\n      rspec-core (>= 2.99.0.beta1)\n      rspec-expectations (>= 2.99.0.beta1)\n    rspec-mocks (3.1.3)\n      rspec-support (~> 3.1.0)\n    rspec-support (3.1.2)\n    specinfra (2.3.2)\n      net-scp\n      net-ssh\nPLATFORMS\n  ruby\nDEPENDENCIES\n  serverspec!\n```\n% env ASK_SUDO_PASSWORD=true bundle exec rake                                                                                       [~/repos/serverspec_test]\n/Users/mahito/.rbenv/versions/2.1.3/bin/ruby -I/Users/mahito/repos/serverspec_test/vendor/bundle/ruby/2.1.0/gems/rspec-core-3.1.7/lib:/Users/mahito/repos/serverspec_test/vendor/bundle/ruby/2.1.0/gems/rspec-support-3.1.2/lib /Users/mahito/repos/serverspec_test/vendor/bundle/ruby/2.1.0/gems/rspec-core-3.1.7/exe/rspec --pattern spec/serverspec_test/\\*_spec.rb\nEnter sudo password:\n. ",
    "untidy-hair": "Ah, okay, let me check again. Thanks.\n. Well, looking into the details again, current master version seems OK.\nMy rake version is 10.1.0.\nI don't know why this circulation happens to me....\n. @tanimichi, @mizzy, thank you for the infor.\nAnd I think I found the cause!\nThe hostname from my Vagrant setting was 'default'. That's why...\nSo in Rakefile the \"targets\" is ['default'] which messes up things.\nThat means the Rakefile itself is correct. I'm sorry to bother you guys with this mess!\nMaybe we can add a warning somewhere to avoid this issue like when generating spec directorie(s), but I don't know if it's worth :)\n. Yeah, we might want to avoid 'all' or other possibly conflicting words, too. Thanks.\n. ",
    "ttanimichi": ":eyes: \n. > I don't know why this circulation happens to me....\nSame error happens to me too. Maybe that's because of rake version.\nServerspec v2.3.1 requires \"rake\", \"~> 10.1.1\"\nhttps://github.com/serverspec/serverspec/blob/master/serverspec.gemspec#L26\nand Ruby 2.1.3's default rake version is 10.1.0.\n. @mizzy oops..\n. ",
    "Vanders": "Sure, but then my PR adds tests for state (hostname and domain is configured correctly) rather then behaviour. If you've got any idea of where these tests would be better placed in ServerSpec I'd be happy to add a new resource type, or why not add these to the Host resource and then deprecate the be_resolvable & be_reachable matchers (as they test behaviour, rather than state)?\n. So where would you suggest these matchers belong? At the moment there is no way to test something as simple as \"Is the domain name of this server correct?\"\n. I see what you mean. Giving it some thought, I think \"enabled\" is tricky when it's applied to a network interface; most people would naturally call an interface \"up\" or \"down\", so that strikes me as the most natural mapping when writing Serverspec tests. There's also a slight problem that \"enabled\" may be an overloaded term; certainly on Cumulus Linux, but even on plain Linux, \"enabled\" may be confused for \"exists\". \"exists\" and \"up\" seem less ambiguous?\nIf you have very strong feelings on this then I'd be happy to make the change though, but I think \"be_up\" might be better for things like network interfaces.\n. ",
    "AnneTheAgile": "This is neat, ty @Vanders and @mizzy !\n. ",
    "sax": "We were a bit confused about how to run tests, so we guessed at the unit test. We're about to issue a pull request on the integration test repo as well.\n. \\cc @grepory\n. ",
    "tyler-ball": "I understand now why the extend is necessary.  Rspec only calls load on the spec files - it does not evaluate them in the scope of an instance, class or module.  Therefore, for file to be a valid method it must be defined on the main object which is done by extending the serverspec Helpers in the top level object.\nI was playing around with RSpec and their DSL does the same thing with its expose_dsl_globally logic.  They extend the top level class (will be main if rspec is run from the command line) and Module with their DSL.  If you add\nRSpec.configure do |c|\n  c.expose_dsl_globally = false\nend\nto your spec_helper.rb and try to run rspec from the command line, it barfs because describe is an unrecognized method.\nThe way we got around the DSL collision is by calling require 'serverspec/helper' inside a class devoted to running Serverspec.  The extend at this point only modifies this object and not the top level main object.\n. ",
    "mikeda": "be_mounted\u306b\u30e0\u30ea\u306b\u5408\u308f\u305b\u308b\u3088\u308afstab\u306e\u307b\u3046\u304c\u81ea\u7136\u3067\u3042\u308b\u3001\u3068\u3044\u3046\u306e\u306f\u78ba\u304b\u306b\u305d\u3046\u3067\u3059\u306d\u3002\n\u305d\u306e\u524d\u306b\u3001\u3053\u3053\u307e\u3067\u306e\u62bd\u8c61\u5316\u306f\u4e0d\u8981\u3067file\u306econtent\u30de\u30c3\u30c1\u3067\u5145\u5206\u3067\u306f\u306a\u3044\u304b\u3068\u3044\u3046\u6307\u6458\u306b\u3064\u3044\u3066\u3001  \u3053\u3053\u306f\u81ea\u5206\u3082\u8ff7\u3063\u3066\u3044\u305f\u3068\u3053\u308d\u3067\u3001\u73fe\u6642\u70b9\u3067mizzy\u3055\u3093\u304c\u4e0d\u81ea\u7136\u3060\u3068\u601d\u3046\u306e\u3067\u3042\u308c\u3070\u3053\u306e\u30d7\u30eb\u30ea\u30af\u306f\u53d6\u4e0b\u3052\u3055\u305b\u3066\u4e0b\u3055\u3044\u3002\n\u6b21\u304b\u3089\u306f\u3082\u3046\u5c11\u3057\u3001\u4ed6\u306e\u30de\u30c3\u30c1\u30e3\u306e\u8a2d\u8a08\u306b\u5408\u308f\u305b\u308b\u3088\u3046\u306b\u8003\u616e\u3057\u307e\u3059\u3002\n\u30ec\u30d3\u30e5\u30fc\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n. \u3044\u308d\u3044\u308d\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\nbe_auto_mounted \u3060\u3068\u3001\u540d\u524d\u3068\u5b9f\u614b\u304c\u4e56\u96e2\u3057\u3066\u3001\u5b9f\u969b\u306b\u4f55\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u304b\u304d\u3061\u3093\u3068\u628a\u63e1\u3057\u306b\u304f\u3044\u306e\u3067\u306f\u3001\u3068\u3044\u3046\u306e\u304c\u61f8\u5ff5\u3067\u3059\u306d\u3002\u3053\u308c\u3060\u3068\u3001\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u308b\u304b\u3069\u3046\u304b\u306e\u30c1\u30a7\u30c3\u30af\u307e\u3067\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u306f\u3001\u3068\u601d\u308f\u308c\u3066\u3057\u307e\u3044\u305d\u3046\u3067\u3059\u3057\u3002\n\n\u305d\u3046\u3067\u3059\u306d\u3002\u307e\u3060be_mount_enabled\u306e\u307b\u3046\u304cservice\u7b49\u3068\u5408\u3063\u3066\u3066\u7406\u89e3\u3057\u3084\u3059\u304b\u3063\u305f\u304b\u3082\u3067\u3059\u306d\u3002\n\n\u306a\u306e\u3067\u3001\u3042\u308b\u7a0b\u5ea6\u62bd\u8c61\u5316\u3057\u3064\u3064\u3082\u3001\u62bd\u8c61\u5316\u3057\u3059\u304e\u305a\u306b\u3001\u5b9f\u88c5\u304c\u60f3\u50cf\u3067\u304d\u308b\u3082\u306e\u304c\u671b\u307e\u3057\u3044\u3067\u3059\u306d\u3002\u305d\u3046\u3044\u3046\u610f\u5473\u3067\u306f\u3001\u4e0a\u3067\u66f8\u3044\u305f\u3088\u3046\u306a\u3001fstab \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3092\u5b9a\u7fa9\u3059\u308b\u3001\u3050\u3089\u3044\u304c\u3001\u30d0\u30e9\u30f3\u30b9\u304c\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3002\u62bd\u8c61\u5316\u3057\u3064\u3064\u3082\u3001/etc/fstab \u306e\u4e2d\u8eab\u30c1\u30a7\u30c3\u30af\u3057\u3066\u308b\u3093\u3060\u308d\u3046\u306a\u3001\u3068\u3044\u3046\u306e\u304c\u900f\u3051\u3066\u898b\u3048\u308b\u306e\u3067\u3002\n\n\u3053\u3053\u306e\u52a0\u6e1b\u306b\u3064\u3044\u3066\u306f\u4e86\u89e3\u3057\u307e\u3057\u305f\u3002\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u8fd1\u3044\u3046\u3061\u306bfstab\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3067\u518d\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\uff01\n\u4ee5\u4e0b\u3001\u53c2\u8003\u307e\u3067\u306b\u8a2d\u8a08\u306e\u7d4c\u7def\u3067\u3059\u3002\nchef\u306e\u3053\u3046\u3044\u3046recipe\u306b\u5408\u308f\u305b\u3066\u3001mount\u3068fstab\u3092\u30bb\u30c3\u30c8\u3067\u30c6\u30b9\u30c8\u3057\u305f\u3044\u306a\u3001\u3068\u3044\u3046\u306e\u304c\u307e\u305a\u3042\u3063\u3066\u3001\nruby\nmount '/mnt' do\n  device '/dev/sda1'\n  action [ :mount, :enable ]\nend\n\u6700\u521d\u306f\u3053\u306e2\u3064\u3092\u8003\u3048\u305f\u3093\u3067\u3059\u304c\u3001\n``` ruby\ndescribe file('/mnt') do\n  it do\n    should be_mounted\n      .with(:device => '/dev/sda1')\n      .enable(:dump => 0, pass => 2)\n  end\nend\ndescribe mount('/mnt') do\n  it { should be_mounted(:device => '/dev/sda1' }\n  it { should be_enabled(:device => '/dev/sda1' }\nend\n```\n1\u3064\u76ee\u306foption\u306e\u7d71\u4e00\u7684\u306a\u53d6\u308a\u6271\u3044\u3001fstab\u5358\u4f53\u306e\u30c6\u30b9\u30c8\u3001\u7b49\u306b\u61f8\u5ff5\u304c\u3042\u308a\u30012\u3064\u76ee\u306f\u65e2\u5b58\u5b9f\u88c5\u3092\u7121\u8996\u3057\u3059\u304e\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u4eca\u56de\u306e\u5f62\u306b\u306a\u3063\u3066\u307e\u3057\u305f\u3002\n. \u3054\u8a8d\u8b58\u306e\u3068\u304a\u308a\u3067\u3059\uff01\u305d\u3053\u307e\u3067\u8003\u3048\u3066\u306a\u304b\u3063\u305f\u3068\u3044\u3046\u306e\u3082\u591a\u3044\u3067\u3059\u304c\uff01\nmount\u30c1\u30a7\u30c3\u30af\u3068fstab\u30c1\u30a7\u30c3\u30af\u3067\u3001\n1. \u30c6\u30b9\u30c8\u81ea\u4f53\u306f\u5225\u306b\u6307\u5b9a\u3001\u5b9f\u884c\u3055\u308c\u308b\u3079\u304d\n2. \u904b\u7528\u4e0a\u306e\u6982\u5ff5\u3068\u3057\u3066\u306f\u304b\u306a\u308a\u8fd1\u3044\u306e\u3067\u3001\u540c\u3058\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3067\u30c6\u30b9\u30c8\u3057\u305f\u3044\n\u3068\u3044\u3046\u306e\u304c\u3042\u3063\u3066\u30012\u306e\u307b\u3046\u306f\u4eca\u3067\u3082\u60a9\u307e\u3057\u3044\u306a\u3068\u601d\u3063\u3066\u307e\u3059\u3002\n\u305f\u3060mount\u30bf\u30a4\u30d7\u3092\u4f5c\u308b\u306b\u305b\u3088file\u306b\u30de\u30c3\u30c1\u30e3\u3092\u8ffd\u52a0\u3059\u308b\u306b\u305b\u3088\u3001\u540c\u3058\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u306b\u3057\u3066\u30821\u304c\u3042\u308b\u3068\u305d\u3053\u307e\u3067\u3044\u3044\u611f\u3058\u306b\u306a\u3089\u306a\u305d\u3046\u3067\u3059\u3057\u3001\u305d\u306e\u4ed6\u306e\u8b70\u8ad6\u4e8b\u9805\u3082\u5408\u308f\u305b\u308b\u3068fstab\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u6848\u304c\u73fe\u5b9f\u7684\u306a\u3068\u3053\u308d\u3067\u3057\u3087\u3046\u304b\u3002\n``` ruby\ndescribe mount('/mnt') do\n  it do\n    should be_mounted.with(\n      :device => '/dev/sda1',\n      :type => 'ext4',\n      :options => {\n        'rw' => true,\n        'relatime' => true\n      }\n    )\n  end\nit do\n    should be_enabled.with(\n      :device => '/dev/sda1',\n      :type => 'ext4',\n      :options => {\n        'defaults' => true\n      },\n      :dump => 0,\n      :pass => 2\n    )\n  end\nend\n```\n. ",
    "i11": "totally missed it. thanks!\n. ",
    "vncntvandriessche": "Thanks, I'll use this method.\n. @SydOps Not sure I quite understand how this problem relates to bindports in docker? Seems like your service isn't running inside the container?\nHave you checked out the ldap service's logs?\n. ",
    "ozbillwang": "@vncntvandriessche & @mizzy  \nI'd like to test the ldap service running in container and listening on the ports 389 and 636, seems there is no report from docker inpsect to confirm if real ldap sevice running and port is listened in container.\nPort binding doesn't indicate the ports are in listen status.\nAny idea?\n. ",
    "ryandoyle": "As expected, the PR failed until serverspec/specinfra#378 is merged\n. Hi @mizzy I will update serverspec to use the its syntax. \nThe question I have is: Is it really worth adding the extra abstraction with specinfra? Am I better off just running the command?\nEG:\ndef minimum_password_change_days\n  @runner.run_command(\"chage -l #{@name} ...\")\nend\nOr should I still do it via specinfra?\ndef minimum_password_change_days\n  @runner.minimum_user_password_change_days(@name)\nend\nLooking at a recent example, x509_certificate, it uses the @runner.run_command directly. And from what I can tell its not generic either - it requires that the system is a *nix based system.\nIt seems there is some inconsistency in regards to what uses specinfra abstractions and what doesn't.\n. I've updated both serverspec and specinfra for now. I've changed the syntax to:\ndescribe user('ryan') do\n  its(:minimum_days_between_password_change) { should == 0 } \n  its(:maximum_days_between_password_change) { should == 99999 }                                                                                                                                  \nend\n. Hi @mizzy, as a native english speaker, minimum_days_between_password_change sounds more correct. \nAlso, I am basically using the same language that is used when running chage. See below as an exmaple\n~ $ chage -l ryan\nLast password change                    : Dec 04, 2013\nPassword expires                    : never\nPassword inactive                   : never\nAccount expires                     : never\nMinimum number of days between password change      : 0\nMaximum number of days between password change      : 99999\nNumber of days of warning before password expires   : 7\n. Thanks, I'll issue a pull request tonight to add the documentation to the website as well\n. ",
    "jhoblitt": "Depends on https://github.com/serverspec/specinfra/pull/384\n. @mizzy What is the correct way to test for the non-existence of a file?\n. @mizzy I thought it was just a simple oversight since many of the other base types respond to exists?.  I've added a description to the PR, please let me know if that is sufficient  A negative test isn't included because the test harness is hard-wired to have all the [specinfra] checks pass.\n. @mizzy Thanks!\n. @conorsch your welcome!\n. ",
    "conorsch": "@jhoblitt Thanks for this! It's frustrated me in the past, too.\n. ",
    "spk": "But we can write:\nruby\nit { should_not exist }\nThanks\n. ",
    "renet": "How can I use its(:content), if I'm using it inside a command resource type like\nruby\ndescribe command('[command to get some http reponse headers]') do\n  # test 'http://domain/' exists between \"Location\" and \"Connection\".\n  its(:stdout) { should contain('http:\\/\\/domain\\/').from(/Location/).to(/Connection/) }\nend\n?\n. Thanks for your solution! I found a similar solution myself already using \"match\".\nMy code fixes the method to work with patterns that contain slashes. As in the old version you replaced all occurences of \"/\" with \".*\", all slashes in the variable pattern (e.g \"http://domain/\") got replaced and caused the match to fail.\n. ",
    "ihassin": "Thank you and sorry for the bother. As I said, I'm getting many errors.\nWhat else is needed if clone the repo and run rspec? I'm on a Mac with rspec 3.\nThanks,\n- itamar\nOn Sep 24, 2015, 9:53 PM -0400, Gosuke Miyashitanotifications@github.com, wrote:\n\nClosed#537(https://github.com/mizzy/serverspec/pull/537).\n\u2014\nReply to this email directly orview it on GitHub(https://github.com/mizzy/serverspec/pull/537#event-418752032).\n. Sorry about these messy commits. Basically this PR is:\n1. No more warnings when running rSpec (fixed expectations when expecting exceptions)\n2. Added tests for setup.rb\n3. Refactored setup.rb as a first step in my wish to modify it to accept command-line params in addition to the interactive mode (menu, user input).\n4. Messed around with suppressing stdout in rSpec, but removed it since some calls were incompatible with 1.8.7. Thanks Travis!\n\nAnyway, I will make sure to have cleaner commits and PRs in the future.\nThanks!\nItamar\n. Hi Mizzy,\nPlease tell me which part you're against:\n1. Fixing the warnings caused by some rSpecs?\n2. Adding tests to setup.rb and refactoring some functions there?\nI'll adapt accordingly,\nThanks,\nItamar\n. Got it, will do.\n. Hi Mizzy, any chance you'll accept this PR?\n. Hi Mizzy,\nMy motivation is to be able to run serverspec-init from the command line, without the interactive session.\nSomething like serverspec-init -s unix -c ssh -v true, etc, to be able to incorporate ServerSpec in Infra as code scripts running headless.\nBefore attempting that, I wanted to make sure I don't break anything, hence the tests. Once I wrote the tests, I saw opportunity for the refactoring and did so.\nSo what do you say about a command-line interface?\n. ",
    "stuartpreston": "I don't know why this is breaking the Appveyor build... It is only a change to the Windows readme.\n. ",
    "DarrellMozingo": "Fixed the extra private. Did't know if you'd rather be more explicit\n. ",
    "rebyn": "Hi,\nam thinking about adding more Docker matchers to serverspec, ie:\n- port mapping\n- links\n- restart policy\n- env variables\nWant to ask for your thoughts before moving on, since I can see Docker support has been added a while ago but the number of matchers is limited. Is there a reason to that?\nCheers,\nTu.\n. :+1: yup, I guess that'll do.\n. ",
    "njam": "Check out my cool gem to show output in real-time!!\u00a8\u00a8\u00a8 https://github.com/cargomedia/komenda :P\n. You could use php --ri, which has proper exit code.\n. ",
    "twolfson": "Ah, k. I chose those to keep things consistent in the repo. We could also use an attr_alias but I will update the names to owner/group for now =)\n. I have applied the updates to this PR\n. Ah, sure thing. I will update that.\n. I started moving to an octal but the error messages from failing test suites have become less useful:\n```\n     Failure/Error: its(:mode) { should eq 00644 }\n   expected: 420\n        got: \"644\"\n\n```\nThe 420 in that statement is 00644 being parsed by Ruby. I suggest we rethink moving from octal to string. If someone wants to use an actual octal, then 00644.to_s should suffice.\n. Any new thoughts on this?\n. Oh, heh. I didn't realize I broke the build. Yep, I will push a patch shortly.\n. Alright, I have updated the code so it should be green in Travis CI now\n. I tried to avoid using let(:stdout) but couldn't seem to get it working otherwise. I'm still not sure how the be_mode and be_owned_by matchers are working =/\n. ",
    "RageZBla": "Your idea is better, I'll modify my PR tonight. \n\nOn 2015/12/23, at 14:41, Gosuke Miyashita notifications@github.com wrote:\nphp_config and php_ini have similar functions. It's confusing.\nI'd like to avoid it.\nHow about extending php_config like this ?\ndescribe php_config('session.cache_expire', :ini => '/etc/php5/fpm/php.ini') do\n    its(:value) { should eq 180 }\n  end\n\u2015\nReply to this email directly or view it on GitHub.\n. Hey @mizzy,\n\nI have updated the PR, if you have any feedback let me know.\n. @mizzy here you go!\n. Thanks! \n\nOn 2015/12/24, at 20:16, Gosuke Miyashita notifications@github.com wrote:\nMerged #548.\n\u2015\nReply to this email directly or view it on GitHub.\n. \n",
    "rsanda": "Hi Mizzy,\nThank you for the advice. I changed the as u suggested, but it fails to read the file. The error is,\n```\nFailure/Error: its(:value) { should eq \"test1\" }\n   expected: \"test1\"\n        got: 0\n\n   (compared using ==)\n   /bin/sh -c cat\\ \\'\\'\\ 2\\>\\ /dev/null\\ \\|\\|\\ echo\\ -n\n\n```\nI am not familiar with Ruby. Do you have any idea about this error?\nthank you.\n. The config file location is different in separate Hadoop distributions. That's why I thought it's better to specify the file. Also, there are multiple config files related to Hadoop, so specifying the file allows us to reuse the same thing.\n. Yes, there are default paths. I thought it would be convenient if the filename is specified when writing the test, but you want to support the default settings, am I correct?\nThere are hdfs-site.xml, mapred-site.xml, core-site.xml, hadoop-policy.xml, yarn-site.xml that contain configurations. Do you suggest that there should be separate resource types for each file? (I'm trying to understand the concept behind this, don't get me wrong).\nthanks\n. I've changed to search all xml files for the given config. Thank you for your help.\nBut, if a test fails it prints the whole xml file, is there anyway to limit that?\n. Thanks a lot for the help!\n. Hi\nThank you very much for the feedback. I will update the code.\nCurrently, the XML file name is fixed. Is there any efficient way to make this applicable to any XML file?\nThank you.\n. ",
    "jzohrab": "Had a thought that you might prefer a change more like the following to support how the code was originally:\nerror_lines = failure_slash_error_lines if defined?(failure_slash_error_lines)\nerror_lines ||= [failure_slash_error_line] if defined?(failure_slash_error_line)\nIf yes, let me know and I'll resubmit.\n. Ack, thanks @mizzy, will do.  We should change this to work with the public API ... do you have ideas on that, or have you been having discussions with the rspec-core team?  I can open an issue to request that this be exposed, though they may come back with other requests.  I think they're open to expanding their API, per the response to the tweet above.\n. Closing in favor of https://github.com/mizzy/serverspec/pull/554.\n. We should still talk with the rspec-core team, I think they're open to expanding their API.  I've opened up issue https://github.com/rspec/rspec-core/issues/2169 there.\n. Hello @mizzy - I opened issue 2169 in rspec-core, and have been asked what you need to ensure you're not monkeypatching private methods and data.  That issue has been closed, but if you drop in and add a note then you may be able to get them to make changes to get the data you need in a way that will be supported in the future.  Thanks! jz\n. ",
    "coderanger": "Not sure why this was merged, this patch doesn't seem correct for any current case.\n. ",
    "mschuchard": "Thanks for the link to the documentation.  I was unaware of its location and will add an entry soon.\n. ",
    "thedrow": "Looks like AppVeyor doesn't support 2.3 yet.\nShould I remove the build job for now?\n. Done.\n. RubyInstaller just shipped with 2.3 https://github.com/oneclick/rubyinstaller/issues/302#issuecomment-205620480\nShould I issue a new PR?\n. Not sure why AppVeyor didn't download the new ruby version?\nDo they have to make a new image?\n. You need to set the backend to LXC. I'm currently using Ruby 2.5.\nruby\nset :backend, :lxc\nset :lxc, \"container name\"\nThen, any test triggers this error. . I am not testing nested containers. Exec wouldn't work since I want to check if files exist and their contents without having to point serverspec to the rootfs.\nIt is also impossible to (easily) check if services are running or if a package is installed from outside the container.\nI think the LXC backend should be supported just like any other backend.. Thank you :). Thanks!\nI can confirm your fix works.. ",
    "till": "@mizzy done!\n. @mizzy Thanks! :)\n. Just fyi, yeah, the error message pops up in stdout. And the return value is also 0, despite it being an error.\n. @njam perfect, I amended it.\n. Made this > 0 to account for whatever other non-zero exit code there could be.\n. ",
    "takaishi": "Thank you comment.\nI fixed it !\n. ",
    "nishidayuya": "Thank you!\n. ",
    "hanazuki": "Thank you!\n. ",
    "jules2689": "@mizzy I do not see how my local Gemfile affects a production release of this file, which relies on the gemspec. My local Gemfile is up to date, but the gemspec should be updated and a new version released to accommodate the bugfixes in specinfra. no?\n. Fair, The ~> notation confuses me sometimes. sorry bout the confusion there\n. ",
    "StefanScherer": "@sawanoboly Thank you. This commit helped me making my serverspec tests work again in AppVeyor.\nIt seems to me that the problem is the new PowerShell 5. I've seen this issue in Vagrant and Packer as well. How could be serverspec fixed to work with PowerShell 5 as this PR seems to be a workaround, using the previous version of AppVeyor's build image?\nHas it to do something with a missing $ProgressPreference = 'SilentlyContinue' or using  winrm v2 ruby gem as mentioned in https://github.com/mefellows/vagrant-dsc/issues/21#issuecomment-235972484 ?\nSorry, I don't know all the details how serverspec/rspec runs the windows tests locally. I just use\nruby\nset :backend, :cmd\nset :os, :family => 'windows'\n. @sawanoboly Thank you for the link! So AppVeyor is investigating the problem as well.\nAs far as I understood the discussion in packer and vagrant was that PowerShell has another stream for progress, not just stdin and stderr. And that gets mixed into the other streams.\n. Using the previous AppVeyor image does not work any longer for us. We use this workaround at the moment to add -NoProfile -encodedCommand to specinfra.\npowershell\nWrite-Host \"Patching specinfra for AppVeyor\"\n(Get-Content vendor\\bundle\\ruby\\2.2.0\\gems\\specinfra-2.63.1\\lib\\specinfra\\backend\\cmd.rb) |\n  Foreach-Object {$_ -replace '-encodedCommand', '-NoProfile -encodedCommand'} |\n  Out-File -Encoding ascii vendor\\bundle\\ruby\\2.2.0\\gems\\specinfra-2.63.1\\lib\\specinfra\\backend\\cmd.rb\n. See also PR https://github.com/mizzy/specinfra/pull/584\n. ",
    "moritzheiber": "I don't think the failing checks are related to my PR. Should I fix them anyway? :wink: \n. ",
    "agx": "Not needed when we handle LibvirtLXC in LXC as @mizzy suggested in https://github.com/mizzy/specinfra/pull/585\n. ",
    "eherot": "So fast! \ud83d\udd25 \n. Derp. #580 definitely won't do anything without this.\n. ",
    "azban": "\ud83e\udd18 \n. ",
    "ghoneycutt": "Thank you very much! If you could point me toward the repo with the web site, I'll be happy to send a PR to update the docs.. ",
    "bcorner13": "This doesn't work for entries created with the crond chef resource.  Those entries get put in /etc/cron.d/.. ",
    "yukaReal": "Hi!\nGreat. I'll work on it.\nThanks.\nOn 07/05/2017 06:09 PM, Gosuke Miyashita wrote:\n\nSSM would be interesting. I will accept if you will create SSM backend.\nYou can extend serverspec without module structure like this.\nhttps://github.com/jantman/serverspec-extended-types\nSo I will not make serverspec support module structure for now.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub \nhttps://github.com/mizzy/serverspec/pull/592#issuecomment-313240856, \nor mute the thread \nhttps://github.com/notifications/unsubscribe-auth/AEok6IFnsrELJQOsUGpzUWTzbykfsHkyks5sLAmYgaJpZM4OOqej.\n\n\n-- \nThanks,\nYuriy Yankop\n. ",
    "stale[bot]": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n. This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n. This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n. This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n. ",
    "tohta": "As discussed on https://github.com/mizzy/specinfra/pull/649, this change is no longer needed.\nThanks.. ",
    "IRobL": "Oops, not only is it not quite 1.8.7 compatible, but there's likely a bug in how timezones are parsed which I'll have to correct in the next day or so.  . good notes, will sort things out this morning I think, but I'm not sure how I can generalize the work I'm doing with the service type to make it work for systemd and other daemon managers.  Any advice there?  . #602 addresses the PR naming problem and usage is more friendly, eg\nits(:uptime) { should be > 4 }\nI still don't fully see how the framework gets general information about services.  Do you think it would be nice for on a systemd based server, described_class.inspection would display detailed information, whereas on a sysVinit, in the meantime (due to time constraints) it would display a not implemented notice?  . Is this what you had in mind?  \nAlso, unrelated, if one needed to interrogate an http endpoint on the server, to ensure it had the correct json response, would it be ideal to create a json_enpoint resource that made json responses from http.  I'm finding myself doing a lot of crude command(\"curl localhost:2232/api/v1/datasource\") and would like something such as its(['datasources']['importantone']) { should be \"online\" }. ",
    "repeatedly": "ret = nil is better?\n. ",
    "bitglue": "I was a bit reluctant to remove this, but it wasn't a documented or tested behavior, and didn't seem terribly useful.\n. ",
    "benningm": "This commit started mixing name and subject:\nhttps://github.com/mizzy/serverspec/commit/12b917bca30a4879283ce9edd8cc54d33c444190\nBefore it was called name. So I changed it to 'name'.\nOf course we can also rename it to subject. I'll add another commit.. "
}