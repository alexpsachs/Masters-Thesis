{
    "igrigorik": "Awesome, thanks Chris! Still trying to find my way around with Go.. :)\n. thanks!\n. thanks!\n. https://github.com/igrigorik/ga-beacon/commit/4b08c16967c67d835231d072b093d050fafbd945 :-)\n. I don't think these are related - that's a GH bug. \n\n^ You can see the beacon image completing, and that has nothing to do with ghconduit.com.\nThat said, there is a different issue here... GitHub recently began proxying HTTPS content as well, which means pixel beacons would not git the appspot instance after they're cached, which breaks the reporting.\n. @paulcbetts any reason why you can't catch the error? \ntry {\n  xhr.send();\n} catch(exception) {\n  if(exception.name == 'NetworkError') {\n    console.log('There was a network error.');\n  }\n}\n. yes. it should.\nOn Sat, May 3, 2014 at 12:08 PM, Paul Betts notifications@github.comwrote:\n\n@igrigorik https://github.com/igrigorik Will that suppress it from\nshowing in the console though?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/igrigorik/ga-beacon/issues/7#issuecomment-42113654\n.\n. It suppressed the error for me? Note that my example is not using onerror.\n\nOn Sat, May 3, 2014 at 1:31 PM, Joshua Peek notifications@github.comwrote:\n\n@igrigorik https://github.com/igrigorik net::ERR_CONNECTION_REFUSEDisn't a DOM exception. Its logged via the Chrome dev tools. Even when the\nXHR has a onerror handler implemented.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/igrigorik/ga-beacon/issues/7#issuecomment-42115619\n.\n. Beautiful! Great work. Instead of using svg as a new flag we could probably do pixel=svg... or, just use SVG by default.\n. The one downside is much larger donwload. Gif is tiny.. Hmm.\n. - GIF is 35 bytes: https://raw.githubusercontent.com/igrigorik/ga-beacon/master/static/pixel.gif\n- compressed SVG is 393 bytes\n\nThere is an order of magnitude difference.\n. facepalm ... you're right!\nMade SVG the default badge: https://github.com/igrigorik/ga-beacon/commit/f0dca65c452b33a8466ba037619930796ed08c72\n. Hmm, that's more of a sheets bug.. Hopefully they'll upgrade older users soon! In the meantime, one workaround is to add ?pixel to the request, which will force a transparent GIF.\n. Looking at the protocol, dh should do the trick:\nhttps://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#dh\nIf you're running own copy of the collector, you could easily augment current code to accept a hostname. Here's the relevant initialization code: \nhttps://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L60\n. This should be available now, via: http://ga-beacon.appspot.com/account/UA-XXXXX-X/page-name?dh=foo.com\n. > Is it possible to create a gif URL that directly calls the GA servers without using the univeral .js file?\nThat's exactly what ga-beacon is doing. There is no javascript involved here. Instead, ga-beacon reports the data directly to Google servers via the GA measurement protocol. \nAs for reporting page titles, yes that's definitely something you could do:\nhttps://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#dt\n. You can initialize page title via: http://beacon-thing.com/account/UA-XXXXX-X/path-to/page?dt=\"Page Title\"\n. From the readme:\n\nIf you prefer, you can skip the badge and use a transparent pixel. To do so, simply append ?pixel to the image URL.\n\n:)\n. We do passthrough the user-agent string from the original client to GA, so I'd expect GA to handle this.. That said, you can add some additional logic on your side (within the beacon) to discard hits based on UA-string and/or any other signals. FWIW, might be worth investigating: http://www.lunametrics.com/blog/2013/09/05/filter-bots-google-analytics/\n. lgtm, thanks!\n. @thdoan use the \"realtime\" report to see activity data in... real-time: https://support.google.com/analytics/answer/1638635?hl=en#SeeData\n. @bobbyjum make sure you change your report date to include today. By default, GA shows data from past day and before. \n. Looks reasonable. If you beat me to it.. happy to accept a pull for it :)\n. Resolved in https://github.com/igrigorik/ga-beacon/commit/2173c8aedf304dbf4539cc4be754bb28f44ff44d. Note that I've changed the logic to be more generic: you can use query params to passthrough any values to the collector. \nTo report an event, an example would be: http://ga-beacon.appspot.com/account/UA-XXXXX-X/event?t=event&ec=category&ea=action&el=label&ev=value\n. Sure. Want to make a pull request? :)\n. thanks!\n. Fixed the compile error in https://github.com/igrigorik/ga-beacon/commit/43a9c22a26dc8974db8efbbe5f03fc46ec6b04bd - thanks for the heads up.\nI am seeing hits from ga-beacon.appspot.com in my own GA account. Are you sure you're setting the right property ID in your tests? Also, make sure you're using real-time analytics when checking for the hits.\n. @hwdsl2 the real-time tab in GA should show data in... real-time.\n. @monolithed please check your real-time analytics.\nClosing this bug since original issue was fixed.\n. @hwdsl2 ah, that makes sense -- thanks for the heads up!\n. Does GitHub's proxy communicate the client IP via an extra header, or some such? Currently it simply checks the remoteAddr value: https://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L136\n. @atmos does GitHub's camo deployment forward the client IP? Can't find anything in the docs: https://help.github.com/articles/why-do-my-images-have-strange-urls/\n. @atmos interesting, thanks. In which case, closing this.. since there isn't much we can do here.\n. Your repo name is the last bit in your project URL.. e.g. for this project its \"ga-beacon\". Page-name you can set to anything you want.\n. Yes, you have to manually embed it into each file you want to track. If/when someone forks.. the same beacon will carry over to their fork. However, you won't see the  fork as a separate page, because the beacon is hardcoded and wouldn't reflect their username, etc. This is a limitation of not being able to run JS, there is no way around this.\nP.s. Except, of course, GH does offer own analytics nowadays, so you might want to check that out.\n. See the note at the top of: https://github.com/igrigorik/ga-beacon#hands-on-example-google-analytics-for-github\n. No, it does not. It simply says that as a developer you're responsible for notifying your users if, when, and how you're tracking their behavior in your apps... and providing opt-outs as necessary. The underlying collection mechanism is orthogonal (ga-beacon or anything else).\n. Not familiar with that plugin -- maybe, maybe not. You could also add code on your side that omits inserting the tracker based on user preference.\n. In which case you should add a note explaining that the tracker is being used. The user can adjust their settings to block that request, if they wish.. E.g. via adblock or something else.\n. </facepalm>... my bad guys; the default version was still set on old release. Should be fixed now.\n. AFAIK, that's not sufficient as the beacon image will be cached. See https://mashe.hawksey.info/2014/02/tracking-google-sheet-views-with-google-analytics/ \n. You should always request the HTTPS resource: protects user privacy; doesn't break when a web mail client is accessed over HTTPS (otherwise it would be blocked due to mixed content).\n. @JHGrove3 follow the steps in: https://cloud.google.com/appengine/docs/go/gettingstarted/uploading - except, you want to check out this repo, rename the project to your own name... and upload. That's basically it.\n. You probably want to set your default URL to ga-beacon.appspot.com/UA-XXXXX-XX/. I believe that should fix it..\n. Cool, glad to hear!\n. @olivdee FWIW, I would recommend cloning the repo and deploying own instance of this service under your own account (just change the project name). That will give you full visibility into the logs and all the hits.\n. We may be hitting the free GA beacon limit on app engine. For best results, clone the repo and deploy your own copy.\n. Unfortunately this is due to a change in how GitHub serves images. I've updated the readme to address this: https://github.com/igrigorik/ga-beacon/commit/6acd8627bb7be36f24f5516e9873c92719a50e55\n. @gregmoser :+1:\nThis service is meant as a demo, not an official GA endpoint. @markmcd please consider running your own instance. This is a wontfix on this end.\n. Thanks!\n. I'm not convinced this does what you think it does.. As in, you parse out Referer value, but that value is not used anywhere meaningful.\nAlso, while I understand the high-level convenience: initialize path from referrer if no path is given, in practice you can't count on the Refer being there due to cross-origin and cross-protocol (http -> https) fetches. Given that, we want to encourage folks to specify the path when recording a hit, and that hit path should override referer.. So, I'm not convinced that this is necessary at all? =/\n. FWIW, browsers do expose a way to control the referer policy: https://www.w3.org/TR/referrer-policy/\n\nFor example, I have a lot of ebay posts; is was virtually imposible to add the path in each and every one. With this, I only copy-pasted the beacon img.\n\nAh, ok, I see what you're after. However, I'm still not convinced the code is doing what you want it to do,  because you're attempting to render an HTML page in response to an img request?\nIt seems like what you want is: \n- allow /{valid-GA-account}/hits\n- if no path is given, fallback to Referer\n- if path is present, use that override Referer\n. > The HTML page was already in the code. It seems that works as some kind of error handling. I guess that we can return the page only when some \"debug\" parameter is sent; and if no debug paramente is sent but it fails, just return a status code of 500 or 404. What do you think?\nThe page was there simply as a landing page for GA, such that when you setup the account you can point to it and let GA verify that your tracker is \"installed\". \nI think the new behavior we want is:\n- /UA-xxxxxxx - shows account template page; same behavior as now.\n- /UA-xxxxxxx/page - creates a hit with page path set to \"/page\"\n- /UA-xxxxxxx/page?useReferrer - set page path to value in Referrer header, and if Referrer is missing then fallback to \"/page\"\nThe above is different from what I suggested earlier, but I think it works for your use case. The benefit is that we always have a fallback value, even if Referrer is missing.\nDoes that make sense?\n. @Guisardo been swamped. If you have bandwidth, please take a run at it. \n. @Guisardo thanks for working on this. Overall, I think this is good. A few comments/nits above.\n. :+1: thanks for working on this!\n. @MarkEdmondson1234 good question, not sure.. @philipwalton any insights on this one?\n@vitr yeah, that's a separate topic, see: https://github.com/igrigorik/ga-beacon/commit/6acd8627bb7be36f24f5516e9873c92719a50e55\n. @philipwalton we do set the IP and UA overrides:\n- https://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L83\n- https://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L58\n@MarkEdmondson1234 any updates on this one? Anything actionable for ga-beacon?. @MarkEdmondson1234 thanks for the update, makes sense.\nRe, GitHub: there may be a workaround.. see https://github.com/igrigorik/ga-beacon/issues/47. \nThat said, closing this thread, as there is nothing ga-beacon actionable here.. @good-kiwi see second point in the FAQ: https://github.com/igrigorik/ga-beacon#faq - we use the collector protocol under the hood, but that's not sufficient on its own.\n. We do report the IP address of the user: \n- https://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L83\n- https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#uip\nGeo reporting should work.\n. Closing, please reopen if this still an issue.. \ud83d\udc4d \nAny chance you'd be up for putting together a PR? :). FWIW, for the purpose of our use case.. we don't want the response to ever be served from cache. As such, using no-cache and unique ETag on each request is both simplest and easiest. . Resolved via https://github.com/igrigorik/ga-beacon/pull/54.. It appears that the demo instance is hitting its daily free quota limits on AppEngine, which is most likely why you're seeing this.  Note that the demo instance is just that.. a demo, no reliability guarantees. \nA simple fix is for you to deploy own GAE instance, the free tier should be plenty for most use cases. \n. AFAIK, this method will not work with Google Docs, because docs caches the image response.. Unfortunately.. no. If you stumble across a solution, please let me know!. @Ouaps please see https://github.com/igrigorik/ga-beacon/blob/master/README.md#can-i-use-this-production. Thanks!. This would imply that the beacon has to proxy arbitrary content from third-party origins, which is both very costly and not necessarily safe. I'm inclined to say that this is not something we want to support or enable.\nThanks for the suggestion!. Related discussion: https://github.com/igrigorik/ga-beacon/issues/47 -- that thread was leaning towards CC and dynamic ETag. Hmm?. After re-reading https://github.com/github/markup/issues/224.. I'm still confused by what Fastly is looking for. Also, the docs linked to in that thread are now out of date, which doesn't help.\n@triblondon can you chime in here? What should we be setting here? Is CC: no-store sufficient?. @triblondon thanks!\nBy the sounds of it, the policy we want is Cache-Control: private, no-store, and we can (hopefully) skip the etags, etc. @anthonyraymond wdyt, does that make sense to you?. Awesome -- thank you!. AFAIK, this is a problem with your GOPATH. Take a look at Go documentation: https://github.com/golang/go/wiki/GOPATH. @kshitijb interesting. If that's the case, can you make a PR so we can land this here too?. PTAL here: https://stackoverflow.com/questions/15130321/is-there-a-method-to-generate-a-uuid-with-go-language :). Awesome, thanks Chris! Still trying to find my way around with Go.. :)\n. thanks!\n. thanks!\n. https://github.com/igrigorik/ga-beacon/commit/4b08c16967c67d835231d072b093d050fafbd945 :-)\n. I don't think these are related - that's a GH bug. \n\n^ You can see the beacon image completing, and that has nothing to do with ghconduit.com.\nThat said, there is a different issue here... GitHub recently began proxying HTTPS content as well, which means pixel beacons would not git the appspot instance after they're cached, which breaks the reporting.\n. @paulcbetts any reason why you can't catch the error? \ntry {\n  xhr.send();\n} catch(exception) {\n  if(exception.name == 'NetworkError') {\n    console.log('There was a network error.');\n  }\n}\n. yes. it should.\nOn Sat, May 3, 2014 at 12:08 PM, Paul Betts notifications@github.comwrote:\n\n@igrigorik https://github.com/igrigorik Will that suppress it from\nshowing in the console though?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/igrigorik/ga-beacon/issues/7#issuecomment-42113654\n.\n. It suppressed the error for me? Note that my example is not using onerror.\n\nOn Sat, May 3, 2014 at 1:31 PM, Joshua Peek notifications@github.comwrote:\n\n@igrigorik https://github.com/igrigorik net::ERR_CONNECTION_REFUSEDisn't a DOM exception. Its logged via the Chrome dev tools. Even when the\nXHR has a onerror handler implemented.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/igrigorik/ga-beacon/issues/7#issuecomment-42115619\n.\n. Beautiful! Great work. Instead of using svg as a new flag we could probably do pixel=svg... or, just use SVG by default.\n. The one downside is much larger donwload. Gif is tiny.. Hmm.\n. - GIF is 35 bytes: https://raw.githubusercontent.com/igrigorik/ga-beacon/master/static/pixel.gif\n- compressed SVG is 393 bytes\n\nThere is an order of magnitude difference.\n. facepalm ... you're right!\nMade SVG the default badge: https://github.com/igrigorik/ga-beacon/commit/f0dca65c452b33a8466ba037619930796ed08c72\n. Hmm, that's more of a sheets bug.. Hopefully they'll upgrade older users soon! In the meantime, one workaround is to add ?pixel to the request, which will force a transparent GIF.\n. Looking at the protocol, dh should do the trick:\nhttps://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#dh\nIf you're running own copy of the collector, you could easily augment current code to accept a hostname. Here's the relevant initialization code: \nhttps://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L60\n. This should be available now, via: http://ga-beacon.appspot.com/account/UA-XXXXX-X/page-name?dh=foo.com\n. > Is it possible to create a gif URL that directly calls the GA servers without using the univeral .js file?\nThat's exactly what ga-beacon is doing. There is no javascript involved here. Instead, ga-beacon reports the data directly to Google servers via the GA measurement protocol. \nAs for reporting page titles, yes that's definitely something you could do:\nhttps://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#dt\n. You can initialize page title via: http://beacon-thing.com/account/UA-XXXXX-X/path-to/page?dt=\"Page Title\"\n. From the readme:\n\nIf you prefer, you can skip the badge and use a transparent pixel. To do so, simply append ?pixel to the image URL.\n\n:)\n. We do passthrough the user-agent string from the original client to GA, so I'd expect GA to handle this.. That said, you can add some additional logic on your side (within the beacon) to discard hits based on UA-string and/or any other signals. FWIW, might be worth investigating: http://www.lunametrics.com/blog/2013/09/05/filter-bots-google-analytics/\n. lgtm, thanks!\n. @thdoan use the \"realtime\" report to see activity data in... real-time: https://support.google.com/analytics/answer/1638635?hl=en#SeeData\n. @bobbyjum make sure you change your report date to include today. By default, GA shows data from past day and before. \n. Looks reasonable. If you beat me to it.. happy to accept a pull for it :)\n. Resolved in https://github.com/igrigorik/ga-beacon/commit/2173c8aedf304dbf4539cc4be754bb28f44ff44d. Note that I've changed the logic to be more generic: you can use query params to passthrough any values to the collector. \nTo report an event, an example would be: http://ga-beacon.appspot.com/account/UA-XXXXX-X/event?t=event&ec=category&ea=action&el=label&ev=value\n. Sure. Want to make a pull request? :)\n. thanks!\n. Fixed the compile error in https://github.com/igrigorik/ga-beacon/commit/43a9c22a26dc8974db8efbbe5f03fc46ec6b04bd - thanks for the heads up.\nI am seeing hits from ga-beacon.appspot.com in my own GA account. Are you sure you're setting the right property ID in your tests? Also, make sure you're using real-time analytics when checking for the hits.\n. @hwdsl2 the real-time tab in GA should show data in... real-time.\n. @monolithed please check your real-time analytics.\nClosing this bug since original issue was fixed.\n. @hwdsl2 ah, that makes sense -- thanks for the heads up!\n. Does GitHub's proxy communicate the client IP via an extra header, or some such? Currently it simply checks the remoteAddr value: https://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L136\n. @atmos does GitHub's camo deployment forward the client IP? Can't find anything in the docs: https://help.github.com/articles/why-do-my-images-have-strange-urls/\n. @atmos interesting, thanks. In which case, closing this.. since there isn't much we can do here.\n. Your repo name is the last bit in your project URL.. e.g. for this project its \"ga-beacon\". Page-name you can set to anything you want.\n. Yes, you have to manually embed it into each file you want to track. If/when someone forks.. the same beacon will carry over to their fork. However, you won't see the  fork as a separate page, because the beacon is hardcoded and wouldn't reflect their username, etc. This is a limitation of not being able to run JS, there is no way around this.\nP.s. Except, of course, GH does offer own analytics nowadays, so you might want to check that out.\n. See the note at the top of: https://github.com/igrigorik/ga-beacon#hands-on-example-google-analytics-for-github\n. No, it does not. It simply says that as a developer you're responsible for notifying your users if, when, and how you're tracking their behavior in your apps... and providing opt-outs as necessary. The underlying collection mechanism is orthogonal (ga-beacon or anything else).\n. Not familiar with that plugin -- maybe, maybe not. You could also add code on your side that omits inserting the tracker based on user preference.\n. In which case you should add a note explaining that the tracker is being used. The user can adjust their settings to block that request, if they wish.. E.g. via adblock or something else.\n. </facepalm>... my bad guys; the default version was still set on old release. Should be fixed now.\n. AFAIK, that's not sufficient as the beacon image will be cached. See https://mashe.hawksey.info/2014/02/tracking-google-sheet-views-with-google-analytics/ \n. You should always request the HTTPS resource: protects user privacy; doesn't break when a web mail client is accessed over HTTPS (otherwise it would be blocked due to mixed content).\n. @JHGrove3 follow the steps in: https://cloud.google.com/appengine/docs/go/gettingstarted/uploading - except, you want to check out this repo, rename the project to your own name... and upload. That's basically it.\n. You probably want to set your default URL to ga-beacon.appspot.com/UA-XXXXX-XX/. I believe that should fix it..\n. Cool, glad to hear!\n. @olivdee FWIW, I would recommend cloning the repo and deploying own instance of this service under your own account (just change the project name). That will give you full visibility into the logs and all the hits.\n. We may be hitting the free GA beacon limit on app engine. For best results, clone the repo and deploy your own copy.\n. Unfortunately this is due to a change in how GitHub serves images. I've updated the readme to address this: https://github.com/igrigorik/ga-beacon/commit/6acd8627bb7be36f24f5516e9873c92719a50e55\n. @gregmoser :+1:\nThis service is meant as a demo, not an official GA endpoint. @markmcd please consider running your own instance. This is a wontfix on this end.\n. Thanks!\n. I'm not convinced this does what you think it does.. As in, you parse out Referer value, but that value is not used anywhere meaningful.\nAlso, while I understand the high-level convenience: initialize path from referrer if no path is given, in practice you can't count on the Refer being there due to cross-origin and cross-protocol (http -> https) fetches. Given that, we want to encourage folks to specify the path when recording a hit, and that hit path should override referer.. So, I'm not convinced that this is necessary at all? =/\n. FWIW, browsers do expose a way to control the referer policy: https://www.w3.org/TR/referrer-policy/\n\nFor example, I have a lot of ebay posts; is was virtually imposible to add the path in each and every one. With this, I only copy-pasted the beacon img.\n\nAh, ok, I see what you're after. However, I'm still not convinced the code is doing what you want it to do,  because you're attempting to render an HTML page in response to an img request?\nIt seems like what you want is: \n- allow /{valid-GA-account}/hits\n- if no path is given, fallback to Referer\n- if path is present, use that override Referer\n. > The HTML page was already in the code. It seems that works as some kind of error handling. I guess that we can return the page only when some \"debug\" parameter is sent; and if no debug paramente is sent but it fails, just return a status code of 500 or 404. What do you think?\nThe page was there simply as a landing page for GA, such that when you setup the account you can point to it and let GA verify that your tracker is \"installed\". \nI think the new behavior we want is:\n- /UA-xxxxxxx - shows account template page; same behavior as now.\n- /UA-xxxxxxx/page - creates a hit with page path set to \"/page\"\n- /UA-xxxxxxx/page?useReferrer - set page path to value in Referrer header, and if Referrer is missing then fallback to \"/page\"\nThe above is different from what I suggested earlier, but I think it works for your use case. The benefit is that we always have a fallback value, even if Referrer is missing.\nDoes that make sense?\n. @Guisardo been swamped. If you have bandwidth, please take a run at it. \n. @Guisardo thanks for working on this. Overall, I think this is good. A few comments/nits above.\n. :+1: thanks for working on this!\n. @MarkEdmondson1234 good question, not sure.. @philipwalton any insights on this one?\n@vitr yeah, that's a separate topic, see: https://github.com/igrigorik/ga-beacon/commit/6acd8627bb7be36f24f5516e9873c92719a50e55\n. @philipwalton we do set the IP and UA overrides:\n- https://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L83\n- https://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L58\n@MarkEdmondson1234 any updates on this one? Anything actionable for ga-beacon?. @MarkEdmondson1234 thanks for the update, makes sense.\nRe, GitHub: there may be a workaround.. see https://github.com/igrigorik/ga-beacon/issues/47. \nThat said, closing this thread, as there is nothing ga-beacon actionable here.. @good-kiwi see second point in the FAQ: https://github.com/igrigorik/ga-beacon#faq - we use the collector protocol under the hood, but that's not sufficient on its own.\n. We do report the IP address of the user: \n- https://github.com/igrigorik/ga-beacon/blob/master/ga-beacon/ga-beacon.go#L83\n- https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#uip\nGeo reporting should work.\n. Closing, please reopen if this still an issue.. \ud83d\udc4d \nAny chance you'd be up for putting together a PR? :). FWIW, for the purpose of our use case.. we don't want the response to ever be served from cache. As such, using no-cache and unique ETag on each request is both simplest and easiest. . Resolved via https://github.com/igrigorik/ga-beacon/pull/54.. It appears that the demo instance is hitting its daily free quota limits on AppEngine, which is most likely why you're seeing this.  Note that the demo instance is just that.. a demo, no reliability guarantees. \nA simple fix is for you to deploy own GAE instance, the free tier should be plenty for most use cases. \n. AFAIK, this method will not work with Google Docs, because docs caches the image response.. Unfortunately.. no. If you stumble across a solution, please let me know!. @Ouaps please see https://github.com/igrigorik/ga-beacon/blob/master/README.md#can-i-use-this-production. Thanks!. This would imply that the beacon has to proxy arbitrary content from third-party origins, which is both very costly and not necessarily safe. I'm inclined to say that this is not something we want to support or enable.\nThanks for the suggestion!. Related discussion: https://github.com/igrigorik/ga-beacon/issues/47 -- that thread was leaning towards CC and dynamic ETag. Hmm?. After re-reading https://github.com/github/markup/issues/224.. I'm still confused by what Fastly is looking for. Also, the docs linked to in that thread are now out of date, which doesn't help.\n@triblondon can you chime in here? What should we be setting here? Is CC: no-store sufficient?. @triblondon thanks!\nBy the sounds of it, the policy we want is Cache-Control: private, no-store, and we can (hopefully) skip the etags, etc. @anthonyraymond wdyt, does that make sense to you?. Awesome -- thank you!. AFAIK, this is a problem with your GOPATH. Take a look at Go documentation: https://github.com/golang/go/wiki/GOPATH. @kshitijb interesting. If that's the case, can you make a PR so we can land this here too?. PTAL here: https://stackoverflow.com/questions/15130321/is-there-a-method-to-generate-a-uuid-with-go-language :). ",
    "broady": "All good - important to check for errors when you can do something with the result (at least log it)\nAlso, best not to panic in the http handler - that will tear down the AppEngine instance (it won't serve any more requests, and GAE will need to start another instance).\n:)\nWill be adding the tracking pixel to all of @googlemaps projects when I get back to work :)\n. All good - important to check for errors when you can do something with the result (at least log it)\nAlso, best not to panic in the http handler - that will tear down the AppEngine instance (it won't serve any more requests, and GAE will need to start another instance).\n:)\nWill be adding the tracking pixel to all of @googlemaps projects when I get back to work :)\n. ",
    "anaisbetts": "@igrigorik Since we've got you here, maybe you have a good idea for solving this problem. This request is effectively an XHR to the client's instance of GitHub for Mac, to enable a feature called Conduit (that right now, doesn't really do much, but may do more in the Future\u2122). \nHowever, if GitHub for Mac isn't running, people see this in the console and it's confusing. We want to make a web request (of some kind!) that may or may not succeed, but not end up spamming the log. Any ideas? \n. @igrigorik Will that suppress it from showing in the console though?\n. Didn't work for me - it does work if the request fails for other reasons though (try replacing the URL with \"http://google.com\", you'll get a CORS error but it's catchable):\nNot caught:\n\nCaught:\n\n. > The second send() call raised an error because you invoked send() twice on the same XHR\nI reinitialized it and called open again, it's just not in the screen clip\n. @igrigorik Since we've got you here, maybe you have a good idea for solving this problem. This request is effectively an XHR to the client's instance of GitHub for Mac, to enable a feature called Conduit (that right now, doesn't really do much, but may do more in the Future\u2122). \nHowever, if GitHub for Mac isn't running, people see this in the console and it's confusing. We want to make a web request (of some kind!) that may or may not succeed, but not end up spamming the log. Any ideas? \n. @igrigorik Will that suppress it from showing in the console though?\n. Didn't work for me - it does work if the request fails for other reasons though (try replacing the URL with \"http://google.com\", you'll get a CORS error but it's catchable):\nNot caught:\n\nCaught:\n\n. > The second send() call raised an error because you invoked send() twice on the same XHR\nI reinitialized it and called open again, it's just not in the screen clip\n. ",
    "josh": "@igrigorik net::ERR_CONNECTION_REFUSED isn't a DOM exception. Its logged via the Chrome dev tools. Even when the XHR has a onerror handler implemented.\n. @igrigorik I'm not sure what you passed to open() in your example. I only mentioned onerror that even if you install that handler, theres no way to suppress the log message. All browsers pretty much this way, its not really Chrome specific and I wouldn't consider it a bug in the inspector.\n@paulcbetts you're \"Caught\" screenshot doesn't really illustrate your point. The second send() call raised an error because you invoked send() twice on the same XHR. That raises a InvalidStateError error which is not related to network or CORS failures.\n. @igrigorik net::ERR_CONNECTION_REFUSED isn't a DOM exception. Its logged via the Chrome dev tools. Even when the XHR has a onerror handler implemented.\n. @igrigorik I'm not sure what you passed to open() in your example. I only mentioned onerror that even if you install that handler, theres no way to suppress the log message. All browsers pretty much this way, its not really Chrome specific and I wouldn't consider it a bug in the inspector.\n@paulcbetts you're \"Caught\" screenshot doesn't really illustrate your point. The second send() call raised an error because you invoked send() twice on the same XHR. That raises a InvalidStateError error which is not related to network or CORS failures.\n. ",
    "sahat": "If you are ok with supporting only IE9 and above (which is reasonable in 2014), I would just use SVG by default. But pixel=svg is fine too as long as it is documented in README.\nhttp://caniuse.com/svg\n. The SVG file is only 882 bytes, GIF is ~1.7kb. Or am I missing something here?\n. Ah, I didn't realize you were comparing SVG with an empty gif and not the badge.gif. That shouldn't make a difference though. Those who don't want to use a badge (can still use an empty pixel, although I think size on that scale is insignificant). And those who do use a badge, SVG is smaller and looks better than current badge.gif.\n. If you are ok with supporting only IE9 and above (which is reasonable in 2014), I would just use SVG by default. But pixel=svg is fine too as long as it is documented in README.\nhttp://caniuse.com/svg\n. The SVG file is only 882 bytes, GIF is ~1.7kb. Or am I missing something here?\n. Ah, I didn't realize you were comparing SVG with an empty gif and not the badge.gif. That shouldn't make a difference though. Those who don't want to use a badge (can still use an empty pixel, although I think size on that scale is insignificant). And those who do use a badge, SVG is smaller and looks better than current badge.gif.\n. ",
    "mhawksey": "Downside of defaulting to svg is the old version of Google Sheets can't render a SVG using IMAGEURL and returns #N/A. This will break tracking for anyone using the google sheets tutorial you've kindly linked to.\n. Given its old sheets I don't think there'll be an update. As a image would be nice open a pull request to allow ?gif https://github.com/igrigorik/ga-beacon/pull/13\n. Downside of defaulting to svg is the old version of Google Sheets can't render a SVG using IMAGEURL and returns #N/A. This will break tracking for anyone using the google sheets tutorial you've kindly linked to.\n. Given its old sheets I don't think there'll be an update. As a image would be nice open a pull request to allow ?gif https://github.com/igrigorik/ga-beacon/pull/13\n. ",
    "balazs-zsoldos": "+1\n. +1\n. ",
    "cmpsoares91": "Well you can do it manually, because the name you define https://ga-beacon.appspot.com/UA-XXXXXXXX-X/Page/name?pixel is what appears on your report as page name. So you can name it what you want.\n. Well the problem until now is that it passes data on the beacon's server which resends it to GA. This creates the issue that some information such as, for example demographics, will be lost. Is a possible enhancement if this gets fixed.\n. That is something I would like to know as well...\nCarlos M. P. Soares.\n\nYou can find me: Facebook https://www.facebook.com/CMPSoares91;\nTwitterhttps://twitter.com/CMPSoares\n; Linkedin http://pt.linkedin.com/pub/carlos-soares/43/a0a/9a0/;\nStackOverflow http://stackoverflow.com/users/3555155/cmpsoares;\nGithubhttps://github.com/cmpsoares91\n.\nWant to buy me a cup of coffee to survive\ncollege?https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=XKKQK39233UR2\n2014-04-30 19:02 GMT+01:00 James Grove notifications@github.com:\n\nIs it possible to create a gif URL that directly calls the GA servers\nwithout using the univeral .js file?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/igrigorik/ga-beacon/issues/10#issuecomment-41828493\n.\n. [spam]\n. Well you can do it manually, because the name you define https://ga-beacon.appspot.com/UA-XXXXXXXX-X/Page/name?pixel is what appears on your report as page name. So you can name it what you want.\n. Well the problem until now is that it passes data on the beacon's server which resends it to GA. This creates the issue that some information such as, for example demographics, will be lost. Is a possible enhancement if this gets fixed.\n. That is something I would like to know as well...\n\nCarlos M. P. Soares.\n\nYou can find me: Facebook https://www.facebook.com/CMPSoares91;\nTwitterhttps://twitter.com/CMPSoares\n; Linkedin http://pt.linkedin.com/pub/carlos-soares/43/a0a/9a0/;\nStackOverflow http://stackoverflow.com/users/3555155/cmpsoares;\nGithubhttps://github.com/cmpsoares91\n.\nWant to buy me a cup of coffee to survive\ncollege?https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=XKKQK39233UR2\n2014-04-30 19:02 GMT+01:00 James Grove notifications@github.com:\n\nIs it possible to create a gif URL that directly calls the GA servers\nwithout using the univeral .js file?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/igrigorik/ga-beacon/issues/10#issuecomment-41828493\n.\n. [spam]\n. \n",
    "JHGrove3": "Yes, but some of the reports in GA show you the page & path as well as the page title.  And sections like the Content Drilldown need to have an accurate path in order to place the content in the right location.\n. Yes, I assumed that the beacon server was massaging the data and passing it along correctly formatted to the GA server.\n. Is it possible to create a gif URL that directly calls the GA servers without using the univeral .js file?\n. Thanks for the tip.  Can you point me towards some resources that would show me how to set up my own appengine install for this?  I'd like to be able to use a branded logo, and I'd like to have a branded URL, too.\n. Yes, but some of the reports in GA show you the page & path as well as the page title.  And sections like the Content Drilldown need to have an accurate path in order to place the content in the right location.\n. Yes, I assumed that the beacon server was massaging the data and passing it along correctly formatted to the GA server.\n. Is it possible to create a gif URL that directly calls the GA servers without using the univeral .js file?\n. Thanks for the tip.  Can you point me towards some resources that would show me how to set up my own appengine install for this?  I'd like to be able to use a branded logo, and I'd like to have a branded URL, too.\n. ",
    "liamim": "Heh. Feel like a fool now ;)\n. Heh. Feel like a fool now ;)\n. ",
    "arfoll": "For g-analytic n00bs like me it might be helpful to have this in the readme/instructions I thought it didn't work at first :)\n. For g-analytic n00bs like me it might be helpful to have this in the readme/instructions I thought it didn't work at first :)\n. ",
    "kshitijb": "@arfoll Me too. Wasted some time and then found this issue here. I will check again in 24 hours.. I don't think that's the reason. gcloud might have changed some configurations (I didn't really check that. The error message suggested it though). I just restructured the project as below and it worked just fine.\ngo-beacon/\n    static/\n    app.yaml\n    go-beacon.go\n    page.html. Oh yeah! @mxbi You need to change pageTemplate value on line 26 to page.html instead of ga-beacon/page.html as the folder structure has changed.\nLet me know if it works (It should :) ).. @arfoll Me too. Wasted some time and then found this issue here. I will check again in 24 hours.. I don't think that's the reason. gcloud might have changed some configurations (I didn't really check that. The error message suggested it though). I just restructured the project as below and it worked just fine.\ngo-beacon/\n    static/\n    app.yaml\n    go-beacon.go\n    page.html. Oh yeah! @mxbi You need to change pageTemplate value on line 26 to page.html instead of ga-beacon/page.html as the folder structure has changed.\nLet me know if it works (It should :) ).. ",
    "daniellmb": "Sweet! I like how you changed it to use a simple loop without the parameter name mapping.\n. I tried it out and it's working like a charm! Although for those that read this later, the correct URL format is:\nhttps://ga-beacon.appspot.com/UA-XXXXXXXX-X/event?t=event&ec=category&ea=action&el=label&ev=value\n. Sweet! I like how you changed it to use a simple loop without the parameter name mapping.\n. I tried it out and it's working like a charm! Although for those that read this later, the correct URL format is:\nhttps://ga-beacon.appspot.com/UA-XXXXXXXX-X/event?t=event&ec=category&ea=action&el=label&ev=value\n. ",
    "paazmaya": "Sure!\n. Is there.\n. Sure!\n. Is there.\n. ",
    "leodido": "Flat style does not work.\n. Flat style does not work.\n. ",
    "hwdsl2": "Thanks for the quick reply. I double checked my test configuration and they are fine. And I am indeed using the real-time analytics. \nI just ran the test again and observed something interesting: If I open this page directly in IE: ga-beacon.appspot.com/UA-XXXXXXXX-Y/ (the string is my Analytics property ID), I do see a hit registered in real-time dashboard, with the \"active page\" shown as \"/UA-XXXXXXXX-Y/\". However, as soon as I append anything to that URL, such as ga-beacon.appspot.com/UA-XXXXXXXX-Y/my-site/test-page , and test again, then no hit is registered in my real-time dashboard at all. \n. I checked the Google Analytics forums and realized that because my GA property is brand new, there may be a delay of 24~72 hours before any data from the measurement protocol show up in my dashboard. \nThanks again for your help - I'll report back if it still does not work after a few days. Otherwise I plan to close this issue.\n. Finally found out the reason why ga-beacon was not working in my Analytics account. It boils down to changing a single setting in GA.\nFYI for other people having this issue: You MUST UN-check the option \"Exclude all hits from known bots and spiders\" in the \"View Settings\" of your GA account. Otherwise no hits will be registered and the beacon won't work.\n. @victoriafrench See my comment in #21.\n. Thanks for the quick reply. I double checked my test configuration and they are fine. And I am indeed using the real-time analytics. \nI just ran the test again and observed something interesting: If I open this page directly in IE: ga-beacon.appspot.com/UA-XXXXXXXX-Y/ (the string is my Analytics property ID), I do see a hit registered in real-time dashboard, with the \"active page\" shown as \"/UA-XXXXXXXX-Y/\". However, as soon as I append anything to that URL, such as ga-beacon.appspot.com/UA-XXXXXXXX-Y/my-site/test-page , and test again, then no hit is registered in my real-time dashboard at all. \n. I checked the Google Analytics forums and realized that because my GA property is brand new, there may be a delay of 24~72 hours before any data from the measurement protocol show up in my dashboard. \nThanks again for your help - I'll report back if it still does not work after a few days. Otherwise I plan to close this issue.\n. Finally found out the reason why ga-beacon was not working in my Analytics account. It boils down to changing a single setting in GA.\nFYI for other people having this issue: You MUST UN-check the option \"Exclude all hits from known bots and spiders\" in the \"View Settings\" of your GA account. Otherwise no hits will be registered and the beacon won't work.\n. @victoriafrench See my comment in #21.\n. ",
    "monolithed": "+1, I don't see any traffic in my project\n\n\n. +1, I don't see any traffic in my project\n\n\n. ",
    "GrahamCampbell": "I assume so, yeh. I haven't looked into it. I just tried out your service and all my traffic was showing as from the same location in America, so I assumed that was the cause.\n. We are using it for client tracking, lol...\n. I assume so, yeh. I haven't looked into it. I just tried out your service and all my traffic was showing as from the same location in America, so I assumed that was the cause.\n. We are using it for client tracking, lol...\n. ",
    "atmos": "It does not, we removed it after we discovered that people were using it for client tracking last year. \n. @GrahamCampbell so... it's working in our user's best interest or have you guys found a way to circumvent it?\n. It does not, we removed it after we discovered that people were using it for client tracking last year. \n. @GrahamCampbell so... it's working in our user's best interest or have you guys found a way to circumvent it?\n. ",
    "GildedHonour": "That's what I'm saying: after it's forked, it'll still track myself. And what if I want to track the main page of my github which is github.com/NNN? Impossible.\n. That's what I'm saying: after it's forked, it'll still track myself. And what if I want to track the main page of my github which is github.com/NNN? Impossible.\n. ",
    "Alexander01998": "Thank you for making that clear. :+1:\nNow how would I go about providing an opt-out for ga-beacon to my users? Would installing the Google Analytics opt-out browser plugin work (considering that ga-beacon tracking on GitHub uses a proxy to load the tracking image)?\n. > Not familiar with that plugin -- maybe, maybe not.\nIf it helps, here is a link to the plugin: https://tools.google.com/dlpage/gaoptout/\n\nYou could also add code on your side that omits inserting the tracker based on user preference.\n\nI cannot do that, because I am using it on the README.md files of my GitHub repositories.\n. Thank you for making that clear. :+1:\nNow how would I go about providing an opt-out for ga-beacon to my users? Would installing the Google Analytics opt-out browser plugin work (considering that ga-beacon tracking on GitHub uses a proxy to load the tracking image)?\n. > Not familiar with that plugin -- maybe, maybe not.\nIf it helps, here is a link to the plugin: https://tools.google.com/dlpage/gaoptout/\n\nYou could also add code on your side that omits inserting the tracker based on user preference.\n\nI cannot do that, because I am using it on the README.md files of my GitHub repositories.\n. ",
    "catdad": "It's interesting because the code appears correct. It seems like the server is just not up to date.\n. It's interesting because the code appears correct. It seems like the server is just not up to date.\n. ",
    "olivdee": "same here... i checked everything and cannot find an error in my email newsletters code... suppose something else went wrong / is down here at ga-beacon? here some more info:\nTracking Code Mismatch\nThe default URL https://ga-beacon.appspot.com/, for property UA-########-# has no tracking code for this property, although it does have tracking codes for other properties:\nUA-3769691-2\nIf your Tracking ID and your Default URL setting are out of sync, you don't get valid data in your Analytics account for the Default URL.\nEither update the tracking code to use the Tracking ID for property ON Newsletter Tracking, or open the Property Settings to update the Default URL for property ON Newsletter Tracking to be https://ga-beacon.appspot.com/.\n. i changed the property as you suggested an hour ago, but i dont get any hits...\nshould i delete it and create a new one as marksnoopy?\nand then also change the default URL as well?\n@marksnoopy : did you do both?\n. @marksnoopy : so did you completely deleted your GA account? and did you set the default URL as ilya suggested above?\n@igrigorik : is this really necessary???\n. thanks mark for clarifiyng. will try first only to change the default URL as ilya suggested. if thats not successful i will delete the account\n. somehow the email / newsletter tracking does not work as expected...\nwe did run several tests with 5 different email addresses, for example:\nmail1@companyname.com: opened on Thunderbird PC1\nmail2@gmail.com               : opened on Android and later on as well on PC1 gmail browser interface\nmail3@companyname.com : opened on Thunderbird PC2\nmail4@companyname.com : opened on Thunderbird PC1\nmail5@someotherdomain.com : opened on  PC1 someotherdomain browser interface\nso my count would suggest 5 unique page views and 6 page views (because of the double gmail opening), but GA only shows 2 unique page views (which are definitely from prior opening any of the above mails, thus i guess false positives from the newsletter-tool?) and 3 page views.\nam i missing something out? or is there a bug (implementation or how ga-beacon works)?\nis this because we are opening those mails from within the same office / IP?\n. this is all very weird... after all that testing we thought that the unique page views are generated by the newsletter tool, so we finally did send the newsletter with 2 hours prior to midnight, in order to be able to filter in GA from the next day on, and count simple page views (usually a newsletter is opened only once). so we thought this might work with us. but after sending the NL (to more than 2500 subscribers), we got only 9 unique page views (as opposed to the expected > 2500) and up to today not a single normal page view! even though we were on the subscriber list ourselves and opened the NL on our PCs... \nany idea what could be failing here?\nif i copy the ga-beacon URL from the NLs sourcecode and insert it to a browser, the counting works and i get one UNIQUE PAGE VIEW and one NORMAL PAGE VIEW after lets say 15 min...\n. friendly bump...\nany idea / hint at all?\nanything, is much appreciated\n. same here... i checked everything and cannot find an error in my email newsletters code... suppose something else went wrong / is down here at ga-beacon? here some more info:\nTracking Code Mismatch\nThe default URL https://ga-beacon.appspot.com/, for property UA-########-# has no tracking code for this property, although it does have tracking codes for other properties:\nUA-3769691-2\nIf your Tracking ID and your Default URL setting are out of sync, you don't get valid data in your Analytics account for the Default URL.\nEither update the tracking code to use the Tracking ID for property ON Newsletter Tracking, or open the Property Settings to update the Default URL for property ON Newsletter Tracking to be https://ga-beacon.appspot.com/.\n. i changed the property as you suggested an hour ago, but i dont get any hits...\nshould i delete it and create a new one as marksnoopy?\nand then also change the default URL as well?\n@marksnoopy : did you do both?\n. @marksnoopy : so did you completely deleted your GA account? and did you set the default URL as ilya suggested above?\n@igrigorik : is this really necessary???\n. thanks mark for clarifiyng. will try first only to change the default URL as ilya suggested. if thats not successful i will delete the account\n. somehow the email / newsletter tracking does not work as expected...\nwe did run several tests with 5 different email addresses, for example:\nmail1@companyname.com: opened on Thunderbird PC1\nmail2@gmail.com               : opened on Android and later on as well on PC1 gmail browser interface\nmail3@companyname.com : opened on Thunderbird PC2\nmail4@companyname.com : opened on Thunderbird PC1\nmail5@someotherdomain.com : opened on  PC1 someotherdomain browser interface\nso my count would suggest 5 unique page views and 6 page views (because of the double gmail opening), but GA only shows 2 unique page views (which are definitely from prior opening any of the above mails, thus i guess false positives from the newsletter-tool?) and 3 page views.\nam i missing something out? or is there a bug (implementation or how ga-beacon works)?\nis this because we are opening those mails from within the same office / IP?\n. this is all very weird... after all that testing we thought that the unique page views are generated by the newsletter tool, so we finally did send the newsletter with 2 hours prior to midnight, in order to be able to filter in GA from the next day on, and count simple page views (usually a newsletter is opened only once). so we thought this might work with us. but after sending the NL (to more than 2500 subscribers), we got only 9 unique page views (as opposed to the expected > 2500) and up to today not a single normal page view! even though we were on the subscriber list ourselves and opened the NL on our PCs... \nany idea what could be failing here?\nif i copy the ga-beacon URL from the NLs sourcecode and insert it to a browser, the counting works and i get one UNIQUE PAGE VIEW and one NORMAL PAGE VIEW after lets say 15 min...\n. friendly bump...\nany idea / hint at all?\nanything, is much appreciated\n. ",
    "marksnoopy": "i deleted the property and create a new one , it work well. thank you .\n. i delete the account and property ,create a new account and peoperty , then\ni get a new property .\nreplace the old property in my gist page , save the gist and refresh the\ngist page , you will see the visit data in the real-time page of google\nanalysis .\nOn Mon, Oct 19, 2015 at 6:58 PM olivdee notifications@github.com wrote:\n\ni changed the property as you suggested an hour ago, but i dont get any\nhits...\nshould i delete it and create a new one as marksnoopy?\nand then also change the default URL as well?\n@marksnoopy https://github.com/marksnoopy : did you do both?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/igrigorik/ga-beacon/issues/30#issuecomment-149184712.\n. not GA account , just web site account . \n\n\n. i deleted the property and create a new one , it work well. thank you .\n. i delete the account and property ,create a new account and peoperty , then\ni get a new property .\nreplace the old property in my gist page , save the gist and refresh the\ngist page , you will see the visit data in the real-time page of google\nanalysis .\nOn Mon, Oct 19, 2015 at 6:58 PM olivdee notifications@github.com wrote:\n\ni changed the property as you suggested an hour ago, but i dont get any\nhits...\nshould i delete it and create a new one as marksnoopy?\nand then also change the default URL as well?\n@marksnoopy https://github.com/marksnoopy : did you do both?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/igrigorik/ga-beacon/issues/30#issuecomment-149184712.\n. not GA account , just web site account . \n\n\n. ",
    "victoriafrench": "@hwdsl2 thanks! unfortunately any hit to ga-beacon is reporting a 503 Over Quota error, so I will test it when the server goes back online, or just throw the code up on EC2 and run my own instance.\n. @hwdsl2 the site came back up and it's working now, including the readme.md. Thanks much!\n. @hwdsl2 thanks! unfortunately any hit to ga-beacon is reporting a 503 Over Quota error, so I will test it when the server goes back online, or just throw the code up on EC2 and run my own instance.\n. @hwdsl2 the site came back up and it's working now, including the readme.md. Thanks much!\n. ",
    "jonathansides": "Thank you for posting this issue report, Mark! I was struggling to understand why GA was not showing my Google Sheet views and your answer cleared it up. I will now try to set up the code on my own instance of Google App Engine like Ilya suggests at the bottom of the instructions.\n. Thank you for posting this issue report, Mark! I was struggling to understand why GA was not showing my Google Sheet views and your answer cleared it up. I will now try to set up the code on my own instance of Google App Engine like Ilya suggests at the bottom of the instructions.\n. ",
    "gregmoser": "Looks like daily this is going over the quota limit.  I'm noticing that the image breaks on my github repo every afternoon.\n. @Guisardo, thanks for brining up that point, and actually right after I posted to this issue I actually did set it up on my own instance on google cloud.  That process works great and it's super easy to setup.\n. Looks like daily this is going over the quota limit.  I'm noticing that the image breaks on my github repo every afternoon.\n. @Guisardo, thanks for brining up that point, and actually right after I posted to this issue I actually did set it up on my own instance on google cloud.  That process works great and it's super easy to setup.\n. ",
    "Guisardo": "Hi all, remember that you could easily create your own api from this project using the google cloud platform. And is free (if you don't exceed your own quota).\nhttps://cloud.google.com/appengine/docs/python/gettingstartedpython27/uploading\nhttps://cloud.google.com/appengine/docs/quotas?hl=en_US\n. Hi @igrigorik , thanks for your comments.\nActually, the extra referrer parse I did it only to debug the code while I was trying it. I'm going to add the page.html version that I have too.\nOn the other hand, the referrer availability shouldn't be an issue, in fact, the referrer is commonly used on security algorithms for things like preventing hot linking. Although they are some odd browsers that don't always send the referrer, the amount of traffic coming from those browsers is usually not relevant at all. Of course that if you need to measure the traffic from those odd browsers you should use the forced path method, but I'm certain that less that 1% of the dev that could use this project, enters in this case scenario.\nhttp://novogeek.com/post/What-web-devs-should-know-about-HTTP-Referer-header.aspx\nhttp://homakov.blogspot.com.ar/2012/04/playing-with-referer-origin-disquscom.html\nThe cross protocol should't be an issue ether if you host this beacon inside ssl like, for example, the google cloud platform. The cross protocol raises when, from the https, you try to use http assets; not the other way around. So, if the beacon already have https, you can use it from http and https without any problems.\nThen again, this implementation let you choose the method that you want you use to get the path, but I find a lot more simpler to trust the referrer instead of forcing the path in every place that I use the beacon. For example, I have a lot of ebay posts; is was virtually imposible to add the path in each and every one. With this, I only copy-pasted the beacon img.\nBest,\n. Thanks for the comment @igrigorik .\nYou are correct, that flow is what I was looking for.\nThe HTML page was already in the code. It seems that works as some kind of error handling. I guess that we can return the page only when some \"debug\" parameter is sent; and if no debug paramente is sent but it fails, just return a status code of 500 or 404. What do you think? \nI'm not sure on how to make this check\n\nallow /{valid-GA-account}/hits\n\nI'm not that skilled in golang to use regex or something like that. Can you help me with that code?\nBest,\n. Hi @igrigorik , thanks for the response.\nYes, I like that fallback approach.\nCan you handle that improve? If not, i'll try to do it on next weekend\n. Hi @igrigorik , can you check this again? feel free to modify any part that you think should need improvements.\nBest,\n. Hi @igrigorik , I just commit the changes you requested.\nBest,\n. Hi all, remember that you could easily create your own api from this project using the google cloud platform. And is free (if you don't exceed your own quota).\nhttps://cloud.google.com/appengine/docs/python/gettingstartedpython27/uploading\nhttps://cloud.google.com/appengine/docs/quotas?hl=en_US\n. Hi @igrigorik , thanks for your comments.\nActually, the extra referrer parse I did it only to debug the code while I was trying it. I'm going to add the page.html version that I have too.\nOn the other hand, the referrer availability shouldn't be an issue, in fact, the referrer is commonly used on security algorithms for things like preventing hot linking. Although they are some odd browsers that don't always send the referrer, the amount of traffic coming from those browsers is usually not relevant at all. Of course that if you need to measure the traffic from those odd browsers you should use the forced path method, but I'm certain that less that 1% of the dev that could use this project, enters in this case scenario.\nhttp://novogeek.com/post/What-web-devs-should-know-about-HTTP-Referer-header.aspx\nhttp://homakov.blogspot.com.ar/2012/04/playing-with-referer-origin-disquscom.html\nThe cross protocol should't be an issue ether if you host this beacon inside ssl like, for example, the google cloud platform. The cross protocol raises when, from the https, you try to use http assets; not the other way around. So, if the beacon already have https, you can use it from http and https without any problems.\nThen again, this implementation let you choose the method that you want you use to get the path, but I find a lot more simpler to trust the referrer instead of forcing the path in every place that I use the beacon. For example, I have a lot of ebay posts; is was virtually imposible to add the path in each and every one. With this, I only copy-pasted the beacon img.\nBest,\n. Thanks for the comment @igrigorik .\nYou are correct, that flow is what I was looking for.\nThe HTML page was already in the code. It seems that works as some kind of error handling. I guess that we can return the page only when some \"debug\" parameter is sent; and if no debug paramente is sent but it fails, just return a status code of 500 or 404. What do you think? \nI'm not sure on how to make this check\n\nallow /{valid-GA-account}/hits\n\nI'm not that skilled in golang to use regex or something like that. Can you help me with that code?\nBest,\n. Hi @igrigorik , thanks for the response.\nYes, I like that fallback approach.\nCan you handle that improve? If not, i'll try to do it on next weekend\n. Hi @igrigorik , can you check this again? feel free to modify any part that you think should need improvements.\nBest,\n. Hi @igrigorik , I just commit the changes you requested.\nBest,\n. ",
    "vitr": "I believe, recently github started using proxy for serving images, e.g\n<img src=\"https://camo.githubusercontent.com/30b62c40871935ce7d4b98bae84dce3cec1ba9b3/68747470733a2f2f67612d626561636f6e2e61707073706f742e636f6d2f55412d37313139362d31302f67612d626561636f6e2f726561646d653f706978656c\" alt=\"Analytics\" data-canonical-src=\"https://ga-beacon.appspot.com/UA-71196-10/ga-beacon/readme?pixel\" style=\"max-width:100%;\">\nnote camo.githubusercontent.com, and you can see only\nBROWSER: Camo Asset Proxy 2.2.0 AppEngine-Google; \nin Google analytics. I guess, ga-beacon isn't useful for github anymore.\n. oh, man, it goes over quota almost everyday)) you better setup your own instance on GAE, if you don't know how, I've got some tips here https://github.com/vitr/google-analytics-beacon\n. @sajuuk111 hey, I explain the issue here https://github.com/vitr/google-analytics-beacon if it's easy for you to follow, get your own instance of the beacon.\n. I believe, recently github started using proxy for serving images, e.g\n<img src=\"https://camo.githubusercontent.com/30b62c40871935ce7d4b98bae84dce3cec1ba9b3/68747470733a2f2f67612d626561636f6e2e61707073706f742e636f6d2f55412d37313139362d31302f67612d626561636f6e2f726561646d653f706978656c\" alt=\"Analytics\" data-canonical-src=\"https://ga-beacon.appspot.com/UA-71196-10/ga-beacon/readme?pixel\" style=\"max-width:100%;\">\nnote camo.githubusercontent.com, and you can see only\nBROWSER: Camo Asset Proxy 2.2.0 AppEngine-Google; \nin Google analytics. I guess, ga-beacon isn't useful for github anymore.\n. oh, man, it goes over quota almost everyday)) you better setup your own instance on GAE, if you don't know how, I've got some tips here https://github.com/vitr/google-analytics-beacon\n. @sajuuk111 hey, I explain the issue here https://github.com/vitr/google-analytics-beacon if it's easy for you to follow, get your own instance of the beacon.\n. ",
    "philipwalton": "I assume it's probably related to some sort of spam filtering, but I don't know for sure. I'll look into it.\n@MarkEdmondson1234 I'm sure you already know this, but you could turn off bot filtering and add your own filter that's probably as or more effective.\n@igrigorik maybe this isn't possible anymore if what @vitr is saying is true (Github proxying img urls), but with GA it's possible to use UA and IP overrides, which might also help make the hits not seem so bot-like. Using the UA and IP overrides will also allow these hits to have the proper GEO and browser data in GA.\n. I assume it's probably related to some sort of spam filtering, but I don't know for sure. I'll look into it.\n@MarkEdmondson1234 I'm sure you already know this, but you could turn off bot filtering and add your own filter that's probably as or more effective.\n@igrigorik maybe this isn't possible anymore if what @vitr is saying is true (Github proxying img urls), but with GA it's possible to use UA and IP overrides, which might also help make the hits not seem so bot-like. Using the UA and IP overrides will also allow these hits to have the proper GEO and browser data in GA.\n. ",
    "LindaLawton": "Little update on this. @MarkEdmondson1234  spoke to the GA Dev team and this is being looked into on their side.     The answer we got from them is that it is possible that things are being blocked.\n. Little update on this. @MarkEdmondson1234  spoke to the GA Dev team and this is being looked into on their side.     The answer we got from them is that it is possible that things are being blocked.\n. ",
    "MarkEdmondson1234": "@igrigorik all I can report is that using bot filtering still prevents these hits appearing in the GA account with bot filtering turned on.  I don't think there is much that can be done your end.\nAs an example, I use the beacon at the bottom of this URL http://markedmondson.me/enhance-your-google-analytics-data-with-r-and-shiny-free-online-dashboard-template and see 389 hits in the raw data profile, none in the bot filtered one.  \nIt won't work on Github anymore due to the image hosting, but its still useful for me to get a quick measurement for lots of users into one account where you can host the image. \n. @igrigorik all I can report is that using bot filtering still prevents these hits appearing in the GA account with bot filtering turned on.  I don't think there is much that can be done your end.\nAs an example, I use the beacon at the bottom of this URL http://markedmondson.me/enhance-your-google-analytics-data-with-r-and-shiny-free-online-dashboard-template and see 389 hits in the raw data profile, none in the bot filtered one.  \nIt won't work on Github anymore due to the image hosting, but its still useful for me to get a quick measurement for lots of users into one account where you can host the image. \n. ",
    "cyhsutw": "Thanks @vitr!\nI'll set up my own instance by following the instructions in your repo \ud83c\udd92 \n. Thanks @vitr!\nI'll set up my own instance by following the instructions in your repo \ud83c\udd92 \n. ",
    "zeeev": "Hmm, i'll chalk it up to something i'm doing wrong.  I live in WA and all the traffic is coming from VA. \n. Hmm, i'll chalk it up to something i'm doing wrong.  I live in WA and all the traffic is coming from VA. \n. ",
    "ahmetb": "Looks similar to #30. I just updated my URL from repo URL:\n\nto \n\nI'll close this issue if this fixes the problem.\n. Looks similar to #30. I just updated my URL from repo URL:\n\nto \n\nI'll close this issue if this fixes the problem.\n. ",
    "ArtemGr": "\nAny chance you'd be up for putting together a PR? :)\n\nSo far it's just an idea, one would have to experiment on it to see if it changes anything. For example, the beacon might change ETag periodically, by feeding the current second (or unix_time_seconds() / X) into ETag. It would be interesting to see if that'll do anything to the beacon-generated AdSense stats.\nOn one hand, ETag shouldn't do anything in presence of Cache-Control: no-cache. On the other hand, we have statements from GitHub programmers (?) that ETag is needed in order not to screw things up. It's weird, but maybe it's real. Maybe the lack of ETag is screwing no-cache because of some non-standard caching.\nAnother thing to try would be Cache-Control: must-revalidate with a changing ETag, instead of just Cache-Control: no-cache. It might use a different code path in github/fastly and so improve the amount of requests that goes directly to the beacon instead of being cached.\nThat said, I don't have the infrastructure (Go compiler, a working app-engine instance of the beacon) to work on it properly. Dubbing in that would be supper inefficient. Like nine times to one, where nine is the time to figure out the environment and one is the time to work on the problem.. > Any chance you'd be up for putting together a PR? :)\nSo far it's just an idea, one would have to experiment on it to see if it changes anything. For example, the beacon might change ETag periodically, by feeding the current second (or unix_time_seconds() / X) into ETag. It would be interesting to see if that'll do anything to the beacon-generated AdSense stats.\nOn one hand, ETag shouldn't do anything in presence of Cache-Control: no-cache. On the other hand, we have statements from GitHub programmers (?) that ETag is needed in order not to screw things up. It's weird, but maybe it's real. Maybe the lack of ETag is screwing no-cache because of some non-standard caching.\nAnother thing to try would be Cache-Control: must-revalidate with a changing ETag, instead of just Cache-Control: no-cache. It might use a different code path in github/fastly and so improve the amount of requests that goes directly to the beacon instead of being cached.\nThat said, I don't have the infrastructure (Go compiler, a working app-engine instance of the beacon) to work on it properly. Dubbing in that would be supper inefficient. Like nine times to one, where nine is the time to figure out the environment and one is the time to work on the problem.. ",
    "sajuuk111": "thanks for the fast reply! It's working now. Could you tell me what do you mean by \"deploy your own GAE instance\" by no means i'm a programmer and close to these topics, but if it is an easy thing to do, i will try to get my friends to work on that\n.  thanks for the fast reply! It's working now. Could you tell me what do you mean by \"deploy your own GAE instance\" by no means i'm a programmer and close to these topics, but if it is an easy thing to do, i will try to get my friends to work on that\n. ",
    "inheritanceXIV": "I see. would you happen to know a method that would work in google docs by any chance? . Will do, ty for your time.\nOn Mon, Nov 28, 2016 at 11:17 AM, Ilya Grigorik notifications@github.com\nwrote:\n\nUnfortunately.. no. If you stumble across a solution, please let me know!\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/igrigorik/ga-beacon/issues/49#issuecomment-263332880,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AUJqpwAZ2esSsV1dCLSVS7mcdQBW8cqqks5rCwzDgaJpZM4K7Daw\n.\n. I see. would you happen to know a method that would work in google docs by any chance? . Will do, ty for your time.\n\nOn Mon, Nov 28, 2016 at 11:17 AM, Ilya Grigorik notifications@github.com\nwrote:\n\nUnfortunately.. no. If you stumble across a solution, please let me know!\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/igrigorik/ga-beacon/issues/49#issuecomment-263332880,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AUJqpwAZ2esSsV1dCLSVS7mcdQBW8cqqks5rCwzDgaJpZM4K7Daw\n.\n. \n",
    "anthonyraymond": "Started to work this morning... Can't figure out why..... It is, would you rather want a dynamic Etag? i may use generateUUID() function to generate a Etag if you want.. @igrigorik i don't really know anymore, and since we don't really know how Fastly is really working under the hood. I would say, let's give it a try and see.\nI'll change to Cache-Control: private, no-store tonight.. Done, sorry i was a little busy. Started to work this morning... Can't figure out why..... It is, would you rather want a dynamic Etag? i may use generateUUID() function to generate a Etag if you want.. @igrigorik i don't really know anymore, and since we don't really know how Fastly is really working under the hood. I would say, let's give it a try and see.\nI'll change to Cache-Control: private, no-store tonight.. Done, sorry i was a little busy. ",
    "triblondon": "Here's an up to date link to the content that used to be at the location linked in the previous issue:\nhttps://docs.fastly.com/guides/basic-concepts/how-caching-and-cdns-work#cache-control\n(obviously a redirect would have been helpful, but that was before my time, and I haven't looked into why there wasn't one in this case)\nThe private token is sufficient to prevent any caching of assets by Fastly, assuming a customer has not overridden the default semantics of Cache-Control in their configuration of their Fastly instance (I can't speak for Github but they'd posted on that previous issue to say they respect normal HTTP caching rules).  no-store should prevent caching in the user-agent but it is not respected by Fastly, see:\nhttps://community.fastly.com/t/caching-happens-when-no-cache-or-no-store-requested/64\nno-store has interesting semantics: it is actually intended to flag content that is sensitive enough that it must not be written to non-volatile storage.  There's an argument that including both tokens is meaningfully expressive in this case, and seems to be the most practical way of avoiding caching in both the browser and on the Edge.. Sorry, I was wrong in my initial response above, and I've amended my comment to reflect the fact that Fastly does not respect no-store. Here's an up to date link to the content that used to be at the location linked in the previous issue:\nhttps://docs.fastly.com/guides/basic-concepts/how-caching-and-cdns-work#cache-control\n(obviously a redirect would have been helpful, but that was before my time, and I haven't looked into why there wasn't one in this case)\nThe private token is sufficient to prevent any caching of assets by Fastly, assuming a customer has not overridden the default semantics of Cache-Control in their configuration of their Fastly instance (I can't speak for Github but they'd posted on that previous issue to say they respect normal HTTP caching rules).  no-store should prevent caching in the user-agent but it is not respected by Fastly, see:\nhttps://community.fastly.com/t/caching-happens-when-no-cache-or-no-store-requested/64\nno-store has interesting semantics: it is actually intended to flag content that is sensitive enough that it must not be written to non-volatile storage.  There's an argument that including both tokens is meaningfully expressive in this case, and seems to be the most practical way of avoiding caching in both the browser and on the Edge.. Sorry, I was wrong in my initial response above, and I've amended my comment to reflect the fact that Fastly does not respect no-store. ",
    "mxbi": "@kshitijb I tried that, however when I deploy I am simply getting an HTTP 500 error when I try visiting the page, see https://mxbi-beacon.appspot.com/\nEDIT: Looking at the app engine logs I see the error in go is:\npanic: open ga-beacon/page.html: no such file or directory\nI've tried copying the stuff from inside the ga-beacon subdirectory to the root directory instead of simply moving it, so that the original page.html file still exists. However, I still get the same error.. @kshitijb Okay, by changing the pageTemplate value as suggested and then deleting the original files (only keeping the files in the root directory and not in the subfolder - without doing this I still got the error as it was using both go files for some reason) I was able to get the service to deploy without any errors! Thanks for the help,\nI'll put the changes into a quick pull request (once I test that the beacon functionality actually reports to google analytics). @kshitijb I tried that, however when I deploy I am simply getting an HTTP 500 error when I try visiting the page, see https://mxbi-beacon.appspot.com/\nEDIT: Looking at the app engine logs I see the error in go is:\npanic: open ga-beacon/page.html: no such file or directory\nI've tried copying the stuff from inside the ga-beacon subdirectory to the root directory instead of simply moving it, so that the original page.html file still exists. However, I still get the same error.. @kshitijb Okay, by changing the pageTemplate value as suggested and then deleting the original files (only keeping the files in the root directory and not in the subfolder - without doing this I still got the error as it was using both go files for some reason) I was able to get the service to deploy without any errors! Thanks for the help,\nI'll put the changes into a quick pull request (once I test that the beacon functionality actually reports to google analytics). "
}