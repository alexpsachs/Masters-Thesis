{
    "hybridauth": "myself i was also planning to update to the 3.2.0.. thanks for the reminder Teun\n. Thanks Robert\n. actually it should be \"stored data\".\nthanks a lot! ill fix that\n. Thanks a lot!\n. Thanks Robert!\n. Thanks!\n. Thanks Nicolas!\n. sound like extra work for the lazy me xd but okey starting from the next one\n. actually it does since 2.0.11. I just need to update the user guide\nfacebook scope and dialog display can be set from the config :\n\"Facebook\" => array ( \n    \"enabled\" => true,\n    \"keys\"    => array ( \"id\" => \"\", \"secret\" => \"\" ), \n    \"scope\"   => \"\", // http://developers.facebook.com/docs/reference/api/permissions. \n    \"display\" => \"\"  // http://developers.facebook.com/docs/reference/dialogs#display\n),\n. Hopefully soon\nThanks!\n. Thanks Sebastian!\n. Awesome! Thanks @guiltar !\n. Thanks a lot Sebastian!\n. Until someone take this request out of his/her kindness and tender mercies, I'll close this for now :)\n. Thanks!\n. and I'm \"terribly\" late on this..\nThank you immensely @jhuet! You answer is spot on. \n@dall if you still have this (or any other) issue then feel free to open a new one.\n. Hi all,\nFirst, I deeply apologize for the tremendous delay. \nWhile I agree with most, if not all of what @EvanDotPro said, I also would like to know, if possible, the major consensus of the people here about these two questions:\n-   should Hybridauth 3.x do more of the same thing, but attempt to do it better; or,\n-   should Hybridauth \"evolve\" to a new model and/or provide new features.\nBelieving that Hybridauth 2.x core really needs some serious rework and that a consensus based process would be the best approach to solve this. Your comments, contributions and criticism are more than welcome and greatly appreciated.\nA draft Roadmap could be found at Hybridauth wiki.\nPlease feel free to edit the document for any improvements or suggestions.\nhttps://github.com/hybridauth/hybridauth/wiki/HybridAuth-3.x-Roadmap\nA proposal of Hybridauth 3.0:\nhttps://github.com/hybridauth/hybridauth/tree/3.0.0\nThanks!\n. @jeffreytgilbert \n\nIs MySpace no longer a relevant login worth maintaining? \n\nactually MySpace still worth maintaining. I just think this could be done separately.\nthe way projects are maintained have dramatically changed in the PHP community due to the growing popularity of both Git and Composer. and my idea is to join the best of the both worlds by,\na) only maintain the most used providers within the upstream branch (https://www.google.com/search?q=social+login+preferences), so any changes on these providers APIs could be made on a timely fashion, while \nb) giving the opportunity for other to create and maintain their own services adapters.\n\nBetter encapsulation using OOP for profiles where the data given back arent in public variables \n\nbeside that I hate accessors and mutators, User Profile Model is merely a structured container and in most cases it only contain data as retrieved from providers APIs.\n\nBetter error handling by throwing exceptions that map to specific errors\n\nI took this into account, however, I opted for using error codes rather then creating multiples exceptions.\nhttps://github.com/hybridauth/hybridauth/blob/3.0.0/src/Hybridauth/Exception.php\n\nsupport for multiple sign ons from the same provider would be huge. \n\nthere actually a workaround for this.. but this request is worth a thought for sure\nhttps://groups.google.com/d/msg/hybridauth/z48yHZ-KKxE/kcUrTrTJkREJ\n@jeffreytgilbert, @patcon\n\nNot adopting and staying clear of passing around hashed arrays in place of parameters to methods \n\nI believe this is due to the lack of proper class method overloading with PHP, and arrays are mainly used as a workaround..\nI'm ok with using method args when possible, but ultimately, arrays will be used to make life a bit easier.\n@Danizord\nSure. Thanks for pointing this as well.\nonce again, these are just my thoughts ..\n. I usually avoid writing getters and setters not out of laziness, as a matter of fact I do not use IDEs w/ code completion nor I do like them :)\nthere is a long long list of good reasons for why getters and setters should be used in which I agree as well, but my point is: there is no need for then when using raw data like the users profile. \nnonetheless, if other people disagree, then it's fair enough and getters shall be used.\n. Welp, Okey.\nFollowing that approach and recommendations, here's three possible examples of using Hybridauth:\nex1: ( using a config array and defaults )\n``` php\ninclude \"src/Hybridauth/Hybridauth.php\" ;\n\\Hybridauth\\Hybridauth::registerAutoloader();\n$config = array(\n    \"base_url\" => \"http://domain.com/path/to/hybridauth/src/\",\n    \"providers\" => array( \n        \"Google\" => array(\n            \"enabled\" => true,\n            \"keys\" => array ( 'key' => '.apps.googleusercontent.com', \"secret\" => '' )\n        )\n    ) \n);\n$profile = ( new \\Hybridauth\\Hybridauth( $config ) )->authenticate( \"Google\" )->getApi()->getUserProfile();\necho 'Hi ' . $profile->getDisplayName();\n```\nex2: (flexible but verbose; no config required)\n``` php\ninclude \"src/Hybridauth/Hybridauth.php\" ;\n\\Hybridauth\\Hybridauth::registerAutoloader();\n$hybridauth = new \\Hybridauth\\Hybridauth();\n$adapter = $hybridauth->getAdapter( \"Google\" );\n$adapter->getAuthService()->setApplicationId( '.apps.googleusercontent.com' );\n$adapter->getAuthService()->setApplicationSecret( '' );\n$adapter->getAuthService()->setApplicationScope( 'https://www.googleapis.com/auth/userinfo.profile' );\n$adapter->getAuthService()->setEndpointBaseUri('https://www.googleapis.com/oauth2/v1/');\n$adapter->getAuthService()->setEndpointRedirectUri( 'http://domain.com/path/to/hybridauth/src/');\n$adapter->getAuthService()->setEndpointAuthorizeUri('https://accounts.google.com/o/oauth2/auth');\n$adapter->getAuthService()->setEndpointRequestTokenUri('https://accounts.google.com/o/oauth2/token');\n$adapter->getAuthService()->setEndpointTokenInfoUri('https://www.googleapis.com/oauth2/v1/tokeninfo');\n$adapter->getAuthService()->setEndpointAuthorizeUriAdditionalParameters(array( 'access_type' => 'offline' ));\n$adapter->authenticate();\n$profile = $adapter->getApi()->getUserProfile();\necho 'Hi ' . $profile->getDisplayName();\n```\nex3: Using a stored tokens\n``` php\ninclude \"src/Hybridauth/Hybridauth.php\" ;\n\\Hybridauth\\Hybridauth::registerAutoloader();\n$hybridauth = new \\Hybridauth\\Hybridauth();\n$adapter = $hybridauth->getAdapter( \"Google\" );\n$profile = $adapter->getApi( 'ya29.****' )->getUserProfile();\necho 'Hi ' . $profile->getDisplayName();\n```\nThoughts?\n. sorry I wasn't clear. this is actually a proposal for Hybridauth 3.x public API.\nI just want to make sure that most people here would agree on that before implementing it this way.. \n. @jacksonp \nHa 3 is more about refactoring the library internally to make it more extensible/flexible (ex2) and for the most part will be kept compatible with 2.x (ex 1)\n. perfect! thanks!\nas for google get user's contacts, ill think about tho..\n. Thanks!\n. Ill look into this asaic\nAgain, thanks Ayrat for your great work! \n. Thanks @abxccd. \n. Facebook have been updated on a recent PR and the issue should be fixed by now.\nCould you please make another PR for the requested change for twitter? I will add the new enpoints changes on 1.1 as an extra config param later on as well.\nThanks a lot!\n. Thanks!\n. Thanks Jack!\n. Live still working fine for me with the old end points, however I checked MSDN and confirmed the new changes.\nThanks!\n. Hybridauth is supposed to be flexible. It dosn't interfere/care/needs specific urls and, or database schema.\nand sorry for the tremendous delay..\n. Thanks!\n. Im not sure if this still relevant, but if it does, then please feel free to open a new one.\n. done.\nThank you!\n. @oniz93 are you still having this issue?\n. Closing for inactivity. Feel free to reopen if needed. \n. done.\nThank you!\n. Thanks!\n. Hybrid_Provider_Adapter::getAccessToken() do export session data per provider but there is none to do the reverse\nhttp://hybridauth.sourceforge.net/apidoc.html\n. Thanks @mistergiri for your PR, but I won't accept it. All requirements check are going to be removed from HA code. \n. I do not have the means to test this nor enough knowledge on this area.. Could you please make a PR to fix the issue you have?\nThanks!\n. fixed by now.\nThank you!\n. for what end?\nThe api link is tagged as deprecated and also I believe its possible for google apps users to authenticate using Hybridauth Google provider (based on OAuth 2.0)\n. Merci!\n. the issue is that google send a refresh token only the first time when the user consent, so if it happen that you store the user session each time he login, the refresh token will be overwritten .  \nPersonally i don't know the perfect solution for that, but check these links for more insight: \nhttps://developers.google.com/accounts/docs/OAuth2WebServer#offline\nhttp://hybridauth.sourceforge.net/userguide/IDProvider_info_Google.html (Configuration & Usage)\n. Thanks Chris!\n. Thanks a lot!\n. Thanks a lot!\n. Thanks!\n. I'm not sure about the \"casting\" nor how and where HA is \"allowing public access to private variables\", but yeah I definitely agree with your regarding the need for a better exceptions handling on HA and I'm actually planning to fix that on the coming major release (https://github.com/hybridauth/hybridauth/tree/3.0.0)\nThanks Jeff for your feedback!\n. @rikiless what do you suggest to replace \"serialising exceptions\" \n. Thanks Ignat!\n. Andreas, thanks for the PR and all the work you have done on it. however things are more or less settled for hybridauth 2.x and I'm not sure if its a good idea to make these changes now nor how it will affect people already using hybridauth with their projects..\nnonetheless, I definitely agree with you on this subject and I already implemented an autoloader in compliance with PSR-0 for the coming 3.x release (https://github.com/hybridauth/hybridauth/tree/3.0.0) \n. this make sense, many thanks!\n. ahead as usual F21 \nwhen using \"auth_type\" => \"reauthenticate\", getUser() always returns a 0. did you encounter this issue?\n. deal!\ngood thing you reported it.. I stumbled upon that link when looking for the issue today but I was too lazy to fill their forms just for the \"reproducible\" thing :sleeping: \nmany thanks\n. Closing the issue for now, feel free to reopen.\n. hybridauth is using the official facebook SDK and unless there's a very good reason, I would prefer not to hackaround these files.\nI would suggest, however, to inculde your modified version of fb sdk before Auth.php\nhttps://github.com/hybridauth/hybridauth/blob/master/hybridauth/Hybrid/Providers/Facebook.php#L29-L32\n. I guess Draugiem require an invitation?\nWell, magic :8ball: says \"Yes\", so I'll take your word for it, for now :)\nThanks a lot Jancis! \n. Feel free to reopen if the issue persists for you.\n. Closing for inactivity. Feel free to reopen if needed. \n. Thanks a lot\n. Thanks @Pststudio \n. Thank you so much for the insight @uzyn,\nThank you @patcon for bringing this subject up,\nAnd Thank you @ceeram for ccing your self.\nI have not tried out Opauth, but I read the entire code base and I think @uzyn answer sums things up quite well.\nHybridauth main goal is to act as an abstract api and could be used for authentication and also to access providers APIs in a standardized manner. even tho, and technically speaking, Opauth is definitely capable of doing the same as well. \nHybridauth is also different than Opauth in that it's centralized. However, things may change with Hybridauth 3.x: #34, https://github.com/hybridauth/hybridauth/blob/3.0.0/README.md\nIn this regard, I would like also to share with you some of the project background:\nI wrote Hybridauth back on march 2009 for one of my projects. At that point, and mainly because I've had to come a solution as quickly as I could, Hybridauth consisted of a collection of already exsiten php libraries for each of the supported providers (http://sourceforge.net/p/hybridauth/code/48/tree/1.1/hybridauth/Hybrid/thirdparty/) along a thin layer of code which attempt to abstracts them all into one single \"interface\" and to provides an unified authentication process and a standardized user profile across all the said libraries.\nafter that, and believing that it would be somehow usefull for other people, I released it as Hybridauth 1.0.something on sourceforge.net; and the project was very fortunate in that a number of people took interest in it and submitted fixes, enhancements and new ideas (by the way, I would like to thank everyone of them).\nwith Hybridauth 2.x, things has slightly changed, in which:\n- Hybridauth now attempt to provides (when possible) a direct access to providers apis and a standardized ways to grap users friends list, activity and status updates,\n- it provides, at its core, three templates (for both oauth and openid) for anyone wishing to implement their own adapters,\n- only wrapping a very limited number of the old libraries (facebook sdk, LightOpenID and linkedinphp),\n- among other things http://hybridauth.sourceforge.net/roadmap.html\n. I believe you are using the the 3.x branch? Just to mention, that branch still a work in progress and not a production ready yet.\n. Thanks @kreitje.\n. Thanks!\n. @elyobo actually yes expect for those messages, they are purposely made that way.\n. We'll add that to the userguide. Thanks.\n. Closing as no answer. Feel free to reopen if needed. \n. I guess #108 solve this one as well\n. Well thank you for the suggestion.\n. http://hybridauth.sourceforge.net/userguide/tuts/specific-provider-wrapper.html \n. I totally wish I had the time and motivation to pick up this project again but for the time being I can not, therfore I deeply apologize for anyone who felt let down or disappointed..\nIf @AdwinTrave or someone could lend me a helping hand with these PRs, then please let me know on this same thread and I'll gladly add him as a collaborator.\nThank you, much.\n. I added both @AdwinTrave and @dashohoxha as github collaborators for this project. \nThank you immensely in advance.\n. I agree as well, however I will leave you guys to decide. Also, I added @SocalNick as collaborator to this repo.\n.. as for the download links on http://hybridauth.sf.net, I will redirect all of them to https://github.com/hybridauth/hybridauth/tags instead, as soon as you create a new release here.\n. done.\n. Please do not proceed with that. I guess the both of us can agree that it's neither the priority nor the timing for such changes.\nFurther more, from reading the past discussions its clear that most of the people are opposing this, @AdwinTrave, @SocalNick and me included.\nTo be clear:\n- 2.x bug fixes and minor improvements\n- 3.x open for discussion.\nThanks for understanding.\n. @dashohoxha,\nI can understand your point of view even tho I disagree with it.\nThank you nonetheless for everything you have done so far for this project. Thank you immensely and Good luck, and please feel welcome to participate again whenever you want.\n. Okey, done.\n. hybridauth have no means to know if a user is connected to an IDP or not, however it provides the tools to deal with such cases.\nhere's an example:\n```\n$hybridauth = new Hybrid_Auth( $config );\n$provider = 'facebook';\n$adapter = null;\ntry{\n    $adapter = $hybridauth->getAdapter( $provider );\n$user_profile = $adapter->getUserProfile();\n\n}\ncatch( Exception $e ){\n    // User not connected?\n    if( $e->getCode() == 6 || $e->getCode() == 7 ){ \n        // log the user out (erase his session locally)\n        $adapter->logout();\n    // try to authenticate again \n    $adapter = $hybridauth->authenticate( $provider );\n}\n\n}\n```\nClosing the for now, feel free to reopen if this still an issue.\n. Closing this as not reproducible. Feel free to reopen with more details. \n. Closing this as not reproducible. Feel free to reopen with more details.\n. this is an expected behavior. hybridauth do not logout users form identities providers, because these said providers differ on that subject: While few IDPs (like facebook) allow third party websites to log their users out, most of them do not (google, twitter, etc). so, we decided not to interfere.\non a side and personal note, for argument sake. I think I would be a little bit pissed if some random website logged me out of my facebook without my consent p\nanyway, you still could logout a user manually if you want. ex:\n```\n$adapter = $hybridauth->getAdapter( 'facebook' );\n$params = array( \n    // 'next' => 'https://www.myapp.com/after_logout' // optional\n);\n$fb_logout_url = $adapter->api()->getLogoutUrl( $params ); \nheader( \"Location: $fb_logout_url\" );\n```\nor, you can force a user to login (re-prompted for consent in the idp side) each time you want him to connect, but this is not supported by all providers tho: #293\n. Class Hybrid_User_Profile should not be changed.\nI'll close #224 as well.\n. Closing this as not reproducible. Feel free to reopen if this is still an issue.\n. Closing this since this is done.\n. Closing ths issue. Feel free to reopen with more details. \n. hybridauth examples are provided for convenience and reference only. their initial purpose were to demonstrate how to use the library in a very simple way, but now I think they are no longer needed: there's more than enough documentation and help in the community to get new people started, so yeah, I agree with @abgit.\nI'll schedule them for removal.\n. Please read #220\n. > I also believe that he lives in unstable part of the world so he might not have Internet access anymore.\nYeah, life is tough now, but not that bad :)\nAdwin, if you have an sf.net account, please email it to me and ima add you as admin there so you can access the webhosting/sftp service.\nBtw, I already made some changes on hybridauth.sf.net. The download page now redirect to github and I also deleted the setup page from the userguide.\nThank you very much!\n. as @AdwinTrave said, this is an old issue. you should use a newer version of hybridauth.\nhttps://github.com/hybridauth/hybridauth/releases\n. Awesome. I guess this should replace the old QQ adapter  and it answers #207.\nThank you much!\n. Moved to folder hybridauth/additional-providers/hybridauth-qq/Providers : https://github.com/hybridauth/hybridauth/commit/f30441629a4d1cff4c24e0099b5e9c708b60cf88\n. Thank you.\n. ",
    "ajacksified": "Closing this so I can fix the @s everywhere.\n. ",
    "fahey": "No problem. I'm going through the examples right now and have a lot more similar little corrections that I'll pass on to you.\n. ",
    "ikwattro": "thanks\n. ",
    "Slayer911": "Few months after commit with this future, property \"display\" will be removed from class \n\"hybridauth/Hybrid/Providers/Facebook.php\"\nCommit with removed property \"display\", and added static \"display=pages\" in function\nfunction loginBegin(){\nhttps://github.com/hybridauth/hybridauth/commit/87b6e19ffc75992c91a2f1e93ca2628cb176d627\nNow this file do not have any \"display\" url params \nhttps://github.com/hybridauth/hybridauth/blob/master/src/Provider/Facebook.php\nHow now i can add this param to login url ?. ",
    "sebilasse": "fixed and opened pull request\n. Instagram should work! \ndisqus does not, saying \"wrong api version\" - ideas anybody?\n. ",
    "ingeting": "+1\n. ",
    "SocalNick": "+1\n. @AdwinTrave can we tag something (latest master) as 2.1.0 if it is stable? It doesn't need to be perfect, it just needs to work. Any bug fixes can continue in 2.1.x and be merged into 2.2.x.\n. Please don't merge 3.0.0 into master until we get a stable 2.x release tagged.\n. +1\n. @AdwinTrave - if you've tested, go for it.\n. +1\n. +1\n. +1\n. @AdwinTrave, @dashohoxha, and @hybridauth  - What we really need here are some sensible tagged releases so people don't have to depend on latest master, or worse yet, master on someone else's fork. I would like to help with this as I have a Zend Framework 2 module that depends on hybridauth.\n. I vote for all providers in the same repo - if we put each provider in a separate repo we will have to manage releases across every repo. No thanks...\nModern frameworks + composer will alleviate any performance concerns by handling auto-loading of classes just-in-time.\n. Sorry - to be clear, all providers in the core repo.\n. I think this will set us up for failure as it will be a maintenance nightmare. You don't need separate repos, you can have multiple packages in the same repo, each with it's own composer.json. Each package can be submitted to Packagist and the user will simply require their desired packages, i.e. hybridauth-facebook or hybridauth-google. This will make certain that each provider has a release corresponding to each version of hybridauth-core.\nTake a look at ZendFramework 2 as an example:\nRepo: https://github.com/zendframework/zf2\nPackage level composer.json: https://github.com/zendframework/zf2/blob/master/library/Zend/Authentication/composer.json\nPackage on Packagist: https://packagist.org/packages/zendframework/zend-authentication\nWhen you require zendframework/zend-authentication, the dependencies are satisfied by installing zendframework/zend-stdlib, another package in the zendframework/zf2.\n. @dashohoxha: http://socalnick.github.io/ - I also developed and maintain a social authentication module for ZF2 than depends on HybridAuth and has nearly 9000 installs. I have contributed several fixes to HybridAuth, however, I became discouraged about the future of HybridAuth because your attitude on various threads and your inclination to undo the progress made in the PHP community towards standardization and better coding practices. Good riddance...\n. +1 - Guzzle uses cURL by default but can work without cURL by using PHP's HTTP stream wrapper.\n. Duplicate of #215 \n. Saw that, not sure why. I don't have access to the Github hooks to try to re-trigger Packagist. \n. @hybridauth any chance you could double check the Packagist hook settings and possibly re-trigger the hook by running the test?\n. Looks like we are good...\n. File on https://github.com/SocalNick/ScnSocialAuth/issues\nI'll try to take a look. \n. @AdwinTrave - do you have a release planned with this fix? I would do it but haven't been as involved and don't want to step on your toes.\nThanks!\n. @AdwinTrave - #430 fixes this. Please cut 2.4.1 including this fix.\n. You shouldn't be changing the composer.json of an upstream package.\n. ",
    "rhutchison": "+1\n. +1\n. ",
    "dlanileonardo": "+1\n. ",
    "hexathos": "there is support... https://packagist.org/packages/hybridauth/hybridauth :D\n. ",
    "PrplHaz4": "see http://www.yiiframework.com/extension/yiiauth/ for a Yii extension.\nOther supported frameworks/applications should prob be added to the official HybridAuth doc as they are for this similar component:  http://opauth.org/\n. It should definitely be possible. I had started on the provider but got sidetracked with other issues. PPs oauth2 provider (PayPal access) is still in beta, so may see some changes before final. \n. I agree as well...it would be great to prevent the proliferation of hybridauth-like libraries if possible, and these steps will help keep it relevant. \n. I have been following both efforts for a while - the opauth library probably had better timing (to take advantage of some more progressive practices), but is lacking in documentation (and community as you've stated).  Either way, t's a good opportunity to get the collective effort heading in the right direction.\n. :+1: I think @AdwinTrave proposed solution is the best way forward, and it seems like the timing is right as well.\n. thanks @pavlyuts - have been bothered by this for ages!\nthanks @AdwinTrave for picking up the project!\n. @pavlyuts I have not actively worked on anything with Hybridauth for quite some time, as its future was unclear....\n. I actually noticed this problem (I beleive it's the same) when doing some automated tests - switching between users for acceptance testing - definitely caused me some problems and left things in an unpredictable state, despite making sure I did $adapter -> logout(); between logging out/in the different users.  Wish I could provide a more complete description of what's going on for you....\n. @miled @nazar-pc  that is largely true for an individual developer, but the fact is this is now a community project getting contributions from all over.\nPSR-2 is a simple, well understood guideline that is easy to apply and pretty thoroughly documented.  I don't necessarily agree with all of the guidelines but IMO, having a standard that is easy to follow is more important than wasting time on a holy war over spaces and tabs.\n. @ApacheEx @StorytellerCZ, @miled used to respond to the support address...might be worth a shot? hybridauth@gmail.com . ",
    "mastermunj": "@hybridauth, This seems a nice & helpful change. Do you think this could be merged in?\n. ",
    "StorytellerCZ": "Might be considered for 3.x branch, but I'm not sure how many people would utilize it.\n. v3 dev is currently PSR-4 compliant\n. Yes\n. Can't say yes or no. I rarely use the LinkedIn provider so I won't get to it anytime soon, so maybe somebody else might take up on that and submit a PR.\n. Will be implemented in 3.0\n. Is this still an issue?\n. We will be using the Github tags.\n. @SocalNick Done!\n. 3.0.0 by my understanding was a rewrite that adds autoloading and other new stuff in PHP to Hybrid Auth.\n. Reopening\n. We could look into making it into 2.3\n. I would like this to be the main thing for the next minor version release v2.3. Waiting for v3 would take too long and as mentioned above it would be nice to have earlier rather than later.\n. Is this still an issue or was it already fixed?\n. @Pavlovi Can you please check that this problem still exists and if yes, would you be so kind and submit a PR request with the fix? Thanks!\n. Can you please check that this problem still exists and if yes, would you be so kind and submit a PR request with the fix if you have one? Thanks!\n. I'm with @hybridauth in the exceptions. Even though you have a point @elyobo this would require change everywhere. That is a major change and since there are other things related to this as well, it will have to wait till 3.0\n. With changes to logging I think we could include this in the v2.3 release. Since it's a minor release changing the functionality like this is fine.\n. Can you please check that this problem still exists and if yes, would you be so kind and submit a PR request with the fix if you have one? Thanks!\n. @cidious  Can you please check that this problem still exists ? Thanks!\n. I guess this still happens? Any similar experiences in other versions of PHP?\n. #267 \n. Can you please check that this problem still exists and if yes, would you be so kind and submit a PR request with the fixes? Thanks!\n. Looks to me that there is a check at the beginning of the code to check if session is started, so this should no longer be happening. Therefore closing this issue.\n. @elyobo Can you please update this?\n. Similar to #87 \n. @dashohoxha, @SocalNick What are you thoughts on this one? I would like to merge.\n. Please check that these errors are still present and if yes, please submit a PR with the fixes.\n. Looking at the current code, it is there.\n. Please update and separate stuff from the other providers. A new PR would be great.\n. I've added this and few other pull requests in my Hybrid Auth repository https://github.com/AdwinTrave/hybridauth if people are interested.\n. @dashohoxha, @SocalNick What are you thoughts on this one? I would like to merge.\n. I have it in my CI integration and haven't had any problems.\n. @dashohoxha, @SocalNick What are you thoughts on this one? I would like to merge.\n. Same as #124\n. I've added this and few other pull requests in my Hybrid Auth repository https://github.com/AdwinTrave/hybridauth if people are interested.\n. @dashohoxha, @SocalNick What are you thoughts on this one? I would like to merge.\n. I've added this and few other pull requests in my Hybrid Auth repository https://github.com/AdwinTrave/hybridauth if people are interested.\n. @SocalNick and @dashohoxha what are you thoughts on this?\n. It looks like completely new code, so I'm merging it.\n. I have merged another fix to this problem. Can you check that it is now fixed?\n. I've added this and few other pull requests in my Hybrid Auth repository https://github.com/AdwinTrave/hybridauth\n. I've merged this fix into my branch https://github.com/AdwinTrave/hybridauth if people are interested.\n. @luhla I would like to have one function that can account for different possibilities instead of two options that the user needs to try to see if one works or not. Would that be possible for you to do?\n. Was dependent on #140\n. I think this should be defined in the specific provider, not in the Hybrid Auth itself.\n. I've added this and few other pull requests in my Hybrid Auth repository https://github.com/AdwinTrave/hybridauth if people are interested in having this.\n. I don't see a reason to do this, at least not in the 2.x branch.\n. I've added this and few other pull requests in my Hybrid Auth repository https://github.com/AdwinTrave/hybridauth if people are interested in having this.\n. I've added this and few other pull requests in my Hybrid Auth repository https://github.com/AdwinTrave/hybridauth\nI'm willing to merge pull requests and do some maintenance if people are interested.\n. @pavlyuts Any of those are possible. If you already have a branch of Hybrid auth you can merge the changes from mine and then make merge requests which work better if there is need for additional changes.\nAs for taking over the master branch that is not my decision to make.\n. My problem is that I have been using Hybrid Auth for only a little while, so I don't know all the ins and outs of the system. So in that aspect I feel a bit reluctant in taking over the main repo, especially since I think there are better candidates out there.\n. @hybridauth I'm more than willing to help with PRs, I won't be able to do any development for a while (except for small fixes), till I get more experience with the inner works of Hybrid Auth.\n. @pavlyuts I'm with you on the tag. We are currently in the process of reviewing the other PRs. After we are done with that, we will make the tag/release. But according to the website we should now be at 2.1.2\nAlso considering the additional providers we might be adding and the need to remove MySpace provider (they no longer have API), it would be more appropriate for it to be 2.2.\n. +1 for issue tracking and wiki\n. @hybridauth Thanks!\n. Is there any issue if the extra parameter isn't defined in config?\n. I think this is something to be considered for 3.0. The problem with this is that we don't want to include too much stuff in the core. Then again you have a good point that each part of the world has a different major social networks. So I think having all the providers in one place should be the way to go. @SocalNick and @dashohoxha what are you thoughts on this?\n. @ADmad I mostly agree with you. I think the project should focus on developing the core libraries which are used to communicate with providers. As for providers, there should be all in one place and then people can choose and copy only those that they want.\n. @pavlyuts That's why we have this debate. :smiley: \n. @nazar-pc :+1: \n. Well, we still have time to decide on this and I think it will depend a lot on how the 3.0 is going to look.\n. @SocalNick is for all providers in the core repo.\n@dashohoxha is for moving all provider from the core repo and having them live on their own, completely independent of the project.\nI'm in between. I do think that this repo should be free of providers and focus on core only, but at the same time I think that the providers should be somewhere, where we can easily find them and not just under some user moving into the 3.x version (for 2.x it should stay as is). If they are completely on their own it will create the same issues like we had here before @hybridauth came back and made us collaborators for the repo, for the project to move forward. I think there needs to be a centralized point of reference. The best solution would be to create hybridauth as an organization and move this repo under it, then create independent repositories for each provider. This will allow assignment of people to manage each provider and would prevent the issue where maintainer moves on without designating which person is continuing the development on their own personal account, creating confusion for people who use the given provider.\nIn short let's make Hybrid Auth look more professional.\n. @dashohoxha Calm down, I said that HybridAuth should become an organization which would allow the management to be spread over multiple people and decrease points of failure. My main point is for centralized space to decrease the chaos.\nRight now we are in the process of discussing ideas. What we decide here is going to have lasting impact on the project, so its important to make the right decision. This will take a bit of time and it won't be implemented till 3.x version.\nCurrently the master branch is still developing the 2.2.x branch until we reach decision that we won't develop any more fixes for that branch and will fully focus on 3.x (I don't think everyone is at that point yet, because we haven't made all the decisions that are needed for us to move forward).\nLooking at the 3.x branch that looks like development from scratch with reference to the 2.x branch which is what we are looking at (because it adds some of the new PHP features that were not available before, like namespacing, autoloading, etc.).\nThere are other things that need to be addressed as well, for which I would like to have an online conference of some sort next week if possible (that is the quickest way to make decision and make sure that there is no miscommunication).\n. @nazar-pc Now that is an interesting idea. And compromise on multiple of the ideas that were proposed here. I think it might even be better than my proposal. Although I can see some of the drawbacks as well.\n. Doesn't look duplicate to me. The first one checks if there display name set at the provider and sets it. The one you are trying to remove works on the possibility that there isn't such a value at the provider and hence creates the value from first and last name.\n. If you want separate repositories, then the entire system how HybridAuth is managed on GitHub needs to be reworked. Currently HybridAuth is a user, what we need is an organization that will have multiple repositories with the different providers in it, otherwise individual users are going to take up the different providers and there won't be a central point to which to refer or submit patches.\n. +1\n. @zdenekca We will need to unify the providers for the next release.\n. Seems fine to me.\n. @dashohoxha we are discussing this in #153. I think we need to have a conference call or something to iron out the details.\n@willerz-dotank Is there any interference with the regular Facebook functionality? I'm not sure if I'll get around to test the regular functionality this week or not, so any testing you could do on your side would be helpful.\n. I strongly disagree with this. At least for the 2.x branch. This is a major change (and breakage), that makes sense when jumping to 3.x, but not when going 2.1 -> 2.2\nAlso bash script isn't solving the issue. It's just a hotfix.\nPlease let's resolve this first in #153, before we make any actual breaking changes.\n. For the 2.x branch there really isn't much. We ask people to adhere to PSR standards, but it won't be enforce till 3.x comes around, right now the focus is to update providers and fix found bugs.\n. Closing for duplicity with #34 \n. That is something that @hybridauth will have to do and this also goes into the #163 debate as well.\n. Might be just waiting for Facebook or other providers to respond. I'll keep an eye out for this, but if you could provide some more specifics or indicators where to look to speed things up, that would be great.\n. Seems to me more like a problem on the Microsoft side.\n. I just tried Live and it worked without a problem.\n. I'm using Hybrid via A3M so my endoint is a bit different, but you want to hit Hybrid/Endpoint.php\n. Got this on one of my site, the clue is in the url, not the page displayed. Here is what is in the url:\nhttps://login.live.com/err.srf?lc=1033#error=invalid_request&error_description=The provided value for the input parameter 'redirect_uri' is not valid. The expected value is 'https://login.live.com/oauth20_desktop.srf' or a URL which matches the redirect URI registered for this client application.\n. The first part works fine for me. Haven't logged in as I don't have Yahoo account.\n. @gaborsar Thanks! Let us know.\n. Merged. Can other people confirm that this has been fixed?\n. Are you using the CakePHP plugin? Is your HybridAuth version up to date with the code here on GitHub or did you just get it from the Sourceforge website?\n. In 3.x, not in the current one.\n. At least that is the plan. We'll see the reality once we get around to actually code it. \n. Rather than delete it should be set as a default to NULL or something like that.\n. If you could test it in another PHP 5.3 environment that would be great.\n. Please submit a merge request with the changes, so that you get credit for the fix.\n. #181 \n. Open up for debate about this. I will have to look more into this before I give opinion. What about others?\n. @F21 Thanks for the reference!\n. The problem with Guzzle is that it requires PHP 5.4, which can be an issue for many people, still due to lack of support from hosting providers.\n. That might be true, but still PHP 5.3 is the standard at majority hosting providers (http://w3techs.com/technologies/details/pl-php/5/all), it's unfortunate but the web is slow to upgrade on this. On the other hand if we estimate that we are going to take over a year to develop the new version, then this might be a good choice.\n. Since PHP 5.6 is coming out relatively soon, Guzzle and other things considered, using 5.4 for for HybridAuth 3 looks fine with me. We should also focus on building unit tests and adhering to the PSR standards.\n. I have not encountered this issue. Can you give us more information so that we can try to replicate the problem?\n. Hybrid Auth uses the Facebook php-sdk. I'm experiencing similar issue on some pages.\n. Also check #187 \n. This seems to be an issue with the settings, double check that the setting on the server side and at Yahoo are correct. Mainly the domain or authorized origin.\n. The optional parameters fro Google provider are: \"scope\", \"access_type\", \"redirect_uri\", \"approval_prompt\", \"hd\" So no, but feel free to add it and share this with everyone.\n. No. HybridAuth allows you to use SSL in your requests, but SSL settings is on you (your server) and the provider.\n. GitHub master is the most up to date version.\n. Please test the proposed fix.\n. #267 \n. Can you please share a link to this information?\n. Will have to see how it is going to be actually implemented. I can see that some changes might need to be made in the future, but it shouldn't affect HybridAuth for as long as the old API is going and users approve to share the information that your app needs to function properly.\n. Looking on how things are now, I'm for reducing the permissions requested by the provider to just focus on login. Leaving the feed reading and posting still there, but as an option rather than default. This would reduce the need to pass app review. Still that doesn't address the main issue what to do if certain permissions are not given. Right now the one that are required always are the basic information (the the user has to give them, which is the minimum we need).\n\nWhich will make sure that the basic stuff will work.\n. No, HybridAuth has OAuth1 implementation, so this does not apply.\n. Not in the official repository. Feel free to make one.\n. Please use StackOverflow.com for this. This is intended for development or bugs reporting.\n. Is screen_name unique identifier on vkontakte like uid? Why is this change necessary?\n. The 'displayName' could be could be change to use 'screen_name' over 'nickname' depending on how vkontakte distinguishes those two.\n. Thanks for the info. If nobody submits a fix for this, then I will remove qq from providers.\n. So far scheduled for removal in 2.3\n. Closing due to examples removal in 2.4. New examples should come in 2.5\n. Will do later today once I get back from my graduation ceremony. The latest two commits have made all the preparations needed at this stage.\n. Yes, now by default Facebook doesn't allow to post on user profile. You will need to request the additional privileges. There isn't much that we can do here about it.\n. Considering #272 as closing this issue unless @MoniqueHahnefeld says otherwise.\n. Put this way I see the problem for shared computers.\n. I'm aware of this and will look into migration, but would appreciate if somebody who is more familiar with Google+ could help.\n. I would be against it. Are those field really necessary for the basic login function?\nA potom se taky nab\u00edz\u00ed ot\u00e1zka jestli v\u0161echny polo\u017eky budou p\u0159\u00edstupn\u00e9 i pro ten omezen\u00fd p\u0159\u00edstup co mojeID m\u00e1.\n. http://www.mojeid.cz/page/1861/varianty-sluzby/\n. That is not the argument. We need to provide for everyone, not just for businesses. I would recommend to make two versions. First, standard one with the basic information that can be accessed in the free version (getting the only the data that are needed by HybridAuth). Once we know that the basic works we can start working on the second one. Second for the payed version with the extra information.\n. Sounds great!\n. Are they using OAuth or OpenID protocol?\n. Next time please also put info about this into change log with the pull request.\n. Please submit a pull request as you seem to have fixed this.\n. I think it references this:\n$url = $protocol . $_SERVER['HTTP_HOST'];\nBut why that would create an error I don't know.\n. Please update your fork with the recent changes and add message to changelog so that I can merge this. Also more description would be welcomed.\nThanks!\n. I don't have access to change what is on sourceforge (I'll look into getting it together with some new form of documentation and updating examples). The best I can do is to make a release here: https://github.com/hybridauth/hybridauth/releases\nCurrently I can't automatically merge this PR. I would love to do so, but I can't, until that changes.\n. https://github.com/heiglandreas/HybridAuth\n. Please submit a pull request with the changes so that you can get credit and others can benefit from your fix.\n. Please include a changelog message.\n. If you have an implementation and would like to submit it, then we would accept it. But I'm not building any providers unless I personally need them too. There are bigger priorities on the project right now.\n. Please add a changelog entry about this.\n. Will look into it.\nBut as is stated in install.php :\nFor security reason, please delete \"install.php\" file as soon as you complete the installation process\n. Did some changes, but I'm not an expert so this probably won't help much. So people who can do better should do and submit a PR to fix this.\n. @NodexTech is this issue fixed now or do you want to add more protection.\n@greggles I think there probably should be some logic that will require install.php be removed for it to work. Displaying some warning would be feasible only in actual implementations. But for starters I have added a message at the end of the install file to remove it after they install.\n. +1 @abgit \n. I'm against deleting index and config at this stage. Especially since we don't have access to Sourceforge to update the documentation.\n. Please submit a Pull Request with the changes you are suggesting.\n. ???\n. My guess is that you don't have the newest version (download it from this repository) or that there is an issue with the Facebook settings. Anyway you provide no information for me to be able to help you. From what little I know, this belongs to StackOverflow.\n. Yes, I know it will be fixed in the next release. Those are the only two places that I know about where the version is mentioned.\n. Are you using HybridAuth as is from here or via some plugin?\n. Might depend on the provider behavior, but in general if you put the login page into iframe I think should redirect inside that iframe. Haven't used iframes for over ten years now, so I might be mistaken. If I'm you will have to try a different approach.\n. Both of those commits are in master so it doesn't make much sense.\n. @Braunson Can you please check again that this is still the issue in the most up to date dev-master?\n. @Braunson Thanks!\n. Do you get some error or something? You don't provide any information at which we could start looking into the problem.\n. Thanks a lot for the fix!\n. I would recommend that you try to put in the development version of HybridAuth (v2.3) and see if that solves the problem. You give us too little info to identify where the problem can be. What provider are you trying to use. Are you using the HybridAuth Drupal plugin or making your own implementation?\n. Please contact the plugin creator and check that the error isn't in the implementation first. We can't fix any issues with third party plugins here. Also try stackoverflow.com\n. Here is Laravel 3 bundle: http://bundles.laravel.com/bundle/hybridauth\nIf you want to make another bundle go ahead, but it is out of the scope of this project.\n. Would be probably best to replace the current Facebook provider with this new one.\n. HybridAuth v3-dev is PHP 5.4 and will most likely remain like that.\nI will accept PR for third party providers that have higher requirements, but that will require inclusion of warning in the changelog and the new website/documentation.\n. It has implemented quiet a lot of things, but you will have to ask @miled about that.\n. You know, you could make a pull request with the fix?\n. Great, thanks!\n. More about it here: #241 \n. Because only the original author has access to sourceforge and he isn't answering any form of communication that I know on him. He setup everything for hybridauth without leaving much how to track him down personally.\nUnless @hybridauth changes it there sadly isn't much I can do.\n. @hybridauth \n. Please download the latest version from this repository and try again. v. 2.1.1 is outdated.\n. I'm not familiar with Zend nor with the module. From what I'm seeing here it looks like it's error within Zend EventManager. I think this could be caused with Zend trying to manage HybridAuth session or something in that style. What version of HybridAuth is the module using? Have you contacted the module creators?\n. I think it might be better to have a function that everyone can define what is going to happen with defaulting to redirect to homepage.\nHence something like:\nHybrid_Auth::onException( );\n. @dewa1t can you please submit a PR with the fix so that the fix can be attributed to you? Thanks!\n. This is the best I can do. I don't have access to the Sourceforge page, we need @hybridauth for that.\n. If a PR with this provider comes I'll be happy to merge it.\n. This does look to me more like an application problem. Please give us more information.\n. Please provide more information. This tells us nothing.\n. We don't have access to Sourceforge. Only @hybridauth has that and he is nowhere to be found.\n. Yes, any attempts to contact him failed. I also believe that he lives in unstable part of the world so he might not have Internet access anymore.\n. Sadly the 2.x branch doesn't support unit testing. It is something on the list of things for 3.0 release.\nBut any improvements to the 2.x branch to add unit testing are welcomed.\n. Yes, it is one of the parameters you get back from Twitter when people login. It will not capture it (unless you make changes to the code) on the way to twitter.\n. I do believe that was done a long time ago.\n. Windows style \\r\\n changed to \\n Why?\n. That shouldn't be a problem, although you should double check with the creator of that plugin.\n. Thoughts @miled ?\n. The demos are not up to date and the same with Facebook provider. https://github.com/hybridauth/hybridauth/issues/280\n. @miled I suggest that we remove the examples for now and make new ones for 2.5.0 or 3.0.\n. Examples removed in 2.4. New ones will be available in 2.5\n. You need to add it to that folder from additional providers:\nhttps://github.com/hybridauth/hybridauth/tree/master/additional-providers/hybridauth-tumblr/Providers\n. It should work fine as long as the user logs out of Facebook. The issue is that the first user is logged into Facebook when the second user comes in and when HybridAuth reaches out to Facebook it will get the data for the first user.\n. Any idea @miled ?\nI do remember that there was some issue with the logout functionality.\n. Thank you!\n. Different providers offer to redirect after login to specific page, please check the settings of that provider API.. Duplicate of #200\n. Not sure if the earlier commit fixes this, so please let me know.\n. Thank you!\n. Thank you very much!\n. #344 \nPlease move the provider into additional-providers and remove the config.php inserts, then I'll be happy to merge.\n. Thanks!\n. @VladyslavKurmaz I'm currently working on updating the sourceforge webpage. After I'm done with that I expect that it will be posted to its own repository or branch here on Github prior to release of v2.4\nI will update more on it in #369 \n. Will be added to the new version of the website. Preview bellow:\n\n. Please provide a PR next time.\n. You are merging into incorrect branch.\n. You will have to give us more information. Do you get any error?\n. Looks like nobody wrote it. Feel free to do so.\n. Thanks for the fix!\n. I will merge this, but after that I will remove the examples altogether. There will be new ones in 2.5\n. @timersys  Could you add more description of your changes? Your PR is changing quiet a few files including core ones. Also what is the extend of your testing?\n. OK, no problem.\nhttps://github.com/hybridauth/hybridauth/commit/42322caf31d3cbe757654c4c634a6aca28411767 - This one seems to be fixing an undefined constant instead of bad declaration on LinkedIn class.\nThe other seems fine.\n. Thanks a lot!\n. Thank you!\n. How much have you tested it?\n. Yeah, that would be nice at least for one minor version, just to be sure.\n. Thank you! If you could provide documentation into the gh-pages branch that would be greatly appreciated.\n. Definitely send a PR. It is easier to talk about it when we see exactly the changes you are suggesting.\n. Good idea, but looks like your editor changed the file formatting so its impossible to distinguish what are the specific changes you made, so I have to deny this. Please try to resubmit again without rewriting the entire file. Thanks!\n. Thank you! If you could provide documentation into the gh-pages branch that would be greatly appreciated.\n. Feel free to submit a Pull Request that adds it.\n. You might want to create it now for v3.. Thanks a lot!\n. I agree with you. HybridAuth 3.x is developed by @miled and I currently don't have the time to do much more then maintain what is already here. So it will depend on him and if somebody else steps up to.\n. Thank you! The only other thing is that you can make a documentation page with all the necessities on the gh-pages branch.\n. When I get time to resolve some other issues like #406 and #408. Some of it depends on @miled, but I think I'll get the time 2 weeks from now to do all the work for release, but no longer then 3 weeks.\n. Could you undo #296 here so it is all in one place? Thank you! Also a changelog message would be appreciated, but I can take care of that. ;)\n. #296 was changed on January 3rd, so it is part of 2.4 version and not the current 2.3 hence only people who keep up with the development branch depend on it.\n. @Remo So it should be:\nphp\n$this->api->curl_header = array(\"Authorization: OAuth \" . $this->access_token);\n???\n. Actually you are suppose to copy from the additional providers folder to the hybrid auth providers folders. Check the install.html in the additional providers folder for more info.\n. I agree with you, but would appreciate @miled feedback on this before merge.\n. Got an error:\nSeverity: Parsing Error\nMessage: syntax error, unexpected T_STATIC, expecting T_STRING or T_VARIABLE or '$'\nFilename: Hybrid/Endpoint.php\nLine Number: 69\nspecifically here:\nphp\npublic static function process( $request = NULL )\n{\n    new static( $request );\n}\n. Darm, looks like it. I fixed my hosting to 5.4, but the fix worked as well, at least we won't hear complains from legacy people.\n. Closing in favor of #471 as a possible for v3.. Closed via #415 \n. Thank you!\n. @miled \n. Have you tested it?\n. Have you changed your settings on the social media? Google for example is very strict on authorized domains.\n. That is strange indeed. Do you have the issue with Google only or with all providers?\n. This depends on your application implementation and saving cookies or using some other form. Providers often have some expiration time on their login as well.. There are still few things that I would like to resolve before 2.4, but in short it will be when the number of pull requests reaches zero.\n. Did not encounter, can you give us more info? What exactly are you trying to do with the provider?\n. Some links for reference:\nhttps://wordpress.org/support/topic/plugin-simple-twitter-connect-cannot-redeclare-class-oauthsignaturemethod_hmac_sha1\nhttps://www.drupal.org/node/1661494\n. @brili and @josiahgoff please check now after the fix merge and let us know if that fixed the error.\n. @SocalNick, @josiahgoff 2.4.1 is out\n@chadwick37 Do you have another authentication system on your website that could be beating heads with HybridAuth?\n. @miled \n. @albanx I think you might want to look for a js only library. I'm pretty sure they are out there. I don't see it feasible to integrate HybridAuth into a mobile app unless you have it on a server and your js goes through that, but I think that would be needlessly complicated and slow.\nAnyway it might be nice to provide alternatives to HybridAuth in other languages so anyone feel free to submit what you have found and I'll create a page on our webpage about it, since I think this is going to be a common question.\nNode.js: https://github.com/26medias/social-login\nMeteor.js: http://docs.meteor.com/#/basic/accounts\n. I'm guessing this is fix for #435 ?\n. @miled This one is yours.\n. http://hybridauth.sourceforge.net/\n. Thanks!\n. Thank you!\n. v2.8 does\n. Fixed now.\n. I'm all for using the PSR standards. It makes it easy to reference and many developers are already familiar with them. In the end any style guide is better then nothing.\n@SocalNick \n. Try the OpenCart forums: http://forum.opencart.com/\nOr ask the plugin creator (if you are using the open cart hypbridauth plugin).\n. There currently isn't a provider for WeChat, but anybody is welcomed to create it.\n. #409. Are you using the Drupal HybridAuth plugin?\n. You might want to ask on the Drupal plugin page (https://www.drupal.org/project/issues/hybridauth?categories=All) as your question seem to portray to specific plugin application and not the core HybridAuth.\n. Thanks for the improvement!\n. Thank you!\n. @hennott Can you please submit a PR with your fix so that we can look at the code more closely? Thanks!\n. Looks like the module version of HybridAuth is outdated. According to their Github they are still on version 2.2.\n. I think this is something you want to bring up with @miled for 3.0\n. I might try at one of the hackathons in my area, but if anything that is going to be for 3.0.\nIt really depends if somebody takes the time to do that.\n. Since Mozilla Persona is being shut down (https://wiki.mozilla.org/Identity/Persona_Shutdown_Guidelines_for_Reliers), this is no longer relevant.\n. Try with #519 and see if that fixes it.\n. Something to think for 3.0 @miled \n. @miled What is your opinion on this?\n. Thank you!\n. First, if you can, try upgrading to the newest version.\n. Thanks that good to know.\n. Thank you!\n. Fixed by #525 \n. Are you using HybridAuth via a plugin?\n. Sorry, but unless somebody makes them, there are no examples for the 2.4 version and they are currently not planned. We'll have to wait for 3.0.\n. Thank you!\n. Closing as this is a duplicate of #336.. Thank you!\n. Added\n. Yes\n. Go here: https://github.com/ADmad/CakePHP-HybridAuth/tree/3.0\n. Will be part of 2.6.0\n. Will be part of 2.6.0. Right now waiting for any fixes for a fix release. Expect 2.6.0 sometime in October.\n. If you can make it that would be great!\n. Forgot about that. Thanks!\n. Please create a Pull Request with the fix. I don't see the code you are referring to in TwitchTV provider.\n. Thanks!\n. Thanks!\n. @merkuriy Feel free to submit a new PR.\n. Not a HybridAuth issue since the issue is caused by incompatibility with another Drupal module, but since this could help others as well I'll allow this in.\n. Thank you!\n. Already fixed in #559 \n. Note to self: https://www.sammyk.me/upgrading-the-facebook-php-sdk-from-v3-x-to-v5\n. Thanks a lot!\n. I have updated LightOpenId. Can you please update your code? Thank you!\n. Thank you!\n. When debug mode set to info it prints the errors as well, that is correct, that is because error has higher importance. There currently is no way to get only info messages and there won't be any as it doesn't make sense to exclude errors which you need to know about in order to address them. You can modify the logger class if you wish to change that and remove a condition for errors to show when info is set. But I would strongly advise against that.\n. Currently unmergable, please fix.\n. @enjoyiacm Please merge the newest changes into your branch. That should show you what you need to fix or fix the problem the automatic system is having.\n. Thank you!\n. I think the more detailed reporting should be only when debug mode is turned on.\n. I don't understand even half of what you are rambling about.\nHybridAuth is not for medical software it never did make any such claim. Honestly from what little that I know about medical software social login should be one thing to avoid.\nHybridAuth is not full user authentication package, it is something you integrate with your existing system.\n. I think this could be cross-origin security issue.. Please check the newest version if the issue still persists.. Thank you!\n. Thank you!\n. Thanks!\n. It would be better if you contacted the creator of the HybridAuth plugin in CodeIgniter.\n. Check the newest version. This has been probably fixed.. Thank you!\n. Thanks!\n. As @nazar-pc said.\n. @jossday No harm done :) Feel free to add it to the Github provider in additional providers\n. What you are talking about isn't a provider, but a feature. I don't recall there being a specific API call that all providers would share to remove permissions, so the easiest way is to go to Facebook, Google, etc. and remove permissions from there.. Thank you!\n. Thanks a lot!\nPlease consider providing a tutorial to our GitHub pages: https://github.com/hybridauth/hybridauth/tree/gh-pages\n. I'm all for this, but will have to defer to @miled for the final OK.\n. I plan to release 2.7 some time this month. If we don't hear from @miled soon I will merge this. @lsolesen Feel free to go ahead and create PR for the 3.0 branch with stricter rules.\n. Will include this in v2.9. @lsolesen Can you please update this. Then it is good to go. Thanks!\n. We should upgrade the provider.Though I'm not sure if I will have the time to do it.\n. Updating in v2.8\n. Is this a feature request or a question?\n. Closing in favor of #787.. I'm mostly hesitant as this breaks existing functionality.\nCould you re-implement the old functions and add depreciated log message? Then in 2.8 or 2.9 we can remove the old functionality.\n. Thanks!\n. If you guys are fixing things, please submit PR back so that we can incorporate those for everyone. Thanks!\n. Feel free to submit a PR with this.. Looking at the issue, the reason why we haven't upgraded already is due to the fact that we are using the Facebook SDK v3.2.3. The newest is already two major releases ahead. They also started from scratch in v4. So on our side that requires a complete rework.\n. If anyone want to take this on, that would be great. Sadly I don't have the resources to do so in the near future.\n. Duplicate of #665 + you can also look on the changelogs, no need to open a new issue.\n. @rittresultater Send this as a pull request. This is a simple and straight forward solution so it is a good opportunity to learn git on it (which you will need to do anyway).\n. Thanks!\n. Thanks a lot!\nIf possible could you please add some info to documentation living on the gh-pages branch?\n. Facebook provider updated for v2.8\n. You can create it and submit a PR.\n. @vmtv Please submit a proper pull request.. Create an issue on the plugin repo: https://github.com/ImpetusGames/cms-oauth\nIf the author is willing they might fix that. In the meantime, I will specify in the plugins page that it is for v1.. This library predates composer, so this was not taken into account in the original design.\nSomething to consider for v3. @miled . I like this.\nCould you also add some info about this into documentation so people know how to set it up properly?\nThanks!\n. We have the GitHub pages: https://github.com/hybridauth/hybridauth/tree/gh-pages\nPlus there is also changelog, but I usually take care of that.\n. Thanks a lot! Could you just add a mention that this is something available past v2.8? This way nobody tries to use it on earlier versions.\n. Once again, thanks a lot!\n. Fixed in #707.. Good catch! Thanks a lot!\n. Given the EOL for PHP 5.2 it shouldn't be any concern, but let's be consistent.\nThanks a lot!\n. Thanks!\nBefore merging, please remove add_current_position.patch from the PR.\n. Great! Thanks a lot!\n. Thank you! Amazing work!\nThis is definitely a breaking change, but given how far we have fallen behind, it was bound to happen.\nI would like to hear what others think as well. If I don't forget I will merge this and release new version on the 21st. Hopefully this will give enough of a time for people to make the changes.\nCould you also please update the docs on the gh-pages branch? Thanks!\n. We don't really have much choice in upgrading the Facebook provided as the v2.7 will no longer work after tomorrow. Though I agree with @Shade- that we should do v2.8.1 with the latest Facebook SDK included.\nOn the ongoing debate of minimal PHP requirements. According to stats, PHP 5.2 no longer shows on the charts. So we should be able to slowly upgrade to higher versions, but that is something I was hoping for major version (as this should have been as well).\nIssues like this expose the biggest problem with the project: @miled has been missing, so no progress on v3. I don't have time to do anything except occasionally review PR and draft new versions. Since my startup is JS land I'm unable to incorporate it into my daily work so there isn't any improvement from my side. Yet last time I checked there was no free alternative to HybridAuth, so many still relay on it.\nSo to sum it up. Unless new people step forward to help maintain and develop this project we will have this debate over and over again.\nAs to how to go forward on this particular issue. Submit PRs.\n. Thanks a lot!\nCould you possibly add info about this to the documentation (gh-pages branch)? Thanks!\n. No problem, thanks for the work! I will mark this as a breaking change in the changelog so people know where to look just in case.\n. Thanks a lot!\n. Hi @kinmenRP !\nThanks for the notice. I would strongly encourage you to go ahead and create a pull request with these changes so that you get credit for the fix.\n. Fixed in #705 . Thanks a lot!. Thanks a lot!. Anyone is welcome to make a PR with the fix. I will eventually get to it, but the question is when. Thanks!. Check now after #707.. Yes, v2.8.1. Thanks a lot!. Thanks a lot!. Could this be related to #707?. @forevermatt I will release this in a patch within an ASAP.. #707 ?. Just haven't uploaded a new version of the docs to sourceforge, will fix.. Thanks a lot!. Thanks a lot! Could you also please add something into the documentation under the gh-pages branch? Thanks!. Thanks! Will be included in v2.9.. Thanks! Just like with #711 and #712, could you also please provide documentation? Thanks!\nScheduled for v2.9. @izzycreamcheese Might not be a bad idea to write a notice into the documentation if you are for it.\nOr maybe we might need to figure if we can possibly get this sorted somewhere in HA.. Yes, but for speedy addition creating a pull request to gh-pages branch is recommended.. @sphinx-ganesh There are some fixes for FB coming up in v2.10, so keep an eye out for that.. @sphinx-ganesh Try it now, a lot of fixes for Facebook came in the recent versions.. Thanks!. Thanks!. Thanks!. Thanks!. @InnocenceAllen Could you please be more specific and possibly remove the additional lines. Thanks!. Thanks!. @bev-ru Can you please submit a PR with your fix? Thanks!. @kbighorse How is it going?. @ApacheEx Could you also add info about this into documentation? Thanks!. Amazing! Glad to have you back!. @miled Current tasks... Well there is the ongoing issue with Facebook and other outdated providers, but I think we will just push everyone to v3.\nWe should probably release a beta version or release candidate for v3 so that we can get more testing from others and it will get some attention from plugin developers and so on.. Closing in favor of #648.. Documentation is dependent on the creators of providers and change originators. Sadly that means that sometimes that is not provided.. @ApacheEx Could you please add this note to documentation? Thanks!. Thanks a lot!. Where are you getting the examples from?. Great work! We might need to make it explicit in the documentation that Facebook provider requires php 5.4 even though the rest  of HA is fine with 5.3. Which is why I would like if we can figure out how to still retain php 5.3 testing, but given that majority of people are already at higher versions I don't think this really matters that much. Thoughts?. @ApacheEx Thanks! I think that sounds good for now.. I'm merging for now to have a better reporting on other PRs.. Can you please add info about this to documentation? Thanks!. The docs are under a gh-pages branch, the specific document: https://github.com/hybridauth/hybridauth/blob/gh-pages/userguide/IDProvider_info_Stripe.html. @ApacheEx Given that v3 is here, I don't see a reason why to introduce breaking changes into v2, but I'm fine with propositions 1 & 2.. @ApacheEx On it!. Fixed and to make sure I have also released v2.9.4. Thanks!. Are you talking about v2 or v3?\nEither way feel free to submit PR.. Scheduled for v2.9.6, will merge in the coming week. Thanks a lot!. What error? Please provide more information and the error message.. I agree, this should be done upstream.\nSo what we need to determine now:\nIf it is abandoned, is there a fork that is active?\nDid anyone tried to contact the maintainer through other means than GitHub?\nTo be continued.... @ApacheEx How is this going?. 3.0.0-beta.1 is the latest beta release that was made. The 3.0-dev is a branch for version 3.0 development and hence it contains the most recent changes since the release of 3.0.0-beta.1.\nI think another beta might be in order. @miled . Run composer to get the dependencies and that will fix the issue.. Thank you! Can I ask you to also provide basic documentation?. This is v2 so we can skip that part :(. @ApacheEx Looking good now?. You should start with 3.0. I'm not actively developing HybridAuth as I have moved on to Meteor.js. @miled is the creator and main developer so new major version depends mainly on him.. Thank you!. Mea culpa! Will fix now.. v2 is already in maintenance. With v3 out any work on v2 will pretty much be ended (plus I will be most likely unavailable from fall).\nI'm fine with PHP 5.6, but as @ApacheEx has demonstrated PHP 7 is premature. Though I don't think there is anything that would necessitate a bump from the codebase side. HybridAuth will run just as fine in PHP 5.4 as in 5.6 or 7.. I think we might want to consider moving examples into their own repository.. I'm afraid not, not even I have access to that. We need @miled to finish the transition to full FOSS in that regard.. @ApacheEx It's been a while since I saw @miled around.. Not much. With API v3, there are many more restrictions on what can be requested from Facebook. The question is if we should scale back to what is allowed for an app without review or if we should still include stuff that is for an app that went through a review and has the wider access.. Hi @jcambien ,\nI'm not sure I understand what you are asking for. Redirection is the recommended process. Another option is pop-up. Redirection is fine, you just need to whitelist the url to where the user will be redirected after they successfully confirm login to Facebook.. @ApacheEx as much as I agree with the sentiment, @misterspelik isn't wrong either.\n@ApacheEx I think we should probably merge this and release a patch version for the 2.x branch since 3.x is still in RC and release 3.x branch ASAP so that we can close support for 2.x for good and put even more pressure on people to migrate. Let's set a date for this.\n@misterspelik seriously though update your app. If this is a production app, it should not run on that old PHP.. @nitipatl Sure! Go ahead and submit a PR. Best if you aim for HybridAuth v3.. LGTM. Could you please submit a PR with the fix?. Wrong. 3.0.0 is about releasing the initial v3.0.0. 3.x is for everything after that.. Should also include default, just in case that the user doesn't set trustForwarded in config. This will make it easier for backward compatibility and won't bother people who don't need it.\n. This shouldn't have been pushed. Please get rid of it.\n. Care to elaborate more on these?\n. @elyobo Can you get rid of the headers so that I can merge this? Thanks!\n. @miled Thoughts on this?\n. I will revert this after merge.\n. Missing comment here.\n. Please fix this back.\n. Just pushing to this branch will do.\n. You might want to fix the year and add yourself as the author, for future reference.. ",
    "sorin": "It's been 2 years since the original PR, I no longer use hybridauth (or PHP for that matter), so I dont know if that code even works anymore. If it's useful to anybody, feel free to use it, otherwise delete.\n. ",
    "jasonreposa": "I was able to track down this bug report from Facebook that seems to be related. https://developers.facebook.com/bugs/272006542907358?browse=search_4fedafbac08113703117819\nSo, feel free to close this if you see it as the same issue.\n. ",
    "jhuet": "It's a bit late i guess but the http part here referes to the base_url configuration so i guess that if you set it to a https you will be fine.\n. ",
    "Lusitanian": "I agree with, quite literally, everything in the above post.\n+1\n. ",
    "cincodenada": "I'm leaving looking at implementing HybridAuth or a similar system in a couple projects, and was planning on forking and cleaning this up a bit anyway, so I'll keep an eye on this issue and hopefully pitch in as well :) \n. ",
    "evillemez": "Huge +1 to this.\n. ",
    "Krienas": "Agree with this.\n. One thing which I really want to see is abstraction of configuration as much as it is possible. Application keys and secrets are good example what could be abstracted. They are part of almost every configuration, but configuration sent differ for different service providers. That could be abstracted within driver. Not sure about possibilities to abstract scope control, but that could be useful too.\n. ",
    "rafamd": "way to go!\n. ",
    "bycosta": "+1\n. Another hard +1 !\nOn Friday, 1 de March de 2013 at 20:52, Doron Gutman wrote:\n\na hard +1 on more strictness and structure (getters and setters, ,multiple exception types, no hashed arrays - yes arguments/parameters)\n\u2014\nReply to this email directly or view it on GitHub (https://github.com/hybridauth/hybridauth/issues/34#issuecomment-14318251).\n. \n",
    "danizord": ":+1: \n. @hybridauth what about unit tests?\n. ",
    "patcon": ":+1:\nThere seems to be more of a community here, so I'd rather see this project succeed, but for the record, there's another project that seems to be further along... Particularly nice that all the strategies are separated out into their own composer packages: https://github.com/uzyn/opauth-github\n. Just started up a new meta thread, and @-mentioned a bunch of opauth contributors into the loop: #97 \nThinking maaaaybe, if it's not being too optimistic to suggest, the members of both communities could hash some things out :)\n. Like most of what you said, but one comment:\n\nNot adopting and staying clear of passing around hashed arrays in place of parameters to methods\n\nMy impression was that this was pretty common practice, and not something dreamt up by any one framework PHP framework -- just makes things more pluggable, right? I'm most familiar with that hash being \"config\", because it's hard to know all the \"config\" settings that any one plugin will need.\nEx: https://github.com/mitchellh/vagrant/blob/master/lib/vagrant/plugin/v2/provisioner.rb\nI'm not a pro coder btw, so maybe I'm wrong :)\n. Thanks for humouring me with the helpful answer @jeffreytgilbert\n. ",
    "jeffreytgilbert": "Is MySpace no longer a relevant login worth maintaining? Seemed like integrating with their system was easy enough. The features I would like to see HybridAuth 3 adopt (which haven't been mentioned) would be:\nBetter encapsulation using OOP for profiles where the data given back arent in public variables, but behind public methods that can be extended and overwritten.\nBetter code completion support for smart IDEs like Eclipse and PHPStorm where the Objects returned from calls either contain cast methods or the calls return objects of specific types. This also means avoiding the temptation of adopting bad practices currently becoming popular such as use of anonymous/callable/closure functions which as specifically abandon structure.\nBetter error handling by throwing exceptions that map to specific errors, there by allowing programmers to map to known exception types creating less trial and error (mostly error). \nNot adopting and staying clear of passing around hashed arrays in place of parameters to methods, which has been popularized by Cake and other frameworks, but makes it impossible to get any autocomplete support or know what arguments to pass to a method by jumping to that method. \nThe ability to return either serialized or unserialized structured login objects that can be stored and retrieved and re-set in hybrid auth, meaning you can turn on or off a social hook at any point. This was something I had to write my own method to do and knew that it would break if the internal sessions HA2 uses ever changed format. It was also a requirement for my project as HA2 was not the only authentication type allowed on the site and sessions would need to be restored upon login if the user logged out. \nAll of these things I mention because during my integration with HA2 I had issues, at some point, that these features would have solved and helped with during integration. \nThis one might be a total long shot, but support for multiple sign ons from the same provider would be huge. There are business models that would benefit from the ability to manage multiple facebook or linked in accounts, and I don't know of an authentication library that adequately addresses this ability. I know I considered this one of the shortcomings of HA2 during my adoption, but decided it was an acceptable loss at the time. \nOn Mar 1, 2013, at 1:31 PM, hybridauth notifications@github.com wrote:\n\nHi all,\nFirst, I deeply apologize for the tremendous delay.\nWhile I agree with most, if not all of what @EvanDotPro said, I also would like to know, if possible, the major consensus of the people here about these two questions:\nshould Hybridauth 3.x do more of the same thing, but attempt to do it better; or,\nshould Hybridauth \"evolve\" and provide new features.\nBelieving that Hybridauth 2.x core really needs some serious rework and that a consensus outcome would be the best approach to solve this. Your comments, contributions and criticism are more than welcome and greatly appreciated.\nA draft Roadmap could be found at Hybridauth wiki.\nPlease feel free to edit the document for any improvements or suggestions.\nhttps://github.com/hybridauth/hybridauth/wiki/HybridAuth-3.x-Roadmap\nA proposal of Hybridauth 3.0:\nhttps://github.com/hybridauth/hybridauth/tree/3.0.0\nThanks!\n\u2014\nReply to this email directly or view it on GitHub.\n. It's fine for config stuff that you wouldnt want to pass in through some structured call, especially for scenarios when you're pulling things in through INIs. More often than not, i see it being used like its a convenience to developers (see: Cake) but what it actually does is take away \"required\" parameters, code hinting, and default values and really hinders authoring work flows. \n\nOn Mar 1, 2013, at 2:29 PM, Patrick Connolly notifications@github.com wrote:\n\nLike most of what you said, but one comment:\nNot adopting and staying clear of passing around hashed arrays in place of parameters to methods\nMy impression was that this was pretty common practice, and not something dreamt up by any one framework PHP framework -- just makes things more pluggable, right? I'm most familiar with that hash being \"config\", because it's hard to know all the \"config\" settings that any one plugin will need.\nEx: https://github.com/mitchellh/vagrant/blob/master/lib/vagrant/plugin/v2/provisioner.rb\nI'm not a pro coder btw, so maybe I'm wrong :)\n\u2014\nReply to this email directly or view it on GitHub.\n. I appreciate the feedback. Getters and setters are a pain to write initially, but that pain is a one time problem. The code consuming these objects shouldn't need to care if they're set, properly formatted, or accessing data from a different source. I stand by my original notion that these should have getters, minimally, and that the objects values shouldn't be directly accessible public variables. At worst it's a mild inconvenience to author them initially. At best, it's sound strategy and future proofing for core objects that can confidently be extended by developers. For internal data objects, i couldn't care less how they're authored and maintained. :)\n\nOn Mar 1, 2013, at 4:07 PM, hybridauth notifications@github.com wrote:\n\n@jeffreytgilbert\nIs MySpace no longer a relevant login worth maintaining?\nactually MySpace still worth maintaining. I just think this could be done separately.\nthe way projects are maintained have dramatically changed in the PHP community due to the growing popularity of both Git and Composer. and my idea is to join the best of the both worlds by,\na) only maintain the most used providers within the upstream branch (https://www.google.com/search?q=social+login+preferences), so any changes on these providers APIs could be made on a timely fashion, while\nb) giving the opportunity for other to create and maintain their own services adapters.\nBetter encapsulation using OOP for profiles where the data given back arent in public variables\nbeside that I hate accessors and mutators, User Profile Model is merely a structured container and in most cases it only contain data as retrieved from providers APIs.\nBetter error handling by throwing exceptions that map to specific errors\nI took this into account, however, I opted for using error codes rather then creating multiples exceptions.\nhttps://github.com/hybridauth/hybridauth/blob/3.0.0/src/Hybridauth/Exception.php\nsupport for multiple sign ons from the same provider would be huge.\nthere actually a workaround for this.. but this request is worth a thought for sure\nhttps://groups.google.com/d/msg/hybridauth/z48yHZ-KKxE/kcUrTrTJkREJ\n@jeffreytgilbert, @patcon\nNot adopting and staying clear of passing around hashed arrays in place of parameters to methods\nI believe this is due to the lack of proper class method overloading with PHP, and arrays are mainly used as a workaround..\nI'm ok with using method args when possible, but ultimately, arrays will be used to make life a bit easier.\n@Danizord\nSure. Thanks for pointing this as well.\nonce again, these are just my thoughts ..\n\u2014\nReply to this email directly or view it on GitHub.\n. I can't give this the time it deserves at the moment, but tomorrow or Monday I should have time to think it out and reply with something meaningful. Are you implementing this now, or just testing the waters? If it's being worked on in the 3 branch right now, I'll fork it and send over any pull requests i think might help. \n\nOn Mar 2, 2013, at 3:08 PM, hybridauth notifications@github.com wrote:\n\nWelp, Okey.\nFollowing that approach and recommendations, here's three possible examples of using Hybridauth:\nex1: ( using a config array and defaults )\ninclude \"src/Hybridauth/Hybridauth.php\" ;\n\\Hybridauth\\Hybridauth::registerAutoloader();\n$config = array(\n    \"base_url\" => \"http://domain.com/path/to/hybridauth/src/\",\n    \"providers\" => array( \n        \"Google\" => array(\n            \"enabled\" => true,\n            \"keys\" => array ( 'key' => '_.apps.googleusercontent.com', \"secret\" => '_' )\n        )\n    ) \n);\n$profile = ( new \\Hybridauth\\Hybridauth( $config ) )->authenticate( \"Google\" )->getApi()->getUserProfile();\necho 'Hi ' . $profile->getDisplayName();\nex2: (flexible but verbose; no config required)\ninclude \"src/Hybridauth/Hybridauth.php\" ;\n\\Hybridauth\\Hybridauth::registerAutoloader();\n$hybridauth = new \\Hybridauth\\Hybridauth();\n$adapter = $hybridauth->getAdapter( \"Google\" );\n$adapter->getAuthService()->setApplicationId( '_.apps.googleusercontent.com' );\n$adapter->getAuthService()->setApplicationSecret( '_' );\n$adapter->getAuthService()->setApplicationScope( 'https://www.googleapis.com/auth/userinfo.profile' );\n$adapter->getAuthService()->setEndpointBaseUri('https://www.googleapis.com/oauth2/v1/');\n$adapter->getAuthService()->setEndpointRedirectUri( 'http://domain.com/path/to/hybridauth/src/');\n$adapter->getAuthService()->setEndpointAuthorizeUri('https://accounts.google.com/o/oauth2/auth');\n$adapter->getAuthService()->setEndpointRequestTokenUri('https://accounts.google.com/o/oauth2/token');\n$adapter->getAuthService()->setEndpointTokenInfoUri('https://www.googleapis.com/oauth2/v1/tokeninfo');\n$adapter->getAuthService()->setEndpointAuthorizeUriAdditionalParameters(array( 'access_type' => 'offline' ));\n$adapter->authenticate();\n$profile = $adapter->getApi()->getUserProfile();\necho 'Hi ' . $profile->getDisplayName();\nex3: Using a stored tokens\ninclude \"src/Hybridauth/Hybridauth.php\" ;\n\\Hybridauth\\Hybridauth::registerAutoloader();\n$hybridauth = new \\Hybridauth\\Hybridauth();\n$adapter = $hybridauth->getAdapter( \"Google\" );\n$profile = $adapter->getApi( 'ya29.****' )->getUserProfile();\necho 'Hi ' . $profile->getDisplayName();\nThoughts?\n\u2014\nReply to this email directly or view it on GitHub.\n. I'm trying to dig through this and add individualized logins per provider and it looks like my method might be Auth::setup for the restoration portion, but I don't know what method to use to grab the params from a successful auth. I'll have to do some trial and error to see which one comes up with what i need. Potentially getAccessToken in Provider_Adapter, though I can't tell because it's passing back a loose array and setup takes a loose array so there's no way to tell if they're compatible without random trying. :|\n. Protected would be a better word than private. And it's protected in the sense that if the variable name were to change, the functionality would break of applications dependent upon those, not in the sense that the information was not to be accessed. Getters offer the assurance that those methods could be changed to point to other pieces of data without worrying about existing code, in a sense, future proofing the code. It's common practice in most AS3, Java, and .NET projects I've developed on, but because PHP doesn't have a very good getter setter syntax, almost no one uses them in PHP. \n. If you aren't developing in an IDE that supports code completion, it's completely understandable that you wouldn't see the value in a cast method, but it adds almost no overhead and the benefits are many.\n. Zend Framework 2 has a good write up about exceptions thrown \n\nJeffrey Gilbert\n312-576-7893\nOn Mar 14, 2013, at 1:42 AM, ADmad notifications@github.com wrote:\n\nIt would be also nice if all exceptions thrown by the lib were of type Hybrid_Exception instead of base class Exception making it easier to identify them.\n\u2014\nReply to this email directly or view it on GitHub.\n. I had that error at some point too. If you're trying to serialize the\nentire HybridAuth class, that will cause errors. It's better to snag the\ncredentials out of the sessions and store/restore that way.\n\nJeffrey Gilbert\nhttp://www.linkedin.com/in/jeffreygilbert\nOn Wed, Mar 13, 2013 at 9:22 AM, ADmad notifications@github.com wrote:\n\nIn 5.3 thishttps://github.com/hybridauth/hybridauth/blob/v2.0.10/hybridauth/Hybrid/Error.php#L26particular statement causes an error Serialization\nof 'Closure' is not allowed in Storage class when trying to serialize the\nprevious exception instance.\nI got it when using OpenID provider for google and on the google page\nselecting \"No thanks\" instead of allowing access.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/hybridauth/hybridauth/issues/105\n.\n. Using @s in code prevents proper error handling and is hacky. Much prefer doing the checks and returning issues over making assumptions and hoping they go well. \n\nJeffrey Gilbert\n312-576-7893\nOn Mar 14, 2013, at 11:59 AM, scholtz notifications@github.com wrote:\n\nNope.. The code must not rely on the existance of array keys..\njust change the lines as suggested, and no warnings should be pushed by php..\nor put there @ , but using isset is much butter..\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "dorongutman": "a hard +1 on more strictness and structure (getters and setters, ,multiple exception types, no hashed arrays - yes arguments/parameters)\n. this will be fixed by #62\n. If I'm not mistaken, I just took the base_facebook.php file from the facebook sdk and pasted it. I don't think that's a modification I did myself.\n. ",
    "jacksonp": "Thanks first of all for HybridAuth. I'd like to see incremental changes over a large refactoring, I don't see how one is warranted. For what it's worth though, ex1 above looks like the least painful of the 3!\n. ",
    "jklein": "I'm considering using hybridauth in a new project, but to be honest seeing this issue with a ton of reasonable suggestions and no movement for a year is concerning.  Is there a plan to ever finish the 3.0 release and incorporate this feedback?\n. ",
    "dashohoxha": "Why don't you give a try to the branch 3.0.0: https://github.com/hybridauth/hybridauth/tree/3.0.0\nMaybe it works correctly. If not, maybe you can fix and improve it. I think that @hybridauth would be willing to give commit access to anyone that is willing to work on that branch.\nI have just implemented an OAuth2 client for PHP: https://github.com/dashohoxha/oauth2-client-php\nMaybe you can integrate this one as well on the branch 3.0.0\n. @hybridauth what is the difference between the branches master and 3.0.0? I think that the branch 3.0.0 should be merged with master and the development should continue on the master branch. Am I right?\n. I think this is reasonable. I agree with this.\nOn Sun, Feb 16, 2014 at 5:35 PM, Nicholas Calugar\nnotifications@github.comwrote:\n\nPlease don't merge 3.0.0 into master until we get a stable 2.x release\ntagged.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/hybridauth/hybridauth/pull/84#issuecomment-35201100\n.\n. From the conversation above I assume that this issue is closed by FB fixing that bug. No need to apply this change to hybridauth. Isn't It?\nIf it is so, then I am closing this pull request (without merging it).\nI hope that it can be re-opened if needed.\n. In my opinion, replacing die() with exceptions is very good, and I would merge this patch.\nBut AdwinTrave is working for making a maintenance release as soon as possible. This maintenance release (2.2.x) is supposed only to fix any bugs and add any features that don't break existing code. New features that may require modifications on the applications that use this library are being postponed for another release (called 3.0).\nReplacing die() by exceptions maybe will require applications to handle those exceptions, so it is better to postpone it.\n\nAs far as I know, nobody is working yet on the version 3.0, because the focus is to make a maintenance release 2.2.0 as soon as possible.\nI would suggest to AdwinTrave to make an alpha release as soon as possible and ask people to test it and fix any possible bugs in about two weeks. Then make a beta release and again wait for about two weeks for people to test it again. Finally make the release 2.2.0, and start working for version 3.0, which is going to be a rewrite of the library and include major changes.\n. I don't use this feature. It should be applied on the latest code and tested. If it works (or at least doesn't break anything), it should be merged.\nHowever I would merge it even without testing. I think it should be merged.\n. I agree with this. Somebody that is willing to maintain the project should\ntake it over, and then notify the others about it (or just start merging\nall the pull requests directly, if this is possible).\nOn Tue, Feb 4, 2014 at 11:58 PM, Nazar Mokrynskyi\nnotifications@github.comwrote:\n\nMake your own fork, merge all hotfixes, and notify other developers (who\nsent pull requests).\nYour fork may become primary if other developers will see that it is\nactively maintained.\nI wanted to do that by myself, but I do not have enough free time to\nsupport one more Open Source project.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/hybridauth/hybridauth/pull/149#issuecomment-34118099\n.\n. @hybridauth I would be willing to help too, as much as I can.\n. I think that all the pull requests that touch only a specific provider and can be merged cleanly (without conflicts) should be merged automatically, without much thinking or testing, since the responsibility for the provider relies on its author. Am I right? For example this pull request is very simple, so it can be merged without thinking too much.\n. I merged it and it was closed, but I think that commenting and discussion can still continue, isn't it?\n. I am using hybridauth through a Drupal module. It automatically lists on\nthe configuration page all the core providers, and this list is already too\nlong. Making this list even longer doesn't seem reasonable to me. And also\nthere may be other new providers on the future (maybe a countless number of\nproviders).\n\nSo, I would support making the list of core providers shorter, not longer.\nMeanwhile, maybe something else can be done to simplify the customization\nof extra providers. But this should be considered for 3.0.\nOn Tue, Feb 18, 2014 at 12:09 AM, Jan Dvorak notifications@github.comwrote:\n\nI think this is something to be considered for 3.0. The problem with this\nis that we don't want to include too much stuff in the core. Then again you\nhave a good point that each part of the world has a different major social\nnetworks. So I think having all the providers in one place should be the\nway to go. @SocalNick https://github.com/SocalNick and @dashohoxhahttps://github.com/dashohoxhawhat are you thoughts on this?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/hybridauth/hybridauth/issues/153#issuecomment-35331729\n.\n. I don't think responsibility works by appointment (or by assignment). And I don't see why @hybridauth should have the power to appoint maintainers of third party stuff, when he is not able to maintain them himself. He is not able to maintain even the core project.\n. I have just created the branch 2.2.0 : https://github.com/hybridauth/hybridauth/tree/2.2.0\nThe branch 2.2.x is going to be the last one of the old implementation. You can test it out to make sure weather it works correctly. There is still room for new patches or fixes to be applied to it (probably there will be releases 2.2.1, 2.2.2, etc.)\n. What we currently have is a maintenance nightmare, because nobody can ever take care of all the providers, and nobody will ever need all the providers. The point of it all is to have separate repos, with separate maintainers. And I am against using Packagist, Composer does not require it and can pull libraries directly from any git repository.\n. I don't think it needs any change. If somebody is using providers X, Y and Z, he knows where he is pulling them from, so he knows where to submit patches as well. By the way, I never want to hear about the patches and fixes of the provider X, unless I am using it myself.\n\nThe most we can do is to provide a list of all the available providers in the docs, and their repositories, which can be in github or sourceforge, git or svn, etc. (up to their maintainers). We can also provide examples of composer configuration about them, although I think that each provider should have its own README to explain this and any other details.\n. When people who are responsible for taking action just stay and listen to what everybody has to say, things never move forward. This is the problem with the hybridauth project.\n. Ok, you can merge it. But my opinion is that somebody needs to test it first.\nActually I think that each provider should have its own maintainer(s). This can be enforced only if each provider is in its own repository. That's why I think that we should start with decentralization as soon as possible.\nI also think that this should not be a pull request to 'master', but to branch '2.2.0'. The master from now on can be considered as non-stable. The stable branch should be '2.2.0'.\n. I think that we don't even need to use Composer. A very simple bash script can do perfectly well (at least for the time being).\n.  Please everybody move out your providers on their own repositories. I hope this can be finished by the end of this month. By the next month they will be removed from the main repository anyway.\n. @AdwinTrave: It is not a breaking change, if we consider the branch 2.2.0 to be the stable one, and the master branch to be in active development until it is merged with the branch 3.0.0\n@hybridauth: Thanks for becoming alive time after time, not for doing anything, but just to stop things from moving on. There is a one year long discussion about 3.x. Infinite discussion is counterproductive. Decisions by comity are also counterproductive. Who is @SocalNick and what he is doing (or what he has done) for the project, so that he can decide about its fate? Last but not least, thanks for being and staying anonymous all the time. This smells nothing good to me.\nI tried my best for improving the project, but some people seem interested only in endless talk (I don't know why). If I had enough time and energy I would just fork the project and do it the way that I think is best, but I don't have that either. Since I \"strongly disagree\" with all three of you, please remove me from the maintainers of the project and do it the way that you think is best.\nI wish you good luck and thanks for understanding.\n. Ubuntu 14.04 LTS (trusty) already has PHP 5.5, so I think that for any new projects it is better to use PHP > 5.3 rather than sticking to PHP 5.3.\n. I think that the descriptions of the commits are sufficient.\nI use the latest stable release of the Drupal module https://drupal.org/project/hybridauth. This one in turn recommends the latest stable release of hybridauth (2.1.2 from sourceforge). So, I cannot simply jump ahead and update my fork. You have to make a stable release of hybridauth first, then this release has to be adopted and recommended by the Drupal module, before I can update the version that I use.\nAnyway, the changes in the PR are limited only to the DrupalOAuth2 provider. As far as I know, I am the only user of this provider. So, it is not a problem if you don't merge them. By the way, I have also applied them here: https://github.com/dashohoxha/hybridauth-drupaloauth2\n. As I said, right now DruplaOAuth2 is not an important or popular provider. So, maybe it is better to close this PR and maybe later find a better solution for it.\n. If it works, it is OK. This is the best place in my opinion.. ",
    "nazar-pc": "@jklein, I recommend you to use latest version of code from master branch for now. There was a long period, when there were no development in this library, but now several guys working on it, merged  lot of fixes for different issues, and most actual is master git branch. When they finish - here, in repository, next release version should appear.\nWe all are a little bit confused with versions, but that should be fixed in near future with new stable release. About 3.x - original maintainer started it, but didn't finished - so it will be continued after we get new stable release of 1.x.\n. As written before in this thread - already implemented in experimental 3.0-Remake branch\n. Try to specify callback url, I had the same problem before this.\n. Usually it should be specified in configuration of site in integrating service (facebook, twitter, ect. have such option).\n. Also local configuration may have specified callback togather with other parameters like key and secret. Read all steps here:\nhttp://hybridauth.sourceforge.net/userguide/IDProvider_info_Twitter.html\n. One more pull request to dead project (last commit 15 April 2013).\nOriginal maintainer do not want to support this library, as he wrote in twitter.\nIt is very sad unless someone will continue this work.\nThere are a lot of forks, so, I suggest to collaborate with other folks for further development.\n. Make your own fork, merge all hotfixes, and notify other developers (who sent pull requests).\nYour fork may become primary if other developers will see that it is actively maintained.\nI wanted to do that by myself, but I do not have enough free time to support one more Open Source project.\n. Merging is possible directly from other forks, of course, so there are no problems here.\n. As for me personally - I just need something that is simple to integrate. This project is not simple enough as for me, but I'm using it already and interested in maintaining.\nAnother project I heard is https://github.com/opauth/opauth, but I didn't tried it, and it has fewer number of providers, but at the first look I like how simple it is.\n. @pavlyuts You can add all repositories with pull requests as remote branches locally and merge them into master.\n. +1 to 2.2.0, I'm using some revision with number 2.1.1, but as website, repository itself and releases are not consistent now - I'm not sure actually what version is it.\n. Please, look at this thread: #149\n. If not including all providers in main repository - there should be another, that includes all of them.\nAnd structure of repository should be similar to main, so I'll be able to merge them, not copying files for every provider separately, as it is now.\nAnd one repository for all third party adapters will ease tracking changes in all of them, especially during core update, to keep all providers up to date.\n. I can suggest all of you to look on Linux kernel.\nEverything is inside. Different drivers in different places, some of them are stable, others just mainlined. But what is more important  - you can download source code anytime, and you'll get something that works together for sure.\nAnd such way doesn't exclude separate forks, in which different developers work on their parts of kernel.\nI think we can do the same way. Different developers maintain their providers separately, but eventually merging them together (everyone have full copy of repository), and several main developers who have full access to repository look for changes, and decide whether quality is good enough, whether it works and other stuff.\n. I have exactly the same issue everywhere I use HybridAuth, but do not know how to fix it.\n. I think the problem is in library, because many other websites, I do not know how they work with providers (I mean what library or whatever they use), work instantly, while HybridAuth is really slow.\n. Actually, there is much newer Facebook SDK, and I'd recommend to switch to it rather than fix issues in this one. Anyway currently used SDK with go down in April or so.\n. @madikarizma Yes, I like HybridAuth for that too, but Facebook SDK used in HybridAuth definitely needs upgrading, hopefully it will be done until Facebook disable it on their side.\n. I think 5.4 is not a problem in 2015. Seriously, it was around for a long time and soon will be abandoned because 7.0 will release later this year. 5.4 is pretty sane requirement, all OSs are shipped now with either 5.5 or 5.6, but 5.4 for sure and there are not so many hosting providers that do not support 5.4 (and providers that didn't switch yet just because we, as developers, do not require them to).\nFinally, 5.3 is insecure, think about users first.\n. I was busy, here is pull request\n. Guys, STOP RIGHT THERE! You're doing pathologically wrong things.\nSimply implement PSR-0 autoloader, this is the only correct working solution.\n. Not funny. Make a PR, please\n. PR #408\n. Just made everything except ::process() and constructor protected\n. Is that PHP 5.2?\n. Can't remember when I touched 5.2 last time, anyway, should work now as late static binding for modern versions, and as just self for 5.2\n. > I think- might not be catching exceptions properly on the endpoint which may result on full path disclosures\nCan you explain what did you meant here? I missed the point.\n\nV3 however doesn't use as many dies as V2 (only once, when redirecting users iirc)\n\nI'd like to get rid of that as well, at least somehow optionally, because currently I'm maintaining list of things I need to hack in HybridAuth on each update to work with my system, primarily for asynchronous mode.\n\nUnfortunately, V3 is way over schedule due to lack of time and or motivation on my part, but I'm planning to get back to work on the project in near future, and hopefully the new version can earn the community interest and contributions.\n\nI know what you mean, I have few Open Source project to maintain as well. I'm still using HybridAuth and have no plans to move to something else at the moment, so I'm ready to help with code and something else (if you remember, that was actually me who warmed-up discussion and further development after more that a year of abandonment).\nUnfortunately I'm not familiar with V3 codebase at all, it would be great to have some more specific TODO plus architecture overview to get familiar with how everything works (even upgrade guide is currently empty).\n. > I mean we should not simply replace every occurrence of die with an exception, because that may reveal the path to webroot in case of an uncaught exception for some users.\nWell, there still other Exceptions that should be accounted, since this exception with be thrown literally at each request it will be discovered immediately. Moreover, path disclosure doesn't cause significant harm if your code is fine, I'm having few websites whose source code is completely open and website structure is well known. If you'll catch \\Exception just like it is currently shown in examples (for copy-pasters) it will be fine already. At least, would be sufficient to make it configurable with any default value.\nI'll follow development and try to help with what I can to make 3.0 release out.\nBy the way, I see some stubs for tests, will you use PhpUnit, or it might be discussed?\nI've tried PHPT tests format once and really like it.\nDescription: https://qa.php.net/phpt_details.php\nPHP itself and HHVM as well are covered with this type of tests. They are slower that those you may write for PhpUnit, but they are extremely simple and allow to cover cases with die, uncaught exceptions and more that might be a problem otherwise.\n. I hate writing test as well, but at some point I need to know will my system build, install and at least show home page to user, so I did wrote some and plan to write more)\nLook here for examples: https://github.com/php/php-src/tree/master/tests\n. Custom exception seems to be already used in 3.0-Remake branch, so I'm closing this.\n. I think it is possible in 3.0 release, I actually need that too for  as well as eliminating die() (there is only one currently in 3.0 AFAIK, look #433 and #451 for some discussion).\nTake a look at 3.0-Remake branch for current state, also @miled said he'll prepare some more docs about this branch and I'm planning to participate as well.\nAlso feel free to make pull request, I think it is valuable feature to have.\n. Same for me to be honest. Even more, PSR is just recommendation from group of people that develop frameworks, even inside this group some people voted against, so this is not \"standard\", just recommendation, compromise of some set of representatives.\nBut I think it is a good idea to have some specified code style (do we have any?). Might be good to include code style config for popular IDEs into repository, so that anyone can use it out of the box.\nWhich code style to choose is not as important as to be consistent across project.\nP.S. Scrutinizer is awesome, we should definitely start using it) I'm using it in my project and quite happy with it.\n. > PSR-2 is the most followed by popular IDE like PHPStorm. It's a new argument to use it. :+1:\nTrue, but I have own code style for my projects as well as public repository with code style configuration.\n\nNote: About indenting, for example, your .editorconfig force 8 column space per tab, this produce a hardly readable code.\n\nAgree, 8 is too much 4 is more common and readable for PHP\n\nYes, but by default Scrutinizer wouldn't like you if you don't follow PSR-2, isn't it? (just a question) :-)\n\nTo be honest I don't know. I mean is has extremely limited configuration for code style at the moment, so it does give me some unrelated patches suggestions. I've reported such an issue for them, we'll see how they will deal with that. But I'm currently reformatting code in IDE according to configured code style automatically, so, it is not a big issue for me.\n@Soullivaneuh, I agree do not mix tabs and spaces, do not mix uppercase and lowercase keywords and so on. That is just what I say - consistency.\nAnyway, when I'm joining any side project I'm accepting their codestyle, independently of what it is.\n. Also, Scrutinizer will punish more because of code duplication, wrong or incomplete PhpDoc sections and overcomplicated code parts, code style is, mostly, a matter of taste.\n. I'd not expect too much reactions, although 209 people should read this message, as usual, most of them are not active.\nThere is @AdwinTrave who have also write access to this repository, and someone else, don't remember exactly whom. Would be good to hear what they think is they care about this topic.\n. > Next release is actually on 3.0.0-Remake and 2.4 on master, am I right?\nMostly yes, I think potentially there might be some patch releases in 2.4.x\n\nI'm wondering because I'm surprised by the process. I'm used to see project on master for new version (e.g. 2.5, 3.0) and one branch per legacy tag (e.g. 2.3, 2.4 etc...) which works great with Packagist management.\n\nThat works for projects where one version smoothly succeeds another, but here 3.0.0-Remake is completely different rewrite of 2.x and not yet tested whether all providers work as expected, so it is not ready for master, but eventually be there I hope)\nThe problem here is that 2.4 just works, and no one knows for sure what providers work in 3.0) I think Facebook, Twitter and some other will be tested well anyway, but there are many others that should be confirmed to be working as well.\n. @Soullivaneuh, I know that adding config directory is not recommended, but there is only one file in there, and it really works great, for instance, in ownCloud project. While you're contributing to HybridAuth, you shouldn't change codestyle settings (ideally).\n. HybridAuth doesn't show any network, it is up to you what to show.\nYou should write such question somewhere on OpenCart's forums.\n. This doesn't seem to be backward compatible.\nMaybe, better assume old fields by default, but allow to redefine it using configuration?\n. Ah, sorry, looks like I understood it wrong, seems to be fine indeed, did you test it (because I didn't yet)?\n. Error message is extremely clear - just install curl extension\n. Is it installed and enabled? These two things are quite different.\n. +1\n. I'll make more changes to that file soon, can include this fix\n. Agree, but for that we need to include psr/log into source code which I've mentioned under Problem title above.\nOtherwise we need to use Composer exclusively, while we want to keep library standalone and usable even without it.\nSo, this is the best compromise I found at the moment, I'm open to other suggestions.\n. OR, I'll change PR accordingly a bit later\n. Now we have wrapper instead, what you think?\n. We'll need to move this to 3.0-Remake branch as well.\n. Can you add description why? Doesn't seem a good thing, it was especially designed to continuously control tests execution.\n. Yes,  it can be seen, but since build failed - you, as patch author, should be aware about to fix it, maintainer may just ignore patch until you fix it.\nThis is just one email per pull request, I'm getting emails about all your and other's pull requests just because I'm watching this repository, I'm not even a maintainer.\nThat build was an error, do you have permission to re-run it? It was clearly not your fault.\n. > As I pointed out the failure could be a false positive with nothing to be actually fixed by the author.\nThis is not a rule, we can do nothing here, unfortunately.\n\nFrom this repo yes, but for someone who contributes to multiple repos they all add up. Please in general people get enough unneeded mails already from various sources :)\n\nI'm getting up to hundred emails every day in few mailboxes (excluding junk mails).\nI have more than 50 folders only in one mailbox and one or more filters for each folder.\nAs the result - I have absolute majority of emails sorted into specific directories automatically, so that I can prioritize their handling.\nYou can add filter that will delete unneeded emails (like from Travis CI about Hybridauth pull request) right away. But this is certainly not the thing maintainers will want to have here.\n. This should not be a problem, what kind of error do you get?\n.  Hybrid Auth 2.4.x is in maintenance mode, 3.0 is under development and already allows to use custom session handler.\n. Well, 5.3 is not supported even by PHP developers...\nYou definitely should upgrade to 5.6.\n. Since master branch seems to support PHP >= 5.2, this PR should be accepted, do not worry.\n. Documentation on gh-pages will be (it should be already) for 3.0 release, current stable version is 2.4.x\n. It is already possible, just log in through few providers one by one.\n. With that structure no.\nWrite your own, for instance, mine is here: https://github.com/nazar-pc/CleverStyle-CMS/blob/master/components/modules/HybridAuth/meta/install_db/integration/MySQLi.sql#L1\nWorks with users from here: https://github.com/nazar-pc/CleverStyle-CMS/blob/master/install/DB/MySQLi.sql#L93\n. Yes\n. I do not use CakePHP.\nThat was simple DB structure, how to connect it to HybridAuth depends on your framework, but that is not a HybridAuth issue.\nProbably, you want to fill issue in https://github.com/ADmad/CakePHP-HybridAuth, but this issue should be closed since is not relevant to library itself.\n. Why not? It works for me, why not just try?\n. It seems that your autoloader not working properly or you don't have one at all.\nAnd if anything not expected happens, you can't handle that because exception class not found.\nJust fix your autoloader.\n. No, you have to add autoloader. There are other classes, you'll constantly having different errors and will ask people how to fix it. Just add correct autoloader.\n. Because it is regular PSR-0 autoloader.\nIs it so difficult to check composer.json?\n. @PatrickBK, the answer was given many times - just add proper autoloader. Composer's autoloader or not - it will work fine.\n. Working fine without correct setup is till first error. When first error happen you'll not see what happened exactly, just error about non-existing class. So, basically, you were lucky.\n. There is documentation link on the main page of repository...\n. According to your snippet it is far from empty.\nSourceForge page is still usefull indeed, however, have you seen this?: https://hybridauth.github.io/hybridauth/\n. What you get depends on scope you're requesting and what Facebook user allowed you to get.\nSo if user will deny access to his birth day - you'll get NULL there.\n. You have to request email separately with explanations why do you need that information or (as bad sites do) just redirect back to facebook requesting required information until user agree to give that information to you.\n. Add PSR-0 autoloader, NEVER include files manually in such libraries.\n. Apparently, no errors happen in other browsers\n. If you have access_token - you do not need Hybridauth to get info, just make simple HTTP request to Facebook as written in documentation.\nIf you're using Hybridauth - there is useful ->api() method for making such request, just look into documentation.\n. There is already the same issue reported, use search first before reporting new one: https://github.com/hybridauth/hybridauth/issues/529\nAlso there is proper solution there.\n. It is not connected with hosting, you just don't have autoloader!\nIf everything works fine - that is nice, but if something happens Hybridauth needs to throw an exception. Since you don't have autoloader you can't see what an exception was because exception class itself wasn't found.\n. Autoloader is simple thing. Every time you're trying to use some class that PHP doesn't know about yet autoloader is called. So autoloader's job is to include class by it's name (if autoloader knows about class). If you install Hybridauth with Composer that will be done for you automaticaly.\n. It means it was working without errors, which is even more awesome) But that would happen sooner or later anyway.\n. LGTM :+1: \n. This is not a problem in HybridAuth, this is rather misconfiguration.\nYou can force HybridAuth to honour X-Forwarded-* headers by specifying option trustForwarded for Facebook provider alongside with others, like here.\n. There is rebase git command for this, just rebase your branch against master branch of this repository\n. Well, sometimes you have to wait for merge. Nothing special here, I wonder why you're not just rebasing it, such things happen sometimes.\n. Moreover, you'll need to merge changes from upstream anyway if you want to have working version in future.\n. @enjoyiacm, one more time: such things happen sometimes. You have to be patient, sometimes other changes are easier to review/more important and after merging those you have to rebase your changes. This is completely OK, you don't have to write multiple messages about it, just rebase and wait.\nFor instance, you can see my non-merged PRs to Google's Polymer library: https://github.com/Polymer/polymer/pulls/nazar-pc\nThe oldest is from 5th of August. I did multiple rebases and updates to keep all of them up to date. And I'm slowly pushing developers, but they also have other stuff to do, they have own regular work, families, friends and bunch of other things.\nYou're not the center of the universe, everyone here is also spending their own time and no one pay them for it. Respect this and patient, please. No one here (especially maintainers) HAVE TO merge this, but they DO IT regularly on a voluntary basis, it just takes time.\n. @ErAnkurSharma, you should almost NEVER edit source code. Patrick's solution was to add that option to configuration, not source code.\n. I do not think this should be fixed. It is your duty not to call ::redirect() and/or provide necessary checks in your code that might cause calling ::redirect().\n. HybridAuth works out of the box, but you have to handle certain cases yourself during integration.\nAnyway, lets wait what maintainers think about this change.\n. Now I understand it better. Well, as workaround it might be the case, also throwing an exception might be a solution. Anyway it should not be as it is currently, we can't redirect to null, this is for sure.\n. You have to specify it in scope: https://developers.facebook.com/docs/facebook-login/permissions\nDefault scope doesn't include email, but you can request it if necessary.\n. As user you always have right to reject permissions, for instance, you can allow all permissions except email.\nAs developer you have to be ready for this. You can either explain that to user and redirect back to Facebook requesting remaining permissions or ask for email in some alternative way.\nI've modified default scope for my use case and it works as expected.\nThe only difference that I'm not using $config[\"providers\"]['Facebook'][\"display\"] = \"popup\";, not sure whether it affects anything fundamentally.\n. Here is all you need to know: https://github.com/hybridauth/hybridauth/blob/master/composer.json#L24\nJust stop asking the same questions over and over. Autoloaders are well  documented and Composer is not essential to get it working.\n. Just try to search what other people asked even in this repository alone or on StackOverflow. There are a lot of useful answers there. Anyway, just look at line I've pointed to in last message - it will work fine.\n. Information provided is not enough to answer you\n. Would be nice to read which exactly \"issue\" are you facing.\nBesides that current version of Hybridauth is 2.6.0, so new issues about version 2.5 is kind of irrelevant. Check if it works for you with 2.6, please.\n. 1. This is Third party provider, why did you copy it into core providers?\n2. I feel strongly against addition of new method - this is just API call, we can add multitude of them for each provider, but this is not an intention of this project\n. Even better, create own custom provider for your project by extending class of GitHub provider.\nAs far as I remember this library abstracts some things across all providers, but many other things are available in individual APIs and my opinion is hat those should not be added to providers itself, because we'll end up with infinitely bloated and fragile classes. For individual purposes this might be useful though.\n. LGTM :+1: \n. I've followed to read about issue and still do not understand how it relates to Hybridauth. I have Hybridauth integrated into my system and even with prefixed multilingual paths have no issues. It seems like Drupal-specific problem, not generic one.\nIf Drupal does some unnecessary redirects - force it not to do that, there is nothing Hybridauth should fix in this case.\n. I'd say all stuff of this kind should only target 3.x branch. And 3.x should be fixed as alpha release and finally moving towards stable. Otherwise 2.x diverges further and it would be very difficult to bring everything back.\n. ",
    "localheinz": "Any news on this one? \nSeems long overdue!\n. @AdwinTrave \nThat would be 3.0.0-Remake?\n. See this, for example: https://github.com/zendframework/modules.zendframework.com/pull/238\n. ",
    "lorezyra": "Any plans to implement namespaces?\n. Cool. :+1:  I look forward to seeing this stable enough for production.\n. ",
    "soullivaneuh": "Follow PSR-1/2 practices could be also a good start.\nSee #459 as example.\n. @EvanDotPro please see #461.\nFeel free to comment it. :+1: \n. @nazar-pc Thanks for your answer, I'll take a look to those issues.\nI'm rightly talking about 3.0-Remake branch! ;-)\nThe problem it's not only the die function but the fact of making http response and redirect inside the library with not another dev choice. As I said, the security compoment of Symfony has his proper rules about it and cannot deal properly with your actual system.\nI will take a look for a PR but haven't lot of time for. Not sure to be able to make a proposition.\n. Branch rebased to avoid merge conflict.\nping @AdwinTrave \n. @miled \n\nPSR-2 is because it's a recommendation more than a standard\n\nI'm curious of why your are saying that. Can you please explain it?\nI suggested PSR-2 because it's the must use standard/recommendation on recent projects. This is why it could be great to have it a the new fresh version of HybridAuth.\nRefered from the PSR-2 introduction extract:\n\nThe intent of this guide is to reduce cognitive friction when scanning code from different authors.\nThus, the benefit of this guide is not in the rules themselves, but in the sharing of those rules.\n\nTo answer of this:\n\nbesides it does not bring any additional value.\n\nI don't agree (surprise! ;-) ). Beside the advantage of following a common standard, you have many advantages on the code itself, take a look to the doc.\nFor example, the indenting note: http://www.php-fig.org/psr/psr-2/#2.4.-indenting\nOr another sample: Avoid using both upper-cased and down-cased keywords (true, false, null, array...) in order to keep code coherence.\n@nazar-pc \n\nMight be good to include code style config for popular IDEs into repository, so that anyone can use it out of the box.\nWhich code style to choose is not as important as to be consistent across project.\n\nPSR-2 is the most followed by popular IDE like PHPStorm. It's a new argument to use it. :+1: \nNote: About indenting, for example, your .editorconfig force 8 column space per tab, this produce a hardly readable code.\n\nScrutinizer is awesome, we should definitely start using it) I'm using it in my project and quite happy with it.\n\nYes, but by default Scrutinizer wouldn't like you if you don't follow PSR-2, isn't it? (just a question) :-)\n\nAfter all, thanks guy to participate to this discussion. :+1: \n. > that is largely true for an individual developer, but the fact is this is now a community project getting contributions from all over.\nExactly what I was trying to say. :+1: \n\nI don't necessarily agree with all of the guidelines but IMO.\n\nYes. This is why I applied only some of the fixers for the moment. Let's Scrutinizer say what could be improved (or not) after.\n. Maybe should we call HybridAuth contributors/users to vote about this suggestion to get an global idea of the opinion?\n. I heard and understood your arguments, you know mines. :+1: \nLet's waiting some contributors reactions on this PR, must be interesting.\n. Please don't hesitate to ping me for branch rebase if change was made on the project.\n. Thanks. :+1: \nI will take a look on CONTRIBUTING later and make a PR about that.\n. Closed as #461 is accepted.\n. I understand well, thanks for clarification.\nI'm wondering another question so: Where will be 2.4 branch when 3.0 will be on master? Is a new 2.x branch be pushed before merge?\n. @nazar-pc \nAdding a vendor IDE config on a public project is not recommended at all. BTW, if contributors want to edit PHPStorm settings, this could override this file and be committed accidentally.\nYou have a .editorconfig. Most a the IDE (including PHPStorm) has plugins for that or built-in functionality.\nBTW for the code patch, I didn't run all the fixers on #461. To be sure, you can run it like this:\nbash\nphp vendor/bin/php-cs-fixer fix --level=psr2 .\nRegards.\n. With --verbose options to know what php-cs-fixer does.\n. @nazar-pc As you want we will see, but it's not recommended (I insist :-P).\nYou should instead configure Scrutinizer. I think you can use it to inspect code according to PSR-2 and more, it could propose some patches. :+1: \n. @miled \n\nI'd like to keep the external dependencies for hybridauth down to zero.\n\nCan I have any explanation about why?\nThe power of composer is especially the possibility to use dependencies with ease and avoid to \"reinvent the wheel\".\nThis could be apply with option-resolver in this case, and buzz or guzzle http client for oauth request. This is not painful, instead, this will make a more reliable project because concentrated of principal task: OAuth protocols.\nBTW in this case, this is not a really big dependency.\nAre you neither interested for a POC?\nRegards.\n. > there's a lot of people who either can't or don't use Composer on their projects, and yes, for their sake I'm willing to reinvent the wheel - or to include it into the package if necessary.\nI understand this point of view (not users not using composer or as like tools :-P) despite the fact that this is reducing project scalability IMO.\n\nhowever if you think that it's worth it, then a proof of concept would be welcome, but no promises tho.\n\nWill take a look if I got some time.\nThanks for answering. :+1: \n. > I believe there's more than enough PHP OAuth libraries out there\nWell, exactly, I can't find a reliable one. :-)\n. ",
    "wheelsandcogs": "Is 3.0 currently in a usable state? i.e. is it working with a few missing providers / small bugs or is it still under heavy dev / fairly broken?\nI'm trying to make a decision on whether to go with 3.0 or 2.4 on a new project, so a rough idea of stability would really help, cheers.\n. Composer is just a tool to fetch dependencies, not a deployment tool. If you already have your project running locally, then just include the vendors dir in your deploy and you will not need to run composer on your production host.\n. ",
    "miled": "@wheelsandcogs 3.0 is still under heavy development and not suited for production. afaik, there's few braves people who already using it, but the decision is yours. \nFor anyone interested to know, the exact status of project can be found at https://github.com/hybridauth/hybridauth/blob/3.0.0-Remake/TODO.md\n. fixed on v3.0. thanks.\n. No. v3.0 is not released yet and still under development.\n. fixed for v3.0\n. v3.0 will come with a default http client that can be replaced with any other library through dependency injection.\n. thanks @artoodetoo, but we can not accept your pr for many reasons. most of all, because it touches a huge number or files and we have no mean to test, yet.\n. the strange behavior we were speaking about is that some providers will include ? twice in the query string which may result on something like this /index.php?hauth.done={provider}?{args}\nas to whether use . or _ is irrelevant http://tools.ietf.org/html/rfc3986#section-2.3\n. 401 Failed to validate oauth signature and token usually mean your server clock is out of sync\nhttps://dev.twitter.com/oauth/overview/authorizing-requests\n.  @AdwinTrave  okey!\n. logout() simply erase the access tokens from session for a given provider.\nI admit, the method name is overloaded and can be misleading, but logout() doesn't really log a user out of idps websites nor does revoke the access tokens. These things are left for hybridauth end users to implement on their own.\nhttps://github.com/hybridauth/hybridauth/issues/220#issuecomment-56783925\n. Thank you\n. sorry can't merge your pr. it's a real breaking change for those who use github adapter. Most people uses that id to identify returning users on their databases and doing so will result on a mess.\nfwiw, i'll explain the reasoning behind using that as identifier: github logins or usernames can be extracted from profileURL if needed, while the real user id can not. besides, github users can change their usernames at any time, so it's not really 'unique'.\nthanks.\n. Thank you!\n. this class is definitely better now. thank you!\n\nAlso big question whether we need all that methods and properties to be public?\n\nno. only ::process need to be public, everything else can be protected. \n. I think this happen with php <=5.2.\nhttps://github.com/hybridauth/hybridauth/blob/master/hybridauth/Hybrid/StorageInterface.php#L13\n$value needs to be eq null.\n. Looks good. Thank you.\n. > Whould be nice if you wrap everything that deals with sessions into simple class and allow to provide \nyep, v3 session backend is already implemented that way.\n. Thank you!\n. I thought about that issue like a year ago or so and I decided to keep things that way, because many users -I think- might not be catching exceptions properly on the endpoint which may result on full path disclosures. Anyway, I'm open for the idea if someone is willing to work on a fix.\nV3 however doesn't use as many dies as V2 (only once, when redirecting users iirc). The new version is a complete rewrite and it works slightly different than the previous one, but it still a semi functional product and at alpha stage. As of now, it has been entirely refactored and about 20 providers has been upgraded.\nUnfortunately, V3 is way over schedule due to lack of time and or motivation on my part, but I'm planning to get back to work on the project in near future, and hopefully the new version can earn the community interest and contributions.\nhttps://github.com/hybridauth/hybridauth/tree/3.0.0-Remake#todo\nhttps://github.com/hybridauth/hybridauth/tree/3.0.0-Remake/src/Provider#list-of-done-adapters---untested-still\n. > Can you explain what did you meant here? I missed the point.\nI mean we should not simply replace every occurrence of die with an exception, because that may reveal the path to webroot in case of an uncaught exception for some users.\n\nit would be great to have some more specific TODO plus architecture overview\n\nFair enough. I'll create a better tasks list and add more information about the new version., but I'd say that most of the work on library internals has been done and what remains at this stage is to 1) migrate as many providers as possible from v2 to v3, 2) unit testing, and 3) user documentation.\n. > By the way, I see some stubs for tests, will you use PhpUnit, or it might be discussed?\nI can't write unit tests for my life, so I'm open to suggestions and I'd be grateful if someone more knowledgeable than me could help with that.\n. I wish to keep the current style. The reason why I didn't use PSR-2 is because it's a recommendation more than a standard, besides it does not bring any additional value.\nV3 will be PSR-1 and PSR-4 compliant, tho.\n. > Maybe should we call HybridAuth contributors/users to vote about this suggestion to get an global idea of the opinion?\nI don't think that would be necessary. People will most definitely vote for a familiar standard over personal preferences. so, let settle for PSR-2..\n\nP.S. Scrutinizer is awesome, we should definitely start using it) I'm using it in my project and quite happy with it.\n\nI'm already using both scrutinizer and codeclimate on my fork, but tbh I prefer codeclimate cause scrutinizer tends to complaint, a lot.\nhttps://scrutinizer-ci.com/g/miled/hybridauth/\nhttps://codeclimate.com/github/miled/hybridauth/\n. @nazar-pc sum it up quite well. The idea is to get V3 to beta stage with the major providers tested and working before it can be merged into master branch.\n. by then, v2 will have its own and separate branch. understandably it will be maintenance only.\n. @nazar-pc I agree with Sullivan. There's no need for custom IDE configs.\n. done\n. thank you.\n. v3.0 only uses LightOpenID (2014) and OAuth PHP Library (~~2007~~ 2011) and they had to be included into the package because 1) they are now abandonware - I think, and I'm maintaining them along hybridauth. 2) I had to hack into their codes for minor improvements and fixes.\nAnyway, I don't think we'll be using any external library other than those two.\nhttps://github.com/hybridauth/hybridauth/blob/3.0.0-Remake/src/Thirdparty/readme.md\n. OAuth2 specifications was fairly easy to implement and didn't require any external library. The real pain however is with OpenID and OAuth 1/1.0a, and that's what those libraries are for.\n. Good idea indeed, but I'd like to keep the external dependencies for hybridauth down to zero.\n. > concentrated of principal task: OAuth protocols.\nHybridauth has always been a tiny but monolithic library and the implementation of OAuth protocols is just a component of the package and what it has to offer. Furthermore, I believe there's more than enough PHP OAuth libraries out there, and honestly I'm not interested in making Hybridauth into a yet another one of those.\nI totally agree with you on the importance of Composer and that's why we are using Packagist repository as our main medium of distribution, however - as you may know, there's a lot of people who either can't or don't use Composer on their projects, and yes, for their sake I'm willing to reinvent the wheel - or to include it into the package if necessary.\n\nbuzz or guzzle http client\n\nV3 can (at least in theory as I haven't done any actual test yet) work with other http clients and different sessions storage like memcached or redis through dependency injection, so no there's no issue there.\nThe idea is that Hybridauth should work out the box without any external dependency, and the end users are free to use other libraries to replace the default Hybridauth components if they wish so (i.e, logger, session, http client).\n\nAre you neither interested for a POC?\n\nI did look at OptionsResolver, and as I said it's pretty good piece of code, but it has 1034 LOC and it weight 89,5\u00a0Ko (more than 1/3 or the entire Hybridauth 3 repo), so normally I'd pass, however if you think that it's worth it, then a proof of concept would be welcome, but no promises tho.\nI hope that answer your questions.\n. Thank you!\n. @ADmad it's conflicting with @nazar-pc's pr. would you submit a new one please.\n. thank you :d\n. @nazar-pc most of your PR is on point, but I don't agree on the psr3 implementation. logger is a extra and not a requirement, and requiring an external lib just to write a simple string to a file doesn't make much sense to me.\nI think an alternative solution would be to create a wrapper that implements hybridauth LoggerInterface and expect the end user to feed it a Psr3 compliant Logger.\n``` php\nnamespace Hybridauth\\Logger;\nclass PsrLogger implements LoggerInterface{\n    protected $logger;\npublic function setLogger(\\Psr\\Log\\LoggerInterface $logger){\n    $this->logger = $logger;\n}\n\npublic function info($message){\n    $this->logger->info($message, []);\n}\n\npublic function debug($message, $context = null){\n    $this->logger->debug($message, (array) $context); //< needs more work to interpolate the contex\n}\n\npublic function error($message, $context = null){\n    $this->logger->error($message, (array) $context);\n}\n\n}\n```\nusage:\n``` php\nclass ActualLogger implements Psr\\Log\\LoggerInterface{\n    use Psr\\Log\\LoggerTrait;\npublic function log($level, $message, array $context = array()){\n    // write to file or something\n}\n\n}\n$psrlogger = new Hybridauth\\Logger\\PsrLogger();\n$psrlogger->setLogger( new ActualLogger() );\n$adapter = new Hybridauth\\Provider\\Github( $config, null,  null, $psrlogger );\n```\n@ADmad \n\nPlus if we you really want to provide a standalone solution, release archives can be provided which include all dependencies and don't require using composer (we do that for CakePHP).\n\nThat's a sound idea.\nHonestly I was pushing for a standalone solution because at this point all the necessary components are already implemented in v3.0, and end users still have the option to use external libraries for the Http client, session storage and logger if they want/have to.\nI had a discussion with @Soullivaneuh https://github.com/hybridauth/hybridauth/issues/485#issuecomment-109764071 on a similar subject where I gave my opinion, but I want to give more reasons to why I think it would be better for the 2 libs we spoke about in #478 to be included in upstream:\n- both LightOpenID and OAuth PHP should have access to hybridauth facilities like the logger.\n- LightOpenID have its own implementation of http requests based on curl and php streams, and I'm planning to make it use hybridauth Http client instead at some point in time.\n- v3.0 only use a small subset of original OAuth PHP library (~100 LOC) and I removed everything that hybridauth don't need. \nps; btw, this PR is also conflicting with #492 :)\n. looks good, thank you.\n. Thank you.\n. sorry for the delay. \nindex.php is the default callback page and it should be kept as it is. \n. Thank you!\n. v3 doesn't implement an endpoint class like we do in v2. That task is now left to the user, and new authenticating process is explained in docs and examples.. Thank you.. It's done in v3.. See #551 . If I understood you correctly, you want Drupal to actually redirect users instead of Hybridauth? \nIn that case, instead of changing the code of protocols and providers adapters, it'd suffice to use HttpClient\\Util::setExitHandler($callback) or to re-write HttpClient\\redirect($url) in way so Hybridauth would yield that function entirely to Drupal through a callable or something similar.\nOn a side note-ish, it would've been ideal if you were to split this PR into two: one for the fixes and another to discuss any possible modification to the core. \n. >Should I create my owned fork for this? Or we will do this on 3.x ?\nNamespaces and autoloading are already done in v3.  As for the current v2 it's on a maintenance state.. Thanks @StorytellerCZ,\nI did manage to finish a good chunk of the documentation. Are there tasks that remains to be done on current master branch before we may proceed to merge it with 3.0.0-Remake?. Thanks @collizo4sky.\n@StorytellerCZ, alright. I'll merge v3 within the upcoming days.. I believe you'll have to use new methods get and post instead, ex: \n$taggable = $adapter->api()->get(\"/me/taggable_friends\");\nBecause in the case of Facebook, $adapter->api() now returns an instance of Facebook\\Facebook, and api requests must be done accordingly to their new SDK interface https://developers.facebook.com/docs/php/gettingstarted#making-requests\n. Yes, it does. I'll move that notice.. Yes, contributions are welcome. Ideally, OpenID Connect implementation wouldn't require any external dependency as HybridAuth is meant to be a self contained library.. Thanks.. Thanks.. That was a bug, thanks.. apiRequest was missing from abstract adapter class, but should be fixed now.. Yes, that's expected. Tokens are for oauth based adapters.. Because certain apis may not accept json as content type, one solution is to change the current implementation of apiRequest to make it work with either an associative array of parameters or a pre formatted string as payload, ex:\nphp\n$adpter->apiRequest($url, 'POST',\n  json_encode(...),\n  ['Content-Type' => 'application/json', 'Content-Length' => ...]);. Sounds fairly reasonable, go for it.\n\nPUT and DELETE http verb support is missing\n\nThey weren't implemented simply because I haven't come across a use case that requires them, but there are no reasons not to support those as well.\n. Great. Thanks.. Thank you.. None of Hybridauth class methods is meant to be called statically. The static keyword wasn't removed, but that will get rectified shortly.. Thanks.. there goes my evening :d\n. Not fan of unnecessary dependencies. Ideally JWT::decode would be contained in the adapter. . ",
    "F21": "This can be closed as authenticate is now supported in the latest master (af0f3cff) :)\n. This addresses issue #40.\n. Due to the recent issues people have been having with Facebook not being able to log on: \"Authentification failed! Facebook returned an invalide user id.\"\nSee this thread: https://groups.google.com/forum/embed/?place=forum/hybridauth&showsearch=true&showpopout=false&parenturl=http://hybridauth.sourceforge.net/support.html&afterlogin#!topic/hybridauth/R2rfDe_6O2c\nI have found the fix after debugging. The bundled Facebook PHP SDK is out of date. I have updated it to the latest version and reinserted the extendAccessToken() function.\nHope that helps to fix issues for those having trouble with Facebook :)\n. @mozi22: My repo is out of date. Please download the latest master from the official HybridAuth repo.\nThe put all the files from the official Facebook SDK into the thirdparty/facebook folder. It may help, or it may not, as I have not tested it.\nThe problem could actually be caused by something else and not the Facebook SDK. Give that a try and see what happens.\n. Yes, unfortunately, that is what I get too (even with the updated Facebook PHP SDK).\nI did some investigation the other day and built a tiny login using just the Facebook SDK and the problem still persists.\nIt is definitely not a problem with Hybridauth. I have reported the bug to Facebook and they are looking into it: https://developers.facebook.com/bugs/496938847010966?browse=search_5101ab59c0fe24091420303\nWhat I will do is, monitor the bug on FB and when it is fixed, I will test it using HybridAuth and (if required update the FB PHP SDK in hybridauth), then ping you to merge it :)\n. @hybridauth They have finally fixed it! Tested and confirm :smile: \nSee https://developers.facebook.com/bugs/496938847010966?browse=search_5101ab59c0fe24091420303\n. @dashohoxha The above implementation implements the auth_nonce. Previously, there was a problem with Facebook's API, so the feature wasn't working properly, so it wasn't merged. However, that has since been fixed on FB's end. It can be merged now without any issues.\n. @AdwinTrave Done! :smile: \n. There's also buzz which is suppose to be more lightweight.\n. I agree with the sentiment that we do not need to support PHP 5.3. 5.3's last release was released almost 6 months ago and it's already end of life.\nWith 5.6 coming out really soon, I think 5.4 will also be EOLed pretty soon. Therefore, I don't think there's any real need to support 5.3.\nProviders who are running an out of date and unsupported version should be upgrading to something more recent anyway.\n. ",
    "mozi22": "@F21  I tried updating the base_facebook.php by copy pasting this code.\n    https://github.com/F21/hybridauth/blob/3b115ee3abb5afbf44c37082e63aa8b056bf550c/hybridauth/Hybrid/thirdparty/Facebook/base_facebook.php\nBut still I get the same error please help.\n. ok thnx alot.\n. ",
    "atukai": "Thanks!\n. ",
    "tvpmb": "@nazar-pc Is that a config option? I don't see anything in the docs...\n. Oh...right. I do have those configured, so it must be another problem. I just moved the hybridauth install to a completely different nginx server, and the problem moved with it.\nI'm thinking that the problem might have to do with php-fpm and how it gets the fcgi_params, perhaps something isn't getting passed through.\n. Just verified all those settings as well. I previously setup HybridAuth on a bone stock LAMP server running on EC2, and everything worked great out of the box.\nSo I still think the problem has to be with nginx somewhere... The behavior on the working version was:\n1. Go to url: http://domain.com/path/to/auth/folder/\n2. It immediately would redirect to the provider's authorization/login urls - Twitter, Google, etc... I confirmed these all worked.\n3. Once authorized, it would put you back on: http://domain.com/path/to/auth/folder/ and display all of the data from the authorized account.\nI can confirm all this was working on LAMP - but when I moved it to nginx, everything stopped working :(\n. Well FWIW - I just reinstalled hybridauth and re-configured it after moving it and surprise surprise, it works. I'm going to try to find the cause of the problem...seems like it gets pissy if you move it after running the install.php script.\nThanks for the ideas.\n. ",
    "rikiless": "+1\n. some PHP frameworks uses exceptions to redirecting pages, so it will more useful if hybrid library will use own exception class or namespace. also serialising exceptions should be removed i think.\n. ",
    "ghost": "Thank you!\n. It does not interfere with regular Facebook functionality: it is only effective when the Facebook finish API arrives with an \"access_token\" parameter which never happens in the regular flow.\nWe have tested it; our use-case is adding reverse auth to an existing website to enable an iOS app to be built. We are running this modification on our pre-production servers and it has not affected web user's Facebook login in any way.\nFYI I am currently working on a similar reverse-auth facility for Twitter.\n. I do not have any other PHP 5.3 environment in which to test it.\n. I have same issue. I have this problem because FB login window uses https protocol, but my application uses http. I have this in console (using iOS Simulator + Safari developer console):\n\"Blocked a frame with origin \"https://www.facebook.com\" from accessing a frame with origin \"http://www.mydomain.com\".  The frame requesting access has a protocol of \"https\", the frame being accessed has a protocol of \"http\". Protocols must match.\"\nBut i dont have any idea how to fix it.\n. This is still an issue with 2.14. But you only have to add the s to http to get https and then it worked. Did cost me half a day of finding this though.\n. First i download latest version from https://github.com/hybridauth/hybridauth/releases page.\nIn codeigniter application folder:\n1- i create config file in config folder.\n2- import Hybridauth folder in third_party folder.\n3-  import autoload.php in Hybridauth.php\n4- In Config file first declare ( require_once APPPATH.'/third_party/hybridauth/hybridauth.php'; ) then providers arrays. \n5- When i try to access user profile with import config file and declare $hybridauth = new Hybridauth( $config ); it shows error. No find class Hybridauth!. I know it but it is old version Hybridauth . And so different folder structures.\nIn https://hybridauth.github.io/hybridauth/userguide/Configuration.html  page shows old versions and old class name is Hybrid_Auth. But in hybridauth v2.9.3 have Hybridauth class.\nCan u renew configuration details for hybridauth v2.9.3 please? . I check it from https://github.com/hybridauth/hybridauth/releases page. \n\nhybridauth-2.9.3 / src / Structure\n-> Adapter\n-> Data\n-> Exception\n-> HttpClient\n-> Logger\n-> Provider\n-> Storage\n-> Thirdparty\n-> User\nautoload.php\nHybridauth.php\nindex.html\n\nhybridauth-2.9.2 / Structure\n-> Hybrid\nconfig.php\nindex.php\nlive.php\n\nThey are big differences from v2.9.2 to v2.9.3\nFor this reason i need help for latest version.\nI have -> A PHP Error was encountered\nSeverity: Error\nMessage: Class 'Hybridauth' not found\nCan you help me pls.Tnx.. Thanks for quick answer. I will search my answer in 3.x version documents. . Codeigniter. \nI just wonder is it possible with hybridauth functions.\nI quess it is possible with Hybridauth session insert in db with ip address and check it .\n. Thanks. i did it. its working..  I have envato api key and secret key. And i setup redirect uri is correctly (same setting more than 10 providers). After signin process, it show Error : An Error Was Encountered / Error authenticating user.\n. With Codeigniter. \nhttp://localhost/social/endpoint?hauth.done=Envato. Same Error.\nAn Error Was Encountered\nError authenticating user.. I didnt use hybridigniter. And dont save log files. I used hybridauth 295 and i have succesfull 16 providers. In config i guess envato need extra values.I try to add redirect uri like google but it doesnt work. Everything looks good. but after signin completed and approve the envato app permission it turns empty values and show this error. I couldnt find solution :( Thanks for helps. ",
    "zurcxer": "What is the solution?\n. ",
    "richardwiden": "For me setting the \"id\" and \"secret\" in BOTH places in the example solved it. Both in the config.php and HybridAuthIdentity.php\n. ",
    "nasht00": "I've been trying to figure out why would HybridAuth need to block the extension. I thought, maybe there is a naming conflict. I saw that OAuthException would be a conflict, so I replaced all OAuthException with HOAuthException.\nSo far it works OK.\nMaybe someone with a deeper knowledge of the project could check this?\n. ",
    "bgallagher": "+1\n. Is there any way to implement a more sustainable solution?\n. ",
    "foxylearning": "The solution provided by nasht00 seems like it's on the right track. I haven't done extensive testing yet, but this appears to be working for me:\n1) In the Hybrid/thirdparty/OAuth/Oauth.php file, I replaced every instance of OAuthException with HOAuthException. \n2) In the Hybrid/auth.php file I commented out the exception being thrown for the Oauth PECL extension (lines 116-120).\n. ",
    "Ambient-Impact": "I would second bgallagher's concern: I'm encountering a similar exception in Drupal with the OAuth module enabled (I need it to pull Tweets to the site via the Twitter module), and I get a fatal error each time I attempt to log in via HybridAuth's Twitter sign-in, or attempt to remove a Twitter sign-in in the user page. Some sort of permanent switch to a different class name would be awesome, so I don't have to edit it each time I want to install it in a new site or want to upgrade HybridAuth. Thanks!\n. I second bgallagher's suggestion. Having to edit the files for each install or upgrade of HybridAuth isn't ideal, and many others may get the same error and not be able to track down the source, possibly giving up in frustration.\n. ",
    "HarveyEV": "I am having this issue on MODX Cloud.\n. ",
    "Jemeron": "I've added this code to the loginBegin() function, but the problem still exists.\n. ",
    "aktuba": "@$this->scope - FUUUU!\n. ",
    "asmcad": "no, you are not.  seems there is no solution to it...\n. ",
    "challgren": "There is no HTTP_X_FORWARDED_PORT sent from the proxy server\n. I'll see what I can do.\n. Closing due to PR #76 \n. ",
    "nbourguig": "Yes. It is possible for Google apps users to authenticate using the Google Provider, and it's working perfectly.\nAs an administrator for a Google Apps domain, and using the 2-legged method, I can grant access to an application to all the users of that domain. This way, there's no need for the user to explicitly authorize the application. \nhttp://www.google.com/support/enterprise/static/gapps/art/admin/en/cpanel/2-legged-oauth-diagram.png\nIt seems that there is no updated documentation for the link that I give earlier, they deprecated OAuth 1.0, not the 2-legged method.\n. ",
    "spiffyjr": "Yes, please. We need aliases or tagging.\n. ",
    "MichaelGooden": "+1 I don't like including code tagged as non-stable in production releases, and this 2.1.x version seems to be stable for now.\nEDIT: Though it would probably be better to create a git tag, as packagist will automatically pick that up. Including aliases in the composer.json is rather hackish IMHO.\n. ",
    "uabassguy": "I am working on a patch to fix this. I think one solution may be to store the refresh token in a column of the database and loading it along with the serialized string, then replacing it in the $_SESSION variable after, so when it gets written again the token will still be there. This could also fix other services such as Live. If we can find a way to get all the refresh tokens into one serialized string even better.\n. ",
    "Namek": "This one actually doesn't work for me. Anyone who tested it, here?\n. ",
    "markushausammann": "Do I see it correctly that there is no release yet?\n. ",
    "andrew13": ":+1:  This would be nice\n. ",
    "ADmad": "Can't this make into 2.x? The changes I have done are backwards compatible and won't affect existing users.\n. Good to hear.\n. It would be also nice if all exceptions thrown by the lib were of type Hybrid_Exception instead of base class Exception making it easier to identify them.\n. bump\n. :-1: for this request. I would actually suggest doing the opposite. Development of the core should be kept independent of the providers. Including numerous provides with the hybridauth core with make maintenance and managing releases difficult. If required the interface for using providers should be simplified as @dashohoxha suggested.\n. By the why does this project have new maintainers? I believe the original author was no longer able to continue developing it.\n. > May be better to separate to \"core lib\" and \"providers\"?\nThat's what i was suggesting. With the ability for anyone having their own separately maintained provider too. Also from 3.0 hybridauth should start using composer which would also help with dependency management.\n\nIf some project is demanded - it can not freeze forever ;)\n\nIt's certainly good to see the project being thawed :) I was just looking for confirmation from the new maintainers.\nI had made plugin to use HybridAuth with CakePHP 2.x a while back ADmad/CakePHP-HybridAuth. Recently there has been requests to add composer support for it. So I wanted to make sure HybridAuth itself is going to be maintained before i invest anymore time into that plugin.\n. Yup I understand you are not the maintainer, hopefully those who are will respond. They would be getting notifications for these comments :)\n. > If you \"chose and copy\" you modifiyng core library file structure, therefore you not able to keep library as a link (git or other) to repo. And start play with forks, manual updates e.t.c.\nOne word: Composer :smile: \n. If someone chooses to manually copy providers then obviously they are on their own.\nHaving a separate repo for each provider would be actually better. That way people can just include the one's they need in their project's composer config. HybridAuth's main providers repo should only contain generic providers like openID, oauth1, oauth2 which are extremely unlikely to change. All other vendor specific provider should be maintained separately.\n. I see that on the 3.0.0 branch there's Hybridauth/Adapter/Template which has templates for openid, oauth1 and oauth2 so just having those in the core is good enough. All providers under Hybridauth/Provider should be made into separate repo's (perhaps with the exception of openid).\nOf course this is just my personal opinion :)\n. > The best solution would be to create hybridauth as an organization and move this repo under it, then create independent repositories for each provider. \n:+1: \n. Duplicate of #105\n. @ojhaujjwal A fancy solution is really not needed. As commented here a simple cast to string should suffice.\n. I have made a PR #274 reverting these changes as are causing more problems rather than solving.\n. :+1: \n. By the way the suggestion here for fixing the serialization of closure error was to do the string casting when saving the previous error to session in Error class here. \nString casting all values inside Storage::set() is bound to break things since providers store and retrieve their config arrays between requests.\n. :+1: for 3.0\n. On a related note have you considered using https://github.com/thephpleague/oauth2-client ?  Considering the fact that lot of providers are Oauth2 based it would considerably reduce the code you have to maintain.\n. Okay. You could move the 3rdparty openid and oauth1 clients to separate repos of your own.\n. That was fast, could have at least let the builds finish :smile: \n. @miled I have rebased the patch. It's not mergeable. Should have just merged my patch instead of his :)\n. Rebased one more and last time :stuck_out_tongue: \n. I don't really like this. It adds unnecessary complexity and uglifies the code. It can be as simple as having Hybridauth\\Logger\\Logger extend Psr\\Log\\AbstractLogger and implement the log() method (which is basically the currently Hybridauth\\Logger\\Logger::_write() method).\n. Composer is the defacto dependency manager for PHP now and I don't see any problem makes it's use a requirement.\nPlus if we you really want to provide a standalone solution, release archives can be provided which include all dependencies and don't require using composer (we do that for CakePHP).\n. @miled I like your solution of adding a Hybridauth\\Logger\\PsrLogger class even though it does add an extra wrapper class. \nIn general your aim to keep hybrid auth standalone and simple while still allowing to use alternate implementations for logger, http client etc. is pretty reasonable. Just need to be careful it doesn't result in reinventing the wheel.\n. @nazar-pc Because those emails are an annoyance for the patch author. The build success / failure can be easily seen on github ui status notifications. If the author fails to notice failures the maintainer can just ping him to fix.\n. Also often the builds fails due to no fault of author like this one https://travis-ci.org/hybridauth/hybridauth/jobs/67060386\n. > Yes, it can be seen, but since build failed - you, as patch author, should be aware about to fix it, maintainer may just ignore patch until you fix it.\nAs I pointed out the failure could be a false positive with nothing to be actually fixed by the author.\n\nThis is just one email per pull request,\n\nFrom this repo yes, but for someone who contributes to multiple repos they all add up.  Plus in general people get enough unneeded mails already from various sources :)\n\nThat build was an error, do you have permission to re-run it?\n\nOnly this repo's maintainers have permission to re-run the build.\n. Do you guys plan to drop support for v2 once v3 is released? If not those using PHP 5 can keep using hybridauth v2.\nIf not PHP 7 please at least consider bumping up to PHP 5.6 (which is going to have security fixes for another year) for v3.\n  . If throwing exception you shouldn't be setting headers. Let the error handler decide what's required.\n. ",
    "unlight": "How to fix?\n. ",
    "rafiqbd": "Hi @SocalNick I've updated according to your suggestion. Also squashed unnecessary commits. \nPlease review them and let me know if it is ok. \n. Hi @hybridauth and @SocalNick , Have you checked yet if this is fixed. thanks\n. Ok, @hybridauth . i will try to figure out this.\nthanks\n. sorry, i am out of office now. will send another push after change this. actually this was urgent to download for my team with composer that's why used this. thanks\n. the change in the hybridauth/Hybrid/thirdparty/Facebook/facebook.php is ok? please let me know. thanks\n. ",
    "ceeram": "ccing myself\n. ",
    "uzyn": "Hi, \nI'm the original author of Opauth.\nAdmittedly I have not tried out HybridAuth to point out the differences. I was not aware of HybridAuth until after Opauth's release.\nNonetheless, I thought I could point out some of the aims why I embarked on Opauth:\n1. Opauth takes a simple approach at authentication and only does 1 thing only \u2013 authentication.\n2. Opauth aims to standardize the authentication flow and the user data, encouraging its strategy contributors to attempt to map the different user attributes into a common response attributes object.\n3. Opauth is a framework \u2013 allowing and encouraging strategy contributions by anyone/everyone while keeping it decentralized. Opauth only attempts to maintain a list of known and published strategies and does not distribute strategies with it.\nAlso, @ceeram is heading the effort on the 1.0 refactor for Opauth that solves some of the quirks of Opauth 0.x while making full use of Composer and autoloaders.\n. ",
    "alex88": "Oh sure, well so take is just as an advice :)\n. ",
    "kreitje": "No problem. Needed to fix it for myself and figured the rest of the community might like it.\n. ",
    "elyobo": "@ADmad agreed, I actually have a local version which does this for that reason, but wanted to see if there was interest in this request before putting up another with the rest; I figured a small pull was more likely to be accepted, as the full implementation involves more extensive changes (as Exceptions are being used elsewhere already).\n@jeffreytgilbert I'm not sure what your point is, sorry.  We know what Exceptions are, that's why we'd rather use them, and this isn't really related to Zend.\n. @hybridauth Any interest in this, or an update which switches the existing Exceptions to use Hybrid_Exceptions?  Any changes or suggestions?\n. Thanks @hybridauth  are you OK with just the changes in this patch then?\nWith regards to changing the other Exceptions to be Hybrid_Exceptions, what's your reasoning behind not wanting that?  Using a generic Exception makes it difficult to handle exceptions coming out of the hyrbidauth code, as you need to instead catch all exceptions and inspect them, rather than simply doing a catch (Hybrid_Exception $e) and applying appropriate logic.\n. @ADmad I've remove the header() calls now as well.\n. Thanks for the fixes @ApacheEx :+1: . Yeah, didn't think to remove that from the original code.  Updated patch coming soon.\n. ",
    "19Gerhard85": "+1\n. Did you set up the facebook app correctly? Is the auth callback page accessible?\nEnable the debug mode and provide us the log.\n. Please post your configuration file.\nTo enable logging you have to provide the path to a writeable file in the configuration.\n. You're using the Joomla plugin right? Do you use the latest version (https://hs-shelf.com/item/UyLOnrdkO9sEg2S1hulA.html)?\nUnfortunately this error is caused by the plugin and not by HybridAuth it self. May you check the documentation for the plugin: https://hs-shelf.com/docs/hs-users/17-settings-of-each-social-services/6-setting-of-facebook-authentication.html\nGreets\n. ",
    "Gomes81": "Who's working on version 3.0?\nI think this kind of things should not wait. This would be a major improvement in terms of debugging the existing code and on the adoption of the already developed code, cause nobody will use this code in production with die statements on it. That's just my opinion.\n. For facebook, please see this Stack Overflow question: http://stackoverflow.com/a/8707924 I think is something like this what you guys want. Right?\n. Well to make sure the user deauthorizes your application you could use the link I provide, if the user had deauthorized the app, hybridauth should remove the session key associated to that provider. Whenever my persistence method is database or session. Am I right?\n. ",
    "pranshuagrawal": "@hybridauth did you guys added it in the docs? I am facing the same issue.\n. @WebAgencyContat @StorytellerCZ I was using this amazing library but I have faced the same issue and way to make it work?\n. ",
    "Yurko-Fedoriv": "Same here. This happens if you have some closure in call stack which ends up in trace and causes error.\nThe solution may be converting exception to string before storing:\nHybrid_Auth::storage()->set( \"hauth_session.error.previous\", (string) $previous );\n. Due to the nature of the bug, it should not depend on php version (except for <5.3 which does not have closures. But usage of such outdated php would be problem itself :))\n. ",
    "karthikeyan-manivasagam": "Can be fixed by these steps. \nhttp://monkpal.com/exception-serialization-closure-not-allowed-hybridauth-linkedin-phalcon. Im using phalcon linkedin not working i fixed by this steps \nhttp://monkpal.com/exception-serialization-closure-not-allowed-hybridauth-linkedin-phalcon\n. Try by these steps http://monkpal.com/exception-serialization-closure-not-allowed-hybridauth-linkedin-phalcon. ",
    "Azot94": "If I set debug mode only appears message: \"ERROR Hybriauth configuration error.\". Log not be recorded in the selected folder.\n\nI am using Joomla! 3.0.3 Componet hs_users\nMySQL:5.1.58\nPHP: 5.3.20\nApache/2.2.17\n. My hybrid_config.php\nhttp://wklej.to/7tJhv\nI enable debug mode, but still doesn't save the log in the selected location\n. Ok ths\n. ",
    "scholtz": "Nope.. The code must not rely on the existance of array keys..\njust change the lines as suggested, and no warnings should be pushed by php..\nor put there @ , but using isset is much butter..\n. ",
    "antonyf": "Hi Redaktor.\nI used your plus.login method shown here with the 2.1.1 dev and other versions social hub example.\ni get this error:\nUser profile request failed. Most likely the user is not connected to the provider and he should to authenticate again.\nOriginal error message: User profile request failed! Google returned an invalid response.\nThere is no session information its just a blank or some other provider info. Please can you help to fix it. |I am trying to get the google contacts, if i can also get google+ contacts then its a bonus..\nregards\nAntonyf\n. ",
    "redaktor": ":+1: \n. ",
    "maximerassi": "Valid point alixandru, here is a commit addressing this concern. The key is now called coverInfoURL which contains the url to the json object which you then pass to the function getCoverURL() to get the cover url.\nphp\n$service = $hybridauth->authenticate( \"Facebook\" );\n$user_profile = $service->getUserProfile();\n$coverURL = $service->getCoverURL($user_profile->coverInfoURL);\n. ",
    "kamov": "I can't create a support ticket here :(\nI can't see create new issue... Sorry for writing here...\n. > What you are talking about isn't a provider, but a feature.\nYes I don't mean a provider, what I mean was \"Disconnect a provider\"\n. but if you closed this, then how you can find it?. ",
    "danaki": "No fix still. VK's code still looks like:\n$birthday = explode('.', $response->bdate);\n...\nlist($birthday_year, $birthday_month, $birthday_day) = $birthday;\nWhere by spec it's in format \"23.11.1981\"\n. @nywuctuk please double check next time, the $response->email was correct\n. ",
    "jarretth": "Actually, I see that a lot of work on this front is being done in 3.0.0\n. This PR is cleaned up and included in #131 \n. ",
    "lanort": "I stumbled upon this on searching for a problem with additional providers after a composer update:\n1) I created a symbolic link from folder Providers to the additional-providers folder. This worked fine\n2) A composer update of hybridauth (from 2.2.0 to 2.2.2) deleted the additional XING provider.\n3) If I try to login via this provider I get the following error message (because the file is gone)\n\nSymfony \\ Component \\ Debug \\ Exception \\ FatalErrorException\nHybrid_Provider_Adapter::factory()\nFailed opening required '/www/.../vendor/hybridauth/hybridauth/hybridauth/Hybrid/Providers/XING.php'\n\nSo it looks like I would have to copy and paste (or link) my additional providers after every composer update. So it seems to me, that the solution of @lube8uy would fix that and eases the update process.\n. ",
    "iantearle": "Am I missing something here? The additions to this file are identical to the deletions?\n. Ah, I see it now, and this does solve what I was unable to do with LinkedIn. Great work. Now to get these merged in.\n. I experience the same, I can only assume its when this process happens; (this is what I have on a login script- where my site is really slow).\n```\ntry{\n   // get the stored hybridauth data from your storage system\n   $hybridauth_session_data = kurasie_get_stored_hybridauth_session(fof_current_user());\n\n   if(!empty($hybridauth_session_data)) {\n        // then call Hybrid_Auth::restoreSessionData() to get stored data\n        $hybridauth->restoreSessionData( $hybridauth_session_data );\n\n        // call back an instance of Twitter adapter\n        $twitter = $hybridauth->getAdapter(\"twitter\");\n        $facebook = $hybridauth->getAdapter(\"facebook\");\n        $linkedin = $hybridauth->getAdapter(\"linkedin\");\n    }\n}\ncatch( Exception $e ){\n   echo \"Ooophs, we got an error: \" . $e->getMessage();\n}\n\n```\n. ",
    "Facyla": "It really looks similar, but there are changes !-) \n=> i uncommented line 125, and commented following line, which reverts a previous \"hack\", that blocked Linkedin settings from being used and \"forced\" the use of a limited scope (?scope=r_basicprofile+r_emailaddress+rw_nus+r_network)\n. ",
    "pavlyuts": "It's really so bad that even noone may to merge hotfix-level requests? :(\nI made 2 fixes taking it up and wish to merge it, but how to do if mantainer is out?\n. It is not a big deal to merge all the pull requests. Think, \"to maintain the project\" means much more.\nFriends, how do you think, is this project really demanded? Or we have other solutions, much popular and properly supported?\n. My situation is quite ifferent: i use Yii fremework and I need not just another php oauth lib, but some lib with Yii wrapper. From all of found this one offers the most complete set of providers. It is pity that it has no maineinance now, really.\n. Thanks great! I never seen it before\nI should notice, that hoauth wrapper is the most downloaded oauth extension there.\n. My research sows that github has no any simple tools to pick up \"foreighn\" pull requests :( It looks like you need connect forked repo, cherrypeak some commits and repeat this steps for each. A lot of monkeywork, really :(\n. I think people are interested, but it's better if you take over the master branch. If I have some fixes, it is better to fork from you and make pull requests or sent it as a patch?\n. Guess, you need to contact the original maintainer and agreed to take this project in your hand. It's much better for all the people. Guess, the project is demanded as pull requsests genereted regardless of mantainer activity.\n. Please, have a look on https://github.com/hybridauth/hybridauth/pull/152\nThink, my code is more correct for this fix.\n. I agree, I think it could be usefull to create tag 2.0.11 and make this information available to all the projects relying on this library!\n. +1 to 2.2.0, think it is good idea to leave all the previous inconsistences in the past and don't waste time to usless work. As for previous releases on the site, guess it's better to keep it as is.\n. And one more: it could be nice to turn on issue tracking for the repo, and, possible, wiki.\n. Thanks!\nI guess all future discussions should be moved to Issues ;)\n. @dashohoxha AFAIK Admin page of Drupal is solely made by drupal integration module team ;)\nAs for me, the separation of \"core\" and \"extra\" providers looks quite wrong. May be better to separate to \"core lib\" and \"providers\"?\nIf we think like \"core team develops core and anyone may develop providers\" - I like it. However, that means we need to have more clear structure and pay attention to integration issues. I guess that necessary provider autoload from repo could be the best. But this is definetly not an issue for current \"hotfix\" release.\n@ADmad Guess, this is just Open Source way. If some project is demanded - it can not freeze forever  ;)\n. I am NOT a maintainer, I am not so good for it. I am just keep an eye on the project and supplied some fixes which is valued for me. Occasonally, I am asked \"why not?\", nothing more )))\nIf you look some confirmation from maintainers, you shoul address @AdwinTrave and @dashohoxha.\n. Partly agree. But! If you \"chose and copy\" you modifiyng core library file structure, therefore you not able to keep library as a link (git or other) to repo. And start play with forks, manual updates e.t.c.\nOur world is too fast changing now! If you wash to make something right way you need to think carefully on how you will be update. If you remember last Forsquare trick?\nTherefore I think the best approach is to make providers auto-install and auto-load, or even auto-upgrade ;)\n. @ADmad are you sure that composer helps for this? I am not! Explain how you see it, please.\n. Finally, we have no agree on it but we need a clear concept of it to move future.May someone describe strectures and logics?\n. @PrplHaz4 really? So, why you just no fixed it? It's just 2 lines of code and I was greatly surprised when met this behaviour in very established project.\n. ",
    "macagoraga": "There are many alternative solution, checkout also this simple:\nhttp://ohmyauth.com/\n. there are some many for yii:\nhttp://www.yiiframework.com/extensions/?category=1\n. ",
    "menxaca": "Thanks to everyone who care about this project and want to keep it alive. \n. ",
    "stephenr85": "No, it will pass null, which is what it did before.\nOn Mon, Mar 3, 2014 at 7:48 PM, Jan Dvorak notifications@github.com wrote:\n\nIs there any issue if the extra parameter isn't defined in config?\n\nReply to this email directly or view it on GitHubhttps://github.com/hybridauth/hybridauth/pull/150#issuecomment-36580055\n.\n. \n",
    "jeffery": "This indeed throws a notice error because 'extras' key does not exist by default. Can a default value be set so it does not cause breakage?\n. Thanks @dorongutman I will see how I can fix this by passing in a configuration value.\n. @AdwinTrave could you please verify this fix please. It is stopping authentication for yahoo via OAuth1\n. Trust forwarded session feature was introduced in facebook sdk in commit https://github.com/facebook/facebook-php-sdk/commit/42481fa03f98465fd6dc6eb99a5124c01e8797d2 and later into hybridauth in commit https://github.com/hybridauth/hybridauth/commit/4aa7d956f08c28cc200da315e0c9b631767601d4\nHowever the config was never introduced and hence the functionality was broken.\n. @AdwinTrave Could you please verify this fix. Thanks\n. ",
    "jhubert": "@AdwinTrave Are you referring to the code at https://github.com/jhubert/hybridauth/blob/patch-1/hybridauth/Hybrid/Provider_Model_OpenID.php#L120 or at https://github.com/jhubert/hybridauth/blob/patch-1/hybridauth/Hybrid/Provider_Model_OpenID.php#L132 ?\nhttps://github.com/jhubert/hybridauth/blob/patch-1/hybridauth/Hybrid/Provider_Model_OpenID.php#L132 looks like an exact duplicate of the code that I removed and the logic doesn't make sense to me with it in place:\nThe current logic seems to work like this:\n1. If the displayName isn't set, assign the user's last name and first name to the displayName\n2. If the friendlyname exists and the displayName is blank, assign the friendly name to the displayName\n3. If the displayName is still blank, try to assign the user's first name and last name to the displayName\nThe issues I see with this are:\n1. If the user has a first name or last name, 3 never happens\n2. If the user doesn't have a first name or last name, 3 doesn't do anything\nThat's what leads me to believe that 3 is duplicate. However, I remove 1 because it made more sense to me that we would try to assign the friendlyName before defaulting to the user's concatenated firstName and lastName.\nThe new logic is:\n1. If the user doesn't have a displayName, but they have a friendlyName, assign the friendlyName to the displayName\n2. If the user doesn't have a displayName or a friendlyName, we assign the firstName and lastName to the displayName.\nOf course, that's assuming that the friendlyName would take precedence over the firstName and lastName. If firstName and lastName are more important than friendlyName we could flip the steps.\n. fwiw, this pull request also fixes an issue where displayName was being set as \"lastName firstName\" which is really annoying. Can we get a review and merge on this? :shipit: \n. ",
    "sergeikretov": "+1\n. ",
    "zdenekca": "The class Facebook seems to be using session to store its data as well:\nhybridauth\\Hybrid\\thirdparty\\Facebook\\facebook.php\nDoes it need to be updated to use the storage mechanism?\n. ",
    "ahdja": "i got same problem only if using facebook auth. \n. ",
    "miteshsc": "I have same problem and i am debugging it. will post hints here.\n. ",
    "xavier-rodet": "I have the same problem with facebook auth since i put my project on my VPS (and i dont have the problem on local environment) ! :(\n. ",
    "madikarizma": "I had this issue until I defined my scope in the configuration. See: http://hybridauth.sourceforge.net/userguide/IDProvider_info_Facebook.html\nI set my scope to 'public_profile' and now the process works at the speed I expect it to. I'm not sure if this is the root of the problem or not, but it appears to work better once scope is defined.\n. @nazar-pc Thanks for the advise. I hooked up the new Facebook SDK originally, but enjoyed the ease of enabling multiple services with HybridAuth's. Sounds like I need to make some adjustments.\n. @mbardelmeijer I moved to the latest PHP SDK for Facebook, which is now at v4 (link below). This increased the my connection speed with Facebook dramatically, once set up properly. I am still using HybridAuth for Twitter and I have no reason to change that.\nI am in the middle of a launch, but I will try to share my code soon, if it would be helpful.\nhttps://github.com/facebook/facebook-php-sdk-v4\n. @mbardelmeijer Correct. Basically, my app login code is utilizing each library depending on the user's preferred login provider. When it's Twitter, I execute using the HybridAuth methods and Facebook PHP SDK when it's Facebook.\n. ",
    "mbardelmeijer": "Any news on this? Also have speed problems with the getAdapter function for Facebook. Is HybridAuth also using the V2.0 API?\n. That would be great! If i understand it correctly, you are not using HybridAuth for Facebook API call's anymore, but the Facebook PHP SDK? Of did you implement the V4 in HybridAuth?\n. Any news on this?\n. Does someone has a fix for this?\n. @juanjolainez can you check with a print_r($_SERVER) of the HTTP_* variables are set on your configuration?\n. @juanjolainez on what kind of environment are you running? i.e. PHP version, Windows / Linux, used browser to test etc\n. Any news on this?\n. Figured it out, had to add the following in the config:\n\"approval_prompt\" => \"force\"\n. ",
    "tanviet": "Thanks Adwin! \nDid you try to login via Windows Live before? And did you receive error messages like me?\n. Thank you for your quick response! I really appreciate your help. \nWhat did you enter into Redirect URL in your Live app?\nI guess I get above error messages because I entered invalid Redirect URL such as http://mywebsite.com. I couldn't use Callback URL (http://mywebsite.com/path_to_hybridauth/?hauth.done=Live) into Redirect URL field because Live does not accept query string in its Redirect URL.\n. I also couldn't login via Yahoo account yesterday with above error message. I found some solutions with Google but it was unsuccessful. Hope the team fix it soon.\n. ",
    "myrage18": "Im facing the same issue... It suddenly stopped working... used to work with redirect url: https://domain.com/hybridauth\nAny solution to this problem ?\nhttps://login.live.com/err.srf?lc=1033#error=invalid_request&error_description=The provided value for the input parameter 'redirect_uri' is not valid. The expected value is 'https://login.live.com/oauth20_desktop.srf' or a URL which matches the redirect URI registered for this client application.\n. For Facebook, I have read regarding the new SDK that only friends that are also using this app can be listed... :( We can't anymore retrieve friends list if they are not using the app. I'll check for Google. thanks\n. ",
    "PareshRadadiya": "@AdwinTrave  I'm getting same as @myrage18 \n. I'm getting the same\n. ",
    "galadhremmin": "I am getting the same as @AdwinTrave and @myrage18.\nThe problem is that you're not permitted to enter query strings in the redirect URL. URL Rewriting might be a workaround?\nedit I tried with URL Rewriting. No success.\n. ",
    "mattmemmesheimer": "I'm having this issue as well.  Microsoft does not allow query strings in the redirect URI so I cannot get it to accept https://mywebsite.com/path_to_hybridauth/?hauth.done=Live\n. ",
    "aWuttig": "Same Problem here :-1: . Done in https://github.com/hybridauth/hybridauth/commit/435030e4679149eda5a7931cfd047ee538cab9dc. Hey @GrafDe \ni changed the following code in line 86 and it works for me:\nhttps://github.com/hybridauth/hybridauth/blob/master/hybridauth/Hybrid/Providers/Facebook.php#L86\n$accessToken = $helper->getAccessToken($this->params['login_done']);\nPlease discuss about it.\n. Please vote for this pull request --> https://github.com/portrino/hybridauth/commit/810edcff909195220bff5a72c5eff0f8c2112aac. Thank you!. I had the same problem. And the soution for me was here: https://github.com/hybridauth/hybridauth/issues/727. autloading will be done via composer autoloader normally. Do you add the  Valid OAuth Redirect URI in Facebook?\nI make a complete doc for shopware here https://store.shopware.com/en/port171127432370/social-login-via-hybridauth.html\nYou only have to do the facebook stuff which should be equal on all frameworks. Do you really use v2.9.1 of hybridauth?. Yes please update, because my fix from https://github.com/portrino/hybridauth/commit/810edcff909195220bff5a72c5eff0f8c2112aac is only available in the new version 2.9.x. Maybe Facebook changed the Graph API or the security level.\n. ",
    "gaborsar": "We have the same problem on a website since Monday. Same error message.\nIt looks like Yahoo sends this response (html of course):\n\"Yahoo Logo\nWill be right back...\nThank you for your patience.\nOur engineers are working quickly to resolve the issue.\"\nhttp://developer.yahoo.com/forum/OAuth-General-Discussion-YDN-SDKs/http-social-yahooapis-com-Will-be-right-back/1395509802423-89faffa2-1503-486d-bc29-6505719bd774\n. Possible source of the response above:\nhttp://social.yahooapis.com/v1/me/guid\nChanging the protocol from http to https may helps (africa356's comment). I did not have the time to test it (I will do it in a few hours and let you guys know if it did work to me).\n. Seems works.\nhttps://github.com/hybridauth/hybridauth/pull/177\n. Commit: https://github.com/gaborsar/hybridauth/commit/9343ee77\n. Do not rely on the Yahoo sample.\nIt is borken since this issue: https://github.com/hybridauth/hybridauth/issues/174\nThe code has been corrected but as I see the sample is still using the old code.\n. ",
    "Artgit": "@gaborsar, @AdwinTrave thanks a lot ! Now everything works fine !\n. @AdwinTrave , nothing changing last time with our Yahoo settings...\nAlso, your demo with Yahoo still doesn't work  http://URLREMOVED/opensource/hybridauth/social_hub/login.php\n. ",
    "cautapchung100": "Hi!everybody\nI use cakephp, when i loggin by yahoo then alert error \nAuthentification failed. The user has canceled the authentication or the provider refused the connection.Original error message: Authentication failed! Yahoo returned an error. 401 Unauthorized.Authentification failed. The user has canceled the authentication or the provider refused the connection.Original error message: Authentication failed! Yahoo returned an error. 401 Unauthorized.Trace: #0 \nPlease help me ? :(\n. Thank you! it fixed ! Error for me\n. ",
    "gazsp": "Cool, thanks.\n. ",
    "richardpickett": "Good news! I figured it out!\nTypical - you spend days debugging and digging in, finally give in to post a bug or ask for help and then figure it out within an hour or so... (sigh)\n\u2261:^D\nBackground: I am using hybridauth as part of a wordpress plugin that includes it to do the social-connect/login.\nIn wordpress I had set the domain in the URL of the site using upper and lower case. This plugin then uses that site URL to build the return URL for hybridauth. Naturally when facebook sends you back, even though it sends you to the upper/lower case version of your domain, that's not what the $_SERVER variables will give you, which is what facebook then uses to check to see if the URL you are on \"now\" matches the same URL that was specified in the return_uri.\nAll this work, and all I had to do was set my site url to all lower case.\nHope this helps the next guy!\n. ",
    "ojhaujjwal": "Yes, Guzzle is awesome. It will be awesome if this library uses Guzzle.\n. I don't think Hybridauth 3.0 is coming anytime soon(looking at the current status). So, by the time, Hybridauth 3.0 is released, there is a possibility that the hosting provider will support PHP 5.4\n. It is not surprising that the web is slow too upgrade because (look at us) it has been 2 years since @evandotpro opened issue #34 and we have done nothing. PHP 5.4 is a good choice because it(refactoring) is not going to happen soon. \n. Lot of things to be done.\n. This issue can be fixed with this library.\nhttps://github.com/jeremeamia/super_closure\n. Please reopen the issue since it is not fixed at the time of writing.\n. @AdwinTrave Please tag v2.2.1 right way.\n. ",
    "mediamonks-robert": "+1 on using Guzzle\n. ",
    "daparky": "I've also ran into this issue before - found no resolution yet.\n. There's a few on packagist...\nhttps://packagist.org/packages/atticmedia/anvard\nhttps://packagist.org/packages/frozennode/social\nhttps://packagist.org/packages/hybridauth/hybridauth\n. ",
    "carr0lls": "@Gomes81: that link shows us how to remove access tokens when a user deauthorizes but that's not the problem we are facing. We need it to clear the session keys so that the user is able to reauthenticate a provider. \n. @hybridauth :+1: yup that's exactly what i did. unless we change the code to store to database instead of local session and setup deauth scripts to logout the users in the db, that's all we can do.\n. ",
    "chateauv": "It doesn't seems the case since I am facing the same issue. When I sign in through a social and close the page and go back after a couple of minutes (20-30 mins) and I can't sign in again and get a message saying \"User profile request failed. Most likely the user is not connected to the provider and he should to authenticate again.\"\nIs this library still supported ? Not to much support provided anymore.\n. ",
    "j05u3": "@carr0lls , @hybridauth   I did the same but then it fell into a redirection loop , after that I realized the problem was a cookie: fbsr_[appID] which had to be deleted in order to work normally, so this worked for me:\nphp\n    if( $e->getCode() == 6){\n        if( trim(strtolower($provider)) == \"facebook\" && isset($_COOKIE[\"fbsr_\"+$fbAppID]) ){                       \n                        setcookie(\"fbsr_\".$fbAppID,  null, time()-3600, '/');\n                        //cleaning facebook cookie which caused the exception 6 in hybridauth   \n                        displayLoadingViewAndAuthenticate();//redirects with javascript to authentication\n                        die();\n        }\n    }\n. I had the exact same error, I discovered that the session global variable didn't have the required values (\"CONFIG\") and it was because I set the base_url to a different than the one from which I was testing. To be more specific: I was accessing with www.mywebsite.com and the base_url was set to just mywebsite.com. Fixed it by setting base_url to www.mywebsite.com. I also recommend to redirect to www like this: http://stackoverflow.com/questions/4916222/htaccess-how-to-force-www-in-a-generic-way\n. The same for Hybrid_Exception.\n. ",
    "alidl923": "Still facing the same issue....\n. ",
    "movence": "I had two callback URLs and guess that was the problem. Now it works fine. \n. This is not an answer for your question, but I'm having a trouble getting this library to work with Facebook on locahost. Do you mind sharing your Facebook app settings for localhost testing?\n. ",
    "mbasfour": "@movence just add localhost as your mobile site url and it'll work and when you upload the site you change it back to nothing if you don't have a mobile site or to your mobile site url if you have one.\n. After testing my server with this file \nhttps://github.com/mistergiri/hybridauth/commit/0989180a863c89d9491cdf1543f56d6f8a34057a\ni found that my server doesn't support ssl so i recompiled apache with OpenSSl installed form cpanel and everything worked perfectly\n. ",
    "black-lotus": "i've same issue in codeigniter hybridauth, Facebook auth always append #_=# and when i check log files give result \"Next exception 'Exception' with message 'Authentication failed! Facebook returned an invalid user id.' in /project/application/vendor/hybridauth/Hybrid/Auth.php:147\"\nwhen i added the base_facebook.php like this\npublic static $CURL_OPTS = array(\n    CURLOPT_CONNECTTIMEOUT => 10,\n    CURLOPT_RETURNTRANSFER => true,\n    CURLOPT_TIMEOUT        => 60,\n    CURLOPT_USERAGENT      => 'facebook-php-3.2',\n    CURLOPT_SSL_VERIFYPEER => false,\n  );\nand i access with following url without https only http://example.com/hauth/Facebook\nit works totally works\nbut when i access using https://example.com/hauth/Facebook\nit doesn't works again\n. ",
    "Dreamvention": "Hi I have the same error! it does not work with https, no matter what I put in facebook app settings - it only works with http.\nhas anyone found a solution yet? \n. yes, i saw that later and checked what they actually added. AdwinTrave  added correctly - he removed that instance of original code. \nthanks for noticing it!\n. ",
    "hardikoc": "I have tried all the possible options i see above and i found online, updating SDK version from 3.2.1 to 3.2.2, adding config options, setting trustforwarded in config, updating the proxi section on base facebook page etc but after i have setup SSL on my server, only facebook signup doesn't work, the twitter, linked in, instagram etc works just fine. Can you please help?\n. ",
    "tartakxg": "Yes, the same problem - https site:\n[HybridAuth] Authentication failed! Facebook returned an invalid user id.\nfix, please\n. This doesn't fix problem in MODX CMF \n/core/components/hybridauth/model/hybridauth/lib/resourcesconfig.php.tp\n\"Facebook\" => array ( \n                \"enabled\" => #FACEBOOK_ADAPTER_STATUS#,\n                \"keys\"    => array ( \"id\" => \"#FACEBOOK_APPLICATION_APP_ID#\", \"secret\" => \"#FACEBOOK_APPLICATION_SECRET#\" ),\n                \"trustForwarded\" : 1\n            ),\n. ",
    "vignestion": "Same Problem For me too\n. @VladyslavKurmaz  \nIt spit me a error like this This is the code \nWarning: require_once(C:/wamp/www//hybridauth-2.6.0/hybridauth/Instagram.php): failed to open stream: No such file or directory in C:\\wamp\\www\\edit\\hybridauth-2.6.0\\hybridauth\\Hybrid\\Provider_Adapter.php on line 86\n$hybridauthLib = $_SERVER['DOCUMENT_ROOT'] . '/hybridauth-2.6.0/hybridauth';\n  $hybridConfig  = array(\n    \"base_url\" => \"http://localhost/edit/hybridauth-2.6.0/hybridauth\",\n    \"providers\" => array(\n      \"Instagram\" => array(\n        \"enabled\" => true,\n        \"keys\" => array(\n          \"id\" => \"code\",\n          \"secret\" => \"code\"\n        ),\n        \"wrapper\" => array(\n          \"class\" => \"Hybrid_Providers_Instagram\",\n          \"path\" => $hybridauthLib .'/Instagram.php'\n        )\n      ),\n    \"debug_mode\" => false,\n    \"debug_file\" => \"hybridauth.log\"\n  )\n    );\n. Yes I moved back the file As you said But it still spits me a error .Save me pal.\n. Common Man You are Life saver.It worked perfectly\n. Hello,Again The same Problem  But this I did all the thing correctly Yesterday its working But Today its not @VladyslavKurmaz \n```\nFatal error: Uncaught exception 'Exception' with message 'No provider ID specified.' in C:\\wamp\\www\\livelor\\login\\hybridauth\\hybridauth\\Hybrid\\Provider_Adapter.php on line 70\n( ! ) Exception: No provider ID specified. in C:\\wamp\\www\\livelor\\login\\hybridauth\\hybridauth\\Hybrid\\Provider_Adapter.php on line 70\nCall Stack\nTime    Memory  Function    Location\n1   0.0010  324752  {main}( )   ..\\edit.php:0\n2   0.0900  846864  Hybrid_Auth::authenticate( )    ..\\edit.php:316\n3   0.0900  846960  Hybrid_Auth::getAdapter( )  ..\\Auth.php:234\n4   0.0900  847120  Hybrid_Auth::setup( )   ..\\Auth.php:246\n5   0.0900  848552  Hybrid_Provider_Adapter->factory( ) ..\\Auth.php:277\n```\n```\n$hybridauthLib = $_SERVER['DOCUMENT_ROOT'].'/livelor/login/hybridauth/hybridauth';\n  $hybridConfig  = array(\n    \"base_url\" => $_SERVER['REQUEST_SCHEME'].\"://\".$_SERVER['HTTP_HOST'].\"/livelor/login/hybridauth/hybridauth\",\n    \"providers\" => array(\n      \"Instagram\" => array(\n        \"enabled\" => true,\n        \"keys\" => array(\n          \"id\" => \"XXXX\",\n          \"secret\" => \"XXXXX\"\n        ),\n        \"wrapper\" => array(\n          \"class\" => \"Hybrid_Providers_Instagram\",\n          \"path\" => $hybridauthLib.'/additional-providers/hybridauth-instagram/Providers/Instagram.php'\n        )\n      ),\n    \"debug_mode\" => true,\n    \"debug_file\" => \"hybridauth.log\"\n  )\n    );   \nif (isset($_GET['service']) == 'Instagram') {\n    $service = $_GET['service'];\n$hybridauth = new Hybrid_Auth($hybridConfig);\n$authProvider = $hybridauth->authenticate( $service );\n\n$user_profile = $authProvider->getUserProfile();\nif($user_profile && isset($user_profile->identifier))\n          {\n $idg = $user_profile->identifier;\n           $access = 'XXXXX';\n           $data = @file_get_contents(\"https://api.instagram.com/v1/users/$idg/?access_token=$access\");\n           $data = json_decode($data, true);\n      echo \"Followers\".$data['data']['counts']['followed_by'];\n       //echo \"<b>Profile URL</b> :\".$user_profile->profileURL.\"<br>\";\n\n      }\n\n}\n```\n. @VladyslavKurmaz Actually the problem occurs when We Join the all the logins\n. @VladyslavKurmaz  Same Problem Pal.\nBut this time different error\nWarning: require_once(C:\\wamp\\www\\livelor\\login\\hybridauth\\hybridauth\\Hybrid/Providers/Instagram.php): failed to open stream: No such file or directory in C:\\wamp\\www\\livelor\\login\\hybridauth\\hybridauth\\Hybrid\\Provider_Adapter.php on line 96\n. No I didn't change that $hybridauthLib = $_SERVER['DOCUMENT_ROOT'].'/livelor/login/hybridauth/hybridauth';  this is it.\n. No I swear i didn't change that And this my Script.But its working If this script is placed top of the page.If so Not providers are working. I don't know what is going on\n```\nif (isset($_GET['service']) == 'Instagram') {\n    $service = $_GET['service'];\n     //auth config\n     $hybridauthLib = $_SERVER['DOCUMENT_ROOT'] . '/livelor/login/hybridauth/hybridauth';\n  $hybridConfig  = array(\n    \"base_url\" => $_SERVER['REQUEST_SCHEME'].\"://\".$_SERVER['HTTP_HOST'].\"/livelor/login/hybridauth/hybridauth\",\n    \"providers\" => array(\n      \"Instagram\" => array(\n        \"enabled\" => true,\n        \"keys\" => array(\n          \"id\" => \"XXXX\",\n          \"secret\" => \"XXXXX\"\n        ),\n        \"wrapper\" => array(\n          \"class\" => \"Hybrid_Providers_Instagram\",\n      \"path\" => $hybridauthLib . '/additional-providers/hybridauth-instagram/Providers/Instagram.php'\n    )\n  ),\n\"debug_mode\" => false,\n\"debug_file\" => \"hybridauth.log\"\n\n)\n    );\n  $hybridauth = new Hybrid_Auth($hybridConfig);\n\n$authProvider = $hybridauth->authenticate( $service );\n\n$user_profile = $authProvider->getUserProfile();\nif($user_profile && isset($user_profile->identifier))\n          {\n $idg = $user_profile->identifier;\n           //$access = '510338836.1677ed0.c88a2f6a9b4541ceb8ff93b344cd8f24';\n           //$data = @file_get_contents(\"https://api.instagram.com/v1/users/$idg/?access_token=$access\");\n           //$data = json_decode($data, true);\n      //echo \"Followers\".$data['data']['counts']['followed_by'];\n       //echo \"<b>Profile URL</b> :\".$user_profile->profileURL.\"<br>\";\n\n      echo $user_profile->identifier;\n\n\n      }\n\n\necho \"<h1>hi</h1>\";\n}\n\n```\n. @g4b1nagy How to solve this issue\n. Just forget about hybrid auth And go for normal working scripts.This link will help you\nwww.codexworld.com/login-with-facebook-using-php/\n. ",
    "JPustkuchen": "I'm also having the same issue. G+ works great. Facebook with https doesn't work... :(\n. We've had 3 possible problems causing this. Perhaps that will help you:\n1. The website was password protected (htpasswd) due to development / tests. We had to remove that\n2. There were language specific redirects perhaps causing the FB call to be redirected\n3. We had to enter the whole URL to the HybridAuth Path for facebook (not just the base URL of the website). For the HybridAuth Drupal module we've described it here. For other implementations the URL might be different: https://www.drupal.org/node/2684015\nFinally it's working now...\n. ",
    "g4b1nagy": "Same problem here...\n. I've managed to fix it on my end as well. The production site had been recently moved to https so I needed to update the base_url in the config file to use https as well => http://hybridauth.sourceforge.net/userguide/Configuration.html\n. +1 on having this issue. I've tried with both an old Facebook app and with a newly created one.\n. I don't know yet. I've spent a few hours trying to debug this, and the culprit seems to be the getUserFromAvailableData method here => https://github.com/hybridauth/hybridauth/blob/master/hybridauth/Hybrid/thirdparty/Facebook/base_facebook.php#L581 which returns 0 instead of a valid user id.\nThe getUserFromAccessToken method here => https://github.com/hybridauth/hybridauth/blob/master/hybridauth/Hybrid/thirdparty/Facebook/base_facebook.php#L765 also seems to be doing something wrong, because it's issuing an Open Graph request without supplying an access token.\nI will let you know if I manage to make some progress with this.\n. @githubitsme I started from scratch today i.e. new Facebook app and clean code and I'm not able to reproduce it anymore. Weird.\n. @opure Unfortunately, I have no idea what I was doing wrong. I just threw out the old code, started from scratch and then it worked...\n. ",
    "cfv1000": "In base_facebook.php do following\n```\n  public static $CURL_OPTS = array(\n    CURLOPT_CONNECTTIMEOUT => 50,\n    CURLOPT_RETURNTRANSFER => true,\n    CURLOPT_TIMEOUT        => 60,\n    CURLOPT_USERAGENT      => 'facebook-php-3.2',\n    CURLOPT_SSL_VERIFYPEER => false,\n    CURLOPT_SSL_VERIFYHOST => false,\n  );\nprotected $trustForwarded = true;\n  protected $allowSignedRequest = false;\n```\nFixed it for me.\nThanks\n. ",
    "dugwood": "You should set the parameter in the config file, and not change the base_facebook.php:\narray('enabled' => true, 'keys' => array('id' => YOUR_ID, 'secret' => YOUR_SECRET), 'scope' => 'email', 'trustForwarded' => true)\n. @kocsismate can you change, in 2.6.0, the latest return of function getCurrentUrl() in base_facebook.php with:\nvar_dump($protocol.$parts['host'].$port.$parts['path'].$query); exit;\nAnd see if the url is fine to you?\nI've faced the same issue because the getCurrentUrl() wasn't the same as the base_url.\n. @Steeveuk you should close this bug as you solved it with trustForwarded.\n. ",
    "syedbar": "@cfv1000  not working for me..\nit seems my hosting plan is having issue and my ip is having some issue.\n. ",
    "NZX-DeSiGN": "Same problem, SSL on my server. Can somebody help us ? Please\nEdit : Problem solved\n@syedbar you are going to laugh, you only need to put a trailingslash to the base_url (ex: https://yoursite.com/hybridauth_endpoint/) and verify that you authorized https://yoursite.com/hybridauth_endpoint/?hauth.done=Facebook in your Facebook app !\n. ",
    "MohannadNaj": "Maybe this comment help someone else there:\nMy issue wasn't SSL or curl, wasn't hybridauth, wasn't base_url or redirect_url, wasn't god. it was the Server IP Whitelist in facebook app advanced settings. I just had to put my public IP there after it was changed :)\n. ",
    "samantanabin02": "got exception error Authentication failed! Facebook returned an invalid user id...in hybrid auth social plugin in cakephp 2.8.6 \nGoogle plus works fine...but facebook not working...please help. Is there any proper social plugin available for cakephp 2.8.6?. Thank you...after upgrading library it works fine... ",
    "ApacheEx": "@samantanabin02 this issue is closed, so nobody will help. Pls create a new one with all needed details. this error depends on your environment (not on HA), possible reasons:\n1) session is not configured.\n2) wrong server configuration.\n3) wrong apache2/nginx configuration.\n4) extra redirection and so on.\nI'm closing this issue because do not see what to fix.. closed as there is no activity over a year. will be fixed in #856 . if anybody really needs to have this provider - feel free to fill new issue. Currently, I don't see any reasons to add it to HA.. setAccessToken is available in v3, all needed information you can find in HA documentation.. I'm going to close this as there's been no activity and as workaround: \n- just include 3rd party scripts to main script like facebook does.\np.s. I'm going to update PayPal provider.. I'm sure it's already fixed in newer versions of HA. Try to upgrade. \nI'm closing this issue because no activity for years.. closed as there is no activity over a year. @moazam1,\nnot sure if it still actual \ud83d\ude43\nbut in short, just try this:\n$hybridauth = new Hybrid_Auth($config);\n$adapter = $hybridauth->authenticate(\"Twitter\");\n$status = $adapter->setUserStatus(\"Yay, let's tweet!\");\np.s. should work since v2.8.0. @SukanyaD,\nit should be very easy, just try:\n/**\n * Implements hook_hybridauth_provider_config_alter().\n */\nfunction my_module_hybridauth_provider_config_alter(&$config, $provider_id) {\n  switch ($provider_id) {\n    case 'Google':\n      $config['approval_prompt'] = 'force';\n      break;\n  }\n}. should work in the latest version v2.9.6-dev. Pls upgrade and check an actual documentation. seems like @ethier is right. Please fill new issue if you have any problems with OpenID Connect.. Hi guys, it's fixed in v2.9.5. Please try. \nIf something doesn't work, pls create a new issue.. closed because there is no activity for 2 years.\nbtw, should work since HA v2.8.0. it's fixed in v2.9.3. Please also check the latest documentation.\nif something will not work, create a new issue or reopen existing one.. here is CodeIgniter implementation of Hybridauth, you can check there how it's implemented properly.\nOtherwise upgrade to the newest version.. pls try the latest version of HA (v2.9.5), there were so many fixes in FB. \nif something will not work, create a new issue or reopen existing one.. It seems already fixed in newer versions of HA. Try to upgrade.\nClosed issue as no activity for years.. closed as there is no activity over a year. Unfortunately, getUserContacts and getUserActivity no longer work because LinkedIn has restricted their open API access. Check the latest documentation for more info.. already done in v2.9.3. For more info check the latest documentation.. you can use apiRequest from v3, all endpoints can be found here: https://developers.google.com/youtube/v3/docs/subscriptions/insert. to get an email you have to provide scope: https://www.googleapis.com/auth/userinfo.email. just upgrade to the newest version and problem should disappear. \nFor more info: #754 . closed as no activity. Probably it's already fixed in newer versions. Please re-open if you're still getting this error.. seems it's not related to HA. Feel free to fill new issue with all details if you still have this error.. yeah, pls upgrade HA library to the latest stable v2.\nif still occurs pls re-open.. if anybody really needs to have this provider - feel free to fill new issue. Closed as no activity.. this should be fixed in newer versions of HA. If not, please fill new issue.. closed as no activity over a year. if anybody really needs to have this provider - feel free to fill new issue. Currently, I don't see any reasons to add it to HA.. if anybody really needs to have this provider - feel free to fill new issue. Currently, I don't see any reasons to add it to HA.. should work in the latest version v2.9.6-dev. Pls upgrade and check an actual documentation. since v2.8.0 default scope in HA is: \n'email', 'user_about_me', 'user_birthday', 'user_hometown', 'user_location', 'user_website', 'publish_actions', 'read_custom_friendlists'\nyou can also check more info in the latest documentation.\np. s. if something will not work, create a new issue or reopen existing one.\n. > I know it's shameful these days, but my host provider does not have Composer installed\nif you have php installed (I'm sure you have), then you can easily install composer,\njust run commands from here. Then, when the composer is downloaded, just try php composer.phar install in your HA dir. Hope it's clear.\nAnother solution is proposed by @wheelsandcogs.. It has to be fixed in v3. There is no plan to fix it in v2 but you are welcome to submit a PR.. Hi,\nno sure if I got your point, but if you do like this:\n$hybridauth = new Hybrid_Auth($config);\n$adapter = $hybridauth->authenticate(\"Google\");\n$user_profile = $adapter->getUserProfile();\nthere will be url to user photo: $user_profile->photoURL.\nSo, no additional scope needed.. I have updated docs, pls check once more.\nhttps://hybridauth.github.io/hybridauth/userguide/IDProvider_info_Google.html. - 1+ year of inactivity\n- lots of code changes since v2.7.0\n- there is already quite good v3 which has more priority for support.. closed as there is no activity over a year. @RRajnishR,\npls provide more details and verify the following:\n1) which version of HA have you used?\n2) do you use any additional frameworks?\n3) which value of base_url in your config.php\n4) please make sure that you have created Google App properly (https://console.developers.google.com/apis/credentials/oauthclient):\n\n. Hi @RRajnishR,\nPls use http://mywebsite.com/path_to_hybridauth/?hauth_done=Google as redirection URL for Google App.\n\ud83d\ude04 Just an example how it should be in your code:\n\n\nlet's imagine your path_to_hybridauth is hybridauth/endpoint, so it means in your Google App, \n\nyou should have http://mywebsite.com/hybridauth/endpoint?hauth.done=Google as Authorized redirect URIs \nand http://mywebsite.com/hybridauth/endpoint/ as base_url in your HA config\n\n\n\nonce more let's imagine you have a Google button (on USER LOGIN page) which leads to hybridauth/window/Google.\n\non that page your framework should execute:\n$hybridauth = new Hybrid_Auth($config);\n$adapter = $hybridauth->authenticate(\"Google\"); \n// IF YOU NOT AUTHORIZED, then your will be redirected to URL which is used in Google App as Authorized redirect URIs (see #4).\n// AFTER APPROVE PERMISSIONS, you will be back to this place and can finally get user profile.\n$profile = $adapter->getUserProfile();\n// HERE you can use profile data, you can save it in your DB or put in $_SESSION (up to you and your framework).\n// THEN you can redirect the user to whatever page you want.\nafter allowing permissions, the Google will redirect to http://mywebsite.com/hybridauth/endpoint?hauth.done=Google automatically, and on that page your framework should execute:\nrequire_once $PATH_TO_HA_LIBRARY . '/index.php';\n\nthat's it. Let me know results.\n. I see in URL google, but it should be Google.\nThen, make sure you use right scopes:\njust put it in your config:\n\"scope\" => \"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/plus.profile.emails.read\"\nshow me a bit more code how you get a user profile.. in your $config - base URL is wrong. You changed a lot in paths, that's also very bad. That's why it doesn't work for you.\nThis is completely a wrong idea:\n// we'll need to tell HybridAuth to use custom endpoint URLs\n$adapter    = $hybridauth->authenticate( $provider, array(\n  'login_start' => $base_url . '/start/' . strtolower( $provider ),\n  'login_done'  => $base_url . '/done/'  . strtolower( $provider ),\n) );\nwhy not use STANDARD behaviors instead of overriding everything?\nPls check once more documentation: https://hybridauth.github.io/hybridauth/userguide.html. Yes it was closed, because works well and in your case you have wrong configuration or so. You didn't provide any details (version, code, logs, etc). I'd recommend to check documentation once more.. Guys, nobody will help you on closed issue.. Hi @manifsp,\nis it still actual for you? if so, pls try the latest stable version of HA.. closed as there is no activity. closed in favour of #548. this is already fixed in v3. Currently, there is no plan to fix it in v2 but you are welcome to submit a PR.. it's fixed in #857, so now you can ON / OFF sandbox mode in your config \ud83c\udf1e \nmore documentation will be added sooon. Hi guys,\nI've added a little PR #760 with fix which works well in both cases: \n1) if you use composer (so Facebook SDK placed in vendor/)\n2) if you don't use composer (so Facebook SDK placed in thirdparty/). @9meAhmed, why not to create a new issue with all needed details and steps?. closed in favor of #961. Hi, \npls have a look on this PR (https://github.com/hybridauth/hybridauth/pull/707) which is already merged to latest stable version (2.8.2).\nI think this should fix your problem.. is it still actual? do you use the latest v3.0.0-rc.2 version of HA?. closed as no activity. Probably it's already fixed in newer versions. Please re-open if you're still getting this error.. Yeah, pls upgrade HA library to the latest stable v2. Pls also check an actual documentation.\nif still occurs pls re-open.. @xaiborweb,\nlots of requests were about CodeIgniter + HA.\nI will try to take care about that this week.\nwhich version of CodeIgniter should it support? only 3.x or 2.x as well?. @xaiborweb,\nhttps://github.com/ApacheEx/CodeIgniter-HybridAuth \ud83c\udf89 \npls have a look, it's only first version. \nWill be improved a bit later with more examples. \n. @isantolin,\nYeah, I will.. You need to run composer install in the third_party/hybridauth library, then fb will work. Or just install HA as composer dependency in thr root of CI:\ncomposer require hybridauth/hybridauth. @xaiborweb,\nI've added more readme \ud83c\udf89 ,\npls check it out https://github.com/ApacheEx/CodeIgniter-HybridAuth. closed in favor of #960 . #753 works well for me.. if anybody really needs to have this provider - feel free to fill new issue. Currently, I don't see any reasons to add it to HA.. Should be already fixed in HA 2.9.6. I'd like to help, so I've already migrated to OAuth 2.0. Check it out #803.. @tatocaster Hi,\nI've created a little PR to fix this issue.. Hi guys,\nhave the same issue. Perhaps that's because v2.2 of API was available until March 25, 2017. And if you check changelog https://developers.facebook.com/docs/apps/changelog from v2.2 to v2.3:\nyou will see the following:\n\n[Oauth Access Token] Format - The response format of https://www.facebook.com/v2.3/oauth/access_token returned when you exchange a code for an access_token now return valid JSON instead of being URL encoded. The new format of this response is {\"access_token\": {TOKEN}, \"token_type\":{TYPE}, \"expires_in\":{TIME}}. We made this update to be compliant with section 5.1 of RFC 6749.\n\nperhaps that's the reason - I'm currently trying to fix that. Will let you know results.. ok, I upgraded hybridauth to the latest version (v2.9.1) \nand then changed in FB app (make sure you have API version >= 2.3):\nFrom: http://yourdomain.com/hybridauth/?hauth.done=Facebook\nTo: http://yourdomain.com/hybridauth/?hauth_done=Facebook\nthat's it. Sharing / Login / Sign up works well for me.\np.s. if you use older version, you have to upgrade to latest one and run \"composer install\". @coscho \nIt seems that your autoloader not working properly or you don't have one at all.. @superight, pls provide the following info:\n1) version of hybridauth library\n2) version of your fb app (it's called API Version)\n3) do you use composer installation ?. @superight, \n1-2 I think here we have a problem. \nI highly recommended you to do the following steps:\n1. Go to https://developers.facebook.com/apps/YOUR_APP_ID/dashboard and make sure that you use API version at least v2.3, if no please recreate your app or use Upgrade API tool.\n2. Upgrade your hybridauth library to the latest stable version (v2.9.1 or even 2.9.2-dev)\n3. If you use Facebook Login, go to https://developers.facebook.com/apps/YOUR_APP_ID/fb-login and make sure that you use hauth_done in Valid OAuth redirect URIs (before it was hauth.done). @superight, \nYeah, fb-sdk was moved separately as composer package.\nThat's only one thing which is not fixed in the latest version. \nI've added a little PR which fix it.  Please try #760. \nAnd of course please not to forget run \"composer install\" in the root of hybridauth library. @RazaLabs,\nyou know it's hack in fb library. IMHO it's weird to change the original code of external library (because will be hard to support / upgrade). \nThat's why I purpose to use just the latest version of the library which should work (even if you use SSL proxy or any other stuff).. @vinothrajm,\nHi, can you provide more info:\n1. which version of hybridauth library you have installed (2.x or 3.x) ?\n2. do you use composer installation?\n3. Which version of Facebook API have you? (check here https://developers.facebook.com/apps/YOUR_APP_ID/dashboard/)\n4. Make sure you have correct Facebook id and secret in config.php. @vinothrajm,\nthanks for info, I see possible cases:\n1. in your site configuration App ID is not the same as App ID on Facebook\n2. make sure you have installed https://github.com/facebook/php-graph-sdk (5.4)\n3. somehow your HA config is not passed properly (maybe there is some custom code which brakes HA config).\nhave you used some CMS(F) or frameworks?. @vinothrajm,\nYeah, that's the reason. So in your config please use app ID in quotes. @follower90, \nI think you see the problem, it's even not related to hybridauth library. To fix it on your server change date.timezone in your php.ini or use somewhere date_default_timezone_set. @Kirancloudnix,\nif you check composer.json - there is dependency: \"facebook/graph-sdk\": \"^5.4\". So it's already the latest version.\nabout PR:\n1. If you clone hybridauth repository and then run \"composer install\":\n    - you will see \"vendor\" directory in the root of this library which has facebook/graph-sdk and autoload.php (generated by composer)\n    - so, this PR checks if there is \"/vendor/autload.php\" file and if so require it.\n    - if somehow \"vendor\" directory was moved to another one, then you can provide a custom path in config.php (path_vendor) \n2. If you have hybridauth library without composer installation:\n    - Facebook SDK should be placed in /hybridauth/Hybrid/thirdparty/Facebook\n    - so, this PR checks if there is \"/hybridauth/Hybrid/thirdparty/Facebook/autload.php\" file and if so require it.\nthat's it. Hopefully it's quite understandable.. @dereuromark,\nit seems you should change path_vendor in hybridauth/config.php (in your case it's /config/hybridauth.php). \nMake sure it leads to your vendor/autoload.php, then it should work. \nBy default, it leads to hybridauth/vendor/autoload.php, but in your case, vendor directory placed on the same level as hybridauth lib.\np.s it's not broken release, it's just wrong configuration.. @sunaryohadi, @dereuromark I have created a PR with fixes for autoload.php. Now, it should work for all cases. Please check it out #776 \np.s you don't need to add any config (like path_vendor). > Google requires all should be encoded only in standard state param\n@hellboy81, can you tell me a proof where this info can be found? I have google login in the production site (HA version is v2.9.5), and so far it works well.\np.s this is duplication of #648. still actual?. The fix is available in v3.0.0-rc4.\nIf you want to have it in v2 - feel free to create PR.. Hi, \nit seems the issue not in hybridauth library (I have just checked and it works well so far). Perhaps, redirect path is wrong.\n@ddsky,\ndo you use some CMS(F) or additional frameworks?. @ddsky, \nto which version exactly you have downgraded?. @ddsky,\ndo you have redirect_uri in your HA config?. @Kirancloudnix,\nHello, this PR should fix your problem #760. \nThere are some similar issues #754 and #698 - check it out.. @dereuromark,\nAs I see you have installed that library via composer, it seems you should change path_vendor in your hybridauth/config.php. Make sure it leads to your vendor/autoload.php. For more details check #760. Hello, pls check commens from #760.\nIf you install library via composer, then vendor directory will be on the same level as hybridauth library, so you have to change path_vedor in hybridauth/config.php. @StorytellerCZ, \nyeah, I will add, but a bit later.. @StorytellerCZ,\nHi, I've also added some Installation guide based on those changes - #777, please check it out. . Hi,\ntell us some more info:\n1. Do you use some specific methods or just facebook login? \n2. Which version of Facebook API have you used?\n3. Which version of drupal module have you installed?. does it mean that your local machine is not configured properly? - it's hack in graph sdk which is totally not good.. yeah, got your point. Check the issues below:\nhttps://github.com/facebook/php-graph-sdk/issues/708\nhttps://github.com/facebook/php-graph-sdk/issues/547\nso, I purpose the following solution:\n1. you create own curl client which extends FacebookCurlHttpClient (for more info check it out)\n2. then, I add a PR which provides an additional option for Facebook provider http_client_handler\n3. then, you use hook_hybridauth_provider_config_alter and add something like this\nfunction my_module_hybridauth_provider_config_alter(&$config, $provider_id) {\n  switch ($provider_id) {\n    case 'Facebook':\n      $config['http_client_handler'] = new CustomCurlOptsHttpClient();\n      break;\n  }\n}\n4. Proofit.\nwhat do you think? any other ideas?. First of all, I see Vendor, should be vendor. You can read installation guide here. \n776, this PR should fix your problem, so path_vedor is unnecessary.\nright now all fixes in v2.9.3-dev. I guess here (v3.x). Hi,\nfirst of all, try this:\n1. open https://developers.facebook.com/apps/YOUR_APP_ID/fb-login/\n2. in Valid OAuth redirect URIs put http://dev3.wirednest.net/crossoverconceptstore/hauth/endpoint?hauth_done=Facebook (so, it's without index.php)\n3. make sure it's enabled: https://www.dropbox.com/s/m5ll87qude3rtx6/Screenshot%202017-04-19%2021.18.51.png?dl=0\nif it still fails, please answer:\n1. do you use any CMS(F) or frameworks?\n2. which version of HA library have you installed?\n3. do you use composer version?\n3. which version of Facebook API have you used?\n. Hi,\n\nwhy is it like hybridauth/hybridauth/hybridauth it should be hybridauth/hybridauth/\n\nit's ok if you use composer install hybridauth/hybridauth\n\nbut I get the following error:\n\" failed to open stream: No such file or directory in /myProjectURI/vendor/hybridauth/hybridauth/hybridauth/Hybrid/Providers/Facebook.php:61\n\nit's already fixed in v2.9.3-dev by this PR #776.. First of all, please read documentation.\nit should be like this:\n$hybridauth = new Hybrid_Auth($config);\n $adapter = $hybridauth->authenticate(\"Facebook\");\n $user_profile = $adapter->getUserProfile();\np.s. http://a.memegen.com/jy0j99.gif. Hi,\nBasically, each provider adapter has to define at least 3 methods which are public:\n *   Hybrid_Providers_{provider_name}::initialize()\n *   Hybrid_Providers_{provider_name}::loginBegin()\n *   Hybrid_Providers_{provider_name}::loginFinish()\nso, there is no exception. But, IDE (e.g PhpStorm) thinks that $hauth->adapter is Hybrid_Provider_Model which has protected access (loginFinish() and loginBegin()).\nI think you are right and they should be public. Here is PR #784\n. @engharb, it's merged to v2 branch, can you check?. moved to #786. @StorytellerCZ,\ncurrently, we have only phpcs testing in Travis CI. \nAs solution, we can skip composer install for php 5.3, what do you think?\np.s I have added minimal requirements for Facebook provider.. can you check if it works for you with changes from this PR #788?\np.s. documentation fixes coming soon.. some issues were fixed and documentation was updated. Check once more #788.. Hi,\nit's already fixed a long time ago. Please upgrade your hybridauth library to the version v2.9.x.. Hi, it's not a bug, it's feature. You can just change includeEmail to true in your config.php\nas you can see in hybridauth/config.php (there is already param includeEmail which is false by default, so please change). Hi,\nfirst of all, why you don't use issue template? it's much easier to answer and help you when more info provided.\nso, please update your description according to the template: https://github.com/hybridauth/hybridauth/blob/master/ISSUE_TEMPLATE.md\nThanks!. thank you for more info,\nyou have one domain, so it should be one app. I'd say yes, it's possible. Just go to https://developers.facebook.com/apps/YOUR_APP/fb-login/ and provide two urls in Valid OAuth redirect URIs section, hope it will help.\nBut the questions is why do you use two urls which do the same action (login by facebook)?. please check once more (HA config) if App Secret and App ID are correct and belong to your FB App. if it still fails, please make sure that Require App Secret is disabled. You can go here and check\nhttps://developers.facebook.com/apps/YOUR_APP_ID/settings/advanced/. seems fixed and no other questions appear, I'm close this issue. it's already fixed in v2.9.3-dev. Please try.. there is branch v2 which has 2.x version of HA library. Please check it out.. I agree with you, it looks like a bug. As workaround for your version, you can simply add wrapper in your config.php (more info here)\n\"Strava\" => array(\n    \"enabled\" => true,\n    \"wrapper\" => array(\n        \"path\" => \"Providers/strava.php\", \n        \"class\" => \"Hybrid_Providers_Strava\",\n    ),\n    ....\n)\nwill you add PR with the fix or should I?. Hi,\nbasically, in v2 of HA library: LinkedIn based on OAuth1 protocol (Provider_Model_OAuth1) which requires key and secret. In this PR (#749) it's going to use OAuth2 protocol (Provider_Model_OAuth2) which requires id and secret. \nSo, nothing to do here and hope it's clear for you.. now, I totally agree with @XStreamke. We don't need to have both options for consumer ids (id, key). \nSome reasons:\n1. It's a bit confusing a user which one should be used.\n2. It's always a breaking change when you migrate provider from Oauth1 to Oauth2.\n3. and so on and so on.\nMy proposition:\n1. Use always Key and Secret (like in v3).\n2. Add a backward capability for id but show a warning in that case.\n3. Remove the backward capability (let's say in 2.9.9 or 2.10).\n@StorytellerCZ, @XStreamke what do you think, any other ideas? if agree I will start working on it.. yeah, it's always a question for me, should we improve v2 or force users to use v3. \nI like v3, but need to finish upgrade guide and changelog, then other modules and users can use it or upgrade.\nso, probably we need to close this issue (just in favor of v3).. How did you install HA library?. Thanks for more info. Have you seen this https://github.com/andacata/HybridIgniter ? Perhaps it will help\np.s do not forget to run composer install in HA library \ud83d\udc4c. > In https://hybridauth.github.io/hybridauth/userguide/Configuration.html page shows old versions and old class name is Hybrid_Auth\nnope, it shows 2-x.x which looks quite actual, and I can say nothing changed in configuration between v2.1.2 and v2.9.3. \nPlease be aware, in master branch there is v3 of HA library. \nSo, you should check v2 branch.. @omurkaangokyar\nwow, this is 3.x version of HA library. Sorry, somehow release was created not properly \u00af_(\u30c4)_/\u00af. Please download from here: https://github.com/hybridauth/hybridauth/archive/v2.zip it's v2.9.3\n@StorytellerCZ, can you recreate release from branch v2. Because https://github.com/hybridauth/hybridauth/tree/v2.9.3 has 3.x version \ud83d\ude2e . yeah, I already mentioned that here: https://github.com/hybridauth/hybridauth/issues/800#issuecomment-298318978. Hi,\nyeah you are right, here is PR #807 \ud83c\udf1e . > If user login with google provider, he cant login with twitter provider at the same ip address!\nI think it's not related to this library and should be done by you. Anyways, do you use any CMS / frameworks?. v3 supports custom http client and you can do what you want. For v2 we won't do anything here.\n. Your config is wrong. Vimeo works only from v2.9.5 of HA library, please upgrade. There is worked example here https://hybridauth.github.io/hybridauth/userguide/IDProvider_info_Vimeo.html. Do you use FB only for login? To which URL it redirects? Do you use any frameworks? Or CMS?. Which URL you use in Oauth redirect URI? Check in Facebook login. Please check documentation once more https://hybridauth.github.io/hybridauth/userguide/IDProvider_info_Facebook.html\nI also recommended you to upgrade library to v2.9.5\nAnd it looks like your URL is incorrect (it should be hauth_start). Did you run composer install? \nBtw, please  check this https://github.com/ADmad/CakePHP-HybridAuth. Hopefully it will help you.. closed as no activity. Probably it's already fixed in newer versions. Please re-open if you're still getting this error.. of course, you won't be logged-out in twitter after logging out in HA. Because the session with Twitter is defined by a cookie owned by Twitter - you can't control it. So, it's not related to library.\n\nbut the problem is that when I ask to redirect to the twitter login it assumes that I still loged in or it reads from the session.\n\nit reads from the Twitter cookies, not HA session. As solution, you can set force_login to true in your HA config. It will force the user to enter their credentials to ensure the correct user's account is authorized.. it's UI tests, of course, you can write them, I don't see any problems or related question to HA.\n\nprocess, where I can insert my test social account credential and get a response....\n\nin UI tests you can use DOM, so just put your test credentials in specific HTML elements (e.g FB has input#email, input#pass). \nThen, you should submit a form where you wrote credentials (e.g FB has form#login_form). \nFinally, you should check a page after redirect if it's success or no. \nSo, once more In UI tests, you should work only with UI stuff and HTTP responses.. here is a PR #840 which created by @sjerdo.. @umnic,\nMerged to v3 \ud83c\udf89 . \nPlease let us know if it works well for you \ud83d\udc40 . Hi, just check documentation, there is getUserProfile() which should return you all needed information.\nFacebook: https://hybridauth.github.io/hybridauth/userguide/IDProvider_info_Facebook.html. please reformat your issue with https://github.com/hybridauth/hybridauth/blob/master/ISSUE_TEMPLATE.md. @yogeshjalodara, please upgrade HA to v2.9.5 there are many improvements and bug fixes . @iatpatelishan, nope - it's a hack. The solution is to upgrade HA library to the latest stable version (v2.9.5). I guess yes. I know that in UI https://apps.twitter.com/app/APP_ID/settings you can provide only one path but I think it doesn't matter which path there. It will work in any way. So, just try to use the same credentials for different domains.. Hi,\nthis option doesn't make sense for the current implementation in HA because it will be always a page\nhere is a proof, from FB docs:\n\nIf you are using the URL redirect dialog implementation, then this will be a full page display, shown within Facebook.com. This display type is called page.\n\nthis option will work only when you use Facebook SDK for JavaScript \u00af_(\u30c4)/\u00af\nso, perhaps we should remove that option at all from code and docs.. I have removed display option from docs.. it sounds like \"just do it!\" for me, but what exactly to do? There are no details at all, or any steps how to reproduce it. \u00af_(\u30c4)/\u00af\npls use this template and re-write your issue: https://github.com/hybridauth/hybridauth/blob/master/ISSUE_TEMPLATE.md. thanks for more details, now it's better to understand.\ncan you try to upgrade your library to v2.9.5? there is new LinkedIn implementation which works via OAuth 2, and many many fixes in HA.. please also make sure, that for LinkedIn in case of HA v2.9.5 you should use in your config: \n\"keys\" => array(\"id\" => \"\", \"secret\" => \"\")\ninstead of \n\"keys\" => array(\"key\" => \"\", \"secret\" => \"\"). \ncan you tell me what you use here?\nhttps://www.linkedin.com/developer/apps/APP_ID/auth. that's the main problem - it should be:\nhttps://my.hello44.com/hauth/callback?hauth.done=LinkedIn\nplease read documentation once more, and make sure that redirect URL is correct for other providers.. I'm confusing but /hauth/endpoint leads to 404, so you use wrong link, pls put this in Authorized Redirect URLs :\nhttps://my.hello44.com/hauth/endpoint?hauth.done=LinkedIn. can you show me some code how you get the user profile after authorization?. as I understand you use this?\nhttps://github.com/andacata/HybridIgniter\nperhaps the issue is related to that lib. But, anyways can you debug that  catch(Exception $e), \njust log $e->getMessage(). any updates? . @9meAhmed, have you solved this issue? is it still actual?. How can we replicate this issue? which config you use (scope and so on)?. As I see, all providers are enabled but there are no information about consumer id/key or secret, make sure that for LinkedIn you use id and secret, for more info check documentation. 1) ok, your config looks like this, right?\n$config = array(\n  \"base_url\" => \"http://mywebsite.com/path/to/hybridauth\",\n  \"providers\" => array(\n    \"LinkedIn\"  => array(\n      \"enabled\" => true,\n      \"keys\"    => array(\"id\" => \"YOUR_CLIENT_ID\", \"secret\" => \"YOUR_CLIENT_SECRET\"),\n      \"scope\"   => array(\"r_basicprofile\", \"r_emailaddress\"),\n    ),\n  ),\n);\n2) and here https://www.linkedin.com/developer/apps/YOUR_APP_ID/auth you have checked these scopes?\n\n3) and here https://www.linkedin.com/developer/apps/YOUR_APP_ID/auth you have something like this?\n\npls verify all 3 steps.\n. @omurkaangokyar,\nwhich redirect uri have you exactly setup?. pls add to your config and try once more:\n\"scope\" => \"default user:username user:email\"\nif it still fails, try in an anonymous window. If doesn't work, pls give me which exactly error you get.. it seems you use something like this: HybridIgniter\ncan you enable logs in your config and give me more details from here /logs/hybridauth.log?. thank you \ud83d\udc4d . once more, thank you!. Once more, thank you!. from my side, it looks good, but it's a third-party library which is accessible here. \nSo, probably those changes should be added there and then used as composer package in HA.\n@miled, what do you think?. It's quite a small fix, so I prefer to merge it to v3.\nIf 3rd-party library somehow will alive again,\nwe will take care about it\n@StorytellerCZ, any against?. I'm going to merge this based on https://hybridauth.github.io/license.html. Thank you for your effort. \nThis will be released in beta4 soon.. Makes sense.\nI will add an option photo_size, so it will be like width={$photo_size}&height={$photo_size}. Hope, it's good for you.. @GusAntoniassi, \nok, it should work. The changes in v2 branch (v2.9.6-dev). To use, just add this to your config:\n\"photo_size\" => 200,\nlet me know if it works.\nHere is updated docs: https://hybridauth.github.io/hybridauth/userguide/IDProvider_info_Facebook.html. thank you \ud83d\udc4d . You need to have something like this:\n\nTo do this, pls provide the following settings here (https://apps.twitter.com/app/YOUR_APP_ID/settings):\n\nMake sure you have enabled Request email addresses from users here (https://apps.twitter.com/app/YOUR_APP_ID/permissions):\n\np.s. Privacy Policy URL and Terms of Service URL are required.\np.s.s if works pls close the task. any samples of code? what you debug? have you read this ?\nwhich version of HA have you used?. I'm going to close this as there's been no activity and I was not able to reproduce.. Hi, \nit seems Drupal module is not well adapted to login with Windows Live, but you can try this workaround:\n\nLet's create a hook_menu (e.g. in my_module):\n```php\n/**\nImplements hook_menu().\n */\nfunction my_module_menu() {\n  $items['hybridauth/live'] = array(\n    'page callback' => 'my_module_hybridauth_live_endpoint',\n    'access arguments' => array('use hybridauth'),\n    'type' => MENU_CALLBACK,\n  );\n  return $items;\n}\n```\nThen create this page callback:\n```php\n/**\nHandle Windows Live auth.\n */\nfunction my_module_hybridauth_live_endpoint() {\n  module_load_include('pages.inc', 'hybridauth');\n  $_REQUEST['hauth_done'] = 'Live';\n  hybridauth_endpoint();\n}\n```\nSet redirection URI as https://mydomain/hybridauth/live\nProooofit\n\np.s. I will take care to have this in contrib module.\np.s.s pls close the task if works.. and it seems you also need to implement one more hook:\nphp\n/**\n * Implements hook_hybridauth_provider_config_alter().\n */\nfunction my_module_hybridauth_provider_config_alter(&$config, $provider_id) {\n  switch ($provider_id) {\n    case 'Live':\n      $config['hauth_return_to'] = url('hybridauth/live', array(\n        'absolute' => TRUE, \n        'language' => _hybridauth_language_default(),\n      ));\n      break;\n  }\n}. Hi,\n1. I think you just need to change your permissions in twitter app (https://apps.twitter.com/app/APP_ID/permissions) like this\n\n\nAnd make sure that you have filled Privacy Policy URL and Terms of Service URL and Allow this application to be used to Sign in with Twitter (https://apps.twitter.com/app/APP_ID/settings) like this:\n\n\np.s. pls close the task if works.\n. The Profile is quite common class. It seems we need to add data into this class which will be extra.\nthen you can do something like:\nphp\n$userProfile->data['follower_count'] = ...;\n$userProfile->data['following_count'] = ...;\nI will take care of this.. Closed in favor of #897. Hi,\nI've tried to login on your site, and what I got from facebook login screen (url):\n1) sdk=php-sdk-3.2.3\n    - it seems you have very old version of php-graph-sdk. You have to upgrade it to at least 5.5.0 - I'm sure there were a loooooot of fixes.\n    - do you use composer ? if so, you can run composer install in hybridauth library and php-graph-sdk will be updated automatically \ud83d\ude04 .\n2) redirect_uri=http://www.verjobs.com/auth/?hauth.done=Facebook:\n    - please use http://www.verjobs.com/auth/?hauth_done=Facebook\n    - make sure it exists in https://developers.facebook.com/apps/1612692002357929/fb-login/ as Valid OAuth redirect URIs\np.s. do you use any frameworks?. > i will change it to http://www.verjobs.com/auth/?hauth_done=Facebook\nThat's what I meant. For Facebook hauth_done is more correct than hauth.done\n\nDo i need to upgrade hybridauth as well.\n\nUP: ~~it seems you already on version 2.7 (latest stable)~~\nYou have to upgrade\nbtw, there is workaround how to use facebook login without composer:\n\nYou need to download https://github.com/facebook/php-graph-sdk and put src/Faceboook directory under /Hybrid/thirdparty/ directory.\nMake sure that /Hybrid/thirdparty/Facebook/autoload.php exists.\n\nSo, Hybridauth will include this file and start using the classes that library provides.. oh, sorry. The latest stable version of hybridauth is 2.9.6, pls upgrade and I think your issue will be disappeared. There are a lot of fixes for facebook.. from your config:\nyou use at the same time ID and KEY - it's completely wrong.\nPlease check documentation once more. There is a working example. https://hybridauth.github.io/hybridauth/userguide/IDProvider_info_Google.html\n\nIt should be hauth.done=Google\ntrustForwarded should not be used.\nid and secret should be used in keys section. I couldn't reproduce this issue with HA 2.10. \nSo, it seems your config is wrong.. @cssjockey,\n\nPlease make sure that Authorized redirect URIs will equal https://cssjockey.com/wp-content/plugins/addon-social-login/lib/hybridauth/?hauth.done=Google in your Google App. \nIs that true?. hmm, then let's once more check configuration.\nwhich exactly config you use for Google ? (pls change app id / secret).. see more info here #875. This feature won't be developed in v2. If it's really needed feature please create an appreciate issue for v3.. makes sense, thank you!. yeah, it seems PayPal doesn't work because OAuth2 api looks quite different as current implementation. I will take care about it as soon as possible.. Hi @rnagulapalle,\nhere is a PR https://github.com/hybridauth/hybridauth/pull/857, sorry for a lot of changes, but in short I tried to make it more accurate. Pls check if it works, then will merge and release changes.. the code was merged \ud83d\udc4d \nthe documentation was added \ud83d\udc4d . ah, it's just an example of HA config, if you have already used HA you should know where client id and client secret can be specified \ud83d\udc4c. I see you use drupal, how you install paypal php sdk?. Pls download this https://github.com/paypal/PayPal-PHP-SDK/releases/download/1.12.0/PayPal-PHP-SDK-1.12.0.zip and unzip to hybridauth/hybridauth/Hybrid/thirdparty/Paypal, so after unzipping+renaming to Paypal (not PayPal), hybridauth/hybridauth/Hybrid/thirdparty/Paypal/autoload.php should exist. For drupal you don't need to touch any files in libraries/hybridauth folder. If you want to change a config (e.g scope), just implement smth like this:\nphp\n/**\n * Implements hook_hybridauth_provider_config_alter().\n */\nfunction my_module_hybridauth_provider_config_alter(&$config, $provider_id) {\n  switch ($provider_id) {\n    case 'Paypal':\n      $config['scope'] = array('profile', 'openid', 'email');\n      break;\n  }\n}\nbtw, I will mege these changes to v2 tomorrow morning\n. Have you use drupal hybridauth module as well?. Getting user profile is already implement there and my example doesn't make sense for drupal case. \ud83d\ude0e it should work as expected. So you have disabled sandbox mode, right? Is there any errors in db logs (watchdog)?. And which version of php have your server? I will check more tomorrow (especially paypal+drupal integration). @rnagulapalle, \nIt looks like you have fixed issue with blocking api.paypal.com, is it working now?. I'll try to add proper documentation in next PR till Monday - so, this one can be merged.. Hi, \nHave you seen documentation  ? Please check once more. Your redirection URL should lead to live.php which placed in hybridauth/hybridauth/live.php or to your custom endpoint where you have something like this:\nphp\n$_REQUEST['hauth_done'] = 'Live';\nrequire_once(\"Hybrid/Auth.php\");\nrequire_once(\"Hybrid/Endpoint.php\");\nHybrid_Endpoint::process();\ncan you provide more code how do you do login?. fixed in https://github.com/hybridauth/hybridauth/commit/11a38b27abdaf7572c7a8388fa7b9390f811a9f0. Hi @StephenAtty,\nYahoo openid_identifier should be https://open.login.yahooapis.com/openid20/www.yahoo.com/xrds.\nlet us know if it works for you.. still actual?. looks good, thanks!. @Braunson,\nYour server's network or firewall is likely misconfigured. Try to disable your IPV6 interface if you don't have IPV6 connectivity. \nIt's not related to HA.. @matdave,\nyes, it is. And as you probably know scope is configurable \ud83d\udc4d .\nYou can simply specify scope in your HA config like it is in documentation:\nhttps://hybridauth.github.io/hybridauth/userguide/IDProvider_info_Google.html\np.s if it's clear for you, pls close a task.. for HA: default behavior is not to change scope when you call getUserProfile(). All other methods may require scope changes in your config.. Hi,\n\nit takes me to the same url which i did not provide.\n1) and which URL it takes? can you provide an example.\n2) can you tell me which URL you provide as base_url?\n2) do you use any frameworks / CMS ?\n. seems you have implemented HA integration in wrong way. \nCheck once more documentation or even better try to use HA v3. . Have you read documentation \ud83d\ude00? Here is also an example how it can be:\nhttps://hybridauth.github.io/introduction.html\n\nIn short you have to provide keys in your $config, especially for Twitter you need to create an app and use his credentials (key and secret). > Auth is fine, I get the tokens and profile.\nhmm, I didn't see this...\nI see the problem in your example, you try to auth via Twitter first time like this:\nphp\n$hybridauth = new Hybridauth\\Hybridauth( $config );\n$adapter = $hybridauth->authenticate( 'Twitter' );\n$tokens = $adapter->getAccessToken();\nit's fine, but then you use a bit different way to auth like this:\nphp\n$adapter = new Hybridauth\\Provider\\Twitter($config);\n$adapter->setAccessToken($tokens);\nyou see? \nHybridauth\\Hybridauth - it expects a configuration array containing the list of providers you want to use.\nHybridauth\\Provider\\Twitter - it expects a configuration array containing a provider credentials.\nfor second case config should be like this:\nphp\n$config = [\n    'callback' => \"***/login.php\",\n    'keys'    => [ 'key' => '***', 'secret' => '***' ],\n    'includeEmail' => true,\n];\nor you can do something like this:\n```php\n$hybridauth = new Hybridauth\\Hybridauth( $config );\n$adapter = $hybridauth->authenticate( 'Twitter' );\n$tokens = $adapter->getAccessToken();\n$userProfile = $adapter->getUserProfile();\n$adapter->disconnect();\nprint_r( $tokens );\nprint_r( $userProfile );\n$adapter = $hybridauth->getAdapter('Twitter');\n$adapter->setAccessToken($tokens);\n$adapter->authenticate();\n$userProfile = $adapter->getUserProfile();\n```. still actual? it seems you need to be redirected to twitter (it's requirement of twitter)\nbut I can't understand for what you need this? Hybridauth has own storage for tokens. And it can be overridden. You can create own Storage (like existing one Session)  and use it like this:\nphp\nclass DbStorage implements StorageInterface {\n  // .... YOUR OWN IMPLEMENTATION HERE.\n}\n$dbStorage = new DbStorage();\n$hybridauth = new Hybridauth\\Hybridauth( $config, null, $dbStorage );\n$adapter = $hybridauth->authenticate( 'Twitter' );\n$userProfile = $adapter->getUserProfile();\nthat's it, all your tokens will be saved in db.. does it still actual?. Check this example: https://github.com/hybridauth/hybridauth/tree/master/examples/example_06\nit should cover all your question. . so, your base_url is something like http://localhost/hybridauth-git/hybridauth/?\nit should lead to page where this code executes (btw, there is already hybridauth/index.php):\n```\nrequire_once( \"Hybrid/Auth.php\" );\nrequire_once( \"Hybrid/Endpoint.php\" );\nHybrid_Endpoint::process();\n``\n. the latest version of HA (v3) is placed inmasterbranch. Please check the [README](https://github.com/hybridauth/hybridauth) to find out how to install / set up / etc. There is all information which requested by you.. @jocelynj \nthere is no guideline how to add documentation, but you can try to find how it's done with other providers ingh-pages` branch.. @johndodev \nI have the feeling that 3.0 is already quite stable. If there will be bug reports or feature requests, it's not a problem to do something there. Don't forget that we are in Open Source and PRs are welcome.. Some thoughts about release plan:\n1) until the end of the year - fixes.\n2) beginning of the next year, during January - stable release 3.0.0 and deprecation warning about 2.x. Hi @dedanirungu, \nyeah it was a plan to release in January. \nUnfortunately, so far we can't contact @miled. There are some resources like documentation site https://hybridauth.github.io where I do not have access. It's not a good idea to release without proper (latest) documentation.. Hi @gopi-ar, \nAs soon as I contact with @miled, we will make a release \ud83d\ude4f. \nHopefully, this month. Still a little bit to wait.. pls reformat your \"very informative\" issue based on Issue Template.. which version of hybridauth are you using (v2 or v3) ?. yeah, I'd recommend to upgrade to v3 which is more flexible.\nIn short: it's possible, here is a few things good to know:\n1) Default storage is Session which implements StorageInterface. Pls check the code to know how it's done.\n2) You can implement a DataBase storage (based on Session storage).\n3) Then on your app use smth like this:\nhere is your DbStorage.\nphp\nclass DbStorage implements StorageInterface {\n  // here is your implementation of (inserting, deleting, merging) data in database.\n}\nhere is your init:\nphp\n$dbStorage = new DbStorage();\n$hybridauth = new Hybridauth\\Hybridauth($config, null, $dbStorage);. I've described how to work without Session.\nplease reopen if something is not clear.. > Looks Like Line 95 of Google.php Overwrites the passed params.\nit seems you are wrong.\nOnce more checked the code, everything seems fine. This is how you can override authorize params:\n$config = [\n    'callback' => Hybridauth\\HttpClient\\Util::getCurrentUrl(),\n    'keys'     => [ 'id' => '', 'secret' => '' ],\n    // google's custom auth url params\n    'authorize_url_parameters' => [\n        'approval_prompt' => 'force', // to pass only when you need to acquire a new refresh token.\n        'access_type'     => ..,      // is set to 'offline' by default\n        'hd'              => ..,\n        'state'           => ..,\n    ]\n]\n  . yeah, it's not. And won't be in v2. If it's really needed, then can be added to v3. \nEach social network has own API for logout. For example Facebook workaround:\nphp\nclass Hybrid_Providers_Facebook extends Hybrid_Provider_Model {\n...\n    public function getLogoutUrl() {\n        $params = [\n             'next' => 'https://path_to_your_page_after_logout',\n             'access_token' => $this->token('access_token'),\n        ];\n        return 'https://www.facebook.com/logout.php?' . http_build_query($params, null, '&');\n    }\n...\n}\nthen in your html:\nhtml\n<a href=\"<?php print $facebook->getLogoutUrl(); ?>\">Log Out</a>\n. Which version of HA you use? is it still actual?. closed as no activity.. Yeah, looks like a bug which relates to OAuth1. \nI'd like to have \"refreshing\" this information in apiRequest instead of setAccessToken like OAuth2 does.\n```php\npublic function apiRequest($url, $method = 'GET', $parameters = [], $headers = [])\n{\n    if (strrpos($url, 'http://') !== 0 && strrpos($url, 'https://') !== 0) {\n        $url = $this->apiBaseUrl . $url;\n    }\nif ($this->getStoredData('request_token')) {\n    $this->consumerToken = new OAuthConsumer(\n        $this->getStoredData('request_token'),\n        $this->getStoredData('request_token_secret')\n    );\n}\n\nif ($this->getStoredData('access_token')) {\n    $this->consumerToken = new OAuthConsumer(\n        $this->getStoredData('access_token'),\n        $this->getStoredData('access_token_secret')\n    );\n}\n....\n\n}\n```\nwhat do you think?. I've checked once more, and you were right. It's better to do in setAccessToken.\np.s. you can re-open issue if something does not work as described.\n. you want to merge v2 to master, whaaat?. yes, it's true. Will try to add setUserStatus soon.. I think today in beta.3 \ud83d\ude04. don't forget to use new scope for posting 'w_share' to your LinkedIn config like this:\n$config = array(\n    ...\n    'scope' => 'r_basicprofile r_emailaddress w_share',\n    ...\n);\nhere is working example:\nhttps://github.com/hybridauth/hybridauth/blob/master/docs/developer-ref-user-status.md. please provide an example of your linkedin configuration and how to do the call.. I don't see your config. I'm wonder why you use setAccessToken?\nhere is working example: https://github.com/hybridauth/hybridauth/blob/master/docs/developer-ref-user-status.md. Hi,\n- about LinkedIn - will be fixed in #884\n- about Twitter - yeah, I see a problem, will be fixed soon (in beta.3).\n\nabout Facebook -  As usual, Facebook has changed something. You can read more info here:\nhttps://developers.facebook.com/docs/graph-api/reference/v2.11/page/feed.\nIn short: \n\n\nFor versions 2.10 and lower, picture, name, thumbnail, and description are deprecated. caption is deprecated for all versions.\n\nCan you try thumbnail param?. Yeah, it seems so. Something like this:\nphp\n$adapter->setUserStatus([\n  'link' => 'Link to page',\n  'message' => 'Your message',\n  'thumbnail' => 'Path to image',\n]);. I have released v3.0.0-beta.3 which includes all this fixes. Let me know if it works for you.. pls provide an example how you do the call.. this scope is related to LinkedIn. Why you use setAccessToken? do you have any authenticate calls?\nhere is working example: https://github.com/hybridauth/hybridauth/blob/master/docs/developer-ref-user-status.md. All needed information you can find here:\nhttps://github.com/hybridauth/hybridauth/blob/master/docs/developer-ref-user-status.md\nfor offline usage, you need to use setAccessToken instead of authenticate.. I will check.\nWhich version of HA you use?. Fixed, will be available in v3.0.0-beta.4 soon.\nif there will be any questions - just ask.. here it is:\nphp\n$twitter->setUserStatus([\n  'status' => 'Hello World! https://hybridauth.github.io/',\n]);\nSo, this code will add post with text \"Hello World!\" and link https://hybridauth.github.io/. What you are looking for is called Twitter Card - for more info read:\n\nhttps://developer.twitter.com/en/docs/tweets/optimize-with-cards/overview/abouts-cards\nhttps://developer.twitter.com/en/docs/tweets/optimize-with-cards/overview/summary\nhttps://developer.twitter.com/en/docs/tweets/optimize-with-cards/guides/getting-started\n\nit means, HA should not take care about this.. Yeah, there is no API. But, it's possible to implement if a link which is going to be posted is from YOUR site:\n1) First of all, post a message with link or just link via setUserStatus.\n2) Make sure you have added these meta tags to the associated page:\nhtml\n<meta name=\"twitter:card\" content=\"summary\" />\n<meta name=\"twitter:site\" content=\"@YOUR_TWITTER_ACCOUNT\" />\n<meta name=\"twitter:title\" content=\"YOUR ARTICLE TITLE\" />\n<meta name=\"twitter:description\" content=\"YOUR ARTICLE SHORT DESCRIPTION\" />\n<meta name=\"twitter:image\" content=\"YOUR ARTICLE IMAGE\" /> . Fixed, will be released with beta4 soon,\nOnce more thank you!. hm, Travis CI failed - but it's not related.. Fixed, will be released with beta4 soon, \nThank you!. 1) which version of HA do you use?\n2) is this error returned for all social providers?. can you show how you do login? would be nice to see any code examples.\np.s. it seems hosting issue. If it works somewhere else then you most probably need to check your hosting settings.. Here is example how to organize multiple providers login. Perhaps it would be helpful.\nhttps://github.com/hybridauth/hybridauth/tree/master/examples/example_06. just to be sure, am I right you have:\n\nhttp://site.com.br/controller/social_login.php?login=facebook as Valid OAuth redirect URIs for Facebook.\nhttp://site.com.br/controller/social_login.php?login=linkedin as Authorized Redirect URLs for LinkedIn.\netc... @sNniffer,\nI can't reproduce this issue, would you mind to create a test repository with your code or so? Is it still actual?. I still think it's a server/hosting related issue and Hybrydauth can't do anything here. I'm going to close the issue. Otherwise, you need to provide a full example of your code where it reproducible.. Thank you, looks good!. @asheeshn \nwhich exactly version of HA you use?\n\nperhaps it's the same problem as mentioned here #880\nI will check today later. good, will fix.. done, now it should work for both (OAuth1 and OAuth2).\nthanks for reporting.\nwill be available in beta5. Makes sense, thank you. Will be available in beta5. The newest Facebook API doesn't allow you to specify description or so. Here is proof from official Facebook documentation:\n\nAs solution, you can add OG tags to page which is going to be posted like this:\nhtml\n<meta property=\"og:url\" content=\"https://hybridauth.github.io\" />\n<meta property=\"og:type\" content=\"article\" />\n<meta property=\"og:title\" content=\"Hybridauth Social Login PHP Library\" />\n<meta property=\"og:description\" content=\"Welcome to Hybridauth documentation\" />\n<meta property=\"og:image\" content=\"https://getstream.imgix.net/images/logo_php.svg\" />\nMore info here: https://developers.facebook.com/docs/sharing/webmasters/. For all other social networks, you can read documentation here:\nhttps://github.com/hybridauth/hybridauth/blob/master/docs/developer-ref-user-status.md\nUP:\nI will add this info to documentation.. Upgrade HA to 2.10 and problem will be resolved.. I'd highly recommend you to upgrade. But, if you don't have possibility to do it, check this for workaround: https://github.com/thelia-modules/TheliaHybridAuth/pull/4/commits/6f68b42279c75b13bc9cd11825ed7e5aa6e437a3 . Here is a real statistic of php usage:\n\nThat's the main reason. I do not see any disadvantages of supporting php 5.4 for now.\n. Hi, glad to hear.\nYeah, it seems ProfilePress uses v2 of Hybridauth. \nI think all you need is just to add user:email to your scope for GitHub provider.. @StorytellerCZ, yeah it would be nice when user can check the code and try how it works at the same time.. btw, any chance to make me as collaborator here as well ?\nhttps://github.com/hybridauth/hybridauth.github.io\nwe can think later how to organize examples for hybridauth.. Do you know how to contact with him? \ud83d\ude05 . Hi,\njust tried, works well, any examples of your config?\nI'm tried with:\n'Facebook' => [\n    'enabled' => true,\n    'scope' => 'email, user_about_me',\n    'keys' => [\n        'id' => 'FB_KEY',\n        'secret' => 'FB_SECRET',\n    ],\n],. from your example, I see that scope is placed inside keys - that's completely wrong.\nThe same situation was here #908 \ud83d\ude05 \np.s if works, close the issue. Hi,\nfrom your example:\n1.\n\n$facebook_obj = $adapter->apiRequest('/me/accounts',$accessToken['access_token']);\n\nThe second argument in apiRequest is a request method. Btw, you don't need to put access token here. It's done automatically by Hybridauth.\n2.\n$params = array(\n  'access_token' => $page_data['access_token'],\n  'message' => 'Prueba', \n);\n$apiResponse = $adapter->apiRequest('/MYPAGEID/feed', 'POST', $params);\nthe same here, you don't need to put access_token here.\npls adap your code and try once more.. I'm going to add needed methods to Facebook provider - so, post to page will be available out of box.\nthen you check if it works for you.. OK, it will be merged soon in master, then you can check how it works.\nhere is small example:\n```php\n$config = [\n    'callback' => 'MYCALLBACK',\n    'scope' => 'email, public_profile, publish_actions, manage_pages', // \"manage_pages\" is required.\n    'keys' => [\n        'id'     => 'MYFBKEY', \n        'secret' => 'MYFBSECRET' \n    ],\n];\n$adapter = new \\Hybridauth\\Provider\\Facebook($config);\n$adapter->authenticate();\n// Will post to page wall from Page account.\n$response = $adapter->setPageStatus('Hello World!', 'MYPAGEID');\n// Will post to page wall from logged-in User account.\n$response = $adapter->setUserStatus('Hello World!', 'MYPAGEID');\n// Will post to user wall from logged-in User account.\n$response = $adapter->setUserStatus('Hello World!');\n$adapter->disconnect();\n```\nlet me know if it works for you.. Good to know, thanks. It's ok to have such errors, because if you want to use more features you need to add more scope \ud83d\udc4c. looks good, thanks!. Hi, \nNope, it is not.Hybridauth class is kind of wrapper for social providers. Each provider has own access token. I'd recommend using:\nphp\n$hybridauth = new Hybridauth\\Hybridauth($config);\n$adapter = $hybridauth->getAdapter('Facebook');\n$adapter->setAccessToken($_SESSION['token']);\n$userProfile = $adapter->getUserProfile();\nUP:\ncheck also the example_03 in HA examples.\n. This plugin has HA library of 2.4.2 version. It's very old with many issues. That's the main reason. You have to upgrade Hybridauth to https://github.com/hybridauth/hybridauth/releases/tag/v2.10.0\np.s. we do not support that plugin.. Do not know, try to search in google or upgrade library by yourself. sorry, but it's not HA problem. If you see such problem, it's your issue (e.g not correctly written code). Looks good and clean for me. Thanks!. Hi, \nthanks for reporting, \nI think you are right.\nperhaps it's better to get provderId like this:\nphp\n$this->providerId = (new \\ReflectionClass($this))->getShortName();\nthis will always return the class name of $this object and doesn't matter which namespace there.. this fix will be available in 3.0 version. \nPlease check if it works for you. . Why do you think it's incorrect? It's valid and correct. Do not see any reasons to change something here.. It works for me, even if URL is oauth/authenticate\n1) have you checked this in app settings?\n\n2) Also, try to revoke access or create a new app. It should work.\np.s. from twitter docs, both oauth/authenticate and oauth/authorize acceptable for OAuth login.\n. yeah, you are right. Seems a bug. \nWill fix soon and release rc3. Thanks!. Released in 3.0.0-rc3 \ud83c\udf89 . Makes sense, thanks.. @dimabory, welcome to create a PR for v2  \ud83d\ude03 . \nI can create a PR as well (but it will be next week). @docxplusgmoon,\nIt will be released soonly with other fixes. Currently, you can use 3.0.x-dev tag.. Nice, even configurable \ud83d\udc4d. Will be released in v2.11 soonly\nCurrently available in 2.x\nThanks.. Looks good for me, thanks!\np.s. WIll be released in v2.11 soonly. Hi, yeah.\nSeems a bug, will fix.. once more checked, everything is correct.\nA setApiEndpoints is an internal method which used inside adapter's configuration. \nIt reads endpoints from config. So, endpoints can be changed only via config.\nAnd config is an array which exists in adapter as Data\\Collection like here:\n$this->config = new Data\\Collection($config);. it seems you have used a wrong access token.\n1) can you show me how your access token looks like:\nvar_dump($_SESSION['access_token_linkedIn']);\n2) which exactly the version of HA you use?. try this:\nphp\n$linkedin->setAccessToken(['access_token' => $_SESSION['access_token_linkedIn']]);. first of all, how you get the access token?. btw, setAccessToken accepts an array with keys: access_token, refresh_token and so on.. btw, in your case scope is wrong, w_share is required.\nI'd recommend you to avoid using 'scope' in config because it's already good for linkedin provider.\nsome code:\n```php\n// Config for generating access token.\n$config = [\n  'callback' => $request->getBaseUrl() . '/socialpost/login/linkedin',\n  'enabled' => true,\n  'keys' => [\n    'key' => $_SESSION['app_id_linkedIn'],\n    'secret' => $_SESSION['app_sec_linkedIn']\n  ],\n];\n// Get access token.\n$linkedin = new Hybridauth\\Provider\\LinkedIn($config);\n$linkedin->authenticate();\n$accessToken = $linkedin->getAccessToken();\n// store in db serialized array with all tokens (access_token, refresh_token, etc):\nserialize($accessToken) // this is how to serialize.\n// then, select from db (e.g. from \"tokens\" column), and unserialize tokens.\n$accessToken = unserialize($row->tokens);\n// ..do magic...\n$linkedin->setAccessToken($accessToken);\n$linkedin->setUserStatus(....);\n``` \nMake sure you have correct scope in linkedin app:\n\n. any updates?. clear for me, you gave up. It works well even in production for long time - just your code is wrong.. Hybridauth provides social network login, so no passwords at all. It can be used as a library for any CMS(F). For example: https://www.drupal.org/project/hybridauth - integrates the HA library into Drupal login / register / reset password processes. That's a good example how it should be. \nHope it's clear.. What? Any impact? Doesn't make sense for me.. Hi,\nwhy do you need to provide a custom value for state param? \nIt's already done by HA - each auth request with random state param.\nHere is what state means:\n\nstate. A string value created by your app to maintain state between the request and callback. This parameter should be used for preventing Cross-site Request Forgery and will be passed back to you, unchanged, in your redirect URI.\n\nHere is how HA generates state:\nphp\n$state = 'HA-' . str_shuffle('ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890');\n$this->storeData('authorization_state', $state);\n$this->AuthorizeUrlParameters['state'] = $state;\nHere is how HA makes a check:\nphp\nif (\n  $this->supportRequestState &&  \n  $this->getStoredData('authorization_state') != $state\n) {\n  throw new InvalidAuthorizationStateException(\n    'The authorization state [state=' . substr(htmlentities($state), 0, 100). '] '\n    . 'of this page is either invalid or has already been consumed.'\n  );\n}\ndo not see any problems, it works like a charm.. But seems you are right, if I want to provide state manually in the config (so, own logic) \nI can't do it. Because it always overridden in OAuth2.php.\np.s. will try to fix soon. done, try to add in config:\n'authorize_url_parameters' => [\n      'state' => 'YOUR_CUSTOM_STATE_PARAM',\n   ],\np.s. will be released soonly (perhaps in 3.0.0). can you screen or type what exactly you have in Valid OAuth Redirect Uris?\ncheck here: https://developers.facebook.com/apps/YOUR_APP_ID/fb-login/settings/\nbecause for v2.10, valid OAuth Redirect Uris should be the following:\nhttp://mywebsite.com/path_to_hybridauth/?hauth_done=Facebook. I will close this issue for now, try solution from my comment above.\np.s. feel free to reopen if it still doesn't work.. also, you have to upgrade php-graph-sdk to the latest stable. See https://github.com/facebook/php-graph-sdk/issues/963. Hi,\nI think for debug you need to use:\nphp\n$this->logger->debug('Whatever you want to debug');\ncurl_options will be included automatically in HttpClient which is CURL by default.\nif you use custom http client via setHttpClient you need to implement setCurlOptions method.\nis it clear ? if no, pls reopen issue\np.s. getProviderConfig should include only provider config (not HA). Hi,\n1) which version of HA you have? \n2) which URL you use?. thanks for info.\nfirstly, let's try to add https://www.jmoza.com/import.php?hauth_done=Facebook (without scope) to Valid OAuth Redirect URIs. Ok, \nit seems the related issue https://github.com/facebook/php-graph-sdk/issues/963\nTo fix this, you need to update php-graph-sdk which is vendor library in HA. If you have composer then just composer update, otherwise download from here. cool, nice to hear that it's solved. So, as conclusion:\n1) https://www.jmoza.com/import.php?hauth_done=Facebook should be as Valid OAuth Redirect URIs\n2) php-graph-sdk should be upgraded to latest stable.. Hi, can you tell me which version of HA you have?. take a look here: https://github.com/hybridauth/hybridauth/blob/master/src/Adapter/OAuth2.php#L663\nas you can see it's done automatically when you do any requests to social provider. Any other questions?. closed as there are no activity. If something still not clear, fill free to reopen.. Thanks a lot!\np.s. will be released in 3.0 (hopefully soon). Currently available in 3.0-dev. Thanks a lot \ud83d\udcaf . in v3 the easiest way is just to wrap in try/catch:\n```php\ntry {\n    $twitter = new Hybridauth\\Provider\\Twitter($config);\n$twitter->authenticate();\n\n}\ncatch (Hybridauth\\Exception\\AuthorizationDeniedException $e) {\n    echo 'Oops, user cancels request!';\n}. yeah, urls were changed to https://id.twitch.tv/\nshould be easy to fix. Will take care about it a bit later. @cookieman768, why not. Should be fixed during this week. PRs are welcome.. should work now in the latest v3, it uses a new Twitch API \ud83d\ude80 . Many thanks. Will be released in v3.0.0-rc.4. that's also a question for me. Do we have any alternatives which can cover all cases in HA?. Looks good, thanks a lot.. Let's ignore Travis for now. Do not know when they will resolve the issue with timeout.. Many thanks \ud83d\udc4d . can you tell me which version of Hybridauth you use?. 1. For the latest v3 doesn't matter if you use id or key - both are valid. \ud83d\udcaf \n\np.s. For older versions: key is used for providers based on OAuth1, and id is used for providers based on OAuth2.\n\n\nI don't think so. Currently, each provider has $apiDocumentation which is the link to provider documentation where you can find scope / fields and so on. This information is available in the code.\n\nFor example Facebook docs: https://github.com/hybridauth/hybridauth/blob/master/src/Provider/Facebook.php#L65. do not see example_07 folder in your commit, can you check? \ud83d\udc4d . Looks good for me, thank you for your contribution \ud83d\udcaf . Thanks a lot \ud83d\udcaf . good, this makes sense for me. Available in master / 3.0.x-dev. yeah, you need to use try / catch for this. Something like this:\n```php\ntry {\n  $hybridauth = new Hybrid_Auth( $config );\n  $adapter = $hybridauth->authenticate( \"Google\" );\n$user_profile = $adapter->getUserProfile();\n}\ncatch (Exception $e) {\n  // Handle error more friendly by $e->getCode() and $e->getMessage();\n}\n```\n. I think you should use HA for your case:\n```php\n// Instantiate Google Adapter.\n$adapter = new Hybridauth\\Provider\\Google($config);\n// Authenticate using Google\n$adapter->authenticate();\n// Retrieve User's profile.\n$userProfile = $adapter->getUserProfile();\n// Access User's display name\necho 'Hi ' . $userProfile->displayName;\n```\nif somehow this is not possible - then this library won't help you.. are you talking about v2 or v3 ?. I don't know if it's really needed. Perhaps, it will increase complexity of current logic. Will think about it later. You can check example_06 which shows how to deal with multiple providers and use the same URL.. @aa-ahmed-aa,\nexample_06 has one callback and use multiple providers. So, it's not a problem. You can also try to use some GET param to recognize incoming provider. Of course, if you contribute we will check it \ud83d\ude42 . @aa-ahmed-aa,\nI wanna say that different callbacks doesn't make sense at all. And you can use just one callback with provider as query param. multiple callbacks will increase complexity. There is no plan to support it.. Looks good for me. Thanks a lot!. closed in favor of #954 . Seems FB bug, let's wait for response there:\nhttps://developers.facebook.com/bugs/194772814474841/. what exactly doesn't work? I don't see any issues in those examples. Can you provide a test repo or a screen with error?. closed as no activity.. makes sense for me. PR is appreciated. . Thanks @balamyt92. Currently available in 3.0-dev. Will be available in rc6 soon.. I think so, you just need to add openid  to provider's scope and it will work as OpenID Connect.. it seems not related.\nWe already removed google plus contacts, and now we use old api to get google contacts, so this task makes sense.. Released in rc7 \ud83e\udd47 . Should be fixed. Please try the latest v3 version.. Oh, it seems so. It also means no more setUserStatus \ud83d\ude31 Will check deeper what can we do here. I'm going to work on this issue next week. Will see what can we do here.. Ok guys, in fb settings I see this alert:\n\nthere is nothing about publish_actions, but it was before...it seems we need to wait, currently do not see any solutions.\np.s if you don't use setUserStatus you can remove this scope publish_actions in your HA config.. here we go, fb sharing doesn't work at all, and there is no possibility to get it working. It seems we need to remove setUserStatus possibility and keep only setPageStatus\n\n. I'm going to remove publish_actions permission and deprecate setUserStatus method. \nAny other thoughts?. @noesteijver, \nIt relates only to setUserStatus functionality, all others features will work as before.. Thanks a lot. Make sense.. Thanks a lot. Looks good for me.. Thanks for your contribution \ud83d\udcaf . yes, it's possible via apiRequest(). For example for twitter:\n```\n    $twitter = new Hybridauth\\Provider\\Twitter($config);\n    $twitter->authenticate();\n// Remove post with id \"240854986559455234\".\n$apiResponse = $twitter->apiRequest('statuses/destroy/240854986559455234.json');\n\n``. Others examples can be found on provider's documentation, please close this one if everything is clear.. pls reopen if you still have any questions.. wow, thanks!. if you checkhybridauth/live.php`, you will see:\nphp\n$_REQUEST['hauth_done'] = 'Live';\nrequire_once( \"Hybrid/Auth.php\" );\nrequire_once( \"Hybrid/Endpoint.php\" );\nHybrid_Endpoint::process();\nBy default, whole $_REQUEST object will be processed.. Hi,\nthat makes sense. Thanks a lot. . Yeah, it looks good. \nSorry for waiting \ud83d\udc4d . Hi, pls try to add this URL to Valid OAuth Redirect Uris:\n- https://app.nemra-1.com/import.php?hauth_done=Facebook\nso, instead hauth.done use hauth_done as mentioned here.\nPlease close the issue if everything is good \ud83d\udc4d . have you checked if your client secret is correct in the HA config? please check twice.. This issue is related only to your server.\nPlease configure date.timezone setting in your php.ini.. \ud83d\udc4b\nseems server issue, but which exactly version of HA are you using?. can you provide a full error? there should be an explanation.. this seems your server issue or some Twitter restrictions (e.g. too many posts or so). There is nothing related to HA.. here it is: https://developer.twitter.com/en/docs/basics/rate-limiting.html. Does the twitter app need any verification/review?\n<<\nI don't think so.\nAnd in HA is there any error handling method to handle the Rate Limit exceed issue?\n<<\nuse try / catch. This is v2 which is in maintenance mode. \nYou can submit PR to improve it in v3. \nCurrently there is no plan to do anything here.. try to put URL without scope in FB App settings \ud83e\udd1e \nhttps://www.handianim.fr/kalon/outils/hybridauth/index.php?hauth_done=Facebook. hmm)\ntry to set true for trustForwarded in HA config.. let's try, but I'm not sure if it helps:\nYou need to download https://github.com/facebook/php-graph-sdk/releases/tag/5.6.3 and put it under /Hybrid/thirdparty/ directory.\n- Make sure that /Hybrid/thirdparty/Facebook/autoload.php exists.\n- Hybridauth will include this file and start using the classes that library provides.\ncan you also make a screen how /fb-login/settings/ look like. yes, you don't have to include the autoload. It's done automatically by HA. yes, I want to see OAuth Redirect Uris and other settings.. please try to add this URL as well (so, without index.php):\nhttps://www.handianim.fr/kalon/outils/hybridauth?hauth_done=Facebook. have no idea what's wrong. I have the same settings but in my case it works well.. 1) what is the base_url in your HA config?\n2) do you use any CMS or frameworks?. try https://www.handianim.fr/kalon/outils/hybridauth/\nforward slash at the end is required.\nSummary\nHA config:\n'base_url' => 'https://www.handianim.fr/kalon/outils/hybridauth/'\nFacebook:\nValid OAuth Uris:\nhttps://www.handianim.fr/kalon/outils/hybridauth/?hauth_done=Facebook\nhttps://www.handianim.fr/kalon/outils/hybridauth?hauth_done=Facebook. awesome, glad to hear that. \ud83d\udcaa . does this path is writable ? do you have an access to modify it?. Hi,\nis it still actual? It seems server issues, because you didn't get the error on your local machine.. Thanks for reporting. \nIt was fixed here 8e45b33c6b225ea6ace67c81af2fcc21c2e37b97 and should be available in master/3.0.x-dev. here we go: https://github.com/hybridauth/hybridauth/releases/tag/v2.12.0\nthanks everyone \ud83e\udd47 . @jcambien, can you give a link where this problem is described? \nI'm wondering because it makes sense for client side implementation (no HA needed). But for server side, we have to make a redirection.. I hope this problem is not urgent for now, because only you've been reported.\nSo, I skip it for now. In case of any details, please let us know.. this makes sense, thanks a lot \ud83e\udd47 . Nice catch \ud83d\udcaf \nThanks a lot. sorry, but no. PHP 5.2 is dead already.\nPHP 5.6 will be dead in 2019.. Ok, guys. Thanks for explanation. \np.s. To release v3 we need to fix/improve documentation which is the hardest part \ud83d\ude25 Would be nice if somebody can help.. can you provide more info?\n\nwhich version of HA\nhow do you call setUserPost (e.g which arguments passed)\netc.... feel free to create a PR and provide more user friendly error message. oh, you're 100% right. Thanks! Fixed. just tried on production site where I have installed v2.12 and it works well.\nAre you sure it's related to HA?. thanks a lot \ud83e\udd47 . It looks good, thank you \ud83e\udd47 . Thank you, it looks good for me \ud83e\udd47 . > domain1.com, domain2.com, domain3.com\n\nfor me it's a list of domains. There is nothing related to domain.com. Or did you mean: domain1.domain.com, domain2.domain.com, domain3.domain.com, etc..?\nyou should also configure each provider to support different domains / subdomains.. this makes sense, thank you \ud83e\udd47 . feel free to add via PR,\ncurrently there is no plan to add it to v3. you didn\u2019t provide any information, pls recreate task with correct description. 1) is it on local machine or on prod/dev server? (if so, can you give an URL to try?)\n2) do you use any frameworks or you have own implementation of HA?\np.s it can be server/host issue. \n. In my case - everything works well. It seems you have something wrong with session management (probably not properly started or cleared when LinkedIn makes redirect) . Thanks a lot. Great job \ud83e\udd47 . looks nice, thank you. @Divxtaman, thanks for reporting. \nCould you please upgrade and check if everything works now?. thanks for more details. I will check tomorrow, seems need to migrate to api v2 with new endpoints . seems we should migrate v1 to v2 by this guide:\nhttps://docs.microsoft.com/en-us/linkedin/consumer/integrations/self-serve/migration-faq?context=linkedin/consumer/context\nso, it's share + login functionality.. I give it more priority, because of:\n\nStarting March 1, 2019, LinkedIn will deprecate use of its v1 APIs. This has nothing to do with API which used by Hybridauth. Authentication will work as usual. . Thanks @miled for fix. I've checked locally, works well for me.\n\nReleased in RC9. \ud83e\udd47 . There are no docs to update \ud83d\ude04 \nEverything is the same. We just remove dependency from the Google+ Sign-in and replace it to Google Sign-in.\n\nif you are already on HA 3.x, you just need to pull (upgrade) the newest changes.\nnot sure if it's required step but if you are still use v1 key, just recreate it to v2 (e.g [CLIENT_ID].apps.googleusercontent.com). https://github.com/hybridauth/hybridauth/releases/tag/v2.13.0\n\nfrom now, v2 supports Google Sign-in as well \ud83c\udf89 . great, thank you \ud83d\udcaf . Thank you for your help. I will check this PR today. Great job, thanks \ud83e\udd47 \nwill release next version soon. you are welcome \ud83d\ude03 \nI'm preparing release notes for v2.13, will describe there what to do and how.. You are 100% right. Good catch \ud83d\udc4d \nI think Data\\Collection is something internal, so it's better to change a bit setApiEndpoints to accept array of endpoints and then wrap it to the new Data\\Collection($endpoints)\nwhat do you think?. Thank you, it looks great \ud83d\udcaf . @zorn-v I've added backward compatibility, thank you for noticing.. @zorn-v you are right, it's ready \u263a\ufe0f. \n2 tasks are left: https://github.com/hybridauth/hybridauth/milestone/2\nI really hope that during February, HA 3.0 will be released.. @StorytellerCZ can you please check? it seems I don't have access to manage Packagist.. Great job \ud83e\udd47 \nThank you!. closed as duplicate of #1032. \ud83d\udc4b \nfor v3: please check related issue: #872\nfor v2: I think it's also extendable, but need to check deeper.\nhope, it will help.. 2.5.1 ? there is already 2.13. Please upgrade . yeah, we already discussed it here: https://github.com/hybridauth/hybridauth/issues/1020. closed as duplicate of #1020 . fixed, see https://github.com/hybridauth/hybridauth/commit/f37b28a2e67d62951aa8f4ef978ea83d388e8cd7.. as I see in response email_verified is boolean, but in HA User object it means Verified user email which is string. Here is a proof. So, pls use:\n$this->user->profile->emailVerified = !empty($data->email_verified) ? $this->user->profile->email : '';. does this construction make sense?. pls use the following (proof is here):\n$userProfile->emailVerified = $data->get('email_verified') ? $userProfile->email : '';. pls add a new line. can be just 'user/details' because $this->api->api_base_url will be added automatically.. there are no coding standards at all. Can you fix it according to PSR2 standard?. this is not used at all. Please remove.. it's impossible to have object and array in one instance like here $response->user, so pls use only array style or only object-properties style.. Hi,\nCheck comment here: https://github.com/hybridauth/hybridauth/issues/888#issuecomment-354552714. Only one question, why here? why you add those comments in merged PR. Pls fill the issue if you have any troubles. \ud83e\udd26\u200d\u2642\ufe0f . can you fix indent? (use 4 spaces instead of 5). let's fix a bit coding standards:\nphp\nif ($this->config->get('photo_size')  === 'original') {. seems unnecessary spaces.... use the same style as above:\nphp\nif ($this->config->get('photo_size')  === 'original') {. let's do like tihs:\nphp\nif (!empty($originals->values)) {. this is how should it be in terms of coding standards:\nphp\nif ($this->config->get('photo_size') === 'original') {. the same here, use:\nphp\nif ($this->config->get('photo_size') === 'original') {. the same here, use:\nphp\nif (!empty($originals->values)) {. should we remove this?\nI don't think so.. what if we use $_REQUEST superglobal array which contains GET + POST in one place?\nphp\nif (empty($_REQUEST['openid_mode'])) {\n    $this->authenticateBegin();\n}\nelse {\n    ...\n}. yeah, \ud83d\udcaf  (updated)\ncan you update this PR according to my comment?. let's use $data->filter('value')->toArray(). let's use $entry->get('id') / $entry->get('displayName') / etc - pls change all usages below. no need blank line. let's add blank line before return. does it mean that email is really verified? if provider doesn't return this info, then do no set emailVerified at all. let's use Microsoft Graph provider adapter.. @cookieman768, yeah WeChat approach looks good for me, you can do the same. So this one will be default (with US). I think we need to add EU as well. Others only if there will be request.. @Edarlingen - fine for me \ud83d\ude0f . let's add blank line. let's add blank line. let's use:\nphp\n    <?php foreach ($hybridauth->getProviders() as $name) : ?>\n        <?php if (!isset($adapters[$name])) : ?>\n            <li>\n                <a href=\"#\" onclick=\"auth_popup('<?php print $name; ?>');\">\n                    Sign in with <strong><?php print $name; ?></strong>\n                </a>\n            </li>\n        <?php endif; ?>\n    <?php endforeach; ?>. let's use:\nphp\n<?php if ($adapters) : ?>\n    <h1>You are logged in:</h1>\n    <ul>\n        <?php foreach ($adapters as $name => $adapter) : ?>\n            <li>\n                <strong><?php print $adapter->getUserProfile()->displayName; ?></strong> from\n                <i><?php print $name; ?></i>\n                <span>(<a href=\"<?php print $config['callback'] . \"?logout={$name}\"; ?>\">Log Out</a>)</span>\n            </li>\n        <?php endforeach; ?>\n    </ul>\n<?php endif; ?>. this should be inside body and commented via <!-- >. move it to head section. let's try\nphp\n$users = $data->filter('data')->properties();\n$user = new Data\\Collection($users[0]);\nand then:\nphp\n$userProfile->identifier  = $user->get('id');\n$userProfile->displayName = $user->get('display_name');\n...etc. just extend Blizzard and change this three properties:\n```\n/*\n * {@inheritdoc}\n /\nprotected $apiBaseUrl = 'https://apac.api.battle.net/';\n/*\n * {@inheritdoc}\n /\nprotected $authorizeUrl = 'https://apac.battle.net/oauth/authorize';\n/*\n * {@inheritdoc}\n /\nprotected $accessTokenUrl = 'https://apac.battle.net/oauth/token';\n```\nall other things will be inheriting from parent \ud83d\ude04 . I think it can be in parameters like this:\nphp\n[\n  ...\n  $this->accessTokenName => $this->getStoredData($this->accessTokenName),\n]. add one space after if and before (. no need extra space after !, just if (!class_exists($adapter))\np.s. it was old style.. the same. try: if (!$file->isDir()). @cookieman768, any updates? \ud83d\ude0f . let's use the following:\n```php\n$item = new Data\\Collection($item);\nif ($item->get('primary')) {\n    $userProfile->email = $item->get('handle');\n    $userProfile->emailVerified = $item->get('handle');\n}\n```. @antiqque hey, any updates?. do not see any usages of this. Why do we need to overried this method?. add blank line. do not see reason to override this method - the same logic as in parent class.. let's use inline style of comment. or you make it as protected or you move it upper to have right order. ",
    "giorgio79": "Much appreciated!\n. Not sure why this was closed. Do you accept a patch?\n. Looks like Amazon requires https, so I wont be pursuing this. I did find a solution here already https://github.com/kendola/AmazonLogin\n. ",
    "uklcpsgr": "I have the same error.\n. Server time seems to be OK.\n. ",
    "wvdweij": "Check your server time, if it's  a couple of minutes out of sync Hybrid Auth fails without proper error message.\n. Turn on debugging and check the log files, maybe there's some useful information why the token i invalid...\n. LinkedIn has updated their API between the 12th and 19th of may. Generally there are some permission changes thus updating your application scope should do the trick. If you're not requesting any scope params in your Hybridauth config you need to change the permissions in the LinkedIn Developer Application Settings. For more information see: https://developer.linkedin.com/support/developer-program-transition especially check the Troubleshooting section on this page for further details of the api changes.\n. If you're requesting any of the following permissions: r_fullprofile, r_network, r_contactinfo, rw_nus, rw_groups, w_messages. You need to remove them from the scope parameter in the Hybridauth settings or uncheck the permissions in the LinkedIn Application Configuration.\n. If the scope parameter isn't present than unchecking the permissions in the LinkedIn Application Configuration should be sufficient. If the error still occurs then you should turn on the debug_info and debug_file params in the Hybridauth config so you can analyse the logs and figure out what's causing the LinkedIn errors.\nIf you're posting on the behalf of the loggedin LinkedIn user you should also request the w_share permission.\nAlso, check your server time, if the time is off by a couple of minutes it also can trigger errors.\n. Check the entries in the debug log of Hybridauth and post them here. Maybe there's some more information regarding the error.\n. ",
    "juanjolainez": "I am having the same problem. It works with some accounts but not with others... anyone has found any reason? \n. Nope, HTTP_HOST is not set when I make a print_r($SERVER)....\n. It only fails when I do composer update.\nI've test it in both Linux and MAC with PHP 5.5.3. No browser. If I comment from that line to the end of the function it works just fine, but it's pretty annoying to do so every time. \nIt works when I use it by doing API calls or browser calls\n. It happens when I do some job in a queue (actually I am syncing friends using social networks) and I am getting the very same error. \nDo you have any thoughts about this?\nThank you\n. Actually I figured out the issue. \nThe point is as I am doing a cli call instead of a browser call, some variables are not set (it's the very same case as when you do it with PHPUnit). \nI commented this lines in the file Auth.php (line 388): \n```\n$url = $protocol . $_SERVER['HTTP_HOST'];\n// use port if non default\nif( isset( $_SERVER['SERVER_PORT'] ) && strpos( $url, ':'.$_SERVER['SERVER_PORT'] ) === FALSE ) {\n    $url .= ($protocol === 'http://' && $_SERVER['SERVER_PORT'] != 80 && !isset( $_SERVER['HTTP_X_FORWARDED_PROTO']))\n        || ($protocol === 'https://' && $_SERVER['SERVER_PORT'] != 443 && !isset( $_SERVER['HTTP_X_FORWARDED_PROTO']))\n        ? ':' . $_SERVER['SERVER_PORT'] \n        : '';\n}\n\nif( $request_uri ){\n    $url .= $_SERVER['REQUEST_URI'];\n}\nelse{\n    $url .= $_SERVER['PHP_SELF'];\n}\n\n```\nand everything seems to work fine. \nA fix would be adding an isset httphost just like this:\nif (array_key_exists('HTTP_HOST', $_SERVER) {\n     ....\n}\nor \nif (php_sapi_name() == cli) {\n      ....\n}\nWhat do you think? Thank you!\n. I am using Laravel plugin. \nApp::make('hybridauth') returns null...\n. Sorry guys, I fixed it doing this:\n```\n$video_details = array( \n            'access_token'=>$access_token,\n            'title'=> 'Test video!',\n            'source'=> curl_file_create(realpath($path)),\n            'description' => \"Test video description!\"   \n);\n\n```\n. ",
    "mastef": "oauth 1 or oauth 2 ?\n. thanks!\n. Specifically my composer.lock has this version locked in, but it cannot download it any longer as that hash is gone from the repo :\n{\n            \"name\": \"hybridauth/hybridauth\",\n            \"version\": \"3.0.0.x-dev\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/hybridauth/hybridauth.git\",\n                \"reference\": \"e4b7396bc8c987412a47ecaf07ccebaff8039809\"\n            }\n        }. Mea culpa, actually composer was able to install it. It was just complaining that it couldn't get it from .git\n```\nFailed to download hybridauth/hybridauth from source: Failed to execute git checkout 'e4b7396bc8c987412a47ecaf07ccebaff8039809' -- && git reset --hard 'e4b7396bc8c987412a47ecaf07ccebaff8039809' --\nfatal: reference is not a tree: e4b7396bc8c987412a47ecaf07ccebaff8039809\n```\nBut it was able to download it from the zipball at https://api.github.com/repos/hybridauth/hybridauth/zipball/e4b7396bc8c987412a47ecaf07ccebaff8039809\nNow trying to download from dist\n  - Installing hybridauth/hybridauth (3.0.0.x-dev e4b7396): Downloading (100%). ",
    "Mwea": "I'm having the same problem, server times are OK..\n. ",
    "GawainLynch": "Getting this also on Twitter authentication\n. ",
    "maximseshuk": "now error \"Array to string conversion\"\nhybridauth/Hybrid/Storage.php on line 73\n. ",
    "andrewchak": "The new addition to Hybrid/Storage.php line 73:\nif(is_array($value))\n{\n    $value = implode($value);\n}\ncauses authentication problems, since in Hybrid/Provider_Adapter.php line 159:\nHybrid_Auth::storage()->set( \"hauth_session.{$this->id}.id_provider_params\" , $this->params );\n$this->params is an associative array, and using implode causes this to become a string instead of the array that is required.\nThis causes an issue where if the user is redirected to authenticate at a provider (e.g. Facebook), then cancels without logging in, then try to authenticate again, it throws an error while trying to read the id_provider_params value from storage.\n. ",
    "rudy1976s": "Is there any news about this issue? I am using the hybridAuth in a cakePHP 2.6 project, deployed in two different mamp pro containers : in one it works fine without raising errors while the other has never worked out. Same php 5.5.2.3 on both containers.\n. ",
    "abgit": "Sure,\nhttp://www.nytimes.com/2014/05/01/technology/facebook-to-let-users-limit-data-revealed-by-log-ins.html?_r=0\nbest,\nFA\n. Right, but maybe we should check what changes are required in hybridauth to new login policy if any.\n- Will the abstract use of hybridauth still same? same login calls? same get user info calls?\n- What will happen if a user don't share some info and app requires that info to work? User is wiil not be logged at all? Hybridauth returns a forbidden error to user? Hybridauth will invoke a custom call so that app can display a warning to user?\nbest\nFA\n. Hi @MoniqueHahnefeld can you elaborate more on this? \nHow do you post to page?\nbest,\nFA\n. @ptim & @roydekleijn ,\nhttp://stackoverflow.com/questions/24297533/hybridauth-anvard-how-to-log-out-log-in-as-different-user/24307613#24307613\n\nIf I am currently on my computer logged in via facebook and then login via your application, your app makes the connection between my facebook account and the account of your website.\nIf I logout, only my session on your website is destroyed and I am logged out from your website. This has no impact on my logged in status on facebook. If I visit the facebook website now, I will still be logged in via my facebook account. Therefore, if I again visit your website and login via facebook, I will be logged in with my associated account.\nSo if another person wants to login, I first have to go to facebook and logout. The other person has to login on FB and can then login on your website with his facebook credentials.\n. Seems that facebook has/had a method that returns the logout url with a predefined redirect to your custom portal logout url.\nIn theory, if a user clicks on that facebook url, would be logged out from facebook and redirected to your portal logout url.. but seems to not work anymore.\n. If the socialengine don't have an api to logout an user based on their login credentials, there will be no library (hybridauth or other) to workaround this problem.\nSeems that there's no way to force an user to logout on a socialengine.\n\nI just propose to send an warning message to your users after logout your app telling that they are still logged in their social engine.\nbest,\nFA\n. Hi @Rayden , did you test that facebook-getLogoutUrl() method?\nI have test it as i said in previous comment but without success. Facebook returns an url but after user redirecting it does nothing. I has expecting that user automagically logout's after redirecting to that returned logouturl but seems another Facebook bug.\nDid it work with you? Or you didn't test it?\nbest\nFA\n. I'm even more drastic than @NodexTech. \nHybridauth is a developer library, so this means that it's not a end user software.. so why not delete config.php, index.php and install.php?\nA developer should just use the lib and hide it from public web folder. Of course all request variables should be properly sanitized but having an installer or configuration system doesn't make much sense to me in a developer library.\nbest\nFA\n. By \"delete \u00edndex.php, config.php & install.php\" i mean: delete those 3 files from hybridauth oficial repository.. \n. +1 README. \nSimple and understandable in seconds.\n. I haver no problems with www or non-www versions on facebook.\nSounds strange to me.\nCan you give more details on this?\n. Anyone on this?\n. @padysrini , seems that yahoo api don't return email address (same as Twitter).\nMaybe you need to create a custom email registration system on your app.\nbest,\nFA\n. @bboerendans , hybridauth is a developer library for inclusion in your own software as a regular 3rd party software.\nCheck https://github.com/hybridauth/hybridauth/issues/241\nbest,\nFA\n. @tradebit , You should make sure examples are not used or present in a production environment.\nMaybe it's time to delete those too from repository and move them to documentation? @AdwinTrave ?\nbest,\nFA\n. @ashfanahamed , OAuth is just an authentication library. With HybridAuth you can login an user in those 3 providers but.. is your task to assign those 3 logins with same user in your custom source code.\n. ",
    "domagala": "This issue is closed. Does that mean Hybridauth has a provider for LinkedIn's OAuth 2.0 implementation?\n. Is there an OAuth 2.0 implementation?\n. ",
    "Asanvery": "nevermine my mistake, in api vkontakte uid need for some actions and queries so you need to leave as is.\njust most cms used uid from social for unique field username in own tables, then user registred. Vkontakte uid is just number like \"12345678\", but screen_name if not filled have some like \"id1234567\", but most people filled them like nickname. So we can get or  \"id1234567\" or \"Asanvery\". \n. yes, good idea,  displayName = screen_name will be nice (now in vkontakte not use nickname)\n. ",
    "awoehler": "The problem ended up being a time synchronization issue.\n. ",
    "matwright": "duplicate of https://github.com/hybridauth/hybridauth/pull/215 closing.\n. ",
    "ptim": "I'm having this trouble, too! I really need to be able to log in and out as different users\u2026 \nI'm using Anvard - an implementation of HA for laravel, and I'm trying to use \n$hybridAuth->logoutAllProviders(); in my logout route, but the logged out user is still able to login without reauthorisation.  \nI've had a hard time finding good info on invalidating the token\u2026\n. @roydekleijn you probably figured this out already - i need to log out of my provider to allow another user to log into my app.\n. ",
    "roydekleijn": "Is this something that can be fixed in hybridauth?\nOr is there some workaround available?\n. ",
    "Rayden": "Facebook seems to provide a logout URL, hybridauth should use that method.  And possibly find and use similar logout methods for the other providers. So that not only the (local) hybridauth session but also the session on the providers side is ended.\nhttps://developers.facebook.com/docs/reference/php/facebook-getLogoutUrl\nhttp://hybridauth.sourceforge.net/google-group.html?place=msg%2Fhybridauth%2FLEAi9gyqw-I%2FVIWCbFlS6QkJ\n. I havent tested it. Just noticed it was mentioned in the facebook docs.\n. Havent thought about it in that way, but your argumentation sounds fair and clear in why not to logout a user from an identity provider.\n. ",
    "bahman2216": "I know issue closed, But it is possible to revoke token when user logout?\n. I successfully connected to Google account and some other social networks via Hybridauth, For Youtube, I tried to login and authorize with Google API.\nIt response me Invalid Credentials with error code 401.\nMy part code:\n$adapter = $hybridauth->authenticate( \"Google\", $params  );\nIt is work for Google, But not work for Youtube. I made two Key ID and Secret. One for Google+ and one for Youtube. But still have same error.\nI read youtube data API and try it online. work normally. https://developers.google.com/youtube/v3/docs/search/list#try-it\nMy question is: can I connect to youtube through google authentication API? if true? Then with google+ everything is ok and with youtube response me Invalid Credentials with error code 401.\n. Yes, I did exactly as you said. But I thinks it is related to Client ID and secret ID.\nI made separated file with name Youtube.php and created new Client and secret ID.It is worked for youtube login but same error with google!!! I confused\n. No idea?\nIm going to change Hybridauth session variable name from hauth_session.POVIDER_NAME.token.access_token to hauth_session.POVIDER_NAME.PROVIDER_IDENTITY.token.access_token.\nGuys, if you have better idea please share it.\nIt seems it is hard to update my hybridauth after these changes.\n. ",
    "Taapo": "@bahman2216 -- I have the same question: how to revoke/invalidate the access token from hybridauth? (You can issue a \"delete\" request against \"/me/permissions/\" via the Facebook SDK) Or is this outside the scope of HybridAuth?\n. ",
    "engharb": "Hello,\nI have tried different ways to logout from Twitter but it does not work. I want to logout completely and then reloggin with username and password.\nCould someone help me.\nregards,. How about the login to Facebook login page.\nthis is my controller impl.:\n$hybridauth = new \\Hybrid_Auth($config);\n        $adapter = $hybridauth->getAdapter( 'Facebook' );\n\n        $tokens = $adapter->getAccessToken();\n\n        $userProfile = $adapter->getUserProfile();\n\nBut I get exception : User not connected to the provider.\nMy front end is: \nIs there something should be added to the front end to popup the FB login form.?. this issue related to v2.x-dev. I have converted to use one FB app, but I still have getting the following error: User profile request failed! Facebook returned an error: Invalid appsecret_proof provided in the API argument.\nDo someone have info?\n. thank you. check your apps configuration/setting.\nbe sure website: your main site url,\nand the redirect url.\nalso be sure that the fb app status is enabled.. ",
    "scrx": "You can read about the changes here, maybe that will help\n you. https://developers.google.com/+/api/auth-migration\n. ",
    "JosefJezek": "I would like use this fields for eCommerce (WooCommerce) and other projects.\nJaky omezeny pristup ma mojeID?\n. 1000 CZK per year is good for business. \nOv\u011b\u0159en\u00ed uzivatele pomoci az 4 cest je pro n\u011bkter\u00e9 projekty k nezaplacen\u00ed. Jedn\u00e1 se o sluzbu, kter\u00e1 posouv\u00e1 inet zase o kus d\u00e1le. \n. ok, I will make two versions.\n. mojeID is based on OpenID.\n. ",
    "ChrisFrench": "wait this is not right \n. ",
    "vbezruchkin": "Done. Thanks!\n. Hey, this is what we have in our Github Provider configuration:\n// default permissions  \n    // (no scope) => public read-only access (includes public user profile info, public repo info, and gists).\n    public $scope = \"user:email\";\nWorking fine for us. You can test this on http://www.subrion.org/\n. ",
    "jollysean": "Hi,\nHas this solved the issue? I still do not get email.\nLine Github.php:57 > $emails = $this->api->api(\"user/emails\");\nReturns,\nobject(stdClass)[43]\n  public 'message' => string 'Not Found' (length=9)\n  public 'documentation_url' => string 'https://developer.github.com/v3' (length=31)\n. ",
    "cschramm": "Done.\n. ",
    "Shade-": "Added.\n. Beware: their latest SDK (v4.0) needs PHP 5.4 as a minimum requirement. I don't know what PHP version is supported by HybridOAuth, but you should stick to v3.2.3 if you want to support earlier versions of PHP.\nApril 2015 is quite far from now.\n. Facebook's SDK has been updated to support the new APIs but I don't really think they are cutting out the old SDK, which is the one hybridauth is using at the moment. I guess nobody has updated it yet because Facebook's new SDK is compatible with PHP 5.4 or newer whereas hybridauth has a 5.2< compatibility range. I don't even think it will drop compatibility with 5.2 and 5.3 in such a small amount of time, thus why your patch seems the best and might be proposed as a PR if it will be confirmed to be working.\n. Hybridauth 3.x will be frameworks-independent, meaning that it will not matter if using provider-specific SDKs like Facebook's one. For 2.x, I'd say @dtbaker solution is the best out there as it updates the SDK with the corrent endpoints currently used by Facebook.\nNonetheless, the notice is shown just to developers, not to the actual users. You don't have to worry updating your Hybridauth copy on your own, as Facebook itself told you that after the scheduled deadline API calls will be defaulted to the new version of their endpoints (which is an automated procedure and should not affect the user experience in any visible way).\n. This issue is usually caused by a lack of resources, as both Facebook and Twitter requires port 443 to be opened. This is a useful function you can adapt on your needs to check if your server has the requirements for a specific provider (I have listed Facebook and Twitter as I know they require this, the others should not need port 443).\n``` php\nfunction verify_port_check($provider = '')\n{\n    global $lang;\n$ssl_providers = array('Facebook', 'Twitter');\n\n// 3 seconds timeout to check for port 443\n$fp = @fsockopen('127.0.0.1', 443, $errno, $errstr, 3);\n\n// Port 443 is closed or blocked\nif (!$fp) {\n\n    if ($provider and in_array($provider, $ssl_providers)) {\n        // Throw an error\n    }\n    else {\n        return false;\n    }\n\n}\n\nreturn true;\n\n}\n. It works fine for me. Are you sure you have set your email to be public? By default, GitHub will hide your primary email address.\n. This is also required by WordPress API (adding an extra header parameter) but you can add your custom header to the specific provider you're having issues as the majority of the others don't require this patch to work.\n.\n$this->api->curl_header = array(\"Authentication: OAuth \" . $this->access_token);\n```\nThis would do the trick in your case (add this in the provider-specific file). But as I said before, some providers do require this and some others don't, so I'd say it's better to keep the existing configuration in the curl setup and add the extra header just to providers that need this patch. As far as I am concerned, WordPress (which I have developed) is the only one that needs a Bearer token sent as header. Google works fine for me without any patch of this kind.\n. Well that is not a problem now that you have the piece of code that fixes the issue.\n. Yes. The problem is, WordPress requires a Bearer, not an OAuth header which is the one required by Google in POST requests. As you can see, not only it is present in just 2 providers but it may also vary between these ones.\nAlso, I'm not entirely sure if the others work fine if they pass the access_token both in the querystring and in the header. It's safer to add to every provider once they update their APIs. Evernote, for example, specifies that tokens must be passed in the header and not in the querystring, and it returns an error if done in the latter way if I am not mistaken.\n. See #280.\n. Sure thing. Will do it asap.\n. See #582.\n. Guys, this is CRUCIAL for Facebook's login. Otherwise you get an annoying Exception \"Facebook returned an invalid user id\" with code 5 from HybridAuth if you use the read_stream permission, which is indeed deprecated from v2.4 of FB's APIs.\nThis should be merged and released urgently.\n. I literally run into a brick wall trying to solve this issue for one of my products, since neither Facebook or HybridAuth return a descriptive error message.\n. Yeah sorry, they should have been fixed by now (see comments above).\n. Sorry, my fault. It should be added to the relative folder and the .php extension should be added too. Feel free to propose the changes yourself, I'm too busy at the moment.\n. HybridAuth's Facebook SDK is not deprecated, read #280.\nTL;DR: Facebook pushes out new SDK versions too fast to maintain them, and they cut out old PHP version programatically. While this is ideally a great way to stimulate devs to update their code to use the latest technology available, many servers still do not support newer PHP versions and neither does HybridAuth at the current state. HybridAuth is using a modified v3.2.3 Facebook SDK which works fine as it uses the new API endpoints while maintaining old PHP versions compatibility.\n. I do not support this change and I think this should be reverted as soon as possible. First of all, while most projects use Composer there are still some who do not, so including the SDK manually should be at least documented somewhere for those projects in which Composer is not used and cannot be used.\nSecondly, the latest Facebook SDK does not support PHP 5.2. This breaks HybridAuth minimum requirements and shifts it to PHP 5.4. There was a reason why the SDK was edited back in the days when Facebook updated to v4 and v5; the \"old\" 3.2.3 is still working fine with the patches applied on HybridAuth 2.7.0.\n. It's quite useless requiring a newer PHP version for just one provider IMHO. If it was me,I would support PHP 7+; but since HybridAuth has been compatible with PHP 5.2, there's no need to upgrade the requirements for one provider only. Also, other patches have been introduced which could be applied to existing projects using older versions of PHP. A minor version should not change the requirements, I would have waited 3.0.0 instead to pull this change.\nBesides, I don't use Composer because my host does not give support for it as it's a shared one. Many of them do not allow Composer to be ran. In addition to this, I have been integrating HybridAuth with MyBB which does not need Composer to be ran. This is a major issue for me (and for everyone integrating HybridAuth with existing frameworks which do not need a dependency manager). I'm not against it, but I do believe the SDK should be added to the package, or detailed instructions on how to download and add it to HybridAuth should be provided in the docs.\n. You're most probably missing the SDK, which is included only if you have installed HybridAuth with Composer. \n. Well the SDK is available here: https://github.com/facebook/php-graph-sdk\nBut I have no clues where to include the folder. Maybe @StorytellerCZ knows where Composer compiles the SDK to.\n. The problem is \u2013 you don't know where to put all those files.\n. @annuh I know you can require that on your own. I am a developer too.\nHowever, since this project aims to provide a centralized, all-in-one authentication environment, requiring external libraries/SDKs must be handled by the project, not by the final user.\n698 and @HealingRooms are the first evidences of why this PR was a (partial) mistake.\n. That is good if you have Facebook SDK in the respective folder. You require the autoloader which handles everything for you. However if you do not have the SDK in place this won't work.\nI may end up adding a PR for 2.8.1 as soon as possible.\n. Since most of shared hostings do not allow SSH access to perform command line activities.. This is not possible because my shared hosting does not meet the necessary requirements. Many hostings are still stuck to older PHP versions unfortunately.. I could show you other stats in which it's clearly stated that the average PHP version installed on shared hostings is far from being up to date, but that won't contribute positively to the discussion. Also, my hosting works well for my needs BUT does not allow me to install Composer in any possible way, apart from the outdated PHP version. I don't need to change host for this.\nMy point here is simple: this PR updated the project with a module (so something that IS NOT central to the project itself: it's just one of many other modules) that 1) shifts up the environment requirements of the whole package and 2) needs specific and external projects such as Composer to be installed looks like a complete fail to me. A more reasonable approach would have been updating the whole library to use modern tools offered by more up to date PHP versions and eventually integrate the use of Composer for the entire package. And that's what has already been in development with the 3.0 remake, so I would have accepted this only for the next major leap forward, not a minor update which worked well even without this addition. If it works, why would you touch it?\nI'm not against using the latest features and softwares, I'm quite happy to learn new techniques and upgrade my skills year by year. But I always look for the balance between pros and cons and this PR looks bad to me for the aforementioned reasons.. If you are extending Hybridauth class, try with the following code in your class constructor:\n$this->logger = new Logger('debug', 'file path');. Ah, my bad. If your project initialized PHP's session before including Hybridauth, the Hybridauth\\User\\Profile class is not yet initialized, causing the object to be marked as phpIncompleteClass. This is not a bug intrinsic to Hybridauth, however, given most of PHP applications make use of PHP session, maybe the logic can be changed somehow.. ",
    "NodexTech": "I will submit a PR for you. It's a simple fix...\n. I haven't even attempted to fix it yet, I've been very busy.\nThe code in the file that is vulnerable doesn't even need to be there from what I remember.\n@greggles The vulnerability allows the code to execute a recursive function via $_GET. One of our websites that had the plugin installed was in a highly secure environment.\n. What is strange is that I can see NO reason why the install file should accept any user input in the first place.\nI can't be missing the obvious point of why it allows user input because it seems to be controlled by a configuration file anyway.\nSimple fix.\nRemove the user input completely\n. ",
    "greggles": "A few more thoughts:\n- If it's expected that install.php should be removed then it seems like a good idea to have code that looks for it and warns people to remove it. I've seen some software that requires the install.php be removed before it functions at all, but that seems a bit extreme. Other software I've used just have a warning in the admin area that there are unfinished tasks.\n- This issue only affects sites that allow the webserver (e.g. Apache) to write the files that it executes itself. That is inherently a weak setup so it is no surprise if those users get hacked. Again, there could be code in HybridAuth that looks to see if the files are writable by the webserver and puts up a warning if this is the case. The scenario of files being writable by the webserver is fairly common on shared hosting, so I wouldn't make fixing it a hard requirement, but you can at least suggest people configure their site securely.\n. It seems like the fix so far is insufficient http://seclists.org/fulldisclosure/2014/Aug/22\n. How long have you been unable to edit the documentation?\nIt seems like it's time to start making the official documentation somewhere else (perhaps github wikis and/or the README). \n. That issue indeed addresses most of this. An open question seems to be why the /download.html points to the version that doesn't include this fix.\n. ",
    "joearcher": "Submitted pull request (https://github.com/hybridauth/hybridauth/pull/249) for this issue.\n. ",
    "pesaply": "I was trying to connect my facebookapp\n. igot this at the website http://www.stackfoward.com\n. ",
    "alexanderzatko": "I still see this problem in v. 2.11, albeit with different provider.. domain1.com is subdomain of the TLD .com domain, not a subdomain of the domain.com domain.. resolved with a pull request https://github.com/hybridauth/hybridauth/pull/1045. ",
    "Braunson": "Issue still persists it seems with dev-master (3d0aaa5)\ndbed9a8f4b9cc1c1ea26cb689dafc4e58db0ca3c is working for now.\n. All working now on the most up to date dev-master, cheers!\n. I guess the error message wasn't too helpful, ended up being that Facebook's latest API change required the redirect URI to be EXACT and not just a domain now. \nThe issue was I had the domain in the redirect uri on FB Dev settings and they now require the exact URI. That solved it.. Seems this didn't fix it, still having the error\nFacebook SDK returned an error: Failed to connect to 2a03:2880:f006:15:face:b00c:0:2: Network is unreachable. Anyone else having this issue?. ",
    "errrzarrr": "I'm having problems posting a image too. \n. ",
    "sinaa": "I have submitted a bugfix for this: #316 .\n. ",
    "gidbot": "Any help would be greatly appreciated! \n. This is the error Im getting, its just a 500. The authorization process works perfectly on Safari and Firefox. \nThanks again. \n\n.  Chrome works now! Not sure if you guys pushed any fixes, but we definitely didn't change anything on our end. Thanks anyway!\n. ",
    "maxlev87": "\nWe trying to login using Facebook\nHybridAuth Social Login 7.x-2.9\nIncludes: HybridAuth, HybridAuth Bonus\n. \n",
    "MajidCS": "Thank you for link\n. ",
    "dtbaker": "Just started with Hybridauth and got this Facebook API error/notice:\n\nhas anyone attempted using version 2.0 with hybridauth yet?\n. In base_facebook.php I added the v2.0/ suffix to these URLs and the warning went away. I'm not sure what will break, but login seems to work fine now:\npublic static $DOMAIN_MAP = array(\n    'api'         => 'https://api.facebook.com/v2.0/',\n    'api_video'   => 'https://api-video.facebook.com/',\n    'api_read'    => 'https://api-read.facebook.com/',\n    'graph'       => 'https://graph.facebook.com/v2.0/',\n    'graph_video' => 'https://graph-video.facebook.com/',\n    'www'         => 'https://www.facebook.com/v2.0/',\n  );\n. ",
    "janhartigan": "@AdwinTrave is that branch relatively safe to use at this point?\n. ",
    "pbscreativeben": "Hi, can anyone please clarify (in simple terms if possible) the best course of action for upgrading ready for the Facebook API v1 30th April cut off date? Thanks! Ben\n. Hello, \nI get this PHP warning on the new code inside Provider_Adapter:\nWarning: property_exists() expects parameter 2 to be string, object given in /mnt/host/boatshed/socialsignin/hybridauth/Hybrid/Provider_Adapter.php on line 168\nNot sure yet if this is relevant but currently its failing for me after Facebook returns the user back to my site with the message:\nFacebook Graph returned an error: Error validating verification code. Please make sure your redirect_uri is identical to the one you used in the OAuth dialog request\n. @annuh - it worked!! Thank you so much for responding and for writing the code in the first place! :-)\n. ",
    "bob-hinrichs": "\"All Facebook-enabled apps will be automaticaly[sic] upgraded to API v2.0 on April 30, 2015.\" This is the text next to a large red exclamation point, referring to my Hybridauth app.  \n\"This means that if your app is using v1.0 calls on May 1st, 2015, calls will return behavior from v2.0 of the API. This is true even if we've released newer versions of the API.\"\n\"On February 26th, the admins, developers and testers associated with one or more of your apps will be defaulted to v2.0. This change won't affect your public users until April 30, 2015.\"  This seems to mean that if you are testing with one of these special accounts, your app will behave as though it is after April 30.\nThe 'Next Steps\" indicate we should \" Use the latest iOS, Android, PHP and Javascript SDKs. \"  \nThe current version of the third party Facebook code in Hybridauth is not the latest, and the comments state Copyright 2011.\nI'd like to second pbscreativeben's question above. (Assume we have the correct version of PHP)\n. Thanks for your answers here, Shade.\n. ",
    "korobochkin": "Yep. And this provider don't support scope to redefine requested permissions.\n. Oh no. I forgot the $ sign at 109 line.\n. ",
    "Nohac": "The error disappeared after the update, thanks. \n. ~~I got this error again, but it doesn't happens that often. Still something to look into.~~\n. Update: I still get this error, even after the update. This is the response I get from google:\n{  \n   \"errors\":[  \n      {  \n         \"domain\":\"global\",\n         \"reason\":\"authError\",\n         \"message\":\"Invalid Credentials\",\n         \"locationType\":\"header\",\n         \"location\":\"Authorization\"\n      }\n   ],\n   \"code\":401,\n   \"message\":\"Invalid Credentials\"\n}\n. I made a workaround by by forcing it to log out in Providers/Google.php:\nphp\nif ( ! isset( $response->id ) || isset( $response->error ) ){\n    if ($response->error->reason == \"authError\")\n        $this->logout();\n    else\n        throw new Exception( \"User profile request failed! {$this->providerId} returned an invalid response.\", 6 );\n}\n. ",
    "mohit-varshney": "Just enable Google +APi from console.....\nthen it's working well\n. ",
    "c6burns": "@mohit-varshney no that is incorrect, this is not about having G+ API enabled or disabled. The problem wouldn't be intermittent or solvable as described if that is correct.\nThis problem still exists in the latest version. ",
    "vzani": "I found the solutions for this:\n//for Facebook\n$adapter = $hybridauth->authenticate( $provider, array(\"auth_type\" => \"rerequest\") );\n//for Google\n$adapter = $hybridauth->authenticate( $provider, array(\"approval_prompt\" => \"force\") );\nWould be great to have a generic attribute for that.\nThanks\n. ",
    "sabaohai": "I have the same situation as vzani, my fb web app need 2 permissions (public_profile and email). Email is an optional field but my app need it, in case user opt out for granting email permission, I need a way to rerequest the email permission in order for user to proceed.\nI tried to set force to true, but it only foce user to key in the password everytime. This is not to re-ask (or rerequesting) the permission.\nI tried vzani solution but didn't work, anyone can share the solution?\n//for Facebook\n $adapter = $hybridauth->authenticate( $provider, array(\"auth_type\" => \"rerequest\") );\nThanks!\n. ",
    "hunters14473": "Hi,\nsame issue here... Tried both force and auth_type as rerequest but it is not wiorking as for sabaohai .\nAny news?\nThank you\nBye\nMarcello\n. ",
    "mik3lon": "HybridAuth 2.3.0-dev. Yes, but we are waiting for answers..\nThank you.\n. One temporal solution I found is redirect to the main page when the Exception take place, so you can add a line like this:\nHybrid_Auth::redirect(  );\nin vendor/hybridauth/hybridauth/hybridauth/Hybrid/Auth.php (line:152).\nWhat do you think about it? \n. ",
    "SirLouen": "SocalNick the issue opened 15 days ago in ScnSocialAuth issue tracker: https://github.com/SocalNick/ScnSocialAuth/issues/168\n. Do you think is actually solvable this exception?\n. When you talk about Live, you mean OneDrive?\n. Do you have an URL where you are viewing this key/secret?\n. ",
    "guyzeug": "I'm having a similar issue.\nI'm using HybridAuth in conjunction with the Yii php framework, and when I configured Yii to store the sessions into the DB HybridAuth stopped working.\nI'm using the latest release of HybridAuth, but when I checked the current version in GitHub I found that now we can create our custom Hybrid_Storage class using the Hybrid_Auth_Interface interface.\nHave you tried this ?\n. Well done :) And thanks for the trick! As I couldn't get it to work I finally chose to use redis\n. @Eclat-Engg Sorry it worked for me straight away (but we're using the yii framework, which does some magic behind the scenes sometimes). Changing where the session was stored was transparent from our code perspective.\nGood luck!\n. ",
    "rohanabraham": "I haven't tried that. We wrote our own class to handle sessions and move it to the DB but we still couldn't get this to work.\n. ",
    "redorff": "We store session in database too.\nThe workaround we found is to force a \"session write\" directive into hybridauth before end of the php script.\nIn file hybridauth/Auth.php, on the blank line 368, you just need to write just before die():\nsession_write_close();\nEverything works fine for us with this! :)\n. ",
    "Eclat-Engg": "@guyzeug Hey hi , Just had a question , have you successfully implemented Hybridauth with Redis (being used for saving sessions). We have implemented Hybrid Auth on our Drupal based site . We are facing an issue , the issue we faced is that hybrid auth is not able to get the session values from Redis . If we implement it without Redis , all the social logins work fine for us . We debugged it , and found that when used with Redis the hybrid auth library for some reason is not able to fetch the session values. It would be great if you could just guide us , how you implemented it with redis. \n. ",
    "bboerendans": "Ah ok, clear. Maybe i'ts an good idea to mention this in the readme? Because I read this in the documentation which is linked in the readme.md\n. ",
    "mizterp": "The examples are NOT SECURE. So you'll need to do all that yourself :(\n. ",
    "orgaralf": "Thats what I guessed... I hope the average integrator out there gets that, too...\n. ",
    "ashfanahamed": "@abgit you right. OAuth providing that feature. So i'm moving to OAuth. because there is no enough time. Thanks Man!\n. ",
    "GarryMM": "OK thanks, HybridAuth Social Login module for drupal, will ask there.\n. ",
    "nkkollaw": "Oh.\nHe's gone..? :-)\n. Got it. Well awesome job on the project, keep up the good work.\n:-)\n. ",
    "jung35": "Seems like my sublime text deleted some spaces when I saved.\nhttps://github.com/jung3o/hybridauth/commit/32387c68dc01355be09c98ce2cda32d96a5d6ea#diff-1769a8d079ed7ab38adf389fe6f7a270L42\nIs where I edited\n. ",
    "mudcube": "This is an iOS8 issue, no fix is available until Apple upgrades their browser to support window.close:\nhttp://stackoverflow.com/questions/25804730/window-close-doesnt-work-on-ios-8-gm-seed\n. ",
    "yves-s": "Thanks @mudcube good to know. Probably we than just change the closing message.\n. Your problem @lanakramoleb seems not to be the same as mine. But yours is as the message says, you can't access or request data through a https side from a http one.\nSo you should get a ssl certificate.\nAfter getting a certificate you probably have to set the url in your FB App settings to https.\nI hope that helps if you didn't fix it already,\n. Where do I change the message of the closing window?\n. ",
    "artoodetoo": "\nWindows style \\r\\n changed to \\n Why?\n\nUnix-style end of line is common practice for web-scripts. Hybrydauth is not standalone product, but a component. As for me, it's enough to keep more standard.\n. ",
    "nomansbeauty": "Hi, I am talking about the WP plugins listed on your site here: http://hybridauth.sourceforge.net/plugins.html\nAre these not licensed as GPL by hrbridauth itself?\nThanks.\n. ",
    "timersys": "Try adding more scopes to the app you created in linkedin   r_network, r_fullprofile, r_emailaddress, w_messages (if needed)\nThe remove the app from your authorized account and start authorization again\n. @AdwinTrave sorry about that, to be honest I tried to pull just a commit but instead all my commits went out in the pull request.\nBasically it's the hybridauth version I use on http://wp.timersys.com/wordpress-social-invitations\nLong story short , fixes a bad declaration on linkedin class(42322ca) . And adds the ability to send DM in linkedin (e59d7b4)\nAll the other commits are old and already solved or nor related to hybridauth.\nI read about cherry pick pull request but to be honest haven't got time to try it\n. Yes I got lot of clients with the same problem. It seems that files names need to be changed for Yahoo\n. @TiMESPLiNTER I just tried using just my domain in there. Instead of the full callback url I entered only the domain and it worked. Could you confirm on your end?\n. ",
    "prostoroman": "Here is debug info:\nDEBUG -- 127.0.0.1 -- 2014-10-31T21:52:53+04:00 -- OAuth1Client::request(). dump request info:  -- a:26:{s:3:\"url\";s:328:\"https://api.twitter.com/oauth/request_token?oauth_callback=http%3A%2F%2Fdev.toppp.ru%2Fs%3Fhauth.done%3DTwitter&oauth_consumer_key=lfvbDJLFh6NxgECHpwWzsENDJ&oauth_nonce=9a5e086a780ccd0162d7bb2694e48bea&oauth_signature=BkzE2%2F6AjES4LgTJzcDZ79HpCh8%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1414777972&oauth_version=1.0\";s:12:\"content_type\";s:24:\"text/html; charset=utf-8\";s:9:\"http_code\";i:401;s:11:\"header_size\";i:1443;s:12:\"request_size\";i:449;s:8:\"filetime\";i:-1;s:17:\"ssl_verify_result\";i:20;s:14:\"redirect_count\";i:0;s:10:\"total_time\";d:0.8890000000000000124344978758017532527446746826171875;s:15:\"namelookup_time\";d:0;s:12:\"connect_time\";d:0.1559999999999999997779553950749686919152736663818359375;s:16:\"pretransfer_time\";d:0.48299999999999998490096686509787105023860931396484375;s:11:\"size_upload\";d:0;s:13:\"size_download\";d:44;s:14:\"speed_download\";d:49;s:12:\"speed_upload\";d:0;s:23:\"download_content_length\";d:44;s:21:\"upload_content_length\";d:0;s:18:\"starttransfer_time\";d:0.8890000000000000124344978758017532527446746826171875;s:13:\"redirect_time\";d:0;s:8:\"certinfo\";a:0:{}s:10:\"primary_ip\";s:14:\"199.16.156.104\";s:12:\"primary_port\";i:443;s:8:\"local_ip\";s:9:\"127.0.0.1\";s:10:\"local_port\";i:54167;s:12:\"redirect_url\";s:0:\"\";}\nDEBUG -- 127.0.0.1 -- 2014-10-31T21:52:53+04:00 -- OAuth1Client::request(). dump request result:  -- s:44:\"Failed to validate oauth signature and token\";\n. Thank you for your answer, miled.\nI already double checked this, the time is ok.\n. OMG! I found it!\nThere was error in config file, space character before secret string.\n. ",
    "AlbertoMrFz": "Hi, I have similar problemes, but i can't resolve them. I need your help. This is my config file:\n\"Twitter\" => array(\n                    \"enabled\" => true,\n                    \"keys\" => array(\"key\" => \"KEY\", \"secret\" => \"SECRET\"),\n                    \"includeEmail\" => false\n                ),\n. Hi @VladyslavKurmaz \nI change the \"Callback URL\" and it works!\nThank you\n. ",
    "Vikram-5845": "I have the same issue while writing a plugin for my website . Please help us out some one \n. Hello bro,\nActually My company's website runs on two different domain name. If you\nclick on any link it goes to a controller where it redirects to the plugins\nor function etc to another domain . SO I am installing my plugin in some\nother domain and calling it from another domain .\nSo what do you suggest I have to do I have spent 15 days :( on fixing this\nthing . But always stuck at this page saying \"Page cannot be displayed\".\nplease suggest me something\nThanks in advance\nOn Fri, Nov 7, 2014 at 1:19 PM, neotropic2023 notifications@github.com\nwrote:\n\nBe wary of the type of session you use. Like I started using a new session\nscript that stores into the DB and it caused this to show. Disabling my\nsession script allows this to work. So in my case, so it seems, is it can\nnot find/keep the session. Using Zebra Session PHP Class.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hybridauth/hybridauth/issues/336#issuecomment-62197290\n.\n\n\nvikram\n. ",
    "neotropic2023": "Be wary of the type of session you use. Like I started using a new session script that stores into the DB and it caused this to show. Disabling my session script allows this to work. So in my case, so it seems, is it can not find/keep the session. Using Zebra Session PHP Class.\n. ",
    "memare-ahvaz": "hi\nplz help me by fix You cannot access this page directly. errore\nmy script phpfox\nhttp://www.homdorong.ir/include/library/hybridauth/?hauth.start=Yahoo&hauth.time=1424268283\nmy host cpanel & litespeed webserver\n. ",
    "ankitce": "Try after adding @session_start(); statement at the top of your files.\n. ",
    "cirofeitosa": "Same problem here. \nPer day, 25 users have problem in login via Facebook or Google using Hybridauth.\nI've tried many ways to fix (including this previous), but not successful. \n. Hey @Mexiswow \nThanks for reply. \nI've tried your idea, but not works. Continues with the fatal error:\n\nUncaught Hybrid_Exception: You cannot access this page directly. \nin /var/www/html/_libs/hybridauth/Hybrid/Endpoint.php:211\nStack trace:\n0 /var/www/html/_libs/hybridauth/Hybrid/Endpoint.php(117): Hybrid_Endpoint->authInit()\n1 /var/www/html/_libs/hybridauth/Hybrid/Endpoint.php(51): Hybrid_Endpoint->processAuthStart()\n2 /var/www/html/_libs/hybridauth/Hybrid/Endpoint.php(72): Hybrid_Endpoint->__construct(Array)\n3 /var/www/html/_auth.php(25): require_once('/var/www/html/...')\n4 {main}\nNext Hybrid_Exception: Endpoint: Error while trying to init Hybrid_Auth: You cannot access this page directly. in /var/www/html/_libs/hybridauth/Hybrid/Endpoint.php:217\nStack trace:\n0 /var/www/html/_libs/hybridauth/Hybrid/Endpoint.php(117): Hybrid_Endpoint->authInit()\n1 /var/www/html/_libs/hybridauth/Hybrid/Endpoint.php(51): Hybrid_End in /var/www/html/_libs/hybridauth/Hybrid/Endpoint.php on line 217\n\nThis is very strange bug, because happens sometimes (like 10% per users in a day)\n. @Mexiswow \nHere the Storage.php file:\n```\n<?php\n/*\n * HybridAuth\n * http://hybridauth.sourceforge.net | http://github.com/hybridauth/hybridauth\n * (c) 2009-2015, HybridAuth authors | http://hybridauth.sourceforge.net/licenses.html \n /\nrequire_once realpath(dirname(FILE)) . \"/StorageInterface.php\";\n/*\n * HybridAuth storage manager\n /\nclass Hybrid_Storage implements Hybrid_Storage_Interface {\n/**\n * Constructor\n */\nfunction __construct() {\n    session_set_cookie_params(0, '/', '.mydomain.com');\n\n    if (!session_id()) {\n        if (!session_start()) {\n            throw new Exception(\"Hybridauth requires the use of 'session_start()' at the start of your script, which appears to be disabled.\", 1);\n        }\n    }\n\n    $this->config(\"php_session_id\", session_id());\n    $this->config(\"version\", Hybrid_Auth::$version);\n}\n\n/**\n * Saves a value in the config storage, or returns config if value is null\n *\n * @param string $key   Config name\n * @param string $value Config value\n * @return array|null\n */\npublic function config($key, $value = null) {\n    $key = strtolower($key);\n\n    if ($value) {\n        $_SESSION[\"HA::CONFIG\"][$key] = serialize($value);\n    } elseif (isset($_SESSION[\"HA::CONFIG\"][$key])) {\n        return unserialize($_SESSION[\"HA::CONFIG\"][$key]);\n    }\n\n    return null;\n}\n\n/**\n * Returns value from session storage\n *\n * @param string $key Key\n * @return string|null\n */\npublic function get($key) {\n    $key = strtolower($key);\n\n    if (isset($_SESSION[\"HA::STORE\"], $_SESSION[\"HA::STORE\"][$key])) {\n        return unserialize($_SESSION[\"HA::STORE\"][$key]);\n    }\n\n    return null;\n}\n\n/**\n * Saves a key value pair to the session storage\n *\n * @param string $key   Key\n * @param string $value Value\n * @return void\n */\npublic function set($key, $value) {\n    $key = strtolower($key);\n    $_SESSION[\"HA::STORE\"][$key] = serialize($value);\n}\n\n/**\n * Clear session storage\n * @return void\n */\nfunction clear() {\n    $_SESSION[\"HA::STORE\"] = array();\n}\n\n/**\n * Delete a specific key from session storage\n *\n * @param string $key Key\n * @return void\n */\nfunction delete($key) {\n    $key = strtolower($key);\n\n    if (isset($_SESSION[\"HA::STORE\"], $_SESSION[\"HA::STORE\"][$key])) {\n        $f = $_SESSION['HA::STORE'];\n        unset($f[$key]);\n        $_SESSION[\"HA::STORE\"] = $f;\n    }\n}\n\n/**\n * Delete all keys recursively from session storage\n *\n * @param string $key Key\n * @retun void\n */\nfunction deleteMatch($key) {\n    $key = strtolower($key);\n\n    if (isset($_SESSION[\"HA::STORE\"]) && count($_SESSION[\"HA::STORE\"])) {\n        $f = $_SESSION['HA::STORE'];\n        foreach ($f as $k => $v) {\n            if (strstr($k, $key)) {\n                unset($f[$k]);\n            }\n        }\n        $_SESSION[\"HA::STORE\"] = $f;\n    }\n}\n\n/**\n * Returns session storage as a serialized string\n * @return string|null\n */\nfunction getSessionData() {\n    if (isset($_SESSION[\"HA::STORE\"])) {\n        return serialize($_SESSION[\"HA::STORE\"]);\n    }\n    return null;\n}\n\n/**\n * Restores the session from serialized session data\n * \n * @param string $sessiondata Serialized session data\n * @return void\n */\nfunction restoreSessionData($sessiondata = null) {\n    $_SESSION[\"HA::STORE\"] = unserialize($sessiondata);\n}\n\n}\n```\n. Same problem here. \nPer day, 25 users have problem in login via Facebook or Google using Hybridauth.\nI've tried many ways to fix, but not successful. \nMore details:\nhttps://github.com/hybridauth/hybridauth/issues/336\n. ",
    "Mexiswow": "I had a same problem and this safe my life :)\nGo to Storage.php file in your Hybrid extension directory and add following line on top in the __construct() method\nsession_set_cookie_params(0, '/', '.yourdomain.com');\n. Hey @cirofeitosa \nI know this bug and i had a same problem.\nshow me Storage.php with included fix\n. ",
    "manifsp": "Hi to All,\nWe have implemented the hybridauth in our cakephp 3.0 web app. As usual we created FB App and configured with our site. Its working well on local and development environment. But we faced issue on our Production environment. We stuck with the below URL, application doesn't redirect to FB\nhttps://www.mydomin.com/home/socialch?hauth.start=Facebook&hauth.time=1470129476\nWhen the user login with facebook getting error like this..\nhttp://i.imgur.com/g2uuKyv.png\nPlease guide us to resolved this issue. Actually more than 50-60 usres login with FB in our site. But still now its not working on PROD environment. Thanks in advance..!\n. I have been trying to figure out why the sessions weren't persistent. I have started the session on my controller. Its working for me...\npublic function beforeFilter(Event $event) {\n        parent::beforeFilter($event);              \n        $this->Auth->allow(['index', 'socialLogin', 'socialch', 'contactFacilityAdmin', 'contactRentertoAdmin', 'contactus', 'indexnewsletter', 'newsletter', 'about']);                \n           if($this->request->params['action'] == 'socialch'){         \n                @session_id();\n                @session_start();\n                @session_name('CAKEPHP'); \n           }  \n    }\nIssue fixed now... :)\n. ",
    "hepaestus": "I am getting the same error when trying to integrate into CMS Made Simple. I have tried all the fixes stated here but I am still having what I think is a SESSION issue. It looks like when the Endpoint tries to re-establish the Auth config and it fails to find it in the Session.  Any ideas on how to address this?\nThanks,\nP.. I too am having session name/id issues. I am on v2.9.6 and trying to authenticate with Google. \nI think that the storage object cannot find the saved info because the session id/name changes during the call to google. \nAny Ideas?\nThanks,\nP.. Looks Like Line 95 of Google.php Overwrites the passed params.\nprotected function getAuthorizeUrl($parameters = [])\n    {\n        $parameters = ['access_type' => 'offline'];\n    return parent::getAuthorizeUrl($parameters);\n}\n\n. ",
    "miguelpragier": "Here I made two things at the same time, but I'm not sure which one solved. Check:\n- Changed THIS if ( isset($_REQUEST['hauth_start']) || isset($_REQUEST['hauth_done'])  ) { TO THIS if ( isset($_REQUEST['hauth_start']) || isset($_REQUEST['hauth_done']) || isset($_REQUEST['hauth.start']) || isset($_REQUEST['hauth.done']) ) {\n- Changed THIS ini_set('session.gc_probability', 1); TO THIS ini_set('session.gc_probability', 0);\nAnd now it's working.\nMy beliefs:\n- If it's about the garbage collector, it's not working as expected.\n- If it's about the $_REQUEST checks, it's a difference between versions I'm using in my servers.\nPlease, share if some of these fixes worked for your environment.. ",
    "luigi37": "Hi, Seeing the same issue and it's likely linked to the server as it happened since a change from my provider... any suggestion on what needs to be checked on the server?. ",
    "joao-gsneto": "Check the scopes of your App.\nFacebook and Google requires non-default scopes to get this data.\nFor google add to your scopes:\nhttps://www.googleapis.com/auth/contacts.readonly https://www.google.com/m8/feeds/\nAnd activate Contacts API on the App Developer Console\n. ",
    "BNDragon": "Hi  AdwinTrave,\nThanks for your reply,\nActually, I test it already, and what I did was log in with a user, in order to remove and store the data in variables, run the command $fb->logout(); I logout and then I tried to log in, and even went to faceook, used data that had already purchased the previous session, though, did the FB login with another user and the result was the same.\nI concluded that the problem is the cockies created by HybridAuth. What can I do to avoid creating cockies by the HybridAuth?\nThanks in advance,\nBN\n. ",
    "FractalizeR": "I've got some details. Request to Odnoklassniki occasionally returns the following content:\n<html><head><title>Apache_Tomcat/7_0_29_-_Error_report</title><style><!--H1_{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;}_H2_{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;}_H3_{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;}_BODY_{font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;}_B_{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;}_P_{font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A_{color_:_black;}A_name_{color_:_black;}HR_{color_:_#525D76;}--></style>_</head><body><h1>HTTP_Status_400_-_Provide_OAUTH_request_parameters!</h1><HR_size' => '\"1\" noshade=\"noshade\"><p><b>type</b> Status report</p><p><b>message</b> <u>Provide OAUTH request parameters!</u></p><p><b>description</b> <u>The request sent by the client was syntactically incorrect (Provide OAUTH request parameters!).</u></p><HR size=\"1\" noshade=\"noshade\"><h3>Apache Tomcat/7.0.29</h3></body></html>\n. request() method sets HTTP code:\nphp\n$this->http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);\nBut nobody actually checks it.\n. Welcome ;)\n. @StorytellerCZ You mean response contents, right? Because nested exception should be propagated in all cases, I believe. It eases problem discovery on production servers using tools like Kibana.\n. ",
    "haimat": "Update: After including Logger.php and Exception.php in index.php, the Apache logs shows the following error:\n```\nPHP Fatal error:  Uncaught exception 'Hybrid_Exception' with message 'Oophs. Error!' in /var/www/main-site/lib/hybridauth/Hybrid/Endpoint.php:212\nStack trace:\n0 /var/www/main-site/lib/hybridauth/Hybrid/Endpoint.php(114): Hybrid_Endpoint::authInit()\n1 /var/www/main-site/lib/hybridauth/Hybrid/Endpoint.php(52): Hybrid_Endpoint::processAuthStart()\n2 /var/www/main-site/lib/hybridauth/index.php(17): Hybrid_Endpoint::process()\n```\n. Sorry, my fault.\nWrong server configuration.\n. Great, thank you very much!\n. ",
    "Etdashou": "Man, what was your fix??\nI have the exact same error...\n. ",
    "charlesmudy": "@haimat what is the solution you used? I'm getting the same error using Codeigniter. Unfortunately, @j05u3's suggestion is not a solution for me as I have done that already.\n. ",
    "onuraktas": "Same error, buy only for Chrome on osx\n. I'm using autoload features of f3 framework. AUTOLOAD=app/;app/hybridauth/Hybrid/\nAlso it is working on other browsers. \n. Yes i have problem only in chrome and mobile browsers on ios\ncan it be because of autoloader ?\n. ",
    "onetarek": "I had same problem. \nResolved by including Logger.php and Exception.php at top of other file in /hybridauth/index.php.\nIdea came from @haimat 's comment\n//My codes bellow.\nrequire_once( \"Hybrid/Logger.php\" );\nrequire_once( \"Hybrid/Exception.php\" );\nrequire_once( \"Hybrid/Auth.php\" );\nrequire_once( \"Hybrid/Endpoint.php\" );\n. I thought my above code worked but I see that is not working , \nFinally I found the main cause of the issue and solution, \nThe error happened when you call static method of Hybrid_Auth class directly with an object, \nFor example you may call this Hybrid_Auth::getAdapter( $provider ); in a function when the main class Hybrid_Auth have not been instantiate any where your script yet. \nCause: The class Hybrid_Auth loads all require other class file in its __consruct() , and construct() fire only when you create an object of the class. Now when you are calling Hybrid_Auth::getAdapter(); , this method calls Logger class that is not included yet in your script. \nProbably you are trying following codes and getting error\nif( ! class_exists( 'Hybrid_Auth', false ) )\n        {\nrequire_once \"/hybridauth/Hybrid/Auth.php\";\n        }   \n        $adapter = Hybrid_Auth::getAdapter( $provider );\nHere you included this class file if not class exists , but this class is not instantiated. \nSo my solution is bellow:\nif( ! class_exists( 'Hybrid_Auth', false ) )\n        {       \n            require_once \"/hybridauth/Hybrid/Auth.php\";\n            $config = get_my_hybrid_config($provider);\n            $hybridauth = new Hybrid_Auth( $config );\n        }   \n        $adapter = Hybrid_Auth::getAdapter( $provider );\n. ",
    "rafaelxavierborges": "The comment made by @j05u3 helped me a lot, problem solved, URL was 'wrong': with 'www' and without 'www'. I removed the 'www' in '/path/to/hybridauth/hybridauth/config.php'  ( modified base_url ) and worked pretty well.. ",
    "VladyslavKurmaz": "I faced with the same issue, so will try to resolve it\n. Yes, You are right, Thanks!\nBy default, new Paypal application doesn't configure to provide detailed personal info\n+ Log In with PayPal\n   + Basic authentication\n   -  Personal Information\n   -  Address Information\n   -  Account Information\nand default Hybrid_Providers_Paypal scope value requires more info\npublic $scope = \"profile email address phone https://uri.paypal.com/services/paypalattributes\";\nThis misconfiguration causes an issue\n. Ok. I will do it.\n. I just moved Dropbox provider to the right folder\n. > And your Pull request can benefit from making it a single commit by sqaushing all those four commits >into one.\nThanks. I will add rebase step before further pull requests\n\nIDProvider_info_Dropbox.html gives a 404.\n\nCould you please advice, how can I create this page and add to the http://hybridauth.sourceforge.net/userguide\nI checked svn access to the sourceforge hosted projects\nhttp://sourceforge.net/p/forge/documentation/svn/\nbut with no luck.\n. Proposal was created ~2 years ago.\nI think I know what I will do during this weekend )\n. @FabianBeiner If you don't mind, I can copy XING.php to the additional-providers area and prepare pull request.\nBut in this case, I will steal your contribution )\n. Ok. Make sure that XING provider is in additional-providers area before pull request.\n. @myselfgaurav \nTwitter API endpoint you need is\nhttps://dev.twitter.com/rest/reference/get/followers/list\nI put some references about \"how to use providers api call\" here \n'[Twitter] Get statistics #440'\nand\n'Hope you guys add Youtube and Flickr Provider #424' issues\n. @trungnnh You can already use Youtube API features with current Google OAuth authentication.\n1. Enable Youtube API for you app using Google Developers Console\nhttps://developers.google.com/youtube/v3/getting-started\n2. Specify additional Youtube scope inside hybridauth config\n// youtube scope: https://www.googleapis.com/auth/youtube\n    $config =\n        array(\n            \"base_url\" => $base.'libs/'.$hybridauthVersion.'/hybridauth/', \n            \"providers\" => array ( \n                \"Google\" => array ( \n                    \"scope\" => \"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read https://www.google.com/m8/feeds/ https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/youtube\"\n                )\n            )\n        );\n1. Call Youtube API\n$adapter = $hybridauth->authenticate( \"Google\" );\n$subs = $adapter->api()->get( \"https://www.googleapis.com/youtube/v3/channels\", array( \"part\" => \"contentDetails\", \"mine\" => \"true\" ) );\necho json_encode( $subs );\nMore samples are here\nhttps://developers.google.com/youtube/v3/code_samples/php\n. @bahman2216 Have you updated scope for Google provider with Youtube auth\n// youtube scope: https://www.googleapis.com/auth/youtube\n?\nSee my comment above about.\n. @bahman2216\nWhy do you need separate ids for google/youtube? Is this from highlevel requirements?\nGoogle uses single oauth2 entry point for all services.\n...\nI just checked code from my comment above and it still works fine.\n...\nOnly one thing I can suggest without code snapshot: check one more time scope variable.\nHere is what I'm using\n\"scope\" => \"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read https://www.google.com/m8/feeds/ https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/youtube\"\n. @XinYiMan Please look at my answers for \n'[Twitter] Get statistics #440'\nand\n'Hope you guys add Youtube and Flickr Provider #424' issues\nThe workflow is the same for any provider:\nonce you are successfully authenticated with one or more providers you can make any additional api calls. Just check Twitter and/or Facebook api and find endpoint you need.\nAPI calls with hybridauth is really easy.\nHope this help\n. Looks like a typo in \nhttp://code.google.com/p/simple-linkedinphp/\n$return_data['linkedin']        = curl_exec($handle);\n      if( $return_data['linkedin'] === FALSE ) {\n          Hybrid_Logger::error( \"LinkedIn::fetch(). curl_exec error: \", curl_error($ch) );\n      }\n$ch should be $handle\nLatest simple-linkedinphp version (3.2.0) was published in Nov 2011.\n@AdwinTrave Should we fix our instance of simple-linkedinphp library?\nI'm afraid we will not receive new version of simple-linkedinphp soon.\n. Additional error check was added at Feb 15, 2014\npull request #98 from mindon/master \u2026\n53c1ba645adad670b9ed6d41e5534692cb503c5c\nif( $return_data['linkedin'] === FALSE ) {\n          Hybrid_Logger::error( \"LinkedIn::fetch(). curl_exec error: \", curl_error($ch) );\n      }\nIt's clear now, I will fix it.\n. @Kevonia after successful authentication with Hybridauth, you can make additional Twitter api call.\n$adapter = $hybridAuth->getAdapter( \"Twitter\" );  \n$adapter->api()->api( \"statuses/retweets/\".$tweetId );\nPlease check link below, in case you still need number of retweets\nhttps://dev.twitter.com/rest/reference/get/statuses/retweets/%3Aid\n. Sorry, my bad\n$adapter->api->\nshould be\n$adapter->api()->\n$adapter = $hybridAuth->getAdapter( \"Twitter\" );  \n$adapter->api()->api( \"statuses/retweets/\".$tweetId );\n. closed #438\n. Hi Team.\nI have faced with the same issue.\nIn my case solution was to fill all required fields at the app settings area.\nI didn't enter valid https url to the app's logo \"Application Logo URL:Required*\"\nPlease check all fields, then authentication should work.\nP.S. I'm using hybridauth-2.4.2-dev\n. I made screenshots from my app settings.\nPlease check it and compare with yours.\nhttp://i.imgur.com/OYxK7oE.png\nWhat I can suggest more, is that your site/service have to be https based only.\nI marked corresponding edit boxes with red lines.\nHope, this will help.\n. @christ0ph3r \nAs far, as I understood, LinkedIn made the same step as a Facebook - fully close public access to the connections/contacts API\nAccording to this: https://developer.linkedin.com/support/developer-program-transition\n\nIf your application is currently using any other API services (e.g. Connections, Groups, People\nSearch, Invitation, Job Search, etc.) you will have to apply to become a member of a relevant Partner \nProgram that provides the necessary API access to continue to leverage any of the endpoints that\nare not listed above.\n\nso, we need to join some *Partner Program * to continue be able use this feature.\n@AdwinTrave looks like we can close this issue.\n. @cirdev \nLooks like Hybrydauth API is ok and we need to check app settings & hybridauth config.\nWhat I would suggest as check-list:\n- update to the latest stable hybridauth version (i'm using hybridauth-2.4.2-dev)\n- fill all edit-boxes at the linkedin app settings (see my screenshot above), https link to app logo have to be accessible, not only filled.\n- here is part of my config\n\n\"LinkedIn\" => array ( \n               \"enabled\" => true,\n               \"keys\"    => ...,\n           ),\nas you can see, there are no special configurations\n- register one more test linkedin app and test your app using this temp one.\n- delete all local session files saved by hybridauth\n. @christ0ph3r \nI found only two fields at r_basicprofile, which are related to the information about contacts: num-connections and num-connections-capped.\nI tested it on my linkedin profile and received capped number of my connections.\n<num-connections>500</num-connections>\n<num-connections-capped>true</num-connections-capped>\n\nAnd this is only info we can get about connections with r_basicprofile authorization permission.\n. @nahuelsgk you don't have to copy any source codes to use additional providers. You need just properly configure provider inside config.\nPlease, check part of my configuration script\n\"Github\" => array (\n                \"enabled\" => true,\n                \"keys\"    => array(), \n                \"wrapper\" => array(\n                    \"class\" => \"Hybrid_Providers_GitHub\",\n                    \"path\" => $_SERVER['DOCUMENT_ROOT'].'/libs/hybridauth/additional-providers/hybridauth-github/Providers/GitHub.php'\n                )\n            ),\n. A few months ago, Linkedin has changed policy for external apps.\nSo, from now, you can access to a very small part of user's information.\nhttps://developer.linkedin.com/docs/fields/basic-profile\n\nTry to test Linkedin API via this service to identify set of information you can get\nhttps://apigee.com/console/linkedin\n\nThe maximum what you can receive is last user activity: current-share\nhttps://api.linkedin.com/v1/people/~:(id,num-connections,picture-url,email-address,current-share)?format=json\n. It will be OAuth 2.0 based provider\nhttps://api.stackexchange.com/docs/authentication\n. @Shade- I found two issues with StackExchange provider (from my perspective)\n- Provider's class should be placed in\n  /hybridauth/additional-providers/hybridauth-stackexchange\\Providers\\StackExchange.php\n  instead of\n  /hybridauth/additional-providers\n  like any other additional providers\n- Provider's class file name should have php extension StackExchange.php, file StackExchange has no extension now\n. @leomalaveraG \nwhere do you expect to see \"likes\"? in profile?\nor you use custom api call $this->api->api('/me/likes');?\n. @kumardippu can you provide please more info:\n- which version of hybridauth are you using?\n- is hybridauth logging enables? have you checked the log?\n  ...\n  From first look: facebook provider getUserProfile() generate an exception.\n  Could you share the hybridauth log?\n. @hardikoc you can use something like this\n$id = 'Facebook';\n$hybridAuth = new Hybrid_Auth( $hybridConfig );\nif ( $hybridAuth->isConnectedWith( $id ) ) {\n $adapter = $hybridAuth->getAdapter( $id );  \n} else {\n  $adapter = $hybridAuth->authenticate( $id );\n}\nif ( $adapter->isUserConnected() ) {\n  $user_profile = $adapter->getUserProfile();\n  $region = $user_profile->region;\n}\n. @AlbertoMrFz \nAre you using latest stable version of library?\nDid twitter auth work before?\nWhat is the value for \"Callback URL\" at the twitter app configuration page?\n. @githubitsme \n\nAnd yes I moved that instagram.php From third party provider to Providers\n\nPlease move it back )\n...\nUse next code to configure Instagram provider\n```\n  $hybridauthLib = $_SERVER['DOCUMENT_ROOT'] . '/libs/hybridauth';\n  $hybridConfig  = array(\n    \"base_url\" => $_SERVER['REQUEST_SCHEME'].\"://\".$_SERVER['HTTP_HOST'].\"/libs/hybridauth/hybridauth/\",\n    \"providers\" => array(\n      \"Instagram\" => array(\n        \"enabled\" => true,\n        \"keys\" => array(\n          \"id\" => \"...\",\n          \"secret\" => \"..\"\n        ),\n        \"wrapper\" => array(\n          \"class\" => \"Hybrid_Providers_Instagram\",\n          \"path\" => $hybridauthLib . '/additional-providers/hybridauth-instagram/Providers/Instagram.php'\n        )\n      ),\n    \"debug_mode\" => false,\n    \"debug_file\" => \"hybridauth.log\"\n  );\n```\n. @githubitsme\nAs you can see, system just couldn't locate Instagram.php\nAs I said, move back Instagram.php to the additional-providers/hybridauth-instagram/Providers/,\nuse my code as an example and verify paths\n. @githubitsme \nLooks like you forgot to update \"wrapper\" property, \"path\" should point to the correct Instagram.php location\n\"wrapper\" => array(\n          \"class\" => \"Hybrid_Providers_Instagram\",\n          \"path\" => $hybridauthLib .'/additional-providers/hybridauth-instagram/Providers/Instagram.php'\n        )\nand $hybridauthLib should define the library root\n$hybridauthLib = $_SERVER['DOCUMENT_ROOT'] . '/hybridauth-2.6.0';\n. @githubitsme \nFirst of all, let's try to call instagram api this way. it's common practice for hybridauth\nif($user_profile && isset($user_profile->identifier)) {\n  $data = json_decode($authProvider->api()->get('users/self');\n  echo \"Followers:\".$data->data->counts->followed_by;\n}\n. @githubitsme \nAgain, you've changed structure of the folders, $hybridauthLib should point to the library's root\n$hybridauthLib = $_SERVER['DOCUMENT_ROOT'].'/livelor/login/hybridauth';\n. @githubitsme \nYour first code snapshot\n$hybridauthLib = $_SERVER['DOCUMENT_ROOT'] . '/hybridauth-2.6.0/hybridauth';\nThe second one is\n$hybridauthLib = $_SERVER['DOCUMENT_ROOT'].'/livelor/login/hybridauth/hybridauth';\nAnyway, please verify that combination of\n$hybridauthLib\nand\n$hybridConfig[\"providers\"][\"Instagram\"][\"wrapper\"][\"path\"]\nconstruct a valid path\n. @githubitsme \nYour $hybridauthLib is\n$hybridauthLib = $_SERVER['DOCUMENT_ROOT'] . '/livelor/login/hybridauth/hybridauth';\nIf you concatenate it with $hybridConfig[\"providers\"][\"Instagram\"][\"wrapper\"][\"path\"]\n$hybridauthLib . '/additional-providers/hybridauth-instagram/Providers/Instagram.php'\nyou will receive\n$_SERVER['DOCUMENT_ROOT'] . '/livelor/login/hybridauth/hybridauth'.'/additional-providers/hybridauth-instagram/Providers/Instagram.php'\nIt's invalid path.\n$hybridauthLib should be\n$_SERVER['DOCUMENT_ROOT'] . '/livelor/login/hybridauth'\nI already mentioned it\nPlease check misconfigurations before post questions.\nThanks.\n. ",
    "mng4": "I have resolved it. You get this error when you Un-select a few options in Paypal API. So, select all and save them and it will be resolved\n. I'm glad that I was able to happy to help you. :) And you are always \nwelcome.\nOn 12/30/2014 08:25 PM, Vladyslav Kurmaz wrote:\n\nYes, You are right, Thanks!\nBy default, new Paypal application doesn't configure to provide \ndetailed personal info\n|+ Log In with PayPal\n    + Basic authentication\n    -  Personal Information\n    -  Address Information\n    -  Account Information\n|\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/hybridauth/hybridauth/issues/355#issuecomment-68362388.\n. @Slurpee Yes, its still working. At least it takes me to login page of PayPal. Did not sign in though.\nIn drupal website if you try to configure Google OAuth you get the callback url. It's almost same for every website. \nJust remember the first letter must be in cap. ie =Paypal instead of =paypal/ PayPal.\nAlso make sure you have provider and thirdparty file in /sites/all/libraries/hybridauth/Hybrid/.\nIn drupal hybrid config page Application ID and Application consumer key would be same.\nCheck all the option you have in Paypal sandbox for information to supply your website even if you do not require.\nAnd one more thing, you cannot test it using localhost. You must have url.\nHope @Slurpee it helps.. @Slurpee I just tested now, I'm facing the same error. I think we should reopen the bug report for developer to verify.. Re-Opening the issue for re-occurrence. . HI, Chris,\n\nHere's the link https://github.com/FedOAuth/FedOAuth\nPlease let me know if you need anything else.\nOn 23 Dec 2015 12:48 pm, at 12:48 pm, Chris notifications@github.com wrote:\n\nMay help linking to the API\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/hybridauth/hybridauth/issues/591#issuecomment-166819622\n. Hi, I'm facing the same issue with Windows live. I'm not familiar with drupal code system. Would you mind telling me which files do I need to edit?\nThanks.. \n",
    "Slurpee": "@mng4 I've been trying to get this to work in Drupal 7 without any luck. Is this still working for you? How did you know what the callback URL should be? In Paypal, which options are you selecting in \"Login with PayPal\", all of the options or just some? No matter which combination of settings I select, I still see same error \"Relying Party Validation error: scope in the request does not match any of the registered clients. Please check the request.\".. @mng4 I've moved forward a bit, but still having issues. First issue is that I needed to add Paypal.php file into additional providers. Now I can click Paypal to authenticate anonymous or authenticated users in Drupal with a Paypal login screen.  I have a sandbox account at Paypal and the credentials work.  The problem now is being redirected back to Drupal to finish authentication.  Error message below.  Paypal seems to be working as expected, but nothing changes on the Drupal side. \nExample, an anonymous user clicks \"login with Paypal\", Paypal login screen appears, Paypal credentials work, then redirected back to proper Drupal URL, but user sees error\" There was an error processing your request.\" and is not authenticated.  Drupal log message for this is below:\n_USER   Anonymous (not verified)\nLOCATION    http://example.com/hybridauth/window/Paypal?destination=node&destination_error=node\nREFERRER    \nMESSAGE Exception: User profile request failed! Paypal returned an invalid response. in Hybrid_Providers_Paypal->getUserProfile() (line 106 of /home/pp/htdocs/sites/all/libraries/hybridauth/hybridauth/Hybrid/Providers/Paypal.php)._. @mng4 - I'm able to get a bit further by changing line 105 in htdocs/sites/all/libraries/hybridauth/hybridauth/Hybrid/Providers/Paypal.php to \n            if ( isset( $response->message ) ){\n\nAt this point, the auth tokens are being in stored in Drupal, but the workflow is a bit confused. Example, if you create a new account with Hybridauth/Paypal in Drupal, the account is created, but the user is not logged in.  It seems majority of this code is here, but it is not very well documented.. ",
    "vladdancer": "I've just tested. Work as designed!\nThanks.\n. ",
    "soratidus999": "Working with someone else in the eve community i found his plugin to work https://github.com/fuzzysteve/WordpressSocialLogin-EveSSO\nThe user profile API from EVE Online does not contain an email address and hence crashes out the joomla user creation\nwork continues\n. Welp this is atrocious, but it makes it work....\n$this->user->profile->email  = \"dummy@dummy.com\";\nWork continues to work out how the joomla implementation prompts for username and password, then make it also prompt for email. Work is essentially complete from the HybridAuth side. \nEVE Online has no plans to implement an email in their API anytime soon and this effectively limits its use for some CMS, unless coded to prompt for email.\n. ",
    "hakre": "http://hybridauth.sourceforge.net/userguide/IDProvider_info_Dropbox.html gives a 404.\nAnd your Pull request can benefit from making it a single commit by sqaushing all those four commits into one. http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html\nAnd instead of merging the remote master, rebase your development changes on top of it.\nHope this helps a little.\n. ",
    "ragulka": "The same seems to apply to the following Providers as well:\n- HumanitarianId\n- LastFM\n- Vimeo\n- Yammer\n. It would be even better if providers could parse the error response and return the error message, since the error property may be differently named across providers.\n. It should also be possible by following the instructions here: http://hybridauth.sourceforge.net/userguide/tuts/specific-provider-wrapper.html. However, this does not work for all providers, as described in #371\n. @StorytellerCZ thanks! where would I go to add documentation? there seems to be no docs in the repo itself.\n. @StorytellerCZ the docs are ready in https://github.com/hybridauth/hybridauth/pull/680 - can you take a look and tell me if that'll work?\n. ",
    "nywuctuk": "Sure, its my 1st \"PR\" actually.\nI have some issue (with HOAUTH - hybridauth for Yii framework) When i fix this flaw, I 1 time could see email from Vkontakte. After delete acc from my site other connections didnt give me any email more. And i dont know is it real to get city from Vk? May be there is a bad method that use $scope? Facebook do all good for example.\nDo you have some ideas dude?\nhttps://github.com/SleepWalker/hoauth/issues/57\n. ",
    "afbora": "+1 I got the same error on v2.9.x. ",
    "Remo": "you mean you get to see the PHP code in your browser? Are using PHP short tags?\n. In short\n- I don't see why we should enforce a query string\n- We should send an authentication header\n- There should be a way to specify the content-type of the request\nThe long version\nThe change made in this PR https://github.com/hybridauth/hybridauth/issues/296 definitely causes my problem. Some Google APIs require you to send JSON data and nothing form encoded. It will report This API does not support parsing form-encoded input. \nIn order to get it working, we also need to send an authentication header (https://github.com/hybridauth/hybridauth/issues/390), send the correct content-type in the cURL request Content-type: application/json and also call json_encode.\nI also don't agree that we must send a string, to documentation http://php.net//manual/en/function.curl-setopt.php states clearly\n\nThis parameter can either be passed as a urlencoded string like 'para1=val1&para2=val2&...' or as an array with the field name as key and field data as value.\n\nNext\n- I'd be happy to create a PR for all of that, I just wonder what you guys think\n- @dewa1t do you remember why you enforced the query string? Can't we simply forward the string and let the caller do the magic?\n. I did run quite some tests with the google API and it doesn't seem to cause any problems with the twitter login process, but obviously I haven't tested it with every provider there is.\nMaybe make an option to enable it to be on the safe side?\n. @Shade- do you know what providers require that header? It's a bit time consuming to test everyone /-: So far it's google and wordpress.. Adding a parameter to the OAuth class would at least have the benefit that one could enable it for any provider. Would be nice if it was automatically enabled where required, just not sure how to do that..\n. it depends on the API call you're trying to make with Google. Reading works, but POST calls don't work, more over here https://github.com/hybridauth/hybridauth/issues/389\n. Yes, but I'd like to have that code in place by default so others don't need to know about it. Shall we add it to google and wordpress and leave the rest as it is till someone reports a problem?\n. okay, thanks for the feedback! I'm closing this, this PR https://github.com/hybridauth/hybridauth/pull/406 adds the Google header which was required for me to get things working\n. I thought about that, but it's not that easy. If I undo that change, we'll break sites that depend on that code. Once we undo it, everyone who depends on it will have to build the query string before calling hybridauth.. Adding an option to disable the auto query string building is ugly too, but it wouldn't be a breaking change.. Any ideas?\n. Okay I see.. This OAuth stuff is confusing me more and more, now I have to use Authorization..\n. ",
    "systemedia": "and I get  \"Undefined property: Hybrid_Providers_Google::$access_token\" ... I changed $this->access_token to $this->api_>access_token , the errors disappears , but now I am getting : This webpage has a redirect loop \" error \n. ",
    "kerphi": "I'm not sure but I think the warning I got when trying to auth with the hybridauth facebook provider is related to this issue. Here is the screenshot showing the warning:\n\n. ",
    "Cyril-Beeckman": "+1 same error\n. ",
    "OddworldCrash": "Yes, can confirm the same problem. I'm using hybrid auth based plugins for Durpal and Joomla.\nDid Steam now completely shut off openid?\nDoes someone know, what has changed with their new API?\n. ",
    "jacob1237": "Hi guys!\nI've created a pull request https://github.com/hybridauth/hybridauth/pull/420 to fix this issue.\nBut I need to say that the Steam provider is already updated in 3.0.0 version of HybridAuth, so you can try to use 3.0.0-remake branch, or just copy/paste the Steam.php file from my commit dec982a73e8610af69a7358cea1b9244b4b8038e.\nBTW, keep in mind that you will need the Steam API key to use this functionality.\n. I've tested only Steam API method, because I'm using it on my current project.\nI can try to test the legacy method later, but maybe just remove it permanently?\nThe legacy method don't give any needed data about the user and sometimes returns HTTP 503 error (according to Steam developer docs and my experience with this).\n. ",
    "FabianBeiner": "To be honest, I totally forgot about that. ;) I added it to my todo list and will send a request soon.\n. The XING public API shut down. \ud83d\ude1e So there won't be an update coming.. ",
    "gsomoza": "This is not completely ready yet, still need to actually run it and make sure it works.\n. Alright, tested it and it works! Let me know if you need anything else in order to merge this.\n. Ok - when is this scheduled to be released? Just to make sure I add the docs before that.\n. ",
    "teripak": "I am using Hybridauth to allow sns login to our Drupal site, but there seems no wechat provider. Are there any milestone for wechat?\n. ",
    "frangeris": "I was forced to change the structure of the method  fetchUserEmail manually  from this:\nphp\n    /**\n    *\n    */\n    protected function fetchUserEmail( $userProfile, $data )\n    {\n        foreach( $data->filter( 'emails' )->all() as $email )\n        {\n            if( 'account' == $email->get( 'type' ) )\n            {\n                $userProfile->email = $email->get( 'value' );\n                break;\n            }\n        }\n        return $userProfile;\n    }\nto this:\n``` php\n    /\n\n/\n    protected function fetchUserEmail( $userProfile, $data )\n    {\n        foreach( $data->get( 'emails' ) as $email )\n        {\n            if( 'account' == $email->type )\n            {\n                $userProfile->email = $email->value;\n            break;\n        }\n    }\n\n    return $userProfile;\n}\n\n```\nOnly in that way I could get the email...\n. Ups, \nMy bad, discard it, is not correct from master hybridauth:master to frangeris:3.0.0-Remake\n. Same issue here using v2.5.0 for Live... \nKeep getting this: \nerror_description=The+provided+value+for+the+input+parameter+'redirect_uri'+is+not+valid.\n. ",
    "NestorZal": "No, I not change anything, and I'm using the same domain. The only thing I changed is the server IP.\n. I'm using facebook, google, linkedin and twitter, for all happens the same. I'm using wordpress and I created my own plugin for login into my site using hybridauth.\n. I resolved the problem, thanks anyway for everything. Is a server problem, files permission.\n. ",
    "hellboy81": "How can you resolved this problem?\n. I have the same problem. \nSee also: https://github.com/thephpleague/oauth2-google/issues/38. How can you resolved this problem?\n. I have set at developers.facebook.com in Products ->  Facebook Login -> Client OAuth Settings -> Valid OAuth redirect URIs as follows:\nhttp://dev.mysite.com/.../vendor/hybridauth/hybridauth/hybridauth/index.php?hauth_done=Facebook\nShould I also provide redirect_uri as Facebook provider config  parameter? . Fix this ...ing bug! why should I downgrade to 2.8 ?. Can your fix be applied to version 2.8.2 ?. Which hybridauth version should I use at current moment  to allow Facebook auth?\nIs there real-world samples with authorize callback URL?. which Facebook API version should I use with the latest current stable hybridauth release?\nOnly 2.8? \nWhich latest hybridauth version should use together with Facebook API version 2.8?\nIs Facebook API version 2.2 deprecated?\nShould I not use it together with current  ~~stable~~ dev version of hybridauth?\n. should I still use 2.7.0?. Jan Dvorak @StorytellerCZ. OAuth 2 Client from ~~LXG~~ The League of Extraordinary Packages should be used instead. any feedback?. you should rewrite all the things using https://github.com/thephpleague/oauth2-client. I have the same problem\n```json\n{\"web\":\n    {\"client_id\":\"....apps.googleusercontent.com\",\n    \"project_id\":\"my-oauth-project-id\",\n    \"auth_uri\":\"https://accounts.google.com/o/oauth2/auth\",\n    \"token_uri\":\"https://accounts.google.com/o/oauth2/token\",\n    \"auth_provider_x509_cert_url\":\"https://www.googleapis.com/oauth2/v1/certs\",\n    \"client_secret\":\"myTopClientSecret\",\n    \"redirect_uris\":[\"https://www.my.net/index.php\",\"http://www.my.net/index.php\"],\n    \"javascript_origins\":[\"https://www.my.net\"]\n    }\n   }\n````\nSee also: https://github.com/thephpleague/oauth2-google/issues/38\n. @ddsky It was issue with additional parameters for handling redirect in done \"callback\".\nGoogle requires all should be encoded only in standard state param (which is used to prevent CSRF attacks) .\nI am not using HA, I am using oauth2-client. Therefore I am not sure this is the same issue.. ",
    "josiahgoff": "I have the same issue. I check my whole project and I'm not redeclaring this class anywhere. Only thing that changed is I updated to hybridauth 2.4. I'm not doing anything special with it, just connecting to Twitter.\n. Yes, the patch fixed it for me. Ready for 2.4.1. Thanks, guys!\n. 2.4.1 fixes it for me. Thanks!\n. ",
    "chadwick37": "This didn't fix it for me. No problems when I roll back to 2.3.0 but 2.4.0 gives this error:\nPHP Fatal error:  Cannot redeclare class OAuthConsumer in /var/www/vendor/hybridauth/hybridauth/hybridauth/Hybrid/thirdparty/OAuth/OAuth.php on line 15\n. ",
    "albanx": "The best I have found so far seems to be hello.js https://github.com/MrSwitch/hello.js\n. ",
    "dcnl1980": "Just change this in the code, but now we are unable to fetch the users. The last time it was working, since the update not.\n. Super and thanks for your fix. I will wait for the pull request to get accepted. Found also some problems with Google+, but i will make some other thread. \n. ",
    "unglud": "My first pull request ever!\n. ",
    "Kevonia": "Call to a member function api() on a non-object i get this error.\u00a0\nfaber est quisque fortunae suae\u00a0 (every man is architect of his own fortune)\u00a0\n(while there is life, there is hope)\nKevonia A. Tomlinson,Pending Bachelor of Science in Computing\nUniversity of Technology, Jamaica,\nTel:4898237, 3171074\n      From: Vladyslav Kurmaz notifications@github.com\n To: hybridauth/hybridauth hybridauth@noreply.github.com \nCc: Kevonia Kevonia_Tomlinson@yahoo.com \n Sent: Sunday, April 12, 2015 10:57 AM\n Subject: Re: [hybridauth] [Twitter] Get statistics (#440)\n@Kevonia after successful authentication with Hybridauth, you can make additional Twitter api call.$adapter = $hybridAuth->getAdapter( \"Twitter\" );\n$adapter->api->api( \"statuses/retweets/\".$tweetId );\nPlease check link below, in case you still need number of retweets\nhttps://dev.twitter.com/rest/reference/get/statuses/retweets/%3Aid\u2014\nReply to this email directly or view it on GitHub. \n. Hi hybridauth/hybridaut,\nI'd like to add you to my professional network on LinkedIn.\n- kevonia\nConfirm that you know kevonia: https://www.linkedin.com/e/v2?e=0-iibxxaka-zp&t=ssuw&tracking=eml-guest-invite-cta&ek=invite_guest&sharedKey=uLoRkh_U&invitationId=6083666506242146305\nYou received an invitation to connect. LinkedIn will use your email address to make suggestions to our members in features like People You May Know. Unsubscribe here: https://www.linkedin.com/e/v2?e=0-iibxxaka-zp&t=lun&midToken=AQFmrFVhGEd36Q&ek=invite_guest&loid=AQHheYLZqlguJgAAAVG2GjH7uuR-NNs7MnkCGUrEj8YyGGH-InzO875RtcgJN2DMyVL6LeCHL4PqCd1R786FXtqDVsyr-K7H-IVpDyzP8PGQBtX5u1BdPwDFHWlbk8TWNwaUENATgCqU0t1oRMZDEmcvqqHgb-i92CixNv6BvmWg_iu6_mWuauoXnBRYqppVUSx8&eid=0-iibxxaka-zp\nThis email was sent to reply@reply.github.com.\nIf you need assistance or have questions, please contact LinkedIn Customer Service: https://www.linkedin.com/e/v2?e=0-iibxxaka-zp&a=customerServiceUrl&ek=invite_guest\n\u00a9 2015 LinkedIn Corporation, 2029 Stierlin Court, Mountain View CA 94043. LinkedIn and the LinkedIn logo are registered trademarks of LinkedIn.\n. kevonia Tomlinson would like to connect on LinkedIn. How would you like to respond?\nAccept: https://www.linkedin.com/e/v2?e=-65hhtf-ij090ii8-d8&a=preRegInvite&ek=first_guest_reminder_01&li=14&m=hero&ts=accept_text&sharedKey=uLoRkh_U&invitationID=6083666506242146305\nView kevonia Tomlinson's profile: https://www.linkedin.com/e/v2?e=-65hhtf-ij090ii8-d8&a=preRegInvite&ek=first_guest_reminder_01&li=3&m=hero&ts=profile_text&sharedKey=uLoRkh_U&invitationID=6083666506242146305\nYou received an invitation to connect. LinkedIn will use your email address to make suggestions to our members in features like People You May Know. Unsubscribe here: https://www.linkedin.com/e/v2?e=-65hhtf-ij090ii8-d8&t=lun&midToken=AQFmrFVhGEd36Q&ek=first_guest_reminder_01&li=16&m=unsub&ts=HTML&eid=-65hhtf-ij090ii8-d8&loid=AQHgyzeteeOIowAAAVIOgtozFrq3GOIv4a5AAaulBtrdsHCmERluGuJQ3LeY_E9OfmE2UNN1821V5NcXtHUl_NITUdvzyDdWveHkhO9PUxHYM5870q1nKFxnOkKOM1hCGszimSgxaTNi6fM3q_tS3A-YziDTF66MN9ZfVajZEsd54-8UPpRbIIEEuVZdtfcEAgwq\nThis email was sent to reply@reply.github.com.\nIf you need assistance or have questions, please contact LinkedIn Customer Service: https://www.linkedin.com/e/v2?e=-65hhtf-ij090ii8-d8&a=customerServiceUrl&ek=first_guest_reminder_01\n\u00a9 2016 LinkedIn Corporation, 2029 Stierlin Court, Mountain View CA 94043. LinkedIn and the LinkedIn logo are registered trademarks of LinkedIn.\n. ",
    "codegaze": "After debugging a clean copy of hybridauth it occured to me i needed to enable the google+ API to make it return the email.\n. ",
    "godm82": "can not find such a forum.... :(\n. ",
    "cybermania": "They did. Announced on devs: developer.linkedin.com \nNot sure are the new APIs/changes included in the new releases.\n. @christ0ph3r I've been using also an older version of the hybridauth. Updated the linkedin libraries and it worked OK after that.\nNote please that I'm using it only to auth and fetch data. Linkedin changed their APIs a lot, so for a more complex app Hybridauth should probably update the complete Linkedin lib, if they didn't do that already. \n. ",
    "christ0ph3r": "I would like to know.  It looks like our app is using a little bit older version of hybrid auth.  Do you know any ways to test locally with LinkedIn API ? @cybermania \n. Thank you! @wvdweij and @VladyslavKurmaz  \nYou guys tips helped me.  I had 1 old permission checked causing it not to work and realized I had to add a cancel URL.\nOne issue I have is before I was able to get the number of connections a linked in user has.  Now that is not working for me.  How do I get this to work with new API update?  Any suggestions?\n. Is there any way to get it with num-connections since it supports r_basicprofile? \nhttps://developer.linkedin.com/docs/fields/basic-profile\n. @drupalninja \nIt sounds like you still have old permissions checked.   Uncheck all the permissions and save.   A few will go away because they are old.  Then recheck the ones you need and resave.\n. May help linking to the API\n. I sumbitted PR for and last commit is for this https://github.com/hybridauth/hybridauth/pull/598\n. I am incorrect regarding the v1 issue.  The oauth uses v1 while the REST api uses v2.  This confused me.  Sorry about that. :smile: \nHowever I still think issue with location :earth_asia:  should be discussed.\n. I have taken another look and only location stuff is about droplets.  And I don't think that would work well as its not user related.\n. And we are missing .php extension :)\n. Will do.  Thanks.  :+1: \n. From the changelog https://developers.facebook.com/docs/apps/changelog:\nChanges from v2.5 to v2.6\nPages\n- The likes field on the Page node has been renamed to fan_count\nYou have 2 options it sounds like.\n1.  Target the likes field instead of fan_count\n2.  Upgrade to 2.6 or higher\n. This was discussed in https://github.com/hybridauth/hybridauth/issues/378 .\nThere is currently no option for Pinterest.    It would be nice to have.  If you wanted to submit a PR for Pinterest that would be awesome.\n. May be a yahoo issue @nodeffect .\nhttps://github.com/timbreitkreutz/omniauth-yahoo/issues/11\n. Found 1 spelling error \ndeocde\n. We should always try out best not to break things for others.\n. Nice find!  Yeah that duplicate does not need to be there.\nLooks good to me.  Good to merge.  @StorytellerCZ\n. Hey @miled thanks so much for pointing me to the docs.  The code kept failing so I used the exceptions to catch the error.  An access token was required.  This is how I got it to work.\nphp\n$taggable = $adapter->api()->get( \"/me/taggable_friends\", $token );\n$taggable_array = $taggable->getDecodedBody();\n$total_fb_friends = count( $taggable_array['data'] );. Nice work.  I feel 60x60px is too small.  Often times I need to display avatars bigger than that with the Hybrid library and it seems this would produce the images blurry.\n. Oh wow thats pretty crazy they picked such a small size.  I tried looking for it in the docs but couldn't find anything.  Did you find this in the docs or the http response?  I haven't got to try this yet but looks good to me.  Thanks for making this.  I think a lot of people will find use to this.\n. Thanks for the link.  Check this out.\nhttps://s-media-cache-ak0.pinimg.com/avatars/otthans_1409489123_60.jpg\nIf we strip out _60 we can get the full size.\nhttps://s-media-cache-ak0.pinimg.com/avatars/otthans_1409489123.jpg\n. I am not sure if this is needed.   Can you explain why it is?\n```\n<?php \nfunction redirect($url, $mode = \"PHP\") {\n  echo $mode;\n}\nredirect('https://test.com/');\n?>\n```\nwill output PHP because the second parameter is already set \n$mode = \"PHP\"\nso I do not understand why check it again.\n. Nevermind.  I understand now.  So incase its empty this is fallback.\n. ",
    "satya5561": "i am facing same problem. please update your api.\n. ",
    "brecht27": "Can anyone tell me how to change the API settings in the hybridauth to make it work again? I have read the documentation descibed by wvdweij but still no result.\nIt is very urgent.\n. Where can i find the scope parameter in the Hybridauth settings?\nThe only thing i have checked is the basicprofile in the linkedin app config.\n. I have set the debug option to true in the config file of hybridauth and i have the 'Oops. Error. ' Message. That is all i have... I have also checked the w_share permission in the linkedin app config.\nNothing has changed.\n. I have setup a debug log file in the hybridauth config file. But if looked into the hybridauth.log file it's empty...       \n\"debug_mode\" => true,\n\"debug_file\" => \"/temp/hybridauth.log\"\n. No, they don't updated the linkedin library for the more complex app like i use. If you change the linkedin libraries to the newest version of hybridauth you have the same issue like before :-(\n. ",
    "vasumeda": "I am facing the same issue. \nHere's the message from the log file. Any help is really appreciated\nDEBUG -- ::1 -- 2015-05-20T11:39:55-04:00 -- Hybrid_Auth initialize. dump used config:  -- a:8:{s:8:\"base_url\";s:43:\"http://localhost/spark/index.php/site/oauth\";s:9:\"providers\";a:10:{s:6:\"OpenID\";a:1:{s:7:\"enabled\";b:0;}s:3:\"AOL\";a:1:{s:7:\"enabled\";b:0;}s:5:\"Yahoo\";a:2:{s:7:\"enabled\";b:0;s:4:\"keys\";a:2:{s:2:\"id\";s:0:\"\";s:6:\"secret\";s:0:\"\";}}s:6:\"Google\";a:2:{s:7:\"enabled\";b:0;s:4:\"keys\";a:2:{s:2:\"id\";s:0:\"\";s:6:\"secret\";s:0:\"\";}}s:8:\"Facebook\";a:2:{s:7:\"enabled\";b:0;s:4:\"keys\";a:2:{s:2:\"id\";s:0:\"\";s:6:\"secret\";s:0:\"\";}}s:7:\"Twitter\";a:2:{s:7:\"enabled\";b:0;s:4:\"keys\";a:2:{s:3:\"key\";s:0:\"\";s:6:\"secret\";s:0:\"\";}}s:4:\"Live\";a:2:{s:7:\"enabled\";b:0;s:4:\"keys\";a:2:{s:2:\"id\";s:0:\"\";s:6:\"secret\";s:0:\"\";}}s:7:\"MySpace\";a:2:{s:7:\"enabled\";b:0;s:4:\"keys\";a:2:{s:3:\"key\";s:0:\"\";s:6:\"secret\";s:0:\"\";}}s:8:\"LinkedIn\";a:2:{s:7:\"enabled\";b:1;s:4:\"keys\";a:2:{s:3:\"key\";s:14:\"dsdsdsdsdssss\";s:6:\"secret\";s:16:\"sdsdsdsdsd\";}}s:10:\"Foursquare\";a:2:{s:7:\"enabled\";b:0;s:4:\"keys\";a:2:{s:2:\"id\";s:0:\"\";s:6:\"secret\";s:0:\"\";}}}s:10:\"debug_mode\";b:1;s:10:\"debug_file\";s:43:\"/Applications/XAMPP/logs/srini_linkedin.log\";s:9:\"path_base\";s:90:\"/Applications/XAMPP/xamppfiles/htdocs/spark/protected/extensions/hoauth/hybridauth/Hybrid/\";s:14:\"path_libraries\";s:101:\"/Applications/XAMPP/xamppfiles/htdocs/spark/protected/extensions/hoauth/hybridauth/Hybrid/thirdparty/\";s:14:\"path_resources\";s:100:\"/Applications/XAMPP/xamppfiles/htdocs/spark/protected/extensions/hoauth/hybridauth/Hybrid/resources/\";s:14:\"path_providers\";s:100:\"/Applications/XAMPP/xamppfiles/htdocs/spark/protected/extensions/hoauth/hybridauth/Hybrid/Providers/\";}\nDEBUG -- ::1 -- 2015-05-20T11:39:55-04:00 -- Hybrid_Auth initialize. dump current session:  -- a:5:{s:26:\"hauth_session.error.status\";s:4:\"i:1;\";s:27:\"hauth_session.error.message\";s:78:\"s:70:\"Authentication failed! LinkedIn returned an invalid Token. Response:  \";\";s:24:\"hauth_session.error.code\";s:4:\"i:5;\";s:25:\"hauth_session.error.trace\";s:1516:\"s:1506:\"#0 /Applications/XAMPP/xamppfiles/htdocs/spark/protected/extensions/hoauth/hybridauth/Hybrid/Endpoint.php(140): Hybrid_Providers_LinkedIn->loginBegin()\n. Hello All,\nAny luck with the issue. Anybody has any workaround?\nThanks\n-Srini\n. ",
    "johnshepherd": "Try setting the Default \"Cancel\" Redirect URL: in the App settings on the Linked Developer portal\n. ",
    "cirtech": "With an image in https and all mandatories fields written, the problem is the same.\nAnyone has a solution ?\n. @VladyslavKurmaz \nThank you, i applied https everywhere, i have always \n\nAuthentication failed! LinkedIn returned an invalid Token\n\nIt's not clear for me the problem is in the Hybrydauth API or in the linkedIn parameters and permissions ?\n. ",
    "drupalninja": "I am getting \"OAuth callback URL was not confirmed by the LinkedIn end-point\"\n. Also get \"Scope NOT_AUTHORIZED : rw_groups, Scope NOT_AUTHORIZED : rw_nus, Scope NOT_AUTHORIZED : r_network, Scope NOT_AUTHORIZED : r_contactinfo, Scope NOT_AUTHORIZED : r_fullprofile\"\nThis used to work before LinkedIn updated their API. I have all the perms checked.\n. So I got it to work when I changed this line temporarily as a way to debug:\nconst _URL_REQUEST                 = 'https://api.linkedin.com/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress';\n. @christ0ph3r I will try what you suggested\n. @christ0ph3r you were right, I had to reset perms. I don't know which perm I need to fetch info ab a company (public info I think?).\n. ",
    "marsjaninzmarsa": "842.. Outdated?. Fixed in #855?. Ugh, this is 2.x branch issue, ignore above.. 404\u2026.",
    "duozersk": "This one if for the WarGaming.net Open ID\n. More info here - https://eu.wargaming.net/support/Knowledgebase/Article/View/90/22/what-is-openid-and-how-do-we-use-it\n. ",
    "SukanyaD": "Hi, thanks! \nYes, hybridauth module on drupal 7. So, without tweaking the the module code, i was able to alter the google  config array by using hybridauth alter hook function and only the hd parameter(domain specific login) works. Additionally, i also want to prevent the autologin instead show up the login screen to the user after every logout which i am not able to do. \n. ",
    "TrogWarZ": "@nazar-pc, can you provide example when it breaks something? I'll fix this shortly.\nBut i think they are backward-compatible. PR just add some new fields, but not removes old (see code below).\nAll fields, that defined in \\Hybrid_User_Contact but not got from Vkontakte, wil be null but they will exist.\nphp\npublic $fields = [\n    'identifier'  => 'uid',            // Old field saved\n    'firstName'   => 'first_name',     // Old field saved\n    'lastName'    => 'last_name',      // Old field saved\n    'gender'      => 'sex',            // Old field saved\n    'displayName' => 'screen_name',    // Old field saved\n    'city'        => 'city',           // New one\n    'country'     => 'country',        // New one\n    'bdate'       => 'bdate',          // Old field saved\n    'photoURL'    => 'photo_max_orig', // Old field saved\n    'nickname'    => 'nickname',       // Old field saved\n    'domain'      => 'domain',         // New one\n    'timezone'    => 'timezone',       // Old field saved\n    'photo_rec'   => 'photo_rec',      // Old field saved\n    'photo_max'   => 'photo_max',      // New one\n    'home_phone'  => 'home_phone',     // New one\n    'home_town'   => 'home_town',      // Old field saved\n];\n. Okay, i've changed field map to make compability more clear. Check this out, please.\n. Yep, i use this code in my project and tested compability version from master and from my PR. It's good, just added new fields.\nNow i've added more comments to fields map.\n. ",
    "PowerKiKi": "I believe this should be closed since there is nothing to load via composer according to @miled.\n. Shouldn't we close this following #1024 ? Or is it something different?. This should have been closed when merging #993. This works well for me too, thank you.. ",
    "rukavina": "Seems like process() is needed per http://stackoverflow.com/questions/15478131/php-hybridauth-social-signin-not-working-at-all-redirecting-to-hauth-start-fac\nnot sure why it's not emphasized, it might save a lot of time \n. ",
    "PatrickBK": "and I'd like to unset these since they serve no purpose after login is done. To unset them via unset() I have to know how to get the names to unset:-) please help.\n. I don't use composer and Hybridauth works fine except for the endpoint message...\nPHP Fatal error:  Class 'Hybrid_Exception' not found\n2015/10/13 08:35:52 [error] 605#0: *1000359 FastCGI sent in stderr: \"PHP message: PHP Fatal error:  Class 'Hybrid_Exception' not found in /Library/Server/Web/Data/Sites/beebuy.nl/includes/hybridauth/Hybrid/Endpoint.php on line 213\" while reading response header from upstream, client: 94.214.206.46, server: beebuy.nl, request: \"GET /includes/hybridauth/?hauth.start=Facebook&hauth.time=1444718146 HTTP/1.1\", upstream: \"fastcgi://127.0.0.1:9000\", host: \"beebuy.nl\"\nHow do I get rid of this without the use of composer? Since Hybridauth works fine I don't see why composer would be mandatory.\nbtw. am I the only one that thinks composer.json reveals things about your site that makes it easy for hackers to specifically look for vulnerabilities in code they would otherwise not now you use?;-)\nI installed composer now so the errors are gone but I'd like a way to use hybridauth without composer and without this error if it's not to much trouble:-)\n. maybe the answer was given many times, as stated, it worked fine, it only generated that error in the log file and I don't like errors, even when code works fine.\nSo, define works fine. Works without generating errors?\n. Some searching in the Hybrid Auth code got me this.....\nadd:\n\"includeEmail\" => true \nin the hybridauth config file, to the Twitter options:-)\nSo, solved. I might add that the documentation seems to be missing this info or at least, I couldn't find it:-)\n. Did that allready:-) and I answered my own question, check it out:-) I coudln't find how to config Hybridauth to actually benefit from the elevated permissions.\nThx for the effort.\nPatrick\n\nOp 6 dec. 2015 om 20:02 heeft Alexander Graef notifications@github.com het volgende geschreven:\nYou need to request elevated permissions / whitelisting first, before you can get emails from Twitter.\n1. https://support.twitter.com/forms/platform\n2. Select \"I need access to special permissions\"\n3. Application Name and ID\nMore info ... https://dev.twitter.com/rest/reference/get/account/verify_credentials\nAlex\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "webru": "On the ZendServer is already installed php-5.6-curl-zend-server\n. Yep, installed and enabled :) On another server without the Zend Server, where established php5.6-curl, enabled. The problem is that composer does not see extension php-5.6-curl-zend-server, and see php-5.6-curl\n. ",
    "vrkansagara": "@webru the same issue but no better luck with issue. ping me once you get things done so. thanks \n. ",
    "yodjii": "Same issue for months. Thanks\n. ",
    "kusmierz": "Same issue for paypal.\n. ",
    "andrisi": "The Live (Microsoft, Windows, etc.) login setup, where you get your key/secret.\n. yes, added to ticket description\n. ",
    "jmgomezpoveda": "Same issue here. There seem to be a couple of workarounds at http://hybridauth.sourceforge.net/userguide/IDProvider_info_Live.html\n. This is a duplicate of https://github.com/hybridauth/hybridauth/issues/698. Thanks for taking the time documenting a solution. Note that the solution to https://github.com/hybridauth/hybridauth/issues/698 should be in that issue as a new comment, not in a separate one.. This is a duplicate of https://github.com/hybridauth/hybridauth/issues/698. The quote is from http://stackoverflow.com/questions/19149729/any-good-alternatives-to-replace-hybridauth-php#comment70383475_19149729. ",
    "neo22s": "This issue still happening\nhttps://github.com/open-classifieds/openclassifieds2/issues/1993#issuecomment-234524826\n. any update on this?\n. Yep...also pretty simple mod as you can see ;)\n. in base_facebook.php\n```\n  protected function getHttpProtocol() {\n//we are sure is a https request , we use first the Nginx forwarded PROTO OR apache OR cloudflare\n    if( (isset($_SERVER['HTTP_X_FORWARDED_PROTO']) AND $_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https') \n        OR (isset($_SERVER['REQUEST_SCHEME']) AND $_SERVER['REQUEST_SCHEME'] == 'https')\n        OR (isset($_SERVER['HTTP_CF_VISITOR']) AND $_SERVER['HTTP_CF_VISITOR'] == '{\"scheme\":\"https\"}')\n        )\n    {\n\n        return 'https';\n    }\n\n    return 'http';\n\n}\n```. Same exact error here \nError: please try again! User profile request failed! Google returned an error: Exception: The Authorization Service has return: invalid_request in /home/opencl7/public_html/2181/oc/common/vendor/hybridauth/hybridauth/Hybrid/thirdparty/OAuth/OAuth2Client.php:85 Stack trace: #0 /home/opencl7/public_html/2181/oc/common/vendor/hybridauth/hybridauth/Hybrid/Provider_Model_OAuth2.php(120): OAuth2Client->authenticate('4/_tNah5g6PK2Fu...') #1 /home/opencl7/public_html/2181/oc/common/vendor/hybridauth/hybridauth/Hybrid/Endpoint.php(173): Hybrid_Provider_Model_OAuth2->loginFinish() #2 /home/opencl7/public_html/2181/oc/common/vendor/hybridauth/hybridauth/Hybrid/Endpoint.php(55): Hybrid_Endpoint->processAuthDone() #3 /home/opencl7/public_html/2181/oc/common/vendor/hybridauth/hybridauth/Hybrid/Endpoint.php(72): Hybrid_Endpoint->__construct(Array) #4 /home/opencl7/public_html/2181/oc/common/classes/controller/social.php(19): Hybrid_Endpoint::process(Array) #5 /home/opencl7/public_html/2181/oc/kohana/system/classes/Kohana/Controller.php(84): Controller_Social->action_login() #6 [internal function]: Kohana_Controller->execute() #7 /home/opencl7/public_html/2181/oc/kohana/system/classes/Kohana/Request/Client/Internal.php(97): ReflectionMethod->invoke(Object(Controller_Social)) #8 /home/opencl7/public_html/2181/oc/kohana/system/classes/Kohana/Request/Client.php(114): Kohana_Request_Client_Internal->execute_request(Object(Request), Object(Response)) #9 /home/opencl7/public_html/2181/oc/kohana/system/classes/Kohana/Request.php(993): Kohana_Request_Client->execute(Object(Request)) #10 /home/opencl7/public_html/2181/index.php(146): Kohana_Request->execute() #11 {main} - See more at: http://2181.dontcode.com/#sthash.yZspjemu.dpuf. Hello! fix here: https://github.com/hybridauth/hybridauth/pull/707. thanks!! this fixes https://github.com/hybridauth/hybridauth/issues/694. I have just tested at https://yclas.com/panel/auth/login where we use hybridauth and not any issue.. ",
    "qriff": "Apparently this is just the basecode without drupal integration. https://www.drupal.org/project/hybridauth\n. ",
    "nahuelsgk": "Oh! Thank you! I could find this on the docs!. I will close the issue! \n. ",
    "hennott": "The error was:\nParse error: syntax error, unexpected T_OBJECT_OPERATOR, expecting ')' in /path/libraries/hybridauth/hybridauth/Hybrid/Logger.php on line 44\nAfter my change everything worked fine. This is my productiv environment which is not running the latest PHP version at the moment (maybe it\u00b4s 5.3 or 5.4)\n. Sorry..I\u00b4m not so familiar with the worlds best code repository..you can search for the string and replace it with my string.\n. ",
    "ntomka": "The problem is self-solving due to this commit: composer/composer@b17ccbfa0d73f71ed8c11953e9e1e5d3709bf91e\n. ",
    "ethier": "As far as I can tell, it's just adding an openid scope.\n. ",
    "daveagp": "I agree but unfortunately the server is running CentOS 5 which only gets as high as PHP 5.3.3. I would certainly love to not have to deal with such arcane syntax but it's not an option. Accepting this pull request just means that I don't have to keep track and update my own branch.\n. That's great! Yeah I had never previously encountered any problems.\n. ",
    "sraboni": "Hello,\nI am having the same problem.  Are you able to find a solution for this error?\nI am using v2.5.0 for PHP.\nThanks.\n. Hello,\nCan anyone please help?\nI have added scopes : \n1. https://www.googleapis.com/auth/youtube\n2. https://www.googleapis.com/auth/youtube.force-ssl\nWhen I am posting data to OAUTH2 API, it is returning invalid credentials error.\nI am sending param array as : \n$params = array(\n\"kind\"  =>  \"youtube#subscription\",\n\"part\" => \"snippet\",\n \"snippet.resourceId.kind\" => \"youtube#subscription\",\n\"snippet.resourceId.channelId\" => \"CHANNEL ID\",\n    );\nand calling the url :https://www.googleapis.com/youtube/v3/subscriptions?part=snippet with post method.\nThanks,\nSraboni\nCan you please tell me what I am doing wrong?\n*** Please note that I am using HybridAuth PHP edition.\n. Hello\nAnyone please help!!\n. ",
    "adanjz1": "Same here!\n. ",
    "spatsatzis": "https://github.com/hybridauth/hybridauth/commit/e8015af23cc9b5aaa3755508b4d8117df8ceda5a\n. ",
    "smatyas": ":+1: \n. ",
    "nullziu": "Hi @miled, could you please take a look at this PR?\n. @nazar-pc I think that the average user expects things to work \"out-of-box\" without much fuss, with that said, this pull request does not introduce any overhead, and accounts for use cases when this redirect issue is not handled properly (ie: user clicking on the back button of his browser after successful authentication).\n. @nazar-pc I think you totally misunderstand the point in this pull request.\n I changed my code and hopefully it clarifies the scenario.\n. ",
    "yang-wei": "Why not just use gh-pages\n. :+1: \nso it's here http://hybridauth.github.io/hybridauth/\nThanks \n. ",
    "MathRat": "thank you for your answer.\nmy idea is an 1:n relation between user table and a table for providers, so you can post at the same time, with one action at i.e. facebook and google+ wall.\nhttps://github.com/ADmad/CakePHP-HybridAuth#database\nwith this database structure it isn't possible, isn't it?\n. so i can write an 1:n structure and hybridauth can handle this?\n- USER -\n  id, int\n  email, varchar\n  password, varchar\n- PROVIDERS - \n  id, int\n  user_id, int\n  provider, varchar\n  provider_uid, varchar\n. i tried so, but it doesn't work:\nError: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Users.provider' in 'where clause'\nUsers Table Model:\nnamespace App\\Model\\Table;\nuse Cake\\ORM\\Table;\nclass UsersTable extends Table\n{\npublic function initialize(array $config)\n{\n    $this->hasMany('UserSocial');\n}\n}\nDatabase:\nCREATE TABLE IF NOT EXISTS users (\nid int(10) unsigned NOT NULL,\n  email varchar(150) COLLATE utf8_unicode_ci NOT NULL,\n  password varchar(150) COLLATE utf8_unicode_ci NOT NULL,\n  created datetime NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\nCREATE TABLE IF NOT EXISTS user_socials (\nid int(10) unsigned NOT NULL,\n  user_id int(11) NOT NULL,\n  provider varchar(255) COLLATE utf8_unicode_ci NOT NULL,\n  provider_uid varchar(255) COLLATE utf8_unicode_ci NOT NULL,\n  created datetime NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\nALTER TABLE users\n ADD PRIMARY KEY (id);\nALTER TABLE user_socials\n ADD PRIMARY KEY (id), ADD UNIQUE KEY user_id (user_id,provider);\nWhat am i doing wrong? :)\nI read your code but you didn't changed hybridauth core code, right? Why does it work on your code? :)\n. ah, sry. i didn't know about that link. i'll close this and reopen it at cakephp hybridauth :)\n. ",
    "ivanbaldo": "Also, in the Google Developer Console, one must enable the Google+ API for it to work, that should be mentioned in http://hybridauth.sourceforge.net/userguide/IDProvider_info_Google.html .\n. ",
    "jgtoriginal": "@miled can you please then provide an alternative solution to this problem then?\nI appreciate you got some design concerns, but we need to find a balance between the former and the latter. Bare in mind that because of such silly problems, many people would not use this implementation, which wouldn't help to make this more popular.\nThx!!\n. ",
    "guarly": "It's my pleasure. Thanks for all your effort!\nEl 27/8/2015 1:16, \"Jan Dvorak\" notifications@github.com escribi\u00f3:\n\nThank you!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hybridauth/hybridauth/pull/519#issuecomment-135203159\n.\n. \n",
    "NabiKAZ": "What's news about this bug?!\n. ",
    "AkkaKhalid": "Hi,\nAlthough I've updated the library, the problem remains.\nThanks\nLe jeudi 27 ao\u00fbt 2015, Jan Dvorak notifications@github.com a \u00e9crit :\n\nFirst, if you can, try upgrading to the newest version.\n\u2014\nReply to this email directly or view it on GitHub.<\nhttps://ci3.googleusercontent.com/proxy/CS-ztGtCDWL2rjkUn9dZJcVZcRqXBp2GXdIt4HhV4PaMTUOgygtXxV0fBE5ERYjcVc-cMOPEHqwFBFk4Cj3fsiCbmCy-5GUR9doFS4YDxvUKxVlI8CdHLVHg6XKeK9V_i6zd_l42OcYk-vRQx872h1AYo9cXuw=s0-d-e1-ft#https://github.com/notifications/beacon/ANGW2uXl2DZav5avwiSwPapG3qM6QGVSks5orkTqgaJpZM4Fo7mR.gif\n\n\nKhalid Akka (D\u00e9veloppeur/Int\u00e9grateur web)\n. ",
    "askaidau": "Nimesh-Soni, here's a quick stop-gap fix, change line 163 of Hybrid/Providers/Facebook.php:\ntry{ \n    $data = $this->api->api('/me?fields=birthday,email,name,link,gender,hometown');\n}\n. @lilbran Glad to help. Yes you are right, it was a breaking change introduced in v2.4 (fewer default fields for faster performance) https://developers.facebook.com/blog/post/2015/07/08/graph-api-v2.4/\n. ",
    "lilbran": "@askaidau Thank you so much! You've solved my issue! Is this only because of the update from v2.3 to v2.4?\n. ",
    "ezekel": "@nazar-pc , Okay Thank you\n. @nazar-pc , \nyes I tried this http://hybridauth.sourceforge.net/userguide/IDProvider_info_Facebook.html\nbut it says it's outdated.\nand this is the response after authenticated in facebook login, can I ask why all are empty ?\n```\nobject(Hybrid_User_Profile)#10 (24) { [\"identifier\"]=> string(16) \"1481084508878224\" [\"webSiteURL\"]=> string(0) \"\" [\"profileURL\"]=> string(0) \"\" [\"photoURL\"]=> string(72) \"https://graph.facebook.com/1481084508878224/picture?width=150&height=150\" [\"displayName\"]=> string(17) \"charles chinx\" [\"description\"]=> string(0) \"\" [\"firstName\"]=> string(0) \"\" [\"lastName\"]=> string(0) \"\" [\"gender\"]=> string(0) \"\" [\"language\"]=> string(0) \"\" [\"age\"]=> NULL [\"birthDay\"]=> NULL [\"birthMonth\"]=> NULL [\"birthYear\"]=> NULL [\"email\"]=> string(0) \"\" [\"emailVerified\"]=> string(0) \"\" [\"phone\"]=> NULL [\"address\"]=> NULL [\"country\"]=> NULL [\"region\"]=> string(0) \"\" [\"city\"]=> NULL [\"zip\"]=> NULL [\"username\"]=> string(0) \"\" [\"coverInfoURL\"]=> string(269) \"https://graph.facebook.com/1481084508878224?fields=cover&access_token=CAAVE8ueaRqUBAHwJGxD2d05ZCbZCoYUiDB5sqj1MutWonxS8E3nwGZCLiKzTkjgRosjqoZBUFXZCiG8ZACOILZCwIqmQ3c1ri9QIz0BL8ArdVhiKs6k0ofbEhfKXC4WTqRGtiPEz6H13bBYtaV0WgOguKj6oRT13DWErwsZCY7QyQjMOd0eK1ZCiyTjQLfjT5VlUZD\" } \n```\nThank you in advance.\n. @nazar-pc ,\nIs this correct ? this is what I'm using, ..yes I see that link, and I used that but why is this null and the other is empty ? what am I doing wrong ?\n[\"age\"]=> NULL [\"birthDay\"]=> NULL [\"birthMonth\"]=> NULL [\"birthYear\"]=> NULL [\"email\"]=> string(0) \"\"\n[\"address\"]=> NULL [\"country\"]=> NULL [\"region\"]=> string(0) \"\" [\"city\"]=> NULL [\"zip\"]=> NULL [\"username\"]=> string(0) \"\" \n```\n$config = array(\n    \"base_url\" => \"http://newuser.mysite.com/hybridauth/hybridauth/\",\n    \"providers\" => array (\n        \"Facebook\" => array (\n            \"enabled\" => true,\n             \"keys\"    => array ( \"id\" => \"--myid---\", \"secret\" => \"--mysecret---\" ),\n             \"scope\"   => \"email, user_about_me, user_birthday, user_hometown\", // optional\n             \"display\" => \"popup\", // optional\n             \"trustForwarded\" => false\n    )));\n\n   require_once( \"hybridauth/hybridauth/Hybrid/Auth.php\" );\n\n\n    try{\n\n        $hybridauth = new Hybrid_Auth( $config );\n\n        $adapter = $hybridauth->authenticate( \"Facebook\" );\n\n        $user_profile = $adapter->getUserProfile();\n\n        die(var_dump($user_profile));\n\n    }catch(Exception $e){\n\n      echo $e->getMessage();\n\n    }\n\n```\nThank you in advance.\n. @nazar-pc ,\nso how can I make my users to login to my website just like other website did.  that if you login your facebook account you can loging in...so if the facebook user will restrict his email and profiles, how can he log in to my site because the response of email will be null. and I want to use his email to insert it to my table.\n. I just followed this tutorial http://hybridauth.sourceforge.net/userguide/Integrating_HybridAuth_Social_Login.html\ninorder to get his email,firstName and lastName\n. @nazar-pc , \nThis helps me https://github.com/hybridauth/hybridauth/issues/524\nNow I get now the email of user,it's because there should be changes in facebook provider.\n. ",
    "TheJoin95": "For v 2.4 Facebook api version  you must update your hybridauth library to last version (2.5)\n. I get the same error with the latest version of HybridAuth (2.8):\nFastCGI sent in stderr: \"PHP message: PHP Fatal error:  Class 'Facebook\\Facebook' not found in /var/www/connect/lib/vendor/hybridauth/hybridauth/hybridauth/Hybrid/Providers/Facebook.php on line 56\" while reading response header from upstream\nI installed HybridAuth via composer, so I also get the new facebok sdk.\nIs the new facebook sdk (5.4.1) stable? Or is it included correctly? \nBecause the error seems to be a namespace's error.\nI fixed with a downgrade a 2.7 version of hybridauth, with the older sdk.\n. @nodeffect Did you install HybridAuth by composer or manually?\nYour solution works but, imho it's better if we fix the last release of the library.\nBecause if someone else run a composer update, then facebook login will crash every time because of a \"Fatal error\"\n. NOTE: if you ran composer install in an other directory, you will have a different level for the vendor's path. @dereuromark Yeah, it's because you have vendor directory in some other level of directory.\nYou can fix this by edit the vendor variable's path with your.. ",
    "noneym": "i hava same problem, i want to take facebook username but not working on hybridauth 2.5.0\n. ",
    "ennioporro": "Yes, i don't have an autoload.\nI think i can fix it with\nrequire_once('hybridauth/hybridauth/Hybrid/Exception.php');\nin my PHP script. Right?\n. Hi Kevin.\nLike you, I didn't find any docs about the autoloading for version 2.4.\nThis is what i've done to solve my problem:\n1. i created a composer.json file in my application directory:\n{\n    \"require\": {\n        \"hybridauth/hybridauth\": \"2.4.*\"\n    }\n}\n1. using composer, i did \"composer install\"\n2. this created a vendor directory with all the required stuff\n3. i changed the file for the callback like this:\nphp\n/**\n- HybridAuth\n- http://hybridauth.sourceforge.net | http://github.com/hybridauth/hybridauth\n- (c) 2009-2015, HybridAuth authors | http://hybridauth.sourceforge.net/licenses.html\n  */\n  // ------------------------------------------------------------------------\n  //      HybridAuth End Point\n  // ------------------------------------------------------------------------\n  require_once(**DIR** . \"/vendor/autoload.php\");\n  Hybrid_Endpoint::process();\n\n<pYou have to change the path in the require_once to point to the vendor dir that was created by the \"composer install\".\nThat's all.\nAll the Exception errors are gone!\nHope it helps.\n. You should do\nphp composer.phar install\nif you installed composer locally. If you installed composer globally (and renamed composer.phar in composer) you can do just\ncomposer install\nSee https://getcomposer.org/doc/01-basic-usage.md for reference.\nI didn't used the composer.json shipped with Hybridauth, but reading nazar-pc post i think i should have done that.\nI created my composer.json, the one used by my application (so i placed it in the app directory).\nI don't know what you should do or Drupal.\nI used Hybridauth extension for Drupal in a project six month ago. Are you using it too?\nThat time i didn't had to create something to autoload Hybridauth classes.\nAre you sure you configured the extension correctly?\n. Hi @mbpineyro.\nYou can call the file hybridauth.php or whatever and put in the root of your project or in a \"hybridauth\" directory.\nThe important thing is that this file can be public accessible and you use its public path as the callback in the endpoint configuration (for example Facebook, Twitter or whatever app).\nHope it helps.\n. ",
    "kfalencik": "Hello, I have the same issue. Could you please explain what the \"autoloader\" is/does or at least provide a link to some documentation?\nThanks a lot,\nKevin\n. Thanks for the help @ennioporro,\nCouple of questions:\n- \"I created a composer.json file in my application directory\" - I'm using Drupal so my HybridAuth library is located in sites/all/libraries/hybridauth, is that the directory I should create the json file? Also there is already a composer.json file in there.\n- \"Using composer, i did \"composer install\" - is that the command you used? or is it \"php composer.json install\"?\nI tried \"php composer.json install\" on both new json and the existing one and no new files where created, so I'm doing something wrong.\nThanks for all the help\n. It's really strange because this module worked fine just a week ago, and now it's throwing this error.\n. Well this didn't help so I guess that is something to do with my server/website configuration rather than the Hybrid library.\nThanks for the help\n. ",
    "mbpineyro": "Hi @ennioporro \nI have the same issue that you. When you make a require and say \"i changed the file for the callback like this:\" in what file did you do that? some file from hybrid auth library or just the file you use this plugin? Thanks\n. Thanks @ennioporro !\n. Hi @nazar-pc, i read that, but why if i upload to another hosting its working? Autoload is a server configuration? Thanks\n. @nazar-pc  I test my site in two hostings.\nIn the primary it's not working (works for a long time, but now it's not working)\nIn the second, i uploaded all my files and works.\nThat's why i asked if there is a server configuration. I'm looking for more info about autoloader, i don't understand how it works. Thank you a lot.\n. Excellent, i will try installing with composer.\nIts funny that it was working fine for a long time and now it stopped working.\nThanks for your support  @nazar-pc \n. ",
    "mrtuvn": "How to autoload lib without use composer( i mean don't use composer install)\nHybrid use PSR-0 with namespace convention underscores. same issues and nobody care. ",
    "malle-pietje": "Hi mastef, I was wondering how you add the PHPSESSID to the endpoint? Just as a GET parameter or with url rewriting?\n. ",
    "fulldecent": "Very nice, thank you\n. ",
    "soravgarg123": "Hello Jan,\nThank you for reply i will try this method..\nOn Thu, Sep 17, 2015 at 2:02 AM, Jan Dvorak notifications@github.com\nwrote:\n\nGo here: https://github.com/ADmad/CakePHP-HybridAuth/tree/3.0\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hybridauth/hybridauth/issues/544#issuecomment-140881257\n.\n\n\nThanks & Regards\nSorav Garg\nSoftware Developer\n+919074939905\nIndore (M.P.)\n. ",
    "rahuljs": "Somebody pls guide me step by step how to solve this error\n. ",
    "dearsina": "Any news on this? Azure uses Oauth2, and I (foolishly) thought it was easy enough to extend a provider class to cover it. I'm using 3.0, but have gotten nowhere. Any pointers?. After I wrote the comment, I had one more go at it and managed to set it up, was actually pretty straightforward. Your example template in the 3.0 documentation is very useful. Thanks! . Can this issue / new feature request be re-opened?. ",
    "frodeste": "I have not time to spend on this now. ",
    "revengel": "+1. ",
    "thanh-taro": "Hello standus, I got the same problem. Can you help me to resolve it? Many thanks.\n. Thank you a lot.\n. ",
    "applibs": "Hi,this is my code which works:\nnamespace Hybridauth\\Provider;\nuse Hybridauth\\Adapter\\OAuth2;\nuse Hybridauth\\Exception\\UnexpectedValueException;\nuse Hybridauth\\Data;\nuse Hybridauth\\User;\n/\n- &grant_type=authorization_code\n  /\n  class WindowsLive extends OAuth2\n  {\n  /\n  - {@inheritdoc}\n    /\n    public $scope = 'wl.basic wl.emails wl.contacts_emails wl.signin wl.birthday wl.postal_addresses';//wl.emails wl.share\n    //Note  Do not include the wl.offline_access scope if you're using the implicit grant flow (response_type=token)\n    /\n  - {@inheritdoc}\n    */\n    protected $apiBaseUrl = 'https://apis.live.net/v5.0/';\n/*\n  - {@inheritdoc}\n    /\n    protected $authorizeUrl = 'https://login.live.com/oauth20_authorize.srf';//https://login.live.com/oauth20_authorize.srf\n/*\n  - {@inheritdoc}\n    /\n    protected $accessTokenUrl = 'https://login.live.com/oauth20_token.srf';//https://login.live.com/oauth20_token.srf\nprotected function initialize()\n  {\n      parent::initialize();\n      $this->apiRequestParameters = [\n          'Authorization' => 'Bearer ' . $this->token('access_token')\n      ];\n  }\n/*\n  - {@inheritdoc}\n    /\n    public function getUserProfile()\n    {\n    $response = $this->apiRequest('me');\n$data = new Data\\Collection($response);\n\nif (! $data->exists('id')) {\n    throw new UnexpectedValueException('Provider API returned an unexpected response.');\n}\n\n$userProfile = new User\\Profile();\n\n$userProfile->identifier    = $data->get('id');\n$userProfile->displayName   = $data->get('name');\n$userProfile->firstName     = $data->get('first_name');\n$userProfile->lastName      = $data->get('last_name');\n$userProfile->gender        = $data->get('gender');\n$userProfile->profileURL    = $data->get('link');\n$userProfile->email         = $data->filter('emails')->get('preferred');\n$userProfile->emailVerified = $data->filter('emails')->get('account');\n$userProfile->birthDay      = $data->get('birth_day');\n$userProfile->birthMonth    = $data->get('birth_month');\n$userProfile->birthYear     = $data->get('birth_year');\n\nreturn $userProfile;\n}\n}\n\n. ",
    "bvaschenko": "Everything work fine for today.\nProbably it was problem on Facebook side.\n. ",
    "merkuriy": "In my opinion there is something wrong is_string($city) and property_exists($city, 'name').\nPerhaps it would be better just like so #565\n. ",
    "mugukamil": "@AveVlad yo' wassap man?\n. ",
    "tchalvak": "Is this still a continuing issue?  Was hoping to run hybridAuth on an ssl site and not sure whether this is going to cause problems for that.\n. Fair enough, thanks.\n. Had an identical problem with this deprecated permission.\n. This sounds unlikely to be a problem specific to hybridauth.  Try logging out of facebook entirely with your testing account and starting all parts of your login from scratch.  This message seems to describe an oauth token that was previously active with facebook that got timed out.  For example, if you partially authorized app access in facebook during development, but then didn't complete that authorization, and the app expects authorization to still continue but facebook has long since dropped the token.\n. ",
    "mln-mln-mln": "@nazar-pc Thank you, your solution worked perfectly. \n. ",
    "koddr": "How? I don't understand..\n. How to make this from GitHub site?\nOK. I install Git Shell. Go to master branch and send command git rebase.\nResponse is Current branch master is up to date. It's all?\n. Okay, forget .. There has been automerge status of all successful checks (after this comment), but for some reason no one has done merge. \nI will use my local version.\nIf your need \u2014 let go to my fork and copy code from here.\n. @nazar-pc one more time: \u00abThere has been automerge status of all successful checks...\u00bb, but you merge another \u2014 #578 \u2014 to master branch and my changes \u2014 not actually now. But my changes wait 7 days to merge (with OK all status), and #578 only 6 days! 7 > 6 \u2014 you know, but #578 merge first! Question: WTF, guys?!\n. And one more thing.\nMy changes is Improvement, and #578 changes is not important, 'cause provider Odnoklassniki still work fine without changes in #578 (try from this site, if you're not trust).\n. @nazar-pc my baby rage is only for this things:\n\n\u00abThere has been automerge status of all successful checks...\u00bb, but you merge another \u2014 #578 ... But my changes wait 7 days to merge (with OK all status), and #578 only 6 days! ...\n\nAnd this:\n\nMy changes is Improvement, and #578 changes is not important, 'cause provider Odnoklassniki still work fine without changes in #578 ... \n\nAnd yes. #578 also not the center of the universe, but you merge him first.\nP.S. I can become a volunteer for your repository. My online on GitHub: 16 h every day without holidays or something else.\nP.P.S. It this all happened 'cause I'm from Russia and you @nazar-pc from Ukraine \u2014 it's so stupid.\n. ",
    "fortis": "Hi @enjoyiacm, \nI can help, add me in skype: imacoda\n. ",
    "EJFJCorp": "We need help to authenticate users on http://medstaff.ejfj.org (MedStaff International PSC, your Employement Public Services Company!). We need to instore collaboration, rather than concurrency (stupid wastings) and opponency (creating fights, violence and missunderstandings)...\n. Identification of users is not the responsability of any single human beings (webmasters), it is not a choice, it is a fundamental right all human beings need to benefit from (MFS:id2004 is taking advantage of unofficial and factice identification systems, MediSecure International PSC made the worlwide reference norm, since March 16th, 1996! We need t do better than this, not let anyone waste any second to do anything worse... SDC++ and SMC++ make this available in second, with aliases and parameters, much smaller than all the different forms witch exist for now, even you cannot propose a secure system for loging in! Assume your responsability, do better to reduce your responsabilities...\n. I do not speak of medical purpose, MediSecure International Technologies\nPSC is for everything, even secret personal daten (medical, fiscal,\nprofessional, financial included). There is a reference, everything\nunperfect is illegal, and a wasting of time... Your system is like opauth,\nbut opauth works not well, but better than your hybridauth which is fully\nunuseable, lot of bugs, files missing, no reference, lot of documentations,\nbut nothing functional... Things need to be simple, uniformize it with\nopauth!\nEmmanuel Jean-Fran\u00e7ois Jotterand\nMembre fondateur d'EJFJ Corporation http://goo.gl/LYhqI\nInitiateur du projet Medical Pack\nIng\u00e9nieur ergonomiste en fin de formation\nInventeur multi-domaines\n...\nSoci\u00e9t\u00e9 de services publics, \u00e0 conditions particuli\u00e8res\nhttp://conditions.ejfj-corporation.org/,\n\u00c9tat libre, ind\u00e9pendant, \u00e0 territoire variable, d\u00e9fendeur des nouvelles\nnormes de protection des individus (s\u00e9curit\u00e9 personnelle\nhttp://www.ejfj-corporation.org/FR/n-Produits-SecuritePersonnelle.htm,\ns\u00e9curit\u00e9\nphysique\nhttp://www.ejfj-corporation.org/FR/n-Produits-SecuritePhysique.htm, s\u00e9curit\u00e9\nmentale http://www.ejfj-corporation.org/FR/n-Produits-SecuriteMentale.htm\n, s\u00e9curit\u00e9 financi\u00e8re\nhttp://www.ejfj-corporation.org/FR/n-Produits-SecuriteFinanciere.htm,\ns\u00e9curit\u00e9\ninformative\nhttp://www.ejfj-corporation.org/FR/n-Produits-SecuriteInformative.htm,\ns\u00e9curit\u00e9 l\u00e9gislative, s\u00e9curit\u00e9 mobile\nhttp://www.ejfj-corporation.org/FR/n-Produits-SecuriteMobile.htm et\nfinalement la s\u00e9curit\u00e9 professionnelle\nhttp://www.ejfj-corporation.org/FR/n-Produits-SecuriteProfessionnelle.htm\n).\nVoir les conditions d'EJFJ Corporation\nhttp://conditions.ejfj-corporation.org, toute intervention est soumise \u00e0\ncondition, que ce soit un mandat exig\u00e9 par vous pour profiter de notre\naide, ou que ce soit un mandat spontan\u00e9 rendu imp\u00e9ratif pour cause de\nrisques encourus par l'esp\u00e8ce humaine (d\u00e8s un individu!).\nSee EJFJ Corporation's Terms http://terms.ejfj-corporation.org, any\nintervention is conditional, be it a warrant required by you for\nbenefitting from our assistance, or be it a spontaneous warrant made\nimperative by reason of risks incurred by other humans (from one person!).\n2015-11-08 22:24 GMT+01:00 Jan Dvorak notifications@github.com:\n\nClosed #579 https://github.com/hybridauth/hybridauth/issues/579.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/hybridauth/hybridauth/issues/579#event-458272491.\n. \n",
    "programmersujeet": "same problem with my integration, Help \n. ",
    "CNSKnight": "+1 getting the undefined index auth'ing w/twitter\n- twitter always returns 401\n- HybridAuth v2.7.0\n  I've got a var_dump at line 54 in Hybrid_Providers_Twitter if interested\n. ",
    "portalzine": "You need to request elevated permissions / whitelisting first, before you can get emails from Twitter.\n1. https://support.twitter.com/forms/platform\n2. Select \"I need access to special permissions\"\n3. Application Name and ID\nMore info ... https://dev.twitter.com/rest/reference/get/account/verify_credentials\nAlex\n. ",
    "ErAnkurSharma": "Patrick's solution worked for me as well.\nApply this step after getting email access permission from twitter dev support.\n/public_html/application/config/hybridauthlib.php\nAnd add  : \"includeEmail\" => true to the Twitter provider.\n\"Twitter\" => array (\n    \"enabled\" => true,\n    \"keys\"    => array ( \"key\" => \"Your_Twitter_App_Key\", \"secret\" => \"Your_Twitter_Secret_Key\" ),\n    \"includeEmail\" => true,\n)\nBR\n-Ankur\n. @nazar-pc , I completely agree with your point.Thank you for making a notice :) :)\nI have edited my comment accordingly.\nBR\n-Ankur\n. ",
    "samwilson": "Would this just be a standard OpenID provider?\n. ",
    "minorOffense": "Yeah their API and Auth are separate. On two different versions.\nThe location stuff I'll have a look.\n. Yup you're right. I'll roll a patch later today for it. Just remove that line all together. \n. ",
    "alijaffar": "Works fine with the latest version.\n. ",
    "imarshmultani": "Solved the error by replacing the following : \n'base_url' => 'hauth/endpoint',\nwith \n'base_url' => 'index.php/hauth/endpoint',\n. ",
    "horvan": "just a redirection thing not hybridauths fault \n. ",
    "leomalaveraG": "Hey Thanks \nI have solved the problem.\nI left the code for those who need something similar.\nhttps://gist.github.com/leomalaveraG/852815848adcb98ce00f\n. @VladyslavKurmaz thanks now I close issue.\n. read_stream is Deprecated Permission\nhttps://developers.facebook.com/docs/facebook-login/permissions#reference-read_stream\nRemove read_stream for $public scope in \nDir:yourapp/Hybrid/providers/facebook.php\nor config file.\n. Hi Yes is posible \nYou need send POST paramenter (Url) to me/likes?fields \nYou need integrate in your code publish_action permission\nPlease read facebook reference guide\nhttps://developers.facebook.com/docs/facebook-login/permissions\n. ",
    "dxlancer": "No knows API change concerns\n. ",
    "sahilsharmafrank": "It's not an issue, it occurs when a user cancels the access to profile. If you don't allow it occurs that means you should not login this user to your app as he has not granted you the access. \n. ",
    "opure": "@g4b1nagy Hello,Did you solve this problem,I also have this problem .\n. @g4b1nagy Thank you still,I'll go and look for problems.\n. ",
    "anver": "I have already done so, so it's not the scope issue.\n$config[\"providers\"]['Facebook'][\"enabled\"] = TRUE;\n        $config[\"providers\"]['Facebook'][\"keys\"][\"id\"] = trim( $webby_settings['fb_app_id'] );\n        $config[\"providers\"]['Facebook'][\"keys\"][\"secret\"] = trim( $webby_settings['fb_app_secret'] );\n        $config[\"providers\"]['Facebook'][\"scope\"] = \"email, user_about_me, user_birthday, user_hometown, user_website\";\n        $config[\"providers\"]['Facebook'][\"display\"] = \"popup\";\n. ",
    "Mandaricks": "I never asked that before.\n. ",
    "abram456": "I integrated Hybridauth 2.5 years back, and now I facing issue with facebook v2.4 app. It is working with v2.2. Is there an update to support v2.4 app?\n. If I upgrade the hybridauth to current master version, will it work for facebook new apps?\n. You must enable a couple API's for things to work as expected.\nFirst go to https://console.developers.google.com and make sure under \"APIs\" that you have the \"Contacts API\" and \"Google+ API\" enabled. Once that is done you should no longer see that error message. =)\n. @tanmayk Awsome answer with clear instructions, thanks a lot. SHould we upgrade the facebook graph SDK, ALso please update with clear instructions. Thanks @ApacheEx . ",
    "RRajnishR": "I am facing the same problem but in Google authentication. I have enabled both google+ api and contacts api, still stuck at same place.\nany pointers to resolve this one?. I am stuck at this problem from last 4 days. Was anyone able to solve it?. @ApacheEx Hey, I have solved the redirect mismatch problem, but I don't understand how \"endpoint?hauth.done=google\" is working because in my case nothing happens. Also, if I use another custom redirect_URI, how should I retrieve the user profile information after allowing the permissions and redirection to the redirect_uri.\n. @ApacheEx Hi, Thanks again for your reply.\nI have changed my endpoint function a little, like this:\nfunction hybridauth_endpoint( $action, $provider ) { \n        include APPPATH.\"vendor/hybridauth/hybridauth/hybridauth/Hybrid/Auth.php\";\n        include APPPATH.\"vendor/hybridauth/hybridauth/hybridauth/Hybrid/Endpoint.php\";\n        $key = 'hauth_' . $action; // either `hauth_start` or `hauth_done`\n        $_REQUEST[ $key ] = $provider; // provider will be something like `facebook` or `google`\n        Hybrid_Endpoint::process();\n    }\nand to access it I use \"http://localhost/project/google_auth/hybridauth_endpoint/done/google\" as my redirect uri. Now as soon as app asks for permission and I allow it, it throws this exception:\nexception 'Exception' with message 'User profile request failed! Google returned an error: The Authorization Service has return: invalid_request' in C:\\wamp64\\www\\project\\application\\vendor\\hybridauth\\hybridauth\\hybridauth\\Hybrid\\Auth.php:169 Stack trace: #0 C:\\wamp64\\www\\project\\application\\vendor\\hybridauth\\hybridauth\\hybridauth\\Hybrid\\Auth.php(55): Hybrid_Auth::initialize(Array) #1 C:\\wamp64\\www\\project\\application\\controllers\\Google_auth.php(38): Hybrid_Auth->__construct(Array) #2 [internal function]: Google_auth->signin_with_hybridauth('google') #3 C:\\wamp64\\www\\project\\system\\core\\CodeIgniter.php(514): call_user_func_array(Array, Array) #4 C:\\wamp64\\www\\project\\index.php(315): require_once('C:\\wamp64\\www\\l...') #5 {main}\nI searched and found that others have corrected this by enabling google+ API and contacts API in their console. I have already enabled both of them but still facing this issue.\nCan you tell me what am I doing wrong?. @ApacheEx  Here is the main code:\n````\npublic function signin_with_hybridauth( $provider ) {\n        $config = array(\n          \"base_url\" => base_url('vendor/hybridauth/hybridauth/hybridauth/'),\n          'callback' => 'http://localhost/project_new/google_auth',\n          \"providers\" => array (\n            \"Google\" => array (\n              \"enabled\" => true,\n              \"keys\"    => array ( \"id\" => \"54564503190-cdqjo8a8pt756jk8jba50min30fcnhbn.apps.googleusercontent.com\", \"secret\" => \"0ihSl-El4d8EdOn1QX0Wef_P\" ),\n              \"redirect_uri\" => \"http://localhost/project_new/google_auth/hybridauth_endpoint/done/Google\",\n              \"scope\" => \"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/plus.profile.emails.read\",\n        )));\n        include APPPATH.\"vendor/hybridauth/hybridauth/hybridauth/Hybrid/Auth.php\";\n        $base_url = 'http://localhost/project_new/google_auth/hybridauth_endpoint';\n        try{\n            $hybridauth = new Hybrid_Auth( $config );\n    // we'll need to tell HybridAuth to use custom endpoint URLs\n    $adapter    = $hybridauth->authenticate( $provider, array(\n        'login_start' => $base_url . '/start/' . strtolower( $provider ),\n        'login_done'  => $base_url . '/done/'  . strtolower( $provider ),\n    ) );\n\n    $user_profile = $adapter->getUserProfile();\n    $tokens = $adapter->getAccessToken();\n    } catch(Exception $e){\n        echo \"<br/>\".$e;\n    }\n\n```\n//I have used above function to start the authentication process. Please have a look.\n//P.S: I tried to run it by changing 'google' to 'Google' and adding the scope you provided, still the same problem.. Thanks alot. I was trying to override all the methods to suit my project's structure, anyways I deleted the code and started from scratch. Everything is working fine now.\nMany Thanks again.. ",
    "jossday": "Ok, sorry I only wanted to help people who could look for this.\n. ",
    "lostncg": "Weired bug, i cant figure out why\n. ",
    "Steeveuk": "I forgot to post the fix which was because i didn't have trustForwarded set to true. It fixed after that. Hope it helps someone in future!\n. ",
    "kocsismate": "@Steeveuk So you only had to add a trustForwarded\" => true to the Facebook config? Do you also use Hybridauth 2.6.0? For me, it always keeps returning 0 as the user id. :(\n. Unfortunately, I no longer have access to the code for which I needed Hybridauth ^^\n. ",
    "deepdev-hk": "if you Amazon Cloud , you may modify as follow:\n./Hybrid/thirdparty/Facebook/base_facebook.php\nline 1251:\nunder \"protected function getHttpProtocol() {\"\nreturn 'https';\nor\nif (isset($_SERVER['HTTP_CLOUDFRONT_FORWARDED_PROTO'])) {\n          if ($_SERVER['HTTP_CLOUDFRONT_FORWARDED_PROTO'] === 'https') {\n            return 'https';\n          }\n          return 'http';\n    }\nand also ./config.php,'base_url' changed http to https\nor\n\"base_url\" => ($_SERVER['HTTP_CLOUDFRONT_FORWARDED_PROTO'] === 'https')?\"https://xxx\":\"http://xx\",\nhope it helps  you,@Steeveuk \n. ",
    "driade": "I'd also suggest to look over the way values are returned. The document below seems to state the \"min\" value returned is \"greater or equal\", not \"greater\", as returned now.\nhttps://developers.google.com/+/web/api/rest/latest/people#resource-representations\nIf accepted it should be obvious to considerate too the returned value for \"max\".\nThank you.\n. I'm very sorry my branch was not synced. \n. @cobenash @uitlaber I had today to add the https URL to the list of valid URLs to redirect, in section session login with Facebook. Previously I just had the http ones (don't event know why it worked, but it did).\nSo, now, I have both http://site.com/social/auth and https://site.com/social/auth, been the https the good and the missing one.. @StorytellerCZ @Tomicapo May still be wrong?\nIf I use Facebook Graph API to ask for 104097519627871?fields=id,location,about,name I get\n{\n  \"id\": \"104097519627871\",\n  \"location\": {\n    \"city\": \"Alcorc\u00f3n\",\n    \"country\": \"Spain\",\n    \"latitude\": 40.35,\n    \"longitude\": -3.8333333333333,\n    \"zip\": \"28921\u201328925\"\n  },\n  \"name\": \"Alcorc\u00f3n\"\n}\nIs this compatible with this line at Facebook.php?\n$this->user->profile->region = (array_key_exists(\"location\", $data) && array_key_exists(\"name\", $data['location'])) ? $data['location'][\"name\"] : \"\";. Hello. I ran into the same problem today, upgrading (ug) from 2.6 to 2.8 because of the deprecation of Facebook Api 2.3\nI then realized the function setUserStatus doesn't exist anymore, as it was removed in #665 \nIf you need 2.8 (surely if you use Facebook API 2.3 from now on) you may use this snippet\n$adapter->adapter->api->post('/me/feed', [\n    'link'    => $link,\n    'message' => $message,\n], $adapter->adapter->token('access_token'));\nPlease be aware this snippet is valid if you want to post to someone's status\nI'm going to see if I'm able to create a pull request for this.. @annuh may help with this. Facebook missing setUserStatus Fixes #745 . I'm sorry I couldn't completely take a look at the changes in b1c89a29de513e911a6c37bb9305a1d6250aa0f5 to see if there's anything more missing, but this method definitely is.. It was incomplete.. @birdy247 please check #745 for an alternative way to set the user status while this is merged.. Can confirm too it's due to a change in the Facebook API. Upgraded composer yesterday to 2.8.* and got it working with no further changes in my code but the issue described in #745 . ",
    "Askar-Rymbayev": "https://hybridauth.github.io/hybridauth/userguide/IDProvider_info_Google.html\nThere is answer. ",
    "lsolesen": "I think the commit can safely be added. It does not break anything and test\nwill pass as the phpcs.xml reflects the current coding standards. That will\nhelp not introduce other violations. Then in 3.x branch we can remove the\nmodifications to the psr2 coding standard and get 3.x closer to psr2. If\nyou accept and merge the pull request into 3.x branch also.I will help fix\nup the violations.\nDen man. 2. maj 2016 02.42 skrev Nazar Mokrynskyi <notifications@github.com\n\n:\nI'd say all stuff of this kind should only target 3.x branch. And 3.x\nshould be fixed as alpha release and finally moving towards stable.\nOtherwise 2.x diverges further and it would be very difficult to bring\neverything back.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub\nhttps://github.com/hybridauth/hybridauth/pull/641#issuecomment-216084903\n. \n",
    "ddsky": "Same here.. got the same problem, tells me \n\nThe redirect URI in the request, https://yoursite.com/hybridauth/?hauth.done=Google, does not match the ones authorized for the OAuth client. Visit...\n\nI added both hauth.done=Google and hauth_done=Google as callbacks.. @hellboy81 seems like you solved the problem, I don't understand how though. My redirect URL has only the hauth.done=Google parameter and the message from Google claims I didn't configure that. Do you have a hint for me?. No CMS, all self-coded. It used to work until I updated so I figured it must be an issue with hybridauth. Also I downgraded again and it is working with the old code.. @ApacheEx version 2.1.2. @ApacheEx No, but where would that go, I didn't find any sample where the redirec_uri would be mentioned in the HA config?. ",
    "eduardo-marcolino": "As requested #646 #378 \n. Yeah me too, but that's the only size returned by the API\n. It's not in the docs. You can see a http response sample here https://github.com/hansott/pinterest-php/blob/master/tests/Pinterest/responses/get_v1_me_url_id_username_first_name_last_name_bio_created_at_counts_image.json.\nNp man, i hope it helps! =)\n. ",
    "vinothrajm": "Hi,\nLogin with yahoo doesn't work. I'm getting the following error.\nexception 'Exception' with message 'User id request failed! Yahoo returned an invalid response: stdClass::__set_state(array( 'error' => stdClass::__set_state(array( '@lang' => 'en-US', '@uri' => 'http://yahoo.com', 'description' => 'Access forbidden for the user as cookie validation failed', 'detail' => 'Access forbidden for the user as cookie validation failed', )), ))' in socialauth/Hybrid/Providers/Yahoo.php:270\nCan you please help to resolve the issue.. Hi,\nI have upgraded to latest hybridauth library files.\nI get the following error while login with Facebook.\nAccess token metadata contains unexpected app ID.0\nNote: It is working fine in my localhost. But not working in Live server.\nPlease help me.. @ApacheEx\nHi,\n\nI have installed 2.x library files\nI don't use composer. I have downloaded SDK files\nAPI 2.8\nYes. I have checked it . Facebook id and secret key  are correct.. @ApacheEx \n\nThank you.\nI have installed sdk 5.4 downlaoded from https://github.com/facebook/php-graph-sdk\nI use CakePHP frame work. I tried in another website also. But i have the same error.\nexception 'Exception' with message 'Access token metadata contains unexpected app ID.' . @ApacheEx \npublic function validateAppId($appId)\n    {   \n    if ($this->getAppId() !== $appId) {\n        throw new FacebookSDKException('Access token metadata contains unexpected app ID.', 401);\n    }\n}\n\nI get $appId as Integer and $this->getAppId() as String.\nSo, that it throws an error.\n. @ApacheEx \nThank you.. @ApacheEx \nI have updated the changes in #788 \nNow it is working fine. \nBut users need to authorize the app every time they login with Yahoo.\n\n. ",
    "holmescn": "The original implementation just do redundant works that HybridAuth already done. I don't think anything should be marked as depreciated because they are different implementation. If I do it, perhaps everything in the original one will be marked deprecated, and should be eliminated in the next version.\n. I thought the best way is to make another PR that rename my implementation.\n. ",
    "papakay": "Please i'm having similar issue on Digital ocean with php7.0.\nIt works fine on localhost. Please how can i resolve this issue?\nThank you.\n. ",
    "himanshu208": "Hi\nI have same problem did any one got  any solution to resolve this??. ",
    "Neticx": "what the solution? i didnt found the solution but the issues has been closed. ",
    "CT-NetService": "What's the solution for this issue? Latest version 2 and running on PHP 5.6 and Nginx.\nExact same issue as the OP.. My log:\nDEBUG -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Auth initialize. dump current session:  --\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Auth initialize: check if any error is stored on the endpoint...\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Auth initialize: no error found. initialization succeed.\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Enter Hybrid_Auth::authenticate( facebook )\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Auth::authenticate( facebook ), User not connected to the provider. Try to authenticate..\nDEBUG -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Enter Hybrid_Auth::setup( facebook ) --\nDEBUG -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Auth::setup( facebook ), no params given. Trying to get the stored for this provider. --\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Auth::setup( facebook ), no stored params found for this provider. Initialize a new one for new session\nDEBUG -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Auth::setup( facebook ). HybridAuth Callback URL set to:  -- https://subdomain.domain.com/user/index.php?provider=facebook\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Enter Hybrid_Provider_Adapter::factory( facebook )\nDEBUG -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Provider_Model::__construct( Facebook ) initialized. dump current adapter instance:  -- O:25:\"Hybrid_Providers_Facebook\":9:{s:5:\"scope\";a:3:{i:0;s:5:\"email\";i:1;s:13:\"user_birthday\";i:2;s:13:\"user_hometown\";}s:3:\"api\";O:17:\"Facebook\\Facebook\":9:{s:6:\"app\";C:20:\"Facebook\\FacebookApp\":48:{183307875623441|49db17e6cf28cc9e43a97d5d233ebbae}s:9:\"client\";O:23:\"Facebook\\FacebookClient\":2:{s:17:\"enableBetaMode\";b:0;s:20:\"httpClientHandler\";O:43:\"Facebook\\HttpClients\\FacebookCurlHttpClient\":4:{s:19:\"curlErrorMessage\";s:0:\"\";s:16:\"curlErrorCode\";i:0;s:14:\"rawResponse\";N;s:15:\"facebookCurl\";O:33:\"Facebook\\HttpClients\\FacebookCurl\":1:{s:7:\"curl\";N;}}}s:15:\"oAuth2Client\";N;s:22:\"urlDetectionHandler\";O:40:\"Facebook\\Url\\FacebookUrlDetectionHandler\":0:{}s:30:\"pseudoRandomStringGenerator\";O:61:\"Facebook\\PseudoRandomString\\McryptPseudoRandomStringGenerator\":0:{}s:21:\"defaultAccessToken\";N;s:22:\"defaultGraphVersion\";s:4:\"v2.8\";s:24:\"persistentDataHandler\";O:59:\"Facebook\\PersistentData\\FacebookMemoryPersistentDataHandler\":1:{s:14:\"sessionData\";a:0:{}}s:15:\"*lastResponse\";N;}s:11:\"useSafeUrls\";b:1;s:10:\"providerId\";s:8:\"Facebook\";s:6:\"config\";a:4:{s:7:\"enabled\";b:1;s:4:\"keys\";a:2:{s:2:\"id\";s:15:\"183307875623441\";s:6:\"secret\";s:32:\"49db17e6cf28cc9e43a97d5d233ebbae\";}s:5:\"scope\";s:35:\"email, user_birthday, user_hometown\";s:14:\"trustForwarded\";b:0;}s:6:\"params\";a:1:{s:15:\"hauth_return_to\";s:60:\"https://subdomain.domain.com/user/index.php?provider=facebook\";}s:8:\"endpoint\";N;s:4:\"user\";O:11:\"Hybrid_User\":3:{s:10:\"providerId\";s:8:\"Facebook\";s:9:\"timestamp\";i:1527457408;s:7:\"profile\";O:19:\"Hybrid_User_Profile\":24:{s:10:\"identifier\";N;s:10:\"webSiteURL\";N;s:10:\"profileURL\";N;s:8:\"photoURL\";N;s:11:\"displayName\";N;s:11:\"description\";N;s:9:\"firstName\";N;s:8:\"lastName\";N;s:6:\"gender\";N;s:8:\"language\";N;s:3:\"age\";N;s:8:\"birthDay\";N;s:10:\"birthMonth\";N;s:9:\"birthYear\";N;s:5:\"email\";N;s:13:\"emailVerified\";N;s:5:\"phone\";N;s:7:\"address\";N;s:7:\"country\";N;s:6:\"region\";N;s:4:\"city\";N;s:3:\"zip\";N;s:9:\"job_title\";N;s:17:\"organization_name\";N;}}s:10:\"compressed\";b:0;}\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Enter Hybrid_Provider_Adapter::login( Facebook )\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Enter [Facebook]::logout()\nDEBUG -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Hybrid_Provider_Adapter::login( Facebook ), redirect the user to login_start URL. --\nINFO -- 82.72.13.xxx -- 2018-05-27T21:43:28+00:00 -- Enter Hybrid_Auth::redirect( https://subdomain.domain.com/assets/functions/hybridauth/?hauth.start=Facebook&hauth.time=1527457408, PHP )\n. ",
    "CommandFox": "Sorry, saw it already exists...\n. ",
    "nicolaiskogheim": "I'm sticking with 2.7. Just got it working with Google auth.\nI tried 3.0.0, but because of #200, caused by https://github.com/hybridauth/hybridauth/blob/3.0.0/src/Hybridauth/Endpoint.php#L120, that was a no-go.\n. Yes, it's too bad that good projects die out. Glad to hear you got it working.\nWe just discovered laravel/socialite, and since we are using laravel, and socialite looks very easy to work with, we switched to that.\n. ",
    "JeSuisAlrick": "Well, 3.0.0-Remake \"was\" a work-in-progress that seems to have stopped, but I did get it to work with my application. I've been making changes and fixing bugs in this fork https://github.com/KingstonCloudOrg/hybridauth/tree/3.0.0-Remake.\nThe library is good--it just needs some TLC.\n. Will do.\nOn Sep 4, 2016 10:23 PM, \"Jan Dvorak\" notifications@github.com wrote:\n\nIf you guys are fixing things, please submit PR back so that we can\nincorporate those for everyone. Thanks!\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/issues/660#issuecomment-244651151,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAKzqudH4eDtzzgB-U8CLLJjktSL_SJAks5qm4s9gaJpZM4JEseH\n.\n. \n",
    "inquam": "How is 3.0 coming along? Seems like development has stalled a bit? Why not enable this for the 2.x version? Many providers use custom oauth clients to make this work at the moment or other hacks.\n. ",
    "avallac": "Check. What is the problem?\n. Your code is horrible. Check $_SESSION before create instance of Hybrid_Auth. \n. ",
    "airtonjr": "No code. No problem. Right?\n. @avallac It is the code that I found as an example for the Hybrid. If it is crappy, sorry, I can change it in the Hybrid website. If you think it is horrible, you should go in the website and change it and put something that works. \n. ",
    "egyptianbman": "According to Facebook's website, version 2.1 will no longer be available after October 30, 2016. Are there plans to migrate off of version 2.1 by then?\n. You sir, are a Godsend. Thank you for doing this!\n@StorytellerCZ, maybe add a minor version commit before merging this in that trigger_errors an E_USER_WARNING to let people know that they need to upgrade before October 30th?\n. I have to say, I don't agree with you, @Shade-.\nThere are two major issues with continuing to support old versions such as PHP 5.2 and 5.3:\n1. In a way, supporting such old versions is \"promoting\" using the old versions. Many a developer will not upgrade until they're forced to. While I understand some may not be able to due to other dependencies, that's why there is versioning in place. Those people can choose to stay on version 2.7 of hybridauth until they can properly upgrade their version of PHP.\n2. Software evolves. Changes are introduced constantly and not utilizing composer or continuing to support very old versions of PHP just complicates development and maintenance of this project.\nIf someone isn't using composer, they have the ability to check out various versions of this library. They also have the ability to cherry-pick what commits they want included. I don't see staying up-to-date as damaging in any way since there are more than enough options for those who choose to remain on an outdated version of PHP and/or not use composer.\n. ",
    "annuh": "I will try to update the Facebook provider this week. I'll keep you posted.\n. @sleepndevelop Thanks for testing my fork.\nDo manually load the class files in your php files? If you use Composer autoloading all the required class files should be included automatically.\nIf you include the following line at the top of your php script, the Facebook class should be loaded automatically, since it is included in the autload.php file that Composer created.\nrequire __DIR__ . '/vendor/autoload.php'\nYou may need to change the path to the correct location of the autoload.php file.\n. @pbscreativeben It looks like you have outdated code. You can clone the latest version from https://github.com/annuh/hybridauth.\nThis should fix both your problems. If the problem still occurs, could you give the redirect_uri that you entered in the Facebook app? It should look like http://mywebsite.com/path_to_hybridauth/?hauth_done=Facebook\n. @hellboy81 No, that is not needed. You only need the hauth_done parameter.. @Shade- It doesn't really matter. A common way is to create a folder 'Vendor' and put all external libraries in this folder.\nWhenever you include the HybrydAuth library, you also need to require the Facebook library, using ie.\nrequire_once __DIR__ . 'Vendor/facebook-sdk-v5/autoload.php';``\n. @Shade- You can also runcomposer install` on your local machine and transfer all files together via ie. FTP. ",
    "sleepndevelop": "Hi annuh, thank you for your update. \nBut i can't get it to work.\nI have \n- downloaded the hybridauth-master zip from your annuh/hybridauth repo\n- copied the contents of hybridauth-master into the proper place within my project\n- cd to that directory \n- run 'composer install' with success, it correctly downloaded the fb php graph sdk 5.4.1 etc.\nBut when i try doing a facebook login on my site, it says\nFatal error: Class 'Facebook\\Facebook' not found in C:\\xampp183\\htdocs\\savebybooking\\protected\\modules\\user\\vendors\\hybridauth\\Hybrid\\Providers\\Facebook.php on line 56\n. ",
    "reinos": "Not that i know the answer or that i can answer your question; but you should explain your problem. What did you do, what is the error etc...\n. ",
    "isantolin": "@rittresultater send as PR\n. @ApacheEx can you modify to HybridAuth 3?. @robert81 \nContact @StorytellerCZ. @StorytellerCZ Can be closed by #737 . Upgrading to 2.9.2-dev still occurs?. @nntoan you can create a PR and submit the changes. ",
    "rittresultater": "Done\n. ",
    "vmtv": "diff --git a/sites/all/libraries/hybridauth/hybridauth/Hybrid/thirdparty/OAuth/OAuth2Client.php b/sites/all/libraries/hybridauth/hybridauth/Hybrid/thirdparty/OAuth/OAuth2Client.php\nindex c9bc769..b76f58c 100644\n--- a/sites/all/libraries/hybridauth/hybridauth/Hybrid/thirdparty/OAuth/OAuth2Client.php\n+++ b/sites/all/libraries/hybridauth/hybridauth/Hybrid/thirdparty/OAuth/OAuth2Client.php\n@@ -233,14 +233,14 @@\n if( $type == \"POST\" ){\n   curl_setopt($ch, CURLOPT_POST, 1);\n\n\nif($params) curl_setopt( $ch, CURLOPT_POSTFIELDS, $params );\nif($params) curl_setopt( $ch, CURLOPT_POSTFIELDS, http_build_query($params, '', '&') );\n     }\n     if( $type == \"DELETE\" ){\n         curl_setopt($ch, CURLOPT_CUSTOMREQUEST, \"DELETE\");\n     }\n     if( $type == \"PATCH\" ){\n       curl_setopt($ch, CURLOPT_POST, 1);\nif($params) curl_setopt( $ch, CURLOPT_POSTFIELDS, $params );\nif($params) curl_setopt( $ch, CURLOPT_POSTFIELDS, http_build_query($params, '', '&') );\n       curl_setopt($ch, CURLOPT_CUSTOMREQUEST, \"PATCH\");\n     }\n     $response = curl_exec($ch);. \n",
    "rnagulapalle": "We have same issue and even if I change that value to true and it still going to sandbox URLs. Any thing else we are missing? Would appreciate your help!\n. Thank you so much.. do you think it's quite a big change or few lines of\ncode? If you can give me reference I can contribute as well\n.. thanks again\nRaj\nOn Tue, Aug 22, 2017 at 10:19 PM Oleg Kuzava notifications@github.com\nwrote:\n\nyeah, it seems PayPal doesn't work because OAuth2 api looks quite\ndifferent as current implementation. I will take care about it as soon as\npossible.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/issues/856#issuecomment-324223854,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFwWsHqDQhkwhHpDP8dgT8pvyzN6K7tCks5sa7ZUgaJpZM4O_ViK\n.\n-- \nThanks,\n-Raj\n. Thank you and will do test them today and let you know\n\nOn Wed, Aug 23, 2017 at 3:50 AM Oleg Kuzava notifications@github.com\nwrote:\n\nHi @rnagulapalle https://github.com/rnagulapalle,\nhere is a PR #857 https://github.com/hybridauth/hybridauth/pull/857,\nsorry for a lot of changes, but in short I tried to make it more accurate.\nPls check if it works, then will merge and release changes.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/issues/856#issuecomment-324293137,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFwWsHYlz0RzumzclE2SMZOzEI0NwZdOks5sbAPygaJpZM4O_ViK\n.\n-- \nThanks,\n-Raj\n. Second step under description is not clear. where is that config file exists?. We are seeing this error\nPHP Fatal error:  Class 'PayPal\\Rest\\ApiContext' not found in /var/www/sites/all/libraries/hybridauth/hybridauth/Hybrid/Providers/Paypal.php on line 82, referer: https://www.paypal-apps.com/user/my-account/applications\n\nwe copied PayPal under lib folder of SDK..\n. I have direct downloaded (as this drupal app is not config with composer) and then unzipped. After unzip I found this folder structure https://github.com/paypal/PayPal-PHP-SDK. I moved PayPal folder under lib to\n/var/www/sites/all/libraries/hybridauth/hybridauth/Hybrid/thirdparty/PayPal\nwhen i do ls on this folder i see this\nApi\nAuth\nCache\nCommon\nConverter\nCore \n Exception\nHandler\nLog\nRest\nSecurity\nTransport\nValidation\nIts trying to initialize APIContext and fails with FATAL error\n. nice that worked... i have removed old hybridauth and forked from your fix branch. then re-installed. I see config file without PayPal as provide. Is thats the i have add PayPal with baseurl and client_id and secret? can you please help me..\nI see this file under /var/www/sites/all/libraries/hybridauth/hybridauth\nreturn array(\n    \"base_url\" => \"http://localhost/hybridauth-git/hybridauth/\",\n    \"providers\" => array(\n        // openid providers\n        \"OpenID\" => array(\n            \"enabled\" => true,\n        ),\n        \"Yahoo\" => array(\n            \"enabled\" => true,\n            \"keys\" => array(\"id\" => \"\", \"secret\" => \"\"),\n        ),\n        \"AOL\" => array(\n            \"enabled\" => true,\n        ),\n        \"Google\" => array(\n            \"enabled\" => true,\n            \"keys\" => array(\"id\" => \"\", \"secret\" => \"\"),\n        ),\n        \"Facebook\" => array(\n            \"enabled\" => true,\n            \"keys\" => array(\"id\" => \"\", \"secret\" => \"\"),\n            \"trustForwarded\" => false,\n        ),\n        \"Twitter\" => array(\n            \"enabled\" => true,\n            \"keys\" => array(\"key\" => \"\", \"secret\" => \"\"),\n            \"includeEmail\" => false,\n        ),\n        // windows live\n        \"Live\" => array(\n            \"enabled\" => true,\n            \"keys\" => array(\"id\" => \"\", \"secret\" => \"\"),\n        ),\n        \"LinkedIn\" => array(\n            \"enabled\" => true,\n            \"keys\" => array(\"id\" => \"\", \"secret\" => \"\"),\n            \"fields\" => array(),\n        ),\n        \"Foursquare\" => array(\n            \"enabled\" => true,\n            \"keys\" => array(\"id\" => \"\", \"secret\" => \"\"),\n        ),\n    ),\n    // If you want to enable logging, set 'debug_mode' to true.\n    // You can also set it to\n    // - \"error\" To log only error messages. Useful in production. another question.. as part of second step you mentioned below lines\n$hybridauth = new Hybrid_Auth($config);\n$adapter = $hybridauth->authenticate(\"Paypal\");\n$user_profile = $adapter->getUserProfile();\nwhere this goes?. Thank you and really appreciate your help\nOn Wed, Aug 23, 2017 at 12:48 PM Oleg Kuzava notifications@github.com\nwrote:\n\nGetting user profile is already implement there and my example doesn't\nmake sense for drupal case. \ud83d\ude0e it should work as expected\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/pull/857#issuecomment-324443076,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFwWsPxomKgHREqy1q_yaQt_-WE52nL_ks5sbIIqgaJpZM4O_0J7\n.\n-- \nThanks,\n-Raj\n. Yes we use drupal module\n\nOn Wed, Aug 23, 2017 at 12:47 PM Oleg Kuzava notifications@github.com\nwrote:\n\nHave you use drupal hybridauth module as well?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/pull/857#issuecomment-324442752,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFwWsODgBHfhSMr-NLF4w2XG9y3R8ALOks5sbIHRgaJpZM4O_0J7\n.\n-- \nThanks,\n-Raj\n. Sorry to bother you and after integrating new changes we are still seeing same issue. here is the server log\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/hybridauth/endpoint?hauth.done=Paypal&code=C21AAFHf4GZryy3_5ZEC7PkxeV7uETroRaESd04VDlVwmsQsgnc1j-7vMBT2D5QyzPx9I-UlNYym8FUIBX2ESQO7w7yrPxVrA&scope=openid|https://www.paypal.com/signin/consent|0||Strict warning: Declaration of Messaging_User_Destination::validate_address() should be compatible with Messaging_Destination::validate_address($address, $type = NULL) in _registry_check_code() (line 3186 of /var/www/includes/bootstrap.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/hybridauth/endpoint?hauth.done=Paypal&code=C21AAFHf4GZryy3_5ZEC7PkxeV7uETroRaESd04VDlVwmsQsgnc1j-7vMBT2D5QyzPx9I-UlNYym8FUIBX2ESQO7w7yrPxVrA&scope=openid|https://www.paypal.com/signin/consent|0||Strict warning: Declaration of Messaging_User_Destination::format_address() should be compatible with Messaging_Destination::format_address($address, $format = MESSAGING_FORMAT_PLAIN, $type = NULL) in _registry_check_code() (line 3186 of /var/www/includes/bootstrap.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/hybridauth/endpoint?hauth.done=Paypal&code=C21AAFHf4GZryy3_5ZEC7PkxeV7uETroRaESd04VDlVwmsQsgnc1j-7vMBT2D5QyzPx9I-UlNYym8FUIBX2ESQO7w7yrPxVrA&scope=openid|https://www.paypal.com/signin/consent|0||Strict warning: Declaration of Messaging_Mail_Address::validate_address() should be compatible with Messaging_Destination::validate_address($address, $type = NULL) in require_once() (line 207 of /var/www/sites/all/modules/contrib/messaging/messaging_mail/messaging_mail.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/hybridauth/window/Paypal?destination=user/my-account/applications&destination_error=user/my-account/applications|https://www.paypal.com/signin/consent|0||Strict warning: Declaration of Messaging_User_Destination::validate_address() should be compatible with Messaging_Destination::validate_address($address, $type = NULL) in _registry_check_code() (line 3186 of /var/www/includes/bootstrap.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/hybridauth/window/Paypal?destination=user/my-account/applications&destination_error=user/my-account/applications|https://www.paypal.com/signin/consent|0||Strict warning: Declaration of Messaging_User_Destination::format_address() should be compatible with Messaging_Destination::format_address($address, $format = MESSAGING_FORMAT_PLAIN, $type = NULL) in _registry_check_code() (line 3186 of /var/www/includes/bootstrap.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/hybridauth/window/Paypal?destination=user/my-account/applications&destination_error=user/my-account/applications|https://www.paypal.com/signin/consent|0||Strict warning: Declaration of Messaging_Mail_Address::validate_address() should be compatible with Messaging_Destination::validate_address($address, $type = NULL) in require_once() (line 207 of /var/www/sites/all/modules/contrib/messaging/messaging_mail/messaging_mail.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|hybridauth|10.22.146.124|https://www.paypal-apps.com/hybridauth/window/Paypal?destination=user/my-account/applications&destination_error=user/my-account/applications|https://www.paypal.com/signin/consent|0||Exception: Could not resolve host: api.paypal.com in Hybrid_Auth::initialize() (line 169 of /var/www/sites/all/libraries/hybridauth/hybridauth/Hybrid/Auth.php).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/user/my-account/applications|https://www.paypal-apps.com/hybridauth/window/Paypal?destination=user/my-account/applications&destination_error=user/my-account/applications|0||Strict warning: Declaration of Messaging_User_Destination::validate_address() should be compatible with Messaging_Destination::validate_address($address, $type = NULL) in _registry_check_code() (line 3186 of /var/www/includes/bootstrap.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/user/my-account/applications|https://www.paypal-apps.com/hybridauth/window/Paypal?destination=user/my-account/applications&destination_error=user/my-account/applications|0||Strict warning: Declaration of Messaging_User_Destination::format_address() should be compatible with Messaging_Destination::format_address($address, $format = MESSAGING_FORMAT_PLAIN, $type = NULL) in _registry_check_code() (line 3186 of /var/www/includes/bootstrap.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|php|10.22.146.124|https://www.paypal-apps.com/user/my-account/applications|https://www.paypal-apps.com/hybridauth/window/Paypal?destination=user/my-account/applications&destination_error=user/my-account/applications|0||Strict warning: Declaration of Messaging_Mail_Address::validate_address() should be compatible with Messaging_Destination::validate_address($address, $type = NULL) in require_once() (line 207 of /var/www/sites/all/modules/contrib/messaging/messaging_mail/messaging_mail.inc).\nAug 23 20:05:43 ppalc-app-1-5835 drupal: https://www.paypal-apps.com|1503518743|access denied|10.22.146.124|https://www.paypal-apps.com/user/my-account/applications|https://www.paypal-apps.com/hybridauth/window/Paypal?destination=user/my-account/applications&destination_error=user/my-account/applications|0||user/my-account/applications. Yes disabled sanbox and I have to check db logs .. since am not able I\ncan't access admin. Will have to see syslog\n\nOn Wed, Aug 23, 2017 at 1:15 PM Oleg Kuzava notifications@github.com\nwrote:\n\nSo you have disabled sandbox mode, right? Is there any errors in db logs\n(watchdog)?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/pull/857#issuecomment-324449591,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFwWsLC8m62Sr5vDHTbAUPjioqVXVjZyks5sbIhagaJpZM4O_0J7\n.\n-- \nThanks,\n-Raj\n. i have this version of php PHP 5.6.12-1+deb.sury.org~trusty+1 (cli). thanks again and i see if i have any update end of the day..let you know... It looks like our environment issue and api.paypal.com is blocked from it.. Yes it works fine now.. thanks again for your help\n\nOn Tue, Aug 29, 2017 at 12:20 AM Oleg Kuzava notifications@github.com\nwrote:\n\n@rnagulapalle https://github.com/rnagulapalle,\nIt looks like you have fixed issue with blocking api.paypal.com, is it\nworking now?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/pull/857#issuecomment-325577204,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFwWsIJ--qwFH06ua_3lP2RZmTagIfIwks5sc7uwgaJpZM4O_0J7\n.\n-- \nThanks,\n-Raj\n. \n",
    "icurk": "I have removed the patch file.\n. ",
    "HealingRooms": "I'm having a particular problem with the most recent version (as of Nov 1, 2016) and Facebook, with the only code modified since updating being those of the hybridauth/config.php file.\nHere is one error, retrieved from the site's own error_log file\nPHP Fatal error:  Class 'Facebook\\Facebook' not found in /home/.../hybridauth-git/hybridauth/Hybrid/Providers/Facebook.php on line 56\nThat is the line starting with this:\n$this->api = new FacebookSDK([\nAnd here is part of another debugging line, retrieved from the custom debugging file, defined in the config.php file:\nHybrid_Auth::setup( Facebook ), no params given.\nIt, too, seems to be pointing to the Facebook function.\n. Thank you, @Shade- \nThis was installed via FTP, from the most recent downloadable zip file.\nDo you have any pointers for what would make this work?\n. Here is some progress, since my problem 9 days ago with trying a simple FTP approach to installing the HybridAuth. We upgraded the WHM to v60, upgraded to EasyApache4 (with some challenges), activated Composer, and we have installed the Facebook Graph SDK.\nWe got a developers key for Twitter, and the Twitter script seems to be working fine.  \nUnfortunately, the Facebook script included in the most recent download (9 days ago) seems to be missing something.\nPHP Fatal error:  Class 'Facebook\\Facebook' not found in /home/########/public_html/hybridauth-git/hybridauth/Hybrid/Providers/Facebook.php on line 57\nThe original first couple lines of Facebook.php are as follows:\nuse Facebook\\Exceptions\\FacebookSDKException;\nuse Facebook as FacebookSDK;\nThen lines 57 and 64 define the following:\n```\n$this->api = new Facebook\\Facebook([\n            'app_id' => $this->config[\"keys\"][\"id\"],\n            'app_secret' => $this->config[\"keys\"][\"secret\"],\n            'default_graph_version' => 'v2.8',\n            'trustForwarded' => $trustForwarded,\n]);\n$this->api = new FacebookSDK([\n            'app_id' => $this->config[\"keys\"][\"id\"],\n            'app_secret' => $this->config[\"keys\"][\"secret\"],\n            'default_graph_version' => 'v2.8',\n            'trustForwarded' => $trustForwarded,\n]);\n```\nWe've tried a work-around, by changing this line:\nuse Facebook as FacebookSDK;\nto this:\nuse Facebook\\Facebook as FacebookSDK;\n...but it only seems to shift the problem elsewhere on that Facebook.php file.\nDoes anyone thing that I might be missing something else that I didn't see in the documentation for HybridAuth?\n. Here is the MISSING INGREDIENT for the Facebook problem with the most recent version of HybridAuth (as of 2016-11-10).\nPut this line...\nrequire __DIR__ . '/../vendor/autoload.php';\n...at the top of hybridauth/index.php.\nThis was discovered by Keven Hughes at LiquidWeb.com.\n. ",
    "akf": "If you're not using composer, follow the link from the php-graph-sdk repo to https://developers.facebook.com/docs/php/gettingstarted -- and look at the section headed \"Manually installing (if you really have to)\". \nIt looks like the download button on that page gives you release 5.0.0, whereas you can get a much more recent version off github. \nProbably VERY IMPORTANT: https://github.com/facebook/php-graph-sdk has a README noting that it's not the stable branch, and to go to https://github.com/facebook/php-graph-sdk/tree/5.4 for stable. \n. ",
    "tobeorla": "@Shade- Since when staying on a shared host is a problem for using composer? Can't you just execute \"php composer.phar install\" via php exec?. @Shade- php exec does not require ssh access : S (http://php.net/manual/en/function.exec.php)\nAnd \"Many hostings are still stuck to older PHP versions unfortunately.\" that's wrong. Check the latest stats:\nhttps://seld.be/notes/php-versions-stats-2016-2-edition\nPHP 5.5.9   11.87%      PHP 5.6 39.67%\nPHP 7.0.6   10.39%      PHP 5.5 29.56%\nPHP 5.6.20  8.41%       PHP 7.0 20.24%\nPHP 5.6.21  7.69%       PHP 5.4 7.64%\nPHP 5.6.19  4.71%       PHP 5.3 2.43%\nPHP requirements in Packages present on packagist\n5.2 2.35% (-0.16)\n5.3 41.25% (-4.01)\n5.4 30.12% (-1.57)\n5.5 16.98% (+1.5)\n5.6 6.22% (+2.7)\n7.0 3.08% (+1.54)\nComposer requirement:  PHP 5.3 ...\nAnd it's quite easy, just switch to a better host. ovh.com , online.net, digitcalocean.com, etc..\nComposer is the present, not the future.. ",
    "kinmenRP": "sorry for the delay, I was away. Created the request. ",
    "carolinex": "I'm having a similar problem. I successfully connected to my own Google Account, at first, requesting only basic profile. \nThen I deauthorized the app in my account and added email to the scope list. Now I get the error mentioned by @andsh \n. ",
    "stormwalkerec": "I also have this issue. Had a working site, and was working 100%, and now it stopped working with zero code changes\nERROR: Exception: User profile request failed! Google returned an invalid response:stdClass::__set_state(array(\n'error' =>\nstdClass::__set_state(array(\n'errors' =>\narray (\n0 =>\nstdClass::__set_state(array(\n'domain' => 'global',\n'reason' => 'authError',\n'message' => 'Invalid Credentials',\n'locationType' => 'header',\n'location' => 'Authorization',\n)),\n),\n'code' => 401,\n'message' => 'Invalid Credentials',\n)),\n)) in /data/web/vendor/hybridauth/hybridauth/hybridauth/Hybrid/Providers/Google.php:90\nStack trace:\n0 /data/web/vendor/hybridauth/hybridauth/hybridauth/Hybrid/Provider_Adapter.php(242): Hybrid_Providers_Google->getUserProfile()\n1 /data/web/oauth_google.php(19): Hybrid_Provider_Adapter->__call('getUserProfile', Array)\n2 {main}.",
    "Alxdhere": "I had such error. I use Yii 1.x and PHP 5.5.9.\nFirstly I download https://github.com/facebook/php-graph-sdk and extract it in /opt/Facebook. Declare alias in Yii in config/main.php:\nYii::setPathOfAlias('Facebook','/opt/Facebook');\nThen, download https://github.com/paragonie/random_compat and extract it in /opt/random_compat. Add in index.php:\nrequire_once \"/opt/random_compat/lib/random.php\";\nThen, in controller write:\nif(!function_exists('hash_equals')) {\n    function hash_equals($str1, $str2) {\n        if(strlen($str1) != strlen($str2)) {\n            return false;\n        } else {\n            $res = $str1 ^ $str2;\n            $ret = 0;\n            for($i = strlen($res) - 1; $i >= 0; $i--) $ret |= ord($res[$i]);\n            return !$ret;\n        }\n    }\n}\nFacebook auth work fine!\n. ",
    "nodeffect": "Solution\nHi guys, I've actually solved the problem. This version is not as straight forward as the previous versions.\nYou do need to get the Facebook API from https://github.com/facebook/php-graph-sdk first.\nThen extract to the \"third party\" folder. You only need the folder that contains all the Facebook API files and folders. Examples for files: autoload.php, facebook.php, etc....  and it's folders including \"Authentication\", \"Exceptions\", etc.... \nThis is basically my structure. \"hybridauth\\Hybrid\\thirdparty\\Facebook\"\nThen, on your project, you'll need to include both the Hybridauth and the Facebook API. Example below:\nrequire_once('hybridauth/Hybrid/Auth.php');\nrequire_once('hybridauth/Hybrid/thirdparty/Facebook/autoload.php');\nOn, index.php and live.php under Hybridauth folder, I also added a new line under \"require_once( \"Hybrid/Endpoint.php\" );\". Not sure if this is necessary, but it works for me. \nExample:\nrequire_once( \"Hybrid/Auth.php\" );\nrequire_once( \"Hybrid/Endpoint.php\" );\nrequire_once( \"Hybrid/thirdparty/Facebook/autoload.php\" );\nThat's about it. \nExtra\nAlso, remember to change your Facebook settings \"Valid OAuth redirect URIs\".\nFrom:\nhttp://yourdomain.com/hybridauth/?hauth.done=Facebook\nTo:\nhttp://yourdomain.com/hybridauth/?hauth_done=Facebook\nNotice the hauth.done is not usable anymore for this latest version 2.8.0. You need to use hauth_done\n. @TheJoin95 I install HybridAuth manually. It's a temporary solution, hopefully they would include it in the next version.\n. @ramu2514 By now, please use only v5.4.0..\nIf you go here: https://github.com/facebook/php-graph-sdk you will see the message below:\nNOTICE: This branch is under active development. For the stable release please use the 5.4 branch.\nSo, in this case, you should use this version 5.4.0. I believe that the latest version is still under development. So no point using it. My solution above remains valid.. # New Solution for Hybridauth v2.8.2/3\nStory\nI've seen many people having this Facebook login problem on previous version because they did not include the Facebook API in it. And I did provide a solution for it on the previous ticket here https://github.com/hybridauth/hybridauth/issues/698.\nHowever, on the latest version of Hybridauth v2.8.2/3, many people still getting this error even though they included the Facebook API. And I think this is mainly because they missed out some stuffs and you might need to modify some files to make it work. Below is the solution and it's working for me so I hope it works for you guys too.\nSolution\nExtract the downloaded zip file. Your main folder should be \"hybridauth-master\"\nStep 1: On \\hybridauth-master folder. Run \"composer install\" and then you'll see a new folder called \"vendor\". (This is basically the Facebook API)\nStep 2: Place this line \"require_once('../vendor/autoload.php');\" on  \"\\hybridauth-master\\ hybridauth\\index.php\" and also \"live.php\". See example below:\nrequire_once( \"Hybrid/Auth.php\" );\nrequire_once( \"Hybrid/Endpoint.php\" );\nrequire_once('../vendor/autoload.php'); #add this new line\nStep 3: On your config file or your login page file, include this two lines like below:\n```\nHybridAuth - social login plug-in\nrequire_once('./inc/lib/hybridauth/hybridauth/Hybrid/Auth.php'); #Hybridauth API\nrequire_once('./inc/lib/hybridauth/vendor/autoload.php'); #Facebook API\n```\n. Have you whitelist google in your router ?. @jmgomezpoveda Thanks, I've updated my previous issue ticket.\nMod, please close this ticket. Thanks.. please read my solution https://github.com/hybridauth/hybridauth/issues/714. ",
    "ramu2514": "autoload.php is now removed from facebook sdk and is not available in latest revision.\nhttps://github.com/facebook/php-graph-sdk/commits/master\nUsing sdk version 5.4.0 helped me.\nhttps://codeload.github.com/facebook/php-graph-sdk/zip/5.4.0\n. ",
    "acrolink": "Please solve this issue.. ",
    "Omniru": "They are planning on fixing this right?\nIn response to nodeffect\nhttps://github.com/facebook/php-graph-sdk doesn't contain a file called \"autoload.php\" where is that at if I just want to download the source?\nNever mind, I found it here:\nhttps://developers.facebook.com/docs/php/gettingstarted#install-manually\nhttps://github.com/facebook/facebook-php-sdk-v4/archive/5.4.0.zip\nAlso, on my site I use more than just Facebook for login and using require_once( \"Hybrid/thirdparty/Facebook/autoload.php\" ); broke other login types for me. but using include_once(\"Hybrid/thirdparty/Facebook/autoload.php\"); worked for me.. ",
    "NinoSkopac": "Still broken with composer\n. # Solution if using Composer\nGo to vendor/hybridauth/hybridauth/hybridauth/index.php and add this:\nrequire __DIR__ . '/../../../autoload.php';\nI personally don't want to pollute files in vendor, so I'm just gonna use official PHP SDK, it's super simple to use it: https://developers.facebook.com/docs/php/howto/example_facebook_login. If that is latest, yes. . ",
    "gumdal": "I have followed this post but do not understand what has to be done in order to fix this error. Is the development version available with this fix yet? This seems to be a priority issue with many people relying on Facebook login.. ",
    "kapilgp": "Fix without composer\nActually we need to load the thirdparty library of facebook. So fix is following\nAdd below line in hybridauth\\Hybrid\\Providers\\Facebook.php\nrequire_once Hybrid_Auth::$config[\"path_libraries\"] . \"Facebook/autoload.php\";\n. ",
    "IRuslan": "@StorytellerCZ Hi, I've create a simple PR with fix. Works for me.. @StorytellerCZ I would love to do this, but could you point me where to add? I don't see any Stripe-specific docs.. ",
    "crueol": "@nodeffect thanks. I've followed your instruction and it works. I'm not use composer.. ",
    "9meAhmed": "I am having this error when trying to login with LinkedIn Error User has cancelled the authentication or the provider refused the connection.\nLinkedIn. i am new here and i just solved the facebook issue by this discussion\n . i have updated it to v2.9.5 now there is error or redirect url mismatch i am using codigniter what will we the url \ncontroler: hauth, function: linkto . https://my.hello44.com/hauth/callback\n. i have added Authorized Redirect URLs:\nhttps://my.hello44.com/hauth/callback?hauth.done=LinkedIn\nbut still the same error\n\n. i did that before but now i am having this error\nUser profile request failed. Most likely the user is not connected to the provider and he should to authenticate again. .   public function linkto($provider)\n    {\n    $valid_providers = array();\n    array_push($valid_providers,'facebook');\n    array_push($valid_providers,'google');\n    array_push($valid_providers,'googleplus');\n    array_push($valid_providers,'linkedin');\n    array_push($valid_providers,'twitter');\n    array_push($valid_providers,'yahoo');\n    array_push($valid_providers,'instagram');\n    //array_push($valid_providers,'openid');\n\n    if(in_array(strtolower($provider),$valid_providers))\n    {\n    }\n    else\n    {\n        redirect('index.php/profile/');\n        exit;\n    }\n\n    $this->load->model('site_core');\n    $this->site_core->login_check();\n\n    $this->credentials_arr = svar_get_credentials();\n    $this->api_config_path = $this->config->item('api_config_path');\n    $this->config->load($this->api_config_path.'common', FALSE, TRUE);\n    $this->config->load($this->api_config_path.'hauth', FALSE, TRUE);\n    $this->api_url = $this->config->item('BASE_URL');\n    $this->input->post(NULL, TRUE); // returns all POST items with XSS filter \n    //log_message('debug', \"controllers.HAuth.login($provider) called\");\n    if(_get_SESSION_VAL('sess_user_currency')==false)\n    {\n        redirect('index.php/profile/');\n        exit;\n    }\n\n\n    try\n    {\n        log_message('debug', 'controllers.HAuth.login: loading HybridAuthLib');\n        $this->load->library('HybridAuthLib');\n\n        if ($this->hybridauthlib->providerEnabled($provider))\n        {\n\n            log_message('debug', \"controllers.HAuth.login: service $provider enabled, trying to authenticate.\");\n            $autharr = array();\n            $autharr['hauth_return_to'] = base_url('index.php/hauth/linkto/'.$provider);\n            $autharr['hauth_token']     = (session_id());\n            $autharr['hauth_time']      = time();\n            $autharr['login_start']     = base_url('index.php/hauth/endpoint?hauth.start='.$provider.'&hauth.time='.$autharr['hauth_time']);\n            $autharr['login_done']      = base_url('index.php/hauth/endpoint?hauth.done='.$provider);\n\n            /*[hauth_time] => 13940880890\n\n            [login_start] => https://my.hello44.com/index.php/hauth/endpoint?hauth.start=Facebook&hauth.time=1394088089\n            [login_done] => https://my.hello44.com/index.php/hauth/endpoint?hauth.done=Facebook*/\n\n            if(strtolower($provider) === strtolower('openid'))\n                // Authenticate with Yahoo! then grab the user profile\n                $service = $this->hybridauthlib->authenticate( \"OpenID\", array( \"openid_identifier\" => \"https://me.yahoo.com/khaledatphp\"));\n            else\n                $service = $this->hybridauthlib->authenticate($provider,$autharr);\n\n\n            if ($service->isUserConnected())\n            {\n                log_message('debug', 'controller.HAuth.login: user authenticated.');\n\n                //$user_c = $service->getUserCardDAVContacts();\n\n                $user_profile = $service->getUserProfile();\n\n                /*print_r($user_profile);\n                exit();*/\n\n                log_message('info', 'controllers.HAuth.login: user profile:'.PHP_EOL.print_r($user_profile, TRUE));\n\n                $user_profile->provider = $this->uri->segment(3);\n                /*foreach($user_profile as $k=>$v)\n                {\n                    echo $k;\n                    echo '>>';\n                    echo $v;\n                    echo '<br>';\n                }\n                exit;*/\n\n                $arr = array();\n                $arr['show_ousers'] = (int)1;\n\n                $arr['oauth_provider']  = strtolower($user_profile->provider);  \n                $arr['oauth_uid']       = $user_profile->identifier;\n                $arr['oauth_username']  = $user_profile->displayName;\n                if(!empty($user_profile->emailVerified))\n                    $arr['oauth_email']     = $user_profile->emailVerified;                 \n                else\n                if(!empty($user_profile->email))\n                    $arr['oauth_email']     = $user_profile->email;                 \n                else\n                    $arr['oauth_email']     = 'no';\n\n\n                $arr['type'] = (string)'set';   \n                $arr = array_merge($arr,$this->credentials_arr);\n\n                $url = $this->api_url.$this->config->item('OAUTH_LINK_ACCOUNTS_API_URL');\n                $d   = __send_curl_request($url,$arr);\n                $d   = json_decode($d,true);\n\n                if(isset($d['errors']) && $d['errors'] === (string)'no' && isset($d['response']) && is_array($d['response']))\n                {\n                    if(isset($d['response']['update']) && (string)$d['response']['update'] === (string)'done')\n                    {\n                        redirect('index.php/account/profile');\n                        exit;                           \n                    }\n                    redirect('index.php/account/profile');\n                    exit;                           \n                }\n                else\n                {\n                    redirect('index.php/account/profile');\n                    exit;                           \n                }\n\n\n                /*foreach($user_profile as $k=>$v)\n                {\n                    echo $k;\n                    echo '>>';\n                    echo $v;\n                    echo '<br>';\n                }*/\n                /*output of above foreach object*/\n            //identifier>>1304054416\n            //webSiteURL>>\n            //profileURL>>https://www.facebook.com/khal3d.husa3n\n            //photoURL>>https://graph.facebook.com/1304054416/picture?width=150&height=150\n            //displayName>>Khalid Hussain\n            //description>>\n            //firstName>>Khalid\n            //lastName>>Hussain\n            //gender>>male\n            //language>>\n            //age>>\n            //birthDay>>4\n            //birthMonth>>2\n            //birthYear>>1985\n            //email>>khussain320@gmail.com\n            //emailVerified>>khussain320@gmail.com\n            //phone>>\n            //address>>\n            //country>>\n            //region>>Multan\n            //city>>\n            //zip>>\n            //provider>>Facebook\n                /**/\n\n                //$prep_key = uniqid();\n            }\n            else // Cannot authenticate user\n            {\n\n                //echo json_encode(array('error'=>'yes','msg'=>'cannot authenticate user'));\n                //exit;\n                #show_error('Cannot authenticate user');\n                $data['message'] = 'Can not authenticate user';\n                _show_errors($data);\n            }\n        }\n        else // This service is not enabled.\n        {\n            log_message('error', 'controllers.HAuth.login: This provider is not enabled ('.$provider.')');\n            #show_404($_SERVER['REQUEST_URI']);\n            $data['message'] = 'This provider is not enabled ('.$provider.')';\n            _show_errors($data);\n        }\n    }\n    catch(Exception $e)\n    {\n\n        $error = 'Unexpected error';\n        switch($e->getCode())\n        {\n            case 0 : $error = 'Unspecified error.'; break;\n            case 1 : $error = 'Hybriauth configuration error.'; break;\n            case 2 : $error = 'Provider not properly configured.'; break;\n            case 3 : $error = 'Unknown or disabled provider.'; break;\n            case 4 : $error = 'Missing provider application credentials.'; break;\n            case 5 : log_message('debug', 'controllers.HAuth.login: Authentification failed. The user has canceled the authentication or the provider refused the connection.');\n                     //redirect();\n                     if (isset($service))\n                     {\n                        //log_message('debug', 'controllers.HAuth.login: logging out from service.');\n                        $service->logout();\n                     }\n                     #show_error('User has cancelled the authentication or the provider refused the connection.');\n                     $error = 'User has cancelled the authentication or the provider refused the connection.';\n                     break;\n            case 6 : $error = 'User profile request failed. Most likely the user is not connected to the provider and he should to authenticate again.';\n                     break;\n            case 7 : $error = 'User not connected to the provider.';\n                     break;\n        }\n\n        if (isset($service))\n        {\n            $service->logout();\n        }\n\n        //log_message('error', 'controllers.HAuth.login: '.$error);\n        #show_error('error authenticating user'. 'controllers.HAuth.login: '.$error);\n\n        $data['message'] = $error;\n        _show_errors($data);\n    }\n}\n\npublic function endpoint()\n{\n    //log_message('debug', 'controllers.HAuth.endpoint called.');\n    #log_message('info', 'controllers.HAuth.endpoint: $_REQUEST: '.print_r($_REQUEST, TRUE));\n   /*print_r($_REQUEST);\n   exit();*/\n\n    $hauth_done = ($this->input->get('hauth_done'));\n\n    $prob = $this->input->get('oauth_problem');\n\n    if($hauth_done == 'LinkedIn' and $prob == 'user_refused')\n    {\n        $data['message'] = 'The request get refused';\n        _show_errors($data);\n    }\n    else\n    if ($_SERVER['REQUEST_METHOD'] === 'GET')\n    {\n        //log_message('debug', 'controllers.HAuth.endpoint: the request method is GET, copying REQUEST array into GET array.');\n        $_GET = $_REQUEST;\n        require_once APPPATH.'/third_party/hybridauth/index.php';\n    }\n    //log_message('debug', 'controllers.HAuth.endpoint: loading the original HybridAuth endpoint script.');\n}. this the clean code\npublic function login($provider, $user_type='provider')\n{\n\n    log_message('debug', \"controllers.HAuth.login($provider) called\");\n\n    try\n    {\n        log_message('debug', 'controllers.HAuth.login: loading HybridAuthLib');\n        $this->load->library('HybridAuthLib');\n\n\n        // echo \"hre\";\n        // exit;\n\n        if ($this->hybridauthlib->providerEnabled($provider))\n        {\n            log_message('debug', \"controllers.HAuth.login: service $provider enabled, trying to authenticate.\");\n\n\n\n            $service = $this->hybridauthlib->authenticate($provider);\n\n            if ($service->isUserConnected())\n            {\n                log_message('debug', 'controller.HAuth.login: user authenticated.');\n\n\n                $user_profile = $service->getUserProfile();\n\n                log_message('info', 'controllers.HAuth.login: user profile:'.PHP_EOL.print_r($user_profile, TRUE));\n\n                if(count($user_profile) <= 0)\n                {\n                    $this->session->set_flashdata('alert_data', array('type' => 'danger', 'description' =>  'Unable to get data'));\n                    redirect('login/');\n                }\n\n\n                $data_array = array(\n\n                    'first_name'     => $user_profile->firstName,\n                    'last_name'      => $user_profile->lastName,\n                    'display_name'   => $user_profile->displayName,\n                    'email'          => $user_profile->email,\n                    'email_verified' => $user_profile->emailVerified,\n                    'address'        => $user_profile->address,\n                    'country'        => $user_profile->country,\n                    'identifier'     => $user_profile->identifier,\n                    'auth_provider'  => $provider\n                );\n            }\n            else // Cannot authenticate user\n            {\n                show_error('Cannot authenticate user');\n            }\n        }\n        else // This service is not enabled.\n        {\n\n            log_message('error', 'controllers.HAuth.login: This provider is not enabled ('.$provider.')');\n            show_404($_SERVER['REQUEST_URI']);\n        }\n    }\n    catch(Exception $e)\n    {\n        $error = 'Unexpected error';\n        switch($e->getCode())\n        {\n            case 0 : $error = 'Unspecified error.'; break;\n            case 1 : $error = 'Hybriauth configuration error.'; break;\n            case 2 : $error = 'Provider not properly configured.'; break;\n            case 3 : $error = 'Unknown or disabled provider.'; break;\n            case 4 : $error = 'Missing provider application credentials.'; break;\n            case 5 : log_message('debug', 'controllers.HAuth.login: Authentification failed. The user has canceled the authentication or the provider refused the connection.');\n                     //redirect();\n                     if (isset($service))\n                     {\n                         log_message('debug', 'controllers.HAuth.login: logging out from service.');\n                         $service->logout();\n                     }\n                     show_error('User has cancelled the authentication or the provider refused the connection.');\n                     break;\n            case 6 : $error = 'User profile request failed. Most likely the user is not connected to the provider and he should to authenticate again.';\n                     break;\n            case 7 : $error = 'User not connected to the provider.';\n                     break;\n        }\n\n        if (isset($service))\n        {\n            $service->logout();\n        }\n\n        log_message('error', 'controllers.HAuth.login: '.$error);\n        show_error('Error authenticating user.');\n    }\n}. now having this statement\n\nError!\nUser profile request failed. Most likely the user is not connected to the provider and he should to authenticate again . resolved . This is the config i am using\nphp if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n/*!\n* HybridAuth\n* http://hybridauth.sourceforge.net | https://github.com/hybridauth/hybridauth\n*  (c) 2009-2011 HybridAuth authors | hybridauth.sourceforge.net/licenses.html\n*/\n\n<p// ----------------------------------------------------------------------------------------\n//  HybridAuth Config file: http://hybridauth.sourceforge.net/userguide/Configuration.html\n// ----------------------------------------------------------------------------------------\n$config =\n    array(\n        // set on \"base_url\" the relative url that point to HybridAuth Endpoint\n        'base_url' => '/hauth/endpoint',\n        //'base_url' => 'https://my.hello44.com/',\n    'providers' => array (\n        // openid providers\n        'OpenID' => array (\n            'enabled' => TRUE\n        ),\n\n        'Yahoo' => array (\n            'enabled' => TRUE,\n\n            'keys'    => array ( \"key\" => \"\", \n            \"secret\" => \"\" ),\n        ),\n\n        'AOL'  => array (\n            'enabled' => TRUE\n        ),\n\n        'Google' => array (\n            'enabled' => TRUE,\n\n            'keys'    => array ( \"id\" => \"\", \"secret\" => \"\" ),\n            //'keys'    => array ( \"id\" => \"768182982400.apps.googleusercontent.com\", \"secret\" => \"z4utZCTfdc_YGn_3sWhqQpt_\" ),\n            'scope'   => ''\n        ),\n\n        'Facebook' => array (\n            'enabled' => TRUE,\n\n            'keys'    => array ( \"id\" => \"\", \"secret\" => \"\" ),\n\n            'scope'   => '',\n\n            'display' => ''\n\n        ),\n        'Twitter' => array (\n            'enabled' => TRUE,\n            'keys'    => array ( \"key\" => \"\", \"secret\" => \"\" )\n        ),\n\n        // windows live\n        'Live' => array (\n            'enabled' => TRUE,\n            'keys'    => array ( \"id\" => \"\", \"secret\" => \"\" )\n        ),\n\n        'MySpace' => array (\n            'enabled' => TRUE,\n            'keys'    => array ( \"key\" => \"\", \"secret\" => \"\" )\n        ),\n        #https://www.linkedin.com/developer/apps\n        'LinkedIn' => array (\n            'enabled' => TRUE,\n\n            'keys'    => array ( \"key\" => \"\", \"secret\" => \"\" )\n        ),\n\n        'Foursquare' => array (\n            'enabled' => TRUE,\n            'keys'    => array ( \"id\" => \"\", \"secret\" => \"\" )\n        ),\n    ),\n\n    // if you want to enable logging, set 'debug_mode' to TRUE then provide a writable file by the web server on \"debug_file\"\n    'debug_mode' => false,\n    'debug_file' => null,\n\n    #'debug_mode' => TRUE,\n    #'debug_file' => APPPATH.'logs/auth.php',\n\n    #'debug_mode' => (ENVIRONMENT == 'development'),\n    #'debug_file' => APPPATH.'/logs/hybridauth.log',\n    //'debug_file' => '',\n);\n\n. i do have id/key for the consumer but i didnt posted\n. thanks its working now \ud83d\udc4d . ",
    "yosiaken": "You can try to downgrade to v2.7.0. \nhttps://github.com/hybridauth/hybridauth/releases/tag/v2.7.0\nIt works for me!. ",
    "uitlaber": "how to fix ?\nFacebook Graph returned an error: Can't Load URL: The domain of this URL isn't included in the app's domains. To be able to load this URL, add all domains and subdomains of your app to the App Domains field in your app settings.. @cobenash yes. ",
    "cobenash": "Hey @uitlaber , Do your facebook website are HTTPS website?. @uitlaber I have the same situation. I dont know how to fix that. :(\n. @uitlaber I found an issue talking about https issue.\n569 was talking about the same issue. But Its didnt work.\nSo Do you find the answer ?. @driade Many Thanks. . ",
    "EC-jmassanet": "Hello, i have the same problem, the version 2.9 fix this issues \n727 + #734 - [Facebook] Fix problem which occurs during calling the Facebook Graph API to\ngetAccessToken() for a specific redirectUrl\nAnd my problems is solved, thanks. ",
    "araiczyk": "@nodeffect yep, it's whitelisted. This works fine for every device but iOS.. Great, it works!! Thank you so much!. ",
    "forevermatt": "The GitHub OAuth documentation about users is at https://developer.github.com/v3/users/emails/\n. If you would like me to go ahead and update the changelog as part of this PR, should I use 2.8.1 as the next version (since this is essentially a bug fix)? I would have submitted this PR against develop, but there didn't seem to be a develop branch.\n. @StorytellerCZ Okay, done. Thanks! \ud83d\ude03 . We're hitting this problem, too. Thank you @chdeliens and Adzzz for figuring this out. @StorytellerCZ, is there anything we can do to help get this tested/released?. ",
    "chdeliens": "Credits to \"Adzzz\" user on stackoverflow for finding the root cause!\nhttp://stackoverflow.com/questions/40997264/hybridauth-with-google-provider-randomly-returns-invalid-request-when-authenti. ",
    "davidmars": "thx. ",
    "chrishadi": "@chdeliens after update to this version, I cant login with Facebook. The error message is\nUndefined property: Hybrid_User_Profile::$username\nWhen we try to add $username in User_Profile and it works.\nCan you check it?\nThank you.. @neo22s I'm sorry it's my bad. It turns out my code which access the $username property of an User_Profileobject that cause the error.. ",
    "ao": "Thanks, this was driving me crazy!. ",
    "jouey": "I am using HybridAuth 2.11.0 on php, and my Google login functioned yet some days ago, but today it says the same as has been mentioned in these discussions:\nUser profile request failed! Google returned an invalid response:stdClass::__set_state(array( 'error' => stdClass::__set_state(array( 'errors' => array ( 0 => stdClass::__set_state(array( 'domain' => 'global', 'reason' => 'authError', 'message' => 'Invalid Credentials', 'locationType' => 'header', 'location' => 'Authorization', )), ), 'code' => 401, 'message' => 'Invalid Credentials', )), )) \nWhile the above-mentioned issue is reported to have been fixed, according to this discussion, I fail to see what the fix is, and what I need to to now, to get rid of this problem.. I had the same problem as everyone else. Two days ago Facebook login just stopped working on my HybridAuth 2.6.0, while Google, Twitter and LinkedIn authentications still worked OK.\nI followed the solution proposed in this thread, updating to HybridAuth 2.9.1 and so on, but now Facebook login crashed into the following php error -- while Google, Twitter and LinkedIn authentications still worked OK:\nFatal error: Uncaught exception 'Exception' with message 'DateTime::__construct(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone.' in /var/www/html/test/hybridauth/Hybrid/Auth.php:169 Stack trace: #0 /var/www/html/test/hybridauth/Hybrid/Auth.php(55): Hybrid_Auth::initialize(Array) #1 /var/www/html/test/test_hybridauth_original.php(128): Hybrid_Auth->__construct(Array) #2 {main} thrown in /var/www/html/test/hybridauth/Hybrid/Auth.php on line 169\nThe error concerning timezone setting is something that php started giving me maybe a year ago, or something. The solution is what it suggests in the error message, setting the timezone with a command such as this ...\ndate_default_timezone_set('UTC');\n... before you run any date functions such as this:\ndate('Y-m-d H:i:s')\nAs the three other social logins still function without errors, I suspect that this error is generated by the third-party Facebook library, even though the error message points to a HybridAuth file. Anyway, I got rid of the error, by adding this command at the start of file hybridauth/Hybrid/Auth.php:\ndate_default_timezone_set('UTC');\nWith this modification, the website does not crash when trying Facebook login, and the login functions OK. I have not tested this much yet, it remains to be seen whether I will need to add the same command to some other HybridAuth files too, if HybridAuth can be launched via some other files too, bypassing hybridauth/Hybrid/Auth.php.. Interesting... so run this command there:\ndate_default_timezone_set('UTC');\nWhy ever would I have started having this problem anyway, suddenly a year ago, never having had such problems before?. ",
    "gonzalesc": "I have 2.11.0 and I have the same error:\n{\n \"error\": {\n  \"errors\": [\n   {\n    \"domain\": \"global\",\n    \"reason\": \"authError\",\n    \"message\": \"Invalid Credentials\",\n    \"locationType\": \"header\",\n    \"location\": \"Authorization\"\n   }\n  ],\n  \"code\": 401,\n  \"message\": \"Invalid Credentials\"\n }\n}. ",
    "CallumBrankin": "If you click on this link it'll take you to the plugin page showing two Joomla extensions which both have broken links but this link takes you to the correct plugin page (I presume) which shows one Joomla extension with the link working. Is this a problem?. Have a look at my HybridAuth implementation of OpenID Connect  which uses PixelPin. It's not full OpenID Connect but it works. . Understood, PixelPin will start planning how to implement OpenID Connect.. It looks like HybridAuth 3.0 supports OpenID, which is different to OpenID Connect. @ApacheEx Is this the case? \nThe only place that mentions OpenID Connect is a link in The providers documentation but the docs use \"OpenID\" to refer to \"OpenID Connect\" which is an incorrect way to refer OpenID Connect too. . ",
    "qzmenko": "Yes, sure.\nPull request  - https://github.com/hybridauth/hybridauth/pull/712. ",
    "tsmulugeta": "Building off of what @nodeffect wrote, to make it work for DRUPAL (tried with 7) and the HybridAuth Social Login (hybridauth) module do the following:\nStep 1: After running \"composer install\" inside the hybridauth-master folder, rename the folder back to hybridauth since the Drupal module hybridauth won't be able to find the library otherwise in the libraries folder\nStep 2: require_once('../vendor/autoload.php'); #add this new line Did NOT work for me. \nLooking at another thread (#698), I downloaded the latest php-graph-sdk (https://github.com/facebook/php-graph-sdk) and then copied the Facebook folder (inside src) into the folder hybridauth/hybridauth/Hybrid/thirdparty/ so that now I had hybridauth/hybridauth/Hybrid/thirdparty/Facebook/autoload.php\nThen instead of require_once('../vendor/autoload.php'); #add this new line\nI put require_once(\"Hybrid/thirdparty/Facebook/autoload.php\"); #add this new line\nin index.php and live.php\nStep 3: Skip/forget the last step since the hybridauth module makes such calls already\nClear the cache and everything should work!\n. ",
    "imreballa": "Thank you, will try to refresh.. It is working for us.\nIt is in test environment at the moment, but it should work on prod as well (still fixing Facebook issue).\n. ",
    "CaelanBorowiec": "I've just updated to 2.8.2 but am still having the issue from #707. . @imreballa thanks, it appears our prod server was being very slow in mirroring the updated files.  It's working just fine now.. ",
    "filisko": "where did you quote that from?. ",
    "xaiborweb": "@StorytellerCZ \nBut how could you integrate the new hybridauth versions into CodeIgniter if the only integration found in the network is\nHttps://github.com/andacata/HybridIgniter\nAnd for a normal person like me who is not a programmer it is very difficult to do it by chance you have a version that works and you can share it?. @ApacheEx\nThank you very much friend if you can update HybridAuth CodeIgniter 3.x to work properly you would be the first to make this contribution on the internet and I would be eternally grateful. @ApacheEx \nThanks friend but the third_party folder did not add it to try if it works with facebook login. Thanks I found the error only had to regenerate the key token for the changes to be applied, thanks.. ",
    "GrafDe": "Hi @aWuttig \nI'm happy my friend! It is works for me. Big thanks. done. ",
    "InnocenceAllen": "I have only deleted the version in \"response\" to make it work and  I have already put the spaces as the original.. ",
    "nicbet": "Documentation in a separate PR #738 . ",
    "robert81": "Thank you.\n. ",
    "winstonhong": "Pixelpin OpenID Connect 7\nPixelPin OpenID Connect 7 Uses the OpenID Connect identity layer on top of OAuth 2.0 protocol to authenticate users using PixelPin.\nRequirements\nDrupal 7 (7.*)\nctools (7.x-1.12)\nentity (7.x-1.8)\n. #737 . ",
    "drone-ah": "I have run into the same issue. As a temporary measure, I was able to revert to 2.7.0 to resolve this.. ",
    "birdy247": "I am also getting this message.  Is it a Facebook or HybirdAuth issue?. Hi, I am unsure what I need to do to get this working again.  Will this be pulled into master at some point so it \"just works\" again?\nThanks. ",
    "bev-ru": "I had the same problem. I set Google scope to 'profile email https://www.googleapis.com/auth/plus.profile.emails.read' and now it works fine.\nProbably default scopes are outdated in HybridAuth.\nThis happens when login with already accepted permissions. On first login and accept permissions it return correct profile.. ",
    "kbighorse": "Not fully working yet; in step 3, currently redirects to https://www.example.com/endpoint?code=XX and displays a HybridAuth information page.. Running https://github.com/hybridauth/hybridauth/blob/master/hybridauth/Hybrid/Endpoint.php#L59, when should run either https://github.com/hybridauth/hybridauth/blob/master/hybridauth/Hybrid/Endpoint.php#L51 or https://github.com/hybridauth/hybridauth/blob/master/hybridauth/Hybrid/Endpoint.php#L55.\nFor some reason, request is missing hauth_start or hauth_done params, presumably hauth_done if this is Step 3.. Sorry I missed you, @StorytellerCZ, I was done. But looks like things worked out with @ApacheEx's PR.. not sure where this is used.. perhaps there is a better place to do this for other requests? @dashohoxha . ",
    "LuckStock": "I had to add autoload for Facebook-sdk so now my index.php looks like:\n```\nrequire_once ROOT_PATH . '../vendor/hybridauth/hybridauth/hybridauth/Hybrid/Auth.php';\nrequire_once ROOT_PATH . '../vendor/facebook/graph-sdk/src/Facebook/autoload.php';\nrequire_once ROOT_PATH . '../vendor/hybridauth/hybridauth/hybridauth/Hybrid/Endpoint.php';\nHybrid_Endpoint::process();\n```. ",
    "TihomirS": "@aWuttig i use last hybridauth release with described fix but still can't login with FB ..\nAny ideas?\n . yes, and try with 2.9.0 too. ok, once again with clear upload 2.9.1\nnow i get:\nFatal error: Uncaught Error: Class 'Facebook\\Facebook' not found in /_inc/hybridauth/Hybrid/Providers/Facebook.php:56 . I think this is FB change .. i have logged users last night via FB login.\ni try include FB Graph API SDK but still not luck... i have it working on my 3 sites :)\nsolution:\nuse new 2.9.1 version\nget the Facebook API from https://github.com/facebook/php-graph-sdk\nThen extract to the \"third party\" folder. You only need the folder that contains all the Facebook API files and folders. Examples for files: autoload.php, facebook.php, etc.... and it's folders including \"Authentication\", \"Exceptions\", etc....\nThen, on your project, you'll need to include both the Hybridauth and the Facebook API. Example below:\nrequire_once('hybridauth/Hybrid/Auth.php');\nrequire_once('hybridauth/Hybrid/thirdparty/Facebook/autoload.php');\nOn, index.php and live.php under Hybridauth folder, I also added a new line \nExample:\nrequire_once( \"Hybrid/Auth.php\" );\nrequire_once( \"Hybrid/Endpoint.php\" );\nrequire_once( \"Hybrid/thirdparty/Facebook/autoload.php\" );\nDon't forget to use only public permissions on config.php:\n\"Facebook\" => array(\n                    \"enabled\" => true,\n                    \"keys\" => array(\"id\" => \"111\", \"secret\" => \"222\"),\n                    \"trustForwarded\" => false,\n                    \"scope\" => array(\"public_profile\", \"email\")\n                ),\nAlso, remember to change your Facebook settings \"Valid OAuth redirect URIs\".\nFrom:\nhttp://yourdomain.com/hybridauth/?hauth.done=Facebook\nTo:\nhttp://yourdomain.com/hybridauth/?hauth_done=Facebook\nNotice the hauth.done is not usable anymore for this latest version 2.8.0. You need to use hauth_done\nBest,\nT.\n. ",
    "Tr4cer0ute": "have the same problem here since two days. @aWuttig Yes I did. It was seamlessly working until yesterday. @aWuttig no the old one. Should I update?. I did update the repo but still getting in the same issue\nHybrid_Auth->__construct('../hybridauth/c...') #2 {main} thrown in MY_PATH/hybridauth/Hybrid/Auth.php on line 152\nUPDATE\ngot the same issue as @TihomirS \nhybridauth-new/hybridauth/Hybrid/Providers/Facebook.php on line 26\n. ",
    "somsgod": "you need to include autoload.php \n//Something like this in Provider/Facebook.php\nrequire_once Hybrid_Auth::$config[\"path_libraries\"] . \"Facebook/autoload.php\";\nbut issue on mine side is after going through all process and logging in on fb when it return it says\nCan't Load URL: The domain of this URL isn't included in the app's domains. To be able to load this URL, add all domains and subdomains of your app to the App Domains field in your app settings.\nbut i didnt changed anything on developer console till yesterday when it was working.. ya its working fine now guys use hybridauth library (v2.9.1) and facebook sdk and change app configuration.. ",
    "thesios": "Are we going to get this changes integrated / checked in ?. I do see the FB api was removed on 2.91 . you need to make the change in your global php.ini file. ",
    "tanmayk": "Made it working by referencing all above comments and below are my steps:\n\nUpgraded hybridauth library (v2.9.1) and put php-graph-sdk (https://github.com/facebook/php-graph-sdk) under hybridauth so autoload.php can be found at hybridauth/Hybrid/thirdparty/Facebook/autoload.php.\nInstead of adding require_once lines in index.php, added below in hybridauth/Hybrid/Providers/Facebook.php at Line 45.\nrequire_once Hybrid_Auth::$config[\"path_libraries\"] . \"Facebook/autoload.php\";\nAfter this, changed app configuration for redirect URL to use hauth_done instead of hauth.done.\n\nIt is working fine now. Thanks guys for sorting this out :). ",
    "hijarian": "@jouey \n\nWhy ever would I have started having this problem anyway, suddenly a year ago, never having had such problems before?\n\nBecause PHP 5.4+ requires you to setup your default timezone explicitly, either in php.ini or by the date_default_timezone_set. Most possibly you upgraded your PHP installation. This setting has been required for ages already.. ",
    "coscho": "\nAn uncaught Exception was encountered\nType: Error\nMessage: Class 'Hybrid_Auth' not found\nFilename: /var/www/html/app/third_party/hybridauth/Hybrid/Storage.php\nLine Number: 26\n\nI still get this error after all this steps.\n2.9.2-dev. ",
    "superight": "Having same issue it stop working in all my scripts was working fine just few days ago now its not working i tried everything above but nothing worked for me any one can help please.. @ApacheEx here are my settings:\n1-I am not sure about version number but its at least one year old.\n2-If your SDK that is also old version.\n3-I used it in procedural php everything was working fine just a week i thing i m receiving complains about facebook login not working the same thing was working before.\nYour Immediate reply is highly appreciated. . @ApacheEx Ok every thing is fine now i just need to upgrade hybridauth library i also download that but it showing me following error now  \n\nClass 'Facebook\\Facebook' not found in /home/......................../lib/hybridauth/Hybrid/Providers/Facebook.php on line 56\n\nI open hybridauth/Hybrid/Providers/Facebook.php and saw \n\nuse Facebook\\Exceptions\\FacebookSDKException;\nuse Facebook\\Facebook as FacebookSDK;\n\nat the top of page but these files are not any where in hybridauth library\nI am a bit confused what to do now\nP.S All other providers working just fine after updating the hybridauth library.. @ApacheEx  ok done now its working but i am getting this http://example.com/scripts/login#_=_\nin response from facebook and nothing else \ncan you please tell me why?. @ApacheEx forgive me that was not because of hybridauth library i m getting proper response Hybrid_User_Profile Object ( [identifier] => 1398135583576063 [webSiteURL] => [profileURL] => https://www.facebook.com/app_scoped_user_id/1398135583576063/ [photoURL] => https://graph.facebook.com/1398135583576063/picture?width=150&height=150 [displayName] => Altaf Hussain [description] => [firstName] => Altaf [lastName] => Hussain [gender] => male [language] => en_US [age] => [birthDay] => 20 [birthMonth] => 6 [birthYear] => 1994 [email] => superight.com@gmail.com [emailVerified] => superight.com@gmail.com [phone] => [address] => [country] => [region] => Gujrat [city] => [zip] => [job_title] => [organization_name] => ) see this :) thanks a lot for your time and help \ud83d\udc4d \ud83d\udc4d . ",
    "RazaLabs": "I had the issue with 2.3.0 Hybridauth lib, Here was my fix  Comment by zeroduh at Drupal\nalso I  changed getHttpProtocol to return always 'https' as I am on cludflare SSL proxy.\nHere is my base_facebook.php \nhttps://pastebin.com/dyZ4PtuM\n. @ApacheEx Thanks for your proposal, It is not just Hybridauth Library,  if we upgrade to latest HybridAuth library than we also need to upgrade our framework, due to lack of time we are unable to do so... But in near future we will port to the latest version, until than this hack/fix is fine with us.. ",
    "follower90": "Also getting exception.\nCatchable error detected: 0 - DateTime::__construct(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone.\nI use composer, Hybrid Auth 2.9.6, and there facebook graph 5.6.1 (api version 2.10). @ApacheEx Yeah, it works now, date_default_timezone_set was not helping, but found i had to restart php-fpm to reload php.ini settings. Problem is solved. Thank you!. ",
    "dereuromark": "This actually seems to break things, see my comment @ https://github.com/hybridauth/hybridauth/issues/773 :/\nDowngrading from 2.9.2 to 2.9.1 removed the fatal error for the time being.. No, it is all default - see https://github.com/ADmad/CakePHP-HybridAuth/blob/master/composer.json\nBreaking existing applications in a bugfix release is not acceptable IMO.. This is still not fixed in 2.9.2\nI now also have the fatal error and\nWarning (2): require_once(/var/www/.../vendor/hybridauth/hybridauth/hybridauth/Hybrid/thirdparty/Facebook/autoload.php):\n failed to open stream: No such file or directory in [/var/www/.../vendor/hybridauth/hybridauth/hybridauth/Hybrid/Providers/Facebook.php, line 61]\nRunning on 2.9.2 of this lib.. ",
    "happyman": "\u2063\u767c\u9001\u81ea BlueMail \u200b\n2017\u5e744\u670816\u65e5 \u4e0a\u53489:26, \u4e0a\u53489:26\uff0c\u5728 Miki notifications@github.com \u5df2\u5199:\n\n@dereuromark Yeah, it's because you have vendor directory in some other\nlevel of directory.\nYou can fix this by edit the vendor variable's path with your.\n-- \nYou are receiving this because you are subscribed to this thread.\nReply to this email directly or view it on GitHub:\nhttps://github.com/hybridauth/hybridauth/pull/760#issuecomment-294327614\n. \n",
    "sunaryohadi": "I am using custom array for config along with other component setting in my Application.\nSo, if I change Auth.php line 76,\n$config[\"path_vendor\"] = realpath(dirname(__FILE__) . \"/../../vendor\");\nto\n$config[\"path_vendor\"] = realpath(dirname(__FILE__) . \"/../../../../../vendor\");\nIt run correctly.. The PR is working very well in my case .... Good job.. ",
    "collizo4sky": "So good to have you back @miled \nI was actually sad when it place in maintenance mode.. @miled I am using this with ConstactContact API and they require payload must be JSON.\nWe could add a check/if-condition to detect if the header contains application/json content type then run json_encode() on the payload.\nWhat do you think?\nI could whip up a PR for both curl and guzzle client if this proposal is accepted.\nAlso PUT and DELETE http verb support is missing on both HTTP client available. ConstantContact require PUT for update.\n. Fixed this issue in #816 and #817. ",
    "TechFanDan": "I just tried, after adding the full URL to the API, and it goes through but with a different error.\nThe URL I put in: https://mydomain.com/myapp/hybrid-auth/endpoint?hauth.done=Google. ",
    "metonator": "Nope, can be closed, i've just used wrong query. ",
    "kaioken": ";). ",
    "mkhazov": "It didn't work for me too until I cleared my website's cookies. But I had another error message in google response (\"Invalid Credentials\"). ",
    "ravi24june1": "\nJust Facebook Login\nv 2.8 Graph API\nHybridAuth social login 7.x-2.15\n\nI felt that proxy settings is not defined for facebook provider (FacebookCurlHttpClient Class). See below LIne\npublic function openConnection($url, $method, $body, array $headers, $timeOut)\n    {\n        $options = [\n            CURLOPT_CUSTOMREQUEST => $method,\n            CURLOPT_HTTPHEADER => $this->compileRequestHeaders($headers),\n            CURLOPT_URL => $url,\n// Need to Add below line......\n            //CURLOPT_PROXY => 'IP:Port', \n. I have fixed the issue by using fixed proxy but unable to use Hybrid_Auth Configs in FacebookCurlHttpClient Class\n//Proxy Settings\nCURLOPT_PROXY => '127.0.0.1:8080',\n. HybridAuth drupal modules provides the proxy configuration interface for making the request with ProxyIP and port. \nFor Other providers like google/linkedin proxy is being used in code. see below line:\n// An error was occurring when proxy wasn't set. Not sure where proxy was meant to be set/initialized.\n        Hybrid_Auth::$config['proxy'] = isset(Hybrid_Auth::$config['proxy']) ? Hybrid_Auth::$config['proxy'] : '';\nBut for facebook library(2.9.2) proxy is not defined anywhere. Previously in 2.6.0 it was defined in facebook.php\nHybridAuth Proxy IP is not being used by latest library of facebook. So, I have to temporary fix the issues with by adding proxy details in FacebookCurlHttpClient Class.\nHope you understand the issues.\n. Thanks. ",
    "datnq201088": "@ApacheEx \nThank you so much. I see. I wait the new realease. . ",
    "HowardF": "Confirm accessing user profile now.Thank you. Tokens array is empty. Assume that is expected?. ",
    "adityapurwa": "\nI use a modified CodeIgniter by previous developer.\nI used the v.2.9.2\nI manually download the release\nI use PHP SDK 5.4..4\n\nSorry, I just noticed that I loaded the wrong configuration so it kept failing over because the it doesn't point to the correct FB application. It is working now.\nThank you for your helps!. ",
    "visabhishek": "Hi ApacheEx, where can i find \"v2.9.3-dev\" please share the link.. Thanks ApacheEx, Its working fine.. ",
    "XStreamke": "Hi, at the moment I just fixed it by changing the vendor name.\nAbout the second thing: you can do it. I'm not the frequent GitHub user (and not familiarised with the common abbreviations).. OK, that's clear...But a bit strange then, because I only filled in a OAuthv2 call back URL. So I would suspect that the vendor isn't accepting a OAuthv1 version...And I didn't see a link on the app to enforce v2...\n. Fine for me. I'm using a modx version (which apparently doesn't get updated often). But soon I'll perform the upgrade of the hybridauth manually.. ",
    "klausi": "Ouch, this is a pretty heavy API break and should not be done in a minor release. Our LinkedIn Integration relies on the old XML API integration, which is now just gone. We will have to patch in the old LinkedIn files somehow when we try to upgrade.. I think this is relevant: https://github.com/thephpleague/oauth2-linkedin/pull/15/files#diff-9afbe6be64e29468bf8463b4b219e0f5\nhttps://api.linkedin.com/v1/people/~:(' . $fields . ')?format=json' changed to https://api.linkedin.com/v2/me?fields='.$fields. Pull request is in #1048 . ",
    "sagudev": "I think it need to be like opauth. Then something is wrong on your side. Did you just change version or did you changes scripts that uses hybridauth too? If you have hosting proider install server on your pc (like this one) and install hybridauth and test it.. ok thanks. ",
    "nfjpnarayana": "http://mydomain.com/hybridauth/index.php it redirects , and I am using cakephp framework. http://mydomain.com/hybridauth/index.php?hauth.start=Facebook. i updated library to 2.9.5 now i am getting a blank page with this url \nhttp://mydomain.com/hybridauth/?hauth.start=Facebook&hauth.time=1494090226. I Have limitation of using plain php library so i am working on that same hybridauth . ",
    "yogeshjalodara": "Hi, Thanks for your valuable suggestion. It was an issue of base_facebook.php\nthis article helped me.\nhttp://stackoverflow.com/questions/42994019/facebook-graph-api-not-work-from-2-2-to-2-3/43016312#43016312. ",
    "iatpatelishan": "Solution: https://stackoverflow.com/questions/42994019/facebook-graph-api-not-work-from-2-2-to-2-3. ",
    "SuriyaPrakashWebDev": "okay thanks. ",
    "mondalarup": "@9meAhmed how did u fix this? I am also fetching same problem. ",
    "anuraggupta816": "I think issue in passport-oauth2 module and user_cancelled_login error is not handle. you can delete this module and paste this https://github.com/anuraggu/passport-oauth2.git link package.json file after that install the module. ",
    "ziogaschr": "I thank you @ApacheEx. You were very helpful. Thanks @ApacheEx will update them. Your response was fast. \ud83d\udc4d . ",
    "CybotTM": "The problem with the upstream is it seems abandoned. :-(\nanyway, i created https://github.com/iignatov/LightOpenID/pull/19 . ",
    "tflin": "Thanks for your great effort. What's the difference of WeChat and WeChatChina provider?. ",
    "kurtvergeyle": "Hi,\nSeems to work! You made my day!\nJust 1 fix added in the library, because the redirect_url was still https://mydomain/hybridauth/endpointlive.php\nFile: libraries/hybridauth/hybridauth/Hybrid/Provider_Adapter.php \nif ($this->id==\"Live\") {\n$domain = str_replace('endpoint', '', $HYBRID_AUTH_URL_BASE);\n$this->params[\"login_done\"] = $domain.'live';\n}\nThis will generate the correct redirect_uri to Windows Live (https://mydomain/hybridauth/live)\nRegards!. ",
    "BassemN": "@ApacheEx Thank you very much It is working well now :). ",
    "nipungarg6138": "No. I am not using composer as i am on shared host. Any idea how can i use composer in shared hosting. I am not using any framework. \nDo i need to upgrade hybridauth as well?\nI am not sure what you are trying to say in section 2.\nredirect_uri=http://www.verjobs.com/auth/?hauth.done=Facebook:\nplease use http://www.verjobs.com/auth/?hauth_done=Facebook\nmake sure it exists in https://developers.facebook.com/apps/1612692002357929/fb-login/ as Valid OAuth redirect URIs ----> In facebook i have this. http://www.verjobs.com/auth/?hauth.done=Facebook \ni will change it to  http://www.verjobs.com/auth/?hauth_done=Facebook\nPlease explain a bit.. Thanks for your prompt response. I will try tonight and share the status with you. . I copied the facebook sdk inside thirdpary directory. There is a existing file base_facebook.php\nIn this file i can see \n[abstract class BaseFacebook\n{\n  /*\n   * Version.\n   /\n  const VERSION = '3.2.3';\n/*\n   * Signed Request Algorithm.\n   /\n  const SIGNED_REQUEST_ALGORITHM = 'HMAC-SHA256';\n/\n   * Default options for curl.\n   \n   * @var array\n   /\n  public static $CURL_OPTS = array(\n    CURLOPT_CONNECTTIMEOUT => 10,\n    CURLOPT_RETURNTRANSFER => true,\n    CURLOPT_TIMEOUT        => 60,\n    CURLOPT_USERAGENT      => 'facebook-php-3.2',\n  );](url)\nDo i need to make any changes in this because when i check the facebook url it is still showing sdk version 3.2.3 and i am not sure how can i change hauth.done to hauth_done.\nI made the changes in facebook uri section but it seems like it is not updating in the request.\nhttps://www.facebook.com/dialog/oauth?client_id=1612692002357929&redirect_uri=http%3A%2F%2Fwww.verjobs.com%2Fauth%2F%3Fhauth.done%3DFacebook&state=cee5ae1bcc73e014dd6c376377ed4&sdk=php-sdk-3.2.3&scope=email%2C+user_about_me%2C+user_birthday%2C+user_hometown%2C+user_location%2C+user_website%2C+publish_actions%2C+read_custom_friendlists&display=page\nI am getting this error now. \nURL blocked: This redirect failed because the redirect URI is not white-listed in the app's client OAuth settings. Make sure that the client and web OAuth logins are on and add all your app domains as valid OAuth redirect URIs.. Yes, I did that and issue has been fixed. I will check Linkedin and Google later today. Not sure after upgrade they are working or not.. Facebook is working fine. Now i am getting error for Linkedin. You can close this issue. I will check and fix Linkedin. If needed i will open new issue.. ",
    "StephenAtty": "Isn't the config for google:\nGoogle\" => array(\n            \"enabled\" => true,\n            \"keys\" => array(\"id\" => \"my key in here\", \"secret\" => \"my secret in here\"),\n                      \"scope\"   => \"https://www.googleapis.com/auth/plus.login \". // optional\n                       \"https://www.googleapis.com/auth/plus.me \". // optional\n                       \"https://www.googleapis.com/auth/plus.profile.emails.read\", // optional\n          \"access_type\"     => \"offline\",   // optional\n          \"approval_prompt\" => \"force\", \n          \"state\" => \"\",        // optional\n        ),. Sorry to say it gives the same error:\nSorry! There is an error with the request we received from the website you are trying to use. Please try again in a few minutes. If this error persists please contact the site administrator.\n. Unless something has changed - I took it out of the list of auth agents people could use. I'll have to build a test configuration.\nWere you able to re-produce it?. I'm not having this issue, but I'm using IPV4 not IPV6. ",
    "cssjockey": "Any update on the fix for this issue?. Hi, This issue still exists in v2.10.0. Please provide a solution to this.. Hi @ApacheEx, \nI tried the settings you suggested but its still the same.\nI've enabled Google on my site so you can see the error. \nhttps://cssjockey.com/?process-social-login=google \nConfig:\n```\n    [base_url] => https://cssjockey.com/wp-content/plugins/addon-social-login/lib/hybridauth/\n    [providers] => Array\n        (\n            [Google] => Array\n                (\n                    [enabled] => 1\n                    [keys] => Array\n                        (\n                            [id] => ID\n                            [secret] => SECRET\n                        )\n                [scope] => https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/plus.profile.emails.read\n                [display] => page\n                [approval_prompt] => force\n            )\n\n    )\n\n[wrapper] => Array\n    (\n        [class] => Hybrid_Providers_Google\n        [path] => /path-to-library/hybridauth/Hybrid/Providers/Google.php\n    )\n\n[redirect_uri] => https://cssjockey.com/wp-content/plugins/addon-social-login/lib/hybridauth/?hauth.done=Google\n[debug_mode] => 0\n\n```\n. @ApacheEx Its the same in Google settings. https://prnt.sc/hiy740. Tried with new app id and secret and still same error. If you don't mind can we chat on Skype.. ",
    "Lospepes": "Hi,\nThank you for your help. I haven't understand that I needed a return URL with live.php at the end.\nI use Hybrid because I don't want to do many exceptions. So I will forget this provider.\nThank you,. ",
    "JREAM": "Thanks that clears it up!. ",
    "matdave": "Issue still present in 2.9.6. Okay, It has to do with the scope https://www.google.com/m8/feeds/.  This is the permission to read/write to a person's contact list.  It looks like it has been removed in Version 3. Except for when using a site plugin that doesn't have scope configurations.  Granted, they should offer them and that's what I had to program in.  However, should the default behavior be to generate an \"Unverified App\" screen, or should it be that you have to change your scope if you want m8/feeds/ access?\nIt appears the choice was for the latter when looking at HA3, where they've removed the m8/feeds/. . ",
    "ArshadAQ": "I'm getting the same error! I'm behind this for more than 3 days! Its really frustrating! I'm always getting redirected to http://localhost:8081/?hauth.start=Facebook&hauth.time=1512578610, whatever url I put in the base_url in my config file!. ",
    "benderlidze": "Did you read the question? As I said the auth is OK, I have the 'key' => '' and 'secret' => '' and everything is fine untill this \n$adapter->setAccessToken($tokens);\n. Thanks\nBut now I got this:\nSigned API request has returned an error. HTTP error 403. Raw Provider API response: {\"errors\":[{\"message\":\"Your credentials do not allow access to this resource\",\"code\":220}]}\nIs there any 100% example of usign setAccessToken?\nI want to login/auth the user with $tokens received from session, db, cooke, etc.\nThank you!. Thanks, and one more question about the auth logic\n\nI have a page with 3 buttons = auth with Facebook, google, twitter. User press the button and go to the page with login.php?provider=Facebook\nI set the prvider name to session $_SESSION['provider'] = $provider and use the $hybridauth = new Hybridauth\\Hybridauth( $config );\nAnd here is a moment with CALLBACK that is not clear for me. I get the redirect from Facebook to my script that is set in the callback 'callback' => \"https://***/loginRead.php\", and get the provider name from session and auth the user again?\n\nSO the question is about the redirect and is there a way to detect the provider name or auth the user without setting the provider manualy,  only by [HYBRIDAUTH::STORAGE]? \nHere is my script, it works as I want but I think it is not good at all: \n```\nsession_name(\"authSession\");\nsession_start();\ninclude 'hybridauth/src/autoload.php';\n$config = [\n    'callback' => \"https://***/loginRead.php\",\n    'providers' => [\n        'Twitter' => [],\"includeEmail\" => true],\n        'Google'   => [], \n        'Facebook' => [] \n    ],\n];\n$authName = \"Facebook\";\nif(isset($_REQUEST['provider'])){\n$provider = strtolower($_REQUEST['provider']);\nswitch ($provider) {\n    case 'google':\n        $authName = \"Google\";\n        break;\n    case 'facebook':\n        $authName = \"Facebook\";\n        break;\n    case 'twitter':\n        $authName = \"Twitter\";\n        break;\n}\n$_SESSION['provider'] = $authName;\n\n$hybridauth = new Hybridauth\\Hybridauth( $config ); \n$adapter = $hybridauth->getAdapter($authName);\n$user = $adapter->authenticate();\n$userProfile = $adapter->getUserProfile();\n\n}\n    // this part is for this callback https://***/loginRead.php from config\n    if(isset($_SESSION['HYBRIDAUTH::STORAGE']) && count($_SESSION['HYBRIDAUTH::STORAGE'])>=1){\n    $provider = $_SESSION['provider'];\n    $hybridauth = new Hybridauth\\Hybridauth( $config ); \n    $adapter = $hybridauth->getAdapter($provider);\n    $user = $adapter->authenticate();\n    $userProfile = $adapter->getUserProfile();\n}\n\nif(isset($_GET['loginExit'])){\n    $adapter->disconnect();\n    $hybridauth->disconnectAllAdapters();\n    session_destroy();\n    header(\"Location:test.php\");\n    exit();\n}\n\necho '<img src=\"'.$userProfile->photoURL.'\"><br>';\necho $userProfile->identifier.'<br>';\necho '<a href=\"?loginExit\">Exit</a>';\n\n```. ",
    "centurianii": "I got Facebook from github and there is no FacebookSDK class. . At line 4 of the same file (Providers/Facebook.php) there is a use Facebook\\Facebook as FacebookSDK;!\nSo, no it wasn't a class loading problem! Somebody renamed Facebook class!!. ",
    "jocelynj": "Hum, I don't see where I should add basic documentation on this provider.\nCan you provide an example of a provider that has this kind of documentation ?\n. Do you have any example of unit tests for Providers ?. Thanks, I've fixed indentation, and functions calls. That's true - I've add several issue when making this provider, so I tried several things. The real fix was in fact to switch to a XML\u00a0decoder instead of using json (which seems to be the default decoding). I don't quite understand what you mean ?\nShould I replace $response->user[\"id\"] by $response->user->id ?. I've removed this unused function httpRequest().. ",
    "danslo": "Would be nice to at least have some timeline indication with regards to when hybrid auth devs plan to tag a stable 3.0.0 release. . @ApacheEx I'm not necessarily questioning the stability. It's just that master branch has gotten minimal updates for the last 6-7 months, while 2.0 just had a new release drafted yesterday. There's no stable tag for 3.0 either, so we can't use it without lowering minimum-stability.. Thanks for the update!. ",
    "johndodev": "I have a bad feeling about this. RIP incoming.. I also started a project with 3.0 but production is coming soon, maybe I should refactor with 2.x ? \nIf nobody develop 3.0 anymore maybe you could start a campaign to look for a maintainer on twitter or somewhere else ?. It is fixed with by adding this function in OAuth1.php. It's not very sexy (duplication of some initialize() code) but it's working. I let you (whoever you are) implement it in the way you prefer. \n```php\n    public function setAccessToken($tokens = [])\n    {\n        parent::setAccessToken($tokens);\n    if ($this->getStoredData('request_token')) {\n        $this->consumerToken = new OAuthConsumer(\n            $this->getStoredData('request_token'),\n            $this->getStoredData('request_token_secret')\n        );\n    }\n\n    if ($this->getStoredData('access_token')) {\n        $this->consumerToken = new OAuthConsumer(\n            $this->getStoredData('access_token'),\n            $this->getStoredData('access_token_secret')\n        );\n    }\n}\n\n```. I didn't study hybridauth enough but it seems cool. Maybe not fully optimized but ok for now.\nYou can also remove all other \"new OAuthConsumer\" in validateAccessTokenExchange(), validateAuthTokenRequest() and initialize() right ?. ",
    "dedanirungu": "Thank you all for you contribution to this project.\nAs  requested earlier we  agreed to release stable version 3.0 on January 2018. We have missed this deadline. I would like to know which areas need improvement before we release version 3.0.\nBelow is the message displayed on project description.\nHybridauth 3 is currently in beta stage and it might NOT be suitable for production use.\n           The 3.0 will be released in January 2018.\nI am willing to help where I can we realize this goal.\n. ",
    "gopi-ar": "@ApacheEx any updates on this? We'd like to use 3.0 but don't want to lower stability in composer... That's great \ud83d\udc4d \nFor others wanting to include 3x in composer while avoiding having to change stability levels, use this:\n\"hybridauth/hybridauth\" : \"~3.0@dev\". ",
    "marvincaspar": "v2 but i can also update to v3. Thanks for your answer. I will have a look into it in the new days.. ",
    "Riad-Jarjour": "I don't get why you are getting this error, doesn't hybridauth v3 already require providing an id and secret? Does changing line 95 fix this?. ",
    "asheeshn": "Thanks. When can we expect this feature (approximately).\nThanks in Advance.. really \ud83d\udc4d . Hi, Any idea on #885 issue ?. Thanks.\nI am getting this error. Can u pls help me out to fix this.\nSigned API request has returned an error. HTTP error 403. Raw Provider API response: { \"errorCode\": 0, \"message\": \"Access to posting shares denied\", \"requestId\": \"C6RBDU5AG6\", \"status\": 403, \"timestamp\": 1512486655024 }.. $adapter = new Hybridauth\\Provider\\LinkedIn( $config );\n    $social_media_access_token = 'AQV2Rn_S39Oiw_xS6yUhywzVdw_bQv17_Bns8VKID6_VPUe_vEQWcMLawSCR3nbRrqWH3Fgd5ZPJnSOQLs4oWXsgmSnF4uAgArucYDCD5s-pGyD2tJZ52dFe3A1_2K-4PJpDdpeRrpZgY-dP4FAndOxIHHsW9WYTqRJiqGqiDLrqAU6EhK0jrwzv0q7ZSB5xXxJSh8Tfk4d0A3vRTlnKdjhZ_oXlxZnszhpPF74K8v8kgosqfp0ccsZb0c0NU-ArBS7pGDcStrqfPScMiTXUZf-Mw_NhG6fFrjugTrDIIjQ2jMsq-9ntWGY0l4RdR1Bn8Wd2G5d0ZkvhFfX2fp-x0E_7h2nVJQ';\n$social_media_access_token_secret = '';\n    $adapter->setAccessToken(['access_token' => $social_media_access_token, 'access_token_secret' => $social_media_access_token_secret]);\n    $userProfile = $adapter->getUserProfile();\n    //dd($userProfile);\n    $img_relative_path = base_path('public\\images\\social_media_logo.png');\n    $img_absolute_path = asset('public/images/social_media_logo.png');\n    //dd($img_relative_path);\n$link_url = url('externals/viewjob/57/356a192b7913b04c54574d18c28d46e6395428ab');\n\n$status = $adapter->setUserStatus(array(\"message\"=>\"Default Logo Shared with external link 333\", \"link\"=>$link_url, \"picture\"=>$img_absolute_path));\n\n//$status = $adapter->setUserStatus(\"Default Logo Shared\");\n\n\n/*$adapter->setUserStatus(\n    array(\n        'comment' => 'Check out developer.linkedin.com!',\n        'content' => array(\n            'title' => 'LinkedIn Developers Resources',\n            'description' => \"Leverage LinkedIn's APIs to maximize engagement\",\n            'submitted-url' => $link_url,\n            'submitted-image-url' => $img_absolute_path,\n        ),\n        'visibility' => array(\n            'code' => 'anyone',\n        ),\n    )\n);\n\nExecution : https://beanhiredev.com/social_media/publish/5. I am trying to share post offline with access token. \nHere is my config \n$config = [\n    'callback'  => url('/social_media/configure'), //Hybridauth\\HttpClient\\Util::getCurrentUrl(),\n    'keys' => [ 'key' => $social_media_key, 'secret' => $social_media_secret ],\n    'scope' => 'r_basicprofile r_emailaddress w_share',\n];. Thanks. You mean in place of 'Picture', we should use 'thumbnail' for Facebook ??. For Twitter i am getting this issue. Please help me to solve this\nSigned API request has returned an error. HTTP error 401. Raw Provider API response: {\"errors\":[{\"code\":32,\"message\":\"Could not authenticate you.\"}]}.. $config = [\n    'callback'  => url('/social_media/configure'), //Hybridauth\\HttpClient\\Util::getCurrentUrl(),\n    'keys' => [ 'key' => $social_media_key, 'secret' => $social_media_secret ],\n    'scope' => 'r_basicprofile r_emailaddress w_share',\n];\n$adapter = new Hybridauth\\Provider\\Twitter( $config );\n$adapter->setAccessToken(['access_token' => $social_media_access_token, 'access_token_secret' => $social_media_access_token_secret]);\n$status = $adapter->setUserStatus(array(\"message\"=>\"Default Logo Shared with external link 333\", \"link\"=>$link_url, \"picture\"=>$img_absolute_path));\nExecution : https://beanhiredev.com/social_media/publish/4. Sorry for that scope. Added by mistake.\nI am trying to share a post offline with access token. (Message, Picture and Link)\nFor Facebook, LinkedIn and Twitter - \nI am trying to share a post offline with access token after successful authentication. Can you please suggest an example which exactly suits this requirement.. Thanks. Please help me out to fix this issue.\nSigned API request has returned an error. HTTP error 401. Raw Provider API response: {\"errors\":[{\"code\":32,\"message\":\"Could not authenticate you.\"}]}.. With Message Link and Picture. Twitter - setUserStatus with link option.\nTweet Link should go to the specific url. Please give any example.. I am able to get the link to click in the message.\nBut I am looking for the functionality, Clicking on the tweet image, it will take to the url given. \nInstead of redirecting to the page, tweet image is showing bigger. Please help me to achieve this. . Thank you.\nSeems Twitter doesn't have API for the TwitterCards. I dint see it. \nIf it is, can you provide me some links to integrate twitter cards through API. . v3.0 - Linkedin : \nIn Curl.php, 'request' method, \n$this->requestHeader = array_merge($this->requestHeader, (array)$headers);\nis placed after the comparisions. Should be before the method comparisions.\nCase : \nisset($this->requestHeader['Content-Type']) && $this->requestHeader['Content-Type'] == 'application/json'). I am using version 3 latest one.. Any Solution ??. Is this error from Linkedin or Hybridauth ??. Actually, we are using it as a service from our internal APPs.\nI found that, twitter(oauth1) is working properly whereas linkedin(oauth2) is getting failed. \nIn Oauth2.php file, line no 383, i am getting $this->getStoredData('authorization_state') as empty.\nPlease help me out in which situations, it will get empty and how can i set it manually ??\n. ",
    "leonidaswander": "Hi\n\nHA version is Hybridauth 3\n\nTested with Facebook, G+ and Linkedin. My code is:\n`\nsession_start();\n\ninclude 'social_register.php';\n// include hybridauth lib\n$base_url_callback = 'http://site.com.br/controller/social_login.php?login='.$_GET[\"login\"];\n$config_facebook = [\n    'callback' => $base_url_callback,\n    'keys' => [ 'key' => '***', 'secret' => '**' ]\n];\n$config_google = [\n    'callback' => $base_url_callback,\n    'keys' => [ 'key' => '************-f38fd0v5rltkb65cu8lua1fdfgfgatvk.apps.googleusercontent.com', 'secret' => 'u-1zNhsYX-**************' ]\n];\n\n$config_linkedin = [\n    'callback' => $base_url_callback,\n    'keys' => [ 'key' => '**************', 'secret' => '**************' ]\n];\n\nrequire_once( \"biblio/hybrid/autoload.php\" );\nif( isset( $_GET[\"login\"] ) )\n{\n    if( $_GET[\"login\"] =='facebook') \n    {\n        $adapter = new Hybridauth\\Provider\\Facebook($config_facebook);\n}\nelseif( $_GET[\"login\"] =='google') \n{\n    $adapter = new Hybridauth\\Provider\\Google($config_google);\n}\nelseif( $_GET[\"login\"] =='linkedin') \n{\n    $adapter = new Hybridauth\\Provider\\LinkedIn($config_linkedin);\n}\n    try {\n        $adapter->authenticate();\n        $isConnected = $adapter->isConnected();\n        $userProfile = $adapter->getUserProfile();\n        //var_dump($userProfile);\n\n        $adapter->disconnect();\n    }\n        catch(\\Exception $e){\n            echo 'Oops, we ran into an issue! ' . $e->getMessage();\n        }\n\n}\nif( ! isset( $userProfile ) )\n{\n    if(isset($_SESSION['RedirecionaLogin']))\n    {\n        $redireciona = base64_decode($_SESSION['RedirecionaLogin']);\n    }\n    else\n    {\n        $redireciona = 'http://site.com.br/painel/meus-anuncios';\n    }\n}\nelse{\n    $user = new User();\n    $user_data = $user->checkUser($_GET[\"login\"],$userProfile->identifier,$userProfile->displayName,$userProfile->email,$userProfile->photoURL);\nif(isset($_SESSION['RedirecionaLogin']))\n{\n    $redireciona = base64_decode($_SESSION['RedirecionaLogin']);\n}\nelse\n{\n    $redireciona = 'http://site.com.br/painel/meus-anuncios';\n}\n\n}\n`\n  . is there any configuration in the hosting for hybridauth to work?\n\n\n-PHP 5.4+\n-PHP Session\n-PHP cURL\nthey are OK. Hi ApacheEx,\nurls are in the network settings uri.\nI tested configuring a different url and the social networks returned saying that the urls are not in the valid uris configured, I believe it is some kind of hybridauth bug, I'll remove it and add it again. I switched to version 2, and the same error occurs . ",
    "kowach": "I had same error. It was problem with custom Phalcon session database adapter. So I implemented \\Hybridauth\\Storage\\StorageInterface and put it in \\Hybridauth\\Hybridauth($config, null, new MyPhalconHybridStorage()); constructor.. ",
    "AyaEMahmoud": "@ApacheEx Do I have to upgrade? isn't there any work around? Also could you please tell me the problem with this implementation? . ",
    "TimMcCauley": "@ApacheEx thank you, this was the case. Please consider this as closed.\n  . ",
    "plysak": "Jesus... I had scope in that 'keys' subarray.... sorry, my bad ... . ",
    "davidhill001": "Thank you! It works now. ",
    "popnoart": "Hi, thanks!\nNo luck with the new code!\nError thrown:\n```\nFatal error:  Uncaught Hybridauth\\Exception\\HttpRequestFailedException: Signed API request has returned an error. HTTP error 400. Raw Provider API response: {\"error\":{\"message\":\"Invalid appsecret_proof provided in the API argument\",\"type\":\"GraphMethodException\",\"code\":100,\"fbtrace_id\":\"GYkaC+yNe2p\"}}. in /var/www/fandoms/fandoms.com/public/lab/HA/Hybridauth/Adapter/AbstractAdapter.php:344\nStack trace:\n0 /var/www/fandoms/fandoms.com/public/lab/HA/Hybridauth/Adapter/OAuth2.php(682): Hybridauth\\Adapter\\AbstractAdapter->validateApiResponse('Signed API requ...')\n1 /var/www/fandoms/fandoms.com/public/lab/HA/HA3.php(21): Hybridauth\\Adapter\\OAuth2->apiRequest('https://graph.f...')\n2 {main}\nthrown in /var/www/fandoms/fandoms.com/public/lab/HA/Hybridauth/Adapter/AbstractAdapter.php on line 344\n```\nCode:\n```\ninclude 'Hybridauth/autoload.php';\nuse Hybridauth\\Hybridauth; \n$config = [\n    'callback' => 'MYCALLBACK',\n    'keys' => [\n        'id'     => 'MYFBKEY', \n        'secret' => 'MYFBSECRET' \n    ]\n];\n$adapter = new \\Hybridauth\\Provider\\Facebook($config);\n$adapter->authenticate();\n$accessToken = $adapter->getAccessToken();    \n$isConnected = $adapter->isConnected();\n\n$facebook_obj = $adapter->apiRequest('/me/accounts');\n$facebook_array = json_decode(json_encode($facebook_obj->data), true);\nforeach ($facebook_array as $page_key => $page_data) {\n    if($page_data['id']=='MYPAGEID'){   \n        $params = array(\n            'message' => 'Prueba', \n        );\n        $apiResponse = $adapter->apiRequest('/MYPAGEID/feed', 'POST', $params);\n    }\n}\n$adapter->disconnect();\n\n```\n. That would be awesome! Thanks!. Perfect with just a small addition in scopes! For setPageStatus to work for me I had to ask for \"publish_pages\" too in scopes. If not throws this error:\nRequires either publish_actions permission, or manage_pages and publish_pages as an admin with sufficient administrative permission\n. ",
    "RichardPilbery": "I couldn't get Twitter authentication to work without changing the URL. Perhaps it was just me. The URLs listed on under the Applications Settings on app.twitter.com are: \n\n. Ah okay, it is working for me, but it is possible I changed more than one thing (including the link) when troubleshooting. Sorry for the trouble.. ",
    "waresz": "Excellent, thank you!! \ud83d\ude4c . ",
    "dimabory": "@ApacheEx will be fixed in 2.x?. Thank you too. @ApacheEx . ",
    "docxplusgmoon": "How I can get these changes from composer?. ",
    "RajeshPerro": "Thank you so much for your ans. \nhere is my access token : AQVLaqdfaYilBc24a5C4b8h9c3MqVyWu8s-ojpsuehrPy_GDgxy7B1EWY4X2W1nJZ3Mro42e-djjEWXIOL9A6af91L-n34TWNt9A_jQWgJDTYLUYAYGJltbF7vdcXhC7GHjjrCHGIZVv3v9OBHnRFfjqb3DwsQMRvwxdbS3DO_73Z6xWjMgZyqhxLRlVnq3WZQeLY2yhNoTSUhLxHBRF1sZvWkyY2Kb49Zp8BZTbrLzgKGjAx9MchGk2Iw7_oiBZq_UqBrHioet9C8Yzu0lGjXnBZhmjJu4ccBZ-y7AVYUaagFXShsOu3NfnnO1sphiZ9wXPuNynQ6tUI4MUlWE_ZXBWEZ871Q\nHA : I just downloaded the Zip from here. It says the version is : Hybridauth 3.0 Progression\n. No..It's not working.. even I tried like this : \n    // $linkedin->setAccessToken(['access_token' => $_SESSION['access_token_linkedIn']]);\n                 $linkedin->setAccessToken('AQXWEKY6R77s4Df7EUuQYAmC9-MWMQ0xBlINM8EyxFWe8xukfYHza3majKOcAlHY7jEdJjpRAuUtyVKzkjKCgm4XGnmiaKb7phEVAOvjbnAnRnMEgZD1gDzgKnwNpNP07pvNmD4vVW5GiYWD9GpwFd9vQc9zmN9MJRz08WE53YlQWAfO45sr0uop--t_Xb3c3ook9haRblTBLcm8mRLDEChvh9yH6R3IEs1oKLtdra_Vms_7GL3kDQ3qbCKFrxBtxcXG7nOHodp_GsmpFAoImuVA3xD9vAio8bK292Ud8opNxElb17Mb5sDzQwu_46i8cBu7GPeChTefsqz9v4vcDRk0djVl-Q');\n. Hi, \nthis is how I get access token.. This method is responsible to get access token and return it. Then I store it in DB.\npublic function linkedinAction()\n    {\n        $request = $this->getRequest();\n        $payload2=null;\n        if(isset($_POST['app_id']) && isset($_POST['app_sec'] ))\n        {\n            $_SESSION['app_id_linkedIn']= $_POST['app_id'];\n            $_SESSION['app_sec_linkedIn']= $_POST['app_sec'];\n        }\n        $config = [\n            'callback' => $request->getBaseUrl().'/socialpost/login/linkedin',\n            \"enabled\" => true,\n            'keys' => [\n                'key' =>  $_SESSION['app_id_linkedIn'],\n                'secret' =>  $_SESSION['app_sec_linkedIn']\n            ],\n            \"scope\" => \"r_basicprofile,r_emailaddress\"\n        ];\n        try {\n            $li = new Hybridauth\\Provider\\LinkedIn($config);\n            $li->authenticate();\n            $profile = $li->getUserProfile();\n            if (!empty($profile)) {\n                $token = $li->getAccessToken();\n                $payload2['token1']=$token;\n                $payload2['profile']=$profile;\n            }\n        } catch (Exception $e) {\n            (new Hybridauth\\Storage\\Session())->clear();\n           $payload2=['error' => $e.getErrorMessage()]\n        }\n        $this->_sendJson($payload2);\n    }\n. Okay, the thing is it was urgent for me, and I did the same thing and it was not working for me. So I shifted myself for other library. But I will test this one again.. hi, I am new user. I have LnkedIn appid, Secret and AccessToken in my DB. How can I post a status by using setUserStatus() \nnb: though I have all those data so I don't want to push user in login again. Is it possible to post inLinkedIn by using this method.?. Hi,\nThanks for your suggestion. But I am getting new issue. Please please help me!\nHere is my method to post in LinkedIn but I am getting error : Fatal Error: \nArrayObject Object\n(\n    [storage:ArrayObject:private] => Array\n        (\n            [exception] => Hybridauth\\Exception\\HttpRequestFailedException Object\n                (\n                    [message:protected] => Signed API request has returned an error. HTTP error 401. Raw Provider API response: {\n  \"errorCode\": 0,\n  \"message\": \"Empty oauth2_access_token\",\n  \"requestId\": \"GT3BPWBLSX\",\n  \"status\": 401,\n  \"timestamp\": 1520772798106\n}.\n//This is my method........\n public function postToLinkedin($lnAppkey,$lnAppSec,$lnToken)\n {\n         if($lnAppkey !=null && $lnAppSec !=null && $lnToken !=null)\n        {\n            $_SESSION['app_id_linkedIn'] = $lnAppkey;\n            $_SESSION['app_sec_linkedIn'] = $lnAppSec;\n            $_SESSION['access_token_linkedIn'] = $lnToken;\n        }\n    $config = [\n        'callback' => $request->getBaseUrl().'/socialpost/application/postToLinkedin',\n        \"enabled\" => true,\n        'keys' => [\n            'key' => $_SESSION['app_id_linkedIn'],\n            'secret' => $_SESSION['app_sec_linkedIn']\n        ],\n\n    ];\n\n// Instantiate LinkedIn Adapter.\n        $linkedin = new Hybridauth\\Provider\\LinkedIn($config);\n// Authenticate the user.\n        $linkedin->setAccessToken($_SESSION['access_token_linkedIn']);\n// Update the user status.\n        $response = $linkedin->setUserStatus([\n            'comment' => '',\n            'content' => [\n                'title' => 'This is a post',\n                'description' => \"I am trying to post a demo content\",\n                'submitted-url' => '',\n                'submitted-image-url' => '',\n            ],\n            'visibility' => [\n                'code' => 'anyone',\n            ],\n        ]);\n}\n . ",
    "bardak-dev": "Probably doesn't work for another reason. Apologising for useless pull request). ",
    "arnoldjan": "I want to pass a custom value to the state param to pass variables to the callback URL. I know that the state param is supposed to be used for CSRF but FB also recommends it for this here:\nhttps://developers.facebook.com/docs/facebook-login/security/#strict_mode\n\nFor apps with dynamic redirect URIs, use the state parameter to pass back the dynamic information to a limited number of redirect URIs. Then add each of the limited redirect URIs to the Valid OAuth redirect URIs list.\n\nBut thanks for taking care of this!. ",
    "nuryagdym": "I decided to try Hybridauth v3.0 beta version. It is working fine. I will leave as it is for now. ",
    "rjrajreehan": "this is my website link https://www.jmoza.com/ try login with Facebook \nand i think i have v2.8 the screen shot from facebook app setting is also posted \n1:http://prntscr.com/ivvrm0\n2:http://prntscr.com/ivvrs0. kindly help me out am using wowonder script you can google it inside that script they use hybridauth for facebook login . but not sir am facing this error :( \nhttp://prntscr.com/ivz7yv. the first error was cleared now am facing the same error on my website first i was getting this error on facebook auth page now on my website page . sir how can i fix it kindly tell me the both ways 1st one the way \"Add your full callback url in the setting at facebook app setting\"\nsecond the update kindly please am waiting for your reply ;) . i go this error on here this link https://www.jmoza.com/login-with.php?provider=Facebook#=. i had done adding the callback url you gave me now what url i had to add ;( . i had done adding much url as much i can now tell me what i had next to do ;( \nsee the screen shot http://prntscr.com/iw285r. Thanks a lot the issue is solved by update the sdk ;) . ",
    "fillup": "Thank you @ApacheEx , removing &scope=email from the \"Valid OAuth Redirect URIs\" url fixed it for me. I had updated php sdk and hybrid auth but that wasn't enough, also had to add the ?hauth_done=Facebook to my url, but not include the &email=scope part.. ",
    "hamzazafeer": "updating the SDK solve the problem ;). ",
    "Olelishna": "I look at code from current \"master\" branch from this repo.. ",
    "cookieman768": "When you update this could you use the new Twitch API? The other two are going to be deprecated at the end of 2018.. I've tinkered around with this and got it working in my test environment. I'll upload what I have in a PR.. @Theo4, are you still having issues? From my testing, I was able to get it to work. Also, the URL that you mentioned as being wrong is indeed correct. For OAuth, the helix scope is not used, as per the documentation found here. I will do some testing when I get the chance if you\u2019re interested. \nEdit: @Theo4, I just tested and the email is set properly. By using the code below my email did appear.\n$adapters = $hybridauth->getConnectedAdapters();\necho $adapters[\"TwitchTV\"]->getUserProfile()->email. What do you have so far? Do you have a configuration file? The only thing that would make Discord different than the others is the name in the configuration file.. @StorytellerCZ the changes are not reflected on the website. Just so you know. . It looks like that provider hasn\u2019t been updated to support the https profile picture URL. It looks like a simple fix, I\u2019ll make a pull request when I get the chance later today. You could manually fix this by editing the provider file for Twitter. Just change profile_image_url to profile_image_url_https in the profile section. In the future you can always do some simple troubleshooting by looking at the code and documentation of the provider. For your reference, here is Twitter\u2019s documentation. . > @steoo it seems like Twitter returns URLs in http rather then https, you can't really do anything about it, unless replace it with https on the prover level.\n\nWhat do you @cookieman768 think?\n\nIt is just a simple change as I stated above. I could upload the change when I get access to my development computer. . Ahh. I didn\u2019t think about that. Would it be best to have a provider for each region or an option in the config? I don\u2019t think that the other providers have this issue. Let me know what approach I should take. It would be pretty easy to change this for each region. . I just looked at the providers, it looks like for WeChat there is a different provider specifically for China. I\u2019ll take that approach and make multiple providers, one for each region. I\u2019m not sure if I\u2019d be able to test the Chinese version or not. I\u2019ll look into it. . I've uploaded the EU and APAC files.. Sounds good, I'll make the changes when I get the chance.. Ahh. That would be a better approach. I'll do that later today if I get the chance.. @ApacheEx Oops! My bad! I completely forgot about this, I'll do it when I get some time with a computer. I've been a bit busy recently.. ",
    "ErikJson": "From the research that I was doing before deciding to use HA, there don't seem to be any clear alternatives, unfortunately.\nI'm not necessarily saying that it needs to be replaced though. I just wanted to get an idea about your confidence levels in the library (and have it documented here for anybody with the same question). If that response is simply that you don't know, then that's ok, and you can close this issue.\nThanks for your hard work on HA :). ",
    "Ridder90": "Travis mentions a connection timeout. How can we do a retry?. Sure! Sorry about that.. ",
    "bosiocarlosm": "Hi!,  Thanks for the new provider. When I implement this provider I can get the firstname and lastname but email is allways in null. I implemented a social login with other providers and it works.\nIn my API I seted \"email\" and \"User.Read\" permitions. Is email atribute working in the current version?\nThanks. ",
    "neokio": "The latest v3. Sorry about that, I didn't notice that your .gitignore was ignoring /examples!\nI'm sure it was there for good reason, hope it's ok that I remove the line.. Not sure why it's not registering the newline at the end. But it's there.. ",
    "aa-ahmed-aa": "v3. i think it's a logic wise to have different callbacks for different providers, i'm working on it i'll contribute it when i'm done.. example_06 is an example of multiple providers with the same callback in the $config array i want the structure of the $config array to handle different callbacks for different providers.\nplease check the static $config array i mentioned in the issue content.. ",
    "MastaBaba": "Bug was with Facebook and has been resolved.. ",
    "filips123": "OpenID Connect is build on top of the OAuth 2.0, which is already supported by HybridAuth, so it should not be hard to implement it.. I will create ORCID provider.\n~The problem is that records are returned as XML, but the parser will parse them as JSON so it will fail.~\nI added XML parser to Data\\Parser.. I created #1054.. Ok, this makes sense.. This is because 3.0 is currently RC.\nYou should use\n{ \"require\" : { \"hybridauth/hybridauth\" : \"~3.0@rc\" } }. @miled @nitipatl\nI created nitipatl/hybridauth#1 where JWT is moved to third-party packages of Hybridauth. \nIs this OK. I think it is because JWT will maybe be also used by other packages in the future.\nSo, @nitipatl should merge that PR, so it will be added to this.. ",
    "sanjib-dev": "if you are using 2.x, goto Google.php under provider,\nchange the scopes to below line:\npublic $scope = \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.profile\";\nhope this helps :). ",
    "waqleh": "\nif you are using 2.x, goto Google.php under provider,\nchange the scopes to below line:\npublic $scope = \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.profile\";\nhope this helps :)\n\nyou can set the scope in the config file, no need to edit Google.php. ",
    "bologer": "change v1 to v2 in provider and it solved the problem, but should be updated for sure. Duplicate of #964. @steoo it seems like Twitter returns URLs in http rather then https, you can't really do anything about it, unless replace it with https on the prover level. \nWhat do you @cookieman768 think?. Added PR, please check it out @ApacheEx  . @ApacheEx added changes, tested new changes and it still works as expected :+1: . @ApacheEx could you please review and merge?. @ApacheEx done! :+1: . ",
    "thedotedge": "Awesome thanks, will try when new RC is out.. ",
    "noesteijver": "I ran into this problem as well. The new FB apps only allow V3.0 of the API. I was testing with an app that's a little bit older and uses an older version of the API.\nIs there a fix in the near future? Anything we can do to help make this possible?. Hi @ApacheEx ,\nDo you have an update on this issue?. What are the consequences of removing the 'publish_actions' permission?\nWill we have to change anything on our side after the update?\nOp do 2 aug. 2018 om 14:58 schreef Oleg Kuzava notifications@github.com:\n\nI'm going to remove publish_actions permission and deprecate setUserStatus\nmethod.\nAny other thoughts?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/issues/964#issuecomment-409917095,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AKLJtVBRxWaVqK3Nl_aYfZgDCxT3I_hyks5uMveHgaJpZM4T5JYi\n.\n\n\n-- \nKevin Brands\noprichter & media designer\nkevin@noesteijver.nl\n+31 (0) 652254175\nBezoek- & postadres:\nDe Koffiebrandery\nDaviottenweg 40\n5222 BH \u2018s-Hertogenbosch\n. ",
    "warudin": "Hi! I'm having these problems with Facebook as wel, other platforms work fine. It'd be hugely appreciated if the support for Facebook could be re-added!. ",
    "LFP6": "Seems there are additional deprecations - on trying to login via Facebook for the first time, I'm greeted with Invalid Scopes: user_about_me, user_website. ",
    "MrAlejandro": "Not sure why it worked previously, but passing array like this \n$request = array(\n            'code'       => $_REQUEST['code'],\n            'hauth_done' => 'Live',\n        );\nto the Hybrid_Endpoint::process($request); method, solved the problem.. ",
    "hasnatbabur": "There was wrong google secret code and it wasted my one day! (I was confused by the API key)! Now working fine ... cheears. ",
    "manu1222": "I got a similar issue with version 2, but with version 3 it's working.. ",
    "guillaumev": "@ApacheEx Could this be merged in HybridAuth v2 ? Thank you.. Thank you :+1: . ",
    "chamsocha": "Hello guillaume, do you have humanitarianId provider for non joomla website, custom php website. ",
    "Nemra1": "im try this link but now \nFacebook Graph returned an error: Error validating client secret. Try again\n\n. yes it was wrong but after fixed in panle i see this\nDateTime::__construct(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. Try again. ",
    "mansionsoftware": "I have updated the latest version 2.11.0 still facing the issue. \nCan you give me any ideas what would be the issue in server.. This is the error I am receiving.\nFatal error: Uncaught exception 'Exception' with message 'Authentication failed! Twitter returned an error. 403 Forbidden: The request is understood, but it has been refused.' in /var/www/html/hybridauth_api/vendor/hybridauth/hybridauth/hybridauth/Hybrid/Auth.php:173. Hi any help on this issue?. Hi thanks for the response.\nOur customer use the Login option totally around 10 to 15 times a day. Can you provide me where to check the RATE LIMIT for the login process.. Does the twitter app need any verification/review?\nAnd in HA is there any error handling method to handle the Rate Limit exceed issue?\n. okay thanks. Yes the path is writable. And I have access to modify it.. ",
    "Allan-Nava": "I got the same error!. ",
    "jfloury": "Thank you for your reactivity.\nI tried this, but no success : I receive the same message again.. Thank you..\nI have the same issue again.. Do I have to update the fb SDK ? If YES, I don't understand how to do that without composer.. I don't have to include the autoload somewhere ? it will include it ?. It is done, but unfortunately no success. can you also make a screen how /fb-login/settings/ look like => what do you mean ? do you want screenshots of facebook?. \n\n. It is done... same error (sorry).... I'm so sad !. https://www.handianim.fr/kalon/outils/hybridauth/index.php\nLe mar. 10 juil. 2018 \u00e0 12:09, Oleg Kuzava notifications@github.com a\n\u00e9crit :\n\nwhat is the base_url in your config?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/issues/982#issuecomment-403771501,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/Am_bICN8ZdgCPRofjns0WZkWIRIA9R_Uks5uFH11gaJpZM4VFWDN\n.\n. Seems to work !\nCan I send you flowers from France ?. \n",
    "isreehari": "Yes. It is happening to me as well in while I am doing the google authentication.\n. That's my bad, but my research information will help others. First thing I am using the codeigniter 3.1.9 and it does not set the filter_input(INPUT_GET, 'code') in hybridauth/src/Adapter by default I changed it to filter_input(INPUT_GET, param) all the places to ( isset($_GET) && $_GET[param);. Other thing is my session was unstable, it was creating the new session on redirect so there is no problem with hybridauth v3.0.0-rc.7.. ",
    "pferlito": "Seeing the same behavior in my app, using 2.10.0. LinkedIn requires the \u2018state\u2019 parameter according to their docs.. Thanks for the patch @utrenkner and @ApacheEx for the quick response.. ",
    "utrenkner": "Thanks @pferlito - it was your bug report at Drupal today, which made me think that this was not just my fault. I just created a patch which fixes the problem for me, see PR above.\nYou do not need to wait for a new v2 version. Just swap the LinkedIn-Provider against the patched one: https://raw.githubusercontent.com/utrenkner/hybridauth/dab0acaaf9b7e8a55cdb5fa373b0665ea8b877a3/hybridauth/Hybrid/Providers/LinkedIn.php. ",
    "jcambien": "@StorytellerCZ Facebook is recommending us to avoid any redirection between the moment the user clicks the \"Connect with Facebook\" and the Facebook login screen, otherwise they refuse to validate our application. But as far as I know, Hybridauth makes the redirection to the login screen himself in the authenticate() method. The solution could be replacing the Facebook login button destination with a direct link to Facebook, but i'm scared it'll break internal Hybridauth logic.. Sorry no link to provide because it's in the validation process which is private.\nThis is the given reason :\n\nEnglish translation :\n\nCurrently, the Facebook Login button does not work properly in your app. When a user clicks on it, the button must immediately lead to the connection with Facebook and the user must be able to connect to his Facebook account.\n\nI'm afraid Facebook decided another drastic change in their validation policies.... ",
    "misterspelik": "@ApacheEx You have a lot of places where described about PHP 5.2, at least composer.json.\nAll another places in the code are using array() construction.\nI know about that these versions are dead but please write below and try to understand the use case please.\nThis branch contains the old code itself and so-so mantained. But what`s the real reason of declining this PR.\nEspecially when there are a lot of servers working with the old code (as our particular application) without possibility to migrate to new version of PHP due to old framework (which means to rewrite all application).\nAnother question is that v2 branch will not work at new PHP anyway and this is totally not needed because of 3.0 version development.\nWhat would you suggest to do in this case?\nP. S. \nYes for sure I can use the forked repo but the goal is to use original one because of some critical fixes which might appear from community or finding something by myself and deliver to another users.. @StorytellerCZ for sure youre right! Exact version of our PHP is 5.3.6 and we have a roadmap to upgrade both PHP version an application itself.\nBut first of all we have to have unit and acceptance tests working because we want to know whats going on during migration to PHP 7.x .\n@ApacheEx I think having stable tests for legacy applications is a good reason to keep support for PHP 5.2-5.3 just at the moment before closing support of v2 branch.\nAnd I totally agree with @StorytellerCZ that v2 branch need to to be marked as deprecated in documentation itself and it`s wise to set a date for end of support.. @ApacheEx I think I can participate to this process somehow. I will contact you directly about that. ",
    "magicsunday": "The error stated an \"expected\" exception. Exception are never expected, only in unit tests. There is a typo. It should be \"unexpected\" is guess.. ",
    "StrangerGithuber": "Ohh I see now. Thank you.. ",
    "Abolfazl": "Found it that it was messing with my apache mod_security because .profile was matched as a malicious URL. Ended up disabling that one and now everything works. No issue with Hybridauth :). ",
    "pietsch": "Research communities would love to see this happen. In the long run, every researcher will have an ORCID iD and thus would be able to use this login method. Even today, any researcher can register with orcid.org for free and use their OAuth service, among other things.. ",
    "Engineer-UA": "Thanks for your answers, guys. \nI meant that domain1.com, domain2.com, domain3.com,.... are aliases of the domain.com. \nWe encounter such problem just from time to time. Most likely it appears when we reach our quotas for using the service by Google. . ",
    "RazaGR": "Thanks @ApacheEx \nI just did an upgrade with the merged file but received the same error:\nSigned API request has returned an error. HTTP error 410. Raw Provider API response: { \"errorCode\": 0, \"message\": \"This resource is no longer available under v1 APIs\", \"requestId\": \"9AME09L5WU\", \"status\": 410, \"timestamp\": 1544973607816 }.\nAlso, I performed another test by changing  in LinkedIn.php\n$apiBaseUrl = 'https://api.linkedin.com/v1/';\nto\n$apiBaseUrl = 'https://api.linkedin.com/v2/';\nand received below error:\nSigned API request has returned an error. HTTP error 403. Raw Provider API response: {\"serviceErrorCode\":100,\"message\":\"Not enough permissions to access: GET /people/~:(id,email-address,first-name,last-name,headline,location,industry,picture-url,public-profile-url,num-connections)\",\"status\":403}.\nTo test again I reset my access keys and removed various $fields =[..] from getUserProfile but same error accord.. @klausi that PR #1048 isn't for V3 of HybridAuth, but it did help me to find the issues\n@ApacheEx you can check the below and push changes, I have tested and login works,  ~~setUserStatus() needs to be tested~~ got some time and tested setUserStatus and it works. \n```\n<?php\n/!\n * Hybridauth\n * https://hybridauth.github.io | https://github.com/hybridauth/hybridauth\n *  (c) 2017 Hybridauth authors | https://hybridauth.github.io/license.html\n /\nnamespace Hybridauth\\Provider;\nuse Hybridauth\\Adapter\\OAuth2;\nuse Hybridauth\\Data;\nuse Hybridauth\\Exception\\UnexpectedApiResponseException;\nuse Hybridauth\\User;\n/\n * LinkedIn OAuth2 provider adapter.\n */\nclass LinkedIn extends OAuth2\n{\n    /\n     * {@inheritdoc}\n     */\n    public $scope = 'r_liteprofile r_emailaddress w_member_social';\n/**\n * {@inheritdoc}\n */\nprotected $apiBaseUrl = 'https://api.linkedin.com/v2/';\n\n/**\n * {@inheritdoc}\n */\nprotected $authorizeUrl = 'https://www.linkedin.com/oauth/v2/authorization';\n\n/**\n * {@inheritdoc}\n */\nprotected $accessTokenUrl = 'https://www.linkedin.com/oauth/v2/accessToken';\n\n/**\n * {@inheritdoc}\n */\nprotected $apiDocumentation = 'https://developer.linkedin.com/docs/oauth2';\n\n/**\n * {@inheritdoc}\n */\npublic function getUserProfile()\n{\n    $fields = [\n        \"id\",\n        \"firstName\",\n        \"lastName\",\n        \"profilePicture(displayImage~:playableStreams)\",\n    ];\n\n\n    $response = $this->apiRequest('me?projection=(' . implode(',', $fields) . ')');\n    $data     = new Data\\Collection($response);\n\n    if (!$data->exists('id')) {\n        throw new UnexpectedApiResponseException('Provider API returned an unexpected response.');\n    }\n\n    $userProfile = new User\\Profile();\n\n    $userProfile->identifier  = $data->get('id');\n    $userProfile->firstName   = $data->filter('firstName')->filter('localized')->get('en_US');\n    $userProfile->lastName    = $data->filter('lastName')->filter('localized')->get('en_US');\n    $userProfile->photoURL    = $this->getUserPhotoUrl($data->filter('profilePicture')->filter('displayImage~')->get('elements'));\n    $userProfile->email       = $this->getUserEmail();\n\n\n    $userProfile->emailVerified = $userProfile->email;\n\n    $userProfile->displayName = trim($userProfile->firstName . ' ' . $userProfile->lastName);\n\n    return $userProfile;\n}\n\n/**\n * {@inheritdoc}\n */\npublic function getUserPhotoUrl($elements)\n{\n    $photoURL = '';\n    if(is_array($elements)){\n        // I need the largest picture that's why I am choosing end\n        $element = end($elements);\n        $photoURL = $element->identifiers[0]->identifier;\n    }\n    return $photoURL;\n}\n/**\n * {@inheritdoc}\n */\npublic function getUserEmail()\n{\n    $response = $this->apiRequest('emailAddress?q=members&projection=(elements*(handle~))');\n    return isset($response->elements[0]->{'handle~'}->emailAddress) ? $response->elements[0]->{'handle~'}->emailAddress : \"\";\n}\n/**\n * {@inheritdoc}\n *\n * @see https://developer.linkedin.com/docs/share-on-linkedin\n */\n\npublic function setUserStatus($status, $userID = null)\n{\n    $status = is_string($status) ? array (\n        'author' => 'urn:li:person:'.$userID,\n        'lifecycleState' => 'PUBLISHED',\n        'specificContent' =>\n        array (\n          'com.linkedin.ugc.ShareContent' =>\n          array (\n            'shareCommentary' =>\n            array (\n              'text' => $status,\n            ),\n            'shareMediaCategory' => 'NONE',\n          ),\n        ),\n        'visibility' =>\n        array (\n          'com.linkedin.ugc.MemberNetworkVisibility' => 'PUBLIC',\n        ),\n      ) : $status;\n\n\n    $headers = [\n        'Content-Type' => 'application/json',\n        'x-li-format'  => 'json',\n        'X-Restli-Protocol-Version'  => '2.0.0',\n    ];\n\n    $response = $this->apiRequest(\"ugcPosts\", 'POST', $status, $headers);\n\n    return $response;\n}\n\n}\n``. Got some time and updatedsetUserStatus` code, it works now\nupdated above code @ApacheEx  all good to push . @jaimin-vitapio linkedIn deosn't provide those details in v2 r_liteprofile\nhttps://docs.microsoft.com/en-us/linkedin/shared/references/v2/profile/lite-profile?context=linkedin/consumer/context\nto access additional fields requires that you apply for and are granted access to this information from LinkedIn.  https://docs.microsoft.com/en-us/linkedin/shared/references/v2/profile/full-profile?context=linkedin/consumer/context. ",
    "janadam-hbf": "I am working on this past two days and should have ready PR tomorrow.\nAnybody else working on this ?. There is already one PR for this: https://github.com/hybridauth/hybridauth/pull/1048. ",
    "jaimin-vitapio": "Its work fine but not getting other information like birthdate , gender  , address etc not getting its work fine in V1. but not get response in V2\nso please help me :). ",
    "Jaffa-Cakes": "I have discovered the problem, the REQUEST_URI variable does not play nice with discord, replacing this with the URI in quotes seems to work.\nI still do not know why this is as the URI is the exact same as when it is manually entered.. ",
    "AbhishekDas": "+1 from side. On March 7, 2019, all Google+ APIs and Google+ Sign-in will be shut down completely. . ",
    "jinjie": "My application is using hybridauth and I'm hesitant to change to another method of login with Google. Is there a workaround for hybridauth to move to Google Sign-in with minimal code changes?\nI'm using the following scopes for Google: profile email openid. > Released in RC9. \ud83e\udd47\nI am still not ready to use HA v3. Will the update go into v2 stable release? Since the api is going to be deprecated fast.. @karlshea @ApacheEx\nAwesome guys! Is there a documentation on such migration? Such as generating new keys on the console.\nI think there was some discussion where a new v2 api key is required to make this work? Correct me if I'm wrong. . ",
    "zorn-v": "I think there is only need to remove some scopes (and maybe functionality related to it) in hybridauth lib.\nhttps://cloud.google.com/blog/products/g-suite/elevating-user-trust-in-our-api-ecosystems. Is google auth failed with my plugin ? I'll try after NY celebrations.. Google sucks BTW ). You should notice somewhere about this BC break. Or better do something like this, for backward compatibility\nphp\nif (is_array($endpoints)) {\n    $endpoints = new Data\\Collection($endpoints);\n}. Thanks. In future it might be deprecated, but across RCs...\nBTW. When release ? \ud83d\ude04 \n@ApacheEx \nPS: Your lib is ready to use.. I think you meant empty($_REQUEST['openid_mode'])\nAt all without difference, but I just left filter_input as it was. ",
    "e-motiv": "\nI think there is only need to remove some scopes (and maybe functionality related to it) in hybridauth lib.\nhttps://cloud.google.com/blog/products/g-suite/elevating-user-trust-in-our-api-ecosystems\n\nIt indeed looks like it's that simple and only work on the hybridauth developers' side, not on their user-developers side. It looks like G+ to G Sign in will use the same client id etc and nothing has to be changed on the project in Google.\nI got these impressions from this page: https://developers.google.com/identity/sign-in/web/quick-migration-guide#migrate_a_hybrid_server-side_flow. Though on this page (https://developers.google.com/identity/sign-in/web/sign-in#before_you_begin) \"Configure a project\" button, it seems I can configure my existing project as new. I'm afraid to go through with it as it may block my current google logins on my site.\nAs usual, Google help & support is seriously lacking clear explanations... Can we get some update doc on this?  Like, is there anything else to do but to use RC9?\nIt's very unclear even in this thread.  Also, none of the proposed key changes listed here are available to me \u00f3r I'm too scared to go ahead with some of them, as I fear they might break my current enabled logins if not done at the right time... At the same time, Google claims you can use your old keys! Is this because they have warned about v1 keys much earlier than this shutdown? All in all, much confusion and unclearness for me...\nThank you already for the fix. I love you, developers!. > \n\nThere are no docs to update \ud83d\ude04\nEverything is the same. We just remove dependency from the Google+ Sign-in and replace it to Google Sign-in.\n* if you are already on HA 3.x, you just need to pull (upgrade) the newest changes.\n\n* not sure if it's required step but if you are still use v1 key, just recreate it to v2 (e.g `[CLIENT_ID].apps.googleusercontent.com`)\n\n\nI didn't mean like the HA documentation or any existing doc if you thought that.. Just some document or at least a warning for developers using HA and who might not read this thread or be confused by it. (For example the difference between the general word \"API\" and Google calling a specific API of them \"Google+ API\"! Funny they chose that! :-) \nBut yeah, I'm not sure if it's really necessary as all of them might end here after reading the official google e-mail, right? Anyway, you guys decide. No answer needed. ;) I, myself am settled with your answer here and the one above showing the difference between v1 and v2 keys. Thanks.. ",
    "stratege1401": "i have tried to used Oauth google, and it failed.\ncheck this https://developers.google.com/identity/sign-in/web/. Yes.\nWhen I first received the warning email, I didn't saw the new option for creating a new Oauth key v2 on my Google Dev console https://console.developers.google.com/apis/credentials?project=my-projec-YOURIDHERE\nEasy fix is to create v2 key, to change it in nextcloud and then delete the v1 key to avoid receiving Google warning emails.\n. The app is sending the api key to google server for auth.\nIf your apikey is a v1 Aouth key, you will fall on the deprecated problem next march\nthe v1 format is looking like that:  AIzaSyxxxxxxLyqMRcivb_gg6tcxxxxxxLmAg\nIf your apikey is a v2 Aouth key, your problem is fixed.\nThe v2 format is like: 8368xxxxxx23-uke25fmjdxxxxxxxx9a8r2iur302joa2.apps.googleusercontent.com\n. It is not Google api Shutting down. It is the V1 key been discontinued... But as always with Google, they do what they want\n. ",
    "duartegarin": "Bumping into this one as well? Any idea on how we should deal with this deprecation?. @stratege1401 Not sure how that will fix the problem? Hybridauth is currently depending on Google Plus API, so when it gets shutdown it will stop working. Just trying to understand if there is a working fix for this in this lib?. Yes, the API is being shutdown, or at least that is what their emails are saying. Calls such as people.get won't work anymore. I stress the fact that is going to start causing problems as of the end of this month so it's as critical as should be.\nDoes anyone have at least a workaround?. ",
    "tszming": "According to the Google email I received, the api call will start stop working at the end of this month, not March\n\nOn March 7, 2019, all Google+ APIs and Google+ Sign-in will be shut down completely. This will be a progressive shutdown beginning in late January, with calls to these APIs starting to intermittently fail as early as January 28, 2019.\n\n. > It is not Google api Shutting down. It is the V1 key been discontinued... But as always with Google, they do what they want\nGoogle+ API Shutdown\nOn March 7, 2019, all Google+ APIs will be shut down. This will be a progressive shutdown beginning in late January, with calls to these APIs starting to intermittently fail as early as January 28, 2019.\nhttps://developers.google.com/+/api-shutdown\n. ",
    "bien119": "Anyone has any update for hybridauth v2.12.0?. ",
    "karlshea": "\nAnyone has any update for hybridauth v2.12.0?\n\nThat's what this is.. ",
    "dusta": "Yes, it will be more comfortable. I already updated branch.. ",
    "ivanmunozruiz": "Ey, I can't install it using composer, can you please enable it?. ",
    "pavs94": "Can't install it via composer too. \n- The requested package hybridauth/hybridauth 2.13.0 exists as hybridauth/hybridauth[2.5.1, dev-master, 3.0.x-dev, v2.1.0, v2.1.1, v2.10.0, v2.11.0, v2.12.0, v2.2.0, v2.2.1, v2.2.2, v2.3.0, v2.4.0, v2.4.1, v2.5.0, v2.6.0, v2.7.0, v2.8.0, v2.8.1, v2.8.2, v2.9.0, v2.9.1, v2.9.2, v2.9.3, v2.9.4, v2.9.5, v2.9.6, v2.x-dev, v3.0.0-beta.1, v3.0.0-beta.2, v3.0.0-beta.3, v3.0.0-beta.4, v3.0.0-rc.1, v3.0.0-rc.2, v3.0.0-rc.3, v3.0.0-rc.4, v3.0.0-rc.5, v3.0.0-rc.6, v3.0.0-rc.7, v3.0.0-rc.8, v3.0.0-rc.9] but these are rejected by your constraint.. ",
    "Carobit": "Now v2.13.0 is available on packaginst, however it seems something's wrong with the tag versioning. The v2.13 points to the v2.12 version. eg. https://github.com/hybridauth/hybridauth/tree/v2.13.0\nThus installing ^2.13 via composer actually installs v2.12. ",
    "Yamakasi": "Hi,\nIndeed v3, I was not 100% sure if I could do it some way like in #872 but it seems sane.\nMy question here remains, is this PSR, I think not fully, might be good to make it that way ?\nIt helps ;) Thanks!. I wanted to update this, V3 indeed gives this great capabillity to set your own storage but I see a \"problem\" here.\nIt would be great if we can set the:\nprotected $storeNamespace = 'HYBRIDAUTH::STORAGE';\nas arg in the get/set/delete/seleteMatch/clear functions so we can arrange it a little bit more in our own backends.\nAlso make the functions PSR like so we can use one Class for this in our app. I think clear() can be removed even in this case as it's only used for test.. I think it's a bug as I don't see it in 3.x. Sounds like some early/overwritten headers ? Have you checked those and saw what kind of requests are on done on the same time this issue occures ?. ",
    "gabrielferreiraa": "The problem was solved, it was a block on the outgoing requests in the server firewall. . ",
    "nightw0lv": "http://prntscr.com/mmsmya\nwith this worked fine\nwhat to add if twitter don't accept query strings?\nhttps://developer.twitter.com/en/docs/basics/apps/guides/callback-urls. ",
    "jbostoen": "I've also installed HybridAuth rc9 using composer, but the autoload doesn't seem to work? Known issue?\nIt only works if I use \nrequire 'vendor/hybridauth/hybridauth/src/autoload.php';\nComposer's vendor/autoload.php doens't seem to contain anything.. ",
    "alixandru": "This line makes a new HTTP request for the sole reason to set a property which might not even be used by most of the people. I suggest the coverURL be retrieved on demand through a separate function, not here.\n. ",
    "huafu": "I think this is breaking something, the names are coming back empty now :-s\n. ",
    "sleptor": "You are right. I forgot additional field 'name'.\nThe code should be replaced:\n$response = $this->api->api('/me/friends?fields=link,name');\nI will create new pull request.\n. ",
    "hypeJunction": "Looks like you left the original instance in there.\n. ",
    "mourjan": "Done..\nam I supposed to submit another Pull Request?\nBassel\nOn Fri, Jul 8, 2016 at 4:37 AM, Jan Dvorak notifications@github.com wrote:\n\nIn composer.json\nhttps://github.com/hybridauth/hybridauth/pull/658#discussion_r70015151:\n\n@@ -1,5 +1,5 @@\n {\n-    \"name\": \"hybridauth/hybridauth\",\n-    \"name\": \"mourjan/hybridauth\",\n\nPlease fix this back.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/hybridauth/hybridauth/pull/658/files/e9a99e685ec1b7bc8f3a93ef82172cadaf7d0f57#r70015151,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/AFzgxk6J2tf0xy3MVCi-RitIknLKP2VHks5qTanpgaJpZM4JDFP3\n.\n. Exactly, in some cases $mode is passed as an empty string, and in this case $mode will not be initialized by 'PHP' value since it is not null\n. \n",
    "davpsh": "As new change, I've added new scope, for getting access_token without expiration, because VK API doesn't provide mechanism for refreshing only access token.\nThey are suggest to re-authenticate:\n\nGet a new access_token every time it expires or if a user changes their login or password or deletes an application from the list. \n\nWe can't refresh token, we need to get new one and this is bad solution, because we need to redirect user to external page and getting there code for exchanging on token, during processing another request:\nToken validation is called inside OAuth2::apiRequest\nphp\n        // refresh tokens if needed\n        if ($this->hasAccessTokenExpired() === true) {\n            $this->refreshAccessToken();\n        }\nWhat that mean? For example, my token is expired and i want to get user profile, I'm loading adapter and calling getUserProfile method, where token will be validated and with suggested flow from API, we need to re-authenticate user (redirect to page to get new code/token), that's mean that getUserProfile wouldn't be executed  . We can't to validate by 'expires_at', because it's calculated value and it always will be less than current time at expires_in equals 0 (if pass 'offline' in scope, expires_in will be 0).. https://vk.com/dev/users.get. @ApacheEx done. ",
    "Edarlingen": "@cookieman768 Correct me if i'm wrong, but didn't you hardcoded region into your Provider? What about other regions?\nHere is the list of available regions:\n EU\n US\n* APAC\n. @ApacheEx , there is only 3 regions, so I think it shouldn't be very difficult to add one extra to completely cover all available regions. You can count this as request for APAC region.. ",
    "balamyt92": "Yes, it best.. i fix it. well, maybe fix the whole file? I was guided by the style that was already installed.. ",
    "antiqque": "That is correct, i made the same change in my project but i forgot to add it here.\n. I'm sorry but this is my first time doing this and i'm not sure what else i'm supposed to do. . "
}