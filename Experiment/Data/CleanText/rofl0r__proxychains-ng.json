{
    "rofl0r": "hmm which settings are you using ?\nare you using localnet support ? do you connect to localhost ?\nwhat's your remote_dns_subnet ?\ntry if using another proxychains.conf file (for example from other forks) fixes it\n. this looks as if you trying to access a service on localhost through tor proxy which of course cant work\nyou need to enable localnet for this to work (afaik the other fork recently enabled it by default for 127.x.x.x subnet)\nsee these 2 commits\nhttps://github.com/haad/proxychains/commit/b0d9d1da41403536f4c37b74f52d2d2895a4890e\nhttps://github.com/haad/proxychains/commit/251fd7cd4a87c57fe380268ea7daa657a4ab867e\nit's only a little change in the config file\n. well the reason i didn't add it is that i don't use stuff that accesses localhost with tor...\nand 127.x.x.x is the best choice for remote_dns_subnet for over-correct programs that deny to connect to 224-kinda subnets\ni could add it in commented form tho, so one can enable it in a second instead of looking up the syntax\n. @xclr8tr : if you like my work please click on the star button on this repo, having more stars will help to up the reputation of this repo (and it will be ranked higher in github search results). thanks!\n. thanks.\ni dont actually have any security problems with this.\nit's just a matter of having the user trying to understand what this piece of software does before using it.\nwhat IMO is a bad idea is the thing that was added to the shell proxychains launcher in the other repo: exporting the LD_PRELOAD variable, to feature a \"proxified env\" in your terminal.\nimagine you have 3 terms open, one of them \"proxified\".\nnow you only have to enter your command in the wrong term and you're fucked when you have to rely on strong anonymity.\nregarding life and death: if your life depends on a piece of code, you better test it very well before using it.\nor even better, just leave that turd of a fascist state you're living in.\nif you don't, i can't help you.\n. thanks\n. @guanqun can you click on the star button ? every star counts to get a better github search ranking. thanks!\n. you can workaround it by changing these 2 lines in Makefile\nCFLAGS  += -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DTHREAD_SAFE\nLDFLAGS = -shared -fPIC -ldl -lpthread\nto remove  -DTHREAD_SAFE and -lpthread\nwhich distribution are you using ? please paste the output of following commands\nfor i in /lib /lib32 /lib64 ; do\nfind $i -name 'libpthread*.so*'\nfind /usr/$i -name 'libpthread*.so*'\ndone\nand for any found .so files, do objdump -T libpthread.so.2.xx | grep pthread_once\nldd `which telnet`\nldd `which wget`\n. this appears to be breakage caused by recent glibc\nsee http://sourceware.org/ml/libc-alpha/2012-09/msg00203.html\napparently to use proxychains with programs on a system that uses it, you have to link the application that is to be proxified with -ldl -lpthread\nbtw: using ping will not work with proxychains anyway; it uses ICMP protocol.\nproxychains supports only TCP\n. @netroby if you intend to use this with tor, i'd be interested to hear if telnet works with the \"torify\" program that comes with tor. it is quite similar to proxychains.\n. btw, with the removal of THREAD flags as mentioned in my first reply, at least wget seems to work with proxychains.\n. hello @xclr8tr \nno, i was not referring to iptables_torify\nthere's a program called \"torify\" or proxify in the tor suite bundle. i was referring to that.\nyes, iptables_torify can of course be used as well. but it requires another host which serves as a firewall and messing around with routing tables. not what you want to use, unless for a dedicated \"tor-machine\".\nas to this issue, your answer is pretty off-topic.\n. @xclr8tr where's the possible solution ?\ni see pasted output of proxychains on a working system.\nthe problem in this issue is that with glibc 2.15, they pretty much killed LD_PRELOAD because it only works if the program to proxify is linked against -ldl and lpthread. that makes what you can do in the preloaded DLL limited to only functions in the libc.so, and since dlsym seems to be contained in libdl.so this makes it impossible to hook the symbols without writing an own dynamic linker.\nyou're right that iptables_torify doesn't necessarily require another host, unless you don't want to mess up the firewall and routing settings of your own box, and as long as you don't want to use socksified and non-socksified apps at the same time.\n. @tomsawyer , @semionlaptev\nplease also see commit bddb79a2860be472a62414f6bf9b32810e237ba9\nthat fixes the segfault, but unlike your code commited to haad's repo it doesnt introduce a regression in regard to thread safety. a good maintainer would have noticed that.\n. this function is used for any name resolution inside proxychains (i.e. also called from proxy_getaddrinfo), so it has to be threadsafe, and that is the reason the buffer is explicitly passed.\n. you may also be interested in 2d58820635154320b097779d98050f370a81de6e\nthis fixes the thread safety issue i recognized when i fixed the segfault.\n. hi, thanks for your support. unfortunately netcreature, the original author can't be contacted. it seems that he does not check his emails or his email account expired.\ni had a conversation with the debian maintainer of proxychains and the next version of debian will include this proxychains version. i hope that will make things better.\ni guess i should also look into convincing pkgsrc maintainers to use this version, this shouldn't be a problem as i know some of them personally.\n. oh, if you take a look at the commit history on haads repo or the contributor graph, you'll see that 95% of all work was done by me, so there's no risk in using my repo over haad's.\nhttps://github.com/haad/proxychains/graphs/contributors\nand the source code is less than 1.5 KLOC so it shouldnt be too hard to check that it doesnt do evil things.\n(note that haads version has much more code, because he does things in a overly complicated manner, and pushes stuff that was originally testcode)\n. the no-as-needed was added recently to fix the broken toolchain on ubuntu 12.04, but apparently the mac one is even more broken...\nif removing it fixes the build, we can special case it for mac in the configure script\n. so please remove -Wl,--no-as-needed and tell me if that works (i dont have a mac)\n. does this commit fix it ? (branch macfix)\nhttps://github.com/rofl0r/proxychains/commit/00b45899caeb069554c0c8bedc8b6913511ac058\n. thanks for your report!\ncan you paste the declaration of getnameinfo on line 677 of your /usr/include/netdb.h ?\nand please tell me which version of glibc you use.\nyou can get this information by executing libc.so (location of libc.so.6 may differ on your system) directly like this:\n$ /lib64/libc.so.6 \nGNU C Library stable release version 2.11.3 (20110203), by Roland McGrath et al.\n. the version number is missing from your output\nif it is missing from your libc.so output, try this c program\n```\ninclude \nint main() {    printf(\"glibc v %d.%d\\n\", GLIBC, GLIBC_MINOR); }\n```\n. this here is the relevant code\nhttps://github.com/rofl0r/proxychains/blob/master/src/libproxychains.c#L384\nold glibc versions had a wrong prototype (should be int instead of unsigned int), this should fix it for all affected versions \n(according to my knowlegde up to 2.14)\n. this is the commit that fixed it in glibc.git\nhttp://sourceware.org/git/?p=glibc.git;a=commitdiff;h=e4ecafe004b3d4270b3a9dace8f970047400ed38\n. did you change only libproxychains.c or did you add the second .c file (nameinfo.c) and makefile changes as well ?\nyou should make the changes to all 3 files, then make clean && make again. does that fix it?\nif not:\nwhich version of debian is this (so that i can download and test)\ncan you execute: \ngdb --args ./proxychains4 telnet google.com 80\nthen press \"r\" and enter, and when the message \"aborted\" appears, enter \"bt\" and paste the backtrace information here ?\n. ah i understand. yes, not adding the second C file causes miscompilation.\nthe easiest thing to do is delete your proxychains dir\nthen \ngit clone https://github.com/rofl0r/proxychains\nand build again\nalternatively you can re-extract the 4.3 version tarball, and then change line 386 in libproxychains.c from\n```\nif defined(GLIBC) && (GLIBC < 3) && (GLIBC_MINOR < 14)\n```\nto\n```\nif 0\n```\n. nice!\nyou can find me momentarily in #proxychains @ irc.oftc.net\ni think the mode you want is \"random_chain\" (see proxychains.conf file)\n. \"A lot of the time\" means it works sometimes and sometimes not ? this sounds strange...\ntry to run with gdb\ni.e. gdb --args proxychains4 nmap foo bar\npaste the backtrace (bt) when it receives the SIGTRAP.\ni suspect some problem in the mac dynlinker.\n. well nmap works usually with pcap so on a completely different layer which is not really compatible with proxychains.\nonly nmap's syn scan could theoretically be compatible with proxychains. that's its only mode that works straight with libc sockets.\nthe SIGTRAP backtrace is not useful at all...\n. glad to hear ;)\n. programs that launch other programs are tricky to deal with.\nmaybe environment variables get cleared.\ntry using export LD_PRELOAD=/path/to/proxychains4.so in the shell previous to running your php script.\nalso proxychains works only with dynamically loaded stuff.\nmaybe php is statically linked against curl ?\ntry running gdb --args proxychains4 php myscript.php and put a breakpoint on \"connect\", and then look at the backtrace whenever the bp is hit.\n. i did some tests and the following happens:\nfor the php connect itself, libc.so is used in the ordinary way, everything works as expected.\nfor cul, php dlopen()'s curl.so, which opens libcurl.so. \nfor some reason the glibc dynlinker does not hook the connect() symbol for libcurl.so\nthis seems to be a bug in glibc's dynlinker, as it works as expected with musl libc dynlinker.\nin other words, running your php script using musl libc as system libc, 10.10.10.10 is returned for both calls.\n. yeah, you can use musl libc as a secondary libc, but you need to compile everything involved from source using the provided musl-gcc wrapper, that means zlib, openssl, php, curl, and proxychains (everything called must be using the same libc)\nhere are build recipes for musl (configure flags etc)\nhttps://github.com/rofl0r/sabotage/blob/master/pkg/curl\nhttps://github.com/rofl0r/sabotage/blob/master/pkg/php\nhttps://github.com/rofl0r/sabotage/blob/master/pkg/zlib\nhttps://github.com/rofl0r/sabotage/blob/master/pkg/openssl\n. the simplest thing in your situation is probably to use the built-in proxy support of curl\ni.e. adapt your php scripts so that they all use the same proxy than proxychains (maybe it even works with an environment variable)\nalternatively you could either scratch php and use C, or download a precompiled sabotage linux rootfs from http://mirror.wzff.de/sabotage/ and extract it into some directory (read the http://mirror.wzff.de/sabotage/README_sabotage_images.txt for how to extract the image files) then chroot into that dir and use the php scripts from inside the chroot with musl.\n. it's a bug in GLIBCs dynlinker. someone would need to stand up and report the issue on their bugtracker. this comment  explains what happens.. i've created a minimal testcase to reproduce the issue: https://0x0.st/fdc.gz\nit's 3 small C files and a build.sh. when you run build.sh, you should see the output\nhooked\nhooked\nhowever on GLIBC it probably prints hooked only once.\ncan anyone test this ? i don't have a system with GLIBC.\nwhen we have it confirmed, someone can take the testcase and open a bug report on the GLIBC bugtracker.\napp.c\n```\ndefine _GNU_SOURCE\ninclude \ninclude \ntypedef void (*func)(void);\nint main() {\n        puts(\"hello world\");\n        void *h = dlopen(\"./dlopened.so\", RTLD_NOW);\n        func doit = dlsym(h, \"doit\");\n        doit();\n}\nbuild.sh\n!/bin/sh\ngcc preload.c -Wall -shared -fPIC -ldl -lpthread -o preload.so\ngcc dlopened.c -Wall -shared -fPIC -ldl -o dlopened.so\ngcc app.c -Wall -ldl -o app\nLD_PRELOAD=./preload.so ./app\nshould print hooked twice.\nif it doesn't, dynlinker is broken\ndlopened.c\ninclude \nvoid doit(void) {\n        puts(\"puts from dlopened .so\");\n}\npreload.c\ndefine _GNU_SOURCE\ninclude \ninclude \npthread_once_t init_once = PTHREAD_ONCE_INIT;\ntypedef int (putsfunc)(const char);\nputsfunc origputs;\nstatic void init(void) {\n        origputs = dlsym(RTLD_NEXT, \"puts\");\n}\nattribute((constructor))\nstatic void gcc_init(void) {\n        pthread_once(&init_once, init);\n}\nint puts(const char* s) {\n        origputs(\"hooked\");\n        return 1;\n}\n``\n. thanks. what was the output of the testcase once you got it to run, @kai-rn ?. damn. even when you replaceRTLD_NOWwithRTLD_LAZY` in app.c ?. \"But IP only is expected, proxychains wont work.\"\nthat is not correct, proxyresolv isn't in use anymore: read the comment at the beginning of the script\n. does other stuff such as telnet, wget, netcat work correctly ?\nbtw use a git checkout instead of 4.4, so we can be sure that this issue wasn't already fixed in the meantime.\n. i just tried proxychains 4.4 on an ARM machine using both glibc and musl libc, no problem at all with hdb_fill locking up. can you provide versions of glibc you are using ?\n. you are aware that server programs do not work at all with proxychains ? how do you expect a connection that is made from someone else to go through a proxy.\nyou can only proxify outgoing TCP connections\n. so, let me try to understand the issue\ntransmission is hooked via proxychains. \nso its outgoing connections should go through a proxy, except its outgoing connections to 127.x.x.x, because you set that as a localnet.\nits server sockets, which are not hooked should work as usual.\nyou are connecting to its server socket with an application that is not proxified, but the connection to 127.0.0.1 fails.\nis that correct ?\nbtw, whats your setting here ? https://github.com/rofl0r/proxychains/blob/master/src/proxychains.conf#L51\n. how do you start transmission ? please provide the used command line (including configuration needed to get the web interface up) so i can do some tests.\n. should be fixed via 4fb7eb0 (fix for #42 )\n. should be fixed via 4fb7eb05328465c97b5c374244a82596da9734cf (fix for #42 )\n. is that gmake ? (gnu make) ?\n. shrug in that case i have no idea what causes this.\ni dont even know where that output comes from. preprocessor, compiler, linker ?\ni suspect your toolchain is broken.\nanyway, iOS is not in the list of supported platforms, unlike MacOSX.\nif you can figure out what went wrong and its easy enough to fix, feel free to submit a patch so we can add iOS to the supported list.\n. please elaborate. i have never used http proxies myself, but afaik it is implemented and works.\n. no, this only suggests that HTTP 1.0 is used to establish the connection. theres nothing wrong with that, unless some broken proxy server denies HTTP1.0 connection attempts but allows 1.1 ones.\nif you dont have an example case of a server software that misbehaves in that way, we can safely close this issue as invalid.\n. cool!\nhow can we get that formula integrated upstreams ?\n. https://github.com/mxcl/homebrew/commit/340513411b09e8e9262ff349371f0b15dcfbd87e\nhttps://github.com/mxcl/homebrew/pull/20343\n. thanks for the merge @samueljohn \n. thanks. what is a MAC infrastructure ?\nif you open a pull request i can pull from there so you have proper credits in the commit history.\n. thanks!\n. depends on what \"open\" does\ncan you strace it ?\ncan you try with an absolute path for libproxychains.so ?\n. that \"open\" runs the app is clear. it's unclear how it does so.\nanyway, you set the directory with configure's --prefix. that path is then baked into the proxychains binary.\nyou need to run \"make install\" and then launch proxychains from $prefix/bin, because if it finds libproxychains.so in the same dir the executable is in, it will use a relative path.\n. that doesn't help at all.\nanyway, have you understood the second part of my latest comment ?\n. just curious, does firefox work proxychainified under osx ? i heard reports that it doesn't on recent glibc linuxes due to a bug in the glibc dynlinker.\n. firefox is a bitch because it does some elf hacks to speedup dynamic loading of DSOs (due to its huge C++ bloat), uses dlopen for modules etc... and as the LD_PRELOAD functionality of dynamic linkers is usually not well-tested except in simple cases, this causes some cornercases which can cause malfunction. there are other browsers tho that work fine with proxychains.\ni don't see an urgent necessity to make firefox compatible with proxychains, as it 1) supports socks out of the box, 2) running it without the other privacy extensions of the tor browser bundle is a bad idea anyway.\n. hmm where's the updated text for the config file ? (multithread-hint)\n. trying to compile yields multiple errors\nsrc/core.c: In function \u2018connect_proxy_chain\u2019:\nsrc/core.c:621:35: error: \u2018pc\u2019 undeclared (first use in this function)\nsrc/core.c: In function \u2018connect_proxy_chain\u2019:\nsrc/core.c:621:6: error: too many arguments to function \u2018start_chain\u2019\nsrc/core.c:435:12: note: declared here\n. i was about to merge your PR, but the build errors prevent me from doing so. so pls come up with a fix.\n. cleaned up and merged\n. than look into your email account, you get one mail per comment\n. well i basically wanted that you split off the malloc change from the commit that introduced it silently under a different label\n. i can't merge this as is. please clean up and create a new pull request against current master. thank you.\nalso it would be nice if the new PR had some sort of introductory text that describes why one would like to have more than one proxychain list.\n. how would you proxify an incoming connection ?\nin general, only outgoing connections can be proxified.\n. as for running a proxyfied terminal, you open gnome-terminal as usual and then invoke proxychains4 bash inside the terminal\nor just export LD_PRELOAD=/path/to/libproxychains.so\nyou probably need to set a localnet for 127.x.x.x in proxychains.conf so that the smtp server does not try to connect to local ports using the proxy\nas for the script, i don't see the problem - you just skip the ssh command and instead put your socks proxy into the config file.\n. gdb --args proxychains4 mail-server should do the job. then you can break on proxychains main() or the some function of libproxychains.so.\nyou should start your server in a way that makes it run in foreground and log to the console. then you should also be able to see the connections done via proxychains and other proxychains output like [DLL init].\n. imo that's too much hassle for little gain - if someone doesnt know the ip of his proxy he can look it up via hosts or proxyresolv (with a temporary tor config or similar).\ni'm not even sure if it is still possible to turn off proxy_dns...\n. yeah, you don't want to manually specify ips and i don't want to code the feature you want.\n. there's a problem with this approach: it excludes powerpc users (up to osx 10.5) and potentially (i don't know if this setup exists) those that have a toolchain/system that supports only i386 or x86_64.\nhowever i would accept a patch that adds a configure flag --with-universal-binary or something like that which puts the right C/LDFLAGS for this usage case into the config.mak.\n. sounds good\n. it's technically not correct to return success\nthe process may try to reuse, dup, or whatever our fds\ndoes it fix the issue if you set errno to EBADF or EIO ?\n. line 7 of README has the answer\nhttps://github.com/rofl0r/proxychains-ng/blob/master/README#L7\nas for your document, you mean something describing an \"update\" from proxychains 3.1 to proxychains ng ? it's as easy as installing the new program and then invoking \"proxychains4\" instead of \"proxychains\". additionally you may want to diff the config files with the one in px-ng's tree to copy the commented out options for new functionality.\n. when you connect to any proxy, you cannot make that proxy connect back to your localhost address. 127.0.0.1 will point to the exitnode's own \"localhost\".\nthus, it is impossible to mix any proxies that both require you to run a daemon on localhost.\n. @SZoPer \nthat feature is called localnet - just uncomment this line https://github.com/rofl0r/proxychains-ng/blob/master/src/proxychains.conf#L86\n. well, the proxychains.conf file is kinda the documentation...\n. which os/distribution/version, and which firefox version ?\nbtw firefox has its own proxy setting you could use\n. firefox has a hidden setting you need to activate to do remote dns.\ngo to about:config and set network.proxy.socks_remote_dns to true\n. hmm... thanks, but does it actually make sense to include distro specific stuff in a source repo ?\n. thanks for the interest. the 4.8 release is not there yet, as nothing major has been changed since the 4.7 release. there have been only minor cosmetic fixes except for this commit https://github.com/rofl0r/proxychains-ng/commit/b76aa653c9089914d16584a16d35dd037ac0fd62 , which may or may not (i didn't hear back from the original reporter) fix a problem with nmap.\n. 4.8 was just released\n. i had to reupload the tarball due to a stupid mistake (forgot to commit the release commit)\nthe proper release tarball has sha512 04fe5cd470db7dd041fba2d326fab9865e386b33d3c8afdfdb0ba8dd0962a62d1e0a5d235a10bd4e885baae70373280a599354d092fbebe7f7c08dfe41dfa03b  \nwhat's your DESTDIR and prefix ? could you pastebin your config.mak ?\ncould it be the problem is due to the 2 slashes ? maybe you used --sysconfdir=/etc/ rather than /etc ?\n. hmm i cant reproduce the issue with my gnu make 3.82. do you use gnu make 4.0 ?\n. i'll try to investigate the issue. \nto do so i need to port gnu make 4.0 to my musl-libc based linux system which will probably take a while.\nin the meantime you could just cp src/proxychains.conf $DESTDIR/etc/ as a workaround.\nother testers on freebsd and suse linux didnt report any issues with install-config so far.\n. ah, i think i see the error now... it happens to work because i have proxychains.conf in my development root dir. working on a fix, will push a bugfix release soon.\n. uploaded new release tarball proxychains-4.8.1.tar.bz2 \n$ sha512sum proxychains-4.8.1.tar.bz2 \n6e1673b331722ea5f6282a055d9552e387a2d68cc5e0c3fbb310ebbf58d47f1c9de46f11bbe5977b328d7a0abf1a5f77c544ccea799cb047da5c8521ee7ec949  proxychains-4.8.1.tar.bz2\n. thanks for the report, i committed a version that needs a bit less code to achieve the same thing - at least it should. please let me know if it works for you.\n. sounds like you have a mismatch between 32bit and 64bit code.\nmaybe you used a 64bit compiler on 32bit linux ?\npls paste output of file /test/lib/libproxychains4.so and uname -a\n. btw if you just want to test it you dont need to pass anything special to configure\njust ./configure && make and then you can run it from the current dir\n./proxychains4 -f src/proxychains.conf\niirc this usage is also described in the README.\n. the above looks correct, however there's some mismatch/broken configuration on your system. btw i did ask for the file output of libproxychains.so, not that of the binary.\nmaybe your ld-linux.so is 32 bit ? (that's the dynlinker used by glibc).\nsee http://stackoverflow.com/questions/216000/gcc-error-wrong-elf-class-elfclass64\neither way this is not a proxychains bug but a misconfigured linux system, so i am closing this.\nyou can visit the irc channel mentioned in the README so i can help you troubleshooting interactively.\n. the license file was already updated - see latest commit.\nyour commit only has whitespace changes.\nthe CFLAGS thing is wrong as the affected lines are linker commands.\n. this is a non-issue.\nthe warning makes sense for libraries, but proxychains is no library, even though it requires a shared object which is typically used for libraries.\nif the package builder considers this warning an issue rather than a nuisance, he should take appropriate measures to silence that warning.\n. supposedly fixed by the latest fixes related to the close() hook.\n. yes, README is the only documentation for compilation/installation.\nproxychains.conf is also documenting the different options, but that's it.\nif you need further info, you have to read the source or talk to people :)\n. you can use portredir program to tunnel a port from localhost to your db server\nthen use localnet rules for 127.* (uncomment existing config template)\ntrue_connect is the unhooked libc connect() function\n. https://github.com/rofl0r/portredir/\n. thanks for your report.\nwhen looking at the output you attached, it seems that only the \"/etc/hosts\" name resolution is broken when proxy_dns is turned off.\ndid you also try if it works with hostnames not in /etc/hosts ? google.com oslt.\n. should be fixed, please test latest git\n. well if your proxy doesnt support DNS lookup, you need to turn off remote_dns.\n. try using an absolute path instead of \"./\".\nit seems the application you're starting somehow manipulates the current active directory.\n. try opening a shell, enter:\nexport LD_PRELOAD=/path/to/libproxychains4.so\nchromium-browser --user-data-dir=/tmp/chromium\n. anyone tried what i said above ?\n. we need to figure out what chromium does that is incompatible with proxychains.\na start would be if someone that has it installed can paste the output of \"strace -f chromium\" (while connecting to a single random site and then closing the browser - dont do it with several tabs open as that will heavily bloat strace's output)\n. thanks for the strace output.\nnow we know that chromium uses a perl wrapper that searches for plugins and then starts the real binary:\nexecve(\"/usr/lib/chromium/chromium\", [\"/usr/lib/chromium/chromium\", \"--ppapi-flash-path=/usr/lib/Pepp\"..., \"--ppapi-flash-version=20.0.0.195\"], [/* 43 vars */]) = 0\nadditionally we see that pulseaudio is used which does its own (eventually incompatible?) dlsym() tricks\nopen(\"/usr/lib/pulseaudio/libjson-c.so.2\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\nopen(\"/usr/lib/libjson-c.so.2\", O_RDONLY|O_CLOEXEC) = 11\nif the problem is due to one of the above findings, it may help to try to\n1) start chromium directly without the perl wrapper\n2) disable pulseaudio (or recompile chromium without pulseaudio support, if feasible)\n. to find out for sure we need a voluntary who can test chromium with \n- pulseaudio globally deactivated\n- chromium launched directly without perl wrapper\nand someone who can build chromium without support for pulseaudio,\nand/or somebody who knows/reads chromium code to find out if its doing something weird\nlike doing the connect syscall directly or using raw sockets etc\n. i fixed a related problem a few days ago. you may wanna check out latest git and report if the problem still exists.\n. well, then i suppose someone should attach his debugger and find out why.\ni won't be that someone because chromium sources are > 2GB and compiling it from source takes hours.. proxychains needs no dev package as it does not provide any headers or libraries that are usable for development. the .so file is used solely by the preloader.\n. see the error message:\nerror: invalid item in proxylist section: localnet 127.0.0.0/255.0.0.0\nyou put the localnet stuff in the wrong place\nit needs to be on the top of your config\n. it shouldn't, since execvp (used by main.c to start the target process) passes the old environ on.\nas a quick test, do proxychains4 bash -c export\n. @nodje yes you can compile for both archs\nmake clean ; ./configure --fat-binary ; make\npossible that it solves your problem\n. this patch is bogus. to support openbsd we need to detect it properly at configure time and define AI_V4MAPPED to 0 and change the ifdef IS_MAC at line 788 of core.c to if defined IS_MAC || defined IS_OPENBSD\ncan you paste the output of uname -s ?\n. how old is openbsd release 5.6 ?\npls test if this patch fixes your issue https://github.com/rofl0r/proxychains-ng/commit/44ca9ca968c2b4c29335df9362b77a7f7f481fe8 ( branch openbsd )\n. check out if commit 7b962a4 fixes the issue (branch openbsd again)\n. @jackyzy823 care to create a pull request with your fix ?\n. @proudzhu how weird. are you using the latest commit? and please paste output of the make invocation including the error.\n. @proudzhu try to revert e79e05a228558e95ee2d3e7cfffd9bbe1e4a368e as well. does that work ? this commit seems to be the original cause of the regression\n. rather than putting more ducttape (#65) on the broken linker command line,\ni reverted the original commit that introduced the breakage by shuffling the ld arguments around, and the following fixup by @jackyzy823, and introduced a clean way to deal with user-supplied LDFLAGS. please check if that fixes your issues.\n. pretty sure that the cause is this: https://github.com/rofl0r/proxychains-ng/issues/10#issuecomment-12632041 : glibc's dynlinker does not preserve preloaded DSOs for dlopen'ed modules (that's imo a bug)\n. it's a limitation/bug of glibc dynlinker - to circumvent it use a linux distribution based on musl libc such as alpine linux or void linux or file a bug report for glibc and hope that it gets fixed...\n. did it work earlier when we fixed the build?\n. unfortunately your backtrace is worthless without symbol names. see if you can provide a better backtrace with full debug info activated (proxychains is by default built with debug info so i'm unclear why yours is missing)\n. this seems to be due to a bug in openbsd's dynlinker.\nseems we need to wait for a openbsd crack who knows how to get libc + dynlinker with debug symbols to track down the issue (due to lack of a pre-installed openbsd developer image for usage in qemu i went through the installer process, which left me with a semi-unusable system with a 1970's userland - no git, no wget, no curl, etc which took me about 2 hrs of investigation, manual download of tools (with \"ftp\") just to reproduce the issue, but nowhere near getting a proper backtrace)\n. try if modifying Makefile to\ndiff\n $(LDSO_PATHNAME): $(LOBJS)\n- $(CC) -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS)\n+ $(CC) $(CFLAGS) -lsocket -lnsl -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS)\nfixes it (addition of -lsocket -lnsl )\ntaken from https://github.com/vonnyfly/proxychains-ng/commit/1b9a5199e435967b4bada1a6f3b059e62e595c15\n. nope, those libraries are apparently not existing on OpenBSD\n. duplicate of https://github.com/rofl0r/proxychains-ng/issues/25\n. everything works as intended by passing -q to proxychains4 executable.\n. Thanks for the information. It is a feature of proxychains-ng to allow the user to preload  the DSO from the current directory. I understand though that with more and more mainstream distros adopting proxychains-ng it is probably better to ship with more \"defensive\" default settings. I'm currently thinking about the best way to achieve that, probably with a compile-time switch.\n. i can try to fix the build if you give me the output of uname -s\n. possible fix from https://github.com/vonnyfly/proxychains-ng/commit/1b9a5199e435967b4bada1a6f3b059e62e595c15\n``` diff\nsrc/core.c\n- if(service) getservbyname_r(service, NULL, &se_buf, buf, sizeof(buf), &se);\n+ if(service) getservbyname_r(service, NULL, se, buf, sizeof(buf));\nMakefile\n- $(CC) -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS)\n+ $(CC) $(CFLAGS) -lsocket -lnsl -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS)\n```\n. suggestion: create a script wrapper that generates a conf file with a unique name in /tmp for one-time usage, converting your command line parameters into an appropriate config file (and then starts proxychains with and -f paramater pointing to that file)\n. thanks for the report. do you have a python 2 compatible testscript as well ? i didnt port python3 yet to my custom linux distro.\n. this gives me \n[proxychains] Strict chain  ...  127.0.0.1:9050  ...  timeout\nException in thread Thread-150:\nTraceback (most recent call last):\n  File \"/lib/python2.7/threading.py\", line 810, in __bootstrap_inner\n    self.run()\n  File \"/tmp/pxtest.py\", line 20, in run\n    except ConnectionRefusedError:\nNameError: global name 'ConnectionRefusedError' is not defined\n. if you have the time to turn this into a proper C program, that would be preferable for debugging purposes.\n. thanks, but your test program crashes for me because getaddrinfo() returns error (-2 Name does not resolve) and as such the pointer res is not set to anything meaningful and contains whatever random bits it was initialized with... you need to check the return codes, but then the connect() never happens due to lack of a proper arguments to the connect call...\n``` c\nvoid conn(void user_data) {\n        int sock;\n        struct addrinfo hints, *res;\n        char buf[1024];\n        memset(&hints, 0, sizeof hints);\n        hints.ai_family = AF_INET;\n        hints.ai_socktype = SOCK_STREAM;\n        sprintf(buf, \"%d.example.noresolv\", (int)(intptr_t)user_data);\n        int r;\n        if(0==(r=getaddrinfo(buf, \"http\", &hints, &res))) {\n                sock = socket(res->ai_family, res->ai_socktype, res->ai_protocol);\n                connect(sock, res->ai_addr, res->ai_addrlen);\n                close(sock);\n        } else { dprintf(2, \"%d %s\\n\", r, gai_strerror(r)); }\n        return NULL;\n}\n. nice, i can finally reproduce the segfault. no need to send an improved testprogram.\n. yeah i came to the same conclusion. why dumpstring? because the initial design of the allocatorthread used shared memory, and it's \"alloc-only\" i.e. without ever freeing the strings\nfurther study of the dumpstring code suggests a design goal was to prevent memory fragmentation by putting the strings/structures in entire pages\n. @ravomavain does that fix the issue for you ?\n. yes. you can `make install DESTDIR=foo` and then you see exactly which files are being installed by looking into foo.\ni'm not going to add code that deletes files from user's boxes - they can and will shoot themselves in the foot.\n. are you sure your proxy works ?\nalso it seems that you specified your proxy twice in the config, which won't work\n. you have a link to haad's repo which is a different version. are you using haad or this one ?\nalso please `export LC_ALL=C` before doing anything that gives localized error messages (i don't speak french)\nas to your error it seems cygwin uses non-posix conforming headers and since RTLD_NEXT is not declared it probably means that cygwin does not implement the functionality needed  to hook function calls and as such the cygwin platform cannot be supported.\n. someone needs to try to find out\n. not sure why this is happening. maybe torbrowser ships its own copy of libc.so/libstdc++.so ?\nif so proxychains would need to be patched (with patchelf) to change the interpreter name to the copy of ld-linux.so in the torbrowser dir\n. proxychains-ng supports user-supplied CFLAGS and CC parameters in the traditional way (i.e. passed to configure).\nso someone that wants to use a x86 32bit toolchain can pass that to CC or use -m32 in his CFLAGS if his compiler supports multilib.\n. iirc there's at least one system (i can't remember if it was OS X or GNU/linux) where the dynlinker rejects LD_PRELOAD with relative paths, so it's done the way it works everywhere.\nyou can test it however by just exporting the LD_PRELOAD variable and running your app directly (without using the proxychains4 launcher, which really does just that).\n. which mechanism do you use to map some.local.host to 192.168.100.10 ?\n. i understand your problem, but not which name mapping mechanism you're using. is the name mapping done via an internal DNS server or a hosts file ?\n. @GrantStreetGroup ping\n. since remote_dns does the DNS lookup on the proxy, this can only work if the proxy is configured to use your companies' DNS server.\n. well if you have an idea how this could work as you expect, let me know.\n. proxychains 3.1 is not supported anymore- use the latest release ( http://sourceforge.net/projects/proxychains-ng/files ) or the current git version from this repo\n. it shouldn't. which error do you experience and which version of proxychains-ng are you using ?\n. which error ?\n. why does your proxychains not print version information ? (it should)\n. if that is so, someone needs to research which changes were introduced in 10.11 that breaks LD_PRELOAD and how to fix it.\n. possibly it's the guilt of this new \"feature\": https://en.wikipedia.org/wiki/System_Integrity_Protection\n. you could try to disable the system integrity protection (as described in the wikipedia article) temporarily to see if it makes proxychains work. if so, we can try to seek a permanent workaround.\n. @cache0928 it seems your toolchain is not properly set up, so it cannot find your system headers. i suspect you need to install \"XCode\" and configure homebrew to use it.\n. @Willian-Zhang thanks for testing. now we can look if there's a way to disable the LD_PRELOAD \"protection\" \"feature\" for handpicked applications, in our case proxychains-ng.\n. i haven't found any documentation about the LD_PRELOAD specific protection so far. we need to wait until more information is available (probably after the official release).\n. works for me on linux with wget. maybe mac's rand() is broken ?\nyou could try if you experience the issue with other programs (such as wget).\n. yeah that code looks suspicious (hideously complex).\n@asconix can you try if the change suggested by @ravomavain fixes the issue.\n. @asconix ping\n. can anyone using a mac show up and test if random chain is broken and if @ravomavain 's change fixes it?\n@ravomavain if you prepare a PR (and test it a bit) i'll probably merge it\n. @jaytaylor thanks for testing. however what i would like to know is not only if the fix works but also if random chain is really broken on mac (without the fix).\n. (for testing you could probably use 127.0.0.1, 127.0.0.2, etc)\n. @jaytaylor did you find some time to test if the random chain feature is broken without your patch ?\n. sorry, but since parsing of PAC files requires a javascript interpreter, this is way off the scope what proxychains wants to achieve. however i'm sure there are tools out there that parse the file so you can make them dump the proxy url and then use it in proxychains config.\n. this program here seems to do the job: https://github.com/pacparser/pacparser\n. interesting that you have several \"DLL init: proxychains-ng 4.10-git-10-g2237749\" lines printed.\nis that also the case with wget/curl ?\nit seems the error you're getting is because maven is translating the ipv4 address proxychains hands out (224.0.0.1) to an ipv6 address (::ffff:224.0.0.1:443) and proxychains fails to detect that its one of its internal addresses (which are used for remote DNS mappings)\n. @MatzFan please elaborate on \"linked dupes\". is there a possibility to use e.g. ssh with a softlink or a hardlink ?\n. @kakashisan how about trying the things recommended here ?\nand what is the error you get from scp ?. oh so the problem is that scp starts ssh from /usr/bin. maybe you can fix that by overriding PATH pointing to where your copy of the ssh binary is, for example:\nPATH=/Users/didisan/ proxychains4 /Users/didisan/scp -vvv didi@host:.bashrc new.file\n``\nthis assumes that \"ssh\" as well as \"scp\" are in /Users/didisan.. since a release with the ipv6 support is now out there and in use, reports will come automatically, i guess.\n. maybe you should report this issue in homebrew repo\nyour toolchains is not setup correctly, as it cannot find standard headers.\nas a temporary workaround you could try to search the location of stdio.h on your system and then add CPPFLAGS=-I/path/to/stdio_h to the configure invocation\nbut its likely that your homebrew doesnt work at all so you should fix your install.\n. maybe try \"gmake\" rather than \"make\"\napart from this i dunno, i guess there's a reason the text says \"Warning: You are using OS X 10.11. We do not provide support for this pre-release version.\"\n. you need to talk to the homebrew guys, really.\nthis is not a help forum about getting your mac os toolchain set up.\n. hi, it's the other way round: Armitage crashes random with Proxychaing 4.10.\nplease provide more information:\nconsole output of proxychains & armitage (w/ sensible information removed), and a backtrace of the crashgdb --args proxychains4 armitage armitage-options`\ntype \"run\" and when the crash happens \"bt\" and paste the output here.\ni suspect it's a bug in armitage so the developers of that program may be interested in your report as well.\n. if they provide a way to customize the \"launch metasploit\" command used, you could prefix it with proxychains and avoid that the heavy java framework gets LD_PRELOADED with proxychains.\n. remove the line \"quiet_mode\" from your config and try again\nsee also this: https://github.com/rofl0r/proxychains-ng/issues/78\n. openbsd support is currently non-functional due to some dynlinker issue that's impossible to debug (for me, as i'm lacking an openbsd developer qemu image with all the debug info, sources, necessary devel tools etc). if you feel that you may get it to work, you can start with the 4.10 release which compiles on openbsd (just check out the release tag or download the release tarball). if you have success, we can merge your changes into master and fix the incompabilities in the new ipv6 code.\n. if you can put that code into the right ifdefs for openbsd i'd happily merge the fix in form of a pull request.\nsomething like\n``` c\nif !defined(s6_addr16 ) && defined(OPENBSD_MAGIC_MACRO)\ndefine s6_addr16 __u6_addr.__u6_addr16\ndefine s6_addr32 __u6_addr.__u6_addr32\nendif\n```\nthe change would need to go into src/libproxychains.c after the inclusion of common.h since common.h doesnt include netinet/in.h which is necessary for the definition check\n. @cam13 could you test if this patch (applied to master without your patch) fixes the issue for you ? http://sprunge.us/RhUe\n(need to re-run configure)\n. yes, this is due to https://github.com/rofl0r/proxychains-ng/issues/78\n. @vonnyfly could you test if this patch (applied to master without your patch) fixes the issue for you ? http://sprunge.us/RhUe\n(need to re-run configure)\n. your proxy seems to be a local application. maybe it's misconfigured ?\n. oh btw you should put remote_dns_subnet 224 in your config and remove the 2 entries you have there\nthey overlap with your localnet and with the address of your proxy so thats a seriously wrong setup.\n. in that case it's your proxy thats misconfigured...\n. which option of proxychains would need completion in your opinion ?\n. patches welcome\n. when you use remote_dns, the dns name will be translated to an ip in the remote dns subnet.\nuse ip addresses rather than dns names and it will work as expected.\n. can you check if the older releases of proxychains-ng ( https://github.com/rofl0r/proxychains-ng/releases ) also exhibit this behaviour ?\n. i think as-is, this patch would create more problems than it solves, since this way we're basically sending an incorrect/hackish http 1.0 header.\na cleaner solution would be if we add a new proxytype in the config file ( http11)\n(and possibly http10 as an alias for http)\nand if it's used send a HTTP/1.1 header with hosts line, if not HTTP/1.0 without it.\n. i guess i'll do a release first with the new ipv6 support and then merge the patch as-is or like i proposed. that way users of the git version can test if the change causes breakage.\n. merged at last... it remains to be seen if we should bump the HTTP version to 1.1 as well.\n. thanks for the report. can you check if the debug mode works now as expected ?\n. thanks for your research.\nthe problem is that openbsd's fclose() calls proxychains close() function rather than the libc one (this happens before the hook gets installed).\nthis behaviour is strange since it breaks dlsym(RTLD_NEXT)-style LD_PRELOAD usage.\ni guess this should be reported to the openBSD developers working on the dynamic linker.\nmeanwhile can you test if this patch against master fixes the issue ?\nhttp://sprunge.us/hDCL\n. btw i was informed that it is a bug that openbsd's fclose() calls close().\nclose is not defined by ISO C; it's in the application namespace.\nint close(int x) { puts(\"xxx\"); } int main(void) { fclose(stdout); }\nthis is a conforming C program that has no output (close is dead code).\non openBSD it probably blows up. if you're subscribed to the openbsd mailing list it may make sense to report this.\n. hi @shaxo . could you test if current git master (without the previous patch) works (at least with wget, curl oslt) on openbsd ?\n. can you add some debug code to pc_getnameinfo to see which branches are taken etc ?\n. c\n        if(!proxychains_resolver) {\n                return true_getnameinfo(sa, salen, host, hostlen, serv, servlen, flags);\n        } else {\n                if(salen < sizeof(struct sockaddr_in) || SOCKFAMILY(*sa) != AF_INET)\n                        return EAI_FAMILY;\n                if(hostlen) {\n                        pc_stringfromipv4((unsigned char*) &(SOCKADDR_2(*sa)), ip_buf);\n                        if(snprintf(host, hostlen, \"%s\", ip_buf) >= hostlen)\n                                return EAI_OVERFLOW;\n                }\n                if(servlen) {\n                        if(snprintf(serv, servlen, \"%d\", ntohs(SOCKPORT(*sa))) >= servlen)\n                                return EAI_OVERFLOW;\n                }\n        }\nwhich branch does it take ? the if(hostlen) one ? if so we'd need to know the value of hostlen\n. also check if SOCKFAMILY(*sa) == AF_INET or AF_INET6\nc\nPDEBUG(\"SOCKFAMILY(*sa) == AF_INET: %d\\n\", SOCKFAMILY(*sa) == AF_INET);\nPDEBUG(\"SOCKFAMILY(*sa) == AF_INET6: %d\\n\", SOCKFAMILY(*sa) == AF_INET6);\n. would be helpful if openssh's ssh_connect_direct() would print gai_strerror(ret) rather than just reporting unspecified failure.\n. i've pushed new getnameinfo code, maybe it fixes the issue; although it looks very weird that salen is 0, possibly there's some memory corruption going on.\nalso note that this time the function get_hostfile_hostname_ipaddr fails, while earlier it was ssh_connect_direct\n. from sshconnect.c:\nswitch (hostaddr == NULL ? -1 : hostaddr->sa_family) {\n        case -1:\n                addrlen = 0;\n                break;\nsomething called get_hostfile_hostname_ipaddr with hostaddr == NULL, likely the code that checks if the ssh key is in known_hosts (check_host_key())\n. i can't help you with this since i dont own a mac, and this is an issue with homebrew (error in their recipe or your setup), so please ask there.\n. see #99\n. no, it shouldnt. proxychains-ng is used commonly with commandline applications and would make their output unparsable.\n. we need more details... please paste your entire config, info about your OS, proxychains version etc...\nthis [proxychains] Random chain ... 127.0.0.1:9050 ... 192.168.57.101:25000 <--denied\ncannot work since tor exit nodes dont know how to connect to 192.168.xxx.xxx\nhowever, if localnet is set correctly this shouldnt happen.\nwhat happens if you connect to 192.168.xxx.xxx on another port ?\n. try to comment out the localnet 127 stuff. iirc only one localnet is supported (may be wrong though).\n. i tested your scenario: here i can connect fine to port 25000 of a host in localnet.\nthe only difference in my config file is that i didn't omit [ProxyList] before specifying my proxy.\nappears to be an issue of the software you're using. did you test if connecting to :25000 without proxychains works ?\n. yes, that's by design: proxychains isn't a shell plugin.\nbut you can easily add a new alias that does what you want, i.e. pbubo=proxychains4 brew update && proxychains4 brew outdated'\n. @vikerian i believe you are mistaken.\nit seems steam is a 32 bit app so @alexgv99 needs a 32bit proxychains\nhint: make clean ; CC=\"gcc -m32\" ./configure ; make\n. @alexgv99 another thing: port 3128 is the default port of squid, so it's probably a HTTP proxy, not a socks one.\n. so yes, the problem is due to usage of 32 bit binaries and 64 bit proxychains.\n. are you aware of the fact that proxychains is TCP only ?\nUDP,IDCMP,raw packets etc are not supported. simple syn-scans and other TCP based scans should work, though.\n. which nmap version ?\ndoes it work if you specify the network interface to use, for example\n./proxychains4 -f /tmp/proxychains.conf nmap -Ss 192.168.1.10 -e eth0\n. yeah, nmap has some stupid (superfluous) code in it that tries to determine which network interface to use to send out packets, even if the user uses tcp options, so it could just unconditionally connect() and leave the decision to the OS.\nplease file a bug against nmap.\nin the meantime there exist 3 options to workaround it on the proxychains side:\n1) do not use a dns name, but a raw ipv4 address\n2) or disable proxy_dns in the config\n3) or do not use proxychains at all but nmap's integrated options to use a SOCKS proxy.\n. to get this fixed, we need to make nmap developers aware of the problem and get them involved. then we may be able to find a mutual solution. so someone needs to stand up and get in touch with them (maybe with a link to this thread).. good find. merged via https://github.com/rofl0r/proxychains-ng/commit/f85cecdabea90db31dc2891c404ccee4bc655354\n. maybe recompile your toolchain (gcc,binutils) with --enable-init-fini-array\n. you could try to patch out the gcc constructor code used to initialize the lib and rely on the lazy initialization to work (hint: grep for \"constructor\" and change the #ifdef __GNUC__ ... to #if 0)\n. did you run configure ? it has a check for this. please paste configure's output, thanks\n. thanks. can you paste the contents of config.mak after the configure run ?\n. so it works with gmake ? that's the only supported configuration.\n. try to run configure with --fat-binary i.e. ./configure --fat-binary ...\nyou may have to change that in the homebrew recipe.\n. it's normal behaviour that google has google's ip.\nhowever whatsmyip should print the ip of the proxy. it probably works if you run the firefox binary directly i.e. proxychains4 /Applications/Firefox.app/name_of_binary_here or if you just change the proxy settings directly in firefox (i.e. without using proxychains).\n. @XasaKura your PS output above seems to miss the output of make (compiler invocations etc). did you leave that away intentionally ?\n. well, in that case it is weird. maybe pastebin the entire output of running the brew install command to give us more clues what went wrong. i'm reopening this until we can rule out that there's something wrong on our side.\n. please report homebrew issues to the homebrew issue tracker, thanks!. running configure will overwrite config.mak, so it was probably the other way round.\nalso you can pass bindir and libdir as parameters to configure, so you dont have to edit at all:\n./configure --prefix=/usr/local --bindir=/usr/local/bin --libdir=/usr/local/lib --fat-binary\n. > The above steps did not work for me on OS X 10.12.5..\nthat's pretty vague. post more details, including brew output and error messages you get when using it. someone using mac may be able to figure out what's wrong, @geekwutom . @zhilevan i can't see anything wrong in the output you posted. 1) see which files proxychains installed by doing\nmake clean ; ./configure ; make && make DESTDIR=foo install ; find foo -type f\n2) delete them in your real prefix\n. likely a bug of alpine. since proxychains is by default built with debug info it should be sufficient to rebuild alpine with debug info and then debug it as you did in your first paste, however when lldb stops for exec you need to continue and wait for the segv.\n. looks like a double-free bug in the app\nmaybe try the same version you used on linux or report the bug to the devs.\nit's almost certain the bug happens without proxychains as well\n. you may try with current git; a problem was fixed that may be the cause of this.\n. use host my.cdn.proxy.provider.com or ping to get ip address, then use IP.\n. host is a command available on most unix'es, which resolves the ip address of the DNS name you pass.\nso you literally type that command into the shell.. unless you're using the 10.x.x.x subnet for your lan, you can try if setting remote_dns_subnet to 10 fixes it.\n. yes, remote_dns_subnet 10 only works when you're not using it already\n. you may use one of these blocks: https://en.wikipedia.org/wiki/List_of_assigned_/8_IPv4_address_blocks\nif you set remote_dns_subnet to 3, it could work, but you won't be able to connect to any servers belonging to \"General Electric Company\"\n. and does it work ?\n. well i guess it would be sufficient to change the ip address range that you use for your LAN to 192.168.x.x or 172.16.x.x and then use 10 for the localnet.\ni don't know what the exact problem is, it may be due to the fact that docker is written in Go which afaik supports only static linking.\n. ping uses icmp and raw sockets, both not supported by proxychains...\nit's also unlikely that your go program will ever work, since apparently go does not use libc, but does all syscalls directly.\n. what program are you trying to use @XadillaX ?\n. no, only outgoing connections can be redirected to a proxy.\n. try to use the full path to nvm binary\nexample\nproxychains4 /bin/nvm ls-remote\nsince you're using an apple its likely in another location though\nmaybe which nvm tells you the full path\n. and successive proxychains4 emacsclient ?\n. instead of  $ emacsclient file2.txt try $ proxychains4 emacsclient file2.txt\n. yes and no:\nyes, if you use an IP address to target your victim, the icmp/udp stuff will go out directly.\nno, if you use a DNS name and have remote_dns turned on, proxychains will make an internal mapping from a unroutable ip address to the target, however only tcp will be forwarded to there.\nfor more details  do some tests with your network traffic sniffer (wireshark for example).\n. pls paste the output of strace -f proxychains4 curl https://www.twitter.com/\n. oh and also try as non-root, i believe glibc has some security mechanisms in place when you use LD_PRELOAD as root or on suid binaries.\n. closing because of lack of feedback\n. does that also happen when you disable proxy_dns ?\n. would be helpful to see a backtrace of the \"hanging\"\n(attach to running process with gdb, hit ctrl-c and print a backtrace with 'bt' command)\n. thanks, this is exactly what was needed.\nplease report if the fix i committed does indeed resolve the issue.\n. if you can try another time...\n. nice, thanks for testing and the backtraces\n. programs written in GO are not compatible with proxychains since they do not use the system's libc, whose functions we hook.\n. please explain in detail which files you did md5sum on.\n. in case you compiled both git and tarball release with the same compiler and CFLAGS, that would indeed be strange. but in your case i strongly suspect PEBKAC, since you're not even capable of building a whole sentence.\n. just to make sure: can you try with latest git ? there was an issue fixed, and maybe it's related.\n. with \"latest git\", i refer to checking out the latest version of this repo\n. sorry, but without details i'm not gonna merge any build system changes.\nif you see the commit history of the makefile, anyone and his dog are very smart to fix the build for their system, but then broke it for others.\nso if you have a problem with the current Makefile, provide the necessary details for an analysis. that would mean the exact CFLAGS etc that you are using, compiler/OS versions etc and the exact error you're getting. i merged your second commit in the meantime.\n. @e7appew : i cannot see any attachments here\n. ah it's due to -pie, which tells the linker to create a pie binary\napparently since it comes later in the commandline, it takes precedence over -shared\nwhich makes me think that its probably a bad idea to apply USER_LDFLAGS to the linking of the dso. did you test if the dso produced with your patch actually works ?\n. can you run the command with strace ?\nstrace -f proxychains4 mycommand and then paste the output to a pastebin\n. probably due to #78\n. @Stupidism this issue here is about OS X so please post to the appropriate issue or open a new one. anyway according to your strace output here\nexecve(\"/usr/local/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/local/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/games/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/local/games/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nyou dont have a binary called \"nvm\" in your $PATH (environment variable) so i dont see how you can expect to start it when you type \"nvm\".. check the documentation if there's a way to run the server process manually, and then try to run it with proxychains.\n. there are several ways to start a child process (the exec* family of functions, see man 3p exec) and some of them allow you to start a process with a clean environment.\nin such a case the LD_PRELOAD variable will not be preserved, and the child process started without proxychains.\n. could you provide a backtrace of the crash ?\ngdb --args proxychains4 nmap ....options...\nthen type r and wait for the crash, then type bt and paste the output.\n. looks like a bug in nmap to me.\ncan you also paste a bt of the segfault (without dynamic chain)?\n. turn off proxy_dns or use 127.0.0.1 as your app server address instead of localhost.\nsince localhost is a name, not an ip, the localnet detection does not catch it, so the connection to the proxy is made which does the lookup of localhost and then tries to connect port 4343 on its own loopback interface.\n. what hinders you from compiling it under openwrt?\n. > the code run well on other system . \ndoes it run well on other system also if used with proxychains4 ?\n. i heard something about windows 10 being able to run native linux binaries, so it possibly works (but only when used with other native linux apps).\n. can't see anything wrong in the code. pls supply more detailed valgrind output, and further which OS, compiler, and proxychains version used.\n. c\n181: int ret = write(*destfd[dir], hdr, sizeof *hdr) == sizeof *hdr;\nhdr comes from\nc\n244:       struct at_msghdr msg = {.msgtype = ATM_GETIP, .datalen = len + 1 };     \n245:        if(sendmessage(ATD_SERVER, &msg, host) &&\nas you can see, the struct is initialized via C99 compound initializer.\n. btw your paste has this in it:\n==19222== Mismatched free() / delete / delete []\n==19222==    at 0x4C2C8FF: operator delete(void*) (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)\n==19222==    by 0x117304: CatchChallenger::EpollServerLoginSlave::tryListen() (EpollServerLoginSlave.cpp:258)\nthat happens before the uninitialized access in proxychains reported.\nthis means that the app you're running causes undefined behaviour, so anything can happen. fix your program first and then see if valgrind still complains.\nit probably doesn't when proxychains is used with a correct program.\n. does this happen only with the target application npm ?\na possible cause could be that npm does unset all environment variables it doesnt know.\nin our case we need PROXYCHAINS_QUIET_MODE to be set to 1.\n. i'm a bit irritated about the number of\n[proxychains] DLL init: proxychains-ng 4.11 lines you get. this code should only be executed once (the whole init stuff).\ncan you attach a debugger and see why its called more than once ?\nor add -DDEBUG to your CFLAGS when building so we can see from where it's called.\n. very interesting/confusing.\n- the gcc_init() code is called multiple times, even from the same PID\n- that means pthread_once() in OSX doesn't work, or at least not in the case of preloading or when called from ldso constructor.\n- any variables set during the constructor call are \"lost\".\n  this looks like the dynlinker would spawn a lot of forks before running the constructor code, so every process has its own view of the memory. however that cannot be the case since the first couple calls to the init function seem to come from the same pid.\nsince the gcc constructor code seems broken for OSX, you could try to change this line in libproxychains.c from\n``` c\nif GNUC > 2\n```\nto\n``` c\nif 0\n``\n. would be more interesting with debug output...\n. note that i mistakenly closed this issue (but reopened it at once); i didn't intend to discourage you from further investigation.\n. sorry, but i don't get your point. could you elaborate on what you think is interesting ?. are you sure what ubuntu ships is actually proxychains-ng (this repo) or the old, old v3.1 version ?\nusually when the distributor did no custom changes, proxychains-ng can be started viaproxychains4`.\n. does it work now ?\n. can anyone else here who has ubuntu 14.04 (or any other ubuntu) show up & report if this command works for him ?\nproxychains4 wget https://downloads.gradle.org/distributions/gradle-2.14.1-all.zip\n. tell the brew package maintainers to add --fat-binary when they call configure.\n. sorry - we can not help you here with brew problems. please open an issue on the homebrew issue tracker, thanks.\n. the syntax for specifying a config file is -f, not -c\nso what happens to you is that proxychains thinks it should call a command -f which does not exist.\n. @ucoker : try which curl and then pass the full path to curl to proxychains4.\nwould also be interesting to get the output of proxychains4 bash -c export.\n. @ucoker: that is an ancient proxychains version (since debian does still not have proxychains-ng in their repos, i guess), but when it works for you, fine.\ni would however still be interested in why it didnt work, so if you could follow the steps i outlined above and provide the requested feedback, it could be helpful for us.\n. sweet. thanks for info.\n. no, that's currently not possible.\ntypically, in such a use case, one would start different proxychains processes with temporary, generated config files from a master process.\n. uhm. how did you build proxychains-ng ? it has a configure check so we don't have to hardcode a list of currently broken systems into the code.\ngenerally if you need to #ifdef __SOME_SYSTEM you're doing something wrong: you're assuming SOME_SYSTEM will never change. therefore you should check whether the system you build on uses s6_addr32 or __u6_addr.__u6_addr32 - exactly what we already do.\n. what's the output of configure ?\n. aha, so the bug is that OSX (which version?)'s mktemp misbehaves.\n. it should add '-Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' to your CFLAGS in config.mak\ncan you paste your config.mak ?\n. just to make sure: did you have exported CPPFLAGS on your system ?\nyou can run echo $CPPFLAGS in your shell to find out.\n. so yeah, in that case the problem was because your CPPFLAGS were overriding the ones set by the build system. this is intentional because we want to mimick autoconf behaviour as nearly as possible. in this case though the s6_addr32 macro is essential to compilation so it doesn't make sense to make it overridable. i'll think about it some more to find a clean fix. I disagree with the removal of config.mak: it is against the users expectation (at least if he's used to autoconf) that make clean will remove his configuration and he will have to re-run configure!\n. hello @jaytaylor , could you test my commit in the branch OUR_CPPFLAGS and report if that closes this issue ? thanks!\n. @jaytaylor thanks for testing!\nas for merging this PR: aren't we done yet ? or have i overlooked something essential apart from your personal vim config ?\n. well if you care enough, please make another clean PR on top of current master, so we can keep the commit history straight.\ncheers!\n. thanks for your PR. in order to keep the commit messages readable i would like you to reformat your commit message in such a way as:\n- all lines < 80 chars because we want them readable in a terminal\n- first line should be a short explanation of what the commit does\n- other lines can give detailed info\n- referal to PR or issue numbers\nso a good commit message would look like\n```\nfix random_chain on mac\non mac, random chain was broken and returned always the last\nproxy from the config file.\nuse fix as suggested by @ravomavain.\ncloses #75\n. merged via 0f6b226\n. yes, that is by design. proxyresolv is no longer _required_ for proxychains-ng itself to work, and because it has external dependencies (dig program), it only ships as a bonus in the tarball - that means the onus to install it is on your side.\n. see https://github.com/rofl0r/proxychains-ng/issues/78\n. (hint: if you would have read README, it would have taken you there as well).\n. please formulate what you want to achieve in words instead of ssh command line options, so people that don't know ssh options by heart can help as well.\n. do you have a proposed fix ? and maybe @crass, the original author of the code has a suggestion ?\n. is it obligatory to use pedantic warnings ? this all seems pretty useless given that proxychains is basically a hack and relies on GCC behaviour anyway.. i cherry-picked the commits that are acceptable ( https://github.com/rofl0r/proxychains-ng/compare/6dcaf53...5ed5089 ) ; if you want you can submit a new PR with the (void) write thing.. paste output of\n`which docker`\n`echo $PATH`. interesting find. do you have an idea why that is so ?. yes, proxychains uses both poll and select internally:\n./src/allocator_thread.c:       while((ret = select(readfd+1, &fds, NULL, NULL, \n./src/core.c:           ret = poll(fds, nfsd, time_remain);\n./src/core.c:           ret = poll_retry(pfd, 1, tcp_connect_time_out);\nbut i don't see yet how that can disturb someone else's use of epoll.. oh, so nginx `*calls*` proxychains-ng ? how did you configure that ?. you're doing something wrong, probably.\nhow do you call configure and make, and do you have CC,CFLAGS,etc exported in your env vars?. the intended way to use it is:\nCC=foo-gcc CFLAGS=-funroll-loops ./configure\nmake\n+ when you export CC etc (and it is set to something different than what you passed to configure), this of course breaks things, just like it would when you use autoconf.. o_0 i'm astonished but you're right (regarding CC, but not the other vars). i'll merge your PR, but with a less hostile commit message.. maybe you need a 32bit ld.so ?\ntry to look into/edit steamcmd.sh and put\nexport LD_PRELOAD=/usr/local/lib/libproxychains4.so\n```\njust prior to where it starts the real steam binary, and do not use the proxychains4 wrapper.\nprobably the shell script is running some native (64bit) tools like awk, sed, etc before it starts (the real) steam.. > it does solve the preload issue but still throws out 407 error\nyour proxychains.conf is correct and working ? can you paste the proxychains output when steam binary is started just with LD_PRELOAD ?. note that you can also use ssh -D 1080 user@serverB to create an encrypted ssh tunnel to server B and spawn a local socks5 proxy listening on port 1080 where you can connect your stuff to via proxychains.. btw, i have an application that's intended to keep an ssh-socks5-tunnel alive by doing continuous connectivity checks, since ssh connections tend to get stuck after a while:\nhttps://github.com/rofl0r/rocksock/blob/master/examples/ssh-socks-restart.c. libproxychains4.so should have a DT_NEEDED entry for libpthread.so \nreadelf -a libproxychains4.so | grep -i NEEDED. since your libproxychains.so has a non-standard name i suspect the author of the gentoo recipe did something unintended.\ntry compiling proxychains by hand with configure and make and see if that works.. no, it's missing libpthread.so. did the gentoo devs fix their broken recipe ?. duplicate of https://github.com/rofl0r/proxychains-ng/issues/153. proxychains is not about http, it is creating generic connections over different types of proxies using one or more proxies.\nyour use case is only for scenario http connection over http proxy.\nalso, since it requires injecting these pseudo-auth headers, proxified app is probably custom program or script, so it should be easy to equip it with http proxy function directly.\nusing headers for such a type of authentication looks like cheap hack though.\nas for implementation of this feature:\ncurrently proxychains creates chain of proxy connections when libc calls connect().\nthis is prior to any data sent from the client, so proxychains cannot know which headers will be in subsequent http request. implementing it would require postponing the connect after first send was executed, which means if connection fails we cannot return proper error code at the right spot. additionally parsing first packet for HTTP stuff can introduce vulns.\nso in light of all this it seems like a bad idea implementing all this just for one really exotic and hackish use case.. yes. during connect(), HTTP CONNECT is sent to target proxy. this happens before hooked process sends data, which will contain HTTP request for destination host.\nsince we agree that implementing it is not feasible i go ahead and close this.. which crapintosh version ?. did you see #78 ?. is it really just a warning ? it may actually render proxychains non-working. i do however not know how to fix at the moment. supposedly they want a signed binary, someone would need to create signed builds for OSX by subscribing to the Apple Developer program. that however\nkinda defeats the purpose of open source.. what does not work? it seem it works with bash. maybe try with wget or curl ?\nalso provide build log, in case you built from source, if not, tell where you got proxychains from.. the answer you got there is accurate. there are however valid reasons why one would want to use proxychains with firefox: it's easier to just prefix the firefox command with proxychains when you want to run it with tor, and leave it away when you dont want to.\nhowever a separate profile might be the better tool for the job.\ni don't see how having proxychains' second thread could prevent firefox from using a sandbox, so your best bet is to open an issue in the mozilla bugtracker and explain that there are valid reasons to preload other things than just nvidia dlls.. maybe you need to tweak the timeouts. tor can be slow at times.. how exactly do you cancel data transfers ?. please try out the patch mentioned above this comment ^\nit's available when you pull from git and checkout the branch EINTR.. hi @dmaj. could you please try if the patch fixes the issue ? thanks.. are you aware of the fact that \"google.com\" is not a program ? even if the .com extension suggests so to a DOS veteran...\nyou gotta call proxychains4 some_program google.com where some_program can be one of wget, curl, firefox, lynx .... proxychains 3.1 is no longer supported. try the latest release, proxychains-ng 4.12.. lol. proxychains is certainly not the reason for your network issues, unless you've configured it wrong and exported LD_PRELOAD globally, which i hope you didn't.\nanyway, here's what your asking for:\nrun make install and look for which files got installed, then remove those manually.. we don't use cpu_set_t in proxychains.\nthe error you're getting is because your libc headers are somehow broken.\nprobably this testfile here will cause the error too:\n```\ninclude \nvoid main() {}\ni'd report it on the kali bugtracker.. can you figure out which function it is calling ?\nyou could set breakpoints (with gdb) on the following functions:\nconnect\nsendto\ngethostbyname\ngetaddrinfo\nfreeaddrinfo\ngethostbyaddr\ngetnameinfo\n```\nand then see which one gets hit.. good work tracking down the issue!\nsorry but i dont understand what you mean with:\n\nbut I don't know whether other arrival\nI also want to use it to agent for the DNS\n\ni guess with this you mean you want to do DNS resolution on the proxy (i.e. proxy_dns). to further investigate what's happening, you can add the following line at line number 737:\ndprintf(2, \"%s\\n\", name);\nand tell me what it says (after recompile).. and t2 has an entry in /etc/hosts, right ?. why do you add public internet ranges to localnet to begin with ?. well, seems you are the only one doing that so far.\nanyway, if you need more than 64 localnets, edit this line in core.h and recompile\n```\ndefine     MAX_LOCALNET 64\n. i'm not familiar with mongodb, but it's a good start that you know which versions work and which don't. to find the exact cause of the issue, you could try to `git bisect` on the mongodb git repo to try to find the exact commit that broke it. with that knowledge we can then start looking for a potential bug in proxychains or mongodb.. i don't deny that there may be a bug in proxychains, but your \"it works with X so the bug must be in Y\" logic is flawed. in any case, it would be very helpful to see which change in mongodb causes the bug (whereever it is) to manifest. ~5000 commits may sound a lot, but with `git bisect` you should only need at most 12 tries to find the offending commit (i.e. 12 times recompiling mongodb from source).. good find! you can probably fix your issue by manually using another network implementation.\nhowever it'd be nice to know what the ASIO interface does differently, that causes the bug to surface.. oh, i thought that since it looks like they have \"pluggable\" networking implementations (suggested by example by their usage of the term \"default implementation\") it's possible from the configuration side to select a different impl, without having to change their code.. anyway, maybe it is helpful when you compile proxychains in debug mode (CFLAGS=-DDEBUG ./configure) to see what's going on when the connection times out. looks like the problem is because that ASIO network impl uses sockets in non-blocking mode.\nthe relevant code is in timed_connect() in src/core.c. i can't tell from the top of my head why it doesn't work as it should. do you feel like you could debug it ? you could run the entire command chain in gdb and (gdb --args proxychains4 mongo --foo) and set a breakpoint on timed_connect.. hmm. can you try if commenting out line 184 in core.c makes it work ?diff\n- fcntl(sock, F_SETFL, !O_NONBLOCK);\n+ //fcntl(sock, F_SETFL, !O_NONBLOCK);\n. please try the patch i pushed to branch `nonblock`. oh, i made a mistake.\nthis here\n`fcntl(sock, F_SETFL, flags & (~O_NONBLOCK));`\nshould actually be\n`fcntl(sock, F_SETFL, flags | O_NONBLOCK);`. in case that doesn't work either, i force-pushed a new commit to `nonblock` branch, hopefully that fixes it!. did you test the new patch, or the one-line change from my previous comment ?. it's weird that your previous log has this:\nDEBUG:\npoll ret=1\nsince the new commit doesn't actually call poll anymore with a non-blocking socket.\nare you sure you fetched my latest change from `nonblock` branch ? maybe there was a problem because i overwrote the earlier commit by force-pushing a new one ?. thanks! that means that the socket at this point was blocking, so i looked why and found that we actually create a new socket for the connection and then dup() it over the original one.\ni pushed a patch to branch `nonblock2` (note the **2**).. a curious issue...\ncan you merge nonblock2 and my first patch from nonblock? that one seemed to work for the connect step. https://github.com/rofl0r/proxychains-ng/commit/6d90d82a7b0998db5d29bf563ca6cefc72080dbb (you can still get to the commit via its sha1 hash, even though i overwrote it by force-pushing). i don't have docker (it requires a go compiler), but i'll try to create a test program using nonblocking sockets. if we can't solve it this way, i can look into getting a go compiler bootstrapped... but i'd rather avoid it (i'm using my own custom linux distribution, [sabotage linux](https://github.com/sabotage-linux/sabotage)).. i've been able to reproduce the issue now, however it's not straightforward to fix. the problem is that proxychains creates its own socket to do the connection, than dup2()s it over the original fd, which causes the epoll loop not to get woken up. a possible solution is not to use a new socket, however that will probably cause issues when the app requests an AF_INET (i.e. ipv4) socket, and one or more of the proxies in the chain are ipv6 (AF_INET6 sockets) or vice versa .\nwe could of course differentiate between blocking and nonblocking sockets and treat them differently, but i'm looking for a clean and general solution.. does it help if you change the timeout variables in proxychains.conf ?\nfrom the conf:\nSome timeouts in milliseconds\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nalso, i did use proxychains in the past with ssh and i don't think i experienced such a problem.\nmaybe it's the fault of the proxy ? in such case it may help if you make ssh send pings more often: http://stackoverflow.com/questions/25084288/keep-ssh-session-alive. well, apparently the connection to the proxies fails for some reason.\nas for \"escaping hundreds of ports\": that's normal if you use unreliable proxies.\nif you want to find all open ports reliably in such case your best bet is to do several scans over the entire range and filter out duplicates.. the location of the config file is not dependent on your operating system, it's dependent on how you run configure :)\nthe variables that influence where the conf file goes to are:\n--sysconfdir  - specify exact location of \"/etc\", overriding --prefix\n--prefix - general prefix where /etc/, /lib, etc are sought under.\nso this PR is bogus. if you feel the configure command line options are under-documented, you may open a PR that clarifies its usage.. dunno, maybe compile with CFLAGS=-DDEBUG ./configure and paste debug output. i didnt try; have other things to do. i merged roundrobin code written by @crass to do him a favor; but he since disappeared. i never used it. if you can hunt down the bug or provide debug info which helps me analyzing it, well; we may be able to fix it. if not, you'll have to live with the bug, i guess.. now that i think about it, this behaviour seems logical. shell starts a number of independent processes, and each one starts with a fresh round-robin-state.. i suppose the point is that it's meant to be used for a long-running process, since it cannot work like that with independent processes (unless you start hooking execve too and communicate a global state between all instances, which opens a huge can of worms). yeah. you could put the proxy-selection logic into the bash script itself, and write a different config file for each proxychains invocation.. proxychains uses either the system dns server via libc routines, or when remote_dns is enabled relays the lookup to the proxy server. so i suppose you can just edit /etc/resolv.conf and thats it.. @tangxinfa that is true for proxychains 3.1, but not for proxychains-ng.. please report output from debug mode. you need to recompile passing the following options to configure: `CFLAGS=-DDEBUG ./configure`. looking at that nylas issue, maybe you need to enable the localnet for 127.0.0.x in proxychains.conf (it is already there as a commented out template in the default config).. @yi-ji you are right, but unfortunately i cannot tell you what the issue is, due to lack of apple hardware.\ni suspect it could be related to the issue i tried to fix in f1e5f2ba0153a1d3a9bb3c3dae3925236c58b077 .\nso if you feel adventurous enough you may try to disable the \"close\" hook in libproxychains.c:\ncomment out this line `SETUP_SYM(close);`, this line`while(close_fds_cnt) true_close(close_fds[--close_fds_cnt]);`  and this block:c\nint close(int fd) {\n...\n}\nyou can comment out the block by putting it between `#if 0` and `#endif` statements.\nthat could eventually fix the issue, but then proxychains will not work anymore with programs like ssh that greadily close all open fds on startup (that's why the close hook was introduced). it would however already be helpful to know if that is causing the issue.. that's weird, your commit looks correct. maybe you forgot to install the newly built libproxychains.dylib after you compiled it ?. well, the way proxychains does things is a hack and will always stay a hack (as mentioned on top of the README).\napart from stepping through the code and finding the exact issue you encounter (which would require a mac), the only thing i can think of i could do to help you is introduce a proxychains-3 compat mode which disables 2 things:\n1) close hook\n2) remote-dns, and generally doing all DNS resolves through proxyresolve shell script (which requires dig and a DNS server which accepts TCP requests. that way the code doesn't have to touch pthread code etc. this is much slower, and obviously doesn't work with .onion urls, but it's more robust.. i guess we could improve debug mode to output that we deal with UDP... but yeah, the address family you got there is weird. check your mac's include directory and grep for AF_INET or PF_INET to find out which named option 32 corresponds to.. thanks, according to you pastec\ndefine AF_SYSTEM   32      / Kernel event messages /\nthat means the thing you were looking at was some sort of kernel event socket(?) communication.. your post is not very helpful. what do you expect me to do, download the program, compile it, and try to find the bug for you? that's not how it works.... Ah, it hangs. first bit of information successfully submitted. anything else i should know about your issue?.\nonly numeric ipv4 addresses are valid\n```\nyou already posted the answer - it's not possible due to the way DNS resolution is internally done.. well, actually there is a way - you can make a script that does the DNS lookup without proxy, and then creates the config file with the numeric IP on the fly.. no, that is not possible. also it's questionable whether it would make sense since you cannot un-proxify existing connections... but it would theoretically be possible to implement it using a signal handler for a specific signal such as SIGUSR1 that sets a global flag and depending on whether it is set or not the hooked functions would just call the original libc function, or do the usual redirects. but then applications might use that signal for some other purpose, so proxychains would then turn off and on \"randomly\".... no, i won't add it... but in short, the change would involve installing a signal handler for SIGUSR1 from init() which sets global variable and depending on it you call true_connect() etc from hook functions\n```\nint disable_proxychains = 0;\nvoid sigh(int x) {\n  disable_proxychains = !disable_proxychains;\n}\ninit() {\nsignal(SIGUSR1, sigh);\n...\n}\nint connect(a, b, c) {\n  if (disable_proxychains) return true_connect(a, b, c);\n  ...\n}\nint sendto(a, b, c) {\n  if (disable_proxychains) return true_sendto(a,b,c);\n  ...\n}\netc. the same repeated for all libc functions that are hooked (grep for `true_`)..\n2) only the one with the specified PID\n1) show your code i guess ?\n``. sigh. you're not running one long-living process as you initially told, you're running many short-living jobs from a script. that means nothing prevents you to run wget from inside your script with or without proxychains, according to external input (maybe presence of a specifically named file).. https proxies are currently not supported, and i believe adding support for it would not be straightforward (for example using openssl,etc you can SSL-wrap a socket, but if there's more than one SSL-proxy in the chain, how would you wrap the socket again ? i doubt that it can be done easily). additionally, pulling in dependencies to another library can break all sorts of things considering we're hooking libc. so i dont see this being implemented anytime soon. maybe kneesocks would be a more appropriate tool to add support for this, since it has to deal with a single proxy only.. i merged the mem-leak commit, good find. as for the 2nd commit, i don't see a good reason why we should protect the user from himself.. i think it'd make more sense to check the input buffer length and throw an error if the line in config file exceeds 1024 bytes, so we don't have to mess around with every single format string.. ok, can you please open a new PR with the suggested change ? thanks. i can't see any error.. see https://github.com/rofl0r/proxychains-ng/issues/78 you probably gotta turn of SIP completely. proxychains 3.1 is not supported here.. there are 2 possible scenarios where you would need to hide the data:\n1) multi-user system with trusted admin. you could prevent others from reading the file by setting the right permissions.\n2) untrusted system under someone else's control (for example a shared VPS). you could hide the config file contents using crypto but then the SOCKS/HTTP passwords would still be sent in cleartext over the wire, so the rogue admin could grab them with wireshark or tcpdump.\nso imo its questionable whether such a feature makes sense.\n. how would you encrypt your traffic ? you mean like in usingproxychains4 curl https://someserver` ? in that case even though the HTTP procol is encrypted, the SOCKS5 requests themselfes still aren't.. how do you prevent your VPN credentials from being stolen though ?. well i suppose you need a password or private key file to use VPN ?. ok, and how do you hide that ?. well yes, since you're worried about getting your proxychains.conf leaked, you might as well worry about your VPN private keys, assuming they're used on the same box.. tbh i think this feature is overkill and adding it could have considerable regressions, if it involves running a subprocess or a third-party library since any usage of libc functions inside a foreign process can have unwanted consequences. the imo only feasible way to implement this feature would be by using embedded tweetnacl crypto.. there have been only 2 minor fixes, i guess it would be easier for you to either just apply those 2 patches on top of the 4.12 tarball, or grab a github tarball from the latest commit id.. it depends on the protocol and application. for example you might proxify a HTTP connection, but your browser sends cookies and other unique data that could be tracked back to you.\ni assume that in your scenario \"Server B\" is the proxy. if it is the only proxy you're using, someone eavesdropping on it can see the incoming and outgoing connections as well as the unencrypted SOCKS headers, so he knows quite well about your activity.\ntypically proxychains is used with remote_dns turned on, so all DNS requests are done on the proxy, in which case no DNS lookup info from your PC gets leaked.\nso if there are no leaks inside the protocol/application data itself, server C will only see a connection originating from server B.. if your build environment does not offer sys/socket.h, there's no way it could ever work, i'm afraid. also, i doubt that msys actually implements a dynamic loader that is compatible with LD_PRELOAD. i guess there's no way to make this work on M$ OS.. 1) CMake sucks in every regard\n2) Autotools sucks in that:\n - generated code is huge, often way bigger than all the code in the project\n   in the case of proxychains, getting rid of autotools shrinked the tarball about 90% iirc\n - it is hard to read,write, and understand the M4 gibberish and its utterly underdocumented\n - but it's portable, and well-established, so i try to mimic all aspects of its user-facing interface. thanks for the debug output. as we can see there, gcc_init and all the other init code is called twice (even with same PID!). this shouldn't happen, and might be the cause of the crash.\nit looks to me as if Mac OS X' implementation of pthread_once() is buggy.\nhere is a simplified test case\n```c\ninclude \ninclude \npthread_once_t init_once = PTHREAD_ONCE_INIT;\nstatic void do_init(void) {\n    dprintf(2, \"this message should be printed only once\\n\");\n}\nattribute((constructor))\nstatic void gcc_init(void) {\n        pthread_once(&init_once, do_init);\n}\nusage on linux:\ngcc ponce.c -fPIC -shared -pthread -o ponce.so\nLD_PRELOAD=./ponce.so git status\n``\nusage is slightly different on mac os, for example the extension is .dylib and LD_PRELOAD is namedDYLD_INSERT_LIBRARIES. maybe different build options are needed too, compare with the build output when building libproxychains.dylib. (check also main.c for environment variable usage). once you can get that test program to print\"this message should be printed only once\"` twice, which it shouldnt, you can use that to file a bug report with APPLE.. perfect! so it's finally confirmed that Apple's libc is broken.\nnow the question is, who files the bug with them ?. i don't think that will happen, since i don't even own a mac.... does that mean you will file the issue too, @byronyi  ? that would be great. and if possible, paste a link here to the bugreport.. well, then i guess its time for someone who cares to launch gdb and debug the issue.\ndont wait for me, the support for mac os x is only a bonus and i couldnt care less.. > After discussing with Apple's engineer, it seems that cargo, git or perl called exec() on itself, which causes that message to be printed more than once.\n\nSo pthread_once works fine and it is not the cause of this bug\n\nthinking about it again, it appears the Apple engineer is wrong. pthread_once should always ever be called once, even after fork + exec. you can try the same tests on linux, there the message will only be printed once.. i've seen this: https://github.com/Qusic/proxychains-ios - no idea if it's any good though.. the repo i linked to does use my version... but it seems to require some additional stuff.. yeah, proxychains only works on a per-application basis. on a real computer you can \"trick\" though and start your shell (bash) with proxychains, so all apps started from that shell will be automatically proxified.. no\nbut using linux's iptables firewall it is possible to configure a system in a way it routes all traffic over a proxy (and drops the traffic than can not be proxified) - but that is probably not applicable to iOs.. not really. though the README mentions the IRC channel which can be used for discussion related to proxychains.. yes, it is possible. you just need to code it.. C is not ugly, it's beautiful and elegant in its simplicity. what is ugly is if people that don't know better litter it with #ifdef's on their quest of doing non-portable things... anyway, look at the function select_proxy() in core.c, which is responsible for selecting the proxy, as its name suggests. you may also want to compile proxychains with -DDEBUG in CFLAGS to get more debug output.. so i suppose the answer is in #159. proxychains hooks to dynamically loaded libc.\n1) go doesn't even use libc, it uses its own syscall wrappers\n2) go doesn't use dynamic linking, it uses static linking\nso there's no way we could use this technique with go. the only way to hook into go binaries would be by using ptrace to hook the system calls themselves, which is hairy and platform-dependent - i.e. it means it would be a lot more work to produce and maintain.\nso i fear it is out of scope for this utility.. what i find a bit disturbing in your paste is that the \"DLL init\" message is displayed several times.\nin order to debug the issue, start with something simple.\nif proxychains4 curl google.com works, then it means the proxy-dns part works.. what's the server software running on that http proxy ? squid ? tinyproxy ? ... ?. version ? can you share its configuration ?. ok, thanks. since i am quite busy with other things i'd be glad if someone watching this repo could try this out by setting up a squid instance and trying to reproduce the issue.\n(eventually looking at the transaction in wireshark, and submitting logs, pcaps, etc).\ni have a suspicion that squid may not like the HTTP/1.0 we pass, maybe changing the code to send HTTP/1.1 may fix it already.. unset LD_PRELOAD. maybe telnet on OSX is a static linked binary ?\nanyway, that's why proxychains-ng has by default verbose output, so you can immediately see whether it works.\ni'm talking about output like \"chain <-> 127.0.0.1:9050 <-> target\"\nso without seeing the ouput of your telnet invocation, i cant tell you what the problem might be.. yes, that is possible. you need to configure squid to use the school proxy as upstream proxy. you can test if it works by using e.g. firefox and put your local proxy in the network settings.. do you get the line [proxychains] DLL init: proxychains-ng 4.12 several times ?\ngenerally speaking, the error you get is because you either hit a bug in mac os' libc (very likely) or a bug in proxychains (less likely) which causes some sort of undefined behaviour, and it happens to manifest in that ssl lib. though i guess it could be interesting to debug what happens at that spot where the assertion fails.. can you paste the code from there ?\nAssertion failed: (ctx), function digest_update, file /BuildRoot/Library/Caches/com.apple.xbs/Sources/boringssl/boringssl-109.20.5/apple/crypto/digests.c, line 49.. that doesn't seem to be the right file though :/ even the copyright header there goes way beyond line 50.... i don't know, sorry.. oops, yeah i had temporarily no access to sf.net. its there now and should be ready for dl in a few mins. actually, you can run ./proxychains4 straight from the build directory... \nanyway. which prefix did you use when running ./configure ?\nif you used ./configure --prefix=$HOME/usr then everything should work as expected without having to change stuff in main.c...\nso i think your problem is PEBKAC.. when you configured proxychains, did you use the character ~ to denote your home dir ? this will not work since that is shell expansion, and proxychains doesnt use the shell.\nyou need to use /home/username literally.. you're wrong.\n```\nroot:/$ cd /home/\nroot:/home$ mkdir foo\nroot:/home$ cd foo/\nroot:/home/foo$ tar xf /src/tarballs/proxychains-ng-4.12.tar.xz\nroot:/home/foo$ cd proxychains-ng-4.12/\nroot:/home/foo/proxychains-ng-4.12$ ./configure --prefix=/home/foo/usr\nchecking whether netinet/in.h defines s6_addr16 ... yes\nchecking whether $CC defines OpenBSD ... no\nDone, now run make && make install\nroot:/home/foo/proxychains-ng-4.12$ make -j8 >/dev/null 2>&1 && make install\n./tools/install.sh -D -m 644 libproxychains4.so /home/foo/usr/lib/libproxychains4.so\n./tools/install.sh -D -m 755 proxychains4 /home/foo/usr/bin/proxychains4\nroot:/home/foo/proxychains-ng-4.12$ make install-config\n./tools/install.sh -D -m 644 src/proxychains.conf /home/foo/usr/etc/proxychains.conf\nroot:/home/foo/proxychains-ng-4.12$ cd ..\nroot:/home/foo$ proxychains4 curl google.com\n[proxychains] config file found: /home/foo/usr/etc/proxychains.conf\n[proxychains] preloading /home/foo/usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.12\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0[proxychains] Stri\nct chain  ...  127.0.0.1:9050  ...  timeout\ncurl: (7) Couldn't connect to server\nroot:/home/foo$\n```. hmm which settings are you using ?\nare you using localnet support ? do you connect to localhost ?\nwhat's your remote_dns_subnet ?\ntry if using another proxychains.conf file (for example from other forks) fixes it\n. this looks as if you trying to access a service on localhost through tor proxy which of course cant work\nyou need to enable localnet for this to work (afaik the other fork recently enabled it by default for 127.x.x.x subnet)\nsee these 2 commits\nhttps://github.com/haad/proxychains/commit/b0d9d1da41403536f4c37b74f52d2d2895a4890e\nhttps://github.com/haad/proxychains/commit/251fd7cd4a87c57fe380268ea7daa657a4ab867e\nit's only a little change in the config file\n. well the reason i didn't add it is that i don't use stuff that accesses localhost with tor...\nand 127.x.x.x is the best choice for remote_dns_subnet for over-correct programs that deny to connect to 224-kinda subnets\ni could add it in commented form tho, so one can enable it in a second instead of looking up the syntax\n. @xclr8tr : if you like my work please click on the star button on this repo, having more stars will help to up the reputation of this repo (and it will be ranked higher in github search results). thanks!\n. thanks.\ni dont actually have any security problems with this.\nit's just a matter of having the user trying to understand what this piece of software does before using it.\nwhat IMO is a bad idea is the thing that was added to the shell proxychains launcher in the other repo: exporting the LD_PRELOAD variable, to feature a \"proxified env\" in your terminal.\nimagine you have 3 terms open, one of them \"proxified\".\nnow you only have to enter your command in the wrong term and you're fucked when you have to rely on strong anonymity.\nregarding life and death: if your life depends on a piece of code, you better test it very well before using it.\nor even better, just leave that turd of a fascist state you're living in.\nif you don't, i can't help you.\n. thanks\n. @guanqun can you click on the star button ? every star counts to get a better github search ranking. thanks!\n. you can workaround it by changing these 2 lines in Makefile\nCFLAGS  += -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DTHREAD_SAFE\nLDFLAGS = -shared -fPIC -ldl -lpthread\nto remove  -DTHREAD_SAFE and -lpthread\nwhich distribution are you using ? please paste the output of following commands\nfor i in /lib /lib32 /lib64 ; do\nfind $i -name 'libpthread*.so*'\nfind /usr/$i -name 'libpthread*.so*'\ndone\nand for any found .so files, do objdump -T libpthread.so.2.xx | grep pthread_once\nldd `which telnet`\nldd `which wget`\n. this appears to be breakage caused by recent glibc\nsee http://sourceware.org/ml/libc-alpha/2012-09/msg00203.html\napparently to use proxychains with programs on a system that uses it, you have to link the application that is to be proxified with -ldl -lpthread\nbtw: using ping will not work with proxychains anyway; it uses ICMP protocol.\nproxychains supports only TCP\n. @netroby if you intend to use this with tor, i'd be interested to hear if telnet works with the \"torify\" program that comes with tor. it is quite similar to proxychains.\n. btw, with the removal of THREAD flags as mentioned in my first reply, at least wget seems to work with proxychains.\n. hello @xclr8tr \nno, i was not referring to iptables_torify\nthere's a program called \"torify\" or proxify in the tor suite bundle. i was referring to that.\nyes, iptables_torify can of course be used as well. but it requires another host which serves as a firewall and messing around with routing tables. not what you want to use, unless for a dedicated \"tor-machine\".\nas to this issue, your answer is pretty off-topic.\n. @xclr8tr where's the possible solution ?\ni see pasted output of proxychains on a working system.\nthe problem in this issue is that with glibc 2.15, they pretty much killed LD_PRELOAD because it only works if the program to proxify is linked against -ldl and lpthread. that makes what you can do in the preloaded DLL limited to only functions in the libc.so, and since dlsym seems to be contained in libdl.so this makes it impossible to hook the symbols without writing an own dynamic linker.\nyou're right that iptables_torify doesn't necessarily require another host, unless you don't want to mess up the firewall and routing settings of your own box, and as long as you don't want to use socksified and non-socksified apps at the same time.\n. @tomsawyer , @semionlaptev\nplease also see commit bddb79a2860be472a62414f6bf9b32810e237ba9\nthat fixes the segfault, but unlike your code commited to haad's repo it doesnt introduce a regression in regard to thread safety. a good maintainer would have noticed that.\n. this function is used for any name resolution inside proxychains (i.e. also called from proxy_getaddrinfo), so it has to be threadsafe, and that is the reason the buffer is explicitly passed.\n. you may also be interested in 2d58820635154320b097779d98050f370a81de6e\nthis fixes the thread safety issue i recognized when i fixed the segfault.\n. hi, thanks for your support. unfortunately netcreature, the original author can't be contacted. it seems that he does not check his emails or his email account expired.\ni had a conversation with the debian maintainer of proxychains and the next version of debian will include this proxychains version. i hope that will make things better.\ni guess i should also look into convincing pkgsrc maintainers to use this version, this shouldn't be a problem as i know some of them personally.\n. oh, if you take a look at the commit history on haads repo or the contributor graph, you'll see that 95% of all work was done by me, so there's no risk in using my repo over haad's.\nhttps://github.com/haad/proxychains/graphs/contributors\nand the source code is less than 1.5 KLOC so it shouldnt be too hard to check that it doesnt do evil things.\n(note that haads version has much more code, because he does things in a overly complicated manner, and pushes stuff that was originally testcode)\n. the no-as-needed was added recently to fix the broken toolchain on ubuntu 12.04, but apparently the mac one is even more broken...\nif removing it fixes the build, we can special case it for mac in the configure script\n. so please remove -Wl,--no-as-needed and tell me if that works (i dont have a mac)\n. does this commit fix it ? (branch macfix)\nhttps://github.com/rofl0r/proxychains/commit/00b45899caeb069554c0c8bedc8b6913511ac058\n. thanks for your report!\ncan you paste the declaration of getnameinfo on line 677 of your /usr/include/netdb.h ?\nand please tell me which version of glibc you use.\nyou can get this information by executing libc.so (location of libc.so.6 may differ on your system) directly like this:\n$ /lib64/libc.so.6 \nGNU C Library stable release version 2.11.3 (20110203), by Roland McGrath et al.\n. the version number is missing from your output\nif it is missing from your libc.so output, try this c program\n```\ninclude \nint main() {    printf(\"glibc v %d.%d\\n\", GLIBC, GLIBC_MINOR); }\n```\n. this here is the relevant code\nhttps://github.com/rofl0r/proxychains/blob/master/src/libproxychains.c#L384\nold glibc versions had a wrong prototype (should be int instead of unsigned int), this should fix it for all affected versions \n(according to my knowlegde up to 2.14)\n. this is the commit that fixed it in glibc.git\nhttp://sourceware.org/git/?p=glibc.git;a=commitdiff;h=e4ecafe004b3d4270b3a9dace8f970047400ed38\n. did you change only libproxychains.c or did you add the second .c file (nameinfo.c) and makefile changes as well ?\nyou should make the changes to all 3 files, then make clean && make again. does that fix it?\nif not:\nwhich version of debian is this (so that i can download and test)\ncan you execute: \ngdb --args ./proxychains4 telnet google.com 80\nthen press \"r\" and enter, and when the message \"aborted\" appears, enter \"bt\" and paste the backtrace information here ?\n. ah i understand. yes, not adding the second C file causes miscompilation.\nthe easiest thing to do is delete your proxychains dir\nthen \ngit clone https://github.com/rofl0r/proxychains\nand build again\nalternatively you can re-extract the 4.3 version tarball, and then change line 386 in libproxychains.c from\n```\nif defined(GLIBC) && (GLIBC < 3) && (GLIBC_MINOR < 14)\n```\nto\n```\nif 0\n```\n. nice!\nyou can find me momentarily in #proxychains @ irc.oftc.net\ni think the mode you want is \"random_chain\" (see proxychains.conf file)\n. \"A lot of the time\" means it works sometimes and sometimes not ? this sounds strange...\ntry to run with gdb\ni.e. gdb --args proxychains4 nmap foo bar\npaste the backtrace (bt) when it receives the SIGTRAP.\ni suspect some problem in the mac dynlinker.\n. well nmap works usually with pcap so on a completely different layer which is not really compatible with proxychains.\nonly nmap's syn scan could theoretically be compatible with proxychains. that's its only mode that works straight with libc sockets.\nthe SIGTRAP backtrace is not useful at all...\n. glad to hear ;)\n. programs that launch other programs are tricky to deal with.\nmaybe environment variables get cleared.\ntry using export LD_PRELOAD=/path/to/proxychains4.so in the shell previous to running your php script.\nalso proxychains works only with dynamically loaded stuff.\nmaybe php is statically linked against curl ?\ntry running gdb --args proxychains4 php myscript.php and put a breakpoint on \"connect\", and then look at the backtrace whenever the bp is hit.\n. i did some tests and the following happens:\nfor the php connect itself, libc.so is used in the ordinary way, everything works as expected.\nfor cul, php dlopen()'s curl.so, which opens libcurl.so. \nfor some reason the glibc dynlinker does not hook the connect() symbol for libcurl.so\nthis seems to be a bug in glibc's dynlinker, as it works as expected with musl libc dynlinker.\nin other words, running your php script using musl libc as system libc, 10.10.10.10 is returned for both calls.\n. yeah, you can use musl libc as a secondary libc, but you need to compile everything involved from source using the provided musl-gcc wrapper, that means zlib, openssl, php, curl, and proxychains (everything called must be using the same libc)\nhere are build recipes for musl (configure flags etc)\nhttps://github.com/rofl0r/sabotage/blob/master/pkg/curl\nhttps://github.com/rofl0r/sabotage/blob/master/pkg/php\nhttps://github.com/rofl0r/sabotage/blob/master/pkg/zlib\nhttps://github.com/rofl0r/sabotage/blob/master/pkg/openssl\n. the simplest thing in your situation is probably to use the built-in proxy support of curl\ni.e. adapt your php scripts so that they all use the same proxy than proxychains (maybe it even works with an environment variable)\nalternatively you could either scratch php and use C, or download a precompiled sabotage linux rootfs from http://mirror.wzff.de/sabotage/ and extract it into some directory (read the http://mirror.wzff.de/sabotage/README_sabotage_images.txt for how to extract the image files) then chroot into that dir and use the php scripts from inside the chroot with musl.\n. it's a bug in GLIBCs dynlinker. someone would need to stand up and report the issue on their bugtracker. this comment  explains what happens.. i've created a minimal testcase to reproduce the issue: https://0x0.st/fdc.gz\nit's 3 small C files and a build.sh. when you run build.sh, you should see the output\nhooked\nhooked\nhowever on GLIBC it probably prints hooked only once.\ncan anyone test this ? i don't have a system with GLIBC.\nwhen we have it confirmed, someone can take the testcase and open a bug report on the GLIBC bugtracker.\napp.c\n```\ndefine _GNU_SOURCE\ninclude \ninclude \ntypedef void (*func)(void);\nint main() {\n        puts(\"hello world\");\n        void *h = dlopen(\"./dlopened.so\", RTLD_NOW);\n        func doit = dlsym(h, \"doit\");\n        doit();\n}\nbuild.sh\n!/bin/sh\ngcc preload.c -Wall -shared -fPIC -ldl -lpthread -o preload.so\ngcc dlopened.c -Wall -shared -fPIC -ldl -o dlopened.so\ngcc app.c -Wall -ldl -o app\nLD_PRELOAD=./preload.so ./app\nshould print hooked twice.\nif it doesn't, dynlinker is broken\ndlopened.c\ninclude \nvoid doit(void) {\n        puts(\"puts from dlopened .so\");\n}\npreload.c\ndefine _GNU_SOURCE\ninclude \ninclude \npthread_once_t init_once = PTHREAD_ONCE_INIT;\ntypedef int (putsfunc)(const char);\nputsfunc origputs;\nstatic void init(void) {\n        origputs = dlsym(RTLD_NEXT, \"puts\");\n}\nattribute((constructor))\nstatic void gcc_init(void) {\n        pthread_once(&init_once, init);\n}\nint puts(const char* s) {\n        origputs(\"hooked\");\n        return 1;\n}\n``\n. thanks. what was the output of the testcase once you got it to run, @kai-rn ?. damn. even when you replaceRTLD_NOWwithRTLD_LAZY` in app.c ?. \"But IP only is expected, proxychains wont work.\"\nthat is not correct, proxyresolv isn't in use anymore: read the comment at the beginning of the script\n. does other stuff such as telnet, wget, netcat work correctly ?\nbtw use a git checkout instead of 4.4, so we can be sure that this issue wasn't already fixed in the meantime.\n. i just tried proxychains 4.4 on an ARM machine using both glibc and musl libc, no problem at all with hdb_fill locking up. can you provide versions of glibc you are using ?\n. you are aware that server programs do not work at all with proxychains ? how do you expect a connection that is made from someone else to go through a proxy.\nyou can only proxify outgoing TCP connections\n. so, let me try to understand the issue\ntransmission is hooked via proxychains. \nso its outgoing connections should go through a proxy, except its outgoing connections to 127.x.x.x, because you set that as a localnet.\nits server sockets, which are not hooked should work as usual.\nyou are connecting to its server socket with an application that is not proxified, but the connection to 127.0.0.1 fails.\nis that correct ?\nbtw, whats your setting here ? https://github.com/rofl0r/proxychains/blob/master/src/proxychains.conf#L51\n. how do you start transmission ? please provide the used command line (including configuration needed to get the web interface up) so i can do some tests.\n. should be fixed via 4fb7eb0 (fix for #42 )\n. should be fixed via 4fb7eb05328465c97b5c374244a82596da9734cf (fix for #42 )\n. is that gmake ? (gnu make) ?\n. shrug in that case i have no idea what causes this.\ni dont even know where that output comes from. preprocessor, compiler, linker ?\ni suspect your toolchain is broken.\nanyway, iOS is not in the list of supported platforms, unlike MacOSX.\nif you can figure out what went wrong and its easy enough to fix, feel free to submit a patch so we can add iOS to the supported list.\n. please elaborate. i have never used http proxies myself, but afaik it is implemented and works.\n. no, this only suggests that HTTP 1.0 is used to establish the connection. theres nothing wrong with that, unless some broken proxy server denies HTTP1.0 connection attempts but allows 1.1 ones.\nif you dont have an example case of a server software that misbehaves in that way, we can safely close this issue as invalid.\n. cool!\nhow can we get that formula integrated upstreams ?\n. https://github.com/mxcl/homebrew/commit/340513411b09e8e9262ff349371f0b15dcfbd87e\nhttps://github.com/mxcl/homebrew/pull/20343\n. thanks for the merge @samueljohn \n. thanks. what is a MAC infrastructure ?\nif you open a pull request i can pull from there so you have proper credits in the commit history.\n. thanks!\n. depends on what \"open\" does\ncan you strace it ?\ncan you try with an absolute path for libproxychains.so ?\n. that \"open\" runs the app is clear. it's unclear how it does so.\nanyway, you set the directory with configure's --prefix. that path is then baked into the proxychains binary.\nyou need to run \"make install\" and then launch proxychains from $prefix/bin, because if it finds libproxychains.so in the same dir the executable is in, it will use a relative path.\n. that doesn't help at all.\nanyway, have you understood the second part of my latest comment ?\n. just curious, does firefox work proxychainified under osx ? i heard reports that it doesn't on recent glibc linuxes due to a bug in the glibc dynlinker.\n. firefox is a bitch because it does some elf hacks to speedup dynamic loading of DSOs (due to its huge C++ bloat), uses dlopen for modules etc... and as the LD_PRELOAD functionality of dynamic linkers is usually not well-tested except in simple cases, this causes some cornercases which can cause malfunction. there are other browsers tho that work fine with proxychains.\ni don't see an urgent necessity to make firefox compatible with proxychains, as it 1) supports socks out of the box, 2) running it without the other privacy extensions of the tor browser bundle is a bad idea anyway.\n. hmm where's the updated text for the config file ? (multithread-hint)\n. trying to compile yields multiple errors\nsrc/core.c: In function \u2018connect_proxy_chain\u2019:\nsrc/core.c:621:35: error: \u2018pc\u2019 undeclared (first use in this function)\nsrc/core.c: In function \u2018connect_proxy_chain\u2019:\nsrc/core.c:621:6: error: too many arguments to function \u2018start_chain\u2019\nsrc/core.c:435:12: note: declared here\n. i was about to merge your PR, but the build errors prevent me from doing so. so pls come up with a fix.\n. cleaned up and merged\n. than look into your email account, you get one mail per comment\n. well i basically wanted that you split off the malloc change from the commit that introduced it silently under a different label\n. i can't merge this as is. please clean up and create a new pull request against current master. thank you.\nalso it would be nice if the new PR had some sort of introductory text that describes why one would like to have more than one proxychain list.\n. how would you proxify an incoming connection ?\nin general, only outgoing connections can be proxified.\n. as for running a proxyfied terminal, you open gnome-terminal as usual and then invoke proxychains4 bash inside the terminal\nor just export LD_PRELOAD=/path/to/libproxychains.so\nyou probably need to set a localnet for 127.x.x.x in proxychains.conf so that the smtp server does not try to connect to local ports using the proxy\nas for the script, i don't see the problem - you just skip the ssh command and instead put your socks proxy into the config file.\n. gdb --args proxychains4 mail-server should do the job. then you can break on proxychains main() or the some function of libproxychains.so.\nyou should start your server in a way that makes it run in foreground and log to the console. then you should also be able to see the connections done via proxychains and other proxychains output like [DLL init].\n. imo that's too much hassle for little gain - if someone doesnt know the ip of his proxy he can look it up via hosts or proxyresolv (with a temporary tor config or similar).\ni'm not even sure if it is still possible to turn off proxy_dns...\n. yeah, you don't want to manually specify ips and i don't want to code the feature you want.\n. there's a problem with this approach: it excludes powerpc users (up to osx 10.5) and potentially (i don't know if this setup exists) those that have a toolchain/system that supports only i386 or x86_64.\nhowever i would accept a patch that adds a configure flag --with-universal-binary or something like that which puts the right C/LDFLAGS for this usage case into the config.mak.\n. sounds good\n. it's technically not correct to return success\nthe process may try to reuse, dup, or whatever our fds\ndoes it fix the issue if you set errno to EBADF or EIO ?\n. line 7 of README has the answer\nhttps://github.com/rofl0r/proxychains-ng/blob/master/README#L7\nas for your document, you mean something describing an \"update\" from proxychains 3.1 to proxychains ng ? it's as easy as installing the new program and then invoking \"proxychains4\" instead of \"proxychains\". additionally you may want to diff the config files with the one in px-ng's tree to copy the commented out options for new functionality.\n. when you connect to any proxy, you cannot make that proxy connect back to your localhost address. 127.0.0.1 will point to the exitnode's own \"localhost\".\nthus, it is impossible to mix any proxies that both require you to run a daemon on localhost.\n. @SZoPer \nthat feature is called localnet - just uncomment this line https://github.com/rofl0r/proxychains-ng/blob/master/src/proxychains.conf#L86\n. well, the proxychains.conf file is kinda the documentation...\n. which os/distribution/version, and which firefox version ?\nbtw firefox has its own proxy setting you could use\n. firefox has a hidden setting you need to activate to do remote dns.\ngo to about:config and set network.proxy.socks_remote_dns to true\n. hmm... thanks, but does it actually make sense to include distro specific stuff in a source repo ?\n. thanks for the interest. the 4.8 release is not there yet, as nothing major has been changed since the 4.7 release. there have been only minor cosmetic fixes except for this commit https://github.com/rofl0r/proxychains-ng/commit/b76aa653c9089914d16584a16d35dd037ac0fd62 , which may or may not (i didn't hear back from the original reporter) fix a problem with nmap.\n. 4.8 was just released\n. i had to reupload the tarball due to a stupid mistake (forgot to commit the release commit)\nthe proper release tarball has sha512 04fe5cd470db7dd041fba2d326fab9865e386b33d3c8afdfdb0ba8dd0962a62d1e0a5d235a10bd4e885baae70373280a599354d092fbebe7f7c08dfe41dfa03b  \nwhat's your DESTDIR and prefix ? could you pastebin your config.mak ?\ncould it be the problem is due to the 2 slashes ? maybe you used --sysconfdir=/etc/ rather than /etc ?\n. hmm i cant reproduce the issue with my gnu make 3.82. do you use gnu make 4.0 ?\n. i'll try to investigate the issue. \nto do so i need to port gnu make 4.0 to my musl-libc based linux system which will probably take a while.\nin the meantime you could just cp src/proxychains.conf $DESTDIR/etc/ as a workaround.\nother testers on freebsd and suse linux didnt report any issues with install-config so far.\n. ah, i think i see the error now... it happens to work because i have proxychains.conf in my development root dir. working on a fix, will push a bugfix release soon.\n. uploaded new release tarball proxychains-4.8.1.tar.bz2 \n$ sha512sum proxychains-4.8.1.tar.bz2 \n6e1673b331722ea5f6282a055d9552e387a2d68cc5e0c3fbb310ebbf58d47f1c9de46f11bbe5977b328d7a0abf1a5f77c544ccea799cb047da5c8521ee7ec949  proxychains-4.8.1.tar.bz2\n. thanks for the report, i committed a version that needs a bit less code to achieve the same thing - at least it should. please let me know if it works for you.\n. sounds like you have a mismatch between 32bit and 64bit code.\nmaybe you used a 64bit compiler on 32bit linux ?\npls paste output of file /test/lib/libproxychains4.so and uname -a\n. btw if you just want to test it you dont need to pass anything special to configure\njust ./configure && make and then you can run it from the current dir\n./proxychains4 -f src/proxychains.conf\niirc this usage is also described in the README.\n. the above looks correct, however there's some mismatch/broken configuration on your system. btw i did ask for the file output of libproxychains.so, not that of the binary.\nmaybe your ld-linux.so is 32 bit ? (that's the dynlinker used by glibc).\nsee http://stackoverflow.com/questions/216000/gcc-error-wrong-elf-class-elfclass64\neither way this is not a proxychains bug but a misconfigured linux system, so i am closing this.\nyou can visit the irc channel mentioned in the README so i can help you troubleshooting interactively.\n. the license file was already updated - see latest commit.\nyour commit only has whitespace changes.\nthe CFLAGS thing is wrong as the affected lines are linker commands.\n. this is a non-issue.\nthe warning makes sense for libraries, but proxychains is no library, even though it requires a shared object which is typically used for libraries.\nif the package builder considers this warning an issue rather than a nuisance, he should take appropriate measures to silence that warning.\n. supposedly fixed by the latest fixes related to the close() hook.\n. yes, README is the only documentation for compilation/installation.\nproxychains.conf is also documenting the different options, but that's it.\nif you need further info, you have to read the source or talk to people :)\n. you can use portredir program to tunnel a port from localhost to your db server\nthen use localnet rules for 127.* (uncomment existing config template)\ntrue_connect is the unhooked libc connect() function\n. https://github.com/rofl0r/portredir/\n. thanks for your report.\nwhen looking at the output you attached, it seems that only the \"/etc/hosts\" name resolution is broken when proxy_dns is turned off.\ndid you also try if it works with hostnames not in /etc/hosts ? google.com oslt.\n. should be fixed, please test latest git\n. well if your proxy doesnt support DNS lookup, you need to turn off remote_dns.\n. try using an absolute path instead of \"./\".\nit seems the application you're starting somehow manipulates the current active directory.\n. try opening a shell, enter:\nexport LD_PRELOAD=/path/to/libproxychains4.so\nchromium-browser --user-data-dir=/tmp/chromium\n. anyone tried what i said above ?\n. we need to figure out what chromium does that is incompatible with proxychains.\na start would be if someone that has it installed can paste the output of \"strace -f chromium\" (while connecting to a single random site and then closing the browser - dont do it with several tabs open as that will heavily bloat strace's output)\n. thanks for the strace output.\nnow we know that chromium uses a perl wrapper that searches for plugins and then starts the real binary:\nexecve(\"/usr/lib/chromium/chromium\", [\"/usr/lib/chromium/chromium\", \"--ppapi-flash-path=/usr/lib/Pepp\"..., \"--ppapi-flash-version=20.0.0.195\"], [/* 43 vars */]) = 0\nadditionally we see that pulseaudio is used which does its own (eventually incompatible?) dlsym() tricks\nopen(\"/usr/lib/pulseaudio/libjson-c.so.2\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\nopen(\"/usr/lib/libjson-c.so.2\", O_RDONLY|O_CLOEXEC) = 11\nif the problem is due to one of the above findings, it may help to try to\n1) start chromium directly without the perl wrapper\n2) disable pulseaudio (or recompile chromium without pulseaudio support, if feasible)\n. to find out for sure we need a voluntary who can test chromium with \n- pulseaudio globally deactivated\n- chromium launched directly without perl wrapper\nand someone who can build chromium without support for pulseaudio,\nand/or somebody who knows/reads chromium code to find out if its doing something weird\nlike doing the connect syscall directly or using raw sockets etc\n. i fixed a related problem a few days ago. you may wanna check out latest git and report if the problem still exists.\n. well, then i suppose someone should attach his debugger and find out why.\ni won't be that someone because chromium sources are > 2GB and compiling it from source takes hours.. proxychains needs no dev package as it does not provide any headers or libraries that are usable for development. the .so file is used solely by the preloader.\n. see the error message:\nerror: invalid item in proxylist section: localnet 127.0.0.0/255.0.0.0\nyou put the localnet stuff in the wrong place\nit needs to be on the top of your config\n. it shouldn't, since execvp (used by main.c to start the target process) passes the old environ on.\nas a quick test, do proxychains4 bash -c export\n. @nodje yes you can compile for both archs\nmake clean ; ./configure --fat-binary ; make\npossible that it solves your problem\n. this patch is bogus. to support openbsd we need to detect it properly at configure time and define AI_V4MAPPED to 0 and change the ifdef IS_MAC at line 788 of core.c to if defined IS_MAC || defined IS_OPENBSD\ncan you paste the output of uname -s ?\n. how old is openbsd release 5.6 ?\npls test if this patch fixes your issue https://github.com/rofl0r/proxychains-ng/commit/44ca9ca968c2b4c29335df9362b77a7f7f481fe8 ( branch openbsd )\n. check out if commit 7b962a4 fixes the issue (branch openbsd again)\n. @jackyzy823 care to create a pull request with your fix ?\n. @proudzhu how weird. are you using the latest commit? and please paste output of the make invocation including the error.\n. @proudzhu try to revert e79e05a228558e95ee2d3e7cfffd9bbe1e4a368e as well. does that work ? this commit seems to be the original cause of the regression\n. rather than putting more ducttape (#65) on the broken linker command line,\ni reverted the original commit that introduced the breakage by shuffling the ld arguments around, and the following fixup by @jackyzy823, and introduced a clean way to deal with user-supplied LDFLAGS. please check if that fixes your issues.\n. pretty sure that the cause is this: https://github.com/rofl0r/proxychains-ng/issues/10#issuecomment-12632041 : glibc's dynlinker does not preserve preloaded DSOs for dlopen'ed modules (that's imo a bug)\n. it's a limitation/bug of glibc dynlinker - to circumvent it use a linux distribution based on musl libc such as alpine linux or void linux or file a bug report for glibc and hope that it gets fixed...\n. did it work earlier when we fixed the build?\n. unfortunately your backtrace is worthless without symbol names. see if you can provide a better backtrace with full debug info activated (proxychains is by default built with debug info so i'm unclear why yours is missing)\n. this seems to be due to a bug in openbsd's dynlinker.\nseems we need to wait for a openbsd crack who knows how to get libc + dynlinker with debug symbols to track down the issue (due to lack of a pre-installed openbsd developer image for usage in qemu i went through the installer process, which left me with a semi-unusable system with a 1970's userland - no git, no wget, no curl, etc which took me about 2 hrs of investigation, manual download of tools (with \"ftp\") just to reproduce the issue, but nowhere near getting a proper backtrace)\n. try if modifying Makefile to\ndiff\n $(LDSO_PATHNAME): $(LOBJS)\n- $(CC) -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS)\n+ $(CC) $(CFLAGS) -lsocket -lnsl -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS)\nfixes it (addition of -lsocket -lnsl )\ntaken from https://github.com/vonnyfly/proxychains-ng/commit/1b9a5199e435967b4bada1a6f3b059e62e595c15\n. nope, those libraries are apparently not existing on OpenBSD\n. duplicate of https://github.com/rofl0r/proxychains-ng/issues/25\n. everything works as intended by passing -q to proxychains4 executable.\n. Thanks for the information. It is a feature of proxychains-ng to allow the user to preload  the DSO from the current directory. I understand though that with more and more mainstream distros adopting proxychains-ng it is probably better to ship with more \"defensive\" default settings. I'm currently thinking about the best way to achieve that, probably with a compile-time switch.\n. i can try to fix the build if you give me the output of uname -s\n. possible fix from https://github.com/vonnyfly/proxychains-ng/commit/1b9a5199e435967b4bada1a6f3b059e62e595c15\n``` diff\nsrc/core.c\n- if(service) getservbyname_r(service, NULL, &se_buf, buf, sizeof(buf), &se);\n+ if(service) getservbyname_r(service, NULL, se, buf, sizeof(buf));\nMakefile\n- $(CC) -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS)\n+ $(CC) $(CFLAGS) -lsocket -lnsl -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS)\n```\n. suggestion: create a script wrapper that generates a conf file with a unique name in /tmp for one-time usage, converting your command line parameters into an appropriate config file (and then starts proxychains with and -f paramater pointing to that file)\n. thanks for the report. do you have a python 2 compatible testscript as well ? i didnt port python3 yet to my custom linux distro.\n. this gives me \n[proxychains] Strict chain  ...  127.0.0.1:9050  ...  timeout\nException in thread Thread-150:\nTraceback (most recent call last):\n  File \"/lib/python2.7/threading.py\", line 810, in __bootstrap_inner\n    self.run()\n  File \"/tmp/pxtest.py\", line 20, in run\n    except ConnectionRefusedError:\nNameError: global name 'ConnectionRefusedError' is not defined\n. if you have the time to turn this into a proper C program, that would be preferable for debugging purposes.\n. thanks, but your test program crashes for me because getaddrinfo() returns error (-2 Name does not resolve) and as such the pointer res is not set to anything meaningful and contains whatever random bits it was initialized with... you need to check the return codes, but then the connect() never happens due to lack of a proper arguments to the connect call...\n``` c\nvoid conn(void user_data) {\n        int sock;\n        struct addrinfo hints, *res;\n        char buf[1024];\n        memset(&hints, 0, sizeof hints);\n        hints.ai_family = AF_INET;\n        hints.ai_socktype = SOCK_STREAM;\n        sprintf(buf, \"%d.example.noresolv\", (int)(intptr_t)user_data);\n        int r;\n        if(0==(r=getaddrinfo(buf, \"http\", &hints, &res))) {\n                sock = socket(res->ai_family, res->ai_socktype, res->ai_protocol);\n                connect(sock, res->ai_addr, res->ai_addrlen);\n                close(sock);\n        } else { dprintf(2, \"%d %s\\n\", r, gai_strerror(r)); }\n        return NULL;\n}\n. nice, i can finally reproduce the segfault. no need to send an improved testprogram.\n. yeah i came to the same conclusion. why dumpstring? because the initial design of the allocatorthread used shared memory, and it's \"alloc-only\" i.e. without ever freeing the strings\nfurther study of the dumpstring code suggests a design goal was to prevent memory fragmentation by putting the strings/structures in entire pages\n. @ravomavain does that fix the issue for you ?\n. yes. you can `make install DESTDIR=foo` and then you see exactly which files are being installed by looking into foo.\ni'm not going to add code that deletes files from user's boxes - they can and will shoot themselves in the foot.\n. are you sure your proxy works ?\nalso it seems that you specified your proxy twice in the config, which won't work\n. you have a link to haad's repo which is a different version. are you using haad or this one ?\nalso please `export LC_ALL=C` before doing anything that gives localized error messages (i don't speak french)\nas to your error it seems cygwin uses non-posix conforming headers and since RTLD_NEXT is not declared it probably means that cygwin does not implement the functionality needed  to hook function calls and as such the cygwin platform cannot be supported.\n. someone needs to try to find out\n. not sure why this is happening. maybe torbrowser ships its own copy of libc.so/libstdc++.so ?\nif so proxychains would need to be patched (with patchelf) to change the interpreter name to the copy of ld-linux.so in the torbrowser dir\n. proxychains-ng supports user-supplied CFLAGS and CC parameters in the traditional way (i.e. passed to configure).\nso someone that wants to use a x86 32bit toolchain can pass that to CC or use -m32 in his CFLAGS if his compiler supports multilib.\n. iirc there's at least one system (i can't remember if it was OS X or GNU/linux) where the dynlinker rejects LD_PRELOAD with relative paths, so it's done the way it works everywhere.\nyou can test it however by just exporting the LD_PRELOAD variable and running your app directly (without using the proxychains4 launcher, which really does just that).\n. which mechanism do you use to map some.local.host to 192.168.100.10 ?\n. i understand your problem, but not which name mapping mechanism you're using. is the name mapping done via an internal DNS server or a hosts file ?\n. @GrantStreetGroup ping\n. since remote_dns does the DNS lookup on the proxy, this can only work if the proxy is configured to use your companies' DNS server.\n. well if you have an idea how this could work as you expect, let me know.\n. proxychains 3.1 is not supported anymore- use the latest release ( http://sourceforge.net/projects/proxychains-ng/files ) or the current git version from this repo\n. it shouldn't. which error do you experience and which version of proxychains-ng are you using ?\n. which error ?\n. why does your proxychains not print version information ? (it should)\n. if that is so, someone needs to research which changes were introduced in 10.11 that breaks LD_PRELOAD and how to fix it.\n. possibly it's the guilt of this new \"feature\": https://en.wikipedia.org/wiki/System_Integrity_Protection\n. you could try to disable the system integrity protection (as described in the wikipedia article) temporarily to see if it makes proxychains work. if so, we can try to seek a permanent workaround.\n. @cache0928 it seems your toolchain is not properly set up, so it cannot find your system headers. i suspect you need to install \"XCode\" and configure homebrew to use it.\n. @Willian-Zhang thanks for testing. now we can look if there's a way to disable the LD_PRELOAD \"protection\" \"feature\" for handpicked applications, in our case proxychains-ng.\n. i haven't found any documentation about the LD_PRELOAD specific protection so far. we need to wait until more information is available (probably after the official release).\n. works for me on linux with wget. maybe mac's rand() is broken ?\nyou could try if you experience the issue with other programs (such as wget).\n. yeah that code looks suspicious (hideously complex).\n@asconix can you try if the change suggested by @ravomavain fixes the issue.\n. @asconix ping\n. can anyone using a mac show up and test if random chain is broken and if @ravomavain 's change fixes it?\n@ravomavain if you prepare a PR (and test it a bit) i'll probably merge it\n. @jaytaylor thanks for testing. however what i would like to know is not only if the fix works but also if random chain is really broken on mac (without the fix).\n. (for testing you could probably use 127.0.0.1, 127.0.0.2, etc)\n. @jaytaylor did you find some time to test if the random chain feature is broken without your patch ?\n. sorry, but since parsing of PAC files requires a javascript interpreter, this is way off the scope what proxychains wants to achieve. however i'm sure there are tools out there that parse the file so you can make them dump the proxy url and then use it in proxychains config.\n. this program here seems to do the job: https://github.com/pacparser/pacparser\n. interesting that you have several \"DLL init: proxychains-ng 4.10-git-10-g2237749\" lines printed.\nis that also the case with wget/curl ?\nit seems the error you're getting is because maven is translating the ipv4 address proxychains hands out (224.0.0.1) to an ipv6 address (::ffff:224.0.0.1:443) and proxychains fails to detect that its one of its internal addresses (which are used for remote DNS mappings)\n. @MatzFan please elaborate on \"linked dupes\". is there a possibility to use e.g. ssh with a softlink or a hardlink ?\n. @kakashisan how about trying the things recommended here ?\nand what is the error you get from scp ?. oh so the problem is that scp starts ssh from /usr/bin. maybe you can fix that by overriding PATH pointing to where your copy of the ssh binary is, for example:\nPATH=/Users/didisan/ proxychains4 /Users/didisan/scp -vvv didi@host:.bashrc new.file\n``\nthis assumes that \"ssh\" as well as \"scp\" are in /Users/didisan.. since a release with the ipv6 support is now out there and in use, reports will come automatically, i guess.\n. maybe you should report this issue in homebrew repo\nyour toolchains is not setup correctly, as it cannot find standard headers.\nas a temporary workaround you could try to search the location of stdio.h on your system and then add CPPFLAGS=-I/path/to/stdio_h to the configure invocation\nbut its likely that your homebrew doesnt work at all so you should fix your install.\n. maybe try \"gmake\" rather than \"make\"\napart from this i dunno, i guess there's a reason the text says \"Warning: You are using OS X 10.11. We do not provide support for this pre-release version.\"\n. you need to talk to the homebrew guys, really.\nthis is not a help forum about getting your mac os toolchain set up.\n. hi, it's the other way round: Armitage crashes random with Proxychaing 4.10.\nplease provide more information:\nconsole output of proxychains & armitage (w/ sensible information removed), and a backtrace of the crashgdb --args proxychains4 armitage armitage-options`\ntype \"run\" and when the crash happens \"bt\" and paste the output here.\ni suspect it's a bug in armitage so the developers of that program may be interested in your report as well.\n. if they provide a way to customize the \"launch metasploit\" command used, you could prefix it with proxychains and avoid that the heavy java framework gets LD_PRELOADED with proxychains.\n. remove the line \"quiet_mode\" from your config and try again\nsee also this: https://github.com/rofl0r/proxychains-ng/issues/78\n. openbsd support is currently non-functional due to some dynlinker issue that's impossible to debug (for me, as i'm lacking an openbsd developer qemu image with all the debug info, sources, necessary devel tools etc). if you feel that you may get it to work, you can start with the 4.10 release which compiles on openbsd (just check out the release tag or download the release tarball). if you have success, we can merge your changes into master and fix the incompabilities in the new ipv6 code.\n. if you can put that code into the right ifdefs for openbsd i'd happily merge the fix in form of a pull request.\nsomething like\n``` c\nif !defined(s6_addr16 ) && defined(OPENBSD_MAGIC_MACRO)\ndefine s6_addr16 __u6_addr.__u6_addr16\ndefine s6_addr32 __u6_addr.__u6_addr32\nendif\n```\nthe change would need to go into src/libproxychains.c after the inclusion of common.h since common.h doesnt include netinet/in.h which is necessary for the definition check\n. @cam13 could you test if this patch (applied to master without your patch) fixes the issue for you ? http://sprunge.us/RhUe\n(need to re-run configure)\n. yes, this is due to https://github.com/rofl0r/proxychains-ng/issues/78\n. @vonnyfly could you test if this patch (applied to master without your patch) fixes the issue for you ? http://sprunge.us/RhUe\n(need to re-run configure)\n. your proxy seems to be a local application. maybe it's misconfigured ?\n. oh btw you should put remote_dns_subnet 224 in your config and remove the 2 entries you have there\nthey overlap with your localnet and with the address of your proxy so thats a seriously wrong setup.\n. in that case it's your proxy thats misconfigured...\n. which option of proxychains would need completion in your opinion ?\n. patches welcome\n. when you use remote_dns, the dns name will be translated to an ip in the remote dns subnet.\nuse ip addresses rather than dns names and it will work as expected.\n. can you check if the older releases of proxychains-ng ( https://github.com/rofl0r/proxychains-ng/releases ) also exhibit this behaviour ?\n. i think as-is, this patch would create more problems than it solves, since this way we're basically sending an incorrect/hackish http 1.0 header.\na cleaner solution would be if we add a new proxytype in the config file ( http11)\n(and possibly http10 as an alias for http)\nand if it's used send a HTTP/1.1 header with hosts line, if not HTTP/1.0 without it.\n. i guess i'll do a release first with the new ipv6 support and then merge the patch as-is or like i proposed. that way users of the git version can test if the change causes breakage.\n. merged at last... it remains to be seen if we should bump the HTTP version to 1.1 as well.\n. thanks for the report. can you check if the debug mode works now as expected ?\n. thanks for your research.\nthe problem is that openbsd's fclose() calls proxychains close() function rather than the libc one (this happens before the hook gets installed).\nthis behaviour is strange since it breaks dlsym(RTLD_NEXT)-style LD_PRELOAD usage.\ni guess this should be reported to the openBSD developers working on the dynamic linker.\nmeanwhile can you test if this patch against master fixes the issue ?\nhttp://sprunge.us/hDCL\n. btw i was informed that it is a bug that openbsd's fclose() calls close().\nclose is not defined by ISO C; it's in the application namespace.\nint close(int x) { puts(\"xxx\"); } int main(void) { fclose(stdout); }\nthis is a conforming C program that has no output (close is dead code).\non openBSD it probably blows up. if you're subscribed to the openbsd mailing list it may make sense to report this.\n. hi @shaxo . could you test if current git master (without the previous patch) works (at least with wget, curl oslt) on openbsd ?\n. can you add some debug code to pc_getnameinfo to see which branches are taken etc ?\n. c\n        if(!proxychains_resolver) {\n                return true_getnameinfo(sa, salen, host, hostlen, serv, servlen, flags);\n        } else {\n                if(salen < sizeof(struct sockaddr_in) || SOCKFAMILY(*sa) != AF_INET)\n                        return EAI_FAMILY;\n                if(hostlen) {\n                        pc_stringfromipv4((unsigned char*) &(SOCKADDR_2(*sa)), ip_buf);\n                        if(snprintf(host, hostlen, \"%s\", ip_buf) >= hostlen)\n                                return EAI_OVERFLOW;\n                }\n                if(servlen) {\n                        if(snprintf(serv, servlen, \"%d\", ntohs(SOCKPORT(*sa))) >= servlen)\n                                return EAI_OVERFLOW;\n                }\n        }\nwhich branch does it take ? the if(hostlen) one ? if so we'd need to know the value of hostlen\n. also check if SOCKFAMILY(*sa) == AF_INET or AF_INET6\nc\nPDEBUG(\"SOCKFAMILY(*sa) == AF_INET: %d\\n\", SOCKFAMILY(*sa) == AF_INET);\nPDEBUG(\"SOCKFAMILY(*sa) == AF_INET6: %d\\n\", SOCKFAMILY(*sa) == AF_INET6);\n. would be helpful if openssh's ssh_connect_direct() would print gai_strerror(ret) rather than just reporting unspecified failure.\n. i've pushed new getnameinfo code, maybe it fixes the issue; although it looks very weird that salen is 0, possibly there's some memory corruption going on.\nalso note that this time the function get_hostfile_hostname_ipaddr fails, while earlier it was ssh_connect_direct\n. from sshconnect.c:\nswitch (hostaddr == NULL ? -1 : hostaddr->sa_family) {\n        case -1:\n                addrlen = 0;\n                break;\nsomething called get_hostfile_hostname_ipaddr with hostaddr == NULL, likely the code that checks if the ssh key is in known_hosts (check_host_key())\n. i can't help you with this since i dont own a mac, and this is an issue with homebrew (error in their recipe or your setup), so please ask there.\n. see #99\n. no, it shouldnt. proxychains-ng is used commonly with commandline applications and would make their output unparsable.\n. we need more details... please paste your entire config, info about your OS, proxychains version etc...\nthis [proxychains] Random chain ... 127.0.0.1:9050 ... 192.168.57.101:25000 <--denied\ncannot work since tor exit nodes dont know how to connect to 192.168.xxx.xxx\nhowever, if localnet is set correctly this shouldnt happen.\nwhat happens if you connect to 192.168.xxx.xxx on another port ?\n. try to comment out the localnet 127 stuff. iirc only one localnet is supported (may be wrong though).\n. i tested your scenario: here i can connect fine to port 25000 of a host in localnet.\nthe only difference in my config file is that i didn't omit [ProxyList] before specifying my proxy.\nappears to be an issue of the software you're using. did you test if connecting to :25000 without proxychains works ?\n. yes, that's by design: proxychains isn't a shell plugin.\nbut you can easily add a new alias that does what you want, i.e. pbubo=proxychains4 brew update && proxychains4 brew outdated'\n. @vikerian i believe you are mistaken.\nit seems steam is a 32 bit app so @alexgv99 needs a 32bit proxychains\nhint: make clean ; CC=\"gcc -m32\" ./configure ; make\n. @alexgv99 another thing: port 3128 is the default port of squid, so it's probably a HTTP proxy, not a socks one.\n. so yes, the problem is due to usage of 32 bit binaries and 64 bit proxychains.\n. are you aware of the fact that proxychains is TCP only ?\nUDP,IDCMP,raw packets etc are not supported. simple syn-scans and other TCP based scans should work, though.\n. which nmap version ?\ndoes it work if you specify the network interface to use, for example\n./proxychains4 -f /tmp/proxychains.conf nmap -Ss 192.168.1.10 -e eth0\n. yeah, nmap has some stupid (superfluous) code in it that tries to determine which network interface to use to send out packets, even if the user uses tcp options, so it could just unconditionally connect() and leave the decision to the OS.\nplease file a bug against nmap.\nin the meantime there exist 3 options to workaround it on the proxychains side:\n1) do not use a dns name, but a raw ipv4 address\n2) or disable proxy_dns in the config\n3) or do not use proxychains at all but nmap's integrated options to use a SOCKS proxy.\n. to get this fixed, we need to make nmap developers aware of the problem and get them involved. then we may be able to find a mutual solution. so someone needs to stand up and get in touch with them (maybe with a link to this thread).. good find. merged via https://github.com/rofl0r/proxychains-ng/commit/f85cecdabea90db31dc2891c404ccee4bc655354\n. maybe recompile your toolchain (gcc,binutils) with --enable-init-fini-array\n. you could try to patch out the gcc constructor code used to initialize the lib and rely on the lazy initialization to work (hint: grep for \"constructor\" and change the #ifdef __GNUC__ ... to #if 0)\n. did you run configure ? it has a check for this. please paste configure's output, thanks\n. thanks. can you paste the contents of config.mak after the configure run ?\n. so it works with gmake ? that's the only supported configuration.\n. try to run configure with --fat-binary i.e. ./configure --fat-binary ...\nyou may have to change that in the homebrew recipe.\n. it's normal behaviour that google has google's ip.\nhowever whatsmyip should print the ip of the proxy. it probably works if you run the firefox binary directly i.e. proxychains4 /Applications/Firefox.app/name_of_binary_here or if you just change the proxy settings directly in firefox (i.e. without using proxychains).\n. @XasaKura your PS output above seems to miss the output of make (compiler invocations etc). did you leave that away intentionally ?\n. well, in that case it is weird. maybe pastebin the entire output of running the brew install command to give us more clues what went wrong. i'm reopening this until we can rule out that there's something wrong on our side.\n. please report homebrew issues to the homebrew issue tracker, thanks!. running configure will overwrite config.mak, so it was probably the other way round.\nalso you can pass bindir and libdir as parameters to configure, so you dont have to edit at all:\n./configure --prefix=/usr/local --bindir=/usr/local/bin --libdir=/usr/local/lib --fat-binary\n. > The above steps did not work for me on OS X 10.12.5..\nthat's pretty vague. post more details, including brew output and error messages you get when using it. someone using mac may be able to figure out what's wrong, @geekwutom . @zhilevan i can't see anything wrong in the output you posted. 1) see which files proxychains installed by doing\nmake clean ; ./configure ; make && make DESTDIR=foo install ; find foo -type f\n2) delete them in your real prefix\n. likely a bug of alpine. since proxychains is by default built with debug info it should be sufficient to rebuild alpine with debug info and then debug it as you did in your first paste, however when lldb stops for exec you need to continue and wait for the segv.\n. looks like a double-free bug in the app\nmaybe try the same version you used on linux or report the bug to the devs.\nit's almost certain the bug happens without proxychains as well\n. you may try with current git; a problem was fixed that may be the cause of this.\n. use host my.cdn.proxy.provider.com or ping to get ip address, then use IP.\n. host is a command available on most unix'es, which resolves the ip address of the DNS name you pass.\nso you literally type that command into the shell.. unless you're using the 10.x.x.x subnet for your lan, you can try if setting remote_dns_subnet to 10 fixes it.\n. yes, remote_dns_subnet 10 only works when you're not using it already\n. you may use one of these blocks: https://en.wikipedia.org/wiki/List_of_assigned_/8_IPv4_address_blocks\nif you set remote_dns_subnet to 3, it could work, but you won't be able to connect to any servers belonging to \"General Electric Company\"\n. and does it work ?\n. well i guess it would be sufficient to change the ip address range that you use for your LAN to 192.168.x.x or 172.16.x.x and then use 10 for the localnet.\ni don't know what the exact problem is, it may be due to the fact that docker is written in Go which afaik supports only static linking.\n. ping uses icmp and raw sockets, both not supported by proxychains...\nit's also unlikely that your go program will ever work, since apparently go does not use libc, but does all syscalls directly.\n. what program are you trying to use @XadillaX ?\n. no, only outgoing connections can be redirected to a proxy.\n. try to use the full path to nvm binary\nexample\nproxychains4 /bin/nvm ls-remote\nsince you're using an apple its likely in another location though\nmaybe which nvm tells you the full path\n. and successive proxychains4 emacsclient ?\n. instead of  $ emacsclient file2.txt try $ proxychains4 emacsclient file2.txt\n. yes and no:\nyes, if you use an IP address to target your victim, the icmp/udp stuff will go out directly.\nno, if you use a DNS name and have remote_dns turned on, proxychains will make an internal mapping from a unroutable ip address to the target, however only tcp will be forwarded to there.\nfor more details  do some tests with your network traffic sniffer (wireshark for example).\n. pls paste the output of strace -f proxychains4 curl https://www.twitter.com/\n. oh and also try as non-root, i believe glibc has some security mechanisms in place when you use LD_PRELOAD as root or on suid binaries.\n. closing because of lack of feedback\n. does that also happen when you disable proxy_dns ?\n. would be helpful to see a backtrace of the \"hanging\"\n(attach to running process with gdb, hit ctrl-c and print a backtrace with 'bt' command)\n. thanks, this is exactly what was needed.\nplease report if the fix i committed does indeed resolve the issue.\n. if you can try another time...\n. nice, thanks for testing and the backtraces\n. programs written in GO are not compatible with proxychains since they do not use the system's libc, whose functions we hook.\n. please explain in detail which files you did md5sum on.\n. in case you compiled both git and tarball release with the same compiler and CFLAGS, that would indeed be strange. but in your case i strongly suspect PEBKAC, since you're not even capable of building a whole sentence.\n. just to make sure: can you try with latest git ? there was an issue fixed, and maybe it's related.\n. with \"latest git\", i refer to checking out the latest version of this repo\n. sorry, but without details i'm not gonna merge any build system changes.\nif you see the commit history of the makefile, anyone and his dog are very smart to fix the build for their system, but then broke it for others.\nso if you have a problem with the current Makefile, provide the necessary details for an analysis. that would mean the exact CFLAGS etc that you are using, compiler/OS versions etc and the exact error you're getting. i merged your second commit in the meantime.\n. @e7appew : i cannot see any attachments here\n. ah it's due to -pie, which tells the linker to create a pie binary\napparently since it comes later in the commandline, it takes precedence over -shared\nwhich makes me think that its probably a bad idea to apply USER_LDFLAGS to the linking of the dso. did you test if the dso produced with your patch actually works ?\n. can you run the command with strace ?\nstrace -f proxychains4 mycommand and then paste the output to a pastebin\n. probably due to #78\n. @Stupidism this issue here is about OS X so please post to the appropriate issue or open a new one. anyway according to your strace output here\nexecve(\"/usr/local/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/local/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/games/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/local/games/nvm\", [\"nvm\", \"i\", \"5\"], [/* 75 vars */]) = -1 ENOENT (No such file or directory)\nyou dont have a binary called \"nvm\" in your $PATH (environment variable) so i dont see how you can expect to start it when you type \"nvm\".. check the documentation if there's a way to run the server process manually, and then try to run it with proxychains.\n. there are several ways to start a child process (the exec* family of functions, see man 3p exec) and some of them allow you to start a process with a clean environment.\nin such a case the LD_PRELOAD variable will not be preserved, and the child process started without proxychains.\n. could you provide a backtrace of the crash ?\ngdb --args proxychains4 nmap ....options...\nthen type r and wait for the crash, then type bt and paste the output.\n. looks like a bug in nmap to me.\ncan you also paste a bt of the segfault (without dynamic chain)?\n. turn off proxy_dns or use 127.0.0.1 as your app server address instead of localhost.\nsince localhost is a name, not an ip, the localnet detection does not catch it, so the connection to the proxy is made which does the lookup of localhost and then tries to connect port 4343 on its own loopback interface.\n. what hinders you from compiling it under openwrt?\n. > the code run well on other system . \ndoes it run well on other system also if used with proxychains4 ?\n. i heard something about windows 10 being able to run native linux binaries, so it possibly works (but only when used with other native linux apps).\n. can't see anything wrong in the code. pls supply more detailed valgrind output, and further which OS, compiler, and proxychains version used.\n. c\n181: int ret = write(*destfd[dir], hdr, sizeof *hdr) == sizeof *hdr;\nhdr comes from\nc\n244:       struct at_msghdr msg = {.msgtype = ATM_GETIP, .datalen = len + 1 };     \n245:        if(sendmessage(ATD_SERVER, &msg, host) &&\nas you can see, the struct is initialized via C99 compound initializer.\n. btw your paste has this in it:\n==19222== Mismatched free() / delete / delete []\n==19222==    at 0x4C2C8FF: operator delete(void*) (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)\n==19222==    by 0x117304: CatchChallenger::EpollServerLoginSlave::tryListen() (EpollServerLoginSlave.cpp:258)\nthat happens before the uninitialized access in proxychains reported.\nthis means that the app you're running causes undefined behaviour, so anything can happen. fix your program first and then see if valgrind still complains.\nit probably doesn't when proxychains is used with a correct program.\n. does this happen only with the target application npm ?\na possible cause could be that npm does unset all environment variables it doesnt know.\nin our case we need PROXYCHAINS_QUIET_MODE to be set to 1.\n. i'm a bit irritated about the number of\n[proxychains] DLL init: proxychains-ng 4.11 lines you get. this code should only be executed once (the whole init stuff).\ncan you attach a debugger and see why its called more than once ?\nor add -DDEBUG to your CFLAGS when building so we can see from where it's called.\n. very interesting/confusing.\n- the gcc_init() code is called multiple times, even from the same PID\n- that means pthread_once() in OSX doesn't work, or at least not in the case of preloading or when called from ldso constructor.\n- any variables set during the constructor call are \"lost\".\n  this looks like the dynlinker would spawn a lot of forks before running the constructor code, so every process has its own view of the memory. however that cannot be the case since the first couple calls to the init function seem to come from the same pid.\nsince the gcc constructor code seems broken for OSX, you could try to change this line in libproxychains.c from\n``` c\nif GNUC > 2\n```\nto\n``` c\nif 0\n``\n. would be more interesting with debug output...\n. note that i mistakenly closed this issue (but reopened it at once); i didn't intend to discourage you from further investigation.\n. sorry, but i don't get your point. could you elaborate on what you think is interesting ?. are you sure what ubuntu ships is actually proxychains-ng (this repo) or the old, old v3.1 version ?\nusually when the distributor did no custom changes, proxychains-ng can be started viaproxychains4`.\n. does it work now ?\n. can anyone else here who has ubuntu 14.04 (or any other ubuntu) show up & report if this command works for him ?\nproxychains4 wget https://downloads.gradle.org/distributions/gradle-2.14.1-all.zip\n. tell the brew package maintainers to add --fat-binary when they call configure.\n. sorry - we can not help you here with brew problems. please open an issue on the homebrew issue tracker, thanks.\n. the syntax for specifying a config file is -f, not -c\nso what happens to you is that proxychains thinks it should call a command -f which does not exist.\n. @ucoker : try which curl and then pass the full path to curl to proxychains4.\nwould also be interesting to get the output of proxychains4 bash -c export.\n. @ucoker: that is an ancient proxychains version (since debian does still not have proxychains-ng in their repos, i guess), but when it works for you, fine.\ni would however still be interested in why it didnt work, so if you could follow the steps i outlined above and provide the requested feedback, it could be helpful for us.\n. sweet. thanks for info.\n. no, that's currently not possible.\ntypically, in such a use case, one would start different proxychains processes with temporary, generated config files from a master process.\n. uhm. how did you build proxychains-ng ? it has a configure check so we don't have to hardcode a list of currently broken systems into the code.\ngenerally if you need to #ifdef __SOME_SYSTEM you're doing something wrong: you're assuming SOME_SYSTEM will never change. therefore you should check whether the system you build on uses s6_addr32 or __u6_addr.__u6_addr32 - exactly what we already do.\n. what's the output of configure ?\n. aha, so the bug is that OSX (which version?)'s mktemp misbehaves.\n. it should add '-Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' to your CFLAGS in config.mak\ncan you paste your config.mak ?\n. just to make sure: did you have exported CPPFLAGS on your system ?\nyou can run echo $CPPFLAGS in your shell to find out.\n. so yeah, in that case the problem was because your CPPFLAGS were overriding the ones set by the build system. this is intentional because we want to mimick autoconf behaviour as nearly as possible. in this case though the s6_addr32 macro is essential to compilation so it doesn't make sense to make it overridable. i'll think about it some more to find a clean fix. I disagree with the removal of config.mak: it is against the users expectation (at least if he's used to autoconf) that make clean will remove his configuration and he will have to re-run configure!\n. hello @jaytaylor , could you test my commit in the branch OUR_CPPFLAGS and report if that closes this issue ? thanks!\n. @jaytaylor thanks for testing!\nas for merging this PR: aren't we done yet ? or have i overlooked something essential apart from your personal vim config ?\n. well if you care enough, please make another clean PR on top of current master, so we can keep the commit history straight.\ncheers!\n. thanks for your PR. in order to keep the commit messages readable i would like you to reformat your commit message in such a way as:\n- all lines < 80 chars because we want them readable in a terminal\n- first line should be a short explanation of what the commit does\n- other lines can give detailed info\n- referal to PR or issue numbers\nso a good commit message would look like\n```\nfix random_chain on mac\non mac, random chain was broken and returned always the last\nproxy from the config file.\nuse fix as suggested by @ravomavain.\ncloses #75\n. merged via 0f6b226\n. yes, that is by design. proxyresolv is no longer _required_ for proxychains-ng itself to work, and because it has external dependencies (dig program), it only ships as a bonus in the tarball - that means the onus to install it is on your side.\n. see https://github.com/rofl0r/proxychains-ng/issues/78\n. (hint: if you would have read README, it would have taken you there as well).\n. please formulate what you want to achieve in words instead of ssh command line options, so people that don't know ssh options by heart can help as well.\n. do you have a proposed fix ? and maybe @crass, the original author of the code has a suggestion ?\n. is it obligatory to use pedantic warnings ? this all seems pretty useless given that proxychains is basically a hack and relies on GCC behaviour anyway.. i cherry-picked the commits that are acceptable ( https://github.com/rofl0r/proxychains-ng/compare/6dcaf53...5ed5089 ) ; if you want you can submit a new PR with the (void) write thing.. paste output of\n`which docker`\n`echo $PATH`. interesting find. do you have an idea why that is so ?. yes, proxychains uses both poll and select internally:\n./src/allocator_thread.c:       while((ret = select(readfd+1, &fds, NULL, NULL, \n./src/core.c:           ret = poll(fds, nfsd, time_remain);\n./src/core.c:           ret = poll_retry(pfd, 1, tcp_connect_time_out);\nbut i don't see yet how that can disturb someone else's use of epoll.. oh, so nginx `*calls*` proxychains-ng ? how did you configure that ?. you're doing something wrong, probably.\nhow do you call configure and make, and do you have CC,CFLAGS,etc exported in your env vars?. the intended way to use it is:\nCC=foo-gcc CFLAGS=-funroll-loops ./configure\nmake\n+ when you export CC etc (and it is set to something different than what you passed to configure), this of course breaks things, just like it would when you use autoconf.. o_0 i'm astonished but you're right (regarding CC, but not the other vars). i'll merge your PR, but with a less hostile commit message.. maybe you need a 32bit ld.so ?\ntry to look into/edit steamcmd.sh and put\nexport LD_PRELOAD=/usr/local/lib/libproxychains4.so\n```\njust prior to where it starts the real steam binary, and do not use the proxychains4 wrapper.\nprobably the shell script is running some native (64bit) tools like awk, sed, etc before it starts (the real) steam.. > it does solve the preload issue but still throws out 407 error\nyour proxychains.conf is correct and working ? can you paste the proxychains output when steam binary is started just with LD_PRELOAD ?. note that you can also use ssh -D 1080 user@serverB to create an encrypted ssh tunnel to server B and spawn a local socks5 proxy listening on port 1080 where you can connect your stuff to via proxychains.. btw, i have an application that's intended to keep an ssh-socks5-tunnel alive by doing continuous connectivity checks, since ssh connections tend to get stuck after a while:\nhttps://github.com/rofl0r/rocksock/blob/master/examples/ssh-socks-restart.c. libproxychains4.so should have a DT_NEEDED entry for libpthread.so \nreadelf -a libproxychains4.so | grep -i NEEDED. since your libproxychains.so has a non-standard name i suspect the author of the gentoo recipe did something unintended.\ntry compiling proxychains by hand with configure and make and see if that works.. no, it's missing libpthread.so. did the gentoo devs fix their broken recipe ?. duplicate of https://github.com/rofl0r/proxychains-ng/issues/153. proxychains is not about http, it is creating generic connections over different types of proxies using one or more proxies.\nyour use case is only for scenario http connection over http proxy.\nalso, since it requires injecting these pseudo-auth headers, proxified app is probably custom program or script, so it should be easy to equip it with http proxy function directly.\nusing headers for such a type of authentication looks like cheap hack though.\nas for implementation of this feature:\ncurrently proxychains creates chain of proxy connections when libc calls connect().\nthis is prior to any data sent from the client, so proxychains cannot know which headers will be in subsequent http request. implementing it would require postponing the connect after first send was executed, which means if connection fails we cannot return proper error code at the right spot. additionally parsing first packet for HTTP stuff can introduce vulns.\nso in light of all this it seems like a bad idea implementing all this just for one really exotic and hackish use case.. yes. during connect(), HTTP CONNECT is sent to target proxy. this happens before hooked process sends data, which will contain HTTP request for destination host.\nsince we agree that implementing it is not feasible i go ahead and close this.. which crapintosh version ?. did you see #78 ?. is it really just a warning ? it may actually render proxychains non-working. i do however not know how to fix at the moment. supposedly they want a signed binary, someone would need to create signed builds for OSX by subscribing to the Apple Developer program. that however\nkinda defeats the purpose of open source.. what does not work? it seem it works with bash. maybe try with wget or curl ?\nalso provide build log, in case you built from source, if not, tell where you got proxychains from.. the answer you got there is accurate. there are however valid reasons why one would want to use proxychains with firefox: it's easier to just prefix the firefox command with proxychains when you want to run it with tor, and leave it away when you dont want to.\nhowever a separate profile might be the better tool for the job.\ni don't see how having proxychains' second thread could prevent firefox from using a sandbox, so your best bet is to open an issue in the mozilla bugtracker and explain that there are valid reasons to preload other things than just nvidia dlls.. maybe you need to tweak the timeouts. tor can be slow at times.. how exactly do you cancel data transfers ?. please try out the patch mentioned above this comment ^\nit's available when you pull from git and checkout the branch EINTR.. hi @dmaj. could you please try if the patch fixes the issue ? thanks.. are you aware of the fact that \"google.com\" is not a program ? even if the .com extension suggests so to a DOS veteran...\nyou gotta call proxychains4 some_program google.com where some_program can be one of wget, curl, firefox, lynx .... proxychains 3.1 is no longer supported. try the latest release, proxychains-ng 4.12.. lol. proxychains is certainly not the reason for your network issues, unless you've configured it wrong and exported LD_PRELOAD globally, which i hope you didn't.\nanyway, here's what your asking for:\nrun make install and look for which files got installed, then remove those manually.. we don't use cpu_set_t in proxychains.\nthe error you're getting is because your libc headers are somehow broken.\nprobably this testfile here will cause the error too:\n```\ninclude \nvoid main() {}\ni'd report it on the kali bugtracker.. can you figure out which function it is calling ?\nyou could set breakpoints (with gdb) on the following functions:\nconnect\nsendto\ngethostbyname\ngetaddrinfo\nfreeaddrinfo\ngethostbyaddr\ngetnameinfo\n```\nand then see which one gets hit.. good work tracking down the issue!\nsorry but i dont understand what you mean with:\n\nbut I don't know whether other arrival\nI also want to use it to agent for the DNS\n\ni guess with this you mean you want to do DNS resolution on the proxy (i.e. proxy_dns). to further investigate what's happening, you can add the following line at line number 737:\ndprintf(2, \"%s\\n\", name);\nand tell me what it says (after recompile).. and t2 has an entry in /etc/hosts, right ?. why do you add public internet ranges to localnet to begin with ?. well, seems you are the only one doing that so far.\nanyway, if you need more than 64 localnets, edit this line in core.h and recompile\n```\ndefine     MAX_LOCALNET 64\n. i'm not familiar with mongodb, but it's a good start that you know which versions work and which don't. to find the exact cause of the issue, you could try to `git bisect` on the mongodb git repo to try to find the exact commit that broke it. with that knowledge we can then start looking for a potential bug in proxychains or mongodb.. i don't deny that there may be a bug in proxychains, but your \"it works with X so the bug must be in Y\" logic is flawed. in any case, it would be very helpful to see which change in mongodb causes the bug (whereever it is) to manifest. ~5000 commits may sound a lot, but with `git bisect` you should only need at most 12 tries to find the offending commit (i.e. 12 times recompiling mongodb from source).. good find! you can probably fix your issue by manually using another network implementation.\nhowever it'd be nice to know what the ASIO interface does differently, that causes the bug to surface.. oh, i thought that since it looks like they have \"pluggable\" networking implementations (suggested by example by their usage of the term \"default implementation\") it's possible from the configuration side to select a different impl, without having to change their code.. anyway, maybe it is helpful when you compile proxychains in debug mode (CFLAGS=-DDEBUG ./configure) to see what's going on when the connection times out. looks like the problem is because that ASIO network impl uses sockets in non-blocking mode.\nthe relevant code is in timed_connect() in src/core.c. i can't tell from the top of my head why it doesn't work as it should. do you feel like you could debug it ? you could run the entire command chain in gdb and (gdb --args proxychains4 mongo --foo) and set a breakpoint on timed_connect.. hmm. can you try if commenting out line 184 in core.c makes it work ?diff\n- fcntl(sock, F_SETFL, !O_NONBLOCK);\n+ //fcntl(sock, F_SETFL, !O_NONBLOCK);\n. please try the patch i pushed to branch `nonblock`. oh, i made a mistake.\nthis here\n`fcntl(sock, F_SETFL, flags & (~O_NONBLOCK));`\nshould actually be\n`fcntl(sock, F_SETFL, flags | O_NONBLOCK);`. in case that doesn't work either, i force-pushed a new commit to `nonblock` branch, hopefully that fixes it!. did you test the new patch, or the one-line change from my previous comment ?. it's weird that your previous log has this:\nDEBUG:\npoll ret=1\nsince the new commit doesn't actually call poll anymore with a non-blocking socket.\nare you sure you fetched my latest change from `nonblock` branch ? maybe there was a problem because i overwrote the earlier commit by force-pushing a new one ?. thanks! that means that the socket at this point was blocking, so i looked why and found that we actually create a new socket for the connection and then dup() it over the original one.\ni pushed a patch to branch `nonblock2` (note the **2**).. a curious issue...\ncan you merge nonblock2 and my first patch from nonblock? that one seemed to work for the connect step. https://github.com/rofl0r/proxychains-ng/commit/6d90d82a7b0998db5d29bf563ca6cefc72080dbb (you can still get to the commit via its sha1 hash, even though i overwrote it by force-pushing). i don't have docker (it requires a go compiler), but i'll try to create a test program using nonblocking sockets. if we can't solve it this way, i can look into getting a go compiler bootstrapped... but i'd rather avoid it (i'm using my own custom linux distribution, [sabotage linux](https://github.com/sabotage-linux/sabotage)).. i've been able to reproduce the issue now, however it's not straightforward to fix. the problem is that proxychains creates its own socket to do the connection, than dup2()s it over the original fd, which causes the epoll loop not to get woken up. a possible solution is not to use a new socket, however that will probably cause issues when the app requests an AF_INET (i.e. ipv4) socket, and one or more of the proxies in the chain are ipv6 (AF_INET6 sockets) or vice versa .\nwe could of course differentiate between blocking and nonblocking sockets and treat them differently, but i'm looking for a clean and general solution.. does it help if you change the timeout variables in proxychains.conf ?\nfrom the conf:\nSome timeouts in milliseconds\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nalso, i did use proxychains in the past with ssh and i don't think i experienced such a problem.\nmaybe it's the fault of the proxy ? in such case it may help if you make ssh send pings more often: http://stackoverflow.com/questions/25084288/keep-ssh-session-alive. well, apparently the connection to the proxies fails for some reason.\nas for \"escaping hundreds of ports\": that's normal if you use unreliable proxies.\nif you want to find all open ports reliably in such case your best bet is to do several scans over the entire range and filter out duplicates.. the location of the config file is not dependent on your operating system, it's dependent on how you run configure :)\nthe variables that influence where the conf file goes to are:\n--sysconfdir  - specify exact location of \"/etc\", overriding --prefix\n--prefix - general prefix where /etc/, /lib, etc are sought under.\nso this PR is bogus. if you feel the configure command line options are under-documented, you may open a PR that clarifies its usage.. dunno, maybe compile with CFLAGS=-DDEBUG ./configure and paste debug output. i didnt try; have other things to do. i merged roundrobin code written by @crass to do him a favor; but he since disappeared. i never used it. if you can hunt down the bug or provide debug info which helps me analyzing it, well; we may be able to fix it. if not, you'll have to live with the bug, i guess.. now that i think about it, this behaviour seems logical. shell starts a number of independent processes, and each one starts with a fresh round-robin-state.. i suppose the point is that it's meant to be used for a long-running process, since it cannot work like that with independent processes (unless you start hooking execve too and communicate a global state between all instances, which opens a huge can of worms). yeah. you could put the proxy-selection logic into the bash script itself, and write a different config file for each proxychains invocation.. proxychains uses either the system dns server via libc routines, or when remote_dns is enabled relays the lookup to the proxy server. so i suppose you can just edit /etc/resolv.conf and thats it.. @tangxinfa that is true for proxychains 3.1, but not for proxychains-ng.. please report output from debug mode. you need to recompile passing the following options to configure: `CFLAGS=-DDEBUG ./configure`. looking at that nylas issue, maybe you need to enable the localnet for 127.0.0.x in proxychains.conf (it is already there as a commented out template in the default config).. @yi-ji you are right, but unfortunately i cannot tell you what the issue is, due to lack of apple hardware.\ni suspect it could be related to the issue i tried to fix in f1e5f2ba0153a1d3a9bb3c3dae3925236c58b077 .\nso if you feel adventurous enough you may try to disable the \"close\" hook in libproxychains.c:\ncomment out this line `SETUP_SYM(close);`, this line`while(close_fds_cnt) true_close(close_fds[--close_fds_cnt]);`  and this block:c\nint close(int fd) {\n...\n}\nyou can comment out the block by putting it between `#if 0` and `#endif` statements.\nthat could eventually fix the issue, but then proxychains will not work anymore with programs like ssh that greadily close all open fds on startup (that's why the close hook was introduced). it would however already be helpful to know if that is causing the issue.. that's weird, your commit looks correct. maybe you forgot to install the newly built libproxychains.dylib after you compiled it ?. well, the way proxychains does things is a hack and will always stay a hack (as mentioned on top of the README).\napart from stepping through the code and finding the exact issue you encounter (which would require a mac), the only thing i can think of i could do to help you is introduce a proxychains-3 compat mode which disables 2 things:\n1) close hook\n2) remote-dns, and generally doing all DNS resolves through proxyresolve shell script (which requires dig and a DNS server which accepts TCP requests. that way the code doesn't have to touch pthread code etc. this is much slower, and obviously doesn't work with .onion urls, but it's more robust.. i guess we could improve debug mode to output that we deal with UDP... but yeah, the address family you got there is weird. check your mac's include directory and grep for AF_INET or PF_INET to find out which named option 32 corresponds to.. thanks, according to you pastec\ndefine AF_SYSTEM   32      / Kernel event messages /\nthat means the thing you were looking at was some sort of kernel event socket(?) communication.. your post is not very helpful. what do you expect me to do, download the program, compile it, and try to find the bug for you? that's not how it works.... Ah, it hangs. first bit of information successfully submitted. anything else i should know about your issue?.\nonly numeric ipv4 addresses are valid\n```\nyou already posted the answer - it's not possible due to the way DNS resolution is internally done.. well, actually there is a way - you can make a script that does the DNS lookup without proxy, and then creates the config file with the numeric IP on the fly.. no, that is not possible. also it's questionable whether it would make sense since you cannot un-proxify existing connections... but it would theoretically be possible to implement it using a signal handler for a specific signal such as SIGUSR1 that sets a global flag and depending on whether it is set or not the hooked functions would just call the original libc function, or do the usual redirects. but then applications might use that signal for some other purpose, so proxychains would then turn off and on \"randomly\".... no, i won't add it... but in short, the change would involve installing a signal handler for SIGUSR1 from init() which sets global variable and depending on it you call true_connect() etc from hook functions\n```\nint disable_proxychains = 0;\nvoid sigh(int x) {\n  disable_proxychains = !disable_proxychains;\n}\ninit() {\nsignal(SIGUSR1, sigh);\n...\n}\nint connect(a, b, c) {\n  if (disable_proxychains) return true_connect(a, b, c);\n  ...\n}\nint sendto(a, b, c) {\n  if (disable_proxychains) return true_sendto(a,b,c);\n  ...\n}\netc. the same repeated for all libc functions that are hooked (grep for `true_`)..\n2) only the one with the specified PID\n1) show your code i guess ?\n``. sigh. you're not running one long-living process as you initially told, you're running many short-living jobs from a script. that means nothing prevents you to run wget from inside your script with or without proxychains, according to external input (maybe presence of a specifically named file).. https proxies are currently not supported, and i believe adding support for it would not be straightforward (for example using openssl,etc you can SSL-wrap a socket, but if there's more than one SSL-proxy in the chain, how would you wrap the socket again ? i doubt that it can be done easily). additionally, pulling in dependencies to another library can break all sorts of things considering we're hooking libc. so i dont see this being implemented anytime soon. maybe kneesocks would be a more appropriate tool to add support for this, since it has to deal with a single proxy only.. i merged the mem-leak commit, good find. as for the 2nd commit, i don't see a good reason why we should protect the user from himself.. i think it'd make more sense to check the input buffer length and throw an error if the line in config file exceeds 1024 bytes, so we don't have to mess around with every single format string.. ok, can you please open a new PR with the suggested change ? thanks. i can't see any error.. see https://github.com/rofl0r/proxychains-ng/issues/78 you probably gotta turn of SIP completely. proxychains 3.1 is not supported here.. there are 2 possible scenarios where you would need to hide the data:\n1) multi-user system with trusted admin. you could prevent others from reading the file by setting the right permissions.\n2) untrusted system under someone else's control (for example a shared VPS). you could hide the config file contents using crypto but then the SOCKS/HTTP passwords would still be sent in cleartext over the wire, so the rogue admin could grab them with wireshark or tcpdump.\nso imo its questionable whether such a feature makes sense.\n. how would you encrypt your traffic ? you mean like in usingproxychains4 curl https://someserver` ? in that case even though the HTTP procol is encrypted, the SOCKS5 requests themselfes still aren't.. how do you prevent your VPN credentials from being stolen though ?. well i suppose you need a password or private key file to use VPN ?. ok, and how do you hide that ?. well yes, since you're worried about getting your proxychains.conf leaked, you might as well worry about your VPN private keys, assuming they're used on the same box.. tbh i think this feature is overkill and adding it could have considerable regressions, if it involves running a subprocess or a third-party library since any usage of libc functions inside a foreign process can have unwanted consequences. the imo only feasible way to implement this feature would be by using embedded tweetnacl crypto.. there have been only 2 minor fixes, i guess it would be easier for you to either just apply those 2 patches on top of the 4.12 tarball, or grab a github tarball from the latest commit id.. it depends on the protocol and application. for example you might proxify a HTTP connection, but your browser sends cookies and other unique data that could be tracked back to you.\ni assume that in your scenario \"Server B\" is the proxy. if it is the only proxy you're using, someone eavesdropping on it can see the incoming and outgoing connections as well as the unencrypted SOCKS headers, so he knows quite well about your activity.\ntypically proxychains is used with remote_dns turned on, so all DNS requests are done on the proxy, in which case no DNS lookup info from your PC gets leaked.\nso if there are no leaks inside the protocol/application data itself, server C will only see a connection originating from server B.. if your build environment does not offer sys/socket.h, there's no way it could ever work, i'm afraid. also, i doubt that msys actually implements a dynamic loader that is compatible with LD_PRELOAD. i guess there's no way to make this work on M$ OS.. 1) CMake sucks in every regard\n2) Autotools sucks in that:\n - generated code is huge, often way bigger than all the code in the project\n   in the case of proxychains, getting rid of autotools shrinked the tarball about 90% iirc\n - it is hard to read,write, and understand the M4 gibberish and its utterly underdocumented\n - but it's portable, and well-established, so i try to mimic all aspects of its user-facing interface. thanks for the debug output. as we can see there, gcc_init and all the other init code is called twice (even with same PID!). this shouldn't happen, and might be the cause of the crash.\nit looks to me as if Mac OS X' implementation of pthread_once() is buggy.\nhere is a simplified test case\n```c\ninclude \ninclude \npthread_once_t init_once = PTHREAD_ONCE_INIT;\nstatic void do_init(void) {\n    dprintf(2, \"this message should be printed only once\\n\");\n}\nattribute((constructor))\nstatic void gcc_init(void) {\n        pthread_once(&init_once, do_init);\n}\nusage on linux:\ngcc ponce.c -fPIC -shared -pthread -o ponce.so\nLD_PRELOAD=./ponce.so git status\n``\nusage is slightly different on mac os, for example the extension is .dylib and LD_PRELOAD is namedDYLD_INSERT_LIBRARIES. maybe different build options are needed too, compare with the build output when building libproxychains.dylib. (check also main.c for environment variable usage). once you can get that test program to print\"this message should be printed only once\"` twice, which it shouldnt, you can use that to file a bug report with APPLE.. perfect! so it's finally confirmed that Apple's libc is broken.\nnow the question is, who files the bug with them ?. i don't think that will happen, since i don't even own a mac.... does that mean you will file the issue too, @byronyi  ? that would be great. and if possible, paste a link here to the bugreport.. well, then i guess its time for someone who cares to launch gdb and debug the issue.\ndont wait for me, the support for mac os x is only a bonus and i couldnt care less.. > After discussing with Apple's engineer, it seems that cargo, git or perl called exec() on itself, which causes that message to be printed more than once.\n\nSo pthread_once works fine and it is not the cause of this bug\n\nthinking about it again, it appears the Apple engineer is wrong. pthread_once should always ever be called once, even after fork + exec. you can try the same tests on linux, there the message will only be printed once.. i've seen this: https://github.com/Qusic/proxychains-ios - no idea if it's any good though.. the repo i linked to does use my version... but it seems to require some additional stuff.. yeah, proxychains only works on a per-application basis. on a real computer you can \"trick\" though and start your shell (bash) with proxychains, so all apps started from that shell will be automatically proxified.. no\nbut using linux's iptables firewall it is possible to configure a system in a way it routes all traffic over a proxy (and drops the traffic than can not be proxified) - but that is probably not applicable to iOs.. not really. though the README mentions the IRC channel which can be used for discussion related to proxychains.. yes, it is possible. you just need to code it.. C is not ugly, it's beautiful and elegant in its simplicity. what is ugly is if people that don't know better litter it with #ifdef's on their quest of doing non-portable things... anyway, look at the function select_proxy() in core.c, which is responsible for selecting the proxy, as its name suggests. you may also want to compile proxychains with -DDEBUG in CFLAGS to get more debug output.. so i suppose the answer is in #159. proxychains hooks to dynamically loaded libc.\n1) go doesn't even use libc, it uses its own syscall wrappers\n2) go doesn't use dynamic linking, it uses static linking\nso there's no way we could use this technique with go. the only way to hook into go binaries would be by using ptrace to hook the system calls themselves, which is hairy and platform-dependent - i.e. it means it would be a lot more work to produce and maintain.\nso i fear it is out of scope for this utility.. what i find a bit disturbing in your paste is that the \"DLL init\" message is displayed several times.\nin order to debug the issue, start with something simple.\nif proxychains4 curl google.com works, then it means the proxy-dns part works.. what's the server software running on that http proxy ? squid ? tinyproxy ? ... ?. version ? can you share its configuration ?. ok, thanks. since i am quite busy with other things i'd be glad if someone watching this repo could try this out by setting up a squid instance and trying to reproduce the issue.\n(eventually looking at the transaction in wireshark, and submitting logs, pcaps, etc).\ni have a suspicion that squid may not like the HTTP/1.0 we pass, maybe changing the code to send HTTP/1.1 may fix it already.. unset LD_PRELOAD. maybe telnet on OSX is a static linked binary ?\nanyway, that's why proxychains-ng has by default verbose output, so you can immediately see whether it works.\ni'm talking about output like \"chain <-> 127.0.0.1:9050 <-> target\"\nso without seeing the ouput of your telnet invocation, i cant tell you what the problem might be.. yes, that is possible. you need to configure squid to use the school proxy as upstream proxy. you can test if it works by using e.g. firefox and put your local proxy in the network settings.. do you get the line [proxychains] DLL init: proxychains-ng 4.12 several times ?\ngenerally speaking, the error you get is because you either hit a bug in mac os' libc (very likely) or a bug in proxychains (less likely) which causes some sort of undefined behaviour, and it happens to manifest in that ssl lib. though i guess it could be interesting to debug what happens at that spot where the assertion fails.. can you paste the code from there ?\nAssertion failed: (ctx), function digest_update, file /BuildRoot/Library/Caches/com.apple.xbs/Sources/boringssl/boringssl-109.20.5/apple/crypto/digests.c, line 49.. that doesn't seem to be the right file though :/ even the copyright header there goes way beyond line 50.... i don't know, sorry.. oops, yeah i had temporarily no access to sf.net. its there now and should be ready for dl in a few mins. actually, you can run ./proxychains4 straight from the build directory... \nanyway. which prefix did you use when running ./configure ?\nif you used ./configure --prefix=$HOME/usr then everything should work as expected without having to change stuff in main.c...\nso i think your problem is PEBKAC.. when you configured proxychains, did you use the character ~ to denote your home dir ? this will not work since that is shell expansion, and proxychains doesnt use the shell.\nyou need to use /home/username literally.. you're wrong.\n```\nroot:/$ cd /home/\nroot:/home$ mkdir foo\nroot:/home$ cd foo/\nroot:/home/foo$ tar xf /src/tarballs/proxychains-ng-4.12.tar.xz\nroot:/home/foo$ cd proxychains-ng-4.12/\nroot:/home/foo/proxychains-ng-4.12$ ./configure --prefix=/home/foo/usr\nchecking whether netinet/in.h defines s6_addr16 ... yes\nchecking whether $CC defines OpenBSD ... no\nDone, now run make && make install\nroot:/home/foo/proxychains-ng-4.12$ make -j8 >/dev/null 2>&1 && make install\n./tools/install.sh -D -m 644 libproxychains4.so /home/foo/usr/lib/libproxychains4.so\n./tools/install.sh -D -m 755 proxychains4 /home/foo/usr/bin/proxychains4\nroot:/home/foo/proxychains-ng-4.12$ make install-config\n./tools/install.sh -D -m 644 src/proxychains.conf /home/foo/usr/etc/proxychains.conf\nroot:/home/foo/proxychains-ng-4.12$ cd ..\nroot:/home/foo$ proxychains4 curl google.com\n[proxychains] config file found: /home/foo/usr/etc/proxychains.conf\n[proxychains] preloading /home/foo/usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.12\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0[proxychains] Stri\nct chain  ...  127.0.0.1:9050  ...  timeout\ncurl: (7) Couldn't connect to server\nroot:/home/foo$\n```. ",
    "xclr8tr": "hi,\nI added back in to your config the the seven lines that were missing regarding:\n' By default enable localnet for loopback address ranges\n' RFC5735 Loopback address range\nlocalnet 127.0.0.0/255.0.0.0\n' RFC1918 Private Address Ranges\n' localnet 10.0.0.0/255.0.0.0\n' localnet 172.16.0.0/255.240.0.0\n' localnet 192.168.0.0/255.255.0.0\nand it works perfect and is just as you said.\nmy guess is that I only need the un-commented line or the first three lines.\nIs it fine to leave it this way, will you be adding it back into your fork or is there\na security risk in having it this way...  I will defer to your judgement\nYes I use it with TOR and a multitude of other ways thus my concern if\nit will cause a DNS leak or other breach of security.\nThanks\nxclr8tr\n. Sounds good, still not clear as to whether you see this as a security risk i.e. DNS leaks etc...\nI have other measures in place that I can use like Erics IPTables_TORify which reduces the need\nfor proxychains at the same time though being much more restrictive... different ways to skin this cat ;)\nI think leave the line in and commented with appropriate notes or warning otherwise people like me will\nsuddenly need it and type it in  or botch the copy paste cause we're in a hurry etc... \nThe majority of the people I know are still on 3.1 and will be slow to change but when they decide to they all will at about the same time as it is part and parcel to our world...  and for those who use it to escape oppression (GFW), a DNS leak can mean life or death... just a reminder to all who work on projects like this to think outside the box about who may be using your end product and the consequences should you fail to do so.\nPutting up a star now ! !\nxclr8tr\n. Hi rofl0r,\nI'll have to check that out, I didn't see that fork i don't think...\nI think though that we can already do that even with yours # proxychains4 gnome-terminal\nNow everything I do in the terminal is proxified.\nBut you are right in the sense that it creates a false illusion that everything is torified when it is not.  And if you promote that illusion that is bad...\nThat is why I use my friend Eric's  IPTables_Torify because when it is activated it creates an environment where all dns is torified automatically and all udp and icmp traffic is stopped... no communication is allowed out other than that which you have initiated and everything is channeled through TOR 9050. It works so well that you literally do not need proxychains...  a bit restrictive but not unlike the Tails (https://tails.boum.org/) project at the torproject.org but less restrictive in that sense.\nAnd luckily I do not as of yet live under such a fascist regime and will continue to work against those who would try to bring it.\nI will try to find this fork that you speak of\nxclr8tr\n. Hi rofl0r,\nJust for fun i ran telnet, wget, curl through Tor with \"iptables_torify\" which is from EricPaulBishop on Git\nMaybe that is what you meant by torify as it runs as a service called torify, a little confusing, as it turns Tor into transparent proxy I think that's how you'd describe it...\nthese were run from an ec2 ubuntu 12.04 with Tor and iptables_torify and without proxychains as seen below.\nHope that was what you were looking for...\nxxx'd out my ip for the hell of it :)\nTelnet:\nroot@ip-10-xxx-xxx-xxx:~# telnet www.google.com 80\nTrying 173.194.73.147...\nConnected to www.google.com.\nEscape character is '^]'.\n^C\nConnection closed by foreign host.\nwget:\nroot@ip-10-xxx-xxx-xxx:~# wget ifconfig.me\n--2012-09-17 16:04:17--  http://ifconfig.me/\nResolving ifconfig.me (ifconfig.me)... 27.120.101.66\nConnecting to ifconfig.me (ifconfig.me)|27.120.101.66|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: unspecified [text/html]\nSaving to: `index.html'\n[   <=>                                 ] 11,307      25.0K/s   in 0.4s\n2012-09-17 16:04:21 (25.0 KB/s) - `index.html' saved [11307]\ncurl:\nroot@ip-10-xxx-xxx-xxx:~# curl ifconfig.me\n88.198.100.232\nroot@ip-10-xxx-xxx-xxx:~# \n. Hi rofl0r,\nThis seems to be an answer to the op and more secure, and none of your code to make was used, I'll let you be the judge\ntested with ec2 tor and proxychains4\nI ran permissions with ls -l proxychains and the folder and contents show accurate permissions.\nran wget and curl with no problems\ntelnet does seem to work but I heard it was jailed for inapproriate behavior anyways :)\ntry this for telnet, I didn't understand it completely as I don't use telnet but it looks to be trying to open a shell as it hangs until you disconnect\nroot@ip-10-xxx-xxx-xxx:~# proxychains4 ssh -t www.google.com -p 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init\n[proxychains] Strict chain \u00a0... \u00a0127.0.0.1:9050 \u00a0... \u00a0www.google.com:80 \u00a0... \u00a0OK\n^C\nroot@ip-10-xxx-xxx-xxx:~#\nor\nssh -t www.google.com  -p 80   #this was thru Tor without iptables_torify, torify or proxychains4\nlet me know if you need me to test anything, I'm not having problem, will look more closely above\n_disregard below_  disregard below, must be an ec2 or xclr8tr peculiarity :)\nI'm still trying to get a handle on all this linux stuff but when I ssh into my ec2 as root and then git clone you then check it with sftp still as root through my ssh tunnel your stuff is where it belongs but when I look at the permissions they all say \"0\" instead of \"root\", I don't remember having that issue before or maybe you already covered this above and I misunderstood, will look at it a bit more...\nthis was just now git cloned also to make sure I was looking at what you guys are... again ec2 ubuntu 12.04\n. rofl0r,\nproblem as presented by anant:\nanant@anant-Studio ~/proxychains $ proxychains4 telnet google.com 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\ntelnet: symbol lookup error: /usr/local/lib/libproxychains4.so: undefined symbol: pthread_once\npossible solution with only Tor and Proxychains4   (sorry i talk to much, i need to think like programmer)\nssh -t is telnet\nroot@ip-10-xxx-xxx-xxx:~# proxychains4 ssh -t www.google.com -p 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init\n[proxychains] Strict chain  ...  127.0.0.1:9050  ...  www.google.com:80  ...  OK\n^C\nroot@ip-10-xxx-xxx-xxx:~#\niptables_torify requires no other host, again I apoligize for the confusion\nLove ur proxychains, will leave you alone sorry\n. rofl0r,\nI am also unable to use telnet just as they are.  I thought I found a way\nfor them to accomplish that as I believe it accomplished what anant was\ntrying to do, it was still telnet through a socks proxy with addition of\nssh as means to an end.\nI was trying to solve a small problem\nNow I see that you were, as you should be, concerned about the more global\nissue, which I plainly missed the magnitude of...\nas for iptables_torify I'm sorry I brought it up..., its more like a vpn\nrouting outbound traffic... your normal iptables are set up for inbound\ntraffic to protect you from others and it does not modify this nor any\ncommunications you are already engaged in... I could explain about non\nsocksified apps use but none of this is applicable to the situation... yes\nit is meant to protect you from yourself which is overkill for many...\nI think I confused your curiosity about telnet over tor with the other\nperson mixed with anant's issue and my simple brain got derailed... so\nagain I apologize and thank you for your constructive criticism..\nOn Mon, Sep 17, 2012 at 3:25 PM, rofl0r notifications@github.com wrote:\n\n@xclr8tr https://github.com/xclr8tr where's the possible solution ?\ni see pasted output of proxychains on a working system.\nthe problem in this issue is that with glibc 2.15, they pretty much killed\nLD_PRELOAD because it only works if the program to proxify is linked\nagainst -ldl and lpthread. that makes what you can do in the preloaded DLL\nlimited to only functions in the libc.so, and since dlsym seems to be\ncontained in libdl.so this makes it impossible to hook the symbols without\nwriting an own dynamic linker.\nyou're right that iptables_torify doesn't necessarily require another\nhost, unless you don't want to mess up the firewall and routing settings of\nyour own box, and as long as you don't want to use socksified and\nnon-socksified apps at the same time.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/rofl0r/proxychains/issues/4#issuecomment-8633352.\n. hi,\nI added back in to your config the the seven lines that were missing regarding:\n\n' By default enable localnet for loopback address ranges\n' RFC5735 Loopback address range\nlocalnet 127.0.0.0/255.0.0.0\n' RFC1918 Private Address Ranges\n' localnet 10.0.0.0/255.0.0.0\n' localnet 172.16.0.0/255.240.0.0\n' localnet 192.168.0.0/255.255.0.0\nand it works perfect and is just as you said.\nmy guess is that I only need the un-commented line or the first three lines.\nIs it fine to leave it this way, will you be adding it back into your fork or is there\na security risk in having it this way...  I will defer to your judgement\nYes I use it with TOR and a multitude of other ways thus my concern if\nit will cause a DNS leak or other breach of security.\nThanks\nxclr8tr\n. Sounds good, still not clear as to whether you see this as a security risk i.e. DNS leaks etc...\nI have other measures in place that I can use like Erics IPTables_TORify which reduces the need\nfor proxychains at the same time though being much more restrictive... different ways to skin this cat ;)\nI think leave the line in and commented with appropriate notes or warning otherwise people like me will\nsuddenly need it and type it in  or botch the copy paste cause we're in a hurry etc... \nThe majority of the people I know are still on 3.1 and will be slow to change but when they decide to they all will at about the same time as it is part and parcel to our world...  and for those who use it to escape oppression (GFW), a DNS leak can mean life or death... just a reminder to all who work on projects like this to think outside the box about who may be using your end product and the consequences should you fail to do so.\nPutting up a star now ! !\nxclr8tr\n. Hi rofl0r,\nI'll have to check that out, I didn't see that fork i don't think...\nI think though that we can already do that even with yours # proxychains4 gnome-terminal\nNow everything I do in the terminal is proxified.\nBut you are right in the sense that it creates a false illusion that everything is torified when it is not.  And if you promote that illusion that is bad...\nThat is why I use my friend Eric's  IPTables_Torify because when it is activated it creates an environment where all dns is torified automatically and all udp and icmp traffic is stopped... no communication is allowed out other than that which you have initiated and everything is channeled through TOR 9050. It works so well that you literally do not need proxychains...  a bit restrictive but not unlike the Tails (https://tails.boum.org/) project at the torproject.org but less restrictive in that sense.\nAnd luckily I do not as of yet live under such a fascist regime and will continue to work against those who would try to bring it.\nI will try to find this fork that you speak of\nxclr8tr\n. Hi rofl0r,\nJust for fun i ran telnet, wget, curl through Tor with \"iptables_torify\" which is from EricPaulBishop on Git\nMaybe that is what you meant by torify as it runs as a service called torify, a little confusing, as it turns Tor into transparent proxy I think that's how you'd describe it...\nthese were run from an ec2 ubuntu 12.04 with Tor and iptables_torify and without proxychains as seen below.\nHope that was what you were looking for...\nxxx'd out my ip for the hell of it :)\nTelnet:\nroot@ip-10-xxx-xxx-xxx:~# telnet www.google.com 80\nTrying 173.194.73.147...\nConnected to www.google.com.\nEscape character is '^]'.\n^C\nConnection closed by foreign host.\nwget:\nroot@ip-10-xxx-xxx-xxx:~# wget ifconfig.me\n--2012-09-17 16:04:17--  http://ifconfig.me/\nResolving ifconfig.me (ifconfig.me)... 27.120.101.66\nConnecting to ifconfig.me (ifconfig.me)|27.120.101.66|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: unspecified [text/html]\nSaving to: `index.html'\n[   <=>                                 ] 11,307      25.0K/s   in 0.4s\n2012-09-17 16:04:21 (25.0 KB/s) - `index.html' saved [11307]\ncurl:\nroot@ip-10-xxx-xxx-xxx:~# curl ifconfig.me\n88.198.100.232\nroot@ip-10-xxx-xxx-xxx:~# \n. Hi rofl0r,\nThis seems to be an answer to the op and more secure, and none of your code to make was used, I'll let you be the judge\ntested with ec2 tor and proxychains4\nI ran permissions with ls -l proxychains and the folder and contents show accurate permissions.\nran wget and curl with no problems\ntelnet does seem to work but I heard it was jailed for inapproriate behavior anyways :)\ntry this for telnet, I didn't understand it completely as I don't use telnet but it looks to be trying to open a shell as it hangs until you disconnect\nroot@ip-10-xxx-xxx-xxx:~# proxychains4 ssh -t www.google.com -p 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init\n[proxychains] Strict chain \u00a0... \u00a0127.0.0.1:9050 \u00a0... \u00a0www.google.com:80 \u00a0... \u00a0OK\n^C\nroot@ip-10-xxx-xxx-xxx:~#\nor\nssh -t www.google.com  -p 80   #this was thru Tor without iptables_torify, torify or proxychains4\nlet me know if you need me to test anything, I'm not having problem, will look more closely above\n_disregard below_  disregard below, must be an ec2 or xclr8tr peculiarity :)\nI'm still trying to get a handle on all this linux stuff but when I ssh into my ec2 as root and then git clone you then check it with sftp still as root through my ssh tunnel your stuff is where it belongs but when I look at the permissions they all say \"0\" instead of \"root\", I don't remember having that issue before or maybe you already covered this above and I misunderstood, will look at it a bit more...\nthis was just now git cloned also to make sure I was looking at what you guys are... again ec2 ubuntu 12.04\n. rofl0r,\nproblem as presented by anant:\nanant@anant-Studio ~/proxychains $ proxychains4 telnet google.com 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\ntelnet: symbol lookup error: /usr/local/lib/libproxychains4.so: undefined symbol: pthread_once\npossible solution with only Tor and Proxychains4   (sorry i talk to much, i need to think like programmer)\nssh -t is telnet\nroot@ip-10-xxx-xxx-xxx:~# proxychains4 ssh -t www.google.com -p 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init\n[proxychains] Strict chain  ...  127.0.0.1:9050  ...  www.google.com:80  ...  OK\n^C\nroot@ip-10-xxx-xxx-xxx:~#\niptables_torify requires no other host, again I apoligize for the confusion\nLove ur proxychains, will leave you alone sorry\n. rofl0r,\nI am also unable to use telnet just as they are.  I thought I found a way\nfor them to accomplish that as I believe it accomplished what anant was\ntrying to do, it was still telnet through a socks proxy with addition of\nssh as means to an end.\nI was trying to solve a small problem\nNow I see that you were, as you should be, concerned about the more global\nissue, which I plainly missed the magnitude of...\nas for iptables_torify I'm sorry I brought it up..., its more like a vpn\nrouting outbound traffic... your normal iptables are set up for inbound\ntraffic to protect you from others and it does not modify this nor any\ncommunications you are already engaged in... I could explain about non\nsocksified apps use but none of this is applicable to the situation... yes\nit is meant to protect you from yourself which is overkill for many...\nI think I confused your curiosity about telnet over tor with the other\nperson mixed with anant's issue and my simple brain got derailed... so\nagain I apologize and thank you for your constructive criticism..\nOn Mon, Sep 17, 2012 at 3:25 PM, rofl0r notifications@github.com wrote:\n\n@xclr8tr https://github.com/xclr8tr where's the possible solution ?\ni see pasted output of proxychains on a working system.\nthe problem in this issue is that with glibc 2.15, they pretty much killed\nLD_PRELOAD because it only works if the program to proxify is linked\nagainst -ldl and lpthread. that makes what you can do in the preloaded DLL\nlimited to only functions in the libc.so, and since dlsym seems to be\ncontained in libdl.so this makes it impossible to hook the symbols without\nwriting an own dynamic linker.\nyou're right that iptables_torify doesn't necessarily require another\nhost, unless you don't want to mess up the firewall and routing settings of\nyour own box, and as long as you don't want to use socksified and\nnon-socksified apps at the same time.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/rofl0r/proxychains/issues/4#issuecomment-8633352.\n. \n",
    "guanqun": "sure. done. :)\n. sure. done. :)\n. ",
    "netroby": "root@tankship:/home/netroby/project/proxychains# ldd proxychains4 \n    linux-vdso.so.1 =>  (0x00007ffff91ff000)\n    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f99172b7000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f991768a000)\nroot@tankship:/home/netroby/project/proxychains# uname -a\nLinux tankship 3.2.0-30-generic #48-Ubuntu SMP Fri Aug 24 16:52:48 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux\nroot@tankship:/home/netroby/project/proxychains# for i in /lib /lib32 /lib64 ; do\n\nfind $i -name 'libpthread_.so_'\nfind /usr/$i -name 'libpthread_.so_'\ndone\n/lib/x86_64-linux-gnu/libpthread-2.15.so\n/lib/x86_64-linux-gnu/libpthread.so.0\n/usr//lib/x86_64-linux-gnu/libpthread.so\nfind: /lib32': No such file or directory\nfind:/usr//lib32': No such file or directory\nfind: `/usr//lib64': No such file or directory\n\nroot@tankship:/home/netroby/project/proxychains# ldd which telnet\n    linux-vdso.so.1 =>  (0x00007fff9c70c000)\n    libncurses.so.5 => /lib/x86_64-linux-gnu/libncurses.so.5 (0x00007fc06a5fd000)\n    libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fc06a2fd000)\n    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fc06a002000)\n    libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fc069dec000)\n    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fc069a2f000)\n    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fc06982a000)\n    libtinfo.so.5 => /lib/x86_64-linux-gnu/libtinfo.so.5 (0x00007fc069603000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007fc06a834000)\nroot@tankship:/home/netroby/project/proxychains# ldd which wget\n    linux-vdso.so.1 =>  (0x00007fffaf1ff000)\n    libssl.so.1.0.0 => /lib/x86_64-linux-gnu/libssl.so.1.0.0 (0x00007f87f2b8e000)\n    libcrypto.so.1.0.0 => /lib/x86_64-linux-gnu/libcrypto.so.1.0.0 (0x00007f87f27c6000)\n    libidn.so.11 => /usr/lib/x86_64-linux-gnu/libidn.so.11 (0x00007f87f2592000)\n    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f87f238a000)\n    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f87f1fcd000)\n    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f87f1dc8000)\n    libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f87f1bb1000)\n    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f87f1994000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f87f2e00000)\nroot@tankship:/home/netroby/project/proxychains# \n. Hello rof, I got this problem also. \nI am using Xubuntu 12.04 X64 for a while. \nproxychains4 did not working correct on my computer.\n. you can workaround it by changing these 2 lines in Makefile\nCFLAGS += -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DTHREAD_SAFE\nLDFLAGS = -shared -fPIC -ldl -lpthread\nto remove -DTHREAD_SAFE and -lpthread\nafter removing these args. i compiled it again. but test failed.\nroot@tankship:/home/netroby/project/proxychains# proxychains4 ping www.netroby.com\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\n[proxychains] DLL init\nping: symbol lookup error: ./libproxychains4.so: undefined symbol: dlsym\n. Thanks for you help.\n. root@tankship:/home/netroby/project/proxychains# ldd proxychains4 \n    linux-vdso.so.1 =>  (0x00007ffff91ff000)\n    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f99172b7000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f991768a000)\nroot@tankship:/home/netroby/project/proxychains# uname -a\nLinux tankship 3.2.0-30-generic #48-Ubuntu SMP Fri Aug 24 16:52:48 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux\nroot@tankship:/home/netroby/project/proxychains# for i in /lib /lib32 /lib64 ; do\n\nfind $i -name 'libpthread_.so_'\nfind /usr/$i -name 'libpthread_.so_'\ndone\n/lib/x86_64-linux-gnu/libpthread-2.15.so\n/lib/x86_64-linux-gnu/libpthread.so.0\n/usr//lib/x86_64-linux-gnu/libpthread.so\nfind: /lib32': No such file or directory\nfind:/usr//lib32': No such file or directory\nfind: `/usr//lib64': No such file or directory\n\nroot@tankship:/home/netroby/project/proxychains# ldd which telnet\n    linux-vdso.so.1 =>  (0x00007fff9c70c000)\n    libncurses.so.5 => /lib/x86_64-linux-gnu/libncurses.so.5 (0x00007fc06a5fd000)\n    libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fc06a2fd000)\n    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fc06a002000)\n    libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fc069dec000)\n    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fc069a2f000)\n    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fc06982a000)\n    libtinfo.so.5 => /lib/x86_64-linux-gnu/libtinfo.so.5 (0x00007fc069603000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007fc06a834000)\nroot@tankship:/home/netroby/project/proxychains# ldd which wget\n    linux-vdso.so.1 =>  (0x00007fffaf1ff000)\n    libssl.so.1.0.0 => /lib/x86_64-linux-gnu/libssl.so.1.0.0 (0x00007f87f2b8e000)\n    libcrypto.so.1.0.0 => /lib/x86_64-linux-gnu/libcrypto.so.1.0.0 (0x00007f87f27c6000)\n    libidn.so.11 => /usr/lib/x86_64-linux-gnu/libidn.so.11 (0x00007f87f2592000)\n    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f87f238a000)\n    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f87f1fcd000)\n    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f87f1dc8000)\n    libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f87f1bb1000)\n    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f87f1994000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f87f2e00000)\nroot@tankship:/home/netroby/project/proxychains# \n. Hello rof, I got this problem also. \nI am using Xubuntu 12.04 X64 for a while. \nproxychains4 did not working correct on my computer.\n. you can workaround it by changing these 2 lines in Makefile\nCFLAGS += -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DTHREAD_SAFE\nLDFLAGS = -shared -fPIC -ldl -lpthread\nto remove -DTHREAD_SAFE and -lpthread\nafter removing these args. i compiled it again. but test failed.\nroot@tankship:/home/netroby/project/proxychains# proxychains4 ping www.netroby.com\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\n[proxychains] DLL init\nping: symbol lookup error: ./libproxychains4.so: undefined symbol: dlsym\n. Thanks for you help.\n. ",
    "tomsawyer": "got the same trouble and managed to solve it by replacing '-lpthread' with '-pthread' in Makefile.\n. I see now my mistake and wonder how I could have missed addr_name char array :) . Thanks for correction!\n. got the same trouble and managed to solve it by replacing '-lpthread' with '-pthread' in Makefile.\n. I see now my mistake and wonder how I could have missed addr_name char array :) . Thanks for correction!\n. ",
    "semionlaptev": "But original gethostbyname isn't threadsafe, instead you should use gethostbyname_r. I looked into the glibc sources and found that it was using static buffer.\n. But original gethostbyname isn't threadsafe, instead you should use gethostbyname_r. I looked into the glibc sources and found that it was using static buffer.\n. ",
    "rthijssen": "That is very unfortunate indeed. Hope you'll get those things organized. Because I was just thinking that is was very possible you where pulling a very good Social Engineering trick on me haha. Good luck with it all. You are running a fine project.\n. Haha yes I noticed that. Also your username shows up on the source forge forum of proxychains on sourceforge.\n. Sorry for my late(r) response. But that indeed works. Thanks heaps!\n. It is strange, curl for example works fine.\nMy gdb output:\nStarting program: proxychains4 -f src/proxychains.conf nmap nmap.org\nReading symbols for shared libraries +........................ done\n[proxychains] config file found: src/proxychains.conf\n[proxychains] preloading ./libproxychains4.dylib\nProgram received signal SIGTRAP, Trace/breakpoint trap.\n0x0000000000000000 in ?? ()\n. Ok, that is too bad. Thanks for the response though.\n. That is very unfortunate indeed. Hope you'll get those things organized. Because I was just thinking that is was very possible you where pulling a very good Social Engineering trick on me haha. Good luck with it all. You are running a fine project.\n. Haha yes I noticed that. Also your username shows up on the source forge forum of proxychains on sourceforge.\n. Sorry for my late(r) response. But that indeed works. Thanks heaps!\n. It is strange, curl for example works fine.\nMy gdb output:\nStarting program: proxychains4 -f src/proxychains.conf nmap nmap.org\nReading symbols for shared libraries +........................ done\n[proxychains] config file found: src/proxychains.conf\n[proxychains] preloading ./libproxychains4.dylib\nProgram received signal SIGTRAP, Trace/breakpoint trap.\n0x0000000000000000 in ?? ()\n. Ok, that is too bad. Thanks for the response though.\n. ",
    "ddoscomin": "```\nextern int getnameinfo (__const struct sockaddr __restrict __sa,\n                        socklen_t __salen, char __restrict __host,\n                        socklen_t __hostlen, char *__restrict __serv,\n                        socklen_t __servlen, int __flags);\nroot@iceland:~/proxychains-4.3# /lib64/libc.so.6 \nCompiled by GNU CC version 4.4.5.\nCompiled on a Linux 2.6.32 system on 2012-06-06.\nAvailable extensions:\n    crypt add-on version 2.1 by Michael Glad and others\n    GNU Libidn by Simon Josefsson\n    Native POSIX Threads Library by Ulrich Drepper et al\n    BIND-8.2.3-T5B\n```\n. Thank you very much for the epic support.\nI changed the libproxychains.c to the one that you supplied and the make worked fine.\nI dont know if its normal though but when i try to execute it i always get: \nroot@iceland:~/proxychains-4.3# ./proxychains4 -f /etc/proxychains.conf irssi\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\n[proxychains] DLL init\nAborted\nroot@iceland:~/proxychains-4.3# ./proxychains4 telnet google.com 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\n[proxychains] DLL init\nAborted\nDo i just miss the proxychains.conf or this is not normal ? Thanks rofl0r, and keep up the good work.\n. This is what i get:\n```\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6e701b5 in raise () from /lib/libc.so.6\n(gdb) bt\n0  0x00007ffff6e701b5 in raise () from /lib/libc.so.6\n1  0x00007ffff6e72fc0 in abort () from /lib/libc.so.6\n2  0x00007ffff7b970f9 in load_sym (symname=0x7ffff7b992c1 \"getnameinfo\",\nproxyfunc=0x7ffff6f294c0) at src/libproxychains.c:86\n\n3  0x00007ffff7b97221 in do_init () at src/libproxychains.c:115\n4  0x00007ffff6a2a7a3 in pthread_once () from /lib/libpthread.so.0\n5  0x00007ffff7b9725c in init_lib_wrapper (caller=0x7ffff7b994d6 \"gcc_init\")\nat src/libproxychains.c:136\n\n6  0x00007ffff7b9726e in gcc_init () at src/libproxychains.c:147\n7  0x00007ffff7b98f86 in __do_global_ctors_aux () from ./libproxychains4.so\n8  0x00007ffff7b9482b in _init () from ./libproxychains4.so\n9  0x00007fffffffec28 in ?? ()\n10 0x00007ffff7decc69 in ?? () from /lib64/ld-linux-x86-64.so.2\n11 0x00007ffff7decda7 in ?? () from /lib64/ld-linux-x86-64.so.2\n12 0x00007ffff7ddfb2a in ?? () from /lib64/ld-linux-x86-64.so.2\n13 0x0000000000000003 in ?? ()\n14 0x00007fffffffee2b in ?? ()\n15 0x00007fffffffee32 in ?? ()\n16 0x00007fffffffee3d in ?? ()\n17 0x0000000000000000 in ?? ()\n(gdb)\n```\nI ony changed the libproxychains.c with the one you provided, i didnt understand that i had to change other files.\nDo i have to modify /usr/include/netdb.h at line 677? \n. I re-extract the 4.3 from tarball and changed the line 386 as you said. Now everything works perfect.\n<3\nIs there a way to make proxychains keep on changing proxies on each connection attempt? \nDo you hang around some irc chan by any chance? \nTake care.\n. ```\nextern int getnameinfo (__const struct sockaddr __restrict __sa,\n                        socklen_t __salen, char __restrict __host,\n                        socklen_t __hostlen, char *__restrict __serv,\n                        socklen_t __servlen, int __flags);\nroot@iceland:~/proxychains-4.3# /lib64/libc.so.6 \nCompiled by GNU CC version 4.4.5.\nCompiled on a Linux 2.6.32 system on 2012-06-06.\nAvailable extensions:\n    crypt add-on version 2.1 by Michael Glad and others\n    GNU Libidn by Simon Josefsson\n    Native POSIX Threads Library by Ulrich Drepper et al\n    BIND-8.2.3-T5B\n```\n. Thank you very much for the epic support.\nI changed the libproxychains.c to the one that you supplied and the make worked fine.\nI dont know if its normal though but when i try to execute it i always get: \nroot@iceland:~/proxychains-4.3# ./proxychains4 -f /etc/proxychains.conf irssi\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\n[proxychains] DLL init\nAborted\nroot@iceland:~/proxychains-4.3# ./proxychains4 telnet google.com 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\n[proxychains] DLL init\nAborted\nDo i just miss the proxychains.conf or this is not normal ? Thanks rofl0r, and keep up the good work.\n. This is what i get:\n```\nProgram received signal SIGABRT, Aborted.\n0x00007ffff6e701b5 in raise () from /lib/libc.so.6\n(gdb) bt\n0  0x00007ffff6e701b5 in raise () from /lib/libc.so.6\n1  0x00007ffff6e72fc0 in abort () from /lib/libc.so.6\n2  0x00007ffff7b970f9 in load_sym (symname=0x7ffff7b992c1 \"getnameinfo\",\nproxyfunc=0x7ffff6f294c0) at src/libproxychains.c:86\n\n3  0x00007ffff7b97221 in do_init () at src/libproxychains.c:115\n4  0x00007ffff6a2a7a3 in pthread_once () from /lib/libpthread.so.0\n5  0x00007ffff7b9725c in init_lib_wrapper (caller=0x7ffff7b994d6 \"gcc_init\")\nat src/libproxychains.c:136\n\n6  0x00007ffff7b9726e in gcc_init () at src/libproxychains.c:147\n7  0x00007ffff7b98f86 in __do_global_ctors_aux () from ./libproxychains4.so\n8  0x00007ffff7b9482b in _init () from ./libproxychains4.so\n9  0x00007fffffffec28 in ?? ()\n10 0x00007ffff7decc69 in ?? () from /lib64/ld-linux-x86-64.so.2\n11 0x00007ffff7decda7 in ?? () from /lib64/ld-linux-x86-64.so.2\n12 0x00007ffff7ddfb2a in ?? () from /lib64/ld-linux-x86-64.so.2\n13 0x0000000000000003 in ?? ()\n14 0x00007fffffffee2b in ?? ()\n15 0x00007fffffffee32 in ?? ()\n16 0x00007fffffffee3d in ?? ()\n17 0x0000000000000000 in ?? ()\n(gdb)\n```\nI ony changed the libproxychains.c with the one you provided, i didnt understand that i had to change other files.\nDo i have to modify /usr/include/netdb.h at line 677? \n. I re-extract the 4.3 from tarball and changed the line 386 as you said. Now everything works perfect.\n<3\nIs there a way to make proxychains keep on changing proxies on each connection attempt? \nDo you hang around some irc chan by any chance? \nTake care.\n. ",
    "rbellamy": "That did the trick - nice turnaround time too!!!\n. Starred.\n. That did the trick - nice turnaround time too!!!\n. Starred.\n. ",
    "kai-rn": "can i use musl libc instead of gnu libc in centos 6?\ni've tried LD_PRELOAD but it has not fixed the issue.\n. many thanks for your effort but i'm afraid i wont be able to install all those packages. could you please suggest some simplier workaround?\n. On 2017-01-15 07:01, rofl0r wrote:\n\ni've created a minimal testcase to reproduce the issue: \nhttps://0x0.st/fDK.gz\nit's 3 small C files and a build.sh. when you run build.sh, you\nshould see the output\nhooked\nhooked\nhowever on GLIBC it probably prints hooked only once.\ncan anyone test this ? i don't have a system with GLIBC.\nwhen we have it confirmed, someone can take the testcase and open a\nbug report on the GLIBC bugtracker.\n\nproblem:\n dlopen_bug> gcc preload.c -Wall -shared -fPIC -ldl -o preload.so\n preload.c: In function \u2018init\u2019:\n preload.c:9:19: error: \u2018RTLD_NEXT\u2019 undeclared (first use in this\n\nfunction)\n       origputs = dlsym(RTLD_NEXT, \"puts\");\n                    ^\nfix:\n gcc preload.c -D_GNU_SOURCE -Wall -shared -fPIC -ldl -o preload.so\n\nor add a line:\n --- preload.c   2017-01-15 14:13:06.951753115 +0700\n +++ preload_fix.c       2017-01-15 14:13:03.459753218 +0700\n @@ -1,3 +1,4 @@\n +#define _GNU_SOURCE\n  #include <pthread.h>\n  #include <dlfcn.h>\n  pthread_once_t init_once = PTHREAD_ONCE_INIT;\n\nproblem:\n dlopen_bug> sh build.sh\n app.c: In function \u2018main\u2019:\n app.c:11:1: warning: control reaches end of non-void function\n\n[-Wreturn-type]\n      }\n      ^\n     ./app: symbol lookup error: ./preload.so: undefined symbol: \npthread_once\nfix:\n gcc preload.c -D_GNU_SOURCE -lpthread -Wall -shared -fPIC -ldl -o\n\npreload.so\nBut in the end it surprisingly works on Centos 6.8 gcc 4.4.7 glibc 2.12 \n(system of the test case with php and curl) and openSUSE 13.2 gcc 4.8.3 \nglibc 2.19:\n dlopen_bug> sh build.sh\n app.c: In function \u2018main\u2019:\n app.c:11:1: warning: control reaches end of non-void function\n\n[-Wreturn-type]\n      }\n      ^\n     hooked\n     hooked\n. Github broke my email formatting, press on \"...\" icon to see the rest of \nthe email.\nThe output is as follows:\n\nBut in the end it surprisingly works on Centos 6.8 gcc 4.4.7 glibc 2.12 \n(system of the test case with php and curl) and openSUSE 13.2 gcc 4.8.3 \nglibc 2.19:\ndlopen_bug> sh build.sh\n app.c: In function \u2018main\u2019:\n app.c:11:1: warning: control reaches end of non-void function \n[-Wreturn-type]\n }\n ^\nhooked\nhooked\n\n\n. On 2017-01-15 19:28, rofl0r wrote:\n\ndamn. even when you replace RTLD_NOW with RTLD_LAZY in app.c ?\n\nstill works.\n\nhooked\nhooked\n\n. can i use musl libc instead of gnu libc in centos 6?\ni've tried LD_PRELOAD but it has not fixed the issue.\n. many thanks for your effort but i'm afraid i wont be able to install all those packages. could you please suggest some simplier workaround?\n. On 2017-01-15 07:01, rofl0r wrote:\n\ni've created a minimal testcase to reproduce the issue: \nhttps://0x0.st/fDK.gz\nit's 3 small C files and a build.sh. when you run build.sh, you\nshould see the output\nhooked\nhooked\nhowever on GLIBC it probably prints hooked only once.\ncan anyone test this ? i don't have a system with GLIBC.\nwhen we have it confirmed, someone can take the testcase and open a\nbug report on the GLIBC bugtracker.\n\nproblem:\n dlopen_bug> gcc preload.c -Wall -shared -fPIC -ldl -o preload.so\n preload.c: In function \u2018init\u2019:\n preload.c:9:19: error: \u2018RTLD_NEXT\u2019 undeclared (first use in this\n\nfunction)\n       origputs = dlsym(RTLD_NEXT, \"puts\");\n                    ^\nfix:\n gcc preload.c -D_GNU_SOURCE -Wall -shared -fPIC -ldl -o preload.so\n\nor add a line:\n --- preload.c   2017-01-15 14:13:06.951753115 +0700\n +++ preload_fix.c       2017-01-15 14:13:03.459753218 +0700\n @@ -1,3 +1,4 @@\n +#define _GNU_SOURCE\n  #include <pthread.h>\n  #include <dlfcn.h>\n  pthread_once_t init_once = PTHREAD_ONCE_INIT;\n\nproblem:\n dlopen_bug> sh build.sh\n app.c: In function \u2018main\u2019:\n app.c:11:1: warning: control reaches end of non-void function\n\n[-Wreturn-type]\n      }\n      ^\n     ./app: symbol lookup error: ./preload.so: undefined symbol: \npthread_once\nfix:\n gcc preload.c -D_GNU_SOURCE -lpthread -Wall -shared -fPIC -ldl -o\n\npreload.so\nBut in the end it surprisingly works on Centos 6.8 gcc 4.4.7 glibc 2.12 \n(system of the test case with php and curl) and openSUSE 13.2 gcc 4.8.3 \nglibc 2.19:\n dlopen_bug> sh build.sh\n app.c: In function \u2018main\u2019:\n app.c:11:1: warning: control reaches end of non-void function\n\n[-Wreturn-type]\n      }\n      ^\n     hooked\n     hooked\n. Github broke my email formatting, press on \"...\" icon to see the rest of \nthe email.\nThe output is as follows:\n\nBut in the end it surprisingly works on Centos 6.8 gcc 4.4.7 glibc 2.12 \n(system of the test case with php and curl) and openSUSE 13.2 gcc 4.8.3 \nglibc 2.19:\ndlopen_bug> sh build.sh\n app.c: In function \u2018main\u2019:\n app.c:11:1: warning: control reaches end of non-void function \n[-Wreturn-type]\n }\n ^\nhooked\nhooked\n\n\n. On 2017-01-15 19:28, rofl0r wrote:\n\ndamn. even when you replace RTLD_NOW with RTLD_LAZY in app.c ?\n\nstill works.\n\nhooked\nhooked\n\n. ",
    "speeddragon": "I'm having the same issue on Debian, but in OSX that issue doesn't happen. Any thoughts ? . I'm having the same issue on Debian, but in OSX that issue doesn't happen. Any thoughts ? . ",
    "shtonut": "I just tried a simple python client and server and they seem to work okay.  so, something is special about transmission.\n. I ran transmission in the foreground with proxychains in DEBUG mode.  I don't see any mention of connections to or from localhost/127.0.0.1 when I attempt to connect to it's web interface.  I'm wondering if transmission is even receiving my connection requests.  netstat shows that it is listening on the ports on all interfaces.  Here is a snippet of the output with ip addresses X'ed out  (there may be some extra debug print statements I added when debugging the hb_fill() issue):\nDEBUG:pid[17932]:chain_step\n ...  xx.xx.xx.xx:13049 DEBUG:pid[17932]:tunnel_to\nDEBUG:host dns \n<--socket error or timeout!\nDEBUG:pid[17932]:pc_getnameinfo\nDEBUG:pid[17932]:connect\nDEBUG:target: xx.xx.xx.xx\nDEBUG:port: 52632\nDEBUG:pid[17932]:connect_proxy_chain\n[proxychains] Strict chain  ...  xx.xx.xx.xx:1080 DEBUG:pid[17932]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[17932]:chain_step\n ...  xx.xx.xx.xx:52632 DEBUG:pid[17932]:tunnel_to\nDEBUG:host dns \n<--socket error or timeout!\nDEBUG:pid[17932]:connect\nDEBUG:target: xx.xx.xx.xx\nDEBUG:port: 44789\nDEBUG:pid[17932]:connect_proxy_chain\n[proxychains] Strict chain  ...  xx.xx.xx.xx:1080 DEBUG:pid[17932]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\n. understood.  but the web interface for transmission is only available on the local network, and I don't want any incoming connections to it from the proxy.  thus having local connections bypassed in the localnet setting. \nI'm using libuClibc-0.9.28.so\n. yes, transmission is run via proxychains, outgoing connections not destined for 127.0.0.1 are to go through the proxy.\nthe servers sockets should work per normal, but apparently aren't.  As i said, I verified with a simply python server script that proxychains is not hindering server sockets or local connections, so it's something that transmission is doing.\ni am simply using a browser (or wget/curl) to access the server sockets without proxychains.\nthe setting for remote_dns_subnet is 224.\n. i tested on ubuntu as well and received the same result.  you'll need to install transmission-daemon and transmission-cli.\nto run it put the settings.json file in /tmp:\nproxychains4 transmission-daemon -f  -g /tmp/.transmission-daemon -e /tmp/transmission-daemon.log --log-error --log-info --log-debug\nThen go to the web interface at http://127.0.0.1:9091 or using the remote interface \"transmission-remote -l\"\nHere is what my settings.json file looks like:\n{\n    \"alt-speed-down\": 250,\n    \"alt-speed-enabled\": false,\n    \"alt-speed-time-begin\": 540,\n    \"alt-speed-time-day\": 127,\n    \"alt-speed-time-enabled\": false,\n    \"alt-speed-time-end\": 1020,\n    \"alt-speed-up\": 10,\n    \"bind-address-ipv4\": \"0.0.0.0\",\n    \"bind-address-ipv6\": \"::\",\n    \"blocklist-enabled\": true,\n    \"blocklist-url\": \"http://www.example.com/blocklist\",\n    \"cache-size-mb\": 2,\n    \"dht-enabled\": true,\n    \"download-dir\": \"/tmp\",\n    \"download-queue-enabled\": true,\n    \"download-queue-size\": 5,\n    \"encryption\": 1,\n    \"idle-seeding-limit\": 30,\n    \"idle-seeding-limit-enabled\": false,\n    \"incomplete-dir\": \"/tmp\",\n    \"incomplete-dir-enabled\": true,\n    \"lazy-bitfield-enabled\": true,\n    \"lpd-enabled\": false,\n    \"message-level\": 3,\n    \"open-file-limit\": 32,\n    \"peer-congestion-algorithm\": \"\",\n    \"peer-limit-global\": 240,\n    \"peer-limit-per-torrent\": 60,\n    \"peer-port\": 51413,\n    \"peer-port-random-high\": 65535,\n    \"peer-port-random-low\": 49152,\n    \"peer-port-random-on-start\": false,\n    \"peer-socket-tos\": \"default\",\n    \"pex-enabled\": true,\n    \"port-forwarding-enabled\": true,\n    \"preallocation\": 1,\n    \"prefetch-enabled\": 0,\n    \"proxy\": \"\",\n    \"proxy-auth-enabled\": false,\n    \"proxy-auth-password\": \"\",\n    \"proxy-auth-username\": \"\",\n    \"proxy-enabled\": false,\n    \"proxy-port\": 80,\n    \"proxy-type\": 0,\n    \"queue-stalled-enabled\": true,\n    \"queue-stalled-minutes\": 30,\n    \"ratio-limit\": 0.5000,\n    \"ratio-limit-enabled\": true,\n    \"rename-partial-files\": true,\n    \"rpc-authentication-required\": false,\n    \"rpc-bind-address\": \"0.0.0.0\",\n    \"rpc-enabled\": true,\n    \"rpc-password\": \"{7cf65081446872c4b3e833340d1c19354c0d1fe6rcio8gJc\",\n    \"rpc-port\": 9091,\n    \"rpc-url\": \"/transmission/\",\n    \"rpc-username\": \"\",\n    \"rpc-whitelist\": \"127.0.0.1\",\n    \"rpc-whitelist-enabled\": false,\n    \"scrape-paused-torrents-enabled\": true,\n    \"script-torrent-done-enabled\": false,\n    \"script-torrent-done-filename\": \"\",\n    \"seed-queue-enabled\": false,\n    \"seed-queue-size\": 10,\n    \"speed-limit-down\": 750,\n    \"speed-limit-down-enabled\": true,\n    \"speed-limit-up\": 50,\n    \"speed-limit-up-enabled\": true,\n    \"start-added-torrents\": true,\n    \"trash-original-torrent-files\": false,\n    \"umask\": 18,\n    \"upload-slots-per-torrent\": 10,\n    \"utp-enabled\": false\n}\n. I just tried a simple python client and server and they seem to work okay.  so, something is special about transmission.\n. I ran transmission in the foreground with proxychains in DEBUG mode.  I don't see any mention of connections to or from localhost/127.0.0.1 when I attempt to connect to it's web interface.  I'm wondering if transmission is even receiving my connection requests.  netstat shows that it is listening on the ports on all interfaces.  Here is a snippet of the output with ip addresses X'ed out  (there may be some extra debug print statements I added when debugging the hb_fill() issue):\nDEBUG:pid[17932]:chain_step\n ...  xx.xx.xx.xx:13049 DEBUG:pid[17932]:tunnel_to\nDEBUG:host dns \n<--socket error or timeout!\nDEBUG:pid[17932]:pc_getnameinfo\nDEBUG:pid[17932]:connect\nDEBUG:target: xx.xx.xx.xx\nDEBUG:port: 52632\nDEBUG:pid[17932]:connect_proxy_chain\n[proxychains] Strict chain  ...  xx.xx.xx.xx:1080 DEBUG:pid[17932]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[17932]:chain_step\n ...  xx.xx.xx.xx:52632 DEBUG:pid[17932]:tunnel_to\nDEBUG:host dns \n<--socket error or timeout!\nDEBUG:pid[17932]:connect\nDEBUG:target: xx.xx.xx.xx\nDEBUG:port: 44789\nDEBUG:pid[17932]:connect_proxy_chain\n[proxychains] Strict chain  ...  xx.xx.xx.xx:1080 DEBUG:pid[17932]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\n. understood.  but the web interface for transmission is only available on the local network, and I don't want any incoming connections to it from the proxy.  thus having local connections bypassed in the localnet setting. \nI'm using libuClibc-0.9.28.so\n. yes, transmission is run via proxychains, outgoing connections not destined for 127.0.0.1 are to go through the proxy.\nthe servers sockets should work per normal, but apparently aren't.  As i said, I verified with a simply python server script that proxychains is not hindering server sockets or local connections, so it's something that transmission is doing.\ni am simply using a browser (or wget/curl) to access the server sockets without proxychains.\nthe setting for remote_dns_subnet is 224.\n. i tested on ubuntu as well and received the same result.  you'll need to install transmission-daemon and transmission-cli.\nto run it put the settings.json file in /tmp:\nproxychains4 transmission-daemon -f  -g /tmp/.transmission-daemon -e /tmp/transmission-daemon.log --log-error --log-info --log-debug\nThen go to the web interface at http://127.0.0.1:9091 or using the remote interface \"transmission-remote -l\"\nHere is what my settings.json file looks like:\n{\n    \"alt-speed-down\": 250,\n    \"alt-speed-enabled\": false,\n    \"alt-speed-time-begin\": 540,\n    \"alt-speed-time-day\": 127,\n    \"alt-speed-time-enabled\": false,\n    \"alt-speed-time-end\": 1020,\n    \"alt-speed-up\": 10,\n    \"bind-address-ipv4\": \"0.0.0.0\",\n    \"bind-address-ipv6\": \"::\",\n    \"blocklist-enabled\": true,\n    \"blocklist-url\": \"http://www.example.com/blocklist\",\n    \"cache-size-mb\": 2,\n    \"dht-enabled\": true,\n    \"download-dir\": \"/tmp\",\n    \"download-queue-enabled\": true,\n    \"download-queue-size\": 5,\n    \"encryption\": 1,\n    \"idle-seeding-limit\": 30,\n    \"idle-seeding-limit-enabled\": false,\n    \"incomplete-dir\": \"/tmp\",\n    \"incomplete-dir-enabled\": true,\n    \"lazy-bitfield-enabled\": true,\n    \"lpd-enabled\": false,\n    \"message-level\": 3,\n    \"open-file-limit\": 32,\n    \"peer-congestion-algorithm\": \"\",\n    \"peer-limit-global\": 240,\n    \"peer-limit-per-torrent\": 60,\n    \"peer-port\": 51413,\n    \"peer-port-random-high\": 65535,\n    \"peer-port-random-low\": 49152,\n    \"peer-port-random-on-start\": false,\n    \"peer-socket-tos\": \"default\",\n    \"pex-enabled\": true,\n    \"port-forwarding-enabled\": true,\n    \"preallocation\": 1,\n    \"prefetch-enabled\": 0,\n    \"proxy\": \"\",\n    \"proxy-auth-enabled\": false,\n    \"proxy-auth-password\": \"\",\n    \"proxy-auth-username\": \"\",\n    \"proxy-enabled\": false,\n    \"proxy-port\": 80,\n    \"proxy-type\": 0,\n    \"queue-stalled-enabled\": true,\n    \"queue-stalled-minutes\": 30,\n    \"ratio-limit\": 0.5000,\n    \"ratio-limit-enabled\": true,\n    \"rename-partial-files\": true,\n    \"rpc-authentication-required\": false,\n    \"rpc-bind-address\": \"0.0.0.0\",\n    \"rpc-enabled\": true,\n    \"rpc-password\": \"{7cf65081446872c4b3e833340d1c19354c0d1fe6rcio8gJc\",\n    \"rpc-port\": 9091,\n    \"rpc-url\": \"/transmission/\",\n    \"rpc-username\": \"\",\n    \"rpc-whitelist\": \"127.0.0.1\",\n    \"rpc-whitelist-enabled\": false,\n    \"scrape-paused-torrents-enabled\": true,\n    \"script-torrent-done-enabled\": false,\n    \"script-torrent-done-filename\": \"\",\n    \"seed-queue-enabled\": false,\n    \"seed-queue-size\": 10,\n    \"speed-limit-down\": 750,\n    \"speed-limit-down-enabled\": true,\n    \"speed-limit-up\": 50,\n    \"speed-limit-up-enabled\": true,\n    \"start-added-torrents\": true,\n    \"trash-original-torrent-files\": false,\n    \"umask\": 18,\n    \"upload-slots-per-torrent\": 10,\n    \"utp-enabled\": false\n}\n. ",
    "bararchy": "GNU Make 3.81\nCopyright (C) 2006  Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE.\nThis program built for arm-apple-darwin9\nOn Sun, Feb 10, 2013 at 12:52 PM, rofl0r notifications@github.com wrote:\n\nis that gmake ? (gnu make) ?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/rofl0r/proxychains/issues/14#issuecomment-13347230..\n\n\nBar Hofesh | Safe-T\nInfoSec Division\nInfrastructure Administrator\nwww.safe-t.com\nFor IT It's MFT.For Everyone Else...It's Email\u2122\nSafe-T, is an innovative all-in-one secure Managed File Transfer (MFT)\nsolution that offers simple, secure, managed and compliant file transfer\nboth inside and outside the enterprise.\n. GNU Make 3.81\nCopyright (C) 2006  Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE.\nThis program built for arm-apple-darwin9\nOn Sun, Feb 10, 2013 at 12:52 PM, rofl0r notifications@github.com wrote:\n\nis that gmake ? (gnu make) ?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/rofl0r/proxychains/issues/14#issuecomment-13347230..\n\n\nBar Hofesh | Safe-T\nInfoSec Division\nInfrastructure Administrator\nwww.safe-t.com\nFor IT It's MFT.For Everyone Else...It's Email\u2122\nSafe-T, is an innovative all-in-one secure Managed File Transfer (MFT)\nsolution that offers simple, secure, managed and compliant file transfer\nboth inside and outside the enterprise.\n. ",
    "MaskRay": "\nplease elaborate. i have never used http proxies myself, but afaik it is implemented and works.\n\nsnprintf((char *) buff, sizeof(buff), \"CONNECT %s:%d HTTP/1.0\\r\\n\", dns_name,\nsuggests that HTTP/1.0 instead of HTTP/1.1 is supported.\n. > please elaborate. i have never used http proxies myself, but afaik it is implemented and works.\nsnprintf((char *) buff, sizeof(buff), \"CONNECT %s:%d HTTP/1.0\\r\\n\", dns_name,\nsuggests that HTTP/1.0 instead of HTTP/1.1 is supported.\n. ",
    "gvlx": "I've submitted the same gist to the homebrew issue list.\nNot sure what is their procedure to include it upstream but let's see if \nwe get more reports of any problems.\ngvlx.\nOn 13/04/23 14:11, rofl0r wrote:\n\ncool!\nhow can we get that formula integrated upstreams ?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/rofl0r/proxychains/issues/16#issuecomment-16856847.\n. I've submitted the same gist to the homebrew issue list.\n\nNot sure what is their procedure to include it upstream but let's see if \nwe get more reports of any problems.\ngvlx.\nOn 13/04/23 14:11, rofl0r wrote:\n\ncool!\nhow can we get that formula integrated upstreams ?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/rofl0r/proxychains/issues/16#issuecomment-16856847.\n. \n",
    "samueljohn": ":beers: \n. :beers: \n. ",
    "mancha1": "Hi. I meant a mandatory access control framework like SELinux, AppArmor, etc. In my case, AppArmor was blocking the target application's ability to read /etc/proxychains.conf even though /usr/bin/proxychains4 was unrestricted.\nPull request is in your queue as requested. \nCheers.\n. Hi. I meant a mandatory access control framework like SELinux, AppArmor, etc. In my case, AppArmor was blocking the target application's ability to read /etc/proxychains.conf even though /usr/bin/proxychains4 was unrestricted.\nPull request is in your queue as requested. \nCheers.\n. ",
    "sitemate": "open command runs the application on Mac OS X. Where should I set the path for libproxychains.so?\n. >sudo dtruss -n open /Application/Firefox.app\n    PID/THRD  SYSCALL(args)          = return\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x117d:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0x1183:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0x117e:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0x117c:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n  151/0x11b6:  thread_selfid(0x108080000, 0x83000, 0x1702B)      = 4534 0\n   21/0x11bd:  thread_selfid(0x7FFF78F7B278, 0x0, 0xFFFFFFFF)        = 4541 0\n  300/0x11bf:  thread_selfid(0x108186000, 0x83000, 0xD523)       = 4543 0\n   21/0x11bc:  workq_kernreturn(0x20, 0x0, 0x1)      = 0 0\n   21/0x11bc:  kevent(0x4, 0x107DEDDE8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  kevent(0x4, 0x107E703F8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x11bc:  workq_kernreturn(0x20, 0x0, 0x1)      = 0 0\n   21/0xd57:  kevent(0x4, 0x108183D68, 0x1)      = 1 0\n   21/0x11bc:  thread_selfid(0x7FFF78F7B278, 0x0, 0xFFFFFFFF)        = 4540 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0xd57:  kevent(0x4, 0x108183D68, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n  203/0x11c0:  thread_selfid(0x107D6D000, 0x83000, 0x19037)      = 4544 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x11bc:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0xd57:  __disable_threadsignal(0x1, 0x0, 0x0)      = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0\n. open command runs the application on Mac OS X. Where should I set the path for libproxychains.so?\n. >sudo dtruss -n open /Application/Firefox.app\n    PID/THRD  SYSCALL(args)          = return\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x117d:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0x1183:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0x117e:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0x117c:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  kevent(0x4, 0x108183DB8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n  151/0x11b6:  thread_selfid(0x108080000, 0x83000, 0x1702B)      = 4534 0\n   21/0x11bd:  thread_selfid(0x7FFF78F7B278, 0x0, 0xFFFFFFFF)        = 4541 0\n  300/0x11bf:  thread_selfid(0x108186000, 0x83000, 0xD523)       = 4543 0\n   21/0x11bc:  workq_kernreturn(0x20, 0x0, 0x1)      = 0 0\n   21/0x11bc:  kevent(0x4, 0x107DEDDE8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  kevent(0x4, 0x107E703F8, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x11bc:  workq_kernreturn(0x20, 0x0, 0x1)      = 0 0\n   21/0xd57:  kevent(0x4, 0x108183D68, 0x1)      = 1 0\n   21/0x11bc:  thread_selfid(0x7FFF78F7B278, 0x0, 0xFFFFFFFF)        = 4540 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0xd57:  kevent(0x4, 0x108183D68, 0x1)      = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0xd57:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n  203/0x11c0:  thread_selfid(0x107D6D000, 0x83000, 0x19037)      = 4544 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x11bc:  __disable_threadsignal(0x1, 0x0, 0x0)         = 0 0\n   21/0xd57:  __disable_threadsignal(0x1, 0x0, 0x0)      = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 1 0\n   21/0x11bd:  kevent(0x4, 0x10807DDB8, 0x1)         = 1 0\n   21/0x110:  kevent(0x4, 0x0, 0x0)      = 0 0\n   21/0x110:  workq_kernreturn(0x20, 0x0, 0x1)       = 0\n. ",
    "nmcv": "@sitemate No need to ./proxychains4 open /Applications/Firefox.app. It's proxychains4 /Applications/Firefox.app/Contents/MacOS/firefox yoursite.com.\nP.S.: To open apps like you wanted you'd type open -a \"Firefox\" in your terminal but you wouldn't be able to pass this whole thing to proxychains though. \n. @rofl0r You're correct - latest FF just crashed on my eyes. I used to have a prehistoric one which was Ok (probably FF3). Funnily, I went to see if it works and received Mac's BSOD when started to play with arch program. The latter is unrelated to the default workflow though. The fact remains that the latest Firefox crashes on OSX 10.9 in my case. Where can I send the crash log to?\n. Completely agreed. FF should be used another way. Proxychains works perfectly with Chrome Linux/Mac if what.\n. That's true - PPC users will definitely have an issue if so. However, a universal binary and a fat binary are different things (the former handles both PPC and Intel processors, the other one - i386 and x86_64 architectures). I meant strictly the latter. I'm gonna add a --fat-binary flag so that if the host is an x86_64 Intel Mac, there will be an option to compile and link for i386 as well. \n. @sitemate No need to ./proxychains4 open /Applications/Firefox.app. It's proxychains4 /Applications/Firefox.app/Contents/MacOS/firefox yoursite.com.\nP.S.: To open apps like you wanted you'd type open -a \"Firefox\" in your terminal but you wouldn't be able to pass this whole thing to proxychains though. \n. @rofl0r You're correct - latest FF just crashed on my eyes. I used to have a prehistoric one which was Ok (probably FF3). Funnily, I went to see if it works and received Mac's BSOD when started to play with arch program. The latter is unrelated to the default workflow though. The fact remains that the latest Firefox crashes on OSX 10.9 in my case. Where can I send the crash log to?\n. Completely agreed. FF should be used another way. Proxychains works perfectly with Chrome Linux/Mac if what.\n. That's true - PPC users will definitely have an issue if so. However, a universal binary and a fat binary are different things (the former handles both PPC and Intel processors, the other one - i386 and x86_64 architectures). I meant strictly the latter. I'm gonna add a --fat-binary flag so that if the host is an x86_64 Intel Mac, there will be an option to compile and link for i386 as well. \n. ",
    "vlddm": "Chrome sends all your stuff to google, so what is the point to use proxies at all with chrome?\nIts like walking down the street naked but with hat on.\n. Chrome sends all your stuff to google, so what is the point to use proxies at all with chrome?\nIts like walking down the street naked but with hat on.\n. ",
    "crass": "Ok, I cleaned up the messed up history.  I thought it looked a little strange.\nRR rotates on a new connection.  I created the new global proxychains_proxy_offset whichs stores the index of the proxy after the last proxy in the preceding chain.\nYou asked for an example, where?  In the config?  I dont think there needs to be an example in the distro, as with the other types.\n. Just updated with changes per your suggestions above and an important bug fix\n. The config change was in the many_lists PR. It should've been in this one, and now it is.\n. Mea culpa, I was trying to get this pushed out just before taking a flight and didn't compile check it.  A change from the many_lists branch snuck in with all the rebasing.  It compiles now.\n. Looks like your commit messages went away because I've rebased from round_robin.\n. What's strange is I've been getting emails from the round robin PR, but the only email from this PR I've gotten is for your last comment.  Anyway, iirc, I addressed the issues you raised.\n. currently, I've now taken it out completely.  If I care enough, I'll add it in later.\n. Ok, I cleaned up the messed up history.  I thought it looked a little strange.\nRR rotates on a new connection.  I created the new global proxychains_proxy_offset whichs stores the index of the proxy after the last proxy in the preceding chain.\nYou asked for an example, where?  In the config?  I dont think there needs to be an example in the distro, as with the other types.\n. Just updated with changes per your suggestions above and an important bug fix\n. The config change was in the many_lists PR. It should've been in this one, and now it is.\n. Mea culpa, I was trying to get this pushed out just before taking a flight and didn't compile check it.  A change from the many_lists branch snuck in with all the rebasing.  It compiles now.\n. Looks like your commit messages went away because I've rebased from round_robin.\n. What's strange is I've been getting emails from the round robin PR, but the only email from this PR I've gotten is for your last comment.  Anyway, iirc, I addressed the issues you raised.\n. currently, I've now taken it out completely.  If I care enough, I'll add it in later.\n. ",
    "user021": "Well, im only interested on SMTP-outgoin but kinda new to this domain and not sure how to do it, as far as i understood there are two methods:\n-open a socksfyed terminal but the command proxychains gnome-terminal doesn't work on my Ubuntu \n-for Postfix, make a script like here http://benizi.com/postfix-proxychains but i don't need SSH tunnel and idk how modify it\n. Well, i did, try with SOCKS4 proxyies and also SOCKS5 because i wasn't sure if works with SOCKS4 (if the DNS-MX records r resolved through the proxy) but on server logs i see that it still uses my IP. Not sure how can debug proxychains, to see if works or what is happening more exactly.\n. Well, im only interested on SMTP-outgoin but kinda new to this domain and not sure how to do it, as far as i understood there are two methods:\n-open a socksfyed terminal but the command proxychains gnome-terminal doesn't work on my Ubuntu \n-for Postfix, make a script like here http://benizi.com/postfix-proxychains but i don't need SSH tunnel and idk how modify it\n. Well, i did, try with SOCKS4 proxyies and also SOCKS5 because i wasn't sure if works with SOCKS4 (if the DNS-MX records r resolved through the proxy) but on server logs i see that it still uses my IP. Not sure how can debug proxychains, to see if works or what is happening more exactly.\n. ",
    "muelli": "It's easy to resolve the name to an IP address. But that address might change. But the name, e.g. proxy.acme.corp will very likely stay the same.\nAlso, I'm trying to use proxychains behind a corporate proxy which requires authentication, because some software I want to provision does not deal well with such proxies. Hence, I am trying to install proxychains. And I'm using ansible for provisioning.  Ansible, however, does not resolve hostnames and it seems much easier to make proxychains accept a hostname instead of making Ansible do something totally unrelated to its purpose.\n. It's easy to resolve the name to an IP address. But that address might change. But the name, e.g. proxy.acme.corp will very likely stay the same.\nAlso, I'm trying to use proxychains behind a corporate proxy which requires authentication, because some software I want to provision does not deal well with such proxies. Hence, I am trying to install proxychains. And I'm using ansible for provisioning.  Ansible, however, does not resolve hostnames and it seems much easier to make proxychains accept a hostname instead of making Ansible do something totally unrelated to its purpose.\n. ",
    "ajthemacboy": "I'd really like this ability as well. Say I want to use a proxy, say the PIA proxy proxy-nl.privateinternetaccess.com, but I don't want to manually specify each IP from nslookup. \n. I'd really like this ability as well. Say I want to use a proxy, say the PIA proxy proxy-nl.privateinternetaccess.com, but I don't want to manually specify each IP from nslookup. \n. ",
    "david9991": "Yes, set errno to EBADF fix the issue.\n. Yes, set errno to EBADF fix the issue.\n. ",
    "szoper": "I have a somewhat similar issue.\nMy app is making both remote connection to FTP server and local to the MySQL. The latter should just be passed through. Can we just make a ignored destination IPs / hostnames list that should just be connected directly?\n. Blast! You're brilliant!\nI haven't done make install-config not to interfere with legacy proxychains.conf in /etc - that's why I didn't know about localnet. Can you write about all possible options in wiki and/or README?\n. You're right, but official documentation gives an ability to know what\nsoftware is capable of without the need to download, compile, install and\ncheck each and every config file. Just my point of view.\n. I have a somewhat similar issue.\nMy app is making both remote connection to FTP server and local to the MySQL. The latter should just be passed through. Can we just make a ignored destination IPs / hostnames list that should just be connected directly?\n. Blast! You're brilliant!\nI haven't done make install-config not to interfere with legacy proxychains.conf in /etc - that's why I didn't know about localnet. Can you write about all possible options in wiki and/or README?\n. You're right, but official documentation gives an ability to know what\nsoftware is capable of without the need to download, compile, install and\ncheck each and every config file. Just my point of view.\n. ",
    "nileshanand2": "please help | socket error or timeout!\nmy config files \n[ProxyList]\nadd proxy here ...\nmeanwile\ndefaults set to \"tor\"\nsocks4     127.0.0.1 9050\nsocks5  101.200.168.93  1080\nsocks5  182.18.57.5 1080\n. please help | socket error or timeout!\nmy config files \n[ProxyList]\nadd proxy here ...\nmeanwile\ndefaults set to \"tor\"\nsocks4     127.0.0.1 9050\nsocks5  101.200.168.93  1080\nsocks5  182.18.57.5 1080\n. ",
    "sourhub": "This is on ubuntu 12.10 with different firefox versions. The newest one where I tried it and reproduced it is the current 28.0.\nI know that I could let firefox connect itself to the proxy, but then DNS-queries wouldn't be hidden, right?\n. This is on ubuntu 12.10 with different firefox versions. The newest one where I tried it and reproduced it is the current 28.0.\nI know that I could let firefox connect itself to the proxy, but then DNS-queries wouldn't be hidden, right?\n. ",
    "Axisar": "sorry, all works. just bad tested.\n. sorry, all works. just bad tested.\n. ",
    "felixonmars": "Ah, I see...\nThank you!\n. Hi, thanks for the notice :D\nHowever, I'm getting an error when running \"make install-config\":\nmake: *** No rule to make target '/build/proxychains-ng/pkg/proxychains-ng//etc/proxychains.conf', needed by 'install-config'.  Stop.\nAny idea?\n. Hrm, turned out that I used the wrong tarball. But with the new one I'm still getting the same error.\nMy DESTDIR was set to \"/build/proxychains-ng/pkg/proxychains-ng/\", prefix is \"/usr\", and sysconfdir is \"/etc\"\nI've tried to omit the last slash from DESTDIR, but that didn't make any difference.\nconfig.mak: https://paste.xinu.at/coV/\n. Ah, yes\n$ make -v\nGNU Make 4.0\n. Okay, thanks.\n. Works fine now, thanks!\n. Ah, I see...\nThank you!\n. Hi, thanks for the notice :D\nHowever, I'm getting an error when running \"make install-config\":\nmake: *** No rule to make target '/build/proxychains-ng/pkg/proxychains-ng//etc/proxychains.conf', needed by 'install-config'.  Stop.\nAny idea?\n. Hrm, turned out that I used the wrong tarball. But with the new one I'm still getting the same error.\nMy DESTDIR was set to \"/build/proxychains-ng/pkg/proxychains-ng/\", prefix is \"/usr\", and sysconfdir is \"/etc\"\nI've tried to omit the last slash from DESTDIR, but that didn't make any difference.\nconfig.mak: https://paste.xinu.at/coV/\n. Ah, yes\n$ make -v\nGNU Make 4.0\n. Okay, thanks.\n. Works fine now, thanks!\n. ",
    "nemysis": "I have this same with a30f514 in openSUSE when use\nmake install install-config\n./tools/install.sh -D -m 644 libproxychains4.so /usr/local/lib/libproxychains4.so\n./tools/install.sh -D -m 755 proxychains4 /usr/local/bin/proxychains4\nmake: *** No rule to make target `/usr/local/etc/proxychains.conf', needed by `install-config'.  Stop.\nmake -v\nGNU Make 3.82\n. I have the same Issue in openSUSE.\n. I have the same Issue in openSUSE.\n. Best is to restart proxychains-ng  when is changed your SSH Shell\n. Solved now use VPN that normal SSH Shell\nHave in\n``` \\n\n/etc/zsh.zshrc.local\nalias slogin-RamNode-tunnel='slogin RamNode -D TunnelPort'\n```\nAnd in\n``` \\n\n~/.proxychains/proxychains.conf-VPN\nsocks5 127.0.0.1 TunnelPort'\n```\nand when use\nslogin-RamNode-tunnel\nworks \nproxychains-wrapper claws-mail\n. Normal is in Port, and have worked before\nGNU_CONFIGURE=        yes\nSame get with configure.\n\\n\n/usr/local/ports/local/In-Review/net/proxychains-ng/work/proxychains-ng-4.11/ > ./configure\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... yes\nchecking whether $CC defines __OpenBSD__ ... no\nDone, now run gmake && gmake install\nHave tried with:\n``` \\n\ndo-configure:\n        @cd ${WRKSRC} ; ${SETENV} ${CONFIGURE_ENV} ./configure\npost-configure:\n        @${ECHO_CMD} \"PXCHAINS=proxychains\" >> ${WRKSRC}/config.mak\n        @${ECHO_CMD} \"LDSO_PATHNAME=libproxychains-4.so\" >> ${WRKSRC}/config.mak\npost-patch:\n        @${REINPLACE_CMD} \\\n                -e 's|libproxychains4.so|libproxychains-4.so|' \\\n                ${WRKSRC}/src/proxyresolv\n```\n. I have seen when use gmake in work than have not problems, only with\nmake stage\n\\n\n/usr/local/ports/local/In-Review/net/proxychains-ng/work/proxychains-ng-4.11/ > cat config.mak\nCC?=cc\nCPPFLAGS?= -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\nprefix=/usr/local\nexec_prefix=/usr/local\nbindir=/usr/local/bin\nlibdir=/usr/local/lib\nincludedir=/usr/local/include\nsysconfdir=/usr/local/etc\nCPPFLAGS+= -DSUPER_SECURE\nLIBDL=\nCFLAGS+=-DIS_BSD\nPXCHAINS=proxychains\nLDSO_PATHNAME=libproxychains-4.so\n. Thanks I use now in Makefile and works  build\n\\n\ndo-build:\n       cd ${WRKSRC} ; gmake\nhttps://www.freshports.org/net/proxychains-ng/\n. I have this same with a30f514 in openSUSE when use\nmake install install-config\n./tools/install.sh -D -m 644 libproxychains4.so /usr/local/lib/libproxychains4.so\n./tools/install.sh -D -m 755 proxychains4 /usr/local/bin/proxychains4\nmake: *** No rule to make target `/usr/local/etc/proxychains.conf', needed by `install-config'.  Stop.\nmake -v\nGNU Make 3.82\n. I have the same Issue in openSUSE.\n. I have the same Issue in openSUSE.\n. Best is to restart proxychains-ng  when is changed your SSH Shell\n. Solved now use VPN that normal SSH Shell\nHave in\n``` \\n\n/etc/zsh.zshrc.local\nalias slogin-RamNode-tunnel='slogin RamNode -D TunnelPort'\n```\nAnd in\n``` \\n\n~/.proxychains/proxychains.conf-VPN\nsocks5 127.0.0.1 TunnelPort'\n```\nand when use\nslogin-RamNode-tunnel\nworks \nproxychains-wrapper claws-mail\n. Normal is in Port, and have worked before\nGNU_CONFIGURE=        yes\nSame get with configure.\n\\n\n/usr/local/ports/local/In-Review/net/proxychains-ng/work/proxychains-ng-4.11/ > ./configure\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... yes\nchecking whether $CC defines __OpenBSD__ ... no\nDone, now run gmake && gmake install\nHave tried with:\n``` \\n\ndo-configure:\n        @cd ${WRKSRC} ; ${SETENV} ${CONFIGURE_ENV} ./configure\npost-configure:\n        @${ECHO_CMD} \"PXCHAINS=proxychains\" >> ${WRKSRC}/config.mak\n        @${ECHO_CMD} \"LDSO_PATHNAME=libproxychains-4.so\" >> ${WRKSRC}/config.mak\npost-patch:\n        @${REINPLACE_CMD} \\\n                -e 's|libproxychains4.so|libproxychains-4.so|' \\\n                ${WRKSRC}/src/proxyresolv\n```\n. I have seen when use gmake in work than have not problems, only with\nmake stage\n\\n\n/usr/local/ports/local/In-Review/net/proxychains-ng/work/proxychains-ng-4.11/ > cat config.mak\nCC?=cc\nCPPFLAGS?= -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\nprefix=/usr/local\nexec_prefix=/usr/local\nbindir=/usr/local/bin\nlibdir=/usr/local/lib\nincludedir=/usr/local/include\nsysconfdir=/usr/local/etc\nCPPFLAGS+= -DSUPER_SECURE\nLIBDL=\nCFLAGS+=-DIS_BSD\nPXCHAINS=proxychains\nLDSO_PATHNAME=libproxychains-4.so\n. Thanks I use now in Makefile and works  build\n\\n\ndo-build:\n       cd ${WRKSRC} ; gmake\nhttps://www.freshports.org/net/proxychains-ng/\n. ",
    "hexchain": "Works for me perfectly. Good work.\n. Works for me perfectly. Good work.\n. ",
    "shaolinint": "Hey man,\nsorry for the delay, anyway...\nproxychains4: ELF 64-bit LSB  executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=f96651756507fbc115217bbbf642896ec339d3ec, not stripped\nLinux ubuntu.slash.vm 3.13.0-34-generic #60-Ubuntu SMP Wed Aug 13 15:45:27 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n. ok man. I'l try to observe the behaviours... so far its happen when executing customs linux binary. I'll join IRC later on.\nThank you.\n. Hey man,\nsorry for the delay, anyway...\nproxychains4: ELF 64-bit LSB  executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=f96651756507fbc115217bbbf642896ec339d3ec, not stripped\nLinux ubuntu.slash.vm 3.13.0-34-generic #60-Ubuntu SMP Wed Aug 13 15:45:27 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n. ok man. I'l try to observe the behaviours... so far its happen when executing customs linux binary. I'll join IRC later on.\nThank you.\n. ",
    "pranavk": "For legal reasons and to mute rpmlint, it is necessary that COPYING file must not be patched. \nRef: http://fedoraproject.org/wiki/Common_Rpmlint_issues#incorrect-fsf-address\n. The Makefile missed some CPPFLAGS, CFLAGS for some targets.\n. Note that it would still be possible to load libproxychains4.so from the directory where proxychains4 binary resides because of the `own_dir'.\n. Sorry. Accidental push.\n. For legal reasons and to mute rpmlint, it is necessary that COPYING file must not be patched. \nRef: http://fedoraproject.org/wiki/Common_Rpmlint_issues#incorrect-fsf-address\n. The Makefile missed some CPPFLAGS, CFLAGS for some targets.\n. Note that it would still be possible to load libproxychains4.so from the directory where proxychains4 binary resides because of the `own_dir'.\n. Sorry. Accidental push.\n. ",
    "ashokfernandez": "Also if it isn't currently possible what's the best way to this? I've played around with the code and can identify when it's trying to connect to specified port, but using true_connect in this instance gives me EAFNOSUPPORT in node. What is true_connect? I can't find where it is defined.\n. Also if it isn't currently possible what's the best way to this? I've played around with the code and can identify when it's trying to connect to specified port, but using true_connect in this instance gives me EAFNOSUPPORT in node. What is true_connect? I can't find where it is defined.\n. ",
    "a7903": "@ashokfernandez  have solve this problem? now i have the same problem,can you give me some suggestion?\n. @ashokfernandez  have solve this problem? now i have the same problem,can you give me some suggestion?\n. ",
    "ShadowOfHarbringer": "Well, to try hosts that are not in /etc/hosts i have to install DNS server first.\nOK i guess i will try that now.\n. OK, i have checked it and the bug only applies to entries in /etc/hosts.\nWhen i use local DNS, it works.\n. Well, to try hosts that are not in /etc/hosts i have to install DNS server first.\nOK i guess i will try that now.\n. OK, i have checked it and the bug only applies to entries in /etc/hosts.\nWhen i use local DNS, it works.\n. ",
    "Exceen": "In what way an absolute path? I'm already using an absolute path for the Application I want to run.\n. In what way an absolute path? I'm already using an absolute path for the Application I want to run.\n. ",
    "sarum9in": "I tested this on Ubuntu 10.04. It does not have MSG_FASTOPEN and test_sendto fails to run in sendto mode even if we pass MSG_FASTOPEN manually. However it works under proxychains-ng.\nPlease take another look :)\n. I tested this on Ubuntu 10.04. It does not have MSG_FASTOPEN and test_sendto fails to run in sendto mode even if we pass MSG_FASTOPEN manually. However it works under proxychains-ng.\nPlease take another look :)\n. ",
    "hiendv": ":+1: \nI have the same problem with google-chrome\n. :+1: \nI have the same problem with google-chrome\n. ",
    "dx0x58": "Same problem. Ubuntu 15.04 x64\n. Yes, i tried. The same result.\n. Same problem. Ubuntu 15.04 x64\n. Yes, i tried. The same result.\n. ",
    "TheSqrtMinus1": "Here's what chromium does with proxychains:\nhttp://pastebin.com/beDyp3P5\nNormal chromium is too big to pastebin\n. I think it might be a problem with proxychains, as anything chromium based (including opera, chrome, vivaldi, chromium, &tc) gives a \nnanosleep({0, 2000001}, NULL)           = 0\nafter a while with strace\n. Here's what chromium does with proxychains:\nhttp://pastebin.com/beDyp3P5\nNormal chromium is too big to pastebin\n. I think it might be a problem with proxychains, as anything chromium based (including opera, chrome, vivaldi, chromium, &tc) gives a \nnanosleep({0, 2000001}, NULL)           = 0\nafter a while with strace\n. ",
    "roastduck": "Tested with Chrome, but still doesn't work.\n. Tested with Chrome, but still doesn't work.\n. ",
    "greenSnot": "+1. +1. ",
    "1600": "Unsolved still.. Unsolved still.. ",
    "nyancat18": "with chromium/inox works \nbut its slow as hell. with chromium/inox works \nbut its slow as hell. ",
    "arpitjindal97": "use the below command:\nchromium --proxy-server=\"socks5://127.0.0.1:9050\". use the below command:\nchromium --proxy-server=\"socks5://127.0.0.1:9050\". ",
    "xuezhaojiang": "I can't find a solution to solve the problem. And I wonder why the command \"proxychains google-chrome\" can't work.\nBut I find a way to make it work.\nproxychains bash\ngoogle-chrome. I can't find a solution to solve the problem. And I wonder why the command \"proxychains google-chrome\" can't work.\nBut I find a way to make it work.\nproxychains bash\ngoogle-chrome. ",
    "MicroBeast": "Linux/Debian sid amd64.\nChromium based tested (x64):\n- Google Chrome Stable/Beta/Canary (I don't use Chromium).\n- Vivaldi Snapshot & Stable.\n- Opera Stable.\n- Yandex Beta.\nDoing proxychains4 google-chrome|opera|vivaldi|yandex-browser (Chromium based) just work here. I don't need to do any tricks like LD_PRELOAD or weird need BASH mentioned above.\nI'm not sure why. \nWhat's on me;\n- I build proxychains-ng from git pull. No sources changed. Except the address & port in main config after.\n- PulseAudio in used.\n- I point the app directly to where app was installed. EX: /opt/google/chrome/google-chrome.\nI make own (stupid) DASH wrapper script for this.\n- The only Chromium flag I use is --disk-cache-dir=[where's the folder]\n- I use SSH tunnel through socks5 not TOR.\n- My Debian system started from its net-install iso. Read: A mess up distro.\nOnly when using rofi, Google Chrome sometime stuck on its startup.\nOn use, entire (any) browsers sometime hang for awhile, no errors.\nWhen it's (most of time) working, rendering/fetching speed, just normal.\nEdited: typos. Linux/Debian sid amd64.\nChromium based tested (x64):\n- Google Chrome Stable/Beta/Canary (I don't use Chromium).\n- Vivaldi Snapshot & Stable.\n- Opera Stable.\n- Yandex Beta.\nDoing proxychains4 google-chrome|opera|vivaldi|yandex-browser (Chromium based) just work here. I don't need to do any tricks like LD_PRELOAD or weird need BASH mentioned above.\nI'm not sure why. \nWhat's on me;\n- I build proxychains-ng from git pull. No sources changed. Except the address & port in main config after.\n- PulseAudio in used.\n- I point the app directly to where app was installed. EX: /opt/google/chrome/google-chrome.\nI make own (stupid) DASH wrapper script for this.\n- The only Chromium flag I use is --disk-cache-dir=[where's the folder]\n- I use SSH tunnel through socks5 not TOR.\n- My Debian system started from its net-install iso. Read: A mess up distro.\nOnly when using rofi, Google Chrome sometime stuck on its startup.\nOn use, entire (any) browsers sometime hang for awhile, no errors.\nWhen it's (most of time) working, rendering/fetching speed, just normal.\nEdited: typos. ",
    "tonsimple": "Have a chromium crash\ncommand line output:\n  user@debian:~$ proxychains4 /usr/bin/chromium\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[1:1:1029/162914.121982:FATAL:sandbox_linux.cc(180)] Check failed: sandbox::Credentials::MoveToNewUserNS(). \n0 0x585908e8bfbe \n1 0x585908ea061b \n2 0x5859076be4bd \n3 0x58590829b2d6 \n4 0x585908aece36 \n5 0x585908aee123 \n6 0x585908aecb30 \n7 0x5859075f4910 ChromeMain\n8 0x7fba8f641b45 __libc_start_main\n9 0x5859075f4789 \nReceived signal 6\n0 0x585908e8baab \n1 0x7fba96692890 \n2 0x7fba8f655067 gsignal\n3 0x7fba8f656448 abort\n4 0x585908e8aa22 \n5 0x585908ea0940 \n6 0x5859076be4bd \n7 0x58590829b2d6 \n8 0x585908aece36 \n9 0x585908aee123 \n10 0x585908aecb30 \n11 0x5859075f4910 ChromeMain\n12 0x7fba8f641b45 __libc_start_main\n13 0x5859075f4789 \nr8: ffff97f659b0e2d8  r9: ffff97f659b0e2c8 r10: 0000000000000008 r11: 0000000000000202\n r12: 000017f50e2dfa80 r13: 000017f50e34d240 r14: 00007ffeb47c2d88 r15: 00007ffeb47c2d78\n  di: 0000000000000001  si: 0000000000000001  bp: 000017f50e2e9000  bx: 0000000000000000\n  dx: 0000000000000006  ax: 0000000000000000  cx: 00007fba8f655067  sp: 00007ffeb47c22a8\n  ip: 00007fba8f655067 efl: 0000000000000202 cgf: 002b000000000033 erf: 0000000000000000\n trp: 0000000000000000 msk: 0000000000000000 cr2: 0000000000000000\n[end of stack trace]\n[1999:1999:1029/162914.126396:FATAL:zygote_host_impl_linux.cc(196)] Check failed: ReceiveFixedMessage(fds[0], kZygoteHelloMessage, sizeof(kZygoteHelloMessage), &real_pid). \n0 0x5556f6cc2fbe \n1 0x5556f6cd761b \n2 0x5556f64b2605 \n3 0x5556f64b165e \n4 0x5556f64b1c4e \n5 0x5556f61437ec \n6 0x5556f614c54a \n7 0x5556f6142e7c \n8 0x5556f6925123 \n9 0x5556f6923b30 \n10 0x5556f542b910 ChromeMain\n11 0x7e5e5b115b45 __libc_start_main\n12 0x5556f542b789 \nAborted\nuser@debian:~$ \n. Google suggests it's a sandboxing thing... but I don't wanna disable sandbox. Any hope that proxychains-ng will be made work with chromium's sandbox ?. Have a chromium crash\ncommand line output:\n  user@debian:~$ proxychains4 /usr/bin/chromium\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[1:1:1029/162914.121982:FATAL:sandbox_linux.cc(180)] Check failed: sandbox::Credentials::MoveToNewUserNS(). \n0 0x585908e8bfbe \n1 0x585908ea061b \n2 0x5859076be4bd \n3 0x58590829b2d6 \n4 0x585908aece36 \n5 0x585908aee123 \n6 0x585908aecb30 \n7 0x5859075f4910 ChromeMain\n8 0x7fba8f641b45 __libc_start_main\n9 0x5859075f4789 \nReceived signal 6\n0 0x585908e8baab \n1 0x7fba96692890 \n2 0x7fba8f655067 gsignal\n3 0x7fba8f656448 abort\n4 0x585908e8aa22 \n5 0x585908ea0940 \n6 0x5859076be4bd \n7 0x58590829b2d6 \n8 0x585908aece36 \n9 0x585908aee123 \n10 0x585908aecb30 \n11 0x5859075f4910 ChromeMain\n12 0x7fba8f641b45 __libc_start_main\n13 0x5859075f4789 \nr8: ffff97f659b0e2d8  r9: ffff97f659b0e2c8 r10: 0000000000000008 r11: 0000000000000202\n r12: 000017f50e2dfa80 r13: 000017f50e34d240 r14: 00007ffeb47c2d88 r15: 00007ffeb47c2d78\n  di: 0000000000000001  si: 0000000000000001  bp: 000017f50e2e9000  bx: 0000000000000000\n  dx: 0000000000000006  ax: 0000000000000000  cx: 00007fba8f655067  sp: 00007ffeb47c22a8\n  ip: 00007fba8f655067 efl: 0000000000000202 cgf: 002b000000000033 erf: 0000000000000000\n trp: 0000000000000000 msk: 0000000000000000 cr2: 0000000000000000\n[end of stack trace]\n[1999:1999:1029/162914.126396:FATAL:zygote_host_impl_linux.cc(196)] Check failed: ReceiveFixedMessage(fds[0], kZygoteHelloMessage, sizeof(kZygoteHelloMessage), &real_pid). \n0 0x5556f6cc2fbe \n1 0x5556f6cd761b \n2 0x5556f64b2605 \n3 0x5556f64b165e \n4 0x5556f64b1c4e \n5 0x5556f61437ec \n6 0x5556f614c54a \n7 0x5556f6142e7c \n8 0x5556f6925123 \n9 0x5556f6923b30 \n10 0x5556f542b910 ChromeMain\n11 0x7e5e5b115b45 __libc_start_main\n12 0x5556f542b789 \nAborted\nuser@debian:~$ \n. Google suggests it's a sandboxing thing... but I don't wanna disable sandbox. Any hope that proxychains-ng will be made work with chromium's sandbox ?. ",
    "mschwendt": "https://bugzilla.redhat.com/1147013#c37\n. https://bugzilla.redhat.com/1147013#c37\n. ",
    "vikerian": "check X(execute) permissions on .app and on binary :)\nViker\nOn 02/24/2015 12:19 PM, nodje wrote:\n\nI'm trying to run an .app file with proxychain4 and I seem to be out \nof luck:\n|sudo proxychains4 /Applications/BBC\\ iPlayer\\ Downloads.app\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.dylib\nproxychains can't load process....: Permission denied\n|\nI can't think of any reason why there could be a permission problem. \nWhat could cause this?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/rofl0r/proxychains-ng/issues/49.\n. Hi,\n~# find /usr/ -name libproxychains4.so -type f\n~# ln -s  /usr/lib/libproxychains4.so\nViker\n\nOn 01/04/2016 01:16 PM, Alex Gouvea Vasconcelos wrote:\n\nI can't run Steam on my Mint 64. I'm behind a socks5 proxy with no\nauthentication needed. My conf file is the default one. I just\ncommented the last line and added the following one:\n|socks5 200.169.16.19 3128|\nWhen I try\n|proxychains4 steam|\nERROR: ld.so: object '/usr/lib/libproxychains4.so' from LD_PRELOAD\ncannot be preloaded (wrong ELF class: ELFCLASS64): ignored.\nand then other errors follow this one...\nAny useful tip?\nThanks.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/102.\n\n\nS pozdravem Vilem Kebrt\nemail: viker@viker.cz\ntel: +420 604 550 132\n. wrong ELF class: ELFCLASS64 - You're right , sorry...\nViker\nOn 01/04/2016 02:14 PM, rofl0r wrote:\n\n@vikerian https://github.com/vikerian i believe you are mistaken.\nit seems steam is a 32 bit app so @alexgv99\nhttps://github.com/alexgv99 needs a 32bit proxychains\nhint: |make clean ; CC=\"gcc -m32\" ./configure ; make|\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/102#issuecomment-168674162.\n\n\nS pozdravem Vilem Kebrt\nemail: viker@viker.cz\ntel: +420 604 550 132\n. check X(execute) permissions on .app and on binary :)\nViker\nOn 02/24/2015 12:19 PM, nodje wrote:\n\nI'm trying to run an .app file with proxychain4 and I seem to be out \nof luck:\n|sudo proxychains4 /Applications/BBC\\ iPlayer\\ Downloads.app\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.dylib\nproxychains can't load process....: Permission denied\n|\nI can't think of any reason why there could be a permission problem. \nWhat could cause this?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/rofl0r/proxychains-ng/issues/49.\n. Hi,\n~# find /usr/ -name libproxychains4.so -type f\n~# ln -s  /usr/lib/libproxychains4.so\nViker\n\nOn 01/04/2016 01:16 PM, Alex Gouvea Vasconcelos wrote:\n\nI can't run Steam on my Mint 64. I'm behind a socks5 proxy with no\nauthentication needed. My conf file is the default one. I just\ncommented the last line and added the following one:\n|socks5 200.169.16.19 3128|\nWhen I try\n|proxychains4 steam|\nERROR: ld.so: object '/usr/lib/libproxychains4.so' from LD_PRELOAD\ncannot be preloaded (wrong ELF class: ELFCLASS64): ignored.\nand then other errors follow this one...\nAny useful tip?\nThanks.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/102.\n\n\nS pozdravem Vilem Kebrt\nemail: viker@viker.cz\ntel: +420 604 550 132\n. wrong ELF class: ELFCLASS64 - You're right , sorry...\nViker\nOn 01/04/2016 02:14 PM, rofl0r wrote:\n\n@vikerian https://github.com/vikerian i believe you are mistaken.\nit seems steam is a 32 bit app so @alexgv99\nhttps://github.com/alexgv99 needs a 32bit proxychains\nhint: |make clean ; CC=\"gcc -m32\" ./configure ; make|\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/102#issuecomment-168674162.\n\n\nS pozdravem Vilem Kebrt\nemail: viker@viker.cz\ntel: +420 604 550 132\n. ",
    "nodje": "permissions are all x on .app and binary, but I tried to run the binary directly and got\nsudo proxychains4 /Applications/BBC\\ iPlayer\\ Downloads.app/Contents/MacOS/BBC\\ iPlayer\\ Downloads \n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.dylib\ndyld: could not load inserted library '/usr/lib/libproxychains4.dylib' because no suitable image found.  Did find:\n    /usr/lib/libproxychains4.dylib: mach-o, but wrong architecture\nThis app is using Adobe AIR behind the scene, I guess it would be the culprit. I compiled for my platform so I guess the lib is 64bit. Can I compile for both 32b & 64b arch and would it solve this issue?\n. eheh :)\njust great, don't have to mess up with transparent proxying\n. permissions are all x on .app and binary, but I tried to run the binary directly and got\nsudo proxychains4 /Applications/BBC\\ iPlayer\\ Downloads.app/Contents/MacOS/BBC\\ iPlayer\\ Downloads \n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.dylib\ndyld: could not load inserted library '/usr/lib/libproxychains4.dylib' because no suitable image found.  Did find:\n    /usr/lib/libproxychains4.dylib: mach-o, but wrong architecture\nThis app is using Adobe AIR behind the scene, I guess it would be the culprit. I compiled for my platform so I guess the lib is 64bit. Can I compile for both 32b & 64b arch and would it solve this issue?\n. eheh :)\njust great, don't have to mess up with transparent proxying\n. ",
    "sysfu": "Looking at the patches for an older port of proxychains-3.1 posted to the OpenBSD ports mailing list, I think this problem can be fixed by changing some of the pointer types.\n```\n--- proxychains/Makefile.am.orig        Sat Sep 19 05:35:02 2009\n+++ proxychains/Makefile.am     Sat Sep 19 05:35:26 2009\n@@ -22,7 +22,7 @@ INCLUDES= $(all_includes)\n#proxychains_LDFLAGS = $(all_libraries)\n lib_LTLIBRARIES = libproxychains.la\n-libproxychains_la_LDFLAGS = -version-info 3:0:0 $(all_libraries)\n+libproxychains_la_LDFLAGS = -version-info 0:0:0 $(all_libraries)\n libproxychains_la_LIBADD= -ldl\n noinst_HEADERS = core.h\n libproxychains_la_SOURCES= libproxychains.c core.c\n--- proxychains/Makefile.in.orig        Sat Sep 19 05:35:10 2009\n+++ proxychains/Makefile.in     Sat Sep 19 05:35:34 2009\n@@ -104,7 +104,7 @@ INCLUDES = $(all_includes)\n#proxychains_LDFLAGS = $(all_libraries)\n lib_LTLIBRARIES = libproxychains.la\n-libproxychains_la_LDFLAGS = -version-info 3:0:0 $(all_libraries)\n+libproxychains_la_LDFLAGS = -version-info 0:0:0 $(all_libraries)\n libproxychains_la_LIBADD = -ldl\n noinst_HEADERS = core.h\n libproxychains_la_SOURCES = libproxychains.c core.c\n--- proxychains/core.h.orig     Sat Sep 19 09:17:50 2009\n+++ proxychains/core.h  Sat Sep 19 09:18:46 2009\n@@ -83,8 +83,8 @@ freeaddrinfo_t true_freeaddrinfo;\ntypedef int (getnameinfo_t) (const struct sockaddr ,\n                socklen_t, char ,\n-               socklen_t, char ,\n-               socklen_t, unsigned int);\n+               size_t, char *,\n+               size_t, int);\n getnameinfo_t true_getnameinfo;\ntypedef struct hostent (gethostbyaddr_t) (const void , socklen_t, int);\n--- proxychains/libproxychains.c.orig   Sat Sep 19 09:18:00 2009\n+++ proxychains/libproxychains.c        Sat Sep 19 09:18:52 2009\n@@ -290,8 +290,8 @@ void freeaddrinfo(struct addrinfo res)\nint getnameinfo (const struct sockaddr * sa,\n                        socklen_t salen, char * host,\n-                       socklen_t hostlen, char * serv,\n-                       socklen_t servlen, unsigned int flags)\n+                       size_t hostlen, char * serv,\n+                       size_t servlen, int flags)\n {\n        int ret = 0;\n        if(!init_l)\n--- proxychains.lsm.orig        Sat Sep 19 05:22:36 2009\n@@ -1,6 +1,6 @@\n Begin3\n Title:          ProxyChains \n-Version:        3.0\n+Version:        0.0\n Entered-date: \n Description:  \n Keywords:\n```\n. OK, thanks for the explanation. I was just trying to run down the issue as far as I could by posting the old ports patch. \n$ uname -s\nOpenBSD\n$ uname -a\nOpenBSD pfylap.lan 5.6 GENERIC.MP#5 i386\n. OpenBSD releases every six months on May 1st and Nov 1st. \nSo the 5.6 (current release) dates from Nov 1st 2014.\nI manually inspected the configure file to make sure that the changes in the patch were present.\n$ sudo git clone -b openbsd https://github.com/rofl0r/proxychains-ng.git \nCloning into 'proxychains-ng'...\nremote: Counting objects: 886, done.\nremote: Compressing objects: 100% (5/5), done.\nremote: Total 886 (delta 0), reused 0 (delta 0), pack-reused 881\nReceiving objects: 100% (886/886), 492.32 KiB | 276.00 KiB/s, done.\nResolving deltas: 100% (579/579), done.\nChecking connectivity... done.\n$ cd proxychains-ng/                                                                                                                                                    \n$ git branch\n* openbsd\n$ sudo ./configure --prefix=/usr/local --sysconfdir=/etc                 \nDone, now run gmake && gmake install\n$ sudo gmake\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/version.o src/version.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/core.o src/core.c\nsrc/core.c:791: error: conflicting types for 'getservbyname_r'\n/usr/include/netdb.h:312: error: previous declaration of 'getservbyname_r' was here\nMakefile:82: recipe for target 'src/core.o' failed\ngmake: *** [src/core.o] Error 1\n. That did the trick, thank you.\n$ sudo git clone -b openbsd https://github.com/rofl0r/proxychains-ng.git \nCloning into 'proxychains-ng'...\nremote: Counting objects: 890, done.\nremote: Compressing objects: 100% (9/9), done.\nremote: Total 890 (delta 3), reused 0 (delta 0), pack-reused 881\nReceiving objects: 100% (890/890), 492.66 KiB | 226.00 KiB/s, done.\nResolving deltas: 100% (582/582), done.\nChecking connectivity... done.\n$ git branch\nfatal: Not a git repository (or any parent up to mount point /usr/local)\nStopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).\n$ cd proxychains-ng/                                                                                                                                                    \n$ git branch         \n* openbsd\n$ sudo ./configure --prefix=/usr/local --sysconfdir=/etc\nDone, now run gmake && gmake install\n$ sudo gmake\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/version.o src/version.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/core.o src/core.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/common.o src/common.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/shm.o src/shm.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/allocator_thread.o src/allocator_thread.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/ip_type.o src/ip_type.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/stringdump.o src/stringdump.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/hostsreader.o src/hostsreader.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/hash.o src/hash.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/debug.o src/debug.c\ncc -shared -fPIC -Wl,--no-as-needed  -Wl,-soname=libproxychains4.so -lpthread  -o libproxychains4.so src/nameinfo.o src/version.o src/core.o src/common.o src/libproxychains.o src/shm.o src/allocator_thread.o src/ip_type.o src/stringdump.o src/hostsreader.o src/hash.o src/debug.o\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/main.o src/main.c\ncc -fPIC -Wl,--no-as-needed  src/main.o src/common.o -o proxychains4\n$ sudo gmake install\n./tools/install.sh -D -m 644 libproxychains4.so /usr/local/lib/libproxychains4.so\n./tools/install.sh -D -m 755 proxychains4 /usr/local/bin/proxychains4\n. Issue appears to have been resolved, unable to reproduce.\n. No, this is the first opportunity I've had to test it since you fixed the compilation problem.\n. I'm having a hard time finding information about how or where to load the symbol names for OpenBSD. If you have any suggestions please let me know.\n. Yes, fails to build with Makefile mod\n/usr/bin/ld: cannot find -lsocket\ncollect2: ld returned 1 exit status\nMakefile:85: recipe for target 'libproxychains4.so' failed\ngmake: *** [libproxychains4.so] Error 1\n. Also, if you need an OpenBSD 5.7 system to bang on, send me your pub SSH key and I'll reply with access info. XMPP/OTR contact info is in my profile.\n. Looking at the patches for an older port of proxychains-3.1 posted to the OpenBSD ports mailing list, I think this problem can be fixed by changing some of the pointer types.\n```\n--- proxychains/Makefile.am.orig        Sat Sep 19 05:35:02 2009\n+++ proxychains/Makefile.am     Sat Sep 19 05:35:26 2009\n@@ -22,7 +22,7 @@ INCLUDES= $(all_includes)\n#proxychains_LDFLAGS = $(all_libraries)\n lib_LTLIBRARIES = libproxychains.la\n-libproxychains_la_LDFLAGS = -version-info 3:0:0 $(all_libraries)\n+libproxychains_la_LDFLAGS = -version-info 0:0:0 $(all_libraries)\n libproxychains_la_LIBADD= -ldl\n noinst_HEADERS = core.h\n libproxychains_la_SOURCES= libproxychains.c core.c\n--- proxychains/Makefile.in.orig        Sat Sep 19 05:35:10 2009\n+++ proxychains/Makefile.in     Sat Sep 19 05:35:34 2009\n@@ -104,7 +104,7 @@ INCLUDES = $(all_includes)\n#proxychains_LDFLAGS = $(all_libraries)\n lib_LTLIBRARIES = libproxychains.la\n-libproxychains_la_LDFLAGS = -version-info 3:0:0 $(all_libraries)\n+libproxychains_la_LDFLAGS = -version-info 0:0:0 $(all_libraries)\n libproxychains_la_LIBADD = -ldl\n noinst_HEADERS = core.h\n libproxychains_la_SOURCES = libproxychains.c core.c\n--- proxychains/core.h.orig     Sat Sep 19 09:17:50 2009\n+++ proxychains/core.h  Sat Sep 19 09:18:46 2009\n@@ -83,8 +83,8 @@ freeaddrinfo_t true_freeaddrinfo;\ntypedef int (getnameinfo_t) (const struct sockaddr ,\n                socklen_t, char ,\n-               socklen_t, char ,\n-               socklen_t, unsigned int);\n+               size_t, char *,\n+               size_t, int);\n getnameinfo_t true_getnameinfo;\ntypedef struct hostent (gethostbyaddr_t) (const void , socklen_t, int);\n--- proxychains/libproxychains.c.orig   Sat Sep 19 09:18:00 2009\n+++ proxychains/libproxychains.c        Sat Sep 19 09:18:52 2009\n@@ -290,8 +290,8 @@ void freeaddrinfo(struct addrinfo res)\nint getnameinfo (const struct sockaddr * sa,\n                        socklen_t salen, char * host,\n-                       socklen_t hostlen, char * serv,\n-                       socklen_t servlen, unsigned int flags)\n+                       size_t hostlen, char * serv,\n+                       size_t servlen, int flags)\n {\n        int ret = 0;\n        if(!init_l)\n--- proxychains.lsm.orig        Sat Sep 19 05:22:36 2009\n@@ -1,6 +1,6 @@\n Begin3\n Title:          ProxyChains \n-Version:        3.0\n+Version:        0.0\n Entered-date: \n Description:  \n Keywords:\n```\n. OK, thanks for the explanation. I was just trying to run down the issue as far as I could by posting the old ports patch. \n$ uname -s\nOpenBSD\n$ uname -a\nOpenBSD pfylap.lan 5.6 GENERIC.MP#5 i386\n. OpenBSD releases every six months on May 1st and Nov 1st. \nSo the 5.6 (current release) dates from Nov 1st 2014.\nI manually inspected the configure file to make sure that the changes in the patch were present.\n$ sudo git clone -b openbsd https://github.com/rofl0r/proxychains-ng.git \nCloning into 'proxychains-ng'...\nremote: Counting objects: 886, done.\nremote: Compressing objects: 100% (5/5), done.\nremote: Total 886 (delta 0), reused 0 (delta 0), pack-reused 881\nReceiving objects: 100% (886/886), 492.32 KiB | 276.00 KiB/s, done.\nResolving deltas: 100% (579/579), done.\nChecking connectivity... done.\n$ cd proxychains-ng/                                                                                                                                                    \n$ git branch\n* openbsd\n$ sudo ./configure --prefix=/usr/local --sysconfdir=/etc                 \nDone, now run gmake && gmake install\n$ sudo gmake\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/version.o src/version.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/core.o src/core.c\nsrc/core.c:791: error: conflicting types for 'getservbyname_r'\n/usr/include/netdb.h:312: error: previous declaration of 'getservbyname_r' was here\nMakefile:82: recipe for target 'src/core.o' failed\ngmake: *** [src/core.o] Error 1\n. That did the trick, thank you.\n$ sudo git clone -b openbsd https://github.com/rofl0r/proxychains-ng.git \nCloning into 'proxychains-ng'...\nremote: Counting objects: 890, done.\nremote: Compressing objects: 100% (9/9), done.\nremote: Total 890 (delta 3), reused 0 (delta 0), pack-reused 881\nReceiving objects: 100% (890/890), 492.66 KiB | 226.00 KiB/s, done.\nResolving deltas: 100% (582/582), done.\nChecking connectivity... done.\n$ git branch\nfatal: Not a git repository (or any parent up to mount point /usr/local)\nStopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).\n$ cd proxychains-ng/                                                                                                                                                    \n$ git branch         \n* openbsd\n$ sudo ./configure --prefix=/usr/local --sysconfdir=/etc\nDone, now run gmake && gmake install\n$ sudo gmake\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/version.o src/version.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/core.o src/core.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/common.o src/common.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/shm.o src/shm.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/allocator_thread.o src/allocator_thread.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/ip_type.o src/ip_type.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/stringdump.o src/stringdump.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/hostsreader.o src/hostsreader.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/hash.o src/hash.c\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/debug.o src/debug.c\ncc -shared -fPIC -Wl,--no-as-needed  -Wl,-soname=libproxychains4.so -lpthread  -o libproxychains4.so src/nameinfo.o src/version.o src/core.o src/common.o src/libproxychains.o src/shm.o src/allocator_thread.o src/ip_type.o src/stringdump.o src/hostsreader.o src/hash.o src/debug.o\ncc  -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/main.o src/main.c\ncc -fPIC -Wl,--no-as-needed  src/main.o src/common.o -o proxychains4\n$ sudo gmake install\n./tools/install.sh -D -m 644 libproxychains4.so /usr/local/lib/libproxychains4.so\n./tools/install.sh -D -m 755 proxychains4 /usr/local/bin/proxychains4\n. Issue appears to have been resolved, unable to reproduce.\n. No, this is the first opportunity I've had to test it since you fixed the compilation problem.\n. I'm having a hard time finding information about how or where to load the symbol names for OpenBSD. If you have any suggestions please let me know.\n. Yes, fails to build with Makefile mod\n/usr/bin/ld: cannot find -lsocket\ncollect2: ld returned 1 exit status\nMakefile:85: recipe for target 'libproxychains4.so' failed\ngmake: *** [libproxychains4.so] Error 1\n. Also, if you need an OpenBSD 5.7 system to bang on, send me your pub SSH key and I'll reply with access info. XMPP/OTR contact info is in my profile.\n. ",
    "jryaonj": "Same problem here\nWhen compiled in CentOS 7, everything is OK and proxychains4 runs fine\nbut in Ubuntu 14.10, compilation is OK, but when I ran any program, all results as:\nsymbol lookup error: ./libproxychains4.so: undefined symbol: pthread_once\nIf I change the lpthread to pthread, then results like this:\nsymbol lookup error: ./libproxychains4.so: undefined symbol: dlsym\nhave no idea how to change the compile option\n. @jackyzy823  THX so much!\nNow everything works as the original proxychains3 does\n. Same problem here\nWhen compiled in CentOS 7, everything is OK and proxychains4 runs fine\nbut in Ubuntu 14.10, compilation is OK, but when I ran any program, all results as:\nsymbol lookup error: ./libproxychains4.so: undefined symbol: pthread_once\nIf I change the lpthread to pthread, then results like this:\nsymbol lookup error: ./libproxychains4.so: undefined symbol: dlsym\nhave no idea how to change the compile option\n. @jackyzy823  THX so much!\nNow everything works as the original proxychains3 does\n. ",
    "jackyzy823": "in Makefile line 85\nchange to:\n$(CC) -shared  $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME)  -lpthread $(LIBDL) -o $@ $(LOBJS)\n. You may google gcc link order for  more detail and further understanding. :-)\n. in Makefile line 85\nchange to:\n$(CC) -shared  $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME)  -lpthread $(LIBDL) -o $@ $(LOBJS)\n. You may google gcc link order for  more detail and further understanding. :-)\n. ",
    "kierr": "Thank you @jackyzy823 !\nThis has solved the issue for me too.\n. Thank you @jackyzy823 !\nThis has solved the issue for me too.\n. ",
    "proudzhu": "This just breaks the linking on archlinux using gcc5.\n$(CC) -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS) works fine.\n. I'm using release 4.9.\nthe output of running proxychains ls\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\nls: symbol lookup error: /usr/lib/libproxychains4.so: undefined symbol: pthread_once\nbut running proxychains curl *** is fine.\nrevert this commit https://github.com/rofl0r/proxychains-ng/commit/377b474b40bb34fde018301294e02850dac928fe, everything works.\nI think it is related with gcc versions, maybe they change some default behaviours during gcc updates.\n@Kieters @jryaonj Can you provides your gcc versions?\nAnd the PKGBUILD is here proxychains-ng\n. @rofl0r \nFinally I found that I have \"--as-needed\" in my local LDFLAGS, it is set in the default makepkg.conf which will be loaded when building a package in archlinux.\nThen I found this wiki,  in section \"Fixing problems with --as-needed\", it says \"libraries don't create problems, because they are allowed to have undefined symbols\". \nSo in my system, $(CC) -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS) works, but $(CC) -shared $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -lpthread $(LIBDL) -o $@ $(LOBJS) fails. \nMaybe we should move  \"-lpthread $(LIBDL)\" before $(LDFLAGS).\nBut I cannot figure out why the other users in the post failed to link against libpthread.\nIf it is a gcc link order issue as @jackyzy823 says ( but I'm confused as there is not other library in the argument), maybe we could change to\n$(CC) -shared  $(LD_SET_SONAME)$(LDSO_PATHNAME) -lpthread $(LIBDL) $(LDFLAGS) -o $@ $(LOBJS)?\n. @rofl0r it works now, thanks.\n. This should fix building in archlinux or anyone using --as-needed in local LDFLAGS \nhttps://github.com/rofl0r/proxychains-ng/issues/53\n. This just breaks the linking on archlinux using gcc5.\n$(CC) -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS) works fine.\n. I'm using release 4.9.\nthe output of running proxychains ls\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\nls: symbol lookup error: /usr/lib/libproxychains4.so: undefined symbol: pthread_once\nbut running proxychains curl *** is fine.\nrevert this commit https://github.com/rofl0r/proxychains-ng/commit/377b474b40bb34fde018301294e02850dac928fe, everything works.\nI think it is related with gcc versions, maybe they change some default behaviours during gcc updates.\n@Kieters @jryaonj Can you provides your gcc versions?\nAnd the PKGBUILD is here proxychains-ng\n. @rofl0r \nFinally I found that I have \"--as-needed\" in my local LDFLAGS, it is set in the default makepkg.conf which will be loaded when building a package in archlinux.\nThen I found this wiki,  in section \"Fixing problems with --as-needed\", it says \"libraries don't create problems, because they are allowed to have undefined symbols\". \nSo in my system, $(CC) -shared -lpthread $(LIBDL) $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -o $@ $(LOBJS) works, but $(CC) -shared $(LDFLAGS) $(LD_SET_SONAME)$(LDSO_PATHNAME) -lpthread $(LIBDL) -o $@ $(LOBJS) fails. \nMaybe we should move  \"-lpthread $(LIBDL)\" before $(LDFLAGS).\nBut I cannot figure out why the other users in the post failed to link against libpthread.\nIf it is a gcc link order issue as @jackyzy823 says ( but I'm confused as there is not other library in the argument), maybe we could change to\n$(CC) -shared  $(LD_SET_SONAME)$(LDSO_PATHNAME) -lpthread $(LIBDL) $(LDFLAGS) -o $@ $(LOBJS)?\n. @rofl0r it works now, thanks.\n. This should fix building in archlinux or anyone using --as-needed in local LDFLAGS \nhttps://github.com/rofl0r/proxychains-ng/issues/53\n. ",
    "kccai": "The package proxychains-ng 4.9-1 I installed from the Arch Linux repository also throws out the error below when I run proxychains firefox\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\nsh: symbol lookup error: /usr/lib/libproxychains4.so undefined symbol: pthread_once\nBut the version proxychains-ng 4.8.1-1 works fine.\n. The package proxychains-ng 4.9-1 I installed from the Arch Linux repository also throws out the error below when I run proxychains firefox\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\nsh: symbol lookup error: /usr/lib/libproxychains4.so undefined symbol: pthread_once\nBut the version proxychains-ng 4.8.1-1 works fine.\n. ",
    "wirehack7": "So, this will keep broken? I cannot compile everything on my own with musl. Or using that mentioned chroot workaround. \nPardon me my question, but are there proxy resolutions like proxychains which are working with that? Tsocks seems also to be not working properly. \n. So, this will keep broken? I cannot compile everything on my own with musl. Or using that mentioned chroot workaround. \nPardon me my question, but are there proxy resolutions like proxychains which are working with that? Tsocks seems also to be not working properly. \n. ",
    "baileyparker": "Digging through the source, I've found that the correct flag is -q. However, is there a way to suppress this output in config?\n. Further digging reveals that there is an environment variable PROXYCHAINS_QUIET_MODE that if set to 1 should suppress output. However this doesn't appear to suppress the lines mentioned in my first post on this issue.\n. Digging through the source, I've found that the correct flag is -q. However, is there a way to suppress this output in config?\n. Further digging reveals that there is an environment variable PROXYCHAINS_QUIET_MODE that if set to 1 should suppress output. However this doesn't appear to suppress the lines mentioned in my first post on this issue.\n. ",
    "mtasaka": "Well, I already told Pranav that when building proxychains-ng (before installing), libproxychains4.so and proxychains are created on the same directory, and when trying to use proxychains4 on the build directory (as ./proxychains4), libproxychains4 on the same directory is loaded, because of own_dir entry, so there should be no problem when trying to use proxychains4 on the build directory (without installing). \nOn the contrary, allowing arbitrary \".\" is security flaw. In this sense, \nhttps://github.com/rofl0r/proxychains-ng/blob/master/src/main.c#L51\nis also dangerous. If l is 0, some system-wide directory (like \"/lib\") shoule be returned.\nOr you can use realpath(argv0, NULL)\nhttp://man7.org/linux/man-pages/man3/realpath.3.html\n. Note that realpath() resolves symlink, so using realpath() avoilds symlink attack.\n. Well, I already told Pranav that when building proxychains-ng (before installing), libproxychains4.so and proxychains are created on the same directory, and when trying to use proxychains4 on the build directory (as ./proxychains4), libproxychains4 on the same directory is loaded, because of own_dir entry, so there should be no problem when trying to use proxychains4 on the build directory (without installing). \nOn the contrary, allowing arbitrary \".\" is security flaw. In this sense, \nhttps://github.com/rofl0r/proxychains-ng/blob/master/src/main.c#L51\nis also dangerous. If l is 0, some system-wide directory (like \"/lib\") shoule be returned.\nOr you can use realpath(argv0, NULL)\nhttp://man7.org/linux/man-pages/man3/realpath.3.html\n. Note that realpath() resolves symlink, so using realpath() avoilds symlink attack.\n. ",
    "eyeinsky": "This was what I was actually hoping to avoid, but poin taken.\nI found something that implemented the simplest version of this in https://github.com/haad/proxychains (the function 'simple_socks5_env' does it in the file 'libproxychains.c'), but the solution there seems kind of hacky.. And as /tmp goes, or can be made to go through, an in-ram filesystem, it seems an adequate solution.\n. This was what I was actually hoping to avoid, but poin taken.\nI found something that implemented the simplest version of this in https://github.com/haad/proxychains (the function 'simple_socks5_env' does it in the file 'libproxychains.c'), but the solution there seems kind of hacky.. And as /tmp goes, or can be made to go through, an in-ram filesystem, it seems an adequate solution.\n. ",
    "ravomavain": "Sure ! Just remove the 3 in the first line ^^ I just tested it with python2 and it also works fine (well, it segfault, but that's the point of it)\n. Here's a C equivalent. You can change NB_THREADS if it doesn't segfault with 150 threads.\n``` C\n/ gcc -g -lpthread -DNB_THREADS=150 -o poc-segfault poc-segfault.c  /\ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \nifndef NB_THREADS\ndefine NB_THREADS 150\nendif\nvoid conn(void user_data) {\n    int sock;\n    struct addrinfo hints, *res;\n    char buf[1024];\n    memset(&hints, 0, sizeof hints);\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    sprintf(buf, \"%d.example.noresolv\", (intptr_t)user_data);\n    getaddrinfo(buf, \"http\", &hints, &res);\n    sock = socket(res->ai_family, res->ai_socktype, res->ai_protocol);\n    connect(sock, res->ai_addr, res->ai_addrlen);\n    close(sock);\n    return NULL;\n}\nint main() {\n    int s[NB_THREADS], i;\n    pthread_t t[NB_THREADS];\n    for(i=0;i<NB_THREADS;i++)\n        pthread_create(&t[i], NULL, conn, (void*) (intptr_t) i);\nfor(i=0;i<NB_THREADS;i++)\n    pthread_join(t[i], NULL);\nreturn 0;\n\n}\n```\n. Well actually I didn't test for getaddrinfo response since proxychains with proxy_dns always return an answer (even if the domain doesn't exist).\n. Actually it also work without threading:\n``` C\n/ gcc -g -DNB_THREADS=150 -o poc-segfault poc-segfault.c  /\ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \nifndef NB_THREADS\ndefine NB_THREADS 150\nendif\nvoid conn(void user_data) {\n    int sock;\n    struct addrinfo hints, *res;\n    char buf[1024];\n    memset(&hints, 0, sizeof hints);\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    sprintf(buf, \"%d.example.noresolv\", (intptr_t)user_data);\n    getaddrinfo(buf, \"http\", &hints, &res);\n    sock = socket(res->ai_family, res->ai_socktype, res->ai_protocol);\n    connect(sock, res->ai_addr, res->ai_addrlen);\n    close(sock);\n    return NULL;\n}\nint main() {\n    int s[NB_THREADS], i;\n    for(i=0;i<NB_THREADS;i++) {\n        printf(\"%d\\n\",i);\n        conn((void) (intptr_t)i);\n    }\n    for(i=0;i<NB_THREADS;i++) {\n        printf(\"%d\\n\",i);\n        conn((void) (intptr_t)i);\n    }\nreturn 0;\n\n}\n```\nAfter some investigation, it appears that sometime realloc (L86) move the pointer to internal_ips->list when it can't grow it in place. And when it does so, stings in internal_ips->list[i]->string get messed up (at least for the first values of i) and probably deallocaded at some point (hence the segfault).\n. Ok found the issue: internal_ips->list[i]->string is allocated using dumpstring which use a chunk of memory that it realloc when needed. The problem is that this realloc may move the chunk of memory making all pointers (the internal_ips->list[i]->string) invalid. Why do we use that dumpstring thing instead of standard memory allocation in the first place ? internal_ips is only accessed by one thread, isn't it ? If we really need this dumpstring thing, we should store a ptrdiif_t which will be relative to the start of memory chunk and then only compute the pointer when accessed to handle properly memory move induced by realloc\n. Yeah ! Thank you :-)\n. I think your git is already configured to use your proxy at 127.0.0.1:1080.\nRun git config -l and env and look for any reference to proxy or the address 127.0.0.1:1080\n. On src/core.c#L467 we have:\ni = 0 + (unsigned int) (proxy_count * 1.0 * rand() / (RAND_MAX + 1.0));\nMaybe there's some overflow or something during type conversion. Why not simply using i = rand()%proxy_count ?\n. Sure ! Just remove the 3 in the first line ^^ I just tested it with python2 and it also works fine (well, it segfault, but that's the point of it)\n. Here's a C equivalent. You can change NB_THREADS if it doesn't segfault with 150 threads.\n``` C\n/ gcc -g -lpthread -DNB_THREADS=150 -o poc-segfault poc-segfault.c  /\ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \nifndef NB_THREADS\ndefine NB_THREADS 150\nendif\nvoid conn(void user_data) {\n    int sock;\n    struct addrinfo hints, *res;\n    char buf[1024];\n    memset(&hints, 0, sizeof hints);\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    sprintf(buf, \"%d.example.noresolv\", (intptr_t)user_data);\n    getaddrinfo(buf, \"http\", &hints, &res);\n    sock = socket(res->ai_family, res->ai_socktype, res->ai_protocol);\n    connect(sock, res->ai_addr, res->ai_addrlen);\n    close(sock);\n    return NULL;\n}\nint main() {\n    int s[NB_THREADS], i;\n    pthread_t t[NB_THREADS];\n    for(i=0;i<NB_THREADS;i++)\n        pthread_create(&t[i], NULL, conn, (void*) (intptr_t) i);\nfor(i=0;i<NB_THREADS;i++)\n    pthread_join(t[i], NULL);\nreturn 0;\n\n}\n```\n. Well actually I didn't test for getaddrinfo response since proxychains with proxy_dns always return an answer (even if the domain doesn't exist).\n. Actually it also work without threading:\n``` C\n/ gcc -g -DNB_THREADS=150 -o poc-segfault poc-segfault.c  /\ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \ninclude \nifndef NB_THREADS\ndefine NB_THREADS 150\nendif\nvoid conn(void user_data) {\n    int sock;\n    struct addrinfo hints, *res;\n    char buf[1024];\n    memset(&hints, 0, sizeof hints);\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    sprintf(buf, \"%d.example.noresolv\", (intptr_t)user_data);\n    getaddrinfo(buf, \"http\", &hints, &res);\n    sock = socket(res->ai_family, res->ai_socktype, res->ai_protocol);\n    connect(sock, res->ai_addr, res->ai_addrlen);\n    close(sock);\n    return NULL;\n}\nint main() {\n    int s[NB_THREADS], i;\n    for(i=0;i<NB_THREADS;i++) {\n        printf(\"%d\\n\",i);\n        conn((void) (intptr_t)i);\n    }\n    for(i=0;i<NB_THREADS;i++) {\n        printf(\"%d\\n\",i);\n        conn((void) (intptr_t)i);\n    }\nreturn 0;\n\n}\n```\nAfter some investigation, it appears that sometime realloc (L86) move the pointer to internal_ips->list when it can't grow it in place. And when it does so, stings in internal_ips->list[i]->string get messed up (at least for the first values of i) and probably deallocaded at some point (hence the segfault).\n. Ok found the issue: internal_ips->list[i]->string is allocated using dumpstring which use a chunk of memory that it realloc when needed. The problem is that this realloc may move the chunk of memory making all pointers (the internal_ips->list[i]->string) invalid. Why do we use that dumpstring thing instead of standard memory allocation in the first place ? internal_ips is only accessed by one thread, isn't it ? If we really need this dumpstring thing, we should store a ptrdiif_t which will be relative to the start of memory chunk and then only compute the pointer when accessed to handle properly memory move induced by realloc\n. Yeah ! Thank you :-)\n. I think your git is already configured to use your proxy at 127.0.0.1:1080.\nRun git config -l and env and look for any reference to proxy or the address 127.0.0.1:1080\n. On src/core.c#L467 we have:\ni = 0 + (unsigned int) (proxy_count * 1.0 * rand() / (RAND_MAX + 1.0));\nMaybe there's some overflow or something during type conversion. Why not simply using i = rand()%proxy_count ?\n. ",
    "sammdu": "\nproxychains-4.10$ sudo make uninstall\nmake: *** No rule to make target 'uninstall'. Stop.   \n\nSame Here!!!\n. > proxychains-4.10$ sudo make uninstall\n\nmake: *** No rule to make target 'uninstall'. Stop.   \n\nSame Here!!!\n. ",
    "CzBiX": "Use stow to manage it.\n. Use stow to manage it.\n. ",
    "jk2K": "my proxy can works\n\u279c  query git:(master) \u2717 proxychains4 curl www.google.com\n[proxychains] config file found: /Users/lee/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.10/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.10\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  www.google.com:80  ...  OK\n<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>302 Moved</TITLE></HEAD><BODY>\n<H1>302 Moved</H1>\nThe document has moved\n<A HREF=\"http://www.google.co.jp/?gfe_rd=cr&amp;ei=CyuTVeoQhovwBdXZgIAO\">here</A>.\n</BODY></HTML>\n. thanks, @ravomavain , you are right, my git is already configured to use proxy at 127.0.0.1:1080\n. My git version is 2.7.4, it should be no related\nwhen i use http proxy, it's ok\nbash\nhttp_proxy=http://localhost:8123 sudo apt install grafana\n. I use latest git 2.8.3, the test result are same, having nothing to do with git\nI run sudo apt-get install grafana, also met this error, having nothing to do with proxychains-ng\n. no\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.11-git-5-ge527b9e\n--2016-10-17 09:12:51--  https://downloads.gradle.org/distributions/gradle-2.14.1-all.zip\nResolving downloads.gradle.org (downloads.gradle.org)... 224.0.0.1\nConnecting to downloads.gradle.org (downloads.gradle.org)|224.0.0.1|:443... [proxychains] Strict chain  ...  127.0.0.1:1080  ...  downloads.gradle.org:443  ...  OK\nconnected.\nUnable to establish SSL connection\n. my proxy can works\n\u279c  query git:(master) \u2717 proxychains4 curl www.google.com\n[proxychains] config file found: /Users/lee/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.10/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.10\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  www.google.com:80  ...  OK\n<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>302 Moved</TITLE></HEAD><BODY>\n<H1>302 Moved</H1>\nThe document has moved\n<A HREF=\"http://www.google.co.jp/?gfe_rd=cr&amp;ei=CyuTVeoQhovwBdXZgIAO\">here</A>.\n</BODY></HTML>\n. thanks, @ravomavain , you are right, my git is already configured to use proxy at 127.0.0.1:1080\n. My git version is 2.7.4, it should be no related\nwhen i use http proxy, it's ok\nbash\nhttp_proxy=http://localhost:8123 sudo apt install grafana\n. I use latest git 2.8.3, the test result are same, having nothing to do with git\nI run sudo apt-get install grafana, also met this error, having nothing to do with proxychains-ng\n. no\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.11-git-5-ge527b9e\n--2016-10-17 09:12:51--  https://downloads.gradle.org/distributions/gradle-2.14.1-all.zip\nResolving downloads.gradle.org (downloads.gradle.org)... 224.0.0.1\nConnecting to downloads.gradle.org (downloads.gradle.org)|224.0.0.1|:443... [proxychains] Strict chain  ...  127.0.0.1:1080  ...  downloads.gradle.org:443  ...  OK\nconnected.\nUnable to establish SSL connection\n. ",
    "FrankFang": "Thanks for you  @ravomavain . Same for me. I want to silent the dyld warnings. . @rofl0r Warnings disappear after I use commands installed from homebrew instead of ones from macOS system :)\n@willin . brew install curl/git/whatever\nthen\nproxychains4 curl/git/whatever\ndone.. brew install curl/git/whatever\nthen\nproxychains4 curl/git/whatever\ndone.. Thanks for you  @ravomavain . Same for me. I want to silent the dyld warnings. . @rofl0r Warnings disappear after I use commands installed from homebrew instead of ones from macOS system :)\n@willin . brew install curl/git/whatever\nthen\nproxychains4 curl/git/whatever\ndone.. brew install curl/git/whatever\nthen\nproxychains4 curl/git/whatever\ndone.. ",
    "nagromc": "Oops, wrong tab... but I do cloned rofl0r/proxychains-ng. Commit id: https://github.com/rofl0r/proxychains-ng/commit/9969dd3a227abe06c8f7c2f4c217607c344fb6bd\nHere are the logs with LC_ALL=C for further reference:\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe   -DLIB_DIR=\\\"/usr/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:1:0: warning: -fPIC ignored for target (all code is position independent)\n /***************************************************************************\n ^\nsrc/libproxychains.c: In function 'load_sym':\nsrc/libproxychains.c:79:24: error: 'RTLD_NEXT' undeclared (first use in this function)\n  void *funcptr = dlsym(RTLD_NEXT, symname);\n                        ^\nsrc/libproxychains.c:79:24: note: each undeclared identifier is reported only once for each function it appears in\nsrc/libproxychains.c: At top level:\nsrc/libproxychains.c:310:5: error: conflicting types for 'connect'\n int connect(int sock, const struct sockaddr *addr, unsigned int len) {\n     ^\nIn file included from /usr/include/netdb.h:67:0,\n                 from src/libproxychains.c:27:\n/usr/include/sys/socket.h:28:7: note: previous declaration of 'connect' was here\n   int connect (int, const struct sockaddr *, socklen_t);\n       ^\nsrc/libproxychains.c:426:17: error: conflicting types for 'gethostbyaddr'\n struct hostent *gethostbyaddr(const void *addr, socklen_t len, int type) {\n                 ^\nIn file included from src/libproxychains.c:27:0:\n/usr/include/netdb.h:217:17: note: previous declaration of 'gethostbyaddr' was here\n struct hostent *gethostbyaddr (const char *, int, int);\n                 ^\nMakefile:81: recipe for target 'src/libproxychains.o' failed\nmake: *** [src/libproxychains.o] Error 1\nWell, I'm not really into C stuff. But, at the moment, I understand there is no way to make proxychains-ng compile easily on Cygwin.\nThanks anyway!\n. Oops, wrong tab... but I do cloned rofl0r/proxychains-ng. Commit id: https://github.com/rofl0r/proxychains-ng/commit/9969dd3a227abe06c8f7c2f4c217607c344fb6bd\nHere are the logs with LC_ALL=C for further reference:\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe   -DLIB_DIR=\\\"/usr/lib\\\" -DSYSCONFDIR=\\\"/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:1:0: warning: -fPIC ignored for target (all code is position independent)\n /***************************************************************************\n ^\nsrc/libproxychains.c: In function 'load_sym':\nsrc/libproxychains.c:79:24: error: 'RTLD_NEXT' undeclared (first use in this function)\n  void *funcptr = dlsym(RTLD_NEXT, symname);\n                        ^\nsrc/libproxychains.c:79:24: note: each undeclared identifier is reported only once for each function it appears in\nsrc/libproxychains.c: At top level:\nsrc/libproxychains.c:310:5: error: conflicting types for 'connect'\n int connect(int sock, const struct sockaddr *addr, unsigned int len) {\n     ^\nIn file included from /usr/include/netdb.h:67:0,\n                 from src/libproxychains.c:27:\n/usr/include/sys/socket.h:28:7: note: previous declaration of 'connect' was here\n   int connect (int, const struct sockaddr *, socklen_t);\n       ^\nsrc/libproxychains.c:426:17: error: conflicting types for 'gethostbyaddr'\n struct hostent *gethostbyaddr(const void *addr, socklen_t len, int type) {\n                 ^\nIn file included from src/libproxychains.c:27:0:\n/usr/include/netdb.h:217:17: note: previous declaration of 'gethostbyaddr' was here\n struct hostent *gethostbyaddr (const char *, int, int);\n                 ^\nMakefile:81: recipe for target 'src/libproxychains.o' failed\nmake: *** [src/libproxychains.o] Error 1\nWell, I'm not really into C stuff. But, at the moment, I understand there is no way to make proxychains-ng compile easily on Cygwin.\nThanks anyway!\n. ",
    "acaster2": "Hi,\nI did it and it failed. :(\nIt returns:\nERROR: ld.so: object './libproxychains4.so' from LD_PRELOADING cannot be preloaded: ignored\nXPCOMGlueLoad error for file /usr/local/lib/tor-browser/libuxl.so: /usr/lib/i386-linux-gnu/libstdc++.so.6: version 'GLIBCXX_3.4.20' not found (required by /usr/local/bin/tor-browser/libuxl.so)\nCouldn't load XPCOM\nBut it works for example with telnet command. Is it a well know command? How to solve it?\nThanks.\n. Hi,\nI did it and it failed. :(\nIt returns:\nERROR: ld.so: object './libproxychains4.so' from LD_PRELOADING cannot be preloaded: ignored\nXPCOMGlueLoad error for file /usr/local/lib/tor-browser/libuxl.so: /usr/lib/i386-linux-gnu/libstdc++.so.6: version 'GLIBCXX_3.4.20' not found (required by /usr/local/bin/tor-browser/libuxl.so)\nCouldn't load XPCOM\nBut it works for example with telnet command. Is it a well know command? How to solve it?\nThanks.\n. ",
    "luizluca": "OK, the compiling part is the easy one ;-) \nAnd how about not using full path when preloading libproxychains4.so?\n. @rofl0r , it might be OS X because AFAIK, LD_PRELOAD without dirname is the recommended approach for preloading for multiarch libs on Linux.\nIf not-supplying-dirname does not work in some OS, could it becomes a ./configure option? Preferably, using relative path by default for those OS that support it. It is really complicate to use proxychains program when the target command is a script that calls both 32-bit and 64-bit apps. (Yes, I know that manually preloading as I used in my first example would work, but maybe we could improve the default behavior)\n. OK, the compiling part is the easy one ;-) \nAnd how about not using full path when preloading libproxychains4.so?\n. @rofl0r , it might be OS X because AFAIK, LD_PRELOAD without dirname is the recommended approach for preloading for multiarch libs on Linux.\nIf not-supplying-dirname does not work in some OS, could it becomes a ./configure option? Preferably, using relative path by default for those OS that support it. It is really complicate to use proxychains program when the target command is a script that calls both 32-bit and 64-bit apps. (Yes, I know that manually preloading as I used in my first example would work, but maybe we could improve the default behavior)\n. ",
    "GrantStreetGroup": "Sorry, missed your reply.   \nHere is a specific example, I attempt to telnet to our internal redis host intrds01-dev1 which is at 192.168.24.166. This is running inside a docker container.\n[root@b759259e1974 hubot]# proxychains4 -f proxy/proxychains.conf telnet intrds01-dev1 6379\n[proxychains] config file found: proxy/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.10-git-10-g2237749\nTrying 224.0.0.1...\n[proxychains] Strict chain  ...  192.168.118.51:3128  ...  intrds01-dev1:6379 <--denied\ntelnet: connect to address 224.0.0.1: Connection refused\nAs you can see telnet is given the 244.* proxied IP when proxydns is enabled. This  prevent the localnet setup to not catch the request. It ends up at the proxy where it's blocked.\nIf I telnet to the IP address it works:\n[root@b759259e1974 hubot]# proxychains4 -f proxy/proxychains.conf telnet 192.168.26.166 6379\n[proxychains] config file found: proxy/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.10-git-10-g2237749\nTrying 192.168.26.166...\nConnected to 192.168.26.166.\nEscape character is '^]'.\nSome how the localnet rule needs to check against the real IP for the host not the proxified IP.\n. #50  is the different take on the same issue\n. internal DNS server..\n. This has nothing to do with which DNS we are using or not.   \nproxydns feature conflicts with the localnet feature making mutual exclusive. \n. Also without proxydns setting proxychains4 passes on the connection request to the defined proxy by IP not name, which does not work for proxy with name based rules.\nOne way to resolve this is:\nWhen a request for a named host is made, proxychains-ng should\n- Attempt to determine the true IP of the request name.\n- If 'proxydns' setting in true, return 'fake' IP from defined range to application\n- Check 'true IP' (if available) against 'localnet' setting(s) to determine whether to bypass proxy\n- Submit connection request to proxy by name (Add an option to define whether IP or Name is sent)\n. Sorry, missed your reply.   \nHere is a specific example, I attempt to telnet to our internal redis host intrds01-dev1 which is at 192.168.24.166. This is running inside a docker container.\n[root@b759259e1974 hubot]# proxychains4 -f proxy/proxychains.conf telnet intrds01-dev1 6379\n[proxychains] config file found: proxy/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.10-git-10-g2237749\nTrying 224.0.0.1...\n[proxychains] Strict chain  ...  192.168.118.51:3128  ...  intrds01-dev1:6379 <--denied\ntelnet: connect to address 224.0.0.1: Connection refused\nAs you can see telnet is given the 244.* proxied IP when proxydns is enabled. This  prevent the localnet setup to not catch the request. It ends up at the proxy where it's blocked.\nIf I telnet to the IP address it works:\n[root@b759259e1974 hubot]# proxychains4 -f proxy/proxychains.conf telnet 192.168.26.166 6379\n[proxychains] config file found: proxy/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.10-git-10-g2237749\nTrying 192.168.26.166...\nConnected to 192.168.26.166.\nEscape character is '^]'.\nSome how the localnet rule needs to check against the real IP for the host not the proxified IP.\n. #50  is the different take on the same issue\n. internal DNS server..\n. This has nothing to do with which DNS we are using or not.   \nproxydns feature conflicts with the localnet feature making mutual exclusive. \n. Also without proxydns setting proxychains4 passes on the connection request to the defined proxy by IP not name, which does not work for proxy with name based rules.\nOne way to resolve this is:\nWhen a request for a named host is made, proxychains-ng should\n- Attempt to determine the true IP of the request name.\n- If 'proxydns' setting in true, return 'fake' IP from defined range to application\n- Check 'true IP' (if available) against 'localnet' setting(s) to determine whether to bypass proxy\n- Submit connection request to proxy by name (Add an option to define whether IP or Name is sent)\n. ",
    "Willian-Zhang": "Not working on OS X 10.11 +1\n. Problem regarding to  LD_PRELOAD protection (SIP) has been moved to #78 \n. Logs above are moved from #74 \n. ## Update\n\nRun csrutil disable in Recovery mode\n\nFor those who's disabling SIP to make it work:\nThere is no need to disable all SIP\uff1adebug mode will also work\nDisabling partial SIP\nRun  csrutil enable --without debug  in Recovery mode \n. Not working on OS X 10.11 +1\n. Problem regarding to  LD_PRELOAD protection (SIP) has been moved to #78 \n. Logs above are moved from #74 \n. ## Update\n\nRun csrutil disable in Recovery mode\n\nFor those who's disabling SIP to make it work:\nThere is no need to disable all SIP\uff1adebug mode will also work\nDisabling partial SIP\nRun  csrutil enable --without debug  in Recovery mode \n. ",
    "cache0928": "\nI can't install proxychains-ng by homebrew on OS X 10.11\n. @doublelduob It helps when I install proxychains-ng by homebrew. But proxychains-ng also can't work if I don't disable the SIP\n. I find that if you move the executable file(proxychains4) to your home folder(like ~/bin), and then you need to change the PATH value. If you do this, you don't have to disable the SIP, , it will works with no error  @Willian-Zhang\n. \nI can't install proxychains-ng by homebrew on OS X 10.11\n. @doublelduob It helps when I install proxychains-ng by homebrew. But proxychains-ng also can't work if I don't disable the SIP\n. I find that if you move the executable file(proxychains4) to your home folder(like ~/bin), and then you need to change the PATH value. If you do this, you don't have to disable the SIP, , it will works with no error  @Willian-Zhang\n. ",
    "SSebo": "xcode-select -s /Applications/Xcode-beta.app/Contents/Developer\nthen \nbrew install roxychains-ng\n. xcode-select -s /Applications/Xcode-beta.app/Contents/Developer\nthen \nbrew install roxychains-ng\n. ",
    "asconix": "hi rofl0r et al.,\ni have cloned the repo on a brand new OS X installation. random_chain is definitely not working on OS X. I tried curl, wget, firefox, safari. random_chain seems to pick always the last element of the list. no issues with same code on linux\n. hi rofl0r et al.,\ni have cloned the repo on a brand new OS X installation. random_chain is definitely not working on OS X. I tried curl, wget, firefox, safari. random_chain seems to pick always the last element of the list. no issues with same code on linux\n. ",
    "jaytaylor": "@rofl0r I just tested out @ravomavain's fix and it works for me.  I'm testing on Linux next to ensure it still works.  If all is well I'll open the PR.\n. https://github.com/rofl0r/proxychains-ng/pull/143\n. Yes, it is definitely broken without the patch.\nOn Thu, Oct 13, 2016 at 9:28 AM, rofl0r notifications@github.com wrote:\n\n@jaytaylor https://github.com/jaytaylor did you find some time to test\nif the random chain feature is broken without your patch ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/75#issuecomment-253565314,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAalxE6fw1Om1jIcY1JQNkLBHMVUr8WYks5qzlwxgaJpZM4Fvhnf\n.\n. I just followed the INSTALL instructions.\n\n./configure\nmake # <- broke here\nOn Sat, Oct 8, 2016 at 11:28 AM, rofl0r notifications@github.com wrote:\n\nuhm. how did you build proxychains-ng ? it has a configure check so we\ndon't have to hardcode a list of currently broken systems into the code.\ngenerally if you need to #ifdef __SOME_SYSTEM you're doing something\nwrong: you're assuming SOME_SYSTEM will never change. therefore you should\ncheck whether the system you build on uses s6_addr32 or\n__u6_addr.__u6_addr32 - exactly what we already do.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/pull/142#issuecomment-252440362,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAalxGo1pDJIXlzINnBf3qECkyKRjDPJks5qx-CwgaJpZM4KRykg\n.\n. (NB: This is from current master)\n\n(shell)\njay@jays-mba:~/repos/proxychains-ng$ ./configure\nchecking whether netinet/in.h defines s6_addr16 ... usage: mktemp [-d] [-q] [-t prefix] [-u] template ...\n       mktemp [-d] [-q] [-u] -t prefix\nno\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... usage: mktemp [-d] [-q] [-t prefix] [-u] template ...\n       mktemp [-d] [-q] [-u] -t prefix\nyes\nchecking whether $CC defines __OpenBSD__ ... no\nDone, now run make && make install\njay@jays-mba:~/repos/proxychains-ng$ make && make install\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/core.o src/core.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/common.o src/common.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:332:12: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n               ~  ^\nsrc/libproxychains.c:332:36: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n                                       ~  ^\nsrc/libproxychains.c:333:12: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n               ~  ^\nsrc/libproxychains.c:333:36: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n                                       ~  ^\nsrc/libproxychains.c:363:39: error: no member named 's6_addr32' in 'struct in6_addr'\n                memcpy(&v4inv6.s_addr, &p_addr_in6->s6_addr32[3], 4);\n                                        ~~~~~~~~~~  ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\nsrc/libproxychains.c:458:63: error: no member named 's6_addr32' in 'struct in6_addr'\n                                        memcpy(v4inv6buf, &((struct sockaddr_in6*)sa)->sin6_addr.s6_addr32[3], 4);\n                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\n6 errors generated.\nmake: *** [src/libproxychains.o] Error 1\n. Yes I agree - this is what appears to be happening.\nMac OS X version 10.9.5.\n. FWIW, here's the configure output with a set -x statement added right before the lines containing mktemp:\n(shell)\njay@jays-mba:~/repos/proxychains-ng$ ./configure\n+ printf 'checking %s ... ' 'whether netinet/in.h defines s6_addr16'\nchecking whether netinet/in.h defines s6_addr16 ... ++ mktemp\nusage: mktemp [-d] [-q] [-t prefix] [-u] template ...\n       mktemp [-d] [-q] [-u] -t prefix\n+ local tmp=\n+ printf '#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }'\n+ local res=0\n+ cc -Qunused-arguments -Qunused-arguments -c .c -o .o\n+ res=1\n+ rm -f .c .o\n+ test x1 = x0\n+ printf 'no\\n'\nno\n+ return 1\n+ check_compile 'whether netinet/in.h defines __u6_addr.__u6_addr16' '-Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' '#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }'\n+ set -x\n+ printf 'checking %s ... ' 'whether netinet/in.h defines __u6_addr.__u6_addr16'\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... ++ mktemp\nusage: mktemp [-d] [-q] [-t prefix] [-u] template ...\n       mktemp [-d] [-q] [-u] -t prefix\n+ local tmp=\n+ printf '#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }'\n+ local res=0\n+ cc -Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Qunused-arguments -c .c -o .o\n+ rm -f .c .o\n+ test x0 = x0\n+ printf 'yes\\n'\nyes\n+ test 'x-Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' = x\n+ CPPFLAGS='-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32'\n+ return 0\n+ check_define __OpenBSD__\n+ printf 'checking whether $CC defines %s ... ' __OpenBSD__\nchecking whether $CC defines __OpenBSD__ ... + local res=1\n+ cc -Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Qunused-arguments -dM -E -\n+ grep __OpenBSD__\n+ test x1 = x0\n+ printf 'no\\n'\nno\n+ return 1\n+ echo 'CC?=cc'\n+ '[' -z '-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' ']'\n+ echo 'CPPFLAGS?=-Qunused-arguments' -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\n+ '[' -z -Qunused-arguments ']'\n+ echo 'USER_CFLAGS?=-Qunused-arguments'\n+ '[' -z '' ']'\n+ echo prefix=/usr/local\n+ echo exec_prefix=/usr/local\n+ echo bindir=/usr/local/bin\n+ echo libdir=/usr/local/lib\n+ echo includedir=/usr/local/include\n+ echo sysconfdir=/usr/local/etc\n+ '[' no = no ']'\n+ echo CPPFLAGS+= -DSUPER_SECURE\n+ make_cmd=make\n+ ismac\n+ uname -s\n+ grep Darwin\n+ echo NO_AS_NEEDED=\n+ echo LDSO_SUFFIX=dylib\n+ echo MAC_CFLAGS+=-DIS_MAC=1\n+ isx86_64\n+ uname -m\n+ grep -i X86_64\n+ '[' '' = 1 ']'\n+ echo LD_SET_SONAME=-Wl,-install_name,\n+ echo 'Done, now run make && make install'\nDone, now run make && make install\nEDIT\nmktemp man page examples:\n``` (shell)\nEXAMPLES\n     The following sh(1) fragment illustrates a simple use of mktemp where the script should quit if it cannot get a safe temporary file.\n       tempfoo=`basename $0`\n       TMPFILE=`mktemp /tmp/${tempfoo}.XXXXXX` || exit 1\n       echo \"program output\" >> $TMPFILE\n\n To allow the use of $TMPDIR:\n\n       tempfoo=`basename $0`\n       TMPFILE=`mktemp -t ${tempfoo}` || exit 1\n       echo \"program output\" >> $TMPFILE\n\n In this case, we want the script to catch the error itself.\n\n       tempfoo=`basename $0`\n       TMPFILE=`mktemp -q /tmp/${tempfoo}.XXXXXX`\n       if [ $? -ne 0 ]; then\n               echo \"$0: Can't create temp file, exiting...\"\n               exit 1\n       fi\n\n``\n. So I changed allmktempcommands tomktemp tmp.XXXXX`, and configure now looks better:\n(shell)\njay@jays-mba:~/repos/proxychains-ng$ ./configure\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... yes\nchecking whether $CC defines __OpenBSD__ ... no\nDone, now run make && make install\nBut make is still upset about s6_addr32 and s6_addr16:\n(shell)\njay@jays-mba:~/repos/proxychains-ng$ make\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/core.o src/core.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/common.o src/common.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:332:12: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n               ~  ^\nsrc/libproxychains.c:332:36: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n                                       ~  ^\nsrc/libproxychains.c:333:12: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n               ~  ^\nsrc/libproxychains.c:333:36: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n                                       ~  ^\nsrc/libproxychains.c:363:39: error: no member named 's6_addr32' in 'struct in6_addr'\n                memcpy(&v4inv6.s_addr, &p_addr_in6->s6_addr32[3], 4);\n                                        ~~~~~~~~~~  ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\nsrc/libproxychains.c:458:63: error: no member named 's6_addr32' in 'struct in6_addr'\n                                        memcpy(v4inv6buf, &((struct sockaddr_in6*)sa)->sin6_addr.s6_addr32[3], 4);\n                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\n6 errors generated.\nmake: *** [src/libproxychains.o] Error 1\n. What does it try to do when s6_addr16 is not defined by netinet/in.h?\n. Because what I see is:\n(shell)\ncheck_compile 'whether netinet/in.h defines s6_addr16' \"\" \\\n'#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }' \\\n|| {\ncheck_compile 'whether netinet/in.h defines __u6_addr.__u6_addr16' \\\n'-Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' \\\n'#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }'\n}\nWhich, if I understand correctly, doesn't do anything other than print a message about it?\n. (shell)\njay@jays-mba:~/repos/proxychains-ng$ cat config.mak\nCC?=cc\nCPPFLAGS?=-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\nUSER_CFLAGS?=-Qunused-arguments\nprefix=/usr/local\nexec_prefix=/usr/local\nbindir=/usr/local/bin\nlibdir=/usr/local/lib\nincludedir=/usr/local/include\nsysconfdir=/usr/local/etc\nCPPFLAGS+= -DSUPER_SECURE\nNO_AS_NEEDED=\nLDSO_SUFFIX=dylib\nMAC_CFLAGS+=-DIS_MAC=1\nLD_SET_SONAME=-Wl,-install_name,\n. (shell)\njay@jays-mba:~/repos/proxychains-ng$ make\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:332:12: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n               ~  ^\nsrc/libproxychains.c:332:36: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n                                       ~  ^\nsrc/libproxychains.c:333:12: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n               ~  ^\nsrc/libproxychains.c:333:36: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n                                       ~  ^\nsrc/libproxychains.c:363:39: error: no member named 's6_addr32' in 'struct in6_addr'\n                memcpy(&v4inv6.s_addr, &p_addr_in6->s6_addr32[3], 4);\n                                        ~~~~~~~~~~  ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\nsrc/libproxychains.c:458:63: error: no member named 's6_addr32' in 'struct in6_addr'\n                                        memcpy(v4inv6buf, &((struct sockaddr_in6*)sa)->sin6_addr.s6_addr32[3], 4);\n                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\n6 errors generated.\nmake: *** [src/libproxychains.o] Error 1\n. # The fix\n\nTL;DR\n\nA straightforward way to fix the compilation issue is to change ?= to += when generating the 1st $(CPPFLAGS) statement of config.mak.\nI'll adjust the PR to do the following:\n- Adjust the Set If Absent assignment for $(CPPFLAGS) to use the Append operator instead.\n- ~~Include a compatibility fix for the invalid mktemp command invocation.~~\n\nno longer needed since https://github.com/rofl0r/proxychains-ng/commit/260578d00e5e96a1bee217ad2dd97e75d5c1f190.\n- Ensure config.mak is removed during the make clean step.\n\n\nBackground\nI think I just figured it out!\nFrom the output of make the runtime contents of $(CPPFLAGS) are revealed:\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments \\\n    -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments \\\n    -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" \\\n    -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\" \\\n    -fPIC -c -o src/version.o src/version.c\n$(CPPFLAGS) contains only -DSUPER_SECURE and nothing like -Ds6_addr....  Let's look and see what's happened from -include config.mak:\n(shell)\nCPPFLAGS?=-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\n...\nCPPFLAGS+= -DSUPER_SECURE\nFrom Makefile variable assignment:\n\nSet If Absent\nVARIABLE ?= value\nSetting of a variable only if it doesn't have a value\n\nThe output observed suggests the order of evaluation when config.mak is included is not from the beginning of the file to the end (otherwise the $(CPPFLAGS) variable would contain what we expect and the thing would compile!).\nApparent order of evaluation:\n1st statement: CPPFLAGS+= -DSUPER_SECURE\n$(CPPFLAGS) contents: -DSUPER_SECURE\n2nd evaluated statement: CPPFLAGS?=-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\n$(CPPFLAGS) contents: -DSUPER_SECURE\nThe ?= statement has no effect since the variable has already been set.\n. @rofl0r Thank you so much for being so responsive on this issue!  I believe this PR is in good shape, looking forward to your feedback.\nI've tested it on the Mac and Linux and now both build and work without issue. :)\nCheers!\n. @rofl0r Nice catch! I'd forgotten about this stanza in my .bashrc:\n``` (shell)\n\nThese exports are to avoid clang compilation problems as per\nhttp://stackoverflow.com/questions/22313407/clang-error-unknown-argument-mno-fused-madd-python-package-installation\nexport CFLAGS=-Qunused-arguments\nexport CPPFLAGS=-Qunused-arguments\n\n```\nI still believe it'd be best to switch to appending to CPPFLAGS, unless there is something else I've overlooked.\n. Hey @rofl0r,\nThe OUR_CPPFLAGS branch works nicely for me!  I also like this solution, it is a nice, clean approach to avoid the $CPPFLAGS variable conflict entirely.\nCheers,\nJay\n. @rofl0r FYI, I believe I've removed all controversial commits so you can merge this PR.\n. Haha, nothing essential.  Just my (fairly standard I think) vim ignores and the dylib ignore.\n\nOn Oct 16, 2016, at 12:09 PM, rofl0r notifications@github.com wrote:\n@jaytaylor thanks for testing!\nas for merging this PR: aren't we done yet ? or have i overlooked something essential apart from your personal vim config ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. - All lines were already less than 80 chars, because I want the same thing you do here :)\n\nThe rest has been adjusted.\n. @rofl0r I just tested out @ravomavain's fix and it works for me.  I'm testing on Linux next to ensure it still works.  If all is well I'll open the PR.\n. https://github.com/rofl0r/proxychains-ng/pull/143\n. Yes, it is definitely broken without the patch.\nOn Thu, Oct 13, 2016 at 9:28 AM, rofl0r notifications@github.com wrote:\n\n@jaytaylor https://github.com/jaytaylor did you find some time to test\nif the random chain feature is broken without your patch ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/75#issuecomment-253565314,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAalxE6fw1Om1jIcY1JQNkLBHMVUr8WYks5qzlwxgaJpZM4Fvhnf\n.\n. I just followed the INSTALL instructions.\n\n./configure\nmake # <- broke here\nOn Sat, Oct 8, 2016 at 11:28 AM, rofl0r notifications@github.com wrote:\n\nuhm. how did you build proxychains-ng ? it has a configure check so we\ndon't have to hardcode a list of currently broken systems into the code.\ngenerally if you need to #ifdef __SOME_SYSTEM you're doing something\nwrong: you're assuming SOME_SYSTEM will never change. therefore you should\ncheck whether the system you build on uses s6_addr32 or\n__u6_addr.__u6_addr32 - exactly what we already do.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/pull/142#issuecomment-252440362,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAalxGo1pDJIXlzINnBf3qECkyKRjDPJks5qx-CwgaJpZM4KRykg\n.\n. (NB: This is from current master)\n\n(shell)\njay@jays-mba:~/repos/proxychains-ng$ ./configure\nchecking whether netinet/in.h defines s6_addr16 ... usage: mktemp [-d] [-q] [-t prefix] [-u] template ...\n       mktemp [-d] [-q] [-u] -t prefix\nno\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... usage: mktemp [-d] [-q] [-t prefix] [-u] template ...\n       mktemp [-d] [-q] [-u] -t prefix\nyes\nchecking whether $CC defines __OpenBSD__ ... no\nDone, now run make && make install\njay@jays-mba:~/repos/proxychains-ng$ make && make install\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/core.o src/core.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/common.o src/common.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:332:12: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n               ~  ^\nsrc/libproxychains.c:332:36: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n                                       ~  ^\nsrc/libproxychains.c:333:12: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n               ~  ^\nsrc/libproxychains.c:333:36: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n                                       ~  ^\nsrc/libproxychains.c:363:39: error: no member named 's6_addr32' in 'struct in6_addr'\n                memcpy(&v4inv6.s_addr, &p_addr_in6->s6_addr32[3], 4);\n                                        ~~~~~~~~~~  ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\nsrc/libproxychains.c:458:63: error: no member named 's6_addr32' in 'struct in6_addr'\n                                        memcpy(v4inv6buf, &((struct sockaddr_in6*)sa)->sin6_addr.s6_addr32[3], 4);\n                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\n6 errors generated.\nmake: *** [src/libproxychains.o] Error 1\n. Yes I agree - this is what appears to be happening.\nMac OS X version 10.9.5.\n. FWIW, here's the configure output with a set -x statement added right before the lines containing mktemp:\n(shell)\njay@jays-mba:~/repos/proxychains-ng$ ./configure\n+ printf 'checking %s ... ' 'whether netinet/in.h defines s6_addr16'\nchecking whether netinet/in.h defines s6_addr16 ... ++ mktemp\nusage: mktemp [-d] [-q] [-t prefix] [-u] template ...\n       mktemp [-d] [-q] [-u] -t prefix\n+ local tmp=\n+ printf '#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }'\n+ local res=0\n+ cc -Qunused-arguments -Qunused-arguments -c .c -o .o\n+ res=1\n+ rm -f .c .o\n+ test x1 = x0\n+ printf 'no\\n'\nno\n+ return 1\n+ check_compile 'whether netinet/in.h defines __u6_addr.__u6_addr16' '-Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' '#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }'\n+ set -x\n+ printf 'checking %s ... ' 'whether netinet/in.h defines __u6_addr.__u6_addr16'\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... ++ mktemp\nusage: mktemp [-d] [-q] [-t prefix] [-u] template ...\n       mktemp [-d] [-q] [-u] -t prefix\n+ local tmp=\n+ printf '#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }'\n+ local res=0\n+ cc -Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Qunused-arguments -c .c -o .o\n+ rm -f .c .o\n+ test x0 = x0\n+ printf 'yes\\n'\nyes\n+ test 'x-Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' = x\n+ CPPFLAGS='-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32'\n+ return 0\n+ check_define __OpenBSD__\n+ printf 'checking whether $CC defines %s ... ' __OpenBSD__\nchecking whether $CC defines __OpenBSD__ ... + local res=1\n+ cc -Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Qunused-arguments -dM -E -\n+ grep __OpenBSD__\n+ test x1 = x0\n+ printf 'no\\n'\nno\n+ return 1\n+ echo 'CC?=cc'\n+ '[' -z '-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' ']'\n+ echo 'CPPFLAGS?=-Qunused-arguments' -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\n+ '[' -z -Qunused-arguments ']'\n+ echo 'USER_CFLAGS?=-Qunused-arguments'\n+ '[' -z '' ']'\n+ echo prefix=/usr/local\n+ echo exec_prefix=/usr/local\n+ echo bindir=/usr/local/bin\n+ echo libdir=/usr/local/lib\n+ echo includedir=/usr/local/include\n+ echo sysconfdir=/usr/local/etc\n+ '[' no = no ']'\n+ echo CPPFLAGS+= -DSUPER_SECURE\n+ make_cmd=make\n+ ismac\n+ uname -s\n+ grep Darwin\n+ echo NO_AS_NEEDED=\n+ echo LDSO_SUFFIX=dylib\n+ echo MAC_CFLAGS+=-DIS_MAC=1\n+ isx86_64\n+ uname -m\n+ grep -i X86_64\n+ '[' '' = 1 ']'\n+ echo LD_SET_SONAME=-Wl,-install_name,\n+ echo 'Done, now run make && make install'\nDone, now run make && make install\nEDIT\nmktemp man page examples:\n``` (shell)\nEXAMPLES\n     The following sh(1) fragment illustrates a simple use of mktemp where the script should quit if it cannot get a safe temporary file.\n       tempfoo=`basename $0`\n       TMPFILE=`mktemp /tmp/${tempfoo}.XXXXXX` || exit 1\n       echo \"program output\" >> $TMPFILE\n\n To allow the use of $TMPDIR:\n\n       tempfoo=`basename $0`\n       TMPFILE=`mktemp -t ${tempfoo}` || exit 1\n       echo \"program output\" >> $TMPFILE\n\n In this case, we want the script to catch the error itself.\n\n       tempfoo=`basename $0`\n       TMPFILE=`mktemp -q /tmp/${tempfoo}.XXXXXX`\n       if [ $? -ne 0 ]; then\n               echo \"$0: Can't create temp file, exiting...\"\n               exit 1\n       fi\n\n``\n. So I changed allmktempcommands tomktemp tmp.XXXXX`, and configure now looks better:\n(shell)\njay@jays-mba:~/repos/proxychains-ng$ ./configure\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... yes\nchecking whether $CC defines __OpenBSD__ ... no\nDone, now run make && make install\nBut make is still upset about s6_addr32 and s6_addr16:\n(shell)\njay@jays-mba:~/repos/proxychains-ng$ make\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/core.o src/core.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/common.o src/common.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:332:12: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n               ~  ^\nsrc/libproxychains.c:332:36: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n                                       ~  ^\nsrc/libproxychains.c:333:12: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n               ~  ^\nsrc/libproxychains.c:333:36: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n                                       ~  ^\nsrc/libproxychains.c:363:39: error: no member named 's6_addr32' in 'struct in6_addr'\n                memcpy(&v4inv6.s_addr, &p_addr_in6->s6_addr32[3], 4);\n                                        ~~~~~~~~~~  ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\nsrc/libproxychains.c:458:63: error: no member named 's6_addr32' in 'struct in6_addr'\n                                        memcpy(v4inv6buf, &((struct sockaddr_in6*)sa)->sin6_addr.s6_addr32[3], 4);\n                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\n6 errors generated.\nmake: *** [src/libproxychains.o] Error 1\n. What does it try to do when s6_addr16 is not defined by netinet/in.h?\n. Because what I see is:\n(shell)\ncheck_compile 'whether netinet/in.h defines s6_addr16' \"\" \\\n'#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }' \\\n|| {\ncheck_compile 'whether netinet/in.h defines __u6_addr.__u6_addr16' \\\n'-Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32' \\\n'#include <netinet/in.h>\\nint main(int a, char**c){struct in6_addr x={.s6_addr32[0]=a};return x.s6_addr16[0]; }'\n}\nWhich, if I understand correctly, doesn't do anything other than print a message about it?\n. (shell)\njay@jays-mba:~/repos/proxychains-ng$ cat config.mak\nCC?=cc\nCPPFLAGS?=-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\nUSER_CFLAGS?=-Qunused-arguments\nprefix=/usr/local\nexec_prefix=/usr/local\nbindir=/usr/local/bin\nlibdir=/usr/local/lib\nincludedir=/usr/local/include\nsysconfdir=/usr/local/etc\nCPPFLAGS+= -DSUPER_SECURE\nNO_AS_NEEDED=\nLDSO_SUFFIX=dylib\nMAC_CFLAGS+=-DIS_MAC=1\nLD_SET_SONAME=-Wl,-install_name,\n. (shell)\njay@jays-mba:~/repos/proxychains-ng$ make\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:332:12: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n               ~  ^\nsrc/libproxychains.c:332:36: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n                                       ~  ^\nsrc/libproxychains.c:333:12: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n               ~  ^\nsrc/libproxychains.c:333:36: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n                                       ~  ^\nsrc/libproxychains.c:363:39: error: no member named 's6_addr32' in 'struct in6_addr'\n                memcpy(&v4inv6.s_addr, &p_addr_in6->s6_addr32[3], 4);\n                                        ~~~~~~~~~~  ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\nsrc/libproxychains.c:458:63: error: no member named 's6_addr32' in 'struct in6_addr'\n                                        memcpy(v4inv6buf, &((struct sockaddr_in6*)sa)->sin6_addr.s6_addr32[3], 4);\n                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\n6 errors generated.\nmake: *** [src/libproxychains.o] Error 1\n. # The fix\n\nTL;DR\n\nA straightforward way to fix the compilation issue is to change ?= to += when generating the 1st $(CPPFLAGS) statement of config.mak.\nI'll adjust the PR to do the following:\n- Adjust the Set If Absent assignment for $(CPPFLAGS) to use the Append operator instead.\n- ~~Include a compatibility fix for the invalid mktemp command invocation.~~\n\nno longer needed since https://github.com/rofl0r/proxychains-ng/commit/260578d00e5e96a1bee217ad2dd97e75d5c1f190.\n- Ensure config.mak is removed during the make clean step.\n\n\nBackground\nI think I just figured it out!\nFrom the output of make the runtime contents of $(CPPFLAGS) are revealed:\ncc -Qunused-arguments -DSUPER_SECURE -Qunused-arguments \\\n    -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -Qunused-arguments \\\n    -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" \\\n    -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\" \\\n    -fPIC -c -o src/version.o src/version.c\n$(CPPFLAGS) contains only -DSUPER_SECURE and nothing like -Ds6_addr....  Let's look and see what's happened from -include config.mak:\n(shell)\nCPPFLAGS?=-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\n...\nCPPFLAGS+= -DSUPER_SECURE\nFrom Makefile variable assignment:\n\nSet If Absent\nVARIABLE ?= value\nSetting of a variable only if it doesn't have a value\n\nThe output observed suggests the order of evaluation when config.mak is included is not from the beginning of the file to the end (otherwise the $(CPPFLAGS) variable would contain what we expect and the thing would compile!).\nApparent order of evaluation:\n1st statement: CPPFLAGS+= -DSUPER_SECURE\n$(CPPFLAGS) contents: -DSUPER_SECURE\n2nd evaluated statement: CPPFLAGS?=-Qunused-arguments -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32\n$(CPPFLAGS) contents: -DSUPER_SECURE\nThe ?= statement has no effect since the variable has already been set.\n. @rofl0r Thank you so much for being so responsive on this issue!  I believe this PR is in good shape, looking forward to your feedback.\nI've tested it on the Mac and Linux and now both build and work without issue. :)\nCheers!\n. @rofl0r Nice catch! I'd forgotten about this stanza in my .bashrc:\n``` (shell)\n\nThese exports are to avoid clang compilation problems as per\nhttp://stackoverflow.com/questions/22313407/clang-error-unknown-argument-mno-fused-madd-python-package-installation\nexport CFLAGS=-Qunused-arguments\nexport CPPFLAGS=-Qunused-arguments\n\n```\nI still believe it'd be best to switch to appending to CPPFLAGS, unless there is something else I've overlooked.\n. Hey @rofl0r,\nThe OUR_CPPFLAGS branch works nicely for me!  I also like this solution, it is a nice, clean approach to avoid the $CPPFLAGS variable conflict entirely.\nCheers,\nJay\n. @rofl0r FYI, I believe I've removed all controversial commits so you can merge this PR.\n. Haha, nothing essential.  Just my (fairly standard I think) vim ignores and the dylib ignore.\n\nOn Oct 16, 2016, at 12:09 PM, rofl0r notifications@github.com wrote:\n@jaytaylor thanks for testing!\nas for merging this PR: aren't we done yet ? or have i overlooked something essential apart from your personal vim config ?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. - All lines were already less than 80 chars, because I want the same thing you do here :)\n\nThe rest has been adjusted.\n. ",
    "stardiviner": "@rofl0r If you know that method, please add it into README, or wiki. let people know how to do that, I really like this easy way $ proxychains command.\nAt last, thanks for your project.\n. That's great, I will use it with proxychains. thanks.\n. @jmiserez No, I have not work on it. I have other work to do. So have no time on this for now.\n. @rofl0r If you know that method, please add it into README, or wiki. let people know how to do that, I really like this easy way $ proxychains command.\nAt last, thanks for your project.\n. That's great, I will use it with proxychains. thanks.\n. @jmiserez No, I have not work on it. I have other work to do. So have no time on this for now.\n. ",
    "jmiserez": "@stardiviner Did you ever integrate pacparser into proxychains?\n@rofl0r PAC files may specify different proxies for different URLs, i.e. it's a dynamic lookup. Parsing a complex PAC file will not necessarily result in a single proxy server that can be added to the proxychains config. Pacparser would need to be integrated within proxychains and lookup the correct proxy server for each and every request from the provided PAC file. Just FYI.\n. @stardiviner Did you ever integrate pacparser into proxychains?\n@rofl0r PAC files may specify different proxies for different URLs, i.e. it's a dynamic lookup. Parsing a complex PAC file will not necessarily result in a single proxy server that can be added to the proxychains config. Pacparser would need to be integrated within proxychains and lookup the correct proxy server for each and every request from the provided PAC file. Just FYI.\n. ",
    "linkerlin": "With wget/curl is ok.\n. With wget/curl is ok.\n. ",
    "tais9": "It only happens if you execute a system binary using proxychains, e.g. proxychains4 ssh user@server. For now, a workaround is to copy the executable to another location (e.g. cp /usr/bin/ssh ~/XXX), and use it (e.g. proxychains4 ~/XXX/ssh user@server). You can modify the path variable so that ~/XXX/ssh is executed instead of /usr/bin/ssh, when you just type \"ssh\".\n. It only happens if you execute a system binary using proxychains, e.g. proxychains4 ssh user@server. For now, a workaround is to copy the executable to another location (e.g. cp /usr/bin/ssh ~/XXX), and use it (e.g. proxychains4 ~/XXX/ssh user@server). You can modify the path variable so that ~/XXX/ssh is executed instead of /usr/bin/ssh, when you just type \"ssh\".\n. ",
    "Pikaurd": "@tais9 worked of me\nthanks\n. @tais9 worked of me\nthanks\n. ",
    "kennel209": "In OSX 10.11\nsomething workaround is to turn off debug flag in SIP in recovery mode\ncsrutil enable --without debug\notherwise, proxychains cannot apply to /bin/* /usr/bin/* /System* ... unfortunately most script with #!/usr/bin/env XXX \n. In OSX 10.11\nsomething workaround is to turn off debug flag in SIP in recovery mode\ncsrutil enable --without debug\notherwise, proxychains cannot apply to /bin/* /usr/bin/* /System* ... unfortunately most script with #!/usr/bin/env XXX \n. ",
    "wd": "If do not want to disalbe SIP, you can use pyenv to solve this. Use pyenv install a local python version(of cuz, you can install a python use make && make install from source).\nAnd then run command like this\nproxychains4 ~/.pyenv/versions/2.7.9/bin/python /usr/local/Cellar/youtube-dl/2015.10.24/bin/youtube-dl\n. If do not want to disalbe SIP, you can use pyenv to solve this. Use pyenv install a local python version(of cuz, you can install a python use make && make install from source).\nAnd then run command like this\nproxychains4 ~/.pyenv/versions/2.7.9/bin/python /usr/local/Cellar/youtube-dl/2015.10.24/bin/youtube-dl\n. ",
    "archywillhe": "Nice. Disabling SIP's debug indeed works. Though it did complain and echo \nrequesting an unsupported configuration. This is likely to break in the future and leave your machine in an unknown state\nFor anyone who wanna have a better sense of what SIP does and how to configure it, you can read it up here (which I stumbled upon it while I was reading a SE post) or just check out the apple doc\n. Nice. Disabling SIP's debug indeed works. Though it did complain and echo \nrequesting an unsupported configuration. This is likely to break in the future and leave your machine in an unknown state\nFor anyone who wanna have a better sense of what SIP does and how to configure it, you can read it up here (which I stumbled upon it while I was reading a SE post) or just check out the apple doc\n. ",
    "MatzFan": "For those like me who do not wish to disable SIP, note that it is possible to use proxychains-ng with Homebrew-installed executables (or linked dupes) as SIP doesn't cover /usr/local. E.g. to use Homebrew's curl (with Tor in the .conf file here):\n$ brew install curl\nThen:\n$ proxychains4 /usr/local/bin/curl http://ifconfig.co/\n[proxychains] config file found: /Users/me/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.11\n[proxychains] Dynamic chain  ...  127.0.0.1:9050  ...  188.113.88.193:80  ...  OK\n171.25.193.132\nPerhaps this could be added to the README section where this issue is mentioned?\n. Using the curl example you can do brew link --force curl which will use Homebrew's curl before system installed version (as Homebrew insists /usr/local/bin comes before /usr/bin in your $PATH). If you do that you can simply do $ proxychains4 curl http://ifconfig.co/. Generally not advised to override (dupe) system binaries like this - hence my example using path to the Homebrew Cellar. Homebrew call this Keg only I think.\nNot tried ssh, but any Homebrew-installed binary should work with proxychains like this on El Cap., as SIP doesn't affect the directory where all brewed symlinks go.\n. Homebrew openssh seems to work (using Tor in my .conf file):\n$ brew install openssh\n==> Installing openssh from homebrew/dupes\n==> Downloading https://homebrew.bintray.com/bottles-dupes/openssh-7.1p2.el_capitan.bottle.tar.gz\nAlready downloaded: /Library/Caches/Homebrew/openssh-7.1p2.el_capitan.bottle.tar.gz\n==> Pouring openssh-7.1p2.el_capitan.bottle.tar.gz\n\ud83c\udf7a  /usr/local/Cellar/openssh/7.1p2: 30 files, 3.9M\nMacintosh:~ me$ which ssh\n/usr/local/bin/ssh\nMacintosh:~ me$ proxychains4 ssh -T git@github.com\n[proxychains] config file found: /Users/me/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.11\n[proxychains] Dynamic chain  ...  127.0.0.1:9050  ...  192.30.252.130:22  ...  OK\nHi MatzFan! You've successfully authenticated, but GitHub does not provide shell access.\n. For those like me who do not wish to disable SIP, note that it is possible to use proxychains-ng with Homebrew-installed executables (or linked dupes) as SIP doesn't cover /usr/local. E.g. to use Homebrew's curl (with Tor in the .conf file here):\n$ brew install curl\nThen:\n$ proxychains4 /usr/local/bin/curl http://ifconfig.co/\n[proxychains] config file found: /Users/me/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.11\n[proxychains] Dynamic chain  ...  127.0.0.1:9050  ...  188.113.88.193:80  ...  OK\n171.25.193.132\nPerhaps this could be added to the README section where this issue is mentioned?\n. Using the curl example you can do brew link --force curl which will use Homebrew's curl before system installed version (as Homebrew insists /usr/local/bin comes before /usr/bin in your $PATH). If you do that you can simply do $ proxychains4 curl http://ifconfig.co/. Generally not advised to override (dupe) system binaries like this - hence my example using path to the Homebrew Cellar. Homebrew call this Keg only I think.\nNot tried ssh, but any Homebrew-installed binary should work with proxychains like this on El Cap., as SIP doesn't affect the directory where all brewed symlinks go.\n. Homebrew openssh seems to work (using Tor in my .conf file):\n$ brew install openssh\n==> Installing openssh from homebrew/dupes\n==> Downloading https://homebrew.bintray.com/bottles-dupes/openssh-7.1p2.el_capitan.bottle.tar.gz\nAlready downloaded: /Library/Caches/Homebrew/openssh-7.1p2.el_capitan.bottle.tar.gz\n==> Pouring openssh-7.1p2.el_capitan.bottle.tar.gz\n\ud83c\udf7a  /usr/local/Cellar/openssh/7.1p2: 30 files, 3.9M\nMacintosh:~ me$ which ssh\n/usr/local/bin/ssh\nMacintosh:~ me$ proxychains4 ssh -T git@github.com\n[proxychains] config file found: /Users/me/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.11\n[proxychains] Dynamic chain  ...  127.0.0.1:9050  ...  192.30.252.130:22  ...  OK\nHi MatzFan! You've successfully authenticated, but GitHub does not provide shell access.\n. ",
    "meritozh": "because of SIP, you can't use proxychains-ng to proxy a execute which is in system dir like /usr/bin. But /usr/local/bin can works. Something like youtube-dl with call python which is in /usr/bin, install a Homebrew python or others can solve it.\n. because of SIP, you can't use proxychains-ng to proxy a execute which is in system dir like /usr/bin. But /usr/local/bin can works. Something like youtube-dl with call python which is in /usr/bin, install a Homebrew python or others can solve it.\n. ",
    "zanjs": "$: proxychains4 /usr/local/bin/curl http://ifconfig.co/\n[proxychains] config file found: /usr/local/Cellar/proxychains-ng/4.11/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\nproxychains can't load process....: No such file or directory\n. $: proxychains4 /usr/local/bin/curl http://ifconfig.co/\n[proxychains] config file found: /usr/local/Cellar/proxychains-ng/4.11/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\nproxychains can't load process....: No such file or directory\n. ",
    "kakashisan": "Hello all, i'm not expert to fellow up but it seems i have a problem may be similar and related to this SIP, and i would be gratefull if someone could help.\ni use proxychains4 in mac os sierra and have an issue with scp.\nfor ssh, i counter the problem by copying the ssh from /usr/bin to /User/mylaptop then use this to ssh :\nproxychains4 /users/mylaptop/ssh user@host\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /opt/local/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.10\n[proxychains] Strict chain  .........\nand i could connect to my host. but scp wont work.\ni ran out of idea.. Thank you for the fast reply here when i scp:\nproxychains4 /Users/didisan/scp -vvv didi@host:.bashrc new.file\n[proxychains] config file found: /private/etc/proxychains.conf\n[proxychains] preloading /opt/local/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.10\nExecuting: program /usr/bin/ssh host user didi, command scp -v -f .bashrc\nOpenSSH_7.2p2, LibreSSL 2.4.1\ndebug1: Reading configuration data /Users/didisan/.ssh/config\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 20: Applying options for *\ndebug1: /etc/ssh/ssh_config line 56: Applying options for *\ndebug2: resolving \"host\" port 22\ndebug2: ssh_connect_direct: needpriv 0\ndebug1: Connecting to host [host] port 22.\ndebug1: connect to address host port 22: Connection refused\nssh: connect to host host port 22: Connection refused\n. i did it before by adding the path but it stills excecutes the binary one : \n\"Executing: program on /usr/bin/ssh\"\ni think even if i copied the scp from usr/bin to my local folder, it is still somehow (may be because of proxychains lib or smth) linked to the ssh of the bin and executed it. my ssh still works with this trick and connect through proxy.. Hello all, i'm not expert to fellow up but it seems i have a problem may be similar and related to this SIP, and i would be gratefull if someone could help.\ni use proxychains4 in mac os sierra and have an issue with scp.\nfor ssh, i counter the problem by copying the ssh from /usr/bin to /User/mylaptop then use this to ssh :\nproxychains4 /users/mylaptop/ssh user@host\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /opt/local/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.10\n[proxychains] Strict chain  .........\nand i could connect to my host. but scp wont work.\ni ran out of idea.. Thank you for the fast reply here when i scp:\nproxychains4 /Users/didisan/scp -vvv didi@host:.bashrc new.file\n[proxychains] config file found: /private/etc/proxychains.conf\n[proxychains] preloading /opt/local/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.10\nExecuting: program /usr/bin/ssh host user didi, command scp -v -f .bashrc\nOpenSSH_7.2p2, LibreSSL 2.4.1\ndebug1: Reading configuration data /Users/didisan/.ssh/config\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 20: Applying options for *\ndebug1: /etc/ssh/ssh_config line 56: Applying options for *\ndebug2: resolving \"host\" port 22\ndebug2: ssh_connect_direct: needpriv 0\ndebug1: Connecting to host [host] port 22.\ndebug1: connect to address host port 22: Connection refused\nssh: connect to host host port 22: Connection refused\n. i did it before by adding the path but it stills excecutes the binary one : \n\"Executing: program on /usr/bin/ssh\"\ni think even if i copied the scp from usr/bin to my local folder, it is still somehow (may be because of proxychains lib or smth) linked to the ssh of the bin and executed it. my ssh still works with this trick and connect through proxy.. ",
    "JasonQSY": "For git, use sudo proxychains4 git clone works for me.. For git, use sudo proxychains4 git clone works for me.. ",
    "liftliftlift": "Acorrding to Apple we should use path like /usr/local  instead of /usr or /usr/bin etc since OS X El Capitan.  See https://support.apple.com/en-us/HT204899.\nAnd my solved steps at OSX 10.11.6:\n1. Install Homebrew\n2. brew install proxychains-ng\n==> Downloading https://homebrew.bintray.com/bottles/proxychains-ng-4.12_1.el_ca\nAlready downloaded: /Users/futeli/Library/Caches/Homebrew/proxychains-ng-4.12_1.el_capitan.bottle.tar.gz\n==> Pouring proxychains-ng-4.12_1.el_capitan.bottle.tar.gz\n\ud83c\udf7a  /usr/local/Cellar/proxychains-ng/4.12_1: 8 files, 74.8KB\n\n\nProxychains-ng now has been installed at path /usr/local/Cellar\n\n\nbrew install curl\n\n\n==> Downloading https://homebrew.bintray.com/bottles/curl-7.53.1.el_capitan.bott\n################################################################## 100.0%\n==> Pouring curl-7.53.1.el_capitan.bottle.tar.gz\n==> Caveats\n(here has some caveats I don't use this time)\n==> Summary\n\ud83c\udf7a  /usr/local/Cellar/curl/7.53.1: 390 files, 2.7MB\n\nCurl also has been installed at path /usr/local/Cellar\ncd /usr/local/etc && vim proxychains.conf\nConfigure [ProxyList] in proxychains.conf\nDo not use  proxychains4 curl xxxx.com but proxychains4 /usr/local/Cellar/curl/7.53.1/bin/curl xxxxx.com. \n. Acorrding to Apple we should use path like /usr/local  instead of /usr or /usr/bin etc since OS X El Capitan.  See https://support.apple.com/en-us/HT204899.\nAnd my solved steps at OSX 10.11.6:\nInstall Homebrew\nbrew install proxychains-ng\n\n==> Downloading https://homebrew.bintray.com/bottles/proxychains-ng-4.12_1.el_ca\nAlready downloaded: /Users/futeli/Library/Caches/Homebrew/proxychains-ng-4.12_1.el_capitan.bottle.tar.gz\n==> Pouring proxychains-ng-4.12_1.el_capitan.bottle.tar.gz\n\ud83c\udf7a  /usr/local/Cellar/proxychains-ng/4.12_1: 8 files, 74.8KB\n\n\nProxychains-ng now has been installed at path /usr/local/Cellar\n\n\nbrew install curl\n\n\n==> Downloading https://homebrew.bintray.com/bottles/curl-7.53.1.el_capitan.bott\n################################################################## 100.0%\n==> Pouring curl-7.53.1.el_capitan.bottle.tar.gz\n==> Caveats\n(here has some caveats I don't use this time)\n==> Summary\n\ud83c\udf7a  /usr/local/Cellar/curl/7.53.1: 390 files, 2.7MB\n\nCurl also has been installed at path /usr/local/Cellar\ncd /usr/local/etc && vim proxychains.conf\nConfigure [ProxyList] in proxychains.conf\nDo not use  proxychains4 curl xxxx.com but proxychains4 /usr/local/Cellar/curl/7.53.1/bin/curl xxxxx.com. \n. \n",
    "Huang-Libo": "@tais9 \nYou helped me!. @tais9 \nYou helped me!. ",
    "willin": "```\nCPPFLAGS=-I/usr/local/include/sdk brew install proxychains-ng\nWarning: You are using OS X 10.11.\nWe do not provide support for this pre-release version.\nYou may encounter build failures or other breakage.\n==> Downloading https://downloads.sourceforge.net/project/proxychains-ng/proxychains\nAlready downloaded: /Library/Caches/Homebrew/proxychains-ng-4.10.tar.bz2\n==> ./configure --prefix=/usr/local/Cellar/proxychains-ng/4.10 --sysconfdir=/usr/loc\n==> make\nmake:  [src/nameinfo.o] Error 1\n1 error generated.\nmake:  [src/libproxychains.o] Error 1\n1 error generated.\nmake: *** [src/core.o] Error 1\nREAD THIS: https://git.io/brew-troubleshooting\n```\n. https://gist.github.com/736d665fc9754a3d055b\n. os x 10.12.3\nmacbook pro 15 later 2016. yes, csrutil enabled.\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.12_1/lib/libproxychains4.dylib' into librar\ny validated process because no suitable image found.  Did find:\n        /usr/local/Cellar/proxychains-ng/4.12_1/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/p\nroxychains-ng/4.12_1/lib/libproxychains4.dylib'\nit's just a warning msg. ```\nCPPFLAGS=-I/usr/local/include/sdk brew install proxychains-ng\nWarning: You are using OS X 10.11.\nWe do not provide support for this pre-release version.\nYou may encounter build failures or other breakage.\n==> Downloading https://downloads.sourceforge.net/project/proxychains-ng/proxychains\nAlready downloaded: /Library/Caches/Homebrew/proxychains-ng-4.10.tar.bz2\n==> ./configure --prefix=/usr/local/Cellar/proxychains-ng/4.10 --sysconfdir=/usr/loc\n==> make\nmake:  [src/nameinfo.o] Error 1\n1 error generated.\nmake:  [src/libproxychains.o] Error 1\n1 error generated.\nmake: *** [src/core.o] Error 1\nREAD THIS: https://git.io/brew-troubleshooting\n```\n. https://gist.github.com/736d665fc9754a3d055b\n. os x 10.12.3\nmacbook pro 15 later 2016. yes, csrutil enabled.\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.12_1/lib/libproxychains4.dylib' into librar\ny validated process because no suitable image found.  Did find:\n        /usr/local/Cellar/proxychains-ng/4.12_1/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/p\nroxychains-ng/4.12_1/lib/libproxychains4.dylib'\nit's just a warning msg. ",
    "Andrewbarmer": "Maybe you are right, proxychains4 work fine with all other tools, which includes Metasploit.\nI have these problems only with Armitage.\nHere is the console output:\nroot@PC432:~# gdb --args proxychains4 armitage\nGNU gdb (Debian 7.7.1+dfsg-5) 7.7.1\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from proxychains4...done.\n(gdb) run\nStarting program: /usr/bin/proxychains4 armitage\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\nprocess 16689 is executing new program: /bin/dash\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7ffff7ff5700 (LWP 16693)]\n[Thread 0x7ffff7ff5700 (LWP 16693) exited]\nprocess 16689 is executing new program: /bin/dash\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7ffff7ff5700 (LWP 16694)]\n[] Starting msfrpcd for you.\n[] MSGRPC starting on 127.0.0.1:55553 (NO SSL):Msg...\n[] Used the tab method: 192.168.178.74\n[] Remote Exploits Synced\n[] Starting Cortana on 192.168.178.74\n[] Creating a default reverse handler... 0.0.0.0:23702\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187: [BUG] rb_maygvl_fd_fix_cloexec: fcntl(351, F_GETFD) failed: Bad file descriptor\nruby 2.1.5p273 (2014-11-13) [x86_64-linux-gnu]\n-- Control frame information -----------------------------------------------\nc:0012 p:---- s:0062 e:000061 CFUNC  :initialize\nc:0011 p:---- s:0060 e:000059 CFUNC  :new\nc:0010 p:0494 s:0054 e:000053 METHOD /usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187\nc:0009 p:0120 s:0038 e:000037 METHOD /usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:33\nc:0008 p:0012 s:0034 e:000033 METHOD /usr/share/metasploit-framework/lib/rex/socket.rb:47\nc:0007 p:0026 s:0030 e:000029 METHOD /usr/share/metasploit-framework/lib/rex/socket/tcp.rb:37\nc:0006 p:0037 s:0026 e:000025 METHOD /usr/share/metasploit-framework/lib/rex/socket/tcp.rb:28\nc:0005 p:0232 s:0022 e:000021 METHOD /usr/share/metasploit-framework/lib/msf/core/exploit/tcp.rb:102\nc:0004 p:0033 s:0015 e:000014 BLOCK  /usr/share/metasploit-framework/modules/auxiliary/scanner/portscan/tcp.rb:56 [FINISH]\nc:0003 p:---- s:0010 e:000009 CFUNC  :call\nc:0002 p:0113 s:0006 e:000005 BLOCK  /usr/share/metasploit-framework/lib/msf/core/thread_manager.rb:100 [FINISH]\nc:0001 p:---- s:0002 e:000001 TOP    [FINISH]\n-- Ruby level backtrace information ----------------------------------------\n/usr/share/metasploit-framework/lib/msf/core/thread_manager.rb:100:in block in spawn'\n/usr/share/metasploit-framework/lib/msf/core/thread_manager.rb:100:incall'\n/usr/share/metasploit-framework/modules/auxiliary/scanner/portscan/tcp.rb:56:in block (2 levels) in run_host'\n/usr/share/metasploit-framework/lib/msf/core/exploit/tcp.rb:102:inconnect'\n/usr/share/metasploit-framework/lib/rex/socket/tcp.rb:28:in create'\n/usr/share/metasploit-framework/lib/rex/socket/tcp.rb:37:increate_param'\n/usr/share/metasploit-framework/lib/rex/socket.rb:47:in create_param'\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:33:increate'\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187:in create_by_type'\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187:innew'\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187:in `initialize'\n-- C level backtrace information -------------------------------------------\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x18a837) [0x7ffff789c837]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x18a903) [0x7ffff789c903]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x6d563) [0x7ffff777f563] putchar.c:28\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_bug+0xb3) [0x7ffff777fbd3] swscanf.c:26\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_maygvl_fd_fix_cloexec+0x68) [0x7ffff77a6bf8] ../sysdeps/x86_64/multiarch/strcpy-ssse3.S:3504\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_fd_fix_cloexec+0x8) [0x7ffff77a6c28] ../sysdeps/x86_64/multiarch/strcpy-ssse3.S:3519\n/usr/lib/x86_64-linux-gnu/ruby/2.1.0/socket.so(+0x6cb5) [0x7ffff4ef0cb5] nptl-init.c:398\n/usr/lib/x86_64-linux-gnu/ruby/2.1.0/socket.so(rsock_socket+0x17) [0x7ffff4ef16f7] allocatestack.c:147\n/usr/lib/x86_64-linux-gnu/ruby/2.1.0/socket.so(+0x1313d) [0x7ffff4efd13d]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x1770c6) [0x7ffff78890c6]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_funcallv+0x159) [0x7ffff788d239]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_class_new_instance+0x21) [0x7ffff77d12b1] fnmatch_loop.c:487\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x174ee6) [0x7ffff7886ee6]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x17dd23) [0x7ffff788fd23]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x1835ed) [0x7ffff78955ed]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x17661b) [0x7ffff788861b]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x176d0b) [0x7ffff7888d0b]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x176df8) [0x7ffff7888df8]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x79052) [0x7ffff778b052] hooks.c:265\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x174ee6) [0x7ffff7886ee6]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x17dc85) [0x7ffff788fc85]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x1835ed) [0x7ffff78955ed]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x17661b) [0x7ffff788861b]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x176d0b) [0x7ffff7888d0b]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x176df8) [0x7ffff7888df8]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x192dcc) [0x7ffff78a4dcc]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x193040) [0x7ffff78a5040]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x80a4) [0x7ffff74fd0a4] pthread_create.c:309\n/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d) [0x7ffff687304d] ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n-- Other runtime information -----------------------------------------------\n- Loaded script: msfrpcd\n- Loaded features:\n0 enumerator.so\n  1 /usr/lib/x86_64-linux-gnu/ruby/2.1.0/enc/encdb.so\n  #i have to trunc here, about 2000 lines, to much for comment field#\n  2349 /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/gems/metasploit_data_models-1.2.5/app/models/mdm/note.rb\n- Process memory map:\n00400000-00401000 r-xp 00000000 fe:01 2755029                            /usr/bin/ruby2.1\n00600000-00601000 r--p 00000000 fe:01 2755029                            /usr/bin/ruby2.1\n00601000-00602000 rw-p 00001000 fe:01 2755029                            /usr/bin/ruby2.1\n00602000-11f71000 rw-p 00000000 00:00 0                                  [heap]\n7fff6c000000-7fff6f701000 rw-p 00000000 00:00 0 \n7fff6f701000-7fff70000000 ---p 00000000 00:00 0 \n7fff74000000-7fff77fe8000 rw-p 00000000 00:00 0 \n7fff77fe8000-7fff78000000 ---p 00000000 00:00 0 \n7fff7c000000-7fff7ffc5000 rw-p 00000000 00:00 0 \n7fff7ffc5000-7fff80000000 ---p 00000000 00:00 0 \n7fff826e7000-7fff826e8000 ---p 00000000 00:00 0 \n7fff826e8000-7fff827e8000 rw-p 00000000 00:00 0                          [stack:29746]\n7fff827e8000-7fff827e9000 ---p 00000000 00:00 0 \n7fff827e9000-7fff828e9000 rw-p 00000000 00:00 0                          [stack:29399]\n7fff82bec000-7fff82bed000 ---p 00000000 00:00 0 \n7fff82bed000-7fff82ced000 rw-p 00000000 00:00 0                          [stack:29404]\n7fff83bfc000-7fff83bfd000 ---p 00000000 00:00 0 \n7fff83bfd000-7fff83cfd000 rw-p 00000000 00:00 0                          [stack:29705]\n7fff83dfe000-7fff83dff000 ---p 00000000 00:00 0 \n7fff83dff000-7fff83eff000 rw-p 00000000 00:00 0                          [stack:29697]\n7fff84000000-7fff87fd4000 rw-p 00000000 00:00 0 \n7fff87fd4000-7fff88000000 ---p 00000000 00:00 0 \n7fff880c1000-7fff880c2000 ---p 00000000 00:00 0 \n7fff880c2000-7fff881c2000 rw-p 00000000 00:00 0                          [stack:29704]\n7fff886c7000-7fff886c8000 ---p 00000000 00:00 0 \n7fff886c8000-7fff887c8000 rw-p 00000000 00:00 0                          [stack:29799]\n7fff88acb000-7fff88acc000 ---p 00000000 00:00 0 \n7fff88acc000-7fff88bcc000 rw-p 00000000 00:00 0                          [stack:29608]\n7fff88ecf000-7fff88ed0000 ---p 00000000 00:00 0 \n7fff88ed0000-7fff88fd0000 rw-p 00000000 00:00 0                          [stack:29701]\n7fff890d1000-7fff890d2000 ---p 00000000 00:00 0 \n7fff890d2000-7fff891d2000 rw-p 00000000 00:00 0                          [stack:29686]\n7fff892d3000-7fff892d4000 ---p 00000000 00:00 0 \n7fff892d4000-7fff893d4000 rw-p 00000000 00:00 0                          [stack:29700]\n7fff8aff0000-7fff8aff1000 ---p 00000000 00:00 0 \n7fff8aff1000-7fff8b0f1000 rw-p 00000000 00:00 0                          [stack:21476]\n7fff8b4f5000-7fff8b4f6000 ---p 00000000 00:00 0 \n7fff8b4f6000-7fff8b5f6000 rw-p 00000000 00:00 0                          [stack:29969]\n7fff8b5f6000-7fff8b5f7000 ---p 00000000 00:00 0 \n7fff8b5f7000-7fff8b6f7000 rw-p 00000000 00:00 0                          [stack:29806]\n7fff8b9fa000-7fff8b9fb000 ---p 00000000 00:00 0 \n7fff8b9fb000-7fff8bafb000 rw-p 00000000 00:00 0                          [stack:29760]\n7fff8bafb000-7fff8bafc000 ---p 00000000 00:00 0 \n7fff8bafc000-7fff8bbfc000 rw-p 00000000 00:00 0                          [stack:29956]\n7fff8bbfc000-7fff8bbfd000 ---p 00000000 00:00 0 \n7fff8bbfd000-7fff8bcfd000 rw-p 00000000 00:00 0                          [stack:29955]\n7fff8bcfd000-7fff8bcfe000 ---p 00000000 00:00 0 \n7fff8bcfe000-7fff8bdfe000 rw-p 00000000 00:00 0                          [stack:29954]\n7fff8bdfe000-7fff8bdff000 ---p 00000000 00:00 0 \n7fff8bdff000-7fff8beff000 rw-p 00000000 00:00 0                          [stack:29953]\n7fff8beff000-7fff8bf00000 ---p 00000000 00:00 0 \n7fff8bf00000-7fff8c000000 rw-p 00000000 00:00 0                          [stack:29952]\n7fff8c000000-7fff8ffc5000 rw-p 00000000 00:00 0 \n7fff8ffc5000-7fff90000000 ---p 00000000 00:00 0 \n7fff900c1000-7fff900c2000 ---p 00000000 00:00 0 \n7fff900c2000-7fff901c2000 rw-p 00000000 00:00 0                          [stack:29951]\n7fff901c2000-7fff901c3000 ---p 00000000 00:00 0 \n7fff901c3000-7fff902c3000 rw-p 00000000 00:00 0                          [stack:21473]\n7fff902c3000-7fff902c4000 ---p 00000000 00:00 0 \n7fff902c4000-7fff903c4000 rw-p 00000000 00:00 0                          [stack:29962]\n7fff903c4000-7fff903c5000 ---p 00000000 00:00 0 \n7fff903c5000-7fff904c5000 rw-p 00000000 00:00 0                          [stack:29949]\n7fff904c5000-7fff904c6000 ---p 00000000 00:00 0 \n7fff904c6000-7fff905c6000 rw-p 00000000 00:00 0                          [stack:29948]\n7fff905c6000-7fff905c7000 ---p 00000000 00:00 0 \n7fff905c7000-7fff906c7000 rw-p 00000000 00:00 0                          [stack:29966]\n7fff906c7000-7fff906c8000 ---p 00000000 00:00 0 \n7fff906c8000-7fff907c8000 rw-p 00000000 00:00 0                          [stack:29982]\n7fff907c8000-7fff907c9000 ---p 00000000 00:00 0 \n7fff907c9000-7fff908c9000 rw-p 00000000 00:00 0                          [stack:29797]\n7fff908c9000-7fff908ca000 ---p 00000000 00:00 0 \n7fff908ca000-7fff909ca000 rw-p 00000000 00:00 0                          [stack:29981]\n7fff909ca000-7fff909cb000 ---p 00000000 00:00 0 \n7fff909cb000-7fff90acb000 rw-p 00000000 00:00 0                          [stack:29965]\n7fff90acb000-7fff90acc000 ---p 00000000 00:00 0 \n7fff90acc000-7fff90bcc000 rw-p 00000000 00:00 0                          [stack:29983]\n7fff90bcc000-7fff90bcd000 ---p 00000000 00:00 0 \n7fff90bcd000-7fff90ccd000 rw-p 00000000 00:00 0                          [stack:29989]\n7fff90ccd000-7fff90cce000 ---p 00000000 00:00 0 \n7fff90cce000-7fff90dce000 rw-p 00000000 00:00 0                          [stack:29988]\n7fff90dce000-7fff90dcf000 ---p 00000000 00:00 0 \n7fff90dcf000-7fff90ecf000 rw-p 00000000 00:00 0                          [stack:29840]\n7fff90ecf000-7fff90ed0000 ---p 00000000 00:00 0 \n7fff90ed0000-7fff90fd0000 rw-p 00000000 00:00 0                          [stack:29627]\n7fff90fd0000-7fff90fd1000 ---p 00000000 00:00 0 \n7fff90fd1000-7fff910d1000 rw-p 00000000 00:00 0                          [stack:29613]\n7fff910d1000-7fff910d2000 ---p 00000000 00:00 0 \n7fff910d2000-7fff911d2000 rw-p 00000000 00:00 0                          [stack:29803]\n7fff911d2000-7fff911d3000 ---p 00000000 00:00 0 \n7fff911d3000-7fff912d3000 rw-p 00000000 00:00 0                          [stack:29654]\n7fff912d3000-7fff912d4000 ---p 00000000 00:00 0 \n7fff912d4000-7fff913d4000 rw-p 00000000 00:00 0                          [stack:27707]\n7fff913d4000-7fff913d5000 ---p 00000000 00:00 0 \n7fff913d5000-7fff914d5000 rw-p 00000000 00:00 0                          [stack:29940]\n7fff914d5000-7fff914d6000 ---p 00000000 00:00 0 \n7fff914d6000-7fff915d6000 rw-p 00000000 00:00 0                          [stack:21474]\n7fff915d6000-7fff915d7000 ---p 00000000 00:00 0 \n7fff915d7000-7fff916d7000 rw-p 00000000 00:00 0                          [stack:29739]\n7fff916d7000-7fff916d8000 ---p 00000000 00:00 0 \n7fff916d8000-7fff917d8000 rw-p 00000000 00:00 0                          [stack:29939]\n7fff917d8000-7fff917d9000 ---p 00000000 00:00 0 \n7fff917d9000-7fff918d9000 rw-p 00000000 00:00 0                          [stack:29938]\n7fff918d9000-7fff918da000 ---p 00000000 00:00 0 \n7fff918da000-7fff919da000 rw-p 00000000 00:00 0                          [stack:29937]\n7fff919da000-7fff919db000 ---p 00000000 00:00 0 \n7fff919db000-7fff91adb000 rw-p 00000000 00:00 0                          [stack:29961]\n7fff91adb000-7fff91adc000 ---p 00000000 00:00 0 \n7fff91adc000-7fff91bdc000 rw-p 00000000 00:00 0                          [stack:29935]\n7fff91bdc000-7fff91bdd000 ---p 00000000 00:00 0 \n7fff91bdd000-7fff91cdd000 rw-p 00000000 00:00 0                          [stack:29934]\n7fff91cdd000-7fff91cde000 ---p 00000000 00:00 0 \n7fff91cde000-7fff91dde000 rw-p 00000000 00:00 0                          [stack:29785]\n7fff91dde000-7fff91ddf000 ---p 00000000 00:00 0 \n7fff91ddf000-7fff91edf000 rw-p 00000000 00:00 0                          [stack:29933]\n7fff91edf000-7fff91ee0000 ---p 00000000 00:00 0 \n7fff91ee0000-7fff91fe0000 rw-p 00000000 00:00 0                          [stack:29685]\n7fff91fe0000-7fff91fe1000 ---p 00000000 00:00 0 \n7fff91fe1000-7fff920e1000 rw-p 00000000 00:00 0                          [stack:29792]\n7fff920e1000-7fff920e2000 ---p 00000000 00:00 0 \n7fff920e2000-7fff921e2000 rw-p 00000000 00:00 0                          [stack:29789]\n7fff921e2000-7fff921e3000 ---p 00000000 00:00 0 \n7fff921e3000-7fff922e3000 rw-p 00000000 00:00 0                          [stack:29932]\n7fff922e3000-7fff922e4000 ---p 00000000 00:00 0 \n7fff922e4000-7fff923e4000 rw-p 00000000 00:00 0                          [stack:29421]\n7fff923e4000-7fff923e5000 ---p 00000000 00:00 0 \n7fff923e5000-7fff924e5000 rw-p 00000000 00:00 0                          [stack:29964]\n7fff924e5000-7fff924e6000 ---p 00000000 00:00 0 \n7fff924e6000-7fff925e6000 rw-p 00000000 00:00 0                          [stack:29648]\n7fff925e6000-7fff925e7000 ---p 00000000 00:00 0 \n7fff925e7000-7fff926e7000 rw-p 00000000 00:00 0                          [stack:29930]\n7fff926e7000-7fff926e8000 ---p 00000000 00:00 0 \n7fff926e8000-7fff927e8000 rw-p 00000000 00:00 0                          [stack:29798]\n7fff927e8000-7fff927e9000 ---p 00000000 00:00 0 \n7fff927e9000-7fff928e9000 rw-p 00000000 00:00 0                          [stack:29963]\n7fff928e9000-7fff928ea000 ---p 00000000 00:00 0 \n7fff928ea000-7fff929ea000 rw-p 00000000 00:00 0                          [stack:29978]\n7fff929ea000-7fff929eb000 ---p 00000000 00:00 0 \n7fff929eb000-7fff92aeb000 rw-p 00000000 00:00 0                          [stack:29419]\n7fff92aeb000-7fff92aec000 ---p 00000000 00:00 0 \n7fff92aec000-7fff92bec000 rw-p 00000000 00:00 0                          [stack:29986]\n7fff92bec000-7fff92bed000 ---p 00000000 00:00 0 \n7fff92bed000-7fff92ced000 rw-p 00000000 00:00 0                          [stack:29926]\n7fff92ced000-7fff92cee000 ---p 00000000 00:00 0 \n7fff92cee000-7fff92dee000 rw-p 00000000 00:00 0                          [stack:29925]\n7fff92dee000-7fff92def000 ---p 00000000 00:00 0 \n7fff92def000-7fff92eef000 rw-p 00000000 00:00 0                          [stack:29979]\n7fff92eef000-7fff92ef0000 ---p 00000000 00:00 0 \n7fff92ef0000-7fff92ff0000 rw-p 00000000 00:00 0                          [stack:29816]\n7fff92ff0000-7fff92ff1000 ---p 00000000 00:00 0 \n7fff92ff1000-7fff930f1000 rw-p 00000000 00:00 0                          [stack:21472]\n7fff930f1000-7fff930f2000 ---p 00000000 00:00 0 \n7fff930f2000-7fff931f2000 rw-p 00000000 00:00 0                          [stack:29987]\n7fff931f2000-7fff931f3000 ---p 00000000 00:00 0 \n7fff931f3000-7fff932f3000 rw-p 00000000 00:00 0                          [stack:29993]\n7fff934f5000-7fff934f6000 ---p 00000000 00:00 0 \n7fff934f6000-7fff935f6000 rw-p 00000000 00:00 0                          [stack:29971]\n7fff937f8000-7fff937f9000 ---p 00000000 00:00 0 \n7fff937f9000-7fff938f9000 rw-p 00000000 00:00 0                          [stack:29996]\n7fff938f9000-7fff938fa000 ---p 00000000 00:00 0 \n7fff938fa000-7fff939fa000 rw-p 00000000 00:00 0 \n7fff939fa000-7fff939fb000 ---p 00000000 00:00 0 \n7fff939fb000-7fff93afb000 rw-p 00000000 00:00 0                          [stack:25592]\n7fff93afb000-7fff93afc000 ---p 00000000 00:00 0 \n7fff93afc000-7fff93bfc000 rw-p 00000000 00:00 0                          [stack:29698]\n7fff93bfc000-7fff93bfd000 ---p 00000000 00:00 0 \n7fff93bfd000-7fff93cfd000 rw-p 00000000 00:00 0 \n7fff94000000-7fff97f4c000 rw-p 00000000 00:00 0 \n7fff97f4c000-7fff98000000 ---p 00000000 00:00 0 \n7fff980c1000-7fff980c2000 ---p 00000000 00:00 0 \n7fff980c2000-7fff981c2000 rw-p 00000000 00:00 0                          [stack:29960]\n7fff982c3000-7fff982c4000 ---p 00000000 00:00 0 \n7fff982c4000-7fff983c4000 rw-p 00000000 00:00 0                          [stack:29957]\n7fff983c4000-7fff983c5000 ---p 00000000 00:00 0 \n7fff983c5000-7fff984c5000 rw-p 00000000 00:00 0                          [stack:29959]\n7fff984c5000-7fff984c6000 ---p 00000000 00:00 0 \n7fff984c6000-7fff985c6000 rw-p 00000000 00:00 0                          [stack:29763]\n7fff985c6000-7fff985c7000 ---p 00000000 00:00 0 \n7fff985c7000-7fff986c7000 rw-p 00000000 00:00 0                          [stack:29758]\n7fff988c9000-7fff988ca000 ---p 00000000 00:00 0 \n7fff988ca000-7fff989ca000 rw-p 00000000 00:00 0                          [stack:29764]\n7fff989ca000-7fff989cb000 ---p 00000000 00:00 0 \n7fff989cb000-7fff98acb000 rw-p 00000000 00:00 0                          [stack:29765]\n7fff98acb000-7fff98acc000 ---p 00000000 00:00 0 \n7fff98acc000-7fff98bcc000 rw-p 00000000 00:00 0                          [stack:29759]\n7fff98bcc000-7fff98bcd000 ---p 00000000 00:00 0 \n7fff98bcd000-7fff98ccd000 rw-p 00000000 00:00 0                          [stack:29761]\n7fff98ccd000-7fff98cce000 ---p 00000000 00:00 0 \n7fff98cce000-7fff98dce000 rw-p 00000000 00:00 0                          [stack:29762]\n7fff98dce000-7fff98dcf000 ---p 00000000 00:00 0 \n7fff98dcf000-7fff98ecf000 rw-p 00000000 00:00 0                          [stack:29443]\n7fff990d1000-7fff990d2000 ---p 00000000 00:00 0 \n7fff990d2000-7fff991d2000 rw-p 00000000 00:00 0                          [stack:29958]\n7fff991d2000-7fff991d3000 ---p 00000000 00:00 0 \n7fff991d3000-7fff992d3000 rw-p 00000000 00:00 0                          [stack:25070]\n7fff992d3000-7fff992d4000 ---p 00000000 00:00 0 \n7fff992d4000-7fff993d4000 rw-p 00000000 00:00 0                          [stack:29807]\n7fff994d5000-7fff994d6000 ---p 00000000 00:00 0 \n7fff994d6000-7fff995d6000 rw-p 00000000 00:00 0                          [stack:29678]\n7fff995d6000-7fff995d7000 ---p 00000000 00:00 0 \n7fff995d7000-7fff996d7000 rw-p 00000000 00:00 0                          [stack:29976]\n7fff996d7000-7fff996d8000 ---p 00000000 00:00 0 \n7fff996d8000-7fff997d8000 rw-p 00000000 00:00 0                          [stack:29684]\n7fff997d8000-7fff997d9000 ---p 00000000 00:00 0 \n7fff997d9000-7fff998d9000 rw-p 00000000 00:00 0                          [stack:29827]\n7fff999da000-7fff999db000 ---p 00000000 00:00 0 \n7fff999db000-7fff99adb000 rw-p 00000000 00:00 0                          [stack:29802]\n7fff99adb000-7fff99adc000 ---p 00000000 00:00 0 \n7fff99adc000-7fff99bdc000 rw-p 00000000 00:00 0                          [stack:29610]\n7fff99cdd000-7fff99cde000 ---p 00000000 00:00 0 \n7fff99cde000-7fff99dde000 rw-p 00000000 00:00 0                          [stack:29418]\n7fff99dde000-7fff99ddf000 ---p 00000000 00:00 0 \n7fff99ddf000-7fff99edf000 rw-p 00000000 00:00 0                          [stack:29801]\n7fff99fe0000-7fff99fe1000 ---p 00000000 00:00 0 \n7fff99fe1000-7fff9a0e1000 rw-p 00000000 00:00 0                          [stack:29587]\n7fff9a2e3000-7fff9a2e4000 ---p 00000000 00:00 0 \n7fff9a2e4000-7fff9a3e4000 rw-p 00000000 00:00 0                          [stack:29859]\n7fff9a3e4000-7fff9a3e5000 ---p 00000000 00:00 0 \n7fff9a3e5000-7fff9a4e5000 rw-p 00000000 00:00 0                          [stack:29766]\n7fff9a4e5000-7fff9a4e6000 ---p 00000000 00:00 0 \n7fff9a4e6000-7fff9a5e6000 rw-p 00000000 00:00 0                          [stack:29858]\n7fff9a5e6000-7fff9a5e7000 ---p 00000000 00:00 0 \n7fff9a5e7000-7fff9a6e7000 rw-p 00000000 00:00 0                          [stack:29680]\n7fff9a6e7000-7fff9a6e8000 ---p 00000000 00:00 0 \n7fff9a6e8000-7fff9a7e8000 rw-p 00000000 00:00 0                          [stack:29857]\n7fff9a7e8000-7fff9a7e9000 ---p 00000000 00:00 0 \n7fff9a7e9000-7fff9a8e9000 rw-p 00000000 00:00 0                          [stack:29856]\n7fff9a8e9000-7fff9a8ea000 ---p 00000000 00:00 0 \n7fff9a8ea000-7fff9a9ea000 rw-p 00000000 00:00 0                          [stack:29683]\n7fff9a9ea000-7fff9a9eb000 ---p 00000000 00:00 0 \n7fff9a9eb000-7fff9aaeb000 rw-p 00000000 00:00 0                          [stack:29776]\n7fff9aaeb000-7fff9aaec000 ---p 00000000 00:00 0 \n7fff9aaec000-7fff9abec000 rw-p 00000000 00:00 0                          [stack:29682]\n7fff9abec000-7fff9abed000 ---p 00000000 00:00 0 \n7fff9abed000-7fff9aced000 rw-p 00000000 00:00 0                          [stack:29775]\n7fff9aced000-7fff9acee000 ---p 00000000 00:00 0 \n7fff9acee000-7fff9adee000 rw-p 00000000 00:00 0                          [stack:29774]\n7fff9adee000-7fff9adef000 ---p 00000000 00:00 0 \n7fff9adef000-7fff9aeef000 rw-p 00000000 00:00 0                          [stack:29828]\n7fff9aeef000-7fff9aef0000 ---p 00000000 00:00 0 \n7fff9aef0000-7fff9aff0000 rw-p 00000000 00:00 0                          [stack:29590]\n7fff9aff0000-7fff9aff1000 ---p 00000000 00:00 0 \n7fff9aff1000-7fff9b0f1000 rw-p 00000000 00:00 0                          [stack:29586]\n7fff9b0f1000-7fff9b0f2000 ---p 00000000 00:00 0 \n7fff9b0f2000-7fff9b1f2000 rw-p 00000000 00:00 0                          [stack:29825]\n7fff9b1f2000-7fff9b1f3000 ---p 00000000 00:00 0 \n7fff9b1f3000-7fff9b2f3000 rw-p 00000000 00:00 0                          [stack:29834]\n7fff9b2f3000-7fff9b2f4000 ---p 00000000 00:00 0 \n7fff9b2f4000-7fff9b3f4000 rw-p 00000000 00:00 0                          [stack:29595]\n7fff9b3f4000-7fff9b3f5000 ---p 00000000 00:00 0 \n7fff9b3f5000-7fff9b4f5000 rw-p 00000000 00:00 0                          [stack:29823]\n7fff9b4f5000-7fff9b4f6000 ---p 00000000 00:00 0 \n7fff9b4f6000-7fff9b5f6000 rw-p 00000000 00:00 0                          [stack:29829]\n7fff9b5f6000-7fff9b5f7000 ---p 00000000 00:00 0 \n7fff9b5f7000-7fff9b6f7000 rw-p 00000000 00:00 0                          [stack:29699]\n7fff9b6f7000-7fff9b6f8000 ---p 00000000 00:00 0 \n7fff9b6f8000-7fff9b7f8000 rw-p 00000000 00:00 0                          [stack:29837]\n7fff9b7f8000-7fff9b7f9000 ---p 00000000 00:00 0 \n7fff9b7f9000-7fff9b8f9000 rw-p 00000000 00:00 0                          [stack:29773]\n7fff9b8f9000-7fff9b8fa000 ---p 00000000 00:00 0 \n7fff9b8fa000-7fff9b9fa000 rw-p 00000000 00:00 0                          [stack:29426]\n7fff9bafb000-7fff9bafc000 ---p 00000000 00:00 0 \n7fff9bafc000-7fff9bbfc000 rw-p 00000000 00:00 0                          [stack:29772]\n7fff9bbfc000-7fff9bbfd000 ---p 00000000 00:00 0 \n7fff9bbfd000-7fff9bcfd000 rw-p 00000000 00:00 0                          [stack:29649]\n7fff9bcfd000-7fff9bcfe000 ---p 00000000 00:00 0 \n7fff9bcfe000-7fff9bdfe000 rw-p 00000000 00:00 0                          [stack:29423]\n7fff9bdfe000-7fff9bdff000 ---p 00000000 00:00 0 \n7fff9bdff000-7fff9beff000 rw-p 00000000 00:00 0                          [stack:29800]\n7fff9beff000-7fff9bf00000 ---p 00000000 00:00 0 \n7fff9bf00000-7fff9c000000 rw-p 00000000 00:00 0                          [stack:29771]\n7fff9c000000-7fff9ff01000 rw-p 00000000 00:00 0 \n7fff9ff01000-7fffa0000000 ---p 00000000 00:00 0 \n7fffa00c1000-7fffa00c2000 ---p 00000000 00:00 0 \n7fffa00c2000-7fffa01c2000 rw-p 00000000 00:00 0                          [stack:29770]\n7fffa01c2000-7fffa01c3000 ---p 00000000 00:00 0 \n7fffa01c3000-7fffa02c3000 rw-p 00000000 00:00 0                          [stack:21465]\n7fffa02c3000-7fffa02c4000 ---p 00000000 00:00 0 \n7fffa02c4000-7fffa03c4000 rw-p 00000000 00:00 0                          [stack:29817]\n7fffa03c4000-7fffa03c5000 ---p 00000000 00:00 0 \n7fffa03c5000-7fffa04c5000 rw-p 00000000 00:00 0                          [stack:29808]\n7fffa04c5000-7fffa04c6000 ---p 00000000 00:00 0 \n7fffa04c6000-7fffa05c6000 rw-p 00000000 00:00 0                          [stack:29809]\n7fffa05c6000-7fffa05c7000 ---p 00000000 00:00 0 \n7fffa05c7000-7fffa06c7000 rw-p 00000000 00:00 0                          [stack:29400]\n7fffa06c7000-7fffa06c8000 ---p 00000000 00:00 0 \n7fffa06c8000-7fffa07c8000 rw-p 00000000 00:00 0                          [stack:29810]\n7fffa07c8000-7fffa07c9000 ---p 00000000 00:00 0 \n7fffa07c9000-7fffa08c9000 rw-p 00000000 00:00 0                          [stack:29741]\n7fffa08c9000-7fffa08ca000 ---p 00000000 00:00 0 \n7fffa08ca000-7fffa09ca000 rw-p 00000000 00:00 0                          [stack:29804]\n7fffa09ca000-7fffa09cb000 ---p 00000000 00:00 0 \n7fffa09cb000-7fffa0acb000 rw-p 00000000 00:00 0                          [stack:29855]\n7fffa0acb000-7fffa0acc000 ---p 00000000 00:00 0 \n7fffa0acc000-7fffa0bcc000 rw-p 00000000 00:00 0                          [stack:29594]\n7fffa0bcc000-7fffa0bcd000 ---p 00000000 00:00 0 \n7fffa0bcd000-7fffa0ccd000 rw-p 00000000 00:00 0                          [stack:29812]\n7fffa0ccd000-7fffa0cce000 ---p 00000000 00:00 0 \n7fffa0cce000-7fffa0dce000 rw-p 00000000 00:00 0                          [stack:29819]\n7fffa0dce000-7fffa0dcf000 ---p 00000000 00:00 0 \n7fffa0dcf000-7fffa0ecf000 rw-p 00000000 00:00 0                          [stack:29784]\n7fffa0ecf000-7fffa0ed0000 ---p 00000000 00:00 0 \n7fffa0ed0000-7fffa0fd0000 rw-p 00000000 00:00 0                          [stack:29447]\n7fffa0fd0000-7fffa0fd1000 ---p 00000000 00:00 0 \n7fffa0fd1000-7fffa10d1000 rw-p 00000000 00:00 0                          [stack:29818]\n7fffa10d1000-7fffa10d2000 ---p 00000000 00:00 0 \n7fffa10d2000-7fffa11d2000 rw-p 00000000 00:00 0                          [stack:29841]\n7fffa11d2000-7fffa11d3000 ---p 00000000 00:00 0 \n7fffa11d3000-7fffa12d3000 rw-p 00000000 00:00 0                          [stack:29811]\n7fffa12d3000-7fffa12d4000 ---p 00000000 00:00 0 \n7fffa12d4000-7fffa13d4000 rw-p 00000000 00:00 0                          [stack:29977]\n7fffa13d4000-7fffa13d5000 ---p 00000000 00:00 0 \n7fffa13d5000-7fffa14d5000 rw-p 00000000 00:00 0                          [stack:29401]\n7fffa14d5000-7fffa14d6000 ---p 00000000 00:00 0 \n7fffa14d6000-7fffa15d6000 rw-p 00000000 00:00 0                          [stack:29656]\n7fffa15d6000-7fffa15d7000 ---p 00000000 00:00 0 \n7fffa15d7000-7fffa16d7000 rw-p 00000000 00:00 0                          [stack:29589]\n7fffa16d7000-7fffa16d8000 ---p 00000000 00:00 0 \n7fffa16d8000-7fffa17d8000 rw-p 00000000 00:00 0                          [stack:29631]\n7fffa17d8000-7fffa17d9000 ---p 00000000 00:00 0 \n7fffa17d9000-7fffa18d9000 rw-p 00000000 00:00 0                          [stack:29793]\n7fffa18d9000-7fffa18da000 ---p 00000000 00:00 0 \n7fffa18da000-7fffa19da000 rw-p 00000000 00:00 0                          [stack:29854]\n7fffa19da000-7fffa19db000 ---p 00000000 00:00 0 \n7fffa19db000-7fffa1adb000 rw-p 00000000 00:00 0                          [stack:29791]\n7fffa1adb000-7fffa1adc000 ---p 00000000 00:00 0 \n7fffa1adc000-7fffa1bdc000 rw-p 00000000 00:00 0                          [stack:29787]\n7fffa1bdc000-7fffa1bdd000 ---p 00000000 00:00 0 \n7fffa1bdd000-7fffa1cdd000 rw-p 00000000 00:00 0                          [stack:29796]\n7fffa1cdd000-7fffa1cde000 ---p 00000000 00:00 0 \n7fffa1cde000-7fffa1dde000 rw-p 00000000 00:00 0                          [stack:29647]\n7fffa1dde000-7fffa1ddf000 ---p 00000000 00:00 0 \n7fffa1ddf000-7fffa1edf000 rw-p 00000000 00:00 0                          [stack:29677]\n7fffa1fe0000-7fffa1fe1000 ---p 00000000 00:00 0 \n7fffa1fe1000-7fffa20e1000 rw-p 00000000 00:00 0                          [stack:29592]\n7fffa20e1000-7fffa20e2000 ---p 00000000 00:00 0 \n7fffa20e2000-7fffa21e2000 rw-p 00000000 00:00 0                          [stack:29679]\n7fffa21e2000-7fffa21e3000 ---p 00000000 00:00 0 \n7fffa21e3000-7fffa22e3000 rw-p 00000000 00:00 0                          [stack:29839]\n7fffa22e3000-7fffa22e4000 ---p 00000000 00:00 0 \n7fffa22e4000-7fffa23e4000 rw-p 00000000 00:00 0                          [stack:29788]\n7fffa23e4000-7fffa23e5000 ---p 00000000 00:00 0 \n7fffa23e5000-7fffa24e5000 rw-p 00000000 00:00 0                          [stack:29781]\n7fffa24e5000-7fffa24e6000 ---p 00000000 00:00 0 \n7fffa24e6000-7fffa25e6000 rw-p 00000000 00:00 0                          [stack:29782]\n7fffa27d4000-7fffa27ea000 r-xp 00000000 fe:01 1574715                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fffa27ea000-7fffa29e9000 ---p 00016000 fe:01 1574715                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fffa29e9000-7fffa29ea000 rw-p 00015000 fe:01 1574715                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fffa29ea000-7fffa29eb000 ---p 00000000 00:00 0 \n7fffa29eb000-7fffa2aeb000 rw-p 00000000 00:00 0                          [stack:29968]\n7fffa2aeb000-7fffa2aec000 ---p 00000000 00:00 0 \n7fffa2aec000-7fffa2bec000 rw-p 00000000 00:00 0                          [stack:29593]\n7fffa2bec000-7fffa2bed000 ---p 00000000 00:00 0 \n7fffa2bed000-7fffa2ced000 rw-p 00000000 00:00 0                          [stack:29973]\n7fffa2ced000-7fffa2cee000 ---p 00000000 00:00 0 \n7fffa2cee000-7fffa2dee000 rw-p 00000000 00:00 0                          [stack:21477]\n7fffa2dee000-7fffa2def000 ---p 00000000 00:00 0 \n7fffa2def000-7fffa2eef000 rw-p 00000000 00:00 0                          [stack:29985]\n7fffa2ff0000-7fffa2ff1000 ---p 00000000 00:00 0 \n7fffa2ff1000-7fffa30f1000 rw-p 00000000 00:00 0                          [stack:29740]\n7fffa31f2000-7fffa31f3000 ---p 00000000 00:00 0 \n7fffa31f3000-7fffa32f3000 rw-p 00000000 00:00 0                          [stack:29632]\n7fffa32f3000-7fffa32f4000 ---p 00000000 00:00 0 \n7fffa32f4000-7fffa33f4000 rw-p 00000000 00:00 0                          [stack:27602]\n7fffa34f5000-7fffa34f6000 ---p 00000000 00:00 0 \n7fffa34f6000-7fffa35f6000 rw-p 00000000 00:00 0                          [stack:29406]\n7fffa36f7000-7fffa36f8000 ---p 00000000 00:00 0 \n7fffa36f8000-7fffa37f8000 rw-p 00000000 00:00 0                          [stack:29653]\n7fffa37f8000-7fffa37f9000 ---p 00000000 00:00 0 \n7fffa37f9000-7fffa38f9000 rw-p 00000000 00:00 0                          [stack:29706]\n7fffa39fa000-7fffa39fb000 ---p 00000000 00:00 0 \n7fffa39fb000-7fffa3afb000 rw-p 00000000 00:00 0                          [stack:29628]\n7fffa3afb000-7fffa3afc000 ---p 00000000 00:00 0 \n7fffa3afc000-7fffa3bfc000 rw-p 00000000 00:00 0                          [stack:29588]\n7fffa3cfd000-7fffa3cfe000 ---p 00000000 00:00 0 \n7fffa3cfe000-7fffa3dfe000 rw-p 00000000 00:00 0                          [stack:29745]\n7fffa3dfe000-7fffa3dff000 ---p 00000000 00:00 0 \n7fffa3dff000-7fffa3eff000 rw-p 00000000 00:00 0                          [stack:29997]\n7fffa4000000-7fffa7f01000 rw-p 00000000 00:00 0 \n7fffa7f01000-7fffa8000000 ---p 00000000 00:00 0 \n7fffa80c1000-7fffa80c2000 ---p 00000000 00:00 0 \n7fffa80c2000-7fffa81c2000 rw-p 00000000 00:00 0                          [stack:29403]\n7fffa81c2000-7fffa81c3000 ---p 00000000 00:00 0 \n7fffa81c3000-7fffa82c3000 rw-p 00000000 00:00 0                          [stack:29742]\n7fffa82c3000-7fffa82c4000 ---p 00000000 00:00 0 \n7fffa82c4000-7fffa83c4000 rw-p 00000000 00:00 0                          [stack:29738]\n7fffa84c5000-7fffa84c6000 ---p 00000000 00:00 0 \n7fffa84c6000-7fffa85c6000 rw-p 00000000 00:00 0                          [stack:29446]\n7fffa85c6000-7fffa85c7000 ---p 00000000 00:00 0 \n7fffa85c7000-7fffa86c7000 rw-p 00000000 00:00 0                          [stack:29744]\n7fffa86c7000-7fffa86c8000 ---p 00000000 00:00 0 \n7fffa86c8000-7fffa87c8000 rw-p 00000000 00:00 0                          [stack:29923]\n7fffa87c8000-7fffa87c9000 ---p 00000000 00:00 0 \n7fffa87c9000-7fffa88c9000 rw-p 00000000 00:00 0                          [stack:29767]\n7fffa88c9000-7fffa88ca000 ---p 00000000 00:00 0 \n7fffa88ca000-7fffa89ca000 rw-p 00000000 00:00 0                          [stack:29974]\n7fffa89ca000-7fffa89cb000 ---p 00000000 00:00 0 \n7fffa89cb000-7fffa8acb000 rw-p 00000000 00:00 0                          [stack:29743]\n7fffa8acb000-7fffa8acc000 ---p 00000000 00:00 0 \n7fffa8acc000-7fffa8bcc000 rw-p 00000000 00:00 0                          [stack:29990]\n7fffa8bcc000-7fffa8bcd000 ---p 00000000 00:00 0 \n7fffa8bcd000-7fffa8ccd000 rw-p 00000000 00:00 0                          [stack:29445]\n7fffa8ccd000-7fffa8cce000 ---p 00000000 00:00 0 \n7fffa8cce000-7fffa8dce000 rw-p 00000000 00:00 0                          [stack:29970]\n7fffa8dce000-7fffa8dcf000 ---p 00000000 00:00 0 \n7fffa8dcf000-7fffa8ecf000 rw-p 00000000 00:00 0                          [stack:29630]\n7fffa8ecf000-7fffa8ed0000 ---p 00000000 00:00 0 \n7fffa8ed0000-7fffa8fd0000 rw-p 00000000 00:00 0                          [stack:29655]\n7fffa8fd0000-7fffa8fd1000 ---p 00000000 00:00 0 \n7fffa8fd1000-7fffa90d1000 rw-p 00000000 00:00 0                          [stack:29794]\n7fffa90d1000-7fffa90d2000 ---p 00000000 00:00 0 \n7fffa90d2000-7fffa91d2000 rw-p 00000000 00:00 0                          [stack:21468]\n7fffa91d2000-7fffa91d3000 ---p 00000000 00:00 0 \n7fffa91d3000-7fffa92d3000 rw-p 00000000 00:00 0                          [stack:27603]\n7fffa92d3000-7fffa92d4000 ---p 00000000 00:00 0 \n7fffa92d4000-7fffa93d4000 rw-p 00000000 00:00 0                          [stack:25072]\n7fffa93d4000-7fffa93d5000 ---p 00000000 00:00 0 \n7fffa93d5000-7fffa94d5000 rw-p 00000000 00:00 0                          [stack:29420]\n7fffa94d5000-7fffa94d6000 ---p 00000000 00:00 0 \n7fffa94d6000-7fffa95d6000 rw-p 00000000 00:00 0                          [stack:29853]\n7fffa95d6000-7fffa95d7000 ---p 00000000 00:00 0 \n7fffa95d7000-7fffa96d7000 rw-p 00000000 00:00 0                          [stack:21475]\n7fffa96d7000-7fffa96d8000 ---p 00000000 00:00 0 \n7fffa96d8000-7fffa97d8000 rw-p 00000000 00:00 0                          [stack:29783]\n7fffa97d8000-7fffa97d9000 ---p 00000000 00:00 0 \n7fffa97d9000-7fffa98d9000 rw-p 00000000 00:00 0                          [stack:29609]\n7fffa98d9000-7fffa98da000 ---p 00000000 00:00 0 \n7fffa98da000-7fffa99da000 rw-p 00000000 00:00 0                          [stack:29633]\n7fffa99da000-7fffa99db000 ---p 00000000 00:00 0 \n7fffa99db000-7fffa9adb000 rw-p 00000000 00:00 0                          [stack:29994]\n7fffa9adb000-7fffa9adc000 ---p 00000000 00:00 0 \n7fffa9adc000-7fffa9bdc000 rw-p 00000000 00:00 0                          [stack:29634]\n7fffa9bdc000-7fffa9bdd000 ---p 00000000 00:00 0 \n7fffa9bdd000-7fffa9cdd000 rw-p 00000000 00:00 0                          [stack:29852]\n7fffa9cdd000-7fffa9cde000 ---p 00000000 00:00 0 \n7fffa9cde000-7fffa9dde000 rw-p 00000000 00:00 0                          [stack:29851]\n7fffa9dde000-7fffa9ddf000 ---p 00000000 00:00 0 \n7fffa9ddf000-7fffa9edf000 rw-p 00000000 00:00 0                          [stack:21804]\n7fffa9edf000-7fffa9ee0000 ---p 00000000 00:00 0 \n7fffa9ee0000-7fffa9fe0000 rw-p 00000000 00:00 0                          [stack:29441]\n7fffa9fe0000-7fffa9fe1000 ---p 00000000 00:00 0 \n7fffa9fe1000-7fffaa0e1000 rw-p 00000000 00:00 0                          [stack:29591]\n7fffaa0e1000-7fffaa0e2000 ---p 00000000 00:00 0 \n7fffaa0e2000-7fffaa1e2000 rw-p 00000000 00:00 0                          [stack:29397]\n7fffaa1e2000-7fffaa1e3000 ---p 00000000 00:00 0 \n7fffaa1e3000-7fffaa2e3000 rw-p 00000000 00:00 0                          [stack:29629]\n7fffaa2e3000-7fffaa2e4000 ---p 00000000 00:00 0 \n7fffaa2e4000-7fffaa3e4000 rw-p 00000000 00:00 0                          [stack:29444]\n7fffaa3e4000-7fffaa3e5000 ---p 00000000 00:00 0 \n7fffaa3e5000-7fffaa4e5000 rw-p 00000000 00:00 0                          [stack:29611]\n7fffaa4e5000-7fffaa4e6000 ---p 00000000 00:00 0 \n7fffaa4e6000-7fffaa5e6000 rw-p 00000000 00:00 0                          [stack:29850]\n7fffaa5e6000-7fffaa5e7000 ---p 00000000 00:00 0 \n7fffaa5e7000-7fffaa6e7000 rw-p 00000000 00:00 0                          [stack:29398]\n7fffaa7e8000-7fffaa7e9000 ---p 00000000 00:00 0 \n7fffaa7e9000-7fffaa8e9000 rw-p 00000000 00:00 0                          [stack:29972]\n7fffaa8e9000-7fffaa8ea000 ---p 00000000 00:00 0 \n7fffaa8ea000-7fffaa9ea000 rw-p 00000000 00:00 0                          [stack:29849]\n7fffaa9ea000-7fffaa9eb000 ---p 00000000 00:00 0 \n7fffaa9eb000-7fffaaaeb000 rw-p 00000000 00:00 0                          [stack:29848]\n7fffaaaeb000-7fffaaaec000 ---p 00000000 00:00 0 \n7fffaaaec000-7fffaabec000 rw-p 00000000 00:00 0                          [stack:21480]\n7fffaabec000-7fffaabed000 ---p 00000000 00:00 0 \n7fffaabed000-7fffaaced000 rw-p 00000000 00:00 0                          [stack:29614]\n7fffaaced000-7fffaacee000 ---p 00000000 00:00 0 \n7fffaacee000-7fffaadee000 rw-p 00000000 00:00 0                          [stack:29995]\n7fffaadee000-7fffaadef000 ---p 00000000 00:00 0 \n7fffaadef000-7fffaaeef000 rw-p 00000000 00:00 0                          [stack:29636]\n7fffaaeef000-7fffaaef0000 ---p 00000000 00:00 0 \n7fffaaef0000-7fffaaff0000 rw-p 00000000 00:00 0                          [stack:29847]\n7fffaaff0000-7fffaaff1000 ---p 00000000 00:00 0 \n7fffaaff1000-7fffab0f1000 rw-p 00000000 00:00 0                          [stack:29813]\n7fffab0f1000-7fffab0f2000 ---p 00000000 00:00 0 \n7fffab0f2000-7fffab1f2000 rw-p 00000000 00:00 0                          [stack:29635]\n7fffab1f2000-7fffab1f3000 ---p 00000000 00:00 0 \n7fffab1f3000-7fffab2f3000 rw-p 00000000 00:00 0                          [stack:29615]\n7fffab2f3000-7fffab2f4000 ---p 00000000 00:00 0 \n7fffab2f4000-7fffab3f4000 rw-p 00000000 00:00 0                          [stack:29846]\n7fffab3f4000-7fffab3f5000 ---p 00000000 00:00 0 \n7fffab3f5000-7fffab4f5000 rw-p 00000000 00:00 0                          [stack:29768]\n7fffab4f5000-7fffab4f6000 ---p 00000000 00:00 0 \n7fffab4f6000-7fffab5f6000 rw-p 00000000 00:00 0                          [stack:29820]\n7fffab5f6000-7fffab5f7000 ---p 00000000 00:00 0 \n7fffab5f7000-7fffab6f7000 rw-p 00000000 00:00 0                          [stack:29422]\n7fffab6f7000-7fffab6f8000 ---p 00000000 00:00 0 \n7fffab6f8000-7fffab7f8000 rw-p 00000000 00:00 0                          [stack:29747]\n7fffab7f8000-7fffab7f9000 ---p 00000000 00:00 0 \n7fffab7f9000-7fffab8f9000 rw-p 00000000 00:00 0                          [stack:25133]\n7fffab8f9000-7fffab8fa000 ---p 00000000 00:00 0 \n7fffab8fa000-7fffab9fa000 rw-p 00000000 00:00 0                          [stack:21471]\n7fffab9fa000-7fffab9fb000 ---p 00000000 00:00 0 \n7fffab9fb000-7fffabafb000 rw-p 00000000 00:00 0                          [stack:29425]\n7fffabafb000-7fffabafc000 ---p 00000000 00:00 0 \n7fffabafc000-7fffabbfc000 rw-p 00000000 00:00 0                          [stack:29607]\n7fffabbfc000-7fffabbfd000 ---p 00000000 00:00 0 \n7fffabbfd000-7fffabcfd000 rw-p 00000000 00:00 0                          [stack:29424]\n7fffabdfe000-7fffabdff000 ---p 00000000 00:00 0 \n7fffabdff000-7fffabeff000 rw-p 00000000 00:00 0                          [stack:27601]\n7fffabeff000-7fffabf00000 ---p 00000000 00:00 0 \n7fffabf00000-7fffac000000 rw-p 00000000 00:00 0                          [stack:28768]\n7fffac000000-7fffaff45000 rw-p 00000000 00:00 0 \n7fffaff45000-7fffb0000000 ---p 00000000 00:00 0 \n7fffb00c0000-7fffb00c1000 ---p 00000000 00:00 0 \n7fffb00c1000-7fffb01c1000 rw-p 00000000 00:00 0                          [stack:29975]\n7fffb01c1000-7fffb01c2000 ---p 00000000 00:00 0 \n7fffb01c2000-7fffb02c2000 rw-p 00000000 00:00 0                          [stack:29612]\n7fffb02c2000-7fffb02c3000 ---p 00000000 00:00 0 \n7fffb02c3000-7fffb03c3000 rw-p 00000000 00:00 0                          [stack:29790]\n7fffb03c3000-7fffb03c4000 ---p 00000000 00:00 0 \n7fffb03c4000-7fffb04c4000 rw-p 00000000 00:00 0                          [stack:29838]\n7fffb04c4000-7fffb04c5000 ---p 00000000 00:00 0 \n7fffb04c5000-7fffb05c5000 rw-p 00000000 00:00 0                          [stack:29833]\n7fffb05c5000-7fffb05c6000 ---p 00000000 00:00 0 \n7fffb05c6000-7fffb06c6000 rw-p 00000000 00:00 0                          [stack:29650]\n7fffb06c6000-7fffb06c7000 ---p 00000000 00:00 0 \n7fffb06c7000-7fffb07c7000 rw-p 00000000 00:00 0                          [stack:29830]\n7fffb07c7000-7fffb07c8000 ---p 00000000 00:00 0 \n7fffb07c8000-7fffb08c8000 rw-p 00000000 00:00 0                          [stack:29991]\n7fffb08c8000-7fffb08c9000 ---p 00000000 00:00 0 \n7fffb08c9000-7fffb09c9000 rw-p 00000000 00:00 0                          [stack:29821]\n7fffb09c9000-7fffb09ca000 ---p 00000000 00:00 0 \n7fffb09ca000-7fffb0aca000 rw-p 00000000 00:00 0                          [stack:29831]\n7fffb0aca000-7fffb0acb000 ---p 00000000 00:00 0 \n7fffb0acb000-7fffb0bcb000 rw-p 00000000 00:00 0                          [stack:29822]\n7fffb0bcb000-7fffb0bcc000 ---p 00000000 00:00 0 \n7fffb0bcc000-7fffb0ccc000 rw-p 00000000 00:00 0                          [stack:29681]\n7fffb0ccc000-7fffb0ccd000 ---p 00000000 00:00 0 \n7fffb0ccd000-7fffb0dcd000 rw-p 00000000 00:00 0                          [stack:29780]\n7fffb0dcd000-7fffb0dce000 ---p 00000000 00:00 0 \n7fffb0dce000-7fffb0ece000 rw-p 00000000 00:00 0                          [stack:29795]\n7fffb0ece000-7fffb0ecf000 ---p 00000000 00:00 0 \n7fffb0ecf000-7fffb0fcf000 rw-p 00000000 00:00 0                          [stack:29835]\n7fffb0fcf000-7fffb0fd0000 ---p 00000000 00:00 0 \n7fffb0fd0000-7fffb10d0000 rw-p 00000000 00:00 0                          [stack:29845]\n7fffb10d0000-7fffb10d1000 ---p 00000000 00:00 0 \n7fffb10d1000-7fffb11d1000 rw-p 00000000 00:00 0                          [stack:29438]\n7fffb11d1000-7fffb11d2000 ---p 00000000 00:00 0 \n7fffb11d2000-7fffb12d2000 rw-p 00000000 00:00 0                          [stack:29832]\n7fffb12d2000-7fffb12d3000 ---p 00000000 00:00 0 \n7fffb12d3000-7fffb13d3000 rw-p 00000000 00:00 0                          [stack:29980]\n7fffb13d3000-7fffb13d4000 ---p 00000000 00:00 0 \n7fffb13d4000-7fffb14d4000 rw-p 00000000 00:00 0                          [stack:29786]\n7fffb14d4000-7fffb14d5000 ---p 00000000 00:00 0 \n7fffb14d5000-7fffb15d5000 rw-p 00000000 00:00 0                          [stack:29826]\n7fffb15d5000-7fffb15d6000 ---p 00000000 00:00 0 \n7fffb15d6000-7fffb16d6000 rw-p 00000000 00:00 0                          [stack:29824]\n7fffb16d6000-7fffb16d7000 ---p 00000000 00:00 0 \n7fffb16d7000-7fffb17d7000 rw-p 00000000 00:00 0                          [stack:29616]\n7fffb17d7000-7fffb17d8000 ---p 00000000 00:00 0 \n7fffb17d8000-7fffb18d8000 rw-p 00000000 00:00 0                          [stack:29440]\n7fffb18d8000-7fffb18d9000 ---p 00000000 00:00 0 \n7fffb18d9000-7fffb19d9000 rw-p 00000000 00:00 0                          [stack:29405]\n7fffb1ada000-7fffb1adb000 ---p 00000000 00:00 0 \n7fffb1adb000-7fffb1bdb000 rw-p 00000000 00:00 0                          [stack:29805]\n7fffb1bdb000-7fffb1bdc000 ---p 00000000 00:00 0 \n7fffb1bdc000-7fffb1cdc000 rw-p 00000000 00:00 0                          [stack:29842]\n7fffb1cdc000-7fffb1cdd000 ---p 00000000 00:00 0 \n7fffb1cdd000-7fffb1ddd000 rw-p 00000000 00:00 0                          [stack:29703]\n7fffb1ddd000-7fffb1dde000 ---p 00000000 00:00 0 \n7fffb1dde000-7fffb1ede000 rw-p 00000000 00:00 0                          [stack:21469]\n7fffb1ede000-7fffb1edf000 ---p 00000000 00:00 0 \n7fffb1edf000-7fffb1fdf000 rw-p 00000000 00:00 0                          [stack:29702]\n7fffb21e1000-7fffb21e2000 ---p 00000000 00:00 0 \n7fffb21e2000-7fffb22e2000 rw-p 00000000 00:00 0                          [stack:29427]\n7fffb23e3000-7fffb23e4000 ---p 00000000 00:00 0 \n7fffb23e4000-7fffb24e4000 rw-p 00000000 00:00 0                          [stack:29992]\n7fffb24e4000-7fffb24e5000 ---p 00000000 00:00 0 \n7fffb24e5000-7fffb25e5000 rw-p 00000000 00:00 0                          [stack:29836]\n7fffb25e5000-7fffb25e6000 ---p 00000000 00:00 0 \n7fffb25e6000-7fffb26e6000 rw-p 00000000 00:00 0                          [stack:29778]\n7fffb26e6000-7fffb26e7000 ---p 00000000 00:00 0 \n7fffb26e7000-7fffb27e7000 rw-p 00000000 00:00 0                          [stack:29814]\n7fffb27e7000-7fffb27e8000 ---p 00000000 00:00 0 \n7fffb27e8000-7fffb28e8000 rw-p 00000000 00:00 0                          [stack:29652]\n7fffb28e8000-7fffb28e9000 ---p 00000000 00:00 0 \n7fffb28e9000-7fffb29e9000 rw-p 00000000 00:00 0                          [stack:29984]\n7fffb2aea000-7fffb2aeb000 ---p 00000000 00:00 0 \n7fffb2aeb000-7fffb2beb000 rw-p 00000000 00:00 0                          [stack:29844]\n7fffb2beb000-7fffb2bec000 ---p 00000000 00:00 0 \n7fffb2bec000-7fffb2cec000 rw-p 00000000 00:00 0                          [stack:29402]\n7fffb2cec000-7fffb2ced000 ---p 00000000 00:00 0 \n7fffb2ced000-7fffb2ded000 rw-p 00000000 00:00 0                          [stack:29967]\n7fffb2eee000-7fffb2eef000 ---p 00000000 00:00 0 \n7fffb2eef000-7fffb2fef000 rw-p 00000000 00:00 0                          [stack:27605]\n7fffb2fef000-7fffb2ff0000 ---p 00000000 00:00 0 \n7fffb2ff0000-7fffb30f0000 rw-p 00000000 00:00 0                          [stack:29843]\n7fffb30f0000-7fffb30f1000 ---p 00000000 00:00 0 \n7fffb30f1000-7fffb31f1000 rw-p 00000000 00:00 0                          [stack:29815]\n7fffb32f2000-7fffb32f3000 ---p 00000000 00:00 0 \n7fffb32f3000-7fffb33f3000 rw-p 00000000 00:00 0                          [stack:29651]\n7fffb34f4000-7fffb34f5000 ---p 00000000 00:00 0 \n7fffb34f5000-7fffb35f5000 rw-p 00000000 00:00 0                          [stack:16894]\n7fffb35f5000-7fffb35f6000 ---p 00000000 00:00 0 \n7fffb35f6000-7fffb36f6000 rw-p 00000000 00:00 0                          [stack:16895]\n7fffb36f6000-7fffb36f7000 ---p 00000000 00:00 0 \n7fffb36f7000-7fffb37f7000 rw-p 00000000 00:00 0                          [stack:16892]\n7fffb37f7000-7fffb37f8000 ---p 00000000 00:00 0 \n7fffb37f8000-7fffb38f8000 rw-p 00000000 00:00 0                          [stack:16852]\n7fffb38f8000-7fffb38f9000 ---p 00000000 00:00 0 \n7fffb38f9000-7fffb39f9000 rw-p 00000000 00:00 0                          [stack:29439]\n7fffb39f9000-7fffb39fa000 ---p 00000000 00:00 0 \n7fffb39fa000-7fffb3afa000 rw-p 00000000 00:00 0                          [stack:16839]\n7fffb3afa000-7fffb3afb000 ---p 00000000 00:00 0 \n7fffb3afb000-7fffb3bfb000 rw-p 00000000 00:00 0                          [stack:16854]\n7fffb3bfb000-7fffb3bfd000 r-xp 00000000 fe:01 1850010                    /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0/network_interface-0.0.1/network_interface_ext.so\n7fffb3bfd000-7fffb3dfc000 ---p 00002000 fe:01 1850010                    /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0/network_interface-0.0.1/network_interface_ext.so\n7fffb3dfc000-7fffb3dfd000 r--p 00001000 fe:01 1850010                    /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0/network_interface-0.0.1/network_interface_ext.so\n7fffb3dfd000-7fffb3dfe000 rw-p 00002000 fe:01 1850010                    /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0/network_interface-0.0.1/network_interface_ext.so\n7fffb3dfe000-7fffb3dff000 ---p 00000000 00:00 0 \n7fffb3dff000-7fffb3eff000 rw-p 00000000 00:00 0                          [stack:16829]\n7fffb3eff000-7fffb3f00000 ---p 00000000 00:00 0 \n7fffb3f00000-7fffb4000000 rw-p 00000000 00:00 0                          [stack:16828]\n7fffb4000000-7fffb416f000 rw-p 00000000 00:00 0 \n7fffb416f000-7fffb8000000 ---p 00000000 00:00 0 \n7fffb8000000-7fffb91f6000 rw-p 00000000 00:00 0 \n7fffb91f6000-7fffbc000000 ---p 00000000 00:00 0 \n7fffbc000000-7fffbc58a000 rw-p 00000000 00:00 0 \n7fffbc58a000-7fffc0000000 ---p 00000000 00:00 0 \n7fffc0000000-7fffc0457000 rw-p 00000000 00:00 0 \n7fffc0457000-7fffc4000000 ---p 00000000 00:00 0 \n7fffc4000000-7fffc4021000 rw-p 00000000 00:00 0 \n7fffc4021000-7fffc8000000 ---p 00000000 00:00 0 \n7fffc8000000-7fffc8021000 rw-p 00000000 00:00 0 \n7fffc8021000-7fffcc000000 ---p 00000000 00:00 0 \n7fffcc000000-7fffcc021000 rw-p 00000000 00:00 0 \n7fffcc021000-7fffd0000000 ---p 00000000 00:00 0 \n7fffd0000000-7fffd129c000 rw-p 00000000 00:00 0 \n7fffd129c000-7fffd4000000 ---p 00000000 00:00 0 \n7fffd4000000-7fffd4021000 rw-p 00000000 00:00 0 \n7fffd4021000-7fffd8000000 ---p 00000000 00:00 0 \n7fffd8000000-7fffd8105000 rw-p 00000000 00:00 0 \n7fffd8105000-7fffdc000000 ---p 00000000 00:00 0 \n7fffdc000000-7fffdc6b8000 rw-p 00000000 00:00 0 \n7fffdc6b8000-7fffe0000000 ---p 00000000 00:00 0 \n7fffe0000000-7fffe0021000 rw-p 0000[-] console 3 is dead: java.net.ConnectException: Verbindungsaufbau abgelehnt\nThread id: session.list -> {}\njava.lang.RuntimeException: java.net.ConnectException: Verbindungsaufbau abgelehnt\n    at msf.RpcConnectionImpl.exec(RpcConnectionImpl.java:90)\n    at msf.RpcConnectionImpl.cacheExecute(RpcConnectionImpl.java:237)\n    at msf.RpcConnectionImpl.execute(RpcConnectionImpl.java:213)\n    at armitage.ArmitageTimer.readFromClient(ArmitageTimer.java:73)\n    at armitage.ArmitageTimer.run(ArmitageTimer.java:101)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.ConnectException: Verbindungsaufbau abgelehnt\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.net.Socket.connect(Socket.java:589)\n    at java.net.Socket.connect(Socket.java:538)\n    at sun.net.NetworkClient.doConnect(NetworkClient.java:180)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:432)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:527)\n    at sun.net.www.http.HttpClient.(HttpClient.java:211)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:308)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:326)\n    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1168)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1104)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:998)\n    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:932)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1282)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1257)\n    at msf.MsgRpcImpl.writeCall(MsgRpcImpl.java:138)\n    at msf.RpcConnectionImpl.exec(RpcConnectionImpl.java:64)\n    ... 5 more\njava.lang.RuntimeException: java.net.ConnectException: Verbindungsaufbau abgelehnt\n    at msf.RpcConnectionImpl.exec(RpcConnectionImpl.java:90)\n    at msf.RpcConnectionImpl.cacheExecute(RpcConnectionImpl.java:237)\n    at msf.RpcConnectionImpl.execute(RpcConnectionImpl.java:213)\n    at msf.RpcAsync.execute(RpcAsync.java:88)\n    at armitage.ConsoleClient.readResponse(ConsoleClient.java:176)\n    at armitage.ConsoleClient.run(ConsoleClient.java:249)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.ConnectException: Verbindungsaufbau abgelehnt\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.net.Socket.connect(Socket.java:589)\n    at java.net.Socket.connect(Socket.java:538)\n    at sun.net.NetworkClient.doConnect(NetworkClient.java:180)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:432)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:527)\n    at sun.net.www.http.HttpClient.(HttpClient.java:211)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:308)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:326)\n    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1168)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1104)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:998)\n    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:932)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1282)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1257)\n    at msf.MsgRpcImpl.writeCall(MsgRpcImpl.java:138)\n    at msf.RpcConnectionImpl.exec(RpcConnectionImpl.java:64)\n    ... 6 more\nbt\n[Thread 0x7ffff7ff5700 (LWP 16694) exited]\nInferior 1 (process 16689) exited normally bt\nNo stack.\n. I contacted the Armitage Team, they said:\n\"I can't provide support for this. Armitage spins up a proxy server in Metasploit. Armitage does not have any code that interacts with this other than a dialog to launch this feature in Metasploit.\"\n. I am a bit sad because i thought i could help finding a bug/improve and the Armitage Team seems not to be interested. I am wondering that this bug exist, because i am surely not the only one who use proxychains with armitage and i have this error on different machines and VMs too.\nThank you for your time rofl0r.\n. Maybe you are right, proxychains4 work fine with all other tools, which includes Metasploit.\nI have these problems only with Armitage.\nHere is the console output:\nroot@PC432:~# gdb --args proxychains4 armitage\nGNU gdb (Debian 7.7.1+dfsg-5) 7.7.1\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from proxychains4...done.\n(gdb) run\nStarting program: /usr/bin/proxychains4 armitage\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\nprocess 16689 is executing new program: /bin/dash\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7ffff7ff5700 (LWP 16693)]\n[Thread 0x7ffff7ff5700 (LWP 16693) exited]\nprocess 16689 is executing new program: /bin/dash\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7ffff7ff5700 (LWP 16694)]\n[] Starting msfrpcd for you.\n[] MSGRPC starting on 127.0.0.1:55553 (NO SSL):Msg...\n[] Used the tab method: 192.168.178.74\n[] Remote Exploits Synced\n[] Starting Cortana on 192.168.178.74\n[] Creating a default reverse handler... 0.0.0.0:23702\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187: [BUG] rb_maygvl_fd_fix_cloexec: fcntl(351, F_GETFD) failed: Bad file descriptor\nruby 2.1.5p273 (2014-11-13) [x86_64-linux-gnu]\n-- Control frame information -----------------------------------------------\nc:0012 p:---- s:0062 e:000061 CFUNC  :initialize\nc:0011 p:---- s:0060 e:000059 CFUNC  :new\nc:0010 p:0494 s:0054 e:000053 METHOD /usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187\nc:0009 p:0120 s:0038 e:000037 METHOD /usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:33\nc:0008 p:0012 s:0034 e:000033 METHOD /usr/share/metasploit-framework/lib/rex/socket.rb:47\nc:0007 p:0026 s:0030 e:000029 METHOD /usr/share/metasploit-framework/lib/rex/socket/tcp.rb:37\nc:0006 p:0037 s:0026 e:000025 METHOD /usr/share/metasploit-framework/lib/rex/socket/tcp.rb:28\nc:0005 p:0232 s:0022 e:000021 METHOD /usr/share/metasploit-framework/lib/msf/core/exploit/tcp.rb:102\nc:0004 p:0033 s:0015 e:000014 BLOCK  /usr/share/metasploit-framework/modules/auxiliary/scanner/portscan/tcp.rb:56 [FINISH]\nc:0003 p:---- s:0010 e:000009 CFUNC  :call\nc:0002 p:0113 s:0006 e:000005 BLOCK  /usr/share/metasploit-framework/lib/msf/core/thread_manager.rb:100 [FINISH]\nc:0001 p:---- s:0002 e:000001 TOP    [FINISH]\n-- Ruby level backtrace information ----------------------------------------\n/usr/share/metasploit-framework/lib/msf/core/thread_manager.rb:100:in block in spawn'\n/usr/share/metasploit-framework/lib/msf/core/thread_manager.rb:100:incall'\n/usr/share/metasploit-framework/modules/auxiliary/scanner/portscan/tcp.rb:56:in block (2 levels) in run_host'\n/usr/share/metasploit-framework/lib/msf/core/exploit/tcp.rb:102:inconnect'\n/usr/share/metasploit-framework/lib/rex/socket/tcp.rb:28:in create'\n/usr/share/metasploit-framework/lib/rex/socket/tcp.rb:37:increate_param'\n/usr/share/metasploit-framework/lib/rex/socket.rb:47:in create_param'\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:33:increate'\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187:in create_by_type'\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187:innew'\n/usr/share/metasploit-framework/lib/rex/socket/comm/local.rb:187:in `initialize'\n-- C level backtrace information -------------------------------------------\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x18a837) [0x7ffff789c837]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x18a903) [0x7ffff789c903]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x6d563) [0x7ffff777f563] putchar.c:28\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_bug+0xb3) [0x7ffff777fbd3] swscanf.c:26\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_maygvl_fd_fix_cloexec+0x68) [0x7ffff77a6bf8] ../sysdeps/x86_64/multiarch/strcpy-ssse3.S:3504\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_fd_fix_cloexec+0x8) [0x7ffff77a6c28] ../sysdeps/x86_64/multiarch/strcpy-ssse3.S:3519\n/usr/lib/x86_64-linux-gnu/ruby/2.1.0/socket.so(+0x6cb5) [0x7ffff4ef0cb5] nptl-init.c:398\n/usr/lib/x86_64-linux-gnu/ruby/2.1.0/socket.so(rsock_socket+0x17) [0x7ffff4ef16f7] allocatestack.c:147\n/usr/lib/x86_64-linux-gnu/ruby/2.1.0/socket.so(+0x1313d) [0x7ffff4efd13d]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x1770c6) [0x7ffff78890c6]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_funcallv+0x159) [0x7ffff788d239]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(rb_class_new_instance+0x21) [0x7ffff77d12b1] fnmatch_loop.c:487\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x174ee6) [0x7ffff7886ee6]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x17dd23) [0x7ffff788fd23]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x1835ed) [0x7ffff78955ed]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x17661b) [0x7ffff788861b]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x176d0b) [0x7ffff7888d0b]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x176df8) [0x7ffff7888df8]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x79052) [0x7ffff778b052] hooks.c:265\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x174ee6) [0x7ffff7886ee6]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x17dc85) [0x7ffff788fc85]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x1835ed) [0x7ffff78955ed]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x17661b) [0x7ffff788861b]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x176d0b) [0x7ffff7888d0b]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x176df8) [0x7ffff7888df8]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x192dcc) [0x7ffff78a4dcc]\n/usr/lib/x86_64-linux-gnu/libruby-2.1.so.2.1(+0x193040) [0x7ffff78a5040]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x80a4) [0x7ffff74fd0a4] pthread_create.c:309\n/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d) [0x7ffff687304d] ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n-- Other runtime information -----------------------------------------------\n- Loaded script: msfrpcd\n- Loaded features:\n0 enumerator.so\n  1 /usr/lib/x86_64-linux-gnu/ruby/2.1.0/enc/encdb.so\n  #i have to trunc here, about 2000 lines, to much for comment field#\n  2349 /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/gems/metasploit_data_models-1.2.5/app/models/mdm/note.rb\n- Process memory map:\n00400000-00401000 r-xp 00000000 fe:01 2755029                            /usr/bin/ruby2.1\n00600000-00601000 r--p 00000000 fe:01 2755029                            /usr/bin/ruby2.1\n00601000-00602000 rw-p 00001000 fe:01 2755029                            /usr/bin/ruby2.1\n00602000-11f71000 rw-p 00000000 00:00 0                                  [heap]\n7fff6c000000-7fff6f701000 rw-p 00000000 00:00 0 \n7fff6f701000-7fff70000000 ---p 00000000 00:00 0 \n7fff74000000-7fff77fe8000 rw-p 00000000 00:00 0 \n7fff77fe8000-7fff78000000 ---p 00000000 00:00 0 \n7fff7c000000-7fff7ffc5000 rw-p 00000000 00:00 0 \n7fff7ffc5000-7fff80000000 ---p 00000000 00:00 0 \n7fff826e7000-7fff826e8000 ---p 00000000 00:00 0 \n7fff826e8000-7fff827e8000 rw-p 00000000 00:00 0                          [stack:29746]\n7fff827e8000-7fff827e9000 ---p 00000000 00:00 0 \n7fff827e9000-7fff828e9000 rw-p 00000000 00:00 0                          [stack:29399]\n7fff82bec000-7fff82bed000 ---p 00000000 00:00 0 \n7fff82bed000-7fff82ced000 rw-p 00000000 00:00 0                          [stack:29404]\n7fff83bfc000-7fff83bfd000 ---p 00000000 00:00 0 \n7fff83bfd000-7fff83cfd000 rw-p 00000000 00:00 0                          [stack:29705]\n7fff83dfe000-7fff83dff000 ---p 00000000 00:00 0 \n7fff83dff000-7fff83eff000 rw-p 00000000 00:00 0                          [stack:29697]\n7fff84000000-7fff87fd4000 rw-p 00000000 00:00 0 \n7fff87fd4000-7fff88000000 ---p 00000000 00:00 0 \n7fff880c1000-7fff880c2000 ---p 00000000 00:00 0 \n7fff880c2000-7fff881c2000 rw-p 00000000 00:00 0                          [stack:29704]\n7fff886c7000-7fff886c8000 ---p 00000000 00:00 0 \n7fff886c8000-7fff887c8000 rw-p 00000000 00:00 0                          [stack:29799]\n7fff88acb000-7fff88acc000 ---p 00000000 00:00 0 \n7fff88acc000-7fff88bcc000 rw-p 00000000 00:00 0                          [stack:29608]\n7fff88ecf000-7fff88ed0000 ---p 00000000 00:00 0 \n7fff88ed0000-7fff88fd0000 rw-p 00000000 00:00 0                          [stack:29701]\n7fff890d1000-7fff890d2000 ---p 00000000 00:00 0 \n7fff890d2000-7fff891d2000 rw-p 00000000 00:00 0                          [stack:29686]\n7fff892d3000-7fff892d4000 ---p 00000000 00:00 0 \n7fff892d4000-7fff893d4000 rw-p 00000000 00:00 0                          [stack:29700]\n7fff8aff0000-7fff8aff1000 ---p 00000000 00:00 0 \n7fff8aff1000-7fff8b0f1000 rw-p 00000000 00:00 0                          [stack:21476]\n7fff8b4f5000-7fff8b4f6000 ---p 00000000 00:00 0 \n7fff8b4f6000-7fff8b5f6000 rw-p 00000000 00:00 0                          [stack:29969]\n7fff8b5f6000-7fff8b5f7000 ---p 00000000 00:00 0 \n7fff8b5f7000-7fff8b6f7000 rw-p 00000000 00:00 0                          [stack:29806]\n7fff8b9fa000-7fff8b9fb000 ---p 00000000 00:00 0 \n7fff8b9fb000-7fff8bafb000 rw-p 00000000 00:00 0                          [stack:29760]\n7fff8bafb000-7fff8bafc000 ---p 00000000 00:00 0 \n7fff8bafc000-7fff8bbfc000 rw-p 00000000 00:00 0                          [stack:29956]\n7fff8bbfc000-7fff8bbfd000 ---p 00000000 00:00 0 \n7fff8bbfd000-7fff8bcfd000 rw-p 00000000 00:00 0                          [stack:29955]\n7fff8bcfd000-7fff8bcfe000 ---p 00000000 00:00 0 \n7fff8bcfe000-7fff8bdfe000 rw-p 00000000 00:00 0                          [stack:29954]\n7fff8bdfe000-7fff8bdff000 ---p 00000000 00:00 0 \n7fff8bdff000-7fff8beff000 rw-p 00000000 00:00 0                          [stack:29953]\n7fff8beff000-7fff8bf00000 ---p 00000000 00:00 0 \n7fff8bf00000-7fff8c000000 rw-p 00000000 00:00 0                          [stack:29952]\n7fff8c000000-7fff8ffc5000 rw-p 00000000 00:00 0 \n7fff8ffc5000-7fff90000000 ---p 00000000 00:00 0 \n7fff900c1000-7fff900c2000 ---p 00000000 00:00 0 \n7fff900c2000-7fff901c2000 rw-p 00000000 00:00 0                          [stack:29951]\n7fff901c2000-7fff901c3000 ---p 00000000 00:00 0 \n7fff901c3000-7fff902c3000 rw-p 00000000 00:00 0                          [stack:21473]\n7fff902c3000-7fff902c4000 ---p 00000000 00:00 0 \n7fff902c4000-7fff903c4000 rw-p 00000000 00:00 0                          [stack:29962]\n7fff903c4000-7fff903c5000 ---p 00000000 00:00 0 \n7fff903c5000-7fff904c5000 rw-p 00000000 00:00 0                          [stack:29949]\n7fff904c5000-7fff904c6000 ---p 00000000 00:00 0 \n7fff904c6000-7fff905c6000 rw-p 00000000 00:00 0                          [stack:29948]\n7fff905c6000-7fff905c7000 ---p 00000000 00:00 0 \n7fff905c7000-7fff906c7000 rw-p 00000000 00:00 0                          [stack:29966]\n7fff906c7000-7fff906c8000 ---p 00000000 00:00 0 \n7fff906c8000-7fff907c8000 rw-p 00000000 00:00 0                          [stack:29982]\n7fff907c8000-7fff907c9000 ---p 00000000 00:00 0 \n7fff907c9000-7fff908c9000 rw-p 00000000 00:00 0                          [stack:29797]\n7fff908c9000-7fff908ca000 ---p 00000000 00:00 0 \n7fff908ca000-7fff909ca000 rw-p 00000000 00:00 0                          [stack:29981]\n7fff909ca000-7fff909cb000 ---p 00000000 00:00 0 \n7fff909cb000-7fff90acb000 rw-p 00000000 00:00 0                          [stack:29965]\n7fff90acb000-7fff90acc000 ---p 00000000 00:00 0 \n7fff90acc000-7fff90bcc000 rw-p 00000000 00:00 0                          [stack:29983]\n7fff90bcc000-7fff90bcd000 ---p 00000000 00:00 0 \n7fff90bcd000-7fff90ccd000 rw-p 00000000 00:00 0                          [stack:29989]\n7fff90ccd000-7fff90cce000 ---p 00000000 00:00 0 \n7fff90cce000-7fff90dce000 rw-p 00000000 00:00 0                          [stack:29988]\n7fff90dce000-7fff90dcf000 ---p 00000000 00:00 0 \n7fff90dcf000-7fff90ecf000 rw-p 00000000 00:00 0                          [stack:29840]\n7fff90ecf000-7fff90ed0000 ---p 00000000 00:00 0 \n7fff90ed0000-7fff90fd0000 rw-p 00000000 00:00 0                          [stack:29627]\n7fff90fd0000-7fff90fd1000 ---p 00000000 00:00 0 \n7fff90fd1000-7fff910d1000 rw-p 00000000 00:00 0                          [stack:29613]\n7fff910d1000-7fff910d2000 ---p 00000000 00:00 0 \n7fff910d2000-7fff911d2000 rw-p 00000000 00:00 0                          [stack:29803]\n7fff911d2000-7fff911d3000 ---p 00000000 00:00 0 \n7fff911d3000-7fff912d3000 rw-p 00000000 00:00 0                          [stack:29654]\n7fff912d3000-7fff912d4000 ---p 00000000 00:00 0 \n7fff912d4000-7fff913d4000 rw-p 00000000 00:00 0                          [stack:27707]\n7fff913d4000-7fff913d5000 ---p 00000000 00:00 0 \n7fff913d5000-7fff914d5000 rw-p 00000000 00:00 0                          [stack:29940]\n7fff914d5000-7fff914d6000 ---p 00000000 00:00 0 \n7fff914d6000-7fff915d6000 rw-p 00000000 00:00 0                          [stack:21474]\n7fff915d6000-7fff915d7000 ---p 00000000 00:00 0 \n7fff915d7000-7fff916d7000 rw-p 00000000 00:00 0                          [stack:29739]\n7fff916d7000-7fff916d8000 ---p 00000000 00:00 0 \n7fff916d8000-7fff917d8000 rw-p 00000000 00:00 0                          [stack:29939]\n7fff917d8000-7fff917d9000 ---p 00000000 00:00 0 \n7fff917d9000-7fff918d9000 rw-p 00000000 00:00 0                          [stack:29938]\n7fff918d9000-7fff918da000 ---p 00000000 00:00 0 \n7fff918da000-7fff919da000 rw-p 00000000 00:00 0                          [stack:29937]\n7fff919da000-7fff919db000 ---p 00000000 00:00 0 \n7fff919db000-7fff91adb000 rw-p 00000000 00:00 0                          [stack:29961]\n7fff91adb000-7fff91adc000 ---p 00000000 00:00 0 \n7fff91adc000-7fff91bdc000 rw-p 00000000 00:00 0                          [stack:29935]\n7fff91bdc000-7fff91bdd000 ---p 00000000 00:00 0 \n7fff91bdd000-7fff91cdd000 rw-p 00000000 00:00 0                          [stack:29934]\n7fff91cdd000-7fff91cde000 ---p 00000000 00:00 0 \n7fff91cde000-7fff91dde000 rw-p 00000000 00:00 0                          [stack:29785]\n7fff91dde000-7fff91ddf000 ---p 00000000 00:00 0 \n7fff91ddf000-7fff91edf000 rw-p 00000000 00:00 0                          [stack:29933]\n7fff91edf000-7fff91ee0000 ---p 00000000 00:00 0 \n7fff91ee0000-7fff91fe0000 rw-p 00000000 00:00 0                          [stack:29685]\n7fff91fe0000-7fff91fe1000 ---p 00000000 00:00 0 \n7fff91fe1000-7fff920e1000 rw-p 00000000 00:00 0                          [stack:29792]\n7fff920e1000-7fff920e2000 ---p 00000000 00:00 0 \n7fff920e2000-7fff921e2000 rw-p 00000000 00:00 0                          [stack:29789]\n7fff921e2000-7fff921e3000 ---p 00000000 00:00 0 \n7fff921e3000-7fff922e3000 rw-p 00000000 00:00 0                          [stack:29932]\n7fff922e3000-7fff922e4000 ---p 00000000 00:00 0 \n7fff922e4000-7fff923e4000 rw-p 00000000 00:00 0                          [stack:29421]\n7fff923e4000-7fff923e5000 ---p 00000000 00:00 0 \n7fff923e5000-7fff924e5000 rw-p 00000000 00:00 0                          [stack:29964]\n7fff924e5000-7fff924e6000 ---p 00000000 00:00 0 \n7fff924e6000-7fff925e6000 rw-p 00000000 00:00 0                          [stack:29648]\n7fff925e6000-7fff925e7000 ---p 00000000 00:00 0 \n7fff925e7000-7fff926e7000 rw-p 00000000 00:00 0                          [stack:29930]\n7fff926e7000-7fff926e8000 ---p 00000000 00:00 0 \n7fff926e8000-7fff927e8000 rw-p 00000000 00:00 0                          [stack:29798]\n7fff927e8000-7fff927e9000 ---p 00000000 00:00 0 \n7fff927e9000-7fff928e9000 rw-p 00000000 00:00 0                          [stack:29963]\n7fff928e9000-7fff928ea000 ---p 00000000 00:00 0 \n7fff928ea000-7fff929ea000 rw-p 00000000 00:00 0                          [stack:29978]\n7fff929ea000-7fff929eb000 ---p 00000000 00:00 0 \n7fff929eb000-7fff92aeb000 rw-p 00000000 00:00 0                          [stack:29419]\n7fff92aeb000-7fff92aec000 ---p 00000000 00:00 0 \n7fff92aec000-7fff92bec000 rw-p 00000000 00:00 0                          [stack:29986]\n7fff92bec000-7fff92bed000 ---p 00000000 00:00 0 \n7fff92bed000-7fff92ced000 rw-p 00000000 00:00 0                          [stack:29926]\n7fff92ced000-7fff92cee000 ---p 00000000 00:00 0 \n7fff92cee000-7fff92dee000 rw-p 00000000 00:00 0                          [stack:29925]\n7fff92dee000-7fff92def000 ---p 00000000 00:00 0 \n7fff92def000-7fff92eef000 rw-p 00000000 00:00 0                          [stack:29979]\n7fff92eef000-7fff92ef0000 ---p 00000000 00:00 0 \n7fff92ef0000-7fff92ff0000 rw-p 00000000 00:00 0                          [stack:29816]\n7fff92ff0000-7fff92ff1000 ---p 00000000 00:00 0 \n7fff92ff1000-7fff930f1000 rw-p 00000000 00:00 0                          [stack:21472]\n7fff930f1000-7fff930f2000 ---p 00000000 00:00 0 \n7fff930f2000-7fff931f2000 rw-p 00000000 00:00 0                          [stack:29987]\n7fff931f2000-7fff931f3000 ---p 00000000 00:00 0 \n7fff931f3000-7fff932f3000 rw-p 00000000 00:00 0                          [stack:29993]\n7fff934f5000-7fff934f6000 ---p 00000000 00:00 0 \n7fff934f6000-7fff935f6000 rw-p 00000000 00:00 0                          [stack:29971]\n7fff937f8000-7fff937f9000 ---p 00000000 00:00 0 \n7fff937f9000-7fff938f9000 rw-p 00000000 00:00 0                          [stack:29996]\n7fff938f9000-7fff938fa000 ---p 00000000 00:00 0 \n7fff938fa000-7fff939fa000 rw-p 00000000 00:00 0 \n7fff939fa000-7fff939fb000 ---p 00000000 00:00 0 \n7fff939fb000-7fff93afb000 rw-p 00000000 00:00 0                          [stack:25592]\n7fff93afb000-7fff93afc000 ---p 00000000 00:00 0 \n7fff93afc000-7fff93bfc000 rw-p 00000000 00:00 0                          [stack:29698]\n7fff93bfc000-7fff93bfd000 ---p 00000000 00:00 0 \n7fff93bfd000-7fff93cfd000 rw-p 00000000 00:00 0 \n7fff94000000-7fff97f4c000 rw-p 00000000 00:00 0 \n7fff97f4c000-7fff98000000 ---p 00000000 00:00 0 \n7fff980c1000-7fff980c2000 ---p 00000000 00:00 0 \n7fff980c2000-7fff981c2000 rw-p 00000000 00:00 0                          [stack:29960]\n7fff982c3000-7fff982c4000 ---p 00000000 00:00 0 \n7fff982c4000-7fff983c4000 rw-p 00000000 00:00 0                          [stack:29957]\n7fff983c4000-7fff983c5000 ---p 00000000 00:00 0 \n7fff983c5000-7fff984c5000 rw-p 00000000 00:00 0                          [stack:29959]\n7fff984c5000-7fff984c6000 ---p 00000000 00:00 0 \n7fff984c6000-7fff985c6000 rw-p 00000000 00:00 0                          [stack:29763]\n7fff985c6000-7fff985c7000 ---p 00000000 00:00 0 \n7fff985c7000-7fff986c7000 rw-p 00000000 00:00 0                          [stack:29758]\n7fff988c9000-7fff988ca000 ---p 00000000 00:00 0 \n7fff988ca000-7fff989ca000 rw-p 00000000 00:00 0                          [stack:29764]\n7fff989ca000-7fff989cb000 ---p 00000000 00:00 0 \n7fff989cb000-7fff98acb000 rw-p 00000000 00:00 0                          [stack:29765]\n7fff98acb000-7fff98acc000 ---p 00000000 00:00 0 \n7fff98acc000-7fff98bcc000 rw-p 00000000 00:00 0                          [stack:29759]\n7fff98bcc000-7fff98bcd000 ---p 00000000 00:00 0 \n7fff98bcd000-7fff98ccd000 rw-p 00000000 00:00 0                          [stack:29761]\n7fff98ccd000-7fff98cce000 ---p 00000000 00:00 0 \n7fff98cce000-7fff98dce000 rw-p 00000000 00:00 0                          [stack:29762]\n7fff98dce000-7fff98dcf000 ---p 00000000 00:00 0 \n7fff98dcf000-7fff98ecf000 rw-p 00000000 00:00 0                          [stack:29443]\n7fff990d1000-7fff990d2000 ---p 00000000 00:00 0 \n7fff990d2000-7fff991d2000 rw-p 00000000 00:00 0                          [stack:29958]\n7fff991d2000-7fff991d3000 ---p 00000000 00:00 0 \n7fff991d3000-7fff992d3000 rw-p 00000000 00:00 0                          [stack:25070]\n7fff992d3000-7fff992d4000 ---p 00000000 00:00 0 \n7fff992d4000-7fff993d4000 rw-p 00000000 00:00 0                          [stack:29807]\n7fff994d5000-7fff994d6000 ---p 00000000 00:00 0 \n7fff994d6000-7fff995d6000 rw-p 00000000 00:00 0                          [stack:29678]\n7fff995d6000-7fff995d7000 ---p 00000000 00:00 0 \n7fff995d7000-7fff996d7000 rw-p 00000000 00:00 0                          [stack:29976]\n7fff996d7000-7fff996d8000 ---p 00000000 00:00 0 \n7fff996d8000-7fff997d8000 rw-p 00000000 00:00 0                          [stack:29684]\n7fff997d8000-7fff997d9000 ---p 00000000 00:00 0 \n7fff997d9000-7fff998d9000 rw-p 00000000 00:00 0                          [stack:29827]\n7fff999da000-7fff999db000 ---p 00000000 00:00 0 \n7fff999db000-7fff99adb000 rw-p 00000000 00:00 0                          [stack:29802]\n7fff99adb000-7fff99adc000 ---p 00000000 00:00 0 \n7fff99adc000-7fff99bdc000 rw-p 00000000 00:00 0                          [stack:29610]\n7fff99cdd000-7fff99cde000 ---p 00000000 00:00 0 \n7fff99cde000-7fff99dde000 rw-p 00000000 00:00 0                          [stack:29418]\n7fff99dde000-7fff99ddf000 ---p 00000000 00:00 0 \n7fff99ddf000-7fff99edf000 rw-p 00000000 00:00 0                          [stack:29801]\n7fff99fe0000-7fff99fe1000 ---p 00000000 00:00 0 \n7fff99fe1000-7fff9a0e1000 rw-p 00000000 00:00 0                          [stack:29587]\n7fff9a2e3000-7fff9a2e4000 ---p 00000000 00:00 0 \n7fff9a2e4000-7fff9a3e4000 rw-p 00000000 00:00 0                          [stack:29859]\n7fff9a3e4000-7fff9a3e5000 ---p 00000000 00:00 0 \n7fff9a3e5000-7fff9a4e5000 rw-p 00000000 00:00 0                          [stack:29766]\n7fff9a4e5000-7fff9a4e6000 ---p 00000000 00:00 0 \n7fff9a4e6000-7fff9a5e6000 rw-p 00000000 00:00 0                          [stack:29858]\n7fff9a5e6000-7fff9a5e7000 ---p 00000000 00:00 0 \n7fff9a5e7000-7fff9a6e7000 rw-p 00000000 00:00 0                          [stack:29680]\n7fff9a6e7000-7fff9a6e8000 ---p 00000000 00:00 0 \n7fff9a6e8000-7fff9a7e8000 rw-p 00000000 00:00 0                          [stack:29857]\n7fff9a7e8000-7fff9a7e9000 ---p 00000000 00:00 0 \n7fff9a7e9000-7fff9a8e9000 rw-p 00000000 00:00 0                          [stack:29856]\n7fff9a8e9000-7fff9a8ea000 ---p 00000000 00:00 0 \n7fff9a8ea000-7fff9a9ea000 rw-p 00000000 00:00 0                          [stack:29683]\n7fff9a9ea000-7fff9a9eb000 ---p 00000000 00:00 0 \n7fff9a9eb000-7fff9aaeb000 rw-p 00000000 00:00 0                          [stack:29776]\n7fff9aaeb000-7fff9aaec000 ---p 00000000 00:00 0 \n7fff9aaec000-7fff9abec000 rw-p 00000000 00:00 0                          [stack:29682]\n7fff9abec000-7fff9abed000 ---p 00000000 00:00 0 \n7fff9abed000-7fff9aced000 rw-p 00000000 00:00 0                          [stack:29775]\n7fff9aced000-7fff9acee000 ---p 00000000 00:00 0 \n7fff9acee000-7fff9adee000 rw-p 00000000 00:00 0                          [stack:29774]\n7fff9adee000-7fff9adef000 ---p 00000000 00:00 0 \n7fff9adef000-7fff9aeef000 rw-p 00000000 00:00 0                          [stack:29828]\n7fff9aeef000-7fff9aef0000 ---p 00000000 00:00 0 \n7fff9aef0000-7fff9aff0000 rw-p 00000000 00:00 0                          [stack:29590]\n7fff9aff0000-7fff9aff1000 ---p 00000000 00:00 0 \n7fff9aff1000-7fff9b0f1000 rw-p 00000000 00:00 0                          [stack:29586]\n7fff9b0f1000-7fff9b0f2000 ---p 00000000 00:00 0 \n7fff9b0f2000-7fff9b1f2000 rw-p 00000000 00:00 0                          [stack:29825]\n7fff9b1f2000-7fff9b1f3000 ---p 00000000 00:00 0 \n7fff9b1f3000-7fff9b2f3000 rw-p 00000000 00:00 0                          [stack:29834]\n7fff9b2f3000-7fff9b2f4000 ---p 00000000 00:00 0 \n7fff9b2f4000-7fff9b3f4000 rw-p 00000000 00:00 0                          [stack:29595]\n7fff9b3f4000-7fff9b3f5000 ---p 00000000 00:00 0 \n7fff9b3f5000-7fff9b4f5000 rw-p 00000000 00:00 0                          [stack:29823]\n7fff9b4f5000-7fff9b4f6000 ---p 00000000 00:00 0 \n7fff9b4f6000-7fff9b5f6000 rw-p 00000000 00:00 0                          [stack:29829]\n7fff9b5f6000-7fff9b5f7000 ---p 00000000 00:00 0 \n7fff9b5f7000-7fff9b6f7000 rw-p 00000000 00:00 0                          [stack:29699]\n7fff9b6f7000-7fff9b6f8000 ---p 00000000 00:00 0 \n7fff9b6f8000-7fff9b7f8000 rw-p 00000000 00:00 0                          [stack:29837]\n7fff9b7f8000-7fff9b7f9000 ---p 00000000 00:00 0 \n7fff9b7f9000-7fff9b8f9000 rw-p 00000000 00:00 0                          [stack:29773]\n7fff9b8f9000-7fff9b8fa000 ---p 00000000 00:00 0 \n7fff9b8fa000-7fff9b9fa000 rw-p 00000000 00:00 0                          [stack:29426]\n7fff9bafb000-7fff9bafc000 ---p 00000000 00:00 0 \n7fff9bafc000-7fff9bbfc000 rw-p 00000000 00:00 0                          [stack:29772]\n7fff9bbfc000-7fff9bbfd000 ---p 00000000 00:00 0 \n7fff9bbfd000-7fff9bcfd000 rw-p 00000000 00:00 0                          [stack:29649]\n7fff9bcfd000-7fff9bcfe000 ---p 00000000 00:00 0 \n7fff9bcfe000-7fff9bdfe000 rw-p 00000000 00:00 0                          [stack:29423]\n7fff9bdfe000-7fff9bdff000 ---p 00000000 00:00 0 \n7fff9bdff000-7fff9beff000 rw-p 00000000 00:00 0                          [stack:29800]\n7fff9beff000-7fff9bf00000 ---p 00000000 00:00 0 \n7fff9bf00000-7fff9c000000 rw-p 00000000 00:00 0                          [stack:29771]\n7fff9c000000-7fff9ff01000 rw-p 00000000 00:00 0 \n7fff9ff01000-7fffa0000000 ---p 00000000 00:00 0 \n7fffa00c1000-7fffa00c2000 ---p 00000000 00:00 0 \n7fffa00c2000-7fffa01c2000 rw-p 00000000 00:00 0                          [stack:29770]\n7fffa01c2000-7fffa01c3000 ---p 00000000 00:00 0 \n7fffa01c3000-7fffa02c3000 rw-p 00000000 00:00 0                          [stack:21465]\n7fffa02c3000-7fffa02c4000 ---p 00000000 00:00 0 \n7fffa02c4000-7fffa03c4000 rw-p 00000000 00:00 0                          [stack:29817]\n7fffa03c4000-7fffa03c5000 ---p 00000000 00:00 0 \n7fffa03c5000-7fffa04c5000 rw-p 00000000 00:00 0                          [stack:29808]\n7fffa04c5000-7fffa04c6000 ---p 00000000 00:00 0 \n7fffa04c6000-7fffa05c6000 rw-p 00000000 00:00 0                          [stack:29809]\n7fffa05c6000-7fffa05c7000 ---p 00000000 00:00 0 \n7fffa05c7000-7fffa06c7000 rw-p 00000000 00:00 0                          [stack:29400]\n7fffa06c7000-7fffa06c8000 ---p 00000000 00:00 0 \n7fffa06c8000-7fffa07c8000 rw-p 00000000 00:00 0                          [stack:29810]\n7fffa07c8000-7fffa07c9000 ---p 00000000 00:00 0 \n7fffa07c9000-7fffa08c9000 rw-p 00000000 00:00 0                          [stack:29741]\n7fffa08c9000-7fffa08ca000 ---p 00000000 00:00 0 \n7fffa08ca000-7fffa09ca000 rw-p 00000000 00:00 0                          [stack:29804]\n7fffa09ca000-7fffa09cb000 ---p 00000000 00:00 0 \n7fffa09cb000-7fffa0acb000 rw-p 00000000 00:00 0                          [stack:29855]\n7fffa0acb000-7fffa0acc000 ---p 00000000 00:00 0 \n7fffa0acc000-7fffa0bcc000 rw-p 00000000 00:00 0                          [stack:29594]\n7fffa0bcc000-7fffa0bcd000 ---p 00000000 00:00 0 \n7fffa0bcd000-7fffa0ccd000 rw-p 00000000 00:00 0                          [stack:29812]\n7fffa0ccd000-7fffa0cce000 ---p 00000000 00:00 0 \n7fffa0cce000-7fffa0dce000 rw-p 00000000 00:00 0                          [stack:29819]\n7fffa0dce000-7fffa0dcf000 ---p 00000000 00:00 0 \n7fffa0dcf000-7fffa0ecf000 rw-p 00000000 00:00 0                          [stack:29784]\n7fffa0ecf000-7fffa0ed0000 ---p 00000000 00:00 0 \n7fffa0ed0000-7fffa0fd0000 rw-p 00000000 00:00 0                          [stack:29447]\n7fffa0fd0000-7fffa0fd1000 ---p 00000000 00:00 0 \n7fffa0fd1000-7fffa10d1000 rw-p 00000000 00:00 0                          [stack:29818]\n7fffa10d1000-7fffa10d2000 ---p 00000000 00:00 0 \n7fffa10d2000-7fffa11d2000 rw-p 00000000 00:00 0                          [stack:29841]\n7fffa11d2000-7fffa11d3000 ---p 00000000 00:00 0 \n7fffa11d3000-7fffa12d3000 rw-p 00000000 00:00 0                          [stack:29811]\n7fffa12d3000-7fffa12d4000 ---p 00000000 00:00 0 \n7fffa12d4000-7fffa13d4000 rw-p 00000000 00:00 0                          [stack:29977]\n7fffa13d4000-7fffa13d5000 ---p 00000000 00:00 0 \n7fffa13d5000-7fffa14d5000 rw-p 00000000 00:00 0                          [stack:29401]\n7fffa14d5000-7fffa14d6000 ---p 00000000 00:00 0 \n7fffa14d6000-7fffa15d6000 rw-p 00000000 00:00 0                          [stack:29656]\n7fffa15d6000-7fffa15d7000 ---p 00000000 00:00 0 \n7fffa15d7000-7fffa16d7000 rw-p 00000000 00:00 0                          [stack:29589]\n7fffa16d7000-7fffa16d8000 ---p 00000000 00:00 0 \n7fffa16d8000-7fffa17d8000 rw-p 00000000 00:00 0                          [stack:29631]\n7fffa17d8000-7fffa17d9000 ---p 00000000 00:00 0 \n7fffa17d9000-7fffa18d9000 rw-p 00000000 00:00 0                          [stack:29793]\n7fffa18d9000-7fffa18da000 ---p 00000000 00:00 0 \n7fffa18da000-7fffa19da000 rw-p 00000000 00:00 0                          [stack:29854]\n7fffa19da000-7fffa19db000 ---p 00000000 00:00 0 \n7fffa19db000-7fffa1adb000 rw-p 00000000 00:00 0                          [stack:29791]\n7fffa1adb000-7fffa1adc000 ---p 00000000 00:00 0 \n7fffa1adc000-7fffa1bdc000 rw-p 00000000 00:00 0                          [stack:29787]\n7fffa1bdc000-7fffa1bdd000 ---p 00000000 00:00 0 \n7fffa1bdd000-7fffa1cdd000 rw-p 00000000 00:00 0                          [stack:29796]\n7fffa1cdd000-7fffa1cde000 ---p 00000000 00:00 0 \n7fffa1cde000-7fffa1dde000 rw-p 00000000 00:00 0                          [stack:29647]\n7fffa1dde000-7fffa1ddf000 ---p 00000000 00:00 0 \n7fffa1ddf000-7fffa1edf000 rw-p 00000000 00:00 0                          [stack:29677]\n7fffa1fe0000-7fffa1fe1000 ---p 00000000 00:00 0 \n7fffa1fe1000-7fffa20e1000 rw-p 00000000 00:00 0                          [stack:29592]\n7fffa20e1000-7fffa20e2000 ---p 00000000 00:00 0 \n7fffa20e2000-7fffa21e2000 rw-p 00000000 00:00 0                          [stack:29679]\n7fffa21e2000-7fffa21e3000 ---p 00000000 00:00 0 \n7fffa21e3000-7fffa22e3000 rw-p 00000000 00:00 0                          [stack:29839]\n7fffa22e3000-7fffa22e4000 ---p 00000000 00:00 0 \n7fffa22e4000-7fffa23e4000 rw-p 00000000 00:00 0                          [stack:29788]\n7fffa23e4000-7fffa23e5000 ---p 00000000 00:00 0 \n7fffa23e5000-7fffa24e5000 rw-p 00000000 00:00 0                          [stack:29781]\n7fffa24e5000-7fffa24e6000 ---p 00000000 00:00 0 \n7fffa24e6000-7fffa25e6000 rw-p 00000000 00:00 0                          [stack:29782]\n7fffa27d4000-7fffa27ea000 r-xp 00000000 fe:01 1574715                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fffa27ea000-7fffa29e9000 ---p 00016000 fe:01 1574715                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fffa29e9000-7fffa29ea000 rw-p 00015000 fe:01 1574715                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fffa29ea000-7fffa29eb000 ---p 00000000 00:00 0 \n7fffa29eb000-7fffa2aeb000 rw-p 00000000 00:00 0                          [stack:29968]\n7fffa2aeb000-7fffa2aec000 ---p 00000000 00:00 0 \n7fffa2aec000-7fffa2bec000 rw-p 00000000 00:00 0                          [stack:29593]\n7fffa2bec000-7fffa2bed000 ---p 00000000 00:00 0 \n7fffa2bed000-7fffa2ced000 rw-p 00000000 00:00 0                          [stack:29973]\n7fffa2ced000-7fffa2cee000 ---p 00000000 00:00 0 \n7fffa2cee000-7fffa2dee000 rw-p 00000000 00:00 0                          [stack:21477]\n7fffa2dee000-7fffa2def000 ---p 00000000 00:00 0 \n7fffa2def000-7fffa2eef000 rw-p 00000000 00:00 0                          [stack:29985]\n7fffa2ff0000-7fffa2ff1000 ---p 00000000 00:00 0 \n7fffa2ff1000-7fffa30f1000 rw-p 00000000 00:00 0                          [stack:29740]\n7fffa31f2000-7fffa31f3000 ---p 00000000 00:00 0 \n7fffa31f3000-7fffa32f3000 rw-p 00000000 00:00 0                          [stack:29632]\n7fffa32f3000-7fffa32f4000 ---p 00000000 00:00 0 \n7fffa32f4000-7fffa33f4000 rw-p 00000000 00:00 0                          [stack:27602]\n7fffa34f5000-7fffa34f6000 ---p 00000000 00:00 0 \n7fffa34f6000-7fffa35f6000 rw-p 00000000 00:00 0                          [stack:29406]\n7fffa36f7000-7fffa36f8000 ---p 00000000 00:00 0 \n7fffa36f8000-7fffa37f8000 rw-p 00000000 00:00 0                          [stack:29653]\n7fffa37f8000-7fffa37f9000 ---p 00000000 00:00 0 \n7fffa37f9000-7fffa38f9000 rw-p 00000000 00:00 0                          [stack:29706]\n7fffa39fa000-7fffa39fb000 ---p 00000000 00:00 0 \n7fffa39fb000-7fffa3afb000 rw-p 00000000 00:00 0                          [stack:29628]\n7fffa3afb000-7fffa3afc000 ---p 00000000 00:00 0 \n7fffa3afc000-7fffa3bfc000 rw-p 00000000 00:00 0                          [stack:29588]\n7fffa3cfd000-7fffa3cfe000 ---p 00000000 00:00 0 \n7fffa3cfe000-7fffa3dfe000 rw-p 00000000 00:00 0                          [stack:29745]\n7fffa3dfe000-7fffa3dff000 ---p 00000000 00:00 0 \n7fffa3dff000-7fffa3eff000 rw-p 00000000 00:00 0                          [stack:29997]\n7fffa4000000-7fffa7f01000 rw-p 00000000 00:00 0 \n7fffa7f01000-7fffa8000000 ---p 00000000 00:00 0 \n7fffa80c1000-7fffa80c2000 ---p 00000000 00:00 0 \n7fffa80c2000-7fffa81c2000 rw-p 00000000 00:00 0                          [stack:29403]\n7fffa81c2000-7fffa81c3000 ---p 00000000 00:00 0 \n7fffa81c3000-7fffa82c3000 rw-p 00000000 00:00 0                          [stack:29742]\n7fffa82c3000-7fffa82c4000 ---p 00000000 00:00 0 \n7fffa82c4000-7fffa83c4000 rw-p 00000000 00:00 0                          [stack:29738]\n7fffa84c5000-7fffa84c6000 ---p 00000000 00:00 0 \n7fffa84c6000-7fffa85c6000 rw-p 00000000 00:00 0                          [stack:29446]\n7fffa85c6000-7fffa85c7000 ---p 00000000 00:00 0 \n7fffa85c7000-7fffa86c7000 rw-p 00000000 00:00 0                          [stack:29744]\n7fffa86c7000-7fffa86c8000 ---p 00000000 00:00 0 \n7fffa86c8000-7fffa87c8000 rw-p 00000000 00:00 0                          [stack:29923]\n7fffa87c8000-7fffa87c9000 ---p 00000000 00:00 0 \n7fffa87c9000-7fffa88c9000 rw-p 00000000 00:00 0                          [stack:29767]\n7fffa88c9000-7fffa88ca000 ---p 00000000 00:00 0 \n7fffa88ca000-7fffa89ca000 rw-p 00000000 00:00 0                          [stack:29974]\n7fffa89ca000-7fffa89cb000 ---p 00000000 00:00 0 \n7fffa89cb000-7fffa8acb000 rw-p 00000000 00:00 0                          [stack:29743]\n7fffa8acb000-7fffa8acc000 ---p 00000000 00:00 0 \n7fffa8acc000-7fffa8bcc000 rw-p 00000000 00:00 0                          [stack:29990]\n7fffa8bcc000-7fffa8bcd000 ---p 00000000 00:00 0 \n7fffa8bcd000-7fffa8ccd000 rw-p 00000000 00:00 0                          [stack:29445]\n7fffa8ccd000-7fffa8cce000 ---p 00000000 00:00 0 \n7fffa8cce000-7fffa8dce000 rw-p 00000000 00:00 0                          [stack:29970]\n7fffa8dce000-7fffa8dcf000 ---p 00000000 00:00 0 \n7fffa8dcf000-7fffa8ecf000 rw-p 00000000 00:00 0                          [stack:29630]\n7fffa8ecf000-7fffa8ed0000 ---p 00000000 00:00 0 \n7fffa8ed0000-7fffa8fd0000 rw-p 00000000 00:00 0                          [stack:29655]\n7fffa8fd0000-7fffa8fd1000 ---p 00000000 00:00 0 \n7fffa8fd1000-7fffa90d1000 rw-p 00000000 00:00 0                          [stack:29794]\n7fffa90d1000-7fffa90d2000 ---p 00000000 00:00 0 \n7fffa90d2000-7fffa91d2000 rw-p 00000000 00:00 0                          [stack:21468]\n7fffa91d2000-7fffa91d3000 ---p 00000000 00:00 0 \n7fffa91d3000-7fffa92d3000 rw-p 00000000 00:00 0                          [stack:27603]\n7fffa92d3000-7fffa92d4000 ---p 00000000 00:00 0 \n7fffa92d4000-7fffa93d4000 rw-p 00000000 00:00 0                          [stack:25072]\n7fffa93d4000-7fffa93d5000 ---p 00000000 00:00 0 \n7fffa93d5000-7fffa94d5000 rw-p 00000000 00:00 0                          [stack:29420]\n7fffa94d5000-7fffa94d6000 ---p 00000000 00:00 0 \n7fffa94d6000-7fffa95d6000 rw-p 00000000 00:00 0                          [stack:29853]\n7fffa95d6000-7fffa95d7000 ---p 00000000 00:00 0 \n7fffa95d7000-7fffa96d7000 rw-p 00000000 00:00 0                          [stack:21475]\n7fffa96d7000-7fffa96d8000 ---p 00000000 00:00 0 \n7fffa96d8000-7fffa97d8000 rw-p 00000000 00:00 0                          [stack:29783]\n7fffa97d8000-7fffa97d9000 ---p 00000000 00:00 0 \n7fffa97d9000-7fffa98d9000 rw-p 00000000 00:00 0                          [stack:29609]\n7fffa98d9000-7fffa98da000 ---p 00000000 00:00 0 \n7fffa98da000-7fffa99da000 rw-p 00000000 00:00 0                          [stack:29633]\n7fffa99da000-7fffa99db000 ---p 00000000 00:00 0 \n7fffa99db000-7fffa9adb000 rw-p 00000000 00:00 0                          [stack:29994]\n7fffa9adb000-7fffa9adc000 ---p 00000000 00:00 0 \n7fffa9adc000-7fffa9bdc000 rw-p 00000000 00:00 0                          [stack:29634]\n7fffa9bdc000-7fffa9bdd000 ---p 00000000 00:00 0 \n7fffa9bdd000-7fffa9cdd000 rw-p 00000000 00:00 0                          [stack:29852]\n7fffa9cdd000-7fffa9cde000 ---p 00000000 00:00 0 \n7fffa9cde000-7fffa9dde000 rw-p 00000000 00:00 0                          [stack:29851]\n7fffa9dde000-7fffa9ddf000 ---p 00000000 00:00 0 \n7fffa9ddf000-7fffa9edf000 rw-p 00000000 00:00 0                          [stack:21804]\n7fffa9edf000-7fffa9ee0000 ---p 00000000 00:00 0 \n7fffa9ee0000-7fffa9fe0000 rw-p 00000000 00:00 0                          [stack:29441]\n7fffa9fe0000-7fffa9fe1000 ---p 00000000 00:00 0 \n7fffa9fe1000-7fffaa0e1000 rw-p 00000000 00:00 0                          [stack:29591]\n7fffaa0e1000-7fffaa0e2000 ---p 00000000 00:00 0 \n7fffaa0e2000-7fffaa1e2000 rw-p 00000000 00:00 0                          [stack:29397]\n7fffaa1e2000-7fffaa1e3000 ---p 00000000 00:00 0 \n7fffaa1e3000-7fffaa2e3000 rw-p 00000000 00:00 0                          [stack:29629]\n7fffaa2e3000-7fffaa2e4000 ---p 00000000 00:00 0 \n7fffaa2e4000-7fffaa3e4000 rw-p 00000000 00:00 0                          [stack:29444]\n7fffaa3e4000-7fffaa3e5000 ---p 00000000 00:00 0 \n7fffaa3e5000-7fffaa4e5000 rw-p 00000000 00:00 0                          [stack:29611]\n7fffaa4e5000-7fffaa4e6000 ---p 00000000 00:00 0 \n7fffaa4e6000-7fffaa5e6000 rw-p 00000000 00:00 0                          [stack:29850]\n7fffaa5e6000-7fffaa5e7000 ---p 00000000 00:00 0 \n7fffaa5e7000-7fffaa6e7000 rw-p 00000000 00:00 0                          [stack:29398]\n7fffaa7e8000-7fffaa7e9000 ---p 00000000 00:00 0 \n7fffaa7e9000-7fffaa8e9000 rw-p 00000000 00:00 0                          [stack:29972]\n7fffaa8e9000-7fffaa8ea000 ---p 00000000 00:00 0 \n7fffaa8ea000-7fffaa9ea000 rw-p 00000000 00:00 0                          [stack:29849]\n7fffaa9ea000-7fffaa9eb000 ---p 00000000 00:00 0 \n7fffaa9eb000-7fffaaaeb000 rw-p 00000000 00:00 0                          [stack:29848]\n7fffaaaeb000-7fffaaaec000 ---p 00000000 00:00 0 \n7fffaaaec000-7fffaabec000 rw-p 00000000 00:00 0                          [stack:21480]\n7fffaabec000-7fffaabed000 ---p 00000000 00:00 0 \n7fffaabed000-7fffaaced000 rw-p 00000000 00:00 0                          [stack:29614]\n7fffaaced000-7fffaacee000 ---p 00000000 00:00 0 \n7fffaacee000-7fffaadee000 rw-p 00000000 00:00 0                          [stack:29995]\n7fffaadee000-7fffaadef000 ---p 00000000 00:00 0 \n7fffaadef000-7fffaaeef000 rw-p 00000000 00:00 0                          [stack:29636]\n7fffaaeef000-7fffaaef0000 ---p 00000000 00:00 0 \n7fffaaef0000-7fffaaff0000 rw-p 00000000 00:00 0                          [stack:29847]\n7fffaaff0000-7fffaaff1000 ---p 00000000 00:00 0 \n7fffaaff1000-7fffab0f1000 rw-p 00000000 00:00 0                          [stack:29813]\n7fffab0f1000-7fffab0f2000 ---p 00000000 00:00 0 \n7fffab0f2000-7fffab1f2000 rw-p 00000000 00:00 0                          [stack:29635]\n7fffab1f2000-7fffab1f3000 ---p 00000000 00:00 0 \n7fffab1f3000-7fffab2f3000 rw-p 00000000 00:00 0                          [stack:29615]\n7fffab2f3000-7fffab2f4000 ---p 00000000 00:00 0 \n7fffab2f4000-7fffab3f4000 rw-p 00000000 00:00 0                          [stack:29846]\n7fffab3f4000-7fffab3f5000 ---p 00000000 00:00 0 \n7fffab3f5000-7fffab4f5000 rw-p 00000000 00:00 0                          [stack:29768]\n7fffab4f5000-7fffab4f6000 ---p 00000000 00:00 0 \n7fffab4f6000-7fffab5f6000 rw-p 00000000 00:00 0                          [stack:29820]\n7fffab5f6000-7fffab5f7000 ---p 00000000 00:00 0 \n7fffab5f7000-7fffab6f7000 rw-p 00000000 00:00 0                          [stack:29422]\n7fffab6f7000-7fffab6f8000 ---p 00000000 00:00 0 \n7fffab6f8000-7fffab7f8000 rw-p 00000000 00:00 0                          [stack:29747]\n7fffab7f8000-7fffab7f9000 ---p 00000000 00:00 0 \n7fffab7f9000-7fffab8f9000 rw-p 00000000 00:00 0                          [stack:25133]\n7fffab8f9000-7fffab8fa000 ---p 00000000 00:00 0 \n7fffab8fa000-7fffab9fa000 rw-p 00000000 00:00 0                          [stack:21471]\n7fffab9fa000-7fffab9fb000 ---p 00000000 00:00 0 \n7fffab9fb000-7fffabafb000 rw-p 00000000 00:00 0                          [stack:29425]\n7fffabafb000-7fffabafc000 ---p 00000000 00:00 0 \n7fffabafc000-7fffabbfc000 rw-p 00000000 00:00 0                          [stack:29607]\n7fffabbfc000-7fffabbfd000 ---p 00000000 00:00 0 \n7fffabbfd000-7fffabcfd000 rw-p 00000000 00:00 0                          [stack:29424]\n7fffabdfe000-7fffabdff000 ---p 00000000 00:00 0 \n7fffabdff000-7fffabeff000 rw-p 00000000 00:00 0                          [stack:27601]\n7fffabeff000-7fffabf00000 ---p 00000000 00:00 0 \n7fffabf00000-7fffac000000 rw-p 00000000 00:00 0                          [stack:28768]\n7fffac000000-7fffaff45000 rw-p 00000000 00:00 0 \n7fffaff45000-7fffb0000000 ---p 00000000 00:00 0 \n7fffb00c0000-7fffb00c1000 ---p 00000000 00:00 0 \n7fffb00c1000-7fffb01c1000 rw-p 00000000 00:00 0                          [stack:29975]\n7fffb01c1000-7fffb01c2000 ---p 00000000 00:00 0 \n7fffb01c2000-7fffb02c2000 rw-p 00000000 00:00 0                          [stack:29612]\n7fffb02c2000-7fffb02c3000 ---p 00000000 00:00 0 \n7fffb02c3000-7fffb03c3000 rw-p 00000000 00:00 0                          [stack:29790]\n7fffb03c3000-7fffb03c4000 ---p 00000000 00:00 0 \n7fffb03c4000-7fffb04c4000 rw-p 00000000 00:00 0                          [stack:29838]\n7fffb04c4000-7fffb04c5000 ---p 00000000 00:00 0 \n7fffb04c5000-7fffb05c5000 rw-p 00000000 00:00 0                          [stack:29833]\n7fffb05c5000-7fffb05c6000 ---p 00000000 00:00 0 \n7fffb05c6000-7fffb06c6000 rw-p 00000000 00:00 0                          [stack:29650]\n7fffb06c6000-7fffb06c7000 ---p 00000000 00:00 0 \n7fffb06c7000-7fffb07c7000 rw-p 00000000 00:00 0                          [stack:29830]\n7fffb07c7000-7fffb07c8000 ---p 00000000 00:00 0 \n7fffb07c8000-7fffb08c8000 rw-p 00000000 00:00 0                          [stack:29991]\n7fffb08c8000-7fffb08c9000 ---p 00000000 00:00 0 \n7fffb08c9000-7fffb09c9000 rw-p 00000000 00:00 0                          [stack:29821]\n7fffb09c9000-7fffb09ca000 ---p 00000000 00:00 0 \n7fffb09ca000-7fffb0aca000 rw-p 00000000 00:00 0                          [stack:29831]\n7fffb0aca000-7fffb0acb000 ---p 00000000 00:00 0 \n7fffb0acb000-7fffb0bcb000 rw-p 00000000 00:00 0                          [stack:29822]\n7fffb0bcb000-7fffb0bcc000 ---p 00000000 00:00 0 \n7fffb0bcc000-7fffb0ccc000 rw-p 00000000 00:00 0                          [stack:29681]\n7fffb0ccc000-7fffb0ccd000 ---p 00000000 00:00 0 \n7fffb0ccd000-7fffb0dcd000 rw-p 00000000 00:00 0                          [stack:29780]\n7fffb0dcd000-7fffb0dce000 ---p 00000000 00:00 0 \n7fffb0dce000-7fffb0ece000 rw-p 00000000 00:00 0                          [stack:29795]\n7fffb0ece000-7fffb0ecf000 ---p 00000000 00:00 0 \n7fffb0ecf000-7fffb0fcf000 rw-p 00000000 00:00 0                          [stack:29835]\n7fffb0fcf000-7fffb0fd0000 ---p 00000000 00:00 0 \n7fffb0fd0000-7fffb10d0000 rw-p 00000000 00:00 0                          [stack:29845]\n7fffb10d0000-7fffb10d1000 ---p 00000000 00:00 0 \n7fffb10d1000-7fffb11d1000 rw-p 00000000 00:00 0                          [stack:29438]\n7fffb11d1000-7fffb11d2000 ---p 00000000 00:00 0 \n7fffb11d2000-7fffb12d2000 rw-p 00000000 00:00 0                          [stack:29832]\n7fffb12d2000-7fffb12d3000 ---p 00000000 00:00 0 \n7fffb12d3000-7fffb13d3000 rw-p 00000000 00:00 0                          [stack:29980]\n7fffb13d3000-7fffb13d4000 ---p 00000000 00:00 0 \n7fffb13d4000-7fffb14d4000 rw-p 00000000 00:00 0                          [stack:29786]\n7fffb14d4000-7fffb14d5000 ---p 00000000 00:00 0 \n7fffb14d5000-7fffb15d5000 rw-p 00000000 00:00 0                          [stack:29826]\n7fffb15d5000-7fffb15d6000 ---p 00000000 00:00 0 \n7fffb15d6000-7fffb16d6000 rw-p 00000000 00:00 0                          [stack:29824]\n7fffb16d6000-7fffb16d7000 ---p 00000000 00:00 0 \n7fffb16d7000-7fffb17d7000 rw-p 00000000 00:00 0                          [stack:29616]\n7fffb17d7000-7fffb17d8000 ---p 00000000 00:00 0 \n7fffb17d8000-7fffb18d8000 rw-p 00000000 00:00 0                          [stack:29440]\n7fffb18d8000-7fffb18d9000 ---p 00000000 00:00 0 \n7fffb18d9000-7fffb19d9000 rw-p 00000000 00:00 0                          [stack:29405]\n7fffb1ada000-7fffb1adb000 ---p 00000000 00:00 0 \n7fffb1adb000-7fffb1bdb000 rw-p 00000000 00:00 0                          [stack:29805]\n7fffb1bdb000-7fffb1bdc000 ---p 00000000 00:00 0 \n7fffb1bdc000-7fffb1cdc000 rw-p 00000000 00:00 0                          [stack:29842]\n7fffb1cdc000-7fffb1cdd000 ---p 00000000 00:00 0 \n7fffb1cdd000-7fffb1ddd000 rw-p 00000000 00:00 0                          [stack:29703]\n7fffb1ddd000-7fffb1dde000 ---p 00000000 00:00 0 \n7fffb1dde000-7fffb1ede000 rw-p 00000000 00:00 0                          [stack:21469]\n7fffb1ede000-7fffb1edf000 ---p 00000000 00:00 0 \n7fffb1edf000-7fffb1fdf000 rw-p 00000000 00:00 0                          [stack:29702]\n7fffb21e1000-7fffb21e2000 ---p 00000000 00:00 0 \n7fffb21e2000-7fffb22e2000 rw-p 00000000 00:00 0                          [stack:29427]\n7fffb23e3000-7fffb23e4000 ---p 00000000 00:00 0 \n7fffb23e4000-7fffb24e4000 rw-p 00000000 00:00 0                          [stack:29992]\n7fffb24e4000-7fffb24e5000 ---p 00000000 00:00 0 \n7fffb24e5000-7fffb25e5000 rw-p 00000000 00:00 0                          [stack:29836]\n7fffb25e5000-7fffb25e6000 ---p 00000000 00:00 0 \n7fffb25e6000-7fffb26e6000 rw-p 00000000 00:00 0                          [stack:29778]\n7fffb26e6000-7fffb26e7000 ---p 00000000 00:00 0 \n7fffb26e7000-7fffb27e7000 rw-p 00000000 00:00 0                          [stack:29814]\n7fffb27e7000-7fffb27e8000 ---p 00000000 00:00 0 \n7fffb27e8000-7fffb28e8000 rw-p 00000000 00:00 0                          [stack:29652]\n7fffb28e8000-7fffb28e9000 ---p 00000000 00:00 0 \n7fffb28e9000-7fffb29e9000 rw-p 00000000 00:00 0                          [stack:29984]\n7fffb2aea000-7fffb2aeb000 ---p 00000000 00:00 0 \n7fffb2aeb000-7fffb2beb000 rw-p 00000000 00:00 0                          [stack:29844]\n7fffb2beb000-7fffb2bec000 ---p 00000000 00:00 0 \n7fffb2bec000-7fffb2cec000 rw-p 00000000 00:00 0                          [stack:29402]\n7fffb2cec000-7fffb2ced000 ---p 00000000 00:00 0 \n7fffb2ced000-7fffb2ded000 rw-p 00000000 00:00 0                          [stack:29967]\n7fffb2eee000-7fffb2eef000 ---p 00000000 00:00 0 \n7fffb2eef000-7fffb2fef000 rw-p 00000000 00:00 0                          [stack:27605]\n7fffb2fef000-7fffb2ff0000 ---p 00000000 00:00 0 \n7fffb2ff0000-7fffb30f0000 rw-p 00000000 00:00 0                          [stack:29843]\n7fffb30f0000-7fffb30f1000 ---p 00000000 00:00 0 \n7fffb30f1000-7fffb31f1000 rw-p 00000000 00:00 0                          [stack:29815]\n7fffb32f2000-7fffb32f3000 ---p 00000000 00:00 0 \n7fffb32f3000-7fffb33f3000 rw-p 00000000 00:00 0                          [stack:29651]\n7fffb34f4000-7fffb34f5000 ---p 00000000 00:00 0 \n7fffb34f5000-7fffb35f5000 rw-p 00000000 00:00 0                          [stack:16894]\n7fffb35f5000-7fffb35f6000 ---p 00000000 00:00 0 \n7fffb35f6000-7fffb36f6000 rw-p 00000000 00:00 0                          [stack:16895]\n7fffb36f6000-7fffb36f7000 ---p 00000000 00:00 0 \n7fffb36f7000-7fffb37f7000 rw-p 00000000 00:00 0                          [stack:16892]\n7fffb37f7000-7fffb37f8000 ---p 00000000 00:00 0 \n7fffb37f8000-7fffb38f8000 rw-p 00000000 00:00 0                          [stack:16852]\n7fffb38f8000-7fffb38f9000 ---p 00000000 00:00 0 \n7fffb38f9000-7fffb39f9000 rw-p 00000000 00:00 0                          [stack:29439]\n7fffb39f9000-7fffb39fa000 ---p 00000000 00:00 0 \n7fffb39fa000-7fffb3afa000 rw-p 00000000 00:00 0                          [stack:16839]\n7fffb3afa000-7fffb3afb000 ---p 00000000 00:00 0 \n7fffb3afb000-7fffb3bfb000 rw-p 00000000 00:00 0                          [stack:16854]\n7fffb3bfb000-7fffb3bfd000 r-xp 00000000 fe:01 1850010                    /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0/network_interface-0.0.1/network_interface_ext.so\n7fffb3bfd000-7fffb3dfc000 ---p 00002000 fe:01 1850010                    /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0/network_interface-0.0.1/network_interface_ext.so\n7fffb3dfc000-7fffb3dfd000 r--p 00001000 fe:01 1850010                    /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0/network_interface-0.0.1/network_interface_ext.so\n7fffb3dfd000-7fffb3dfe000 rw-p 00002000 fe:01 1850010                    /usr/share/metasploit-framework/vendor/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0/network_interface-0.0.1/network_interface_ext.so\n7fffb3dfe000-7fffb3dff000 ---p 00000000 00:00 0 \n7fffb3dff000-7fffb3eff000 rw-p 00000000 00:00 0                          [stack:16829]\n7fffb3eff000-7fffb3f00000 ---p 00000000 00:00 0 \n7fffb3f00000-7fffb4000000 rw-p 00000000 00:00 0                          [stack:16828]\n7fffb4000000-7fffb416f000 rw-p 00000000 00:00 0 \n7fffb416f000-7fffb8000000 ---p 00000000 00:00 0 \n7fffb8000000-7fffb91f6000 rw-p 00000000 00:00 0 \n7fffb91f6000-7fffbc000000 ---p 00000000 00:00 0 \n7fffbc000000-7fffbc58a000 rw-p 00000000 00:00 0 \n7fffbc58a000-7fffc0000000 ---p 00000000 00:00 0 \n7fffc0000000-7fffc0457000 rw-p 00000000 00:00 0 \n7fffc0457000-7fffc4000000 ---p 00000000 00:00 0 \n7fffc4000000-7fffc4021000 rw-p 00000000 00:00 0 \n7fffc4021000-7fffc8000000 ---p 00000000 00:00 0 \n7fffc8000000-7fffc8021000 rw-p 00000000 00:00 0 \n7fffc8021000-7fffcc000000 ---p 00000000 00:00 0 \n7fffcc000000-7fffcc021000 rw-p 00000000 00:00 0 \n7fffcc021000-7fffd0000000 ---p 00000000 00:00 0 \n7fffd0000000-7fffd129c000 rw-p 00000000 00:00 0 \n7fffd129c000-7fffd4000000 ---p 00000000 00:00 0 \n7fffd4000000-7fffd4021000 rw-p 00000000 00:00 0 \n7fffd4021000-7fffd8000000 ---p 00000000 00:00 0 \n7fffd8000000-7fffd8105000 rw-p 00000000 00:00 0 \n7fffd8105000-7fffdc000000 ---p 00000000 00:00 0 \n7fffdc000000-7fffdc6b8000 rw-p 00000000 00:00 0 \n7fffdc6b8000-7fffe0000000 ---p 00000000 00:00 0 \n7fffe0000000-7fffe0021000 rw-p 0000[-] console 3 is dead: java.net.ConnectException: Verbindungsaufbau abgelehnt\nThread id: session.list -> {}\njava.lang.RuntimeException: java.net.ConnectException: Verbindungsaufbau abgelehnt\n    at msf.RpcConnectionImpl.exec(RpcConnectionImpl.java:90)\n    at msf.RpcConnectionImpl.cacheExecute(RpcConnectionImpl.java:237)\n    at msf.RpcConnectionImpl.execute(RpcConnectionImpl.java:213)\n    at armitage.ArmitageTimer.readFromClient(ArmitageTimer.java:73)\n    at armitage.ArmitageTimer.run(ArmitageTimer.java:101)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.ConnectException: Verbindungsaufbau abgelehnt\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.net.Socket.connect(Socket.java:589)\n    at java.net.Socket.connect(Socket.java:538)\n    at sun.net.NetworkClient.doConnect(NetworkClient.java:180)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:432)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:527)\n    at sun.net.www.http.HttpClient.(HttpClient.java:211)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:308)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:326)\n    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1168)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1104)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:998)\n    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:932)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1282)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1257)\n    at msf.MsgRpcImpl.writeCall(MsgRpcImpl.java:138)\n    at msf.RpcConnectionImpl.exec(RpcConnectionImpl.java:64)\n    ... 5 more\njava.lang.RuntimeException: java.net.ConnectException: Verbindungsaufbau abgelehnt\n    at msf.RpcConnectionImpl.exec(RpcConnectionImpl.java:90)\n    at msf.RpcConnectionImpl.cacheExecute(RpcConnectionImpl.java:237)\n    at msf.RpcConnectionImpl.execute(RpcConnectionImpl.java:213)\n    at msf.RpcAsync.execute(RpcAsync.java:88)\n    at armitage.ConsoleClient.readResponse(ConsoleClient.java:176)\n    at armitage.ConsoleClient.run(ConsoleClient.java:249)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.net.ConnectException: Verbindungsaufbau abgelehnt\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.net.Socket.connect(Socket.java:589)\n    at java.net.Socket.connect(Socket.java:538)\n    at sun.net.NetworkClient.doConnect(NetworkClient.java:180)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:432)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:527)\n    at sun.net.www.http.HttpClient.(HttpClient.java:211)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:308)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:326)\n    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1168)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1104)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:998)\n    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:932)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1282)\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1257)\n    at msf.MsgRpcImpl.writeCall(MsgRpcImpl.java:138)\n    at msf.RpcConnectionImpl.exec(RpcConnectionImpl.java:64)\n    ... 6 more\nbt\n[Thread 0x7ffff7ff5700 (LWP 16694) exited]\nInferior 1 (process 16689) exited normally bt\nNo stack.\n. I contacted the Armitage Team, they said:\n\"I can't provide support for this. Armitage spins up a proxy server in Metasploit. Armitage does not have any code that interacts with this other than a dialog to launch this feature in Metasploit.\"\n. I am a bit sad because i thought i could help finding a bug/improve and the Armitage Team seems not to be interested. I am wondering that this bug exist, because i am surely not the only one who use proxychains with armitage and i have this error on different machines and VMs too.\nThank you for your time rofl0r.\n. ",
    "Lilacs": "I remove the \"quiet_mode\",not useful,but in the Recovery Mode let csrutil disable, the problem disappears.\nThanks!\n. I remove the \"quiet_mode\",not useful,but in the Recovery Mode let csrutil disable, the problem disappears.\nThanks!\n. ",
    "cam13": "thanks for the quick reply.\nI've taken a look at it and here's a quick workaround to make it compile on both 5.7 i386/amd64 and -current.\ndiff --git a/src/common.h b/src/common.h\nindex 5335bd1..2867775 100644\n--- a/src/common.h\n+++ b/src/common.h\n@@ -18,5 +18,9 @@ extern const char _proxy_state_strmap[];\n char get_config_path(char_ default_path, char* pbuf, size_t bufsize);\n void pc_stringfromipv4(unsigned char ip_buf_4_bytes, char *outbuf_16_bytes);\n+#define s6_addr8  __u6_addr.__u6_addr8\n+#define s6_addr16 __u6_addr.__u6_addr16\n+#define s6_addr32 __u6_addr.__u6_addr32\n+\n //RcB: DEP \"common.c\"\n #endif\n. sorry for the late reply. applied your patch and build is perfect:\n$ ./configure\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... yes\nDone, now run gmake && gmake install\n(7945) /tmp/proxychains-ng (git::master)\n$ gmake\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/version.o src/version.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/core.o src/core.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/common.o src/common.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/allocator_thread.o src/allocator_thread.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/ip_type.o src/ip_type.c\nsrc/ip_type.c:4: warning: missing braces around initializer\nsrc/ip_type.c:4: warning: (near initialization for 'ip_type_localhost.addr.v4.octet')\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/hostsreader.o src/hostsreader.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/hash.o src/hash.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/debug.o src/debug.c\ncc -shared -fPIC -Wl,--no-as-needed  -lpthread -Wl,-soname=libproxychains4.so  \\\n        -o libproxychains4.so src/nameinfo.o src/version.o src/core.o src/common.o src/libproxychains.o src/allocator_thread.o src/ip_type.o src/hostsreader.o src/hash.o src/debug.o\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/main.o src/main.c\ncc src/main.o src/common.o  -o proxychains4\n. thanks for the quick reply.\nI've taken a look at it and here's a quick workaround to make it compile on both 5.7 i386/amd64 and -current.\ndiff --git a/src/common.h b/src/common.h\nindex 5335bd1..2867775 100644\n--- a/src/common.h\n+++ b/src/common.h\n@@ -18,5 +18,9 @@ extern const char _proxy_state_strmap[];\n char get_config_path(char_ default_path, char* pbuf, size_t bufsize);\n void pc_stringfromipv4(unsigned char ip_buf_4_bytes, char *outbuf_16_bytes);\n+#define s6_addr8  __u6_addr.__u6_addr8\n+#define s6_addr16 __u6_addr.__u6_addr16\n+#define s6_addr32 __u6_addr.__u6_addr32\n+\n //RcB: DEP \"common.c\"\n #endif\n. sorry for the late reply. applied your patch and build is perfect:\n$ ./configure\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... yes\nDone, now run gmake && gmake install\n(7945) /tmp/proxychains-ng (git::master)\n$ gmake\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/version.o src/version.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/core.o src/core.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/common.o src/common.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/allocator_thread.o src/allocator_thread.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/ip_type.o src/ip_type.c\nsrc/ip_type.c:4: warning: missing braces around initializer\nsrc/ip_type.c:4: warning: (near initialization for 'ip_type_localhost.addr.v4.octet')\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/hostsreader.o src/hostsreader.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/hash.o src/hash.c\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/debug.o src/debug.c\ncc -shared -fPIC -Wl,--no-as-needed  -lpthread -Wl,-soname=libproxychains4.so  \\\n        -o libproxychains4.so src/nameinfo.o src/version.o src/core.o src/common.o src/libproxychains.o src/allocator_thread.o src/ip_type.o src/hostsreader.o src/hash.o src/debug.o\ncc -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe -DIS_BSD -DIS_OPENBSD   -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.so\\\"  -fPIC -c -o src/main.o src/main.c\ncc src/main.o src/common.o  -o proxychains4\n. ",
    "vonnyfly": "I have known the root cause.\nOSX10.11 add a rootless mode. Root account doesn't have permission to modify /usr/bin files. So proxychains couldn't works on curl which is located in /usr/bin.\nSo if you use OSX10.11, you should close the rootless.\n. You could close this issue. But I think keep it here maybe help users who uses OSX10.11.\n. The error log is like this:\n$ make\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/core.o src/core.c\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/common.o src/common.c\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:311:12: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n               ~  ^\nsrc/libproxychains.c:311:36: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n                                       ~  ^\nsrc/libproxychains.c:312:12: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n               ~  ^\nsrc/libproxychains.c:312:36: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n                                       ~  ^\nsrc/libproxychains.c:342:39: error: no member named 's6_addr32' in 'struct in6_addr'\n                memcpy(&v4inv6.s_addr, &p_addr_in6->s6_addr32[3], 4);\n                                        ~~~~~~~~~~  ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\n5 errors generated.\nmake: *** [src/libproxychains.o] Error 1\n. I have known the root cause.\nOSX10.11 add a rootless mode. Root account doesn't have permission to modify /usr/bin files. So proxychains couldn't works on curl which is located in /usr/bin.\nSo if you use OSX10.11, you should close the rootless.\n. You could close this issue. But I think keep it here maybe help users who uses OSX10.11.\n. The error log is like this:\n$ make\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/core.o src/core.c\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/common.o src/common.c\ncc -DSUPER_SECURE -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\nsrc/libproxychains.c:311:12: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n               ~  ^\nsrc/libproxychains.c:311:36: error: no member named 's6_addr32' in 'struct in6_addr'\n        return a->s6_addr32[0] == 0 && a->s6_addr32[1] == 0 &&\n                                       ~  ^\nsrc/libproxychains.c:312:12: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n               ~  ^\nsrc/libproxychains.c:312:36: error: no member named 's6_addr16' in 'struct in6_addr'\n               a->s6_addr16[4] == 0 && a->s6_addr16[5] == 0xffff;\n                                       ~  ^\nsrc/libproxychains.c:342:39: error: no member named 's6_addr32' in 'struct in6_addr'\n                memcpy(&v4inv6.s_addr, &p_addr_in6->s6_addr32[3], 4);\n                                        ~~~~~~~~~~  ^\n/usr/include/secure/_string.h:65:33: note: expanded from macro 'memcpy'\n  __builtin___memcpy_chk (dest, src, len, __darwin_obsz0 (dest))\n                                ^\n5 errors generated.\nmake: *** [src/libproxychains.o] Error 1\n. ",
    "magicians": "\u2601  ~  proxychains4 curl ip.cn\n[proxychains] config file found: /Users/meilunzhi/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.10/lib/libproxychains4.dylib\n\u5f53\u524d IP\uff1a182.18.110.217 \u6765\u81ea\uff1a\u5317\u4eac\u5e02 shadowocks?\n. \u2601  ~  proxychains4 curl ip.cn\n[proxychains] config file found: /Users/meilunzhi/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.10/lib/libproxychains4.dylib\n\u5f53\u524d IP\uff1a182.18.110.217 \u6765\u81ea\uff1a\u5317\u4eac\u5e02 shadowocks?\n. ",
    "haobingwang": "~ \u2b80 proxychains4 curl ip.cn\n[proxychains] config file found: /Users/jack/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n\u5f53\u524d IP\uff1a101.81.227.28 \u6765\u81ea\uff1a\u4e0a\u6d77\u5e02 \u7535\u4fe1\n. ~ \u2b80 proxychains4 curl ip.cn\n[proxychains] config file found: /Users/jack/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n\u5f53\u524d IP\uff1a101.81.227.28 \u6765\u81ea\uff1a\u4e0a\u6d77\u5e02 \u7535\u4fe1\n. ",
    "dkreider": "Your config file shows \" http 127.0.0.1 8082 \" and the output is 127.0.01:8080. \nWhy would this be if proxychains is configured to use port 8082? Port redirects?\n. If you're using Kali Linux it should already be installed. Just run it from the terminal by typing \"proxychains4 name-of-program\"\nTo proxifiy firefox type \"proxychains4 firefox\". \nBefore using proxychains you'll need to configure it by editing the config file which should be located in /etc/proxychains.conf. Read it carefully. Everything should be self-explanatory. \nIf you are still stuck go to Youtube and search for \"Proxychains\" or \"Using proxychains on Kali Linux\".\n. Your config file shows \" http 127.0.0.1 8082 \" and the output is 127.0.01:8080. \nWhy would this be if proxychains is configured to use port 8082? Port redirects?\n. If you're using Kali Linux it should already be installed. Just run it from the terminal by typing \"proxychains4 name-of-program\"\nTo proxifiy firefox type \"proxychains4 firefox\". \nBefore using proxychains you'll need to configure it by editing the config file which should be located in /etc/proxychains.conf. Read it carefully. Everything should be self-explanatory. \nIf you are still stuck go to Youtube and search for \"Proxychains\" or \"Using proxychains on Kali Linux\".\n. ",
    "toniss": "the problem persist, these are two output examples:\nproxychains4 nc google.com 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.10\n[proxychains] Strict chain  ...  127.0.0.1:8082  ...  google.com:80 <--socket error or timeout!\ngoogle.com [224.0.0.1] 80 (http) : Connection refused\nproxychains4 nc google.com 443\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.10\n[proxychains] Strict chain  ...  127.0.0.1:8082  ...  google.com:443  ...  OK\n^C \nthe conf is this:\nchain_len = 1\ndynamic_chain\nstrict_chain\nquiet_mode\nproxy_dns\nremote_dns_subnet 224\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nlocalnet 10.0.0.0/255.0.0.0\n[ProxyList]\nhttp    127.0.0.1       8082\n. The problem was the proxy only accept method connect at port 443.\n. the problem persist, these are two output examples:\nproxychains4 nc google.com 80\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.10\n[proxychains] Strict chain  ...  127.0.0.1:8082  ...  google.com:80 <--socket error or timeout!\ngoogle.com [224.0.0.1] 80 (http) : Connection refused\nproxychains4 nc google.com 443\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.10\n[proxychains] Strict chain  ...  127.0.0.1:8082  ...  google.com:443  ...  OK\n^C \nthe conf is this:\nchain_len = 1\ndynamic_chain\nstrict_chain\nquiet_mode\nproxy_dns\nremote_dns_subnet 224\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nlocalnet 10.0.0.0/255.0.0.0\n[ProxyList]\nhttp    127.0.0.1       8082\n. The problem was the proxy only accept method connect at port 443.\n. ",
    "DarKnight24": "The bash completion feature in proxychains. At present I need to type a complete command for ex. proxychains firefox or proxychains youtube-dl. If we will have bash completion it will be a lot easier.\n. The bash completion feature in proxychains. At present I need to type a complete command for ex. proxychains firefox or proxychains youtube-dl. If we will have bash completion it will be a lot easier.\n. ",
    "JayGoldberg": "+1, we just want binary path completion. proxychains4 <tab> will not tab-complete executables, only the pwd's files/dirs, so you have to know the executable name and type the whole thing.\n. +1, we just want binary path completion. proxychains4 <tab> will not tab-complete executables, only the pwd's files/dirs, so you have to know the executable name and type the whole thing.\n. ",
    "ghost": "I used 4.9 and 4.8.1 to test it.It seems that it still has that problem. :(\n. @cyberstx   I have the same problem.And I close the \"proxy-dns\",then nmap start to work.\nThank you!\n. I used 4.9 and 4.8.1 to test it.It seems that it still has that problem. :(\n. @cyberstx   I have the same problem.And I close the \"proxy-dns\",then nmap start to work.\nThank you!\n. ",
    "forkbomber": "True, HTTP 1.0 doesn't require Host header.\nAt the same time this is exactly how browsers sends HTTPS CONNECT requests to proxies.\nBelow are two tests I run today:\n- Firefox\nCONNECT github.com:443 HTTP/1.0\n  User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:41.0) Gecko/20100101 Firefox/41.0\n  Proxy-Connection: keep-alive\n  Connection: keep-alive\n  Host: github.com:443\n- Internet Explorer\nCONNECT github.com:443 HTTP/1.0\n  User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\n  Proxy-Connection: Keep-Alive\n  Content-Length: 0\n  Host: github.com\n  Pragma: no-cache\nI agree that changes like this might introduce some compatibility issues.\nAt the same its hard to imaging many proxy servers in the wild which would be confused by HTTP/1.0 CONNECT requests with Host header, since this is exactly how major browsers used to send requests not long ago (these days they send HTTP/1.1 even for CONNECT requests to proxies unless forced HTTP/1.0).\nIn a long term proxychains might be better off mimicking requests of major browsers, since they are THE testing target for http proxies / http servers. That would ensure greater compatibility and prevent issues similar to #92.\n. True, HTTP 1.0 doesn't require Host header.\nAt the same time this is exactly how browsers sends HTTPS CONNECT requests to proxies.\nBelow are two tests I run today:\n- Firefox\nCONNECT github.com:443 HTTP/1.0\n  User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:41.0) Gecko/20100101 Firefox/41.0\n  Proxy-Connection: keep-alive\n  Connection: keep-alive\n  Host: github.com:443\n- Internet Explorer\nCONNECT github.com:443 HTTP/1.0\n  User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\n  Proxy-Connection: Keep-Alive\n  Content-Length: 0\n  Host: github.com\n  Pragma: no-cache\nI agree that changes like this might introduce some compatibility issues.\nAt the same its hard to imaging many proxy servers in the wild which would be confused by HTTP/1.0 CONNECT requests with Host header, since this is exactly how major browsers used to send requests not long ago (these days they send HTTP/1.1 even for CONNECT requests to proxies unless forced HTTP/1.0).\nIn a long term proxychains might be better off mimicking requests of major browsers, since they are THE testing target for http proxies / http servers. That would ensure greater compatibility and prevent issues similar to #92.\n. ",
    "ilyaglow": "I'm working on similar thing right now and actually HTTP/1.0 specification hasn't CONNECT method at all: https://tools.ietf.org/html/rfc1945#section-8\nMaking CONNECT with HTTP/1.0 is just a kind of backward compatibility echo from the past, temporary transition from HTTP/1.0 to HTTP/1.1 (how proxychains even got this implemented?), btw such as Netscape's \"Proxy-Connection: Keep-Alive\" header. The latest stable Squid proxy server and couple of others won't let you tunnel like that.\nSo HTTP/1.0 doesn't suppose to have persistent connections and probably should be vanished from proxychains completely.\n. I'm working on similar thing right now and actually HTTP/1.0 specification hasn't CONNECT method at all: https://tools.ietf.org/html/rfc1945#section-8\nMaking CONNECT with HTTP/1.0 is just a kind of backward compatibility echo from the past, temporary transition from HTTP/1.0 to HTTP/1.1 (how proxychains even got this implemented?), btw such as Netscape's \"Proxy-Connection: Keep-Alive\" header. The latest stable Squid proxy server and couple of others won't let you tunnel like that.\nSo HTTP/1.0 doesn't suppose to have persistent connections and probably should be vanished from proxychains completely.\n. ",
    "tuchida": "Thanks! The debug mode worked.\n. Thanks! The debug mode worked.\n. ",
    "shaxo": "Hi, \nthanks for your reply. The patch provided corrects the faulty behavior. \nI'll have a closer look to the reported OpenBSD issue, and will report it if confirmed. \n. Here are my debug comments: http://pastebin.com/eJeWZRX1\nhere is the output i got in gdb: \n\nStarting program: /usr/bin/ssh root@192.168.1.10\nDEBUG:init_lib_wrapper called from gcc_init\nDEBUG:pid[24931]:at_init\n[proxychains] DLL init: proxychains-ng 4.10\nDEBUG:loaded symbol 'connect' real addr 0x1d524ae04060  wrapped addr 0x1d531fb62f2a\nDEBUG:loaded symbol 'sendto' real addr 0x1d524ae034e0  wrapped addr 0x1d531fb63965\nDEBUG:loaded symbol 'gethostbyname' real addr 0x1d52cb71a4e0  wrapped addr 0x1d531fb6356e\nDEBUG:loaded symbol 'getaddrinfo' real addr 0x1d52cb716260  wrapped addr 0x1d531fb635dd\nDEBUG:loaded symbol 'freeaddrinfo' real addr 0x1d52cb741480  wrapped addr 0x1d531fb636a2\nDEBUG:loaded symbol 'gethostbyaddr' real addr 0x1d52cb71a2b0  wrapped addr 0x1d531fb63841\nDEBUG:loaded symbol 'getnameinfo' real addr 0x1d52cb717dc0  wrapped addr 0x1d531fb5f344\nDEBUG:loaded symbol 'close' real addr 0x1d524ae04120  wrapped addr 0x1d531fb62e61\nDEBUG:[play] socks5 127.0.0.1:8888\nDEBUG:getaddrinfo: 192.168.1.10 22\nDEBUG:pid[24931]:proxy_getaddrinfo\nDEBUG:pid[24931]:mygetservbyname_r\nDEBUG:pid[24931]:pc_getnameinfo\nDEBUG:BRANCH 2\nDEBUG:salen=16, sizeof=16\nssh_connect_direct: getnameinfo failed\nssh: connect to host 192.168.1.10 port : No such file or directory\nProgram exited with code 0377.\n. Sorry for my previous post. The branch if(hostlen) is taken. \nhostlen is 256, servlen changes (32 and zero).\nIn gbd:\nBreakpoint 1, pc_getnameinfo (sa=0x3e541e64030, salen=16, host=0x7f7ffffe7cb0 \"192.168.1.10\", \n    hostlen=256, serv=0x7f7ffffe7db0 \"22\", servlen=32, flags=3) at src/libproxychains.c:484\nBreakpoint 1, pc_getnameinfo (sa=0x7f7ffffe7850, salen=16, host=0x7f7ffffe7950 \"127.0.0.1\", \n    hostlen=256, serv=0x0, servlen=0, flags=1) at src/libproxychains.c:484\nBreakpoint 1, pc_getnameinfo (sa=0x3e2eb6acee0, salen=0, host=0x7f7ffffe6760 \" l\\177\\177\", \n    hostlen=256, serv=0x0, servlen=0, flags=1) at src/libproxychains.c:484\nget_hostfile_hostname_ipaddr: getnameinfo failed\n\nHere is the output: \n\nDEBUG:pid[12385]:pc_getnameinfo\nDEBUG:SOCKFAMILY(_sa) == AF_INET: 1\nDEBUG:SOCKFAMILY(_sa) == AF_INET6: 0\nDEBUG:hostlen=256\nDEBUG:servlen=32\nDEBUG:BRANCH 2\nDEBUG:salen=16, sizeof=16\nDEBUG:BRANCH 3\n DEBUG:BRANCH 4\nDEBUG:OUT...\nDEBUG:RETURN 0!\nDEBUG:pid[12385]:connect\nDEBUG:target: 192.168.1.10\nDEBUG:port: 22\nDEBUG:pid[12385]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:8888\n[proxychains] Strict chain  ...  127.0.0.1:8888 DEBUG:pid[12385]:timed_connect\nDEBUG:\nconnect ret=0\nDEBUG:pid[12385]:chain_step\n ...  192.168.1.10:22 DEBUG:pid[12385]:tunnel_to\nDEBUG:host dns \n ...  OK\nDEBUG:pid[12385]:pc_getnameinfo\nDEBUG:SOCKFAMILY(_sa) == AF_INET: 1\nDEBUG:SOCKFAMILY(_sa) == AF_INET6: 0\nDEBUG:hostlen=256\nDEBUG:servlen=0\nDEBUG:BRANCH 2\nDEBUG:salen=16, sizeof=16\nDEBUG:BRANCH 3\n DEBUG:BRANCH 4\nDEBUG:OUT...\nDEBUG:RETURN 0!\nDEBUG:freeaddrinfo 0xce46ba17000 \nDEBUG:pid[12385]:proxy_freeaddrinfo\nDEBUG:pid[12385]:pc_getnameinfo\nDEBUG:SOCKFAMILY(_sa) == AF_INET: 1\nDEBUG:SOCKFAMILY(_sa) == AF_INET6: 0\nDEBUG:hostlen=256\nDEBUG:servlen=0\nDEBUG:BRANCH 2\nDEBUG:salen=0, sizeof=16\nDEBUG:RETURN EAI_FAMILY \nget_hostfile_hostname_ipaddr: getnameinfo failed\n. No change apparently with the updated pc_getnameinfo. I'll try to have a closer look the coming week. \n. Hi, \nthanks for your reply. The patch provided corrects the faulty behavior. \nI'll have a closer look to the reported OpenBSD issue, and will report it if confirmed. \n. Here are my debug comments: http://pastebin.com/eJeWZRX1\nhere is the output i got in gdb: \nStarting program: /usr/bin/ssh root@192.168.1.10\nDEBUG:init_lib_wrapper called from gcc_init\nDEBUG:pid[24931]:at_init\n[proxychains] DLL init: proxychains-ng 4.10\nDEBUG:loaded symbol 'connect' real addr 0x1d524ae04060  wrapped addr 0x1d531fb62f2a\nDEBUG:loaded symbol 'sendto' real addr 0x1d524ae034e0  wrapped addr 0x1d531fb63965\nDEBUG:loaded symbol 'gethostbyname' real addr 0x1d52cb71a4e0  wrapped addr 0x1d531fb6356e\nDEBUG:loaded symbol 'getaddrinfo' real addr 0x1d52cb716260  wrapped addr 0x1d531fb635dd\nDEBUG:loaded symbol 'freeaddrinfo' real addr 0x1d52cb741480  wrapped addr 0x1d531fb636a2\nDEBUG:loaded symbol 'gethostbyaddr' real addr 0x1d52cb71a2b0  wrapped addr 0x1d531fb63841\nDEBUG:loaded symbol 'getnameinfo' real addr 0x1d52cb717dc0  wrapped addr 0x1d531fb5f344\nDEBUG:loaded symbol 'close' real addr 0x1d524ae04120  wrapped addr 0x1d531fb62e61\nDEBUG:[play] socks5 127.0.0.1:8888\nDEBUG:getaddrinfo: 192.168.1.10 22\nDEBUG:pid[24931]:proxy_getaddrinfo\nDEBUG:pid[24931]:mygetservbyname_r\nDEBUG:pid[24931]:pc_getnameinfo\nDEBUG:BRANCH 2\nDEBUG:salen=16, sizeof=16\nssh_connect_direct: getnameinfo failed\nssh: connect to host 192.168.1.10 port : No such file or directory\nProgram exited with code 0377.\n. Sorry for my previous post. The branch if(hostlen) is taken. \nhostlen is 256, servlen changes (32 and zero).\nIn gbd:\nBreakpoint 1, pc_getnameinfo (sa=0x3e541e64030, salen=16, host=0x7f7ffffe7cb0 \"192.168.1.10\", \n    hostlen=256, serv=0x7f7ffffe7db0 \"22\", servlen=32, flags=3) at src/libproxychains.c:484\nBreakpoint 1, pc_getnameinfo (sa=0x7f7ffffe7850, salen=16, host=0x7f7ffffe7950 \"127.0.0.1\", \n    hostlen=256, serv=0x0, servlen=0, flags=1) at src/libproxychains.c:484\nBreakpoint 1, pc_getnameinfo (sa=0x3e2eb6acee0, salen=0, host=0x7f7ffffe6760 \" l\\177\\177\", \n    hostlen=256, serv=0x0, servlen=0, flags=1) at src/libproxychains.c:484\nget_hostfile_hostname_ipaddr: getnameinfo failed\n\nHere is the output: \n\nDEBUG:pid[12385]:pc_getnameinfo\nDEBUG:SOCKFAMILY(_sa) == AF_INET: 1\nDEBUG:SOCKFAMILY(_sa) == AF_INET6: 0\nDEBUG:hostlen=256\nDEBUG:servlen=32\nDEBUG:BRANCH 2\nDEBUG:salen=16, sizeof=16\nDEBUG:BRANCH 3\n DEBUG:BRANCH 4\nDEBUG:OUT...\nDEBUG:RETURN 0!\nDEBUG:pid[12385]:connect\nDEBUG:target: 192.168.1.10\nDEBUG:port: 22\nDEBUG:pid[12385]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:8888\n[proxychains] Strict chain  ...  127.0.0.1:8888 DEBUG:pid[12385]:timed_connect\nDEBUG:\nconnect ret=0\nDEBUG:pid[12385]:chain_step\n ...  192.168.1.10:22 DEBUG:pid[12385]:tunnel_to\nDEBUG:host dns \n ...  OK\nDEBUG:pid[12385]:pc_getnameinfo\nDEBUG:SOCKFAMILY(_sa) == AF_INET: 1\nDEBUG:SOCKFAMILY(_sa) == AF_INET6: 0\nDEBUG:hostlen=256\nDEBUG:servlen=0\nDEBUG:BRANCH 2\nDEBUG:salen=16, sizeof=16\nDEBUG:BRANCH 3\n DEBUG:BRANCH 4\nDEBUG:OUT...\nDEBUG:RETURN 0!\nDEBUG:freeaddrinfo 0xce46ba17000 \nDEBUG:pid[12385]:proxy_freeaddrinfo\nDEBUG:pid[12385]:pc_getnameinfo\nDEBUG:SOCKFAMILY(_sa) == AF_INET: 1\nDEBUG:SOCKFAMILY(_sa) == AF_INET6: 0\nDEBUG:hostlen=256\nDEBUG:servlen=0\nDEBUG:BRANCH 2\nDEBUG:salen=0, sizeof=16\nDEBUG:RETURN EAI_FAMILY \nget_hostfile_hostname_ipaddr: getnameinfo failed\n. No change apparently with the updated pc_getnameinfo. I'll try to have a closer look the coming week. \n. \n",
    "rkanavath": "any update on this issue?\n. any update on this issue?\n. ",
    "zorro765": "you can parse either of them.\n. you can parse either of them.\n. ",
    "xorwhat": "I'm using proxychains-ng 4.10-1 on Arch Linux.\nMy config:\nrandom_chain\nchain_len = 1\nproxy_dns \nremote_dns_subnet 224\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nlocalnet 127.0.0.0/255.0.0.0 \nlocalnet 192.168.0.0/255.255.0.0\nsocks4  127.0.0.1 9050\nOther ports seem to work. When I comment out the localnet 192.168.0.0/255.255.0.0 entry,\nit shows me a lot of denied connections:\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  cloud.genymotion.com:443  ...  OK\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24810 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24810 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24800 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24800 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:22469 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:22469 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:22666 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:22666 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24810 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24810 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24800 <--denied\n[...]\nAnd, when I uncomment it again, it just shows me that the connection on port 25000 was denied.\n. Unfortunately it doesn't change anything.\nAlso, even if I write localnet 0.0.0.0/0.0.0.0 (which should allow all connections, right?) and comment out every other localnet stuff I get the same error.\n. I'm sorry, I too didn't omit [ProxyList].\nAnd yes, it works if I use the software without proxychains. I just noticed it prints out \nOpenGL connected to 192.168.57.101:25000\nPort 22468 will be used for OpenGL data connections\n, so the issue might have to do something with OpenGL. It seems like proxychains won't let OpenGL connect.\n. I'm using proxychains-ng 4.10-1 on Arch Linux.\nMy config:\nrandom_chain\nchain_len = 1\nproxy_dns \nremote_dns_subnet 224\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nlocalnet 127.0.0.0/255.0.0.0 \nlocalnet 192.168.0.0/255.255.0.0\nsocks4  127.0.0.1 9050\nOther ports seem to work. When I comment out the localnet 192.168.0.0/255.255.0.0 entry,\nit shows me a lot of denied connections:\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  cloud.genymotion.com:443  ...  OK\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24810 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24810 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24800 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24800 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:22469 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:22469 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:22666 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:22666 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24810 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24810 <--denied\n[proxychains] Random chain  ...  127.0.0.1:9050  ...  192.168.57.101:24800 <--denied\n[...]\nAnd, when I uncomment it again, it just shows me that the connection on port 25000 was denied.\n. Unfortunately it doesn't change anything.\nAlso, even if I write localnet 0.0.0.0/0.0.0.0 (which should allow all connections, right?) and comment out every other localnet stuff I get the same error.\n. I'm sorry, I too didn't omit [ProxyList].\nAnd yes, it works if I use the software without proxychains. I just noticed it prints out \nOpenGL connected to 192.168.57.101:25000\nPort 22468 will be used for OpenGL data connections\n, so the issue might have to do something with OpenGL. It seems like proxychains won't let OpenGL connect.\n. ",
    "zhangkevd": "I have the same question\nstrict_chain\nproxy_dns \nremote_dns_subnet 224\ntcp_read_time_out 5000\ntcp_connect_time_out 8000\nsocks5  10.0.2.95 1080\n@xorwhat  have you solve this problem?\n@rofl0r  it's must be have some problem without proxychains.\n. I have the same question\nstrict_chain\nproxy_dns \nremote_dns_subnet 224\ntcp_read_time_out 5000\ntcp_connect_time_out 8000\nsocks5  10.0.2.95 1080\n@xorwhat  have you solve this problem?\n@rofl0r  it's must be have some problem without proxychains.\n. ",
    "Kolaris": "delete proxy_dns in /etc/proxychians.conf\nCan be used\n. delete proxy_dns in /etc/proxychians.conf\nCan be used\n. ",
    "dozer47528": "@rofl0r \nThanks\n. @rofl0r \nThanks\n. ",
    "HugoPresents": "is there any possible add this in future ? :smiley: \n. is there any possible add this in future ? :smiley: \n. ",
    "cyberstx": "Yes I know it's only TCP, I'm trying with those command lines :\nproxychains4 nmap -sS iphere\nproxychains4 nmap -sT iphere\nNone of them are working.\nIt's working with proxychains tho. I tried with proxychains 3.1 removed / installed.\n. Ok so, got some news.\nI'm using nmap version 7.01.\nYour command did not work - BUT - I found the problem. I got the error when I let the \"proxy_dns\" option on (uncommented). Without this option it works perfectly. I'm changing the DNS in my resolv.conf to openNIC ones so I think this way I'm still able to prevents DNS leak but not through proxychains right?\n. Yes I know it's only TCP, I'm trying with those command lines :\nproxychains4 nmap -sS iphere\nproxychains4 nmap -sT iphere\nNone of them are working.\nIt's working with proxychains tho. I tried with proxychains 3.1 removed / installed.\n. Ok so, got some news.\nI'm using nmap version 7.01.\nYour command did not work - BUT - I found the problem. I got the error when I let the \"proxy_dns\" option on (uncommented). Without this option it works perfectly. I'm changing the DNS in my resolv.conf to openNIC ones so I think this way I'm still able to prevents DNS leak but not through proxychains right?\n. ",
    "iv4nuk0": "Hello, I have the same problem and I can not answer, and tried the above command with the interface and does not work and change the DNS does not work, use the nmap version 7.01 and proxychains 4, the error is this:\nStarting Nmap 7.01 ( https://nmap.org ) at 2016-02-08 15:10 CET\nnmap: netutil.cc:1350: int collect_dnet_interfaces(const intf_entry_, void_): Assertion rc == 0' failed.\nAbortado\nthx\n. Hello, I have the same problem and I can not answer, and tried the above command with the interface and does not work and change the DNS does not work, use the nmap version 7.01 and proxychains 4, the error is this:\nStarting Nmap 7.01 ( https://nmap.org ) at 2016-02-08 15:10 CET\nnmap: netutil.cc:1350: int collect_dnet_interfaces(const intf_entry_, void_): Assertionrc == 0' failed.\nAbortado\nthx\n. ",
    "leebaird": "Still have the same issue. Modifying the conf file does not work.. Still having the same issue with v4.11\n. Still have the same issue. Modifying the conf file does not work.. Still having the same issue with v4.11\n. ",
    "radmanxu": "When you close the \"proxy-dns\" ,it looks like works ,but you will use your true ip to scan !!!. https://security.stackexchange.com/questions/122561/how-to-use-nmap-through-proxychains. When you close the \"proxy-dns\" ,it looks like works ,but you will use your true ip to scan !!!. https://security.stackexchange.com/questions/122561/how-to-use-nmap-through-proxychains. ",
    "Qusic": "proxychains hooks posix socket API. However iOS(and simulator as well) doesn't use posix API to access network. NS-related network API are actually handled by a daemon called networkd which implements TCP from scratch to support MPTCP.\n. proxychains hooks posix socket API. However iOS(and simulator as well) doesn't use posix API to access network. NS-related network API are actually handled by a daemon called networkd which implements TCP from scratch to support MPTCP.\n. ",
    "minimedj": "@Qusic thank you very much for detailed answer!\nSo, is it possible to proxy iOS Simulator somehow? :open_mouth: \n. @Qusic thank you very much for detailed answer!\nSo, is it possible to proxy iOS Simulator somehow? :open_mouth: \n. ",
    "Programming4life": "@rofl0r I didnt build the toolchain it was prebuilt. I tried building it but was gettings errors everywhere and gave up. Is there another way to solve this without building the toolchain? The embedded device uses \"Busybox\" if that helps with anything.\n. Solved it I ended up using Ubuntu 16.04 witch already has a toolchain for sh4 witch seems to work. Thanks for the tips.\n. @theman480 Why do you need to do this on windows? Do you want to intercept traffic?\n. @rofl0r I didnt build the toolchain it was prebuilt. I tried building it but was gettings errors everywhere and gave up. Is there another way to solve this without building the toolchain? The embedded device uses \"Busybox\" if that helps with anything.\n. Solved it I ended up using Ubuntu 16.04 witch already has a toolchain for sh4 witch seems to work. Thanks for the tips.\n. @theman480 Why do you need to do this on windows? Do you want to intercept traffic?\n. ",
    "bobbuilder123": "I installed it and it now seems to work but when I run: proxychains4 open -a /Applications/Firefox.app http://whatsmyip.org, it would print my real ip. Would you have an idea why?\n. I have a question I must ask: when performing a syn scan on https://www.google.ca, I can see that the destination is indeed 184.150.182.231 (google's ip) and not my tor's proxy. Would you know why? Is it something I did not understand about networking or would it be a normal behavior?\n. I installed it and it now seems to work but when I run: proxychains4 open -a /Applications/Firefox.app http://whatsmyip.org, it would print my real ip. Would you have an idea why?\n. I have a question I must ask: when performing a syn scan on https://www.google.ca, I can see that the destination is indeed 184.150.182.231 (google's ip) and not my tor's proxy. Would you know why? Is it something I did not understand about networking or would it be a normal behavior?\n. ",
    "XasaKura": "I have  use  brew install  proxychains-ng --universal  but still have the same issue with v4.11\nPS:\noutput:\n==> ./configure --prefix=/usr/local/Cellar/proxychains-ng/4.11 --sysconfdir=/usr/local/Cellar/proxychains-ng/4.11/etc --fat-binary\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... yes\nchecking whether $CC defines __OpenBSD__ ... no\nConfiguring a fat binary for i386 and x86_64\nDone, now run make && make install\nAND  SIP:\ncsrutil status\nSystem Integrity Protection status: disabled.\nhomebrew config:\nhttps://github.com/Homebrew/homebrew-core/blob/master/Formula/proxychains-ng.rb\n. @rofl0r   I only copy the part of configure\n. I have  use  brew install  proxychains-ng --universal  but still have the same issue with v4.11\nPS:\noutput:\n==> ./configure --prefix=/usr/local/Cellar/proxychains-ng/4.11 --sysconfdir=/usr/local/Cellar/proxychains-ng/4.11/etc --fat-binary\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines __u6_addr.__u6_addr16 ... yes\nchecking whether $CC defines __OpenBSD__ ... no\nConfiguring a fat binary for i386 and x86_64\nDone, now run make && make install\nAND  SIP:\ncsrutil status\nSystem Integrity Protection status: disabled.\nhomebrew config:\nhttps://github.com/Homebrew/homebrew-core/blob/master/Formula/proxychains-ng.rb\n. @rofl0r   I only copy the part of configure\n. ",
    "awar": "@bobbuilder123 This can resolve your problem.\nuninstalling your proxychain on brew with rmtree and install again this way brew install proxychains-ng --universal\n. @yangnw have you uninstalled with rmtree brew rmtree proxychains-ng if you haven't rmtree package you can install it whit brew tap beeftornado/rmtree && brew install brew-rmtree and next install brew install proxychains-ng --universal. I have osx yosemite and work correctly\n. @bobbuilder123 This can resolve your problem.\nuninstalling your proxychain on brew with rmtree and install again this way brew install proxychains-ng --universal\n. @yangnw have you uninstalled with rmtree brew rmtree proxychains-ng if you haven't rmtree package you can install it whit brew tap beeftornado/rmtree && brew install brew-rmtree and next install brew install proxychains-ng --universal. I have osx yosemite and work correctly\n. ",
    "yangnw": "same problem here.\nfirst, installed with brew without --universal. works but not with system bins. \nthen disabled SIP. works for a few minutes after startup. but then quite suddenly this error shows up.\nbrew remove and brew install --universal, but still doesn't work.\ncloned and ./configure --fat-binary. still doesn't work.\nI will reenable SIP to see if this is fixed.\n. ./configure --fat-binary\n\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines u6_addr.__u6_addr16 ... yes\nchecking whether $CC defines __OpenBSD ... no\nConfiguring a fat binary for i386 and x86_64\nDone, now run make && make install\n\nmake\n\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/core.o src/core.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/common.o src/common.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/allocator_thread.o src/allocator_thread.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/ip_type.o src/ip_type.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/hostsreader.o src/hostsreader.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/hash.o src/hash.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/debug.o src/debug.c\ncc -fPIC  -ldl -lpthread -arch i386 -arch x86_64 -Wl,-install_name,libproxychains4.dylib  \\\n      -shared -o libproxychains4.dylib src/nameinfo.o src/version.o src/core.o src/common.o src/libproxychains.o src/allocator_thread.o src/ip_type.o src/hostsreader.o src/hash.o src/debug.o\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/main.o src/main.c\ncc src/main.o src/common.o  -o proxychains4\n\ncsrutil status\n\nSystem Integrity Protection status: disabled.\n\n./proxychains4 brew update\n\n[proxychains] config file found: /Users/Yang/.proxychains/proxychains.conf\n[proxychains] preloading ./libproxychains4.dylib\ndyld: warning: could not load inserted library './libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n  ./libproxychains4.dylib: code signing blocked mmap() of './libproxychains4.dylib'\ndyld: warning: could not load inserted library './libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n  ./libproxychains4.dylib: code signing blocked mmap() of './libproxychains4.dylib'\ndyld: warning: could not load inserted library './libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n  ./libproxychains4.dylib: code signing blocked mmap() of './libproxychains4.dylib'\n^C\n. re-enabled SIP and restarted, now works again.\nbut system binaries do not work now, as before I disabled SIP. \n\n@awar it's probably due to macOS Sierra messing with SIP or something. \n. @HTNecro @lucklove I've enabled SIP, and now it works with the brew build of proxychains.\nThe downside is that you can't proxy-chain a binary in /usr/bin and other system paths, etc. curl. to use it, move the binary away or use proxychains4 wget -O - $url.\nSame behavior regardless built from source or homebrew build. This should have nothing to do with homebrew. Try enabling SIP if you have disabled it before.\n. @HTNecro update: brew seems to use to the system curl regardless of the path, so I have to run etc. ALL_PROXY=socks5://127.0.0.1:1080 brew upgrade to get it working.. same problem here.\nfirst, installed with brew without --universal. works but not with system bins. \nthen disabled SIP. works for a few minutes after startup. but then quite suddenly this error shows up.\nbrew remove and brew install --universal, but still doesn't work.\ncloned and ./configure --fat-binary. still doesn't work.\nI will reenable SIP to see if this is fixed.\n. ./configure --fat-binary\n\nchecking whether netinet/in.h defines s6_addr16 ... no\nchecking whether netinet/in.h defines u6_addr.__u6_addr16 ... yes\nchecking whether $CC defines __OpenBSD ... no\nConfiguring a fat binary for i386 and x86_64\nDone, now run make && make install\n\nmake\n\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/nameinfo.o src/nameinfo.c\nprintf '#define VERSION \"%s\"\\n' \"$(sh tools/version.sh)\" > src/version.h\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/version.o src/version.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/core.o src/core.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/common.o src/common.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/libproxychains.o src/libproxychains.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/allocator_thread.o src/allocator_thread.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/ip_type.o src/ip_type.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/hostsreader.o src/hostsreader.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/hash.o src/hash.c\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/debug.o src/debug.c\ncc -fPIC  -ldl -lpthread -arch i386 -arch x86_64 -Wl,-install_name,libproxychains4.dylib  \\\n      -shared -o libproxychains4.dylib src/nameinfo.o src/version.o src/core.o src/common.o src/libproxychains.o src/allocator_thread.o src/ip_type.o src/hostsreader.o src/hash.o src/debug.o\ncc -DSUPER_SECURE -Ds6_addr16=__u6_addr.__u6_addr16 -Ds6_addr32=__u6_addr.__u6_addr32 -Wall -O0 -g -std=c99 -D_GNU_SOURCE -pipe  -DIS_MAC=1 -arch i386 -arch x86_64 -DLIB_DIR=\\\"/usr/local/lib\\\" -DSYSCONFDIR=\\\"/usr/local/etc\\\" -DDLL_NAME=\\\"libproxychains4.dylib\\\"  -fPIC -c -o src/main.o src/main.c\ncc src/main.o src/common.o  -o proxychains4\n\ncsrutil status\n\nSystem Integrity Protection status: disabled.\n\n./proxychains4 brew update\n\n[proxychains] config file found: /Users/Yang/.proxychains/proxychains.conf\n[proxychains] preloading ./libproxychains4.dylib\ndyld: warning: could not load inserted library './libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n  ./libproxychains4.dylib: code signing blocked mmap() of './libproxychains4.dylib'\ndyld: warning: could not load inserted library './libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n  ./libproxychains4.dylib: code signing blocked mmap() of './libproxychains4.dylib'\ndyld: warning: could not load inserted library './libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n  ./libproxychains4.dylib: code signing blocked mmap() of './libproxychains4.dylib'\n^C\n. re-enabled SIP and restarted, now works again.\nbut system binaries do not work now, as before I disabled SIP. \n\n@awar it's probably due to macOS Sierra messing with SIP or something. \n. @HTNecro @lucklove I've enabled SIP, and now it works with the brew build of proxychains.\nThe downside is that you can't proxy-chain a binary in /usr/bin and other system paths, etc. curl. to use it, move the binary away or use proxychains4 wget -O - $url.\nSame behavior regardless built from source or homebrew build. This should have nothing to do with homebrew. Try enabling SIP if you have disabled it before.\n. @HTNecro update: brew seems to use to the system curl regardless of the path, so I have to run etc. ALL_PROXY=socks5://127.0.0.1:1080 brew upgrade to get it working.. ",
    "HTNecro": "@yangnw I have same problem, does brew update work correctly now?\n. @yangnw I have same problem, does brew update work correctly now?\n. ",
    "lucklove": "The same with me.\n. The same with me.\n. ",
    "crapthings": "open terminal with osx recovery mode\ncsrutil disable\nreboot\nbrew tap beeftornado/rmtree && brew install brew-rmtree\nbrew install proxychains-ng\n~/.proxychains/proxychains.conf\n```\nstrict_chain\nproxy_dns\nremote_dns_subnet 224\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nlocalnet 127.0.0.0/255.0.0.0\nquiet_mode\n[ProxyList]\nsocks5  127.0.0.1 1080\n```\ncsrutil enable. open terminal with osx recovery mode\ncsrutil disable\nreboot\nbrew tap beeftornado/rmtree && brew install brew-rmtree\nbrew install proxychains-ng\n~/.proxychains/proxychains.conf\n```\nstrict_chain\nproxy_dns\nremote_dns_subnet 224\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nlocalnet 127.0.0.0/255.0.0.0\nquiet_mode\n[ProxyList]\nsocks5  127.0.0.1 1080\n```\ncsrutil enable. ",
    "motecshine": "@crapthings  its work for me. @crapthings  its work for me. ",
    "jinfagang": "same issue, I think I am going fked up by this anoying problem. Any one occured this on macOS sierra?. same issue, I think I am going fked up by this anoying problem. Any one occured this on macOS sierra?. ",
    "louisabraham": "@jinfagang I had no problem two months ago, but now have the same issue\u2026. Actually, I solved this problem by building from source.\nEDIT: (my bad, I forgot between yesterday, I edit to make it clear to everyone)\nOn OS X you just have to run \ngit clone https://github.com/rofl0r/proxychains-ng\ncd proxychains-ng\n./configure --prefix=/usr/local --bindir=/usr/local/bin --libdir=/usr/local/lib --fat-binary\nmake\nmake install\n\n. @gregakinman what is your error message?. @gregakinman That's absolutely not the same problem! Use sudo. @jinfagang I had no problem two months ago, but now have the same issue\u2026. Actually, I solved this problem by building from source.\nEDIT: (my bad, I forgot between yesterday, I edit to make it clear to everyone)\nOn OS X you just have to run \ngit clone https://github.com/rofl0r/proxychains-ng\ncd proxychains-ng\n./configure --prefix=/usr/local --bindir=/usr/local/bin --libdir=/usr/local/lib --fat-binary\nmake\nmake install\n\n. @gregakinman what is your error message?. @gregakinman That's absolutely not the same problem! Use sudo. ",
    "gregakinman": "The above steps did not work for me on OS X 10.11.6.... @louisabraham \n$ proxychains4 ./gradlew idea --no-daemon\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading proxychains-ng/libproxychains4.dylib\nproxychains can't load process....: Permission denied.     $ brew install proxychains-ng --universal\nWarning: proxychains-ng: this formula has no --universal option so it will be ignored!\n\n$ brew --version\nHomebrew 1.1.12\nHomebrew/homebrew-core (git revision 600f; last commit 2017-04-10)\n\nBut I'm still on OSX 10.11.6 so if this is an El Cap vs. Sierra thing then I'll see myself out.. The above steps did not work for me on OS X 10.11.6.... @louisabraham \n$ proxychains4 ./gradlew idea --no-daemon\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading proxychains-ng/libproxychains4.dylib\nproxychains can't load process....: Permission denied.     $ brew install proxychains-ng --universal\nWarning: proxychains-ng: this formula has no --universal option so it will be ignored!\n\n$ brew --version\nHomebrew 1.1.12\nHomebrew/homebrew-core (git revision 600f; last commit 2017-04-10)\n\nBut I'm still on OSX 10.11.6 so if this is an El Cap vs. Sierra thing then I'll see myself out.. ",
    "iFurySt": "brew install proxychains-ng --universal\nit work for me (macOS Sierra 10.12.3). brew install proxychains-ng --universal\nit work for me (macOS Sierra 10.12.3). ",
    "cnlonlyrain": "@louisabraham It work for me thanks!. @louisabraham It work for me thanks!. ",
    "geekwutom": "The above steps did not work for me on OS X 10.12.5... The above steps did not work for me on OS X 10.12.5... ",
    "yuseferi": "I've tried all solutions in MAC OS but no one works for me and still facing with \n\nproxychains4 curl twitter.com\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.12_1/lib/libproxychains4.dylib. I've tried all solutions in MAC OS but no one works for me and still facing with \nproxychains4 curl twitter.com\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.12_1/lib/libproxychains4.dylib. \n",
    "oldsharp": "That's embarrassing I forgot to continue...\nAnyway, here's the result:\n``\n$ lldb proxychains4\n(lldb) target create \"proxychains4\"\nCurrent executable set to 'proxychains4' (x86_64).\n(lldb) run /usr/local/bin/alpine\nProcess 8804 launched: '/usr/local/bin/proxychains4' (x86_64)\n[proxychains] config file found: /Users/ray/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\nProcess 8804 stopped\n* thread #1: tid = 0x227b6, 0x00007fff5fc01000 dyld_dyld_start, stop reason = exec\n    frame #0: 0x00007fff5fc01000 dyld_dyld_start\ndyld_dyld_start:\n->  0x7fff5fc01000 <+0>: popq   %rdi\n    0x7fff5fc01001 <+1>: pushq  $0x0\n    0x7fff5fc01003 <+3>: movq   %rsp, %rbp\n    0x7fff5fc01006 <+6>: andq   $-0x10, %rsp\n(lldb) c\nProcess 8804 resuming\nProcess 8804 stopped\n* thread #1: tid = 0x227b6, 0x00007fff9955ca1f libheimdal-asn1.dylibder_free_integer + 4, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n    frame #0: 0x00007fff9955ca1f libheimdal-asn1.dylibder_free_integer + 4\nlibheimdal-asn1.dylib`der_free_integer:\n->  0x7fff9955ca1f <+4>:  movl   $0x0, (%rdi)\n    0x7fff9955ca25 <+10>: popq   %rbp\n    0x7fff9955ca26 <+11>: retq\nlibheimdal-asn1.dylibder_free_unsigned:\n    0x7fff9955ca27 <+0>:  pushq  %rbp\n(lldb) bt all\n* thread #1: tid = 0x227b6, 0x00007fff9955ca1f libheimdal-asn1.dylibder_free_integer + 4, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n  * frame #0: 0x00007fff9955ca1f libheimdal-asn1.dylibder_free_integer + 4\n    frame #1: 0x00007fff9956037d libheimdal-asn1.dylib_asn1_free + 246\n    frame #2: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #3: 0x00007fff9956042b libheimdal-asn1.dylib_asn1_free + 420\n    frame #4: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #5: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #6: 0x00007fff9956042b libheimdal-asn1.dylib_asn1_free + 420\n    frame #7: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #8: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #9: 0x00007fff9955f77e libheimdal-asn1.dylib_asn1_free_top + 18\n    frame #10: 0x00007fff9d967bad Heimdalkrb5_free_principal + 22\n    frame #11: 0x00007fff969bf6a3 Kerberoskrb5_free_principal + 51\n    frame #12: 0x00007fffa1583722 GSS_gsskrb5_release_name + 66\n    frame #13: 0x00007fffa158c99c GSS_gss_mg_release_name + 63\n    frame #14: 0x00007fff9296c0a3 CoreFoundationCFRelease + 371\n    frame #15: 0x00007fffa158d018 GSSgss_release_name + 35\n    frame #16: 0x00000001001ad0f9 alpineauth_gssapi_valid + 200\n    frame #17: 0x00000001001c9102 alpineauth_link + 28\n    frame #18: 0x000000010001ec47 alpinemain + 1159\n    frame #19: 0x00007fff968085ad libdyld.dylibstart + 1\n    frame #20: 0x00007fff968085ad libdyld.dylib`start + 1\nthread #2: tid = 0x227d5, 0x00007fffa124f176 libsystem_kernel.dylib__select + 10\n    frame #0: 0x00007fffa124f176 libsystem_kernel.dylib__select + 10\n    frame #1: 0x0000000100557aa6 libproxychains4.dylibgetmessage + 129\n    frame #2: 0x0000000100557cbc libproxychains4.dylibthreadfunc + 56\n    frame #3: 0x00007fff9a702c13 libsystem_pthread.dylib_pthread_body + 131\n    frame #4: 0x00007fff9a702b90 libsystem_pthread.dylib_pthread_start + 168\n    frame #5: 0x00007fff9a700375 libsystem_pthread.dylib`thread_start + 13\nthread #4: tid = 0x227d7, 0x00007fffa124fff6 libsystem_kernel.dylibkevent_qos + 10, queue = 'com.apple.libdispatch-manager'\n    frame #0: 0x00007fffa124fff6 libsystem_kernel.dylibkevent_qos + 10\n    frame #1: 0x00007fff99322099 libdispatch.dylib_dispatch_mgr_invoke + 216\n    frame #2: 0x00007fff99321d01 libdispatch.dylib_dispatch_mgr_thread + 52\n``\n. Googled with theEXC_I386_GPFLT` error code and found this thread on stackoverflow.\nHope this is helpful to address the issue.\n. > maybe try the same version you used on linux\nThe Alpine version on my Linux box is exactly the same as the one I used on my Mac.\nIn fact they were built from the same copy of source code, on different platform.\nWhat I tried: linux-src-build, osx-homebrew, osx-src-build, all of them are alpine v2.20, built from exactly the same source code.\n\nit's almost certain the bug happens without proxychains as well\n\nIt turned out the Linux one worked well (no matter with or without proxychains), while the Mac one crashed every time I ran it with proxychains, as the Homebrew's Alpine did.\nAnother wired thing is, if I try to run alpine alone on Mac (without proxychains), it will not crash.\n\nor report the bug to the devs\n\nYes I will try to contact the current maintainer of Alpine to report the problem.\n. Tried with 635ded3 but still got Segmentation fault: 11.\n. That's embarrassing I forgot to continue...\nAnyway, here's the result:\n``\n$ lldb proxychains4\n(lldb) target create \"proxychains4\"\nCurrent executable set to 'proxychains4' (x86_64).\n(lldb) run /usr/local/bin/alpine\nProcess 8804 launched: '/usr/local/bin/proxychains4' (x86_64)\n[proxychains] config file found: /Users/ray/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\nProcess 8804 stopped\n* thread #1: tid = 0x227b6, 0x00007fff5fc01000 dyld_dyld_start, stop reason = exec\n    frame #0: 0x00007fff5fc01000 dyld_dyld_start\ndyld_dyld_start:\n->  0x7fff5fc01000 <+0>: popq   %rdi\n    0x7fff5fc01001 <+1>: pushq  $0x0\n    0x7fff5fc01003 <+3>: movq   %rsp, %rbp\n    0x7fff5fc01006 <+6>: andq   $-0x10, %rsp\n(lldb) c\nProcess 8804 resuming\nProcess 8804 stopped\n* thread #1: tid = 0x227b6, 0x00007fff9955ca1f libheimdal-asn1.dylibder_free_integer + 4, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n    frame #0: 0x00007fff9955ca1f libheimdal-asn1.dylibder_free_integer + 4\nlibheimdal-asn1.dylib`der_free_integer:\n->  0x7fff9955ca1f <+4>:  movl   $0x0, (%rdi)\n    0x7fff9955ca25 <+10>: popq   %rbp\n    0x7fff9955ca26 <+11>: retq\nlibheimdal-asn1.dylibder_free_unsigned:\n    0x7fff9955ca27 <+0>:  pushq  %rbp\n(lldb) bt all\n* thread #1: tid = 0x227b6, 0x00007fff9955ca1f libheimdal-asn1.dylibder_free_integer + 4, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n  * frame #0: 0x00007fff9955ca1f libheimdal-asn1.dylibder_free_integer + 4\n    frame #1: 0x00007fff9956037d libheimdal-asn1.dylib_asn1_free + 246\n    frame #2: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #3: 0x00007fff9956042b libheimdal-asn1.dylib_asn1_free + 420\n    frame #4: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #5: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #6: 0x00007fff9956042b libheimdal-asn1.dylib_asn1_free + 420\n    frame #7: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #8: 0x00007fff995603c0 libheimdal-asn1.dylib_asn1_free + 313\n    frame #9: 0x00007fff9955f77e libheimdal-asn1.dylib_asn1_free_top + 18\n    frame #10: 0x00007fff9d967bad Heimdalkrb5_free_principal + 22\n    frame #11: 0x00007fff969bf6a3 Kerberoskrb5_free_principal + 51\n    frame #12: 0x00007fffa1583722 GSS_gsskrb5_release_name + 66\n    frame #13: 0x00007fffa158c99c GSS_gss_mg_release_name + 63\n    frame #14: 0x00007fff9296c0a3 CoreFoundationCFRelease + 371\n    frame #15: 0x00007fffa158d018 GSSgss_release_name + 35\n    frame #16: 0x00000001001ad0f9 alpineauth_gssapi_valid + 200\n    frame #17: 0x00000001001c9102 alpineauth_link + 28\n    frame #18: 0x000000010001ec47 alpinemain + 1159\n    frame #19: 0x00007fff968085ad libdyld.dylibstart + 1\n    frame #20: 0x00007fff968085ad libdyld.dylib`start + 1\nthread #2: tid = 0x227d5, 0x00007fffa124f176 libsystem_kernel.dylib__select + 10\n    frame #0: 0x00007fffa124f176 libsystem_kernel.dylib__select + 10\n    frame #1: 0x0000000100557aa6 libproxychains4.dylibgetmessage + 129\n    frame #2: 0x0000000100557cbc libproxychains4.dylibthreadfunc + 56\n    frame #3: 0x00007fff9a702c13 libsystem_pthread.dylib_pthread_body + 131\n    frame #4: 0x00007fff9a702b90 libsystem_pthread.dylib_pthread_start + 168\n    frame #5: 0x00007fff9a700375 libsystem_pthread.dylib`thread_start + 13\nthread #4: tid = 0x227d7, 0x00007fffa124fff6 libsystem_kernel.dylibkevent_qos + 10, queue = 'com.apple.libdispatch-manager'\n    frame #0: 0x00007fffa124fff6 libsystem_kernel.dylibkevent_qos + 10\n    frame #1: 0x00007fff99322099 libdispatch.dylib_dispatch_mgr_invoke + 216\n    frame #2: 0x00007fff99321d01 libdispatch.dylib_dispatch_mgr_thread + 52\n``\n. Googled with theEXC_I386_GPFLT` error code and found this thread on stackoverflow.\nHope this is helpful to address the issue.\n. > maybe try the same version you used on linux\nThe Alpine version on my Linux box is exactly the same as the one I used on my Mac.\nIn fact they were built from the same copy of source code, on different platform.\nWhat I tried: linux-src-build, osx-homebrew, osx-src-build, all of them are alpine v2.20, built from exactly the same source code.\n\nit's almost certain the bug happens without proxychains as well\n\nIt turned out the Linux one worked well (no matter with or without proxychains), while the Mac one crashed every time I ran it with proxychains, as the Homebrew's Alpine did.\nAnother wired thing is, if I try to run alpine alone on Mac (without proxychains), it will not crash.\n\nor report the bug to the devs\n\nYes I will try to contact the current maintainer of Alpine to report the problem.\n. Tried with 635ded3 but still got Segmentation fault: 11.\n. ",
    "xing393939": "how to use host my.cdn.proxy.provider.com ?. how to use host my.cdn.proxy.provider.com ?. ",
    "18601673727": "Thanks for the quick reply, yes, I'm using10.x.x.x subnet for my lan but setting remote_dns_subnet to 10 does not work.\n$ proxychains4 docker-machine create --driver virtualbox default \n[proxychains] config file found: /Users/xxx/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\nRunning pre-create checks...\n(dev) Unable to get the latest Boot2Docker ISO release version:  Get https://api.github.com/repos/boot2docker/boot2docker/releases/latest: dial tcp 10.0.0.1:443: getsockopt: operation timed out\nCreating machine...\n(dev) Unable to get the latest Boot2Docker ISO release version:  Get https://api.github.com/repos/boot2docker/boot2docker/releases/latest: dial tcp 10.0.0.1:443: getsockopt: operation timed out\n. Fuxk \"General Electric Company\", I just need my docker machine running.\n. No, it doesn't bro, do I have to buy a new router?\n. @rofl0r ping also doesn't work btw, I'll try to change localnet config tomorrow, let's see if it works = ]\n. Thanks for the quick reply, yes, I'm using10.x.x.x subnet for my lan but setting remote_dns_subnet to 10 does not work.\n$ proxychains4 docker-machine create --driver virtualbox default \n[proxychains] config file found: /Users/xxx/.proxychains/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\nRunning pre-create checks...\n(dev) Unable to get the latest Boot2Docker ISO release version:  Get https://api.github.com/repos/boot2docker/boot2docker/releases/latest: dial tcp 10.0.0.1:443: getsockopt: operation timed out\nCreating machine...\n(dev) Unable to get the latest Boot2Docker ISO release version:  Get https://api.github.com/repos/boot2docker/boot2docker/releases/latest: dial tcp 10.0.0.1:443: getsockopt: operation timed out\n. Fuxk \"General Electric Company\", I just need my docker machine running.\n. No, it doesn't bro, do I have to buy a new router?\n. @rofl0r ping also doesn't work btw, I'll try to change localnet config tomorrow, let's see if it works = ]\n. ",
    "XadillaX": "I have the same problem.\nAnd when I changed it to 10, it shows:\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.dylib\n[proxychains] DLL init\n[proxychains] DLL init\n[proxychains] Strict chain  ...  172.16.11.14:1087  ...  github.com:22  ...  OK\n[proxychains] DLL init\n[proxychains] DLL init\n[proxychains] DLL init\nGit LFS: (0 of 7 files) 0 B / 122.51 MB\nPost https://api.github.com/lfs/XadillaX/aliyun-ons/objects/batch: x509: certificate is valid for , not api.github.com\nerror: failed to push some refs to 'git@github.com:XadillaX/aliyun-ons.git'\nAfter changing it to 3, it shows:\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.dylib\n[proxychains] DLL init\n[proxychains] DLL init\n[proxychains] Strict chain  ...  172.16.11.14:1087  ...  github.com:22  ...  OK\nWarning: Permanently added the RSA host key for IP address '3.0.0.1' to the list of known hosts.\n[proxychains] DLL init\n[proxychains] DLL init\n[proxychains] DLL init\nConnection to github.com closed by remote host.\nGit LFS: (0 of 7 files) 0 B / 122.51 MB\nPost https://api.github.com/lfs/XadillaX/aliyun-ons/objects/batch: dial tcp 3.0.0.1:443: i/o timeout\nerror: failed to push some refs to 'git@github.com:XadillaX/aliyun-ons.git'\n. I have the same problem.\nAnd when I changed it to 10, it shows:\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.dylib\n[proxychains] DLL init\n[proxychains] DLL init\n[proxychains] Strict chain  ...  172.16.11.14:1087  ...  github.com:22  ...  OK\n[proxychains] DLL init\n[proxychains] DLL init\n[proxychains] DLL init\nGit LFS: (0 of 7 files) 0 B / 122.51 MB\nPost https://api.github.com/lfs/XadillaX/aliyun-ons/objects/batch: x509: certificate is valid for , not api.github.com\nerror: failed to push some refs to 'git@github.com:XadillaX/aliyun-ons.git'\nAfter changing it to 3, it shows:\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.dylib\n[proxychains] DLL init\n[proxychains] DLL init\n[proxychains] Strict chain  ...  172.16.11.14:1087  ...  github.com:22  ...  OK\nWarning: Permanently added the RSA host key for IP address '3.0.0.1' to the list of known hosts.\n[proxychains] DLL init\n[proxychains] DLL init\n[proxychains] DLL init\nConnection to github.com closed by remote host.\nGit LFS: (0 of 7 files) 0 B / 122.51 MB\nPost https://api.github.com/lfs/XadillaX/aliyun-ons/objects/batch: dial tcp 3.0.0.1:443: i/o timeout\nerror: failed to push some refs to 'git@github.com:XadillaX/aliyun-ons.git'\n. ",
    "freeyang2018": "If you have an https proxy, e.g., use polipo's port 8123 to proxy socks5's port 1080\nYou can do it like below\nhttps_proxy=https://127.0.0.1:8123 nvm ls-remote\n. If you have an https proxy, e.g., use polipo's port 8123 to proxy socks5's port 1080\nYou can do it like below\nhttps_proxy=https://127.0.0.1:8123 nvm ls-remote\n. ",
    "outsinre": "For example:\n1. $ proxychains emacs --daemon file1.txt\nAfter editing, close emacs frame.\n2. $ emacsclient file2.txt\nEdit another file2. If trying to access the Internet during the 2nd edition, Emacs/Gnus is dead. No response! Have to pkill -TERM emacs.\n3. $ proxychains emacs (without daemon) works like a delightfully.\n4. Linux 64; proxychains-ng 4.10; Emacs 24.5.\n. Even the 1st step above does not work. Emacs is dead forever if Gnus trying to connect to email.\nFor proxychains emacsclient file2.txt does not work either.\nBTW, it's named proxychains instead of proxychains4.\n. For example:\n1. $ proxychains emacs --daemon file1.txt\nAfter editing, close emacs frame.\n2. $ emacsclient file2.txt\nEdit another file2. If trying to access the Internet during the 2nd edition, Emacs/Gnus is dead. No response! Have to pkill -TERM emacs.\n3. $ proxychains emacs (without daemon) works like a delightfully.\n4. Linux 64; proxychains-ng 4.10; Emacs 24.5.\n. Even the 1st step above does not work. Emacs is dead forever if Gnus trying to connect to email.\nFor proxychains emacsclient file2.txt does not work either.\nBTW, it's named proxychains instead of proxychains4.\n. ",
    "xxxifan": "yes, I disabled proxy_dns and it can't launch either\n. yes, I disabled proxy_dns and it can't launch either\n. ",
    "ikzk": "I can confirm that netease-cloud-music, opera, chromium also do not work.\n. @rofl0r I never used gdb, so I am not sure whether I am doing it right.\nI executed proxychains4 chromium and then use gdb -p to attach to it. Then hit C-c for chromium and finally bt command gives me:\n```\n(gdb) bt\n0  0x00007f1bcbe597ed in nanosleep () from /usr/lib/libpthread.so.0\n1  0x000055c5dc7ddb23 in base::internal::SpinLockDelay(int volatile*, int, int) ()\n2  0x000055c5dc7dd9b4 in SpinLock::SlowLock() ()\n3  0x000055c5dc7d8495 in tcmalloc::ThreadCache::InitModule() ()\n4  0x000055c5e189fe75 in tc_calloc ()\n5  0x00007f1bd1ef4b42 in allocate_dtv () from /lib64/ld-linux-x86-64.so.2\n6  0x00007f1bd1ef54ce in _dl_allocate_tls () from /lib64/ld-linux-x86-64.so.2\n7  0x00007f1bcbe51009 in pthread_create@@GLIBC_2.2.5 () from /usr/lib/libpthread.so.0\n8  0x00007f1bd1c98fbc in ?? () from /usr/lib/libproxychains4.so\n9  0x00007f1bcbe57689 in __pthread_once_slow () from /usr/lib/libpthread.so.0\n10 0x00007f1bd1c982a6 in close () from /usr/lib/libproxychains4.so\n11 0x000055c5dc7e9139 in MmapSysAllocator::Alloc(unsigned long, unsigned long*, unsigned long) ()\n12 0x000055c5dc7e8c46 in DefaultSysAllocator::Alloc(unsigned long, unsigned long*, unsigned long) ()\n13 0x000055c5dc7e936b in TCMalloc_SystemAlloc(unsigned long, unsigned long*, unsigned long) ()\n14 0x000055c5dc7e0ff9 in tcmalloc::MetaDataAlloc(unsigned long) ()\n15 0x000055c5dc7e72f3 in tcmalloc::Static::InitStaticVars() ()\n16 0x000055c5dc7d84d5 in tcmalloc::ThreadCache::InitModule() ()\n17 0x000055c5e189cc65 in tc_malloc ()\n18 0x00007f1bca2969d8 in set_binding_values.part () from /usr/lib/libc.so.6\n19 0x00007f1bca296c9c in bindtextdomain () from /usr/lib/libc.so.6\n20 0x00007f1bc29a9e47 in ?? () from /usr/lib/libgpg-error.so.0\n21 0x00007f1bd1ef24aa in call_init.part () from /lib64/ld-linux-x86-64.so.2\n22 0x00007f1bd1ef25bb in _dl_init () from /lib64/ld-linux-x86-64.so.2\n23 0x00007f1bd1ee3dca in _dl_start_user () from /lib64/ld-linux-x86-64.so.2\n24 0x0000000000000003 in ?? ()\n25 0x00007fff50e3520b in ?? ()\n26 0x00007fff50e35226 in ?? ()\n27 0x00007fff50e35263 in ?? ()\n28 0x0000000000000000 in ?? ()\n```\n. It still does not work, but the backtrace becomes\n```\n(gdb) bt\n0  0x00007f5dd93697d0 in __nanosleep_nocancel () from /usr/lib/libpthread.so.0\n1  0x000055e253bf0b23 in base::internal::SpinLockDelay(int volatile*, int, int) ()\n2  0x000055e253bf09b4 in SpinLock::SlowLock() ()\n3  0x000055e253beb495 in tcmalloc::ThreadCache::InitModule() ()\n4  0x000055e258cb2e75 in tc_calloc ()\n5  0x00007f5dded9861f in ?? () from /usr/lib/libdl.so.2\n6  0x00007f5dded98088 in dlsym () from /usr/lib/libdl.so.2\n7  0x00007f5ddf1a80db in ?? () from /usr/lib/libproxychains4.so\n8  0x00007f5ddf1a81ab in close () from /usr/lib/libproxychains4.so\n9  0x000055e253bfc139 in MmapSysAllocator::Alloc(unsigned long, unsigned long*, unsigned long) ()\n10 0x000055e253bfbc46 in DefaultSysAllocator::Alloc(unsigned long, unsigned long*, unsigned long) ()\n11 0x000055e253bfc36b in TCMalloc_SystemAlloc(unsigned long, unsigned long*, unsigned long) ()\n12 0x000055e253bf3ff9 in tcmalloc::MetaDataAlloc(unsigned long) ()\n13 0x000055e253bfa2f3 in tcmalloc::Static::InitStaticVars() ()\n14 0x000055e253beb4d5 in tcmalloc::ThreadCache::InitModule() ()\n15 0x000055e258cafc65 in tc_malloc ()\n16 0x00007f5dd77a69d8 in set_binding_values.part () from /usr/lib/libc.so.6\n17 0x00007f5dd77a6c9c in bindtextdomain () from /usr/lib/libc.so.6\n18 0x00007f5dcfeb7e47 in ?? () from /usr/lib/libgpg-error.so.0\n19 0x00007f5ddf4024aa in call_init.part () from /lib64/ld-linux-x86-64.so.2\n20 0x00007f5ddf4025bb in _dl_init () from /lib64/ld-linux-x86-64.so.2\n---Type  to continue, or q  to quit---\n21 0x00007f5ddf3f3dca in _dl_start_user () from /lib64/ld-linux-x86-64.so.2\n22 0x0000000000000003 in ?? ()\n23 0x00007ffe6397f204 in ?? ()\n24 0x00007ffe6397f21f in ?? ()\n25 0x00007ffe6397f25c in ?? ()\n\n```\n. @rofl0r I can successfully launch these GUI applications now!\nThanks a lot for your work!\n. @yi-ji I just used the fixed master branch and it worked.. I can confirm that netease-cloud-music, opera, chromium also do not work.\n. @rofl0r I never used gdb, so I am not sure whether I am doing it right.\nI executed proxychains4 chromium and then use gdb -p to attach to it. Then hit C-c for chromium and finally bt command gives me:\n```\n(gdb) bt\n0  0x00007f1bcbe597ed in nanosleep () from /usr/lib/libpthread.so.0\n1  0x000055c5dc7ddb23 in base::internal::SpinLockDelay(int volatile*, int, int) ()\n2  0x000055c5dc7dd9b4 in SpinLock::SlowLock() ()\n3  0x000055c5dc7d8495 in tcmalloc::ThreadCache::InitModule() ()\n4  0x000055c5e189fe75 in tc_calloc ()\n5  0x00007f1bd1ef4b42 in allocate_dtv () from /lib64/ld-linux-x86-64.so.2\n6  0x00007f1bd1ef54ce in _dl_allocate_tls () from /lib64/ld-linux-x86-64.so.2\n7  0x00007f1bcbe51009 in pthread_create@@GLIBC_2.2.5 () from /usr/lib/libpthread.so.0\n8  0x00007f1bd1c98fbc in ?? () from /usr/lib/libproxychains4.so\n9  0x00007f1bcbe57689 in __pthread_once_slow () from /usr/lib/libpthread.so.0\n10 0x00007f1bd1c982a6 in close () from /usr/lib/libproxychains4.so\n11 0x000055c5dc7e9139 in MmapSysAllocator::Alloc(unsigned long, unsigned long*, unsigned long) ()\n12 0x000055c5dc7e8c46 in DefaultSysAllocator::Alloc(unsigned long, unsigned long*, unsigned long) ()\n13 0x000055c5dc7e936b in TCMalloc_SystemAlloc(unsigned long, unsigned long*, unsigned long) ()\n14 0x000055c5dc7e0ff9 in tcmalloc::MetaDataAlloc(unsigned long) ()\n15 0x000055c5dc7e72f3 in tcmalloc::Static::InitStaticVars() ()\n16 0x000055c5dc7d84d5 in tcmalloc::ThreadCache::InitModule() ()\n17 0x000055c5e189cc65 in tc_malloc ()\n18 0x00007f1bca2969d8 in set_binding_values.part () from /usr/lib/libc.so.6\n19 0x00007f1bca296c9c in bindtextdomain () from /usr/lib/libc.so.6\n20 0x00007f1bc29a9e47 in ?? () from /usr/lib/libgpg-error.so.0\n21 0x00007f1bd1ef24aa in call_init.part () from /lib64/ld-linux-x86-64.so.2\n22 0x00007f1bd1ef25bb in _dl_init () from /lib64/ld-linux-x86-64.so.2\n23 0x00007f1bd1ee3dca in _dl_start_user () from /lib64/ld-linux-x86-64.so.2\n24 0x0000000000000003 in ?? ()\n25 0x00007fff50e3520b in ?? ()\n26 0x00007fff50e35226 in ?? ()\n27 0x00007fff50e35263 in ?? ()\n28 0x0000000000000000 in ?? ()\n```\n. It still does not work, but the backtrace becomes\n```\n(gdb) bt\n0  0x00007f5dd93697d0 in __nanosleep_nocancel () from /usr/lib/libpthread.so.0\n1  0x000055e253bf0b23 in base::internal::SpinLockDelay(int volatile*, int, int) ()\n2  0x000055e253bf09b4 in SpinLock::SlowLock() ()\n3  0x000055e253beb495 in tcmalloc::ThreadCache::InitModule() ()\n4  0x000055e258cb2e75 in tc_calloc ()\n5  0x00007f5dded9861f in ?? () from /usr/lib/libdl.so.2\n6  0x00007f5dded98088 in dlsym () from /usr/lib/libdl.so.2\n7  0x00007f5ddf1a80db in ?? () from /usr/lib/libproxychains4.so\n8  0x00007f5ddf1a81ab in close () from /usr/lib/libproxychains4.so\n9  0x000055e253bfc139 in MmapSysAllocator::Alloc(unsigned long, unsigned long*, unsigned long) ()\n10 0x000055e253bfbc46 in DefaultSysAllocator::Alloc(unsigned long, unsigned long*, unsigned long) ()\n11 0x000055e253bfc36b in TCMalloc_SystemAlloc(unsigned long, unsigned long*, unsigned long) ()\n12 0x000055e253bf3ff9 in tcmalloc::MetaDataAlloc(unsigned long) ()\n13 0x000055e253bfa2f3 in tcmalloc::Static::InitStaticVars() ()\n14 0x000055e253beb4d5 in tcmalloc::ThreadCache::InitModule() ()\n15 0x000055e258cafc65 in tc_malloc ()\n16 0x00007f5dd77a69d8 in set_binding_values.part () from /usr/lib/libc.so.6\n17 0x00007f5dd77a6c9c in bindtextdomain () from /usr/lib/libc.so.6\n18 0x00007f5dcfeb7e47 in ?? () from /usr/lib/libgpg-error.so.0\n19 0x00007f5ddf4024aa in call_init.part () from /lib64/ld-linux-x86-64.so.2\n20 0x00007f5ddf4025bb in _dl_init () from /lib64/ld-linux-x86-64.so.2\n---Type  to continue, or q  to quit---\n21 0x00007f5ddf3f3dca in _dl_start_user () from /lib64/ld-linux-x86-64.so.2\n22 0x0000000000000003 in ?? ()\n23 0x00007ffe6397f204 in ?? ()\n24 0x00007ffe6397f21f in ?? ()\n25 0x00007ffe6397f25c in ?? ()\n\n```\n. @rofl0r I can successfully launch these GUI applications now!\nThanks a lot for your work!\n. @yi-ji I just used the fixed master branch and it worked.. ",
    "yi-ji": "@ikzk Hi there, I am happy to find out that you were doing the same thing (using proxychains for Netease Music) with me. \nI am still stuck in the same situation as described in https://github.com/rofl0r/proxychains-ng/issues/181, so could you kindly share more info about how you fixed this problem finally? That would be greatly helpful for me\ud83d\ude4f. Okay I just realized you are using NeteaseMusic for Linux...different thing then. @valkjsaaa Thanks but like I said at beginning, it shouldn't be SIP problem.... Hi @rofl0r ,\nFirst many thanks to your quick reply and kind help!\nThough not fully understanding, I tried your suggestion (as in https://github.com/yi-ji/proxychains-ng/commit/b631b0238c1a6202d50bacaecebdc8850c977496), compiled it and tested again, but unfortunately the outcome is exactly the same. \nI checked by running dtruss -f proxychains4 ./Contents/MacOS/NeteaseMusic again and the output log weren't changed at all.\nAlso, as you mentioned this change will make proxychains not work for ssh, but I tested, it still works for ssh. But I am pretty sure I made those changes as you told.\nSo, seems we haven't found the real reason causing the issue yet?. sorry for late reply.\nwell I did run\nmake install\n./tools/install.sh -D -m 644 libproxychains4.dylib /usr/local/lib/libproxychains4.dylib\n./tools/install.sh -D -m 755 proxychains4 /usr/local/bin/proxychains4\nand I verified it\nstat /usr/local/lib/libproxychains4.dylib\n16777220 33818559 -rw-r--r-- 1 jiyi admin 0 53960 \"Jul 17 10:32:28 2017\" \"Jul 17 10:32:28 2017\" \"Jul 17 10:32:28 2017\" \"Jul 17 10:32:28 2017\" 4096 112 0 /usr/local/lib/libproxychains4.dylib\nand also when I launch proxychains and the application, this dylib is surely accessed.\nIn addition, I complied version 4.11 (before issue #119) and it still doesn't work. An interesting thing is that someone is using proxychains for the same app as me in #119 but his problem is simply fixed by the master branch while I am not. TAT\nAnd finally an important observation: proxychains works for some apps such as firefox. But NeteaseMusic is not the only failed app either.. I updated the output info with DEBUG defined, in the first comment, top of this page. (I enabled close hook for full debug info.) It seems that the hooked connect function does not work well, returned to unhooked connect:\nif(!((fam  == AF_INET || fam == AF_INET6) && socktype == SOCK_STREAM))\n        return true_connect(sock, addr, len);\nSo I tried to comment out these two lines, and printed out fam, socktype, and I got this repeatedly (only this, nothing else):\nDEBUG:pid[34693]:connect\nDEBUG:fam is 32 != AF_INET and != AF_INET6, DEBUG:socktype is 2 != SOCK_STREAM\nDEBUG:target: 9.0.0.0\nDEBUG:port: 512\nDEBUG:pid[34693]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:9050\n[proxychains] Strict chain  ...  127.0.0.1:9050 DEBUG:pid[34693]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=61\n ...  timeout\nDEBUG:start_chain failed\nDEBUG:error\n The weirdest thing is that even if the above outputs look like proxychains is working, but still NeteaseMusic can work normally (I haven't set up the proxy server at port 9050 yet). This does not happen in Firefox case (Firefox cannot open webpages if proxy server is down).\nI will soon set up my proxy server and check whether simply removing those two lines will finally solve the problem.\nFor more info about this app, NeteaseMusic, I pasted outputs from lsof -i | grep Netease\nNeteaseMu 32165 jiyi   14u  IPv4       0t0  TCP localhost:62601->localhost:commplex-link (ESTABLISHED)\nNeteaseMu 32165 jiyi   36u  IPv4       0t0  TCP 192.168.11.33:62659->103.211.228.143:https (ESTABLISHED)\nNeteaseMu 32165 jiyi   40u  IPv4       0t0  TCP 192.168.11.33:62615->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   42u  IPv4       0t0  TCP 192.168.11.33:62660->103.211.228.143:https (ESTABLISHED)\nNeteaseMu 32165 jiyi   49u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   50u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   14u  IPv4       0t0  TCP localhost:62601->localhost:commplex-link (ESTABLISHED)\nNeteaseMu 32165 jiyi   36u  IPv4       0t0  TCP 192.168.11.33:62670->103.211.228.143:https (ESTABLISHED)\nNeteaseMu 32165 jiyi   40u  IPv4       0t0  TCP 192.168.11.33:62615->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   49u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   50u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   14u  IPv4       0t0  TCP localhost:62601->localhost:commplex-link (ESTABLISHED)\nNeteaseMu 32165 jiyi   40u  IPv4       0t0  TCP 192.168.11.33:62615->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   49u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   50u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   36u  IPv4       0t0  TCP 192.168.11.33:62672->103.211.228.143:https (ESTABLISHED)\nNeteaseMu 32165 jiyi   42u  IPv4       0t0  TCP 192.168.11.33:62678->103.211.228.143:https (ESTABLISHED)\nI think we are close to the answer...again I would like to thank you for your patience all the time :). stupid am I ... I noticed that socktype is 2 which is SOCK_DGRAM, and it is UDP-based.\nSeems this is the answer and no solution available, right...?\nThis confused me because what I want to forward to proxy server are GET and POST requests. They are HTTP requests and should base on TCP. Why didn't they appear in the debug info? (I am sure about GET and POST are sent from NeteaseMusic, shown by a web debugging software). \nAlso, sock family is 32 which is AF_SYSTEM /* Kernel event messages */ defined in , this is totally weird.\nAnother failed app gave the some debug info (sock family = AF_SYSTEM, sock type = SOCK_DGRAM) so I am thinking maybe still somewhere is wrong and can be solved.. I have checked  at follows:\n/usr/include/sys/socket.h\n/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/sys/socket.h\n/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/sys/socket.h\nand they have same definitions:\n```\ndefine AF_INET     2       / internetwork: UDP, TCP, etc. /\ndefine AF_INET6    30      / IPv6 /\ndefine AF_SYSTEM   32      / Kernel event messages /\ndefine PF_INET     AF_INET\n```\nSo now I am not sure how to further debug. I set up my proxy server, and sadly no HTTP request is received.\n\nFinally I found an alternative for my purpose. I have tried pfctl (package forwarding) but it's not working and acting weired as well. Then I came to notice that \nnetworksetup -setautoproxyurl wi-fi file:///.../NetEaseMusic.pac\ncan simply do the task, although it is essentially a global proxy\ud83d\ude02\nIn .pac file just write:\nfunction FindProxyForURL(url, host) {\n    if (isInNet(host, dnsResolve(\"music.163.com\"), \"255.255.255.255\"))\n    {\n        return \"PROXY localhost:32794\";\n    }\n    return \"DIRECT\";\n}\nMany thanks for all the help. But maybe it's time to give up on finding out why a hack it's not working -- like you said, hack does not always work. \ud83d\ude22. @ikzk Hi there, I am happy to find out that you were doing the same thing (using proxychains for Netease Music) with me. \nI am still stuck in the same situation as described in https://github.com/rofl0r/proxychains-ng/issues/181, so could you kindly share more info about how you fixed this problem finally? That would be greatly helpful for me\ud83d\ude4f. Okay I just realized you are using NeteaseMusic for Linux...different thing then. @valkjsaaa Thanks but like I said at beginning, it shouldn't be SIP problem.... Hi @rofl0r ,\nFirst many thanks to your quick reply and kind help!\nThough not fully understanding, I tried your suggestion (as in https://github.com/yi-ji/proxychains-ng/commit/b631b0238c1a6202d50bacaecebdc8850c977496), compiled it and tested again, but unfortunately the outcome is exactly the same. \nI checked by running dtruss -f proxychains4 ./Contents/MacOS/NeteaseMusic again and the output log weren't changed at all.\nAlso, as you mentioned this change will make proxychains not work for ssh, but I tested, it still works for ssh. But I am pretty sure I made those changes as you told.\nSo, seems we haven't found the real reason causing the issue yet?. sorry for late reply.\nwell I did run\nmake install\n./tools/install.sh -D -m 644 libproxychains4.dylib /usr/local/lib/libproxychains4.dylib\n./tools/install.sh -D -m 755 proxychains4 /usr/local/bin/proxychains4\nand I verified it\nstat /usr/local/lib/libproxychains4.dylib\n16777220 33818559 -rw-r--r-- 1 jiyi admin 0 53960 \"Jul 17 10:32:28 2017\" \"Jul 17 10:32:28 2017\" \"Jul 17 10:32:28 2017\" \"Jul 17 10:32:28 2017\" 4096 112 0 /usr/local/lib/libproxychains4.dylib\nand also when I launch proxychains and the application, this dylib is surely accessed.\nIn addition, I complied version 4.11 (before issue #119) and it still doesn't work. An interesting thing is that someone is using proxychains for the same app as me in #119 but his problem is simply fixed by the master branch while I am not. TAT\nAnd finally an important observation: proxychains works for some apps such as firefox. But NeteaseMusic is not the only failed app either.. I updated the output info with DEBUG defined, in the first comment, top of this page. (I enabled close hook for full debug info.) It seems that the hooked connect function does not work well, returned to unhooked connect:\nif(!((fam  == AF_INET || fam == AF_INET6) && socktype == SOCK_STREAM))\n        return true_connect(sock, addr, len);\nSo I tried to comment out these two lines, and printed out fam, socktype, and I got this repeatedly (only this, nothing else):\nDEBUG:pid[34693]:connect\nDEBUG:fam is 32 != AF_INET and != AF_INET6, DEBUG:socktype is 2 != SOCK_STREAM\nDEBUG:target: 9.0.0.0\nDEBUG:port: 512\nDEBUG:pid[34693]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:9050\n[proxychains] Strict chain  ...  127.0.0.1:9050 DEBUG:pid[34693]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=61\n ...  timeout\nDEBUG:start_chain failed\nDEBUG:error\n The weirdest thing is that even if the above outputs look like proxychains is working, but still NeteaseMusic can work normally (I haven't set up the proxy server at port 9050 yet). This does not happen in Firefox case (Firefox cannot open webpages if proxy server is down).\nI will soon set up my proxy server and check whether simply removing those two lines will finally solve the problem.\nFor more info about this app, NeteaseMusic, I pasted outputs from lsof -i | grep Netease\nNeteaseMu 32165 jiyi   14u  IPv4       0t0  TCP localhost:62601->localhost:commplex-link (ESTABLISHED)\nNeteaseMu 32165 jiyi   36u  IPv4       0t0  TCP 192.168.11.33:62659->103.211.228.143:https (ESTABLISHED)\nNeteaseMu 32165 jiyi   40u  IPv4       0t0  TCP 192.168.11.33:62615->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   42u  IPv4       0t0  TCP 192.168.11.33:62660->103.211.228.143:https (ESTABLISHED)\nNeteaseMu 32165 jiyi   49u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   50u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   14u  IPv4       0t0  TCP localhost:62601->localhost:commplex-link (ESTABLISHED)\nNeteaseMu 32165 jiyi   36u  IPv4       0t0  TCP 192.168.11.33:62670->103.211.228.143:https (ESTABLISHED)\nNeteaseMu 32165 jiyi   40u  IPv4       0t0  TCP 192.168.11.33:62615->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   49u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   50u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   14u  IPv4       0t0  TCP localhost:62601->localhost:commplex-link (ESTABLISHED)\nNeteaseMu 32165 jiyi   40u  IPv4       0t0  TCP 192.168.11.33:62615->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   49u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   50u  IPv4       0t0  TCP 192.168.11.33:62617->223.252.199.6:6003 (ESTABLISHED)\nNeteaseMu 32165 jiyi   36u  IPv4       0t0  TCP 192.168.11.33:62672->103.211.228.143:https (ESTABLISHED)\nNeteaseMu 32165 jiyi   42u  IPv4       0t0  TCP 192.168.11.33:62678->103.211.228.143:https (ESTABLISHED)\nI think we are close to the answer...again I would like to thank you for your patience all the time :). stupid am I ... I noticed that socktype is 2 which is SOCK_DGRAM, and it is UDP-based.\nSeems this is the answer and no solution available, right...?\nThis confused me because what I want to forward to proxy server are GET and POST requests. They are HTTP requests and should base on TCP. Why didn't they appear in the debug info? (I am sure about GET and POST are sent from NeteaseMusic, shown by a web debugging software). \nAlso, sock family is 32 which is AF_SYSTEM /* Kernel event messages */ defined in , this is totally weird.\nAnother failed app gave the some debug info (sock family = AF_SYSTEM, sock type = SOCK_DGRAM) so I am thinking maybe still somewhere is wrong and can be solved.. I have checked  at follows:\n/usr/include/sys/socket.h\n/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/sys/socket.h\n/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/sys/socket.h\nand they have same definitions:\n```\ndefine AF_INET     2       / internetwork: UDP, TCP, etc. /\ndefine AF_INET6    30      / IPv6 /\ndefine AF_SYSTEM   32      / Kernel event messages /\ndefine PF_INET     AF_INET\n```\nSo now I am not sure how to further debug. I set up my proxy server, and sadly no HTTP request is received.\n\nFinally I found an alternative for my purpose. I have tried pfctl (package forwarding) but it's not working and acting weired as well. Then I came to notice that \nnetworksetup -setautoproxyurl wi-fi file:///.../NetEaseMusic.pac\ncan simply do the task, although it is essentially a global proxy\ud83d\ude02\nIn .pac file just write:\nfunction FindProxyForURL(url, host) {\n    if (isInNet(host, dnsResolve(\"music.163.com\"), \"255.255.255.255\"))\n    {\n        return \"PROXY localhost:32794\";\n    }\n    return \"DIRECT\";\n}\nMany thanks for all the help. But maybe it's time to give up on finding out why a hack it's not working -- like you said, hack does not always work. \ud83d\ude22. ",
    "goog": "proxychains4 binary file\n. proxychains4 binary file\n. ",
    "e7appew": "I have attached build logs and the config.mak files that the Debian\nbuild system produces with and without hardening options set. I am\ncompiling on Debian sid and 'gcc --version' outputs:\n\ngcc (Debian 5.4.0-3) 5.4.0 20160603\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR\nPURPOSE.\nIt seems like one of the USER_LDFLAGS is causing the shared library\ntarget to be linked as a standard exe, even though -shared is issued as\nthe very first option. I'm not sure if this is a bug or feature of gcc.\n\nOn 09/06/16 21:14, rofl0r wrote:\n\nsorry, but without details i'm not gonna merge any build system changes.\nif you see the commit history of the makefile, anyone and his dog are\nvery smart to fix the build for their system, but then broke it for\nothers.\nso if you have a problem with the current Makefile, provide the\nnecessary details for an analysis. that would mean the exact CFLAGS\netc that you are using, compiler/OS versions etc and the exact error\nyou're getting. i merged your second commit in the meantime.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/pull/124#issuecomment-224865857,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/AGjybgIfvTjpVNze8uPqDL_gZba3SI1Jks5qJ_WSgaJpZM4IxWAj.\n. I did attach them by e-mail previously. Perhaps github rejects attachments in e-mails, or they were rejected because of their file extensions. I've renamed them all to .txt\n\nbuild-no-hardening.log.txt\nbuild-with-hardening.log.txt\nconfig-no-hardening.mak.txt\nconfig-with-hardening.mak.txt\n. Yes, it builds and runs just fine.\n. On second thought, why does this setting require an equal sign at all? If it were consistent with the other options, it wouldn't require you to use '='. But, either way, it shouldn't crash.\n. I have attached build logs and the config.mak files that the Debian\nbuild system produces with and without hardening options set. I am\ncompiling on Debian sid and 'gcc --version' outputs:\n\ngcc (Debian 5.4.0-3) 5.4.0 20160603\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR\nPURPOSE.\nIt seems like one of the USER_LDFLAGS is causing the shared library\ntarget to be linked as a standard exe, even though -shared is issued as\nthe very first option. I'm not sure if this is a bug or feature of gcc.\n\nOn 09/06/16 21:14, rofl0r wrote:\n\nsorry, but without details i'm not gonna merge any build system changes.\nif you see the commit history of the makefile, anyone and his dog are\nvery smart to fix the build for their system, but then broke it for\nothers.\nso if you have a problem with the current Makefile, provide the\nnecessary details for an analysis. that would mean the exact CFLAGS\netc that you are using, compiler/OS versions etc and the exact error\nyou're getting. i merged your second commit in the meantime.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/pull/124#issuecomment-224865857,\nor mute the thread\nhttps://github.com/notifications/unsubscribe/AGjybgIfvTjpVNze8uPqDL_gZba3SI1Jks5qJ_WSgaJpZM4IxWAj.\n. I did attach them by e-mail previously. Perhaps github rejects attachments in e-mails, or they were rejected because of their file extensions. I've renamed them all to .txt\n\nbuild-no-hardening.log.txt\nbuild-with-hardening.log.txt\nconfig-no-hardening.mak.txt\nconfig-with-hardening.mak.txt\n. Yes, it builds and runs just fine.\n. On second thought, why does this setting require an equal sign at all? If it were consistent with the other options, it wouldn't require you to use '='. But, either way, it shouldn't crash.\n. ",
    "wych42": "same problem here. I use dtruss as OS X has no strace.\nIt happens when I run something under /Applications.\nSYSCALL(args)        = return\nthread_selfid(0x0, 0x0, 0x0)         = 16368661 0\ncsops(0x0, 0x0, 0x7FFF53E97930)      = 0 0\nissetugid(0x0, 0x0, 0x7FFF53E97930)      = 0 0\nshared_region_check_np(0x7FFF53E95838, 0x0, 0x7FFF53E97930)      = 0 0\nstat64(\"/usr/lib/dtrace/libdtrace_dyld.dylib\\0\", 0x7FFF53E96DC8, 0x7FFF53E97930)         = 0 0\nopen(\"/usr/lib/dtrace/libdtrace_dyld.dylib\\0\", 0x0, 0x0)         = 3 0\npread(0x3, \"\\312\\376\\272\\276\\0\", 0x1000, 0x0)        = 4096 0\npread(0x3, \"\\317\\372\\355\\376\\a\\0\", 0x1000, 0x1000)       = 4096 0\nfcntl(0x3, 0x61, 0x7FFF53E95110)         = 0 0\nmmap(0x0, 0x670, 0x5, 0x1, 0x3, 0x1000)      = 0x10BD6C000 0\nmunmap(0x10BD6C000, 0x670)       = 0 0\nmmap(0x10BD6C000, 0x2000, 0x5, 0x12, 0x3, 0x1000)        = 0x10BD6C000 0\nmmap(0x10BD6E000, 0x1000, 0x3, 0x12, 0x3, 0x3000)        = 0x10BD6E000 0\nmmap(0x10BD6F000, 0x2F40, 0x1, 0x12, 0x3, 0x4000)        = 0x10BD6F000 0\nclose(0x3)       = 0 0\nstat64(\"/usr/lib/dtrace/libdtrace_dyld.dylib\\0\", 0x7FFF53E97348, 0x1)        = 0 0\nstat64(\"/usr/lib/libSystem.B.dylib\\0\", 0x7FFF53E96BF8, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libcache.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libcommonCrypto.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libcompiler_rt.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libcopyfile.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libcorecrypto.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libdispatch.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libdyld.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libkeymgr.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/liblaunch.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libmacho.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libquarantine.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libremovefile.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_asl.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_blocks.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libsystem_c.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libsystem_configuration.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libsystem_coreservices.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libsystem_coretls.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_dnssd.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libsystem_info.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libsystem_kernel.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libsystem_m.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libsystem_malloc.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libsystem_network.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_networkextension.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libsystem_notify.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libsystem_platform.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libsystem_pthread.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_sandbox.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_secinit.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_trace.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libunc.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libunwind.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libxpc.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/libobjc.A.dylib\\0\", 0x7FFF53E95AE8, 0x1)        = 0 0\nstat64(\"/usr/lib/libauto.dylib\\0\", 0x7FFF53E95AE8, 0x1)      = 0 0\nstat64(\"/usr/lib/libc++abi.dylib\\0\", 0x7FFF53E959C8, 0x1)        = 0 0\nstat64(\"/usr/lib/libc++.1.dylib\\0\", 0x7FFF53E959C8, 0x1)         = 0 0\nstat64(\"/usr/lib/libDiagnosticMessagesClient.dylib\\0\", 0x7FFF53E958B8, 0x1)      = 0 0\ngetpid(0x7FFF9555B740, 0x7FFF53E958B8, 0x1)      = 5110 0\nopen(\"/dev/dtracehelper\\0\", 0x2, 0x7FFF53E977F0)         = 3 0\nioctl(0x3, 0x80086804, 0x7FFF53E97778)       = 0 0\nclose(0x3)       = 0 0\nsysctl(0x7FFF53E96E60, 0x2, 0x7FFF53E96E70)      = 0 0\nthread_selfid(0x7FFF53E96E60, 0x2, 0x7FFF53E96E70)       = 16368661 0\nbsdthread_register(0x7FFF95150344, 0x7FFF95150334, 0x2000)       = 1073741887 0\nmprotect(0x10BD73000, 0x88, 0x1)         = 0 0\nmprotect(0x10BD75000, 0x1000, 0x0)       = 0 0\nmprotect(0x10BD8B000, 0x1000, 0x0)       = 0 0\nmprotect(0x10BD8C000, 0x1000, 0x0)       = 0 0\nmprotect(0x10BDA2000, 0x1000, 0x0)       = 0 0\nmprotect(0x10BDA3000, 0x1000, 0x1)       = 0 0\nmprotect(0x10BD73000, 0x88, 0x3)         = 0 0\nmprotect(0x10BD73000, 0x88, 0x1)         = 0 0\nissetugid(0x10BD73000, 0x88, 0x1)        = 0 0\ngetpid(0x10BD73000, 0x88, 0x1)       = 5110 0\nstat64(\"/AppleInternal/XBS/.isChrooted\\0\", 0x7FFF53E96DC8, 0x1)      = -1 Err#2\nstat64(\"/AppleInternal\\0\", 0x7FFF53E96D38, 0x1)      = -1 Err#2\ncsops(0x13F6, 0x7, 0x7FFF53E96850)       = -1 Err#22\nsysctl(0x7FFF53E96C10, 0x4, 0x7FFF53E96988)      = 0 0\ncsops(0x13F6, 0x7, 0x7FFF53E96140)       = -1 Err#22\nproc_info(0x2, 0x13F6, 0x11)         = 56 0\nopen_nocancel(\".\\0\", 0x0, 0x1)       = 3 0\nfstat64(0x3, 0x7FFF53E98390, 0x1)        = 0 0\nfcntl_nocancel(0x3, 0x32, 0x7FFF53E97F00)        = 0 0\nclose_nocancel(0x3)      = 0 0\nstat64(\"/Users/chichi\\0\", 0x7FFF53E98300, 0x7FFF53E97F00)        = 0 0\naccess(\"/Users/chichi/proxychains.conf\\0\", 0x4, 0x7FFF53E97F00)      = -1 Err#2\naccess(\"/Users/chichi/.proxychains/proxychains.conf\\0\", 0x4, 0x7FFF53E97F00)         = 0 0\nwrite_nocancel(0x2, \"[proxychains] config file found: /Users/chichi/.proxychains/proxychains.conf\\n\\0\", 0x4D)        = 77 0\naccess(\"/dev/null//libproxychains4.dylib\\0\", 0x4, 0x4D)      = -1 Err#20\naccess(\"/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\\0\", 0x4, 0x4D)       = 0 0\nwrite_nocancel(0x2, \"[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\\n\\0\", 0x59)        = 89 0\n. Hmm, my problem is applications under /Application should be opened via open command. If issue command /Application/XXX/bin/XXX would cause not found error. It's solved in my case. Thanks.\n. same problem here. I use dtruss as OS X has no strace.\nIt happens when I run something under /Applications.\nSYSCALL(args)        = return\nthread_selfid(0x0, 0x0, 0x0)         = 16368661 0\ncsops(0x0, 0x0, 0x7FFF53E97930)      = 0 0\nissetugid(0x0, 0x0, 0x7FFF53E97930)      = 0 0\nshared_region_check_np(0x7FFF53E95838, 0x0, 0x7FFF53E97930)      = 0 0\nstat64(\"/usr/lib/dtrace/libdtrace_dyld.dylib\\0\", 0x7FFF53E96DC8, 0x7FFF53E97930)         = 0 0\nopen(\"/usr/lib/dtrace/libdtrace_dyld.dylib\\0\", 0x0, 0x0)         = 3 0\npread(0x3, \"\\312\\376\\272\\276\\0\", 0x1000, 0x0)        = 4096 0\npread(0x3, \"\\317\\372\\355\\376\\a\\0\", 0x1000, 0x1000)       = 4096 0\nfcntl(0x3, 0x61, 0x7FFF53E95110)         = 0 0\nmmap(0x0, 0x670, 0x5, 0x1, 0x3, 0x1000)      = 0x10BD6C000 0\nmunmap(0x10BD6C000, 0x670)       = 0 0\nmmap(0x10BD6C000, 0x2000, 0x5, 0x12, 0x3, 0x1000)        = 0x10BD6C000 0\nmmap(0x10BD6E000, 0x1000, 0x3, 0x12, 0x3, 0x3000)        = 0x10BD6E000 0\nmmap(0x10BD6F000, 0x2F40, 0x1, 0x12, 0x3, 0x4000)        = 0x10BD6F000 0\nclose(0x3)       = 0 0\nstat64(\"/usr/lib/dtrace/libdtrace_dyld.dylib\\0\", 0x7FFF53E97348, 0x1)        = 0 0\nstat64(\"/usr/lib/libSystem.B.dylib\\0\", 0x7FFF53E96BF8, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libcache.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libcommonCrypto.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libcompiler_rt.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libcopyfile.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libcorecrypto.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libdispatch.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libdyld.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libkeymgr.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/liblaunch.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libmacho.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libquarantine.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libremovefile.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_asl.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_blocks.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libsystem_c.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libsystem_configuration.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libsystem_coreservices.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libsystem_coretls.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_dnssd.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libsystem_info.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libsystem_kernel.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libsystem_m.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libsystem_malloc.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libsystem_network.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_networkextension.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libsystem_notify.dylib\\0\", 0x7FFF53E96808, 0x1)      = 0 0\nstat64(\"/usr/lib/system/libsystem_platform.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libsystem_pthread.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_sandbox.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_secinit.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libsystem_trace.dylib\\0\", 0x7FFF53E96808, 0x1)       = 0 0\nstat64(\"/usr/lib/system/libunc.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/system/libunwind.dylib\\0\", 0x7FFF53E96808, 0x1)         = 0 0\nstat64(\"/usr/lib/system/libxpc.dylib\\0\", 0x7FFF53E96808, 0x1)        = 0 0\nstat64(\"/usr/lib/libobjc.A.dylib\\0\", 0x7FFF53E95AE8, 0x1)        = 0 0\nstat64(\"/usr/lib/libauto.dylib\\0\", 0x7FFF53E95AE8, 0x1)      = 0 0\nstat64(\"/usr/lib/libc++abi.dylib\\0\", 0x7FFF53E959C8, 0x1)        = 0 0\nstat64(\"/usr/lib/libc++.1.dylib\\0\", 0x7FFF53E959C8, 0x1)         = 0 0\nstat64(\"/usr/lib/libDiagnosticMessagesClient.dylib\\0\", 0x7FFF53E958B8, 0x1)      = 0 0\ngetpid(0x7FFF9555B740, 0x7FFF53E958B8, 0x1)      = 5110 0\nopen(\"/dev/dtracehelper\\0\", 0x2, 0x7FFF53E977F0)         = 3 0\nioctl(0x3, 0x80086804, 0x7FFF53E97778)       = 0 0\nclose(0x3)       = 0 0\nsysctl(0x7FFF53E96E60, 0x2, 0x7FFF53E96E70)      = 0 0\nthread_selfid(0x7FFF53E96E60, 0x2, 0x7FFF53E96E70)       = 16368661 0\nbsdthread_register(0x7FFF95150344, 0x7FFF95150334, 0x2000)       = 1073741887 0\nmprotect(0x10BD73000, 0x88, 0x1)         = 0 0\nmprotect(0x10BD75000, 0x1000, 0x0)       = 0 0\nmprotect(0x10BD8B000, 0x1000, 0x0)       = 0 0\nmprotect(0x10BD8C000, 0x1000, 0x0)       = 0 0\nmprotect(0x10BDA2000, 0x1000, 0x0)       = 0 0\nmprotect(0x10BDA3000, 0x1000, 0x1)       = 0 0\nmprotect(0x10BD73000, 0x88, 0x3)         = 0 0\nmprotect(0x10BD73000, 0x88, 0x1)         = 0 0\nissetugid(0x10BD73000, 0x88, 0x1)        = 0 0\ngetpid(0x10BD73000, 0x88, 0x1)       = 5110 0\nstat64(\"/AppleInternal/XBS/.isChrooted\\0\", 0x7FFF53E96DC8, 0x1)      = -1 Err#2\nstat64(\"/AppleInternal\\0\", 0x7FFF53E96D38, 0x1)      = -1 Err#2\ncsops(0x13F6, 0x7, 0x7FFF53E96850)       = -1 Err#22\nsysctl(0x7FFF53E96C10, 0x4, 0x7FFF53E96988)      = 0 0\ncsops(0x13F6, 0x7, 0x7FFF53E96140)       = -1 Err#22\nproc_info(0x2, 0x13F6, 0x11)         = 56 0\nopen_nocancel(\".\\0\", 0x0, 0x1)       = 3 0\nfstat64(0x3, 0x7FFF53E98390, 0x1)        = 0 0\nfcntl_nocancel(0x3, 0x32, 0x7FFF53E97F00)        = 0 0\nclose_nocancel(0x3)      = 0 0\nstat64(\"/Users/chichi\\0\", 0x7FFF53E98300, 0x7FFF53E97F00)        = 0 0\naccess(\"/Users/chichi/proxychains.conf\\0\", 0x4, 0x7FFF53E97F00)      = -1 Err#2\naccess(\"/Users/chichi/.proxychains/proxychains.conf\\0\", 0x4, 0x7FFF53E97F00)         = 0 0\nwrite_nocancel(0x2, \"[proxychains] config file found: /Users/chichi/.proxychains/proxychains.conf\\n\\0\", 0x4D)        = 77 0\naccess(\"/dev/null//libproxychains4.dylib\\0\", 0x4, 0x4D)      = -1 Err#20\naccess(\"/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\\0\", 0x4, 0x4D)       = 0 0\nwrite_nocancel(0x2, \"[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\\n\\0\", 0x59)        = 89 0\n. Hmm, my problem is applications under /Application should be opened via open command. If issue command /Application/XXX/bin/XXX would cause not found error. It's solved in my case. Thanks.\n. ",
    "Stupidism": "Also found in Kubuntu16.10, Computer XPS13. Here is my strace\n```\n\u279c  documents strace -f proxychains4 nvm i 5      \nexecve(\"/usr/bin/proxychains4\", [\"proxychains4\", \"nvm\", \"i\", \"5\"], [/ 73 vars /]) = 0\nbrk(NULL)                               = 0x55b7557e5000\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nmmap(NULL, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f3bbf746000\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=134447, ...}) = 0\nmmap(NULL, 134447, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f3bbf725000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0\\20\\5\\2\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(3, {st_mode=S_IFREG|0755, st_size=1856752, ...}) = 0\nmmap(NULL, 3959200, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f3bbf15e000\nmprotect(0x7f3bbf31b000, 2097152, PROT_NONE) = 0\nmmap(0x7f3bbf51b000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1bd000) = 0x7f3bbf51b000\nmmap(0x7f3bbf521000, 14752, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f3bbf521000\nclose(3)                                = 0\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f3bbf723000\narch_prctl(ARCH_SET_FS, 0x7f3bbf723700) = 0\nmprotect(0x7f3bbf51b000, 16384, PROT_READ) = 0\nmprotect(0x55b75503e000, 4096, PROT_READ) = 0\nmprotect(0x7f3bbf749000, 4096, PROT_READ) = 0\nmunmap(0x7f3bbf725000, 134447)          = 0\ngetcwd(\"/home/stupid/documents\", 512)   = 23\naccess(\"/home/stupid/documents/proxychains.conf\", R_OK) = -1 ENOENT (No such file or directory)\naccess(\"/home/stupid/.proxychains/proxychains.conf\", R_OK) = -1 ENOENT (No such file or directory)\naccess(\"/etc/proxychains.conf\", R_OK)   = 0\nwrite(2, \"[proxychains] config file found:\"..., 55[proxychains] config file found: /etc/proxychains.conf\n) = 55\nbrk(NULL)                               = 0x55b7557e5000\nbrk(0x55b755806000)                     = 0x55b755806000\naccess(\"/dev/null//libproxychains4.so\", R_OK) = -1 ENOTDIR (Not a directory)\naccess(\"/usr/lib/libproxychains4.so\", R_OK) = 0\nwrite(2, \"[proxychains] preloading /usr/li\"..., 53[proxychains] preloading /usr/lib/libproxychains4.so\n) = 53\nexecve(\"/usr/local/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/local/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/games/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/local/games/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nwrite(2, \"proxychains can't load process..\"..., 62proxychains can't load process....: No such file or directory\n) = 62\nexit_group(1)                           = ?\n+++ exited with 1 +++\n. Yeah, I found the right issue https://github.com/rofl0r/proxychains-ng/issues/115\n. Also found in Kubuntu16.10, Computer XPS13. Here is my strace\n\u279c  documents strace -f proxychains4 nvm i 5      \nexecve(\"/usr/bin/proxychains4\", [\"proxychains4\", \"nvm\", \"i\", \"5\"], [/ 73 vars /]) = 0\nbrk(NULL)                               = 0x55b7557e5000\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nmmap(NULL, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f3bbf746000\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=134447, ...}) = 0\nmmap(NULL, 134447, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f3bbf725000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0\\20\\5\\2\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(3, {st_mode=S_IFREG|0755, st_size=1856752, ...}) = 0\nmmap(NULL, 3959200, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f3bbf15e000\nmprotect(0x7f3bbf31b000, 2097152, PROT_NONE) = 0\nmmap(0x7f3bbf51b000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1bd000) = 0x7f3bbf51b000\nmmap(0x7f3bbf521000, 14752, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f3bbf521000\nclose(3)                                = 0\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f3bbf723000\narch_prctl(ARCH_SET_FS, 0x7f3bbf723700) = 0\nmprotect(0x7f3bbf51b000, 16384, PROT_READ) = 0\nmprotect(0x55b75503e000, 4096, PROT_READ) = 0\nmprotect(0x7f3bbf749000, 4096, PROT_READ) = 0\nmunmap(0x7f3bbf725000, 134447)          = 0\ngetcwd(\"/home/stupid/documents\", 512)   = 23\naccess(\"/home/stupid/documents/proxychains.conf\", R_OK) = -1 ENOENT (No such file or directory)\naccess(\"/home/stupid/.proxychains/proxychains.conf\", R_OK) = -1 ENOENT (No such file or directory)\naccess(\"/etc/proxychains.conf\", R_OK)   = 0\nwrite(2, \"[proxychains] config file found:\"..., 55[proxychains] config file found: /etc/proxychains.conf\n) = 55\nbrk(NULL)                               = 0x55b7557e5000\nbrk(0x55b755806000)                     = 0x55b755806000\naccess(\"/dev/null//libproxychains4.so\", R_OK) = -1 ENOTDIR (Not a directory)\naccess(\"/usr/lib/libproxychains4.so\", R_OK) = 0\nwrite(2, \"[proxychains] preloading /usr/li\"..., 53[proxychains] preloading /usr/lib/libproxychains4.so\n) = 53\nexecve(\"/usr/local/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/local/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/sbin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/bin/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/games/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nexecve(\"/usr/local/games/nvm\", [\"nvm\", \"i\", \"5\"], [/ 75 vars /]) = -1 ENOENT (No such file or directory)\nwrite(2, \"proxychains can't load process..\"..., 62proxychains can't load process....: No such file or directory\n) = 62\nexit_group(1)                           = ?\n+++ exited with 1 +++\n```. Yeah, I found the right issue https://github.com/rofl0r/proxychains-ng/issues/115\n. ",
    "sb2nov": "I don't think there is a process to run the child process with proxychains with some config, even when you run the parent with proxychains.\nclosing it as I think of a workaround.\n. I don't think there is a process to run the child process with proxychains with some config, even when you run the parent with proxychains.\nclosing it as I think of a workaround.\n. ",
    "kienhoangtu7": "if i change to dynamic chains it got this error\n``\n*** Error innmap': munmap_chunk(): invalid pointer: 0x08dc1568 ***\nProgram received signal SIGABRT, Aborted.\n0xb7fdcc38 in ?? ()\nhere is the backtrace:\n0  0xb7fdcc38 in ?? ()\n1  0xb78e2007 in malloc_printerr (action=,\nstr=0xb79d431c \"munmap_chunk(): invalid pointer\", ptr=0x8dc1568)\nat malloc.c:4965\n\n2  0xb78e20b8 in munmap_chunk (p=) at malloc.c:2820\n3  0xb7b03c08 in operator delete(void*) ()\nfrom /usr/lib/i386-linux-gnu/libstdc++.so.6\n4  0x080cb9f4 in ?? ()\n5  0x080cecdc in service_scan(std::vector >&)\n()\n\n6  0x08092f92 in nmap_main(int, char**) ()\n7  0x0806bbb7 in main ()\n``\n. now i cant get that segfault anymore. Sometime it get segfault but usually it get Error innmap': munmap_chunk(): invalid pointer\n. if i change to dynamic chains it got this error\n``\n*** Error innmap': munmap_chunk(): invalid pointer: 0x08dc1568 ***\nProgram received signal SIGABRT, Aborted.\n0xb7fdcc38 in ?? ()\nhere is the backtrace:\n0  0xb7fdcc38 in ?? ()\n1  0xb78e2007 in malloc_printerr (action=,\nstr=0xb79d431c \"munmap_chunk(): invalid pointer\", ptr=0x8dc1568)\nat malloc.c:4965\n\n2  0xb78e20b8 in munmap_chunk (p=) at malloc.c:2820\n3  0xb7b03c08 in operator delete(void*) ()\nfrom /usr/lib/i386-linux-gnu/libstdc++.so.6\n4  0x080cb9f4 in ?? ()\n5  0x080cecdc in service_scan(std::vector >&)\n()\n\n6  0x08092f92 in nmap_main(int, char**) ()\n7  0x0806bbb7 in main ()\n``\n. now i cant get that segfault anymore. Sometime it get segfault but usually it get Error innmap': munmap_chunk(): invalid pointer\n. ",
    "ammaratef45": "I have the same problem\nNo one found solution for it?\n. I have the same problem\nNo one found solution for it?\n. ",
    "antonini": "Thanks @rofl0r! It worked!\n. Thanks @rofl0r! It worked!\n. ",
    "Enivel": "```\nimport urllib2, urllib\nimport sys\nshow download progress\ndef reporthook(blocks_read,block_size,total_size):\n    if not blocks_read:\n        print (\"Connection opened\")\n    if total_size <0:\n        #print \"\\rRead %d blocks\"  % blocks_read\n        sys.stdout.write(\"\\rRead %d blocks   \"  % blocks_read)\n        sys.stdout.flush()\n    else:\n        #print \"\\rdownloading: %d KB, totalsize: %d KB\" % (blocks_readblock_size/1024.0,total_size/1024.0)\n        sys.stdout.write(\"\\rdownloading: %d KB, totalsize: %d KB   \" % (blocks_readblock_size/1024.0,total_size/1024.0))\n        sys.stdout.flush()\nurllib.urlretrieve('http://hanguo3.tumblr.com/video_file/146969728436/tumblr_o7hekgP1bv1umyqgn','aa.mp4',reporthook);\n```\n. \n\nbut if append before proxychains  use \"time\" or \"strace\"  work well. \n. ```\nimport urllib2, urllib\nimport sys\nshow download progress\ndef reporthook(blocks_read,block_size,total_size):\n    if not blocks_read:\n        print (\"Connection opened\")\n    if total_size <0:\n        #print \"\\rRead %d blocks\"  % blocks_read\n        sys.stdout.write(\"\\rRead %d blocks   \"  % blocks_read)\n        sys.stdout.flush()\n    else:\n        #print \"\\rdownloading: %d KB, totalsize: %d KB\" % (blocks_readblock_size/1024.0,total_size/1024.0)\n        sys.stdout.write(\"\\rdownloading: %d KB, totalsize: %d KB   \" % (blocks_readblock_size/1024.0,total_size/1024.0))\n        sys.stdout.flush()\nurllib.urlretrieve('http://hanguo3.tumblr.com/video_file/146969728436/tumblr_o7hekgP1bv1umyqgn','aa.mp4',reporthook);\n```\n. \n\nbut if append before proxychains  use \"time\" or \"strace\"  work well. \n. ",
    "theman480": "@Programming4life  The same reason you need it on linux, i guess.\n. @Programming4life  The same reason you need it on linux, i guess.\n. ",
    "alphaonex86": "For exemple dest_ip seam be only partially initialised.\nAt void do_init(void), maybe memset(proxychains_pd,0x00,sizeof(proxychains_pd));...\nThe most effective is test your self your code under valgrind.\nhttp://pastebin.com/emYc2ELi\nYes, I have my own code to fix too...\nOS: Linux gentoo, gcc 4.9, version used: Latest commit e527b9e  on Jun 23 (the last from git)\n. As say, I have my error to fix too. This is only into my code.\nValgrind still complains with telnet, at same place.\nMaybe my usage then: /usr/bin/valgrind /usr/local/bin/proxychains4 -f /etc/proxychains/proxychains.conf telnet mdmkz2exhys4rc24qtqstzevyhmbyia4fvzz7c25wwk3b34kyvba.b32.i2p 33889 (no problem)\nProblem:\nfirst-world ~ # /usr/local/bin/proxychains4 -f /etc/proxychains/proxychains.conf /usr/bin/valgrind telnet XXXXXXXXXXXXXXXXX.b32.i2p 33889\n[proxychains] config file found: /etc/proxychains/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.11\n==2464== Memcheck, a memory error detector\n==2464== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==2464== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==2464== Command: telnet XXXXXXXXXXXX.b32.i2p 33889\n==2464== \n[proxychains] DLL init: proxychains-ng 4.11\n==2464== Syscall param write(buf) points to uninitialised byte(s)\n==2464==    at 0x53CE62D: ??? (syscall-template.S:84)\n==2464==    by 0x4E3EF67: sendmessage (allocator_thread.c:181)\n==2464==    by 0x4E3F357: at_get_ip_for_host (allocator_thread.c:245)\n==2464==    by 0x4E3C697: proxy_gethostbyname (core.c:765)\n==2464==    by 0x4E3C852: proxy_getaddrinfo (core.c:832)\n==2464==    by 0x4E3E3C7: getaddrinfo (libproxychains.c:421)\n==2464==    by 0x11521F: ??? (in /usr/bin/telnet)\n==2464==    by 0x10CB32: ??? (in /usr/bin/telnet)\n==2464==    by 0x5307733: (below main) (libc-start.c:289)\n==2464==  Address 0xffeffd564 is on thread 1's stack\n==2464==  in frame #2, created by at_get_ip_for_host (allocator_thread.c:240)\n==2464== \nTrying 224.0.0.1...\n[proxychains] Strict chain  ...  127.0.0.1:4444 ==2464== Syscall param write(buf) points to uninitialised byte(s)\n==2464==    at 0x53CE62D: ??? (syscall-template.S:84)\n==2464==    by 0x4E3EF67: sendmessage (allocator_thread.c:181)\n==2464==    by 0x4E3F414: at_get_host_for_ip (allocator_thread.c:259)\n==2464==    by 0x4E3BA2A: chain_step (core.c:522)\n==2464==    by 0x4E3C1B1: connect_proxy_chain (core.c:670)\n==2464==    by 0x4E3E287: connect (libproxychains.c:392)\n==2464==    by 0x115518: ??? (in /usr/bin/telnet)\n==2464==    by 0x10CB32: ??? (in /usr/bin/telnet)\n==2464==    by 0x5307733: (below main) (libc-start.c:289)\n==2464==  Address 0xffefff6a4 is on thread 1's stack\n==2464==  in frame #2, created by at_get_host_for_ip (allocator_thread.c:255)\n==2464==\n ...  XXXXXXXXXXXXXX.b32.i2p:33889 ==2464== Syscall param write(buf) points to uninitialised byte(s)\n==2464==    at 0x53CE62D: ??? (syscall-template.S:84)\n==2464==    by 0x4E3EF67: sendmessage (allocator_thread.c:181)\n==2464==    by 0x4E3F414: at_get_host_for_ip (allocator_thread.c:259)\n==2464==    by 0x4E3A9FA: tunnel_to (core.c:202)\n==2464==    by 0x4E3BB56: chain_step (core.c:536)\n==2464==    by 0x4E3C1B1: connect_proxy_chain (core.c:670)\n==2464==    by 0x4E3E287: connect (libproxychains.c:392)\n==2464==    by 0x115518: ??? (in /usr/bin/telnet)\n==2464==    by 0x10CB32: ??? (in /usr/bin/telnet)\n==2464==    by 0x5307733: (below main) (libc-start.c:289)\n==2464==  Address 0xffeffcaa4 is on thread 1's stack\n==2464==  in frame #2, created by at_get_host_for_ip (allocator_thread.c:255)\n==2464==\n ...  OK\nConnected to XXXXXXXXXXX.b32.i2p.\n. For exemple dest_ip seam be only partially initialised.\nAt void do_init(void), maybe memset(proxychains_pd,0x00,sizeof(proxychains_pd));...\nThe most effective is test your self your code under valgrind.\nhttp://pastebin.com/emYc2ELi\nYes, I have my own code to fix too...\nOS: Linux gentoo, gcc 4.9, version used: Latest commit e527b9e  on Jun 23 (the last from git)\n. As say, I have my error to fix too. This is only into my code.\nValgrind still complains with telnet, at same place.\nMaybe my usage then: /usr/bin/valgrind /usr/local/bin/proxychains4 -f /etc/proxychains/proxychains.conf telnet mdmkz2exhys4rc24qtqstzevyhmbyia4fvzz7c25wwk3b34kyvba.b32.i2p 33889 (no problem)\nProblem:\nfirst-world ~ # /usr/local/bin/proxychains4 -f /etc/proxychains/proxychains.conf /usr/bin/valgrind telnet XXXXXXXXXXXXXXXXX.b32.i2p 33889\n[proxychains] config file found: /etc/proxychains/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.11\n==2464== Memcheck, a memory error detector\n==2464== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==2464== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==2464== Command: telnet XXXXXXXXXXXX.b32.i2p 33889\n==2464== \n[proxychains] DLL init: proxychains-ng 4.11\n==2464== Syscall param write(buf) points to uninitialised byte(s)\n==2464==    at 0x53CE62D: ??? (syscall-template.S:84)\n==2464==    by 0x4E3EF67: sendmessage (allocator_thread.c:181)\n==2464==    by 0x4E3F357: at_get_ip_for_host (allocator_thread.c:245)\n==2464==    by 0x4E3C697: proxy_gethostbyname (core.c:765)\n==2464==    by 0x4E3C852: proxy_getaddrinfo (core.c:832)\n==2464==    by 0x4E3E3C7: getaddrinfo (libproxychains.c:421)\n==2464==    by 0x11521F: ??? (in /usr/bin/telnet)\n==2464==    by 0x10CB32: ??? (in /usr/bin/telnet)\n==2464==    by 0x5307733: (below main) (libc-start.c:289)\n==2464==  Address 0xffeffd564 is on thread 1's stack\n==2464==  in frame #2, created by at_get_ip_for_host (allocator_thread.c:240)\n==2464== \nTrying 224.0.0.1...\n[proxychains] Strict chain  ...  127.0.0.1:4444 ==2464== Syscall param write(buf) points to uninitialised byte(s)\n==2464==    at 0x53CE62D: ??? (syscall-template.S:84)\n==2464==    by 0x4E3EF67: sendmessage (allocator_thread.c:181)\n==2464==    by 0x4E3F414: at_get_host_for_ip (allocator_thread.c:259)\n==2464==    by 0x4E3BA2A: chain_step (core.c:522)\n==2464==    by 0x4E3C1B1: connect_proxy_chain (core.c:670)\n==2464==    by 0x4E3E287: connect (libproxychains.c:392)\n==2464==    by 0x115518: ??? (in /usr/bin/telnet)\n==2464==    by 0x10CB32: ??? (in /usr/bin/telnet)\n==2464==    by 0x5307733: (below main) (libc-start.c:289)\n==2464==  Address 0xffefff6a4 is on thread 1's stack\n==2464==  in frame #2, created by at_get_host_for_ip (allocator_thread.c:255)\n==2464==\n ...  XXXXXXXXXXXXXX.b32.i2p:33889 ==2464== Syscall param write(buf) points to uninitialised byte(s)\n==2464==    at 0x53CE62D: ??? (syscall-template.S:84)\n==2464==    by 0x4E3EF67: sendmessage (allocator_thread.c:181)\n==2464==    by 0x4E3F414: at_get_host_for_ip (allocator_thread.c:259)\n==2464==    by 0x4E3A9FA: tunnel_to (core.c:202)\n==2464==    by 0x4E3BB56: chain_step (core.c:536)\n==2464==    by 0x4E3C1B1: connect_proxy_chain (core.c:670)\n==2464==    by 0x4E3E287: connect (libproxychains.c:392)\n==2464==    by 0x115518: ??? (in /usr/bin/telnet)\n==2464==    by 0x10CB32: ??? (in /usr/bin/telnet)\n==2464==    by 0x5307733: (below main) (libc-start.c:289)\n==2464==  Address 0xffeffcaa4 is on thread 1's stack\n==2464==  in frame #2, created by at_get_host_for_ip (allocator_thread.c:255)\n==2464==\n ...  OK\nConnected to XXXXXXXXXXX.b32.i2p.\n. ",
    "twlz0ne": "@rofl0r\n- npm (without -q option)\n``` sh\nproxychains4 npm install\n[proxychains] config file found: ~/.proxychains4shadowsocks.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/HEAD-e527b9e/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n...\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n...\n^C\naborted by manual\n```\n- curl\n$ proxychains4 -q curl -s https://google.com\n<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>301 Moved</TITLE></HEAD><BODY>\n<H1>301 Moved</H1>\nThe document has moved\n<A HREF=\"https://www.google.com/\">here</A>.\n</BODY></HTML>\nseems well\n- vi\n``` sh\n$ proxychains4 -q vi\n:!\n[proxychains] DLL init: proxychains-ng 4.11\nPress ENTER or type command to continue\n```\n- vi (without -q option)\n``` sh\n$ proxychains4 vi\n:!\n[proxychains] config file found: ~/.proxychains4shadowsocks.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.11\n[proxychains] DLL init: proxychains-ng 4.11\nPress ENTER or type command to continue\n``\n. [proxychains4.log](https://gist.githubusercontent.com/twlz0ne/a62b8a7f65907474fdfd67c60585dc63/raw/112058150397d87cc9b1aeb676059c7a26164d0c/proxychains4.log)\n[proxychains4-q.log](https://gist.githubusercontent.com/twlz0ne/a62b8a7f65907474fdfd67c60585dc63/raw/112058150397d87cc9b1aeb676059c7a26164d0c/proxychains4-q.log)\n. After change#if GNUC > 2to#if 0`\n``` sh\n$ proxychains4 -q curl -so /dev/null -w \"%{http_code}\" https://google.com\n301\n$ proxychains4 curl -so /dev/null -w \"%{http_code}\" https://google.com\n[proxychains] config file found: ~/.proxychains4shadowsocks.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/HEAD-e527b9e/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  google.com:443  ...  OK\n301\n$ proxychains4 npm install\n[proxychains] config file found: ~/.proxychains4shadowsocks.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/HEAD-e527b9e/lib/libproxychains4.dylib\nhangs\n```\n. @rofl0r\n- npm (without -q option)\n``` sh\nproxychains4 npm install\n[proxychains] config file found: ~/.proxychains4shadowsocks.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/HEAD-e527b9e/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n...\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n[proxychains] DLL init: proxychains-ng\n...\n^C\naborted by manual\n```\n- curl\n$ proxychains4 -q curl -s https://google.com\n<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>301 Moved</TITLE></HEAD><BODY>\n<H1>301 Moved</H1>\nThe document has moved\n<A HREF=\"https://www.google.com/\">here</A>.\n</BODY></HTML>\nseems well\n- vi\n``` sh\n$ proxychains4 -q vi\n:!\n[proxychains] DLL init: proxychains-ng 4.11\nPress ENTER or type command to continue\n```\n- vi (without -q option)\n``` sh\n$ proxychains4 vi\n:!\n[proxychains] config file found: ~/.proxychains4shadowsocks.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.11\n[proxychains] DLL init: proxychains-ng 4.11\nPress ENTER or type command to continue\n``\n. [proxychains4.log](https://gist.githubusercontent.com/twlz0ne/a62b8a7f65907474fdfd67c60585dc63/raw/112058150397d87cc9b1aeb676059c7a26164d0c/proxychains4.log)\n[proxychains4-q.log](https://gist.githubusercontent.com/twlz0ne/a62b8a7f65907474fdfd67c60585dc63/raw/112058150397d87cc9b1aeb676059c7a26164d0c/proxychains4-q.log)\n. After change#if GNUC > 2to#if 0`\n``` sh\n$ proxychains4 -q curl -so /dev/null -w \"%{http_code}\" https://google.com\n301\n$ proxychains4 curl -so /dev/null -w \"%{http_code}\" https://google.com\n[proxychains] config file found: ~/.proxychains4shadowsocks.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/HEAD-e527b9e/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  google.com:443  ...  OK\n301\n$ proxychains4 npm install\n[proxychains] config file found: ~/.proxychains4shadowsocks.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/HEAD-e527b9e/lib/libproxychains4.dylib\nhangs\n```\n. ",
    "clouds56": "I'm from linux and find something interesting:\nmakepkg -s (too long)\nread(0, [proxychains] DLL init: proxychains-ng 4.12\n\"\", 1)                          = 0\n--- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=1288, si_uid=1000, si_status=1, si_utime=0, si_stime=0} ---\nwait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 1}], WNOHANG, NULL) = 1288\nwait4(-1, 0x7ffcdeb167d0, WNOHANG, NULL) = -1 ECHILD (No child processes)\nrt_sigreturn({mask=[]})                 = 0\ndup2(10, 0)                             = 0\nfcntl(10, F_GETFD)                      = 0x1 (flags FD_CLOEXEC)\nclose(10)                               = 0\nclose(63)                               = 0\nrt_sigprocmask(SIG_BLOCK, NULL, [], 8)  = 0\npipe([7, 8])                            = 0\nfcntl(63, F_GETFD)                      = -1 EBADF (Bad file descriptor)\ndup2(7, 63)                             = 63\nclose(7)                                = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [INT CHLD], [], 8) = 0\nclone(child_stack=NULL, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f0322b1a810) = 1292\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigaction(SIGCHLD, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclose(8)                                = 0\nopen(\"/dev/fd/63\", O_RDONLY)            = 7\nfcntl(0, F_GETFD)                       = 0\nfcntl(0, F_DUPFD, 10)                   = 10\nfcntl(0, F_GETFD)                       = 0\nfcntl(10, F_SETFD, FD_CLOEXEC)          = 0\ndup2(7, 0)                              = 0\nclose(7)                                = 0\nioctl(0, TCGETS, 0x7ffcdeb16e90)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(0, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)\nread(0, [proxychains] DLL init: proxychains-ng 4.12\n\"\", 1)                          = 0\ndup2(10, 0)                             = 0\nfcntl(10, F_GETFD)                      = 0x1 (flags FD_CLOEXEC)\nclose(10)                               = 0\nclose(63)                               = 0\nrt_sigprocmask(SIG_BLOCK, NULL, [], 8)  = 0, it repeats\npipe([7, 8])                            = 0\nfcntl(63, F_GETFD)                      = -1 EBADF (Bad file descriptor)\ndup2(7, 63)                             = 63\nclose(7)                                = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [INT CHLD], [], 8) = 0\nclone(child_stack=NULL, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f0322b1a810) = 1296\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigaction(SIGCHLD, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclose(8)                                = 0\nopen(\"/dev/fd/63\", O_RDONLY)            = 7\nfcntl(0, F_GETFD)                       = 0\nfcntl(0, F_DUPFD, 10)                   = 10\nfcntl(0, F_GETFD)                       = 0\nfcntl(10, F_SETFD, FD_CLOEXEC)          = 0\ndup2(7, 0)                              = 0\nclose(7)                                = 0\nioctl(0, TCGETS, 0x7ffcdeb16e90)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(0, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)\nread(0, [proxychains] DLL init: proxychains-ng 4.12\n\"\", 1)                          = 0\ndup2(10, 0)                             = 0\nfcntl(10, F_GETFD)                      = 0x1 (flags FD_CLOEXEC)\nclose(10)                               = 0\nclose(63)                               = 0\nrt_sigprocmask(SIG_BLOCK, NULL, [], 8)  = 0\npipe([7, 8])                            = 0\nfcntl(63, F_GETFD)                      = -1 EBADF (Bad file descriptor)\ndup2(7, 63)                             = 63\nclose(7)                                = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [INT CHLD], [], 8) = 0\nclone(child_stack=NULL, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f0322b1a810) = 1300\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigaction(SIGCHLD, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclose(8)                                = 0\nopen(\"/dev/fd/63\", O_RDONLY)            = 7\nfcntl(0, F_GETFD)                       = 0\nfcntl(0, F_DUPFD, 10)                   = 10\nfcntl(0, F_GETFD)                       = 0\nfcntl(10, F_SETFD, FD_CLOEXEC)          = 0\ndup2(7, 0)                              = 0\nclose(7)                                = 0\nioctl(0, TCGETS, 0x7ffcdeb16e90)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(0, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)\nread(0, [proxychains] DLL init: proxychains-ng 4.12\nnpm update:\nprlimit64(0, RLIMIT_STACK, NULL, {rlim_cur=8192*1024, rlim_max=RLIM64_INFINITY}) = 0\nbrk(NULL)                               = 0x32e9000\nbrk(0x331b000)                          = 0x331b000\npipe([7, 8])                            = 0\npipe([9, 10])                           = 0\nmmap(NULL, 16384, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7f1c992bc000\nmprotect(0x7f1c992bc000, 4096, PROT_NONE) = 0\nclone(child_stack=0x7f1c992befb0, flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, parent_tidptr=0x7f1c992bf9d0, tls=0x7f1c992bf700, child_tidptr=0x7f1c992bf9d0) = 1535\naccess(\"/etc/proxychains.conf\", R_OK)   = 0\nopen(\"/etc/proxychains.conf\", O_RDONLY) = 11\nfstat(11, {st_mode=S_IFREG|0644, st_size=3690, ...}) = 0\nread(11, \"# proxychains.conf  VER 4.x\\n#\\n# \"..., 4096) = 3690\nread(11, \"\", 4096)                      = 0\nclose(11)                               = 0\nwrite(2, \"[proxychains] DLL init: proxycha\"..., 44[proxychains] DLL init: proxychains-ng 4.12\n) = 44\nfutex(0x7f1c976e5048, FUTEX_WAKE_PRIVATE, 2147483647) = 0\nfutex(0x7f1c99059380, FUTEX_WAKE_PRIVATE, 2147483647) = 0\nrt_sigprocmask(SIG_SETMASK, [USR1], NULL, 8) = 0\nfstat(0, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 3), ...}) = 0\nfstat(1, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 3), ...}) = 0\nfstat(2, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 3), ...}) = 0\nIt would init DLL again after clone (maybe). I'm from linux and find something interesting:\nmakepkg -s (too long)\nread(0, [proxychains] DLL init: proxychains-ng 4.12\n\"\", 1)                          = 0\n--- SIGCHLD {si_signo=SIGCHLD, si_code=CLD_EXITED, si_pid=1288, si_uid=1000, si_status=1, si_utime=0, si_stime=0} ---\nwait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 1}], WNOHANG, NULL) = 1288\nwait4(-1, 0x7ffcdeb167d0, WNOHANG, NULL) = -1 ECHILD (No child processes)\nrt_sigreturn({mask=[]})                 = 0\ndup2(10, 0)                             = 0\nfcntl(10, F_GETFD)                      = 0x1 (flags FD_CLOEXEC)\nclose(10)                               = 0\nclose(63)                               = 0\nrt_sigprocmask(SIG_BLOCK, NULL, [], 8)  = 0\npipe([7, 8])                            = 0\nfcntl(63, F_GETFD)                      = -1 EBADF (Bad file descriptor)\ndup2(7, 63)                             = 63\nclose(7)                                = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [INT CHLD], [], 8) = 0\nclone(child_stack=NULL, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f0322b1a810) = 1292\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigaction(SIGCHLD, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclose(8)                                = 0\nopen(\"/dev/fd/63\", O_RDONLY)            = 7\nfcntl(0, F_GETFD)                       = 0\nfcntl(0, F_DUPFD, 10)                   = 10\nfcntl(0, F_GETFD)                       = 0\nfcntl(10, F_SETFD, FD_CLOEXEC)          = 0\ndup2(7, 0)                              = 0\nclose(7)                                = 0\nioctl(0, TCGETS, 0x7ffcdeb16e90)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(0, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)\nread(0, [proxychains] DLL init: proxychains-ng 4.12\n\"\", 1)                          = 0\ndup2(10, 0)                             = 0\nfcntl(10, F_GETFD)                      = 0x1 (flags FD_CLOEXEC)\nclose(10)                               = 0\nclose(63)                               = 0\nrt_sigprocmask(SIG_BLOCK, NULL, [], 8)  = 0, it repeats\npipe([7, 8])                            = 0\nfcntl(63, F_GETFD)                      = -1 EBADF (Bad file descriptor)\ndup2(7, 63)                             = 63\nclose(7)                                = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [INT CHLD], [], 8) = 0\nclone(child_stack=NULL, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f0322b1a810) = 1296\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigaction(SIGCHLD, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclose(8)                                = 0\nopen(\"/dev/fd/63\", O_RDONLY)            = 7\nfcntl(0, F_GETFD)                       = 0\nfcntl(0, F_DUPFD, 10)                   = 10\nfcntl(0, F_GETFD)                       = 0\nfcntl(10, F_SETFD, FD_CLOEXEC)          = 0\ndup2(7, 0)                              = 0\nclose(7)                                = 0\nioctl(0, TCGETS, 0x7ffcdeb16e90)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(0, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)\nread(0, [proxychains] DLL init: proxychains-ng 4.12\n\"\", 1)                          = 0\ndup2(10, 0)                             = 0\nfcntl(10, F_GETFD)                      = 0x1 (flags FD_CLOEXEC)\nclose(10)                               = 0\nclose(63)                               = 0\nrt_sigprocmask(SIG_BLOCK, NULL, [], 8)  = 0\npipe([7, 8])                            = 0\nfcntl(63, F_GETFD)                      = -1 EBADF (Bad file descriptor)\ndup2(7, 63)                             = 63\nclose(7)                                = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [INT CHLD], [], 8) = 0\nclone(child_stack=NULL, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0x7f0322b1a810) = 1300\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigaction(SIGCHLD, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, {sa_handler=0x443a00, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f0321f0c6f0}, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nrt_sigprocmask(SIG_BLOCK, [CHLD], [], 8) = 0\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\nclose(8)                                = 0\nopen(\"/dev/fd/63\", O_RDONLY)            = 7\nfcntl(0, F_GETFD)                       = 0\nfcntl(0, F_DUPFD, 10)                   = 10\nfcntl(0, F_GETFD)                       = 0\nfcntl(10, F_SETFD, FD_CLOEXEC)          = 0\ndup2(7, 0)                              = 0\nclose(7)                                = 0\nioctl(0, TCGETS, 0x7ffcdeb16e90)        = -1 ENOTTY (Inappropriate ioctl for device)\nlseek(0, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)\nread(0, [proxychains] DLL init: proxychains-ng 4.12\nnpm update:\nprlimit64(0, RLIMIT_STACK, NULL, {rlim_cur=8192*1024, rlim_max=RLIM64_INFINITY}) = 0\nbrk(NULL)                               = 0x32e9000\nbrk(0x331b000)                          = 0x331b000\npipe([7, 8])                            = 0\npipe([9, 10])                           = 0\nmmap(NULL, 16384, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7f1c992bc000\nmprotect(0x7f1c992bc000, 4096, PROT_NONE) = 0\nclone(child_stack=0x7f1c992befb0, flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, parent_tidptr=0x7f1c992bf9d0, tls=0x7f1c992bf700, child_tidptr=0x7f1c992bf9d0) = 1535\naccess(\"/etc/proxychains.conf\", R_OK)   = 0\nopen(\"/etc/proxychains.conf\", O_RDONLY) = 11\nfstat(11, {st_mode=S_IFREG|0644, st_size=3690, ...}) = 0\nread(11, \"# proxychains.conf  VER 4.x\\n#\\n# \"..., 4096) = 3690\nread(11, \"\", 4096)                      = 0\nclose(11)                               = 0\nwrite(2, \"[proxychains] DLL init: proxycha\"..., 44[proxychains] DLL init: proxychains-ng 4.12\n) = 44\nfutex(0x7f1c976e5048, FUTEX_WAKE_PRIVATE, 2147483647) = 0\nfutex(0x7f1c99059380, FUTEX_WAKE_PRIVATE, 2147483647) = 0\nrt_sigprocmask(SIG_SETMASK, [USR1], NULL, 8) = 0\nfstat(0, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 3), ...}) = 0\nfstat(1, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 3), ...}) = 0\nfstat(2, {st_mode=S_IFCHR|0600, st_rdev=makedev(136, 3), ...}) = 0\nIt would init DLL again after clone (maybe). ",
    "Red54": "I met a different problem.\n$ brew config\nHOMEBREW_VERSION: 1.0.7-7-g6be6ce3\nORIGIN: https://github.com/Homebrew/brew\nHEAD: 6be6ce33e0e5967f8e67801875bff6ab3f99b1ef\nLast commit: 17 hours ago\nCore tap ORIGIN: https://github.com/Homebrew/homebrew-core\nCore tap HEAD: e130cbafee3cee086d517558d82068ae9fa8cde1\nCore tap last commit: 6 hours ago\nHOMEBREW_PREFIX: /usr/local\nHOMEBREW_REPOSITORY: /usr/local/Homebrew\nHOMEBREW_CELLAR: /usr/local/Cellar\nHOMEBREW_BOTTLE_DOMAIN: https://homebrew.bintray.com\nCPU: quad-core 64-bit ivybridge\nHomebrew Ruby: 2.0.0-p648\nClang: 8.0 build 800\nGit: 2.8.4 => /Applications/Xcode.app/Contents/Developer/usr/bin/git\nPerl: /usr/bin/perl\nPython: /usr/bin/python\nRuby: /usr/bin/ruby => /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\nJava: N/A\nmacOS: 10.12-x86_64\nXcode: 8.0\nCLT: 8.0.0.0.1.1472435881\nX11: 2.7.9 => /opt/X11\n$ proxychains4 git clone https://bitbucket.org/superr/superrs-kitchen.git\n[proxychains] config file found: /usr/local/Cellar/proxychains-ng/4.11/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.11\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n    /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'\nCloning into 'superrs-kitchen'...\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n    /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n    /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'\nremote: Counting objects: 582, done.\nremote: Compressing objects: 100% (500/500), done.\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n    /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'\nReceiving objects:  12% (70/582), 1.72 MiB | 29.00 KiB/s\n. I met a different problem.\n$ brew config\nHOMEBREW_VERSION: 1.0.7-7-g6be6ce3\nORIGIN: https://github.com/Homebrew/brew\nHEAD: 6be6ce33e0e5967f8e67801875bff6ab3f99b1ef\nLast commit: 17 hours ago\nCore tap ORIGIN: https://github.com/Homebrew/homebrew-core\nCore tap HEAD: e130cbafee3cee086d517558d82068ae9fa8cde1\nCore tap last commit: 6 hours ago\nHOMEBREW_PREFIX: /usr/local\nHOMEBREW_REPOSITORY: /usr/local/Homebrew\nHOMEBREW_CELLAR: /usr/local/Cellar\nHOMEBREW_BOTTLE_DOMAIN: https://homebrew.bintray.com\nCPU: quad-core 64-bit ivybridge\nHomebrew Ruby: 2.0.0-p648\nClang: 8.0 build 800\nGit: 2.8.4 => /Applications/Xcode.app/Contents/Developer/usr/bin/git\nPerl: /usr/bin/perl\nPython: /usr/bin/python\nRuby: /usr/bin/ruby => /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\nJava: N/A\nmacOS: 10.12-x86_64\nXcode: 8.0\nCLT: 8.0.0.0.1.1472435881\nX11: 2.7.9 => /opt/X11\n$ proxychains4 git clone https://bitbucket.org/superr/superrs-kitchen.git\n[proxychains] config file found: /usr/local/Cellar/proxychains-ng/4.11/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.11\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n    /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'\nCloning into 'superrs-kitchen'...\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n    /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n    /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'\nremote: Counting objects: 582, done.\nremote: Compressing objects: 100% (500/500), done.\ndyld: warning: could not load inserted library '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib' into library validated process because no suitable image found.  Did find:\n    /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib: code signing blocked mmap() of '/usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib'\nReceiving objects:  12% (70/582), 1.72 MiB | 29.00 KiB/s\n. ",
    "ucoker": "Same issue on the 64-bit Ubutun 14.04  \nbash\n$ proxychains4 curl twitter.com\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\nproxychains can't load process....: No such file or directory\n. I try   sudo apt-get install proxychains\nIt's worked.\nproxychains version:    3.1-6\nOS Version:   ubuntu 14.04\n. @rofl0r ,How to know the correct version of proxychains? \n- my proxychains.conf  \nthe version is VER 3.1\n``` bash\nproxychains.conf  VER 3.1\n\nHTTP, SOCKS4, SOCKS5 tunneling proxifier with DNS.\n\nThe option below identifies how the ProxyList is treated.\nonly one option should be uncommented at time,\notherwise the last appearing option will be accepted\n\ndynamic_chain\n\nDynamic - Each connection will be done via chained proxies\nall proxies chained in the order as they appear in the list\nat least one proxy must be online to play in chain\n(dead proxies are skipped)\notherwise EINTR is returned to the app\n\nstrict_chain\n\nStrict - Each connection will be done via chained proxies\nall proxies chained in the order as they appear in the list\nall proxies must be online to play in chain\notherwise EINTR is returned to the app\n\nrandom_chain\n\nRandom - Each connection will be done via random proxy\n(or proxy chain, see  chain_len) from the list.\nthis option is good to test your IDS :)\nMake sense only if random_chain\nchain_len = 2\nQuiet mode (no output from library)\nquiet_mode\nProxy DNS requests - no leak for DNS data\nproxy_dns\nSome timeouts in milliseconds\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nProxyList format\ntype  host  port [user pass]\n(values separated by 'tab' or 'blank')\n\n\nExamples:\n\nsocks5  192.168.67.78   1080    lamer   secret\nhttp    192.168.89.3    8080    justu   hidden\nsocks4  192.168.1.49    1080\nhttp    192.168.39.93   8080\n\n\nproxy types: http, socks4, socks5\n( auth types supported: \"basic\"-http  \"user/pass\"-socks )\n\n[ProxyList]\nadd proxy here ...\nmeanwile\ndefaults set to \"tor\"\nsocks5  127.0.0.1 1080\n``\n- the output ofproxychains4 bash -c export`\nthe version is proxychains-ng 4.11?\noutput:\nbash\n  root@my:~# proxychains4 bash -c export\n  [proxychains] config file found: /etc/proxychains.conf\n  [proxychains] preloading /usr/lib/libproxychains4.so\n  [proxychains] DLL init: proxychains-ng 4.11-git-9-gcf9a16d\n  declare -x HOME=\"/root\"\n  declare -x LANG=\"en_US.UTF-8\"\n  declare -x LANGUAGE=\"en_US:\"\n  declare -x LD_PRELOAD=\"/usr/lib/libproxychains4.so\"\n  declare -x LESSCLOSE=\"/usr/bin/lesspipe %s %s\"\n  declare -x LESSOPEN=\"| /usr/bin/lesspipe %s\"\n  declare -x LOGNAME=\"root\"\n  declare -x LS_COLORS=\"rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:\"\n  declare -x MAIL=\"/var/mail/root\"\n  declare -x OLDPWD\n  declare -x PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\"\n  declare -x PROXYCHAINS_CONF_FILE=\"/etc/proxychains.conf\"\n  declare -x PWD=\"/root\"\n  declare -x SHELL=\"/bin/bash\"\n  declare -x SHLVL=\"2\"\n  declare -x SSH_CLIENT=\"xxx.xxx.xxx.xxx xxx 22\"\n  declare -x SSH_CONNECTION=\"x.x.x.x x x.x.x.x 22\"\n  declare -x SSH_TTY=\"/dev/pts/0\"\n  declare -x TERM=\"xterm-256color\"\n  declare -x USER=\"root\"\n  declare -x XDG_RUNTIME_DIR=\"/run/user/0\"\n  declare -x XDG_SESSION_ID=\"12\"\n  declare -x _=\"/usr/bin/proxychains4\"\nso what is the correct version ? And this version works for me.\n. I try to download source and compiled it.\nIt works for me now.\nThanks.\n``` bash\ndownload the source of proxychains-ng\ngit clone https://github.com/rofl0r/proxychains-ng.git\ncd proxychains-ng\nconfigure and install\n./configure --prefix=/usr --sysconfdir=/etc\nmake\nsudo make install\nsudo make install-config # installs /etc/proxychains.conf\n```\nTest:\nbash\n$ proxychains4 curl twitter.com\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.11-git-9-gcf9a16d\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  twitter.com:80  ...  OK\n. Same issue on the 64-bit Ubutun 14.04  \nbash\n$ proxychains4 curl twitter.com\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\nproxychains can't load process....: No such file or directory\n. I try   sudo apt-get install proxychains\nIt's worked.\nproxychains version:    3.1-6\nOS Version:   ubuntu 14.04\n. @rofl0r ,How to know the correct version of proxychains? \n- my proxychains.conf  \nthe version is VER 3.1\n``` bash\nproxychains.conf  VER 3.1\n\nHTTP, SOCKS4, SOCKS5 tunneling proxifier with DNS.\n\nThe option below identifies how the ProxyList is treated.\nonly one option should be uncommented at time,\notherwise the last appearing option will be accepted\n\ndynamic_chain\n\nDynamic - Each connection will be done via chained proxies\nall proxies chained in the order as they appear in the list\nat least one proxy must be online to play in chain\n(dead proxies are skipped)\notherwise EINTR is returned to the app\n\nstrict_chain\n\nStrict - Each connection will be done via chained proxies\nall proxies chained in the order as they appear in the list\nall proxies must be online to play in chain\notherwise EINTR is returned to the app\n\nrandom_chain\n\nRandom - Each connection will be done via random proxy\n(or proxy chain, see  chain_len) from the list.\nthis option is good to test your IDS :)\nMake sense only if random_chain\nchain_len = 2\nQuiet mode (no output from library)\nquiet_mode\nProxy DNS requests - no leak for DNS data\nproxy_dns\nSome timeouts in milliseconds\ntcp_read_time_out 15000\ntcp_connect_time_out 8000\nProxyList format\ntype  host  port [user pass]\n(values separated by 'tab' or 'blank')\n\n\nExamples:\n\nsocks5  192.168.67.78   1080    lamer   secret\nhttp    192.168.89.3    8080    justu   hidden\nsocks4  192.168.1.49    1080\nhttp    192.168.39.93   8080\n\n\nproxy types: http, socks4, socks5\n( auth types supported: \"basic\"-http  \"user/pass\"-socks )\n\n[ProxyList]\nadd proxy here ...\nmeanwile\ndefaults set to \"tor\"\nsocks5  127.0.0.1 1080\n``\n- the output ofproxychains4 bash -c export`\nthe version is proxychains-ng 4.11?\noutput:\nbash\n  root@my:~# proxychains4 bash -c export\n  [proxychains] config file found: /etc/proxychains.conf\n  [proxychains] preloading /usr/lib/libproxychains4.so\n  [proxychains] DLL init: proxychains-ng 4.11-git-9-gcf9a16d\n  declare -x HOME=\"/root\"\n  declare -x LANG=\"en_US.UTF-8\"\n  declare -x LANGUAGE=\"en_US:\"\n  declare -x LD_PRELOAD=\"/usr/lib/libproxychains4.so\"\n  declare -x LESSCLOSE=\"/usr/bin/lesspipe %s %s\"\n  declare -x LESSOPEN=\"| /usr/bin/lesspipe %s\"\n  declare -x LOGNAME=\"root\"\n  declare -x LS_COLORS=\"rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:\"\n  declare -x MAIL=\"/var/mail/root\"\n  declare -x OLDPWD\n  declare -x PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\"\n  declare -x PROXYCHAINS_CONF_FILE=\"/etc/proxychains.conf\"\n  declare -x PWD=\"/root\"\n  declare -x SHELL=\"/bin/bash\"\n  declare -x SHLVL=\"2\"\n  declare -x SSH_CLIENT=\"xxx.xxx.xxx.xxx xxx 22\"\n  declare -x SSH_CONNECTION=\"x.x.x.x x x.x.x.x 22\"\n  declare -x SSH_TTY=\"/dev/pts/0\"\n  declare -x TERM=\"xterm-256color\"\n  declare -x USER=\"root\"\n  declare -x XDG_RUNTIME_DIR=\"/run/user/0\"\n  declare -x XDG_SESSION_ID=\"12\"\n  declare -x _=\"/usr/bin/proxychains4\"\nso what is the correct version ? And this version works for me.\n. I try to download source and compiled it.\nIt works for me now.\nThanks.\n``` bash\ndownload the source of proxychains-ng\ngit clone https://github.com/rofl0r/proxychains-ng.git\ncd proxychains-ng\nconfigure and install\n./configure --prefix=/usr --sysconfdir=/etc\nmake\nsudo make install\nsudo make install-config # installs /etc/proxychains.conf\n```\nTest:\nbash\n$ proxychains4 curl twitter.com\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.11-git-9-gcf9a16d\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  twitter.com:80  ...  OK\n. ",
    "Leviathan1995": "@ucoker maybe you not install curl\nsudo apt-get install curl\n$ proxychains4 curl www.google.com\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.11\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  www.google.com:80  ...  OK\n<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>302 Moved</TITLE></HEAD><BODY>\n<H1>302 Moved</H1>\nThe document has moved\n<A HREF=\"http://www.google.com.vn/?gfe_rd=cr&amp;ei=xNoPWbyzJYbM8gfJrY1A\">here</A>.\n</BODY></HTML>\n. @ucoker maybe you not installcurlsudo apt-get install curl`\n$ proxychains4 curl www.google.com\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.11\n[proxychains] Strict chain  ...  127.0.0.1:1080  ...  www.google.com:80  ...  OK\n<HTML><HEAD><meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n<TITLE>302 Moved</TITLE></HEAD><BODY>\n<H1>302 Moved</H1>\nThe document has moved\n<A HREF=\"http://www.google.com.vn/?gfe_rd=cr&amp;ei=xNoPWbyzJYbM8gfJrY1A\">here</A>.\n</BODY></HTML>\n`. ",
    "ky0nch3ng": "So do i.\n. So do i.\n. ",
    "osiewers": "I'm trying to forward a port from the remote machine to my local computer in order to be able to reach some services from a server I connected to.\nThis works fine one way (making services like database available on my local computer), but the other way around it doesn't.\n. I'm trying to forward a port from the remote machine to my local computer in order to be able to reach some services from a server I connected to.\nThis works fine one way (making services like database available on my local computer), but the other way around it doesn't.\n. ",
    "smkingsoft": "it seems can not wake up epoll_wait.\nproxychains-ng use poll ?\nepoll and poll or select mode is different?. so so...\ni use nginx as reverse proxy.\nnginx ->proxychains-ng ->shadowsocks ->internet\nnginx default use epoll event, then nginx can not receive http response.\nnow i config nginx use poll event, that is ok\n. use\nproxychains4 nginx arguments\nstart nginx\nconfig proxychains\n socks5 ip port. 1. config nginx as a resolver proxy\n2. config nginx use epoll mode\n3. config  proxychains use socks5 proxy \n4. use cmd: proxychains4 nginx [arguments] start nginx. it seems can not wake up epoll_wait.\nproxychains-ng use poll ?\nepoll and poll or select mode is different?. so so...\ni use nginx as reverse proxy.\nnginx ->proxychains-ng ->shadowsocks ->internet\nnginx default use epoll event, then nginx can not receive http response.\nnow i config nginx use poll event, that is ok\n. use\nproxychains4 nginx arguments\nstart nginx\nconfig proxychains\n socks5 ip port. 1. config nginx as a resolver proxy\n2. config nginx use epoll mode\n3. config  proxychains use socks5 proxy \n4. use cmd: proxychains4 nginx [arguments] start nginx. ",
    "itskeKs": "sorry to pull it back up but @smkingsoft would you please explain how you manage to work it like this? maybe you can post a config of yours? i am trying the same but cant manage to get it to work :(. sorry to pull it back up but @smkingsoft would you please explain how you manage to work it like this? maybe you can post a config of yours? i am trying the same but cant manage to get it to work :(. ",
    "urdarinda": "I have no CC and CFLAGS exported in my variables\nwhat I am doing is\nCC=\"gcc -m32\" ./configure\nmake. I tried putting \nexport LD_PRELOAD=/usr/local/lib/libproxychains4.so\ninto the steamcmd.sh just before the actual call , it does solve the preload issue but still throws out 407 error.\nAlso , I tried directly running the steam binary without the steamcmd wrapper, still the same error.\nI get the same error whether I use the proxychains4 wrapper or not .\n. I have no CC and CFLAGS exported in my variables\nwhat I am doing is\nCC=\"gcc -m32\" ./configure\nmake. I tried putting \nexport LD_PRELOAD=/usr/local/lib/libproxychains4.so\ninto the steamcmd.sh just before the actual call , it does solve the preload issue but still throws out 407 error.\nAlso , I tried directly running the steam binary without the steamcmd wrapper, still the same error.\nI get the same error whether I use the proxychains4 wrapper or not .\n. ",
    "IanSmith123": "No.... What stupid guyI am. I can use shadowsocks client in terminal then use \nsocks5 127.0.0.1 1080\nEverything goes right.\nThanks anyway.\nLes1ie\n2017.1.16. No.... What stupid guyI am. I can use shadowsocks client in terminal then use \nsocks5 127.0.0.1 1080\nEverything goes right.\nThanks anyway.\nLes1ie\n2017.1.16. ",
    "drunkard": "Is it should be like this?\n22:35:47 ~ $ readelf -a /usr/lib64/libproxychains.so.4.12 | grep -i NEEDED\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]. Thank you very much, issue solved.. Yes, they fixed.. Is it should be like this?\n22:35:47 ~ $ readelf -a /usr/lib64/libproxychains.so.4.12 | grep -i NEEDED\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]. Thank you very much, issue solved.. Yes, they fixed.. ",
    "corford": "Thanks for the detailed reply. Agree such a feature is not worth the code complexity given the changes that would be necessary to implement it.\nAs for the \"why\". In our case we were interested in it as a \"hackish\" workaround for some limitations with how squid sends requests to upstream cache_peers after SSL interception. By wrapping squid with proxychains we solve the upstream problem but lose the ability to further process the request once it hits our upstream cache_peer (since at that point all the upstream sees is a binary CONNECT tunnel). Some extra headers with that CONNECT request would have given us a few more hooks to play with :)\n. Sorry @rofl0r I've just re-read your reply and am wondering if we are talking about the same thing? When I talk about CONNECT I am referring to the HTTP method for tunnelling tcp traffic through a proxy to an origin server, not the libc connect() call.\nMy (very) naive understanding was that it might be possible to include additional headers along with the Host header on outgoing CONNECT requests (which seems to be the approach taken by the request package I linked to at the top of this issue). Upstream squid could then pick up these extra headers and use them to further process the request.. Thanks for the detailed reply. Agree such a feature is not worth the code complexity given the changes that would be necessary to implement it.\nAs for the \"why\". In our case we were interested in it as a \"hackish\" workaround for some limitations with how squid sends requests to upstream cache_peers after SSL interception. By wrapping squid with proxychains we solve the upstream problem but lose the ability to further process the request once it hits our upstream cache_peer (since at that point all the upstream sees is a binary CONNECT tunnel). Some extra headers with that CONNECT request would have given us a few more hooks to play with :)\n. Sorry @rofl0r I've just re-read your reply and am wondering if we are talking about the same thing? When I talk about CONNECT I am referring to the HTTP method for tunnelling tcp traffic through a proxy to an origin server, not the libc connect() call.\nMy (very) naive understanding was that it might be possible to include additional headers along with the Host header on outgoing CONNECT requests (which seems to be the approach taken by the request package I linked to at the top of this issue). Upstream squid could then pick up these extra headers and use them to further process the request.. ",
    "Frankr0": "So do I.. So do I.. ",
    "hoooooomp": "Hi, I was away for the weekend. Tried again just now and it just works.\nI installed proxychains through YaST.\nThanks anyway!. Hi, I was away for the weekend. Tried again just now and it just works.\nI installed proxychains through YaST.\nThanks anyway!. ",
    "zhao-ji": "ok!. ok!. ",
    "llinshenzhen": "thanks so much. thanks so much. ",
    "yjp211": "\nlast break at getnameinfo\n. root@t2:~/proxychains-ng# ./proxychains4 hostname -i\n[proxychains] config file found: /usr/local//etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\nDEBUG:init_lib_wrapper called from gcc_init\nDEBUG:pid[14965]:at_init\nDEBUG:added localnet: netaddr=0.0.0.0, netmask=0.0.0.0\nDEBUG:pid[14965]:wait_data\nDEBUG:[play] socks5 127.0.0.1:3088\n[proxychains] DLL init: proxychains-ng 4.12\nDEBUG:loaded symbol 'connect' real addr 0x7fd4483b8530  wrapped addr 0x7fd448899ceb\nDEBUG:loaded symbol 'sendto' real addr 0x7fd4483b88f0  wrapped addr 0x7fd44889a716\nDEBUG:loaded symbol 'gethostbyname' real addr 0x7fd4483ca090  wrapped addr 0x7fd44889a225\nDEBUG:loaded symbol 'freeaddrinfo' real addr 0x7fd44839fd10  wrapped addr 0x7fd44889a33e\nDEBUG:loaded symbol 'gethostbyaddr' real addr 0x7fd4483c9b00  wrapped addr 0x7fd44889a602\nDEBUG:loaded symbol 'close' real addr 0x7fd4483a7d00  wrapped addr 0x7fd448899be9\nDEBUG:getaddrinfo: t2 null\nDEBUG:pid[14965]:proxy_getaddrinfo\nDEBUG:pid[14965]:proxy_gethostbyname\nDEBUG:return hostent space\nDEBUG:pid[14965]:pc_getnameinfo\n127.0.0.1\nroot@t2:~/proxychains-ng#. src/core.c \n\nI modified the program, so that can make the rmi  client work.  but I don't know whether other arrival, I also want to use it to agent for the DNS\nhttps://github.com/yjp211/proxychains-ng/commit/1d5cd6cbfa6735146cd2b205d3301c6a7df84c36. \nroot@t2:/tmp/yjp211/proxychains-ng# ./proxychains4 hostname -i\n[proxychains] config file found: /tmp/yjp211/proxychains-ng/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.12-git-1-g1d5cd6c\nt2\n192.168.40.232\nt2  is the machine hostname\nUse proxychains4 and shadowsocks  agent my service go international line to speed up the access, rather than using a global VPN.   I modified the code, fear will have influence on this.\nThe  program (after modify) has  been running for 10 hours, it seems no problem :)\n. yes\nif i remove t2 entry, the rmi client can't work no matter whether use the proxy. \n\nlast break at getnameinfo\n. root@t2:~/proxychains-ng# ./proxychains4 hostname -i\n[proxychains] config file found: /usr/local//etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\nDEBUG:init_lib_wrapper called from gcc_init\nDEBUG:pid[14965]:at_init\nDEBUG:added localnet: netaddr=0.0.0.0, netmask=0.0.0.0\nDEBUG:pid[14965]:wait_data\nDEBUG:[play] socks5 127.0.0.1:3088\n[proxychains] DLL init: proxychains-ng 4.12\nDEBUG:loaded symbol 'connect' real addr 0x7fd4483b8530  wrapped addr 0x7fd448899ceb\nDEBUG:loaded symbol 'sendto' real addr 0x7fd4483b88f0  wrapped addr 0x7fd44889a716\nDEBUG:loaded symbol 'gethostbyname' real addr 0x7fd4483ca090  wrapped addr 0x7fd44889a225\nDEBUG:loaded symbol 'freeaddrinfo' real addr 0x7fd44839fd10  wrapped addr 0x7fd44889a33e\nDEBUG:loaded symbol 'gethostbyaddr' real addr 0x7fd4483c9b00  wrapped addr 0x7fd44889a602\nDEBUG:loaded symbol 'close' real addr 0x7fd4483a7d00  wrapped addr 0x7fd448899be9\nDEBUG:getaddrinfo: t2 null\nDEBUG:pid[14965]:proxy_getaddrinfo\nDEBUG:pid[14965]:proxy_gethostbyname\nDEBUG:return hostent space\nDEBUG:pid[14965]:pc_getnameinfo\n127.0.0.1\nroot@t2:~/proxychains-ng#. src/core.c \n\nI modified the program, so that can make the rmi  client work.  but I don't know whether other arrival, I also want to use it to agent for the DNS\nhttps://github.com/yjp211/proxychains-ng/commit/1d5cd6cbfa6735146cd2b205d3301c6a7df84c36. \nroot@t2:/tmp/yjp211/proxychains-ng# ./proxychains4 hostname -i\n[proxychains] config file found: /tmp/yjp211/proxychains-ng/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.12-git-1-g1d5cd6c\nt2\n192.168.40.232\nt2  is the machine hostname\nUse proxychains4 and shadowsocks  agent my service go international line to speed up the access, rather than using a global VPN.   I modified the code, fear will have influence on this.\nThe  program (after modify) has  been running for 10 hours, it seems no problem :)\n. yes\nif i remove t2 entry, the rmi client can't work no matter whether use the proxy. ",
    "opsarno": "@rofl0r Because I want the designated public network request does not take the agent.\nTerminal connected to the intelligent agent. @rofl0r  I think this scene will be a lot in China, such as FE using npm install to install some programs, npm package does not through the agent, and  the package dependency to download through the agent.\nFinally , Thanks a lot.. @rofl0r  thanks. . @rofl0r Because I want the designated public network request does not take the agent.\nTerminal connected to the intelligent agent. @rofl0r  I think this scene will be a lot in China, such as FE using npm install to install some programs, npm package does not through the agent, and  the package dependency to download through the agent.\nFinally , Thanks a lot.. @rofl0r  thanks. . ",
    "zengzhi2015": "This problem has been solved. I have changed the last line of '/usr/local/etc/proxychains.conf' to 'socks5 127.0.0.1 1080' and everything is OK. (Who changed my settings? It is weird!). This problem has been solved. I have changed the last line of '/usr/local/etc/proxychains.conf' to 'socks5 127.0.0.1 1080' and everything is OK. (Who changed my settings? It is weird!). ",
    "ma6174": "I also tested some other software similar to proxychains, kneesocks(with some  fix) works well on linux with MongoDB version 3.2 and 3.4, so there must be some potential bug in proxychains, not in mongodb. \nThere are 4846 commits between MongoDB 3.0 and 3.2, 12937 file changes, it should be some difficult to find the exact commit that broke it. can you find something different from kneesocks?. After some debugging, I found after this commit https://github.com/mongodb/mongo/commit/b256b88c78c28e37b033fcb0134e75649fbe3d5c proxychains don't work. It looks proxychains not work well with asio network library?. MongoDB removed the thread based network interface from code: https://github.com/mongodb/mongo/commit/a998887902dfd9cb6f125233c86361064f80c57e after switch network interface to ASIO, it cannot be simply revert this two commit because some future changes may not support thread based network interface and compile failed.. Here is the full log of mongod and proxychains both with debug open: \n$ ./proxychains4 -f proxychains.conf ./mongod --dbpath data1 --replSet test --port 1111 -vv\n[proxychains] config file found: proxychains.conf\n[proxychains] preloading ./libproxychains4.so\nDEBUG:init_lib_wrapper called from gcc_init\nDEBUG:pid[33275]:at_init\nDEBUG:pid[33275]:wait_data\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] DLL init: proxychains-ng 4.12\nDEBUG:loaded symbol 'connect' real addr 0x7f42e945f710  wrapped addr 0x7f42ea2afdd9\nDEBUG:loaded symbol 'sendto' real addr 0x7f42e945f9f0  wrapped addr 0x7f42ea2b0804\nDEBUG:loaded symbol 'gethostbyname' real addr 0x7f42e9197ea0  wrapped addr 0x7f42ea2b0313\nDEBUG:loaded symbol 'getaddrinfo' real addr 0x7f42e915abc0  wrapped addr 0x7f42ea2b037f\nDEBUG:loaded symbol 'freeaddrinfo' real addr 0x7f42e915b830  wrapped addr 0x7f42ea2b042c\nDEBUG:loaded symbol 'gethostbyaddr' real addr 0x7f42e91978e0  wrapped addr 0x7f42ea2b06f0\nDEBUG:loaded symbol 'getnameinfo' real addr 0x7f42e919d4c0  wrapped addr 0x7f42ea2ac1c0\nDEBUG:loaded symbol 'close' real addr 0x7f42e945f3e0  wrapped addr 0x7f42ea2afcd7\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] MongoDB starting : pid=33275 port=1111 dbpath=data1 64-bit host=cs48\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] db version v3.4.4-12-gc8fdff8\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] git version: c8fdff8e541fd366a6cf72a5bbba916498625a1a\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] allocator: tcmalloc\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] modules: none\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] build environment:\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten]     distarch: x86_64\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten]     target_arch: x86_64\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] options: { net: { port: 1111 }, replication: { replSet: \"test\" }, storage: { dbPath: \"data1\" }, systemLog: { verbosity: 2 } }\n2017-05-01T15:18:25.792+0800 D NETWORK  [initandlisten] fd limit hard:65535 soft:65535 max conn: 52428\nDEBUG:getaddrinfo: 0.0.0.0 1111\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f42ef8c12c0\nDEBUG:pid[33275]:proxy_freeaddrinfo\n2017-05-01T15:18:25.828+0800 I STORAGE  [initandlisten]\n2017-05-01T15:18:25.828+0800 I STORAGE  [initandlisten] ** WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine\n2017-05-01T15:18:25.828+0800 I STORAGE  [initandlisten] **          See http://dochub.mongodb.org/core/prodnotes-filesystem\n2017-05-01T15:18:25.829+0800 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=63897M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),\n2017-05-01T15:18:25.848+0800 D COMMAND  [WTJournalFlusher] BackgroundJob starting: WTJournalFlusher\n2017-05-01T15:18:25.848+0800 D STORAGE  [WTJournalFlusher] starting WTJournalFlusher thread\n2017-05-01T15:18:25.850+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createRecordStore uri: table:_mdb_catalog config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:25.853+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:_mdb_catalog ok range 1 -> 1 current: 1\n2017-05-01T15:18:25.858+0800 D STORAGE  [initandlisten] flushing directory data1\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten] ** WARNING: You are running on a NUMA machine.\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten] **          We suggest launching mongod like this to avoid performance problems:\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] **              numactl --interleave=all mongod [other options]\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is 'always'.\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] **        We suggest setting it to 'never'\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is 'always'.\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] **        We suggest setting it to 'never'\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] enter repairDatabases (to check pdfile version #)\n2017-05-01T15:18:25.859+0800 D -        [initandlisten] reloading view catalog for database local\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] Checking node for SERVER-23299 eligibility\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] Didn't find local.startup_log\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] done repairDatabases\n2017-05-01T15:18:25.859+0800 D QUERY    [initandlisten] Running query: query: {} sort: {} projection: {}\n2017-05-01T15:18:25.859+0800 D QUERY    [initandlisten] Collection admin.system.roles does not exist. Using EOF plan: query: {} sort: {} projection: {}\n2017-05-01T15:18:25.859+0800 I COMMAND  [initandlisten] query admin.system.roles planSummary: EOF ntoreturn:0 ntoskip:0 keysExamined:0 docsExamined:0 cursorExhausted:1 numYields:0 nreturned:0 reslen:20 locks:{ Global: { acquireCount: { r: 6, w: 1, W: 1 } }, Database: { acquireCount: { r: 2, W: 1 } }, Collection: { acquireCount: { r: 2 } } } 0ms\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] create collection local.startup_log { capped: true, size: 10485760 }\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] stored meta data for local.startup_log @ RecordId(1)\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createRecordStore uri: table:collection-0--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:25.862+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-0--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:25.862+0800 D STORAGE  [initandlisten] local.startup_log: clearing plan cache - collection info cache reset\n2017-05-01T15:18:25.862+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createSortedDataInterface ident: index-1--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.startup_log\" }),\n2017-05-01T15:18:25.862+0800 D STORAGE  [initandlisten] create uri: table:index-1--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.startup_log\" }),\n2017-05-01T15:18:25.865+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-1--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:25.865+0800 D STORAGE  [initandlisten] local.startup_log: clearing plan cache - collection info cache reset\n2017-05-01T15:18:25.865+0800 D INDEX    [initandlisten] marking index _id_ as ready in snapshot id 5\n2017-05-01T15:18:25.866+0800 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory 'data1/diagnostic.data'\n2017-05-01T15:18:25.866+0800 D INDEX    [initandlisten] checking complete\n2017-05-01T15:18:25.866+0800 D QUERY    [initandlisten] Collection local.me does not exist. Using EOF plan: query: {} sort: {} projection: {}\n2017-05-01T15:18:25.866+0800 D STORAGE  [initandlisten] stored meta data for local.me @ RecordId(3)\n2017-05-01T15:18:25.866+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createRecordStore uri: table:collection-2--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:25.869+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-2--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:25.869+0800 D STORAGE  [initandlisten] local.me: clearing plan cache - collection info cache reset\n2017-05-01T15:18:25.869+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createSortedDataInterface ident: index-3--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.me\" }),\n2017-05-01T15:18:25.869+0800 D STORAGE  [initandlisten] create uri: table:index-3--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.me\" }),\n2017-05-01T15:18:25.871+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-3--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:25.871+0800 D STORAGE  [initandlisten] local.me: clearing plan cache - collection info cache reset\n2017-05-01T15:18:25.871+0800 D INDEX    [initandlisten] marking index _id_ as ready in snapshot id 6\n2017-05-01T15:18:25.872+0800 D QUERY    [initandlisten] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:25.872+0800 I REPL     [initandlisten] Did not find local voted for document at startup.\n2017-05-01T15:18:25.872+0800 I REPL     [initandlisten] Did not find local replica set configuration document at startup;  NoMatchingDocument: Did not find replica set configuration document in local.system.replset\n2017-05-01T15:18:25.872+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] The NetworkInterfaceASIO worker thread is spinning up\n2017-05-01T15:18:25.872+0800 D EXECUTOR [replExecDBWorker-0] starting thread in pool replExecDBWorker-Pool\n2017-05-01T15:18:25.872+0800 D EXECUTOR [replExecDBWorker-1] starting thread in pool replExecDBWorker-Pool\n2017-05-01T15:18:25.873+0800 D COMMAND  [TTLMonitor] BackgroundJob starting: TTLMonitor\n2017-05-01T15:18:25.873+0800 D COMMAND  [ClientCursorMonitor] BackgroundJob starting: ClientCursorMonitor\n2017-05-01T15:18:25.873+0800 I NETWORK  [thread1] waiting for connections on port 1111\n2017-05-01T15:18:25.873+0800 D COMMAND  [PeriodicTaskRunner] BackgroundJob starting: PeriodicTaskRunner\n2017-05-01T15:18:25.873+0800 D EXECUTOR [replExecDBWorker-2] starting thread in pool replExecDBWorker-Pool\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:18:44.023+0800 I NETWORK  [thread1] connection accepted from 127.0.0.1:39155 #1 (1 connection now open)\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:18:44.023+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:44.023+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:44.023+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:186 locks:{} protocol:op_query 0ms\n2017-05-01T15:18:44.227+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:44.227+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:44.227+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:186 locks:{} protocol:op_query 0ms\n2017-05-01T15:18:49.816+0800 D COMMAND  [conn1] run command admin.$cmd { replSetInitiate: { _id: \"test\", members: [ { _id: 0.0, host: \"10.200.20.56:1111\" } ] } }\n2017-05-01T15:18:49.816+0800 D COMMAND  [conn1] command: replSetInitiate\n2017-05-01T15:18:49.816+0800 I REPL     [conn1] replSetInitiate admin command received from client\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:18:49.817+0800 D NETWORK  [conn1] getBoundAddrs(): [ 127.0.0.1] [ 10.200.20.56] [ 172.17.0.1]\nDEBUG:getaddrinfo: 10.200.20.56 1111\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:18:49.817+0800 D NETWORK  [conn1] getAddrsForHost(\"10.200.20.56:1111\"): [ 10.200.20.56]\nDEBUG:freeaddrinfo 0x7f42ef606f00\nDEBUG:pid[33275]:proxy_freeaddrinfo\n2017-05-01T15:18:49.817+0800 I REPL     [conn1] replSetInitiate config object with 1 members parses ok\n2017-05-01T15:18:49.817+0800 I REPL     [conn1] ******\n2017-05-01T15:18:49.817+0800 I REPL     [conn1] creating replication oplog of size: 21838MB...\n2017-05-01T15:18:49.817+0800 D STORAGE  [conn1] stored meta data for local.oplog.rs @ RecordId(4)\n2017-05-01T15:18:49.817+0800 D STORAGE  [conn1] WiredTigerKVEngine::createRecordStore uri: table:collection-4--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,type=file,memory_page_max=10m,key_format=q,value_format=u,app_metadata=(formatVersion=1,oplogKeyExtractionVersion=1)\n2017-05-01T15:18:49.820+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-4--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.820+0800 I STORAGE  [conn1] Starting WiredTigerRecordStoreThread local.oplog.rs\n2017-05-01T15:18:49.821+0800 I STORAGE  [conn1] The size storer reports that the oplog contains 0 records totaling to 0 bytes\n2017-05-01T15:18:49.821+0800 I STORAGE  [conn1] Scanning the oplog to determine where to place markers for truncation\n2017-05-01T15:18:49.821+0800 D COMMAND  [WT RecordStoreThread: local.oplog.rs] BackgroundJob starting: WT RecordStoreThread: local.oplog.rs\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] local.oplog.rs: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerKVEngine::flushAllFiles\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerSizeStorer::storeInto table:_mdb_catalog -> { numRecords: 4, dataSize: 915 }\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerSizeStorer::storeInto table:collection-0--3505979310332637255 -> { numRecords: 1, dataSize: 1499 }\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerSizeStorer::storeInto table:collection-2--3505979310332637255 -> { numRecords: 1, dataSize: 37 }\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerSizeStorer::storeInto table:collection-4--3505979310332637255 -> { numRecords: 0, dataSize: 0 }\n2017-05-01T15:18:49.830+0800 I REPL     [conn1] ******\n2017-05-01T15:18:49.830+0800 D STORAGE  [conn1] stored meta data for local.system.replset @ RecordId(5)\n2017-05-01T15:18:49.830+0800 D STORAGE  [conn1] WiredTigerKVEngine::createRecordStore uri: table:collection-5--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:49.833+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-5--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.833+0800 D STORAGE  [conn1] local.system.replset: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.833+0800 D STORAGE  [conn1] WiredTigerKVEngine::createSortedDataInterface ident: index-6--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.system.replset\" }),\n2017-05-01T15:18:49.833+0800 D STORAGE  [conn1] create uri: table:index-6--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.system.replset\" }),\n2017-05-01T15:18:49.836+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-6--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:49.836+0800 D STORAGE  [conn1] local.system.replset: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.836+0800 D INDEX    [conn1] marking index _id_ as ready in snapshot id 44\n2017-05-01T15:18:49.836+0800 D QUERY    [conn1] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:49.837+0800 D STORAGE  [conn1] stored meta data for local.replset.minvalid @ RecordId(6)\n2017-05-01T15:18:49.837+0800 D STORAGE  [conn1] WiredTigerKVEngine::createRecordStore uri: table:collection-7--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:49.840+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-7--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.840+0800 D STORAGE  [conn1] local.replset.minvalid: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.840+0800 D STORAGE  [conn1] WiredTigerKVEngine::createSortedDataInterface ident: index-8--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.replset.minvalid\" }),\n2017-05-01T15:18:49.840+0800 D STORAGE  [conn1] create uri: table:index-8--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.replset.minvalid\" }),\n2017-05-01T15:18:49.843+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-8--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:49.843+0800 D STORAGE  [conn1] local.replset.minvalid: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.843+0800 D INDEX    [conn1] marking index _id_ as ready in snapshot id 45\n2017-05-01T15:18:49.843+0800 D QUERY    [conn1] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:49.843+0800 D -        [conn1] reloading view catalog for database admin\n2017-05-01T15:18:49.843+0800 D STORAGE  [conn1] stored meta data for admin.system.version @ RecordId(7)\n2017-05-01T15:18:49.843+0800 D STORAGE  [conn1] WiredTigerKVEngine::createRecordStore uri: table:collection-9--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:49.846+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-9--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.846+0800 D STORAGE  [conn1] admin.system.version: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.847+0800 D STORAGE  [conn1] WiredTigerKVEngine::createSortedDataInterface ident: index-10--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"admin.system.version\" }),\n2017-05-01T15:18:49.847+0800 D STORAGE  [conn1] create uri: table:index-10--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"admin.system.version\" }),\n2017-05-01T15:18:49.849+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-10--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:49.849+0800 D STORAGE  [conn1] admin.system.version: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.849+0800 D INDEX    [conn1] marking index _id_ as ready in snapshot id 47\n2017-05-01T15:18:49.849+0800 D STORAGE  [conn1] WiredTigerKVEngine::createSortedDataInterface ident: index-11--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=8,infoObj={ \"v\" : 2, \"key\" : { \"version\" : 1 }, \"name\" : \"incompatible_with_version_32\", \"ns\" : \"admin.system.version\" }),\n2017-05-01T15:18:49.849+0800 D STORAGE  [conn1] create uri: table:index-11--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=8,infoObj={ \"v\" : 2, \"key\" : { \"version\" : 1 }, \"name\" : \"incompatible_with_version_32\", \"ns\" : \"admin.system.version\" }),\n2017-05-01T15:18:49.852+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-11--3505979310332637255 ok range 6 -> 8 current: 8\n2017-05-01T15:18:49.852+0800 D STORAGE  [conn1] admin.system.version: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.852+0800 I INDEX    [conn1] build index on: admin.system.version properties: { v: 2, key: { version: 1 }, name: \"incompatible_with_version_32\", ns: \"admin.system.version\" }\n2017-05-01T15:18:49.852+0800 I INDEX    [conn1]      building index using bulk method; build may temporarily use up to 500 megabytes of RAM\n2017-05-01T15:18:49.852+0800 D INDEX    [conn1]      bulk commit starting for index: incompatible_with_version_32\n2017-05-01T15:18:49.853+0800 D INDEX    [conn1]      done building bottom layer, going to commit\n2017-05-01T15:18:49.853+0800 I INDEX    [conn1] build index done.  scanned 0 total records. 0 secs\n2017-05-01T15:18:49.853+0800 D INDEX    [conn1] marking index incompatible_with_version_32 as ready in snapshot id 50\n2017-05-01T15:18:49.854+0800 I COMMAND  [conn1] setting featureCompatibilityVersion to 3.4\n2017-05-01T15:18:49.854+0800 D REPL     [conn1] Updated term in topology coordinator to 0 due to new config\n2017-05-01T15:18:49.854+0800 I REPL     [conn1] New replica set config in use: { _id: \"test\", version: 1, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('5906e159c7e0c4c709f69f96') } }\n2017-05-01T15:18:49.854+0800 I REPL     [conn1] This node is 10.200.20.56:1111 in the config\n2017-05-01T15:18:49.854+0800 I REPL     [conn1] transition to STARTUP2\n2017-05-01T15:18:49.854+0800 I REPL     [conn1] Starting replication storage threads\n2017-05-01T15:18:49.854+0800 D ASIO     [NetworkInterfaceASIO-RS-0] The NetworkInterfaceASIO worker thread is spinning up\n2017-05-01T15:18:49.854+0800 D EXECUTOR [replication-0] starting thread in pool replication\n2017-05-01T15:18:49.854+0800 D EXECUTOR [initial sync-0] starting thread in pool initial sync-Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 0] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 1] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 2] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 3] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 4] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 5] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 11] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 7] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 12] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 I REPL     [conn1] Starting replication fetcher thread\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 14] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 6] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 8] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 13] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 9] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 10] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 15] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 I REPL     [conn1] Starting replication applier thread\n2017-05-01T15:18:49.855+0800 I REPL     [conn1] Starting replication reporter thread\n2017-05-01T15:18:49.855+0800 I REPL     [rsSync] transition to RECOVERING\n2017-05-01T15:18:49.855+0800 I COMMAND  [conn1] command local.replset.minvalid command: replSetInitiate { v: 2, key: { version: 1 }, ns: \"admin.system.version\", name: \"incompatible_with_version_32\" } numYields:0 reslen:37 locks:{ Global: { acquireCount: { r: 14, w: 8, W: 2 }, acquireWaitCount: { W: 1 }, timeAcquiringMicros: { W: 56 } }, Database: { acquireCount: { r: 2, w: 2, W: 6 } }, Collection: { acquireCount: { r: 2, w: 2 } }, Metadata: { acquireCount: { w: 1 } }, oplog: { acquireCount: { w: 2 } } } protocol:op_query 39ms\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 0] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D REPL     [rsBackgroundSync] bgsync fetch queue set to: { ts: Timestamp 1493623129000|1, t: -1 } 8120695218824595400\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 1] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 2] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 3] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 5] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 6] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 4] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 7] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 8] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 15] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 10] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 11] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 12] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 13] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 14] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 9] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.856+0800 I REPL     [rsSync] transition to SECONDARY\n2017-05-01T15:18:49.856+0800 I REPL     [rsSync] conducting a dry run election to see if we could be elected\n2017-05-01T15:18:49.856+0800 I REPL     [ReplicationExecutor] dry election run succeeded, running for election\n2017-05-01T15:18:49.856+0800 D REPL     [ReplicationExecutor] Updating term from 0 to 1\n2017-05-01T15:18:49.856+0800 D STORAGE  [replExecDBWorker-0] stored meta data for local.replset.election @ RecordId(8)\n2017-05-01T15:18:49.856+0800 D STORAGE  [replExecDBWorker-0] WiredTigerKVEngine::createRecordStore uri: table:collection-12--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:49.856+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:49.856+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:49.856+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:530 locks:{} protocol:op_query 0ms\n2017-05-01T15:18:49.859+0800 D STORAGE  [replExecDBWorker-0] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-12--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.859+0800 D STORAGE  [replExecDBWorker-0] local.replset.election: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.859+0800 D STORAGE  [replExecDBWorker-0] WiredTigerKVEngine::createSortedDataInterface ident: index-13--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=8,infoObj={ \"v\" : 2, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.replset.election\" }),\n2017-05-01T15:18:49.859+0800 D STORAGE  [replExecDBWorker-0] create uri: table:index-13--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=8,infoObj={ \"v\" : 2, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.replset.election\" }),\n2017-05-01T15:18:49.862+0800 D STORAGE  [replExecDBWorker-0] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-13--3505979310332637255 ok range 6 -> 8 current: 8\n2017-05-01T15:18:49.862+0800 D STORAGE  [replExecDBWorker-0] local.replset.election: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.862+0800 D INDEX    [replExecDBWorker-0] marking index _id_ as ready in snapshot id 63\n2017-05-01T15:18:49.862+0800 D QUERY    [replExecDBWorker-0] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:49.862+0800 I REPL     [ReplicationExecutor] election succeeded, assuming primary role in term 1\n2017-05-01T15:18:49.862+0800 I REPL     [ReplicationExecutor] transition to PRIMARY\n2017-05-01T15:18:49.862+0800 I REPL     [ReplicationExecutor] Could not access any nodes within timeout when checking for additional ops to apply before finishing transition to primary. Will move forward with becoming primary anyway.\n2017-05-01T15:18:51.856+0800 D QUERY    [rsSync] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:51.857+0800 D REPL     [rsSync] Ignoring older committed snapshot from before I became primary, optime: { ts: Timestamp 1493623129000|1, t: -1 }, firstOpTimeOfMyTerm: { ts: Timestamp 2147483647000|0, t: 2147483647 }\n2017-05-01T15:18:51.857+0800 D REPL     [rsSync] Removing temporary collections from admin\n2017-05-01T15:18:51.857+0800 D REPL     [rsSync] Ignoring older committed snapshot from before I became primary, optime: { ts: Timestamp 1493623129000|1, t: -1 }, firstOpTimeOfMyTerm: { ts: Timestamp 1493623131000|1, t: 1 }\n2017-05-01T15:18:51.857+0800 I REPL     [rsSync] transition to primary complete; database writes are now permitted\n2017-05-01T15:18:51.871+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623131000|1, t: 1 }\n2017-05-01T15:18:57.098+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:57.098+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:57.098+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:572 locks:{} protocol:op_query 0ms\n2017-05-01T15:18:57.328+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:57.328+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:57.328+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:572 locks:{} protocol:op_query 0ms\n2017-05-01T15:19:00.873+0800 D COMMAND  [conn1] run command local.$cmd { count: \"system.replset\", query: {}, fields: {} }\n2017-05-01T15:19:00.873+0800 I COMMAND  [conn1] command local.system.replset command: count { count: \"system.replset\", query: {}, fields: {} } planSummary: COUNT keysExamined:0 docsExamined:0 numYields:0 reslen:44 locks:{ Global: { acquireCount: { r: 2 } }, Database: { acquireCount: { r: 1 } }, Collection: { acquireCount: { r: 1 } } } protocol:op_query 0ms\n2017-05-01T15:19:00.873+0800 D QUERY    [conn1] Running query: query: {} sort: {} projection: {} ntoreturn=1\n2017-05-01T15:19:00.873+0800 D QUERY    [conn1] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {} ntoreturn=1, planSummary: COLLSCAN\n2017-05-01T15:19:00.873+0800 I COMMAND  [conn1] query local.system.replset planSummary: COLLSCAN ntoskip:0 keysExamined:0 docsExamined:1 cursorExhausted:1 numYields:0 nreturned:1 reslen:473 locks:{ Global: { acquireCount: { r: 2 } }, Database: { acquireCount: { r: 1 } }, Collection: { acquireCount: { r: 1 } } } 0ms\n2017-05-01T15:19:00.874+0800 D COMMAND  [conn1] run command admin.$cmd { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('5906e159c7e0c4c709f69f96') } } }\n2017-05-01T15:19:00.874+0800 D COMMAND  [conn1] command: replSetReconfig\n2017-05-01T15:19:00.874+0800 I REPL     [conn1] replSetReconfig admin command received from client\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:19:00.875+0800 D NETWORK  [conn1] getBoundAddrs(): [ 127.0.0.1] [ 10.200.20.56] [ 172.17.0.1]\nDEBUG:getaddrinfo: 10.200.20.56 1111\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:19:00.875+0800 D NETWORK  [conn1] getAddrsForHost(\"10.200.20.56:1111\"): [ 10.200.20.56]\nDEBUG:freeaddrinfo 0x7f42f2d86900\nDEBUG:pid[33275]:proxy_freeaddrinfo\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f42f2d86900\nDEBUG:pid[33275]:proxy_freeaddrinfo\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[33275]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[33275]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[33275]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[33275]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-01T15:19:00.876+0800 D NETWORK  [conn1] connected to server 10.200.20.56:1112 (10.200.20.56)\n2017-05-01T15:19:00.877+0800 I REPL     [conn1] replSetReconfig config object with 2 members parses ok\n2017-05-01T15:19:00.877+0800 D ASIO     [conn1] startCommand: RemoteCommand 1 -- target:10.200.20.56:1112 db:admin expDate:2017-05-01T15:19:10.877+0800 cmd:{ replSetHeartbeat: \"test\", pv: 1, v: 2, from: \"10.200.20.56:1111\", fromId: 0, checkEmpty: false }\n2017-05-01T15:19:00.877+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f42f2e5a140\nDEBUG:pid[33275]:proxy_freeaddrinfo\nDEBUG:pid[33275]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[33275]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[33275]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[33275]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[33275]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-01T15:19:00.878+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] Starting asynchronous command 2 on host 10.200.20.56:1112\n2017-05-01T15:19:01.857+0800 D REPL     [NoopWriter] Writing noop to oplog as there has been no writes to this replica set in over 10s\n2017-05-01T15:19:01.857+0800 D REPL     [NoopWriter] Set last known op time to { ts: Timestamp 1493623141000|1, t: 1 }\n2017-05-01T15:19:01.880+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623141000|1, t: 1 }\n2017-05-01T15:19:10.877+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] Failed to get connection from pool for request 1: NetworkInterfaceExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-01T15:19:10.877+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-01T15:19:10.877+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-01T15:19:10.877+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('5906e159c7e0c4c709f69f96') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-01T15:19:10.879+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:19:10.879+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:19:10.879+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:572 locks:{} protocol:op_query 0ms\n2017-05-01T15:19:11.857+0800 D REPL     [NoopWriter] Writing noop to oplog as there has been no writes to this replica set in over 10s\n2017-05-01T15:19:11.857+0800 D REPL     [NoopWriter] Set last known op time to { ts: Timestamp 1493623151000|1, t: 1 }\n2017-05-01T15:19:11.889+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623151000|1, t: 1 }\n2017-05-01T15:19:20.877+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] Operation timing out; original request was: RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-01T15:19:20.877+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-01T15:19:20.877+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] Request 2 finished with response: NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-01T15:19:20.877+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection\n2017-05-01T15:19:21.858+0800 D REPL     [NoopWriter] Writing noop to oplog as there has been no writes to this replica set in over 10s\n2017-05-01T15:19:21.858+0800 D REPL     [NoopWriter] Set last known op time to { ts: Timestamp 1493623161000|1, t: 1 }\n2017-05-01T15:19:21.898+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623161000|1, t: 1 }\n2017-05-01T15:19:25.873+0800 D -        [PeriodicTaskRunner] cleaning up unused lock buckets of the global lock manager\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:_mdb_catalog -> { numRecords: 8, dataSize: 2587 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-12--3505979310332637255 -> { numRecords: 1, dataSize: 60 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-4--3505979310332637255 -> { numRecords: 5, dataSize: 468 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-5--3505979310332637255 -> { numRecords: 1, dataSize: 453 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-7--3505979310332637255 -> { numRecords: 1, dataSize: 45 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-9--3505979310332637255 -> { numRecords: 1, dataSize: 59 }\n2017-05-01T15:19:31.858+0800 D REPL     [NoopWriter] Writing noop to oplog as there has been no writes to this replica set in over 10s\n2017-05-01T15:19:31.858+0800 D REPL     [NoopWriter] Set last known op time to { ts: Timestamp 1493623171000|1, t: 1 }\n2017-05-01T15:19:31.908+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623171000|1, t: 1 }. I use gdb debugged at timed_connect() in proxychains and connect_proxy in kneesocks, for proxtchains, and change the type of addr from struct sockaddr * to struct sockaddr_in *.\naddr in proxychains:\n*addr = {sin_family = 2, sin_port = 10505, sin_addr = {s_addr = 16777343}, sin_zero = \"\\000\\000\\000\\000\\000\\000\\000\"}\naddr in kneesocks\n*addr = {sin_family = 2, sin_port = 22276, sin_addr = {s_addr = 940886026}, sin_zero = \"\\000\\000\\000\\000\\000\\000\\000\"}\nIt seems there is no problem in addr.\nthere is a little different in sockfd flag :\nin proxychains, before connect, fd_flags=2, and after connect, fd_flags=2050.\nfcntl(sock, F_SETFL, O_NONBLOCK);\nbut in sockfd, before connect, fd_flags=2050, after connect, fd_flags=2050\nfcntl(sockfd, F_SETFL, fd_flags & ~O_NONBLOCK);\nI'm not familiar with c network programing, not sure whether or not the fd_flags will affect non-blocking socket?. if I commenting out line 184 in core.c, still connect failed, connect ret=-1: \n2017-05-04T06:21:06.701+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[36566]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f724a028140\nDEBUG:pid[36566]:proxy_freeaddrinfo\nDEBUG:pid[36566]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[36566]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[36566]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[36566]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[36566]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T06:21:16.701+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T06:21:16.701+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T06:21:16.701+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a54e6187854f7222cc683') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\nif I commenting out line 157 in core.c,connect ret=0, connect success, but still got Operation timed out\ndiff\n-fcntl(sock, F_SETFL, O_NONBLOCK);\n+//fcntl(sock, F_SETFL, O_NONBLOCK);\n2017-05-04T06:22:40.483+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[37317]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f84cf251000\nDEBUG:pid[37317]:proxy_freeaddrinfo\nDEBUG:pid[37317]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[37317]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[37317]:timed_connect\nDEBUG:\nconnect ret=0\nDEBUG:pid[37317]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[37317]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T06:22:50.483+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T06:22:50.483+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T06:22:50.483+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a54e6187854f7222cc683') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T06:23:00.483+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T06:23:00.483+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection. with the patch, connect ret=0, connect success, but still got Operation timed out\n2017-05-04T09:27:58.321+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[15371]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f85f0141000\nDEBUG:pid[15371]:proxy_freeaddrinfo\nDEBUG:pid[15371]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[15371]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[15371]:timed_connect\nDEBUG:\nconnect ret=0\nDEBUG:pid[15371]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[15371]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T09:28:08.321+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T09:28:08.321+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T09:28:08.321+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a54e6187854f7222cc683') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T09:28:18.321+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T09:28:18.321+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection. now connect ret=-1, connect failed\n2017-05-04T10:30:45.192+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[36723]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f570429e140\nDEBUG:pid[36723]:proxy_freeaddrinfo\nDEBUG:pid[36723]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[36723]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[36723]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[36723]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[36723]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T10:30:55.192+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T10:30:55.192+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit2017-05-04T10:30:55.192+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a92512faabb955d2acc34') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T10:31:05.192+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T10:31:05.192+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection. yes, both the one-line change and the new patch don't work, connect failed\ndiff\ndiff --git a/src/core.c b/src/core.c\nindex 19cd3da..510400d 100644\n--- a/src/core.c\n+++ b/src/core.c\n@@ -155,7 +155,8 @@ static int timed_connect(int sock, const struct sockaddr *addr, socklen_t len) {\n        pfd[0].fd = sock;\n        pfd[0].events = POLLOUT;\n        int flags = fcntl(sock, F_GETFL, 0);\n-       fcntl(sock, F_SETFL, flags & (~O_NONBLOCK));\n+       //fcntl(sock, F_SETFL, flags & (~O_NONBLOCK));\n+       fcntl(sock, F_SETFL, flags | O_NONBLOCK);\n        ret = true_connect(sock, addr, len);\n        PDEBUG(\"\\nconnect ret=%d\\n\", ret);. I'm sure it's in latest nonblock branch:\nhere is the git info:\n```bash\n$ git branch\n  master\n* nonblock\n$ git log | head\ncommit cbddf15b19191257de302687df558adfae10aeb5\nAuthor: rofl0r retnyg@gmx.net\nDate:   Thu May 4 01:31:56 2017 +0100\nproperly handle non-blocking mode of socket\n\naddressing #171\n\ncommit bb3df1e4409190da2627d8a3b5bdd5e02d246f28\nAuthor: rofl0r retnyg@gmx.net\n```\nhere is some gdb debug info:\nBreakpoint 1, timed_connect (sock=31, addr=0x7ffff7fdb3e0, len=16) at src/core.c:153\n153             PFUNC();\n(gdb) display *addr\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) display flags\n2: flags = 0\n(gdb) display ret\n3: ret = 2\n(gdb) l\n148\n149     static int timed_connect(int sock, const struct sockaddr *addr, socklen_t len) {\n150             int ret, value;\n151             socklen_t value_len;\n152             struct pollfd pfd[1];\n153             PFUNC();\n154\n155             pfd[0].fd = sock;\n156             pfd[0].events = POLLOUT;\n157             int flags = fcntl(sock, F_GETFL, 0);\n(gdb) n\n2017-05-04T11:28:53.492+0800 I COMMAND  [ftdc] serverStatus was very slow: { after basic: 0, after asserts: 0, after backgroundFlushing: 0, after connections: 0, after dur: 0, af\nter extra_info: 62006, after globalLock: 62006, after locks: 62006, after network: 62006, after opLatencies: 62006, after opcounters: 62006, after opcountersRepl: 62006, after re\npl: 62006, after storageEngine: 62006, after tcmalloc: 62006, after wiredTiger: 62006, at end: 62006 }\nDEBUG:pid[14538]:timed_connect\n155             pfd[0].fd = sock;\n3: ret = 2\n2: flags = 0\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n156             pfd[0].events = POLLOUT;\n3: ret = 2\n2: flags = 0\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n157             int flags = fcntl(sock, F_GETFL, 0);\n3: ret = 2\n2: flags = 0\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n160             if(!(flags & O_NONBLOCK))\n3: ret = 2\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n161                     fcntl(sock, F_SETFL, flags | O_NONBLOCK);\n3: ret = 2\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n162             ret = true_connect(sock, addr, len);\n3: ret = 2\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n163             PDEBUG(\"\\nconnect ret=%d\\n\", ret);\n3: ret = -1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\nDEBUG:\nconnect ret=-1\n167             if(flags & O_NONBLOCK)\n3: ret = -1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n2017-05-04T11:29:20.462+0800 I COMMAND  [ftdc] serverStatus was very slow: { after basic: 0, after asserts: 0, after backgroundFlushing: 0, after connections: 0, after dur: 0, af\nter extra_info: 2018, after globalLock: 2018, after locks: 2018, after network: 2018, after opLatencies: 2018, after opcounters: 2018, after opcountersRepl: 2018, after repl: 201\n8, after storageEngine: 2018, after tcmalloc: 2018, after wiredTiger: 2018, at end: 2018 }\n170             if(ret == -1 && errno == EINPROGRESS) {\n3: ret = -1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n171                     ret = poll_retry(pfd, 1, tcp_connect_time_out);\n3: ret = -1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n172                     PDEBUG(\"\\npoll ret=%d\\n\", ret);\n3: ret = 1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n2017-05-04T11:29:31.813+0800 I COMMAND  [ftdc] serverStatus was very slow: { after basic: 0, after asserts: 0, after backgroundFlushing: 0, after connections: 0, after dur: 0, af\nter extra_info: 4562, after globalLock: 4562, after locks: 4562, after network: 4562, after opLatencies: 4562, after opcounters: 4562, after opcountersRepl: 4562, after repl: 456\n2, after storageEngine: 4562, after tcmalloc: 4562, after wiredTiger: 4562, at end: 4562 }\nDEBUG:\npoll ret=1\n173                     if(ret == 1) {\n3: ret = 1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb). I tested branch nonblock2 and merged nonblock and nonblock2, both connect failed\n2017-05-04T12:02:05.508+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[26222]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f3eb0c5a000\nDEBUG:pid[26222]:proxy_freeaddrinfo\nDEBUG:pid[26222]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[26222]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[26222]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[26222]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[26222]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T12:02:15.508+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T12:02:15.508+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T12:02:15.509+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a92512faabb955d2acc34') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T12:02:25.508+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T12:02:25.508+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection. connect success, but Operation timed out\n```\n$ git log | head -24\ncommit 6f093fc039e2bd8adbd4310cb0dd4af47b7af494\nMerge: 6d90d82 ea8f4ff\nAuthor: test cs48@qiniu.com\nDate:   Thu May 4 12:13:36 2017 +0800\nMerge branch 'nonblock2' into merged2\n\ncommit ea8f4ff5dc693fd7f824796a8ac4816b0194178b\nAuthor: rofl0r retnyg@gmx.net\nDate:   Thu May 4 04:53:35 2017 +0100\nrestore original socket flags after connecting\n\nthe socket may have been in non-blocking mode originally.\naddressing #171\n\ncommit 6d90d82a7b0998db5d29bf563ca6cefc72080dbb\nAuthor: rofl0r retnyg@gmx.net\nDate:   Thu May 4 01:31:56 2017 +0100\nproperly restore non-blocking mode of socket\n\naddressing #171\n\n```\n2017-05-04T12:14:20.152+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[31589]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7fd9d01d9000\nDEBUG:pid[31589]:proxy_freeaddrinfo\nDEBUG:pid[31589]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[31589]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[31589]:timed_connect\nDEBUG:\nconnect ret=0\nDEBUG:pid[31589]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[31589]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T12:14:30.152+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T12:14:30.152+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T12:14:30.152+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a92512faabb955d2acc34') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T12:14:40.152+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T12:14:40.152+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection\n```\nBreakpoint 2, connect_proxy_chain (sock=30, target_ip=..., target_port=22532, pd=0x7ffff7d955a0 , proxy_count=1, ct=RANDOM_TYPE, max_chain=1) at src/core.c:560\n560                             unsigned int proxy_count, chain_type ct, unsigned int max_chain) {\n(gdb) watch flags\nHardware watchpoint 3: flags\n(gdb) display flags\n1: flags = 32767\n(gdb) c\nContinuing.\nDEBUG:pid[33382]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345\nBreakpoint 1, timed_connect (sock=31, addr=0x7ffff7fdb3e0, len=16) at src/core.c:153\n153             PFUNC();\n(gdb) display addr\n2: addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) watch flags\nHardware watchpoint 4: flags\n(gdb) c\nContinuing.\nDEBUG:pid[33382]:timed_connect\nHardware watchpoint 4: flags\nOld value = 0\nNew value = 2\ntimed_connect (sock=31, addr=0x7ffff7fdb3e0, len=16) at src/core.c:158\n158             fcntl(sock, F_SETFL, flags & (~O_NONBLOCK));\n2: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) display ret\n3: ret = 2\n(gdb) watch ret\nHardware watchpoint 5: ret\n(gdb) c\nContinuing.\nHardware watchpoint 5: ret\nOld value = 2\nNew value = 0\ntimed_connect (sock=31, addr=0x7ffff7fdb3e0, len=16) at src/core.c:160\n160             PDEBUG(\"\\nconnect ret=%d\\n\", ret);\n3: ret = 0\n2: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) c\nContinuing.\nDEBUG:\nconnect ret=0\nWatchpoint 4 deleted because the program has left the block in\nwhich its expression is valid.\nWatchpoint 5 deleted because the program has left the block in\nwhich its expression is valid.\n0x00007ffff7b8c5fb in start_chain (fd=0x7ffff7fdb488, pd=0x7ffff7d955a0 , begin_mark=0x7ffff7b91098 \"Random chain\") at src/core.c:448\n448             if(timed_connect(fd, (struct sockaddr ) (v6?(void)&addr6:(void)&addr), v6?sizeof(addr6):sizeof(addr))) {\n(gdb) c\nContinuing.\nDEBUG:pid[33382]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[33382]:tunnel_to\nDEBUG:host dns \n2017-05-04T12:22:35.553+0800 I COMMAND  [ftdc] serverStatus was very slow: { after basic: 0, after asserts: 0, after backgroundFlushing: 0, after connections: 0, after dur: 0, af\nter extra_info: 11405, after globalLock: 11405, after locks: 11405, after network: 11405, after opLatencies: 11405, after opcounters: 11405, after opcountersRepl: 11405, after re\npl: 11405, after storageEngine: 11405, after tcmalloc: 11405, after wiredTiger: 11405, at end: 30173 }\n ...  OK\nHardware watchpoint 3: flags\nOld value = 32767\nNew value = 2\nconnect_proxy_chain (sock=30, target_ip=..., target_port=22532, pd=0x7ffff7d955a0 , proxy_count=1, ct=RANDOM_TYPE, max_chain=1) at src/core.c:705\n705             dup2(ns, sock);\n1: flags = 2\n(gdb) c\nContinuing.\nWatchpoint 3 deleted because the program has left the block in\nwhich its expression is valid.\n0x00007ffff7b8f313 in connect (sock=30, addr=0x55555d5d00c8, len=16) at src/libproxychains.c:392\n392             ret = connect_proxy_chain(sock,\n```. I build a docker image, you may pull the image and debug locally?\n```\n$ docker run -it ma6174/mongo_proxychains bash\nroot@61fa69e7a5a7:/# cd\nroot@61fa69e7a5a7:~# ls\ndata1  kneesocks      libkneesocks.so     mongod_2.log    proxychains.conf  ss_config.json  ss_server.log      start_ss.sh\ndata2  kneesocks_cmd  libproxychains4.so  proxychains-ng  proxychains4      ss_local.log    start_mongod_node2.sh\nroot@61fa69e7a5a7:~# bash start_ss.sh\nroot@61fa69e7a5a7:~# nohup: redirecting stderr to stdout\nnohup: redirecting stderr to stdout\nroot@61fa69e7a5a7:~# bash start_mongod_node2.sh\nroot@61fa69e7a5a7:~# nohup: redirecting stderr to stdout\nroot@61fa69e7a5a7:~# ./proxychains4 -f proxychains.conf mongod --dbpath data1 --replSet test --port 1111\n[proxychains] config file found: proxychains.conf\n[proxychains] preloading ./libproxychains4.so\nDEBUG:init_lib_wrapper called from gcc_init\nDEBUG:pid[84]:at_init\nDEBUG:pid[84]:wait_data\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] DLL init: proxychains-ng 4.12-git-1-gbb3df1e\nDEBUG:loaded symbol 'connect' real addr 0x7f1219ee8cc0  wrapped addr 0x7f121b07d7ea\nDEBUG:loaded symbol 'sendto' real addr 0x7f1219ee8fa0  wrapped addr 0x7f121b07e12f\nDEBUG:loaded symbol 'gethostbyname' real addr 0x7f1219c28610  wrapped addr 0x7f121b07dc53\nDEBUG:loaded symbol 'getaddrinfo' real addr 0x7f1219c04760  wrapped addr 0x7f121b07dcbf\nDEBUG:loaded symbol 'freeaddrinfo' real addr 0x7f1219c04720  wrapped addr 0x7f121b07dd6c\nDEBUG:loaded symbol 'gethostbyaddr' real addr 0x7f1219c28050  wrapped addr 0x7f121b07e01b\nDEBUG:loaded symbol 'getnameinfo' real addr 0x7f1219c30380  wrapped addr 0x7f121b07a120\nDEBUG:loaded symbol 'close' real addr 0x7f1219ee8ad0  wrapped addr 0x7f121b07d6e8\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] MongoDB starting : pid=84 port=1111 dbpath=data1 64-bit host=61fa69e7a5a7\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] db version v3.4.4\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] git version: 888390515874a9debd1b6c5d36559ca86b44babd\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] OpenSSL version: OpenSSL 1.0.1t  3 May 2016\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] allocator: tcmalloc\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] modules: none\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] build environment:\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten]     distmod: debian81\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten]     distarch: x86_64\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten]     target_arch: x86_64\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] options: { net: { port: 1111 }, replication: { replSet: \"test\" }, storage: { dbPath: \"data1\" } }\nDEBUG:getaddrinfo: 0.0.0.0 1111\nDEBUG:pid[84]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x5646bdc9ddc0\nDEBUG:pid[84]:proxy_freeaddrinfo\n2017-05-04T06:19:06.745+0000 I -        [initandlisten] Detected data files in data1 created by the 'wiredTiger' storage engine, so setting the active storage engine to 'wiredTiger'.\n2017-05-04T06:19:06.745+0000 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=487M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),\n2017-05-04T06:19:06.962+0000 I STORAGE  [initandlisten] Starting WiredTigerRecordStoreThread local.oplog.rs\n2017-05-04T06:19:06.962+0000 I STORAGE  [initandlisten] The size storer reports that the oplog contains 16 records totaling to 1526 bytes\n2017-05-04T06:19:06.962+0000 I STORAGE  [initandlisten] Scanning the oplog to determine where to place markers for truncation\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]  WARNING: Access control is not enabled for the database.\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]           Read and write access to data and configuration is unrestricted.\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]  WARNING: You are running this process as the root user, which is not recommended.\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]\n2017-05-04T06:19:06.988+0000 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory 'data1/diagnostic.data'\n2017-05-04T06:19:06.991+0000 I NETWORK  [thread1] waiting for connections on port 1111\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:getaddrinfo: 127.0.0.1 1111\nDEBUG:pid[84]:proxy_getaddrinfo\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:freeaddrinfo 0x5646c145d680\nDEBUG:pid[84]:proxy_freeaddrinfo\nDEBUG:getaddrinfo: 127.0.0.1 1112\nDEBUG:pid[84]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x5646c145d680\nDEBUG:pid[84]:proxy_freeaddrinfo\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:connect\nDEBUG:target: 127.0.0.1\nDEBUG:port: 1112\nDEBUG:pid[84]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[84]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[84]:chain_step\n ...  127.0.0.1:1112 DEBUG:pid[84]:tunnel_to\nDEBUG:host dns \n ...  OK\n2017-05-04T06:19:06.998+0000 I REPL     [replExecDBWorker-1] New replica set config in use: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"127.0.0.1:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1, host: \"127.0.0.1:1112\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590abeb31026666da1a599f2') } }\n2017-05-04T06:19:06.998+0000 I REPL     [replExecDBWorker-1] This node is 127.0.0.1:1111 in the config\n2017-05-04T06:19:06.998+0000 I REPL     [replExecDBWorker-1] transition to STARTUP2\n2017-05-04T06:19:06.998+0000 I REPL     [replExecDBWorker-1] Starting replication storage threads\n2017-05-04T06:19:06.999+0000 I REPL     [replExecDBWorker-1] Starting replication fetcher thread\n2017-05-04T06:19:06.999+0000 I REPL     [replExecDBWorker-1] Starting replication applier thread\n2017-05-04T06:19:06.999+0000 I REPL     [replExecDBWorker-1] Starting replication reporter thread\n2017-05-04T06:19:07.002+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 127.0.0.1:1112\n2017-05-04T06:19:07.002+0000 I REPL     [rsSync] transition to RECOVERING\nDEBUG:getaddrinfo: 127.0.0.1 1112\nDEBUG:pid[84]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x5646c14ba640\nDEBUG:pid[84]:proxy_freeaddrinfo\nDEBUG:pid[84]:connect\nDEBUG:target: 127.0.0.1\n2017-05-04T06:19:07.005+0000 I REPL     [rsSync] transition to SECONDARY\nDEBUG:port: 1112\nDEBUG:pid[84]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[84]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[84]:chain_step\n ...  127.0.0.1:1112 DEBUG:pid[84]:tunnel_to\nDEBUG:host dns \n ...  OK\nDEBUG:pid[84]:pc_getnameinfo\n2017-05-04T06:19:08.340+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45704 #1 (1 connection now open)\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:pc_getnameinfo\n2017-05-04T06:19:08.341+0000 I NETWORK  [conn1] received client metadata from 127.0.0.1:45704 conn1: { driver: { name: \"NetworkInterfaceASIO-Replication\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\nDEBUG:pid[84]:pc_getnameinfo\n2017-05-04T06:19:08.386+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45706 #2 (2 connections now open)\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:pc_getnameinfo\n2017-05-04T06:19:08.386+0000 I NETWORK  [conn2] received client metadata from 127.0.0.1:45706 conn2: { driver: { name: \"NetworkInterfaceASIO-Replication\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\n2017-05-04T06:19:17.003+0000 I REPL     [ReplicationExecutor] Error in heartbeat request to 127.0.0.1:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T06:19:18.497+0000 I REPL     [ReplicationExecutor] Not starting an election, since we are not electable due to: Not standing for election because I cannot see a majority (mask 0x1)\n2017-05-04T06:19:22.012+0000 I REPL     [rsBackgroundSync] waiting for 2 pings from other members before syncing\n^C\nroot@61fa69e7a5a7:~#\nroot@61fa69e7a5a7:~# ./kneesocks_cmd mongod --dbpath data1 --replSet test --port 1111\n[kneesocks] running\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] MongoDB starting : pid=162 port=1111 dbpath=data1 64-bit host=61fa69e7a5a7\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] db version v3.4.4\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] git version: 888390515874a9debd1b6c5d36559ca86b44babd\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] OpenSSL version: OpenSSL 1.0.1t  3 May 2016\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] allocator: tcmalloc\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] modules: none\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] build environment:\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten]     distmod: debian81\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten]     distarch: x86_64\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten]     target_arch: x86_64\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] options: { net: { port: 1111 }, replication: { replSet: \"test\" }, storage: { dbPath: \"data1\" } }\n2017-05-04T06:20:08.305+0000 W -        [initandlisten] Detected unclean shutdown - data1/mongod.lock is not empty.\n[kneesocks] getaddrinfo: node=0.0.0.0, service=1111\n2017-05-04T06:20:08.310+0000 I -        [initandlisten] Detected data files in data1 created by the 'wiredTiger' storage engine, so setting the active storage engine to 'wiredTiger'.\n2017-05-04T06:20:08.310+0000 W STORAGE  [initandlisten] Recovering data from the last clean checkpoint.\n2017-05-04T06:20:08.310+0000 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=487M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),\n2017-05-04T06:20:08.499+0000 I STORAGE  [initandlisten] Starting WiredTigerRecordStoreThread local.oplog.rs\n2017-05-04T06:20:08.499+0000 I STORAGE  [initandlisten] The size storer reports that the oplog contains 16 records totaling to 1526 bytes\n2017-05-04T06:20:08.499+0000 I STORAGE  [initandlisten] Scanning the oplog to determine where to place markers for truncation\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]  WARNING: Access control is not enabled for the database.\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]           Read and write access to data and configuration is unrestricted.\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]  WARNING: You are running this process as the root user, which is not recommended.\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]\n2017-05-04T06:20:08.518+0000 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory 'data1/diagnostic.data'\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1111\n2017-05-04T06:20:08.520+0000 I NETWORK  [thread1] waiting for connections on port 1111\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:08.521+0000 I REPL     [replExecDBWorker-0] New replica set config in use: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"127.0.0.1:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1, host: \"127.0.0.1:1112\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590abeb31026666da1a599f2') } }\n2017-05-04T06:20:08.521+0000 I REPL     [replExecDBWorker-0] This node is 127.0.0.1:1111 in the config\n2017-05-04T06:20:08.521+0000 I REPL     [replExecDBWorker-0] transition to STARTUP2\n2017-05-04T06:20:08.521+0000 I REPL     [replExecDBWorker-0] Starting replication storage threads\n2017-05-04T06:20:08.522+0000 I REPL     [replExecDBWorker-0] Starting replication fetcher thread\n2017-05-04T06:20:08.522+0000 I REPL     [replExecDBWorker-0] Starting replication applier thread\n2017-05-04T06:20:08.522+0000 I REPL     [replExecDBWorker-0] Starting replication reporter thread\n2017-05-04T06:20:08.523+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 127.0.0.1:1112\n2017-05-04T06:20:08.523+0000 I REPL     [rsSync] transition to RECOVERING\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:08.525+0000 I REPL     [rsSync] transition to SECONDARY\n2017-05-04T06:20:08.526+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Successfully connected to 127.0.0.1:1112, took 3ms (1 connections now open to 127.0.0.1:1112)\n2017-05-04T06:20:08.527+0000 I REPL     [ReplicationExecutor] Member 127.0.0.1:1112 is now in state SECONDARY\n2017-05-04T06:20:13.416+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45930 #1 (1 connection now open)\n2017-05-04T06:20:13.417+0000 I NETWORK  [conn1] received client metadata from 127.0.0.1:45930 conn1: { driver: { name: \"NetworkInterfaceASIO-Replication\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\n2017-05-04T06:20:14.528+0000 I REPL     [rsBackgroundSync] sync source candidate: 127.0.0.1:1112\n2017-05-04T06:20:14.528+0000 I ASIO     [NetworkInterfaceASIO-RS-0] Connecting to 127.0.0.1:1112\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:14.530+0000 I ASIO     [NetworkInterfaceASIO-RS-0] Successfully connected to 127.0.0.1:1112, took 2ms (1 connections now open to 127.0.0.1:1112)\n2017-05-04T06:20:14.532+0000 I ASIO     [NetworkInterfaceASIO-RS-0] Connecting to 127.0.0.1:1112\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:14.535+0000 I ASIO     [NetworkInterfaceASIO-RS-0] Successfully connected to 127.0.0.1:1112, took 3ms (2 connections now open to 127.0.0.1:1112)\n2017-05-04T06:20:14.537+0000 I REPL     [replication-0] Choosing new sync source because our current sync source, 127.0.0.1:1112, has an OpTime ({ ts: Timestamp 1493878750000|1, t: 9 }) which is not ahead of ours ({ ts: Timestamp 1493878750000|1, t: 9 }), it does not have a sync source, and it's not the primary (sync source does not know the primary)\n2017-05-04T06:20:14.537+0000 I REPL     [replication-0] Canceling oplog query due to OplogQueryMetadata. We have to choose a new sync source. Current source: 127.0.0.1:1112, OpTime { ts: Timestamp 1493878750000|1, t: 9 }, its sync source index:-1\n2017-05-04T06:20:14.537+0000 W REPL     [rsBackgroundSync] Fetcher stopped querying remote oplog with error: InvalidSyncSource: sync source 127.0.0.1:1112 (config version: 2; last applied optime: { ts: Timestamp 1493878750000|1, t: 9 }; sync source index: -1; primary index: -1) is no longer valid\n2017-05-04T06:20:14.538+0000 I REPL     [rsBackgroundSync] could not find member to sync from\n2017-05-04T06:20:14.543+0000 I REPL     [SyncSourceFeedback] SyncSourceFeedback error sending update to 127.0.0.1:1112: InvalidSyncSource: Sync source was cleared. Was 127.0.0.1:1112\n2017-05-04T06:20:19.149+0000 I REPL     [ReplicationExecutor] Starting an election, since we've seen no PRIMARY in the past 10000ms\n2017-05-04T06:20:19.149+0000 I REPL     [ReplicationExecutor] conducting a dry run election to see if we could be elected\n2017-05-04T06:20:19.150+0000 I REPL     [ReplicationExecutor] VoteRequester(term 9 dry run) received a yes vote from 127.0.0.1:1112; response message: { term: 9, voteGranted: true, reason: \"\", ok: 1.0 }\n2017-05-04T06:20:19.150+0000 I REPL     [ReplicationExecutor] dry election run succeeded, running for election\n2017-05-04T06:20:19.157+0000 I REPL     [ReplicationExecutor] VoteRequester(term 10) received a yes vote from 127.0.0.1:1112; response message: { term: 10, voteGranted: true, reason: \"\", ok: 1.0 }\n2017-05-04T06:20:19.157+0000 I REPL     [ReplicationExecutor] election succeeded, assuming primary role in term 10\n2017-05-04T06:20:19.157+0000 I REPL     [ReplicationExecutor] transition to PRIMARY\n2017-05-04T06:20:19.158+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 127.0.0.1:1112\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:19.158+0000 I REPL     [ReplicationExecutor] My optime is most up-to-date, skipping catch-up and completing transition to primary.\n2017-05-04T06:20:19.159+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Successfully connected to 127.0.0.1:1112, took 1ms (2 connections now open to 127.0.0.1:1112)\n2017-05-04T06:20:20.539+0000 I REPL     [rsSync] transition to primary complete; database writes are now permitted\n2017-05-04T06:20:24.389+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45974 #2 (2 connections now open)\n2017-05-04T06:20:24.390+0000 I NETWORK  [conn2] received client metadata from 127.0.0.1:45974 conn2: { driver: { name: \"NetworkInterfaceASIO-RS\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\n2017-05-04T06:20:24.393+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45976 #3 (3 connections now open)\n2017-05-04T06:20:24.394+0000 I NETWORK  [conn3] received client metadata from 127.0.0.1:45976 conn3: { driver: { name: \"NetworkInterfaceASIO-RS\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\n^C2017-05-04T06:20:31.520+0000 I CONTROL  [signalProcessingThread] got signal 2 (Interrupt), will terminate after current cmd ends\n2017-05-04T06:20:31.520+0000 I NETWORK  [signalProcessingThread] shutdown: going to close listening sockets...\n2017-05-04T06:20:31.520+0000 I NETWORK  [signalProcessingThread] closing listening socket: 6\n2017-05-04T06:20:31.521+0000 I NETWORK  [signalProcessingThread] closing listening socket: 7\n2017-05-04T06:20:31.521+0000 I NETWORK  [signalProcessingThread] removing socket file: /tmp/mongodb-1111.sock\n2017-05-04T06:20:31.521+0000 I NETWORK  [signalProcessingThread] shutdown: going to flush diaglog...\n2017-05-04T06:20:31.521+0000 I REPL     [signalProcessingThread] shutting down replication subsystems\n2017-05-04T06:20:31.521+0000 I REPL     [signalProcessingThread] Stopping replication reporter thread\n2017-05-04T06:20:31.521+0000 I REPL     [signalProcessingThread] Stopping replication fetcher thread\n2017-05-04T06:20:31.521+0000 I REPL     [signalProcessingThread] Stopping replication applier thread\n2017-05-04T06:20:31.549+0000 I REPL     [signalProcessingThread] Stopping replication storage threads\n2017-05-04T06:20:31.549+0000 I FTDC     [signalProcessingThread] Shutting down full-time diagnostic data capture\n2017-05-04T06:20:31.551+0000 I STORAGE  [signalProcessingThread] WiredTigerKVEngine shutting down\n2017-05-04T06:20:31.580+0000 I STORAGE  [signalProcessingThread] shutdown: removing fs lock...\n2017-05-04T06:20:31.580+0000 I CONTROL  [signalProcessingThread] now exiting\n2017-05-04T06:20:31.580+0000 I CONTROL  [signalProcessingThread] shutting down with code:0\n2017-05-04T06:20:31.580+0000 I CONTROL  [initandlisten] shutting down with code:0\nroot@61fa69e7a5a7:~#\n```. I also tested some other software similar to proxychains, kneesocks(with some  fix) works well on linux with MongoDB version 3.2 and 3.4, so there must be some potential bug in proxychains, not in mongodb. \nThere are 4846 commits between MongoDB 3.0 and 3.2, 12937 file changes, it should be some difficult to find the exact commit that broke it. can you find something different from kneesocks?. After some debugging, I found after this commit https://github.com/mongodb/mongo/commit/b256b88c78c28e37b033fcb0134e75649fbe3d5c proxychains don't work. It looks proxychains not work well with asio network library?. MongoDB removed the thread based network interface from code: https://github.com/mongodb/mongo/commit/a998887902dfd9cb6f125233c86361064f80c57e after switch network interface to ASIO, it cannot be simply revert this two commit because some future changes may not support thread based network interface and compile failed.. Here is the full log of mongod and proxychains both with debug open: \n$ ./proxychains4 -f proxychains.conf ./mongod --dbpath data1 --replSet test --port 1111 -vv\n[proxychains] config file found: proxychains.conf\n[proxychains] preloading ./libproxychains4.so\nDEBUG:init_lib_wrapper called from gcc_init\nDEBUG:pid[33275]:at_init\nDEBUG:pid[33275]:wait_data\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] DLL init: proxychains-ng 4.12\nDEBUG:loaded symbol 'connect' real addr 0x7f42e945f710  wrapped addr 0x7f42ea2afdd9\nDEBUG:loaded symbol 'sendto' real addr 0x7f42e945f9f0  wrapped addr 0x7f42ea2b0804\nDEBUG:loaded symbol 'gethostbyname' real addr 0x7f42e9197ea0  wrapped addr 0x7f42ea2b0313\nDEBUG:loaded symbol 'getaddrinfo' real addr 0x7f42e915abc0  wrapped addr 0x7f42ea2b037f\nDEBUG:loaded symbol 'freeaddrinfo' real addr 0x7f42e915b830  wrapped addr 0x7f42ea2b042c\nDEBUG:loaded symbol 'gethostbyaddr' real addr 0x7f42e91978e0  wrapped addr 0x7f42ea2b06f0\nDEBUG:loaded symbol 'getnameinfo' real addr 0x7f42e919d4c0  wrapped addr 0x7f42ea2ac1c0\nDEBUG:loaded symbol 'close' real addr 0x7f42e945f3e0  wrapped addr 0x7f42ea2afcd7\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] MongoDB starting : pid=33275 port=1111 dbpath=data1 64-bit host=cs48\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] db version v3.4.4-12-gc8fdff8\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] git version: c8fdff8e541fd366a6cf72a5bbba916498625a1a\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] allocator: tcmalloc\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] modules: none\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] build environment:\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten]     distarch: x86_64\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten]     target_arch: x86_64\n2017-05-01T15:18:25.792+0800 I CONTROL  [initandlisten] options: { net: { port: 1111 }, replication: { replSet: \"test\" }, storage: { dbPath: \"data1\" }, systemLog: { verbosity: 2 } }\n2017-05-01T15:18:25.792+0800 D NETWORK  [initandlisten] fd limit hard:65535 soft:65535 max conn: 52428\nDEBUG:getaddrinfo: 0.0.0.0 1111\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f42ef8c12c0\nDEBUG:pid[33275]:proxy_freeaddrinfo\n2017-05-01T15:18:25.828+0800 I STORAGE  [initandlisten]\n2017-05-01T15:18:25.828+0800 I STORAGE  [initandlisten] ** WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine\n2017-05-01T15:18:25.828+0800 I STORAGE  [initandlisten] **          See http://dochub.mongodb.org/core/prodnotes-filesystem\n2017-05-01T15:18:25.829+0800 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=63897M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),\n2017-05-01T15:18:25.848+0800 D COMMAND  [WTJournalFlusher] BackgroundJob starting: WTJournalFlusher\n2017-05-01T15:18:25.848+0800 D STORAGE  [WTJournalFlusher] starting WTJournalFlusher thread\n2017-05-01T15:18:25.850+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createRecordStore uri: table:_mdb_catalog config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:25.853+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:_mdb_catalog ok range 1 -> 1 current: 1\n2017-05-01T15:18:25.858+0800 D STORAGE  [initandlisten] flushing directory data1\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten] ** WARNING: You are running on a NUMA machine.\n2017-05-01T15:18:25.858+0800 I CONTROL  [initandlisten] **          We suggest launching mongod like this to avoid performance problems:\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] **              numactl --interleave=all mongod [other options]\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is 'always'.\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] **        We suggest setting it to 'never'\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is 'always'.\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten] **        We suggest setting it to 'never'\n2017-05-01T15:18:25.859+0800 I CONTROL  [initandlisten]\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] enter repairDatabases (to check pdfile version #)\n2017-05-01T15:18:25.859+0800 D -        [initandlisten] reloading view catalog for database local\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] Checking node for SERVER-23299 eligibility\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] Didn't find local.startup_log\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] done repairDatabases\n2017-05-01T15:18:25.859+0800 D QUERY    [initandlisten] Running query: query: {} sort: {} projection: {}\n2017-05-01T15:18:25.859+0800 D QUERY    [initandlisten] Collection admin.system.roles does not exist. Using EOF plan: query: {} sort: {} projection: {}\n2017-05-01T15:18:25.859+0800 I COMMAND  [initandlisten] query admin.system.roles planSummary: EOF ntoreturn:0 ntoskip:0 keysExamined:0 docsExamined:0 cursorExhausted:1 numYields:0 nreturned:0 reslen:20 locks:{ Global: { acquireCount: { r: 6, w: 1, W: 1 } }, Database: { acquireCount: { r: 2, W: 1 } }, Collection: { acquireCount: { r: 2 } } } 0ms\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] create collection local.startup_log { capped: true, size: 10485760 }\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] stored meta data for local.startup_log @ RecordId(1)\n2017-05-01T15:18:25.859+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createRecordStore uri: table:collection-0--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:25.862+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-0--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:25.862+0800 D STORAGE  [initandlisten] local.startup_log: clearing plan cache - collection info cache reset\n2017-05-01T15:18:25.862+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createSortedDataInterface ident: index-1--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.startup_log\" }),\n2017-05-01T15:18:25.862+0800 D STORAGE  [initandlisten] create uri: table:index-1--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.startup_log\" }),\n2017-05-01T15:18:25.865+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-1--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:25.865+0800 D STORAGE  [initandlisten] local.startup_log: clearing plan cache - collection info cache reset\n2017-05-01T15:18:25.865+0800 D INDEX    [initandlisten] marking index _id_ as ready in snapshot id 5\n2017-05-01T15:18:25.866+0800 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory 'data1/diagnostic.data'\n2017-05-01T15:18:25.866+0800 D INDEX    [initandlisten] checking complete\n2017-05-01T15:18:25.866+0800 D QUERY    [initandlisten] Collection local.me does not exist. Using EOF plan: query: {} sort: {} projection: {}\n2017-05-01T15:18:25.866+0800 D STORAGE  [initandlisten] stored meta data for local.me @ RecordId(3)\n2017-05-01T15:18:25.866+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createRecordStore uri: table:collection-2--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:25.869+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-2--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:25.869+0800 D STORAGE  [initandlisten] local.me: clearing plan cache - collection info cache reset\n2017-05-01T15:18:25.869+0800 D STORAGE  [initandlisten] WiredTigerKVEngine::createSortedDataInterface ident: index-3--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.me\" }),\n2017-05-01T15:18:25.869+0800 D STORAGE  [initandlisten] create uri: table:index-3--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.me\" }),\n2017-05-01T15:18:25.871+0800 D STORAGE  [initandlisten] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-3--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:25.871+0800 D STORAGE  [initandlisten] local.me: clearing plan cache - collection info cache reset\n2017-05-01T15:18:25.871+0800 D INDEX    [initandlisten] marking index _id_ as ready in snapshot id 6\n2017-05-01T15:18:25.872+0800 D QUERY    [initandlisten] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:25.872+0800 I REPL     [initandlisten] Did not find local voted for document at startup.\n2017-05-01T15:18:25.872+0800 I REPL     [initandlisten] Did not find local replica set configuration document at startup;  NoMatchingDocument: Did not find replica set configuration document in local.system.replset\n2017-05-01T15:18:25.872+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] The NetworkInterfaceASIO worker thread is spinning up\n2017-05-01T15:18:25.872+0800 D EXECUTOR [replExecDBWorker-0] starting thread in pool replExecDBWorker-Pool\n2017-05-01T15:18:25.872+0800 D EXECUTOR [replExecDBWorker-1] starting thread in pool replExecDBWorker-Pool\n2017-05-01T15:18:25.873+0800 D COMMAND  [TTLMonitor] BackgroundJob starting: TTLMonitor\n2017-05-01T15:18:25.873+0800 D COMMAND  [ClientCursorMonitor] BackgroundJob starting: ClientCursorMonitor\n2017-05-01T15:18:25.873+0800 I NETWORK  [thread1] waiting for connections on port 1111\n2017-05-01T15:18:25.873+0800 D COMMAND  [PeriodicTaskRunner] BackgroundJob starting: PeriodicTaskRunner\n2017-05-01T15:18:25.873+0800 D EXECUTOR [replExecDBWorker-2] starting thread in pool replExecDBWorker-Pool\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:18:44.023+0800 I NETWORK  [thread1] connection accepted from 127.0.0.1:39155 #1 (1 connection now open)\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:18:44.023+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:44.023+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:44.023+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:186 locks:{} protocol:op_query 0ms\n2017-05-01T15:18:44.227+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:44.227+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:44.227+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:186 locks:{} protocol:op_query 0ms\n2017-05-01T15:18:49.816+0800 D COMMAND  [conn1] run command admin.$cmd { replSetInitiate: { _id: \"test\", members: [ { _id: 0.0, host: \"10.200.20.56:1111\" } ] } }\n2017-05-01T15:18:49.816+0800 D COMMAND  [conn1] command: replSetInitiate\n2017-05-01T15:18:49.816+0800 I REPL     [conn1] replSetInitiate admin command received from client\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:18:49.817+0800 D NETWORK  [conn1] getBoundAddrs(): [ 127.0.0.1] [ 10.200.20.56] [ 172.17.0.1]\nDEBUG:getaddrinfo: 10.200.20.56 1111\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:18:49.817+0800 D NETWORK  [conn1] getAddrsForHost(\"10.200.20.56:1111\"): [ 10.200.20.56]\nDEBUG:freeaddrinfo 0x7f42ef606f00\nDEBUG:pid[33275]:proxy_freeaddrinfo\n2017-05-01T15:18:49.817+0800 I REPL     [conn1] replSetInitiate config object with 1 members parses ok\n2017-05-01T15:18:49.817+0800 I REPL     [conn1] ******\n2017-05-01T15:18:49.817+0800 I REPL     [conn1] creating replication oplog of size: 21838MB...\n2017-05-01T15:18:49.817+0800 D STORAGE  [conn1] stored meta data for local.oplog.rs @ RecordId(4)\n2017-05-01T15:18:49.817+0800 D STORAGE  [conn1] WiredTigerKVEngine::createRecordStore uri: table:collection-4--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,type=file,memory_page_max=10m,key_format=q,value_format=u,app_metadata=(formatVersion=1,oplogKeyExtractionVersion=1)\n2017-05-01T15:18:49.820+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-4--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.820+0800 I STORAGE  [conn1] Starting WiredTigerRecordStoreThread local.oplog.rs\n2017-05-01T15:18:49.821+0800 I STORAGE  [conn1] The size storer reports that the oplog contains 0 records totaling to 0 bytes\n2017-05-01T15:18:49.821+0800 I STORAGE  [conn1] Scanning the oplog to determine where to place markers for truncation\n2017-05-01T15:18:49.821+0800 D COMMAND  [WT RecordStoreThread: local.oplog.rs] BackgroundJob starting: WT RecordStoreThread: local.oplog.rs\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] local.oplog.rs: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerKVEngine::flushAllFiles\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerSizeStorer::storeInto table:_mdb_catalog -> { numRecords: 4, dataSize: 915 }\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerSizeStorer::storeInto table:collection-0--3505979310332637255 -> { numRecords: 1, dataSize: 1499 }\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerSizeStorer::storeInto table:collection-2--3505979310332637255 -> { numRecords: 1, dataSize: 37 }\n2017-05-01T15:18:49.821+0800 D STORAGE  [conn1] WiredTigerSizeStorer::storeInto table:collection-4--3505979310332637255 -> { numRecords: 0, dataSize: 0 }\n2017-05-01T15:18:49.830+0800 I REPL     [conn1] ******\n2017-05-01T15:18:49.830+0800 D STORAGE  [conn1] stored meta data for local.system.replset @ RecordId(5)\n2017-05-01T15:18:49.830+0800 D STORAGE  [conn1] WiredTigerKVEngine::createRecordStore uri: table:collection-5--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:49.833+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-5--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.833+0800 D STORAGE  [conn1] local.system.replset: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.833+0800 D STORAGE  [conn1] WiredTigerKVEngine::createSortedDataInterface ident: index-6--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.system.replset\" }),\n2017-05-01T15:18:49.833+0800 D STORAGE  [conn1] create uri: table:index-6--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.system.replset\" }),\n2017-05-01T15:18:49.836+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-6--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:49.836+0800 D STORAGE  [conn1] local.system.replset: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.836+0800 D INDEX    [conn1] marking index _id_ as ready in snapshot id 44\n2017-05-01T15:18:49.836+0800 D QUERY    [conn1] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:49.837+0800 D STORAGE  [conn1] stored meta data for local.replset.minvalid @ RecordId(6)\n2017-05-01T15:18:49.837+0800 D STORAGE  [conn1] WiredTigerKVEngine::createRecordStore uri: table:collection-7--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:49.840+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-7--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.840+0800 D STORAGE  [conn1] local.replset.minvalid: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.840+0800 D STORAGE  [conn1] WiredTigerKVEngine::createSortedDataInterface ident: index-8--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.replset.minvalid\" }),\n2017-05-01T15:18:49.840+0800 D STORAGE  [conn1] create uri: table:index-8--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.replset.minvalid\" }),\n2017-05-01T15:18:49.843+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-8--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:49.843+0800 D STORAGE  [conn1] local.replset.minvalid: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.843+0800 D INDEX    [conn1] marking index _id_ as ready in snapshot id 45\n2017-05-01T15:18:49.843+0800 D QUERY    [conn1] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:49.843+0800 D -        [conn1] reloading view catalog for database admin\n2017-05-01T15:18:49.843+0800 D STORAGE  [conn1] stored meta data for admin.system.version @ RecordId(7)\n2017-05-01T15:18:49.843+0800 D STORAGE  [conn1] WiredTigerKVEngine::createRecordStore uri: table:collection-9--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:49.846+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-9--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.846+0800 D STORAGE  [conn1] admin.system.version: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.847+0800 D STORAGE  [conn1] WiredTigerKVEngine::createSortedDataInterface ident: index-10--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"admin.system.version\" }),\n2017-05-01T15:18:49.847+0800 D STORAGE  [conn1] create uri: table:index-10--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=6,infoObj={ \"v\" : 1, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"admin.system.version\" }),\n2017-05-01T15:18:49.849+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-10--3505979310332637255 ok range 6 -> 8 current: 6\n2017-05-01T15:18:49.849+0800 D STORAGE  [conn1] admin.system.version: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.849+0800 D INDEX    [conn1] marking index _id_ as ready in snapshot id 47\n2017-05-01T15:18:49.849+0800 D STORAGE  [conn1] WiredTigerKVEngine::createSortedDataInterface ident: index-11--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=8,infoObj={ \"v\" : 2, \"key\" : { \"version\" : 1 }, \"name\" : \"incompatible_with_version_32\", \"ns\" : \"admin.system.version\" }),\n2017-05-01T15:18:49.849+0800 D STORAGE  [conn1] create uri: table:index-11--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=8,infoObj={ \"v\" : 2, \"key\" : { \"version\" : 1 }, \"name\" : \"incompatible_with_version_32\", \"ns\" : \"admin.system.version\" }),\n2017-05-01T15:18:49.852+0800 D STORAGE  [conn1] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-11--3505979310332637255 ok range 6 -> 8 current: 8\n2017-05-01T15:18:49.852+0800 D STORAGE  [conn1] admin.system.version: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.852+0800 I INDEX    [conn1] build index on: admin.system.version properties: { v: 2, key: { version: 1 }, name: \"incompatible_with_version_32\", ns: \"admin.system.version\" }\n2017-05-01T15:18:49.852+0800 I INDEX    [conn1]      building index using bulk method; build may temporarily use up to 500 megabytes of RAM\n2017-05-01T15:18:49.852+0800 D INDEX    [conn1]      bulk commit starting for index: incompatible_with_version_32\n2017-05-01T15:18:49.853+0800 D INDEX    [conn1]      done building bottom layer, going to commit\n2017-05-01T15:18:49.853+0800 I INDEX    [conn1] build index done.  scanned 0 total records. 0 secs\n2017-05-01T15:18:49.853+0800 D INDEX    [conn1] marking index incompatible_with_version_32 as ready in snapshot id 50\n2017-05-01T15:18:49.854+0800 I COMMAND  [conn1] setting featureCompatibilityVersion to 3.4\n2017-05-01T15:18:49.854+0800 D REPL     [conn1] Updated term in topology coordinator to 0 due to new config\n2017-05-01T15:18:49.854+0800 I REPL     [conn1] New replica set config in use: { _id: \"test\", version: 1, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('5906e159c7e0c4c709f69f96') } }\n2017-05-01T15:18:49.854+0800 I REPL     [conn1] This node is 10.200.20.56:1111 in the config\n2017-05-01T15:18:49.854+0800 I REPL     [conn1] transition to STARTUP2\n2017-05-01T15:18:49.854+0800 I REPL     [conn1] Starting replication storage threads\n2017-05-01T15:18:49.854+0800 D ASIO     [NetworkInterfaceASIO-RS-0] The NetworkInterfaceASIO worker thread is spinning up\n2017-05-01T15:18:49.854+0800 D EXECUTOR [replication-0] starting thread in pool replication\n2017-05-01T15:18:49.854+0800 D EXECUTOR [initial sync-0] starting thread in pool initial sync-Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 0] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 1] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 2] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 3] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 4] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 5] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 11] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 7] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 12] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 I REPL     [conn1] Starting replication fetcher thread\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 14] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 6] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 8] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 13] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.854+0800 D EXECUTOR [repl writer worker 9] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 10] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 15] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 I REPL     [conn1] Starting replication applier thread\n2017-05-01T15:18:49.855+0800 I REPL     [conn1] Starting replication reporter thread\n2017-05-01T15:18:49.855+0800 I REPL     [rsSync] transition to RECOVERING\n2017-05-01T15:18:49.855+0800 I COMMAND  [conn1] command local.replset.minvalid command: replSetInitiate { v: 2, key: { version: 1 }, ns: \"admin.system.version\", name: \"incompatible_with_version_32\" } numYields:0 reslen:37 locks:{ Global: { acquireCount: { r: 14, w: 8, W: 2 }, acquireWaitCount: { W: 1 }, timeAcquiringMicros: { W: 56 } }, Database: { acquireCount: { r: 2, w: 2, W: 6 } }, Collection: { acquireCount: { r: 2, w: 2 } }, Metadata: { acquireCount: { w: 1 } }, oplog: { acquireCount: { w: 2 } } } protocol:op_query 39ms\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 0] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D REPL     [rsBackgroundSync] bgsync fetch queue set to: { ts: Timestamp 1493623129000|1, t: -1 } 8120695218824595400\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 1] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 2] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 3] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 5] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 6] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 4] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 7] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 8] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 15] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 10] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 11] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 12] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 13] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 14] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.855+0800 D EXECUTOR [repl writer worker 9] starting thread in pool repl writer worker Pool\n2017-05-01T15:18:49.856+0800 I REPL     [rsSync] transition to SECONDARY\n2017-05-01T15:18:49.856+0800 I REPL     [rsSync] conducting a dry run election to see if we could be elected\n2017-05-01T15:18:49.856+0800 I REPL     [ReplicationExecutor] dry election run succeeded, running for election\n2017-05-01T15:18:49.856+0800 D REPL     [ReplicationExecutor] Updating term from 0 to 1\n2017-05-01T15:18:49.856+0800 D STORAGE  [replExecDBWorker-0] stored meta data for local.replset.election @ RecordId(8)\n2017-05-01T15:18:49.856+0800 D STORAGE  [replExecDBWorker-0] WiredTigerKVEngine::createRecordStore uri: table:collection-12--3505979310332637255 config: type=file,memory_page_max=10m,split_pct=90,leaf_value_max=64MB,checksum=on,block_compressor=snappy,,key_format=q,value_format=u,app_metadata=(formatVersion=1)\n2017-05-01T15:18:49.856+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:49.856+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:49.856+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:530 locks:{} protocol:op_query 0ms\n2017-05-01T15:18:49.859+0800 D STORAGE  [replExecDBWorker-0] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:collection-12--3505979310332637255 ok range 1 -> 1 current: 1\n2017-05-01T15:18:49.859+0800 D STORAGE  [replExecDBWorker-0] local.replset.election: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.859+0800 D STORAGE  [replExecDBWorker-0] WiredTigerKVEngine::createSortedDataInterface ident: index-13--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=8,infoObj={ \"v\" : 2, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.replset.election\" }),\n2017-05-01T15:18:49.859+0800 D STORAGE  [replExecDBWorker-0] create uri: table:index-13--3505979310332637255 config: type=file,internal_page_max=16k,leaf_page_max=16k,checksum=on,prefix_compression=true,block_compressor=,,,,key_format=u,value_format=u,app_metadata=(formatVersion=8,infoObj={ \"v\" : 2, \"key\" : { \"_id\" : 1 }, \"name\" : \"_id_\", \"ns\" : \"local.replset.election\" }),\n2017-05-01T15:18:49.862+0800 D STORAGE  [replExecDBWorker-0] WiredTigerUtil::checkApplicationMetadataFormatVersion  uri: table:index-13--3505979310332637255 ok range 6 -> 8 current: 8\n2017-05-01T15:18:49.862+0800 D STORAGE  [replExecDBWorker-0] local.replset.election: clearing plan cache - collection info cache reset\n2017-05-01T15:18:49.862+0800 D INDEX    [replExecDBWorker-0] marking index _id_ as ready in snapshot id 63\n2017-05-01T15:18:49.862+0800 D QUERY    [replExecDBWorker-0] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:49.862+0800 I REPL     [ReplicationExecutor] election succeeded, assuming primary role in term 1\n2017-05-01T15:18:49.862+0800 I REPL     [ReplicationExecutor] transition to PRIMARY\n2017-05-01T15:18:49.862+0800 I REPL     [ReplicationExecutor] Could not access any nodes within timeout when checking for additional ops to apply before finishing transition to primary. Will move forward with becoming primary anyway.\n2017-05-01T15:18:51.856+0800 D QUERY    [rsSync] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {}, planSummary: COLLSCAN\n2017-05-01T15:18:51.857+0800 D REPL     [rsSync] Ignoring older committed snapshot from before I became primary, optime: { ts: Timestamp 1493623129000|1, t: -1 }, firstOpTimeOfMyTerm: { ts: Timestamp 2147483647000|0, t: 2147483647 }\n2017-05-01T15:18:51.857+0800 D REPL     [rsSync] Removing temporary collections from admin\n2017-05-01T15:18:51.857+0800 D REPL     [rsSync] Ignoring older committed snapshot from before I became primary, optime: { ts: Timestamp 1493623129000|1, t: -1 }, firstOpTimeOfMyTerm: { ts: Timestamp 1493623131000|1, t: 1 }\n2017-05-01T15:18:51.857+0800 I REPL     [rsSync] transition to primary complete; database writes are now permitted\n2017-05-01T15:18:51.871+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623131000|1, t: 1 }\n2017-05-01T15:18:57.098+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:57.098+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:57.098+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:572 locks:{} protocol:op_query 0ms\n2017-05-01T15:18:57.328+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:18:57.328+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:18:57.328+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:572 locks:{} protocol:op_query 0ms\n2017-05-01T15:19:00.873+0800 D COMMAND  [conn1] run command local.$cmd { count: \"system.replset\", query: {}, fields: {} }\n2017-05-01T15:19:00.873+0800 I COMMAND  [conn1] command local.system.replset command: count { count: \"system.replset\", query: {}, fields: {} } planSummary: COUNT keysExamined:0 docsExamined:0 numYields:0 reslen:44 locks:{ Global: { acquireCount: { r: 2 } }, Database: { acquireCount: { r: 1 } }, Collection: { acquireCount: { r: 1 } } } protocol:op_query 0ms\n2017-05-01T15:19:00.873+0800 D QUERY    [conn1] Running query: query: {} sort: {} projection: {} ntoreturn=1\n2017-05-01T15:19:00.873+0800 D QUERY    [conn1] Only one plan is available; it will be run but will not be cached. query: {} sort: {} projection: {} ntoreturn=1, planSummary: COLLSCAN\n2017-05-01T15:19:00.873+0800 I COMMAND  [conn1] query local.system.replset planSummary: COLLSCAN ntoskip:0 keysExamined:0 docsExamined:1 cursorExhausted:1 numYields:0 nreturned:1 reslen:473 locks:{ Global: { acquireCount: { r: 2 } }, Database: { acquireCount: { r: 1 } }, Collection: { acquireCount: { r: 1 } } } 0ms\n2017-05-01T15:19:00.874+0800 D COMMAND  [conn1] run command admin.$cmd { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('5906e159c7e0c4c709f69f96') } } }\n2017-05-01T15:19:00.874+0800 D COMMAND  [conn1] command: replSetReconfig\n2017-05-01T15:19:00.874+0800 I REPL     [conn1] replSetReconfig admin command received from client\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:19:00.875+0800 D NETWORK  [conn1] getBoundAddrs(): [ 127.0.0.1] [ 10.200.20.56] [ 172.17.0.1]\nDEBUG:getaddrinfo: 10.200.20.56 1111\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:pid[33275]:pc_getnameinfo\n2017-05-01T15:19:00.875+0800 D NETWORK  [conn1] getAddrsForHost(\"10.200.20.56:1111\"): [ 10.200.20.56]\nDEBUG:freeaddrinfo 0x7f42f2d86900\nDEBUG:pid[33275]:proxy_freeaddrinfo\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f42f2d86900\nDEBUG:pid[33275]:proxy_freeaddrinfo\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:pc_getnameinfo\nDEBUG:pid[33275]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[33275]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[33275]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[33275]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[33275]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-01T15:19:00.876+0800 D NETWORK  [conn1] connected to server 10.200.20.56:1112 (10.200.20.56)\n2017-05-01T15:19:00.877+0800 I REPL     [conn1] replSetReconfig config object with 2 members parses ok\n2017-05-01T15:19:00.877+0800 D ASIO     [conn1] startCommand: RemoteCommand 1 -- target:10.200.20.56:1112 db:admin expDate:2017-05-01T15:19:10.877+0800 cmd:{ replSetHeartbeat: \"test\", pv: 1, v: 2, from: \"10.200.20.56:1111\", fromId: 0, checkEmpty: false }\n2017-05-01T15:19:00.877+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[33275]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f42f2e5a140\nDEBUG:pid[33275]:proxy_freeaddrinfo\nDEBUG:pid[33275]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[33275]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[33275]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[33275]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[33275]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-01T15:19:00.878+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] Starting asynchronous command 2 on host 10.200.20.56:1112\n2017-05-01T15:19:01.857+0800 D REPL     [NoopWriter] Writing noop to oplog as there has been no writes to this replica set in over 10s\n2017-05-01T15:19:01.857+0800 D REPL     [NoopWriter] Set last known op time to { ts: Timestamp 1493623141000|1, t: 1 }\n2017-05-01T15:19:01.880+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623141000|1, t: 1 }\n2017-05-01T15:19:10.877+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] Failed to get connection from pool for request 1: NetworkInterfaceExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-01T15:19:10.877+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-01T15:19:10.877+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-01T15:19:10.877+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('5906e159c7e0c4c709f69f96') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-01T15:19:10.879+0800 D COMMAND  [conn1] run command admin.$cmd { replSetGetStatus: 1.0, forShell: 1.0 }\n2017-05-01T15:19:10.879+0800 D COMMAND  [conn1] command: replSetGetStatus\n2017-05-01T15:19:10.879+0800 I COMMAND  [conn1] command admin.$cmd command: replSetGetStatus { replSetGetStatus: 1.0, forShell: 1.0 } numYields:0 reslen:572 locks:{} protocol:op_query 0ms\n2017-05-01T15:19:11.857+0800 D REPL     [NoopWriter] Writing noop to oplog as there has been no writes to this replica set in over 10s\n2017-05-01T15:19:11.857+0800 D REPL     [NoopWriter] Set last known op time to { ts: Timestamp 1493623151000|1, t: 1 }\n2017-05-01T15:19:11.889+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623151000|1, t: 1 }\n2017-05-01T15:19:20.877+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] Operation timing out; original request was: RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-01T15:19:20.877+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-01T15:19:20.877+0800 D ASIO     [NetworkInterfaceASIO-Replication-0] Request 2 finished with response: NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-01T15:19:20.877+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection\n2017-05-01T15:19:21.858+0800 D REPL     [NoopWriter] Writing noop to oplog as there has been no writes to this replica set in over 10s\n2017-05-01T15:19:21.858+0800 D REPL     [NoopWriter] Set last known op time to { ts: Timestamp 1493623161000|1, t: 1 }\n2017-05-01T15:19:21.898+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623161000|1, t: 1 }\n2017-05-01T15:19:25.873+0800 D -        [PeriodicTaskRunner] cleaning up unused lock buckets of the global lock manager\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:_mdb_catalog -> { numRecords: 8, dataSize: 2587 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-12--3505979310332637255 -> { numRecords: 1, dataSize: 60 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-4--3505979310332637255 -> { numRecords: 5, dataSize: 468 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-5--3505979310332637255 -> { numRecords: 1, dataSize: 453 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-7--3505979310332637255 -> { numRecords: 1, dataSize: 45 }\n2017-05-01T15:19:25.902+0800 D STORAGE  [WTJournalFlusher] WiredTigerSizeStorer::storeInto table:collection-9--3505979310332637255 -> { numRecords: 1, dataSize: 59 }\n2017-05-01T15:19:31.858+0800 D REPL     [NoopWriter] Writing noop to oplog as there has been no writes to this replica set in over 10s\n2017-05-01T15:19:31.858+0800 D REPL     [NoopWriter] Set last known op time to { ts: Timestamp 1493623171000|1, t: 1 }\n2017-05-01T15:19:31.908+0800 D REPL     [WTJournalFlusher] Updating _lastCommittedOpTime to { ts: Timestamp 1493623171000|1, t: 1 }. I use gdb debugged at timed_connect() in proxychains and connect_proxy in kneesocks, for proxtchains, and change the type of addr from struct sockaddr * to struct sockaddr_in *.\naddr in proxychains:\n*addr = {sin_family = 2, sin_port = 10505, sin_addr = {s_addr = 16777343}, sin_zero = \"\\000\\000\\000\\000\\000\\000\\000\"}\naddr in kneesocks\n*addr = {sin_family = 2, sin_port = 22276, sin_addr = {s_addr = 940886026}, sin_zero = \"\\000\\000\\000\\000\\000\\000\\000\"}\nIt seems there is no problem in addr.\nthere is a little different in sockfd flag :\nin proxychains, before connect, fd_flags=2, and after connect, fd_flags=2050.\nfcntl(sock, F_SETFL, O_NONBLOCK);\nbut in sockfd, before connect, fd_flags=2050, after connect, fd_flags=2050\nfcntl(sockfd, F_SETFL, fd_flags & ~O_NONBLOCK);\nI'm not familiar with c network programing, not sure whether or not the fd_flags will affect non-blocking socket?. if I commenting out line 184 in core.c, still connect failed, connect ret=-1: \n2017-05-04T06:21:06.701+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[36566]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f724a028140\nDEBUG:pid[36566]:proxy_freeaddrinfo\nDEBUG:pid[36566]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[36566]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[36566]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[36566]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[36566]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T06:21:16.701+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T06:21:16.701+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T06:21:16.701+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a54e6187854f7222cc683') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\nif I commenting out line 157 in core.c,connect ret=0, connect success, but still got Operation timed out\ndiff\n-fcntl(sock, F_SETFL, O_NONBLOCK);\n+//fcntl(sock, F_SETFL, O_NONBLOCK);\n2017-05-04T06:22:40.483+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[37317]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f84cf251000\nDEBUG:pid[37317]:proxy_freeaddrinfo\nDEBUG:pid[37317]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[37317]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[37317]:timed_connect\nDEBUG:\nconnect ret=0\nDEBUG:pid[37317]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[37317]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T06:22:50.483+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T06:22:50.483+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T06:22:50.483+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a54e6187854f7222cc683') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T06:23:00.483+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T06:23:00.483+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection. with the patch, connect ret=0, connect success, but still got Operation timed out\n2017-05-04T09:27:58.321+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[15371]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f85f0141000\nDEBUG:pid[15371]:proxy_freeaddrinfo\nDEBUG:pid[15371]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[15371]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[15371]:timed_connect\nDEBUG:\nconnect ret=0\nDEBUG:pid[15371]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[15371]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T09:28:08.321+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T09:28:08.321+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T09:28:08.321+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a54e6187854f7222cc683') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T09:28:18.321+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T09:28:18.321+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection. now connect ret=-1, connect failed\n2017-05-04T10:30:45.192+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[36723]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f570429e140\nDEBUG:pid[36723]:proxy_freeaddrinfo\nDEBUG:pid[36723]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[36723]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[36723]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[36723]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[36723]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T10:30:55.192+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T10:30:55.192+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit2017-05-04T10:30:55.192+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a92512faabb955d2acc34') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T10:31:05.192+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T10:31:05.192+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection. yes, both the one-line change and the new patch don't work, connect failed\ndiff\ndiff --git a/src/core.c b/src/core.c\nindex 19cd3da..510400d 100644\n--- a/src/core.c\n+++ b/src/core.c\n@@ -155,7 +155,8 @@ static int timed_connect(int sock, const struct sockaddr *addr, socklen_t len) {\n        pfd[0].fd = sock;\n        pfd[0].events = POLLOUT;\n        int flags = fcntl(sock, F_GETFL, 0);\n-       fcntl(sock, F_SETFL, flags & (~O_NONBLOCK));\n+       //fcntl(sock, F_SETFL, flags & (~O_NONBLOCK));\n+       fcntl(sock, F_SETFL, flags | O_NONBLOCK);\n        ret = true_connect(sock, addr, len);\n        PDEBUG(\"\\nconnect ret=%d\\n\", ret);. I'm sure it's in latest nonblock branch:\nhere is the git info:\n```bash\n$ git branch\n  master\n* nonblock\n$ git log | head\ncommit cbddf15b19191257de302687df558adfae10aeb5\nAuthor: rofl0r retnyg@gmx.net\nDate:   Thu May 4 01:31:56 2017 +0100\nproperly handle non-blocking mode of socket\n\naddressing #171\n\ncommit bb3df1e4409190da2627d8a3b5bdd5e02d246f28\nAuthor: rofl0r retnyg@gmx.net\n```\nhere is some gdb debug info:\nBreakpoint 1, timed_connect (sock=31, addr=0x7ffff7fdb3e0, len=16) at src/core.c:153\n153             PFUNC();\n(gdb) display *addr\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) display flags\n2: flags = 0\n(gdb) display ret\n3: ret = 2\n(gdb) l\n148\n149     static int timed_connect(int sock, const struct sockaddr *addr, socklen_t len) {\n150             int ret, value;\n151             socklen_t value_len;\n152             struct pollfd pfd[1];\n153             PFUNC();\n154\n155             pfd[0].fd = sock;\n156             pfd[0].events = POLLOUT;\n157             int flags = fcntl(sock, F_GETFL, 0);\n(gdb) n\n2017-05-04T11:28:53.492+0800 I COMMAND  [ftdc] serverStatus was very slow: { after basic: 0, after asserts: 0, after backgroundFlushing: 0, after connections: 0, after dur: 0, af\nter extra_info: 62006, after globalLock: 62006, after locks: 62006, after network: 62006, after opLatencies: 62006, after opcounters: 62006, after opcountersRepl: 62006, after re\npl: 62006, after storageEngine: 62006, after tcmalloc: 62006, after wiredTiger: 62006, at end: 62006 }\nDEBUG:pid[14538]:timed_connect\n155             pfd[0].fd = sock;\n3: ret = 2\n2: flags = 0\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n156             pfd[0].events = POLLOUT;\n3: ret = 2\n2: flags = 0\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n157             int flags = fcntl(sock, F_GETFL, 0);\n3: ret = 2\n2: flags = 0\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n160             if(!(flags & O_NONBLOCK))\n3: ret = 2\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n161                     fcntl(sock, F_SETFL, flags | O_NONBLOCK);\n3: ret = 2\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n162             ret = true_connect(sock, addr, len);\n3: ret = 2\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n163             PDEBUG(\"\\nconnect ret=%d\\n\", ret);\n3: ret = -1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\nDEBUG:\nconnect ret=-1\n167             if(flags & O_NONBLOCK)\n3: ret = -1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n2017-05-04T11:29:20.462+0800 I COMMAND  [ftdc] serverStatus was very slow: { after basic: 0, after asserts: 0, after backgroundFlushing: 0, after connections: 0, after dur: 0, af\nter extra_info: 2018, after globalLock: 2018, after locks: 2018, after network: 2018, after opLatencies: 2018, after opcounters: 2018, after opcountersRepl: 2018, after repl: 201\n8, after storageEngine: 2018, after tcmalloc: 2018, after wiredTiger: 2018, at end: 2018 }\n170             if(ret == -1 && errno == EINPROGRESS) {\n3: ret = -1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n171                     ret = poll_retry(pfd, 1, tcp_connect_time_out);\n3: ret = -1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n172                     PDEBUG(\"\\npoll ret=%d\\n\", ret);\n3: ret = 1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) n\n2017-05-04T11:29:31.813+0800 I COMMAND  [ftdc] serverStatus was very slow: { after basic: 0, after asserts: 0, after backgroundFlushing: 0, after connections: 0, after dur: 0, af\nter extra_info: 4562, after globalLock: 4562, after locks: 4562, after network: 4562, after opLatencies: 4562, after opcounters: 4562, after opcountersRepl: 4562, after repl: 456\n2, after storageEngine: 4562, after tcmalloc: 4562, after wiredTiger: 4562, at end: 4562 }\nDEBUG:\npoll ret=1\n173                     if(ret == 1) {\n3: ret = 1\n2: flags = 2\n1: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb). I tested branch nonblock2 and merged nonblock and nonblock2, both connect failed\n2017-05-04T12:02:05.508+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[26222]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7f3eb0c5a000\nDEBUG:pid[26222]:proxy_freeaddrinfo\nDEBUG:pid[26222]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[26222]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[26222]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[26222]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[26222]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T12:02:15.508+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T12:02:15.508+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T12:02:15.509+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a92512faabb955d2acc34') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T12:02:25.508+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T12:02:25.508+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection. connect success, but Operation timed out\n```\n$ git log | head -24\ncommit 6f093fc039e2bd8adbd4310cb0dd4af47b7af494\nMerge: 6d90d82 ea8f4ff\nAuthor: test cs48@qiniu.com\nDate:   Thu May 4 12:13:36 2017 +0800\nMerge branch 'nonblock2' into merged2\n\ncommit ea8f4ff5dc693fd7f824796a8ac4816b0194178b\nAuthor: rofl0r retnyg@gmx.net\nDate:   Thu May 4 04:53:35 2017 +0100\nrestore original socket flags after connecting\n\nthe socket may have been in non-blocking mode originally.\naddressing #171\n\ncommit 6d90d82a7b0998db5d29bf563ca6cefc72080dbb\nAuthor: rofl0r retnyg@gmx.net\nDate:   Thu May 4 01:31:56 2017 +0100\nproperly restore non-blocking mode of socket\n\naddressing #171\n\n```\n2017-05-04T12:14:20.152+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 10.200.20.56:1112\nDEBUG:getaddrinfo: 10.200.20.56 1112\nDEBUG:pid[31589]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x7fd9d01d9000\nDEBUG:pid[31589]:proxy_freeaddrinfo\nDEBUG:pid[31589]:connect\nDEBUG:target: 10.200.20.56\nDEBUG:port: 1112\nDEBUG:pid[31589]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[31589]:timed_connect\nDEBUG:\nconnect ret=0\nDEBUG:pid[31589]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[31589]:tunnel_to\nDEBUG:host dns <NULL>\n ...  OK\n2017-05-04T12:14:30.152+0800 W REPL     [ReplicationExecutor] Failed to complete heartbeat request to 10.200.20.56:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T12:14:30.152+0800 E REPL     [conn1] replSetReconfig failed; NodeNotFound: Quorum check failed because not enough voting nodes responded; required 2 but only the following 1 voting nodes responded: 10.200.20.56:1111; the following nodes did not respond affirmatively: 10.200.20.56:1112 failed with Couldn't get a connection within the time limit\n2017-05-04T12:14:30.152+0800 I COMMAND  [conn1] command admin.$cmd command: replSetReconfig { replSetReconfig: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"10.200.20.56:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1.0, host: \"10.200.20.56:1112\" } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590a92512faabb955d2acc34') } } } numYields:0 reslen:357 locks:{ Global: { acquireCount: { r: 1, W: 1 } } } protocol:op_query 10003ms\n2017-05-04T12:14:40.152+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Failed to connect to 10.200.20.56:1112 - NetworkInterfaceExceededTimeLimit: Operation timed out, request was RemoteCommand 2 -- target:10.200.20.56:1112 db:admin cmd:{ isMaster: 1 }\n2017-05-04T12:14:40.152+0800 I ASIO     [NetworkInterfaceASIO-Replication-0] Dropping all pooled connections to 10.200.20.56:1112 due to failed operation on a connection\n```\nBreakpoint 2, connect_proxy_chain (sock=30, target_ip=..., target_port=22532, pd=0x7ffff7d955a0 , proxy_count=1, ct=RANDOM_TYPE, max_chain=1) at src/core.c:560\n560                             unsigned int proxy_count, chain_type ct, unsigned int max_chain) {\n(gdb) watch flags\nHardware watchpoint 3: flags\n(gdb) display flags\n1: flags = 32767\n(gdb) c\nContinuing.\nDEBUG:pid[33382]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345\nBreakpoint 1, timed_connect (sock=31, addr=0x7ffff7fdb3e0, len=16) at src/core.c:153\n153             PFUNC();\n(gdb) display addr\n2: addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) watch flags\nHardware watchpoint 4: flags\n(gdb) c\nContinuing.\nDEBUG:pid[33382]:timed_connect\nHardware watchpoint 4: flags\nOld value = 0\nNew value = 2\ntimed_connect (sock=31, addr=0x7ffff7fdb3e0, len=16) at src/core.c:158\n158             fcntl(sock, F_SETFL, flags & (~O_NONBLOCK));\n2: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) display ret\n3: ret = 2\n(gdb) watch ret\nHardware watchpoint 5: ret\n(gdb) c\nContinuing.\nHardware watchpoint 5: ret\nOld value = 2\nNew value = 0\ntimed_connect (sock=31, addr=0x7ffff7fdb3e0, len=16) at src/core.c:160\n160             PDEBUG(\"\\nconnect ret=%d\\n\", ret);\n3: ret = 0\n2: *addr = {sa_family = 2, sa_data = \"\\t)\\177\\000\\000\\001\\000\\000\\000\\000\\000\\000\\000\"}\n(gdb) c\nContinuing.\nDEBUG:\nconnect ret=0\nWatchpoint 4 deleted because the program has left the block in\nwhich its expression is valid.\nWatchpoint 5 deleted because the program has left the block in\nwhich its expression is valid.\n0x00007ffff7b8c5fb in start_chain (fd=0x7ffff7fdb488, pd=0x7ffff7d955a0 , begin_mark=0x7ffff7b91098 \"Random chain\") at src/core.c:448\n448             if(timed_connect(fd, (struct sockaddr ) (v6?(void)&addr6:(void)&addr), v6?sizeof(addr6):sizeof(addr))) {\n(gdb) c\nContinuing.\nDEBUG:pid[33382]:chain_step\n ...  10.200.20.56:1112 DEBUG:pid[33382]:tunnel_to\nDEBUG:host dns \n2017-05-04T12:22:35.553+0800 I COMMAND  [ftdc] serverStatus was very slow: { after basic: 0, after asserts: 0, after backgroundFlushing: 0, after connections: 0, after dur: 0, af\nter extra_info: 11405, after globalLock: 11405, after locks: 11405, after network: 11405, after opLatencies: 11405, after opcounters: 11405, after opcountersRepl: 11405, after re\npl: 11405, after storageEngine: 11405, after tcmalloc: 11405, after wiredTiger: 11405, at end: 30173 }\n ...  OK\nHardware watchpoint 3: flags\nOld value = 32767\nNew value = 2\nconnect_proxy_chain (sock=30, target_ip=..., target_port=22532, pd=0x7ffff7d955a0 , proxy_count=1, ct=RANDOM_TYPE, max_chain=1) at src/core.c:705\n705             dup2(ns, sock);\n1: flags = 2\n(gdb) c\nContinuing.\nWatchpoint 3 deleted because the program has left the block in\nwhich its expression is valid.\n0x00007ffff7b8f313 in connect (sock=30, addr=0x55555d5d00c8, len=16) at src/libproxychains.c:392\n392             ret = connect_proxy_chain(sock,\n```. I build a docker image, you may pull the image and debug locally?\n```\n$ docker run -it ma6174/mongo_proxychains bash\nroot@61fa69e7a5a7:/# cd\nroot@61fa69e7a5a7:~# ls\ndata1  kneesocks      libkneesocks.so     mongod_2.log    proxychains.conf  ss_config.json  ss_server.log      start_ss.sh\ndata2  kneesocks_cmd  libproxychains4.so  proxychains-ng  proxychains4      ss_local.log    start_mongod_node2.sh\nroot@61fa69e7a5a7:~# bash start_ss.sh\nroot@61fa69e7a5a7:~# nohup: redirecting stderr to stdout\nnohup: redirecting stderr to stdout\nroot@61fa69e7a5a7:~# bash start_mongod_node2.sh\nroot@61fa69e7a5a7:~# nohup: redirecting stderr to stdout\nroot@61fa69e7a5a7:~# ./proxychains4 -f proxychains.conf mongod --dbpath data1 --replSet test --port 1111\n[proxychains] config file found: proxychains.conf\n[proxychains] preloading ./libproxychains4.so\nDEBUG:init_lib_wrapper called from gcc_init\nDEBUG:pid[84]:at_init\nDEBUG:pid[84]:wait_data\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] DLL init: proxychains-ng 4.12-git-1-gbb3df1e\nDEBUG:loaded symbol 'connect' real addr 0x7f1219ee8cc0  wrapped addr 0x7f121b07d7ea\nDEBUG:loaded symbol 'sendto' real addr 0x7f1219ee8fa0  wrapped addr 0x7f121b07e12f\nDEBUG:loaded symbol 'gethostbyname' real addr 0x7f1219c28610  wrapped addr 0x7f121b07dc53\nDEBUG:loaded symbol 'getaddrinfo' real addr 0x7f1219c04760  wrapped addr 0x7f121b07dcbf\nDEBUG:loaded symbol 'freeaddrinfo' real addr 0x7f1219c04720  wrapped addr 0x7f121b07dd6c\nDEBUG:loaded symbol 'gethostbyaddr' real addr 0x7f1219c28050  wrapped addr 0x7f121b07e01b\nDEBUG:loaded symbol 'getnameinfo' real addr 0x7f1219c30380  wrapped addr 0x7f121b07a120\nDEBUG:loaded symbol 'close' real addr 0x7f1219ee8ad0  wrapped addr 0x7f121b07d6e8\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] MongoDB starting : pid=84 port=1111 dbpath=data1 64-bit host=61fa69e7a5a7\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] db version v3.4.4\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] git version: 888390515874a9debd1b6c5d36559ca86b44babd\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] OpenSSL version: OpenSSL 1.0.1t  3 May 2016\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] allocator: tcmalloc\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] modules: none\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] build environment:\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten]     distmod: debian81\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten]     distarch: x86_64\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten]     target_arch: x86_64\n2017-05-04T06:19:06.736+0000 I CONTROL  [initandlisten] options: { net: { port: 1111 }, replication: { replSet: \"test\" }, storage: { dbPath: \"data1\" } }\nDEBUG:getaddrinfo: 0.0.0.0 1111\nDEBUG:pid[84]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x5646bdc9ddc0\nDEBUG:pid[84]:proxy_freeaddrinfo\n2017-05-04T06:19:06.745+0000 I -        [initandlisten] Detected data files in data1 created by the 'wiredTiger' storage engine, so setting the active storage engine to 'wiredTiger'.\n2017-05-04T06:19:06.745+0000 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=487M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),\n2017-05-04T06:19:06.962+0000 I STORAGE  [initandlisten] Starting WiredTigerRecordStoreThread local.oplog.rs\n2017-05-04T06:19:06.962+0000 I STORAGE  [initandlisten] The size storer reports that the oplog contains 16 records totaling to 1526 bytes\n2017-05-04T06:19:06.962+0000 I STORAGE  [initandlisten] Scanning the oplog to determine where to place markers for truncation\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]  WARNING: Access control is not enabled for the database.\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]           Read and write access to data and configuration is unrestricted.\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]  WARNING: You are running this process as the root user, which is not recommended.\n2017-05-04T06:19:06.981+0000 I CONTROL  [initandlisten]\n2017-05-04T06:19:06.988+0000 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory 'data1/diagnostic.data'\n2017-05-04T06:19:06.991+0000 I NETWORK  [thread1] waiting for connections on port 1111\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:getaddrinfo: 127.0.0.1 1111\nDEBUG:pid[84]:proxy_getaddrinfo\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:freeaddrinfo 0x5646c145d680\nDEBUG:pid[84]:proxy_freeaddrinfo\nDEBUG:getaddrinfo: 127.0.0.1 1112\nDEBUG:pid[84]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x5646c145d680\nDEBUG:pid[84]:proxy_freeaddrinfo\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:connect\nDEBUG:target: 127.0.0.1\nDEBUG:port: 1112\nDEBUG:pid[84]:connect_proxy_chain\nDEBUG:[play] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[84]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[84]:chain_step\n ...  127.0.0.1:1112 DEBUG:pid[84]:tunnel_to\nDEBUG:host dns \n ...  OK\n2017-05-04T06:19:06.998+0000 I REPL     [replExecDBWorker-1] New replica set config in use: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"127.0.0.1:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1, host: \"127.0.0.1:1112\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590abeb31026666da1a599f2') } }\n2017-05-04T06:19:06.998+0000 I REPL     [replExecDBWorker-1] This node is 127.0.0.1:1111 in the config\n2017-05-04T06:19:06.998+0000 I REPL     [replExecDBWorker-1] transition to STARTUP2\n2017-05-04T06:19:06.998+0000 I REPL     [replExecDBWorker-1] Starting replication storage threads\n2017-05-04T06:19:06.999+0000 I REPL     [replExecDBWorker-1] Starting replication fetcher thread\n2017-05-04T06:19:06.999+0000 I REPL     [replExecDBWorker-1] Starting replication applier thread\n2017-05-04T06:19:06.999+0000 I REPL     [replExecDBWorker-1] Starting replication reporter thread\n2017-05-04T06:19:07.002+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 127.0.0.1:1112\n2017-05-04T06:19:07.002+0000 I REPL     [rsSync] transition to RECOVERING\nDEBUG:getaddrinfo: 127.0.0.1 1112\nDEBUG:pid[84]:proxy_getaddrinfo\nDEBUG:freeaddrinfo 0x5646c14ba640\nDEBUG:pid[84]:proxy_freeaddrinfo\nDEBUG:pid[84]:connect\nDEBUG:target: 127.0.0.1\n2017-05-04T06:19:07.005+0000 I REPL     [rsSync] transition to SECONDARY\nDEBUG:port: 1112\nDEBUG:pid[84]:connect_proxy_chain\nDEBUG:[busy] socks5 127.0.0.1:2345\n[proxychains] Random chain  ...  127.0.0.1:2345 DEBUG:pid[84]:timed_connect\nDEBUG:\nconnect ret=-1\nDEBUG:\npoll ret=1\nDEBUG:\nvalue=0\nDEBUG:pid[84]:chain_step\n ...  127.0.0.1:1112 DEBUG:pid[84]:tunnel_to\nDEBUG:host dns \n ...  OK\nDEBUG:pid[84]:pc_getnameinfo\n2017-05-04T06:19:08.340+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45704 #1 (1 connection now open)\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:pc_getnameinfo\n2017-05-04T06:19:08.341+0000 I NETWORK  [conn1] received client metadata from 127.0.0.1:45704 conn1: { driver: { name: \"NetworkInterfaceASIO-Replication\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\nDEBUG:pid[84]:pc_getnameinfo\n2017-05-04T06:19:08.386+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45706 #2 (2 connections now open)\nDEBUG:pid[84]:pc_getnameinfo\nDEBUG:pid[84]:pc_getnameinfo\n2017-05-04T06:19:08.386+0000 I NETWORK  [conn2] received client metadata from 127.0.0.1:45706 conn2: { driver: { name: \"NetworkInterfaceASIO-Replication\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\n2017-05-04T06:19:17.003+0000 I REPL     [ReplicationExecutor] Error in heartbeat request to 127.0.0.1:1112; ExceededTimeLimit: Couldn't get a connection within the time limit\n2017-05-04T06:19:18.497+0000 I REPL     [ReplicationExecutor] Not starting an election, since we are not electable due to: Not standing for election because I cannot see a majority (mask 0x1)\n2017-05-04T06:19:22.012+0000 I REPL     [rsBackgroundSync] waiting for 2 pings from other members before syncing\n^C\nroot@61fa69e7a5a7:~#\nroot@61fa69e7a5a7:~# ./kneesocks_cmd mongod --dbpath data1 --replSet test --port 1111\n[kneesocks] running\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] MongoDB starting : pid=162 port=1111 dbpath=data1 64-bit host=61fa69e7a5a7\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] db version v3.4.4\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] git version: 888390515874a9debd1b6c5d36559ca86b44babd\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] OpenSSL version: OpenSSL 1.0.1t  3 May 2016\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] allocator: tcmalloc\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] modules: none\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] build environment:\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten]     distmod: debian81\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten]     distarch: x86_64\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten]     target_arch: x86_64\n2017-05-04T06:20:08.305+0000 I CONTROL  [initandlisten] options: { net: { port: 1111 }, replication: { replSet: \"test\" }, storage: { dbPath: \"data1\" } }\n2017-05-04T06:20:08.305+0000 W -        [initandlisten] Detected unclean shutdown - data1/mongod.lock is not empty.\n[kneesocks] getaddrinfo: node=0.0.0.0, service=1111\n2017-05-04T06:20:08.310+0000 I -        [initandlisten] Detected data files in data1 created by the 'wiredTiger' storage engine, so setting the active storage engine to 'wiredTiger'.\n2017-05-04T06:20:08.310+0000 W STORAGE  [initandlisten] Recovering data from the last clean checkpoint.\n2017-05-04T06:20:08.310+0000 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=487M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),\n2017-05-04T06:20:08.499+0000 I STORAGE  [initandlisten] Starting WiredTigerRecordStoreThread local.oplog.rs\n2017-05-04T06:20:08.499+0000 I STORAGE  [initandlisten] The size storer reports that the oplog contains 16 records totaling to 1526 bytes\n2017-05-04T06:20:08.499+0000 I STORAGE  [initandlisten] Scanning the oplog to determine where to place markers for truncation\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]  WARNING: Access control is not enabled for the database.\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]           Read and write access to data and configuration is unrestricted.\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]  WARNING: You are running this process as the root user, which is not recommended.\n2017-05-04T06:20:08.513+0000 I CONTROL  [initandlisten]\n2017-05-04T06:20:08.518+0000 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory 'data1/diagnostic.data'\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1111\n2017-05-04T06:20:08.520+0000 I NETWORK  [thread1] waiting for connections on port 1111\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:08.521+0000 I REPL     [replExecDBWorker-0] New replica set config in use: { _id: \"test\", version: 2, protocolVersion: 1, members: [ { _id: 0, host: \"127.0.0.1:1111\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 }, { _id: 1, host: \"127.0.0.1:1112\", arbiterOnly: false, buildIndexes: true, hidden: false, priority: 1.0, tags: {}, slaveDelay: 0, votes: 1 } ], settings: { chainingAllowed: true, heartbeatIntervalMillis: 2000, heartbeatTimeoutSecs: 10, electionTimeoutMillis: 10000, catchUpTimeoutMillis: 2000, getLastErrorModes: {}, getLastErrorDefaults: { w: 1, wtimeout: 0 }, replicaSetId: ObjectId('590abeb31026666da1a599f2') } }\n2017-05-04T06:20:08.521+0000 I REPL     [replExecDBWorker-0] This node is 127.0.0.1:1111 in the config\n2017-05-04T06:20:08.521+0000 I REPL     [replExecDBWorker-0] transition to STARTUP2\n2017-05-04T06:20:08.521+0000 I REPL     [replExecDBWorker-0] Starting replication storage threads\n2017-05-04T06:20:08.522+0000 I REPL     [replExecDBWorker-0] Starting replication fetcher thread\n2017-05-04T06:20:08.522+0000 I REPL     [replExecDBWorker-0] Starting replication applier thread\n2017-05-04T06:20:08.522+0000 I REPL     [replExecDBWorker-0] Starting replication reporter thread\n2017-05-04T06:20:08.523+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 127.0.0.1:1112\n2017-05-04T06:20:08.523+0000 I REPL     [rsSync] transition to RECOVERING\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:08.525+0000 I REPL     [rsSync] transition to SECONDARY\n2017-05-04T06:20:08.526+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Successfully connected to 127.0.0.1:1112, took 3ms (1 connections now open to 127.0.0.1:1112)\n2017-05-04T06:20:08.527+0000 I REPL     [ReplicationExecutor] Member 127.0.0.1:1112 is now in state SECONDARY\n2017-05-04T06:20:13.416+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45930 #1 (1 connection now open)\n2017-05-04T06:20:13.417+0000 I NETWORK  [conn1] received client metadata from 127.0.0.1:45930 conn1: { driver: { name: \"NetworkInterfaceASIO-Replication\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\n2017-05-04T06:20:14.528+0000 I REPL     [rsBackgroundSync] sync source candidate: 127.0.0.1:1112\n2017-05-04T06:20:14.528+0000 I ASIO     [NetworkInterfaceASIO-RS-0] Connecting to 127.0.0.1:1112\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:14.530+0000 I ASIO     [NetworkInterfaceASIO-RS-0] Successfully connected to 127.0.0.1:1112, took 2ms (1 connections now open to 127.0.0.1:1112)\n2017-05-04T06:20:14.532+0000 I ASIO     [NetworkInterfaceASIO-RS-0] Connecting to 127.0.0.1:1112\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:14.535+0000 I ASIO     [NetworkInterfaceASIO-RS-0] Successfully connected to 127.0.0.1:1112, took 3ms (2 connections now open to 127.0.0.1:1112)\n2017-05-04T06:20:14.537+0000 I REPL     [replication-0] Choosing new sync source because our current sync source, 127.0.0.1:1112, has an OpTime ({ ts: Timestamp 1493878750000|1, t: 9 }) which is not ahead of ours ({ ts: Timestamp 1493878750000|1, t: 9 }), it does not have a sync source, and it's not the primary (sync source does not know the primary)\n2017-05-04T06:20:14.537+0000 I REPL     [replication-0] Canceling oplog query due to OplogQueryMetadata. We have to choose a new sync source. Current source: 127.0.0.1:1112, OpTime { ts: Timestamp 1493878750000|1, t: 9 }, its sync source index:-1\n2017-05-04T06:20:14.537+0000 W REPL     [rsBackgroundSync] Fetcher stopped querying remote oplog with error: InvalidSyncSource: sync source 127.0.0.1:1112 (config version: 2; last applied optime: { ts: Timestamp 1493878750000|1, t: 9 }; sync source index: -1; primary index: -1) is no longer valid\n2017-05-04T06:20:14.538+0000 I REPL     [rsBackgroundSync] could not find member to sync from\n2017-05-04T06:20:14.543+0000 I REPL     [SyncSourceFeedback] SyncSourceFeedback error sending update to 127.0.0.1:1112: InvalidSyncSource: Sync source was cleared. Was 127.0.0.1:1112\n2017-05-04T06:20:19.149+0000 I REPL     [ReplicationExecutor] Starting an election, since we've seen no PRIMARY in the past 10000ms\n2017-05-04T06:20:19.149+0000 I REPL     [ReplicationExecutor] conducting a dry run election to see if we could be elected\n2017-05-04T06:20:19.150+0000 I REPL     [ReplicationExecutor] VoteRequester(term 9 dry run) received a yes vote from 127.0.0.1:1112; response message: { term: 9, voteGranted: true, reason: \"\", ok: 1.0 }\n2017-05-04T06:20:19.150+0000 I REPL     [ReplicationExecutor] dry election run succeeded, running for election\n2017-05-04T06:20:19.157+0000 I REPL     [ReplicationExecutor] VoteRequester(term 10) received a yes vote from 127.0.0.1:1112; response message: { term: 10, voteGranted: true, reason: \"\", ok: 1.0 }\n2017-05-04T06:20:19.157+0000 I REPL     [ReplicationExecutor] election succeeded, assuming primary role in term 10\n2017-05-04T06:20:19.157+0000 I REPL     [ReplicationExecutor] transition to PRIMARY\n2017-05-04T06:20:19.158+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Connecting to 127.0.0.1:1112\n[kneesocks] getaddrinfo: node=127.0.0.1, service=1112\n[kneesocks] connect: type=stream, family=2, address=127.0.0.1, port=1112\n2017-05-04T06:20:19.158+0000 I REPL     [ReplicationExecutor] My optime is most up-to-date, skipping catch-up and completing transition to primary.\n2017-05-04T06:20:19.159+0000 I ASIO     [NetworkInterfaceASIO-Replication-0] Successfully connected to 127.0.0.1:1112, took 1ms (2 connections now open to 127.0.0.1:1112)\n2017-05-04T06:20:20.539+0000 I REPL     [rsSync] transition to primary complete; database writes are now permitted\n2017-05-04T06:20:24.389+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45974 #2 (2 connections now open)\n2017-05-04T06:20:24.390+0000 I NETWORK  [conn2] received client metadata from 127.0.0.1:45974 conn2: { driver: { name: \"NetworkInterfaceASIO-RS\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\n2017-05-04T06:20:24.393+0000 I NETWORK  [thread1] connection accepted from 127.0.0.1:45976 #3 (3 connections now open)\n2017-05-04T06:20:24.394+0000 I NETWORK  [conn3] received client metadata from 127.0.0.1:45976 conn3: { driver: { name: \"NetworkInterfaceASIO-RS\", version: \"3.4.4\" }, os: { type: \"Linux\", name: \"PRETTY_NAME=\"Debian GNU/Linux 8 (jessie)\"\", architecture: \"x86_64\", version: \"Kernel 4.9.21-moby\" } }\n^C2017-05-04T06:20:31.520+0000 I CONTROL  [signalProcessingThread] got signal 2 (Interrupt), will terminate after current cmd ends\n2017-05-04T06:20:31.520+0000 I NETWORK  [signalProcessingThread] shutdown: going to close listening sockets...\n2017-05-04T06:20:31.520+0000 I NETWORK  [signalProcessingThread] closing listening socket: 6\n2017-05-04T06:20:31.521+0000 I NETWORK  [signalProcessingThread] closing listening socket: 7\n2017-05-04T06:20:31.521+0000 I NETWORK  [signalProcessingThread] removing socket file: /tmp/mongodb-1111.sock\n2017-05-04T06:20:31.521+0000 I NETWORK  [signalProcessingThread] shutdown: going to flush diaglog...\n2017-05-04T06:20:31.521+0000 I REPL     [signalProcessingThread] shutting down replication subsystems\n2017-05-04T06:20:31.521+0000 I REPL     [signalProcessingThread] Stopping replication reporter thread\n2017-05-04T06:20:31.521+0000 I REPL     [signalProcessingThread] Stopping replication fetcher thread\n2017-05-04T06:20:31.521+0000 I REPL     [signalProcessingThread] Stopping replication applier thread\n2017-05-04T06:20:31.549+0000 I REPL     [signalProcessingThread] Stopping replication storage threads\n2017-05-04T06:20:31.549+0000 I FTDC     [signalProcessingThread] Shutting down full-time diagnostic data capture\n2017-05-04T06:20:31.551+0000 I STORAGE  [signalProcessingThread] WiredTigerKVEngine shutting down\n2017-05-04T06:20:31.580+0000 I STORAGE  [signalProcessingThread] shutdown: removing fs lock...\n2017-05-04T06:20:31.580+0000 I CONTROL  [signalProcessingThread] now exiting\n2017-05-04T06:20:31.580+0000 I CONTROL  [signalProcessingThread] shutting down with code:0\n2017-05-04T06:20:31.580+0000 I CONTROL  [initandlisten] shutting down with code:0\nroot@61fa69e7a5a7:~#\n```. ",
    "Fomovet": "You're a good person Thank you very much The problem has been solved\nUsing proxy connection SSH\uff1ahttp://stackoverflow.com/questions/19161960\nMaintain SSH connection\uff1ahttps://askubuntu.com/questions/127369. You're a good person Thank you very much The problem has been solved\nUsing proxy connection SSH\uff1ahttp://stackoverflow.com/questions/19161960\nMaintain SSH connection\uff1ahttps://askubuntu.com/questions/127369. ",
    "Enniari": "Thanks for your quick response  :+1: . Thanks for your quick response  :+1: . ",
    "ICMP01": "Hello everybody, I have the same problem. Even adding new addresses (socks4 or 5) connections make several jumps, and hardly the result is expected. For example, web scans... Hello everybody, I have the same problem. Even adding new addresses (socks4 or 5) connections make several jumps, and hardly the result is expected. For example, web scans... ",
    "JimmySplit": "@rofl0r so it's working for you?. So what's the point of round robin if it won't work with bash?. Do you have any idea on how one would go about runnig a bash script in the same process?. @rofl0r so it's working for you?. So what's the point of round robin if it won't work with bash?. Do you have any idea on how one would go about runnig a bash script in the same process?. ",
    "tangxinfa": "Accoding to this article Changing proxychains' \"hardcoded\" DNS server , proxychains accept DNS_SERVER envirement variable, you can change it as you like.\n  export DNS_SERVER=8.8.8.8\n  proxychains firefox. Accoding to this article [Changing proxychains' \"hardcoded\" DNS server ](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&cad=rja&uact=8&ved=0ahUKEwiU0L_b4ODXAhWLw1QKHV42DdYQFghJMAQ&url=http%3A%2F%2Fcarnal0wnage.attackresearch.com%2F2013%2F09%2Fchanging-proxychains-hardcoded-dns.html&usg=AOvVaw0d8OU-lhUkWk4g_pFm95lj), proxychains accept DNS_SERVER envirement variable, you can change it as you like.\n\n  export DNS_SERVER=8.8.8.8\n  proxychains firefox.\n",
    "Cris70": "The privately compiled proxychains works ok (nylas-mail does not work even when proxified, but that's another story).\nOpenSUSE Tumbleweed has v4.11 in its repos, maybe that's the difference.\nThank you!\nCris. Thank you @rofl0r ! Changing the configuration as per your suggestion made it work!!\n. The privately compiled proxychains works ok (nylas-mail does not work even when proxified, but that's another story).\nOpenSUSE Tumbleweed has v4.11 in its repos, maybe that's the difference.\nThank you!\nCris. Thank you @rofl0r ! Changing the configuration as per your suggestion made it work!!\n. ",
    "valkjsaaa": "Duplicate of #78. Duplicate of #78. ",
    "1a1a11a": "Oh, sorry, I didn't mean that, I just have no idea why it hangs after printing out the initial message. I hope if you can point me to some direction that I might be able to find the bug or solve the problem. Thank you! . Oh, sorry, I didn't mean that, I just have no idea why it hangs after printing out the initial message. I hope if you can point me to some direction that I might be able to find the bug or solve the problem. Thank you! . ",
    "Newbiesc": "First of all, thanks for your reply.\nThat would be great. Can you please add that feature (the global flag)? Or maybe you can tell me the correct position must i put it in the source code? In which file?\n. Ok, sir thanks for the info. But maybe you can explain a little about my problem here. \n1.  i add the \"if (disable_proxychains) ...\" code in every hooked functions and i add a debug message in that if. but when i send the signal, the debug message only appear in the close() function. the random chain message still appear.\n\nwhen i send the signal, do every apps that use the proxychains get the signal, or only the one that the PID point to?. here is a part of the libproxychains:\nint connect(int sock, const struct sockaddr *addr, unsigned int len) {\n    if (disable_proxychains) {\n        proxychains_write_log(LOG_PREFIX \"bypass connect\\n\");\n        return true_connect(sock, addr, len);\n    }\n    INIT();\n    PFUNC();\n....\n}\n\nand here is the script that i run with proxychains4\ncount=0\nmax=60\ndelay=2\nnoLimit=0\nwhile [ 1 = 1 ];\ndo sleep $delay;count=$(($count + 1));\nwget -qO- ipecho.net/plain\nif [[ $count -ge $max && $noLimit = 0 ]]\nthen\nexit 1;\nfi\ndone;\n. Here is the output i get:\n....\n[proxychains] DLL init: proxychains-ng 4.12\n[proxychains] Signal registered\n[proxychains] 0 getaddrinfo called\n[proxychains] 0 connect called\n[proxychains] 0 freeaddrinfo called\n[proxychains] 0 connect called\n[proxychains] Random chain  ...  119.28.75.178:1080  ...  146.255.36.1:80  ...  OK\n[proxychains] 0 close called\n119.28.75.178[proxychains] 0 close called\n[proxychains] 1 close called\n[proxychains] bypass close\n[proxychains] DLL init: proxychains-ng 4.12\n[proxychains] Signal registered\n[proxychains] 1 close called\n[proxychains] bypass close\n[proxychains] DLL init: proxychains-ng 4.12\n[proxychains] Signal registered\n[proxychains] 0 getaddrinfo called\n[proxychains] 0 connect called\n[proxychains] 0 freeaddrinfo called\n[proxychains] 0 connect called\n[proxychains] Random chain  ...  183.239.240.138:1080  ...  146.255.36.1:80  ...  OK\n[proxychains] 0 close called\n183.239.240.138[proxychains] 0 close called\n[proxychains] 1 close called\n[proxychains] bypass close\n[proxychains] DLL init: proxychains-ng 4.12\n[proxychains] Signal registered. Well, it just a test of the original program. As i did another debug, the close function called twice, and the 2nd one read the disable_proxychains variable correctly while the 1st one get it from the initial variable declaration. But that give me a conclusion to make the variable more global to be used by the lib.\nAnyway, thanks a lot of your creation and your help sir. GBU.. First of all, thanks for your reply.\nThat would be great. Can you please add that feature (the global flag)? Or maybe you can tell me the correct position must i put it in the source code? In which file?\n. Ok, sir thanks for the info. But maybe you can explain a little about my problem here. \n1.  i add the \"if (disable_proxychains) ...\" code in every hooked functions and i add a debug message in that if. but when i send the signal, the debug message only appear in the close() function. the random chain message still appear.\n\nwhen i send the signal, do every apps that use the proxychains get the signal, or only the one that the PID point to?. here is a part of the libproxychains:\nint connect(int sock, const struct sockaddr *addr, unsigned int len) {\n    if (disable_proxychains) {\n        proxychains_write_log(LOG_PREFIX \"bypass connect\\n\");\n        return true_connect(sock, addr, len);\n    }\n    INIT();\n    PFUNC();\n....\n}\n\nand here is the script that i run with proxychains4\ncount=0\nmax=60\ndelay=2\nnoLimit=0\nwhile [ 1 = 1 ];\ndo sleep $delay;count=$(($count + 1));\nwget -qO- ipecho.net/plain\nif [[ $count -ge $max && $noLimit = 0 ]]\nthen\nexit 1;\nfi\ndone;\n. Here is the output i get:\n....\n[proxychains] DLL init: proxychains-ng 4.12\n[proxychains] Signal registered\n[proxychains] 0 getaddrinfo called\n[proxychains] 0 connect called\n[proxychains] 0 freeaddrinfo called\n[proxychains] 0 connect called\n[proxychains] Random chain  ...  119.28.75.178:1080  ...  146.255.36.1:80  ...  OK\n[proxychains] 0 close called\n119.28.75.178[proxychains] 0 close called\n[proxychains] 1 close called\n[proxychains] bypass close\n[proxychains] DLL init: proxychains-ng 4.12\n[proxychains] Signal registered\n[proxychains] 1 close called\n[proxychains] bypass close\n[proxychains] DLL init: proxychains-ng 4.12\n[proxychains] Signal registered\n[proxychains] 0 getaddrinfo called\n[proxychains] 0 connect called\n[proxychains] 0 freeaddrinfo called\n[proxychains] 0 connect called\n[proxychains] Random chain  ...  183.239.240.138:1080  ...  146.255.36.1:80  ...  OK\n[proxychains] 0 close called\n183.239.240.138[proxychains] 0 close called\n[proxychains] 1 close called\n[proxychains] bypass close\n[proxychains] DLL init: proxychains-ng 4.12\n[proxychains] Signal registered. Well, it just a test of the original program. As i did another debug, the close function called twice, and the 2nd one read the disable_proxychains variable correctly while the 1st one get it from the initial variable declaration. But that give me a conclusion to make the variable more global to be used by the lib.\nAnyway, thanks a lot of your creation and your help sir. GBU.. ",
    "ordex": "anybody interested in reviewing this PR?. I personally think the second commit makes sense because the user is not aware of the limit and a crash won't help understanding. Avoid the crash and warning the user is more reasonable I think.. that also makes sense. will do, thanks!. anybody interested in reviewing this PR?. I personally think the second commit makes sense because the user is not aware of the limit and a crash won't help understanding. Avoid the crash and warning the user is more reasonable I think.. that also makes sense. will do, thanks!. ",
    "buzai": "System Integrity Protection status: enabled (Custom Configuration).\nConfiguration:\n    Apple Internal: disabled\n    Kext Signing: disabled\n    Filesystem Protections: disabled\n    Debugging Restrictions: enabled\n    DTrace Restrictions: enabled\n    NVRAM Protections: enabled\n    BaseSystem Verification: enabled\nThis is an unsupported configuration, likely to break in the future and leave your machine in an unknown state.. @rofl0r \nwhen user proxy, it tell me that:\n[proxychains] config file found: /usr/local/Cellar/proxychains-ng/4.11/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\nand the ' curl ip.gs ' return the really ip  . System Integrity Protection status: enabled (Custom Configuration).\nConfiguration:\n    Apple Internal: disabled\n    Kext Signing: disabled\n    Filesystem Protections: disabled\n    Debugging Restrictions: enabled\n    DTrace Restrictions: enabled\n    NVRAM Protections: enabled\n    BaseSystem Verification: enabled\nThis is an unsupported configuration, likely to break in the future and leave your machine in an unknown state.. @rofl0r \nwhen user proxy, it tell me that:\n[proxychains] config file found: /usr/local/Cellar/proxychains-ng/4.11/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.11/lib/libproxychains4.dylib\nand the ' curl ip.gs ' return the really ip  . ",
    "ylluminarious": "@rofl0r Thanks for the response and the info. For now, I'll do what you mentioned in your 1st point, i.e., hide the data via permissions. In reply to your 2nd point, traffic-sniffing only applies if the data in transit is not being encrypted. So encrypting the proxychains.conf file will still make sense so long as the user also makes sure that their traffic is being encrypted.. @rofl0r Well, yes, but VPN also comes to mind.. What do you mean, exactly?. @rofl0r I simply mean to turn on a VPN connection before even making any SOCKS requests so that all traffic is encrypted through the VPN... not sure how that allows any credentials to be stolen.. @rofl0r Yes, at least for all the ones that I know.. @rofl0r Do you mean how do you hide it locally on your machine?. @rofl0r The reason I asked that last question is because I'm not exactly sure what you're getting at -- OpenVPN, at least, is secured by SSL so there's no worry about the credentials being stolen there. If you are referring to locally securing credentials, well, I would also store the credentials in an encrypted location or just use a password manager such as 1password or pass.. @rofl0r Ok, yes, you are right and that does make sense... just wasn't sure what sort of leakage you were referring to.\nSo are you interested in supporting GPG (or other) encryption for proxychains.conf? If not, I'll just close this ticket, or you can. Maybe in the future I'll submit a patch which adds support for this feature.. @rofl0r Alright, understood. Thanks anyway.. @rofl0r Thanks for the response and the info. For now, I'll do what you mentioned in your 1st point, i.e., hide the data via permissions. In reply to your 2nd point, traffic-sniffing only applies if the data in transit is not being encrypted. So encrypting the proxychains.conf file will still make sense so long as the user also makes sure that their traffic is being encrypted.. @rofl0r Well, yes, but VPN also comes to mind.. What do you mean, exactly?. @rofl0r I simply mean to turn on a VPN connection before even making any SOCKS requests so that all traffic is encrypted through the VPN... not sure how that allows any credentials to be stolen.. @rofl0r Yes, at least for all the ones that I know.. @rofl0r Do you mean how do you hide it locally on your machine?. @rofl0r The reason I asked that last question is because I'm not exactly sure what you're getting at -- OpenVPN, at least, is secured by SSL so there's no worry about the credentials being stolen there. If you are referring to locally securing credentials, well, I would also store the credentials in an encrypted location or just use a password manager such as 1password or pass.. @rofl0r Ok, yes, you are right and that does make sense... just wasn't sure what sort of leakage you were referring to.\nSo are you interested in supporting GPG (or other) encryption for proxychains.conf? If not, I'll just close this ticket, or you can. Maybe in the future I'll submit a patch which adds support for this feature.. @rofl0r Alright, understood. Thanks anyway.. ",
    "zonyitoo": "Yes, I can confirm that this message should be printed only once has been shown twice.\nBuild with:\ngcc ponce.c -fPIC -shared -pthread -pipe -g -std=c99 -D_GNU_SOURCE -o ponce.dylib\nLoad it with\nDYLD_INSERT_LIBRARIES=./ponce.dylib cargo update. I have already opened an issue in Apple's Bug Reporter. I think you should open one, too.. After discussing with Apple's engineer, it seems that cargo, git or perl called exec() on itself, which causes that message to be printed more than once.\nSo pthread_once works fine and it is not the cause of this bug. @rofl0r . > Apple Developer Relations\n\nOctober 24 2017, 11:58 PM\nEngineering has provided the following information regarding this issue:\nEach process will run the inserted library's constructor function once, as the library is loaded.\nBy re-execing, or fork/execing, or posix_spawning, a new process is created. (If exec() is used, the new process has the same PID as the old one.)\nThe new process inherits the parent's DYLD_INSERT_LIBRARIES environment variable, so it will also load the inserted library, and run its constructor function, and pthread_once will fire one time.\npthread_once will fire once per process (technically once per pthread_once_t). Since there are multiple processes running in these tests (e.g. one for /usr/bin/perl, then one for /usr/bin/perl5.18), the code under pthread_once will run multiple times, once per process.\nThe same will happen on Linux if you run a program that forks and/or execs with the LD_PRELOAD env var. /usr/bin/perl and /usr/bin/git on macOS do so; the same-named programs Linux may not do so.. Google: \"code signing blocked mmap()\" and you will get the answer.. Yes, I can confirm that this message should be printed only once has been shown twice.\n\nBuild with:\ngcc ponce.c -fPIC -shared -pthread -pipe -g -std=c99 -D_GNU_SOURCE -o ponce.dylib\nLoad it with\nDYLD_INSERT_LIBRARIES=./ponce.dylib cargo update. I have already opened an issue in Apple's Bug Reporter. I think you should open one, too.. After discussing with Apple's engineer, it seems that cargo, git or perl called exec() on itself, which causes that message to be printed more than once.\nSo pthread_once works fine and it is not the cause of this bug. @rofl0r . > Apple Developer Relations\n\nOctober 24 2017, 11:58 PM\nEngineering has provided the following information regarding this issue:\nEach process will run the inserted library's constructor function once, as the library is loaded.\nBy re-execing, or fork/execing, or posix_spawning, a new process is created. (If exec() is used, the new process has the same PID as the old one.)\nThe new process inherits the parent's DYLD_INSERT_LIBRARIES environment variable, so it will also load the inserted library, and run its constructor function, and pthread_once will fire one time.\npthread_once will fire once per process (technically once per pthread_once_t). Since there are multiple processes running in these tests (e.g. one for /usr/bin/perl, then one for /usr/bin/perl5.18), the code under pthread_once will run multiple times, once per process.\nThe same will happen on Linux if you run a program that forks and/or execs with the LD_PRELOAD env var. /usr/bin/perl and /usr/bin/git on macOS do so; the same-named programs Linux may not do so.. Google: \"code signing blocked mmap()\" and you will get the answer.. \n",
    "byronyi": "Since pthread_once fires function call twice. it is reasonable for us to file the issue twice.\n(Credit: https://www.zhihu.com/people/zhu-xiao-e/). Since pthread_once fires function call twice. it is reasonable for us to file the issue twice.\n(Credit: https://www.zhihu.com/people/zhu-xiao-e/). ",
    "karmamaster": "So your version can not run on IOS, right?. thanks, i will try it and be back with the result\n. Hello,\nWhen I tried to build your src I get this error:\n```\nproxychains/src/nameinfo.c:8:5: error: conflicting types for 'getnameinfo'\nint getnameinfo(const void *sa, socklen_t salen, \n    ^\n/Applications/Xcode8.3.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS10.3.sdk/usr/include/netdb.h:272:17: note: \n      previous declaration is here\nint             getnameinfo(const struct sockaddr * __restrict, socklen_t,\n                ^\n1 error generated.\n```\nCan you take a look at this?\nSOLVED: I have changed the function name to getnameinfopc and it worked. \nBut another question, Can I apply the proxychains for whole system? or proxychains only work for specific app like in the guide (use proxychains telnet google.com to use proxy on telnet)\nThanks.. So there is no way to apply proxychains to whole system, right?. Yeah, I got it. Do you have any else communicate channel beside github? like facebook, skype or something like that? Make friends are never be so bad :D. I just wondered if YOU are not a developer so how can YOU use this? Do it by your self first and ask when you have tried all things you have found.. So your version can not run on IOS, right?. thanks, i will try it and be back with the result\n. Hello,\nWhen I tried to build your src I get this error:\n```\nproxychains/src/nameinfo.c:8:5: error: conflicting types for 'getnameinfo'\nint getnameinfo(const void *sa, socklen_t salen, \n    ^\n/Applications/Xcode8.3.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS10.3.sdk/usr/include/netdb.h:272:17: note: \n      previous declaration is here\nint             getnameinfo(const struct sockaddr * __restrict, socklen_t,\n                ^\n1 error generated.\n```\nCan you take a look at this?\nSOLVED: I have changed the function name to getnameinfopc and it worked. \nBut another question, Can I apply the proxychains for whole system? or proxychains only work for specific app like in the guide (use proxychains telnet google.com to use proxy on telnet)\nThanks.. So there is no way to apply proxychains to whole system, right?. Yeah, I got it. Do you have any else communicate channel beside github? like facebook, skype or something like that? Make friends are never be so bad :D. I just wondered if YOU are not a developer so how can YOU use this? Do it by your self first and ask when you have tried all things you have found.. ",
    "sinnlosername": "This answer is really helpful. C is a very ugly language, so could you tell me where I need to put code? I think, you, as developer, know where random proxy's are selected. D:. @karmamaster I already looked through the code, before I wrote this ticket. Yes, I'm a developer, but I never devleoped something in c, but I think I'll be able to do some array operations. If I would know where those proxies are selected, I could just set the first proxy to the proxy I want.\n@rofl0r No. I'm good in java & golang. I'm also able to develope small things in php or bash. But even with developing skills in those languages, I'm unable to understand most code of proxychains. So the language is very different or just very hard to understand. ^^. This answer is really helpful. C is a very ugly language, so could you tell me where I need to put code? I think, you, as developer, know where random proxy's are selected. D:. @karmamaster I already looked through the code, before I wrote this ticket. Yes, I'm a developer, but I never devleoped something in c, but I think I'll be able to do some array operations. If I would know where those proxies are selected, I could just set the first proxy to the proxy I want.\n@rofl0r No. I'm good in java & golang. I'm also able to develope small things in php or bash. But even with developing skills in those languages, I'm unable to understand most code of proxychains. So the language is very different or just very hard to understand. ^^. ",
    "lokeshh": "Many thanks for replying.\nHere's the input you asked for:\n```\nroot@kali:~/progs# proxychains4 curl google.com\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] Strict chain  ...  172.16.16.2:3128  ...  google.com:80 <--denied\ncurl: (7) Couldn't connect to server\n```\nAlso see this without proxychains:\n```\nroot@kali:~/progs# curl -x http://172.16.16.2:3128 google.com\n\n302 Moved\n302 Moved\nThe document has moved\nhere.\n\n```. It's squid.\nOn Oct 29, 2017 11:38 PM, \"rofl0r\" notifications@github.com wrote:\n\nwhat's the server software running on that http proxy ? squid ? tinyproxy\n? ... ?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/200#issuecomment-340281814,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHUmVGHHjWXNubKXZvOxGVMIpA1XxTtPks5sxL8LgaJpZM4QKN_1\n.\n. I don't have admin access to the server. It's my college proxy server. But\nmaybe I can run nmap or something to find it's version.\n\nOn Oct 30, 2017 11:52 PM, \"rofl0r\" notifications@github.com wrote:\n\nversion ? can you share its configuration ?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/200#issuecomment-340538354,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHUmVKZgUovyCB4K4WCbUTgUMEddQbIeks5sxhPfgaJpZM4QKN_1\n.\n. I think the version is 2.7.9. Here's the nmap output:\n\n```\n\u279c  lab nmap -p 3128 172.16.16.2 -A\nStarting Nmap 7.60 ( https://nmap.org ) at 2017-10-31 22:31 IST\nNmap scan report for 172.16.16.2\nHost is up (0.00025s latency).\nPORT     STATE SERVICE    VERSION\n3128/tcp open  http-proxy Squid http proxy 2.7.STABLE9\n|_http-open-proxy: Proxy might be redirecting requests\n|_http-server-header: squid/2.7.STABLE9\n|_http-title: ERROR: The requested URL could not be retrieved\nMAC Address: 00:1E:68:0F:8B:BB (Quanta Computer)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose\nRunning: Linux 2.6.X\nOS CPE: cpe:/o:linux:linux_kernel:2.6\nOS details: Linux 2.6.9 - 2.6.18, Linux 2.6.9 - 2.6.27\nNetwork Distance: 1 hop\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.25 ms 172.16.16.2\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 46.50 seconds\n```\n. Many thanks for replying.\nHere's the input you asked for:\n```\nroot@kali:~/progs# proxychains4 curl google.com\n[proxychains] config file found: /etc/proxychains.conf\n[proxychains] preloading /usr/local/lib/libproxychains4.so\n[proxychains] DLL init: proxychains-ng 4.12-git-2-g46647be\n[proxychains] Strict chain  ...  172.16.16.2:3128  ...  google.com:80 <--denied\ncurl: (7) Couldn't connect to server\n```\nAlso see this without proxychains:\n```\nroot@kali:~/progs# curl -x http://172.16.16.2:3128 google.com\n\n302 Moved\n302 Moved\nThe document has moved\nhere.\n\n```. It's squid.\nOn Oct 29, 2017 11:38 PM, \"rofl0r\" notifications@github.com wrote:\n\nwhat's the server software running on that http proxy ? squid ? tinyproxy\n? ... ?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/200#issuecomment-340281814,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHUmVGHHjWXNubKXZvOxGVMIpA1XxTtPks5sxL8LgaJpZM4QKN_1\n.\n. I don't have admin access to the server. It's my college proxy server. But\nmaybe I can run nmap or something to find it's version.\n\nOn Oct 30, 2017 11:52 PM, \"rofl0r\" notifications@github.com wrote:\n\nversion ? can you share its configuration ?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/rofl0r/proxychains-ng/issues/200#issuecomment-340538354,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AHUmVKZgUovyCB4K4WCbUTgUMEddQbIeks5sxhPfgaJpZM4QKN_1\n.\n. I think the version is 2.7.9. Here's the nmap output:\n\n```\n\u279c  lab nmap -p 3128 172.16.16.2 -A\nStarting Nmap 7.60 ( https://nmap.org ) at 2017-10-31 22:31 IST\nNmap scan report for 172.16.16.2\nHost is up (0.00025s latency).\nPORT     STATE SERVICE    VERSION\n3128/tcp open  http-proxy Squid http proxy 2.7.STABLE9\n|_http-open-proxy: Proxy might be redirecting requests\n|_http-server-header: squid/2.7.STABLE9\n|_http-title: ERROR: The requested URL could not be retrieved\nMAC Address: 00:1E:68:0F:8B:BB (Quanta Computer)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nDevice type: general purpose\nRunning: Linux 2.6.X\nOS CPE: cpe:/o:linux:linux_kernel:2.6\nOS details: Linux 2.6.9 - 2.6.18, Linux 2.6.9 - 2.6.27\nNetwork Distance: 1 hop\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.25 ms 172.16.16.2\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 46.50 seconds\n```\n. ",
    "justas05": "Thank you so much.. Thank you so much.. ",
    "singular78": "Debug proxychains4\nFull Error:\nThe Line [proxychains] DLL init: proxychains-ng 4.12 only appears one time. \n~/p/o/proxychains-ng \u276f\u276f\u276f proxychains4 ffmpeg -i sftp://john@localhost:/home/john/downloads/input.mp4 -r 24 output.avi -v trace                 tags/v4.12 \u25fc\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.12_1/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.12\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with Apple LLVM version 9.0.0 (clang-900.0.38)\n  configuration: --prefix=/usr/local/Cellar/ffmpeg/3.4 --enable-shared --enable-pthreads --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-gpl --enable-libmp3lame --enable-libssh --enable-libx264 --enable-libxvid --enable-opencl --enable-videotoolbox --disable-lzma\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nSplitting the commandline.\nReading option '-i' ... matched as input url with argument 'sftp://john@localhost:/home/john/downloads/input.mp4'.\nReading option '-r' ... matched as option 'r' (set frame rate (Hz value, fraction or abbreviation)) with argument '24'.\nReading option 'output.avi' ... matched as output url.\nReading option '-v' ... matched as option 'v' (set logging level) with argument 'trace'.\nFinished splitting the commandline.\nParsing a group of options: global .\nApplying option v (set logging level) with argument trace.\nSuccessfully parsed a group of options.\nParsing a group of options: input url sftp://john@localhost:/home/john/downloads/input.mp4.\nSuccessfully parsed a group of options.\nOpening an input file: sftp://john@localhost:/home/john/downloads/input.mp4.\n[NULL @ 0x7f85c7800000] Opening 'sftp://john@localhost:/home/john/downloads/input.mp4' for reading\n[sftp @ 0x7f85c7409720] No default whitelist set\n[proxychains] Strict chain  ...  127.0.0.1:8889  ...  127.0.0.1:22  ...  OK\nAssertion failed: (ctx), function digest_update, file /BuildRoot/Library/Caches/com.apple.xbs/Sources/boringssl/boringssl-109.20.5/apple/crypto/digests.c, line 49.\n[1]    22333 abort      proxychains4 ffmpeg -i sftp://john@localhost:/home/john/downloads/input.mp4\nLLDB debug info of ffmpeg w/ proxychains4:\n(lldb) r\n......\n[proxychains] Strict chain  ...  127.0.0.1:8889  ...  127.0.0.1:22  ...  OK\nAssertion failed: (ctx), function digest_update, file /BuildRoot/Library/Caches/com.apple.xbs/Sources/boringssl/boringssl-109.20.5/apple/crypto/digests.c, line 49.\nProcess 22278 stopped\n* thread #2, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n    frame #0: 0x00007fff545e9fce libsystem_kernel.dylib`__pthread_kill + 10\nlibsystem_kernel.dylib`__pthread_kill:\n->  0x7fff545e9fce <+10>: jae    0x7fff545e9fd8            ; <+20>\n    0x7fff545e9fd0 <+12>: movq   %rax, %rdi\n    0x7fff545e9fd3 <+15>: jmp    0x7fff545e176c            ; cerror_nocancel\n    0x7fff545e9fd8 <+20>: retq\nTarget 0: (ffmpeg) stopped.\nIt is weird that digest_update is called.\n(lldb) bt\n* thread #2, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n  * frame #0: 0x00007fff545e9fce libsystem_kernel.dylib`__pthread_kill + 10\n    frame #1: 0x00007fff54727150 libsystem_pthread.dylib`pthread_kill + 333\n    frame #2: 0x00007fff5454630a libsystem_c.dylib`abort + 127\n    frame #3: 0x00007fff5450e360 libsystem_c.dylib`__assert_rtn + 320\n    frame #4: 0x00007fff52436520 libboringssl.dylib`digest_update + 51\n    frame #5: 0x0000000101b30bac libcrypto.1.0.0.dylib`HMAC_Init_ex + 407\n    frame #6: 0x00000001018dda53 libssh.4.dylib`hmac_init + 131\n    frame #7: 0x00000001018dc287 libssh.4.dylib`match_hashed_host + 343\n    frame #8: 0x00000001018dc81f libssh.4.dylib`ssh_knownhosts_algorithms + 206\n    frame #9: 0x00000001018db52b libssh.4.dylib`set_client_kex + 211\n    frame #10: 0x00000001018d6ae8 libssh.4.dylib`ssh_client_connection_callback + 382\n    frame #11: 0x00000001018db32f libssh.4.dylib`ssh_packet_kexinit + 911\n    frame #12: 0x00000001018e2e83 libssh.4.dylib`ssh_packet_process + 159\n    frame #13: 0x00000001018e2c97 libssh.4.dylib`ssh_packet_socket_callback + 1230\n    frame #14: 0x00000001018ea60c libssh.4.dylib`ssh_socket_pollcallback + 581\n    frame #15: 0x00000001018e7e1e libssh.4.dylib`ssh_poll_ctx_dopoll + 226\n    frame #16: 0x00000001018e8cdd libssh.4.dylib`ssh_handle_packets + 191\n    frame #17: 0x00000001018e8b1d libssh.4.dylib`ssh_handle_packets_termination + 172\n    frame #18: 0x00000001018d6857 libssh.4.dylib`ssh_connect + 629\n    frame #19: 0x000000010038c3d2 libavformat.57.dylib`___lldb_unnamed_symbol868$$libavformat.57.dylib + 333\n    frame #20: 0x000000010038bb98 libavformat.57.dylib`___lldb_unnamed_symbol858$$libavformat.57.dylib + 48\n    frame #21: 0x000000010034707e libavformat.57.dylib`___lldb_unnamed_symbol196$$libavformat.57.dylib + 486\n    frame #22: 0x0000000100347872 libavformat.57.dylib`ffurl_open_whitelist + 322\n    frame #23: 0x0000000100349fa7 libavformat.57.dylib`___lldb_unnamed_symbol238$$libavformat.57.dylib + 36\n    frame #24: 0x00000001003eb981 libavformat.57.dylib`___lldb_unnamed_symbol1555$$libavformat.57.dylib + 243\n    frame #25: 0x0000000100432706 libavformat.57.dylib`avformat_open_input + 444\n    frame #26: 0x000000010000a0af ffmpeg`___lldb_unnamed_symbol2$$ffmpeg + 1403\n    frame #27: 0x00000001000099b6 ffmpeg`___lldb_unnamed_symbol1$$ffmpeg + 266\n    frame #28: 0x00000001000097a4 ffmpeg`ffmpeg_parse_options + 179\n    frame #29: 0x0000000100019cbc ffmpeg`main + 189\n    frame #30: 0x00007fff5449a145 libdyld.dylib`start + 1\n    frame #31: 0x00007fff5449a145 libdyld.dylib`start + 1\nDebug info of ffmpeg w/o proxychains4\nFirst, I set breakpoint on b HMAC_Init_ex.\n(lldb) b HMAC_Init_ex\nBreakpoint 2: 2 locations.\n(lldb) r\nProcess 24872 launched: '/usr/local/bin/ffmpeg' (x86_64)\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with Apple LLVM version 9.0.0 (clang-900.0.38)\n  configuration: --prefix=/usr/local/Cellar/ffmpeg/3.4 --enable-shared --enable-pthreads --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-gpl --enable-libmp3lame --enable-libssh --enable-libx264 --enable-libxvid --enable-opencl --enable-videotoolbox --disable-lzma\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nSplitting the commandline.\nReading option '-i' ... matched as input url with argument 'sftp://byang@localhost:/home/byang/downloads/input.mp4'.\nReading option '-r' ... matched as option 'r' (set frame rate (Hz value, fraction or abbreviation)) with argument '24'.\nReading option 'output.avi' ... matched as output url.\nReading option '-v' ... matched as option 'v' (set logging level) with argument 'trace'.\nFinished splitting the commandline.\nParsing a group of options: global .\nApplying option v (set logging level) with argument trace.\nSuccessfully parsed a group of options.\nParsing a group of options: input url sftp://byang@localhost:/home/byang/downloads/input.mp4.\nSuccessfully parsed a group of options.\nOpening an input file: sftp://byang@localhost:/home/byang/downloads/input.mp4.\n[NULL @ 0x103800400] Opening 'sftp://byang@localhost:/home/byang/downloads/input.mp4' for reading\n[sftp @ 0x101d03200] No default whitelist set\nProcess 24872 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1\n    frame #0: 0x0000000101adca15 libcrypto.1.0.0.dylib`HMAC_Init_ex\nlibcrypto.1.0.0.dylib`HMAC_Init_ex:\n->  0x101adca15 <+0>: pushq  %rbp\n    0x101adca16 <+1>: movq   %rsp, %rbp\n    0x101adca19 <+4>: pushq  %r15\n    0x101adca1b <+6>: pushq  %r14\nTarget 0: (ffmpeg) stopped.\nThen, I break update and digest_update when HMAC_Init_ex is called. update provides the same function as digest_update,  referring to the source code of libcrypto.\n(lldb) b update\nBreakpoint 2: 62 locations.\n(lldb) b digest_update\nBreakpoint 3: where = libboringssl.dylib`digest_update, address = 0x00007fff524364ed\nFinally, update is called multiple times but digest_update is never called, before ffmpeg finishes normally with the error of not finding the nonexistent input.mp4.\n``\n......\n//update` is called multiple times\n......\n(lldb) c\nProcess 24890 resuming\nProcess 24890 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 8.53\n    frame #0: 0x0000000101b6f9cf libcrypto.1.0.0.dylibupdate\nlibcrypto.1.0.0.dylibupdate:\n->  0x101b6f9cf <+0>: pushq  %rbp\n    0x101b6f9d0 <+1>: movq   %rsp, %rbp\n    0x101b6f9d3 <+4>: movq   0x18(%rdi), %rdi\n    0x101b6f9d7 <+8>: popq   %rbp\nTarget 0: (ffmpeg) stopped.\n(lldb) c\nProcess 24890 resuming\n[libssh @ 0x101d02f60] Error opening sftp file: SFTP server: No such file\nsftp://byang@localhost:/home/byang/downloads/input.mp4: Input/output error\nProcess 24890 exited with status = 1 (0x00000001)\n```\nThe only difference between the lldb image list results of the two cases is:\n[250] 4FCA5D2A-8885-3E57-9A9A-0D0D070356FA 0x00000001000de000 /Users/byang/project/opt/proxychains-ng/libproxychains4.dylib\nlibboringssl exists in both their dependent shared libraries.\nNext step:\n\nDebug libcrypto of openssl with source code to figure out why  digest_update is called.\n. I google it and find that digests.c under the path /BuildRoot/Library/Caches/com.apple.xbs/Sources/boringssl/boringssl-109.20.5/apple/crypto/digests.c maybe not open-source and there is very little information about apple xbs.\n\nThe source code of digest.c of  google's boringssl is digest.c of boringssl. Apple may have changed the source\u2019s copyright .\nIs it normal that digest_update of libboringssl is called by libcrypto of openssl ?. # Debug proxychains4\nFull Error:\nThe Line [proxychains] DLL init: proxychains-ng 4.12 only appears one time. \n~/p/o/proxychains-ng \u276f\u276f\u276f proxychains4 ffmpeg -i sftp://john@localhost:/home/john/downloads/input.mp4 -r 24 output.avi -v trace                 tags/v4.12 \u25fc\n[proxychains] config file found: /usr/local/etc/proxychains.conf\n[proxychains] preloading /usr/local/Cellar/proxychains-ng/4.12_1/lib/libproxychains4.dylib\n[proxychains] DLL init: proxychains-ng 4.12\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with Apple LLVM version 9.0.0 (clang-900.0.38)\n  configuration: --prefix=/usr/local/Cellar/ffmpeg/3.4 --enable-shared --enable-pthreads --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-gpl --enable-libmp3lame --enable-libssh --enable-libx264 --enable-libxvid --enable-opencl --enable-videotoolbox --disable-lzma\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nSplitting the commandline.\nReading option '-i' ... matched as input url with argument 'sftp://john@localhost:/home/john/downloads/input.mp4'.\nReading option '-r' ... matched as option 'r' (set frame rate (Hz value, fraction or abbreviation)) with argument '24'.\nReading option 'output.avi' ... matched as output url.\nReading option '-v' ... matched as option 'v' (set logging level) with argument 'trace'.\nFinished splitting the commandline.\nParsing a group of options: global .\nApplying option v (set logging level) with argument trace.\nSuccessfully parsed a group of options.\nParsing a group of options: input url sftp://john@localhost:/home/john/downloads/input.mp4.\nSuccessfully parsed a group of options.\nOpening an input file: sftp://john@localhost:/home/john/downloads/input.mp4.\n[NULL @ 0x7f85c7800000] Opening 'sftp://john@localhost:/home/john/downloads/input.mp4' for reading\n[sftp @ 0x7f85c7409720] No default whitelist set\n[proxychains] Strict chain  ...  127.0.0.1:8889  ...  127.0.0.1:22  ...  OK\nAssertion failed: (ctx), function digest_update, file /BuildRoot/Library/Caches/com.apple.xbs/Sources/boringssl/boringssl-109.20.5/apple/crypto/digests.c, line 49.\n[1]    22333 abort      proxychains4 ffmpeg -i sftp://john@localhost:/home/john/downloads/input.mp4\nLLDB debug info of ffmpeg w/ proxychains4:\n(lldb) r\n......\n[proxychains] Strict chain  ...  127.0.0.1:8889  ...  127.0.0.1:22  ...  OK\nAssertion failed: (ctx), function digest_update, file /BuildRoot/Library/Caches/com.apple.xbs/Sources/boringssl/boringssl-109.20.5/apple/crypto/digests.c, line 49.\nProcess 22278 stopped\n* thread #2, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n    frame #0: 0x00007fff545e9fce libsystem_kernel.dylib`__pthread_kill + 10\nlibsystem_kernel.dylib`__pthread_kill:\n->  0x7fff545e9fce <+10>: jae    0x7fff545e9fd8            ; <+20>\n    0x7fff545e9fd0 <+12>: movq   %rax, %rdi\n    0x7fff545e9fd3 <+15>: jmp    0x7fff545e176c            ; cerror_nocancel\n    0x7fff545e9fd8 <+20>: retq\nTarget 0: (ffmpeg) stopped.\nIt is weird that digest_update is called.\n(lldb) bt\n* thread #2, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n  * frame #0: 0x00007fff545e9fce libsystem_kernel.dylib`__pthread_kill + 10\n    frame #1: 0x00007fff54727150 libsystem_pthread.dylib`pthread_kill + 333\n    frame #2: 0x00007fff5454630a libsystem_c.dylib`abort + 127\n    frame #3: 0x00007fff5450e360 libsystem_c.dylib`__assert_rtn + 320\n    frame #4: 0x00007fff52436520 libboringssl.dylib`digest_update + 51\n    frame #5: 0x0000000101b30bac libcrypto.1.0.0.dylib`HMAC_Init_ex + 407\n    frame #6: 0x00000001018dda53 libssh.4.dylib`hmac_init + 131\n    frame #7: 0x00000001018dc287 libssh.4.dylib`match_hashed_host + 343\n    frame #8: 0x00000001018dc81f libssh.4.dylib`ssh_knownhosts_algorithms + 206\n    frame #9: 0x00000001018db52b libssh.4.dylib`set_client_kex + 211\n    frame #10: 0x00000001018d6ae8 libssh.4.dylib`ssh_client_connection_callback + 382\n    frame #11: 0x00000001018db32f libssh.4.dylib`ssh_packet_kexinit + 911\n    frame #12: 0x00000001018e2e83 libssh.4.dylib`ssh_packet_process + 159\n    frame #13: 0x00000001018e2c97 libssh.4.dylib`ssh_packet_socket_callback + 1230\n    frame #14: 0x00000001018ea60c libssh.4.dylib`ssh_socket_pollcallback + 581\n    frame #15: 0x00000001018e7e1e libssh.4.dylib`ssh_poll_ctx_dopoll + 226\n    frame #16: 0x00000001018e8cdd libssh.4.dylib`ssh_handle_packets + 191\n    frame #17: 0x00000001018e8b1d libssh.4.dylib`ssh_handle_packets_termination + 172\n    frame #18: 0x00000001018d6857 libssh.4.dylib`ssh_connect + 629\n    frame #19: 0x000000010038c3d2 libavformat.57.dylib`___lldb_unnamed_symbol868$$libavformat.57.dylib + 333\n    frame #20: 0x000000010038bb98 libavformat.57.dylib`___lldb_unnamed_symbol858$$libavformat.57.dylib + 48\n    frame #21: 0x000000010034707e libavformat.57.dylib`___lldb_unnamed_symbol196$$libavformat.57.dylib + 486\n    frame #22: 0x0000000100347872 libavformat.57.dylib`ffurl_open_whitelist + 322\n    frame #23: 0x0000000100349fa7 libavformat.57.dylib`___lldb_unnamed_symbol238$$libavformat.57.dylib + 36\n    frame #24: 0x00000001003eb981 libavformat.57.dylib`___lldb_unnamed_symbol1555$$libavformat.57.dylib + 243\n    frame #25: 0x0000000100432706 libavformat.57.dylib`avformat_open_input + 444\n    frame #26: 0x000000010000a0af ffmpeg`___lldb_unnamed_symbol2$$ffmpeg + 1403\n    frame #27: 0x00000001000099b6 ffmpeg`___lldb_unnamed_symbol1$$ffmpeg + 266\n    frame #28: 0x00000001000097a4 ffmpeg`ffmpeg_parse_options + 179\n    frame #29: 0x0000000100019cbc ffmpeg`main + 189\n    frame #30: 0x00007fff5449a145 libdyld.dylib`start + 1\n    frame #31: 0x00007fff5449a145 libdyld.dylib`start + 1\nDebug info of ffmpeg w/o proxychains4\nFirst, I set breakpoint on b HMAC_Init_ex.\n(lldb) b HMAC_Init_ex\nBreakpoint 2: 2 locations.\n(lldb) r\nProcess 24872 launched: '/usr/local/bin/ffmpeg' (x86_64)\nffmpeg version 3.4 Copyright (c) 2000-2017 the FFmpeg developers\n  built with Apple LLVM version 9.0.0 (clang-900.0.38)\n  configuration: --prefix=/usr/local/Cellar/ffmpeg/3.4 --enable-shared --enable-pthreads --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-gpl --enable-libmp3lame --enable-libssh --enable-libx264 --enable-libxvid --enable-opencl --enable-videotoolbox --disable-lzma\n  libavutil      55. 78.100 / 55. 78.100\n  libavcodec     57.107.100 / 57.107.100\n  libavformat    57. 83.100 / 57. 83.100\n  libavdevice    57. 10.100 / 57. 10.100\n  libavfilter     6.107.100 /  6.107.100\n  libavresample   3.  7.  0 /  3.  7.  0\n  libswscale      4.  8.100 /  4.  8.100\n  libswresample   2.  9.100 /  2.  9.100\n  libpostproc    54.  7.100 / 54.  7.100\nSplitting the commandline.\nReading option '-i' ... matched as input url with argument 'sftp://byang@localhost:/home/byang/downloads/input.mp4'.\nReading option '-r' ... matched as option 'r' (set frame rate (Hz value, fraction or abbreviation)) with argument '24'.\nReading option 'output.avi' ... matched as output url.\nReading option '-v' ... matched as option 'v' (set logging level) with argument 'trace'.\nFinished splitting the commandline.\nParsing a group of options: global .\nApplying option v (set logging level) with argument trace.\nSuccessfully parsed a group of options.\nParsing a group of options: input url sftp://byang@localhost:/home/byang/downloads/input.mp4.\nSuccessfully parsed a group of options.\nOpening an input file: sftp://byang@localhost:/home/byang/downloads/input.mp4.\n[NULL @ 0x103800400] Opening 'sftp://byang@localhost:/home/byang/downloads/input.mp4' for reading\n[sftp @ 0x101d03200] No default whitelist set\nProcess 24872 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1\n    frame #0: 0x0000000101adca15 libcrypto.1.0.0.dylib`HMAC_Init_ex\nlibcrypto.1.0.0.dylib`HMAC_Init_ex:\n->  0x101adca15 <+0>: pushq  %rbp\n    0x101adca16 <+1>: movq   %rsp, %rbp\n    0x101adca19 <+4>: pushq  %r15\n    0x101adca1b <+6>: pushq  %r14\nTarget 0: (ffmpeg) stopped.\nThen, I break update and digest_update when HMAC_Init_ex is called. update provides the same function as digest_update,  referring to the source code of libcrypto.\n(lldb) b update\nBreakpoint 2: 62 locations.\n(lldb) b digest_update\nBreakpoint 3: where = libboringssl.dylib`digest_update, address = 0x00007fff524364ed\nFinally, update is called multiple times but digest_update is never called, before ffmpeg finishes normally with the error of not finding the nonexistent input.mp4.\n``\n......\n//update` is called multiple times\n......\n(lldb) c\nProcess 24890 resuming\nProcess 24890 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 8.53\n    frame #0: 0x0000000101b6f9cf libcrypto.1.0.0.dylibupdate\nlibcrypto.1.0.0.dylibupdate:\n->  0x101b6f9cf <+0>: pushq  %rbp\n    0x101b6f9d0 <+1>: movq   %rsp, %rbp\n    0x101b6f9d3 <+4>: movq   0x18(%rdi), %rdi\n    0x101b6f9d7 <+8>: popq   %rbp\nTarget 0: (ffmpeg) stopped.\n(lldb) c\nProcess 24890 resuming\n[libssh @ 0x101d02f60] Error opening sftp file: SFTP server: No such file\nsftp://byang@localhost:/home/byang/downloads/input.mp4: Input/output error\nProcess 24890 exited with status = 1 (0x00000001)\n```\nThe only difference between the lldb image list results of the two cases is:\n[250] 4FCA5D2A-8885-3E57-9A9A-0D0D070356FA 0x00000001000de000 /Users/byang/project/opt/proxychains-ng/libproxychains4.dylib\nlibboringssl exists in both their dependent shared libraries.\nNext step:\n\nDebug libcrypto of openssl with source code to figure out why  digest_update is called.\n. I google it and find that digests.c under the path /BuildRoot/Library/Caches/com.apple.xbs/Sources/boringssl/boringssl-109.20.5/apple/crypto/digests.c maybe not open-source and there is very little information about apple xbs.\n\nThe source code of digest.c of  google's boringssl is digest.c of boringssl. Apple may have changed the source\u2019s copyright .\nIs it normal that digest_update of libboringssl is called by libcrypto of openssl ?. ",
    "livc": "Custom --prefix= will cause couldnt locate libproxychains4.so. Because proxychains-ng will search for the libproxychains4.so in the directory /usr/lib instead of the path user set.\nAs I know, it's not the only one case, many people have encountered this problem like the stackoverflow question I listed.. I saw regex in source code so I tried both ~ and /home/username. Neither works.. Yes, you are right. I'm sorry that I forgot to type the command curl which caused \n\u279c  proxychains-ng git:(master) ./proxychains4 -f ~/etc/proxychains.conf  google.com\n[proxychains] config file found: /home/lizhao/etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\nproxychains can't load process....: No such file or directory. Custom --prefix= will cause couldnt locate libproxychains4.so. Because proxychains-ng will search for the libproxychains4.so in the directory /usr/lib instead of the path user set.\nAs I know, it's not the only one case, many people have encountered this problem like the stackoverflow question I listed.. I saw regex in source code so I tried both ~ and /home/username. Neither works.. Yes, you are right. I'm sorry that I forgot to type the command curl which caused \n\u279c  proxychains-ng git:(master) ./proxychains4 -f ~/etc/proxychains.conf  google.com\n[proxychains] config file found: /home/lizhao/etc/proxychains.conf\n[proxychains] preloading ./libproxychains4.so\nproxychains can't load process....: No such file or directory. "
}